{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYzODM2MDc2", "number": 13974, "title": "Extend SHOW FUNCTIONS", "bodyText": "== RELEASE NOTES ==\n\nGeneral Changes\n* Add support to show whether functions have variable arity in ``SHOW FUNCTIONS``.\n* Add support to show whether functions are built-in in ``SHOW FUNCTIONS``.", "createdAt": "2020-01-16T20:41:39Z", "url": "https://github.com/prestodb/presto/pull/13974", "merged": true, "mergeCommit": {"oid": "8a1bb1bab7b143108df10cd1ac909d809d33fd20"}, "closed": true, "closedAt": "2020-01-27T22:43:26Z", "author": {"login": "caithagoras"}, "timelineItems": {"totalCount": 33, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb7AY8DABqjI5NTYwMDExMDY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb99plCABqjI5Nzk2Mzc0MjU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "686e7414ab45c549e57759568c21ce381f170267", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/686e7414ab45c549e57759568c21ce381f170267", "committedDate": "2020-01-16T20:38:39Z", "message": "Extend SHOW FUNCTIONS to display whether functions have variable arity"}, "afterCommit": {"oid": "9a2dd91d072a0230952eee121defc7b000caf5c3", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/9a2dd91d072a0230952eee121defc7b000caf5c3", "committedDate": "2020-01-16T20:43:34Z", "message": "Extend SHOW FUNCTIONS to display whether functions have variable arity"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9a2dd91d072a0230952eee121defc7b000caf5c3", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/9a2dd91d072a0230952eee121defc7b000caf5c3", "committedDate": "2020-01-16T20:43:34Z", "message": "Extend SHOW FUNCTIONS to display whether functions have variable arity"}, "afterCommit": {"oid": "7a92bccc8bed5cc1ce2938b43a60f4a4b457f5cb", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/7a92bccc8bed5cc1ce2938b43a60f4a4b457f5cb", "committedDate": "2020-01-16T22:22:54Z", "message": "Extend SHOW FUNCTIONS to display whether functions have variable arity"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7a92bccc8bed5cc1ce2938b43a60f4a4b457f5cb", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/7a92bccc8bed5cc1ce2938b43a60f4a4b457f5cb", "committedDate": "2020-01-16T22:22:54Z", "message": "Extend SHOW FUNCTIONS to display whether functions have variable arity"}, "afterCommit": {"oid": "59dffa1a32a5bf40af09e7506980b7e9501a1af1", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/59dffa1a32a5bf40af09e7506980b7e9501a1af1", "committedDate": "2020-01-16T22:37:23Z", "message": "Extend SHOW FUNCTIONS to display whether functions have variable arity"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "59dffa1a32a5bf40af09e7506980b7e9501a1af1", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/59dffa1a32a5bf40af09e7506980b7e9501a1af1", "committedDate": "2020-01-16T22:37:23Z", "message": "Extend SHOW FUNCTIONS to display whether functions have variable arity"}, "afterCommit": {"oid": "cdf07df6ca97f1d607edda0301ffa76ec6a7d0d1", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/cdf07df6ca97f1d607edda0301ffa76ec6a7d0d1", "committedDate": "2020-01-16T23:52:38Z", "message": "Extend SHOW FUNCTIONS to display whether functions have variable arity"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ2OTUyODE3", "url": "https://github.com/prestodb/presto/pull/13974#pullrequestreview-346952817", "createdAt": "2020-01-22T22:35:47Z", "commit": {"oid": "cdf07df6ca97f1d607edda0301ffa76ec6a7d0d1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMlQyMjozNTo0N1rOFgtb4A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMlQyMjozNTo0N1rOFgtb4A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTg0MzE2OA==", "bodyText": "Put the new columns at the end to minimize the possibility of breaking things. I don't think it's necessary to add config property and session property for these. Just add the information to SHOW FUNCTION is enough.", "url": "https://github.com/prestodb/presto/pull/13974#discussion_r369843168", "createdAt": "2020-01-22T22:35:47Z", "author": {"login": "rongrong"}, "path": "presto-main/src/main/java/com/facebook/presto/sql/rewrite/ShowQueriesRewrite.java", "diffHunk": "@@ -525,24 +529,37 @@ protected Node visitShowFunctions(ShowFunctions node, Void context)\n         {\n             ImmutableList.Builder<Expression> rows = ImmutableList.builder();\n             for (SqlFunction function : metadata.listFunctions(session)) {\n-                rows.add(row(\n-                        function.getSignature().getName().getFunctionNamespace().equals(DEFAULT_NAMESPACE) ?\n-                                new StringLiteral(function.getSignature().getNameSuffix()) :\n-                                new StringLiteral(function.getSignature().getName().toString()),\n-                        new StringLiteral(function.getSignature().getReturnType().toString()),\n-                        new StringLiteral(Joiner.on(\", \").join(function.getSignature().getArgumentTypes())),\n-                        new StringLiteral(getFunctionType(function)),\n-                        function.isDeterministic() ? TRUE_LITERAL : FALSE_LITERAL,\n-                        new StringLiteral(nullToEmpty(function.getDescription()))));\n+                Signature signature = function.getSignature();\n+                boolean builtIn = signature.getName().getFunctionNamespace().equals(DEFAULT_NAMESPACE);\n+                ImmutableList.Builder<Expression> values = ImmutableList.<Expression>builder()\n+                        .add(new StringLiteral(builtIn ? signature.getNameSuffix() : signature.getName().toString()))\n+                        .add(new StringLiteral(signature.getReturnType().toString()))\n+                        .add(new StringLiteral(Joiner.on(\", \").join(signature.getArgumentTypes())))\n+                        .add(new StringLiteral(getFunctionType(function)))\n+                        .add(function.isDeterministic() ? TRUE_LITERAL : FALSE_LITERAL);\n+                if (isShowBuiltInColumn(session)) {\n+                    values.add(builtIn ? TRUE_LITERAL : FALSE_LITERAL);\n+                }\n+                if (isShowVariableArityInColumn(session)) {\n+                    values.add(signature.isVariableArity() ? TRUE_LITERAL : FALSE_LITERAL);\n+                }\n+                values.add(new StringLiteral(nullToEmpty(function.getDescription())));\n+                rows.add(new Row(values.build()));\n             }\n \n-            Map<String, String> columns = ImmutableMap.<String, String>builder()\n+            ImmutableMap.Builder<String, String> columnsBuilder = ImmutableMap.<String, String>builder()\n                     .put(\"function_name\", \"Function\")\n                     .put(\"return_type\", \"Return Type\")\n                     .put(\"argument_types\", \"Argument Types\")\n                     .put(\"function_type\", \"Function Type\")\n-                    .put(\"deterministic\", \"Deterministic\")\n-                    .put(\"description\", \"Description\")\n+                    .put(\"deterministic\", \"Deterministic\");\n+            if (isShowBuiltInColumn(session)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cdf07df6ca97f1d607edda0301ffa76ec6a7d0d1"}, "originalPosition": 65}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cdf07df6ca97f1d607edda0301ffa76ec6a7d0d1", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/cdf07df6ca97f1d607edda0301ffa76ec6a7d0d1", "committedDate": "2020-01-16T23:52:38Z", "message": "Extend SHOW FUNCTIONS to display whether functions have variable arity"}, "afterCommit": {"oid": "9805999f8fb0c30843982ebccb733ff6e89bc9d4", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/9805999f8fb0c30843982ebccb733ff6e89bc9d4", "committedDate": "2020-01-23T08:04:18Z", "message": "Extend SHOW FUNCTIONS to display whether functions are built-in"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9805999f8fb0c30843982ebccb733ff6e89bc9d4", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/9805999f8fb0c30843982ebccb733ff6e89bc9d4", "committedDate": "2020-01-23T08:04:18Z", "message": "Extend SHOW FUNCTIONS to display whether functions are built-in"}, "afterCommit": {"oid": "f634fd670437c4eb579b4c69f1ec253647e9a87c", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/f634fd670437c4eb579b4c69f1ec253647e9a87c", "committedDate": "2020-01-23T08:05:29Z", "message": "Extend SHOW FUNCTIONS to display whether functions are built-in"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f634fd670437c4eb579b4c69f1ec253647e9a87c", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/f634fd670437c4eb579b4c69f1ec253647e9a87c", "committedDate": "2020-01-23T08:05:29Z", "message": "Extend SHOW FUNCTIONS to display whether functions are built-in"}, "afterCommit": {"oid": "c22948b5e8faa31278319323d36c1855f2e9613d", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/c22948b5e8faa31278319323d36c1855f2e9613d", "committedDate": "2020-01-23T08:05:47Z", "message": "Extend SHOW FUNCTIONS to display whether functions are built-in"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c22948b5e8faa31278319323d36c1855f2e9613d", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/c22948b5e8faa31278319323d36c1855f2e9613d", "committedDate": "2020-01-23T08:05:47Z", "message": "Extend SHOW FUNCTIONS to display whether functions are built-in"}, "afterCommit": {"oid": "9e664a16b116a3005eec7962a22ccd7a3ded607b", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/9e664a16b116a3005eec7962a22ccd7a3ded607b", "committedDate": "2020-01-23T08:08:42Z", "message": "Extend SHOW FUNCTIONS to display whether functions are built-in"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9e664a16b116a3005eec7962a22ccd7a3ded607b", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/9e664a16b116a3005eec7962a22ccd7a3ded607b", "committedDate": "2020-01-23T08:08:42Z", "message": "Extend SHOW FUNCTIONS to display whether functions are built-in"}, "afterCommit": {"oid": "d4d0abb31977fdb3cc19947a5502bcb0e03eb869", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/d4d0abb31977fdb3cc19947a5502bcb0e03eb869", "committedDate": "2020-01-23T09:24:07Z", "message": "Extend SHOW FUNCTIONS to display whether functions are built-in"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d4d0abb31977fdb3cc19947a5502bcb0e03eb869", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/d4d0abb31977fdb3cc19947a5502bcb0e03eb869", "committedDate": "2020-01-23T09:24:07Z", "message": "Extend SHOW FUNCTIONS to display whether functions are built-in"}, "afterCommit": {"oid": "e87a31e62d8bd4913a862ac9fecf1f20a1da6b06", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/e87a31e62d8bd4913a862ac9fecf1f20a1da6b06", "committedDate": "2020-01-23T09:26:16Z", "message": "Extend SHOW FUNCTIONS to display whether functions are built-in"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e87a31e62d8bd4913a862ac9fecf1f20a1da6b06", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/e87a31e62d8bd4913a862ac9fecf1f20a1da6b06", "committedDate": "2020-01-23T09:26:16Z", "message": "Extend SHOW FUNCTIONS to display whether functions are built-in"}, "afterCommit": {"oid": "ba6221db7065787eb16595798a4f32b9d7cb6174", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/ba6221db7065787eb16595798a4f32b9d7cb6174", "committedDate": "2020-01-23T09:26:47Z", "message": "Extend SHOW FUNCTIONS to display whether functions are built-in"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ3NTk0NDM5", "url": "https://github.com/prestodb/presto/pull/13974#pullrequestreview-347594439", "createdAt": "2020-01-23T20:44:20Z", "commit": {"oid": "0627c838a051eab36957f2619eb20bdbdd3569cf"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QyMDo0NDoyMFrOFhMCtg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QyMDo0NDoyMFrOFhMCtg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDM0NDYzMA==", "bodyText": "This should be a function derived from RoutineCharacteristics.language. Actually is it better to expose language rather than implementation type?", "url": "https://github.com/prestodb/presto/pull/13974#discussion_r370344630", "createdAt": "2020-01-23T20:44:20Z", "author": {"login": "rongrong"}, "path": "presto-spi/src/main/java/com/facebook/presto/spi/function/SqlInvokedFunction.java", "diffHunk": "@@ -109,6 +110,12 @@ public String getDescription()\n         return description;\n     }\n \n+    @Override\n+    public FunctionImplementationType getFunctionImplementationType()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0627c838a051eab36957f2619eb20bdbdd3569cf"}, "originalPosition": 13}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ba6221db7065787eb16595798a4f32b9d7cb6174", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/ba6221db7065787eb16595798a4f32b9d7cb6174", "committedDate": "2020-01-23T09:26:47Z", "message": "Extend SHOW FUNCTIONS to display whether functions are built-in"}, "afterCommit": {"oid": "767984066242426c004a2ea30afffdbf7d901ef3", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/767984066242426c004a2ea30afffdbf7d901ef3", "committedDate": "2020-01-24T01:11:28Z", "message": "Extend SHOW FUNCTIONS to display whether functions are built-in"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "767984066242426c004a2ea30afffdbf7d901ef3", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/767984066242426c004a2ea30afffdbf7d901ef3", "committedDate": "2020-01-24T01:11:28Z", "message": "Extend SHOW FUNCTIONS to display whether functions are built-in"}, "afterCommit": {"oid": "4bc99f6f9df58610e2bd611b4c99af475a4f38f6", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/4bc99f6f9df58610e2bd611b4c99af475a4f38f6", "committedDate": "2020-01-24T01:25:43Z", "message": "Extend SHOW FUNCTIONS to display whether functions are built-in"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4bc99f6f9df58610e2bd611b4c99af475a4f38f6", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/4bc99f6f9df58610e2bd611b4c99af475a4f38f6", "committedDate": "2020-01-24T01:25:43Z", "message": "Extend SHOW FUNCTIONS to display whether functions are built-in"}, "afterCommit": {"oid": "60cfbef4285aa786c66afad097ebe618336e7b33", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/60cfbef4285aa786c66afad097ebe618336e7b33", "committedDate": "2020-01-24T01:27:40Z", "message": "Extend SHOW FUNCTIONS to display whether functions are built-in"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "60cfbef4285aa786c66afad097ebe618336e7b33", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/60cfbef4285aa786c66afad097ebe618336e7b33", "committedDate": "2020-01-24T01:27:40Z", "message": "Extend SHOW FUNCTIONS to display whether functions are built-in"}, "afterCommit": {"oid": "893ac4585974cda3de85f19c59d7038b14069e1e", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/893ac4585974cda3de85f19c59d7038b14069e1e", "committedDate": "2020-01-24T07:12:29Z", "message": "Extend SHOW FUNCTIONS to display whether functions are built-in"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "893ac4585974cda3de85f19c59d7038b14069e1e", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/893ac4585974cda3de85f19c59d7038b14069e1e", "committedDate": "2020-01-24T07:12:29Z", "message": "Extend SHOW FUNCTIONS to display whether functions are built-in"}, "afterCommit": {"oid": "5b1ac8c68756fa85d6068400a5c1fbfbc6167818", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/5b1ac8c68756fa85d6068400a5c1fbfbc6167818", "committedDate": "2020-01-24T07:15:00Z", "message": "Extend SHOW FUNCTIONS to display whether functions are built-in"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5b1ac8c68756fa85d6068400a5c1fbfbc6167818", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/5b1ac8c68756fa85d6068400a5c1fbfbc6167818", "committedDate": "2020-01-24T07:15:00Z", "message": "Extend SHOW FUNCTIONS to display whether functions are built-in"}, "afterCommit": {"oid": "acdcb2e90c40c9b4f94073544d5a3082b88449f7", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/acdcb2e90c40c9b4f94073544d5a3082b88449f7", "committedDate": "2020-01-24T07:16:39Z", "message": "Extend SHOW FUNCTIONS to display whether functions are built-in"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "acdcb2e90c40c9b4f94073544d5a3082b88449f7", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/acdcb2e90c40c9b4f94073544d5a3082b88449f7", "committedDate": "2020-01-24T07:16:39Z", "message": "Extend SHOW FUNCTIONS to display whether functions are built-in"}, "afterCommit": {"oid": "73cd82ffbf11d6ceb10aded7a95b552247ac8b57", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/73cd82ffbf11d6ceb10aded7a95b552247ac8b57", "committedDate": "2020-01-24T07:16:59Z", "message": "Extend SHOW FUNCTIONS to display whether functions are built-in"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "73cd82ffbf11d6ceb10aded7a95b552247ac8b57", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/73cd82ffbf11d6ceb10aded7a95b552247ac8b57", "committedDate": "2020-01-24T07:16:59Z", "message": "Extend SHOW FUNCTIONS to display whether functions are built-in"}, "afterCommit": {"oid": "e28612eed14f257c9f7cd88d5560b8ca33327729", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/e28612eed14f257c9f7cd88d5560b8ca33327729", "committedDate": "2020-01-24T07:17:47Z", "message": "Extend SHOW FUNCTIONS to display whether functions are built-in"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e28612eed14f257c9f7cd88d5560b8ca33327729", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/e28612eed14f257c9f7cd88d5560b8ca33327729", "committedDate": "2020-01-24T07:17:47Z", "message": "Extend SHOW FUNCTIONS to display whether functions are built-in"}, "afterCommit": {"oid": "3b1b35b7c5e916819e8e3e77b12113d3e9f8cb95", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/3b1b35b7c5e916819e8e3e77b12113d3e9f8cb95", "committedDate": "2020-01-24T20:28:15Z", "message": "Extend SHOW FUNCTIONS to display whether functions are built-in"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3b1b35b7c5e916819e8e3e77b12113d3e9f8cb95", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/3b1b35b7c5e916819e8e3e77b12113d3e9f8cb95", "committedDate": "2020-01-24T20:28:15Z", "message": "Extend SHOW FUNCTIONS to display whether functions are built-in"}, "afterCommit": {"oid": "c5c4fdd6e645d8cecfa98dce8f1909a6ace9788b", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/c5c4fdd6e645d8cecfa98dce8f1909a6ace9788b", "committedDate": "2020-01-24T21:52:02Z", "message": "Extend SHOW FUNCTIONS to display whether functions are built-in"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c5c4fdd6e645d8cecfa98dce8f1909a6ace9788b", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/c5c4fdd6e645d8cecfa98dce8f1909a6ace9788b", "committedDate": "2020-01-24T21:52:02Z", "message": "Extend SHOW FUNCTIONS to display whether functions are built-in"}, "afterCommit": {"oid": "dd684b5b01fd79f9487b01316cdeae631a38872d", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/dd684b5b01fd79f9487b01316cdeae631a38872d", "committedDate": "2020-01-24T21:52:35Z", "message": "Extend SHOW FUNCTIONS to display whether functions are built-in"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "264b1c0865c6a43e41d58bf866b649a4c4dbf358", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/264b1c0865c6a43e41d58bf866b649a4c4dbf358", "committedDate": "2020-01-24T21:52:53Z", "message": "Fix testShowFunctions\n\nAlso, added additional assertions."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "dd684b5b01fd79f9487b01316cdeae631a38872d", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/dd684b5b01fd79f9487b01316cdeae631a38872d", "committedDate": "2020-01-24T21:52:35Z", "message": "Extend SHOW FUNCTIONS to display whether functions are built-in"}, "afterCommit": {"oid": "647ebefafecc93443a0bb6078d138e9677a74510", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/647ebefafecc93443a0bb6078d138e9677a74510", "committedDate": "2020-01-24T21:52:53Z", "message": "Extend SHOW FUNCTIONS to display whether functions are built-in"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4MjUzMTMw", "url": "https://github.com/prestodb/presto/pull/13974#pullrequestreview-348253130", "createdAt": "2020-01-24T22:08:56Z", "commit": {"oid": "647ebefafecc93443a0bb6078d138e9677a74510"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQyMjowODo1NlrOFhrxUg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQyMjowODo1NlrOFhrxUg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDg2NDQ2Ng==", "bodyText": "Maybe you also want to use nullToEmpty as in description?", "url": "https://github.com/prestodb/presto/pull/13974#discussion_r370864466", "createdAt": "2020-01-24T22:08:56Z", "author": {"login": "rongrong"}, "path": "presto-main/src/main/java/com/facebook/presto/sql/rewrite/ShowQueriesRewrite.java", "diffHunk": "@@ -527,16 +529,19 @@ protected Node visitShowFunctions(ShowFunctions node, Void context)\n             ImmutableList.Builder<Expression> rows = ImmutableList.builder();\n             for (SqlFunction function : metadata.listFunctions(session)) {\n                 Signature signature = function.getSignature();\n+                boolean builtIn = signature.getName().getFunctionNamespace().equals(DEFAULT_NAMESPACE);\n                 rows.add(row(\n-                        signature.getName().getFunctionNamespace().equals(DEFAULT_NAMESPACE) ?\n-                                new StringLiteral(signature.getNameSuffix()) :\n-                                new StringLiteral(signature.getName().toString()),\n+                        builtIn ? new StringLiteral(signature.getNameSuffix()) : new StringLiteral(signature.getName().toString()),\n                         new StringLiteral(signature.getReturnType().toString()),\n                         new StringLiteral(Joiner.on(\", \").join(signature.getArgumentTypes())),\n                         new StringLiteral(getFunctionType(function)),\n                         function.isDeterministic() ? TRUE_LITERAL : FALSE_LITERAL,\n                         new StringLiteral(nullToEmpty(function.getDescription())),\n-                        signature.isVariableArity() ? TRUE_LITERAL : FALSE_LITERAL));\n+                        signature.isVariableArity() ? TRUE_LITERAL : FALSE_LITERAL,\n+                        builtIn ? TRUE_LITERAL : FALSE_LITERAL,\n+                        function instanceof SqlInvokedFunction\n+                                ? new StringLiteral(((SqlInvokedFunction) function).getRoutineCharacteristics().getLanguage().name().toLowerCase(ENGLISH))\n+                                : new NullLiteral()));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "647ebefafecc93443a0bb6078d138e9677a74510"}, "originalPosition": 36}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "647ebefafecc93443a0bb6078d138e9677a74510", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/647ebefafecc93443a0bb6078d138e9677a74510", "committedDate": "2020-01-24T21:52:53Z", "message": "Extend SHOW FUNCTIONS to display whether functions are built-in"}, "afterCommit": {"oid": "f4ef2c87ed71feda7895569bac93f2c00e47824a", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/f4ef2c87ed71feda7895569bac93f2c00e47824a", "committedDate": "2020-01-24T23:25:18Z", "message": "Extend SHOW FUNCTIONS to display whether functions are built-in"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "16b3f7c9af6f8a34edd000b2514eee4a3927ce25", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/16b3f7c9af6f8a34edd000b2514eee4a3927ce25", "committedDate": "2020-01-24T23:26:44Z", "message": "Extend SHOW FUNCTIONS to display whether functions have variable arity"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f4ef2c87ed71feda7895569bac93f2c00e47824a", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/f4ef2c87ed71feda7895569bac93f2c00e47824a", "committedDate": "2020-01-24T23:25:18Z", "message": "Extend SHOW FUNCTIONS to display whether functions are built-in"}, "afterCommit": {"oid": "0ffe51d8c5fcbeef37bd7b96cfec23486de1b31a", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/0ffe51d8c5fcbeef37bd7b96cfec23486de1b31a", "committedDate": "2020-01-24T23:27:04Z", "message": "Extend SHOW FUNCTIONS to display whether functions are built-in"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0ffe51d8c5fcbeef37bd7b96cfec23486de1b31a", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/0ffe51d8c5fcbeef37bd7b96cfec23486de1b31a", "committedDate": "2020-01-24T23:27:04Z", "message": "Extend SHOW FUNCTIONS to display whether functions are built-in"}, "afterCommit": {"oid": "8c0409bab47a59b5794c51e53751dacef62065e5", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/8c0409bab47a59b5794c51e53751dacef62065e5", "committedDate": "2020-01-24T23:44:30Z", "message": "Extend SHOW FUNCTIONS to display whether functions are built-in"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "445f25da47d32978f62346204a9cb7307c957944", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/445f25da47d32978f62346204a9cb7307c957944", "committedDate": "2020-01-26T01:13:36Z", "message": "Extend SHOW FUNCTIONS to display whether functions are built-in"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8c0409bab47a59b5794c51e53751dacef62065e5", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/8c0409bab47a59b5794c51e53751dacef62065e5", "committedDate": "2020-01-24T23:44:30Z", "message": "Extend SHOW FUNCTIONS to display whether functions are built-in"}, "afterCommit": {"oid": "445f25da47d32978f62346204a9cb7307c957944", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/445f25da47d32978f62346204a9cb7307c957944", "committedDate": "2020-01-26T01:13:36Z", "message": "Extend SHOW FUNCTIONS to display whether functions are built-in"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2425, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}