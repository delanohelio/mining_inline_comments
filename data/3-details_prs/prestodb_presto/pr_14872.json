{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU0ODg5Mjk0", "number": 14872, "title": "Allow export clientInfo, userAgent and spark queue in Presto-on-Spark", "bodyText": "userAgent can be used to store Spark application id.\n== NO RELEASE NOTE ==", "createdAt": "2020-07-22T05:27:11Z", "url": "https://github.com/prestodb/presto/pull/14872", "merged": true, "mergeCommit": {"oid": "3469944fd4c7f5444239f9b83175b09c61c7bcd5"}, "closed": true, "closedAt": "2020-07-22T21:48:25Z", "author": {"login": "wenleix"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc3T56RAH2gAyNDU0ODg5Mjk0OjkyYjBiOTU5YTE4YTQyYzk1N2E3OTc1ODI2OTJiZTM5OTM2YzgyNDE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc3e0F3ABqjM1NzY5NTQzNTc=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "92b0b959a18a42c957a797582692be39936c8241", "author": {"user": {"login": "wenleix", "name": "Wenlei Xie"}}, "url": "https://github.com/prestodb/presto/commit/92b0b959a18a42c957a797582692be39936c8241", "committedDate": "2020-07-22T05:23:22Z", "message": "Allow customizing clientInfo and userAgent in Presto-on-Spark\n\nuserAgent can be used to store Spark application id."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUzMzcwNTc0", "url": "https://github.com/prestodb/presto/pull/14872#pullrequestreview-453370574", "createdAt": "2020-07-22T14:25:32Z", "commit": {"oid": "e5763200b5928f2d30200b26080c790ebd255717"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxNDoyNTozM1rOG1k7tw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxNDoyODowNlrOG1lDHg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODgzMjgyMw==", "bodyText": "Let's pass it through the PrestoSparkSessionContext / PrestoSparkSession. The SessionContext interface has the\n    @Nullable\n    String getUserAgent();\n\ndeclared. We just need to implement it in the PrestoSparkSessionContext and in the PrestoSparkSession", "url": "https://github.com/prestodb/presto/pull/14872#discussion_r458832823", "createdAt": "2020-07-22T14:25:33Z", "author": {"login": "arhimondr"}, "path": "presto-spark-base/src/main/java/com/facebook/presto/spark/PrestoSparkQueryExecutionFactory.java", "diffHunk": "@@ -215,7 +217,9 @@ public PrestoSparkQueryExecutionFactory(\n     public IPrestoSparkQueryExecution create(\n             SparkContext sparkContext,\n             PrestoSparkSession prestoSparkSession,\n+            Optional<String> userAgent,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e5763200b5928f2d30200b26080c790ebd255717"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODgzNDcxOA==", "bodyText": "Do you think it is necessary to split it on \"\\\\.\"? Shouldn't we just store it as is in a single fragment?", "url": "https://github.com/prestodb/presto/pull/14872#discussion_r458834718", "createdAt": "2020-07-22T14:28:06Z", "author": {"login": "arhimondr"}, "path": "presto-spark-base/src/main/java/com/facebook/presto/spark/PrestoSparkQueryExecutionFactory.java", "diffHunk": "@@ -426,6 +435,8 @@ private static QueryInfo createQueryInfo(\n                 succinctBytes(peakTaskUserMemoryInBytes),\n                 succinctBytes(peakTaskTotalMemoryInBytes));\n \n+        Optional<ResourceGroupId> resourceGroupId = sparkQueueName.map(name -> new ResourceGroupId(Arrays.asList(name.split(\"\\\\.\"))));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e5763200b5928f2d30200b26080c790ebd255717"}, "originalPosition": 70}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6d6812aa6e4cb747602b806621f3397029221f36", "author": {"user": {"login": "wenleix", "name": "Wenlei Xie"}}, "url": "https://github.com/prestodb/presto/commit/6d6812aa6e4cb747602b806621f3397029221f36", "committedDate": "2020-07-22T17:52:43Z", "message": "Refactor userAgent handle in Presto-on-Spark\n\nInclude userAgent in PrestoSparkSession"}, "afterCommit": {"oid": "82257237e6bcf5b966ff24a1a49ab8849c2fb438", "author": {"user": {"login": "wenleix", "name": "Wenlei Xie"}}, "url": "https://github.com/prestodb/presto/commit/82257237e6bcf5b966ff24a1a49ab8849c2fb438", "committedDate": "2020-07-22T18:00:32Z", "message": "Refactor userAgent handle in Presto-on-Spark\n\nInclude userAgent in PrestoSparkSession"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d0a2f327ec794e73b5062a855e376097046f03ca", "author": {"user": {"login": "wenleix", "name": "Wenlei Xie"}}, "url": "https://github.com/prestodb/presto/commit/d0a2f327ec794e73b5062a855e376097046f03ca", "committedDate": "2020-07-22T18:05:46Z", "message": "Allow export Spark queue in Presto-on-Spark query event"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "91f319b81d744d9e71db0152be5bd4eb88d42c64", "author": {"user": {"login": "wenleix", "name": "Wenlei Xie"}}, "url": "https://github.com/prestodb/presto/commit/91f319b81d744d9e71db0152be5bd4eb88d42c64", "committedDate": "2020-07-22T18:05:46Z", "message": "Refactor userAgent handle in Presto-on-Spark\n\nInclude userAgent in PrestoSparkSession"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "82257237e6bcf5b966ff24a1a49ab8849c2fb438", "author": {"user": {"login": "wenleix", "name": "Wenlei Xie"}}, "url": "https://github.com/prestodb/presto/commit/82257237e6bcf5b966ff24a1a49ab8849c2fb438", "committedDate": "2020-07-22T18:00:32Z", "message": "Refactor userAgent handle in Presto-on-Spark\n\nInclude userAgent in PrestoSparkSession"}, "afterCommit": {"oid": "91f319b81d744d9e71db0152be5bd4eb88d42c64", "author": {"user": {"login": "wenleix", "name": "Wenlei Xie"}}, "url": "https://github.com/prestodb/presto/commit/91f319b81d744d9e71db0152be5bd4eb88d42c64", "committedDate": "2020-07-22T18:05:46Z", "message": "Refactor userAgent handle in Presto-on-Spark\n\nInclude userAgent in PrestoSparkSession"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1302, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}