{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDUwNDg2NTE0", "number": 14849, "title": "Honor ignore_stats_calculator_failures in getTableStatistics", "bodyText": "ignore_stats_calculator_failures was getting enforced in\ncachingStatsProvider and cachingCostProvider.  However, InputExtractor\nwas calling getTableStatistics directly, so queries could still fail due\nto errors computing stats.  This was particularly a problem when filters\nwere pushed down to the table scan, because we compute filter stats as\npart of getTableStatistics().\n== RELEASE NOTES ==\n\nGeneral Changes\n* Fix an issue where the property ``ignore_stats_calculator_failures`` would not be honored for certain queries that had filters pushed down to the table scan.", "createdAt": "2020-07-16T20:22:44Z", "url": "https://github.com/prestodb/presto/pull/14849", "merged": true, "mergeCommit": {"oid": "aa049ccae726b8f9a382117f495b2453b2ac784a"}, "closed": true, "closedAt": "2020-07-17T15:01:49Z", "author": {"login": "rschlussel"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc1lUzsgFqTQ1MDE5NDk5Mg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc10CBAABqjM1NTgxODkzNDA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwMTk0OTky", "url": "https://github.com/prestodb/presto/pull/14849#pullrequestreview-450194992", "createdAt": "2020-07-16T20:33:18Z", "commit": {"oid": "512bddbfb6e2d30c6c581d212e829e6d8461c353"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "512bddbfb6e2d30c6c581d212e829e6d8461c353", "author": {"user": {"login": "rschlussel", "name": "Rebecca Schlussel"}}, "url": "https://github.com/prestodb/presto/commit/512bddbfb6e2d30c6c581d212e829e6d8461c353", "committedDate": "2020-07-16T20:09:59Z", "message": "Honor ignore_stats_calculator_failures in getTableStatistics\n\nignore_stats_calculator_failures was getting enforced in\ncachingStatsProvider and cachingCostProvider.  However, InputExtractor\nwas calling getTableStatistics directly, so queries could still fail due\nto errors computing stats.  This was particularly a problem when filters\nwere pushed down to the table scan, because we compute filter stats as\npart of getTableStatistics()."}, "afterCommit": {"oid": "18cbb51409e71939a5433cf144c100cabf533835", "author": {"user": {"login": "rschlussel", "name": "Rebecca Schlussel"}}, "url": "https://github.com/prestodb/presto/commit/18cbb51409e71939a5433cf144c100cabf533835", "committedDate": "2020-07-16T22:28:16Z", "message": "Honor ignore_stats_calculator_failures in getTableStatistics\n\nignore_stats_calculator_failures was getting enforced in\ncachingStatsProvider and cachingCostProvider.  However, InputExtractor\nwas calling getTableStatistics directly, so queries could still fail due\nto errors computing stats.  This was particularly a problem when filters\nwere pushed down to the table scan, because we compute filter stats as\npart of getTableStatistics()."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "18cbb51409e71939a5433cf144c100cabf533835", "author": {"user": {"login": "rschlussel", "name": "Rebecca Schlussel"}}, "url": "https://github.com/prestodb/presto/commit/18cbb51409e71939a5433cf144c100cabf533835", "committedDate": "2020-07-16T22:28:16Z", "message": "Honor ignore_stats_calculator_failures in getTableStatistics\n\nignore_stats_calculator_failures was getting enforced in\ncachingStatsProvider and cachingCostProvider.  However, InputExtractor\nwas calling getTableStatistics directly, so queries could still fail due\nto errors computing stats.  This was particularly a problem when filters\nwere pushed down to the table scan, because we compute filter stats as\npart of getTableStatistics()."}, "afterCommit": {"oid": "14b3683a89e1ccb6ba69cd5817c6dfc4bc0355ab", "author": {"user": {"login": "rschlussel", "name": "Rebecca Schlussel"}}, "url": "https://github.com/prestodb/presto/commit/14b3683a89e1ccb6ba69cd5817c6dfc4bc0355ab", "committedDate": "2020-07-16T22:30:23Z", "message": "Honor ignore_stats_calculator_failures in getTableStatistics\n\nignore_stats_calculator_failures was getting enforced in\ncachingStatsProvider and cachingCostProvider.  However, InputExtractor\nwas calling getTableStatistics directly, so queries could still fail due\nto errors computing stats.  This was particularly a problem when filters\nwere pushed down to the table scan, because we compute filter stats as\npart of getTableStatistics()."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwMjYwOTE5", "url": "https://github.com/prestodb/presto/pull/14849#pullrequestreview-450260919", "createdAt": "2020-07-16T22:32:48Z", "commit": {"oid": "14b3683a89e1ccb6ba69cd5817c6dfc4bc0355ab"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQyMjozMjo0OFrOGy_EKA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQyMjozMjo0OFrOGy_EKA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjExNTI0MA==", "bodyText": "perhaps, use com.facebook.presto.SystemSessionProperties#IGNORE_STATS_CALCULATOR_FAILURES constant", "url": "https://github.com/prestodb/presto/pull/14849#discussion_r456115240", "createdAt": "2020-07-16T22:32:48Z", "author": {"login": "mbasmanova"}, "path": "presto-tests/src/test/java/com/facebook/presto/tests/TestMetadataManager.java", "diffHunk": "@@ -152,4 +164,36 @@ public void testUpperCaseSchemaIsChangedToLowerCase()\n                             return null;\n                         });\n     }\n+\n+    @Test\n+    public void testGetTableStatisticsDoesNotThrow()\n+    {\n+        Session session = testSessionBuilder()\n+                .setSystemProperty(\"ignore_stats_calculator_failures\", \"true\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "14b3683a89e1ccb6ba69cd5817c6dfc4bc0355ab"}, "originalPosition": 54}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "569bd0f0fb16f69de9bd8a50a155905baea88a2f", "author": {"user": {"login": "rschlussel", "name": "Rebecca Schlussel"}}, "url": "https://github.com/prestodb/presto/commit/569bd0f0fb16f69de9bd8a50a155905baea88a2f", "committedDate": "2020-07-17T13:40:55Z", "message": "Honor ignore_stats_calculator_failures in getTableStatistics\n\nignore_stats_calculator_failures was getting enforced in\ncachingStatsProvider and cachingCostProvider.  However, InputExtractor\nwas calling getTableStatistics directly, so queries could still fail due\nto errors computing stats.  This was particularly a problem when filters\nwere pushed down to the table scan, because we compute filter stats as\npart of getTableStatistics()."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "14b3683a89e1ccb6ba69cd5817c6dfc4bc0355ab", "author": {"user": {"login": "rschlussel", "name": "Rebecca Schlussel"}}, "url": "https://github.com/prestodb/presto/commit/14b3683a89e1ccb6ba69cd5817c6dfc4bc0355ab", "committedDate": "2020-07-16T22:30:23Z", "message": "Honor ignore_stats_calculator_failures in getTableStatistics\n\nignore_stats_calculator_failures was getting enforced in\ncachingStatsProvider and cachingCostProvider.  However, InputExtractor\nwas calling getTableStatistics directly, so queries could still fail due\nto errors computing stats.  This was particularly a problem when filters\nwere pushed down to the table scan, because we compute filter stats as\npart of getTableStatistics()."}, "afterCommit": {"oid": "569bd0f0fb16f69de9bd8a50a155905baea88a2f", "author": {"user": {"login": "rschlussel", "name": "Rebecca Schlussel"}}, "url": "https://github.com/prestodb/presto/commit/569bd0f0fb16f69de9bd8a50a155905baea88a2f", "committedDate": "2020-07-17T13:40:55Z", "message": "Honor ignore_stats_calculator_failures in getTableStatistics\n\nignore_stats_calculator_failures was getting enforced in\ncachingStatsProvider and cachingCostProvider.  However, InputExtractor\nwas calling getTableStatistics directly, so queries could still fail due\nto errors computing stats.  This was particularly a problem when filters\nwere pushed down to the table scan, because we compute filter stats as\npart of getTableStatistics()."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1283, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}