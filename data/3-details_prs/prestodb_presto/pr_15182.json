{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg4Mjk1NzY0", "number": 15182, "title": "Update default Presto Pinot Connector Configs", "bodyText": "Update default Presto Pinot Connector Configs\nAdd sample pinot connector configs as example in presto-main.\n\nTest plan:\nStarted Presto server and tested queries with default configs:\nconnector.name=pinot\n\n# Pinot controller endpoint\npinot.controller-urls=localhost:9000\n\n== NO RELEASE NOTE ==", "createdAt": "2020-09-16T23:24:54Z", "url": "https://github.com/prestodb/presto/pull/15182", "merged": true, "mergeCommit": {"oid": "00fbb9b371b6676129403ff48cafb2f0b89def43"}, "closed": true, "closedAt": "2020-09-21T18:29:01Z", "author": {"login": "xiangfu0"}, "timelineItems": {"totalCount": 20, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdJk8tlgBqjM3NzU0NDE1OTI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdLFIG5gBqjM3ODkyODAzMzY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "dc880ebc38b10667dd9591a7bdd92de73fc7ba35", "author": {"user": {"login": "xiangfu0", "name": "Xiang Fu"}}, "url": "https://github.com/prestodb/presto/commit/dc880ebc38b10667dd9591a7bdd92de73fc7ba35", "committedDate": "2020-09-16T23:23:22Z", "message": "Adding sample configs as examples for pinot dev env"}, "afterCommit": {"oid": "62067eaab2b9df6040431a4a198759bfcdb4caab", "author": {"user": {"login": "xiangfu0", "name": "Xiang Fu"}}, "url": "https://github.com/prestodb/presto/commit/62067eaab2b9df6040431a4a198759bfcdb4caab", "committedDate": "2020-09-16T23:25:18Z", "message": "Adding sample configs as examples for pinot dev env"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "62067eaab2b9df6040431a4a198759bfcdb4caab", "author": {"user": {"login": "xiangfu0", "name": "Xiang Fu"}}, "url": "https://github.com/prestodb/presto/commit/62067eaab2b9df6040431a4a198759bfcdb4caab", "committedDate": "2020-09-16T23:25:18Z", "message": "Adding sample configs as examples for pinot dev env"}, "afterCommit": {"oid": "1a1e894ee6cd2bf1172ad7f5ba9891873c7c0b40", "author": {"user": {"login": "xiangfu0", "name": "Xiang Fu"}}, "url": "https://github.com/prestodb/presto/commit/1a1e894ee6cd2bf1172ad7f5ba9891873c7c0b40", "committedDate": "2020-09-17T16:21:32Z", "message": "Adding sample configs as examples for pinot dev env"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1a1e894ee6cd2bf1172ad7f5ba9891873c7c0b40", "author": {"user": {"login": "xiangfu0", "name": "Xiang Fu"}}, "url": "https://github.com/prestodb/presto/commit/1a1e894ee6cd2bf1172ad7f5ba9891873c7c0b40", "committedDate": "2020-09-17T16:21:32Z", "message": "Adding sample configs as examples for pinot dev env"}, "afterCommit": {"oid": "421b3b541d10cda4039fb335e7a68dce4904ed4d", "author": {"user": {"login": "xiangfu0", "name": "Xiang Fu"}}, "url": "https://github.com/prestodb/presto/commit/421b3b541d10cda4039fb335e7a68dce4904ed4d", "committedDate": "2020-09-17T22:28:55Z", "message": "Adding sample configs as examples for pinot dev env"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkwMDg1Nzk1", "url": "https://github.com/prestodb/presto/pull/15182#pullrequestreview-490085795", "createdAt": "2020-09-16T23:32:04Z", "commit": {"oid": "62067eaab2b9df6040431a4a198759bfcdb4caab"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQyMzozMjowNFrOHTHmYg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQyMzozMzozOFrOHTHoIw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTgwOTUwNg==", "bodyText": "I think this is a bit broken right now: the order of arguments is different from expected by Pinot", "url": "https://github.com/prestodb/presto/pull/15182#discussion_r489809506", "createdAt": "2020-09-16T23:32:04Z", "author": {"login": "agrawaldevesh"}, "path": "presto-main/etc/catalog/pinot.properties", "diffHunk": "@@ -0,0 +1,9 @@\n+connector.name=pinot\n+pinot.controller-urls=localhost:9000\n+pinot.controller-rest-service=localhost:9000\n+pinot.limit-large-for-segment=10000\n+pinot.allow-multiple-aggregations=true\n+pinot.use-date-trunc=true", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "62067eaab2b9df6040431a4a198759bfcdb4caab"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTgwOTYxMw==", "bodyText": "This is not required with SQL end point", "url": "https://github.com/prestodb/presto/pull/15182#discussion_r489809613", "createdAt": "2020-09-16T23:32:27Z", "author": {"login": "agrawaldevesh"}, "path": "presto-main/etc/catalog/pinot.properties", "diffHunk": "@@ -0,0 +1,9 @@\n+connector.name=pinot\n+pinot.controller-urls=localhost:9000\n+pinot.controller-rest-service=localhost:9000\n+pinot.limit-large-for-segment=10000\n+pinot.allow-multiple-aggregations=true", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "62067eaab2b9df6040431a4a198759bfcdb4caab"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTgwOTc5NA==", "bodyText": "I don't recall but is the default not good enough ? This may lead to data loss issues ?", "url": "https://github.com/prestodb/presto/pull/15182#discussion_r489809794", "createdAt": "2020-09-16T23:33:05Z", "author": {"login": "agrawaldevesh"}, "path": "presto-main/etc/catalog/pinot.properties", "diffHunk": "@@ -0,0 +1,9 @@\n+connector.name=pinot\n+pinot.controller-urls=localhost:9000\n+pinot.controller-rest-service=localhost:9000\n+pinot.limit-large-for-segment=10000", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "62067eaab2b9df6040431a4a198759bfcdb4caab"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTgwOTk1NQ==", "bodyText": "Do we need this ? I think we are trying to reach to broker directly", "url": "https://github.com/prestodb/presto/pull/15182#discussion_r489809955", "createdAt": "2020-09-16T23:33:38Z", "author": {"login": "agrawaldevesh"}, "path": "presto-main/etc/catalog/pinot.properties", "diffHunk": "@@ -0,0 +1,9 @@\n+connector.name=pinot\n+pinot.controller-urls=localhost:9000\n+pinot.controller-rest-service=localhost:9000", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "62067eaab2b9df6040431a4a198759bfcdb4caab"}, "originalPosition": 3}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "421b3b541d10cda4039fb335e7a68dce4904ed4d", "author": {"user": {"login": "xiangfu0", "name": "Xiang Fu"}}, "url": "https://github.com/prestodb/presto/commit/421b3b541d10cda4039fb335e7a68dce4904ed4d", "committedDate": "2020-09-17T22:28:55Z", "message": "Adding sample configs as examples for pinot dev env"}, "afterCommit": {"oid": "8a1c467d03c47ce4c7d13fd5aa0f5862fc553a07", "author": {"user": {"login": "xiangfu0", "name": "Xiang Fu"}}, "url": "https://github.com/prestodb/presto/commit/8a1c467d03c47ce4c7d13fd5aa0f5862fc553a07", "committedDate": "2020-09-20T20:30:34Z", "message": "Adding sample configs as examples for pinot dev env"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkyMjIyMDQ2", "url": "https://github.com/prestodb/presto/pull/15182#pullrequestreview-492222046", "createdAt": "2020-09-20T20:50:35Z", "commit": {"oid": "8a1c467d03c47ce4c7d13fd5aa0f5862fc553a07"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMFQyMDo1MDozNVrOHU8_rg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMFQyMDo1MDozNVrOHU8_rg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTczMjkxMA==", "bodyText": "Since we are anyway filing a prestodb diff here: How about we make these default set in the code itself and thin this config file even more ? I think the only reason not to do that would be that these settings are only supported on a newer Pinot cluster. But that is also true of this 'sample config' file.\nIf you do end up moving these configs there, we can also add this comment Pinot version >= 0.4.0 is required to the PinotConfig.java file.", "url": "https://github.com/prestodb/presto/pull/15182#discussion_r491732910", "createdAt": "2020-09-20T20:50:35Z", "author": {"login": "agrawaldevesh"}, "path": "presto-main/etc/catalog/pinot.properties", "diffHunk": "@@ -0,0 +1,11 @@\n+connector.name=pinot\n+\n+pinot.controller-urls=localhost:9000\n+\n+# Infer Pinot time fields to Presto Date/Timestamp type\n+pinot.infer-date-type-in-schema=true\n+pinot.infer-timestamp-type-in-schema=true\n+\n+# Use Pinot SQL endpoint for broker queries with aggregation pushdown.\n+# Pinot version >= 0.4.0 is required.\n+pinot.use-pinot-sql-for-broker-queries=true", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8a1c467d03c47ce4c7d13fd5aa0f5862fc553a07"}, "originalPosition": 11}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8a1c467d03c47ce4c7d13fd5aa0f5862fc553a07", "author": {"user": {"login": "xiangfu0", "name": "Xiang Fu"}}, "url": "https://github.com/prestodb/presto/commit/8a1c467d03c47ce4c7d13fd5aa0f5862fc553a07", "committedDate": "2020-09-20T20:30:34Z", "message": "Adding sample configs as examples for pinot dev env"}, "afterCommit": {"oid": "3a50ead1664e840fd5dc1a911890523929ded196", "author": {"user": {"login": "xiangfu0", "name": "Xiang Fu"}}, "url": "https://github.com/prestodb/presto/commit/3a50ead1664e840fd5dc1a911890523929ded196", "committedDate": "2020-09-20T21:02:54Z", "message": "Adding sample configs as examples for pinot dev env"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3a50ead1664e840fd5dc1a911890523929ded196", "author": {"user": {"login": "xiangfu0", "name": "Xiang Fu"}}, "url": "https://github.com/prestodb/presto/commit/3a50ead1664e840fd5dc1a911890523929ded196", "committedDate": "2020-09-20T21:02:54Z", "message": "Adding sample configs as examples for pinot dev env"}, "afterCommit": {"oid": "92dfbc66cb2cbff70247efe806017f96c5ee19bf", "author": {"user": {"login": "xiangfu0", "name": "Xiang Fu"}}, "url": "https://github.com/prestodb/presto/commit/92dfbc66cb2cbff70247efe806017f96c5ee19bf", "committedDate": "2020-09-20T21:03:05Z", "message": "Update Presto pinot connector default configs and add sample configs as examples for pinot dev env."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkyMjI0MzQ1", "url": "https://github.com/prestodb/presto/pull/15182#pullrequestreview-492224345", "createdAt": "2020-09-20T21:26:55Z", "commit": {"oid": "92dfbc66cb2cbff70247efe806017f96c5ee19bf"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMFQyMToyNjo1NVrOHU9Neg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMFQyMToyNjo1NVrOHU9Neg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTczNjQ0Mg==", "bodyText": "So you think that these should continue to remain as default false ? What Pinot version were these introduced in ? Is it >= 0.4.0 ? (ie were they introduced in the same version as the SQL end point).", "url": "https://github.com/prestodb/presto/pull/15182#discussion_r491736442", "createdAt": "2020-09-20T21:26:55Z", "author": {"login": "agrawaldevesh"}, "path": "presto-main/etc/catalog/pinot.properties", "diffHunk": "@@ -0,0 +1,7 @@\n+connector.name=pinot\n+\n+pinot.controller-urls=localhost:9000\n+\n+# Infer Pinot time fields to Presto Date/Timestamp type\n+pinot.infer-date-type-in-schema=true\n+pinot.infer-timestamp-type-in-schema=true", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "92dfbc66cb2cbff70247efe806017f96c5ee19bf"}, "originalPosition": 7}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "92dfbc66cb2cbff70247efe806017f96c5ee19bf", "author": {"user": {"login": "xiangfu0", "name": "Xiang Fu"}}, "url": "https://github.com/prestodb/presto/commit/92dfbc66cb2cbff70247efe806017f96c5ee19bf", "committedDate": "2020-09-20T21:03:05Z", "message": "Update Presto pinot connector default configs and add sample configs as examples for pinot dev env."}, "afterCommit": {"oid": "2f21657e3fae5c1adfc0945a370731fe7131bfec", "author": {"user": {"login": "xiangfu0", "name": "Xiang Fu"}}, "url": "https://github.com/prestodb/presto/commit/2f21657e3fae5c1adfc0945a370731fe7131bfec", "committedDate": "2020-09-20T21:54:39Z", "message": "Update Presto pinot connector default configs and add sample configs as examples for pinot dev env."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkyMjI4NDI3", "url": "https://github.com/prestodb/presto/pull/15182#pullrequestreview-492228427", "createdAt": "2020-09-20T22:31:58Z", "commit": {"oid": "2f21657e3fae5c1adfc0945a370731fe7131bfec"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2f21657e3fae5c1adfc0945a370731fe7131bfec", "author": {"user": {"login": "xiangfu0", "name": "Xiang Fu"}}, "url": "https://github.com/prestodb/presto/commit/2f21657e3fae5c1adfc0945a370731fe7131bfec", "committedDate": "2020-09-20T21:54:39Z", "message": "Update Presto pinot connector default configs and add sample configs as examples for pinot dev env."}, "afterCommit": {"oid": "14be108a991e1d0dbbde26f0949e8dde06ece182", "author": {"user": {"login": "xiangfu0", "name": "Xiang Fu"}}, "url": "https://github.com/prestodb/presto/commit/14be108a991e1d0dbbde26f0949e8dde06ece182", "committedDate": "2020-09-20T23:03:16Z", "message": "Update Presto pinot connector default configs and add sample configs as examples for pinot dev env."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkyMjMxMTU3", "url": "https://github.com/prestodb/presto/pull/15182#pullrequestreview-492231157", "createdAt": "2020-09-20T23:12:15Z", "commit": {"oid": "14be108a991e1d0dbbde26f0949e8dde06ece182"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMFQyMzoxMjoxNlrOHU9zqw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMFQyMzoxMjoxNlrOHU9zqw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTc0NjIxOQ==", "bodyText": "No newline at the end of file", "url": "https://github.com/prestodb/presto/pull/15182#discussion_r491746219", "createdAt": "2020-09-20T23:12:16Z", "author": {"login": "agrawaldevesh"}, "path": "presto-main/etc/catalog/pinot.properties", "diffHunk": "@@ -0,0 +1,4 @@\n+connector.name=pinot\n+\n+# Pinot controller endpoint\n+pinot.controller-urls=localhost:9000", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "14be108a991e1d0dbbde26f0949e8dde06ece182"}, "originalPosition": 4}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "14be108a991e1d0dbbde26f0949e8dde06ece182", "author": {"user": {"login": "xiangfu0", "name": "Xiang Fu"}}, "url": "https://github.com/prestodb/presto/commit/14be108a991e1d0dbbde26f0949e8dde06ece182", "committedDate": "2020-09-20T23:03:16Z", "message": "Update Presto pinot connector default configs and add sample configs as examples for pinot dev env."}, "afterCommit": {"oid": "197db74090a05ce8f4c86ac8b3a47fb78628c8be", "author": {"user": {"login": "xiangfu0", "name": "Xiang Fu"}}, "url": "https://github.com/prestodb/presto/commit/197db74090a05ce8f4c86ac8b3a47fb78628c8be", "committedDate": "2020-09-20T23:13:07Z", "message": "Update Presto pinot connector default configs and add sample configs as examples for pinot dev env."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "197db74090a05ce8f4c86ac8b3a47fb78628c8be", "author": {"user": {"login": "xiangfu0", "name": "Xiang Fu"}}, "url": "https://github.com/prestodb/presto/commit/197db74090a05ce8f4c86ac8b3a47fb78628c8be", "committedDate": "2020-09-20T23:13:07Z", "message": "Update Presto pinot connector default configs and add sample configs as examples for pinot dev env."}, "afterCommit": {"oid": "94b4bfbdb316062c60baeaad8327ee942f639d0c", "author": {"user": {"login": "xiangfu0", "name": "Xiang Fu"}}, "url": "https://github.com/prestodb/presto/commit/94b4bfbdb316062c60baeaad8327ee942f639d0c", "committedDate": "2020-09-21T02:35:14Z", "message": "Update Presto pinot connector default configs and add sample configs as examples for pinot dev env."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "94b4bfbdb316062c60baeaad8327ee942f639d0c", "author": {"user": {"login": "xiangfu0", "name": "Xiang Fu"}}, "url": "https://github.com/prestodb/presto/commit/94b4bfbdb316062c60baeaad8327ee942f639d0c", "committedDate": "2020-09-21T02:35:14Z", "message": "Update Presto pinot connector default configs and add sample configs as examples for pinot dev env."}, "afterCommit": {"oid": "89628b2558a03775c03ab0b56a5f4d55b66cdb6a", "author": {"user": {"login": "xiangfu0", "name": "Xiang Fu"}}, "url": "https://github.com/prestodb/presto/commit/89628b2558a03775c03ab0b56a5f4d55b66cdb6a", "committedDate": "2020-09-21T04:47:52Z", "message": "Update default Presto Pinot Connector Configs"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "89628b2558a03775c03ab0b56a5f4d55b66cdb6a", "author": {"user": {"login": "xiangfu0", "name": "Xiang Fu"}}, "url": "https://github.com/prestodb/presto/commit/89628b2558a03775c03ab0b56a5f4d55b66cdb6a", "committedDate": "2020-09-21T04:47:52Z", "message": "Update default Presto Pinot Connector Configs"}, "afterCommit": {"oid": "e26df28eb2a1b600dd6116170ea1bda813c2208c", "author": {"user": {"login": "xiangfu0", "name": "Xiang Fu"}}, "url": "https://github.com/prestodb/presto/commit/e26df28eb2a1b600dd6116170ea1bda813c2208c", "committedDate": "2020-09-21T05:55:17Z", "message": "Update default Presto Pinot Connector Configs"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkyMjk2NzA2", "url": "https://github.com/prestodb/presto/pull/15182#pullrequestreview-492296706", "createdAt": "2020-09-21T06:06:48Z", "commit": {"oid": "e26df28eb2a1b600dd6116170ea1bda813c2208c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "30eeb2b29bb29ba9af5ea8fdc2b275de3b042bf4", "author": {"user": {"login": "xiangfu0", "name": "Xiang Fu"}}, "url": "https://github.com/prestodb/presto/commit/30eeb2b29bb29ba9af5ea8fdc2b275de3b042bf4", "committedDate": "2020-09-21T15:28:29Z", "message": "Update default Presto Pinot Connector Configs"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e26df28eb2a1b600dd6116170ea1bda813c2208c", "author": {"user": {"login": "xiangfu0", "name": "Xiang Fu"}}, "url": "https://github.com/prestodb/presto/commit/e26df28eb2a1b600dd6116170ea1bda813c2208c", "committedDate": "2020-09-21T05:55:17Z", "message": "Update default Presto Pinot Connector Configs"}, "afterCommit": {"oid": "30eeb2b29bb29ba9af5ea8fdc2b275de3b042bf4", "author": {"user": {"login": "xiangfu0", "name": "Xiang Fu"}}, "url": "https://github.com/prestodb/presto/commit/30eeb2b29bb29ba9af5ea8fdc2b275de3b042bf4", "committedDate": "2020-09-21T15:28:29Z", "message": "Update default Presto Pinot Connector Configs"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 143, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}