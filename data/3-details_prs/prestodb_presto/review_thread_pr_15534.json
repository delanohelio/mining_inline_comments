{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQxNDIwOTAw", "number": 15534, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQyMDoyOToyOVrOFGYifA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QwNjoyMDowOVrOFGi2UA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQyMjM3ODIwOnYy", "diffSide": "RIGHT", "path": "presto-main/src/main/java/com/facebook/presto/operator/SpillingUtils.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQyMDoyOToyOVrOIHX2nQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQyMDoyOToyOVrOIHX2nQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDYwMTc1Nw==", "bodyText": "I wasn't sure if there was a better place to put this", "url": "https://github.com/prestodb/presto/pull/15534#discussion_r544601757", "createdAt": "2020-12-16T20:29:29Z", "author": {"login": "rschlussel"}, "path": "presto-main/src/main/java/com/facebook/presto/operator/SpillingUtils.java", "diffHunk": "@@ -0,0 +1,40 @@\n+/*\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.facebook.presto.operator;\n+\n+import com.facebook.presto.spi.PrestoException;\n+\n+import java.util.concurrent.Future;\n+\n+import static com.facebook.airlift.concurrent.MoreFutures.getFutureValue;\n+import static com.facebook.presto.spi.StandardErrorCode.GENERIC_INTERNAL_ERROR;\n+import static java.lang.String.format;\n+\n+public class SpillingUtils\n+{\n+    private SpillingUtils() {}\n+\n+    public static void checkSpillSucceeded(Future spillInProgress)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2b492c19ad60100861c69cccc5d508af6b61aa9a"}, "originalPosition": 28}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQyNDA1MDMyOnYy", "diffSide": "RIGHT", "path": "presto-tests/src/main/java/com/facebook/presto/tests/AbstractTestOrderByQueries.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QwNjoxMzo1OFrOIHmQLg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QyMjozNjoyNlrOIILiWA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDgzNzY3OA==", "bodyText": "nit: irrelevant change?", "url": "https://github.com/prestodb/presto/pull/15534#discussion_r544837678", "createdAt": "2020-12-17T06:13:58Z", "author": {"login": "wenleix"}, "path": "presto-tests/src/main/java/com/facebook/presto/tests/AbstractTestOrderByQueries.java", "diffHunk": "@@ -25,7 +25,7 @@\n import static com.facebook.presto.tests.QueryTemplate.parameter;\n import static com.facebook.presto.tests.QueryTemplate.queryTemplate;\n \n-public class AbstractTestOrderByQueries\n+public abstract class AbstractTestOrderByQueries", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9150680f864fb6a19caee43e4ce8a01b3172b933"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTQ0ODUzNg==", "bodyText": "This is in a separate commit.  I encountered it trying to test the error handling change because it made it annoying to run individual tests through intellij when the class wasn't declared abstract.", "url": "https://github.com/prestodb/presto/pull/15534#discussion_r545448536", "createdAt": "2020-12-17T22:36:26Z", "author": {"login": "rschlussel"}, "path": "presto-tests/src/main/java/com/facebook/presto/tests/AbstractTestOrderByQueries.java", "diffHunk": "@@ -25,7 +25,7 @@\n import static com.facebook.presto.tests.QueryTemplate.parameter;\n import static com.facebook.presto.tests.QueryTemplate.queryTemplate;\n \n-public class AbstractTestOrderByQueries\n+public abstract class AbstractTestOrderByQueries", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDgzNzY3OA=="}, "originalCommit": {"oid": "9150680f864fb6a19caee43e4ce8a01b3172b933"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQyNDA1NzQzOnYy", "diffSide": "RIGHT", "path": "presto-main/src/main/java/com/facebook/presto/operator/SpillingUtils.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QwNjoxNjozOVrOIHmUDA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QyMjo0NzowMVrOIIL1jw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDgzODY2OA==", "bodyText": "nit : what's the difference compared with directly rethrowing it?", "url": "https://github.com/prestodb/presto/pull/15534#discussion_r544838668", "createdAt": "2020-12-17T06:16:39Z", "author": {"login": "wenleix"}, "path": "presto-main/src/main/java/com/facebook/presto/operator/SpillingUtils.java", "diffHunk": "@@ -0,0 +1,40 @@\n+/*\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.facebook.presto.operator;\n+\n+import com.facebook.presto.spi.PrestoException;\n+\n+import java.util.concurrent.Future;\n+\n+import static com.facebook.airlift.concurrent.MoreFutures.getFutureValue;\n+import static com.facebook.presto.spi.StandardErrorCode.GENERIC_INTERNAL_ERROR;\n+import static java.lang.String.format;\n+\n+public class SpillingUtils\n+{\n+    private SpillingUtils() {}\n+\n+    public static void checkSpillSucceeded(Future spillInProgress)\n+    {\n+        try {\n+            getFutureValue(spillInProgress);\n+        }\n+        catch (PrestoException prestoException) {\n+            throw new PrestoException(prestoException::getErrorCode, prestoException.getMessage(), prestoException);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9150680f864fb6a19caee43e4ce8a01b3172b933"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTE5NzAzMw==", "bodyText": "The difference is that this way we get both the stack trace of the cause and the current stacktrace.  this is helpful for example when the error is EXCEEDED_SPILL_LIMIT, because it can show you where we exceeded the spill limit (which operator), and not just the stacktrace from the FileSingleStreamSpiller. In other cases the stacktrace from the cause could be more valuable, so we want both. Wrapping the exception is the only way I know of to do that.", "url": "https://github.com/prestodb/presto/pull/15534#discussion_r545197033", "createdAt": "2020-12-17T15:51:50Z", "author": {"login": "rschlussel"}, "path": "presto-main/src/main/java/com/facebook/presto/operator/SpillingUtils.java", "diffHunk": "@@ -0,0 +1,40 @@\n+/*\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.facebook.presto.operator;\n+\n+import com.facebook.presto.spi.PrestoException;\n+\n+import java.util.concurrent.Future;\n+\n+import static com.facebook.airlift.concurrent.MoreFutures.getFutureValue;\n+import static com.facebook.presto.spi.StandardErrorCode.GENERIC_INTERNAL_ERROR;\n+import static java.lang.String.format;\n+\n+public class SpillingUtils\n+{\n+    private SpillingUtils() {}\n+\n+    public static void checkSpillSucceeded(Future spillInProgress)\n+    {\n+        try {\n+            getFutureValue(spillInProgress);\n+        }\n+        catch (PrestoException prestoException) {\n+            throw new PrestoException(prestoException::getErrorCode, prestoException.getMessage(), prestoException);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDgzODY2OA=="}, "originalCommit": {"oid": "9150680f864fb6a19caee43e4ce8a01b3172b933"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTQ1MzQ1NQ==", "bodyText": "@rschlussel : But the exception caught itself is already a PrestoException? -- so doesn't it already have error code?", "url": "https://github.com/prestodb/presto/pull/15534#discussion_r545453455", "createdAt": "2020-12-17T22:47:01Z", "author": {"login": "wenleix"}, "path": "presto-main/src/main/java/com/facebook/presto/operator/SpillingUtils.java", "diffHunk": "@@ -0,0 +1,40 @@\n+/*\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.facebook.presto.operator;\n+\n+import com.facebook.presto.spi.PrestoException;\n+\n+import java.util.concurrent.Future;\n+\n+import static com.facebook.airlift.concurrent.MoreFutures.getFutureValue;\n+import static com.facebook.presto.spi.StandardErrorCode.GENERIC_INTERNAL_ERROR;\n+import static java.lang.String.format;\n+\n+public class SpillingUtils\n+{\n+    private SpillingUtils() {}\n+\n+    public static void checkSpillSucceeded(Future spillInProgress)\n+    {\n+        try {\n+            getFutureValue(spillInProgress);\n+        }\n+        catch (PrestoException prestoException) {\n+            throw new PrestoException(prestoException::getErrorCode, prestoException.getMessage(), prestoException);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDgzODY2OA=="}, "originalCommit": {"oid": "9150680f864fb6a19caee43e4ce8a01b3172b933"}, "originalPosition": 34}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQyNDA2Mzc5OnYy", "diffSide": "RIGHT", "path": "presto-main/src/main/java/com/facebook/presto/operator/SpillingUtils.java", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QwNjoxODo0N1rOIHmXRA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMVQxNDo0ODozOVrOIJaycw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDgzOTQ5Mg==", "bodyText": "throwing PrestoException will still bury runtimeException as the cause right? -- curious why this is different from throwing the IllegalArgumentException?", "url": "https://github.com/prestodb/presto/pull/15534#discussion_r544839492", "createdAt": "2020-12-17T06:18:47Z", "author": {"login": "wenleix"}, "path": "presto-main/src/main/java/com/facebook/presto/operator/SpillingUtils.java", "diffHunk": "@@ -0,0 +1,40 @@\n+/*\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.facebook.presto.operator;\n+\n+import com.facebook.presto.spi.PrestoException;\n+\n+import java.util.concurrent.Future;\n+\n+import static com.facebook.airlift.concurrent.MoreFutures.getFutureValue;\n+import static com.facebook.presto.spi.StandardErrorCode.GENERIC_INTERNAL_ERROR;\n+import static java.lang.String.format;\n+\n+public class SpillingUtils\n+{\n+    private SpillingUtils() {}\n+\n+    public static void checkSpillSucceeded(Future spillInProgress)\n+    {\n+        try {\n+            getFutureValue(spillInProgress);\n+        }\n+        catch (PrestoException prestoException) {\n+            throw new PrestoException(prestoException::getErrorCode, prestoException.getMessage(), prestoException);\n+        }\n+        catch (RuntimeException runtimeException) {\n+            throw new PrestoException(GENERIC_INTERNAL_ERROR, format(\"Spilling failed: %s\", runtimeException.getMessage()), runtimeException);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9150680f864fb6a19caee43e4ce8a01b3172b933"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTIwMTA2Nw==", "bodyText": "Yes, but it seemed an okay exception to use because it's used as a catchall for any unexpected exception we encounter. IllegalArgumentException seemed a very strange choice since the cause probably has nothing to do with illegal arguments..", "url": "https://github.com/prestodb/presto/pull/15534#discussion_r545201067", "createdAt": "2020-12-17T15:56:51Z", "author": {"login": "rschlussel"}, "path": "presto-main/src/main/java/com/facebook/presto/operator/SpillingUtils.java", "diffHunk": "@@ -0,0 +1,40 @@\n+/*\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.facebook.presto.operator;\n+\n+import com.facebook.presto.spi.PrestoException;\n+\n+import java.util.concurrent.Future;\n+\n+import static com.facebook.airlift.concurrent.MoreFutures.getFutureValue;\n+import static com.facebook.presto.spi.StandardErrorCode.GENERIC_INTERNAL_ERROR;\n+import static java.lang.String.format;\n+\n+public class SpillingUtils\n+{\n+    private SpillingUtils() {}\n+\n+    public static void checkSpillSucceeded(Future spillInProgress)\n+    {\n+        try {\n+            getFutureValue(spillInProgress);\n+        }\n+        catch (PrestoException prestoException) {\n+            throw new PrestoException(prestoException::getErrorCode, prestoException.getMessage(), prestoException);\n+        }\n+        catch (RuntimeException runtimeException) {\n+            throw new PrestoException(GENERIC_INTERNAL_ERROR, format(\"Spilling failed: %s\", runtimeException.getMessage()), runtimeException);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDgzOTQ5Mg=="}, "originalCommit": {"oid": "9150680f864fb6a19caee43e4ce8a01b3172b933"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTQ1NDIwMA==", "bodyText": "I see. So essentially what you want is something like:\n- Rethrow if it's already an PrestoException (so you keep all the stacktrace, etc)\n-  Otherwise, thrown an wrapped exception (and may lose the stacktrace)", "url": "https://github.com/prestodb/presto/pull/15534#discussion_r545454200", "createdAt": "2020-12-17T22:48:47Z", "author": {"login": "wenleix"}, "path": "presto-main/src/main/java/com/facebook/presto/operator/SpillingUtils.java", "diffHunk": "@@ -0,0 +1,40 @@\n+/*\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.facebook.presto.operator;\n+\n+import com.facebook.presto.spi.PrestoException;\n+\n+import java.util.concurrent.Future;\n+\n+import static com.facebook.airlift.concurrent.MoreFutures.getFutureValue;\n+import static com.facebook.presto.spi.StandardErrorCode.GENERIC_INTERNAL_ERROR;\n+import static java.lang.String.format;\n+\n+public class SpillingUtils\n+{\n+    private SpillingUtils() {}\n+\n+    public static void checkSpillSucceeded(Future spillInProgress)\n+    {\n+        try {\n+            getFutureValue(spillInProgress);\n+        }\n+        catch (PrestoException prestoException) {\n+            throw new PrestoException(prestoException::getErrorCode, prestoException.getMessage(), prestoException);\n+        }\n+        catch (RuntimeException runtimeException) {\n+            throw new PrestoException(GENERIC_INTERNAL_ERROR, format(\"Spilling failed: %s\", runtimeException.getMessage()), runtimeException);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDgzOTQ5Mg=="}, "originalCommit": {"oid": "9150680f864fb6a19caee43e4ce8a01b3172b933"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Njc0Njk5NQ==", "bodyText": "We want both stack traces in all cases, because it's hard to know what will be helpful if you don't  know the error.  The wrapped exception is what gives us both stack traces (which is why we wrap the PrestoException in another PrestoException)", "url": "https://github.com/prestodb/presto/pull/15534#discussion_r546746995", "createdAt": "2020-12-21T14:48:39Z", "author": {"login": "rschlussel"}, "path": "presto-main/src/main/java/com/facebook/presto/operator/SpillingUtils.java", "diffHunk": "@@ -0,0 +1,40 @@\n+/*\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.facebook.presto.operator;\n+\n+import com.facebook.presto.spi.PrestoException;\n+\n+import java.util.concurrent.Future;\n+\n+import static com.facebook.airlift.concurrent.MoreFutures.getFutureValue;\n+import static com.facebook.presto.spi.StandardErrorCode.GENERIC_INTERNAL_ERROR;\n+import static java.lang.String.format;\n+\n+public class SpillingUtils\n+{\n+    private SpillingUtils() {}\n+\n+    public static void checkSpillSucceeded(Future spillInProgress)\n+    {\n+        try {\n+            getFutureValue(spillInProgress);\n+        }\n+        catch (PrestoException prestoException) {\n+            throw new PrestoException(prestoException::getErrorCode, prestoException.getMessage(), prestoException);\n+        }\n+        catch (RuntimeException runtimeException) {\n+            throw new PrestoException(GENERIC_INTERNAL_ERROR, format(\"Spilling failed: %s\", runtimeException.getMessage()), runtimeException);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDgzOTQ5Mg=="}, "originalCommit": {"oid": "9150680f864fb6a19caee43e4ce8a01b3172b933"}, "originalPosition": 37}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQyNDA2NzM2OnYy", "diffSide": "RIGHT", "path": "presto-main/src/main/java/com/facebook/presto/operator/SpillingUtils.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QwNjoyMDowOVrOIHmZJw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QwNjoyMDowOVrOIHmZJw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDgzOTk3NQ==", "bodyText": "maybe add comment about why not using checkSuccess in airlift :)", "url": "https://github.com/prestodb/presto/pull/15534#discussion_r544839975", "createdAt": "2020-12-17T06:20:09Z", "author": {"login": "wenleix"}, "path": "presto-main/src/main/java/com/facebook/presto/operator/SpillingUtils.java", "diffHunk": "@@ -0,0 +1,40 @@\n+/*\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.facebook.presto.operator;\n+\n+import com.facebook.presto.spi.PrestoException;\n+\n+import java.util.concurrent.Future;\n+\n+import static com.facebook.airlift.concurrent.MoreFutures.getFutureValue;\n+import static com.facebook.presto.spi.StandardErrorCode.GENERIC_INTERNAL_ERROR;\n+import static java.lang.String.format;\n+\n+public class SpillingUtils\n+{\n+    private SpillingUtils() {}\n+\n+    public static void checkSpillSucceeded(Future spillInProgress)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9150680f864fb6a19caee43e4ce8a01b3172b933"}, "originalPosition": 28}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3291, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}