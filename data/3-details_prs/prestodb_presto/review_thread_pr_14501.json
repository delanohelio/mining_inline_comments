{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE1MzYzMzM0", "number": 14501, "reviewThreads": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOVQwNzozOTo0MVrOD610UA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQwNzowMDoyOVrOD7hBEA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzMDI1NzQ0OnYy", "diffSide": "RIGHT", "path": "presto-druid/src/main/java/com/facebook/presto/druid/DruidConfig.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOVQwNzozOTo0MVrOGS5NeA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOVQwNzozOTo0MVrOGS5NeA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQ2NDg4OA==", "bodyText": "s/hadoopResourceConfigFiles/hadoopConfiguration/g", "url": "https://github.com/prestodb/presto/pull/14501#discussion_r422464888", "createdAt": "2020-05-09T07:39:41Z", "author": {"login": "zhenxiao"}, "path": "presto-druid/src/main/java/com/facebook/presto/druid/DruidConfig.java", "diffHunk": "@@ -15,15 +15,20 @@\n \n import com.facebook.airlift.configuration.Config;\n import com.facebook.airlift.configuration.ConfigDescription;\n+import com.google.common.base.Splitter;\n+import com.google.common.collect.ImmutableList;\n \n import javax.validation.constraints.NotNull;\n \n+import java.util.List;\n+\n public class DruidConfig\n {\n     private String coordinatorUrl;\n     private String brokerUrl;\n     private String schema = \"druid\";\n     private boolean pushdown;\n+    private List<String> hadoopResourceConfigFiles = ImmutableList.of();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d51ff3998c4a6d870b5ddfb29d06e3b14b6bb6a1"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzMDI1ODM2OnYy", "diffSide": "RIGHT", "path": "presto-druid/src/main/java/com/facebook/presto/druid/DruidConfig.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOVQwNzo0MDo1MVrOGS5N8Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQwNTo0Nzo1NlrOGT26PA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQ2NTAwOQ==", "bodyText": "getHadoopConfiguration", "url": "https://github.com/prestodb/presto/pull/14501#discussion_r422465009", "createdAt": "2020-05-09T07:40:51Z", "author": {"login": "zhenxiao"}, "path": "presto-druid/src/main/java/com/facebook/presto/druid/DruidConfig.java", "diffHunk": "@@ -79,4 +84,23 @@ public DruidConfig setComputePushdownEnabled(boolean pushdown)\n         this.pushdown = pushdown;\n         return this;\n     }\n+\n+    @NotNull\n+    public List<String> getHadoopResourceConfigFiles()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d51ff3998c4a6d870b5ddfb29d06e3b14b6bb6a1"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzQ3NTc3Mg==", "bodyText": "done", "url": "https://github.com/prestodb/presto/pull/14501#discussion_r423475772", "createdAt": "2020-05-12T05:47:56Z", "author": {"login": "beinan"}, "path": "presto-druid/src/main/java/com/facebook/presto/druid/DruidConfig.java", "diffHunk": "@@ -79,4 +84,23 @@ public DruidConfig setComputePushdownEnabled(boolean pushdown)\n         this.pushdown = pushdown;\n         return this;\n     }\n+\n+    @NotNull\n+    public List<String> getHadoopResourceConfigFiles()", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQ2NTAwOQ=="}, "originalCommit": {"oid": "d51ff3998c4a6d870b5ddfb29d06e3b14b6bb6a1"}, "originalPosition": 27}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzMDI1OTExOnYy", "diffSide": "RIGHT", "path": "presto-druid/src/main/java/com/facebook/presto/druid/DruidMetadata.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOVQwNzo0MjoxMFrOGS5OVw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQwNTo0Nzo1MVrOGT26JQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQ2NTExMQ==", "bodyText": "add a comment? what is OTHER?", "url": "https://github.com/prestodb/presto/pull/14501#discussion_r422465111", "createdAt": "2020-05-09T07:42:10Z", "author": {"login": "zhenxiao"}, "path": "presto-druid/src/main/java/com/facebook/presto/druid/DruidMetadata.java", "diffHunk": "@@ -147,6 +147,7 @@ private static Type getType(String type)\n     {\n         switch (type.toUpperCase()) {\n             case \"VARCHAR\":\n+            case \"OTHER\":", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c107fce2eee3b71bdba3e158127ba17b807451ec"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzQ3NTc0OQ==", "bodyText": "added", "url": "https://github.com/prestodb/presto/pull/14501#discussion_r423475749", "createdAt": "2020-05-12T05:47:51Z", "author": {"login": "beinan"}, "path": "presto-druid/src/main/java/com/facebook/presto/druid/DruidMetadata.java", "diffHunk": "@@ -147,6 +147,7 @@ private static Type getType(String type)\n     {\n         switch (type.toUpperCase()) {\n             case \"VARCHAR\":\n+            case \"OTHER\":", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQ2NTExMQ=="}, "originalCommit": {"oid": "c107fce2eee3b71bdba3e158127ba17b807451ec"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzMDI2MDM3OnYy", "diffSide": "RIGHT", "path": "presto-druid/src/test/java/com/facebook/presto/druid/TestDruidConfig.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOVQwNzo0NDowMFrOGS5O-g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQwNTozOTo1OFrOGT2xFg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQ2NTI3NA==", "bodyText": "why ((String) null)?", "url": "https://github.com/prestodb/presto/pull/14501#discussion_r422465274", "createdAt": "2020-05-09T07:44:00Z", "author": {"login": "zhenxiao"}, "path": "presto-druid/src/test/java/com/facebook/presto/druid/TestDruidConfig.java", "diffHunk": "@@ -28,10 +29,11 @@\n     public void testDefaults()\n     {\n         assertRecordedDefaults(recordDefaults(DruidConfig.class)\n-                    .setDruidBrokerUrl(null)\n-                    .setDruidCoordinatorUrl(null)\n-                    .setDruidSchema(\"druid\")\n-                    .setComputePushdownEnabled(false));\n+                .setDruidBrokerUrl(null)\n+                .setDruidCoordinatorUrl(null)\n+                .setDruidSchema(\"druid\")\n+                .setComputePushdownEnabled(false)\n+                .setHadoopResourceConfigFiles((String) null));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "43fbc514f4c9b0ae8d2bd54023697c542d5bb657"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzQ3MzQzMA==", "bodyText": "Because there is another setter as below:\n    public DruidConfig setHadoopConfiguration(List<String> files) { if (files != null) { this.hadoopConfiguration = ImmutableList.copyOf(files); } return this; }\nWe need to provide to type explicitly.    Remove the redundant setter above, can we?   I just follow the pattern in presto-hive's config", "url": "https://github.com/prestodb/presto/pull/14501#discussion_r423473430", "createdAt": "2020-05-12T05:39:58Z", "author": {"login": "beinan"}, "path": "presto-druid/src/test/java/com/facebook/presto/druid/TestDruidConfig.java", "diffHunk": "@@ -28,10 +29,11 @@\n     public void testDefaults()\n     {\n         assertRecordedDefaults(recordDefaults(DruidConfig.class)\n-                    .setDruidBrokerUrl(null)\n-                    .setDruidCoordinatorUrl(null)\n-                    .setDruidSchema(\"druid\")\n-                    .setComputePushdownEnabled(false));\n+                .setDruidBrokerUrl(null)\n+                .setDruidCoordinatorUrl(null)\n+                .setDruidSchema(\"druid\")\n+                .setComputePushdownEnabled(false)\n+                .setHadoopResourceConfigFiles((String) null));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQ2NTI3NA=="}, "originalCommit": {"oid": "43fbc514f4c9b0ae8d2bd54023697c542d5bb657"}, "originalPosition": 20}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzNzMwMjg3OnYy", "diffSide": "RIGHT", "path": "presto-druid/src/main/java/com/facebook/presto/druid/DruidMetadata.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQwNjo0OToyNVrOGT4WuA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQyMDo1NDozOVrOGUYlHg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzQ5OTQ0OA==", "bodyText": "comment in a new line:\n// hyperUnique, approxHistogram Druid column types", "url": "https://github.com/prestodb/presto/pull/14501#discussion_r423499448", "createdAt": "2020-05-12T06:49:25Z", "author": {"login": "zhenxiao"}, "path": "presto-druid/src/main/java/com/facebook/presto/druid/DruidMetadata.java", "diffHunk": "@@ -147,7 +147,7 @@ private static Type getType(String type)\n     {\n         switch (type.toUpperCase()) {\n             case \"VARCHAR\":\n-            case \"OTHER\":\n+            case \"OTHER\": //May represent various Druid column types such as hyperUnique, approxHistogram, etc", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a13b194bc6b0a15aef1209a8238d435762d2a3d0"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDAyNzQyMg==", "bodyText": "done", "url": "https://github.com/prestodb/presto/pull/14501#discussion_r424027422", "createdAt": "2020-05-12T20:54:39Z", "author": {"login": "beinan"}, "path": "presto-druid/src/main/java/com/facebook/presto/druid/DruidMetadata.java", "diffHunk": "@@ -147,7 +147,7 @@ private static Type getType(String type)\n     {\n         switch (type.toUpperCase()) {\n             case \"VARCHAR\":\n-            case \"OTHER\":\n+            case \"OTHER\": //May represent various Druid column types such as hyperUnique, approxHistogram, etc", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzQ5OTQ0OA=="}, "originalCommit": {"oid": "a13b194bc6b0a15aef1209a8238d435762d2a3d0"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzNzMzNTIwOnYy", "diffSide": "RIGHT", "path": "presto-druid/src/test/java/com/facebook/presto/druid/TestDruidConfig.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQwNzowMDoyOVrOGT4rDw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQyMDo1NDo1N1rOGUYl1g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzUwNDY1NQ==", "bodyText": "get it. could the following work?\nsetHadoopConfiguration(\"\")", "url": "https://github.com/prestodb/presto/pull/14501#discussion_r423504655", "createdAt": "2020-05-12T07:00:29Z", "author": {"login": "zhenxiao"}, "path": "presto-druid/src/test/java/com/facebook/presto/druid/TestDruidConfig.java", "diffHunk": "@@ -28,10 +29,11 @@\n     public void testDefaults()\n     {\n         assertRecordedDefaults(recordDefaults(DruidConfig.class)\n-                    .setDruidBrokerUrl(null)\n-                    .setDruidCoordinatorUrl(null)\n-                    .setDruidSchema(\"druid\")\n-                    .setComputePushdownEnabled(false));\n+                .setDruidBrokerUrl(null)\n+                .setDruidCoordinatorUrl(null)\n+                .setDruidSchema(\"druid\")\n+                .setComputePushdownEnabled(false)\n+                .setHadoopConfiguration((String) null));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a13b194bc6b0a15aef1209a8238d435762d2a3d0"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDAyNzYwNg==", "bodyText": "I changed it to \"\" as you said, the the tests worked.\nBut it might not be identical with null value,  I think if some user forgot to put this configuration entry,  it would passed a null rather than a \"\" string.", "url": "https://github.com/prestodb/presto/pull/14501#discussion_r424027606", "createdAt": "2020-05-12T20:54:57Z", "author": {"login": "beinan"}, "path": "presto-druid/src/test/java/com/facebook/presto/druid/TestDruidConfig.java", "diffHunk": "@@ -28,10 +29,11 @@\n     public void testDefaults()\n     {\n         assertRecordedDefaults(recordDefaults(DruidConfig.class)\n-                    .setDruidBrokerUrl(null)\n-                    .setDruidCoordinatorUrl(null)\n-                    .setDruidSchema(\"druid\")\n-                    .setComputePushdownEnabled(false));\n+                .setDruidBrokerUrl(null)\n+                .setDruidCoordinatorUrl(null)\n+                .setDruidSchema(\"druid\")\n+                .setComputePushdownEnabled(false)\n+                .setHadoopConfiguration((String) null));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzUwNDY1NQ=="}, "originalCommit": {"oid": "a13b194bc6b0a15aef1209a8238d435762d2a3d0"}, "originalPosition": 20}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2601, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}