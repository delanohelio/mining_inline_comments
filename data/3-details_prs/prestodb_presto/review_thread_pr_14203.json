{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgzMjg0MTAz", "number": 14203, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQyMToyMjo0OVrODlNSJQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQyMToyMjo0OVrODlNSJQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQwMzQxNTQxOnYy", "diffSide": "RIGHT", "path": "presto-main/src/main/java/com/facebook/presto/sql/rewrite/ShowStatsRewrite.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQyMToyMjo0OVrOFx-HEQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQyMjowNDo1OVrOFx_W4A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Nzk0MjE2MQ==", "bodyText": "nit:  break?", "url": "https://github.com/prestodb/presto/pull/14203#discussion_r387942161", "createdAt": "2020-03-04T21:22:49Z", "author": {"login": "arhimondr"}, "path": "presto-main/src/main/java/com/facebook/presto/sql/rewrite/ShowStatsRewrite.java", "diffHunk": "@@ -158,14 +163,32 @@ private void validateShowStatsSubquery(ShowStats node, Query query, QuerySpecifi\n             check(!querySpecification.getGroupBy().isPresent(), node, \"GROUP BY is not supported in SHOW STATS SELECT clause\");\n             check(!querySpecification.getSelect().isDistinct(), node, \"DISTINCT is not supported by SHOW STATS SELECT clause\");\n \n+            ImmutableSet.Builder<String> columnsBuilder = ImmutableSet.builder();\n+            boolean allColumns = false;\n             List<SelectItem> selectItems = querySpecification.getSelect().getSelectItems();\n-            check(selectItems.size() == 1 && selectItems.get(0) instanceof AllColumns, node, \"Only SELECT * is supported in SHOW STATS SELECT clause\");\n+            for (SelectItem selectItem : selectItems) {\n+                if (selectItem instanceof AllColumns) {\n+                    allColumns = true;\n+                    continue;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e5c2f1563f86b5349911d77b721bc91260ef96b6"}, "originalPosition": 74}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Nzk2MjU5Mg==", "bodyText": "@arhimondr I'm using continue to make sure I check all the selectItems, e.g. I want the following query to fail:\nSHOW STATS FOR (SELECT *, nationkey + 1 FROM nation)", "url": "https://github.com/prestodb/presto/pull/14203#discussion_r387962592", "createdAt": "2020-03-04T22:04:59Z", "author": {"login": "mbasmanova"}, "path": "presto-main/src/main/java/com/facebook/presto/sql/rewrite/ShowStatsRewrite.java", "diffHunk": "@@ -158,14 +163,32 @@ private void validateShowStatsSubquery(ShowStats node, Query query, QuerySpecifi\n             check(!querySpecification.getGroupBy().isPresent(), node, \"GROUP BY is not supported in SHOW STATS SELECT clause\");\n             check(!querySpecification.getSelect().isDistinct(), node, \"DISTINCT is not supported by SHOW STATS SELECT clause\");\n \n+            ImmutableSet.Builder<String> columnsBuilder = ImmutableSet.builder();\n+            boolean allColumns = false;\n             List<SelectItem> selectItems = querySpecification.getSelect().getSelectItems();\n-            check(selectItems.size() == 1 && selectItems.get(0) instanceof AllColumns, node, \"Only SELECT * is supported in SHOW STATS SELECT clause\");\n+            for (SelectItem selectItem : selectItems) {\n+                if (selectItem instanceof AllColumns) {\n+                    allColumns = true;\n+                    continue;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Nzk0MjE2MQ=="}, "originalCommit": {"oid": "e5c2f1563f86b5349911d77b721bc91260ef96b6"}, "originalPosition": 74}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2846, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}