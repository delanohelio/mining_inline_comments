{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI3NTIxNTk2", "number": 14603, "title": "Retry and resubmit certain query failures", "bodyText": "Depended by https://github.com/facebookexternal/presto-facebook/pull/1015\nRetry:\n\nRetry DESCRIBE query failure due to TIME_LIMIT_EXCEEDED.\n\nResubmit:\n\nCLUSTER_OUT_OF_MEMORY on test cluster may happen when the concurrency\non the test cluster is too high given the size of the cluster.\nADMINISTRATIVELY_PREEMPTED should also be resubmitted at a later time.\n\n== RELEASE NOTES ==\n\nVerifier Changes\n* Add support to retry ``DESCRIBE`` queries failed with ``TIME_LIMIT_EXCEEDED``.\n* Add support to resubmit verification for ``CLUSTER_OUT_OF_MEMORY`` and \n  `ADMINISTRATIVELY_PREEMPTED` errors.", "createdAt": "2020-06-04T00:33:03Z", "url": "https://github.com/prestodb/presto/pull/14603", "merged": true, "mergeCommit": {"oid": "1f7a05b599eb0649712d03d8dbb179d689930c71"}, "closed": true, "closedAt": "2020-06-10T21:37:16Z", "author": {"login": "caithagoras"}, "timelineItems": {"totalCount": 17, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcnzc8VABqjM0MDQ1OTkwMjc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcpsMEdgFqTQyNzU2ODM1Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4bf9271e3f8723492c634d4e836e3d5c1c3c24ee", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/4bf9271e3f8723492c634d4e836e3d5c1c3c24ee", "committedDate": "2020-06-04T00:30:03Z", "message": "Resubmit CLUSTER_OUT_OF_MEMORY and ADMINISTRATIVELY_PREEMPTED errors\n\nCLUSTER_OUT_OF_MEMORY on test cluster may happen when the concurrency\non the test cluster is too high given the size of the cluster.\n\nADMINISTRATIVELY_PREEMPTED should also be resubmitted at a later time."}, "afterCommit": {"oid": "c70cff7f5d2744d84b34233e70e63371c9360043", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/c70cff7f5d2744d84b34233e70e63371c9360043", "committedDate": "2020-06-04T01:05:30Z", "message": "Use Builder to construct PrestoExceptionClassifier"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c70cff7f5d2744d84b34233e70e63371c9360043", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/c70cff7f5d2744d84b34233e70e63371c9360043", "committedDate": "2020-06-04T01:05:30Z", "message": "Use Builder to construct PrestoExceptionClassifier"}, "afterCommit": {"oid": "34e4a529e4fd6a93918f0f8a1ea752b3761e9f62", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/34e4a529e4fd6a93918f0f8a1ea752b3761e9f62", "committedDate": "2020-06-04T04:04:31Z", "message": "Support marking Exception as retryable conditionally"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "34e4a529e4fd6a93918f0f8a1ea752b3761e9f62", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/34e4a529e4fd6a93918f0f8a1ea752b3761e9f62", "committedDate": "2020-06-04T04:04:31Z", "message": "Support marking Exception as retryable conditionally"}, "afterCommit": {"oid": "5a8b4b9000a7790492f6483dc8e6a80778ec4612", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/5a8b4b9000a7790492f6483dc8e6a80778ec4612", "committedDate": "2020-06-04T04:11:59Z", "message": "Retry DESCRIBE query failure due to TIME_LIMIT_EXCEEDED\n\nTo achieve this, support determining whether a query is retryable\nnot only by error code, but also other factors such as QueryStage\nand error message."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3f33cd79fc955480e2b6eb7f057e3a2b9d1beaf5", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/3f33cd79fc955480e2b6eb7f057e3a2b9d1beaf5", "committedDate": "2020-06-04T04:37:52Z", "message": "Allow resubmitted errors to be configured\n\nMake PrestoExcepttionClassifier.shouldResubmit an instance method."}, "afterCommit": {"oid": "0a0e41ba6077592faa02a80ac4e626cdf263f3b5", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/0a0e41ba6077592faa02a80ac4e626cdf263f3b5", "committedDate": "2020-06-04T04:39:28Z", "message": "Allow resubmitted errors to be configured\n\nMake PrestoExcepttionClassifier.shouldResubmit an instance method."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "36dd275ff82572acfe338542c9f4fbd576195f98", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/36dd275ff82572acfe338542c9f4fbd576195f98", "committedDate": "2020-06-04T04:49:44Z", "message": "Resubmit query for CLUSTER_OUT_OF_MEMORY and ADMINISTRATIVELY_PREEMPTED\n\nAlso, improve readability for TestPrestoExceptionClassifier."}, "afterCommit": {"oid": "0884ec018af0efc0d327efeb6da7d77d82038dfe", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/0884ec018af0efc0d327efeb6da7d77d82038dfe", "committedDate": "2020-06-04T04:53:28Z", "message": "Resubmit query for CLUSTER_OUT_OF_MEMORY and ADMINISTRATIVELY_PREEMPTED\n\nCLUSTER_OUT_OF_MEMORY on test cluster may happen when the concurrency\non the test cluster is too high given the size of the cluster.\n\nADMINISTRATIVELY_PREEMPTED should also be resubmitted at a later time.\n\nAlso, improve readability for TestPrestoExceptionClassifier."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0884ec018af0efc0d327efeb6da7d77d82038dfe", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/0884ec018af0efc0d327efeb6da7d77d82038dfe", "committedDate": "2020-06-04T04:53:28Z", "message": "Resubmit query for CLUSTER_OUT_OF_MEMORY and ADMINISTRATIVELY_PREEMPTED\n\nCLUSTER_OUT_OF_MEMORY on test cluster may happen when the concurrency\non the test cluster is too high given the size of the cluster.\n\nADMINISTRATIVELY_PREEMPTED should also be resubmitted at a later time.\n\nAlso, improve readability for TestPrestoExceptionClassifier."}, "afterCommit": {"oid": "77276984590a4c2a003b8da04f70162111ba6c74", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/77276984590a4c2a003b8da04f70162111ba6c74", "committedDate": "2020-06-04T04:55:26Z", "message": "Resubmit query for CLUSTER_OUT_OF_MEMORY and ADMINISTRATIVELY_PREEMPTED\n\nCLUSTER_OUT_OF_MEMORY on test cluster may happen when the concurrency\non the test cluster is too high given the size of the cluster.\n\nADMINISTRATIVELY_PREEMPTED should also be resubmitted at a later time.\n\nAlso, improve readability for TestPrestoExceptionClassifier."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "77276984590a4c2a003b8da04f70162111ba6c74", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/77276984590a4c2a003b8da04f70162111ba6c74", "committedDate": "2020-06-04T04:55:26Z", "message": "Resubmit query for CLUSTER_OUT_OF_MEMORY and ADMINISTRATIVELY_PREEMPTED\n\nCLUSTER_OUT_OF_MEMORY on test cluster may happen when the concurrency\non the test cluster is too high given the size of the cluster.\n\nADMINISTRATIVELY_PREEMPTED should also be resubmitted at a later time.\n\nAlso, improve readability for TestPrestoExceptionClassifier."}, "afterCommit": {"oid": "028a037e79e60e3cc0577dd97b61945c684e6edb", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/028a037e79e60e3cc0577dd97b61945c684e6edb", "committedDate": "2020-06-04T04:55:59Z", "message": "Resubmit query for CLUSTER_OUT_OF_MEMORY and ADMINISTRATIVELY_PREEMPTED\n\nCLUSTER_OUT_OF_MEMORY on test cluster may happen when the concurrency\non the test cluster is too high given the size of the cluster.\n\nADMINISTRATIVELY_PREEMPTED should also be resubmitted at a later time.\n\nAlso, improve readability for TestPrestoExceptionClassifier."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "028a037e79e60e3cc0577dd97b61945c684e6edb", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/028a037e79e60e3cc0577dd97b61945c684e6edb", "committedDate": "2020-06-04T04:55:59Z", "message": "Resubmit query for CLUSTER_OUT_OF_MEMORY and ADMINISTRATIVELY_PREEMPTED\n\nCLUSTER_OUT_OF_MEMORY on test cluster may happen when the concurrency\non the test cluster is too high given the size of the cluster.\n\nADMINISTRATIVELY_PREEMPTED should also be resubmitted at a later time.\n\nAlso, improve readability for TestPrestoExceptionClassifier."}, "afterCommit": {"oid": "fa150b00477407b091e3bd44b7e4f29baca50baa", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/fa150b00477407b091e3bd44b7e4f29baca50baa", "committedDate": "2020-06-04T04:59:41Z", "message": "Resubmit query for CLUSTER_OUT_OF_MEMORY and ADMINISTRATIVELY_PREEMPTED\n\nCLUSTER_OUT_OF_MEMORY on test cluster may happen when the concurrency\non the test cluster is too high given the size of the cluster.\n\nADMINISTRATIVELY_PREEMPTED should also be resubmitted at a later time.\n\nAlso, improve readability for TestPrestoExceptionClassifier."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fa150b00477407b091e3bd44b7e4f29baca50baa", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/fa150b00477407b091e3bd44b7e4f29baca50baa", "committedDate": "2020-06-04T04:59:41Z", "message": "Resubmit query for CLUSTER_OUT_OF_MEMORY and ADMINISTRATIVELY_PREEMPTED\n\nCLUSTER_OUT_OF_MEMORY on test cluster may happen when the concurrency\non the test cluster is too high given the size of the cluster.\n\nADMINISTRATIVELY_PREEMPTED should also be resubmitted at a later time.\n\nAlso, improve readability for TestPrestoExceptionClassifier."}, "afterCommit": {"oid": "6738c8bf29a8c011bbf6678ebd40f737ca251e26", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/6738c8bf29a8c011bbf6678ebd40f737ca251e26", "committedDate": "2020-06-04T19:53:42Z", "message": "Resubmit query for CLUSTER_OUT_OF_MEMORY and ADMINISTRATIVELY_PREEMPTED\n\nCLUSTER_OUT_OF_MEMORY on test cluster may happen when the concurrency\non the test cluster is too high given the size of the cluster.\n\nADMINISTRATIVELY_PREEMPTED should also be resubmitted at a later time.\n\nAlso, improve readability for TestPrestoExceptionClassifier."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e99a1e4d5e3f4ba60d9b3f992769c5012932967d", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/e99a1e4d5e3f4ba60d9b3f992769c5012932967d", "committedDate": "2020-06-05T20:38:32Z", "message": "Use Builder to construct PrestoExceptionClassifier"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6738c8bf29a8c011bbf6678ebd40f737ca251e26", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/6738c8bf29a8c011bbf6678ebd40f737ca251e26", "committedDate": "2020-06-04T19:53:42Z", "message": "Resubmit query for CLUSTER_OUT_OF_MEMORY and ADMINISTRATIVELY_PREEMPTED\n\nCLUSTER_OUT_OF_MEMORY on test cluster may happen when the concurrency\non the test cluster is too high given the size of the cluster.\n\nADMINISTRATIVELY_PREEMPTED should also be resubmitted at a later time.\n\nAlso, improve readability for TestPrestoExceptionClassifier."}, "afterCommit": {"oid": "292eec8d4f20e6e962805a837491f72812ff92bf", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/292eec8d4f20e6e962805a837491f72812ff92bf", "committedDate": "2020-06-05T20:41:28Z", "message": "Resubmit query for CLUSTER_OUT_OF_MEMORY and ADMINISTRATIVELY_PREEMPTED\n\nCLUSTER_OUT_OF_MEMORY on test cluster may happen when the concurrency\non the test cluster is too high given the size of the cluster.\n\nADMINISTRATIVELY_PREEMPTED should also be resubmitted at a later time.\n\nAlso, improve readability for TestPrestoExceptionClassifier."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI2MDA5NzAx", "url": "https://github.com/prestodb/presto/pull/14603#pullrequestreview-426009701", "createdAt": "2020-06-08T08:23:14Z", "commit": {"oid": "e99a1e4d5e3f4ba60d9b3f992769c5012932967d"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQwODoyMzoxNFrOGgTsfw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQwOTowOTo1OFrOGgVTaA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjUzMDMwMw==", "bodyText": "Do they have to be public? They're only used in PrestoExceptionClassifier.", "url": "https://github.com/prestodb/presto/pull/14603#discussion_r436530303", "createdAt": "2020-06-08T08:23:14Z", "author": {"login": "yingsu00"}, "path": "presto-verifier/src/main/java/com/facebook/presto/verifier/prestoaction/PrestoExceptionClassifier.java", "diffHunk": "@@ -179,4 +168,34 @@ private static boolean isTargetTableAlreadyExistsException(PrestoQueryException\n                 && queryException.getQueryStage().isSetup()\n                 && TABLE_ALREADY_EXISTS_PATTERN.matcher(queryException.getMessage()).find();\n     }\n+\n+    public static class Builder\n+    {\n+        private final ImmutableSet.Builder<ErrorCodeSupplier> recognizedErrors = ImmutableSet.builder();\n+        private final ImmutableSet.Builder<ErrorCodeSupplier> retryableErrors = ImmutableSet.builder();\n+\n+        private Builder()\n+        {\n+        }\n+\n+        public Builder addRecognizedErrors(Iterable<ErrorCodeSupplier> errors)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e99a1e4d5e3f4ba60d9b3f992769c5012932967d"}, "originalPosition": 118}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjUzODIyNQ==", "bodyText": "nit: The parentheses in (obj == null)  and (getClass() != obj.getClass()) are not needed", "url": "https://github.com/prestodb/presto/pull/14603#discussion_r436538225", "createdAt": "2020-06-08T08:37:44Z", "author": {"login": "yingsu00"}, "path": "presto-verifier/src/main/java/com/facebook/presto/verifier/prestoaction/PrestoExceptionClassifier.java", "diffHunk": "@@ -190,12 +206,81 @@ public Builder addRetryableError(ErrorCodeSupplier error)\n             return this;\n         }\n \n+        public Builder addRetryableError(ErrorCodeSupplier errorCode, Optional<QueryStage> queryStage, Optional<Pattern> errorMessagePattern)\n+        {\n+            this.conditionalRetryableErrors.add(new ErrorMatcher(errorCode, queryStage, errorMessagePattern));\n+            return this;\n+        }\n+\n         public PrestoExceptionClassifier build()\n         {\n             Set<ErrorCodeSupplier> recognizedErrors = this.recognizedErrors.build();\n             Set<ErrorCodeSupplier> retryableErrors = this.retryableErrors.build();\n+            Set<ErrorMatcher> conditionalRetryableErrors = this.conditionalRetryableErrors.build();\n             retryableErrors.forEach(error -> checkArgument(recognizedErrors.contains(error), \"Error not recognized: %s\", error));\n-            return new PrestoExceptionClassifier(recognizedErrors, retryableErrors);\n+            conditionalRetryableErrors.forEach(\n+                    errorMatcher -> checkArgument(recognizedErrors.contains(errorMatcher.getErrorCode()), \"Error not recognized: %s\", errorMatcher.getErrorCode()));\n+            return new PrestoExceptionClassifier(recognizedErrors, retryableErrors, conditionalRetryableErrors);\n+        }\n+    }\n+\n+    private static class ErrorMatcher\n+    {\n+        private final ErrorCodeSupplier errorCode;\n+        private final Optional<QueryStage> queryStage;\n+        private final Optional<Pattern> errorMessagePattern;\n+\n+        public ErrorMatcher(\n+                ErrorCodeSupplier errorCode,\n+                Optional<QueryStage> queryStage,\n+                Optional<Pattern> errorMessagePattern)\n+        {\n+            this.errorCode = requireNonNull(errorCode, \"errorCode is null\");\n+            this.queryStage = requireNonNull(queryStage, \"queryStage is null\");\n+            this.errorMessagePattern = requireNonNull(errorMessagePattern, \"errorMessagePattern is null\");\n+        }\n+\n+        public ErrorCodeSupplier getErrorCode()\n+        {\n+            return errorCode;\n+        }\n+\n+        public boolean matches(ErrorCodeSupplier errorCode, QueryStage queryStage, String errorMessage)\n+        {\n+            return this.errorCode.equals(errorCode)\n+                    && (!this.queryStage.isPresent() || this.queryStage.get().equals(queryStage))\n+                    && (!this.errorMessagePattern.isPresent() || this.errorMessagePattern.get().matcher(errorMessage).find());\n+        }\n+\n+        @Override\n+        public boolean equals(Object obj)\n+        {\n+            if (this == obj) {\n+                return true;\n+            }\n+            if ((obj == null) || (getClass() != obj.getClass())) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "539b7acb7cc1768f0c619fc49cea6aab03d23a15"}, "originalPosition": 137}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjU1NjY0OA==", "bodyText": "I think line 133-139 should belong to the next commit", "url": "https://github.com/prestodb/presto/pull/14603#discussion_r436556648", "createdAt": "2020-06-08T09:09:58Z", "author": {"login": "yingsu00"}, "path": "presto-verifier/src/main/java/com/facebook/presto/verifier/prestoaction/PrestoExceptionClassifier.java", "diffHunk": "@@ -128,7 +130,13 @@ public static Builder defaultBuilder()\n                 // From ThriftErrorCode\n                 .addRetryableError(THRIFT_SERVICE_CONNECTION_ERROR)\n                 // Conditional Retryable Errors\n-                .addRetryableError(EXCEEDED_TIME_LIMIT, Optional.of(DESCRIBE), Optional.empty());\n+                .addRetryableError(EXCEEDED_TIME_LIMIT, Optional.of(DESCRIBE), Optional.empty())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bd533abd37e0ada1f71f45154f2ec6205fd16a62"}, "originalPosition": 57}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a97ff1837fda79ff1889914663757e5f3cfa70c2", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/a97ff1837fda79ff1889914663757e5f3cfa70c2", "committedDate": "2020-06-08T20:37:09Z", "message": "Retry DESCRIBE query failure due to TIME_LIMIT_EXCEEDED\n\nTo achieve this, support determining whether a query is retryable\nnot only by error code, but also other factors such as QueryStage\nand error message."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a018d2b658595f1a6b20aabcbc5056d07e441335", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/a018d2b658595f1a6b20aabcbc5056d07e441335", "committedDate": "2020-06-08T20:37:09Z", "message": "Make PrestoExceptionClassifier.shouldResubmit an instance method\n\nThis allows resubmitted errors to be configured the same way as\nretryable errors."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "07f910cb356ba262e2954543a184b20b47f65eeb", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/07f910cb356ba262e2954543a184b20b47f65eeb", "committedDate": "2020-06-08T20:37:10Z", "message": "Resubmit query for CLUSTER_OUT_OF_MEMORY and ADMINISTRATIVELY_PREEMPTED\n\nCLUSTER_OUT_OF_MEMORY on test cluster may happen when the concurrency\non the test cluster is too high given the size of the cluster.\n\nADMINISTRATIVELY_PREEMPTED should also be resubmitted at a later time.\n\nAlso, improve readability for TestPrestoExceptionClassifier."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "292eec8d4f20e6e962805a837491f72812ff92bf", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/292eec8d4f20e6e962805a837491f72812ff92bf", "committedDate": "2020-06-05T20:41:28Z", "message": "Resubmit query for CLUSTER_OUT_OF_MEMORY and ADMINISTRATIVELY_PREEMPTED\n\nCLUSTER_OUT_OF_MEMORY on test cluster may happen when the concurrency\non the test cluster is too high given the size of the cluster.\n\nADMINISTRATIVELY_PREEMPTED should also be resubmitted at a later time.\n\nAlso, improve readability for TestPrestoExceptionClassifier."}, "afterCommit": {"oid": "07f910cb356ba262e2954543a184b20b47f65eeb", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/07f910cb356ba262e2954543a184b20b47f65eeb", "committedDate": "2020-06-08T20:37:10Z", "message": "Resubmit query for CLUSTER_OUT_OF_MEMORY and ADMINISTRATIVELY_PREEMPTED\n\nCLUSTER_OUT_OF_MEMORY on test cluster may happen when the concurrency\non the test cluster is too high given the size of the cluster.\n\nADMINISTRATIVELY_PREEMPTED should also be resubmitted at a later time.\n\nAlso, improve readability for TestPrestoExceptionClassifier."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI3NTY4MzUy", "url": "https://github.com/prestodb/presto/pull/14603#pullrequestreview-427568352", "createdAt": "2020-06-09T21:46:00Z", "commit": {"oid": "07f910cb356ba262e2954543a184b20b47f65eeb"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1746, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}