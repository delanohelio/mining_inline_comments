{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA2MjQ4MDg0", "number": 15333, "title": "Fix access control checks for USING clause", "bodyText": "This change fixes a bug where columns referenced in the USING clause of\na join were not checked for column access permissions. Since an\nidentifier in a USING clause refers to multiple columns, the\ncolumnReferences field in Analysis is changed to a Multimap.\nTest plan -\nAdded unit tests\n== NO RELEASE NOTE ==", "createdAt": "2020-10-19T20:10:20Z", "url": "https://github.com/prestodb/presto/pull/15333", "merged": true, "mergeCommit": {"oid": "12088497e565e8727d71cecaa1abde5e720ce1fd"}, "closed": true, "closedAt": "2020-10-21T18:36:17Z", "author": {"login": "prithvip"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdUKjhLAFqTUxMjE0NjMyMA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdUgR5jABqjM5MDEwMDg4NTQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEyMTQ2MzIw", "url": "https://github.com/prestodb/presto/pull/15333#pullrequestreview-512146320", "createdAt": "2020-10-19T20:46:59Z", "commit": {"oid": "20ebd11aa4b37354fc8e9eb142ce7925fe8f569f"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQyMDo0Njo1OVrOHkhCbw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQyMDo1MjoxMFrOHkhNGw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODA1MjA3OQ==", "bodyText": "Doesn't this cause problem if I have\nSELECT ...\nFROM T1\nJOIN T2\nUSING(x)\nORDER BY x\nAdd a test case for this.", "url": "https://github.com/prestodb/presto/pull/15333#discussion_r508052079", "createdAt": "2020-10-19T20:46:59Z", "author": {"login": "kaikalur"}, "path": "presto-main/src/main/java/com/facebook/presto/sql/analyzer/AggregationAnalyzer.java", "diffHunk": "@@ -360,9 +362,10 @@ protected Boolean visitFunctionCall(FunctionCall node, Void context)\n                                     .map(NodeRef::of)\n                                     .map(columnReferences::get)\n                                     .filter(Objects::nonNull)\n+                                    .flatMap(List::stream)\n                                     .collect(toImmutableList());\n                             for (Expression sortKey : sortKeys) {\n-                                if (!node.getArguments().contains(sortKey) && !fieldIds.contains(columnReferences.get(NodeRef.of(sortKey)))) {\n+                                if (!node.getArguments().contains(sortKey) && !fieldIds.containsAll(columnReferences.get(NodeRef.of(sortKey)))) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "20ebd11aa4b37354fc8e9eb142ce7925fe8f569f"}, "originalPosition": 46}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODA1MjgwNA==", "bodyText": "Add a getter for this instead of duplicating this check multiple places.", "url": "https://github.com/prestodb/presto/pull/15333#discussion_r508052804", "createdAt": "2020-10-19T20:48:25Z", "author": {"login": "kaikalur"}, "path": "presto-main/src/main/java/com/facebook/presto/sql/analyzer/AggregationAnalyzer.java", "diffHunk": "@@ -516,7 +520,9 @@ protected Boolean visitFieldReference(FieldReference node, Void context)\n                 return true;\n             }\n \n-            FieldId fieldId = requireNonNull(columnReferences.get(NodeRef.<Expression>of(node)), \"No FieldId for FieldReference\");\n+            List<FieldId> fieldIdList = columnReferences.get(NodeRef.<Expression>of(node));\n+            checkState(fieldIdList.size() == 1, \"No FieldId for FieldReference\");\n+            FieldId fieldId = fieldIdList.get(0);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "20ebd11aa4b37354fc8e9eb142ce7925fe8f569f"}, "originalPosition": 69}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODA1MzMyOQ==", "bodyText": "Shouldn't it be allMatch?", "url": "https://github.com/prestodb/presto/pull/15333#discussion_r508053329", "createdAt": "2020-10-19T20:49:26Z", "author": {"login": "kaikalur"}, "path": "presto-main/src/main/java/com/facebook/presto/sql/analyzer/ScopeReferenceExtractor.java", "diffHunk": "@@ -38,20 +36,18 @@ public static boolean hasReferencesToScope(Node node, Analysis analysis, Scope s\n \n     public static Stream<Expression> getReferencesToScope(Node node, Analysis analysis, Scope scope)\n     {\n-        Map<NodeRef<Expression>, FieldId> columnReferences = analysis.getColumnReferenceFields();\n+        ListMultimap<NodeRef<Expression>, FieldId> columnReferences = analysis.getColumnReferenceFields();\n \n         return AstUtils.preOrder(node)\n                 .filter(Expression.class::isInstance)\n                 .map(Expression.class::cast)\n                 .filter(expression -> columnReferences.containsKey(NodeRef.of(expression)))\n-                .filter(expression -> isReferenceToScope(expression, scope, columnReferences));\n+                .filter(expression -> hasReferenceToScope(expression, scope, columnReferences));\n     }\n \n-    private static boolean isReferenceToScope(Expression node, Scope scope, Map<NodeRef<Expression>, FieldId> columnReferences)\n+    private static boolean hasReferenceToScope(Expression node, Scope scope, ListMultimap<NodeRef<Expression>, FieldId> columnReferences)\n     {\n-        FieldId fieldId = columnReferences.get(NodeRef.of(node));\n-        requireNonNull(fieldId, () -> \"No FieldId for \" + node);\n-        return isFieldFromScope(fieldId, scope);\n+        return columnReferences.get(NodeRef.of(node)).stream().anyMatch(fieldId -> isFieldFromScope(fieldId, scope));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "20ebd11aa4b37354fc8e9eb142ce7925fe8f569f"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODA1NDgxMQ==", "bodyText": "refactor this into a getter/helper function", "url": "https://github.com/prestodb/presto/pull/15333#discussion_r508054811", "createdAt": "2020-10-19T20:52:10Z", "author": {"login": "kaikalur"}, "path": "presto-main/src/main/java/com/facebook/presto/sql/planner/GroupingOperationRewriter.java", "diffHunk": "@@ -54,13 +54,16 @@ public static Expression rewriteGroupingOperation(GroupingOperation expression,\n         }\n         else {\n             checkState(groupIdVariable.isPresent(), \"groupId symbol is missing\");\n+            List<FieldId> fieldIdList = columnReferenceFields.get(NodeRef.of(expression.getGroupingColumns().get(0)));\n+            checkState(fieldIdList.size() == 1, \"grouping column must reference exactly one field\");\n \n-            RelationId relationId = columnReferenceFields.get(NodeRef.of(expression.getGroupingColumns().get(0))).getRelationId();\n+            RelationId relationId = fieldIdList.get(0).getRelationId();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "20ebd11aa4b37354fc8e9eb142ce7925fe8f569f"}, "originalPosition": 28}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "20ebd11aa4b37354fc8e9eb142ce7925fe8f569f", "author": {"user": {"login": "prithvip", "name": null}}, "url": "https://github.com/prestodb/presto/commit/20ebd11aa4b37354fc8e9eb142ce7925fe8f569f", "committedDate": "2020-10-19T20:07:39Z", "message": "Fix access control checks for USING clause\n\nThis change fixes a bug where columns referenced in the USING clause of\na join were not checked for column access permissions. Since an\nidentifier in a USING clause refers to multiple columns, the\n``columnReferences`` field in Analysis is changed to a Multimap."}, "afterCommit": {"oid": "c3e3304b5ba7b8a2d565fcf809961c9ecbdabee3", "author": {"user": {"login": "prithvip", "name": null}}, "url": "https://github.com/prestodb/presto/commit/c3e3304b5ba7b8a2d565fcf809961c9ecbdabee3", "committedDate": "2020-10-19T21:25:44Z", "message": "Fix access control checks for USING clause\n\nThis change fixes a bug where columns referenced in the USING clause of\na join were not checked for column access permissions. Since an\nidentifier in a USING clause refers to multiple columns, the\n``columnReferences`` field in Analysis is changed to a Multimap."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c3e3304b5ba7b8a2d565fcf809961c9ecbdabee3", "author": {"user": {"login": "prithvip", "name": null}}, "url": "https://github.com/prestodb/presto/commit/c3e3304b5ba7b8a2d565fcf809961c9ecbdabee3", "committedDate": "2020-10-19T21:25:44Z", "message": "Fix access control checks for USING clause\n\nThis change fixes a bug where columns referenced in the USING clause of\na join were not checked for column access permissions. Since an\nidentifier in a USING clause refers to multiple columns, the\n``columnReferences`` field in Analysis is changed to a Multimap."}, "afterCommit": {"oid": "700a6633a9c9d544e048da8a5333cddb0a40ebba", "author": {"user": {"login": "prithvip", "name": null}}, "url": "https://github.com/prestodb/presto/commit/700a6633a9c9d544e048da8a5333cddb0a40ebba", "committedDate": "2020-10-19T22:01:30Z", "message": "Fix access control checks for USING clause\n\nThis change fixes a bug where columns referenced in the USING clause of\na join were not checked for column access permissions. Since an\nidentifier in a USING clause refers to multiple columns, the\n``columnReferences`` field in Analysis is changed to a Multimap."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "700a6633a9c9d544e048da8a5333cddb0a40ebba", "author": {"user": {"login": "prithvip", "name": null}}, "url": "https://github.com/prestodb/presto/commit/700a6633a9c9d544e048da8a5333cddb0a40ebba", "committedDate": "2020-10-19T22:01:30Z", "message": "Fix access control checks for USING clause\n\nThis change fixes a bug where columns referenced in the USING clause of\na join were not checked for column access permissions. Since an\nidentifier in a USING clause refers to multiple columns, the\n``columnReferences`` field in Analysis is changed to a Multimap."}, "afterCommit": {"oid": "252c68fcbd050facf886879a46073b1b4b768d23", "author": {"user": {"login": "prithvip", "name": null}}, "url": "https://github.com/prestodb/presto/commit/252c68fcbd050facf886879a46073b1b4b768d23", "committedDate": "2020-10-19T22:14:38Z", "message": "Fix access control checks for USING clause\n\nThis change fixes a bug where columns referenced in the USING clause of\na join were not checked for column access permissions. Since an\nidentifier in a USING clause refers to multiple columns, the\n``columnReferences`` field in Analysis is changed to a Multimap."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "252c68fcbd050facf886879a46073b1b4b768d23", "author": {"user": {"login": "prithvip", "name": null}}, "url": "https://github.com/prestodb/presto/commit/252c68fcbd050facf886879a46073b1b4b768d23", "committedDate": "2020-10-19T22:14:38Z", "message": "Fix access control checks for USING clause\n\nThis change fixes a bug where columns referenced in the USING clause of\na join were not checked for column access permissions. Since an\nidentifier in a USING clause refers to multiple columns, the\n``columnReferences`` field in Analysis is changed to a Multimap."}, "afterCommit": {"oid": "00834b9638fc2bf8eb3c2d061e479a973a833775", "author": {"user": {"login": "prithvip", "name": null}}, "url": "https://github.com/prestodb/presto/commit/00834b9638fc2bf8eb3c2d061e479a973a833775", "committedDate": "2020-10-20T00:32:06Z", "message": "Fix access control checks for USING clause\n\nThis change fixes a bug where columns referenced in the USING clause of\na join were not checked for column access permissions. Since an\nidentifier in a USING clause refers to multiple columns, the\n``columnReferences`` field in Analysis is changed to a Multimap."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "00834b9638fc2bf8eb3c2d061e479a973a833775", "author": {"user": {"login": "prithvip", "name": null}}, "url": "https://github.com/prestodb/presto/commit/00834b9638fc2bf8eb3c2d061e479a973a833775", "committedDate": "2020-10-20T00:32:06Z", "message": "Fix access control checks for USING clause\n\nThis change fixes a bug where columns referenced in the USING clause of\na join were not checked for column access permissions. Since an\nidentifier in a USING clause refers to multiple columns, the\n``columnReferences`` field in Analysis is changed to a Multimap."}, "afterCommit": {"oid": "12cd933ce63d12ef650775a7229b4884de8a3a10", "author": {"user": {"login": "prithvip", "name": null}}, "url": "https://github.com/prestodb/presto/commit/12cd933ce63d12ef650775a7229b4884de8a3a10", "committedDate": "2020-10-20T07:40:55Z", "message": "Fix access control checks for USING clause\n\nThis change fixes a bug where columns referenced in the USING clause of\na join were not checked for column access permissions. Since an\nidentifier in a USING clause refers to multiple columns, the\n``columnReferences`` field in Analysis is changed to a Multimap."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEyOTc3OTE0", "url": "https://github.com/prestodb/presto/pull/15333#pullrequestreview-512977914", "createdAt": "2020-10-20T17:37:39Z", "commit": {"oid": "12cd933ce63d12ef650775a7229b4884de8a3a10"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMFQxNzozNzozOVrOHlJiyQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMFQxNzozNzozOVrOHlJiyQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODcxNTcyMQ==", "bodyText": "We normally use the most generic type. So use MultiMap here instead.", "url": "https://github.com/prestodb/presto/pull/15333#discussion_r508715721", "createdAt": "2020-10-20T17:37:39Z", "author": {"login": "rongrong"}, "path": "presto-main/src/main/java/com/facebook/presto/sql/analyzer/AggregationAnalyzer.java", "diffHunk": "@@ -103,7 +104,7 @@\n     // fields and expressions in the group by clause\n     private final Set<FieldId> groupingFields;\n     private final List<Expression> expressions;\n-    private final Map<NodeRef<Expression>, FieldId> columnReferences;\n+    private final ListMultimap<NodeRef<Expression>, FieldId> columnReferences;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "12cd933ce63d12ef650775a7229b4884de8a3a10"}, "originalPosition": 26}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEyOTg2NDAz", "url": "https://github.com/prestodb/presto/pull/15333#pullrequestreview-512986403", "createdAt": "2020-10-20T17:48:27Z", "commit": {"oid": "12cd933ce63d12ef650775a7229b4884de8a3a10"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "12cd933ce63d12ef650775a7229b4884de8a3a10", "author": {"user": {"login": "prithvip", "name": null}}, "url": "https://github.com/prestodb/presto/commit/12cd933ce63d12ef650775a7229b4884de8a3a10", "committedDate": "2020-10-20T07:40:55Z", "message": "Fix access control checks for USING clause\n\nThis change fixes a bug where columns referenced in the USING clause of\na join were not checked for column access permissions. Since an\nidentifier in a USING clause refers to multiple columns, the\n``columnReferences`` field in Analysis is changed to a Multimap."}, "afterCommit": {"oid": "d14d8d42520eda659ad04ce4a2b754e7918cc5f1", "author": {"user": {"login": "prithvip", "name": null}}, "url": "https://github.com/prestodb/presto/commit/d14d8d42520eda659ad04ce4a2b754e7918cc5f1", "committedDate": "2020-10-20T19:55:43Z", "message": "Fix access control checks for USING clause\n\nThis change fixes a bug where columns referenced in the USING clause of\na join were not checked for column access permissions. Since an\nidentifier in a USING clause refers to multiple columns, the\n``columnReferences`` field in Analysis is changed to a Multimap."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEzMTQ1NzE4", "url": "https://github.com/prestodb/presto/pull/15333#pullrequestreview-513145718", "createdAt": "2020-10-20T21:24:41Z", "commit": {"oid": "d14d8d42520eda659ad04ce4a2b754e7918cc5f1"}, "state": "APPROVED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMFQyMToyNDo0MlrOHlRrTg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMFQyMTozMDozNFrOHlR3Wg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODg0ODk3NA==", "bodyText": "Nits: Multimap", "url": "https://github.com/prestodb/presto/pull/15333#discussion_r508848974", "createdAt": "2020-10-20T21:24:42Z", "author": {"login": "rongrong"}, "path": "presto-main/src/main/java/com/facebook/presto/sql/analyzer/Analysis.java", "diffHunk": "@@ -83,7 +85,7 @@\n     private final Map<NodeRef<Table>, Query> namedQueries = new LinkedHashMap<>();\n \n     private final Map<NodeRef<Node>, Scope> scopes = new LinkedHashMap<>();\n-    private final Map<NodeRef<Expression>, FieldId> columnReferences = new LinkedHashMap<>();\n+    private final ListMultimap<NodeRef<Expression>, FieldId> columnReferences = ArrayListMultimap.create();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d14d8d42520eda659ad04ce4a2b754e7918cc5f1"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODg0OTQ4MA==", "bodyText": "Nits: Multimap", "url": "https://github.com/prestodb/presto/pull/15333#discussion_r508849480", "createdAt": "2020-10-20T21:25:46Z", "author": {"login": "rongrong"}, "path": "presto-main/src/main/java/com/facebook/presto/sql/analyzer/Analysis.java", "diffHunk": "@@ -480,9 +487,9 @@ public void addFunctionHandles(Map<NodeRef<FunctionCall>, FunctionHandle> infos)\n         return unmodifiableSet(columnReferences.keySet());\n     }\n \n-    public Map<NodeRef<Expression>, FieldId> getColumnReferenceFields()\n+    public ListMultimap<NodeRef<Expression>, FieldId> getColumnReferenceFields()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d14d8d42520eda659ad04ce4a2b754e7918cc5f1"}, "originalPosition": 44}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODg1MDA1NA==", "bodyText": "It makes more sense to use \"column reference\" rather than \"field reference\". Or maybe checkAndGetColumnReferenceField.", "url": "https://github.com/prestodb/presto/pull/15333#discussion_r508850054", "createdAt": "2020-10-20T21:26:51Z", "author": {"login": "rongrong"}, "path": "presto-main/src/main/java/com/facebook/presto/sql/analyzer/ExpressionTreeUtils.java", "diffHunk": "@@ -169,4 +171,12 @@ private static boolean isEnumLiteral(DereferenceExpression node, Type nodeType)\n         Object enumValue = enumType.getEnumMap().get(enumKey);\n         return enumValue instanceof String ? Optional.of(utf8Slice((String) enumValue)) : Optional.of(enumValue);\n     }\n+\n+    public static FieldId checkAndGetFieldReferenceForExpression(Expression expression, Multimap<NodeRef<Expression>, FieldId> columnReferences)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d14d8d42520eda659ad04ce4a2b754e7918cc5f1"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODg1MjA1OA==", "bodyText": "analysis.getColumnReferenceFields().get(NodeRef.of(expression))\n    .forEach(context:: addFieldIdToExplore);", "url": "https://github.com/prestodb/presto/pull/15333#discussion_r508852058", "createdAt": "2020-10-20T21:30:34Z", "author": {"login": "rongrong"}, "path": "presto-main/src/main/java/com/facebook/presto/sql/analyzer/UtilizedColumnsAnalyzer.java", "diffHunk": "@@ -429,7 +441,9 @@ private void handleRelation(Relation relation, Context context, Relation... chil\n         private void handleExpression(Expression expression, Context context)\n         {\n             if (analysis.getColumnReferenceFields().containsKey(NodeRef.of(expression))) {\n-                context.addFieldIdToExplore(analysis.getColumnReferenceFields().get(NodeRef.of(expression)));\n+                for (FieldId fieldId : analysis.getColumnReferenceFields().get(NodeRef.of(expression))) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d14d8d42520eda659ad04ce4a2b754e7918cc5f1"}, "originalPosition": 38}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2f270f078f067f0e6432f29356558a089cc4329e", "author": {"user": {"login": "prithvip", "name": null}}, "url": "https://github.com/prestodb/presto/commit/2f270f078f067f0e6432f29356558a089cc4329e", "committedDate": "2020-10-20T22:11:39Z", "message": "Fix access control checks for USING clause\n\nThis change fixes a bug where columns referenced in the USING clause of\na join were not checked for column access permissions. Since an\nidentifier in a USING clause refers to multiple columns, the\n``columnReferences`` field in Analysis is changed to a Multimap."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d14d8d42520eda659ad04ce4a2b754e7918cc5f1", "author": {"user": {"login": "prithvip", "name": null}}, "url": "https://github.com/prestodb/presto/commit/d14d8d42520eda659ad04ce4a2b754e7918cc5f1", "committedDate": "2020-10-20T19:55:43Z", "message": "Fix access control checks for USING clause\n\nThis change fixes a bug where columns referenced in the USING clause of\na join were not checked for column access permissions. Since an\nidentifier in a USING clause refers to multiple columns, the\n``columnReferences`` field in Analysis is changed to a Multimap."}, "afterCommit": {"oid": "2f270f078f067f0e6432f29356558a089cc4329e", "author": {"user": {"login": "prithvip", "name": null}}, "url": "https://github.com/prestodb/presto/commit/2f270f078f067f0e6432f29356558a089cc4329e", "committedDate": "2020-10-20T22:11:39Z", "message": "Fix access control checks for USING clause\n\nThis change fixes a bug where columns referenced in the USING clause of\na join were not checked for column access permissions. Since an\nidentifier in a USING clause refers to multiple columns, the\n``columnReferences`` field in Analysis is changed to a Multimap."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4960, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}