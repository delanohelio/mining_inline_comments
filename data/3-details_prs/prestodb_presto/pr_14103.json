{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc1MjI5MzQ0", "number": 14103, "title": "Allow insert overwrite as default behavior for Hive connector", "bodyText": "Hive connector users often expects INSERT OVERWRITE as the default\nINSERT behavior. While there is a session property\ninsert_existing_partitions_behavior to enable this, it has to be\nmanually enabled.\nThis commit introduces a new Hive client configuration\nhive.insert-overwrite-immutable-partitions-enabled to allow admin set\ninsert overwrite as the default behavior.\n== RELEASE NOTES ==\n\n\nHive Changes\n* Introduce  a new Hive client configuration`hive.insert-overwrite-immutable-partitions-enabled` to allow admin set insert overwrite as the default insertion behavior for Hive connector", "createdAt": "2020-02-14T06:12:56Z", "url": "https://github.com/prestodb/presto/pull/14103", "merged": true, "mergeCommit": {"oid": "a5195e88e0ee1fda7a47da977c0d81661e81e178"}, "closed": true, "closedAt": "2020-02-17T20:45:38Z", "author": {"login": "wenleix"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcETsdMAFqTM1OTEyOTU0OQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcFSgoNABqjMwNDQ4MTU0MzI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU5MTI5NTQ5", "url": "https://github.com/prestodb/presto/pull/14103#pullrequestreview-359129549", "createdAt": "2020-02-14T18:18:32Z", "commit": {"oid": "aa26fb79d43b7cb1be2b02f1774ecf8014ed0890"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU5MTMxNzcx", "url": "https://github.com/prestodb/presto/pull/14103#pullrequestreview-359131771", "createdAt": "2020-02-14T18:22:37Z", "commit": {"oid": "aa26fb79d43b7cb1be2b02f1774ecf8014ed0890"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNFQxODoyMjozN1rOFp_jNw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNFQxODoyMjozN1rOFp_jNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTU3NzE0Mw==", "bodyText": "nit: how about saying When enabled, insertion query can overwrite existing partitions when partitions are immutable. This...", "url": "https://github.com/prestodb/presto/pull/14103#discussion_r379577143", "createdAt": "2020-02-14T18:22:37Z", "author": {"login": "shixuan-fan"}, "path": "presto-hive/src/main/java/com/facebook/presto/hive/HiveClientConfig.java", "diffHunk": "@@ -511,6 +512,19 @@ public HiveClientConfig setRespectTableFormat(boolean respectTableFormat)\n         return this;\n     }\n \n+    public boolean isInsertOverwriteImmutablePartitionEnabled()\n+    {\n+        return insertOverwriteImmutablePartitions;\n+    }\n+\n+    @Config(\"hive.insert-overwrite-immutable-partitions-enabled\")\n+    @ConfigDescription(\"Can insertion query overwrites existing partitions when partitions are immutable. This config only takes effect with hive.immutable-partitions set to true\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aa26fb79d43b7cb1be2b02f1774ecf8014ed0890"}, "originalPosition": 18}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "aa26fb79d43b7cb1be2b02f1774ecf8014ed0890", "author": {"user": {"login": "wenleix", "name": "Wenlei Xie"}}, "url": "https://github.com/prestodb/presto/commit/aa26fb79d43b7cb1be2b02f1774ecf8014ed0890", "committedDate": "2020-02-14T06:06:56Z", "message": "Allows insert overwrite as default behavior for Hive connector\n\nHive connector users often expects INSERT OVERWRITE as the default\nINSERT behavior. While there is a session property\n`insert_existing_partitions_behavior` to enable this, it has to be\nmanually enabled.\n\nThis commit introduces a new Hive client configuration\n`hive.insert-overwrite-immutable-partitions-enabled` to allow admin set\ninsert overwrite as the default behavior."}, "afterCommit": {"oid": "f8fc58b8e5fb7cbb0c4e64d0b874303babd34cd8", "author": {"user": {"login": "wenleix", "name": "Wenlei Xie"}}, "url": "https://github.com/prestodb/presto/commit/f8fc58b8e5fb7cbb0c4e64d0b874303babd34cd8", "committedDate": "2020-02-17T19:28:30Z", "message": "Allows insert overwrite as default behavior for Hive connector\n\nHive connector users often expects INSERT OVERWRITE as the default\nINSERT behavior. While there is a session property\n`insert_existing_partitions_behavior` to enable this, it has to be\nmanually enabled.\n\nThis commit introduces a new Hive client configuration\n`hive.insert-overwrite-immutable-partitions-enabled` to allow admin set\ninsert overwrite as the default behavior."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4fa258930363e6b7bbb3e7893d4af300ccfcbef0", "author": {"user": {"login": "wenleix", "name": "Wenlei Xie"}}, "url": "https://github.com/prestodb/presto/commit/4fa258930363e6b7bbb3e7893d4af300ccfcbef0", "committedDate": "2020-02-17T19:29:26Z", "message": "Allow insert overwrite as default behavior for Hive connector\n\nHive connector users often expects INSERT OVERWRITE as the default\nINSERT behavior. While there is a session property\n`insert_existing_partitions_behavior` to enable this, it has to be\nmanually enabled.\n\nThis commit introduces a new Hive client configuration\n`hive.insert-overwrite-immutable-partitions-enabled` to allow admin set\ninsert overwrite as the default behavior."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f8fc58b8e5fb7cbb0c4e64d0b874303babd34cd8", "author": {"user": {"login": "wenleix", "name": "Wenlei Xie"}}, "url": "https://github.com/prestodb/presto/commit/f8fc58b8e5fb7cbb0c4e64d0b874303babd34cd8", "committedDate": "2020-02-17T19:28:30Z", "message": "Allows insert overwrite as default behavior for Hive connector\n\nHive connector users often expects INSERT OVERWRITE as the default\nINSERT behavior. While there is a session property\n`insert_existing_partitions_behavior` to enable this, it has to be\nmanually enabled.\n\nThis commit introduces a new Hive client configuration\n`hive.insert-overwrite-immutable-partitions-enabled` to allow admin set\ninsert overwrite as the default behavior."}, "afterCommit": {"oid": "4fa258930363e6b7bbb3e7893d4af300ccfcbef0", "author": {"user": {"login": "wenleix", "name": "Wenlei Xie"}}, "url": "https://github.com/prestodb/presto/commit/4fa258930363e6b7bbb3e7893d4af300ccfcbef0", "committedDate": "2020-02-17T19:29:26Z", "message": "Allow insert overwrite as default behavior for Hive connector\n\nHive connector users often expects INSERT OVERWRITE as the default\nINSERT behavior. While there is a session property\n`insert_existing_partitions_behavior` to enable this, it has to be\nmanually enabled.\n\nThis commit introduces a new Hive client configuration\n`hive.insert-overwrite-immutable-partitions-enabled` to allow admin set\ninsert overwrite as the default behavior."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2210, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}