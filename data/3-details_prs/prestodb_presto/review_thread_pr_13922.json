{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzU5MDg0OTEz", "number": 13922, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQxOTowMzowMVrODWo7dQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQxOToyNDo0MFrODWpSjg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI1MDY1ODQ1OnYy", "diffSide": "RIGHT", "path": "presto-geospatial/src/main/java/com/facebook/presto/plugin/geospatial/GeometryType.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQxOTowMzowMVrOFbgwKw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQxOTowMzowMVrOFbgwKw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDM5MjQ5MQ==", "bodyText": "Is this error path tested exercised by any test? Looks like deserialize catches the GeometryException and wraps it so is this necessary?", "url": "https://github.com/prestodb/presto/pull/13922#discussion_r364392491", "createdAt": "2020-01-08T19:03:01Z", "author": {"login": "aweisberg"}, "path": "presto-geospatial/src/main/java/com/facebook/presto/plugin/geospatial/GeometryType.java", "diffHunk": "@@ -83,6 +86,11 @@ public Object getObjectValue(ConnectorSession session, Block block, int position\n             return null;\n         }\n         Slice slice = block.getSlice(position, 0, block.getSliceLength(position));\n-        return deserialize(slice).asText();\n+        try {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "58d5d39cb936a03430db4a97319838b8b431ad29"}, "originalPosition": 23}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI1MDcxNzU4OnYy", "diffSide": "RIGHT", "path": "presto-geospatial-toolkit/src/main/java/com/facebook/presto/geospatial/serde/EsriGeometrySerde.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQxOToyNDo0MFrOFbhV0A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQxOToyNDo0MFrOFbhV0A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDQwMjEyOA==", "bodyText": "When I ran TestGeometrySerialization I didn't see this exercised in the debugger.", "url": "https://github.com/prestodb/presto/pull/13922#discussion_r364402128", "createdAt": "2020-01-08T19:24:40Z", "author": {"login": "aweisberg"}, "path": "presto-geospatial-toolkit/src/main/java/com/facebook/presto/geospatial/serde/EsriGeometrySerde.java", "diffHunk": "@@ -171,7 +174,12 @@ public static OGCGeometry deserialize(Slice shape)\n         verify(input.available() > 0);\n         int length = input.available() - 1;\n         GeometrySerializationType type = GeometrySerializationType.getForCode(input.readByte());\n-        return readGeometry(input, shape, type, length);\n+        try {\n+            return readGeometry(input, shape, type, length);\n+        }\n+        catch (GeometryException e) {\n+            throw new PrestoException(INVALID_FUNCTION_ARGUMENT, e.getMessage(), e);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "58d5d39cb936a03430db4a97319838b8b431ad29"}, "originalPosition": 33}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2130, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}