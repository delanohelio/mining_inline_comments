{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAyMTA1ODQy", "number": 14375, "title": "Drop presto-orc's dependency on ConnectorSession", "bodyText": "depended by facebookexternal/presto-facebook#955\n== NO RELEASE NOTE ==", "createdAt": "2020-04-10T23:41:51Z", "url": "https://github.com/prestodb/presto/pull/14375", "merged": true, "mergeCommit": {"oid": "6bab32ac4639256314ead93d8d970cb056f1c1f2"}, "closed": true, "closedAt": "2020-04-17T04:52:50Z", "author": {"login": "NikhilCollooru"}, "timelineItems": {"totalCount": 16, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcWaqmsgFqTM5MTcxNzY0OA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcYXakVABqjMyNDI1Mjg1NDc=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxNzE3NjQ4", "url": "https://github.com/prestodb/presto/pull/14375#pullrequestreview-391717648", "createdAt": "2020-04-11T00:36:29Z", "commit": {"oid": "ef0fd4c8e10bd3d24462f6031cd2ac24f0fe7742"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ef0fd4c8e10bd3d24462f6031cd2ac24f0fe7742", "author": {"user": {"login": "NikhilCollooru", "name": "Nikhil Collooru"}}, "url": "https://github.com/prestodb/presto/commit/ef0fd4c8e10bd3d24462f6031cd2ac24f0fe7742", "committedDate": "2020-04-10T23:39:25Z", "message": "Drop presto-orc dependency on ConnectorSession"}, "afterCommit": {"oid": "b321854f156e5bbfc55caceeda98f6b589611fa6", "author": {"user": {"login": "NikhilCollooru", "name": "Nikhil Collooru"}}, "url": "https://github.com/prestodb/presto/commit/b321854f156e5bbfc55caceeda98f6b589611fa6", "committedDate": "2020-04-11T01:17:55Z", "message": "Drop presto-orc dependency on ConnectorSession"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b321854f156e5bbfc55caceeda98f6b589611fa6", "author": {"user": {"login": "NikhilCollooru", "name": "Nikhil Collooru"}}, "url": "https://github.com/prestodb/presto/commit/b321854f156e5bbfc55caceeda98f6b589611fa6", "committedDate": "2020-04-11T01:17:55Z", "message": "Drop presto-orc dependency on ConnectorSession"}, "afterCommit": {"oid": "39e9722a344d3017d09b2d68553ed16501bac6cc", "author": {"user": {"login": "NikhilCollooru", "name": "Nikhil Collooru"}}, "url": "https://github.com/prestodb/presto/commit/39e9722a344d3017d09b2d68553ed16501bac6cc", "committedDate": "2020-04-11T03:29:42Z", "message": "Drop presto-orc dependency on ConnectorSession"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxOTAwMzc4", "url": "https://github.com/prestodb/presto/pull/14375#pullrequestreview-391900378", "createdAt": "2020-04-12T22:29:30Z", "commit": {"oid": "39e9722a344d3017d09b2d68553ed16501bac6cc"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkzMjQ5MzU2", "url": "https://github.com/prestodb/presto/pull/14375#pullrequestreview-393249356", "createdAt": "2020-04-14T19:57:02Z", "commit": {"oid": "58f29222f32aed85956b3cf830daec5bdda1f859"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "58f29222f32aed85956b3cf830daec5bdda1f859", "author": {"user": {"login": "NikhilCollooru", "name": "Nikhil Collooru"}}, "url": "https://github.com/prestodb/presto/commit/58f29222f32aed85956b3cf830daec5bdda1f859", "committedDate": "2020-04-14T19:11:07Z", "message": "Send SqlFunctionProperties to operators"}, "afterCommit": {"oid": "78ca36727c6d6b08976149bb590fa5f1e3d31a2d", "author": {"user": {"login": "NikhilCollooru", "name": "Nikhil Collooru"}}, "url": "https://github.com/prestodb/presto/commit/78ca36727c6d6b08976149bb590fa5f1e3d31a2d", "committedDate": "2020-04-16T01:31:42Z", "message": "Send SqlFunctionProperties to operators"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "78ca36727c6d6b08976149bb590fa5f1e3d31a2d", "author": {"user": {"login": "NikhilCollooru", "name": "Nikhil Collooru"}}, "url": "https://github.com/prestodb/presto/commit/78ca36727c6d6b08976149bb590fa5f1e3d31a2d", "committedDate": "2020-04-16T01:31:42Z", "message": "Send SqlFunctionProperties to operators"}, "afterCommit": {"oid": "4b789a4a9cc342438b00b3547180e31fe4101c34", "author": {"user": {"login": "NikhilCollooru", "name": "Nikhil Collooru"}}, "url": "https://github.com/prestodb/presto/commit/4b789a4a9cc342438b00b3547180e31fe4101c34", "committedDate": "2020-04-16T09:14:07Z", "message": "Drop presto-orc dependency on ConnectorSession"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4b789a4a9cc342438b00b3547180e31fe4101c34", "author": {"user": {"login": "NikhilCollooru", "name": "Nikhil Collooru"}}, "url": "https://github.com/prestodb/presto/commit/4b789a4a9cc342438b00b3547180e31fe4101c34", "committedDate": "2020-04-16T09:14:07Z", "message": "Drop presto-orc dependency on ConnectorSession"}, "afterCommit": {"oid": "48710953ee8d5ca0665516b27e7a27db02728ca1", "author": {"user": {"login": "NikhilCollooru", "name": "Nikhil Collooru"}}, "url": "https://github.com/prestodb/presto/commit/48710953ee8d5ca0665516b27e7a27db02728ca1", "committedDate": "2020-04-16T19:31:57Z", "message": "Drop presto-orc dependency on ConnectorSession"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "48710953ee8d5ca0665516b27e7a27db02728ca1", "author": {"user": {"login": "NikhilCollooru", "name": "Nikhil Collooru"}}, "url": "https://github.com/prestodb/presto/commit/48710953ee8d5ca0665516b27e7a27db02728ca1", "committedDate": "2020-04-16T19:31:57Z", "message": "Drop presto-orc dependency on ConnectorSession"}, "afterCommit": {"oid": "f9c2afc5633e5e64a173b18ca931b7167e62eb3b", "author": {"user": {"login": "NikhilCollooru", "name": "Nikhil Collooru"}}, "url": "https://github.com/prestodb/presto/commit/f9c2afc5633e5e64a173b18ca931b7167e62eb3b", "committedDate": "2020-04-16T20:59:41Z", "message": "Drop presto-orc dependency on ConnectorSession"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk1MDY4NDA1", "url": "https://github.com/prestodb/presto/pull/14375#pullrequestreview-395068405", "createdAt": "2020-04-16T23:34:12Z", "commit": {"oid": "f9c2afc5633e5e64a173b18ca931b7167e62eb3b"}, "state": "APPROVED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQyMzozNDoxMlrOGG6zhQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQyMzo0Nzo0OFrOGG7D4g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTkwODEwMQ==", "bodyText": "move session.getSqlFunctionProperties() to its own line", "url": "https://github.com/prestodb/presto/pull/14375#discussion_r409908101", "createdAt": "2020-04-16T23:34:12Z", "author": {"login": "highker"}, "path": "presto-hive/src/main/java/com/facebook/presto/hive/FilteringPageSource.java", "diffHunk": "@@ -119,7 +119,7 @@ public FilteringPageSource(\n         }\n         else {\n             RowExpression expression = replaceExpression(optimizedRemainingPredicate, variableToInput);\n-            this.filterFunction = new FilterFunction(session,\n+            this.filterFunction = new FilterFunction(session.getSqlFunctionProperties(),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f9c2afc5633e5e64a173b18ca931b7167e62eb3b"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTkwOTU4Ng==", "bodyText": "hasProperties; same for the stack var", "url": "https://github.com/prestodb/presto/pull/14375#discussion_r409909586", "createdAt": "2020-04-16T23:38:56Z", "author": {"login": "highker"}, "path": "presto-main/src/main/java/com/facebook/presto/operator/scalar/BuiltInScalarFunctionImplementation.java", "diffHunk": "@@ -131,13 +131,13 @@ public ScalarImplementationChoice(\n \n             List<Class<?>> parameterList = methodHandle.type().parameterList();\n             boolean hasSession = false;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f9c2afc5633e5e64a173b18ca931b7167e62eb3b"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTkxMjI5MA==", "bodyText": "requireNonNull", "url": "https://github.com/prestodb/presto/pull/14375#discussion_r409912290", "createdAt": "2020-04-16T23:47:48Z", "author": {"login": "highker"}, "path": "presto-spi/src/main/java/com/facebook/presto/spi/function/SqlFunctionProperties.java", "diffHunk": "@@ -26,19 +27,28 @@\n     private final TimeZoneKey timeZoneKey;\n     private final boolean legacyTimestamp;\n     private final boolean legacyMapSubscript;\n+    private final long sessionStartTime;\n+    private final Locale sessionLocale;\n+    private String sessionUser;\n \n     private SqlFunctionProperties(\n             boolean parseDecimalLiteralAsDouble,\n             boolean legacyRowFieldOrdinalAccessEnabled,\n             TimeZoneKey timeZoneKey,\n             boolean legacyTimestamp,\n-            boolean legacyMapSubscript)\n+            boolean legacyMapSubscript,\n+            long sessionStartTime,\n+            Locale sessionLocale,\n+            String sessionUser)\n     {\n         this.parseDecimalLiteralAsDouble = parseDecimalLiteralAsDouble;\n         this.legacyRowFieldOrdinalAccessEnabled = legacyRowFieldOrdinalAccessEnabled;\n         this.timeZoneKey = requireNonNull(timeZoneKey, \"timeZoneKey is null\");\n         this.legacyTimestamp = legacyTimestamp;\n         this.legacyMapSubscript = legacyMapSubscript;\n+        this.sessionStartTime = sessionStartTime;\n+        this.sessionLocale = sessionLocale;\n+        this.sessionUser = sessionUser;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6c29b9cd85e4729b1106daabbf29654e644bfd3e"}, "originalPosition": 34}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f9c2afc5633e5e64a173b18ca931b7167e62eb3b", "author": {"user": {"login": "NikhilCollooru", "name": "Nikhil Collooru"}}, "url": "https://github.com/prestodb/presto/commit/f9c2afc5633e5e64a173b18ca931b7167e62eb3b", "committedDate": "2020-04-16T20:59:41Z", "message": "Drop presto-orc dependency on ConnectorSession"}, "afterCommit": {"oid": "eecfa8710f672933ee695acf5536be21425bceb7", "author": {"user": {"login": "NikhilCollooru", "name": "Nikhil Collooru"}}, "url": "https://github.com/prestodb/presto/commit/eecfa8710f672933ee695acf5536be21425bceb7", "committedDate": "2020-04-17T00:10:04Z", "message": "Drop presto-orc dependency on ConnectorSession"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk1MDk1MDMy", "url": "https://github.com/prestodb/presto/pull/14375#pullrequestreview-395095032", "createdAt": "2020-04-17T00:57:18Z", "commit": {"oid": "eecfa8710f672933ee695acf5536be21425bceb7"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "449640936f153283113c2a5520f5deca258c21de", "author": {"user": {"login": "NikhilCollooru", "name": "Nikhil Collooru"}}, "url": "https://github.com/prestodb/presto/commit/449640936f153283113c2a5520f5deca258c21de", "committedDate": "2020-04-17T01:43:03Z", "message": "Add sessionStartTime,sessionLocale,sessionUser to SqlFunctionProperties"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1b7711ab964cfb192869c45be1d828a665656ac9", "author": {"user": {"login": "NikhilCollooru", "name": "Nikhil Collooru"}}, "url": "https://github.com/prestodb/presto/commit/1b7711ab964cfb192869c45be1d828a665656ac9", "committedDate": "2020-04-17T01:43:13Z", "message": "Send SqlFunctionProperties to operators"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e2e00f2415a551cbd5eee90699d78e55ee5f654c", "author": {"user": {"login": "NikhilCollooru", "name": "Nikhil Collooru"}}, "url": "https://github.com/prestodb/presto/commit/e2e00f2415a551cbd5eee90699d78e55ee5f654c", "committedDate": "2020-04-17T01:43:14Z", "message": "Drop presto-orc dependency on ConnectorSession"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "eecfa8710f672933ee695acf5536be21425bceb7", "author": {"user": {"login": "NikhilCollooru", "name": "Nikhil Collooru"}}, "url": "https://github.com/prestodb/presto/commit/eecfa8710f672933ee695acf5536be21425bceb7", "committedDate": "2020-04-17T00:10:04Z", "message": "Drop presto-orc dependency on ConnectorSession"}, "afterCommit": {"oid": "e2e00f2415a551cbd5eee90699d78e55ee5f654c", "author": {"user": {"login": "NikhilCollooru", "name": "Nikhil Collooru"}}, "url": "https://github.com/prestodb/presto/commit/e2e00f2415a551cbd5eee90699d78e55ee5f654c", "committedDate": "2020-04-17T01:43:14Z", "message": "Drop presto-orc dependency on ConnectorSession"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1836, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}