{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk4MDA4MTAy", "number": 14330, "title": "Report failure to compile pushed down filter as COMPILE_ERROR", "bodyText": "Fixing the incorrect error categorization by returning the PrestoException wrapped inside the UncheckedExecutionException.\n== NO RELEASE NOTE ==", "createdAt": "2020-04-03T07:30:20Z", "url": "https://github.com/prestodb/presto/pull/14330", "merged": true, "mergeCommit": {"oid": "11b8d41c866eebd8c46e8a7d691c0979aa27cee8"}, "closed": true, "closedAt": "2020-04-07T14:39:34Z", "author": {"login": "sujay-jain"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcT8dxcAFqTM4NzA0NjM5NQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcVFwWtABqjMyMDczMzQxOTU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg3MDQ2Mzk1", "url": "https://github.com/prestodb/presto/pull/14330#pullrequestreview-387046395", "createdAt": "2020-04-03T08:13:36Z", "commit": {"oid": "2bb05bc8794a479a4cf22b9d188957f0db768440"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QwODoxMzozNlrOGAKCAg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QwODoxMzozNlrOGAKCAg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjgxNzUzOA==", "bodyText": "Use separate catch block instead of checking exception class:\n        catch (UncheckedExecutionException e) {\n            if (e.getCause() instanceof PrestoException) {\n                throw (PrestoException) e.getCause();\n            }\n            throw new PrestoException(HIVE_CANNOT_OPEN_SPLIT, splitError(e, path, start, length), e);\n        }\n        catch (BlockMissingException e) {\n            throw new PrestoException(HIVE_MISSING_DATA, splitError(e, path, start, length), e);\n        }\n        catch (PrestoException e) {\n            throw e;\n        }\n        catch (Exception e) {\n            throw new PrestoException(HIVE_CANNOT_OPEN_SPLIT, splitError(e, path, start, length), e);\n        }\n        finally {\n            try {\n                orcDataSource.close();\n            }\n            catch (IOException ignored) {\n            }  \n        }", "url": "https://github.com/prestodb/presto/pull/14330#discussion_r402817538", "createdAt": "2020-04-03T08:13:36Z", "author": {"login": "mbasmanova"}, "path": "presto-hive/src/main/java/com/facebook/presto/hive/orc/OrcSelectivePageSourceFactory.java", "diffHunk": "@@ -398,6 +399,9 @@ public static OrcSelectivePageSource createOrcPageSource(\n             }\n             catch (IOException ignored) {\n             }\n+            if (e.getClass().getName().equals(UncheckedExecutionException.class.getName()) && e.getCause() instanceof PrestoException) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2bb05bc8794a479a4cf22b9d188957f0db768440"}, "originalPosition": 12}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2bb05bc8794a479a4cf22b9d188957f0db768440", "author": {"user": {"login": "sujay-jain", "name": null}}, "url": "https://github.com/prestodb/presto/commit/2bb05bc8794a479a4cf22b9d188957f0db768440", "committedDate": "2020-04-03T07:22:35Z", "message": "Failure to compile filter should not be reported as storage error"}, "afterCommit": {"oid": "a7ad263ad3c8ab236ee40c2dd9c7ec6e8e1e6089", "author": {"user": {"login": "sujay-jain", "name": null}}, "url": "https://github.com/prestodb/presto/commit/a7ad263ad3c8ab236ee40c2dd9c7ec6e8e1e6089", "committedDate": "2020-04-03T16:57:33Z", "message": "Report failure to compile pushed down filter as COMPILE_ERROR\n\nBefore this change this error was  reported as STORAGE_ERROR:\nError opening Hive split."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a7ad263ad3c8ab236ee40c2dd9c7ec6e8e1e6089", "author": {"user": {"login": "sujay-jain", "name": null}}, "url": "https://github.com/prestodb/presto/commit/a7ad263ad3c8ab236ee40c2dd9c7ec6e8e1e6089", "committedDate": "2020-04-03T16:57:33Z", "message": "Report failure to compile pushed down filter as COMPILE_ERROR\n\nBefore this change this error was  reported as STORAGE_ERROR:\nError opening Hive split."}, "afterCommit": {"oid": "8729c0a71eb6039f556b5899510c12ac2d8e2a7f", "author": {"user": {"login": "sujay-jain", "name": null}}, "url": "https://github.com/prestodb/presto/commit/8729c0a71eb6039f556b5899510c12ac2d8e2a7f", "committedDate": "2020-04-03T17:52:10Z", "message": "Report failure to compile pushed down filter as COMPILE_ERROR\n\nBefore this change this error was  reported as STORAGE_ERROR:\nError opening Hive split."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg3NDY4MjYy", "url": "https://github.com/prestodb/presto/pull/14330#pullrequestreview-387468262", "createdAt": "2020-04-03T17:58:45Z", "commit": {"oid": "8729c0a71eb6039f556b5899510c12ac2d8e2a7f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg3Nzg5MTQw", "url": "https://github.com/prestodb/presto/pull/14330#pullrequestreview-387789140", "createdAt": "2020-04-05T07:23:14Z", "commit": {"oid": "8729c0a71eb6039f556b5899510c12ac2d8e2a7f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNVQwNzoyMzoxNFrOGA9hhA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNVQwNzoyMzoxNFrOGA9hhA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzY2MTE4OA==", "bodyText": "also talk about why .class comparison does not work either, can be something like\ninstanceof and class comparison do not work as they are loaded by different class loaders.", "url": "https://github.com/prestodb/presto/pull/14330#discussion_r403661188", "createdAt": "2020-04-05T07:23:14Z", "author": {"login": "bhhari"}, "path": "presto-hive/src/main/java/com/facebook/presto/hive/orc/OrcSelectivePageSourceFactory.java", "diffHunk": "@@ -398,6 +399,10 @@ public static OrcSelectivePageSource createOrcPageSource(\n             }\n             catch (IOException ignored) {\n             }\n+            // instanceof check does not work here since e and UncheckedExecutionException are loaded by different classloaders", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8729c0a71eb6039f556b5899510c12ac2d8e2a7f"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg3NzkwNDEy", "url": "https://github.com/prestodb/presto/pull/14330#pullrequestreview-387790412", "createdAt": "2020-04-05T07:40:11Z", "commit": {"oid": "8729c0a71eb6039f556b5899510c12ac2d8e2a7f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8729c0a71eb6039f556b5899510c12ac2d8e2a7f", "author": {"user": {"login": "sujay-jain", "name": null}}, "url": "https://github.com/prestodb/presto/commit/8729c0a71eb6039f556b5899510c12ac2d8e2a7f", "committedDate": "2020-04-03T17:52:10Z", "message": "Report failure to compile pushed down filter as COMPILE_ERROR\n\nBefore this change this error was  reported as STORAGE_ERROR:\nError opening Hive split."}, "afterCommit": {"oid": "aff0a359845c744284ca95ccf8bda14d89a69673", "author": {"user": {"login": "sujay-jain", "name": null}}, "url": "https://github.com/prestodb/presto/commit/aff0a359845c744284ca95ccf8bda14d89a69673", "committedDate": "2020-04-06T18:25:11Z", "message": "Report failure to compile pushed down filter as COMPILE_ERROR\n\nBefore this change this error was  reported as STORAGE_ERROR:\nError opening Hive split."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6deae797d208722dee3a5ae32de8b356bbc1176f", "author": {"user": {"login": "sujay-jain", "name": null}}, "url": "https://github.com/prestodb/presto/commit/6deae797d208722dee3a5ae32de8b356bbc1176f", "committedDate": "2020-04-06T21:32:54Z", "message": "Report failure to compile pushed down filter as COMPILE_ERROR\n\nBefore this change this error was  reported as STORAGE_ERROR:\nError opening Hive split."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "aff0a359845c744284ca95ccf8bda14d89a69673", "author": {"user": {"login": "sujay-jain", "name": null}}, "url": "https://github.com/prestodb/presto/commit/aff0a359845c744284ca95ccf8bda14d89a69673", "committedDate": "2020-04-06T18:25:11Z", "message": "Report failure to compile pushed down filter as COMPILE_ERROR\n\nBefore this change this error was  reported as STORAGE_ERROR:\nError opening Hive split."}, "afterCommit": {"oid": "6deae797d208722dee3a5ae32de8b356bbc1176f", "author": {"user": {"login": "sujay-jain", "name": null}}, "url": "https://github.com/prestodb/presto/commit/6deae797d208722dee3a5ae32de8b356bbc1176f", "committedDate": "2020-04-06T21:32:54Z", "message": "Report failure to compile pushed down filter as COMPILE_ERROR\n\nBefore this change this error was  reported as STORAGE_ERROR:\nError opening Hive split."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2167, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}