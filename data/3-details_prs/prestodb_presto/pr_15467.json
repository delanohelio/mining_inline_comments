{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI1MDEzNTQ0", "number": 15467, "title": "Add verifier flag for removing memory related session property", "bodyText": "Depended by https://github.com/facebookexternal/presto-facebook/pull/1330\nIn some cases we want to remove these session property when run verifier\ntest on smaller cluster. While in certain other cases we want to keep or\nadd them to test memory related improvements (while not changing the\ncluster config).\nTest plan - Travis\n== NO RELEASE NOTE ==", "createdAt": "2020-11-20T23:49:04Z", "url": "https://github.com/prestodb/presto/pull/15467", "merged": true, "mergeCommit": {"oid": "fe1bc57c9442a368276be3a4536ae760104efaf0"}, "closed": true, "closedAt": "2020-11-22T20:07:19Z", "author": {"login": "wenleix"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdegSi_gFqTUzNTg0ODA1NA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABde7IhMABqjQwMjQ1MzEyNzY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM1ODQ4MDU0", "url": "https://github.com/prestodb/presto/pull/15467#pullrequestreview-535848054", "createdAt": "2020-11-20T23:52:11Z", "commit": {"oid": "3292544ed19c8567d5b1f67072a9e4bb315ae34d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM2MDE1MDAy", "url": "https://github.com/prestodb/presto/pull/15467#pullrequestreview-536015002", "createdAt": "2020-11-21T23:08:29Z", "commit": {"oid": "3292544ed19c8567d5b1f67072a9e4bb315ae34d"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMVQyMzowODoyOVrOH3yEvQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMVQyMzowOTowNlrOH3yE8A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODI1NDE0MQ==", "bodyText": "Use plural?\n@Config(\"remove-memory-related-session-properties\")\n... setRemoveMemoryRelatedSessionProperties(boolean removeMemoryRelatedSessionProperties)", "url": "https://github.com/prestodb/presto/pull/15467#discussion_r528254141", "createdAt": "2020-11-21T23:08:29Z", "author": {"login": "caithagoras"}, "path": "presto-verifier/src/main/java/com/facebook/presto/verifier/prestoaction/PrestoActionConfig.java", "diffHunk": "@@ -140,4 +141,16 @@ public PrestoActionConfig setApplicationName(String applicationName)\n         this.applicationName = applicationName;\n         return this;\n     }\n+\n+    public boolean isRemoveMemoryRelatedSessionProperty()\n+    {\n+        return removeMemoryRelatedSessionProperty;\n+    }\n+\n+    @Config(\"remove-memory-related-session-property\")\n+    public PrestoActionConfig setRemoveMemoryRelatedSessionProperty(boolean removeMemoryRelatedSessionProperty)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3292544ed19c8567d5b1f67072a9e4bb315ae34d"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODI1NDE4MA==", "bodyText": "Use plural?", "url": "https://github.com/prestodb/presto/pull/15467#discussion_r528254180", "createdAt": "2020-11-21T23:08:54Z", "author": {"login": "caithagoras"}, "path": "presto-verifier/src/main/java/com/facebook/presto/verifier/prestoaction/JdbcPrestoAction.java", "diffHunk": "@@ -64,6 +64,7 @@\n     private final String testId;\n     private final Optional<String> testName;\n     private final String applicationName;\n+    private final boolean removeMemoryRelatedSessionProperty;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3292544ed19c8567d5b1f67072a9e4bb315ae34d"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODI1NDE5Mg==", "bodyText": "here as well?", "url": "https://github.com/prestodb/presto/pull/15467#discussion_r528254192", "createdAt": "2020-11-21T23:09:06Z", "author": {"login": "caithagoras"}, "path": "presto-verifier/src/main/java/com/facebook/presto/verifier/prestoaction/PrestoActionConfig.java", "diffHunk": "@@ -45,6 +45,7 @@\n     private Map<String, String> jdbcUrlParameters = ImmutableMap.of();\n     private Duration queryTimeout = new Duration(60, MINUTES);\n     private String applicationName = \"verifier-test\";\n+    private boolean removeMemoryRelatedSessionProperty = true;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3292544ed19c8567d5b1f67072a9e4bb315ae34d"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM2MDE1MDQ4", "url": "https://github.com/prestodb/presto/pull/15467#pullrequestreview-536015048", "createdAt": "2020-11-21T23:09:19Z", "commit": {"oid": "3292544ed19c8567d5b1f67072a9e4bb315ae34d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3292544ed19c8567d5b1f67072a9e4bb315ae34d", "author": {"user": {"login": "wenleix", "name": "Wenlei Xie"}}, "url": "https://github.com/prestodb/presto/commit/3292544ed19c8567d5b1f67072a9e4bb315ae34d", "committedDate": "2020-11-20T23:46:26Z", "message": "Add verifier flag for removing memory related session property\n\nIn some cases we want to remove these session property when run verifier\ntest on smaller cluster. While in certain other cases we want to keep or\nadd them to test memory related improvements (while not changing the\ncluster config)."}, "afterCommit": {"oid": "de55348415f817c1239fae5603fb8604baad2099", "author": {"user": {"login": "wenleix", "name": "Wenlei Xie"}}, "url": "https://github.com/prestodb/presto/commit/de55348415f817c1239fae5603fb8604baad2099", "committedDate": "2020-11-22T03:10:24Z", "message": "Add verifier flag for removing memory related session property\n\nIn some cases we want to remove these session property when run verifier\ntest on smaller cluster. While in certain other cases we want to keep or\nadd them to test memory related improvements (while not changing the\ncluster config)."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM2MDI5MTk3", "url": "https://github.com/prestodb/presto/pull/15467#pullrequestreview-536029197", "createdAt": "2020-11-22T04:50:23Z", "commit": {"oid": "de55348415f817c1239fae5603fb8604baad2099"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMlQwNDo1MDoyM1rOH3zyeA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMlQwNDo1MDoyM1rOH3zyeA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODI4MjIzMg==", "bodyText": "Here as well.", "url": "https://github.com/prestodb/presto/pull/15467#discussion_r528282232", "createdAt": "2020-11-22T04:50:23Z", "author": {"login": "caithagoras"}, "path": "presto-verifier/src/main/java/com/facebook/presto/verifier/prestoaction/QueryActionUtil.java", "diffHunk": "@@ -36,7 +36,8 @@ private QueryActionUtil()\n     public static Map<String, String> mangleSessionProperties(\n             Map<String, String> mainQuerySessionProperty,\n             QueryStage queryStage,\n-            Duration queryTimeout)\n+            Duration queryTimeout,\n+            boolean removeMemoryRelatedSessionProperty)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "de55348415f817c1239fae5603fb8604baad2099"}, "originalPosition": 6}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "de55348415f817c1239fae5603fb8604baad2099", "author": {"user": {"login": "wenleix", "name": "Wenlei Xie"}}, "url": "https://github.com/prestodb/presto/commit/de55348415f817c1239fae5603fb8604baad2099", "committedDate": "2020-11-22T03:10:24Z", "message": "Add verifier flag for removing memory related session property\n\nIn some cases we want to remove these session property when run verifier\ntest on smaller cluster. While in certain other cases we want to keep or\nadd them to test memory related improvements (while not changing the\ncluster config)."}, "afterCommit": {"oid": "ee52981549a5f4c0a710b8dd7d9a18f61a670306", "author": {"user": {"login": "wenleix", "name": "Wenlei Xie"}}, "url": "https://github.com/prestodb/presto/commit/ee52981549a5f4c0a710b8dd7d9a18f61a670306", "committedDate": "2020-11-22T06:19:01Z", "message": "Add verifier flag for removing memory related session property\n\nIn some cases we want to remove these session property when run verifier\ntest on smaller cluster. While in certain other cases we want to keep or\nadd them to test memory related improvements (while not changing the\ncluster config)."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8eb9718575524574b710bdea619275b51993c1cb", "author": {"user": {"login": "wenleix", "name": "Wenlei Xie"}}, "url": "https://github.com/prestodb/presto/commit/8eb9718575524574b710bdea619275b51993c1cb", "committedDate": "2020-11-22T07:07:36Z", "message": "Add verifier flag for removing memory related session property\n\nIn some cases we want to remove these session property when run verifier\ntest on smaller cluster. While in certain other cases we want to keep or\nadd them to test memory related improvements (while not changing the\ncluster config)."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ee52981549a5f4c0a710b8dd7d9a18f61a670306", "author": {"user": {"login": "wenleix", "name": "Wenlei Xie"}}, "url": "https://github.com/prestodb/presto/commit/ee52981549a5f4c0a710b8dd7d9a18f61a670306", "committedDate": "2020-11-22T06:19:01Z", "message": "Add verifier flag for removing memory related session property\n\nIn some cases we want to remove these session property when run verifier\ntest on smaller cluster. While in certain other cases we want to keep or\nadd them to test memory related improvements (while not changing the\ncluster config)."}, "afterCommit": {"oid": "8eb9718575524574b710bdea619275b51993c1cb", "author": {"user": {"login": "wenleix", "name": "Wenlei Xie"}}, "url": "https://github.com/prestodb/presto/commit/8eb9718575524574b710bdea619275b51993c1cb", "committedDate": "2020-11-22T07:07:36Z", "message": "Add verifier flag for removing memory related session property\n\nIn some cases we want to remove these session property when run verifier\ntest on smaller cluster. While in certain other cases we want to keep or\nadd them to test memory related improvements (while not changing the\ncluster config)."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4752, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}