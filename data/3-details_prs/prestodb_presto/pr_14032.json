{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY4ODM0NzA2", "number": 14032, "title": "Add peak task memory in resource estimates", "bodyText": "Peak task total memory information is a critical information that we should provide support into the existing ResourceEstimates class because we can use it to redirect traffic from existing T6 (high memory) cluster to new T1 (low memory) clusters.\n== NO RELEASE NOTE ==", "createdAt": "2020-01-30T00:36:47Z", "url": "https://github.com/prestodb/presto/pull/14032", "merged": true, "mergeCommit": {"oid": "8ac000dab6366917d3148e99655ffb635dd5c153"}, "closed": true, "closedAt": "2020-02-04T20:14:16Z", "author": {"login": "andres-fm"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb_jiujAFqTM1MTIyMjAwNA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcA0iiOABqjMwMDQwMTE2NDY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUxMjIyMDA0", "url": "https://github.com/prestodb/presto/pull/14032#pullrequestreview-351222004", "createdAt": "2020-01-30T23:56:46Z", "commit": {"oid": "a1302faa39fa39c032fcc50b30c8049d131cf0fc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUxNzE4NzQ1", "url": "https://github.com/prestodb/presto/pull/14032#pullrequestreview-351718745", "createdAt": "2020-01-31T19:15:27Z", "commit": {"oid": "2951bab7ba22b181c1b1b3564974b96114cb3125"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMVQxOToxNToyN1rOFkVPjw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMVQxOToxNToyN1rOFkVPjw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzY0MTEwMw==", "bodyText": "let's just call it peakTaskMemory to aligned with peakMemory :) . Ditto for other variable/strings", "url": "https://github.com/prestodb/presto/pull/14032#discussion_r373641103", "createdAt": "2020-01-31T19:15:27Z", "author": {"login": "wenleix"}, "path": "presto-main/src/main/java/com/facebook/presto/Session.java", "diffHunk": "@@ -709,6 +709,7 @@ public Session build()\n         private Optional<Duration> executionTime = Optional.empty();\n         private Optional<Duration> cpuTime = Optional.empty();\n         private Optional<DataSize> peakMemory = Optional.empty();\n+        private Optional<DataSize> peakTaskTotalMemory = Optional.empty();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2951bab7ba22b181c1b1b3564974b96114cb3125"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUxODcwNDcy", "url": "https://github.com/prestodb/presto/pull/14032#pullrequestreview-351870472", "createdAt": "2020-02-01T07:15:30Z", "commit": {"oid": "1146b74e943427eac56cb4a9d6da1e7b673931f1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wMVQwNzoxNTozMFrOFkcurQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wMVQwNzoxNTozMFrOFkcurQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzc2Mzc1Nw==", "bodyText": "nit: this is not renamed here", "url": "https://github.com/prestodb/presto/pull/14032#discussion_r373763757", "createdAt": "2020-02-01T07:15:30Z", "author": {"login": "wenleix"}, "path": "presto-spi/src/main/java/com/facebook/presto/spi/session/ResourceEstimates.java", "diffHunk": "@@ -32,20 +32,24 @@\n     public static final String EXECUTION_TIME = \"EXECUTION_TIME\";\n     public static final String CPU_TIME = \"CPU_TIME\";\n     public static final String PEAK_MEMORY = \"PEAK_MEMORY\";\n+    public static final String PEAK_TASK_MEMORY = \"PEAK_TASK_MEMORY\";\n \n     private final Optional<Duration> executionTime;\n     private final Optional<Duration> cpuTime;\n     private final Optional<DataSize> peakMemory;\n+    private final Optional<DataSize> peakTaskMemory;\n \n     @JsonCreator\n     public ResourceEstimates(\n             @JsonProperty(\"executionTime\") Optional<Duration> executionTime,\n             @JsonProperty(\"cpuTime\") Optional<Duration> cpuTime,\n-            @JsonProperty(\"peakMemory\") Optional<DataSize> peakMemory)\n+            @JsonProperty(\"peakMemory\") Optional<DataSize> peakMemory,\n+            @JsonProperty(\"peakTaskTotalMemory\") Optional<DataSize> peakTaskMemory)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1146b74e943427eac56cb4a9d6da1e7b673931f1"}, "originalPosition": 17}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUyNTQyMzY3", "url": "https://github.com/prestodb/presto/pull/14032#pullrequestreview-352542367", "createdAt": "2020-02-03T20:32:00Z", "commit": {"oid": "f8dc6560d0e78774a0d963da5d9df0391032021b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3c6aa7dc8e732334820fc9f7cb8e6529d7bee758", "author": {"user": {"login": "andres-fm", "name": "Andr\u00e9s Flores"}}, "url": "https://github.com/prestodb/presto/commit/3c6aa7dc8e732334820fc9f7cb8e6529d7bee758", "committedDate": "2020-02-03T22:15:16Z", "message": "Add peak task memory in resource estimates"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f8dc6560d0e78774a0d963da5d9df0391032021b", "author": {"user": {"login": "andres-fm", "name": "Andr\u00e9s Flores"}}, "url": "https://github.com/prestodb/presto/commit/f8dc6560d0e78774a0d963da5d9df0391032021b", "committedDate": "2020-02-03T19:07:51Z", "message": "renaming json property"}, "afterCommit": {"oid": "3c6aa7dc8e732334820fc9f7cb8e6529d7bee758", "author": {"user": {"login": "andres-fm", "name": "Andr\u00e9s Flores"}}, "url": "https://github.com/prestodb/presto/commit/3c6aa7dc8e732334820fc9f7cb8e6529d7bee758", "committedDate": "2020-02-03T22:15:16Z", "message": "Add peak task memory in resource estimates"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2521, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}