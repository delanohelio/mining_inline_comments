{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE4Mjg3NTUz", "number": 14535, "title": "Remove workers from active nodes based on status", "bodyText": "Introducing StatusDetector that can detect if any worker is marked to be not used even if they are up (i.e. maintenannce mode)\nDefault implementation of StatusDetector is NoOp which does nothing. And can be overriden by providing specific implementation.\n== RELEASE NOTES ==\n\nGeneral Changes\n* Introducing NodeStatusService interface to find out if a worker is in maintenance mode or ready to take tasks. Default behavior is no op. But can be implemented and override the behavior.  Config controlling the behavior `node-status-service.enabled`", "createdAt": "2020-05-14T23:00:39Z", "url": "https://github.com/prestodb/presto/pull/14535", "merged": true, "mergeCommit": {"oid": "e85ce87f6958d9908cc62be0193e82b7218b0d88"}, "closed": true, "closedAt": "2020-05-27T19:14:05Z", "author": {"login": "swapsmagic"}, "timelineItems": {"totalCount": 22, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABchVxYyABqjMzMzg3NDIyOTY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABclKHU6ABqjMzNzUxMjMyNjE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "624b5a0d4f014a2e07d7615be2e2100f357b837f", "author": {"user": {"login": "swapsmagic", "name": "Swapnil"}}, "url": "https://github.com/prestodb/presto/commit/624b5a0d4f014a2e07d7615be2e2100f357b837f", "committedDate": "2020-05-14T22:54:54Z", "message": "Blacklist worker based on SMC status\nIntroducing StatusDetector that can detect if any worker is marked to be not used even if they are up (i.e. maintenannce mode)\nDefault implementation of StatusDetector is NoOp which does nothing. And can be overriden by providing specific implentation."}, "afterCommit": {"oid": "bbf0a7cfcfd77f1557875c219db1e76353ed81f4", "author": {"user": {"login": "swapsmagic", "name": "Swapnil"}}, "url": "https://github.com/prestodb/presto/commit/bbf0a7cfcfd77f1557875c219db1e76353ed81f4", "committedDate": "2020-05-14T23:07:15Z", "message": "Blacklist worker based on SMC status\nIntroducing StatusDetector that can detect if any worker is marked to be not used even if they are up (i.e. maintenannce mode)\nDefault implementation of StatusDetector is NoOp which does nothing. And can be overriden by providing specific implentation."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bbf0a7cfcfd77f1557875c219db1e76353ed81f4", "author": {"user": {"login": "swapsmagic", "name": "Swapnil"}}, "url": "https://github.com/prestodb/presto/commit/bbf0a7cfcfd77f1557875c219db1e76353ed81f4", "committedDate": "2020-05-14T23:07:15Z", "message": "Blacklist worker based on SMC status\nIntroducing StatusDetector that can detect if any worker is marked to be not used even if they are up (i.e. maintenannce mode)\nDefault implementation of StatusDetector is NoOp which does nothing. And can be overriden by providing specific implentation."}, "afterCommit": {"oid": "0c4acc057001c61874924d0d4183ebd912cec15c", "author": {"user": {"login": "swapsmagic", "name": "Swapnil"}}, "url": "https://github.com/prestodb/presto/commit/0c4acc057001c61874924d0d4183ebd912cec15c", "committedDate": "2020-05-14T23:21:19Z", "message": "Blacklist worker based on SMC status\nIntroducing StatusDetector that can detect if any worker is marked to be not used even if they are up (i.e. maintenannce mode)\nDefault implementation of StatusDetector is NoOp which does nothing. And can be overriden by providing specific implentation."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0c4acc057001c61874924d0d4183ebd912cec15c", "author": {"user": {"login": "swapsmagic", "name": "Swapnil"}}, "url": "https://github.com/prestodb/presto/commit/0c4acc057001c61874924d0d4183ebd912cec15c", "committedDate": "2020-05-14T23:21:19Z", "message": "Blacklist worker based on SMC status\nIntroducing StatusDetector that can detect if any worker is marked to be not used even if they are up (i.e. maintenannce mode)\nDefault implementation of StatusDetector is NoOp which does nothing. And can be overriden by providing specific implentation."}, "afterCommit": {"oid": "d97052dec75783fa9bbf4b1416d899bd9cbf6e1d", "author": {"user": {"login": "swapsmagic", "name": "Swapnil"}}, "url": "https://github.com/prestodb/presto/commit/d97052dec75783fa9bbf4b1416d899bd9cbf6e1d", "committedDate": "2020-05-15T06:22:14Z", "message": "Blacklist worker based on SMC status\n\nIntroducing StatusDetector that can detect if any worker is marked to be not used even if they are up (i.e. maintenannce mode)\nDefault implementation of StatusDetector is NoOp which does nothing. And can be overriden by providing specific implentation."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEyOTI5Nzgy", "url": "https://github.com/prestodb/presto/pull/14535#pullrequestreview-412929782", "createdAt": "2020-05-15T19:57:59Z", "commit": {"oid": "d97052dec75783fa9bbf4b1416d899bd9cbf6e1d"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQxOTo1Nzo1OVrOGWSGmA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQyMDowMzowNVrOGWSO1g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjAxODQ1Ng==", "bodyText": "Generally we don't use camelCase in package names. Lets change this to statusdetector. Also statusdetector is a very vague term - it doesn't clarify whose status is being detected.", "url": "https://github.com/prestodb/presto/pull/14535#discussion_r426018456", "createdAt": "2020-05-15T19:57:59Z", "author": {"login": "mayankgarg1990"}, "path": "presto-main/src/main/java/com/facebook/presto/statusDetector/NoOpStatusDetector.java", "diffHunk": "@@ -0,0 +1,28 @@\n+/*\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.facebook.presto.statusDetector;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d97052dec75783fa9bbf4b1416d899bd9cbf6e1d"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjAxODY2Mg==", "bodyText": "Generally we don't use camelCase in package names. Lets change this to statusdetector. Also statusdetector is a very vague term - it doesn't clarify whose status is being detected.", "url": "https://github.com/prestodb/presto/pull/14535#discussion_r426018662", "createdAt": "2020-05-15T19:58:33Z", "author": {"login": "mayankgarg1990"}, "path": "presto-main/src/main/java/com/facebook/presto/statusDetector/StatusDetector.java", "diffHunk": "@@ -0,0 +1,27 @@\n+/*\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.facebook.presto.statusDetector;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d97052dec75783fa9bbf4b1416d899bd9cbf6e1d"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjAxODg0Mw==", "bodyText": "is this being used?", "url": "https://github.com/prestodb/presto/pull/14535#discussion_r426018843", "createdAt": "2020-05-15T19:59:01Z", "author": {"login": "mayankgarg1990"}, "path": "presto-main/src/main/java/com/facebook/presto/statusDetector/StatusDetector.java", "diffHunk": "@@ -0,0 +1,27 @@\n+/*\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.facebook.presto.statusDetector;\n+\n+import java.util.List;\n+\n+public interface StatusDetector\n+{\n+    List<String> getDisabled();\n+\n+    enum State\n+    {\n+        ENABLE,\n+        DISABLE\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d97052dec75783fa9bbf4b1416d899bd9cbf6e1d"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjAxOTcyMA==", "bodyText": "Currently this class only allows for support of disabled or blocked nodes. We should allow for someone to also specify the allowed nodes - if any node other than the allowed list tries to connect then it should fail.", "url": "https://github.com/prestodb/presto/pull/14535#discussion_r426019720", "createdAt": "2020-05-15T20:01:00Z", "author": {"login": "mayankgarg1990"}, "path": "presto-main/src/main/java/com/facebook/presto/statusDetector/StatusDetector.java", "diffHunk": "@@ -0,0 +1,27 @@\n+/*\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.facebook.presto.statusDetector;\n+\n+import java.util.List;\n+\n+public interface StatusDetector\n+{\n+    List<String> getDisabled();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d97052dec75783fa9bbf4b1416d899bd9cbf6e1d"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjAyMDU2Ng==", "bodyText": "Given that we have the no-op implementation - do we need the enabled flag?", "url": "https://github.com/prestodb/presto/pull/14535#discussion_r426020566", "createdAt": "2020-05-15T20:03:05Z", "author": {"login": "mayankgarg1990"}, "path": "presto-main/src/main/java/com/facebook/presto/statusDetector/StatusDetectorConfig.java", "diffHunk": "@@ -0,0 +1,33 @@\n+/*\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.facebook.presto.statusDetector;\n+\n+import com.facebook.airlift.configuration.Config;\n+\n+public class StatusDetectorConfig\n+{\n+    private boolean enabled;\n+\n+    public boolean isEnabled()\n+    {\n+        return enabled;\n+    }\n+\n+    @Config(\"status-detector.enabled\")\n+    public StatusDetectorConfig setEnabled(boolean enabled)\n+    {\n+        this.enabled = enabled;\n+        return this;\n+    }\n+}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d97052dec75783fa9bbf4b1416d899bd9cbf6e1d"}, "originalPosition": 33}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d97052dec75783fa9bbf4b1416d899bd9cbf6e1d", "author": {"user": {"login": "swapsmagic", "name": "Swapnil"}}, "url": "https://github.com/prestodb/presto/commit/d97052dec75783fa9bbf4b1416d899bd9cbf6e1d", "committedDate": "2020-05-15T06:22:14Z", "message": "Blacklist worker based on SMC status\n\nIntroducing StatusDetector that can detect if any worker is marked to be not used even if they are up (i.e. maintenannce mode)\nDefault implementation of StatusDetector is NoOp which does nothing. And can be overriden by providing specific implentation."}, "afterCommit": {"oid": "021395f8b5f225bddfd3f28eedade95fa2a42e87", "author": {"user": {"login": "swapsmagic", "name": "Swapnil"}}, "url": "https://github.com/prestodb/presto/commit/021395f8b5f225bddfd3f28eedade95fa2a42e87", "committedDate": "2020-05-15T23:49:48Z", "message": "Blacklist worker based on SMC status\n\nIntroducing StatusDetector that can detect if any worker is marked to be not used even if they are up (i.e. maintenannce mode)\nDefault implementation of StatusDetector is NoOp which does nothing. And can be overriden by providing specific implentation."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzMDIyMjEx", "url": "https://github.com/prestodb/presto/pull/14535#pullrequestreview-413022211", "createdAt": "2020-05-15T23:51:43Z", "commit": {"oid": "021395f8b5f225bddfd3f28eedade95fa2a42e87"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzMDM1MDk1", "url": "https://github.com/prestodb/presto/pull/14535#pullrequestreview-413035095", "createdAt": "2020-05-16T01:31:03Z", "commit": {"oid": "021395f8b5f225bddfd3f28eedade95fa2a42e87"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNlQwMTozMTowNFrOGWXVWg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNlQwMTozMTowNFrOGWXVWg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjEwNDE1NA==", "bodyText": "just thinking about the name NodeStatusDetector, I think detector feels like it detects when the node is up/down/disabled etc.\nI feel like this is more of a NodeStatusService which provides a list of disabled servers.", "url": "https://github.com/prestodb/presto/pull/14535#discussion_r426104154", "createdAt": "2020-05-16T01:31:04Z", "author": {"login": "ajaygeorge"}, "path": "presto-main/src/main/java/com/facebook/presto/statusdetector/NodeStatusDetector.java", "diffHunk": "@@ -0,0 +1,21 @@\n+/*\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.facebook.presto.statusdetector;\n+\n+import java.util.List;\n+\n+public interface NodeStatusDetector", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "021395f8b5f225bddfd3f28eedade95fa2a42e87"}, "originalPosition": 18}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzMDM1NjQz", "url": "https://github.com/prestodb/presto/pull/14535#pullrequestreview-413035643", "createdAt": "2020-05-16T01:37:11Z", "commit": {"oid": "021395f8b5f225bddfd3f28eedade95fa2a42e87"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNlQwMTozNzoxMVrOGWXXiA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNlQwMTozNzoxMVrOGWXXiA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjEwNDcxMg==", "bodyText": "How about Set<ServiceDescriptor> instead of List<String> since I think there cannot be duplicates and ServiceDescriptor captures the idea of node better than String", "url": "https://github.com/prestodb/presto/pull/14535#discussion_r426104712", "createdAt": "2020-05-16T01:37:11Z", "author": {"login": "ajaygeorge"}, "path": "presto-main/src/main/java/com/facebook/presto/statusdetector/NodeStatusDetector.java", "diffHunk": "@@ -0,0 +1,21 @@\n+/*\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.facebook.presto.statusdetector;\n+\n+import java.util.List;\n+\n+public interface NodeStatusDetector\n+{\n+    List<String> getDisabled();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "021395f8b5f225bddfd3f28eedade95fa2a42e87"}, "originalPosition": 20}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzMDM1Nzk1", "url": "https://github.com/prestodb/presto/pull/14535#pullrequestreview-413035795", "createdAt": "2020-05-16T01:38:41Z", "commit": {"oid": "021395f8b5f225bddfd3f28eedade95fa2a42e87"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNlQwMTozODo0MVrOGWXYGQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNlQwMTozODo0MVrOGWXYGQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjEwNDg1Nw==", "bodyText": "Are we using this anywhere. ?\nShouldn't the filtering logic in DiscoveryNodeManager.java respect this flag?", "url": "https://github.com/prestodb/presto/pull/14535#discussion_r426104857", "createdAt": "2020-05-16T01:38:41Z", "author": {"login": "ajaygeorge"}, "path": "presto-main/src/main/java/com/facebook/presto/statusdetector/NodeStatusDetectorConfig.java", "diffHunk": "@@ -0,0 +1,33 @@\n+/*\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.facebook.presto.statusdetector;\n+\n+import com.facebook.airlift.configuration.Config;\n+\n+public class NodeStatusDetectorConfig\n+{\n+    private boolean enabled;\n+\n+    public boolean isEnabled()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "021395f8b5f225bddfd3f28eedade95fa2a42e87"}, "originalPosition": 22}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzNzY0MzE0", "url": "https://github.com/prestodb/presto/pull/14535#pullrequestreview-413764314", "createdAt": "2020-05-18T16:40:45Z", "commit": {"oid": "021395f8b5f225bddfd3f28eedade95fa2a42e87"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxNjo0MDo0NVrOGW_Q0g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxNjo0MDo0NVrOGW_Q0g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjc1ODM1NA==", "bodyText": "Can we define a lambda function instead?", "url": "https://github.com/prestodb/presto/pull/14535#discussion_r426758354", "createdAt": "2020-05-18T16:40:45Z", "author": {"login": "cemcayiroglu"}, "path": "presto-main/src/main/java/com/facebook/presto/statusdetector/NoOpNodeStatusDetector.java", "diffHunk": "@@ -0,0 +1,28 @@\n+/*\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.facebook.presto.statusdetector;\n+\n+import com.google.common.collect.ImmutableList;\n+\n+import java.util.List;\n+\n+public class NoOpNodeStatusDetector", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "021395f8b5f225bddfd3f28eedade95fa2a42e87"}, "originalPosition": 20}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "021395f8b5f225bddfd3f28eedade95fa2a42e87", "author": {"user": {"login": "swapsmagic", "name": "Swapnil"}}, "url": "https://github.com/prestodb/presto/commit/021395f8b5f225bddfd3f28eedade95fa2a42e87", "committedDate": "2020-05-15T23:49:48Z", "message": "Blacklist worker based on SMC status\n\nIntroducing StatusDetector that can detect if any worker is marked to be not used even if they are up (i.e. maintenannce mode)\nDefault implementation of StatusDetector is NoOp which does nothing. And can be overriden by providing specific implentation."}, "afterCommit": {"oid": "2326e449f09daf7020e7cdf1f06e1205c7ee9433", "author": {"user": {"login": "swapsmagic", "name": "Swapnil"}}, "url": "https://github.com/prestodb/presto/commit/2326e449f09daf7020e7cdf1f06e1205c7ee9433", "committedDate": "2020-05-19T01:00:27Z", "message": "Blacklist worker based on SMC status\n\nIntroducing StatusDetector that can detect if any worker is marked to be not used even if they are up (i.e. maintenannce mode)\nDefault implementation of StatusDetector is NoOp which does nothing. And can be overriden by providing specific implentation."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2326e449f09daf7020e7cdf1f06e1205c7ee9433", "author": {"user": {"login": "swapsmagic", "name": "Swapnil"}}, "url": "https://github.com/prestodb/presto/commit/2326e449f09daf7020e7cdf1f06e1205c7ee9433", "committedDate": "2020-05-19T01:00:27Z", "message": "Blacklist worker based on SMC status\n\nIntroducing StatusDetector that can detect if any worker is marked to be not used even if they are up (i.e. maintenannce mode)\nDefault implementation of StatusDetector is NoOp which does nothing. And can be overriden by providing specific implentation."}, "afterCommit": {"oid": "dac5eaeb6ce11b75eaff8def9b05a610638707a0", "author": {"user": {"login": "swapsmagic", "name": "Swapnil"}}, "url": "https://github.com/prestodb/presto/commit/dac5eaeb6ce11b75eaff8def9b05a610638707a0", "committedDate": "2020-05-19T20:19:27Z", "message": "Blacklist worker based on SMC status\n\nIntroducing StatusDetector that can detect if any worker is marked to be not used even if they are up (i.e. maintenannce mode)\nDefault implementation of StatusDetector is NoOp which does nothing. And can be overriden by providing specific implentation."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE0ODE3MjUz", "url": "https://github.com/prestodb/presto/pull/14535#pullrequestreview-414817253", "createdAt": "2020-05-19T20:57:13Z", "commit": {"oid": "dac5eaeb6ce11b75eaff8def9b05a610638707a0"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQyMDo1NzoxM1rOGXyV5Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQyMDo1NzoxM1rOGXyV5Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzU5NTIzNw==", "bodyText": "Call this AllowAllStatusService?", "url": "https://github.com/prestodb/presto/pull/14535#discussion_r427595237", "createdAt": "2020-05-19T20:57:13Z", "author": {"login": "tdcmeehan"}, "path": "presto-main/src/main/java/com/facebook/presto/statusservice/NoOpNodeStatusService.java", "diffHunk": "@@ -0,0 +1,24 @@\n+/*\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.facebook.presto.statusservice;\n+\n+public class NoOpNodeStatusService", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dac5eaeb6ce11b75eaff8def9b05a610638707a0"}, "originalPosition": 16}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "dac5eaeb6ce11b75eaff8def9b05a610638707a0", "author": {"user": {"login": "swapsmagic", "name": "Swapnil"}}, "url": "https://github.com/prestodb/presto/commit/dac5eaeb6ce11b75eaff8def9b05a610638707a0", "committedDate": "2020-05-19T20:19:27Z", "message": "Blacklist worker based on SMC status\n\nIntroducing StatusDetector that can detect if any worker is marked to be not used even if they are up (i.e. maintenannce mode)\nDefault implementation of StatusDetector is NoOp which does nothing. And can be overriden by providing specific implentation."}, "afterCommit": {"oid": "33d02008c982e109db4ae35cea456624056b8bdb", "author": {"user": {"login": "swapsmagic", "name": "Swapnil"}}, "url": "https://github.com/prestodb/presto/commit/33d02008c982e109db4ae35cea456624056b8bdb", "committedDate": "2020-05-19T21:05:23Z", "message": "Blacklist worker based on SMC status\n\nIntroducing NodeStatusService that can detect if any node is marked to be not used even if they are up (i.e. maintenannce mode)\nDefault implementation is to allow all nodes. And can be overriden by providing specific implentation."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE1NzAwMDgy", "url": "https://github.com/prestodb/presto/pull/14535#pullrequestreview-415700082", "createdAt": "2020-05-20T20:44:29Z", "commit": {"oid": "33d02008c982e109db4ae35cea456624056b8bdb"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQyMDo0NDoyOVrOGYdI3w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQyMDo0NDoyOVrOGYdI3w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODI5NjQxNQ==", "bodyText": "change this to configBinder(binder).bindConfig(NodeStatusServiceConfig.class) - this will make it actually read configuration properties. As of now the class will be initialized like any other class", "url": "https://github.com/prestodb/presto/pull/14535#discussion_r428296415", "createdAt": "2020-05-20T20:44:29Z", "author": {"login": "mayankgarg1990"}, "path": "presto-main/src/main/java/com/facebook/presto/server/ServerMainModule.java", "diffHunk": "@@ -260,6 +263,8 @@ protected void setup(Binder binder)\n         // analyze properties\n         binder.bind(AnalyzePropertyManager.class).in(Scopes.SINGLETON);\n \n+        binder.bind(NodeStatusServiceConfig.class).in(Scopes.SINGLETON);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "33d02008c982e109db4ae35cea456624056b8bdb"}, "originalPosition": 14}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "33d02008c982e109db4ae35cea456624056b8bdb", "author": {"user": {"login": "swapsmagic", "name": "Swapnil"}}, "url": "https://github.com/prestodb/presto/commit/33d02008c982e109db4ae35cea456624056b8bdb", "committedDate": "2020-05-19T21:05:23Z", "message": "Blacklist worker based on SMC status\n\nIntroducing NodeStatusService that can detect if any node is marked to be not used even if they are up (i.e. maintenannce mode)\nDefault implementation is to allow all nodes. And can be overriden by providing specific implentation."}, "afterCommit": {"oid": "7fbc73162ebb8009b9924f90735efdef6db713f6", "author": {"user": {"login": "swapsmagic", "name": "Swapnil"}}, "url": "https://github.com/prestodb/presto/commit/7fbc73162ebb8009b9924f90735efdef6db713f6", "committedDate": "2020-05-20T22:50:38Z", "message": "Blacklist worker based on SMC status\n\nIntroducing NodeStatusService that can detect if any node is marked to be not used even if they are up (i.e. maintenannce mode)\nDefault implementation is to allow all nodes. And can be overriden by providing specific implentation."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE1NzcyNDQy", "url": "https://github.com/prestodb/presto/pull/14535#pullrequestreview-415772442", "createdAt": "2020-05-20T23:02:19Z", "commit": {"oid": "7fbc73162ebb8009b9924f90735efdef6db713f6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7fbc73162ebb8009b9924f90735efdef6db713f6", "author": {"user": {"login": "swapsmagic", "name": "Swapnil"}}, "url": "https://github.com/prestodb/presto/commit/7fbc73162ebb8009b9924f90735efdef6db713f6", "committedDate": "2020-05-20T22:50:38Z", "message": "Blacklist worker based on SMC status\n\nIntroducing NodeStatusService that can detect if any node is marked to be not used even if they are up (i.e. maintenannce mode)\nDefault implementation is to allow all nodes. And can be overriden by providing specific implentation."}, "afterCommit": {"oid": "3bcf33e3bf07f5e1c6b6ed386ef92a74994aba7a", "author": {"user": {"login": "swapsmagic", "name": "Swapnil"}}, "url": "https://github.com/prestodb/presto/commit/3bcf33e3bf07f5e1c6b6ed386ef92a74994aba7a", "committedDate": "2020-05-21T18:37:14Z", "message": "Blacklist worker based on SMC status\n\nIntroducing NodeStatusService that can detect if any node is marked to be not used even if they are up (i.e. maintenannce mode)\nDefault implementation is to allow all nodes. And can be overriden by providing specific implentation."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE2NDYyNzE5", "url": "https://github.com/prestodb/presto/pull/14535#pullrequestreview-416462719", "createdAt": "2020-05-21T20:21:13Z", "commit": {"oid": "3bcf33e3bf07f5e1c6b6ed386ef92a74994aba7a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3bcf33e3bf07f5e1c6b6ed386ef92a74994aba7a", "author": {"user": {"login": "swapsmagic", "name": "Swapnil"}}, "url": "https://github.com/prestodb/presto/commit/3bcf33e3bf07f5e1c6b6ed386ef92a74994aba7a", "committedDate": "2020-05-21T18:37:14Z", "message": "Blacklist worker based on SMC status\n\nIntroducing NodeStatusService that can detect if any node is marked to be not used even if they are up (i.e. maintenannce mode)\nDefault implementation is to allow all nodes. And can be overriden by providing specific implentation."}, "afterCommit": {"oid": "b73117ef653d970e8606a3f4091909426f7d4a56", "author": {"user": {"login": "swapsmagic", "name": "Swapnil"}}, "url": "https://github.com/prestodb/presto/commit/b73117ef653d970e8606a3f4091909426f7d4a56", "committedDate": "2020-05-26T18:22:54Z", "message": "Blacklist worker based on SMC status\n\nIntroducing NodeStatusService that can detect if any node is marked to be not used even if they are up (i.e. maintenannce mode)\nDefault implementation is to allow all nodes. And can be overriden by providing specific implentation."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b2f87bb88656ee2f616b2c02a518d63fca986499", "author": {"user": {"login": "swapsmagic", "name": "Swapnil"}}, "url": "https://github.com/prestodb/presto/commit/b2f87bb88656ee2f616b2c02a518d63fca986499", "committedDate": "2020-05-26T19:48:03Z", "message": "Blacklist worker based on SMC status\n\nIntroducing NodeStatusService that can detect if any node is marked to be not used even if they are up (i.e. maintenannce mode)\nDefault implementation is to allow all nodes. And can be overriden by providing specific implentation."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b73117ef653d970e8606a3f4091909426f7d4a56", "author": {"user": {"login": "swapsmagic", "name": "Swapnil"}}, "url": "https://github.com/prestodb/presto/commit/b73117ef653d970e8606a3f4091909426f7d4a56", "committedDate": "2020-05-26T18:22:54Z", "message": "Blacklist worker based on SMC status\n\nIntroducing NodeStatusService that can detect if any node is marked to be not used even if they are up (i.e. maintenannce mode)\nDefault implementation is to allow all nodes. And can be overriden by providing specific implentation."}, "afterCommit": {"oid": "b2f87bb88656ee2f616b2c02a518d63fca986499", "author": {"user": {"login": "swapsmagic", "name": "Swapnil"}}, "url": "https://github.com/prestodb/presto/commit/b2f87bb88656ee2f616b2c02a518d63fca986499", "committedDate": "2020-05-26T19:48:03Z", "message": "Blacklist worker based on SMC status\n\nIntroducing NodeStatusService that can detect if any node is marked to be not used even if they are up (i.e. maintenannce mode)\nDefault implementation is to allow all nodes. And can be overriden by providing specific implentation."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1654, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}