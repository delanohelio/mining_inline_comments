{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ2NTU1MTkx", "number": 14814, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQwMTozNjozNFrOEMtdog==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQwMTozNjozNFrOEMtdog==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgxNzYzMjM0OnYy", "diffSide": "RIGHT", "path": "presto-main/src/main/java/com/facebook/presto/sql/gen/CursorProcessorCompiler.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQwMTozNjozNFrOGu-q2A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQwMzoyMzowMFrOGvAWNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTkxNDQ1Ng==", "bodyText": "Before the change , looks like cursor is a parameter, while now it's a variable in the scope?\nParameter cursor = arg(\"cursor\", RecordCursor.class);", "url": "https://github.com/prestodb/presto/pull/14814#discussion_r451914456", "createdAt": "2020-07-09T01:36:34Z", "author": {"login": "wenleix"}, "path": "presto-main/src/main/java/com/facebook/presto/sql/gen/CursorProcessorCompiler.java", "diffHunk": "@@ -275,6 +265,7 @@ public BytecodeNode visitInputReference(InputReferenceExpression node, Scope sco\n                 int field = node.getField();\n                 Type type = node.getType();\n                 Variable wasNullVariable = scope.getVariable(\"wasNull\");\n+                Variable cursorVariable = scope.getVariable(\"cursor\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f78db920a1a545045b1b96a6e420b602d2e6d8eb"}, "originalPosition": 110}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTk0MTk0Mw==", "bodyText": "This logic is also copied from master. Essentially the passed in parameter is a method parameter. So getting it from the method's scope works as well as directly passing in the variable. I don't know why cursor was passed in but wasNull was fetched from scope. Seems like getting both from scope is more consistent.", "url": "https://github.com/prestodb/presto/pull/14814#discussion_r451941943", "createdAt": "2020-07-09T03:23:00Z", "author": {"login": "rongrong"}, "path": "presto-main/src/main/java/com/facebook/presto/sql/gen/CursorProcessorCompiler.java", "diffHunk": "@@ -275,6 +265,7 @@ public BytecodeNode visitInputReference(InputReferenceExpression node, Scope sco\n                 int field = node.getField();\n                 Type type = node.getType();\n                 Variable wasNullVariable = scope.getVariable(\"wasNull\");\n+                Variable cursorVariable = scope.getVariable(\"cursor\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTkxNDQ1Ng=="}, "originalCommit": {"oid": "f78db920a1a545045b1b96a6e420b602d2e6d8eb"}, "originalPosition": 110}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2335, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}