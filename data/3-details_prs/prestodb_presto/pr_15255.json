{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk1Nzg1MTMx", "number": 15255, "title": "Fix double counting of charPositionInLine", "bodyText": "Fix double counting of charPositionInLine\nParsingException when constructed through the NodeLocation\nconstructor ends up double counting the column number. This\ncommit tries to fix that by decrementing the column number\nwhile constructing the object.\nTest plan - unit testing and travis tests.\nfixes #15254\n== NO RELEASE NOTE ==", "createdAt": "2020-09-30T20:59:35Z", "url": "https://github.com/prestodb/presto/pull/15255", "merged": true, "mergeCommit": {"oid": "151fa9707ffff50f66196b1059bde0877cbba990"}, "closed": true, "closedAt": "2020-10-28T17:43:12Z", "author": {"login": "ajaygeorge"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdOEIUggBqjM4MjY2MjM0MTY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdWzf5XABqjM5Mjg5NjE4MDE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5856cb08dc0fe0d797ede5c60c5f8dcc96a447c8", "author": {"user": {"login": "ajaygeorge", "name": "Ajay George"}}, "url": "https://github.com/prestodb/presto/commit/5856cb08dc0fe0d797ede5c60c5f8dcc96a447c8", "committedDate": "2020-09-30T20:57:57Z", "message": "Fix double counting of charPositionInLine"}, "afterCommit": {"oid": "9be51edaba17c35b5889a90b195237509656938e", "author": {"user": {"login": "ajaygeorge", "name": "Ajay George"}}, "url": "https://github.com/prestodb/presto/commit/9be51edaba17c35b5889a90b195237509656938e", "committedDate": "2020-09-30T21:59:28Z", "message": "Fix double counting of charPositionInLine\n\nParsingException when constructed through the NodeLocation\nconstructor ends up double counting the column number. This\ncommit tries to fix that by decrementing the column number\nwhile constructing the object."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9be51edaba17c35b5889a90b195237509656938e", "author": {"user": {"login": "ajaygeorge", "name": "Ajay George"}}, "url": "https://github.com/prestodb/presto/commit/9be51edaba17c35b5889a90b195237509656938e", "committedDate": "2020-09-30T21:59:28Z", "message": "Fix double counting of charPositionInLine\n\nParsingException when constructed through the NodeLocation\nconstructor ends up double counting the column number. This\ncommit tries to fix that by decrementing the column number\nwhile constructing the object."}, "afterCommit": {"oid": "c705a86e37f7b717de454e80f5966477445c1a4c", "author": {"user": {"login": "ajaygeorge", "name": "Ajay George"}}, "url": "https://github.com/prestodb/presto/commit/c705a86e37f7b717de454e80f5966477445c1a4c", "committedDate": "2020-09-30T22:11:54Z", "message": "Fix double counting of charPositionInLine\n\nParsingException when constructed through the NodeLocation\nconstructor ends up double counting the column number. This\ncommit tries to fix that by decrementing the column number\nwhile constructing the object."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c705a86e37f7b717de454e80f5966477445c1a4c", "author": {"user": {"login": "ajaygeorge", "name": "Ajay George"}}, "url": "https://github.com/prestodb/presto/commit/c705a86e37f7b717de454e80f5966477445c1a4c", "committedDate": "2020-09-30T22:11:54Z", "message": "Fix double counting of charPositionInLine\n\nParsingException when constructed through the NodeLocation\nconstructor ends up double counting the column number. This\ncommit tries to fix that by decrementing the column number\nwhile constructing the object."}, "afterCommit": {"oid": "03dc4139960d26ffbf9657b56989a946ea20e0b8", "author": {"user": {"login": "ajaygeorge", "name": "Ajay George"}}, "url": "https://github.com/prestodb/presto/commit/03dc4139960d26ffbf9657b56989a946ea20e0b8", "committedDate": "2020-09-30T22:14:52Z", "message": "Fix double counting of charPositionInLine\n\nParsingException when constructed through the NodeLocation\nconstructor ends up double counting the column number. This\ncommit tries to fix that by decrementing the column number\nwhile constructing the object."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAxNDA5MjQ1", "url": "https://github.com/prestodb/presto/pull/15255#pullrequestreview-501409245", "createdAt": "2020-10-02T19:55:03Z", "commit": {"oid": "03dc4139960d26ffbf9657b56989a946ea20e0b8"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAxNDEwMzU4", "url": "https://github.com/prestodb/presto/pull/15255#pullrequestreview-501410358", "createdAt": "2020-10-02T19:56:59Z", "commit": {"oid": "03dc4139960d26ffbf9657b56989a946ea20e0b8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQxOTo1NzowMFrOHb58Mw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQxOTo1NzowMFrOHb58Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTAyMjg5OQ==", "bodyText": "In general I think it's better to change the getColumnNumber to be just a getter and change all callers to initialize these classes correctly. But that would be more code change. Maybe add a comment here to explain why this is needed.", "url": "https://github.com/prestodb/presto/pull/15255#discussion_r499022899", "createdAt": "2020-10-02T19:57:00Z", "author": {"login": "rongrong"}, "path": "presto-parser/src/main/java/com/facebook/presto/sql/parser/ParsingException.java", "diffHunk": "@@ -39,7 +39,7 @@ public ParsingException(String message)\n \n     public ParsingException(String message, NodeLocation nodeLocation)\n     {\n-        this(message, null, nodeLocation.getLineNumber(), nodeLocation.getColumnNumber());\n+        this(message, null, nodeLocation.getLineNumber(), nodeLocation.getColumnNumber() - 1);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "03dc4139960d26ffbf9657b56989a946ea20e0b8"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "03dc4139960d26ffbf9657b56989a946ea20e0b8", "author": {"user": {"login": "ajaygeorge", "name": "Ajay George"}}, "url": "https://github.com/prestodb/presto/commit/03dc4139960d26ffbf9657b56989a946ea20e0b8", "committedDate": "2020-09-30T22:14:52Z", "message": "Fix double counting of charPositionInLine\n\nParsingException when constructed through the NodeLocation\nconstructor ends up double counting the column number. This\ncommit tries to fix that by decrementing the column number\nwhile constructing the object."}, "afterCommit": {"oid": "1c1e5d5cccbf2fc57765616ad7028c243eb10c6f", "author": {"user": {"login": "ajaygeorge", "name": "Ajay George"}}, "url": "https://github.com/prestodb/presto/commit/1c1e5d5cccbf2fc57765616ad7028c243eb10c6f", "committedDate": "2020-10-02T21:01:16Z", "message": "Fix double counting of charPositionInLine\n\nParsingException when constructed through the NodeLocation\nconstructor ends up double counting the column number. This\ncommit tries to fix that by decrementing the column number\nwhile constructing the object."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1c1e5d5cccbf2fc57765616ad7028c243eb10c6f", "author": {"user": {"login": "ajaygeorge", "name": "Ajay George"}}, "url": "https://github.com/prestodb/presto/commit/1c1e5d5cccbf2fc57765616ad7028c243eb10c6f", "committedDate": "2020-10-02T21:01:16Z", "message": "Fix double counting of charPositionInLine\n\nParsingException when constructed through the NodeLocation\nconstructor ends up double counting the column number. This\ncommit tries to fix that by decrementing the column number\nwhile constructing the object."}, "afterCommit": {"oid": "4634e7635d0a7fe321dd054361c1983adb218ee5", "author": {"user": {"login": "ajaygeorge", "name": "Ajay George"}}, "url": "https://github.com/prestodb/presto/commit/4634e7635d0a7fe321dd054361c1983adb218ee5", "committedDate": "2020-10-06T05:26:18Z", "message": "Fix double counting of charPositionInLine\n\nParsingException when constructed through the NodeLocation\nconstructor ends up double counting the column number. This\ncommit tries to fix that by decrementing the column number\nwhile constructing the object."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4634e7635d0a7fe321dd054361c1983adb218ee5", "author": {"user": {"login": "ajaygeorge", "name": "Ajay George"}}, "url": "https://github.com/prestodb/presto/commit/4634e7635d0a7fe321dd054361c1983adb218ee5", "committedDate": "2020-10-06T05:26:18Z", "message": "Fix double counting of charPositionInLine\n\nParsingException when constructed through the NodeLocation\nconstructor ends up double counting the column number. This\ncommit tries to fix that by decrementing the column number\nwhile constructing the object."}, "afterCommit": {"oid": "3f812525bee66e42a7e3a060bd742d37984f646d", "author": {"user": {"login": "ajaygeorge", "name": "Ajay George"}}, "url": "https://github.com/prestodb/presto/commit/3f812525bee66e42a7e3a060bd742d37984f646d", "committedDate": "2020-10-06T05:26:41Z", "message": "Fix double counting of charPositionInLine\n\nParsingException when constructed through the NodeLocation\nconstructor ends up double counting the column number. This\ncommit tries to fix that by decrementing the column number\nwhile constructing the object."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3f812525bee66e42a7e3a060bd742d37984f646d", "author": {"user": {"login": "ajaygeorge", "name": "Ajay George"}}, "url": "https://github.com/prestodb/presto/commit/3f812525bee66e42a7e3a060bd742d37984f646d", "committedDate": "2020-10-06T05:26:41Z", "message": "Fix double counting of charPositionInLine\n\nParsingException when constructed through the NodeLocation\nconstructor ends up double counting the column number. This\ncommit tries to fix that by decrementing the column number\nwhile constructing the object."}, "afterCommit": {"oid": "50a25104b160cea3a808d9c7ec243803eb85b087", "author": {"user": {"login": "ajaygeorge", "name": "Ajay George"}}, "url": "https://github.com/prestodb/presto/commit/50a25104b160cea3a808d9c7ec243803eb85b087", "committedDate": "2020-10-26T05:04:57Z", "message": "Fix double counting of charPositionInLine\n\nParsingException when constructed through the NodeLocation\nconstructor ends up double counting the column number. This\ncommit tries to fix that by decrementing the column number\nwhile constructing the object."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "50a25104b160cea3a808d9c7ec243803eb85b087", "author": {"user": {"login": "ajaygeorge", "name": "Ajay George"}}, "url": "https://github.com/prestodb/presto/commit/50a25104b160cea3a808d9c7ec243803eb85b087", "committedDate": "2020-10-26T05:04:57Z", "message": "Fix double counting of charPositionInLine\n\nParsingException when constructed through the NodeLocation\nconstructor ends up double counting the column number. This\ncommit tries to fix that by decrementing the column number\nwhile constructing the object."}, "afterCommit": {"oid": "184eaba847c4336b8c4a89f7a3d034e9f2883817", "author": {"user": {"login": "ajaygeorge", "name": "Ajay George"}}, "url": "https://github.com/prestodb/presto/commit/184eaba847c4336b8c4a89f7a3d034e9f2883817", "committedDate": "2020-10-26T05:05:14Z", "message": "Fix double counting of charPositionInLine\n\nParsingException when constructed through the NodeLocation\nconstructor ends up double counting the column number. This\ncommit tries to fix that by decrementing the column number\nwhile constructing the object."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "27a6e25998b90a9eb052d9bc572ca8165cadd5e4", "author": {"user": {"login": "ajaygeorge", "name": "Ajay George"}}, "url": "https://github.com/prestodb/presto/commit/27a6e25998b90a9eb052d9bc572ca8165cadd5e4", "committedDate": "2020-10-28T01:43:23Z", "message": "Fix double counting of charPositionInLine\n\nParsingException when constructed through the NodeLocation\nconstructor ends up double counting the column number. This\ncommit tries to fix that by decrementing the column number\nwhile constructing the object."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "184eaba847c4336b8c4a89f7a3d034e9f2883817", "author": {"user": {"login": "ajaygeorge", "name": "Ajay George"}}, "url": "https://github.com/prestodb/presto/commit/184eaba847c4336b8c4a89f7a3d034e9f2883817", "committedDate": "2020-10-26T05:05:14Z", "message": "Fix double counting of charPositionInLine\n\nParsingException when constructed through the NodeLocation\nconstructor ends up double counting the column number. This\ncommit tries to fix that by decrementing the column number\nwhile constructing the object."}, "afterCommit": {"oid": "27a6e25998b90a9eb052d9bc572ca8165cadd5e4", "author": {"user": {"login": "ajaygeorge", "name": "Ajay George"}}, "url": "https://github.com/prestodb/presto/commit/27a6e25998b90a9eb052d9bc572ca8165cadd5e4", "committedDate": "2020-10-28T01:43:23Z", "message": "Fix double counting of charPositionInLine\n\nParsingException when constructed through the NodeLocation\nconstructor ends up double counting the column number. This\ncommit tries to fix that by decrementing the column number\nwhile constructing the object."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4815, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}