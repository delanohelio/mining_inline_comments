{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc3NDEwMzgz", "number": 15108, "title": "Add property to limit output size of a query", "bodyText": "Test plan -\n\nAdded unit tests\nManually tested by using the TpchQueryRunner:\n\n$ cat /tmp/query.sql \nSET SESSION query_max_output_bytes='1000B';\nSELECT * FROM orders;\n\n$ ./presto-cli/target/presto-cli-0.241-SNAPSHOT-executable.jar --catalog tpch --schema sf30000 -f /tmp/query.sql > /tmp/out\nSET SESSION\nQuery 20200902_000014_00001_9ki9x failed: Query has exceeded output size Limit of 1000B\n\n== RELEASE NOTES ==\n\nGeneral Changes\n* Add session property ``query_max_output_bytes`` and configuration property ``query.max-output-bytes`` to control how much data a query can output.", "createdAt": "2020-09-02T00:09:09Z", "url": "https://github.com/prestodb/presto/pull/15108", "merged": true, "mergeCommit": {"oid": "a7bf06f81b37364fecaf242fdc2cc2f3342ab7fc"}, "closed": true, "closedAt": "2020-09-11T19:54:53Z", "author": {"login": "mayankgarg1990"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdEx6-lABqjM3MTc0NzUwOTk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdF9qtdgBqjM3MzMxNTM2NDM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "740170161afd663b157c14e8aa75fe865092e663", "author": {"user": {"login": "mayankgarg1990", "name": null}}, "url": "https://github.com/prestodb/presto/commit/740170161afd663b157c14e8aa75fe865092e663", "committedDate": "2020-09-02T00:05:19Z", "message": "Add property to limit output size of a query"}, "afterCommit": {"oid": "e2c6d51aef13c328a16ce67e6184316d7e5cc52e", "author": {"user": {"login": "mayankgarg1990", "name": null}}, "url": "https://github.com/prestodb/presto/commit/e2c6d51aef13c328a16ce67e6184316d7e5cc52e", "committedDate": "2020-09-02T01:42:29Z", "message": "Add property to limit output size of a query"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e2c6d51aef13c328a16ce67e6184316d7e5cc52e", "author": {"user": {"login": "mayankgarg1990", "name": null}}, "url": "https://github.com/prestodb/presto/commit/e2c6d51aef13c328a16ce67e6184316d7e5cc52e", "committedDate": "2020-09-02T01:42:29Z", "message": "Add property to limit output size of a query"}, "afterCommit": {"oid": "0fc44ebc80038fa982ad5e86b1d5ba8ebd93c8f4", "author": {"user": {"login": "mayankgarg1990", "name": null}}, "url": "https://github.com/prestodb/presto/commit/0fc44ebc80038fa982ad5e86b1d5ba8ebd93c8f4", "committedDate": "2020-09-02T02:17:48Z", "message": "Add property to limit output size of a query"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0fc44ebc80038fa982ad5e86b1d5ba8ebd93c8f4", "author": {"user": {"login": "mayankgarg1990", "name": null}}, "url": "https://github.com/prestodb/presto/commit/0fc44ebc80038fa982ad5e86b1d5ba8ebd93c8f4", "committedDate": "2020-09-02T02:17:48Z", "message": "Add property to limit output size of a query"}, "afterCommit": {"oid": "fc730016e290f4365222992f4c49bc8553c495df", "author": {"user": {"login": "mayankgarg1990", "name": null}}, "url": "https://github.com/prestodb/presto/commit/fc730016e290f4365222992f4c49bc8553c495df", "committedDate": "2020-09-02T16:39:35Z", "message": "Add property to limit output size of a query"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgyOTA0NTcw", "url": "https://github.com/prestodb/presto/pull/15108#pullrequestreview-482904570", "createdAt": "2020-09-04T19:45:35Z", "commit": {"oid": "fc730016e290f4365222992f4c49bc8553c495df"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgyOTIwMTAx", "url": "https://github.com/prestodb/presto/pull/15108#pullrequestreview-482920101", "createdAt": "2020-09-04T20:20:19Z", "commit": {"oid": "fc730016e290f4365222992f4c49bc8553c495df"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMDoyMDoxOVrOHNajRg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMDoyMDoxOVrOHNajRg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzgyODU1MA==", "bodyText": "Actually, add a @MinDataSize(\"1B\") here?", "url": "https://github.com/prestodb/presto/pull/15108#discussion_r483828550", "createdAt": "2020-09-04T20:20:19Z", "author": {"login": "tdcmeehan"}, "path": "presto-main/src/main/java/com/facebook/presto/execution/QueryManagerConfig.java", "diffHunk": "@@ -403,6 +404,18 @@ public QueryManagerConfig setQueryMaxScanRawInputBytes(DataSize queryMaxRawInput\n         return this;\n     }\n \n+    public DataSize getQueryMaxOutputSize()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fc730016e290f4365222992f4c49bc8553c495df"}, "originalPosition": 12}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "33471008c88d29de3fdb3959b97cde079c2877cb", "author": {"user": {"login": "mayankgarg1990", "name": null}}, "url": "https://github.com/prestodb/presto/commit/33471008c88d29de3fdb3959b97cde079c2877cb", "committedDate": "2020-09-05T17:43:47Z", "message": "Add property to limit output size of a query"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fc730016e290f4365222992f4c49bc8553c495df", "author": {"user": {"login": "mayankgarg1990", "name": null}}, "url": "https://github.com/prestodb/presto/commit/fc730016e290f4365222992f4c49bc8553c495df", "committedDate": "2020-09-02T16:39:35Z", "message": "Add property to limit output size of a query"}, "afterCommit": {"oid": "33471008c88d29de3fdb3959b97cde079c2877cb", "author": {"user": {"login": "mayankgarg1990", "name": null}}, "url": "https://github.com/prestodb/presto/commit/33471008c88d29de3fdb3959b97cde079c2877cb", "committedDate": "2020-09-05T17:43:47Z", "message": "Add property to limit output size of a query"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 45, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}