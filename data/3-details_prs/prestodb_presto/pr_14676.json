{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM2NzcwMTYw", "number": 14676, "title": "Fix session properties for determinism analysis main queries", "bodyText": "We should apply the same session properties as the control main query\nwhen running the main query during determinism analysis.\nRelease notes is covered in #14638 so don't need any release notes here.\n== NO RELEASE NOTE ==", "createdAt": "2020-06-18T21:23:34Z", "url": "https://github.com/prestodb/presto/pull/14676", "merged": true, "mergeCommit": {"oid": "f5060f3d203b0b5018eb9ec06a56a060ff2c4bb5"}, "closed": true, "closedAt": "2020-06-25T20:40:24Z", "author": {"login": "caithagoras"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcss2whgH2gAyNDM2NzcwMTYwOmFhMzBiNmYwNzQ0MjUxNmU3NWNjMWNlMmZlMjdkNDRiOWFkNGZkMWY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcs5dcdAFqTQzNDMzNzAxMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "aa30b6f07442516e75cc1ce2fe27d44b9ad4fd1f", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/aa30b6f07442516e75cc1ce2fe27d44b9ad4fd1f", "committedDate": "2020-06-19T06:14:23Z", "message": "Fix session properties for determinism analysis main queries\n\nWe should apply the same session properties as the control main query\nwhen running the main query during determinism analysis."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "66924d08a00ee9781a1a6d4afc82eaab04bd8b67", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/66924d08a00ee9781a1a6d4afc82eaab04bd8b67", "committedDate": "2020-06-18T21:20:55Z", "message": "Fix session properties for determinism analysis main queries\n\nWe should apply the same session properties as the control main query\nwhen running the main query during determinism analysis."}, "afterCommit": {"oid": "aa30b6f07442516e75cc1ce2fe27d44b9ad4fd1f", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/aa30b6f07442516e75cc1ce2fe27d44b9ad4fd1f", "committedDate": "2020-06-19T06:14:23Z", "message": "Fix session properties for determinism analysis main queries\n\nWe should apply the same session properties as the control main query\nwhen running the main query during determinism analysis."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM0MzM3MDEy", "url": "https://github.com/prestodb/presto/pull/14676#pullrequestreview-434337012", "createdAt": "2020-06-19T20:55:21Z", "commit": {"oid": "aa30b6f07442516e75cc1ce2fe27d44b9ad4fd1f"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQyMDo1NToyMVrOGmhBxw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQyMDo1NToyMVrOGmhBxw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzA0MDE5OQ==", "bodyText": "Is there any reason not to include DETERMINISM_ANALYSIS_MAIN into isMain?", "url": "https://github.com/prestodb/presto/pull/14676#discussion_r443040199", "createdAt": "2020-06-19T20:55:21Z", "author": {"login": "mbasmanova"}, "path": "presto-verifier/src/main/java/com/facebook/presto/verifier/prestoaction/JdbcPrestoAction.java", "diffHunk": "@@ -145,7 +146,7 @@ private PrestoConnection getConnection(QueryStage queryStage)\n         }\n \n         // configure session properties\n-        Map<String, String> sessionProperties = queryStage.isMain()\n+        Map<String, String> sessionProperties = queryStage.isMain() || queryStage == DETERMINISM_ANALYSIS_MAIN", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aa30b6f07442516e75cc1ce2fe27d44b9ad4fd1f"}, "originalPosition": 13}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1415, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}