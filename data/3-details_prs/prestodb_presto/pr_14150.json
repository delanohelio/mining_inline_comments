{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc4OTI1OTgz", "number": 14150, "title": "Treat queriers referencing certain catalogs as non-deterministic", "bodyText": "We're seeing verification failure due to query reading from MySQL tables. We need a way to allow Verifier to mark them as non-deterministic if rerunning the control query does not identify the query as non-deterministic.\n== RELEASE NOTES ==\n\nVerifier Changes\n* Add support for specifying non-deterministic catalogs by configuration property ``determinism.non-determinism-catalogs``.\nQueries explicitly referencing tables from those catalogs are treated as non-deterministic.", "createdAt": "2020-02-24T10:54:22Z", "url": "https://github.com/prestodb/presto/pull/14150", "merged": true, "mergeCommit": {"oid": "5455da8fdbeaf85430cb7a87430f76872550de40"}, "closed": true, "closedAt": "2020-02-25T05:36:36Z", "author": {"login": "caithagoras"}, "timelineItems": {"totalCount": 16, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcHblIogBqjMwNjQ5NDkzNzc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcHpDj8gBqjMwNjc3NzA2NTQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "66e92d7593c95c110e2a2aea44bfbf44942962f8", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/66e92d7593c95c110e2a2aea44bfbf44942962f8", "committedDate": "2020-02-24T10:41:58Z", "message": "Treat queriers referencing certain catalogs as non-deterministic"}, "afterCommit": {"oid": "8517e4542f45c0295a48bddde412f51d0895ebf3", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/8517e4542f45c0295a48bddde412f51d0895ebf3", "committedDate": "2020-02-24T11:11:22Z", "message": "Treat queriers referencing certain catalogs as non-deterministic"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8517e4542f45c0295a48bddde412f51d0895ebf3", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/8517e4542f45c0295a48bddde412f51d0895ebf3", "committedDate": "2020-02-24T11:11:22Z", "message": "Treat queriers referencing certain catalogs as non-deterministic"}, "afterCommit": {"oid": "dd90ee3f99fefa211444d21540b9da48b2c4d248", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/dd90ee3f99fefa211444d21540b9da48b2c4d248", "committedDate": "2020-02-24T11:38:02Z", "message": "Treat queriers referencing certain catalogs as non-deterministic"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "dd90ee3f99fefa211444d21540b9da48b2c4d248", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/dd90ee3f99fefa211444d21540b9da48b2c4d248", "committedDate": "2020-02-24T11:38:02Z", "message": "Treat queriers referencing certain catalogs as non-deterministic"}, "afterCommit": {"oid": "c465697782ae35f58061aa044370d48334a7bb18", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/c465697782ae35f58061aa044370d48334a7bb18", "committedDate": "2020-02-24T11:38:14Z", "message": "Treat queriers referencing certain catalogs as non-deterministic"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYzNDg3NTc5", "url": "https://github.com/prestodb/presto/pull/14150#pullrequestreview-363487579", "createdAt": "2020-02-24T15:44:07Z", "commit": {"oid": "c465697782ae35f58061aa044370d48334a7bb18"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNFQxNTo0NDowOFrOFtlYqw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNFQxNTo0NDowOFrOFtlYqw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzM0Mjc2Mw==", "bodyText": "perhaps, remove @VisibleForTesting; this method is a public method now", "url": "https://github.com/prestodb/presto/pull/14150#discussion_r383342763", "createdAt": "2020-02-24T15:44:08Z", "author": {"login": "mbasmanova"}, "path": "presto-verifier/src/main/java/com/facebook/presto/verifier/checksum/ChecksumResult.java", "diffHunk": "@@ -34,7 +34,7 @@\n     private final Map<String, Object> checksums;\n \n     @VisibleForTesting", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c465697782ae35f58061aa044370d48334a7bb18"}, "originalPosition": 3}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6de056cb9b68a3866fbd0121c9b46c11f86ca8ed", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/6de056cb9b68a3866fbd0121c9b46c11f86ca8ed", "committedDate": "2020-02-25T00:12:04Z", "message": "Extract determinism analyzer to a separate class"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c465697782ae35f58061aa044370d48334a7bb18", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/c465697782ae35f58061aa044370d48334a7bb18", "committedDate": "2020-02-24T11:38:14Z", "message": "Treat queriers referencing certain catalogs as non-deterministic"}, "afterCommit": {"oid": "9bbb35e7753512b8fbf86357d574a7c864d7f932", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/9bbb35e7753512b8fbf86357d574a7c864d7f932", "committedDate": "2020-02-25T00:12:04Z", "message": "Treat queriers referencing certain catalogs as non-deterministic"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9bbb35e7753512b8fbf86357d574a7c864d7f932", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/9bbb35e7753512b8fbf86357d574a7c864d7f932", "committedDate": "2020-02-25T00:12:04Z", "message": "Treat queriers referencing certain catalogs as non-deterministic"}, "afterCommit": {"oid": "b68ec81af68e5acd622d370e41d09baaaea1b7e3", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/b68ec81af68e5acd622d370e41d09baaaea1b7e3", "committedDate": "2020-02-25T00:17:24Z", "message": "Treat queriers referencing certain catalogs as non-deterministic"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b68ec81af68e5acd622d370e41d09baaaea1b7e3", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/b68ec81af68e5acd622d370e41d09baaaea1b7e3", "committedDate": "2020-02-25T00:17:24Z", "message": "Treat queriers referencing certain catalogs as non-deterministic"}, "afterCommit": {"oid": "680fc8d44e5263a4f55eca5488b46b2e347d1cfb", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/680fc8d44e5263a4f55eca5488b46b2e347d1cfb", "committedDate": "2020-02-25T00:17:45Z", "message": "Treat queriers referencing certain catalogs as non-deterministic"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "680fc8d44e5263a4f55eca5488b46b2e347d1cfb", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/680fc8d44e5263a4f55eca5488b46b2e347d1cfb", "committedDate": "2020-02-25T00:17:45Z", "message": "Treat queriers referencing certain catalogs as non-deterministic"}, "afterCommit": {"oid": "aa739479137592fa92a2d868e76aca56f3b0e541", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/aa739479137592fa92a2d868e76aca56f3b0e541", "committedDate": "2020-02-25T00:18:17Z", "message": "Treat queriers referencing certain catalogs as non-deterministic"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "aa739479137592fa92a2d868e76aca56f3b0e541", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/aa739479137592fa92a2d868e76aca56f3b0e541", "committedDate": "2020-02-25T00:18:17Z", "message": "Treat queriers referencing certain catalogs as non-deterministic"}, "afterCommit": {"oid": "4100c145324bfde0c88c12fdccfd5eb07347e52e", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/4100c145324bfde0c88c12fdccfd5eb07347e52e", "committedDate": "2020-02-25T00:21:38Z", "message": "Treat queriers referencing certain catalogs as non-deterministic"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4100c145324bfde0c88c12fdccfd5eb07347e52e", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/4100c145324bfde0c88c12fdccfd5eb07347e52e", "committedDate": "2020-02-25T00:21:38Z", "message": "Treat queriers referencing certain catalogs as non-deterministic"}, "afterCommit": {"oid": "553d6ab3d97c9db6bf2035a8f85c48c39fdad90d", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/553d6ab3d97c9db6bf2035a8f85c48c39fdad90d", "committedDate": "2020-02-25T00:24:17Z", "message": "Treat queriers referencing certain catalogs as non-deterministic"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "553d6ab3d97c9db6bf2035a8f85c48c39fdad90d", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/553d6ab3d97c9db6bf2035a8f85c48c39fdad90d", "committedDate": "2020-02-25T00:24:17Z", "message": "Treat queriers referencing certain catalogs as non-deterministic"}, "afterCommit": {"oid": "074fb8bb55b2b004082179eef43e468695fcf7d2", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/074fb8bb55b2b004082179eef43e468695fcf7d2", "committedDate": "2020-02-25T00:47:30Z", "message": "Treat queriers referencing certain catalogs as non-deterministic"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "074fb8bb55b2b004082179eef43e468695fcf7d2", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/074fb8bb55b2b004082179eef43e468695fcf7d2", "committedDate": "2020-02-25T00:47:30Z", "message": "Treat queriers referencing certain catalogs as non-deterministic"}, "afterCommit": {"oid": "43656c7b511a3f8a3ca0ff7ad16717442122875d", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/43656c7b511a3f8a3ca0ff7ad16717442122875d", "committedDate": "2020-02-25T00:49:50Z", "message": "Treat queriers referencing certain catalogs as non-deterministic"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYzODA4MDI4", "url": "https://github.com/prestodb/presto/pull/14150#pullrequestreview-363808028", "createdAt": "2020-02-25T01:02:03Z", "commit": {"oid": "43656c7b511a3f8a3ca0ff7ad16717442122875d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5b25dabe82bed2c8c6a2d5d74e70beea68c166b4", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/5b25dabe82bed2c8c6a2d5d74e70beea68c166b4", "committedDate": "2020-02-25T02:53:21Z", "message": "Treat queriers referencing certain catalogs as non-deterministic"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "43656c7b511a3f8a3ca0ff7ad16717442122875d", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/43656c7b511a3f8a3ca0ff7ad16717442122875d", "committedDate": "2020-02-25T00:49:50Z", "message": "Treat queriers referencing certain catalogs as non-deterministic"}, "afterCommit": {"oid": "5b25dabe82bed2c8c6a2d5d74e70beea68c166b4", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/5b25dabe82bed2c8c6a2d5d74e70beea68c166b4", "committedDate": "2020-02-25T02:53:21Z", "message": "Treat queriers referencing certain catalogs as non-deterministic"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2323, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}