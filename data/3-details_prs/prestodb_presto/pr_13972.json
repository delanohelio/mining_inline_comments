{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYzNDI0MTY2", "number": 13972, "title": "Support MySQL-based FunctionNamespaceManager", "bodyText": "== RELEASE NOTES ==\n\nGeneral Changes\n* Add a MySQL-based function namespace manager implementation that supports creating, altering, and dropping SQL functions. (:doc:`/admin/function-namespace-managers`)", "createdAt": "2020-01-16T02:22:06Z", "url": "https://github.com/prestodb/presto/pull/13972", "merged": true, "mergeCommit": {"oid": "44c044ad827365369f9f255cbb272b3f07c4b30c"}, "closed": true, "closedAt": "2020-02-08T03:47:47Z", "author": {"login": "caithagoras"}, "timelineItems": {"totalCount": 121, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcCGcuOABqjMwMTkyMDY1ODE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcCICb_AFqTM1NTQ5NzI2Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5d5b438435504607bf7508008033395d39585f93", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/5d5b438435504607bf7508008033395d39585f93", "committedDate": "2020-02-07T21:42:59Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}, "afterCommit": {"oid": "b5816c32bf11edcdb9cfb635e1b129e4377ba8ef", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/b5816c32bf11edcdb9cfb635e1b129e4377ba8ef", "committedDate": "2020-02-07T21:44:33Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b5816c32bf11edcdb9cfb635e1b129e4377ba8ef", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/b5816c32bf11edcdb9cfb635e1b129e4377ba8ef", "committedDate": "2020-02-07T21:44:33Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}, "afterCommit": {"oid": "1ff467cb52349f268d8cd1b96689a7af0b9c04b7", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/1ff467cb52349f268d8cd1b96689a7af0b9c04b7", "committedDate": "2020-02-07T21:46:24Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1ff467cb52349f268d8cd1b96689a7af0b9c04b7", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/1ff467cb52349f268d8cd1b96689a7af0b9c04b7", "committedDate": "2020-02-07T21:46:24Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}, "afterCommit": {"oid": "b04c08087a13edab9c2960bab6d06d9ce8ac715d", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/b04c08087a13edab9c2960bab6d06d9ce8ac715d", "committedDate": "2020-02-07T22:10:42Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b04c08087a13edab9c2960bab6d06d9ce8ac715d", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/b04c08087a13edab9c2960bab6d06d9ce8ac715d", "committedDate": "2020-02-07T22:10:42Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}, "afterCommit": {"oid": "57699a72d106ff8626a4e15e523a424d9ed6ab09", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/57699a72d106ff8626a4e15e523a424d9ed6ab09", "committedDate": "2020-02-07T22:12:42Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "57699a72d106ff8626a4e15e523a424d9ed6ab09", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/57699a72d106ff8626a4e15e523a424d9ed6ab09", "committedDate": "2020-02-07T22:12:42Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}, "afterCommit": {"oid": "fba757237829e3eda34fddd348a30143a23d94a1", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/fba757237829e3eda34fddd348a30143a23d94a1", "committedDate": "2020-02-07T22:14:36Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fba757237829e3eda34fddd348a30143a23d94a1", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/fba757237829e3eda34fddd348a30143a23d94a1", "committedDate": "2020-02-07T22:14:36Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}, "afterCommit": {"oid": "5e340413917e00b4ab1466880c31f9fb892603dc", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/5e340413917e00b4ab1466880c31f9fb892603dc", "committedDate": "2020-02-07T22:21:28Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU1NDY1Mjk2", "url": "https://github.com/prestodb/presto/pull/13972#pullrequestreview-355465296", "createdAt": "2020-02-07T22:06:16Z", "commit": {"oid": "1ff467cb52349f268d8cd1b96689a7af0b9c04b7"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wN1QyMjowNjoxNlrOFnLp6A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wN1QyMjoyMjo0OFrOFnMA7Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjYyOTczNg==", "bodyText": "\"executing functions\" is not new and it's not something \"allowed\" by function namespace managers.", "url": "https://github.com/prestodb/presto/pull/13972#discussion_r376629736", "createdAt": "2020-02-07T22:06:16Z", "author": {"login": "rongrong"}, "path": "presto-docs/src/main/sphinx/admin/function-namespace-managers.rst", "diffHunk": "@@ -0,0 +1,88 @@\n+===========================\n+Function Namespace Managers\n+===========================\n+\n+.. warning::\n+\n+    This is an experimental feature being actively developed. The way\n+    Function Namespace Managers are configured might be changed.\n+\n+Function namespace managers support storing and retrieving SQL\n+functions, allowing Presto engine to perform actions such as creating,\n+altering, deleting, and executing functions.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ff467cb52349f268d8cd1b96689a7af0b9c04b7"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjYzMDQzNA==", "bodyText": "Introduce the concept of \"qualified function name first\". A qualified function name is a .... Each Presto function, whether ......", "url": "https://github.com/prestodb/presto/pull/13972#discussion_r376630434", "createdAt": "2020-02-07T22:08:22Z", "author": {"login": "rongrong"}, "path": "presto-docs/src/main/sphinx/admin/function-namespace-managers.rst", "diffHunk": "@@ -0,0 +1,88 @@\n+===========================\n+Function Namespace Managers\n+===========================\n+\n+.. warning::\n+\n+    This is an experimental feature being actively developed. The way\n+    Function Namespace Managers are configured might be changed.\n+\n+Function namespace managers support storing and retrieving SQL\n+functions, allowing Presto engine to perform actions such as creating,\n+altering, deleting, and executing functions.\n+\n+A function namespace is in the format of ``catalog.schema`` (e.g.\n+``example.test``). It can be thought of as a schema for storing\n+functions. However, it is not a full fledged schema as it does not\n+support storing tables and views, but only functions.\n+\n+Each Presto function, whether built-in or user-defined, resides in", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ff467cb52349f268d8cd1b96689a7af0b9c04b7"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjYzNTYyOQ==", "bodyText": "Should we Italy the concepts like function namespace manager, function namespace, qualified function name? What's the convention?", "url": "https://github.com/prestodb/presto/pull/13972#discussion_r376635629", "createdAt": "2020-02-07T22:22:48Z", "author": {"login": "rongrong"}, "path": "presto-docs/src/main/sphinx/admin/function-namespace-managers.rst", "diffHunk": "@@ -0,0 +1,88 @@\n+===========================\n+Function Namespace Managers\n+===========================\n+\n+.. warning::\n+\n+    This is an experimental feature being actively developed. The way\n+    Function Namespace Managers are configured might be changed.\n+\n+Function namespace managers support storing and retrieving SQL\n+functions, allowing Presto engine to perform actions such as creating,\n+altering, deleting, and executing functions.\n+\n+A function namespace is in the format of ``catalog.schema`` (e.g.\n+``example.test``). It can be thought of as a schema for storing\n+functions. However, it is not a full fledged schema as it does not\n+support storing tables and views, but only functions.\n+\n+Each Presto function, whether built-in or user-defined, resides in", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjYzMDQzNA=="}, "originalCommit": {"oid": "1ff467cb52349f268d8cd1b96689a7af0b9c04b7"}, "originalPosition": 19}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5e340413917e00b4ab1466880c31f9fb892603dc", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/5e340413917e00b4ab1466880c31f9fb892603dc", "committedDate": "2020-02-07T22:21:28Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}, "afterCommit": {"oid": "9cd0ae85418d6bdf78016b96a55083bf1de2ad10", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/9cd0ae85418d6bdf78016b96a55083bf1de2ad10", "committedDate": "2020-02-07T22:49:42Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9cd0ae85418d6bdf78016b96a55083bf1de2ad10", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/9cd0ae85418d6bdf78016b96a55083bf1de2ad10", "committedDate": "2020-02-07T22:49:42Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}, "afterCommit": {"oid": "975a5c92408102b9f397af790cabb9d5448e052b", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/975a5c92408102b9f397af790cabb9d5448e052b", "committedDate": "2020-02-07T22:55:56Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "975a5c92408102b9f397af790cabb9d5448e052b", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/975a5c92408102b9f397af790cabb9d5448e052b", "committedDate": "2020-02-07T22:55:56Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}, "afterCommit": {"oid": "177bd36f94822b6267307a9b29f1654048c610a2", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/177bd36f94822b6267307a9b29f1654048c610a2", "committedDate": "2020-02-07T22:59:02Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU1NDg1OTcx", "url": "https://github.com/prestodb/presto/pull/13972#pullrequestreview-355485971", "createdAt": "2020-02-07T22:58:48Z", "commit": {"oid": "975a5c92408102b9f397af790cabb9d5448e052b"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wN1QyMjo1ODo0OFrOFnMruw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wN1QyMzoxNjoyM1rOFnM_ZQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjY0NjU4Nw==", "bodyText": "the Presto engine", "url": "https://github.com/prestodb/presto/pull/13972#discussion_r376646587", "createdAt": "2020-02-07T22:58:48Z", "author": {"login": "sachdevs"}, "path": "presto-docs/src/main/sphinx/admin/function-namespace-managers.rst", "diffHunk": "@@ -0,0 +1,92 @@\n+===========================\n+Function Namespace Managers\n+===========================\n+\n+.. warning::\n+\n+    This is an experimental feature being actively developed. The way\n+    Function Namespace Managers are configured might be changed.\n+\n+Function namespace managers support storing and retrieving SQL\n+functions, allowing Presto engine to perform actions such as creating,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "975a5c92408102b9f397af790cabb9d5448e052b"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjY0ODA5OA==", "bodyText": "of a function namespace manager", "url": "https://github.com/prestodb/presto/pull/13972#discussion_r376648098", "createdAt": "2020-02-07T23:03:40Z", "author": {"login": "sachdevs"}, "path": "presto-docs/src/main/sphinx/admin/function-namespace-managers.rst", "diffHunk": "@@ -0,0 +1,93 @@\n+===========================\n+Function Namespace Managers\n+===========================\n+\n+.. warning::\n+\n+    This is an experimental feature being actively developed. The way\n+    Function Namespace Managers are configured might be changed.\n+\n+Function namespace managers support storing and retrieving SQL\n+functions, allowing Presto engine to perform actions such as creating,\n+altering, deleting, and resolving functions.\n+\n+A function namespace is in the format of ``catalog.schema`` (e.g.\n+``example.test``). It can be thought of as a schema for storing\n+functions. However, it is not a full fledged schema as it does not\n+support storing tables and views, but only functions.\n+\n+Each Presto function, whether built-in or user-defined, resides in\n+a function namespace. All built-in functions reside in the\n+``presto.default`` function namespace. The qualified function name of\n+a function is the function namespace in which it reside followed by\n+its function name (e.g. ``example.test.func``). Built-in functions can\n+be referenced in queries with their function namespaces omitted, while\n+user-defined functions needs to be referenced by its qualified function\n+name. A function is uniquely identified by its qualified function name\n+and parameter type list.\n+\n+Each instance of function namespace manager binds to a catalog name", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "177bd36f94822b6267307a9b29f1654048c610a2"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjY0OTYwNQ==", "bodyText": "I originally did not understand what MySQL-based implementation meant at first (until I read the release note). Maybe reword this to Presto currently stores all function namespace manager related information in MySQL.", "url": "https://github.com/prestodb/presto/pull/13972#discussion_r376649605", "createdAt": "2020-02-07T23:08:37Z", "author": {"login": "sachdevs"}, "path": "presto-docs/src/main/sphinx/admin/function-namespace-managers.rst", "diffHunk": "@@ -0,0 +1,93 @@\n+===========================\n+Function Namespace Managers\n+===========================\n+\n+.. warning::\n+\n+    This is an experimental feature being actively developed. The way\n+    Function Namespace Managers are configured might be changed.\n+\n+Function namespace managers support storing and retrieving SQL\n+functions, allowing Presto engine to perform actions such as creating,\n+altering, deleting, and resolving functions.\n+\n+A function namespace is in the format of ``catalog.schema`` (e.g.\n+``example.test``). It can be thought of as a schema for storing\n+functions. However, it is not a full fledged schema as it does not\n+support storing tables and views, but only functions.\n+\n+Each Presto function, whether built-in or user-defined, resides in\n+a function namespace. All built-in functions reside in the\n+``presto.default`` function namespace. The qualified function name of\n+a function is the function namespace in which it reside followed by\n+its function name (e.g. ``example.test.func``). Built-in functions can\n+be referenced in queries with their function namespaces omitted, while\n+user-defined functions needs to be referenced by its qualified function\n+name. A function is uniquely identified by its qualified function name\n+and parameter type list.\n+\n+Each instance of function namespace manager binds to a catalog name\n+and manages all functions within that catalog. Using the catalog\n+name of an existing connector is discouraged, as the behavior is not\n+defined nor tested, and will be disallowed in the future.\n+\n+Currently, those catalog names do not correspond to real catalogs.\n+They cannot be specified as the catalog in a session, nor do they\n+support :doc:`/sql/create-schema`, :doc:`/sql/alter-schema`,\n+:doc:`/sql/drop-schema`, or :doc:`/sql/show-schemas`. Instead,\n+namespaces can be added using the methods described below.\n+\n+\n+Configuration\n+-------------\n+\n+Presto provides a MySQL-based function namespace manager", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "177bd36f94822b6267307a9b29f1654048c610a2"}, "originalPosition": 44}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjY1MTYyMQ==", "bodyText": "In order to create a function, the corresponding function namespace (in the format catalog.schema) must first be managed by a function namespace manager", "url": "https://github.com/prestodb/presto/pull/13972#discussion_r376651621", "createdAt": "2020-02-07T23:16:23Z", "author": {"login": "sachdevs"}, "path": "presto-docs/src/main/sphinx/sql/create-function.rst", "diffHunk": "@@ -0,0 +1,84 @@\n+===============\n+CREATE FUNCTION\n+===============\n+\n+Synopsis\n+--------\n+\n+.. code-block:: none\n+\n+    CREATE [ OR REPLACE ] FUNCTION\n+    qualified_function_name (\n+      parameter_name parameter_type\n+      [, ...]\n+    )\n+    RETURNS return_type\n+    [ COMMENT function_description ]\n+    [ LANGUAGE SQL ]\n+    [ DETERMINISTIC | NOT DETERMINISTIC ]\n+    [ RETURNS NULL ON NULL INPUT | CALLED ON NULL INPUT ]\n+    [ RETURN expression ]\n+\n+\n+Description\n+-----------\n+\n+Create a new function with the specified definition.\n+\n+Each function is uniquely identified by its qualified function name\n+and its parameter type list. ``qualified_function_name`` needs to be in\n+the format of ``catalog.schema.function_name``.\n+\n+To create a function, the function namespace as identified by", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "177bd36f94822b6267307a9b29f1654048c610a2"}, "originalPosition": 32}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ad0617d22309e22bc0fb380afecfc058ee04a685", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/ad0617d22309e22bc0fb380afecfc058ee04a685", "committedDate": "2020-02-07T23:21:50Z", "message": "Introduce db based function namespace manager"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "50c436401608d35c356823065a6204e685132a1c", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/50c436401608d35c356823065a6204e685132a1c", "committedDate": "2020-02-07T23:21:50Z", "message": "Introduce MySql-based function namespace manager\n\nAlso, include function namespace managers plugin in Presto server"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "177bd36f94822b6267307a9b29f1654048c610a2", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/177bd36f94822b6267307a9b29f1654048c610a2", "committedDate": "2020-02-07T22:59:02Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}, "afterCommit": {"oid": "6e826fe703f4a777ed40a770499f0292da22824f", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/6e826fe703f4a777ed40a770499f0292da22824f", "committedDate": "2020-02-07T23:21:50Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6e826fe703f4a777ed40a770499f0292da22824f", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/6e826fe703f4a777ed40a770499f0292da22824f", "committedDate": "2020-02-07T23:21:50Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}, "afterCommit": {"oid": "b67b2f35a853f43e86cb003fc138b5c640f2a624", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/b67b2f35a853f43e86cb003fc138b5c640f2a624", "committedDate": "2020-02-07T23:22:10Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b67b2f35a853f43e86cb003fc138b5c640f2a624", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/b67b2f35a853f43e86cb003fc138b5c640f2a624", "committedDate": "2020-02-07T23:22:10Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}, "afterCommit": {"oid": "cdbe60c7a243605187bef968e053ad886dc3cb36", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/cdbe60c7a243605187bef968e053ad886dc3cb36", "committedDate": "2020-02-07T23:26:46Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cdbe60c7a243605187bef968e053ad886dc3cb36", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/cdbe60c7a243605187bef968e053ad886dc3cb36", "committedDate": "2020-02-07T23:26:46Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}, "afterCommit": {"oid": "e754e1f77d6b5419ff7274327ce6bd882a66d7fc", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/e754e1f77d6b5419ff7274327ce6bd882a66d7fc", "committedDate": "2020-02-07T23:28:04Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e754e1f77d6b5419ff7274327ce6bd882a66d7fc", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/e754e1f77d6b5419ff7274327ce6bd882a66d7fc", "committedDate": "2020-02-07T23:28:04Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}, "afterCommit": {"oid": "48e5619c84be7dd2a19c7fc1a9cbe8e66922c8fc", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/48e5619c84be7dd2a19c7fc1a9cbe8e66922c8fc", "committedDate": "2020-02-07T23:30:43Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "27de3877889ae6fbc412504791cd2ce2257077ce", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/27de3877889ae6fbc412504791cd2ce2257077ce", "committedDate": "2020-02-07T23:33:33Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "48e5619c84be7dd2a19c7fc1a9cbe8e66922c8fc", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/48e5619c84be7dd2a19c7fc1a9cbe8e66922c8fc", "committedDate": "2020-02-07T23:30:43Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}, "afterCommit": {"oid": "27de3877889ae6fbc412504791cd2ce2257077ce", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/27de3877889ae6fbc412504791cd2ce2257077ce", "committedDate": "2020-02-07T23:33:33Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU1NDk3MjYy", "url": "https://github.com/prestodb/presto/pull/13972#pullrequestreview-355497262", "createdAt": "2020-02-07T23:35:50Z", "commit": {"oid": "27de3877889ae6fbc412504791cd2ce2257077ce"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d85b689683bb9a3b73b37b1ecf5f63724f2159db", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/d85b689683bb9a3b73b37b1ecf5f63724f2159db", "committedDate": "2020-01-16T02:17:52Z", "message": "Include function namespace managers plugin in Presto server"}, "afterCommit": {"oid": "b2a17fdf038a5875204c3e4a0ccdd4cb927b6181", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/b2a17fdf038a5875204c3e4a0ccdd4cb927b6181", "committedDate": "2020-01-16T02:38:08Z", "message": "Include function namespace managers plugin in Presto server"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b2a17fdf038a5875204c3e4a0ccdd4cb927b6181", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/b2a17fdf038a5875204c3e4a0ccdd4cb927b6181", "committedDate": "2020-01-16T02:38:08Z", "message": "Include function namespace managers plugin in Presto server"}, "afterCommit": {"oid": "087c963aa85be2c6c79acb7e7cf1d11d01e4ef34", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/087c963aa85be2c6c79acb7e7cf1d11d01e4ef34", "committedDate": "2020-01-16T02:39:34Z", "message": "Include function namespace managers plugin in Presto server"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "087c963aa85be2c6c79acb7e7cf1d11d01e4ef34", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/087c963aa85be2c6c79acb7e7cf1d11d01e4ef34", "committedDate": "2020-01-16T02:39:34Z", "message": "Include function namespace managers plugin in Presto server"}, "afterCommit": {"oid": "cb46ab3e25c9bab169009daac6e672fd89a725a9", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/cb46ab3e25c9bab169009daac6e672fd89a725a9", "committedDate": "2020-01-16T03:14:32Z", "message": "Include function namespace managers plugin in Presto server"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cb46ab3e25c9bab169009daac6e672fd89a725a9", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/cb46ab3e25c9bab169009daac6e672fd89a725a9", "committedDate": "2020-01-16T03:14:32Z", "message": "Include function namespace managers plugin in Presto server"}, "afterCommit": {"oid": "b6d4803bcdead0072ad13150a5e8ab588ca5d3b6", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/b6d4803bcdead0072ad13150a5e8ab588ca5d3b6", "committedDate": "2020-01-16T03:15:33Z", "message": "Include function namespace managers plugin in Presto server"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b6d4803bcdead0072ad13150a5e8ab588ca5d3b6", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/b6d4803bcdead0072ad13150a5e8ab588ca5d3b6", "committedDate": "2020-01-16T03:15:33Z", "message": "Include function namespace managers plugin in Presto server"}, "afterCommit": {"oid": "7cc9ff8a8fb616e22ace6022a1ca059460f1141e", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/7cc9ff8a8fb616e22ace6022a1ca059460f1141e", "committedDate": "2020-01-16T19:23:03Z", "message": "Include function namespace managers plugin in Presto server"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7cc9ff8a8fb616e22ace6022a1ca059460f1141e", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/7cc9ff8a8fb616e22ace6022a1ca059460f1141e", "committedDate": "2020-01-16T19:23:03Z", "message": "Include function namespace managers plugin in Presto server"}, "afterCommit": {"oid": "6b887ea0c850c2bff1214940f72938b1a7ada488", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/6b887ea0c850c2bff1214940f72938b1a7ada488", "committedDate": "2020-01-16T19:23:27Z", "message": "Include function namespace managers plugin in Presto server"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6b887ea0c850c2bff1214940f72938b1a7ada488", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/6b887ea0c850c2bff1214940f72938b1a7ada488", "committedDate": "2020-01-16T19:23:27Z", "message": "Include function namespace managers plugin in Presto server"}, "afterCommit": {"oid": "2557eae489d8f4d989e6fc465e3a10308b1796c5", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/2557eae489d8f4d989e6fc465e3a10308b1796c5", "committedDate": "2020-01-21T22:45:57Z", "message": "Include function namespace managers plugin in Presto server"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ2ODAyMDc2", "url": "https://github.com/prestodb/presto/pull/13972#pullrequestreview-346802076", "createdAt": "2020-01-22T18:21:28Z", "commit": {"oid": "810b00af4b1ac1155ec14ece1b64a7b5a9c2b9c4"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMlQxODoyMToyOVrOFgmN2g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMlQxODo0MzowN1rOFgm4Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTcyNDg5MA==", "bodyText": "Maybe name it <function_namespaces_table_name> to make the query clearer to read.", "url": "https://github.com/prestodb/presto/pull/13972#discussion_r369724890", "createdAt": "2020-01-22T18:21:29Z", "author": {"login": "rongrong"}, "path": "presto-function-namespace-managers/src/main/java/com/facebook/presto/functionNamespace/db/FunctionNamespaceDao.java", "diffHunk": "@@ -0,0 +1,240 @@\n+/*\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.facebook.presto.functionNamespace.db;\n+\n+import com.facebook.presto.spi.function.RoutineCharacteristics.Language;\n+import com.facebook.presto.spi.function.SqlFunctionId;\n+import com.facebook.presto.spi.function.SqlInvokedFunction;\n+import com.facebook.presto.spi.function.SqlParameter;\n+import com.facebook.presto.spi.type.TypeSignature;\n+import org.jdbi.v3.sqlobject.config.RegisterArgumentFactories;\n+import org.jdbi.v3.sqlobject.config.RegisterArgumentFactory;\n+import org.jdbi.v3.sqlobject.config.RegisterRowMapper;\n+import org.jdbi.v3.sqlobject.config.RegisterRowMappers;\n+import org.jdbi.v3.sqlobject.customizer.Bind;\n+import org.jdbi.v3.sqlobject.customizer.Define;\n+import org.jdbi.v3.sqlobject.statement.SqlQuery;\n+import org.jdbi.v3.sqlobject.statement.SqlUpdate;\n+\n+import java.util.List;\n+import java.util.Optional;\n+\n+@RegisterRowMappers({\n+        @RegisterRowMapper(SqlInvokedFunctionRowMapper.class),\n+        @RegisterRowMapper(SqlInvokedFunctionRecordRowMapper.class)\n+})\n+@RegisterArgumentFactories({\n+        @RegisterArgumentFactory(SqlFunctionIdArgumentFactory.class),\n+        @RegisterArgumentFactory(SqlParametersArgumentFactory.class),\n+        @RegisterArgumentFactory(TypeSignatureArgumentFactory.class),\n+})\n+public interface FunctionNamespaceDao\n+{\n+    @SqlUpdate(\"CREATE TABLE IF NOT EXISTS <table_name> (\\n\" +", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "810b00af4b1ac1155ec14ece1b64a7b5a9c2b9c4"}, "originalPosition": 44}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTcyNTEzOQ==", "bodyText": "Maybe name this <sql_invoked_functions_table_name>.", "url": "https://github.com/prestodb/presto/pull/13972#discussion_r369725139", "createdAt": "2020-01-22T18:22:01Z", "author": {"login": "rongrong"}, "path": "presto-function-namespace-managers/src/main/java/com/facebook/presto/functionNamespace/db/FunctionNamespaceDao.java", "diffHunk": "@@ -0,0 +1,240 @@\n+/*\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.facebook.presto.functionNamespace.db;\n+\n+import com.facebook.presto.spi.function.RoutineCharacteristics.Language;\n+import com.facebook.presto.spi.function.SqlFunctionId;\n+import com.facebook.presto.spi.function.SqlInvokedFunction;\n+import com.facebook.presto.spi.function.SqlParameter;\n+import com.facebook.presto.spi.type.TypeSignature;\n+import org.jdbi.v3.sqlobject.config.RegisterArgumentFactories;\n+import org.jdbi.v3.sqlobject.config.RegisterArgumentFactory;\n+import org.jdbi.v3.sqlobject.config.RegisterRowMapper;\n+import org.jdbi.v3.sqlobject.config.RegisterRowMappers;\n+import org.jdbi.v3.sqlobject.customizer.Bind;\n+import org.jdbi.v3.sqlobject.customizer.Define;\n+import org.jdbi.v3.sqlobject.statement.SqlQuery;\n+import org.jdbi.v3.sqlobject.statement.SqlUpdate;\n+\n+import java.util.List;\n+import java.util.Optional;\n+\n+@RegisterRowMappers({\n+        @RegisterRowMapper(SqlInvokedFunctionRowMapper.class),\n+        @RegisterRowMapper(SqlInvokedFunctionRecordRowMapper.class)\n+})\n+@RegisterArgumentFactories({\n+        @RegisterArgumentFactory(SqlFunctionIdArgumentFactory.class),\n+        @RegisterArgumentFactory(SqlParametersArgumentFactory.class),\n+        @RegisterArgumentFactory(TypeSignatureArgumentFactory.class),\n+})\n+public interface FunctionNamespaceDao\n+{\n+    @SqlUpdate(\"CREATE TABLE IF NOT EXISTS <table_name> (\\n\" +\n+            \"   catalog_name varchar(128) NOT NULL,\\n\" +\n+            \"   schema_name varchar(128) NOT NULL,\\n\" +\n+            \" PRIMARY KEY (catalog_name, schema_name)\\n\" +\n+            \")\")\n+    void createFunctionNamespacesTableIfNotExists(@Define(\"table_name\") String tableName);\n+\n+    @SqlUpdate(\"CREATE TABLE IF NOT EXISTS <table_name> (\\n\" +", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "810b00af4b1ac1155ec14ece1b64a7b5a9c2b9c4"}, "originalPosition": 51}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTcyNTk5NQ==", "bodyText": "Does this still need to be text? Due to function_id this has an upper bound in length as well right?", "url": "https://github.com/prestodb/presto/pull/13972#discussion_r369725995", "createdAt": "2020-01-22T18:23:51Z", "author": {"login": "rongrong"}, "path": "presto-function-namespace-managers/src/main/java/com/facebook/presto/functionNamespace/db/FunctionNamespaceDao.java", "diffHunk": "@@ -0,0 +1,240 @@\n+/*\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.facebook.presto.functionNamespace.db;\n+\n+import com.facebook.presto.spi.function.RoutineCharacteristics.Language;\n+import com.facebook.presto.spi.function.SqlFunctionId;\n+import com.facebook.presto.spi.function.SqlInvokedFunction;\n+import com.facebook.presto.spi.function.SqlParameter;\n+import com.facebook.presto.spi.type.TypeSignature;\n+import org.jdbi.v3.sqlobject.config.RegisterArgumentFactories;\n+import org.jdbi.v3.sqlobject.config.RegisterArgumentFactory;\n+import org.jdbi.v3.sqlobject.config.RegisterRowMapper;\n+import org.jdbi.v3.sqlobject.config.RegisterRowMappers;\n+import org.jdbi.v3.sqlobject.customizer.Bind;\n+import org.jdbi.v3.sqlobject.customizer.Define;\n+import org.jdbi.v3.sqlobject.statement.SqlQuery;\n+import org.jdbi.v3.sqlobject.statement.SqlUpdate;\n+\n+import java.util.List;\n+import java.util.Optional;\n+\n+@RegisterRowMappers({\n+        @RegisterRowMapper(SqlInvokedFunctionRowMapper.class),\n+        @RegisterRowMapper(SqlInvokedFunctionRecordRowMapper.class)\n+})\n+@RegisterArgumentFactories({\n+        @RegisterArgumentFactory(SqlFunctionIdArgumentFactory.class),\n+        @RegisterArgumentFactory(SqlParametersArgumentFactory.class),\n+        @RegisterArgumentFactory(TypeSignatureArgumentFactory.class),\n+})\n+public interface FunctionNamespaceDao\n+{\n+    @SqlUpdate(\"CREATE TABLE IF NOT EXISTS <table_name> (\\n\" +\n+            \"   catalog_name varchar(128) NOT NULL,\\n\" +\n+            \"   schema_name varchar(128) NOT NULL,\\n\" +\n+            \" PRIMARY KEY (catalog_name, schema_name)\\n\" +\n+            \")\")\n+    void createFunctionNamespacesTableIfNotExists(@Define(\"table_name\") String tableName);\n+\n+    @SqlUpdate(\"CREATE TABLE IF NOT EXISTS <table_name> (\\n\" +\n+            \"  id bigint(20) NOT NULL AUTO_INCREMENT,\\n\" +\n+            \"  function_id varchar(700) NOT NULL,\\n\" +\n+            \"  version bigint(20) unsigned NOT NULL,\\n\" +\n+            \"  catalog_name varchar(128) NOT NULL,\\n\" +\n+            \"  schema_name varchar(128) NOT NULL,\\n\" +\n+            \"  function_name varchar(256) NOT NULL,\\n\" +\n+            \"  parameters text NOT NULL,\\n\" +", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "810b00af4b1ac1155ec14ece1b64a7b5a9c2b9c4"}, "originalPosition": 58}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTcyNjc2Nw==", "bodyText": "I think it's more descriptive to use boolean rather than tinyint(1). Tinyint(1) is how MySQL implements boolean but that's its implementation detail.", "url": "https://github.com/prestodb/presto/pull/13972#discussion_r369726767", "createdAt": "2020-01-22T18:25:29Z", "author": {"login": "rongrong"}, "path": "presto-function-namespace-managers/src/main/java/com/facebook/presto/functionNamespace/db/FunctionNamespaceDao.java", "diffHunk": "@@ -0,0 +1,240 @@\n+/*\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.facebook.presto.functionNamespace.db;\n+\n+import com.facebook.presto.spi.function.RoutineCharacteristics.Language;\n+import com.facebook.presto.spi.function.SqlFunctionId;\n+import com.facebook.presto.spi.function.SqlInvokedFunction;\n+import com.facebook.presto.spi.function.SqlParameter;\n+import com.facebook.presto.spi.type.TypeSignature;\n+import org.jdbi.v3.sqlobject.config.RegisterArgumentFactories;\n+import org.jdbi.v3.sqlobject.config.RegisterArgumentFactory;\n+import org.jdbi.v3.sqlobject.config.RegisterRowMapper;\n+import org.jdbi.v3.sqlobject.config.RegisterRowMappers;\n+import org.jdbi.v3.sqlobject.customizer.Bind;\n+import org.jdbi.v3.sqlobject.customizer.Define;\n+import org.jdbi.v3.sqlobject.statement.SqlQuery;\n+import org.jdbi.v3.sqlobject.statement.SqlUpdate;\n+\n+import java.util.List;\n+import java.util.Optional;\n+\n+@RegisterRowMappers({\n+        @RegisterRowMapper(SqlInvokedFunctionRowMapper.class),\n+        @RegisterRowMapper(SqlInvokedFunctionRecordRowMapper.class)\n+})\n+@RegisterArgumentFactories({\n+        @RegisterArgumentFactory(SqlFunctionIdArgumentFactory.class),\n+        @RegisterArgumentFactory(SqlParametersArgumentFactory.class),\n+        @RegisterArgumentFactory(TypeSignatureArgumentFactory.class),\n+})\n+public interface FunctionNamespaceDao\n+{\n+    @SqlUpdate(\"CREATE TABLE IF NOT EXISTS <table_name> (\\n\" +\n+            \"   catalog_name varchar(128) NOT NULL,\\n\" +\n+            \"   schema_name varchar(128) NOT NULL,\\n\" +\n+            \" PRIMARY KEY (catalog_name, schema_name)\\n\" +\n+            \")\")\n+    void createFunctionNamespacesTableIfNotExists(@Define(\"table_name\") String tableName);\n+\n+    @SqlUpdate(\"CREATE TABLE IF NOT EXISTS <table_name> (\\n\" +\n+            \"  id bigint(20) NOT NULL AUTO_INCREMENT,\\n\" +\n+            \"  function_id varchar(700) NOT NULL,\\n\" +\n+            \"  version bigint(20) unsigned NOT NULL,\\n\" +\n+            \"  catalog_name varchar(128) NOT NULL,\\n\" +\n+            \"  schema_name varchar(128) NOT NULL,\\n\" +\n+            \"  function_name varchar(256) NOT NULL,\\n\" +\n+            \"  parameters text NOT NULL,\\n\" +\n+            \"  return_type varchar(256) NOT NULL,\\n\" +\n+            \"  language varchar(64) NOT NULL,\\n\" +\n+            \"  `deterministic` tinyint(1) NOT NULL,\\n\" +", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "810b00af4b1ac1155ec14ece1b64a7b5a9c2b9c4"}, "originalPosition": 61}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTcyNzI5Ng==", "bodyText": "space between column names.", "url": "https://github.com/prestodb/presto/pull/13972#discussion_r369727296", "createdAt": "2020-01-22T18:26:30Z", "author": {"login": "rongrong"}, "path": "presto-function-namespace-managers/src/main/java/com/facebook/presto/functionNamespace/db/FunctionNamespaceDao.java", "diffHunk": "@@ -0,0 +1,240 @@\n+/*\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.facebook.presto.functionNamespace.db;\n+\n+import com.facebook.presto.spi.function.RoutineCharacteristics.Language;\n+import com.facebook.presto.spi.function.SqlFunctionId;\n+import com.facebook.presto.spi.function.SqlInvokedFunction;\n+import com.facebook.presto.spi.function.SqlParameter;\n+import com.facebook.presto.spi.type.TypeSignature;\n+import org.jdbi.v3.sqlobject.config.RegisterArgumentFactories;\n+import org.jdbi.v3.sqlobject.config.RegisterArgumentFactory;\n+import org.jdbi.v3.sqlobject.config.RegisterRowMapper;\n+import org.jdbi.v3.sqlobject.config.RegisterRowMappers;\n+import org.jdbi.v3.sqlobject.customizer.Bind;\n+import org.jdbi.v3.sqlobject.customizer.Define;\n+import org.jdbi.v3.sqlobject.statement.SqlQuery;\n+import org.jdbi.v3.sqlobject.statement.SqlUpdate;\n+\n+import java.util.List;\n+import java.util.Optional;\n+\n+@RegisterRowMappers({\n+        @RegisterRowMapper(SqlInvokedFunctionRowMapper.class),\n+        @RegisterRowMapper(SqlInvokedFunctionRecordRowMapper.class)\n+})\n+@RegisterArgumentFactories({\n+        @RegisterArgumentFactory(SqlFunctionIdArgumentFactory.class),\n+        @RegisterArgumentFactory(SqlParametersArgumentFactory.class),\n+        @RegisterArgumentFactory(TypeSignatureArgumentFactory.class),\n+})\n+public interface FunctionNamespaceDao\n+{\n+    @SqlUpdate(\"CREATE TABLE IF NOT EXISTS <table_name> (\\n\" +\n+            \"   catalog_name varchar(128) NOT NULL,\\n\" +\n+            \"   schema_name varchar(128) NOT NULL,\\n\" +\n+            \" PRIMARY KEY (catalog_name, schema_name)\\n\" +\n+            \")\")\n+    void createFunctionNamespacesTableIfNotExists(@Define(\"table_name\") String tableName);\n+\n+    @SqlUpdate(\"CREATE TABLE IF NOT EXISTS <table_name> (\\n\" +\n+            \"  id bigint(20) NOT NULL AUTO_INCREMENT,\\n\" +\n+            \"  function_id varchar(700) NOT NULL,\\n\" +\n+            \"  version bigint(20) unsigned NOT NULL,\\n\" +\n+            \"  catalog_name varchar(128) NOT NULL,\\n\" +\n+            \"  schema_name varchar(128) NOT NULL,\\n\" +\n+            \"  function_name varchar(256) NOT NULL,\\n\" +\n+            \"  parameters text NOT NULL,\\n\" +\n+            \"  return_type varchar(256) NOT NULL,\\n\" +\n+            \"  language varchar(64) NOT NULL,\\n\" +\n+            \"  `deterministic` tinyint(1) NOT NULL,\\n\" +\n+            \"  called_on_null_input tinyint(1) NOT NULL,\\n\" +\n+            \"  body mediumtext,\\n\" +\n+            \"  description text,\\n\" +\n+            \"  deleted tinyint(1) NOT NULL DEFAULT false,\\n\" +\n+            \"  delete_time TIMESTAMP NULL DEFAULT NULL,\\n\" +\n+            \"  create_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,\\n\" +\n+            \"  update_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\\n\" +\n+            \"  PRIMARY KEY (id),\\n\" +\n+            \"  UNIQUE KEY function_id_version (function_id,version),\\n\" +", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "810b00af4b1ac1155ec14ece1b64a7b5a9c2b9c4"}, "originalPosition": 70}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTcyNzM1Mw==", "bodyText": "same here.", "url": "https://github.com/prestodb/presto/pull/13972#discussion_r369727353", "createdAt": "2020-01-22T18:26:36Z", "author": {"login": "rongrong"}, "path": "presto-function-namespace-managers/src/main/java/com/facebook/presto/functionNamespace/db/FunctionNamespaceDao.java", "diffHunk": "@@ -0,0 +1,240 @@\n+/*\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.facebook.presto.functionNamespace.db;\n+\n+import com.facebook.presto.spi.function.RoutineCharacteristics.Language;\n+import com.facebook.presto.spi.function.SqlFunctionId;\n+import com.facebook.presto.spi.function.SqlInvokedFunction;\n+import com.facebook.presto.spi.function.SqlParameter;\n+import com.facebook.presto.spi.type.TypeSignature;\n+import org.jdbi.v3.sqlobject.config.RegisterArgumentFactories;\n+import org.jdbi.v3.sqlobject.config.RegisterArgumentFactory;\n+import org.jdbi.v3.sqlobject.config.RegisterRowMapper;\n+import org.jdbi.v3.sqlobject.config.RegisterRowMappers;\n+import org.jdbi.v3.sqlobject.customizer.Bind;\n+import org.jdbi.v3.sqlobject.customizer.Define;\n+import org.jdbi.v3.sqlobject.statement.SqlQuery;\n+import org.jdbi.v3.sqlobject.statement.SqlUpdate;\n+\n+import java.util.List;\n+import java.util.Optional;\n+\n+@RegisterRowMappers({\n+        @RegisterRowMapper(SqlInvokedFunctionRowMapper.class),\n+        @RegisterRowMapper(SqlInvokedFunctionRecordRowMapper.class)\n+})\n+@RegisterArgumentFactories({\n+        @RegisterArgumentFactory(SqlFunctionIdArgumentFactory.class),\n+        @RegisterArgumentFactory(SqlParametersArgumentFactory.class),\n+        @RegisterArgumentFactory(TypeSignatureArgumentFactory.class),\n+})\n+public interface FunctionNamespaceDao\n+{\n+    @SqlUpdate(\"CREATE TABLE IF NOT EXISTS <table_name> (\\n\" +\n+            \"   catalog_name varchar(128) NOT NULL,\\n\" +\n+            \"   schema_name varchar(128) NOT NULL,\\n\" +\n+            \" PRIMARY KEY (catalog_name, schema_name)\\n\" +\n+            \")\")\n+    void createFunctionNamespacesTableIfNotExists(@Define(\"table_name\") String tableName);\n+\n+    @SqlUpdate(\"CREATE TABLE IF NOT EXISTS <table_name> (\\n\" +\n+            \"  id bigint(20) NOT NULL AUTO_INCREMENT,\\n\" +\n+            \"  function_id varchar(700) NOT NULL,\\n\" +\n+            \"  version bigint(20) unsigned NOT NULL,\\n\" +\n+            \"  catalog_name varchar(128) NOT NULL,\\n\" +\n+            \"  schema_name varchar(128) NOT NULL,\\n\" +\n+            \"  function_name varchar(256) NOT NULL,\\n\" +\n+            \"  parameters text NOT NULL,\\n\" +\n+            \"  return_type varchar(256) NOT NULL,\\n\" +\n+            \"  language varchar(64) NOT NULL,\\n\" +\n+            \"  `deterministic` tinyint(1) NOT NULL,\\n\" +\n+            \"  called_on_null_input tinyint(1) NOT NULL,\\n\" +\n+            \"  body mediumtext,\\n\" +\n+            \"  description text,\\n\" +\n+            \"  deleted tinyint(1) NOT NULL DEFAULT false,\\n\" +\n+            \"  delete_time TIMESTAMP NULL DEFAULT NULL,\\n\" +\n+            \"  create_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,\\n\" +\n+            \"  update_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\\n\" +\n+            \"  PRIMARY KEY (id),\\n\" +\n+            \"  UNIQUE KEY function_id_version (function_id,version),\\n\" +\n+            \"  KEY qualified_function_name (catalog_name,schema_name,function_name)\\n\" +", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "810b00af4b1ac1155ec14ece1b64a7b5a9c2b9c4"}, "originalPosition": 71}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTcyNzYwMw==", "bodyText": "Maybe change to more meaningful table name.", "url": "https://github.com/prestodb/presto/pull/13972#discussion_r369727603", "createdAt": "2020-01-22T18:27:02Z", "author": {"login": "rongrong"}, "path": "presto-function-namespace-managers/src/main/java/com/facebook/presto/functionNamespace/db/FunctionNamespaceDao.java", "diffHunk": "@@ -0,0 +1,240 @@\n+/*\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.facebook.presto.functionNamespace.db;\n+\n+import com.facebook.presto.spi.function.RoutineCharacteristics.Language;\n+import com.facebook.presto.spi.function.SqlFunctionId;\n+import com.facebook.presto.spi.function.SqlInvokedFunction;\n+import com.facebook.presto.spi.function.SqlParameter;\n+import com.facebook.presto.spi.type.TypeSignature;\n+import org.jdbi.v3.sqlobject.config.RegisterArgumentFactories;\n+import org.jdbi.v3.sqlobject.config.RegisterArgumentFactory;\n+import org.jdbi.v3.sqlobject.config.RegisterRowMapper;\n+import org.jdbi.v3.sqlobject.config.RegisterRowMappers;\n+import org.jdbi.v3.sqlobject.customizer.Bind;\n+import org.jdbi.v3.sqlobject.customizer.Define;\n+import org.jdbi.v3.sqlobject.statement.SqlQuery;\n+import org.jdbi.v3.sqlobject.statement.SqlUpdate;\n+\n+import java.util.List;\n+import java.util.Optional;\n+\n+@RegisterRowMappers({\n+        @RegisterRowMapper(SqlInvokedFunctionRowMapper.class),\n+        @RegisterRowMapper(SqlInvokedFunctionRecordRowMapper.class)\n+})\n+@RegisterArgumentFactories({\n+        @RegisterArgumentFactory(SqlFunctionIdArgumentFactory.class),\n+        @RegisterArgumentFactory(SqlParametersArgumentFactory.class),\n+        @RegisterArgumentFactory(TypeSignatureArgumentFactory.class),\n+})\n+public interface FunctionNamespaceDao\n+{\n+    @SqlUpdate(\"CREATE TABLE IF NOT EXISTS <table_name> (\\n\" +\n+            \"   catalog_name varchar(128) NOT NULL,\\n\" +\n+            \"   schema_name varchar(128) NOT NULL,\\n\" +\n+            \" PRIMARY KEY (catalog_name, schema_name)\\n\" +\n+            \")\")\n+    void createFunctionNamespacesTableIfNotExists(@Define(\"table_name\") String tableName);\n+\n+    @SqlUpdate(\"CREATE TABLE IF NOT EXISTS <table_name> (\\n\" +\n+            \"  id bigint(20) NOT NULL AUTO_INCREMENT,\\n\" +\n+            \"  function_id varchar(700) NOT NULL,\\n\" +\n+            \"  version bigint(20) unsigned NOT NULL,\\n\" +\n+            \"  catalog_name varchar(128) NOT NULL,\\n\" +\n+            \"  schema_name varchar(128) NOT NULL,\\n\" +\n+            \"  function_name varchar(256) NOT NULL,\\n\" +\n+            \"  parameters text NOT NULL,\\n\" +\n+            \"  return_type varchar(256) NOT NULL,\\n\" +\n+            \"  language varchar(64) NOT NULL,\\n\" +\n+            \"  `deterministic` tinyint(1) NOT NULL,\\n\" +\n+            \"  called_on_null_input tinyint(1) NOT NULL,\\n\" +\n+            \"  body mediumtext,\\n\" +\n+            \"  description text,\\n\" +\n+            \"  deleted tinyint(1) NOT NULL DEFAULT false,\\n\" +\n+            \"  delete_time TIMESTAMP NULL DEFAULT NULL,\\n\" +\n+            \"  create_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,\\n\" +\n+            \"  update_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\\n\" +\n+            \"  PRIMARY KEY (id),\\n\" +\n+            \"  UNIQUE KEY function_id_version (function_id,version),\\n\" +\n+            \"  KEY qualified_function_name (catalog_name,schema_name,function_name)\\n\" +\n+            \")\")\n+    void createSqlInvokedFunctionsTableIfNotExists(@Define(\"table_name\") String tableName);\n+\n+    @SqlQuery(\"SELECT\\n\" +\n+            \"   count(1) > 0\\n\" +\n+            \"FROM <table_name>\\n\" +", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "810b00af4b1ac1155ec14ece1b64a7b5a9c2b9c4"}, "originalPosition": 77}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTcyOTc0NQ==", "bodyText": "maybe rename this column so it's not a keyword? This is a little annoying. \ud83d\ude02Don't know what to name it though...", "url": "https://github.com/prestodb/presto/pull/13972#discussion_r369729745", "createdAt": "2020-01-22T18:31:10Z", "author": {"login": "rongrong"}, "path": "presto-function-namespace-managers/src/main/java/com/facebook/presto/functionNamespace/db/FunctionNamespaceDao.java", "diffHunk": "@@ -0,0 +1,240 @@\n+/*\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.facebook.presto.functionNamespace.db;\n+\n+import com.facebook.presto.spi.function.RoutineCharacteristics.Language;\n+import com.facebook.presto.spi.function.SqlFunctionId;\n+import com.facebook.presto.spi.function.SqlInvokedFunction;\n+import com.facebook.presto.spi.function.SqlParameter;\n+import com.facebook.presto.spi.type.TypeSignature;\n+import org.jdbi.v3.sqlobject.config.RegisterArgumentFactories;\n+import org.jdbi.v3.sqlobject.config.RegisterArgumentFactory;\n+import org.jdbi.v3.sqlobject.config.RegisterRowMapper;\n+import org.jdbi.v3.sqlobject.config.RegisterRowMappers;\n+import org.jdbi.v3.sqlobject.customizer.Bind;\n+import org.jdbi.v3.sqlobject.customizer.Define;\n+import org.jdbi.v3.sqlobject.statement.SqlQuery;\n+import org.jdbi.v3.sqlobject.statement.SqlUpdate;\n+\n+import java.util.List;\n+import java.util.Optional;\n+\n+@RegisterRowMappers({\n+        @RegisterRowMapper(SqlInvokedFunctionRowMapper.class),\n+        @RegisterRowMapper(SqlInvokedFunctionRecordRowMapper.class)\n+})\n+@RegisterArgumentFactories({\n+        @RegisterArgumentFactory(SqlFunctionIdArgumentFactory.class),\n+        @RegisterArgumentFactory(SqlParametersArgumentFactory.class),\n+        @RegisterArgumentFactory(TypeSignatureArgumentFactory.class),\n+})\n+public interface FunctionNamespaceDao\n+{\n+    @SqlUpdate(\"CREATE TABLE IF NOT EXISTS <table_name> (\\n\" +\n+            \"   catalog_name varchar(128) NOT NULL,\\n\" +\n+            \"   schema_name varchar(128) NOT NULL,\\n\" +\n+            \" PRIMARY KEY (catalog_name, schema_name)\\n\" +\n+            \")\")\n+    void createFunctionNamespacesTableIfNotExists(@Define(\"table_name\") String tableName);\n+\n+    @SqlUpdate(\"CREATE TABLE IF NOT EXISTS <table_name> (\\n\" +\n+            \"  id bigint(20) NOT NULL AUTO_INCREMENT,\\n\" +\n+            \"  function_id varchar(700) NOT NULL,\\n\" +\n+            \"  version bigint(20) unsigned NOT NULL,\\n\" +\n+            \"  catalog_name varchar(128) NOT NULL,\\n\" +\n+            \"  schema_name varchar(128) NOT NULL,\\n\" +\n+            \"  function_name varchar(256) NOT NULL,\\n\" +\n+            \"  parameters text NOT NULL,\\n\" +\n+            \"  return_type varchar(256) NOT NULL,\\n\" +\n+            \"  language varchar(64) NOT NULL,\\n\" +\n+            \"  `deterministic` tinyint(1) NOT NULL,\\n\" +", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "810b00af4b1ac1155ec14ece1b64a7b5a9c2b9c4"}, "originalPosition": 61}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTczMTI0MA==", "bodyText": "Name it getLatestRecordForUpdate? People not reading the implementation would not be aware of the side effect otherwise.", "url": "https://github.com/prestodb/presto/pull/13972#discussion_r369731240", "createdAt": "2020-01-22T18:34:09Z", "author": {"login": "rongrong"}, "path": "presto-function-namespace-managers/src/main/java/com/facebook/presto/functionNamespace/db/FunctionNamespaceDao.java", "diffHunk": "@@ -0,0 +1,240 @@\n+/*\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.facebook.presto.functionNamespace.db;\n+\n+import com.facebook.presto.spi.function.RoutineCharacteristics.Language;\n+import com.facebook.presto.spi.function.SqlFunctionId;\n+import com.facebook.presto.spi.function.SqlInvokedFunction;\n+import com.facebook.presto.spi.function.SqlParameter;\n+import com.facebook.presto.spi.type.TypeSignature;\n+import org.jdbi.v3.sqlobject.config.RegisterArgumentFactories;\n+import org.jdbi.v3.sqlobject.config.RegisterArgumentFactory;\n+import org.jdbi.v3.sqlobject.config.RegisterRowMapper;\n+import org.jdbi.v3.sqlobject.config.RegisterRowMappers;\n+import org.jdbi.v3.sqlobject.customizer.Bind;\n+import org.jdbi.v3.sqlobject.customizer.Define;\n+import org.jdbi.v3.sqlobject.statement.SqlQuery;\n+import org.jdbi.v3.sqlobject.statement.SqlUpdate;\n+\n+import java.util.List;\n+import java.util.Optional;\n+\n+@RegisterRowMappers({\n+        @RegisterRowMapper(SqlInvokedFunctionRowMapper.class),\n+        @RegisterRowMapper(SqlInvokedFunctionRecordRowMapper.class)\n+})\n+@RegisterArgumentFactories({\n+        @RegisterArgumentFactory(SqlFunctionIdArgumentFactory.class),\n+        @RegisterArgumentFactory(SqlParametersArgumentFactory.class),\n+        @RegisterArgumentFactory(TypeSignatureArgumentFactory.class),\n+})\n+public interface FunctionNamespaceDao\n+{\n+    @SqlUpdate(\"CREATE TABLE IF NOT EXISTS <table_name> (\\n\" +\n+            \"   catalog_name varchar(128) NOT NULL,\\n\" +\n+            \"   schema_name varchar(128) NOT NULL,\\n\" +\n+            \" PRIMARY KEY (catalog_name, schema_name)\\n\" +\n+            \")\")\n+    void createFunctionNamespacesTableIfNotExists(@Define(\"table_name\") String tableName);\n+\n+    @SqlUpdate(\"CREATE TABLE IF NOT EXISTS <table_name> (\\n\" +\n+            \"  id bigint(20) NOT NULL AUTO_INCREMENT,\\n\" +\n+            \"  function_id varchar(700) NOT NULL,\\n\" +\n+            \"  version bigint(20) unsigned NOT NULL,\\n\" +\n+            \"  catalog_name varchar(128) NOT NULL,\\n\" +\n+            \"  schema_name varchar(128) NOT NULL,\\n\" +\n+            \"  function_name varchar(256) NOT NULL,\\n\" +\n+            \"  parameters text NOT NULL,\\n\" +\n+            \"  return_type varchar(256) NOT NULL,\\n\" +\n+            \"  language varchar(64) NOT NULL,\\n\" +\n+            \"  `deterministic` tinyint(1) NOT NULL,\\n\" +\n+            \"  called_on_null_input tinyint(1) NOT NULL,\\n\" +\n+            \"  body mediumtext,\\n\" +\n+            \"  description text,\\n\" +\n+            \"  deleted tinyint(1) NOT NULL DEFAULT false,\\n\" +\n+            \"  delete_time TIMESTAMP NULL DEFAULT NULL,\\n\" +\n+            \"  create_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,\\n\" +\n+            \"  update_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\\n\" +\n+            \"  PRIMARY KEY (id),\\n\" +\n+            \"  UNIQUE KEY function_id_version (function_id,version),\\n\" +\n+            \"  KEY qualified_function_name (catalog_name,schema_name,function_name)\\n\" +\n+            \")\")\n+    void createSqlInvokedFunctionsTableIfNotExists(@Define(\"table_name\") String tableName);\n+\n+    @SqlQuery(\"SELECT\\n\" +\n+            \"   count(1) > 0\\n\" +\n+            \"FROM <table_name>\\n\" +\n+            \"WHERE catalog_name = :catalog_name AND schema_name = :schema_name\")\n+    boolean servesFunctionNamespace(\n+            @Define(\"table_name\") String tableName,\n+            @Bind(\"catalog_name\") String catalogName,\n+            @Bind(\"schema_name\") String schemaName);\n+\n+    @SqlQuery(\"SELECT\\n\" +\n+            \"    t.catalog_name,\\n\" +\n+            \"    t.schema_name,\\n\" +\n+            \"    t.function_name,\\n\" +\n+            \"    t.parameters,\\n\" +\n+            \"    t.return_type,\\n\" +\n+            \"    t.description,\\n\" +\n+            \"    t.language,\\n\" +\n+            \"    t.`deterministic`,\\n\" +\n+            \"    t.called_on_null_input,\\n\" +\n+            \"    t.body,\\n\" +\n+            \"    t.version\\n\" +\n+            \"FROM <table_name> t\\n\" +\n+            \"JOIN (\\n\" +\n+            \"    SELECT\\n\" +\n+            \"        function_id,\\n\" +\n+            \"        MAX(version) version\\n\" +\n+            \"    FROM <table_name>\\n\" +\n+            \"    WHERE catalog_name = :catalog_name\\n\" +\n+            \"      AND schema_name = :schema_name\\n\" +\n+            \"      AND function_name = :function_name\\n\" +\n+            \"    GROUP BY\\n\" +\n+            \"        function_id\\n\" +\n+            \") v\\n\" +\n+            \"    ON t.function_id = v.function_id\\n \" +\n+            \"    AND t.version = v.version\\n\" +\n+            \"WHERE\\n\" +\n+            \"    NOT t.deleted\")\n+    List<SqlInvokedFunction> getFunctions(\n+            @Define(\"table_name\") String tableName,\n+            @Bind(\"catalog_name\") String catalogName,\n+            @Bind(\"schema_name\") String schemaName,\n+            @Bind(\"function_name\") String functionName);\n+\n+    @SqlQuery(\"SELECT\\n\" +\n+            \"    catalog_name,\\n\" +\n+            \"    schema_name,\\n\" +\n+            \"    function_name,\\n\" +\n+            \"    parameters,\\n\" +\n+            \"    return_type,\\n\" +\n+            \"    description,\\n\" +\n+            \"    language,\\n\" +\n+            \"    `deterministic`,\\n\" +\n+            \"    called_on_null_input,\\n\" +\n+            \"    body,\\n\" +\n+            \"    version\\n\" +\n+            \"FROM <table_name>\\n\" +\n+            \"WHERE\\n\" +\n+            \"    function_id = :function_id\\n\" +\n+            \"    AND version = :version\")\n+    Optional<SqlInvokedFunction> getFunction(\n+            @Define(\"table_name\") String tableName,\n+            @Bind(\"function_id\") SqlFunctionId functionId,\n+            @Bind(\"version\") long version);\n+\n+    @SqlQuery(\"SELECT\\n\" +\n+            \"    t.catalog_name,\\n\" +\n+            \"    t.schema_name,\\n\" +\n+            \"    t.function_name,\\n\" +\n+            \"    t.parameters,\\n\" +\n+            \"    t.return_type,\\n\" +\n+            \"    t.description,\\n\" +\n+            \"    t.language,\\n\" +\n+            \"    t.`deterministic`,\\n\" +\n+            \"    t.called_on_null_input,\\n\" +\n+            \"    t.body,\\n\" +\n+            \"    t.version,\\n\" +\n+            \"    t.deleted\\n\" +\n+            \"FROM <table_name> t\\n\" +\n+            \"JOIN (\\n\" +\n+            \"    SELECT\\n\" +\n+            \"        MAX(version) version\\n\" +\n+            \"    FROM <table_name>\\n\" +\n+            \"    WHERE\\n\" +\n+            \"        function_id = :function_id\\n\" +\n+            \") v\\n\" +\n+            \"ON\\n\" +\n+            \"    t.version = v.version\\n\" +\n+            \"WHERE\\n\" +\n+            \"    t.function_id = :function_id\\n\" +\n+            \"FOR UPDATE\")\n+    Optional<SqlInvokedFunctionRecord> getLatestRecord(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "810b00af4b1ac1155ec14ece1b64a7b5a9c2b9c4"}, "originalPosition": 165}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTczMjY0MQ==", "bodyText": "Maybe name it SQL_PARAMETERS_CODEC?", "url": "https://github.com/prestodb/presto/pull/13972#discussion_r369732641", "createdAt": "2020-01-22T18:36:54Z", "author": {"login": "rongrong"}, "path": "presto-function-namespace-managers/src/main/java/com/facebook/presto/functionNamespace/db/SqlInvokedFunctionRowMapper.java", "diffHunk": "@@ -0,0 +1,71 @@\n+/*\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.facebook.presto.functionNamespace.db;\n+\n+import com.facebook.airlift.json.JsonCodec;\n+import com.facebook.presto.spi.CatalogSchemaName;\n+import com.facebook.presto.spi.function.QualifiedFunctionName;\n+import com.facebook.presto.spi.function.RoutineCharacteristics;\n+import com.facebook.presto.spi.function.RoutineCharacteristics.Language;\n+import com.facebook.presto.spi.function.SqlInvokedFunction;\n+import com.facebook.presto.spi.function.SqlParameter;\n+import org.jdbi.v3.core.mapper.RowMapper;\n+import org.jdbi.v3.core.statement.StatementContext;\n+\n+import java.sql.ResultSet;\n+import java.sql.SQLException;\n+import java.util.List;\n+import java.util.Optional;\n+\n+import static com.facebook.presto.spi.function.RoutineCharacteristics.Determinism.DETERMINISTIC;\n+import static com.facebook.presto.spi.function.RoutineCharacteristics.Determinism.NOT_DETERMINISTIC;\n+import static com.facebook.presto.spi.function.RoutineCharacteristics.NullCallClause.CALLED_ON_NULL_INPUT;\n+import static com.facebook.presto.spi.function.RoutineCharacteristics.NullCallClause.RETURNS_NULL_ON_NULL_INPUT;\n+import static com.facebook.presto.spi.type.TypeSignature.parseTypeSignature;\n+\n+public class SqlInvokedFunctionRowMapper\n+        implements RowMapper<SqlInvokedFunction>\n+{\n+    private static final JsonCodec<List<SqlParameter>> CODEC = JsonCodec.listJsonCodec(SqlParameter.class);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "810b00af4b1ac1155ec14ece1b64a7b5a9c2b9c4"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTczMzUxNw==", "bodyText": "Do they need to be public? Maybe use \"test_xxx\"?", "url": "https://github.com/prestodb/presto/pull/13972#discussion_r369733517", "createdAt": "2020-01-22T18:38:42Z", "author": {"login": "rongrong"}, "path": "presto-function-namespace-managers/src/test/java/com/facebook/presto/functionNamespace/db/TestDbFunctionNamespaceManager.java", "diffHunk": "@@ -0,0 +1,292 @@\n+/*\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.facebook.presto.functionNamespace.db;\n+\n+import com.facebook.presto.functionNamespace.SqlInvokedFunctionNamespaceManagerConfig;\n+import com.facebook.presto.spi.CatalogSchemaName;\n+import com.facebook.presto.spi.ErrorCodeSupplier;\n+import com.facebook.presto.spi.PrestoException;\n+import com.facebook.presto.spi.function.FunctionHandle;\n+import com.facebook.presto.spi.function.FunctionMetadata;\n+import com.facebook.presto.spi.function.FunctionNamespaceTransactionHandle;\n+import com.facebook.presto.spi.function.QualifiedFunctionName;\n+import com.facebook.presto.spi.function.RoutineCharacteristics;\n+import com.facebook.presto.spi.function.SqlFunctionHandle;\n+import com.facebook.presto.spi.function.SqlFunctionId;\n+import com.facebook.presto.spi.function.SqlInvokedFunction;\n+import com.facebook.presto.spi.function.SqlParameter;\n+import com.facebook.presto.spi.type.TypeSignature;\n+import com.facebook.presto.testing.mysql.TestingMySqlServer;\n+import com.google.common.base.Joiner;\n+import com.google.common.collect.ImmutableList;\n+import com.google.common.collect.ImmutableSet;\n+import com.google.common.util.concurrent.UncheckedExecutionException;\n+import io.airlift.units.Duration;\n+import org.jdbi.v3.core.Handle;\n+import org.jdbi.v3.core.Jdbi;\n+import org.jdbi.v3.sqlobject.SqlObjectPlugin;\n+import org.testng.annotations.AfterClass;\n+import org.testng.annotations.AfterMethod;\n+import org.testng.annotations.BeforeClass;\n+import org.testng.annotations.Test;\n+\n+import java.sql.DriverManager;\n+import java.util.Arrays;\n+import java.util.List;\n+import java.util.Optional;\n+\n+import static com.facebook.airlift.testing.Closeables.closeQuietly;\n+import static com.facebook.presto.functionNamespace.testing.SqlInvokedFunctionTestUtils.FUNCTION_POWER_TOWER_DOUBLE;\n+import static com.facebook.presto.functionNamespace.testing.SqlInvokedFunctionTestUtils.FUNCTION_POWER_TOWER_DOUBLE_UPDATED;\n+import static com.facebook.presto.functionNamespace.testing.SqlInvokedFunctionTestUtils.FUNCTION_POWER_TOWER_INT;\n+import static com.facebook.presto.functionNamespace.testing.SqlInvokedFunctionTestUtils.POWER_TOWER;\n+import static com.facebook.presto.spi.StandardErrorCode.ALREADY_EXISTS;\n+import static com.facebook.presto.spi.function.FunctionKind.SCALAR;\n+import static com.facebook.presto.spi.function.RoutineCharacteristics.Determinism.DETERMINISTIC;\n+import static com.facebook.presto.spi.function.RoutineCharacteristics.NullCallClause.RETURNS_NULL_ON_NULL_INPUT;\n+import static com.facebook.presto.spi.type.StandardTypes.DOUBLE;\n+import static com.facebook.presto.spi.type.TypeSignature.parseTypeSignature;\n+import static java.lang.String.format;\n+import static java.util.Collections.nCopies;\n+import static java.util.Comparator.comparing;\n+import static java.util.concurrent.TimeUnit.NANOSECONDS;\n+import static org.testng.Assert.assertEquals;\n+import static org.testng.Assert.assertFalse;\n+import static org.testng.Assert.assertTrue;\n+import static org.testng.Assert.fail;\n+\n+@Test(singleThreaded = true)\n+public class TestDbFunctionNamespaceManager\n+{\n+    private static final QualifiedFunctionName TANGENT = QualifiedFunctionName.of(new CatalogSchemaName(\"unittest\", \"memory\"), \"tangent\");\n+    private static final ImmutableList<SqlParameter> TANGENT_PARAMETERS = ImmutableList.of(new SqlParameter(\"x\", parseTypeSignature(DOUBLE)));\n+    private static final TypeSignature TANGENT_RETURN_TYPE = parseTypeSignature(DOUBLE);\n+    private static final String TANGENT_DESCRIPTION = \"power tower\";\n+    private static final RoutineCharacteristics TANGENT_CHARACTERISTICS = RoutineCharacteristics.builder()\n+            .setDeterminism(DETERMINISTIC)\n+            .setNullCallClause(RETURNS_NULL_ON_NULL_INPUT)\n+            .build();\n+    private static final String TANGENT_BODY = \"sin(x) / cos(x)\";\n+    private static final SqlInvokedFunction FUNCTION_TANGENT = new SqlInvokedFunction(\n+            TANGENT,\n+            TANGENT_PARAMETERS,\n+            TANGENT_RETURN_TYPE,\n+            TANGENT_DESCRIPTION,\n+            TANGENT_CHARACTERISTICS,\n+            TANGENT_BODY,\n+            Optional.empty());\n+\n+    private static final String DB = \"presto\";\n+\n+    private TestingMySqlServer mySqlServer;\n+    private Jdbi jdbi;\n+    private DbFunctionNamespaceManager functionNamespaceManager;\n+\n+    public static String getFunctionNamespacesTableName()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "810b00af4b1ac1155ec14ece1b64a7b5a9c2b9c4"}, "originalPosition": 96}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTczNTczNQ==", "bodyText": "You are not using these when creating the database tables. And as long as you are using CREATE TABLE IF NOT EXISTS you cannot really change the upper bound of this. So either restrict the allowed value, or this doesn't really need to be configurable.", "url": "https://github.com/prestodb/presto/pull/13972#discussion_r369735735", "createdAt": "2020-01-22T18:43:07Z", "author": {"login": "rongrong"}, "path": "presto-function-namespace-managers/src/main/java/com/facebook/presto/functionNamespace/db/DbFunctionNamespaceManagerConfig.java", "diffHunk": "@@ -0,0 +1,171 @@\n+/*\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.facebook.presto.functionNamespace.db;\n+\n+import com.facebook.airlift.configuration.Config;\n+import com.facebook.presto.spi.CatalogSchemaName;\n+import com.google.common.base.Joiner;\n+import com.google.common.base.Splitter;\n+import com.google.common.collect.ImmutableList;\n+import io.airlift.units.Duration;\n+\n+import javax.validation.constraints.Min;\n+import javax.validation.constraints.NotNull;\n+\n+import java.util.List;\n+\n+import static com.google.common.base.Preconditions.checkArgument;\n+import static com.google.common.collect.ImmutableList.toImmutableList;\n+import static java.lang.String.format;\n+import static java.util.concurrent.TimeUnit.SECONDS;\n+\n+public class DbFunctionNamespaceManagerConfig\n+{\n+    private static final Splitter NAMESPACE_SPLITTER = Splitter.on(',').trimResults().omitEmptyStrings();\n+    private static final Splitter CATALOG_SCHEMA_SPLITTER = Splitter.on('.');\n+\n+    private String functionNamespacesTableName = \"sql_invoked_function_namespaces\";\n+    private String functionsTableName = \"sql_invoked_functions\";\n+    private List<CatalogSchemaName> defaultFunctionNamespaces = ImmutableList.of();\n+    private Duration queryTimeout = new Duration(20, SECONDS);\n+\n+    private int maxCatalogNameLength = 128;\n+    private int maxSchemaNameLength = 128;\n+    private int maxFunctionNameLength = 256;\n+    private int maxParameterTypesLength = 500;\n+    private int maxReturnTypeLength = 256;\n+\n+    @NotNull\n+    public String getFunctionNamespacesTableName()\n+    {\n+        return functionNamespacesTableName;\n+    }\n+\n+    @Config(\"function-namespace-table-name\")\n+    public DbFunctionNamespaceManagerConfig setFunctionNamespacesTableName(String functionNamespacesTableName)\n+    {\n+        this.functionNamespacesTableName = functionNamespacesTableName;\n+        return this;\n+    }\n+\n+    @NotNull\n+    public List<CatalogSchemaName> getDefaultFunctionNamespaces()\n+    {\n+        return defaultFunctionNamespaces;\n+    }\n+\n+    @Config(\"default-function-namespaces\")\n+    public DbFunctionNamespaceManagerConfig setDefaultFunctionNamespaces(String defaultFunctionNamespaces)\n+    {\n+        this.defaultFunctionNamespaces = NAMESPACE_SPLITTER.splitToList(defaultFunctionNamespaces).stream()\n+                .map(s -> CATALOG_SCHEMA_SPLITTER.splitToList(s))\n+                .map(parts -> {\n+                    checkArgument(parts.size() == 2, format(\"Expect catalog.schema, get %s\", Joiner.on(',').join(parts)));\n+                    return new CatalogSchemaName(parts.get(0), parts.get(1));\n+                })\n+                .collect(toImmutableList());\n+        return this;\n+    }\n+\n+    @NotNull\n+    public String getFunctionsTableName()\n+    {\n+        return functionsTableName;\n+    }\n+\n+    @Config(\"function-table-name\")\n+    public DbFunctionNamespaceManagerConfig setFunctionsTableName(String functionsTableName)\n+    {\n+        this.functionsTableName = functionsTableName;\n+        return this;\n+    }\n+\n+    @NotNull\n+    public Duration getQueryTimeout()\n+    {\n+        return queryTimeout;\n+    }\n+\n+    @Config(\"query-timeout\")\n+    public DbFunctionNamespaceManagerConfig setQueryTimeout(Duration queryTimeout)\n+    {\n+        this.queryTimeout = queryTimeout;\n+        return this;\n+    }\n+\n+    @Min(1)\n+    public int getMaxCatalogNameLength()\n+    {\n+        return maxCatalogNameLength;\n+    }\n+\n+    @Config(\"max-catalog-name-length\")\n+    public DbFunctionNamespaceManagerConfig setMaxCatalogNameLength(int maxCatalogNameLength)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "810b00af4b1ac1155ec14ece1b64a7b5a9c2b9c4"}, "originalPosition": 114}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2557eae489d8f4d989e6fc465e3a10308b1796c5", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/2557eae489d8f4d989e6fc465e3a10308b1796c5", "committedDate": "2020-01-21T22:45:57Z", "message": "Include function namespace managers plugin in Presto server"}, "afterCommit": {"oid": "bbdd7f7c5a5dfb2f953903734553700df74523e1", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/bbdd7f7c5a5dfb2f953903734553700df74523e1", "committedDate": "2020-01-23T19:29:20Z", "message": "Include function namespace managers plugin in Presto server"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bbdd7f7c5a5dfb2f953903734553700df74523e1", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/bbdd7f7c5a5dfb2f953903734553700df74523e1", "committedDate": "2020-01-23T19:29:20Z", "message": "Include function namespace managers plugin in Presto server"}, "afterCommit": {"oid": "b4b99c88b441ab6e81397fe5629ecf072f9dd7d0", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/b4b99c88b441ab6e81397fe5629ecf072f9dd7d0", "committedDate": "2020-01-23T20:06:50Z", "message": "Include function namespace managers plugin in Presto server"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b4b99c88b441ab6e81397fe5629ecf072f9dd7d0", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/b4b99c88b441ab6e81397fe5629ecf072f9dd7d0", "committedDate": "2020-01-23T20:06:50Z", "message": "Include function namespace managers plugin in Presto server"}, "afterCommit": {"oid": "459927a6619377e0724c79a14c3cd36d2aa9da56", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/459927a6619377e0724c79a14c3cd36d2aa9da56", "committedDate": "2020-01-23T20:23:40Z", "message": "Include function namespace managers plugin in Presto server"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "459927a6619377e0724c79a14c3cd36d2aa9da56", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/459927a6619377e0724c79a14c3cd36d2aa9da56", "committedDate": "2020-01-23T20:23:40Z", "message": "Include function namespace managers plugin in Presto server"}, "afterCommit": {"oid": "9b97d8d72b2a01dae8a4661c1642293c91a50e9b", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/9b97d8d72b2a01dae8a4661c1642293c91a50e9b", "committedDate": "2020-01-23T20:28:58Z", "message": "Include function namespace managers plugin in Presto server"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9b97d8d72b2a01dae8a4661c1642293c91a50e9b", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/9b97d8d72b2a01dae8a4661c1642293c91a50e9b", "committedDate": "2020-01-23T20:28:58Z", "message": "Include function namespace managers plugin in Presto server"}, "afterCommit": {"oid": "4ae4d07ee601bc732b463ea60988ee0ed5a5748d", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/4ae4d07ee601bc732b463ea60988ee0ed5a5748d", "committedDate": "2020-01-24T01:02:16Z", "message": "Include function namespace managers plugin in Presto server"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4ae4d07ee601bc732b463ea60988ee0ed5a5748d", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/4ae4d07ee601bc732b463ea60988ee0ed5a5748d", "committedDate": "2020-01-24T01:02:16Z", "message": "Include function namespace managers plugin in Presto server"}, "afterCommit": {"oid": "ad2a9a64b7fb5769be62a77862c0a248a264210c", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/ad2a9a64b7fb5769be62a77862c0a248a264210c", "committedDate": "2020-01-24T01:05:09Z", "message": "Include function namespace managers plugin in Presto server"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ad2a9a64b7fb5769be62a77862c0a248a264210c", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/ad2a9a64b7fb5769be62a77862c0a248a264210c", "committedDate": "2020-01-24T01:05:09Z", "message": "Include function namespace managers plugin in Presto server"}, "afterCommit": {"oid": "5767a7e8955705a7d74e6ed2458dfd5be67d45c1", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/5767a7e8955705a7d74e6ed2458dfd5be67d45c1", "committedDate": "2020-01-24T01:45:21Z", "message": "Include function namespace managers plugin in Presto server"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5767a7e8955705a7d74e6ed2458dfd5be67d45c1", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/5767a7e8955705a7d74e6ed2458dfd5be67d45c1", "committedDate": "2020-01-24T01:45:21Z", "message": "Include function namespace managers plugin in Presto server"}, "afterCommit": {"oid": "c0a51d79084e07844d2459a85036ba6f284705e7", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/c0a51d79084e07844d2459a85036ba6f284705e7", "committedDate": "2020-01-24T19:27:10Z", "message": "Include function namespace managers plugin in Presto server"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c0a51d79084e07844d2459a85036ba6f284705e7", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/c0a51d79084e07844d2459a85036ba6f284705e7", "committedDate": "2020-01-24T19:27:10Z", "message": "Include function namespace managers plugin in Presto server"}, "afterCommit": {"oid": "a57e47d4543cc47c609a98ff345a20e7202473f2", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/a57e47d4543cc47c609a98ff345a20e7202473f2", "committedDate": "2020-01-24T20:53:53Z", "message": "Include function namespace managers plugin in Presto server"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a57e47d4543cc47c609a98ff345a20e7202473f2", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/a57e47d4543cc47c609a98ff345a20e7202473f2", "committedDate": "2020-01-24T20:53:53Z", "message": "Include function namespace managers plugin in Presto server"}, "afterCommit": {"oid": "9740926efac1fc3bbfbdbbced97622d3ebe68f2b", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/9740926efac1fc3bbfbdbbced97622d3ebe68f2b", "committedDate": "2020-01-24T21:53:04Z", "message": "Include function namespace managers plugin in Presto server"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4MjU0NzM0", "url": "https://github.com/prestodb/presto/pull/13972#pullrequestreview-348254734", "createdAt": "2020-01-24T22:12:51Z", "commit": {"oid": "28cee1cc2d44b87a375736ebc0fa115ab19ddb88"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQyMjoxMjo1MlrOFhr2BA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQyMjoxMjo1MlrOFhr2BA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDg2NTY2OA==", "bodyText": "If you decide to do this, make sure you handle release deployment correctly.", "url": "https://github.com/prestodb/presto/pull/13972#discussion_r370865668", "createdAt": "2020-01-24T22:12:52Z", "author": {"login": "rongrong"}, "path": "presto-function-namespace-managers/src/main/java/com/facebook/presto/functionNamespace/db/DbFunctionNamespaceManagerConfig.java", "diffHunk": "@@ -52,7 +52,7 @@ public String getFunctionNamespacesTableName()\n         return functionNamespacesTableName;\n     }\n \n-    @Config(\"function-namespace-table-name\")\n+    @Config(\"function-namespaces-table-name\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "28cee1cc2d44b87a375736ebc0fa115ab19ddb88"}, "originalPosition": 16}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4MjU5MjE3", "url": "https://github.com/prestodb/presto/pull/13972#pullrequestreview-348259217", "createdAt": "2020-01-24T22:24:25Z", "commit": {"oid": "f10bcdf5c66b72291fa52b0c5f8812e8a91f787a"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQyMjoyNDoyNVrOFhsD2w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQyMjo0MjozM1rOFhsXxQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDg2OTIxMQ==", "bodyText": "Missed this one?", "url": "https://github.com/prestodb/presto/pull/13972#discussion_r370869211", "createdAt": "2020-01-24T22:24:25Z", "author": {"login": "rongrong"}, "path": "presto-function-namespace-managers/src/main/java/com/facebook/presto/functionNamespace/db/FunctionNamespaceDao.java", "diffHunk": "@@ -160,6 +160,41 @@ boolean servesFunctionNamespace(\n             \"FOR UPDATE\")\n     Optional<SqlInvokedFunctionRecord> getLatestRecordForUpdate(@Bind(\"function_id\") SqlFunctionId functionId);\n \n+    @SqlQuery(\"SELECT\\n\" +\n+            \"    t.catalog_name,\\n\" +\n+            \"    t.schema_name,\\n\" +\n+            \"    t.function_name,\\n\" +\n+            \"    t.parameters,\\n\" +\n+            \"    t.return_type,\\n\" +\n+            \"    t.description,\\n\" +\n+            \"    t.language,\\n\" +\n+            \"    t.is_deterministic,\\n\" +\n+            \"    t.called_on_null_input,\\n\" +\n+            \"    t.body,\\n\" +\n+            \"    t.version,\\n\" +\n+            \"    t.deleted\\n\" +\n+            \"FROM <table_name> t\\n\" +", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f10bcdf5c66b72291fa52b0c5f8812e8a91f787a"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDg3MDk3OQ==", "bodyText": "The serving function namespaces should come from the table rather than the config. The config provides initial values. Database has the source of truth. Also, the initial values is supposed to be a stop-gap for proper grant support.", "url": "https://github.com/prestodb/presto/pull/13972#discussion_r370870979", "createdAt": "2020-01-24T22:30:40Z", "author": {"login": "rongrong"}, "path": "presto-function-namespace-managers/src/main/java/com/facebook/presto/functionNamespace/AbstractSqlInvokedFunctionNamespaceManager.java", "diffHunk": "@@ -43,19 +46,24 @@\n import static com.google.common.base.Preconditions.checkArgument;\n import static com.google.common.collect.ImmutableList.toImmutableList;\n import static com.google.common.collect.ImmutableMap.toImmutableMap;\n+import static com.google.common.collect.ImmutableSet.toImmutableSet;\n import static java.util.concurrent.TimeUnit.MILLISECONDS;\n \n public abstract class AbstractSqlInvokedFunctionNamespaceManager\n         implements FunctionNamespaceManager<SqlInvokedFunction>\n {\n     private final ConcurrentMap<FunctionNamespaceTransactionHandle, FunctionCollection> transactions = new ConcurrentHashMap<>();\n \n+    private final Set<CatalogSchemaPrefix> servingNamespaces;\n     private final LoadingCache<QualifiedFunctionName, Collection<SqlInvokedFunction>> functions;\n     private final LoadingCache<SqlFunctionHandle, FunctionMetadata> metadataByHandle;\n     private final LoadingCache<SqlFunctionHandle, ScalarFunctionImplementation> implementationByHandle;\n \n     public AbstractSqlInvokedFunctionNamespaceManager(SqlInvokedFunctionNamespaceManagerConfig config)\n     {\n+        this.servingNamespaces = config.getServingNamespaces().stream()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dd8fd9a7ed37e3b8698a07ef797deab50f5e0816"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDg3NDMwOQ==", "bodyText": "Instead of duplicating the config in two places, maybe change the listFunctions api to listFunctions(prefix) and collect that from FunctionManager directly.", "url": "https://github.com/prestodb/presto/pull/13972#discussion_r370874309", "createdAt": "2020-01-24T22:42:33Z", "author": {"login": "rongrong"}, "path": "presto-function-namespace-managers/src/main/java/com/facebook/presto/functionNamespace/SqlInvokedFunctionNamespaceManagerConfig.java", "diffHunk": "@@ -14,17 +14,39 @@\n package com.facebook.presto.functionNamespace;\n \n import com.facebook.airlift.configuration.Config;\n+import com.google.common.base.Splitter;\n+import com.google.common.collect.ImmutableList;\n import io.airlift.units.Duration;\n import io.airlift.units.MinDuration;\n \n+import javax.validation.constraints.NotNull;\n+\n+import java.util.List;\n+\n import static java.util.concurrent.TimeUnit.HOURS;\n import static java.util.concurrent.TimeUnit.MINUTES;\n \n public class SqlInvokedFunctionNamespaceManagerConfig\n {\n+    private List<String> servingNamespaces;\n     private Duration functionCacheExpiration = new Duration(5, MINUTES);\n     private Duration functionInstanceCacheExpiration = new Duration(8, HOURS);\n \n+    @NotNull\n+    public List<String> getServingNamespaces()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dd8fd9a7ed37e3b8698a07ef797deab50f5e0816"}, "originalPosition": 23}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9740926efac1fc3bbfbdbbced97622d3ebe68f2b", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/9740926efac1fc3bbfbdbbced97622d3ebe68f2b", "committedDate": "2020-01-24T21:53:04Z", "message": "Include function namespace managers plugin in Presto server"}, "afterCommit": {"oid": "9d2519eb130151090b599b102f830beb56d0bf9b", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/9d2519eb130151090b599b102f830beb56d0bf9b", "committedDate": "2020-01-24T22:49:53Z", "message": "Introduce MySql-based function namespace manager\n\nAlso, include function namespace managers plugin in Presto server"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9d2519eb130151090b599b102f830beb56d0bf9b", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/9d2519eb130151090b599b102f830beb56d0bf9b", "committedDate": "2020-01-24T22:49:53Z", "message": "Introduce MySql-based function namespace manager\n\nAlso, include function namespace managers plugin in Presto server"}, "afterCommit": {"oid": "f4fa0ac47a95b0de92d0934f3b8a1f03d1989963", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/f4fa0ac47a95b0de92d0934f3b8a1f03d1989963", "committedDate": "2020-01-24T22:54:12Z", "message": "Introduce MySql-based function namespace manager\n\nAlso, include function namespace managers plugin in Presto server"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f4fa0ac47a95b0de92d0934f3b8a1f03d1989963", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/f4fa0ac47a95b0de92d0934f3b8a1f03d1989963", "committedDate": "2020-01-24T22:54:12Z", "message": "Introduce MySql-based function namespace manager\n\nAlso, include function namespace managers plugin in Presto server"}, "afterCommit": {"oid": "2dbf640c83b25ad15a8ad4b4ec83aa69ac91ff28", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/2dbf640c83b25ad15a8ad4b4ec83aa69ac91ff28", "committedDate": "2020-01-26T23:05:27Z", "message": "Introduce MySql-based function namespace manager\n\nAlso, include function namespace managers plugin in Presto server"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2dbf640c83b25ad15a8ad4b4ec83aa69ac91ff28", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/2dbf640c83b25ad15a8ad4b4ec83aa69ac91ff28", "committedDate": "2020-01-26T23:05:27Z", "message": "Introduce MySql-based function namespace manager\n\nAlso, include function namespace managers plugin in Presto server"}, "afterCommit": {"oid": "7ed3643580f6ce128c938b5ecd9017090f1866c0", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/7ed3643580f6ce128c938b5ecd9017090f1866c0", "committedDate": "2020-01-28T18:49:29Z", "message": "Introduce MySql-based function namespace manager\n\nAlso, include function namespace managers plugin in Presto server"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7ed3643580f6ce128c938b5ecd9017090f1866c0", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/7ed3643580f6ce128c938b5ecd9017090f1866c0", "committedDate": "2020-01-28T18:49:29Z", "message": "Introduce MySql-based function namespace manager\n\nAlso, include function namespace managers plugin in Presto server"}, "afterCommit": {"oid": "95f5bbca41aee4f3a9edc14d91db06daa1ff584d", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/95f5bbca41aee4f3a9edc14d91db06daa1ff584d", "committedDate": "2020-01-28T19:49:08Z", "message": "Introduce MySql-based function namespace manager\n\nAlso, include function namespace managers plugin in Presto server"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "95f5bbca41aee4f3a9edc14d91db06daa1ff584d", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/95f5bbca41aee4f3a9edc14d91db06daa1ff584d", "committedDate": "2020-01-28T19:49:08Z", "message": "Introduce MySql-based function namespace manager\n\nAlso, include function namespace managers plugin in Presto server"}, "afterCommit": {"oid": "516dfcb775e4a7b504c07b4ed3c80d08f785b5ea", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/516dfcb775e4a7b504c07b4ed3c80d08f785b5ea", "committedDate": "2020-01-28T19:52:48Z", "message": "Introduce MySql-based function namespace manager\n\nAlso, include function namespace managers plugin in Presto server"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "516dfcb775e4a7b504c07b4ed3c80d08f785b5ea", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/516dfcb775e4a7b504c07b4ed3c80d08f785b5ea", "committedDate": "2020-01-28T19:52:48Z", "message": "Introduce MySql-based function namespace manager\n\nAlso, include function namespace managers plugin in Presto server"}, "afterCommit": {"oid": "e150d2804a573355a549903b3ac780d79c4acf23", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/e150d2804a573355a549903b3ac780d79c4acf23", "committedDate": "2020-01-28T19:54:03Z", "message": "Introduce MySql-based function namespace manager\n\nAlso, include function namespace managers plugin in Presto server"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e150d2804a573355a549903b3ac780d79c4acf23", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/e150d2804a573355a549903b3ac780d79c4acf23", "committedDate": "2020-01-28T19:54:03Z", "message": "Introduce MySql-based function namespace manager\n\nAlso, include function namespace managers plugin in Presto server"}, "afterCommit": {"oid": "193a3b437a055f8237396956900cb51891baa4c1", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/193a3b437a055f8237396956900cb51891baa4c1", "committedDate": "2020-01-28T19:54:11Z", "message": "Introduce MySql-based function namespace manager\n\nAlso, include function namespace managers plugin in Presto server"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "193a3b437a055f8237396956900cb51891baa4c1", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/193a3b437a055f8237396956900cb51891baa4c1", "committedDate": "2020-01-28T19:54:11Z", "message": "Introduce MySql-based function namespace manager\n\nAlso, include function namespace managers plugin in Presto server"}, "afterCommit": {"oid": "8fe485fb56dbf00782c4fb3c23448cf61f42ac59", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/8fe485fb56dbf00782c4fb3c23448cf61f42ac59", "committedDate": "2020-01-28T22:29:20Z", "message": "Introduce MySql-based function namespace manager\n\nAlso, include function namespace managers plugin in Presto server"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUxMjM0Njg5", "url": "https://github.com/prestodb/presto/pull/13972#pullrequestreview-351234689", "createdAt": "2020-01-31T00:37:36Z", "commit": {"oid": "77bc9049a033800075ab1994a88d48ab3bb481d0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMVQwMDozNzozN1rOFj-avw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMVQwMDozNzozN1rOFj-avw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzI2NzEzNQ==", "bodyText": "Hmm, do we need to through error if the function namespace manager has some old functions from a namespace that's no longer used? Personally I prefer the function namespace manager to support a listFunction(prefix) API. This way we simply ignore anything that's in the function namespace manager but not configured to be managed by this instance. (Think, the same backend database hosting function namespaces a.b, x.y, but for one cluster you are only configuring it to manage a.b, while on another cluster it's configured to manage x.y). I don't see why this needs to be an internal error. It seems to be reasonable. Essentially, the config is constructing a view of the underlying database to be exposed to a certain cluster configuration.", "url": "https://github.com/prestodb/presto/pull/13972#discussion_r373267135", "createdAt": "2020-01-31T00:37:37Z", "author": {"login": "rongrong"}, "path": "presto-main/src/main/java/com/facebook/presto/metadata/FunctionManager.java", "diffHunk": "@@ -198,15 +205,32 @@ public void registerBuiltInFunctions(List<? extends BuiltInFunction> functions)\n \n     public List<SqlFunction> listFunctions(Session session)\n     {\n-        Collection<FunctionNamespaceManager<?>> managers = isListBuiltInFunctionsOnly(session) ?\n-                ImmutableSet.of(builtInFunctionNamespaceManager) :\n-                functionNamespaceManagers.values();\n+        Set<String> managerIds = isListBuiltInFunctionsOnly(session) ?\n+                ImmutableSet.of(BuiltInFunctionNamespaceManager.ID) :\n+                functionNamespaceManagers.keySet();\n \n-        return managers.stream()\n-                .flatMap(manager -> manager.listFunctions().stream())\n-                .filter(function -> function.getVisibility() == PUBLIC ||\n-                        (function.getVisibility() == EXPERIMENTAL && SystemSessionProperties.isExperimentalFunctionsEnabled(session)))\n-                .collect(toImmutableList());\n+        ImmutableList.Builder<SqlFunction> functions = ImmutableList.builder();\n+        for (String managerId : managerIds) {\n+            FunctionNamespaceManager<? extends SqlFunction> manager = functionNamespaceManagers.get(managerId);\n+            Set<CatalogSchemaPrefix> servingNamespaces = this.servingNamespaces.get().get(managerId);\n+\n+            for (SqlFunction function : manager.listFunctions()) {\n+                CatalogSchemaName functionNamespace = function.getSignature().getName().getFunctionNamespace();\n+\n+                if (!servingNamespaces.contains(functionNamespace.asCatalogSchemaPrefix())\n+                        && !servingNamespaces.contains(new CatalogSchemaPrefix(functionNamespace.getCatalogName(), Optional.empty()))) {\n+                    throw new PrestoException(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "77bc9049a033800075ab1994a88d48ab3bb481d0"}, "originalPosition": 77}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUxMjM1Njg3", "url": "https://github.com/prestodb/presto/pull/13972#pullrequestreview-351235687", "createdAt": "2020-01-31T00:41:03Z", "commit": {"oid": "8fe485fb56dbf00782c4fb3c23448cf61f42ac59"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMVQwMDo0MTowNFrOFj-eGw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMVQwMDo0MTowNFrOFj-eGw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzI2Nzk5NQ==", "bodyText": "Is this still necessary? Where is this used other than here?", "url": "https://github.com/prestodb/presto/pull/13972#discussion_r373267995", "createdAt": "2020-01-31T00:41:04Z", "author": {"login": "rongrong"}, "path": "presto-main/src/main/java/com/facebook/presto/metadata/StaticFunctionNamespaceStore.java", "diffHunk": "@@ -70,7 +70,7 @@ private void loadFunctionNamespaceManager(File file)\n         String functionNamespaceManagerName = properties.remove(\"function-namespace-manager.name\");\n         checkState(functionNamespaceManagerName != null, \"Function namespace configuration %s does not contain function-namespace-manager.name\", file.getAbsoluteFile());\n \n-        String functionNamespaces = properties.remove(\"serving-namespaces\");\n+        String functionNamespaces = properties.get(\"serving-namespaces\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8fe485fb56dbf00782c4fb3c23448cf61f42ac59"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b3b2a0a161296125139ab2b6ba731501cb214404", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/b3b2a0a161296125139ab2b6ba731501cb214404", "committedDate": "2020-02-03T23:24:48Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}, "afterCommit": {"oid": "805d3879d47ce914c2f91ee65e7ba71493f2e991", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/805d3879d47ce914c2f91ee65e7ba71493f2e991", "committedDate": "2020-02-03T23:44:02Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "805d3879d47ce914c2f91ee65e7ba71493f2e991", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/805d3879d47ce914c2f91ee65e7ba71493f2e991", "committedDate": "2020-02-03T23:44:02Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}, "afterCommit": {"oid": "a67348bd415f8430dd853a484f181d4d8b579ab6", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/a67348bd415f8430dd853a484f181d4d8b579ab6", "committedDate": "2020-02-03T23:46:43Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a67348bd415f8430dd853a484f181d4d8b579ab6", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/a67348bd415f8430dd853a484f181d4d8b579ab6", "committedDate": "2020-02-03T23:46:43Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}, "afterCommit": {"oid": "a46e39ad9e1f95466e8e6c140327dc4c0744ae09", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/a46e39ad9e1f95466e8e6c140327dc4c0744ae09", "committedDate": "2020-02-03T23:50:53Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a46e39ad9e1f95466e8e6c140327dc4c0744ae09", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/a46e39ad9e1f95466e8e6c140327dc4c0744ae09", "committedDate": "2020-02-03T23:50:53Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}, "afterCommit": {"oid": "94893519cb83622c153060c63f9f50a5c9316a8f", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/94893519cb83622c153060c63f9f50a5c9316a8f", "committedDate": "2020-02-04T01:33:11Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "94893519cb83622c153060c63f9f50a5c9316a8f", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/94893519cb83622c153060c63f9f50a5c9316a8f", "committedDate": "2020-02-04T01:33:11Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}, "afterCommit": {"oid": "a379330c3194db842d9ec4137741348053719e7b", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/a379330c3194db842d9ec4137741348053719e7b", "committedDate": "2020-02-04T21:56:44Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a379330c3194db842d9ec4137741348053719e7b", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/a379330c3194db842d9ec4137741348053719e7b", "committedDate": "2020-02-04T21:56:44Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}, "afterCommit": {"oid": "cc97d781ca2dc2681b2a1a59f2c56111d8a7d381", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/cc97d781ca2dc2681b2a1a59f2c56111d8a7d381", "committedDate": "2020-02-04T23:13:27Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cc97d781ca2dc2681b2a1a59f2c56111d8a7d381", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/cc97d781ca2dc2681b2a1a59f2c56111d8a7d381", "committedDate": "2020-02-04T23:13:27Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}, "afterCommit": {"oid": "fb0385ec35ca99aee0f2808704d926a087626e4a", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/fb0385ec35ca99aee0f2808704d926a087626e4a", "committedDate": "2020-02-04T23:13:50Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fb0385ec35ca99aee0f2808704d926a087626e4a", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/fb0385ec35ca99aee0f2808704d926a087626e4a", "committedDate": "2020-02-04T23:13:50Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}, "afterCommit": {"oid": "4e4061d2c4e38d13cfa5516fbfcd70c752b54bc1", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/4e4061d2c4e38d13cfa5516fbfcd70c752b54bc1", "committedDate": "2020-02-05T00:23:47Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4e4061d2c4e38d13cfa5516fbfcd70c752b54bc1", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/4e4061d2c4e38d13cfa5516fbfcd70c752b54bc1", "committedDate": "2020-02-05T00:23:47Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}, "afterCommit": {"oid": "8fa9882cd28202e9232caf46a13937f365ccde86", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/8fa9882cd28202e9232caf46a13937f365ccde86", "committedDate": "2020-02-05T00:26:03Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8fa9882cd28202e9232caf46a13937f365ccde86", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/8fa9882cd28202e9232caf46a13937f365ccde86", "committedDate": "2020-02-05T00:26:03Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}, "afterCommit": {"oid": "5886b0cac18eb64764ea28fc2e5b596fc4a9e17c", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/5886b0cac18eb64764ea28fc2e5b596fc4a9e17c", "committedDate": "2020-02-05T00:29:05Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5886b0cac18eb64764ea28fc2e5b596fc4a9e17c", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/5886b0cac18eb64764ea28fc2e5b596fc4a9e17c", "committedDate": "2020-02-05T00:29:05Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}, "afterCommit": {"oid": "fb6a27fcd813b2cf3df22e2f22a87a8dbe1f8c63", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/fb6a27fcd813b2cf3df22e2f22a87a8dbe1f8c63", "committedDate": "2020-02-05T00:30:53Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fb6a27fcd813b2cf3df22e2f22a87a8dbe1f8c63", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/fb6a27fcd813b2cf3df22e2f22a87a8dbe1f8c63", "committedDate": "2020-02-05T00:30:53Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}, "afterCommit": {"oid": "70cebd18546e5ea66e6cbc7239b60d8a81e81ada", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/70cebd18546e5ea66e6cbc7239b60d8a81e81ada", "committedDate": "2020-02-05T00:33:58Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "70cebd18546e5ea66e6cbc7239b60d8a81e81ada", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/70cebd18546e5ea66e6cbc7239b60d8a81e81ada", "committedDate": "2020-02-05T00:33:58Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}, "afterCommit": {"oid": "d2b63328f7aaf28d688e590a4b105c0ce709d3b0", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/d2b63328f7aaf28d688e590a4b105c0ce709d3b0", "committedDate": "2020-02-05T00:52:13Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d2b63328f7aaf28d688e590a4b105c0ce709d3b0", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/d2b63328f7aaf28d688e590a4b105c0ce709d3b0", "committedDate": "2020-02-05T00:52:13Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}, "afterCommit": {"oid": "30d4f4d9e2eea6259bebeb1702365440f90b0b35", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/30d4f4d9e2eea6259bebeb1702365440f90b0b35", "committedDate": "2020-02-05T00:54:16Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "30d4f4d9e2eea6259bebeb1702365440f90b0b35", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/30d4f4d9e2eea6259bebeb1702365440f90b0b35", "committedDate": "2020-02-05T00:54:16Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}, "afterCommit": {"oid": "df2e4c46dd30117ae9425536f72b305fe7dbcf86", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/df2e4c46dd30117ae9425536f72b305fe7dbcf86", "committedDate": "2020-02-05T00:56:05Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "df2e4c46dd30117ae9425536f72b305fe7dbcf86", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/df2e4c46dd30117ae9425536f72b305fe7dbcf86", "committedDate": "2020-02-05T00:56:05Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}, "afterCommit": {"oid": "66030ff9e7adeb2c8a1683a17109267bc4046676", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/66030ff9e7adeb2c8a1683a17109267bc4046676", "committedDate": "2020-02-05T01:03:20Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "66030ff9e7adeb2c8a1683a17109267bc4046676", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/66030ff9e7adeb2c8a1683a17109267bc4046676", "committedDate": "2020-02-05T01:03:20Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}, "afterCommit": {"oid": "2d0840bf857b43ec43d11874631def3f56264227", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/2d0840bf857b43ec43d11874631def3f56264227", "committedDate": "2020-02-05T01:42:07Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2d0840bf857b43ec43d11874631def3f56264227", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/2d0840bf857b43ec43d11874631def3f56264227", "committedDate": "2020-02-05T01:42:07Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}, "afterCommit": {"oid": "a3d735dd3be3540b6f3295eb7952fa1c92e3078a", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/a3d735dd3be3540b6f3295eb7952fa1c92e3078a", "committedDate": "2020-02-05T01:45:00Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a3d735dd3be3540b6f3295eb7952fa1c92e3078a", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/a3d735dd3be3540b6f3295eb7952fa1c92e3078a", "committedDate": "2020-02-05T01:45:00Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}, "afterCommit": {"oid": "954c85f9ecde2fc96f1da2db69e50f2317fcad1a", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/954c85f9ecde2fc96f1da2db69e50f2317fcad1a", "committedDate": "2020-02-05T01:47:40Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "954c85f9ecde2fc96f1da2db69e50f2317fcad1a", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/954c85f9ecde2fc96f1da2db69e50f2317fcad1a", "committedDate": "2020-02-05T01:47:40Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}, "afterCommit": {"oid": "94564c13e95c9411b9c42444fde46aa9cf2a186b", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/94564c13e95c9411b9c42444fde46aa9cf2a186b", "committedDate": "2020-02-05T01:49:03Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "94564c13e95c9411b9c42444fde46aa9cf2a186b", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/94564c13e95c9411b9c42444fde46aa9cf2a186b", "committedDate": "2020-02-05T01:49:03Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}, "afterCommit": {"oid": "cb93e235d192b62cbce8fe3119a5b60ce04f025b", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/cb93e235d192b62cbce8fe3119a5b60ce04f025b", "committedDate": "2020-02-05T02:02:39Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cb93e235d192b62cbce8fe3119a5b60ce04f025b", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/cb93e235d192b62cbce8fe3119a5b60ce04f025b", "committedDate": "2020-02-05T02:02:39Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}, "afterCommit": {"oid": "3eaa756d53781cde3f2c7507567069ae9935f56d", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/3eaa756d53781cde3f2c7507567069ae9935f56d", "committedDate": "2020-02-05T02:04:06Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3eaa756d53781cde3f2c7507567069ae9935f56d", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/3eaa756d53781cde3f2c7507567069ae9935f56d", "committedDate": "2020-02-05T02:04:06Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}, "afterCommit": {"oid": "3a8405d7a480b37f8610347af6158b3504b676c9", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/3a8405d7a480b37f8610347af6158b3504b676c9", "committedDate": "2020-02-05T02:08:35Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3a8405d7a480b37f8610347af6158b3504b676c9", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/3a8405d7a480b37f8610347af6158b3504b676c9", "committedDate": "2020-02-05T02:08:35Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}, "afterCommit": {"oid": "270b9008d7203dc6d28d7bdca46c7d73ced83539", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/270b9008d7203dc6d28d7bdca46c7d73ced83539", "committedDate": "2020-02-05T21:34:22Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "270b9008d7203dc6d28d7bdca46c7d73ced83539", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/270b9008d7203dc6d28d7bdca46c7d73ced83539", "committedDate": "2020-02-05T21:34:22Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}, "afterCommit": {"oid": "8bf748e23ee8f3763e68a917f004cc7927157c44", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/8bf748e23ee8f3763e68a917f004cc7927157c44", "committedDate": "2020-02-05T23:20:06Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU0MTcwODAx", "url": "https://github.com/prestodb/presto/pull/13972#pullrequestreview-354170801", "createdAt": "2020-02-06T02:40:20Z", "commit": {"oid": "e15bb39f9c3071b7d938b03b98b6648eea9a79fd"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNlQwMjo0MDoyMVrOFmNuVg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNlQwMjo0MDoyMVrOFmNuVg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTYxNTA2Mg==", "bodyText": "So we will not provide a convenient initialization from config files anymore? People have to manually insert values to the db?", "url": "https://github.com/prestodb/presto/pull/13972#discussion_r375615062", "createdAt": "2020-02-06T02:40:21Z", "author": {"login": "rongrong"}, "path": "presto-function-namespace-managers/src/main/java/com/facebook/presto/functionNamespace/db/DbFunctionNamespaceManagerConfig.java", "diffHunk": "@@ -52,25 +39,6 @@ public DbFunctionNamespaceManagerConfig setFunctionNamespacesTableName(String fu\n         return this;\n     }\n \n-    @NotNull\n-    public List<CatalogSchemaName> getDefaultFunctionNamespaces()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e15bb39f9c3071b7d938b03b98b6648eea9a79fd"}, "originalPosition": 35}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU0MTcxMzQx", "url": "https://github.com/prestodb/presto/pull/13972#pullrequestreview-354171341", "createdAt": "2020-02-06T02:42:28Z", "commit": {"oid": "8bf748e23ee8f3763e68a917f004cc7927157c44"}, "state": "COMMENTED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNlQwMjo0MjoyOFrOFmNwLQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNlQwMjo0ODo1MlrOFmN1KA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTYxNTUzMw==", "bodyText": "Presto provides a MySQL-based ...  I don't think it's enabled \"by default\". You need to configure it to use it.", "url": "https://github.com/prestodb/presto/pull/13972#discussion_r375615533", "createdAt": "2020-02-06T02:42:28Z", "author": {"login": "rongrong"}, "path": "presto-docs/src/main/sphinx/admin/function-namespace-managers.rst", "diffHunk": "@@ -0,0 +1,34 @@\n+===========================\n+Function Namespace Managers\n+===========================\n+\n+.. warning::\n+\n+    This is an experimental feature being actively developed. The way\n+    Function Namespace Managers are configured might be changed.\n+\n+Function namespace managers support storing and retrieving user-defined\n+functions with a persistent storage, allowing users to create, alter,\n+and delete functions, as well as to reference them within queries.\n+\n+Presto by default supports a MySQL-based function namespace manager.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8bf748e23ee8f3763e68a917f004cc7927157c44"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTYxNTczNg==", "bodyText": "Let's use maybe \"test\" or \"example\" rather than the word \"prod\". Maybe double check what other examples are using.", "url": "https://github.com/prestodb/presto/pull/13972#discussion_r375615736", "createdAt": "2020-02-06T02:43:20Z", "author": {"login": "rongrong"}, "path": "presto-docs/src/main/sphinx/admin/function-namespace-managers.rst", "diffHunk": "@@ -0,0 +1,34 @@\n+===========================\n+Function Namespace Managers\n+===========================\n+\n+.. warning::\n+\n+    This is an experimental feature being actively developed. The way\n+    Function Namespace Managers are configured might be changed.\n+\n+Function namespace managers support storing and retrieving user-defined\n+functions with a persistent storage, allowing users to create, alter,\n+and delete functions, as well as to reference them within queries.\n+\n+Presto by default supports a MySQL-based function namespace manager.\n+It is pluggable and can be configured by an administrator.\n+\n+To instantiate a MySQL-based function namespace manager with id\n+``prod``, add a file ``etc/function-namespace/prod.properties``", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8bf748e23ee8f3763e68a917f004cc7927157c44"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTYxNTgwNg==", "bodyText": "xdb?", "url": "https://github.com/prestodb/presto/pull/13972#discussion_r375615806", "createdAt": "2020-02-06T02:43:39Z", "author": {"login": "rongrong"}, "path": "presto-docs/src/main/sphinx/admin/function-namespace-managers.rst", "diffHunk": "@@ -0,0 +1,34 @@\n+===========================\n+Function Namespace Managers\n+===========================\n+\n+.. warning::\n+\n+    This is an experimental feature being actively developed. The way\n+    Function Namespace Managers are configured might be changed.\n+\n+Function namespace managers support storing and retrieving user-defined\n+functions with a persistent storage, allowing users to create, alter,\n+and delete functions, as well as to reference them within queries.\n+\n+Presto by default supports a MySQL-based function namespace manager.\n+It is pluggable and can be configured by an administrator.\n+\n+To instantiate a MySQL-based function namespace manager with id\n+``prod``, add a file ``etc/function-namespace/prod.properties``\n+with the following contents::\n+\n+    function-namespace-manager.name=xdb", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8bf748e23ee8f3763e68a917f004cc7927157c44"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTYxNjM3MQ==", "bodyText": "I thought this is only configuring catalog, how does it work with catalog1.schema1?", "url": "https://github.com/prestodb/presto/pull/13972#discussion_r375616371", "createdAt": "2020-02-06T02:46:31Z", "author": {"login": "rongrong"}, "path": "presto-docs/src/main/sphinx/admin/function-namespace-managers.rst", "diffHunk": "@@ -0,0 +1,34 @@\n+===========================\n+Function Namespace Managers\n+===========================\n+\n+.. warning::\n+\n+    This is an experimental feature being actively developed. The way\n+    Function Namespace Managers are configured might be changed.\n+\n+Function namespace managers support storing and retrieving user-defined\n+functions with a persistent storage, allowing users to create, alter,\n+and delete functions, as well as to reference them within queries.\n+\n+Presto by default supports a MySQL-based function namespace manager.\n+It is pluggable and can be configured by an administrator.\n+\n+To instantiate a MySQL-based function namespace manager with id\n+``prod``, add a file ``etc/function-namespace/prod.properties``\n+with the following contents::\n+\n+    function-namespace-manager.name=xdb\n+    serving-catalogs=catalog1.schema1,catalog2", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8bf748e23ee8f3763e68a917f004cc7927157c44"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTYxNjc0Ng==", "bodyText": "If you are planning to go with each function namespace manager will manage full catalog, just use the same model as connectors where the name of the file is the catalog name, and each config will manage a single catalog. Otherwise the naming is really confusing. Does the name of the config file mean anything?", "url": "https://github.com/prestodb/presto/pull/13972#discussion_r375616746", "createdAt": "2020-02-06T02:48:30Z", "author": {"login": "rongrong"}, "path": "presto-docs/src/main/sphinx/admin/function-namespace-managers.rst", "diffHunk": "@@ -0,0 +1,34 @@\n+===========================\n+Function Namespace Managers\n+===========================\n+\n+.. warning::\n+\n+    This is an experimental feature being actively developed. The way\n+    Function Namespace Managers are configured might be changed.\n+\n+Function namespace managers support storing and retrieving user-defined\n+functions with a persistent storage, allowing users to create, alter,\n+and delete functions, as well as to reference them within queries.\n+\n+Presto by default supports a MySQL-based function namespace manager.\n+It is pluggable and can be configured by an administrator.\n+\n+To instantiate a MySQL-based function namespace manager with id\n+``prod``, add a file ``etc/function-namespace/prod.properties``\n+with the following contents::\n+\n+    function-namespace-manager.name=xdb\n+    serving-catalogs=catalog1.schema1,catalog2", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTYxNjM3MQ=="}, "originalCommit": {"oid": "8bf748e23ee8f3763e68a917f004cc7927157c44"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTYxNjgwOA==", "bodyText": "I think you want to use db or mysql", "url": "https://github.com/prestodb/presto/pull/13972#discussion_r375616808", "createdAt": "2020-02-06T02:48:52Z", "author": {"login": "rongrong"}, "path": "presto-docs/src/main/sphinx/admin/function-namespace-managers.rst", "diffHunk": "@@ -0,0 +1,34 @@\n+===========================\n+Function Namespace Managers\n+===========================\n+\n+.. warning::\n+\n+    This is an experimental feature being actively developed. The way\n+    Function Namespace Managers are configured might be changed.\n+\n+Function namespace managers support storing and retrieving user-defined\n+functions with a persistent storage, allowing users to create, alter,\n+and delete functions, as well as to reference them within queries.\n+\n+Presto by default supports a MySQL-based function namespace manager.\n+It is pluggable and can be configured by an administrator.\n+\n+To instantiate a MySQL-based function namespace manager with id\n+``prod``, add a file ``etc/function-namespace/prod.properties``\n+with the following contents::\n+\n+    function-namespace-manager.name=xdb\n+    serving-catalogs=catalog1.schema1,catalog2\n+\n+\n+Configuration Reference\n+-----------------------\n+=========================================== ================================================================================================\n+Name                                        Description\n+=========================================== ================================================================================================\n+``function-namespace-manager.name``         The type of the function namespace manager to instantiate. Currently, only ``xdb`` is supported.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8bf748e23ee8f3763e68a917f004cc7927157c44"}, "originalPosition": 30}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8bf748e23ee8f3763e68a917f004cc7927157c44", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/8bf748e23ee8f3763e68a917f004cc7927157c44", "committedDate": "2020-02-05T23:20:06Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}, "afterCommit": {"oid": "89ca96c3fdc874ea15dd8d40fb891396ad4c703d", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/89ca96c3fdc874ea15dd8d40fb891396ad4c703d", "committedDate": "2020-02-06T05:48:18Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "89ca96c3fdc874ea15dd8d40fb891396ad4c703d", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/89ca96c3fdc874ea15dd8d40fb891396ad4c703d", "committedDate": "2020-02-06T05:48:18Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}, "afterCommit": {"oid": "3a900df04d6622e47880764f0916ead5cdc937f2", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/3a900df04d6622e47880764f0916ead5cdc937f2", "committedDate": "2020-02-06T06:06:27Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3a900df04d6622e47880764f0916ead5cdc937f2", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/3a900df04d6622e47880764f0916ead5cdc937f2", "committedDate": "2020-02-06T06:06:27Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}, "afterCommit": {"oid": "0a6fee7f5aeae1f082f241794f79dcf7ae574405", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/0a6fee7f5aeae1f082f241794f79dcf7ae574405", "committedDate": "2020-02-06T06:58:45Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0a6fee7f5aeae1f082f241794f79dcf7ae574405", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/0a6fee7f5aeae1f082f241794f79dcf7ae574405", "committedDate": "2020-02-06T06:58:45Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}, "afterCommit": {"oid": "8b3951d81bf4a55e8b48d30ed630cf3f741b780c", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/8b3951d81bf4a55e8b48d30ed630cf3f741b780c", "committedDate": "2020-02-06T07:31:17Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8b3951d81bf4a55e8b48d30ed630cf3f741b780c", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/8b3951d81bf4a55e8b48d30ed630cf3f741b780c", "committedDate": "2020-02-06T07:31:17Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}, "afterCommit": {"oid": "c75825be099843e69bc7446f3cc134192a21397c", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/c75825be099843e69bc7446f3cc134192a21397c", "committedDate": "2020-02-06T18:58:03Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c75825be099843e69bc7446f3cc134192a21397c", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/c75825be099843e69bc7446f3cc134192a21397c", "committedDate": "2020-02-06T18:58:03Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}, "afterCommit": {"oid": "39e64e7357b8c25d87ba180adadcf01219ad5fbf", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/39e64e7357b8c25d87ba180adadcf01219ad5fbf", "committedDate": "2020-02-06T19:14:30Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "39e64e7357b8c25d87ba180adadcf01219ad5fbf", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/39e64e7357b8c25d87ba180adadcf01219ad5fbf", "committedDate": "2020-02-06T19:14:30Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}, "afterCommit": {"oid": "f994598f2071067328384f0dfeb5d729601ad61d", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/f994598f2071067328384f0dfeb5d729601ad61d", "committedDate": "2020-02-06T19:20:30Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f994598f2071067328384f0dfeb5d729601ad61d", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/f994598f2071067328384f0dfeb5d729601ad61d", "committedDate": "2020-02-06T19:20:30Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}, "afterCommit": {"oid": "fa0943879d0be3801b6dca8a8df28ca4e450cc90", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/fa0943879d0be3801b6dca8a8df28ca4e450cc90", "committedDate": "2020-02-06T19:24:33Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fa0943879d0be3801b6dca8a8df28ca4e450cc90", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/fa0943879d0be3801b6dca8a8df28ca4e450cc90", "committedDate": "2020-02-06T19:24:33Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}, "afterCommit": {"oid": "6241b0e9c280e7e95ac4ba5c4015017b0018a82a", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/6241b0e9c280e7e95ac4ba5c4015017b0018a82a", "committedDate": "2020-02-06T19:53:36Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU0NzI1ODIz", "url": "https://github.com/prestodb/presto/pull/13972#pullrequestreview-354725823", "createdAt": "2020-02-06T19:49:10Z", "commit": {"oid": "fa0943879d0be3801b6dca8a8df28ca4e450cc90"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNlQxOTo0OToxMVrOFmoDbg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNlQxOTo1NToyNFrOFmoOrw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjA0NjQ0Ng==", "bodyText": "two MySQL tables will be created?", "url": "https://github.com/prestodb/presto/pull/13972#discussion_r376046446", "createdAt": "2020-02-06T19:49:11Z", "author": {"login": "rongrong"}, "path": "presto-docs/src/main/sphinx/admin/function-namespace-managers.rst", "diffHunk": "@@ -0,0 +1,50 @@\n+===========================\n+Function Namespace Managers\n+===========================\n+\n+.. warning::\n+\n+    This is an experimental feature being actively developed. The way\n+    Function Namespace Managers are configured might be changed.\n+\n+Function namespace managers support storing and retrieving user-defined\n+functions with a persistent storage, allowing users to create, alter,\n+and delete functions, as well as to reference them within queries.\n+\n+Presto provides a MySQL-based function namespace manager. It is\n+pluggable and can be configured by an administrator.\n+\n+To instantiate a MySQL-based function namespace manager that manages\n+catalog ``example``, administrator needs to first have a running MySQL\n+server. Suppose the MySQL server can be reached at ``localhost:1080``,\n+add a file ``etc/function-namespace/example.properties`` with the\n+following contents::\n+\n+    function-namespace-manager.name=mysql\n+    database_url=localhost:1080\n+\n+When Presto first starts with the above MySQL function namespace\n+manager configuration, two MySQL tables are created.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fa0943879d0be3801b6dca8a8df28ca4e450cc90"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjA0NzA3NQ==", "bodyText": "I think it's clearer to add the function namespace and functions table here in the config. That way later you can describe what tables are created better.", "url": "https://github.com/prestodb/presto/pull/13972#discussion_r376047075", "createdAt": "2020-02-06T19:50:34Z", "author": {"login": "rongrong"}, "path": "presto-docs/src/main/sphinx/admin/function-namespace-managers.rst", "diffHunk": "@@ -0,0 +1,50 @@\n+===========================\n+Function Namespace Managers\n+===========================\n+\n+.. warning::\n+\n+    This is an experimental feature being actively developed. The way\n+    Function Namespace Managers are configured might be changed.\n+\n+Function namespace managers support storing and retrieving user-defined\n+functions with a persistent storage, allowing users to create, alter,\n+and delete functions, as well as to reference them within queries.\n+\n+Presto provides a MySQL-based function namespace manager. It is\n+pluggable and can be configured by an administrator.\n+\n+To instantiate a MySQL-based function namespace manager that manages\n+catalog ``example``, administrator needs to first have a running MySQL\n+server. Suppose the MySQL server can be reached at ``localhost:1080``,\n+add a file ``etc/function-namespace/example.properties`` with the\n+following contents::\n+\n+    function-namespace-manager.name=mysql", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fa0943879d0be3801b6dca8a8df28ca4e450cc90"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjA0NzQ1MQ==", "bodyText": "Use the configured table name from the example config instead.\nThe concept of \"function namespace\" was never officially introduced and defined. Please give a better explanation. What does \"all function namespaces\" mean? Maybe \"allowed function namespaces\"?", "url": "https://github.com/prestodb/presto/pull/13972#discussion_r376047451", "createdAt": "2020-02-06T19:51:25Z", "author": {"login": "rongrong"}, "path": "presto-docs/src/main/sphinx/admin/function-namespace-managers.rst", "diffHunk": "@@ -0,0 +1,50 @@\n+===========================\n+Function Namespace Managers\n+===========================\n+\n+.. warning::\n+\n+    This is an experimental feature being actively developed. The way\n+    Function Namespace Managers are configured might be changed.\n+\n+Function namespace managers support storing and retrieving user-defined\n+functions with a persistent storage, allowing users to create, alter,\n+and delete functions, as well as to reference them within queries.\n+\n+Presto provides a MySQL-based function namespace manager. It is\n+pluggable and can be configured by an administrator.\n+\n+To instantiate a MySQL-based function namespace manager that manages\n+catalog ``example``, administrator needs to first have a running MySQL\n+server. Suppose the MySQL server can be reached at ``localhost:1080``,\n+add a file ``etc/function-namespace/example.properties`` with the\n+following contents::\n+\n+    function-namespace-manager.name=mysql\n+    database_url=localhost:1080\n+\n+When Presto first starts with the above MySQL function namespace\n+manager configuration, two MySQL tables are created.\n+\n+- ``function_namespaces``: Stores all function namespaces.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fa0943879d0be3801b6dca8a8df28ca4e450cc90"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjA0OTMyNw==", "bodyText": "@kaikalur Can you take a look at the documentation for create / alter / drop function? Thanks!", "url": "https://github.com/prestodb/presto/pull/13972#discussion_r376049327", "createdAt": "2020-02-06T19:55:24Z", "author": {"login": "rongrong"}, "path": "presto-docs/src/main/sphinx/sql/alter-function.rst", "diffHunk": "@@ -0,0 +1,47 @@\n+==============", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6241b0e9c280e7e95ac4ba5c4015017b0018a82a"}, "originalPosition": 1}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU0NzMxMzc0", "url": "https://github.com/prestodb/presto/pull/13972#pullrequestreview-354731374", "createdAt": "2020-02-06T19:57:59Z", "commit": {"oid": "6241b0e9c280e7e95ac4ba5c4015017b0018a82a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNlQxOTo1ODowMFrOFmoTkw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNlQxOTo1ODowMFrOFmoTkw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjA1MDU3OQ==", "bodyText": "So we support overloading?!", "url": "https://github.com/prestodb/presto/pull/13972#discussion_r376050579", "createdAt": "2020-02-06T19:58:00Z", "author": {"login": "kaikalur"}, "path": "presto-docs/src/main/sphinx/sql/alter-function.rst", "diffHunk": "@@ -0,0 +1,47 @@\n+==============\n+ALTER FUNCTION\n+==============\n+\n+Synopsis\n+--------\n+\n+.. code-block:: none\n+\n+    ALTER FUNCTION qualified_function_name [ ( parameter_type[, ...] ) ]\n+    RETURNS NULL ON NULL INPUT | CALLED ON NULL INPUT\n+\n+\n+Description\n+-----------\n+\n+Alter the definition of an existing function.\n+\n+Each ``ALTER FUNCTION`` statement can only modify one function\n+at a time. If multiple functions are matched by not specifying\n+the parameter type list, the query would fail.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6241b0e9c280e7e95ac4ba5c4015017b0018a82a"}, "originalPosition": 21}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU0NzMzOTEw", "url": "https://github.com/prestodb/presto/pull/13972#pullrequestreview-354733910", "createdAt": "2020-02-06T20:02:09Z", "commit": {"oid": "6241b0e9c280e7e95ac4ba5c4015017b0018a82a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNlQyMDowMjowOVrOFmobbw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNlQyMDowMjowOVrOFmobbw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjA1MjU5MQ==", "bodyText": "I will simply say something like - 'if a function with identical signature exists, this will quietly replace that'. It's not just the error message.", "url": "https://github.com/prestodb/presto/pull/13972#discussion_r376052591", "createdAt": "2020-02-06T20:02:09Z", "author": {"login": "kaikalur"}, "path": "presto-docs/src/main/sphinx/sql/create-function.rst", "diffHunk": "@@ -0,0 +1,83 @@\n+===============\n+CREATE FUNCTION\n+===============\n+\n+Synopsis\n+--------\n+\n+.. code-block:: none\n+\n+    CREATE [ OR REPLACE ] FUNCTION\n+    qualified_function_name (\n+      parameter_name parameter_type\n+      [, ...]\n+    )\n+    RETURNS return_type\n+    [ COMMENT function_description ]\n+    [ LANGUAGE language ]\n+    [ DETERMINISTIC | NOT DETERMINISTIC ]\n+    [ RETURNS NULL ON NULL INPUT | CALLED ON NULL INPUT ]\n+    [ RETURN expression ]\n+\n+\n+Description\n+-----------\n+\n+Create a new function with the specified definition.\n+\n+Each function is uniquely identified by its qualified function name\n+and its parameter type list. ``qualified_function_name`` needs to be in\n+the format of ``catalog.schema.function_name``.\n+\n+To create a function, the function namespace as identified by\n+``catalog.schema`` needs to managed by a\n+:doc:`/admin/function-namespace-managers`.\n+\n+The optional ``OR REPLACE`` clause causes the ``ALREADY_EXISTS`` error\n+to be suppressed if the function already exists.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6241b0e9c280e7e95ac4ba5c4015017b0018a82a"}, "originalPosition": 37}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU0NzM0MzQw", "url": "https://github.com/prestodb/presto/pull/13972#pullrequestreview-354734340", "createdAt": "2020-02-06T20:02:47Z", "commit": {"oid": "6241b0e9c280e7e95ac4ba5c4015017b0018a82a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNlQyMDowMjo0OFrOFmocwQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNlQyMDowMjo0OFrOFmocwQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjA1MjkyOQ==", "bodyText": "Match or assignment-compatible? For example, I can return 0 for a double returning function?", "url": "https://github.com/prestodb/presto/pull/13972#discussion_r376052929", "createdAt": "2020-02-06T20:02:48Z", "author": {"login": "kaikalur"}, "path": "presto-docs/src/main/sphinx/sql/create-function.rst", "diffHunk": "@@ -0,0 +1,83 @@\n+===============\n+CREATE FUNCTION\n+===============\n+\n+Synopsis\n+--------\n+\n+.. code-block:: none\n+\n+    CREATE [ OR REPLACE ] FUNCTION\n+    qualified_function_name (\n+      parameter_name parameter_type\n+      [, ...]\n+    )\n+    RETURNS return_type\n+    [ COMMENT function_description ]\n+    [ LANGUAGE language ]\n+    [ DETERMINISTIC | NOT DETERMINISTIC ]\n+    [ RETURNS NULL ON NULL INPUT | CALLED ON NULL INPUT ]\n+    [ RETURN expression ]\n+\n+\n+Description\n+-----------\n+\n+Create a new function with the specified definition.\n+\n+Each function is uniquely identified by its qualified function name\n+and its parameter type list. ``qualified_function_name`` needs to be in\n+the format of ``catalog.schema.function_name``.\n+\n+To create a function, the function namespace as identified by\n+``catalog.schema`` needs to managed by a\n+:doc:`/admin/function-namespace-managers`.\n+\n+The optional ``OR REPLACE`` clause causes the ``ALREADY_EXISTS`` error\n+to be suppressed if the function already exists.\n+\n+The ``return_type`` needs to match the actual type of the routine body\n+``expression``, without performing type coercion.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6241b0e9c280e7e95ac4ba5c4015017b0018a82a"}, "originalPosition": 40}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU0NzM2MDE2", "url": "https://github.com/prestodb/presto/pull/13972#pullrequestreview-354736016", "createdAt": "2020-02-06T20:05:27Z", "commit": {"oid": "6241b0e9c280e7e95ac4ba5c4015017b0018a82a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNlQyMDowNToyOFrOFmoh5g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNlQyMDowNToyOFrOFmoh5g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjA1NDI0Ng==", "bodyText": "modify -> specify", "url": "https://github.com/prestodb/presto/pull/13972#discussion_r376054246", "createdAt": "2020-02-06T20:05:28Z", "author": {"login": "kaikalur"}, "path": "presto-docs/src/main/sphinx/sql/create-function.rst", "diffHunk": "@@ -0,0 +1,83 @@\n+===============\n+CREATE FUNCTION\n+===============\n+\n+Synopsis\n+--------\n+\n+.. code-block:: none\n+\n+    CREATE [ OR REPLACE ] FUNCTION\n+    qualified_function_name (\n+      parameter_name parameter_type\n+      [, ...]\n+    )\n+    RETURNS return_type\n+    [ COMMENT function_description ]\n+    [ LANGUAGE language ]\n+    [ DETERMINISTIC | NOT DETERMINISTIC ]\n+    [ RETURNS NULL ON NULL INPUT | CALLED ON NULL INPUT ]\n+    [ RETURN expression ]\n+\n+\n+Description\n+-----------\n+\n+Create a new function with the specified definition.\n+\n+Each function is uniquely identified by its qualified function name\n+and its parameter type list. ``qualified_function_name`` needs to be in\n+the format of ``catalog.schema.function_name``.\n+\n+To create a function, the function namespace as identified by\n+``catalog.schema`` needs to managed by a\n+:doc:`/admin/function-namespace-managers`.\n+\n+The optional ``OR REPLACE`` clause causes the ``ALREADY_EXISTS`` error\n+to be suppressed if the function already exists.\n+\n+The ``return_type`` needs to match the actual type of the routine body\n+``expression``, without performing type coercion.\n+\n+A set of routine characteristics can be specified to decorate the\n+function and modify its behavior. Each kind of routine", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6241b0e9c280e7e95ac4ba5c4015017b0018a82a"}, "originalPosition": 43}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU0NzM2OTUz", "url": "https://github.com/prestodb/presto/pull/13972#pullrequestreview-354736953", "createdAt": "2020-02-06T20:07:02Z", "commit": {"oid": "6241b0e9c280e7e95ac4ba5c4015017b0018a82a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNlQyMDowNzowMlrOFmokog==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNlQyMDowNzowMlrOFmokog==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjA1NDk0Ng==", "bodyText": "Be more explicit - specifies that the function is not deterministic. Also, if there is a default, mention it.", "url": "https://github.com/prestodb/presto/pull/13972#discussion_r376054946", "createdAt": "2020-02-06T20:07:02Z", "author": {"login": "kaikalur"}, "path": "presto-docs/src/main/sphinx/sql/create-function.rst", "diffHunk": "@@ -0,0 +1,83 @@\n+===============\n+CREATE FUNCTION\n+===============\n+\n+Synopsis\n+--------\n+\n+.. code-block:: none\n+\n+    CREATE [ OR REPLACE ] FUNCTION\n+    qualified_function_name (\n+      parameter_name parameter_type\n+      [, ...]\n+    )\n+    RETURNS return_type\n+    [ COMMENT function_description ]\n+    [ LANGUAGE language ]\n+    [ DETERMINISTIC | NOT DETERMINISTIC ]\n+    [ RETURNS NULL ON NULL INPUT | CALLED ON NULL INPUT ]\n+    [ RETURN expression ]\n+\n+\n+Description\n+-----------\n+\n+Create a new function with the specified definition.\n+\n+Each function is uniquely identified by its qualified function name\n+and its parameter type list. ``qualified_function_name`` needs to be in\n+the format of ``catalog.schema.function_name``.\n+\n+To create a function, the function namespace as identified by\n+``catalog.schema`` needs to managed by a\n+:doc:`/admin/function-namespace-managers`.\n+\n+The optional ``OR REPLACE`` clause causes the ``ALREADY_EXISTS`` error\n+to be suppressed if the function already exists.\n+\n+The ``return_type`` needs to match the actual type of the routine body\n+``expression``, without performing type coercion.\n+\n+A set of routine characteristics can be specified to decorate the\n+function and modify its behavior. Each kind of routine\n+characteristic can be specified at most once.\n+\n+============================ ======================== ================================================================\n+Routine Characteristic       Default Value            Description\n+============================ ======================== ================================================================\n+Language clause              SQL                      The language in which the function is defined.\n+Deterministic characteristic NOT DETERMINISTIC        Whether the function is deterministic. ``NOT DETERMINISTIC``\n+                                                      means that the function is possibly non-deterministic.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6241b0e9c280e7e95ac4ba5c4015017b0018a82a"}, "originalPosition": 51}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU0NzM3MTYw", "url": "https://github.com/prestodb/presto/pull/13972#pullrequestreview-354737160", "createdAt": "2020-02-06T20:07:21Z", "commit": {"oid": "6241b0e9c280e7e95ac4ba5c4015017b0018a82a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNlQyMDowNzoyMlrOFmolTw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNlQyMDowNzoyMlrOFmolTw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjA1NTExOQ==", "bodyText": "Similarly here - please specify default", "url": "https://github.com/prestodb/presto/pull/13972#discussion_r376055119", "createdAt": "2020-02-06T20:07:22Z", "author": {"login": "kaikalur"}, "path": "presto-docs/src/main/sphinx/sql/create-function.rst", "diffHunk": "@@ -0,0 +1,83 @@\n+===============\n+CREATE FUNCTION\n+===============\n+\n+Synopsis\n+--------\n+\n+.. code-block:: none\n+\n+    CREATE [ OR REPLACE ] FUNCTION\n+    qualified_function_name (\n+      parameter_name parameter_type\n+      [, ...]\n+    )\n+    RETURNS return_type\n+    [ COMMENT function_description ]\n+    [ LANGUAGE language ]\n+    [ DETERMINISTIC | NOT DETERMINISTIC ]\n+    [ RETURNS NULL ON NULL INPUT | CALLED ON NULL INPUT ]\n+    [ RETURN expression ]\n+\n+\n+Description\n+-----------\n+\n+Create a new function with the specified definition.\n+\n+Each function is uniquely identified by its qualified function name\n+and its parameter type list. ``qualified_function_name`` needs to be in\n+the format of ``catalog.schema.function_name``.\n+\n+To create a function, the function namespace as identified by\n+``catalog.schema`` needs to managed by a\n+:doc:`/admin/function-namespace-managers`.\n+\n+The optional ``OR REPLACE`` clause causes the ``ALREADY_EXISTS`` error\n+to be suppressed if the function already exists.\n+\n+The ``return_type`` needs to match the actual type of the routine body\n+``expression``, without performing type coercion.\n+\n+A set of routine characteristics can be specified to decorate the\n+function and modify its behavior. Each kind of routine\n+characteristic can be specified at most once.\n+\n+============================ ======================== ================================================================\n+Routine Characteristic       Default Value            Description\n+============================ ======================== ================================================================\n+Language clause              SQL                      The language in which the function is defined.\n+Deterministic characteristic NOT DETERMINISTIC        Whether the function is deterministic. ``NOT DETERMINISTIC``\n+                                                      means that the function is possibly non-deterministic.\n+Null-call clause             CALLED ON NULL INPUT     The behavior of the function in which ``null`` is supplied as\n+                                                      the value of at least one argument.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6241b0e9c280e7e95ac4ba5c4015017b0018a82a"}, "originalPosition": 53}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6241b0e9c280e7e95ac4ba5c4015017b0018a82a", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/6241b0e9c280e7e95ac4ba5c4015017b0018a82a", "committedDate": "2020-02-06T19:53:36Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}, "afterCommit": {"oid": "0778fbb7067c8b37bc22e24cf3086484817d02c8", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/0778fbb7067c8b37bc22e24cf3086484817d02c8", "committedDate": "2020-02-06T20:56:26Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7e42bc006905d07f060e442f472ded92ade97c0d", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/7e42bc006905d07f060e442f472ded92ade97c0d", "committedDate": "2020-02-06T21:04:00Z", "message": "Remove dependency of presto-sql-function from presto-main\n\n- Rename module presto-sql-function to\n  presto-function-namespace-managers.\n- Move InMemoryFunctionNamespaceManager and\n  TestFunctionNamespaceManager to presto-function-namespace-managers."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0778fbb7067c8b37bc22e24cf3086484817d02c8", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/0778fbb7067c8b37bc22e24cf3086484817d02c8", "committedDate": "2020-02-06T20:56:26Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}, "afterCommit": {"oid": "8afaf4cc3b8f4529ace6d8e247c45b6cab8866fa", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/8afaf4cc3b8f4529ace6d8e247c45b6cab8866fa", "committedDate": "2020-02-06T21:04:00Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU0ODE3Njk5", "url": "https://github.com/prestodb/presto/pull/13972#pullrequestreview-354817699", "createdAt": "2020-02-06T22:28:13Z", "commit": {"oid": "235958c444891ec9cc23451cb901424400b727fd"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNlQyMjoyODoyN1rOFmsaIg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNlQyMjo0MzozNFrOFmsw5w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjExNzc5NA==", "bodyText": "catalogName as well?", "url": "https://github.com/prestodb/presto/pull/13972#discussion_r376117794", "createdAt": "2020-02-06T22:28:27Z", "author": {"login": "rongrong"}, "path": "presto-spi/src/main/java/com/facebook/presto/spi/function/FunctionNamespaceManagerFactory.java", "diffHunk": "@@ -21,5 +21,5 @@\n \n     FunctionHandleResolver getHandleResolver();\n \n-    FunctionNamespaceManager<?> create(Map<String, String> config);\n+    FunctionNamespaceManager<?> create(String catalog, Map<String, String> config);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "235958c444891ec9cc23451cb901424400b727fd"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjEyMTc0Ng==", "bodyText": "This seems to be more related to the catalog config commit. But it's fine to keep it here as well.", "url": "https://github.com/prestodb/presto/pull/13972#discussion_r376121746", "createdAt": "2020-02-06T22:38:32Z", "author": {"login": "rongrong"}, "path": "presto-function-namespace-managers/src/main/java/com/facebook/presto/functionNamespace/AbstractSqlInvokedFunctionNamespaceManager.java", "diffHunk": "@@ -43,19 +45,22 @@\n import static com.google.common.base.Preconditions.checkArgument;\n import static com.google.common.collect.ImmutableList.toImmutableList;\n import static com.google.common.collect.ImmutableMap.toImmutableMap;\n+import static java.util.Objects.requireNonNull;\n import static java.util.concurrent.TimeUnit.MILLISECONDS;\n \n public abstract class AbstractSqlInvokedFunctionNamespaceManager\n         implements FunctionNamespaceManager<SqlInvokedFunction>\n {\n     private final ConcurrentMap<FunctionNamespaceTransactionHandle, FunctionCollection> transactions = new ConcurrentHashMap<>();\n \n+    private final String catalogName;\n     private final LoadingCache<QualifiedFunctionName, Collection<SqlInvokedFunction>> functions;\n     private final LoadingCache<SqlFunctionHandle, FunctionMetadata> metadataByHandle;\n     private final LoadingCache<SqlFunctionHandle, ScalarFunctionImplementation> implementationByHandle;\n \n-    public AbstractSqlInvokedFunctionNamespaceManager(SqlInvokedFunctionNamespaceManagerConfig config)\n+    public AbstractSqlInvokedFunctionNamespaceManager(String catalogName, SqlInvokedFunctionNamespaceManagerConfig config)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b6f2e8e547ff7e0c8a92ff35f7be76367c443973"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjEyMTk5MA==", "bodyText": "Do you want to add an optional message as well?", "url": "https://github.com/prestodb/presto/pull/13972#discussion_r376121990", "createdAt": "2020-02-06T22:39:12Z", "author": {"login": "rongrong"}, "path": "presto-function-namespace-managers/src/main/java/com/facebook/presto/functionNamespace/db/DbFunctionNamespaceManager.java", "diffHunk": "@@ -0,0 +1,285 @@\n+/*\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.facebook.presto.functionNamespace.db;\n+\n+import com.facebook.presto.functionNamespace.AbstractSqlInvokedFunctionNamespaceManager;\n+import com.facebook.presto.functionNamespace.InvalidFunctionHandleException;\n+import com.facebook.presto.functionNamespace.ServingCatalog;\n+import com.facebook.presto.functionNamespace.SqlInvokedFunctionNamespaceManagerConfig;\n+import com.facebook.presto.spi.CatalogSchemaName;\n+import com.facebook.presto.spi.PrestoException;\n+import com.facebook.presto.spi.function.AlterRoutineCharacteristics;\n+import com.facebook.presto.spi.function.FunctionMetadata;\n+import com.facebook.presto.spi.function.QualifiedFunctionName;\n+import com.facebook.presto.spi.function.RoutineCharacteristics;\n+import com.facebook.presto.spi.function.ScalarFunctionImplementation;\n+import com.facebook.presto.spi.function.Signature;\n+import com.facebook.presto.spi.function.SqlFunction;\n+import com.facebook.presto.spi.function.SqlFunctionHandle;\n+import com.facebook.presto.spi.function.SqlFunctionId;\n+import com.facebook.presto.spi.function.SqlInvokedFunction;\n+import com.facebook.presto.spi.type.TypeSignature;\n+import org.jdbi.v3.core.Jdbi;\n+import org.jdbi.v3.core.statement.SqlStatements;\n+\n+import javax.annotation.PostConstruct;\n+import javax.inject.Inject;\n+\n+import java.util.ArrayList;\n+import java.util.Collection;\n+import java.util.List;\n+import java.util.Optional;\n+\n+import static com.facebook.presto.spi.StandardErrorCode.ALREADY_EXISTS;\n+import static com.facebook.presto.spi.StandardErrorCode.AMBIGUOUS_FUNCTION_CALL;\n+import static com.facebook.presto.spi.StandardErrorCode.GENERIC_USER_ERROR;\n+import static com.facebook.presto.spi.StandardErrorCode.NOT_FOUND;\n+import static com.google.common.base.Preconditions.checkArgument;\n+import static com.google.common.base.Preconditions.checkState;\n+import static com.google.common.collect.ImmutableList.toImmutableList;\n+import static java.lang.Math.toIntExact;\n+import static java.lang.String.format;\n+import static java.util.Objects.requireNonNull;\n+import static java.util.concurrent.TimeUnit.SECONDS;\n+import static java.util.stream.Collectors.joining;\n+\n+public class DbFunctionNamespaceManager\n+        extends AbstractSqlInvokedFunctionNamespaceManager\n+{\n+    private static final int MAX_CATALOG_NAME_LENGTH = 128;\n+    private static final int MAX_SCHEMA_NAME_LENGTH = 128;\n+    private static final int MAX_FUNCTION_NAME_LENGTH = 256;\n+    private static final int MAX_PARAMETER_TYPES_LENGTH = 500;\n+    private static final int MAX_RETURN_TYPE_LENGTH = 256;\n+\n+    private final Jdbi jdbi;\n+    private final FunctionNamespaceDao functionNamespaceDao;\n+\n+    @Inject\n+    public DbFunctionNamespaceManager(\n+            Jdbi jdbi,\n+            FunctionNamespaceDao functionNamespaceDao,\n+            SqlInvokedFunctionNamespaceManagerConfig managerConfig,\n+            DbFunctionNamespaceManagerConfig dbManagerConfig,\n+            @ServingCatalog String catalogName)\n+    {\n+        super(catalogName, managerConfig);\n+        this.jdbi = requireNonNull(jdbi, \"jdbi is null\");\n+        this.functionNamespaceDao = requireNonNull(functionNamespaceDao, \"functionNamespaceDao is null\");\n+\n+        jdbi.getConfig(SqlStatements.class)\n+                .setQueryTimeout(toIntExact(dbManagerConfig.getQueryTimeout().roundTo(SECONDS)));\n+        jdbi.getConfig(FunctionNamespacesTableCustomizerFactory.Config.class)\n+                .setTableName(dbManagerConfig.getFunctionNamespacesTableName());\n+        jdbi.getConfig(SqlFunctionsTableCustomizerFactory.Config.class)\n+                .setTableName(dbManagerConfig.getFunctionsTableName());\n+    }\n+\n+    @PostConstruct\n+    public void initialize()\n+    {\n+        functionNamespaceDao.createFunctionNamespacesTableIfNotExists();\n+        functionNamespaceDao.createSqlFunctionsTableIfNotExists();\n+    }\n+\n+    @Override\n+    public Collection<SqlInvokedFunction> listFunctions()\n+    {\n+        return functionNamespaceDao.listFunctions(getCatalog());\n+    }\n+\n+    @Override\n+    protected Collection<SqlInvokedFunction> fetchFunctionsDirect(QualifiedFunctionName functionName)\n+    {\n+        checkCatalog(functionName);\n+        return functionNamespaceDao.getFunctions(\n+                functionName.getFunctionNamespace().getCatalogName(),\n+                functionName.getFunctionNamespace().getSchemaName(),\n+                functionName.getFunctionName());\n+    }\n+\n+    @Override\n+    protected FunctionMetadata fetchFunctionMetadataDirect(SqlFunctionHandle functionHandle)\n+    {\n+        checkCatalog(functionHandle);\n+        Optional<SqlInvokedFunction> function = functionNamespaceDao.getFunction(functionHandle.getFunctionId(), functionHandle.getVersion());\n+        if (!function.isPresent()) {\n+            throw new InvalidFunctionHandleException(functionHandle);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b6f2e8e547ff7e0c8a92ff35f7be76367c443973"}, "originalPosition": 118}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjEyMzYyMw==", "bodyText": "Why not using \"unittest\" to keep it consistent?", "url": "https://github.com/prestodb/presto/pull/13972#discussion_r376123623", "createdAt": "2020-02-06T22:43:34Z", "author": {"login": "rongrong"}, "path": "presto-function-namespace-managers/src/main/java/com/facebook/presto/functionNamespace/testing/SqlInvokedFunctionTestUtils.java", "diffHunk": "@@ -34,7 +34,11 @@ private SqlInvokedFunctionTestUtils()\n     {\n     }\n \n-    public static final QualifiedFunctionName POWER_TOWER = QualifiedFunctionName.of(new CatalogSchemaName(\"unittest\", \"memory\"), \"power_tower\");\n+    public static final String TEST_CATALOG = \"test\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b6f2e8e547ff7e0c8a92ff35f7be76367c443973"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8afaf4cc3b8f4529ace6d8e247c45b6cab8866fa", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/8afaf4cc3b8f4529ace6d8e247c45b6cab8866fa", "committedDate": "2020-02-06T21:04:00Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}, "afterCommit": {"oid": "7fd053a5d20a2acc72ec68d38f888f753dea2259", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/7fd053a5d20a2acc72ec68d38f888f753dea2259", "committedDate": "2020-02-06T22:50:57Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7fd053a5d20a2acc72ec68d38f888f753dea2259", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/7fd053a5d20a2acc72ec68d38f888f753dea2259", "committedDate": "2020-02-06T22:50:57Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}, "afterCommit": {"oid": "9bde8ae4d53fc0bf5ed11cae2cba2ce4411f53cc", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/9bde8ae4d53fc0bf5ed11cae2cba2ce4411f53cc", "committedDate": "2020-02-06T23:37:17Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9bde8ae4d53fc0bf5ed11cae2cba2ce4411f53cc", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/9bde8ae4d53fc0bf5ed11cae2cba2ce4411f53cc", "committedDate": "2020-02-06T23:37:17Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}, "afterCommit": {"oid": "66f85fd8344a8233059d006abec73941d1b58a31", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/66f85fd8344a8233059d006abec73941d1b58a31", "committedDate": "2020-02-06T23:50:45Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "66f85fd8344a8233059d006abec73941d1b58a31", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/66f85fd8344a8233059d006abec73941d1b58a31", "committedDate": "2020-02-06T23:50:45Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}, "afterCommit": {"oid": "decb2c57af6d2e7e0a52c69cd3e6b12f86e67cc1", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/decb2c57af6d2e7e0a52c69cd3e6b12f86e67cc1", "committedDate": "2020-02-07T00:27:47Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "decb2c57af6d2e7e0a52c69cd3e6b12f86e67cc1", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/decb2c57af6d2e7e0a52c69cd3e6b12f86e67cc1", "committedDate": "2020-02-07T00:27:47Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}, "afterCommit": {"oid": "534720bdc7b33542fa6b58f6e4bbd6a936d95ace", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/534720bdc7b33542fa6b58f6e4bbd6a936d95ace", "committedDate": "2020-02-07T00:32:16Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "534720bdc7b33542fa6b58f6e4bbd6a936d95ace", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/534720bdc7b33542fa6b58f6e4bbd6a936d95ace", "committedDate": "2020-02-07T00:32:16Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}, "afterCommit": {"oid": "e060234e79306afe635e241af4d4f73d57237d3d", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/e060234e79306afe635e241af4d4f73d57237d3d", "committedDate": "2020-02-07T00:34:53Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e060234e79306afe635e241af4d4f73d57237d3d", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/e060234e79306afe635e241af4d4f73d57237d3d", "committedDate": "2020-02-07T00:34:53Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}, "afterCommit": {"oid": "4bc145191ffdf8652bc931b55b1675f1ac31544a", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/4bc145191ffdf8652bc931b55b1675f1ac31544a", "committedDate": "2020-02-07T01:17:23Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4bc145191ffdf8652bc931b55b1675f1ac31544a", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/4bc145191ffdf8652bc931b55b1675f1ac31544a", "committedDate": "2020-02-07T01:17:23Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}, "afterCommit": {"oid": "fe1d5adef437015c2419b47be618640e7cf2252f", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/fe1d5adef437015c2419b47be618640e7cf2252f", "committedDate": "2020-02-07T01:20:17Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fe1d5adef437015c2419b47be618640e7cf2252f", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/fe1d5adef437015c2419b47be618640e7cf2252f", "committedDate": "2020-02-07T01:20:17Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}, "afterCommit": {"oid": "2bdae4811ed00292409ae0f287efe515e47bdb4d", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/2bdae4811ed00292409ae0f287efe515e47bdb4d", "committedDate": "2020-02-07T01:20:50Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2bdae4811ed00292409ae0f287efe515e47bdb4d", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/2bdae4811ed00292409ae0f287efe515e47bdb4d", "committedDate": "2020-02-07T01:20:50Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}, "afterCommit": {"oid": "b9677048582609e49336b639dcd05667ddd454ff", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/b9677048582609e49336b639dcd05667ddd454ff", "committedDate": "2020-02-07T01:50:07Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b9677048582609e49336b639dcd05667ddd454ff", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/b9677048582609e49336b639dcd05667ddd454ff", "committedDate": "2020-02-07T01:50:07Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}, "afterCommit": {"oid": "55c94f60b1a186ac569c5df68736f9defdc85034", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/55c94f60b1a186ac569c5df68736f9defdc85034", "committedDate": "2020-02-07T02:10:12Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU0ODQ3NDMy", "url": "https://github.com/prestodb/presto/pull/13972#pullrequestreview-354847432", "createdAt": "2020-02-06T23:35:19Z", "commit": {"oid": "a547ef89e181b49823c655fd5fe751ffd052bafa"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNlQyMzozNToxOVrOFmt5RA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNlQyMzo0NjoxMFrOFmuGMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjE0MjE0OA==", "bodyText": "getCatalogName?", "url": "https://github.com/prestodb/presto/pull/13972#discussion_r376142148", "createdAt": "2020-02-06T23:35:19Z", "author": {"login": "rongrong"}, "path": "presto-function-namespace-managers/src/main/java/com/facebook/presto/functionNamespace/AbstractSqlInvokedFunctionNamespaceManager.java", "diffHunk": "@@ -141,17 +148,48 @@ public final FunctionHandle getFunctionHandle(Optional<? extends FunctionNamespa\n     @Override\n     public final FunctionMetadata getFunctionMetadata(FunctionHandle functionHandle)\n     {\n+        checkCatalog(functionHandle);\n         checkArgument(functionHandle instanceof SqlFunctionHandle, \"Unsupported FunctionHandle type '%s'\", functionHandle.getClass().getSimpleName());\n         return metadataByHandle.getUnchecked((SqlFunctionHandle) functionHandle);\n     }\n \n     @Override\n     public final ScalarFunctionImplementation getScalarFunctionImplementation(FunctionHandle functionHandle)\n     {\n+        checkCatalog(functionHandle);\n         checkArgument(functionHandle instanceof SqlFunctionHandle, \"Unsupported FunctionHandle type '%s'\", functionHandle.getClass().getSimpleName());\n         return implementationByHandle.getUnchecked((SqlFunctionHandle) functionHandle);\n     }\n \n+    protected String getCatalog()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a547ef89e181b49823c655fd5fe751ffd052bafa"}, "originalPosition": 73}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjE0MzAzOQ==", "bodyText": "Any reasoning behind this default value? It's a bit extreme is it? I can't imagine most MySQL queries to take longer than 2 seconds. Why do we want to expose this as a configuration to begin with? Why not just leave it to default?", "url": "https://github.com/prestodb/presto/pull/13972#discussion_r376143039", "createdAt": "2020-02-06T23:38:21Z", "author": {"login": "rongrong"}, "path": "presto-function-namespace-managers/src/main/java/com/facebook/presto/functionNamespace/db/DbFunctionNamespaceManagerConfig.java", "diffHunk": "@@ -0,0 +1,67 @@\n+/*\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.facebook.presto.functionNamespace.db;\n+\n+import com.facebook.airlift.configuration.Config;\n+import io.airlift.units.Duration;\n+\n+import javax.validation.constraints.NotNull;\n+\n+import static java.util.concurrent.TimeUnit.SECONDS;\n+\n+public class DbFunctionNamespaceManagerConfig\n+{\n+    private String functionNamespacesTableName = \"function_namespaces\";\n+    private String functionsTableName = \"sql_functions\";\n+    private Duration queryTimeout = new Duration(20, SECONDS);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a547ef89e181b49823c655fd5fe751ffd052bafa"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjE0NDY4OA==", "bodyText": "Can we define this (and the function_namespaces_table) as constant?", "url": "https://github.com/prestodb/presto/pull/13972#discussion_r376144688", "createdAt": "2020-02-06T23:43:34Z", "author": {"login": "rongrong"}, "path": "presto-function-namespace-managers/src/main/java/com/facebook/presto/functionNamespace/db/SqlFunctionsTableCustomizerFactory.java", "diffHunk": "@@ -0,0 +1,70 @@\n+/*\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.facebook.presto.functionNamespace.db;\n+\n+import org.jdbi.v3.core.config.JdbiConfig;\n+import org.jdbi.v3.sqlobject.customizer.SqlStatementCustomizer;\n+import org.jdbi.v3.sqlobject.customizer.SqlStatementCustomizerFactory;\n+\n+import java.lang.annotation.Annotation;\n+import java.lang.reflect.Method;\n+\n+import static java.util.Objects.requireNonNull;\n+\n+public class SqlFunctionsTableCustomizerFactory\n+        implements SqlStatementCustomizerFactory\n+{\n+    @Override\n+    public SqlStatementCustomizer createForType(Annotation annotation, Class<?> sqlObjectType)\n+    {\n+        return statement -> statement.define(\"sql_functions_table\", statement.getConfig(Config.class).getTableName());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a547ef89e181b49823c655fd5fe751ffd052bafa"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjE0NTQ1OA==", "bodyText": "I think we normally use \"nullCallClause\"", "url": "https://github.com/prestodb/presto/pull/13972#discussion_r376145458", "createdAt": "2020-02-06T23:46:10Z", "author": {"login": "rongrong"}, "path": "presto-spi/src/main/java/com/facebook/presto/spi/function/RoutineCharacteristics.java", "diffHunk": "@@ -45,26 +49,30 @@\n     private final Determinism determinism;\n     private final NullCallClause nullCallClause;\n \n-    private RoutineCharacteristics(\n-            Language language,\n-            Determinism determinism,\n-            NullCallClause nullCallClause)\n+    @JsonCreator\n+    public RoutineCharacteristics(\n+            @JsonProperty(\"language\") Optional<Language> language,\n+            @JsonProperty(\"determinism\") Optional<Determinism> determinism,\n+            @JsonProperty(\"null_call_clause\") Optional<NullCallClause> nullCallClause)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a547ef89e181b49823c655fd5fe751ffd052bafa"}, "originalPosition": 24}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU0OTA5NzEy", "url": "https://github.com/prestodb/presto/pull/13972#pullrequestreview-354909712", "createdAt": "2020-02-07T03:12:54Z", "commit": {"oid": "f55bdc7866ba8afc6cf56f2414911994843d0a02"}, "state": "COMMENTED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wN1QwMzoxMjo1NFrOFmxLPA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wN1QwMzozMToxMlrOFmxZ-Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjE5NTkwMA==", "bodyText": "This would cause compatibility issue when roll out to production. Make sure that's handled during deployment.", "url": "https://github.com/prestodb/presto/pull/13972#discussion_r376195900", "createdAt": "2020-02-07T03:12:54Z", "author": {"login": "rongrong"}, "path": "presto-function-namespace-managers/src/main/java/com/facebook/presto/functionNamespace/testing/SqlInvokedFunctionTestUtils.java", "diffHunk": "@@ -44,7 +44,7 @@ private SqlInvokedFunctionTestUtils()\n             parseTypeSignature(DOUBLE),\n             \"power tower\",\n             RoutineCharacteristics.builder().setDeterminism(DETERMINISTIC).build(),\n-            \"pow(x, x)\",\n+            \"RETURN pow(x, x)\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f55bdc7866ba8afc6cf56f2414911994843d0a02"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjE5ODc1NQ==", "bodyText": "signature includes return type and other information as well. So just say \"can be uniquely identified by its name and parameter type list\".", "url": "https://github.com/prestodb/presto/pull/13972#discussion_r376198755", "createdAt": "2020-02-07T03:26:32Z", "author": {"login": "rongrong"}, "path": "presto-docs/src/main/sphinx/admin/function-namespace-managers.rst", "diffHunk": "@@ -0,0 +1,76 @@\n+===========================\n+Function Namespace Managers\n+===========================\n+\n+.. warning::\n+\n+    This is an experimental feature being actively developed. The way\n+    Function Namespace Managers are configured might be changed.\n+\n+Function namespace managers support storing and retrieving user-defined\n+functions with a persistent storage, allowing users to create, alter,\n+and delete functions, as well as to reference them within queries.\n+\n+Function Namespace\n+------------------\n+\n+A function namespace is a catalog-schema name (i.e. ``example.test``)\n+in which each function can be uniquely identified by its signature,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "55c94f60b1a186ac569c5df68736f9defdc85034"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjE5OTEyMA==", "bodyText": "\"A function namespace\"? What's the behavior if I use a real catalog as function catalog? I think it will still work right? So potentially \"example.text\" can be a real catalog.schema as well.", "url": "https://github.com/prestodb/presto/pull/13972#discussion_r376199120", "createdAt": "2020-02-07T03:28:20Z", "author": {"login": "rongrong"}, "path": "presto-docs/src/main/sphinx/admin/function-namespace-managers.rst", "diffHunk": "@@ -0,0 +1,76 @@\n+===========================\n+Function Namespace Managers\n+===========================\n+\n+.. warning::\n+\n+    This is an experimental feature being actively developed. The way\n+    Function Namespace Managers are configured might be changed.\n+\n+Function namespace managers support storing and retrieving user-defined\n+functions with a persistent storage, allowing users to create, alter,\n+and delete functions, as well as to reference them within queries.\n+\n+Function Namespace\n+------------------\n+\n+A function namespace is a catalog-schema name (i.e. ``example.test``)\n+in which each function can be uniquely identified by its signature,\n+that is, its name and parameter type list.\n+\n+The function namespace, such as ``example.test``, is not a full-fledged", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "55c94f60b1a186ac569c5df68736f9defdc85034"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjE5OTIzOQ==", "bodyText": "What is a \"function namespace manager\"? Define it first.", "url": "https://github.com/prestodb/presto/pull/13972#discussion_r376199239", "createdAt": "2020-02-07T03:28:59Z", "author": {"login": "rongrong"}, "path": "presto-docs/src/main/sphinx/admin/function-namespace-managers.rst", "diffHunk": "@@ -0,0 +1,76 @@\n+===========================\n+Function Namespace Managers\n+===========================\n+\n+.. warning::\n+\n+    This is an experimental feature being actively developed. The way\n+    Function Namespace Managers are configured might be changed.\n+\n+Function namespace managers support storing and retrieving user-defined\n+functions with a persistent storage, allowing users to create, alter,\n+and delete functions, as well as to reference them within queries.\n+\n+Function Namespace\n+------------------\n+\n+A function namespace is a catalog-schema name (i.e. ``example.test``)\n+in which each function can be uniquely identified by its signature,\n+that is, its name and parameter type list.\n+\n+The function namespace, such as ``example.test``, is not a full-fledged\n+schema as it does not support storing tables and views, but only\n+functions.\n+\n+Each instance of function namespace manager manages a catalog. Creating", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "55c94f60b1a186ac569c5df68736f9defdc85034"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjE5OTM4NQ==", "bodyText": "Maybe \"Presto provides a MySQL-based function namespace manager implementation\".", "url": "https://github.com/prestodb/presto/pull/13972#discussion_r376199385", "createdAt": "2020-02-07T03:29:51Z", "author": {"login": "rongrong"}, "path": "presto-docs/src/main/sphinx/admin/function-namespace-managers.rst", "diffHunk": "@@ -0,0 +1,76 @@\n+===========================\n+Function Namespace Managers\n+===========================\n+\n+.. warning::\n+\n+    This is an experimental feature being actively developed. The way\n+    Function Namespace Managers are configured might be changed.\n+\n+Function namespace managers support storing and retrieving user-defined\n+functions with a persistent storage, allowing users to create, alter,\n+and delete functions, as well as to reference them within queries.\n+\n+Function Namespace\n+------------------\n+\n+A function namespace is a catalog-schema name (i.e. ``example.test``)\n+in which each function can be uniquely identified by its signature,\n+that is, its name and parameter type list.\n+\n+The function namespace, such as ``example.test``, is not a full-fledged\n+schema as it does not support storing tables and views, but only\n+functions.\n+\n+Each instance of function namespace manager manages a catalog. Creating\n+and managing schema in those catalogs are not supported.\n+\n+Configuration\n+-------------\n+\n+Presto provides a MySQL-based function namespace manager. It is", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "55c94f60b1a186ac569c5df68736f9defdc85034"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjE5OTY3Mw==", "bodyText": "I think you mean example_function_namespaces table here.", "url": "https://github.com/prestodb/presto/pull/13972#discussion_r376199673", "createdAt": "2020-02-07T03:31:12Z", "author": {"login": "rongrong"}, "path": "presto-docs/src/main/sphinx/admin/function-namespace-managers.rst", "diffHunk": "@@ -0,0 +1,76 @@\n+===========================\n+Function Namespace Managers\n+===========================\n+\n+.. warning::\n+\n+    This is an experimental feature being actively developed. The way\n+    Function Namespace Managers are configured might be changed.\n+\n+Function namespace managers support storing and retrieving user-defined\n+functions with a persistent storage, allowing users to create, alter,\n+and delete functions, as well as to reference them within queries.\n+\n+Function Namespace\n+------------------\n+\n+A function namespace is a catalog-schema name (i.e. ``example.test``)\n+in which each function can be uniquely identified by its signature,\n+that is, its name and parameter type list.\n+\n+The function namespace, such as ``example.test``, is not a full-fledged\n+schema as it does not support storing tables and views, but only\n+functions.\n+\n+Each instance of function namespace manager manages a catalog. Creating\n+and managing schema in those catalogs are not supported.\n+\n+Configuration\n+-------------\n+\n+Presto provides a MySQL-based function namespace manager. It is\n+pluggable and can be configured by an administrator.\n+\n+To instantiate a MySQL-based function namespace manager that manages\n+catalog ``example``, administrator needs to first have a running MySQL\n+server. Suppose the MySQL server can be reached at ``localhost:1080``,\n+add a file ``etc/function-namespace/example.properties`` with the\n+following contents::\n+\n+    function-namespace-manager.name=mysql\n+    database-url=localhost:1080\n+    function-namespaces-table-name=example_function_namespaces\n+    functions-table-name=example_sql_functions\n+\n+When Presto first starts with the above MySQL function namespace\n+manager configuration, two MySQL tables will be created if they do\n+not exist.\n+\n+- ``example_function_namespaces`` stores function namespaces of\n+  the catalog ``example``.\n+- ``example_sql_functions`` stores SQL-invoked functions of the\n+  catalog ``example``.\n+\n+If multiple function namespace managers are instantiated, they may use\n+the same set of tables, or different tables / MySQL databases.\n+\n+To create a new function namespace, insert into the\n+``function_namespaces`` table::", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "55c94f60b1a186ac569c5df68736f9defdc85034"}, "originalPosition": 58}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU1MjMwMTY2", "url": "https://github.com/prestodb/presto/pull/13972#pullrequestreview-355230166", "createdAt": "2020-02-07T15:21:08Z", "commit": {"oid": "55c94f60b1a186ac569c5df68736f9defdc85034"}, "state": "COMMENTED", "comments": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wN1QxNToyMTowOVrOFnAhcw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wN1QxNTozNjowOFrOFnBClg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjQ0NzM0Nw==", "bodyText": "What does pluggable mean here? Also, how else would it be configured if not by an administrator?", "url": "https://github.com/prestodb/presto/pull/13972#discussion_r376447347", "createdAt": "2020-02-07T15:21:09Z", "author": {"login": "rschlussel"}, "path": "presto-docs/src/main/sphinx/admin/function-namespace-managers.rst", "diffHunk": "@@ -0,0 +1,76 @@\n+===========================\n+Function Namespace Managers\n+===========================\n+\n+.. warning::\n+\n+    This is an experimental feature being actively developed. The way\n+    Function Namespace Managers are configured might be changed.\n+\n+Function namespace managers support storing and retrieving user-defined\n+functions with a persistent storage, allowing users to create, alter,\n+and delete functions, as well as to reference them within queries.\n+\n+Function Namespace\n+------------------\n+\n+A function namespace is a catalog-schema name (i.e. ``example.test``)\n+in which each function can be uniquely identified by its signature,\n+that is, its name and parameter type list.\n+\n+The function namespace, such as ``example.test``, is not a full-fledged\n+schema as it does not support storing tables and views, but only\n+functions.\n+\n+Each instance of function namespace manager manages a catalog. Creating\n+and managing schema in those catalogs are not supported.\n+\n+Configuration\n+-------------\n+\n+Presto provides a MySQL-based function namespace manager. It is\n+pluggable and can be configured by an administrator.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "55c94f60b1a186ac569c5df68736f9defdc85034"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjQ0OTIwMQ==", "bodyText": "should this table be example_function_namespaces?  We haven't mentioned the function_namespaces table yet", "url": "https://github.com/prestodb/presto/pull/13972#discussion_r376449201", "createdAt": "2020-02-07T15:24:24Z", "author": {"login": "rschlussel"}, "path": "presto-docs/src/main/sphinx/admin/function-namespace-managers.rst", "diffHunk": "@@ -0,0 +1,76 @@\n+===========================\n+Function Namespace Managers\n+===========================\n+\n+.. warning::\n+\n+    This is an experimental feature being actively developed. The way\n+    Function Namespace Managers are configured might be changed.\n+\n+Function namespace managers support storing and retrieving user-defined\n+functions with a persistent storage, allowing users to create, alter,\n+and delete functions, as well as to reference them within queries.\n+\n+Function Namespace\n+------------------\n+\n+A function namespace is a catalog-schema name (i.e. ``example.test``)\n+in which each function can be uniquely identified by its signature,\n+that is, its name and parameter type list.\n+\n+The function namespace, such as ``example.test``, is not a full-fledged\n+schema as it does not support storing tables and views, but only\n+functions.\n+\n+Each instance of function namespace manager manages a catalog. Creating\n+and managing schema in those catalogs are not supported.\n+\n+Configuration\n+-------------\n+\n+Presto provides a MySQL-based function namespace manager. It is\n+pluggable and can be configured by an administrator.\n+\n+To instantiate a MySQL-based function namespace manager that manages\n+catalog ``example``, administrator needs to first have a running MySQL\n+server. Suppose the MySQL server can be reached at ``localhost:1080``,\n+add a file ``etc/function-namespace/example.properties`` with the\n+following contents::\n+\n+    function-namespace-manager.name=mysql\n+    database-url=localhost:1080\n+    function-namespaces-table-name=example_function_namespaces\n+    functions-table-name=example_sql_functions\n+\n+When Presto first starts with the above MySQL function namespace\n+manager configuration, two MySQL tables will be created if they do\n+not exist.\n+\n+- ``example_function_namespaces`` stores function namespaces of\n+  the catalog ``example``.\n+- ``example_sql_functions`` stores SQL-invoked functions of the\n+  catalog ``example``.\n+\n+If multiple function namespace managers are instantiated, they may use\n+the same set of tables, or different tables / MySQL databases.\n+\n+To create a new function namespace, insert into the\n+``function_namespaces`` table::\n+\n+    INSERT INTO function_namespaces (catalog_name, schema_name)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "55c94f60b1a186ac569c5df68736f9defdc85034"}, "originalPosition": 60}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjQ1MDU5MQ==", "bodyText": "what do you mean that Creating and managing schema in those catalogs are not supported?  Don't you describe below how to do that?", "url": "https://github.com/prestodb/presto/pull/13972#discussion_r376450591", "createdAt": "2020-02-07T15:26:57Z", "author": {"login": "rschlussel"}, "path": "presto-docs/src/main/sphinx/admin/function-namespace-managers.rst", "diffHunk": "@@ -0,0 +1,76 @@\n+===========================\n+Function Namespace Managers\n+===========================\n+\n+.. warning::\n+\n+    This is an experimental feature being actively developed. The way\n+    Function Namespace Managers are configured might be changed.\n+\n+Function namespace managers support storing and retrieving user-defined\n+functions with a persistent storage, allowing users to create, alter,\n+and delete functions, as well as to reference them within queries.\n+\n+Function Namespace\n+------------------\n+\n+A function namespace is a catalog-schema name (i.e. ``example.test``)\n+in which each function can be uniquely identified by its signature,\n+that is, its name and parameter type list.\n+\n+The function namespace, such as ``example.test``, is not a full-fledged\n+schema as it does not support storing tables and views, but only\n+functions.\n+\n+Each instance of function namespace manager manages a catalog. Creating", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "55c94f60b1a186ac569c5df68736f9defdc85034"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjQ1MTQ3NA==", "bodyText": "I'm a bit confused about this.\n\nIf each function namespace manager only manages a single catalog, then why does the function_namespaces catalog take in both a catalog and schema name.\nAbove you said you can't add schemas", "url": "https://github.com/prestodb/presto/pull/13972#discussion_r376451474", "createdAt": "2020-02-07T15:28:33Z", "author": {"login": "rschlussel"}, "path": "presto-docs/src/main/sphinx/admin/function-namespace-managers.rst", "diffHunk": "@@ -0,0 +1,76 @@\n+===========================\n+Function Namespace Managers\n+===========================\n+\n+.. warning::\n+\n+    This is an experimental feature being actively developed. The way\n+    Function Namespace Managers are configured might be changed.\n+\n+Function namespace managers support storing and retrieving user-defined\n+functions with a persistent storage, allowing users to create, alter,\n+and delete functions, as well as to reference them within queries.\n+\n+Function Namespace\n+------------------\n+\n+A function namespace is a catalog-schema name (i.e. ``example.test``)\n+in which each function can be uniquely identified by its signature,\n+that is, its name and parameter type list.\n+\n+The function namespace, such as ``example.test``, is not a full-fledged\n+schema as it does not support storing tables and views, but only\n+functions.\n+\n+Each instance of function namespace manager manages a catalog. Creating\n+and managing schema in those catalogs are not supported.\n+\n+Configuration\n+-------------\n+\n+Presto provides a MySQL-based function namespace manager. It is\n+pluggable and can be configured by an administrator.\n+\n+To instantiate a MySQL-based function namespace manager that manages\n+catalog ``example``, administrator needs to first have a running MySQL\n+server. Suppose the MySQL server can be reached at ``localhost:1080``,\n+add a file ``etc/function-namespace/example.properties`` with the\n+following contents::\n+\n+    function-namespace-manager.name=mysql\n+    database-url=localhost:1080\n+    function-namespaces-table-name=example_function_namespaces\n+    functions-table-name=example_sql_functions\n+\n+When Presto first starts with the above MySQL function namespace\n+manager configuration, two MySQL tables will be created if they do\n+not exist.\n+\n+- ``example_function_namespaces`` stores function namespaces of\n+  the catalog ``example``.\n+- ``example_sql_functions`` stores SQL-invoked functions of the\n+  catalog ``example``.\n+\n+If multiple function namespace managers are instantiated, they may use\n+the same set of tables, or different tables / MySQL databases.\n+\n+To create a new function namespace, insert into the", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "55c94f60b1a186ac569c5df68736f9defdc85034"}, "originalPosition": 57}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjQ1MjU3Mw==", "bodyText": "nit: might -> can", "url": "https://github.com/prestodb/presto/pull/13972#discussion_r376452573", "createdAt": "2020-02-07T15:30:28Z", "author": {"login": "rschlussel"}, "path": "presto-docs/src/main/sphinx/sql/alter-function.rst", "diffHunk": "@@ -0,0 +1,49 @@\n+==============\n+ALTER FUNCTION\n+==============\n+\n+Synopsis\n+--------\n+\n+.. code-block:: none\n+\n+    ALTER FUNCTION qualified_function_name [ ( parameter_type[, ...] ) ]\n+    RETURNS NULL ON NULL INPUT | CALLED ON NULL INPUT\n+\n+\n+Description\n+-----------\n+\n+Alter the definition of an existing function.\n+\n+Parameter type list must be specified if multiple signatures exist\n+for the specified function name. Otherwise, the query would fail.\n+\n+If exactly one signature exists for the specified function name,\n+parameter type list might be omitted.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "55c94f60b1a186ac569c5df68736f9defdc85034"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjQ1Mjc1Mg==", "bodyText": "nit: remove Otherwise the query would fail", "url": "https://github.com/prestodb/presto/pull/13972#discussion_r376452752", "createdAt": "2020-02-07T15:30:46Z", "author": {"login": "rschlussel"}, "path": "presto-docs/src/main/sphinx/sql/alter-function.rst", "diffHunk": "@@ -0,0 +1,49 @@\n+==============\n+ALTER FUNCTION\n+==============\n+\n+Synopsis\n+--------\n+\n+.. code-block:: none\n+\n+    ALTER FUNCTION qualified_function_name [ ( parameter_type[, ...] ) ]\n+    RETURNS NULL ON NULL INPUT | CALLED ON NULL INPUT\n+\n+\n+Description\n+-----------\n+\n+Alter the definition of an existing function.\n+\n+Parameter type list must be specified if multiple signatures exist\n+for the specified function name. Otherwise, the query would fail.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "55c94f60b1a186ac569c5df68736f9defdc85034"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjQ1Mzc0NA==", "bodyText": "Maybe say that right now only modifying the null-call clause is supported.  Otherwise it's pretty surprising as a user to get to the end of this documentation and discover that mostly you can't modify the function.", "url": "https://github.com/prestodb/presto/pull/13972#discussion_r376453744", "createdAt": "2020-02-07T15:32:31Z", "author": {"login": "rschlussel"}, "path": "presto-docs/src/main/sphinx/sql/alter-function.rst", "diffHunk": "@@ -0,0 +1,49 @@\n+==============\n+ALTER FUNCTION\n+==============\n+\n+Synopsis\n+--------\n+\n+.. code-block:: none\n+\n+    ALTER FUNCTION qualified_function_name [ ( parameter_type[, ...] ) ]\n+    RETURNS NULL ON NULL INPUT | CALLED ON NULL INPUT\n+\n+\n+Description\n+-----------\n+\n+Alter the definition of an existing function.\n+\n+Parameter type list must be specified if multiple signatures exist\n+for the specified function name. Otherwise, the query would fail.\n+\n+If exactly one signature exists for the specified function name,\n+parameter type list might be omitted.\n+\n+A subset of routine characteristics, as defined in", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "55c94f60b1a186ac569c5df68736f9defdc85034"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjQ1NTUwNA==", "bodyText": "For all of these, what other (non-default) options are supported", "url": "https://github.com/prestodb/presto/pull/13972#discussion_r376455504", "createdAt": "2020-02-07T15:35:35Z", "author": {"login": "rschlussel"}, "path": "presto-docs/src/main/sphinx/sql/create-function.rst", "diffHunk": "@@ -0,0 +1,84 @@\n+===============\n+CREATE FUNCTION\n+===============\n+\n+Synopsis\n+--------\n+\n+.. code-block:: none\n+\n+    CREATE [ OR REPLACE ] FUNCTION\n+    qualified_function_name (\n+      parameter_name parameter_type\n+      [, ...]\n+    )\n+    RETURNS return_type\n+    [ COMMENT function_description ]\n+    [ LANGUAGE language ]\n+    [ DETERMINISTIC | NOT DETERMINISTIC ]\n+    [ RETURNS NULL ON NULL INPUT | CALLED ON NULL INPUT ]\n+    [ RETURN expression ]\n+\n+\n+Description\n+-----------\n+\n+Create a new function with the specified definition.\n+\n+Each function is uniquely identified by its qualified function name\n+and its parameter type list. ``qualified_function_name`` needs to be in\n+the format of ``catalog.schema.function_name``.\n+\n+To create a function, the function namespace as identified by\n+``catalog.schema`` needs to managed by a\n+:doc:`/admin/function-namespace-managers`.\n+\n+The optional ``OR REPLACE`` clause causes the query to quietly replace\n+the existing function if a function with the identical signature (function\n+name with parameter type list) exists.\n+\n+The ``return_type`` needs to match the actual type of the routine body\n+``expression``, without performing type coercion.\n+\n+A set of routine characteristics can be specified to decorate the\n+function and specify its behavior. Each kind of routine\n+characteristic can be specified at most once.\n+\n+============================ ======================== ================================================================\n+Routine Characteristic       Default Value            Description", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "55c94f60b1a186ac569c5df68736f9defdc85034"}, "originalPosition": 48}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjQ1NTgzMA==", "bodyText": "i think you mean IF EXISTS clause", "url": "https://github.com/prestodb/presto/pull/13972#discussion_r376455830", "createdAt": "2020-02-07T15:36:08Z", "author": {"login": "rschlussel"}, "path": "presto-docs/src/main/sphinx/sql/drop-function.rst", "diffHunk": "@@ -0,0 +1,43 @@\n+=============\n+DROP FUNCTION\n+=============\n+\n+Synopsis\n+--------\n+\n+.. code-block:: none\n+\n+    DROP FUNCTION [ IF EXISTS ] qualified_function_name [ ( parameter_type[, ...] ) ]\n+\n+\n+Description\n+-----------\n+\n+Drop an existing function.\n+\n+The optional ``OR REPLACE`` clause causes the ``NOT_FOUND`` error", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "55c94f60b1a186ac569c5df68736f9defdc85034"}, "originalPosition": 18}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "55c94f60b1a186ac569c5df68736f9defdc85034", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/55c94f60b1a186ac569c5df68736f9defdc85034", "committedDate": "2020-02-07T02:10:12Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}, "afterCommit": {"oid": "1009732e752c75ad5624e45c34d7c20a48179f0b", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/1009732e752c75ad5624e45c34d7c20a48179f0b", "committedDate": "2020-02-07T15:53:54Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1009732e752c75ad5624e45c34d7c20a48179f0b", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/1009732e752c75ad5624e45c34d7c20a48179f0b", "committedDate": "2020-02-07T15:53:54Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}, "afterCommit": {"oid": "0052c6c2de666ff278630ac65dd771efbfd984f0", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/0052c6c2de666ff278630ac65dd771efbfd984f0", "committedDate": "2020-02-07T15:59:51Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0052c6c2de666ff278630ac65dd771efbfd984f0", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/0052c6c2de666ff278630ac65dd771efbfd984f0", "committedDate": "2020-02-07T15:59:51Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}, "afterCommit": {"oid": "bd666b225ee077bc7000e72fc655000904cca71f", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/bd666b225ee077bc7000e72fc655000904cca71f", "committedDate": "2020-02-07T16:31:46Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9a25731ee5f73c0eb0a8dfdfb515f23132f4e956", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/9a25731ee5f73c0eb0a8dfdfb515f23132f4e956", "committedDate": "2020-02-07T16:33:35Z", "message": "Require function namespace manager to bind with catalog names"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e49addd0a7a98d489b5c696f2cb5dc2f2d849602", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/e49addd0a7a98d489b5c696f2cb5dc2f2d849602", "committedDate": "2020-02-07T16:33:37Z", "message": "Use Return statement as the body for SQL-invoked functions"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bd666b225ee077bc7000e72fc655000904cca71f", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/bd666b225ee077bc7000e72fc655000904cca71f", "committedDate": "2020-02-07T16:31:46Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}, "afterCommit": {"oid": "a45ced30c4226fb438371ae3222f9694e7f3baf5", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/a45ced30c4226fb438371ae3222f9694e7f3baf5", "committedDate": "2020-02-07T16:34:13Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU1MzExMjc2", "url": "https://github.com/prestodb/presto/pull/13972#pullrequestreview-355311276", "createdAt": "2020-02-07T17:19:27Z", "commit": {"oid": "a45ced30c4226fb438371ae3222f9694e7f3baf5"}, "state": "COMMENTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wN1QxNzoxOToyN1rOFnEUQw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wN1QxNzozOTo1M1rOFnE2aw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjUwOTUwNw==", "bodyText": "Let's be explicit about that since that was not obvious to me as well.", "url": "https://github.com/prestodb/presto/pull/13972#discussion_r376509507", "createdAt": "2020-02-07T17:19:27Z", "author": {"login": "sachdevs"}, "path": "presto-docs/src/main/sphinx/admin/function-namespace-managers.rst", "diffHunk": "@@ -0,0 +1,76 @@\n+===========================\n+Function Namespace Managers\n+===========================\n+\n+.. warning::\n+\n+    This is an experimental feature being actively developed. The way\n+    Function Namespace Managers are configured might be changed.\n+\n+Function namespace managers support storing and retrieving user-defined\n+functions with a persistent storage, allowing users to create, alter,\n+and delete functions, as well as to reference them within queries.\n+\n+Function Namespace\n+------------------\n+\n+A function namespace is a catalog-schema name (i.e. ``example.test``)\n+in which each function can be uniquely identified by its signature,\n+that is, its name and parameter type list.\n+\n+The function namespace, such as ``example.test``, is not a full-fledged\n+schema as it does not support storing tables and views, but only\n+functions.\n+\n+Each instance of function namespace manager manages a catalog. Creating", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjQ1MDU5MQ=="}, "originalCommit": {"oid": "55c94f60b1a186ac569c5df68736f9defdc85034"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjUxMjc1OA==", "bodyText": "Nit: I think you mean e.g. and not I.e.", "url": "https://github.com/prestodb/presto/pull/13972#discussion_r376512758", "createdAt": "2020-02-07T17:26:59Z", "author": {"login": "sachdevs"}, "path": "presto-docs/src/main/sphinx/admin/function-namespace-managers.rst", "diffHunk": "@@ -0,0 +1,78 @@\n+===========================\n+Function Namespace Managers\n+===========================\n+\n+.. warning::\n+\n+    This is an experimental feature being actively developed. The way\n+    Function Namespace Managers are configured might be changed.\n+\n+Function namespace managers support storing and retrieving user-defined\n+functions with a persistent storage, allowing users to create, alter,\n+and delete functions, as well as to reference them within queries.\n+\n+Function Namespace\n+------------------\n+\n+A function namespace is a catalog-schema name (i.e. ``example.test``)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a45ced30c4226fb438371ae3222f9694e7f3baf5"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjUxNDc4Mw==", "bodyText": "I had to read this a couple times to clarify. Maybe say that: a function namespace can be thought of as a schema for storing functions. However, it is not a full fledged schema as it does not support....", "url": "https://github.com/prestodb/presto/pull/13972#discussion_r376514783", "createdAt": "2020-02-07T17:31:33Z", "author": {"login": "sachdevs"}, "path": "presto-docs/src/main/sphinx/admin/function-namespace-managers.rst", "diffHunk": "@@ -0,0 +1,78 @@\n+===========================\n+Function Namespace Managers\n+===========================\n+\n+.. warning::\n+\n+    This is an experimental feature being actively developed. The way\n+    Function Namespace Managers are configured might be changed.\n+\n+Function namespace managers support storing and retrieving user-defined\n+functions with a persistent storage, allowing users to create, alter,\n+and delete functions, as well as to reference them within queries.\n+\n+Function Namespace\n+------------------\n+\n+A function namespace is a catalog-schema name (i.e. ``example.test``)\n+in which each function can be uniquely identified by its name and\n+parameter type list.\n+\n+A function namespace, such as ``example.test``, is not a full-fledged", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a45ced30c4226fb438371ae3222f9694e7f3baf5"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjUxNjQyNw==", "bodyText": "This was unclear to me. Does this simply mean that multiple function namespace managers can be configured to use the same tables?", "url": "https://github.com/prestodb/presto/pull/13972#discussion_r376516427", "createdAt": "2020-02-07T17:35:25Z", "author": {"login": "sachdevs"}, "path": "presto-docs/src/main/sphinx/admin/function-namespace-managers.rst", "diffHunk": "@@ -0,0 +1,78 @@\n+===========================\n+Function Namespace Managers\n+===========================\n+\n+.. warning::\n+\n+    This is an experimental feature being actively developed. The way\n+    Function Namespace Managers are configured might be changed.\n+\n+Function namespace managers support storing and retrieving user-defined\n+functions with a persistent storage, allowing users to create, alter,\n+and delete functions, as well as to reference them within queries.\n+\n+Function Namespace\n+------------------\n+\n+A function namespace is a catalog-schema name (i.e. ``example.test``)\n+in which each function can be uniquely identified by its name and\n+parameter type list.\n+\n+A function namespace, such as ``example.test``, is not a full-fledged\n+schema as it does not support storing tables and views, but only\n+functions.\n+\n+Each instance of function namespace manager manages a catalog. Creating\n+and managing schema in those catalogs are not supported.\n+\n+\n+Configuration\n+-------------\n+\n+Presto provides a MySQL-based function namespace manager\n+implementation.\n+\n+To instantiate a MySQL-based function namespace manager that manages\n+catalog ``example``, administrator needs to first have a running MySQL\n+server. Suppose the MySQL server can be reached at ``localhost:1080``,\n+add a file ``etc/function-namespace/example.properties`` with the\n+following contents::\n+\n+    function-namespace-manager.name=mysql\n+    database-url=localhost:1080\n+    function-namespaces-table-name=example_function_namespaces\n+    functions-table-name=example_sql_functions\n+\n+When Presto first starts with the above MySQL function namespace\n+manager configuration, two MySQL tables will be created if they do\n+not exist.\n+\n+- ``example_function_namespaces`` stores function namespaces of\n+  the catalog ``example``.\n+- ``example_sql_functions`` stores SQL-invoked functions of the\n+  catalog ``example``.\n+\n+If multiple function namespace managers are instantiated, they may use", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a45ced30c4226fb438371ae3222f9694e7f3baf5"}, "originalPosition": 55}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjUxODI1MQ==", "bodyText": "Instead of saying catalog-schema it may make more sense to use the same syntax as your example to be explicit like catalog.schema", "url": "https://github.com/prestodb/presto/pull/13972#discussion_r376518251", "createdAt": "2020-02-07T17:39:53Z", "author": {"login": "sachdevs"}, "path": "presto-docs/src/main/sphinx/admin/function-namespace-managers.rst", "diffHunk": "@@ -0,0 +1,78 @@\n+===========================\n+Function Namespace Managers\n+===========================\n+\n+.. warning::\n+\n+    This is an experimental feature being actively developed. The way\n+    Function Namespace Managers are configured might be changed.\n+\n+Function namespace managers support storing and retrieving user-defined\n+functions with a persistent storage, allowing users to create, alter,\n+and delete functions, as well as to reference them within queries.\n+\n+Function Namespace\n+------------------\n+\n+A function namespace is a catalog-schema name (i.e. ``example.test``)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjUxMjc1OA=="}, "originalCommit": {"oid": "a45ced30c4226fb438371ae3222f9694e7f3baf5"}, "originalPosition": 17}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a45ced30c4226fb438371ae3222f9694e7f3baf5", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/a45ced30c4226fb438371ae3222f9694e7f3baf5", "committedDate": "2020-02-07T16:34:13Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}, "afterCommit": {"oid": "5d5b438435504607bf7508008033395d39585f93", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/5d5b438435504607bf7508008033395d39585f93", "committedDate": "2020-02-07T21:42:59Z", "message": "Add documentation for SQL functions\n\n- Add documentation for CREATE FUNCTION, ALTER FUNCTION, and DROP\n  FUNCTION statements.\n- Add documentation for Function Namespace Managers configuration."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2407, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}