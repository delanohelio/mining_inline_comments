{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk5ODQzNjg5", "number": 14349, "title": "Fixing date type handling in Presto-Pinot Connector", "bodyText": "== NO RELEASE NOTE ==", "createdAt": "2020-04-06T19:01:27Z", "url": "https://github.com/prestodb/presto/pull/14349", "merged": true, "mergeCommit": {"oid": "99653c6e1989b2bb8cd5e20c59027950482a577d"}, "closed": true, "closedAt": "2020-04-09T09:07:59Z", "author": {"login": "xiangfu0"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcVDiFPABqjMyMDY4MDkzMTA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcV31pYABqjMyMTcyMTEwMzU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4cc9046aa5e9fed0ac74e9b69cc89bfee125b5eb", "author": {"user": {"login": "xiangfu0", "name": "Xiang Fu"}}, "url": "https://github.com/prestodb/presto/commit/4cc9046aa5e9fed0ac74e9b69cc89bfee125b5eb", "committedDate": "2020-04-06T18:58:09Z", "message": "Best effort to push down distinct count function to pinot"}, "afterCommit": {"oid": "d9a1598e91e266555765072cc4251fda16ccba1f", "author": {"user": {"login": "xiangfu0", "name": "Xiang Fu"}}, "url": "https://github.com/prestodb/presto/commit/d9a1598e91e266555765072cc4251fda16ccba1f", "committedDate": "2020-04-06T19:05:10Z", "message": "fixing date type in pinot-connector"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkwMzQ2OTA5", "url": "https://github.com/prestodb/presto/pull/14349#pullrequestreview-390346909", "createdAt": "2020-04-08T21:31:14Z", "commit": {"oid": "1b0ee4f3af13e039b8ba69f22d9621d79bf085d7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkwMzQ3MzU2", "url": "https://github.com/prestodb/presto/pull/14349#pullrequestreview-390347356", "createdAt": "2020-04-08T21:32:04Z", "commit": {"oid": "1b0ee4f3af13e039b8ba69f22d9621d79bf085d7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQyMTozMjowNFrOGDBwGQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQyMTozMjowNFrOGDBwGQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTgyNzYwOQ==", "bodyText": "Why parseDouble and then convert that to int instead of directly parsing to int ?", "url": "https://github.com/prestodb/presto/pull/14349#discussion_r405827609", "createdAt": "2020-04-08T21:32:04Z", "author": {"login": "agrawaldevesh"}, "path": "presto-pinot-toolkit/src/main/java/com/facebook/presto/pinot/PinotBrokerPageSource.java", "diffHunk": "@@ -147,6 +148,9 @@ else if (type instanceof DecimalType || type instanceof DoubleType) {\n             else if (type instanceof TimestampType) {\n                 type.writeLong(blockBuilder, parseLong(value));\n             }\n+            else if (type instanceof DateType) {\n+                blockBuilder.writeInt(parseDouble(value).intValue());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1b0ee4f3af13e039b8ba69f22d9621d79bf085d7"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkwNDE4ODI0", "url": "https://github.com/prestodb/presto/pull/14349#pullrequestreview-390418824", "createdAt": "2020-04-09T00:30:51Z", "commit": {"oid": "1b0ee4f3af13e039b8ba69f22d9621d79bf085d7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1b0ee4f3af13e039b8ba69f22d9621d79bf085d7", "author": {"user": {"login": "xiangfu0", "name": "Xiang Fu"}}, "url": "https://github.com/prestodb/presto/commit/1b0ee4f3af13e039b8ba69f22d9621d79bf085d7", "committedDate": "2020-04-06T22:47:01Z", "message": "fixing date type in pinot-connector"}, "afterCommit": {"oid": "996f85d9944b299d49b578e978882db2e817d31b", "author": {"user": {"login": "xiangfu0", "name": "Xiang Fu"}}, "url": "https://github.com/prestodb/presto/commit/996f85d9944b299d49b578e978882db2e817d31b", "committedDate": "2020-04-09T03:06:38Z", "message": "fixing date type in pinot-connector"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "afb83d90318d2d17edbad744e19277c41ea3fd96", "author": {"user": {"login": "xiangfu0", "name": "Xiang Fu"}}, "url": "https://github.com/prestodb/presto/commit/afb83d90318d2d17edbad744e19277c41ea3fd96", "committedDate": "2020-04-09T08:01:33Z", "message": "fixing date type in pinot-connector"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "996f85d9944b299d49b578e978882db2e817d31b", "author": {"user": {"login": "xiangfu0", "name": "Xiang Fu"}}, "url": "https://github.com/prestodb/presto/commit/996f85d9944b299d49b578e978882db2e817d31b", "committedDate": "2020-04-09T03:06:38Z", "message": "fixing date type in pinot-connector"}, "afterCommit": {"oid": "afb83d90318d2d17edbad744e19277c41ea3fd96", "author": {"user": {"login": "xiangfu0", "name": "Xiang Fu"}}, "url": "https://github.com/prestodb/presto/commit/afb83d90318d2d17edbad744e19277c41ea3fd96", "committedDate": "2020-04-09T08:01:33Z", "message": "fixing date type in pinot-connector"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1798, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}