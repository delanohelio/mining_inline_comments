{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU2MDAyNzQ2", "number": 14881, "title": "Simplify integration with Alluxio local cache", "bodyText": "Bumping Alluxio dependency to 2.2.2-2 to improve integration between Presto and Alluxio\n\nremove code redundancy on the presto-side and reuse code in Alluxio\nsimplify initialization of a new Alluxio File System instance\n\nCo-authored-by: Haoyuan Li haoyuan@alluxio.com\n== NO RELEASE NOTE ==", "createdAt": "2020-07-23T23:32:45Z", "url": "https://github.com/prestodb/presto/pull/14881", "merged": true, "mergeCommit": {"oid": "4a37013ba4c1095c23e50e76291b80f89e50bdb1"}, "closed": true, "closedAt": "2020-07-31T18:45:26Z", "author": {"login": "apc999"}, "timelineItems": {"totalCount": 16, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc4dM2-ABqjM1ODY0ODYxMTQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc6Xr0VAFqTQ1OTM0MTU2Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8a32558dd31e720f1ecee21ea1079a10a41d30c5", "author": {"user": {"login": "apc999", "name": "Bin Fan"}}, "url": "https://github.com/prestodb/presto/commit/8a32558dd31e720f1ecee21ea1079a10a41d30c5", "committedDate": "2020-07-23T20:52:02Z", "message": "Simplify integration with Alluxio local cache\n\nCo-authored-by: Haoyuan Li <haoyuan@alluxio.com>"}, "afterCommit": {"oid": "913cb0ce68f68cf5135c1572d781995cab24fb72", "author": {"user": {"login": "apc999", "name": "Bin Fan"}}, "url": "https://github.com/prestodb/presto/commit/913cb0ce68f68cf5135c1572d781995cab24fb72", "committedDate": "2020-07-25T18:36:15Z", "message": "Simplify integration with Alluxio local cache\n\nCo-authored-by: Haoyuan Li <haoyuan@alluxio.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "913cb0ce68f68cf5135c1572d781995cab24fb72", "author": {"user": {"login": "apc999", "name": "Bin Fan"}}, "url": "https://github.com/prestodb/presto/commit/913cb0ce68f68cf5135c1572d781995cab24fb72", "committedDate": "2020-07-25T18:36:15Z", "message": "Simplify integration with Alluxio local cache\n\nCo-authored-by: Haoyuan Li <haoyuan@alluxio.com>"}, "afterCommit": {"oid": "bae4b624b3915806745ea40b976a689b98e040ad", "author": {"user": {"login": "apc999", "name": "Bin Fan"}}, "url": "https://github.com/prestodb/presto/commit/bae4b624b3915806745ea40b976a689b98e040ad", "committedDate": "2020-07-28T00:16:28Z", "message": "Simplify integration with Alluxio local cache\n\nCo-authored-by: Haoyuan Li <haoyuan@alluxio.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bae4b624b3915806745ea40b976a689b98e040ad", "author": {"user": {"login": "apc999", "name": "Bin Fan"}}, "url": "https://github.com/prestodb/presto/commit/bae4b624b3915806745ea40b976a689b98e040ad", "committedDate": "2020-07-28T00:16:28Z", "message": "Simplify integration with Alluxio local cache\n\nCo-authored-by: Haoyuan Li <haoyuan@alluxio.com>"}, "afterCommit": {"oid": "b82f86b1129b0d95423686efb719017029992105", "author": {"user": {"login": "apc999", "name": "Bin Fan"}}, "url": "https://github.com/prestodb/presto/commit/b82f86b1129b0d95423686efb719017029992105", "committedDate": "2020-07-28T00:45:08Z", "message": "Simplify integration with Alluxio local cache\n\nCo-authored-by: Haoyuan Li <haoyuan@alluxio.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b82f86b1129b0d95423686efb719017029992105", "author": {"user": {"login": "apc999", "name": "Bin Fan"}}, "url": "https://github.com/prestodb/presto/commit/b82f86b1129b0d95423686efb719017029992105", "committedDate": "2020-07-28T00:45:08Z", "message": "Simplify integration with Alluxio local cache\n\nCo-authored-by: Haoyuan Li <haoyuan@alluxio.com>"}, "afterCommit": {"oid": "90cefdef06ceb35928a6f91f7bd0c562ec1322bf", "author": {"user": {"login": "apc999", "name": "Bin Fan"}}, "url": "https://github.com/prestodb/presto/commit/90cefdef06ceb35928a6f91f7bd0c562ec1322bf", "committedDate": "2020-07-28T00:46:13Z", "message": "Simplify integration with Alluxio local cache\n\nCo-authored-by: Haoyuan Li <haoyuan@alluxio.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU2MjkzMTAy", "url": "https://github.com/prestodb/presto/pull/14881#pullrequestreview-456293102", "createdAt": "2020-07-28T04:26:24Z", "commit": {"oid": "90cefdef06ceb35928a6f91f7bd0c562ec1322bf"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQwNDoyNjoyNVrOG38H4g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQwNDoyNjoyNVrOG38H4g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTMwOTkyMg==", "bodyText": "Why is hdfs not a supported filesystem?", "url": "https://github.com/prestodb/presto/pull/14881#discussion_r461309922", "createdAt": "2020-07-28T04:26:25Z", "author": {"login": "jainxrohit"}, "path": "presto-cache/src/test/java/com/facebook/presto/cache/alluxio/TestAlluxioCachingFileSystem.java", "diffHunk": "@@ -199,14 +252,13 @@ private void checkMetrics(MetricKey metricsKey, long expected)\n         assertEquals(MetricsSystem.meter(metricsKey.getName()).getCount() - baseline.getOrDefault(metricsKey.getName(), 0L), expected);\n     }\n \n-    private AlluxioCachingFileSystem cachingFileSystem(CacheConfig cacheConfig, AlluxioCacheConfig alluxioCacheConfig)\n+    private AlluxioCachingFileSystem cachingFileSystem(Configuration configuration)\n             throws URISyntaxException, IOException\n     {\n         Map<Path, byte[]> files = new HashMap<>();\n         files.put(new Path(testFilePath), data);\n-        Configuration configuration = getHdfsConfiguration(cacheConfig, alluxioCacheConfig);\n         ExtendedFileSystem testingFileSystem = new TestingFileSystem(files, configuration);\n-        URI uri = new URI(\"hdfs://test:8020/\");\n+        URI uri = new URI(\"alluxio://test:8020/\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "90cefdef06ceb35928a6f91f7bd0c562ec1322bf"}, "originalPosition": 109}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU2Mjk1NTI4", "url": "https://github.com/prestodb/presto/pull/14881#pullrequestreview-456295528", "createdAt": "2020-07-28T04:35:03Z", "commit": {"oid": "90cefdef06ceb35928a6f91f7bd0c562ec1322bf"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQwNDozNTowM1rOG38Qjw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQwNDozNTowM1rOG38Qjw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTMxMjE0Mw==", "bodyText": "Can we rename this to localCacheFileSystem?", "url": "https://github.com/prestodb/presto/pull/14881#discussion_r461312143", "createdAt": "2020-07-28T04:35:03Z", "author": {"login": "jainxrohit"}, "path": "presto-cache/src/main/java/com/facebook/presto/cache/alluxio/AlluxioCachingFileSystem.java", "diffHunk": "@@ -13,41 +13,23 @@\n  */\n package com.facebook.presto.cache.alluxio;\n \n-import alluxio.AlluxioURI;\n-import alluxio.client.file.FileInStream;\n-import alluxio.client.file.URIStatus;\n-import alluxio.client.file.cache.LocalCacheFileSystem;\n-import alluxio.conf.AlluxioProperties;\n-import alluxio.conf.InstancedConfiguration;\n-import alluxio.conf.PropertyKey;\n-import alluxio.conf.Source;\n-import alluxio.grpc.OpenFilePOptions;\n-import alluxio.hadoop.AbstractFileSystem;\n-import alluxio.hadoop.HadoopConfigurationUtils;\n-import alluxio.metrics.MetricsConfig;\n-import alluxio.metrics.MetricsSystem;\n-import alluxio.util.ConfigurationUtils;\n+import alluxio.hadoop.LocalCacheFileSystem;\n import com.facebook.presto.cache.CachingFileSystem;\n import com.facebook.presto.hive.HiveFileContext;\n import com.facebook.presto.hive.filesystem.ExtendedFileSystem;\n-import com.google.common.collect.ImmutableMap;\n import org.apache.hadoop.conf.Configuration;\n import org.apache.hadoop.fs.FSDataInputStream;\n+import org.apache.hadoop.fs.FileStatus;\n import org.apache.hadoop.fs.Path;\n \n import java.io.IOException;\n import java.net.URI;\n-import java.util.Map;\n-import java.util.Optional;\n-import java.util.Properties;\n-\n-import static java.util.Objects.requireNonNull;\n \n public class AlluxioCachingFileSystem\n         extends CachingFileSystem\n {\n     private final boolean cacheValidationEnabled;\n-    private AlluxioCachingFileSystemInternal cachingFileSystem;\n+    private LocalCacheFileSystem cachingFileSystem;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "90cefdef06ceb35928a6f91f7bd0c562ec1322bf"}, "originalPosition": 41}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU2Mjk3MDM1", "url": "https://github.com/prestodb/presto/pull/14881#pullrequestreview-456297035", "createdAt": "2020-07-28T04:40:27Z", "commit": {"oid": "90cefdef06ceb35928a6f91f7bd0c562ec1322bf"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQwNDo0MDoyN1rOG38V6A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQwNDo0MDoyN1rOG38V6A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTMxMzUxMg==", "bodyText": "Can we check for AccessDeniedException rather printing whole stack trace?", "url": "https://github.com/prestodb/presto/pull/14881#discussion_r461313512", "createdAt": "2020-07-28T04:40:27Z", "author": {"login": "jainxrohit"}, "path": "presto-cache/src/test/java/com/facebook/presto/cache/alluxio/TestAlluxioCachingFileSystem.java", "diffHunk": "@@ -182,6 +186,55 @@ public void testStress()\n         });\n     }\n \n+    @Test(timeOut = 30_000)\n+    public void testCreationFailure()\n+            throws Exception\n+    {\n+        File cacheDir = new File(cacheDirectory.getPath());\n+        cacheDir.setWritable(false);\n+        CacheConfig cacheConfig = new CacheConfig()\n+                .setCacheType(ALLUXIO)\n+                .setCachingEnabled(true)\n+                .setBaseDirectory(cacheDirectory);\n+        AlluxioCacheConfig alluxioCacheConfig = new AlluxioCacheConfig()\n+                .setMaxCacheSize(new DataSize(10, KILOBYTE));\n+        Configuration configuration = getHdfsConfiguration(cacheConfig, alluxioCacheConfig);\n+        try {\n+            cachingFileSystem(configuration);\n+        }\n+        catch (Exception e) {\n+            e.printStackTrace();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "90cefdef06ceb35928a6f91f7bd0c562ec1322bf"}, "originalPosition": 61}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "90cefdef06ceb35928a6f91f7bd0c562ec1322bf", "author": {"user": {"login": "apc999", "name": "Bin Fan"}}, "url": "https://github.com/prestodb/presto/commit/90cefdef06ceb35928a6f91f7bd0c562ec1322bf", "committedDate": "2020-07-28T00:46:13Z", "message": "Simplify integration with Alluxio local cache\n\nCo-authored-by: Haoyuan Li <haoyuan@alluxio.com>"}, "afterCommit": {"oid": "7ecfdefff8ffa9fef7bd74fb0644c962ec53a4be", "author": {"user": {"login": "apc999", "name": "Bin Fan"}}, "url": "https://github.com/prestodb/presto/commit/7ecfdefff8ffa9fef7bd74fb0644c962ec53a4be", "committedDate": "2020-07-28T21:14:19Z", "message": "Simplify integration with Alluxio local cache\n\nCo-authored-by: Haoyuan Li <haoyuan@alluxio.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU3MDYwNTky", "url": "https://github.com/prestodb/presto/pull/14881#pullrequestreview-457060592", "createdAt": "2020-07-28T22:02:44Z", "commit": {"oid": "7ecfdefff8ffa9fef7bd74fb0644c962ec53a4be"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQyMjowMjo0NFrOG4g-tA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQyMjowNToyNlrOG4hG5A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTkxMzc4MA==", "bodyText": "Just curious where this 65536 came from \ud83e\udd14. Maybe we could make it 0 since it's not used anyway?", "url": "https://github.com/prestodb/presto/pull/14881#discussion_r461913780", "createdAt": "2020-07-28T22:02:44Z", "author": {"login": "shixuan-fan"}, "path": "presto-cache/src/main/java/com/facebook/presto/cache/alluxio/AlluxioCachingFileSystem.java", "diffHunk": "@@ -64,115 +46,25 @@ public AlluxioCachingFileSystem(ExtendedFileSystem dataTier, URI uri, boolean ca\n     public synchronized void initialize(URI uri, Configuration configuration)\n             throws IOException\n     {\n-        this.cachingFileSystem = new AlluxioCachingFileSystemInternal(uri, dataTier, cacheValidationEnabled);\n-        cachingFileSystem.initialize(uri, configuration);\n+        this.localCacheFileSystem = new LocalCacheFileSystem(dataTier);\n+        localCacheFileSystem.initialize(uri, configuration);\n     }\n \n     @Override\n     public FSDataInputStream openFile(Path path, HiveFileContext hiveFileContext)\n             throws Exception\n     {\n         if (hiveFileContext.isCacheable()) {\n-            return cachingFileSystem.openFile(path, hiveFileContext);\n-        }\n-        return dataTier.openFile(path, hiveFileContext);\n-    }\n-\n-    private static class AlluxioCachingFileSystemInternal\n-            extends AbstractFileSystem\n-    {\n-        // The filesystem to query on cache miss\n-        private final URI uri;\n-        private final ExtendedFileSystem fileSystem;\n-        private final boolean cacheValidationEnabled;\n-\n-        AlluxioCachingFileSystemInternal(URI uri, ExtendedFileSystem fileSystem, boolean cacheValidationEnabled)\n-        {\n-            this.uri = requireNonNull(uri, \"uri is null\");\n-            this.fileSystem = requireNonNull(fileSystem, \"filesystem is null\");\n-            this.cacheValidationEnabled = cacheValidationEnabled;\n-        }\n-\n-        @Override\n-        public synchronized void initialize(URI uri, Configuration configuration)\n-                throws IOException\n-        {\n-            // Set statistics\n-            setConf(configuration);\n-            statistics = getStatistics(uri.getScheme(), getClass());\n-\n-            // Take the URI properties, hadoop configuration, and given Alluxio configuration and merge\n-            // all three into a single object.\n-            Map<String, Object> configurationFromUri = getConfigurationFromUri(uri);\n-            AlluxioProperties alluxioProperties = ConfigurationUtils.defaults();\n-            InstancedConfiguration newConfiguration = HadoopConfigurationUtils.mergeHadoopConfiguration(configuration, alluxioProperties);\n-            // Connection details in the URI has the highest priority\n-            newConfiguration.merge(configurationFromUri, Source.RUNTIME);\n-            mAlluxioConf = newConfiguration;\n-\n-            // Handle metrics\n-            Properties metricsProperties = new Properties();\n-            for (Map.Entry<String, String> entry : configuration) {\n-                metricsProperties.setProperty(entry.getKey(), entry.getValue());\n-            }\n-            MetricsSystem.startSinksFromConfig(new MetricsConfig(metricsProperties));\n-            mFileSystem = new LocalCacheFileSystem(new AlluxioCachingClientFileSystem(fileSystem, mAlluxioConf), mAlluxioConf);\n-            super.initialize(uri, configuration);\n-        }\n-\n-        public FSDataInputStream openFile(Path path, HiveFileContext hiveFileContext)\n-                throws Exception\n-        {\n+            FileStatus fileStatus = dataTier.getFileStatus(path);\n             // URIStatus is the mechanism to pass the hiveFileContext to the source filesystem\n-            URIStatus uriStatus = mFileSystem.getStatus(getAlluxioPath(path));\n-            AlluxioURIStatus alluxioURIStatus = new AlluxioURIStatus(uriStatus.getFileInfo(), hiveFileContext);\n-            FileInStream fileInStream = mFileSystem.openFile(alluxioURIStatus, OpenFilePOptions.getDefaultInstance());\n-            return new FSDataInputStream(new AlluxioCachingHdfsFileInputStream(\n-                    fileInStream,\n-                    (cacheValidationEnabled ? Optional.of(fileSystem.openFile(path, hiveFileContext)) : Optional.empty()),\n-                    cacheValidationEnabled));\n-        }\n-\n-        @Override\n-        public String getScheme()\n-        {\n-            return uri.getScheme();\n-        }\n-\n-        @Override\n-        protected boolean isZookeeperMode()\n-        {\n-            return mFileSystem.getConf().getBoolean(PropertyKey.ZOOKEEPER_ENABLED);\n-        }\n-\n-        @Override\n-        protected Map<String, Object> getConfigurationFromUri(URI uri)\n-        {\n-            // local cache doesn't use URI authority for connection.\n-            return ImmutableMap.of();\n-        }\n-\n-        @Override\n-        protected void validateFsUri(URI uri)\n-        {\n-        }\n-\n-        @Override\n-        protected String getFsScheme(URI uri)\n-        {\n-            return getScheme();\n-        }\n-\n-        @Override\n-        protected AlluxioURI getAlluxioPath(Path path)\n-        {\n-            return new AlluxioURI(path.toString());\n-        }\n-\n-        @Override\n-        protected Path getFsPath(String uriHeader, URIStatus fileStatus)\n-        {\n-            return new Path(uriHeader + fileStatus.getPath());\n+            AlluxioURIStatus alluxioURIStatus = new AlluxioURIStatus(fileStatus, hiveFileContext);\n+            FSDataInputStream cachingInputStream = localCacheFileSystem.open(alluxioURIStatus, 65536 /* not used */);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7ecfdefff8ffa9fef7bd74fb0644c962ec53a4be"}, "originalPosition": 162}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTkxNDQzMA==", "bodyText": "nit: line break before .setPath", "url": "https://github.com/prestodb/presto/pull/14881#discussion_r461914430", "createdAt": "2020-07-28T22:03:35Z", "author": {"login": "shixuan-fan"}, "path": "presto-cache/src/main/java/com/facebook/presto/cache/alluxio/AlluxioURIStatus.java", "diffHunk": "@@ -16,17 +16,36 @@\n import alluxio.client.file.URIStatus;\n import alluxio.wire.FileInfo;\n import com.facebook.presto.hive.HiveFileContext;\n+import org.apache.hadoop.fs.FileStatus;\n \n+import static com.google.common.hash.Hashing.md5;\n+import static java.nio.charset.StandardCharsets.UTF_8;\n import static java.util.Objects.requireNonNull;\n \n public class AlluxioURIStatus\n         extends URIStatus\n {\n     private final HiveFileContext hiveFileContext;\n \n-    public AlluxioURIStatus(FileInfo fileInfo, HiveFileContext hiveFileContext)\n+    private static FileInfo toAlluxioFileInfo(FileStatus status)\n     {\n-        super(fileInfo);\n+        // FilePath is a unique identifier for a file, however it can be a long string\n+        // hence using md5 hash of the file path as the identifier in the cache.\n+        // We don't set fileId because fileId is Alluxio specific\n+        FileInfo info = new FileInfo();\n+        info.setFileIdentifier(md5().hashString(status.getPath().toString(), UTF_8).toString())\n+                .setLength(status.getLen()).setPath(status.getPath().toString())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7ecfdefff8ffa9fef7bd74fb0644c962ec53a4be"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTkxNTg3Ng==", "bodyText": "nit: line break before .setGroup", "url": "https://github.com/prestodb/presto/pull/14881#discussion_r461915876", "createdAt": "2020-07-28T22:05:26Z", "author": {"login": "shixuan-fan"}, "path": "presto-cache/src/main/java/com/facebook/presto/cache/alluxio/AlluxioURIStatus.java", "diffHunk": "@@ -16,17 +16,36 @@\n import alluxio.client.file.URIStatus;\n import alluxio.wire.FileInfo;\n import com.facebook.presto.hive.HiveFileContext;\n+import org.apache.hadoop.fs.FileStatus;\n \n+import static com.google.common.hash.Hashing.md5;\n+import static java.nio.charset.StandardCharsets.UTF_8;\n import static java.util.Objects.requireNonNull;\n \n public class AlluxioURIStatus\n         extends URIStatus\n {\n     private final HiveFileContext hiveFileContext;\n \n-    public AlluxioURIStatus(FileInfo fileInfo, HiveFileContext hiveFileContext)\n+    private static FileInfo toAlluxioFileInfo(FileStatus status)\n     {\n-        super(fileInfo);\n+        // FilePath is a unique identifier for a file, however it can be a long string\n+        // hence using md5 hash of the file path as the identifier in the cache.\n+        // We don't set fileId because fileId is Alluxio specific\n+        FileInfo info = new FileInfo();\n+        info.setFileIdentifier(md5().hashString(status.getPath().toString(), UTF_8).toString())\n+                .setLength(status.getLen()).setPath(status.getPath().toString())\n+                .setFolder(status.isDirectory())\n+                .setBlockSizeBytes(status.getBlockSize())\n+                .setLastModificationTimeMs(status.getModificationTime())\n+                .setLastAccessTimeMs(status.getAccessTime())\n+                .setOwner(status.getOwner()).setGroup(status.getGroup());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7ecfdefff8ffa9fef7bd74fb0644c962ec53a4be"}, "originalPosition": 29}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU3MDYyNjY5", "url": "https://github.com/prestodb/presto/pull/14881#pullrequestreview-457062669", "createdAt": "2020-07-28T22:06:52Z", "commit": {"oid": "7ecfdefff8ffa9fef7bd74fb0644c962ec53a4be"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU3MTIwOTc1", "url": "https://github.com/prestodb/presto/pull/14881#pullrequestreview-457120975", "createdAt": "2020-07-29T00:43:05Z", "commit": {"oid": "7ecfdefff8ffa9fef7bd74fb0644c962ec53a4be"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7ecfdefff8ffa9fef7bd74fb0644c962ec53a4be", "author": {"user": {"login": "apc999", "name": "Bin Fan"}}, "url": "https://github.com/prestodb/presto/commit/7ecfdefff8ffa9fef7bd74fb0644c962ec53a4be", "committedDate": "2020-07-28T21:14:19Z", "message": "Simplify integration with Alluxio local cache\n\nCo-authored-by: Haoyuan Li <haoyuan@alluxio.com>"}, "afterCommit": {"oid": "65f5403736564b95444eeedecb8268ee5dfb2c23", "author": {"user": {"login": "apc999", "name": "Bin Fan"}}, "url": "https://github.com/prestodb/presto/commit/65f5403736564b95444eeedecb8268ee5dfb2c23", "committedDate": "2020-07-30T19:39:36Z", "message": "Simplify integration with Alluxio local cache\n\nCo-authored-by: Haoyuan Li <haoyuan@alluxio.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "65f5403736564b95444eeedecb8268ee5dfb2c23", "author": {"user": {"login": "apc999", "name": "Bin Fan"}}, "url": "https://github.com/prestodb/presto/commit/65f5403736564b95444eeedecb8268ee5dfb2c23", "committedDate": "2020-07-30T19:39:36Z", "message": "Simplify integration with Alluxio local cache\n\nCo-authored-by: Haoyuan Li <haoyuan@alluxio.com>"}, "afterCommit": {"oid": "94f442910fa3797e1806686c0c6c4b446f6fbe39", "author": {"user": {"login": "apc999", "name": "Bin Fan"}}, "url": "https://github.com/prestodb/presto/commit/94f442910fa3797e1806686c0c6c4b446f6fbe39", "committedDate": "2020-07-31T04:36:09Z", "message": "Simplify integration with Alluxio local cache\n\nCo-authored-by: Haoyuan Li <haoyuan@alluxio.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4e1f05264c4f49f5e5e19f5229e5f1bc558596f2", "author": {"user": {"login": "apc999", "name": "Bin Fan"}}, "url": "https://github.com/prestodb/presto/commit/4e1f05264c4f49f5e5e19f5229e5f1bc558596f2", "committedDate": "2020-07-31T05:56:26Z", "message": "Simplify integration with Alluxio local cache\n\nCo-authored-by: Haoyuan Li <haoyuan@alluxio.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "94f442910fa3797e1806686c0c6c4b446f6fbe39", "author": {"user": {"login": "apc999", "name": "Bin Fan"}}, "url": "https://github.com/prestodb/presto/commit/94f442910fa3797e1806686c0c6c4b446f6fbe39", "committedDate": "2020-07-31T04:36:09Z", "message": "Simplify integration with Alluxio local cache\n\nCo-authored-by: Haoyuan Li <haoyuan@alluxio.com>"}, "afterCommit": {"oid": "4e1f05264c4f49f5e5e19f5229e5f1bc558596f2", "author": {"user": {"login": "apc999", "name": "Bin Fan"}}, "url": "https://github.com/prestodb/presto/commit/4e1f05264c4f49f5e5e19f5229e5f1bc558596f2", "committedDate": "2020-07-31T05:56:26Z", "message": "Simplify integration with Alluxio local cache\n\nCo-authored-by: Haoyuan Li <haoyuan@alluxio.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU5MzQxNTYz", "url": "https://github.com/prestodb/presto/pull/14881#pullrequestreview-459341563", "createdAt": "2020-07-31T17:29:22Z", "commit": {"oid": "4e1f05264c4f49f5e5e19f5229e5f1bc558596f2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 312, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}