{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU3ODg4MzU1", "number": 14907, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxOToyOToyNVrOET0KSQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxOToyOToyNVrOET0KSQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg5MjEzMDAxOnYy", "diffSide": "RIGHT", "path": "presto-tests/src/test/java/com/facebook/presto/tests/TestTransactionManagerIntegration.java", "isResolved": false, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxOToyOToyNVrOG5w2Rg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMVQxNDoyNTowMFrOG6KfIA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzIyMjM0Mg==", "bodyText": "do we still need this logging?", "url": "https://github.com/prestodb/presto/pull/14907#discussion_r463222342", "createdAt": "2020-07-30T19:29:25Z", "author": {"login": "rschlussel"}, "path": "presto-tests/src/test/java/com/facebook/presto/tests/TestTransactionManagerIntegration.java", "diffHunk": "@@ -13,31 +13,63 @@\n  */\n package com.facebook.presto.tests;\n \n+import com.facebook.airlift.log.Logger;\n import com.facebook.presto.tests.tpch.TpchQueryRunnerBuilder;\n+import com.facebook.presto.transaction.TransactionInfo;\n+import com.facebook.presto.transaction.TransactionManager;\n import org.testng.annotations.Test;\n \n+import static com.google.common.collect.ImmutableList.toImmutableList;\n+import static java.util.concurrent.TimeUnit.MILLISECONDS;\n import static org.assertj.core.api.Assertions.assertThatThrownBy;\n import static org.testng.Assert.assertTrue;\n \n public class TestTransactionManagerIntegration\n {\n+    private static final Logger log = Logger.get(TestTransactionManagerIntegration.class);\n+\n     @Test\n     public void testTransactionMetadataCleanup()\n             throws Exception\n     {\n         try (DistributedQueryRunner queryRunner = TpchQueryRunnerBuilder.builder().build()) {\n+            log.info(\"Start running testTransactionMetadataCleanup\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9305ced71ac79416ca15288e40a89d6ab084ae23"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzIzODk5MQ==", "bodyText": "I am not sure whether this PR will completely solve the issue,  so additional logging of remaining transaction ids is another purpose of this PR.", "url": "https://github.com/prestodb/presto/pull/14907#discussion_r463238991", "createdAt": "2020-07-30T20:01:31Z", "author": {"login": "viczhang861"}, "path": "presto-tests/src/test/java/com/facebook/presto/tests/TestTransactionManagerIntegration.java", "diffHunk": "@@ -13,31 +13,63 @@\n  */\n package com.facebook.presto.tests;\n \n+import com.facebook.airlift.log.Logger;\n import com.facebook.presto.tests.tpch.TpchQueryRunnerBuilder;\n+import com.facebook.presto.transaction.TransactionInfo;\n+import com.facebook.presto.transaction.TransactionManager;\n import org.testng.annotations.Test;\n \n+import static com.google.common.collect.ImmutableList.toImmutableList;\n+import static java.util.concurrent.TimeUnit.MILLISECONDS;\n import static org.assertj.core.api.Assertions.assertThatThrownBy;\n import static org.testng.Assert.assertTrue;\n \n public class TestTransactionManagerIntegration\n {\n+    private static final Logger log = Logger.get(TestTransactionManagerIntegration.class);\n+\n     @Test\n     public void testTransactionMetadataCleanup()\n             throws Exception\n     {\n         try (DistributedQueryRunner queryRunner = TpchQueryRunnerBuilder.builder().build()) {\n+            log.info(\"Start running testTransactionMetadataCleanup\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzIyMjM0Mg=="}, "originalCommit": {"oid": "9305ced71ac79416ca15288e40a89d6ab084ae23"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzI4MzczMg==", "bodyText": "that's covered in the assertTrue at line 41.  this logging just shows the beginning and end of the test.", "url": "https://github.com/prestodb/presto/pull/14907#discussion_r463283732", "createdAt": "2020-07-30T21:32:51Z", "author": {"login": "rschlussel"}, "path": "presto-tests/src/test/java/com/facebook/presto/tests/TestTransactionManagerIntegration.java", "diffHunk": "@@ -13,31 +13,63 @@\n  */\n package com.facebook.presto.tests;\n \n+import com.facebook.airlift.log.Logger;\n import com.facebook.presto.tests.tpch.TpchQueryRunnerBuilder;\n+import com.facebook.presto.transaction.TransactionInfo;\n+import com.facebook.presto.transaction.TransactionManager;\n import org.testng.annotations.Test;\n \n+import static com.google.common.collect.ImmutableList.toImmutableList;\n+import static java.util.concurrent.TimeUnit.MILLISECONDS;\n import static org.assertj.core.api.Assertions.assertThatThrownBy;\n import static org.testng.Assert.assertTrue;\n \n public class TestTransactionManagerIntegration\n {\n+    private static final Logger log = Logger.get(TestTransactionManagerIntegration.class);\n+\n     @Test\n     public void testTransactionMetadataCleanup()\n             throws Exception\n     {\n         try (DistributedQueryRunner queryRunner = TpchQueryRunnerBuilder.builder().build()) {\n+            log.info(\"Start running testTransactionMetadataCleanup\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzIyMjM0Mg=="}, "originalCommit": {"oid": "9305ced71ac79416ca15288e40a89d6ab084ae23"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzMzOTk0Nw==", "bodyText": "Right,  assertTrue will show up in error message, then I need to search previous logging to match which queries are not cleaned. An example of 5 actual transaction ids are shown here. #14835", "url": "https://github.com/prestodb/presto/pull/14907#discussion_r463339947", "createdAt": "2020-07-31T00:17:56Z", "author": {"login": "viczhang861"}, "path": "presto-tests/src/test/java/com/facebook/presto/tests/TestTransactionManagerIntegration.java", "diffHunk": "@@ -13,31 +13,63 @@\n  */\n package com.facebook.presto.tests;\n \n+import com.facebook.airlift.log.Logger;\n import com.facebook.presto.tests.tpch.TpchQueryRunnerBuilder;\n+import com.facebook.presto.transaction.TransactionInfo;\n+import com.facebook.presto.transaction.TransactionManager;\n import org.testng.annotations.Test;\n \n+import static com.google.common.collect.ImmutableList.toImmutableList;\n+import static java.util.concurrent.TimeUnit.MILLISECONDS;\n import static org.assertj.core.api.Assertions.assertThatThrownBy;\n import static org.testng.Assert.assertTrue;\n \n public class TestTransactionManagerIntegration\n {\n+    private static final Logger log = Logger.get(TestTransactionManagerIntegration.class);\n+\n     @Test\n     public void testTransactionMetadataCleanup()\n             throws Exception\n     {\n         try (DistributedQueryRunner queryRunner = TpchQueryRunnerBuilder.builder().build()) {\n+            log.info(\"Start running testTransactionMetadataCleanup\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzIyMjM0Mg=="}, "originalCommit": {"oid": "9305ced71ac79416ca15288e40a89d6ab084ae23"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzY0MjQwMA==", "bodyText": "Got it. Can you create an issue to clean up the logging in e.g. 2 months if the error doesn't recur?", "url": "https://github.com/prestodb/presto/pull/14907#discussion_r463642400", "createdAt": "2020-07-31T14:25:00Z", "author": {"login": "rschlussel"}, "path": "presto-tests/src/test/java/com/facebook/presto/tests/TestTransactionManagerIntegration.java", "diffHunk": "@@ -13,31 +13,63 @@\n  */\n package com.facebook.presto.tests;\n \n+import com.facebook.airlift.log.Logger;\n import com.facebook.presto.tests.tpch.TpchQueryRunnerBuilder;\n+import com.facebook.presto.transaction.TransactionInfo;\n+import com.facebook.presto.transaction.TransactionManager;\n import org.testng.annotations.Test;\n \n+import static com.google.common.collect.ImmutableList.toImmutableList;\n+import static java.util.concurrent.TimeUnit.MILLISECONDS;\n import static org.assertj.core.api.Assertions.assertThatThrownBy;\n import static org.testng.Assert.assertTrue;\n \n public class TestTransactionManagerIntegration\n {\n+    private static final Logger log = Logger.get(TestTransactionManagerIntegration.class);\n+\n     @Test\n     public void testTransactionMetadataCleanup()\n             throws Exception\n     {\n         try (DistributedQueryRunner queryRunner = TpchQueryRunnerBuilder.builder().build()) {\n+            log.info(\"Start running testTransactionMetadataCleanup\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzIyMjM0Mg=="}, "originalCommit": {"oid": "9305ced71ac79416ca15288e40a89d6ab084ae23"}, "originalPosition": 24}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2188, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}