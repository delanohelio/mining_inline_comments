{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc4NjgyMTk3", "number": 14147, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNFQxNjowMjo1NVrODiYb-Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNFQxNjowMjo1NVrODiYb-Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM3Mzc4NTUzOnYy", "diffSide": "RIGHT", "path": "presto-verifier/src/main/java/com/facebook/presto/verifier/checksum/FloatingPointColumnValidator.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNFQxNjowMjo1NVrOFtmI1A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQwMDowNzowMVrOFt0VSQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzM1NTA5Mg==", "bodyText": "It is possible for controlResult.getRowCount() to return zero here? If not, perhaps, add a comment to explain why.", "url": "https://github.com/prestodb/presto/pull/14147#discussion_r383355092", "createdAt": "2020-02-24T16:02:55Z", "author": {"login": "mbasmanova"}, "path": "presto-verifier/src/main/java/com/facebook/presto/verifier/checksum/FloatingPointColumnValidator.java", "diffHunk": "@@ -158,14 +158,13 @@ public FloatingPointColumnValidator(VerifierConfig config)\n         }\n \n         // Use absolute error margin if either control sum or test sum is 0\n-        if (controlSum == 0 || testSum == 0) {\n-            double controlMean = controlSum / controlResult.getRowCount();\n-            double testMean = testSum / controlResult.getRowCount();\n-            double difference = abs(controlMean - testMean);\n+        double controlMean = controlSum / controlResult.getRowCount();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dcf0ace0eb064996316a3f086f6ffda1567c8921"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzU4NzY1Nw==", "bodyText": "Comment added: Row count won't be zero since otherwise controlSum and testSum will both be null, and this has already been handled above.", "url": "https://github.com/prestodb/presto/pull/14147#discussion_r383587657", "createdAt": "2020-02-25T00:07:01Z", "author": {"login": "caithagoras"}, "path": "presto-verifier/src/main/java/com/facebook/presto/verifier/checksum/FloatingPointColumnValidator.java", "diffHunk": "@@ -158,14 +158,13 @@ public FloatingPointColumnValidator(VerifierConfig config)\n         }\n \n         // Use absolute error margin if either control sum or test sum is 0\n-        if (controlSum == 0 || testSum == 0) {\n-            double controlMean = controlSum / controlResult.getRowCount();\n-            double testMean = testSum / controlResult.getRowCount();\n-            double difference = abs(controlMean - testMean);\n+        double controlMean = controlSum / controlResult.getRowCount();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzM1NTA5Mg=="}, "originalCommit": {"oid": "dcf0ace0eb064996316a3f086f6ffda1567c8921"}, "originalPosition": 8}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3086, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}