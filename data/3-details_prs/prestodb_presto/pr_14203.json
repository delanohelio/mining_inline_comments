{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgzMjg0MTAz", "number": 14203, "title": "Allow column pruning in SHOW STATS", "bodyText": "Fixes #14202\n== NO RELEASE NOTE ==", "createdAt": "2020-03-04T01:14:25Z", "url": "https://github.com/prestodb/presto/pull/14203", "merged": true, "mergeCommit": {"oid": "d46146586c09e6478b27d5f9c4c60ace783ffc4b"}, "closed": true, "closedAt": "2020-03-04T22:05:32Z", "author": {"login": "mbasmanova"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcKMW1yAH2gAyMzgzMjg0MTAzOmU1YzJmMTU2M2Y4NmI1MzQ5OTExZDc3YjcyMWJjOTEyNjBlZjk2YjY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcKdv5IgFqTM2OTEzMjQ4Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e5c2f1563f86b5349911d77b721bc91260ef96b6", "author": {"user": {"login": "mbasmanova", "name": "Maria Basmanova"}}, "url": "https://github.com/prestodb/presto/commit/e5c2f1563f86b5349911d77b721bc91260ef96b6", "committedDate": "2020-03-04T01:09:08Z", "message": "Allow column pruning in SHOW STATS"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY5MTMwMTUz", "url": "https://github.com/prestodb/presto/pull/14203#pullrequestreview-369130153", "createdAt": "2020-03-04T21:19:00Z", "commit": {"oid": "e5c2f1563f86b5349911d77b721bc91260ef96b6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY5MTMyNDgy", "url": "https://github.com/prestodb/presto/pull/14203#pullrequestreview-369132482", "createdAt": "2020-03-04T21:22:49Z", "commit": {"oid": "e5c2f1563f86b5349911d77b721bc91260ef96b6"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQyMToyMjo0OVrOFx-HEQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQyMToyMjo0OVrOFx-HEQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Nzk0MjE2MQ==", "bodyText": "nit:  break?", "url": "https://github.com/prestodb/presto/pull/14203#discussion_r387942161", "createdAt": "2020-03-04T21:22:49Z", "author": {"login": "arhimondr"}, "path": "presto-main/src/main/java/com/facebook/presto/sql/rewrite/ShowStatsRewrite.java", "diffHunk": "@@ -158,14 +163,32 @@ private void validateShowStatsSubquery(ShowStats node, Query query, QuerySpecifi\n             check(!querySpecification.getGroupBy().isPresent(), node, \"GROUP BY is not supported in SHOW STATS SELECT clause\");\n             check(!querySpecification.getSelect().isDistinct(), node, \"DISTINCT is not supported by SHOW STATS SELECT clause\");\n \n+            ImmutableSet.Builder<String> columnsBuilder = ImmutableSet.builder();\n+            boolean allColumns = false;\n             List<SelectItem> selectItems = querySpecification.getSelect().getSelectItems();\n-            check(selectItems.size() == 1 && selectItems.get(0) instanceof AllColumns, node, \"Only SELECT * is supported in SHOW STATS SELECT clause\");\n+            for (SelectItem selectItem : selectItems) {\n+                if (selectItem instanceof AllColumns) {\n+                    allColumns = true;\n+                    continue;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e5c2f1563f86b5349911d77b721bc91260ef96b6"}, "originalPosition": 74}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1965, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}