{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM1NTg2Njg1", "number": 1131, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxMDoxNjozNVrOEGScRA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxMDoyNzo0MVrOEGSqlA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc1MDI5MDYwOnYy", "diffSide": "RIGHT", "path": "ql/src/test/results/clientpositive/llap/order_null.q.out", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxMDoxNjozNVrOGk_Vbw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxMjo1MjozOVrOGlERxg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTQzOTU5OQ==", "bodyText": "The result that I would expect is:\n2         B\n1         A\n2         A\nNULL  NULL\n2         NULL\n3         NULL", "url": "https://github.com/apache/hive/pull/1131#discussion_r441439599", "createdAt": "2020-06-17T10:16:35Z", "author": {"login": "zabetak"}, "path": "ql/src/test/results/clientpositive/llap/order_null.q.out", "diffHunk": "@@ -116,12 +116,12 @@ POSTHOOK: query: SELECT x.* FROM src_null_n1 x ORDER BY b desc, a asc\n POSTHOOK: type: QUERY\n POSTHOOK: Input: default@src_null_n1\n #### A masked pattern was here ####\n-2\tB\n-1\tA\n-2\tA\n 2\tNULL\n 3\tNULL\n NULL\tNULL\n+2\tB\n+1\tA\n+2\tA", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c3ad226faa6dc42d5542ec35fd48543356743a9a"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTUwMzY5OA==", "bodyText": "Not sure about how up-to-date that document is but as far as I know we want nulls last as the default for asc and nulls first for desc.\nIt can be controlled by the setting hive.default.nulls.last. Default value is true.\nI also run these queries with Postgres and got the same results as with this patch.", "url": "https://github.com/apache/hive/pull/1131#discussion_r441503698", "createdAt": "2020-06-17T12:23:43Z", "author": {"login": "kasakrisz"}, "path": "ql/src/test/results/clientpositive/llap/order_null.q.out", "diffHunk": "@@ -116,12 +116,12 @@ POSTHOOK: query: SELECT x.* FROM src_null_n1 x ORDER BY b desc, a asc\n POSTHOOK: type: QUERY\n POSTHOOK: Input: default@src_null_n1\n #### A masked pattern was here ####\n-2\tB\n-1\tA\n-2\tA\n 2\tNULL\n 3\tNULL\n NULL\tNULL\n+2\tB\n+1\tA\n+2\tA", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTQzOTU5OQ=="}, "originalCommit": {"oid": "c3ad226faa6dc42d5542ec35fd48543356743a9a"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTUwOTAyMQ==", "bodyText": "OK, now I understand better, thanks for the clarification.\nThe hive.default.nulls.last is a bit confusing. From the name and description I get the impression that NULLS LAST is the default behavior for both ASC and DESC and apparently it is not the case either.\nYes the new results are in sync with Postgres since the latter uses the semantics that you mentioned. Note that this is not a rule from every DBMS.", "url": "https://github.com/apache/hive/pull/1131#discussion_r441509021", "createdAt": "2020-06-17T12:33:17Z", "author": {"login": "zabetak"}, "path": "ql/src/test/results/clientpositive/llap/order_null.q.out", "diffHunk": "@@ -116,12 +116,12 @@ POSTHOOK: query: SELECT x.* FROM src_null_n1 x ORDER BY b desc, a asc\n POSTHOOK: type: QUERY\n POSTHOOK: Input: default@src_null_n1\n #### A masked pattern was here ####\n-2\tB\n-1\tA\n-2\tA\n 2\tNULL\n 3\tNULL\n NULL\tNULL\n+2\tB\n+1\tA\n+2\tA", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTQzOTU5OQ=="}, "originalCommit": {"oid": "c3ad226faa6dc42d5542ec35fd48543356743a9a"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTUyMDU4Mg==", "bodyText": "I agree that description is confusing I changed accordingly.", "url": "https://github.com/apache/hive/pull/1131#discussion_r441520582", "createdAt": "2020-06-17T12:52:39Z", "author": {"login": "kasakrisz"}, "path": "ql/src/test/results/clientpositive/llap/order_null.q.out", "diffHunk": "@@ -116,12 +116,12 @@ POSTHOOK: query: SELECT x.* FROM src_null_n1 x ORDER BY b desc, a asc\n POSTHOOK: type: QUERY\n POSTHOOK: Input: default@src_null_n1\n #### A masked pattern was here ####\n-2\tB\n-1\tA\n-2\tA\n 2\tNULL\n 3\tNULL\n NULL\tNULL\n+2\tB\n+1\tA\n+2\tA", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTQzOTU5OQ=="}, "originalCommit": {"oid": "c3ad226faa6dc42d5542ec35fd48543356743a9a"}, "originalPosition": 26}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc1MDMwMjY4OnYy", "diffSide": "RIGHT", "path": "ql/src/test/results/clientpositive/llap/order_null.q.out", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxMDoyMDowMVrOGk_czQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxMDoyMDowMVrOGk_czQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTQ0MTQ4NQ==", "bodyText": "I think that the old result was correct.", "url": "https://github.com/apache/hive/pull/1131#discussion_r441441485", "createdAt": "2020-06-17T10:20:01Z", "author": {"login": "zabetak"}, "path": "ql/src/test/results/clientpositive/llap/order_null.q.out", "diffHunk": "@@ -187,9 +187,9 @@ POSTHOOK: type: QUERY\n POSTHOOK: Input: default@src_null_n1\n #### A masked pattern was here ####\n 1\tA\n+2\tNULL\n 2\tB\n 2\tA\n-2\tNULL\n 3\tNULL\n NULL\tNULL", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c3ad226faa6dc42d5542ec35fd48543356743a9a"}, "originalPosition": 39}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc1MDMyNzI0OnYy", "diffSide": "LEFT", "path": "ql/src/test/results/clientpositive/llap/order_null.q.out", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxMDoyNzo0MVrOGk_suw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxMDoyNzo0MVrOGk_suw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTQ0NTU2Mw==", "bodyText": "I think that the old result was correct.", "url": "https://github.com/apache/hive/pull/1131#discussion_r441445563", "createdAt": "2020-06-17T10:27:41Z", "author": {"login": "zabetak"}, "path": "ql/src/test/results/clientpositive/llap/order_null.q.out", "diffHunk": "@@ -88,12 +88,12 @@ POSTHOOK: query: SELECT x.* FROM src_null_n1 x ORDER BY a desc\n POSTHOOK: type: QUERY\n POSTHOOK: Input: default@src_null_n1\n #### A masked pattern was here ####\n+NULL\tNULL\n 3\tNULL\n 2\tNULL\n 2\tA\n 2\tB\n 1\tA\n-NULL\tNULL", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c3ad226faa6dc42d5542ec35fd48543356743a9a"}, "originalPosition": 10}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 631, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}