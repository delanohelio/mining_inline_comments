{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk4NDExNjA4", "number": 1556, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQxMDoxMTo0MFrOFC14Tg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQwMzozNjozNVrOFDQRGQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM4NTI0MjM4OnYy", "diffSide": "RIGHT", "path": "ql/src/test/queries/clientpositive/authorization_view_1.q", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQxMDoxMTo0MFrOICMuWA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQwOToyMjozM1rOIC_SXw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTE3NjUzNg==", "bodyText": "Any reason for changing this?", "url": "https://github.com/apache/hive/pull/1556#discussion_r539176536", "createdAt": "2020-12-09T10:11:40Z", "author": {"login": "rbalamohan"}, "path": "ql/src/test/queries/clientpositive/authorization_view_1.q", "diffHunk": "@@ -1,5 +1,6 @@\n --! qt:dataset:src\n set hive.security.authorization.manager=org.apache.hadoop.hive.ql.security.authorization.DefaultHiveAuthorizationProvider;\n+set hive.exec.reducers.max=1;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a43064fc9f668b39385f048f5649384803fe7b5b"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDAwNDk1OQ==", "bodyText": "yes, as this patch changes the behavior of all queries having limit, basically, all queries with >1 reducers are subject to intermittent result changes, because of making reducers exit early\nthat's what I experienced in early precommit runs, and I didn't want to introduce ORDER BY clauses", "url": "https://github.com/apache/hive/pull/1556#discussion_r540004959", "createdAt": "2020-12-10T09:22:33Z", "author": {"login": "abstractdog"}, "path": "ql/src/test/queries/clientpositive/authorization_view_1.q", "diffHunk": "@@ -1,5 +1,6 @@\n --! qt:dataset:src\n set hive.security.authorization.manager=org.apache.hadoop.hive.ql.security.authorization.DefaultHiveAuthorizationProvider;\n+set hive.exec.reducers.max=1;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTE3NjUzNg=="}, "originalCommit": {"oid": "a43064fc9f668b39385f048f5649384803fe7b5b"}, "originalPosition": 3}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM4OTU1MTM4OnYy", "diffSide": "RIGHT", "path": "ql/src/java/org/apache/hadoop/hive/ql/exec/LimitOperator.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQwMzozMTowN1rOICz5rg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQwOToyMjo0NVrOIC_S9A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTgxODQxNA==", "bodyText": "remove this?", "url": "https://github.com/apache/hive/pull/1556#discussion_r539818414", "createdAt": "2020-12-10T03:31:07Z", "author": {"login": "rbalamohan"}, "path": "ql/src/java/org/apache/hadoop/hive/ql/exec/LimitOperator.java", "diffHunk": "@@ -19,11 +19,18 @@\n package org.apache.hadoop.hive.ql.exec;\n \n import java.io.Serializable;\n+import java.util.concurrent.Callable;\n+import java.util.concurrent.atomic.AtomicBoolean;\n+import java.util.concurrent.atomic.AtomicInteger;\n \n import org.apache.hadoop.conf.Configuration;\n+import org.apache.hadoop.hive.conf.HiveConf;\n import org.apache.hadoop.hive.ql.CompilationOpContext;\n+import org.apache.hadoop.hive.ql.exec.tez.DagUtils;\n+import org.apache.hadoop.hive.ql.exec.tez.LlapObjectCache;\n import org.apache.hadoop.hive.ql.metadata.HiveException;\n import org.apache.hadoop.hive.ql.plan.LimitDesc;\n+import org.apache.hadoop.hive.ql.plan.OperatorDesc;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a43064fc9f668b39385f048f5649384803fe7b5b"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDAwNTEwOA==", "bodyText": "I'll do", "url": "https://github.com/apache/hive/pull/1556#discussion_r540005108", "createdAt": "2020-12-10T09:22:45Z", "author": {"login": "abstractdog"}, "path": "ql/src/java/org/apache/hadoop/hive/ql/exec/LimitOperator.java", "diffHunk": "@@ -19,11 +19,18 @@\n package org.apache.hadoop.hive.ql.exec;\n \n import java.io.Serializable;\n+import java.util.concurrent.Callable;\n+import java.util.concurrent.atomic.AtomicBoolean;\n+import java.util.concurrent.atomic.AtomicInteger;\n \n import org.apache.hadoop.conf.Configuration;\n+import org.apache.hadoop.hive.conf.HiveConf;\n import org.apache.hadoop.hive.ql.CompilationOpContext;\n+import org.apache.hadoop.hive.ql.exec.tez.DagUtils;\n+import org.apache.hadoop.hive.ql.exec.tez.LlapObjectCache;\n import org.apache.hadoop.hive.ql.metadata.HiveException;\n import org.apache.hadoop.hive.ql.plan.LimitDesc;\n+import org.apache.hadoop.hive.ql.plan.OperatorDesc;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTgxODQxNA=="}, "originalCommit": {"oid": "a43064fc9f668b39385f048f5649384803fe7b5b"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM4OTU2NTY5OnYy", "diffSide": "RIGHT", "path": "ql/src/java/org/apache/hadoop/hive/ql/exec/tez/DagUtils.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQwMzozNjozNVrOIC0BUg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQwOToyNTo0N1rOIC_bbA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTgyMDM3MA==", "bodyText": "Move this in TezProcessor itself? It is not DAG specific and is needed mainly for logging purposes. Having it within TezProcessor will make it easier to read and not confuse anyone trying to walk through DagUtils.", "url": "https://github.com/apache/hive/pull/1556#discussion_r539820370", "createdAt": "2020-12-10T03:36:35Z", "author": {"login": "rbalamohan"}, "path": "ql/src/java/org/apache/hadoop/hive/ql/exec/tez/DagUtils.java", "diffHunk": "@@ -1811,4 +1819,11 @@ static long parseRightmostXmx(String javaOpts) {\n     }\n     return allNonAppFileResources;\n   }\n+\n+  public static void initTezAttributes(Configuration conf, ProcessorContext context) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a43064fc9f668b39385f048f5649384803fe7b5b"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDAwNzI3Ng==", "bodyText": "makes sense\nI want to rely on this in later patches, e.g. HIVE-24278, but I think we can still make use of these properties runtime if it's moved to  TezProcessor, I'll do that", "url": "https://github.com/apache/hive/pull/1556#discussion_r540007276", "createdAt": "2020-12-10T09:25:47Z", "author": {"login": "abstractdog"}, "path": "ql/src/java/org/apache/hadoop/hive/ql/exec/tez/DagUtils.java", "diffHunk": "@@ -1811,4 +1819,11 @@ static long parseRightmostXmx(String javaOpts) {\n     }\n     return allNonAppFileResources;\n   }\n+\n+  public static void initTezAttributes(Configuration conf, ProcessorContext context) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTgyMDM3MA=="}, "originalCommit": {"oid": "a43064fc9f668b39385f048f5649384803fe7b5b"}, "originalPosition": 27}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 330, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}