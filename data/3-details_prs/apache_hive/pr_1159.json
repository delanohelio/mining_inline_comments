{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM3OTgzOTMx", "number": 1159, "title": "HIVE-23741: Store CacheTags in the file cache level", "bodyText": "NOTICE\nPlease create an issue in ASF JIRA before opening a pull request,\nand you need to set the title of the pull request which starts with\nthe corresponding JIRA issue number. (e.g. HIVE-XXXXX: Fix a typo in YYY)\nFor more details, please see https://cwiki.apache.org/confluence/display/Hive/HowToContribute", "createdAt": "2020-06-22T14:32:27Z", "url": "https://github.com/apache/hive/pull/1159", "merged": true, "mergeCommit": {"oid": "2e18a7408a8dd49beecad8d66bfe054b7dc474da"}, "closed": true, "closedAt": "2020-06-29T16:33:50Z", "author": {"login": "asinkovits"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABctxtTFAH2gAyNDM3OTgzOTMxOjQxMGM3YjE2MDFiZDZjYWZhNGI4NzAwMTFmMWEwZTdkMTI2OGJiMzI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcu-ReaAH2gAyNDM3OTgzOTMxOjlmZmZkZjI2OWYzZjI4MWEzNzA3YzdkOWY0NjZiODEyZTcyYzcxY2Y=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "410c7b1601bd6cafa4b870011f1a0e7d1268bb32", "author": {"user": {"login": "asinkovits", "name": "Antal Sinkovits"}}, "url": "https://github.com/apache/hive/commit/410c7b1601bd6cafa4b870011f1a0e7d1268bb32", "committedDate": "2020-06-22T14:27:30Z", "message": "HIVE-23741: Store CacheTags in the file cache level\n\nChange-Id: I2985b74b7b7864734d03180992295621bb82f9b5"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2NDg2OTYz", "url": "https://github.com/apache/hive/pull/1159#pullrequestreview-436486963", "createdAt": "2020-06-24T09:39:58Z", "commit": {"oid": "410c7b1601bd6cafa4b870011f1a0e7d1268bb32"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQwOTozOTo1OFrOGoKueg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQwOTozOTo1OFrOGoKueg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDc3MTk2Mg==", "bodyText": "This sets the reference from buffer to filecache instance alright.\nBut as far as I see this only happens when LowLevelCacheImpl is used, aka caching Orc files, how does this reference setting happen with the SerdeLowLevelCache (text based files)?", "url": "https://github.com/apache/hive/pull/1159#discussion_r444771962", "createdAt": "2020-06-24T09:39:58Z", "author": {"login": "szlta"}, "path": "llap-server/src/java/org/apache/hadoop/hive/llap/cache/LowLevelCacheImpl.java", "diffHunk": "@@ -305,10 +305,10 @@ private boolean lockBuffer(LlapDataBuffer buffer, boolean doNotifyPolicy) {\n         long offset = ranges[i].getOffset() + baseOffset;\n         assert buffer.declaredCachedLength == LlapDataBuffer.UNKNOWN_CACHED_LENGTH;\n         buffer.declaredCachedLength = ranges[i].getLength();\n-        buffer.setTag(tag);\n         while (true) { // Overwhelmingly executes once, or maybe twice (replacing stale value).\n           LlapDataBuffer oldVal = subCache.getCache().putIfAbsent(offset, buffer);\n           if (oldVal == null) {\n+            buffer.setFileCache(subCache);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "410c7b1601bd6cafa4b870011f1a0e7d1268bb32"}, "originalPosition": 17}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e20caf1c0fefc174c9782a2448278c5176a01546", "author": {"user": {"login": "asinkovits", "name": "Antal Sinkovits"}}, "url": "https://github.com/apache/hive/commit/e20caf1c0fefc174c9782a2448278c5176a01546", "committedDate": "2020-06-25T14:16:23Z", "message": "Cache tag extract for text files as well.\n\nChange-Id: I2928360d5fafed629bf96af487b24e0f56107945"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9fffdf269f3f281a3707c7d9f466b812e72c71cf", "author": {"user": {"login": "asinkovits", "name": "Antal Sinkovits"}}, "url": "https://github.com/apache/hive/commit/9fffdf269f3f281a3707c7d9f466b812e72c71cf", "committedDate": "2020-06-26T07:39:48Z", "message": "Revert some required methods back from the base class.\n\nChange-Id: I2bf372d242e6f0237f52ab2828bce9cf8a03dfdb"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3689, "cost": 1, "resetAt": "2021-10-29T19:57:52Z"}}}