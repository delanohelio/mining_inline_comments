{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY1MzI3Njc5", "number": 1382, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yM1QwODoxOToyNlrOEbS2QA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yM1QwODoxOToyNlrOEbS2QA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk3MDU1ODA4OnYy", "diffSide": "RIGHT", "path": "streaming/src/java/org/apache/hive/streaming/AbstractRecordWriter.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yM1QwODoxOToyNlrOHFLPoQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yM1QxMzoyMjoyMVrOHFNEVw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTE4OTE1Mw==", "bodyText": "Can we please rename the 'addedPartitions' to something like more resembling the actual usage, like 'updatedPartitions', or 'changedPartitions', or whatever? Maybe a comment on the attribute/and getter should be good as well.\nOtherwise LGTM.\nThanks, Peter", "url": "https://github.com/apache/hive/pull/1382#discussion_r475189153", "createdAt": "2020-08-23T08:19:26Z", "author": {"login": "pvary"}, "path": "streaming/src/java/org/apache/hive/streaming/AbstractRecordWriter.java", "diffHunk": "@@ -581,16 +582,9 @@ protected RecordUpdater getRecordUpdater(List<String> partitionValues, int bucke\n           destLocation = new Path(table.getSd().getLocation());\n         } else {\n           PartitionInfo partitionInfo = conn.createPartitionIfNotExists(partitionValues);\n-          // collect the newly added partitions. connection.commitTransaction() will report the dynamically added\n-          // partitions to TxnHandler\n-          if (!partitionInfo.isExists()) {\n-            addedPartitions.add(partitionInfo.getName());\n-          } else {\n-            if (LOG.isDebugEnabled()) {\n-              LOG.debug(\"Partition {} already exists for table {}\",\n-                  partitionInfo.getName(), fullyQualifiedTableName);\n-            }\n-          }\n+          // collect the newly added/updated partitions. connection.commitTransaction() will report the dynamically\n+          // added partitions to TxnHandler\n+          addedPartitions.add(partitionInfo.getName());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "af5c5fd9375c8d826ce16d02af40a1151c65c708"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTIxOTAzMQ==", "bodyText": "Done.", "url": "https://github.com/apache/hive/pull/1382#discussion_r475219031", "createdAt": "2020-08-23T13:22:21Z", "author": {"login": "vpnvishv"}, "path": "streaming/src/java/org/apache/hive/streaming/AbstractRecordWriter.java", "diffHunk": "@@ -581,16 +582,9 @@ protected RecordUpdater getRecordUpdater(List<String> partitionValues, int bucke\n           destLocation = new Path(table.getSd().getLocation());\n         } else {\n           PartitionInfo partitionInfo = conn.createPartitionIfNotExists(partitionValues);\n-          // collect the newly added partitions. connection.commitTransaction() will report the dynamically added\n-          // partitions to TxnHandler\n-          if (!partitionInfo.isExists()) {\n-            addedPartitions.add(partitionInfo.getName());\n-          } else {\n-            if (LOG.isDebugEnabled()) {\n-              LOG.debug(\"Partition {} already exists for table {}\",\n-                  partitionInfo.getName(), fullyQualifiedTableName);\n-            }\n-          }\n+          // collect the newly added/updated partitions. connection.commitTransaction() will report the dynamically\n+          // added partitions to TxnHandler\n+          addedPartitions.add(partitionInfo.getName());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTE4OTE1Mw=="}, "originalCommit": {"oid": "af5c5fd9375c8d826ce16d02af40a1151c65c708"}, "originalPosition": 24}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 506, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}