{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM1NzgxNjIy", "number": 1761, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQyMjowNzoyNVrOFEOxmQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQyMjowNzoyNVrOFEOxmQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM5OTgwNjk3OnYy", "diffSide": "RIGHT", "path": "standalone-metastore/metastore-server/src/main/java/org/apache/hadoop/hive/metastore/ObjectStore.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQyMjowNzoyNVrOIERJ9Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQyMjowNzoyNVrOIERJ9Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTM0NjI5Mw==", "bodyText": "Looks like we are setting the value of locationURI for managedLocation. dbLoc is based on mDB.getLocationURI(). Instead we should have similar logic where string substitutions are performed on DB's managedlocation as well.", "url": "https://github.com/apache/hive/pull/1761#discussion_r541346293", "createdAt": "2020-12-11T22:07:25Z", "author": {"login": "nrg4878"}, "path": "standalone-metastore/metastore-server/src/main/java/org/apache/hadoop/hive/metastore/ObjectStore.java", "diffHunk": "@@ -8556,6 +8556,9 @@ public UpdateMDatabaseURIRetVal updateMDatabaseURI(URI oldLoc, URI newLoc, boole\n             updateLocations.put(locationURI.toString(), dbLoc);\n             if (!dryRun) {\n               mDB.setLocationUri(dbLoc);\n+              if (org.apache.commons.lang3.StringUtils.isNotBlank(mDB.getManagedLocationUri())) {\n+                mDB.setManagedLocationUri(dbLoc);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b4bb8e8cba20214dc01d082c1e2ff150fa58dc9a"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 148, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}