{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQ1NTgzNDY4", "number": 1816, "title": "HIVE-24570 Hive on spark tmp file should be delete when driver process finished", "bodyText": "What changes were proposed in this pull request?\ndelete spark tmp files when spark driver exit\nWhy are the changes needed?\nif not change, tmp files only delete when hiveserver jvm exit, and tmp files may too large\nHow was this patch tested?\ntest in my cluster", "createdAt": "2020-12-25T12:06:51Z", "url": "https://github.com/apache/hive/pull/1816", "merged": true, "mergeCommit": {"oid": "347a66250c7308152ef58ce67ae2b10e1c0c2964"}, "closed": true, "closedAt": "2021-01-07T19:05:03Z", "author": {"login": "fsilent"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdpnJY6gH2gAyNTQ1NTgzNDY4OjMyYTg2NzM4ZDIwZTQ0MWE5ODAxNzhlNGY2ZGUxODgyOGY0ZWI3YzQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdtsrxwAFqTU2MzIwNzk2Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "32a86738d20e441a980178e4f6de18828f4eb7c4", "author": {"user": null}, "url": "https://github.com/apache/hive/commit/32a86738d20e441a980178e4f6de18828f4eb7c4", "committedDate": "2020-12-25T12:04:41Z", "message": "fix HIVE-24570"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYzMDE0Mjcw", "url": "https://github.com/apache/hive/pull/1816#pullrequestreview-563014270", "createdAt": "2021-01-06T20:22:32Z", "commit": {"oid": "32a86738d20e441a980178e4f6de18828f4eb7c4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNlQyMDoyMjozMlrOIPU_kQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNlQyMDoyMjozMlrOIPU_kQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1Mjk0MzUwNQ==", "bodyText": "Is sparkTmpProperties only assigned when cancel called? Is there any normal scenario the properties need to be deleted?", "url": "https://github.com/apache/hive/pull/1816#discussion_r552943505", "createdAt": "2021-01-06T20:22:32Z", "author": {"login": "yongzhi"}, "path": "spark-client/src/main/java/org/apache/hive/spark/client/AbstractSparkClient.java", "diffHunk": "@@ -260,7 +265,7 @@ public void cancel(String jobId) {\n     if (!properties.setReadable(false) || !properties.setReadable(true, true)) {\n       throw new IOException(\"Cannot change permissions of job properties file.\");\n     }\n-    properties.deleteOnExit();\n+    sparkTmpProperties = properties;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "32a86738d20e441a980178e4f6de18828f4eb7c4"}, "originalPosition": 24}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYzMjA3OTYy", "url": "https://github.com/apache/hive/pull/1816#pullrequestreview-563207962", "createdAt": "2021-01-07T04:47:28Z", "commit": {"oid": "32a86738d20e441a980178e4f6de18828f4eb7c4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2819, "cost": 1, "resetAt": "2021-10-29T19:57:52Z"}}}