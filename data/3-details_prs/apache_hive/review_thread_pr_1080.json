{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMxMjg5OTM1", "number": 1080, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOVQxNToyNDoyOVrOED8BsA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQxMzoxMTozNFrOEESa7A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyNTY0NjU2OnYy", "diffSide": "RIGHT", "path": "common/src/java/org/apache/hadoop/hive/conf/HiveConf.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOVQxNToyNDoyOVrOGhP_rw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOVQxNjoxMToyOVrOGhSEDA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzUxODI1NQ==", "bodyText": "The second value here, I believe is a 'default' value. The default should be HIVE-%s. Also please update comments to explain how this works.", "url": "https://github.com/apache/hive/pull/1080#discussion_r437518255", "createdAt": "2020-06-09T15:24:29Z", "author": {"login": "belugabehr"}, "path": "common/src/java/org/apache/hadoop/hive/conf/HiveConf.java", "diffHunk": "@@ -1500,6 +1500,9 @@ private static void populateLlapDaemonVarsSet(Set<String> llapDaemonVarsSetLocal\n     HIVEQUERYNAME (\"hive.query.name\", null,\n         \"This named is used by Tez to set the dag name. This name in turn will appear on \\n\" +\n         \"the Tez UI representing the work that was done.\"),\n+    HIVETEZJOBNAME(\"tez.job.name\", null,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e716908e288ff391058f78e2b5fedbec50a2684b"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzU1MjE0MA==", "bodyText": "We can use 'set tez.job.name=<customized_job_name>;' or '--hiveconf ez.job.name=<customized_job_name>'  to use this function to customize Yarn application name when we run a sql", "url": "https://github.com/apache/hive/pull/1080#discussion_r437552140", "createdAt": "2020-06-09T16:11:29Z", "author": {"login": "xiejiajun"}, "path": "common/src/java/org/apache/hadoop/hive/conf/HiveConf.java", "diffHunk": "@@ -1500,6 +1500,9 @@ private static void populateLlapDaemonVarsSet(Set<String> llapDaemonVarsSetLocal\n     HIVEQUERYNAME (\"hive.query.name\", null,\n         \"This named is used by Tez to set the dag name. This name in turn will appear on \\n\" +\n         \"the Tez UI representing the work that was done.\"),\n+    HIVETEZJOBNAME(\"tez.job.name\", null,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzUxODI1NQ=="}, "originalCommit": {"oid": "e716908e288ff391058f78e2b5fedbec50a2684b"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyNTY0OTI2OnYy", "diffSide": "RIGHT", "path": "ql/src/java/org/apache/hadoop/hive/ql/exec/tez/TezSessionState.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOVQxNToyNDo1NlrOGhQBdQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOVQxNjoxMzozNlrOGhSJWw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzUxODcwOQ==", "bodyText": "Here is what I am suggesting:\n    String tezJobNameFormat = HiveConf.getVar(conf, ConfVars.HIVETEZJOBNAME);\n    final TezClient session = TezClient.newBuilder(String.format(tezJobNameFormat, sessionId), tezConfig)", "url": "https://github.com/apache/hive/pull/1080#discussion_r437518709", "createdAt": "2020-06-09T15:24:56Z", "author": {"login": "belugabehr"}, "path": "ql/src/java/org/apache/hadoop/hive/ql/exec/tez/TezSessionState.java", "diffHunk": "@@ -317,7 +317,8 @@ protected void openInternal(final HiveConf conf, Collection<String> additionalFi\n \n     setupSessionAcls(tezConfig, conf);\n \n-    final TezClient session = TezClient.newBuilder(\"HIVE-\" + sessionId, tezConfig)\n+    String tezJobName = HiveConf.getVar(conf, ConfVars.HIVETEZJOBNAME, sessionId);\n+    final TezClient session = TezClient.newBuilder(String.format(\"HIVE-%s\", tezJobName), tezConfig)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e716908e288ff391058f78e2b5fedbec50a2684b"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzU1MzQ5OQ==", "bodyText": "Thanks for the hint, I have updated the code according to your suggestion", "url": "https://github.com/apache/hive/pull/1080#discussion_r437553499", "createdAt": "2020-06-09T16:13:36Z", "author": {"login": "xiejiajun"}, "path": "ql/src/java/org/apache/hadoop/hive/ql/exec/tez/TezSessionState.java", "diffHunk": "@@ -317,7 +317,8 @@ protected void openInternal(final HiveConf conf, Collection<String> additionalFi\n \n     setupSessionAcls(tezConfig, conf);\n \n-    final TezClient session = TezClient.newBuilder(\"HIVE-\" + sessionId, tezConfig)\n+    String tezJobName = HiveConf.getVar(conf, ConfVars.HIVETEZJOBNAME, sessionId);\n+    final TezClient session = TezClient.newBuilder(String.format(\"HIVE-%s\", tezJobName), tezConfig)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzUxODcwOQ=="}, "originalCommit": {"oid": "e716908e288ff391058f78e2b5fedbec50a2684b"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyOTMxNTY0OnYy", "diffSide": "RIGHT", "path": "common/src/java/org/apache/hadoop/hive/conf/HiveConf.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQxMzoxMTozNFrOGh0FjQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQxNDo1MTowMVrOGh4qrg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODEwOTU4MQ==", "bodyText": "Still need to update this comment.  Something like:\nThe job name may be a Java String.format() String, to which a the session ID will be supplied as the single parameter.", "url": "https://github.com/apache/hive/pull/1080#discussion_r438109581", "createdAt": "2020-06-10T13:11:34Z", "author": {"login": "belugabehr"}, "path": "common/src/java/org/apache/hadoop/hive/conf/HiveConf.java", "diffHunk": "@@ -1500,6 +1500,9 @@ private static void populateLlapDaemonVarsSet(Set<String> llapDaemonVarsSetLocal\n     HIVEQUERYNAME (\"hive.query.name\", null,\n         \"This named is used by Tez to set the dag name. This name in turn will appear on \\n\" +\n         \"the Tez UI representing the work that was done.\"),\n+    HIVETEZJOBNAME(\"tez.job.name\", \"HIVE-%s\",\n+        \"This named is used by Tez to set the job name. This name in turn will appear on \\n\" +\n+        \"the Yarn UI representing the Yarn Application Name.\"),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "90d222dabb5e8ade9f55e303ac236a8e135e21ab"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODE4NDYyMg==", "bodyText": "@belugabehr\nok. I have updated the comment", "url": "https://github.com/apache/hive/pull/1080#discussion_r438184622", "createdAt": "2020-06-10T14:51:01Z", "author": {"login": "xiejiajun"}, "path": "common/src/java/org/apache/hadoop/hive/conf/HiveConf.java", "diffHunk": "@@ -1500,6 +1500,9 @@ private static void populateLlapDaemonVarsSet(Set<String> llapDaemonVarsSetLocal\n     HIVEQUERYNAME (\"hive.query.name\", null,\n         \"This named is used by Tez to set the dag name. This name in turn will appear on \\n\" +\n         \"the Tez UI representing the work that was done.\"),\n+    HIVETEZJOBNAME(\"tez.job.name\", \"HIVE-%s\",\n+        \"This named is used by Tez to set the job name. This name in turn will appear on \\n\" +\n+        \"the Yarn UI representing the Yarn Application Name.\"),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODEwOTU4MQ=="}, "originalCommit": {"oid": "90d222dabb5e8ade9f55e303ac236a8e135e21ab"}, "originalPosition": 6}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 753, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}