{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM0NjEwNjUy", "number": 1113, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQxNDowNDozNFrOEF9EFQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQxNDowNDozNFrOEF9EFQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0Njc4ODA1OnYy", "diffSide": "RIGHT", "path": "standalone-metastore/metastore-server/src/main/sql/mysql/upgrade-3.2.0-to-4.0.0.mysql.sql", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQxNDowNDozNFrOGkdAhQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQxNDozOTo0OVrOGkeoWg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDg3NzE4OQ==", "bodyText": "My guess is that this was caused by the difference between MySQL and MariaDB. If I remember correctly the test uses MariaDB. Could you please check manually with MySQL 5 and MySQL 8?\nThanks,\nPeter", "url": "https://github.com/apache/hive/pull/1113#discussion_r440877189", "createdAt": "2020-06-16T14:04:34Z", "author": {"login": "pvary"}, "path": "standalone-metastore/metastore-server/src/main/sql/mysql/upgrade-3.2.0-to-4.0.0.mysql.sql", "diffHunk": "@@ -88,9 +88,9 @@ PREPARE stmt FROM @s;\n EXECUTE stmt;\n DEALLOCATE PREPARE stmt;\n RENAME TABLE NEXT_TXN_ID TO TXN_LOCK_TBL;\n-ALTER TABLE TXN_LOCK_TBL RENAME COLUMN NTXN_NEXT TO TXN_LOCK;\n+ALTER TABLE TXN_LOCK_TBL CHANGE NTXN_NEXT TXN_LOCK bigint;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f61b428a46277d6ba9591b406335c04b1e621e11"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDkwMzc3MA==", "bodyText": "In Mysql 8 both the syntax works fine but in MySql 5.7 Rename fails.", "url": "https://github.com/apache/hive/pull/1113#discussion_r440903770", "createdAt": "2020-06-16T14:39:49Z", "author": {"login": "aasha"}, "path": "standalone-metastore/metastore-server/src/main/sql/mysql/upgrade-3.2.0-to-4.0.0.mysql.sql", "diffHunk": "@@ -88,9 +88,9 @@ PREPARE stmt FROM @s;\n EXECUTE stmt;\n DEALLOCATE PREPARE stmt;\n RENAME TABLE NEXT_TXN_ID TO TXN_LOCK_TBL;\n-ALTER TABLE TXN_LOCK_TBL RENAME COLUMN NTXN_NEXT TO TXN_LOCK;\n+ALTER TABLE TXN_LOCK_TBL CHANGE NTXN_NEXT TXN_LOCK bigint;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDg3NzE4OQ=="}, "originalCommit": {"oid": "f61b428a46277d6ba9591b406335c04b1e621e11"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 616, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}