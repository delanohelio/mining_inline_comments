{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQzMTUxOTkw", "number": 1201, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNlQxNDoxNjoxN1rOELtHLA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNlQxNDoxNzoyNFrOELtI8g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgwNzA4OTA4OnYy", "diffSide": "RIGHT", "path": "standalone-metastore/metastore-common/src/main/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNlQxNDoxNjoxN1rOGtZLfw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNlQxNTowNzoxOVrOGtbX4g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDI1MTY0Nw==", "bodyText": "Nit:\nDo not need to convert it to an array first.  This will work:\nLOG.info(\"Resolved metastore uris: {}\", metastoreUrisString);", "url": "https://github.com/apache/hive/pull/1201#discussion_r450251647", "createdAt": "2020-07-06T14:16:17Z", "author": {"login": "belugabehr"}, "path": "standalone-metastore/metastore-common/src/main/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java", "diffHunk": "@@ -327,6 +327,13 @@ private void resolveUris() throws MetaException {\n       MetaStoreUtils.logAndThrowMetaException(e);\n     }\n \n+    if (metastoreUrisString.isEmpty() && \"zookeeper\".equalsIgnoreCase(serviceDiscoveryMode)) {\n+      throw new MetaException(\"No metastore server available. \"\n+          + \"Please ensure that at least one metastore server is online\");\n+    }\n+\n+    LOG.info(\"Resolved metastore uris: \" + Arrays.toString(metastoreUrisString.toArray()));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aa7cc0fe9253dc1533341eec794437b9c653b29b"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDI4NzU4Ng==", "bodyText": "done", "url": "https://github.com/apache/hive/pull/1201#discussion_r450287586", "createdAt": "2020-07-06T15:07:19Z", "author": {"login": "dengzhhu653"}, "path": "standalone-metastore/metastore-common/src/main/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java", "diffHunk": "@@ -327,6 +327,13 @@ private void resolveUris() throws MetaException {\n       MetaStoreUtils.logAndThrowMetaException(e);\n     }\n \n+    if (metastoreUrisString.isEmpty() && \"zookeeper\".equalsIgnoreCase(serviceDiscoveryMode)) {\n+      throw new MetaException(\"No metastore server available. \"\n+          + \"Please ensure that at least one metastore server is online\");\n+    }\n+\n+    LOG.info(\"Resolved metastore uris: \" + Arrays.toString(metastoreUrisString.toArray()));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDI1MTY0Nw=="}, "originalCommit": {"oid": "aa7cc0fe9253dc1533341eec794437b9c653b29b"}, "originalPosition": 9}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgwNzA5MzYyOnYy", "diffSide": "RIGHT", "path": "standalone-metastore/metastore-common/src/main/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNlQxNDoxNzoyNFrOGtZOSw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNlQxNTowODowMFrOGtbZ4A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDI1MjM2Mw==", "bodyText": "Please add some additional context here regarding ZooKeeper.  Something like:\nNo metastore store service discovered in ZooKeeper\nor\nNo metastore store service currently registered in ZookKeeper", "url": "https://github.com/apache/hive/pull/1201#discussion_r450252363", "createdAt": "2020-07-06T14:17:24Z", "author": {"login": "belugabehr"}, "path": "standalone-metastore/metastore-common/src/main/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java", "diffHunk": "@@ -327,6 +327,13 @@ private void resolveUris() throws MetaException {\n       MetaStoreUtils.logAndThrowMetaException(e);\n     }\n \n+    if (metastoreUrisString.isEmpty() && \"zookeeper\".equalsIgnoreCase(serviceDiscoveryMode)) {\n+      throw new MetaException(\"No metastore server available. \"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aa7cc0fe9253dc1533341eec794437b9c653b29b"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDI4ODA5Ng==", "bodyText": "done,  @belugabehr thank you very much for the review.", "url": "https://github.com/apache/hive/pull/1201#discussion_r450288096", "createdAt": "2020-07-06T15:08:00Z", "author": {"login": "dengzhhu653"}, "path": "standalone-metastore/metastore-common/src/main/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java", "diffHunk": "@@ -327,6 +327,13 @@ private void resolveUris() throws MetaException {\n       MetaStoreUtils.logAndThrowMetaException(e);\n     }\n \n+    if (metastoreUrisString.isEmpty() && \"zookeeper\".equalsIgnoreCase(serviceDiscoveryMode)) {\n+      throw new MetaException(\"No metastore server available. \"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDI1MjM2Mw=="}, "originalCommit": {"oid": "aa7cc0fe9253dc1533341eec794437b9c653b29b"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 699, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}