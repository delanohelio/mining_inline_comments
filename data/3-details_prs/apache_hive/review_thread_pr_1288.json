{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU0NTI0ODc1", "number": 1288, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QwODozNDozMlrOERWtUg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QwODozODoyMVrOERWynA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg2NjMzMjk4OnYy", "diffSide": "RIGHT", "path": "ql/src/java/org/apache/hadoop/hive/llap/ProactiveEviction.java", "isResolved": true, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QwODozNDozMlrOG2BHZg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxMjozMzoxOFrOG2IYlg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTI5NDU2Ng==", "bodyText": "I do not get this comment. \"request may only contain one information for one DB\".\nCould you please elaborate?", "url": "https://github.com/apache/hive/pull/1288#discussion_r459294566", "createdAt": "2020-07-23T08:34:32Z", "author": {"login": "pvary"}, "path": "ql/src/java/org/apache/hadoop/hive/llap/ProactiveEviction.java", "diffHunk": "@@ -229,12 +230,59 @@ public String getSingleDbName() {\n     }\n \n     /**\n-     * Match a CacheTag to this eviction request.\n+     * Match a CacheTag to this eviction request. Must only be used on LLAP side only, where the received request may", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "78153869c3721f83151c42e4acc6d481ccd29a6b"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTM0NzI5OQ==", "bodyText": "Proactive eviction requests are on a per DB basis: https://github.com/apache/hive/blob/master/llap-common/src/protobuf/LlapDaemonProtocol.proto#L234-L238\nThis comment is just a heads-up of that fact.", "url": "https://github.com/apache/hive/pull/1288#discussion_r459347299", "createdAt": "2020-07-23T10:13:05Z", "author": {"login": "szlta"}, "path": "ql/src/java/org/apache/hadoop/hive/llap/ProactiveEviction.java", "diffHunk": "@@ -229,12 +230,59 @@ public String getSingleDbName() {\n     }\n \n     /**\n-     * Match a CacheTag to this eviction request.\n+     * Match a CacheTag to this eviction request. Must only be used on LLAP side only, where the received request may", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTI5NDU2Ng=="}, "originalCommit": {"oid": "78153869c3721f83151c42e4acc6d481ccd29a6b"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTM3MTE3MA==", "bodyText": "Why is this checked here, and not at construction time, or when we receive / parse the request? This seems a little awkward for me.", "url": "https://github.com/apache/hive/pull/1288#discussion_r459371170", "createdAt": "2020-07-23T11:04:00Z", "author": {"login": "pvary"}, "path": "ql/src/java/org/apache/hadoop/hive/llap/ProactiveEviction.java", "diffHunk": "@@ -229,12 +230,59 @@ public String getSingleDbName() {\n     }\n \n     /**\n-     * Match a CacheTag to this eviction request.\n+     * Match a CacheTag to this eviction request. Must only be used on LLAP side only, where the received request may", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTI5NDU2Ng=="}, "originalCommit": {"oid": "78153869c3721f83151c42e4acc6d481ccd29a6b"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTQxMjAxOA==", "bodyText": "This Request class is used on HS2 side too, and there it may contain multiple DBs, hence there is no such 'general' restriction in this class. Although we're not doing this right now, but It's not impossible to call this method while we have multiple DBs, that's why the javadoc details the restriction on this method only.", "url": "https://github.com/apache/hive/pull/1288#discussion_r459412018", "createdAt": "2020-07-23T12:30:19Z", "author": {"login": "szlta"}, "path": "ql/src/java/org/apache/hadoop/hive/llap/ProactiveEviction.java", "diffHunk": "@@ -229,12 +230,59 @@ public String getSingleDbName() {\n     }\n \n     /**\n-     * Match a CacheTag to this eviction request.\n+     * Match a CacheTag to this eviction request. Must only be used on LLAP side only, where the received request may", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTI5NDU2Ng=="}, "originalCommit": {"oid": "78153869c3721f83151c42e4acc6d481ccd29a6b"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTQxMzY1NA==", "bodyText": "Thanks for the clarification!", "url": "https://github.com/apache/hive/pull/1288#discussion_r459413654", "createdAt": "2020-07-23T12:33:18Z", "author": {"login": "pvary"}, "path": "ql/src/java/org/apache/hadoop/hive/llap/ProactiveEviction.java", "diffHunk": "@@ -229,12 +230,59 @@ public String getSingleDbName() {\n     }\n \n     /**\n-     * Match a CacheTag to this eviction request.\n+     * Match a CacheTag to this eviction request. Must only be used on LLAP side only, where the received request may", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTI5NDU2Ng=="}, "originalCommit": {"oid": "78153869c3721f83151c42e4acc6d481ccd29a6b"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg2NjM0NjUyOnYy", "diffSide": "RIGHT", "path": "llap-server/src/test/org/apache/hadoop/hive/llap/cache/TestCacheContentsTracker.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QwODozODoyMVrOG2BPWg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxMTowMDo1M1rOG2Ftcw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTI5NjYwMg==", "bodyText": "Could you please explain why we need LinkedHashMap?", "url": "https://github.com/apache/hive/pull/1288#discussion_r459296602", "createdAt": "2020-07-23T08:38:21Z", "author": {"login": "pvary"}, "path": "llap-server/src/test/org/apache/hadoop/hive/llap/cache/TestCacheContentsTracker.java", "diffHunk": "@@ -124,7 +125,7 @@ public void testCacheTagComparison() {\n \n   @Test\n   public void testEncodingDecoding() throws Exception {\n-    Map<String, String> partDescs = new HashMap<>();\n+    LinkedHashMap<String, String> partDescs = new LinkedHashMap<>();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "78153869c3721f83151c42e4acc6d481ccd29a6b"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTM0NTU4Mg==", "bodyText": "That's because (nested) partition specification (e.g. p1=v11,p2=v12) has to be sorted.", "url": "https://github.com/apache/hive/pull/1288#discussion_r459345582", "createdAt": "2020-07-23T10:09:59Z", "author": {"login": "szlta"}, "path": "llap-server/src/test/org/apache/hadoop/hive/llap/cache/TestCacheContentsTracker.java", "diffHunk": "@@ -124,7 +125,7 @@ public void testCacheTagComparison() {\n \n   @Test\n   public void testEncodingDecoding() throws Exception {\n-    Map<String, String> partDescs = new HashMap<>();\n+    LinkedHashMap<String, String> partDescs = new LinkedHashMap<>();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTI5NjYwMg=="}, "originalCommit": {"oid": "78153869c3721f83151c42e4acc6d481ccd29a6b"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTM2OTg0Mw==", "bodyText": "Got it! Thanks!", "url": "https://github.com/apache/hive/pull/1288#discussion_r459369843", "createdAt": "2020-07-23T11:00:53Z", "author": {"login": "pvary"}, "path": "llap-server/src/test/org/apache/hadoop/hive/llap/cache/TestCacheContentsTracker.java", "diffHunk": "@@ -124,7 +125,7 @@ public void testCacheTagComparison() {\n \n   @Test\n   public void testEncodingDecoding() throws Exception {\n-    Map<String, String> partDescs = new HashMap<>();\n+    LinkedHashMap<String, String> partDescs = new LinkedHashMap<>();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTI5NjYwMg=="}, "originalCommit": {"oid": "78153869c3721f83151c42e4acc6d481ccd29a6b"}, "originalPosition": 13}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 602, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}