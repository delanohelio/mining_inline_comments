{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAzNDE4Nzg0", "number": 1580, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQyMToxNTo1MVrOEtqizg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQxOTowNDozNlrOEuIjKA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE2MzE4NDE0OnYy", "diffSide": "RIGHT", "path": "service/src/java/org/apache/hive/service/cli/thrift/ThriftHttpCLIService.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQyMToxNTo1MVrOHhlU2g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQwMjo0NDo1OVrOHhuyeA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDk3NjYwMg==", "bodyText": "keyStoreAlgorithm looks unused? Might have to be used around line 153?", "url": "https://github.com/apache/hive/pull/1580#discussion_r504976602", "createdAt": "2020-10-14T21:15:51Z", "author": {"login": "risdenk"}, "path": "service/src/java/org/apache/hive/service/cli/thrift/ThriftHttpCLIService.java", "diffHunk": "@@ -136,6 +136,12 @@ public void onClosed(Connection connection) {\n               ConfVars.HIVE_SERVER2_SSL_KEYSTORE_PATH.varname \n               + \" Not configured for SSL connection\");\n         }\n+        String keyStoreType = hiveConf.getVar(ConfVars.HIVE_SERVER2_SSL_KEYSTORE_TYPE).trim();\n+        if (keyStoreType.isEmpty()) {\n+          keyStoreType = KeyStore.getDefaultType();\n+        }\n+        String keyStoreAlgorithm = hiveConf.getVar(ConfVars.HIVE_SERVER2_SSL_KEYSTORE_ALGORITHM).trim();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f948a3ff27fb3a2ed2deeacc2ae9e50a3f4b704d"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTA4MjEzMw==", "bodyText": "I will add", "url": "https://github.com/apache/hive/pull/1580#discussion_r505082133", "createdAt": "2020-10-14T23:53:29Z", "author": {"login": "yongzhi"}, "path": "service/src/java/org/apache/hive/service/cli/thrift/ThriftHttpCLIService.java", "diffHunk": "@@ -136,6 +136,12 @@ public void onClosed(Connection connection) {\n               ConfVars.HIVE_SERVER2_SSL_KEYSTORE_PATH.varname \n               + \" Not configured for SSL connection\");\n         }\n+        String keyStoreType = hiveConf.getVar(ConfVars.HIVE_SERVER2_SSL_KEYSTORE_TYPE).trim();\n+        if (keyStoreType.isEmpty()) {\n+          keyStoreType = KeyStore.getDefaultType();\n+        }\n+        String keyStoreAlgorithm = hiveConf.getVar(ConfVars.HIVE_SERVER2_SSL_KEYSTORE_ALGORITHM).trim();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDk3NjYwMg=="}, "originalCommit": {"oid": "f948a3ff27fb3a2ed2deeacc2ae9e50a3f4b704d"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTEzMTY0MA==", "bodyText": "For the MetastoreConf changes in testing because the previous HiveConf metastore related properties are all deprecated, I just switch to the corresponding properties in MetastoreConf", "url": "https://github.com/apache/hive/pull/1580#discussion_r505131640", "createdAt": "2020-10-15T02:44:59Z", "author": {"login": "yongzhi"}, "path": "service/src/java/org/apache/hive/service/cli/thrift/ThriftHttpCLIService.java", "diffHunk": "@@ -136,6 +136,12 @@ public void onClosed(Connection connection) {\n               ConfVars.HIVE_SERVER2_SSL_KEYSTORE_PATH.varname \n               + \" Not configured for SSL connection\");\n         }\n+        String keyStoreType = hiveConf.getVar(ConfVars.HIVE_SERVER2_SSL_KEYSTORE_TYPE).trim();\n+        if (keyStoreType.isEmpty()) {\n+          keyStoreType = KeyStore.getDefaultType();\n+        }\n+        String keyStoreAlgorithm = hiveConf.getVar(ConfVars.HIVE_SERVER2_SSL_KEYSTORE_ALGORITHM).trim();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDk3NjYwMg=="}, "originalCommit": {"oid": "f948a3ff27fb3a2ed2deeacc2ae9e50a3f4b704d"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE2ODAxNjM1OnYy", "diffSide": "RIGHT", "path": "jdbc/src/java/org/apache/hive/jdbc/HiveConnection.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQxODo0MDoyOVrOHiVO-g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQxODo0Nzo0OFrOHiVfdQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTc2MTUzMA==", "bodyText": "This import seems un-necessary. Can be removed.\nI did not like the idea of adding a dependency on this class into the Hive JDBC module but looks like its not needed.", "url": "https://github.com/apache/hive/pull/1580#discussion_r505761530", "createdAt": "2020-10-15T18:40:29Z", "author": {"login": "nrg4878"}, "path": "jdbc/src/java/org/apache/hive/jdbc/HiveConnection.java", "diffHunk": "@@ -19,6 +19,7 @@\n package org.apache.hive.jdbc;\n \n import com.google.common.annotations.VisibleForTesting;\n+import org.apache.hadoop.hive.metastore.conf.MetastoreConf;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63316cb8fa4603a6da904b38ac9417c40ba4b31b"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTc2NTc0OQ==", "bodyText": "Weird, I did not remember do that. Maybe the editor help me? I will remove it.", "url": "https://github.com/apache/hive/pull/1580#discussion_r505765749", "createdAt": "2020-10-15T18:47:48Z", "author": {"login": "yongzhi"}, "path": "jdbc/src/java/org/apache/hive/jdbc/HiveConnection.java", "diffHunk": "@@ -19,6 +19,7 @@\n package org.apache.hive.jdbc;\n \n import com.google.common.annotations.VisibleForTesting;\n+import org.apache.hadoop.hive.metastore.conf.MetastoreConf;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTc2MTUzMA=="}, "originalCommit": {"oid": "63316cb8fa4603a6da904b38ac9417c40ba4b31b"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE2ODEwMDI0OnYy", "diffSide": "RIGHT", "path": "jdbc/src/java/org/apache/hive/jdbc/Utils.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQxOTowNDozNlrOHiWDtw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQxOTo0NzoxN1rOHiXc_Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTc3NTAzMQ==", "bodyText": "So now instead of defaulting to JKS, the client always has to provide \"trustStoreType=JKS\" in the connection params? Wouldnt this break backward compatibility with existing applications ?", "url": "https://github.com/apache/hive/pull/1580#discussion_r505775031", "createdAt": "2020-10-15T19:04:36Z", "author": {"login": "nrg4878"}, "path": "jdbc/src/java/org/apache/hive/jdbc/Utils.java", "diffHunk": "@@ -105,6 +105,8 @@\n     public static final String USE_SSL = \"ssl\";\n     public static final String SSL_TRUST_STORE = \"sslTrustStore\";\n     public static final String SSL_TRUST_STORE_PASSWORD = \"trustStorePassword\";\n+    public static final String SSL_TRUST_STORE_TYPE = \"trustStoreType\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63316cb8fa4603a6da904b38ac9417c40ba4b31b"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTc5Nzg4NQ==", "bodyText": "No, this param is optional, if it does not have value, KeyStore.getDefaultType() will be used.", "url": "https://github.com/apache/hive/pull/1580#discussion_r505797885", "createdAt": "2020-10-15T19:47:17Z", "author": {"login": "yongzhi"}, "path": "jdbc/src/java/org/apache/hive/jdbc/Utils.java", "diffHunk": "@@ -105,6 +105,8 @@\n     public static final String USE_SSL = \"ssl\";\n     public static final String SSL_TRUST_STORE = \"sslTrustStore\";\n     public static final String SSL_TRUST_STORE_PASSWORD = \"trustStorePassword\";\n+    public static final String SSL_TRUST_STORE_TYPE = \"trustStoreType\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTc3NTAzMQ=="}, "originalCommit": {"oid": "63316cb8fa4603a6da904b38ac9417c40ba4b31b"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 345, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}