{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE0OTQ5MzI1", "number": 1650, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xM1QxMzoyOTo1MlrOE4qmIA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xM1QxMzozMDozNlrOE4qnKw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI3ODUzNjAwOnYy", "diffSide": "RIGHT", "path": "common/src/test/org/apache/hadoop/hive/common/type/TestTimestampTZ.java", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xM1QxMzoyOTo1MlrOHyuWUQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0yOFQxODozNzowOVrOIcFhzQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjk1MDIyNQ==", "bodyText": "First loop redundant?", "url": "https://github.com/apache/hive/pull/1650#discussion_r522950225", "createdAt": "2020-11-13T13:29:52Z", "author": {"login": "pgaref"}, "path": "common/src/test/org/apache/hadoop/hive/common/type/TestTimestampTZ.java", "diffHunk": "@@ -84,6 +86,18 @@ public void testVariations() {\n     TimestampTZUtil.parse(\"2017-05-08 07:45:00-3:00\");\n   }\n \n+  @Test\n+  public void testPerformance() {\n+    for (int i = 0; i < 100; i++) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bd564a77128cf49bfbafa4a867baec98ca64e6e0"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODE5ODIwOA==", "bodyText": "This is to warm up the jvm before measuring; i added a clarifying comment.", "url": "https://github.com/apache/hive/pull/1650#discussion_r528198208", "createdAt": "2020-11-21T13:45:54Z", "author": {"login": "VPriesnitz"}, "path": "common/src/test/org/apache/hadoop/hive/common/type/TestTimestampTZ.java", "diffHunk": "@@ -84,6 +86,18 @@ public void testVariations() {\n     TimestampTZUtil.parse(\"2017-05-08 07:45:00-3:00\");\n   }\n \n+  @Test\n+  public void testPerformance() {\n+    for (int i = 0; i < 100; i++) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjk1MDIyNQ=="}, "originalCommit": {"oid": "bd564a77128cf49bfbafa4a867baec98ca64e6e0"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODU5NjAwNQ==", "bodyText": "I see -- usually we test the correctness with Junit tests and the performance sensitive parts with jmh tests (where you could for example test and compare the old behaviour with the new) -- check itests->hive-jmh package.\nNot critical for this change though", "url": "https://github.com/apache/hive/pull/1650#discussion_r528596005", "createdAt": "2020-11-23T10:17:30Z", "author": {"login": "pgaref"}, "path": "common/src/test/org/apache/hadoop/hive/common/type/TestTimestampTZ.java", "diffHunk": "@@ -84,6 +86,18 @@ public void testVariations() {\n     TimestampTZUtil.parse(\"2017-05-08 07:45:00-3:00\");\n   }\n \n+  @Test\n+  public void testPerformance() {\n+    for (int i = 0; i < 100; i++) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjk1MDIyNQ=="}, "originalCommit": {"oid": "bd564a77128cf49bfbafa4a867baec98ca64e6e0"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NjMyMTYxMw==", "bodyText": "Yes. Please remove.", "url": "https://github.com/apache/hive/pull/1650#discussion_r566321613", "createdAt": "2021-01-28T18:37:09Z", "author": {"login": "belugabehr"}, "path": "common/src/test/org/apache/hadoop/hive/common/type/TestTimestampTZ.java", "diffHunk": "@@ -84,6 +86,18 @@ public void testVariations() {\n     TimestampTZUtil.parse(\"2017-05-08 07:45:00-3:00\");\n   }\n \n+  @Test\n+  public void testPerformance() {\n+    for (int i = 0; i < 100; i++) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjk1MDIyNQ=="}, "originalCommit": {"oid": "bd564a77128cf49bfbafa4a867baec98ca64e6e0"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI3ODUzODY3OnYy", "diffSide": "RIGHT", "path": "common/src/test/org/apache/hadoop/hive/common/type/TestTimestampTZ.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xM1QxMzozMDozNlrOHyuX6Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMVQxMzo0NzowMlrOH3uqqQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjk1MDYzMw==", "bodyText": "Can we add some randomness on the parsed timestamp? Maybe use i as part of time?", "url": "https://github.com/apache/hive/pull/1650#discussion_r522950633", "createdAt": "2020-11-13T13:30:36Z", "author": {"login": "pgaref"}, "path": "common/src/test/org/apache/hadoop/hive/common/type/TestTimestampTZ.java", "diffHunk": "@@ -84,6 +86,18 @@ public void testVariations() {\n     TimestampTZUtil.parse(\"2017-05-08 07:45:00-3:00\");\n   }\n \n+  @Test\n+  public void testPerformance() {\n+    for (int i = 0; i < 100; i++) {\n+      TimestampTZUtil.parse(\"2017-01-01 13:33:00\", ZoneId.of(\"UTC\"));\n+    }\n+    Stopwatch sw = Stopwatch.createStarted();\n+    for (int i = 0; i < 10000; i++) {\n+      TimestampTZUtil.parse(\"2017-01-01 13:33:00\", ZoneId.of(\"UTC\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bd564a77128cf49bfbafa4a867baec98ca64e6e0"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODE5ODMxMw==", "bodyText": "Good point, i made the timestamp depending on i.", "url": "https://github.com/apache/hive/pull/1650#discussion_r528198313", "createdAt": "2020-11-21T13:47:02Z", "author": {"login": "VPriesnitz"}, "path": "common/src/test/org/apache/hadoop/hive/common/type/TestTimestampTZ.java", "diffHunk": "@@ -84,6 +86,18 @@ public void testVariations() {\n     TimestampTZUtil.parse(\"2017-05-08 07:45:00-3:00\");\n   }\n \n+  @Test\n+  public void testPerformance() {\n+    for (int i = 0; i < 100; i++) {\n+      TimestampTZUtil.parse(\"2017-01-01 13:33:00\", ZoneId.of(\"UTC\"));\n+    }\n+    Stopwatch sw = Stopwatch.createStarted();\n+    for (int i = 0; i < 10000; i++) {\n+      TimestampTZUtil.parse(\"2017-01-01 13:33:00\", ZoneId.of(\"UTC\"));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjk1MDYzMw=="}, "originalCommit": {"oid": "bd564a77128cf49bfbafa4a867baec98ca64e6e0"}, "originalPosition": 26}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 225, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}