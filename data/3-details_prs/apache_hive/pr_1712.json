{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI3Nzc3Nzgz", "number": 1712, "title": "HIVE-24433 - AutoCompaction is not getting triggered for CamelCase Partition Values", "bodyText": "", "createdAt": "2020-11-26T02:03:28Z", "url": "https://github.com/apache/hive/pull/1712", "merged": true, "mergeCommit": {"oid": "5a95d2e00b6be7029c6fa5c410499b38506a8c67"}, "closed": true, "closedAt": "2020-12-07T09:26:53Z", "author": {"login": "nareshpr"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdgZ1jcABqjQwNDM5MDQ3NjQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdjCmHxABqjQwNzUwNzcyMjE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3b5e6108402ce710550e179c562829bb49495cff", "author": {"user": {"login": "nareshpr", "name": "Naresh P R"}}, "url": "https://github.com/apache/hive/commit/3b5e6108402ce710550e179c562829bb49495cff", "committedDate": "2020-11-26T01:58:03Z", "message": "HIVE-24433 - AutoCompaction is not getting triggered for CamelCase Partition Values"}, "afterCommit": {"oid": "990bfd2aaf98ae6477a8d7ba0fb3f2874da7c375", "author": {"user": {"login": "nareshpr", "name": "Naresh P R"}}, "url": "https://github.com/apache/hive/commit/990bfd2aaf98ae6477a8d7ba0fb3f2874da7c375", "committedDate": "2020-11-26T21:27:38Z", "message": "HIVE-24433 - AutoCompaction is not getting triggered for CamelCase Partition Values"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "990bfd2aaf98ae6477a8d7ba0fb3f2874da7c375", "author": {"user": {"login": "nareshpr", "name": "Naresh P R"}}, "url": "https://github.com/apache/hive/commit/990bfd2aaf98ae6477a8d7ba0fb3f2874da7c375", "committedDate": "2020-11-26T21:27:38Z", "message": "HIVE-24433 - AutoCompaction is not getting triggered for CamelCase Partition Values"}, "afterCommit": {"oid": "7ed99e0661d57f256c48f4b9ef95d64d6b6456a7", "author": {"user": {"login": "nareshpr", "name": "Naresh P R"}}, "url": "https://github.com/apache/hive/commit/7ed99e0661d57f256c48f4b9ef95d64d6b6456a7", "committedDate": "2020-11-27T05:51:36Z", "message": "HIVE-24433 - AutoCompaction is not getting triggered for CamelCase Partition Values"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQwNzQxMTQ0", "url": "https://github.com/apache/hive/pull/1712#pullrequestreview-540741144", "createdAt": "2020-11-30T09:44:10Z", "commit": {"oid": "7ed99e0661d57f256c48f4b9ef95d64d6b6456a7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0zMFQwOTo0NDoxMFrOH7y-DQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0zMFQwOTo0NDoxMFrOH7y-DQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjQ2MzExNw==", "bodyText": "@nareshpr , do you know if partition key name (name=value) is already normalized here?", "url": "https://github.com/apache/hive/pull/1712#discussion_r532463117", "createdAt": "2020-11-30T09:44:10Z", "author": {"login": "deniskuzZ"}, "path": "standalone-metastore/metastore-server/src/main/java/org/apache/hadoop/hive/metastore/txn/TxnHandler.java", "diffHunk": "@@ -2725,7 +2725,7 @@ private void insertTxnComponents(long txnid, LockRequest rqst, Connection dbConn\n           }\n           String dbName = normalizeCase(lc.getDbname());\n           String tblName = normalizeCase(lc.getTablename());\n-          String partName = normalizeCase(lc.getPartitionname());\n+          String partName = lc.getPartitionname();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7ed99e0661d57f256c48f4b9ef95d64d6b6456a7"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7ed99e0661d57f256c48f4b9ef95d64d6b6456a7", "author": {"user": {"login": "nareshpr", "name": "Naresh P R"}}, "url": "https://github.com/apache/hive/commit/7ed99e0661d57f256c48f4b9ef95d64d6b6456a7", "committedDate": "2020-11-27T05:51:36Z", "message": "HIVE-24433 - AutoCompaction is not getting triggered for CamelCase Partition Values"}, "afterCommit": {"oid": "c4c3c059f935df37375b0f2df3574d6bde672d30", "author": {"user": {"login": "nareshpr", "name": "Naresh P R"}}, "url": "https://github.com/apache/hive/commit/c4c3c059f935df37375b0f2df3574d6bde672d30", "committedDate": "2020-12-04T05:06:42Z", "message": "HIVE-24433 - AutoCompaction is not getting triggered for CamelCase Partition Values"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ0NzI5OTM0", "url": "https://github.com/apache/hive/pull/1712#pullrequestreview-544729934", "createdAt": "2020-12-04T08:02:49Z", "commit": {"oid": "c4c3c059f935df37375b0f2df3574d6bde672d30"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQwODowMjo1MFrOH_FIVg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQwODowMjo1MFrOH_FIVg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTkwNjM5MA==", "bodyText": "No need for the else clause", "url": "https://github.com/apache/hive/pull/1712#discussion_r535906390", "createdAt": "2020-12-04T08:02:50Z", "author": {"login": "klcopp"}, "path": "standalone-metastore/metastore-server/src/main/java/org/apache/hadoop/hive/metastore/txn/TxnHandler.java", "diffHunk": "@@ -2877,6 +2877,20 @@ private static String normalizeCase(String s) {\n     return s == null ? null : s.toLowerCase();\n   }\n \n+  private static String normalizePartitionCase(String s) {\n+    if (s == null) {\n+      return null;\n+    } else {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c4c3c059f935df37375b0f2df3574d6bde672d30"}, "originalPosition": 25}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ0NzM0OTY5", "url": "https://github.com/apache/hive/pull/1712#pullrequestreview-544734969", "createdAt": "2020-12-04T08:11:29Z", "commit": {"oid": "c4c3c059f935df37375b0f2df3574d6bde672d30"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQwODoxMTozMFrOH_FZwg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQwODoxMTozMFrOH_FZwg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTkxMDg1MA==", "bodyText": "@nareshpr, LGTM, however could you please try to reuse FileUtils.makePartName(List partCols, List vals):\nMap<String, String> map = Splitter.on( \"=\" ).withKeyValueSeparator( Path.SEPARATOR ).split(lc.getPartitionname());\nreturn FileUtils.makePartName(new ArrayList<>(map.keySet()), new ArrayList<>(map.values()));", "url": "https://github.com/apache/hive/pull/1712#discussion_r535910850", "createdAt": "2020-12-04T08:11:30Z", "author": {"login": "deniskuzZ"}, "path": "standalone-metastore/metastore-server/src/main/java/org/apache/hadoop/hive/metastore/txn/TxnHandler.java", "diffHunk": "@@ -2877,6 +2877,20 @@ private static String normalizeCase(String s) {\n     return s == null ? null : s.toLowerCase();\n   }\n \n+  private static String normalizePartitionCase(String s) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c4c3c059f935df37375b0f2df3574d6bde672d30"}, "originalPosition": 22}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c4c3c059f935df37375b0f2df3574d6bde672d30", "author": {"user": {"login": "nareshpr", "name": "Naresh P R"}}, "url": "https://github.com/apache/hive/commit/c4c3c059f935df37375b0f2df3574d6bde672d30", "committedDate": "2020-12-04T05:06:42Z", "message": "HIVE-24433 - AutoCompaction is not getting triggered for CamelCase Partition Values"}, "afterCommit": {"oid": "31fbd32e013e01f678293f811643751f01de5d94", "author": {"user": {"login": "nareshpr", "name": "Naresh P R"}}, "url": "https://github.com/apache/hive/commit/31fbd32e013e01f678293f811643751f01de5d94", "committedDate": "2020-12-04T09:24:10Z", "message": "HIVE-24433 - AutoCompaction is not getting triggered for CamelCase Partition Values"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ0Nzg2NzEy", "url": "https://github.com/apache/hive/pull/1712#pullrequestreview-544786712", "createdAt": "2020-12-04T09:26:03Z", "commit": {"oid": "31fbd32e013e01f678293f811643751f01de5d94"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "31fbd32e013e01f678293f811643751f01de5d94", "author": {"user": {"login": "nareshpr", "name": "Naresh P R"}}, "url": "https://github.com/apache/hive/commit/31fbd32e013e01f678293f811643751f01de5d94", "committedDate": "2020-12-04T09:24:10Z", "message": "HIVE-24433 - AutoCompaction is not getting triggered for CamelCase Partition Values"}, "afterCommit": {"oid": "782f9528891dde4488414a6f05db2f2cbf13b6f5", "author": {"user": {"login": "nareshpr", "name": "Naresh P R"}}, "url": "https://github.com/apache/hive/commit/782f9528891dde4488414a6f05db2f2cbf13b6f5", "committedDate": "2020-12-04T17:51:33Z", "message": "HIVE-24433 - AutoCompaction is not getting triggered for CamelCase Partition Values"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "782f9528891dde4488414a6f05db2f2cbf13b6f5", "author": {"user": {"login": "nareshpr", "name": "Naresh P R"}}, "url": "https://github.com/apache/hive/commit/782f9528891dde4488414a6f05db2f2cbf13b6f5", "committedDate": "2020-12-04T17:51:33Z", "message": "HIVE-24433 - AutoCompaction is not getting triggered for CamelCase Partition Values"}, "afterCommit": {"oid": "bd36bc2fe761c50ef75cd696920e5a4f124f086a", "author": {"user": {"login": "nareshpr", "name": "Naresh P R"}}, "url": "https://github.com/apache/hive/commit/bd36bc2fe761c50ef75cd696920e5a4f124f086a", "committedDate": "2020-12-05T02:02:58Z", "message": "HIVE-24433 - AutoCompaction is not getting triggered for CamelCase Partition Values"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9147ad6b6c1ce3deffef600eef9dcced212abddc", "author": {"user": {"login": "nareshpr", "name": "Naresh P R"}}, "url": "https://github.com/apache/hive/commit/9147ad6b6c1ce3deffef600eef9dcced212abddc", "committedDate": "2020-12-05T02:05:47Z", "message": "HIVE-24433 - AutoCompaction is not getting triggered for CamelCase Partition Values"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bd36bc2fe761c50ef75cd696920e5a4f124f086a", "author": {"user": {"login": "nareshpr", "name": "Naresh P R"}}, "url": "https://github.com/apache/hive/commit/bd36bc2fe761c50ef75cd696920e5a4f124f086a", "committedDate": "2020-12-05T02:02:58Z", "message": "HIVE-24433 - AutoCompaction is not getting triggered for CamelCase Partition Values"}, "afterCommit": {"oid": "9147ad6b6c1ce3deffef600eef9dcced212abddc", "author": {"user": {"login": "nareshpr", "name": "Naresh P R"}}, "url": "https://github.com/apache/hive/commit/9147ad6b6c1ce3deffef600eef9dcced212abddc", "committedDate": "2020-12-05T02:05:47Z", "message": "HIVE-24433 - AutoCompaction is not getting triggered for CamelCase Partition Values"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2824, "cost": 1, "resetAt": "2021-10-29T19:57:52Z"}}}