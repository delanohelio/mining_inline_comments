{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ5NjEwOTQy", "number": 1258, "title": "HIVE-23857: Fix HiveParser 'code too large' problem (Miklos Gergely, reviewed by David Mollitor)", "bodyText": "HivePasrser.g can not be extended anymore as adding any more tokens leads to a \"code too large\" problem, because the compiled code size would exceed 65536 bytes. The real solution would be to introduce anltr4, in the meantime it can be fixed be moving the tokenNames variable into a separate file.", "createdAt": "2020-07-15T16:58:28Z", "url": "https://github.com/apache/hive/pull/1258", "merged": true, "mergeCommit": {"oid": "110b5ca414e1e2b9dc434db64b3c6b85aeac0268"}, "closed": true, "closedAt": "2020-07-16T00:40:08Z", "author": {"login": "miklosgergely"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc1OJLjAFqTQ0OTE4MTk0Mw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc1RTzUgBqjM1NTAzODM4NDY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ5MTgxOTQz", "url": "https://github.com/apache/hive/pull/1258#pullrequestreview-449181943", "createdAt": "2020-07-15T17:32:46Z", "commit": {"oid": "e01f93088766068b49a552cdcd55df5fe9a50209"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e01f93088766068b49a552cdcd55df5fe9a50209", "author": {"user": {"login": "miklosgergely", "name": "Miklos Gergely"}}, "url": "https://github.com/apache/hive/commit/e01f93088766068b49a552cdcd55df5fe9a50209", "committedDate": "2020-07-15T16:57:31Z", "message": "HIVE-23857: Fix HiveParser 'code too large' problem (Miklos Gergely, reviewed by David Mollitor)"}, "afterCommit": {"oid": "4a63015cef2ade3318b08ae2675702b74cd58ab5", "author": {"user": {"login": "miklosgergely", "name": "Miklos Gergely"}}, "url": "https://github.com/apache/hive/commit/4a63015cef2ade3318b08ae2675702b74cd58ab5", "committedDate": "2020-07-15T19:22:37Z", "message": "HIVE-23857: Fix HiveParser 'code too large' problem (Miklos Gergely, reviewed by David Mollitor)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ5MjgwMjI2", "url": "https://github.com/apache/hive/pull/1258#pullrequestreview-449280226", "createdAt": "2020-07-15T19:50:34Z", "commit": {"oid": "4a63015cef2ade3318b08ae2675702b74cd58ab5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxOTo1MDozNFrOGyNc0A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxOTo1MDozNFrOGyNc0A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTMwMjM1Mg==", "bodyText": "Looks like AWK reinvented in bash", "url": "https://github.com/apache/hive/pull/1258#discussion_r455302352", "createdAt": "2020-07-15T19:50:34Z", "author": {"login": "t3rmin4t0r"}, "path": "parser/bin/fixHiveParser.sh", "diffHunk": "@@ -0,0 +1,44 @@\n+#!/bin/bash\n+\n+# This is a temporary solution for the issue of the \"code too large\" problem related to HiveParser.java\n+# We got to a point where adding anything to the antlr files lead to an issue about having a HiveParser.java that can not be compiled due to the compiled code size limitation in java (maximum 65536 bytes), so to avoid it we temorarly add this script to remove the huge tokenNames array into a separate file.\n+# The real solution would be to switch to antlr 4\n+\n+tokenFile=\"target/generated-sources/antlr3/org/apache/hadoop/hive/ql/parse/HiveParserTokens.java\"\n+input=\"target/generated-sources/antlr3/org/apache/hadoop/hive/ql/parse/HiveParser.java\"\n+output=\"target/generated-sources/antlr3/org/apache/hadoop/hive/ql/parse/HiveParser.java-fixed\"\n+\n+rm $tokenFile > /dev/null 2>&1\n+rm $output > /dev/null 2>&1\n+\n+echo \"package org.apache.hadoop.hive.ql.parse;\" >> $tokenFile\n+echo \"\" >> $tokenFile\n+echo \"public class HiveParserTokens {\" >> $tokenFile\n+\n+state=\"STAY\"\n+while IFS= read -r line", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4a63015cef2ade3318b08ae2675702b74cd58ab5"}, "originalPosition": 19}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5598f2de566c5217c53c20ba2b4309b3c14d1fd1", "author": {"user": {"login": "miklosgergely", "name": "Miklos Gergely"}}, "url": "https://github.com/apache/hive/commit/5598f2de566c5217c53c20ba2b4309b3c14d1fd1", "committedDate": "2020-07-15T21:13:09Z", "message": "HIVE-23857: Fix HiveParser 'code too large' problem (Miklos Gergely, reviewed by David Mollitor)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4a63015cef2ade3318b08ae2675702b74cd58ab5", "author": {"user": {"login": "miklosgergely", "name": "Miklos Gergely"}}, "url": "https://github.com/apache/hive/commit/4a63015cef2ade3318b08ae2675702b74cd58ab5", "committedDate": "2020-07-15T19:22:37Z", "message": "HIVE-23857: Fix HiveParser 'code too large' problem (Miklos Gergely, reviewed by David Mollitor)"}, "afterCommit": {"oid": "5598f2de566c5217c53c20ba2b4309b3c14d1fd1", "author": {"user": {"login": "miklosgergely", "name": "Miklos Gergely"}}, "url": "https://github.com/apache/hive/commit/5598f2de566c5217c53c20ba2b4309b3c14d1fd1", "committedDate": "2020-07-15T21:13:09Z", "message": "HIVE-23857: Fix HiveParser 'code too large' problem (Miklos Gergely, reviewed by David Mollitor)"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3553, "cost": 1, "resetAt": "2021-10-29T19:57:52Z"}}}