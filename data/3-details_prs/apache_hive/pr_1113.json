{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM0NjEwNjUy", "number": 1113, "title": "HIVE-23697 : Fix errors in the metastore upgrade script", "bodyText": "NOTICE\nPlease create an issue in ASF JIRA before opening a pull request,\nand you need to set the title of the pull request which starts with\nthe corresponding JIRA issue number. (e.g. HIVE-XXXXX: Fix a typo in YYY)\nFor more details, please see https://cwiki.apache.org/confluence/display/Hive/HowToContribute", "createdAt": "2020-06-15T15:21:45Z", "url": "https://github.com/apache/hive/pull/1113", "merged": true, "mergeCommit": {"oid": "ec88021b03b69ca6a1d4232f4c1c72f06d5eec19"}, "closed": true, "closedAt": "2020-06-18T20:09:48Z", "author": {"login": "aasha"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcrynR7gBqjM0NDgyOTcyMTQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcsdKBygBqjM0NTc3NjY5NDg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ca5413b4220dd48811b5497a2693517d3dcd1f78", "author": {"user": null}, "url": "https://github.com/apache/hive/commit/ca5413b4220dd48811b5497a2693517d3dcd1f78", "committedDate": "2020-06-15T15:19:48Z", "message": "HIVE-23697 : Fix errors in the metastore upgrade script"}, "afterCommit": {"oid": "e11857f05e97cc4cedca3c941191f7a498676d5a", "author": {"user": null}, "url": "https://github.com/apache/hive/commit/e11857f05e97cc4cedca3c941191f7a498676d5a", "committedDate": "2020-06-16T10:22:23Z", "message": "HIVE-23697 : Fix errors in the metastore upgrade script"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e11857f05e97cc4cedca3c941191f7a498676d5a", "author": {"user": null}, "url": "https://github.com/apache/hive/commit/e11857f05e97cc4cedca3c941191f7a498676d5a", "committedDate": "2020-06-16T10:22:23Z", "message": "HIVE-23697 : Fix errors in the metastore upgrade script"}, "afterCommit": {"oid": "4960a4a2c6086b4abfb8d95c13ca6a8a9b94e902", "author": {"user": null}, "url": "https://github.com/apache/hive/commit/4960a4a2c6086b4abfb8d95c13ca6a8a9b94e902", "committedDate": "2020-06-16T11:51:51Z", "message": "HIVE-23697 : Fix errors in the metastore upgrade script"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4960a4a2c6086b4abfb8d95c13ca6a8a9b94e902", "author": {"user": null}, "url": "https://github.com/apache/hive/commit/4960a4a2c6086b4abfb8d95c13ca6a8a9b94e902", "committedDate": "2020-06-16T11:51:51Z", "message": "HIVE-23697 : Fix errors in the metastore upgrade script"}, "afterCommit": {"oid": "f61b428a46277d6ba9591b406335c04b1e621e11", "author": {"user": null}, "url": "https://github.com/apache/hive/commit/f61b428a46277d6ba9591b406335c04b1e621e11", "committedDate": "2020-06-16T13:29:25Z", "message": "HIVE-23697 : Fix errors in the metastore upgrade script"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMxNTQwNDU2", "url": "https://github.com/apache/hive/pull/1113#pullrequestreview-431540456", "createdAt": "2020-06-16T14:04:34Z", "commit": {"oid": "f61b428a46277d6ba9591b406335c04b1e621e11"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQxNDowNDozNFrOGkdAhQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQxNDowNDozNFrOGkdAhQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDg3NzE4OQ==", "bodyText": "My guess is that this was caused by the difference between MySQL and MariaDB. If I remember correctly the test uses MariaDB. Could you please check manually with MySQL 5 and MySQL 8?\nThanks,\nPeter", "url": "https://github.com/apache/hive/pull/1113#discussion_r440877189", "createdAt": "2020-06-16T14:04:34Z", "author": {"login": "pvary"}, "path": "standalone-metastore/metastore-server/src/main/sql/mysql/upgrade-3.2.0-to-4.0.0.mysql.sql", "diffHunk": "@@ -88,9 +88,9 @@ PREPARE stmt FROM @s;\n EXECUTE stmt;\n DEALLOCATE PREPARE stmt;\n RENAME TABLE NEXT_TXN_ID TO TXN_LOCK_TBL;\n-ALTER TABLE TXN_LOCK_TBL RENAME COLUMN NTXN_NEXT TO TXN_LOCK;\n+ALTER TABLE TXN_LOCK_TBL CHANGE NTXN_NEXT TXN_LOCK bigint;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f61b428a46277d6ba9591b406335c04b1e621e11"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f61b428a46277d6ba9591b406335c04b1e621e11", "author": {"user": null}, "url": "https://github.com/apache/hive/commit/f61b428a46277d6ba9591b406335c04b1e621e11", "committedDate": "2020-06-16T13:29:25Z", "message": "HIVE-23697 : Fix errors in the metastore upgrade script"}, "afterCommit": {"oid": "e537314cecfe85f31feacaa552adef08d0d4460f", "author": {"user": null}, "url": "https://github.com/apache/hive/commit/e537314cecfe85f31feacaa552adef08d0d4460f", "committedDate": "2020-06-17T06:09:30Z", "message": "HIVE-23697 : Fix errors in the metastore upgrade script"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e537314cecfe85f31feacaa552adef08d0d4460f", "author": {"user": null}, "url": "https://github.com/apache/hive/commit/e537314cecfe85f31feacaa552adef08d0d4460f", "committedDate": "2020-06-17T06:09:30Z", "message": "HIVE-23697 : Fix errors in the metastore upgrade script"}, "afterCommit": {"oid": "d85879f83d9e51eedbb9395c7114616d71257836", "author": {"user": null}, "url": "https://github.com/apache/hive/commit/d85879f83d9e51eedbb9395c7114616d71257836", "committedDate": "2020-06-17T06:12:04Z", "message": "HIVE-23697 : Fix errors in the metastore upgrade script"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "60fedf6132d8cc3560b39bae2c4915a0086f68a4", "author": {"user": null}, "url": "https://github.com/apache/hive/commit/60fedf6132d8cc3560b39bae2c4915a0086f68a4", "committedDate": "2020-06-17T07:54:36Z", "message": "Ignored failing tests"}, "afterCommit": {"oid": "d85879f83d9e51eedbb9395c7114616d71257836", "author": {"user": null}, "url": "https://github.com/apache/hive/commit/d85879f83d9e51eedbb9395c7114616d71257836", "committedDate": "2020-06-17T06:12:04Z", "message": "HIVE-23697 : Fix errors in the metastore upgrade script"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMzMTMzMTEx", "url": "https://github.com/apache/hive/pull/1113#pullrequestreview-433133111", "createdAt": "2020-06-18T10:05:26Z", "commit": {"oid": "d85879f83d9e51eedbb9395c7114616d71257836"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aac476978ed864d0d917af08425899e0db1b18ce", "author": {"user": null}, "url": "https://github.com/apache/hive/commit/aac476978ed864d0d917af08425899e0db1b18ce", "committedDate": "2020-06-18T11:56:10Z", "message": "HIVE-23697 : Fix errors in the metastore upgrade script"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d85879f83d9e51eedbb9395c7114616d71257836", "author": {"user": null}, "url": "https://github.com/apache/hive/commit/d85879f83d9e51eedbb9395c7114616d71257836", "committedDate": "2020-06-17T06:12:04Z", "message": "HIVE-23697 : Fix errors in the metastore upgrade script"}, "afterCommit": {"oid": "aac476978ed864d0d917af08425899e0db1b18ce", "author": {"user": null}, "url": "https://github.com/apache/hive/commit/aac476978ed864d0d917af08425899e0db1b18ce", "committedDate": "2020-06-18T11:56:10Z", "message": "HIVE-23697 : Fix errors in the metastore upgrade script"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3616, "cost": 1, "resetAt": "2021-10-29T19:57:52Z"}}}