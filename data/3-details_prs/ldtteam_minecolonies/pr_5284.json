{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM5MzQyNTg0", "number": 5284, "title": "Fix citizen request fulfilling sometimes messing up nbt", "bodyText": "Closes #5264\nCloses #\nCloses #\nChanges proposed in this pull request:\n\nActually check the item nbt of the item to move to the citizen to prevent it from getting changed during the transfer.\nAlso remove a completely commented out method, because i thought its in that class, and that made it easier to look around.\nBump Forge requirement to 31.2.8\n\nReview please", "createdAt": "2020-06-24T17:20:30Z", "url": "https://github.com/ldtteam/minecolonies/pull/5284", "merged": true, "mergeCommit": {"oid": "65ad93d78b1a313378ba059977b4249b23b747ce"}, "closed": true, "closedAt": "2020-06-25T18:11:05Z", "author": {"login": "ToMe25"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcudWTCAH2gAyNDM5MzQyNTg0OmFmMzNjYTdjYzg5YzJmOTFjOTA5MWQ4MWU0YjI5MjFiNzFkMzNhOWI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcuehN9AH2gAyNDM5MzQyNTg0OjUwZjVjODMxMDExYmUxMmIwMDkzZGVjNjEyNzY2ZjhjZGRjODNhOTg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "af33ca7cc89c2f91c9091d81e4b2921b71d33a9b", "author": {"user": {"login": "ToMe25", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/af33ca7cc89c2f91c9091d81e4b2921b71d33a9b", "committedDate": "2020-06-24T17:18:12Z", "message": "Fix citizen request fulfilling sometimes messing up nbt"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "631a6877b4ccaa3d4c1dcc5691d478bb638729e1", "author": {"user": {"login": "ToMe25", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/631a6877b4ccaa3d4c1dcc5691d478bb638729e1", "committedDate": "2020-06-24T17:26:38Z", "message": "bump forge"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2ODk5NTA0", "url": "https://github.com/ldtteam/minecolonies/pull/5284#pullrequestreview-436899504", "createdAt": "2020-06-24T18:24:47Z", "commit": {"oid": "631a6877b4ccaa3d4c1dcc5691d478bb638729e1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQxODoyNDo0OFrOGod_CQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQxODoyNDo0OFrOGod_CQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTA4NzQ5Nw==", "bodyText": "Just use ItemStackUtils equal method .", "url": "https://github.com/ldtteam/minecolonies/pull/5284#discussion_r445087497", "createdAt": "2020-06-24T18:24:48Z", "author": {"login": "Raycoms"}, "path": "src/main/java/com/minecolonies/coremod/network/messages/server/colony/citizen/TransferItemsToCitizenRequestMessage.java", "diffHunk": "@@ -126,7 +126,7 @@ protected void onExecute(final NetworkEvent.Context ctxIn, final boolean isLogic\n             int amountToRemoveFromPlayer = amountToTake - ItemStackUtils.getSize(remainingItemStack);\n             while (amountToRemoveFromPlayer > 0)\n             {\n-                final int slot = InventoryUtils.findFirstSlotInItemHandlerWith(new InvWrapper(player.inventory), stack -> stack.isItemEqual(itemStack));\n+                final int slot = InventoryUtils.findFirstSlotInItemHandlerWith(new InvWrapper(player.inventory), stack -> stack.isItemEqual(itemStack) && ItemStack.areItemStackTagsEqual(stack, itemStack));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "631a6877b4ccaa3d4c1dcc5691d478bb638729e1"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "50f5c831011be12b0093dec612766f8cddc83a98", "author": {"user": {"login": "ToMe25", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/50f5c831011be12b0093dec612766f8cddc83a98", "committedDate": "2020-06-24T18:40:02Z", "message": "use ItemStackUtils.compareItemStacksIgnoreStackSize to compare the stack\n\nwhat a needlessly long name tho"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2075, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}