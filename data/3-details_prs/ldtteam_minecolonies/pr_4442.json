{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg4ODAzMzMy", "number": 4442, "title": "Updating the PathFinding Heuristics.", "bodyText": "This PR updates the path finding heuristics to be more concise and much more efficient.\nA* Background\nIn A* (The path finding algorithm used by us) the next evaluated node is determined by its node-value, called the f-value. This f-value is composed out of two factors. The c-value, known as the cost. This is the cost it would take an entity to walk from the starting position of the path (usually the current position of the entity) to the node in question. And the second factor is the h-value, known as the heuristic. This value is an indication for the algorithm, and indicates how much it would cost an entity using the path to walk from the current node to a destination.\nNow if the h-value is not accurate a lot of nodes will have the same f-value and as such the algorithm has to consider a lot of them, if it wants to make progress. As such the correct heuristic is very important.\nCurrent situation:\nTo calculate the heuristic we currently use:  -(startEndDist - destination.manhattanDistance(pos)) this heuristic is not very usable in a 3D world, since it produces a lot of the same f-values, making the system search more blocks then it needs to. Also using the manhattan distance causes the citizens to walk in L-Shaped routes. Not going actually the shortest route: which would be diagonally.\nNew situation:\nIn the new situation we use the squared euclidian distance, which produces a much more accurate heuristic h-value across the board. Additionally this now actually causes the algorithm to produce pathing results which go diagonally.\nScreenshots before:\n\n\nScreenshots after:", "createdAt": "2020-03-15T19:25:54Z", "url": "https://github.com/ldtteam/minecolonies/pull/4442", "merged": true, "mergeCommit": {"oid": "9ffbb0f855fc9f79d2bdd94ad800559103c1950e"}, "closed": true, "closedAt": "2020-03-15T20:40:15Z", "author": {"login": "OrionDevelopment"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcLsMwGAH2gAyMzg4ODAzMzMyOmRiZDA5MmNkYWY2ZDEzY2ViOTMyOGE3OWJlZWUzMjcwYjczYTJhYzI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcN_sZygH2gAyMzg4ODAzMzMyOjNmMmZiODRmZmQ1MWE3MzBjMjFhYjc4ZWIyMDhiZDZkNjA3ZWNhZWU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "dbd092cdaf6d13ceb9328a79beee3270b73a2ac2", "author": {"user": {"login": "OrionDevelopment", "name": "Marc Hermans"}}, "url": "https://github.com/ldtteam/minecolonies/commit/dbd092cdaf6d13ceb9328a79beee3270b73a2ac2", "committedDate": "2020-03-08T16:49:00Z", "message": "Attempting to get pathing to work better."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "355599ad006f23d79f5918e198c47f2f2e2aaab7", "author": {"user": {"login": "OrionDevelopment", "name": "Marc Hermans"}}, "url": "https://github.com/ldtteam/minecolonies/commit/355599ad006f23d79f5918e198c47f2f2e2aaab7", "committedDate": "2020-03-08T17:45:03Z", "message": "Starting to fix heuristics in the Pathfinding."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fdaf340e935ac356e9b6ef199755638aa7195a09", "author": {"user": {"login": "Raycoms", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/fdaf340e935ac356e9b6ef199755638aa7195a09", "committedDate": "2020-03-08T19:37:18Z", "message": "Merge branch 'version/1.15' into fix/pathing-heuristic"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "69aae1a4fd36fd39adc36e6e68facf9c4b151811", "author": {"user": {"login": "Raycoms", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/69aae1a4fd36fd39adc36e6e68facf9c4b151811", "committedDate": "2020-03-08T20:05:34Z", "message": "hotfix raider crash"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc0ODI3NTMy", "url": "https://github.com/ldtteam/minecolonies/pull/4442#pullrequestreview-374827532", "createdAt": "2020-03-15T19:41:51Z", "commit": {"oid": "69aae1a4fd36fd39adc36e6e68facf9c4b151811"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc0ODMwMTE2", "url": "https://github.com/ldtteam/minecolonies/pull/4442#pullrequestreview-374830116", "createdAt": "2020-03-15T20:17:59Z", "commit": {"oid": "69aae1a4fd36fd39adc36e6e68facf9c4b151811"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNVQyMDoxODowMFrOF2hB6A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNVQyMDoxODowMFrOF2hB6A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjcwODU4NA==", "bodyText": "You want this in too? Then we should probably add some doc", "url": "https://github.com/ldtteam/minecolonies/pull/4442#discussion_r392708584", "createdAt": "2020-03-15T20:18:00Z", "author": {"login": "Raycoms"}, "path": "src/api/java/com/minecolonies/api/util/DebugUtil.java", "diffHunk": "@@ -0,0 +1,15 @@\n+package com.minecolonies.api.util;\n+\n+import net.minecraft.client.Minecraft;\n+\n+public final class DebugUtil {\n+\n+    private DebugUtil() {\n+        throw new IllegalStateException(\"Tried to initialize: DebugUtil but this is a Utility class.\");\n+    }\n+\n+    public static boolean hasReleaseMouse() {\n+        Minecraft.getInstance().mouseHelper.ungrabMouse();\n+        return true;\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "69aae1a4fd36fd39adc36e6e68facf9c4b151811"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "469ceff06a9d1beb0bb9d812525223f46f221da6", "author": {"user": {"login": "Raycoms", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/469ceff06a9d1beb0bb9d812525223f46f221da6", "committedDate": "2020-03-15T20:18:06Z", "message": "Merge branch 'version/1.15' into fix/pathing-heuristic"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b67f657458aaff7fcafcf9dc4cd85d7a175c5d20", "author": {"user": {"login": "Raycoms", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/b67f657458aaff7fcafcf9dc4cd85d7a175c5d20", "committedDate": "2020-03-15T20:34:23Z", "message": "Merge branch 'version/1.15' into fix/pathing-heuristic"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3f2fb84ffd51a730c21ab78eb208bd6d607ecaee", "author": {"user": {"login": "Raycoms", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/3f2fb84ffd51a730c21ab78eb208bd6d607ecaee", "committedDate": "2020-03-15T20:39:37Z", "message": "add jdoc"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2297, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}