{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY5MDQzNzQ2", "number": 5598, "title": "Bring skill effects into alignment with plan for crafters", "bodyText": "Changes proposed in this pull request:\n\nSet most crafters to have primary skill improve recipes and secondary skill effect speed\nBlacksmith and Fletcher are the reverse\nMake furnace burn faster for Smelter based on skill\nFix crusher to actually resolve clay balls by removing old code\nAdd Melon and coarse dirt to Farmer\nAdd new auto-resolve recipe for colored wool to white wool\n\nThis will pick the colored wool with the most stock in the warehouse to dye white\n\n\nResolve multiple recipes with the same output at the same crafter\n\nThis will pick the recipe by figuring out what the majority ingredient is, and choosing the one with the most stock at the warehouse for that ingredient\n\n\n\nReview please", "createdAt": "2020-08-17T20:10:01Z", "url": "https://github.com/ldtteam/minecolonies/pull/5598", "merged": true, "mergeCommit": {"oid": "c09766804234b42bff464918a6158b30df278856"}, "closed": true, "closedAt": "2020-08-18T17:56:30Z", "author": {"login": "Mekle001"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc_4I2uAH2gAyNDY5MDQzNzQ2OmE2OWY5Mjg4MTRjMzc5OGViNjVhZjk2MTgzMDRjNWM3MGM4YWMxMmU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdAJSDbAH2gAyNDY5MDQzNzQ2OjA2NTU1NWM5YTE0MmU1ODAxY2E2NmJiMDBkMDk1NDRhZTI0ZjdiNTE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "a69f928814c3798eb65af9618304c5c70c8ac12e", "author": {"user": {"login": "Mekle001", "name": "Mike Garlick"}}, "url": "https://github.com/ldtteam/minecolonies/commit/a69f928814c3798eb65af9618304c5c70c8ac12e", "committedDate": "2020-08-17T20:07:40Z", "message": "rework skill effects for crafters"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c9cce0b77b216fe2707cbca646e0e2102377d007", "author": {"user": {"login": "Mekle001", "name": "Mike Garlick"}}, "url": "https://github.com/ldtteam/minecolonies/commit/c9cce0b77b216fe2707cbca646e0e2102377d007", "committedDate": "2020-08-17T20:07:59Z", "message": "Let skill effect furnace burn speed for smelter"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "58c3d996388cadc6022d11c262437e015757c885", "author": {"user": {"login": "Mekle001", "name": "Mike Garlick"}}, "url": "https://github.com/ldtteam/minecolonies/commit/58c3d996388cadc6022d11c262437e015757c885", "committedDate": "2020-08-17T22:25:22Z", "message": "Fix the Crusher to respond to clay_ball requests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "23463cd17b076403b5b9e69c0bb297b4e21defd4", "author": {"user": {"login": "Mekle001", "name": "Mike Garlick"}}, "url": "https://github.com/ldtteam/minecolonies/commit/23463cd17b076403b5b9e69c0bb297b4e21defd4", "committedDate": "2020-08-17T22:25:38Z", "message": "A couple of small recipe additions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6167d9a721bb614c809524cc53dc2cc55b3397bc", "author": {"user": {"login": "Mekle001", "name": "Mike Garlick"}}, "url": "https://github.com/ldtteam/minecolonies/commit/6167d9a721bb614c809524cc53dc2cc55b3397bc", "committedDate": "2020-08-18T02:35:12Z", "message": "Add colored to white wool recipe"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "68c6dee44c915a9f9b6da2cf448d0d6da7889812", "author": {"user": {"login": "Mekle001", "name": "Mike Garlick"}}, "url": "https://github.com/ldtteam/minecolonies/commit/68c6dee44c915a9f9b6da2cf448d0d6da7889812", "committedDate": "2020-08-18T03:27:42Z", "message": "formatting and cleanup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1a558468b92384d419b3708dd3628743410c9505", "author": {"user": {"login": "Mekle001", "name": "Mike Garlick"}}, "url": "https://github.com/ldtteam/minecolonies/commit/1a558468b92384d419b3708dd3628743410c9505", "committedDate": "2020-08-18T03:28:19Z", "message": "Resolve multiple recipes in the same crafter"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY5MDA5Nzk0", "url": "https://github.com/ldtteam/minecolonies/pull/5598#pullrequestreview-469009794", "createdAt": "2020-08-18T05:53:32Z", "commit": {"oid": "1a558468b92384d419b3708dd3628743410c9505"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY5MDgzMzIz", "url": "https://github.com/ldtteam/minecolonies/pull/5598#pullrequestreview-469083323", "createdAt": "2020-08-18T08:00:34Z", "commit": {"oid": "1a558468b92384d419b3708dd3628743410c9505"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQwODowMDozNFrOHCIAkA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQwODowMDozNFrOHCIAkA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTk5MDQxNg==", "bodyText": "this should probably go into the crafter building", "url": "https://github.com/ldtteam/minecolonies/pull/5598#discussion_r471990416", "createdAt": "2020-08-18T08:00:34Z", "author": {"login": "Raycoms"}, "path": "src/api/java/com/minecolonies/api/colony/buildings/IBuildingWorker.java", "diffHunk": "@@ -207,6 +207,20 @@\n     @NotNull\n     Skill getSecondarySkill();\n \n+    /**\n+     * Crafting Speed skill\n+     * @return the crafting speed skill\n+     */\n+    @NotNull\n+    Skill getCraftSpeedSkill();\n+\n+    /**\n+     *  Recipe Improvement skill getter\n+     * @return the recipe improvement skill\n+     */\n+    @NotNull\n+    Skill getRecipeImprovementSkill();\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1a558468b92384d419b3708dd3628743410c9505"}, "originalPosition": 17}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY5MDg1OTM2", "url": "https://github.com/ldtteam/minecolonies/pull/5598#pullrequestreview-469085936", "createdAt": "2020-08-18T08:04:15Z", "commit": {"oid": "1a558468b92384d419b3708dd3628743410c9505"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQwODowNDoxNVrOHCIIXQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQwODowNDoxNVrOHCIIXQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTk5MjQxMw==", "bodyText": "I think we should wait for the multithreaded simulation solution before doing this. This can get extremely expensive. If this is executed every call. The same thing for the \"inWarehouse\" general solution. I think we should wait for the threaded solution first before we take this step.", "url": "https://github.com/ldtteam/minecolonies/pull/5598#discussion_r471992413", "createdAt": "2020-08-18T08:04:15Z", "author": {"login": "Raycoms"}, "path": "src/main/java/com/minecolonies/coremod/colony/buildings/workerbuildings/BuildingDyer.java", "diffHunk": "@@ -196,6 +208,68 @@ public void requestUpgrade(final PlayerEntity player, final BlockPos builder)\n         super.requestUpgrade(player, builder);\n     }\n \n+    @Override\n+    public IRecipeStorage getFirstRecipe(Predicate<ItemStack> stackPredicate)\n+    {\n+        IRecipeStorage recipe = super.getFirstRecipe(stackPredicate);\n+\n+        if(recipe == null && stackPredicate.test(new ItemStack(Items.WHITE_WOOL)))\n+        {\n+            final ResourceLocation wool = new ResourceLocation(\"minecraft\", \"wool\");\n+            final HashMap<ItemStorage, Integer> inventoryCounts = new HashMap<>();\n+\n+            final Set<IBuilding> wareHouses = colony.getBuildingManager().getBuildings().values().stream()\n+                                                    .filter(building -> building instanceof BuildingWareHouse)\n+                                                    .collect(Collectors.toSet());\n+            \n+            final List<ItemStorage> woolItems = ItemTags.getCollection().getOrCreate(wool).getAllElements().stream()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1a558468b92384d419b3708dd3628743410c9505"}, "originalPosition": 60}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "18647a8e865176e771a52fdd17a9135c59dbf70f", "author": {"user": {"login": "Mekle001", "name": "Mike Garlick"}}, "url": "https://github.com/ldtteam/minecolonies/commit/18647a8e865176e771a52fdd17a9135c59dbf70f", "committedDate": "2020-08-18T15:27:49Z", "message": "Limit warehouse queries to only the duplicates"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "065555c9a142e5801ca66bb00d09544ae24f7b51", "author": {"user": {"login": "Mekle001", "name": "Mike Garlick"}}, "url": "https://github.com/ldtteam/minecolonies/commit/065555c9a142e5801ca66bb00d09544ae24f7b51", "committedDate": "2020-08-18T16:06:06Z", "message": "Move getCraftingSpeedSkill to Crafter Building"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1854, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}