{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDgwOTE4MjI1", "number": 5728, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNlQyMzoxODo0MFrOEgvdkA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQxNToyMjo1MFrOEhTIxQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAyNzY3NTA0OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/minecolonies/coremod/util/FurnaceRecipes.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNlQyMzoxODo0MFrOHNssJw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNlQyMzoxODo0MFrOHNssJw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDEyNTczNQ==", "bodyText": "I think you want to copy this stack before modifying it? else the \"recipe\" objects output stack might get changed for further uses", "url": "https://github.com/ldtteam/minecolonies/pull/5728#discussion_r484125735", "createdAt": "2020-09-06T23:18:40Z", "author": {"login": "someaddons"}, "path": "src/main/java/com/minecolonies/coremod/util/FurnaceRecipes.java", "diffHunk": "@@ -55,16 +54,13 @@ private void loadRecipes(final MinecraftServer server)\n             final NonNullList<Ingredient> list = recipe.getIngredients();\n             if (list.size() == 1)\n             {\n-                for (final ItemStack stack : list.get(0).getMatchingStacks())\n-                {\n-                    final RecipeStorage storage = new RecipeStorage(new StandardToken(), Collections.singletonList(stack), 1, recipe.getRecipeOutput(), Blocks.FURNACE);\n+                final RecipeStorage storage = new RecipeStorage(new StandardToken(), Arrays.asList(list.get(0).getMatchingStacks()), 1, recipe.getRecipeOutput(), Blocks.FURNACE);\n \n-                    recipes.put(new ItemStorage(stack), storage);\n+                recipes.put(storage.getCleanedInput().get(0), storage);\n \n-                    final ItemStack output = recipe.getRecipeOutput();\n-                    output.setCount(1);\n-                    reverseRecipes.put(new ItemStorage(output), storage);\n-                }\n+                final ItemStack output = recipe.getRecipeOutput();\n+                output.setCount(1);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5b7934432cad125c91ff2e2b37b1398de40f5c82"}, "originalPosition": 27}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAzMzUxNDI3OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/minecolonies/coremod/colony/buildings/workerbuildings/BuildingCook.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQxNToyMTozN1rOHOiXhA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQxNTozMjoyNlrOHOi1aA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTAwNTE4OA==", "bodyText": "Will the cook keep all container items for forever? 20 buckets of milk or water too?", "url": "https://github.com/ldtteam/minecolonies/pull/5728#discussion_r485005188", "createdAt": "2020-09-08T15:21:37Z", "author": {"login": "Raycoms"}, "path": "src/main/java/com/minecolonies/coremod/colony/buildings/workerbuildings/BuildingCook.java", "diffHunk": "@@ -103,6 +104,7 @@ public BuildingCook(final IColony c, final BlockPos l)\n         keepX.put(ItemStackUtils.ISFOOD, new Tuple<>(STACKSIZE, true));\n         keepX.put(ItemStackUtils.ISCOOKABLE, new Tuple<>(STACKSIZE, true));\n         keepX.put(stack -> isAllowedFuel(stack), new Tuple<>(STACKSIZE, true));\n+        keepX.put(stack -> !ItemStackUtils.isEmpty(stack.getContainerItem()), new Tuple<>(STACKSIZE, false));\n     }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4f2a9f6dcf7aeabb87d8ef57d3dece85fa33a5a9"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTAxMjg0MA==", "bodyText": "I should probably exclude milk and water. Probably by excluding buckets. I want to replace this with the custom data load you and I talked about eventually, but realized that this was pretty close to what was needed for now.", "url": "https://github.com/ldtteam/minecolonies/pull/5728#discussion_r485012840", "createdAt": "2020-09-08T15:32:26Z", "author": {"login": "Mekle001"}, "path": "src/main/java/com/minecolonies/coremod/colony/buildings/workerbuildings/BuildingCook.java", "diffHunk": "@@ -103,6 +104,7 @@ public BuildingCook(final IColony c, final BlockPos l)\n         keepX.put(ItemStackUtils.ISFOOD, new Tuple<>(STACKSIZE, true));\n         keepX.put(ItemStackUtils.ISCOOKABLE, new Tuple<>(STACKSIZE, true));\n         keepX.put(stack -> isAllowedFuel(stack), new Tuple<>(STACKSIZE, true));\n+        keepX.put(stack -> !ItemStackUtils.isEmpty(stack.getContainerItem()), new Tuple<>(STACKSIZE, false));\n     }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTAwNTE4OA=="}, "originalCommit": {"oid": "4f2a9f6dcf7aeabb87d8ef57d3dece85fa33a5a9"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAzMzUyMDA1OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/minecolonies/coremod/entity/ai/citizen/cook/EntityAIWorkCook.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQxNToyMjo1MFrOHOiawQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQxNToyMjo1MFrOHOiawQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTAwNjAxNw==", "bodyText": "\"i\" might be bad, better stack", "url": "https://github.com/ldtteam/minecolonies/pull/5728#discussion_r485006017", "createdAt": "2020-09-08T15:22:50Z", "author": {"login": "Raycoms"}, "path": "src/main/java/com/minecolonies/coremod/entity/ai/citizen/cook/EntityAIWorkCook.java", "diffHunk": "@@ -271,16 +271,16 @@ protected IAIState checkForImportantJobs()\n             citizenToServe.addAll(citizenList);\n             playerToServe.addAll(playerList);\n \n-            if (InventoryUtils.hasItemInItemHandler(worker.getInventoryCitizen(), ItemStackUtils.CAN_EAT))\n+            if (InventoryUtils.hasItemInItemHandler(worker.getInventoryCitizen(), i -> ItemStackUtils.CAN_EAT.test(i) && !getOwnBuilding().isItemStackInRequest(i)))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4f2a9f6dcf7aeabb87d8ef57d3dece85fa33a5a9"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3475, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}