{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA3NjUyNDk2", "number": 5967, "title": "Added a recipe status as per ldtteam/minecolonies-features#152", "bodyText": "Closes ldtteam/minecolonies-features#152\nChanges proposed in this pull request:\n\nAdds an x of y line to the recipes screen detailing how many recipes used and what the max number is.\nRemoves some code using an old static version of the recipe max code\n\n\nReview please", "createdAt": "2020-10-21T15:45:38Z", "url": "https://github.com/ldtteam/minecolonies/pull/5967", "merged": true, "mergeCommit": {"oid": "d7a72ff00b0e5dedc5d8808e6bac20ddd1ba0b77"}, "closed": true, "closedAt": "2020-10-21T20:16:00Z", "author": {"login": "KatrinaAS"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdSPQ5LAH2gAyNTA3NjUyNDk2OjY3ODQ2YWU1YmE5MzRiNDZjODA1MjAzZmFhODBjOGFjMWRmMDFlMDI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdUwcPygFqTUxMzk3MDkzMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "67846ae5ba934b46c805203faa80c8ac1df01e02", "author": {"user": {"login": "KatrinaAS", "name": "Katrina Knight"}}, "url": "https://github.com/ldtteam/minecolonies/commit/67846ae5ba934b46c805203faa80c8ac1df01e02", "committedDate": "2020-10-13T21:14:54Z", "message": "Added a recipe status as per ldtteam/minecolonies-features#152"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "91753b83a64c2a341190eb94b02a4e11204453af", "author": {"user": {"login": "KatrinaAS", "name": "Katrina Knight"}}, "url": "https://github.com/ldtteam/minecolonies/commit/91753b83a64c2a341190eb94b02a4e11204453af", "committedDate": "2020-10-21T15:29:05Z", "message": "Added a recipe status as per ldtteam/minecolonies-features#152"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f583c731a963cf1320a68a6fbffe582728f04445", "author": {"user": {"login": "KatrinaAS", "name": "Katrina Knight"}}, "url": "https://github.com/ldtteam/minecolonies/commit/f583c731a963cf1320a68a6fbffe582728f04445", "committedDate": "2020-10-21T15:31:41Z", "message": "Removed old recipe cap code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0484dc4a8e4288d091bb8b6efe68ad0181c415ec", "author": {"user": {"login": "KatrinaAS", "name": "Katrina Knight"}}, "url": "https://github.com/ldtteam/minecolonies/commit/0484dc4a8e4288d091bb8b6efe68ad0181c415ec", "committedDate": "2020-10-21T15:33:15Z", "message": "Merged Changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cb1e483e758f7735166a5ed46a91f9e7685e89fc", "author": {"user": {"login": "KatrinaAS", "name": "Katrina Knight"}}, "url": "https://github.com/ldtteam/minecolonies/commit/cb1e483e758f7735166a5ed46a91f9e7685e89fc", "committedDate": "2020-10-21T15:40:36Z", "message": "Removed re-added old static method"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEzODM1NzI2", "url": "https://github.com/ldtteam/minecolonies/pull/5967#pullrequestreview-513835726", "createdAt": "2020-10-21T15:47:17Z", "commit": {"oid": "cb1e483e758f7735166a5ed46a91f9e7685e89fc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQxNTo0NzoxN1rOHlzWFA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQxNTo0NzoxN1rOHlzWFA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTQwMDU5Ng==", "bodyText": "There are at least 3 instances in the codebase of this. Can you please remove the other 2?", "url": "https://github.com/ldtteam/minecolonies/pull/5967#discussion_r509400596", "createdAt": "2020-10-21T15:47:17Z", "author": {"login": "Mekle001"}, "path": "src/main/java/com/minecolonies/coremod/colony/buildings/AbstractBuildingCrafter.java", "diffHunk": "@@ -211,27 +206,6 @@ public View(final IColonyView c, final BlockPos l)\n             super(c, l);\n         }\n \n-        /**\n-         * Check if an additional recipe can be added.\n-         *\n-         * @return true if so.\n-         */\n-        public boolean canRecipeBeAdded()\n-        {\n-            return AbstractBuildingCrafter.canBuildingCanLearnMoreRecipes(getBuildingLevel(), super.getRecipes().size());\n-        }\n-    }\n-\n-    /**\n-     * Check if an additional recipe can be added.\n-     *\n-     * @param learnedRecipes the learned recipes.\n-     * @param buildingLevel  the building level.\n-     * @return true if so.\n-     */\n-    public static boolean canBuildingCanLearnMoreRecipes(final int buildingLevel, final int learnedRecipes)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cb1e483e758f7735166a5ed46a91f9e7685e89fc"}, "originalPosition": 34}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEzODQwNTY1", "url": "https://github.com/ldtteam/minecolonies/pull/5967#pullrequestreview-513840565", "createdAt": "2020-10-21T15:52:11Z", "commit": {"oid": "cb1e483e758f7735166a5ed46a91f9e7685e89fc"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEzODUxOTQy", "url": "https://github.com/ldtteam/minecolonies/pull/5967#pullrequestreview-513851942", "createdAt": "2020-10-21T16:03:55Z", "commit": {"oid": "cb1e483e758f7735166a5ed46a91f9e7685e89fc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQxNjowMzo1NVrOHl0GSw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQxNjowMzo1NVrOHl0GSw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTQxMjkzOQ==", "bodyText": "the formatting is off here slightly.", "url": "https://github.com/ldtteam/minecolonies/pull/5967#discussion_r509412939", "createdAt": "2020-10-21T16:03:55Z", "author": {"login": "Raycoms"}, "path": "src/main/java/com/minecolonies/coremod/colony/buildings/AbstractBuildingWorker.java", "diffHunk": "@@ -445,13 +445,21 @@ public boolean isRecipeAlterationAllowed()\n      */\n     private boolean hasSpaceForMoreRecipes()\n     {\n+\n+        return maxRecipes() > getRecipes().size() + 1;\n+    }\n+\n+    /**\n+     * Gets the maximum number of recipes a building may have at the current time.\n+     */\n+    private int maxRecipes() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cb1e483e758f7735166a5ed46a91f9e7685e89fc"}, "originalPosition": 11}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEzODUyMzMx", "url": "https://github.com/ldtteam/minecolonies/pull/5967#pullrequestreview-513852331", "createdAt": "2020-10-21T16:04:19Z", "commit": {"oid": "cb1e483e758f7735166a5ed46a91f9e7685e89fc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQxNjowNDoxOVrOHl0Hdg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQxNjowNDoxOVrOHl0Hdg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTQxMzIzOA==", "bodyText": "Much better to synch the whole number instead of just \"is there more space\"", "url": "https://github.com/ldtteam/minecolonies/pull/5967#discussion_r509413238", "createdAt": "2020-10-21T16:04:19Z", "author": {"login": "Raycoms"}, "path": "src/main/java/com/minecolonies/coremod/colony/buildings/AbstractBuildingWorker.java", "diffHunk": "@@ -729,9 +737,9 @@ public void serializeToView(@NotNull final PacketBuffer buf)\n         buf.writeInt(getPrimarySkill().ordinal());\n         buf.writeInt(getSecondarySkill().ordinal());\n         buf.writeInt(getMaxInhabitants());\n-        buf.writeBoolean(hasSpaceForMoreRecipes());\n         buf.writeBoolean(isRecipeAlterationAllowed());\n         buf.writeString(jobDisplayName);\n+        buf.writeInt(maxRecipes());\n     }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cb1e483e758f7735166a5ed46a91f9e7685e89fc"}, "originalPosition": 31}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEzODUyNDkw", "url": "https://github.com/ldtteam/minecolonies/pull/5967#pullrequestreview-513852490", "createdAt": "2020-10-21T16:04:29Z", "commit": {"oid": "cb1e483e758f7735166a5ed46a91f9e7685e89fc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQxNjowNDoyOVrOHl0H7Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQxNjowNDoyOVrOHl0H7Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTQxMzM1Nw==", "bodyText": "Also formatting", "url": "https://github.com/ldtteam/minecolonies/pull/5967#discussion_r509413357", "createdAt": "2020-10-21T16:04:29Z", "author": {"login": "Raycoms"}, "path": "src/main/java/com/minecolonies/coremod/colony/buildings/AbstractBuildingWorker.java", "diffHunk": "@@ -1114,7 +1122,11 @@ public boolean canCraftComplexRecipes()\n         @Override\n         public boolean canRecipeBeAdded()\n         {\n-            return canAddMoreRecipes;\n+            return getMaxRecipes() > getRecipes().size() + 1;\n+        }\n+\n+        public int getMaxRecipes() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cb1e483e758f7735166a5ed46a91f9e7685e89fc"}, "originalPosition": 65}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEzODg3NjQ3", "url": "https://github.com/ldtteam/minecolonies/pull/5967#pullrequestreview-513887647", "createdAt": "2020-10-21T16:23:50Z", "commit": {"oid": "cb1e483e758f7735166a5ed46a91f9e7685e89fc"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bdd15b115cd3dd51e294a2b605653a099d4b33c0", "author": {"user": {"login": "KatrinaAS", "name": "Katrina Knight"}}, "url": "https://github.com/ldtteam/minecolonies/commit/bdd15b115cd3dd51e294a2b605653a099d4b33c0", "committedDate": "2020-10-21T16:53:57Z", "message": "Some formatting fixes, plus removing more old static code"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEzOTcwOTMw", "url": "https://github.com/ldtteam/minecolonies/pull/5967#pullrequestreview-513970930", "createdAt": "2020-10-21T17:02:01Z", "commit": {"oid": "bdd15b115cd3dd51e294a2b605653a099d4b33c0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1788, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}