{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE0MDI0OTAx", "number": 4901, "title": "Fix/miner", "bodyText": "Changes proposed in this pull request:\n\nMake the builder repair its ladder instead of just filling everything below a missing one with cobble and starting from there.\nMake the mineshaft nodes be always on the same heights(every 10 blocks, not where they are designed to be, as i didn't know they were designed to be only one per builder level.).\n\nReview please", "createdAt": "2020-05-06T11:00:24Z", "url": "https://github.com/ldtteam/minecolonies/pull/4901", "merged": true, "mergeCommit": {"oid": "a6655efff2467574527a892b30bcca941de309f2"}, "closed": true, "closedAt": "2020-05-07T12:37:52Z", "author": {"login": "ToMe25"}, "timelineItems": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABceXodQgH2gAyNDE0MDI0OTAxOjRmYTFmYzk1YTA2YWRhODUzZWE1MTc0NTBkZDY5NzRkMWUxMTAyNDA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABce8eiQAH2gAyNDE0MDI0OTAxOjhkNDIxYmIzMjg0ZTNhOGVkNDJkNjc3ZTAzYzA3YTBlMThjZjMxYWQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "4fa1fc95a06ada853ea517450dd6974d1e110240", "author": {"user": {"login": "ToMe25", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/4fa1fc95a06ada853ea517450dd6974d1e110240", "committedDate": "2020-05-05T17:35:49Z", "message": "Make miners repair their ladders"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "77500aa75ea0b5ab418c4246665ff80782f81cf4", "author": {"user": {"login": "ToMe25", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/77500aa75ea0b5ab418c4246665ff80782f81cf4", "committedDate": "2020-05-06T10:57:25Z", "message": "make miner build shafts always at the same heights\n\nfix ladder repair not removing torches and signs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "371c00dc755519f04b75a2e855f773a745121274", "author": {"user": {"login": "ToMe25", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/371c00dc755519f04b75a2e855f773a745121274", "committedDate": "2020-05-06T11:02:54Z", "message": "Merge branch 'version/1.15' into fix/miner"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA2NTA4NTM4", "url": "https://github.com/ldtteam/minecolonies/pull/4901#pullrequestreview-406508538", "createdAt": "2020-05-06T11:06:30Z", "commit": {"oid": "371c00dc755519f04b75a2e855f773a745121274"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQxMTowNjozMVrOGROBBg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQxMTowNjozMVrOGROBBg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDcwODYxNA==", "bodyText": "might make sense to put this in a utility functin that returns true if repair and else false", "url": "https://github.com/ldtteam/minecolonies/pull/4901#discussion_r420708614", "createdAt": "2020-05-06T11:06:31Z", "author": {"login": "Raycoms"}, "path": "src/main/java/com/minecolonies/coremod/entity/ai/citizen/miner/EntityAIStructureMiner.java", "diffHunk": "@@ -398,17 +445,45 @@ private IAIState advanceLadder(final IAIState state)\n             return state;\n         }\n \n+        @NotNull final BlockPos nextLadder =\n+                new BlockPos(getOwnBuilding().getLadderLocation().getX(), getLastLadder(getOwnBuilding().getLadderLocation(), world) - 1, getOwnBuilding().getLadderLocation().getZ());\n+        final int xOffset = SHAFT_RADIUS * getOwnBuilding().getVectorX();\n+        final int zOffset = SHAFT_RADIUS * getOwnBuilding().getVectorZ();\n+        boolean repair = true;\n+\n+        if (world.getBlockState(nextLadder).getBlock() instanceof AirBlock)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "371c00dc755519f04b75a2e855f773a745121274"}, "originalPosition": 98}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "08b9de9179e3d99544c2a10ed7299b55c901fd81", "author": {"user": {"login": "ToMe25", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/08b9de9179e3d99544c2a10ed7299b55c901fd81", "committedDate": "2020-05-06T12:00:18Z", "message": "Fix ladder repairs removing higher platforms in the mineshaft\n\nalso hopefully fix build problems"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "347a3ab90df369807708b876dbadc5232891d241", "author": {"user": {"login": "ToMe25", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/347a3ab90df369807708b876dbadc5232891d241", "committedDate": "2020-05-06T13:15:25Z", "message": "Move ladder damaged check to its own method."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a09faa69fa1ee6773881f98655f6adb0fabb0693", "author": {"user": {"login": "ToMe25", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/a09faa69fa1ee6773881f98655f6adb0fabb0693", "committedDate": "2020-05-06T13:47:14Z", "message": "Fix ladder repairing not working at the height of a platform"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a8db7266da36afe69a970e29031c400bc4b283b9", "author": {"user": {"login": "ToMe25", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/a8db7266da36afe69a970e29031c400bc4b283b9", "committedDate": "2020-05-06T14:24:52Z", "message": "Make ladder repair state repair the cobblestone behind the ladder."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5dd39c4e8870d02751905a4a0a8aa48e49fd8ddb", "author": {"user": {"login": "ToMe25", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/5dd39c4e8870d02751905a4a0a8aa48e49fd8ddb", "committedDate": "2020-05-06T15:08:37Z", "message": "Merge branch 'version/1.15' into fix/miner"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ea721afc4be07b95fc6b5136be63ec6cde6dc013", "author": {"user": {"login": "Raycoms", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/ea721afc4be07b95fc6b5136be63ec6cde6dc013", "committedDate": "2020-05-06T21:05:55Z", "message": "Get rid of this cancer"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "56d5e0c5c5f561b18065f9de7b9ff72e25fff98a", "author": {"user": {"login": "ToMe25", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/56d5e0c5c5f561b18065f9de7b9ff72e25fff98a", "committedDate": "2020-05-07T08:49:57Z", "message": "Make the miner mine the blocks before replacing when repairing his\nladder"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA3MjcyOTk0", "url": "https://github.com/ldtteam/minecolonies/pull/4901#pullrequestreview-407272994", "createdAt": "2020-05-07T08:51:09Z", "commit": {"oid": "56d5e0c5c5f561b18065f9de7b9ff72e25fff98a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA3MjkyNjUy", "url": "https://github.com/ldtteam/minecolonies/pull/4901#pullrequestreview-407292652", "createdAt": "2020-05-07T09:16:46Z", "commit": {"oid": "56d5e0c5c5f561b18065f9de7b9ff72e25fff98a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA3MzIzODkx", "url": "https://github.com/ldtteam/minecolonies/pull/4901#pullrequestreview-407323891", "createdAt": "2020-05-07T09:58:24Z", "commit": {"oid": "56d5e0c5c5f561b18065f9de7b9ff72e25fff98a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8d421bb3284e3a8ed42d677e03c07a0e18cf31ad", "author": {"user": {"login": "OrionDevelopment", "name": "Marc Hermans"}}, "url": "https://github.com/ldtteam/minecolonies/commit/8d421bb3284e3a8ed42d677e03c07a0e18cf31ad", "committedDate": "2020-05-07T12:31:28Z", "message": "Merge branch 'version/1.15' into fix/miner"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2239, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}