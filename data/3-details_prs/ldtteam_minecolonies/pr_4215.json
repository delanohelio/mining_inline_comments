{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYwMzA1MjUz", "number": 4215, "title": "Add Permission Check to Visitor Notification", "bodyText": "This is useful for server admins so they can checkup on players without the players noticing on a per admin configurable basis.\nChanges proposed in this pull request:\n\nAdds a Forge Permission check to see if a player's entering or leaving a village should trigger a message to the village owners.", "createdAt": "2020-01-08T06:39:24Z", "url": "https://github.com/ldtteam/minecolonies/pull/4215", "merged": true, "mergeCommit": {"oid": "e98d524e79d13a83688678b21075f6805d7de7fc"}, "closed": true, "closedAt": "2020-01-11T09:20:04Z", "author": {"login": "cjm721"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb4PYP6gH2gAyMzYwMzA1MjUzOjU0ZTQ2YTM2YWEwM2Q1ODA3NDhlZTRkMWMyNzY5MzRmZTFkNTNlODc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb5JZAIAFqTM0MTQ5NjU4Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "54e46a36aa03d580748ee4d1c276934fe1d53e87", "author": {"user": {"login": "cjm721", "name": "CJ Miller"}}, "url": "https://github.com/ldtteam/minecolonies/commit/54e46a36aa03d580748ee4d1c276934fe1d53e87", "committedDate": "2020-01-08T06:29:45Z", "message": "Add permissions check for visiting players to see if the notify message should be sent to local players.\n\nThis is to help with servers where admins want the ability be silently enter areas while invisble and not have players notified."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "73b82fd35be87e9cc8f3bd0d9a354c2d377c8419", "author": {"user": {"login": "cjm721", "name": "CJ Miller"}}, "url": "https://github.com/ldtteam/minecolonies/commit/73b82fd35be87e9cc8f3bd0d9a354c2d377c8419", "committedDate": "2020-01-08T06:33:55Z", "message": "Cleanup unused imports that were imported while trying to remember how to access forge permission api."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM5NzE0NjUy", "url": "https://github.com/ldtteam/minecolonies/pull/4215#pullrequestreview-339714652", "createdAt": "2020-01-08T08:46:32Z", "commit": {"oid": "73b82fd35be87e9cc8f3bd0d9a354c2d377c8419"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQwODo0NjozMlrOFbP9ZQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQwODo0NjozMlrOFbP9ZQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDExNzM0OQ==", "bodyText": "make this an or if the player is OP", "url": "https://github.com/ldtteam/minecolonies/pull/4215#discussion_r364117349", "createdAt": "2020-01-08T08:46:32Z", "author": {"login": "Asherslab"}, "path": "src/main/java/com/minecolonies/coremod/colony/Colony.java", "diffHunk": "@@ -1476,7 +1477,9 @@ public void addVisitingPlayer(final EntityPlayer player)\n         {\n             visitingPlayers.add(player);\n             LanguageHandler.sendPlayerMessage(player, ENTERING_COLONY_MESSAGE, this.getPermissions().getOwnerName());\n-            LanguageHandler.sendPlayersMessage(getImportantMessageEntityPlayers(), ENTERING_COLONY_MESSAGE_NOTIFY, player.getName(), this.getName());\n+            if(!PermissionAPI.hasPermission(player, \"minecolonies.colony.visitor.silent\")) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "73b82fd35be87e9cc8f3bd0d9a354c2d377c8419"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6c75db8c80fdc5de77cb0a892985ced72efce1fa", "author": {"user": {"login": "Raycoms", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/6c75db8c80fdc5de77cb0a892985ced72efce1fa", "committedDate": "2020-01-08T08:46:40Z", "message": "Merge branch 'version/1.12' into version/1.12"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e7bd009e6fc76660a95c74adb743afa1078d8e7a", "author": {"user": {"login": "cjm721", "name": "CJ Miller"}}, "url": "https://github.com/ldtteam/minecolonies/commit/e7bd009e6fc76660a95c74adb743afa1078d8e7a", "committedDate": "2020-01-10T03:34:32Z", "message": "Add permission to Operators by default for silent entry."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3d7d0d820dcee66b0897ef5b05ad6514d07b60ba", "author": {"user": {"login": "cjm721", "name": "CJ Miller"}}, "url": "https://github.com/ldtteam/minecolonies/commit/3d7d0d820dcee66b0897ef5b05ad6514d07b60ba", "committedDate": "2020-01-10T03:34:37Z", "message": "Merge branch 'version/1.12' of https://github.com/CJ-MC-Mods/minecolonies into version/1.12"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8bbab7dcbc71e505f5542d025059157592d2a952", "author": {"user": {"login": "cjm721", "name": "CJ Miller"}}, "url": "https://github.com/ldtteam/minecolonies/commit/8bbab7dcbc71e505f5542d025059157592d2a952", "committedDate": "2020-01-10T03:42:34Z", "message": "Missed a space in style for Colony Class"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9767b88c245f7fa8dbea3aba65f31568f29a43ab", "author": {"user": {"login": "Asherslab", "name": "AshersLab"}}, "url": "https://github.com/ldtteam/minecolonies/commit/9767b88c245f7fa8dbea3aba65f31568f29a43ab", "committedDate": "2020-01-10T06:33:34Z", "message": "Merge branch 'version/1.12' into version/1.12"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQwOTc1NTkx", "url": "https://github.com/ldtteam/minecolonies/pull/4215#pullrequestreview-340975591", "createdAt": "2020-01-10T06:36:02Z", "commit": {"oid": "9767b88c245f7fa8dbea3aba65f31568f29a43ab"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a9fa84409d5f0c75edcef1436a915ded90c354ac", "author": {"user": {"login": "cjm721", "name": "CJ Miller"}}, "url": "https://github.com/ldtteam/minecolonies/commit/a9fa84409d5f0c75edcef1436a915ded90c354ac", "committedDate": "2020-01-10T09:03:30Z", "message": "Add a config option to enable or disable the silent visiting of colonies by operators."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQxNDk2NTgz", "url": "https://github.com/ldtteam/minecolonies/pull/4215#pullrequestreview-341496583", "createdAt": "2020-01-11T02:05:04Z", "commit": {"oid": "a9fa84409d5f0c75edcef1436a915ded90c354ac"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2251, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}