{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAzMTkzNjE3", "number": 4634, "reviewThreads": {"totalCount": 18, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxNDoxNzozMVrODxqr1g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xN1QwODoxMjo1N1rODyzt4g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUzNDA2MTY2OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/minecolonies/coremod/entity/ai/basic/AbstractEntityAIBasic.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxNDoxNzozMVrOGFQ3Bg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQyMzozOTo1OVrOGGPVcg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODE3MjI5NA==", "bodyText": "I guess you can remove this here now.", "url": "https://github.com/ldtteam/minecolonies/pull/4634#discussion_r408172294", "createdAt": "2020-04-14T14:17:31Z", "author": {"login": "Raycoms"}, "path": "src/main/java/com/minecolonies/coremod/entity/ai/basic/AbstractEntityAIBasic.java", "diffHunk": "@@ -245,8 +252,13 @@ private IAIState getNeededItem()\n                 setDelay(2);\n                 return getState();\n             }\n-\n-            tryTransferFromPosToWorker(walkTo, needsCurrently);\n+            // modified for debug and added the Stack itself as a workaround to get the \"real Stacksize\"\n+            if(tryTransferFromPosToWorker(walkTo, needsCurrently, needsCurrentlyStack))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5436848a18e4e2dfaedd6ee5283bb5617e738263"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTE5NTg5MA==", "bodyText": "fixed", "url": "https://github.com/ldtteam/minecolonies/pull/4634#discussion_r409195890", "createdAt": "2020-04-15T23:39:59Z", "author": {"login": "lexustec"}, "path": "src/main/java/com/minecolonies/coremod/entity/ai/basic/AbstractEntityAIBasic.java", "diffHunk": "@@ -245,8 +252,13 @@ private IAIState getNeededItem()\n                 setDelay(2);\n                 return getState();\n             }\n-\n-            tryTransferFromPosToWorker(walkTo, needsCurrently);\n+            // modified for debug and added the Stack itself as a workaround to get the \"real Stacksize\"\n+            if(tryTransferFromPosToWorker(walkTo, needsCurrently, needsCurrentlyStack))", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODE3MjI5NA=="}, "originalCommit": {"oid": "5436848a18e4e2dfaedd6ee5283bb5617e738263"}, "originalPosition": 28}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUzNDA2OTIxOnYy", "diffSide": "RIGHT", "path": "src/main/java/com/minecolonies/coremod/entity/ai/basic/AbstractEntityAIBasic.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxNDoxOTowNFrOGFQ72Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQyMzowNDoyNVrOGFkAsA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODE3MzUyOQ==", "bodyText": "guess you can roll back this change too", "url": "https://github.com/ldtteam/minecolonies/pull/4634#discussion_r408173529", "createdAt": "2020-04-14T14:19:04Z", "author": {"login": "Raycoms"}, "path": "src/main/java/com/minecolonies/coremod/entity/ai/basic/AbstractEntityAIBasic.java", "diffHunk": "@@ -1021,9 +1033,8 @@ else if (dumpOneMoreSlot())\n \n         alreadyKept.clear();\n         slotAt = 0;\n-        //collect items that are nice to have if they are available\n-        this.itemsNiceToHave().forEach(this::isInHut);\n-        // we dumped the inventory, reset actions done\n+         this.itemsNiceToHave().forEach(this::isInHut);\n+         // we dumped the inventory, reset actions done", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5436848a18e4e2dfaedd6ee5283bb5617e738263"}, "originalPosition": 54}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODQ4NjA2NA==", "bodyText": "done", "url": "https://github.com/ldtteam/minecolonies/pull/4634#discussion_r408486064", "createdAt": "2020-04-14T23:04:25Z", "author": {"login": "lexustec"}, "path": "src/main/java/com/minecolonies/coremod/entity/ai/basic/AbstractEntityAIBasic.java", "diffHunk": "@@ -1021,9 +1033,8 @@ else if (dumpOneMoreSlot())\n \n         alreadyKept.clear();\n         slotAt = 0;\n-        //collect items that are nice to have if they are available\n-        this.itemsNiceToHave().forEach(this::isInHut);\n-        // we dumped the inventory, reset actions done\n+         this.itemsNiceToHave().forEach(this::isInHut);\n+         // we dumped the inventory, reset actions done", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODE3MzUyOQ=="}, "originalCommit": {"oid": "5436848a18e4e2dfaedd6ee5283bb5617e738263"}, "originalPosition": 54}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUzNDA3NzI3OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/minecolonies/coremod/entity/ai/basic/AbstractEntityAIBasic.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxNDoyMDo0OFrOGFRA7A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQyMzozOTo0N1rOGGPVIA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODE3NDgyOA==", "bodyText": "this comment can also go then I believe", "url": "https://github.com/ldtteam/minecolonies/pull/4634#discussion_r408174828", "createdAt": "2020-04-14T14:20:48Z", "author": {"login": "Raycoms"}, "path": "src/main/java/com/minecolonies/coremod/entity/ai/basic/AbstractEntityAIBasic.java", "diffHunk": "@@ -1461,20 +1472,35 @@ public boolean checkIfRequestForItemExistOrCreateAsynch(@NotNull final ItemStack\n      *\n      * @param pos       the position to transfer it from.\n      * @param predicate the predicate to evaluate.\n+     * @param stackInfo the actual stack of the predicate to get the needed value\n      * @return true if succesful.\n      */\n-    private boolean tryTransferFromPosToWorker(final BlockPos pos, @NotNull final Predicate<ItemStack> predicate)\n+\n+    // modified to reflect the actual stack amount to transfer.  WIP", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5436848a18e4e2dfaedd6ee5283bb5617e738263"}, "originalPosition": 67}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODQ4NjEzMQ==", "bodyText": "done", "url": "https://github.com/ldtteam/minecolonies/pull/4634#discussion_r408486131", "createdAt": "2020-04-14T23:04:41Z", "author": {"login": "lexustec"}, "path": "src/main/java/com/minecolonies/coremod/entity/ai/basic/AbstractEntityAIBasic.java", "diffHunk": "@@ -1461,20 +1472,35 @@ public boolean checkIfRequestForItemExistOrCreateAsynch(@NotNull final ItemStack\n      *\n      * @param pos       the position to transfer it from.\n      * @param predicate the predicate to evaluate.\n+     * @param stackInfo the actual stack of the predicate to get the needed value\n      * @return true if succesful.\n      */\n-    private boolean tryTransferFromPosToWorker(final BlockPos pos, @NotNull final Predicate<ItemStack> predicate)\n+\n+    // modified to reflect the actual stack amount to transfer.  WIP", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODE3NDgyOA=="}, "originalCommit": {"oid": "5436848a18e4e2dfaedd6ee5283bb5617e738263"}, "originalPosition": 67}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTE5NTgwOA==", "bodyText": "done", "url": "https://github.com/ldtteam/minecolonies/pull/4634#discussion_r409195808", "createdAt": "2020-04-15T23:39:47Z", "author": {"login": "lexustec"}, "path": "src/main/java/com/minecolonies/coremod/entity/ai/basic/AbstractEntityAIBasic.java", "diffHunk": "@@ -1461,20 +1472,35 @@ public boolean checkIfRequestForItemExistOrCreateAsynch(@NotNull final ItemStack\n      *\n      * @param pos       the position to transfer it from.\n      * @param predicate the predicate to evaluate.\n+     * @param stackInfo the actual stack of the predicate to get the needed value\n      * @return true if succesful.\n      */\n-    private boolean tryTransferFromPosToWorker(final BlockPos pos, @NotNull final Predicate<ItemStack> predicate)\n+\n+    // modified to reflect the actual stack amount to transfer.  WIP", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODE3NDgyOA=="}, "originalCommit": {"oid": "5436848a18e4e2dfaedd6ee5283bb5617e738263"}, "originalPosition": 67}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUzNDA4MDEzOnYy", "diffSide": "RIGHT", "path": "src/main/java/com/minecolonies/coremod/entity/ai/basic/AbstractEntityAIBasic.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxNDoyMToyM1rOGFRCwg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQyMzozOToyOFrOGGPUyA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODE3NTI5OA==", "bodyText": "can you format this properly?\nIn the repo there is a formatting file for intellij you can setup to properly format this too.", "url": "https://github.com/ldtteam/minecolonies/pull/4634#discussion_r408175298", "createdAt": "2020-04-14T14:21:23Z", "author": {"login": "Raycoms"}, "path": "src/main/java/com/minecolonies/coremod/entity/ai/basic/AbstractEntityAIBasic.java", "diffHunk": "@@ -1461,20 +1472,35 @@ public boolean checkIfRequestForItemExistOrCreateAsynch(@NotNull final ItemStack\n      *\n      * @param pos       the position to transfer it from.\n      * @param predicate the predicate to evaluate.\n+     * @param stackInfo the actual stack of the predicate to get the needed value\n      * @return true if succesful.\n      */\n-    private boolean tryTransferFromPosToWorker(final BlockPos pos, @NotNull final Predicate<ItemStack> predicate)\n+\n+    // modified to reflect the actual stack amount to transfer.  WIP\n+    private boolean tryTransferFromPosToWorker(final BlockPos pos, @NotNull final Predicate<ItemStack> predicate, @NotNull final BuildingBuilderResource stackInfo)\n     {\n         final TileEntity entity = world.getTileEntity(pos);\n         if (entity == null)\n         {\n             return false;\n         }\n \n+        // Filter out if Size to pick is bigger than stacksize\n+\n+        int insertAmount =0;\n+        if(stackInfo.getAmount() > stackInfo.getItemStack().getMaxStackSize())\n+        {\n+            insertAmount = stackInfo.getItemStack().getMaxStackSize();\n+        }else{", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5436848a18e4e2dfaedd6ee5283bb5617e738263"}, "originalPosition": 82}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTE5NTcyMA==", "bodyText": "formatting done", "url": "https://github.com/ldtteam/minecolonies/pull/4634#discussion_r409195720", "createdAt": "2020-04-15T23:39:28Z", "author": {"login": "lexustec"}, "path": "src/main/java/com/minecolonies/coremod/entity/ai/basic/AbstractEntityAIBasic.java", "diffHunk": "@@ -1461,20 +1472,35 @@ public boolean checkIfRequestForItemExistOrCreateAsynch(@NotNull final ItemStack\n      *\n      * @param pos       the position to transfer it from.\n      * @param predicate the predicate to evaluate.\n+     * @param stackInfo the actual stack of the predicate to get the needed value\n      * @return true if succesful.\n      */\n-    private boolean tryTransferFromPosToWorker(final BlockPos pos, @NotNull final Predicate<ItemStack> predicate)\n+\n+    // modified to reflect the actual stack amount to transfer.  WIP\n+    private boolean tryTransferFromPosToWorker(final BlockPos pos, @NotNull final Predicate<ItemStack> predicate, @NotNull final BuildingBuilderResource stackInfo)\n     {\n         final TileEntity entity = world.getTileEntity(pos);\n         if (entity == null)\n         {\n             return false;\n         }\n \n+        // Filter out if Size to pick is bigger than stacksize\n+\n+        int insertAmount =0;\n+        if(stackInfo.getAmount() > stackInfo.getItemStack().getMaxStackSize())\n+        {\n+            insertAmount = stackInfo.getItemStack().getMaxStackSize();\n+        }else{", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODE3NTI5OA=="}, "originalCommit": {"oid": "5436848a18e4e2dfaedd6ee5283bb5617e738263"}, "originalPosition": 82}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUzNDA4NzEwOnYy", "diffSide": "RIGHT", "path": "src/main/java/com/minecolonies/coremod/entity/ai/citizen/builder/EntityAIStructureBuilder.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxNDoyMjo0OFrOGFRHKg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQyMzozOToxM1rOGGPUdQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODE3NjQyNg==", "bodyText": "I don't understand this change. If the worker has the item in the inventory, then it doesn't have to pick more up, ain't I right?", "url": "https://github.com/ldtteam/minecolonies/pull/4634#discussion_r408176426", "createdAt": "2020-04-14T14:22:48Z", "author": {"login": "Raycoms"}, "path": "src/main/java/com/minecolonies/coremod/entity/ai/citizen/builder/EntityAIStructureBuilder.java", "diffHunk": "@@ -155,15 +199,37 @@ public IAIState pickUpMaterial()\n \n         if (currentStructure.getStage() != StructureIterator.Stage.DECORATE)\n         {\n+            //Log.getLogger().info(\"Check if item is decoration and now is not decoration time\");\n             needsCurrently = needsCurrently.and(stack -> !ItemStackUtils.isDecoration(stack));\n+            //Log.getLogger().info( needsCurrently.toString());\n+\n         }\n \n         if (InventoryUtils.hasItemInItemHandler(worker.getInventoryCitizen(), needsCurrently))\n         {\n-            return getState();\n+            // here still needs to be work done. Here the implementation follows to calculate all items\n+            // which equals the needed item in the inventory of the worker follows.\n+            // at the moment we dump the inventory after each step anyway. so it is not needed.\n+            // the change enables that the builder can pickup more than only one stack.\n+            // This part is unfinished and may be removed entierly later...\n+            // get the amount in Inventory and compares it to the needed amount.\n+//            int amount = needsCurrently.and(stack -> ItemStack.getSize(stack));\n+//\n+//            int otheramount = 0;\n+//            int slot = InventoryUtils.findFirstSlotInItemHandlerNotEmptyWith(worker.getInventoryCitizen(), needsCurrently);\n+//            if (slot != -1) {\n+//                ItemStack myStack = worker.getInventoryCitizen().getStackInSlot(slot);\n+//                otheramount = myStack.getCount();\n+//            }\n+//            Log.getLogger().info(\"But has \"+ otheramount +\" already in local inventory \");\n+            //return getState();\n+            return GATHERING_REQUIRED_MATERIALS;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5436848a18e4e2dfaedd6ee5283bb5617e738263"}, "originalPosition": 118}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODE3NjYzNw==", "bodyText": "(You can also remove all the commented out code here)", "url": "https://github.com/ldtteam/minecolonies/pull/4634#discussion_r408176637", "createdAt": "2020-04-14T14:23:05Z", "author": {"login": "Raycoms"}, "path": "src/main/java/com/minecolonies/coremod/entity/ai/citizen/builder/EntityAIStructureBuilder.java", "diffHunk": "@@ -155,15 +199,37 @@ public IAIState pickUpMaterial()\n \n         if (currentStructure.getStage() != StructureIterator.Stage.DECORATE)\n         {\n+            //Log.getLogger().info(\"Check if item is decoration and now is not decoration time\");\n             needsCurrently = needsCurrently.and(stack -> !ItemStackUtils.isDecoration(stack));\n+            //Log.getLogger().info( needsCurrently.toString());\n+\n         }\n \n         if (InventoryUtils.hasItemInItemHandler(worker.getInventoryCitizen(), needsCurrently))\n         {\n-            return getState();\n+            // here still needs to be work done. Here the implementation follows to calculate all items\n+            // which equals the needed item in the inventory of the worker follows.\n+            // at the moment we dump the inventory after each step anyway. so it is not needed.\n+            // the change enables that the builder can pickup more than only one stack.\n+            // This part is unfinished and may be removed entierly later...\n+            // get the amount in Inventory and compares it to the needed amount.\n+//            int amount = needsCurrently.and(stack -> ItemStack.getSize(stack));\n+//\n+//            int otheramount = 0;\n+//            int slot = InventoryUtils.findFirstSlotInItemHandlerNotEmptyWith(worker.getInventoryCitizen(), needsCurrently);\n+//            if (slot != -1) {\n+//                ItemStack myStack = worker.getInventoryCitizen().getStackInSlot(slot);\n+//                otheramount = myStack.getCount();\n+//            }\n+//            Log.getLogger().info(\"But has \"+ otheramount +\" already in local inventory \");\n+            //return getState();\n+            return GATHERING_REQUIRED_MATERIALS;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODE3NjQyNg=="}, "originalCommit": {"oid": "5436848a18e4e2dfaedd6ee5283bb5617e738263"}, "originalPosition": 118}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTE5NTYzNw==", "bodyText": "done", "url": "https://github.com/ldtteam/minecolonies/pull/4634#discussion_r409195637", "createdAt": "2020-04-15T23:39:13Z", "author": {"login": "lexustec"}, "path": "src/main/java/com/minecolonies/coremod/entity/ai/citizen/builder/EntityAIStructureBuilder.java", "diffHunk": "@@ -155,15 +199,37 @@ public IAIState pickUpMaterial()\n \n         if (currentStructure.getStage() != StructureIterator.Stage.DECORATE)\n         {\n+            //Log.getLogger().info(\"Check if item is decoration and now is not decoration time\");\n             needsCurrently = needsCurrently.and(stack -> !ItemStackUtils.isDecoration(stack));\n+            //Log.getLogger().info( needsCurrently.toString());\n+\n         }\n \n         if (InventoryUtils.hasItemInItemHandler(worker.getInventoryCitizen(), needsCurrently))\n         {\n-            return getState();\n+            // here still needs to be work done. Here the implementation follows to calculate all items\n+            // which equals the needed item in the inventory of the worker follows.\n+            // at the moment we dump the inventory after each step anyway. so it is not needed.\n+            // the change enables that the builder can pickup more than only one stack.\n+            // This part is unfinished and may be removed entierly later...\n+            // get the amount in Inventory and compares it to the needed amount.\n+//            int amount = needsCurrently.and(stack -> ItemStack.getSize(stack));\n+//\n+//            int otheramount = 0;\n+//            int slot = InventoryUtils.findFirstSlotInItemHandlerNotEmptyWith(worker.getInventoryCitizen(), needsCurrently);\n+//            if (slot != -1) {\n+//                ItemStack myStack = worker.getInventoryCitizen().getStackInSlot(slot);\n+//                otheramount = myStack.getCount();\n+//            }\n+//            Log.getLogger().info(\"But has \"+ otheramount +\" already in local inventory \");\n+            //return getState();\n+            return GATHERING_REQUIRED_MATERIALS;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODE3NjQyNg=="}, "originalCommit": {"oid": "5436848a18e4e2dfaedd6ee5283bb5617e738263"}, "originalPosition": 118}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUzNjAwMDYyOnYy", "diffSide": "RIGHT", "path": "src/main/java/com/minecolonies/coremod/entity/ai/basic/AbstractEntityAIBasic.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQyMjo1NjozNFrOGFj19A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQwNTo1MjoxMlrOGFqvHQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODQ4MzMxNg==", "bodyText": "If we're using BuildingBuilderResource here (not the builder class) we should change the name of the class", "url": "https://github.com/ldtteam/minecolonies/pull/4634#discussion_r408483316", "createdAt": "2020-04-14T22:56:34Z", "author": {"login": "Asherslab"}, "path": "src/main/java/com/minecolonies/coremod/entity/ai/basic/AbstractEntityAIBasic.java", "diffHunk": "@@ -121,7 +123,13 @@\n     /**\n      * What he currently might be needing.\n      */\n-    protected Predicate<ItemStack> needsCurrently = null;\n+    protected Tuple<Predicate<ItemStack>, Integer> needsCurrently = null;\n+\n+    /**\n+     * What he currently might be needing but as full information.\n+     * this is a wip workaround... to get Stack Count right\n+     */\n+    protected BuildingBuilderResource needsCurrentlyStack = null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8926eaa3e83df3954ebdbc259c811b7f8388e313"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODU5NjI1Mw==", "bodyText": "removed it. was used before the latest commit.", "url": "https://github.com/ldtteam/minecolonies/pull/4634#discussion_r408596253", "createdAt": "2020-04-15T05:52:12Z", "author": {"login": "lexustec"}, "path": "src/main/java/com/minecolonies/coremod/entity/ai/basic/AbstractEntityAIBasic.java", "diffHunk": "@@ -121,7 +123,13 @@\n     /**\n      * What he currently might be needing.\n      */\n-    protected Predicate<ItemStack> needsCurrently = null;\n+    protected Tuple<Predicate<ItemStack>, Integer> needsCurrently = null;\n+\n+    /**\n+     * What he currently might be needing but as full information.\n+     * this is a wip workaround... to get Stack Count right\n+     */\n+    protected BuildingBuilderResource needsCurrentlyStack = null;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODQ4MzMxNg=="}, "originalCommit": {"oid": "8926eaa3e83df3954ebdbc259c811b7f8388e313"}, "originalPosition": 27}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUzNjAwODI1OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/minecolonies/coremod/entity/ai/basic/AbstractEntityAIBasic.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQyMjo1OTo1MFrOGFj6ew==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQwNTo0Mjo1MVrOGFqj8Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODQ4NDQ3NQ==", "bodyText": "Is there a reason we need a tuple here?\nFrom what i can tell the Integer is for how much of an item we need, except that an ItemStack can store the count of items, and no, it's not restricted to 64, can be any Int.", "url": "https://github.com/ldtteam/minecolonies/pull/4634#discussion_r408484475", "createdAt": "2020-04-14T22:59:50Z", "author": {"login": "Asherslab"}, "path": "src/main/java/com/minecolonies/coremod/entity/ai/basic/AbstractEntityAIBasic.java", "diffHunk": "@@ -121,7 +123,13 @@\n     /**\n      * What he currently might be needing.\n      */\n-    protected Predicate<ItemStack> needsCurrently = null;\n+    protected Tuple<Predicate<ItemStack>, Integer> needsCurrently = null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8926eaa3e83df3954ebdbc259c811b7f8388e313"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODU5MzM5Mw==", "bodyText": "Yes the Tuple is needed because only the Predicate is inside. Predicate. this doesnt contain the count. the Tuple <Predicate, Integer> was suggested by Raycoms.", "url": "https://github.com/ldtteam/minecolonies/pull/4634#discussion_r408593393", "createdAt": "2020-04-15T05:42:51Z", "author": {"login": "lexustec"}, "path": "src/main/java/com/minecolonies/coremod/entity/ai/basic/AbstractEntityAIBasic.java", "diffHunk": "@@ -121,7 +123,13 @@\n     /**\n      * What he currently might be needing.\n      */\n-    protected Predicate<ItemStack> needsCurrently = null;\n+    protected Tuple<Predicate<ItemStack>, Integer> needsCurrently = null;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODQ4NDQ3NQ=="}, "originalCommit": {"oid": "8926eaa3e83df3954ebdbc259c811b7f8388e313"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUzNjAxMTMwOnYy", "diffSide": "RIGHT", "path": "src/main/java/com/minecolonies/coremod/entity/ai/citizen/enchanter/EntityAIWorkEnchanter.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQyMzowMToxMVrOGFj8Qw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQyMzozODo1NVrOGGPUGA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODQ4NDkzMQ==", "bodyText": "needs to be like this because the minecraft Tuple is used also. can not include both.", "url": "https://github.com/ldtteam/minecolonies/pull/4634#discussion_r408484931", "createdAt": "2020-04-14T23:01:11Z", "author": {"login": "lexustec"}, "path": "src/main/java/com/minecolonies/coremod/entity/ai/citizen/enchanter/EntityAIWorkEnchanter.java", "diffHunk": "@@ -136,7 +136,7 @@ private IAIState decide()\n                 final int numberOfBooksInBuilding = InventoryUtils.getItemCountInProvider(getOwnBuilding(), IS_BOOK);\n                 if (numberOfBooksInBuilding > 0)\n                 {\n-                    needsCurrently = IS_BOOK;\n+                    needsCurrently = new com.minecolonies.api.util.Tuple<>(IS_BOOK,1);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8926eaa3e83df3954ebdbc259c811b7f8388e313"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODQ4ODU1OA==", "bodyText": "Then please switch out the other tuple for minecraft tuple", "url": "https://github.com/ldtteam/minecolonies/pull/4634#discussion_r408488558", "createdAt": "2020-04-14T23:12:11Z", "author": {"login": "Asherslab"}, "path": "src/main/java/com/minecolonies/coremod/entity/ai/citizen/enchanter/EntityAIWorkEnchanter.java", "diffHunk": "@@ -136,7 +136,7 @@ private IAIState decide()\n                 final int numberOfBooksInBuilding = InventoryUtils.getItemCountInProvider(getOwnBuilding(), IS_BOOK);\n                 if (numberOfBooksInBuilding > 0)\n                 {\n-                    needsCurrently = IS_BOOK;\n+                    needsCurrently = new com.minecolonies.api.util.Tuple<>(IS_BOOK,1);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODQ4NDkzMQ=="}, "originalCommit": {"oid": "8926eaa3e83df3954ebdbc259c811b7f8388e313"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODU5MjAzOA==", "bodyText": "if i change 139 to new Tuple<> it errors out with can not infere arguments.. if i change the import also at the top Line 237 errors with incompatible values. the com.minecolonies.api.util. was putted by intellij automaticly", "url": "https://github.com/ldtteam/minecolonies/pull/4634#discussion_r408592038", "createdAt": "2020-04-15T05:38:39Z", "author": {"login": "lexustec"}, "path": "src/main/java/com/minecolonies/coremod/entity/ai/citizen/enchanter/EntityAIWorkEnchanter.java", "diffHunk": "@@ -136,7 +136,7 @@ private IAIState decide()\n                 final int numberOfBooksInBuilding = InventoryUtils.getItemCountInProvider(getOwnBuilding(), IS_BOOK);\n                 if (numberOfBooksInBuilding > 0)\n                 {\n-                    needsCurrently = IS_BOOK;\n+                    needsCurrently = new com.minecolonies.api.util.Tuple<>(IS_BOOK,1);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODQ4NDkzMQ=="}, "originalCommit": {"oid": "8926eaa3e83df3954ebdbc259c811b7f8388e313"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTE5NTU0NA==", "bodyText": "Modified to the minecraft version.", "url": "https://github.com/ldtteam/minecolonies/pull/4634#discussion_r409195544", "createdAt": "2020-04-15T23:38:55Z", "author": {"login": "lexustec"}, "path": "src/main/java/com/minecolonies/coremod/entity/ai/citizen/enchanter/EntityAIWorkEnchanter.java", "diffHunk": "@@ -136,7 +136,7 @@ private IAIState decide()\n                 final int numberOfBooksInBuilding = InventoryUtils.getItemCountInProvider(getOwnBuilding(), IS_BOOK);\n                 if (numberOfBooksInBuilding > 0)\n                 {\n-                    needsCurrently = IS_BOOK;\n+                    needsCurrently = new com.minecolonies.api.util.Tuple<>(IS_BOOK,1);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODQ4NDkzMQ=="}, "originalCommit": {"oid": "8926eaa3e83df3954ebdbc259c811b7f8388e313"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUzNjAxNDY5OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/minecolonies/coremod/entity/ai/basic/AbstractEntityAIBasic.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQyMzowMjo1NFrOGFj-UA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQyMzozNToxN1rOGGPPqg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODQ4NTQ1Ng==", "bodyText": "If this was done for debug, and it does nothing, then please remove it for live.\nNo need to keep it", "url": "https://github.com/ldtteam/minecolonies/pull/4634#discussion_r408485456", "createdAt": "2020-04-14T23:02:54Z", "author": {"login": "Asherslab"}, "path": "src/main/java/com/minecolonies/coremod/entity/ai/basic/AbstractEntityAIBasic.java", "diffHunk": "@@ -245,8 +253,13 @@ private IAIState getNeededItem()\n                 setDelay(2);\n                 return getState();\n             }\n-\n-            tryTransferFromPosToWorker(walkTo, needsCurrently);\n+            // modified for debug and added the Stack itself as a workaround to get the \"real Stacksize\"\n+            if(tryTransferFromPosToWorker(walkTo, needsCurrently))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8926eaa3e83df3954ebdbc259c811b7f8388e313"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODU5MzYxMQ==", "bodyText": "comment line needs to be changed", "url": "https://github.com/ldtteam/minecolonies/pull/4634#discussion_r408593611", "createdAt": "2020-04-15T05:43:28Z", "author": {"login": "lexustec"}, "path": "src/main/java/com/minecolonies/coremod/entity/ai/basic/AbstractEntityAIBasic.java", "diffHunk": "@@ -245,8 +253,13 @@ private IAIState getNeededItem()\n                 setDelay(2);\n                 return getState();\n             }\n-\n-            tryTransferFromPosToWorker(walkTo, needsCurrently);\n+            // modified for debug and added the Stack itself as a workaround to get the \"real Stacksize\"\n+            if(tryTransferFromPosToWorker(walkTo, needsCurrently))", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODQ4NTQ1Ng=="}, "originalCommit": {"oid": "8926eaa3e83df3954ebdbc259c811b7f8388e313"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTE2MjYzOQ==", "bodyText": "This should still be removed (nothing inside the if/else cases)", "url": "https://github.com/ldtteam/minecolonies/pull/4634#discussion_r409162639", "createdAt": "2020-04-15T22:06:55Z", "author": {"login": "Asherslab"}, "path": "src/main/java/com/minecolonies/coremod/entity/ai/basic/AbstractEntityAIBasic.java", "diffHunk": "@@ -245,8 +253,13 @@ private IAIState getNeededItem()\n                 setDelay(2);\n                 return getState();\n             }\n-\n-            tryTransferFromPosToWorker(walkTo, needsCurrently);\n+            // modified for debug and added the Stack itself as a workaround to get the \"real Stacksize\"\n+            if(tryTransferFromPosToWorker(walkTo, needsCurrently))", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODQ4NTQ1Ng=="}, "originalCommit": {"oid": "8926eaa3e83df3954ebdbc259c811b7f8388e313"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTE5NDQxMA==", "bodyText": "already modified", "url": "https://github.com/ldtteam/minecolonies/pull/4634#discussion_r409194410", "createdAt": "2020-04-15T23:35:17Z", "author": {"login": "lexustec"}, "path": "src/main/java/com/minecolonies/coremod/entity/ai/basic/AbstractEntityAIBasic.java", "diffHunk": "@@ -245,8 +253,13 @@ private IAIState getNeededItem()\n                 setDelay(2);\n                 return getState();\n             }\n-\n-            tryTransferFromPosToWorker(walkTo, needsCurrently);\n+            // modified for debug and added the Stack itself as a workaround to get the \"real Stacksize\"\n+            if(tryTransferFromPosToWorker(walkTo, needsCurrently))", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODQ4NTQ1Ng=="}, "originalCommit": {"oid": "8926eaa3e83df3954ebdbc259c811b7f8388e313"}, "originalPosition": 47}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUzNjAxNzM4OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/minecolonies/coremod/entity/ai/basic/AbstractEntityAIBasic.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQyMzowMzo0OFrOGFj_zw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQyMzowMzo0OFrOGFj_zw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODQ4NTgzOQ==", "bodyText": "put a final on here please", "url": "https://github.com/ldtteam/minecolonies/pull/4634#discussion_r408485839", "createdAt": "2020-04-14T23:03:48Z", "author": {"login": "Asherslab"}, "path": "src/main/java/com/minecolonies/coremod/entity/ai/basic/AbstractEntityAIBasic.java", "diffHunk": "@@ -1463,19 +1475,55 @@ public boolean checkIfRequestForItemExistOrCreateAsynch(@NotNull final ItemStack\n      * @param predicate the predicate to evaluate.\n      * @return true if succesful.\n      */\n-    private boolean tryTransferFromPosToWorker(final BlockPos pos, @NotNull final Predicate<ItemStack> predicate)\n+\n+    // modified to reflect the actual stack amount to transfer.  WIP\n+    private boolean tryTransferFromPosToWorker(final BlockPos pos, @NotNull final Tuple<Predicate<ItemStack>, Integer> predicate)\n     {\n         final TileEntity entity = world.getTileEntity(pos);\n         if (entity == null)\n         {\n             return false;\n         }\n \n-        return InventoryUtils.transferXOfFirstSlotInProviderWithIntoNextFreeSlotInItemHandler(\n-          entity,\n-          predicate,\n-          Constants.STACKSIZE,\n-          worker.getInventoryCitizen());\n+        int existingAmount = InventoryUtils.getItemCountInItemHandler(worker.getInventoryCitizen(),predicate.getA());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8926eaa3e83df3954ebdbc259c811b7f8388e313"}, "originalPosition": 97}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUzNjAxODU2OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/minecolonies/coremod/entity/ai/basic/AbstractEntityAIBasic.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQyMzowNDowOVrOGFkAbQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQyMzowNDowOVrOGFkAbQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODQ4NTk5Nw==", "bodyText": "incorrect casing here", "url": "https://github.com/ldtteam/minecolonies/pull/4634#discussion_r408485997", "createdAt": "2020-04-14T23:04:09Z", "author": {"login": "Asherslab"}, "path": "src/main/java/com/minecolonies/coremod/entity/ai/basic/AbstractEntityAIBasic.java", "diffHunk": "@@ -1463,19 +1475,55 @@ public boolean checkIfRequestForItemExistOrCreateAsynch(@NotNull final ItemStack\n      * @param predicate the predicate to evaluate.\n      * @return true if succesful.\n      */\n-    private boolean tryTransferFromPosToWorker(final BlockPos pos, @NotNull final Predicate<ItemStack> predicate)\n+\n+    // modified to reflect the actual stack amount to transfer.  WIP\n+    private boolean tryTransferFromPosToWorker(final BlockPos pos, @NotNull final Tuple<Predicate<ItemStack>, Integer> predicate)\n     {\n         final TileEntity entity = world.getTileEntity(pos);\n         if (entity == null)\n         {\n             return false;\n         }\n \n-        return InventoryUtils.transferXOfFirstSlotInProviderWithIntoNextFreeSlotInItemHandler(\n-          entity,\n-          predicate,\n-          Constants.STACKSIZE,\n-          worker.getInventoryCitizen());\n+        int existingAmount = InventoryUtils.getItemCountInItemHandler(worker.getInventoryCitizen(),predicate.getA());\n+        int amount = 0;\n+        if(predicate.getB() > existingAmount) {\n+            amount = predicate.getB() - existingAmount;\n+        }\n+        else\n+        {\n+            return true; // has already needed transfers...\n+        }\n+\n+        do{\n+            int transferamount = 0;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8926eaa3e83df3954ebdbc259c811b7f8388e313"}, "originalPosition": 108}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUzNjAyMDkyOnYy", "diffSide": "RIGHT", "path": "src/main/java/com/minecolonies/coremod/entity/ai/basic/AbstractEntityAIBasic.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQyMzowNToyN1rOGFkB2g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQyMzowNToyN1rOGFkB2g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODQ4NjM2Mg==", "bodyText": "formatting (as ray said we have a formatting file)", "url": "https://github.com/ldtteam/minecolonies/pull/4634#discussion_r408486362", "createdAt": "2020-04-14T23:05:27Z", "author": {"login": "Asherslab"}, "path": "src/main/java/com/minecolonies/coremod/entity/ai/basic/AbstractEntityAIBasic.java", "diffHunk": "@@ -1463,19 +1475,55 @@ public boolean checkIfRequestForItemExistOrCreateAsynch(@NotNull final ItemStack\n      * @param predicate the predicate to evaluate.\n      * @return true if succesful.\n      */\n-    private boolean tryTransferFromPosToWorker(final BlockPos pos, @NotNull final Predicate<ItemStack> predicate)\n+\n+    // modified to reflect the actual stack amount to transfer.  WIP\n+    private boolean tryTransferFromPosToWorker(final BlockPos pos, @NotNull final Tuple<Predicate<ItemStack>, Integer> predicate)\n     {\n         final TileEntity entity = world.getTileEntity(pos);\n         if (entity == null)\n         {\n             return false;\n         }\n \n-        return InventoryUtils.transferXOfFirstSlotInProviderWithIntoNextFreeSlotInItemHandler(\n-          entity,\n-          predicate,\n-          Constants.STACKSIZE,\n-          worker.getInventoryCitizen());\n+        int existingAmount = InventoryUtils.getItemCountInItemHandler(worker.getInventoryCitizen(),predicate.getA());\n+        int amount = 0;\n+        if(predicate.getB() > existingAmount) {\n+            amount = predicate.getB() - existingAmount;\n+        }\n+        else\n+        {\n+            return true; // has already needed transfers...\n+        }\n+\n+        do{\n+            int transferamount = 0;\n+\n+            if(amount > STACKSIZE)\n+            {\n+                transferamount =  STACKSIZE;\n+            }\n+            else\n+            {\n+                transferamount = amount;\n+            }\n+\n+            amount -= transferamount;\n+\n+            if(!InventoryUtils.transferXOfFirstSlotInProviderWithIntoNextFreeSlotInItemHandler(entity, predicate.getA(),transferamount,worker.getInventoryCitizen()))\n+            {\n+                return false; // couldn't transfer\n+            }\n+        }while(amount > 0);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8926eaa3e83df3954ebdbc259c811b7f8388e313"}, "originalPosition": 125}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUzNjAyMjUxOnYy", "diffSide": "RIGHT", "path": "src/main/java/com/minecolonies/coremod/entity/ai/citizen/builder/EntityAIStructureBuilder.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQyMzowNjowOFrOGFkCtA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQyMzozODozMFrOGGPTeA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODQ4NjU4MA==", "bodyText": "Why are we increasing this?", "url": "https://github.com/ldtteam/minecolonies/pull/4634#discussion_r408486580", "createdAt": "2020-04-14T23:06:08Z", "author": {"login": "Asherslab"}, "path": "src/main/java/com/minecolonies/coremod/entity/ai/citizen/builder/EntityAIStructureBuilder.java", "diffHunk": "@@ -77,7 +80,7 @@\n     /**\n      * After how many actions should the builder dump his inventory.\n      */\n-    private static final int ACTIONS_UNTIL_DUMP = 1024;\n+    private static final int ACTIONS_UNTIL_DUMP = 4096;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8926eaa3e83df3954ebdbc259c811b7f8388e313"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTE5NTM4NA==", "bodyText": "if the Builder collected all materials for build we have  about 20 stacks in the inventory. which means if he is going to place all these 1280 blocks he will run back before placing all and dump the inventory. he will dump it anyway between the buildstages. also when he picks more material. I increased it to avoid this behaviour of unnescessary walks.", "url": "https://github.com/ldtteam/minecolonies/pull/4634#discussion_r409195384", "createdAt": "2020-04-15T23:38:30Z", "author": {"login": "lexustec"}, "path": "src/main/java/com/minecolonies/coremod/entity/ai/citizen/builder/EntityAIStructureBuilder.java", "diffHunk": "@@ -77,7 +80,7 @@\n     /**\n      * After how many actions should the builder dump his inventory.\n      */\n-    private static final int ACTIONS_UNTIL_DUMP = 1024;\n+    private static final int ACTIONS_UNTIL_DUMP = 4096;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODQ4NjU4MA=="}, "originalCommit": {"oid": "8926eaa3e83df3954ebdbc259c811b7f8388e313"}, "originalPosition": 26}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUzNjAzMDc4OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/minecolonies/coremod/entity/ai/citizen/enchanter/EntityAIWorkEnchanter.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQyMzowOTo1N1rOGFkHpQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQwNTo0NTo0NVrOGFqnmg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODQ4Nzg0NQ==", "bodyText": "import at top of file please", "url": "https://github.com/ldtteam/minecolonies/pull/4634#discussion_r408487845", "createdAt": "2020-04-14T23:09:57Z", "author": {"login": "Asherslab"}, "path": "src/main/java/com/minecolonies/coremod/entity/ai/citizen/enchanter/EntityAIWorkEnchanter.java", "diffHunk": "@@ -136,7 +136,7 @@ private IAIState decide()\n                 final int numberOfBooksInBuilding = InventoryUtils.getItemCountInProvider(getOwnBuilding(), IS_BOOK);\n                 if (numberOfBooksInBuilding > 0)\n                 {\n-                    needsCurrently = IS_BOOK;\n+                    needsCurrently = new com.minecolonies.api.util.Tuple<>(IS_BOOK,1);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8926eaa3e83df3954ebdbc259c811b7f8388e313"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODU5NDMzMA==", "bodyText": "can not import at top because conflict with minecraft.Tuple in Line 239. if i change 139 to new Tuple<> it errors out with can not infere arguments.. if i change the import also at the top Line 237 errors with incompatible values. the com.minecolonies.api.util. was putted by intellij automaticly", "url": "https://github.com/ldtteam/minecolonies/pull/4634#discussion_r408594330", "createdAt": "2020-04-15T05:45:45Z", "author": {"login": "lexustec"}, "path": "src/main/java/com/minecolonies/coremod/entity/ai/citizen/enchanter/EntityAIWorkEnchanter.java", "diffHunk": "@@ -136,7 +136,7 @@ private IAIState decide()\n                 final int numberOfBooksInBuilding = InventoryUtils.getItemCountInProvider(getOwnBuilding(), IS_BOOK);\n                 if (numberOfBooksInBuilding > 0)\n                 {\n-                    needsCurrently = IS_BOOK;\n+                    needsCurrently = new com.minecolonies.api.util.Tuple<>(IS_BOOK,1);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODQ4Nzg0NQ=="}, "originalCommit": {"oid": "8926eaa3e83df3954ebdbc259c811b7f8388e313"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUzNjAzMTEwOnYy", "diffSide": "RIGHT", "path": "src/main/java/com/minecolonies/coremod/entity/ai/citizen/enchanter/EntityAIWorkEnchanter.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQyMzoxMDowNFrOGFkH0A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQwOTo1OTo1NFrOGFyk1g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODQ4Nzg4OA==", "bodyText": "same as above", "url": "https://github.com/ldtteam/minecolonies/pull/4634#discussion_r408487888", "createdAt": "2020-04-14T23:10:04Z", "author": {"login": "Asherslab"}, "path": "src/main/java/com/minecolonies/coremod/entity/ai/citizen/enchanter/EntityAIWorkEnchanter.java", "diffHunk": "@@ -158,7 +158,7 @@ private IAIState decide()\n             final int amountOfAncientTomes = InventoryUtils.getItemCountInProvider(getOwnBuilding(), IS_ANCIENT_TOME);\n             if (amountOfAncientTomes > 0)\n             {\n-                needsCurrently = IS_ANCIENT_TOME;\n+                needsCurrently = new com.minecolonies.api.util.Tuple<>(IS_ANCIENT_TOME,1);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8926eaa3e83df3954ebdbc259c811b7f8388e313"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODU5NDQ0Nw==", "bodyText": "same as above", "url": "https://github.com/ldtteam/minecolonies/pull/4634#discussion_r408594447", "createdAt": "2020-04-15T05:46:06Z", "author": {"login": "lexustec"}, "path": "src/main/java/com/minecolonies/coremod/entity/ai/citizen/enchanter/EntityAIWorkEnchanter.java", "diffHunk": "@@ -158,7 +158,7 @@ private IAIState decide()\n             final int amountOfAncientTomes = InventoryUtils.getItemCountInProvider(getOwnBuilding(), IS_ANCIENT_TOME);\n             if (amountOfAncientTomes > 0)\n             {\n-                needsCurrently = IS_ANCIENT_TOME;\n+                needsCurrently = new com.minecolonies.api.util.Tuple<>(IS_ANCIENT_TOME,1);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODQ4Nzg4OA=="}, "originalCommit": {"oid": "8926eaa3e83df3954ebdbc259c811b7f8388e313"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODcyNDY5NA==", "bodyText": "Tuple replaced now", "url": "https://github.com/ldtteam/minecolonies/pull/4634#discussion_r408724694", "createdAt": "2020-04-15T09:59:54Z", "author": {"login": "lexustec"}, "path": "src/main/java/com/minecolonies/coremod/entity/ai/citizen/enchanter/EntityAIWorkEnchanter.java", "diffHunk": "@@ -158,7 +158,7 @@ private IAIState decide()\n             final int amountOfAncientTomes = InventoryUtils.getItemCountInProvider(getOwnBuilding(), IS_ANCIENT_TOME);\n             if (amountOfAncientTomes > 0)\n             {\n-                needsCurrently = IS_ANCIENT_TOME;\n+                needsCurrently = new com.minecolonies.api.util.Tuple<>(IS_ANCIENT_TOME,1);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODQ4Nzg4OA=="}, "originalCommit": {"oid": "8926eaa3e83df3954ebdbc259c811b7f8388e313"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU0NjAxNzAxOnYy", "diffSide": "RIGHT", "path": "src/main/java/com/minecolonies/coremod/entity/ai/basic/AbstractEntityAIBasic.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xN1QwODowOTo1MFrOGHEMQA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xN1QwODozNjowNVrOGHFDRg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDA2MTg4OA==", "bodyText": "Please adapt the format. While on top.", "url": "https://github.com/ldtteam/minecolonies/pull/4634#discussion_r410061888", "createdAt": "2020-04-17T08:09:50Z", "author": {"login": "OrionDevelopment"}, "path": "src/main/java/com/minecolonies/coremod/entity/ai/basic/AbstractEntityAIBasic.java", "diffHunk": "@@ -1463,19 +1435,58 @@ public boolean checkIfRequestForItemExistOrCreateAsynch(@NotNull final ItemStack\n      * @param predicate the predicate to evaluate.\n      * @return true if succesful.\n      */\n-    private boolean tryTransferFromPosToWorker(final BlockPos pos, @NotNull final Predicate<ItemStack> predicate)\n+\n+    private boolean tryTransferFromPosToWorkerIfNeeded(final BlockPos pos, @NotNull final Tuple<Predicate<ItemStack>, Integer> predicate)\n     {\n         final TileEntity entity = world.getTileEntity(pos);\n         if (entity == null)\n         {\n             return false;\n         }\n \n-        return InventoryUtils.transferXOfFirstSlotInProviderWithIntoNextFreeSlotInItemHandler(\n-          entity,\n-          predicate,\n-          Constants.STACKSIZE,\n-          worker.getInventoryCitizen());\n+        final int existingAmount = InventoryUtils.getItemCountInItemHandler(worker.getInventoryCitizen(), predicate.getA());\n+        int amount = 0;\n+        if (predicate.getB() > existingAmount)\n+        {\n+            amount = predicate.getB() - existingAmount;\n+        }\n+        else\n+        {\n+            return true; // has already needed transfers...\n+        }\n+\n+        int transferamount = 0;\n+\n+        do", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2aa935dc3aecfeaf8e2dd058e76e3c524dffb53c"}, "originalPosition": 440}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDA3MTg5MQ==", "bodyText": "the do {} while is intended because it runs at least once.\na while {} do not.", "url": "https://github.com/ldtteam/minecolonies/pull/4634#discussion_r410071891", "createdAt": "2020-04-17T08:28:34Z", "author": {"login": "lexustec"}, "path": "src/main/java/com/minecolonies/coremod/entity/ai/basic/AbstractEntityAIBasic.java", "diffHunk": "@@ -1463,19 +1435,58 @@ public boolean checkIfRequestForItemExistOrCreateAsynch(@NotNull final ItemStack\n      * @param predicate the predicate to evaluate.\n      * @return true if succesful.\n      */\n-    private boolean tryTransferFromPosToWorker(final BlockPos pos, @NotNull final Predicate<ItemStack> predicate)\n+\n+    private boolean tryTransferFromPosToWorkerIfNeeded(final BlockPos pos, @NotNull final Tuple<Predicate<ItemStack>, Integer> predicate)\n     {\n         final TileEntity entity = world.getTileEntity(pos);\n         if (entity == null)\n         {\n             return false;\n         }\n \n-        return InventoryUtils.transferXOfFirstSlotInProviderWithIntoNextFreeSlotInItemHandler(\n-          entity,\n-          predicate,\n-          Constants.STACKSIZE,\n-          worker.getInventoryCitizen());\n+        final int existingAmount = InventoryUtils.getItemCountInItemHandler(worker.getInventoryCitizen(), predicate.getA());\n+        int amount = 0;\n+        if (predicate.getB() > existingAmount)\n+        {\n+            amount = predicate.getB() - existingAmount;\n+        }\n+        else\n+        {\n+            return true; // has already needed transfers...\n+        }\n+\n+        int transferamount = 0;\n+\n+        do", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDA2MTg4OA=="}, "originalCommit": {"oid": "2aa935dc3aecfeaf8e2dd058e76e3c524dffb53c"}, "originalPosition": 440}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDA3NTk3NA==", "bodyText": "I change it because at this point it is working both ways", "url": "https://github.com/ldtteam/minecolonies/pull/4634#discussion_r410075974", "createdAt": "2020-04-17T08:36:05Z", "author": {"login": "lexustec"}, "path": "src/main/java/com/minecolonies/coremod/entity/ai/basic/AbstractEntityAIBasic.java", "diffHunk": "@@ -1463,19 +1435,58 @@ public boolean checkIfRequestForItemExistOrCreateAsynch(@NotNull final ItemStack\n      * @param predicate the predicate to evaluate.\n      * @return true if succesful.\n      */\n-    private boolean tryTransferFromPosToWorker(final BlockPos pos, @NotNull final Predicate<ItemStack> predicate)\n+\n+    private boolean tryTransferFromPosToWorkerIfNeeded(final BlockPos pos, @NotNull final Tuple<Predicate<ItemStack>, Integer> predicate)\n     {\n         final TileEntity entity = world.getTileEntity(pos);\n         if (entity == null)\n         {\n             return false;\n         }\n \n-        return InventoryUtils.transferXOfFirstSlotInProviderWithIntoNextFreeSlotInItemHandler(\n-          entity,\n-          predicate,\n-          Constants.STACKSIZE,\n-          worker.getInventoryCitizen());\n+        final int existingAmount = InventoryUtils.getItemCountInItemHandler(worker.getInventoryCitizen(), predicate.getA());\n+        int amount = 0;\n+        if (predicate.getB() > existingAmount)\n+        {\n+            amount = predicate.getB() - existingAmount;\n+        }\n+        else\n+        {\n+            return true; // has already needed transfers...\n+        }\n+\n+        int transferamount = 0;\n+\n+        do", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDA2MTg4OA=="}, "originalCommit": {"oid": "2aa935dc3aecfeaf8e2dd058e76e3c524dffb53c"}, "originalPosition": 440}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU0NjAyMjA4OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/minecolonies/coremod/entity/ai/citizen/builder/EntityAIStructureBuilder.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xN1QwODoxMToxOVrOGHEPQQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xN1QwODozNjoxOVrOGHFD0w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDA2MjY1Nw==", "bodyText": "This is not a constant. Adapt formatting.", "url": "https://github.com/ldtteam/minecolonies/pull/4634#discussion_r410062657", "createdAt": "2020-04-17T08:11:19Z", "author": {"login": "OrionDevelopment"}, "path": "src/main/java/com/minecolonies/coremod/entity/ai/citizen/builder/EntityAIStructureBuilder.java", "diffHunk": "@@ -128,15 +132,55 @@ public IAIState getStateAfterPickUp()\n \n     /**\n      * State to pick up material before going back to work.\n+     *\n      * @return the next state to go to.\n      */\n     public IAIState pickUpMaterial()\n     {\n         final BuildingBuilder building = getOwnBuilding();\n-        final List<Predicate<ItemStack>> neededItemsList = new ArrayList<>();\n-        for (final BuildingBuilderResource stack : building.getNeededResources().values())\n+        final List<Tuple<Predicate<ItemStack>, Integer>> neededItemsList = new ArrayList<>();\n+        boolean ONLY_64 = false;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2aa935dc3aecfeaf8e2dd058e76e3c524dffb53c"}, "originalPosition": 63}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDA3NjExNQ==", "bodyText": "changing", "url": "https://github.com/ldtteam/minecolonies/pull/4634#discussion_r410076115", "createdAt": "2020-04-17T08:36:19Z", "author": {"login": "lexustec"}, "path": "src/main/java/com/minecolonies/coremod/entity/ai/citizen/builder/EntityAIStructureBuilder.java", "diffHunk": "@@ -128,15 +132,55 @@ public IAIState getStateAfterPickUp()\n \n     /**\n      * State to pick up material before going back to work.\n+     *\n      * @return the next state to go to.\n      */\n     public IAIState pickUpMaterial()\n     {\n         final BuildingBuilder building = getOwnBuilding();\n-        final List<Predicate<ItemStack>> neededItemsList = new ArrayList<>();\n-        for (final BuildingBuilderResource stack : building.getNeededResources().values())\n+        final List<Tuple<Predicate<ItemStack>, Integer>> neededItemsList = new ArrayList<>();\n+        boolean ONLY_64 = false;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDA2MjY1Nw=="}, "originalCommit": {"oid": "2aa935dc3aecfeaf8e2dd058e76e3c524dffb53c"}, "originalPosition": 63}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU0NjAyNzIyOnYy", "diffSide": "RIGHT", "path": "src/main/java/com/minecolonies/coremod/entity/ai/citizen/builder/EntityAIStructureBuilder.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xN1QwODoxMjo1N1rOGHESjw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xN1QwODoxNzowNlrOGHEaxQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDA2MzUwMw==", "bodyText": "This need to be reworked. The logic here does not take stackability of items which are already contained in the inventory of the worker into account. Also formatting of while loops is of.", "url": "https://github.com/ldtteam/minecolonies/pull/4634#discussion_r410063503", "createdAt": "2020-04-17T08:12:57Z", "author": {"login": "OrionDevelopment"}, "path": "src/main/java/com/minecolonies/coremod/entity/ai/citizen/builder/EntityAIStructureBuilder.java", "diffHunk": "@@ -128,15 +132,55 @@ public IAIState getStateAfterPickUp()\n \n     /**\n      * State to pick up material before going back to work.\n+     *\n      * @return the next state to go to.\n      */\n     public IAIState pickUpMaterial()\n     {\n         final BuildingBuilder building = getOwnBuilding();\n-        final List<Predicate<ItemStack>> neededItemsList = new ArrayList<>();\n-        for (final BuildingBuilderResource stack : building.getNeededResources().values())\n+        final List<Tuple<Predicate<ItemStack>, Integer>> neededItemsList = new ArrayList<>();\n+        boolean ONLY_64 = false;\n+\n+        Map<String, BuildingBuilderResource> neededRessourcesMap = building.getNeededResources();\n+        if (neededRessourcesMap.size() > InventoryUtils.openSlotCount(worker.getInventoryCitizen()) - MIN_OPEN_SLOTS)\n         {\n-            neededItemsList.add(itemstack -> ItemStackUtils.compareItemStacksIgnoreStackSize(stack.getItemStack(), itemstack, true, true));\n+            ONLY_64 = true;\n+        }\n+        else\n+        {\n+            int stackCount = 0;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2aa935dc3aecfeaf8e2dd058e76e3c524dffb53c"}, "originalPosition": 73}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDA2NTYwNQ==", "bodyText": "Resolved", "url": "https://github.com/ldtteam/minecolonies/pull/4634#discussion_r410065605", "createdAt": "2020-04-17T08:17:06Z", "author": {"login": "Raycoms"}, "path": "src/main/java/com/minecolonies/coremod/entity/ai/citizen/builder/EntityAIStructureBuilder.java", "diffHunk": "@@ -128,15 +132,55 @@ public IAIState getStateAfterPickUp()\n \n     /**\n      * State to pick up material before going back to work.\n+     *\n      * @return the next state to go to.\n      */\n     public IAIState pickUpMaterial()\n     {\n         final BuildingBuilder building = getOwnBuilding();\n-        final List<Predicate<ItemStack>> neededItemsList = new ArrayList<>();\n-        for (final BuildingBuilderResource stack : building.getNeededResources().values())\n+        final List<Tuple<Predicate<ItemStack>, Integer>> neededItemsList = new ArrayList<>();\n+        boolean ONLY_64 = false;\n+\n+        Map<String, BuildingBuilderResource> neededRessourcesMap = building.getNeededResources();\n+        if (neededRessourcesMap.size() > InventoryUtils.openSlotCount(worker.getInventoryCitizen()) - MIN_OPEN_SLOTS)\n         {\n-            neededItemsList.add(itemstack -> ItemStackUtils.compareItemStacksIgnoreStackSize(stack.getItemStack(), itemstack, true, true));\n+            ONLY_64 = true;\n+        }\n+        else\n+        {\n+            int stackCount = 0;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDA2MzUwMw=="}, "originalCommit": {"oid": "2aa935dc3aecfeaf8e2dd058e76e3c524dffb53c"}, "originalPosition": 73}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3131, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}