{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEwNzkxMjkx", "number": 4803, "title": "Fix Builder trying to break water", "bodyText": "Closes #4796\nCloses #\nCloses #\nChanges proposed in this pull request:\n\nFix builder trying to break fluid blocks in the clear phase\nFix builder ignoring waterlogged blocks\n\n\nReview please", "createdAt": "2020-04-29T15:37:10Z", "url": "https://github.com/ldtteam/minecolonies/pull/4803", "merged": true, "mergeCommit": {"oid": "a31e2fb23a9a4ed45e6d6f29e617dbd48318d20c"}, "closed": true, "closedAt": "2020-05-01T08:43:50Z", "author": {"login": "ToMe25"}, "timelineItems": {"totalCount": 35, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABccaS4ZgH2gAyNDEwNzkxMjkxOmM0MWUzMGU2NDVjYTJkZTIxMGIzNjIwZTc5MDkyZGEyN2I5YjU4Njg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcc9k0NgFqTQwNDA3MTA3OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c41e30e645ca2de210b3620e79092da27b9b5868", "author": {"user": {"login": "ToMe25", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/c41e30e645ca2de210b3620e79092da27b9b5868", "committedDate": "2020-04-29T15:34:07Z", "message": "Start implementing improved water handling for the builder"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f62c2579be14b0758791396a6bf5486d3f188493", "author": {"user": {"login": "ToMe25", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/f62c2579be14b0758791396a6bf5486d3f188493", "committedDate": "2020-04-29T16:27:01Z", "message": "Add some waterlogging support"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "13cea3195d884b18ca10429fe121a77c1d7ed82a", "author": {"user": {"login": "ToMe25", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/13cea3195d884b18ca10429fe121a77c1d7ed82a", "committedDate": "2020-04-29T17:13:35Z", "message": "Move fluid detection to its own build phase\n\nalso change fluid removal"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1d282a54c381c8313b8798d7dae2c9025cf7f3e2", "author": {"user": {"login": "ToMe25", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/1d282a54c381c8313b8798d7dae2c9025cf7f3e2", "committedDate": "2020-04-29T17:15:10Z", "message": "Merge branch 'version/1.15' into fix/water"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "01d366a26a4f0da52a53ac0e171550f823967e78", "author": {"user": {"login": "ToMe25", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/01d366a26a4f0da52a53ac0e171550f823967e78", "committedDate": "2020-04-29T17:37:39Z", "message": "Fix a stupid mistake"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3368c316bbfd31a6bf7c6f158bbecefe6924ba6d", "author": {"user": {"login": "ToMe25", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/3368c316bbfd31a6bf7c6f158bbecefe6924ba6d", "committedDate": "2020-04-29T18:05:02Z", "message": "Finish Waterlogged block handling"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAyOTg5MDAy", "url": "https://github.com/ldtteam/minecolonies/pull/4803#pullrequestreview-402989002", "createdAt": "2020-04-29T19:52:51Z", "commit": {"oid": "3368c316bbfd31a6bf7c6f158bbecefe6924ba6d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQxOTo1Mjo1MlrOGOOjmQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQxOTo1Mjo1MlrOGOOjmQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzU3MTczNw==", "bodyText": "that needs to be properly formatted and needs javadoc, same thing for the next method.", "url": "https://github.com/ldtteam/minecolonies/pull/4803#discussion_r417571737", "createdAt": "2020-04-29T19:52:52Z", "author": {"login": "Raycoms"}, "path": "src/main/java/com/minecolonies/coremod/entity/ai/basic/AbstractEntityAIStructure.java", "diffHunk": "@@ -960,6 +980,88 @@ protected boolean isThereAStructureToBuild()\n         return currentStructure != null;\n     }\n \n+    private boolean fluidDetectStep(@NotNull final StructureIterator.StructureBlock currentBlock) {\n+        worker.getCitizenStatusHandler().setLatestStatus(new TranslationTextComponent(\"com.minecolonies.coremod.status.detecting_fluids\"));\n+        if (!walkToConstructionSite(currentStructure.getCurrentBlockPosition()))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3368c316bbfd31a6bf7c6f158bbecefe6924ba6d"}, "originalPosition": 67}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAyOTg5Mjc4", "url": "https://github.com/ldtteam/minecolonies/pull/4803#pullrequestreview-402989278", "createdAt": "2020-04-29T19:53:14Z", "commit": {"oid": "3368c316bbfd31a6bf7c6f158bbecefe6924ba6d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQxOTo1MzoxNVrOGOOkfQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQxOTo1MzoxNVrOGOOkfQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzU3MTk2NQ==", "bodyText": "this needs to be stored in the building class and serialized/deserialized so that it works on restart midway", "url": "https://github.com/ldtteam/minecolonies/pull/4803#discussion_r417571965", "createdAt": "2020-04-29T19:53:15Z", "author": {"login": "Raycoms"}, "path": "src/main/java/com/minecolonies/coremod/entity/ai/basic/AbstractEntityAIStructure.java", "diffHunk": "@@ -130,6 +130,11 @@\n      */\n     private int rotation = 0;\n \n+    /**\n+     * all the fluids to be removed later.\n+     */\n+    private Map<Integer, List<BlockPos>> fluidsToRemove = new TreeMap<>();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3368c316bbfd31a6bf7c6f158bbecefe6924ba6d"}, "originalPosition": 7}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAyOTg5Nzg2", "url": "https://github.com/ldtteam/minecolonies/pull/4803#pullrequestreview-402989786", "createdAt": "2020-04-29T19:53:55Z", "commit": {"oid": "3368c316bbfd31a6bf7c6f158bbecefe6924ba6d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQxOTo1Mzo1NVrOGOOl_w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQxOTo1Mzo1NVrOGOOl_w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzU3MjM1MQ==", "bodyText": "I think we only need fluid detect, fluid remove is independent of block progress. (It's basically while list is not empty, return same state).", "url": "https://github.com/ldtteam/minecolonies/pull/4803#discussion_r417572351", "createdAt": "2020-04-29T19:53:55Z", "author": {"login": "Raycoms"}, "path": "src/main/java/com/minecolonies/coremod/entity/ai/util/StructureIterator.java", "diffHunk": "@@ -226,11 +226,18 @@ public Result advanceBlock(final AbstractEntityAIStructure abstractEntityAIStruc\n             case CLEAR:\n                 return advanceBlocks(this.theStructure::decrementBlock,\n                   structureBlock -> structureBlock.doesStructureBlockEqualWorldBlock()\n-                                      || structureBlock.worldBlock == Blocks.AIR);\n+                                      || structureBlock.worldBlock == Blocks.AIR\n+                                      || structureBlock.worldBlock instanceof FlowingFluidBlock);\n             case BUILD:\n                 return advanceBlocks(this.theStructure::incrementBlock, structureBlock -> doesStructureBlockEqualWorldBlock(structureBlock, abstractEntityAIStructure)\n                                                                                          || structureBlock.block == Blocks.AIR\n                                                                                          || !structureBlock.metadata.getMaterial().isSolid());\n+            case FLUID_DETECT:\n+            case FLUID_REMOVE:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3368c316bbfd31a6bf7c6f158bbecefe6924ba6d"}, "originalPosition": 12}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "46e7a6ec9eadbaaf27c307ae115d20e4253faaad", "author": {"user": {"login": "ToMe25", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/46e7a6ec9eadbaaf27c307ae115d20e4253faaad", "committedDate": "2020-04-29T20:05:32Z", "message": "Javadoc and formatting"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dd034ba696cefc7930247a3d4c7d27fb111ee048", "author": {"user": {"login": "ToMe25", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/dd034ba696cefc7930247a3d4c7d27fb111ee048", "committedDate": "2020-04-29T20:59:36Z", "message": "Some Fixes\n\nRemove Fluid_Detect build stage\nSerialize/Deserialize fluidsToRemove"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAzMDM4NDQ0", "url": "https://github.com/ldtteam/minecolonies/pull/4803#pullrequestreview-403038444", "createdAt": "2020-04-29T21:05:12Z", "commit": {"oid": "dd034ba696cefc7930247a3d4c7d27fb111ee048"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQyMTowNToxMlrOGOQ9QA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQyMTowNToxMlrOGOQ9QA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzYxMTA3Mg==", "bodyText": "this should be a ordered list.", "url": "https://github.com/ldtteam/minecolonies/pull/4803#discussion_r417611072", "createdAt": "2020-04-29T21:05:12Z", "author": {"login": "Raycoms"}, "path": "src/main/java/com/minecolonies/coremod/colony/buildings/AbstractBuildingStructureBuilder.java", "diffHunk": "@@ -79,6 +97,11 @@\n      */\n     private int progressCounter = 0;\n \n+    /**\n+     * all the fluids to be removed in fluids_remove.\n+     */\n+    private Map<Integer, List<BlockPos>> fluidsToRemove = new TreeMap<>();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dd034ba696cefc7930247a3d4c7d27fb111ee048"}, "originalPosition": 42}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAzMDM4NzQx", "url": "https://github.com/ldtteam/minecolonies/pull/4803#pullrequestreview-403038741", "createdAt": "2020-04-29T21:05:37Z", "commit": {"oid": "dd034ba696cefc7930247a3d4c7d27fb111ee048"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQyMTowNTozOFrOGOQ-DQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQyMTowNTozOFrOGOQ-DQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzYxMTI3Nw==", "bodyText": "bracket", "url": "https://github.com/ldtteam/minecolonies/pull/4803#discussion_r417611277", "createdAt": "2020-04-29T21:05:38Z", "author": {"login": "Raycoms"}, "path": "src/main/java/com/minecolonies/coremod/colony/buildings/AbstractBuildingStructureBuilder.java", "diffHunk": "@@ -408,4 +458,12 @@ public boolean requiresCompleteRequestFulfillment()\n     {\n         return false;\n     }\n+\n+    /**\n+     * Getter for the blocks to be removed in fluids_remove.\n+     * @return the blocks to be removed in fluids_remove.\n+     */\n+    public Map<Integer, List<BlockPos>> getFluidsToRemove() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dd034ba696cefc7930247a3d4c7d27fb111ee048"}, "originalPosition": 103}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAzMDM5NjM1", "url": "https://github.com/ldtteam/minecolonies/pull/4803#pullrequestreview-403039635", "createdAt": "2020-04-29T21:06:49Z", "commit": {"oid": "dd034ba696cefc7930247a3d4c7d27fb111ee048"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQyMTowNjo0OVrOGORAkw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQyMTowNjo0OVrOGORAkw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzYxMTkyMw==", "bodyText": "bracket here and of method name", "url": "https://github.com/ldtteam/minecolonies/pull/4803#discussion_r417611923", "createdAt": "2020-04-29T21:06:49Z", "author": {"login": "Raycoms"}, "path": "src/main/java/com/minecolonies/coremod/entity/ai/basic/AbstractEntityAIStructure.java", "diffHunk": "@@ -960,6 +977,126 @@ protected boolean isThereAStructureToBuild()\n         return currentStructure != null;\n     }\n \n+    /**\n+     * Works on detecting fluid blocks that should get removed.\n+     * @param currentBlock the block that is currently being worked on.\n+     * @return the next step once done.\n+     */\n+    private boolean fluidDetectStep(@NotNull final StructureIterator.StructureBlock currentBlock) {\n+        worker.getCitizenStatusHandler().setLatestStatus(new TranslationTextComponent(\"com.minecolonies.coremod.status.detecting_fluids\"));\n+        if (!walkToConstructionSite(currentStructure.getCurrentBlockPosition())) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dd034ba696cefc7930247a3d4c7d27fb111ee048"}, "originalPosition": 87}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAzMDM5NzE4", "url": "https://github.com/ldtteam/minecolonies/pull/4803#pullrequestreview-403039718", "createdAt": "2020-04-29T21:06:57Z", "commit": {"oid": "dd034ba696cefc7930247a3d4c7d27fb111ee048"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQyMTowNjo1N1rOGORA5A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQyMTowNjo1N1rOGORA5A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzYxMjAwNA==", "bodyText": "bracket", "url": "https://github.com/ldtteam/minecolonies/pull/4803#discussion_r417612004", "createdAt": "2020-04-29T21:06:57Z", "author": {"login": "Raycoms"}, "path": "src/main/java/com/minecolonies/coremod/entity/ai/basic/AbstractEntityAIStructure.java", "diffHunk": "@@ -960,6 +977,126 @@ protected boolean isThereAStructureToBuild()\n         return currentStructure != null;\n     }\n \n+    /**\n+     * Works on detecting fluid blocks that should get removed.\n+     * @param currentBlock the block that is currently being worked on.\n+     * @return the next step once done.\n+     */\n+    private boolean fluidDetectStep(@NotNull final StructureIterator.StructureBlock currentBlock) {\n+        worker.getCitizenStatusHandler().setLatestStatus(new TranslationTextComponent(\"com.minecolonies.coremod.status.detecting_fluids\"));\n+        if (!walkToConstructionSite(currentStructure.getCurrentBlockPosition())) {\n+            return false;\n+        }\n+\n+        final Map<Integer,List<BlockPos>> fluidsToRemove = getOwnBuilding(AbstractBuildingStructureBuilder.class).getFluidsToRemove();\n+        if (currentBlock.block instanceof FlowingFluidBlock || currentBlock.worldBlock instanceof FlowingFluidBlock)\n+        {\n+            if(!(currentBlock.block instanceof FlowingFluidBlock))\n+            {\n+                List<BlockPos> layer;\n+                if(fluidsToRemove.containsKey(currentBlock.blockPosition.getY()))\n+                {\n+                    layer = fluidsToRemove.get(currentBlock.blockPosition.getY());\n+                }\n+                else\n+                {\n+                    layer = new ArrayList<>();\n+                }\n+                layer.add(currentBlock.blockPosition);\n+                if(!fluidsToRemove.containsKey(currentBlock.blockPosition.getY()))\n+                {\n+                    fluidsToRemove.put(currentBlock.blockPosition.getY(), layer);\n+                }\n+            }\n+            else if(currentBlock.worldBlock instanceof FlowingFluidBlock && currentBlock.worldBlock != currentBlock.block)\n+            {\n+                List<BlockPos> layer;\n+                if(fluidsToRemove.containsKey(currentBlock.blockPosition.getY()))\n+                {\n+                    layer = fluidsToRemove.get(currentBlock.blockPosition.getY());\n+                }\n+                else\n+                {\n+                    layer = new ArrayList<>();\n+                }\n+                layer.add(currentBlock.blockPosition);\n+                if(!fluidsToRemove.containsKey(currentBlock.blockPosition.getY()))\n+                {\n+                    fluidsToRemove.put(currentBlock.blockPosition.getY(), layer);\n+                }\n+            }\n+        }\n+        else if (!currentBlock.metadata.getFluidState().isEmpty() || !currentBlock.worldMetadata.getFluidState().isEmpty())\n+        {\n+            if(currentBlock.metadata.getFluidState().isEmpty())\n+            {\n+                List<BlockPos> layer;\n+                if(fluidsToRemove.containsKey(currentBlock.blockPosition.getY()))\n+                {\n+                    layer = fluidsToRemove.get(currentBlock.blockPosition.getY());\n+                }\n+                else\n+                {\n+                    layer = new ArrayList<>();\n+                }\n+                layer.add(currentBlock.blockPosition);\n+                if(!fluidsToRemove.containsKey(currentBlock.blockPosition.getY()))\n+                {\n+                    fluidsToRemove.put(currentBlock.blockPosition.getY(), layer);\n+                }\n+            }\n+            else if(!currentBlock.worldMetadata.getFluidState().isEmpty() && currentBlock.worldMetadata.getFluidState().getFluid() != currentBlock.metadata.getFluidState().getFluid())\n+            {\n+                List<BlockPos> layer;\n+                if(fluidsToRemove.containsKey(currentBlock.blockPosition.getY()))\n+                {\n+                    layer = fluidsToRemove.get(currentBlock.blockPosition.getY());\n+                }\n+                else\n+                {\n+                    layer = new ArrayList<>();\n+                }\n+                layer.add(currentBlock.blockPosition);\n+                if(!fluidsToRemove.containsKey(currentBlock.blockPosition.getY()))\n+                {\n+                    fluidsToRemove.put(currentBlock.blockPosition.getY(), layer);\n+                }\n+            }\n+        }\n+        return true;\n+    }\n+\n+    /**\n+     * Works on removing the fluid blocks that should get removed.\n+     * @param currentBlock\n+     * @return the next step once done.\n+     */\n+    private IAIState fluidRemoveStep() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dd034ba696cefc7930247a3d4c7d27fb111ee048"}, "originalPosition": 174}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eb8b61e5e95a4c81f43ebcc65054d124914bdeb8", "author": {"user": {"login": "ToMe25", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/eb8b61e5e95a4c81f43ebcc65054d124914bdeb8", "committedDate": "2020-04-29T21:14:00Z", "message": "brackets"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0c74fa18cf3f71449ce69ab277d0fd33cf67d444", "author": {"user": {"login": "ToMe25", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/0c74fa18cf3f71449ce69ab277d0fd33cf67d444", "committedDate": "2020-04-29T21:20:51Z", "message": "Make fluidsToRemove a LinkedHashMap"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5220e658c6220f417b01d6d90212db6d9a84c242", "author": {"user": {"login": "ToMe25", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/5220e658c6220f417b01d6d90212db6d9a84c242", "committedDate": "2020-04-30T07:30:24Z", "message": "Remove unused import"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e58d4d6f9226e7a3b1318060d28782c6bf26e68c", "author": {"user": {"login": "ToMe25", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/e58d4d6f9226e7a3b1318060d28782c6bf26e68c", "committedDate": "2020-04-30T08:39:45Z", "message": "remove water slower for testing purposes only"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e0c8abaffe0c5bd11684cac73975653c75d8c5c9", "author": {"user": {"login": "ToMe25", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/e0c8abaffe0c5bd11684cac73975653c75d8c5c9", "committedDate": "2020-04-30T09:55:52Z", "message": "set the fluid removal delay back to one tick"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAzMzc2MzM2", "url": "https://github.com/ldtteam/minecolonies/pull/4803#pullrequestreview-403376336", "createdAt": "2020-04-30T10:01:47Z", "commit": {"oid": "e0c8abaffe0c5bd11684cac73975653c75d8c5c9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQxMDowMTo0N1rOGOiaLw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQxMDowMTo0N1rOGOiaLw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzg5NzAwNw==", "bodyText": "That's the wrong AI state you reset it =D", "url": "https://github.com/ldtteam/minecolonies/pull/4803#discussion_r417897007", "createdAt": "2020-04-30T10:01:47Z", "author": {"login": "Raycoms"}, "path": "src/main/java/com/minecolonies/coremod/entity/ai/basic/AbstractEntityAIStructure.java", "diffHunk": "@@ -158,7 +158,7 @@ protected AbstractEntityAIStructure(@NotNull final J job)\n           /*\n            * Check if we have to build something.\n            */\n-          new AITarget(IDLE, this::isThereAStructureToBuild, () -> START_BUILDING, 100),\n+          new AITarget(IDLE, this::isThereAStructureToBuild, () -> START_BUILDING, 1),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e0c8abaffe0c5bd11684cac73975653c75d8c5c9"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "28e393814f5dee1c979163165cfc809c54b61532", "author": {"user": {"login": "ToMe25", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/28e393814f5dee1c979163165cfc809c54b61532", "committedDate": "2020-04-30T10:02:50Z", "message": "fix wrong AIState being faster"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "893dde5a6bde320be56cd3176c23e20447dcafc7", "author": {"user": {"login": "ToMe25", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/893dde5a6bde320be56cd3176c23e20447dcafc7", "committedDate": "2020-04-30T10:08:53Z", "message": "Merge branch 'version/1.15' into fix/water"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dbcded5d9d3a05e891063862a84f00d603ae5a53", "author": {"user": {"login": "ToMe25", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/dbcded5d9d3a05e891063862a84f00d603ae5a53", "committedDate": "2020-04-30T11:10:26Z", "message": "Merge branch 'version/1.15' into fix/water"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAzNDIxNTg0", "url": "https://github.com/ldtteam/minecolonies/pull/4803#pullrequestreview-403421584", "createdAt": "2020-04-30T11:11:11Z", "commit": {"oid": "893dde5a6bde320be56cd3176c23e20447dcafc7"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eb339514a7ce882b0bc14bb18c5e76cbe1944732", "author": {"user": {"login": "ToMe25", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/eb339514a7ce882b0bc14bb18c5e76cbe1944732", "committedDate": "2020-04-30T11:14:38Z", "message": "Merge branch 'version/1.15' into fix/water"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9b0bf115cee3aabea677789adbf7b398e2407fc3", "author": {"user": {"login": "ToMe25", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/9b0bf115cee3aabea677789adbf7b398e2407fc3", "committedDate": "2020-04-30T11:51:19Z", "message": "small changed\n\nMove Spawn build phase to be executed last\nMove NBT Tag names to NbtTagConstants"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f1d05601f3a97e9ce21b38f35d0f5f815ee70dd3", "author": {"user": {"login": "ToMe25", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/f1d05601f3a97e9ce21b38f35d0f5f815ee70dd3", "committedDate": "2020-04-30T12:07:55Z", "message": "Make builder remove non-source blocks too"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2a9fecfc27031c495b5d8a0fb405ca4cb7f4b57b", "author": {"user": {"login": "ToMe25", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/2a9fecfc27031c495b5d8a0fb405ca4cb7f4b57b", "committedDate": "2020-04-30T13:58:19Z", "message": "Merge branch 'version/1.15' into fix/water"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b922d98e96795159319d561d3df78650d7fa2ac2", "author": {"user": {"login": "ToMe25", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/b922d98e96795159319d561d3df78650d7fa2ac2", "committedDate": "2020-04-30T16:30:27Z", "message": "Fix AITarget nextStep order"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d81b42cd04b54853f19b97a53f8141ca6bfab8f2", "author": {"user": {"login": "ToMe25", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/d81b42cd04b54853f19b97a53f8141ca6bfab8f2", "committedDate": "2020-04-30T17:50:00Z", "message": "Fix switchStage not getting called\n\nalso sort the AITarget constructors"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAzNzg1MTQy", "url": "https://github.com/ldtteam/minecolonies/pull/4803#pullrequestreview-403785142", "createdAt": "2020-04-30T18:45:07Z", "commit": {"oid": "d81b42cd04b54853f19b97a53f8141ca6bfab8f2"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d2eeda1afac971658e0cdc18bc8098cae98ed700", "author": {"user": {"login": "ToMe25", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/d2eeda1afac971658e0cdc18bc8098cae98ed700", "committedDate": "2020-04-30T20:49:26Z", "message": "Fix workers taking very long to finish remove stage"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bcd82ee0f9f67942a764ee3007af7d434c6614c6", "author": {"user": {"login": "ToMe25", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/bcd82ee0f9f67942a764ee3007af7d434c6614c6", "committedDate": "2020-05-01T08:25:16Z", "message": "Merge branch 'version/1.15' into fix/water"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0MDcxMDc5", "url": "https://github.com/ldtteam/minecolonies/pull/4803#pullrequestreview-404071079", "createdAt": "2020-05-01T08:40:23Z", "commit": {"oid": "bcd82ee0f9f67942a764ee3007af7d434c6614c6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2213, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}