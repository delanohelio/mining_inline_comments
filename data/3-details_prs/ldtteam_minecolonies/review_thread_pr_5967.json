{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA3NjUyNDk2", "number": 5967, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQxNTo0NzoxN1rOEwUdaw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQxNjowNDoyOVrOEwU8Jw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE5MTAyMzE1OnYy", "diffSide": "LEFT", "path": "src/main/java/com/minecolonies/coremod/colony/buildings/AbstractBuildingCrafter.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQxNTo0NzoxN1rOHlzWFA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQxNTo0NzoxN1rOHlzWFA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTQwMDU5Ng==", "bodyText": "There are at least 3 instances in the codebase of this. Can you please remove the other 2?", "url": "https://github.com/ldtteam/minecolonies/pull/5967#discussion_r509400596", "createdAt": "2020-10-21T15:47:17Z", "author": {"login": "Mekle001"}, "path": "src/main/java/com/minecolonies/coremod/colony/buildings/AbstractBuildingCrafter.java", "diffHunk": "@@ -211,27 +206,6 @@ public View(final IColonyView c, final BlockPos l)\n             super(c, l);\n         }\n \n-        /**\n-         * Check if an additional recipe can be added.\n-         *\n-         * @return true if so.\n-         */\n-        public boolean canRecipeBeAdded()\n-        {\n-            return AbstractBuildingCrafter.canBuildingCanLearnMoreRecipes(getBuildingLevel(), super.getRecipes().size());\n-        }\n-    }\n-\n-    /**\n-     * Check if an additional recipe can be added.\n-     *\n-     * @param learnedRecipes the learned recipes.\n-     * @param buildingLevel  the building level.\n-     * @return true if so.\n-     */\n-    public static boolean canBuildingCanLearnMoreRecipes(final int buildingLevel, final int learnedRecipes)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cb1e483e758f7735166a5ed46a91f9e7685e89fc"}, "originalPosition": 34}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE5MTA5OTE2OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/minecolonies/coremod/colony/buildings/AbstractBuildingWorker.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQxNjowMzo1NVrOHl0GSw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQxNjo1NTowOFrOHl2Osg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTQxMjkzOQ==", "bodyText": "the formatting is off here slightly.", "url": "https://github.com/ldtteam/minecolonies/pull/5967#discussion_r509412939", "createdAt": "2020-10-21T16:03:55Z", "author": {"login": "Raycoms"}, "path": "src/main/java/com/minecolonies/coremod/colony/buildings/AbstractBuildingWorker.java", "diffHunk": "@@ -445,13 +445,21 @@ public boolean isRecipeAlterationAllowed()\n      */\n     private boolean hasSpaceForMoreRecipes()\n     {\n+\n+        return maxRecipes() > getRecipes().size() + 1;\n+    }\n+\n+    /**\n+     * Gets the maximum number of recipes a building may have at the current time.\n+     */\n+    private int maxRecipes() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cb1e483e758f7735166a5ed46a91f9e7685e89fc"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTQxODIyNA==", "bodyText": "I see two things on formatting here:\n\nthe curly brace needs to be on the next line\nmaxRecipes should be getMaxRecipes", "url": "https://github.com/ldtteam/minecolonies/pull/5967#discussion_r509418224", "createdAt": "2020-10-21T16:11:22Z", "author": {"login": "Mekle001"}, "path": "src/main/java/com/minecolonies/coremod/colony/buildings/AbstractBuildingWorker.java", "diffHunk": "@@ -445,13 +445,21 @@ public boolean isRecipeAlterationAllowed()\n      */\n     private boolean hasSpaceForMoreRecipes()\n     {\n+\n+        return maxRecipes() > getRecipes().size() + 1;\n+    }\n+\n+    /**\n+     * Gets the maximum number of recipes a building may have at the current time.\n+     */\n+    private int maxRecipes() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTQxMjkzOQ=="}, "originalCommit": {"oid": "cb1e483e758f7735166a5ed46a91f9e7685e89fc"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTQ0Nzg1OA==", "bodyText": "Changed the formatting, and the function name", "url": "https://github.com/ldtteam/minecolonies/pull/5967#discussion_r509447858", "createdAt": "2020-10-21T16:55:08Z", "author": {"login": "KatrinaAS"}, "path": "src/main/java/com/minecolonies/coremod/colony/buildings/AbstractBuildingWorker.java", "diffHunk": "@@ -445,13 +445,21 @@ public boolean isRecipeAlterationAllowed()\n      */\n     private boolean hasSpaceForMoreRecipes()\n     {\n+\n+        return maxRecipes() > getRecipes().size() + 1;\n+    }\n+\n+    /**\n+     * Gets the maximum number of recipes a building may have at the current time.\n+     */\n+    private int maxRecipes() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTQxMjkzOQ=="}, "originalCommit": {"oid": "cb1e483e758f7735166a5ed46a91f9e7685e89fc"}, "originalPosition": 11}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE5MTEwMTA3OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/minecolonies/coremod/colony/buildings/AbstractBuildingWorker.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQxNjowNDoxOVrOHl0Hdg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQxNjo1NjowOFrOHl2Rpg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTQxMzIzOA==", "bodyText": "Much better to synch the whole number instead of just \"is there more space\"", "url": "https://github.com/ldtteam/minecolonies/pull/5967#discussion_r509413238", "createdAt": "2020-10-21T16:04:19Z", "author": {"login": "Raycoms"}, "path": "src/main/java/com/minecolonies/coremod/colony/buildings/AbstractBuildingWorker.java", "diffHunk": "@@ -729,9 +737,9 @@ public void serializeToView(@NotNull final PacketBuffer buf)\n         buf.writeInt(getPrimarySkill().ordinal());\n         buf.writeInt(getSecondarySkill().ordinal());\n         buf.writeInt(getMaxInhabitants());\n-        buf.writeBoolean(hasSpaceForMoreRecipes());\n         buf.writeBoolean(isRecipeAlterationAllowed());\n         buf.writeString(jobDisplayName);\n+        buf.writeInt(maxRecipes());\n     }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cb1e483e758f7735166a5ed46a91f9e7685e89fc"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTQ0ODYxNA==", "bodyText": "I must admit I was worried when I changed this at first, removing something from a buffer always seems a fragile point to me", "url": "https://github.com/ldtteam/minecolonies/pull/5967#discussion_r509448614", "createdAt": "2020-10-21T16:56:08Z", "author": {"login": "KatrinaAS"}, "path": "src/main/java/com/minecolonies/coremod/colony/buildings/AbstractBuildingWorker.java", "diffHunk": "@@ -729,9 +737,9 @@ public void serializeToView(@NotNull final PacketBuffer buf)\n         buf.writeInt(getPrimarySkill().ordinal());\n         buf.writeInt(getSecondarySkill().ordinal());\n         buf.writeInt(getMaxInhabitants());\n-        buf.writeBoolean(hasSpaceForMoreRecipes());\n         buf.writeBoolean(isRecipeAlterationAllowed());\n         buf.writeString(jobDisplayName);\n+        buf.writeInt(maxRecipes());\n     }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTQxMzIzOA=="}, "originalCommit": {"oid": "cb1e483e758f7735166a5ed46a91f9e7685e89fc"}, "originalPosition": 31}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE5MTEwMTgzOnYy", "diffSide": "RIGHT", "path": "src/main/java/com/minecolonies/coremod/colony/buildings/AbstractBuildingWorker.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQxNjowNDoyOVrOHl0H7Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQxNzowMTo0M1rOHl2g9g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTQxMzM1Nw==", "bodyText": "Also formatting", "url": "https://github.com/ldtteam/minecolonies/pull/5967#discussion_r509413357", "createdAt": "2020-10-21T16:04:29Z", "author": {"login": "Raycoms"}, "path": "src/main/java/com/minecolonies/coremod/colony/buildings/AbstractBuildingWorker.java", "diffHunk": "@@ -1114,7 +1122,11 @@ public boolean canCraftComplexRecipes()\n         @Override\n         public boolean canRecipeBeAdded()\n         {\n-            return canAddMoreRecipes;\n+            return getMaxRecipes() > getRecipes().size() + 1;\n+        }\n+\n+        public int getMaxRecipes() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cb1e483e758f7735166a5ed46a91f9e7685e89fc"}, "originalPosition": 65}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTQ0ODczNQ==", "bodyText": "Changed formatting", "url": "https://github.com/ldtteam/minecolonies/pull/5967#discussion_r509448735", "createdAt": "2020-10-21T16:56:17Z", "author": {"login": "KatrinaAS"}, "path": "src/main/java/com/minecolonies/coremod/colony/buildings/AbstractBuildingWorker.java", "diffHunk": "@@ -1114,7 +1122,11 @@ public boolean canCraftComplexRecipes()\n         @Override\n         public boolean canRecipeBeAdded()\n         {\n-            return canAddMoreRecipes;\n+            return getMaxRecipes() > getRecipes().size() + 1;\n+        }\n+\n+        public int getMaxRecipes() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTQxMzM1Nw=="}, "originalCommit": {"oid": "cb1e483e758f7735166a5ed46a91f9e7685e89fc"}, "originalPosition": 65}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTQ1MDI2OQ==", "bodyText": "getMaxRecipes still has the curly brace in the wrong place", "url": "https://github.com/ldtteam/minecolonies/pull/5967#discussion_r509450269", "createdAt": "2020-10-21T16:58:26Z", "author": {"login": "Mekle001"}, "path": "src/main/java/com/minecolonies/coremod/colony/buildings/AbstractBuildingWorker.java", "diffHunk": "@@ -1114,7 +1122,11 @@ public boolean canCraftComplexRecipes()\n         @Override\n         public boolean canRecipeBeAdded()\n         {\n-            return canAddMoreRecipes;\n+            return getMaxRecipes() > getRecipes().size() + 1;\n+        }\n+\n+        public int getMaxRecipes() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTQxMzM1Nw=="}, "originalCommit": {"oid": "cb1e483e758f7735166a5ed46a91f9e7685e89fc"}, "originalPosition": 65}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTQ1MjUzNA==", "bodyText": "Oh, there it is.", "url": "https://github.com/ldtteam/minecolonies/pull/5967#discussion_r509452534", "createdAt": "2020-10-21T17:01:43Z", "author": {"login": "Mekle001"}, "path": "src/main/java/com/minecolonies/coremod/colony/buildings/AbstractBuildingWorker.java", "diffHunk": "@@ -1114,7 +1122,11 @@ public boolean canCraftComplexRecipes()\n         @Override\n         public boolean canRecipeBeAdded()\n         {\n-            return canAddMoreRecipes;\n+            return getMaxRecipes() > getRecipes().size() + 1;\n+        }\n+\n+        public int getMaxRecipes() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTQxMzM1Nw=="}, "originalCommit": {"oid": "cb1e483e758f7735166a5ed46a91f9e7685e89fc"}, "originalPosition": 65}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3356, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}