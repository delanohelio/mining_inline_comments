{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE1NjIyNzIy", "number": 4950, "reviewThreads": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOVQyMTozODoyOVrOD657nw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOVQyMTo0MjoyMFrOD6580A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzMDkzMTUxOnYy", "diffSide": "RIGHT", "path": "src/api/java/com/minecolonies/api/colony/requestsystem/requestable/Tool.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOVQyMTozODoyOVrOGS-XOA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOVQyMTozODoyOVrOGS-XOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjU0OTMwNA==", "bodyText": "nice find :)", "url": "https://github.com/ldtteam/minecolonies/pull/4950#discussion_r422549304", "createdAt": "2020-05-09T21:38:29Z", "author": {"login": "someaddons"}, "path": "src/api/java/com/minecolonies/api/colony/requestsystem/requestable/Tool.java", "diffHunk": "@@ -142,7 +142,7 @@ public boolean matches(@NotNull final ItemStack stack)\n                 && getToolClasses(stack).stream()\n                 .filter(s -> getToolClass().getName().equalsIgnoreCase(s))\n                 .map(ToolType::getToolType)\n-                .anyMatch(t -> t != ToolType.NONE && !(stack.isDamaged() || stack.getDamage() > 0) && ItemStackUtils.hasToolLevel(stack, t, getMinLevel(), getMaxLevel()));\n+                .anyMatch(t -> t != ToolType.NONE && (stack.getDamage() > 0 || !stack.isDamaged()) && ItemStackUtils.hasToolLevel(stack, t, getMinLevel(), getMaxLevel()));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fa6f8f1ad2ffbac7d924a124794972cc5561400d"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzMDkzMjE4OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/minecolonies/coremod/client/gui/WindowHutPlantation.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOVQyMTozOToyM1rOGS-Xiw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOVQyMTozOToyM1rOGS-Xiw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjU0OTM4Nw==", "bodyText": "old javadoc", "url": "https://github.com/ldtteam/minecolonies/pull/4950#discussion_r422549387", "createdAt": "2020-05-09T21:39:23Z", "author": {"login": "someaddons"}, "path": "src/main/java/com/minecolonies/coremod/client/gui/WindowHutPlantation.java", "diffHunk": "@@ -0,0 +1,81 @@\n+package com.minecolonies.coremod.client.gui;\n+\n+import com.ldtteam.blockout.controls.Button;\n+import com.minecolonies.api.util.constant.Constants;\n+import com.minecolonies.coremod.colony.buildings.workerbuildings.BuildingMiner;\n+import com.minecolonies.coremod.colony.buildings.workerbuildings.BuildingPlantation;\n+import net.minecraft.item.Item;\n+import net.minecraft.item.ItemStack;\n+import org.jetbrains.annotations.NotNull;\n+\n+import java.util.List;\n+\n+/**\n+ * Window for the crusher hut.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fa6f8f1ad2ffbac7d924a124794972cc5561400d"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzMDkzMjM4OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/minecolonies/coremod/client/gui/WindowHutPlantation.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOVQyMTozOTozOFrOGS-Xow==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOVQyMTozOTozOFrOGS-Xow==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjU0OTQxMQ==", "bodyText": "still not the crusher :)", "url": "https://github.com/ldtteam/minecolonies/pull/4950#discussion_r422549411", "createdAt": "2020-05-09T21:39:38Z", "author": {"login": "someaddons"}, "path": "src/main/java/com/minecolonies/coremod/client/gui/WindowHutPlantation.java", "diffHunk": "@@ -0,0 +1,81 @@\n+package com.minecolonies.coremod.client.gui;\n+\n+import com.ldtteam.blockout.controls.Button;\n+import com.minecolonies.api.util.constant.Constants;\n+import com.minecolonies.coremod.colony.buildings.workerbuildings.BuildingMiner;\n+import com.minecolonies.coremod.colony.buildings.workerbuildings.BuildingPlantation;\n+import net.minecraft.item.Item;\n+import net.minecraft.item.ItemStack;\n+import org.jetbrains.annotations.NotNull;\n+\n+import java.util.List;\n+\n+/**\n+ * Window for the crusher hut.\n+ */\n+public class WindowHutPlantation extends AbstractWindowWorkerBuilding<BuildingPlantation.View>\n+{\n+    /**\n+     * The mode button id.\n+     */\n+    private static final String BLOCK_BUTTON = \"block\";\n+\n+    /**\n+     * The id of the gui.\n+     */\n+    private static final String CRUSHER_RESOURCE_SUFFIX = \":gui/windowhutplantation.xml\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fa6f8f1ad2ffbac7d924a124794972cc5561400d"}, "originalPosition": 26}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzMDkzMjYyOnYy", "diffSide": "RIGHT", "path": "src/main/java/com/minecolonies/coremod/client/gui/WindowHutPlantation.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOVQyMTo0MDowMlrOGS-Xvg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOVQyMTo0MDowMlrOGS-Xvg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjU0OTQzOA==", "bodyText": "button isnt a crusher either", "url": "https://github.com/ldtteam/minecolonies/pull/4950#discussion_r422549438", "createdAt": "2020-05-09T21:40:02Z", "author": {"login": "someaddons"}, "path": "src/main/java/com/minecolonies/coremod/client/gui/WindowHutPlantation.java", "diffHunk": "@@ -0,0 +1,81 @@\n+package com.minecolonies.coremod.client.gui;\n+\n+import com.ldtteam.blockout.controls.Button;\n+import com.minecolonies.api.util.constant.Constants;\n+import com.minecolonies.coremod.colony.buildings.workerbuildings.BuildingMiner;\n+import com.minecolonies.coremod.colony.buildings.workerbuildings.BuildingPlantation;\n+import net.minecraft.item.Item;\n+import net.minecraft.item.ItemStack;\n+import org.jetbrains.annotations.NotNull;\n+\n+import java.util.List;\n+\n+/**\n+ * Window for the crusher hut.\n+ */\n+public class WindowHutPlantation extends AbstractWindowWorkerBuilding<BuildingPlantation.View>\n+{\n+    /**\n+     * The mode button id.\n+     */\n+    private static final String BLOCK_BUTTON = \"block\";\n+\n+    /**\n+     * The id of the gui.\n+     */\n+    private static final String CRUSHER_RESOURCE_SUFFIX = \":gui/windowhutplantation.xml\";\n+\n+    /**\n+     * Constructor for the window of the miner hut.\n+     *\n+     * @param building {@link BuildingMiner.View}.\n+     */\n+    public WindowHutPlantation(final BuildingPlantation.View building)\n+    {\n+        super(building, Constants.MOD_ID + CRUSHER_RESOURCE_SUFFIX);\n+        final Button crushingSettingsButton = findPaneOfTypeByID(BLOCK_BUTTON, Button.class);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fa6f8f1ad2ffbac7d924a124794972cc5561400d"}, "originalPosition": 36}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzMDkzMjgxOnYy", "diffSide": "RIGHT", "path": "src/main/java/com/minecolonies/coremod/client/gui/WindowHutPlantation.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOVQyMTo0MDoyNFrOGS-X1g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOVQyMTo0MDoyNFrOGS-X1g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjU0OTQ2Mg==", "bodyText": "plantingmodes?^^", "url": "https://github.com/ldtteam/minecolonies/pull/4950#discussion_r422549462", "createdAt": "2020-05-09T21:40:24Z", "author": {"login": "someaddons"}, "path": "src/main/java/com/minecolonies/coremod/client/gui/WindowHutPlantation.java", "diffHunk": "@@ -0,0 +1,81 @@\n+package com.minecolonies.coremod.client.gui;\n+\n+import com.ldtteam.blockout.controls.Button;\n+import com.minecolonies.api.util.constant.Constants;\n+import com.minecolonies.coremod.colony.buildings.workerbuildings.BuildingMiner;\n+import com.minecolonies.coremod.colony.buildings.workerbuildings.BuildingPlantation;\n+import net.minecraft.item.Item;\n+import net.minecraft.item.ItemStack;\n+import org.jetbrains.annotations.NotNull;\n+\n+import java.util.List;\n+\n+/**\n+ * Window for the crusher hut.\n+ */\n+public class WindowHutPlantation extends AbstractWindowWorkerBuilding<BuildingPlantation.View>\n+{\n+    /**\n+     * The mode button id.\n+     */\n+    private static final String BLOCK_BUTTON = \"block\";\n+\n+    /**\n+     * The id of the gui.\n+     */\n+    private static final String CRUSHER_RESOURCE_SUFFIX = \":gui/windowhutplantation.xml\";\n+\n+    /**\n+     * Constructor for the window of the miner hut.\n+     *\n+     * @param building {@link BuildingMiner.View}.\n+     */\n+    public WindowHutPlantation(final BuildingPlantation.View building)\n+    {\n+        super(building, Constants.MOD_ID + CRUSHER_RESOURCE_SUFFIX);\n+        final Button crushingSettingsButton = findPaneOfTypeByID(BLOCK_BUTTON, Button.class);\n+\n+        registerButton(BLOCK_BUTTON, this::switchCrushingMode);\n+        setupSettings(crushingSettingsButton);\n+    }\n+\n+    /**\n+     * Switch the mode after clicking the button.\n+     *\n+     * @param crushingSettingsButton the clicked button.\n+     */\n+    private void switchCrushingMode(final Button crushingSettingsButton)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fa6f8f1ad2ffbac7d924a124794972cc5561400d"}, "originalPosition": 47}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzMDkzNDU2OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/minecolonies/coremod/colony/buildings/workerbuildings/BuildingPlantation.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOVQyMTo0MjoyMFrOGS-Yng==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOVQyMTo0MjoyMFrOGS-Yng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjU0OTY2Mg==", "bodyText": "little description of what he's doing here would be nice", "url": "https://github.com/ldtteam/minecolonies/pull/4950#discussion_r422549662", "createdAt": "2020-05-09T21:42:20Z", "author": {"login": "someaddons"}, "path": "src/main/java/com/minecolonies/coremod/colony/buildings/workerbuildings/BuildingPlantation.java", "diffHunk": "@@ -0,0 +1,336 @@\n+package com.minecolonies.coremod.colony.buildings.workerbuildings;\n+\n+import com.ldtteam.blockout.views.Window;\n+import com.minecolonies.api.colony.ICitizenData;\n+import com.minecolonies.api.colony.IColony;\n+import com.minecolonies.api.colony.IColonyManager;\n+import com.minecolonies.api.colony.IColonyView;\n+import com.minecolonies.api.colony.buildings.ModBuildings;\n+import com.minecolonies.api.colony.buildings.registry.BuildingEntry;\n+import com.minecolonies.api.colony.jobs.IJob;\n+import com.minecolonies.api.colony.requestsystem.token.IToken;\n+import com.minecolonies.api.crafting.IRecipeStorage;\n+import com.minecolonies.api.entity.citizen.Skill;\n+import com.minecolonies.api.util.ItemStackUtils;\n+import com.minecolonies.api.util.constant.ToolType;\n+import com.minecolonies.coremod.Network;\n+import com.minecolonies.coremod.client.gui.WindowHutPlantation;\n+import com.minecolonies.coremod.colony.buildings.AbstractBuildingCrafter;\n+import com.minecolonies.coremod.colony.jobs.JobPlanter;\n+import com.minecolonies.coremod.network.messages.server.colony.building.plantation.PlantationSetPhaseMessage;\n+import com.minecolonies.coremod.research.UnlockBuildingResearchEffect;\n+import net.minecraft.block.Block;\n+import net.minecraft.block.Blocks;\n+import net.minecraft.entity.player.PlayerEntity;\n+import net.minecraft.item.Item;\n+import net.minecraft.item.ItemStack;\n+import net.minecraft.item.Items;\n+import net.minecraft.nbt.CompoundNBT;\n+import net.minecraft.nbt.ListNBT;\n+import net.minecraft.nbt.NBTUtil;\n+import net.minecraft.network.PacketBuffer;\n+import net.minecraft.util.Tuple;\n+import net.minecraft.util.math.BlockPos;\n+import net.minecraft.util.text.TranslationTextComponent;\n+import net.minecraft.world.World;\n+import net.minecraftforge.common.util.Constants;\n+import org.jetbrains.annotations.NotNull;\n+\n+import java.util.ArrayList;\n+import java.util.List;\n+\n+import static com.minecolonies.api.util.constant.BuildingConstants.CONST_DEFAULT_MAX_BUILDING_LEVEL;\n+import static com.minecolonies.api.util.constant.NbtTagConstants.*;\n+import static com.minecolonies.api.util.constant.ToolLevelConstants.TOOL_LEVEL_WOOD_OR_GOLD;\n+\n+/**\n+ * Class of the plantation building.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fa6f8f1ad2ffbac7d924a124794972cc5561400d"}, "originalPosition": 47}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3057, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}