{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDgyOTY4OTI5", "number": 5751, "title": "Add colony event log to Town Hall", "bodyText": "Changes proposed in this pull request:\n\nA colony event log that can be shown in the town hall instead of the permission event log.\nReplace all tabs in java files with spaces.\nGroup a few more of the Town Hall lang keys together in the lang file.\n\nHere a screenshot of the colony event log:\n\nReview please", "createdAt": "2020-09-09T16:31:24Z", "url": "https://github.com/ldtteam/minecolonies/pull/5751", "merged": true, "mergeCommit": {"oid": "78674a7121024d76622cad0dbeb7ef8a3c6fbbfd"}, "closed": true, "closedAt": "2020-09-14T16:36:07Z", "author": {"login": "ToMe25"}, "timelineItems": {"totalCount": 32, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdGew0DgH2gAyNDgyOTY4OTI5OmE2NGE5MTBjMTFjODI1OTk0MDUzNTFjMmEzZDFhOTFkN2Q1MTFmZWQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdI1uW7AFqTQ4Nzk0MjcwOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "a64a910c11c82599405351c2a3d1a91d7d511fed", "author": {"user": {"login": "ToMe25", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/a64a910c11c82599405351c2a3d1a91d7d511fed", "committedDate": "2020-09-07T08:31:15Z", "message": "Initial Partial implementation\n\n * Add citizen spawn IColonyEvents\n * Add IColonyEvent handling to Town Hall Gui"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bbbce56bb7ad50900425c173ff9baa0d74d00cb5", "author": {"user": {"login": "ToMe25", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/bbbce56bb7ad50900425c173ff9baa0d74d00cb5", "committedDate": "2020-09-07T18:35:16Z", "message": "Change colony log to new IColonyEventDescription instead of IColonyEvent\n\n * Add citizen death event\n * Fix some issues\n * undo like half the changes of the last commit\n * The base systems should work now"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ccae376b6be03ae901d704645a472207096a185d", "author": {"user": {"login": "ToMe25", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/ccae376b6be03ae901d704645a472207096a185d", "committedDate": "2020-09-09T11:21:34Z", "message": "Add building events(not fully implemented)\n\n * replace all tabs with spaces everywhere in the source code.\n * fix death message formatting"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8ea6fe115e972af42271c32124b5cf807d61cb46", "author": {"user": {"login": "ToMe25", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/8ea6fe115e972af42271c32124b5cf807d61cb46", "committedDate": "2020-09-09T11:31:02Z", "message": "Merge remote-tracking branch 'origin/version/1.15' into\nfeature/colony_event_log"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "07abfe01e1cde2f67d60e4689a7a38bb867b8322", "author": {"user": {"login": "ToMe25", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/07abfe01e1cde2f67d60e4689a7a38bb867b8322", "committedDate": "2020-09-09T11:43:38Z", "message": "Seems like this class got merged in some strange way\n\nThis should fix it."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d790aa4ed47826df7e07ae78d99ddfa60f03d413", "author": {"user": {"login": "ToMe25", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/d790aa4ed47826df7e07ae78d99ddfa60f03d413", "committedDate": "2020-09-09T16:22:00Z", "message": "Add CitizenGrownUpEvent\n\nalso make CitizenDiedEvent a subclass of AbstractCitizenEvent(formerly\nAbstractCitizenSpawnEvent)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7303c7ce043e2d0b835c44a77f276db41be59ea3", "author": {"user": {"login": "ToMe25", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/7303c7ce043e2d0b835c44a77f276db41be59ea3", "committedDate": "2020-09-09T16:25:20Z", "message": "formatting"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4e176e8bc3615ea3128070db1bd2455707b9203f", "author": {"user": {"login": "ToMe25", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/4e176e8bc3615ea3128070db1bd2455707b9203f", "committedDate": "2020-09-09T16:37:24Z", "message": "formatting"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3b5cdbb2cebad24ea49e657d3c649912ffb908f9", "author": {"user": {"login": "ToMe25", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/3b5cdbb2cebad24ea49e657d3c649912ffb908f9", "committedDate": "2020-09-09T16:39:01Z", "message": "Merge branch 'version/1.15' into feature/colony_event_log"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "71a13ce391fbfd950bdb1aa60b7c30b5e74acfe4", "author": {"user": {"login": "ToMe25", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/71a13ce391fbfd950bdb1aa60b7c30b5e74acfe4", "committedDate": "2020-09-09T19:33:19Z", "message": "Add a button switching between colony and permission events\n\nAlso group some more of the town hall lang entries together, but its\nstill not nearly all of them."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "24789c8397da55187e3c65338286f6e03633f7ea", "author": {"user": {"login": "ToMe25", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/24789c8397da55187e3c65338286f6e03633f7ea", "committedDate": "2020-09-10T10:03:13Z", "message": "Improve building name shown in colony event log\n\nalso undo a formatting change in TranslationConstants"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2163b0f521282d0e54ee1e9007014b11e7b00416", "author": {"user": {"login": "ToMe25", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/2163b0f521282d0e54ee1e9007014b11e7b00416", "committedDate": "2020-09-10T10:17:50Z", "message": "improve translation constants\n\n * Move the townhall gui translation keys from WindowTownHall to\nTranslationConstants\n * add NonNls annotation to raid name TranslationConstants\n * make some formatting more consistent"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3ee91299ba565258250ae78d2e893e362d15e050", "author": {"user": {"login": "ToMe25", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/3ee91299ba565258250ae78d2e893e362d15e050", "committedDate": "2020-09-10T16:15:43Z", "message": "remove todo for a better way to detect upgrading\n\ncast work order to WorkOrderBuild instead of WorkOrderBuildBuilding"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2MTA5OTg0", "url": "https://github.com/ldtteam/minecolonies/pull/5751#pullrequestreview-486109984", "createdAt": "2020-09-10T16:27:09Z", "commit": {"oid": "3ee91299ba565258250ae78d2e893e362d15e050"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxNjoyNzowOVrOHP8KJw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxNjoyNzowOVrOHP8KJw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjQ3NjMyNw==", "bodyText": "Something here seems off", "url": "https://github.com/ldtteam/minecolonies/pull/5751#discussion_r486476327", "createdAt": "2020-09-10T16:27:09Z", "author": {"login": "Raycoms"}, "path": "src/main/java/com/minecolonies/coremod/colony/colonyEvents/citizenEvents/CitizenBornEvent.java", "diffHunk": "@@ -0,0 +1,59 @@\n+package com.minecolonies.coremod.colony.colonyEvents.citizenEvents;\n+\n+import org.jetbrains.annotations.NotNull;\n+\n+import com.minecolonies.api.util.constant.Constants;\n+\n+import net.minecraft.nbt.CompoundNBT;\n+import net.minecraft.network.PacketBuffer;\n+import net.minecraft.util.ResourceLocation;\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3ee91299ba565258250ae78d2e893e362d15e050"}, "originalPosition": 10}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2MTEwMTIx", "url": "https://github.com/ldtteam/minecolonies/pull/5751#pullrequestreview-486110121", "createdAt": "2020-09-10T16:27:19Z", "commit": {"oid": "3ee91299ba565258250ae78d2e893e362d15e050"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxNjoyNzoxOVrOHP8KlQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxNjoyNzoxOVrOHP8KlQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjQ3NjQzNw==", "bodyText": "also here", "url": "https://github.com/ldtteam/minecolonies/pull/5751#discussion_r486476437", "createdAt": "2020-09-10T16:27:19Z", "author": {"login": "Raycoms"}, "path": "src/main/java/com/minecolonies/coremod/colony/colonyEvents/citizenEvents/CitizenGrownUpEvent.java", "diffHunk": "@@ -0,0 +1,59 @@\n+package com.minecolonies.coremod.colony.colonyEvents.citizenEvents;\n+\n+import org.jetbrains.annotations.NotNull;\n+\n+import com.minecolonies.api.util.constant.Constants;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3ee91299ba565258250ae78d2e893e362d15e050"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2MTEwODY2", "url": "https://github.com/ldtteam/minecolonies/pull/5751#pullrequestreview-486110866", "createdAt": "2020-09-10T16:28:16Z", "commit": {"oid": "3ee91299ba565258250ae78d2e893e362d15e050"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxNjoyODoxNlrOHP8M3g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxNjoyODoxNlrOHP8M3g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjQ3NzAyMg==", "bodyText": "I feel like those things would fit better into the constructor of the event instead of manually setting pos and name.", "url": "https://github.com/ldtteam/minecolonies/pull/5751#discussion_r486477022", "createdAt": "2020-09-10T16:28:16Z", "author": {"login": "Raycoms"}, "path": "src/main/java/com/minecolonies/coremod/colony/managers/CitizenManager.java", "diffHunk": "@@ -295,6 +297,11 @@ private ICitizenData spawnCitizenOnPosition(\n         entity.setPosition(spawnPoint.getX() + HALF_BLOCK, spawnPoint.getY() + SLIGHTLY_UP, spawnPoint.getZ() + HALF_BLOCK);\n         world.addEntity(entity);\n \n+        AbstractCitizenEvent spawnEvent = citizenData.isChild() ? new CitizenBornEvent() : new CitizenSpawnedEvent();\n+        spawnEvent.setEventPos(spawnPoint);\n+        spawnEvent.setCitizenName(citizenData.getName());\n+        colony.getEventManager().addEventDescription(spawnEvent);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3ee91299ba565258250ae78d2e893e362d15e050"}, "originalPosition": 18}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2MTIyMTE1", "url": "https://github.com/ldtteam/minecolonies/pull/5751#pullrequestreview-486122115", "createdAt": "2020-09-10T16:42:46Z", "commit": {"oid": "3ee91299ba565258250ae78d2e893e362d15e050"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxNjo0Mjo0NlrOHP8wXw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxNjo0Mjo0NlrOHP8wXw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjQ4NjExMQ==", "bodyText": "formatting here is off", "url": "https://github.com/ldtteam/minecolonies/pull/5751#discussion_r486486111", "createdAt": "2020-09-10T16:42:46Z", "author": {"login": "Raycoms"}, "path": "src/main/java/com/minecolonies/coremod/colony/managers/EventManager.java", "diffHunk": "@@ -81,6 +87,16 @@ public void addEvent(final IColonyEvent colonyEvent)\n         colony.markDirty();\n     }\n \n+    @Override\n+    public void addEventDescription(IColonyEventDescription colonyEventDescription) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3ee91299ba565258250ae78d2e893e362d15e050"}, "originalPosition": 65}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "396304fca94b8c27e191a270a92c6a4d32544e55", "author": {"user": {"login": "ToMe25", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/396304fca94b8c27e191a270a92c6a4d32544e55", "committedDate": "2020-09-10T17:21:25Z", "message": "Some fixes\n\n * fix event log overlapping with gui border\n * move some value initialization to constructors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0a7dfe510e53dfa423ec1a9e2aac4bc4079ec7ba", "author": {"user": {"login": "Raycoms", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/0a7dfe510e53dfa423ec1a9e2aac4bc4079ec7ba", "committedDate": "2020-09-11T09:37:43Z", "message": "Merge branch 'version/1.15' into feature/colony_event_log"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2NjU4NzQ5", "url": "https://github.com/ldtteam/minecolonies/pull/5751#pullrequestreview-486658749", "createdAt": "2020-09-11T09:39:45Z", "commit": {"oid": "396304fca94b8c27e191a270a92c6a4d32544e55"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQwOTo0MDozMVrOHQXMCg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQwOTo0MjoyM1rOHQXS_g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjkxOTE3OA==", "bodyText": "this is also used for entity respawning, which would trigger the event again", "url": "https://github.com/ldtteam/minecolonies/pull/5751#discussion_r486919178", "createdAt": "2020-09-11T09:40:31Z", "author": {"login": "someaddons"}, "path": "src/main/java/com/minecolonies/coremod/colony/managers/CitizenManager.java", "diffHunk": "@@ -295,6 +297,9 @@ private ICitizenData spawnCitizenOnPosition(\n         entity.setPosition(spawnPoint.getX() + HALF_BLOCK, spawnPoint.getY() + SLIGHTLY_UP, spawnPoint.getZ() + HALF_BLOCK);\n         world.addEntity(entity);\n \n+        colony.getEventManager().addEventDescription(citizenData.isChild() ? new CitizenBornEvent(spawnPoint, citizenData.getName()) :\n+              new CitizenSpawnedEvent(spawnPoint, citizenData.getName()));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0a7dfe510e53dfa423ec1a9e2aac4bc4079ec7ba"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjkyMDk1OA==", "bodyText": "ColonyEvents are quite different from event descriptions, those are ongoing timed events for a colony like a pirate raid. I don't think that the event descriptions belong into here at all, better move them to their own file.", "url": "https://github.com/ldtteam/minecolonies/pull/5751#discussion_r486920958", "createdAt": "2020-09-11T09:42:23Z", "author": {"login": "someaddons"}, "path": "src/main/java/com/minecolonies/coremod/colony/managers/EventManager.java", "diffHunk": "@@ -53,6 +59,11 @@\n      */\n     private final Map<Integer, IColonyEvent> events = new HashMap<>();\n \n+    /**\n+     * The event descriptions of this colony.\n+     */\n+    private final LinkedList<IColonyEventDescription> eventDescs = new LinkedList<>();\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0a7dfe510e53dfa423ec1a9e2aac4bc4079ec7ba"}, "originalPosition": 44}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a1ba5698bb7f24bbca803711ef54361bfebb5e8b", "author": {"user": {"login": "ToMe25", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/a1ba5698bb7f24bbca803711ef54361bfebb5e8b", "committedDate": "2020-09-11T17:47:17Z", "message": "Merge branch 'version/1.15' into feature/colony_event_log"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "80fa887c08d2ad99f449b07cf09db12da8fde6aa", "author": {"user": {"login": "ToMe25", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/80fa887c08d2ad99f449b07cf09db12da8fde6aa", "committedDate": "2020-09-11T17:57:18Z", "message": "Move event description handling to its own class"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg3NTcyMDY5", "url": "https://github.com/ldtteam/minecolonies/pull/5751#pullrequestreview-487572069", "createdAt": "2020-09-14T09:22:11Z", "commit": {"oid": "80fa887c08d2ad99f449b07cf09db12da8fde6aa"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQwOToyMjoxMVrOHRLNuw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQwOTozMToyMFrOHRLixw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Nzc3MTU3OQ==", "bodyText": "Please rename the methods in this interface to be more accurate.\nAka getBuildingName instead of getBuilding", "url": "https://github.com/ldtteam/minecolonies/pull/5751#discussion_r487771579", "createdAt": "2020-09-14T09:22:11Z", "author": {"login": "OrionDevelopment"}, "path": "src/api/java/com/minecolonies/api/colony/colonyEvents/descriptions/IBuildingEventDescription.java", "diffHunk": "@@ -0,0 +1,41 @@\n+package com.minecolonies.api.colony.colonyEvents.descriptions;\n+\n+/**\n+ * Event description for building events.\n+ */\n+public interface IBuildingEventDescription extends IColonyEventDescription", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "80fa887c08d2ad99f449b07cf09db12da8fde6aa"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Nzc3MTk4OQ==", "bodyText": "extends INBTSerializable<CompoundNBT> should be used here instead of the custom methods.", "url": "https://github.com/ldtteam/minecolonies/pull/5751#discussion_r487771989", "createdAt": "2020-09-14T09:22:54Z", "author": {"login": "OrionDevelopment"}, "path": "src/api/java/com/minecolonies/api/colony/colonyEvents/descriptions/IColonyEventDescription.java", "diffHunk": "@@ -0,0 +1,79 @@\n+package com.minecolonies.api.colony.colonyEvents.descriptions;\n+\n+import net.minecraft.nbt.CompoundNBT;\n+import net.minecraft.network.PacketBuffer;\n+import net.minecraft.util.ResourceLocation;\n+import net.minecraft.util.math.BlockPos;\n+\n+/**\n+ * Description for an event that happened in the colony.\n+ */\n+public interface IColonyEventDescription", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "80fa887c08d2ad99f449b07cf09db12da8fde6aa"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Nzc3MjE0Mg==", "bodyText": "Use the NBTTagConstantsClass", "url": "https://github.com/ldtteam/minecolonies/pull/5751#discussion_r487772142", "createdAt": "2020-09-14T09:23:12Z", "author": {"login": "OrionDevelopment"}, "path": "src/api/java/com/minecolonies/api/colony/colonyEvents/descriptions/NBTTags.java", "diffHunk": "@@ -0,0 +1,13 @@\n+package com.minecolonies.api.colony.colonyEvents.descriptions;\n+\n+/**\n+ * NBT tags used in colony events.\n+ */\n+public abstract class NBTTags", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "80fa887c08d2ad99f449b07cf09db12da8fde6aa"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Nzc3MjYxNQ==", "bodyText": "Rework this class so that it does not expose the inner function callbacks.", "url": "https://github.com/ldtteam/minecolonies/pull/5751#discussion_r487772615", "createdAt": "2020-09-14T09:24:00Z", "author": {"login": "OrionDevelopment"}, "path": "src/api/java/com/minecolonies/api/colony/colonyEvents/registry/ColonyEventDescriptionTypeRegistryEntry.java", "diffHunk": "@@ -0,0 +1,65 @@\n+package com.minecolonies.api.colony.colonyEvents.registry;\n+\n+import com.minecolonies.api.colony.colonyEvents.descriptions.IColonyEventDescription;\n+import com.minecolonies.api.util.Log;\n+import net.minecraft.nbt.CompoundNBT;\n+import net.minecraft.network.PacketBuffer;\n+import net.minecraft.util.ResourceLocation;\n+import net.minecraftforge.registries.ForgeRegistryEntry;\n+import org.jetbrains.annotations.NotNull;\n+\n+import java.util.function.Function;\n+\n+/**\n+ * This is the colonies event registry entry class, used for registering any colony related events. Takes a function of colony, nbt to create the right event object.\n+ */\n+public class ColonyEventDescriptionTypeRegistryEntry extends ForgeRegistryEntry<ColonyEventDescriptionTypeRegistryEntry>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "80fa887c08d2ad99f449b07cf09db12da8fde6aa"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Nzc3MzAyNg==", "bodyText": "Again missing the INBTSerializable<CompoundNBT> instead of using the custom methods.", "url": "https://github.com/ldtteam/minecolonies/pull/5751#discussion_r487773026", "createdAt": "2020-09-14T09:24:41Z", "author": {"login": "OrionDevelopment"}, "path": "src/api/java/com/minecolonies/api/colony/managers/interfaces/IEventDescriptionManager.java", "diffHunk": "@@ -0,0 +1,42 @@\n+package com.minecolonies.api.colony.managers.interfaces;\n+\n+import com.minecolonies.api.colony.colonyEvents.descriptions.IColonyEventDescription;\n+\n+import net.minecraft.nbt.CompoundNBT;\n+import org.jetbrains.annotations.NotNull;\n+\n+import java.util.List;\n+\n+/**\n+ * Interface for the event description manager, the event description manager deals the colony event log events.\n+ */\n+public interface IEventDescriptionManager", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "80fa887c08d2ad99f449b07cf09db12da8fde6aa"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Nzc3MzU3MA==", "bodyText": "What happened here?", "url": "https://github.com/ldtteam/minecolonies/pull/5751#discussion_r487773570", "createdAt": "2020-09-14T09:25:28Z", "author": {"login": "OrionDevelopment"}, "path": "src/main/java/com/minecolonies/apiimp/CommonMinecoloniesAPIImpl.java", "diffHunk": "@@ -38,20 +39,21 @@\n \n public class CommonMinecoloniesAPIImpl implements IMinecoloniesAPI\n {\n-    private final  IColonyManager                                  colonyManager          = new ColonyManager();\n-    private final  ICitizenDataManager                             citizenDataManager     = new CitizenDataManager();\n-    private final  IMobAIRegistry                                  mobAIRegistry          = new MobAIRegistry();\n-    private final  IPathNavigateRegistry                           pathNavigateRegistry   = new PathNavigateRegistry();\n-    private        IForgeRegistry<BuildingEntry>                   buildingRegistry;\n-    private final  IBuildingDataManager                            buildingDataManager    = new BuildingDataManager();\n-    private final  IJobDataManager                                 jobDataManager         = new JobDataManager();\n-    private final  IGuardTypeDataManager                           guardTypeDataManager   = new com.minecolonies.coremod.colony.buildings.registry.GuardTypeDataManager();\n-    private        IForgeRegistry<JobEntry>                        jobRegistry;\n-    private        IForgeRegistry<GuardType>                       guardTypeRegistry;\n-    private        IForgeRegistry<InteractionResponseHandlerEntry> interactionHandlerRegistry;\n-    private final  IInteractionResponseHandlerDataManager          interactionDataManager = new InteractionResponseHandlerManager();\n-    private        IForgeRegistry<ColonyEventTypeRegistryEntry>    colonyEventRegistry;\n-    private static IGlobalResearchTree                             globalResearchTree     = new GlobalResearchTree();\n+    private final  IColonyManager                                          colonyManager          = new ColonyManager();\n+    private final  ICitizenDataManager                                     citizenDataManager     = new CitizenDataManager();\n+    private final  IMobAIRegistry                                          mobAIRegistry          = new MobAIRegistry();\n+    private final  IPathNavigateRegistry                                   pathNavigateRegistry   = new PathNavigateRegistry();\n+    private        IForgeRegistry<BuildingEntry>                           buildingRegistry;\n+    private final  IBuildingDataManager                                    buildingDataManager    = new BuildingDataManager();\n+    private final  IJobDataManager                                         jobDataManager         = new JobDataManager();\n+    private final  IGuardTypeDataManager                                   guardTypeDataManager   = new com.minecolonies.coremod.colony.buildings.registry.GuardTypeDataManager();\n+    private        IForgeRegistry<JobEntry>                                jobRegistry;\n+    private        IForgeRegistry<GuardType>                               guardTypeRegistry;\n+    private        IForgeRegistry<InteractionResponseHandlerEntry>         interactionHandlerRegistry;\n+    private final  IInteractionResponseHandlerDataManager                  interactionDataManager = new InteractionResponseHandlerManager();\n+    private        IForgeRegistry<ColonyEventTypeRegistryEntry>            colonyEventRegistry;\n+    private        IForgeRegistry<ColonyEventDescriptionTypeRegistryEntry> colonyEventDescriptionRegistry;\n+    private static IGlobalResearchTree                                     globalResearchTree     = new GlobalResearchTree();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "80fa887c08d2ad99f449b07cf09db12da8fde6aa"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Nzc3Njk2Nw==", "bodyText": "Yeah you will need to modify this.\nThis call location is less then appropriate.\nFind the code that actually triggers the birth and fire it from there.", "url": "https://github.com/ldtteam/minecolonies/pull/5751#discussion_r487776967", "createdAt": "2020-09-14T09:31:20Z", "author": {"login": "OrionDevelopment"}, "path": "src/main/java/com/minecolonies/coremod/colony/managers/CitizenManager.java", "diffHunk": "@@ -282,6 +284,9 @@ private ICitizenData spawnCitizenOnPosition(\n         entity.setPosition(spawnPoint.getX() + HALF_BLOCK, spawnPoint.getY() + SLIGHTLY_UP, spawnPoint.getZ() + HALF_BLOCK);\n         world.addEntity(entity);\n \n+        colony.getEventDescriptionManager().addEventDescription(citizenData.isChild() ? new CitizenBornEvent(spawnPoint, citizenData.getName()) :", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "80fa887c08d2ad99f449b07cf09db12da8fde6aa"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e42192e2f869547c7d9bedd8ac1a3e7d0c2b9979", "author": {"user": {"login": "ToMe25", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/e42192e2f869547c7d9bedd8ac1a3e7d0c2b9979", "committedDate": "2020-09-14T09:57:00Z", "message": "Merge branch 'version/1.15' into feature/colony_event_log"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6cc6ddb3c12228e9243062211bbb867050d7277d", "author": {"user": {"login": "ToMe25", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/6cc6ddb3c12228e9243062211bbb867050d7277d", "committedDate": "2020-09-14T10:03:58Z", "message": "add a missing param annotation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "09147a80c0bc6fbc555738f11db572fc248b4e80", "author": {"user": {"login": "ToMe25", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/09147a80c0bc6fbc555738f11db572fc248b4e80", "committedDate": "2020-09-14T12:46:06Z", "message": "Fix citizen event descriptions getting created on world loading\n\n * Also merege NBTTags class into NbtTagConstants\n * make visitor spawns cause new VisitorSpawnedEvents instead of\nCitizenSpawnedEvents\n * make IColonyEventDescription and IEventDescriptionManager extend\nINBTSerializable\n * don't expose deserialization function in ColonyEventTypeRegistryEntry\nand ColonyEventDescriptionTypeRegistryEntry"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d1f0593afb20359513ac38bbc53552ef6b824224", "author": {"user": {"login": "ToMe25", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/d1f0593afb20359513ac38bbc53552ef6b824224", "committedDate": "2020-09-14T12:46:25Z", "message": "Merge branch 'version/1.15' into feature/colony_event_log"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "45eb5e4899210513889769666f23205d0c342339", "author": {"user": {"login": "ToMe25", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/45eb5e4899210513889769666f23205d0c342339", "committedDate": "2020-09-14T13:11:10Z", "message": "Fix EventDescriptionManager serialization\n\n * Also fix a comment in VisitorSpawnedEvent\n * also make IColonyEvent implement INBTServializable"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dd7e3acb114aaadfb5f9825c711bed58480289cd", "author": {"user": {"login": "ToMe25", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/dd7e3acb114aaadfb5f9825c711bed58480289cd", "committedDate": "2020-09-14T16:10:48Z", "message": "Fix some formatting"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "63627c97ab4ae9988a8ea1bd9c602b54c76a8ca2", "author": {"user": {"login": "ToMe25", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/63627c97ab4ae9988a8ea1bd9c602b54c76a8ca2", "committedDate": "2020-09-14T16:12:30Z", "message": "Merge branch 'version/1.15' into feature/colony_event_log"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg3OTM3NDc1", "url": "https://github.com/ldtteam/minecolonies/pull/5751#pullrequestreview-487937475", "createdAt": "2020-09-14T16:17:46Z", "commit": {"oid": "63627c97ab4ae9988a8ea1bd9c602b54c76a8ca2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg3OTQyNzA4", "url": "https://github.com/ldtteam/minecolonies/pull/5751#pullrequestreview-487942708", "createdAt": "2020-09-14T16:24:15Z", "commit": {"oid": "63627c97ab4ae9988a8ea1bd9c602b54c76a8ca2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1926, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}