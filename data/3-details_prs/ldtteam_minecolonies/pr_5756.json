{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDgzNTU4MDEz", "number": 5756, "title": "Raid biome chance and some fixes", "bodyText": "Changes proposed in this pull request:\nAdd chance to spawn raiders in any biome\nFix possible crash on world load\nAdjust EntityLocation to saving the obj ref instead of multiple get\nReview please", "createdAt": "2020-09-10T08:55:10Z", "url": "https://github.com/ldtteam/minecolonies/pull/5756", "merged": true, "mergeCommit": {"oid": "635faeecb6f94267907223bc7422545e0feea02e"}, "closed": true, "closedAt": "2020-09-10T20:08:24Z", "author": {"login": "someaddons"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdHc431AH2gAyNDgzNTU4MDEzOmM2MDQ3M2Q2YmU2OTQxNDgzNzI0MzgxOGI0ZjNjNGFiMTI2ZjRmODI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdHmh4HAFqTQ4NjI2ODM0OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c60473d6be69414837243818b4f3c4ab126f4f82", "author": {"user": {"login": "someaddons", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/c60473d6be69414837243818b4f3c4ab126f4f82", "committedDate": "2020-09-10T08:54:10Z", "message": "Add chance to spawn raiders in any biome\nFix possible crash on world load\nAdjust EntityLocation to saving the obj ref instead of multiple get"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg1NzI0NDc1", "url": "https://github.com/ldtteam/minecolonies/pull/5756#pullrequestreview-485724475", "createdAt": "2020-09-10T08:56:37Z", "commit": {"oid": "c60473d6be69414837243818b4f3c4ab126f4f82"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQwODo1NjozN1rOHPp5gA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQwODo1NjozN1rOHPp5gA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjE3NzE1Mg==", "bodyText": "what, a public static constant without javadoc?", "url": "https://github.com/ldtteam/minecolonies/pull/5756#discussion_r486177152", "createdAt": "2020-09-10T08:56:37Z", "author": {"login": "Raycoms"}, "path": "src/main/java/com/minecolonies/coremod/colony/colonyEvents/raidEvents/norsemenevent/NorsemenShipRaidEvent.java", "diffHunk": "@@ -25,6 +25,8 @@\n      */\n     public static final ResourceLocation NORSEMEN_RAID_EVENT_TYPE_ID = new ResourceLocation(Constants.MOD_ID, \"norsemen_ship_raid\");\n \n+    public static final String SHIP_NAME = \"norsemen_ship\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c60473d6be69414837243818b4f3c4ab126f4f82"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg1NzI0OTE3", "url": "https://github.com/ldtteam/minecolonies/pull/5756#pullrequestreview-485724917", "createdAt": "2020-09-10T08:57:14Z", "commit": {"oid": "c60473d6be69414837243818b4f3c4ab126f4f82"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQwODo1NzoxNFrOHPp64w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQwODo1NzoxNFrOHPp64w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjE3NzUwNw==", "bodyText": "Old I think?", "url": "https://github.com/ldtteam/minecolonies/pull/5756#discussion_r486177507", "createdAt": "2020-09-10T08:57:14Z", "author": {"login": "Raycoms"}, "path": "src/main/java/com/minecolonies/coremod/colony/managers/RaidManager.java", "diffHunk": "@@ -145,6 +152,8 @@\n      */\n     private int lostCitizens = 0;\n \n+    private static final HashMap<BiomeDictionary.Type, List<Consumer<IColony>>> raidBiomeMap = new HashMap<>();\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c60473d6be69414837243818b4f3c4ab126f4f82"}, "originalPosition": 29}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg1NzI1OTAz", "url": "https://github.com/ldtteam/minecolonies/pull/5756#pullrequestreview-485725903", "createdAt": "2020-09-10T08:58:26Z", "commit": {"oid": "c60473d6be69414837243818b4f3c4ab126f4f82"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQwODo1ODoyNlrOHPp9ww==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQwODo1ODoyNlrOHPp9ww==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjE3ODI0Mw==", "bodyText": "but this way the egyptian raid is slighly more likely than the other ones. Can't we do a rand.nextInt(100) and then if numb == 1, egyptian, if numb == 2 then amazon, (or even a small range)", "url": "https://github.com/ldtteam/minecolonies/pull/5756#discussion_r486178243", "createdAt": "2020-09-10T08:58:26Z", "author": {"login": "Raycoms"}, "path": "src/main/java/com/minecolonies/coremod/colony/managers/RaidManager.java", "diffHunk": "@@ -284,15 +297,15 @@ else if (ShipBasedRaiderUtils.canSpawnShipAt(colony, targetSpawnPoint, amount, s\n             {\n                 final String biomePath = colony.getWorld().getBiome(targetSpawnPoint).getRegistryName().getPath();\n                 final HordeRaidEvent event;\n-                if (biomePath.contains(DESERT_BIOME_ID))\n+                if (biomePath.contains(DESERT_BIOME_ID) || rand.nextInt(100) < IGNORE_BIOME_CHANCE)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c60473d6be69414837243818b4f3c4ab126f4f82"}, "originalPosition": 62}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "05f835bab230c73345fe1e5247c40f205e4c6d78", "author": {"user": {"login": "someaddons", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/05f835bab230c73345fe1e5247c40f205e4c6d78", "committedDate": "2020-09-10T08:58:39Z", "message": "cleanup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cf6f88e90616c4b7782d514099db171a86cefce6", "author": {"user": {"login": "someaddons", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/cf6f88e90616c4b7782d514099db171a86cefce6", "committedDate": "2020-09-10T09:05:37Z", "message": "Merge remote-tracking branch 'remotes/origin/version/1.15' into nextchanges"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d47fea37b67141bb0dc72e9d8a4f8be46132775b", "author": {"user": {"login": "someaddons", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/d47fea37b67141bb0dc72e9d8a4f8be46132775b", "committedDate": "2020-09-10T09:05:58Z", "message": "one roll and ranges"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0cef278f26c97f8d364264abb043da4ed2782f9b", "author": {"user": {"login": "someaddons", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/0cef278f26c97f8d364264abb043da4ed2782f9b", "committedDate": "2020-09-10T09:18:53Z", "message": "fix typo"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "84024c69e16cca446b4482993b629bbb7c9191e4", "author": {"user": {"login": "someaddons", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/84024c69e16cca446b4482993b629bbb7c9191e4", "committedDate": "2020-09-10T09:21:15Z", "message": "fix typo"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c004b08be581c587c8c4b9878eab66d7d7ade9da", "author": {"user": {"login": "someaddons", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/c004b08be581c587c8c4b9878eab66d7d7ade9da", "committedDate": "2020-09-10T10:50:18Z", "message": "fix raidmanager not writing"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2MjY4MzQ4", "url": "https://github.com/ldtteam/minecolonies/pull/5756#pullrequestreview-486268348", "createdAt": "2020-09-10T20:01:41Z", "commit": {"oid": "c004b08be581c587c8c4b9878eab66d7d7ade9da"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQyMDowMTo0MVrOHQDwBw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQyMDowMzozN1rOHQDz2Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjYwMDcxMQ==", "bodyText": "Rename the field to be more accurate.", "url": "https://github.com/ldtteam/minecolonies/pull/5756#discussion_r486600711", "createdAt": "2020-09-10T20:01:41Z", "author": {"login": "OrionDevelopment"}, "path": "src/main/java/com/minecolonies/coremod/colony/colonyEvents/raidEvents/pirateEvent/ShipBasedRaiderUtils.java", "diffHunk": "@@ -128,15 +127,15 @@ public static void setupSpawner(final BlockPos location, final World world, fina\n      * @param rotation   the rotation.\n      * @return true if successful.\n      */\n-    public static boolean canSpawnShipAt(final IColony colony, final BlockPos spawnPoint, final int raidLevel, final int rotation, final IColonyStructureSpawnEvent event)\n+    public static boolean canSpawnShipAt(final IColony colony, final BlockPos spawnPoint, final int raidLevel, final int rotation, final String shipName)\n     {\n         if (spawnPoint.equals(colony.getCenter()) || spawnPoint.getY() > MineColonies.getConfig().getCommon().maxYForBarbarians.get())\n         {\n             return false;\n         }\n \n         final World world = colony.getWorld();\n-        final String shipSize = ShipSize.getShipForRaiderAmount(raidLevel).schematicPrefix + event.getShipDesc();\n+        final String shipSize = ShipSize.getShipForRaiderAmount(raidLevel).schematicPrefix + shipName;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c004b08be581c587c8c4b9878eab66d7d7ade9da"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjYwMTY4OQ==", "bodyText": "This really does not matter at all..........\nNo change needed, just wanted to inform you that the HotSpot VM does this automatically, and as such these optimisations are not needed.\nNext time PRs with arbitrary changes like this will get rejected.", "url": "https://github.com/ldtteam/minecolonies/pull/5756#discussion_r486601689", "createdAt": "2020-09-10T20:03:37Z", "author": {"login": "OrionDevelopment"}, "path": "src/main/java/com/minecolonies/coremod/colony/requestsystem/locations/EntityLocation.java", "diffHunk": "@@ -70,13 +69,14 @@ private void checkEntity()\n     public BlockPos getInDimensionLocation()\n     {\n         checkEntity();\n-        if (entity == null || entity.get() == null)\n+        final Entity entityRef = entity.get();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c004b08be581c587c8c4b9878eab66d7d7ade9da"}, "originalPosition": 22}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1929, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}