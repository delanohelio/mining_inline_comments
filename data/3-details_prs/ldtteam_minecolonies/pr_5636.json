{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcyMDA3NDUw", "number": 5636, "title": "Feature/improvements", "bodyText": "Changes proposed in this pull request:\n\nAdds rack rendering\nAdds avoidance of unnecessary calls to setActive in dman\nAdd way to trace racks with item (Added a HighlightManager for this sake)\n\nReview please", "createdAt": "2020-08-22T16:26:19Z", "url": "https://github.com/ldtteam/minecolonies/pull/5636", "merged": true, "mergeCommit": {"oid": "a1227c332a88334f79ad249b6563e49caa54f0fb"}, "closed": true, "closedAt": "2020-08-22T19:14:48Z", "author": {"login": "Raycoms"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdBV1ZCgH2gAyNDcyMDA3NDUwOmNlNjQ2NDQ0MGIzOWI4NmFhYWZhYjQ5ZmIxMDdkMjdhYWIxYzExY2I=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdBdZXpgFqTQ3Mjk0MjI1MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "ce6464440b39b86aaafab49fb107d27aab1c11cb", "author": {"user": {"login": "Raycoms", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/ce6464440b39b86aaafab49fb107d27aab1c11cb", "committedDate": "2020-08-22T09:17:29Z", "message": "Some small fixes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2a252cd3275fa923d7ba44787c78c2e9a6866f6b", "author": {"user": {"login": "Raycoms", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/2a252cd3275fa923d7ba44787c78c2e9a6866f6b", "committedDate": "2020-08-22T16:24:37Z", "message": "Static super class building  + add rack tracer"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fbf4f8a6670e9ac069f398f142b61dce1e97f2de", "author": {"user": {"login": "Raycoms", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/fbf4f8a6670e9ac069f398f142b61dce1e97f2de", "committedDate": "2020-08-22T16:28:30Z", "message": "fixes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcyOTM2OTU5", "url": "https://github.com/ldtteam/minecolonies/pull/5636#pullrequestreview-472936959", "createdAt": "2020-08-22T16:32:05Z", "commit": {"oid": "fbf4f8a6670e9ac069f398f142b61dce1e97f2de"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcyOTM2OTkx", "url": "https://github.com/ldtteam/minecolonies/pull/5636#pullrequestreview-472936991", "createdAt": "2020-08-22T16:32:47Z", "commit": {"oid": "fbf4f8a6670e9ac069f398f142b61dce1e97f2de"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcyOTM3NTg0", "url": "https://github.com/ldtteam/minecolonies/pull/5636#pullrequestreview-472937584", "createdAt": "2020-08-22T16:43:49Z", "commit": {"oid": "fbf4f8a6670e9ac069f398f142b61dce1e97f2de"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMlQxNjo0Mzo0OVrOHFGStw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMlQxNjo0NDozMFrOHFGTAg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTEwODAyMw==", "bodyText": "Is this only highlighting a single rack, what about connected racks?", "url": "https://github.com/ldtteam/minecolonies/pull/5636#discussion_r475108023", "createdAt": "2020-08-22T16:43:49Z", "author": {"login": "Mekle001"}, "path": "src/main/java/com/minecolonies/coremod/event/HighlightManager.java", "diffHunk": "@@ -0,0 +1,64 @@\n+package com.minecolonies.coremod.event;\n+\n+import com.ldtteam.structurize.util.RenderUtils;\n+import com.minecolonies.api.util.Tuple;\n+import com.mojang.blaze3d.vertex.IVertexBuilder;\n+import net.minecraft.client.Minecraft;\n+import net.minecraft.client.renderer.IRenderTypeBuffer;\n+import net.minecraft.client.renderer.RenderTypeBuffers;\n+import net.minecraft.util.math.BlockPos;\n+import net.minecraftforge.api.distmarker.Dist;\n+import net.minecraftforge.api.distmarker.OnlyIn;\n+import net.minecraftforge.client.event.RenderWorldLastEvent;\n+import net.minecraftforge.eventbus.api.EventPriority;\n+import net.minecraftforge.eventbus.api.SubscribeEvent;\n+import org.jetbrains.annotations.NotNull;\n+import org.jetbrains.annotations.Nullable;\n+\n+import java.util.ArrayList;\n+import java.util.HashMap;\n+import java.util.Map;\n+import java.util.function.Supplier;\n+\n+@OnlyIn(Dist.CLIENT)\n+public class HighlightManager\n+{\n+    /**\n+     * A position to highlight with a unique id.\n+     */\n+    @Nullable\n+    public static final Map<String, Tuple<BlockPos, Long>> HIGHLIGHT_MAP = new HashMap<>();\n+\n+    /**\n+     * Render buffers.\n+     */\n+    public static final  RenderTypeBuffers        renderBuffers            = new RenderTypeBuffers();\n+    private static final IRenderTypeBuffer.Impl   renderBuffer             = renderBuffers.getBufferSource();\n+    private static final Supplier<IVertexBuilder> linesWithoutCullAndDepth = () -> renderBuffer.getBuffer(RenderUtils.LINES_GLINT);\n+\n+    /**\n+     * Used to catch the renderWorldLastEvent in order to draw the debug nodes for pathfinding.\n+     *\n+     * @param event the catched event.\n+     */\n+    @SubscribeEvent(priority = EventPriority.LOW)\n+    public static void renderWorldLastEvent(@NotNull final RenderWorldLastEvent event)\n+    {\n+        if (!HIGHLIGHT_MAP.isEmpty())\n+        {\n+            final long worldTime = Minecraft.getInstance().world.getGameTime();\n+            for (final Map.Entry<String, Tuple<BlockPos, Long>> entry : new ArrayList<>(HIGHLIGHT_MAP.entrySet()))\n+            {\n+                if (entry.getValue().getB() <= worldTime)\n+                {\n+                    HIGHLIGHT_MAP.remove(entry.getKey());\n+                }\n+                else\n+                {\n+                    RenderUtils.renderBox(entry.getValue().getA(), entry.getValue().getA(), 0, 1, 0, 1.0F, 0.002D, event.getMatrixStack(), linesWithoutCullAndDepth.get());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fbf4f8a6670e9ac069f398f142b61dce1e97f2de"}, "originalPosition": 58}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTEwODA5OA==", "bodyText": "I believe this is a significant increase in crafting speed, not just a visual change. Is that the intent?", "url": "https://github.com/ldtteam/minecolonies/pull/5636#discussion_r475108098", "createdAt": "2020-08-22T16:44:30Z", "author": {"login": "Mekle001"}, "path": "src/main/java/com/minecolonies/coremod/entity/ai/basic/AbstractEntityAICrafting.java", "diffHunk": "@@ -36,7 +35,7 @@\n     /**\n      * Time the worker delays until the next hit.\n      */\n-    protected static final int HIT_DELAY = 20;\n+    protected static final int HIT_DELAY = 10;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fbf4f8a6670e9ac069f398f142b61dce1e97f2de"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcyOTQyMjUx", "url": "https://github.com/ldtteam/minecolonies/pull/5636#pullrequestreview-472942251", "createdAt": "2020-08-22T18:06:06Z", "commit": {"oid": "fbf4f8a6670e9ac069f398f142b61dce1e97f2de"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMlQxODowNjowNlrOHFGwMg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMlQxODowNjowNlrOHFGwMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTExNTU3MA==", "bodyText": "use the one from render world last event, preferably also call the event from there", "url": "https://github.com/ldtteam/minecolonies/pull/5636#discussion_r475115570", "createdAt": "2020-08-22T18:06:06Z", "author": {"login": "Nightenom"}, "path": "src/main/java/com/minecolonies/coremod/event/HighlightManager.java", "diffHunk": "@@ -0,0 +1,64 @@\n+package com.minecolonies.coremod.event;\n+\n+import com.ldtteam.structurize.util.RenderUtils;\n+import com.minecolonies.api.util.Tuple;\n+import com.mojang.blaze3d.vertex.IVertexBuilder;\n+import net.minecraft.client.Minecraft;\n+import net.minecraft.client.renderer.IRenderTypeBuffer;\n+import net.minecraft.client.renderer.RenderTypeBuffers;\n+import net.minecraft.util.math.BlockPos;\n+import net.minecraftforge.api.distmarker.Dist;\n+import net.minecraftforge.api.distmarker.OnlyIn;\n+import net.minecraftforge.client.event.RenderWorldLastEvent;\n+import net.minecraftforge.eventbus.api.EventPriority;\n+import net.minecraftforge.eventbus.api.SubscribeEvent;\n+import org.jetbrains.annotations.NotNull;\n+import org.jetbrains.annotations.Nullable;\n+\n+import java.util.ArrayList;\n+import java.util.HashMap;\n+import java.util.Map;\n+import java.util.function.Supplier;\n+\n+@OnlyIn(Dist.CLIENT)\n+public class HighlightManager\n+{\n+    /**\n+     * A position to highlight with a unique id.\n+     */\n+    @Nullable\n+    public static final Map<String, Tuple<BlockPos, Long>> HIGHLIGHT_MAP = new HashMap<>();\n+\n+    /**\n+     * Render buffers.\n+     */\n+    public static final  RenderTypeBuffers        renderBuffers            = new RenderTypeBuffers();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fbf4f8a6670e9ac069f398f142b61dce1e97f2de"}, "originalPosition": 35}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1862, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}