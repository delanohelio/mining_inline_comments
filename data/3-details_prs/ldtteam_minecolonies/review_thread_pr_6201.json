{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMzMDQ3NDc2", "number": 6201, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNVQxNzowNToyNlrOFBRWuA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNVQxNzowNzoyN1rOFBRX_A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM2ODc3MjQwOnYy", "diffSide": "RIGHT", "path": "src/api/java/com/minecolonies/api/crafting/IRecipeStorageFactory.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNVQxNzowNToyNlrOH_9HrA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNVQxNzowNjo0OVrOH_9Ieg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjgyMzcyNA==", "bodyText": "either the message is off here, or sth else is wrong", "url": "https://github.com/ldtteam/minecolonies/pull/6201#discussion_r536823724", "createdAt": "2020-12-05T17:05:26Z", "author": {"login": "Raycoms"}, "path": "src/api/java/com/minecolonies/api/crafting/IRecipeStorageFactory.java", "diffHunk": "@@ -68,6 +68,11 @@ default RecipeStorage getNewInstance(@NotNull final IFactoryController factoryCo\n             throw new IllegalArgumentException(\"Eighth parameter is supposed to be a List<ItemStack> or Null!\");\n         }\n \n+        if (context.length > MIN_PARAMS_IRECIPESTORAGE + 5 && context[8] != null && !(context[8] instanceof ResourceLocation))\n+        {\n+            throw new IllegalArgumentException(\"Eighth parameter is supposed to be a List<ItemStack> or Null!\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b25ff18039fab516ebd1f7fe17c27e171e21ee8b"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjgyMzkzMA==", "bodyText": "Dangit. The message is off. Fixing.", "url": "https://github.com/ldtteam/minecolonies/pull/6201#discussion_r536823930", "createdAt": "2020-12-05T17:06:49Z", "author": {"login": "Mekle001"}, "path": "src/api/java/com/minecolonies/api/crafting/IRecipeStorageFactory.java", "diffHunk": "@@ -68,6 +68,11 @@ default RecipeStorage getNewInstance(@NotNull final IFactoryController factoryCo\n             throw new IllegalArgumentException(\"Eighth parameter is supposed to be a List<ItemStack> or Null!\");\n         }\n \n+        if (context.length > MIN_PARAMS_IRECIPESTORAGE + 5 && context[8] != null && !(context[8] instanceof ResourceLocation))\n+        {\n+            throw new IllegalArgumentException(\"Eighth parameter is supposed to be a List<ItemStack> or Null!\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjgyMzcyNA=="}, "originalCommit": {"oid": "b25ff18039fab516ebd1f7fe17c27e171e21ee8b"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM2ODc3NTY0OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/minecolonies/coremod/colony/crafting/RecipeStorageFactory.java", "isResolved": true, "comments": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNVQxNzowNzoyN1rOH_9JCw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNVQxNzoyMjowNVrOH_9R5A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjgyNDA3NQ==", "bodyText": "won't this crash if null?", "url": "https://github.com/ldtteam/minecolonies/pull/6201#discussion_r536824075", "createdAt": "2020-12-05T17:07:27Z", "author": {"login": "Raycoms"}, "path": "src/main/java/com/minecolonies/coremod/colony/crafting/RecipeStorageFactory.java", "diffHunk": "@@ -207,6 +219,8 @@ public void serialize(IFactoryController controller, RecipeStorage input, Packet\n         packetBuffer.writeInt(input.getSecondaryOutputs().size());\n         input.getSecondaryOutputs().forEach(stack -> packetBuffer.writeItemStack(stack));\n \n+        packetBuffer.writeResourceLocation(input.getLootTable());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b25ff18039fab516ebd1f7fe17c27e171e21ee8b"}, "originalPosition": 51}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjgyNDI0MA==", "bodyText": "No, I don't think so. If so, I wouldn't be able to view any lists of recipes, and that works fine.", "url": "https://github.com/ldtteam/minecolonies/pull/6201#discussion_r536824240", "createdAt": "2020-12-05T17:08:56Z", "author": {"login": "Mekle001"}, "path": "src/main/java/com/minecolonies/coremod/colony/crafting/RecipeStorageFactory.java", "diffHunk": "@@ -207,6 +219,8 @@ public void serialize(IFactoryController controller, RecipeStorage input, Packet\n         packetBuffer.writeInt(input.getSecondaryOutputs().size());\n         input.getSecondaryOutputs().forEach(stack -> packetBuffer.writeItemStack(stack));\n \n+        packetBuffer.writeResourceLocation(input.getLootTable());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjgyNDA3NQ=="}, "originalCommit": {"oid": "b25ff18039fab516ebd1f7fe17c27e171e21ee8b"}, "originalPosition": 51}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjgyNDQyMg==", "bodyText": "I think I still prefer a null check here", "url": "https://github.com/ldtteam/minecolonies/pull/6201#discussion_r536824422", "createdAt": "2020-12-05T17:09:47Z", "author": {"login": "Raycoms"}, "path": "src/main/java/com/minecolonies/coremod/colony/crafting/RecipeStorageFactory.java", "diffHunk": "@@ -207,6 +219,8 @@ public void serialize(IFactoryController controller, RecipeStorage input, Packet\n         packetBuffer.writeInt(input.getSecondaryOutputs().size());\n         input.getSecondaryOutputs().forEach(stack -> packetBuffer.writeItemStack(stack));\n \n+        packetBuffer.writeResourceLocation(input.getLootTable());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjgyNDA3NQ=="}, "originalCommit": {"oid": "b25ff18039fab516ebd1f7fe17c27e171e21ee8b"}, "originalPosition": 51}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjgyNDg2NA==", "bodyText": "But we can't on the read, since this is a stream. By writing the null, the headers get written for the read to properly handle the null.", "url": "https://github.com/ldtteam/minecolonies/pull/6201#discussion_r536824864", "createdAt": "2020-12-05T17:12:42Z", "author": {"login": "Mekle001"}, "path": "src/main/java/com/minecolonies/coremod/colony/crafting/RecipeStorageFactory.java", "diffHunk": "@@ -207,6 +219,8 @@ public void serialize(IFactoryController controller, RecipeStorage input, Packet\n         packetBuffer.writeInt(input.getSecondaryOutputs().size());\n         input.getSecondaryOutputs().forEach(stack -> packetBuffer.writeItemStack(stack));\n \n+        packetBuffer.writeResourceLocation(input.getLootTable());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjgyNDA3NQ=="}, "originalCommit": {"oid": "b25ff18039fab516ebd1f7fe17c27e171e21ee8b"}, "originalPosition": 51}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjgyNTAwOA==", "bodyText": "What I always do is, write a boolean of \"false\" if null and \"true\" if not, and if not, we read the resLoc", "url": "https://github.com/ldtteam/minecolonies/pull/6201#discussion_r536825008", "createdAt": "2020-12-05T17:13:53Z", "author": {"login": "Raycoms"}, "path": "src/main/java/com/minecolonies/coremod/colony/crafting/RecipeStorageFactory.java", "diffHunk": "@@ -207,6 +219,8 @@ public void serialize(IFactoryController controller, RecipeStorage input, Packet\n         packetBuffer.writeInt(input.getSecondaryOutputs().size());\n         input.getSecondaryOutputs().forEach(stack -> packetBuffer.writeItemStack(stack));\n \n+        packetBuffer.writeResourceLocation(input.getLootTable());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjgyNDA3NQ=="}, "originalCommit": {"oid": "b25ff18039fab516ebd1f7fe17c27e171e21ee8b"}, "originalPosition": 51}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjgyNTE4MA==", "bodyText": "I thought that was encapsulated in the writeResourceLocation already?", "url": "https://github.com/ldtteam/minecolonies/pull/6201#discussion_r536825180", "createdAt": "2020-12-05T17:14:52Z", "author": {"login": "Mekle001"}, "path": "src/main/java/com/minecolonies/coremod/colony/crafting/RecipeStorageFactory.java", "diffHunk": "@@ -207,6 +219,8 @@ public void serialize(IFactoryController controller, RecipeStorage input, Packet\n         packetBuffer.writeInt(input.getSecondaryOutputs().size());\n         input.getSecondaryOutputs().forEach(stack -> packetBuffer.writeItemStack(stack));\n \n+        packetBuffer.writeResourceLocation(input.getLootTable());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjgyNDA3NQ=="}, "originalCommit": {"oid": "b25ff18039fab516ebd1f7fe17c27e171e21ee8b"}, "originalPosition": 51}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjgyNTc1MA==", "bodyText": "Looking it up, its converts to string, and THAT is what could fail but a null string does get handled correctly since it starts with a length byte.", "url": "https://github.com/ldtteam/minecolonies/pull/6201#discussion_r536825750", "createdAt": "2020-12-05T17:18:24Z", "author": {"login": "Mekle001"}, "path": "src/main/java/com/minecolonies/coremod/colony/crafting/RecipeStorageFactory.java", "diffHunk": "@@ -207,6 +219,8 @@ public void serialize(IFactoryController controller, RecipeStorage input, Packet\n         packetBuffer.writeInt(input.getSecondaryOutputs().size());\n         input.getSecondaryOutputs().forEach(stack -> packetBuffer.writeItemStack(stack));\n \n+        packetBuffer.writeResourceLocation(input.getLootTable());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjgyNDA3NQ=="}, "originalCommit": {"oid": "b25ff18039fab516ebd1f7fe17c27e171e21ee8b"}, "originalPosition": 51}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjgyNjM0MA==", "bodyText": "Null check in place.", "url": "https://github.com/ldtteam/minecolonies/pull/6201#discussion_r536826340", "createdAt": "2020-12-05T17:22:05Z", "author": {"login": "Mekle001"}, "path": "src/main/java/com/minecolonies/coremod/colony/crafting/RecipeStorageFactory.java", "diffHunk": "@@ -207,6 +219,8 @@ public void serialize(IFactoryController controller, RecipeStorage input, Packet\n         packetBuffer.writeInt(input.getSecondaryOutputs().size());\n         input.getSecondaryOutputs().forEach(stack -> packetBuffer.writeItemStack(stack));\n \n+        packetBuffer.writeResourceLocation(input.getLootTable());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjgyNDA3NQ=="}, "originalCommit": {"oid": "b25ff18039fab516ebd1f7fe17c27e171e21ee8b"}, "originalPosition": 51}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3284, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}