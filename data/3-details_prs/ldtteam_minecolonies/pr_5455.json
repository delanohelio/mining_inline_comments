{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU2NjI4ODY4", "number": 5455, "title": "Smeltercrafter/reliability", "bodyText": "Closes #5447\nChanges proposed in this pull request:\n\nMake the smeltercrafters track what is in furnaces better, and what they pull out\nFix AI Error due to no defined fuels.\nTweak fuel handling behavior further to fall in line with upgraded tracking\n\nReview please", "createdAt": "2020-07-25T15:29:10Z", "url": "https://github.com/ldtteam/minecolonies/pull/5455", "merged": true, "mergeCommit": {"oid": "474502ee5165ecb053c1143bcbec68f4ea35b481"}, "closed": true, "closedAt": "2020-07-27T20:49:50Z", "author": {"login": "Mekle001"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc4Z4EzgH2gAyNDU2NjI4ODY4OjViNTZmNmIyMGQxYTcyOWY5NWNlMjQ5ZTc2NGFhNmRlY2E3YTM2M2U=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc5GefbAFqTQ1NjA0ODAyOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "5b56f6b20d1a729f95ce249e764aa6deca7a363e", "author": {"user": {"login": "Mekle001", "name": "Mike Garlick"}}, "url": "https://github.com/ldtteam/minecolonies/commit/5b56f6b20d1a729f95ce249e764aa6deca7a363e", "committedDate": "2020-07-25T14:54:43Z", "message": "Track smelting much better and improve reliabiltiy"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d817b596141203d482993367abf3d07ac52dc181", "author": {"user": {"login": "Mekle001", "name": "Mike Garlick"}}, "url": "https://github.com/ldtteam/minecolonies/commit/d817b596141203d482993367abf3d07ac52dc181", "committedDate": "2020-07-25T15:26:30Z", "message": "Set up for skill based behavior"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1MjkxOTY5", "url": "https://github.com/ldtteam/minecolonies/pull/5455#pullrequestreview-455291969", "createdAt": "2020-07-25T15:32:29Z", "commit": {"oid": "d817b596141203d482993367abf3d07ac52dc181"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNVQxNTozMjoyOVrOG3FjJA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNVQxNTozMjoyOVrOG3FjJA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDQxNTc4MA==", "bodyText": "Why would we store all allowed fuel as already kept?", "url": "https://github.com/ldtteam/minecolonies/pull/5455#discussion_r460415780", "createdAt": "2020-07-25T15:32:29Z", "author": {"login": "Raycoms"}, "path": "src/main/java/com/minecolonies/coremod/colony/buildings/AbstractBuildingSmelterCrafter.java", "diffHunk": "@@ -106,6 +106,13 @@ public int getMaxBuildingLevel()\n         return builder.build();\n     }\n \n+    @Override\n+    public int buildingRequiresCertainAmountOfItem(final ItemStack stack, final List<ItemStorage> localAlreadyKept, final boolean inventory)\n+    {\n+        localAlreadyKept.addAll(getAllowedFuel().stream().map(is -> new ItemStorage(is)).filter(i -> i.getItemStack().equals(stack)).collect(Collectors.toCollection(ArrayList::new)));\n+        return super.buildingRequiresCertainAmountOfItem(stack, localAlreadyKept, inventory);\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d817b596141203d482993367abf3d07ac52dc181"}, "originalPosition": 9}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1MjkxOTk3", "url": "https://github.com/ldtteam/minecolonies/pull/5455#pullrequestreview-455291997", "createdAt": "2020-07-25T15:33:03Z", "commit": {"oid": "d817b596141203d482993367abf3d07ac52dc181"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNVQxNTozMzowM1rOG3FjTQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNVQxNTozMzowM1rOG3FjTQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDQxNTgyMQ==", "bodyText": "@OverRide", "url": "https://github.com/ldtteam/minecolonies/pull/5455#discussion_r460415821", "createdAt": "2020-07-25T15:33:03Z", "author": {"login": "Raycoms"}, "path": "src/main/java/com/minecolonies/coremod/entity/ai/basic/AbstractEntityAIRequestSmelter.java", "diffHunk": "@@ -61,13 +63,28 @@ public AbstractEntityAIRequestSmelter(@NotNull final J smelteryJob)\n           new AITarget(RETRIEVING_END_PRODUCT_FROM_FURNACE, this::retrieveSmeltableFromFurnace, 1));\n     }\n \n+    @Override\n+    protected int getActionsDoneUntilDumping()\n+    {\n+        return 32;\n+    }\n+\n     @NotNull\n     @Override\n     protected List<ItemStack> itemsNiceToHave()\n     {\n         return getOwnBuilding().getAllowedFuel();\n     }\n \n+    protected int getExtendedOutputCount(final ItemStack primaryOutput)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d817b596141203d482993367abf3d07ac52dc181"}, "originalPosition": 33}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2e377fb537dd4d21cce5236b5355e5235d9d7ac4", "author": {"user": {"login": "Mekle001", "name": "Mike Garlick"}}, "url": "https://github.com/ldtteam/minecolonies/commit/2e377fb537dd4d21cce5236b5355e5235d9d7ac4", "committedDate": "2020-07-25T15:50:51Z", "message": "Incorrect keep-back of fuel"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3ecf40f1c5b8db7f35b8543e3d48bbdd0b6bacc2", "author": {"user": {"login": "Mekle001", "name": "Mike Garlick"}}, "url": "https://github.com/ldtteam/minecolonies/commit/3ecf40f1c5b8db7f35b8543e3d48bbdd0b6bacc2", "committedDate": "2020-07-25T22:18:20Z", "message": "Review Feedback"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bb1f1fa64c0a50aea2dcc659eaa4905362f00d94", "author": {"user": {"login": "Mekle001", "name": "Mike Garlick"}}, "url": "https://github.com/ldtteam/minecolonies/commit/bb1f1fa64c0a50aea2dcc659eaa4905362f00d94", "committedDate": "2020-07-26T01:54:01Z", "message": "A few more tweaks for job completion reliability"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1NTk0MjE0", "url": "https://github.com/ldtteam/minecolonies/pull/5455#pullrequestreview-455594214", "createdAt": "2020-07-27T08:52:19Z", "commit": {"oid": "bb1f1fa64c0a50aea2dcc659eaa4905362f00d94"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwODo1MjoxOVrOG3Zdqw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwODo1MjoxOVrOG3Zdqw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDc0MjA1OQ==", "bodyText": "for the scalable Delays you can either use setDelay(ticks) which pauses the AI for X ticks, or add some local counter var.", "url": "https://github.com/ldtteam/minecolonies/pull/5455#discussion_r460742059", "createdAt": "2020-07-27T08:52:19Z", "author": {"login": "someaddons"}, "path": "src/main/java/com/minecolonies/coremod/entity/ai/basic/AbstractEntityAIRequestSmelter.java", "diffHunk": "@@ -272,6 +302,10 @@ private IAIState checkIfAbleToSmelt(final int amountOfFuel, final boolean checkS\n             }\n         }\n \n+        if(furnaceBurning)\n+        {\n+            //Todo: Scalable Delay ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bb1f1fa64c0a50aea2dcc659eaa4905362f00d94"}, "originalPosition": 121}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU2MDQ4MDI4", "url": "https://github.com/ldtteam/minecolonies/pull/5455#pullrequestreview-456048028", "createdAt": "2020-07-27T18:52:30Z", "commit": {"oid": "bb1f1fa64c0a50aea2dcc659eaa4905362f00d94"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2021, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}