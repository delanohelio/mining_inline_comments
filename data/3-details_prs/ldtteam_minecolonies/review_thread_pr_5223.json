{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM0MDY5Nzgw", "number": 5223, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxMDoxMDoyMFrOEFeX2w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxMDoxMDoyMFrOEFeX2w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0MTc1OTYzOnYy", "diffSide": "RIGHT", "path": "src/main/java/com/minecolonies/coremod/colony/workorders/WorkOrderBuildDecoration.java", "isResolved": false, "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxMDoxMDoyMFrOGjry5A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQxNjo1NzoyOVrOGkkssQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDA3MDg4NA==", "bodyText": "why does this need a try and catch?", "url": "https://github.com/ldtteam/minecolonies/pull/5223#discussion_r440070884", "createdAt": "2020-06-15T10:10:20Z", "author": {"login": "Raycoms"}, "path": "src/main/java/com/minecolonies/coremod/colony/workorders/WorkOrderBuildDecoration.java", "diffHunk": "@@ -226,13 +227,38 @@ public void onCompleted(final IColony colony)\n         {\n             final int level = ((WorkOrderBuildBuilding) this).getUpgradeLevel();\n             AdvancementUtils.TriggerAdvancementPlayersForColony(colony, player ->\n-                    AdvancementTriggers.COMPLETE_BUILD_REQUEST.trigger(player, structureName, level));\n+                                                                          AdvancementTriggers.COMPLETE_BUILD_REQUEST.trigger(player, structureName, level));\n         }\n         else\n         {\n+\n+\n             AdvancementUtils.TriggerAdvancementPlayersForColony(colony, player ->\n-                    AdvancementTriggers.COMPLETE_BUILD_REQUEST.trigger(player, structureName, 0));\n-            LanguageHandler.sendPlayersMessage(colony.getMessagePlayerEntities(),COM_MINECOLONIES_COREMOD_ENTITY_BUILDER_BUILDCOMPLETE,getStructureName());\n+                                                                          AdvancementTriggers.COMPLETE_BUILD_REQUEST.trigger(player, structureName, 0));\n+\n+            String builder = \"\";\n+            for (ICitizenData citizen : colony.getCitizenManager().getCitizens())\n+            {\n+                try\n+                {\n+                    if (citizen.getWorkBuilding().getPosition().equals(this.getClaimedBy()))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f28dbcc10f6e55c349f301a52ff6f41a8d3a5556"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDA3MTUwMw==", "bodyText": "Better change the onCompleted method to receive the citizenData of the citizen that completed the job.", "url": "https://github.com/ldtteam/minecolonies/pull/5223#discussion_r440071503", "createdAt": "2020-06-15T10:11:25Z", "author": {"login": "Raycoms"}, "path": "src/main/java/com/minecolonies/coremod/colony/workorders/WorkOrderBuildDecoration.java", "diffHunk": "@@ -226,13 +227,38 @@ public void onCompleted(final IColony colony)\n         {\n             final int level = ((WorkOrderBuildBuilding) this).getUpgradeLevel();\n             AdvancementUtils.TriggerAdvancementPlayersForColony(colony, player ->\n-                    AdvancementTriggers.COMPLETE_BUILD_REQUEST.trigger(player, structureName, level));\n+                                                                          AdvancementTriggers.COMPLETE_BUILD_REQUEST.trigger(player, structureName, level));\n         }\n         else\n         {\n+\n+\n             AdvancementUtils.TriggerAdvancementPlayersForColony(colony, player ->\n-                    AdvancementTriggers.COMPLETE_BUILD_REQUEST.trigger(player, structureName, 0));\n-            LanguageHandler.sendPlayersMessage(colony.getMessagePlayerEntities(),COM_MINECOLONIES_COREMOD_ENTITY_BUILDER_BUILDCOMPLETE,getStructureName());\n+                                                                          AdvancementTriggers.COMPLETE_BUILD_REQUEST.trigger(player, structureName, 0));\n+\n+            String builder = \"\";\n+            for (ICitizenData citizen : colony.getCitizenManager().getCitizens())\n+            {\n+                try\n+                {\n+                    if (citizen.getWorkBuilding().getPosition().equals(this.getClaimedBy()))", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDA3MDg4NA=="}, "originalCommit": {"oid": "f28dbcc10f6e55c349f301a52ff6f41a8d3a5556"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDEzODkyMQ==", "bodyText": "why does this need a try and catch?\n\nFor some citizens it would cause a crash", "url": "https://github.com/ldtteam/minecolonies/pull/5223#discussion_r440138921", "createdAt": "2020-06-15T12:26:37Z", "author": {"login": "PowerSchill"}, "path": "src/main/java/com/minecolonies/coremod/colony/workorders/WorkOrderBuildDecoration.java", "diffHunk": "@@ -226,13 +227,38 @@ public void onCompleted(final IColony colony)\n         {\n             final int level = ((WorkOrderBuildBuilding) this).getUpgradeLevel();\n             AdvancementUtils.TriggerAdvancementPlayersForColony(colony, player ->\n-                    AdvancementTriggers.COMPLETE_BUILD_REQUEST.trigger(player, structureName, level));\n+                                                                          AdvancementTriggers.COMPLETE_BUILD_REQUEST.trigger(player, structureName, level));\n         }\n         else\n         {\n+\n+\n             AdvancementUtils.TriggerAdvancementPlayersForColony(colony, player ->\n-                    AdvancementTriggers.COMPLETE_BUILD_REQUEST.trigger(player, structureName, 0));\n-            LanguageHandler.sendPlayersMessage(colony.getMessagePlayerEntities(),COM_MINECOLONIES_COREMOD_ENTITY_BUILDER_BUILDCOMPLETE,getStructureName());\n+                                                                          AdvancementTriggers.COMPLETE_BUILD_REQUEST.trigger(player, structureName, 0));\n+\n+            String builder = \"\";\n+            for (ICitizenData citizen : colony.getCitizenManager().getCitizens())\n+            {\n+                try\n+                {\n+                    if (citizen.getWorkBuilding().getPosition().equals(this.getClaimedBy()))", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDA3MDg4NA=="}, "originalCommit": {"oid": "f28dbcc10f6e55c349f301a52ff6f41a8d3a5556"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDI0MjI5NQ==", "bodyText": "except a try & catch you could add a null check before like getWorkBuilding() != null &&", "url": "https://github.com/ldtteam/minecolonies/pull/5223#discussion_r440242295", "createdAt": "2020-06-15T15:03:36Z", "author": {"login": "someaddons"}, "path": "src/main/java/com/minecolonies/coremod/colony/workorders/WorkOrderBuildDecoration.java", "diffHunk": "@@ -226,13 +227,38 @@ public void onCompleted(final IColony colony)\n         {\n             final int level = ((WorkOrderBuildBuilding) this).getUpgradeLevel();\n             AdvancementUtils.TriggerAdvancementPlayersForColony(colony, player ->\n-                    AdvancementTriggers.COMPLETE_BUILD_REQUEST.trigger(player, structureName, level));\n+                                                                          AdvancementTriggers.COMPLETE_BUILD_REQUEST.trigger(player, structureName, level));\n         }\n         else\n         {\n+\n+\n             AdvancementUtils.TriggerAdvancementPlayersForColony(colony, player ->\n-                    AdvancementTriggers.COMPLETE_BUILD_REQUEST.trigger(player, structureName, 0));\n-            LanguageHandler.sendPlayersMessage(colony.getMessagePlayerEntities(),COM_MINECOLONIES_COREMOD_ENTITY_BUILDER_BUILDCOMPLETE,getStructureName());\n+                                                                          AdvancementTriggers.COMPLETE_BUILD_REQUEST.trigger(player, structureName, 0));\n+\n+            String builder = \"\";\n+            for (ICitizenData citizen : colony.getCitizenManager().getCitizens())\n+            {\n+                try\n+                {\n+                    if (citizen.getWorkBuilding().getPosition().equals(this.getClaimedBy()))", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDA3MDg4NA=="}, "originalCommit": {"oid": "f28dbcc10f6e55c349f301a52ff6f41a8d3a5556"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDk1NTA1Nw==", "bodyText": "Still working for the adjustment", "url": "https://github.com/ldtteam/minecolonies/pull/5223#discussion_r440955057", "createdAt": "2020-06-16T15:45:37Z", "author": {"login": "Raycoms"}, "path": "src/main/java/com/minecolonies/coremod/colony/workorders/WorkOrderBuildDecoration.java", "diffHunk": "@@ -226,13 +227,38 @@ public void onCompleted(final IColony colony)\n         {\n             final int level = ((WorkOrderBuildBuilding) this).getUpgradeLevel();\n             AdvancementUtils.TriggerAdvancementPlayersForColony(colony, player ->\n-                    AdvancementTriggers.COMPLETE_BUILD_REQUEST.trigger(player, structureName, level));\n+                                                                          AdvancementTriggers.COMPLETE_BUILD_REQUEST.trigger(player, structureName, level));\n         }\n         else\n         {\n+\n+\n             AdvancementUtils.TriggerAdvancementPlayersForColony(colony, player ->\n-                    AdvancementTriggers.COMPLETE_BUILD_REQUEST.trigger(player, structureName, 0));\n-            LanguageHandler.sendPlayersMessage(colony.getMessagePlayerEntities(),COM_MINECOLONIES_COREMOD_ENTITY_BUILDER_BUILDCOMPLETE,getStructureName());\n+                                                                          AdvancementTriggers.COMPLETE_BUILD_REQUEST.trigger(player, structureName, 0));\n+\n+            String builder = \"\";\n+            for (ICitizenData citizen : colony.getCitizenManager().getCitizens())\n+            {\n+                try\n+                {\n+                    if (citizen.getWorkBuilding().getPosition().equals(this.getClaimedBy()))", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDA3MDg4NA=="}, "originalCommit": {"oid": "f28dbcc10f6e55c349f301a52ff6f41a8d3a5556"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTAwMzE4NQ==", "bodyText": "Testing to make sure I didn't break anything else.", "url": "https://github.com/ldtteam/minecolonies/pull/5223#discussion_r441003185", "createdAt": "2020-06-16T16:57:29Z", "author": {"login": "PowerSchill"}, "path": "src/main/java/com/minecolonies/coremod/colony/workorders/WorkOrderBuildDecoration.java", "diffHunk": "@@ -226,13 +227,38 @@ public void onCompleted(final IColony colony)\n         {\n             final int level = ((WorkOrderBuildBuilding) this).getUpgradeLevel();\n             AdvancementUtils.TriggerAdvancementPlayersForColony(colony, player ->\n-                    AdvancementTriggers.COMPLETE_BUILD_REQUEST.trigger(player, structureName, level));\n+                                                                          AdvancementTriggers.COMPLETE_BUILD_REQUEST.trigger(player, structureName, level));\n         }\n         else\n         {\n+\n+\n             AdvancementUtils.TriggerAdvancementPlayersForColony(colony, player ->\n-                    AdvancementTriggers.COMPLETE_BUILD_REQUEST.trigger(player, structureName, 0));\n-            LanguageHandler.sendPlayersMessage(colony.getMessagePlayerEntities(),COM_MINECOLONIES_COREMOD_ENTITY_BUILDER_BUILDCOMPLETE,getStructureName());\n+                                                                          AdvancementTriggers.COMPLETE_BUILD_REQUEST.trigger(player, structureName, 0));\n+\n+            String builder = \"\";\n+            for (ICitizenData citizen : colony.getCitizenManager().getCitizens())\n+            {\n+                try\n+                {\n+                    if (citizen.getWorkBuilding().getPosition().equals(this.getClaimedBy()))", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDA3MDg4NA=="}, "originalCommit": {"oid": "f28dbcc10f6e55c349f301a52ff6f41a8d3a5556"}, "originalPosition": 29}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3111, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}