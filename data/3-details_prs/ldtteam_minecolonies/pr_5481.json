{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU5OTczNjkz", "number": 5481, "title": "Guard improvements", "bodyText": "Changes proposed in this pull request:\nGuards received 3 new researchable abilities:\n\nArrow usage, consumes arrows and increases damage\nArrow piercing, arrows pierce two targets. This one should help with ranger's arrows beeing caught by knights on the frontline aswell.\nKnockback aoe, Knights get an aoe knockback dealing a little damage and knocking back surrounding enemies. Chance to use on hit and has a cooldown of 30 seconds. Should lead to more balanced fighting and less many vs one situations.\n\nKnights can use shields at any levels once researched.\nKnights have higher hp scaling aswell as the scaling based on the skill instead of arbitrary worker level.\nKnights no longer unintentionally scale in damage.\nRangers have higher base range.\nRangers distance now scales with Adaptability instead of job level.\nRangers no longer scale in health with their level, only with their buildings level.\nRangers now are able to shoot better when stationed ontop of buildings, gaining extra range, patrol to edges where they can see far and are chasing mobs into vision from above without using ladders.\nGuards now can give other patrolling guards a temporary consumed patrol position, when encountering raiders so they help each other out better.\nFleeing citizens now call the two closest guards instead of one.\nGuards now properly equip the armor from their inventory upon starting to fight. They also now dump their inventory occasionally when patrolling/guarding and upon dump they check their hut for armor/better armor and request any missing.\nGuards combat now is active in almost all worker AI states, so that they always can react when getting hit. They do not search for targets though when doing non guard task stuff.\nAdded a more dynamic version of isOkayToEat, called canBeInterrupted where the AI itself determines if its possible be to interrupted. Dumping/eating/sickness all respect that call and do not start executing if not allowed to.\nInteractions no longer constantly query the requests to show the interaction icon, instead they are created upon request creation.\nAdded new function for checking for open sync requests, which avoids having to map all tokens to requests and then checking for all if the citizen has the token as async, instead directly checks the tokens for async.\nRequest interactions now show the first item they need visually in the interaction, e.g. A ranger displaying the bow he needs.\nFix mercenaries using a nonexisting texture as head.\nTavern no longer instantly spawns a visitor after beeing built.\nReview please", "createdAt": "2020-07-31T09:42:25Z", "url": "https://github.com/ldtteam/minecolonies/pull/5481", "merged": true, "mergeCommit": {"oid": "c2c6e1ad682540b45a10b7787f3008fdfbd20b3e"}, "closed": true, "closedAt": "2020-08-01T21:37:13Z", "author": {"login": "someaddons"}, "timelineItems": {"totalCount": 32, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc25g-eAH2gAyNDU5OTczNjkzOjVjZDY1NjI2MDc1ZTZiY2FlYTA5MDBjYjM5YzAxNTNiYTMyMzU5ZWU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc6vz_egH2gAyNDU5OTczNjkzOjk5YmU0NWRmY2JkY2Q3OWMyZjE1ZDRjNjY0M2Q2MDM1MDc4OWU1ZGI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "5cd65626075e6bcaea0900cb39c0153ba32359ee", "author": {"user": {"login": "someaddons", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/5cd65626075e6bcaea0900cb39c0153ba32359ee", "committedDate": "2020-07-20T22:38:36Z", "message": "Hotfix recruitment failing for equal amounts of items"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8699cd4e98431f722a2f7d5b7c88e3d8acc2bf98", "author": {"user": {"login": "someaddons", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/8699cd4e98431f722a2f7d5b7c88e3d8acc2bf98", "committedDate": "2020-07-23T08:03:22Z", "message": "Merge remote-tracking branch 'remotes/origin/version/1.15' into betterGuards"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eee63871412e44dcc9e0a38e16390a2ae2eba2fc", "author": {"user": {"login": "someaddons", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/eee63871412e44dcc9e0a38e16390a2ae2eba2fc", "committedDate": "2020-07-29T16:49:26Z", "message": "Guard stuff"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f84fa59b8a2dc99580115f2da64e28c48ad9f7e5", "author": {"user": {"login": "someaddons", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/f84fa59b8a2dc99580115f2da64e28c48ad9f7e5", "committedDate": "2020-07-29T16:49:59Z", "message": "Merge remote-tracking branch 'remotes/origin/version/1.15' into betterGuards"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1d298f24284c5ed9e8bcc11057889c58d1ebf7bc", "author": {"user": {"login": "someaddons", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/1d298f24284c5ed9e8bcc11057889c58d1ebf7bc", "committedDate": "2020-07-31T09:39:43Z", "message": "Fix guard armor handling"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fa7781ef509ec10e1a3d90e3e355759e51fbc401", "author": {"user": {"login": "someaddons", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/fa7781ef509ec10e1a3d90e3e355759e51fbc401", "committedDate": "2020-07-31T09:40:18Z", "message": "Merge remote-tracking branch 'remotes/origin/version/1.15' into betterGuards"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7bc203cfee8c36578849dca48535faf2f03c5425", "author": {"user": {"login": "someaddons", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/7bc203cfee8c36578849dca48535faf2f03c5425", "committedDate": "2020-07-31T10:20:52Z", "message": "some fixes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU5MDc4OTY0", "url": "https://github.com/ldtteam/minecolonies/pull/5481#pullrequestreview-459078964", "createdAt": "2020-07-31T10:36:48Z", "commit": {"oid": "7bc203cfee8c36578849dca48535faf2f03c5425"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMVQxMDozNjo0OVrOG6ECPg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMVQxMDozNjo0OVrOG6ECPg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzUzNjcwMg==", "bodyText": "why not call the function hasWorkerOpenRequests for this part?", "url": "https://github.com/ldtteam/minecolonies/pull/5481#discussion_r463536702", "createdAt": "2020-07-31T10:36:49Z", "author": {"login": "Raycoms"}, "path": "src/main/java/com/minecolonies/coremod/colony/buildings/AbstractBuilding.java", "diffHunk": "@@ -1148,6 +1162,26 @@ public boolean hasWorkerOpenRequestsFiltered(@NotNull final ICitizenData citizen\n         return getOpenRequests(citizen).stream().anyMatch(selectionPredicate);\n     }\n \n+    @Override\n+    public boolean hasOpenSyncRequest(@NotNull final ICitizenData citizen)\n+    {\n+        final Map<Integer, Collection<IToken<?>>> requestIds = getOpenRequestsByCitizen();\n+        if (!requestIds.containsKey(citizen.getId()))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7bc203cfee8c36578849dca48535faf2f03c5425"}, "originalPosition": 63}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU5MDgwMDg1", "url": "https://github.com/ldtteam/minecolonies/pull/5481#pullrequestreview-459080085", "createdAt": "2020-07-31T10:38:56Z", "commit": {"oid": "7bc203cfee8c36578849dca48535faf2f03c5425"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMVQxMDozODo1NlrOG6EFcQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMVQxMDozODo1NlrOG6EFcQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzUzNzUyMQ==", "bodyText": "This here is important, we should re-request if the pickup failed.", "url": "https://github.com/ldtteam/minecolonies/pull/5481#discussion_r463537521", "createdAt": "2020-07-31T10:38:56Z", "author": {"login": "Raycoms"}, "path": "src/main/java/com/minecolonies/coremod/entity/ai/basic/AbstractEntityAIBasic.java", "diffHunk": "@@ -577,25 +548,32 @@ private IAIState lookForRequests()\n                     );\n                     return NEEDS_ITEM;\n                 }\n-                else", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7bc203cfee8c36578849dca48535faf2f03c5425"}, "originalPosition": 96}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU5MDgxMzQw", "url": "https://github.com/ldtteam/minecolonies/pull/5481#pullrequestreview-459081340", "createdAt": "2020-07-31T10:41:10Z", "commit": {"oid": "7bc203cfee8c36578849dca48535faf2f03c5425"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMVQxMDo0MToxMFrOG6EI8A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMVQxMDo0MToxMFrOG6EI8A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzUzODQxNg==", "bodyText": "Potentially this should be more generic. Make it a set or a list, etc. So that this can be extended if needed.", "url": "https://github.com/ldtteam/minecolonies/pull/5481#discussion_r463538416", "createdAt": "2020-07-31T10:41:10Z", "author": {"login": "Raycoms"}, "path": "src/main/java/com/minecolonies/coremod/entity/citizen/EntityCitizen.java", "diffHunk": "@@ -1436,6 +1435,7 @@ public void callForHelp(final Entity attacker, final int guardHelpRange)\n \n         long guardDistance = guardHelpRange;\n         AbstractEntityCitizen guard = null;\n+        AbstractEntityCitizen secondGuard = null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7bc203cfee8c36578849dca48535faf2f03c5425"}, "originalPosition": 108}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU5MDgxNjc1", "url": "https://github.com/ldtteam/minecolonies/pull/5481#pullrequestreview-459081675", "createdAt": "2020-07-31T10:41:46Z", "commit": {"oid": "7bc203cfee8c36578849dca48535faf2f03c5425"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMVQxMDo0MTo0NlrOG6EJ-A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMVQxMDo0MTo0NlrOG6EJ-A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzUzODY4MA==", "bodyText": "This means they can go stairs up and down though, right?", "url": "https://github.com/ldtteam/minecolonies/pull/5481#discussion_r463538680", "createdAt": "2020-07-31T10:41:46Z", "author": {"login": "Raycoms"}, "path": "src/main/java/com/minecolonies/coremod/entity/pathfinding/PathJobCanSee.java", "diffHunk": "@@ -0,0 +1,82 @@\n+package com.minecolonies.coremod.entity.pathfinding;\n+\n+import net.minecraft.block.BlockState;\n+import net.minecraft.block.Blocks;\n+import net.minecraft.entity.LivingEntity;\n+import net.minecraft.util.math.BlockPos;\n+import net.minecraft.util.math.RayTraceContext;\n+import net.minecraft.util.math.RayTraceResult;\n+import net.minecraft.util.math.Vec3d;\n+import net.minecraft.world.World;\n+import org.jetbrains.annotations.NotNull;\n+\n+/**\n+ * Pathing job for moving into vision of the given entity\n+ */\n+public class PathJobCanSee extends AbstractPathJob\n+{\n+    /**\n+     * The entity to see\n+     */\n+    private final LivingEntity lookTarget;\n+\n+    /**\n+     * The entity to move\n+     */\n+    private final LivingEntity searchingEntity;\n+\n+    public PathJobCanSee(\n+      final LivingEntity searchingEntity,\n+      final LivingEntity lookTarget,\n+      final World world,\n+      @NotNull final BlockPos start, final int range)\n+    {\n+        super(world, start, start, range, searchingEntity);\n+\n+        this.searchingEntity = searchingEntity;\n+        this.lookTarget = lookTarget;\n+    }\n+\n+    @Override\n+    protected double computeHeuristic(final BlockPos pos)\n+    {\n+        return searchingEntity.getPosition().manhattanDistance(pos);\n+    }\n+\n+    @Override\n+    protected boolean isAtDestination(final Node n)\n+    {\n+        return canSeeTargetFromPos(n.pos);\n+    }\n+\n+    /**\n+     * Calculate the distance to the target.\n+     *\n+     * @param n Node to test.\n+     * @return double of the distance.\n+     */\n+    @Override\n+    protected double getNodeResultScore(@NotNull final Node n)\n+    {\n+        //  For Result Score lower is better\n+        return lookTarget.getPosition().manhattanDistance(n.pos);\n+    }\n+\n+    private boolean canSeeTargetFromPos(final BlockPos pos)\n+    {\n+        Vec3d vec3d = new Vec3d(pos.getX(), pos.getZ() + searchingEntity.getEyeHeight(), pos.getZ());\n+        Vec3d vec3d1 = new Vec3d(lookTarget.getPosX(), lookTarget.getPosYEye(), lookTarget.getPosZ());\n+        return this.world.rayTraceBlocks(new RayTraceContext(vec3d, vec3d1, RayTraceContext.BlockMode.COLLIDER, RayTraceContext.FluidMode.NONE, searchingEntity)).getType()\n+                 == RayTraceResult.Type.MISS;\n+    }\n+\n+    @Override\n+    protected boolean isPassable(@NotNull final BlockState block)\n+    {\n+        if (block.getBlock() == Blocks.LADDER)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7bc203cfee8c36578849dca48535faf2f03c5425"}, "originalPosition": 76}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU5MDgyMDAy", "url": "https://github.com/ldtteam/minecolonies/pull/5481#pullrequestreview-459082002", "createdAt": "2020-07-31T10:42:20Z", "commit": {"oid": "7bc203cfee8c36578849dca48535faf2f03c5425"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMVQxMDo0MjoyMFrOG6EK4A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMVQxMDo0MjoyMFrOG6EK4A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzUzODkxMg==", "bodyText": "There is already a horizontal directions array in vanilla you can query afaik", "url": "https://github.com/ldtteam/minecolonies/pull/5481#discussion_r463538912", "createdAt": "2020-07-31T10:42:20Z", "author": {"login": "Raycoms"}, "path": "src/main/java/com/minecolonies/coremod/entity/pathfinding/PathJobWalkRandomEdge.java", "diffHunk": "@@ -0,0 +1,68 @@\n+package com.minecolonies.coremod.entity.pathfinding;\n+\n+import net.minecraft.block.BlockState;\n+import net.minecraft.block.Blocks;\n+import net.minecraft.entity.LivingEntity;\n+import net.minecraft.util.Direction;\n+import net.minecraft.util.math.BlockPos;\n+import net.minecraft.world.World;\n+import org.jetbrains.annotations.NotNull;\n+\n+/**\n+ * Walks to a random edge block nearby, a block next to air. Does not use ladders\n+ */\n+public class PathJobWalkRandomEdge extends AbstractPathJob\n+{\n+    private static final Direction[] directions = {Direction.NORTH, Direction.SOUTH, Direction.EAST, Direction.WEST};", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7bc203cfee8c36578849dca48535faf2f03c5425"}, "originalPosition": 16}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "704717205c800571903d032ae945039726e235da", "author": {"user": {"login": "someaddons", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/704717205c800571903d032ae945039726e235da", "committedDate": "2020-07-31T11:05:02Z", "message": "adjust to review"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU5MTA1MDU1", "url": "https://github.com/ldtteam/minecolonies/pull/5481#pullrequestreview-459105055", "createdAt": "2020-07-31T11:29:21Z", "commit": {"oid": "704717205c800571903d032ae945039726e235da"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMVQxMToyOToyMVrOG6FRWg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMVQxMToyOToyMVrOG6FRWg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzU1Njk1NA==", "bodyText": "I don't see a problem going up, I think the problem is only going down imo", "url": "https://github.com/ldtteam/minecolonies/pull/5481#discussion_r463556954", "createdAt": "2020-07-31T11:29:21Z", "author": {"login": "Raycoms"}, "path": "src/main/java/com/minecolonies/coremod/entity/pathfinding/PathJobCanSee.java", "diffHunk": "@@ -0,0 +1,87 @@\n+package com.minecolonies.coremod.entity.pathfinding;\n+\n+import net.minecraft.block.BlockState;\n+import net.minecraft.block.Blocks;\n+import net.minecraft.entity.LivingEntity;\n+import net.minecraft.util.math.BlockPos;\n+import net.minecraft.util.math.RayTraceContext;\n+import net.minecraft.util.math.RayTraceResult;\n+import net.minecraft.util.math.Vec3d;\n+import net.minecraft.world.World;\n+import org.jetbrains.annotations.NotNull;\n+\n+/**\n+ * Pathing job for moving into vision of the given entity\n+ */\n+public class PathJobCanSee extends AbstractPathJob\n+{\n+    /**\n+     * The entity to see\n+     */\n+    private final LivingEntity lookTarget;\n+\n+    /**\n+     * The entity to move\n+     */\n+    private final LivingEntity searchingEntity;\n+\n+    public PathJobCanSee(\n+      final LivingEntity searchingEntity,\n+      final LivingEntity lookTarget,\n+      final World world,\n+      @NotNull final BlockPos start, final int range)\n+    {\n+        super(world, start, start, range, searchingEntity);\n+\n+        this.searchingEntity = searchingEntity;\n+        this.lookTarget = lookTarget;\n+    }\n+\n+    @Override\n+    protected double computeHeuristic(final BlockPos pos)\n+    {\n+        return searchingEntity.getPosition().manhattanDistance(pos);\n+    }\n+\n+    @Override\n+    protected boolean isAtDestination(final Node n)\n+    {\n+        if (Math.abs(start.getY() - n.pos.getY()) > 6)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "704717205c800571903d032ae945039726e235da"}, "originalPosition": 49}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "388145cb744ec920b5d6d23122d9ca6639718263", "author": {"user": {"login": "someaddons", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/388145cb744ec920b5d6d23122d9ca6639718263", "committedDate": "2020-07-31T12:01:03Z", "message": "Fix ranger not pickup up arrows, fix walking to building after eating/sickness etc unless there is an important other task"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0dcb617bb7ce67b2e554ef6acf050520d1afbd64", "author": {"user": {"login": "someaddons", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/0dcb617bb7ce67b2e554ef6acf050520d1afbd64", "committedDate": "2020-07-31T12:12:20Z", "message": "fix typo"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c6702f029ed35f933a4e3f997d54612646a56049", "author": {"user": {"login": "someaddons", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/c6702f029ed35f933a4e3f997d54612646a56049", "committedDate": "2020-07-31T12:36:35Z", "message": "fix research config, fix 2. closest guard"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU5MTQyNjg3", "url": "https://github.com/ldtteam/minecolonies/pull/5481#pullrequestreview-459142687", "createdAt": "2020-07-31T12:42:00Z", "commit": {"oid": "c6702f029ed35f933a4e3f997d54612646a56049"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMVQxMjo0MjowMFrOG6HHpg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMVQxMjo0MjowMFrOG6HHpg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzU4NzIzOA==", "bodyText": "int i = 0; ;\nwhile (i < CALL_GUARDS_CONSTANT && i < possibleGuards.size)\ncallToHelpAti?", "url": "https://github.com/ldtteam/minecolonies/pull/5481#discussion_r463587238", "createdAt": "2020-07-31T12:42:00Z", "author": {"login": "Raycoms"}, "path": "src/main/java/com/minecolonies/coremod/entity/citizen/EntityCitizen.java", "diffHunk": "@@ -1447,15 +1447,21 @@ public void callForHelp(final Entity attacker, final int guardHelpRange)\n                 if (entry.getJob() instanceof AbstractJobGuard && entry.getId() != citizenData.getId() && tdist < guardDistance && entry.getJob().getWorkerAI() != null\n                       && ((AbstractEntityAIGuard<?, ?>) entry.getJob().getWorkerAI()).canHelp())\n                 {\n-                    guardDistance = tdist;\n-                    guard = entry.getEntity().get();\n+                    possibleGuards.add(entry.getEntity().get());\n                 }\n             }\n         }\n \n-        if (guard != null)\n+        Collections.sort(possibleGuards, Comparator.comparingInt(guard -> (int) getPosition().distanceSq(guard.getPosition())));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c6702f029ed35f933a4e3f997d54612646a56049"}, "originalPosition": 135}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0850a752bee0b0eb32b94c4b415d3cdddbc0c2e6", "author": {"user": {"login": "someaddons", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/0850a752bee0b0eb32b94c4b415d3cdddbc0c2e6", "committedDate": "2020-07-31T12:53:35Z", "message": "Fix chunk loaded check issue"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1863bf1799af9d649398adab8dc222dcbdb36960", "author": {"user": {"login": "someaddons", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/1863bf1799af9d649398adab8dc222dcbdb36960", "committedDate": "2020-07-31T13:15:14Z", "message": "Fix chunk loaded check issue"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f1647dc2ebcd44065827744bb8561aa6cda35609", "author": {"user": {"login": "someaddons", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/f1647dc2ebcd44065827744bb8561aa6cda35609", "committedDate": "2020-07-31T13:21:15Z", "message": "fix citizens ignoring collisions forever"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "41de047eb5ee6589a6174a42b02ebee6ded274c0", "author": {"user": {"login": "someaddons", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/41de047eb5ee6589a6174a42b02ebee6ded274c0", "committedDate": "2020-07-31T13:25:45Z", "message": "allow up"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e4e9dcd40c3fafe64837729654c075f6245f12b3", "author": {"user": {"login": "someaddons", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/e4e9dcd40c3fafe64837729654c075f6245f12b3", "committedDate": "2020-07-31T13:39:16Z", "message": "fix regen"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b411783c222dd29052a942304fd12adb8781165b", "author": {"user": {"login": "someaddons", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/b411783c222dd29052a942304fd12adb8781165b", "committedDate": "2020-07-31T13:41:11Z", "message": "allow ladders"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "609d4ec3afedad614addccf930513a8ff12d5782", "author": {"user": {"login": "someaddons", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/609d4ec3afedad614addccf930513a8ff12d5782", "committedDate": "2020-07-31T13:51:57Z", "message": "max 3"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8a9c693492a6d2ed7bf0410ea00da565b1c6e061", "author": {"user": {"login": "someaddons", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/8a9c693492a6d2ed7bf0410ea00da565b1c6e061", "committedDate": "2020-07-31T14:37:46Z", "message": "Fix knight skills"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4388fd4fe269469366d83893a62edbbacab3fad9", "author": {"user": {"login": "someaddons", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/4388fd4fe269469366d83893a62edbbacab3fad9", "committedDate": "2020-07-31T14:41:25Z", "message": "use target position"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e9603602615b312463d24701d707fdbce707b5fe", "author": {"user": {"login": "someaddons", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/e9603602615b312463d24701d707fdbce707b5fe", "committedDate": "2020-07-31T16:23:25Z", "message": "Fix teleporting into wall, fix teleporting when not needed"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU5NjAwNjEz", "url": "https://github.com/ldtteam/minecolonies/pull/5481#pullrequestreview-459600613", "createdAt": "2020-08-01T20:02:34Z", "commit": {"oid": "e9603602615b312463d24701d707fdbce707b5fe"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2629bee93fa42fdd94fd202efa2a99a7ea65e46c", "author": {"user": {"login": "someaddons", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/2629bee93fa42fdd94fd202efa2a99a7ea65e46c", "committedDate": "2020-08-01T21:28:03Z", "message": "save raid night counter, remove TH button"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f6a1e78187fef675cebd791503af911e3a83d112", "author": {"user": {"login": "someaddons", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/f6a1e78187fef675cebd791503af911e3a83d112", "committedDate": "2020-08-01T21:29:09Z", "message": "Merge remote-tracking branch 'remotes/origin/version/1.15' into betterGuards\n\n# Conflicts:\n#\tsrc/main/java/com/minecolonies/coremod/network/messages/client/UpdateChunkRangeCapabilityMessage.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "99be45dfcbdcd79c2f15d4c6643d60350789e5db", "author": {"user": {"login": "someaddons", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/99be45dfcbdcd79c2f15d4c6643d60350789e5db", "committedDate": "2020-08-01T21:36:01Z", "message": "fix button y"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2036, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}