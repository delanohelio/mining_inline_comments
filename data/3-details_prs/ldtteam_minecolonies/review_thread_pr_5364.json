{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ3NDc1OTMz", "number": 5364, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMFQxNDo0MDowMVrOENTR2Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMFQxNjo1Njo0MFrOENWJGw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgyMzgyODA5OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/minecolonies/coremod/colony/buildings/AbstractBuildingStructureBuilder.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMFQxNDo0MDowMVrOGv5-OQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMFQxNDo0MzoyM1rOGv6Gew==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mjg4NjA3Mw==", "bodyText": "That looks simpler than what I would've expected even.\nI would make the resourceBatchSize a getter which on default returns 1  (in the abstract building of the structure builders) and in the miner returns 10.\nSuch that here we request requestCount * getResourceBatchSize", "url": "https://github.com/ldtteam/minecolonies/pull/5364#discussion_r452886073", "createdAt": "2020-07-10T14:40:01Z", "author": {"login": "Raycoms"}, "path": "src/main/java/com/minecolonies/coremod/colony/buildings/AbstractBuildingStructureBuilder.java", "diffHunk": "@@ -669,7 +674,7 @@ public void checkOrRequestBucket(@Nullable final BuilderBucket requiredResources\n                         break;\n                     }\n \n-                    worker.createRequestAsync(new Stack(itemStack.getItemStack(), requestCount, requestCount));\n+                    worker.createRequestAsync(new Stack(itemStack.getItemStack(), Math.max(requestCount, resourceBatchSize), requestCount));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "536681e4b69740e3238de24ccb02acf03c8ed63c"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mjg4NzA2Ng==", "bodyText": "I like it.", "url": "https://github.com/ldtteam/minecolonies/pull/5364#discussion_r452887066", "createdAt": "2020-07-10T14:41:35Z", "author": {"login": "Mekle001"}, "path": "src/main/java/com/minecolonies/coremod/colony/buildings/AbstractBuildingStructureBuilder.java", "diffHunk": "@@ -669,7 +674,7 @@ public void checkOrRequestBucket(@Nullable final BuilderBucket requiredResources\n                         break;\n                     }\n \n-                    worker.createRequestAsync(new Stack(itemStack.getItemStack(), requestCount, requestCount));\n+                    worker.createRequestAsync(new Stack(itemStack.getItemStack(), Math.max(requestCount, resourceBatchSize), requestCount));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mjg4NjA3Mw=="}, "originalCommit": {"oid": "536681e4b69740e3238de24ccb02acf03c8ed63c"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mjg4ODE4Nw==", "bodyText": "This way instead of requesting 32 planks and 32 fences, we request 30/40 (which is a better ratio considering what we need too)", "url": "https://github.com/ldtteam/minecolonies/pull/5364#discussion_r452888187", "createdAt": "2020-07-10T14:43:23Z", "author": {"login": "Raycoms"}, "path": "src/main/java/com/minecolonies/coremod/colony/buildings/AbstractBuildingStructureBuilder.java", "diffHunk": "@@ -669,7 +674,7 @@ public void checkOrRequestBucket(@Nullable final BuilderBucket requiredResources\n                         break;\n                     }\n \n-                    worker.createRequestAsync(new Stack(itemStack.getItemStack(), requestCount, requestCount));\n+                    worker.createRequestAsync(new Stack(itemStack.getItemStack(), Math.max(requestCount, resourceBatchSize), requestCount));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mjg4NjA3Mw=="}, "originalCommit": {"oid": "536681e4b69740e3238de24ccb02acf03c8ed63c"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgyNDI5NzIzOnYy", "diffSide": "RIGHT", "path": "src/main/java/com/minecolonies/coremod/colony/buildings/workerbuildings/BuildingMiner.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMFQxNjo1Njo0MFrOGv-lrA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMFQxNjo1Njo0MFrOGv-lrA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mjk2MTcwOA==", "bodyText": "bracket should go down.", "url": "https://github.com/ldtteam/minecolonies/pull/5364#discussion_r452961708", "createdAt": "2020-07-10T16:56:40Z", "author": {"login": "Raycoms"}, "path": "src/main/java/com/minecolonies/coremod/colony/buildings/workerbuildings/BuildingMiner.java", "diffHunk": "@@ -168,6 +168,15 @@ public int getMaxBuildingLevel()\n         return MAX_BUILDING_LEVEL;\n     }\n \n+    /**\n+     * The Miner wants to get multiple nodes/levels worth of stuff when requesting.\n+     */\n+    @Override\n+    public int getResourceBatchMultiplier() {\n+        //Ask for 10x the resources if possible", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0706c9b1e680438a35e6a121b4c03a0150f71ca1"}, "originalPosition": 9}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3537, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}