{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEyNDg0NjQx", "number": 4850, "title": "Refactors all our network messages", "bodyText": "Changes proposed in this pull request:\n\nFinally organise all our damn network messages\nRemoved a bunch of boiler plate to reduce possible errors in the future\n\nReview please", "createdAt": "2020-05-02T17:44:56Z", "url": "https://github.com/ldtteam/minecolonies/pull/4850", "merged": true, "mergeCommit": {"oid": "634ca8ae189edc8e59bdbba7d0de4814d3bdcd08"}, "closed": true, "closedAt": "2020-05-03T07:21:02Z", "author": {"login": "Asherslab"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcdZ8lMgH2gAyNDEyNDg0NjQxOjczMGFiYmU1NzJjYjcxOTBlMjNkOWEwNGMyMTQyNjkyYjYwMzQ1MTU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcdlTjkAFqTQwNDU4NzcxOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "730abbe572cb7190e23d9a04c2142692b6034515", "author": {"user": {"login": "Asherslab", "name": "AshersLab"}}, "url": "https://github.com/ldtteam/minecolonies/commit/730abbe572cb7190e23d9a04c2142692b6034515", "committedDate": "2020-05-02T17:43:41Z", "message": "network messages refactor"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0NTQ3NDYw", "url": "https://github.com/ldtteam/minecolonies/pull/4850#pullrequestreview-404547460", "createdAt": "2020-05-02T17:51:09Z", "commit": {"oid": "730abbe572cb7190e23d9a04c2142692b6034515"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2c4d6efea64a52dcd02b9d09fee6d9e757a4c7ec", "author": {"user": {"login": "Asherslab", "name": "AshersLab"}}, "url": "https://github.com/ldtteam/minecolonies/commit/2c4d6efea64a52dcd02b9d09fee6d9e757a4c7ec", "committedDate": "2020-05-02T17:52:39Z", "message": "Merge branch 'version/1.15' into refactor/1.15/networking"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0NTQ3Nzgy", "url": "https://github.com/ldtteam/minecolonies/pull/4850#pullrequestreview-404547782", "createdAt": "2020-05-02T17:55:37Z", "commit": {"oid": "730abbe572cb7190e23d9a04c2142692b6034515"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMlQxNzo1NTozN1rOGPk_7w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMlQxNzo1NTozN1rOGPk_7w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODk4ODAxNQ==", "bodyText": "does this mean the permission doesn't get checked at all in this packet?", "url": "https://github.com/ldtteam/minecolonies/pull/4850#discussion_r418988015", "createdAt": "2020-05-02T17:55:37Z", "author": {"login": "ToMe25"}, "path": "src/main/java/com/minecolonies/coremod/network/messages/server/colony/OpenInventoryMessage.java", "diffHunk": "@@ -175,30 +146,17 @@ private void doCitizenInventory(final ServerPlayerEntity player)\n         }\n     }\n \n-    private void doHutInventory(final ServerPlayerEntity player)\n+    private void doHutInventory(final ServerPlayerEntity player, final IColony colony)\n     {\n-        if (checkPermissions(IColonyManager.getInstance().getClosestColony(player.getEntityWorld(), tePos), player))\n-        {\n-            @NotNull final TileEntityRack chest = (TileEntityRack) BlockPosUtil.getTileEntity(player.world, tePos);\n+        @NotNull final TileEntityRack chest = (TileEntityRack) BlockPosUtil.getTileEntity(player.world, tePos);\n \n-            NetworkHooks.openGui(player, chest, packetBuffer -> packetBuffer.writeVarInt(colonyId).writeBlockPos(chest.getPos()));\n-        }\n+        NetworkHooks.openGui(player, chest, packetBuffer -> packetBuffer.writeVarInt(colony.getID()).writeBlockPos(chest.getPos()));\n     }\n \n     private void doFieldInventory(final ServerPlayerEntity player)\n     {\n-        if (checkPermissions(IColonyManager.getInstance().getClosestColony(player.getEntityWorld(), tePos), player))\n-        {\n-            @NotNull final ScarecrowTileEntity scarecrowTileEntity = (ScarecrowTileEntity) BlockPosUtil.getTileEntity(CompatibilityUtils.getWorldFromEntity(player), tePos);\n-            NetworkHooks.openGui(player, scarecrowTileEntity);\n-\n-        }\n-    }\n-\n-    private static boolean checkPermissions(final IColony colony, final ServerPlayerEntity player)\n-    {\n-        //Verify player has permission to change this huts settings\n-        return colony.getPermissions().hasPermission(player, Action.MANAGE_HUTS);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "730abbe572cb7190e23d9a04c2142692b6034515"}, "originalPosition": 208}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c01658f6cc755c1c8fef48d47c857b7d0936b094", "author": {"user": {"login": "Asherslab", "name": "AshersLab"}}, "url": "https://github.com/ldtteam/minecolonies/commit/c01658f6cc755c1c8fef48d47c857b7d0936b094", "committedDate": "2020-05-02T18:02:36Z", "message": "fix compile error"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0NTQ4Njg1", "url": "https://github.com/ldtteam/minecolonies/pull/4850#pullrequestreview-404548685", "createdAt": "2020-05-02T18:07:57Z", "commit": {"oid": "c01658f6cc755c1c8fef48d47c857b7d0936b094"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "67a4b9b2d38ff22f83450f3dd29c99e7e9a62ff5", "author": {"user": {"login": "Asherslab", "name": "AshersLab"}}, "url": "https://github.com/ldtteam/minecolonies/commit/67a4b9b2d38ff22f83450f3dd29c99e7e9a62ff5", "committedDate": "2020-05-02T18:15:32Z", "message": "javadoc"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0NTQ5NTc1", "url": "https://github.com/ldtteam/minecolonies/pull/4850#pullrequestreview-404549575", "createdAt": "2020-05-02T18:20:04Z", "commit": {"oid": "67a4b9b2d38ff22f83450f3dd29c99e7e9a62ff5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0NTg3NzE5", "url": "https://github.com/ldtteam/minecolonies/pull/4850#pullrequestreview-404587719", "createdAt": "2020-05-03T06:57:44Z", "commit": {"oid": "67a4b9b2d38ff22f83450f3dd29c99e7e9a62ff5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2226, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}