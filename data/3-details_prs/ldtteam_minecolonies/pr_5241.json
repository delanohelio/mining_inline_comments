{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM1NjE0NTI0", "number": 5241, "title": "Improve scarecrow", "bodyText": "Implements #1855\nChanges proposed in this pull request:\n\nScarecrow (Field) now physically takes up two blocks\nScarecrow GUI is accessible from either half of scarecrow\nFixed a glitch where dragging a seed from the field slot would duplicate the seed\ndue to the wrong inventory handler\nModified the scarecrow held item to conform slightly closer to the art style of similar held items\n\nPlease review.", "createdAt": "2020-06-17T05:37:20Z", "url": "https://github.com/ldtteam/minecolonies/pull/5241", "merged": true, "mergeCommit": {"oid": "64783193b209953ad1fadf78ea1048ee3c07c3a3"}, "closed": true, "closedAt": "2020-06-22T13:19:50Z", "author": {"login": "ShadowProtocol"}, "timelineItems": {"totalCount": 17, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcsDlrOgBqjM0NTE5NzQ1ODQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABctwHhaAFqTQzNDg3OTc2Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4fcc05a4d14a6ef18cf167d5994d375b3941987a", "author": {"user": null}, "url": "https://github.com/ldtteam/minecolonies/commit/4fcc05a4d14a6ef18cf167d5994d375b3941987a", "committedDate": "2020-06-17T05:24:38Z", "message": "Fix scarecrow placement condition\n\nEnsure the upper block of the scarecrow has a clear space to be placed in"}, "afterCommit": {"oid": "c666cff8d0b84fa66c40f3c0663197cd6c81ef7f", "author": {"user": {"login": "ShadowProtocol", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/c666cff8d0b84fa66c40f3c0663197cd6c81ef7f", "committedDate": "2020-06-17T06:04:22Z", "message": "Fix scarecrow placement condition\n\nEnsure the upper block of the scarecrow has a clear space to be placed in"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d57a626bb38cfe6359af542eaff9161c855762df", "author": {"user": {"login": "ShadowProtocol", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/d57a626bb38cfe6359af542eaff9161c855762df", "committedDate": "2020-06-17T06:36:59Z", "message": "Add upper half of scarecrow\n\nAdd a double block blockstate to introduce a secondary UPPER scarecrow block\nUpdate place, destroy, and activate logic in scarecrow block to consider halves\nUpdate the tile entity placement and field container to only use the LOWER half"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0c4db1cda6b15b63cb364a15c53fe043296bdfc9", "author": {"user": {"login": "ShadowProtocol", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/0c4db1cda6b15b63cb364a15c53fe043296bdfc9", "committedDate": "2020-06-17T06:37:29Z", "message": "Fix scarecrow inventory\n\nReplace the IItemHandler with the less glitchy IInventory\nSimplify shift-click transfer function\nAdd Slot anonymous extension for validating seeds"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "85ffb559190c4b6356e1d89df403c25894ad4558", "author": {"user": {"login": "ShadowProtocol", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/85ffb559190c4b6356e1d89df403c25894ad4558", "committedDate": "2020-06-17T06:37:37Z", "message": "Adjust scarecrow hitbox and initial rotation\n\nModify placement rotation to face the player\nMake both halves of scarecrow block reflect the same hitbox"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e2213fe19736a93963b7419770c820940161c734", "author": {"user": {"login": "ShadowProtocol", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/e2213fe19736a93963b7419770c820940161c734", "committedDate": "2020-06-17T06:37:47Z", "message": "Change scarecrow held item model\n\nSet scarecrow held item to be generated as an item with rotation, not a built-in"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e4f9f2c19547d1183e68ee73d904be721bc16165", "author": {"user": {"login": "ShadowProtocol", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/e4f9f2c19547d1183e68ee73d904be721bc16165", "committedDate": "2020-06-17T06:37:52Z", "message": "Adjust scarecrow held item texture"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eb1844dee84e2ef757b4a405d6ad6b9f4cace74a", "author": {"user": {"login": "ShadowProtocol", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/eb1844dee84e2ef757b4a405d6ad6b9f4cace74a", "committedDate": "2020-06-17T06:37:58Z", "message": "Fix scarecrow placement condition\n\nEnsure the upper block of the scarecrow has a clear space to be placed in"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c666cff8d0b84fa66c40f3c0663197cd6c81ef7f", "author": {"user": {"login": "ShadowProtocol", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/c666cff8d0b84fa66c40f3c0663197cd6c81ef7f", "committedDate": "2020-06-17T06:04:22Z", "message": "Fix scarecrow placement condition\n\nEnsure the upper block of the scarecrow has a clear space to be placed in"}, "afterCommit": {"oid": "eb1844dee84e2ef757b4a405d6ad6b9f4cace74a", "author": {"user": {"login": "ShadowProtocol", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/eb1844dee84e2ef757b4a405d6ad6b9f4cace74a", "committedDate": "2020-06-17T06:37:58Z", "message": "Fix scarecrow placement condition\n\nEnsure the upper block of the scarecrow has a clear space to be placed in"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM0NDIzOTA0", "url": "https://github.com/ldtteam/minecolonies/pull/5241#pullrequestreview-434423904", "createdAt": "2020-06-20T12:03:23Z", "commit": {"oid": "eb1844dee84e2ef757b4a405d6ad6b9f4cace74a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMFQxMjowMzoyNFrOGmmQKg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMFQxMjowMzoyNFrOGmmQKg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzEyNTgwMg==", "bodyText": "As far as I know we should not be using IInventory anymore and instead use IItemhandlers.", "url": "https://github.com/ldtteam/minecolonies/pull/5241#discussion_r443125802", "createdAt": "2020-06-20T12:03:24Z", "author": {"login": "Raycoms"}, "path": "src/main/java/com/minecolonies/coremod/tileentities/ScarecrowTileEntity.java", "diffHunk": "@@ -119,87 +117,16 @@\n     /**\n      * Inventory of the field.\n      */\n-    private final IItemHandlerModifiable inventory = new IItemHandlerModifiable() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eb1844dee84e2ef757b4a405d6ad6b9f4cace74a"}, "originalPosition": 28}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM0NDIzOTE4", "url": "https://github.com/ldtteam/minecolonies/pull/5241#pullrequestreview-434423918", "createdAt": "2020-06-20T12:03:49Z", "commit": {"oid": "eb1844dee84e2ef757b4a405d6ad6b9f4cace74a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMFQxMjowMzo1MFrOGmmQQQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMFQxMjowMzo1MFrOGmmQQQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzEyNTgyNQ==", "bodyText": "formatting\n{\n}\n(All over the PR)", "url": "https://github.com/ldtteam/minecolonies/pull/5241#discussion_r443125825", "createdAt": "2020-06-20T12:03:50Z", "author": {"login": "Raycoms"}, "path": "src/main/java/com/minecolonies/coremod/blocks/BlockScarecrow.java", "diffHunk": "@@ -135,17 +167,27 @@ public void onExplosionDestroy(final World worldIn, final BlockPos pos, final Ex\n     @Override\n     public void onBlockHarvested(final World worldIn, @NotNull final BlockPos pos, final BlockState state, @NotNull final PlayerEntity player)\n     {\n+        DoubleBlockHalf half = state.get(HALF);\n+        BlockPos otherpos = half == DoubleBlockHalf.LOWER? pos.up() : pos.down();\n+        BlockState otherstate = worldIn.getBlockState(otherpos);\n+\n+        // just double check the other block is also the scarecrow and not the same half,\n+        // then destroy it (make it air)\n+        if (otherstate.getBlock() == this && otherstate.get(HALF) != half) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eb1844dee84e2ef757b4a405d6ad6b9f4cace74a"}, "originalPosition": 129}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM0NDIzOTM2", "url": "https://github.com/ldtteam/minecolonies/pull/5241#pullrequestreview-434423936", "createdAt": "2020-06-20T12:04:12Z", "commit": {"oid": "eb1844dee84e2ef757b4a405d6ad6b9f4cace74a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMFQxMjowNDoxM1rOGmmQVA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMFQxMjowNDoxM1rOGmmQVA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzEyNTg0NA==", "bodyText": "@OverRide", "url": "https://github.com/ldtteam/minecolonies/pull/5241#discussion_r443125844", "createdAt": "2020-06-20T12:04:13Z", "author": {"login": "Raycoms"}, "path": "src/main/java/com/minecolonies/coremod/blocks/BlockScarecrow.java", "diffHunk": "@@ -101,8 +114,23 @@ public ActionResultType onBlockActivated(\n     @Override\n     public BlockState getStateForPlacement(final BlockItemUseContext context)\n     {\n-        @NotNull final Direction Direction = (context.getPlayer() == null) ? NORTH : fromAngle(context.getPlayer().rotationYaw);\n-        return this.getDefaultState().with(FACING, Direction);\n+        @NotNull final Direction Direction = (context.getPlayer() == null) ? NORTH : fromAngle(context.getPlayer().rotationYaw + 180);\n+\n+        if (context.getPos().getY() < 255 && context.getWorld().getBlockState(context.getPos().up()).isReplaceable(context)) {\n+            return this.getDefaultState().with(FACING, Direction).with(HALF, DoubleBlockHalf.LOWER);\n+        } else {\n+            return null;\n+        }\n+    }\n+\n+    public boolean isValidPosition(BlockState state, IWorldReader worldIn, BlockPos pos) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eb1844dee84e2ef757b4a405d6ad6b9f4cace74a"}, "originalPosition": 97}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d4e264ab77f2255179083408a4a77104ddf63fb5", "author": {"user": {"login": "ShadowProtocol", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/d4e264ab77f2255179083408a4a77104ddf63fb5", "committedDate": "2020-06-22T04:24:24Z", "message": "Use ItemStackHandler in scarecrow tile entity\n\nSwitch IInventory for Forge IItemHandler's default implementation ItemStackHandler\nFix brace formatting\nAdd Override annotations"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c2529786d8e4251f64fc4a3e200e3cf30a43cab1", "author": {"user": {"login": "ShadowProtocol", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/c2529786d8e4251f64fc4a3e200e3cf30a43cab1", "committedDate": "2020-06-22T04:52:21Z", "message": "Fix placement glitch with scarecrow\n\nFix other interactions like block placement from starting when the scarecrow is interacted with"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM0NjAzMTE4", "url": "https://github.com/ldtteam/minecolonies/pull/5241#pullrequestreview-434603118", "createdAt": "2020-06-22T04:57:14Z", "commit": {"oid": "c2529786d8e4251f64fc4a3e200e3cf30a43cab1"}, "state": "DISMISSED", "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQwNDo1NzoxNFrOGmx7Fg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQwNTowMjoyOVrOGmx_RQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzMxNzAxNA==", "bodyText": "formatting", "url": "https://github.com/ldtteam/minecolonies/pull/5241#discussion_r443317014", "createdAt": "2020-06-22T04:57:14Z", "author": {"login": "Asherslab"}, "path": "src/api/java/com/minecolonies/api/inventory/container/ContainerField.java", "diffHunk": "@@ -87,28 +97,28 @@ public ContainerField(final int windowId, final PlayerInventory playerInventory,\n \n     @NotNull\n     @Override\n-    public ItemStack transferStackInSlot(@NotNull final PlayerEntity playerIn, final int slotIndex)\n+    public ItemStack transferStackInSlot(@NotNull final PlayerEntity playerIn, final int index)\n     {\n-        if (slotIndex == 0)\n-        {\n-            playerIn.inventory.addItemStackToInventory(inventory.getStackInSlot(0));\n-            inventory.insertItem(0, ItemStackUtils.EMPTY, false);\n-        }\n-        else if (inventory.getStackInSlot(0) == ItemStackUtils.EMPTY || ItemStackUtils.getSize(inventory.getStackInSlot(0)) == 0)\n+        ItemStack transfer = ItemStack.EMPTY;\n+        Slot slot = this.inventorySlots.get(index);\n+\n+        if (slot == null || !slot.getHasStack()) return transfer;\n+\n+        transfer = slot.getStack();\n+\n+        if (index == 0)\n         {\n-            final int playerIndex = slotIndex < MAX_INVENTORY_INDEX ? (slotIndex + INVENTORY_BAR_SIZE) : (slotIndex - MAX_INVENTORY_INDEX);\n-            if (playerIn.inventory.getStackInSlot(playerIndex) != ItemStackUtils.EMPTY)\n+            if (!mergeItemStack(transfer, 1, 37, true)) {\n+                return ItemStack.EMPTY;\n+            }\n+        } else {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c2529786d8e4251f64fc4a3e200e3cf30a43cab1"}, "originalPosition": 68}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzMxNzIyNw==", "bodyText": "formatting", "url": "https://github.com/ldtteam/minecolonies/pull/5241#discussion_r443317227", "createdAt": "2020-06-22T04:58:10Z", "author": {"login": "Asherslab"}, "path": "src/main/java/com/minecolonies/coremod/blocks/BlockScarecrow.java", "diffHunk": "@@ -87,22 +95,49 @@ public ActionResultType onBlockActivated(\n         //If the world is server, open the inventory of the field.\n         if (!worldIn.isRemote)\n         {\n-            final TileEntity entity = worldIn.getTileEntity(pos);\n+            // Get the entity of the bottom half\n+            DoubleBlockHalf half = state.get(HALF);\n+            final TileEntity entity = worldIn.getTileEntity(\n+                half == DoubleBlockHalf.UPPER? pos.down() : pos\n+            );\n+\n             if (entity instanceof ScarecrowTileEntity)\n             {\n                 NetworkHooks.openGui((ServerPlayerEntity) player, (ScarecrowTileEntity) entity, pos);\n-                return ActionResultType.SUCCESS;\n+            } else {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c2529786d8e4251f64fc4a3e200e3cf30a43cab1"}, "originalPosition": 83}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzMxNzI1NA==", "bodyText": "formatting", "url": "https://github.com/ldtteam/minecolonies/pull/5241#discussion_r443317254", "createdAt": "2020-06-22T04:58:19Z", "author": {"login": "Asherslab"}, "path": "src/main/java/com/minecolonies/coremod/blocks/BlockScarecrow.java", "diffHunk": "@@ -87,22 +95,49 @@ public ActionResultType onBlockActivated(\n         //If the world is server, open the inventory of the field.\n         if (!worldIn.isRemote)\n         {\n-            final TileEntity entity = worldIn.getTileEntity(pos);\n+            // Get the entity of the bottom half\n+            DoubleBlockHalf half = state.get(HALF);\n+            final TileEntity entity = worldIn.getTileEntity(\n+                half == DoubleBlockHalf.UPPER? pos.down() : pos\n+            );\n+\n             if (entity instanceof ScarecrowTileEntity)\n             {\n                 NetworkHooks.openGui((ServerPlayerEntity) player, (ScarecrowTileEntity) entity, pos);\n-                return ActionResultType.SUCCESS;\n+            } else {\n+                return ActionResultType.FAIL;\n             }\n         }\n-        return ActionResultType.FAIL;\n+\n+        // This must succeed in Remote to stop more right click interactions like placing blocks\n+        return ActionResultType.SUCCESS;\n     }\n \n     @javax.annotation.Nullable\n     @Override\n     public BlockState getStateForPlacement(final BlockItemUseContext context)\n     {\n-        @NotNull final Direction Direction = (context.getPlayer() == null) ? NORTH : fromAngle(context.getPlayer().rotationYaw);\n-        return this.getDefaultState().with(FACING, Direction);\n+        @NotNull final Direction Direction = (context.getPlayer() == null) ? NORTH : fromAngle(context.getPlayer().rotationYaw + 180);\n+\n+        if (context.getPos().getY() < 255 && context.getWorld().getBlockState(context.getPos().up()).isReplaceable(context))\n+        {\n+            return this.getDefaultState().with(FACING, Direction).with(HALF, DoubleBlockHalf.LOWER);\n+        } else {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c2529786d8e4251f64fc4a3e200e3cf30a43cab1"}, "originalPosition": 104}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzMxNzI5Nw==", "bodyText": "formatting", "url": "https://github.com/ldtteam/minecolonies/pull/5241#discussion_r443317297", "createdAt": "2020-06-22T04:58:31Z", "author": {"login": "Asherslab"}, "path": "src/main/java/com/minecolonies/coremod/blocks/BlockScarecrow.java", "diffHunk": "@@ -87,22 +95,49 @@ public ActionResultType onBlockActivated(\n         //If the world is server, open the inventory of the field.\n         if (!worldIn.isRemote)\n         {\n-            final TileEntity entity = worldIn.getTileEntity(pos);\n+            // Get the entity of the bottom half\n+            DoubleBlockHalf half = state.get(HALF);\n+            final TileEntity entity = worldIn.getTileEntity(\n+                half == DoubleBlockHalf.UPPER? pos.down() : pos\n+            );\n+\n             if (entity instanceof ScarecrowTileEntity)\n             {\n                 NetworkHooks.openGui((ServerPlayerEntity) player, (ScarecrowTileEntity) entity, pos);\n-                return ActionResultType.SUCCESS;\n+            } else {\n+                return ActionResultType.FAIL;\n             }\n         }\n-        return ActionResultType.FAIL;\n+\n+        // This must succeed in Remote to stop more right click interactions like placing blocks\n+        return ActionResultType.SUCCESS;\n     }\n \n     @javax.annotation.Nullable\n     @Override\n     public BlockState getStateForPlacement(final BlockItemUseContext context)\n     {\n-        @NotNull final Direction Direction = (context.getPlayer() == null) ? NORTH : fromAngle(context.getPlayer().rotationYaw);\n-        return this.getDefaultState().with(FACING, Direction);\n+        @NotNull final Direction Direction = (context.getPlayer() == null) ? NORTH : fromAngle(context.getPlayer().rotationYaw + 180);\n+\n+        if (context.getPos().getY() < 255 && context.getWorld().getBlockState(context.getPos().up()).isReplaceable(context))\n+        {\n+            return this.getDefaultState().with(FACING, Direction).with(HALF, DoubleBlockHalf.LOWER);\n+        } else {\n+            return null;\n+        }\n+    }\n+\n+    @Override\n+    public boolean isValidPosition(BlockState state, IWorldReader worldIn, BlockPos pos)\n+    {\n+        BlockPos blockpos = pos.down();\n+        BlockState blockstate = worldIn.getBlockState(blockpos);\n+        if (state.get(HALF) == DoubleBlockHalf.LOWER)\n+        {\n+            return blockstate.isSolidSide(worldIn, blockpos, Direction.UP);\n+        } else {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c2529786d8e4251f64fc4a3e200e3cf30a43cab1"}, "originalPosition": 117}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzMxNzU1Nw==", "bodyText": "formatting (space between LOWER and ? in ternaries)", "url": "https://github.com/ldtteam/minecolonies/pull/5241#discussion_r443317557", "createdAt": "2020-06-22T04:59:50Z", "author": {"login": "Asherslab"}, "path": "src/main/java/com/minecolonies/coremod/blocks/BlockScarecrow.java", "diffHunk": "@@ -135,17 +176,28 @@ public void onExplosionDestroy(final World worldIn, final BlockPos pos, final Ex\n     @Override\n     public void onBlockHarvested(final World worldIn, @NotNull final BlockPos pos, final BlockState state, @NotNull final PlayerEntity player)\n     {\n+        DoubleBlockHalf half = state.get(HALF);\n+        BlockPos otherpos = half == DoubleBlockHalf.LOWER? pos.up() : pos.down();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c2529786d8e4251f64fc4a3e200e3cf30a43cab1"}, "originalPosition": 141}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzMxNzY2MQ==", "bodyText": "please remove code don't comment it out", "url": "https://github.com/ldtteam/minecolonies/pull/5241#discussion_r443317661", "createdAt": "2020-06-22T05:00:20Z", "author": {"login": "Asherslab"}, "path": "src/main/java/com/minecolonies/coremod/blocks/BlockScarecrow.java", "diffHunk": "@@ -135,17 +176,28 @@ public void onExplosionDestroy(final World worldIn, final BlockPos pos, final Ex\n     @Override\n     public void onBlockHarvested(final World worldIn, @NotNull final BlockPos pos, final BlockState state, @NotNull final PlayerEntity player)\n     {\n+        DoubleBlockHalf half = state.get(HALF);\n+        BlockPos otherpos = half == DoubleBlockHalf.LOWER? pos.up() : pos.down();\n+        BlockState otherstate = worldIn.getBlockState(otherpos);\n+\n+        // just double check the other block is also the scarecrow and not the same half,\n+        // then destroy it (make it air)\n+        if (otherstate.getBlock() == this && otherstate.get(HALF) != half)\n+        {\n+            worldIn.setBlockState(otherpos, Blocks.AIR.getDefaultState(), 35);\n+        }\n+\n         notifyColonyAboutDestruction(worldIn, pos);\n         super.onBlockHarvested(worldIn, pos, state, player);\n     }\n-\n+/*\n     @Override", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c2529786d8e4251f64fc4a3e200e3cf30a43cab1"}, "originalPosition": 156}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzMxODA4NQ==", "bodyText": "usage of ItemStackUtils version is preferred for easier future porting (reason it was made in the first place)", "url": "https://github.com/ldtteam/minecolonies/pull/5241#discussion_r443318085", "createdAt": "2020-06-22T05:02:29Z", "author": {"login": "Asherslab"}, "path": "src/main/java/com/minecolonies/coremod/tileentities/ScarecrowTileEntity.java", "diffHunk": "@@ -578,7 +518,7 @@ public void read(final CompoundNBT compound)\n             final ItemStack stack = ItemStack.read(inventoryCompound);\n             if (ItemStackUtils.getSize(stack) <= 0)\n             {\n-                inventory.setStackInSlot(i, ItemStackUtils.EMPTY);\n+                inventory.setStackInSlot(i, ItemStack.EMPTY);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c2529786d8e4251f64fc4a3e200e3cf30a43cab1"}, "originalPosition": 125}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8e4d4725e54470cd376bb05bb52ba2afd4327841", "author": {"user": {"login": "ShadowProtocol", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/8e4d4725e54470cd376bb05bb52ba2afd4327841", "committedDate": "2020-06-22T05:21:00Z", "message": "Fix formatting\n\nRestore uses of ItemStackUtils.Empty\nExpand else statements and ternary statements"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5beb30877ed6521c30bd3670c3fef3398a2865cd", "author": {"user": {"login": "Raycoms", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/5beb30877ed6521c30bd3670c3fef3398a2865cd", "committedDate": "2020-06-22T12:19:46Z", "message": "Merge branch 'version/1.15' into feature/scarecrow"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM0ODc5NzY2", "url": "https://github.com/ldtteam/minecolonies/pull/5241#pullrequestreview-434879766", "createdAt": "2020-06-22T12:36:20Z", "commit": {"oid": "5beb30877ed6521c30bd3670c3fef3398a2865cd"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2175, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}