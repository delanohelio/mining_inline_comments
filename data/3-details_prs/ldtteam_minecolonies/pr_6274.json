{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQzMDYxMTgy", "number": 6274, "title": "Fix tree restriction search", "bodyText": "Changes proposed in this pull request:\n\nSimplifcations in the abstractjob\nFix lumberjack tree range restrictions.\n\n\nReview please", "createdAt": "2020-12-20T12:29:10Z", "url": "https://github.com/ldtteam/minecolonies/pull/6274", "merged": true, "mergeCommit": {"oid": "f2f4e9445711191bcfd37216154f42d38a4a63ed"}, "closed": true, "closedAt": "2020-12-22T08:53:56Z", "author": {"login": "Raycoms"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdoAeKUgH2gAyNTQzMDYxMTgyOjBjOGMzMjU5NjBjOGVlZTMwYzdjZDJmZWRlOGFhZTNmOGNmYWUwODk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdomkSXAFqTU1NjkxMzczOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "0c8c325960c8eee30c7cd2fede8aae3f8cfae089", "author": {"user": {"login": "Raycoms", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/0c8c325960c8eee30c7cd2fede8aae3f8cfae089", "committedDate": "2020-12-20T12:27:09Z", "message": "Fix tree restriction search"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU2MDEzOTYz", "url": "https://github.com/ldtteam/minecolonies/pull/6274#pullrequestreview-556013963", "createdAt": "2020-12-20T12:36:47Z", "commit": {"oid": "0c8c325960c8eee30c7cd2fede8aae3f8cfae089"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMFQxMjozNjo0OFrOIJD3bw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMFQxMjozNjo0OFrOIJD3bw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjM3MTQzOQ==", "bodyText": "entity can be null", "url": "https://github.com/ldtteam/minecolonies/pull/6274#discussion_r546371439", "createdAt": "2020-12-20T12:36:48Z", "author": {"login": "someaddons"}, "path": "src/main/java/com/minecolonies/coremod/entity/pathfinding/pathjobs/AbstractPathJob.java", "diffHunk": "@@ -165,19 +153,30 @@ public AbstractPathJob(final World world, final BlockPos startRestriction, final\n \n         xzRestricted = true;\n \n+        final int localMinX = Math.min(minX, entity.getPosition().getX()) - 10;\n+        final int localMaxX =  Math.max(maxX, entity.getPosition().getX()) + 10;\n+        final int localMinZ =  Math.min(minZ, entity.getPosition().getZ()) - 10;\n+        final int localMaxZ = Math.max(maxZ, entity.getPosition().getZ()) + 10;\n \n-        final int range = (int) Math.sqrt(Math.pow(maxX - minX, 2) + Math.pow(maxZ - minZ, 2)) * 2;\n+        final int range = (int) Math.sqrt(Math.pow(localMaxX - localMinX, 2) + Math.pow(localMaxZ - localMinZ, 2)) * 2;\n \n-        this.world = new ChunkCache(world, new BlockPos(minX, MIN_Y, minZ), new BlockPos(maxX, MAX_Y, maxZ), range);\n+        this.world = new ChunkCache(world, new BlockPos(localMinX, MIN_Y, localMinZ), new BlockPos(localMaxX, MAX_Y, localMaxZ), range);\n \n-        this.start = startRestriction;\n+        this.start = entity.getPosition();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0c8c325960c8eee30c7cd2fede8aae3f8cfae089"}, "originalPosition": 69}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "341c1ac400a4ea6a76d6dbe2ef4955520f4cdf5e", "author": {"user": {"login": "Raycoms", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/341c1ac400a4ea6a76d6dbe2ef4955520f4cdf5e", "committedDate": "2020-12-20T12:50:32Z", "message": "adjust to review"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU2OTEzNzM5", "url": "https://github.com/ldtteam/minecolonies/pull/6274#pullrequestreview-556913739", "createdAt": "2020-12-22T08:50:14Z", "commit": {"oid": "341c1ac400a4ea6a76d6dbe2ef4955520f4cdf5e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1726, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}