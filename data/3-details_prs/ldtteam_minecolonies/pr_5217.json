{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMzOTIxODEx", "number": 5217, "title": "Add the rallying banner", "bodyText": "The rallying banner allows players to summon their guards to them.\nFeatures\n\nSneak-Rightclicking on a guard building hut adds it / removes it from the rallying list.\nRight-Clicking in the air opens the GUI, which allows the player to remove Guard Buildings from the list without sneak-rightclicking them.\nSneak-Rightclicking in the air or on the ground summons or dismisses the guards to the player.\nWhile running to the player, guards will receive a massive speed boost (Speed2 at minimum, but up to Speed5 when highly trained).\nWhile rallied, guards will glow in the colony's team color, and are immune to damage from the rallying player. The same is not true the other way around!\nGuards will return to regular duty when dismissed, or when the banner is not in the player inventory anymore.\nWhen an active banner is put back into the player inventory (grabbed from a chest, or moved from slot to slot), chances are that the rallying will proceed.\nThere is a new permission that allows players to rally guards of other people's colonies.\n\nLimitations\n\nGuards will use a high amount of food while rallied. Currently it's calibrated to reduce the guard to 2 saturation points after 5.5 minutes of rallying.\nDismissing the guard while below 2 saturation will remove those 2 saturation, forcing the guard to eat.\nGuards will only rally within the colony area. Attempting to move them out of the colony will dismiss them automatically.\n\nPossible future researches\n\nLess food consumption\nStrength buff\nStamina buff\nNo friendly-fire-damage from rallied guards to rallying players\nTeleportation on rally\nIncrease of allowed rallying range\nPlacement of banner to rally guards at a static location (the code is written with that in mind)\nCombat formations (e.g. toggle by shift-scrolling through formations)", "createdAt": "2020-06-12T23:27:45Z", "url": "https://github.com/ldtteam/minecolonies/pull/5217", "merged": true, "mergeCommit": {"oid": "0aab02bba91c874e598ae3cd69bd0d0849bdd9c3"}, "closed": true, "closedAt": "2020-06-20T20:27:23Z", "author": {"login": "JiaYow"}, "timelineItems": {"totalCount": 86, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcjix4KgH2gAyNDMzOTIxODExOjk1ZDIzN2Y4YWIzMTdkNmNhZmI0N2M3M2VjODczZDQxNDQ4YzVkYTE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABctM8xjgFqTQzNDQ0OTM3MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "95d237f8ab317d6cafb47c73ec873d41448c5da1", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/95d237f8ab317d6cafb47c73ec873d41448c5da1", "committedDate": "2020-05-21T19:24:41Z", "message": "PROTOTYPE! DO NOT MERGE! Started work on dman request refactoring"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "09551b45471e78a0e83c7af70f5752423ff3929f", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/09551b45471e78a0e83c7af70f5752423ff3929f", "committedDate": "2020-05-21T23:58:36Z", "message": "PROTOTYPE! DO NOT MERGE! Mainly reworked Deliveryman AI"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ee8f836baf67d5e8345ea088c96942bc268190ef", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/ee8f836baf67d5e8345ea088c96942bc268190ef", "committedDate": "2020-05-22T17:43:43Z", "message": "Prepared deliveryman for new pickup system"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4a34ee1fb881332e4d39248bb72495788aa0f723", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/4a34ee1fb881332e4d39248bb72495788aa0f723", "committedDate": "2020-05-22T19:15:21Z", "message": "Made workers create a pickup request after dump."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4603247b5bee04ff36ba43e5bea03b7273e0f9cc", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/4603247b5bee04ff36ba43e5bea03b7273e0f9cc", "committedDate": "2020-05-22T21:27:06Z", "message": "Aligned code with reality"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "94939217b33cccd4a1c934787f70c6826dc28069", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/94939217b33cccd4a1c934787f70c6826dc28069", "committedDate": "2020-05-22T23:07:27Z", "message": "Almost completed prototype. Deliveryman can now pickup on-demand"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3202fa4812b58248fc22ca394e71b768e6da84f9", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/3202fa4812b58248fc22ca394e71b768e6da84f9", "committedDate": "2020-05-23T19:15:46Z", "message": "Added info text on force pickup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d8d5706dd20ad0f870a00c3d7d7092a558460f0a", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/d8d5706dd20ad0f870a00c3d7d7092a558460f0a", "committedDate": "2020-05-23T23:25:58Z", "message": "Improved overall stability of the dman"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "11cd22e03bf6e4f0df7e1ec86c26edbca3a1dd5f", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/11cd22e03bf6e4f0df7e1ec86c26edbca3a1dd5f", "committedDate": "2020-05-24T00:02:50Z", "message": "Adapted delays a bit, and don't request a pickup when another request is already active."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e2511aa580136c0526e642a6d152ddf0af31ee67", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/e2511aa580136c0526e642a6d152ddf0af31ee67", "committedDate": "2020-05-24T08:56:01Z", "message": "Updated RS version"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3bff523867e61ac49cced9927b7616584f46111f", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/3bff523867e61ac49cced9927b7616584f46111f", "committedDate": "2020-05-24T08:56:44Z", "message": "Merge remote-tracking branch 'upstream/version/1.15' into feature/wip-request-pickup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c2f58392cc7d4d3c9bf7e171230b00dc44af0822", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/c2f58392cc7d4d3c9bf7e171230b00dc44af0822", "committedDate": "2020-05-24T14:10:34Z", "message": "Made it so that the builder also doesn't keep requesting pickups."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4a19b255cafc070a7c75d263f4ff6db25757e7e2", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/4a19b255cafc070a7c75d263f4ff6db25757e7e2", "committedDate": "2020-05-24T15:05:53Z", "message": "Streamlined delays"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5c619830b632f8886c07316ef8448287c5e7e274", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/5c619830b632f8886c07316ef8448287c5e7e274", "committedDate": "2020-05-24T15:45:48Z", "message": "Removed unnecessary imports"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1df41d6bb78b072ca6a70b3249ade20c08dc9090", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/1df41d6bb78b072ca6a70b3249ade20c08dc9090", "committedDate": "2020-05-24T17:41:31Z", "message": "Added a (somewhat lazy) protection against pickup-request spam while inventory is full"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ead3609d3fce423bf0e3b5d1fb71d2c650162e54", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/ead3609d3fce423bf0e3b5d1fb71d2c650162e54", "committedDate": "2020-05-24T17:46:41Z", "message": "Added missing comment for isPickupLockEnabled"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b0d717897751eb0bb341b407f70c564a2da2bf6b", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/b0d717897751eb0bb341b407f70c564a2da2bf6b", "committedDate": "2020-05-24T21:05:51Z", "message": "Use built-in-function instead of isPickupLockEnabled to avoid multiple pickup-requests at once."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "deccf790812e9606dee0df91d3dccf2effba469a", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/deccf790812e9606dee0df91d3dccf2effba469a", "committedDate": "2020-05-25T19:22:32Z", "message": "Fixed the stash, made it so that only one pickup request can be active per building, reduced pickup delay to 2 ticks (gathering larger buildings took too long)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b2b9ff1f114a99ded4bef9716d967d5d29ca2d43", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/b2b9ff1f114a99ded4bef9716d967d5d29ca2d43", "committedDate": "2020-05-25T19:54:57Z", "message": "Added Javadoc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2d821950bc74740f327fd6ff826234e4cbac44e2", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/2d821950bc74740f327fd6ff826234e4cbac44e2", "committedDate": "2020-05-25T20:11:21Z", "message": "Merge branch 'up/version/1.15' into feature/request-pickup\n\nConflicts:\n\tsrc/api/java/com/minecolonies/api/util/constant/TranslationConstants.java\n\tsrc/main/java/com/minecolonies/coremod/entity/ai/citizen/builder/EntityAIStructureBuilder.java\n\tsrc/main/java/com/minecolonies/coremod/entity/ai/citizen/deliveryman/EntityAIWorkDeliveryman.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "844cd2eae24618e468941dc99511ebb1fcebc494", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/844cd2eae24618e468941dc99511ebb1fcebc494", "committedDate": "2020-05-25T20:24:43Z", "message": "Merge branch 'up/version/1.15' into feature/request-pickup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2ea2300ee1ebcee339fc8eccbfb63d8fff1f5ad6", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/2ea2300ee1ebcee339fc8eccbfb63d8fff1f5ad6", "committedDate": "2020-05-25T20:55:11Z", "message": "Merge branch 'up/version/1.15' into feature/request-pickup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4cd0e424a710039d30c24bfd11d5661641dcae34", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/4cd0e424a710039d30c24bfd11d5661641dcae34", "committedDate": "2020-05-25T22:07:16Z", "message": "Caught possible nullpointer exception."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "51e3213491c7a0abc6f765647e87095be07cf004", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/51e3213491c7a0abc6f765647e87095be07cf004", "committedDate": "2020-05-26T18:22:49Z", "message": "Changed the dman's item comparator to be nbt-sensitive, since the RS will tell the dman *exactly* what to pick up."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aac342d565ef17f85ec20696949296eb6e01780c", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/aac342d565ef17f85ec20696949296eb6e01780c", "committedDate": "2020-05-27T18:28:15Z", "message": "Another attempt to get the item comparison during prepareDelivery() right, using ItemStackUtils this time."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "99d22886eda746e50131ec8a473ff393fa0ed2fb", "author": {"user": {"login": "Raycoms", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/99d22886eda746e50131ec8a473ff393fa0ed2fb", "committedDate": "2020-05-28T19:21:33Z", "message": "Merge branch 'version/1.15' into feature/request-pickup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6b77b545df1c47495837447b42236cce878a3524", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/6b77b545df1c47495837447b42236cce878a3524", "committedDate": "2020-05-29T18:22:55Z", "message": "Added rallying banner item and recipe."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "35494a264a827b90e6158cb3805ecec9fd6ba44c", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/35494a264a827b90e6158cb3805ecec9fd6ba44c", "committedDate": "2020-05-30T08:14:55Z", "message": "Added simple connector between banners and guard towers."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3bb8b1238a47a2726d5335d274dcf54939f5eef9", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/3bb8b1238a47a2726d5335d274dcf54939f5eef9", "committedDate": "2020-05-30T18:38:42Z", "message": "Added client-side highlighting of rallied guard towers"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "37f851e411590e6e95670b9c409e4453dfb1dba2", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/37f851e411590e6e95670b9c409e4453dfb1dba2", "committedDate": "2020-05-30T20:10:19Z", "message": "Added scaling mechanism to priorities, so that they internally don't increase linearly but following a quadratic function. This will make the aging mechanism slower."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4390e3b0776dd066c26d6221a60bdaf1ed30455e", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/4390e3b0776dd066c26d6221a60bdaf1ed30455e", "committedDate": "2020-05-30T20:32:13Z", "message": "Added pickup priority to deliveryman-hut"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "28b333795a6d7a2f04c38f71695757a18a0eaf29", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/28b333795a6d7a2f04c38f71695757a18a0eaf29", "committedDate": "2020-05-30T21:43:42Z", "message": "Workers will now only request a pickup after dumping if they have actually dumped something."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fa90d53fb2f746bafda8967f8c87eb7686e33143", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/fa90d53fb2f746bafda8967f8c87eb7686e33143", "committedDate": "2020-05-30T21:51:57Z", "message": "Adjusted priority calculation back to linear ... makes more sense after all."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e0552a2b3483070e364213e45ed9b1b82e2adfe7", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/e0552a2b3483070e364213e45ed9b1b82e2adfe7", "committedDate": "2020-05-30T22:00:22Z", "message": "Show priority only on requests that actually have priorities in the dman hut GUI. Also fixed label."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1198e2117a2346ff18639d4d3c5781ff496a4872", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/1198e2117a2346ff18639d4d3c5781ff496a4872", "committedDate": "2020-05-30T22:00:44Z", "message": "Merge branch 'feature/show-pickup-priority-in-dman-hut' into improvement/pickup-request-frequency"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b6f8fb158f7d6f32ae2fb60e6a7c29ce3db8373d", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/b6f8fb158f7d6f32ae2fb60e6a7c29ce3db8373d", "committedDate": "2020-05-31T20:42:31Z", "message": "Renamed getPlayerToFollow to getPositionToFollow, which makes more sense. Prepared AI to rally."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cfe79013c197ebab34442efc9e1d4d920bdbd67d", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/cfe79013c197ebab34442efc9e1d4d920bdbd67d", "committedDate": "2020-05-31T23:05:26Z", "message": "Added prototype rallying"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b29ce35934750f57cd93a88134e63fc1147e78da", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/b29ce35934750f57cd93a88134e63fc1147e78da", "committedDate": "2020-06-01T09:35:17Z", "message": "Added a few chat messages, and randomized the position of guards so they don't clump together so much"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e38df6f8c983a0a3d06e7b7c849e9dda6310b3c6", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/e38df6f8c983a0a3d06e7b7c849e9dda6310b3c6", "committedDate": "2020-06-01T09:59:20Z", "message": "Gave guards level-depending speed when rallying to the player"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1eeae0dacd036e74e2f3f5cd4a7ad6cb63fca432", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/1eeae0dacd036e74e2f3f5cd4a7ad6cb63fca432", "committedDate": "2020-06-01T17:31:01Z", "message": "Improved responsiveness of guards and handled events for drop, move-to-chest, etc."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a50d883fb13979e126df10339b40195e16f144a6", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/a50d883fb13979e126df10339b40195e16f144a6", "committedDate": "2020-06-01T18:42:16Z", "message": "Some usability improvements"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e6db9f722421603d620b2fc286e79e0c052b9747", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/e6db9f722421603d620b2fc286e79e0c052b9747", "committedDate": "2020-06-01T18:43:21Z", "message": "Merge branch 'up/version/1.15' into feature/rallying-banner"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9209bdde4fcd3ae2d15190051f4f0ced3695e37f", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/9209bdde4fcd3ae2d15190051f4f0ced3695e37f", "committedDate": "2020-06-01T18:48:31Z", "message": "Merge branch 'feature/rallying-banner' into test/rallying-banner-+-dman\n\nConflicts:\n\tsrc/api/java/com/minecolonies/api/util/constant/TranslationConstants.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8356c2216d0ce89fc6bdc1cf40ecf3868e8d6cd3", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/8356c2216d0ce89fc6bdc1cf40ecf3868e8d6cd3", "committedDate": "2020-06-01T18:50:11Z", "message": "Fixed copy/paste error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "51a5f51b2127786e7c1ad4da059a68ae9c79e718", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/51a5f51b2127786e7c1ad4da059a68ae9c79e718", "committedDate": "2020-06-01T18:57:19Z", "message": "Merge branch 'improvement/pickup-request-frequency' into test/rallying-banner-+-dman"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c8aa43b2f291caf1933cc64d3ce39201f4a09513", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/c8aa43b2f291caf1933cc64d3ce39201f4a09513", "committedDate": "2020-06-01T21:42:58Z", "message": "Merge branch 'up/version/1.15' into feature/rallying-banner"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8bd61f90003cf589aab842f0801569f0e7a84cba", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/8bd61f90003cf589aab842f0801569f0e7a84cba", "committedDate": "2020-06-02T17:14:40Z", "message": "Fixed pacifism in guards"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "312f105ef2786dabe85f866f1e02ee1017989da4", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/312f105ef2786dabe85f866f1e02ee1017989da4", "committedDate": "2020-06-02T18:57:06Z", "message": "Code cleanup and added support for barracks towers"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "be5559968febc80c8fcbe58101ceeb8678397ced", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/be5559968febc80c8fcbe58101ceeb8678397ced", "committedDate": "2020-06-02T18:59:26Z", "message": "Merge branch 'feature/rallying-banner' into test/rallying-banner-+-dman\n\nConflicts:\n\tsrc/main/java/com/minecolonies/coremod/items/ItemBannerRallyGuards.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fdca5f989bc330af33c076675592b834816f874e", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/fdca5f989bc330af33c076675592b834816f874e", "committedDate": "2020-06-02T19:01:03Z", "message": "Merge branch 'up/version/1.15' into test/rallying-banner-+-dman"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f2a63794be22c7c9b46c1d172f53c61e30fd4a2c", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/f2a63794be22c7c9b46c1d172f53c61e30fd4a2c", "committedDate": "2020-06-03T20:13:03Z", "message": "Merge branch 'up/version/1.15' into feature/rallying-banner"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "47ac8e69e1d34aaa0f0ee6035587d0818e809c91", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/47ac8e69e1d34aaa0f0ee6035587d0818e809c91", "committedDate": "2020-06-03T21:03:16Z", "message": "Cleaned up code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a16733d117bbefc1130dc2e03795a3cc4b75935c", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/a16733d117bbefc1130dc2e03795a3cc4b75935c", "committedDate": "2020-06-04T21:16:19Z", "message": "Added GUI"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "313c3f0b53357ab9155d390789b650e94e265224", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/313c3f0b53357ab9155d390789b650e94e265224", "committedDate": "2020-06-06T19:03:25Z", "message": "Improved GUI layout"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eb19759f1bed4fbb302a46bdc68459f53896dcfc", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/eb19759f1bed4fbb302a46bdc68459f53896dcfc", "committedDate": "2020-06-06T19:04:13Z", "message": "Merge branch 'up/version/1.15' into feature/rallying-banner"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1f48cfaef8afcd114eea3bf34dd6dcfb36f06f10", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/1f48cfaef8afcd114eea3bf34dd6dcfb36f06f10", "committedDate": "2020-06-06T23:46:33Z", "message": "Added interdimensional support and improved GUI yet again"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "17351e56a7673b9ceded3ab355dcc154799ac288", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/17351e56a7673b9ceded3ab355dcc154799ac288", "committedDate": "2020-06-07T17:53:55Z", "message": "Fixed window messages for multiplayer server"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4517a84d86d82cfd73ebfb6303cf7d30651ba4c8", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/4517a84d86d82cfd73ebfb6303cf7d30651ba4c8", "committedDate": "2020-06-07T21:28:12Z", "message": "Fixed client/server-separate code. GUI now works and functions :-D"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "444e1c30be3d75956463ffd63939ed00eaf10fd6", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/444e1c30be3d75956463ffd63939ed00eaf10fd6", "committedDate": "2020-06-08T18:15:11Z", "message": "Fixed null pointer crash when AI is not loaded during broadcast"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "feb73693a053eaf86d499378e208eca4092237e5", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/feb73693a053eaf86d499378e208eca4092237e5", "committedDate": "2020-06-08T18:44:58Z", "message": "Better tooltips and hints"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "45a662671a2fbcaa06fac8ace683092bf255c77f", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/45a662671a2fbcaa06fac8ace683092bf255c77f", "committedDate": "2020-06-08T20:14:04Z", "message": "Stabilized rallying code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0df48110b15007cd2c9610230a187ccbc9bb033a", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/0df48110b15007cd2c9610230a187ccbc9bb033a", "committedDate": "2020-06-08T21:29:02Z", "message": "Cleaned code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "11f0dbaa420e61f2504b7731f2a624a9de4620e6", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/11f0dbaa420e61f2504b7731f2a624a9de4620e6", "committedDate": "2020-06-09T20:58:46Z", "message": "Structurized code a bit better to separate client/server code."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3d2953fb7d80c0dce8f3e66bb3628d59f481c336", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/3d2953fb7d80c0dce8f3e66bb3628d59f481c336", "committedDate": "2020-06-10T00:00:40Z", "message": "Refactor to be based on ILocation, which enables support for banner tile entities."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ed224fe89822888f446a25d986184952e3fcfb0f", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/ed224fe89822888f446a25d986184952e3fcfb0f", "committedDate": "2020-06-11T15:42:09Z", "message": "Prevent damage from player to guards while rallied and added appropriate glow effects"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0240220170a7586018c7fba1fd67df0596f8a5b8", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/0240220170a7586018c7fba1fd67df0596f8a5b8", "committedDate": "2020-06-11T16:29:56Z", "message": "Added permissions for the rallying banner"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d17e1968f66ca64fa9d73ccd93b5d10e048924db", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/d17e1968f66ca64fa9d73ccd93b5d10e048924db", "committedDate": "2020-06-11T16:36:29Z", "message": "Merge branch 'up/version/1.15' into feature/rallying-banner\n\nConflicts:\n\tsrc/main/java/com/minecolonies/coremod/entity/ai/citizen/guard/AbstractEntityAIGuard.java\n\tsrc/main/java/com/minecolonies/coremod/event/ClientEventHandler.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ced39ef1d4ac3a7a6321811cefe0af8b18e0aa65", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/ced39ef1d4ac3a7a6321811cefe0af8b18e0aa65", "committedDate": "2020-06-11T16:42:40Z", "message": "Added rallying to the states that should prevent dumping"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "807754e12f17f3ef2dfa20eb7bac011bbbeb2df5", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/807754e12f17f3ef2dfa20eb7bac011bbbeb2df5", "committedDate": "2020-06-11T18:42:25Z", "message": "Forge Update Compatibility"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "565192facd1b57f9486de7cc88c65d58ec0cc8b0", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/565192facd1b57f9486de7cc88c65d58ec0cc8b0", "committedDate": "2020-06-11T18:49:53Z", "message": "Coding Style"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7a878d0fb16fe95aa5df2bd9a09d84453720b235", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/7a878d0fb16fe95aa5df2bd9a09d84453720b235", "committedDate": "2020-06-11T18:51:10Z", "message": "Added null-check"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bc6dab4f1415cc67e0a85cf10d77e03a94b4d810", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/bc6dab4f1415cc67e0a85cf10d77e03a94b4d810", "committedDate": "2020-06-12T19:36:46Z", "message": "Coding style fixes and JDoc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "14c33f1389dea572557c2c3f12fbe006539a15f7", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/14c33f1389dea572557c2c3f12fbe006539a15f7", "committedDate": "2020-06-12T19:59:30Z", "message": "Traded minor lag for stability"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1bad1d28d5f3231cd9d4b7a35c3f22aa20872282", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/1bad1d28d5f3231cd9d4b7a35c3f22aa20872282", "committedDate": "2020-06-12T22:43:31Z", "message": "Added a saturation penalty and a range limitation to the banner"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2dbda5ba1253cf053bbd6e98ff49b76efab7007e", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/2dbda5ba1253cf053bbd6e98ff49b76efab7007e", "committedDate": "2020-06-12T23:26:26Z", "message": "Fixed adding citizens to colony too early, thereby duplicating skeleton entries."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "43072614ae9c89d2d068b2738f7e64f642e56088", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/43072614ae9c89d2d068b2738f7e64f642e56088", "committedDate": "2020-06-13T21:53:30Z", "message": "Removed unnecessary team-addition, and stabilized team-removal of citizens"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "13e24fd190f661e74cf01022779a8ed18f17668c", "author": {"user": {"login": "Raycoms", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/13e24fd190f661e74cf01022779a8ed18f17668c", "committedDate": "2020-06-15T11:58:09Z", "message": "Merge branch 'version/1.15' into feature/rallying-banner"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMwNjk2NTI2", "url": "https://github.com/ldtteam/minecolonies/pull/5217#pullrequestreview-430696526", "createdAt": "2020-06-15T14:26:41Z", "commit": {"oid": "13e24fd190f661e74cf01022779a8ed18f17668c"}, "state": "COMMENTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxNDoyNjo0MVrOGj0nAg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxNDo0NjoxNlrOGj1fGw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDIxNTI5OA==", "bodyText": "I think teams are not per-world, so we probably should add colony id + colony dimension to avoid future problems", "url": "https://github.com/ldtteam/minecolonies/pull/5217#discussion_r440215298", "createdAt": "2020-06-15T14:26:41Z", "author": {"login": "someaddons"}, "path": "src/main/java/com/minecolonies/coremod/colony/Colony.java", "diffHunk": "@@ -493,16 +498,24 @@ public void updateAttackingPlayers()\n         }\n     }\n \n+    @Override\n+    public ScorePlayerTeam getTeam()\n+    {\n+        // This getter will create the team if it doesn't exist. Could do something different though in the future.\n+        return checkOrCreateTeam();\n+    }\n+\n     /**\n      * Check or create the team.\n      */\n-    private void checkOrCreateTeam()\n+    private ScorePlayerTeam checkOrCreateTeam()\n     {\n         if (this.world.getScoreboard().getTeam(TEAM_COLONY_NAME + id) == null)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "13e24fd190f661e74cf01022779a8ed18f17668c"}, "originalPosition": 56}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDIyMjAzOA==", "bodyText": "I think we can add Officer's here too and you need to bump up the permissions version ontop on changes for backwards compat stuff", "url": "https://github.com/ldtteam/minecolonies/pull/5217#discussion_r440222038", "createdAt": "2020-06-15T14:35:55Z", "author": {"login": "someaddons"}, "path": "src/main/java/com/minecolonies/coremod/colony/permissions/Permissions.java", "diffHunk": "@@ -136,7 +136,7 @@ public Permissions(@NotNull final Colony colony)\n         this.setPermission(Rank.OWNER, Action.TELEPORT_TO_COLONY);\n         this.setPermission(Rank.OWNER, Action.RECEIVE_MESSAGES_FAR_AWAY);\n         this.setPermission(Rank.OWNER, Action.CAN_KEEP_COLONY_ACTIVE_WHILE_AWAY);\n-\n+        this.setPermission(Rank.OWNER, Action.RALLY_GUARDS);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "13e24fd190f661e74cf01022779a8ed18f17668c"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDIyNDA2OQ==", "bodyText": "Is start working unused now? if so remove the AITarget/function", "url": "https://github.com/ldtteam/minecolonies/pull/5217#discussion_r440224069", "createdAt": "2020-06-15T14:38:40Z", "author": {"login": "someaddons"}, "path": "src/main/java/com/minecolonies/coremod/entity/ai/basic/AbstractEntityAIFight.java", "diffHunk": "@@ -84,9 +84,9 @@ public AbstractEntityAIFight(@NotNull final J job)\n     {\n         super(job);\n         super.registerTargets(\n-          new AITarget(IDLE, START_WORKING, 1),\n+          new AITarget(IDLE, PREPARING, 1),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "13e24fd190f661e74cf01022779a8ed18f17668c"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDIyNjU1Nw==", "bodyText": "Did you consider that they use up food too when fighting?", "url": "https://github.com/ldtteam/minecolonies/pull/5217#discussion_r440226557", "createdAt": "2020-06-15T14:42:04Z", "author": {"login": "someaddons"}, "path": "src/main/java/com/minecolonies/coremod/entity/ai/citizen/guard/AbstractEntityAIGuard.java", "diffHunk": "@@ -140,6 +142,11 @@\n      */\n     private static final int GUARD_REGEN_INTERVAL = 40;\n \n+    /**\n+     * Interval between saturation losses during rallying. 1 saturation loss per interval.\n+     */\n+    private static final int RALLY_SATURATION_LOSS_INTERVAL = TICKS_SECOND * 10;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "13e24fd190f661e74cf01022779a8ed18f17668c"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDIyOTY1OQ==", "bodyText": "think we should check if a potion effect already exists before applying a new one", "url": "https://github.com/ldtteam/minecolonies/pull/5217#discussion_r440229659", "createdAt": "2020-06-15T14:46:16Z", "author": {"login": "someaddons"}, "path": "src/main/java/com/minecolonies/coremod/entity/ai/citizen/guard/AbstractEntityAIGuard.java", "diffHunk": "@@ -537,13 +600,30 @@ private IAIState helping()\n     }\n \n     /**\n-     * Decide what we should do next! Ticked once every 20 Ticks\n+     * Decide what we should do next! Ticked once every GUARD_TASK_INTERVAL Ticks\n      *\n      * @return the next IAIState.\n      */\n     protected IAIState decide()\n     {\n         reduceAttackDelay(GUARD_TASK_INTERVAL * getTickRate());\n+\n+        final ILocation rallyLocation = buildingGuards.getRallyLocation();\n+\n+        if (rallyLocation != null || buildingGuards.getTask() == GuardTask.FOLLOW)\n+        {\n+            worker.addPotionEffect(new EffectInstance(GLOW_EFFECT, GLOW_EFFECT_DURATION, GLOW_EFFECT_MULTIPLIER, false, false));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "13e24fd190f661e74cf01022779a8ed18f17668c"}, "originalPosition": 217}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "221e1ca73e2e9e949e949c138047df9bb85ddae8", "author": {"user": {"login": "Raycoms", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/221e1ca73e2e9e949e949c138047df9bb85ddae8", "committedDate": "2020-06-16T19:21:11Z", "message": "Merge branch 'version/1.15' into feature/rallying-banner"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "11239948122b624f3494ec0f60eb8519fa4edd7c", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/11239948122b624f3494ec0f60eb8519fa4edd7c", "committedDate": "2020-06-17T21:21:05Z", "message": "Streamlined the team names and added the dimension to the name"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6a08fe33d144a6ba20a88e01ab004f84e48f2254", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/6a08fe33d144a6ba20a88e01ab004f84e48f2254", "committedDate": "2020-06-17T21:22:31Z", "message": "Added RALLY_GUARDS to default permission of officers, bumped permission version"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d906d47855c915137c4971f12bf5e1000db4800b", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/d906d47855c915137c4971f12bf5e1000db4800b", "committedDate": "2020-06-17T21:37:47Z", "message": "Merge branch 'feature/rallying-banner' of github.com:JiaYow/minecolonies into feature/rallying-banner"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e54bba836fe3d29f5d8d2ffd2e538cbdc16c440d", "author": {"user": {"login": "JiaYow", "name": "JiaYow"}}, "url": "https://github.com/ldtteam/minecolonies/commit/e54bba836fe3d29f5d8d2ffd2e538cbdc16c440d", "committedDate": "2020-06-18T17:42:53Z", "message": "Prevent guards from eating during fights, renamed colony team, balanced rally saturation penalty"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2f75d3d92aaf87705740dc83bc40a722f85126c8", "author": {"user": {"login": "Raycoms", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/2f75d3d92aaf87705740dc83bc40a722f85126c8", "committedDate": "2020-06-20T12:18:09Z", "message": "Merge branch 'version/1.15' into feature/rallying-banner"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM0NDI1ODMw", "url": "https://github.com/ldtteam/minecolonies/pull/5217#pullrequestreview-434425830", "createdAt": "2020-06-20T12:38:00Z", "commit": {"oid": "2f75d3d92aaf87705740dc83bc40a722f85126c8"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM0NDQ5Mzcx", "url": "https://github.com/ldtteam/minecolonies/pull/5217#pullrequestreview-434449371", "createdAt": "2020-06-20T19:37:55Z", "commit": {"oid": "e54bba836fe3d29f5d8d2ffd2e538cbdc16c440d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2160, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}