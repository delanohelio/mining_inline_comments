{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY1MDA2ODY3", "number": 5522, "title": "More fixes", "bodyText": "Closes #5513\nCloses #5498\nCloses #\nChanges proposed in this pull request:\n\nFixes worker not recognizing item he needs (async)\nFixes Crafterworker with empty fuel setup crash\n\n\nReview please", "createdAt": "2020-08-08T08:56:13Z", "url": "https://github.com/ldtteam/minecolonies/pull/5522", "merged": true, "mergeCommit": {"oid": "07f50d3117a8010fd1aefc325e216b8d70b0200b"}, "closed": true, "closedAt": "2020-08-08T11:11:22Z", "author": {"login": "Raycoms"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc81HMjAH2gAyNDY1MDA2ODY3OmNiMTc1NTg1MjYyMjk5MDFkM2I2NTlkMjc4YjM1NGM5MWEyODA3ZjA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc82fg5AFqTQ2Mzc5NDU3NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "cb17558526229901d3b659d278b354c91a2807f0", "author": {"user": {"login": "Raycoms", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/cb17558526229901d3b659d278b354c91a2807f0", "committedDate": "2020-08-08T08:54:22Z", "message": "fix #5498"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7125e84cae2a36f6fdfed74ae763cfe9032092ad", "author": {"user": {"login": "Raycoms", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/7125e84cae2a36f6fdfed74ae763cfe9032092ad", "committedDate": "2020-08-08T08:54:38Z", "message": "fix #5513"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1e44907000d6c771cb6cd7b299baa1a29afd2d29", "author": {"user": {"login": "Raycoms", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/1e44907000d6c771cb6cd7b299baa1a29afd2d29", "committedDate": "2020-08-08T09:32:04Z", "message": "fix #5515"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYzNzkyMTk5", "url": "https://github.com/ldtteam/minecolonies/pull/5522#pullrequestreview-463792199", "createdAt": "2020-08-08T09:41:38Z", "commit": {"oid": "1e44907000d6c771cb6cd7b299baa1a29afd2d29"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOFQwOTo0MTozOFrOG9xaoQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOFQwOTo0MTozOFrOG9xaoQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzQyNTk1Mw==", "bodyText": "save the value, you're re-executing the very same below", "url": "https://github.com/ldtteam/minecolonies/pull/5522#discussion_r467425953", "createdAt": "2020-08-08T09:41:38Z", "author": {"login": "someaddons"}, "path": "src/main/java/com/minecolonies/coremod/entity/ai/basic/AbstractEntityAIStructureWithWorkOrder.java", "diffHunk": "@@ -178,7 +178,8 @@ private void requestMaterialsState()\n             final AbstractBuildingStructureBuilder buildingWorker = getOwnBuilding();\n             job.getWorkOrder().setRequested(true);\n \n-            if (job.getWorkOrder().getAmountOfRes() == 0)\n+            if (job.getWorkOrder().getAmountOfRes() == 0 || buildingWorker.getNeededResources().values().stream()\n+                                                              .mapToInt(ItemStorage::getAmount).sum() > job.getWorkOrder().getAmountOfRes())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1e44907000d6c771cb6cd7b299baa1a29afd2d29"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "489886973307c5881c313f9f1ee1ca0bd7404ce6", "author": {"user": {"login": "Raycoms", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/489886973307c5881c313f9f1ee1ca0bd7404ce6", "committedDate": "2020-08-08T09:52:47Z", "message": "fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4859262d20d11ba823756702bcf17d7ecfecb0d4", "author": {"user": {"login": "Raycoms", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/4859262d20d11ba823756702bcf17d7ecfecb0d4", "committedDate": "2020-08-08T09:54:25Z", "message": "adjust to review"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYzNzk0NTc1", "url": "https://github.com/ldtteam/minecolonies/pull/5522#pullrequestreview-463794575", "createdAt": "2020-08-08T10:30:50Z", "commit": {"oid": "4859262d20d11ba823756702bcf17d7ecfecb0d4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2048, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}