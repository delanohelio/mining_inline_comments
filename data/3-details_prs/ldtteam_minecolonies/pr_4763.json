{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA4OTgwNjM4", "number": 4763, "title": "Setup sound datagen", "bodyText": "Changes proposed in this pull request:\n\nGenerates the sounds\nGenerate loottable (fix the glassblower one).\n\n\nReview please", "createdAt": "2020-04-25T22:37:16Z", "url": "https://github.com/ldtteam/minecolonies/pull/4763", "merged": true, "mergeCommit": {"oid": "25e8098e5d2f05acebb006e11253f6e86384dcba"}, "closed": true, "closedAt": "2020-04-26T08:47:52Z", "author": {"login": "Raycoms"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcbN528AH2gAyNDA4OTgwNjM4OmVlYWMxOWVhZDJkMDhhYzVjMDQyOTRkYmQ2MjQ1Y2UxM2M1Yjk3ZGI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcbWrbXgH2gAyNDA4OTgwNjM4OmE2NWQyNDhiMjE0MjI3ZWVjMTFiNzkzMTM3YWVlODJlOTMwNmVkMWY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "eeac19ead2d08ac5c04294dbd6245ce13c5b97db", "author": {"user": {"login": "Raycoms", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/eeac19ead2d08ac5c04294dbd6245ce13c5b97db", "committedDate": "2020-04-25T22:34:00Z", "message": "Setup sound datagen"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAwNDM3NzQw", "url": "https://github.com/ldtteam/minecolonies/pull/4763#pullrequestreview-400437740", "createdAt": "2020-04-25T22:42:40Z", "commit": {"oid": "eeac19ead2d08ac5c04294dbd6245ce13c5b97db"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNVQyMjo0Mjo0MVrOGL7WmA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNVQyMjo0Mjo0MVrOGL7WmA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTE1OTk2MA==", "bodyText": "var name^^", "url": "https://github.com/ldtteam/minecolonies/pull/4763#discussion_r415159960", "createdAt": "2020-04-25T22:42:41Z", "author": {"login": "someaddons"}, "path": "src/main/java/com/minecolonies/coremod/generation/defaults/DefaultSoundProvider.java", "diffHunk": "@@ -0,0 +1,84 @@\n+package com.minecolonies.coremod.generation.defaults;\n+\n+import com.google.common.collect.ImmutableList;\n+import com.ldtteam.datagenerators.sounds.SoundsJson;\n+import com.minecolonies.api.colony.jobs.registry.IJobRegistry;\n+import com.minecolonies.api.colony.jobs.registry.JobEntry;\n+import com.minecolonies.api.sounds.EventType;\n+import com.minecolonies.api.util.constant.Constants;\n+import com.minecolonies.coremod.generation.DataGeneratorConstants;\n+import net.minecraft.data.DataGenerator;\n+import net.minecraft.data.DirectoryCache;\n+import net.minecraft.data.IDataProvider;\n+import org.jetbrains.annotations.NotNull;\n+\n+import java.io.IOException;\n+import java.nio.file.Path;\n+import java.util.*;\n+\n+public class DefaultSoundProvider implements IDataProvider\n+{\n+\n+    private final DataGenerator generator;\n+\n+    public DefaultSoundProvider(final DataGenerator generator)\n+    {\n+        this.generator = generator;\n+    }\n+\n+    @Override\n+    public void act(@NotNull final DirectoryCache cache) throws IOException\n+    {\n+        final Map<String[], List<String>> map = new LinkedHashMap<>();\n+\n+        final List<String> defaultSounds = new ArrayList<>();\n+        defaultSounds.add(\"minecolonies:mob/citizen/male/say1\");\n+        defaultSounds.add(\"minecolonies:mob/citizen/male/say2\");\n+        defaultSounds.add(\"minecolonies:mob/citizen/male/say3\");\n+\n+        final List<String> childSounds = new ArrayList<>();\n+        childSounds.add(\"minecolonies:mob/citizen/child/laugh1\");\n+        childSounds.add(\"minecolonies:mob/citizen/child/laugh2\");\n+\n+        for (final JobEntry job : IJobRegistry.getInstance().getValues())\n+        {\n+            if (job.getRegistryName().getNamespace().equals(Constants.MOD_ID) && !job.getRegistryName().getPath().equals(\"placeholder\"))\n+            {\n+                for (final EventType soundEvents : EventType.values())\n+                {\n+                    map.put(new String[]{\"mob.\" + job.getRegistryName().getPath() + \".male.\" + soundEvents.name().toLowerCase(Locale.US), \"neutral\"}, defaultSounds);\n+                    map.put(new String[]{\"mob.\" + job.getRegistryName().getPath() + \".female.\" + soundEvents.name().toLowerCase(Locale.US), \"neutral\"}, defaultSounds);\n+                }\n+            }\n+        }\n+\n+        for (final EventType soundEvents : EventType.values())\n+        {\n+            map.put(new String[]{\"mob.citizen.male.\" + soundEvents.name().toLowerCase(Locale.US), \"neutral\"}, defaultSounds);\n+            map.put(new String[]{\"mob.citizen.female.\" + soundEvents.name().toLowerCase(Locale.US), \"neutral\"}, defaultSounds);\n+        }\n+\n+        for (final EventType soundEvents : EventType.values())\n+        {\n+            map.put(new String[]{\"mob.child.male.\" + soundEvents.name().toLowerCase(Locale.US), \"neutral\"}, defaultSounds);\n+            map.put(new String[]{\"mob.child.female.\" + soundEvents.name().toLowerCase(Locale.US), \"neutral\"}, defaultSounds);\n+        }\n+\n+        map.put(new String[]{\"mob.barbarian.death\", \"hostile\"}, ImmutableList.of(\"minecolonies:mob/barbarian/death\"));\n+        map.put(new String[]{\"mob.barbarian.say\", \"hostile\"}, ImmutableList.of(\"minecolonies:mob/barbarian/say\"));\n+        map.put(new String[]{\"mob.barbarian.hurt\", \"hostile\"}, ImmutableList.of(\"minecolonies:mob/barbarian/hurt1, minecolonies:mob/barbarian/hurt2, minecolonies:mob/barbarian/hurt3, minecolonies:mob/barbarian/hurt4\"));\n+\n+        map.put(new String[]{\"mob.citizen.snore\", \"neutral\"}, ImmutableList.of(\"minecolonies:mob/citizen/snore\"));\n+\n+        final SoundsJson lootTableJson = new SoundsJson(map);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eeac19ead2d08ac5c04294dbd6245ce13c5b97db"}, "originalPosition": 73}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAwNDM3NzY2", "url": "https://github.com/ldtteam/minecolonies/pull/4763#pullrequestreview-400437766", "createdAt": "2020-04-25T22:43:08Z", "commit": {"oid": "eeac19ead2d08ac5c04294dbd6245ce13c5b97db"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNVQyMjo0MzowOFrOGL7W6w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNVQyMjo0MzowOFrOGL7W6w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTE2MDA0Mw==", "bodyText": "here too", "url": "https://github.com/ldtteam/minecolonies/pull/4763#discussion_r415160043", "createdAt": "2020-04-25T22:43:08Z", "author": {"login": "someaddons"}, "path": "src/main/java/com/minecolonies/coremod/generation/defaults/DefaultSoundProvider.java", "diffHunk": "@@ -0,0 +1,84 @@\n+package com.minecolonies.coremod.generation.defaults;\n+\n+import com.google.common.collect.ImmutableList;\n+import com.ldtteam.datagenerators.sounds.SoundsJson;\n+import com.minecolonies.api.colony.jobs.registry.IJobRegistry;\n+import com.minecolonies.api.colony.jobs.registry.JobEntry;\n+import com.minecolonies.api.sounds.EventType;\n+import com.minecolonies.api.util.constant.Constants;\n+import com.minecolonies.coremod.generation.DataGeneratorConstants;\n+import net.minecraft.data.DataGenerator;\n+import net.minecraft.data.DirectoryCache;\n+import net.minecraft.data.IDataProvider;\n+import org.jetbrains.annotations.NotNull;\n+\n+import java.io.IOException;\n+import java.nio.file.Path;\n+import java.util.*;\n+\n+public class DefaultSoundProvider implements IDataProvider\n+{\n+\n+    private final DataGenerator generator;\n+\n+    public DefaultSoundProvider(final DataGenerator generator)\n+    {\n+        this.generator = generator;\n+    }\n+\n+    @Override\n+    public void act(@NotNull final DirectoryCache cache) throws IOException\n+    {\n+        final Map<String[], List<String>> map = new LinkedHashMap<>();\n+\n+        final List<String> defaultSounds = new ArrayList<>();\n+        defaultSounds.add(\"minecolonies:mob/citizen/male/say1\");\n+        defaultSounds.add(\"minecolonies:mob/citizen/male/say2\");\n+        defaultSounds.add(\"minecolonies:mob/citizen/male/say3\");\n+\n+        final List<String> childSounds = new ArrayList<>();\n+        childSounds.add(\"minecolonies:mob/citizen/child/laugh1\");\n+        childSounds.add(\"minecolonies:mob/citizen/child/laugh2\");\n+\n+        for (final JobEntry job : IJobRegistry.getInstance().getValues())\n+        {\n+            if (job.getRegistryName().getNamespace().equals(Constants.MOD_ID) && !job.getRegistryName().getPath().equals(\"placeholder\"))\n+            {\n+                for (final EventType soundEvents : EventType.values())\n+                {\n+                    map.put(new String[]{\"mob.\" + job.getRegistryName().getPath() + \".male.\" + soundEvents.name().toLowerCase(Locale.US), \"neutral\"}, defaultSounds);\n+                    map.put(new String[]{\"mob.\" + job.getRegistryName().getPath() + \".female.\" + soundEvents.name().toLowerCase(Locale.US), \"neutral\"}, defaultSounds);\n+                }\n+            }\n+        }\n+\n+        for (final EventType soundEvents : EventType.values())\n+        {\n+            map.put(new String[]{\"mob.citizen.male.\" + soundEvents.name().toLowerCase(Locale.US), \"neutral\"}, defaultSounds);\n+            map.put(new String[]{\"mob.citizen.female.\" + soundEvents.name().toLowerCase(Locale.US), \"neutral\"}, defaultSounds);\n+        }\n+\n+        for (final EventType soundEvents : EventType.values())\n+        {\n+            map.put(new String[]{\"mob.child.male.\" + soundEvents.name().toLowerCase(Locale.US), \"neutral\"}, defaultSounds);\n+            map.put(new String[]{\"mob.child.female.\" + soundEvents.name().toLowerCase(Locale.US), \"neutral\"}, defaultSounds);\n+        }\n+\n+        map.put(new String[]{\"mob.barbarian.death\", \"hostile\"}, ImmutableList.of(\"minecolonies:mob/barbarian/death\"));\n+        map.put(new String[]{\"mob.barbarian.say\", \"hostile\"}, ImmutableList.of(\"minecolonies:mob/barbarian/say\"));\n+        map.put(new String[]{\"mob.barbarian.hurt\", \"hostile\"}, ImmutableList.of(\"minecolonies:mob/barbarian/hurt1, minecolonies:mob/barbarian/hurt2, minecolonies:mob/barbarian/hurt3, minecolonies:mob/barbarian/hurt4\"));\n+\n+        map.put(new String[]{\"mob.citizen.snore\", \"neutral\"}, ImmutableList.of(\"minecolonies:mob/citizen/snore\"));\n+\n+        final SoundsJson lootTableJson = new SoundsJson(map);\n+        final Path savePath = generator.getOutputFolder().resolve(DataGeneratorConstants.ASSETS_DIR).resolve(\"sounds.json\");\n+        IDataProvider.save(DataGeneratorConstants.GSON, cache, lootTableJson.serialize(), savePath);\n+    }\n+\n+    @NotNull\n+    @Override\n+    public String getName()\n+    {\n+        return \"Default Block Loot Table Provider\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eeac19ead2d08ac5c04294dbd6245ce13c5b97db"}, "originalPosition": 82}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dbf5323cba9f8eff8e8c0656820be70eaac35ada", "author": {"user": {"login": "Raycoms", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/dbf5323cba9f8eff8e8c0656820be70eaac35ada", "committedDate": "2020-04-25T22:46:01Z", "message": "fix sound file"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "87e692024b69c31b3ac7fa079dddd16079d3b8ec", "author": {"user": {"login": "Raycoms", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/87e692024b69c31b3ac7fa079dddd16079d3b8ec", "committedDate": "2020-04-25T22:47:35Z", "message": "fix var names"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eb08107456993f80337527a5587ba4889fc6d936", "author": {"user": {"login": "Raycoms", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/eb08107456993f80337527a5587ba4889fc6d936", "committedDate": "2020-04-25T22:48:28Z", "message": "add those two too"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAwNDUxNDcz", "url": "https://github.com/ldtteam/minecolonies/pull/4763#pullrequestreview-400451473", "createdAt": "2020-04-26T02:51:34Z", "commit": {"oid": "eb08107456993f80337527a5587ba4889fc6d936"}, "state": "DISMISSED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNlQwMjo1MTozNFrOGL9ogQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNlQwMjo1MTozNFrOGL9ogQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTE5NzMxMw==", "bodyText": "can you double check that the enchanter loot_table is still there?", "url": "https://github.com/ldtteam/minecolonies/pull/4763#discussion_r415197313", "createdAt": "2020-04-26T02:51:34Z", "author": {"login": "Asherslab"}, "path": "src/main/generated/resources/data/minecolonies/loot_tables/blocks/blockhutglassblower.json", "diffHunk": "@@ -11,7 +11,7 @@\n       \"entries\": [\n         {\n           \"type\": \"minecraft:item\",\n-          \"name\": \"minecolonies:blockhutenchanter\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eb08107456993f80337527a5587ba4889fc6d936"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAwNDcyMDg2", "url": "https://github.com/ldtteam/minecolonies/pull/4763#pullrequestreview-400472086", "createdAt": "2020-04-26T07:55:50Z", "commit": {"oid": "eb08107456993f80337527a5587ba4889fc6d936"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fe1f4670c91a7d51e7a05182ffe2b037b3c3dc1f", "author": {"user": {"login": "Raycoms", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/fe1f4670c91a7d51e7a05182ffe2b037b3c3dc1f", "committedDate": "2020-04-26T08:41:49Z", "message": "add patreon name"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a65d248b214227eec11b793137aee82e9306ed1f", "author": {"user": {"login": "Raycoms", "name": null}}, "url": "https://github.com/ldtteam/minecolonies/commit/a65d248b214227eec11b793137aee82e9306ed1f", "committedDate": "2020-04-26T08:47:23Z", "message": "fix loottable provider"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2207, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}