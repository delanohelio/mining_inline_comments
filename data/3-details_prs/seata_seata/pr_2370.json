{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg0ODYwODQ1", "number": 2370, "title": "feature: failureHandler implement can be read from the container", "bodyText": "\u2160. Describe what this PR did\nFailureHandler implement can be read from the container\n\u2161. Does this pull request fix one issue?\n\n#2353\n\u2162. Why don't you add test cases (unit test/integration test)?\n\u2163. Describe how to verify it\n\u2164. Special notes for reviews", "createdAt": "2020-03-06T14:50:21Z", "url": "https://github.com/seata/seata/pull/2370", "merged": true, "mergeCommit": {"oid": "4f0dc0041224f8af35d34f71d20ffc01ad9b74ee"}, "closed": true, "closedAt": "2020-03-25T08:53:20Z", "author": {"login": "ph3636"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcLBSI5AH2gAyMzg0ODYwODQ1Ojc4M2Q3MTMxMGFmMmRmNDhmMjYzOTcwNTViNzBjN2NmMzlkYjZkYzc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcRDWvegH2gAyMzg0ODYwODQ1OjEyODljMWFlN2Q4OWE5ZDA3N2ViOTA2OTdhODc5NGQ1YTllYjc4ODI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "783d71310af2df48f26397055b70c7cf39db6dc7", "author": {"user": {"login": "ph3636", "name": null}}, "url": "https://github.com/seata/seata/commit/783d71310af2df48f26397055b70c7cf39db6dc7", "committedDate": "2020-03-06T14:48:58Z", "message": "FailureHandler implement can be read from the container"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcwNzIzNTM0", "url": "https://github.com/seata/seata/pull/2370#pullrequestreview-370723534", "createdAt": "2020-03-07T05:10:47Z", "commit": {"oid": "783d71310af2df48f26397055b70c7cf39db6dc7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wN1QwNToxMDo0N1rOFzMqKg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wN1QwNToxMDo0N1rOFzMqKg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTIyOTA5OA==", "bodyText": "Test failed, custom FailureHandler implementation has not yet been instantiated.", "url": "https://github.com/seata/seata/pull/2370#discussion_r389229098", "createdAt": "2020-03-07T05:10:47Z", "author": {"login": "zjinlei"}, "path": "spring/src/main/java/io/seata/spring/annotation/GlobalTransactionScanner.java", "diffHunk": "@@ -287,6 +283,17 @@ public void afterPropertiesSet() {\n         }\n         initClient();\n \n+        setCustomFailureHandler();\n+    }\n+\n+    private void setCustomFailureHandler() {\n+        if (failureHandlerHook == null) {\n+            try {\n+                failureHandlerHook = applicationContext.getBean(FailureHandler.class);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "783d71310af2df48f26397055b70c7cf39db6dc7"}, "originalPosition": 62}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d9b05c9b150cad31728d01585d9f652ca93636c6", "author": {"user": {"login": "zjinlei", "name": null}}, "url": "https://github.com/seata/seata/commit/d9b05c9b150cad31728d01585d9f652ca93636c6", "committedDate": "2020-03-07T12:10:50Z", "message": "Merge branch 'develop' into CustomFailureHandler"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcwNzQ3MTMz", "url": "https://github.com/seata/seata/pull/2370#pullrequestreview-370747133", "createdAt": "2020-03-07T14:35:55Z", "commit": {"oid": "d9b05c9b150cad31728d01585d9f652ca93636c6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcyNDkzNDM3", "url": "https://github.com/seata/seata/pull/2370#pullrequestreview-372493437", "createdAt": "2020-03-11T06:04:07Z", "commit": {"oid": "d9b05c9b150cad31728d01585d9f652ca93636c6"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c77dcfab80bdd25bba1fc20638073b872d348dd9", "author": {"user": {"login": "ph3636", "name": null}}, "url": "https://github.com/seata/seata/commit/c77dcfab80bdd25bba1fc20638073b872d348dd9", "committedDate": "2020-03-11T10:26:31Z", "message": "FailureHandler implement can be read from the container"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b15b126c16f6377e2b56178682714a02b367b48f", "author": {"user": {"login": "ph3636", "name": null}}, "url": "https://github.com/seata/seata/commit/b15b126c16f6377e2b56178682714a02b367b48f", "committedDate": "2020-03-11T10:26:38Z", "message": "Merge branch 'develop' into CustomFailureHandler"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5f46aabee24adbcd1998141df9843430c9e4b2e2", "author": {"user": {"login": "ph3636", "name": null}}, "url": "https://github.com/seata/seata/commit/5f46aabee24adbcd1998141df9843430c9e4b2e2", "committedDate": "2020-03-11T10:29:26Z", "message": "add final"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d6bb5ca8dba4ee272e86c1d67868f7b830167de3", "author": {"user": {"login": "ph3636", "name": null}}, "url": "https://github.com/seata/seata/commit/d6bb5ca8dba4ee272e86c1d67868f7b830167de3", "committedDate": "2020-03-11T10:29:43Z", "message": "Merge remote-tracking branch 'origin/CustomFailureHandler' into CustomFailureHandler"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1e56c4edc2fd4fbf1f520a50c263dedef016fe4b", "author": {"user": {"login": "zjinlei", "name": null}}, "url": "https://github.com/seata/seata/commit/1e56c4edc2fd4fbf1f520a50c263dedef016fe4b", "committedDate": "2020-03-12T17:07:19Z", "message": "Merge branch 'develop' into CustomFailureHandler"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7341af3a3a37d54fac8d8b5742887d3640341e69", "author": {"user": {"login": "zjinlei", "name": null}}, "url": "https://github.com/seata/seata/commit/7341af3a3a37d54fac8d8b5742887d3640341e69", "committedDate": "2020-03-15T16:12:33Z", "message": "Merge branch 'develop' into CustomFailureHandler"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgwOTQyOTUw", "url": "https://github.com/seata/seata/pull/2370#pullrequestreview-380942950", "createdAt": "2020-03-25T08:37:13Z", "commit": {"oid": "7341af3a3a37d54fac8d8b5742887d3640341e69"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1289c1ae7d89a9d077eb90697a8794d5a9eb7882", "author": {"user": {"login": "slievrly", "name": "jimin"}}, "url": "https://github.com/seata/seata/commit/1289c1ae7d89a9d077eb90697a8794d5a9eb7882", "committedDate": "2020-03-25T08:37:21Z", "message": "Merge branch 'develop' into CustomFailureHandler"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4064, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}