{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI3OTAyNzEy", "number": 3309, "title": "bugfix: Saga statemachine definition json cannot enable jackson parser, and when no choice matched in choice state will throw NPE", "bodyText": "\u2160. Describe what this PR did\nfixbug: Saga statemachine definition json cannot enable jackson parser,\nfixbug: when no choice matched in choice state will throw NPE\n\u2161. Does this pull request fix one issue?\nfixes #3307\nfixes #3308", "createdAt": "2020-11-26T08:10:14Z", "url": "https://github.com/seata/seata/pull/3309", "merged": true, "mergeCommit": {"oid": "3530aa0685f55d0b1030b9399e9ac500f1b9b631"}, "closed": true, "closedAt": "2020-12-08T05:24:47Z", "author": {"login": "long187"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdgKYV3gH2gAyNTI3OTAyNzEyOmM4OWQ2M2RhNWU5NTc3OWNkMTM3YjAwMTYxNzRhMzFmMmY3YjYzNTc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdjjaengFqTU0NTcyMjM0OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c89d63da5e95779cd137b0016174a31f2f7b6357", "author": {"user": {"login": "long187", "name": "leo"}}, "url": "https://github.com/seata/seata/commit/c89d63da5e95779cd137b0016174a31f2f7b6357", "committedDate": "2020-11-26T03:28:27Z", "message": "fix saga statemachine json cannot enable jackson parser"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f37447074792128b827880887ac3c7f8123dbb5f", "author": {"user": {"login": "long187", "name": "leo"}}, "url": "https://github.com/seata/seata/commit/f37447074792128b827880887ac3c7f8123dbb5f", "committedDate": "2020-11-26T07:29:09Z", "message": "fix saga when no choice matched throw NPE bug"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM5MTAxOTA2", "url": "https://github.com/seata/seata/pull/3309#pullrequestreview-539101906", "createdAt": "2020-11-26T08:47:43Z", "commit": {"oid": "f37447074792128b827880887ac3c7f8123dbb5f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNlQwODo0Nzo0M1rOH6RNZQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNlQwODo0Nzo0M1rOH6RNZQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDg2MTQxMw==", "bodyText": "Useless code?", "url": "https://github.com/seata/seata/pull/3309#discussion_r530861413", "createdAt": "2020-11-26T08:47:43Z", "author": {"login": "wangliang181230"}, "path": "test/src/test/java/io/seata/saga/engine/db/StateMachineDBTests.java", "diffHunk": "@@ -107,6 +107,26 @@ public void testSimpleStateMachineWithChoice() {\n         System.out.println(\"====== cost :\" + cost);\n     }\n \n+    @Test\n+    public void testSimpleStateMachineWithChoiceNoDefault() {\n+\n+        long start = System.currentTimeMillis();\n+\n+        Map<String, Object> paramMap = new HashMap<>();\n+        paramMap.put(\"a\", 3);\n+\n+        String stateMachineName = \"simpleChoiceNoDefaultTestStateMachine\";\n+\n+        try {\n+            stateMachineEngine.start(stateMachineName, null, paramMap);\n+        } catch (EngineExecutionException e) {\n+            e.printStackTrace(System.out);\n+            Assertions.assertNotNull(e);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f37447074792128b827880887ac3c7f8123dbb5f"}, "originalPosition": 18}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6a6bf6a072ef6c7cffdfdc99d71845a92bca7fd6", "author": {"user": {"login": "jsbxyyx", "name": "jsbxyyx"}}, "url": "https://github.com/seata/seata/commit/6a6bf6a072ef6c7cffdfdc99d71845a92bca7fd6", "committedDate": "2020-11-26T10:46:37Z", "message": "Merge branch 'develop' into fix_saga_somebug"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "371d5c9ce48ebb6400ca7b32eee7c2d44242b2ec", "author": {"user": {"login": "long187", "name": "leo"}}, "url": "https://github.com/seata/seata/commit/371d5c9ce48ebb6400ca7b32eee7c2d44242b2ec", "committedDate": "2020-11-26T11:38:09Z", "message": "fix saga when no choice matched throw NPE bug testcase"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e4e35bbbe571eff4513d9d63c1ccbe3d4b8361a6", "author": {"user": {"login": "long187", "name": "leo"}}, "url": "https://github.com/seata/seata/commit/e4e35bbbe571eff4513d9d63c1ccbe3d4b8361a6", "committedDate": "2020-11-26T11:38:22Z", "message": "Merge branch 'fix_saga_somebug' of https://github.com/long187/seata into fix_saga_somebug"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "60ebe16a43333412acb53bc1a2fd2c158c1900fe", "author": {"user": {"login": "long187", "name": "leo"}}, "url": "https://github.com/seata/seata/commit/60ebe16a43333412acb53bc1a2fd2c158c1900fe", "committedDate": "2020-11-26T11:40:00Z", "message": "fix saga when no choice matched throw NPE bug testcase"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQwNDYyMjMy", "url": "https://github.com/seata/seata/pull/3309#pullrequestreview-540462232", "createdAt": "2020-11-29T09:32:57Z", "commit": {"oid": "60ebe16a43333412acb53bc1a2fd2c158c1900fe"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yOVQwOTozMjo1N1rOH7h0Mw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yOVQwOTozMjo1N1rOH7h0Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjE4MjA2Nw==", "bodyText": "\u6784\u9020\u65b9\u6cd5\u662f\u4e0d\u662f\u5e94\u8be5\u653e\u5230\u5b57\u6bb5\u5b9a\u4e49\u540e\u9762\uff1f", "url": "https://github.com/seata/seata/pull/3309#discussion_r532182067", "createdAt": "2020-11-29T09:32:57Z", "author": {"login": "caohdgege"}, "path": "saga/seata-saga-statelang/src/main/java/io/seata/saga/statelang/parser/impl/StateMachineParserImpl.java", "diffHunk": "@@ -42,6 +42,12 @@\n \n     private static final Logger LOGGER = LoggerFactory.getLogger(StateMachineParserImpl.class);\n \n+    public StateMachineParserImpl(String jsonParserName) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "60ebe16a43333412acb53bc1a2fd2c158c1900fe"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c3d28bc2278721d90c520564181f9ca67f283175", "author": {"user": {"login": "long187", "name": "leo"}}, "url": "https://github.com/seata/seata/commit/c3d28bc2278721d90c520564181f9ca67f283175", "committedDate": "2020-11-30T03:07:33Z", "message": "Move the StateMachineParserImpl constructor to the back of the property"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQwNTc3MjQ5", "url": "https://github.com/seata/seata/pull/3309#pullrequestreview-540577249", "createdAt": "2020-11-30T03:23:29Z", "commit": {"oid": "c3d28bc2278721d90c520564181f9ca67f283175"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "55a9609f61dc9be6cb2c405962b63ce425dfbd90", "author": {"user": {"login": "long187", "name": "leo"}}, "url": "https://github.com/seata/seata/commit/55a9609f61dc9be6cb2c405962b63ce425dfbd90", "committedDate": "2020-12-01T09:40:04Z", "message": "skipAndForward method add arg replaceParams"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ1NzIyMzQ5", "url": "https://github.com/seata/seata/pull/3309#pullrequestreview-545722349", "createdAt": "2020-12-06T16:20:11Z", "commit": {"oid": "55a9609f61dc9be6cb2c405962b63ce425dfbd90"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3512, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}