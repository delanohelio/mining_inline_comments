{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMwNjc0MDAy", "number": 2777, "title": "bugfix: fix can't rollback when set rollback retry count was zero.", "bodyText": "\u2160. Describe what this PR did\nfix could not rollback when set rollback retry count was zero.\n\u2161. Does this pull request fix one issue?\n\n\u2162. Why don't you add test cases (unit test/integration test)?\n\u2163. Describe how to verify it\n\u2164. Special notes for reviews", "createdAt": "2020-06-08T03:52:32Z", "url": "https://github.com/seata/seata/pull/2777", "merged": true, "mergeCommit": {"oid": "cf6957b844b6ca10e91b2a8938c5a68dfcbf2331"}, "closed": true, "closedAt": "2020-06-09T03:04:02Z", "author": {"login": "l81893521"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcpIOIPgH2gAyNDMwNjc0MDAyOmRiMGY1MGE0OTdiNGNlNDhkZDY5MTAwODc3M2IwOTQyNTE5ZDU4OWM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcpbaUvAFqTQyNjc0MTk3OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "db0f50a497b4ce48dd691008773b0942519d589c", "author": {"user": {"login": "l81893521", "name": "will"}}, "url": "https://github.com/seata/seata/commit/db0f50a497b4ce48dd691008773b0942519d589c", "committedDate": "2020-06-08T03:51:39Z", "message": "fix could not rollback when set rollback retry count was zero."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "60d95ee3b4bbc4881cb7dafc819c7a4901013575", "author": {"user": {"login": "l81893521", "name": "will"}}, "url": "https://github.com/seata/seata/commit/60d95ee3b4bbc4881cb7dafc819c7a4901013575", "committedDate": "2020-06-08T04:20:51Z", "message": "Merge branch 'develop' into fix_rollback_retry_count_zero"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ee25aa5f4d5f3162fd423c18a56db86b1533088c", "author": {"user": {"login": "l81893521", "name": "will"}}, "url": "https://github.com/seata/seata/commit/ee25aa5f4d5f3162fd423c18a56db86b1533088c", "committedDate": "2020-06-08T06:06:50Z", "message": "fix could not commit when set commit retry count was zero."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "581fb806b6e3467de80812aaf3fdf28b3547270a", "author": {"user": {"login": "l81893521", "name": "will"}}, "url": "https://github.com/seata/seata/commit/581fb806b6e3467de80812aaf3fdf28b3547270a", "committedDate": "2020-06-08T06:07:09Z", "message": "Merge remote-tracking branch 'me/fix_rollback_retry_count_zero' into fix_rollback_retry_count_zero"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1OTQxMjU4", "url": "https://github.com/seata/seata/pull/2777#pullrequestreview-425941258", "createdAt": "2020-06-08T06:23:09Z", "commit": {"oid": "581fb806b6e3467de80812aaf3fdf28b3547270a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQwNjoyMzowOVrOGgQhFw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQwNjoyMzowOVrOGgQhFw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjQ3ODIzMQ==", "bodyText": "Is it better to use the default value when <=0?", "url": "https://github.com/seata/seata/pull/2777#discussion_r436478231", "createdAt": "2020-06-08T06:23:09Z", "author": {"login": "slievrly"}, "path": "tm/src/main/java/io/seata/tm/api/DefaultGlobalTransaction.java", "diffHunk": "@@ -120,7 +120,7 @@ public void commit() throws TransactionException {\n             return;\n         }\n         assertXIDNotNull();\n-        int retry = COMMIT_RETRY_COUNT;\n+        int retry = COMMIT_RETRY_COUNT <= 0 ? 1 : COMMIT_RETRY_COUNT;;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "581fb806b6e3467de80812aaf3fdf28b3547270a"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a9efaa652d666ed741350c7c2879138c9bf646e0", "author": {"user": {"login": "slievrly", "name": "jimin"}}, "url": "https://github.com/seata/seata/commit/a9efaa652d666ed741350c7c2879138c9bf646e0", "committedDate": "2020-06-08T06:23:22Z", "message": "Merge branch 'develop' into fix_rollback_retry_count_zero"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "951854f9206fde694b5ad4eaa70402b46e370678", "author": {"user": {"login": "l81893521", "name": "will"}}, "url": "https://github.com/seata/seata/commit/951854f9206fde694b5ad4eaa70402b46e370678", "committedDate": "2020-06-08T06:25:52Z", "message": "fix issue"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a1a87f814cb3c33d31a1cada03ff1dccb214581e", "author": {"user": {"login": "l81893521", "name": "will"}}, "url": "https://github.com/seata/seata/commit/a1a87f814cb3c33d31a1cada03ff1dccb214581e", "committedDate": "2020-06-08T06:26:08Z", "message": "Merge remote-tracking branch 'me/fix_rollback_retry_count_zero' into fix_rollback_retry_count_zero"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "06c93114404b1fa1545f36afa7db54cac511d29a", "author": {"user": {"login": "l81893521", "name": "will"}}, "url": "https://github.com/seata/seata/commit/06c93114404b1fa1545f36afa7db54cac511d29a", "committedDate": "2020-06-08T07:25:34Z", "message": "fix ci."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1OTk3MzQw", "url": "https://github.com/seata/seata/pull/2777#pullrequestreview-425997340", "createdAt": "2020-06-08T08:05:16Z", "commit": {"oid": "06c93114404b1fa1545f36afa7db54cac511d29a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6ff8f7ebbcd16e19c6df2d21e8e08ba7158e84ef", "author": {"user": {"login": "l81893521", "name": "will"}}, "url": "https://github.com/seata/seata/commit/6ff8f7ebbcd16e19c6df2d21e8e08ba7158e84ef", "committedDate": "2020-06-08T08:10:50Z", "message": "disable unit test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI2MDExMTU4", "url": "https://github.com/seata/seata/pull/2777#pullrequestreview-426011158", "createdAt": "2020-06-08T08:25:14Z", "commit": {"oid": "6ff8f7ebbcd16e19c6df2d21e8e08ba7158e84ef"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI2NzQxOTc4", "url": "https://github.com/seata/seata/pull/2777#pullrequestreview-426741978", "createdAt": "2020-06-09T02:13:11Z", "commit": {"oid": "6ff8f7ebbcd16e19c6df2d21e8e08ba7158e84ef"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3747, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}