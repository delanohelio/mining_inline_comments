{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkwMDg5NDEx", "number": 3134, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMVQxMzo1NDozMVrOElq42g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMVQxNDowMToyNVrOElrFqA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA3OTM1NDUwOnYy", "diffSide": "RIGHT", "path": "config/seata-config-nacos/src/main/java/io/seata/config/nacos/NacosConfiguration.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMVQxMzo1NDozMVrOHVRLSw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQwMTo1OToyM1rOHVoCbA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjA2MzU2Mw==", "bodyText": "\u8fd9\u91cc\u539f\u6765configListeners\u662f\u7a7amap\u7684\u65f6\u5019\uff0c\u4f1a\u8fd4\u56de\u4e00\u4e2a\u7a7a\u7684set\uff0c\u73b0\u5728\u8fd4\u56de\u7684\u662fnull\uff0c\u4f1a\u4e0d\u4f1a\u6709\u5f71\u54cd\uff1f", "url": "https://github.com/seata/seata/pull/3134#discussion_r492063563", "createdAt": "2020-09-21T13:54:31Z", "author": {"login": "caohdgege"}, "path": "config/seata-config-nacos/src/main/java/io/seata/config/nacos/NacosConfiguration.java", "diffHunk": "@@ -172,8 +174,9 @@ public void removeConfigListener(String dataId, ConfigurationChangeListener list\n \n     @Override\n     public Set<ConfigurationChangeListener> getConfigListeners(String dataId) {\n-        if (configListenersMap.containsKey(dataId)) {\n-            return configListenersMap.get(dataId).keySet();\n+        Map<ConfigurationChangeListener, NacosListener> configListeners = configListenersMap.get(dataId);\n+        if (configListeners != null && !configListeners.isEmpty()) {\n+            return configListeners.keySet();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1017722042941c7519dd4de58e7c621fac1d2937"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjQzODEyNA==", "bodyText": "\u4e0d\u4f1a\u6709\u5f71\u54cd\uff0c\u6709\u5224\u65ad\u8fc7\u7a7a\u503c\u7684\uff0c\u53d6\u51fa\u6765\u4e3b\u8981\u5c31\u662f\u7528\u4e8e\u5faa\u73af\u7684\u3002", "url": "https://github.com/seata/seata/pull/3134#discussion_r492438124", "createdAt": "2020-09-22T01:59:23Z", "author": {"login": "wangliang181230"}, "path": "config/seata-config-nacos/src/main/java/io/seata/config/nacos/NacosConfiguration.java", "diffHunk": "@@ -172,8 +174,9 @@ public void removeConfigListener(String dataId, ConfigurationChangeListener list\n \n     @Override\n     public Set<ConfigurationChangeListener> getConfigListeners(String dataId) {\n-        if (configListenersMap.containsKey(dataId)) {\n-            return configListenersMap.get(dataId).keySet();\n+        Map<ConfigurationChangeListener, NacosListener> configListeners = configListenersMap.get(dataId);\n+        if (configListeners != null && !configListeners.isEmpty()) {\n+            return configListeners.keySet();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjA2MzU2Mw=="}, "originalCommit": {"oid": "1017722042941c7519dd4de58e7c621fac1d2937"}, "originalPosition": 42}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA3OTM4NzI4OnYy", "diffSide": "RIGHT", "path": "config/seata-config-zk/src/main/java/io/seata/config/zk/ZookeeperConfiguration.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMVQxNDowMToyNVrOHVRfdA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMVQxNDowMToyNVrOHVRfdA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjA2ODcyNA==", "bodyText": "\u540c\u4e0a", "url": "https://github.com/seata/seata/pull/3134#discussion_r492068724", "createdAt": "2020-09-21T14:01:25Z", "author": {"login": "caohdgege"}, "path": "config/seata-config-zk/src/main/java/io/seata/config/zk/ZookeeperConfiguration.java", "diffHunk": "@@ -210,8 +212,9 @@ public void removeConfigListener(String dataId, ConfigurationChangeListener list\n \n     @Override\n     public Set<ConfigurationChangeListener> getConfigListeners(String dataId) {\n-        if (configListenersMap.containsKey(dataId)) {\n-            return configListenersMap.get(dataId).keySet();\n+        ConcurrentMap<ConfigurationChangeListener, ZKListener> configListeners = configListenersMap.get(dataId);\n+        if (configListeners != null && !configListeners.isEmpty()) {\n+            return configListeners.keySet();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1017722042941c7519dd4de58e7c621fac1d2937"}, "originalPosition": 42}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1437, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}