{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg3NjkzNTYx", "number": 3119, "title": "bugfix: The color characters are messy when running by 'seata-server.bat'", "bodyText": "\u2160. Describe what this PR did\nbugfix: The color characters are messy when running by seata-server.bat.\nBUG\u4fee\u590d\uff1a\u5f53\u4f7f\u7528seata-server.bat\u8fd0\u884c\u65f6\uff0c\u989c\u8272\u7b26\u53f7\u53d8\u6210\u4e71\u7801\u7684\u95ee\u9898\u4fee\u590d\u3002\n\u2161. Does this pull request fix one issue?\n\nfixes #2954\n\u2162. Why don't you add test cases (unit test/integration test)?\n\u2163. Describe how to verify it\n\u2164. Special notes for reviews", "createdAt": "2020-09-16T03:11:25Z", "url": "https://github.com/seata/seata/pull/3119", "merged": true, "mergeCommit": {"oid": "772d55d912ffd03c0c8feb5e1670144b5530636c"}, "closed": true, "closedAt": "2020-09-17T05:36:32Z", "author": {"login": "wangliang181230"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdJThU0gH2gAyNDg3NjkzNTYxOmUxYmYzOTNjMTI2ZjgwNDA4ZjhjYzFhMThlNDNjOWQyMTQyOTNjZDM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdJqQNIAFqTQ5MDI1NTU4Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e1bf393c126f80408f8cc1a18e43c9d214293cd3", "author": {"user": {"login": "wangliang181230", "name": "WangLiang/\u738b\u826f"}}, "url": "https://github.com/seata/seata/commit/e1bf393c126f80408f8cc1a18e43c9d214293cd3", "committedDate": "2020-09-16T03:07:09Z", "message": "bugfix: the color character is messy when run by *.bat"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg5NDc2NzQy", "url": "https://github.com/seata/seata/pull/3119#pullrequestreview-489476742", "createdAt": "2020-09-16T10:12:52Z", "commit": {"oid": "e1bf393c126f80408f8cc1a18e43c9d214293cd3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQxMDoxMjo1MlrOHSp-ZQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQxMDoxMjo1MlrOHSp-ZQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTMyNDEzMw==", "bodyText": "wins and unix both contain -Drun.by-startup=true. How distinguish between them?", "url": "https://github.com/seata/seata/pull/3119#discussion_r489324133", "createdAt": "2020-09-16T10:12:52Z", "author": {"login": "slievrly"}, "path": "server/pom.xml", "diffHunk": "@@ -205,6 +205,8 @@\n                                     <extraArgument>-verbose:gc</extraArgument>\n                                     <!--netty-->\n                                     <extraArgument>-Dio.netty.leakDetectionLevel=advanced</extraArgument>\n+                                    <!--run by *.bat or *.sh-->\n+                                    <extraArgument>-Drun.by-startup=true</extraArgument>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e1bf393c126f80408f8cc1a18e43c9d214293cd3"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg5NDg2MjUw", "url": "https://github.com/seata/seata/pull/3119#pullrequestreview-489486250", "createdAt": "2020-09-16T10:24:49Z", "commit": {"oid": "e1bf393c126f80408f8cc1a18e43c9d214293cd3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQxMDoyNDo0OVrOHSqZyQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQxMDoyNDo0OVrOHSqZyQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTMzMTE0NQ==", "bodyText": "Boolean.parseBoolean", "url": "https://github.com/seata/seata/pull/3119#discussion_r489331145", "createdAt": "2020-09-16T10:24:49Z", "author": {"login": "slievrly"}, "path": "server/src/main/java/io/seata/server/env/ContainerHelper.java", "diffHunk": "@@ -59,6 +61,20 @@ public static boolean isRunningInContainer() {\n         return false;\n     }\n \n+    /**\n+     * Judge if application is run in windows with seata-server.bat.\n+     *\n+     * @return If application is run in windows with seata-server.bat.\n+     */\n+    public static boolean isRunningInWindowsWithBat() {\n+        if (!PlatformDependent.isWindows()) {\n+            return false;\n+        }\n+\n+        String runByStartup = System.getProperty(\"run.by-startup\");\n+        return runByStartup != null && runByStartup.equalsIgnoreCase(\"true\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e1bf393c126f80408f8cc1a18e43c9d214293cd3"}, "originalPosition": 31}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a7c651cf3f1d87846ff029df0e0361485e3c517c", "author": {"user": {"login": "wangliang181230", "name": "WangLiang/\u738b\u826f"}}, "url": "https://github.com/seata/seata/commit/a7c651cf3f1d87846ff029df0e0361485e3c517c", "committedDate": "2020-09-16T11:10:03Z", "message": "optimize jvm argument name"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkwMjQ0Mzky", "url": "https://github.com/seata/seata/pull/3119#pullrequestreview-490244392", "createdAt": "2020-09-17T05:02:53Z", "commit": {"oid": "a7c651cf3f1d87846ff029df0e0361485e3c517c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkwMjU1NTgy", "url": "https://github.com/seata/seata/pull/3119#pullrequestreview-490255582", "createdAt": "2020-09-17T05:36:16Z", "commit": {"oid": "a7c651cf3f1d87846ff029df0e0361485e3c517c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3665, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}