{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAyNDU0ODk0", "number": 2543, "title": "bugfix: ApplicationKeeper ShutdownHook signal invalid.", "bodyText": "change method keep use Condition.await\n\n\u2160. Describe what this PR did\nchange method keep use Condition.await\n\u2161. Does this pull request fix one issue?\nfixes #2542\n\u2162. Why don't you add test cases (unit test/integration test)?\n\u2163. Describe how to verify it\n\u2164. Special notes for reviews", "createdAt": "2020-04-13T03:34:15Z", "url": "https://github.com/seata/seata/pull/2543", "merged": true, "mergeCommit": {"oid": "c81614be70f1e0285afbea020a98a746a94813c9"}, "closed": true, "closedAt": "2020-04-23T01:42:27Z", "author": {"login": "qq925716471"}, "timelineItems": {"totalCount": 17, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcXGVdygH2gAyNDAyNDU0ODk0OjcyNTFmMWI0NTUxMTgxZTYzNDE0NzFjZmNiZDFlNGRkMWQ0OGQyMzk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcaSxLNgFqTM5ODcwMjI4NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "7251f1b4551181e6341471cfcbd1e4dd1d48d239", "author": {"user": {"login": "qq925716471", "name": "IORI"}}, "url": "https://github.com/seata/seata/commit/7251f1b4551181e6341471cfcbd1e4dd1d48d239", "committedDate": "2020-04-13T03:29:13Z", "message": "bugfix:#2542 \n\nchange method keep use Condition.await"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3474e92cfe6b96cbd007691f20192199aa5c5087", "author": {"user": {"login": "qq925716471", "name": "IORI"}}, "url": "https://github.com/seata/seata/commit/3474e92cfe6b96cbd007691f20192199aa5c5087", "committedDate": "2020-04-13T12:03:04Z", "message": "Merge branch 'develop' into develop"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f11a19d9e6fa35d6d63a4c20c6ac34b9b9398313", "author": {"user": {"login": "qq925716471", "name": "IORI"}}, "url": "https://github.com/seata/seata/commit/f11a19d9e6fa35d6d63a4c20c6ac34b9b9398313", "committedDate": "2020-04-14T02:08:23Z", "message": "Merge branch 'develop' into develop"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkyNTgzNzI5", "url": "https://github.com/seata/seata/pull/2543#pullrequestreview-392583729", "createdAt": "2020-04-14T03:43:33Z", "commit": {"oid": "f11a19d9e6fa35d6d63a4c20c6ac34b9b9398313"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQwMzo0MzozM1rOGE9GLA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQwMzo0MzozM1rOGE9GLA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzg0ODQ5Mg==", "bodyText": "use log print out.", "url": "https://github.com/seata/seata/pull/2543#discussion_r407848492", "createdAt": "2020-04-14T03:43:33Z", "author": {"login": "slievrly"}, "path": "test/src/test/java/io/seata/common/ApplicationKeeper.java", "diffHunk": "@@ -68,13 +68,14 @@ public void run() {\n      * Keep.\n      */\n     public void keep() {\n-        synchronized (LOCK) {\n-            try {\n-                LOGGER.info(\"Application is keep running ... \");\n-                LOCK.wait();\n-            } catch (InterruptedException e) {\n-                LOGGER.error(\"interrupted error\", e);\n-            }\n+        LOCK.lock();\n+        try {\n+            LOGGER.info(\"Application is keep running ... \");\n+            STOP.await();\n+        } catch (InterruptedException e) {\n+            e.printStackTrace();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f11a19d9e6fa35d6d63a4c20c6ac34b9b9398313"}, "originalPosition": 16}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "33fa1fb26a5e7100522279b035b84bd966aa3a4b", "author": {"user": {"login": "slievrly", "name": "jimin"}}, "url": "https://github.com/seata/seata/commit/33fa1fb26a5e7100522279b035b84bd966aa3a4b", "committedDate": "2020-04-14T08:36:08Z", "message": "Merge branch 'develop' into develop"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkzNjI0NzM5", "url": "https://github.com/seata/seata/pull/2543#pullrequestreview-393624739", "createdAt": "2020-04-15T09:53:29Z", "commit": {"oid": "33fa1fb26a5e7100522279b035b84bd966aa3a4b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c6d1896f57aacb704952a5bc91cbdb8bc0397994", "author": {"user": {"login": "jsbxyyx", "name": "jsbxyyx"}}, "url": "https://github.com/seata/seata/commit/c6d1896f57aacb704952a5bc91cbdb8bc0397994", "committedDate": "2020-04-16T01:13:31Z", "message": "Merge branch 'develop' into develop"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9ea451a5b4b656f2e07a9f74dcb5fae2629843cc", "author": {"user": {"login": "l81893521", "name": "will"}}, "url": "https://github.com/seata/seata/commit/9ea451a5b4b656f2e07a9f74dcb5fae2629843cc", "committedDate": "2020-04-16T11:47:57Z", "message": "Merge branch 'develop' into develop"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c2a8078621aaf977af20f9d06768832d1d01e253", "author": {"user": {"login": "qq925716471", "name": "IORI"}}, "url": "https://github.com/seata/seata/commit/c2a8078621aaf977af20f9d06768832d1d01e253", "committedDate": "2020-04-17T06:28:14Z", "message": "Use logger  to log exception\n\nUse logger  to log exception"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1e346f6c8057f13430a7469366a87f3c17a05c3d", "author": {"user": {"login": "qq925716471", "name": "IORI"}}, "url": "https://github.com/seata/seata/commit/1e346f6c8057f13430a7469366a87f3c17a05c3d", "committedDate": "2020-04-17T06:30:50Z", "message": "update log msg\n\nupdate log msg"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1ccd607d232e563ac78ed098ae0fe24b6bbefd0f", "author": {"user": {"login": "qq925716471", "name": "IORI"}}, "url": "https://github.com/seata/seata/commit/1ccd607d232e563ac78ed098ae0fe24b6bbefd0f", "committedDate": "2020-04-17T06:31:43Z", "message": "Merge branch 'develop' into develop"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "567085119ecbe07632e1286a581601d21e9fba04", "author": {"user": {"login": "jsbxyyx", "name": "jsbxyyx"}}, "url": "https://github.com/seata/seata/commit/567085119ecbe07632e1286a581601d21e9fba04", "committedDate": "2020-04-17T07:41:42Z", "message": "Merge branch 'develop' into develop"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2MTczOTk2", "url": "https://github.com/seata/seata/pull/2543#pullrequestreview-396173996", "createdAt": "2020-04-20T06:36:29Z", "commit": {"oid": "567085119ecbe07632e1286a581601d21e9fba04"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e3f35dc75b0b0098a8ad7bb941f3eb7fd0b77fb2", "author": {"user": {"login": "l81893521", "name": "will"}}, "url": "https://github.com/seata/seata/commit/e3f35dc75b0b0098a8ad7bb941f3eb7fd0b77fb2", "committedDate": "2020-04-22T01:50:36Z", "message": "Merge branch 'develop' into develop"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4824b7590b1154e4698ad9ccfa8d888d156fba2a", "author": {"user": {"login": "l81893521", "name": "will"}}, "url": "https://github.com/seata/seata/commit/4824b7590b1154e4698ad9ccfa8d888d156fba2a", "committedDate": "2020-04-22T06:11:37Z", "message": "Merge branch 'develop' into develop"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b3746475c8974e2e96ab7733967d5877b13bdec9", "author": {"user": {"login": "l81893521", "name": "will"}}, "url": "https://github.com/seata/seata/commit/b3746475c8974e2e96ab7733967d5877b13bdec9", "committedDate": "2020-04-23T01:31:35Z", "message": "Merge branch 'develop' into develop"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk4NzAyMjg1", "url": "https://github.com/seata/seata/pull/2543#pullrequestreview-398702285", "createdAt": "2020-04-23T01:40:07Z", "commit": {"oid": "b3746475c8974e2e96ab7733967d5877b13bdec9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3899, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}