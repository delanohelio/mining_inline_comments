{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ4ODIzOTY2", "number": 2887, "title": "bugfix: fix rm client receive response logic.", "bodyText": "\u2160. Describe what this PR did\nThe previous logic client side did not have onResponse logic. The TransactionMessageHandler interface has an implementation class AbstractRMHandler. The onRequest method is specifically used to handle rm\u2019s commit, rollback, and deleteUndoLog. After putting these logics in the processor, commit, rollback, and deleteUndoLog are all independent. The respective processor, the logic of onResponse is placed in ClientOnResponseProcessor, so the relevant logic of the client response is placed here, unified and centralized processing\n\u2161. Does this pull request fix one issue?\n\n\u2162. Why don't you add test cases (unit test/integration test)?\n\u2163. Describe how to verify it\n\u2164. Special notes for reviews", "createdAt": "2020-07-14T11:33:49Z", "url": "https://github.com/seata/seata/pull/2887", "merged": true, "mergeCommit": {"oid": "d9589971d434162d79df5bee8888b5ab186a9c71"}, "closed": true, "closedAt": "2020-07-14T14:04:44Z", "author": {"login": "objcoding"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc00W5YgH2gAyNDQ4ODIzOTY2OjcyNjc4ZmFkOGI5ZTJkYmExYTkyNjFkYmEwYWFjM2ViNDllY2JhZGE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc02ZAiAFqTQ0ODEyNjYxOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "72678fad8b9e2dba1a9261dba0aac3eb49ecbada", "author": {"user": {"login": "objcoding", "name": "zhangchenghui"}}, "url": "https://github.com/seata/seata/commit/72678fad8b9e2dba1a9261dba0aac3eb49ecbada", "committedDate": "2020-07-14T11:30:13Z", "message": "fix client onResponse"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4127f31f318f0a2b81cb01045ddf54d67f3668d3", "author": {"user": {"login": "objcoding", "name": "zhangchenghui"}}, "url": "https://github.com/seata/seata/commit/4127f31f318f0a2b81cb01045ddf54d67f3668d3", "committedDate": "2020-07-14T11:38:38Z", "message": "remove useless import,"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ4MDk3MjQx", "url": "https://github.com/seata/seata/pull/2887#pullrequestreview-448097241", "createdAt": "2020-07-14T13:19:00Z", "commit": {"oid": "4127f31f318f0a2b81cb01045ddf54d67f3668d3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQxMzoxOTowMVrOGxTSsA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQxMzoxOTowMVrOGxTSsA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDM0OTQ4OA==", "bodyText": "add receive response log.", "url": "https://github.com/seata/seata/pull/2887#discussion_r454349488", "createdAt": "2020-07-14T13:19:01Z", "author": {"login": "slievrly"}, "path": "rm/src/main/java/io/seata/rm/AbstractRMHandler.java", "diffHunk": "@@ -153,7 +152,6 @@ public AbstractResultMessage onRequest(AbstractMessage request, RpcContext conte\n \n     @Override\n     public void onResponse(AbstractResultMessage response, RpcContext context) {\n-        throw new ShouldNeverHappenException();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4127f31f318f0a2b81cb01045ddf54d67f3668d3"}, "originalPosition": 12}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0fbd5e2197b93fd5624b7e08493e4eff690281ad", "author": {"user": {"login": "objcoding", "name": "zhangchenghui"}}, "url": "https://github.com/seata/seata/commit/0fbd5e2197b93fd5624b7e08493e4eff690281ad", "committedDate": "2020-07-14T13:32:11Z", "message": "add receive response log."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4ac814f4b7a244d9058846db9adf45b58f63f6cc", "author": {"user": {"login": "objcoding", "name": "zhangchenghui"}}, "url": "https://github.com/seata/seata/commit/4ac814f4b7a244d9058846db9adf45b58f63f6cc", "committedDate": "2020-07-14T13:37:33Z", "message": "add receive response log."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5cc6e510fccf15ee3d6d9225c3894457244ef07f", "author": {"user": {"login": "objcoding", "name": "zhangchenghui"}}, "url": "https://github.com/seata/seata/commit/5cc6e510fccf15ee3d6d9225c3894457244ef07f", "committedDate": "2020-07-14T13:38:06Z", "message": "add receive response log."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ4MTE1MDU1", "url": "https://github.com/seata/seata/pull/2887#pullrequestreview-448115055", "createdAt": "2020-07-14T13:39:47Z", "commit": {"oid": "0fbd5e2197b93fd5624b7e08493e4eff690281ad"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQxMzozOTo0N1rOGxUH6A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQxMzozOTo0N1rOGxUH6A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDM2MzExMg==", "bodyText": "if it's normal\uff0cresponse.getMsg() is null.", "url": "https://github.com/seata/seata/pull/2887#discussion_r454363112", "createdAt": "2020-07-14T13:39:47Z", "author": {"login": "slievrly"}, "path": "rm/src/main/java/io/seata/rm/AbstractRMHandler.java", "diffHunk": "@@ -153,7 +152,7 @@ public AbstractResultMessage onRequest(AbstractMessage request, RpcContext conte\n \n     @Override\n     public void onResponse(AbstractResultMessage response, RpcContext context) {\n-        throw new ShouldNeverHappenException();\n+        LOGGER.warn(\"client received response msg [{}] from tc server, bug without any processing logic.\", response.getMsg());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0fbd5e2197b93fd5624b7e08493e4eff690281ad"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3dd2fbb1f7257f02eece5f7df69cf2d2722aaf80", "author": {"user": {"login": "objcoding", "name": "zhangchenghui"}}, "url": "https://github.com/seata/seata/commit/3dd2fbb1f7257f02eece5f7df69cf2d2722aaf80", "committedDate": "2020-07-14T13:40:12Z", "message": "add receive response log."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "249f110dd0d0b967e210158b2c0042fca27515a5", "author": {"user": {"login": "objcoding", "name": "zhangchenghui"}}, "url": "https://github.com/seata/seata/commit/249f110dd0d0b967e210158b2c0042fca27515a5", "committedDate": "2020-07-14T13:49:52Z", "message": "add receive response log."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ4MTI1NTYx", "url": "https://github.com/seata/seata/pull/2887#pullrequestreview-448125561", "createdAt": "2020-07-14T13:51:07Z", "commit": {"oid": "249f110dd0d0b967e210158b2c0042fca27515a5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ4MTI2NjE4", "url": "https://github.com/seata/seata/pull/2887#pullrequestreview-448126618", "createdAt": "2020-07-14T13:52:20Z", "commit": {"oid": "249f110dd0d0b967e210158b2c0042fca27515a5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3817, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}