{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEzNjAyMzE2", "number": 3248, "reviewThreads": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQwMjozNzozNVrOE0NtnA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0xOFQwMjoyMzowMFrOFbqbdg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIzMTg2MDc2OnYy", "diffSide": "RIGHT", "path": "seata-spring-boot-starter/src/test/java/io/seata/spring/boot/autoconfigure/PropertiesTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQwMjozNzozNVrOHr0sYg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQwMjozNzozNVrOHr0sYg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTcxNDE0Ng==", "bodyText": "is not allowed", "url": "https://github.com/seata/seata/pull/3248#discussion_r515714146", "createdAt": "2020-11-02T02:37:35Z", "author": {"login": "a364176773"}, "path": "seata-spring-boot-starter/src/test/java/io/seata/spring/boot/autoconfigure/PropertiesTest.java", "diffHunk": "@@ -36,15 +36,7 @@\n import io.seata.spring.boot.autoconfigure.properties.config.ConfigNacosProperties;\n import io.seata.spring.boot.autoconfigure.properties.config.ConfigProperties;\n import io.seata.spring.boot.autoconfigure.properties.config.ConfigZooKeeperProperties;\n-import io.seata.spring.boot.autoconfigure.properties.registry.RegistryConsulProperties;\n-import io.seata.spring.boot.autoconfigure.properties.registry.RegistryCustomProperties;\n-import io.seata.spring.boot.autoconfigure.properties.registry.RegistryEtcd3Properties;\n-import io.seata.spring.boot.autoconfigure.properties.registry.RegistryEurekaProperties;\n-import io.seata.spring.boot.autoconfigure.properties.registry.RegistryNacosProperties;\n-import io.seata.spring.boot.autoconfigure.properties.registry.RegistryProperties;\n-import io.seata.spring.boot.autoconfigure.properties.registry.RegistryRedisProperties;\n-import io.seata.spring.boot.autoconfigure.properties.registry.RegistrySofaProperties;\n-import io.seata.spring.boot.autoconfigure.properties.registry.RegistryZooKeeperProperties;\n+import io.seata.spring.boot.autoconfigure.properties.registry.*;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3cc14a0c31b534c6a502b1fa6abac363e4e2c58e"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIzMTg2MTM5OnYy", "diffSide": "RIGHT", "path": "server/src/main/resources/registry.conf", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQwMjozODowOFrOHr0svQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQwMjozODowOFrOHr0svQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTcxNDIzNw==", "bodyText": "Blank lines can be removed", "url": "https://github.com/seata/seata/pull/3248#discussion_r515714237", "createdAt": "2020-11-02T02:38:08Z", "author": {"login": "a364176773"}, "path": "server/src/main/resources/registry.conf", "diffHunk": "@@ -1,8 +1,7 @@\n registry {\n   # file \u3001nacos \u3001eureka\u3001redis\u3001zk\u3001consul\u3001etcd3\u3001sofa\n   type = \"file\"\n-  loadBalance = \"RandomLoadBalance\"\n-  loadBalanceVirtualNodes = 10\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3cc14a0c31b534c6a502b1fa6abac363e4e2c58e"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI0NTQwNzI4OnYy", "diffSide": "RIGHT", "path": "discovery/seata-discovery-core/src/main/java/io/seata/discovery/loadbalance/ConsistentHashLoadBalance.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQwNTo0MzozMVrOHt0R-A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMlQxMjo0NTo1M1rOH32vbg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzgwNDUzNg==", "bodyText": "Change this name\n\u6539\u4e00\u4e0b\u8fd9\u4e2a\u540d\u5b57", "url": "https://github.com/seata/seata/pull/3248#discussion_r517804536", "createdAt": "2020-11-05T05:43:31Z", "author": {"login": "ph3636"}, "path": "discovery/seata-discovery-core/src/main/java/io/seata/discovery/loadbalance/ConsistentHashLoadBalance.java", "diffHunk": "@@ -36,8 +35,14 @@\n @LoadLevel(name = \"ConsistentHashLoadBalance\")\n public class ConsistentHashLoadBalance extends AbstractLoadBalance {\n \n-    private static final String VIRTUAL_NODES = FILE_ROOT_REGISTRY + FILE_CONFIG_SPLIT_CHAR + \"loadBalanceVirtualNodes\";\n-    private static final int VIRTUAL_NODES_NUM = ConfigurationFactory.CURRENT_FILE_INSTANCE.getInt(VIRTUAL_NODES, VIRTUAL_NODES_DEFAULT);\n+    /**\n+     * The constant LOAD_BALANCE_TYPE.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c2c051e4e06f71d0caaf8b3182a50f1ef478d23a"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODU1MzkzMg==", "bodyText": "Change the name or delete it", "url": "https://github.com/seata/seata/pull/3248#discussion_r518553932", "createdAt": "2020-11-06T06:50:59Z", "author": {"login": "ph3636"}, "path": "discovery/seata-discovery-core/src/main/java/io/seata/discovery/loadbalance/ConsistentHashLoadBalance.java", "diffHunk": "@@ -36,8 +35,14 @@\n @LoadLevel(name = \"ConsistentHashLoadBalance\")\n public class ConsistentHashLoadBalance extends AbstractLoadBalance {\n \n-    private static final String VIRTUAL_NODES = FILE_ROOT_REGISTRY + FILE_CONFIG_SPLIT_CHAR + \"loadBalanceVirtualNodes\";\n-    private static final int VIRTUAL_NODES_NUM = ConfigurationFactory.CURRENT_FILE_INSTANCE.getInt(VIRTUAL_NODES, VIRTUAL_NODES_DEFAULT);\n+    /**\n+     * The constant LOAD_BALANCE_TYPE.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzgwNDUzNg=="}, "originalCommit": {"oid": "c2c051e4e06f71d0caaf8b3182a50f1ef478d23a"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODMzMDYwNg==", "bodyText": "\u4e00\u76f4\u4ee5\u4e3a\u6539\u4e86\uff0c\u4eca\u5929\u6838\u5bf9\u624d\u53d1\u73b0\u6ca1\u6539\u3002  \u521a\u521a\u6539\u6389\u4e86", "url": "https://github.com/seata/seata/pull/3248#discussion_r528330606", "createdAt": "2020-11-22T12:45:53Z", "author": {"login": "ls9527"}, "path": "discovery/seata-discovery-core/src/main/java/io/seata/discovery/loadbalance/ConsistentHashLoadBalance.java", "diffHunk": "@@ -36,8 +35,14 @@\n @LoadLevel(name = \"ConsistentHashLoadBalance\")\n public class ConsistentHashLoadBalance extends AbstractLoadBalance {\n \n-    private static final String VIRTUAL_NODES = FILE_ROOT_REGISTRY + FILE_CONFIG_SPLIT_CHAR + \"loadBalanceVirtualNodes\";\n-    private static final int VIRTUAL_NODES_NUM = ConfigurationFactory.CURRENT_FILE_INSTANCE.getInt(VIRTUAL_NODES, VIRTUAL_NODES_DEFAULT);\n+    /**\n+     * The constant LOAD_BALANCE_TYPE.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzgwNDUzNg=="}, "originalCommit": {"oid": "c2c051e4e06f71d0caaf8b3182a50f1ef478d23a"}, "originalPosition": 18}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI0NTQxMjg3OnYy", "diffSide": "RIGHT", "path": "script/server/config/file.properties", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQwNTo0NjoxOFrOHt0VPA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMlQxMjo0ODozMFrOH32wuA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzgwNTM3Mg==", "bodyText": "These are redundant\n\u8fd9\u4e9b\u662f\u591a\u4f59", "url": "https://github.com/seata/seata/pull/3248#discussion_r517805372", "createdAt": "2020-11-05T05:46:18Z", "author": {"login": "ph3636"}, "path": "script/server/config/file.properties", "diffHunk": "@@ -25,3 +25,5 @@ store.redis.database=0\n store.redis.minConn=1\n store.redis.maxConn=10\n store.redis.queryLimit=100\n+loadBalance.type=RandomLoadBalance\n+loadBalance.consistentHash.virtualNodes=10", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c2c051e4e06f71d0caaf8b3182a50f1ef478d23a"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODMzMDkzNg==", "bodyText": "\u591a\u4f59\u7684\u5220\u6389\u4e86", "url": "https://github.com/seata/seata/pull/3248#discussion_r528330936", "createdAt": "2020-11-22T12:48:30Z", "author": {"login": "ls9527"}, "path": "script/server/config/file.properties", "diffHunk": "@@ -25,3 +25,5 @@ store.redis.database=0\n store.redis.minConn=1\n store.redis.maxConn=10\n store.redis.queryLimit=100\n+loadBalance.type=RandomLoadBalance\n+loadBalance.consistentHash.virtualNodes=10", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzgwNTM3Mg=="}, "originalCommit": {"oid": "c2c051e4e06f71d0caaf8b3182a50f1ef478d23a"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI0NTQxMzgwOnYy", "diffSide": "RIGHT", "path": "script/server/config/file.yml", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQwNTo0Njo1MVrOHt0Vxw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQxMzo0NTo0NFrOHuD8Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzgwNTUxMQ==", "bodyText": "These are redundant\n\u8fd9\u4e9b\u662f\u591a\u4f59", "url": "https://github.com/seata/seata/pull/3248#discussion_r517805511", "createdAt": "2020-11-05T05:46:51Z", "author": {"login": "ph3636"}, "path": "script/server/config/file.yml", "diffHunk": "@@ -44,4 +44,9 @@ store:\n     minConn: 1\n     maxConn: 10\n     queryLimit: 100\n+loadBalance:\n+  type: RandomLoadBalance\n+  consistentHash:\n+    virtualNodes: 10", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c2c051e4e06f71d0caaf8b3182a50f1ef478d23a"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODA2MTExMQ==", "bodyText": "\u591a\u8c22\u5927\u795e\uff0c \u5df2\u5c06\u591a\u4f59\u7684\u90e8\u5206\u5220\u9664\u3002  \u5c06loadBalance\u7684 type \u548c  visualNodes \u533a\u5206\u5f00\u4e86\u3002", "url": "https://github.com/seata/seata/pull/3248#discussion_r518061111", "createdAt": "2020-11-05T13:45:44Z", "author": {"login": "ls9527"}, "path": "script/server/config/file.yml", "diffHunk": "@@ -44,4 +44,9 @@ store:\n     minConn: 1\n     maxConn: 10\n     queryLimit: 100\n+loadBalance:\n+  type: RandomLoadBalance\n+  consistentHash:\n+    virtualNodes: 10", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzgwNTUxMQ=="}, "originalCommit": {"oid": "c2c051e4e06f71d0caaf8b3182a50f1ef478d23a"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMxMzEzMDg5OnYy", "diffSide": "RIGHT", "path": "discovery/seata-discovery-core/src/test/resources/file.conf", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMlQxMjozOTozNlrOH32rrw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMlQxMjozOTozNlrOH32rrw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODMyOTY0Nw==", "bodyText": "unwanted file", "url": "https://github.com/seata/seata/pull/3248#discussion_r528329647", "createdAt": "2020-11-22T12:39:36Z", "author": {"login": "a364176773"}, "path": "discovery/seata-discovery-core/src/test/resources/file.conf", "diffHunk": "@@ -0,0 +1,23 @@\n+#", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "882e4eeb1d4a226b1f4581bdd617d0e9c694dca5"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMxMzEzMzA1OnYy", "diffSide": "RIGHT", "path": "script/server/config/file.conf", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMlQxMjo0MToxOFrOH32srg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMlQxMjo0MToxOFrOH32srg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODMyOTkwMg==", "bodyText": "unnecessary change", "url": "https://github.com/seata/seata/pull/3248#discussion_r528329902", "createdAt": "2020-11-22T12:41:18Z", "author": {"login": "a364176773"}, "path": "script/server/config/file.conf", "diffHunk": "@@ -49,5 +49,4 @@ store {\n     maxConn = 10\n     queryLimit = 100\n   }\n-\n-}\n+}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "882e4eeb1d4a226b1f4581bdd617d0e9c694dca5"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMxMzEzMzE5OnYy", "diffSide": "RIGHT", "path": "script/server/config/file.properties", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMlQxMjo0MToyN1rOH32svQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMlQxMjo0MToyN1rOH32svQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODMyOTkxNw==", "bodyText": "unnecessary change", "url": "https://github.com/seata/seata/pull/3248#discussion_r528329917", "createdAt": "2020-11-22T12:41:27Z", "author": {"login": "a364176773"}, "path": "script/server/config/file.properties", "diffHunk": "@@ -24,4 +24,4 @@ store.redis.password=\n store.redis.database=0\n store.redis.minConn=1\n store.redis.maxConn=10\n-store.redis.queryLimit=100\n+store.redis.queryLimit=100", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "882e4eeb1d4a226b1f4581bdd617d0e9c694dca5"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMxMzEzMzQ3OnYy", "diffSide": "RIGHT", "path": "script/server/config/file.yml", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMlQxMjo0MTozMlrOH32s2Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMlQxMjo0MTozMlrOH32s2Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODMyOTk0NQ==", "bodyText": "unnecessary change", "url": "https://github.com/seata/seata/pull/3248#discussion_r528329945", "createdAt": "2020-11-22T12:41:32Z", "author": {"login": "a364176773"}, "path": "script/server/config/file.yml", "diffHunk": "@@ -43,5 +43,4 @@ store:\n     database: 0\n     minConn: 1\n     maxConn: 10\n-    queryLimit: 100\n-\n+    queryLimit: 100", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "882e4eeb1d4a226b1f4581bdd617d0e9c694dca5"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMxMzEzNTMyOnYy", "diffSide": "RIGHT", "path": "server/src/main/resources/file.conf", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMlQxMjo0MzowMVrOH32tqg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMlQxMjo0MzowMVrOH32tqg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODMzMDE1NA==", "bodyText": "unnecessary change", "url": "https://github.com/seata/seata/pull/3248#discussion_r528330154", "createdAt": "2020-11-22T12:43:01Z", "author": {"login": "a364176773"}, "path": "server/src/main/resources/file.conf", "diffHunk": "@@ -50,4 +50,4 @@ store {\n     queryLimit = 100\n   }\n \n-}\n+}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "882e4eeb1d4a226b1f4581bdd617d0e9c694dca5"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzY0NTUxMDMwOnYy", "diffSide": "RIGHT", "path": "changes/en-us/1.5.0.md", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0xOFQwMjoyMzowMFrOInTQ-A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0xOFQwMjoyMzowMFrOInTQ-A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3ODA4MTAxNg==", "bodyText": "migrate instead of migration, migration is not a verb.", "url": "https://github.com/seata/seata/pull/3248#discussion_r578081016", "createdAt": "2021-02-18T02:23:00Z", "author": {"login": "l81893521"}, "path": "changes/en-us/1.5.0.md", "diffHunk": "@@ -59,7 +59,7 @@\n   - [[#3420](https://github.com/seata/seata/pull/3420)] optimize enumerated classes and add unit tests\t\n   - [[#3436](https://github.com/seata/seata/pull/3436)] optimize typo in SQLType class \t\n   - [[#3439](https://github.com/seata/seata/pull/3439)] adjust the order of springApplicationContextProvider\n-\n+  - [[#3248](https://github.com/seata/seata/pull/3248)] optimize the config of load-balance migration to belong the client node", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dbe8743bc4f5b845f7b5eea5f610fddc78273953"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1337, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}