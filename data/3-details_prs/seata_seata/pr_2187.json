{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYzMDY2Mzg0", "number": 2187, "title": "bugfix: fix the wrong rollback sequence caused by the same record request from different transaction branches on different servers", "bodyText": "Signed-off-by: slievrly slievrly@163.com\n\n\u2160. Describe what this PR did\nbugfix: fix the wrong rollback sequence caused by the same record request from different transaction branches on different servers\n\u2161. Does this pull request fix one issue?\n\nfix #2186\n\u2162. Why don't you add test cases (unit test/integration test)?\n\u2163. Describe how to verify it\n\u2164. Special notes for reviews", "createdAt": "2020-01-15T10:31:59Z", "url": "https://github.com/seata/seata/pull/2187", "merged": true, "mergeCommit": {"oid": "162f83ea851edff801bcdeb3f9ecd018db7e284d"}, "closed": true, "closedAt": "2020-02-03T05:52:54Z", "author": {"login": "slievrly"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb6jA6wgH2gAyMzYzMDY2Mzg0OmJkYTU3MmI2NWIwNzRhODc0MzUxZWMwZTJlM2QxN2ZhMWY5MWMyYWY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcAmEhkgH2gAyMzYzMDY2Mzg0OjliNDMyNWVkNjRiYjAzMTdjOGI5MjkyZDdjMDBmYjE1MGI5MjU4YTY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "bda572b65b074a874351ec0e2e3d17fa1f91c2af", "author": {"user": {"login": "slievrly", "name": "jimin"}}, "url": "https://github.com/seata/seata/commit/bda572b65b074a874351ec0e2e3d17fa1f91c2af", "committedDate": "2020-01-15T10:30:13Z", "message": "bugfix: fix the wrong rollback sequence caused by the same record request from different transaction branches on different servers\n\nSigned-off-by: slievrly <slievrly@163.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "782e96bd6d82ef71edea5f7187a9d4477a66cd1c", "author": {"user": {"login": "slievrly", "name": "jimin"}}, "url": "https://github.com/seata/seata/commit/782e96bd6d82ef71edea5f7187a9d4477a66cd1c", "committedDate": "2020-01-15T10:33:58Z", "message": "Merge remote-tracking branch 'upstream/develop' into samedata_diffbranch_rollback"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ0MzQ0Mzc2", "url": "https://github.com/seata/seata/pull/2187#pullrequestreview-344344376", "createdAt": "2020-01-17T03:18:02Z", "commit": {"oid": "bda572b65b074a874351ec0e2e3d17fa1f91c2af"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ2MzA1NjIz", "url": "https://github.com/seata/seata/pull/2187#pullrequestreview-346305623", "createdAt": "2020-01-22T01:52:35Z", "commit": {"oid": "bda572b65b074a874351ec0e2e3d17fa1f91c2af"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMlQwMTo1MjozNVrOFgOegg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMlQwMjoyODowMVrOFgO8Jg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTMzNTkzOA==", "bodyText": "Verified that the index has no effect on sorting.", "url": "https://github.com/seata/seata/pull/2187#discussion_r369335938", "createdAt": "2020-01-22T01:52:35Z", "author": {"login": "zjinlei"}, "path": "script/server/db/mysql.sql", "diffHunk": "@@ -31,10 +31,11 @@ CREATE TABLE IF NOT EXISTS `branch_table`\n     `status`            TINYINT,\n     `client_id`         VARCHAR(64),\n     `application_data`  VARCHAR(2000),\n-    `gmt_create`        DATETIME,\n-    `gmt_modified`      DATETIME,\n+    `gmt_create`        DATETIME(6),\n+    `gmt_modified`      DATETIME(6),\n     PRIMARY KEY (`branch_id`),\n-    KEY `idx_xid` (`xid`)\n+    KEY `idx_xid` (`xid`),\n+    KEY `idx_gmt_create` (`gmt_create`)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bda572b65b074a874351ec0e2e3d17fa1f91c2af"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTM0MzUyNg==", "bodyText": "Milliseconds is enough.\nUser upgrades may forget this, might be better to add a long type timestamp column.", "url": "https://github.com/seata/seata/pull/2187#discussion_r369343526", "createdAt": "2020-01-22T02:28:01Z", "author": {"login": "zjinlei"}, "path": "script/server/db/mysql.sql", "diffHunk": "@@ -31,10 +31,11 @@ CREATE TABLE IF NOT EXISTS `branch_table`\n     `status`            TINYINT,\n     `client_id`         VARCHAR(64),\n     `application_data`  VARCHAR(2000),\n-    `gmt_create`        DATETIME,\n-    `gmt_modified`      DATETIME,\n+    `gmt_create`        DATETIME(6),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bda572b65b074a874351ec0e2e3d17fa1f91c2af"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ2MzM4MzY0", "url": "https://github.com/seata/seata/pull/2187#pullrequestreview-346338364", "createdAt": "2020-01-22T04:20:25Z", "commit": {"oid": "bda572b65b074a874351ec0e2e3d17fa1f91c2af"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d739ca377377637b39df27e46c8c534d1003b10a", "author": {"user": {"login": "slievrly", "name": "jimin"}}, "url": "https://github.com/seata/seata/commit/d739ca377377637b39df27e46c8c534d1003b10a", "committedDate": "2020-01-22T15:47:59Z", "message": "Merge branch 'develop' into samedata_diffbranch_rollback"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bf1961d05bcb906f26fba13afd21b643e96e7b7c", "author": {"user": {"login": "slievrly", "name": "jimin"}}, "url": "https://github.com/seata/seata/commit/bf1961d05bcb906f26fba13afd21b643e96e7b7c", "committedDate": "2020-01-23T15:59:49Z", "message": "Merge branch 'develop' into samedata_diffbranch_rollback"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "35569c76fa126e5bd9a7db75a6658f3b2b065691", "author": {"user": {"login": "slievrly", "name": "jimin"}}, "url": "https://github.com/seata/seata/commit/35569c76fa126e5bd9a7db75a6658f3b2b065691", "committedDate": "2020-02-03T02:26:22Z", "message": "Merge branch 'develop' into samedata_diffbranch_rollback"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7c60ef6208200943b6bb8c28ab3f25a2832908d2", "author": {"user": {"login": "slievrly", "name": "jimin"}}, "url": "https://github.com/seata/seata/commit/7c60ef6208200943b6bb8c28ab3f25a2832908d2", "committedDate": "2020-02-03T03:05:44Z", "message": "remove gmt_create index\n\nSigned-off-by: slievrly <slievrly@163.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fc520675e99203ac97beedbd135ce919060102e9", "author": {"user": {"login": "slievrly", "name": "jimin"}}, "url": "https://github.com/seata/seata/commit/fc520675e99203ac97beedbd135ce919060102e9", "committedDate": "2020-02-03T03:07:29Z", "message": "Merge remote-tracking branch 'origin/samedata_diffbranch_rollback' into samedata_diffbranch_rollback"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUyMDEwMTkx", "url": "https://github.com/seata/seata/pull/2187#pullrequestreview-352010191", "createdAt": "2020-02-03T03:55:17Z", "commit": {"oid": "fc520675e99203ac97beedbd135ce919060102e9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9b4325ed64bb0317c8b9292d7c00fb150b9258a6", "author": {"user": {"login": "slievrly", "name": "jimin"}}, "url": "https://github.com/seata/seata/commit/9b4325ed64bb0317c8b9292d7c00fb150b9258a6", "committedDate": "2020-02-03T05:27:25Z", "message": "Merge branch 'develop' into samedata_diffbranch_rollback"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4155, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}