{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg2NDU4ODg1", "number": 2391, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQwOTowMTo0OVrODm_MBA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQxMzozMTo0NlrODnd2Cg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQyMjA3NzQ4OnYy", "diffSide": "RIGHT", "path": "config/seata-config-core/src/main/java/io/seata/config/FileConfiguration.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQwOTowMTo0OVrOF0uHZw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQxMjoxNToyOVrOF00cEw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDgyNTgzMQ==", "bodyText": "I think ScheduledExecutorService would be instantiate more time if I listen different config.", "url": "https://github.com/seata/seata/pull/2391#discussion_r390825831", "createdAt": "2020-03-11T09:01:49Z", "author": {"login": "l81893521"}, "path": "config/seata-config-core/src/main/java/io/seata/config/FileConfiguration.java", "diffHunk": "@@ -306,7 +308,9 @@ public FileListener(String dataId, ConfigurationChangeListener listener) {\n \n         @Override\n         public void onChangeEvent(ConfigurationChangeEvent event) {\n-            while (true) {\n+            ScheduledExecutorService onChangeEventExecutor =", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0e3574c71a52695b4a28fc511902e3ada3741749"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDkyOTQyNw==", "bodyText": "PTAL @l81893521", "url": "https://github.com/seata/seata/pull/2391#discussion_r390929427", "createdAt": "2020-03-11T12:15:29Z", "author": {"login": "a364176773"}, "path": "config/seata-config-core/src/main/java/io/seata/config/FileConfiguration.java", "diffHunk": "@@ -306,7 +308,9 @@ public FileListener(String dataId, ConfigurationChangeListener listener) {\n \n         @Override\n         public void onChangeEvent(ConfigurationChangeEvent event) {\n-            while (true) {\n+            ScheduledExecutorService onChangeEventExecutor =", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDgyNTgzMQ=="}, "originalCommit": {"oid": "0e3574c71a52695b4a28fc511902e3ada3741749"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQyNjMxMzcwOnYy", "diffSide": "RIGHT", "path": "config/seata-config-core/src/main/java/io/seata/config/FileConfiguration.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQwOTozNDozM1rOF1XFag==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQwOTo0MTozN1rOF1XVJQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTQ5NzA2Ng==", "bodyText": "use\nLOGGER.error\n\ninstead of\ne.printStackTrace();", "url": "https://github.com/seata/seata/pull/2391#discussion_r391497066", "createdAt": "2020-03-12T09:34:33Z", "author": {"login": "l81893521"}, "path": "config/seata-config-core/src/main/java/io/seata/config/FileConfiguration.java", "diffHunk": "@@ -315,13 +315,17 @@ public void onChangeEvent(ConfigurationChangeEvent event) {\n                         event.setDataId(dataId).setNewValue(currentConfig).setOldValue(oldConfig);\n                         listener.onChangeEvent(event);\n                     }\n-                    Thread.sleep(LISTENER_CONFIG_INTERNAL);\n                 } catch (Exception exx) {\n-                    LOGGER.error(\"fileListener execute error:{}\", exx.getMessage(), exx);\n+                    LOGGER.error(\"fileListener execute error:{}\", exx.getMessage());\n+                }\n+                try {\n+                    Thread.sleep(LISTENER_CONFIG_INTERNAL);\n+                } catch (InterruptedException e) {\n+                    e.printStackTrace();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b9bc5f7a6a4c4deff41633390a42203d00c75b4"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTUwMTA5Mw==", "bodyText": "use\nLOGGER.error\n\ninstead of\ne.printStackTrace();\n\n\nok", "url": "https://github.com/seata/seata/pull/2391#discussion_r391501093", "createdAt": "2020-03-12T09:41:37Z", "author": {"login": "a364176773"}, "path": "config/seata-config-core/src/main/java/io/seata/config/FileConfiguration.java", "diffHunk": "@@ -315,13 +315,17 @@ public void onChangeEvent(ConfigurationChangeEvent event) {\n                         event.setDataId(dataId).setNewValue(currentConfig).setOldValue(oldConfig);\n                         listener.onChangeEvent(event);\n                     }\n-                    Thread.sleep(LISTENER_CONFIG_INTERNAL);\n                 } catch (Exception exx) {\n-                    LOGGER.error(\"fileListener execute error:{}\", exx.getMessage(), exx);\n+                    LOGGER.error(\"fileListener execute error:{}\", exx.getMessage());\n+                }\n+                try {\n+                    Thread.sleep(LISTENER_CONFIG_INTERNAL);\n+                } catch (InterruptedException e) {\n+                    e.printStackTrace();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTQ5NzA2Ng=="}, "originalCommit": {"oid": "7b9bc5f7a6a4c4deff41633390a42203d00c75b4"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQyNzEwMDI2OnYy", "diffSide": "RIGHT", "path": "config/seata-config-core/src/main/java/io/seata/config/FileConfiguration.java", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQxMzozMTo0NlrOF1esIg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQxNDowMDoxNFrOF1fzMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTYyMTY2Ng==", "bodyText": "Please help correct the spelling by the way.Thank you!\nLISTENER_CONFIG_INTERNAL->LISTENER_CONFIG_INTERVAL", "url": "https://github.com/seata/seata/pull/2391#discussion_r391621666", "createdAt": "2020-03-12T13:31:46Z", "author": {"login": "xingfudeshi"}, "path": "config/seata-config-core/src/main/java/io/seata/config/FileConfiguration.java", "diffHunk": "@@ -315,9 +315,13 @@ public void onChangeEvent(ConfigurationChangeEvent event) {\n                         event.setDataId(dataId).setNewValue(currentConfig).setOldValue(oldConfig);\n                         listener.onChangeEvent(event);\n                     }\n-                    Thread.sleep(LISTENER_CONFIG_INTERNAL);\n                 } catch (Exception exx) {\n-                    LOGGER.error(\"fileListener execute error:{}\", exx.getMessage(), exx);\n+                    LOGGER.error(\"fileListener execute error:{}\", exx.getMessage());\n+                }\n+                try {\n+                    Thread.sleep(LISTENER_CONFIG_INTERNAL);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6d8013c5bbe4deb3bff9f951abad936b8a2b35e3"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTYyNjU2Mw==", "bodyText": "LISTENER_CONFIG_INTERVAL\n\nok", "url": "https://github.com/seata/seata/pull/2391#discussion_r391626563", "createdAt": "2020-03-12T13:39:58Z", "author": {"login": "a364176773"}, "path": "config/seata-config-core/src/main/java/io/seata/config/FileConfiguration.java", "diffHunk": "@@ -315,9 +315,13 @@ public void onChangeEvent(ConfigurationChangeEvent event) {\n                         event.setDataId(dataId).setNewValue(currentConfig).setOldValue(oldConfig);\n                         listener.onChangeEvent(event);\n                     }\n-                    Thread.sleep(LISTENER_CONFIG_INTERNAL);\n                 } catch (Exception exx) {\n-                    LOGGER.error(\"fileListener execute error:{}\", exx.getMessage(), exx);\n+                    LOGGER.error(\"fileListener execute error:{}\", exx.getMessage());\n+                }\n+                try {\n+                    Thread.sleep(LISTENER_CONFIG_INTERNAL);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTYyMTY2Ng=="}, "originalCommit": {"oid": "6d8013c5bbe4deb3bff9f951abad936b8a2b35e3"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTYzMTI4OQ==", "bodyText": "cpu has behaved normally\u3002", "url": "https://github.com/seata/seata/pull/2391#discussion_r391631289", "createdAt": "2020-03-12T13:47:27Z", "author": {"login": "threefish"}, "path": "config/seata-config-core/src/main/java/io/seata/config/FileConfiguration.java", "diffHunk": "@@ -315,9 +315,13 @@ public void onChangeEvent(ConfigurationChangeEvent event) {\n                         event.setDataId(dataId).setNewValue(currentConfig).setOldValue(oldConfig);\n                         listener.onChangeEvent(event);\n                     }\n-                    Thread.sleep(LISTENER_CONFIG_INTERNAL);\n                 } catch (Exception exx) {\n-                    LOGGER.error(\"fileListener execute error:{}\", exx.getMessage(), exx);\n+                    LOGGER.error(\"fileListener execute error:{}\", exx.getMessage());\n+                }\n+                try {\n+                    Thread.sleep(LISTENER_CONFIG_INTERNAL);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTYyMTY2Ng=="}, "originalCommit": {"oid": "6d8013c5bbe4deb3bff9f951abad936b8a2b35e3"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTYzOTg1Nw==", "bodyText": "cpu has behaved normally\u3002\n\nIf there are no questions, please reply to PTAL separately", "url": "https://github.com/seata/seata/pull/2391#discussion_r391639857", "createdAt": "2020-03-12T14:00:14Z", "author": {"login": "a364176773"}, "path": "config/seata-config-core/src/main/java/io/seata/config/FileConfiguration.java", "diffHunk": "@@ -315,9 +315,13 @@ public void onChangeEvent(ConfigurationChangeEvent event) {\n                         event.setDataId(dataId).setNewValue(currentConfig).setOldValue(oldConfig);\n                         listener.onChangeEvent(event);\n                     }\n-                    Thread.sleep(LISTENER_CONFIG_INTERNAL);\n                 } catch (Exception exx) {\n-                    LOGGER.error(\"fileListener execute error:{}\", exx.getMessage(), exx);\n+                    LOGGER.error(\"fileListener execute error:{}\", exx.getMessage());\n+                }\n+                try {\n+                    Thread.sleep(LISTENER_CONFIG_INTERNAL);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTYyMTY2Ng=="}, "originalCommit": {"oid": "6d8013c5bbe4deb3bff9f951abad936b8a2b35e3"}, "originalPosition": 10}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1690, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}