{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg3MTkxNTMy", "number": 3116, "reviewThreads": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQxMDo0NDoyOFrOEjiCyg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQxMzoyMDoxN1rOEpeKcQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA1NjkzMzg2OnYy", "diffSide": "RIGHT", "path": "config/seata-config-apollo/src/main/java/io/seata/config/apollo/ApolloConfiguration.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQxMDo0NDoyOFrOHR7yrg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQxMTowNzoyNlrOHR8jZQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODU2NzQ3MA==", "bodyText": "APOLLO_CLUSTER = \"seata\"  Is that better?", "url": "https://github.com/seata/seata/pull/3116#discussion_r488567470", "createdAt": "2020-09-15T10:44:28Z", "author": {"login": "a364176773"}, "path": "config/seata-config-apollo/src/main/java/io/seata/config/apollo/ApolloConfiguration.java", "diffHunk": "@@ -54,17 +54,21 @@\n     private static final String APP_ID = \"appId\";\n     private static final String APOLLO_META = \"apolloMeta\";\n     private static final String APOLLO_SECRET = \"apolloAccesskeySecret\";\n+    private static final String APOLLO_CLUSTER = \"cluster\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2996061648499a42e7d7959167df52dea15c4fc2"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODU3OTk0MQ==", "bodyText": "yes", "url": "https://github.com/seata/seata/pull/3116#discussion_r488579941", "createdAt": "2020-09-15T11:07:26Z", "author": {"login": "slinpq"}, "path": "config/seata-config-apollo/src/main/java/io/seata/config/apollo/ApolloConfiguration.java", "diffHunk": "@@ -54,17 +54,21 @@\n     private static final String APP_ID = \"appId\";\n     private static final String APOLLO_META = \"apolloMeta\";\n     private static final String APOLLO_SECRET = \"apolloAccesskeySecret\";\n+    private static final String APOLLO_CLUSTER = \"cluster\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODU2NzQ3MA=="}, "originalCommit": {"oid": "2996061648499a42e7d7959167df52dea15c4fc2"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA1NjkzNDM0OnYy", "diffSide": "RIGHT", "path": "server/src/main/resources/registry.conf", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQxMDo0NDozNlrOHR7y_g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQxMDo0NDozNlrOHR7y_g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODU2NzU1MA==", "bodyText": "file", "url": "https://github.com/seata/seata/pull/3116#discussion_r488567550", "createdAt": "2020-09-15T10:44:36Z", "author": {"login": "a364176773"}, "path": "server/src/main/resources/registry.conf", "diffHunk": "@@ -57,7 +57,7 @@ registry {\n \n config {\n   # file\u3001nacos \u3001apollo\u3001zk\u3001consul\u3001etcd3\n-  type = \"file\"\n+  type = \"apollo\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2996061648499a42e7d7959167df52dea15c4fc2"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA1NjkzNDcxOnYy", "diffSide": "RIGHT", "path": "server/src/main/resources/registry.conf", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQxMDo0NDo0N1rOHR7zPw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xOFQwNjoyMzozOFrOHT_nWw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODU2NzYxNQ==", "bodyText": "cluster = \"seata\"  Is that better?", "url": "https://github.com/seata/seata/pull/3116#discussion_r488567615", "createdAt": "2020-09-15T10:44:47Z", "author": {"login": "a364176773"}, "path": "server/src/main/resources/registry.conf", "diffHunk": "@@ -71,9 +71,12 @@ config {\n   }\n   apollo {\n     appId = \"seata-server\"\n+    ## apolloConfigService will cover apolloMeta\n     apolloMeta = \"http://192.168.1.204:8801\"\n+    apolloConfigService = \"http://192.168.1.204:8080\"\n     namespace = \"application\"\n     apolloAccesskeySecret = \"\"\n+    cluster = \"cluster\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2996061648499a42e7d7959167df52dea15c4fc2"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDcyNzI1OQ==", "bodyText": "change", "url": "https://github.com/seata/seata/pull/3116#discussion_r490727259", "createdAt": "2020-09-18T06:23:38Z", "author": {"login": "a364176773"}, "path": "server/src/main/resources/registry.conf", "diffHunk": "@@ -71,9 +71,12 @@ config {\n   }\n   apollo {\n     appId = \"seata-server\"\n+    ## apolloConfigService will cover apolloMeta\n     apolloMeta = \"http://192.168.1.204:8801\"\n+    apolloConfigService = \"http://192.168.1.204:8080\"\n     namespace = \"application\"\n     apolloAccesskeySecret = \"\"\n+    cluster = \"cluster\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODU2NzYxNQ=="}, "originalCommit": {"oid": "2996061648499a42e7d7959167df52dea15c4fc2"}, "originalPosition": 18}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA2MDI5NTM5OnYy", "diffSide": "RIGHT", "path": "config/seata-config-apollo/src/main/java/io/seata/config/apollo/ApolloConfiguration.java", "isResolved": false, "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQwMTozMjoyMVrOHSc02A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xN1QxNDozODowM1rOHTlkXQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTEwODY5Ng==", "bodyText": "If the value is \"\"?", "url": "https://github.com/seata/seata/pull/3116#discussion_r489108696", "createdAt": "2020-09-16T01:32:21Z", "author": {"login": "a364176773"}, "path": "config/seata-config-apollo/src/main/java/io/seata/config/apollo/ApolloConfiguration.java", "diffHunk": "@@ -176,6 +180,12 @@ private void readyApolloConfig() {\n                 System.setProperty(PROP_APOLLO_SECRET, secretKey);\n             }\n         }\n+        if (!properties.containsKey(APOLLO_CLUSTER)) {\n+            System.setProperty(PROP_APOLLO_CLUSTER, FILE_CONFIG.getConfig(getApolloCluster()));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8e8288e8a45affd83eda14c4ca9c360f906bb18d"}, "originalPosition": 65}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTExMjc0Mw==", "bodyText": "It is \"default\",the default value of apollo.", "url": "https://github.com/seata/seata/pull/3116#discussion_r489112743", "createdAt": "2020-09-16T01:47:08Z", "author": {"login": "slinpq"}, "path": "config/seata-config-apollo/src/main/java/io/seata/config/apollo/ApolloConfiguration.java", "diffHunk": "@@ -176,6 +180,12 @@ private void readyApolloConfig() {\n                 System.setProperty(PROP_APOLLO_SECRET, secretKey);\n             }\n         }\n+        if (!properties.containsKey(APOLLO_CLUSTER)) {\n+            System.setProperty(PROP_APOLLO_CLUSTER, FILE_CONFIG.getConfig(getApolloCluster()));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTEwODY5Ng=="}, "originalCommit": {"oid": "8e8288e8a45affd83eda14c4ca9c360f906bb18d"}, "originalPosition": 65}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTExMjc4Ng==", "bodyText": "It is \"default\",the default value of apollo.", "url": "https://github.com/seata/seata/pull/3116#discussion_r489112786", "createdAt": "2020-09-16T01:47:14Z", "author": {"login": "slinpq"}, "path": "config/seata-config-apollo/src/main/java/io/seata/config/apollo/ApolloConfiguration.java", "diffHunk": "@@ -176,6 +180,12 @@ private void readyApolloConfig() {\n                 System.setProperty(PROP_APOLLO_SECRET, secretKey);\n             }\n         }\n+        if (!properties.containsKey(APOLLO_CLUSTER)) {\n+            System.setProperty(PROP_APOLLO_CLUSTER, FILE_CONFIG.getConfig(getApolloCluster()));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTEwODY5Ng=="}, "originalCommit": {"oid": "8e8288e8a45affd83eda14c4ca9c360f906bb18d"}, "originalPosition": 65}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDI5MDMzMg==", "bodyText": "It is \"default\",the default value of apollo.\n\nI mean, if it's empty, don't set it", "url": "https://github.com/seata/seata/pull/3116#discussion_r490290332", "createdAt": "2020-09-17T14:26:10Z", "author": {"login": "a364176773"}, "path": "config/seata-config-apollo/src/main/java/io/seata/config/apollo/ApolloConfiguration.java", "diffHunk": "@@ -176,6 +180,12 @@ private void readyApolloConfig() {\n                 System.setProperty(PROP_APOLLO_SECRET, secretKey);\n             }\n         }\n+        if (!properties.containsKey(APOLLO_CLUSTER)) {\n+            System.setProperty(PROP_APOLLO_CLUSTER, FILE_CONFIG.getConfig(getApolloCluster()));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTEwODY5Ng=="}, "originalCommit": {"oid": "8e8288e8a45affd83eda14c4ca9c360f906bb18d"}, "originalPosition": 65}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDI5OTYzNg==", "bodyText": "The apollo client will set 'default',if it's empty.", "url": "https://github.com/seata/seata/pull/3116#discussion_r490299636", "createdAt": "2020-09-17T14:37:11Z", "author": {"login": "slinpq"}, "path": "config/seata-config-apollo/src/main/java/io/seata/config/apollo/ApolloConfiguration.java", "diffHunk": "@@ -176,6 +180,12 @@ private void readyApolloConfig() {\n                 System.setProperty(PROP_APOLLO_SECRET, secretKey);\n             }\n         }\n+        if (!properties.containsKey(APOLLO_CLUSTER)) {\n+            System.setProperty(PROP_APOLLO_CLUSTER, FILE_CONFIG.getConfig(getApolloCluster()));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTEwODY5Ng=="}, "originalCommit": {"oid": "8e8288e8a45affd83eda14c4ca9c360f906bb18d"}, "originalPosition": 65}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDMwMDUwOQ==", "bodyText": "The apollo client will set 'default',if it's empty.", "url": "https://github.com/seata/seata/pull/3116#discussion_r490300509", "createdAt": "2020-09-17T14:38:03Z", "author": {"login": "slinpq"}, "path": "config/seata-config-apollo/src/main/java/io/seata/config/apollo/ApolloConfiguration.java", "diffHunk": "@@ -176,6 +180,12 @@ private void readyApolloConfig() {\n                 System.setProperty(PROP_APOLLO_SECRET, secretKey);\n             }\n         }\n+        if (!properties.containsKey(APOLLO_CLUSTER)) {\n+            System.setProperty(PROP_APOLLO_CLUSTER, FILE_CONFIG.getConfig(getApolloCluster()));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTEwODY5Ng=="}, "originalCommit": {"oid": "8e8288e8a45affd83eda14c4ca9c360f906bb18d"}, "originalPosition": 65}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA2MDI5NTY0OnYy", "diffSide": "RIGHT", "path": "config/seata-config-apollo/src/main/java/io/seata/config/apollo/ApolloConfiguration.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQwMTozMjoyOVrOHSc0_Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQwMTo0OToyNVrOHSdHJA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTEwODczMw==", "bodyText": "If the value is \"\"?", "url": "https://github.com/seata/seata/pull/3116#discussion_r489108733", "createdAt": "2020-09-16T01:32:29Z", "author": {"login": "a364176773"}, "path": "config/seata-config-apollo/src/main/java/io/seata/config/apollo/ApolloConfiguration.java", "diffHunk": "@@ -176,6 +180,12 @@ private void readyApolloConfig() {\n                 System.setProperty(PROP_APOLLO_SECRET, secretKey);\n             }\n         }\n+        if (!properties.containsKey(APOLLO_CLUSTER)) {\n+            System.setProperty(PROP_APOLLO_CLUSTER, FILE_CONFIG.getConfig(getApolloCluster()));\n+        }\n+        if (!properties.containsKey(APOLLO_CONFIG_SERVICE)) {\n+            System.setProperty(PROP_APOLLO_CONFIG_SERVICE, FILE_CONFIG.getConfig(getApolloConfigService()));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8e8288e8a45affd83eda14c4ca9c360f906bb18d"}, "originalPosition": 68}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTExMzM4MA==", "bodyText": "It is empty.Apollo will use apolloMeta.If apolloMeta is empty.The addr of apollo will be null.", "url": "https://github.com/seata/seata/pull/3116#discussion_r489113380", "createdAt": "2020-09-16T01:49:25Z", "author": {"login": "slinpq"}, "path": "config/seata-config-apollo/src/main/java/io/seata/config/apollo/ApolloConfiguration.java", "diffHunk": "@@ -176,6 +180,12 @@ private void readyApolloConfig() {\n                 System.setProperty(PROP_APOLLO_SECRET, secretKey);\n             }\n         }\n+        if (!properties.containsKey(APOLLO_CLUSTER)) {\n+            System.setProperty(PROP_APOLLO_CLUSTER, FILE_CONFIG.getConfig(getApolloCluster()));\n+        }\n+        if (!properties.containsKey(APOLLO_CONFIG_SERVICE)) {\n+            System.setProperty(PROP_APOLLO_CONFIG_SERVICE, FILE_CONFIG.getConfig(getApolloConfigService()));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTEwODczMw=="}, "originalCommit": {"oid": "8e8288e8a45affd83eda14c4ca9c360f906bb18d"}, "originalPosition": 68}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzExOTIxMjY1OnYy", "diffSide": "RIGHT", "path": "config/seata-config-apollo/src/main/java/io/seata/config/apollo/ApolloConfiguration.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQxMzoyMDoxN1rOHbKCVg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQxMzoyMDoxN1rOHbKCVg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODIzODAzOA==", "bodyText": "Pls Give it a initial size.", "url": "https://github.com/seata/seata/pull/3116#discussion_r498238038", "createdAt": "2020-10-01T13:20:17Z", "author": {"login": "xingfudeshi"}, "path": "config/seata-config-apollo/src/main/java/io/seata/config/apollo/ApolloConfiguration.java", "diffHunk": "@@ -54,17 +54,21 @@\n     private static final String APP_ID = \"appId\";\n     private static final String APOLLO_META = \"apolloMeta\";\n     private static final String APOLLO_SECRET = \"apolloAccesskeySecret\";\n+    private static final String APOLLO_CLUSTER = \"seata\";\n+    private static final String APOLLO_CONFIG_SERVICE = \"apolloConfigService\";\n     private static final String PROP_APP_ID = \"app.id\";\n     private static final String PROP_APOLLO_META = \"apollo.meta\";\n+    private static final String PROP_APOLLO_CONFIG_SERVICE = \"apollo.configService\";\n     private static final String PROP_APOLLO_SECRET = \"apollo.accesskey.secret\";\n+    private static final String PROP_APOLLO_CLUSTER = \"apollo.cluster\";\n     private static final String NAMESPACE = \"namespace\";\n     private static final String DEFAULT_NAMESPACE = \"application\";\n     private static final Configuration FILE_CONFIG = ConfigurationFactory.CURRENT_FILE_INSTANCE;\n     private static volatile Config config;\n     private ExecutorService configOperateExecutor;\n     private static final int CORE_CONFIG_OPERATE_THREAD = 1;\n     private static final ConcurrentMap<String, Set<ConfigurationChangeListener>> LISTENER_SERVICE_MAP\n-        = new ConcurrentHashMap<>();\n+            = new ConcurrentHashMap<>();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "83e7cddebab597b04132a186ca002693b0257f48"}, "originalPosition": 19}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1426, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}