{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM2OTA5NDgy", "number": 2816, "title": "optimize: optimize create clazz instance", "bodyText": "Signed-off-by: slievrly slievrly@163.com\n\n\u2160. Describe what this PR did\noptimize: optimize create clazz instance\n\u2161. Does this pull request fix one issue?\nfix #2813\n\u2162. Why don't you add test cases (unit test/integration test)?\n\u2163. Describe how to verify it\n\u2164. Special notes for reviews", "createdAt": "2020-06-19T06:06:11Z", "url": "https://github.com/seata/seata/pull/2816", "merged": true, "mergeCommit": {"oid": "e4c8f884082968474c100ae29447380bdb62f699"}, "closed": true, "closedAt": "2020-06-23T04:54:15Z", "author": {"login": "slievrly"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcssuMrAH2gAyNDM2OTA5NDgyOmFmZmFiZDc4MWNhOWE2NGE4MWUyZGRiNjlmYzFkODFjZjFlZGFlNjI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABct9WhagH2gAyNDM2OTA5NDgyOmMyZWMwYTM1NTllZjA4NGJlNDg3YjU4MWJhNDg5ZjIxMTZhOGZjM2E=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "affabd781ca9a64a81e2ddb69fc1d81cf1edae62", "author": {"user": {"login": "slievrly", "name": "jimin"}}, "url": "https://github.com/seata/seata/commit/affabd781ca9a64a81e2ddb69fc1d81cf1edae62", "committedDate": "2020-06-19T06:05:02Z", "message": "optimize: optimize create clazz instance\n\nSigned-off-by: slievrly <slievrly@163.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMzOTQ5NDYz", "url": "https://github.com/seata/seata/pull/2816#pullrequestreview-433949463", "createdAt": "2020-06-19T09:54:41Z", "commit": {"oid": "affabd781ca9a64a81e2ddb69fc1d81cf1edae62"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "342efb2247a84d6d7adbefd5680a26ae2364db15", "author": {"user": {"login": "jsbxyyx", "name": "jsbxyyx"}}, "url": "https://github.com/seata/seata/commit/342efb2247a84d6d7adbefd5680a26ae2364db15", "committedDate": "2020-06-19T09:55:03Z", "message": "Merge branch 'develop' into develop_06_19"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM0NTAxMTk4", "url": "https://github.com/seata/seata/pull/2816#pullrequestreview-434501198", "createdAt": "2020-06-21T13:23:50Z", "commit": {"oid": "342efb2247a84d6d7adbefd5680a26ae2364db15"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM0NTc0MTg5", "url": "https://github.com/seata/seata/pull/2816#pullrequestreview-434574189", "createdAt": "2020-06-22T02:50:39Z", "commit": {"oid": "342efb2247a84d6d7adbefd5680a26ae2364db15"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQwMjo1MDo0MFrOGmwhcg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQwMjo1MDo0MFrOGmwhcg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzI5NDA2Ng==", "bodyText": "the classloader may be null? use Objects.equals ?", "url": "https://github.com/seata/seata/pull/2816#discussion_r443294066", "createdAt": "2020-06-22T02:50:40Z", "author": {"login": "jsbxyyx"}, "path": "common/src/main/java/io/seata/common/loader/EnhancedServiceLoader.java", "diffHunk": "@@ -516,6 +520,18 @@ private ExtensionDefinition getUnloadedExtensionDefinition(Class<?> clazz) {\n             return null;\n         }\n \n+        private boolean isDefinitionContainsClazz(String className, ClassLoader loader) {\n+            for (Map.Entry<Class<?>, ExtensionDefinition> entry : classToDefinitionMap.entrySet()) {\n+                if (!entry.getKey().getName().equals(className)) {\n+                    continue;\n+                }\n+                if (entry.getValue().getServiceClass().getClassLoader().equals(loader)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "342efb2247a84d6d7adbefd5680a26ae2364db15"}, "originalPosition": 80}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM0NTgwMzQ3", "url": "https://github.com/seata/seata/pull/2816#pullrequestreview-434580347", "createdAt": "2020-06-22T03:18:33Z", "commit": {"oid": "342efb2247a84d6d7adbefd5680a26ae2364db15"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "35ac45a57272d1f01e27f3dff508366f6beed6ca", "author": {"user": {"login": "xingfudeshi", "name": "xingfudeshi"}}, "url": "https://github.com/seata/seata/commit/35ac45a57272d1f01e27f3dff508366f6beed6ca", "committedDate": "2020-06-22T03:18:50Z", "message": "Merge branch 'develop' into develop_06_19"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "882a88886f7594c749c7a2668aba21ca5c04f8d0", "author": {"user": {"login": "slievrly", "name": "jimin"}}, "url": "https://github.com/seata/seata/commit/882a88886f7594c749c7a2668aba21ca5c04f8d0", "committedDate": "2020-06-23T03:55:29Z", "message": "Merge remote-tracking branch 'upstream/develop' into develop_06_19"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dd936c2dde68ec624e64ad54ac6115c097a978b6", "author": {"user": {"login": "slievrly", "name": "jimin"}}, "url": "https://github.com/seata/seata/commit/dd936c2dde68ec624e64ad54ac6115c097a978b6", "committedDate": "2020-06-23T03:56:10Z", "message": "Merge branch 'develop_06_19' of github.com:slievrly/fescar into develop_06_19"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c2ec0a3559ef084be487b581ba489f2116a8fc3a", "author": {"user": {"login": "slievrly", "name": "jimin"}}, "url": "https://github.com/seata/seata/commit/c2ec0a3559ef084be487b581ba489f2116a8fc3a", "committedDate": "2020-06-23T04:01:29Z", "message": "fix review\n\nSigned-off-by: slievrly <slievrly@163.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3778, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}