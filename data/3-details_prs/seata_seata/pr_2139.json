{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzU5MjI0Mjkw", "number": 2139, "title": "optimize: gracefully close resources", "bodyText": "", "createdAt": "2020-01-04T15:54:17Z", "url": "https://github.com/seata/seata/pull/2139", "merged": true, "mergeCommit": {"oid": "400dc5b59181057518c37c8b06972e49f898bb3a"}, "closed": true, "closedAt": "2020-01-10T23:00:03Z", "author": {"login": "a364176773"}, "timelineItems": {"totalCount": 27, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABbvTSlgAH2gAyMzU5MjI0MjkwOmY5NTIxMTI3N2Q4YmQ1MTUzYjcxYzU4NDA5YTJmNTA0MzBjMTNjNjk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb5k7rpgFqTM0MTU2NTM5Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "f95211277d8bd5153b71c58409a2f50430c13c69", "author": {"user": {"login": "a364176773", "name": "FUNKYE"}}, "url": "https://github.com/seata/seata/commit/f95211277d8bd5153b71c58409a2f50430c13c69", "committedDate": "2019-12-11T11:57:52Z", "message": "Merge pull request #1 from seata/develop\n\nupdate"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0c79faaccc9cc04750390b621d6c8af48edddd3b", "author": {"user": {"login": "a364176773", "name": "FUNKYE"}}, "url": "https://github.com/seata/seata/commit/0c79faaccc9cc04750390b621d6c8af48edddd3b", "committedDate": "2019-12-12T12:38:07Z", "message": "Merge pull request #2 from seata/develop\n\n\u540c\u6b65\u4ee3\u7801"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b4071255ed9fcb509831f0679cb31e50f8277f39", "author": {"user": {"login": "a364176773", "name": "FUNKYE"}}, "url": "https://github.com/seata/seata/commit/b4071255ed9fcb509831f0679cb31e50f8277f39", "committedDate": "2019-12-13T13:28:49Z", "message": "Merge pull request #3 from seata/develop\n\n\u540c\u6b65\u6e90\u7801"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9f7f3343d5167cf447b3532636ccac34611ab4fd", "author": {"user": {"login": "a364176773", "name": "FUNKYE"}}, "url": "https://github.com/seata/seata/commit/9f7f3343d5167cf447b3532636ccac34611ab4fd", "committedDate": "2019-12-14T07:54:06Z", "message": "Merge pull request #4 from seata/develop\n\n\u540c\u6b65\u6e90\u7801"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e363d82e36122107f472a182d9d55954e93bd6f3", "author": {"user": {"login": "a364176773", "name": "FUNKYE"}}, "url": "https://github.com/seata/seata/commit/e363d82e36122107f472a182d9d55954e93bd6f3", "committedDate": "2019-12-14T08:10:29Z", "message": "fix mysql connect unable to release bug"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3ce8bc0711ced4e755b91d2b0f8cedbde2df0944", "author": {"user": {"login": "a364176773", "name": "FUNKYE"}}, "url": "https://github.com/seata/seata/commit/3ce8bc0711ced4e755b91d2b0f8cedbde2df0944", "committedDate": "2019-12-14T09:53:09Z", "message": "Merge pull request #5 from seata/develop\n\nbugfix: fix mysql connection unable to release (#2037)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f3ce74fda934be1e3e9d5607aec8df42cb01c6b4", "author": {"user": {"login": "a364176773", "name": "FUNKYE"}}, "url": "https://github.com/seata/seata/commit/f3ce74fda934be1e3e9d5607aec8df42cb01c6b4", "committedDate": "2019-12-16T12:30:24Z", "message": "Merge pull request #6 from seata/develop\n\n\u540c\u6b65\u6e90\u7801"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4e90b5da7babf81b671050333090238483121b3b", "author": {"user": {"login": "a364176773", "name": "FUNKYE"}}, "url": "https://github.com/seata/seata/commit/4e90b5da7babf81b671050333090238483121b3b", "committedDate": "2019-12-17T09:20:50Z", "message": "Merge pull request #7 from seata/develop\n\n\u540c\u6b65\u6e90\u7801"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "41f081774cdbe79be49ab9b4dfb5323f6bd96b2c", "author": {"user": {"login": "a364176773", "name": "FUNKYE"}}, "url": "https://github.com/seata/seata/commit/41f081774cdbe79be49ab9b4dfb5323f6bd96b2c", "committedDate": "2019-12-19T13:21:28Z", "message": "Merge pull request #8 from seata/develop\n\n\u540c\u6b65\u6e90\u7801"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ebd746403da143f30df90739ec1bc03ad7d75f0b", "author": {"user": {"login": "a364176773", "name": "FUNKYE"}}, "url": "https://github.com/seata/seata/commit/ebd746403da143f30df90739ec1bc03ad7d75f0b", "committedDate": "2019-12-20T11:02:42Z", "message": "Merge pull request #9 from seata/develop\n\nupdate"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "54a4b1160901f2cda3a03f0f25f979ed0c688746", "author": {"user": {"login": "a364176773", "name": "FUNKYE"}}, "url": "https://github.com/seata/seata/commit/54a4b1160901f2cda3a03f0f25f979ed0c688746", "committedDate": "2019-12-22T05:32:26Z", "message": "Merge pull request #10 from seata/develop\n\nupdate"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2668c11b287f7527d31faa017bfcbfba9896dac0", "author": {"user": {"login": "a364176773", "name": "FUNKYE"}}, "url": "https://github.com/seata/seata/commit/2668c11b287f7527d31faa017bfcbfba9896dac0", "committedDate": "2019-12-31T10:42:05Z", "message": "Merge pull request #11 from seata/develop\n\nupdate"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6c6e2fcd293379c3c4fb485a9180163c771ea773", "author": {"user": {"login": "a364176773", "name": "FUNKYE"}}, "url": "https://github.com/seata/seata/commit/6c6e2fcd293379c3c4fb485a9180163c771ea773", "committedDate": "2020-01-04T13:12:48Z", "message": "Merge pull request #12 from seata/develop\n\nupdate"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ae7ff6175e7f5afcc4aeca2d19cb17818c7a83bc", "author": {"user": {"login": "a364176773", "name": "FUNKYE"}}, "url": "https://github.com/seata/seata/commit/ae7ff6175e7f5afcc4aeca2d19cb17818c7a83bc", "committedDate": "2020-01-04T15:52:16Z", "message": "gracefully close resources"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM5MDYwNzE0", "url": "https://github.com/seata/seata/pull/2139#pullrequestreview-339060714", "createdAt": "2020-01-07T07:05:27Z", "commit": {"oid": "ae7ff6175e7f5afcc4aeca2d19cb17818c7a83bc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QwNzowNToyN1rOFaxSRA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QwNzowNToyN1rOFaxSRA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzYxNDc4OA==", "bodyText": "The close method of ByteArrayOutputStream actually does nothing.The close method of ObjectOutputStream should be called.", "url": "https://github.com/seata/seata/pull/2139#discussion_r363614788", "createdAt": "2020-01-07T07:05:27Z", "author": {"login": "xingfudeshi"}, "path": "saga/seata-saga-engine-store/src/main/java/io/seata/saga/engine/serializer/impl/ExceptionSerializer.java", "diffHunk": "@@ -38,24 +39,14 @@\n \n         byte[] result = null;\n         if (o != null) {\n-            ObjectOutputStream oos = null;\n-            try {\n-                ByteArrayOutputStream baos = new ByteArrayOutputStream();\n-                oos = new ObjectOutputStream(baos);\n+            try (ByteArrayOutputStream baos = new ByteArrayOutputStream();\n+                ObjectOutputStream oos = new ObjectOutputStream(baos)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ae7ff6175e7f5afcc4aeca2d19cb17818c7a83bc"}, "originalPosition": 22}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM5MDYwOTg5", "url": "https://github.com/seata/seata/pull/2139#pullrequestreview-339060989", "createdAt": "2020-01-07T07:06:25Z", "commit": {"oid": "ae7ff6175e7f5afcc4aeca2d19cb17818c7a83bc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QwNzowNjoyNVrOFaxTHQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QwNzowNjoyNVrOFaxTHQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzYxNTAwNQ==", "bodyText": "The close method of ByteArrayInputStream actually does nothing.The close method of ObjectInputStream should be called.", "url": "https://github.com/seata/seata/pull/2139#discussion_r363615005", "createdAt": "2020-01-07T07:06:25Z", "author": {"login": "xingfudeshi"}, "path": "saga/seata-saga-engine-store/src/main/java/io/seata/saga/engine/serializer/impl/ExceptionSerializer.java", "diffHunk": "@@ -75,25 +66,15 @@ public static Object deserializeByObjectInputStream(byte[] bytes) {\n \n         Object result = null;\n         if (bytes != null) {\n-            ObjectInputStream ois = null;\n-            try {\n-                ByteArrayInputStream bais = new ByteArrayInputStream(bytes);\n-                ois = new ObjectInputStream(bais);\n+            try (ByteArrayInputStream bais = new ByteArrayInputStream(bytes);\n+                ObjectInputStream ois = new ObjectInputStream(bais)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ae7ff6175e7f5afcc4aeca2d19cb17818c7a83bc"}, "originalPosition": 49}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM5MDYxMDgw", "url": "https://github.com/seata/seata/pull/2139#pullrequestreview-339061080", "createdAt": "2020-01-07T07:06:43Z", "commit": {"oid": "ae7ff6175e7f5afcc4aeca2d19cb17818c7a83bc"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3ef573434cff38b51137a5178ed05b5deceb689b", "author": {"user": {"login": "xingfudeshi", "name": "xingfudeshi"}}, "url": "https://github.com/seata/seata/commit/3ef573434cff38b51137a5178ed05b5deceb689b", "committedDate": "2020-01-07T14:30:26Z", "message": "Merge branch 'develop' into develop"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0f109be47a49d65f841baf998e8004cfe48cf198", "author": {"user": {"login": "lovepoem", "name": "Xin Wang"}}, "url": "https://github.com/seata/seata/commit/0f109be47a49d65f841baf998e8004cfe48cf198", "committedDate": "2020-01-08T10:28:44Z", "message": "Merge branch 'develop' into develop"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7177a2588015f096a66bb62bac874db46fabb8a1", "author": {"user": {"login": "a364176773", "name": "FUNKYE"}}, "url": "https://github.com/seata/seata/commit/7177a2588015f096a66bb62bac874db46fabb8a1", "committedDate": "2020-01-08T12:54:25Z", "message": "modify exceptionSerializer close the way"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4080ad54b1f54d944727fb7867fbf4f0bdae487e", "author": {"user": {"login": "a364176773", "name": "FUNKYE"}}, "url": "https://github.com/seata/seata/commit/4080ad54b1f54d944727fb7867fbf4f0bdae487e", "committedDate": "2020-01-08T12:54:59Z", "message": "Merge branch 'develop' of https://github.com/a364176773/seata into develop"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "62cb7f868d6f495cb87dbd211bf51d9adbd1522d", "author": {"user": {"login": "lovepoem", "name": "Xin Wang"}}, "url": "https://github.com/seata/seata/commit/62cb7f868d6f495cb87dbd211bf51d9adbd1522d", "committedDate": "2020-01-10T06:59:39Z", "message": "Merge branch 'develop' into develop"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2495ba25fe2e1c3e70d7178f5fa2c8e2ef597cc7", "author": {"user": {"login": "zjinlei", "name": null}}, "url": "https://github.com/seata/seata/commit/2495ba25fe2e1c3e70d7178f5fa2c8e2ef597cc7", "committedDate": "2020-01-10T16:08:10Z", "message": "Merge branch 'develop' into develop"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fac8a58c002a0c0118da4cd098e5487af189fc70", "author": {"user": {"login": "zjinlei", "name": null}}, "url": "https://github.com/seata/seata/commit/fac8a58c002a0c0118da4cd098e5487af189fc70", "committedDate": "2020-01-10T16:09:56Z", "message": "import sort"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQxMjg4MTQz", "url": "https://github.com/seata/seata/pull/2139#pullrequestreview-341288143", "createdAt": "2020-01-10T16:45:43Z", "commit": {"oid": "fac8a58c002a0c0118da4cd098e5487af189fc70"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQxNDY1OTM2", "url": "https://github.com/seata/seata/pull/2139#pullrequestreview-341465936", "createdAt": "2020-01-10T22:59:21Z", "commit": {"oid": "fac8a58c002a0c0118da4cd098e5487af189fc70"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQxNTY1Mzk2", "url": "https://github.com/seata/seata/pull/2139#pullrequestreview-341565396", "createdAt": "2020-01-12T10:10:18Z", "commit": {"oid": "fac8a58c002a0c0118da4cd098e5487af189fc70"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMlQxMDoxMDoxOFrOFcot8g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMlQxMDoxMDoxOFrOFcot8g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTU3MTU3MA==", "bodyText": "if ObjectOutputStream close error , it will throw an exception?", "url": "https://github.com/seata/seata/pull/2139#discussion_r365571570", "createdAt": "2020-01-12T10:10:18Z", "author": {"login": "slievrly"}, "path": "saga/seata-saga-engine-store/src/main/java/io/seata/saga/engine/serializer/impl/ExceptionSerializer.java", "diffHunk": "@@ -38,24 +39,14 @@\n \n         byte[] result = null;\n         if (o != null) {\n-            ObjectOutputStream oos = null;\n-            try {\n-                ByteArrayOutputStream baos = new ByteArrayOutputStream();\n-                oos = new ObjectOutputStream(baos);\n+            ByteArrayOutputStream baos = new ByteArrayOutputStream();\n+            try (ObjectOutputStream oos = new ObjectOutputStream(baos)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fac8a58c002a0c0118da4cd098e5487af189fc70"}, "originalPosition": 17}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4123, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}