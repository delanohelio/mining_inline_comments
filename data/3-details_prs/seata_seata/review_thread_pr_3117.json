{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg3NDAzNDE5", "number": 3117, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQwMToxMzo1MlrOEj2WWA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQwNjoyMzoxOFrOEoYuyA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA2MDI2MDcyOnYy", "diffSide": "RIGHT", "path": "core/src/main/java/io/seata/core/rpc/netty/NettyClientChannelManager.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQwMToxMzo1MlrOHScgVA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQxMDo0NzowN1rOHSrIlw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTEwMzQ0NA==", "bodyText": "\u5982\u679cserviceGroup\u4e3a\u7a7a\uff0c\u660e\u786e\u63d0\u793a\u7528\u6237\u672a\u914d\u7f6eservice.vgroupMapping.${transactionServiceGroup}\u662f\u5426\u4f1a\u66f4\u597d\uff1f", "url": "https://github.com/seata/seata/pull/3117#discussion_r489103444", "createdAt": "2020-09-16T01:13:52Z", "author": {"login": "wangliang181230"}, "path": "core/src/main/java/io/seata/core/rpc/netty/NettyClientChannelManager.java", "diffHunk": "@@ -167,7 +167,7 @@ void reconnect(String transactionServiceGroup) {\n         if (CollectionUtils.isEmpty(availList)) {\n             String serviceGroup = RegistryFactory.getInstance()\n                                                  .getServiceGroup(transactionServiceGroup);\n-            LOGGER.error(\"no available service '{}' found, please make sure registry config correct\", serviceGroup);\n+            LOGGER.error(\"no available service '{}' found in service group '{}', please make sure registry config correct\", serviceGroup, transactionServiceGroup);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dfcd38a46b7e1cde34c9cbd6c27f3ca82e9f9e04"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTEwNzAyNw==", "bodyText": "+1", "url": "https://github.com/seata/seata/pull/3117#discussion_r489107027", "createdAt": "2020-09-16T01:26:28Z", "author": {"login": "a364176773"}, "path": "core/src/main/java/io/seata/core/rpc/netty/NettyClientChannelManager.java", "diffHunk": "@@ -167,7 +167,7 @@ void reconnect(String transactionServiceGroup) {\n         if (CollectionUtils.isEmpty(availList)) {\n             String serviceGroup = RegistryFactory.getInstance()\n                                                  .getServiceGroup(transactionServiceGroup);\n-            LOGGER.error(\"no available service '{}' found, please make sure registry config correct\", serviceGroup);\n+            LOGGER.error(\"no available service '{}' found in service group '{}', please make sure registry config correct\", serviceGroup, transactionServiceGroup);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTEwMzQ0NA=="}, "originalCommit": {"oid": "dfcd38a46b7e1cde34c9cbd6c27f3ca82e9f9e04"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTM0MzEyNw==", "bodyText": "agree", "url": "https://github.com/seata/seata/pull/3117#discussion_r489343127", "createdAt": "2020-09-16T10:47:07Z", "author": {"login": "slievrly"}, "path": "core/src/main/java/io/seata/core/rpc/netty/NettyClientChannelManager.java", "diffHunk": "@@ -167,7 +167,7 @@ void reconnect(String transactionServiceGroup) {\n         if (CollectionUtils.isEmpty(availList)) {\n             String serviceGroup = RegistryFactory.getInstance()\n                                                  .getServiceGroup(transactionServiceGroup);\n-            LOGGER.error(\"no available service '{}' found, please make sure registry config correct\", serviceGroup);\n+            LOGGER.error(\"no available service '{}' found in service group '{}', please make sure registry config correct\", serviceGroup, transactionServiceGroup);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTEwMzQ0NA=="}, "originalCommit": {"oid": "dfcd38a46b7e1cde34c9cbd6c27f3ca82e9f9e04"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA4NjU3NzA0OnYy", "diffSide": "RIGHT", "path": "core/src/main/java/io/seata/core/rpc/netty/NettyClientChannelManager.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yM1QwMzo1Mzo1MFrOHWVZvQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQxNjozMTowNFrOHXjJEw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzE4MTM3Mw==", "bodyText": "if use third registry center ,will not read this configuration item.", "url": "https://github.com/seata/seata/pull/3117#discussion_r493181373", "createdAt": "2020-09-23T03:53:50Z", "author": {"login": "slievrly"}, "path": "core/src/main/java/io/seata/core/rpc/netty/NettyClientChannelManager.java", "diffHunk": "@@ -165,10 +167,19 @@ void reconnect(String transactionServiceGroup) {\n             return;\n         }\n         if (CollectionUtils.isEmpty(availList)) {\n-            String serviceGroup = RegistryFactory.getInstance()\n-                                                 .getServiceGroup(transactionServiceGroup);\n-            LOGGER.error(\"no available service '{}' found, please make sure registry config correct\", serviceGroup);\n-            return;\n+            String clusterName = RegistryFactory.getInstance().getServiceGroup(transactionServiceGroup);\n+\n+            if (StringUtils.isNotBlank(clusterName)) {\n+                LOGGER.error(\"no available service found in cluster '{}{}{}', please make sure registry config correct\",\n+                        ConfigurationKeys.SERVICE_PREFIX,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bd352764c5ac542de33b2480d303624dda03885a"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDQ1NTA1OQ==", "bodyText": "I modified the log message,please review it", "url": "https://github.com/seata/seata/pull/3117#discussion_r494455059", "createdAt": "2020-09-24T16:31:04Z", "author": {"login": "PeineLiang"}, "path": "core/src/main/java/io/seata/core/rpc/netty/NettyClientChannelManager.java", "diffHunk": "@@ -165,10 +167,19 @@ void reconnect(String transactionServiceGroup) {\n             return;\n         }\n         if (CollectionUtils.isEmpty(availList)) {\n-            String serviceGroup = RegistryFactory.getInstance()\n-                                                 .getServiceGroup(transactionServiceGroup);\n-            LOGGER.error(\"no available service '{}' found, please make sure registry config correct\", serviceGroup);\n-            return;\n+            String clusterName = RegistryFactory.getInstance().getServiceGroup(transactionServiceGroup);\n+\n+            if (StringUtils.isNotBlank(clusterName)) {\n+                LOGGER.error(\"no available service found in cluster '{}{}{}', please make sure registry config correct\",\n+                        ConfigurationKeys.SERVICE_PREFIX,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzE4MTM3Mw=="}, "originalCommit": {"oid": "bd352764c5ac542de33b2480d303624dda03885a"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEwMzg3NDQ5OnYy", "diffSide": "RIGHT", "path": "core/src/main/java/io/seata/core/rpc/netty/NettyClientChannelManager.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQwOTo1OTo0NlrOHY2w2Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQxNDo1MzoyNlrOHZBjxQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTgyNTExMw==", "bodyText": "cant no -> can't", "url": "https://github.com/seata/seata/pull/3117#discussion_r495825113", "createdAt": "2020-09-28T09:59:46Z", "author": {"login": "wangliang181230"}, "path": "core/src/main/java/io/seata/core/rpc/netty/NettyClientChannelManager.java", "diffHunk": "@@ -165,10 +169,19 @@ void reconnect(String transactionServiceGroup) {\n             return;\n         }\n         if (CollectionUtils.isEmpty(availList)) {\n-            String serviceGroup = RegistryFactory.getInstance()\n-                                                 .getServiceGroup(transactionServiceGroup);\n-            LOGGER.error(\"no available service '{}' found, please make sure registry config correct\", serviceGroup);\n-            return;\n+            RegistryService registryService = RegistryFactory.getInstance();\n+            String clusterName = registryService.getServiceGroup(transactionServiceGroup);\n+\n+            if (StringUtils.isBlank(clusterName)) {\n+                LOGGER.error(\"cant no get cluster name in registry config '{}{}', please make sure registry config correct\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "efa609fbea451cae77119ad6ac49da4b89f75bff"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjAwMTk4OQ==", "bodyText": "fixed ,please review it", "url": "https://github.com/seata/seata/pull/3117#discussion_r496001989", "createdAt": "2020-09-28T14:53:26Z", "author": {"login": "PeineLiang"}, "path": "core/src/main/java/io/seata/core/rpc/netty/NettyClientChannelManager.java", "diffHunk": "@@ -165,10 +169,19 @@ void reconnect(String transactionServiceGroup) {\n             return;\n         }\n         if (CollectionUtils.isEmpty(availList)) {\n-            String serviceGroup = RegistryFactory.getInstance()\n-                                                 .getServiceGroup(transactionServiceGroup);\n-            LOGGER.error(\"no available service '{}' found, please make sure registry config correct\", serviceGroup);\n-            return;\n+            RegistryService registryService = RegistryFactory.getInstance();\n+            String clusterName = registryService.getServiceGroup(transactionServiceGroup);\n+\n+            if (StringUtils.isBlank(clusterName)) {\n+                LOGGER.error(\"cant no get cluster name in registry config '{}{}', please make sure registry config correct\",", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTgyNTExMw=="}, "originalCommit": {"oid": "efa609fbea451cae77119ad6ac49da4b89f75bff"}, "originalPosition": 25}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEwNzIzMzExOnYy", "diffSide": "RIGHT", "path": "core/src/main/java/io/seata/core/rpc/netty/NettyClientChannelManager.java", "isResolved": true, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQwMjo0MDoyOVrOHZWekw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQwMzoxODowNVrOHZXDgg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjM0NDcyMw==", "bodyText": "line 185: return;\nIf missed, it may throw NPE.", "url": "https://github.com/seata/seata/pull/3117#discussion_r496344723", "createdAt": "2020-09-29T02:40:29Z", "author": {"login": "wangliang181230"}, "path": "core/src/main/java/io/seata/core/rpc/netty/NettyClientChannelManager.java", "diffHunk": "@@ -165,10 +169,19 @@ void reconnect(String transactionServiceGroup) {\n             return;\n         }\n         if (CollectionUtils.isEmpty(availList)) {\n-            String serviceGroup = RegistryFactory.getInstance()\n-                                                 .getServiceGroup(transactionServiceGroup);\n-            LOGGER.error(\"no available service '{}' found, please make sure registry config correct\", serviceGroup);\n-            return;\n+            RegistryService registryService = RegistryFactory.getInstance();\n+            String clusterName = registryService.getServiceGroup(transactionServiceGroup);\n+\n+            if (StringUtils.isBlank(clusterName)) {\n+                LOGGER.error(\"can not get cluster name in registry config '{}{}', please make sure registry config correct\",\n+                        ConfigurationKeys.SERVICE_GROUP_MAPPING_PREFIX,\n+                        transactionServiceGroup);\n+                return;\n+            }\n+\n+            if (!(registryService instanceof FileRegistryServiceImpl)) {\n+                LOGGER.error(\"no available service found, please make sure registry config correct and keep your seata server running\");\n+            }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cd7ee1b1a4e4a7b264799ab9e62b236fee980e04"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjM0ODY5Ng==", "bodyText": "line 185: return;\nIf missed, it may throw NPE.\n\nit's necessary? the method getAvailServerList  will return a empty list", "url": "https://github.com/seata/seata/pull/3117#discussion_r496348696", "createdAt": "2020-09-29T02:56:15Z", "author": {"login": "PeineLiang"}, "path": "core/src/main/java/io/seata/core/rpc/netty/NettyClientChannelManager.java", "diffHunk": "@@ -165,10 +169,19 @@ void reconnect(String transactionServiceGroup) {\n             return;\n         }\n         if (CollectionUtils.isEmpty(availList)) {\n-            String serviceGroup = RegistryFactory.getInstance()\n-                                                 .getServiceGroup(transactionServiceGroup);\n-            LOGGER.error(\"no available service '{}' found, please make sure registry config correct\", serviceGroup);\n-            return;\n+            RegistryService registryService = RegistryFactory.getInstance();\n+            String clusterName = registryService.getServiceGroup(transactionServiceGroup);\n+\n+            if (StringUtils.isBlank(clusterName)) {\n+                LOGGER.error(\"can not get cluster name in registry config '{}{}', please make sure registry config correct\",\n+                        ConfigurationKeys.SERVICE_GROUP_MAPPING_PREFIX,\n+                        transactionServiceGroup);\n+                return;\n+            }\n+\n+            if (!(registryService instanceof FileRegistryServiceImpl)) {\n+                LOGGER.error(\"no available service found, please make sure registry config correct and keep your seata server running\");\n+            }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjM0NDcyMw=="}, "originalCommit": {"oid": "cd7ee1b1a4e4a7b264799ab9e62b236fee980e04"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjM1MDc3OA==", "bodyText": "The current method should not consider how the getAvailServerList is implemented.\nIf the codes of getAvailServerList changed, it will throw NPE.", "url": "https://github.com/seata/seata/pull/3117#discussion_r496350778", "createdAt": "2020-09-29T03:04:13Z", "author": {"login": "wangliang181230"}, "path": "core/src/main/java/io/seata/core/rpc/netty/NettyClientChannelManager.java", "diffHunk": "@@ -165,10 +169,19 @@ void reconnect(String transactionServiceGroup) {\n             return;\n         }\n         if (CollectionUtils.isEmpty(availList)) {\n-            String serviceGroup = RegistryFactory.getInstance()\n-                                                 .getServiceGroup(transactionServiceGroup);\n-            LOGGER.error(\"no available service '{}' found, please make sure registry config correct\", serviceGroup);\n-            return;\n+            RegistryService registryService = RegistryFactory.getInstance();\n+            String clusterName = registryService.getServiceGroup(transactionServiceGroup);\n+\n+            if (StringUtils.isBlank(clusterName)) {\n+                LOGGER.error(\"can not get cluster name in registry config '{}{}', please make sure registry config correct\",\n+                        ConfigurationKeys.SERVICE_GROUP_MAPPING_PREFIX,\n+                        transactionServiceGroup);\n+                return;\n+            }\n+\n+            if (!(registryService instanceof FileRegistryServiceImpl)) {\n+                LOGGER.error(\"no available service found, please make sure registry config correct and keep your seata server running\");\n+            }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjM0NDcyMw=="}, "originalCommit": {"oid": "cd7ee1b1a4e4a7b264799ab9e62b236fee980e04"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjM1MTQwMw==", "bodyText": "In my opinion, it is better for the getAvailServerList method to return null if the list is empty.", "url": "https://github.com/seata/seata/pull/3117#discussion_r496351403", "createdAt": "2020-09-29T03:06:41Z", "author": {"login": "wangliang181230"}, "path": "core/src/main/java/io/seata/core/rpc/netty/NettyClientChannelManager.java", "diffHunk": "@@ -165,10 +169,19 @@ void reconnect(String transactionServiceGroup) {\n             return;\n         }\n         if (CollectionUtils.isEmpty(availList)) {\n-            String serviceGroup = RegistryFactory.getInstance()\n-                                                 .getServiceGroup(transactionServiceGroup);\n-            LOGGER.error(\"no available service '{}' found, please make sure registry config correct\", serviceGroup);\n-            return;\n+            RegistryService registryService = RegistryFactory.getInstance();\n+            String clusterName = registryService.getServiceGroup(transactionServiceGroup);\n+\n+            if (StringUtils.isBlank(clusterName)) {\n+                LOGGER.error(\"can not get cluster name in registry config '{}{}', please make sure registry config correct\",\n+                        ConfigurationKeys.SERVICE_GROUP_MAPPING_PREFIX,\n+                        transactionServiceGroup);\n+                return;\n+            }\n+\n+            if (!(registryService instanceof FileRegistryServiceImpl)) {\n+                LOGGER.error(\"no available service found, please make sure registry config correct and keep your seata server running\");\n+            }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjM0NDcyMw=="}, "originalCommit": {"oid": "cd7ee1b1a4e4a7b264799ab9e62b236fee980e04"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjM1NDE3OA==", "bodyText": "The current method should not consider how the getAvailServerList is implemented.\nIf the codes of getAvailServerList changed, it will throw NPE.\n\nfixed,please review it", "url": "https://github.com/seata/seata/pull/3117#discussion_r496354178", "createdAt": "2020-09-29T03:18:05Z", "author": {"login": "PeineLiang"}, "path": "core/src/main/java/io/seata/core/rpc/netty/NettyClientChannelManager.java", "diffHunk": "@@ -165,10 +169,19 @@ void reconnect(String transactionServiceGroup) {\n             return;\n         }\n         if (CollectionUtils.isEmpty(availList)) {\n-            String serviceGroup = RegistryFactory.getInstance()\n-                                                 .getServiceGroup(transactionServiceGroup);\n-            LOGGER.error(\"no available service '{}' found, please make sure registry config correct\", serviceGroup);\n-            return;\n+            RegistryService registryService = RegistryFactory.getInstance();\n+            String clusterName = registryService.getServiceGroup(transactionServiceGroup);\n+\n+            if (StringUtils.isBlank(clusterName)) {\n+                LOGGER.error(\"can not get cluster name in registry config '{}{}', please make sure registry config correct\",\n+                        ConfigurationKeys.SERVICE_GROUP_MAPPING_PREFIX,\n+                        transactionServiceGroup);\n+                return;\n+            }\n+\n+            if (!(registryService instanceof FileRegistryServiceImpl)) {\n+                LOGGER.error(\"no available service found, please make sure registry config correct and keep your seata server running\");\n+            }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjM0NDcyMw=="}, "originalCommit": {"oid": "cd7ee1b1a4e4a7b264799ab9e62b236fee980e04"}, "originalPosition": 33}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEwNzgzNjg4OnYy", "diffSide": "RIGHT", "path": "core/src/main/java/io/seata/core/rpc/netty/NettyClientChannelManager.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQwNjoyMzoxOFrOHZci_Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQwODozODozMFrOHc72pA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjQ0NDE1Nw==", "bodyText": "Is it better to prompt the cluster name here?", "url": "https://github.com/seata/seata/pull/3117#discussion_r496444157", "createdAt": "2020-09-29T06:23:18Z", "author": {"login": "wangliang181230"}, "path": "core/src/main/java/io/seata/core/rpc/netty/NettyClientChannelManager.java", "diffHunk": "@@ -165,9 +169,19 @@ void reconnect(String transactionServiceGroup) {\n             return;\n         }\n         if (CollectionUtils.isEmpty(availList)) {\n-            String serviceGroup = RegistryFactory.getInstance()\n-                                                 .getServiceGroup(transactionServiceGroup);\n-            LOGGER.error(\"no available service '{}' found, please make sure registry config correct\", serviceGroup);\n+            RegistryService registryService = RegistryFactory.getInstance();\n+            String clusterName = registryService.getServiceGroup(transactionServiceGroup);\n+\n+            if (StringUtils.isBlank(clusterName)) {\n+                LOGGER.error(\"can not get cluster name in registry config '{}{}', please make sure registry config correct\",\n+                        ConfigurationKeys.SERVICE_GROUP_MAPPING_PREFIX,\n+                        transactionServiceGroup);\n+                return;\n+            }\n+\n+            if (!(registryService instanceof FileRegistryServiceImpl)) {\n+                LOGGER.error(\"no available service found, please make sure registry config correct and keep your seata server running\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "21071195d17add28ae85ff69438811e1ca31e9e3"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDEwMjgyMA==", "bodyText": "Is it better to prompt the cluster name here?\n\nfixed,please review it", "url": "https://github.com/seata/seata/pull/3117#discussion_r500102820", "createdAt": "2020-10-06T08:38:30Z", "author": {"login": "PeineLiang"}, "path": "core/src/main/java/io/seata/core/rpc/netty/NettyClientChannelManager.java", "diffHunk": "@@ -165,9 +169,19 @@ void reconnect(String transactionServiceGroup) {\n             return;\n         }\n         if (CollectionUtils.isEmpty(availList)) {\n-            String serviceGroup = RegistryFactory.getInstance()\n-                                                 .getServiceGroup(transactionServiceGroup);\n-            LOGGER.error(\"no available service '{}' found, please make sure registry config correct\", serviceGroup);\n+            RegistryService registryService = RegistryFactory.getInstance();\n+            String clusterName = registryService.getServiceGroup(transactionServiceGroup);\n+\n+            if (StringUtils.isBlank(clusterName)) {\n+                LOGGER.error(\"can not get cluster name in registry config '{}{}', please make sure registry config correct\",\n+                        ConfigurationKeys.SERVICE_GROUP_MAPPING_PREFIX,\n+                        transactionServiceGroup);\n+                return;\n+            }\n+\n+            if (!(registryService instanceof FileRegistryServiceImpl)) {\n+                LOGGER.error(\"no available service found, please make sure registry config correct and keep your seata server running\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjQ0NDE1Nw=="}, "originalCommit": {"oid": "21071195d17add28ae85ff69438811e1ca31e9e3"}, "originalPosition": 31}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1428, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}