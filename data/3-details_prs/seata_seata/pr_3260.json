{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE1OTgzNTEy", "number": 3260, "title": "optimize: use PriorityQueue to simply ShutdownHook", "bodyText": "\u2160. Describe what this PR did\nUse PriorityQueue to replace TreeSet, so that ShutdownHook's logic could be more clearlly and simple.", "createdAt": "2020-11-05T11:11:05Z", "url": "https://github.com/seata/seata/pull/3260", "merged": true, "mergeCommit": {"oid": "15f0d6e871f42fec2da4334cb70f329b1f491e06"}, "closed": true, "closedAt": "2020-11-23T02:24:47Z", "author": {"login": "selfishlover"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdZgWnCAH2gAyNTE1OTgzNTEyOjI1MzA4NGYwY2I2ODE3ZDdlNjNkOTkzOTMxNTFkM2Y5ZTY4Y2U2ZjY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdfLqs0gFqTUzNjE0OTMyNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "253084f0cb6817d7e63d99393151d3f9e68ce6f6", "author": {"user": {"login": "selfishlover", "name": null}}, "url": "https://github.com/seata/seata/commit/253084f0cb6817d7e63d99393151d3f9e68ce6f6", "committedDate": "2020-11-05T11:07:00Z", "message": "optimize: use PriorityQueue to simply ShutdownHook"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5e5bcd2c3f535b9e4db5dbf0f125c413784c1510", "author": {"user": {"login": "xingfudeshi", "name": "xingfudeshi"}}, "url": "https://github.com/seata/seata/commit/5e5bcd2c3f535b9e4db5dbf0f125c413784c1510", "committedDate": "2020-11-11T03:41:21Z", "message": "Merge branch 'develop' into optimize-ShutdownHook"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI3OTE5MDU5", "url": "https://github.com/seata/seata/pull/3260#pullrequestreview-527919059", "createdAt": "2020-11-11T07:22:15Z", "commit": {"oid": "5e5bcd2c3f535b9e4db5dbf0f125c413784c1510"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQwNzoyMjoxNVrOHxBSig==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQwNzoyMjoxNVrOHxBSig==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTE2MzQwMg==", "bodyText": "public", "url": "https://github.com/seata/seata/pull/3260#discussion_r521163402", "createdAt": "2020-11-11T07:22:15Z", "author": {"login": "a364176773"}, "path": "core/src/test/java/io/seata/core/rpc/ShutdownHookTest.java", "diffHunk": "@@ -0,0 +1,90 @@\n+/*\n+ *  Copyright 1999-2019 Seata.io Group.\n+ *\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ */\n+package io.seata.core.rpc;\n+\n+import org.junit.jupiter.api.BeforeAll;\n+import org.junit.jupiter.api.Test;\n+\n+import java.util.List;\n+import java.util.Random;\n+import java.util.stream.Collectors;\n+import java.util.stream.IntStream;\n+import java.util.stream.Stream;\n+\n+import static org.junit.jupiter.api.Assertions.assertTrue;\n+\n+import static org.mockito.Mockito.verify;\n+import static org.mockito.Mockito.times;\n+import static org.mockito.Mockito.spy;\n+\n+class ShutdownHookTest {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5e5bcd2c3f535b9e4db5dbf0f125c413784c1510"}, "originalPosition": 33}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2282ece148629cb39e09e4648a8bcd0e37f343c3", "author": {"user": {"login": "selfishlover", "name": null}}, "url": "https://github.com/seata/seata/commit/2282ece148629cb39e09e4648a8bcd0e37f343c3", "committedDate": "2020-11-12T04:20:19Z", "message": "add public"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "57c719f69fa8e9597b46b743d43199324a307a7d", "author": {"user": {"login": "selfishlover", "name": null}}, "url": "https://github.com/seata/seata/commit/57c719f69fa8e9597b46b743d43199324a307a7d", "committedDate": "2020-11-12T04:21:01Z", "message": "Merge remote-tracking branch 'origin/optimize-ShutdownHook' into optimize-ShutdownHook"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI4ODEzMTE0", "url": "https://github.com/seata/seata/pull/3260#pullrequestreview-528813114", "createdAt": "2020-11-12T07:37:03Z", "commit": {"oid": "57c719f69fa8e9597b46b743d43199324a307a7d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f76238fa2246de0a1c526efa0ad7d96e0e9429d5", "author": {"user": {"login": "l81893521", "name": "will"}}, "url": "https://github.com/seata/seata/commit/f76238fa2246de0a1c526efa0ad7d96e0e9429d5", "committedDate": "2020-11-23T01:35:29Z", "message": "Merge branch 'develop' into optimize-ShutdownHook"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2654e3a623db345ed560c4b019925c0a51d70c2e", "author": {"user": {"login": "l81893521", "name": "will"}}, "url": "https://github.com/seata/seata/commit/2654e3a623db345ed560c4b019925c0a51d70c2e", "committedDate": "2020-11-23T01:40:16Z", "message": "Merge branch 'develop' into optimize-ShutdownHook"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM2MTQ5MzI1", "url": "https://github.com/seata/seata/pull/3260#pullrequestreview-536149325", "createdAt": "2020-11-23T02:24:29Z", "commit": {"oid": "2654e3a623db345ed560c4b019925c0a51d70c2e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3494, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}