{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU0MzQ0MTMy", "number": 2913, "title": "feature: The data source proxy mode can be selected as AT or XA", "bodyText": "\u2160. Describe what this PR did\nfeature: The data source proxy mode can be selected as AT or XA\n\u901a\u8fc7\u914d\u7f6e\u542f\u7528\u81ea\u52a8\u4ee3\u7406\u65f6\uff1a\n\nseata.dataSourceProxyMode=AT #\u9ed8\u8ba4\u503c\uff0c\u53ef\u4ee5\u4e0d\u7528\u624b\u52a8\u914d\u7f6e\n\u6216\nseata.dataSourceProxyMode=XA\n\n\u901a\u8fc7\u6ce8\u89e3\u542f\u7528\u81ea\u52a8\u4ee3\u7406\u65f6\uff1a\n\n@EnableAutoDataSourceProxy(dataSourceProxyMode = 'AT')\n\u6216\n@EnableAutoDataSourceProxy(dataSourceProxyMode = 'XA')\n\n\u2161. Does this pull request fix one issue?\n\n\u2162. Why don't you add test cases (unit test/integration test)?\n\u2163. Describe how to verify it\n\u2164. Special notes for reviews", "createdAt": "2020-07-21T10:06:08Z", "url": "https://github.com/seata/seata/pull/2913", "merged": true, "mergeCommit": {"oid": "675144b0d5535ff6940ec62a880147921eb09964"}, "closed": true, "closedAt": "2020-07-30T09:35:58Z", "author": {"login": "wangliang181230"}, "timelineItems": {"totalCount": 17, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc3BYm5AH2gAyNDU0MzQ0MTMyOjcxMDQzMzNiMWQ0ZmNlNDI3MzhhOGI3M2Q2ZGYwMWI4Yjk4YmIxNDg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc5XdBggH2gAyNDU0MzQ0MTMyOmZlNWUyYmUyNjQ0OTM3NGVkMTQzMGEwNDkyMTAzNGUyMjRhZTI3NjY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "7104333b1d4fce42738a8b73d6df01b8b98bb148", "author": {"user": {"login": "wangliang181230", "name": "WangLiang/\u738b\u826f"}}, "url": "https://github.com/seata/seata/commit/7104333b1d4fce42738a8b73d6df01b8b98bb148", "committedDate": "2020-07-21T07:48:42Z", "message": "feature: The data source proxy mode can be selected as AT or XA"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "59d422019ecf6b1028b1b2220c688e7d412b9729", "author": {"user": {"login": "wangliang181230", "name": "WangLiang/\u738b\u826f"}}, "url": "https://github.com/seata/seata/commit/59d422019ecf6b1028b1b2220c688e7d412b9729", "committedDate": "2020-07-21T09:45:10Z", "message": "RootContext.getBranchType()\u65b9\u6cd5\u5728\u542f\u7528XA\u6a21\u5f0f\u65f6\uff0c\u9ed8\u8ba4\u83b7\u53d6\u5230\u7684\u662fXA\u3002"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUyNDE2NDk3", "url": "https://github.com/seata/seata/pull/2913#pullrequestreview-452416497", "createdAt": "2020-07-21T12:45:45Z", "commit": {"oid": "59d422019ecf6b1028b1b2220c688e7d412b9729"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxMjo0NTo0NVrOG02NRg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxMjo0NTo0NVrOG02NRg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODA2NzI3MA==", "bodyText": "dataSourceProxyMode set to constant and add default values", "url": "https://github.com/seata/seata/pull/2913#discussion_r458067270", "createdAt": "2020-07-21T12:45:45Z", "author": {"login": "a364176773"}, "path": "core/src/main/java/io/seata/core/context/RootContext.java", "diffHunk": "@@ -37,6 +38,8 @@ private RootContext() {\n \n     private static final Logger LOGGER = LoggerFactory.getLogger(RootContext.class);\n \n+    private static final String DATA_SOURCE_PROXY_MODE = ConfigurationFactory.getInstance().getConfig(\"dataSourceProxyMode\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "59d422019ecf6b1028b1b2220c688e7d412b9729"}, "originalPosition": 12}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6e904a47589beaa0b05f91581210b99706ddc5b9", "author": {"user": {"login": "wangliang181230", "name": "WangLiang/\u738b\u826f"}}, "url": "https://github.com/seata/seata/commit/6e904a47589beaa0b05f91581210b99706ddc5b9", "committedDate": "2020-07-21T13:49:47Z", "message": "\u914d\u7f6e\u53ca\u914d\u7f6e\u9ed8\u8ba4\u503c\uff0c\u4f7f\u7528\u5e38\u91cf\u3002"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUyNTI2NTgz", "url": "https://github.com/seata/seata/pull/2913#pullrequestreview-452526583", "createdAt": "2020-07-21T14:39:40Z", "commit": {"oid": "6e904a47589beaa0b05f91581210b99706ddc5b9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9435e7a6931e127140e98528eba3c602c3996a2e", "author": {"user": {"login": "wangliang181230", "name": "WangLiang/\u738b\u826f"}}, "url": "https://github.com/seata/seata/commit/9435e7a6931e127140e98528eba3c602c3996a2e", "committedDate": "2020-07-21T15:12:28Z", "message": "springboot\u9879\u76ee\u4e2d\uff0c\u6dfb\u52a0`seata.dataSourceProxyMode`\u914d\u7f6e\u7684\u63cf\u8ff0\u53ca\u53ef\u9009\u503c\u63d0\u793a\u3002"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4a9c4ddb482bdd2e1ba2c9e39c93dd6c8de45bca", "author": {"user": {"login": "wangliang181230", "name": "WangLiang/\u738b\u826f"}}, "url": "https://github.com/seata/seata/commit/4a9c4ddb482bdd2e1ba2c9e39c93dd6c8de45bca", "committedDate": "2020-07-21T15:14:15Z", "message": "\u987a\u4fbf\u4fee\u590d\u4e00\u4e2a\u5c0fBUG\u3002"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dc0d082509f49f30966268f551e40cde632c8992", "author": {"user": {"login": "wangliang181230", "name": "WangLiang/\u738b\u826f"}}, "url": "https://github.com/seata/seata/commit/dc0d082509f49f30966268f551e40cde632c8992", "committedDate": "2020-07-21T15:44:07Z", "message": "Revert \"\u987a\u4fbf\u4fee\u590d\u4e00\u4e2a\u5c0fBUG\u3002\"\n\nThis reverts commit 4a9c4ddb"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eb418f1d857e2a47c0d997c96f7b33f9d6d6a4c1", "author": {"user": {"login": "a364176773", "name": "FUNKYE"}}, "url": "https://github.com/seata/seata/commit/eb418f1d857e2a47c0d997c96f7b33f9d6d6a4c1", "committedDate": "2020-07-22T02:23:26Z", "message": "Merge branch 'develop' into feature-XA-AT-switch"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "75e882a80b0515214efcc19ba843095861af012d", "author": {"user": {"login": "a364176773", "name": "FUNKYE"}}, "url": "https://github.com/seata/seata/commit/75e882a80b0515214efcc19ba843095861af012d", "committedDate": "2020-07-22T10:01:40Z", "message": "Merge branch 'develop' into feature-XA-AT-switch"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "467b60a96b906b58c5d2f74fd31aa93c05a2c247", "author": {"user": {"login": "wangliang181230", "name": "WangLiang/\u738b\u826f"}}, "url": "https://github.com/seata/seata/commit/467b60a96b906b58c5d2f74fd31aa93c05a2c247", "committedDate": "2020-07-22T10:11:31Z", "message": "Merge branch 'develop' into feature-XA-AT-switch"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "39f2c0087c7c93e0d1551389e490277055c2fe55", "author": {"user": {"login": "a364176773", "name": "FUNKYE"}}, "url": "https://github.com/seata/seata/commit/39f2c0087c7c93e0d1551389e490277055c2fe55", "committedDate": "2020-07-23T01:45:00Z", "message": "Merge branch 'develop' into feature-XA-AT-switch"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "35fc190511dc24f5c75eab192fc74bfb5450aa01", "author": {"user": {"login": "xingfudeshi", "name": "xingfudeshi"}}, "url": "https://github.com/seata/seata/commit/35fc190511dc24f5c75eab192fc74bfb5450aa01", "committedDate": "2020-07-24T06:44:14Z", "message": "Merge branch 'develop' into feature-XA-AT-switch"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU0NjY3MTU0", "url": "https://github.com/seata/seata/pull/2913#pullrequestreview-454667154", "createdAt": "2020-07-24T06:54:41Z", "commit": {"oid": "35fc190511dc24f5c75eab192fc74bfb5450aa01"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1NDA1MzM5", "url": "https://github.com/seata/seata/pull/2913#pullrequestreview-455405339", "createdAt": "2020-07-26T23:36:33Z", "commit": {"oid": "35fc190511dc24f5c75eab192fc74bfb5450aa01"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNlQyMzozNjozM1rOG3QCjw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNlQyMzozNjozM1rOG3QCjw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDU4NzY2Mw==", "bodyText": "\u662f\u5426\u53ef\u4ee5\u4e0d\u589e\u52a0\u914d\u7f6e\uff1f\u6bd4\u5982\uff0c\u76f4\u63a5\u53bb\u8bc6\u522b\u5f53\u524d\u914d\u7f6e\u7684\u4e8b\u52a1\u6a21\u5f0f\uff08AT\u3001TCC\u3001Saga\u3001XA\uff09\u6765\u8d77\u5230\u8fd9\u4e2a\u65b0\u589e\u914d\u7f6e\u7684\u4f5c\u7528\uff1f\u6bd5\u7adf\u914d\u7f6e\u8d8a\u591a\uff0c\u7ed9\u7528\u6237\u7684\u8ba4\u77e5\u8d1f\u62c5\u4e5f\u8d8a\u91cd\u3002", "url": "https://github.com/seata/seata/pull/2913#discussion_r460587663", "createdAt": "2020-07-26T23:36:33Z", "author": {"login": "sharajava"}, "path": "script/client/spring/application.yml", "diffHunk": "@@ -3,6 +3,7 @@ seata:\n   application-id: applicationName\n   tx-service-group: my_test_tx_group\n   enable-auto-data-source-proxy: true\n+  data-source-proxy-mode: AT", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "35fc190511dc24f5c75eab192fc74bfb5450aa01"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1NDQxNTk0", "url": "https://github.com/seata/seata/pull/2913#pullrequestreview-455441594", "createdAt": "2020-07-27T02:46:19Z", "commit": {"oid": "35fc190511dc24f5c75eab192fc74bfb5450aa01"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fe5e2be26449374ed1430a04921034e224ae2766", "author": {"user": {"login": "a364176773", "name": "FUNKYE"}}, "url": "https://github.com/seata/seata/commit/fe5e2be26449374ed1430a04921034e224ae2766", "committedDate": "2020-07-28T14:39:17Z", "message": "Merge branch 'develop' into feature-XA-AT-switch"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3825, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}