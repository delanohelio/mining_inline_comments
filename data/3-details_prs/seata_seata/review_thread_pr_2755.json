{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI3MDc4MTUz", "number": 2755, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QxMDoxNDo1NFrOECF0eQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QxMDoxNDo1NFrOECF0eQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwNjI3OTYxOnYy", "diffSide": "RIGHT", "path": "serializer/seata-serializer-seata/src/main/java/io/seata/serializer/seata/protocol/transaction/AbstractBranchEndResponseCodec.java", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QxMDoxNDo1NFrOGeVXCw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQwMjo1NDoyNlrOGe0Ehg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDQ2MDQyNw==", "bodyText": "I think the main problem is that what kind of situation would let the branch status null in branch commit or branch rollback.", "url": "https://github.com/seata/seata/pull/2755#discussion_r434460427", "createdAt": "2020-06-03T10:14:54Z", "author": {"login": "l81893521"}, "path": "serializer/seata-serializer-seata/src/main/java/io/seata/serializer/seata/protocol/transaction/AbstractBranchEndResponseCodec.java", "diffHunk": "@@ -52,7 +52,7 @@\n             out.writeShort((short)0);\n         }\n         out.writeLong(branchId);\n-        out.writeByte(branchStatus.getCode());\n+        out.writeByte((branchStatus == null ? BranchStatus.Unknown : branchStatus).getCode());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "204ef9ba27148c2f8a615e2660c8c44a78445584"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDQ2MTI3NQ==", "bodyText": "because when branch commit or rollback, the branch status should not be null.", "url": "https://github.com/seata/seata/pull/2755#discussion_r434461275", "createdAt": "2020-06-03T10:16:29Z", "author": {"login": "l81893521"}, "path": "serializer/seata-serializer-seata/src/main/java/io/seata/serializer/seata/protocol/transaction/AbstractBranchEndResponseCodec.java", "diffHunk": "@@ -52,7 +52,7 @@\n             out.writeShort((short)0);\n         }\n         out.writeLong(branchId);\n-        out.writeByte(branchStatus.getCode());\n+        out.writeByte((branchStatus == null ? BranchStatus.Unknown : branchStatus).getCode());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDQ2MDQyNw=="}, "originalCommit": {"oid": "204ef9ba27148c2f8a615e2660c8c44a78445584"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDQ2MjQ0Mw==", "bodyText": "OK, I'll find out why.", "url": "https://github.com/seata/seata/pull/2755#discussion_r434462443", "createdAt": "2020-06-03T10:18:33Z", "author": {"login": "wangliang181230"}, "path": "serializer/seata-serializer-seata/src/main/java/io/seata/serializer/seata/protocol/transaction/AbstractBranchEndResponseCodec.java", "diffHunk": "@@ -52,7 +52,7 @@\n             out.writeShort((short)0);\n         }\n         out.writeLong(branchId);\n-        out.writeByte(branchStatus.getCode());\n+        out.writeByte((branchStatus == null ? BranchStatus.Unknown : branchStatus).getCode());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDQ2MDQyNw=="}, "originalCommit": {"oid": "204ef9ba27148c2f8a615e2660c8c44a78445584"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDk2MzU5MA==", "bodyText": "I think the main problem is that what kind of situation would let the branch status null in branch commit or branch rollback.\n\nI found the cause of the problem and fixed it.", "url": "https://github.com/seata/seata/pull/2755#discussion_r434963590", "createdAt": "2020-06-04T02:54:26Z", "author": {"login": "wangliang181230"}, "path": "serializer/seata-serializer-seata/src/main/java/io/seata/serializer/seata/protocol/transaction/AbstractBranchEndResponseCodec.java", "diffHunk": "@@ -52,7 +52,7 @@\n             out.writeShort((short)0);\n         }\n         out.writeLong(branchId);\n-        out.writeByte(branchStatus.getCode());\n+        out.writeByte((branchStatus == null ? BranchStatus.Unknown : branchStatus).getCode());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDQ2MDQyNw=="}, "originalCommit": {"oid": "204ef9ba27148c2f8a615e2660c8c44a78445584"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1464, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}