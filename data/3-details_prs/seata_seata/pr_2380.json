{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg1NTAyMjIw", "number": 2380, "title": "feature: support yml configuration", "bodyText": "\u2160. Describe what this PR did\n\u2161. Does this pull request fix one issue?\n\nfix #2314\n\u2162. Why don't you add test cases (unit test/integration test)?\n\u2163. Describe how to verify it\nI used to verify seata-simples\n\u2164. Special notes for reviews\nauto load *.conf , *.properties or *.yml  file , according to 'convention over configuration'", "createdAt": "2020-03-09T10:29:23Z", "url": "https://github.com/seata/seata/pull/2380", "merged": true, "mergeCommit": {"oid": "1a150bd3a103d7f76a4416ef67da19175ccf65b1"}, "closed": true, "closedAt": "2020-10-21T06:31:55Z", "author": {"login": "wangwei-ying"}, "timelineItems": {"totalCount": 76, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcKnu7kgH2gAyMzg1NTAyMjIwOmI1YWE3M2NjYWRjZTc1MmFiZGZiMDM2OGQ1NjVkN2IwM2M5NzFhM2Y=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdUlIamAH2gAyMzg1NTAyMjIwOmIzNjVhNjVkNzFmMWQ3NzNkNjAxYzk0OWU3Nzg4MTgyMjJhZGJmMWI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b5aa73ccadce752abdfb0368d565d7b03c971a3f", "author": {"user": {"login": "wangwei-ying", "name": "wangwei ying"}}, "url": "https://github.com/seata/seata/commit/b5aa73ccadce752abdfb0368d565d7b03c971a3f", "committedDate": "2020-03-05T09:02:53Z", "message": "registry.conf suffix support customize"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f10e973b2cd10baeb68641738981368d63cf9eff", "author": {"user": {"login": "wangwei-ying", "name": "wangwei ying"}}, "url": "https://github.com/seata/seata/commit/f10e973b2cd10baeb68641738981368d63cf9eff", "committedDate": "2020-03-06T09:43:50Z", "message": "add yaml parseService"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f821e20a17562e7aac5f018cfffa323e5f6048f2", "author": {"user": {"login": "wangwei-ying", "name": "wangwei ying"}}, "url": "https://github.com/seata/seata/commit/f821e20a17562e7aac5f018cfffa323e5f6048f2", "committedDate": "2020-03-06T09:52:19Z", "message": "add test case"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "57cef371d79d218e1d131c2aa5ca0afb97e8c691", "author": {"user": {"login": "wangwei-ying", "name": "wangwei ying"}}, "url": "https://github.com/seata/seata/commit/57cef371d79d218e1d131c2aa5ca0afb97e8c691", "committedDate": "2020-03-09T03:07:56Z", "message": "add test case"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b0bccb25737142110efc5d86edc07670cdc63854", "author": {"user": {"login": "wangwei-ying", "name": "wangwei ying"}}, "url": "https://github.com/seata/seata/commit/b0bccb25737142110efc5d86edc07670cdc63854", "committedDate": "2020-03-09T03:53:28Z", "message": "fix test  error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "87b4e712d6c92ba8633fe869756b0361dc8a16d8", "author": {"user": {"login": "wangwei-ying", "name": "wangwei ying"}}, "url": "https://github.com/seata/seata/commit/87b4e712d6c92ba8633fe869756b0361dc8a16d8", "committedDate": "2020-03-09T09:26:42Z", "message": "add projectDir first match"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f2e206c08b73e65912f912ea18f07450e43da44f", "author": {"user": {"login": "wangwei-ying", "name": "wangwei ying"}}, "url": "https://github.com/seata/seata/commit/f2e206c08b73e65912f912ea18f07450e43da44f", "committedDate": "2020-03-09T10:29:40Z", "message": "Merge branch 'develop' into feature/registry.conf-customize"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d19645a3db0eea0cd470105b9d968cac3061ab3c", "author": {"user": {"login": "wangwei-ying", "name": "wangwei ying"}}, "url": "https://github.com/seata/seata/commit/d19645a3db0eea0cd470105b9d968cac3061ab3c", "committedDate": "2020-03-29T09:16:18Z", "message": "Merge branch 'develop' into feature/registry.conf-customize"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bc1a10844c233595ace32fc0fd0d981dd02cd166", "author": {"user": {"login": "wangwei-ying", "name": "wangwei ying"}}, "url": "https://github.com/seata/seata/commit/bc1a10844c233595ace32fc0fd0d981dd02cd166", "committedDate": "2020-03-30T02:06:02Z", "message": "fix test case"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "51b74688400da33328f557f574bb00ab8155d87d", "author": {"user": {"login": "wangwei-ying", "name": "wangwei ying"}}, "url": "https://github.com/seata/seata/commit/51b74688400da33328f557f574bb00ab8155d87d", "committedDate": "2020-03-30T09:53:17Z", "message": "fix ci error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "889ce62b8e5622df71d2c0646b9e5c8a3cb820b5", "author": {"user": {"login": "wangwei-ying", "name": "wangwei ying"}}, "url": "https://github.com/seata/seata/commit/889ce62b8e5622df71d2c0646b9e5c8a3cb820b5", "committedDate": "2020-03-31T14:22:56Z", "message": "Merge branch 'develop' into feature/registry.conf-customize"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fadac0e4c0423a643d77ba3a72a4c04f302c6560", "author": {"user": {"login": "zjinlei", "name": null}}, "url": "https://github.com/seata/seata/commit/fadac0e4c0423a643d77ba3a72a4c04f302c6560", "committedDate": "2020-04-05T14:15:19Z", "message": "Merge branch 'develop' into feature/registry.conf-customize"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1e758b10651663d20e98ac30ced13b37a8d833cb", "author": {"user": {"login": "wangwei-ying", "name": "wangwei ying"}}, "url": "https://github.com/seata/seata/commit/1e758b10651663d20e98ac30ced13b37a8d833cb", "committedDate": "2020-04-08T02:03:14Z", "message": "fix bug"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "509c15fea93dddd8ef7e45aedc27cab2e96c8daa", "author": {"user": {"login": "wangwei-ying", "name": "wangwei ying"}}, "url": "https://github.com/seata/seata/commit/509c15fea93dddd8ef7e45aedc27cab2e96c8daa", "committedDate": "2020-04-24T02:35:55Z", "message": "Merge branch 'develop' into feature/registry.conf-customize\n\n# Conflicts:\n#\tconfig/seata-config-core/src/main/java/io/seata/config/FileConfiguration.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "39e3849ef44d67075f70985cf75b5001976e3e61", "author": {"user": {"login": "wangwei-ying", "name": "wangwei ying"}}, "url": "https://github.com/seata/seata/commit/39e3849ef44d67075f70985cf75b5001976e3e61", "committedDate": "2020-04-24T03:18:08Z", "message": "resolve conflicts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "49c8a4cf5662ea067dc091401dd9fca0016067eb", "author": {"user": {"login": "wangwei-ying", "name": "wangwei ying"}}, "url": "https://github.com/seata/seata/commit/49c8a4cf5662ea067dc091401dd9fca0016067eb", "committedDate": "2020-04-24T03:21:34Z", "message": "Merge branch 'develop' into feature/registry.conf-customize"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4ba513f53e230c95d72dd8f1b33bc82a4ade4990", "author": {"user": {"login": "wangwei-ying", "name": "wangwei ying"}}, "url": "https://github.com/seata/seata/commit/4ba513f53e230c95d72dd8f1b33bc82a4ade4990", "committedDate": "2020-04-24T03:30:52Z", "message": "Merge branch 'develop' into feature/registry.conf-customize"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6b9fcb72347f59471e8be26717c2f6ed515b87ff", "author": {"user": {"login": "wangwei-ying", "name": "wangwei ying"}}, "url": "https://github.com/seata/seata/commit/6b9fcb72347f59471e8be26717c2f6ed515b87ff", "committedDate": "2020-06-01T10:05:37Z", "message": "Merge branch 'develop' of github.com:seata/seata into feature/registry.conf-customize\n\n\u0001 Conflicts:\n\u0001\tbom/pom.xml\n\u0001\tconfig/seata-config-core/src/main/java/io/seata/config/ConfigurationFactory.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d68a5031c319ef907138f6958e60dccb31331189", "author": {"user": {"login": "wangwei-ying", "name": "wangwei ying"}}, "url": "https://github.com/seata/seata/commit/d68a5031c319ef907138f6958e60dccb31331189", "committedDate": "2020-06-01T10:09:01Z", "message": "Merge branch 'feature/registry.conf-customize' of https://github.com/wangwei-ying/seata into feature/registry.conf-customize"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b6457c11fc1890f305af0815505b10fbf6410e07", "author": {"user": {"login": "wangwei-ying", "name": "wangwei ying"}}, "url": "https://github.com/seata/seata/commit/b6457c11fc1890f305af0815505b10fbf6410e07", "committedDate": "2020-06-03T03:16:48Z", "message": "Merge branch 'develop' into feature/registry.conf-customize"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1b60e00acb535a50449d7770b92966a8fd0783c7", "author": {"user": {"login": "jsbxyyx", "name": "jsbxyyx"}}, "url": "https://github.com/seata/seata/commit/1b60e00acb535a50449d7770b92966a8fd0783c7", "committedDate": "2020-06-04T01:43:44Z", "message": "Merge branch 'develop' into feature/registry.conf-customize"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ac6a573dd822793438e7198827a1aa629d49560e", "author": {"user": {"login": "wangwei-ying", "name": "wangwei ying"}}, "url": "https://github.com/seata/seata/commit/ac6a573dd822793438e7198827a1aa629d49560e", "committedDate": "2020-06-29T12:06:45Z", "message": "Merge branch 'develop' of github.com:seata/seata into feature/registry.conf-customize\n\n\u0001 Conflicts:\n\u0001\tconfig/seata-config-core/pom.xml\n\u0001\tconfig/seata-config-core/src/main/java/io/seata/config/ConfigurationFactory.java\n\u0001\tconfig/seata-config-core/src/main/java/io/seata/config/FileConfiguration.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5f83889be1327340625eb0f581a2717f97269ac7", "author": {"user": {"login": "wangwei-ying", "name": "wangwei ying"}}, "url": "https://github.com/seata/seata/commit/5f83889be1327340625eb0f581a2717f97269ac7", "committedDate": "2020-06-29T12:07:49Z", "message": "resolve conflicts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a1aff936eec7cd6aff56efb72d54bb3034feb83b", "author": {"user": {"login": "wangwei-ying", "name": "wangwei ying"}}, "url": "https://github.com/seata/seata/commit/a1aff936eec7cd6aff56efb72d54bb3034feb83b", "committedDate": "2020-06-29T13:23:48Z", "message": "clean code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "32adccef9f79f44481bae0009a069c5eccba1cc7", "author": {"user": {"login": "wangwei-ying", "name": "wangwei ying"}}, "url": "https://github.com/seata/seata/commit/32adccef9f79f44481bae0009a069c5eccba1cc7", "committedDate": "2020-06-29T14:45:27Z", "message": "fix config cache"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fe7b1c81643d7934eab07fe991c4f7c71ff264c8", "author": {"user": {"login": "wangwei-ying", "name": "wangwei ying"}}, "url": "https://github.com/seata/seata/commit/fe7b1c81643d7934eab07fe991c4f7c71ff264c8", "committedDate": "2020-06-29T14:46:33Z", "message": "code style"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "92212bc0921464a0f52381791edc5626939e0fdb", "author": {"user": {"login": "wangwei-ying", "name": "wangwei ying"}}, "url": "https://github.com/seata/seata/commit/92212bc0921464a0f52381791edc5626939e0fdb", "committedDate": "2020-06-29T15:10:03Z", "message": "resolve conflicts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7e5b5349b67fb2792b43b9f7c8a426380a2c8cdf", "author": {"user": {"login": "wangwei-ying", "name": "wangwei ying"}}, "url": "https://github.com/seata/seata/commit/7e5b5349b67fb2792b43b9f7c8a426380a2c8cdf", "committedDate": "2020-06-29T15:26:16Z", "message": "codestyle check"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2424628441646562e7df4d9dd95f4125b1740e5b", "author": {"user": {"login": "wangwei-ying", "name": "wangwei ying"}}, "url": "https://github.com/seata/seata/commit/2424628441646562e7df4d9dd95f4125b1740e5b", "committedDate": "2020-06-29T15:35:48Z", "message": "codestyle check"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d861846cb8867654d615c69b61d02af30f7e2995", "author": {"user": {"login": "wangwei-ying", "name": "wangwei ying"}}, "url": "https://github.com/seata/seata/commit/d861846cb8867654d615c69b61d02af30f7e2995", "committedDate": "2020-06-30T01:14:28Z", "message": "Merge branch 'develop' into feature/registry.conf-customize"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "654daf4fba0eee691f72b857b727325046557bbb", "author": {"user": {"login": "wangwei-ying", "name": "wangwei ying"}}, "url": "https://github.com/seata/seata/commit/654daf4fba0eee691f72b857b727325046557bbb", "committedDate": "2020-06-30T06:07:42Z", "message": "Merge branch 'develop' into feature/registry.conf-customize"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7dbef5692c27f44740b456ac4f540fe332c3b614", "author": {"user": {"login": "a364176773", "name": "FUNKYE"}}, "url": "https://github.com/seata/seata/commit/7dbef5692c27f44740b456ac4f540fe332c3b614", "committedDate": "2020-06-30T07:13:56Z", "message": "Merge branch 'develop' into feature/registry.conf-customize"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d095b7251dc6ebe9371b9f498150a99c2d335c8a", "author": {"user": {"login": "a364176773", "name": "FUNKYE"}}, "url": "https://github.com/seata/seata/commit/d095b7251dc6ebe9371b9f498150a99c2d335c8a", "committedDate": "2020-06-30T13:02:10Z", "message": "Merge branch 'develop' into feature/registry.conf-customize"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ff627e8b2ec7f65495f1ef28026891ed42603716", "author": {"user": {"login": "a364176773", "name": "FUNKYE"}}, "url": "https://github.com/seata/seata/commit/ff627e8b2ec7f65495f1ef28026891ed42603716", "committedDate": "2020-07-01T08:21:02Z", "message": "Merge branch 'develop' into feature/registry.conf-customize"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQwOTIwNjMx", "url": "https://github.com/seata/seata/pull/2380#pullrequestreview-440920631", "createdAt": "2020-07-01T14:26:39Z", "commit": {"oid": "ff627e8b2ec7f65495f1ef28026891ed42603716"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQxNDoyNjo0MFrOGroQ7Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQxNDozMjo0MVrOGroh0A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODQwMTY0NQ==", "bodyText": "unnecessary", "url": "https://github.com/seata/seata/pull/2380#discussion_r448401645", "createdAt": "2020-07-01T14:26:40Z", "author": {"login": "a364176773"}, "path": "config/seata-config-core/src/main/java/io/seata/config/FileConfigFactory.java", "diffHunk": "@@ -0,0 +1,83 @@\n+/*\n+ *  Copyright 1999-2019 Seata.io Group.\n+ *\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ */\n+package io.seata.config;\n+\n+import io.seata.common.loader.EnhancedServiceLoader;\n+import io.seata.config.file.FileConfig;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.io.File;\n+import java.util.LinkedHashMap;\n+import java.util.Set;\n+\n+/**\n+ * @author wangwei-ying\n+ */\n+public class FileConfigFactory {\n+\n+    private static final Logger LOGGER = LoggerFactory.getLogger(FileConfigFactory.class);\n+\n+    public static final String DEFAULT_TYPE = \"CONF\";\n+\n+    public static final String YAML_TYPE = \"YAML\";\n+\n+\n+    private static final LinkedHashMap<String, String> SUFFIX_MAP = new LinkedHashMap<String, String>(4) {\n+        {\n+            put(\"conf\", DEFAULT_TYPE);\n+            put(\"properties\", DEFAULT_TYPE);\n+            put(\"yml\", YAML_TYPE);\n+        }\n+    };\n+\n+\n+    public static FileConfig load() {\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ff627e8b2ec7f65495f1ef28026891ed42603716"}, "originalPosition": 49}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODQwNTk2OA==", "bodyText": "not in use", "url": "https://github.com/seata/seata/pull/2380#discussion_r448405968", "createdAt": "2020-07-01T14:32:41Z", "author": {"login": "a364176773"}, "path": "config/seata-config-core/src/main/java/io/seata/config/FileConfigFactory.java", "diffHunk": "@@ -0,0 +1,83 @@\n+/*\n+ *  Copyright 1999-2019 Seata.io Group.\n+ *\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ */\n+package io.seata.config;\n+\n+import io.seata.common.loader.EnhancedServiceLoader;\n+import io.seata.config.file.FileConfig;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.io.File;\n+import java.util.LinkedHashMap;\n+import java.util.Set;\n+\n+/**\n+ * @author wangwei-ying\n+ */\n+public class FileConfigFactory {\n+\n+    private static final Logger LOGGER = LoggerFactory.getLogger(FileConfigFactory.class);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ff627e8b2ec7f65495f1ef28026891ed42603716"}, "originalPosition": 32}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d8c86c9236ed8dea696730ba3385a25626e2e172", "author": {"user": {"login": "wangwei-ying", "name": "wangwei ying"}}, "url": "https://github.com/seata/seata/commit/d8c86c9236ed8dea696730ba3385a25626e2e172", "committedDate": "2020-07-02T02:32:46Z", "message": "Merge branch 'develop' into feature/registry.conf-customize"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4214df2f89f68fc3c71dc31daee8e7426a3f5921", "author": {"user": {"login": "wangwei-ying", "name": "wangwei ying"}}, "url": "https://github.com/seata/seata/commit/4214df2f89f68fc3c71dc31daee8e7426a3f5921", "committedDate": "2020-07-06T08:20:40Z", "message": "Merge branch 'develop' into feature/registry.conf-customize"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "88fe10b1e609c80ddf9af49ab9381e782b10c188", "author": {"user": {"login": "wangwei-ying", "name": "wangwei ying"}}, "url": "https://github.com/seata/seata/commit/88fe10b1e609c80ddf9af49ab9381e782b10c188", "committedDate": "2020-07-17T01:05:38Z", "message": "Merge branch 'develop' into feature/registry.conf-customize"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7cfee6597dc6f18b83937b639637028225f800f2", "author": {"user": {"login": "wangwei-ying", "name": "wangwei ying"}}, "url": "https://github.com/seata/seata/commit/7cfee6597dc6f18b83937b639637028225f800f2", "committedDate": "2020-07-17T01:05:01Z", "message": "clean code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "76cbd9e7de8ee44682a3caa1f20cb98108d1b2c4", "author": {"user": {"login": "wangwei-ying", "name": "wangwei ying"}}, "url": "https://github.com/seata/seata/commit/76cbd9e7de8ee44682a3caa1f20cb98108d1b2c4", "committedDate": "2020-07-17T01:09:32Z", "message": "codestyle check"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a363dd7d4d26f1a212a389c5e454c565868fa881", "author": {"user": {"login": "a364176773", "name": "FUNKYE"}}, "url": "https://github.com/seata/seata/commit/a363dd7d4d26f1a212a389c5e454c565868fa881", "committedDate": "2020-07-31T07:04:01Z", "message": "Merge branch 'develop' into feature/registry.conf-customize"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "77f06d8b0252c0e67b9bdc3bb3d1d0d82a005fe3", "author": {"user": {"login": "a364176773", "name": "FUNKYE"}}, "url": "https://github.com/seata/seata/commit/77f06d8b0252c0e67b9bdc3bb3d1d0d82a005fe3", "committedDate": "2020-08-04T12:23:52Z", "message": "Merge branch 'develop' into feature/registry.conf-customize"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "05b065728e9a19bde7abff447f809abe80594570", "author": {"user": {"login": "wangwei-ying", "name": "wangwei ying"}}, "url": "https://github.com/seata/seata/commit/05b065728e9a19bde7abff447f809abe80594570", "committedDate": "2020-08-05T15:31:51Z", "message": "fix projectDir first"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4db1dbd49a0f7298ff951c0b49300287f225a301", "author": {"user": {"login": "wangwei-ying", "name": "wangwei ying"}}, "url": "https://github.com/seata/seata/commit/4db1dbd49a0f7298ff951c0b49300287f225a301", "committedDate": "2020-08-06T01:21:35Z", "message": "Merge branch 'develop' into feature/registry.conf-customize"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c2cfd035d19bfd7632d9051f2b7de6695ee5684d", "author": {"user": {"login": "a364176773", "name": "FUNKYE"}}, "url": "https://github.com/seata/seata/commit/c2cfd035d19bfd7632d9051f2b7de6695ee5684d", "committedDate": "2020-08-17T07:40:06Z", "message": "Merge branch 'develop' into feature/registry.conf-customize"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0878468f1add8e02a8cafd155e9ec5e3cba5dd3d", "author": {"user": {"login": "wangwei-ying", "name": "wangwei ying"}}, "url": "https://github.com/seata/seata/commit/0878468f1add8e02a8cafd155e9ec5e3cba5dd3d", "committedDate": "2020-08-18T07:50:33Z", "message": "add config example"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "817df46ed736d1fbac24c17a51accb0bb2faea8a", "author": {"user": {"login": "wangwei-ying", "name": "wangwei ying"}}, "url": "https://github.com/seata/seata/commit/817df46ed736d1fbac24c17a51accb0bb2faea8a", "committedDate": "2020-08-19T09:10:52Z", "message": "Merge branch 'develop' into feature/registry.conf-customize"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcyMzA3ODAw", "url": "https://github.com/seata/seata/pull/2380#pullrequestreview-472307800", "createdAt": "2020-08-21T08:37:02Z", "commit": {"oid": "817df46ed736d1fbac24c17a51accb0bb2faea8a"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMVQwODozNzowM1rOHEi3FQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMVQwODo0MTozN1rOHEjG0g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDUyNzUwOQ==", "bodyText": "store.mode", "url": "https://github.com/seata/seata/pull/2380#discussion_r474527509", "createdAt": "2020-08-21T08:37:03Z", "author": {"login": "a364176773"}, "path": "script/server/config/file.properties", "diffHunk": "@@ -0,0 +1,27 @@\n+store.model=file", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "817df46ed736d1fbac24c17a51accb0bb2faea8a"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDUyNzcyNg==", "bodyText": "= \"\"", "url": "https://github.com/seata/seata/pull/2380#discussion_r474527726", "createdAt": "2020-08-21T08:37:18Z", "author": {"login": "a364176773"}, "path": "script/server/config/file.properties", "diffHunk": "@@ -0,0 +1,27 @@\n+store.model=file\n+store.file.dir=sessionStore\n+store.file.maxBranchSessionSize=16384\n+store.file.maxGlobalSessionSize=512\n+store.file.fileWriteBufferCacheSize=16384\n+store.file.sessionReloadReadSize=100\n+store.file.flushDiskMode=async\n+store.db.datasource=druid\n+store.db.dbType=mysql\n+store.db.driverClassName=com.mysql.jdbc.Driver\n+store.db.url=jdbc:mysql://127.0.0.1:3306/seata\n+store.db.user=mysql\n+store.db.password=mysql\n+store.db.minConn=5\n+store.db.maxConn=100\n+store.db.globalTable=global_table\n+store.db.branchTable=branch_table\n+store.db.lockTable=lock_table\n+store.db.queryLimit=100\n+store.db.maxWait=5000\n+store.redis.host=127.0.0.1\n+store.redis.port=6379\n+store.redis.password=", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "817df46ed736d1fbac24c17a51accb0bb2faea8a"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDUyNzgzNg==", "bodyText": "mode", "url": "https://github.com/seata/seata/pull/2380#discussion_r474527836", "createdAt": "2020-08-21T08:37:28Z", "author": {"login": "a364176773"}, "path": "script/server/config/file.yml", "diffHunk": "@@ -0,0 +1,47 @@\n+\n+## transaction log store, only used in seata-server\n+store:\n+\n+  ## store mode: file\u3001db\u3001redis\n+  model: file", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "817df46ed736d1fbac24c17a51accb0bb2faea8a"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDUyNzkyOQ==", "bodyText": ": \"\"", "url": "https://github.com/seata/seata/pull/2380#discussion_r474527929", "createdAt": "2020-08-21T08:37:35Z", "author": {"login": "a364176773"}, "path": "script/server/config/file.yml", "diffHunk": "@@ -0,0 +1,47 @@\n+\n+## transaction log store, only used in seata-server\n+store:\n+\n+  ## store mode: file\u3001db\u3001redis\n+  model: file\n+  ## file store property\n+  file:\n+    ## store location dir\n+    dir: sessionStore\n+    # branch session size , if exceeded first try compress lockkey, still exceeded throws exceptions\n+    maxBranchSessionSize: 16384\n+    # globe session size , if exceeded throws exceptions\n+    maxGlobalSessionSize: 512\n+    # file buffer size , if exceeded allocate new buffer\n+    fileWriteBufferCacheSize: 16384\n+    # when recover batch read size\n+    sessionReloadReadSize: 100\n+    # async, sync\n+    flushDiskMode: async\n+  ## database store property\n+  db:\n+    ## the implement of javax.sql.DataSource, such as DruidDataSource(druid)/BasicDataSource(dbcp)/HikariDataSource(hikari) etc.\n+    datasource: druid\n+    ## mysql/oracle/postgresql/h2/oceanbase etc.\n+    dbType: mysql\n+    driverClassName: com.mysql.jdbc.Driver\n+    url: jdbc:mysql://127.0.0.1:3306/seata\n+    user: mysql\n+    password: mysql\n+    minConn: 5\n+    maxConn: 100\n+    globalTable: global_table\n+    branchTable: branch_table\n+    lockTable: lock_table\n+    queryLimit: 100\n+    maxWait: 5000\n+  ## redis store property\n+  redis:\n+    host: 127.0.0.1\n+    port: 6379\n+    password:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "817df46ed736d1fbac24c17a51accb0bb2faea8a"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDUzMDA4OQ==", "bodyText": "file.properties", "url": "https://github.com/seata/seata/pull/2380#discussion_r474530089", "createdAt": "2020-08-21T08:40:03Z", "author": {"login": "a364176773"}, "path": "script/server/config/registry.properties", "diffHunk": "@@ -0,0 +1,54 @@\n+registry.type=file\n+registry.loadBalance=RandomLoadBalance\n+registry.loadBalanceVirtualNodes=10\n+registry.nacos.application=seata-server\n+registry.nacos.serverAddr=127.0.0.1:8848\n+registry.nacos.group=SEATA_GROUP\n+registry.nacos.namespace=\n+registry.nacos.cluster=default\n+registry.nacos.username=\n+registry.nacos.password=\n+registry.eureka.serviceUrl=http://localhost:8761/eureka\n+registry.eureka.application=default\n+registry.eureka.weight=1\n+registry.redis.serverAddr=localhost:6379\n+registry.redis.db=0\n+registry.redis.password=\n+registry.redis.cluster=default\n+registry.redis.timeout=0\n+registry.zk.cluster=default\n+registry.zk.serverAddr=127.0.0.1:2181\n+registry.zk.sessionTimeout=6000\n+registry.zk.connectTimeout=2000\n+registry.zk.username=\n+registry.zk.password=\n+registry.consul.cluster=default\n+registry.consul.serverAddr=127.0.0.1:8500\n+registry.etcd3.cluster=default\n+registry.etcd3.serverAddr=http://localhost:2379\n+registry.sofa.serverAddr=127.0.0.1:9603\n+registry.sofa.application=default\n+registry.sofa.region=DEFAULT_ZONE\n+registry.sofa.datacenter=DefaultDataCenter\n+registry.sofa.cluster=default\n+registry.sofa.group=SEATA_GROUP\n+registry.sofa.addressWaitTime=3000\n+registry.file.name=file.conf\n+config.type=file\n+config.nacos.serverAddr=127.0.0.1:8848\n+config.nacos.namespace=\n+config.nacos.group=SEATA_GROUP\n+config.nacos.username=\n+config.nacos.password=\n+config.consul.serverAddr=127.0.0.1:8500\n+config.apollo.appId=seata-server\n+config.apollo.apolloMeta=http://192.168.1.204:8801\n+config.apollo.namespace=application\n+config.apollo.apolloAccesskeySecret=\n+config.zk.serverAddr=127.0.0.1:2181\n+config.zk.sessionTimeout=6000\n+config.zk.connectTimeout=2000\n+config.zk.username=\n+config.zk.password=\n+config.etcd3.serverAddr=http://localhost:2379\n+config.file.name=file.conf", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "817df46ed736d1fbac24c17a51accb0bb2faea8a"}, "originalPosition": 54}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDUzMTAwNA==", "bodyText": "file.properties", "url": "https://github.com/seata/seata/pull/2380#discussion_r474531004", "createdAt": "2020-08-21T08:40:59Z", "author": {"login": "a364176773"}, "path": "script/server/config/registry.properties", "diffHunk": "@@ -0,0 +1,54 @@\n+registry.type=file\n+registry.loadBalance=RandomLoadBalance\n+registry.loadBalanceVirtualNodes=10\n+registry.nacos.application=seata-server\n+registry.nacos.serverAddr=127.0.0.1:8848\n+registry.nacos.group=SEATA_GROUP\n+registry.nacos.namespace=\n+registry.nacos.cluster=default\n+registry.nacos.username=\n+registry.nacos.password=\n+registry.eureka.serviceUrl=http://localhost:8761/eureka\n+registry.eureka.application=default\n+registry.eureka.weight=1\n+registry.redis.serverAddr=localhost:6379\n+registry.redis.db=0\n+registry.redis.password=\n+registry.redis.cluster=default\n+registry.redis.timeout=0\n+registry.zk.cluster=default\n+registry.zk.serverAddr=127.0.0.1:2181\n+registry.zk.sessionTimeout=6000\n+registry.zk.connectTimeout=2000\n+registry.zk.username=\n+registry.zk.password=\n+registry.consul.cluster=default\n+registry.consul.serverAddr=127.0.0.1:8500\n+registry.etcd3.cluster=default\n+registry.etcd3.serverAddr=http://localhost:2379\n+registry.sofa.serverAddr=127.0.0.1:9603\n+registry.sofa.application=default\n+registry.sofa.region=DEFAULT_ZONE\n+registry.sofa.datacenter=DefaultDataCenter\n+registry.sofa.cluster=default\n+registry.sofa.group=SEATA_GROUP\n+registry.sofa.addressWaitTime=3000\n+registry.file.name=file.conf\n+config.type=file", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "817df46ed736d1fbac24c17a51accb0bb2faea8a"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDUzMTIxMw==", "bodyText": "file.yml", "url": "https://github.com/seata/seata/pull/2380#discussion_r474531213", "createdAt": "2020-08-21T08:41:13Z", "author": {"login": "a364176773"}, "path": "script/server/config/registry.yml", "diffHunk": "@@ -0,0 +1,91 @@\n+registry:\n+  # file \u3001nacos \u3001eureka\u3001redis\u3001zk\u3001consul\u3001etcd3\u3001sofa\n+  type: file\n+  loadBalance: RandomLoadBalance\n+  loadBalanceVirtualNodes: 10\n+\n+  nacos:\n+    application: seata-server\n+    serverAddr: 127.0.0.1:8848\n+    group: SEATA_GROUP\n+    namespace: \n+    cluster: default\n+    username: \n+    password: \n+  \n+  eureka:\n+    serviceUrl: http://localhost:8761/eureka\n+    application: default\n+    weight: 1\n+  \n+  redis:\n+    serverAddr: localhost:6379\n+    db: 0\n+    password: \n+    cluster: default\n+    timeout: 0\n+  \n+  zk:\n+    cluster: default\n+    serverAddr: 127.0.0.1:2181\n+    sessionTimeout: 6000\n+    connectTimeout: 2000\n+    username: \n+    password: \n+  \n+  consul:\n+    cluster: default\n+    serverAddr: 127.0.0.1:8500\n+  \n+  etcd3:\n+    cluster: default\n+    serverAddr: http://localhost:2379\n+  \n+  sofa:\n+    serverAddr: 127.0.0.1:9603\n+    application: default\n+    region: DEFAULT_ZONE\n+    datacenter: DefaultDataCenter\n+    cluster: default\n+    group: SEATA_GROUP\n+    addressWaitTime: 3000\n+  \n+  file:\n+    name: file.conf", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "817df46ed736d1fbac24c17a51accb0bb2faea8a"}, "originalPosition": 54}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDUzMTUzOA==", "bodyText": "file.yml", "url": "https://github.com/seata/seata/pull/2380#discussion_r474531538", "createdAt": "2020-08-21T08:41:37Z", "author": {"login": "a364176773"}, "path": "script/server/config/registry.yml", "diffHunk": "@@ -0,0 +1,91 @@\n+registry:\n+  # file \u3001nacos \u3001eureka\u3001redis\u3001zk\u3001consul\u3001etcd3\u3001sofa\n+  type: file\n+  loadBalance: RandomLoadBalance\n+  loadBalanceVirtualNodes: 10\n+\n+  nacos:\n+    application: seata-server\n+    serverAddr: 127.0.0.1:8848\n+    group: SEATA_GROUP\n+    namespace: \n+    cluster: default\n+    username: \n+    password: \n+  \n+  eureka:\n+    serviceUrl: http://localhost:8761/eureka\n+    application: default\n+    weight: 1\n+  \n+  redis:\n+    serverAddr: localhost:6379\n+    db: 0\n+    password: \n+    cluster: default\n+    timeout: 0\n+  \n+  zk:\n+    cluster: default\n+    serverAddr: 127.0.0.1:2181\n+    sessionTimeout: 6000\n+    connectTimeout: 2000\n+    username: \n+    password: \n+  \n+  consul:\n+    cluster: default\n+    serverAddr: 127.0.0.1:8500\n+  \n+  etcd3:\n+    cluster: default\n+    serverAddr: http://localhost:2379\n+  \n+  sofa:\n+    serverAddr: 127.0.0.1:9603\n+    application: default\n+    region: DEFAULT_ZONE\n+    datacenter: DefaultDataCenter\n+    cluster: default\n+    group: SEATA_GROUP\n+    addressWaitTime: 3000\n+  \n+  file:\n+    name: file.conf\n+  \n+\n+\n+config:\n+  # file\u3001nacos \u3001apollo\u3001zk\u3001consul\u3001etcd3\n+  type: file\n+\n+  nacos:\n+    serverAddr: 127.0.0.1:8848\n+    namespace: \n+    group: SEATA_GROUP\n+    username: \n+    password: \n+  \n+  consul:\n+    serverAddr: 127.0.0.1:8500\n+  \n+  apollo:\n+    appId: seata-server\n+    apolloMeta: http://192.168.1.204:8801\n+    namespace: application\n+    apolloAccesskeySecret: \n+  \n+  zk:\n+    serverAddr: 127.0.0.1:2181\n+    sessionTimeout: 6000\n+    connectTimeout: 2000\n+    username: \n+    password: \n+  \n+  etcd3:\n+    serverAddr: http://localhost:2379\n+  \n+  file:\n+    name: file.conf", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "817df46ed736d1fbac24c17a51accb0bb2faea8a"}, "originalPosition": 89}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ed82390b0522654535d92cdce5b666a36c9c473f", "author": {"user": {"login": "wangwei-ying", "name": "wangwei ying"}}, "url": "https://github.com/seata/seata/commit/ed82390b0522654535d92cdce5b666a36c9c473f", "committedDate": "2020-08-21T09:01:32Z", "message": "add config example"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "38a94678bfbe977224e76c63b9ec275601138617", "author": {"user": {"login": "wangwei-ying", "name": "wangwei ying"}}, "url": "https://github.com/seata/seata/commit/38a94678bfbe977224e76c63b9ec275601138617", "committedDate": "2020-08-21T09:03:28Z", "message": "add config example"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc0MzE1MDg2", "url": "https://github.com/seata/seata/pull/2380#pullrequestreview-474315086", "createdAt": "2020-08-25T09:45:08Z", "commit": {"oid": "38a94678bfbe977224e76c63b9ec275601138617"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQwOTo0NTowOFrOHGQVNg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQwOTo0NTowOFrOHGQVNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjMyMTA3OA==", "bodyText": "config.get(dataId[dataId.length - 1]) If it is null  String.valueof(null)  to be  \"null\"", "url": "https://github.com/seata/seata/pull/2380#discussion_r476321078", "createdAt": "2020-08-25T09:45:08Z", "author": {"login": "a364176773"}, "path": "config/seata-config-core/src/main/java/io/seata/config/file/YamlFileConfig.java", "diffHunk": "@@ -0,0 +1,66 @@\n+/*\n+ *  Copyright 1999-2019 Seata.io Group.\n+ *\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ */\n+package io.seata.config.file;\n+\n+import io.seata.common.loader.LoadLevel;\n+import io.seata.common.loader.Scope;\n+import io.seata.config.FileConfigFactory;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.yaml.snakeyaml.Yaml;\n+\n+import java.io.File;\n+import java.io.FileInputStream;\n+import java.io.FileNotFoundException;\n+import java.util.Map;\n+\n+/**\n+ * @author wangwei-ying\n+ */\n+@LoadLevel(name = FileConfigFactory.YAML_TYPE, order = 1,scope = Scope.PROTOTYPE)\n+public class YamlFileConfig implements FileConfig {\n+\n+    private static final Logger LOGGER = LoggerFactory.getLogger(YamlFileConfig.class);\n+    private Map configMap;\n+\n+    public YamlFileConfig(File file, String name) {\n+        Yaml yaml = new Yaml();\n+        try {\n+            configMap = (Map) yaml.load(new FileInputStream(file));\n+        } catch (FileNotFoundException e) {\n+            throw new IllegalArgumentException(\"file not found\");\n+        }\n+    }\n+\n+    @Override\n+    public String getString(String path) {\n+        try {\n+            Map config = configMap;\n+            String[] dataId = path.split(\"\\\\.\");\n+            for (int i = 0; i < dataId.length - 1; i++) {\n+                if (config.containsKey(dataId[i])) {\n+                    config = (Map) config.get(dataId[i]);\n+                } else {\n+                    return null;\n+                }\n+            }\n+            return String.valueOf(config.get(dataId[dataId.length - 1]));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "38a94678bfbe977224e76c63b9ec275601138617"}, "originalPosition": 60}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "14c75f1506743f260e80c9925a517f01ce65d60a", "author": {"user": {"login": "a364176773", "name": "FUNKYE"}}, "url": "https://github.com/seata/seata/commit/14c75f1506743f260e80c9925a517f01ce65d60a", "committedDate": "2020-08-25T09:47:50Z", "message": "Merge branch 'develop' into feature/registry.conf-customize"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3719703419e057a107a831d2e7a413ef78aff20f", "author": {"user": {"login": "wangwei-ying", "name": "wangwei ying"}}, "url": "https://github.com/seata/seata/commit/3719703419e057a107a831d2e7a413ef78aff20f", "committedDate": "2020-08-25T10:39:16Z", "message": "fix null value"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "01bd9ae0cc105e50eabd91458c92bc4ce85784fa", "author": {"user": {"login": "a364176773", "name": "FUNKYE"}}, "url": "https://github.com/seata/seata/commit/01bd9ae0cc105e50eabd91458c92bc4ce85784fa", "committedDate": "2020-08-28T09:03:58Z", "message": "Merge branch 'develop' into feature/registry.conf-customize"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc3NTc2OTYz", "url": "https://github.com/seata/seata/pull/2380#pullrequestreview-477576963", "createdAt": "2020-08-28T09:20:49Z", "commit": {"oid": "01bd9ae0cc105e50eabd91458c92bc4ce85784fa"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg3NTIxNzI0", "url": "https://github.com/seata/seata/pull/2380#pullrequestreview-487521724", "createdAt": "2020-09-14T08:18:52Z", "commit": {"oid": "01bd9ae0cc105e50eabd91458c92bc4ce85784fa"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQwODoxODo1MlrOHRI2pQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQwODoxODo1MlrOHRI2pQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzczMjkwMQ==", "bodyText": "Why not change the name to\nregistr-test-yaml.yml", "url": "https://github.com/seata/seata/pull/2380#discussion_r487732901", "createdAt": "2020-09-14T08:18:52Z", "author": {"login": "l81893521"}, "path": "config/seata-config-core/src/test/resources/registry-testyaml.yml", "diffHunk": "@@ -0,0 +1,11 @@\n+registry:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "01bd9ae0cc105e50eabd91458c92bc4ce85784fa"}, "originalPosition": 1}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg3NTIxOTg5", "url": "https://github.com/seata/seata/pull/2380#pullrequestreview-487521989", "createdAt": "2020-09-14T08:19:13Z", "commit": {"oid": "01bd9ae0cc105e50eabd91458c92bc4ce85784fa"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQwODoxOToxM1rOHRI3aA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQwODoxOToxM1rOHRI3aA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzczMzA5Ng==", "bodyText": "Please check the symbol\n\u3001", "url": "https://github.com/seata/seata/pull/2380#discussion_r487733096", "createdAt": "2020-09-14T08:19:13Z", "author": {"login": "l81893521"}, "path": "script/server/config/registry.yml", "diffHunk": "@@ -0,0 +1,91 @@\n+registry:\n+  # file \u3001nacos \u3001eureka\u3001redis\u3001zk\u3001consul\u3001etcd3\u3001sofa", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "01bd9ae0cc105e50eabd91458c92bc4ce85784fa"}, "originalPosition": 2}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "829f6f46e130fd48dea7ff006e0c775848ed0b62", "author": {"user": {"login": "wangwei-ying", "name": "wangwei ying"}}, "url": "https://github.com/seata/seata/commit/829f6f46e130fd48dea7ff006e0c775848ed0b62", "committedDate": "2020-09-14T14:38:07Z", "message": "fix URL encode"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5bf12b19099f01ed9c3d06670402a0fa7dd920e7", "author": {"user": {"login": "wangwei-ying", "name": "wangwei ying"}}, "url": "https://github.com/seata/seata/commit/5bf12b19099f01ed9c3d06670402a0fa7dd920e7", "committedDate": "2020-09-14T14:38:38Z", "message": "update test file name"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3a07db1e9617425f326ff2eb91fc0cae2ee1e3a4", "author": {"user": {"login": "wangwei-ying", "name": "wangwei ying"}}, "url": "https://github.com/seata/seata/commit/3a07db1e9617425f326ff2eb91fc0cae2ee1e3a4", "committedDate": "2020-09-15T01:14:40Z", "message": "Merge branch 'develop' into feature/registry.conf-customize"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg4MjczNjAz", "url": "https://github.com/seata/seata/pull/2380#pullrequestreview-488273603", "createdAt": "2020-09-15T02:11:10Z", "commit": {"oid": "3a07db1e9617425f326ff2eb91fc0cae2ee1e3a4"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "008538b2660ae2bf6cddd820f341daa489e2fc93", "author": {"user": {"login": "wangwei-ying", "name": "wangwei ying"}}, "url": "https://github.com/seata/seata/commit/008538b2660ae2bf6cddd820f341daa489e2fc93", "committedDate": "2020-09-15T02:40:36Z", "message": "update test file name"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ff4303aac91f456105e8540aac7d3f65196a30f1", "author": {"user": {"login": "wangwei-ying", "name": "wangwei ying"}}, "url": "https://github.com/seata/seata/commit/ff4303aac91f456105e8540aac7d3f65196a30f1", "committedDate": "2020-09-15T03:03:54Z", "message": "Merge branch 'develop' into feature/registry.conf-customize"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a42dc1357ccb08c06ce8715d5bb404d7a039a14e", "author": {"user": {"login": "wangwei-ying", "name": "wangwei ying"}}, "url": "https://github.com/seata/seata/commit/a42dc1357ccb08c06ce8715d5bb404d7a039a14e", "committedDate": "2020-09-15T03:42:38Z", "message": "fix ci error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "44ed761475b1109a59897586553084db422fa69a", "author": {"user": {"login": "wangwei-ying", "name": "wangwei ying"}}, "url": "https://github.com/seata/seata/commit/44ed761475b1109a59897586553084db422fa69a", "committedDate": "2020-09-15T06:47:38Z", "message": "fix url file path"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fa97be633b3ffd54731edabbd85955702f37cc8d", "author": {"user": {"login": "wangwei-ying", "name": "wangwei ying"}}, "url": "https://github.com/seata/seata/commit/fa97be633b3ffd54731edabbd85955702f37cc8d", "committedDate": "2020-09-15T06:50:18Z", "message": "Merge branch 'develop' into feature/registry.conf-customize"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "17a668907a93e45477ce947a97648d7590d2b2f8", "author": {"user": {"login": "wangwei-ying", "name": "wangwei ying"}}, "url": "https://github.com/seata/seata/commit/17a668907a93e45477ce947a97648d7590d2b2f8", "committedDate": "2020-09-15T07:03:06Z", "message": "codestyle check"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "99fd5533d5035cedb8c39459d55e41ace70101c2", "author": {"user": {"login": "wangwei-ying", "name": "wangwei ying"}}, "url": "https://github.com/seata/seata/commit/99fd5533d5035cedb8c39459d55e41ace70101c2", "committedDate": "2020-09-15T07:32:44Z", "message": "codestyle check"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk2NDM4MzU1", "url": "https://github.com/seata/seata/pull/2380#pullrequestreview-496438355", "createdAt": "2020-09-25T13:51:31Z", "commit": {"oid": "99fd5533d5035cedb8c39459d55e41ace70101c2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNVQxMzo1MTozMVrOHYEiAg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNVQxMzo1MTozMVrOHYEiAg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTAwMjExNA==", "bodyText": "still test fail when file path include sapce mark.\n/D:/Program%20Files/github/seata/server/target/classes/registry", "url": "https://github.com/seata/seata/pull/2380#discussion_r495002114", "createdAt": "2020-09-25T13:51:31Z", "author": {"login": "l81893521"}, "path": "config/seata-config-core/src/main/java/io/seata/config/FileConfiguration.java", "diffHunk": "@@ -139,8 +121,68 @@ public FileConfiguration(String name, boolean allowDynamicRefresh) {\n \n         this.name = name;\n         configOperateExecutor = new ThreadPoolExecutor(CORE_CONFIG_OPERATE_THREAD, MAX_CONFIG_OPERATE_THREAD,\n-            Integer.MAX_VALUE, TimeUnit.MILLISECONDS, new LinkedBlockingQueue<>(),\n-            new NamedThreadFactory(\"configOperate\", MAX_CONFIG_OPERATE_THREAD));\n+                Integer.MAX_VALUE, TimeUnit.MILLISECONDS, new LinkedBlockingQueue<>(),\n+                new NamedThreadFactory(\"configOperate\", MAX_CONFIG_OPERATE_THREAD));\n+    }\n+\n+    private File getConfigFile(String name) {\n+        if (name == null) {\n+            throw new IllegalArgumentException(\"name can't be null\");\n+        }\n+        String filePath = null;\n+        boolean filePathCustom = name.startsWith(SYS_FILE_RESOURCE_PREFIX);\n+        if (filePathCustom) {\n+            filePath = name.substring(SYS_FILE_RESOURCE_PREFIX.length());\n+        } else {\n+            // projectDir first\n+            filePath = this.getClass().getClassLoader().getResource(\"\").getPath() + name;\n+        }\n+\n+        File targetFile = new File(filePath);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "99fd5533d5035cedb8c39459d55e41ace70101c2"}, "originalPosition": 115}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "df5baee7ce8ad4ab4f225c2ce0ba49f8eae5e69b", "author": {"user": {"login": "l81893521", "name": "will"}}, "url": "https://github.com/seata/seata/commit/df5baee7ce8ad4ab4f225c2ce0ba49f8eae5e69b", "committedDate": "2020-09-25T15:01:14Z", "message": "Merge branch 'develop' into feature/registry.conf-customize"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c975dd193a01078300d915a9a782342d359fbed6", "author": {"user": {"login": "wangwei-ying", "name": "wangwei ying"}}, "url": "https://github.com/seata/seata/commit/c975dd193a01078300d915a9a782342d359fbed6", "committedDate": "2020-09-28T05:13:22Z", "message": "fix blank path"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "155ff2ca986cdcfe47ae1b3b3881221e002aa20c", "author": {"user": {"login": "wangwei-ying", "name": "wangwei ying"}}, "url": "https://github.com/seata/seata/commit/155ff2ca986cdcfe47ae1b3b3881221e002aa20c", "committedDate": "2020-10-03T03:23:15Z", "message": "Merge branch 'develop' into feature/registry.conf-customize"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5a98239e493e06d37a807615644a337f053f8832", "author": {"user": {"login": "a364176773", "name": "FUNKYE"}}, "url": "https://github.com/seata/seata/commit/5a98239e493e06d37a807615644a337f053f8832", "committedDate": "2020-10-12T13:21:45Z", "message": "Merge branch 'develop' into feature/registry.conf-customize"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA2NjE1ODM0", "url": "https://github.com/seata/seata/pull/2380#pullrequestreview-506615834", "createdAt": "2020-10-12T13:24:17Z", "commit": {"oid": "5a98239e493e06d37a807615644a337f053f8832"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f74a86e3e22005be37e0c9467630000fd65c84ab", "author": {"user": {"login": "a364176773", "name": "FUNKYE"}}, "url": "https://github.com/seata/seata/commit/f74a86e3e22005be37e0c9467630000fd65c84ab", "committedDate": "2020-10-19T09:48:06Z", "message": "Merge branch 'develop' into feature/registry.conf-customize"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b365a65d71f1d773d601c949e778818222adbf1b", "author": {"user": {"login": "wangliang181230", "name": "WangLiang/\u738b\u826f"}}, "url": "https://github.com/seata/seata/commit/b365a65d71f1d773d601c949e778818222adbf1b", "committedDate": "2020-10-21T03:51:24Z", "message": "Merge branch 'develop' into feature/registry.conf-customize"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4077, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}