{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYyMzk4NTI5", "number": 2179, "title": "bugfix:fix type casting problem when using redis as registry ", "bodyText": "\u2026s/2160\n\n\u2160. Describe what this PR did\nfix the problem of spring redis register auto injection error ,the issues address:\n#2160\n\u2161. Does this pull request fix one issue?\n\nfixes #2160\n\u2162. Why don't you add test cases (unit test/integration test)?\nunit test\n\u2163. Describe how to verify it\nspring-redis  register   auto injection\n\u2164. Special notes for reviews", "createdAt": "2020-01-14T01:16:58Z", "url": "https://github.com/seata/seata/pull/2179", "merged": true, "mergeCommit": {"oid": "456a7cd4dd02a59454e9a846daed6a1ae82a80c7"}, "closed": true, "closedAt": "2020-01-22T01:38:32Z", "author": {"login": "guojingyinan219"}, "timelineItems": {"totalCount": 23, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb559ZoAH2gAyMzYyMzk4NTI5OjAwNzlkY2FjZWYxMDAyODFlZjA4ZDdhOWFmYzhlMmU5NTYxMWE1ZTg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb8rma0AFqTM0NjMwMTg5Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "0079dcacef100281ef08d7a9afc8e2e95611a5e8", "author": {"user": null}, "url": "https://github.com/seata/seata/commit/0079dcacef100281ef08d7a9afc8e2e95611a5e8", "committedDate": "2020-01-13T10:40:16Z", "message": "#fix \u4fee\u590dspring-redis \u6ce8\u518c\u5668 \u81ea\u52a8\u6ce8\u5165\u62a5\u9519\u95ee\u9898 https://github.com/seata/seata/issues/2160"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "62ac72e2aa57d8da48b635be3fa64a38e28332fa", "author": {"user": {"login": "guojingyinan219", "name": null}}, "url": "https://github.com/seata/seata/commit/62ac72e2aa57d8da48b635be3fa64a38e28332fa", "committedDate": "2020-01-14T01:25:27Z", "message": "Merge branch 'develop' into develop"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQyMjUzNDky", "url": "https://github.com/seata/seata/pull/2179#pullrequestreview-342253492", "createdAt": "2020-01-14T02:02:08Z", "commit": {"oid": "62ac72e2aa57d8da48b635be3fa64a38e28332fa"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQyMjgwMDQw", "url": "https://github.com/seata/seata/pull/2179#pullrequestreview-342280040", "createdAt": "2020-01-14T03:58:06Z", "commit": {"oid": "62ac72e2aa57d8da48b635be3fa64a38e28332fa"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQwMzo1ODowNlrOFdLmSA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQwMzo1ODowNlrOFdLmSA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjE0MzA0OA==", "bodyText": "@guojingyinan219 Can you adapt other attributes of redis?\n\nThis pr is also good, other attributes are not optional.", "url": "https://github.com/seata/seata/pull/2179#discussion_r366143048", "createdAt": "2020-01-14T03:58:06Z", "author": {"login": "slievrly"}, "path": "seata-spring-boot-starter/src/main/java/io/seata/spring/boot/autoconfigure/properties/registry/RegistryRedisProperties.java", "diffHunk": "@@ -27,7 +27,11 @@\n @ConfigurationProperties(prefix = REGISTRY_REDIS_PREFIX)\n public class RegistryRedisProperties {\n     private String serverAddr = \"localhost:6379\";\n-    private String db = \"0\";\n+    private int db = 0;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "62ac72e2aa57d8da48b635be3fa64a38e28332fa"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQyMjgxNTUx", "url": "https://github.com/seata/seata/pull/2179#pullrequestreview-342281551", "createdAt": "2020-01-14T04:05:34Z", "commit": {"oid": "62ac72e2aa57d8da48b635be3fa64a38e28332fa"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "97ba5a5c47e398f41fe38b5f8ece16e001c97a35", "author": {"user": {"login": "xingfudeshi", "name": "xingfudeshi"}}, "url": "https://github.com/seata/seata/commit/97ba5a5c47e398f41fe38b5f8ece16e001c97a35", "committedDate": "2020-01-14T14:43:06Z", "message": "Merge branch 'develop' into develop"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3c03a122c404784d7f6a625083ab65abc2293298", "author": {"user": {"login": "xingfudeshi", "name": "xingfudeshi"}}, "url": "https://github.com/seata/seata/commit/3c03a122c404784d7f6a625083ab65abc2293298", "committedDate": "2020-01-15T03:10:07Z", "message": "Merge branch 'develop' into develop"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "795bc5bdff6398b00d54609ebd3528db0cc366a7", "author": {"user": null}, "url": "https://github.com/seata/seata/commit/795bc5bdff6398b00d54609ebd3528db0cc366a7", "committedDate": "2020-01-15T05:36:30Z", "message": "#add add https://github.com/seata/seata/issues/2160 Unit Test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4e48ed1705f13fb229aa3737d797bc46b0830305", "author": {"user": null}, "url": "https://github.com/seata/seata/commit/4e48ed1705f13fb229aa3737d797bc46b0830305", "committedDate": "2020-01-15T05:36:45Z", "message": "Merge branch 'develop' of github.com:guojingyinan219/seata into develop"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQzMDAzNzI2", "url": "https://github.com/seata/seata/pull/2179#pullrequestreview-343003726", "createdAt": "2020-01-15T06:07:52Z", "commit": {"oid": "4e48ed1705f13fb229aa3737d797bc46b0830305"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNVQwNjowNzo1M1rOFduGmA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNVQwNjowNzo1M1rOFduGmA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjcwODM3Ng==", "bodyText": "@guojingyinan219 remove to test/resource ?", "url": "https://github.com/seata/seata/pull/2179#discussion_r366708376", "createdAt": "2020-01-15T06:07:53Z", "author": {"login": "slievrly"}, "path": "seata-spring-boot-starter/src/main/resources/spring/redis_auto_injectio_test.xml", "diffHunk": "@@ -0,0 +1,35 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+\n+<!--\n+  ~  Copyright 1999-2019 Seata.io Group.\n+  ~\n+  ~  Licensed under the Apache License, Version 2.0 (the \"License\");\n+  ~  you may not use this file except in compliance with the License.\n+  ~  You may obtain a copy of the License at\n+  ~\n+  ~       http://www.apache.org/licenses/LICENSE-2.0\n+  ~\n+  ~  Unless required by applicable law or agreed to in writing, software\n+  ~  distributed under the License is distributed on an \"AS IS\" BASIS,\n+  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+  ~  See the License for the specific language governing permissions and\n+  ~  limitations under the License.\n+  -->\n+\n+<beans xmlns=\"http://www.springframework.org/schema/beans\"\n+       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+       xmlns:context=\"http://www.springframework.org/schema/context\"\n+       xsi:schemaLocation=\"\n+\t   http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\n+       http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd\">\n+\n+\n+    <bean id=\"registryRedisProperties\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4e48ed1705f13fb229aa3737d797bc46b0830305"}, "originalPosition": 27}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4979ac7cef30359c929d46039253e62d23540fc5", "author": {"user": null}, "url": "https://github.com/seata/seata/commit/4979ac7cef30359c929d46039253e62d23540fc5", "committedDate": "2020-01-15T06:27:39Z", "message": "#fix fix  https://github.com/seata/seata/issues/2160 Unit Test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e06ff9406a40a005d7cf0058fde514226e3b3964", "author": {"user": null}, "url": "https://github.com/seata/seata/commit/e06ff9406a40a005d7cf0058fde514226e3b3964", "committedDate": "2020-01-15T06:33:24Z", "message": "#fix fix  https://github.com/seata/seata/issues/2160 Unit Test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQzMDI1OTM5", "url": "https://github.com/seata/seata/pull/2179#pullrequestreview-343025939", "createdAt": "2020-01-15T07:27:04Z", "commit": {"oid": "e06ff9406a40a005d7cf0058fde514226e3b3964"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cf9d2eb4758bf21e8ee76e8d01bcae3b81167601", "author": {"user": {"login": "guojingyinan219", "name": null}}, "url": "https://github.com/seata/seata/commit/cf9d2eb4758bf21e8ee76e8d01bcae3b81167601", "committedDate": "2020-01-16T04:02:03Z", "message": "Merge branch 'develop' into develop"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQzNzAzODA0", "url": "https://github.com/seata/seata/pull/2179#pullrequestreview-343703804", "createdAt": "2020-01-16T06:55:55Z", "commit": {"oid": "cf9d2eb4758bf21e8ee76e8d01bcae3b81167601"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNlQwNjo1NTo1NVrOFePlpQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNlQwNjo1NTo1NVrOFePlpQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzI1Njk5Nw==", "bodyText": "Please add these config items into files under script folder.", "url": "https://github.com/seata/seata/pull/2179#discussion_r367256997", "createdAt": "2020-01-16T06:55:55Z", "author": {"login": "xingfudeshi"}, "path": "seata-spring-boot-starter/src/main/java/io/seata/spring/boot/autoconfigure/properties/registry/RegistryRedisProperties.java", "diffHunk": "@@ -27,7 +27,11 @@\n @ConfigurationProperties(prefix = REGISTRY_REDIS_PREFIX)\n public class RegistryRedisProperties {\n     private String serverAddr = \"localhost:6379\";\n-    private String db = \"0\";\n+    private int db = 0;\n+    private String password;\n+    private String cluster;\n+    private int timeout = 0;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cf9d2eb4758bf21e8ee76e8d01bcae3b81167601"}, "originalPosition": 8}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2341768e64290dcf30827a37c15bd8c12ea9190d", "author": {"user": {"login": "zjinlei", "name": null}}, "url": "https://github.com/seata/seata/commit/2341768e64290dcf30827a37c15bd8c12ea9190d", "committedDate": "2020-01-19T04:48:48Z", "message": "Merge branch 'develop' into develop"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d8029c444db009dc1d96a6455fe35d138a548c66", "author": {"user": null}, "url": "https://github.com/seata/seata/commit/d8029c444db009dc1d96a6455fe35d138a548c66", "committedDate": "2020-01-19T07:11:35Z", "message": "#add add redis config items into files under script folder"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "505eae794a1e1db5dbafb5270095d4479f322a8e", "author": {"user": null}, "url": "https://github.com/seata/seata/commit/505eae794a1e1db5dbafb5270095d4479f322a8e", "committedDate": "2020-01-19T07:11:44Z", "message": "Merge branch 'develop' of github.com:guojingyinan219/seata into develop"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ba7115177bb044df8634e606d27f6cb9c2f6ed75", "author": {"user": {"login": "zjinlei", "name": null}}, "url": "https://github.com/seata/seata/commit/ba7115177bb044df8634e606d27f6cb9c2f6ed75", "committedDate": "2020-01-22T00:41:38Z", "message": "Merge branch 'develop' into develop"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ2MjkwMzA5", "url": "https://github.com/seata/seata/pull/2179#pullrequestreview-346290309", "createdAt": "2020-01-22T00:56:49Z", "commit": {"oid": "ba7115177bb044df8634e606d27f6cb9c2f6ed75"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMlQwMDo1Njo1MFrOFgNs2A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMlQwMDo1Njo1MFrOFgNs2A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTMyMzIyNA==", "bodyText": "Please remove annotations other than @Author.Thank u.", "url": "https://github.com/seata/seata/pull/2179#discussion_r369323224", "createdAt": "2020-01-22T00:56:50Z", "author": {"login": "xingfudeshi"}, "path": "seata-spring-boot-starter/src/test/java/io/seata/spring/boot/autoconfigure/RedisAutoInjectionTypeConvertTest.java", "diffHunk": "@@ -0,0 +1,41 @@\n+package io.seata.spring.boot.autoconfigure;\n+\n+import io.seata.common.loader.EnhancedServiceLoader;\n+import io.seata.config.Configuration;\n+import io.seata.config.ExtConfigurationProvider;\n+import io.seata.config.FileConfiguration;\n+import io.seata.spring.boot.autoconfigure.properties.registry.RegistryRedisProperties;\n+import org.junit.jupiter.api.Assertions;\n+import org.junit.jupiter.api.BeforeAll;\n+import org.junit.jupiter.api.Test;\n+import org.springframework.boot.autoconfigure.SpringBootApplication;\n+import org.springframework.context.ApplicationContext;\n+import org.springframework.context.support.ClassPathXmlApplicationContext;\n+\n+import static org.mockito.Mockito.mock;\n+\n+/**\n+ * @version 1.0\n+ * @ClassName RedisAutoInjectionTypeConvertTest\n+ * @Description\n+ * @Author zhangheng\n+ * @Date 2020/1/14 17:09", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ba7115177bb044df8634e606d27f6cb9c2f6ed75"}, "originalPosition": 22}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f876035b4fdeed5316466ec0c6eb944d35e798bc", "author": {"user": {"login": "zjinlei", "name": null}}, "url": "https://github.com/seata/seata/commit/f876035b4fdeed5316466ec0c6eb944d35e798bc", "committedDate": "2020-01-22T01:04:07Z", "message": "remove unnecessary annotations"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ2MjkyOTM2", "url": "https://github.com/seata/seata/pull/2179#pullrequestreview-346292936", "createdAt": "2020-01-22T01:06:03Z", "commit": {"oid": "f876035b4fdeed5316466ec0c6eb944d35e798bc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ2MzAxODky", "url": "https://github.com/seata/seata/pull/2179#pullrequestreview-346301892", "createdAt": "2020-01-22T01:38:16Z", "commit": {"oid": "f876035b4fdeed5316466ec0c6eb944d35e798bc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4143, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}