{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgyMzY2MDgx", "number": 2333, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQxMzoxNDo0OVrODkQwjQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxNDowMzoyOFrODlbxvQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM5MzQ5OTAxOnYy", "diffSide": "RIGHT", "path": "tm/src/main/java/io/seata/tm/api/TransactionalTemplate.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQxMzoxNDo0OVrOFwfCkQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQxMzoxNDo0OVrOFwfCkQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjM4NDUyOQ==", "bodyText": "I feel that the code you changed is not correct. I think it is OK to throw RollbackDone directly here.", "url": "https://github.com/seata/seata/pull/2333#discussion_r386384529", "createdAt": "2020-03-02T13:14:49Z", "author": {"login": "slievrly"}, "path": "tm/src/main/java/io/seata/tm/api/TransactionalTemplate.java", "diffHunk": "@@ -143,7 +144,9 @@ private void rollbackTransaction(GlobalTransaction tx, Throwable ex) throws Tran\n         tx.rollback();\n         triggerAfterRollback();\n         // 3.1 Successfully rolled back\n-        throw new TransactionalExecutor.ExecutionException(tx, TransactionalExecutor.Code.RollbackDone, ex);\n+        throw new TransactionalExecutor.ExecutionException(tx,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c9992a0d3ef07ed8c2181b89714807f2bfabd16e"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQwNDI4OTM0OnYy", "diffSide": "RIGHT", "path": "tm/src/main/java/io/seata/tm/api/DefaultFailureHandlerImpl.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQwNDo1OTozNlrOFyGcyg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQwMjoxOTowMlrOFyrMqA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODA3ODc5NA==", "bodyText": "Please use {}", "url": "https://github.com/seata/seata/pull/2333#discussion_r388078794", "createdAt": "2020-03-05T04:59:36Z", "author": {"login": "xingfudeshi"}, "path": "tm/src/main/java/io/seata/tm/api/DefaultFailureHandlerImpl.java", "diffHunk": "@@ -67,6 +67,12 @@ public void onRollbackFailure(GlobalTransaction tx, Throwable cause) {\n         timer.newTimeout(new CheckTimerTask(tx, GlobalStatus.Rollbacked), SCHEDULE_INTERVAL_SECONDS, TimeUnit.SECONDS);\n     }\n \n+    @Override\n+    public void onRollbackRetrying(GlobalTransaction tx, Throwable cause) {\n+        LOGGER.warn(\"Failed to rollback transaction[\" + tx.getXid() + \"]\", cause);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4b529b706b3ca986e82b76bb62d3df5220f64d06"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODY4MDg3Mg==", "bodyText": "@xingfudeshi PTAL", "url": "https://github.com/seata/seata/pull/2333#discussion_r388680872", "createdAt": "2020-03-06T02:19:02Z", "author": {"login": "a364176773"}, "path": "tm/src/main/java/io/seata/tm/api/DefaultFailureHandlerImpl.java", "diffHunk": "@@ -67,6 +67,12 @@ public void onRollbackFailure(GlobalTransaction tx, Throwable cause) {\n         timer.newTimeout(new CheckTimerTask(tx, GlobalStatus.Rollbacked), SCHEDULE_INTERVAL_SECONDS, TimeUnit.SECONDS);\n     }\n \n+    @Override\n+    public void onRollbackRetrying(GlobalTransaction tx, Throwable cause) {\n+        LOGGER.warn(\"Failed to rollback transaction[\" + tx.getXid() + \"]\", cause);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODA3ODc5NA=="}, "originalCommit": {"oid": "4b529b706b3ca986e82b76bb62d3df5220f64d06"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQwNTc5MDA1OnYy", "diffSide": "RIGHT", "path": "tm/src/main/java/io/seata/tm/api/DefaultFailureHandlerImpl.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxNDowMzoyOFrOFyUr2Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQwMTo1MToyOFrOFyqxKQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODMxMjAyNQ==", "bodyText": "StackTraceLogger.info(LOGGER, cause, \"Retrying to rollback transaction[{}]\", new String[] {tx.getXid()}, \"Retrying to rollback transaction[{}]\", new String[] {tx.getXid()});", "url": "https://github.com/seata/seata/pull/2333#discussion_r388312025", "createdAt": "2020-03-05T14:03:28Z", "author": {"login": "zjinlei"}, "path": "tm/src/main/java/io/seata/tm/api/DefaultFailureHandlerImpl.java", "diffHunk": "@@ -67,6 +68,14 @@ public void onRollbackFailure(GlobalTransaction tx, Throwable cause) {\n         timer.newTimeout(new CheckTimerTask(tx, GlobalStatus.Rollbacked), SCHEDULE_INTERVAL_SECONDS, TimeUnit.SECONDS);\n     }\n \n+    @Override\n+    public void onRollbackRetrying(GlobalTransaction tx, Throwable cause) {\n+        StackTraceLogger.info(LOGGER, cause, \"Retrying to rollback transaction[{}]\", new String[] {tx.getXid()}, null,\n+            null);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2544618aaeb5866399334e1874582cc301514dea"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODY3MzgzMw==", "bodyText": "StackTraceLogger.info(LOGGER, cause, \"Retrying to rollback transaction[{}]\", new String[] {tx.getXid()}, \"Retrying to rollback transaction[{}]\", new String[] {tx.getXid()});\n\nPTAL @zjinlei", "url": "https://github.com/seata/seata/pull/2333#discussion_r388673833", "createdAt": "2020-03-06T01:51:28Z", "author": {"login": "a364176773"}, "path": "tm/src/main/java/io/seata/tm/api/DefaultFailureHandlerImpl.java", "diffHunk": "@@ -67,6 +68,14 @@ public void onRollbackFailure(GlobalTransaction tx, Throwable cause) {\n         timer.newTimeout(new CheckTimerTask(tx, GlobalStatus.Rollbacked), SCHEDULE_INTERVAL_SECONDS, TimeUnit.SECONDS);\n     }\n \n+    @Override\n+    public void onRollbackRetrying(GlobalTransaction tx, Throwable cause) {\n+        StackTraceLogger.info(LOGGER, cause, \"Retrying to rollback transaction[{}]\", new String[] {tx.getXid()}, null,\n+            null);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODMxMjAyNQ=="}, "originalCommit": {"oid": "2544618aaeb5866399334e1874582cc301514dea"}, "originalPosition": 15}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1655, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}