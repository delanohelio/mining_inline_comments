{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkwNzQ5OTg3", "number": 3140, "title": "bugfix:  fix Propagation.REQUIRES_NEW and add some comments", "bodyText": "\u2160. Describe what this PR did\nbugfix: Propagation.REQUIRES_NEW is invalid, and add some notes.\n\n\u4fee\u590dPropagation.REQUIRES_NEW\u672a\u751f\u6548\u7684BUG\u3002\n\u6dfb\u52a0\u4e86\u66f4\u591a\u6ce8\u91ca\u4fe1\u606f\u3002\n\u4e3a\u679a\u4e3ePropagation\u91cc\u7684\u6bcf\u4e2a\u679a\u4e3e\u503c\uff0c\u7f16\u5199\u4e86\u793a\u4f8b\u4ee3\u7801\uff0c\u65b9\u4fbf\u5927\u5bb6\u7406\u89e3\u6bcf\u4e2a\u4e8b\u52a1\u4f20\u64ad\u65b9\u5f0f\u7684\u673a\u5236\u3002\n\n\u2161. Does this pull request fix one issue?\n\nfixes #3079\n\u2162. Why don't you add test cases (unit test/integration test)?\n\u2163. Describe how to verify it\n\u2164. Special notes for reviews", "createdAt": "2020-09-22T07:35:35Z", "url": "https://github.com/seata/seata/pull/3140", "merged": true, "mergeCommit": {"oid": "58f64543a5b057030df562ad185efc0578d6a391"}, "closed": true, "closedAt": "2020-10-10T07:27:41Z", "author": {"login": "wangliang181230"}, "timelineItems": {"totalCount": 43, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdFNs8ngH2gAyNDkwNzQ5OTg3OjZmMGJkMDVjNGFiOWMyOWI5YWFkZDU1ODdlM2U0OWQ3MDI2YmY3MGU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdRFUl_AH2gAyNDkwNzQ5OTg3OmE4NTAyZjk1MzFmY2Q3ZGU3ZmM4MGYwNDgzZTcxNmRkODdiMzZmMmM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "6f0bd05c4ab9c29b9aadd5587e3e49d7026bf70e", "author": {"user": {"login": "wangliang181230", "name": "WangLiang/\u738b\u826f"}}, "url": "https://github.com/seata/seata/commit/6f0bd05c4ab9c29b9aadd5587e3e49d7026bf70e", "committedDate": "2020-09-03T10:04:43Z", "message": "bugfix: fix REQUIRES_NEW not send begin request to TC"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c08bba8fb7eaefcb848a90ac0fc76b5a5768f074", "author": {"user": {"login": "wangliang181230", "name": "WangLiang/\u738b\u826f"}}, "url": "https://github.com/seata/seata/commit/c08bba8fb7eaefcb848a90ac0fc76b5a5768f074", "committedDate": "2020-09-22T05:19:48Z", "message": "Merge remote-tracking branch 'remotes/upstream/develop' into bugfix-tm-propagation-new"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f404a2c89a15aa650fb95a1d5d99120e76c94d5d", "author": {"user": {"login": "wangliang181230", "name": "WangLiang/\u738b\u826f"}}, "url": "https://github.com/seata/seata/commit/f404a2c89a15aa650fb95a1d5d99120e76c94d5d", "committedDate": "2020-09-22T07:32:01Z", "message": "bugfix: 'Propagation.REQUIRES_NEW' is invalid"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5f513ddeae6690a0b91fa9cb4c7a5a804f218a7c", "author": {"user": {"login": "wangliang181230", "name": "WangLiang/\u738b\u826f"}}, "url": "https://github.com/seata/seata/commit/5f513ddeae6690a0b91fa9cb4c7a5a804f218a7c", "committedDate": "2020-09-22T07:40:03Z", "message": "optimize notes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cccc9fea01f24300a72581b6304c253eca1f94e9", "author": {"user": {"login": "wangliang181230", "name": "WangLiang/\u738b\u826f"}}, "url": "https://github.com/seata/seata/commit/cccc9fea01f24300a72581b6304c253eca1f94e9", "committedDate": "2020-09-22T07:46:43Z", "message": "fix bug"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8a17cd99fa72eb6549782355a93773cf51e7c178", "author": {"user": {"login": "wangliang181230", "name": "WangLiang/\u738b\u826f"}}, "url": "https://github.com/seata/seata/commit/8a17cd99fa72eb6549782355a93773cf51e7c178", "committedDate": "2020-09-22T14:41:53Z", "message": "optimize notes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "92b9e9898bcfb381e781ffdb7f6405c7eed52f5a", "author": {"user": {"login": "wangliang181230", "name": "WangLiang/\u738b\u826f"}}, "url": "https://github.com/seata/seata/commit/92b9e9898bcfb381e781ffdb7f6405c7eed52f5a", "committedDate": "2020-09-22T15:54:10Z", "message": "optimize RootContext.getXID()"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "74fdfd337abf9c998ec6659f4a3279ad251757aa", "author": {"user": {"login": "wangliang181230", "name": "WangLiang/\u738b\u826f"}}, "url": "https://github.com/seata/seata/commit/74fdfd337abf9c998ec6659f4a3279ad251757aa", "committedDate": "2020-09-22T15:55:20Z", "message": "optimize TccActionInterceptor"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0be6eb00df617cc2af836a087e45c71c5301aa9c", "author": {"user": {"login": "wangliang181230", "name": "WangLiang/\u738b\u826f"}}, "url": "https://github.com/seata/seata/commit/0be6eb00df617cc2af836a087e45c71c5301aa9c", "committedDate": "2020-09-22T16:00:15Z", "message": "optimize code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "805f066062adfea9b2d6a138fcebdf2fe19fc3fc", "author": {"user": {"login": "wangliang181230", "name": "WangLiang/\u738b\u826f"}}, "url": "https://github.com/seata/seata/commit/805f066062adfea9b2d6a138fcebdf2fe19fc3fc", "committedDate": "2020-09-22T16:07:49Z", "message": "fix style"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5540779855ccb64d16bf5012eea9ccdefd846833", "author": {"user": {"login": "wangliang181230", "name": "WangLiang/\u738b\u826f"}}, "url": "https://github.com/seata/seata/commit/5540779855ccb64d16bf5012eea9ccdefd846833", "committedDate": "2020-09-22T16:20:35Z", "message": "fix style"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8e43fd6a58c28afa80f4c35edc0477f27d34e341", "author": {"user": {"login": "wangliang181230", "name": "WangLiang/\u738b\u826f"}}, "url": "https://github.com/seata/seata/commit/8e43fd6a58c28afa80f4c35edc0477f27d34e341", "committedDate": "2020-09-23T02:11:07Z", "message": "fix bug"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "65d46d5ac4b3d1ea3e8d3f34247a685a3b4850d8", "author": {"user": {"login": "wangliang181230", "name": "WangLiang/\u738b\u826f"}}, "url": "https://github.com/seata/seata/commit/65d46d5ac4b3d1ea3e8d3f34247a685a3b4850d8", "committedDate": "2020-09-23T02:18:33Z", "message": "fix MANDATORY BUG."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ae6d6075326978ac8e81db6f6424997ad6f4004a", "author": {"user": {"login": "wangliang181230", "name": "WangLiang/\u738b\u826f"}}, "url": "https://github.com/seata/seata/commit/ae6d6075326978ac8e81db6f6424997ad6f4004a", "committedDate": "2020-09-23T02:20:03Z", "message": "fix notes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "53fd8ea5dc14d4503474fabcb1bf1485ad152d1f", "author": {"user": {"login": "wangliang181230", "name": "WangLiang/\u738b\u826f"}}, "url": "https://github.com/seata/seata/commit/53fd8ea5dc14d4503474fabcb1bf1485ad152d1f", "committedDate": "2020-09-23T02:25:29Z", "message": "fix notes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9ff031766000b30d3fe13da128ec135d7743f811", "author": {"user": {"login": "wangliang181230", "name": "WangLiang/\u738b\u826f"}}, "url": "https://github.com/seata/seata/commit/9ff031766000b30d3fe13da128ec135d7743f811", "committedDate": "2020-09-23T02:28:43Z", "message": "fix notes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0155fc6c50ab354a44651033331f076113087d53", "author": {"user": {"login": "wangliang181230", "name": "WangLiang/\u738b\u826f"}}, "url": "https://github.com/seata/seata/commit/0155fc6c50ab354a44651033331f076113087d53", "committedDate": "2020-09-23T02:54:06Z", "message": "fix code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "190dbe407db31021c4e6e06733ab2c9308a752b2", "author": {"user": {"login": "wangliang181230", "name": "WangLiang/\u738b\u826f"}}, "url": "https://github.com/seata/seata/commit/190dbe407db31021c4e6e06733ab2c9308a752b2", "committedDate": "2020-09-23T03:04:27Z", "message": "optimize code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5d4c6e8c9868562324beea740df3bff038c17d64", "author": {"user": {"login": "wangliang181230", "name": "WangLiang/\u738b\u826f"}}, "url": "https://github.com/seata/seata/commit/5d4c6e8c9868562324beea740df3bff038c17d64", "committedDate": "2020-09-23T06:00:50Z", "message": "Merge remote-tracking branch 'remotes/upstream/develop' into bugfix-tm-propagation-new\n\n# Conflicts:\n#\tspring/src/main/java/io/seata/spring/tcc/TccActionInterceptor.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9b2c71f7cf521e031eace131ca22866a4d69eb1e", "author": {"user": {"login": "wangliang181230", "name": "WangLiang/\u738b\u826f"}}, "url": "https://github.com/seata/seata/commit/9b2c71f7cf521e031eace131ca22866a4d69eb1e", "committedDate": "2020-09-23T06:14:07Z", "message": "\u62c6\u5206\u90e8\u5206\u4ee3\u7801\u5230\u53e6\u4e00\u4e2a\u5206\u652f\u3002"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk0NDY3Mzk1", "url": "https://github.com/seata/seata/pull/3140#pullrequestreview-494467395", "createdAt": "2020-09-23T09:24:16Z", "commit": {"oid": "9b2c71f7cf521e031eace131ca22866a4d69eb1e"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yM1QwOToyNDoxNlrOHWgbcw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yM1QwOToyODoxN1rOHWgrzw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzM2MjAzNQ==", "bodyText": "\u8fd9\u6ce8\u91ca\u91cc\u7684\u4f2a\u4ee3\u7801\u65b9\u6cd5\uff0c\u4e0d\u662fseata\u73b0\u6709\u7684api\u3002\u8fd9\u4e2a\u5730\u65b9\uff0c\u662f\u4e0d\u662f\u53ef\u4ee5\u53c2\u8003spring\u4e8b\u52a1\uff0c\u7ed9\u6e05\u6670\u7684\u6ce8\u91ca\u5c31\u597d\u4e86\uff0c\u5c31\u6bd4\u5982\u4f60\u4e0a\u9762\u76842\u53e5\uff0c\u5df2\u7ecf\u8db3\u591f\u6e05\u6670\u4e86\u3002\u52a0\u8fd9\u4e2a\u4ee3\u7801\uff0c\u4f7f\u7528\u8005\u7528\u7684\u65f6\u5019\u5982\u679c\u770b\u4e86\u8fd9\u91cc\uff0c\u4f1a\u4e0d\u4f1a\u6709\u4e2a\u9519\u89c9\uff0c\u4ed6\u7528\u8fd9\u4e2a\u4f20\u64ad\u5c5e\u6027\uff0c\u8fd8\u5f97\u7167\u7740\u8fd9\u4e2a\u6a21\u677f\u7f16\u7801\u3002\u3002\u3002\u3002\u3002\u3002\u4ee3\u7801\u793a\u4f8b\uff0c\u5e94\u8be5\u591a\u662f\u6307\u5bfc\u7528\u6237\u53bb\u7f16\u7801\u7684\uff0c\u8fd9\u4e2a\u4ee3\u7801\u793a\u4f8b\uff0c\u611f\u89c9\u662f\u6307\u5bfc\u5199\u6846\u67b6\u7684\u4eba\u7684\uff0c\u4f46\u662f\u65b9\u6cd5\u53c8\u4e0d\u662fseata\u91cc\u7684\u65b9\u6cd5\u3002\u3002\u3002\uff08\u4e2a\u4eba\u770b\u6cd5\uff0c\u63a2\u8ba8\u4e00\u4e0b\uff09", "url": "https://github.com/seata/seata/pull/3140#discussion_r493362035", "createdAt": "2020-09-23T09:24:16Z", "author": {"login": "lightClouds917"}, "path": "tm/src/main/java/io/seata/tm/api/transaction/Propagation.java", "diffHunk": "@@ -19,37 +19,125 @@\n  * Propagation level of global transactions.\n  *\n  * @author haozhibei\n+ * @see io.seata.spring.annotation.GlobalTransactional\n+ * @see io.seata.tm.api.TransactionalTemplate\n  */\n public enum Propagation {\n     /**\n      * The REQUIRED.\n+     * <p>\n+     * If transaction is existing, execute with current transaction,\n+     * else execute with new transaction.\n+     * </p>\n+     * <pre>\n+     *     if (tx == null) {\n+     *         tx = beginNewTransaction(); // begin new transaction, is not existing", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b2c71f7cf521e031eace131ca22866a4d69eb1e"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzM2MzMwOQ==", "bodyText": "\u4ece\u6e05\u6670\u7684\u8bed\u4e49\u4e0a\u6765\u8bf4\uff0c\u8fd9\u91ccexistingTransaction \u662f\u4e0d\u662f\u6bd4 tx == null \u8fd9\u79cd\u66f4\u6e05\u6670\u4e9b\u3002", "url": "https://github.com/seata/seata/pull/3140#discussion_r493363309", "createdAt": "2020-09-23T09:25:29Z", "author": {"login": "lightClouds917"}, "path": "tm/src/main/java/io/seata/tm/api/TransactionalTemplate.java", "diffHunk": "@@ -48,64 +48,82 @@\n      * @throws TransactionalExecutor.ExecutionException the execution exception\n      */\n     public Object execute(TransactionalExecutor business) throws Throwable {\n-        // 1 get transactionInfo\n+        // 1. Get transactionInfo\n         TransactionInfo txInfo = business.getTransactionInfo();\n         if (txInfo == null) {\n             throw new ShouldNeverHappenException(\"transactionInfo does not exist\");\n         }\n-        // 1.1 get or create a transaction\n-        GlobalTransaction tx = GlobalTransactionContext.getCurrentOrCreate();\n+        // 1.1 Get current transaction, if not null, the tx role is 'GlobalTransactionRole.Participant'.\n+        GlobalTransaction tx = GlobalTransactionContext.getCurrent();\n \n-        // 1.2 Handle the Transaction propatation and the branchType\n+        // 1.2 Handle the transaction propagation.\n         Propagation propagation = txInfo.getPropagation();\n         SuspendedResourcesHolder suspendedResourcesHolder = null;\n         try {\n             switch (propagation) {\n                 case NOT_SUPPORTED:\n-                    suspendedResourcesHolder = tx.suspend(true);\n+                    // If transaction is existing, suspend it.\n+                    if (tx != null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b2c71f7cf521e031eace131ca22866a4d69eb1e"}, "originalPosition": 44}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzM2NjIyMw==", "bodyText": "\u6309\u7167\u4e00\u8d2f\u7684\u98ce\u683c\uff0cjava.*\u7684\u4ee3\u7801\u5e94\u8be5\u5728\u6700\u4e0a\u9762", "url": "https://github.com/seata/seata/pull/3140#discussion_r493366223", "createdAt": "2020-09-23T09:28:17Z", "author": {"login": "lightClouds917"}, "path": "tm/src/main/java/io/seata/tm/api/TransactionalTemplate.java", "diffHunk": "@@ -26,7 +24,9 @@\n import io.seata.tm.api.transaction.TransactionHook;\n import io.seata.tm.api.transaction.TransactionHookManager;\n import io.seata.tm.api.transaction.TransactionInfo;\n+\n import java.util.List;\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b2c71f7cf521e031eace131ca22866a4d69eb1e"}, "originalPosition": 16}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b6bdc64347358857fefb2fae978a99728e41aba3", "author": {"user": {"login": "wangliang181230", "name": "WangLiang/\u738b\u826f"}}, "url": "https://github.com/seata/seata/commit/b6bdc64347358857fefb2fae978a99728e41aba3", "committedDate": "2020-09-23T10:13:25Z", "message": "Merge remote-tracking branch 'remotes/upstream/develop' into bugfix-tm-propagation-new"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0898cfa334a1c2624437fdc8ef113d6492db17e3", "author": {"user": {"login": "wangliang181230", "name": "WangLiang/\u738b\u826f"}}, "url": "https://github.com/seata/seata/commit/0898cfa334a1c2624437fdc8ef113d6492db17e3", "committedDate": "2020-09-23T10:18:37Z", "message": "move import"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1e11b068ee7689b991d1288d32b5395a39d5f44a", "author": {"user": {"login": "wangliang181230", "name": "WangLiang/\u738b\u826f"}}, "url": "https://github.com/seata/seata/commit/1e11b068ee7689b991d1288d32b5395a39d5f44a", "committedDate": "2020-09-23T10:23:25Z", "message": "optimize code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1cb497dc56f8eea7d6da80789531a2ba00e0ef24", "author": {"user": {"login": "wangliang181230", "name": "WangLiang/\u738b\u826f"}}, "url": "https://github.com/seata/seata/commit/1cb497dc56f8eea7d6da80789531a2ba00e0ef24", "committedDate": "2020-09-23T10:23:57Z", "message": "Merge branch 'develop' into bugfix-tm-propagation-new"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "999a3825df4e0b387956fd4507f2dc2d8b15b0f2", "author": {"user": {"login": "wangliang181230", "name": "WangLiang/\u738b\u826f"}}, "url": "https://github.com/seata/seata/commit/999a3825df4e0b387956fd4507f2dc2d8b15b0f2", "committedDate": "2020-09-23T10:34:08Z", "message": "optimize notes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk0NTMyMDkz", "url": "https://github.com/seata/seata/pull/3140#pullrequestreview-494532093", "createdAt": "2020-09-23T10:49:15Z", "commit": {"oid": "999a3825df4e0b387956fd4507f2dc2d8b15b0f2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5762c57de900296cb6b831eab6050636d52972de", "author": {"user": {"login": "wangliang181230", "name": "WangLiang/\u738b\u826f"}}, "url": "https://github.com/seata/seata/commit/5762c57de900296cb6b831eab6050636d52972de", "committedDate": "2020-09-24T02:13:41Z", "message": "optimize notes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk1MTkxNzE1", "url": "https://github.com/seata/seata/pull/3140#pullrequestreview-495191715", "createdAt": "2020-09-24T03:18:55Z", "commit": {"oid": "5762c57de900296cb6b831eab6050636d52972de"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk1NDUyNDA2", "url": "https://github.com/seata/seata/pull/3140#pullrequestreview-495452406", "createdAt": "2020-09-24T11:00:39Z", "commit": {"oid": "5762c57de900296cb6b831eab6050636d52972de"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQxMTowMDo0MFrOHXVBMg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQxMTowMDo0MFrOHXVBMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDIyMzY2Ng==", "bodyText": "I think should include the\npublic\n\ncause the code style is different in different people, we should keep it same.", "url": "https://github.com/seata/seata/pull/3140#discussion_r494223666", "createdAt": "2020-09-24T11:00:40Z", "author": {"login": "l81893521"}, "path": "tm/src/main/java/io/seata/tm/api/GlobalTransactionContext.java", "diffHunk": "@@ -34,7 +34,7 @@ private GlobalTransactionContext() {\n      *\n      * @return\n      */\n-    private static GlobalTransaction createNew() {\n+    static GlobalTransaction createNew() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5762c57de900296cb6b831eab6050636d52972de"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "afe41085e5d0718a5225d6eedc8b3e0665d12e6c", "author": {"user": {"login": "wangliang181230", "name": "WangLiang/\u738b\u826f"}}, "url": "https://github.com/seata/seata/commit/afe41085e5d0718a5225d6eedc8b3e0665d12e6c", "committedDate": "2020-09-25T00:50:56Z", "message": "optimize code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e9a09d30f3cee4ac0c315b8dbf4af6af1c6344d3", "author": {"user": {"login": "wangliang181230", "name": "WangLiang/\u738b\u826f"}}, "url": "https://github.com/seata/seata/commit/e9a09d30f3cee4ac0c315b8dbf4af6af1c6344d3", "committedDate": "2020-09-25T01:57:38Z", "message": "add more notes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5b4f1190d8f1491c19a29a33735cb7251d8a2138", "author": {"user": {"login": "wangliang181230", "name": "WangLiang/\u738b\u826f"}}, "url": "https://github.com/seata/seata/commit/5b4f1190d8f1491c19a29a33735cb7251d8a2138", "committedDate": "2020-09-25T01:58:07Z", "message": "Merge branch 'develop' into bugfix-tm-propagation-new"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f4f29b2616dff8a1fa54b27b4d416f0c8eb1b4e5", "author": {"user": {"login": "wangliang181230", "name": "WangLiang/\u738b\u826f"}}, "url": "https://github.com/seata/seata/commit/f4f29b2616dff8a1fa54b27b4d416f0c8eb1b4e5", "committedDate": "2020-09-25T02:17:02Z", "message": "add more @see"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4d59edb3696b66e9db9be04d0353cfe95000fc91", "author": {"user": {"login": "wangliang181230", "name": "WangLiang/\u738b\u826f"}}, "url": "https://github.com/seata/seata/commit/4d59edb3696b66e9db9be04d0353cfe95000fc91", "committedDate": "2020-09-25T02:17:11Z", "message": "Merge remote-tracking branch 'origin/bugfix-tm-propagation-new' into bugfix-tm-propagation-new"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "59502f234d705463a8209279a77a15d919868491", "author": {"user": {"login": "wangliang181230", "name": "WangLiang/\u738b\u826f"}}, "url": "https://github.com/seata/seata/commit/59502f234d705463a8209279a77a15d919868491", "committedDate": "2020-09-25T03:16:00Z", "message": "optimize notes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "04b459b16cf38c945f18cf2cd2a09d3b6d2126a0", "author": {"user": {"login": "wangliang181230", "name": "WangLiang/\u738b\u826f"}}, "url": "https://github.com/seata/seata/commit/04b459b16cf38c945f18cf2cd2a09d3b6d2126a0", "committedDate": "2020-09-28T02:08:00Z", "message": "optimize notes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b2d0f36442ae6cdeb94ee28f5e28a1d60f3ed3f6", "author": {"user": {"login": "wangliang181230", "name": "WangLiang/\u738b\u826f"}}, "url": "https://github.com/seata/seata/commit/b2d0f36442ae6cdeb94ee28f5e28a1d60f3ed3f6", "committedDate": "2020-09-28T02:49:57Z", "message": "optimize notes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f9983abb175ce253447a58b42860b9965cf2a07e", "author": {"user": {"login": "a364176773", "name": "FUNKYE"}}, "url": "https://github.com/seata/seata/commit/f9983abb175ce253447a58b42860b9965cf2a07e", "committedDate": "2020-10-02T17:25:07Z", "message": "Merge branch 'develop' into bugfix-tm-propagation-new"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA2MDcyOTQ4", "url": "https://github.com/seata/seata/pull/3140#pullrequestreview-506072948", "createdAt": "2020-10-10T06:52:50Z", "commit": {"oid": "f9983abb175ce253447a58b42860b9965cf2a07e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMFQwNjo1Mjo1MFrOHfdyBg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMFQwNjo1Mjo1MFrOHfdyBg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjc1NTg0Ng==", "bodyText": "Why did you make this change?", "url": "https://github.com/seata/seata/pull/3140#discussion_r502755846", "createdAt": "2020-10-10T06:52:50Z", "author": {"login": "slievrly"}, "path": "tm/src/main/java/io/seata/tm/api/TransactionalTemplate.java", "diffHunk": "@@ -120,17 +136,20 @@ public Object execute(TransactionalExecutor business) throws Throwable {\n                 cleanUp();\n             }\n         } finally {\n-            tx.resume(suspendedResourcesHolder);\n+            // If the transaction is suspended, resume it.\n+            if (suspendedResourcesHolder != null) {\n+                suspendedResourcesHolder.resume();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f9983abb175ce253447a58b42860b9965cf2a07e"}, "originalPosition": 128}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7807aa233ff50dbcf0041485a2e64e53b9380162", "author": {"user": {"login": "slievrly", "name": "jimin"}}, "url": "https://github.com/seata/seata/commit/7807aa233ff50dbcf0041485a2e64e53b9380162", "committedDate": "2020-10-10T06:54:22Z", "message": "Merge branch 'develop' into bugfix-tm-propagation-new"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA2MDczNTEx", "url": "https://github.com/seata/seata/pull/3140#pullrequestreview-506073511", "createdAt": "2020-10-10T07:01:03Z", "commit": {"oid": "7807aa233ff50dbcf0041485a2e64e53b9380162"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a8502f9531fcd7de7fc80f0483e716dd87b36f2c", "author": {"user": {"login": "wangliang181230", "name": "WangLiang/\u738b\u826f"}}, "url": "https://github.com/seata/seata/commit/a8502f9531fcd7de7fc80f0483e716dd87b36f2c", "committedDate": "2020-10-10T07:05:58Z", "message": "optimize code logic"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3682, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}