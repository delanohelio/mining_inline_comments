{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIyNjUwNzgz", "number": 2730, "title": "optimize: optimize get config type from configuration", "bodyText": "\u2160. Describe what this PR did\nfix: get configTypeName exception\n\u2161. Does this pull request fix one issue?\nfixes #2724\n\u2162. Why don't you add test cases (unit test/integration test)?\n\u2163. Describe how to verify it\n\u2164. Special notes for reviews", "createdAt": "2020-05-25T09:37:16Z", "url": "https://github.com/seata/seata/pull/2730", "merged": true, "mergeCommit": {"oid": "53963d4acbf1340cc128f2af2724c63e01f337e3"}, "closed": true, "closedAt": "2020-05-26T06:40:48Z", "author": {"login": "PeineLiang"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcksqMeAH2gAyNDIyNjUwNzgzOjljY2YwOWQ5MGU4YjQzOGUzYThlNjU2MTI2M2Y5OTJjMmIwOTBkNjY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABck-z1MgFqTQxODAwNjYzNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "9ccf09d90e8b438e3a8e6561263f992c2b090d66", "author": {"user": {"login": "PeineLiang", "name": "Peine"}}, "url": "https://github.com/seata/seata/commit/9ccf09d90e8b438e3a8e6561263f992c2b090d66", "committedDate": "2020-05-25T09:29:16Z", "message": "bugfix: fix get configTypeName flaw"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3NjI5ODUx", "url": "https://github.com/seata/seata/pull/2730#pullrequestreview-417629851", "createdAt": "2020-05-25T10:52:20Z", "commit": {"oid": "9ccf09d90e8b438e3a8e6561263f992c2b090d66"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQxMDo1MjoyMFrOGZ9ORQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQxMDo1MjoyMFrOGZ9ORQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTg3MDY2MQ==", "bodyText": "How about do not change here?", "url": "https://github.com/seata/seata/pull/2730#discussion_r429870661", "createdAt": "2020-05-25T10:52:20Z", "author": {"login": "l81893521"}, "path": "config/seata-config-core/src/main/java/io/seata/config/ConfigType.java", "diffHunk": "@@ -66,6 +66,6 @@ public static ConfigType getType(String name) {\n                 return configType;\n             }\n         }\n-        throw new IllegalArgumentException(\"illegal type:\" + name);\n+        throw new IllegalArgumentException(\"not support config type: \" + name);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9ccf09d90e8b438e3a8e6561263f992c2b090d66"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3NjMwNTgw", "url": "https://github.com/seata/seata/pull/2730#pullrequestreview-417630580", "createdAt": "2020-05-25T10:53:45Z", "commit": {"oid": "9ccf09d90e8b438e3a8e6561263f992c2b090d66"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQxMDo1Mzo0NVrOGZ9QlA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQxMDo1Mzo0NVrOGZ9QlA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTg3MTI1Mg==", "bodyText": "if (configTypeName == null)\n\nThat s enough.", "url": "https://github.com/seata/seata/pull/2730#discussion_r429871252", "createdAt": "2020-05-25T10:53:45Z", "author": {"login": "l81893521"}, "path": "config/seata-config-core/src/main/java/io/seata/config/ConfigurationFactory.java", "diffHunk": "@@ -101,9 +102,14 @@ private static Configuration buildConfiguration() {\n             configTypeName = CURRENT_FILE_INSTANCE.getConfig(\n                 ConfigurationKeys.FILE_ROOT_CONFIG + ConfigurationKeys.FILE_CONFIG_SPLIT_CHAR\n                     + ConfigurationKeys.FILE_ROOT_TYPE);\n+\n+            if (StringUtils.isEmpty(configTypeName)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9ccf09d90e8b438e3a8e6561263f992c2b090d66"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "62c12a8800495007c92e78df49f37541b048ae32", "author": {"user": {"login": "PeineLiang", "name": "Peine"}}, "url": "https://github.com/seata/seata/commit/62c12a8800495007c92e78df49f37541b048ae32", "committedDate": "2020-05-25T14:00:31Z", "message": "bugfix: fix get configTypeName flaw"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f88a4ec2695c3070a3df80de649ef6aa44cf5700", "author": {"user": {"login": "PeineLiang", "name": "Peine"}}, "url": "https://github.com/seata/seata/commit/f88a4ec2695c3070a3df80de649ef6aa44cf5700", "committedDate": "2020-05-25T14:45:08Z", "message": "delete unused import"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3OTIxOTA5", "url": "https://github.com/seata/seata/pull/2730#pullrequestreview-417921909", "createdAt": "2020-05-26T01:36:42Z", "commit": {"oid": "f88a4ec2695c3070a3df80de649ef6aa44cf5700"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQwMTozNjo0M1rOGaMMUA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQwMTozNjo0M1rOGaMMUA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDExNTkyMA==", "bodyText": "If throw it directly, is it would throw other exception?", "url": "https://github.com/seata/seata/pull/2730#discussion_r430115920", "createdAt": "2020-05-26T01:36:43Z", "author": {"login": "l81893521"}, "path": "config/seata-config-core/src/main/java/io/seata/config/ConfigurationFactory.java", "diffHunk": "@@ -101,9 +102,14 @@ private static Configuration buildConfiguration() {\n             configTypeName = CURRENT_FILE_INSTANCE.getConfig(\n                 ConfigurationKeys.FILE_ROOT_CONFIG + ConfigurationKeys.FILE_CONFIG_SPLIT_CHAR\n                     + ConfigurationKeys.FILE_ROOT_TYPE);\n+\n+            if (StringUtils.isBlank(configTypeName)) {\n+                throw new NotSupportYetException(\"can not get config type: \" + configTypeName);\n+            }\n+\n             configType = ConfigType.getType(configTypeName);\n         } catch (Exception e) {\n-            throw new NotSupportYetException(\"not support register type: \" + configTypeName, e);\n+            throw e;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f88a4ec2695c3070a3df80de649ef6aa44cf5700"}, "originalPosition": 20}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3OTQ0NjE1", "url": "https://github.com/seata/seata/pull/2730#pullrequestreview-417944615", "createdAt": "2020-05-26T03:11:21Z", "commit": {"oid": "f88a4ec2695c3070a3df80de649ef6aa44cf5700"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3OTQ2Njk0", "url": "https://github.com/seata/seata/pull/2730#pullrequestreview-417946694", "createdAt": "2020-05-26T03:20:05Z", "commit": {"oid": "f88a4ec2695c3070a3df80de649ef6aa44cf5700"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3OTUzODY3", "url": "https://github.com/seata/seata/pull/2730#pullrequestreview-417953867", "createdAt": "2020-05-26T03:52:18Z", "commit": {"oid": "f88a4ec2695c3070a3df80de649ef6aa44cf5700"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQwMzo1MjoxOFrOGaN0EA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQwMzo1MjoxOFrOGaN0EA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDE0MjQ4MA==", "bodyText": "configTypeName is blank\uff0cwhy not print it out explicitly\uff1f", "url": "https://github.com/seata/seata/pull/2730#discussion_r430142480", "createdAt": "2020-05-26T03:52:18Z", "author": {"login": "slievrly"}, "path": "config/seata-config-core/src/main/java/io/seata/config/ConfigurationFactory.java", "diffHunk": "@@ -101,9 +102,14 @@ private static Configuration buildConfiguration() {\n             configTypeName = CURRENT_FILE_INSTANCE.getConfig(\n                 ConfigurationKeys.FILE_ROOT_CONFIG + ConfigurationKeys.FILE_CONFIG_SPLIT_CHAR\n                     + ConfigurationKeys.FILE_ROOT_TYPE);\n+\n+            if (StringUtils.isBlank(configTypeName)) {\n+                throw new NotSupportYetException(\"can not get config type: \" + configTypeName);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f88a4ec2695c3070a3df80de649ef6aa44cf5700"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "65d4838b43b7d685f0a83817fd3725295ce64e74", "author": {"user": {"login": "PeineLiang", "name": "Peine"}}, "url": "https://github.com/seata/seata/commit/65d4838b43b7d685f0a83817fd3725295ce64e74", "committedDate": "2020-05-26T04:09:48Z", "message": "change exception message"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4MDA2NjM0", "url": "https://github.com/seata/seata/pull/2730#pullrequestreview-418006634", "createdAt": "2020-05-26T06:38:05Z", "commit": {"oid": "65d4838b43b7d685f0a83817fd3725295ce64e74"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3724, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}