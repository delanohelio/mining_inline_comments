{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMyNzk5NjUy", "number": 1254, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QwMjoyMjo0N1rOEHyhdA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQwNjozMzoyOVrOEJBNXA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc2NjAzMjUyOnYy", "diffSide": "RIGHT", "path": "engine-mr/src/main/java/org/apache/kylin/engine/mr/common/JobInfoConverter.java", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QwMjoyMjo0N1rOGnXAdw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQwMTo0NDo1MlrOGoAHbA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzkyNDU5OQ==", "bodyText": "Hi, @guangxuCheng . Actually this method has replaced parseToJobInstanceQuietly(CubingJob job, Map<String, Output> outputs) and parseToJobInstanceQuietly(CheckpointExecutable job, Map<String, Output> outputs), so should  the replaced method and their UT be removed? And maybe UT for this new method should be added.", "url": "https://github.com/apache/kylin/pull/1254#discussion_r443924599", "createdAt": "2020-06-23T02:22:47Z", "author": {"login": "zhangayqian"}, "path": "engine-mr/src/main/java/org/apache/kylin/engine/mr/common/JobInfoConverter.java", "diffHunk": "@@ -61,6 +61,20 @@ public static JobInstance parseToJobInstanceQuietly(CheckpointExecutable job, Ma\n         }\n     }\n \n+    public static JobInstance parseToJobInstanceQuietly(AbstractExecutable job, Map<String, Output> outputs) {\n+        try {\n+            if (job instanceof CheckpointExecutable) {\n+                return parseToJobInstance((CheckpointExecutable)job, outputs);\n+            } else if (job instanceof CubingJob) {\n+                return parseToJobInstance((CubingJob)job, outputs);\n+            } else {\n+                return null;\n+            }\n+        } catch (Exception e) {\n+            logger.error(\"Failed to parse job instance: uuid={}\", job, e);\n+            return null;\n+        }\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2024b8e16c091844099020b011bd5b9f21df761a"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDE1OTA1NQ==", "bodyText": "@zhangayqian Thanks for reviewing. A nice finding,I will remove the two method.\nThe new method is to combine parseToJobInstanceQuietly(CubingJob job, Map<String, Output> outputs) and parseToJobInstanceQuietly(CheckpointExecutable job, Map<String, Output> outputs), so the ut about the two method is suitable for new method.", "url": "https://github.com/apache/kylin/pull/1254#discussion_r444159055", "createdAt": "2020-06-23T11:41:27Z", "author": {"login": "guangxuCheng"}, "path": "engine-mr/src/main/java/org/apache/kylin/engine/mr/common/JobInfoConverter.java", "diffHunk": "@@ -61,6 +61,20 @@ public static JobInstance parseToJobInstanceQuietly(CheckpointExecutable job, Ma\n         }\n     }\n \n+    public static JobInstance parseToJobInstanceQuietly(AbstractExecutable job, Map<String, Output> outputs) {\n+        try {\n+            if (job instanceof CheckpointExecutable) {\n+                return parseToJobInstance((CheckpointExecutable)job, outputs);\n+            } else if (job instanceof CubingJob) {\n+                return parseToJobInstance((CubingJob)job, outputs);\n+            } else {\n+                return null;\n+            }\n+        } catch (Exception e) {\n+            logger.error(\"Failed to parse job instance: uuid={}\", job, e);\n+            return null;\n+        }\n+    }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzkyNDU5OQ=="}, "originalCommit": {"oid": "2024b8e16c091844099020b011bd5b9f21df761a"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDE4MzIzMw==", "bodyText": "I force-pushed the branch to rebase master and remove the two methods.", "url": "https://github.com/apache/kylin/pull/1254#discussion_r444183233", "createdAt": "2020-06-23T12:26:50Z", "author": {"login": "guangxuCheng"}, "path": "engine-mr/src/main/java/org/apache/kylin/engine/mr/common/JobInfoConverter.java", "diffHunk": "@@ -61,6 +61,20 @@ public static JobInstance parseToJobInstanceQuietly(CheckpointExecutable job, Ma\n         }\n     }\n \n+    public static JobInstance parseToJobInstanceQuietly(AbstractExecutable job, Map<String, Output> outputs) {\n+        try {\n+            if (job instanceof CheckpointExecutable) {\n+                return parseToJobInstance((CheckpointExecutable)job, outputs);\n+            } else if (job instanceof CubingJob) {\n+                return parseToJobInstance((CubingJob)job, outputs);\n+            } else {\n+                return null;\n+            }\n+        } catch (Exception e) {\n+            logger.error(\"Failed to parse job instance: uuid={}\", job, e);\n+            return null;\n+        }\n+    }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzkyNDU5OQ=="}, "originalCommit": {"oid": "2024b8e16c091844099020b011bd5b9f21df761a"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDU5ODEyNA==", "bodyText": "Thanks for your update in time!", "url": "https://github.com/apache/kylin/pull/1254#discussion_r444598124", "createdAt": "2020-06-24T01:44:52Z", "author": {"login": "zhangayqian"}, "path": "engine-mr/src/main/java/org/apache/kylin/engine/mr/common/JobInfoConverter.java", "diffHunk": "@@ -61,6 +61,20 @@ public static JobInstance parseToJobInstanceQuietly(CheckpointExecutable job, Ma\n         }\n     }\n \n+    public static JobInstance parseToJobInstanceQuietly(AbstractExecutable job, Map<String, Output> outputs) {\n+        try {\n+            if (job instanceof CheckpointExecutable) {\n+                return parseToJobInstance((CheckpointExecutable)job, outputs);\n+            } else if (job instanceof CubingJob) {\n+                return parseToJobInstance((CubingJob)job, outputs);\n+            } else {\n+                return null;\n+            }\n+        } catch (Exception e) {\n+            logger.error(\"Failed to parse job instance: uuid={}\", job, e);\n+            return null;\n+        }\n+    }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzkyNDU5OQ=="}, "originalCommit": {"oid": "2024b8e16c091844099020b011bd5b9f21df761a"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc3ODkyNDQ0OnYy", "diffSide": "RIGHT", "path": "engine-mr/src/main/java/org/apache/kylin/engine/mr/common/JobInfoConverter.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQwNjozMzoyOVrOGpVR4w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOFQwNzo1NDo1M1rOGp7QDw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk5MzQ0Mw==", "bodyText": "Is there any place to set LookupSnapshotBuildJob type. Similar with\nresult.setType(CubeBuildTypeEnum.CHECKPOINT);", "url": "https://github.com/apache/kylin/pull/1254#discussion_r445993443", "createdAt": "2020-06-26T06:33:29Z", "author": {"login": "sanjulian"}, "path": "engine-mr/src/main/java/org/apache/kylin/engine/mr/common/JobInfoConverter.java", "diffHunk": "@@ -43,25 +43,21 @@\n public class JobInfoConverter {\n     private static final Logger logger = LoggerFactory.getLogger(JobInfoConverter.class);\n \n-    public static JobInstance parseToJobInstanceQuietly(CubingJob job, Map<String, Output> outputs) {\n+    public static JobInstance parseToJobInstanceQuietly(AbstractExecutable job, Map<String, Output> outputs) {\n         try {\n-            return parseToJobInstance(job, outputs);\n-        } catch (Exception e) {\n-            logger.error(\"Failed to parse job instance: uuid={}\", job, e);\n-            return null;\n-        }\n-    }\n-\n-    public static JobInstance parseToJobInstanceQuietly(CheckpointExecutable job, Map<String, Output> outputs) {\n-        try {\n-            return parseToJobInstance(job, outputs);\n+            if (job instanceof CheckpointExecutable) {\n+                return parseToJobInstance((CheckpointExecutable)job, outputs);\n+            } else if (job instanceof CubingJob) {\n+                return parseToJobInstance((CubingJob)job, outputs);\n+            } else {\n+                return null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "46552f388612306fec107006111f726d7e8ea748"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjE1MDY2Ng==", "bodyText": "Hi @sanjulian thanks for your reviewing. JobInfoConverter#parseToJobInstanceQuietly is only called by JobService#innerSearchJobs. The search mode of job are only CUBING_ONLY and CHECKPOINT_ONLY, so I think that it's ok for the implemented of JobInfoConverter#parseToJobInstanceQuietly.", "url": "https://github.com/apache/kylin/pull/1254#discussion_r446150666", "createdAt": "2020-06-26T12:23:17Z", "author": {"login": "guangxuCheng"}, "path": "engine-mr/src/main/java/org/apache/kylin/engine/mr/common/JobInfoConverter.java", "diffHunk": "@@ -43,25 +43,21 @@\n public class JobInfoConverter {\n     private static final Logger logger = LoggerFactory.getLogger(JobInfoConverter.class);\n \n-    public static JobInstance parseToJobInstanceQuietly(CubingJob job, Map<String, Output> outputs) {\n+    public static JobInstance parseToJobInstanceQuietly(AbstractExecutable job, Map<String, Output> outputs) {\n         try {\n-            return parseToJobInstance(job, outputs);\n-        } catch (Exception e) {\n-            logger.error(\"Failed to parse job instance: uuid={}\", job, e);\n-            return null;\n-        }\n-    }\n-\n-    public static JobInstance parseToJobInstanceQuietly(CheckpointExecutable job, Map<String, Output> outputs) {\n-        try {\n-            return parseToJobInstance(job, outputs);\n+            if (job instanceof CheckpointExecutable) {\n+                return parseToJobInstance((CheckpointExecutable)job, outputs);\n+            } else if (job instanceof CubingJob) {\n+                return parseToJobInstance((CubingJob)job, outputs);\n+            } else {\n+                return null;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk5MzQ0Mw=="}, "originalCommit": {"oid": "46552f388612306fec107006111f726d7e8ea748"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjYxNTU2Nw==", "bodyText": "OK, thanks for your reply.", "url": "https://github.com/apache/kylin/pull/1254#discussion_r446615567", "createdAt": "2020-06-28T07:54:53Z", "author": {"login": "sanjulian"}, "path": "engine-mr/src/main/java/org/apache/kylin/engine/mr/common/JobInfoConverter.java", "diffHunk": "@@ -43,25 +43,21 @@\n public class JobInfoConverter {\n     private static final Logger logger = LoggerFactory.getLogger(JobInfoConverter.class);\n \n-    public static JobInstance parseToJobInstanceQuietly(CubingJob job, Map<String, Output> outputs) {\n+    public static JobInstance parseToJobInstanceQuietly(AbstractExecutable job, Map<String, Output> outputs) {\n         try {\n-            return parseToJobInstance(job, outputs);\n-        } catch (Exception e) {\n-            logger.error(\"Failed to parse job instance: uuid={}\", job, e);\n-            return null;\n-        }\n-    }\n-\n-    public static JobInstance parseToJobInstanceQuietly(CheckpointExecutable job, Map<String, Output> outputs) {\n-        try {\n-            return parseToJobInstance(job, outputs);\n+            if (job instanceof CheckpointExecutable) {\n+                return parseToJobInstance((CheckpointExecutable)job, outputs);\n+            } else if (job instanceof CubingJob) {\n+                return parseToJobInstance((CubingJob)job, outputs);\n+            } else {\n+                return null;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk5MzQ0Mw=="}, "originalCommit": {"oid": "46552f388612306fec107006111f726d7e8ea748"}, "originalPosition": 22}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1607, "cost": 1, "resetAt": "2021-11-12T11:18:39Z"}}}