{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ2NTczMTc4", "number": 1312, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxNToxMjowN1rOEM8H-Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxNToyMDoxN1rOEM8VKA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgyMDAzNDQ5OnYy", "diffSide": "RIGHT", "path": "examples/test_case_data/sandbox/kylin.properties", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxNToxMjowN1rOGvVukg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMFQxMDoxMDozOFrOGvx2wg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjI5MjI0Mg==", "bodyText": "split by | \uff1f", "url": "https://github.com/apache/kylin/pull/1312#discussion_r452292242", "createdAt": "2020-07-09T15:12:07Z", "author": {"login": "bigxiaochu"}, "path": "examples/test_case_data/sandbox/kylin.properties", "diffHunk": "@@ -183,7 +183,8 @@ kylin.web.default-time-filter=0\n # kylin query metrics percentiles intervals default=60, 300, 3600\n kylin.server.query-metrics-percentiles-intervals=60, 360, 3600\n \n-# Env DEV|QA|PROD\n+# Env DEV|QA|PROD\\LOCAL\\UT", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e75e929b3d55740a24e46dd64dcaf0242cac07ce"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mjc1MzA5MA==", "bodyText": "Sure, it's not so obvious in my IDE between '|' and '' .", "url": "https://github.com/apache/kylin/pull/1312#discussion_r452753090", "createdAt": "2020-07-10T10:10:38Z", "author": {"login": "RupengWang"}, "path": "examples/test_case_data/sandbox/kylin.properties", "diffHunk": "@@ -183,7 +183,8 @@ kylin.web.default-time-filter=0\n # kylin query metrics percentiles intervals default=60, 300, 3600\n kylin.server.query-metrics-percentiles-intervals=60, 360, 3600\n \n-# Env DEV|QA|PROD\n+# Env DEV|QA|PROD\\LOCAL\\UT", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjI5MjI0Mg=="}, "originalCommit": {"oid": "e75e929b3d55740a24e46dd64dcaf0242cac07ce"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgyMDA0NjU4OnYy", "diffSide": "RIGHT", "path": "examples/test_case_data/sandbox/kylin.properties", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxNToxNTowN1rOGvV2UQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxNToxNTowN1rOGvV2UQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjI5NDIyNQ==", "bodyText": "I dont know what is modified ...", "url": "https://github.com/apache/kylin/pull/1312#discussion_r452294225", "createdAt": "2020-07-09T15:15:07Z", "author": {"login": "bigxiaochu"}, "path": "examples/test_case_data/sandbox/kylin.properties", "diffHunk": "@@ -226,4 +227,4 @@ kylin.engine.flink-conf.yarn.nodelabel=\n ### QUERY PUSH DOWN  ###\n #kylin.query.pushdown.runner-class-name=org.apache.kylin.query.pushdown.PushDownRunnerSparkImpl\n \n-kylin.query.transformers=org.apache.kylin.query.util.DefaultQueryTransformer\n+kylin.query.transformers=org.apache.kylin.query.util.DefaultQueryTransformer", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e75e929b3d55740a24e46dd64dcaf0242cac07ce"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgyMDA1NDExOnYy", "diffSide": "RIGHT", "path": "kylin-spark-project/kylin-spark-engine/src/main/java/org/apache/kylin/engine/spark/job/NSparkExecutable.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxNToxNjo0OFrOGvV7Hg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QwMjo1OTo0NVrOGwZ8hw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjI5NTQ1NA==", "bodyText": "UT is unittest, but local is local. So isLocalEnv()?", "url": "https://github.com/apache/kylin/pull/1312#discussion_r452295454", "createdAt": "2020-07-09T15:16:48Z", "author": {"login": "bigxiaochu"}, "path": "kylin-spark-project/kylin-spark-engine/src/main/java/org/apache/kylin/engine/spark/job/NSparkExecutable.java", "diffHunk": "@@ -146,7 +146,7 @@ protected ExecuteResult doWork(ExecutableContext context) throws ExecuteExceptio\n             throw new ExecuteException(\"meta dump failed\", e);\n         }\n         String filePath = dumpArgs();\n-        if (config.isUTEnv() || config.isZKLocal()) {\n+        if (config.isUTEnv() || config.isLOCALEnv() || config.isZKLocal()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e75e929b3d55740a24e46dd64dcaf0242cac07ce"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzQwOTkyNw==", "bodyText": "Agreed. Please capitalize local .", "url": "https://github.com/apache/kylin/pull/1312#discussion_r453409927", "createdAt": "2020-07-13T02:59:45Z", "author": {"login": "hit-lacus"}, "path": "kylin-spark-project/kylin-spark-engine/src/main/java/org/apache/kylin/engine/spark/job/NSparkExecutable.java", "diffHunk": "@@ -146,7 +146,7 @@ protected ExecuteResult doWork(ExecutableContext context) throws ExecuteExceptio\n             throw new ExecuteException(\"meta dump failed\", e);\n         }\n         String filePath = dumpArgs();\n-        if (config.isUTEnv() || config.isZKLocal()) {\n+        if (config.isUTEnv() || config.isLOCALEnv() || config.isZKLocal()) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjI5NTQ1NA=="}, "originalCommit": {"oid": "e75e929b3d55740a24e46dd64dcaf0242cac07ce"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgyMDA2ODI0OnYy", "diffSide": "RIGHT", "path": "kylin-spark-project/kylin-spark-engine/src/main/java/org/apache/kylin/engine/spark/source/CsvSource.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxNToyMDoxN1rOGvWEJA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QwMzowNDowNVrOGwaALw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjI5Nzc2NA==", "bodyText": "why ut path is \"../../examples/test_case_data/parquet_test/data/\", but local path is  \"../parquet_test/data/\"?\ncan they use same path?", "url": "https://github.com/apache/kylin/pull/1312#discussion_r452297764", "createdAt": "2020-07-09T15:20:17Z", "author": {"login": "bigxiaochu"}, "path": "kylin-spark-project/kylin-spark-engine/src/main/java/org/apache/kylin/engine/spark/source/CsvSource.java", "diffHunk": "@@ -59,7 +59,12 @@ public CsvSource(KylinConfig config) {\n                         && (parameters != null && parameters.get(\"separator\") == null)) {\n                     path = \"file:///\" + new File(getUtMetaDir(),\n                             \"../../examples/test_case_data/parquet_test/data/\" + table.identity() + \".csv\")\n-                                    .getAbsolutePath();\n+                            .getAbsolutePath();\n+                    separator = \"\";\n+                } else if (kylinConfig.getDeployEnv().equals(\"LOCAL\")) {\n+                    path = \"file:///\" + new File(getUtMetaDir(),\n+                            \"../parquet_test/data/\" + table.identity() + \".csv\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e75e929b3d55740a24e46dd64dcaf0242cac07ce"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzQxMDg2Mw==", "bodyText": "Agreed, these two path confusing me too.", "url": "https://github.com/apache/kylin/pull/1312#discussion_r453410863", "createdAt": "2020-07-13T03:04:05Z", "author": {"login": "hit-lacus"}, "path": "kylin-spark-project/kylin-spark-engine/src/main/java/org/apache/kylin/engine/spark/source/CsvSource.java", "diffHunk": "@@ -59,7 +59,12 @@ public CsvSource(KylinConfig config) {\n                         && (parameters != null && parameters.get(\"separator\") == null)) {\n                     path = \"file:///\" + new File(getUtMetaDir(),\n                             \"../../examples/test_case_data/parquet_test/data/\" + table.identity() + \".csv\")\n-                                    .getAbsolutePath();\n+                            .getAbsolutePath();\n+                    separator = \"\";\n+                } else if (kylinConfig.getDeployEnv().equals(\"LOCAL\")) {\n+                    path = \"file:///\" + new File(getUtMetaDir(),\n+                            \"../parquet_test/data/\" + table.identity() + \".csv\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjI5Nzc2NA=="}, "originalCommit": {"oid": "e75e929b3d55740a24e46dd64dcaf0242cac07ce"}, "originalPosition": 9}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1628, "cost": 1, "resetAt": "2021-11-12T11:18:39Z"}}}