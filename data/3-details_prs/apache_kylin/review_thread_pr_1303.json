{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQzODU0NDIw", "number": 1303, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNVQwNjo1Mjo1MlrOELb9cA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNVQwNjo1ODowNlrOELb-yw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgwNDI3ODg4OnYy", "diffSide": "RIGHT", "path": "docker/Dockerfile_hadoop", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNVQwNjo1Mjo1MlrOGtALAQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNlQwMTowNzoxOVrOGtGQUw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTg0MTkyMQ==", "bodyText": "Wht should we add this line?", "url": "https://github.com/apache/kylin/pull/1303#discussion_r449841921", "createdAt": "2020-07-05T06:52:52Z", "author": {"login": "hit-lacus"}, "path": "docker/Dockerfile_hadoop", "diffHunk": "@@ -91,6 +89,7 @@ RUN wget https://archive.apache.org/dist/spark/spark-$SPARK_VERSION/spark-$SPARK\n     && cp $HIVE_HOME/conf/hive-site.xml $SPARK_HOME/conf \\\n     && cp $SPARK_HOME/yarn/*.jar $HADOOP_HOME/share/hadoop/yarn/lib\n RUN cp $HIVE_HOME/lib/mysql-connector-java-5.1.24.jar $SPARK_HOME/jars\n+RUN cp $HBASE_HOME/lib/hbase-protocol-1.1.2.jar $SPARK_HOME/jars", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f45d313cdf5d349cff3f4f2e5177a8cb7aa7a746"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTk0MTU4Nw==", "bodyText": "when build with spark, it needs this hbase-protocol.jar, otherwise it throws 'NoClassDefFoundError: org/apache/hadoop/hbase/protobuf/generated/HFileProtos'.", "url": "https://github.com/apache/kylin/pull/1303#discussion_r449941587", "createdAt": "2020-07-06T01:07:19Z", "author": {"login": "zzcclp"}, "path": "docker/Dockerfile_hadoop", "diffHunk": "@@ -91,6 +89,7 @@ RUN wget https://archive.apache.org/dist/spark/spark-$SPARK_VERSION/spark-$SPARK\n     && cp $HIVE_HOME/conf/hive-site.xml $SPARK_HOME/conf \\\n     && cp $SPARK_HOME/yarn/*.jar $HADOOP_HOME/share/hadoop/yarn/lib\n RUN cp $HIVE_HOME/lib/mysql-connector-java-5.1.24.jar $SPARK_HOME/jars\n+RUN cp $HBASE_HOME/lib/hbase-protocol-1.1.2.jar $SPARK_HOME/jars", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTg0MTkyMQ=="}, "originalCommit": {"oid": "f45d313cdf5d349cff3f4f2e5177a8cb7aa7a746"}, "originalPosition": 20}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgwNDI4MTI5OnYy", "diffSide": "RIGHT", "path": "docker/Dockerfile", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNVQwNjo1NjozOFrOGtAMNQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNlQwNTo0ODowOFrOGtJjhQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTg0MjIyOQ==", "bodyText": "I may not accpect this change from archive to \"mirror\", older version is not accessible in mirror, like 2.5.0.", "url": "https://github.com/apache/kylin/pull/1303#discussion_r449842229", "createdAt": "2020-07-05T06:56:38Z", "author": {"login": "hit-lacus"}, "path": "docker/Dockerfile", "diffHunk": "@@ -18,17 +18,18 @@\n # Docker image for apache kylin, based on the Hadoop image\n FROM hadoop2.7-all-in-one\n \n-ENV KYLIN_VERSION 3.0.1\n+ENV KYLIN_VERSION 3.1.0\n ENV KYLIN_HOME /home/admin/apache-kylin-$KYLIN_VERSION-bin-hbase1x\n \n # Download released Kylin\n-RUN wget https://archive.apache.org/dist/kylin/apache-kylin-$KYLIN_VERSION/apache-kylin-$KYLIN_VERSION-bin-hbase1x.tar.gz \\\n+RUN wget https://downloads.apache.org/kylin/apache-kylin-$KYLIN_VERSION/apache-kylin-$KYLIN_VERSION-bin-hbase1x.tar.gz \\", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f45d313cdf5d349cff3f4f2e5177a8cb7aa7a746"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTk0MjYwMw==", "bodyText": "it can't download kylin 3.1.0 from https://archive.apache.org at that time, so I changed to \"mirror\".", "url": "https://github.com/apache/kylin/pull/1303#discussion_r449942603", "createdAt": "2020-07-06T01:14:59Z", "author": {"login": "zzcclp"}, "path": "docker/Dockerfile", "diffHunk": "@@ -18,17 +18,18 @@\n # Docker image for apache kylin, based on the Hadoop image\n FROM hadoop2.7-all-in-one\n \n-ENV KYLIN_VERSION 3.0.1\n+ENV KYLIN_VERSION 3.1.0\n ENV KYLIN_HOME /home/admin/apache-kylin-$KYLIN_VERSION-bin-hbase1x\n \n # Download released Kylin\n-RUN wget https://archive.apache.org/dist/kylin/apache-kylin-$KYLIN_VERSION/apache-kylin-$KYLIN_VERSION-bin-hbase1x.tar.gz \\\n+RUN wget https://downloads.apache.org/kylin/apache-kylin-$KYLIN_VERSION/apache-kylin-$KYLIN_VERSION-bin-hbase1x.tar.gz \\", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTg0MjIyOQ=="}, "originalCommit": {"oid": "f45d313cdf5d349cff3f4f2e5177a8cb7aa7a746"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTk5NTY1Mw==", "bodyText": "Done", "url": "https://github.com/apache/kylin/pull/1303#discussion_r449995653", "createdAt": "2020-07-06T05:48:08Z", "author": {"login": "zzcclp"}, "path": "docker/Dockerfile", "diffHunk": "@@ -18,17 +18,18 @@\n # Docker image for apache kylin, based on the Hadoop image\n FROM hadoop2.7-all-in-one\n \n-ENV KYLIN_VERSION 3.0.1\n+ENV KYLIN_VERSION 3.1.0\n ENV KYLIN_HOME /home/admin/apache-kylin-$KYLIN_VERSION-bin-hbase1x\n \n # Download released Kylin\n-RUN wget https://archive.apache.org/dist/kylin/apache-kylin-$KYLIN_VERSION/apache-kylin-$KYLIN_VERSION-bin-hbase1x.tar.gz \\\n+RUN wget https://downloads.apache.org/kylin/apache-kylin-$KYLIN_VERSION/apache-kylin-$KYLIN_VERSION-bin-hbase1x.tar.gz \\", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTg0MjIyOQ=="}, "originalCommit": {"oid": "f45d313cdf5d349cff3f4f2e5177a8cb7aa7a746"}, "originalPosition": 10}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgwNDI4MjM1OnYy", "diffSide": "RIGHT", "path": "docker/entrypoint.sh", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNVQwNjo1ODowNlrOGtAMuw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNlQwMToyMzozMFrOGtGZVQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTg0MjM2Mw==", "bodyText": "Is this KafkaProduer cause any problem?", "url": "https://github.com/apache/kylin/pull/1303#discussion_r449842363", "createdAt": "2020-07-05T06:58:06Z", "author": {"login": "hit-lacus"}, "path": "docker/entrypoint.sh", "diffHunk": "@@ -82,7 +79,7 @@ then\n     $KAFKA_HOME/bin/kafka-topics.sh --create --zookeeper localhost:2181 --replication-factor 1 --partitions 3 --topic kylin_streaming_topic\n fi\n \n-nohup $KYLIN_HOME/bin/kylin.sh org.apache.kylin.source.kafka.util.KafkaSampleProducer --topic kylin_streaming_topic --broker localhost:9092 > /dev/null 2>&1 > /tmp/kafka-sample.log &\n+# nohup $KYLIN_HOME/bin/kylin.sh org.apache.kylin.source.kafka.util.KafkaSampleProducer --topic kylin_streaming_topic --broker localhost:9092 > /dev/null 2>&1 > /tmp/kafka-sample.log &", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f45d313cdf5d349cff3f4f2e5177a8cb7aa7a746"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTk0Mzg5Mw==", "bodyText": "This command will send data to kafka continuously, which will generate too much data. I think it can be started manually.", "url": "https://github.com/apache/kylin/pull/1303#discussion_r449943893", "createdAt": "2020-07-06T01:23:30Z", "author": {"login": "zzcclp"}, "path": "docker/entrypoint.sh", "diffHunk": "@@ -82,7 +79,7 @@ then\n     $KAFKA_HOME/bin/kafka-topics.sh --create --zookeeper localhost:2181 --replication-factor 1 --partitions 3 --topic kylin_streaming_topic\n fi\n \n-nohup $KYLIN_HOME/bin/kylin.sh org.apache.kylin.source.kafka.util.KafkaSampleProducer --topic kylin_streaming_topic --broker localhost:9092 > /dev/null 2>&1 > /tmp/kafka-sample.log &\n+# nohup $KYLIN_HOME/bin/kylin.sh org.apache.kylin.source.kafka.util.KafkaSampleProducer --topic kylin_streaming_topic --broker localhost:9092 > /dev/null 2>&1 > /tmp/kafka-sample.log &", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTg0MjM2Mw=="}, "originalCommit": {"oid": "f45d313cdf5d349cff3f4f2e5177a8cb7aa7a746"}, "originalPosition": 17}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1621, "cost": 1, "resetAt": "2021-11-12T11:18:39Z"}}}