{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY0NTgxMjg1", "number": 4353, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOFQxMzowODoxMlrOEWewyQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOFQxNDoxOTowM1rOEWfEWQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkyMDA4MTM3OnYy", "diffSide": "RIGHT", "path": "app/src/main/java/de/danoeh/antennapod/activity/MainActivity.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOFQxMzowODoxMlrOG9ztDQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOFQxMzowODoxMlrOG9ztDQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzQ2MzQzNw==", "bodyText": "You can store this in R.dimens to prevent having to convert between dp and px.", "url": "https://github.com/AntennaPod/AntennaPod/pull/4353#discussion_r467463437", "createdAt": "2020-08-08T13:08:12Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/activity/MainActivity.java", "diffHunk": "@@ -323,6 +327,34 @@ public void onConfigurationChanged(Configuration newConfig) {\n         if (drawerToggle != null) { // Tablet layout does not have a drawer\n             drawerToggle.onConfigurationChanged(newConfig);\n         }\n+        setNavDrawerSize();\n+    }\n+\n+    private void setNavDrawerSize() {\n+        float screenPercent = getResources().getInteger(R.integer.nav_drawer_screen_size_percent) * 0.01f;\n+        int width = (int) (getScreenWidth() * screenPercent);\n+        int maxWidth = (int) dpInPx(getResources().getInteger(R.integer.nav_drawer_max_screen_size_dp));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e0609f5658da950b580d96304a4be6d4913a66a5"}, "originalPosition": 32}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkyMDA4MTY2OnYy", "diffSide": "RIGHT", "path": "app/src/main/java/de/danoeh/antennapod/activity/MainActivity.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOFQxMzowODo1MlrOG9ztOg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOFQxMzowODo1MlrOG9ztOg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzQ2MzQ4Mg==", "bodyText": "Android Lint does not like manual min calculation. Something like Math.min() would be more clear.", "url": "https://github.com/AntennaPod/AntennaPod/pull/4353#discussion_r467463482", "createdAt": "2020-08-08T13:08:52Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/activity/MainActivity.java", "diffHunk": "@@ -323,6 +327,34 @@ public void onConfigurationChanged(Configuration newConfig) {\n         if (drawerToggle != null) { // Tablet layout does not have a drawer\n             drawerToggle.onConfigurationChanged(newConfig);\n         }\n+        setNavDrawerSize();\n+    }\n+\n+    private void setNavDrawerSize() {\n+        float screenPercent = getResources().getInteger(R.integer.nav_drawer_screen_size_percent) * 0.01f;\n+        int width = (int) (getScreenWidth() * screenPercent);\n+        int maxWidth = (int) dpInPx(getResources().getInteger(R.integer.nav_drawer_max_screen_size_dp));\n+\n+        if (width > maxWidth) {\n+            width = maxWidth;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e0609f5658da950b580d96304a4be6d4913a66a5"}, "originalPosition": 35}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkyMDEzMTQ1OnYy", "diffSide": "RIGHT", "path": "app/src/main/java/de/danoeh/antennapod/activity/MainActivity.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOFQxNDoxOTowM1rOG90Ekw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOFQxNDoxOTowM1rOG90Ekw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzQ2OTQ1OQ==", "bodyText": "It would be more reliable to check if drawerToggle == null to detect if we are using the tablet layout.", "url": "https://github.com/AntennaPod/AntennaPod/pull/4353#discussion_r467469459", "createdAt": "2020-08-08T14:19:03Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/activity/MainActivity.java", "diffHunk": "@@ -323,6 +327,30 @@ public void onConfigurationChanged(Configuration newConfig) {\n         if (drawerToggle != null) { // Tablet layout does not have a drawer\n             drawerToggle.onConfigurationChanged(newConfig);\n         }\n+        setNavDrawerSize();\n+    }\n+\n+    private void setNavDrawerSize() {\n+        if (isTablet()) {\n+            return;\n+        }\n+        float screenPercent = getResources().getInteger(R.integer.nav_drawer_screen_size_percent) * 0.01f;\n+        int width = (int) (getScreenWidth() * screenPercent);\n+        int maxWidth = (int) getResources().getDimension(R.dimen.nav_drawer_max_screen_size);\n+\n+        navDrawer.getLayoutParams().width = Math.min(width, maxWidth);\n+    }\n+\n+    private int getScreenWidth() {\n+        DisplayMetrics displayMetrics = new DisplayMetrics();\n+        getWindowManager().getDefaultDisplay().getMetrics(displayMetrics);\n+        return displayMetrics.widthPixels;\n+    }\n+\n+    private boolean isTablet() {\n+        return (getResources().getConfiguration().screenLayout\n+                & Configuration.SCREENLAYOUT_SIZE_MASK)\n+                >= Configuration.SCREENLAYOUT_SIZE_LARGE;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1a5627dd23ebd4e1e59433ffefa126b5dd62f215"}, "originalPosition": 49}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4749, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}