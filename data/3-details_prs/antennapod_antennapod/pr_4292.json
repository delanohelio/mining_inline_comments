{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ5OTYzNjEx", "number": 4292, "title": "FIX:  In landscape mode, the album art overwhelms the playback screen #4009 ", "bodyText": "fix #4009\nIn code I changed the layout when the phone changes layout (I couldn't get a 2nd land layout working, this works a lot better in code\n\nThe size of the album image when in landscape vs portrait mode\nChange the layout from horizontal to vertical for LinearLayout\n\nAfterwards it looks so much nicer\n\nCompared to before", "createdAt": "2020-07-16T07:22:13Z", "url": "https://github.com/AntennaPod/AntennaPod/pull/4292", "merged": true, "mergeCommit": {"oid": "84a8eaaee0bf110b371043a5f5187d7f601f4b5f"}, "closed": true, "closedAt": "2020-07-19T14:53:47Z", "author": {"login": "tonytamsf"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcll2XcgH2gAyNDQ5OTYzNjExOjYyYTZhYzkwNzgwZDhkOTZiYjlhZTE5ZjRkOTUxMDhlNDQ2ZTk0MWY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc19pX0AH2gAyNDQ5OTYzNjExOmU1M2RiOTFlZTM4MTczYmUzM2ZiMjI3MzA3MGVjMmY3NmQwNTc2M2E=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "62a6ac90780d8d96bb9ae19f4d95108e446e941f", "author": {"user": {"login": "tonytamsf", "name": "Tony Tam"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/62a6ac90780d8d96bb9ae19f4d95108e446e941f", "committedDate": "2020-05-28T04:07:09Z", "message": "landscape layout"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0cad3bce6840069261b64fe5dc7e474df2b57315", "author": {"user": {"login": "tonytamsf", "name": "Tony Tam"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/0cad3bce6840069261b64fe5dc7e474df2b57315", "committedDate": "2020-07-15T05:52:55Z", "message": "sync"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dba3aee7b0152805384f9f944cac38c8abada5d5", "author": {"user": {"login": "tonytamsf", "name": "Tony Tam"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/dba3aee7b0152805384f9f944cac38c8abada5d5", "committedDate": "2020-07-16T07:06:01Z", "message": "finally fixed"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7f8ac6c681085c2c517e7dd352806a99e682d93b", "author": {"user": {"login": "tonytamsf", "name": "Tony Tam"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/7f8ac6c681085c2c517e7dd352806a99e682d93b", "committedDate": "2020-07-16T07:14:39Z", "message": "remove unneeded code"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ5NjIxMjQy", "url": "https://github.com/AntennaPod/AntennaPod/pull/4292#pullrequestreview-449621242", "createdAt": "2020-07-16T08:16:25Z", "commit": {"oid": "7f8ac6c681085c2c517e7dd352806a99e682d93b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQwODoxNjoyNVrOGygCQA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQwODoxNjoyNVrOGygCQA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTYwNjg0OA==", "bodyText": "Can this be within the if statement above?", "url": "https://github.com/AntennaPod/AntennaPod/pull/4292#discussion_r455606848", "createdAt": "2020-07-16T08:16:25Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/fragment/CoverFragment.java", "diffHunk": "@@ -159,6 +171,38 @@ private void displayCoverImage(int position) {\n         }\n     }\n \n+    @Override\n+    public void onConfigurationChanged(Configuration newConfig) {\n+        super.onConfigurationChanged(newConfig);\n+\n+        if (orientation != newConfig.orientation) {\n+            orientation = newConfig.orientation;\n+        }\n+        configureForOrientation(orientation, newConfig);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7f8ac6c681085c2c517e7dd352806a99e682d93b"}, "originalPosition": 75}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b3112701de533456166355ee73428e7412604367", "author": {"user": {"login": "tonytamsf", "name": "Tony Tam"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/b3112701de533456166355ee73428e7412604367", "committedDate": "2020-07-16T14:43:18Z", "message": "remove global var for orientation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ5OTM4OTcz", "url": "https://github.com/AntennaPod/AntennaPod/pull/4292#pullrequestreview-449938973", "createdAt": "2020-07-16T15:03:38Z", "commit": {"oid": "b3112701de533456166355ee73428e7412604367"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwMjIzNTIz", "url": "https://github.com/AntennaPod/AntennaPod/pull/4292#pullrequestreview-450223523", "createdAt": "2020-07-16T21:18:08Z", "commit": {"oid": "b3112701de533456166355ee73428e7412604367"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQyMToxODowOFrOGy9IJw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQyMToxODowOFrOGy9IJw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjA4MzQ5NQ==", "bodyText": "Setting this directly just sets the variables and does not re-layout. I think something like this would be more safe:\nViewGroup.LayoutParams params = imgvCover.getLayoutParams();\nparams.width = (int) (convertDpToPixel(newConfig.screenWidthDp) * .80);\nparams.height = imgvCover.getLayoutParams().width;\nimgvCover.setLayoutParams(params);", "url": "https://github.com/AntennaPod/AntennaPod/pull/4292#discussion_r456083495", "createdAt": "2020-07-16T21:18:08Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/fragment/CoverFragment.java", "diffHunk": "@@ -159,6 +170,35 @@ private void displayCoverImage(int position) {\n         }\n     }\n \n+    @Override\n+    public void onConfigurationChanged(Configuration newConfig) {\n+        super.onConfigurationChanged(newConfig);\n+\n+        configureForOrientation(newConfig);\n+    }\n+\n+    public float convertDpToPixel(float dp) {\n+        Context context = this.getActivity().getApplicationContext();\n+        return dp * ((float) context.getResources().getDisplayMetrics().densityDpi / DisplayMetrics.DENSITY_DEFAULT);\n+    }\n+\n+    private void configureForOrientation(Configuration newConfig) {\n+        LinearLayout mainContainer = getView().findViewById(R.id.cover_fragment);\n+        if (newConfig.orientation == Configuration.ORIENTATION_PORTRAIT) {\n+            mainContainer.setOrientation(LinearLayout.VERTICAL);\n+            if (newConfig.screenWidthDp > 0) {\n+                imgvCover.getLayoutParams().width = (int) (convertDpToPixel(newConfig.screenWidthDp) * .80);\n+                imgvCover.getLayoutParams().height = imgvCover.getLayoutParams().width;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b3112701de533456166355ee73428e7412604367"}, "originalPosition": 78}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ac8f6f9a3e3ffd27ff82cea82256007c6676c764", "author": {"user": {"login": "tonytamsf", "name": "Tony Tam"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/ac8f6f9a3e3ffd27ff82cea82256007c6676c764", "committedDate": "2020-07-17T05:45:59Z", "message": "layout params"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "98edefea08672df15b99a59561e5de939867194f", "author": {"user": {"login": "tonytamsf", "name": "Tony Tam"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/98edefea08672df15b99a59561e5de939867194f", "committedDate": "2020-07-17T05:56:19Z", "message": "a bit more margin"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e53db91ee38173be33fb2273070ec2f76d05763a", "author": {"user": {"login": "tonytamsf", "name": "Tony Tam"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/e53db91ee38173be33fb2273070ec2f76d05763a", "committedDate": "2020-07-18T00:53:28Z", "message": "fix checkstyle"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2799, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}