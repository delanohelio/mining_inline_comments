{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAwNjgxMzMx", "number": 4515, "title": "Discovery filter by country & hide discovery on first subscribe screen", "bodyText": "fix #4509\nfix #4355\nfix #3982\nInitial working code to allow users to Discover by country\n\nAllow user to Discovery top podcasts for 250 countries\nDefault to the device's country, instead of US\nSave the country into the user's preferences\nUse a 'Hide' country, to hide everything from Discover main screen\n\nChecklist\n\n Allow for user to select 'no country' so that the discovery podcasts will not show on the first screen\n Load the entire country list, should we keep this in preferences and / or also on the server side on github?\n using system region list, which has all the translations as well\n honor the region in the first discover screen\n\n\n\nIf the user selected a country, then the discovery area will reflect that country's content.  This is one way to filter out stuff you don't want\n\n\n\n\nIf you absolutely wanted to not see anything, you can hide the content", "createdAt": "2020-10-09T15:54:14Z", "url": "https://github.com/AntennaPod/AntennaPod/pull/4515", "merged": true, "mergeCommit": {"oid": "2ef464ad93525e93e74f1a8f298059acc6977d8d"}, "closed": true, "closedAt": "2020-10-17T20:50:10Z", "author": {"login": "tonytamsf"}, "timelineItems": {"totalCount": 34, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdQvHjsgH2gAyNTAwNjgxMzMxOjRhMjFlMzYxMTI1NjNjMjQ5YjUyMDZjMGM3M2U2YmQxY2Y0ZTg2ZGI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdTJsXWAH2gAyNTAwNjgxMzMxOmM0YzFhZWNmNTU2YzY3MzNhY2NkMWExZGI0YzFmNDI5ZmE0MTg5MDk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "4a21e36112563c249b5206c0c73e6bd1cf4e86db", "author": {"user": {"login": "tonytamsf", "name": "Tony Tam"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/4a21e36112563c249b5206c0c73e6bd1cf4e86db", "committedDate": "2020-10-09T05:13:49Z", "message": "first"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7f8decd533ec55d06ec4e15993e33bc83d9f9383", "author": {"user": {"login": "tonytamsf", "name": "Tony Tam"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/7f8decd533ec55d06ec4e15993e33bc83d9f9383", "committedDate": "2020-10-09T15:52:08Z", "message": "browse by country"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d3a7b3fc91edc8b954a91c258aca86933e67dc73", "author": {"user": {"login": "tonytamsf", "name": "Tony Tam"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/d3a7b3fc91edc8b954a91c258aca86933e67dc73", "committedDate": "2020-10-09T16:07:58Z", "message": "clean code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6cbca4c6fc24f4ffa498e4a706c07e5d44b0e10b", "author": {"user": {"login": "tonytamsf", "name": "Tony Tam"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/6cbca4c6fc24f4ffa498e4a706c07e5d44b0e10b", "committedDate": "2020-10-09T16:11:24Z", "message": "clean"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "49d025a2ce28f6402ddcd8942e3881e469312827", "author": {"user": {"login": "tonytamsf", "name": "Tony Tam"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/49d025a2ce28f6402ddcd8942e3881e469312827", "committedDate": "2020-10-09T21:35:16Z", "message": "checkstyle fun"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e1b5875d6e330ad006afc3fc82104270994b47d3", "author": {"user": {"login": "tonytamsf", "name": "Tony Tam"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/e1b5875d6e330ad006afc3fc82104270994b47d3", "committedDate": "2020-10-09T21:38:26Z", "message": "Trigger Build"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d1a4ad8f054a2ab4bafcb1da46af34fe01d15d00", "author": {"user": {"login": "tonytamsf", "name": "Tony Tam"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/d1a4ad8f054a2ab4bafcb1da46af34fe01d15d00", "committedDate": "2020-10-09T21:39:16Z", "message": "Trigger Build"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a0bfb0ddc4d061db76398231a1fc9d0c42647d32", "author": {"user": {"login": "tonytamsf", "name": "Tony Tam"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/a0bfb0ddc4d061db76398231a1fc9d0c42647d32", "committedDate": "2020-10-10T01:57:36Z", "message": "dynamic list"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ec28c1c049268f125875c639e4b6f9455964fe0a", "author": {"user": {"login": "tonytamsf", "name": "Tony Tam"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/ec28c1c049268f125875c639e4b6f9455964fe0a", "committedDate": "2020-10-10T02:23:32Z", "message": "checkstyle"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1251c8c13fb2d2c4142a392e45f0f00503cc37af", "author": {"user": {"login": "tonytamsf", "name": "Tony Tam"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/1251c8c13fb2d2c4142a392e45f0f00503cc37af", "committedDate": "2020-10-10T02:33:20Z", "message": "checkstyle"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "99b4f74fcd47e47595467cdee7124869556ada71", "author": {"user": {"login": "tonytamsf", "name": "Tony Tam"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/99b4f74fcd47e47595467cdee7124869556ada71", "committedDate": "2020-10-10T06:00:24Z", "message": "clean up"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3c4a54293608f748e1d978d098bcc4bc5936de72", "author": {"user": {"login": "tonytamsf", "name": "Tony Tam"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/3c4a54293608f748e1d978d098bcc4bc5936de72", "committedDate": "2020-10-10T06:46:26Z", "message": "us -> US"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6c81f75c20a55ddf6e28e1aa2c7215addbb97822", "author": {"user": {"login": "tonytamsf", "name": "Tony Tam"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/6c81f75c20a55ddf6e28e1aa2c7215addbb97822", "committedDate": "2020-10-10T07:11:40Z", "message": "checkstyle"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "da72c7280500f20cfebc677b9b97f21cf067eeeb", "author": {"user": {"login": "tonytamsf", "name": "Tony Tam"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/da72c7280500f20cfebc677b9b97f21cf067eeeb", "committedDate": "2020-10-11T03:56:20Z", "message": "support hiding discovery"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c3a1c359c97381be5ce9499a40b67ae962c7b411", "author": {"user": {"login": "tonytamsf", "name": "Tony Tam"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/c3a1c359c97381be5ce9499a40b67ae962c7b411", "committedDate": "2020-10-11T04:02:01Z", "message": "checkstyle"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4f3339da89c3d8d02cfc37512e33bb5ccd6e36c3", "author": {"user": {"login": "tonytamsf", "name": "Tony Tam"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/4f3339da89c3d8d02cfc37512e33bb5ccd6e36c3", "committedDate": "2020-10-11T04:06:26Z", "message": "checkstyle"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA2MTU1Mjcy", "url": "https://github.com/AntennaPod/AntennaPod/pull/4515#pullrequestreview-506155272", "createdAt": "2020-10-11T08:15:03Z", "commit": {"oid": "4f3339da89c3d8d02cfc37512e33bb5ccd6e36c3"}, "state": "COMMENTED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMVQwODoxNTowNFrOHflhXg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMVQwODoyMTozNlrOHfljxQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjg4MjY1NA==", "bodyText": "What do you think about only falling back to US when no country was selected yet? Other countries could display something like \"Sorry, we do not have suggestions for your region\".", "url": "https://github.com/AntennaPod/AntennaPod/pull/4515#discussion_r502882654", "createdAt": "2020-10-11T08:15:04Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/discovery/ItunesTopListLoader.java", "diffHunk": "@@ -23,23 +24,33 @@\n import java.util.Locale;\n import java.util.concurrent.TimeUnit;\n \n+import static android.content.Context.MODE_PRIVATE;\n+\n public class ItunesTopListLoader {\n     private static final String TAG = \"ITunesTopListLoader\";\n     private final Context context;\n+    public static final String PREF_KEY_COUNTRY_CODE = \"country_code\";\n+    public static final String PREFS = \"CountryRegionPrefs\";\n \n     public ItunesTopListLoader(Context context) {\n         this.context = context;\n     }\n \n-    public Single<List<PodcastSearchResult>> loadToplist(int limit) {\n+    public Single<List<PodcastSearchResult>> loadToplist() {\n+        String defaultCountry = Locale.getDefault().getCountry();\n+        SharedPreferences prefs = context.getSharedPreferences(PREFS, MODE_PRIVATE);\n+        String countryCode = prefs.getString(PREF_KEY_COUNTRY_CODE, defaultCountry);\n+        return this.loadToplist(countryCode, 25);\n+    }\n+\n+    public Single<List<PodcastSearchResult>> loadToplist(String country, int limit) {\n         return Single.create((SingleOnSubscribe<List<PodcastSearchResult>>) emitter -> {\n-            String country = Locale.getDefault().getCountry();\n             OkHttpClient client = AntennapodHttpClient.getHttpClient();\n             String feedString;\n             try {\n                 feedString = getTopListFeed(client, country, limit);\n             } catch (IOException e) {\n-                feedString = getTopListFeed(client, \"us\", limit);\n+                feedString = getTopListFeed(client, \"US\", limit);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4f3339da89c3d8d02cfc37512e33bb5ccd6e36c3"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjg4Mjk2Mg==", "bodyText": "Hiding like this only works directly after changing the setting, right? What about moving the hiding code to loadToplist?", "url": "https://github.com/AntennaPod/AntennaPod/pull/4515#discussion_r502882962", "createdAt": "2020-10-11T08:18:29Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/fragment/DiscoveryFragment.java", "diffHunk": "@@ -97,12 +120,81 @@ public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container,\n             intent.putExtra(OnlineFeedViewActivity.ARG_FEEDURL, podcast.feedUrl);\n             startActivity(intent);\n         });\n+\n+        List<String> countryCodeArray = new ArrayList<String>(Arrays.asList(Locale.getISOCountries()));\n+        HashMap<String, String> countryCodeNames = new HashMap<String, String>();\n+        for (String code: countryCodeArray) {\n+            Locale locale = new Locale(\"\", code);\n+            String countryName = locale.getDisplayCountry();\n+            if (countryName != null) {\n+                countryCodeNames.put(code, countryName);\n+            }\n+        }\n+        //countryCodeArray.add(0, getResources().getString(R.string.discover_hide_fake_code));\n+        // countryCodeNames.put(getResources().getString(R.string.discover_hide_fake_code),\n+        //                 getResources().getString(R.string.discover_hide));\n+\n+        List<String> countryNamesSort = new ArrayList<String>(countryCodeNames.values());\n+        Collections.sort(countryNamesSort);\n+        countryNamesSort.add(0, getResources().getString(R.string.discover_hide));\n+\n+        Spinner countrySpinner = root.findViewById(R.id.spinner_country);\n+        ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this.getContext(), \n+                android.R.layout.simple_spinner_item, \n+                countryNamesSort);\n+        dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);\n+        countrySpinner.setAdapter(dataAdapter);\n+        int pos = countryNamesSort.indexOf(countryCodeNames.get(countryCode));\n+        countrySpinner.setSelection(pos);\n+\n+        countrySpinner.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {\n+            @Override\n+            public void onItemSelected(AdapterView<?> countrySpinner, View view, int position, long id) {\n+                String countryName = (String) countrySpinner.getItemAtPosition(position);\n+\n+                if (countryName.equals(getResources().getString(R.string.discover_hide))) {\n+                    countryCode = getResources().getString(R.string.discover_hide_fake_code);\n+                    gridView.setVisibility(View.GONE);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4f3339da89c3d8d02cfc37512e33bb5ccd6e36c3"}, "originalPosition": 110}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjg4MzAzMg==", "bodyText": "I don't think this line is needed. You already initialize it in onCreate", "url": "https://github.com/AntennaPod/AntennaPod/pull/4515#discussion_r502883032", "createdAt": "2020-10-11T08:19:21Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/fragment/DiscoveryFragment.java", "diffHunk": "@@ -97,12 +120,81 @@ public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container,\n             intent.putExtra(OnlineFeedViewActivity.ARG_FEEDURL, podcast.feedUrl);\n             startActivity(intent);\n         });\n+\n+        List<String> countryCodeArray = new ArrayList<String>(Arrays.asList(Locale.getISOCountries()));\n+        HashMap<String, String> countryCodeNames = new HashMap<String, String>();\n+        for (String code: countryCodeArray) {\n+            Locale locale = new Locale(\"\", code);\n+            String countryName = locale.getDisplayCountry();\n+            if (countryName != null) {\n+                countryCodeNames.put(code, countryName);\n+            }\n+        }\n+        //countryCodeArray.add(0, getResources().getString(R.string.discover_hide_fake_code));\n+        // countryCodeNames.put(getResources().getString(R.string.discover_hide_fake_code),\n+        //                 getResources().getString(R.string.discover_hide));\n+\n+        List<String> countryNamesSort = new ArrayList<String>(countryCodeNames.values());\n+        Collections.sort(countryNamesSort);\n+        countryNamesSort.add(0, getResources().getString(R.string.discover_hide));\n+\n+        Spinner countrySpinner = root.findViewById(R.id.spinner_country);\n+        ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this.getContext(), \n+                android.R.layout.simple_spinner_item, \n+                countryNamesSort);\n+        dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);\n+        countrySpinner.setAdapter(dataAdapter);\n+        int pos = countryNamesSort.indexOf(countryCodeNames.get(countryCode));\n+        countrySpinner.setSelection(pos);\n+\n+        countrySpinner.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {\n+            @Override\n+            public void onItemSelected(AdapterView<?> countrySpinner, View view, int position, long id) {\n+                String countryName = (String) countrySpinner.getItemAtPosition(position);\n+\n+                if (countryName.equals(getResources().getString(R.string.discover_hide))) {\n+                    countryCode = getResources().getString(R.string.discover_hide_fake_code);\n+                    gridView.setVisibility(View.GONE);\n+                    txtvError.setVisibility(View.VISIBLE);\n+                    txtvError.setText(String.format(getResources().getString(R.string.discover_will_be_hidden),\n+                            getResources().getString(R.string.discover_hide)));\n+                    butRetry.setVisibility(View.GONE);\n+                    txtvEmpty.setVisibility(View.GONE);\n+                    progressBar.setVisibility(View.GONE);\n+                } else {\n+                    for (Object o : countryCodeNames.keySet()) {\n+                        if (countryCodeNames.get(o).equals(countryName)) {\n+                            countryCode = o.toString();\n+                            break;\n+                        }\n+                    }\n+                }\n+\n+                prefs = getActivity().getSharedPreferences(ItunesTopListLoader.PREFS, MODE_PRIVATE);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4f3339da89c3d8d02cfc37512e33bb5ccd6e36c3"}, "originalPosition": 126}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjg4MzE1MA==", "bodyText": "I would make this a public static final String instead", "url": "https://github.com/AntennaPod/AntennaPod/pull/4515#discussion_r502883150", "createdAt": "2020-10-11T08:20:25Z", "author": {"login": "ByteHamster"}, "path": "core/src/main/res/values/strings.xml", "diffHunk": "@@ -724,6 +724,9 @@\n     <string name=\"add_podcast_by_url_hint\" translatable=\"false\">www.example.com/feed</string>\n     <string name=\"browse_gpoddernet_label\">Browse gpodder.net</string>\n     <string name=\"discover\">Discover</string>\n+    <string name=\"discover_hide\">Hide</string>\n+    <string name=\"discover_will_be_hidden\">You selected to hide podcasts using [%s].</string>\n+    <string name=\"discover_hide_fake_code\">00</string>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4f3339da89c3d8d02cfc37512e33bb5ccd6e36c3"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjg4MzE4NQ==", "bodyText": "Are those still needed?", "url": "https://github.com/AntennaPod/AntennaPod/pull/4515#discussion_r502883185", "createdAt": "2020-10-11T08:20:43Z", "author": {"login": "ByteHamster"}, "path": "core/src/main/res/values/arrays.xml", "diffHunk": "@@ -350,4 +350,12 @@\n         <item>EpisodesFragment</item>\n         <item>SubscriptionFragment</item>\n     </string-array>\n+\n+    <string-array name=\"country_name\">\n+        <item>United States</item>\n+    </string-array>\n+\n+    <string-array name=\"country_code\">\n+        <item>US</item>\n+    </string-array>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4f3339da89c3d8d02cfc37512e33bb5ccd6e36c3"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjg4MzI2OQ==", "bodyText": "Please remove the unrelated code change to keep the git history clean (and also reduce the probability of merge conflicts)", "url": "https://github.com/AntennaPod/AntennaPod/pull/4515#discussion_r502883269", "createdAt": "2020-10-11T08:21:36Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/fragment/SearchFragment.java", "diffHunk": "@@ -51,6 +51,7 @@\n  */\n public class SearchFragment extends Fragment {\n     private static final String TAG = \"SearchFragment\";\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4f3339da89c3d8d02cfc37512e33bb5ccd6e36c3"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "94a0ec57aabea2008817d1bcc34b63b41ead1024", "author": {"user": {"login": "tonytamsf", "name": "Tony Tam"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/94a0ec57aabea2008817d1bcc34b63b41ead1024", "committedDate": "2020-10-11T18:54:19Z", "message": "code review 1"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5f8684597fa925629f198c53eebd76d566420b6d", "author": {"user": {"login": "tonytamsf", "name": "Tony Tam"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/5f8684597fa925629f198c53eebd76d566420b6d", "committedDate": "2020-10-11T19:00:40Z", "message": "cleanup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e5032db7ec099f43bf8fdead4053166fcabec4b4", "author": {"user": {"login": "tonytamsf", "name": "Tony Tam"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/e5032db7ec099f43bf8fdead4053166fcabec4b4", "committedDate": "2020-10-11T19:07:43Z", "message": "cleanup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "27c36f4aa704199281991260c4aff97508c7773b", "author": {"user": {"login": "tonytamsf", "name": "Tony Tam"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/27c36f4aa704199281991260c4aff97508c7773b", "committedDate": "2020-10-11T19:16:08Z", "message": "clean"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA2MjExMTE2", "url": "https://github.com/AntennaPod/AntennaPod/pull/4515#pullrequestreview-506211116", "createdAt": "2020-10-11T19:51:50Z", "commit": {"oid": "27c36f4aa704199281991260c4aff97508c7773b"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMVQxOTo1MTo1MFrOHfqIww==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMVQxOTo1OToyM1rOHfqL4g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjk1ODI3NQ==", "bodyText": "Displaying the US as fallback makes it harder to see if a region supports localized suggestions. If I explicitly select a region, I would expect to either see suggestions from that region or an error message, not US suggestions. Contrarily, if I use the app without ever selecting a region, I would expect to get suggestions, even if they are not completely relevant.\nWhat about something like this?\nString countryCode = prefs.getString(PREF_KEY_COUNTRY_CODE, COUNTRY_CODE_UNSET);\nreturn this.loadToplist(countryCode, 25);\n\nString loadCountry = country;\nif (COUNTRY_CODE_UNSET.equals(country)) {\n    loadCountry = Locale.getDefault().getCountry();\n}\ntry {\n    feedString = getTopListFeed(client, country, limit);\n} catch (IOException e) {\n    if (COUNTRY_CODE_UNSET.equals(country)) {\n        feedString = getTopListFeed(client, \"US\", limit);\n    }\n}", "url": "https://github.com/AntennaPod/AntennaPod/pull/4515#discussion_r502958275", "createdAt": "2020-10-11T19:51:50Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/discovery/ItunesTopListLoader.java", "diffHunk": "@@ -23,23 +24,33 @@\n import java.util.Locale;\n import java.util.concurrent.TimeUnit;\n \n+import static android.content.Context.MODE_PRIVATE;\n+\n public class ItunesTopListLoader {\n     private static final String TAG = \"ITunesTopListLoader\";\n     private final Context context;\n+    public static final String PREF_KEY_COUNTRY_CODE = \"country_code\";\n+    public static final String PREFS = \"CountryRegionPrefs\";\n \n     public ItunesTopListLoader(Context context) {\n         this.context = context;\n     }\n \n-    public Single<List<PodcastSearchResult>> loadToplist(int limit) {\n+    public Single<List<PodcastSearchResult>> loadToplist() {\n+        String defaultCountry = Locale.getDefault().getCountry();\n+        SharedPreferences prefs = context.getSharedPreferences(PREFS, MODE_PRIVATE);\n+        String countryCode = prefs.getString(PREF_KEY_COUNTRY_CODE, defaultCountry);\n+        return this.loadToplist(countryCode, 25);\n+    }\n+\n+    public Single<List<PodcastSearchResult>> loadToplist(String country, int limit) {\n         return Single.create((SingleOnSubscribe<List<PodcastSearchResult>>) emitter -> {\n-            String country = Locale.getDefault().getCountry();\n             OkHttpClient client = AntennapodHttpClient.getHttpClient();\n             String feedString;\n             try {\n                 feedString = getTopListFeed(client, country, limit);\n             } catch (IOException e) {\n-                feedString = getTopListFeed(client, \"us\", limit);\n+                feedString = getTopListFeed(client, \"US\", limit);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjg4MjY1NA=="}, "originalCommit": {"oid": "4f3339da89c3d8d02cfc37512e33bb5ccd6e36c3"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjk1ODY1NQ==", "bodyText": "I would simply use You selected to hide suggestions.. Having the text there again looks pretty technical.\nInstead of discover_will_be_hidden I would use discover_is_hidden", "url": "https://github.com/AntennaPod/AntennaPod/pull/4515#discussion_r502958655", "createdAt": "2020-10-11T19:55:16Z", "author": {"login": "ByteHamster"}, "path": "core/src/main/res/values/strings.xml", "diffHunk": "@@ -724,6 +724,8 @@\n     <string name=\"add_podcast_by_url_hint\" translatable=\"false\">www.example.com/feed</string>\n     <string name=\"browse_gpoddernet_label\">Browse gpodder.net</string>\n     <string name=\"discover\">Discover</string>\n+    <string name=\"discover_hide\">Hide</string>\n+    <string name=\"discover_will_be_hidden\">You selected to hide podcasts using [%s].</string>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "27c36f4aa704199281991260c4aff97508c7773b"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjk1OTA3NA==", "bodyText": "Oh, nice :) I did not know that this is the way to make Checkstyle happy about multiple lambda functions. I always used different indention for success and error.", "url": "https://github.com/AntennaPod/AntennaPod/pull/4515#discussion_r502959074", "createdAt": "2020-10-11T19:59:23Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/fragment/DiscoveryFragment.java", "diffHunk": "@@ -116,28 +190,40 @@ public void onDestroy() {\n         adapter = null;\n     }\n \n-    private void loadToplist() {\n+    private void loadToplist(String country) {\n         if (disposable != null) {\n             disposable.dispose();\n         }\n+\n         gridView.setVisibility(View.GONE);\n         txtvError.setVisibility(View.GONE);\n         butRetry.setVisibility(View.GONE);\n         txtvEmpty.setVisibility(View.GONE);\n         progressBar.setVisibility(View.VISIBLE);\n \n-        ItunesTopListLoader loader = new ItunesTopListLoader(getContext());\n-        disposable = loader.loadToplist(25).subscribe(podcasts -> {\n+        if (country.equals(ItunesTopListLoader.DISCOVER_HIDE_FAKE_COUNTRY_CODE)) {\n+            gridView.setVisibility(View.GONE);\n+            txtvError.setVisibility(View.VISIBLE);\n+            txtvError.setText(String.format(getResources().getString(R.string.discover_will_be_hidden),\n+                    getResources().getString(R.string.discover_hide)));\n+            butRetry.setVisibility(View.GONE);\n+            txtvEmpty.setVisibility(View.GONE);\n             progressBar.setVisibility(View.GONE);\n-            topList = podcasts;\n-            updateData(topList);\n-        }, error -> {\n-                Log.e(TAG, Log.getStackTraceString(error));\n-                progressBar.setVisibility(View.GONE);\n-                txtvError.setText(error.toString());\n-                txtvError.setVisibility(View.VISIBLE);\n-                butRetry.setOnClickListener(v -> loadToplist());\n-                butRetry.setVisibility(View.VISIBLE);\n-            });\n+        } else {\n+            ItunesTopListLoader loader = new ItunesTopListLoader(getContext());\n+            disposable = loader.loadToplist(country, 25).subscribe(\n+                    podcasts -> {\n+                        progressBar.setVisibility(View.GONE);\n+                        topList = podcasts;\n+                        updateData(topList); },", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "27c36f4aa704199281991260c4aff97508c7773b"}, "originalPosition": 181}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "67267a8adaf90bd1964d9c6ad43e03eed7ba8fc1", "author": {"user": {"login": "tonytamsf", "name": "Tony Tam"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/67267a8adaf90bd1964d9c6ad43e03eed7ba8fc1", "committedDate": "2020-10-11T23:36:50Z", "message": "handle when a country data has problems, be explicit"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA3MjcxMDQw", "url": "https://github.com/AntennaPod/AntennaPod/pull/4515#pullrequestreview-507271040", "createdAt": "2020-10-13T10:01:56Z", "commit": {"oid": "67267a8adaf90bd1964d9c6ad43e03eed7ba8fc1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QxMDowMTo1NlrOHgfF0A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QxMDowMTo1NlrOHgfF0A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzgyNTg3Mg==", "bodyText": "I think there should be a return call. Otherwise, the program continues to parse the non-existing feed.", "url": "https://github.com/AntennaPod/AntennaPod/pull/4515#discussion_r503825872", "createdAt": "2020-10-13T10:01:56Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/discovery/ItunesTopListLoader.java", "diffHunk": "@@ -23,24 +24,45 @@\n import java.util.Locale;\n import java.util.concurrent.TimeUnit;\n \n+import static android.content.Context.MODE_PRIVATE;\n+\n public class ItunesTopListLoader {\n     private static final String TAG = \"ITunesTopListLoader\";\n     private final Context context;\n+    public static final String PREF_KEY_COUNTRY_CODE = \"country_code\";\n+    public static final String PREFS = \"CountryRegionPrefs\";\n+    public static final String DISCOVER_HIDE_FAKE_COUNTRY_CODE = \"00\";\n+    public static final String COUNTRY_CODE_UNSET = \"99\";\n \n     public ItunesTopListLoader(Context context) {\n         this.context = context;\n     }\n \n-    public Single<List<PodcastSearchResult>> loadToplist(int limit) {\n+    public Single<List<PodcastSearchResult>> loadToplist() {\n+        String defaultCountry = Locale.getDefault().getCountry();\n+        SharedPreferences prefs = context.getSharedPreferences(PREFS, MODE_PRIVATE);\n+        String countryCode = prefs.getString(PREF_KEY_COUNTRY_CODE, COUNTRY_CODE_UNSET);\n+        return this.loadToplist(countryCode, 25);\n+    }\n+\n+    public Single<List<PodcastSearchResult>> loadToplist(String country, int limit) {\n         return Single.create((SingleOnSubscribe<List<PodcastSearchResult>>) emitter -> {\n-            String country = Locale.getDefault().getCountry();\n             OkHttpClient client = AntennapodHttpClient.getHttpClient();\n-            String feedString;\n+            String feedString = \"{}\";\n+            String loadCountry = country;\n+            if (COUNTRY_CODE_UNSET.equals(country)) {\n+                loadCountry = Locale.getDefault().getCountry();\n+            }\n             try {\n-                feedString = getTopListFeed(client, country, limit);\n+                feedString = getTopListFeed(client, loadCountry, limit);\n             } catch (IOException e) {\n-                feedString = getTopListFeed(client, \"us\", limit);\n+                if (COUNTRY_CODE_UNSET.equals(country)) {\n+                    feedString = getTopListFeed(client, \"US\", limit);\n+                } else {\n+                    emitter.onError(e);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "67267a8adaf90bd1964d9c6ad43e03eed7ba8fc1"}, "originalPosition": 52}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dd401b3f4034cea323f61b9cda023e3498d02e16", "author": {"user": {"login": "tonytamsf", "name": "Tony Tam"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/dd401b3f4034cea323f61b9cda023e3498d02e16", "committedDate": "2020-10-14T18:08:31Z", "message": "handle zero results from a country"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "81a9ea145be0187c12bf75dc28bcb244c325a023", "author": {"user": {"login": "tonytamsf", "name": "Tony Tam"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/81a9ea145be0187c12bf75dc28bcb244c325a023", "committedDate": "2020-10-14T18:14:36Z", "message": "indent"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA4NzE3MDA2", "url": "https://github.com/AntennaPod/AntennaPod/pull/4515#pullrequestreview-508717006", "createdAt": "2020-10-14T20:49:07Z", "commit": {"oid": "81a9ea145be0187c12bf75dc28bcb244c325a023"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQyMDo0OTowOFrOHhkhRA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQyMDo0OTowOFrOHhkhRA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDk2MzM5Ng==", "bodyText": "Is this still needed? I think there is no code path where the parser could end up with an empty string. The method either returns or throws an exception. While it wouldn't affect the runtime behavior, I think the code would be easier to understand if this was just kept uninitialized.", "url": "https://github.com/AntennaPod/AntennaPod/pull/4515#discussion_r504963396", "createdAt": "2020-10-14T20:49:08Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/discovery/ItunesTopListLoader.java", "diffHunk": "@@ -23,24 +24,46 @@\n import java.util.Locale;\n import java.util.concurrent.TimeUnit;\n \n+import static android.content.Context.MODE_PRIVATE;\n+\n public class ItunesTopListLoader {\n     private static final String TAG = \"ITunesTopListLoader\";\n     private final Context context;\n+    public static final String PREF_KEY_COUNTRY_CODE = \"country_code\";\n+    public static final String PREFS = \"CountryRegionPrefs\";\n+    public static final String DISCOVER_HIDE_FAKE_COUNTRY_CODE = \"00\";\n+    public static final String COUNTRY_CODE_UNSET = \"99\";\n \n     public ItunesTopListLoader(Context context) {\n         this.context = context;\n     }\n \n-    public Single<List<PodcastSearchResult>> loadToplist(int limit) {\n+    public Single<List<PodcastSearchResult>> loadToplist() {\n+        String defaultCountry = Locale.getDefault().getCountry();\n+        SharedPreferences prefs = context.getSharedPreferences(PREFS, MODE_PRIVATE);\n+        String countryCode = prefs.getString(PREF_KEY_COUNTRY_CODE, COUNTRY_CODE_UNSET);\n+        return this.loadToplist(countryCode, 25);\n+    }\n+\n+    public Single<List<PodcastSearchResult>> loadToplist(String country, int limit) {\n         return Single.create((SingleOnSubscribe<List<PodcastSearchResult>>) emitter -> {\n-            String country = Locale.getDefault().getCountry();\n             OkHttpClient client = AntennapodHttpClient.getHttpClient();\n-            String feedString;\n+            String feedString = \"{}\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "81a9ea145be0187c12bf75dc28bcb244c325a023"}, "originalPosition": 39}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "edd6945eab74004384c70d6aa66bd7668b9bf98c", "author": {"user": {"login": "tonytamsf", "name": "Tony Tam"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/edd6945eab74004384c70d6aa66bd7668b9bf98c", "committedDate": "2020-10-14T21:19:43Z", "message": "handle 400 error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f6101bcb65a895a327ba7935a039f759ffdfbec2", "author": {"user": {"login": "tonytamsf", "name": "Tony Tam"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/f6101bcb65a895a327ba7935a039f759ffdfbec2", "committedDate": "2020-10-14T21:53:32Z", "message": "checkstyle"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA5NzgyMTU1", "url": "https://github.com/AntennaPod/AntennaPod/pull/4515#pullrequestreview-509782155", "createdAt": "2020-10-15T20:27:11Z", "commit": {"oid": "f6101bcb65a895a327ba7935a039f759ffdfbec2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQyMDoyNzoxMVrOHiYtXg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQyMDoyNzoxMVrOHiYtXg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTgxODQ2Mg==", "bodyText": "This looks like a lot of log spam. Is it still needed?", "url": "https://github.com/AntennaPod/AntennaPod/pull/4515#discussion_r505818462", "createdAt": "2020-10-15T20:27:11Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/fragment/DiscoveryFragment.java", "diffHunk": "@@ -97,13 +115,65 @@ public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container,\n             intent.putExtra(OnlineFeedViewActivity.ARG_FEEDURL, podcast.feedUrl);\n             startActivity(intent);\n         });\n+\n+        List<String> countryCodeArray = new ArrayList<String>(Arrays.asList(Locale.getISOCountries()));\n+        HashMap<String, String> countryCodeNames = new HashMap<String, String>();\n+        for (String code: countryCodeArray) {\n+            Log.d(\"Country=\", code);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f6101bcb65a895a327ba7935a039f759ffdfbec2"}, "originalPosition": 75}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA5Nzk0MDYx", "url": "https://github.com/AntennaPod/AntennaPod/pull/4515#pullrequestreview-509794061", "createdAt": "2020-10-15T20:44:17Z", "commit": {"oid": "f6101bcb65a895a327ba7935a039f759ffdfbec2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQyMDo0NDoxN1rOHiZi4g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQyMDo0NDoxN1rOHiZi4g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTgzMjE2Mg==", "bodyText": "Looks like the reason why this works for checkstyle is that you added a line break after .subscribe. I thought this was about moving the closing braces to the end of the line. Looks like it is not, so could you please move the closing braces to the next line?\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                    updateData(topList); },\n          \n          \n            \n                                error -> {\n          \n          \n            \n                                    updateData(topList);\n          \n          \n            \n                                }, error -> {", "url": "https://github.com/AntennaPod/AntennaPod/pull/4515#discussion_r505832162", "createdAt": "2020-10-15T20:44:17Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/fragment/DiscoveryFragment.java", "diffHunk": "@@ -116,28 +186,40 @@ public void onDestroy() {\n         adapter = null;\n     }\n \n-    private void loadToplist() {\n+    private void loadToplist(String country) {\n         if (disposable != null) {\n             disposable.dispose();\n         }\n+\n         gridView.setVisibility(View.GONE);\n         txtvError.setVisibility(View.GONE);\n         butRetry.setVisibility(View.GONE);\n         txtvEmpty.setVisibility(View.GONE);\n         progressBar.setVisibility(View.VISIBLE);\n \n-        ItunesTopListLoader loader = new ItunesTopListLoader(getContext());\n-        disposable = loader.loadToplist(25).subscribe(podcasts -> {\n+        if (country.equals(ItunesTopListLoader.DISCOVER_HIDE_FAKE_COUNTRY_CODE)) {\n+            gridView.setVisibility(View.GONE);\n+            txtvError.setVisibility(View.VISIBLE);\n+            txtvError.setText(String.format(getResources().getString(R.string.discover_is_hidden),\n+                    getResources().getString(R.string.discover_hide)));\n+            butRetry.setVisibility(View.GONE);\n+            txtvEmpty.setVisibility(View.GONE);\n             progressBar.setVisibility(View.GONE);\n-            topList = podcasts;\n-            updateData(topList);\n-        }, error -> {\n-                Log.e(TAG, Log.getStackTraceString(error));\n-                progressBar.setVisibility(View.GONE);\n-                txtvError.setText(error.toString());\n-                txtvError.setVisibility(View.VISIBLE);\n-                butRetry.setOnClickListener(v -> loadToplist());\n-                butRetry.setVisibility(View.VISIBLE);\n-            });\n+        } else {\n+            ItunesTopListLoader loader = new ItunesTopListLoader(getContext());\n+            disposable = loader.loadToplist(country, 25).subscribe(\n+                    podcasts -> {\n+                        progressBar.setVisibility(View.GONE);\n+                        topList = podcasts;\n+                        updateData(topList); },\n+                    error -> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f6101bcb65a895a327ba7935a039f759ffdfbec2"}, "originalPosition": 178}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "048db5b850f0b7e2b40703c060d0c77ec6fe5730", "author": {"user": {"login": "tonytamsf", "name": "Tony Tam"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/048db5b850f0b7e2b40703c060d0c77ec6fe5730", "committedDate": "2020-10-16T00:48:48Z", "message": "checkstyle and less logs"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEwMjE2NTI1", "url": "https://github.com/AntennaPod/AntennaPod/pull/4515#pullrequestreview-510216525", "createdAt": "2020-10-16T07:26:37Z", "commit": {"oid": "048db5b850f0b7e2b40703c060d0c77ec6fe5730"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQwNzoyNjozOFrOHirH4A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQwNzoyNjozOFrOHirH4A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjEyMDE2MA==", "bodyText": "Sorry, I noticed another thing. Here, String.format is no longer needed.", "url": "https://github.com/AntennaPod/AntennaPod/pull/4515#discussion_r506120160", "createdAt": "2020-10-16T07:26:38Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/fragment/DiscoveryFragment.java", "diffHunk": "@@ -116,28 +185,40 @@ public void onDestroy() {\n         adapter = null;\n     }\n \n-    private void loadToplist() {\n+    private void loadToplist(String country) {\n         if (disposable != null) {\n             disposable.dispose();\n         }\n+\n         gridView.setVisibility(View.GONE);\n         txtvError.setVisibility(View.GONE);\n         butRetry.setVisibility(View.GONE);\n         txtvEmpty.setVisibility(View.GONE);\n         progressBar.setVisibility(View.VISIBLE);\n \n-        ItunesTopListLoader loader = new ItunesTopListLoader(getContext());\n-        disposable = loader.loadToplist(25).subscribe(podcasts -> {\n+        if (country.equals(ItunesTopListLoader.DISCOVER_HIDE_FAKE_COUNTRY_CODE)) {\n+            gridView.setVisibility(View.GONE);\n+            txtvError.setVisibility(View.VISIBLE);\n+            txtvError.setText(String.format(getResources().getString(R.string.discover_is_hidden),\n+                    getResources().getString(R.string.discover_hide)));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "048db5b850f0b7e2b40703c060d0c77ec6fe5730"}, "originalPosition": 156}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c4c1aecf556c6733accd1a1db4c1f429fa418909", "author": {"user": {"login": "tonytamsf", "name": "Tony Tam"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/c4c1aecf556c6733accd1a1db4c1f429fa418909", "committedDate": "2020-10-16T17:19:24Z", "message": "no need for string.format()"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2724, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}