{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAxNjQwNDY2", "number": 4522, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QwODowMjozMFrOEs6i0Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QwODoxMTowN1rOEs6wPA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE1NTMxOTg1OnYy", "diffSide": "RIGHT", "path": "app/src/main/java/de/danoeh/antennapod/fragment/FeedItemlistFragment.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QwODowMjozMFrOHgaPFg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QwODowMjozMFrOHgaPFg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzc0NjMyNg==", "bodyText": "If the feed is null, the menu items should still be setup. Just the feed title can be left out. That prevents possible flickering when menu items are displayed/hidden for some feeds.", "url": "https://github.com/AntennaPod/AntennaPod/pull/4522#discussion_r503746326", "createdAt": "2020-10-13T08:02:30Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/fragment/FeedItemlistFragment.java", "diffHunk": "@@ -252,7 +252,9 @@ public void onCreateOptionsMenu(@NonNull Menu menu, @NonNull MenuInflater inflat\n         optionsMenu = menu;\n         FeedMenuHandler.onCreateOptionsMenu(inflater, menu);\n         iconTintManager.updateTint();\n-        MenuItemUtils.setupSearchItem(menu, (MainActivity) getActivity(), feedID);\n+        if (feed != null) {\n+            MenuItemUtils.setupSearchItem(menu, (MainActivity) getActivity(), feedID, feed.getTitle());\n+        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "919683a14942c205ea7a162bbf4e4ab17eb60e8f"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE1NTMyNDY1OnYy", "diffSide": "RIGHT", "path": "app/src/main/java/de/danoeh/antennapod/fragment/SearchFragment.java", "isResolved": false, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QwODowMzo1NFrOHgaSRg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QxODoxMzo1MlrOHgziNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzc0NzE0Mg==", "bodyText": "Please rename to private String feedTitle (and move a bit down). Static members that store actual data can cause issues when using the class multiple times.", "url": "https://github.com/AntennaPod/AntennaPod/pull/4522#discussion_r503747142", "createdAt": "2020-10-13T08:03:54Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/fragment/SearchFragment.java", "diffHunk": "@@ -53,6 +56,7 @@\n     private static final String TAG = \"SearchFragment\";\n     private static final String ARG_QUERY = \"query\";\n     private static final String ARG_FEED = \"feed\";\n+    private static String FEED_TITLE = \"\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "919683a14942c205ea7a162bbf4e4ab17eb60e8f"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDEyMDQ4Ng==", "bodyText": "Understood, the problem would be that I cant reference non static members from the newInstance static method, how should I proceed?", "url": "https://github.com/AntennaPod/AntennaPod/pull/4522#discussion_r504120486", "createdAt": "2020-10-13T17:07:08Z", "author": {"login": "Xeitor"}, "path": "app/src/main/java/de/danoeh/antennapod/fragment/SearchFragment.java", "diffHunk": "@@ -53,6 +56,7 @@\n     private static final String TAG = \"SearchFragment\";\n     private static final String ARG_QUERY = \"query\";\n     private static final String ARG_FEED = \"feed\";\n+    private static String FEED_TITLE = \"\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzc0NzE0Mg=="}, "originalCommit": {"oid": "919683a14942c205ea7a162bbf4e4ab17eb60e8f"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDEyNzAzMA==", "bodyText": "I was able to do It with this line:\nfragment.feedTitle = feedTitle;\nis this the correct approach?", "url": "https://github.com/AntennaPod/AntennaPod/pull/4522#discussion_r504127030", "createdAt": "2020-10-13T17:17:22Z", "author": {"login": "Xeitor"}, "path": "app/src/main/java/de/danoeh/antennapod/fragment/SearchFragment.java", "diffHunk": "@@ -53,6 +56,7 @@\n     private static final String TAG = \"SearchFragment\";\n     private static final String ARG_QUERY = \"query\";\n     private static final String ARG_FEED = \"feed\";\n+    private static String FEED_TITLE = \"\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzc0NzE0Mg=="}, "originalCommit": {"oid": "919683a14942c205ea7a162bbf4e4ab17eb60e8f"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDEzMzExOA==", "bodyText": "I was able to do It with this line: fragment.feedTitle = feedTitle;\n\nThis is a problem when the Android system recreates the fragment after the app was in background\nHave a look at the comment below. You can add it as an argument (fragment.getArguments().putString(ARG_FEED_NAME, name);).", "url": "https://github.com/AntennaPod/AntennaPod/pull/4522#discussion_r504133118", "createdAt": "2020-10-13T17:27:46Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/fragment/SearchFragment.java", "diffHunk": "@@ -53,6 +56,7 @@\n     private static final String TAG = \"SearchFragment\";\n     private static final String ARG_QUERY = \"query\";\n     private static final String ARG_FEED = \"feed\";\n+    private static String FEED_TITLE = \"\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzc0NzE0Mg=="}, "originalCommit": {"oid": "919683a14942c205ea7a162bbf4e4ab17eb60e8f"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDE2MDgyMA==", "bodyText": "Ohhhh, know I understand... I am about to push all the changes now :)", "url": "https://github.com/AntennaPod/AntennaPod/pull/4522#discussion_r504160820", "createdAt": "2020-10-13T18:13:52Z", "author": {"login": "Xeitor"}, "path": "app/src/main/java/de/danoeh/antennapod/fragment/SearchFragment.java", "diffHunk": "@@ -53,6 +56,7 @@\n     private static final String TAG = \"SearchFragment\";\n     private static final String ARG_QUERY = \"query\";\n     private static final String ARG_FEED = \"feed\";\n+    private static String FEED_TITLE = \"\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzc0NzE0Mg=="}, "originalCommit": {"oid": "919683a14942c205ea7a162bbf4e4ab17eb60e8f"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE1NTMzMDc4OnYy", "diffSide": "RIGHT", "path": "app/src/main/java/de/danoeh/antennapod/fragment/SearchFragment.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QwODowNToyNVrOHgaV9Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QwODowNToyNVrOHgaV9Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzc0ODA4NQ==", "bodyText": "Please add an argument instead of using a static variable. You can transfer the title just like the ID in the line above.", "url": "https://github.com/AntennaPod/AntennaPod/pull/4522#discussion_r503748085", "createdAt": "2020-10-13T08:05:25Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/fragment/SearchFragment.java", "diffHunk": "@@ -73,16 +78,18 @@ public static SearchFragment newInstance(String query) {\n         Bundle args = new Bundle();\n         args.putString(ARG_QUERY, query);\n         args.putLong(ARG_FEED, 0);\n+        args.putString(FEED_TITLE, \"\");\n         fragment.setArguments(args);\n         return fragment;\n     }\n \n     /**\n      * Create a new SearchFragment that searches one specific feed.\n      */\n-    public static SearchFragment newInstance(String query, long feed) {\n+    public static SearchFragment newInstance(String query, long feed, String feedTitle) {\n         SearchFragment fragment = newInstance(query);\n         fragment.getArguments().putLong(ARG_FEED, feed);\n+        FEED_TITLE = feedTitle;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "919683a14942c205ea7a162bbf4e4ab17eb60e8f"}, "originalPosition": 42}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE1NTMzMzQ3OnYy", "diffSide": "RIGHT", "path": "app/src/main/res/layout/search_fragment.xml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QwODowNjowNVrOHgaXsQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QwODowNjowNVrOHgaXsQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzc0ODUyOQ==", "bodyText": "Please use the same indention as the rest of the file (eg. make this 12 spaces instead of 8)", "url": "https://github.com/AntennaPod/AntennaPod/pull/4522#discussion_r503748529", "createdAt": "2020-10-13T08:06:05Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/res/layout/search_fragment.xml", "diffHunk": "@@ -14,6 +14,14 @@\n             app:title=\"@string/search_label\"\n             android:id=\"@+id/toolbar\"/>\n \n+    <com.google.android.material.chip.Chip\n+        android:layout_width=\"wrap_content\"\n+        android:layout_height=\"wrap_content\"\n+        android:layout_below=\"@id/toolbar\"\n+        android:id=\"@+id/feed_title_chip\"\n+        android:layout_marginLeft=\"10dp\"\n+        android:layout_marginRight=\"0dp\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "919683a14942c205ea7a162bbf4e4ab17eb60e8f"}, "originalPosition": 10}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE1NTM1NDIwOnYy", "diffSide": "RIGHT", "path": "app/src/main/java/de/danoeh/antennapod/fragment/SearchFragment.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QwODoxMTowN1rOHgakFw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QxNzoyNzo1MFrOHgx2Iw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzc1MTcwMw==", "bodyText": "Please move this to the results section of the search method. This makes it possible to add a close button to the chip (which would greatly improve the user experience) with something like:\n        app:closeIconVisible=\"true\"\n\n        chip.setOnCloseIconClickListener(v -> {\n            getArguments().putLong(ARG_FEED, 0);\n            search();\n        });", "url": "https://github.com/AntennaPod/AntennaPod/pull/4522#discussion_r503751703", "createdAt": "2020-10-13T08:11:07Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/fragment/SearchFragment.java", "diffHunk": "@@ -133,6 +140,13 @@ public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup c\n         emptyViewHandler.setIcon(R.attr.action_search);\n         emptyViewHandler.setTitle(R.string.search_status_no_results);\n         EventBus.getDefault().register(this);\n+\n+        chip = layout.findViewById(R.id.feed_title_chip);\n+        if ((getArguments().getLong(ARG_FEED) != 0) && !FEED_TITLE.isEmpty()) {\n+            chip.setText(FEED_TITLE);\n+        } else {\n+            chip.setVisibility(View.GONE);\n+        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "919683a14942c205ea7a162bbf4e4ab17eb60e8f"}, "originalPosition": 56}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDEzMzE1NQ==", "bodyText": "Wow, really liked the feature. Wouldn't have thought about it\nAdding  it too.", "url": "https://github.com/AntennaPod/AntennaPod/pull/4522#discussion_r504133155", "createdAt": "2020-10-13T17:27:50Z", "author": {"login": "Xeitor"}, "path": "app/src/main/java/de/danoeh/antennapod/fragment/SearchFragment.java", "diffHunk": "@@ -133,6 +140,13 @@ public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup c\n         emptyViewHandler.setIcon(R.attr.action_search);\n         emptyViewHandler.setTitle(R.string.search_status_no_results);\n         EventBus.getDefault().register(this);\n+\n+        chip = layout.findViewById(R.id.feed_title_chip);\n+        if ((getArguments().getLong(ARG_FEED) != 0) && !FEED_TITLE.isEmpty()) {\n+            chip.setText(FEED_TITLE);\n+        } else {\n+            chip.setVisibility(View.GONE);\n+        }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzc1MTcwMw=="}, "originalCommit": {"oid": "919683a14942c205ea7a162bbf4e4ab17eb60e8f"}, "originalPosition": 56}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4689, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}