{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAzMzMwMzM4", "number": 4058, "title": "added media to queue when playing", "bodyText": "Closes #4026\nCloses #3277", "createdAt": "2020-04-14T17:55:38Z", "url": "https://github.com/AntennaPod/AntennaPod/pull/4058", "merged": true, "mergeCommit": {"oid": "3a86745e8144baa6d0a2cdc88aa0e29d1fd6e66c"}, "closed": true, "closedAt": "2020-04-21T14:04:04Z", "author": {"login": "michaelmwhite"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcXnXPCgFqTM5MzE2NjAxOQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcZzp24AH2gAyNDAzMzMwMzM4OjQ3MTI3OTk0YjQwZmEzYjI1NTQ0ZTBjMTNjNDE2ODRhNmJmZjRkZWE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkzMTY2MDE5", "url": "https://github.com/AntennaPod/AntennaPod/pull/4058#pullrequestreview-393166019", "createdAt": "2020-04-14T17:58:00Z", "commit": {"oid": "849756933bd0d2bd8a5f6ea6409c8a200e1de4fa"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxNzo1ODowMVrOGFacdg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxNzo1ODowMVrOGFacdg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODMyOTMzNA==", "bodyText": "Of the 4 cases where playMediaObject() is called, this was the only case I was able to trigger when testing - how do I call OnPlayFromSearch(), OnPlayFromMediaId(), and StartPlayingFromPreferences()?", "url": "https://github.com/AntennaPod/AntennaPod/pull/4058#discussion_r408329334", "createdAt": "2020-04-14T17:58:01Z", "author": {"login": "michaelmwhite"}, "path": "core/src/main/java/de/danoeh/antennapod/core/service/playback/PlaybackService.java", "diffHunk": "@@ -497,6 +497,7 @@ public int onStartCommand(Intent intent, int flags, int startId) {\n                     return Service.START_NOT_STICKY;\n                 }\n                 mediaPlayer.playMediaObject(playable, stream, startWhenPrepared, prepareImmediately);\n+                AddPlayableToQueue(playable);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "849756933bd0d2bd8a5f6ea6409c8a200e1de4fa"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "12a8f05905d0c40e56008cfb6960ba3b2223d14a", "author": {"user": {"login": "michaelmwhite", "name": "Michael White"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/12a8f05905d0c40e56008cfb6960ba3b2223d14a", "committedDate": "2020-04-14T18:01:40Z", "message": "added media to queue when playing"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "849756933bd0d2bd8a5f6ea6409c8a200e1de4fa", "author": {"user": {"login": "michaelmwhite", "name": "Michael White"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/849756933bd0d2bd8a5f6ea6409c8a200e1de4fa", "committedDate": "2020-04-14T17:48:52Z", "message": "added media to queue when playing"}, "afterCommit": {"oid": "12a8f05905d0c40e56008cfb6960ba3b2223d14a", "author": {"user": {"login": "michaelmwhite", "name": "Michael White"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/12a8f05905d0c40e56008cfb6960ba3b2223d14a", "committedDate": "2020-04-14T18:01:40Z", "message": "added media to queue when playing"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ed0402d53ff023f7ac95711a25a81252f742b366", "author": {"user": {"login": "michaelmwhite", "name": "Michael White"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/ed0402d53ff023f7ac95711a25a81252f742b366", "committedDate": "2020-04-14T18:20:17Z", "message": "cleaned up imports"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5a23f554371f7cc401f3b597428711fe55667762", "author": {"user": {"login": "michaelmwhite", "name": "Michael White"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/5a23f554371f7cc401f3b597428711fe55667762", "committedDate": "2020-04-14T18:07:25Z", "message": "cleaned up imports"}, "afterCommit": {"oid": "ed0402d53ff023f7ac95711a25a81252f742b366", "author": {"user": {"login": "michaelmwhite", "name": "Michael White"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/ed0402d53ff023f7ac95711a25a81252f742b366", "committedDate": "2020-04-14T18:20:17Z", "message": "cleaned up imports"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2ODQwOTk5", "url": "https://github.com/AntennaPod/AntennaPod/pull/4058#pullrequestreview-396840999", "createdAt": "2020-04-20T21:55:02Z", "commit": {"oid": "ed0402d53ff023f7ac95711a25a81252f742b366"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQyMTo1NTowMlrOGIpTlA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQyMTo1NTowMlrOGIpTlA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTcxODU0OA==", "bodyText": "Sorry for taking so long to respond.\nIf you use addQueueItem(this, false, false, ((FeedMedia) playable).getId()) instead, it does not need to do the database query that retrieves the item.\nBy the way, this also fixes #3277 :) \ud83d\udc4d", "url": "https://github.com/AntennaPod/AntennaPod/pull/4058#discussion_r411718548", "createdAt": "2020-04-20T21:55:02Z", "author": {"login": "ByteHamster"}, "path": "core/src/main/java/de/danoeh/antennapod/core/service/playback/PlaybackService.java", "diffHunk": "@@ -1636,6 +1638,13 @@ private void cancelPositionObserver() {\n         }\n     }\n \n+    private void addPlayableToQueue(Playable playable) {\n+        if (playable instanceof FeedMedia) {\n+            FeedItem feedItem = DBReader.getFeedItem(((FeedMedia) playable).getId());\n+            DBWriter.addQueueItem(this, feedItem);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ed0402d53ff023f7ac95711a25a81252f742b366"}, "originalPosition": 23}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "47127994b40fa3b25544e0c13c41684a6bff4dea", "author": {"user": {"login": "michaelmwhite", "name": "Michael White"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/47127994b40fa3b25544e0c13c41684a6bff4dea", "committedDate": "2020-04-21T13:25:04Z", "message": "used id to add item to queue"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2843, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}