{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAxNjQwNDY2", "number": 4522, "title": "Add chip when searching for specific feed", "bodyText": "Closes #4475", "createdAt": "2020-10-12T15:10:28Z", "url": "https://github.com/AntennaPod/AntennaPod/pull/4522", "merged": true, "mergeCommit": {"oid": "cb1af5dbacc3ae1fd5ca55d2e2ff4a4af0b29539"}, "closed": true, "closedAt": "2020-10-13T20:05:27Z", "author": {"login": "Xeitor"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdR1YM2gH2gAyNTAxNjQwNDY2OmI1ZjU4ZTM2OTZkYmI1MmMxYzhmYmI1NzE2ZGM5NDc4MThlOTgzMGM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdSMt3lAH2gAyNTAxNjQwNDY2Ojc0OTUyNGQ5OTA1ZmQ1MjY3MWU4YWJiZmJmZjYwNmQ1ZWE1MmM4NTU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b5f58e3696dbb52c1c8fbb5716dc947818e9830c", "author": {"user": {"login": "Xeitor", "name": "Ezequiel"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/b5f58e3696dbb52c1c8fbb5716dc947818e9830c", "committedDate": "2020-10-12T15:05:21Z", "message": "add chip when searching for specific feed"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "919683a14942c205ea7a162bbf4e4ab17eb60e8f", "author": {"user": {"login": "Xeitor", "name": "Ezequiel"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/919683a14942c205ea7a162bbf4e4ab17eb60e8f", "committedDate": "2020-10-12T15:07:35Z", "message": "fix search_fragment view to adjust for chip"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA3MTY4MDU4", "url": "https://github.com/AntennaPod/AntennaPod/pull/4522#pullrequestreview-507168058", "createdAt": "2020-10-13T08:02:29Z", "commit": {"oid": "919683a14942c205ea7a162bbf4e4ab17eb60e8f"}, "state": "COMMENTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QwODowMjozMFrOHgaPFg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QwODoxMTowN1rOHgakFw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzc0NjMyNg==", "bodyText": "If the feed is null, the menu items should still be setup. Just the feed title can be left out. That prevents possible flickering when menu items are displayed/hidden for some feeds.", "url": "https://github.com/AntennaPod/AntennaPod/pull/4522#discussion_r503746326", "createdAt": "2020-10-13T08:02:30Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/fragment/FeedItemlistFragment.java", "diffHunk": "@@ -252,7 +252,9 @@ public void onCreateOptionsMenu(@NonNull Menu menu, @NonNull MenuInflater inflat\n         optionsMenu = menu;\n         FeedMenuHandler.onCreateOptionsMenu(inflater, menu);\n         iconTintManager.updateTint();\n-        MenuItemUtils.setupSearchItem(menu, (MainActivity) getActivity(), feedID);\n+        if (feed != null) {\n+            MenuItemUtils.setupSearchItem(menu, (MainActivity) getActivity(), feedID, feed.getTitle());\n+        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "919683a14942c205ea7a162bbf4e4ab17eb60e8f"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzc0NzE0Mg==", "bodyText": "Please rename to private String feedTitle (and move a bit down). Static members that store actual data can cause issues when using the class multiple times.", "url": "https://github.com/AntennaPod/AntennaPod/pull/4522#discussion_r503747142", "createdAt": "2020-10-13T08:03:54Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/fragment/SearchFragment.java", "diffHunk": "@@ -53,6 +56,7 @@\n     private static final String TAG = \"SearchFragment\";\n     private static final String ARG_QUERY = \"query\";\n     private static final String ARG_FEED = \"feed\";\n+    private static String FEED_TITLE = \"\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "919683a14942c205ea7a162bbf4e4ab17eb60e8f"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzc0ODA4NQ==", "bodyText": "Please add an argument instead of using a static variable. You can transfer the title just like the ID in the line above.", "url": "https://github.com/AntennaPod/AntennaPod/pull/4522#discussion_r503748085", "createdAt": "2020-10-13T08:05:25Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/fragment/SearchFragment.java", "diffHunk": "@@ -73,16 +78,18 @@ public static SearchFragment newInstance(String query) {\n         Bundle args = new Bundle();\n         args.putString(ARG_QUERY, query);\n         args.putLong(ARG_FEED, 0);\n+        args.putString(FEED_TITLE, \"\");\n         fragment.setArguments(args);\n         return fragment;\n     }\n \n     /**\n      * Create a new SearchFragment that searches one specific feed.\n      */\n-    public static SearchFragment newInstance(String query, long feed) {\n+    public static SearchFragment newInstance(String query, long feed, String feedTitle) {\n         SearchFragment fragment = newInstance(query);\n         fragment.getArguments().putLong(ARG_FEED, feed);\n+        FEED_TITLE = feedTitle;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "919683a14942c205ea7a162bbf4e4ab17eb60e8f"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzc0ODUyOQ==", "bodyText": "Please use the same indention as the rest of the file (eg. make this 12 spaces instead of 8)", "url": "https://github.com/AntennaPod/AntennaPod/pull/4522#discussion_r503748529", "createdAt": "2020-10-13T08:06:05Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/res/layout/search_fragment.xml", "diffHunk": "@@ -14,6 +14,14 @@\n             app:title=\"@string/search_label\"\n             android:id=\"@+id/toolbar\"/>\n \n+    <com.google.android.material.chip.Chip\n+        android:layout_width=\"wrap_content\"\n+        android:layout_height=\"wrap_content\"\n+        android:layout_below=\"@id/toolbar\"\n+        android:id=\"@+id/feed_title_chip\"\n+        android:layout_marginLeft=\"10dp\"\n+        android:layout_marginRight=\"0dp\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "919683a14942c205ea7a162bbf4e4ab17eb60e8f"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzc1MTcwMw==", "bodyText": "Please move this to the results section of the search method. This makes it possible to add a close button to the chip (which would greatly improve the user experience) with something like:\n        app:closeIconVisible=\"true\"\n\n        chip.setOnCloseIconClickListener(v -> {\n            getArguments().putLong(ARG_FEED, 0);\n            search();\n        });", "url": "https://github.com/AntennaPod/AntennaPod/pull/4522#discussion_r503751703", "createdAt": "2020-10-13T08:11:07Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/fragment/SearchFragment.java", "diffHunk": "@@ -133,6 +140,13 @@ public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup c\n         emptyViewHandler.setIcon(R.attr.action_search);\n         emptyViewHandler.setTitle(R.string.search_status_no_results);\n         EventBus.getDefault().register(this);\n+\n+        chip = layout.findViewById(R.id.feed_title_chip);\n+        if ((getArguments().getLong(ARG_FEED) != 0) && !FEED_TITLE.isEmpty()) {\n+            chip.setText(FEED_TITLE);\n+        } else {\n+            chip.setVisibility(View.GONE);\n+        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "919683a14942c205ea7a162bbf4e4ab17eb60e8f"}, "originalPosition": 56}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "749524d9905fd52671e8abbfbff606d5ea52c855", "author": {"user": {"login": "Xeitor", "name": "Ezequiel"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/749524d9905fd52671e8abbfbff606d5ea52c855", "committedDate": "2020-10-13T18:16:50Z", "message": "fix some code styles and add close chip feature"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2730, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}