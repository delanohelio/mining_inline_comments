{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc4NTU2Mzg5", "number": 4400, "reviewThreads": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QxMToyNDo1N1rOEf8jIg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QyMDowNjoxNFrOEhBH8A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAxOTMzMzQ2OnYy", "diffSide": "RIGHT", "path": "app/src/main/java/de/danoeh/antennapod/dialog/FeedSortDialog.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QxMToyNDo1N1rOHMiK7Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QxMToyNDo1N1rOHMiK7Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjkwNDgxMw==", "bodyText": "Can this loop be simplified with something like ArrayList.indexOf?", "url": "https://github.com/AntennaPod/AntennaPod/pull/4400#discussion_r482904813", "createdAt": "2020-09-03T11:24:57Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/dialog/FeedSortDialog.java", "diffHunk": "@@ -0,0 +1,40 @@\n+package de.danoeh.antennapod.dialog;\n+\n+import android.content.Context;\n+\n+import androidx.appcompat.app.AlertDialog;\n+\n+import org.greenrobot.eventbus.EventBus;\n+\n+import de.danoeh.antennapod.R;\n+import de.danoeh.antennapod.core.event.UnreadItemsUpdateEvent;\n+import de.danoeh.antennapod.core.preferences.UserPreferences;\n+\n+public class FeedSortDialog {\n+    public static void showDialog(Context context) {\n+        AlertDialog.Builder dialog = new AlertDialog.Builder(context);\n+        dialog.setTitle(context.getString(R.string.pref_nav_drawer_feed_order_title));\n+        dialog.setNegativeButton(android.R.string.cancel, (d, listener) -> d.dismiss());\n+\n+        int selectedIndexTemp = 0;\n+        int selected = UserPreferences.getFeedOrder();\n+        String[] entryValues = context.getResources().getStringArray(R.array.nav_drawer_feed_order_values);\n+        for (int i = 0; i < entryValues.length; i++) {\n+            if (Integer.parseInt(entryValues[i]) == selected) {\n+                selectedIndexTemp = i;\n+            }\n+        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bd0d0b5008fe2735b335df03ffe16bdae73785d0"}, "originalPosition": 26}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAxOTMzNjMzOnYy", "diffSide": "RIGHT", "path": "app/src/main/java/de/danoeh/antennapod/dialog/FeedSortDialog.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QxMToyNTo1NVrOHMiMqg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QyMDowODo0OVrOHOHEcA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjkwNTI1OA==", "bodyText": "Not sure if this is the most fitting event. Feed list update might be better than unread items update.", "url": "https://github.com/AntennaPod/AntennaPod/pull/4400#discussion_r482905258", "createdAt": "2020-09-03T11:25:55Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/dialog/FeedSortDialog.java", "diffHunk": "@@ -0,0 +1,40 @@\n+package de.danoeh.antennapod.dialog;\n+\n+import android.content.Context;\n+\n+import androidx.appcompat.app.AlertDialog;\n+\n+import org.greenrobot.eventbus.EventBus;\n+\n+import de.danoeh.antennapod.R;\n+import de.danoeh.antennapod.core.event.UnreadItemsUpdateEvent;\n+import de.danoeh.antennapod.core.preferences.UserPreferences;\n+\n+public class FeedSortDialog {\n+    public static void showDialog(Context context) {\n+        AlertDialog.Builder dialog = new AlertDialog.Builder(context);\n+        dialog.setTitle(context.getString(R.string.pref_nav_drawer_feed_order_title));\n+        dialog.setNegativeButton(android.R.string.cancel, (d, listener) -> d.dismiss());\n+\n+        int selectedIndexTemp = 0;\n+        int selected = UserPreferences.getFeedOrder();\n+        String[] entryValues = context.getResources().getStringArray(R.array.nav_drawer_feed_order_values);\n+        for (int i = 0; i < entryValues.length; i++) {\n+            if (Integer.parseInt(entryValues[i]) == selected) {\n+                selectedIndexTemp = i;\n+            }\n+        }\n+\n+        final int selectedIndex = selectedIndexTemp;\n+        String[] items = context.getResources().getStringArray(R.array.nav_drawer_feed_order_options);\n+        dialog.setSingleChoiceItems(items, selectedIndex, (d, which) -> {\n+            if (selectedIndex != which) {\n+                UserPreferences.setFeedOrder(entryValues[which]);\n+                //Update subscriptions\n+                EventBus.getDefault().post(new UnreadItemsUpdateEvent());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bd0d0b5008fe2735b335df03ffe16bdae73785d0"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjkzMDcyNA==", "bodyText": "The FeedListUpdateEvent needs a List<Feed> where should I get this from", "url": "https://github.com/AntennaPod/AntennaPod/pull/4400#discussion_r482930724", "createdAt": "2020-09-03T12:13:12Z", "author": {"login": "asdoi"}, "path": "app/src/main/java/de/danoeh/antennapod/dialog/FeedSortDialog.java", "diffHunk": "@@ -0,0 +1,40 @@\n+package de.danoeh.antennapod.dialog;\n+\n+import android.content.Context;\n+\n+import androidx.appcompat.app.AlertDialog;\n+\n+import org.greenrobot.eventbus.EventBus;\n+\n+import de.danoeh.antennapod.R;\n+import de.danoeh.antennapod.core.event.UnreadItemsUpdateEvent;\n+import de.danoeh.antennapod.core.preferences.UserPreferences;\n+\n+public class FeedSortDialog {\n+    public static void showDialog(Context context) {\n+        AlertDialog.Builder dialog = new AlertDialog.Builder(context);\n+        dialog.setTitle(context.getString(R.string.pref_nav_drawer_feed_order_title));\n+        dialog.setNegativeButton(android.R.string.cancel, (d, listener) -> d.dismiss());\n+\n+        int selectedIndexTemp = 0;\n+        int selected = UserPreferences.getFeedOrder();\n+        String[] entryValues = context.getResources().getStringArray(R.array.nav_drawer_feed_order_values);\n+        for (int i = 0; i < entryValues.length; i++) {\n+            if (Integer.parseInt(entryValues[i]) == selected) {\n+                selectedIndexTemp = i;\n+            }\n+        }\n+\n+        final int selectedIndex = selectedIndexTemp;\n+        String[] items = context.getResources().getStringArray(R.array.nav_drawer_feed_order_options);\n+        dialog.setSingleChoiceItems(items, selectedIndex, (d, which) -> {\n+            if (selectedIndex != which) {\n+                UserPreferences.setFeedOrder(entryValues[which]);\n+                //Update subscriptions\n+                EventBus.getDefault().post(new UnreadItemsUpdateEvent());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjkwNTI1OA=="}, "originalCommit": {"oid": "bd0d0b5008fe2735b335df03ffe16bdae73785d0"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDU1NzkzNg==", "bodyText": "Okay, let's keep it like this for now. I think the events need some rework in the future anyway. In every Fragment, there are quite a few duplicate methods that react to the events.", "url": "https://github.com/AntennaPod/AntennaPod/pull/4400#discussion_r484557936", "createdAt": "2020-09-07T20:08:49Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/dialog/FeedSortDialog.java", "diffHunk": "@@ -0,0 +1,40 @@\n+package de.danoeh.antennapod.dialog;\n+\n+import android.content.Context;\n+\n+import androidx.appcompat.app.AlertDialog;\n+\n+import org.greenrobot.eventbus.EventBus;\n+\n+import de.danoeh.antennapod.R;\n+import de.danoeh.antennapod.core.event.UnreadItemsUpdateEvent;\n+import de.danoeh.antennapod.core.preferences.UserPreferences;\n+\n+public class FeedSortDialog {\n+    public static void showDialog(Context context) {\n+        AlertDialog.Builder dialog = new AlertDialog.Builder(context);\n+        dialog.setTitle(context.getString(R.string.pref_nav_drawer_feed_order_title));\n+        dialog.setNegativeButton(android.R.string.cancel, (d, listener) -> d.dismiss());\n+\n+        int selectedIndexTemp = 0;\n+        int selected = UserPreferences.getFeedOrder();\n+        String[] entryValues = context.getResources().getStringArray(R.array.nav_drawer_feed_order_values);\n+        for (int i = 0; i < entryValues.length; i++) {\n+            if (Integer.parseInt(entryValues[i]) == selected) {\n+                selectedIndexTemp = i;\n+            }\n+        }\n+\n+        final int selectedIndex = selectedIndexTemp;\n+        String[] items = context.getResources().getStringArray(R.array.nav_drawer_feed_order_options);\n+        dialog.setSingleChoiceItems(items, selectedIndex, (d, which) -> {\n+            if (selectedIndex != which) {\n+                UserPreferences.setFeedOrder(entryValues[which]);\n+                //Update subscriptions\n+                EventBus.getDefault().post(new UnreadItemsUpdateEvent());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjkwNTI1OA=="}, "originalCommit": {"oid": "bd0d0b5008fe2735b335df03ffe16bdae73785d0"}, "originalPosition": 34}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAxOTM0MDQwOnYy", "diffSide": "RIGHT", "path": "app/src/main/java/de/danoeh/antennapod/dialog/FeedSortDialog.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QxMToyNzowNVrOHMiPAQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QxMjowODo1MVrOHMjlvg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjkwNTg1Nw==", "bodyText": "This is not needed. AlertDialog does it automatically.", "url": "https://github.com/AntennaPod/AntennaPod/pull/4400#discussion_r482905857", "createdAt": "2020-09-03T11:27:05Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/dialog/FeedSortDialog.java", "diffHunk": "@@ -0,0 +1,40 @@\n+package de.danoeh.antennapod.dialog;\n+\n+import android.content.Context;\n+\n+import androidx.appcompat.app.AlertDialog;\n+\n+import org.greenrobot.eventbus.EventBus;\n+\n+import de.danoeh.antennapod.R;\n+import de.danoeh.antennapod.core.event.UnreadItemsUpdateEvent;\n+import de.danoeh.antennapod.core.preferences.UserPreferences;\n+\n+public class FeedSortDialog {\n+    public static void showDialog(Context context) {\n+        AlertDialog.Builder dialog = new AlertDialog.Builder(context);\n+        dialog.setTitle(context.getString(R.string.pref_nav_drawer_feed_order_title));\n+        dialog.setNegativeButton(android.R.string.cancel, (d, listener) -> d.dismiss());\n+\n+        int selectedIndexTemp = 0;\n+        int selected = UserPreferences.getFeedOrder();\n+        String[] entryValues = context.getResources().getStringArray(R.array.nav_drawer_feed_order_values);\n+        for (int i = 0; i < entryValues.length; i++) {\n+            if (Integer.parseInt(entryValues[i]) == selected) {\n+                selectedIndexTemp = i;\n+            }\n+        }\n+\n+        final int selectedIndex = selectedIndexTemp;\n+        String[] items = context.getResources().getStringArray(R.array.nav_drawer_feed_order_options);\n+        dialog.setSingleChoiceItems(items, selectedIndex, (d, which) -> {\n+            if (selectedIndex != which) {\n+                UserPreferences.setFeedOrder(entryValues[which]);\n+                //Update subscriptions\n+                EventBus.getDefault().post(new UnreadItemsUpdateEvent());\n+            }\n+            d.dismiss();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bd0d0b5008fe2735b335df03ffe16bdae73785d0"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjkyODA2Mg==", "bodyText": "No, if I remove that line the dialog does not close after selecting an item", "url": "https://github.com/AntennaPod/AntennaPod/pull/4400#discussion_r482928062", "createdAt": "2020-09-03T12:08:51Z", "author": {"login": "asdoi"}, "path": "app/src/main/java/de/danoeh/antennapod/dialog/FeedSortDialog.java", "diffHunk": "@@ -0,0 +1,40 @@\n+package de.danoeh.antennapod.dialog;\n+\n+import android.content.Context;\n+\n+import androidx.appcompat.app.AlertDialog;\n+\n+import org.greenrobot.eventbus.EventBus;\n+\n+import de.danoeh.antennapod.R;\n+import de.danoeh.antennapod.core.event.UnreadItemsUpdateEvent;\n+import de.danoeh.antennapod.core.preferences.UserPreferences;\n+\n+public class FeedSortDialog {\n+    public static void showDialog(Context context) {\n+        AlertDialog.Builder dialog = new AlertDialog.Builder(context);\n+        dialog.setTitle(context.getString(R.string.pref_nav_drawer_feed_order_title));\n+        dialog.setNegativeButton(android.R.string.cancel, (d, listener) -> d.dismiss());\n+\n+        int selectedIndexTemp = 0;\n+        int selected = UserPreferences.getFeedOrder();\n+        String[] entryValues = context.getResources().getStringArray(R.array.nav_drawer_feed_order_values);\n+        for (int i = 0; i < entryValues.length; i++) {\n+            if (Integer.parseInt(entryValues[i]) == selected) {\n+                selectedIndexTemp = i;\n+            }\n+        }\n+\n+        final int selectedIndex = selectedIndexTemp;\n+        String[] items = context.getResources().getStringArray(R.array.nav_drawer_feed_order_options);\n+        dialog.setSingleChoiceItems(items, selectedIndex, (d, which) -> {\n+            if (selectedIndex != which) {\n+                UserPreferences.setFeedOrder(entryValues[which]);\n+                //Update subscriptions\n+                EventBus.getDefault().post(new UnreadItemsUpdateEvent());\n+            }\n+            d.dismiss();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjkwNTg1Nw=="}, "originalCommit": {"oid": "bd0d0b5008fe2735b335df03ffe16bdae73785d0"}, "originalPosition": 36}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAxOTM0ODAyOnYy", "diffSide": "RIGHT", "path": "app/src/main/java/de/danoeh/antennapod/dialog/FeedSortDialog.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QxMToyOToyN1rOHMiTqg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QxMToyOToyN1rOHMiTqg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjkwNzA1MA==", "bodyText": "Please open the same dialog when clicking the settings item. This ensures that the UI is consistent.", "url": "https://github.com/AntennaPod/AntennaPod/pull/4400#discussion_r482907050", "createdAt": "2020-09-03T11:29:27Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/dialog/FeedSortDialog.java", "diffHunk": "@@ -0,0 +1,40 @@\n+package de.danoeh.antennapod.dialog;\n+\n+import android.content.Context;\n+\n+import androidx.appcompat.app.AlertDialog;\n+\n+import org.greenrobot.eventbus.EventBus;\n+\n+import de.danoeh.antennapod.R;\n+import de.danoeh.antennapod.core.event.UnreadItemsUpdateEvent;\n+import de.danoeh.antennapod.core.preferences.UserPreferences;\n+\n+public class FeedSortDialog {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bd0d0b5008fe2735b335df03ffe16bdae73785d0"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAxOTM1NDA4OnYy", "diffSide": "RIGHT", "path": "core/src/main/res/values/strings.xml", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QxMTozMToxMVrOHMiXMw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QxMTozMToxMVrOHMiXMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjkwNzk1NQ==", "bodyText": "Is there already a string with the text \"sort\"? In that case, I would prefer using the existing one.", "url": "https://github.com/AntennaPod/AntennaPod/pull/4400#discussion_r482907955", "createdAt": "2020-09-03T11:31:11Z", "author": {"login": "ByteHamster"}, "path": "core/src/main/res/values/strings.xml", "diffHunk": "@@ -723,6 +723,7 @@\n     <string name=\"search_powered_by\">Search powered by %1$s</string>\n \n     <string name=\"filter\">Filter</string>\n+    <string name=\"sort_order\">Sort order</string>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bd0d0b5008fe2735b335df03ffe16bdae73785d0"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAzMDU2ODU3OnYy", "diffSide": "RIGHT", "path": "app/src/main/java/de/danoeh/antennapod/fragment/SubscriptionFragment.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QyMDowNTo0NlrOHOHC1g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QyMDowNTo0NlrOHOHC1g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDU1NzUyNg==", "bodyText": "This is missing a line return true;. Otherwise, it will fall through and execute the next case, too.", "url": "https://github.com/AntennaPod/AntennaPod/pull/4400#discussion_r484557526", "createdAt": "2020-09-07T20:05:46Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/fragment/SubscriptionFragment.java", "diffHunk": "@@ -131,6 +132,8 @@ public boolean onOptionsItemSelected(MenuItem item) {\n             case R.id.subscriptions_filter:\n                 FeedFilterDialog.showDialog(requireContext());\n                 return true;\n+            case R.id.subscriptions_sort:\n+                FeedSortDialog.showDialog(requireContext());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7f068e95f9383e74543ff1480be1811d1d6b7c6a"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAzMDU2ODgwOnYy", "diffSide": "RIGHT", "path": "app/src/main/java/de/danoeh/antennapod/dialog/FeedFilterDialog.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QyMDowNjoxNFrOHOHC_A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QyMDowNjoxNFrOHOHC_A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDU1NzU2NA==", "bodyText": "Looks a lot easier to understand \ud83d\udc4d", "url": "https://github.com/AntennaPod/AntennaPod/pull/4400#discussion_r484557564", "createdAt": "2020-09-07T20:06:14Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/dialog/FeedFilterDialog.java", "diffHunk": "@@ -16,20 +19,15 @@ public static void showDialog(Context context) {\n         dialog.setTitle(context.getString(R.string.pref_filter_feed_title));\n         dialog.setNegativeButton(android.R.string.cancel, (d, listener) -> d.dismiss());\n \n-        int selectedIndexTemp = 0;\n         int selected = UserPreferences.getFeedFilter();\n-        String[] entryValues = context.getResources().getStringArray(R.array.nav_drawer_feed_filter_values);\n-        for (int i = 0; i < entryValues.length; i++) {\n-            if (Integer.parseInt(entryValues[i]) == selected) {\n-                selectedIndexTemp = i;\n-            }\n-        }\n+        List<String> entryValues =\n+                Arrays.asList(context.getResources().getStringArray(R.array.nav_drawer_feed_filter_values));\n+        final int selectedIndex = entryValues.indexOf(\"\" + selected);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7f068e95f9383e74543ff1480be1811d1d6b7c6a"}, "originalPosition": 24}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4641, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}