{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQ2NDkxOTQw", "number": 4805, "title": "Run DateUtilsTest as Unit Test", "bodyText": "Run DateUtilsTest as a unit test outside of the emulator.\nImportant to say that I had to do some changes in the DateUtils class because Android ships a modified version of SimpleDateFormat that is not fully compatible with the JDK version. Unfortunately, Robolectric hasn't implemented an Android compatible version yet (see robolectric/robolectric#5220).\nContributes to #4569 as it saves CPU resources even if it doesn't use Robolectric.", "createdAt": "2020-12-29T13:45:29Z", "url": "https://github.com/AntennaPod/AntennaPod/pull/4805", "merged": true, "mergeCommit": {"oid": "0b715d549483840de1f12c07892904092c49c3e9"}, "closed": true, "closedAt": "2021-01-02T11:59:27Z", "author": {"login": "damoasda"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdrQUrpgFqTU2MDA3MjM2MQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdsLMQpgBqjQxNjE2MzQxNjQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYwMDcyMzYx", "url": "https://github.com/AntennaPod/AntennaPod/pull/4805#pullrequestreview-560072361", "createdAt": "2020-12-30T14:36:09Z", "commit": {"oid": "cdcff30d853b4a01ecf075e3b9c6d4d585d82cf0"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0zMFQxNDozNjowOVrOIMufIA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0zMFQxNDozNjo0N1rOIMugEw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDIxNTQ1Ng==", "bodyText": "Why is this needed? Isn't this done in the static block automatically?", "url": "https://github.com/AntennaPod/AntennaPod/pull/4805#discussion_r550215456", "createdAt": "2020-12-30T14:36:09Z", "author": {"login": "ByteHamster"}, "path": "core/src/test/java/de/danoeh/antennapod/core/util/DateUtilsTest.java", "diffHunk": "@@ -12,16 +12,17 @@\n \n /**\n  * Unit test for {@link DateUtils}.\n- *\n- * Note: It NEEDS to be run in android devices, i.e., it cannot be run in standard JDK, because\n- * the test invokes some android platform-specific behavior in the underlying\n- * {@link java.text.SimpleDateFormat} used by {@link DateUtils}.\n- *\n  */\n-@SmallTest\n+@SuppressWarnings(\"ConstantConditions\")\n public class DateUtilsTest {\n+\n+    @Before\n+    public void setUp() {\n+        DateUtils.dateFormatParser.setTimeZone(DateUtils.defaultTimezone);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cdcff30d853b4a01ecf075e3b9c6d4d585d82cf0"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDIxNTY5OQ==", "bodyText": "I hope that this does not break anything... Probably needs detailed beta tests.", "url": "https://github.com/AntennaPod/AntennaPod/pull/4805#discussion_r550215699", "createdAt": "2020-12-30T14:36:47Z", "author": {"login": "ByteHamster"}, "path": "core/src/main/java/de/danoeh/antennapod/core/util/DateUtils.java", "diffHunk": "@@ -37,9 +37,12 @@ public static Date parse(final String input) {\n         }\n         String date = input.trim().replace('/', '-').replaceAll(\"( ){2,}+\", \" \");\n \n+        // remove colon from timezone to avoid differences between Android and Java SimpleDateFormat\n+        date = date.replaceAll(\"([+-]\\\\d\\\\d):(\\\\d\\\\d)$\", \"$1$2\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cdcff30d853b4a01ecf075e3b9c6d4d585d82cf0"}, "originalPosition": 16}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cdcff30d853b4a01ecf075e3b9c6d4d585d82cf0", "author": {"user": {"login": "damoasda", "name": "Herbert Reiter"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/cdcff30d853b4a01ecf075e3b9c6d4d585d82cf0", "committedDate": "2020-12-29T12:58:09Z", "message": "Run DateUtilsTest with Robolectric"}, "afterCommit": {"oid": "4384d1bdff48de7b11a7872c7ea4716652999471", "author": {"user": {"login": "damoasda", "name": "Herbert Reiter"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/4384d1bdff48de7b11a7872c7ea4716652999471", "committedDate": "2021-01-02T10:27:08Z", "message": "Adopt changes after develop branch updates"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d5ba17feaf26d0fe10588087244024b96f960d62", "author": {"user": {"login": "damoasda", "name": "Herbert Reiter"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/d5ba17feaf26d0fe10588087244024b96f960d62", "committedDate": "2021-01-02T11:11:24Z", "message": "Run DateUtilsTest with Robolectric"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "91868897ecf0c0ce4899b277305de2f2c75a9c7d", "author": {"user": {"login": "damoasda", "name": "Herbert Reiter"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/91868897ecf0c0ce4899b277305de2f2c75a9c7d", "committedDate": "2021-01-02T11:11:24Z", "message": "Adopt changes after develop branch updates"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4384d1bdff48de7b11a7872c7ea4716652999471", "author": {"user": {"login": "damoasda", "name": "Herbert Reiter"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/4384d1bdff48de7b11a7872c7ea4716652999471", "committedDate": "2021-01-02T10:27:08Z", "message": "Adopt changes after develop branch updates"}, "afterCommit": {"oid": "91868897ecf0c0ce4899b277305de2f2c75a9c7d", "author": {"user": {"login": "damoasda", "name": "Herbert Reiter"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/91868897ecf0c0ce4899b277305de2f2c75a9c7d", "committedDate": "2021-01-02T11:11:24Z", "message": "Adopt changes after develop branch updates"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2609, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}