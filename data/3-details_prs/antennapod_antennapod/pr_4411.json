{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDgyMDk0NTQw", "number": 4411, "title": "Close keyboard when dialogs were dismissed", "bodyText": "Continuation of #4407\nAfter some more research I found out, that the only working solution would be:\ndialog.setOnDismissListener((dialog1 -> activity.getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN)));\nThrough that the windowSoftInputMode of the activity changes.\nFurthermore this could be easily solved by just changing its value in the AndroidManifest and no more code is needed.\nNow if any (!) dialog is dismissed, the keyboard closes.\nI expected, that this would break the search functionality, but somehow the keyboard is showing up correctly.\nCloses #4394\nCloses #4208", "createdAt": "2020-09-08T14:41:51Z", "url": "https://github.com/AntennaPod/AntennaPod/pull/4411", "merged": true, "mergeCommit": {"oid": "b7b63d7d312aee2f9196c23b038aa02bf67012c5"}, "closed": true, "closedAt": "2020-09-14T14:57:19Z", "author": {"login": "asdoi"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdG4fwWgH2gAyNDgyMDk0NTQwOjllMWM1MGVhNjM3ODE5ZTViYmIxZGNiNDU3YjIyOTlkNDhkMjA4NDY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdHileygFqTQ4NjA1ODE2Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "9e1c50ea637819e5bbb1dcb457b2299d48d20846", "author": {"user": {"login": "asdoi", "name": null}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/9e1c50ea637819e5bbb1dcb457b2299d48d20846", "committedDate": "2020-09-08T14:30:09Z", "message": "change stateHidden to stateAlwaysHidden"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "22e9a9af7e0931fd558066c6ea1bab6aa8237013", "author": {"user": {"login": "asdoi", "name": null}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/22e9a9af7e0931fd558066c6ea1bab6aa8237013", "committedDate": "2020-09-08T14:34:00Z", "message": "close keyboard when sleep time has been selected"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg1Mzc3OTYy", "url": "https://github.com/AntennaPod/AntennaPod/pull/4411#pullrequestreview-485377962", "createdAt": "2020-09-09T20:26:53Z", "commit": {"oid": "22e9a9af7e0931fd558066c6ea1bab6aa8237013"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQyMDoyNjo1M1rOHPZFyQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQyMDoyNjo1M1rOHPZFyQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTkwMTc2OQ==", "bodyText": "Is this still needed even when the manifest is changed?", "url": "https://github.com/AntennaPod/AntennaPod/pull/4411#discussion_r485901769", "createdAt": "2020-09-09T20:26:53Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/dialog/SleepTimerDialog.java", "diffHunk": "@@ -153,4 +155,9 @@ private void updateTime() {\n         timeDisplay.setVisibility(controller.sleepTimerActive() ? View.VISIBLE : View.GONE);\n         time.setText(Converter.getDurationStringLong((int) controller.getSleepTimerTimeLeft()));\n     }\n+\n+    private void closeKeyboard(View content) {\n+        InputMethodManager imm = (InputMethodManager) getContext().getSystemService(Activity.INPUT_METHOD_SERVICE);\n+        imm.hideSoftInputFromWindow(content.getWindowToken(), 0);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "22e9a9af7e0931fd558066c6ea1bab6aa8237013"}, "originalPosition": 22}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0adee1ef585159631a04deee9ed43486bae67b24", "author": {"user": {"login": "asdoi", "name": null}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/0adee1ef585159631a04deee9ed43486bae67b24", "committedDate": "2020-09-10T12:47:24Z", "message": "Merge branch 'develop' into dialog_keyboard"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2MDU4MTYz", "url": "https://github.com/AntennaPod/AntennaPod/pull/4411#pullrequestreview-486058163", "createdAt": "2020-09-10T15:30:17Z", "commit": {"oid": "0adee1ef585159631a04deee9ed43486bae67b24"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxNTozMDoxN1rOHP5ucw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxNTozMDoxN1rOHP5ucw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjQzNjQ2Nw==", "bodyText": "The  documentation says:\n \"stateAlwaysHidden\" \tThe soft keyboard is always hidden when the activity's main window has input focus.\nAs all search actions, or actions where the user has to input some text, were handled by fragments, the activity's main window does not get the focus and so the keyboard does not hide.\nAnyway after dismissing a dialog the main window gets the focus again and the keyboard will hide.", "url": "https://github.com/AntennaPod/AntennaPod/pull/4411#discussion_r486436467", "createdAt": "2020-09-10T15:30:17Z", "author": {"login": "asdoi"}, "path": "app/src/main/AndroidManifest.xml", "diffHunk": "@@ -80,7 +80,7 @@\n         <activity\n             android:name=\".activity.MainActivity\"\n             android:configChanges=\"keyboardHidden|orientation|screenSize|smallestScreenSize|screenLayout|density|uiMode|keyboard|navigation\"\n-            android:windowSoftInputMode=\"stateHidden\"\n+            android:windowSoftInputMode=\"stateAlwaysHidden\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0adee1ef585159631a04deee9ed43486bae67b24"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2682, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}