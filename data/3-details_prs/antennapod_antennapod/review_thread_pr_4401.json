{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc4NTc3ODM0", "number": 4401, "reviewThreads": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQyMDoyMDoxNlrOEpnl3A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQxODoxNzozOFrOEp6AjA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEyMDc1NzQwOnYy", "diffSide": "RIGHT", "path": "app/src/main/java/de/danoeh/antennapod/fragment/SubscriptionFragment.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQyMDoyMDoxNlrOHbZiWA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQyMDoyMDoxNlrOHbZiWA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODQ5MTk5Mg==", "bodyText": "I think this would be easier with new Handler().postDelayed(() -> ..., 800)", "url": "https://github.com/AntennaPod/AntennaPod/pull/4401#discussion_r498491992", "createdAt": "2020-10-01T20:20:16Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/fragment/SubscriptionFragment.java", "diffHunk": "@@ -102,6 +104,20 @@ public View onCreateView(LayoutInflater inflater, ViewGroup container,\n \n         feedsFilteredMsg = root.findViewById(R.id.feeds_filtered_message);\n         feedsFilteredMsg.setOnClickListener((l) -> FeedFilterDialog.showDialog(requireContext()));\n+\n+        SwipeRefreshLayout swipeRefreshLayout = root.findViewById(R.id.swiperefresh);\n+        swipeRefreshLayout.setOnRefreshListener(() -> {\n+            AutoUpdateManager.runImmediate(requireContext());\n+            new Thread(() -> {\n+                try {\n+                    Thread.sleep(800);\n+                } catch (Exception ignore) {\n+                }\n+                getActivity().runOnUiThread(() -> {\n+                    swipeRefreshLayout.setRefreshing(false);\n+                });", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aabada4957c3be0dfdf2163042d12cb9cda3243f"}, "originalPosition": 24}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEyMzIyNTY1OnYy", "diffSide": "RIGHT", "path": "app/src/main/java/de/danoeh/antennapod/fragment/EpisodesListFragment.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQxNToyMTozOVrOHbxxnw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQxNToyMTozOVrOHbxxnw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODg4OTExOQ==", "bodyText": "I think you don't need getActivity().runOnUiThread. Handlers that are created on the UI thread run their runnable on the UI thread, too.", "url": "https://github.com/AntennaPod/AntennaPod/pull/4401#discussion_r498889119", "createdAt": "2020-10-02T15:21:39Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/fragment/EpisodesListFragment.java", "diffHunk": "@@ -214,6 +217,14 @@ public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container,\n             ((SimpleItemAnimator) animator).setSupportsChangeAnimations(false);\n         }\n \n+        SwipeRefreshLayout swipeRefreshLayout = root.findViewById(R.id.swipeRefresh);\n+        swipeRefreshLayout.setOnRefreshListener(() -> {\n+            AutoUpdateManager.runImmediate(requireContext());\n+            new Handler().postDelayed(() ->\n+                            getActivity().runOnUiThread(() -> swipeRefreshLayout.setRefreshing(false))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "70b92a08cfe32a5d1250535ade2e7cc09811bae4"}, "originalPosition": 18}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEyMzIzMzc1OnYy", "diffSide": "RIGHT", "path": "app/src/main/res/layout/feed_item_list_fragment.xml", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQxNToyMzo1NVrOHbx2yQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQxODoxMzo0MlrOHb3CqA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODg5MDQ0MQ==", "bodyText": "I have not tried it yet but I think this padding should be applied to the recyclerView, not the swipe layout. Otherwise, the scroll bar on big tablets will not be on the edge of the screen.", "url": "https://github.com/AntennaPod/AntennaPod/pull/4401#discussion_r498890441", "createdAt": "2020-10-02T15:23:55Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/res/layout/feed_item_list_fragment.xml", "diffHunk": "@@ -48,12 +48,19 @@\n         </com.google.android.material.appbar.CollapsingToolbarLayout>\n     </com.google.android.material.appbar.AppBarLayout>\n \n-    <de.danoeh.antennapod.view.EpisodeItemListRecyclerView\n-            android:id=\"@+id/recyclerView\"\n-            android:layout_width=\"match_parent\"\n-            android:layout_height=\"match_parent\"\n-            android:paddingHorizontal=\"@dimen/additional_horizontal_spacing\"\n-            app:layout_behavior=\"@string/appbar_scrolling_view_behavior\" />\n+    <androidx.swiperefreshlayout.widget.SwipeRefreshLayout\n+        android:id=\"@+id/swipeRefresh\"\n+        android:layout_width=\"match_parent\"\n+        android:layout_height=\"match_parent\"\n+        android:paddingHorizontal=\"@dimen/additional_horizontal_spacing\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "70b92a08cfe32a5d1250535ade2e7cc09811bae4"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODg5ODg3OA==", "bodyText": "I am not sure but I think this does not make any difference as the recyclerview matches the parent or is the padding attribute handled differently in a recyclerview than it is in a listview?", "url": "https://github.com/AntennaPod/AntennaPod/pull/4401#discussion_r498898878", "createdAt": "2020-10-02T15:38:39Z", "author": {"login": "asdoi"}, "path": "app/src/main/res/layout/feed_item_list_fragment.xml", "diffHunk": "@@ -48,12 +48,19 @@\n         </com.google.android.material.appbar.CollapsingToolbarLayout>\n     </com.google.android.material.appbar.AppBarLayout>\n \n-    <de.danoeh.antennapod.view.EpisodeItemListRecyclerView\n-            android:id=\"@+id/recyclerView\"\n-            android:layout_width=\"match_parent\"\n-            android:layout_height=\"match_parent\"\n-            android:paddingHorizontal=\"@dimen/additional_horizontal_spacing\"\n-            app:layout_behavior=\"@string/appbar_scrolling_view_behavior\" />\n+    <androidx.swiperefreshlayout.widget.SwipeRefreshLayout\n+        android:id=\"@+id/swipeRefresh\"\n+        android:layout_width=\"match_parent\"\n+        android:layout_height=\"match_parent\"\n+        android:paddingHorizontal=\"@dimen/additional_horizontal_spacing\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODg5MDQ0MQ=="}, "originalCommit": {"oid": "70b92a08cfe32a5d1250535ade2e7cc09811bae4"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODkyMDAyNA==", "bodyText": "It does make a difference :) The recyclerView's scroll bar is then influenced by the padding. See screenshot below. Before, the scroll bar was on the right side of the screen.", "url": "https://github.com/AntennaPod/AntennaPod/pull/4401#discussion_r498920024", "createdAt": "2020-10-02T16:18:18Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/res/layout/feed_item_list_fragment.xml", "diffHunk": "@@ -48,12 +48,19 @@\n         </com.google.android.material.appbar.CollapsingToolbarLayout>\n     </com.google.android.material.appbar.AppBarLayout>\n \n-    <de.danoeh.antennapod.view.EpisodeItemListRecyclerView\n-            android:id=\"@+id/recyclerView\"\n-            android:layout_width=\"match_parent\"\n-            android:layout_height=\"match_parent\"\n-            android:paddingHorizontal=\"@dimen/additional_horizontal_spacing\"\n-            app:layout_behavior=\"@string/appbar_scrolling_view_behavior\" />\n+    <androidx.swiperefreshlayout.widget.SwipeRefreshLayout\n+        android:id=\"@+id/swipeRefresh\"\n+        android:layout_width=\"match_parent\"\n+        android:layout_height=\"match_parent\"\n+        android:paddingHorizontal=\"@dimen/additional_horizontal_spacing\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODg5MDQ0MQ=="}, "originalCommit": {"oid": "70b92a08cfe32a5d1250535ade2e7cc09811bae4"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODk3NTQwMA==", "bodyText": "Well, I always learn something new. \ud83d\ude09", "url": "https://github.com/AntennaPod/AntennaPod/pull/4401#discussion_r498975400", "createdAt": "2020-10-02T18:13:42Z", "author": {"login": "asdoi"}, "path": "app/src/main/res/layout/feed_item_list_fragment.xml", "diffHunk": "@@ -48,12 +48,19 @@\n         </com.google.android.material.appbar.CollapsingToolbarLayout>\n     </com.google.android.material.appbar.AppBarLayout>\n \n-    <de.danoeh.antennapod.view.EpisodeItemListRecyclerView\n-            android:id=\"@+id/recyclerView\"\n-            android:layout_width=\"match_parent\"\n-            android:layout_height=\"match_parent\"\n-            android:paddingHorizontal=\"@dimen/additional_horizontal_spacing\"\n-            app:layout_behavior=\"@string/appbar_scrolling_view_behavior\" />\n+    <androidx.swiperefreshlayout.widget.SwipeRefreshLayout\n+        android:id=\"@+id/swipeRefresh\"\n+        android:layout_width=\"match_parent\"\n+        android:layout_height=\"match_parent\"\n+        android:paddingHorizontal=\"@dimen/additional_horizontal_spacing\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODg5MDQ0MQ=="}, "originalCommit": {"oid": "70b92a08cfe32a5d1250535ade2e7cc09811bae4"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEyMzQyMzgyOnYy", "diffSide": "RIGHT", "path": "app/src/main/java/de/danoeh/antennapod/fragment/EpisodesListFragment.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQxNjoyMDozOVrOHbzvLA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQxNjoyMDozOVrOHbzvLA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODkyMTI2MA==", "bodyText": "1 second feels a bit too much to me. This is sometimes more than what it takes to actually refresh. What about 500ms?", "url": "https://github.com/AntennaPod/AntennaPod/pull/4401#discussion_r498921260", "createdAt": "2020-10-02T16:20:39Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/fragment/EpisodesListFragment.java", "diffHunk": "@@ -214,6 +217,12 @@ public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container,\n             ((SimpleItemAnimator) animator).setSupportsChangeAnimations(false);\n         }\n \n+        SwipeRefreshLayout swipeRefreshLayout = root.findViewById(R.id.swipeRefresh);\n+        swipeRefreshLayout.setOnRefreshListener(() -> {\n+            AutoUpdateManager.runImmediate(requireContext());\n+            new Handler().postDelayed(() -> swipeRefreshLayout.setRefreshing(false), 1000);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6a8007b388491f931d73a55bea289148536478ad"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEyMzc2MDA4OnYy", "diffSide": "RIGHT", "path": "app/src/main/java/de/danoeh/antennapod/fragment/SubscriptionFragment.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQxODoxNDo0MlrOHb3Fqg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQyMDo0Njo0MFrOHb7KGw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODk3NjE3MA==", "bodyText": "Is there any class where constants like this one are saved, I did not find an appropriate one.\nFurthermore I changed the duration to 750ms which is the time for one repetition.", "url": "https://github.com/AntennaPod/AntennaPod/pull/4401#discussion_r498976170", "createdAt": "2020-10-02T18:14:42Z", "author": {"login": "asdoi"}, "path": "app/src/main/java/de/danoeh/antennapod/fragment/SubscriptionFragment.java", "diffHunk": "@@ -66,6 +69,8 @@\n     private static final String PREFS = \"SubscriptionFragment\";\n     private static final String PREF_NUM_COLUMNS = \"columns\";\n \n+    public static final int SWIPE_TO_REFRESH_DURATION = 750;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "69d1b4933f5ccc2e19ead25bd3abb088d1d7a995"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTA0Mjg0Mw==", "bodyText": "Good question. I don't think we have a class for such constants. The most Android way would probably be to use the core/res/values/integers.xml file and then load with getResources().getInteger(R.integer.xy)", "url": "https://github.com/AntennaPod/AntennaPod/pull/4401#discussion_r499042843", "createdAt": "2020-10-02T20:46:40Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/fragment/SubscriptionFragment.java", "diffHunk": "@@ -66,6 +69,8 @@\n     private static final String PREFS = \"SubscriptionFragment\";\n     private static final String PREF_NUM_COLUMNS = \"columns\";\n \n+    public static final int SWIPE_TO_REFRESH_DURATION = 750;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODk3NjE3MA=="}, "originalCommit": {"oid": "69d1b4933f5ccc2e19ead25bd3abb088d1d7a995"}, "originalPosition": 18}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEyMzc3NDg0OnYy", "diffSide": "RIGHT", "path": "app/src/main/res/layout/fragment_subscriptions.xml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQxODoxNzozOFrOHb3QcA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQyMTo0ODo0NVrOHb8emQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODk3ODkyOA==", "bodyText": "I am now unsure about that paddingBottom as it is needed for clipToPadding.\nAlso, please have a look about all other paddings to make sure that I did not make any mistakes \ud83d\ude09", "url": "https://github.com/AntennaPod/AntennaPod/pull/4401#discussion_r498978928", "createdAt": "2020-10-02T18:17:38Z", "author": {"login": "asdoi"}, "path": "app/src/main/res/layout/fragment_subscriptions.xml", "diffHunk": "@@ -28,17 +28,24 @@\n             android:textColor=\"?android:attr/textColorSecondary\"\n             android:textSize=\"@dimen/text_size_small\" />\n \n-    <GridView\n-            android:layout_below=\"@id/feeds_filtered_message\"\n-            android:id=\"@+id/subscriptions_grid\"\n-            android:layout_width=\"match_parent\"\n-            android:numColumns=\"3\"\n-            android:horizontalSpacing=\"2dp\"\n-            android:verticalSpacing=\"2dp\"\n-            android:layout_height=\"match_parent\"\n-            android:layout_gravity=\"center_horizontal\"\n-            android:paddingBottom=\"88dp\"\n-            android:clipToPadding=\"false\"/>\n+    <androidx.swiperefreshlayout.widget.SwipeRefreshLayout\n+        android:id=\"@+id/swipeRefresh\"\n+        android:layout_width=\"match_parent\"\n+        android:layout_height=\"match_parent\"\n+        android:layout_below=\"@id/feeds_filtered_message\">\n+\n+        <GridView\n+                android:id=\"@+id/subscriptions_grid\"\n+                android:layout_width=\"match_parent\"\n+                android:numColumns=\"3\"\n+                android:horizontalSpacing=\"2dp\"\n+                android:verticalSpacing=\"2dp\"\n+                android:layout_height=\"match_parent\"\n+                android:layout_gravity=\"center_horizontal\"\n+                android:paddingBottom=\"88dp\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "69d1b4933f5ccc2e19ead25bd3abb088d1d7a995"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTA2NDQ3Mw==", "bodyText": "all_episodes_fragment.xml now has a tiny white space on the bottom of the screen. I think the padding should be applied to the RecyclerView, not to the SwipeRefreshLayout, there.\nThe padding here in fragment_subscriptions.xml looks good.", "url": "https://github.com/AntennaPod/AntennaPod/pull/4401#discussion_r499064473", "createdAt": "2020-10-02T21:48:45Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/res/layout/fragment_subscriptions.xml", "diffHunk": "@@ -28,17 +28,24 @@\n             android:textColor=\"?android:attr/textColorSecondary\"\n             android:textSize=\"@dimen/text_size_small\" />\n \n-    <GridView\n-            android:layout_below=\"@id/feeds_filtered_message\"\n-            android:id=\"@+id/subscriptions_grid\"\n-            android:layout_width=\"match_parent\"\n-            android:numColumns=\"3\"\n-            android:horizontalSpacing=\"2dp\"\n-            android:verticalSpacing=\"2dp\"\n-            android:layout_height=\"match_parent\"\n-            android:layout_gravity=\"center_horizontal\"\n-            android:paddingBottom=\"88dp\"\n-            android:clipToPadding=\"false\"/>\n+    <androidx.swiperefreshlayout.widget.SwipeRefreshLayout\n+        android:id=\"@+id/swipeRefresh\"\n+        android:layout_width=\"match_parent\"\n+        android:layout_height=\"match_parent\"\n+        android:layout_below=\"@id/feeds_filtered_message\">\n+\n+        <GridView\n+                android:id=\"@+id/subscriptions_grid\"\n+                android:layout_width=\"match_parent\"\n+                android:numColumns=\"3\"\n+                android:horizontalSpacing=\"2dp\"\n+                android:verticalSpacing=\"2dp\"\n+                android:layout_height=\"match_parent\"\n+                android:layout_gravity=\"center_horizontal\"\n+                android:paddingBottom=\"88dp\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODk3ODkyOA=="}, "originalCommit": {"oid": "69d1b4933f5ccc2e19ead25bd3abb088d1d7a995"}, "originalPosition": 29}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4644, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}