{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYxNDk4MDAx", "number": 3748, "title": "App shortcuts", "bodyText": "fixes #3746\nStatic shortcuts for:\n\n\nQueue\n\n\nEpisodes\n\n\nSubscriptions\nThese are shortcuts for its Fragment.\n\n\nRefresh\nThis shortcut is for QueueFragment and executes AutoUpdateManager.runImmediate() on start.", "createdAt": "2020-01-10T15:21:05Z", "url": "https://github.com/AntennaPod/AntennaPod/pull/3748", "merged": true, "mergeCommit": {"oid": "001583a4e0eaa7f90fb2c0f7d3cfa19f7ffb5ae3"}, "closed": true, "closedAt": "2020-03-29T22:39:53Z", "author": {"login": "mamehacker"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb5AIr7AH2gAyMzYxNDk4MDAxOmU4NGRhNGM2ZDY1MjcwNGMwZjcyODhlNzk1MDM2YWQ1NzI4ZTdjNmI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcSMq4WgH2gAyMzYxNDk4MDAxOjFhYzJlZjc1MzgxN2M4MTRlYjg0YjI5ZmY1ZDBlYzY3ZjRlMzA1YTU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e84da4c6d652704c0f7288e795036ad5728e7c6b", "author": {"user": {"login": "mamehacker", "name": "Shinichiro Fujiwara"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/e84da4c6d652704c0f7288e795036ad5728e7c6b", "committedDate": "2020-01-10T15:18:06Z", "message": "Added static shortcuts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "88fc5170def78a425800cc6e699300d3baca5bc9", "author": {"user": {"login": "mamehacker", "name": "Shinichiro Fujiwara"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/88fc5170def78a425800cc6e699300d3baca5bc9", "committedDate": "2020-01-10T15:18:10Z", "message": "Added Refresh shortcut"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQxMzM0MzY1", "url": "https://github.com/AntennaPod/AntennaPod/pull/3748#pullrequestreview-341334365", "createdAt": "2020-01-10T18:11:56Z", "commit": {"oid": "88fc5170def78a425800cc6e699300d3baca5bc9"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMFQxODoxMTo1N1rOFcb_DA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMFQxODoxMjo0NVrOFccAHQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTM2Mjk1Ng==", "bodyText": "Do you know another way to do this? I don't really like copying files with only little differences.", "url": "https://github.com/AntennaPod/AntennaPod/pull/3748#discussion_r365362956", "createdAt": "2020-01-10T18:11:57Z", "author": {"login": "ByteHamster"}, "path": "app/src/debug/res/xml/shortcuts.xml", "diffHunk": "@@ -0,0 +1,71 @@\n+<?xml version=\"1.0\" encoding=\"utf-8\"?>\n+<shortcuts xmlns:android=\"http://schemas.android.com/apk/res/android\">\n+    <shortcut\n+        android:enabled=\"true\"\n+        android:icon=\"@drawable/ic_list_grey600_24dp\"\n+        android:shortcutId=\"queue\"\n+        android:shortcutShortLabel=\"@string/queue_label\">\n+        <intent\n+            android:action=\"android.intent.action.VIEW\"\n+            android:targetClass=\"de.danoeh.antennapod.activity.MainActivity\"\n+            android:targetPackage=\"de.danoeh.antennapod.debug\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "88fc5170def78a425800cc6e699300d3baca5bc9"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTM2MzIyOQ==", "bodyText": "Would it be possible to just call AutoUpdateManager.runImmediate(requireContext()); here directly instead of passing it to the queue?", "url": "https://github.com/AntennaPod/AntennaPod/pull/3748#discussion_r365363229", "createdAt": "2020-01-10T18:12:45Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/activity/MainActivity.java", "diffHunk": "@@ -826,12 +827,19 @@ public void onFeedListChanged(FeedListUpdateEvent event) {\n     private void handleNavIntent() {\n         Log.d(TAG, \"handleNavIntent()\");\n         Intent intent = getIntent();\n-        if (intent.hasExtra(EXTRA_FEED_ID) ||\n+        if (intent.hasExtra(EXTRA_FEED_ID) || intent.hasExtra(EXTRA_REFRESH_ON_START) ||\n                 (intent.hasExtra(EXTRA_NAV_TYPE) &&\n                         (intent.hasExtra(EXTRA_NAV_INDEX) || intent.hasExtra(EXTRA_FRAGMENT_TAG)))) {\n             int index = intent.getIntExtra(EXTRA_NAV_INDEX, -1);\n             String tag = intent.getStringExtra(EXTRA_FRAGMENT_TAG);\n             Bundle args = intent.getBundleExtra(EXTRA_FRAGMENT_ARGS);\n+            boolean refreshOnStart = intent.getBooleanExtra(EXTRA_REFRESH_ON_START, false);\n+            if (refreshOnStart) {\n+                tag = QueueFragment.TAG;\n+                args = new Bundle();\n+                args.putBoolean(QueueFragment.ARG_REFRESH_ON_START, true);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "88fc5170def78a425800cc6e699300d3baca5bc9"}, "originalPosition": 23}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "789af2b929f244cf4d6724bc38ec55bca606c7b1", "author": {"user": {"login": "mamehacker", "name": "Shinichiro Fujiwara"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/789af2b929f244cf4d6724bc38ec55bca606c7b1", "committedDate": "2020-01-14T13:50:29Z", "message": "Use ResourcesPlaceholders plugin for shortcuts.xml"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1167958cf58d5faafd41dae7a9ab16d92c440522", "author": {"user": {"login": "mamehacker", "name": "Shinichiro Fujiwara"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/1167958cf58d5faafd41dae7a9ab16d92c440522", "committedDate": "2020-01-14T13:53:39Z", "message": "Refresh directly on MainActivity"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4aec7bba8c385034cd8c03a5773fbcdd8e4d659c", "author": {"user": {"login": "mamehacker", "name": "Shinichiro Fujiwara"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/4aec7bba8c385034cd8c03a5773fbcdd8e4d659c", "committedDate": "2020-03-27T23:16:37Z", "message": "Merge branch 'develop' into app-shortcuts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "697bb2a7a6dbba51e366db6cafb7d1dc921466a4", "author": {"user": {"login": "mamehacker", "name": "Shinichiro Fujiwara"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/697bb2a7a6dbba51e366db6cafb7d1dc921466a4", "committedDate": "2020-03-27T23:17:47Z", "message": "Fix outdated drawables"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b9d3b47f28dde330b1d5305c38384da2b0e15ac3", "author": {"user": {"login": "mamehacker", "name": "Shinichiro Fujiwara"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/b9d3b47f28dde330b1d5305c38384da2b0e15ac3", "committedDate": "2020-03-28T03:38:31Z", "message": "Add background shape for app shortcut icons"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4a03b3e047b8f00949c9ab559900afee75c43ee7", "author": {"user": {"login": "mamehacker", "name": "Shinichiro Fujiwara"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/4a03b3e047b8f00949c9ab559900afee75c43ee7", "committedDate": "2020-03-28T04:10:43Z", "message": "Add adaptive icons for shortcuts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c15701ba53b6f3325a7ffd09cbf97562ab5968aa", "author": {"user": {"login": "mamehacker", "name": "Shinichiro Fujiwara"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/c15701ba53b6f3325a7ffd09cbf97562ab5968aa", "committedDate": "2020-03-28T04:30:08Z", "message": "Change background color for shortcut icons"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgzMzIzNDY2", "url": "https://github.com/AntennaPod/AntennaPod/pull/3748#pullrequestreview-383323466", "createdAt": "2020-03-28T15:41:59Z", "commit": {"oid": "c15701ba53b6f3325a7ffd09cbf97562ab5968aa"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOFQxNTo0MTo1OVrOF9KSTA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOFQxNTo0MTo1OVrOF9KSTA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTY3NTk4MA==", "bodyText": "This argument is now unused. Could you please remove it from all intents in that file?", "url": "https://github.com/AntennaPod/AntennaPod/pull/3748#discussion_r399675980", "createdAt": "2020-03-28T15:41:59Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/res/xml/shortcuts.xml", "diffHunk": "@@ -0,0 +1,71 @@\n+<?xml version=\"1.0\" encoding=\"utf-8\"?>\n+<shortcuts xmlns:android=\"http://schemas.android.com/apk/res/android\">\n+    <shortcut\n+        android:enabled=\"true\"\n+        android:icon=\"@drawable/ic_playlist_shortcut\"\n+        android:shortcutId=\"queue\"\n+        android:shortcutShortLabel=\"@string/queue_label\">\n+        <intent\n+            android:action=\"android.intent.action.VIEW\"\n+            android:targetClass=\"de.danoeh.antennapod.activity.MainActivity\"\n+            android:targetPackage=\"${applicationId}\">\n+            <extra\n+                android:name=\"fragment_tag\"\n+                android:value=\"QueueFragment\" />\n+            <extra\n+                android:name=\"nav_type\"\n+                android:value=\"0\" />\n+        </intent>\n+    </shortcut>\n+\n+    <shortcut\n+        android:enabled=\"true\"\n+        android:icon=\"@drawable/ic_feed_shortcut\"\n+        android:shortcutId=\"episodes\"\n+        android:shortcutShortLabel=\"@string/episodes_label\">\n+        <intent\n+            android:action=\"android.intent.action.VIEW\"\n+            android:targetClass=\"de.danoeh.antennapod.activity.MainActivity\"\n+            android:targetPackage=\"${applicationId}\">\n+            <extra\n+                android:name=\"fragment_tag\"\n+                android:value=\"EpisodesFragment\" />\n+            <extra\n+                android:name=\"nav_type\"\n+                android:value=\"0\" />\n+        </intent>\n+    </shortcut>\n+\n+    <shortcut\n+        android:enabled=\"true\"\n+        android:icon=\"@drawable/ic_folder_shortcut\"\n+        android:shortcutId=\"subscriptions\"\n+        android:shortcutShortLabel=\"@string/subscriptions_label\">\n+        <intent\n+            android:action=\"android.intent.action.VIEW\"\n+            android:targetClass=\"de.danoeh.antennapod.activity.MainActivity\"\n+            android:targetPackage=\"${applicationId}\">\n+            <extra\n+                android:name=\"fragment_tag\"\n+                android:value=\"SubscriptionFragment\" />\n+            <extra\n+                android:name=\"nav_type\"\n+                android:value=\"0\" />", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c15701ba53b6f3325a7ffd09cbf97562ab5968aa"}, "originalPosition": 53}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1ac2ef753817c814eb84b29ff5d0ec67f4e305a5", "author": {"user": {"login": "mamehacker", "name": "Shinichiro Fujiwara"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/1ac2ef753817c814eb84b29ff5d0ec67f4e305a5", "committedDate": "2020-03-28T22:02:25Z", "message": "Remove unused intent extras"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2885, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}