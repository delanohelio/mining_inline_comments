{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk2NDQwMjY3", "number": 4486, "title": "Hardware keyboard support ", "bodyText": "Closes #3337\nShortcuts:\nAudio (MainActivity):\n\n\n\nKey\nAction\n\n\n\n\nP Space/Enter(Conflicting with dpad navigation)\nPlay/Pause\n\n\nJ/A/,\nRewind media\n\n\nK/D/.\nForward media\n\n\n+/W\nRaise media volume (channel)\n\n\n-/S\nLower media volume (channel)\n\n\nM\nMute/unmute (toggle) media (volume channel; only on API > 23)\n\n\n\nVideo (VideoPlayerActivity):\n\n\n\nKey\nAction\n\n\n\n\nP/Space/Enter(Just to be save)\nPlay/Pause\n\n\nJ/A/,\nRewind media\n\n\nK/D/.\nForward media\n\n\nF/Esc\nExit video player\n\n\ni\nEnter picture-in-picture mode\n\n\n0-9\nGo to 0-90% of the video\n\n\n+/W\nRaise media volume (channel)\n\n\n-/S\nLower media volume (channel)\n\n\nM\nMute/unmute (toggle) media (volume channel; only on API > 23)", "createdAt": "2020-10-01T17:46:47Z", "url": "https://github.com/AntennaPod/AntennaPod/pull/4486", "merged": true, "mergeCommit": {"oid": "e2094c0cadb4afbc4e0f5aff8cf47a333c49b5b5"}, "closed": true, "closedAt": "2020-10-16T14:53:00Z", "author": {"login": "asdoi"}, "timelineItems": {"totalCount": 22, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdNDtTdgH2gAyNDk2NDQwMjY3OjExNWFjZjE0OTE5MWY2YjBkZTZjZjFjY2VhNTc5M2Q4ZDYzMzM5ODY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdTHHXxgH2gAyNDk2NDQwMjY3OmJmMGJmZDJhMmIzN2E1YWQwOGIwY2QwMTE1ZTUxZWJmMWVjNzI2ZTE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "115acf149191f6b0de6cf1ccea5793d8d6333986", "author": {"user": {"login": "asdoi", "name": null}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/115acf149191f6b0de6cf1ccea5793d8d6333986", "committedDate": "2020-09-27T18:57:27Z", "message": "add basic hardware support"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0be98d769264ef2f1b776ad9333090d9f3e88f0a", "author": {"user": {"login": "asdoi", "name": null}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/0be98d769264ef2f1b776ad9333090d9f3e88f0a", "committedDate": "2020-10-01T17:06:36Z", "message": "add volume keys"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2244dc207c9ed199077b528d26ed12d4d1a8c63d", "author": {"user": {"login": "asdoi", "name": null}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/2244dc207c9ed199077b528d26ed12d4d1a8c63d", "committedDate": "2020-10-01T17:43:12Z", "message": "add hardware key support for VideoplayerActivity"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAwNTk1MjM5", "url": "https://github.com/AntennaPod/AntennaPod/pull/4486#pullrequestreview-500595239", "createdAt": "2020-10-01T18:04:43Z", "commit": {"oid": "2244dc207c9ed199077b528d26ed12d4d1a8c63d"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQxODowNDo0M1rOHbVfOg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQxODowODowNVrOHbVmDA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODQyNTY1OA==", "bodyText": "Hmm, I think I would skip the mute functionality. For Audio, it is kind of pointless.", "url": "https://github.com/AntennaPod/AntennaPod/pull/4486#discussion_r498425658", "createdAt": "2020-10-01T18:04:43Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/activity/MainActivity.java", "diffHunk": "@@ -511,4 +516,61 @@ public Snackbar showSnackbarAbovePlayer(CharSequence text, int duration) {\n     public Snackbar showSnackbarAbovePlayer(int text, int duration) {\n         return showSnackbarAbovePlayer(getResources().getText(text), duration);\n     }\n+\n+    //Hardware keyboard support\n+    @Override\n+    public boolean onKeyUp(int keyCode, KeyEvent event) {\n+        Intent serviceIntent = new Intent(this, PlaybackService.class);\n+        serviceIntent.putExtra(MediaButtonReceiver.EXTRA_HARDWAREBUTTON, true);\n+\n+        AudioManager audioManager = (AudioManager) getSystemService(AUDIO_SERVICE);\n+        Integer customKeyCode = null;\n+\n+        switch (keyCode) {\n+            case KeyEvent.KEYCODE_ENTER: //Fallthrough\n+            case KeyEvent.KEYCODE_SPACE:\n+                //Play/Pause\n+                customKeyCode = KeyEvent.KEYCODE_MEDIA_PLAY_PAUSE;\n+                break;\n+            case KeyEvent.KEYCODE_DPAD_LEFT:\n+                //Go Back\n+                customKeyCode = KeyEvent.KEYCODE_MEDIA_REWIND;\n+                break;\n+            case KeyEvent.KEYCODE_DPAD_RIGHT:\n+                //Go Forward\n+                customKeyCode = KeyEvent.KEYCODE_MEDIA_FAST_FORWARD;\n+                break;\n+            case KeyEvent.KEYCODE_M:\n+                //Mute/Unmute", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2244dc207c9ed199077b528d26ed12d4d1a8c63d"}, "originalPosition": 61}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODQyNjY3MA==", "bodyText": "The media button receiver is not a service. I would try using a broadcast instead. I think we have a method somewhere that is called \"sendLocalBroadcast\" or something like that.", "url": "https://github.com/AntennaPod/AntennaPod/pull/4486#discussion_r498426670", "createdAt": "2020-10-01T18:06:41Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/activity/MainActivity.java", "diffHunk": "@@ -511,4 +516,61 @@ public Snackbar showSnackbarAbovePlayer(CharSequence text, int duration) {\n     public Snackbar showSnackbarAbovePlayer(int text, int duration) {\n         return showSnackbarAbovePlayer(getResources().getText(text), duration);\n     }\n+\n+    //Hardware keyboard support\n+    @Override\n+    public boolean onKeyUp(int keyCode, KeyEvent event) {\n+        Intent serviceIntent = new Intent(this, PlaybackService.class);\n+        serviceIntent.putExtra(MediaButtonReceiver.EXTRA_HARDWAREBUTTON, true);\n+\n+        AudioManager audioManager = (AudioManager) getSystemService(AUDIO_SERVICE);\n+        Integer customKeyCode = null;\n+\n+        switch (keyCode) {\n+            case KeyEvent.KEYCODE_ENTER: //Fallthrough\n+            case KeyEvent.KEYCODE_SPACE:\n+                //Play/Pause\n+                customKeyCode = KeyEvent.KEYCODE_MEDIA_PLAY_PAUSE;\n+                break;\n+            case KeyEvent.KEYCODE_DPAD_LEFT:\n+                //Go Back\n+                customKeyCode = KeyEvent.KEYCODE_MEDIA_REWIND;\n+                break;\n+            case KeyEvent.KEYCODE_DPAD_RIGHT:\n+                //Go Forward\n+                customKeyCode = KeyEvent.KEYCODE_MEDIA_FAST_FORWARD;\n+                break;\n+            case KeyEvent.KEYCODE_M:\n+                //Mute/Unmute\n+                if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) {\n+                    audioManager.adjustStreamVolume(AudioManager.STREAM_MUSIC, AudioManager.ADJUST_TOGGLE_MUTE, 0);\n+                } else {\n+                    if (audioManager.getStreamVolume(AudioManager.STREAM_MUSIC) == 0) {\n+                        //Unmute\n+                        audioManager.setStreamVolume(AudioManager.STREAM_MUSIC, audioManager.getStreamMaxVolume(AudioManager.STREAM_MUSIC), 0);\n+                    } else {\n+                        //Mute\n+                        audioManager.setStreamVolume(AudioManager.STREAM_MUSIC, 0, 0);\n+                    }\n+                }\n+                break;\n+            case KeyEvent.KEYCODE_DPAD_UP:\n+                //Raise volume\n+                audioManager.adjustStreamVolume(AudioManager.STREAM_MUSIC, AudioManager.ADJUST_RAISE, AudioManager.FLAG_SHOW_UI);\n+                break;\n+            case KeyEvent.KEYCODE_DPAD_DOWN:\n+                //Raise volume\n+                audioManager.adjustStreamVolume(AudioManager.STREAM_MUSIC, AudioManager.ADJUST_LOWER, AudioManager.FLAG_SHOW_UI);\n+                break;\n+            default:\n+                return super.onKeyUp(keyCode, event);\n+        }\n+\n+        if (customKeyCode != null) {\n+            serviceIntent.putExtra(MediaButtonReceiver.EXTRA_KEYCODE, customKeyCode);\n+            ContextCompat.startForegroundService(this, serviceIntent);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2244dc207c9ed199077b528d26ed12d4d1a8c63d"}, "originalPosition": 88}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODQyNzQwNA==", "bodyText": "For double-tapping forward and backward, we already have a nice little animation. Could you try to add it here, too?", "url": "https://github.com/AntennaPod/AntennaPod/pull/4486#discussion_r498427404", "createdAt": "2020-10-01T18:08:05Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/activity/VideoplayerActivity.java", "diffHunk": "@@ -480,4 +484,96 @@ void stop() {\n \n     }\n \n+\n+    //Hardware keyboard support\n+    @Override\n+    public boolean onKeyUp(int keyCode, KeyEvent event) {\n+        AudioManager audioManager = (AudioManager) getSystemService(AUDIO_SERVICE);\n+        Float videoPercent = null;\n+\n+        switch (keyCode) {\n+            case KeyEvent.KEYCODE_ENTER: //Fallthrough\n+            case KeyEvent.KEYCODE_SPACE:\n+                //Play/Pause\n+                onPlayPause();\n+                toggleVideoControlsVisibility();\n+                break;\n+            case KeyEvent.KEYCODE_DPAD_LEFT:\n+                //Go Back\n+                onRewind();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2244dc207c9ed199077b528d26ed12d4d1a8c63d"}, "originalPosition": 39}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4286042c28fb2104df362f79660adce2ee5e8851", "author": {"user": {"login": "asdoi", "name": null}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/4286042c28fb2104df362f79660adce2ee5e8851", "committedDate": "2020-10-01T19:06:45Z", "message": "add animations"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f3a82acba4b3a208013a66ddf1b515717b4837d3", "author": {"user": {"login": "asdoi", "name": null}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/f3a82acba4b3a208013a66ddf1b515717b4837d3", "committedDate": "2020-10-01T19:12:08Z", "message": "fix codestyle"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAwNzA5Njkx", "url": "https://github.com/AntennaPod/AntennaPod/pull/4486#pullrequestreview-500709691", "createdAt": "2020-10-01T20:53:00Z", "commit": {"oid": "f3a82acba4b3a208013a66ddf1b515717b4837d3"}, "state": "COMMENTED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQyMDo1MzowMFrOHbac3A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQyMTowNDowMVrOHbaxbg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODUwNjk3Mg==", "bodyText": "Oh, sorry. That line was pretty far away. I'm wondering if this could lead to problems. MediaButtonReceiver uses a few more arguments for the PlaybackService. Maybe it would be better to send this to MediaButtonReceiver, just like the widget does. Not 100% sure.", "url": "https://github.com/AntennaPod/AntennaPod/pull/4486#discussion_r498506972", "createdAt": "2020-10-01T20:53:00Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/activity/MainActivity.java", "diffHunk": "@@ -511,4 +516,61 @@ public Snackbar showSnackbarAbovePlayer(CharSequence text, int duration) {\n     public Snackbar showSnackbarAbovePlayer(int text, int duration) {\n         return showSnackbarAbovePlayer(getResources().getText(text), duration);\n     }\n+\n+    //Hardware keyboard support\n+    @Override\n+    public boolean onKeyUp(int keyCode, KeyEvent event) {\n+        Intent serviceIntent = new Intent(this, PlaybackService.class);\n+        serviceIntent.putExtra(MediaButtonReceiver.EXTRA_HARDWAREBUTTON, true);\n+\n+        AudioManager audioManager = (AudioManager) getSystemService(AUDIO_SERVICE);\n+        Integer customKeyCode = null;\n+\n+        switch (keyCode) {\n+            case KeyEvent.KEYCODE_ENTER: //Fallthrough\n+            case KeyEvent.KEYCODE_SPACE:\n+                //Play/Pause\n+                customKeyCode = KeyEvent.KEYCODE_MEDIA_PLAY_PAUSE;\n+                break;\n+            case KeyEvent.KEYCODE_DPAD_LEFT:\n+                //Go Back\n+                customKeyCode = KeyEvent.KEYCODE_MEDIA_REWIND;\n+                break;\n+            case KeyEvent.KEYCODE_DPAD_RIGHT:\n+                //Go Forward\n+                customKeyCode = KeyEvent.KEYCODE_MEDIA_FAST_FORWARD;\n+                break;\n+            case KeyEvent.KEYCODE_M:\n+                //Mute/Unmute\n+                if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) {\n+                    audioManager.adjustStreamVolume(AudioManager.STREAM_MUSIC, AudioManager.ADJUST_TOGGLE_MUTE, 0);\n+                } else {\n+                    if (audioManager.getStreamVolume(AudioManager.STREAM_MUSIC) == 0) {\n+                        //Unmute\n+                        audioManager.setStreamVolume(AudioManager.STREAM_MUSIC, audioManager.getStreamMaxVolume(AudioManager.STREAM_MUSIC), 0);\n+                    } else {\n+                        //Mute\n+                        audioManager.setStreamVolume(AudioManager.STREAM_MUSIC, 0, 0);\n+                    }\n+                }\n+                break;\n+            case KeyEvent.KEYCODE_DPAD_UP:\n+                //Raise volume\n+                audioManager.adjustStreamVolume(AudioManager.STREAM_MUSIC, AudioManager.ADJUST_RAISE, AudioManager.FLAG_SHOW_UI);\n+                break;\n+            case KeyEvent.KEYCODE_DPAD_DOWN:\n+                //Raise volume\n+                audioManager.adjustStreamVolume(AudioManager.STREAM_MUSIC, AudioManager.ADJUST_LOWER, AudioManager.FLAG_SHOW_UI);\n+                break;\n+            default:\n+                return super.onKeyUp(keyCode, event);\n+        }\n+\n+        if (customKeyCode != null) {\n+            serviceIntent.putExtra(MediaButtonReceiver.EXTRA_KEYCODE, customKeyCode);\n+            ContextCompat.startForegroundService(this, serviceIntent);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODQyNjY3MA=="}, "originalCommit": {"oid": "2244dc207c9ed199077b528d26ed12d4d1a8c63d"}, "originalPosition": 88}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODUwOTQxMw==", "bodyText": "The issue is only about video (and it contains things like captioning, which AntennaPod does not support).\n@alexanderadam Do you actually need muting for audio podcasts or was the table just an example?", "url": "https://github.com/AntennaPod/AntennaPod/pull/4486#discussion_r498509413", "createdAt": "2020-10-01T20:57:58Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/activity/MainActivity.java", "diffHunk": "@@ -511,4 +516,61 @@ public Snackbar showSnackbarAbovePlayer(CharSequence text, int duration) {\n     public Snackbar showSnackbarAbovePlayer(int text, int duration) {\n         return showSnackbarAbovePlayer(getResources().getText(text), duration);\n     }\n+\n+    //Hardware keyboard support\n+    @Override\n+    public boolean onKeyUp(int keyCode, KeyEvent event) {\n+        Intent serviceIntent = new Intent(this, PlaybackService.class);\n+        serviceIntent.putExtra(MediaButtonReceiver.EXTRA_HARDWAREBUTTON, true);\n+\n+        AudioManager audioManager = (AudioManager) getSystemService(AUDIO_SERVICE);\n+        Integer customKeyCode = null;\n+\n+        switch (keyCode) {\n+            case KeyEvent.KEYCODE_ENTER: //Fallthrough\n+            case KeyEvent.KEYCODE_SPACE:\n+                //Play/Pause\n+                customKeyCode = KeyEvent.KEYCODE_MEDIA_PLAY_PAUSE;\n+                break;\n+            case KeyEvent.KEYCODE_DPAD_LEFT:\n+                //Go Back\n+                customKeyCode = KeyEvent.KEYCODE_MEDIA_REWIND;\n+                break;\n+            case KeyEvent.KEYCODE_DPAD_RIGHT:\n+                //Go Forward\n+                customKeyCode = KeyEvent.KEYCODE_MEDIA_FAST_FORWARD;\n+                break;\n+            case KeyEvent.KEYCODE_M:\n+                //Mute/Unmute", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODQyNTY1OA=="}, "originalCommit": {"oid": "2244dc207c9ed199077b528d26ed12d4d1a8c63d"}, "originalPosition": 61}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODUwOTgyOQ==", "bodyText": "This could be painful for the ears. I think it would be better to only have that feature on supported Android versions and do nothing on older systems.", "url": "https://github.com/AntennaPod/AntennaPod/pull/4486#discussion_r498509829", "createdAt": "2020-10-01T20:58:51Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/activity/VideoplayerActivity.java", "diffHunk": "@@ -480,4 +484,102 @@ void stop() {\n \n     }\n \n+\n+    //Hardware keyboard support\n+    @Override\n+    public boolean onKeyUp(int keyCode, KeyEvent event) {\n+        AudioManager audioManager = (AudioManager) getSystemService(AUDIO_SERVICE);\n+        Float videoPercent = null;\n+\n+        switch (keyCode) {\n+            case KeyEvent.KEYCODE_ENTER: //Fallthrough\n+            case KeyEvent.KEYCODE_SPACE:\n+                //Play/Pause\n+                onPlayPause();\n+                toggleVideoControlsVisibility();\n+                break;\n+            case KeyEvent.KEYCODE_DPAD_LEFT:\n+                //Go Back\n+                onRewind();\n+                showSkipAnimation(false);\n+                break;\n+            case KeyEvent.KEYCODE_DPAD_RIGHT:\n+                //Go Forward\n+                onFastForward();\n+                showSkipAnimation(true);\n+                break;\n+            case KeyEvent.KEYCODE_M:\n+                //Mute/Unmute\n+                if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) {\n+                    audioManager.adjustStreamVolume(AudioManager.STREAM_MUSIC, AudioManager.ADJUST_TOGGLE_MUTE, 0);\n+                } else {\n+                    if (audioManager.getStreamVolume(AudioManager.STREAM_MUSIC) == 0) {\n+                        //Unmute\n+                        audioManager.setStreamVolume(AudioManager.STREAM_MUSIC,\n+                                audioManager.getStreamMaxVolume(AudioManager.STREAM_MUSIC), 0);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f3a82acba4b3a208013a66ddf1b515717b4837d3"}, "originalPosition": 55}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODUxMDk2Ng==", "bodyText": "This looks a bit strange. Doesn't Android have key bindings for going back, anyway?", "url": "https://github.com/AntennaPod/AntennaPod/pull/4486#discussion_r498510966", "createdAt": "2020-10-01T21:01:11Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/activity/VideoplayerActivity.java", "diffHunk": "@@ -480,4 +484,102 @@ void stop() {\n \n     }\n \n+\n+    //Hardware keyboard support\n+    @Override\n+    public boolean onKeyUp(int keyCode, KeyEvent event) {\n+        AudioManager audioManager = (AudioManager) getSystemService(AUDIO_SERVICE);\n+        Float videoPercent = null;\n+\n+        switch (keyCode) {\n+            case KeyEvent.KEYCODE_ENTER: //Fallthrough\n+            case KeyEvent.KEYCODE_SPACE:\n+                //Play/Pause\n+                onPlayPause();\n+                toggleVideoControlsVisibility();\n+                break;\n+            case KeyEvent.KEYCODE_DPAD_LEFT:\n+                //Go Back\n+                onRewind();\n+                showSkipAnimation(false);\n+                break;\n+            case KeyEvent.KEYCODE_DPAD_RIGHT:\n+                //Go Forward\n+                onFastForward();\n+                showSkipAnimation(true);\n+                break;\n+            case KeyEvent.KEYCODE_M:\n+                //Mute/Unmute\n+                if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) {\n+                    audioManager.adjustStreamVolume(AudioManager.STREAM_MUSIC, AudioManager.ADJUST_TOGGLE_MUTE, 0);\n+                } else {\n+                    if (audioManager.getStreamVolume(AudioManager.STREAM_MUSIC) == 0) {\n+                        //Unmute\n+                        audioManager.setStreamVolume(AudioManager.STREAM_MUSIC,\n+                                audioManager.getStreamMaxVolume(AudioManager.STREAM_MUSIC), 0);\n+                    } else {\n+                        //Mute\n+                        audioManager.setStreamVolume(AudioManager.STREAM_MUSIC, 0, 0);\n+                    }\n+                }\n+                break;\n+            case KeyEvent.KEYCODE_DPAD_UP:\n+                //Raise volume\n+                audioManager.adjustStreamVolume(AudioManager.STREAM_MUSIC,\n+                        AudioManager.ADJUST_RAISE, AudioManager.FLAG_SHOW_UI);\n+                break;\n+            case KeyEvent.KEYCODE_DPAD_DOWN:\n+                //Raise volume\n+                audioManager.adjustStreamVolume(AudioManager.STREAM_MUSIC,\n+                        AudioManager.ADJUST_LOWER, AudioManager.FLAG_SHOW_UI);\n+                break;\n+            case KeyEvent.KEYCODE_ESCAPE:\n+            case KeyEvent.KEYCODE_F:\n+                //Exit fullscreen mode\n+                onOptionsItemSelected(new ActionMenuItem(this, 0, android.R.id.home, 0, 0, \"\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f3a82acba4b3a208013a66ddf1b515717b4837d3"}, "originalPosition": 75}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODUxMTcxNw==", "bodyText": "I think this could lead to problems. If AntennaPod swallows key events, standard system keys could no longer work (things like copy-paste?)", "url": "https://github.com/AntennaPod/AntennaPod/pull/4486#discussion_r498511717", "createdAt": "2020-10-01T21:02:47Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/activity/VideoplayerActivity.java", "diffHunk": "@@ -480,4 +484,102 @@ void stop() {\n \n     }\n \n+\n+    //Hardware keyboard support\n+    @Override\n+    public boolean onKeyUp(int keyCode, KeyEvent event) {\n+        AudioManager audioManager = (AudioManager) getSystemService(AUDIO_SERVICE);\n+        Float videoPercent = null;\n+\n+        switch (keyCode) {\n+            case KeyEvent.KEYCODE_ENTER: //Fallthrough\n+            case KeyEvent.KEYCODE_SPACE:\n+                //Play/Pause\n+                onPlayPause();\n+                toggleVideoControlsVisibility();\n+                break;\n+            case KeyEvent.KEYCODE_DPAD_LEFT:\n+                //Go Back\n+                onRewind();\n+                showSkipAnimation(false);\n+                break;\n+            case KeyEvent.KEYCODE_DPAD_RIGHT:\n+                //Go Forward\n+                onFastForward();\n+                showSkipAnimation(true);\n+                break;\n+            case KeyEvent.KEYCODE_M:\n+                //Mute/Unmute\n+                if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) {\n+                    audioManager.adjustStreamVolume(AudioManager.STREAM_MUSIC, AudioManager.ADJUST_TOGGLE_MUTE, 0);\n+                } else {\n+                    if (audioManager.getStreamVolume(AudioManager.STREAM_MUSIC) == 0) {\n+                        //Unmute\n+                        audioManager.setStreamVolume(AudioManager.STREAM_MUSIC,\n+                                audioManager.getStreamMaxVolume(AudioManager.STREAM_MUSIC), 0);\n+                    } else {\n+                        //Mute\n+                        audioManager.setStreamVolume(AudioManager.STREAM_MUSIC, 0, 0);\n+                    }\n+                }\n+                break;\n+            case KeyEvent.KEYCODE_DPAD_UP:\n+                //Raise volume\n+                audioManager.adjustStreamVolume(AudioManager.STREAM_MUSIC,\n+                        AudioManager.ADJUST_RAISE, AudioManager.FLAG_SHOW_UI);\n+                break;\n+            case KeyEvent.KEYCODE_DPAD_DOWN:\n+                //Raise volume\n+                audioManager.adjustStreamVolume(AudioManager.STREAM_MUSIC,\n+                        AudioManager.ADJUST_LOWER, AudioManager.FLAG_SHOW_UI);\n+                break;\n+            case KeyEvent.KEYCODE_ESCAPE:\n+            case KeyEvent.KEYCODE_F:\n+                //Exit fullscreen mode\n+                onOptionsItemSelected(new ActionMenuItem(this, 0, android.R.id.home, 0, 0, \"\"));\n+                break;\n+            case KeyEvent.KEYCODE_P:\n+                //Toggle picture-in-picture mode\n+                compatEnterPictureInPicture();\n+                break;\n+            //Go to x% of video:\n+            case KeyEvent.KEYCODE_0:\n+                videoPercent = 0f;\n+                break;\n+            case KeyEvent.KEYCODE_1:\n+                videoPercent = 0.1f;\n+                break;\n+            case KeyEvent.KEYCODE_2:\n+                videoPercent = 0.2f;\n+                break;\n+            case KeyEvent.KEYCODE_3:\n+                videoPercent = 0.3f;\n+                break;\n+            case KeyEvent.KEYCODE_4:\n+                videoPercent = 0.4f;\n+                break;\n+            case KeyEvent.KEYCODE_5:\n+                videoPercent = 0.5f;\n+                break;\n+            case KeyEvent.KEYCODE_6:\n+                videoPercent = 0.6f;\n+                break;\n+            case KeyEvent.KEYCODE_7:\n+                videoPercent = 0.7f;\n+                break;\n+            case KeyEvent.KEYCODE_8:\n+                videoPercent = 0.8f;\n+                break;\n+            case KeyEvent.KEYCODE_9:\n+                videoPercent = 0.9f;\n+                break;\n+            default:\n+                return super.onKeyUp(keyCode, event);\n+        }\n+\n+        if (videoPercent != null) {\n+            controller.seekTo((int) (videoPercent * controller.getDuration()));\n+        }\n+        return true;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f3a82acba4b3a208013a66ddf1b515717b4837d3"}, "originalPosition": 119}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODUxMjIzOA==", "bodyText": "Does this conflict with navigating the app using a dpad? (related: #445)", "url": "https://github.com/AntennaPod/AntennaPod/pull/4486#discussion_r498512238", "createdAt": "2020-10-01T21:04:01Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/activity/MainActivity.java", "diffHunk": "@@ -511,4 +516,64 @@ public Snackbar showSnackbarAbovePlayer(CharSequence text, int duration) {\n     public Snackbar showSnackbarAbovePlayer(int text, int duration) {\n         return showSnackbarAbovePlayer(getResources().getText(text), duration);\n     }\n+\n+    //Hardware keyboard support\n+    @Override\n+    public boolean onKeyUp(int keyCode, KeyEvent event) {\n+        Intent serviceIntent = new Intent(this, PlaybackService.class);\n+        serviceIntent.putExtra(MediaButtonReceiver.EXTRA_HARDWAREBUTTON, true);\n+\n+        AudioManager audioManager = (AudioManager) getSystemService(AUDIO_SERVICE);\n+        Integer customKeyCode = null;\n+\n+        switch (keyCode) {\n+            case KeyEvent.KEYCODE_ENTER: //Fallthrough\n+            case KeyEvent.KEYCODE_SPACE:\n+                //Play/Pause\n+                customKeyCode = KeyEvent.KEYCODE_MEDIA_PLAY_PAUSE;\n+                break;\n+            case KeyEvent.KEYCODE_DPAD_LEFT:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f3a82acba4b3a208013a66ddf1b515717b4837d3"}, "originalPosition": 52}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c5f1dd55957ae822211c2ee077957ff68c06a39c", "author": {"user": {"login": "asdoi", "name": null}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/c5f1dd55957ae822211c2ee077957ff68c06a39c", "committedDate": "2020-10-02T14:39:11Z", "message": "remove mute from MainActivity"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0978cce38b0d6785a0c6118d841d8a4bdd7e8573", "author": {"user": {"login": "asdoi", "name": null}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/0978cce38b0d6785a0c6118d841d8a4bdd7e8573", "committedDate": "2020-10-02T14:55:52Z", "message": "move intent to if clause"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAxMjM2NzI1", "url": "https://github.com/AntennaPod/AntennaPod/pull/4486#pullrequestreview-501236725", "createdAt": "2020-10-02T15:30:08Z", "commit": {"oid": "0978cce38b0d6785a0c6118d841d8a4bdd7e8573"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQxNTozMDowOFrOHbyFFQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQxNTozODo1NlrOHbyYUg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODg5NDEwMQ==", "bodyText": "Hmm. Then this mapping could cause issues with devices that do not have a touch screen (eg. Android TV). I would rather use a key mapping that does not interfere with navigation.", "url": "https://github.com/AntennaPod/AntennaPod/pull/4486#discussion_r498894101", "createdAt": "2020-10-02T15:30:08Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/activity/MainActivity.java", "diffHunk": "@@ -511,4 +516,64 @@ public Snackbar showSnackbarAbovePlayer(CharSequence text, int duration) {\n     public Snackbar showSnackbarAbovePlayer(int text, int duration) {\n         return showSnackbarAbovePlayer(getResources().getText(text), duration);\n     }\n+\n+    //Hardware keyboard support\n+    @Override\n+    public boolean onKeyUp(int keyCode, KeyEvent event) {\n+        Intent serviceIntent = new Intent(this, PlaybackService.class);\n+        serviceIntent.putExtra(MediaButtonReceiver.EXTRA_HARDWAREBUTTON, true);\n+\n+        AudioManager audioManager = (AudioManager) getSystemService(AUDIO_SERVICE);\n+        Integer customKeyCode = null;\n+\n+        switch (keyCode) {\n+            case KeyEvent.KEYCODE_ENTER: //Fallthrough\n+            case KeyEvent.KEYCODE_SPACE:\n+                //Play/Pause\n+                customKeyCode = KeyEvent.KEYCODE_MEDIA_PLAY_PAUSE;\n+                break;\n+            case KeyEvent.KEYCODE_DPAD_LEFT:", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODUxMjIzOA=="}, "originalCommit": {"oid": "f3a82acba4b3a208013a66ddf1b515717b4837d3"}, "originalPosition": 52}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODg5NDk3OQ==", "bodyText": "Does the \"forward button skips\" preference influence the behavior of the key bindings? If I recall correctly, that was somehow related to the hardwarebutton extra.", "url": "https://github.com/AntennaPod/AntennaPod/pull/4486#discussion_r498894979", "createdAt": "2020-10-02T15:31:39Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/activity/MainActivity.java", "diffHunk": "@@ -511,4 +516,48 @@ public Snackbar showSnackbarAbovePlayer(CharSequence text, int duration) {\n     public Snackbar showSnackbarAbovePlayer(int text, int duration) {\n         return showSnackbarAbovePlayer(getResources().getText(text), duration);\n     }\n+\n+    //Hardware keyboard support\n+    @Override\n+    public boolean onKeyUp(int keyCode, KeyEvent event) {\n+        AudioManager audioManager = (AudioManager) getSystemService(AUDIO_SERVICE);\n+        Integer customKeyCode = null;\n+\n+        switch (keyCode) {\n+            case KeyEvent.KEYCODE_ENTER: //Fallthrough\n+            case KeyEvent.KEYCODE_SPACE:\n+                //Play/Pause\n+                customKeyCode = KeyEvent.KEYCODE_MEDIA_PLAY_PAUSE;\n+                break;\n+            case KeyEvent.KEYCODE_DPAD_LEFT:\n+                //Go Back\n+                customKeyCode = KeyEvent.KEYCODE_MEDIA_REWIND;\n+                break;\n+            case KeyEvent.KEYCODE_DPAD_RIGHT:\n+                //Go Forward\n+                customKeyCode = KeyEvent.KEYCODE_MEDIA_FAST_FORWARD;\n+                break;\n+            case KeyEvent.KEYCODE_DPAD_UP:\n+                //Raise volume\n+                audioManager.adjustStreamVolume(AudioManager.STREAM_MUSIC,\n+                        AudioManager.ADJUST_RAISE, AudioManager.FLAG_SHOW_UI);\n+                break;\n+            case KeyEvent.KEYCODE_DPAD_DOWN:\n+                //Raise volume\n+                audioManager.adjustStreamVolume(AudioManager.STREAM_MUSIC,\n+                        AudioManager.ADJUST_LOWER, AudioManager.FLAG_SHOW_UI);\n+                break;\n+            default:\n+                return super.onKeyUp(keyCode, event);\n+        }\n+\n+        if (customKeyCode != null) {\n+            Intent intent = new Intent(this, PlaybackService.class);\n+            intent.putExtra(MediaButtonReceiver.EXTRA_HARDWAREBUTTON, true);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0978cce38b0d6785a0c6118d841d8a4bdd7e8573"}, "originalPosition": 73}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODg5OTAyNg==", "bodyText": "I would also remove the mute part. Could be confusing otherwise.", "url": "https://github.com/AntennaPod/AntennaPod/pull/4486#discussion_r498899026", "createdAt": "2020-10-02T15:38:56Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/activity/VideoplayerActivity.java", "diffHunk": "@@ -480,4 +484,98 @@ void stop() {\n \n     }\n \n+\n+    //Hardware keyboard support\n+    @Override\n+    public boolean onKeyUp(int keyCode, KeyEvent event) {\n+        AudioManager audioManager = (AudioManager) getSystemService(AUDIO_SERVICE);\n+        Float videoPercent = null;\n+\n+        switch (keyCode) {\n+            case KeyEvent.KEYCODE_ENTER: //Fallthrough\n+            case KeyEvent.KEYCODE_SPACE:\n+                //Play/Pause\n+                onPlayPause();\n+                toggleVideoControlsVisibility();\n+                break;\n+            case KeyEvent.KEYCODE_DPAD_LEFT:\n+                //Go Back\n+                onRewind();\n+                showSkipAnimation(false);\n+                break;\n+            case KeyEvent.KEYCODE_DPAD_RIGHT:\n+                //Go Forward\n+                onFastForward();\n+                showSkipAnimation(true);\n+                break;\n+            case KeyEvent.KEYCODE_M:\n+                //Mute/Unmute\n+                if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) {\n+                    audioManager.adjustStreamVolume(AudioManager.STREAM_MUSIC, AudioManager.ADJUST_TOGGLE_MUTE, 0);\n+                } else {\n+                    if (audioManager.getStreamVolume(AudioManager.STREAM_MUSIC) > 0) {\n+                        //Mute\n+                        audioManager.setStreamVolume(AudioManager.STREAM_MUSIC, 0, 0);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0978cce38b0d6785a0c6118d841d8a4bdd7e8573"}, "originalPosition": 54}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2f1e856b4ac72fb237f4a9e0a774f6c0d9770ef0", "author": {"user": {"login": "asdoi", "name": null}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/2f1e856b4ac72fb237f4a9e0a774f6c0d9770ef0", "committedDate": "2020-10-02T18:32:46Z", "message": "mute only on api > 23"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f1c01893174d486fede5cf8566a45d769534cf28", "author": {"user": {"login": "asdoi", "name": null}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/f1c01893174d486fede5cf8566a45d769534cf28", "committedDate": "2020-10-02T18:33:23Z", "message": "mute only on api > 23"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "33a048ba7fd8d17440937f3efc2e6ec71be875d2", "author": {"user": {"login": "asdoi", "name": null}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/33a048ba7fd8d17440937f3efc2e6ec71be875d2", "committedDate": "2020-10-02T18:41:40Z", "message": "remove HardwareButton"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAxNDQwNzMz", "url": "https://github.com/AntennaPod/AntennaPod/pull/4486#pullrequestreview-501440733", "createdAt": "2020-10-02T20:52:37Z", "commit": {"oid": "33a048ba7fd8d17440937f3efc2e6ec71be875d2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQyMDo1MjozN1rOHb7TXg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQyMDo1MjozN1rOHb7TXg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTA0NTIxNA==", "bodyText": "Something like the following would make the code shorter and also allows to remove the variable videoPercent. I think having super.onKeyUp(keyCode, event) in the end of the method would also make it easier to see that the method still calls the system method.\nThis is a pretty common pattern when converting chars in c/c++, so I guess it should be okay to understand (even if it is a bit less self-explanatory than your version).\nif (keyCode >= KeyEvent.KEYCODE_0 && keyCode <= KeyEvent.KEYCODE_9) {\n    controller.seekTo((int) (0.1f * (keyCode - KeyEvent.KEYCODE_0) * controller.getDuration()));\n    return true;\n}", "url": "https://github.com/AntennaPod/AntennaPod/pull/4486#discussion_r499045214", "createdAt": "2020-10-02T20:52:37Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/activity/VideoplayerActivity.java", "diffHunk": "@@ -480,4 +484,95 @@ void stop() {\n \n     }\n \n+\n+    //Hardware keyboard support\n+    @Override\n+    public boolean onKeyUp(int keyCode, KeyEvent event) {\n+        AudioManager audioManager = (AudioManager) getSystemService(AUDIO_SERVICE);\n+        Float videoPercent = null;\n+\n+        switch (keyCode) {\n+            case KeyEvent.KEYCODE_ENTER: //Fallthrough\n+            case KeyEvent.KEYCODE_SPACE:\n+                //Play/Pause\n+                onPlayPause();\n+                toggleVideoControlsVisibility();\n+                break;\n+            case KeyEvent.KEYCODE_DPAD_LEFT:\n+                //Go Back\n+                onRewind();\n+                showSkipAnimation(false);\n+                break;\n+            case KeyEvent.KEYCODE_DPAD_RIGHT:\n+                //Go Forward\n+                onFastForward();\n+                showSkipAnimation(true);\n+                break;\n+            case KeyEvent.KEYCODE_M:\n+                //Mute/Unmute\n+                if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) {\n+                    audioManager.adjustStreamVolume(AudioManager.STREAM_MUSIC, AudioManager.ADJUST_TOGGLE_MUTE, 0);\n+                } else {\n+                    return super.onKeyUp(keyCode, event);\n+                }\n+                break;\n+            case KeyEvent.KEYCODE_DPAD_UP:\n+                //Raise volume\n+                audioManager.adjustStreamVolume(AudioManager.STREAM_MUSIC,\n+                        AudioManager.ADJUST_RAISE, AudioManager.FLAG_SHOW_UI);\n+                break;\n+            case KeyEvent.KEYCODE_DPAD_DOWN:\n+                //Raise volume\n+                audioManager.adjustStreamVolume(AudioManager.STREAM_MUSIC,\n+                        AudioManager.ADJUST_LOWER, AudioManager.FLAG_SHOW_UI);\n+                break;\n+            case KeyEvent.KEYCODE_ESCAPE:\n+            case KeyEvent.KEYCODE_F:\n+                //Exit fullscreen mode\n+                onBackPressed();\n+                break;\n+            case KeyEvent.KEYCODE_P:\n+                //Toggle picture-in-picture mode\n+                compatEnterPictureInPicture();\n+                break;\n+            //Go to x% of video:\n+            case KeyEvent.KEYCODE_0:\n+                videoPercent = 0f;\n+                break;\n+            case KeyEvent.KEYCODE_1:\n+                videoPercent = 0.1f;\n+                break;\n+            case KeyEvent.KEYCODE_2:\n+                videoPercent = 0.2f;\n+                break;\n+            case KeyEvent.KEYCODE_3:\n+                videoPercent = 0.3f;\n+                break;\n+            case KeyEvent.KEYCODE_4:\n+                videoPercent = 0.4f;\n+                break;\n+            case KeyEvent.KEYCODE_5:\n+                videoPercent = 0.5f;\n+                break;\n+            case KeyEvent.KEYCODE_6:\n+                videoPercent = 0.6f;\n+                break;\n+            case KeyEvent.KEYCODE_7:\n+                videoPercent = 0.7f;\n+                break;\n+            case KeyEvent.KEYCODE_8:\n+                videoPercent = 0.8f;\n+                break;\n+            case KeyEvent.KEYCODE_9:\n+                videoPercent = 0.9f;\n+                break;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "33a048ba7fd8d17440937f3efc2e6ec71be875d2"}, "originalPosition": 104}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "84b6387bc2f14f8eb010e887d899092caf68f841", "author": {"user": {"login": "asdoi", "name": null}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/84b6387bc2f14f8eb010e887d899092caf68f841", "committedDate": "2020-10-02T21:09:05Z", "message": "add return super.onKeyUp() to the bottom"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c9fa719705ba1066e7504c8226eedf181f81b254", "author": {"user": {"login": "asdoi", "name": null}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/c9fa719705ba1066e7504c8226eedf181f81b254", "committedDate": "2020-10-14T15:42:44Z", "message": "update shortcuts"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA4NjQzODc2", "url": "https://github.com/AntennaPod/AntennaPod/pull/4486#pullrequestreview-508643876", "createdAt": "2020-10-14T19:03:10Z", "commit": {"oid": "c9fa719705ba1066e7504c8226eedf181f81b254"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxOTowMzoxMFrOHhhCPw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxOTowMzoyN1rOHhhC2w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDkwNjMwMw==", "bodyText": "Could you please add AudioManager.FLAG_SHOW_UI here, too?", "url": "https://github.com/AntennaPod/AntennaPod/pull/4486#discussion_r504906303", "createdAt": "2020-10-14T19:03:10Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/activity/VideoplayerActivity.java", "diffHunk": "@@ -480,4 +484,68 @@ void stop() {\n \n     }\n \n+\n+    //Hardware keyboard support\n+    @Override\n+    public boolean onKeyUp(int keyCode, KeyEvent event) {\n+        AudioManager audioManager = (AudioManager) getSystemService(AUDIO_SERVICE);\n+\n+        switch (keyCode) {\n+            case KeyEvent.KEYCODE_P: //Fallthrough\n+            case KeyEvent.KEYCODE_SPACE:\n+                //Play/Pause\n+                onPlayPause();\n+                toggleVideoControlsVisibility();\n+                return true;\n+            case KeyEvent.KEYCODE_J: //Fallthrough\n+            case KeyEvent.KEYCODE_A:\n+            case KeyEvent.KEYCODE_COMMA:\n+                //Go Back\n+                onRewind();\n+                showSkipAnimation(false);\n+                return true;\n+            case KeyEvent.KEYCODE_K: //Fallthrough\n+            case KeyEvent.KEYCODE_D:\n+            case KeyEvent.KEYCODE_PERIOD:\n+                //Go Forward\n+                onFastForward();\n+                showSkipAnimation(true);\n+                return true;\n+            case KeyEvent.KEYCODE_F:\n+            case KeyEvent.KEYCODE_ESCAPE:\n+                //Exit fullscreen mode\n+                onBackPressed();\n+                return true;\n+            case KeyEvent.KEYCODE_I:\n+                //Toggle picture-in-picture mode\n+                compatEnterPictureInPicture();\n+                return true;\n+            case KeyEvent.KEYCODE_PLUS: //Fallthrough\n+            case KeyEvent.KEYCODE_W:\n+                //Raise volume\n+                audioManager.adjustStreamVolume(AudioManager.STREAM_MUSIC,\n+                        AudioManager.ADJUST_RAISE, AudioManager.FLAG_SHOW_UI);\n+                return true;\n+            case KeyEvent.KEYCODE_MINUS: //Fallthrough\n+            case KeyEvent.KEYCODE_S:\n+                //Raise volume\n+                audioManager.adjustStreamVolume(AudioManager.STREAM_MUSIC,\n+                        AudioManager.ADJUST_LOWER, AudioManager.FLAG_SHOW_UI);\n+                return true;\n+            case KeyEvent.KEYCODE_M:\n+                //Mute/Unmute\n+                if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) {\n+                    audioManager.adjustStreamVolume(AudioManager.STREAM_MUSIC, AudioManager.ADJUST_TOGGLE_MUTE, 0);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c9fa719705ba1066e7504c8226eedf181f81b254"}, "originalPosition": 74}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDkwNjQ1OQ==", "bodyText": "Checkstyle complains that there is no default case.", "url": "https://github.com/AntennaPod/AntennaPod/pull/4486#discussion_r504906459", "createdAt": "2020-10-14T19:03:27Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/activity/VideoplayerActivity.java", "diffHunk": "@@ -480,4 +484,68 @@ void stop() {\n \n     }\n \n+\n+    //Hardware keyboard support\n+    @Override\n+    public boolean onKeyUp(int keyCode, KeyEvent event) {\n+        AudioManager audioManager = (AudioManager) getSystemService(AUDIO_SERVICE);\n+\n+        switch (keyCode) {\n+            case KeyEvent.KEYCODE_P: //Fallthrough\n+            case KeyEvent.KEYCODE_SPACE:\n+                //Play/Pause\n+                onPlayPause();\n+                toggleVideoControlsVisibility();\n+                return true;\n+            case KeyEvent.KEYCODE_J: //Fallthrough\n+            case KeyEvent.KEYCODE_A:\n+            case KeyEvent.KEYCODE_COMMA:\n+                //Go Back\n+                onRewind();\n+                showSkipAnimation(false);\n+                return true;\n+            case KeyEvent.KEYCODE_K: //Fallthrough\n+            case KeyEvent.KEYCODE_D:\n+            case KeyEvent.KEYCODE_PERIOD:\n+                //Go Forward\n+                onFastForward();\n+                showSkipAnimation(true);\n+                return true;\n+            case KeyEvent.KEYCODE_F:\n+            case KeyEvent.KEYCODE_ESCAPE:\n+                //Exit fullscreen mode\n+                onBackPressed();\n+                return true;\n+            case KeyEvent.KEYCODE_I:\n+                //Toggle picture-in-picture mode\n+                compatEnterPictureInPicture();\n+                return true;\n+            case KeyEvent.KEYCODE_PLUS: //Fallthrough\n+            case KeyEvent.KEYCODE_W:\n+                //Raise volume\n+                audioManager.adjustStreamVolume(AudioManager.STREAM_MUSIC,\n+                        AudioManager.ADJUST_RAISE, AudioManager.FLAG_SHOW_UI);\n+                return true;\n+            case KeyEvent.KEYCODE_MINUS: //Fallthrough\n+            case KeyEvent.KEYCODE_S:\n+                //Raise volume\n+                audioManager.adjustStreamVolume(AudioManager.STREAM_MUSIC,\n+                        AudioManager.ADJUST_LOWER, AudioManager.FLAG_SHOW_UI);\n+                return true;\n+            case KeyEvent.KEYCODE_M:\n+                //Mute/Unmute\n+                if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) {\n+                    audioManager.adjustStreamVolume(AudioManager.STREAM_MUSIC, AudioManager.ADJUST_TOGGLE_MUTE, 0);\n+                    return true;\n+                }\n+                break;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c9fa719705ba1066e7504c8226eedf181f81b254"}, "originalPosition": 77}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7b9ede3d9adc0045d27a1890f83c54424b69f24a", "author": {"user": {"login": "asdoi", "name": null}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/7b9ede3d9adc0045d27a1890f83c54424b69f24a", "committedDate": "2020-10-15T15:10:09Z", "message": "show ui on mute"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA5NjAyNTY1", "url": "https://github.com/AntennaPod/AntennaPod/pull/4486#pullrequestreview-509602565", "createdAt": "2020-10-15T17:18:29Z", "commit": {"oid": "7b9ede3d9adc0045d27a1890f83c54424b69f24a"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQxNzoxODoyOVrOHiSHqA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQxNzozMDoxMlrOHiSiKQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTcxMDUwNA==", "bodyText": "This should be lowering ;)\nActually, I would suggest to just remove the comments explaining what is done. I think it's pretty obvious what the code does and it is always just a single line. Comments that basically just repeat the code make the code harder to read (more information readers needs to process).\nComments like Fallthrough explain things that developers need to have an eye on. The comment Go to x% of video is also fine because when looking at the code, it could take a second to get what it does. In contrast, a comment like Toggle picture-in-picture mode immediately followed compatEnterPictureInPicture(); does not really add value, in my opinion.", "url": "https://github.com/AntennaPod/AntennaPod/pull/4486#discussion_r505710504", "createdAt": "2020-10-15T17:18:29Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/activity/MainActivity.java", "diffHunk": "@@ -511,4 +516,58 @@ public Snackbar showSnackbarAbovePlayer(CharSequence text, int duration) {\n     public Snackbar showSnackbarAbovePlayer(int text, int duration) {\n         return showSnackbarAbovePlayer(getResources().getText(text), duration);\n     }\n+\n+    //Hardware keyboard support\n+    @Override\n+    public boolean onKeyUp(int keyCode, KeyEvent event) {\n+        AudioManager audioManager = (AudioManager) getSystemService(AUDIO_SERVICE);\n+        Integer customKeyCode = null;\n+\n+        switch (keyCode) {\n+            case KeyEvent.KEYCODE_P:\n+                //Play/Pause\n+                customKeyCode = KeyEvent.KEYCODE_MEDIA_PLAY_PAUSE;\n+                break;\n+            case KeyEvent.KEYCODE_J: //Fallthrough\n+            case KeyEvent.KEYCODE_A:\n+            case KeyEvent.KEYCODE_COMMA:\n+                //Go Back\n+                customKeyCode = KeyEvent.KEYCODE_MEDIA_REWIND;\n+                break;\n+            case KeyEvent.KEYCODE_K: //Fallthrough\n+            case KeyEvent.KEYCODE_D:\n+            case KeyEvent.KEYCODE_PERIOD:\n+                //Go Forward\n+                customKeyCode = KeyEvent.KEYCODE_MEDIA_FAST_FORWARD;\n+                break;\n+            case KeyEvent.KEYCODE_PLUS: //Fallthrough\n+            case KeyEvent.KEYCODE_W:\n+                //Raise volume\n+                audioManager.adjustStreamVolume(AudioManager.STREAM_MUSIC,\n+                        AudioManager.ADJUST_RAISE, AudioManager.FLAG_SHOW_UI);\n+                return true;\n+            case KeyEvent.KEYCODE_MINUS: //Fallthrough\n+            case KeyEvent.KEYCODE_S:\n+                //Raise volume", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b9ede3d9adc0045d27a1890f83c54424b69f24a"}, "originalPosition": 68}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTcxMDgyMQ==", "bodyText": "Fallthrough comment missing :)", "url": "https://github.com/AntennaPod/AntennaPod/pull/4486#discussion_r505710821", "createdAt": "2020-10-15T17:19:03Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/activity/VideoplayerActivity.java", "diffHunk": "@@ -480,4 +484,68 @@ void stop() {\n \n     }\n \n+\n+    //Hardware keyboard support\n+    @Override\n+    public boolean onKeyUp(int keyCode, KeyEvent event) {\n+        AudioManager audioManager = (AudioManager) getSystemService(AUDIO_SERVICE);\n+\n+        switch (keyCode) {\n+            case KeyEvent.KEYCODE_P: //Fallthrough\n+            case KeyEvent.KEYCODE_SPACE:\n+                //Play/Pause\n+                onPlayPause();\n+                toggleVideoControlsVisibility();\n+                return true;\n+            case KeyEvent.KEYCODE_J: //Fallthrough\n+            case KeyEvent.KEYCODE_A:\n+            case KeyEvent.KEYCODE_COMMA:\n+                //Go Back\n+                onRewind();\n+                showSkipAnimation(false);\n+                return true;\n+            case KeyEvent.KEYCODE_K: //Fallthrough\n+            case KeyEvent.KEYCODE_D:\n+            case KeyEvent.KEYCODE_PERIOD:\n+                //Go Forward\n+                onFastForward();\n+                showSkipAnimation(true);\n+                return true;\n+            case KeyEvent.KEYCODE_F:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b9ede3d9adc0045d27a1890f83c54424b69f24a"}, "originalPosition": 50}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTcxNzI4OQ==", "bodyText": "Okay, I can merge it as-is (even though merging things with failing tests shows scary warnings :P)", "url": "https://github.com/AntennaPod/AntennaPod/pull/4486#discussion_r505717289", "createdAt": "2020-10-15T17:30:12Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/activity/VideoplayerActivity.java", "diffHunk": "@@ -480,4 +484,68 @@ void stop() {\n \n     }\n \n+\n+    //Hardware keyboard support\n+    @Override\n+    public boolean onKeyUp(int keyCode, KeyEvent event) {\n+        AudioManager audioManager = (AudioManager) getSystemService(AUDIO_SERVICE);\n+\n+        switch (keyCode) {\n+            case KeyEvent.KEYCODE_P: //Fallthrough\n+            case KeyEvent.KEYCODE_SPACE:\n+                //Play/Pause\n+                onPlayPause();\n+                toggleVideoControlsVisibility();\n+                return true;\n+            case KeyEvent.KEYCODE_J: //Fallthrough\n+            case KeyEvent.KEYCODE_A:\n+            case KeyEvent.KEYCODE_COMMA:\n+                //Go Back\n+                onRewind();\n+                showSkipAnimation(false);\n+                return true;\n+            case KeyEvent.KEYCODE_K: //Fallthrough\n+            case KeyEvent.KEYCODE_D:\n+            case KeyEvent.KEYCODE_PERIOD:\n+                //Go Forward\n+                onFastForward();\n+                showSkipAnimation(true);\n+                return true;\n+            case KeyEvent.KEYCODE_F:\n+            case KeyEvent.KEYCODE_ESCAPE:\n+                //Exit fullscreen mode\n+                onBackPressed();\n+                return true;\n+            case KeyEvent.KEYCODE_I:\n+                //Toggle picture-in-picture mode\n+                compatEnterPictureInPicture();\n+                return true;\n+            case KeyEvent.KEYCODE_PLUS: //Fallthrough\n+            case KeyEvent.KEYCODE_W:\n+                //Raise volume\n+                audioManager.adjustStreamVolume(AudioManager.STREAM_MUSIC,\n+                        AudioManager.ADJUST_RAISE, AudioManager.FLAG_SHOW_UI);\n+                return true;\n+            case KeyEvent.KEYCODE_MINUS: //Fallthrough\n+            case KeyEvent.KEYCODE_S:\n+                //Raise volume\n+                audioManager.adjustStreamVolume(AudioManager.STREAM_MUSIC,\n+                        AudioManager.ADJUST_LOWER, AudioManager.FLAG_SHOW_UI);\n+                return true;\n+            case KeyEvent.KEYCODE_M:\n+                //Mute/Unmute\n+                if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) {\n+                    audioManager.adjustStreamVolume(AudioManager.STREAM_MUSIC, AudioManager.ADJUST_TOGGLE_MUTE, 0);\n+                    return true;\n+                }\n+                break;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDkwNjQ1OQ=="}, "originalCommit": {"oid": "c9fa719705ba1066e7504c8226eedf181f81b254"}, "originalPosition": 77}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3893bf6cf3a4c8e2af407b2742d216a66170d173", "author": {"user": {"login": "asdoi", "name": null}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/3893bf6cf3a4c8e2af407b2742d216a66170d173", "committedDate": "2020-10-15T17:56:17Z", "message": "update comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA5NzY0NjY2", "url": "https://github.com/AntennaPod/AntennaPod/pull/4486#pullrequestreview-509764666", "createdAt": "2020-10-15T20:16:23Z", "commit": {"oid": "3893bf6cf3a4c8e2af407b2742d216a66170d173"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQyMDoxNjoyNFrOHiYXBg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQyMDoxNjoyNFrOHiYXBg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTgxMjc0Mg==", "bodyText": "Could you please make this line shorter (same for the mute feature of the other class)? That checkstyle issue can be fixed more cleanly than the missing default case :)", "url": "https://github.com/AntennaPod/AntennaPod/pull/4486#discussion_r505812742", "createdAt": "2020-10-15T20:16:24Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/activity/MainActivity.java", "diffHunk": "@@ -511,4 +516,52 @@ public Snackbar showSnackbarAbovePlayer(CharSequence text, int duration) {\n     public Snackbar showSnackbarAbovePlayer(int text, int duration) {\n         return showSnackbarAbovePlayer(getResources().getText(text), duration);\n     }\n+\n+    //Hardware keyboard support\n+    @Override\n+    public boolean onKeyUp(int keyCode, KeyEvent event) {\n+        AudioManager audioManager = (AudioManager) getSystemService(AUDIO_SERVICE);\n+        Integer customKeyCode = null;\n+\n+        switch (keyCode) {\n+            case KeyEvent.KEYCODE_P:\n+                customKeyCode = KeyEvent.KEYCODE_MEDIA_PLAY_PAUSE;\n+                break;\n+            case KeyEvent.KEYCODE_J: //Fallthrough\n+            case KeyEvent.KEYCODE_A:\n+            case KeyEvent.KEYCODE_COMMA:\n+                customKeyCode = KeyEvent.KEYCODE_MEDIA_REWIND;\n+                break;\n+            case KeyEvent.KEYCODE_K: //Fallthrough\n+            case KeyEvent.KEYCODE_D:\n+            case KeyEvent.KEYCODE_PERIOD:\n+                customKeyCode = KeyEvent.KEYCODE_MEDIA_FAST_FORWARD;\n+                break;\n+            case KeyEvent.KEYCODE_PLUS: //Fallthrough\n+            case KeyEvent.KEYCODE_W:\n+                audioManager.adjustStreamVolume(AudioManager.STREAM_MUSIC,\n+                        AudioManager.ADJUST_RAISE, AudioManager.FLAG_SHOW_UI);\n+                return true;\n+            case KeyEvent.KEYCODE_MINUS: //Fallthrough\n+            case KeyEvent.KEYCODE_S:\n+                audioManager.adjustStreamVolume(AudioManager.STREAM_MUSIC,\n+                        AudioManager.ADJUST_LOWER, AudioManager.FLAG_SHOW_UI);\n+                return true;\n+            case KeyEvent.KEYCODE_M:\n+                if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) {\n+                    audioManager.adjustStreamVolume(AudioManager.STREAM_MUSIC, AudioManager.ADJUST_TOGGLE_MUTE, AudioManager.FLAG_SHOW_UI);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3893bf6cf3a4c8e2af407b2742d216a66170d173"}, "originalPosition": 69}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bf0bfd2a2b37a5ad08b0cd0115e51ebf1ec726e1", "author": {"user": {"login": "asdoi", "name": null}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/bf0bfd2a2b37a5ad08b0cd0115e51ebf1ec726e1", "committedDate": "2020-10-16T14:19:11Z", "message": "fix checkstyle"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2705, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}