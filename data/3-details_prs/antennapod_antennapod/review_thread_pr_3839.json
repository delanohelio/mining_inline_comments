{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzcyMjEwMDI3", "number": 3839, "reviewThreads": {"totalCount": 23, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wOVQxMzowODoyOVrODeRf9Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QxNTowMDo1MVrODowiDw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMzMDcwNTgxOnYy", "diffSide": "RIGHT", "path": "app/src/main/java/de/danoeh/antennapod/activity/OnlineFeedViewActivity.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wOVQxMzowODoyOVrOFnU_JA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQxNDoxODowMFrOFnnp7Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Njc4MjYyOA==", "bodyText": "This parameter seems to be always true. You can just remove it :)", "url": "https://github.com/AntennaPod/AntennaPod/pull/3839#discussion_r376782628", "createdAt": "2020-02-09T13:08:29Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/activity/OnlineFeedViewActivity.java", "diffHunk": "@@ -225,7 +225,7 @@ public boolean onOptionsItemSelected(MenuItem item) {\n         return super.onOptionsItemSelected(item);\n     }\n \n-    private void startFeedDownload(String url, String username, String password) {\n+    private void startFeedDownload(String url, String username, String password, boolean initiatedByUser) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4bdf5b5ce35dfa48b5f682ffa4e3ab0647714618"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzA4ODQ5Mw==", "bodyText": "Fixed.", "url": "https://github.com/AntennaPod/AntennaPod/pull/3839#discussion_r377088493", "createdAt": "2020-02-10T14:18:00Z", "author": {"login": "shortspider"}, "path": "app/src/main/java/de/danoeh/antennapod/activity/OnlineFeedViewActivity.java", "diffHunk": "@@ -225,7 +225,7 @@ public boolean onOptionsItemSelected(MenuItem item) {\n         return super.onOptionsItemSelected(item);\n     }\n \n-    private void startFeedDownload(String url, String username, String password) {\n+    private void startFeedDownload(String url, String username, String password, boolean initiatedByUser) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Njc4MjYyOA=="}, "originalCommit": {"oid": "4bdf5b5ce35dfa48b5f682ffa4e3ab0647714618"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMzMDcwNjMzOnYy", "diffSide": "RIGHT", "path": "app/src/main/res/xml/preferences_network.xml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wOVQxMzowOTozM1rOFnU_ag==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQxNDoxODowOFrOFnnqOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Njc4MjY5OA==", "bodyText": "Please change the indentation, so it matches other items in the file.", "url": "https://github.com/AntennaPod/AntennaPod/pull/3839#discussion_r376782698", "createdAt": "2020-02-09T13:09:33Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/res/xml/preferences_network.xml", "diffHunk": "@@ -35,6 +35,12 @@\n                 android:key=\"prefShowDownloadReport\"\n                 android:summary=\"@string/pref_showDownloadReport_sum\"\n                 android:title=\"@string/pref_showDownloadReport_title\"/>\n+        <SwitchPreference\n+            android:defaultValue=\"false\"\n+            android:enabled=\"true\"\n+            android:key=\"prefShowAutoDownloadReport\"\n+            android:summary=\"@string/pref_showAutoDownloadReport_sum\"\n+            android:title=\"@string/pref_showAutoDownloadReport_title\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4bdf5b5ce35dfa48b5f682ffa4e3ab0647714618"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzA4ODU2OA==", "bodyText": "Changed.", "url": "https://github.com/AntennaPod/AntennaPod/pull/3839#discussion_r377088568", "createdAt": "2020-02-10T14:18:08Z", "author": {"login": "shortspider"}, "path": "app/src/main/res/xml/preferences_network.xml", "diffHunk": "@@ -35,6 +35,12 @@\n                 android:key=\"prefShowDownloadReport\"\n                 android:summary=\"@string/pref_showDownloadReport_sum\"\n                 android:title=\"@string/pref_showDownloadReport_title\"/>\n+        <SwitchPreference\n+            android:defaultValue=\"false\"\n+            android:enabled=\"true\"\n+            android:key=\"prefShowAutoDownloadReport\"\n+            android:summary=\"@string/pref_showAutoDownloadReport_sum\"\n+            android:title=\"@string/pref_showAutoDownloadReport_title\"/>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Njc4MjY5OA=="}, "originalCommit": {"oid": "4bdf5b5ce35dfa48b5f682ffa4e3ab0647714618"}, "originalPosition": 9}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMzMDcwNzY0OnYy", "diffSide": "RIGHT", "path": "core/src/main/java/de/danoeh/antennapod/core/storage/PodDBAdapter.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wOVQxMzoxMjoxMlrOFnVAEQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQxMzoyMToyMVrOFouPwQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Njc4Mjg2NQ==", "bodyText": "I do not think this is needed", "url": "https://github.com/AntennaPod/AntennaPod/pull/3839#discussion_r376782865", "createdAt": "2020-02-09T13:12:12Z", "author": {"login": "ByteHamster"}, "path": "core/src/main/java/de/danoeh/antennapod/core/storage/PodDBAdapter.java", "diffHunk": "@@ -110,6 +110,7 @@\n     public static final String KEY_INCLUDE_FILTER = \"include_filter\";\n     public static final String KEY_EXCLUDE_FILTER = \"exclude_filter\";\n     public static final String KEY_FEED_PLAYBACK_SPEED = \"feed_playback_speed\";\n+    public static final String KEY_INITIATED_BY_USER = \"initiated_by_user\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4bdf5b5ce35dfa48b5f682ffa4e3ab0647714618"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzA4OTI3Mg==", "bodyText": "It's used in DownloadStatus to create a staus from a cursor.", "url": "https://github.com/AntennaPod/AntennaPod/pull/3839#discussion_r377089272", "createdAt": "2020-02-10T14:19:18Z", "author": {"login": "shortspider"}, "path": "core/src/main/java/de/danoeh/antennapod/core/storage/PodDBAdapter.java", "diffHunk": "@@ -110,6 +110,7 @@\n     public static final String KEY_INCLUDE_FILTER = \"include_filter\";\n     public static final String KEY_EXCLUDE_FILTER = \"exclude_filter\";\n     public static final String KEY_FEED_PLAYBACK_SPEED = \"feed_playback_speed\";\n+    public static final String KEY_INITIATED_BY_USER = \"initiated_by_user\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Njc4Mjg2NQ=="}, "originalCommit": {"oid": "4bdf5b5ce35dfa48b5f682ffa4e3ab0647714618"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODE0MjQxMA==", "bodyText": "The cursor is used for things that come from the database. You did not update the database to contain this column. I think when creating a status from cursor, the initiatedByUser field does not matter (it is just used for the Downloads\u00bbLogs page). So you can just set it to false and remove the key here.", "url": "https://github.com/AntennaPod/AntennaPod/pull/3839#discussion_r378142410", "createdAt": "2020-02-12T09:51:24Z", "author": {"login": "ByteHamster"}, "path": "core/src/main/java/de/danoeh/antennapod/core/storage/PodDBAdapter.java", "diffHunk": "@@ -110,6 +110,7 @@\n     public static final String KEY_INCLUDE_FILTER = \"include_filter\";\n     public static final String KEY_EXCLUDE_FILTER = \"exclude_filter\";\n     public static final String KEY_FEED_PLAYBACK_SPEED = \"feed_playback_speed\";\n+    public static final String KEY_INITIATED_BY_USER = \"initiated_by_user\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Njc4Mjg2NQ=="}, "originalCommit": {"oid": "4bdf5b5ce35dfa48b5f682ffa4e3ab0647714618"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODI0NTA1Nw==", "bodyText": "OK that makes sense, changed.", "url": "https://github.com/AntennaPod/AntennaPod/pull/3839#discussion_r378245057", "createdAt": "2020-02-12T13:21:21Z", "author": {"login": "shortspider"}, "path": "core/src/main/java/de/danoeh/antennapod/core/storage/PodDBAdapter.java", "diffHunk": "@@ -110,6 +110,7 @@\n     public static final String KEY_INCLUDE_FILTER = \"include_filter\";\n     public static final String KEY_EXCLUDE_FILTER = \"exclude_filter\";\n     public static final String KEY_FEED_PLAYBACK_SPEED = \"feed_playback_speed\";\n+    public static final String KEY_INITIATED_BY_USER = \"initiated_by_user\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Njc4Mjg2NQ=="}, "originalCommit": {"oid": "4bdf5b5ce35dfa48b5f682ffa4e3ab0647714618"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMzMDcwODk0OnYy", "diffSide": "LEFT", "path": "core/src/main/java/de/danoeh/antennapod/core/service/download/DownloadServiceNotification.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wOVQxMzoxNToxNlrOFnVAuQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQxNTo1Mjo0MlrOFnrVrw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Njc4MzAzMw==", "bodyText": "Please keep this line", "url": "https://github.com/AntennaPod/AntennaPod/pull/3839#discussion_r376783033", "createdAt": "2020-02-09T13:15:16Z", "author": {"login": "ByteHamster"}, "path": "core/src/main/java/de/danoeh/antennapod/core/service/download/DownloadServiceNotification.java", "diffHunk": "@@ -108,9 +108,11 @@ public void updateReport(List<DownloadStatus> reportQueue) {\n             if (status.isSuccessful()) {\n                 successfulDownloads++;\n             } else if (!status.isCancelled()) {\n-                createReport = true;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4bdf5b5ce35dfa48b5f682ffa4e3ab0647714618"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzE0ODg0Nw==", "bodyText": "Changed.", "url": "https://github.com/AntennaPod/AntennaPod/pull/3839#discussion_r377148847", "createdAt": "2020-02-10T15:52:42Z", "author": {"login": "shortspider"}, "path": "core/src/main/java/de/danoeh/antennapod/core/service/download/DownloadServiceNotification.java", "diffHunk": "@@ -108,9 +108,11 @@ public void updateReport(List<DownloadStatus> reportQueue) {\n             if (status.isSuccessful()) {\n                 successfulDownloads++;\n             } else if (!status.isCancelled()) {\n-                createReport = true;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Njc4MzAzMw=="}, "originalCommit": {"oid": "4bdf5b5ce35dfa48b5f682ffa4e3ab0647714618"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMzMDcwOTcwOnYy", "diffSide": "RIGHT", "path": "core/src/main/java/de/danoeh/antennapod/core/service/download/DownloadServiceNotification.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wOVQxMzoxNjoxOVrOFnVBFQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQxNTo1Mjo1NFrOFnrWRQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Njc4MzEyNQ==", "bodyText": "This is only about auto download. Please do not add something related to failed downloads here.", "url": "https://github.com/AntennaPod/AntennaPod/pull/3839#discussion_r376783125", "createdAt": "2020-02-09T13:16:19Z", "author": {"login": "ByteHamster"}, "path": "core/src/main/java/de/danoeh/antennapod/core/service/download/DownloadServiceNotification.java", "diffHunk": "@@ -108,9 +108,11 @@ public void updateReport(List<DownloadStatus> reportQueue) {\n             if (status.isSuccessful()) {\n                 successfulDownloads++;\n             } else if (!status.isCancelled()) {\n-                createReport = true;\n                 failedDownloads++;\n             }\n+            if (failedDownloads > 0 || showAutoDownloadReport && !status.isInitiatedByUser() && status.getFeedfileType() == FeedMedia.FEEDFILETYPE_FEEDMEDIA) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4bdf5b5ce35dfa48b5f682ffa4e3ab0647714618"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzE0ODk5Nw==", "bodyText": "Changed.", "url": "https://github.com/AntennaPod/AntennaPod/pull/3839#discussion_r377148997", "createdAt": "2020-02-10T15:52:54Z", "author": {"login": "shortspider"}, "path": "core/src/main/java/de/danoeh/antennapod/core/service/download/DownloadServiceNotification.java", "diffHunk": "@@ -108,9 +108,11 @@ public void updateReport(List<DownloadStatus> reportQueue) {\n             if (status.isSuccessful()) {\n                 successfulDownloads++;\n             } else if (!status.isCancelled()) {\n-                createReport = true;\n                 failedDownloads++;\n             }\n+            if (failedDownloads > 0 || showAutoDownloadReport && !status.isInitiatedByUser() && status.getFeedfileType() == FeedMedia.FEEDFILETYPE_FEEDMEDIA) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Njc4MzEyNQ=="}, "originalCommit": {"oid": "4bdf5b5ce35dfa48b5f682ffa4e3ab0647714618"}, "originalPosition": 16}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMzMDcxMDIxOnYy", "diffSide": "RIGHT", "path": "core/src/main/java/de/danoeh/antennapod/core/service/download/DownloadStatus.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wOVQxMzoxNzoyMlrOFnVBUw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQwOTo0NzoxM1rOFon1rg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Njc4MzE4Nw==", "bodyText": "Instead of adding the field to DownloadStatus, please use status.getRequest().isInitiatedByUser(). Then we do not need another copy of the variable.", "url": "https://github.com/AntennaPod/AntennaPod/pull/3839#discussion_r376783187", "createdAt": "2020-02-09T13:17:22Z", "author": {"login": "ByteHamster"}, "path": "core/src/main/java/de/danoeh/antennapod/core/service/download/DownloadStatus.java", "diffHunk": "@@ -41,62 +41,49 @@\n \t * FEEDFILETYPE_FEEDIMAGE or FEEDFILETYPE_FEEDMEDIA\n \t */\n     private final int feedfileType;\n+    private final boolean initiatedByUser;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4bdf5b5ce35dfa48b5f682ffa4e3ab0647714618"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzA4Nzc0Mg==", "bodyText": "There is no getRequest method that I can see. I can add it but not all status' are created with a request, and even so that seems like overkill. Or were you just talking about the constructor that takes a request? I'll clean that up either way.", "url": "https://github.com/AntennaPod/AntennaPod/pull/3839#discussion_r377087742", "createdAt": "2020-02-10T14:16:43Z", "author": {"login": "shortspider"}, "path": "core/src/main/java/de/danoeh/antennapod/core/service/download/DownloadStatus.java", "diffHunk": "@@ -41,62 +41,49 @@\n \t * FEEDFILETYPE_FEEDIMAGE or FEEDFILETYPE_FEEDMEDIA\n \t */\n     private final int feedfileType;\n+    private final boolean initiatedByUser;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Njc4MzE4Nw=="}, "originalCommit": {"oid": "4bdf5b5ce35dfa48b5f682ffa4e3ab0647714618"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODE0MDA3OA==", "bodyText": "Oh you are right. Then it's OK this way.", "url": "https://github.com/AntennaPod/AntennaPod/pull/3839#discussion_r378140078", "createdAt": "2020-02-12T09:47:13Z", "author": {"login": "ByteHamster"}, "path": "core/src/main/java/de/danoeh/antennapod/core/service/download/DownloadStatus.java", "diffHunk": "@@ -41,62 +41,49 @@\n \t * FEEDFILETYPE_FEEDIMAGE or FEEDFILETYPE_FEEDMEDIA\n \t */\n     private final int feedfileType;\n+    private final boolean initiatedByUser;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Njc4MzE4Nw=="}, "originalCommit": {"oid": "4bdf5b5ce35dfa48b5f682ffa4e3ab0647714618"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMzMDcxMjUwOnYy", "diffSide": "RIGHT", "path": "core/src/main/java/de/danoeh/antennapod/core/storage/DBTasks.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wOVQxMzoyMDo1NVrOFnVCeA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQxNDozMDoyOVrOFnoHaw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Njc4MzQ4MA==", "bodyText": "Users can also press the refresh button. I think this method might be called when users press the refresh button, so it is not always initiated by the system. Not sure what to pick here, though.", "url": "https://github.com/AntennaPod/AntennaPod/pull/3839#discussion_r376783480", "createdAt": "2020-02-09T13:20:55Z", "author": {"login": "ByteHamster"}, "path": "core/src/main/java/de/danoeh/antennapod/core/storage/DBTasks.java", "diffHunk": "@@ -199,11 +199,12 @@ private static void refreshFeeds(final Context context,\n                 } catch (DownloadRequestException e) {\n                     e.printStackTrace();\n                     DBWriter.addDownloadStatus(\n-                            new DownloadStatus(feed, feed\n-                                    .getHumanReadableIdentifier(),\n-                                    DownloadError.ERROR_REQUEST_ERROR, false, e\n-                                    .getMessage()\n-                            )\n+                            new DownloadStatus(feed,\n+                                               feed.getHumanReadableIdentifier(),\n+                                               DownloadError.ERROR_REQUEST_ERROR,\n+                                               false,\n+                                               e.getMessage(),\n+                                               false)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4bdf5b5ce35dfa48b5f682ffa4e3ab0647714618"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzA5NjA0Mw==", "bodyText": "Good catch, managed to get it sorted out.", "url": "https://github.com/AntennaPod/AntennaPod/pull/3839#discussion_r377096043", "createdAt": "2020-02-10T14:30:29Z", "author": {"login": "shortspider"}, "path": "core/src/main/java/de/danoeh/antennapod/core/storage/DBTasks.java", "diffHunk": "@@ -199,11 +199,12 @@ private static void refreshFeeds(final Context context,\n                 } catch (DownloadRequestException e) {\n                     e.printStackTrace();\n                     DBWriter.addDownloadStatus(\n-                            new DownloadStatus(feed, feed\n-                                    .getHumanReadableIdentifier(),\n-                                    DownloadError.ERROR_REQUEST_ERROR, false, e\n-                                    .getMessage()\n-                            )\n+                            new DownloadStatus(feed,\n+                                               feed.getHumanReadableIdentifier(),\n+                                               DownloadError.ERROR_REQUEST_ERROR,\n+                                               false,\n+                                               e.getMessage(),\n+                                               false)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Njc4MzQ4MA=="}, "originalCommit": {"oid": "4bdf5b5ce35dfa48b5f682ffa4e3ab0647714618"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM4ODc1MzgwOnYy", "diffSide": "RIGHT", "path": "core/src/main/res/values/strings.xml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQxMzoxNjo1OVrOFv0mNQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQwMTo1OTo0MFrOF0m4Aw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTY4OTE0MQ==", "bodyText": "I think there should be two strings. One for auto downloads completed and one for failed downloads.", "url": "https://github.com/AntennaPod/AntennaPod/pull/3839#discussion_r385689141", "createdAt": "2020-02-28T13:16:59Z", "author": {"login": "ByteHamster"}, "path": "core/src/main/res/values/strings.xml", "diffHunk": "@@ -245,7 +245,7 @@\n     <string name=\"download_error_forbidden\">Forbidden</string>\n     <string name=\"download_canceled_msg\">Download canceled</string>\n     <string name=\"download_canceled_autodownload_enabled_msg\">Download canceled\\nDisabled <i>Auto Download</i> for this item</string>\n-    <string name=\"download_report_title\">Downloads completed with error(s)</string>\n+    <string name=\"download_report_title\">Downloads completed</string>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bd327f119b32cdf3b053eded9ed8ae3dfda42233"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDcwNzIwMw==", "bodyText": "Changed.", "url": "https://github.com/AntennaPod/AntennaPod/pull/3839#discussion_r390707203", "createdAt": "2020-03-11T01:59:40Z", "author": {"login": "shortspider"}, "path": "core/src/main/res/values/strings.xml", "diffHunk": "@@ -245,7 +245,7 @@\n     <string name=\"download_error_forbidden\">Forbidden</string>\n     <string name=\"download_canceled_msg\">Download canceled</string>\n     <string name=\"download_canceled_autodownload_enabled_msg\">Download canceled\\nDisabled <i>Auto Download</i> for this item</string>\n-    <string name=\"download_report_title\">Downloads completed with error(s)</string>\n+    <string name=\"download_report_title\">Downloads completed</string>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTY4OTE0MQ=="}, "originalCommit": {"oid": "bd327f119b32cdf3b053eded9ed8ae3dfda42233"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM4ODc1NzU5OnYy", "diffSide": "RIGHT", "path": "core/src/main/res/values/strings.xml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQxMzoxODoyNlrOFv0ocA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQwMTozMjo1M1rOF0mfjQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTY4OTcxMg==", "bodyText": "Maybe \"have been\" downloaded? \"were\" downloaded? Not a native English speaker but the notification is shown after the downloads were completed. \"Are\" sounds like the download is still running.", "url": "https://github.com/AntennaPod/AntennaPod/pull/3839#discussion_r385689712", "createdAt": "2020-02-28T13:18:26Z", "author": {"login": "ByteHamster"}, "path": "core/src/main/res/values/strings.xml", "diffHunk": "@@ -781,6 +783,8 @@\n     <string name=\"notification_channel_playing_description\">Allows to control playback. This is the main notification you see while playing a podcast.</string>\n     <string name=\"notification_channel_error\">Errors</string>\n     <string name=\"notification_channel_error_description\">Shown if something went wrong, for example if download or gpodder sync fails.</string>\n+    <string name=\"notification_channel_auto_download\">Auto Downloads</string>\n+    <string name=\"notification_channel_error_auto_download\">Shown when episodes are automatically downloaded.</string>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bd327f119b32cdf3b053eded9ed8ae3dfda42233"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDcwMDk0MQ==", "bodyText": "Changed.", "url": "https://github.com/AntennaPod/AntennaPod/pull/3839#discussion_r390700941", "createdAt": "2020-03-11T01:32:53Z", "author": {"login": "shortspider"}, "path": "core/src/main/res/values/strings.xml", "diffHunk": "@@ -781,6 +783,8 @@\n     <string name=\"notification_channel_playing_description\">Allows to control playback. This is the main notification you see while playing a podcast.</string>\n     <string name=\"notification_channel_error\">Errors</string>\n     <string name=\"notification_channel_error_description\">Shown if something went wrong, for example if download or gpodder sync fails.</string>\n+    <string name=\"notification_channel_auto_download\">Auto Downloads</string>\n+    <string name=\"notification_channel_error_auto_download\">Shown when episodes are automatically downloaded.</string>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTY4OTcxMg=="}, "originalCommit": {"oid": "bd327f119b32cdf3b053eded9ed8ae3dfda42233"}, "originalPosition": 23}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM4ODc2Mzk3OnYy", "diffSide": "RIGHT", "path": "core/src/main/java/de/danoeh/antennapod/core/storage/DownloadRequester.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQxMzoyMDoyNlrOFv0r9w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQwMTozOTo1MFrOF0mlWw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTY5MDYxNQ==", "bodyText": "Please break to a new line. The maximum line length should be 120 characters. This is currently not enforced by the CI because other parts of the app do not comply but I want new code to be consistent.", "url": "https://github.com/AntennaPod/AntennaPod/pull/3839#discussion_r385690615", "createdAt": "2020-02-28T13:20:26Z", "author": {"login": "ByteHamster"}, "path": "core/src/main/java/de/danoeh/antennapod/core/storage/DownloadRequester.java", "diffHunk": "@@ -203,25 +203,26 @@ public synchronized void downloadFeed(Context context, Feed feed, boolean loadAl\n             args.putBoolean(REQUEST_ARG_LOAD_ALL_PAGES, loadAllPages);\n \n             DownloadRequest request = createRequest(feed, null, new File(getFeedfilePath(), getFeedfileName(feed)),\n-                    true, username, password, lastModified, true, args);\n+                    true, username, password, lastModified, true, args, initiatedByUser\n+            );\n             if (request != null) {\n                 download(context, request);\n             }\n         }\n     }\n \n     public synchronized void downloadFeed(Context context, Feed feed) throws DownloadRequestException {\n-        downloadFeed(context, feed, false, false);\n+        downloadFeed(context, feed, false, false, true);\n     }\n \n-    public synchronized void downloadMedia(@NonNull Context context, FeedItem... feedItems)\n+    public synchronized void downloadMedia(@NonNull Context context, boolean initiatedByUser, FeedItem... feedItems)\n             throws DownloadRequestException {\n-        downloadMedia(true, context, feedItems);\n+        downloadMedia(true, context, initiatedByUser, feedItems);\n \n     }\n \n     @VisibleForTesting(otherwise = VisibleForTesting.PACKAGE_PRIVATE)\n-    public synchronized void downloadMedia(boolean performAutoCleanup, @NonNull Context context,\n+    public synchronized void downloadMedia(boolean performAutoCleanup, @NonNull Context context, boolean initiatedByUser,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bd327f119b32cdf3b053eded9ed8ae3dfda42233"}, "originalPosition": 55}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDcwMjQyNw==", "bodyText": "Changed.", "url": "https://github.com/AntennaPod/AntennaPod/pull/3839#discussion_r390702427", "createdAt": "2020-03-11T01:39:50Z", "author": {"login": "shortspider"}, "path": "core/src/main/java/de/danoeh/antennapod/core/storage/DownloadRequester.java", "diffHunk": "@@ -203,25 +203,26 @@ public synchronized void downloadFeed(Context context, Feed feed, boolean loadAl\n             args.putBoolean(REQUEST_ARG_LOAD_ALL_PAGES, loadAllPages);\n \n             DownloadRequest request = createRequest(feed, null, new File(getFeedfilePath(), getFeedfileName(feed)),\n-                    true, username, password, lastModified, true, args);\n+                    true, username, password, lastModified, true, args, initiatedByUser\n+            );\n             if (request != null) {\n                 download(context, request);\n             }\n         }\n     }\n \n     public synchronized void downloadFeed(Context context, Feed feed) throws DownloadRequestException {\n-        downloadFeed(context, feed, false, false);\n+        downloadFeed(context, feed, false, false, true);\n     }\n \n-    public synchronized void downloadMedia(@NonNull Context context, FeedItem... feedItems)\n+    public synchronized void downloadMedia(@NonNull Context context, boolean initiatedByUser, FeedItem... feedItems)\n             throws DownloadRequestException {\n-        downloadMedia(true, context, feedItems);\n+        downloadMedia(true, context, initiatedByUser, feedItems);\n \n     }\n \n     @VisibleForTesting(otherwise = VisibleForTesting.PACKAGE_PRIVATE)\n-    public synchronized void downloadMedia(boolean performAutoCleanup, @NonNull Context context,\n+    public synchronized void downloadMedia(boolean performAutoCleanup, @NonNull Context context, boolean initiatedByUser,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTY5MDYxNQ=="}, "originalCommit": {"oid": "bd327f119b32cdf3b053eded9ed8ae3dfda42233"}, "originalPosition": 55}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM4ODc3NjYyOnYy", "diffSide": "RIGHT", "path": "core/src/main/java/de/danoeh/antennapod/core/service/download/DownloadRequest.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQxMzoyMzo1MlrOFv0y5w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQwMTo0MDoxOVrOF0ml2A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTY5MjM5MQ==", "bodyText": "Please add a space after (byte)", "url": "https://github.com/AntennaPod/AntennaPod/pull/3839#discussion_r385692391", "createdAt": "2020-02-28T13:23:52Z", "author": {"login": "ByteHamster"}, "path": "core/src/main/java/de/danoeh/antennapod/core/service/download/DownloadRequest.java", "diffHunk": "@@ -107,6 +134,7 @@ public void writeToParcel(Parcel dest, int flags) {\n         dest.writeString(nonNullString(password));\n         dest.writeByte((mediaEnqueued) ? (byte) 1 : 0);\n         dest.writeBundle(arguments);\n+        dest.writeByte(initiatedByUser ? (byte)1 : 0);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bd327f119b32cdf3b053eded9ed8ae3dfda42233"}, "originalPosition": 125}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDcwMjU1Mg==", "bodyText": "Changed.", "url": "https://github.com/AntennaPod/AntennaPod/pull/3839#discussion_r390702552", "createdAt": "2020-03-11T01:40:19Z", "author": {"login": "shortspider"}, "path": "core/src/main/java/de/danoeh/antennapod/core/service/download/DownloadRequest.java", "diffHunk": "@@ -107,6 +134,7 @@ public void writeToParcel(Parcel dest, int flags) {\n         dest.writeString(nonNullString(password));\n         dest.writeByte((mediaEnqueued) ? (byte) 1 : 0);\n         dest.writeBundle(arguments);\n+        dest.writeByte(initiatedByUser ? (byte)1 : 0);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTY5MjM5MQ=="}, "originalCommit": {"oid": "bd327f119b32cdf3b053eded9ed8ae3dfda42233"}, "originalPosition": 125}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM4ODc3OTQ5OnYy", "diffSide": "RIGHT", "path": "core/src/main/java/de/danoeh/antennapod/core/service/download/DownloadRequest.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQxMzoyNDo0N1rOFv00hA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQwMTo0Mjo1OVrOF0mojA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTY5MjgwNA==", "bodyText": "To be honest, I think this is harder to read than before. This nearly fills the screen of my laptop vertically and is basically empty horizontally. Please break the lines, so that one line has more than one parameter.", "url": "https://github.com/AntennaPod/AntennaPod/pull/3839#discussion_r385692804", "createdAt": "2020-02-28T13:24:47Z", "author": {"login": "ByteHamster"}, "path": "core/src/main/java/de/danoeh/antennapod/core/service/download/DownloadRequest.java", "diffHunk": "@@ -38,50 +39,76 @@ public DownloadRequest(@NonNull String destination,\n                            String username,\n                            String password,\n                            boolean deleteOnFailure,\n-                           Bundle arguments) {\n+                           Bundle arguments,\n+                           boolean initiatedByUser) {\n+        this(destination,\n+             source,\n+             title,\n+             feedfileId,\n+             feedfileType,\n+             null,\n+             deleteOnFailure,\n+             username,\n+             password,\n+             false,\n+             arguments,\n+             initiatedByUser);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bd327f119b32cdf3b053eded9ed8ae3dfda42233"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDcwMzI0NA==", "bodyText": "Changed.", "url": "https://github.com/AntennaPod/AntennaPod/pull/3839#discussion_r390703244", "createdAt": "2020-03-11T01:42:59Z", "author": {"login": "shortspider"}, "path": "core/src/main/java/de/danoeh/antennapod/core/service/download/DownloadRequest.java", "diffHunk": "@@ -38,50 +39,76 @@ public DownloadRequest(@NonNull String destination,\n                            String username,\n                            String password,\n                            boolean deleteOnFailure,\n-                           Bundle arguments) {\n+                           Bundle arguments,\n+                           boolean initiatedByUser) {\n+        this(destination,\n+             source,\n+             title,\n+             feedfileId,\n+             feedfileType,\n+             null,\n+             deleteOnFailure,\n+             username,\n+             password,\n+             false,\n+             arguments,\n+             initiatedByUser);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTY5MjgwNA=="}, "originalCommit": {"oid": "bd327f119b32cdf3b053eded9ed8ae3dfda42233"}, "originalPosition": 26}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM4ODc4MDI5OnYy", "diffSide": "RIGHT", "path": "core/src/main/java/de/danoeh/antennapod/core/service/download/DownloadRequest.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQxMzoyNTowMFrOFv009w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQwMTo0NToxM1rOF0mqbA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTY5MjkxOQ==", "bodyText": "Please add line breaks", "url": "https://github.com/AntennaPod/AntennaPod/pull/3839#discussion_r385692919", "createdAt": "2020-02-28T13:25:00Z", "author": {"login": "ByteHamster"}, "path": "core/src/main/java/de/danoeh/antennapod/core/service/download/DownloadRequest.java", "diffHunk": "@@ -258,6 +287,8 @@ public boolean isMediaEnqueued() {\n         return mediaEnqueued;\n     }\n \n+    public boolean isInitiatedByUser() { return initiatedByUser; }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bd327f119b32cdf3b053eded9ed8ae3dfda42233"}, "originalPosition": 141}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDcwMzcyNA==", "bodyText": "Changed.", "url": "https://github.com/AntennaPod/AntennaPod/pull/3839#discussion_r390703724", "createdAt": "2020-03-11T01:45:13Z", "author": {"login": "shortspider"}, "path": "core/src/main/java/de/danoeh/antennapod/core/service/download/DownloadRequest.java", "diffHunk": "@@ -258,6 +287,8 @@ public boolean isMediaEnqueued() {\n         return mediaEnqueued;\n     }\n \n+    public boolean isInitiatedByUser() { return initiatedByUser; }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTY5MjkxOQ=="}, "originalCommit": {"oid": "bd327f119b32cdf3b053eded9ed8ae3dfda42233"}, "originalPosition": 141}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM4ODc5NzA4OnYy", "diffSide": "RIGHT", "path": "core/src/main/java/de/danoeh/antennapod/core/service/download/DownloadStatus.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQxMzozMDozMVrOFv0_EQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQwMTo1MDo1M1rOF0mvfw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTY5NTUwNQ==", "bodyText": "This file seems to be indented with tabs instead of spaces. While you are already touching big parts of the file, it would make sense to let Android Studio convert the file to spaces instead of tabs. That would also fix the strange indention above.", "url": "https://github.com/AntennaPod/AntennaPod/pull/3839#discussion_r385695505", "createdAt": "2020-02-28T13:30:31Z", "author": {"login": "ByteHamster"}, "path": "core/src/main/java/de/danoeh/antennapod/core/service/download/DownloadStatus.java", "diffHunk": "@@ -109,18 +95,41 @@ public static DownloadStatus fromCursor(Cursor cursor) {\n \t\tint indexCompletionDate = cursor.getColumnIndex(PodDBAdapter.KEY_COMPLETION_DATE);\n \t\tint indexReasonDetailed = cursor.getColumnIndex(PodDBAdapter.KEY_REASON_DETAILED);\n \n-\t\tlong id = cursor.getLong(indexId);\n-\t\tString title = cursor.getString(indexTitle);\n-\t\tlong feedfileId = cursor.getLong(indexFeedFile);\n-\t\tint feedfileType = cursor.getInt(indexFileFileType);\n-\t\tboolean successful = cursor.getInt(indexSuccessful) > 0;\n-\t\tint reason = cursor.getInt(indexReason);\n-\t\tDate completionDate = new Date(cursor.getLong(indexCompletionDate));\n-\t\tString reasonDetailed = cursor.getString(indexReasonDetailed);\n-\n-\t\treturn new DownloadStatus(id, title, feedfileId,\n-\t\t\t\tfeedfileType, successful, DownloadError.fromCode(reason), completionDate,\n-\t\t\t\treasonDetailed);\n+\t\treturn new DownloadStatus(cursor.getLong(indexId),\n+\t\t\t\t\t\t\t\t  cursor.getString(indexTitle),\n+\t\t\t\t\t\t\t\t  cursor.getLong(indexFeedFile),\n+\t\t\t\t\t\t\t\t  cursor.getInt(indexFileFileType),\n+\t\t\t\t\t\t\t\t  cursor.getInt(indexSuccessful) > 0,\n+\t\t\t\t\t\t\t\t  false,\n+\t\t\t\t\t\t\t\t  true,\n+\t\t\t\t\t\t\t\t  DownloadError.fromCode(cursor.getInt(indexReason)),\n+\t\t\t\t\t\t\t\t  new Date(cursor.getLong(indexCompletionDate)),\n+\t\t\t\t\t\t\t\t  cursor.getString(indexReasonDetailed),\n+\t\t\t\t\t\t\t\t  false);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bd327f119b32cdf3b053eded9ed8ae3dfda42233"}, "originalPosition": 123}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDcwNTAyMw==", "bodyText": "Changed.", "url": "https://github.com/AntennaPod/AntennaPod/pull/3839#discussion_r390705023", "createdAt": "2020-03-11T01:50:53Z", "author": {"login": "shortspider"}, "path": "core/src/main/java/de/danoeh/antennapod/core/service/download/DownloadStatus.java", "diffHunk": "@@ -109,18 +95,41 @@ public static DownloadStatus fromCursor(Cursor cursor) {\n \t\tint indexCompletionDate = cursor.getColumnIndex(PodDBAdapter.KEY_COMPLETION_DATE);\n \t\tint indexReasonDetailed = cursor.getColumnIndex(PodDBAdapter.KEY_REASON_DETAILED);\n \n-\t\tlong id = cursor.getLong(indexId);\n-\t\tString title = cursor.getString(indexTitle);\n-\t\tlong feedfileId = cursor.getLong(indexFeedFile);\n-\t\tint feedfileType = cursor.getInt(indexFileFileType);\n-\t\tboolean successful = cursor.getInt(indexSuccessful) > 0;\n-\t\tint reason = cursor.getInt(indexReason);\n-\t\tDate completionDate = new Date(cursor.getLong(indexCompletionDate));\n-\t\tString reasonDetailed = cursor.getString(indexReasonDetailed);\n-\n-\t\treturn new DownloadStatus(id, title, feedfileId,\n-\t\t\t\tfeedfileType, successful, DownloadError.fromCode(reason), completionDate,\n-\t\t\t\treasonDetailed);\n+\t\treturn new DownloadStatus(cursor.getLong(indexId),\n+\t\t\t\t\t\t\t\t  cursor.getString(indexTitle),\n+\t\t\t\t\t\t\t\t  cursor.getLong(indexFeedFile),\n+\t\t\t\t\t\t\t\t  cursor.getInt(indexFileFileType),\n+\t\t\t\t\t\t\t\t  cursor.getInt(indexSuccessful) > 0,\n+\t\t\t\t\t\t\t\t  false,\n+\t\t\t\t\t\t\t\t  true,\n+\t\t\t\t\t\t\t\t  DownloadError.fromCode(cursor.getInt(indexReason)),\n+\t\t\t\t\t\t\t\t  new Date(cursor.getLong(indexCompletionDate)),\n+\t\t\t\t\t\t\t\t  cursor.getString(indexReasonDetailed),\n+\t\t\t\t\t\t\t\t  false);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTY5NTUwNQ=="}, "originalCommit": {"oid": "bd327f119b32cdf3b053eded9ed8ae3dfda42233"}, "originalPosition": 123}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM4ODgwMzE3OnYy", "diffSide": "RIGHT", "path": "core/src/main/java/de/danoeh/antennapod/core/service/download/DownloadService.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQxMzozMjozOVrOFv1Cxw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QxNDo1NzozNlrOF3gFYw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTY5NjQ1NQ==", "bodyText": "Just wondering... The two kinds of notifications are now quite different (Channel, text, maybe even icon). Would it make sense to extract the auto download notification to a new class instead of handling everything in the existing notificationManager? I have not checked if this will lead to a lot of code duplication, though.", "url": "https://github.com/AntennaPod/AntennaPod/pull/3839#discussion_r385696455", "createdAt": "2020-02-28T13:32:39Z", "author": {"login": "ByteHamster"}, "path": "core/src/main/java/de/danoeh/antennapod/core/service/download/DownloadService.java", "diffHunk": "@@ -205,9 +205,10 @@ public void onDestroy() {\n         Log.d(TAG, \"Service shutting down\");\n         isRunning = false;\n \n+        boolean showAutoDownloadReport = UserPreferences.showAutoDownloadReport();\n         if (ClientConfig.downloadServiceCallbacks.shouldCreateReport()\n-                && UserPreferences.showDownloadReport()) {\n-            notificationManager.updateReport(reportQueue);\n+                && (UserPreferences.showDownloadReport() || showAutoDownloadReport)) {\n+            notificationManager.updateReport(reportQueue, showAutoDownloadReport);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bd327f119b32cdf3b053eded9ed8ae3dfda42233"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDcwNjA2OA==", "bodyText": "I'm not 100% sure what you mean here. DownloadService seems to be the right place to kick off a notification and notificationManager (to me anyway) seems like a class that will generate whatever notification is required for a given set of parameters. IMO if we did create another class there would be a fair bit of duplication.", "url": "https://github.com/AntennaPod/AntennaPod/pull/3839#discussion_r390706068", "createdAt": "2020-03-11T01:55:25Z", "author": {"login": "shortspider"}, "path": "core/src/main/java/de/danoeh/antennapod/core/service/download/DownloadService.java", "diffHunk": "@@ -205,9 +205,10 @@ public void onDestroy() {\n         Log.d(TAG, \"Service shutting down\");\n         isRunning = false;\n \n+        boolean showAutoDownloadReport = UserPreferences.showAutoDownloadReport();\n         if (ClientConfig.downloadServiceCallbacks.shouldCreateReport()\n-                && UserPreferences.showDownloadReport()) {\n-            notificationManager.updateReport(reportQueue);\n+                && (UserPreferences.showDownloadReport() || showAutoDownloadReport)) {\n+            notificationManager.updateReport(reportQueue, showAutoDownloadReport);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTY5NjQ1NQ=="}, "originalCommit": {"oid": "bd327f119b32cdf3b053eded9ed8ae3dfda42233"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mzc0MTY2Nw==", "bodyText": "IMO if we did create another class there would be a fair bit of duplication.\n\n\ud83d\udc4d", "url": "https://github.com/AntennaPod/AntennaPod/pull/3839#discussion_r393741667", "createdAt": "2020-03-17T14:57:36Z", "author": {"login": "ByteHamster"}, "path": "core/src/main/java/de/danoeh/antennapod/core/service/download/DownloadService.java", "diffHunk": "@@ -205,9 +205,10 @@ public void onDestroy() {\n         Log.d(TAG, \"Service shutting down\");\n         isRunning = false;\n \n+        boolean showAutoDownloadReport = UserPreferences.showAutoDownloadReport();\n         if (ClientConfig.downloadServiceCallbacks.shouldCreateReport()\n-                && UserPreferences.showDownloadReport()) {\n-            notificationManager.updateReport(reportQueue);\n+                && (UserPreferences.showDownloadReport() || showAutoDownloadReport)) {\n+            notificationManager.updateReport(reportQueue, showAutoDownloadReport);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTY5NjQ1NQ=="}, "originalCommit": {"oid": "bd327f119b32cdf3b053eded9ed8ae3dfda42233"}, "originalPosition": 9}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ0MDU4NTgzOnYy", "diffSide": "RIGHT", "path": "core/src/main/java/de/danoeh/antennapod/core/service/download/handler/FeedParserTask.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QxNDo0Njo0NFrOF3fmSg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMlQxOTo1NDoxN1rOF5yGtw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzczMzcwNg==", "bodyText": "Please use request.getTitle() instead of feed.getHumanReadableIdentifier(): In this case, feed does not have a human readable title yet", "url": "https://github.com/AntennaPod/AntennaPod/pull/3839#discussion_r393733706", "createdAt": "2020-03-17T14:46:44Z", "author": {"login": "ByteHamster"}, "path": "core/src/main/java/de/danoeh/antennapod/core/service/download/handler/FeedParserTask.java", "diffHunk": "@@ -78,12 +78,12 @@ public FeedHandlerResult call() {\n         }\n \n         if (successful) {\n-            downloadStatus = new DownloadStatus(feed, feed.getHumanReadableIdentifier(),\n-                    DownloadError.SUCCESS, successful, reasonDetailed);\n+            downloadStatus = new DownloadStatus(feed, feed.getHumanReadableIdentifier(), DownloadError.SUCCESS,\n+                                                successful, reasonDetailed, request.isInitiatedByUser());\n             return result;\n         } else {\n-            downloadStatus = new DownloadStatus(feed, request.getTitle(),\n-                    reason, successful, reasonDetailed);\n+            downloadStatus = new DownloadStatus(feed, feed.getHumanReadableIdentifier(), reason, successful,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7717669c9d045efe8807d762b3283e6d5ef06bb7"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjEzNDA3MQ==", "bodyText": "Changed.", "url": "https://github.com/AntennaPod/AntennaPod/pull/3839#discussion_r396134071", "createdAt": "2020-03-22T19:54:17Z", "author": {"login": "shortspider"}, "path": "core/src/main/java/de/danoeh/antennapod/core/service/download/handler/FeedParserTask.java", "diffHunk": "@@ -78,12 +78,12 @@ public FeedHandlerResult call() {\n         }\n \n         if (successful) {\n-            downloadStatus = new DownloadStatus(feed, feed.getHumanReadableIdentifier(),\n-                    DownloadError.SUCCESS, successful, reasonDetailed);\n+            downloadStatus = new DownloadStatus(feed, feed.getHumanReadableIdentifier(), DownloadError.SUCCESS,\n+                                                successful, reasonDetailed, request.isInitiatedByUser());\n             return result;\n         } else {\n-            downloadStatus = new DownloadStatus(feed, request.getTitle(),\n-                    reason, successful, reasonDetailed);\n+            downloadStatus = new DownloadStatus(feed, feed.getHumanReadableIdentifier(), reason, successful,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzczMzcwNg=="}, "originalCommit": {"oid": "7717669c9d045efe8807d762b3283e6d5ef06bb7"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ0MDU5NzU3OnYy", "diffSide": "RIGHT", "path": "core/src/main/res/values/strings.xml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QxNDo0OToyMlrOF3ftzQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMlQxOTo1NToxMlrOF5yG_w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzczNTYyOQ==", "bodyText": "Why _error_auto_download? This is not related to errors, I think.", "url": "https://github.com/AntennaPod/AntennaPod/pull/3839#discussion_r393735629", "createdAt": "2020-03-17T14:49:22Z", "author": {"login": "ByteHamster"}, "path": "core/src/main/res/values/strings.xml", "diffHunk": "@@ -782,6 +785,8 @@\n     <string name=\"notification_channel_playing_description\">Allows to control playback. This is the main notification you see while playing a podcast.</string>\n     <string name=\"notification_channel_error\">Errors</string>\n     <string name=\"notification_channel_error_description\">Shown if something went wrong, for example if download or gpodder sync fails.</string>\n+    <string name=\"notification_channel_auto_download\">Auto Downloads</string>\n+    <string name=\"notification_channel_error_auto_download\">Shown when episodes have been automatically downloaded.</string>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7717669c9d045efe8807d762b3283e6d5ef06bb7"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjEzNDE0Mw==", "bodyText": "Changed.", "url": "https://github.com/AntennaPod/AntennaPod/pull/3839#discussion_r396134143", "createdAt": "2020-03-22T19:55:12Z", "author": {"login": "shortspider"}, "path": "core/src/main/res/values/strings.xml", "diffHunk": "@@ -782,6 +785,8 @@\n     <string name=\"notification_channel_playing_description\">Allows to control playback. This is the main notification you see while playing a podcast.</string>\n     <string name=\"notification_channel_error\">Errors</string>\n     <string name=\"notification_channel_error_description\">Shown if something went wrong, for example if download or gpodder sync fails.</string>\n+    <string name=\"notification_channel_auto_download\">Auto Downloads</string>\n+    <string name=\"notification_channel_error_auto_download\">Shown when episodes have been automatically downloaded.</string>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzczNTYyOQ=="}, "originalCommit": {"oid": "7717669c9d045efe8807d762b3283e6d5ef06bb7"}, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ0MDYwNzE5OnYy", "diffSide": "RIGHT", "path": "core/src/main/res/values/strings.xml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QxNDo1MTozMVrOF3f0NA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMlQxOTo1NTo1NVrOF5yHUQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzczNzI2OA==", "bodyText": "Maybe \"Show a notification for automatically downloaded episodes\" could be easier to understand", "url": "https://github.com/AntennaPod/AntennaPod/pull/3839#discussion_r393737268", "createdAt": "2020-03-17T14:51:31Z", "author": {"login": "ByteHamster"}, "path": "core/src/main/res/values/strings.xml", "diffHunk": "@@ -477,6 +478,8 @@\n     <string name=\"pref_lockscreen_background_sum\">Set the lockscreen background to the current episode\\'s image. As a side effect, this will also show the image in third party apps.</string>\n     <string name=\"pref_showDownloadReport_title\">Show Download Report</string>\n     <string name=\"pref_showDownloadReport_sum\">If downloads fail, generate a report that shows the details of the failure.</string>\n+    <string name=\"pref_showAutoDownloadReport_title\">Show Auto Download Report</string>\n+    <string name=\"pref_showAutoDownloadReport_sum\">Generate a report that shows the details of auto downloaded episodes.</string>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7717669c9d045efe8807d762b3283e6d5ef06bb7"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjEzNDIyNQ==", "bodyText": "Agreed, changed.", "url": "https://github.com/AntennaPod/AntennaPod/pull/3839#discussion_r396134225", "createdAt": "2020-03-22T19:55:55Z", "author": {"login": "shortspider"}, "path": "core/src/main/res/values/strings.xml", "diffHunk": "@@ -477,6 +478,8 @@\n     <string name=\"pref_lockscreen_background_sum\">Set the lockscreen background to the current episode\\'s image. As a side effect, this will also show the image in third party apps.</string>\n     <string name=\"pref_showDownloadReport_title\">Show Download Report</string>\n     <string name=\"pref_showDownloadReport_sum\">If downloads fail, generate a report that shows the details of the failure.</string>\n+    <string name=\"pref_showAutoDownloadReport_title\">Show Auto Download Report</string>\n+    <string name=\"pref_showAutoDownloadReport_sum\">Generate a report that shows the details of auto downloaded episodes.</string>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzczNzI2OA=="}, "originalCommit": {"oid": "7717669c9d045efe8807d762b3283e6d5ef06bb7"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ0MDYwODcyOnYy", "diffSide": "RIGHT", "path": "core/src/main/res/values/strings.xml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QxNDo1MTo1MVrOF3f1JQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMlQxOTo1NjoyM1rOF5yHeQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzczNzUwOQ==", "bodyText": "Auto-downloads completed?", "url": "https://github.com/AntennaPod/AntennaPod/pull/3839#discussion_r393737509", "createdAt": "2020-03-17T14:51:51Z", "author": {"login": "ByteHamster"}, "path": "core/src/main/res/values/strings.xml", "diffHunk": "@@ -245,6 +245,7 @@\n     <string name=\"download_canceled_msg\">Download canceled</string>\n     <string name=\"download_canceled_autodownload_enabled_msg\">Download canceled\\nDisabled <i>Auto Download</i> for this item</string>\n     <string name=\"download_report_title\">Downloads completed with error(s)</string>\n+    <string name=\"auto_download_report_title\">Downloads completed</string>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7717669c9d045efe8807d762b3283e6d5ef06bb7"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjEzNDI2NQ==", "bodyText": "Changed.", "url": "https://github.com/AntennaPod/AntennaPod/pull/3839#discussion_r396134265", "createdAt": "2020-03-22T19:56:23Z", "author": {"login": "shortspider"}, "path": "core/src/main/res/values/strings.xml", "diffHunk": "@@ -245,6 +245,7 @@\n     <string name=\"download_canceled_msg\">Download canceled</string>\n     <string name=\"download_canceled_autodownload_enabled_msg\">Download canceled\\nDisabled <i>Auto Download</i> for this item</string>\n     <string name=\"download_report_title\">Downloads completed with error(s)</string>\n+    <string name=\"auto_download_report_title\">Downloads completed</string>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzczNzUwOQ=="}, "originalCommit": {"oid": "7717669c9d045efe8807d762b3283e6d5ef06bb7"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ0MDYxMTQ1OnYy", "diffSide": "RIGHT", "path": "core/src/main/java/de/danoeh/antennapod/core/util/gui/NotificationUtils.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QxNDo1MjozNVrOF3f3Dg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMlQyMDowMDo1NFrOF5yJPA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzczNzk5OA==", "bodyText": "I think the description string is wrong. Should be the new one for auto download\nCould you please use the same formatting as the rest of the file, so that it looks more even?", "url": "https://github.com/AntennaPod/AntennaPod/pull/3839#discussion_r393737998", "createdAt": "2020-03-17T14:52:35Z", "author": {"login": "ByteHamster"}, "path": "core/src/main/java/de/danoeh/antennapod/core/util/gui/NotificationUtils.java", "diffHunk": "@@ -62,4 +64,14 @@ private static NotificationChannel createChannelError(Context c) {\n         mChannel.setDescription(c.getString(R.string.notification_channel_error_description));\n         return mChannel;\n     }\n+\n+    @RequiresApi(api = Build.VERSION_CODES.O)\n+    private static NotificationChannel createChannelAutoDownload(Context c) {\n+        NotificationChannel mChannel = new NotificationChannel(\n+                                            CHANNEL_ID_AUTO_DOWNLOAD,\n+                                            c.getString(R.string.notification_channel_auto_download),\n+                                            NotificationManager.IMPORTANCE_DEFAULT);\n+        mChannel.setDescription(c.getString(R.string.notification_channel_downloading_description));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7717669c9d045efe8807d762b3283e6d5ef06bb7"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjEzNDcxNg==", "bodyText": "Done.", "url": "https://github.com/AntennaPod/AntennaPod/pull/3839#discussion_r396134716", "createdAt": "2020-03-22T20:00:54Z", "author": {"login": "shortspider"}, "path": "core/src/main/java/de/danoeh/antennapod/core/util/gui/NotificationUtils.java", "diffHunk": "@@ -62,4 +64,14 @@ private static NotificationChannel createChannelError(Context c) {\n         mChannel.setDescription(c.getString(R.string.notification_channel_error_description));\n         return mChannel;\n     }\n+\n+    @RequiresApi(api = Build.VERSION_CODES.O)\n+    private static NotificationChannel createChannelAutoDownload(Context c) {\n+        NotificationChannel mChannel = new NotificationChannel(\n+                                            CHANNEL_ID_AUTO_DOWNLOAD,\n+                                            c.getString(R.string.notification_channel_auto_download),\n+                                            NotificationManager.IMPORTANCE_DEFAULT);\n+        mChannel.setDescription(c.getString(R.string.notification_channel_downloading_description));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzczNzk5OA=="}, "originalCommit": {"oid": "7717669c9d045efe8807d762b3283e6d5ef06bb7"}, "originalPosition": 27}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ0MDYyMTczOnYy", "diffSide": "RIGHT", "path": "core/src/main/java/de/danoeh/antennapod/core/service/download/DownloadServiceNotification.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QxNDo1NTowMFrOF3f94g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMlQyMDowMTo1NVrOF5yJlw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzczOTc0Ng==", "bodyText": "I think createReport |= ... would be easier to read because you do not need to think about operator precedence", "url": "https://github.com/AntennaPod/AntennaPod/pull/3839#discussion_r393739746", "createdAt": "2020-03-17T14:55:00Z", "author": {"login": "ByteHamster"}, "path": "core/src/main/java/de/danoeh/antennapod/core/service/download/DownloadServiceNotification.java", "diffHunk": "@@ -107,29 +107,28 @@ public void updateReport(List<DownloadStatus> reportQueue) {\n         for (DownloadStatus status : reportQueue) {\n             if (status.isSuccessful()) {\n                 successfulDownloads++;\n+                createReport = createReport || showAutoDownloadReport && !status.isInitiatedByUser() && status.getFeedfileType() == FeedMedia.FEEDFILETYPE_FEEDMEDIA;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7717669c9d045efe8807d762b3283e6d5ef06bb7"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjEzNDgwNw==", "bodyText": "Agreed.", "url": "https://github.com/AntennaPod/AntennaPod/pull/3839#discussion_r396134807", "createdAt": "2020-03-22T20:01:55Z", "author": {"login": "shortspider"}, "path": "core/src/main/java/de/danoeh/antennapod/core/service/download/DownloadServiceNotification.java", "diffHunk": "@@ -107,29 +107,28 @@ public void updateReport(List<DownloadStatus> reportQueue) {\n         for (DownloadStatus status : reportQueue) {\n             if (status.isSuccessful()) {\n                 successfulDownloads++;\n+                createReport = createReport || showAutoDownloadReport && !status.isInitiatedByUser() && status.getFeedfileType() == FeedMedia.FEEDFILETYPE_FEEDMEDIA;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzczOTc0Ng=="}, "originalCommit": {"oid": "7717669c9d045efe8807d762b3283e6d5ef06bb7"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ0MDYyNjg5OnYy", "diffSide": "RIGHT", "path": "app/src/main/java/de/danoeh/antennapod/config/DownloadServiceCallbacksImpl.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QxNDo1NjowOFrOF3gBNA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMlQyMDoxMjoxMVrOF5yNGg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mzc0MDU5Ng==", "bodyText": "I think it would make sense to create a second method here.", "url": "https://github.com/AntennaPod/AntennaPod/pull/3839#discussion_r393740596", "createdAt": "2020-03-17T14:56:08Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/config/DownloadServiceCallbacksImpl.java", "diffHunk": "@@ -38,13 +39,15 @@ public PendingIntent getAuthentificationNotificationContentIntent(Context contex\n     }\n \n     @Override\n-    public PendingIntent getReportNotificationContentIntent(Context context) {\n+    public PendingIntent getReportNotificationContentIntent(Context context, boolean autoDownloadReport) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7717669c9d045efe8807d762b3283e6d5ef06bb7"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjEzNTcwNg==", "bodyText": "Done.", "url": "https://github.com/AntennaPod/AntennaPod/pull/3839#discussion_r396135706", "createdAt": "2020-03-22T20:12:11Z", "author": {"login": "shortspider"}, "path": "app/src/main/java/de/danoeh/antennapod/config/DownloadServiceCallbacksImpl.java", "diffHunk": "@@ -38,13 +39,15 @@ public PendingIntent getAuthentificationNotificationContentIntent(Context contex\n     }\n \n     @Override\n-    public PendingIntent getReportNotificationContentIntent(Context context) {\n+    public PendingIntent getReportNotificationContentIntent(Context context, boolean autoDownloadReport) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mzc0MDU5Ng=="}, "originalCommit": {"oid": "7717669c9d045efe8807d762b3283e6d5ef06bb7"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ0MDY0NzgzOnYy", "diffSide": "RIGHT", "path": "core/src/main/java/de/danoeh/antennapod/core/service/download/DownloadServiceNotification.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QxNTowMDo1MVrOF3gPOQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMlQyMDowNzo0N1rOF5yLpA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mzc0NDE4NQ==", "bodyText": "Please use the same string for ticker and content title. Also, I think it would be easier to read the code if you copied the notification builder code: if(autoDownloadReport){...}else{...} instead of using the ? operator in basically every line.", "url": "https://github.com/AntennaPod/AntennaPod/pull/3839#discussion_r393744185", "createdAt": "2020-03-17T15:00:51Z", "author": {"login": "ByteHamster"}, "path": "core/src/main/java/de/danoeh/antennapod/core/service/download/DownloadServiceNotification.java", "diffHunk": "@@ -107,29 +107,28 @@ public void updateReport(List<DownloadStatus> reportQueue) {\n         for (DownloadStatus status : reportQueue) {\n             if (status.isSuccessful()) {\n                 successfulDownloads++;\n+                createReport = createReport || showAutoDownloadReport && !status.isInitiatedByUser() && status.getFeedfileType() == FeedMedia.FEEDFILETYPE_FEEDMEDIA;\n             } else if (!status.isCancelled()) {\n-                createReport = true;\n                 failedDownloads++;\n+                createReport = true;\n             }\n         }\n \n         if (createReport) {\n             Log.d(TAG, \"Creating report\");\n+\n             // create notification object\n-            NotificationCompat.Builder builder = new NotificationCompat.Builder(context,\n-                    NotificationUtils.CHANNEL_ID_ERROR)\n-                    .setTicker(context.getString(R.string.download_report_title))\n-                    .setContentTitle(context.getString(R.string.download_report_content_title))\n-                    .setContentText(\n-                            String.format(\n-                                    context.getString(R.string.download_report_content),\n-                                    successfulDownloads, failedDownloads)\n-                    )\n-                    .setSmallIcon(R.drawable.stat_notify_sync_error)\n-                    .setContentIntent(\n-                            ClientConfig.downloadServiceCallbacks.getReportNotificationContentIntent(context)\n-                    )\n-                    .setAutoCancel(true);\n+            boolean autoDownloadReport = failedDownloads == 0;\n+            String channelId = autoDownloadReport ? NotificationUtils.CHANNEL_ID_AUTO_DOWNLOAD : NotificationUtils.CHANNEL_ID_ERROR;\n+            int titleId = autoDownloadReport ? R.string.auto_download_report_title : R.string.download_report_title;\n+\n+            NotificationCompat.Builder builder = new NotificationCompat.Builder(context, channelId);\n+            builder.setTicker(context.getString(titleId))\n+                   .setContentTitle(context.getString(R.string.download_report_content_title))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7717669c9d045efe8807d762b3283e6d5ef06bb7"}, "originalPosition": 45}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjEzNTMzMg==", "bodyText": "Agreed, done.", "url": "https://github.com/AntennaPod/AntennaPod/pull/3839#discussion_r396135332", "createdAt": "2020-03-22T20:07:47Z", "author": {"login": "shortspider"}, "path": "core/src/main/java/de/danoeh/antennapod/core/service/download/DownloadServiceNotification.java", "diffHunk": "@@ -107,29 +107,28 @@ public void updateReport(List<DownloadStatus> reportQueue) {\n         for (DownloadStatus status : reportQueue) {\n             if (status.isSuccessful()) {\n                 successfulDownloads++;\n+                createReport = createReport || showAutoDownloadReport && !status.isInitiatedByUser() && status.getFeedfileType() == FeedMedia.FEEDFILETYPE_FEEDMEDIA;\n             } else if (!status.isCancelled()) {\n-                createReport = true;\n                 failedDownloads++;\n+                createReport = true;\n             }\n         }\n \n         if (createReport) {\n             Log.d(TAG, \"Creating report\");\n+\n             // create notification object\n-            NotificationCompat.Builder builder = new NotificationCompat.Builder(context,\n-                    NotificationUtils.CHANNEL_ID_ERROR)\n-                    .setTicker(context.getString(R.string.download_report_title))\n-                    .setContentTitle(context.getString(R.string.download_report_content_title))\n-                    .setContentText(\n-                            String.format(\n-                                    context.getString(R.string.download_report_content),\n-                                    successfulDownloads, failedDownloads)\n-                    )\n-                    .setSmallIcon(R.drawable.stat_notify_sync_error)\n-                    .setContentIntent(\n-                            ClientConfig.downloadServiceCallbacks.getReportNotificationContentIntent(context)\n-                    )\n-                    .setAutoCancel(true);\n+            boolean autoDownloadReport = failedDownloads == 0;\n+            String channelId = autoDownloadReport ? NotificationUtils.CHANNEL_ID_AUTO_DOWNLOAD : NotificationUtils.CHANNEL_ID_ERROR;\n+            int titleId = autoDownloadReport ? R.string.auto_download_report_title : R.string.download_report_title;\n+\n+            NotificationCompat.Builder builder = new NotificationCompat.Builder(context, channelId);\n+            builder.setTicker(context.getString(titleId))\n+                   .setContentTitle(context.getString(R.string.download_report_content_title))", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mzc0NDE4NQ=="}, "originalCommit": {"oid": "7717669c9d045efe8807d762b3283e6d5ef06bb7"}, "originalPosition": 45}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4799, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}