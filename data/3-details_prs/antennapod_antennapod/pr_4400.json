{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc4NTU2Mzg5", "number": 4400, "title": "Add 'sort' to subscriptions view", "bodyText": "Closes #1853", "createdAt": "2020-09-03T11:17:50Z", "url": "https://github.com/AntennaPod/AntennaPod/pull/4400", "merged": true, "mergeCommit": {"oid": "410dfabeb5823d49807cbd5e56be112ae1fc43e5"}, "closed": true, "closedAt": "2020-09-07T20:55:17Z", "author": {"login": "asdoi"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdFOu8QAH2gAyNDc4NTU2Mzg5OmJkMGQwYjUwMDhmZTI3MzViMzM1ZGYwM2ZmZTE2YmRhZTczNzg1ZDA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdGo_RzAH2gAyNDc4NTU2Mzg5OmYyOWExYWQ5OGY2OTAzZGY5YmI2MjE1OTkyMTNlNDY2M2QxNjZhMTQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "bd0d0b5008fe2735b335df03ffe16bdae73785d0", "author": {"user": {"login": "asdoi", "name": null}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/bd0d0b5008fe2735b335df03ffe16bdae73785d0", "committedDate": "2020-09-03T11:16:48Z", "message": "add feed sort menu item"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgxNzQzNTcw", "url": "https://github.com/AntennaPod/AntennaPod/pull/4400#pullrequestreview-481743570", "createdAt": "2020-09-03T11:24:57Z", "commit": {"oid": "bd0d0b5008fe2735b335df03ffe16bdae73785d0"}, "state": "COMMENTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QxMToyNDo1N1rOHMiK7Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QxMTozMToxMVrOHMiXMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjkwNDgxMw==", "bodyText": "Can this loop be simplified with something like ArrayList.indexOf?", "url": "https://github.com/AntennaPod/AntennaPod/pull/4400#discussion_r482904813", "createdAt": "2020-09-03T11:24:57Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/dialog/FeedSortDialog.java", "diffHunk": "@@ -0,0 +1,40 @@\n+package de.danoeh.antennapod.dialog;\n+\n+import android.content.Context;\n+\n+import androidx.appcompat.app.AlertDialog;\n+\n+import org.greenrobot.eventbus.EventBus;\n+\n+import de.danoeh.antennapod.R;\n+import de.danoeh.antennapod.core.event.UnreadItemsUpdateEvent;\n+import de.danoeh.antennapod.core.preferences.UserPreferences;\n+\n+public class FeedSortDialog {\n+    public static void showDialog(Context context) {\n+        AlertDialog.Builder dialog = new AlertDialog.Builder(context);\n+        dialog.setTitle(context.getString(R.string.pref_nav_drawer_feed_order_title));\n+        dialog.setNegativeButton(android.R.string.cancel, (d, listener) -> d.dismiss());\n+\n+        int selectedIndexTemp = 0;\n+        int selected = UserPreferences.getFeedOrder();\n+        String[] entryValues = context.getResources().getStringArray(R.array.nav_drawer_feed_order_values);\n+        for (int i = 0; i < entryValues.length; i++) {\n+            if (Integer.parseInt(entryValues[i]) == selected) {\n+                selectedIndexTemp = i;\n+            }\n+        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bd0d0b5008fe2735b335df03ffe16bdae73785d0"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjkwNTI1OA==", "bodyText": "Not sure if this is the most fitting event. Feed list update might be better than unread items update.", "url": "https://github.com/AntennaPod/AntennaPod/pull/4400#discussion_r482905258", "createdAt": "2020-09-03T11:25:55Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/dialog/FeedSortDialog.java", "diffHunk": "@@ -0,0 +1,40 @@\n+package de.danoeh.antennapod.dialog;\n+\n+import android.content.Context;\n+\n+import androidx.appcompat.app.AlertDialog;\n+\n+import org.greenrobot.eventbus.EventBus;\n+\n+import de.danoeh.antennapod.R;\n+import de.danoeh.antennapod.core.event.UnreadItemsUpdateEvent;\n+import de.danoeh.antennapod.core.preferences.UserPreferences;\n+\n+public class FeedSortDialog {\n+    public static void showDialog(Context context) {\n+        AlertDialog.Builder dialog = new AlertDialog.Builder(context);\n+        dialog.setTitle(context.getString(R.string.pref_nav_drawer_feed_order_title));\n+        dialog.setNegativeButton(android.R.string.cancel, (d, listener) -> d.dismiss());\n+\n+        int selectedIndexTemp = 0;\n+        int selected = UserPreferences.getFeedOrder();\n+        String[] entryValues = context.getResources().getStringArray(R.array.nav_drawer_feed_order_values);\n+        for (int i = 0; i < entryValues.length; i++) {\n+            if (Integer.parseInt(entryValues[i]) == selected) {\n+                selectedIndexTemp = i;\n+            }\n+        }\n+\n+        final int selectedIndex = selectedIndexTemp;\n+        String[] items = context.getResources().getStringArray(R.array.nav_drawer_feed_order_options);\n+        dialog.setSingleChoiceItems(items, selectedIndex, (d, which) -> {\n+            if (selectedIndex != which) {\n+                UserPreferences.setFeedOrder(entryValues[which]);\n+                //Update subscriptions\n+                EventBus.getDefault().post(new UnreadItemsUpdateEvent());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bd0d0b5008fe2735b335df03ffe16bdae73785d0"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjkwNTg1Nw==", "bodyText": "This is not needed. AlertDialog does it automatically.", "url": "https://github.com/AntennaPod/AntennaPod/pull/4400#discussion_r482905857", "createdAt": "2020-09-03T11:27:05Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/dialog/FeedSortDialog.java", "diffHunk": "@@ -0,0 +1,40 @@\n+package de.danoeh.antennapod.dialog;\n+\n+import android.content.Context;\n+\n+import androidx.appcompat.app.AlertDialog;\n+\n+import org.greenrobot.eventbus.EventBus;\n+\n+import de.danoeh.antennapod.R;\n+import de.danoeh.antennapod.core.event.UnreadItemsUpdateEvent;\n+import de.danoeh.antennapod.core.preferences.UserPreferences;\n+\n+public class FeedSortDialog {\n+    public static void showDialog(Context context) {\n+        AlertDialog.Builder dialog = new AlertDialog.Builder(context);\n+        dialog.setTitle(context.getString(R.string.pref_nav_drawer_feed_order_title));\n+        dialog.setNegativeButton(android.R.string.cancel, (d, listener) -> d.dismiss());\n+\n+        int selectedIndexTemp = 0;\n+        int selected = UserPreferences.getFeedOrder();\n+        String[] entryValues = context.getResources().getStringArray(R.array.nav_drawer_feed_order_values);\n+        for (int i = 0; i < entryValues.length; i++) {\n+            if (Integer.parseInt(entryValues[i]) == selected) {\n+                selectedIndexTemp = i;\n+            }\n+        }\n+\n+        final int selectedIndex = selectedIndexTemp;\n+        String[] items = context.getResources().getStringArray(R.array.nav_drawer_feed_order_options);\n+        dialog.setSingleChoiceItems(items, selectedIndex, (d, which) -> {\n+            if (selectedIndex != which) {\n+                UserPreferences.setFeedOrder(entryValues[which]);\n+                //Update subscriptions\n+                EventBus.getDefault().post(new UnreadItemsUpdateEvent());\n+            }\n+            d.dismiss();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bd0d0b5008fe2735b335df03ffe16bdae73785d0"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjkwNzA1MA==", "bodyText": "Please open the same dialog when clicking the settings item. This ensures that the UI is consistent.", "url": "https://github.com/AntennaPod/AntennaPod/pull/4400#discussion_r482907050", "createdAt": "2020-09-03T11:29:27Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/dialog/FeedSortDialog.java", "diffHunk": "@@ -0,0 +1,40 @@\n+package de.danoeh.antennapod.dialog;\n+\n+import android.content.Context;\n+\n+import androidx.appcompat.app.AlertDialog;\n+\n+import org.greenrobot.eventbus.EventBus;\n+\n+import de.danoeh.antennapod.R;\n+import de.danoeh.antennapod.core.event.UnreadItemsUpdateEvent;\n+import de.danoeh.antennapod.core.preferences.UserPreferences;\n+\n+public class FeedSortDialog {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bd0d0b5008fe2735b335df03ffe16bdae73785d0"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjkwNzk1NQ==", "bodyText": "Is there already a string with the text \"sort\"? In that case, I would prefer using the existing one.", "url": "https://github.com/AntennaPod/AntennaPod/pull/4400#discussion_r482907955", "createdAt": "2020-09-03T11:31:11Z", "author": {"login": "ByteHamster"}, "path": "core/src/main/res/values/strings.xml", "diffHunk": "@@ -723,6 +723,7 @@\n     <string name=\"search_powered_by\">Search powered by %1$s</string>\n \n     <string name=\"filter\">Filter</string>\n+    <string name=\"sort_order\">Sort order</string>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bd0d0b5008fe2735b335df03ffe16bdae73785d0"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "75be61ff6de87c7c1012c52258739a0be5fea1d2", "author": {"user": {"login": "asdoi", "name": null}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/75be61ff6de87c7c1012c52258739a0be5fea1d2", "committedDate": "2020-09-03T12:07:57Z", "message": "fix FeedSortDialog"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0010433680ec94d9679ee37eb20670d8b3a6b6bc", "author": {"user": {"login": "asdoi", "name": null}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/0010433680ec94d9679ee37eb20670d8b3a6b6bc", "committedDate": "2020-09-03T12:11:10Z", "message": "fix Preference"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7f068e95f9383e74543ff1480be1811d1d6b7c6a", "author": {"user": {"login": "asdoi", "name": null}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/7f068e95f9383e74543ff1480be1811d1d6b7c6a", "committedDate": "2020-09-03T12:15:01Z", "message": "update FeedFilterDialog"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgzNzAwODUz", "url": "https://github.com/AntennaPod/AntennaPod/pull/4400#pullrequestreview-483700853", "createdAt": "2020-09-07T20:05:46Z", "commit": {"oid": "7f068e95f9383e74543ff1480be1811d1d6b7c6a"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QyMDowNTo0NlrOHOHC1g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QyMDowODo0OVrOHOHEcA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDU1NzUyNg==", "bodyText": "This is missing a line return true;. Otherwise, it will fall through and execute the next case, too.", "url": "https://github.com/AntennaPod/AntennaPod/pull/4400#discussion_r484557526", "createdAt": "2020-09-07T20:05:46Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/fragment/SubscriptionFragment.java", "diffHunk": "@@ -131,6 +132,8 @@ public boolean onOptionsItemSelected(MenuItem item) {\n             case R.id.subscriptions_filter:\n                 FeedFilterDialog.showDialog(requireContext());\n                 return true;\n+            case R.id.subscriptions_sort:\n+                FeedSortDialog.showDialog(requireContext());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7f068e95f9383e74543ff1480be1811d1d6b7c6a"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDU1NzU2NA==", "bodyText": "Looks a lot easier to understand \ud83d\udc4d", "url": "https://github.com/AntennaPod/AntennaPod/pull/4400#discussion_r484557564", "createdAt": "2020-09-07T20:06:14Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/dialog/FeedFilterDialog.java", "diffHunk": "@@ -16,20 +19,15 @@ public static void showDialog(Context context) {\n         dialog.setTitle(context.getString(R.string.pref_filter_feed_title));\n         dialog.setNegativeButton(android.R.string.cancel, (d, listener) -> d.dismiss());\n \n-        int selectedIndexTemp = 0;\n         int selected = UserPreferences.getFeedFilter();\n-        String[] entryValues = context.getResources().getStringArray(R.array.nav_drawer_feed_filter_values);\n-        for (int i = 0; i < entryValues.length; i++) {\n-            if (Integer.parseInt(entryValues[i]) == selected) {\n-                selectedIndexTemp = i;\n-            }\n-        }\n+        List<String> entryValues =\n+                Arrays.asList(context.getResources().getStringArray(R.array.nav_drawer_feed_filter_values));\n+        final int selectedIndex = entryValues.indexOf(\"\" + selected);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7f068e95f9383e74543ff1480be1811d1d6b7c6a"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDU1NzkzNg==", "bodyText": "Okay, let's keep it like this for now. I think the events need some rework in the future anyway. In every Fragment, there are quite a few duplicate methods that react to the events.", "url": "https://github.com/AntennaPod/AntennaPod/pull/4400#discussion_r484557936", "createdAt": "2020-09-07T20:08:49Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/dialog/FeedSortDialog.java", "diffHunk": "@@ -0,0 +1,40 @@\n+package de.danoeh.antennapod.dialog;\n+\n+import android.content.Context;\n+\n+import androidx.appcompat.app.AlertDialog;\n+\n+import org.greenrobot.eventbus.EventBus;\n+\n+import de.danoeh.antennapod.R;\n+import de.danoeh.antennapod.core.event.UnreadItemsUpdateEvent;\n+import de.danoeh.antennapod.core.preferences.UserPreferences;\n+\n+public class FeedSortDialog {\n+    public static void showDialog(Context context) {\n+        AlertDialog.Builder dialog = new AlertDialog.Builder(context);\n+        dialog.setTitle(context.getString(R.string.pref_nav_drawer_feed_order_title));\n+        dialog.setNegativeButton(android.R.string.cancel, (d, listener) -> d.dismiss());\n+\n+        int selectedIndexTemp = 0;\n+        int selected = UserPreferences.getFeedOrder();\n+        String[] entryValues = context.getResources().getStringArray(R.array.nav_drawer_feed_order_values);\n+        for (int i = 0; i < entryValues.length; i++) {\n+            if (Integer.parseInt(entryValues[i]) == selected) {\n+                selectedIndexTemp = i;\n+            }\n+        }\n+\n+        final int selectedIndex = selectedIndexTemp;\n+        String[] items = context.getResources().getStringArray(R.array.nav_drawer_feed_order_options);\n+        dialog.setSingleChoiceItems(items, selectedIndex, (d, which) -> {\n+            if (selectedIndex != which) {\n+                UserPreferences.setFeedOrder(entryValues[which]);\n+                //Update subscriptions\n+                EventBus.getDefault().post(new UnreadItemsUpdateEvent());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjkwNTI1OA=="}, "originalCommit": {"oid": "bd0d0b5008fe2735b335df03ffe16bdae73785d0"}, "originalPosition": 34}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f29a1ad98f6903df9bb621599213e4663d166a14", "author": {"user": {"login": "asdoi", "name": null}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/f29a1ad98f6903df9bb621599213e4663d166a14", "committedDate": "2020-09-07T20:26:06Z", "message": "fix fallthrough"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2677, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}