{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAzNzI0MTQw", "number": 4533, "title": "Add progress bar when loading feeds in sidebar", "bodyText": "Closes #4523", "createdAt": "2020-10-15T00:17:28Z", "url": "https://github.com/AntennaPod/AntennaPod/pull/4533", "merged": true, "mergeCommit": {"oid": "1324c81f22a30c80d267f447bd3213b94516d134"}, "closed": true, "closedAt": "2020-10-16T11:55:10Z", "author": {"login": "Xeitor"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdSmcJ4gH2gAyNTAzNzI0MTQwOjQ4ZDE0ZWEyYTk3ZWE0YzA4YWI1YjhjNGRjZDA0NDY0NWJmOWJhMTQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdS4--6gBqjM4ODM3MTQwMzY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "48d14ea2a97ea4c08ab5b8c4dcd044645bf9ba14", "author": {"user": {"login": "Xeitor", "name": "Ezequiel"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/48d14ea2a97ea4c08ab5b8c4dcd044645bf9ba14", "committedDate": "2020-10-15T00:15:01Z", "message": "add progress bar when loading feeds in sidebar"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA5MTAyMTA2", "url": "https://github.com/AntennaPod/AntennaPod/pull/4533#pullrequestreview-509102106", "createdAt": "2020-10-15T07:43:51Z", "commit": {"oid": "48d14ea2a97ea4c08ab5b8c4dcd044645bf9ba14"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQwNzo0Mzo1MVrOHh4AJw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQwNzo0NDo1NVrOHh4FIQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTI4MjU5OQ==", "bodyText": "Instead of calling this, please move the progress bar further down in the layout xml file.", "url": "https://github.com/AntennaPod/AntennaPod/pull/4533#discussion_r505282599", "createdAt": "2020-10-15T07:43:51Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/fragment/NavDrawerFragment.java", "diffHunk": "@@ -91,6 +94,9 @@ public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup c\n                 startActivity(new Intent(getActivity(), PreferenceActivity.class)));\n         getContext().getSharedPreferences(PREF_NAME, Context.MODE_PRIVATE)\n                 .registerOnSharedPreferenceChangeListener(this);\n+\n+        progressBar = root.findViewById(R.id.progressBar);\n+        progressBar.bringToFront();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "48d14ea2a97ea4c08ab5b8c4dcd044645bf9ba14"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTI4MzI4OQ==", "bodyText": "Please also set the view to gone when there is an error (line below).", "url": "https://github.com/AntennaPod/AntennaPod/pull/4533#discussion_r505283289", "createdAt": "2020-10-15T07:44:27Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/fragment/NavDrawerFragment.java", "diffHunk": "@@ -354,13 +360,15 @@ public int getFeedCounterSum() {\n     };\n \n     private void loadData() {\n+        progressBar.setVisibility(View.VISIBLE);\n         disposable = Observable.fromCallable(DBReader::getNavDrawerData)\n                 .subscribeOn(Schedulers.io())\n                 .observeOn(AndroidSchedulers.mainThread())\n                 .subscribe(result -> {\n                     navDrawerData = result;\n                     updateSelection(); // Selected item might be a feed\n                     navAdapter.notifyDataSetChanged();\n+                    progressBar.setVisibility(View.GONE);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "48d14ea2a97ea4c08ab5b8c4dcd044645bf9ba14"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTI4Mzg3Mw==", "bodyText": "Is this really needed? I think centering the progress bar should be enough.", "url": "https://github.com/AntennaPod/AntennaPod/pull/4533#discussion_r505283873", "createdAt": "2020-10-15T07:44:55Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/res/layout/nav_list.xml", "diffHunk": "@@ -62,6 +69,7 @@\n         android:layout_width=\"match_parent\"\n         android:layout_height=\"wrap_content\"\n         android:layout_above=\"@id/divider\"\n+        android:layout_below=\"@+id/progressBar\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "48d14ea2a97ea4c08ab5b8c4dcd044645bf9ba14"}, "originalPosition": 18}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "99dad6c856f5ca3a3d9f9edc5cedf8de7d2b17c6", "author": {"user": {"login": "Xeitor", "name": "Ezequiel"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/99dad6c856f5ca3a3d9f9edc5cedf8de7d2b17c6", "committedDate": "2020-10-15T20:04:26Z", "message": "fix code styles from pr review"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA5NzU4OTM3", "url": "https://github.com/AntennaPod/AntennaPod/pull/4533#pullrequestreview-509758937", "createdAt": "2020-10-15T20:12:59Z", "commit": {"oid": "99dad6c856f5ca3a3d9f9edc5cedf8de7d2b17c6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQyMDoxMjo1OVrOHiYQHw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQyMDoxMjo1OVrOHiYQHw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTgxMDk3NQ==", "bodyText": "It's a bit strange but apparently, the code style checker is happy when doing something like this:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                progressBar.setVisibility(View.GONE);\n          \n          \n            \n                            }, error -> {\n          \n          \n            \n                                Log.e(TAG, Log.getStackTraceString(error));\n          \n          \n            \n                                progressBar.setVisibility(View.GONE); },\n          \n          \n            \n                            error -> {\n          \n          \n            \n                                Log.e(TAG, Log.getStackTraceString(error));", "url": "https://github.com/AntennaPod/AntennaPod/pull/4533#discussion_r505810975", "createdAt": "2020-10-15T20:12:59Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/fragment/NavDrawerFragment.java", "diffHunk": "@@ -354,14 +358,19 @@ public int getFeedCounterSum() {\n     };\n \n     private void loadData() {\n+        progressBar.setVisibility(View.VISIBLE);\n         disposable = Observable.fromCallable(DBReader::getNavDrawerData)\n                 .subscribeOn(Schedulers.io())\n                 .observeOn(AndroidSchedulers.mainThread())\n                 .subscribe(result -> {\n                     navDrawerData = result;\n                     updateSelection(); // Selected item might be a feed\n                     navAdapter.notifyDataSetChanged();\n-                }, error -> Log.e(TAG, Log.getStackTraceString(error)));\n+                    progressBar.setVisibility(View.GONE);\n+                }, error -> {\n+                    Log.e(TAG, Log.getStackTraceString(error));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "99dad6c856f5ca3a3d9f9edc5cedf8de7d2b17c6"}, "originalPosition": 40}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA5Nzk2MTM3", "url": "https://github.com/AntennaPod/AntennaPod/pull/4533#pullrequestreview-509796137", "createdAt": "2020-10-15T20:47:09Z", "commit": {"oid": "6125b0da4d176ee5305f9b51af9c0a7dc9f0ab5f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQyMDo0NzowOVrOHiZtZg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQyMDo0NzowOVrOHiZtZg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTgzNDg1NA==", "bodyText": "Sorry @Xeitor, looks like I was wrong. Checkstyle still complains. I experimented a bit and it looks like the following actually works :D\n                .subscribe(\n                    result -> {\n                        navDrawerData = result;\n                        updateSelection(); // Selected item might be a feed\n                        navAdapter.notifyDataSetChanged();\n                        progressBar.setVisibility(View.GONE);\n                    }, error -> {\n                        Log.e(TAG, Log.getStackTraceString(error));\n                        progressBar.setVisibility(View.GONE);\n                    });\n\n(add a line break for the lambda parameter)", "url": "https://github.com/AntennaPod/AntennaPod/pull/4533#discussion_r505834854", "createdAt": "2020-10-15T20:47:09Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/fragment/NavDrawerFragment.java", "diffHunk": "@@ -354,14 +358,19 @@ public int getFeedCounterSum() {\n     };\n \n     private void loadData() {\n+        progressBar.setVisibility(View.VISIBLE);\n         disposable = Observable.fromCallable(DBReader::getNavDrawerData)\n                 .subscribeOn(Schedulers.io())\n                 .observeOn(AndroidSchedulers.mainThread())\n                 .subscribe(result -> {\n                     navDrawerData = result;\n                     updateSelection(); // Selected item might be a feed\n                     navAdapter.notifyDataSetChanged();\n-                }, error -> Log.e(TAG, Log.getStackTraceString(error)));\n+                    progressBar.setVisibility(View.GONE); },\n+                error -> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6125b0da4d176ee5305f9b51af9c0a7dc9f0ab5f"}, "originalPosition": 39}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1462fe12de5eb10974ba3e69287014525611220a", "author": {"user": {"login": "Xeitor", "name": "Ezequiel"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/1462fe12de5eb10974ba3e69287014525611220a", "committedDate": "2020-10-15T21:50:26Z", "message": "add line break for lambda parameter"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6125b0da4d176ee5305f9b51af9c0a7dc9f0ab5f", "author": {"user": {"login": "Xeitor", "name": "Ezequiel"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/6125b0da4d176ee5305f9b51af9c0a7dc9f0ab5f", "committedDate": "2020-10-15T20:22:36Z", "message": "Update code style\n\nCo-authored-by: H. Lehmann <ByteHamster@users.noreply.github.com>"}, "afterCommit": {"oid": "1462fe12de5eb10974ba3e69287014525611220a", "author": {"user": {"login": "Xeitor", "name": "Ezequiel"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/1462fe12de5eb10974ba3e69287014525611220a", "committedDate": "2020-10-15T21:50:26Z", "message": "add line break for lambda parameter"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2735, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}