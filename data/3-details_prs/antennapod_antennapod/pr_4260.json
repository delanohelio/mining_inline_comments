{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM4ODU3MTU2", "number": 4260, "title": "fixes #1215 replacing share menu by dialog", "bodyText": "Description (required)\nreplacing share menu by dialog\nFixes #1215\nWhat changes did you make and why?\n\nNew ShareDialog created\nUpdating menus according to the new dialog (feeditems_options.xml, mediapalyer.xml)\nRefactor where the share links where accesed (FeedItemMenuHandler and MediaPlayerActivity)\n\nTested with freeDebug on Redmi Note 7 with API level 28 and Nexus 5X API level 28 (emulator).\nScreenshots\n\n\nI read some comments about the strings that contains \"URL\". Should I update and change \"URL\" for \"Link\"? If there's something wrong feel free to let me know. I will do the necesary changes\nNotes\n\nThe dialog is showed when you click the option \"Share...\" at menu and the info about the episode just as before. The difference is now it shows the dialog instead the submenu.", "createdAt": "2020-06-23T22:29:01Z", "url": "https://github.com/AntennaPod/AntennaPod/pull/4260", "merged": true, "mergeCommit": {"oid": "d110b1818bbfb0bbc9677b9fc44860c2a1a870ea"}, "closed": true, "closedAt": "2020-07-11T15:50:01Z", "author": {"login": "gerardolgvr"}, "timelineItems": {"totalCount": 25, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcuNASsgH2gAyNDM4ODU3MTU2OjAyMGQ1ODU5NzI1YjUzMjJmODVmYmYzZGI2ZDQzMzJjNDY3YjA4ZWY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABczma83gH2gAyNDM4ODU3MTU2OjlkMmMyZDhmMzcwYWY4NDkyMmY4MTk3ZTI1MmVlNDQ3NGQwYzNhY2I=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "020d5859725b5322f85fbf3db6d4332c467b08ef", "author": {"user": {"login": "gerardolgvr", "name": "Gerardo V\u00e1zquez"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/020d5859725b5322f85fbf3db6d4332c467b08ef", "committedDate": "2020-06-23T22:15:41Z", "message": "fixes #1215 replacing share menu by dialog"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e791cba7b83684bced83e4f91b489e0d04e4c6f1", "author": {"user": {"login": "gerardolgvr", "name": "Gerardo V\u00e1zquez"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/e791cba7b83684bced83e4f91b489e0d04e4c6f1", "committedDate": "2020-06-23T22:54:37Z", "message": "fixing checkstyle"}, "afterCommit": {"oid": "c78cb4e229a6d3c26cdcca2584d18fadda2a638a", "author": {"user": {"login": "gerardolgvr", "name": "Gerardo V\u00e1zquez"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/c78cb4e229a6d3c26cdcca2584d18fadda2a638a", "committedDate": "2020-06-23T23:17:23Z", "message": "fixing checkstyle"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c78cb4e229a6d3c26cdcca2584d18fadda2a638a", "author": {"user": {"login": "gerardolgvr", "name": "Gerardo V\u00e1zquez"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/c78cb4e229a6d3c26cdcca2584d18fadda2a638a", "committedDate": "2020-06-23T23:17:23Z", "message": "fixing checkstyle"}, "afterCommit": {"oid": "0d66e771fc473286fea3f28058fd7d74e8d3eb3c", "author": {"user": {"login": "gerardolgvr", "name": "Gerardo V\u00e1zquez"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/0d66e771fc473286fea3f28058fd7d74e8d3eb3c", "committedDate": "2020-06-23T23:24:13Z", "message": "fixing checkstyle"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0d66e771fc473286fea3f28058fd7d74e8d3eb3c", "author": {"user": {"login": "gerardolgvr", "name": "Gerardo V\u00e1zquez"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/0d66e771fc473286fea3f28058fd7d74e8d3eb3c", "committedDate": "2020-06-23T23:24:13Z", "message": "fixing checkstyle"}, "afterCommit": {"oid": "bddd5524e242d3394ba764d6034571af67307bc9", "author": {"user": {"login": "gerardolgvr", "name": "Gerardo V\u00e1zquez"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/bddd5524e242d3394ba764d6034571af67307bc9", "committedDate": "2020-06-23T23:27:10Z", "message": "fixing checkstyles"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1bc3639a39facc4c730fc5e1e7f1ae68b92b899e", "author": {"user": {"login": "gerardolgvr", "name": "Gerardo V\u00e1zquez"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/1bc3639a39facc4c730fc5e1e7f1ae68b92b899e", "committedDate": "2020-06-23T23:31:03Z", "message": "fixing checkstyles"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bddd5524e242d3394ba764d6034571af67307bc9", "author": {"user": {"login": "gerardolgvr", "name": "Gerardo V\u00e1zquez"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/bddd5524e242d3394ba764d6034571af67307bc9", "committedDate": "2020-06-23T23:27:10Z", "message": "fixing checkstyles"}, "afterCommit": {"oid": "1bc3639a39facc4c730fc5e1e7f1ae68b92b899e", "author": {"user": {"login": "gerardolgvr", "name": "Gerardo V\u00e1zquez"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/1bc3639a39facc4c730fc5e1e7f1ae68b92b899e", "committedDate": "2020-06-23T23:31:03Z", "message": "fixing checkstyles"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1b57b00fb32940c1de0baeffc91f2ca92bd90822", "author": {"user": {"login": "gerardolgvr", "name": "Gerardo V\u00e1zquez"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/1b57b00fb32940c1de0baeffc91f2ca92bd90822", "committedDate": "2020-06-26T15:58:37Z", "message": "updating share episode dialog"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8d6fab6ead5a8d69456a0494e2df6fd90f54e1d4", "author": {"user": {"login": "gerardolgvr", "name": "Gerardo V\u00e1zquez"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/8d6fab6ead5a8d69456a0494e2df6fd90f54e1d4", "committedDate": "2020-06-26T15:59:02Z", "message": "adding episode dialog tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b36078b8f198d166c31863558198510cf574e656", "author": {"user": {"login": "gerardolgvr", "name": "Gerardo V\u00e1zquez"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/b36078b8f198d166c31863558198510cf574e656", "committedDate": "2020-06-26T21:38:08Z", "message": "adding shared preferences to ShareEpisodeDialog"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d50ea58c11606fcfcbbc0644e993d8495ce3be2e", "author": {"user": {"login": "gerardolgvr", "name": "Gerardo V\u00e1zquez"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/d50ea58c11606fcfcbbc0644e993d8495ce3be2e", "committedDate": "2020-06-26T20:36:47Z", "message": "Adding shared preferences to ShareEpisodeDialog"}, "afterCommit": {"oid": "b36078b8f198d166c31863558198510cf574e656", "author": {"user": {"login": "gerardolgvr", "name": "Gerardo V\u00e1zquez"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/b36078b8f198d166c31863558198510cf574e656", "committedDate": "2020-06-26T21:38:08Z", "message": "adding shared preferences to ShareEpisodeDialog"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c8eb6ac1405e6c04622b434868e9d34ce5c79f8c", "author": {"user": {"login": "gerardolgvr", "name": "Gerardo V\u00e1zquez"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/c8eb6ac1405e6c04622b434868e9d34ce5c79f8c", "committedDate": "2020-06-26T23:08:07Z", "message": "fixing tests and shareDialogEpisode"}, "afterCommit": {"oid": "79167e30b26498e6f970cd13a8fb221ad4920bfa", "author": {"user": {"login": "gerardolgvr", "name": "Gerardo V\u00e1zquez"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/79167e30b26498e6f970cd13a8fb221ad4920bfa", "committedDate": "2020-06-26T23:11:22Z", "message": "fixing tests and ShareEpisodeDialog"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5363b09f0067a61db5451b4c794c9a3ab919ece6", "author": {"user": {"login": "gerardolgvr", "name": "Gerardo V\u00e1zquez"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/5363b09f0067a61db5451b4c794c9a3ab919ece6", "committedDate": "2020-06-26T23:52:48Z", "message": "fixing test and ShareEpisodeDialog"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "79167e30b26498e6f970cd13a8fb221ad4920bfa", "author": {"user": {"login": "gerardolgvr", "name": "Gerardo V\u00e1zquez"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/79167e30b26498e6f970cd13a8fb221ad4920bfa", "committedDate": "2020-06-26T23:11:22Z", "message": "fixing tests and ShareEpisodeDialog"}, "afterCommit": {"oid": "5363b09f0067a61db5451b4c794c9a3ab919ece6", "author": {"user": {"login": "gerardolgvr", "name": "Gerardo V\u00e1zquez"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/5363b09f0067a61db5451b4c794c9a3ab919ece6", "committedDate": "2020-06-26T23:52:48Z", "message": "fixing test and ShareEpisodeDialog"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM4NjgwMTA1", "url": "https://github.com/AntennaPod/AntennaPod/pull/4260#pullrequestreview-438680105", "createdAt": "2020-06-27T07:30:09Z", "commit": {"oid": "5363b09f0067a61db5451b4c794c9a3ab919ece6"}, "state": "COMMENTED", "comments": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yN1QwNzozMDoxMFrOGp0ATw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yN1QwNzo0NjowNVrOGp0FEQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjQ5Njg0Nw==", "bodyText": "I would move this to a dialogs package and name the class ShareDialogTest, so it is more modular", "url": "https://github.com/AntennaPod/AntennaPod/pull/4260#discussion_r446496847", "createdAt": "2020-06-27T07:30:10Z", "author": {"login": "ByteHamster"}, "path": "app/src/androidTest/java/de/test/antennapod/ui/DialogsTest.java", "diffHunk": "@@ -0,0 +1,98 @@\n+package de.test.antennapod.ui;\n+\n+import android.content.Intent;\n+import android.view.View;\n+import androidx.test.espresso.Espresso;\n+import androidx.test.espresso.contrib.RecyclerViewActions;\n+import androidx.test.espresso.intent.rule.IntentsTestRule;\n+import androidx.test.runner.AndroidJUnit4;\n+import de.danoeh.antennapod.R;\n+import de.danoeh.antennapod.activity.MainActivity;\n+import de.danoeh.antennapod.fragment.AddFeedFragment;\n+import de.danoeh.antennapod.fragment.DownloadsFragment;\n+import de.danoeh.antennapod.fragment.QueueFragment;\n+import de.danoeh.antennapod.fragment.SubscriptionFragment;\n+import de.test.antennapod.EspressoTestUtils;\n+import org.hamcrest.Matcher;\n+import org.hamcrest.Matchers;\n+import org.junit.Before;\n+import org.junit.Rule;\n+import org.junit.Test;\n+import org.junit.runner.RunWith;\n+\n+import static androidx.test.espresso.Espresso.onView;\n+import static androidx.test.espresso.action.ViewActions.clearText;\n+import static androidx.test.espresso.action.ViewActions.click;\n+import static androidx.test.espresso.action.ViewActions.closeSoftKeyboard;\n+import static androidx.test.espresso.action.ViewActions.scrollTo;\n+import static androidx.test.espresso.action.ViewActions.typeText;\n+import static androidx.test.espresso.assertion.ViewAssertions.matches;\n+import static androidx.test.espresso.matcher.RootMatchers.isDialog;\n+import static androidx.test.espresso.matcher.ViewMatchers.isDescendantOfA;\n+import static androidx.test.espresso.matcher.ViewMatchers.isDisplayed;\n+import static androidx.test.espresso.matcher.ViewMatchers.isRoot;\n+import static androidx.test.espresso.matcher.ViewMatchers.withClassName;\n+import static androidx.test.espresso.matcher.ViewMatchers.withContentDescription;\n+import static androidx.test.espresso.matcher.ViewMatchers.withId;\n+import static androidx.test.espresso.matcher.ViewMatchers.withText;\n+import static de.test.antennapod.EspressoTestUtils.waitForView;\n+import static de.test.antennapod.NthMatcher.first;\n+import static org.hamcrest.CoreMatchers.allOf;\n+import static org.hamcrest.CoreMatchers.endsWith;\n+\n+/**\n+ * User interface tests for queue fragment.\n+ */\n+@RunWith(AndroidJUnit4.class)\n+public class DialogsTest {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5363b09f0067a61db5451b4c794c9a3ab919ece6"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjQ5Njk1Ng==", "bodyText": "We already have a class UITestUtils that automatically adds and hosts a podcast. I would prefer that over a real podcast because it makes us less dependent on somebody else. See PlaybackTest for example usage.", "url": "https://github.com/AntennaPod/AntennaPod/pull/4260#discussion_r446496956", "createdAt": "2020-06-27T07:31:49Z", "author": {"login": "ByteHamster"}, "path": "app/src/androidTest/java/de/test/antennapod/ui/DialogsTest.java", "diffHunk": "@@ -0,0 +1,98 @@\n+package de.test.antennapod.ui;\n+\n+import android.content.Intent;\n+import android.view.View;\n+import androidx.test.espresso.Espresso;\n+import androidx.test.espresso.contrib.RecyclerViewActions;\n+import androidx.test.espresso.intent.rule.IntentsTestRule;\n+import androidx.test.runner.AndroidJUnit4;\n+import de.danoeh.antennapod.R;\n+import de.danoeh.antennapod.activity.MainActivity;\n+import de.danoeh.antennapod.fragment.AddFeedFragment;\n+import de.danoeh.antennapod.fragment.DownloadsFragment;\n+import de.danoeh.antennapod.fragment.QueueFragment;\n+import de.danoeh.antennapod.fragment.SubscriptionFragment;\n+import de.test.antennapod.EspressoTestUtils;\n+import org.hamcrest.Matcher;\n+import org.hamcrest.Matchers;\n+import org.junit.Before;\n+import org.junit.Rule;\n+import org.junit.Test;\n+import org.junit.runner.RunWith;\n+\n+import static androidx.test.espresso.Espresso.onView;\n+import static androidx.test.espresso.action.ViewActions.clearText;\n+import static androidx.test.espresso.action.ViewActions.click;\n+import static androidx.test.espresso.action.ViewActions.closeSoftKeyboard;\n+import static androidx.test.espresso.action.ViewActions.scrollTo;\n+import static androidx.test.espresso.action.ViewActions.typeText;\n+import static androidx.test.espresso.assertion.ViewAssertions.matches;\n+import static androidx.test.espresso.matcher.RootMatchers.isDialog;\n+import static androidx.test.espresso.matcher.ViewMatchers.isDescendantOfA;\n+import static androidx.test.espresso.matcher.ViewMatchers.isDisplayed;\n+import static androidx.test.espresso.matcher.ViewMatchers.isRoot;\n+import static androidx.test.espresso.matcher.ViewMatchers.withClassName;\n+import static androidx.test.espresso.matcher.ViewMatchers.withContentDescription;\n+import static androidx.test.espresso.matcher.ViewMatchers.withId;\n+import static androidx.test.espresso.matcher.ViewMatchers.withText;\n+import static de.test.antennapod.EspressoTestUtils.waitForView;\n+import static de.test.antennapod.NthMatcher.first;\n+import static org.hamcrest.CoreMatchers.allOf;\n+import static org.hamcrest.CoreMatchers.endsWith;\n+\n+/**\n+ * User interface tests for queue fragment.\n+ */\n+@RunWith(AndroidJUnit4.class)\n+public class DialogsTest {\n+\n+    @Rule\n+    public IntentsTestRule<MainActivity> activityRule = new IntentsTestRule<>(MainActivity.class, false, false);\n+\n+    @Before\n+    public void setUp() throws InterruptedException {\n+        EspressoTestUtils.clearPreferences();\n+        EspressoTestUtils.clearDatabase();\n+        EspressoTestUtils.setLastNavFragment(AddFeedFragment.TAG);\n+        activityRule.launchActivity(new Intent());\n+\n+        String url = \"https://omny.fm/shows/silence-is-not-an-option/why-not-being-racist-is-not-enough\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5363b09f0067a61db5451b4c794c9a3ab919ece6"}, "originalPosition": 59}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjQ5NzEwMw==", "bodyText": "Explicit sleep calls are usually not good for tests. It either makes them slow or it makes them fast but fails sometimes. Espresso should theoretically wait for the UI thread automatically.", "url": "https://github.com/AntennaPod/AntennaPod/pull/4260#discussion_r446497103", "createdAt": "2020-06-27T07:33:39Z", "author": {"login": "ByteHamster"}, "path": "app/src/androidTest/java/de/test/antennapod/ui/DialogsTest.java", "diffHunk": "@@ -0,0 +1,98 @@\n+package de.test.antennapod.ui;\n+\n+import android.content.Intent;\n+import android.view.View;\n+import androidx.test.espresso.Espresso;\n+import androidx.test.espresso.contrib.RecyclerViewActions;\n+import androidx.test.espresso.intent.rule.IntentsTestRule;\n+import androidx.test.runner.AndroidJUnit4;\n+import de.danoeh.antennapod.R;\n+import de.danoeh.antennapod.activity.MainActivity;\n+import de.danoeh.antennapod.fragment.AddFeedFragment;\n+import de.danoeh.antennapod.fragment.DownloadsFragment;\n+import de.danoeh.antennapod.fragment.QueueFragment;\n+import de.danoeh.antennapod.fragment.SubscriptionFragment;\n+import de.test.antennapod.EspressoTestUtils;\n+import org.hamcrest.Matcher;\n+import org.hamcrest.Matchers;\n+import org.junit.Before;\n+import org.junit.Rule;\n+import org.junit.Test;\n+import org.junit.runner.RunWith;\n+\n+import static androidx.test.espresso.Espresso.onView;\n+import static androidx.test.espresso.action.ViewActions.clearText;\n+import static androidx.test.espresso.action.ViewActions.click;\n+import static androidx.test.espresso.action.ViewActions.closeSoftKeyboard;\n+import static androidx.test.espresso.action.ViewActions.scrollTo;\n+import static androidx.test.espresso.action.ViewActions.typeText;\n+import static androidx.test.espresso.assertion.ViewAssertions.matches;\n+import static androidx.test.espresso.matcher.RootMatchers.isDialog;\n+import static androidx.test.espresso.matcher.ViewMatchers.isDescendantOfA;\n+import static androidx.test.espresso.matcher.ViewMatchers.isDisplayed;\n+import static androidx.test.espresso.matcher.ViewMatchers.isRoot;\n+import static androidx.test.espresso.matcher.ViewMatchers.withClassName;\n+import static androidx.test.espresso.matcher.ViewMatchers.withContentDescription;\n+import static androidx.test.espresso.matcher.ViewMatchers.withId;\n+import static androidx.test.espresso.matcher.ViewMatchers.withText;\n+import static de.test.antennapod.EspressoTestUtils.waitForView;\n+import static de.test.antennapod.NthMatcher.first;\n+import static org.hamcrest.CoreMatchers.allOf;\n+import static org.hamcrest.CoreMatchers.endsWith;\n+\n+/**\n+ * User interface tests for queue fragment.\n+ */\n+@RunWith(AndroidJUnit4.class)\n+public class DialogsTest {\n+\n+    @Rule\n+    public IntentsTestRule<MainActivity> activityRule = new IntentsTestRule<>(MainActivity.class, false, false);\n+\n+    @Before\n+    public void setUp() throws InterruptedException {\n+        EspressoTestUtils.clearPreferences();\n+        EspressoTestUtils.clearDatabase();\n+        EspressoTestUtils.setLastNavFragment(AddFeedFragment.TAG);\n+        activityRule.launchActivity(new Intent());\n+\n+        String url = \"https://omny.fm/shows/silence-is-not-an-option/why-not-being-racist-is-not-enough\";\n+\n+        onView(withId(R.id.btn_add_via_url)).perform(scrollTo()).perform(click());\n+        onView(withId(R.id.text)).perform(clearText(), typeText(url));\n+        onView(withText(R.string.confirm_label)).inRoot(isDialog())\n+                .check(matches(isDisplayed()))\n+                .perform(closeSoftKeyboard())\n+                .perform(scrollTo())\n+                .perform(click());\n+        Thread.sleep(5000);\n+        onView(withId(R.id.butSubscribe)).perform(click());\n+        Thread.sleep(5000);\n+        onView(withId(R.id.recyclerView))\n+                .perform(RecyclerViewActions.actionOnItemAtPosition(0, click()));\n+        Thread.sleep(3000);\n+        onView(first(EspressoTestUtils.actionBarOverflow())).perform(click());\n+    }\n+\n+    @Test\n+    public void testShareDialogDisplayed() {\n+        onView(withText(R.string.share_label)).perform(scrollTo()).perform(click());\n+        onView(allOf(isDisplayed(), withText(R.string.share_episode_label)));\n+    }\n+\n+    @Test\n+    public void testShareDialogShareButton() throws InterruptedException {\n+        onView(withText(R.string.share_label)).perform(scrollTo()).perform(click());\n+        onView(allOf(isDisplayed(), withText(R.string.share_label)));\n+        Thread.sleep(1000);\n+        onView(withText(R.string.share_episode_positive_label_button)).perform(scrollTo()).perform(click());\n+        Thread.sleep(2000);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5363b09f0067a61db5451b4c794c9a3ab919ece6"}, "originalPosition": 89}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjQ5NzM2NA==", "bodyText": "Please use a preference store specifically for the dialog. This reduces the probability of name collisions. ctx.getSharedPreferences (SHARE_DIALOG_PREFS, Context.MODE_PRIVATE)", "url": "https://github.com/AntennaPod/AntennaPod/pull/4260#discussion_r446497364", "createdAt": "2020-06-27T07:36:59Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/dialog/ShareDialog.java", "diffHunk": "@@ -0,0 +1,121 @@\n+package de.danoeh.antennapod.dialog;\n+\n+import android.app.Dialog;\n+import android.content.Context;\n+import android.content.DialogInterface;\n+import android.content.SharedPreferences;\n+import android.os.Bundle;\n+import android.preference.PreferenceManager;\n+import android.view.View;\n+import android.widget.RadioButton;\n+import android.widget.RadioGroup;\n+import android.widget.Switch;\n+import android.widget.Toast;\n+\n+import androidx.annotation.NonNull;\n+import androidx.annotation.Nullable;\n+import androidx.appcompat.app.AlertDialog;\n+import androidx.fragment.app.DialogFragment;\n+import de.danoeh.antennapod.R;\n+import de.danoeh.antennapod.core.feed.FeedItem;\n+import de.danoeh.antennapod.core.preferences.UserPreferences;\n+import de.danoeh.antennapod.core.util.ShareUtils;\n+\n+public class ShareDialog extends DialogFragment {\n+\n+    private static final String TAG = \"ShareDialog\";\n+    private final Context ctx;\n+    private FeedItem item;\n+\n+    private RadioGroup radioGroup;\n+    private RadioButton radioEpisodeWebsite;\n+    private RadioButton radioMediaFile;\n+    private Switch switchStartAt;\n+    private SharedPreferences prefs;\n+\n+    public ShareDialog(Context ctx, FeedItem item) {\n+        this.ctx = ctx;\n+        this.item = item;\n+        prefs = PreferenceManager.getDefaultSharedPreferences(ctx);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5363b09f0067a61db5451b4c794c9a3ab919ece6"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjQ5NzQzNA==", "bodyText": "Please decouple this from the UserPreferences class (that class is already huge). Just create the constants here -- they are not needed globally.", "url": "https://github.com/AntennaPod/AntennaPod/pull/4260#discussion_r446497434", "createdAt": "2020-06-27T07:37:48Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/dialog/ShareDialog.java", "diffHunk": "@@ -0,0 +1,121 @@\n+package de.danoeh.antennapod.dialog;\n+\n+import android.app.Dialog;\n+import android.content.Context;\n+import android.content.DialogInterface;\n+import android.content.SharedPreferences;\n+import android.os.Bundle;\n+import android.preference.PreferenceManager;\n+import android.view.View;\n+import android.widget.RadioButton;\n+import android.widget.RadioGroup;\n+import android.widget.Switch;\n+import android.widget.Toast;\n+\n+import androidx.annotation.NonNull;\n+import androidx.annotation.Nullable;\n+import androidx.appcompat.app.AlertDialog;\n+import androidx.fragment.app.DialogFragment;\n+import de.danoeh.antennapod.R;\n+import de.danoeh.antennapod.core.feed.FeedItem;\n+import de.danoeh.antennapod.core.preferences.UserPreferences;\n+import de.danoeh.antennapod.core.util.ShareUtils;\n+\n+public class ShareDialog extends DialogFragment {\n+\n+    private static final String TAG = \"ShareDialog\";\n+    private final Context ctx;\n+    private FeedItem item;\n+\n+    private RadioGroup radioGroup;\n+    private RadioButton radioEpisodeWebsite;\n+    private RadioButton radioMediaFile;\n+    private Switch switchStartAt;\n+    private SharedPreferences prefs;\n+\n+    public ShareDialog(Context ctx, FeedItem item) {\n+        this.ctx = ctx;\n+        this.item = item;\n+        prefs = PreferenceManager.getDefaultSharedPreferences(ctx);\n+    }\n+\n+    @NonNull\n+    @Override\n+    public Dialog onCreateDialog(@Nullable Bundle savedInstanceState) {\n+        View content = View.inflate(ctx, R.layout.share_episode_dialog, null);\n+        AlertDialog.Builder builder = new AlertDialog.Builder(ctx);\n+        builder.setTitle(R.string.share_episode_label);\n+        builder.setView(content);\n+\n+        radioGroup = content.findViewById(R.id.share_dialog_radio_group);\n+        radioEpisodeWebsite = content.findViewById(R.id.share_episode_website_radio);\n+        radioMediaFile = content.findViewById(R.id.share_media_file_radio);\n+        switchStartAt = content.findViewById(R.id.share_start_at_timer_dialog);\n+\n+        setupOptions();\n+\n+        builder\n+                .setPositiveButton(R.string.share_episode_positive_label_button, new DialogInterface.OnClickListener() {\n+                    @Override\n+                    public void onClick(DialogInterface dialog, int id) {\n+                        if (radioEpisodeWebsite.isChecked()) {\n+                            if (switchStartAt.isChecked()) {\n+                                ShareUtils.shareFeedItemLink(ctx, item, true);\n+                                prefs.edit().putBoolean(UserPreferences.PREF_SHARE_EPISODE_START_AT, true).apply();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5363b09f0067a61db5451b4c794c9a3ab919ece6"}, "originalPosition": 64}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjQ5NzY0MA==", "bodyText": "Can you please shorten this? These checks look pretty big and I think they can be simplified, eg. something like this:\nShareUtils.shareFeedItemDownloadLink(ctx, item, switchStartAt.isChecked());\nprefs.edit().putBoolean(UserPreferences.PREF_SHARE_EPISODE_START_AT, switchStartAt.isChecked()).apply();", "url": "https://github.com/AntennaPod/AntennaPod/pull/4260#discussion_r446497640", "createdAt": "2020-06-27T07:40:40Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/dialog/ShareDialog.java", "diffHunk": "@@ -0,0 +1,121 @@\n+package de.danoeh.antennapod.dialog;\n+\n+import android.app.Dialog;\n+import android.content.Context;\n+import android.content.DialogInterface;\n+import android.content.SharedPreferences;\n+import android.os.Bundle;\n+import android.preference.PreferenceManager;\n+import android.view.View;\n+import android.widget.RadioButton;\n+import android.widget.RadioGroup;\n+import android.widget.Switch;\n+import android.widget.Toast;\n+\n+import androidx.annotation.NonNull;\n+import androidx.annotation.Nullable;\n+import androidx.appcompat.app.AlertDialog;\n+import androidx.fragment.app.DialogFragment;\n+import de.danoeh.antennapod.R;\n+import de.danoeh.antennapod.core.feed.FeedItem;\n+import de.danoeh.antennapod.core.preferences.UserPreferences;\n+import de.danoeh.antennapod.core.util.ShareUtils;\n+\n+public class ShareDialog extends DialogFragment {\n+\n+    private static final String TAG = \"ShareDialog\";\n+    private final Context ctx;\n+    private FeedItem item;\n+\n+    private RadioGroup radioGroup;\n+    private RadioButton radioEpisodeWebsite;\n+    private RadioButton radioMediaFile;\n+    private Switch switchStartAt;\n+    private SharedPreferences prefs;\n+\n+    public ShareDialog(Context ctx, FeedItem item) {\n+        this.ctx = ctx;\n+        this.item = item;\n+        prefs = PreferenceManager.getDefaultSharedPreferences(ctx);\n+    }\n+\n+    @NonNull\n+    @Override\n+    public Dialog onCreateDialog(@Nullable Bundle savedInstanceState) {\n+        View content = View.inflate(ctx, R.layout.share_episode_dialog, null);\n+        AlertDialog.Builder builder = new AlertDialog.Builder(ctx);\n+        builder.setTitle(R.string.share_episode_label);\n+        builder.setView(content);\n+\n+        radioGroup = content.findViewById(R.id.share_dialog_radio_group);\n+        radioEpisodeWebsite = content.findViewById(R.id.share_episode_website_radio);\n+        radioMediaFile = content.findViewById(R.id.share_media_file_radio);\n+        switchStartAt = content.findViewById(R.id.share_start_at_timer_dialog);\n+\n+        setupOptions();\n+\n+        builder\n+                .setPositiveButton(R.string.share_episode_positive_label_button, new DialogInterface.OnClickListener() {\n+                    @Override\n+                    public void onClick(DialogInterface dialog, int id) {\n+                        if (radioEpisodeWebsite.isChecked()) {\n+                            if (switchStartAt.isChecked()) {\n+                                ShareUtils.shareFeedItemLink(ctx, item, true);\n+                                prefs.edit().putBoolean(UserPreferences.PREF_SHARE_EPISODE_START_AT, true).apply();\n+                            } else {\n+                                ShareUtils.shareFeedItemLink(ctx, item);\n+                                prefs.edit().putBoolean(UserPreferences.PREF_SHARE_EPISODE_START_AT, false).apply();\n+                            }\n+                            prefs.edit().putBoolean(UserPreferences.PREF_SHARE_EPISODE_WEBSITE, true).apply();\n+                            prefs.edit().putBoolean(UserPreferences.PREF_SHARE_EPISODE_MEDIA, false).apply();\n+                        } else {\n+                            if (switchStartAt.isChecked()) {\n+                                ShareUtils.shareFeedItemDownloadLink(ctx, item, true);\n+                                prefs.edit().putBoolean(UserPreferences.PREF_SHARE_EPISODE_START_AT, true).apply();\n+                            } else {\n+                                ShareUtils.shareFeedItemDownloadLink(ctx, item);\n+                                prefs.edit().putBoolean(UserPreferences.PREF_SHARE_EPISODE_START_AT, false).apply();\n+                            }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5363b09f0067a61db5451b4c794c9a3ab919ece6"}, "originalPosition": 78}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjQ5Nzc3Ng==", "bodyText": "What about Playback position?", "url": "https://github.com/AntennaPod/AntennaPod/pull/4260#discussion_r446497776", "createdAt": "2020-06-27T07:42:16Z", "author": {"login": "ByteHamster"}, "path": "core/src/main/res/values/strings.xml", "diffHunk": "@@ -765,6 +765,14 @@\n     <string name=\"rating_later_label\">Remind me later</string>\n     <string name=\"rating_now_label\">Sure, let\\'s do this!</string>\n \n+    <!-- Share episode dialog -->\n+    <string name=\"share_episode_label\">Share\u2026</string>\n+    <string name=\"share_episode_positive_label_button\">Share</string>\n+    <string name=\"share_dialog_include_label\">Include:</string>\n+    <string name=\"share_start_at_timer_dialog_label\">Start at (timer)</string>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5363b09f0067a61db5451b4c794c9a3ab919ece6"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjQ5Nzg2NQ==", "bodyText": "Is there a string that already contains this text? If so, please use the old one instead. This reduces inconsistency when translators translate them differently.", "url": "https://github.com/AntennaPod/AntennaPod/pull/4260#discussion_r446497865", "createdAt": "2020-06-27T07:43:34Z", "author": {"login": "ByteHamster"}, "path": "core/src/main/res/values/strings.xml", "diffHunk": "@@ -765,6 +765,14 @@\n     <string name=\"rating_later_label\">Remind me later</string>\n     <string name=\"rating_now_label\">Sure, let\\'s do this!</string>\n \n+    <!-- Share episode dialog -->\n+    <string name=\"share_episode_label\">Share\u2026</string>\n+    <string name=\"share_episode_positive_label_button\">Share</string>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5363b09f0067a61db5451b4c794c9a3ab919ece6"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjQ5ODA2NQ==", "bodyText": "Please change the type of context instead of casting (fragment.getActivity()?). I fear that this could lead to runtime crashes otherwise.", "url": "https://github.com/AntennaPod/AntennaPod/pull/4260#discussion_r446498065", "createdAt": "2020-06-27T07:46:05Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/menuhandler/FeedItemMenuHandler.java", "diffHunk": "@@ -243,20 +235,9 @@ public static boolean onMenuItemClicked(@NonNull Fragment fragment, int menuItem\n             case R.id.visit_website_item:\n                 IntentUtils.openInBrowser(context, FeedItemUtil.getLinkWithFallback(selectedItem));\n                 break;\n-            case R.id.share_link_item:\n-                ShareUtils.shareFeedItemLink(context, selectedItem);\n-                break;\n-            case R.id.share_download_url_item:\n-                ShareUtils.shareFeedItemDownloadLink(context, selectedItem);\n-                break;\n-            case R.id.share_link_with_position_item:\n-                ShareUtils.shareFeedItemLink(context, selectedItem, true);\n-                break;\n-            case R.id.share_download_url_with_position_item:\n-                ShareUtils.shareFeedItemDownloadLink(context, selectedItem, true);\n-                break;\n-            case R.id.share_file:\n-                ShareUtils.shareFeedItemFile(context, selectedItem.getMedia());\n+            case R.id.share_item:\n+                new ShareDialog(context, selectedItem)\n+                        .show(((AppCompatActivity) context).getSupportFragmentManager(), \"ShareEpisodeDialog\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5363b09f0067a61db5451b4c794c9a3ab919ece6"}, "originalPosition": 68}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "61df26aacdd053fb849fdfea4f8a00a035adf90b", "author": {"user": {"login": "gerardolgvr", "name": "Gerardo V\u00e1zquez"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/61df26aacdd053fb849fdfea4f8a00a035adf90b", "committedDate": "2020-06-28T21:49:49Z", "message": "updating ShareDialog according to code review"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5608336d0d2a334025fd290371d92f1d9889ed35", "author": {"user": {"login": "gerardolgvr", "name": "Gerardo V\u00e1zquez"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/5608336d0d2a334025fd290371d92f1d9889ed35", "committedDate": "2020-06-28T22:08:58Z", "message": "removing unused imports at ShareDialogTest"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a2dafc0aa589005cbfa9db47c8f253b802e28b38", "author": {"user": {"login": "gerardolgvr", "name": "Gerardo V\u00e1zquez"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/a2dafc0aa589005cbfa9db47c8f253b802e28b38", "committedDate": "2020-06-28T22:22:27Z", "message": "Adding submenu when Sharing a Podcast"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0cb17304e719789655ab252cc45b251561773214", "author": {"user": {"login": "gerardolgvr", "name": "Gerardo V\u00e1zquez"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/0cb17304e719789655ab252cc45b251561773214", "committedDate": "2020-07-01T21:59:20Z", "message": "updating strings xml for share dialog and share podcast"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1d2795e5e79dda4a5e6d762e30a8df864a9fce51", "author": {"user": {"login": "gerardolgvr", "name": "Gerardo V\u00e1zquez"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/1d2795e5e79dda4a5e6d762e30a8df864a9fce51", "committedDate": "2020-07-01T04:18:20Z", "message": "updating strings xml for share dialog and share podcast"}, "afterCommit": {"oid": "0cb17304e719789655ab252cc45b251561773214", "author": {"user": {"login": "gerardolgvr", "name": "Gerardo V\u00e1zquez"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/0cb17304e719789655ab252cc45b251561773214", "committedDate": "2020-07-01T21:59:20Z", "message": "updating strings xml for share dialog and share podcast"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQzNDA1MTk5", "url": "https://github.com/AntennaPod/AntennaPod/pull/4260#pullrequestreview-443405199", "createdAt": "2020-07-06T21:01:58Z", "commit": {"oid": "0cb17304e719789655ab252cc45b251561773214"}, "state": "COMMENTED", "comments": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNlQyMTowMTo1OFrOGtnABg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNlQyMToyNzoyOVrOGtnqiw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDQ3ODA4Ng==", "bodyText": "The comment is wrong :)", "url": "https://github.com/AntennaPod/AntennaPod/pull/4260#discussion_r450478086", "createdAt": "2020-07-06T21:01:58Z", "author": {"login": "ByteHamster"}, "path": "app/src/androidTest/java/de/test/antennapod/dialogs/ShareDialogTest.java", "diffHunk": "@@ -0,0 +1,94 @@\n+package de.test.antennapod.dialogs;\n+\n+import android.content.Context;\n+import android.content.Intent;\n+import android.view.View;\n+\n+import org.hamcrest.Description;\n+import org.hamcrest.Matcher;\n+import org.hamcrest.Matchers;\n+import org.hamcrest.TypeSafeMatcher;\n+import org.junit.Before;\n+import org.junit.Rule;\n+import org.junit.Test;\n+import org.junit.runner.RunWith;\n+\n+import java.util.List;\n+\n+import androidx.test.espresso.intent.rule.IntentsTestRule;\n+import androidx.test.platform.app.InstrumentationRegistry;\n+import androidx.test.runner.AndroidJUnit4;\n+import de.danoeh.antennapod.R;\n+import de.danoeh.antennapod.activity.MainActivity;\n+import de.danoeh.antennapod.core.feed.FeedItem;\n+import de.danoeh.antennapod.core.storage.DBReader;\n+import de.danoeh.antennapod.fragment.EpisodesFragment;\n+import de.test.antennapod.EspressoTestUtils;\n+import de.test.antennapod.ui.UITestUtils;\n+\n+import static androidx.test.espresso.Espresso.onView;\n+import static androidx.test.espresso.action.ViewActions.click;\n+import static androidx.test.espresso.action.ViewActions.scrollTo;\n+import static androidx.test.espresso.assertion.ViewAssertions.matches;\n+import static androidx.test.espresso.contrib.RecyclerViewActions.actionOnItemAtPosition;\n+import static androidx.test.espresso.matcher.ViewMatchers.hasMinimumChildCount;\n+import static androidx.test.espresso.matcher.ViewMatchers.isDisplayed;\n+import static androidx.test.espresso.matcher.ViewMatchers.isRoot;\n+import static androidx.test.espresso.matcher.ViewMatchers.withId;\n+import static androidx.test.espresso.matcher.ViewMatchers.withText;\n+import static de.test.antennapod.EspressoTestUtils.onDrawerItem;\n+import static de.test.antennapod.EspressoTestUtils.openNavDrawer;\n+import static de.test.antennapod.EspressoTestUtils.waitForView;\n+import static de.test.antennapod.NthMatcher.first;\n+import static org.hamcrest.CoreMatchers.allOf;\n+\n+/**\n+ * User interface tests for queue fragment.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0cb17304e719789655ab252cc45b251561773214"}, "originalPosition": 46}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDQ3OTg4Ng==", "bodyText": "Instead of passing parameters, please use arguments (see https://stackoverflow.com/a/15459259/4193263). This prevents issues when the system recreates the fragment (after the app was in background, for example). We use the newInstance pattern in other parts of the app, too, so this would also be consistent.", "url": "https://github.com/AntennaPod/AntennaPod/pull/4260#discussion_r450479886", "createdAt": "2020-07-06T21:05:59Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/dialog/ShareDialog.java", "diffHunk": "@@ -0,0 +1,117 @@\n+package de.danoeh.antennapod.dialog;\n+\n+import android.app.Dialog;\n+import android.content.Context;\n+import android.content.DialogInterface;\n+import android.content.SharedPreferences;\n+import android.os.Bundle;\n+import android.preference.PreferenceManager;\n+import android.view.View;\n+import android.widget.RadioButton;\n+import android.widget.RadioGroup;\n+import android.widget.Switch;\n+import android.widget.Toast;\n+\n+import androidx.annotation.NonNull;\n+import androidx.annotation.Nullable;\n+import androidx.appcompat.app.AlertDialog;\n+import androidx.fragment.app.DialogFragment;\n+import de.danoeh.antennapod.R;\n+import de.danoeh.antennapod.core.feed.FeedItem;\n+import de.danoeh.antennapod.core.preferences.UserPreferences;\n+import de.danoeh.antennapod.core.util.ShareUtils;\n+\n+public class ShareDialog extends DialogFragment {\n+\n+    private static final String TAG = \"ShareDialog\";\n+    private final Context ctx;\n+    private FeedItem item;\n+\n+    private static final String PREF_SHARE_EPISODE_WEBSITE = \"prefShareEpisodeWebsite\";\n+    private static final String PREF_SHARE_EPISODE_MEDIA = \"prefShareEpisodeMedia\";\n+    private static final String PREF_SHARE_EPISODE_START_AT = \"prefShareEpisodeStartAt\";\n+\n+    private RadioGroup radioGroup;\n+    private RadioButton radioEpisodeWebsite;\n+    private RadioButton radioMediaFile;\n+    private Switch switchStartAt;\n+    private SharedPreferences prefs;\n+\n+    public ShareDialog(Context ctx, FeedItem item) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0cb17304e719789655ab252cc45b251561773214"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDQ4MTU3MQ==", "bodyText": "Please use ShareDialog for the name. This is more consistent with the other preference files.", "url": "https://github.com/AntennaPod/AntennaPod/pull/4260#discussion_r450481571", "createdAt": "2020-07-06T21:09:51Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/dialog/ShareDialog.java", "diffHunk": "@@ -0,0 +1,117 @@\n+package de.danoeh.antennapod.dialog;\n+\n+import android.app.Dialog;\n+import android.content.Context;\n+import android.content.DialogInterface;\n+import android.content.SharedPreferences;\n+import android.os.Bundle;\n+import android.preference.PreferenceManager;\n+import android.view.View;\n+import android.widget.RadioButton;\n+import android.widget.RadioGroup;\n+import android.widget.Switch;\n+import android.widget.Toast;\n+\n+import androidx.annotation.NonNull;\n+import androidx.annotation.Nullable;\n+import androidx.appcompat.app.AlertDialog;\n+import androidx.fragment.app.DialogFragment;\n+import de.danoeh.antennapod.R;\n+import de.danoeh.antennapod.core.feed.FeedItem;\n+import de.danoeh.antennapod.core.preferences.UserPreferences;\n+import de.danoeh.antennapod.core.util.ShareUtils;\n+\n+public class ShareDialog extends DialogFragment {\n+\n+    private static final String TAG = \"ShareDialog\";\n+    private final Context ctx;\n+    private FeedItem item;\n+\n+    private static final String PREF_SHARE_EPISODE_WEBSITE = \"prefShareEpisodeWebsite\";\n+    private static final String PREF_SHARE_EPISODE_MEDIA = \"prefShareEpisodeMedia\";\n+    private static final String PREF_SHARE_EPISODE_START_AT = \"prefShareEpisodeStartAt\";\n+\n+    private RadioGroup radioGroup;\n+    private RadioButton radioEpisodeWebsite;\n+    private RadioButton radioMediaFile;\n+    private Switch switchStartAt;\n+    private SharedPreferences prefs;\n+\n+    public ShareDialog(Context ctx, FeedItem item) {\n+        this.ctx = ctx;\n+        this.item = item;\n+        prefs = ctx.getSharedPreferences(\"SHARE_DIALOG_PREFS\", Context.MODE_PRIVATE);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0cb17304e719789655ab252cc45b251561773214"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDQ4MjcwOQ==", "bodyText": "Could you please remove the newline between builder and setPositiveButton and move the indentation of the listener to the left? I think checkstyle should be happy then, too, and it uses less horizontal space.", "url": "https://github.com/AntennaPod/AntennaPod/pull/4260#discussion_r450482709", "createdAt": "2020-07-06T21:12:23Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/dialog/ShareDialog.java", "diffHunk": "@@ -0,0 +1,117 @@\n+package de.danoeh.antennapod.dialog;\n+\n+import android.app.Dialog;\n+import android.content.Context;\n+import android.content.DialogInterface;\n+import android.content.SharedPreferences;\n+import android.os.Bundle;\n+import android.preference.PreferenceManager;\n+import android.view.View;\n+import android.widget.RadioButton;\n+import android.widget.RadioGroup;\n+import android.widget.Switch;\n+import android.widget.Toast;\n+\n+import androidx.annotation.NonNull;\n+import androidx.annotation.Nullable;\n+import androidx.appcompat.app.AlertDialog;\n+import androidx.fragment.app.DialogFragment;\n+import de.danoeh.antennapod.R;\n+import de.danoeh.antennapod.core.feed.FeedItem;\n+import de.danoeh.antennapod.core.preferences.UserPreferences;\n+import de.danoeh.antennapod.core.util.ShareUtils;\n+\n+public class ShareDialog extends DialogFragment {\n+\n+    private static final String TAG = \"ShareDialog\";\n+    private final Context ctx;\n+    private FeedItem item;\n+\n+    private static final String PREF_SHARE_EPISODE_WEBSITE = \"prefShareEpisodeWebsite\";\n+    private static final String PREF_SHARE_EPISODE_MEDIA = \"prefShareEpisodeMedia\";\n+    private static final String PREF_SHARE_EPISODE_START_AT = \"prefShareEpisodeStartAt\";\n+\n+    private RadioGroup radioGroup;\n+    private RadioButton radioEpisodeWebsite;\n+    private RadioButton radioMediaFile;\n+    private Switch switchStartAt;\n+    private SharedPreferences prefs;\n+\n+    public ShareDialog(Context ctx, FeedItem item) {\n+        this.ctx = ctx;\n+        this.item = item;\n+        prefs = ctx.getSharedPreferences(\"SHARE_DIALOG_PREFS\", Context.MODE_PRIVATE);\n+    }\n+\n+    @NonNull\n+    @Override\n+    public Dialog onCreateDialog(@Nullable Bundle savedInstanceState) {\n+        View content = View.inflate(ctx, R.layout.share_episode_dialog, null);\n+        AlertDialog.Builder builder = new AlertDialog.Builder(ctx);\n+        builder.setTitle(R.string.share_label);\n+        builder.setView(content);\n+\n+        radioGroup = content.findViewById(R.id.share_dialog_radio_group);\n+        radioEpisodeWebsite = content.findViewById(R.id.share_episode_website_radio);\n+        radioMediaFile = content.findViewById(R.id.share_media_file_radio);\n+        switchStartAt = content.findViewById(R.id.share_start_at_timer_dialog);\n+\n+        setupOptions();\n+\n+        builder\n+                .setPositiveButton(R.string.share_label, new DialogInterface.OnClickListener() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0cb17304e719789655ab252cc45b251561773214"}, "originalPosition": 62}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDQ4MzIxMw==", "bodyText": "Are those two preferences exclusive? If yes, it could be better to only store one preference.", "url": "https://github.com/AntennaPod/AntennaPod/pull/4260#discussion_r450483213", "createdAt": "2020-07-06T21:13:42Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/dialog/ShareDialog.java", "diffHunk": "@@ -0,0 +1,117 @@\n+package de.danoeh.antennapod.dialog;\n+\n+import android.app.Dialog;\n+import android.content.Context;\n+import android.content.DialogInterface;\n+import android.content.SharedPreferences;\n+import android.os.Bundle;\n+import android.preference.PreferenceManager;\n+import android.view.View;\n+import android.widget.RadioButton;\n+import android.widget.RadioGroup;\n+import android.widget.Switch;\n+import android.widget.Toast;\n+\n+import androidx.annotation.NonNull;\n+import androidx.annotation.Nullable;\n+import androidx.appcompat.app.AlertDialog;\n+import androidx.fragment.app.DialogFragment;\n+import de.danoeh.antennapod.R;\n+import de.danoeh.antennapod.core.feed.FeedItem;\n+import de.danoeh.antennapod.core.preferences.UserPreferences;\n+import de.danoeh.antennapod.core.util.ShareUtils;\n+\n+public class ShareDialog extends DialogFragment {\n+\n+    private static final String TAG = \"ShareDialog\";\n+    private final Context ctx;\n+    private FeedItem item;\n+\n+    private static final String PREF_SHARE_EPISODE_WEBSITE = \"prefShareEpisodeWebsite\";\n+    private static final String PREF_SHARE_EPISODE_MEDIA = \"prefShareEpisodeMedia\";\n+    private static final String PREF_SHARE_EPISODE_START_AT = \"prefShareEpisodeStartAt\";\n+\n+    private RadioGroup radioGroup;\n+    private RadioButton radioEpisodeWebsite;\n+    private RadioButton radioMediaFile;\n+    private Switch switchStartAt;\n+    private SharedPreferences prefs;\n+\n+    public ShareDialog(Context ctx, FeedItem item) {\n+        this.ctx = ctx;\n+        this.item = item;\n+        prefs = ctx.getSharedPreferences(\"SHARE_DIALOG_PREFS\", Context.MODE_PRIVATE);\n+    }\n+\n+    @NonNull\n+    @Override\n+    public Dialog onCreateDialog(@Nullable Bundle savedInstanceState) {\n+        View content = View.inflate(ctx, R.layout.share_episode_dialog, null);\n+        AlertDialog.Builder builder = new AlertDialog.Builder(ctx);\n+        builder.setTitle(R.string.share_label);\n+        builder.setView(content);\n+\n+        radioGroup = content.findViewById(R.id.share_dialog_radio_group);\n+        radioEpisodeWebsite = content.findViewById(R.id.share_episode_website_radio);\n+        radioMediaFile = content.findViewById(R.id.share_media_file_radio);\n+        switchStartAt = content.findViewById(R.id.share_start_at_timer_dialog);\n+\n+        setupOptions();\n+\n+        builder\n+                .setPositiveButton(R.string.share_label, new DialogInterface.OnClickListener() {\n+                    @Override\n+                    public void onClick(DialogInterface dialog, int id) {\n+                        if (radioEpisodeWebsite.isChecked()) {\n+                            ShareUtils.shareFeedItemLink(ctx, item, switchStartAt.isChecked());\n+                            prefs.edit().putBoolean(PREF_SHARE_EPISODE_START_AT, switchStartAt.isChecked()).apply();\n+\n+                            prefs.edit().putBoolean(PREF_SHARE_EPISODE_WEBSITE, true).apply();\n+                            prefs.edit().putBoolean(PREF_SHARE_EPISODE_MEDIA, false).apply();\n+                        } else {\n+                            ShareUtils.shareFeedItemLink(ctx, item, switchStartAt.isChecked());\n+                            prefs.edit().putBoolean(PREF_SHARE_EPISODE_START_AT, switchStartAt.isChecked()).apply();\n+\n+                            prefs.edit().putBoolean(PREF_SHARE_EPISODE_WEBSITE, false).apply();\n+                            prefs.edit().putBoolean(PREF_SHARE_EPISODE_MEDIA, true).apply();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0cb17304e719789655ab252cc45b251561773214"}, "originalPosition": 76}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDQ4NTE2MA==", "bodyText": "I think it would be better to have 2 strings here. One with the dots and one without. Menu items with sub menus usually have dots in their title but the dialog title and button are better without dots. Let's wait for a reply by @keunes first. @keunes, what do you think?", "url": "https://github.com/AntennaPod/AntennaPod/pull/4260#discussion_r450485160", "createdAt": "2020-07-06T21:18:28Z", "author": {"login": "ByteHamster"}, "path": "core/src/main/res/values/strings.xml", "diffHunk": "@@ -136,12 +136,12 @@\n     <string name=\"feed_settings_label\">Podcast settings</string>\n     <string name=\"rename_feed_label\">Rename podcast</string>\n     <string name=\"remove_feed_label\">Remove podcast</string>\n-    <string name=\"share_label\">Share&#8230;</string>\n+    <string name=\"share_label\">Share</string>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0cb17304e719789655ab252cc45b251561773214"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDQ4NjAyOA==", "bodyText": "If you set the width to match_parent, the buttons get easier to tap (while looking exactly the same).", "url": "https://github.com/AntennaPod/AntennaPod/pull/4260#discussion_r450486028", "createdAt": "2020-07-06T21:20:31Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/res/layout/share_episode_dialog.xml", "diffHunk": "@@ -0,0 +1,40 @@\n+<?xml version=\"1.0\" encoding=\"utf-8\"?>\n+<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n+    android:orientation=\"vertical\"\n+    android:layout_width=\"match_parent\"\n+    android:layout_height=\"match_parent\"\n+    android:gravity=\"center\"\n+    android:padding=\"16dp\">\n+\n+    <RadioGroup\n+        android:id=\"@+id/share_dialog_radio_group\"\n+        android:layout_width=\"match_parent\"\n+        android:layout_height=\"wrap_content\"\n+        android:layout_marginBottom=\"16dp\"\n+        android:orientation=\"vertical\">\n+\n+        <RadioButton android:id=\"@+id/share_episode_website_radio\"\n+            android:layout_width=\"wrap_content\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0cb17304e719789655ab252cc45b251561773214"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDQ4Njg2NQ==", "bodyText": "I think the dialog could look more balanced if this was a CheckBox instead of a Switch. Then all the blue elements line up on the left. I am not completely sure, though. What do you think?", "url": "https://github.com/AntennaPod/AntennaPod/pull/4260#discussion_r450486865", "createdAt": "2020-07-06T21:22:31Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/res/layout/share_episode_dialog.xml", "diffHunk": "@@ -0,0 +1,40 @@\n+<?xml version=\"1.0\" encoding=\"utf-8\"?>\n+<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n+    android:orientation=\"vertical\"\n+    android:layout_width=\"match_parent\"\n+    android:layout_height=\"match_parent\"\n+    android:gravity=\"center\"\n+    android:padding=\"16dp\">\n+\n+    <RadioGroup\n+        android:id=\"@+id/share_dialog_radio_group\"\n+        android:layout_width=\"match_parent\"\n+        android:layout_height=\"wrap_content\"\n+        android:layout_marginBottom=\"16dp\"\n+        android:orientation=\"vertical\">\n+\n+        <RadioButton android:id=\"@+id/share_episode_website_radio\"\n+            android:layout_width=\"wrap_content\"\n+            android:layout_height=\"wrap_content\"\n+            android:text=\"@string/share_dialog_episode_website_label\"\n+            android:checked=\"true\"\n+            />\n+        <RadioButton android:id=\"@+id/share_media_file_radio\"\n+            android:layout_width=\"wrap_content\"\n+            android:layout_height=\"wrap_content\"\n+            android:text=\"@string/share_dialog_media_file_label\"\n+            />\n+    </RadioGroup>\n+\n+    <TextView\n+        android:layout_width=\"match_parent\"\n+        android:layout_height=\"match_parent\"\n+        android:text=\"@string/share_dialog_include_label\"/>\n+\n+    <Switch\n+        android:id=\"@+id/share_start_at_timer_dialog\"\n+        android:layout_width=\"match_parent\"\n+        android:layout_height=\"wrap_content\"\n+        android:text=\"@string/share_playback_position_dialog_label\" />", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0cb17304e719789655ab252cc45b251561773214"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDQ4ODk3MQ==", "bodyText": "I think this shares the same link regardless of the checkbox now. Copy-paste error?\nswitchStartAt.isChecked() is called quite a few times. What about adding a variable boolean includePosition = switchStartAt.isChecked()?", "url": "https://github.com/AntennaPod/AntennaPod/pull/4260#discussion_r450488971", "createdAt": "2020-07-06T21:27:29Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/dialog/ShareDialog.java", "diffHunk": "@@ -0,0 +1,117 @@\n+package de.danoeh.antennapod.dialog;\n+\n+import android.app.Dialog;\n+import android.content.Context;\n+import android.content.DialogInterface;\n+import android.content.SharedPreferences;\n+import android.os.Bundle;\n+import android.preference.PreferenceManager;\n+import android.view.View;\n+import android.widget.RadioButton;\n+import android.widget.RadioGroup;\n+import android.widget.Switch;\n+import android.widget.Toast;\n+\n+import androidx.annotation.NonNull;\n+import androidx.annotation.Nullable;\n+import androidx.appcompat.app.AlertDialog;\n+import androidx.fragment.app.DialogFragment;\n+import de.danoeh.antennapod.R;\n+import de.danoeh.antennapod.core.feed.FeedItem;\n+import de.danoeh.antennapod.core.preferences.UserPreferences;\n+import de.danoeh.antennapod.core.util.ShareUtils;\n+\n+public class ShareDialog extends DialogFragment {\n+\n+    private static final String TAG = \"ShareDialog\";\n+    private final Context ctx;\n+    private FeedItem item;\n+\n+    private static final String PREF_SHARE_EPISODE_WEBSITE = \"prefShareEpisodeWebsite\";\n+    private static final String PREF_SHARE_EPISODE_MEDIA = \"prefShareEpisodeMedia\";\n+    private static final String PREF_SHARE_EPISODE_START_AT = \"prefShareEpisodeStartAt\";\n+\n+    private RadioGroup radioGroup;\n+    private RadioButton radioEpisodeWebsite;\n+    private RadioButton radioMediaFile;\n+    private Switch switchStartAt;\n+    private SharedPreferences prefs;\n+\n+    public ShareDialog(Context ctx, FeedItem item) {\n+        this.ctx = ctx;\n+        this.item = item;\n+        prefs = ctx.getSharedPreferences(\"SHARE_DIALOG_PREFS\", Context.MODE_PRIVATE);\n+    }\n+\n+    @NonNull\n+    @Override\n+    public Dialog onCreateDialog(@Nullable Bundle savedInstanceState) {\n+        View content = View.inflate(ctx, R.layout.share_episode_dialog, null);\n+        AlertDialog.Builder builder = new AlertDialog.Builder(ctx);\n+        builder.setTitle(R.string.share_label);\n+        builder.setView(content);\n+\n+        radioGroup = content.findViewById(R.id.share_dialog_radio_group);\n+        radioEpisodeWebsite = content.findViewById(R.id.share_episode_website_radio);\n+        radioMediaFile = content.findViewById(R.id.share_media_file_radio);\n+        switchStartAt = content.findViewById(R.id.share_start_at_timer_dialog);\n+\n+        setupOptions();\n+\n+        builder\n+                .setPositiveButton(R.string.share_label, new DialogInterface.OnClickListener() {\n+                    @Override\n+                    public void onClick(DialogInterface dialog, int id) {\n+                        if (radioEpisodeWebsite.isChecked()) {\n+                            ShareUtils.shareFeedItemLink(ctx, item, switchStartAt.isChecked());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0cb17304e719789655ab252cc45b251561773214"}, "originalPosition": 66}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "01d8557bba116dad937155436f00d6f9b70a84af", "author": {"user": {"login": "gerardolgvr", "name": "Gerardo V\u00e1zquez"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/01d8557bba116dad937155436f00d6f9b70a84af", "committedDate": "2020-07-10T05:48:02Z", "message": "updates for share dialog and implementing new instance pattern"}, "afterCommit": {"oid": "3660f5255870e7056bacd35650eb530a15b05746", "author": {"user": {"login": "gerardolgvr", "name": "Gerardo V\u00e1zquez"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/3660f5255870e7056bacd35650eb530a15b05746", "committedDate": "2020-07-10T05:52:59Z", "message": "updated for share dialog and implementing new instance pattern"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "df19ca27410f35e65b51a7648ff64212499a2aca", "author": {"user": {"login": "gerardolgvr", "name": "Gerardo V\u00e1zquez"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/df19ca27410f35e65b51a7648ff64212499a2aca", "committedDate": "2020-07-10T05:57:18Z", "message": "updates for share dialog and implementing new instance pattern"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3660f5255870e7056bacd35650eb530a15b05746", "author": {"user": {"login": "gerardolgvr", "name": "Gerardo V\u00e1zquez"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/3660f5255870e7056bacd35650eb530a15b05746", "committedDate": "2020-07-10T05:52:59Z", "message": "updated for share dialog and implementing new instance pattern"}, "afterCommit": {"oid": "df19ca27410f35e65b51a7648ff64212499a2aca", "author": {"user": {"login": "gerardolgvr", "name": "Gerardo V\u00e1zquez"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/df19ca27410f35e65b51a7648ff64212499a2aca", "committedDate": "2020-07-10T05:57:18Z", "message": "updates for share dialog and implementing new instance pattern"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ2MTc5Njg5", "url": "https://github.com/AntennaPod/AntennaPod/pull/4260#pullrequestreview-446179689", "createdAt": "2020-07-10T07:26:29Z", "commit": {"oid": "df19ca27410f35e65b51a7648ff64212499a2aca"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMFQwNzoyNjoyOVrOGvszOA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMFQwNzoyOTozM1rOGvs4yQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjY3MDI2NA==", "bodyText": "I would use share_label_with_ellipses here", "url": "https://github.com/AntennaPod/AntennaPod/pull/4260#discussion_r452670264", "createdAt": "2020-07-10T07:26:29Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/res/menu/mediaplayer.xml", "diffHunk": "@@ -63,27 +63,5 @@\n         android:menuCategory=\"container\"\n         custom:showAsAction=\"never\"\n         android:title=\"@string/share_label\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "df19ca27410f35e65b51a7648ff64212499a2aca"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjY3MDM1OA==", "bodyText": "I would use share_label_with_ellipses here", "url": "https://github.com/AntennaPod/AntennaPod/pull/4260#discussion_r452670358", "createdAt": "2020-07-10T07:26:39Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/res/menu/feeditem_options.xml", "diffHunk": "@@ -72,28 +72,6 @@\n         android:id=\"@+id/share_item\"\n         android:menuCategory=\"container\"\n         android:title=\"@string/share_label\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "df19ca27410f35e65b51a7648ff64212499a2aca"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjY3MTY4OQ==", "bodyText": "Checkstyle complains here. If you just remove the line break between ) and ., it is happy :)", "url": "https://github.com/AntennaPod/AntennaPod/pull/4260#discussion_r452671689", "createdAt": "2020-07-10T07:29:33Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/dialog/ShareDialog.java", "diffHunk": "@@ -0,0 +1,121 @@\n+package de.danoeh.antennapod.dialog;\n+\n+import android.app.Dialog;\n+import android.content.Context;\n+import android.content.DialogInterface;\n+import android.content.SharedPreferences;\n+import android.os.Bundle;\n+import android.view.View;\n+import android.widget.CheckBox;\n+import android.widget.RadioButton;\n+import android.widget.RadioGroup;\n+\n+import androidx.annotation.NonNull;\n+import androidx.annotation.Nullable;\n+import androidx.appcompat.app.AlertDialog;\n+import androidx.fragment.app.DialogFragment;\n+import de.danoeh.antennapod.R;\n+import de.danoeh.antennapod.core.feed.FeedItem;\n+import de.danoeh.antennapod.core.util.ShareUtils;\n+\n+public class ShareDialog extends DialogFragment {\n+\n+    private static final String ARGUMENT_FEED_ITEM = \"feedItem\";\n+\n+    private static final String TAG = \"ShareDialog\";\n+    private Context ctx;\n+    private FeedItem item;\n+\n+    private static final String PREF_SHARE_DIALOG_OPTION = \"prefShareDialogOption\";\n+    private static final String PREF_SHARE_EPISODE_START_AT = \"prefShareEpisodeStartAt\";\n+\n+    private RadioGroup radioGroup;\n+    private RadioButton radioEpisodeWebsite;\n+    private RadioButton radioMediaFile;\n+    private CheckBox checkBoxStartAt;\n+    private SharedPreferences prefs;\n+\n+    public ShareDialog() {\n+        // Empty constructor required for DialogFragment\n+    }\n+\n+    public static ShareDialog newInstance(FeedItem item) {\n+        Bundle arguments = new Bundle();\n+        arguments.putSerializable(ARGUMENT_FEED_ITEM, item);\n+        ShareDialog dialog = new ShareDialog();\n+        dialog.setArguments(arguments);\n+        return dialog;\n+    }\n+\n+    @NonNull\n+    @Override\n+    public Dialog onCreateDialog(@Nullable Bundle savedInstanceState) {\n+        if (getArguments() != null) {\n+            ctx = getActivity();\n+            item = (FeedItem) getArguments().getSerializable(ARGUMENT_FEED_ITEM);\n+            prefs = getActivity().getSharedPreferences(\"ShareDialog\", Context.MODE_PRIVATE);\n+        }\n+\n+        View content = View.inflate(ctx, R.layout.share_episode_dialog, null);\n+        AlertDialog.Builder builder = new AlertDialog.Builder(ctx);\n+        builder.setTitle(R.string.share_label);\n+        builder.setView(content);\n+\n+        radioGroup = content.findViewById(R.id.share_dialog_radio_group);\n+        radioEpisodeWebsite = content.findViewById(R.id.share_episode_website_radio);\n+        radioMediaFile = content.findViewById(R.id.share_media_file_radio);\n+        checkBoxStartAt = content.findViewById(R.id.share_start_at_timer_dialog);\n+\n+        setupOptions();\n+\n+        builder.setPositiveButton(R.string.share_label, new DialogInterface.OnClickListener() {\n+            @Override\n+            public void onClick(DialogInterface dialog, int id) {\n+                boolean includePlaybackPosition = checkBoxStartAt.isChecked();\n+                if (radioEpisodeWebsite.isChecked()) {\n+                    ShareUtils.shareFeedItemLink(ctx, item, includePlaybackPosition);\n+                    prefs.edit().putString(PREF_SHARE_DIALOG_OPTION, \"website\").apply();\n+                } else {\n+                    ShareUtils.shareFeedItemDownloadLink(ctx, item, includePlaybackPosition);\n+                    prefs.edit().putString(PREF_SHARE_DIALOG_OPTION, \"media\").apply();\n+                }\n+                prefs.edit().putBoolean(PREF_SHARE_EPISODE_START_AT, includePlaybackPosition).apply();\n+            }\n+        })\n+        .setNegativeButton(R.string.cancel_label, new DialogInterface.OnClickListener() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "df19ca27410f35e65b51a7648ff64212499a2aca"}, "originalPosition": 85}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9d2c2d8f370af84922f8197e252ee4474d0c3acb", "author": {"user": {"login": "gerardolgvr", "name": "Gerardo V\u00e1zquez"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/9d2c2d8f370af84922f8197e252ee4474d0c3acb", "committedDate": "2020-07-10T16:42:03Z", "message": "adjustments for string share... at menus"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2782, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}