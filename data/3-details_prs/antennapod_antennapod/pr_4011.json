{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk5MzY4NDI3", "number": 4011, "title": "show a warning dialog when importing a database", "bodyText": "fix #3984", "createdAt": "2020-04-06T04:13:24Z", "url": "https://github.com/AntennaPod/AntennaPod/pull/4011", "merged": true, "mergeCommit": {"oid": "b6eba9cc61e5c0fb041408bb6c0caca2a73f247b"}, "closed": true, "closedAt": "2020-04-06T22:08:41Z", "author": {"login": "tonytamsf"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcU2waLgH2gAyMzk5MzY4NDI3OjEzMDFiZGQ1ODdiYzBmMmVhZTZkMzNjNGUxM2E0ZjdkNTc0ODJlNmU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcVACR_gH2gAyMzk5MzY4NDI3OmUwMjE4Njk1MjlkNzg4MzBkNTEyZjYyOWUwZjQ5OTliNjIzNjA2ZGQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "1301bdd587bc0f2eae6d33c4e13a4f7d57482e6e", "author": {"user": {"login": "tonytamsf", "name": "Tony Tam"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/1301bdd587bc0f2eae6d33c4e13a4f7d57482e6e", "committedDate": "2020-04-06T04:12:19Z", "message": "show a warning dialog when importing a database"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7bd259f59ae87bb14ad6079a1cdfbde2f859a89a", "author": {"user": {"login": "tonytamsf", "name": "Tony Tam"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/7bd259f59ae87bb14ad6079a1cdfbde2f859a89a", "committedDate": "2020-04-06T05:49:22Z", "message": "soft keyboard"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg4MDA5OTYx", "url": "https://github.com/AntennaPod/AntennaPod/pull/4011#pullrequestreview-388009961", "createdAt": "2020-04-06T07:54:43Z", "commit": {"oid": "7bd259f59ae87bb14ad6079a1cdfbde2f859a89a"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQwNzo1NDo0M1rOGBLyYw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQwNzo1NzowOVrOGBL3mA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzg5NDg4Mw==", "bodyText": "Please use a R.string resource, so the text can be translated", "url": "https://github.com/AntennaPod/AntennaPod/pull/4011#discussion_r403894883", "createdAt": "2020-04-06T07:54:43Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/fragment/preferences/ImportExportPreferencesFragment.java", "diffHunk": "@@ -173,16 +174,30 @@ private void exportDatabase() {\n     }\n \n     private void importDatabase() {\n-        if (Build.VERSION.SDK_INT >= 19) {\n-            Intent intent = new Intent(Intent.ACTION_OPEN_DOCUMENT);\n-            intent.setType(\"*/*\");\n-            startActivityForResult(intent, REQUEST_CODE_RESTORE_DATABASE);\n-        } else {\n-            Intent intent = new Intent(Intent.ACTION_GET_CONTENT);\n-            intent.setType(\"*/*\");\n-            startActivityForResult(Intent.createChooser(intent,\n-                    getString(R.string.import_select_file)), REQUEST_CODE_RESTORE_DATABASE);\n-        }\n+        // setup the alert builder\n+        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());\n+        builder.setTitle(R.string.database_import_label);\n+        builder.setMessage(R.string.database_import_warning);\n+\n+        // add a button\n+        builder.setNegativeButton(\"NO\", null);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7bd259f59ae87bb14ad6079a1cdfbde2f859a89a"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzg5NTExNw==", "bodyText": "This seems to come from a different branch", "url": "https://github.com/AntennaPod/AntennaPod/pull/4011#discussion_r403895117", "createdAt": "2020-04-06T07:55:05Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/AndroidManifest.xml", "diffHunk": "@@ -73,6 +73,7 @@\n         <activity\n             android:name=\".activity.MainActivity\"\n             android:configChanges=\"keyboardHidden|orientation|screenSize\"\n+            android:windowSoftInputMode=\"stateHidden\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7bd259f59ae87bb14ad6079a1cdfbde2f859a89a"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzg5NTcwMQ==", "bodyText": "You added two space characters after the full stop characters, here.", "url": "https://github.com/AntennaPod/AntennaPod/pull/4011#discussion_r403895701", "createdAt": "2020-04-06T07:56:14Z", "author": {"login": "ByteHamster"}, "path": "core/src/main/res/values/strings.xml", "diffHunk": "@@ -561,6 +561,7 @@\n     <string name=\"html_export_label\">HTML export</string>\n     <string name=\"database_export_label\">Database export</string>\n     <string name=\"database_import_label\">Database import</string>\n+    <string name=\"database_import_warning\">Importing a database will replace all of your current subscriptions and playing history.  You should export your current database as a backup.  Do you want to replace?</string>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7bd259f59ae87bb14ad6079a1cdfbde2f859a89a"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzg5NjIxNg==", "bodyText": "You can directly call builder.show without creating a dialog object", "url": "https://github.com/AntennaPod/AntennaPod/pull/4011#discussion_r403896216", "createdAt": "2020-04-06T07:57:09Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/fragment/preferences/ImportExportPreferencesFragment.java", "diffHunk": "@@ -173,16 +174,30 @@ private void exportDatabase() {\n     }\n \n     private void importDatabase() {\n-        if (Build.VERSION.SDK_INT >= 19) {\n-            Intent intent = new Intent(Intent.ACTION_OPEN_DOCUMENT);\n-            intent.setType(\"*/*\");\n-            startActivityForResult(intent, REQUEST_CODE_RESTORE_DATABASE);\n-        } else {\n-            Intent intent = new Intent(Intent.ACTION_GET_CONTENT);\n-            intent.setType(\"*/*\");\n-            startActivityForResult(Intent.createChooser(intent,\n-                    getString(R.string.import_select_file)), REQUEST_CODE_RESTORE_DATABASE);\n-        }\n+        // setup the alert builder\n+        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());\n+        builder.setTitle(R.string.database_import_label);\n+        builder.setMessage(R.string.database_import_warning);\n+\n+        // add a button\n+        builder.setNegativeButton(\"NO\", null);\n+        builder.setPositiveButton(\"Replace\", (dialog, which) -> {\n+                    if (Build.VERSION.SDK_INT >= 19) {\n+                        Intent intent = new Intent(Intent.ACTION_OPEN_DOCUMENT);\n+                        intent.setType(\"*/*\");\n+                        startActivityForResult(intent, REQUEST_CODE_RESTORE_DATABASE);\n+                    } else {\n+                        Intent intent = new Intent(Intent.ACTION_GET_CONTENT);\n+                        intent.setType(\"*/*\");\n+                        startActivityForResult(Intent.createChooser(intent,\n+                                getString(R.string.import_select_file)), REQUEST_CODE_RESTORE_DATABASE);\n+                    }\n+                }\n+        );\n+\n+        // create and show the alert dialog\n+        AlertDialog dialog = builder.create();\n+        dialog.show();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7bd259f59ae87bb14ad6079a1cdfbde2f859a89a"}, "originalPosition": 45}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cc764de0593db1b128552c0d582a1e3a8ce59d36", "author": {"user": {"login": "tonytamsf", "name": "Tony Tam"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/cc764de0593db1b128552c0d582a1e3a8ce59d36", "committedDate": "2020-04-06T14:54:16Z", "message": "cleaner code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e021869529d78830d512f629e0f4999b623606dd", "author": {"user": {"login": "tonytamsf", "name": "Tony Tam"}}, "url": "https://github.com/AntennaPod/AntennaPod/commit/e021869529d78830d512f629e0f4999b623606dd", "committedDate": "2020-04-06T15:00:59Z", "message": "remove extra spaces"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2831, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}