{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ5OTYzNjEx", "number": 4292, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQwODoxNjoyNVrOEPBXww==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQyMToxODowOFrOEPTwZQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg0MTg2NTYzOnYy", "diffSide": "RIGHT", "path": "app/src/main/java/de/danoeh/antennapod/fragment/CoverFragment.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQwODoxNjoyNVrOGygCQA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQxNDo0NDo1NlrOGyuaFA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTYwNjg0OA==", "bodyText": "Can this be within the if statement above?", "url": "https://github.com/AntennaPod/AntennaPod/pull/4292#discussion_r455606848", "createdAt": "2020-07-16T08:16:25Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/fragment/CoverFragment.java", "diffHunk": "@@ -159,6 +171,38 @@ private void displayCoverImage(int position) {\n         }\n     }\n \n+    @Override\n+    public void onConfigurationChanged(Configuration newConfig) {\n+        super.onConfigurationChanged(newConfig);\n+\n+        if (orientation != newConfig.orientation) {\n+            orientation = newConfig.orientation;\n+        }\n+        configureForOrientation(orientation, newConfig);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7f8ac6c681085c2c517e7dd352806a99e682d93b"}, "originalPosition": 75}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTc2MDgyMg==", "bodyText": "I wanted to leave this outside of the if for those devices that can change their screen sizes", "url": "https://github.com/AntennaPod/AntennaPod/pull/4292#discussion_r455760822", "createdAt": "2020-07-16T12:50:29Z", "author": {"login": "tonytamsf"}, "path": "app/src/main/java/de/danoeh/antennapod/fragment/CoverFragment.java", "diffHunk": "@@ -159,6 +171,38 @@ private void displayCoverImage(int position) {\n         }\n     }\n \n+    @Override\n+    public void onConfigurationChanged(Configuration newConfig) {\n+        super.onConfigurationChanged(newConfig);\n+\n+        if (orientation != newConfig.orientation) {\n+            orientation = newConfig.orientation;\n+        }\n+        configureForOrientation(orientation, newConfig);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTYwNjg0OA=="}, "originalCommit": {"oid": "7f8ac6c681085c2c517e7dd352806a99e682d93b"}, "originalPosition": 75}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTc3NjM0NA==", "bodyText": "Okay then I think it is not really needed to store a global orientation and do the check above. You could just write something like configureForOrientation(newConfig)", "url": "https://github.com/AntennaPod/AntennaPod/pull/4292#discussion_r455776344", "createdAt": "2020-07-16T13:15:19Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/fragment/CoverFragment.java", "diffHunk": "@@ -159,6 +171,38 @@ private void displayCoverImage(int position) {\n         }\n     }\n \n+    @Override\n+    public void onConfigurationChanged(Configuration newConfig) {\n+        super.onConfigurationChanged(newConfig);\n+\n+        if (orientation != newConfig.orientation) {\n+            orientation = newConfig.orientation;\n+        }\n+        configureForOrientation(orientation, newConfig);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTYwNjg0OA=="}, "originalCommit": {"oid": "7f8ac6c681085c2c517e7dd352806a99e682d93b"}, "originalPosition": 75}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTg0MjMyNA==", "bodyText": "good catch, I have fixed now.", "url": "https://github.com/AntennaPod/AntennaPod/pull/4292#discussion_r455842324", "createdAt": "2020-07-16T14:44:56Z", "author": {"login": "tonytamsf"}, "path": "app/src/main/java/de/danoeh/antennapod/fragment/CoverFragment.java", "diffHunk": "@@ -159,6 +171,38 @@ private void displayCoverImage(int position) {\n         }\n     }\n \n+    @Override\n+    public void onConfigurationChanged(Configuration newConfig) {\n+        super.onConfigurationChanged(newConfig);\n+\n+        if (orientation != newConfig.orientation) {\n+            orientation = newConfig.orientation;\n+        }\n+        configureForOrientation(orientation, newConfig);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTYwNjg0OA=="}, "originalCommit": {"oid": "7f8ac6c681085c2c517e7dd352806a99e682d93b"}, "originalPosition": 75}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg0NDg3NzgxOnYy", "diffSide": "RIGHT", "path": "app/src/main/java/de/danoeh/antennapod/fragment/CoverFragment.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQyMToxODowOFrOGy9IJw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QwNTo0NjoyM1rOGzGH3Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjA4MzQ5NQ==", "bodyText": "Setting this directly just sets the variables and does not re-layout. I think something like this would be more safe:\nViewGroup.LayoutParams params = imgvCover.getLayoutParams();\nparams.width = (int) (convertDpToPixel(newConfig.screenWidthDp) * .80);\nparams.height = imgvCover.getLayoutParams().width;\nimgvCover.setLayoutParams(params);", "url": "https://github.com/AntennaPod/AntennaPod/pull/4292#discussion_r456083495", "createdAt": "2020-07-16T21:18:08Z", "author": {"login": "ByteHamster"}, "path": "app/src/main/java/de/danoeh/antennapod/fragment/CoverFragment.java", "diffHunk": "@@ -159,6 +170,35 @@ private void displayCoverImage(int position) {\n         }\n     }\n \n+    @Override\n+    public void onConfigurationChanged(Configuration newConfig) {\n+        super.onConfigurationChanged(newConfig);\n+\n+        configureForOrientation(newConfig);\n+    }\n+\n+    public float convertDpToPixel(float dp) {\n+        Context context = this.getActivity().getApplicationContext();\n+        return dp * ((float) context.getResources().getDisplayMetrics().densityDpi / DisplayMetrics.DENSITY_DEFAULT);\n+    }\n+\n+    private void configureForOrientation(Configuration newConfig) {\n+        LinearLayout mainContainer = getView().findViewById(R.id.cover_fragment);\n+        if (newConfig.orientation == Configuration.ORIENTATION_PORTRAIT) {\n+            mainContainer.setOrientation(LinearLayout.VERTICAL);\n+            if (newConfig.screenWidthDp > 0) {\n+                imgvCover.getLayoutParams().width = (int) (convertDpToPixel(newConfig.screenWidthDp) * .80);\n+                imgvCover.getLayoutParams().height = imgvCover.getLayoutParams().width;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b3112701de533456166355ee73428e7412604367"}, "originalPosition": 78}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjIzMDg3Nw==", "bodyText": "Done", "url": "https://github.com/AntennaPod/AntennaPod/pull/4292#discussion_r456230877", "createdAt": "2020-07-17T05:46:23Z", "author": {"login": "tonytamsf"}, "path": "app/src/main/java/de/danoeh/antennapod/fragment/CoverFragment.java", "diffHunk": "@@ -159,6 +170,35 @@ private void displayCoverImage(int position) {\n         }\n     }\n \n+    @Override\n+    public void onConfigurationChanged(Configuration newConfig) {\n+        super.onConfigurationChanged(newConfig);\n+\n+        configureForOrientation(newConfig);\n+    }\n+\n+    public float convertDpToPixel(float dp) {\n+        Context context = this.getActivity().getApplicationContext();\n+        return dp * ((float) context.getResources().getDisplayMetrics().densityDpi / DisplayMetrics.DENSITY_DEFAULT);\n+    }\n+\n+    private void configureForOrientation(Configuration newConfig) {\n+        LinearLayout mainContainer = getView().findViewById(R.id.cover_fragment);\n+        if (newConfig.orientation == Configuration.ORIENTATION_PORTRAIT) {\n+            mainContainer.setOrientation(LinearLayout.VERTICAL);\n+            if (newConfig.screenWidthDp > 0) {\n+                imgvCover.getLayoutParams().width = (int) (convertDpToPixel(newConfig.screenWidthDp) * .80);\n+                imgvCover.getLayoutParams().height = imgvCover.getLayoutParams().width;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjA4MzQ5NQ=="}, "originalCommit": {"oid": "b3112701de533456166355ee73428e7412604367"}, "originalPosition": 78}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4744, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}