{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkwODE2Nzgx", "number": 6560, "title": "Fix: topic with one partition cannot be updated", "bodyText": "Motivation\nPreviously, we add the the following change to allow partitioned topics to be created with one partition:\n#4764\nHowever, updating a partitioned topic with one partition to more than one partition does not work and will return the following error:\n: javax.ws.rs.ClientErrorException: HTTP 409 Conflict\nTopic is not partitioned topic\nReason: Topic is not partitioned topic", "createdAt": "2020-03-19T06:11:10Z", "url": "https://github.com/apache/pulsar/pull/6560", "merged": true, "mergeCommit": {"oid": "9602c9bd5dd7f1f1f4af41e8af73236413911aa3"}, "closed": true, "closedAt": "2020-03-19T21:24:00Z", "author": {"login": "jerrypeng"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcPFtXCgH2gAyMzkwODE2NzgxOjRiOGFlYWMzYTYzY2NhZjZkZjI3NjQ1N2JlYjkzNGE0NjQ5YjNlN2Q=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcPQCS2AFqTM3Nzk3ODA1Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "4b8aeac3a63ccaf6df276457beb934a4649b3e7d", "author": {"user": null}, "url": "https://github.com/apache/pulsar/commit/4b8aeac3a63ccaf6df276457beb934a4649b3e7d", "committedDate": "2020-03-19T06:14:01Z", "message": "Fix: topic with one partition cannot be updated"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "27a626a9e24dca7cf238f281ec0df7bac5e2f163", "author": {"user": null}, "url": "https://github.com/apache/pulsar/commit/27a626a9e24dca7cf238f281ec0df7bac5e2f163", "committedDate": "2020-03-19T06:12:08Z", "message": "removing new line"}, "afterCommit": {"oid": "4b8aeac3a63ccaf6df276457beb934a4649b3e7d", "author": {"user": null}, "url": "https://github.com/apache/pulsar/commit/4b8aeac3a63ccaf6df276457beb934a4649b3e7d", "committedDate": "2020-03-19T06:14:01Z", "message": "Fix: topic with one partition cannot be updated"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3NDQ3NTcy", "url": "https://github.com/apache/pulsar/pull/6560#pullrequestreview-377447572", "createdAt": "2020-03-19T06:15:46Z", "commit": {"oid": "4b8aeac3a63ccaf6df276457beb934a4649b3e7d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3NzUyMTMx", "url": "https://github.com/apache/pulsar/pull/6560#pullrequestreview-377752131", "createdAt": "2020-03-19T14:07:09Z", "commit": {"oid": "4b8aeac3a63ccaf6df276457beb934a4649b3e7d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3ODM1NDY5", "url": "https://github.com/apache/pulsar/pull/6560#pullrequestreview-377835469", "createdAt": "2020-03-19T15:31:57Z", "commit": {"oid": "4b8aeac3a63ccaf6df276457beb934a4649b3e7d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQxNTozMTo1OFrOF4z_4Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQxNTozMTo1OFrOF4z_4Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTExNjUxMw==", "bodyText": "Shouldn't this be changed into < 1 ?", "url": "https://github.com/apache/pulsar/pull/6560#discussion_r395116513", "createdAt": "2020-03-19T15:31:58Z", "author": {"login": "merlimat"}, "path": "pulsar-broker/src/main/java/org/apache/pulsar/broker/admin/impl/PersistentTopicsBase.java", "diffHunk": "@@ -2162,11 +2162,6 @@ private PersistentReplicator getReplicatorReference(String replName, PersistentT\n         String path = path(PARTITIONED_TOPIC_PATH_ZNODE, topicName.getPersistenceNamingEncoding());\n         CompletableFuture<Void> result = new CompletableFuture<>();\n         pulsar().getBrokerService().fetchPartitionedTopicMetadataAsync(topicName).thenAccept(partitionMetadata -> {\n-            if (partitionMetadata.partitions <= 1) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4b8aeac3a63ccaf6df276457beb934a4649b3e7d"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d1feb43bfff34366294656be6f91597702a041bc", "author": {"user": null}, "url": "https://github.com/apache/pulsar/commit/d1feb43bfff34366294656be6f91597702a041bc", "committedDate": "2020-03-19T17:53:20Z", "message": "addressing issue"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3OTc4MDUy", "url": "https://github.com/apache/pulsar/pull/6560#pullrequestreview-377978052", "createdAt": "2020-03-19T18:15:57Z", "commit": {"oid": "d1feb43bfff34366294656be6f91597702a041bc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 23, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}