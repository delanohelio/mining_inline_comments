{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDUxMjg1MjYy", "number": 7582, "title": "#683 - Replace internal proprietary sun.reflect.ReflectionFactory API with Objenesis API", "bodyText": "Fixes #683\n\"Objenesis is a small Java library that serves one purpose: To instantiate a new object of a particular class.\"\nUsed by Spring, EasyMock, Mockito, Kryo etc\nList of supported JVMs\nMotivation\n\nWe need to instantiate a Zookeeper client instance without invoking the constructor in the MockZookeeper.\nsun.reflect.ReflectionFactory is internal API and might not exists on all JVM variants.\nCompiler warnings are produced during maven builds\n\nModifications\n\nAdded Objenesis in root pom dependencyManagement section\nReplaced ReflectionFactory API for Objenesis API in org.apache.zookeeper.MockZooKeeper\nRemoved @SuppressWarnings annotation on org.apache.zookeeper.MockZooKeeper\nReplaced deprecated org.apache.zookeeper.KeeperException.Code constants with recommended enums\n\nVerifying this change\n\n Make sure that the change passes the CI checks.\n This change is already covered by existing tests, such as\n- org.apache.pulsar.zookeeper.ZookeeperCacheTest\n- org.apache.pulsar.discovery.service.BaseDiscoveryTestSetup\n- org.apache.pulsar.broker.auth.MockedPulsarServiceBaseTest\n- org.apache.pulsar.discovery.service.BaseDiscoveryTestSetup\n- org.apache.pulsar.discovery.service.web.BaseZKStarterTest\n- org.apache.bookkeeper.mledger.offload.filesystem.impl.FileSystemManagedLedgerOffloaderTest\n- org.apache.bookkeeper.mledger.offload.jcloud.impl.BlobStoreManagedLedgerOffloaderTest", "createdAt": "2020-07-17T17:13:58Z", "url": "https://github.com/apache/pulsar/pull/7582", "merged": true, "mergeCommit": {"oid": "c404b1e2519f18a439aefffd8ceb64edfde82eeb"}, "closed": true, "closedAt": "2020-07-17T19:03:46Z", "author": {"login": "vcottagiri"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc11sWqgH2gAyNDUxMjg1MjYyOjViYzZlZTc4YzNkYjQwMDJhYTZjOWZmN2E5OTQ5N2YxMDE1MjdmM2I=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc13LgggH2gAyNDUxMjg1MjYyOjQ2ZDc2OGExNzVmMjM1NTc5N2VjOTg4MDRiMDM2NjFjMzZjYTJiZjU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "5bc6ee78c3db4002aa6c9ff7a99497f101527f3b", "author": {"user": {"login": "vcottagiri", "name": "Varghese Cottagiri"}}, "url": "https://github.com/apache/pulsar/commit/5bc6ee78c3db4002aa6c9ff7a99497f101527f3b", "committedDate": "2020-07-17T15:37:29Z", "message": "#683 - Replace internal proprietary API sun.reflect.ReflectionFactory with Objenisis API"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6e23ec2adcf52c7bd31e79d20158ea984d614fde", "author": {"user": {"login": "vcottagiri", "name": "Varghese Cottagiri"}}, "url": "https://github.com/apache/pulsar/commit/6e23ec2adcf52c7bd31e79d20158ea984d614fde", "committedDate": "2020-07-17T15:51:28Z", "message": "#683 - Replace internal proprietary API sun.reflect.ReflectionFactory with Objenisis API"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "476c286fcbad278d62b8f5cc126a779f2d16f015", "author": {"user": {"login": "vcottagiri", "name": "Varghese Cottagiri"}}, "url": "https://github.com/apache/pulsar/commit/476c286fcbad278d62b8f5cc126a779f2d16f015", "committedDate": "2020-07-17T16:50:32Z", "message": "#683 - Replace deprecated KeeperException.Code constant references with corresponding enums"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c96b674fa080ddf5f976c3ec8c4217eaf070f52d", "author": {"user": {"login": "vcottagiri", "name": "Varghese Cottagiri"}}, "url": "https://github.com/apache/pulsar/commit/c96b674fa080ddf5f976c3ec8c4217eaf070f52d", "committedDate": "2020-07-17T17:10:46Z", "message": "#683 - Fixed pom header formatting"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwODI5MzE1", "url": "https://github.com/apache/pulsar/pull/7582#pullrequestreview-450829315", "createdAt": "2020-07-17T17:19:01Z", "commit": {"oid": "c96b674fa080ddf5f976c3ec8c4217eaf070f52d"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QxNzoxOTowMVrOGza-RA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QxNzoxOTowMVrOGza-RA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjU3MjQ4NA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                private static Objenesis objenesis = new ObjenesisStd();\n          \n          \n            \n                private static final Objenesis objenesis = new ObjenesisStd();", "url": "https://github.com/apache/pulsar/pull/7582#discussion_r456572484", "createdAt": "2020-07-17T17:19:01Z", "author": {"login": "merlimat"}, "path": "testmocks/src/main/java/org/apache/zookeeper/MockZooKeeper.java", "diffHunk": "@@ -67,6 +66,10 @@\n     private int readOpDelayMs;\n \n     private ReentrantLock mutex;\n+    \n+    //see details of Objenesis caching - http://objenesis.org/details.html\n+    //see supported jvms - https://github.com/easymock/objenesis/blob/master/SupportedJVMs.md\n+    private static Objenesis objenesis = new ObjenesisStd();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c96b674fa080ddf5f976c3ec8c4217eaf070f52d"}, "originalPosition": 38}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "46d768a175f2355797ec98804b03661c36ca2bf5", "author": {"user": {"login": "vcottagiri", "name": "Varghese Cottagiri"}}, "url": "https://github.com/apache/pulsar/commit/46d768a175f2355797ec98804b03661c36ca2bf5", "committedDate": "2020-07-17T17:21:25Z", "message": "#683 - Made objenesis variable a static final member variable"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 358, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}