{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDgxNzYzNTkz", "number": 8003, "title": "support max consumers per subscription on topic level", "bodyText": "Modifications\nSupport set max consumers per subscription on topic level.\nSupport get max consumers per subscription on topic level.\nSupport remove max consumers per subscription on topic level.\nVerifying this change\nThis change added tests and can be verified as follows:\n\ntest set topic max consumers per subscription\ntest remove topic max consumers per subscription\ntest get topic topic max consumers per subscription\ntest disabled topic max consumers per subscription\n\nDoes this pull request potentially affect one of the following parts:\nIf yes was chosen, please highlight the changes\n\nDependencies (does it add or upgrade a dependency): (no)\nThe public API: (no)\nThe schema: (don't know)\nThe default values of configurations: (yes / no)\nThe wire protocol: (yes / no)\nThe rest endpoints: (yes / no)\nThe admin cli options: (yes)\nAnything that affects deployment: (no)\n\nDocumentation\nDoes this pull request introduce a new feature? (yes)\nIf yes, how is the feature documented? (docs / JavaDocs)", "createdAt": "2020-09-08T04:22:09Z", "url": "https://github.com/apache/pulsar/pull/8003", "merged": true, "mergeCommit": {"oid": "e4b12df27c1c8edd44db18e1a6f433393cc46977"}, "closed": true, "closedAt": "2020-09-11T12:47:45Z", "author": {"login": "hangc0276"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdGv03qAH2gAyNDgxNzYzNTkzOjExYjNmOWVjNDA1MTY2YzNkNzdkNmQ5N2M0NTM5NDJiMWU3N2ZhNGQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdHe94hgH2gAyNDgxNzYzNTkzOmQ1NmJjYTFmNDM3ZWI2YTA2MzkxNjk1NTJiODMwZDJhYTc1OTU4ZDI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "11b3f9ec405166c3d77d6d97c453942b1e77fa4d", "author": {"user": {"login": "hangc0276", "name": "Hang Chen"}}, "url": "https://github.com/apache/pulsar/commit/11b3f9ec405166c3d77d6d97c453942b1e77fa4d", "committedDate": "2020-09-08T04:24:04Z", "message": "support max consumers per subscription on topic level"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a729baa06df2aae84a97816ad89f0ee6632ddf47", "author": {"user": {"login": "hangc0276", "name": "Hang Chen"}}, "url": "https://github.com/apache/pulsar/commit/a729baa06df2aae84a97816ad89f0ee6632ddf47", "committedDate": "2020-09-08T04:20:00Z", "message": "support max consumers per subscription on topic level"}, "afterCommit": {"oid": "11b3f9ec405166c3d77d6d97c453942b1e77fa4d", "author": {"user": {"login": "hangc0276", "name": "Hang Chen"}}, "url": "https://github.com/apache/pulsar/commit/11b3f9ec405166c3d77d6d97c453942b1e77fa4d", "committedDate": "2020-09-08T04:24:04Z", "message": "support max consumers per subscription on topic level"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3f7ac9bc2d739c1cd4b0860409790f1441dd922d", "author": {"user": {"login": "hangc0276", "name": "Hang Chen"}}, "url": "https://github.com/apache/pulsar/commit/3f7ac9bc2d739c1cd4b0860409790f1441dd922d", "committedDate": "2020-09-08T11:18:01Z", "message": "fix a bug"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg0OTA2OTM4", "url": "https://github.com/apache/pulsar/pull/8003#pullrequestreview-484906938", "createdAt": "2020-09-09T11:20:59Z", "commit": {"oid": "3f7ac9bc2d739c1cd4b0860409790f1441dd922d"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQxMToyMDo1OVrOHPCpYA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQxMToyMjowMVrOHPCrKA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTUzNDA0OA==", "bodyText": "Looks dup withNonPersistentDispatcherSingleActiveConsumer.java.", "url": "https://github.com/apache/pulsar/pull/8003#discussion_r485534048", "createdAt": "2020-09-09T11:20:59Z", "author": {"login": "codelipenghui"}, "path": "pulsar-broker/src/main/java/org/apache/pulsar/broker/service/persistent/PersistentDispatcherMultipleConsumers.java", "diffHunk": "@@ -795,5 +808,35 @@ public PersistentTopic getTopic() {\n         return topic;\n     }\n \n+    /**\n+     * Get {@link TopicPolicies} for this topic.\n+     * @param topicName\n+     * @return TopicPolicies is exist else return null.\n+     */\n+    private TopicPolicies getTopicPolicies(TopicName topicName) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3f7ac9bc2d739c1cd4b0860409790f1441dd922d"}, "originalPosition": 76}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTUzNDUwNA==", "bodyText": "Same as the above comment, I think we can move this method to the BrokerService?", "url": "https://github.com/apache/pulsar/pull/8003#discussion_r485534504", "createdAt": "2020-09-09T11:22:01Z", "author": {"login": "codelipenghui"}, "path": "pulsar-broker/src/main/java/org/apache/pulsar/broker/service/persistent/PersistentDispatcherSingleActiveConsumer.java", "diffHunk": "@@ -537,5 +551,35 @@ public void initializeDispatchRateLimiterIfNeeded(Optional<Policies> policies) {\n         return disconnectAllConsumers();\n     }\n \n+    /**\n+     * Get {@link TopicPolicies} for this topic.\n+     * @param topicName\n+     * @return TopicPolicies is exist else return null.\n+     */\n+    private TopicPolicies getTopicPolicies(TopicName topicName) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3f7ac9bc2d739c1cd4b0860409790f1441dd922d"}, "originalPosition": 71}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d56bca1f437eb6a0639169552b830d2aa75958d2", "author": {"user": {"login": "hangc0276", "name": "Hang Chen"}}, "url": "https://github.com/apache/pulsar/commit/d56bca1f437eb6a0639169552b830d2aa75958d2", "committedDate": "2020-09-10T11:19:27Z", "message": "move getTopicPolicies method to BrokerService.java"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 180, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}