{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQxNzE0NTg2", "number": 7388, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQwNDoyNjozNFrOEJ7OjA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQwMToxMjoyMFrOEKVA6A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc4ODQzMDIwOnYy", "diffSide": "RIGHT", "path": "pulsar-functions/worker/src/main/java/org/apache/pulsar/functions/worker/SchedulerManager.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQwNDoyNjozNFrOGqrNjw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQwNDoyNjozNFrOGqrNjw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzQwMTM1OQ==", "bodyText": "nit: IRebalancer?", "url": "https://github.com/apache/pulsar/pull/7388#discussion_r447401359", "createdAt": "2020-06-30T04:26:34Z", "author": {"login": "srkukarni"}, "path": "pulsar-functions/worker/src/main/java/org/apache/pulsar/functions/worker/SchedulerManager.java", "diffHunk": "@@ -93,6 +94,8 @@\n \n     private final IScheduler scheduler;\n \n+    private final IRebalance rebalancer;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5c2d86686fbf9854277e2db368a3e8ec62746d45"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc5MjY1NDM0OnYy", "diffSide": "RIGHT", "path": "pulsar-functions/worker/src/main/java/org/apache/pulsar/functions/worker/scheduler/IScheduler.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQwMToxMTo1NFrOGrTivw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQwMToxNzowM1rOGrTn1Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODA2MjE0Mw==", "bodyText": "Should we have a default implementation that just returns the current assignment?", "url": "https://github.com/apache/pulsar/pull/7388#discussion_r448062143", "createdAt": "2020-07-01T01:11:54Z", "author": {"login": "merlimat"}, "path": "pulsar-functions/worker/src/main/java/org/apache/pulsar/functions/worker/scheduler/IScheduler.java", "diffHunk": "@@ -38,4 +39,12 @@\n      */\n     List<Assignment> schedule(List<Instance> unassignedFunctionInstances, List<Assignment> currentAssignments,\n             Set<String> workers);\n+\n+    /**\n+     *\n+     * @param currentAssignments\n+     * @param workers\n+     * @return\n+     */\n+    List<Function.Assignment> rebalance(List<Function.Assignment> currentAssignments, Set<String> workers);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b1a0135c442c16f8984c345aeb33a6c4d4525150"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODA2MzQ0NQ==", "bodyText": "Sure we can do it for BC reasons.  It would return a empty list because there will be no change", "url": "https://github.com/apache/pulsar/pull/7388#discussion_r448063445", "createdAt": "2020-07-01T01:17:03Z", "author": {"login": "jerrypeng"}, "path": "pulsar-functions/worker/src/main/java/org/apache/pulsar/functions/worker/scheduler/IScheduler.java", "diffHunk": "@@ -38,4 +39,12 @@\n      */\n     List<Assignment> schedule(List<Instance> unassignedFunctionInstances, List<Assignment> currentAssignments,\n             Set<String> workers);\n+\n+    /**\n+     *\n+     * @param currentAssignments\n+     * @param workers\n+     * @return\n+     */\n+    List<Function.Assignment> rebalance(List<Function.Assignment> currentAssignments, Set<String> workers);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODA2MjE0Mw=="}, "originalCommit": {"oid": "b1a0135c442c16f8984c345aeb33a6c4d4525150"}, "originalPosition": 19}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc5MjY1NTEyOnYy", "diffSide": "RIGHT", "path": "conf/functions_worker.yml", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQwMToxMjoyMFrOGrTjNg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQwMToxNTowN1rOGrTmAA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODA2MjI2Mg==", "bodyText": "This shouldn't be needed anymore, no?", "url": "https://github.com/apache/pulsar/pull/7388#discussion_r448062262", "createdAt": "2020-07-01T01:12:20Z", "author": {"login": "merlimat"}, "path": "conf/functions_worker.yml", "diffHunk": "@@ -78,6 +78,7 @@ numHttpServerThreads: 8\n # function assignment and scheduler\n \n schedulerClassName: \"org.apache.pulsar.functions.worker.scheduler.RoundRobinScheduler\"\n+rebalancerClassName: \"org.apache.pulsar.functions.worker.scheduler.RoundRobinScheduler\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b1a0135c442c16f8984c345aeb33a6c4d4525150"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODA2Mjk3Ng==", "bodyText": "will remove", "url": "https://github.com/apache/pulsar/pull/7388#discussion_r448062976", "createdAt": "2020-07-01T01:15:07Z", "author": {"login": "jerrypeng"}, "path": "conf/functions_worker.yml", "diffHunk": "@@ -78,6 +78,7 @@ numHttpServerThreads: 8\n # function assignment and scheduler\n \n schedulerClassName: \"org.apache.pulsar.functions.worker.scheduler.RoundRobinScheduler\"\n+rebalancerClassName: \"org.apache.pulsar.functions.worker.scheduler.RoundRobinScheduler\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODA2MjI2Mg=="}, "originalCommit": {"oid": "b1a0135c442c16f8984c345aeb33a6c4d4525150"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2558, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}