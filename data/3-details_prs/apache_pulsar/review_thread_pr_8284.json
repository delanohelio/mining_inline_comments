{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA1MjE4NTIy", "number": 8284, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xN1QwNjoxMToxM1rOEuv6Aw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xN1QwNjoxMToxM1rOEuv6Aw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE3NDU0ODUxOnYy", "diffSide": "RIGHT", "path": "managed-ledger/src/main/java/org/apache/bookkeeper/mledger/impl/ManagedLedgerImpl.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xN1QwNjoxMToxM1rOHjV9zA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xN1QwNjoxNzoyM1rOHjWHyQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjgyMjA5Mg==", "bodyText": "Looks like it's better to move it to the following if ... else ...\nif (currentLedger == null || ledger.getId() != currentLedger.getId()) {\n       ...\n} else {\n      opReadEntry.updateReadPosition(opReadEntry.readPosition);\n}", "url": "https://github.com/apache/pulsar/pull/8284#discussion_r506822092", "createdAt": "2020-10-17T06:11:13Z", "author": {"login": "codelipenghui"}, "path": "managed-ledger/src/main/java/org/apache/bookkeeper/mledger/impl/ManagedLedgerImpl.java", "diffHunk": "@@ -1618,6 +1616,8 @@ private void internalReadFromLedger(ReadHandle ledger, OpReadEntry opReadEntry)\n                         ledger.getId(), lastEntryInLedger, firstEntry);\n             }\n \n+            opReadEntry.updateReadPosition(opReadEntry.readPosition);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8282ba0748603d3f26e46a9fd261ed97878958c5"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjgyNDY0OQ==", "bodyText": "elegant!", "url": "https://github.com/apache/pulsar/pull/8284#discussion_r506824649", "createdAt": "2020-10-17T06:17:23Z", "author": {"login": "hangc0276"}, "path": "managed-ledger/src/main/java/org/apache/bookkeeper/mledger/impl/ManagedLedgerImpl.java", "diffHunk": "@@ -1618,6 +1616,8 @@ private void internalReadFromLedger(ReadHandle ledger, OpReadEntry opReadEntry)\n                         ledger.getId(), lastEntryInLedger, firstEntry);\n             }\n \n+            opReadEntry.updateReadPosition(opReadEntry.readPosition);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjgyMjA5Mg=="}, "originalCommit": {"oid": "8282ba0748603d3f26e46a9fd261ed97878958c5"}, "originalPosition": 16}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2931, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}