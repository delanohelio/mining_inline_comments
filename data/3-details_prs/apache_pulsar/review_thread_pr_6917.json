{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE1MDk4Nzc4", "number": 6917, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQwNzoyMTo0N1rOD7hbrA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQwNzoyMTo0N1rOD7hbrA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzNzQwMzMyOnYy", "diffSide": "RIGHT", "path": "pulsar-zookeeper-utils/src/main/java/org/apache/pulsar/zookeeper/ZkBookieRackAffinityMapping.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQwNzoyMTo0N1rOGT5Vow==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQwNzoyMTo0N1rOGT5Vow==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzUxNTU1NQ==", "bodyText": "Do we need to update it here? seems this is a  get operation, If it is not present, there is no need to update?", "url": "https://github.com/apache/pulsar/pull/6917#discussion_r423515555", "createdAt": "2020-05-12T07:21:47Z", "author": {"login": "jiazhai"}, "path": "pulsar-zookeeper-utils/src/main/java/org/apache/pulsar/zookeeper/ZkBookieRackAffinityMapping.java", "diffHunk": "@@ -162,10 +180,19 @@ private String getRack(String bookieAddress) {\n             throw new RuntimeException(e);\n         }\n \n+        BookieInfo bi = bookieInfoMap.get(bookieAddress);\n+        if (bi == null) {\n+            Optional<BookieInfo> biOpt = racksWithHost.getBookie(bookieAddress);\n+            if (biOpt.isPresent()) {\n+                bi = biOpt.get();\n+            } else {\n+                updateRacksWithHost(racksWithHost);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c485af1accb3c410ee7e5d06bab2da2d7eccc13"}, "originalPosition": 62}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1854, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}