{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkzOTEwMDUy", "number": 6606, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxNzo0NjoyMlrODwGVFA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxNzo0NzoyOVrODwGWfw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUxNzYxOTQwOnYy", "diffSide": "LEFT", "path": "pulsar-common/src/main/java/org/apache/pulsar/common/util/collections/GrowablePriorityLongPairQueue.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxNzo0NjoyMlrOGC6J8w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxNzo0NjoyMlrOGC6J8w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTcwMzE1NQ==", "bodyText": "This is already protected by a write lock. No need to use updater. The volatile is only used to ensure readers are reading the last value of the size.", "url": "https://github.com/apache/pulsar/pull/6606#discussion_r405703155", "createdAt": "2020-04-08T17:46:22Z", "author": {"login": "merlimat"}, "path": "pulsar-common/src/main/java/org/apache/pulsar/common/util/collections/GrowablePriorityLongPairQueue.java", "diffHunk": "@@ -204,7 +207,7 @@ private LongPair removeAtWithoutLock(int index) {\n             LongPair item = new LongPair(data[index], data[index + 1]);\n             data[index] = EmptyItem;\n             data[index + 1] = EmptyItem;\n-            --this.size;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "43699877ef70fab10132fca7cfbd35c210dfb318"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUxNzYyMzAzOnYy", "diffSide": "LEFT", "path": "pulsar-broker/src/main/java/org/apache/pulsar/broker/service/ServerCnx.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxNzo0NzoyOVrOGC6MVw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxNzo0NzoyOVrOGC6MVw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTcwMzc2Nw==", "bodyText": "All operations on a connection are happening on same thread", "url": "https://github.com/apache/pulsar/pull/6606#discussion_r405703767", "createdAt": "2020-04-08T17:47:29Z", "author": {"login": "merlimat"}, "path": "pulsar-broker/src/main/java/org/apache/pulsar/broker/service/ServerCnx.java", "diffHunk": "@@ -1759,7 +1762,7 @@ public boolean isWritable() {\n     }\n \n     public void startSendOperation(Producer producer, int msgSize) {\n-        messagePublishBufferSize += msgSize;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "43699877ef70fab10132fca7cfbd35c210dfb318"}, "originalPosition": 21}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1858, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}