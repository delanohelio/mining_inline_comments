{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM4MjY0MDI5", "number": 8939, "title": "[ISSUE 8832] Avro custom schema not working in consumer", "bodyText": "Fix #8832\nModifications\nMake AvroSchema's clone method consider custom reader and writer.", "createdAt": "2020-12-12T15:56:05Z", "url": "https://github.com/apache/pulsar/pull/8939", "merged": true, "mergeCommit": {"oid": "3da236503b71131023f5de9928ed499c7d1201ea"}, "closed": true, "closedAt": "2020-12-14T04:22:48Z", "author": {"login": "reswqa"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdledsSgH2gAyNTM4MjY0MDI5OmZjN2IxZmU0OWM0N2Q0MGIyNjZlN2MwZWQ2MTc3NGUzNzcxZjUxMmY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdl7xLigFqTU1MDk5NjQ1MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "fc7b1fe49c47d40b266e7c0ed61774e3771f512f", "author": {"user": {"login": "reswqa", "name": "Weijie Guo"}}, "url": "https://github.com/apache/pulsar/commit/fc7b1fe49c47d40b266e7c0ed61774e3771f512f", "committedDate": "2020-12-12T15:42:01Z", "message": "fix avro custom schema"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUwODk4MTQw", "url": "https://github.com/apache/pulsar/pull/8939#pullrequestreview-550898140", "createdAt": "2020-12-13T08:47:40Z", "commit": {"oid": "fc7b1fe49c47d40b266e7c0ed61774e3771f512f"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xM1QwODo0Nzo0MFrOIExqxw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xM1QwODo0Nzo0MFrOIExqxw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTg3ODk4Mw==", "bodyText": "Please close this PulsarClient", "url": "https://github.com/apache/pulsar/pull/8939#discussion_r541878983", "createdAt": "2020-12-13T08:47:40Z", "author": {"login": "eolivelli"}, "path": "pulsar-broker/src/test/java/org/apache/pulsar/client/impl/BrokerClientIntegrationTest.java", "diffHunk": "@@ -858,8 +861,40 @@ public void asyncClose(org.apache.bookkeeper.client.AsyncCallback.CloseCallback\n         consumer.close();\n     }\n \n+\n+    @Test\n+    public void testAvroSchemaProducerConsumerWithSpecifiedReaderAndWriter() throws PulsarClientException {\n+        final String topicName = \"persistent://my-property/my-ns/my-topic1\";\n+        TestMessageObject object = new TestMessageObject();\n+        SchemaReader<TestMessageObject> reader = Mockito.mock(SchemaReader.class);\n+        SchemaWriter<TestMessageObject> writer = Mockito.mock(SchemaWriter.class);\n+        Mockito.when(reader.read(Mockito.any(byte[].class), Mockito.any(byte[].class))).thenReturn(object);\n+        Mockito.when(writer.write(Mockito.any(TestMessageObject.class))).thenReturn(\"fake data\".getBytes(StandardCharsets.UTF_8));\n+        SchemaDefinition<TestMessageObject> schemaDefinition = new SchemaDefinitionBuilderImpl<TestMessageObject>()\n+                .withPojo(TestMessageObject.class)\n+                .withSchemaReader(reader)\n+                .withSchemaWriter(writer)\n+                .build();\n+        Schema<TestMessageObject> schema = Schema.AVRO(schemaDefinition);\n+        PulsarClient client =  PulsarClient.builder()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fc7b1fe49c47d40b266e7c0ed61774e3771f512f"}, "originalPosition": 43}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f24a463fbac6644a3887f118e1a1058d667ad106", "author": {"user": {"login": "reswqa", "name": "Weijie Guo"}}, "url": "https://github.com/apache/pulsar/commit/f24a463fbac6644a3887f118e1a1058d667ad106", "committedDate": "2020-12-13T08:59:10Z", "message": "close flient"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5347c6478bc7cd437bec8d057192e4e96c055605", "author": {"user": {"login": "reswqa", "name": "Weijie Guo"}}, "url": "https://github.com/apache/pulsar/commit/5347c6478bc7cd437bec8d057192e4e96c055605", "committedDate": "2020-12-13T09:02:20Z", "message": "remove unused import"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUwOTAyNDY1", "url": "https://github.com/apache/pulsar/pull/8939#pullrequestreview-550902465", "createdAt": "2020-12-13T09:39:58Z", "commit": {"oid": "5347c6478bc7cd437bec8d057192e4e96c055605"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUwOTQzNzM3", "url": "https://github.com/apache/pulsar/pull/8939#pullrequestreview-550943737", "createdAt": "2020-12-13T17:56:04Z", "commit": {"oid": "5347c6478bc7cd437bec8d057192e4e96c055605"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUwOTc5MjM4", "url": "https://github.com/apache/pulsar/pull/8939#pullrequestreview-550979238", "createdAt": "2020-12-14T00:11:39Z", "commit": {"oid": "5347c6478bc7cd437bec8d057192e4e96c055605"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUwOTk2NDUx", "url": "https://github.com/apache/pulsar/pull/8939#pullrequestreview-550996451", "createdAt": "2020-12-14T01:50:33Z", "commit": {"oid": "5347c6478bc7cd437bec8d057192e4e96c055605"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 925, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}