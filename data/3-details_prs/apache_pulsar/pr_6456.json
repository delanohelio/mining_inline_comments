{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgyMzk5MzYy", "number": 6456, "title": "[Issue 6394] Add configuration to disable auto creation of subscriptions", "bodyText": "Motivation\nFixes #6394\nModifications\n\nprovide a flag allowAutoSubscriptionCreation in ServiceConfiguration, defaults to true\nwhen allowAutoSubscriptionCreation is disabled and the specified subscription (Durable) on the topic does not exist when trying to subscribe via a consumer, the server should reject the request directly by handleSubscribe in ServerCnx\ncreate the subscription on the coordination topic if it does not exist when init WorkerService", "createdAt": "2020-03-02T13:58:28Z", "url": "https://github.com/apache/pulsar/pull/6456", "merged": true, "mergeCommit": {"oid": "c3292a611c9cbf2b17c96c5317d8f20247eb1f41"}, "closed": true, "closedAt": "2020-03-05T01:21:54Z", "author": {"login": "murong00"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcJuIk0AH2gAyMzgyMzk5MzYyOjZjZWI5ZTZmNzQ4OWQ3NGFjZTUzOTE1ZDQ2MWU1MDMyMWVkYWM1ZjQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcKayLiAFqTM2ODk5NzEzOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "6ceb9e6f7489d74ace53915d461e50321edac5f4", "author": {"user": {"login": "murong00", "name": "Fangbin Sun"}}, "url": "https://github.com/apache/pulsar/commit/6ceb9e6f7489d74ace53915d461e50321edac5f4", "committedDate": "2020-03-02T13:56:24Z", "message": "Add configuration to disable auto creation of subscriptions."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY3NDc5ODA5", "url": "https://github.com/apache/pulsar/pull/6456#pullrequestreview-367479809", "createdAt": "2020-03-02T19:49:54Z", "commit": {"oid": "6ceb9e6f7489d74ace53915d461e50321edac5f4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQxOTo0OTo1NFrOFws-cw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQxOTo0OTo1NFrOFws-cw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjYxMjg1MQ==", "bodyText": "@murong00\nCan you add a test to cover the case - if allowAutoSubscriptionCreation is disabled people can still create a subscription using pulsar-admin?", "url": "https://github.com/apache/pulsar/pull/6456#discussion_r386612851", "createdAt": "2020-03-02T19:49:54Z", "author": {"login": "sijie"}, "path": "pulsar-broker/src/test/java/org/apache/pulsar/broker/service/BrokerServiceAutoTopicCreationTest.java", "diffHunk": "@@ -104,6 +104,24 @@ public void testAutoTopicCreationDisableIfNonPartitionedTopicAlreadyExist() thro\n         assertTrue(admin.namespaces().getTopics(\"prop/ns-abc\").contains(topicName));\n     }\n \n+    @Test\n+    public void testAutoSubscriptionCreationDisable() throws Exception{", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6ceb9e6f7489d74ace53915d461e50321edac5f4"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "12630cab0fa6bd8a1c2b1f13c8d42490da77be12", "author": {"user": {"login": "murong00", "name": "Fangbin Sun"}}, "url": "https://github.com/apache/pulsar/commit/12630cab0fa6bd8a1c2b1f13c8d42490da77be12", "committedDate": "2020-03-03T03:23:28Z", "message": "Add a unit test to cover subscription creation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5bc343d8ffd20a8a8627591e18d4036ac30c7383", "author": {"user": {"login": "murong00", "name": "Fangbin Sun"}}, "url": "https://github.com/apache/pulsar/commit/5bc343d8ffd20a8a8627591e18d4036ac30c7383", "committedDate": "2020-03-03T06:21:20Z", "message": "Fix the flaky test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY4OTk3MTM4", "url": "https://github.com/apache/pulsar/pull/6456#pullrequestreview-368997138", "createdAt": "2020-03-04T17:57:40Z", "commit": {"oid": "5bc343d8ffd20a8a8627591e18d4036ac30c7383"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4978, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}