{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI3NTcxNzY3", "number": 7164, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQxNTozMDoxMlrOECnaAQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQwMToxOToxN1rOEDRypg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcxMTc4MjQxOnYy", "diffSide": "RIGHT", "path": "pulsar-broker/src/main/java/org/apache/pulsar/broker/service/BrokerService.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQxNTozMDoxMlrOGfLl2w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQwMzo1OTowMFrOGffoLQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTM0ODk1NQ==", "bodyText": "We should return an error in the future at this point, otherwise we're moving the NPE somewhere else", "url": "https://github.com/apache/pulsar/pull/7164#discussion_r435348955", "createdAt": "2020-06-04T15:30:12Z", "author": {"login": "merlimat"}, "path": "pulsar-broker/src/main/java/org/apache/pulsar/broker/service/BrokerService.java", "diffHunk": "@@ -1918,6 +1918,9 @@ private void createPendingLoadTopic() {\n     }\n \n     public CompletableFuture<PartitionedTopicMetadata> fetchPartitionedTopicMetadataCheckAllowAutoCreationAsync(TopicName topicName) {\n+        if(pulsar.getNamespaceService() == null){\n+            return CompletableFuture.completedFuture(null);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "419fd5c7b8c8282c25b1731df65a2ce56ffd5687"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTY3NzIyOQ==", "bodyText": "OK", "url": "https://github.com/apache/pulsar/pull/7164#discussion_r435677229", "createdAt": "2020-06-05T03:59:00Z", "author": {"login": "liudezhi2098"}, "path": "pulsar-broker/src/main/java/org/apache/pulsar/broker/service/BrokerService.java", "diffHunk": "@@ -1918,6 +1918,9 @@ private void createPendingLoadTopic() {\n     }\n \n     public CompletableFuture<PartitionedTopicMetadata> fetchPartitionedTopicMetadataCheckAllowAutoCreationAsync(TopicName topicName) {\n+        if(pulsar.getNamespaceService() == null){\n+            return CompletableFuture.completedFuture(null);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTM0ODk1NQ=="}, "originalCommit": {"oid": "419fd5c7b8c8282c25b1731df65a2ce56ffd5687"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcxODcyNjc4OnYy", "diffSide": "RIGHT", "path": "pulsar-broker/src/main/java/org/apache/pulsar/broker/service/BrokerService.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQwMToxOToxN1rOGgNEYg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQwMToxOToxN1rOGgNEYg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjQyMTczMA==", "bodyText": "I think we should return an explicit error to tell the application that the namespace service is not ready.", "url": "https://github.com/apache/pulsar/pull/7164#discussion_r436421730", "createdAt": "2020-06-08T01:19:17Z", "author": {"login": "sijie"}, "path": "pulsar-broker/src/main/java/org/apache/pulsar/broker/service/BrokerService.java", "diffHunk": "@@ -1918,6 +1918,9 @@ private void createPendingLoadTopic() {\n     }\n \n     public CompletableFuture<PartitionedTopicMetadata> fetchPartitionedTopicMetadataCheckAllowAutoCreationAsync(TopicName topicName) {\n+        if(pulsar.getNamespaceService() == null){\n+            return FutureUtil.failedFuture(new NullPointerException(\"namespaceService is null\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "db934b901479aa62a70634762467a4867ecd5d25"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1714, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}