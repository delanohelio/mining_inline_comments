{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDUyNjg2MDI4", "number": 7600, "title": "[Issue 3127][python-client] Replace Exceptions with PulsarExceptions", "bodyText": "Fixes #7600\nMotivation\nAs the issue says, the Python client throws Exceptions instead of a subclass of it (PulsarException), so the clients must catch the blanket Exception.\nModifications\nEvery C PulsarException is now thrown in Python with the same type.\nVerifying this change\n\n Make sure that the change passes the CI checks.\n\nThis change added tests and can be verified as follows:\n\nExtended Python tests to check for PulsarExceptions\n\nDoes this pull request potentially affect one of the following parts:\nIf yes was chosen, please highlight the changes\n\nDependencies (does it add or upgrade a dependency): no\nThe public API: no\nThe schema: no\nThe default values of configurations: no\nThe wire protocol: no\nThe rest endpoints: no\nThe admin cli options: no\nAnything that affects deployment: don't know\n\nDocumentation\n\nDoes this pull request introduce a new feature? no", "createdAt": "2020-07-19T17:50:11Z", "url": "https://github.com/apache/pulsar/pull/7600", "merged": true, "mergeCommit": {"oid": "3f36544c76620a7c6cd91c8047ecc28dbc3f85db"}, "closed": true, "closedAt": "2021-05-15T02:15:49Z", "author": {"login": "lbenc135"}, "timelineItems": {"totalCount": 21, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc4TbIGABqjM1ODYwNjEwMzk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABeW3OcwgFqTY2MDI5NzI2NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5506d05ae8901e7034896182a69b2b5f07b9e260", "author": {"user": {"login": "jerrypeng", "name": "Boyang Jerry Peng"}}, "url": "https://github.com/apache/pulsar/commit/5506d05ae8901e7034896182a69b2b5f07b9e260", "committedDate": "2020-07-25T07:20:55Z", "message": "fix: batch source able to be submitted (#7659)\n\n* fix: batch source able to be submitted\n\n* fix logic\n\nCo-authored-by: Jerry Peng <jerryp@splunk.com>\n(cherry picked from commit ee39e40aa83c7d6779ac35509f0ae38ee167d23e)"}, "afterCommit": {"oid": "bc6d73ec49d2590ee1200efbec8ceeec6bee797c", "author": {"user": null}, "url": "https://github.com/apache/pulsar/commit/bc6d73ec49d2590ee1200efbec8ceeec6bee797c", "committedDate": "2020-07-25T07:23:12Z", "message": "extend tests to check for PulsarExceptions"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "15d9a32e8a1510b7cd7e6b164375db1c4a691cab", "author": {"user": {"login": "wolfstudy", "name": "xiaolong ran"}}, "url": "https://github.com/apache/pulsar/commit/15d9a32e8a1510b7cd7e6b164375db1c4a691cab", "committedDate": "2020-09-05T08:34:59Z", "message": "Add docs of package Pulsar Functions (#7904)\n\n* Add docs of package Pulsar Functions\r\n\r\nSigned-off-by: xiaolong.ran <rxl@apache.org>"}, "afterCommit": {"oid": "3d40f20497e37220ead0ed9026dc2c6aca42b5f4", "author": {"user": null}, "url": "https://github.com/apache/pulsar/commit/3d40f20497e37220ead0ed9026dc2c6aca42b5f4", "committedDate": "2020-09-05T08:40:19Z", "message": "make a few tests check that PulsarException extends Exception"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3d40f20497e37220ead0ed9026dc2c6aca42b5f4", "author": {"user": null}, "url": "https://github.com/apache/pulsar/commit/3d40f20497e37220ead0ed9026dc2c6aca42b5f4", "committedDate": "2020-09-05T08:40:19Z", "message": "make a few tests check that PulsarException extends Exception"}, "afterCommit": {"oid": "2baf92a1ec817d62dfc8ea351d9f31d375cf895e", "author": {"user": null}, "url": "https://github.com/apache/pulsar/commit/2baf92a1ec817d62dfc8ea351d9f31d375cf895e", "committedDate": "2021-03-24T08:58:51Z", "message": "make a few tests check that PulsarException extends Exception"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2baf92a1ec817d62dfc8ea351d9f31d375cf895e", "author": {"user": null}, "url": "https://github.com/apache/pulsar/commit/2baf92a1ec817d62dfc8ea351d9f31d375cf895e", "committedDate": "2021-03-24T08:58:51Z", "message": "make a few tests check that PulsarException extends Exception"}, "afterCommit": {"oid": "9ef66af8d31e663f23871f964589e35426ac98fe", "author": {"user": null}, "url": "https://github.com/apache/pulsar/commit/9ef66af8d31e663f23871f964589e35426ac98fe", "committedDate": "2021-03-24T11:01:25Z", "message": "refactor tests"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "948c06a1b3767daefae5f877dc42a702aa85a1fe", "author": {"user": null}, "url": "https://github.com/apache/pulsar/commit/948c06a1b3767daefae5f877dc42a702aa85a1fe", "committedDate": "2021-03-24T12:01:04Z", "message": "add license header"}, "afterCommit": {"oid": "15664764df2814f1f458db3d205046b5056fb292", "author": {"user": null}, "url": "https://github.com/apache/pulsar/commit/15664764df2814f1f458db3d205046b5056fb292", "committedDate": "2021-03-25T07:13:24Z", "message": "add license header"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjIxNjU1MDM1", "url": "https://github.com/apache/pulsar/pull/7600#pullrequestreview-621655035", "createdAt": "2021-03-25T23:25:19Z", "commit": {"oid": "15664764df2814f1f458db3d205046b5056fb292"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjIyNTg2ODEy", "url": "https://github.com/apache/pulsar/pull/7600#pullrequestreview-622586812", "createdAt": "2021-03-26T23:23:50Z", "commit": {"oid": "15664764df2814f1f458db3d205046b5056fb292"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMy0yNlQyMzoyMzo1MFrOI-tl6w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMy0yNlQyMzoyMzo1MFrOI-tl6w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMjYyOTYxMQ==", "bodyText": "In these tests, could we assert for pulsar.Timeout exception?", "url": "https://github.com/apache/pulsar/pull/7600#discussion_r602629611", "createdAt": "2021-03-26T23:23:50Z", "author": {"login": "merlimat"}, "path": "pulsar-client-cpp/python/pulsar_test.py", "diffHunk": "@@ -147,11 +159,8 @@ def test_producer_consumer(self):\n         self.assertTrue(msg)\n         self.assertEqual(msg.data(), b'hello')\n \n-        try:\n-            msg = consumer.receive(100)\n-            self.assertTrue(False)  # Should not reach this point\n-        except:\n-            pass  # Exception is expected\n+        with self.assertRaises(PulsarException):", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "15664764df2814f1f458db3d205046b5056fb292"}, "originalPosition": 51}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjIyNTg2OTc4", "url": "https://github.com/apache/pulsar/pull/7600#pullrequestreview-622586978", "createdAt": "2021-03-26T23:24:30Z", "commit": {"oid": "15664764df2814f1f458db3d205046b5056fb292"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f316279fcc0d6d47a2a414bb6d303b68618cf3f9", "author": {"user": null}, "url": "https://github.com/apache/pulsar/commit/f316279fcc0d6d47a2a414bb6d303b68618cf3f9", "committedDate": "2021-03-27T09:10:27Z", "message": "raise errors as PulsarExceptions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a24aa3b82bdbc99de69c70de6e9c7a2b3162a8af", "author": {"user": null}, "url": "https://github.com/apache/pulsar/commit/a24aa3b82bdbc99de69c70de6e9c7a2b3162a8af", "committedDate": "2021-03-27T09:10:27Z", "message": "extend tests to check for PulsarExceptions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b74886cd85fc01c55d2ea154ea7d8bdf4abaef75", "author": {"user": null}, "url": "https://github.com/apache/pulsar/commit/b74886cd85fc01c55d2ea154ea7d8bdf4abaef75", "committedDate": "2021-03-27T09:10:27Z", "message": "small refactor"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e9fea546d3223fb84b3b746a93e50ddf87aa55eb", "author": {"user": null}, "url": "https://github.com/apache/pulsar/commit/e9fea546d3223fb84b3b746a93e50ddf87aa55eb", "committedDate": "2021-03-27T09:10:27Z", "message": "make a few tests check that PulsarException extends Exception"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "64f90ac6c569371abcf22a0f7babe0414b1b74e7", "author": {"user": null}, "url": "https://github.com/apache/pulsar/commit/64f90ac6c569371abcf22a0f7babe0414b1b74e7", "committedDate": "2021-03-27T09:10:27Z", "message": "implement all exception subclasses"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8efb986c823b83ff45d41df5ca7b8b6eeab88856", "author": {"user": null}, "url": "https://github.com/apache/pulsar/commit/8efb986c823b83ff45d41df5ca7b8b6eeab88856", "committedDate": "2021-03-27T09:10:27Z", "message": "refactor tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bef1c664ef0bd3d579f3451cfbfb2f63c123ce86", "author": {"user": null}, "url": "https://github.com/apache/pulsar/commit/bef1c664ef0bd3d579f3451cfbfb2f63c123ce86", "committedDate": "2021-03-27T09:10:27Z", "message": "fix formatting"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b6de92bcd714aa8af5fbfa9aad5caf288fba3dc8", "author": {"user": null}, "url": "https://github.com/apache/pulsar/commit/b6de92bcd714aa8af5fbfa9aad5caf288fba3dc8", "committedDate": "2021-03-27T09:10:27Z", "message": "add license header"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f350701279862a491bb831fb2e7e0e38343f2158", "author": {"user": null}, "url": "https://github.com/apache/pulsar/commit/f350701279862a491bb831fb2e7e0e38343f2158", "committedDate": "2021-03-27T09:14:15Z", "message": "catch Timeout exceptions in tests"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "15664764df2814f1f458db3d205046b5056fb292", "author": {"user": null}, "url": "https://github.com/apache/pulsar/commit/15664764df2814f1f458db3d205046b5056fb292", "committedDate": "2021-03-25T07:13:24Z", "message": "add license header"}, "afterCommit": {"oid": "f350701279862a491bb831fb2e7e0e38343f2158", "author": {"user": null}, "url": "https://github.com/apache/pulsar/commit/f350701279862a491bb831fb2e7e0e38343f2158", "committedDate": "2021-03-27T09:14:15Z", "message": "catch Timeout exceptions in tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjIyNjM1Mjk1", "url": "https://github.com/apache/pulsar/pull/7600#pullrequestreview-622635295", "createdAt": "2021-03-27T09:31:33Z", "commit": {"oid": "f350701279862a491bb831fb2e7e0e38343f2158"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5e3dca8f128283573de436d991becd8790361f83", "author": {"user": null}, "url": "https://github.com/apache/pulsar/commit/5e3dca8f128283573de436d991becd8790361f83", "committedDate": "2021-03-27T09:48:11Z", "message": "fix test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjYwMjk3MjY1", "url": "https://github.com/apache/pulsar/pull/7600#pullrequestreview-660297265", "createdAt": "2021-05-15T02:15:17Z", "commit": {"oid": "5e3dca8f128283573de436d991becd8790361f83"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 373, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}