{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIxMTQ3OTIx", "number": 8567, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQwODoyMzoxNVrOE5UArw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQwODoyNTozN1rOE5UEJQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI4NTMyMTQzOnYy", "diffSide": "RIGHT", "path": "pulsar-common/src/main/java/org/apache/pulsar/common/policies/data/ConsumerStats.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQwODoyMzoxNVrOHzsPZQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQxNTozNToyNlrOH0ERZw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzk2NDI2MQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public List<String> keyHashRange;\n          \n          \n            \n                public List<String> keyHashRanges;", "url": "https://github.com/apache/pulsar/pull/8567#discussion_r523964261", "createdAt": "2020-11-16T08:23:15Z", "author": {"login": "codelipenghui"}, "path": "pulsar-common/src/main/java/org/apache/pulsar/common/policies/data/ConsumerStats.java", "diffHunk": "@@ -77,6 +78,9 @@\n     public long lastAckedTimestamp;\n     public long lastConsumedTimestamp;\n \n+    /** Hash range assigned to this consumer if is Key_Shared sub mode. **/\n+    public List<String> keyHashRange;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "56dbafece10fb76cd56e906de0f6cabd2b82a1ce"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDM1Nzk5MQ==", "bodyText": "updated", "url": "https://github.com/apache/pulsar/pull/8567#discussion_r524357991", "createdAt": "2020-11-16T15:35:26Z", "author": {"login": "MarvinCai"}, "path": "pulsar-common/src/main/java/org/apache/pulsar/common/policies/data/ConsumerStats.java", "diffHunk": "@@ -77,6 +78,9 @@\n     public long lastAckedTimestamp;\n     public long lastConsumedTimestamp;\n \n+    /** Hash range assigned to this consumer if is Key_Shared sub mode. **/\n+    public List<String> keyHashRange;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzk2NDI2MQ=="}, "originalCommit": {"oid": "56dbafece10fb76cd56e906de0f6cabd2b82a1ce"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI4NTMyOTAwOnYy", "diffSide": "RIGHT", "path": "pulsar-broker/src/main/java/org/apache/pulsar/broker/service/StickyKeyConsumerSelector.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQwODoyNToxOFrOHzsTiw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQxNTozNToxOVrOH0EREA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzk2NTMyMw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                Map<String, List<String>> getConsumerRange();\n          \n          \n            \n                Map<String, List<String>> getConsumerKeyHashRanges();", "url": "https://github.com/apache/pulsar/pull/8567#discussion_r523965323", "createdAt": "2020-11-16T08:25:18Z", "author": {"login": "codelipenghui"}, "path": "pulsar-broker/src/main/java/org/apache/pulsar/broker/service/StickyKeyConsumerSelector.java", "diffHunk": "@@ -43,4 +46,10 @@\n      * @return consumer\n      */\n     Consumer select(byte[] stickyKey);\n+\n+    /**\n+     * Get range handled by each consumer\n+     * @return A map where key is a consumer name and value is list of range it receiving message for.\n+     */\n+    Map<String, List<String>> getConsumerRange();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "56dbafece10fb76cd56e906de0f6cabd2b82a1ce"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDM1NzkwNA==", "bodyText": "updated", "url": "https://github.com/apache/pulsar/pull/8567#discussion_r524357904", "createdAt": "2020-11-16T15:35:19Z", "author": {"login": "MarvinCai"}, "path": "pulsar-broker/src/main/java/org/apache/pulsar/broker/service/StickyKeyConsumerSelector.java", "diffHunk": "@@ -43,4 +46,10 @@\n      * @return consumer\n      */\n     Consumer select(byte[] stickyKey);\n+\n+    /**\n+     * Get range handled by each consumer\n+     * @return A map where key is a consumer name and value is list of range it receiving message for.\n+     */\n+    Map<String, List<String>> getConsumerRange();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzk2NTMyMw=="}, "originalCommit": {"oid": "56dbafece10fb76cd56e906de0f6cabd2b82a1ce"}, "originalPosition": 19}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI4NTMzMDI5OnYy", "diffSide": "RIGHT", "path": "pulsar-broker/src/main/java/org/apache/pulsar/broker/service/persistent/PersistentStickyKeyDispatcherMultipleConsumers.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQwODoyNTozN1rOHzsURA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQxNTozNToxMVrOH0EQqw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzk2NTUwOA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public Map<String, List<String>> getConsumerRange() {\n          \n          \n            \n                public Map<String, List<String>> getConsumerKeyHashRanges() {", "url": "https://github.com/apache/pulsar/pull/8567#discussion_r523965508", "createdAt": "2020-11-16T08:25:37Z", "author": {"login": "codelipenghui"}, "path": "pulsar-broker/src/main/java/org/apache/pulsar/broker/service/persistent/PersistentStickyKeyDispatcherMultipleConsumers.java", "diffHunk": "@@ -369,6 +369,10 @@ public SubType getType() {\n         return recentlyJoinedConsumers;\n     }\n \n+    public Map<String, List<String>> getConsumerRange() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "56dbafece10fb76cd56e906de0f6cabd2b82a1ce"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDM1NzgwMw==", "bodyText": "updated", "url": "https://github.com/apache/pulsar/pull/8567#discussion_r524357803", "createdAt": "2020-11-16T15:35:11Z", "author": {"login": "MarvinCai"}, "path": "pulsar-broker/src/main/java/org/apache/pulsar/broker/service/persistent/PersistentStickyKeyDispatcherMultipleConsumers.java", "diffHunk": "@@ -369,6 +369,10 @@ public SubType getType() {\n         return recentlyJoinedConsumers;\n     }\n \n+    public Map<String, List<String>> getConsumerRange() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzk2NTUwOA=="}, "originalCommit": {"oid": "56dbafece10fb76cd56e906de0f6cabd2b82a1ce"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2797, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}