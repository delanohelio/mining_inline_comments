{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc0MzM2MjU1", "number": 6310, "title": "Enable get precise backlog and backlog without delayed messages.", "bodyText": "Fixes #6045 #6281\nMotivation\nEnable get precise backlog and backlog without delayed messages.\nVerifying this change\nAdded new unit tests for the change.\nDoes this pull request potentially affect one of the following parts:\nIf yes was chosen, please highlight the changes\n\nDependencies (does it add or upgrade a dependency): (no)\nThe public API: (no)\nThe schema: (no)\nThe default values of configurations: (no)\nThe wire protocol: (no)\nThe rest endpoints: (no)\nThe admin cli options: (no)\nAnything that affects deployment: (no)\n\nDocumentation\n\nDoes this pull request introduce a new feature? (no)", "createdAt": "2020-02-12T14:23:50Z", "url": "https://github.com/apache/pulsar/pull/6310", "merged": true, "mergeCommit": {"oid": "df152109415f2b10dd83e8afe50d9db7ab7cbad5"}, "closed": true, "closedAt": "2020-02-16T21:46:20Z", "author": {"login": "codelipenghui"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcDnGGegH2gAyMzc0MzM2MjU1OmYyMDgwN2VkMTA0N2RiYjlkZWFiMDA2MzFkMTM2NGFmMDZlMjVlYWQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcE_3BlAFqTM1OTQzMTM2NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "f20807ed1047dbb9deab00631d1364af06e25ead", "author": {"user": {"login": "codelipenghui", "name": "lipenghui"}}, "url": "https://github.com/apache/pulsar/commit/f20807ed1047dbb9deab00631d1364af06e25ead", "committedDate": "2020-02-12T14:20:49Z", "message": "Enable get precise backlog and backlog with delayed messages."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2ac4885a24733eee49e70a3203a5a161b1a2071a", "author": {"user": {"login": "codelipenghui", "name": "lipenghui"}}, "url": "https://github.com/apache/pulsar/commit/2ac4885a24733eee49e70a3203a5a161b1a2071a", "committedDate": "2020-02-12T14:35:55Z", "message": "Fix checkstyle"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU3ODk0OTgz", "url": "https://github.com/apache/pulsar/pull/6310#pullrequestreview-357894983", "createdAt": "2020-02-13T01:04:10Z", "commit": {"oid": "2ac4885a24733eee49e70a3203a5a161b1a2071a"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d9493be6871d8a8135ce7600f670459087d2a37b", "author": {"user": {"login": "codelipenghui", "name": "lipenghui"}}, "url": "https://github.com/apache/pulsar/commit/d9493be6871d8a8135ce7600f670459087d2a37b", "committedDate": "2020-02-13T02:16:56Z", "message": "Add docs."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU4MDcxNDAw", "url": "https://github.com/apache/pulsar/pull/6310#pullrequestreview-358071400", "createdAt": "2020-02-13T09:37:09Z", "commit": {"oid": "d9493be6871d8a8135ce7600f670459087d2a37b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU4MTgzOTAz", "url": "https://github.com/apache/pulsar/pull/6310#pullrequestreview-358183903", "createdAt": "2020-02-13T12:40:21Z", "commit": {"oid": "d9493be6871d8a8135ce7600f670459087d2a37b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU4NTY5OTQ3", "url": "https://github.com/apache/pulsar/pull/6310#pullrequestreview-358569947", "createdAt": "2020-02-13T21:38:49Z", "commit": {"oid": "d9493be6871d8a8135ce7600f670459087d2a37b"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d3a191a550d9856dec6d2186b9ee8ab8e0f90594", "author": {"user": {"login": "codelipenghui", "name": "lipenghui"}}, "url": "https://github.com/apache/pulsar/commit/d3a191a550d9856dec6d2186b9ee8ab8e0f90594", "committedDate": "2020-02-14T12:10:58Z", "message": "Apply comment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5df8abe4ae85ecba403f606b4bb29d0ae83de9c0", "author": {"user": {"login": "codelipenghui", "name": "lipenghui"}}, "url": "https://github.com/apache/pulsar/commit/5df8abe4ae85ecba403f606b4bb29d0ae83de9c0", "committedDate": "2020-02-14T13:13:55Z", "message": "Fix unit test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU5Mzc5OTE0", "url": "https://github.com/apache/pulsar/pull/6310#pullrequestreview-359379914", "createdAt": "2020-02-16T04:39:36Z", "commit": {"oid": "5df8abe4ae85ecba403f606b4bb29d0ae83de9c0"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNlQwNDozOTozNlrOFqRt-g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNlQwNDo0MDoyNFrOFqRuDQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTg3NDgxMA==", "bodyText": "just a suggestion for future tasks:\nif we are changing a method to add another flag, it would be better to add an overloaded method rather than directly updating the original method. It will reduce the number of files to be changed.\ndefault long getNumberOfEntriesInBacklog() {\n    return getNumberOfEntriesInBacklog(false);\n}\n\nlong getNumberOfEntriesInBacklog(boolean isPreciseBacklog);", "url": "https://github.com/apache/pulsar/pull/6310#discussion_r379874810", "createdAt": "2020-02-16T04:39:36Z", "author": {"login": "sijie"}, "path": "pulsar-broker/src/main/java/org/apache/pulsar/broker/service/Subscription.java", "diffHunk": "@@ -53,7 +53,7 @@ default void removeConsumer(Consumer consumer) throws BrokerServiceException {\n \n     Dispatcher getDispatcher();\n \n-    long getNumberOfEntriesInBacklog();\n+    long getNumberOfEntriesInBacklog(boolean isPreciseBacklog);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5df8abe4ae85ecba403f606b4bb29d0ae83de9c0"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTg3NDgyOQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        \"--is-precise-backlog\" }, description = \"Set true to get precise backlog\")\n          \n          \n            \n                        \"--get-precise-backlog\" }, description = \"Set true to get precise backlog\")", "url": "https://github.com/apache/pulsar/pull/6310#discussion_r379874829", "createdAt": "2020-02-16T04:40:24Z", "author": {"login": "sijie"}, "path": "pulsar-client-tools/src/main/java/org/apache/pulsar/admin/cli/CmdTopics.java", "diffHunk": "@@ -370,10 +370,14 @@ void run() throws PulsarAdminException {\n         @Parameter(description = \"persistent://tenant/namespace/topic\\n\", required = true)\n         private java.util.List<String> params;\n \n+        @Parameter(names = { \"-ipb\",\n+            \"--is-precise-backlog\" }, description = \"Set true to get precise backlog\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5df8abe4ae85ecba403f606b4bb29d0ae83de9c0"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3e209dd496c0fc3dd75e9178c25d3850e6d5a1fc", "author": {"user": {"login": "codelipenghui", "name": "lipenghui"}}, "url": "https://github.com/apache/pulsar/commit/3e209dd496c0fc3dd75e9178c25d3850e6d5a1fc", "committedDate": "2020-02-16T12:52:52Z", "message": "Rename is-precise-backlog to get-precise-backlog."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU5NDMxMzY0", "url": "https://github.com/apache/pulsar/pull/6310#pullrequestreview-359431364", "createdAt": "2020-02-16T21:45:54Z", "commit": {"oid": "3e209dd496c0fc3dd75e9178c25d3850e6d5a1fc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 48, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}