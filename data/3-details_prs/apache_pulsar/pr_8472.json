{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE3MDcwMzI2", "number": 8472, "title": "[Issue 8471] command getBrokersWithNamespaceIsolationPolicy, add test", "bodyText": "Fixes #8471\nMotivation\ncommand bin/pulsar-admin ns-isolation-policy brokers not handled the \"isPrimary\" parameter. and caused always \"false\" output.\nModifications\nfix command,\nadd test.\nVerifying this change\nnew added test passed", "createdAt": "2020-11-07T03:35:00Z", "url": "https://github.com/apache/pulsar/pull/8472", "merged": true, "mergeCommit": {"oid": "188033b16293b48734f38e13cbcdb479a8cfd808"}, "closed": true, "closedAt": "2020-11-10T06:42:23Z", "author": {"login": "jiazhai"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdaDDdzAH2gAyNTE3MDcwMzI2OmUyODg0MTY3YTljYzc5MzU2MzAxNTIxNzgwOTdmZjEwZTNjYTBhMGM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdbDj2mAFqTUyNjg5NzkwOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e2884167a9cc7935630152178097ff10e3ca0a0c", "author": {"user": {"login": "jiazhai", "name": "Jia Zhai"}}, "url": "https://github.com/apache/pulsar/commit/e2884167a9cc7935630152178097ff10e3ca0a0c", "committedDate": "2020-11-07T03:32:46Z", "message": "fix command getBrokersWithNamespaceIsolationPolicy, add test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI2ODYwMDc1", "url": "https://github.com/apache/pulsar/pull/8472#pullrequestreview-526860075", "createdAt": "2020-11-10T05:19:22Z", "commit": {"oid": "e2884167a9cc7935630152178097ff10e3ca0a0c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQwNToxOToyMlrOHwMH-A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQwNToxOToyMlrOHwMH-A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDI5MjM0NA==", "bodyText": "Do we need to add the initialization of isSecondary?", "url": "https://github.com/apache/pulsar/pull/8472#discussion_r520292344", "createdAt": "2020-11-10T05:19:22Z", "author": {"login": "tuteng"}, "path": "pulsar-broker/src/main/java/org/apache/pulsar/broker/admin/impl/ClustersBase.java", "diffHunk": "@@ -595,6 +595,9 @@ public NamespaceIsolationData getNamespaceIsolationPolicy(\n                             brokerIsolationData.namespaceRegex = Lists.newArrayList();\n                         }\n                         brokerIsolationData.namespaceRegex.addAll(policyData.namespaces);\n+                        if (nsPolicyImpl.isPrimaryBroker(broker)) {\n+                            brokerIsolationData.isPrimary = true;\n+                        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e2884167a9cc7935630152178097ff10e3ca0a0c"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI2ODY2Mjg5", "url": "https://github.com/apache/pulsar/pull/8472#pullrequestreview-526866289", "createdAt": "2020-11-10T05:35:49Z", "commit": {"oid": "e2884167a9cc7935630152178097ff10e3ca0a0c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI2ODg2NDAy", "url": "https://github.com/apache/pulsar/pull/8472#pullrequestreview-526886402", "createdAt": "2020-11-10T06:14:19Z", "commit": {"oid": "e2884167a9cc7935630152178097ff10e3ca0a0c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI2ODk3OTA5", "url": "https://github.com/apache/pulsar/pull/8472#pullrequestreview-526897909", "createdAt": "2020-11-10T06:42:04Z", "commit": {"oid": "e2884167a9cc7935630152178097ff10e3ca0a0c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1181, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}