{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY2MTUwMTE4", "number": 6128, "title": "Fix broker client tls settings error", "bodyText": "when broker create the inside client, it sets tlsTrustCertsFilePath as \"getTlsCertificateFilePath()\", but it should be \"getBrokerClientTrustCertsFilePath()\"", "createdAt": "2020-01-23T02:15:38Z", "url": "https://github.com/apache/pulsar/pull/6128", "merged": true, "mergeCommit": {"oid": "1fcccd62ac9566f3506fad2e2abd3debd54918ee"}, "closed": true, "closedAt": "2020-02-24T20:02:44Z", "author": {"login": "jiazhai"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb9CC4aAFqTM0NzA0NDk5NA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcHjLO_AFqTM2MzY2MzcxMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ3MDQ0OTk0", "url": "https://github.com/apache/pulsar/pull/6128#pullrequestreview-347044994", "createdAt": "2020-01-23T03:47:16Z", "commit": {"oid": "4f889e5c3e0345ba5effb8139d8d6611cbf89ba7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ3MTMwMTA3", "url": "https://github.com/apache/pulsar/pull/6128#pullrequestreview-347130107", "createdAt": "2020-01-23T08:42:20Z", "commit": {"oid": "4f889e5c3e0345ba5effb8139d8d6611cbf89ba7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QwODo0MjoyMVrOFg2Txw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QwODo0MjoyMVrOFg2Txw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTk4ODU1MQ==", "bodyText": "Generally the cacert should be the same. What scenario let you to this problem?", "url": "https://github.com/apache/pulsar/pull/6128#discussion_r369988551", "createdAt": "2020-01-23T08:42:21Z", "author": {"login": "ivankelly"}, "path": "pulsar-broker/src/main/java/org/apache/pulsar/broker/PulsarService.java", "diffHunk": "@@ -873,12 +873,16 @@ public synchronized PulsarClient getClient() throws PulsarServerException {\n                 ClientBuilder builder = PulsarClient.builder()\n                     .serviceUrl(this.getConfiguration().isTlsEnabled()\n                                 ? this.brokerServiceUrlTls : this.brokerServiceUrl)\n-                    .enableTls(this.getConfiguration().isTlsEnabled())\n-                    .allowTlsInsecureConnection(this.getConfiguration().isTlsAllowInsecureConnection())\n-                    .tlsTrustCertsFilePath(this.getConfiguration().getTlsCertificateFilePath());\n+                    .enableTls(this.getConfiguration().isTlsEnabled());\n+\n+                if (this.getConfiguration().isBrokerClientTlsEnabled()) {\n+                    builder.allowTlsInsecureConnection(this.getConfiguration().isTlsAllowInsecureConnection());\n+                    builder.tlsTrustCertsFilePath(this.getConfiguration().getBrokerClientTrustCertsFilePath());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4f889e5c3e0345ba5effb8139d8d6611cbf89ba7"}, "originalPosition": 11}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4f889e5c3e0345ba5effb8139d8d6611cbf89ba7", "author": {"user": {"login": "jiazhai", "name": "Jia Zhai"}}, "url": "https://github.com/apache/pulsar/commit/4f889e5c3e0345ba5effb8139d8d6611cbf89ba7", "committedDate": "2020-01-23T02:07:13Z", "message": "fix broker client tls settings error"}, "afterCommit": {"oid": "1c6661062f4942ab2889c7d662db968b7cae29ab", "author": {"user": {"login": "jiazhai", "name": "Jia Zhai"}}, "url": "https://github.com/apache/pulsar/commit/1c6661062f4942ab2889c7d662db968b7cae29ab", "committedDate": "2020-02-02T07:42:19Z", "message": "change following comments"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1c6661062f4942ab2889c7d662db968b7cae29ab", "author": {"user": {"login": "jiazhai", "name": "Jia Zhai"}}, "url": "https://github.com/apache/pulsar/commit/1c6661062f4942ab2889c7d662db968b7cae29ab", "committedDate": "2020-02-02T07:42:19Z", "message": "change following comments"}, "afterCommit": {"oid": "a90d03a5f91af21f57a7c3141db79409f08449ae", "author": {"user": {"login": "jiazhai", "name": "Jia Zhai"}}, "url": "https://github.com/apache/pulsar/commit/a90d03a5f91af21f57a7c3141db79409f08449ae", "committedDate": "2020-02-12T01:31:13Z", "message": "change following comments"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6c3c06ba3dd6e3837f4e52023d502b96285e87df", "author": {"user": {"login": "jiazhai", "name": "Jia Zhai"}}, "url": "https://github.com/apache/pulsar/commit/6c3c06ba3dd6e3837f4e52023d502b96285e87df", "committedDate": "2020-02-16T02:03:46Z", "message": "Merge branch 'master' into broker_client_tls"}, "afterCommit": {"oid": "2eb763885763102f30ee690dd4a72d19c7226415", "author": {"user": {"login": "jiazhai", "name": "Jia Zhai"}}, "url": "https://github.com/apache/pulsar/commit/2eb763885763102f30ee690dd4a72d19c7226415", "committedDate": "2020-02-19T06:58:34Z", "message": "change following comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a72f0be2ff9ca4b4ac68db7cb07a37de1f57254e", "author": {"user": {"login": "jiazhai", "name": "Jia Zhai"}}, "url": "https://github.com/apache/pulsar/commit/a72f0be2ff9ca4b4ac68db7cb07a37de1f57254e", "committedDate": "2020-02-23T08:36:54Z", "message": "fix broker client tls settings error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "35866c313bcc35ff3c8bc3d71af01bdd20d15478", "author": {"user": {"login": "jiazhai", "name": "Jia Zhai"}}, "url": "https://github.com/apache/pulsar/commit/35866c313bcc35ff3c8bc3d71af01bdd20d15478", "committedDate": "2020-02-23T08:36:54Z", "message": "change following comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cf898a3f233e903a6b3f5bb7c51f3e6d75a51f53", "author": {"user": {"login": "jiazhai", "name": "Jia Zhai"}}, "url": "https://github.com/apache/pulsar/commit/cf898a3f233e903a6b3f5bb7c51f3e6d75a51f53", "committedDate": "2020-02-23T08:58:37Z", "message": "python-ut: move print before assert"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2eb763885763102f30ee690dd4a72d19c7226415", "author": {"user": {"login": "jiazhai", "name": "Jia Zhai"}}, "url": "https://github.com/apache/pulsar/commit/2eb763885763102f30ee690dd4a72d19c7226415", "committedDate": "2020-02-19T06:58:34Z", "message": "change following comments"}, "afterCommit": {"oid": "cf898a3f233e903a6b3f5bb7c51f3e6d75a51f53", "author": {"user": {"login": "jiazhai", "name": "Jia Zhai"}}, "url": "https://github.com/apache/pulsar/commit/cf898a3f233e903a6b3f5bb7c51f3e6d75a51f53", "committedDate": "2020-02-23T08:58:37Z", "message": "python-ut: move print before assert"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "71e13c3b69922b0b43369035b0caa8322729e956", "author": {"user": {"login": "jiazhai", "name": "Jia Zhai"}}, "url": "https://github.com/apache/pulsar/commit/71e13c3b69922b0b43369035b0caa8322729e956", "committedDate": "2020-02-23T10:52:30Z", "message": "change to make backward compat"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYzNjYzNzEw", "url": "https://github.com/apache/pulsar/pull/6128#pullrequestreview-363663710", "createdAt": "2020-02-24T20:02:30Z", "commit": {"oid": "71e13c3b69922b0b43369035b0caa8322729e956"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1330, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}