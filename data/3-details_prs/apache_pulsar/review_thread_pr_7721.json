{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDYxODM4ODA4", "number": 7721, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QxNzoyOTowOVrOEUsW3w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQwMTozMDowMlrOEVOWfA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkwMTMzNzI3OnYy", "diffSide": "RIGHT", "path": "pulsar-functions/instance/src/main/java/org/apache/pulsar/functions/instance/ContextImpl.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QxNzoyOTowOVrOG7CQPA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQwMjowNTowOFrOG7Odsg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDU1NjA5Mg==", "bodyText": "Since the variable is Integer, shouldn't we check for != null ?", "url": "https://github.com/apache/pulsar/pull/7721#discussion_r464556092", "createdAt": "2020-08-03T17:29:09Z", "author": {"login": "merlimat"}, "path": "pulsar-functions/instance/src/main/java/org/apache/pulsar/functions/instance/ContextImpl.java", "diffHunk": "@@ -108,6 +108,14 @@ public ContextImpl(InstanceConfig config, Logger logger, PulsarClient client,\n \n         this.producerBuilder = (ProducerBuilderImpl<?>) client.newProducer().blockIfQueueFull(true).enableBatching(true)\n                 .batchingMaxPublishDelay(1, TimeUnit.MILLISECONDS);\n+        if (config.getFunctionDetails().getSink().getProducerSpec() != null) {\n+            if (config.getFunctionDetails().getSink().getProducerSpec().getMaxPendingMessages() != 0) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f48385426ee54ead73d1af408664c99351cea045"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDc1NjE0Ng==", "bodyText": "We are checking for null in getProducerSpec.\nThe getFunctionDetails is a protobuf and the variable that it returns is an integer. So null checking is not needed", "url": "https://github.com/apache/pulsar/pull/7721#discussion_r464756146", "createdAt": "2020-08-04T02:05:08Z", "author": {"login": "srkukarni"}, "path": "pulsar-functions/instance/src/main/java/org/apache/pulsar/functions/instance/ContextImpl.java", "diffHunk": "@@ -108,6 +108,14 @@ public ContextImpl(InstanceConfig config, Logger logger, PulsarClient client,\n \n         this.producerBuilder = (ProducerBuilderImpl<?>) client.newProducer().blockIfQueueFull(true).enableBatching(true)\n                 .batchingMaxPublishDelay(1, TimeUnit.MILLISECONDS);\n+        if (config.getFunctionDetails().getSink().getProducerSpec() != null) {\n+            if (config.getFunctionDetails().getSink().getProducerSpec().getMaxPendingMessages() != 0) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDU1NjA5Mg=="}, "originalCommit": {"oid": "f48385426ee54ead73d1af408664c99351cea045"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkwNjkwNjg0OnYy", "diffSide": "RIGHT", "path": "pulsar-functions/utils/src/test/java/org/apache/pulsar/functions/utils/FunctionConfigUtilsTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQwMTozMDowMlrOG7286A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQwMTozMDowMlrOG7286A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTQxOTQ5Ng==", "bodyText": "nit lets not use wild cards.  Makes debugging harder", "url": "https://github.com/apache/pulsar/pull/7721#discussion_r465419496", "createdAt": "2020-08-05T01:30:02Z", "author": {"login": "jerrypeng"}, "path": "pulsar-functions/utils/src/test/java/org/apache/pulsar/functions/utils/FunctionConfigUtilsTest.java", "diffHunk": "@@ -20,10 +20,7 @@\n \n import com.google.gson.Gson;\n import org.apache.pulsar.client.impl.schema.JSONSchema;\n-import org.apache.pulsar.common.functions.ConsumerConfig;\n-import org.apache.pulsar.common.functions.FunctionConfig;\n-import org.apache.pulsar.common.functions.Resources;\n-import org.apache.pulsar.common.functions.WindowConfig;\n+import org.apache.pulsar.common.functions.*;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5dcfda18c2402d879756f9d7bf47713e26e4bdc1"}, "originalPosition": 8}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2361, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}