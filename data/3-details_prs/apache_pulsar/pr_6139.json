{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY3MDc1MzQ2", "number": 6139, "title": "[pulsar-kafka] support block-producer on queue-full with sendTimeOut configuration", "bodyText": "Motivation\nRight now, pulsar-kafka producer block the publish when queue is full if sendTimeOut > 0. However, we have multiple users who want to configure sendTimeOut but doesn't want to block the thread and need immediate failure.\nSo, add option to configure BLOCK_IF_PRODUCER_QUEUE_FULL and it will not impact existing behavior because if the BLOCK_IF_PRODUCER_QUEUE_FULL doesn't exist then it will fallback to existing behavior.", "createdAt": "2020-01-25T01:45:25Z", "url": "https://github.com/apache/pulsar/pull/6139", "merged": true, "mergeCommit": {"oid": "5fe096d385c2afaff1f6bc2fd206c051fef47768"}, "closed": true, "closedAt": "2020-02-10T01:31:12Z", "author": {"login": "rdhabalia"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb9p1mpAFqTM0ODMwMzc5OQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABb_n-qbAFqTM1MTI5NTAyNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4MzAzNzk5", "url": "https://github.com/apache/pulsar/pull/6139#pullrequestreview-348303799", "createdAt": "2020-01-25T02:08:58Z", "commit": {"oid": "3e1078da6f297595930a0fd30ccac1f1372b194f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4MzA3NzIw", "url": "https://github.com/apache/pulsar/pull/6139#pullrequestreview-348307720", "createdAt": "2020-01-25T03:30:27Z", "commit": {"oid": "3e1078da6f297595930a0fd30ccac1f1372b194f"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNVQwMzozMDoyN1rOFhunUQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNVQwMzozMDoyN1rOFhunUQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDkxMTA1Nw==", "bodyText": "Does this seem to be a special config setting that only works for pulsar Kafka producer? Can you please document this behavior?", "url": "https://github.com/apache/pulsar/pull/6139#discussion_r370911057", "createdAt": "2020-01-25T03:30:27Z", "author": {"login": "sijie"}, "path": "pulsar-client-kafka-compat/pulsar-client-kafka/src/main/java/org/apache/kafka/clients/producer/PulsarKafkaProducer.java", "diffHunk": "@@ -77,6 +78,14 @@\n     private List<ProducerInterceptor<K, V>> interceptors;\n \n     private final Properties properties;\n+    \n+    public static class Config {\n+        /**\n+         * send operations will immediately fail with {@link ProducerQueueIsFullError} when there is no space left in\n+         * pending queue.\n+         **/\n+        public static final String BLOCK_IF_PRODUCER_QUEUE_FULL = \"block.if.producer.queue.full\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3e1078da6f297595930a0fd30ccac1f1372b194f"}, "originalPosition": 18}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3e1078da6f297595930a0fd30ccac1f1372b194f", "author": {"user": {"login": "rdhabalia", "name": "Rajan Dhabalia"}}, "url": "https://github.com/apache/pulsar/commit/3e1078da6f297595930a0fd30ccac1f1372b194f", "committedDate": "2020-01-25T01:40:57Z", "message": "[pulsar-kafka] support block-producer on queue-full with sendTimeOut configuration"}, "afterCommit": {"oid": "66efac36d829778ffd2c6617a906d06e62771468", "author": {"user": {"login": "rdhabalia", "name": "Rajan Dhabalia"}}, "url": "https://github.com/apache/pulsar/commit/66efac36d829778ffd2c6617a906d06e62771468", "committedDate": "2020-01-29T20:19:34Z", "message": "[pulsar-kafka] support block-producer on queue-full with sendTimeOut configuration"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "66efac36d829778ffd2c6617a906d06e62771468", "author": {"user": {"login": "rdhabalia", "name": "Rajan Dhabalia"}}, "url": "https://github.com/apache/pulsar/commit/66efac36d829778ffd2c6617a906d06e62771468", "committedDate": "2020-01-29T20:19:34Z", "message": "[pulsar-kafka] support block-producer on queue-full with sendTimeOut configuration"}, "afterCommit": {"oid": "afe87ba614366e367ec9b40e14ca5abd96d76d6d", "author": {"user": {"login": "rdhabalia", "name": "Rajan Dhabalia"}}, "url": "https://github.com/apache/pulsar/commit/afe87ba614366e367ec9b40e14ca5abd96d76d6d", "committedDate": "2020-01-29T20:21:34Z", "message": "[pulsar-kafka] support block-producer on queue-full with sendTimeOut configuration"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "155669cc9ae0aed2c12a51d9975c37a9dbc222e2", "author": {"user": {"login": "rdhabalia", "name": "Rajan Dhabalia"}}, "url": "https://github.com/apache/pulsar/commit/155669cc9ae0aed2c12a51d9975c37a9dbc222e2", "committedDate": "2020-01-29T20:21:56Z", "message": "[pulsar-kafka] support block-producer on queue-full with sendTimeOut configuration"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "afe87ba614366e367ec9b40e14ca5abd96d76d6d", "author": {"user": {"login": "rdhabalia", "name": "Rajan Dhabalia"}}, "url": "https://github.com/apache/pulsar/commit/afe87ba614366e367ec9b40e14ca5abd96d76d6d", "committedDate": "2020-01-29T20:21:34Z", "message": "[pulsar-kafka] support block-producer on queue-full with sendTimeOut configuration"}, "afterCommit": {"oid": "155669cc9ae0aed2c12a51d9975c37a9dbc222e2", "author": {"user": {"login": "rdhabalia", "name": "Rajan Dhabalia"}}, "url": "https://github.com/apache/pulsar/commit/155669cc9ae0aed2c12a51d9975c37a9dbc222e2", "committedDate": "2020-01-29T20:21:56Z", "message": "[pulsar-kafka] support block-producer on queue-full with sendTimeOut configuration"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUwNTU5MTI3", "url": "https://github.com/apache/pulsar/pull/6139#pullrequestreview-350559127", "createdAt": "2020-01-30T03:06:23Z", "commit": {"oid": "155669cc9ae0aed2c12a51d9975c37a9dbc222e2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUxMjk1MDI3", "url": "https://github.com/apache/pulsar/pull/6139#pullrequestreview-351295027", "createdAt": "2020-01-31T05:06:54Z", "commit": {"oid": "155669cc9ae0aed2c12a51d9975c37a9dbc222e2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1338, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}