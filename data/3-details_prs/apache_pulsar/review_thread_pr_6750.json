{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA0OTIwMzcw", "number": 6750, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xN1QwNjo1Nzo1MVrODyyWZw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xN1QwNjo1Nzo1MVrODyyWZw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU0NTgwMzI3OnYy", "diffSide": "RIGHT", "path": "pulsar-broker/src/main/java/org/apache/pulsar/broker/service/BrokerService.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xN1QwNjo1Nzo1MlrOGHCGQA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQyMDowNzowNFrOGJWUQA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDAyNzU4NA==", "bodyText": "It's better to make the timeout of the topic loading configurable in the broker.conf", "url": "https://github.com/apache/pulsar/pull/6750#discussion_r410027584", "createdAt": "2020-04-17T06:57:52Z", "author": {"login": "codelipenghui"}, "path": "pulsar-broker/src/main/java/org/apache/pulsar/broker/service/BrokerService.java", "diffHunk": "@@ -861,7 +861,8 @@ public PulsarAdmin getClusterPulsarAdmin(String cluster) {\n     protected CompletableFuture<Optional<Topic>> loadOrCreatePersistentTopic(final String topic,\n             boolean createIfMissing) throws RuntimeException {\n         checkTopicNsOwnership(topic);\n-        final CompletableFuture<Optional<Topic>> topicFuture = futureWithDeadline();\n+        // this timeout needs to be extra long in the case of topics with many replication clusters\n+        final CompletableFuture<Optional<Topic>> topicFuture = futureWithDeadline(5L, TimeUnit.MINUTES, new TimeoutException(\"Failed to load topic within timeout\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ed1a9ec2de6538d3c3e24b3f2fb5bc32e9a252e1"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjQ1NjAwMA==", "bodyText": "+1 we should make this setting configurable.", "url": "https://github.com/apache/pulsar/pull/6750#discussion_r412456000", "createdAt": "2020-04-21T20:07:04Z", "author": {"login": "sijie"}, "path": "pulsar-broker/src/main/java/org/apache/pulsar/broker/service/BrokerService.java", "diffHunk": "@@ -861,7 +861,8 @@ public PulsarAdmin getClusterPulsarAdmin(String cluster) {\n     protected CompletableFuture<Optional<Topic>> loadOrCreatePersistentTopic(final String topic,\n             boolean createIfMissing) throws RuntimeException {\n         checkTopicNsOwnership(topic);\n-        final CompletableFuture<Optional<Topic>> topicFuture = futureWithDeadline();\n+        // this timeout needs to be extra long in the case of topics with many replication clusters\n+        final CompletableFuture<Optional<Topic>> topicFuture = futureWithDeadline(5L, TimeUnit.MINUTES, new TimeoutException(\"Failed to load topic within timeout\"));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDAyNzU4NA=="}, "originalCommit": {"oid": "ed1a9ec2de6538d3c3e24b3f2fb5bc32e9a252e1"}, "originalPosition": 6}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1788, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}