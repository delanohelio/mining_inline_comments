{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE3MDcwMzI2", "number": 8472, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQwNToxOToyMlrOE3D8-A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQwNToxOToyMlrOE3D8-A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI2MTcxODk2OnYy", "diffSide": "RIGHT", "path": "pulsar-broker/src/main/java/org/apache/pulsar/broker/admin/impl/ClustersBase.java", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQwNToxOToyMlrOHwMH-A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQwNToyNzo0M1rOHwMRZw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDI5MjM0NA==", "bodyText": "Do we need to add the initialization of isSecondary?", "url": "https://github.com/apache/pulsar/pull/8472#discussion_r520292344", "createdAt": "2020-11-10T05:19:22Z", "author": {"login": "tuteng"}, "path": "pulsar-broker/src/main/java/org/apache/pulsar/broker/admin/impl/ClustersBase.java", "diffHunk": "@@ -595,6 +595,9 @@ public NamespaceIsolationData getNamespaceIsolationPolicy(\n                             brokerIsolationData.namespaceRegex = Lists.newArrayList();\n                         }\n                         brokerIsolationData.namespaceRegex.addAll(policyData.namespaces);\n+                        if (nsPolicyImpl.isPrimaryBroker(broker)) {\n+                            brokerIsolationData.isPrimary = true;\n+                        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e2884167a9cc7935630152178097ff10e3ca0a0c"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDI5MzE5NA==", "bodyText": "\ud83d\udc4d", "url": "https://github.com/apache/pulsar/pull/8472#discussion_r520293194", "createdAt": "2020-11-10T05:22:26Z", "author": {"login": "jiazhai"}, "path": "pulsar-broker/src/main/java/org/apache/pulsar/broker/admin/impl/ClustersBase.java", "diffHunk": "@@ -595,6 +595,9 @@ public NamespaceIsolationData getNamespaceIsolationPolicy(\n                             brokerIsolationData.namespaceRegex = Lists.newArrayList();\n                         }\n                         brokerIsolationData.namespaceRegex.addAll(policyData.namespaces);\n+                        if (nsPolicyImpl.isPrimaryBroker(broker)) {\n+                            brokerIsolationData.isPrimary = true;\n+                        }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDI5MjM0NA=="}, "originalCommit": {"oid": "e2884167a9cc7935630152178097ff10e3ca0a0c"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDI5MzkyNw==", "bodyText": "Oh, @tuteng  I see, there is no such an area for isSecondary. Maybe we could add this area if there is requirement from user.\npublic class BrokerNamespaceIsolationData {\n\n    @ApiModelProperty(\n        name = \"brokerName\",\n        value = \"The broker name\",\n        example = \"broker1:8080\"\n    )\n    public String brokerName;\n    @ApiModelProperty(\n            name = \"policyName\",\n            value = \"Policy name\",\n            example = \"my-policy\"\n        )\n    public String policyName;\n    @ApiModelProperty(\n            name = \"isPrimary\",\n            value = \"Is Primary broker\",\n            example = \"true/false\"\n        )\n    public boolean isPrimary;\n    @ApiModelProperty(\n        name = \"namespaceRegex\",\n        value = \"The namespace-isolation policies attached to this broker\"\n    )\n    public List<String> namespaceRegex;", "url": "https://github.com/apache/pulsar/pull/8472#discussion_r520293927", "createdAt": "2020-11-10T05:24:57Z", "author": {"login": "jiazhai"}, "path": "pulsar-broker/src/main/java/org/apache/pulsar/broker/admin/impl/ClustersBase.java", "diffHunk": "@@ -595,6 +595,9 @@ public NamespaceIsolationData getNamespaceIsolationPolicy(\n                             brokerIsolationData.namespaceRegex = Lists.newArrayList();\n                         }\n                         brokerIsolationData.namespaceRegex.addAll(policyData.namespaces);\n+                        if (nsPolicyImpl.isPrimaryBroker(broker)) {\n+                            brokerIsolationData.isPrimary = true;\n+                        }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDI5MjM0NA=="}, "originalCommit": {"oid": "e2884167a9cc7935630152178097ff10e3ca0a0c"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDI5NDc1OQ==", "bodyText": "do we need to add a field isSecondary to this entity? @jiazhai The isPrimary field also seems to be newly added #5314, Or add it in the future", "url": "https://github.com/apache/pulsar/pull/8472#discussion_r520294759", "createdAt": "2020-11-10T05:27:43Z", "author": {"login": "tuteng"}, "path": "pulsar-broker/src/main/java/org/apache/pulsar/broker/admin/impl/ClustersBase.java", "diffHunk": "@@ -595,6 +595,9 @@ public NamespaceIsolationData getNamespaceIsolationPolicy(\n                             brokerIsolationData.namespaceRegex = Lists.newArrayList();\n                         }\n                         brokerIsolationData.namespaceRegex.addAll(policyData.namespaces);\n+                        if (nsPolicyImpl.isPrimaryBroker(broker)) {\n+                            brokerIsolationData.isPrimary = true;\n+                        }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDI5MjM0NA=="}, "originalCommit": {"oid": "e2884167a9cc7935630152178097ff10e3ca0a0c"}, "originalPosition": 6}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2880, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}