{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDUzMDkwMjM2", "number": 7603, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxOToxNDo1OVrOEQwuNQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxNDoyNTo0NFrOEREhFA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg2MDEwOTMzOnYy", "diffSide": "RIGHT", "path": ".github/workflows/ci-license.yaml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxOToxNDo1OVrOG1GNhQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQwMDoyMjowM1rOG1OVRQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODMyOTQ3Nw==", "bodyText": "-Pcore-modules", "url": "https://github.com/apache/pulsar/pull/7603#discussion_r458329477", "createdAt": "2020-07-21T19:14:59Z", "author": {"login": "merlimat"}, "path": ".github/workflows/ci-license.yaml", "diffHunk": "@@ -40,27 +42,7 @@ jobs:\n           fetch-depth: 0\n           ref: ${{ github.event.pull_request.head.sha }}\n \n-      - name: Cache local Maven repository\n-        uses: actions/cache@v2\n-        with:\n-          path: ~/.m2/repository\n-          key: ${{ runner.os }}-maven-${{ hashFiles('**/pom.xml') }}\n-          restore-keys: |\n-            ${{ runner.os }}-maven-\n-\n-      - name: Set up JDK 1.8\n-        uses: actions/setup-java@v1\n-        with:\n-          java-version: 1.8\n-\n-      # license check fails with 3.6.2 so we have to downgrade\n-      - name: Set up Maven\n-        uses: apache/pulsar-test-infra/setup-maven@master\n-        with:\n-          maven-version: 3.6.1\n-\n-      - name: build and check license\n-        run: mvn -B -ntp -DskipTests license:check install\n-          \n       - name: license check\n-        run: src/check-binary-license ./distribution/server/target/apache-pulsar-*-bin.tar.gz\n+        run: |\n+          mvn -B -ntp license:check install -DskipTests", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "206b3bdf57b6feda53fb28e5e630654fd80098b8"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODQ2MjUzMw==", "bodyText": "license check applies to all modules so we can't filter", "url": "https://github.com/apache/pulsar/pull/7603#discussion_r458462533", "createdAt": "2020-07-22T00:22:03Z", "author": {"login": "aahmed-se"}, "path": ".github/workflows/ci-license.yaml", "diffHunk": "@@ -40,27 +42,7 @@ jobs:\n           fetch-depth: 0\n           ref: ${{ github.event.pull_request.head.sha }}\n \n-      - name: Cache local Maven repository\n-        uses: actions/cache@v2\n-        with:\n-          path: ~/.m2/repository\n-          key: ${{ runner.os }}-maven-${{ hashFiles('**/pom.xml') }}\n-          restore-keys: |\n-            ${{ runner.os }}-maven-\n-\n-      - name: Set up JDK 1.8\n-        uses: actions/setup-java@v1\n-        with:\n-          java-version: 1.8\n-\n-      # license check fails with 3.6.2 so we have to downgrade\n-      - name: Set up Maven\n-        uses: apache/pulsar-test-infra/setup-maven@master\n-        with:\n-          maven-version: 3.6.1\n-\n-      - name: build and check license\n-        run: mvn -B -ntp -DskipTests license:check install\n-          \n       - name: license check\n-        run: src/check-binary-license ./distribution/server/target/apache-pulsar-*-bin.tar.gz\n+        run: |\n+          mvn -B -ntp license:check install -DskipTests", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODMyOTQ3Nw=="}, "originalCommit": {"oid": "206b3bdf57b6feda53fb28e5e630654fd80098b8"}, "originalPosition": 43}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg2MzM1MDc1OnYy", "diffSide": "RIGHT", "path": ".github/workflows/ci-unit-broker-broker-gp1.yaml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxNDoyNToyMFrOG1k7HA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxNDoyNToyMFrOG1k7HA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODgzMjY2OA==", "bodyText": "This would be fetching snapshot dependencies for other modules and it will fail to compile whenever a commit is also touching more than just pulsar-broker. Rather why not just do install with -Pcore-modules", "url": "https://github.com/apache/pulsar/pull/7603#discussion_r458832668", "createdAt": "2020-07-22T14:25:20Z", "author": {"login": "merlimat"}, "path": ".github/workflows/ci-unit-broker-broker-gp1.yaml", "diffHunk": "@@ -40,39 +42,11 @@ jobs:\n           fetch-depth: 0\n           ref: ${{ github.event.pull_request.head.sha }}\n \n-      - name: Cache local Maven repository\n-        uses: actions/cache@v2\n-        with:\n-          path: ~/.m2/repository\n-          key: ${{ runner.os }}-maven-${{ hashFiles('**/pom.xml') }}\n-          restore-keys: |\n-            ${{ runner.os }}-maven-\n-\n-      - name: Check if this pull request only changes documentation\n-        id:   docs\n-        uses: apache/pulsar-test-infra/diff-only@master\n-        with:\n-          args: site2 .github deployment .asf.yaml .ci ct.yaml\n-\n-      - name: Set up JDK 1.8\n-        uses: actions/setup-java@v1\n-        if: steps.docs.outputs.changed_only == 'no'\n-        with:\n-          java-version: 1.8\n-\n-      - name: Set up Maven\n-        uses: apache/pulsar-test-infra/setup-maven@master\n-        if: steps.docs.outputs.changed_only == 'no'\n-        with:\n-          maven-version: 3.6.1\n-\n-      - name: run unit tests install by skip tests\n-        if: steps.docs.outputs.changed_only == 'no'\n-        run: mvn clean install -DskipTests -pl pulsar-broker-auth-sasl -am\n-\n-      - name: run unit tests pulsar auth sasl\n-        if: steps.docs.outputs.changed_only == 'no'\n-        run: mvn test -DfailIfNoTests=false -pl pulsar-broker-auth-sasl\n+      - name: run unit tests for pulsar-broker\n+        run: |\n+          mvn -B -q -ntp install -pl pulsar-broker -am -DskipTests", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "532e69b0648a1eece850bd7b082c706e489c66ea"}, "originalPosition": 57}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg2MzM1MjUyOnYy", "diffSide": "LEFT", "path": ".github/workflows/ci-unit-broker-broker-gp1.yaml", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxNDoyNTo0NFrOG1k8NA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxNDoyNTo0NFrOG1k8NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODgzMjk0OA==", "bodyText": "Why removing cache? We can still use it to cache maven deps", "url": "https://github.com/apache/pulsar/pull/7603#discussion_r458832948", "createdAt": "2020-07-22T14:25:44Z", "author": {"login": "merlimat"}, "path": ".github/workflows/ci-unit-broker-broker-gp1.yaml", "diffHunk": "@@ -40,39 +42,11 @@ jobs:\n           fetch-depth: 0\n           ref: ${{ github.event.pull_request.head.sha }}\n \n-      - name: Cache local Maven repository", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "532e69b0648a1eece850bd7b082c706e489c66ea"}, "originalPosition": 22}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2305, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}