{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA3Mzg4OTEx", "number": 8325, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQxNzo1NToyNFrOEwYqiQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQxNTo1MjowM1rOEw1UgQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE5MTcxMjA5OnYy", "diffSide": "RIGHT", "path": "pulsar-client-go/pulsar/c_go_pulsar.h", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQxNzo1NToyNFrOHl6YSA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQxNzo1NToyNFrOHl6YSA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTUxNTg0OA==", "bodyText": "This doesn't change anything, it's just for consistency with the next line.", "url": "https://github.com/apache/pulsar/pull/8325#discussion_r509515848", "createdAt": "2020-10-21T17:55:24Z", "author": {"login": "bschofield"}, "path": "pulsar-client-go/pulsar/c_go_pulsar.h", "diffHunk": "@@ -61,7 +61,7 @@ static inline void _pulsar_producer_close_async(pulsar_producer_t *producer, voi\n     pulsar_producer_close_async(producer, pulsarProducerCloseCallbackProxy, ctx);\n }\n \n-void pulsarProducerSendCallbackProxy(pulsar_result result, pulsar_message_id_t *message, void *ctx);\n+void pulsarProducerSendCallbackProxy(pulsar_result result, pulsar_message_id_t *messageId, void *ctx);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fa4356d95417fea946d56d469efb53ad25f6204c"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE5NjQwNzA1OnYy", "diffSide": "RIGHT", "path": "pulsar-client-go/pulsar/c_producer.go", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQxNTo1MjowM1rOHmoksw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQxNzowNTo0MFrOHmrl3g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDI3MjY5MQ==", "bodyText": "@bschofield I think this free should not be done, because getMessageId(messageId) is already attaching a finalizer to the Go object and it will free the message id automatically:\nfunc getMessageId(messageId *C.pulsar_message_id_t) MessageID {\n\tmsgId := &messageID{ptr: messageId}\n\truntime.SetFinalizer(msgId, messageIdFinalizer)\n\treturn msgId\n}", "url": "https://github.com/apache/pulsar/pull/8325#discussion_r510272691", "createdAt": "2020-10-22T15:52:03Z", "author": {"login": "merlimat"}, "path": "pulsar-client-go/pulsar/c_producer.go", "diffHunk": "@@ -298,6 +298,7 @@ func pulsarProducerSendCallbackProxyWithMsgID(res C.pulsar_result, messageId *C.\n \t\tsendCallback.callback(getMessageId(messageId), newError(res, \"Failed to send message\"))\n \t} else {\n \t\tsendCallback.callback(getMessageId(messageId), nil)\n+\t\tC.pulsar_message_id_free(messageId)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fa4356d95417fea946d56d469efb53ad25f6204c"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDMyMjE0Mg==", "bodyText": "You're absolutely right. I didn't even think to check that getter for side effects. Removed in latest commit. Thanks!", "url": "https://github.com/apache/pulsar/pull/8325#discussion_r510322142", "createdAt": "2020-10-22T17:05:40Z", "author": {"login": "bschofield"}, "path": "pulsar-client-go/pulsar/c_producer.go", "diffHunk": "@@ -298,6 +298,7 @@ func pulsarProducerSendCallbackProxyWithMsgID(res C.pulsar_result, messageId *C.\n \t\tsendCallback.callback(getMessageId(messageId), newError(res, \"Failed to send message\"))\n \t} else {\n \t\tsendCallback.callback(getMessageId(messageId), nil)\n+\t\tC.pulsar_message_id_free(messageId)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDI3MjY5MQ=="}, "originalCommit": {"oid": "fa4356d95417fea946d56d469efb53ad25f6204c"}, "originalPosition": 20}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2947, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}