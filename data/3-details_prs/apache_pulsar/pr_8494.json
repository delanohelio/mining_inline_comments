{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE4MTY0NzI4", "number": 8494, "title": "[AdminCli] Add ability to examine specific message by position relative to earliest or latest message.", "bodyText": "Fixes #5126\nMotivation\nAdd ability to examine specific message by position relative to earliest or latest message.\nSo we can easily debug with topic without need to create subscription or fetch message by getting position(legerId:entryId) for that message first.\nModifications\nAdd rest and cli command to get specific message from a topic position relative to earliest/latest message.\nExposed asyncReadEntry, getFirstPosition, getPositionAfterN and getNumberOfEntries in PersistentTopic to help implementing it..\nVerifying this change\n\n Make sure that the change passes the CI checks.\n\nThis change added tests and can be verified as follows:\nAdded unit test.\nDoes this pull request potentially affect one of the following parts:\n\nDependencies (does it add or upgrade a dependency): no\nThe public API: no\nThe schema: no\nThe default values of configurations: no\nThe wire protocol: no\nThe rest endpoints: no\nThe admin cli options: yes\nAnything that affects deployment: no\n\nDocumentation\n\nDoes this pull request introduce a new feature? yes\nIf yes, how is the feature documented? JavaDocs", "createdAt": "2020-11-10T02:32:28Z", "url": "https://github.com/apache/pulsar/pull/8494", "merged": true, "mergeCommit": {"oid": "fdcf61321f06237e26d00ee0cc5bfbad20506801"}, "closed": true, "closedAt": "2020-11-11T11:43:33Z", "author": {"login": "MarvinCai"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABaS1ylbAH2gAyNTE4MTY0NzI4OjFhNDU1NjRmOThhMWUzMWQwNzYxMGM4MzgwZTQ4MDkwZTFlMDBkZGE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdbcd2OAFqTUyODA5ODM2NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "1a45564f98a1e31d07610c8380e48090e1e00dda", "author": {"user": {"login": "MarvinCai", "name": "Marvin Cai"}}, "url": "https://github.com/apache/pulsar/commit/1a45564f98a1e31d07610c8380e48090e1e00dda", "committedDate": "2019-02-27T05:34:38Z", "message": "Merge pull request #1 from apache/master\n\nMerge mainline to zxc's personal repo."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7eb76b43c57e2fb82cb82eabe6a398c242aa58a4", "author": {"user": {"login": "MarvinCai", "name": "Marvin Cai"}}, "url": "https://github.com/apache/pulsar/commit/7eb76b43c57e2fb82cb82eabe6a398c242aa58a4", "committedDate": "2020-08-01T06:50:56Z", "message": "Merge remote-tracking branch 'apache-pulsar/master'"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6adf8aff146123ea096069f3687df103c4ffe2c2", "author": {"user": {"login": "MarvinCai", "name": "Marvin Cai"}}, "url": "https://github.com/apache/pulsar/commit/6adf8aff146123ea096069f3687df103c4ffe2c2", "committedDate": "2020-11-09T07:04:56Z", "message": "Add ability to examine a message with position relative to latest/earliest message."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9970dfdf3794b95d09488781949c93b35b473701", "author": {"user": {"login": "MarvinCai", "name": "Marvin Cai"}}, "url": "https://github.com/apache/pulsar/commit/9970dfdf3794b95d09488781949c93b35b473701", "committedDate": "2020-11-10T00:19:44Z", "message": "Merge remote-tracking branch 'apache-pulsar/master' into examineMessage"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "66879c02a619642f103780289343aa107874265d", "author": {"user": {"login": "MarvinCai", "name": "Marvin Cai"}}, "url": "https://github.com/apache/pulsar/commit/66879c02a619642f103780289343aa107874265d", "committedDate": "2020-11-10T02:21:32Z", "message": "Add cmd."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6d2d24ca1dfb23f014d819795f446e36315a4db3", "author": {"user": {"login": "MarvinCai", "name": "Marvin Cai"}}, "url": "https://github.com/apache/pulsar/commit/6d2d24ca1dfb23f014d819795f446e36315a4db3", "committedDate": "2020-11-10T02:32:46Z", "message": "Fix merge conflict."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI2ODYwMDcw", "url": "https://github.com/apache/pulsar/pull/8494#pullrequestreview-526860070", "createdAt": "2020-11-10T05:19:21Z", "commit": {"oid": "6d2d24ca1dfb23f014d819795f446e36315a4db3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQwNToxOToyMVrOHwMH9Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQwNToxOToyMVrOHwMH9Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDI5MjM0MQ==", "bodyText": "turn @Test() into @Test if no parameter will add to it?", "url": "https://github.com/apache/pulsar/pull/8494#discussion_r520292341", "createdAt": "2020-11-10T05:19:21Z", "author": {"login": "jiazhai"}, "path": "pulsar-broker/src/test/java/org/apache/pulsar/broker/admin/PersistentTopicsTest.java", "diffHunk": "@@ -568,4 +568,42 @@ public void testGetLastMessageId() throws Exception {\n         Assert.assertTrue(admin.topics().getLastMessageId(topicName) instanceof MessageIdImpl);\n \n     }\n+\n+    @Test()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6d2d24ca1dfb23f014d819795f446e36315a4db3"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI2ODkxNTI5", "url": "https://github.com/apache/pulsar/pull/8494#pullrequestreview-526891529", "createdAt": "2020-11-10T06:26:57Z", "commit": {"oid": "6d2d24ca1dfb23f014d819795f446e36315a4db3"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "db194588aa0cf82922578f97eef782bdd5c8c1b2", "author": {"user": {"login": "MarvinCai", "name": "Marvin Cai"}}, "url": "https://github.com/apache/pulsar/commit/db194588aa0cf82922578f97eef782bdd5c8c1b2", "committedDate": "2020-11-10T17:39:10Z", "message": "Address pr comment."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI3ODk5Njgy", "url": "https://github.com/apache/pulsar/pull/8494#pullrequestreview-527899682", "createdAt": "2020-11-11T06:41:11Z", "commit": {"oid": "db194588aa0cf82922578f97eef782bdd5c8c1b2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI4MDk4MzY1", "url": "https://github.com/apache/pulsar/pull/8494#pullrequestreview-528098365", "createdAt": "2020-11-11T11:43:08Z", "commit": {"oid": "db194588aa0cf82922578f97eef782bdd5c8c1b2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1191, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}