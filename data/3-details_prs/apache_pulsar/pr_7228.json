{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMyMjMwNjQy", "number": 7228, "title": "Protobuf-shaded package can not update version", "bodyText": "Motivation\nUsing set-project-version.sh always failed with updating\nprotobuf-shaded parent version.\nerror log:\n[INFO] Scanning for projects...\n[ERROR] [ERROR] Some problems were encountered while processing the POMs:\n[FATAL] Non-resolvable parent POM for org.apache.pulsar:protobuf-shaded:2.6.0-SNAPSHOT: Could not find artifact org.apache.pulsar:pulsar:pom:2.6.0-SNAPSHOT and 'parent.relativePath' points at wrong local POM @ line 26, column 11\n @\n [ERROR] The build could not read 1 project > [Help 1]\n [ERROR]\n [ERROR]   The project org.apache.pulsar:protobuf-shaded:2.6.0-SNAPSHOT (/home/zhangyong/actions-runner/_work/streamnative-ci/streamnative-ci/pulsar/protobuf-shaded/pom.xml) has 1 error\n [ERROR]     Non-resolvable parent POM for org.apache.pulsar:protobuf-shaded:2.6.0-SNAPSHOT: Could not find artifact org.apache.pulsar:pulsar:pom:2.6.0-SNAPSHOT and 'parent.relativePath' points at wrong local POM @ line 26, column 11 > [Help 2]\n [ERROR]\n [ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n [ERROR] Re-run Maven using the -X switch to enable full debug logging.\n [ERROR]\n [ERROR] For more information about the errors and possible solutions, please read the following articles:\n [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/ProjectBuildingException-''-''", "createdAt": "2020-06-10T06:24:49Z", "url": "https://github.com/apache/pulsar/pull/7228", "merged": true, "mergeCommit": {"oid": "47f57b085ef5f59ac48567b4dc64336de881d7ed"}, "closed": true, "closedAt": "2020-06-11T19:14:01Z", "author": {"login": "zymap"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcpzfpRAH2gAyNDMyMjMwNjQyOjY5NGJiYjE4ZjE0YzUwNzdkODc0YTBiYTcxZTExNDgxNmRiMzRlMzE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcqTNhYAFqTQyOTIxMDY3Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "694bbb18f14c5077d874a0ba71e114816db34e31", "author": {"user": {"login": "zymap", "name": "Yong Zhang"}}, "url": "https://github.com/apache/pulsar/commit/694bbb18f14c5077d874a0ba71e114816db34e31", "committedDate": "2020-06-10T06:16:42Z", "message": "Protobuf-shaeded package can not udpate version\n---\n\n*Motivation*\n\nUsing `set-project-version.sh` always failed with updating\nprotobuf-shaded parent version.\n\nerror log:\n\n```\n[INFO] Scanning for projects...\n[ERROR] [ERROR] Some problems were encountered while processing the POMs:\n[FATAL] Non-resolvable parent POM for org.apache.pulsar:protobuf-shaded:2.6.0-SNAPSHOT: Could not find artifact org.apache.pulsar:pulsar:pom:2.6.0-SNAPSHOT and 'parent.relativePath' points at wrong local POM @ line 26, column 11\n @\n [ERROR] The build could not read 1 project > [Help 1]\n [ERROR]\n [ERROR]   The project org.apache.pulsar:protobuf-shaded:2.6.0-SNAPSHOT (/home/zhangyong/actions-runner/_work/streamnative-ci/streamnative-ci/pulsar/protobuf-shaded/pom.xml) has 1 error\n [ERROR]     Non-resolvable parent POM for org.apache.pulsar:protobuf-shaded:2.6.0-SNAPSHOT: Could not find artifact org.apache.pulsar:pulsar:pom:2.6.0-SNAPSHOT and 'parent.relativePath' points at wrong local POM @ line 26, column 11 > [Help 2]\n [ERROR]\n [ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n [ERROR] Re-run Maven using the -X switch to enable full debug logging.\n [ERROR]\n [ERROR] For more information about the errors and possible solutions, please read the following articles:\n [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/ProjectBuildingException-''-''\n```"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ec4b3e85c5354f73015173dcc83ec9374e5c7d49", "author": {"user": {"login": "zymap", "name": "Yong Zhang"}}, "url": "https://github.com/apache/pulsar/commit/ec4b3e85c5354f73015173dcc83ec9374e5c7d49", "committedDate": "2020-06-10T07:07:31Z", "message": "Using 'sed' to replace the old version"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e54cdc0dd8b367160db4deae8f8c30bf6e1a04ec", "author": {"user": {"login": "zymap", "name": "Yong Zhang"}}, "url": "https://github.com/apache/pulsar/commit/e54cdc0dd8b367160db4deae8f8c30bf6e1a04ec", "committedDate": "2020-06-10T08:02:50Z", "message": "Fix scripts"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "56a1a915e8f90bc439369af7010030079124face", "author": {"user": {"login": "zymap", "name": "Yong Zhang"}}, "url": "https://github.com/apache/pulsar/commit/56a1a915e8f90bc439369af7010030079124face", "committedDate": "2020-06-10T07:20:03Z", "message": "Fix scripts"}, "afterCommit": {"oid": "e54cdc0dd8b367160db4deae8f8c30bf6e1a04ec", "author": {"user": {"login": "zymap", "name": "Yong Zhang"}}, "url": "https://github.com/apache/pulsar/commit/e54cdc0dd8b367160db4deae8f8c30bf6e1a04ec", "committedDate": "2020-06-10T08:02:50Z", "message": "Fix scripts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "239045026a4868975a95bb11b4f2a0dc9ab60cfd", "author": {"user": {"login": "zymap", "name": "Yong Zhang"}}, "url": "https://github.com/apache/pulsar/commit/239045026a4868975a95bb11b4f2a0dc9ab60cfd", "committedDate": "2020-06-10T10:56:09Z", "message": "Merge remote-tracking branch 'upstream/master' into fix-update-version"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI4MTc1Mjkz", "url": "https://github.com/apache/pulsar/pull/7228#pullrequestreview-428175293", "createdAt": "2020-06-10T15:29:04Z", "commit": {"oid": "239045026a4868975a95bb11b4f2a0dc9ab60cfd"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI4MjcwNDU5", "url": "https://github.com/apache/pulsar/pull/7228#pullrequestreview-428270459", "createdAt": "2020-06-10T17:18:53Z", "commit": {"oid": "239045026a4868975a95bb11b4f2a0dc9ab60cfd"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQxNzoxODo1M1rOGh-4mw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQxNzoxODo1M1rOGh-4mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODI4NjQ5MQ==", "bodyText": "There's already a script that we use in multiple places to get the version: ./src/get-project-version.py", "url": "https://github.com/apache/pulsar/pull/7228#discussion_r438286491", "createdAt": "2020-06-10T17:18:53Z", "author": {"login": "merlimat"}, "path": "src/set-project-version.sh", "diffHunk": "@@ -30,12 +30,13 @@ NEW_VERSION=$1\n # Go to top level project directory\n pushd $(dirname \"$0\")/..\n \n+# Get the current version\n+OLD_VERSION=`mvn -q -Dexec.executable=echo -Dexec.args='${project.version}' --non-recursive exec:exec`", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "239045026a4868975a95bb11b4f2a0dc9ab60cfd"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a12f7d421c504d109f6a46bf32d61f8319579b9e", "author": {"user": {"login": "zymap", "name": "Yong Zhang"}}, "url": "https://github.com/apache/pulsar/commit/a12f7d421c504d109f6a46bf32d61f8319579b9e", "committedDate": "2020-06-11T02:46:34Z", "message": "Address comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI5MjEwNjcy", "url": "https://github.com/apache/pulsar/pull/7228#pullrequestreview-429210672", "createdAt": "2020-06-11T19:13:52Z", "commit": {"oid": "a12f7d421c504d109f6a46bf32d61f8319579b9e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 650, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}