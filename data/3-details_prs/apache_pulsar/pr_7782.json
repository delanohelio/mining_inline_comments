{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY0NDg5NzMz", "number": 7782, "title": "make pulsar executor pool size configurable", "bodyText": "Motivation\nThe pulsar executor pool size number is hard code to 20 when pulsar service start, it should be configurable in broker.conf.\nprivate final ScheduledExecutorService executor = Executors.newScheduledThreadPool(20,\n            new DefaultThreadFactory(\"pulsar\"));\n\nChanges\nmake the executor pool size configurable in broker.conf", "createdAt": "2020-08-07T09:09:40Z", "url": "https://github.com/apache/pulsar/pull/7782", "merged": true, "mergeCommit": {"oid": "bd09aa0dcd9ae77576dc3686befcece9debb5a89"}, "closed": true, "closedAt": "2020-08-10T14:09:46Z", "author": {"login": "hangc0276"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc8gpiMAH2gAyNDY0NDg5NzMzOmE2ZDEwZjk5MDY1NTU5Yzg4ZGUzY2VhNTk5ODViODFhYWQ5MTc5OWM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc9i0YdgFqTQ2NDI2MjQ5Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "a6d10f99065559c88de3cea59985b81aad91799c", "author": {"user": {"login": "hangc0276", "name": "Hang Chen"}}, "url": "https://github.com/apache/pulsar/commit/a6d10f99065559c88de3cea59985b81aad91799c", "committedDate": "2020-08-07T09:03:52Z", "message": "make pulsar executor pool size configurable"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYzNzIzMzEx", "url": "https://github.com/apache/pulsar/pull/7782#pullrequestreview-463723311", "createdAt": "2020-08-08T06:40:00Z", "commit": {"oid": "a6d10f99065559c88de3cea59985b81aad91799c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYzODEzNDk4", "url": "https://github.com/apache/pulsar/pull/7782#pullrequestreview-463813498", "createdAt": "2020-08-08T16:35:37Z", "commit": {"oid": "a6d10f99065559c88de3cea59985b81aad91799c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOFQxNjozNTozN1rOG900xA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOFQxNjozNTozN1rOG900xA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzQ4MTc5Ng==", "bodyText": "I would be better to default to something like Runtime.getRuntime().availableProcessors()", "url": "https://github.com/apache/pulsar/pull/7782#discussion_r467481796", "createdAt": "2020-08-08T16:35:37Z", "author": {"login": "merlimat"}, "path": "conf/broker.conf", "diffHunk": "@@ -61,6 +61,12 @@ numIOThreads=\n # Number of threads to use for HTTP requests processing. Default is set to 2 * Runtime.getRuntime().availableProcessors()\n numHttpServerThreads=\n \n+# Number of thread pool size to use for pulsar broker service.\n+# The executor in thread pool will do basic broker operation like load/unload bundle, update managedLedgerConfig,\n+# update topic/subscription/replicator message dispatch rate, do leader election etc.\n+# Default is 20\n+numExecutorThreadPoolSize=", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a6d10f99065559c88de3cea59985b81aad91799c"}, "originalPosition": 8}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYzODc5NTIz", "url": "https://github.com/apache/pulsar/pull/7782#pullrequestreview-463879523", "createdAt": "2020-08-09T14:41:24Z", "commit": {"oid": "a6d10f99065559c88de3cea59985b81aad91799c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOVQxNDo0MToyNFrOG97ilQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOVQxNDo0MToyNFrOG97ilQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzU5MTgyOQ==", "bodyText": "@hangc0276  would you please help changed this value as Matteo suggested? Runtime.getRuntime().availableProcessors()", "url": "https://github.com/apache/pulsar/pull/7782#discussion_r467591829", "createdAt": "2020-08-09T14:41:24Z", "author": {"login": "jiazhai"}, "path": "pulsar-broker/src/main/java/org/apache/pulsar/broker/PulsarService.java", "diffHunk": "@@ -170,8 +170,8 @@\n     private LocalZooKeeperConnectionService localZooKeeperConnectionProvider;\n     private Compactor compactor;\n \n-    private final ScheduledExecutorService executor = Executors.newScheduledThreadPool(20,\n-            new DefaultThreadFactory(\"pulsar\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a6d10f99065559c88de3cea59985b81aad91799c"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYzOTIzNDIy", "url": "https://github.com/apache/pulsar/pull/7782#pullrequestreview-463923422", "createdAt": "2020-08-10T01:17:30Z", "commit": {"oid": "a6d10f99065559c88de3cea59985b81aad91799c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d4da45ad8a5f5d1b6cf8f2d21d506e2874b0f578", "author": {"user": {"login": "hangc0276", "name": "Hang Chen"}}, "url": "https://github.com/apache/pulsar/commit/d4da45ad8a5f5d1b6cf8f2d21d506e2874b0f578", "committedDate": "2020-08-10T01:27:28Z", "message": "change default executor thread pool size to Runtime.getRuntime().availableProcessors() and reduce executor thread pool size when running unit tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY0MjYyNDk2", "url": "https://github.com/apache/pulsar/pull/7782#pullrequestreview-464262496", "createdAt": "2020-08-10T14:09:28Z", "commit": {"oid": "d4da45ad8a5f5d1b6cf8f2d21d506e2874b0f578"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 250, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}