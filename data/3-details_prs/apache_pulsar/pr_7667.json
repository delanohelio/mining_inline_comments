{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU2NjkzMDYy", "number": 7667, "title": "[docs] Use `minikube service` to expose ports", "bodyText": "Motivation\nI was doing the kubernetes getting started tutorial, and got stuck when trying to connect to the pulsar-mini-proxy service. I realized I needed to run minikube service pulsar-mini-proxy -n pulsar in order to expose the service ports outside of minikube.\nEnvironment: OSX Catalina 10.15.3 with minikube v1.12.1 using kubernetes 1.18.3 with docker driver\nModifications\ndocumentation update for kubernetes getting started tutorial\nVerifying this change\n\n Make sure that the change passes the CI checks.\n\n(Please pick either of the following options)\nThis change is a trivial rework / code cleanup without any test coverage.\n(or)\nThis change is already covered by existing tests, such as (please describe tests).\n(or)\nThis change added tests and can be verified as follows:\n(example:)\n\nAdded integration tests for end-to-end deployment with large payloads (10MB)\nExtended integration test for recovery after broker failure\n\nDoes this pull request potentially affect one of the following parts:\nIf yes was chosen, please highlight the changes\n\nDependencies (does it add or upgrade a dependency): (yes / no)\nThe public API: (yes / no)\nThe schema: (yes / no / don't know)\nThe default values of configurations: (yes / no)\nThe wire protocol: (yes / no)\nThe rest endpoints: (yes / no)\nThe admin cli options: (yes / no)\nAnything that affects deployment: (yes / no / don't know)\n\nDocumentation\n\nDoes this pull request introduce a new feature? (yes / no)\nIf yes, how is the feature documented? (not applicable / docs / JavaDocs / not documented)\nIf a feature is not applicable for documentation, explain why?\nIf a feature is not documented yet in this PR, please create a followup issue for adding the documentation", "createdAt": "2020-07-26T02:46:00Z", "url": "https://github.com/apache/pulsar/pull/7667", "merged": true, "mergeCommit": {"oid": "3b41dced1e10922f386ad014e020134e90931001"}, "closed": true, "closedAt": "2020-07-30T03:01:12Z", "author": {"login": "kristi"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc5MEEMAH2gAyNDU2NjkzMDYyOjE5M2NmM2YxOGM5NDQzNDRmODc0ZDQ2NmZkYzU0ZDVhOTI4YmEwOTM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc5s8jsAFqTQ1NzY1MDAxNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "193cf3f18c944344f874d466fdc54d5a928ba093", "author": {"user": null}, "url": "https://github.com/apache/pulsar/commit/193cf3f18c944344f874d466fdc54d5a928ba093", "committedDate": "2020-07-28T01:23:04Z", "message": "Use `minikube service` to expose ports"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "288827f447c368a2552919fb0803bfd366401ff1", "author": {"user": null}, "url": "https://github.com/apache/pulsar/commit/288827f447c368a2552919fb0803bfd366401ff1", "committedDate": "2020-07-26T02:38:35Z", "message": "Use `minikube service` to expose ports"}, "afterCommit": {"oid": "193cf3f18c944344f874d466fdc54d5a928ba093", "author": {"user": null}, "url": "https://github.com/apache/pulsar/commit/193cf3f18c944344f874d466fdc54d5a928ba093", "committedDate": "2020-07-28T01:23:04Z", "message": "Use `minikube service` to expose ports"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU2MzcyMjcx", "url": "https://github.com/apache/pulsar/pull/7667#pullrequestreview-456372271", "createdAt": "2020-07-28T07:31:49Z", "commit": {"oid": "193cf3f18c944344f874d466fdc54d5a928ba093"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQwNzozMTo0OVrOG4ALHQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQwNzo1Mjo0OFrOG4A4sw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTM3NjI4NQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            By default, the Pulsar Helm chart exposes the Pulsar cluster through a Kubernetes `LoadBalancer`. In Minikube, you can use the following command to view the proxy service.\n          \n          \n            \n            By default, the Pulsar Helm chart exposes the Pulsar cluster through a Kubernetes `LoadBalancer`. In Minikube, you can use the following command to check the proxy service.", "url": "https://github.com/apache/pulsar/pull/7667#discussion_r461376285", "createdAt": "2020-07-28T07:31:49Z", "author": {"login": "Huanli-Meng"}, "path": "site2/docs/getting-started-helm.md", "diffHunk": "@@ -200,7 +200,7 @@ We use [Minikube](https://kubernetes.io/docs/getting-started-guides/minikube/) i\n \n You can use the Pulsar client to create producers and consumers to produce and consume messages.\n \n-By default, the Pulsar Helm chart exposes the Pulsar cluster through a Kubernetes `LoadBalancer`. In Minikube, you can use the following command to get the IP address of the proxy service.\n+By default, the Pulsar Helm chart exposes the Pulsar cluster through a Kubernetes `LoadBalancer`. In Minikube, you can use the following command to view the proxy service.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "193cf3f18c944344f874d466fdc54d5a928ba093"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTM3NzA3MQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            At this point, you can get the service URLs to connect to your Pulsar client. Urls for this example:\n          \n          \n            \n            At this point, you can get the service URLs to connect to your Pulsar client. Here are URL examples:", "url": "https://github.com/apache/pulsar/pull/7667#discussion_r461377071", "createdAt": "2020-07-28T07:33:21Z", "author": {"login": "Huanli-Meng"}, "path": "site2/docs/getting-started-helm.md", "diffHunk": "@@ -212,19 +212,36 @@ You will see a similar output as below.\n pulsar-mini-proxy            LoadBalancer   10.97.240.109    <pending>     80:32305/TCP,6650:31816/TCP   28m\n ```\n \n-This output tells what are the node ports that Pulsar cluster's binary port and HTTP port are exposed to. The port after `80:` is the HTTP port while the port after `6650:` is the binary port.\n+This output tells what are the node ports that Pulsar cluster's binary port and HTTP port are mapped to. The port after `80:` is the HTTP port while the port after `6650:` is the binary port.\n \n-Then you can find the IP address of your Minikube server by running the following command.\n+Then you can find the IP address and exposed ports of your Minikube server by running the following command.\n \n ```bash\n-minikube ip\n+minikube service pulsar-mini-proxy -n pulsar\n ```\n \n-At this point, you can get the service URLs to connect to your Pulsar client.\n+Example output which shows the exposed ip and ports in the second table\n \n+```bash\n+|-----------|-------------------|-------------|-------------------------|\n+| NAMESPACE |       NAME        | TARGET PORT |           URL           |\n+|-----------|-------------------|-------------|-------------------------|\n+| pulsar    | pulsar-mini-proxy | http/80     | http://172.17.0.4:32305 |\n+|           |                   | pulsar/6650 | http://172.17.0.4:31816 |\n+|-----------|-------------------|-------------|-------------------------|\n+\ud83c\udfc3  Starting tunnel for service pulsar-mini-proxy.\n+|-----------|-------------------|-------------|------------------------|\n+| NAMESPACE |       NAME        | TARGET PORT |          URL           |\n+|-----------|-------------------|-------------|------------------------|\n+| pulsar    | pulsar-mini-proxy |             | http://127.0.0.1:61853 |\n+|           |                   |             | http://127.0.0.1:61854 |\n+|-----------|-------------------|-------------|------------------------|\n+```\n+\n+At this point, you can get the service URLs to connect to your Pulsar client. Urls for this example:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "193cf3f18c944344f874d466fdc54d5a928ba093"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTM4Nzk1NQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Example output which shows the exposed ip and ports in the second table\n          \n          \n            \n            **Output**", "url": "https://github.com/apache/pulsar/pull/7667#discussion_r461387955", "createdAt": "2020-07-28T07:52:48Z", "author": {"login": "Huanli-Meng"}, "path": "site2/docs/getting-started-helm.md", "diffHunk": "@@ -212,19 +212,36 @@ You will see a similar output as below.\n pulsar-mini-proxy            LoadBalancer   10.97.240.109    <pending>     80:32305/TCP,6650:31816/TCP   28m\n ```\n \n-This output tells what are the node ports that Pulsar cluster's binary port and HTTP port are exposed to. The port after `80:` is the HTTP port while the port after `6650:` is the binary port.\n+This output tells what are the node ports that Pulsar cluster's binary port and HTTP port are mapped to. The port after `80:` is the HTTP port while the port after `6650:` is the binary port.\n \n-Then you can find the IP address of your Minikube server by running the following command.\n+Then you can find the IP address and exposed ports of your Minikube server by running the following command.\n \n ```bash\n-minikube ip\n+minikube service pulsar-mini-proxy -n pulsar\n ```\n \n-At this point, you can get the service URLs to connect to your Pulsar client.\n+Example output which shows the exposed ip and ports in the second table", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "193cf3f18c944344f874d466fdc54d5a928ba093"}, "originalPosition": 25}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e29db91f75363445c0df1a06e33fa60d11dd1a99", "author": {"user": {"login": "kristi", "name": "Kristi"}}, "url": "https://github.com/apache/pulsar/commit/e29db91f75363445c0df1a06e33fa60d11dd1a99", "committedDate": "2020-07-28T15:55:20Z", "message": "Update site2/docs/getting-started-helm.md\n\nCo-authored-by: HuanliMeng <48120384+Huanli-Meng@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "99d4ffa468b7666d89250d475922d9e177604e66", "author": {"user": {"login": "kristi", "name": "Kristi"}}, "url": "https://github.com/apache/pulsar/commit/99d4ffa468b7666d89250d475922d9e177604e66", "committedDate": "2020-07-28T15:55:49Z", "message": "Update site2/docs/getting-started-helm.md\n\nCo-authored-by: HuanliMeng <48120384+Huanli-Meng@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e41d26c67039488a493d443c9e42593a77f5a3a5", "author": {"user": {"login": "kristi", "name": "Kristi"}}, "url": "https://github.com/apache/pulsar/commit/e41d26c67039488a493d443c9e42593a77f5a3a5", "committedDate": "2020-07-28T15:58:32Z", "message": "Update site2/docs/getting-started-helm.md\n\nCo-authored-by: HuanliMeng <48120384+Huanli-Meng@users.noreply.github.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU3MTY2MTU0", "url": "https://github.com/apache/pulsar/pull/7667#pullrequestreview-457166154", "createdAt": "2020-07-29T03:16:24Z", "commit": {"oid": "e41d26c67039488a493d443c9e42593a77f5a3a5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU3Mjc4MTMw", "url": "https://github.com/apache/pulsar/pull/7667#pullrequestreview-457278130", "createdAt": "2020-07-29T07:53:17Z", "commit": {"oid": "e41d26c67039488a493d443c9e42593a77f5a3a5"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU3Mzc0NTEz", "url": "https://github.com/apache/pulsar/pull/7667#pullrequestreview-457374513", "createdAt": "2020-07-29T10:00:59Z", "commit": {"oid": "e41d26c67039488a493d443c9e42593a77f5a3a5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU3NjUwMDE2", "url": "https://github.com/apache/pulsar/pull/7667#pullrequestreview-457650016", "createdAt": "2020-07-29T15:41:44Z", "commit": {"oid": "e41d26c67039488a493d443c9e42593a77f5a3a5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 419, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}