{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA3NDEyMjg1", "number": 8327, "title": "[Go Functions] Add newOuputMessage interface for Go Function", "bodyText": "Signed-off-by: xiaolong.ran rxl@apache.org\nFixes #8266\nMotivation\nImplement the context object to be able to send to different topics. Like with the java SDK that allows you to return a future, which makes sending to arbitrary topics easy and fast, we may want to think of an analogous approach\nModifications\n\nAdd NewOuputMessage() interface for Go Function\nAdd examples for NewOuputMessage()\nAdd docs for NewOuputMessage()\n\nVerifying this change\n\n Make sure that the change passes the CI checks.\n\nThis change added tests and can be verified as follows:\n\nAdded unit tests for FunctionContext#NewOutputMessage\n\nDoes this pull request potentially affect one of the following parts:\n\nThe public API: (yes)\nThe default values of configurations: (yes)\n\nDocumentation\n\nDoes this pull request introduce a new feature? (yes )\nIf yes, how is the feature documented? (docs)", "createdAt": "2020-10-21T10:03:11Z", "url": "https://github.com/apache/pulsar/pull/8327", "merged": true, "mergeCommit": {"oid": "cd8e22eea97dedb62844155b3ba63a880d3c9236"}, "closed": true, "closedAt": "2020-10-27T01:33:52Z", "author": {"login": "wolfstudy"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdUqXVKgH2gAyNTA3NDEyMjg1OmM0NTFkYjQ3YzY4MjY4NjVhOTM1MGE1ZWJmNzNiY2E4MmM2NmY4ZWU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdWemMFAFqTUxNzI4Mzc1Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c451db47c6826865a9350a5ebf73bca82c66f8ee", "author": {"user": {"login": "wolfstudy", "name": "xiaolong ran"}}, "url": "https://github.com/apache/pulsar/commit/c451db47c6826865a9350a5ebf73bca82c66f8ee", "committedDate": "2020-10-21T09:57:13Z", "message": "Add newOuputMessage interface for Go Function\n\nSigned-off-by: xiaolong.ran <rxl@apache.org>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9472b4ce660ce0b63e904cc54ee2947d5a94df8c", "author": {"user": {"login": "wolfstudy", "name": "xiaolong ran"}}, "url": "https://github.com/apache/pulsar/commit/9472b4ce660ce0b63e904cc54ee2947d5a94df8c", "committedDate": "2020-10-21T10:08:55Z", "message": "Merge master code and fix conflict\n\nSigned-off-by: xiaolong.ran <rxl@apache.org>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e502354a7803c8aa6417a13e5647c9186dbe5238", "author": {"user": {"login": "wolfstudy", "name": "xiaolong ran"}}, "url": "https://github.com/apache/pulsar/commit/e502354a7803c8aa6417a13e5647c9186dbe5238", "committedDate": "2020-10-21T10:13:27Z", "message": "Add docs for newOutputMessage\n\nSigned-off-by: xiaolong.ran <rxl@apache.org>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8522a874885356ad5319d566a028dd0ac5383a0d", "author": {"user": {"login": "wolfstudy", "name": "xiaolong ran"}}, "url": "https://github.com/apache/pulsar/commit/8522a874885356ad5319d566a028dd0ac5383a0d", "committedDate": "2020-10-21T11:27:19Z", "message": "format code\n\nSigned-off-by: xiaolong.ran <rxl@apache.org>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a61de3887ea6686772a5e0ec742f25d5f0431f6f", "author": {"user": {"login": "wolfstudy", "name": "xiaolong ran"}}, "url": "https://github.com/apache/pulsar/commit/a61de3887ea6686772a5e0ec742f25d5f0431f6f", "committedDate": "2020-10-21T11:38:17Z", "message": "format code\n\nSigned-off-by: xiaolong.ran <rxl@apache.org>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c1eefdce22d896ad68296ce649295eeefcba6a8f", "author": {"user": {"login": "wolfstudy", "name": "xiaolong ran"}}, "url": "https://github.com/apache/pulsar/commit/c1eefdce22d896ad68296ce649295eeefcba6a8f", "committedDate": "2020-10-23T01:47:51Z", "message": "add test case\n\nSigned-off-by: xiaolong.ran <rxl@apache.org>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "feb1049e44a61428848beff1ab8e8e8c593293b0", "author": {"user": {"login": "wolfstudy", "name": "xiaolong ran"}}, "url": "https://github.com/apache/pulsar/commit/feb1049e44a61428848beff1ab8e8e8c593293b0", "committedDate": "2020-10-23T01:53:59Z", "message": "fix ci error\n\nSigned-off-by: xiaolong.ran <rxl@apache.org>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cfbe21c03e49a07a541d04fbf30f2430d8233fb1", "author": {"user": {"login": "wolfstudy", "name": "xiaolong ran"}}, "url": "https://github.com/apache/pulsar/commit/cfbe21c03e49a07a541d04fbf30f2430d8233fb1", "committedDate": "2020-10-23T01:57:53Z", "message": "fix ci error\n\nSigned-off-by: xiaolong.ran <rxl@apache.org>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE1MjI5MDI2", "url": "https://github.com/apache/pulsar/pull/8327#pullrequestreview-515229026", "createdAt": "2020-10-23T01:58:42Z", "commit": {"oid": "feb1049e44a61428848beff1ab8e8e8c593293b0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QwMTo1ODo0MlrOHm5qtg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QwMTo1ODo0MlrOHm5qtg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDU1Mjc1OA==", "bodyText": "why a pulsar.Producer is returned for this method?\nin the corresponding java side, public <O> TypedMessageBuilder<O> newOutputMessage(String topicName, Schema<O> schema)", "url": "https://github.com/apache/pulsar/pull/8327#discussion_r510552758", "createdAt": "2020-10-23T01:58:42Z", "author": {"login": "nlu90"}, "path": "pulsar-function-go/pf/context.go", "diffHunk": "@@ -119,6 +120,12 @@ func (c *FunctionContext) GetUserConfMap() map[string]interface{} {\n \treturn c.userConfigs\n }\n \n+// NewOutputMessage send message to the topic\n+// @param topicName: The name of the topic for output message\n+func (c *FunctionContext) NewOutputMessage(topicName string) pulsar.Producer {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "feb1049e44a61428848beff1ab8e8e8c593293b0"}, "originalPosition": 22}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE1MjM5MzQy", "url": "https://github.com/apache/pulsar/pull/8327#pullrequestreview-515239342", "createdAt": "2020-10-23T02:37:59Z", "commit": {"oid": "cfbe21c03e49a07a541d04fbf30f2430d8233fb1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE3MjgzNzU2", "url": "https://github.com/apache/pulsar/pull/8327#pullrequestreview-517283756", "createdAt": "2020-10-27T01:22:26Z", "commit": {"oid": "cfbe21c03e49a07a541d04fbf30f2430d8233fb1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1278, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}