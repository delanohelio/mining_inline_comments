{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY1MTQ3NDI5", "number": 6112, "title": "[Issue 6111][Doc] Add documentation for Debezium Mongodb connector", "bodyText": "Fixes #6111\nMotivation\nAdd Debezium Mongodb for io-connectors .\nModifications", "createdAt": "2020-01-21T08:10:11Z", "url": "https://github.com/apache/pulsar/pull/6112", "merged": true, "mergeCommit": {"oid": "33232ca8e652cdd522e3e49782eb984065beb92c"}, "closed": true, "closedAt": "2020-02-13T21:42:10Z", "author": {"login": "huangdx0726"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb8yrOTgFqTM0NjQ1ODQxMQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcDIIaWgFqTM1NjM4ODM4NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ2NDU4NDEx", "url": "https://github.com/apache/pulsar/pull/6112#pullrequestreview-346458411", "createdAt": "2020-01-22T09:49:42Z", "commit": {"oid": "612de2704392568569f6f0fca58fbd84724ad992"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMlQwOTo0OTo0M1rOFgWBCQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMlQwOTo1MTo0NVrOFgWFLQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTQ1OTQ2NQ==", "bodyText": "why do you change this id? This is going to mess up all the documentation links. I would prefer not changing any doc id.", "url": "https://github.com/apache/pulsar/pull/6112#discussion_r369459465", "createdAt": "2020-01-22T09:49:43Z", "author": {"login": "sijie"}, "path": "site2/docs/io-debezium-source.md", "diffHunk": "@@ -1,14 +1,15 @@\n ---\n-id: io-debezium-source\n-title: Debezium source onnector\n+id: io-cdc-debezium", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "612de2704392568569f6f0fca58fbd84724ad992"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTQ2MDI1Mw==", "bodyText": "if these settings are only used for mongodb, please a subsection under documentation for mongodb specific settings.\n### MongoDB Configuration\n\n| `mongodb.hosts` | true | null | The comma-separated list of hostname and port pairs (in the form 'host' or 'host:port') of the MongoDB servers in the replica set. The list contains a single hostname and a port pair. If mongodb.members.auto.discover is set to false, the host and port pair are prefixed with the replica set name (e.g., rs0/localhost:27017). |", "url": "https://github.com/apache/pulsar/pull/6112#discussion_r369460253", "createdAt": "2020-01-22T09:51:10Z", "author": {"login": "sijie"}, "path": "site2/docs/io-debezium-source.md", "diffHunk": "@@ -27,6 +28,13 @@ The configuration of the Debezium source connector has the following properties.\n | `database.history.pulsar.service.url` | true | null | Pulsar cluster service URL for history topic. |\n | `pulsar.service.url` | true | null | Pulsar cluster service URL. |\n | `offset.storage.topic` | true | null | Record the last committed offsets that the connector successfully completes. |\n+| `mongodb.hosts` | true | null | The comma-separated list of hostname and port pairs (in the form 'host' or 'host:port') of the MongoDB servers in the replica set. The list contains a single hostname and a port pair. If mongodb.members.auto.discover is set to false, the host and port pair are prefixed with the replica set name (e.g., rs0/localhost:27017). |", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "612de2704392568569f6f0fca58fbd84724ad992"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTQ2MDUyNQ==", "bodyText": "This comment should be updated to mongodb.", "url": "https://github.com/apache/pulsar/pull/6112#discussion_r369460525", "createdAt": "2020-01-22T09:51:45Z", "author": {"login": "sijie"}, "path": "site2/docs/io-debezium-source.md", "diffHunk": "@@ -304,7 +312,124 @@ This example shows how to change the data of a PostgreSQL table using the Pulsar\n     ----- got message -----\n     {\"schema\":{\"type\":\"struct\",\"fields\":[{\"type\":\"int32\",\"optional\":false,\"field\":\"id\"}],\"optional\":false,\"name\":\"dbserver1.inventory.products.Key\"},\"payload\":{\"id\":107}}\ufffd{\"schema\":{\"type\":\"struct\",\"fields\":[{\"type\":\"struct\",\"fields\":[{\"type\":\"int32\",\"optional\":false,\"field\":\"id\"},{\"type\":\"string\",\"optional\":false,\"field\":\"name\"},{\"type\":\"string\",\"optional\":true,\"field\":\"description\"},{\"type\":\"double\",\"optional\":true,\"field\":\"weight\"}],\"optional\":true,\"name\":\"dbserver1.inventory.products.Value\",\"field\":\"before\"},{\"type\":\"struct\",\"fields\":[{\"type\":\"int32\",\"optional\":false,\"field\":\"id\"},{\"type\":\"string\",\"optional\":false,\"field\":\"name\"},{\"type\":\"string\",\"optional\":true,\"field\":\"description\"},{\"type\":\"double\",\"optional\":true,\"field\":\"weight\"}],\"optional\":true,\"name\":\"dbserver1.inventory.products.Value\",\"field\":\"after\"},{\"type\":\"struct\",\"fields\":[{\"type\":\"string\",\"optional\":true,\"field\":\"version\"},{\"type\":\"string\",\"optional\":true,\"field\":\"connector\"},{\"type\":\"string\",\"optional\":false,\"field\":\"name\"},{\"type\":\"string\",\"optional\":false,\"field\":\"db\"},{\"type\":\"int64\",\"optional\":true,\"field\":\"ts_usec\"},{\"type\":\"int64\",\"optional\":true,\"field\":\"txId\"},{\"type\":\"int64\",\"optional\":true,\"field\":\"lsn\"},{\"type\":\"string\",\"optional\":true,\"field\":\"schema\"},{\"type\":\"string\",\"optional\":true,\"field\":\"table\"},{\"type\":\"boolean\",\"optional\":true,\"default\":false,\"field\":\"snapshot\"},{\"type\":\"boolean\",\"optional\":true,\"field\":\"last_snapshot_record\"}],\"optional\":false,\"name\":\"io.debezium.connector.postgresql.Source\",\"field\":\"source\"},{\"type\":\"string\",\"optional\":false,\"field\":\"op\"},{\"type\":\"int64\",\"optional\":true,\"field\":\"ts_ms\"}],\"optional\":false,\"name\":\"dbserver1.inventory.products.Envelope\"},\"payload\":{\"before\":{\"id\":107,\"name\":\"rocks\",\"description\":\"box of assorted rocks\",\"weight\":5.3},\"after\":{\"id\":107,\"name\":\"1111111111\",\"description\":\"box of assorted rocks\",\"weight\":5.3},\"source\":{\"version\":\"0.9.2.Final\",\"connector\":\"postgresql\",\"name\":\"dbserver1\",\"db\":\"postgres\",\"ts_usec\":1559208957661080,\"txId\":577,\"lsn\":23862872,\"schema\":\"inventory\",\"table\":\"products\",\"snapshot\":false,\"last_snapshot_record\":null},\"op\":\"u\",\"ts_ms\":1559208957692}}\n     ```\n+## Example of MongoDB\n+\n+You need to create a configuration file before using the Pulsar Debezium connector.\n+\n+* JSON \n+\n+    ```json\n+    {\n+        \"mongodb.hosts\": \"rs0/mongodb:27017\",\n+        \"mongodb.name\": \"dbserver1\",\n+        \"mongodb.user\": \"debezium\",\n+        \"mongodb.password\": \"dbz\",\n+        \"mongodb.task.id\": \"1\",\n+        \"database.whitelist\": \"inventory\",\n+        \"pulsar.service.url\": \"pulsar://127.0.0.1:6650\"\n+    }\n+    ```\n+\n+* YAML \n+\n+    You can create a `debezium-mongodb-source-config.yaml` file and copy the [contents](https://github.com/apache/pulsar/blob/master/pulsar-io/debezium/mongodb/src/main/resources/debezium-mongodb-source-config.yaml) below to the `debezium-mongodb-source-config.yaml` file.\n+\n+    ```yaml\n+    tenant: \"public\"\n+    namespace: \"default\"\n+    name: \"debezium-mongodb-source\"\n+    topicName: \"debezium-mongodb-topic\"\n+    archive: \"connectors/pulsar-io-debezium-mongodb-{{pulsar:version}}.nar\"\n+    parallelism: 1\n+\n+    configs:\n+\n+        ## config for pg, docker image: debezium/example-postgress:0.10", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "612de2704392568569f6f0fca58fbd84724ad992"}, "originalPosition": 79}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5cdf11cdd2521e3236ea71019370517ba774c380", "author": {"user": {"login": "huangdx0726", "name": "Da Xiang Huang"}}, "url": "https://github.com/apache/pulsar/commit/5cdf11cdd2521e3236ea71019370517ba774c380", "committedDate": "2020-02-10T04:09:19Z", "message": "fix 6111"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e2d604e13910b1ce9e3bb257c2ba0321674ada66", "author": {"user": {"login": "huangdx0726", "name": "Da Xiang Huang"}}, "url": "https://github.com/apache/pulsar/commit/e2d604e13910b1ce9e3bb257c2ba0321674ada66", "committedDate": "2020-02-10T04:09:19Z", "message": "fix 6111"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "612de2704392568569f6f0fca58fbd84724ad992", "author": {"user": {"login": "huangdx0726", "name": "Da Xiang Huang"}}, "url": "https://github.com/apache/pulsar/commit/612de2704392568569f6f0fca58fbd84724ad992", "committedDate": "2020-01-21T08:08:18Z", "message": "fix 6111"}, "afterCommit": {"oid": "e2d604e13910b1ce9e3bb257c2ba0321674ada66", "author": {"user": {"login": "huangdx0726", "name": "Da Xiang Huang"}}, "url": "https://github.com/apache/pulsar/commit/e2d604e13910b1ce9e3bb257c2ba0321674ada66", "committedDate": "2020-02-10T04:09:19Z", "message": "fix 6111"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU1NzQzMTQ2", "url": "https://github.com/apache/pulsar/pull/6112#pullrequestreview-355743146", "createdAt": "2020-02-10T08:04:27Z", "commit": {"oid": "e2d604e13910b1ce9e3bb257c2ba0321674ada66"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7930d608fb9b5f09514c6e7d6e21e70659e3e153", "author": {"user": {"login": "huangdx0726", "name": "Da Xiang Huang"}}, "url": "https://github.com/apache/pulsar/commit/7930d608fb9b5f09514c6e7d6e21e70659e3e153", "committedDate": "2020-02-10T08:10:10Z", "message": "fix 6111"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU2Mzg4Mzg1", "url": "https://github.com/apache/pulsar/pull/6112#pullrequestreview-356388385", "createdAt": "2020-02-11T02:16:17Z", "commit": {"oid": "7930d608fb9b5f09514c6e7d6e21e70659e3e153"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1323, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}