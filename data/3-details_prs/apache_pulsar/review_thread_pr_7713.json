{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDYwMzg0NTEz", "number": 7713, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xOFQwNjo1MDo0N1rOEk1unA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMy0yMlQxNTozMToxN1rOFozp7A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA3MDY0NDc2OnYy", "diffSide": "RIGHT", "path": "pulsar-client-cpp/python/src/config.cc", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xOFQwNjo1MDo0N1rOHUARWg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wM1QxMDoyNDo0OFrOHcA2Bw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDczODAxMA==", "bodyText": "This equiation for log level conversion is used at multiple places, consider wrap it into function or somethink like that.", "url": "https://github.com/apache/pulsar/pull/7713#discussion_r490738010", "createdAt": "2020-09-18T06:50:47Z", "author": {"login": "pinkavaj"}, "path": "pulsar-client-cpp/python/src/config.cc", "diffHunk": "@@ -74,6 +74,103 @@ static ClientConfiguration& ClientConfiguration_setAuthentication(ClientConfigur\n     return conf;\n }\n \n+class LoggerWrapper: public Logger {\n+    std::string _logger;\n+    PyObject* _pyLogger;\n+    int _currentPythonLogLevel = 10 + (Logger::LEVEL_INFO*10);\n+\n+    void _updateCurrentPythonLogLevel() {\n+        PyGILState_STATE state = PyGILState_Ensure();\n+\n+        try {\n+            _currentPythonLogLevel = py::call_method<int>(_pyLogger, \"getEffectiveLevel\");\n+        } catch (py::error_already_set e) {\n+            PyErr_Print();\n+        }\n+\n+        PyGILState_Release(state);\n+    };\n+\n+   public:\n+\n+    LoggerWrapper(const std::string &logger, PyObject* pyLogger) : _logger(logger) {\n+        _pyLogger = pyLogger;\n+        Py_XINCREF(_pyLogger);\n+\n+        _updateCurrentPythonLogLevel();\n+    }\n+\n+    LoggerWrapper(const LoggerWrapper& other) {\n+        _pyLogger = other._pyLogger;\n+        Py_XINCREF(_pyLogger);\n+    }\n+\n+    LoggerWrapper& operator=(const LoggerWrapper& other) {\n+        _pyLogger = other._pyLogger;\n+        Py_XINCREF(_pyLogger);\n+        return *this;\n+    }\n+\n+    virtual ~LoggerWrapper() {\n+        Py_XDECREF(_pyLogger);\n+    }\n+\n+    bool isEnabled(Level level) {\n+        return 10 + (level*10) >= _currentPythonLogLevel;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "deebbe88a8ca77c9e49858f10fb8da6b0a4f38bc"}, "originalPosition": 46}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTEzNjAwNw==", "bodyText": "extracted into a function", "url": "https://github.com/apache/pulsar/pull/7713#discussion_r499136007", "createdAt": "2020-10-03T10:24:48Z", "author": {"login": "lbenc135"}, "path": "pulsar-client-cpp/python/src/config.cc", "diffHunk": "@@ -74,6 +74,103 @@ static ClientConfiguration& ClientConfiguration_setAuthentication(ClientConfigur\n     return conf;\n }\n \n+class LoggerWrapper: public Logger {\n+    std::string _logger;\n+    PyObject* _pyLogger;\n+    int _currentPythonLogLevel = 10 + (Logger::LEVEL_INFO*10);\n+\n+    void _updateCurrentPythonLogLevel() {\n+        PyGILState_STATE state = PyGILState_Ensure();\n+\n+        try {\n+            _currentPythonLogLevel = py::call_method<int>(_pyLogger, \"getEffectiveLevel\");\n+        } catch (py::error_already_set e) {\n+            PyErr_Print();\n+        }\n+\n+        PyGILState_Release(state);\n+    };\n+\n+   public:\n+\n+    LoggerWrapper(const std::string &logger, PyObject* pyLogger) : _logger(logger) {\n+        _pyLogger = pyLogger;\n+        Py_XINCREF(_pyLogger);\n+\n+        _updateCurrentPythonLogLevel();\n+    }\n+\n+    LoggerWrapper(const LoggerWrapper& other) {\n+        _pyLogger = other._pyLogger;\n+        Py_XINCREF(_pyLogger);\n+    }\n+\n+    LoggerWrapper& operator=(const LoggerWrapper& other) {\n+        _pyLogger = other._pyLogger;\n+        Py_XINCREF(_pyLogger);\n+        return *this;\n+    }\n+\n+    virtual ~LoggerWrapper() {\n+        Py_XDECREF(_pyLogger);\n+    }\n+\n+    bool isEnabled(Level level) {\n+        return 10 + (level*10) >= _currentPythonLogLevel;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDczODAxMA=="}, "originalCommit": {"oid": "deebbe88a8ca77c9e49858f10fb8da6b0a4f38bc"}, "originalPosition": 46}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzUzOTkzOTY3OnYy", "diffSide": "RIGHT", "path": "pulsar-client-cpp/python/src/config.cc", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0yMVQyMDowMjozMlrOIYHoxw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMy0yMFQwOTo1MzoxOFrOI6Yi0A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MjE2MTg2Mw==", "bodyText": "The file and line information is not logged, but I'm not familiar with the code enought to decide what is more appropriate. From the point of developer I would preffer the file and line information in the log message.\nProbably someone more familiar with this code should speek his opinion.\nOtherwise looks good.", "url": "https://github.com/apache/pulsar/pull/7713#discussion_r562161863", "createdAt": "2021-01-21T20:02:32Z", "author": {"login": "pinkavaj"}, "path": "pulsar-client-cpp/python/src/config.cc", "diffHunk": "@@ -74,6 +74,107 @@ static ClientConfiguration& ClientConfiguration_setAuthentication(ClientConfigur\n     return conf;\n }\n \n+class LoggerWrapper: public Logger {\n+    std::string _logger;\n+    PyObject* _pyLogger;\n+    int _currentPythonLogLevel = _getLogLevelValue(Logger::LEVEL_INFO);\n+\n+    void _updateCurrentPythonLogLevel() {\n+        PyGILState_STATE state = PyGILState_Ensure();\n+\n+        try {\n+            _currentPythonLogLevel = py::call_method<int>(_pyLogger, \"getEffectiveLevel\");\n+        } catch (py::error_already_set e) {\n+            PyErr_Print();\n+        }\n+\n+        PyGILState_Release(state);\n+    };\n+\n+    int _getLogLevelValue(Level level) {\n+        return 10 + (level * 10);\n+    }\n+\n+   public:\n+\n+    LoggerWrapper(const std::string &logger, PyObject* pyLogger) : _logger(logger) {\n+        _pyLogger = pyLogger;\n+        Py_XINCREF(_pyLogger);\n+\n+        _updateCurrentPythonLogLevel();\n+    }\n+\n+    LoggerWrapper(const LoggerWrapper& other) {\n+        _pyLogger = other._pyLogger;\n+        Py_XINCREF(_pyLogger);\n+    }\n+\n+    LoggerWrapper& operator=(const LoggerWrapper& other) {\n+        _pyLogger = other._pyLogger;\n+        Py_XINCREF(_pyLogger);\n+        return *this;\n+    }\n+\n+    virtual ~LoggerWrapper() {\n+        Py_XDECREF(_pyLogger);\n+    }\n+\n+    bool isEnabled(Level level) {\n+        return _getLogLevelValue(level) >= _currentPythonLogLevel;\n+    }\n+\n+    void log(Level level, int line, const std::string& message) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "11be0b3a72e148b7db3ff7174210855ff272efc8"}, "originalPosition": 53}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MjE2Mzg4Mg==", "bodyText": "Feel free to show example and you incentive to help with decission.", "url": "https://github.com/apache/pulsar/pull/7713#discussion_r562163882", "createdAt": "2021-01-21T20:06:06Z", "author": {"login": "pinkavaj"}, "path": "pulsar-client-cpp/python/src/config.cc", "diffHunk": "@@ -74,6 +74,107 @@ static ClientConfiguration& ClientConfiguration_setAuthentication(ClientConfigur\n     return conf;\n }\n \n+class LoggerWrapper: public Logger {\n+    std::string _logger;\n+    PyObject* _pyLogger;\n+    int _currentPythonLogLevel = _getLogLevelValue(Logger::LEVEL_INFO);\n+\n+    void _updateCurrentPythonLogLevel() {\n+        PyGILState_STATE state = PyGILState_Ensure();\n+\n+        try {\n+            _currentPythonLogLevel = py::call_method<int>(_pyLogger, \"getEffectiveLevel\");\n+        } catch (py::error_already_set e) {\n+            PyErr_Print();\n+        }\n+\n+        PyGILState_Release(state);\n+    };\n+\n+    int _getLogLevelValue(Level level) {\n+        return 10 + (level * 10);\n+    }\n+\n+   public:\n+\n+    LoggerWrapper(const std::string &logger, PyObject* pyLogger) : _logger(logger) {\n+        _pyLogger = pyLogger;\n+        Py_XINCREF(_pyLogger);\n+\n+        _updateCurrentPythonLogLevel();\n+    }\n+\n+    LoggerWrapper(const LoggerWrapper& other) {\n+        _pyLogger = other._pyLogger;\n+        Py_XINCREF(_pyLogger);\n+    }\n+\n+    LoggerWrapper& operator=(const LoggerWrapper& other) {\n+        _pyLogger = other._pyLogger;\n+        Py_XINCREF(_pyLogger);\n+        return *this;\n+    }\n+\n+    virtual ~LoggerWrapper() {\n+        Py_XDECREF(_pyLogger);\n+    }\n+\n+    bool isEnabled(Level level) {\n+        return _getLogLevelValue(level) >= _currentPythonLogLevel;\n+    }\n+\n+    void log(Level level, int line, const std::string& message) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MjE2MTg2Mw=="}, "originalCommit": {"oid": "11be0b3a72e148b7db3ff7174210855ff272efc8"}, "originalPosition": 53}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5NTE3OTA4MQ==", "bodyText": "Not having this info only truly matters if the Python Logger is connected ultimately to one or more Formatters that has tokens like filename, pathname or lineno in its format string.\nIt should be possible to create a LogRecord object (https://docs.python.org/3/library/logging.html#logrecord-objects) and pass it to Logger.handle method instead of using the simpler info, warning etc methods.  I for one think it is not worth the trouble and the implementation is fine as-is.", "url": "https://github.com/apache/pulsar/pull/7713#discussion_r595179081", "createdAt": "2021-03-16T13:41:35Z", "author": {"login": "Bklyn"}, "path": "pulsar-client-cpp/python/src/config.cc", "diffHunk": "@@ -74,6 +74,107 @@ static ClientConfiguration& ClientConfiguration_setAuthentication(ClientConfigur\n     return conf;\n }\n \n+class LoggerWrapper: public Logger {\n+    std::string _logger;\n+    PyObject* _pyLogger;\n+    int _currentPythonLogLevel = _getLogLevelValue(Logger::LEVEL_INFO);\n+\n+    void _updateCurrentPythonLogLevel() {\n+        PyGILState_STATE state = PyGILState_Ensure();\n+\n+        try {\n+            _currentPythonLogLevel = py::call_method<int>(_pyLogger, \"getEffectiveLevel\");\n+        } catch (py::error_already_set e) {\n+            PyErr_Print();\n+        }\n+\n+        PyGILState_Release(state);\n+    };\n+\n+    int _getLogLevelValue(Level level) {\n+        return 10 + (level * 10);\n+    }\n+\n+   public:\n+\n+    LoggerWrapper(const std::string &logger, PyObject* pyLogger) : _logger(logger) {\n+        _pyLogger = pyLogger;\n+        Py_XINCREF(_pyLogger);\n+\n+        _updateCurrentPythonLogLevel();\n+    }\n+\n+    LoggerWrapper(const LoggerWrapper& other) {\n+        _pyLogger = other._pyLogger;\n+        Py_XINCREF(_pyLogger);\n+    }\n+\n+    LoggerWrapper& operator=(const LoggerWrapper& other) {\n+        _pyLogger = other._pyLogger;\n+        Py_XINCREF(_pyLogger);\n+        return *this;\n+    }\n+\n+    virtual ~LoggerWrapper() {\n+        Py_XDECREF(_pyLogger);\n+    }\n+\n+    bool isEnabled(Level level) {\n+        return _getLogLevelValue(level) >= _currentPythonLogLevel;\n+    }\n+\n+    void log(Level level, int line, const std::string& message) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MjE2MTg2Mw=="}, "originalCommit": {"oid": "11be0b3a72e148b7db3ff7174210855ff272efc8"}, "originalPosition": 53}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5ODA5MDQ0OA==", "bodyText": "Thank you @Bklyn, please consider approving the PR", "url": "https://github.com/apache/pulsar/pull/7713#discussion_r598090448", "createdAt": "2021-03-20T09:53:18Z", "author": {"login": "lbenc135"}, "path": "pulsar-client-cpp/python/src/config.cc", "diffHunk": "@@ -74,6 +74,107 @@ static ClientConfiguration& ClientConfiguration_setAuthentication(ClientConfigur\n     return conf;\n }\n \n+class LoggerWrapper: public Logger {\n+    std::string _logger;\n+    PyObject* _pyLogger;\n+    int _currentPythonLogLevel = _getLogLevelValue(Logger::LEVEL_INFO);\n+\n+    void _updateCurrentPythonLogLevel() {\n+        PyGILState_STATE state = PyGILState_Ensure();\n+\n+        try {\n+            _currentPythonLogLevel = py::call_method<int>(_pyLogger, \"getEffectiveLevel\");\n+        } catch (py::error_already_set e) {\n+            PyErr_Print();\n+        }\n+\n+        PyGILState_Release(state);\n+    };\n+\n+    int _getLogLevelValue(Level level) {\n+        return 10 + (level * 10);\n+    }\n+\n+   public:\n+\n+    LoggerWrapper(const std::string &logger, PyObject* pyLogger) : _logger(logger) {\n+        _pyLogger = pyLogger;\n+        Py_XINCREF(_pyLogger);\n+\n+        _updateCurrentPythonLogLevel();\n+    }\n+\n+    LoggerWrapper(const LoggerWrapper& other) {\n+        _pyLogger = other._pyLogger;\n+        Py_XINCREF(_pyLogger);\n+    }\n+\n+    LoggerWrapper& operator=(const LoggerWrapper& other) {\n+        _pyLogger = other._pyLogger;\n+        Py_XINCREF(_pyLogger);\n+        return *this;\n+    }\n+\n+    virtual ~LoggerWrapper() {\n+        Py_XDECREF(_pyLogger);\n+    }\n+\n+    bool isEnabled(Level level) {\n+        return _getLogLevelValue(level) >= _currentPythonLogLevel;\n+    }\n+\n+    void log(Level level, int line, const std::string& message) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MjE2MTg2Mw=="}, "originalCommit": {"oid": "11be0b3a72e148b7db3ff7174210855ff272efc8"}, "originalPosition": 53}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzc4MzI4NjA2OnYy", "diffSide": "RIGHT", "path": "pulsar-client-cpp/python/pulsar/__init__.py", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMy0yMlQxNToyNTo1OFrOI7E-Ew==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMy0yM1QxMDo0ODo0NVrOI7sF7Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5ODgxODMyMw==", "bodyText": "Perhaps spell out explicitly that this must be an instance of logging.Logger?", "url": "https://github.com/apache/pulsar/pull/7713#discussion_r598818323", "createdAt": "2021-03-22T15:25:58Z", "author": {"login": "Bklyn"}, "path": "pulsar-client-cpp/python/pulsar/__init__.py", "diffHunk": "@@ -403,6 +405,8 @@ def __init__(self, service_url,\n           Configure whether the Pulsar client validates that the hostname of the\n           endpoint, matches the common name on the TLS certificate presented by\n           the endpoint.\n+        * `logger`:\n+          Set a Python logger for this Pulsar client.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f49f2816da31d391d40b9b140ccb0016f3c557aa"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5OTQ1OTMwOQ==", "bodyText": "Fixed", "url": "https://github.com/apache/pulsar/pull/7713#discussion_r599459309", "createdAt": "2021-03-23T10:48:45Z", "author": {"login": "lbenc135"}, "path": "pulsar-client-cpp/python/pulsar/__init__.py", "diffHunk": "@@ -403,6 +405,8 @@ def __init__(self, service_url,\n           Configure whether the Pulsar client validates that the hostname of the\n           endpoint, matches the common name on the TLS certificate presented by\n           the endpoint.\n+        * `logger`:\n+          Set a Python logger for this Pulsar client.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5ODgxODMyMw=="}, "originalCommit": {"oid": "f49f2816da31d391d40b9b140ccb0016f3c557aa"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzc4MzMyNDk2OnYy", "diffSide": "RIGHT", "path": "pulsar-client-cpp/python/src/config.cc", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMy0yMlQxNTozMDoxMFrOI7FSzQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMy0yMlQxNTozMDoxMFrOI7FSzQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5ODgyMzYyOQ==", "bodyText": "Initialize _logger from other._logger", "url": "https://github.com/apache/pulsar/pull/7713#discussion_r598823629", "createdAt": "2021-03-22T15:30:10Z", "author": {"login": "Bklyn"}, "path": "pulsar-client-cpp/python/src/config.cc", "diffHunk": "@@ -88,6 +88,107 @@ static ProducerConfiguration& ProducerConfiguration_setCryptoKeyReader(ProducerC\n     return conf;\n }\n \n+class LoggerWrapper: public Logger {\n+    std::string _logger;\n+    PyObject* _pyLogger;\n+    int _currentPythonLogLevel = _getLogLevelValue(Logger::LEVEL_INFO);\n+\n+    void _updateCurrentPythonLogLevel() {\n+        PyGILState_STATE state = PyGILState_Ensure();\n+\n+        try {\n+            _currentPythonLogLevel = py::call_method<int>(_pyLogger, \"getEffectiveLevel\");\n+        } catch (py::error_already_set e) {\n+            PyErr_Print();\n+        }\n+\n+        PyGILState_Release(state);\n+    };\n+\n+    int _getLogLevelValue(Level level) {\n+        return 10 + (level * 10);\n+    }\n+\n+   public:\n+\n+    LoggerWrapper(const std::string &logger, PyObject* pyLogger) : _logger(logger) {\n+        _pyLogger = pyLogger;\n+        Py_XINCREF(_pyLogger);\n+\n+        _updateCurrentPythonLogLevel();\n+    }\n+\n+    LoggerWrapper(const LoggerWrapper& other) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f49f2816da31d391d40b9b140ccb0016f3c557aa"}, "originalPosition": 34}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzc4MzMzNjc2OnYy", "diffSide": "RIGHT", "path": "pulsar-client-cpp/python/src/config.cc", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMy0yMlQxNTozMToxN1rOI7FY6g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMy0yM1QxMDo0OTowN1rOI7sG2Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5ODgyNTE5NA==", "bodyText": "As above, but is the _logger member even used?  Maybe you should drop it.", "url": "https://github.com/apache/pulsar/pull/7713#discussion_r598825194", "createdAt": "2021-03-22T15:31:17Z", "author": {"login": "Bklyn"}, "path": "pulsar-client-cpp/python/src/config.cc", "diffHunk": "@@ -88,6 +88,107 @@ static ProducerConfiguration& ProducerConfiguration_setCryptoKeyReader(ProducerC\n     return conf;\n }\n \n+class LoggerWrapper: public Logger {\n+    std::string _logger;\n+    PyObject* _pyLogger;\n+    int _currentPythonLogLevel = _getLogLevelValue(Logger::LEVEL_INFO);\n+\n+    void _updateCurrentPythonLogLevel() {\n+        PyGILState_STATE state = PyGILState_Ensure();\n+\n+        try {\n+            _currentPythonLogLevel = py::call_method<int>(_pyLogger, \"getEffectiveLevel\");\n+        } catch (py::error_already_set e) {\n+            PyErr_Print();\n+        }\n+\n+        PyGILState_Release(state);\n+    };\n+\n+    int _getLogLevelValue(Level level) {\n+        return 10 + (level * 10);\n+    }\n+\n+   public:\n+\n+    LoggerWrapper(const std::string &logger, PyObject* pyLogger) : _logger(logger) {\n+        _pyLogger = pyLogger;\n+        Py_XINCREF(_pyLogger);\n+\n+        _updateCurrentPythonLogLevel();\n+    }\n+\n+    LoggerWrapper(const LoggerWrapper& other) {\n+        _pyLogger = other._pyLogger;\n+        Py_XINCREF(_pyLogger);\n+    }\n+\n+    LoggerWrapper& operator=(const LoggerWrapper& other) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f49f2816da31d391d40b9b140ccb0016f3c557aa"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5OTQ1OTU0NQ==", "bodyText": "You were right, it was unused. Removed it.", "url": "https://github.com/apache/pulsar/pull/7713#discussion_r599459545", "createdAt": "2021-03-23T10:49:07Z", "author": {"login": "lbenc135"}, "path": "pulsar-client-cpp/python/src/config.cc", "diffHunk": "@@ -88,6 +88,107 @@ static ProducerConfiguration& ProducerConfiguration_setCryptoKeyReader(ProducerC\n     return conf;\n }\n \n+class LoggerWrapper: public Logger {\n+    std::string _logger;\n+    PyObject* _pyLogger;\n+    int _currentPythonLogLevel = _getLogLevelValue(Logger::LEVEL_INFO);\n+\n+    void _updateCurrentPythonLogLevel() {\n+        PyGILState_STATE state = PyGILState_Ensure();\n+\n+        try {\n+            _currentPythonLogLevel = py::call_method<int>(_pyLogger, \"getEffectiveLevel\");\n+        } catch (py::error_already_set e) {\n+            PyErr_Print();\n+        }\n+\n+        PyGILState_Release(state);\n+    };\n+\n+    int _getLogLevelValue(Level level) {\n+        return 10 + (level * 10);\n+    }\n+\n+   public:\n+\n+    LoggerWrapper(const std::string &logger, PyObject* pyLogger) : _logger(logger) {\n+        _pyLogger = pyLogger;\n+        Py_XINCREF(_pyLogger);\n+\n+        _updateCurrentPythonLogLevel();\n+    }\n+\n+    LoggerWrapper(const LoggerWrapper& other) {\n+        _pyLogger = other._pyLogger;\n+        Py_XINCREF(_pyLogger);\n+    }\n+\n+    LoggerWrapper& operator=(const LoggerWrapper& other) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5ODgyNTE5NA=="}, "originalCommit": {"oid": "f49f2816da31d391d40b9b140ccb0016f3c557aa"}, "originalPosition": 39}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2358, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}