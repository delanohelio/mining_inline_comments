{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU2MzQwNjM2", "number": 7655, "title": "Fix backward compatibility issues with batch index acknowledgment.", "bodyText": "Fixes #7460\nMotivation\nFix backward compatibility issues with batch index acknowledgment.\nModifications\nDisable batch index acknowledgment by default at the consumer side.\nVerifying this change\nIntegration tests added.\nDoes this pull request potentially affect one of the following parts:\nIf yes was chosen, please highlight the changes\n\nDependencies (does it add or upgrade a dependency): (no)\nThe public API: (yes)\nThe schema: (no)\nThe default values of configurations: ( no)\nThe wire protocol: (no)\nThe rest endpoints: (no)\nThe admin cli options: (no)\nAnything that affects deployment: (no)\n\nDocumentation\n\nDoes this pull request introduce a new feature? (no)", "createdAt": "2020-07-24T15:09:21Z", "url": "https://github.com/apache/pulsar/pull/7655", "merged": true, "mergeCommit": {"oid": "fffd9f144bb14a220d17e951fea29b16ad2db103"}, "closed": true, "closedAt": "2020-07-28T15:49:43Z", "author": {"login": "codelipenghui"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc4FbX-AH2gAyNDU2MzQwNjM2OjY4ZDQwNDZlMzdlOWRiZWEyNGU5YzQ1M2ZmZDc3MDIzYzhkNjhmZWU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc5WPNCgH2gAyNDU2MzQwNjM2OjEwNDhjZTRkM2Q0MzIwOWFiNmEwZmRjYzA3MjY1NTMzYTZlM2RkOTk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "68d4046e37e9dbea24e9c453ffd77023c8d68fee", "author": {"user": {"login": "codelipenghui", "name": "lipenghui"}}, "url": "https://github.com/apache/pulsar/commit/68d4046e37e9dbea24e9c453ffd77023c8d68fee", "committedDate": "2020-07-24T15:05:16Z", "message": "Fix backwards compatibility issue with batch index acknowledgement."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1MjUwNTgw", "url": "https://github.com/apache/pulsar/pull/7655#pullrequestreview-455250580", "createdAt": "2020-07-25T01:38:51Z", "commit": {"oid": "68d4046e37e9dbea24e9c453ffd77023c8d68fee"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1NDY0ODI1", "url": "https://github.com/apache/pulsar/pull/7655#pullrequestreview-455464825", "createdAt": "2020-07-27T04:30:59Z", "commit": {"oid": "68d4046e37e9dbea24e9c453ffd77023c8d68fee"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1OTg4OTEw", "url": "https://github.com/apache/pulsar/pull/7655#pullrequestreview-455988910", "createdAt": "2020-07-27T17:28:06Z", "commit": {"oid": "68d4046e37e9dbea24e9c453ffd77023c8d68fee"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QxNzoyODowNlrOG3sX6w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QxNzoyODowNlrOG3sX6w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTA1MTg4Mw==", "bodyText": "Shouldn't it be called enableBatchIndexAcknowledgement to conform other settings?", "url": "https://github.com/apache/pulsar/pull/7655#discussion_r461051883", "createdAt": "2020-07-27T17:28:06Z", "author": {"login": "Lanayx"}, "path": "pulsar-client-api/src/main/java/org/apache/pulsar/client/api/ConsumerBuilder.java", "diffHunk": "@@ -609,6 +609,12 @@\n      */\n     ConsumerBuilder<T> enableRetry(boolean retryEnable);\n \n+    /**\n+     * Enable or disable the batch index acknowledgment. To enable this feature must ensure batch index acknowledgment\n+     * feature is enabled at the broker side.\n+     */\n+    ConsumerBuilder<T> batchIndexAcknowledgmentEnabled(boolean batchIndexAcknowledgmentEnabled);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "68d4046e37e9dbea24e9c453ffd77023c8d68fee"}, "originalPosition": 8}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1048ce4d3d43209ab6a0fdcc07265533a6e3dd99", "author": {"user": {"login": "codelipenghui", "name": "lipenghui"}}, "url": "https://github.com/apache/pulsar/commit/1048ce4d3d43209ab6a0fdcc07265533a6e3dd99", "committedDate": "2020-07-28T13:14:17Z", "message": "Apply comment"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 416, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}