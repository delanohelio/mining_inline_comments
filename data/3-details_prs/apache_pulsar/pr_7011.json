{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIxMzczNjYy", "number": 7011, "title": "Fix break changes in namespace offload policy and RabbitMQ sink.", "bodyText": "Motivation\nFix break changes in namespace offload policy and RabbitMQ sink.\nDoes this pull request potentially affect one of the following parts:\nIf yes was chosen, please highlight the changes\n\nDependencies (does it add or upgrade a dependency): (no)\nThe public API: (no)\nThe schema: (no)\nThe default values of configurations: (no)\nThe wire protocol: (no)\nThe rest endpoints: (no)\nThe admin cli options: (no)\nAnything that affects deployment: (no)\n\nDocumentation\n\nDoes this pull request introduce a new feature? (no)", "createdAt": "2020-05-21T14:11:07Z", "url": "https://github.com/apache/pulsar/pull/7011", "merged": true, "mergeCommit": {"oid": "add2eae1295e878a229efea60439eb32f27f40b2"}, "closed": true, "closedAt": "2020-05-22T10:18:00Z", "author": {"login": "codelipenghui"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcjeQFSgH2gAyNDIxMzczNjYyOjMwNDdkMDkzNGJjODA5YmNkOTE4YjcxMGE5NzBmNTU1ZmFjYjdiMDQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcjt3nBAH2gAyNDIxMzczNjYyOmNlMzBhMGE2NTBmNWM5YzFkMjY3MzMyNTFkZTkzY2FjNWJkNzU1YmU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "3047d0934bc809bcd918b710a970f555facb7b04", "author": {"user": {"login": "codelipenghui", "name": "lipenghui"}}, "url": "https://github.com/apache/pulsar/commit/3047d0934bc809bcd918b710a970f555facb7b04", "committedDate": "2020-05-21T14:08:09Z", "message": "Fix break changes in namespace offload policy and RabbitMQ sink."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bb1d9d0720bf8fdc08978b4d471e193ddad25486", "author": {"user": {"login": "codelipenghui", "name": "lipenghui"}}, "url": "https://github.com/apache/pulsar/commit/bb1d9d0720bf8fdc08978b4d471e193ddad25486", "committedDate": "2020-05-21T14:41:00Z", "message": "Build pulsar image for offloader tests."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE2MjkzNjI2", "url": "https://github.com/apache/pulsar/pull/7011#pullrequestreview-416293626", "createdAt": "2020-05-21T16:16:59Z", "commit": {"oid": "bb1d9d0720bf8fdc08978b4d471e193ddad25486"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxNjoxNjo1OVrOGY5fSg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxNjoxNjo1OVrOGY5fSg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODc2MDkwNg==", "bodyText": "This code was there to fallback to defaults in case there is no special offload policy for a given namespace. How is this behavior maintained?", "url": "https://github.com/apache/pulsar/pull/7011#discussion_r428760906", "createdAt": "2020-05-21T16:16:59Z", "author": {"login": "merlimat"}, "path": "pulsar-broker/src/main/java/org/apache/pulsar/broker/service/BrokerService.java", "diffHunk": "@@ -1062,17 +1062,6 @@ public void openLedgerFailed(ManagedLedgerException exception, Object ctx) {\n             managedLedgerConfig.setRetentionSizeInMB(retentionPolicies.getRetentionSizeInMB());\n             managedLedgerConfig.setAutoSkipNonRecoverableData(serviceConfig.isAutoSkipNonRecoverableData());\n             OffloadPolicies offloadPolicies = policies.map(p -> p.offload_policies).orElse(null);\n-\n-            if (offloadPolicies == null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bb1d9d0720bf8fdc08978b4d471e193ddad25486"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE2MzQyMTkw", "url": "https://github.com/apache/pulsar/pull/7011#pullrequestreview-416342190", "createdAt": "2020-05-21T17:22:05Z", "commit": {"oid": "bb1d9d0720bf8fdc08978b4d471e193ddad25486"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE2Mzk1OTA3", "url": "https://github.com/apache/pulsar/pull/7011#pullrequestreview-416395907", "createdAt": "2020-05-21T18:38:52Z", "commit": {"oid": "bb1d9d0720bf8fdc08978b4d471e193ddad25486"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "014e6338286a1ea7c56e265090bf2b4c439d3bb3", "author": {"user": {"login": "codelipenghui", "name": "lipenghui"}}, "url": "https://github.com/apache/pulsar/commit/014e6338286a1ea7c56e265090bf2b4c439d3bb3", "committedDate": "2020-05-22T04:46:20Z", "message": "Fix tests."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE2NzE5MDgz", "url": "https://github.com/apache/pulsar/pull/7011#pullrequestreview-416719083", "createdAt": "2020-05-22T07:57:25Z", "commit": {"oid": "014e6338286a1ea7c56e265090bf2b4c439d3bb3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQwNzo1NzoyNVrOGZOIqA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQwNzo1NzoyNVrOGZOIqA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTA5OTE3Ng==", "bodyText": "Since the purpose it's not obvious, can you add a comment on why we need this?", "url": "https://github.com/apache/pulsar/pull/7011#discussion_r429099176", "createdAt": "2020-05-22T07:57:25Z", "author": {"login": "merlimat"}, "path": "pulsar-broker/src/main/java/org/apache/pulsar/broker/PulsarService.java", "diffHunk": "@@ -539,6 +544,25 @@ public Boolean get() {\n         }\n     }\n \n+    private void generatePropertiesForConfigurationIfNeeded() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "014e6338286a1ea7c56e265090bf2b4c439d3bb3"}, "originalPosition": 31}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ce30a0a650f5c9c1d26733251de93cac5bd755be", "author": {"user": {"login": "codelipenghui", "name": "lipenghui"}}, "url": "https://github.com/apache/pulsar/commit/ce30a0a650f5c9c1d26733251de93cac5bd755be", "committedDate": "2020-05-22T08:19:54Z", "message": "Fix tests."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3538, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}