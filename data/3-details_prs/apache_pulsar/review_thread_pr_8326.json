{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA3NDAyMDgy", "number": 8326, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQxNDoyNzozMFrOEwR_lw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQxNDoyNzozMFrOEwR_lw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE5MDYxOTExOnYy", "diffSide": "RIGHT", "path": "pulsar-client/src/main/java/org/apache/pulsar/client/impl/ConsumerBase.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQxNDoyNzozMFrOHlvX-A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQxNDoyNzozMFrOHlvX-A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTMzNTU0NA==", "bodyText": "this seems to fix #8307", "url": "https://github.com/apache/pulsar/pull/8326#discussion_r509335544", "createdAt": "2020-10-21T14:27:30Z", "author": {"login": "lhotari"}, "path": "pulsar-client/src/main/java/org/apache/pulsar/client/impl/ConsumerBase.java", "diffHunk": "@@ -733,9 +821,11 @@ private void pendingBatchReceiveTask(Timeout timeout) throws Exception {\n                 if (diff <= 0) {\n                     // The diff is less than or equal to zero, meaning that the batch receive has been timed out.\n                     // complete the OpBatchReceive and continue to check the next OpBatchReceive in pendingBatchReceives.\n-                    OpBatchReceive<T> op = pendingBatchReceives.poll();\n-                    completeOpBatchReceive(op);\n-                    firstOpBatchReceive = pendingBatchReceives.peek();\n+                    OpBatchReceive<T> op = pollNextBatchReceive();\n+                    if (op != null) {\n+                        completeOpBatchReceive(op);\n+                    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "68e9fe9daae857b82dfc00379092426ff0816087"}, "originalPosition": 168}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2950, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}