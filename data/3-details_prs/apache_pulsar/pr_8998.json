{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQyMzkxMzg3", "number": 8998, "title": "Improve error handling when broker doesn't trust client certificates", "bodyText": "Motivation\nWhen TLS throws SSLPeerUnverifiedException, broker doesn't log any information and just returns null.\nIt makes users very hard to debug problem.\nChanges\nImprove the error handling when broker doesn't trust client certificates.\nSee more details at #8963", "createdAt": "2020-12-18T08:25:08Z", "url": "https://github.com/apache/pulsar/pull/8998", "merged": true, "mergeCommit": {"oid": "a292b0ac5d123eeb9d95b9012ba5205a2e26d79f"}, "closed": true, "closedAt": "2020-12-21T02:13:51Z", "author": {"login": "sijie"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdnTwZAAH2gAyNTQyMzkxMzg3OjE0YTI4YmVhNTY0YWJiOWU3YjU4YzIyMDBjMDgyMmQ4ZDdlZWNkYjE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdoLcHIAFqTU1NjA4MzgxOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "14a28bea564abb9e7b58c2200c0822d8d7eecdb1", "author": {"user": {"login": "sijie", "name": "Sijie Guo"}}, "url": "https://github.com/apache/pulsar/commit/14a28bea564abb9e7b58c2200c0822d8d7eecdb1", "committedDate": "2020-12-18T08:21:20Z", "message": "Improve error handling when broker doesn't trust client certificates\n\n*Motivation*\n\nWhen TLS throws `SSLPeerUnverifiedException`, broker doesn't log any information and just returns `null`.\nIt makes users very hard to debug problem.\n\n*Changes*\n\nImprove the error handling when broker doesn't trust client certificates.\n\nSee more details at https://github.com/apache/pulsar/issues/8963"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU1MzU2NTI0", "url": "https://github.com/apache/pulsar/pull/8998#pullrequestreview-555356524", "createdAt": "2020-12-18T10:08:01Z", "commit": {"oid": "14a28bea564abb9e7b58c2200c0822d8d7eecdb1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU1NDQxOTk1", "url": "https://github.com/apache/pulsar/pull/8998#pullrequestreview-555441995", "createdAt": "2020-12-18T12:22:24Z", "commit": {"oid": "14a28bea564abb9e7b58c2200c0822d8d7eecdb1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU1NzkxNTk4", "url": "https://github.com/apache/pulsar/pull/8998#pullrequestreview-555791598", "createdAt": "2020-12-18T20:23:56Z", "commit": {"oid": "14a28bea564abb9e7b58c2200c0822d8d7eecdb1"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQyMDoyMzo1NlrOIIxqZg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQyMDoyMzo1NlrOIIxqZg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjA3MzE5MA==", "bodyText": "Is there a way to log the remote address?", "url": "https://github.com/apache/pulsar/pull/8998#discussion_r546073190", "createdAt": "2020-12-18T20:23:56Z", "author": {"login": "eolivelli"}, "path": "pulsar-broker-common/src/main/java/org/apache/pulsar/broker/authentication/AuthenticationDataCommand.java", "diffHunk": "@@ -94,6 +96,7 @@ public boolean hasDataFromTls() {\n         try {\n             return sslSession.getPeerCertificates();\n         } catch (SSLPeerUnverifiedException e) {\n+            log.error(\"Failed to verify the peer's identity\", e);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "14a28bea564abb9e7b58c2200c0822d8d7eecdb1"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU2MDE3NDE0", "url": "https://github.com/apache/pulsar/pull/8998#pullrequestreview-556017414", "createdAt": "2020-12-20T13:23:01Z", "commit": {"oid": "14a28bea564abb9e7b58c2200c0822d8d7eecdb1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU2MDgzODE5", "url": "https://github.com/apache/pulsar/pull/8998#pullrequestreview-556083819", "createdAt": "2020-12-21T01:13:52Z", "commit": {"oid": "14a28bea564abb9e7b58c2200c0822d8d7eecdb1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 807, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}