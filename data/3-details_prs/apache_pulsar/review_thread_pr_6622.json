{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk0NTU3MDk1", "number": 6622, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQyMDozMzo0NlrODs19Iw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQyMDozMzo0NlrODs19Iw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ4MzQ3OTM5OnYy", "diffSide": "RIGHT", "path": "pulsar-client/src/main/java/org/apache/pulsar/client/impl/schema/generic/GenericJsonRecord.java", "isResolved": false, "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQyMDozMzo0NlrOF97IhA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNVQwMjoxOTo0NVrOGA8Jnw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDQ3NjI5Mg==", "bodyText": "I think the integration tests failed due to this change.\nI think we should keep the original behavior and add the following\nelse if (fn.isLong()) {\n    return fn.asLong();\n} else if (fn.isNumber()) {\n    return fn.numberValue();\n}", "url": "https://github.com/apache/pulsar/pull/6622#discussion_r400476292", "createdAt": "2020-03-30T20:33:46Z", "author": {"login": "sijie"}, "path": "pulsar-client/src/main/java/org/apache/pulsar/client/impl/schema/generic/GenericJsonRecord.java", "diffHunk": "@@ -55,12 +55,8 @@ public Object getField(String fieldName) {\n             return new GenericJsonRecord(schemaVersion, fields, fn);\n         } else if (fn.isBoolean()) {\n             return fn.asBoolean();\n-        } else if (fn.isInt()) {\n-            return fn.asInt();\n-        } else if (fn.isFloatingPointNumber()) {\n-            return fn.asDouble();\n-        } else if (fn.isDouble()) {\n-            return fn.asDouble();\n+        } else if (fn.isNumber()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c6d75e6967755e2c71fcb5d13e55fbf56a008446"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTAzMTU1NQ==", "bodyText": "if fn is long, then fn.aslong() should equals to fn.numberValue()\u3002\nThe differences compared to the previous code are:\n\nIf fn is BigDecimal, the new code will return BigDecimal rather than double\nIf fn is BigInteger, the new code will return BigInteger rather than text\nIf fn is float, the new code will return float rather than double\n\nSo i modify the code like:\n        } else if (fn.isBoolean()) {\n            return fn.asBoolean();\n        } else if (fn.isFloatingPointNumber()) {\n            return fn.asDouble();\n        } else if (fn.isBigInteger()) {\n            if (fn.canConvertToLong()) {\n                return fn.asLong();\n            } else {\n                return fn.asText();\n            }\n        } else if (fn.isNumber()) {\n            return fn.numberValue();\n        } else {\n            return fn.asText();\n        }\nI am trying to do integration tests locally but it takes too long to download snapshot jars from maven. I'll try again, and if fail again, can I push directly and do ci test?", "url": "https://github.com/apache/pulsar/pull/6622#discussion_r401031555", "createdAt": "2020-03-31T16:01:47Z", "author": {"login": "lynnmatrix"}, "path": "pulsar-client/src/main/java/org/apache/pulsar/client/impl/schema/generic/GenericJsonRecord.java", "diffHunk": "@@ -55,12 +55,8 @@ public Object getField(String fieldName) {\n             return new GenericJsonRecord(schemaVersion, fields, fn);\n         } else if (fn.isBoolean()) {\n             return fn.asBoolean();\n-        } else if (fn.isInt()) {\n-            return fn.asInt();\n-        } else if (fn.isFloatingPointNumber()) {\n-            return fn.asDouble();\n-        } else if (fn.isDouble()) {\n-            return fn.asDouble();\n+        } else if (fn.isNumber()) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDQ3NjI5Mg=="}, "originalCommit": {"oid": "c6d75e6967755e2c71fcb5d13e55fbf56a008446"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTIxODY5MA==", "bodyText": "sounds good.", "url": "https://github.com/apache/pulsar/pull/6622#discussion_r401218690", "createdAt": "2020-03-31T21:13:14Z", "author": {"login": "sijie"}, "path": "pulsar-client/src/main/java/org/apache/pulsar/client/impl/schema/generic/GenericJsonRecord.java", "diffHunk": "@@ -55,12 +55,8 @@ public Object getField(String fieldName) {\n             return new GenericJsonRecord(schemaVersion, fields, fn);\n         } else if (fn.isBoolean()) {\n             return fn.asBoolean();\n-        } else if (fn.isInt()) {\n-            return fn.asInt();\n-        } else if (fn.isFloatingPointNumber()) {\n-            return fn.asDouble();\n-        } else if (fn.isDouble()) {\n-            return fn.asDouble();\n+        } else if (fn.isNumber()) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDQ3NjI5Mg=="}, "originalCommit": {"oid": "c6d75e6967755e2c71fcb5d13e55fbf56a008446"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzIxODA0Mg==", "bodyText": "Is there anything wrong with CI workflow? I reset to commit the one before the first commit of this PR, and it still fails.", "url": "https://github.com/apache/pulsar/pull/6622#discussion_r403218042", "createdAt": "2020-04-03T18:20:46Z", "author": {"login": "lynnmatrix"}, "path": "pulsar-client/src/main/java/org/apache/pulsar/client/impl/schema/generic/GenericJsonRecord.java", "diffHunk": "@@ -55,12 +55,8 @@ public Object getField(String fieldName) {\n             return new GenericJsonRecord(schemaVersion, fields, fn);\n         } else if (fn.isBoolean()) {\n             return fn.asBoolean();\n-        } else if (fn.isInt()) {\n-            return fn.asInt();\n-        } else if (fn.isFloatingPointNumber()) {\n-            return fn.asDouble();\n-        } else if (fn.isDouble()) {\n-            return fn.asDouble();\n+        } else if (fn.isNumber()) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDQ3NjI5Mg=="}, "originalCommit": {"oid": "c6d75e6967755e2c71fcb5d13e55fbf56a008446"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzIxODg2MA==", "bodyText": "I found this pull #6660, and it has been merged.\nI should try again.", "url": "https://github.com/apache/pulsar/pull/6622#discussion_r403218860", "createdAt": "2020-04-03T18:21:52Z", "author": {"login": "lynnmatrix"}, "path": "pulsar-client/src/main/java/org/apache/pulsar/client/impl/schema/generic/GenericJsonRecord.java", "diffHunk": "@@ -55,12 +55,8 @@ public Object getField(String fieldName) {\n             return new GenericJsonRecord(schemaVersion, fields, fn);\n         } else if (fn.isBoolean()) {\n             return fn.asBoolean();\n-        } else if (fn.isInt()) {\n-            return fn.asInt();\n-        } else if (fn.isFloatingPointNumber()) {\n-            return fn.asDouble();\n-        } else if (fn.isDouble()) {\n-            return fn.asDouble();\n+        } else if (fn.isNumber()) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDQ3NjI5Mg=="}, "originalCommit": {"oid": "c6d75e6967755e2c71fcb5d13e55fbf56a008446"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzYzODY4Nw==", "bodyText": "Finally pass the CI", "url": "https://github.com/apache/pulsar/pull/6622#discussion_r403638687", "createdAt": "2020-04-05T02:19:45Z", "author": {"login": "lynnmatrix"}, "path": "pulsar-client/src/main/java/org/apache/pulsar/client/impl/schema/generic/GenericJsonRecord.java", "diffHunk": "@@ -55,12 +55,8 @@ public Object getField(String fieldName) {\n             return new GenericJsonRecord(schemaVersion, fields, fn);\n         } else if (fn.isBoolean()) {\n             return fn.asBoolean();\n-        } else if (fn.isInt()) {\n-            return fn.asInt();\n-        } else if (fn.isFloatingPointNumber()) {\n-            return fn.asDouble();\n-        } else if (fn.isDouble()) {\n-            return fn.asDouble();\n+        } else if (fn.isNumber()) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDQ3NjI5Mg=="}, "originalCommit": {"oid": "c6d75e6967755e2c71fcb5d13e55fbf56a008446"}, "originalPosition": 10}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1860, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}