{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIyNTYxNzc0", "number": 7031, "title": "Add pulsar SQL woker metrics to repo", "bodyText": "Signed-off-by: xiaolong.ran rxl@apache.org\nFixes #6897\nMotivation\n\nAdd pulsar SQL woker metrics to repo", "createdAt": "2020-05-25T05:58:03Z", "url": "https://github.com/apache/pulsar/pull/7031", "merged": true, "mergeCommit": {"oid": "d4d380a8e4372037c3e479f351562677cf2e4092"}, "closed": true, "closedAt": "2020-05-25T08:45:57Z", "author": {"login": "wolfstudy"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABckpmdIAH2gAyNDIyNTYxNzc0OjVlZGZmZGUzMmY4N2EzMTY4NzNmNGE3NjcxNmRjODVjOWMxM2EzOWI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABckqd2DAFqTQxNzQ5MzU1Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "5edffde32f87a316873f4a76716dc85c9c13a39b", "author": {"user": {"login": "wolfstudy", "name": "xiaolong ran"}}, "url": "https://github.com/apache/pulsar/commit/5edffde32f87a316873f4a76716dc85c9c13a39b", "committedDate": "2020-05-25T05:55:28Z", "message": "Add pulsar SQL woker metrics to repo\n\nSigned-off-by: xiaolong.ran <rxl@apache.org>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3NDcyMTU2", "url": "https://github.com/apache/pulsar/pull/7031#pullrequestreview-417472156", "createdAt": "2020-05-25T06:00:00Z", "commit": {"oid": "5edffde32f87a316873f4a76716dc85c9c13a39b"}, "state": "COMMENTED", "comments": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQwNjowMDowMFrOGZ1h5g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQwNjowNzo1N1rOGZ1p-A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTc0NDYxNA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            | split_bytes_read | Counter | Number of bytes read from bookkeeper. |\n          \n          \n            \n            | split_bytes_read | Counter | Number of bytes read from BookKeeper. |", "url": "https://github.com/apache/pulsar/pull/7031#discussion_r429744614", "createdAt": "2020-05-25T06:00:00Z", "author": {"login": "Anonymitaet"}, "path": "site2/docs/reference-metrics.md", "diffHunk": "@@ -359,6 +360,34 @@ All the proxy metrics are labelled with the following labels:\n | pulsar_proxy_binary_ops | Counter | Counter of proxy operations. |\n | pulsar_proxy_binary_bytes | Counter | Counter of proxy bytes. |\n \n+# Pulsar SQL Worker\n+\n+| Name | Type | Description |\n+|---|---|---|\n+| split_bytes_read | Counter | Number of bytes read from bookkeeper. |", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5edffde32f87a316873f4a76716dc85c9c13a39b"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTc0NDY3Nw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            | split_num_record_deserialized | Counter | Number of record deserialized. |\n          \n          \n            \n            | split_num_record_deserialized | Counter | Number of records deserialized. |", "url": "https://github.com/apache/pulsar/pull/7031#discussion_r429744677", "createdAt": "2020-05-25T06:00:09Z", "author": {"login": "Anonymitaet"}, "path": "site2/docs/reference-metrics.md", "diffHunk": "@@ -359,6 +360,34 @@ All the proxy metrics are labelled with the following labels:\n | pulsar_proxy_binary_ops | Counter | Counter of proxy operations. |\n | pulsar_proxy_binary_bytes | Counter | Counter of proxy bytes. |\n \n+# Pulsar SQL Worker\n+\n+| Name | Type | Description |\n+|---|---|---|\n+| split_bytes_read | Counter | Number of bytes read from bookkeeper. |\n+| split_num_messages_deserialized | Counter | Number of messages deserialized. |\n+| split_num_record_deserialized | Counter | Number of record deserialized. |", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5edffde32f87a316873f4a76716dc85c9c13a39b"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTc0NTA4OQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            | split_read_attempts | Summary | Number of read attempts(will fail if queues are full). |\n          \n          \n            \n            | split_read_attempts | Summary | Number of read attempts (fail if queues are full). |", "url": "https://github.com/apache/pulsar/pull/7031#discussion_r429745089", "createdAt": "2020-05-25T06:01:50Z", "author": {"login": "Anonymitaet"}, "path": "site2/docs/reference-metrics.md", "diffHunk": "@@ -359,6 +360,34 @@ All the proxy metrics are labelled with the following labels:\n | pulsar_proxy_binary_ops | Counter | Counter of proxy operations. |\n | pulsar_proxy_binary_bytes | Counter | Counter of proxy bytes. |\n \n+# Pulsar SQL Worker\n+\n+| Name | Type | Description |\n+|---|---|---|\n+| split_bytes_read | Counter | Number of bytes read from bookkeeper. |\n+| split_num_messages_deserialized | Counter | Number of messages deserialized. |\n+| split_num_record_deserialized | Counter | Number of record deserialized. |\n+| split_bytes_read_per_query | Summary | Total number of bytes read per query. |\n+| split_entry_deserialize_time | Summary | Time spent derserializing entries. |\n+| split_entry_deserialize_time_per_query | Summary | Time spent derserializing entries per query. |\n+| split_entry_queue_dequeue_wait_time | Summary | Time spend waiting to get entry from entry queue because it is empty. |\n+| split_entry_queue_dequeue_wait_time_per_query | Summary | Total time spend waiting to get entry from entry queue per query. |\n+| split_message_queue_dequeue_wait_time_per_query | Summary | Time spent waiting to dequeue from message queue because its empty per query. |\n+| split_message_queue_enqueue_wait_time | Summary | Time spent waiting for message queue enqueue because message queue is full. |\n+| split_message_queue_enqueue_wait_time_per_query | Summary | Time spent waiting for message queue enqueue because message queue is full per query. |\n+| split_num_entries_per_batch | Summary | Number of entries per batch. |\n+| split_num_entries_per_query | Summary | Number of entries per query. |\n+| split_num_messages_deserialized_per_entry | Summary | Number of messages deserialized per entry. |\n+| split_num_messages_deserialized_per_query | Summary | Number of messages deserialized per query. |\n+| split_read_attempts | Summary | Number of read attempts(will fail if queues are full). |", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5edffde32f87a316873f4a76716dc85c9c13a39b"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTc0NTY5Nw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            | split_record_deserialize_time | Summary | Time spent deserializing message to record e.g. avro, json, etc. |\n          \n          \n            \n            | split_record_deserialize_time | Summary | Time spent on deserializing message to record. For example, Avro, JSON, and so on. |", "url": "https://github.com/apache/pulsar/pull/7031#discussion_r429745697", "createdAt": "2020-05-25T06:04:06Z", "author": {"login": "Anonymitaet"}, "path": "site2/docs/reference-metrics.md", "diffHunk": "@@ -359,6 +360,34 @@ All the proxy metrics are labelled with the following labels:\n | pulsar_proxy_binary_ops | Counter | Counter of proxy operations. |\n | pulsar_proxy_binary_bytes | Counter | Counter of proxy bytes. |\n \n+# Pulsar SQL Worker\n+\n+| Name | Type | Description |\n+|---|---|---|\n+| split_bytes_read | Counter | Number of bytes read from bookkeeper. |\n+| split_num_messages_deserialized | Counter | Number of messages deserialized. |\n+| split_num_record_deserialized | Counter | Number of record deserialized. |\n+| split_bytes_read_per_query | Summary | Total number of bytes read per query. |\n+| split_entry_deserialize_time | Summary | Time spent derserializing entries. |\n+| split_entry_deserialize_time_per_query | Summary | Time spent derserializing entries per query. |\n+| split_entry_queue_dequeue_wait_time | Summary | Time spend waiting to get entry from entry queue because it is empty. |\n+| split_entry_queue_dequeue_wait_time_per_query | Summary | Total time spend waiting to get entry from entry queue per query. |\n+| split_message_queue_dequeue_wait_time_per_query | Summary | Time spent waiting to dequeue from message queue because its empty per query. |\n+| split_message_queue_enqueue_wait_time | Summary | Time spent waiting for message queue enqueue because message queue is full. |\n+| split_message_queue_enqueue_wait_time_per_query | Summary | Time spent waiting for message queue enqueue because message queue is full per query. |\n+| split_num_entries_per_batch | Summary | Number of entries per batch. |\n+| split_num_entries_per_query | Summary | Number of entries per query. |\n+| split_num_messages_deserialized_per_entry | Summary | Number of messages deserialized per entry. |\n+| split_num_messages_deserialized_per_query | Summary | Number of messages deserialized per query. |\n+| split_read_attempts | Summary | Number of read attempts(will fail if queues are full). |\n+| split_read_attempts_per_query | Summary | Number of read attempts per query. |\n+| split_read_latency_per_batch | Summary | Latency of reads per batch. |\n+| split_read_latency_per_query | Summary | Total read latency per query. |\n+| split_record_deserialize_time | Summary | Time spent deserializing message to record e.g. avro, json, etc. |", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5edffde32f87a316873f4a76716dc85c9c13a39b"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTc0NTc1MQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            | split_record_deserialize_time_per_query | Summary | Time spent deserializing message to record per query. |\n          \n          \n            \n            | split_record_deserialize_time_per_query | Summary | Time spent on deserializing message to record per query. |", "url": "https://github.com/apache/pulsar/pull/7031#discussion_r429745751", "createdAt": "2020-05-25T06:04:23Z", "author": {"login": "Anonymitaet"}, "path": "site2/docs/reference-metrics.md", "diffHunk": "@@ -359,6 +360,34 @@ All the proxy metrics are labelled with the following labels:\n | pulsar_proxy_binary_ops | Counter | Counter of proxy operations. |\n | pulsar_proxy_binary_bytes | Counter | Counter of proxy bytes. |\n \n+# Pulsar SQL Worker\n+\n+| Name | Type | Description |\n+|---|---|---|\n+| split_bytes_read | Counter | Number of bytes read from bookkeeper. |\n+| split_num_messages_deserialized | Counter | Number of messages deserialized. |\n+| split_num_record_deserialized | Counter | Number of record deserialized. |\n+| split_bytes_read_per_query | Summary | Total number of bytes read per query. |\n+| split_entry_deserialize_time | Summary | Time spent derserializing entries. |\n+| split_entry_deserialize_time_per_query | Summary | Time spent derserializing entries per query. |\n+| split_entry_queue_dequeue_wait_time | Summary | Time spend waiting to get entry from entry queue because it is empty. |\n+| split_entry_queue_dequeue_wait_time_per_query | Summary | Total time spend waiting to get entry from entry queue per query. |\n+| split_message_queue_dequeue_wait_time_per_query | Summary | Time spent waiting to dequeue from message queue because its empty per query. |\n+| split_message_queue_enqueue_wait_time | Summary | Time spent waiting for message queue enqueue because message queue is full. |\n+| split_message_queue_enqueue_wait_time_per_query | Summary | Time spent waiting for message queue enqueue because message queue is full per query. |\n+| split_num_entries_per_batch | Summary | Number of entries per batch. |\n+| split_num_entries_per_query | Summary | Number of entries per query. |\n+| split_num_messages_deserialized_per_entry | Summary | Number of messages deserialized per entry. |\n+| split_num_messages_deserialized_per_query | Summary | Number of messages deserialized per query. |\n+| split_read_attempts | Summary | Number of read attempts(will fail if queues are full). |\n+| split_read_attempts_per_query | Summary | Number of read attempts per query. |\n+| split_read_latency_per_batch | Summary | Latency of reads per batch. |\n+| split_read_latency_per_query | Summary | Total read latency per query. |\n+| split_record_deserialize_time | Summary | Time spent deserializing message to record e.g. avro, json, etc. |\n+| split_record_deserialize_time_per_query | Summary | Time spent deserializing message to record per query. |", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5edffde32f87a316873f4a76716dc85c9c13a39b"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTc0NTkwMA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            | split_total_execution_time | Summary | Total time spent execution time . |\n          \n          \n            \n            | split_total_execution_time | Summary | Total execution time. |", "url": "https://github.com/apache/pulsar/pull/7031#discussion_r429745900", "createdAt": "2020-05-25T06:04:57Z", "author": {"login": "Anonymitaet"}, "path": "site2/docs/reference-metrics.md", "diffHunk": "@@ -359,6 +360,34 @@ All the proxy metrics are labelled with the following labels:\n | pulsar_proxy_binary_ops | Counter | Counter of proxy operations. |\n | pulsar_proxy_binary_bytes | Counter | Counter of proxy bytes. |\n \n+# Pulsar SQL Worker\n+\n+| Name | Type | Description |\n+|---|---|---|\n+| split_bytes_read | Counter | Number of bytes read from bookkeeper. |\n+| split_num_messages_deserialized | Counter | Number of messages deserialized. |\n+| split_num_record_deserialized | Counter | Number of record deserialized. |\n+| split_bytes_read_per_query | Summary | Total number of bytes read per query. |\n+| split_entry_deserialize_time | Summary | Time spent derserializing entries. |\n+| split_entry_deserialize_time_per_query | Summary | Time spent derserializing entries per query. |\n+| split_entry_queue_dequeue_wait_time | Summary | Time spend waiting to get entry from entry queue because it is empty. |\n+| split_entry_queue_dequeue_wait_time_per_query | Summary | Total time spend waiting to get entry from entry queue per query. |\n+| split_message_queue_dequeue_wait_time_per_query | Summary | Time spent waiting to dequeue from message queue because its empty per query. |\n+| split_message_queue_enqueue_wait_time | Summary | Time spent waiting for message queue enqueue because message queue is full. |\n+| split_message_queue_enqueue_wait_time_per_query | Summary | Time spent waiting for message queue enqueue because message queue is full per query. |\n+| split_num_entries_per_batch | Summary | Number of entries per batch. |\n+| split_num_entries_per_query | Summary | Number of entries per query. |\n+| split_num_messages_deserialized_per_entry | Summary | Number of messages deserialized per entry. |\n+| split_num_messages_deserialized_per_query | Summary | Number of messages deserialized per query. |\n+| split_read_attempts | Summary | Number of read attempts(will fail if queues are full). |\n+| split_read_attempts_per_query | Summary | Number of read attempts per query. |\n+| split_read_latency_per_batch | Summary | Latency of reads per batch. |\n+| split_read_latency_per_query | Summary | Total read latency per query. |\n+| split_record_deserialize_time | Summary | Time spent deserializing message to record e.g. avro, json, etc. |\n+| split_record_deserialize_time_per_query | Summary | Time spent deserializing message to record per query. |\n+| split_total_execution_time | Summary | Total time spent execution time . |", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5edffde32f87a316873f4a76716dc85c9c13a39b"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTc0NjAyOQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            | split_entry_queue_dequeue_wait_time | Summary | Time spend waiting to get entry from entry queue because it is empty. |\n          \n          \n            \n            | split_entry_queue_dequeue_wait_time | Summary | Time spent on waiting to get entry from entry queue because it is empty. |", "url": "https://github.com/apache/pulsar/pull/7031#discussion_r429746029", "createdAt": "2020-05-25T06:05:24Z", "author": {"login": "Anonymitaet"}, "path": "site2/docs/reference-metrics.md", "diffHunk": "@@ -359,6 +360,34 @@ All the proxy metrics are labelled with the following labels:\n | pulsar_proxy_binary_ops | Counter | Counter of proxy operations. |\n | pulsar_proxy_binary_bytes | Counter | Counter of proxy bytes. |\n \n+# Pulsar SQL Worker\n+\n+| Name | Type | Description |\n+|---|---|---|\n+| split_bytes_read | Counter | Number of bytes read from bookkeeper. |\n+| split_num_messages_deserialized | Counter | Number of messages deserialized. |\n+| split_num_record_deserialized | Counter | Number of record deserialized. |\n+| split_bytes_read_per_query | Summary | Total number of bytes read per query. |\n+| split_entry_deserialize_time | Summary | Time spent derserializing entries. |\n+| split_entry_deserialize_time_per_query | Summary | Time spent derserializing entries per query. |\n+| split_entry_queue_dequeue_wait_time | Summary | Time spend waiting to get entry from entry queue because it is empty. |", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5edffde32f87a316873f4a76716dc85c9c13a39b"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTc0NjA3MA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            | split_entry_deserialize_time | Summary | Time spent derserializing entries. |\n          \n          \n            \n            | split_entry_deserialize_time | Summary | Time spent on derserializing entries. |", "url": "https://github.com/apache/pulsar/pull/7031#discussion_r429746070", "createdAt": "2020-05-25T06:05:33Z", "author": {"login": "Anonymitaet"}, "path": "site2/docs/reference-metrics.md", "diffHunk": "@@ -359,6 +360,34 @@ All the proxy metrics are labelled with the following labels:\n | pulsar_proxy_binary_ops | Counter | Counter of proxy operations. |\n | pulsar_proxy_binary_bytes | Counter | Counter of proxy bytes. |\n \n+# Pulsar SQL Worker\n+\n+| Name | Type | Description |\n+|---|---|---|\n+| split_bytes_read | Counter | Number of bytes read from bookkeeper. |\n+| split_num_messages_deserialized | Counter | Number of messages deserialized. |\n+| split_num_record_deserialized | Counter | Number of record deserialized. |\n+| split_bytes_read_per_query | Summary | Total number of bytes read per query. |\n+| split_entry_deserialize_time | Summary | Time spent derserializing entries. |", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5edffde32f87a316873f4a76716dc85c9c13a39b"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTc0NjA5Ng==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            | split_entry_deserialize_time_per_query | Summary | Time spent derserializing entries per query. |\n          \n          \n            \n            | split_entry_deserialize_time_per_query | Summary | Time spent on derserializing entries per query. |", "url": "https://github.com/apache/pulsar/pull/7031#discussion_r429746096", "createdAt": "2020-05-25T06:05:40Z", "author": {"login": "Anonymitaet"}, "path": "site2/docs/reference-metrics.md", "diffHunk": "@@ -359,6 +360,34 @@ All the proxy metrics are labelled with the following labels:\n | pulsar_proxy_binary_ops | Counter | Counter of proxy operations. |\n | pulsar_proxy_binary_bytes | Counter | Counter of proxy bytes. |\n \n+# Pulsar SQL Worker\n+\n+| Name | Type | Description |\n+|---|---|---|\n+| split_bytes_read | Counter | Number of bytes read from bookkeeper. |\n+| split_num_messages_deserialized | Counter | Number of messages deserialized. |\n+| split_num_record_deserialized | Counter | Number of record deserialized. |\n+| split_bytes_read_per_query | Summary | Total number of bytes read per query. |\n+| split_entry_deserialize_time | Summary | Time spent derserializing entries. |\n+| split_entry_deserialize_time_per_query | Summary | Time spent derserializing entries per query. |", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5edffde32f87a316873f4a76716dc85c9c13a39b"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTc0NjEzNQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            | split_entry_deserialize_time_per_query | Summary | Time spent derserializing entries per query. |\n          \n          \n            \n            | split_entry_deserialize_time_per_query | Summary | Time spent on derserializing entries per query. |", "url": "https://github.com/apache/pulsar/pull/7031#discussion_r429746135", "createdAt": "2020-05-25T06:05:47Z", "author": {"login": "Anonymitaet"}, "path": "site2/docs/reference-metrics.md", "diffHunk": "@@ -359,6 +360,34 @@ All the proxy metrics are labelled with the following labels:\n | pulsar_proxy_binary_ops | Counter | Counter of proxy operations. |\n | pulsar_proxy_binary_bytes | Counter | Counter of proxy bytes. |\n \n+# Pulsar SQL Worker\n+\n+| Name | Type | Description |\n+|---|---|---|\n+| split_bytes_read | Counter | Number of bytes read from bookkeeper. |\n+| split_num_messages_deserialized | Counter | Number of messages deserialized. |\n+| split_num_record_deserialized | Counter | Number of record deserialized. |\n+| split_bytes_read_per_query | Summary | Total number of bytes read per query. |\n+| split_entry_deserialize_time | Summary | Time spent derserializing entries. |\n+| split_entry_deserialize_time_per_query | Summary | Time spent derserializing entries per query. |", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTc0NjA5Ng=="}, "originalCommit": {"oid": "5edffde32f87a316873f4a76716dc85c9c13a39b"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTc0NjQwMA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            | split_entry_queue_dequeue_wait_time_per_query | Summary | Total time spend waiting to get entry from entry queue per query. |\n          \n          \n            \n            | split_entry_queue_dequeue_wait_time_per_query | Summary | Total time spent on waiting to get entry from entry queue per query. |", "url": "https://github.com/apache/pulsar/pull/7031#discussion_r429746400", "createdAt": "2020-05-25T06:06:56Z", "author": {"login": "Anonymitaet"}, "path": "site2/docs/reference-metrics.md", "diffHunk": "@@ -359,6 +360,34 @@ All the proxy metrics are labelled with the following labels:\n | pulsar_proxy_binary_ops | Counter | Counter of proxy operations. |\n | pulsar_proxy_binary_bytes | Counter | Counter of proxy bytes. |\n \n+# Pulsar SQL Worker\n+\n+| Name | Type | Description |\n+|---|---|---|\n+| split_bytes_read | Counter | Number of bytes read from bookkeeper. |\n+| split_num_messages_deserialized | Counter | Number of messages deserialized. |\n+| split_num_record_deserialized | Counter | Number of record deserialized. |\n+| split_bytes_read_per_query | Summary | Total number of bytes read per query. |\n+| split_entry_deserialize_time | Summary | Time spent derserializing entries. |\n+| split_entry_deserialize_time_per_query | Summary | Time spent derserializing entries per query. |\n+| split_entry_queue_dequeue_wait_time | Summary | Time spend waiting to get entry from entry queue because it is empty. |\n+| split_entry_queue_dequeue_wait_time_per_query | Summary | Total time spend waiting to get entry from entry queue per query. |", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5edffde32f87a316873f4a76716dc85c9c13a39b"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTc0NjQ3NQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            | split_message_queue_dequeue_wait_time_per_query | Summary | Time spent waiting to dequeue from message queue because its empty per query. |\n          \n          \n            \n            | split_message_queue_dequeue_wait_time_per_query | Summary | Time spent on waiting to dequeue from message queue because it is empty per query. |", "url": "https://github.com/apache/pulsar/pull/7031#discussion_r429746475", "createdAt": "2020-05-25T06:07:12Z", "author": {"login": "Anonymitaet"}, "path": "site2/docs/reference-metrics.md", "diffHunk": "@@ -359,6 +360,34 @@ All the proxy metrics are labelled with the following labels:\n | pulsar_proxy_binary_ops | Counter | Counter of proxy operations. |\n | pulsar_proxy_binary_bytes | Counter | Counter of proxy bytes. |\n \n+# Pulsar SQL Worker\n+\n+| Name | Type | Description |\n+|---|---|---|\n+| split_bytes_read | Counter | Number of bytes read from bookkeeper. |\n+| split_num_messages_deserialized | Counter | Number of messages deserialized. |\n+| split_num_record_deserialized | Counter | Number of record deserialized. |\n+| split_bytes_read_per_query | Summary | Total number of bytes read per query. |\n+| split_entry_deserialize_time | Summary | Time spent derserializing entries. |\n+| split_entry_deserialize_time_per_query | Summary | Time spent derserializing entries per query. |\n+| split_entry_queue_dequeue_wait_time | Summary | Time spend waiting to get entry from entry queue because it is empty. |\n+| split_entry_queue_dequeue_wait_time_per_query | Summary | Total time spend waiting to get entry from entry queue per query. |\n+| split_message_queue_dequeue_wait_time_per_query | Summary | Time spent waiting to dequeue from message queue because its empty per query. |", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5edffde32f87a316873f4a76716dc85c9c13a39b"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTc0NjU3MA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            | split_message_queue_enqueue_wait_time | Summary | Time spent waiting for message queue enqueue because message queue is full. |\n          \n          \n            \n            | split_message_queue_enqueue_wait_time | Summary | Time spent on waiting for message queue because the message queue is full. |", "url": "https://github.com/apache/pulsar/pull/7031#discussion_r429746570", "createdAt": "2020-05-25T06:07:38Z", "author": {"login": "Anonymitaet"}, "path": "site2/docs/reference-metrics.md", "diffHunk": "@@ -359,6 +360,34 @@ All the proxy metrics are labelled with the following labels:\n | pulsar_proxy_binary_ops | Counter | Counter of proxy operations. |\n | pulsar_proxy_binary_bytes | Counter | Counter of proxy bytes. |\n \n+# Pulsar SQL Worker\n+\n+| Name | Type | Description |\n+|---|---|---|\n+| split_bytes_read | Counter | Number of bytes read from bookkeeper. |\n+| split_num_messages_deserialized | Counter | Number of messages deserialized. |\n+| split_num_record_deserialized | Counter | Number of record deserialized. |\n+| split_bytes_read_per_query | Summary | Total number of bytes read per query. |\n+| split_entry_deserialize_time | Summary | Time spent derserializing entries. |\n+| split_entry_deserialize_time_per_query | Summary | Time spent derserializing entries per query. |\n+| split_entry_queue_dequeue_wait_time | Summary | Time spend waiting to get entry from entry queue because it is empty. |\n+| split_entry_queue_dequeue_wait_time_per_query | Summary | Total time spend waiting to get entry from entry queue per query. |\n+| split_message_queue_dequeue_wait_time_per_query | Summary | Time spent waiting to dequeue from message queue because its empty per query. |\n+| split_message_queue_enqueue_wait_time | Summary | Time spent waiting for message queue enqueue because message queue is full. |", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5edffde32f87a316873f4a76716dc85c9c13a39b"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTc0NjY4MA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            | split_message_queue_enqueue_wait_time_per_query | Summary | Time spent waiting for message queue enqueue because message queue is full per query. |\n          \n          \n            \n            | split_message_queue_enqueue_wait_time_per_query | Summary | Time spent on waiting for message queue because the message queue is full per query. |", "url": "https://github.com/apache/pulsar/pull/7031#discussion_r429746680", "createdAt": "2020-05-25T06:07:57Z", "author": {"login": "Anonymitaet"}, "path": "site2/docs/reference-metrics.md", "diffHunk": "@@ -359,6 +360,34 @@ All the proxy metrics are labelled with the following labels:\n | pulsar_proxy_binary_ops | Counter | Counter of proxy operations. |\n | pulsar_proxy_binary_bytes | Counter | Counter of proxy bytes. |\n \n+# Pulsar SQL Worker\n+\n+| Name | Type | Description |\n+|---|---|---|\n+| split_bytes_read | Counter | Number of bytes read from bookkeeper. |\n+| split_num_messages_deserialized | Counter | Number of messages deserialized. |\n+| split_num_record_deserialized | Counter | Number of record deserialized. |\n+| split_bytes_read_per_query | Summary | Total number of bytes read per query. |\n+| split_entry_deserialize_time | Summary | Time spent derserializing entries. |\n+| split_entry_deserialize_time_per_query | Summary | Time spent derserializing entries per query. |\n+| split_entry_queue_dequeue_wait_time | Summary | Time spend waiting to get entry from entry queue because it is empty. |\n+| split_entry_queue_dequeue_wait_time_per_query | Summary | Total time spend waiting to get entry from entry queue per query. |\n+| split_message_queue_dequeue_wait_time_per_query | Summary | Time spent waiting to dequeue from message queue because its empty per query. |\n+| split_message_queue_enqueue_wait_time | Summary | Time spent waiting for message queue enqueue because message queue is full. |\n+| split_message_queue_enqueue_wait_time_per_query | Summary | Time spent waiting for message queue enqueue because message queue is full per query. |", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5edffde32f87a316873f4a76716dc85c9c13a39b"}, "originalPosition": 26}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7b8f4d1ebc196c1adb8aded057d74ea58883133e", "author": {"user": {"login": "wolfstudy", "name": "xiaolong ran"}}, "url": "https://github.com/apache/pulsar/commit/7b8f4d1ebc196c1adb8aded057d74ea58883133e", "committedDate": "2020-05-25T06:18:27Z", "message": "fix comments\n\nSigned-off-by: xiaolong.ran <rxl@apache.org>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3NDgxODIz", "url": "https://github.com/apache/pulsar/pull/7031#pullrequestreview-417481823", "createdAt": "2020-05-25T06:28:31Z", "commit": {"oid": "7b8f4d1ebc196c1adb8aded057d74ea58883133e"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQwNjoyODozMVrOGZ1_Dw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQwNjoyOToxM1rOGZ1_uw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTc1MjA3OQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                // number of read attempts(fail if queues are full)\n          \n          \n            \n                // number of read attempts (fail if queues are full)", "url": "https://github.com/apache/pulsar/pull/7031#discussion_r429752079", "createdAt": "2020-05-25T06:28:31Z", "author": {"login": "Anonymitaet"}, "path": "pulsar-sql/presto-pulsar/src/main/java/org/apache/pulsar/sql/presto/PulsarConnectorMetricsTracker.java", "diffHunk": "@@ -68,7 +68,7 @@\n     // number of messages deserialized per query\n     public static final String NUM_MESSAGES_DERSERIALIZED_PER_QUERY = \"num-messages-deserialized-per-query\";\n \n-    // number of read attempts.  Will fail if queues are full\n+    // number of read attempts(fail if queues are full)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b8f4d1ebc196c1adb8aded057d74ea58883133e"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTc1MjI1MQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            | split_read_attempts | Summary | Number of read attempts(fail if queues are full). |\n          \n          \n            \n            | split_read_attempts | Summary | Number of read attempts (fail if queues are full). |\n          \n      \n    \n    \n  \n\nHave commented this b4", "url": "https://github.com/apache/pulsar/pull/7031#discussion_r429752251", "createdAt": "2020-05-25T06:29:13Z", "author": {"login": "Anonymitaet"}, "path": "site2/docs/reference-metrics.md", "diffHunk": "@@ -359,6 +360,34 @@ All the proxy metrics are labelled with the following labels:\n | pulsar_proxy_binary_ops | Counter | Counter of proxy operations. |\n | pulsar_proxy_binary_bytes | Counter | Counter of proxy bytes. |\n \n+# Pulsar SQL Worker\n+\n+| Name | Type | Description |\n+|---|---|---|\n+| split_bytes_read | Counter | Number of bytes read from BookKeeper. |\n+| split_num_messages_deserialized | Counter | Number of messages deserialized. |\n+| split_num_record_deserialized | Counter | Number of records deserialized. |\n+| split_bytes_read_per_query | Summary | Total number of bytes read per query. |\n+| split_entry_deserialize_time | Summary | Time spent on derserializing entries. |\n+| split_entry_deserialize_time_per_query | Summary | Time spent on derserializing entries per query. |\n+| split_entry_queue_dequeue_wait_time | Summary | Time spend on waiting to get entry from entry queue because it is empty. |\n+| split_entry_queue_dequeue_wait_time_per_query | Summary | Total time spent on waiting to get entry from entry queue per query. |\n+| split_message_queue_dequeue_wait_time_per_query | Summary | Time spent on waiting to dequeue from message queue because is is empty per query. |\n+| split_message_queue_enqueue_wait_time | Summary | Time spent on waiting for message queue enqueue because the message queue is full. |\n+| split_message_queue_enqueue_wait_time_per_query | Summary | Time spent on waiting for message queue enqueue because the message queue is full per query. |\n+| split_num_entries_per_batch | Summary | Number of entries per batch. |\n+| split_num_entries_per_query | Summary | Number of entries per query. |\n+| split_num_messages_deserialized_per_entry | Summary | Number of messages deserialized per entry. |\n+| split_num_messages_deserialized_per_query | Summary | Number of messages deserialized per query. |\n+| split_read_attempts | Summary | Number of read attempts(fail if queues are full). |", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b8f4d1ebc196c1adb8aded057d74ea58883133e"}, "originalPosition": 31}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c71c19042bdf5d2d03a71c4f5c8566cbd858158f", "author": {"user": {"login": "wolfstudy", "name": "xiaolong ran"}}, "url": "https://github.com/apache/pulsar/commit/c71c19042bdf5d2d03a71c4f5c8566cbd858158f", "committedDate": "2020-05-25T06:33:50Z", "message": "fix comments\n\nSigned-off-by: xiaolong.ran <rxl@apache.org>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3NDg3NjQ2", "url": "https://github.com/apache/pulsar/pull/7031#pullrequestreview-417487646", "createdAt": "2020-05-25T06:42:50Z", "commit": {"oid": "c71c19042bdf5d2d03a71c4f5c8566cbd858158f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3NDkzNTUy", "url": "https://github.com/apache/pulsar/pull/7031#pullrequestreview-417493552", "createdAt": "2020-05-25T06:55:58Z", "commit": {"oid": "c71c19042bdf5d2d03a71c4f5c8566cbd858158f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3546, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}