{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQzMjA4Nzgx", "number": 7424, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQwNTowNToyMFrOEKvyNA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQwNTowOToxN1rOEKv03A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc5NzA0MTE2OnYy", "diffSide": "LEFT", "path": "conf/functions_worker.yml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQwNTowNToyMFrOGr9lPg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQwNTowNToyMFrOGr9lPg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODc1MDkxMA==", "bodyText": "Can you move this to end of the file and mark them as @Deprecated?", "url": "https://github.com/apache/pulsar/pull/7424#discussion_r448750910", "createdAt": "2020-07-02T05:05:20Z", "author": {"login": "sijie"}, "path": "conf/functions_worker.yml", "diffHunk": "@@ -48,13 +48,25 @@ downloadDirectory: download/pulsar_functions\n \n # Configure the pulsar client used by function metadata management\n #\n-# points \n+# points\n+# Whether to enable TLS when clients connect to broker\n+useTls: false\n+# For TLS:\n+# brokerServiceUrl=pulsar+ssl://localhost:6651/\n pulsarServiceUrl: pulsar://localhost:6650\n+# For TLS:\n+# webServiceUrl=https://localhost:8443/\n pulsarWebServiceUrl: http://localhost:8080\n+\n+############################################\n+# security settings for pulsar broker client\n+############################################\n+# The path to trusted certificates used by the Pulsar client to authenticate with Pulsar brokers\n+# brokerClientTrustCertsFilePath:\n # the authentication plugin to be used by the pulsar client used in worker service\n-# clientAuthenticationPlugin:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "46a90e4d9a5194bf298abc1c41ca37bafd9936b9"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc5NzA0NzEwOnYy", "diffSide": "RIGHT", "path": "pulsar-broker/src/test/java/org/apache/pulsar/functions/worker/PulsarFunctionE2ESecurityTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQwNTowODo0OFrOGr9olw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQwNTowODo0OFrOGr9olw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODc1MTc2Nw==", "bodyText": "You need to consider backward compatibility. You can add getBrokerClientAuthenticationPlugin() method in WorkerConfig.\nString getBrokerClientAuthenticationPlugin() {\n    if (null == brokerClientAuthenticationParameters) {\n        return clientAuthenticationParameters;\n    } else {\n        return brokerClientAuthenticationParameters;\n    }\n}\n\nWe should do the same thing for getBrokerClientAuthenticationPlugin.", "url": "https://github.com/apache/pulsar/pull/7424#discussion_r448751767", "createdAt": "2020-07-02T05:08:48Z", "author": {"login": "sijie"}, "path": "pulsar-broker/src/test/java/org/apache/pulsar/functions/worker/PulsarFunctionE2ESecurityTest.java", "diffHunk": "@@ -177,10 +177,10 @@ void setup(Method method) throws Exception {\n \n         ClientBuilder clientBuilder = PulsarClient.builder().serviceUrl(this.workerConfig.getPulsarServiceUrl())\n                 .operationTimeout(1000, TimeUnit.MILLISECONDS);\n-        if (isNotBlank(workerConfig.getClientAuthenticationPlugin())\n-                && isNotBlank(workerConfig.getClientAuthenticationParameters())) {\n-            clientBuilder.authentication(workerConfig.getClientAuthenticationPlugin(),\n-                    workerConfig.getClientAuthenticationParameters());\n+        if (isNotBlank(workerConfig.getBrokerClientAuthenticationPlugin())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "46a90e4d9a5194bf298abc1c41ca37bafd9936b9"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc5NzA0Nzk2OnYy", "diffSide": "RIGHT", "path": "pulsar-functions/runtime/src/main/java/org/apache/pulsar/functions/worker/WorkerConfig.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQwNTowOToxN1rOGr9pNQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQwNTowOToxN1rOGr9pNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODc1MTkyNQ==", "bodyText": "Please keep the original settings and mark them as deprecated.", "url": "https://github.com/apache/pulsar/pull/7424#discussion_r448751925", "createdAt": "2020-07-02T05:09:17Z", "author": {"login": "sijie"}, "path": "pulsar-functions/runtime/src/main/java/org/apache/pulsar/functions/worker/WorkerConfig.java", "diffHunk": "@@ -258,12 +258,12 @@\n         category = CATEGORY_CLIENT_SECURITY,\n         doc = \"The authentication plugin used by function workers to talk to brokers\"\n     )\n-    private String clientAuthenticationPlugin;\n+    private String brokerClientAuthenticationPlugin;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "46a90e4d9a5194bf298abc1c41ca37bafd9936b9"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2412, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}