{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI2MTQ3NDgz", "number": 8675, "title": "Add release note for 2.7.0.", "bodyText": "", "createdAt": "2020-11-24T03:28:32Z", "url": "https://github.com/apache/pulsar/pull/8675", "merged": true, "mergeCommit": {"oid": "fc42730cdfde5ba4c583bfa7693e4bc9e3375ebe"}, "closed": true, "closedAt": "2020-12-03T02:13:31Z", "author": {"login": "codelipenghui"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdfhLSYgH2gAyNTI2MTQ3NDgzOjc1Y2I3ODM2OWU1MzlhNDdlZDJlNWZmYTZiYmI1NzdiOGE4YzNmOTI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdiYZzdAH2gAyNTI2MTQ3NDgzOjhiY2Y2MjQ3MzRhYjc0N2Y5ZmE0NjBjMDQ5MGFiNmUwNWU5ZjhiODM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "75cb78369e539a47ed2e5ffa6bbb577b8a8c3f92", "author": {"user": {"login": "codelipenghui", "name": "lipenghui"}}, "url": "https://github.com/apache/pulsar/commit/75cb78369e539a47ed2e5ffa6bbb577b8a8c3f92", "committedDate": "2020-11-24T03:28:05Z", "message": "Add release note for 2.7.0."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM3MzkxMTE3", "url": "https://github.com/apache/pulsar/pull/8675#pullrequestreview-537391117", "createdAt": "2020-11-24T11:18:20Z", "commit": {"oid": "75cb78369e539a47ed2e5ffa6bbb577b8a8c3f92"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM3NTc2NDY1", "url": "https://github.com/apache/pulsar/pull/8675#pullrequestreview-537576465", "createdAt": "2020-11-24T14:58:18Z", "commit": {"oid": "75cb78369e539a47ed2e5ffa6bbb577b8a8c3f92"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM3NjM5MzA0", "url": "https://github.com/apache/pulsar/pull/8675#pullrequestreview-537639304", "createdAt": "2020-11-24T15:38:37Z", "commit": {"oid": "75cb78369e539a47ed2e5ffa6bbb577b8a8c3f92"}, "state": "COMMENTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQxNTozODozN1rOH5HQ0Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQxNTo0MTowOVrOH5HfKw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTY0OTg3Mw==", "bodyText": "support + doing, so change \"support set\" to \"support setting\", same comment for the below.", "url": "https://github.com/apache/pulsar/pull/8675#discussion_r529649873", "createdAt": "2020-11-24T15:38:37Z", "author": {"login": "Huanli-Meng"}, "path": "site2/website/release-notes.md", "diffHunk": "@@ -1,11 +1,180 @@\n \n ## Apache Pulsar Release Notes\n \n-### 2.7.0 &mdash; Not Yet Released <a id=\u201c2.7.0\u201d></a>\n+### 2.7.0 &mdash; 2020-11-25 <a id=\u201c2.7.0\u201d></a>\n+\n+The following lists fixes and enhancements in the 2.7.0 release.\n+\n+#### Transactions\n+\n+- Implementation of Transaction Buffer Client [#6544](https://github.com/apache/pulsar/pull/6544)\n+- Support produce messages with transaction and commit transaction [#7552](https://github.com/apache/pulsar/pull/7552)\n+- Support consume transaction messages [#7781](https://github.com/apache/pulsar/pull/7781) [#7833](https://github.com/apache/pulsar/pull/7833)\n+- Message acknowledgment with transaction [#7856](https://github.com/apache/pulsar/pull/7856) [#8007](https://github.com/apache/pulsar/pull/8007)\n+- Support transaction abort on partition [#7953](https://github.com/apache/pulsar/pull/7953)\n+- Support transaction abort on subscription [#7979](https://github.com/apache/pulsar/pull/7979)\n+- Handle pending ack at the client side [#8037](https://github.com/apache/pulsar/pull/8037)\n+- Pending ack state implementation [#8426](https://github.com/apache/pulsar/pull/8426)\n+- Support get reponse for message acknowledge [#8161](https://github.com/apache/pulsar/pull/8161)\n+- Refactor the transaction buffer implementation [#8291](https://github.com/apache/pulsar/pull/8291) [#8347](https://github.com/apache/pulsar/pull/8347)\n+- Transaction marker deletion [#8318](https://github.com/apache/pulsar/pull/8318)\n+- Support produce messages with transaction in batch [#8415](https://github.com/apache/pulsar/pull/8415)\n+- Register transaction metadata before send or ack messages [#8493](https://github.com/apache/pulsar/pull/8493)\n+- Expose transaction interface [#8505](https://github.com/apache/pulsar/pull/8505)\n+- Guarantee transaction metadata handlers connected [#8563](https://github.com/apache/pulsar/pull/8563)\n+- Add the batch size in transaction ack command [#8659](https://github.com/apache/pulsar/pull/8659)\n+- Transaction Log implementation [#8658](https://github.com/apache/pulsar/pull/8658)\n+\n+#### Topic policy\n+\n+- Support set message TTL on topic level [#7738](https://github.com/apache/pulsar/pull/7738)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "75cb78369e539a47ed2e5ffa6bbb577b8a8c3f92"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTY1MDgxNg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            #### IO Connectors\n          \n          \n            \n            #### IO connectors", "url": "https://github.com/apache/pulsar/pull/8675#discussion_r529650816", "createdAt": "2020-11-24T15:39:20Z", "author": {"login": "Huanli-Meng"}, "path": "site2/website/release-notes.md", "diffHunk": "@@ -1,11 +1,180 @@\n \n ## Apache Pulsar Release Notes\n \n-### 2.7.0 &mdash; Not Yet Released <a id=\u201c2.7.0\u201d></a>\n+### 2.7.0 &mdash; 2020-11-25 <a id=\u201c2.7.0\u201d></a>\n+\n+The following lists fixes and enhancements in the 2.7.0 release.\n+\n+#### Transactions\n+\n+- Implementation of Transaction Buffer Client [#6544](https://github.com/apache/pulsar/pull/6544)\n+- Support produce messages with transaction and commit transaction [#7552](https://github.com/apache/pulsar/pull/7552)\n+- Support consume transaction messages [#7781](https://github.com/apache/pulsar/pull/7781) [#7833](https://github.com/apache/pulsar/pull/7833)\n+- Message acknowledgment with transaction [#7856](https://github.com/apache/pulsar/pull/7856) [#8007](https://github.com/apache/pulsar/pull/8007)\n+- Support transaction abort on partition [#7953](https://github.com/apache/pulsar/pull/7953)\n+- Support transaction abort on subscription [#7979](https://github.com/apache/pulsar/pull/7979)\n+- Handle pending ack at the client side [#8037](https://github.com/apache/pulsar/pull/8037)\n+- Pending ack state implementation [#8426](https://github.com/apache/pulsar/pull/8426)\n+- Support get reponse for message acknowledge [#8161](https://github.com/apache/pulsar/pull/8161)\n+- Refactor the transaction buffer implementation [#8291](https://github.com/apache/pulsar/pull/8291) [#8347](https://github.com/apache/pulsar/pull/8347)\n+- Transaction marker deletion [#8318](https://github.com/apache/pulsar/pull/8318)\n+- Support produce messages with transaction in batch [#8415](https://github.com/apache/pulsar/pull/8415)\n+- Register transaction metadata before send or ack messages [#8493](https://github.com/apache/pulsar/pull/8493)\n+- Expose transaction interface [#8505](https://github.com/apache/pulsar/pull/8505)\n+- Guarantee transaction metadata handlers connected [#8563](https://github.com/apache/pulsar/pull/8563)\n+- Add the batch size in transaction ack command [#8659](https://github.com/apache/pulsar/pull/8659)\n+- Transaction Log implementation [#8658](https://github.com/apache/pulsar/pull/8658)\n+\n+#### Topic policy\n+\n+- Support set message TTL on topic level [#7738](https://github.com/apache/pulsar/pull/7738)\n+- Support set retention on topic level [#7747](https://github.com/apache/pulsar/pull/7747)\n+- Support set delayed delivery policy on topic level [#7784](https://github.com/apache/pulsar/pull/7784)\n+- Support set max unacked message per subscription on topic level [#7802](https://github.com/apache/pulsar/pull/7802)\n+- Support set persistence policie on topic level [#7817](https://github.com/apache/pulsar/pull/7817)\n+- Support set max unacked messages per consumer on topic level [#7818](https://github.com/apache/pulsar/pull/7818)\n+- Support set deduplication policy on topic level [#7821](https://github.com/apache/pulsar/pull/7821)\n+- support set message dispatch rate on topic level [#7863](https://github.com/apache/pulsar/pull/7863))\n+- Support set compaction threshold on topic level [#7881](https://github.com/apache/pulsar/pull/7881)\n+- Support set offload policy on topic level [#7883](https://github.com/apache/pulsar/pull/7883)\n+- Support set max producers for a topic [#7914](https://github.com/apache/pulsar/pull/7914)\n+- Support set max consumers for a topic [#7968](https://github.com/apache/pulsar/pull/7968)\n+- Support set publish rate limitation for a topic [#7948](https://github.com/apache/pulsar/pull/7948)\n+- Support set inactive topic policy on topic level [#7986](https://github.com/apache/pulsar/pull/7986)\n+- Support set subscribe rate for a topic [#7991](https://github.com/apache/pulsar/pull/7991)\n+- Support set max consumers per subscription on topic level [#8003](https://github.com/apache/pulsar/pull/8003)\n+- Support set subscription dispatch rate on topic level [#8087](https://github.com/apache/pulsar/pull/8087)\n+- Support set deduplication snapshot interval on topic level [#8552](https://github.com/apache/pulsar/pull/8552)\n \n-##### Upgrade notes\n+#### Broker\n+\n+- Upgrade BookKeeper version to 4.12.0 [#8447](https://github.com/apache/pulsar/pull/8447)\n+- Capture the add entry latency of managed-ledger [#4419](https://github.com/apache/pulsar/pull/4419)\n+- Keep max-concurrent http web-request configurable [#7250](https://github.com/apache/pulsar/pull/7250)\n+- Perform the unload in background after bundle split [#7387](https://github.com/apache/pulsar/pull/7387)\n+- Cleanup already deleted namespace topics when remove cluster [#7473](https://github.com/apache/pulsar/pull/7473)\n+- Support partitioned topics in the Reader [#7518](https://github.com/apache/pulsar/pull/7518)\n+- Support partitioned topic lookup [#7605](https://github.com/apache/pulsar/pull/7605)\n+- Make OrderedExecutor threads number configurable [#7765](https://github.com/apache/pulsar/pull/7765)\n+- Add config to lazily recover cursors when recovering a managed ledger [#7858](https://github.com/apache/pulsar/pull/7858)\n+- Make BookKeeper throttle configurable [#7901](https://github.com/apache/pulsar/pull/7901)\n+- Report compacted topic ledger info when calling get internal stats [#7988](https://github.com/apache/pulsar/pull/7988)\n+- Add broker config to enforce producer to publish encrypted message [#8055](https://github.com/apache/pulsar/pull/8055)\n+- Expose ensemble placement policy in bookkeeper.conf [#8210](https://github.com/apache/pulsar/pull/8210)\n+- Support limit topic publish rate at the broker level [#8235](https://github.com/apache/pulsar/pull/8235)\n+- Support limit the max tenants of the Pulsar cluster [#8261](https://github.com/apache/pulsar/pull/8261)\n+- Support limit the max namespaces per tenant [#8267](https://github.com/apache/pulsar/pull/8267)\n+- Support limit max subscriptions per topic [#8289](https://github.com/apache/pulsar/pull/8289)\n+- Added metrics for topic lookups operations [#8272](https://github.com/apache/pulsar/pull/8272)\n+- Added REST handler for broker ready probe [#8303](https://github.com/apache/pulsar/pull/8303)\n+- Configure namespace anti-affinity in local policies [#8349](https://github.com/apache/pulsar/pull/8349)\n+- Handle hash collision in KeyShared subscription mode [#8396](https://github.com/apache/pulsar/pull/8396)\n+- Configure maxMsgReplDelayInSeconds for each repl-cluster [#8409](https://github.com/apache/pulsar/pull/8409)\n+- Support taking de-duplication snapshots based on time [#8474](https://github.com/apache/pulsar/pull/8474)\n+- Support namespace-level duplication snapshot [#8506](https://github.com/apache/pulsar/pull/8506)\n+- Expose consumer names after the mark delete position for the Key_Shared subscription [#8545](https://github.com/apache/pulsar/pull/8545)\n+- Close topics that remain fenced forcefully [#8561](https://github.com/apache/pulsar/pull/8561)\n+\n+#### Functions\n+\n+- Separate out FunctionMetadata related helper functions [#7146](https://github.com/apache/pulsar/pull/7146)\n+- Attach names for all producers/readers in worker service [#7165](https://github.com/apache/pulsar/pull/7165)\n+- Add support to read compacted topic [#7193](https://github.com/apache/pulsar/pull/7193)\n+- Re-work Function MetaDataManager to make all metadata writes only by the leader [#7255](https://github.com/apache/pulsar/pull/7255)\n+- Fix leader/scheduler assignment processing lag problem [#7237](https://github.com/apache/pulsar/pull/7237)\n+- Set source spec's negativeacktimeout as well as timeout [#7337](https://github.com/apache/pulsar/pull/7337)\n+- Add an endpoint to check whether function worker service is initialized [#7350](https://github.com/apache/pulsar/pull/7350)\n+- Functions metadata compaction [#7377](https://github.com/apache/pulsar/pull/7377)\n+- Implement rebalance mechanism [#7388](https://github.com/apache/pulsar/pull/7388)\n+- Improve security setting [#7424](https://github.com/apache/pulsar/pull/7424)\n+- Allow function rebalance to be run periodically [#7449](https://github.com/apache/pulsar/pull/7449)\n+- Log scheduler stats for Pulsar Functions [#7474](https://github.com/apache/pulsar/pull/7474)\n+- Add BatchPushSource interface [#7493](https://github.com/apache/pulsar/pull/7493)\n+- Rejigger contract between LeaderService and rest of components [#7520](https://github.com/apache/pulsar/pull/7520)\n+- Allow null consume in BatchPushSource [#7573](https://github.com/apache/pulsar/pull/7573)\n+- Add readiness api for the worker leader [#7601](https://github.com/apache/pulsar/pull/7601)\n+- Reduce in the leader init time in Pulsar Functions [#7611](https://github.com/apache/pulsar/pull/7611)\n+- Export Function worker internal stats via Prometheus [#7641](https://github.com/apache/pulsar/pull/7641)\n+- Allow ability to specify retain key ordering in functions [#7647](https://github.com/apache/pulsar/pull/7647)\n+- Added ability to specify runtime for localrunner [#7681](https://github.com/apache/pulsar/pull/7681)\n+- Add additional metrics for Pulsar Function Worker [#7685](https://github.com/apache/pulsar/pull/7685)\n+- Use available cores for io thread processing [#7689](https://github.com/apache/pulsar/pull/7689)\n+- Added ability to specify producer config for functions and sources [#7721](https://github.com/apache/pulsar/pull/7721)\n+- Allow the option to make producers thread local [#7764](https://github.com/apache/pulsar/pull/7764)\n+- Add ability for BatchPushSource to notify errors asynchronously [#7865](https://github.com/apache/pulsar/pull/7865)\n+- Allow ability to specify sub position in functions [#7891](https://github.com/apache/pulsar/pull/7891)\n+- Add hostname to consumer/producer properties in Pulsar Functions [#7897](https://github.com/apache/pulsar/pull/7897)\n+- Allow specifying state storage url for Source/Sink localrun [#7930](https://github.com/apache/pulsar/pull/7930)\n+- Enable function worker JVM metrics to be reported via Prometheus [#8097](https://github.com/apache/pulsar/pull/8097)\n+- Add ability to specify EnvironmentBasedSecretsProvider in LocalRunner [#8098](https://github.com/apache/pulsar/pull/8098)\n+- Added ability to specify secrets class in localrunner builder [#8127](https://github.com/apache/pulsar/pull/8127)\n+- Add access to the current message from the function context [#8290](https://github.com/apache/pulsar/pull/8290)\n+- Enable e2e encryption for Pulsar Function [#8432](https://github.com/apache/pulsar/pull/8432)\n+- Support key_based batch builder for functions and sources [#8523](https://github.com/apache/pulsar/pull/8523)\n+- Refactor Context and State API to allow plugging different state store implementations [#8537](https://github.com/apache/pulsar/pull/8537)\n+\n+#### IO Connectors", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "75cb78369e539a47ed2e5ffa6bbb577b8a8c3f92"}, "originalPosition": 118}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTY1MTQ4MA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            - [Broker] Fixed race condition on deleting topic with active readers [#7715](https://github.com/apache/pulsar/pull/7715)\n          \n          \n            \n            - [Broker] Fix race condition on deleting topic with active readers [#7715](https://github.com/apache/pulsar/pull/7715)", "url": "https://github.com/apache/pulsar/pull/8675#discussion_r529651480", "createdAt": "2020-11-24T15:39:45Z", "author": {"login": "Huanli-Meng"}, "path": "site2/website/release-notes.md", "diffHunk": "@@ -1,11 +1,180 @@\n \n ## Apache Pulsar Release Notes\n \n-### 2.7.0 &mdash; Not Yet Released <a id=\u201c2.7.0\u201d></a>\n+### 2.7.0 &mdash; 2020-11-25 <a id=\u201c2.7.0\u201d></a>\n+\n+The following lists fixes and enhancements in the 2.7.0 release.\n+\n+#### Transactions\n+\n+- Implementation of Transaction Buffer Client [#6544](https://github.com/apache/pulsar/pull/6544)\n+- Support produce messages with transaction and commit transaction [#7552](https://github.com/apache/pulsar/pull/7552)\n+- Support consume transaction messages [#7781](https://github.com/apache/pulsar/pull/7781) [#7833](https://github.com/apache/pulsar/pull/7833)\n+- Message acknowledgment with transaction [#7856](https://github.com/apache/pulsar/pull/7856) [#8007](https://github.com/apache/pulsar/pull/8007)\n+- Support transaction abort on partition [#7953](https://github.com/apache/pulsar/pull/7953)\n+- Support transaction abort on subscription [#7979](https://github.com/apache/pulsar/pull/7979)\n+- Handle pending ack at the client side [#8037](https://github.com/apache/pulsar/pull/8037)\n+- Pending ack state implementation [#8426](https://github.com/apache/pulsar/pull/8426)\n+- Support get reponse for message acknowledge [#8161](https://github.com/apache/pulsar/pull/8161)\n+- Refactor the transaction buffer implementation [#8291](https://github.com/apache/pulsar/pull/8291) [#8347](https://github.com/apache/pulsar/pull/8347)\n+- Transaction marker deletion [#8318](https://github.com/apache/pulsar/pull/8318)\n+- Support produce messages with transaction in batch [#8415](https://github.com/apache/pulsar/pull/8415)\n+- Register transaction metadata before send or ack messages [#8493](https://github.com/apache/pulsar/pull/8493)\n+- Expose transaction interface [#8505](https://github.com/apache/pulsar/pull/8505)\n+- Guarantee transaction metadata handlers connected [#8563](https://github.com/apache/pulsar/pull/8563)\n+- Add the batch size in transaction ack command [#8659](https://github.com/apache/pulsar/pull/8659)\n+- Transaction Log implementation [#8658](https://github.com/apache/pulsar/pull/8658)\n+\n+#### Topic policy\n+\n+- Support set message TTL on topic level [#7738](https://github.com/apache/pulsar/pull/7738)\n+- Support set retention on topic level [#7747](https://github.com/apache/pulsar/pull/7747)\n+- Support set delayed delivery policy on topic level [#7784](https://github.com/apache/pulsar/pull/7784)\n+- Support set max unacked message per subscription on topic level [#7802](https://github.com/apache/pulsar/pull/7802)\n+- Support set persistence policie on topic level [#7817](https://github.com/apache/pulsar/pull/7817)\n+- Support set max unacked messages per consumer on topic level [#7818](https://github.com/apache/pulsar/pull/7818)\n+- Support set deduplication policy on topic level [#7821](https://github.com/apache/pulsar/pull/7821)\n+- support set message dispatch rate on topic level [#7863](https://github.com/apache/pulsar/pull/7863))\n+- Support set compaction threshold on topic level [#7881](https://github.com/apache/pulsar/pull/7881)\n+- Support set offload policy on topic level [#7883](https://github.com/apache/pulsar/pull/7883)\n+- Support set max producers for a topic [#7914](https://github.com/apache/pulsar/pull/7914)\n+- Support set max consumers for a topic [#7968](https://github.com/apache/pulsar/pull/7968)\n+- Support set publish rate limitation for a topic [#7948](https://github.com/apache/pulsar/pull/7948)\n+- Support set inactive topic policy on topic level [#7986](https://github.com/apache/pulsar/pull/7986)\n+- Support set subscribe rate for a topic [#7991](https://github.com/apache/pulsar/pull/7991)\n+- Support set max consumers per subscription on topic level [#8003](https://github.com/apache/pulsar/pull/8003)\n+- Support set subscription dispatch rate on topic level [#8087](https://github.com/apache/pulsar/pull/8087)\n+- Support set deduplication snapshot interval on topic level [#8552](https://github.com/apache/pulsar/pull/8552)\n \n-##### Upgrade notes\n+#### Broker\n+\n+- Upgrade BookKeeper version to 4.12.0 [#8447](https://github.com/apache/pulsar/pull/8447)\n+- Capture the add entry latency of managed-ledger [#4419](https://github.com/apache/pulsar/pull/4419)\n+- Keep max-concurrent http web-request configurable [#7250](https://github.com/apache/pulsar/pull/7250)\n+- Perform the unload in background after bundle split [#7387](https://github.com/apache/pulsar/pull/7387)\n+- Cleanup already deleted namespace topics when remove cluster [#7473](https://github.com/apache/pulsar/pull/7473)\n+- Support partitioned topics in the Reader [#7518](https://github.com/apache/pulsar/pull/7518)\n+- Support partitioned topic lookup [#7605](https://github.com/apache/pulsar/pull/7605)\n+- Make OrderedExecutor threads number configurable [#7765](https://github.com/apache/pulsar/pull/7765)\n+- Add config to lazily recover cursors when recovering a managed ledger [#7858](https://github.com/apache/pulsar/pull/7858)\n+- Make BookKeeper throttle configurable [#7901](https://github.com/apache/pulsar/pull/7901)\n+- Report compacted topic ledger info when calling get internal stats [#7988](https://github.com/apache/pulsar/pull/7988)\n+- Add broker config to enforce producer to publish encrypted message [#8055](https://github.com/apache/pulsar/pull/8055)\n+- Expose ensemble placement policy in bookkeeper.conf [#8210](https://github.com/apache/pulsar/pull/8210)\n+- Support limit topic publish rate at the broker level [#8235](https://github.com/apache/pulsar/pull/8235)\n+- Support limit the max tenants of the Pulsar cluster [#8261](https://github.com/apache/pulsar/pull/8261)\n+- Support limit the max namespaces per tenant [#8267](https://github.com/apache/pulsar/pull/8267)\n+- Support limit max subscriptions per topic [#8289](https://github.com/apache/pulsar/pull/8289)\n+- Added metrics for topic lookups operations [#8272](https://github.com/apache/pulsar/pull/8272)\n+- Added REST handler for broker ready probe [#8303](https://github.com/apache/pulsar/pull/8303)\n+- Configure namespace anti-affinity in local policies [#8349](https://github.com/apache/pulsar/pull/8349)\n+- Handle hash collision in KeyShared subscription mode [#8396](https://github.com/apache/pulsar/pull/8396)\n+- Configure maxMsgReplDelayInSeconds for each repl-cluster [#8409](https://github.com/apache/pulsar/pull/8409)\n+- Support taking de-duplication snapshots based on time [#8474](https://github.com/apache/pulsar/pull/8474)\n+- Support namespace-level duplication snapshot [#8506](https://github.com/apache/pulsar/pull/8506)\n+- Expose consumer names after the mark delete position for the Key_Shared subscription [#8545](https://github.com/apache/pulsar/pull/8545)\n+- Close topics that remain fenced forcefully [#8561](https://github.com/apache/pulsar/pull/8561)\n+\n+#### Functions\n+\n+- Separate out FunctionMetadata related helper functions [#7146](https://github.com/apache/pulsar/pull/7146)\n+- Attach names for all producers/readers in worker service [#7165](https://github.com/apache/pulsar/pull/7165)\n+- Add support to read compacted topic [#7193](https://github.com/apache/pulsar/pull/7193)\n+- Re-work Function MetaDataManager to make all metadata writes only by the leader [#7255](https://github.com/apache/pulsar/pull/7255)\n+- Fix leader/scheduler assignment processing lag problem [#7237](https://github.com/apache/pulsar/pull/7237)\n+- Set source spec's negativeacktimeout as well as timeout [#7337](https://github.com/apache/pulsar/pull/7337)\n+- Add an endpoint to check whether function worker service is initialized [#7350](https://github.com/apache/pulsar/pull/7350)\n+- Functions metadata compaction [#7377](https://github.com/apache/pulsar/pull/7377)\n+- Implement rebalance mechanism [#7388](https://github.com/apache/pulsar/pull/7388)\n+- Improve security setting [#7424](https://github.com/apache/pulsar/pull/7424)\n+- Allow function rebalance to be run periodically [#7449](https://github.com/apache/pulsar/pull/7449)\n+- Log scheduler stats for Pulsar Functions [#7474](https://github.com/apache/pulsar/pull/7474)\n+- Add BatchPushSource interface [#7493](https://github.com/apache/pulsar/pull/7493)\n+- Rejigger contract between LeaderService and rest of components [#7520](https://github.com/apache/pulsar/pull/7520)\n+- Allow null consume in BatchPushSource [#7573](https://github.com/apache/pulsar/pull/7573)\n+- Add readiness api for the worker leader [#7601](https://github.com/apache/pulsar/pull/7601)\n+- Reduce in the leader init time in Pulsar Functions [#7611](https://github.com/apache/pulsar/pull/7611)\n+- Export Function worker internal stats via Prometheus [#7641](https://github.com/apache/pulsar/pull/7641)\n+- Allow ability to specify retain key ordering in functions [#7647](https://github.com/apache/pulsar/pull/7647)\n+- Added ability to specify runtime for localrunner [#7681](https://github.com/apache/pulsar/pull/7681)\n+- Add additional metrics for Pulsar Function Worker [#7685](https://github.com/apache/pulsar/pull/7685)\n+- Use available cores for io thread processing [#7689](https://github.com/apache/pulsar/pull/7689)\n+- Added ability to specify producer config for functions and sources [#7721](https://github.com/apache/pulsar/pull/7721)\n+- Allow the option to make producers thread local [#7764](https://github.com/apache/pulsar/pull/7764)\n+- Add ability for BatchPushSource to notify errors asynchronously [#7865](https://github.com/apache/pulsar/pull/7865)\n+- Allow ability to specify sub position in functions [#7891](https://github.com/apache/pulsar/pull/7891)\n+- Add hostname to consumer/producer properties in Pulsar Functions [#7897](https://github.com/apache/pulsar/pull/7897)\n+- Allow specifying state storage url for Source/Sink localrun [#7930](https://github.com/apache/pulsar/pull/7930)\n+- Enable function worker JVM metrics to be reported via Prometheus [#8097](https://github.com/apache/pulsar/pull/8097)\n+- Add ability to specify EnvironmentBasedSecretsProvider in LocalRunner [#8098](https://github.com/apache/pulsar/pull/8098)\n+- Added ability to specify secrets class in localrunner builder [#8127](https://github.com/apache/pulsar/pull/8127)\n+- Add access to the current message from the function context [#8290](https://github.com/apache/pulsar/pull/8290)\n+- Enable e2e encryption for Pulsar Function [#8432](https://github.com/apache/pulsar/pull/8432)\n+- Support key_based batch builder for functions and sources [#8523](https://github.com/apache/pulsar/pull/8523)\n+- Refactor Context and State API to allow plugging different state store implementations [#8537](https://github.com/apache/pulsar/pull/8537)\n+\n+#### IO Connectors\n+\n+- [HDFS] Add config to create sub directory from current time [#7771](https://github.com/apache/pulsar/pull/7771)\n+- [NSQ] Add NSQ Source [#8372](https://github.com/apache/pulsar/pull/8372)\n+\n+#### Schema\n+\n+- Add java8 date and time type to primitive schemas [#7874](https://github.com/apache/pulsar/pull/7874)\n+- Native protobuf schema support [#7874](https://github.com/apache/pulsar/pull/7874)\n+- Refactor multi-version schema reader [#8464](https://github.com/apache/pulsar/pull/8464)\n+\n+#### Tiered storage \n+- Support Azure BlobStore offload [#8436](https://github.com/apache/pulsar/pull/8436)\n+\n+#### Clients\n+\n+- [Java] Support acknowledging a list of messages [#7688](https://github.com/apache/pulsar/pull/7688)\n+- [Java] Remove UUID generation on sending message [#7705](https://github.com/apache/pulsar/pull/7705)\n+- [Java] Perform producer compression from IO threads [#7733](https://github.com/apache/pulsar/pull/7733)\n+- [C++] Allow to configure KeyShared with out of order delivery [#7842](https://github.com/apache/pulsar/pull/7842)\n+- [Java] Await thread pool termination when closing Pulsar client [#7962](https://github.com/apache/pulsar/pull/7962)\n+- [Java] Support non-durable subscription for pulsar-client cli [#8100](https://github.com/apache/pulsar/pull/8100)\n+- [Java] Cancel producer sendtimeout task after creation failure [#8497](https://github.com/apache/pulsar/pull/8497)\n+- [cgo] Remove CGO client from repo [#8514](https://github.com/apache/pulsar/pull/8514)\n+\n+\n+#### Admin\n+\n+- [Pulsar Admin] support config request timeout [#7698](https://github.com/apache/pulsar/pull/7698)\n+- [Pulsar Admin] Ensure deleting a partitioned-topic on a non existing namespace returns 404  [#7777](https://github.com/apache/pulsar/pull/7777)\n+- [Pulsar Admin] Added support to force deleting namespace [#7993](https://github.com/apache/pulsar/pull/7993)\n+- [Pulsar Admin] Allow to get ledger metadata along with topic stats-internal [#8180](https://github.com/apache/pulsar/pull/8180)\n+- [Pulsar Admin] Support remove namespace level offload policy [#8446](https://github.com/apache/pulsar/pull/8446)\n+- [Pulsar Admin] Suport get list of bundles under a namespace [#8450](https://github.com/apache/pulsar/pull/8450)\n+- [Pulsar Admin] Add ability to examine specific message by position relative to earliest or latest message [#8494](https://github.com/apache/pulsar/pull/8494)\n+- [Pulsar Admin] Add key-shared consumer range to internal topic stats [#8567](https://github.com/apache/pulsar/pull/8567)\n+\n+#### Fixes\n \n-* [IO] If Function Authorization is enabled, users have to be given the source/sink entitlement to run them. See https://github.com/apache/pulsar/pull/7466\n+- [Java Client] Fix connection leak [#6524](https://github.com/apache/pulsar/pull/6524)\n+- [Broker] Prevent redirection of lookup requests from looping [#7200](https://github.com/apache/pulsar/pull/7200)\n+- [Broker] Ensure that admin operations are gated by super user check [#7226](https://github.com/apache/pulsar/pull/7226)\n+- [Broker] Fix race condition when delete topic forcelly [#7356](https://github.com/apache/pulsar/pull/7356)\n+- [Tiered Storage] Fix NPE when offload data to GCS [#7400](https://github.com/apache/pulsar/pull/7400)\n+- [Function]Fix race condition in which exitFuture in FunctionAssignmentTailer never gets completed even though the tailer thread has exited [#7351](https://github.com/apache/pulsar/pull/7351)\n+- [Function] Various fixes and optimizations for processing assignments in function worker [#7338](https://github.com/apache/pulsar/pull/7338)\n+- [Function] Fixed deadlock between create function and leader initialization [#7508](https://github.com/apache/pulsar/pull/7508)\n+- [Pulsar Admin] Fix exceptions being ignored in PulsarAdmin [#7510](https://github.com/apache/pulsar/pull/7510)\n+- [Broker] Fix the nondurable consumer can not specify the initial position [#7702](https://github.com/apache/pulsar/pull/7702)\n+- [Broker] Fixed race condition on deleting topic with active readers [#7715](https://github.com/apache/pulsar/pull/7715)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "75cb78369e539a47ed2e5ffa6bbb577b8a8c3f92"}, "originalPosition": 168}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTY1MjgwNw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            - Implementation of Transaction Buffer Client [#6544](https://github.com/apache/pulsar/pull/6544)\n          \n          \n            \n            - Implement the transaction Buffer Client [#6544](https://github.com/apache/pulsar/pull/6544)", "url": "https://github.com/apache/pulsar/pull/8675#discussion_r529652807", "createdAt": "2020-11-24T15:40:37Z", "author": {"login": "Huanli-Meng"}, "path": "site2/website/release-notes.md", "diffHunk": "@@ -1,11 +1,180 @@\n \n ## Apache Pulsar Release Notes\n \n-### 2.7.0 &mdash; Not Yet Released <a id=\u201c2.7.0\u201d></a>\n+### 2.7.0 &mdash; 2020-11-25 <a id=\u201c2.7.0\u201d></a>\n+\n+The following lists fixes and enhancements in the 2.7.0 release.\n+\n+#### Transactions\n+\n+- Implementation of Transaction Buffer Client [#6544](https://github.com/apache/pulsar/pull/6544)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "75cb78369e539a47ed2e5ffa6bbb577b8a8c3f92"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTY1MzU0Nw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            - Transaction Log implementation [#8658](https://github.com/apache/pulsar/pull/8658)\n          \n          \n            \n            - Implement the transaction log [#8658](https://github.com/apache/pulsar/pull/8658)", "url": "https://github.com/apache/pulsar/pull/8675#discussion_r529653547", "createdAt": "2020-11-24T15:41:09Z", "author": {"login": "Huanli-Meng"}, "path": "site2/website/release-notes.md", "diffHunk": "@@ -1,11 +1,180 @@\n \n ## Apache Pulsar Release Notes\n \n-### 2.7.0 &mdash; Not Yet Released <a id=\u201c2.7.0\u201d></a>\n+### 2.7.0 &mdash; 2020-11-25 <a id=\u201c2.7.0\u201d></a>\n+\n+The following lists fixes and enhancements in the 2.7.0 release.\n+\n+#### Transactions\n+\n+- Implementation of Transaction Buffer Client [#6544](https://github.com/apache/pulsar/pull/6544)\n+- Support produce messages with transaction and commit transaction [#7552](https://github.com/apache/pulsar/pull/7552)\n+- Support consume transaction messages [#7781](https://github.com/apache/pulsar/pull/7781) [#7833](https://github.com/apache/pulsar/pull/7833)\n+- Message acknowledgment with transaction [#7856](https://github.com/apache/pulsar/pull/7856) [#8007](https://github.com/apache/pulsar/pull/8007)\n+- Support transaction abort on partition [#7953](https://github.com/apache/pulsar/pull/7953)\n+- Support transaction abort on subscription [#7979](https://github.com/apache/pulsar/pull/7979)\n+- Handle pending ack at the client side [#8037](https://github.com/apache/pulsar/pull/8037)\n+- Pending ack state implementation [#8426](https://github.com/apache/pulsar/pull/8426)\n+- Support get reponse for message acknowledge [#8161](https://github.com/apache/pulsar/pull/8161)\n+- Refactor the transaction buffer implementation [#8291](https://github.com/apache/pulsar/pull/8291) [#8347](https://github.com/apache/pulsar/pull/8347)\n+- Transaction marker deletion [#8318](https://github.com/apache/pulsar/pull/8318)\n+- Support produce messages with transaction in batch [#8415](https://github.com/apache/pulsar/pull/8415)\n+- Register transaction metadata before send or ack messages [#8493](https://github.com/apache/pulsar/pull/8493)\n+- Expose transaction interface [#8505](https://github.com/apache/pulsar/pull/8505)\n+- Guarantee transaction metadata handlers connected [#8563](https://github.com/apache/pulsar/pull/8563)\n+- Add the batch size in transaction ack command [#8659](https://github.com/apache/pulsar/pull/8659)\n+- Transaction Log implementation [#8658](https://github.com/apache/pulsar/pull/8658)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "75cb78369e539a47ed2e5ffa6bbb577b8a8c3f92"}, "originalPosition": 27}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM3NjU2MTE2", "url": "https://github.com/apache/pulsar/pull/8675#pullrequestreview-537656116", "createdAt": "2020-11-24T15:54:59Z", "commit": {"oid": "75cb78369e539a47ed2e5ffa6bbb577b8a8c3f92"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8bcf624734ab747f9fa460c0490ab6e05e9f8b83", "author": {"user": {"login": "codelipenghui", "name": "lipenghui"}}, "url": "https://github.com/apache/pulsar/commit/8bcf624734ab747f9fa460c0490ab6e05e9f8b83", "committedDate": "2020-12-03T00:56:34Z", "message": "Apply comment"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 962, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}