{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI3NTkyNjA2", "number": 7165, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQwNToxNTo0N1rOECaHrg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQxODozODoyMVrOECr9bA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwOTYwNTU4OnYy", "diffSide": "RIGHT", "path": "pulsar-functions/worker/src/main/java/org/apache/pulsar/functions/worker/FunctionMetaDataManager.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQwNToxNTo0N1rOGe2HDQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQwNTowNzo1NVrOGfgjzw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDk5NzAwNQ==", "bodyText": "I don't know if its needed to add \"-function-metadata-manager\".  I would say that this information as a property e.g. component: function-metadata-manager but properties is not exposed for the reader", "url": "https://github.com/apache/pulsar/pull/7165#discussion_r434997005", "createdAt": "2020-06-04T05:15:47Z", "author": {"login": "jerrypeng"}, "path": "pulsar-functions/worker/src/main/java/org/apache/pulsar/functions/worker/FunctionMetaDataManager.java", "diffHunk": "@@ -91,6 +91,7 @@ public void initialize() {\n             Reader<byte[]> reader = pulsarClient.newReader()\n                     .topic(this.workerConfig.getFunctionMetadataTopic())\n                     .startMessageId(MessageId.earliest)\n+                    .readerName(workerConfig.getWorkerId() + \"-function-metadata-manager\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3d73e65302239e07090f97e8e14a37cbbb40220a"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAwMjcyNw==", "bodyText": "I would rather prefer it to be more specific than just assumed.", "url": "https://github.com/apache/pulsar/pull/7165#discussion_r435002727", "createdAt": "2020-06-04T05:36:35Z", "author": {"login": "srkukarni"}, "path": "pulsar-functions/worker/src/main/java/org/apache/pulsar/functions/worker/FunctionMetaDataManager.java", "diffHunk": "@@ -91,6 +91,7 @@ public void initialize() {\n             Reader<byte[]> reader = pulsarClient.newReader()\n                     .topic(this.workerConfig.getFunctionMetadataTopic())\n                     .startMessageId(MessageId.earliest)\n+                    .readerName(workerConfig.getWorkerId() + \"-function-metadata-manager\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDk5NzAwNQ=="}, "originalCommit": {"oid": "3d73e65302239e07090f97e8e14a37cbbb40220a"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTY5MjQ5NQ==", "bodyText": "I meant to add it here\ncan you also add\n\n.subscriptionRolePrefix(workerConfig.getWorkerId())", "url": "https://github.com/apache/pulsar/pull/7165#discussion_r435692495", "createdAt": "2020-06-05T05:07:55Z", "author": {"login": "jerrypeng"}, "path": "pulsar-functions/worker/src/main/java/org/apache/pulsar/functions/worker/FunctionMetaDataManager.java", "diffHunk": "@@ -91,6 +91,7 @@ public void initialize() {\n             Reader<byte[]> reader = pulsarClient.newReader()\n                     .topic(this.workerConfig.getFunctionMetadataTopic())\n                     .startMessageId(MessageId.earliest)\n+                    .readerName(workerConfig.getWorkerId() + \"-function-metadata-manager\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDk5NzAwNQ=="}, "originalCommit": {"oid": "3d73e65302239e07090f97e8e14a37cbbb40220a"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcxMjUyODQ0OnYy", "diffSide": "RIGHT", "path": "pulsar-functions/worker/src/main/java/org/apache/pulsar/functions/worker/SchedulerManager.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQxODozODoyMVrOGfTCuw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQwMDoxNTo1OVrOGfcb5w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTQ3MTAzNQ==", "bodyText": "can you also add\n.subscriptionRolePrefix(workerConfig.getWorkerId())", "url": "https://github.com/apache/pulsar/pull/7165#discussion_r435471035", "createdAt": "2020-06-04T18:38:21Z", "author": {"login": "jerrypeng"}, "path": "pulsar-functions/worker/src/main/java/org/apache/pulsar/functions/worker/SchedulerManager.java", "diffHunk": "@@ -106,6 +106,7 @@ public SchedulerManager(WorkerConfig workerConfig, PulsarClient pulsarClient, Pu\n                                 .blockIfQueueFull(true)\n                                 .compressionType(CompressionType.LZ4)\n                                 .sendTimeout(0, TimeUnit.MILLISECONDS)\n+                                .producerName(config.getWorkerId() + \"-scheduler-manager\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "669793d77111975bc048b8f2afc1c9c7e00480fc"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTYyNDYxMA==", "bodyText": "Producer name needs to be unique, so we better put this in the producer properties instead.", "url": "https://github.com/apache/pulsar/pull/7165#discussion_r435624610", "createdAt": "2020-06-05T00:14:44Z", "author": {"login": "merlimat"}, "path": "pulsar-functions/worker/src/main/java/org/apache/pulsar/functions/worker/SchedulerManager.java", "diffHunk": "@@ -106,6 +106,7 @@ public SchedulerManager(WorkerConfig workerConfig, PulsarClient pulsarClient, Pu\n                                 .blockIfQueueFull(true)\n                                 .compressionType(CompressionType.LZ4)\n                                 .sendTimeout(0, TimeUnit.MILLISECONDS)\n+                                .producerName(config.getWorkerId() + \"-scheduler-manager\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTQ3MTAzNQ=="}, "originalCommit": {"oid": "669793d77111975bc048b8f2afc1c9c7e00480fc"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTYyNDkzNQ==", "bodyText": "Actually, in this case it should be good since there's only 1 writer.", "url": "https://github.com/apache/pulsar/pull/7165#discussion_r435624935", "createdAt": "2020-06-05T00:15:59Z", "author": {"login": "merlimat"}, "path": "pulsar-functions/worker/src/main/java/org/apache/pulsar/functions/worker/SchedulerManager.java", "diffHunk": "@@ -106,6 +106,7 @@ public SchedulerManager(WorkerConfig workerConfig, PulsarClient pulsarClient, Pu\n                                 .blockIfQueueFull(true)\n                                 .compressionType(CompressionType.LZ4)\n                                 .sendTimeout(0, TimeUnit.MILLISECONDS)\n+                                .producerName(config.getWorkerId() + \"-scheduler-manager\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTQ3MTAzNQ=="}, "originalCommit": {"oid": "669793d77111975bc048b8f2afc1c9c7e00480fc"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1716, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}