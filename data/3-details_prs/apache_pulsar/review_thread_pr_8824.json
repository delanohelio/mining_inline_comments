{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMyMzMwMjE5", "number": 8824, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQwNzo1MDoyMVrOFAq45A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQwNzo1MDoyMVrOFAq45A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM2MjQ3MDEyOnYy", "diffSide": "RIGHT", "path": "pulsar-functions/runtime/src/main/java/org/apache/pulsar/functions/worker/WorkerConfig.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQwNzo1MDoyMVrOH_Evhg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQwODowNTo1N1rOH_FORQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTkwMDAzOA==", "bodyText": "Don't use boolean. This would cause a compatibility issue. The worker service is not able to start with an old configuration.\nUse boxed Boolean.\nprivate Boolean brokerClientAuthenticationEnabled = null;\n\nThen add an implementation isBrokerClientAuthenticationEnabled to check if brokerClientAuthenticationEnabled is set or not. If brokerClientAuthenticationEnabled is not set, fall back to use authenticationEnabled.\npublic boolean isBrokerClientAuthenticationEnabled() {\n    if (brokerClientAuthenticationEnabled != null) {\n        return brokerClientAuthenticationEnabled;\n    } else {\n        return authenticationEnabled;\n    }\n}", "url": "https://github.com/apache/pulsar/pull/8824#discussion_r535900038", "createdAt": "2020-12-04T07:50:21Z", "author": {"login": "sijie"}, "path": "pulsar-functions/runtime/src/main/java/org/apache/pulsar/functions/worker/WorkerConfig.java", "diffHunk": "@@ -273,6 +273,11 @@\n         doc = \"The frequency of instance liveness check, in milliseconds\"\n     )\n     private long instanceLivenessCheckFreqMs;\n+    @FieldContext(\n+            category = CATEGORY_CLIENT_SECURITY,\n+            doc = \"Whether to enable the broker client authentication used by function workers to talk to brokers\"\n+    )\n+    private boolean brokerClientAuthenticationEnabled = false;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ea3adcff255e62950dc4b26288bfe1ec6ddeaa48"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTkwNzkwOQ==", "bodyText": "@sijie Done.", "url": "https://github.com/apache/pulsar/pull/8824#discussion_r535907909", "createdAt": "2020-12-04T08:05:57Z", "author": {"login": "nodece"}, "path": "pulsar-functions/runtime/src/main/java/org/apache/pulsar/functions/worker/WorkerConfig.java", "diffHunk": "@@ -273,6 +273,11 @@\n         doc = \"The frequency of instance liveness check, in milliseconds\"\n     )\n     private long instanceLivenessCheckFreqMs;\n+    @FieldContext(\n+            category = CATEGORY_CLIENT_SECURITY,\n+            doc = \"Whether to enable the broker client authentication used by function workers to talk to brokers\"\n+    )\n+    private boolean brokerClientAuthenticationEnabled = false;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTkwMDAzOA=="}, "originalCommit": {"oid": "ea3adcff255e62950dc4b26288bfe1ec6ddeaa48"}, "originalPosition": 8}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2658, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}