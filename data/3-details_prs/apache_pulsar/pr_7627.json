{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU1MDUyNTQw", "number": 7627, "title": "[doc] add cpp client document for oauth2 authentication", "bodyText": "Motivation\nRelated with #7606, which add oauth2 authentication in cpp.\nThis PR is to add cpp client document for oauth2 authentication.\nModifications\n\nAdd documentation.\nrename file name \"security-oauth\" to \"security-oauth2\"", "createdAt": "2020-07-22T11:17:03Z", "url": "https://github.com/apache/pulsar/pull/7627", "merged": true, "mergeCommit": {"oid": "83e853b12034f8117c284456887420cb77418c4a"}, "closed": true, "closedAt": "2020-07-24T00:37:04Z", "author": {"login": "jiazhai"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc3Y23bAH2gAyNDU1MDUyNTQwOmJkYzljZmY4NTc2NzM5NWQ3ZWEwZGYwNWJjMjgzNDUyMzNhYjdlOTE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc3lxoggFqTQ1Mzc5OTcxNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "bdc9cff85767395d7ea0df05bc28345233ab7e91", "author": {"user": {"login": "jiazhai", "name": "Jia Zhai"}}, "url": "https://github.com/apache/pulsar/commit/bdc9cff85767395d7ea0df05bc28345233ab7e91", "committedDate": "2020-07-22T11:09:34Z", "message": "add cpp example, rename file oauth to oauth2"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUzNDY0NjQw", "url": "https://github.com/apache/pulsar/pull/7627#pullrequestreview-453464640", "createdAt": "2020-07-22T16:04:43Z", "commit": {"oid": "bdc9cff85767395d7ea0df05bc28345233ab7e91"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxNjowNDo0M1rOG1pYdA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxNjowNTo0OFrOG1pbSg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODkwNTcxNg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            ### CPP\n          \n          \n            \n            ### C++ client", "url": "https://github.com/apache/pulsar/pull/7627#discussion_r458905716", "createdAt": "2020-07-22T16:04:43Z", "author": {"login": "Huanli-Meng"}, "path": "site2/docs/security-oauth2.md", "diffHunk": "@@ -74,20 +74,42 @@ You can use the Oauth2 authentication provider with the following Pulsar clients\n You can use the factory method to configure authentication for Pulsar Java client.\n \n ```java\n+String issuerUrl = \"https://dev-kt-aa9ne.us.auth0.com/oauth/token\";\n+String credentialsUrl = \"file:///path/to/KeyFile.json\";\n+String audience = \"https://dev-kt-aa9ne.us.auth0.com/api/v2/\";\n+\n PulsarClient client = PulsarClient.builder()\n     .serviceUrl(\"pulsar://broker.example.com:6650/\")\n     .authentication(\n-        AuthenticationFactoryOAuth2.clientCredentials(this.issuerUrl, this.credentialsUrl, this.audience))\n+        AuthenticationFactoryOAuth2.clientCredentials(issuerUrl, credentialsUrl, audience))\n     .build();\n ```\n \n In addition, you can also use the encoded parameters to configure authentication for Pulsar Java client.\n \n ```java\n Authentication auth = AuthenticationFactory\n-    .create(AuthenticationOAuth2.class.getName(), \"{\"type\":\"client_credentials\",\"privateKey\":\"...\",\"issuerUrl\":\"...\",\"audience\":\"...\"}\");\n+    .create(AuthenticationOAuth2.class.getName(), \"{\"type\":\"client_credentials\",\"privateKey\":\"./key/path/..\",\"issuerUrl\":\"...\",\"audience\":\"...\"}\");\n PulsarClient client = PulsarClient.builder()\n     .serviceUrl(\"pulsar://broker.example.com:6650/\")\n     .authentication(auth)\n     .build();\n-```\n\\ No newline at end of file\n+```\n+\n+### CPP", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bdc9cff85767395d7ea0df05bc28345233ab7e91"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODkwNjQ0Mg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Cpp client is similar to java client. user need to provide parameters of issuerUrl, private_key(which is the credentials file path), and audience.\n          \n          \n            \n            The C++ client is similar to the Java client. You need to provide parameters of `issuerUrl`, `private_key` (the credentials file path), and the audience.", "url": "https://github.com/apache/pulsar/pull/7627#discussion_r458906442", "createdAt": "2020-07-22T16:05:48Z", "author": {"login": "Huanli-Meng"}, "path": "site2/docs/security-oauth2.md", "diffHunk": "@@ -74,20 +74,42 @@ You can use the Oauth2 authentication provider with the following Pulsar clients\n You can use the factory method to configure authentication for Pulsar Java client.\n \n ```java\n+String issuerUrl = \"https://dev-kt-aa9ne.us.auth0.com/oauth/token\";\n+String credentialsUrl = \"file:///path/to/KeyFile.json\";\n+String audience = \"https://dev-kt-aa9ne.us.auth0.com/api/v2/\";\n+\n PulsarClient client = PulsarClient.builder()\n     .serviceUrl(\"pulsar://broker.example.com:6650/\")\n     .authentication(\n-        AuthenticationFactoryOAuth2.clientCredentials(this.issuerUrl, this.credentialsUrl, this.audience))\n+        AuthenticationFactoryOAuth2.clientCredentials(issuerUrl, credentialsUrl, audience))\n     .build();\n ```\n \n In addition, you can also use the encoded parameters to configure authentication for Pulsar Java client.\n \n ```java\n Authentication auth = AuthenticationFactory\n-    .create(AuthenticationOAuth2.class.getName(), \"{\"type\":\"client_credentials\",\"privateKey\":\"...\",\"issuerUrl\":\"...\",\"audience\":\"...\"}\");\n+    .create(AuthenticationOAuth2.class.getName(), \"{\"type\":\"client_credentials\",\"privateKey\":\"./key/path/..\",\"issuerUrl\":\"...\",\"audience\":\"...\"}\");\n PulsarClient client = PulsarClient.builder()\n     .serviceUrl(\"pulsar://broker.example.com:6650/\")\n     .authentication(auth)\n     .build();\n-```\n\\ No newline at end of file\n+```\n+\n+### CPP\n+\n+Cpp client is similar to java client. user need to provide parameters of issuerUrl, private_key(which is the credentials file path), and audience.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bdc9cff85767395d7ea0df05bc28345233ab7e91"}, "originalPosition": 39}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5dd92ddf0d4111e1b68f1992e503f1b19d6de33e", "author": {"user": {"login": "jiazhai", "name": "Jia Zhai"}}, "url": "https://github.com/apache/pulsar/commit/5dd92ddf0d4111e1b68f1992e503f1b19d6de33e", "committedDate": "2020-07-23T00:17:40Z", "message": "Update site2/docs/security-oauth2.md\n\nCo-authored-by: HuanliMeng <48120384+Huanli-Meng@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "27ac572801bfedd2d0bee2841e8b8002d9a58c2f", "author": {"user": {"login": "jiazhai", "name": "Jia Zhai"}}, "url": "https://github.com/apache/pulsar/commit/27ac572801bfedd2d0bee2841e8b8002d9a58c2f", "committedDate": "2020-07-23T00:17:50Z", "message": "Update site2/docs/security-oauth2.md\n\nCo-authored-by: HuanliMeng <48120384+Huanli-Meng@users.noreply.github.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUzNzk5NzE3", "url": "https://github.com/apache/pulsar/pull/7627#pullrequestreview-453799717", "createdAt": "2020-07-23T02:12:37Z", "commit": {"oid": "27ac572801bfedd2d0bee2841e8b8002d9a58c2f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 393, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}