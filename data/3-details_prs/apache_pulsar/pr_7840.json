{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY5NTU2MTU2", "number": 7840, "title": "[Client]Add autoPartitionsUpdateInterval for producer and consumer", "bodyText": "Motivation\nAdd auto partitions update interval setting for producer and consumer.\nModifications\n\nadd autoUpdatePartitionsInterval to partitioned producer and consumer\n\nVerifying this change\n\n Make sure that the change passes the CI checks.\n\nThis change is a trivial rework / code cleanup without any test coverage.\nDoes this pull request potentially affect one of the following parts:\n\nDependencies (does it add or upgrade a dependency): (no)\nThe public API: (no)\nThe schema: (no)\nThe default values of configurations: (no)\nThe wire protocol: (no)\nThe rest endpoints: (no)\nThe admin cli options: (no)\nAnything that affects deployment: (no)\n\nDocumentation\n\nDoes this pull request introduce a new feature? (yes)\nIf yes, how is the feature documented? (JavaDocs)", "createdAt": "2020-08-18T15:00:15Z", "url": "https://github.com/apache/pulsar/pull/7840", "merged": true, "mergeCommit": {"oid": "7d9319d844f21ed104c502bcc6c2b853b10ddc80"}, "closed": true, "closedAt": "2020-08-21T14:16:15Z", "author": {"login": "RobertIndie"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdAbVodAFqTQ3MDQzODE1OQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdBFffigFqTQ3MjUyNjg3Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcwNDM4MTU5", "url": "https://github.com/apache/pulsar/pull/7840#pullrequestreview-470438159", "createdAt": "2020-08-19T13:08:17Z", "commit": {"oid": "9868c9638216dd54c30087179c78f00cb45e5268"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOVQxMzowODoxN1rOHDGjOA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOVQxMzowODoxN1rOHDGjOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzAxNTA5Ng==", "bodyText": "interval > 0?", "url": "https://github.com/apache/pulsar/pull/7840#discussion_r473015096", "createdAt": "2020-08-19T13:08:17Z", "author": {"login": "jiazhai"}, "path": "pulsar-client/src/main/java/org/apache/pulsar/client/impl/conf/ProducerConfigurationData.java", "diffHunk": "@@ -163,4 +165,8 @@ public long batchingPartitionSwitchFrequencyIntervalMicros() {\n         return this.batchingPartitionSwitchFrequencyByPublishDelay * batchingMaxPublishDelayMicros;\n     }\n \n+    public void setAutoUpdatePartitionsIntervalMin(int interval, TimeUnit timeUnit) {\n+        checkArgument(interval >= 0, \"interval needs to be >= 0\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9868c9638216dd54c30087179c78f00cb45e5268"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcwNDQxNjU5", "url": "https://github.com/apache/pulsar/pull/7840#pullrequestreview-470441659", "createdAt": "2020-08-19T13:12:27Z", "commit": {"oid": "9868c9638216dd54c30087179c78f00cb45e5268"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOVQxMzoxMjoyN1rOHDGtmA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOVQxMzoxMjoyN1rOHDGtmA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzAxNzc1Mg==", "bodyText": "same here, > 0, would be easy to handle.", "url": "https://github.com/apache/pulsar/pull/7840#discussion_r473017752", "createdAt": "2020-08-19T13:12:27Z", "author": {"login": "jiazhai"}, "path": "pulsar-client/src/main/java/org/apache/pulsar/client/impl/conf/ConsumerConfigurationData.java", "diffHunk": "@@ -127,6 +129,11 @@\n \n     private boolean batchIndexAckEnabled = false;\n \n+    public void setAutoUpdatePartitionsIntervalMin(int interval, TimeUnit timeUnit) {\n+        checkArgument(interval >= 0, \"interval needs to be >= 0\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9868c9638216dd54c30087179c78f00cb45e5268"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcwNDUwODQw", "url": "https://github.com/apache/pulsar/pull/7840#pullrequestreview-470450840", "createdAt": "2020-08-19T13:22:05Z", "commit": {"oid": "9868c9638216dd54c30087179c78f00cb45e5268"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOVQxMzoyMjowNVrOHDHINg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOVQxMzoyMjowNVrOHDHINg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzAyNDU2Ng==", "bodyText": "autoUpdatePartitionsIntervalSeconds maybe better.", "url": "https://github.com/apache/pulsar/pull/7840#discussion_r473024566", "createdAt": "2020-08-19T13:22:05Z", "author": {"login": "jiazhai"}, "path": "pulsar-client/src/main/java/org/apache/pulsar/client/impl/conf/ProducerConfigurationData.java", "diffHunk": "@@ -95,6 +95,8 @@\n \n     private boolean autoUpdatePartitions = true;\n \n+    private long autoUpdatePartitionsIntervalMin = 1;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9868c9638216dd54c30087179c78f00cb45e5268"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxMjk5Nzgz", "url": "https://github.com/apache/pulsar/pull/7840#pullrequestreview-471299783", "createdAt": "2020-08-20T07:05:05Z", "commit": {"oid": "7143cc8dd1bc36bf80aa4cdc02ebf17a8073908a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "46818ab2d11f3b5a755550ee02e7e542f3c91124", "author": {"user": {"login": "RobertIndie", "name": "Zike Yang"}}, "url": "https://github.com/apache/pulsar/commit/46818ab2d11f3b5a755550ee02e7e542f3c91124", "committedDate": "2020-08-20T14:56:58Z", "message": "Merge remote-tracking branch 'origin/add-update-partitions-interval' into add-update-partitions-interval"}, "afterCommit": {"oid": "7143cc8dd1bc36bf80aa4cdc02ebf17a8073908a", "author": {"user": {"login": "RobertIndie", "name": "Zike Yang"}}, "url": "https://github.com/apache/pulsar/commit/7143cc8dd1bc36bf80aa4cdc02ebf17a8073908a", "committedDate": "2020-08-19T15:03:25Z", "message": "Add unit test for autoUpdatePartitionsInterval."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "05963aa8aa1d6aab005f47001d5db8705f369104", "author": {"user": {"login": "RobertIndie", "name": "Zike Yang"}}, "url": "https://github.com/apache/pulsar/commit/05963aa8aa1d6aab005f47001d5db8705f369104", "committedDate": "2020-08-20T16:00:18Z", "message": "Add autoUpdatePartitionsInterval property."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2d4030fc15d157a634114ecdff1667122c019939", "author": {"user": {"login": "RobertIndie", "name": "Zike Yang"}}, "url": "https://github.com/apache/pulsar/commit/2d4030fc15d157a634114ecdff1667122c019939", "committedDate": "2020-08-20T16:00:19Z", "message": "Add autoUpdatePartitionsInterval for consumer."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b73bb13e0f09f7421aeb6875e2419820a45d5feb", "author": {"user": {"login": "RobertIndie", "name": "Zike Yang"}}, "url": "https://github.com/apache/pulsar/commit/b73bb13e0f09f7421aeb6875e2419820a45d5feb", "committedDate": "2020-08-20T16:00:19Z", "message": "Fix checking argument in the config of producer and consumer."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "702bb6042e7e8fc5673a957f13d24324e8e069f2", "author": {"user": {"login": "RobertIndie", "name": "Zike Yang"}}, "url": "https://github.com/apache/pulsar/commit/702bb6042e7e8fc5673a957f13d24324e8e069f2", "committedDate": "2020-08-20T16:00:19Z", "message": "Change the unit of autoUpdatePartitionsInterval to second."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b4c6881e3880a12eaabeaac1a2c58aa4765e72dc", "author": {"user": {"login": "RobertIndie", "name": "Zike Yang"}}, "url": "https://github.com/apache/pulsar/commit/b4c6881e3880a12eaabeaac1a2c58aa4765e72dc", "committedDate": "2020-08-20T16:00:20Z", "message": "Add unit test for autoUpdatePartitionsInterval."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7143cc8dd1bc36bf80aa4cdc02ebf17a8073908a", "author": {"user": {"login": "RobertIndie", "name": "Zike Yang"}}, "url": "https://github.com/apache/pulsar/commit/7143cc8dd1bc36bf80aa4cdc02ebf17a8073908a", "committedDate": "2020-08-19T15:03:25Z", "message": "Add unit test for autoUpdatePartitionsInterval."}, "afterCommit": {"oid": "b4c6881e3880a12eaabeaac1a2c58aa4765e72dc", "author": {"user": {"login": "RobertIndie", "name": "Zike Yang"}}, "url": "https://github.com/apache/pulsar/commit/b4c6881e3880a12eaabeaac1a2c58aa4765e72dc", "committedDate": "2020-08-20T16:00:20Z", "message": "Add unit test for autoUpdatePartitionsInterval."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcyNTI2ODc2", "url": "https://github.com/apache/pulsar/pull/7840#pullrequestreview-472526876", "createdAt": "2020-08-21T14:15:05Z", "commit": {"oid": "b4c6881e3880a12eaabeaac1a2c58aa4765e72dc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 297, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}