{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIxMzczNjYy", "number": 7011, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxNjoxNjo1OVrOD-qSzA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQwNzo1NzoyNVrOD-3MTg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY3MDMxMjQ0OnYy", "diffSide": "LEFT", "path": "pulsar-broker/src/main/java/org/apache/pulsar/broker/service/BrokerService.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxNjoxNjo1OVrOGY5fSg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxODozODo0M1rOGY-VDQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODc2MDkwNg==", "bodyText": "This code was there to fallback to defaults in case there is no special offload policy for a given namespace. How is this behavior maintained?", "url": "https://github.com/apache/pulsar/pull/7011#discussion_r428760906", "createdAt": "2020-05-21T16:16:59Z", "author": {"login": "merlimat"}, "path": "pulsar-broker/src/main/java/org/apache/pulsar/broker/service/BrokerService.java", "diffHunk": "@@ -1062,17 +1062,6 @@ public void openLedgerFailed(ManagedLedgerException exception, Object ctx) {\n             managedLedgerConfig.setRetentionSizeInMB(retentionPolicies.getRetentionSizeInMB());\n             managedLedgerConfig.setAutoSkipNonRecoverableData(serviceConfig.isAutoSkipNonRecoverableData());\n             OffloadPolicies offloadPolicies = policies.map(p -> p.offload_policies).orElse(null);\n-\n-            if (offloadPolicies == null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bb1d9d0720bf8fdc08978b4d471e193ddad25486"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODc4ODk0Nw==", "bodyText": "It's handled by https://github.com/apache/pulsar/blob/master/pulsar-broker/src/main/java/org/apache/pulsar/broker/PulsarService.java#L813", "url": "https://github.com/apache/pulsar/pull/7011#discussion_r428788947", "createdAt": "2020-05-21T17:05:21Z", "author": {"login": "codelipenghui"}, "path": "pulsar-broker/src/main/java/org/apache/pulsar/broker/service/BrokerService.java", "diffHunk": "@@ -1062,17 +1062,6 @@ public void openLedgerFailed(ManagedLedgerException exception, Object ctx) {\n             managedLedgerConfig.setRetentionSizeInMB(retentionPolicies.getRetentionSizeInMB());\n             managedLedgerConfig.setAutoSkipNonRecoverableData(serviceConfig.isAutoSkipNonRecoverableData());\n             OffloadPolicies offloadPolicies = policies.map(p -> p.offload_policies).orElse(null);\n-\n-            if (offloadPolicies == null) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODc2MDkwNg=="}, "originalCommit": {"oid": "bb1d9d0720bf8fdc08978b4d471e193ddad25486"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODg0MDIwNQ==", "bodyText": "Got it. Thanks!", "url": "https://github.com/apache/pulsar/pull/7011#discussion_r428840205", "createdAt": "2020-05-21T18:38:43Z", "author": {"login": "merlimat"}, "path": "pulsar-broker/src/main/java/org/apache/pulsar/broker/service/BrokerService.java", "diffHunk": "@@ -1062,17 +1062,6 @@ public void openLedgerFailed(ManagedLedgerException exception, Object ctx) {\n             managedLedgerConfig.setRetentionSizeInMB(retentionPolicies.getRetentionSizeInMB());\n             managedLedgerConfig.setAutoSkipNonRecoverableData(serviceConfig.isAutoSkipNonRecoverableData());\n             OffloadPolicies offloadPolicies = policies.map(p -> p.offload_policies).orElse(null);\n-\n-            if (offloadPolicies == null) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODc2MDkwNg=="}, "originalCommit": {"oid": "bb1d9d0720bf8fdc08978b4d471e193ddad25486"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY3MjQyNTc0OnYy", "diffSide": "RIGHT", "path": "pulsar-broker/src/main/java/org/apache/pulsar/broker/PulsarService.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQwNzo1NzoyNVrOGZOIqA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQwODoyMDo1OVrOGZOyGg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTA5OTE3Ng==", "bodyText": "Since the purpose it's not obvious, can you add a comment on why we need this?", "url": "https://github.com/apache/pulsar/pull/7011#discussion_r429099176", "createdAt": "2020-05-22T07:57:25Z", "author": {"login": "merlimat"}, "path": "pulsar-broker/src/main/java/org/apache/pulsar/broker/PulsarService.java", "diffHunk": "@@ -539,6 +544,25 @@ public Boolean get() {\n         }\n     }\n \n+    private void generatePropertiesForConfigurationIfNeeded() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "014e6338286a1ea7c56e265090bf2b4c439d3bb3"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTEwOTc4Ng==", "bodyText": "Removed", "url": "https://github.com/apache/pulsar/pull/7011#discussion_r429109786", "createdAt": "2020-05-22T08:20:59Z", "author": {"login": "codelipenghui"}, "path": "pulsar-broker/src/main/java/org/apache/pulsar/broker/PulsarService.java", "diffHunk": "@@ -539,6 +544,25 @@ public Boolean get() {\n         }\n     }\n \n+    private void generatePropertiesForConfigurationIfNeeded() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTA5OTE3Ng=="}, "originalCommit": {"oid": "014e6338286a1ea7c56e265090bf2b4c439d3bb3"}, "originalPosition": 31}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1775, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}