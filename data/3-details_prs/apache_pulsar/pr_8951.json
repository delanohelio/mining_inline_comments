{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM5MzA4MDY3", "number": 8951, "title": "consumer support update stats with specified stats", "bodyText": "Fixes #8949\nMotivation\nreuse pulsar metric for KoP\nModifications\nexpose updateStats with ConsumerStats param, which could update stats specified stats.\nVerifying this change\n\n[\u221a] Make sure that the change passes the CI checks.", "createdAt": "2020-12-14T09:45:04Z", "url": "https://github.com/apache/pulsar/pull/8951", "merged": true, "mergeCommit": {"oid": "fcbc7ebe81da64c0e434254f421039c27dbc6058"}, "closed": true, "closedAt": "2020-12-15T17:39:56Z", "author": {"login": "dockerzhang"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdmC_TtgBqjQxMDgzODYyMjc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdmd8YAgFqTU1MjcwNzYwNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "30b1bf6657e24bfd16bd5e72d1860e6cd2d836f8", "author": {"user": null}, "url": "https://github.com/apache/pulsar/commit/30b1bf6657e24bfd16bd5e72d1860e6cd2d836f8", "committedDate": "2020-12-14T10:11:46Z", "message": "fix topic name for test"}, "afterCommit": {"oid": "49e7b1e1d46d85bc01afb40c4f720e461daa16e8", "author": {"user": null}, "url": "https://github.com/apache/pulsar/commit/49e7b1e1d46d85bc01afb40c4f720e461daa16e8", "committedDate": "2020-12-14T10:15:10Z", "message": "consumer support update stats with specified stats"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f81f3e6f893a95cdcd5ff791a5b1a9c871d37ed6", "author": {"user": null}, "url": "https://github.com/apache/pulsar/commit/f81f3e6f893a95cdcd5ff791a5b1a9c871d37ed6", "committedDate": "2020-12-14T12:35:29Z", "message": "consumer support update stats with specified stats"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "49e7b1e1d46d85bc01afb40c4f720e461daa16e8", "author": {"user": null}, "url": "https://github.com/apache/pulsar/commit/49e7b1e1d46d85bc01afb40c4f720e461daa16e8", "committedDate": "2020-12-14T10:15:10Z", "message": "consumer support update stats with specified stats"}, "afterCommit": {"oid": "f81f3e6f893a95cdcd5ff791a5b1a9c871d37ed6", "author": {"user": null}, "url": "https://github.com/apache/pulsar/commit/f81f3e6f893a95cdcd5ff791a5b1a9c871d37ed6", "committedDate": "2020-12-14T12:35:29Z", "message": "consumer support update stats with specified stats"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUyMDQ5MTIy", "url": "https://github.com/apache/pulsar/pull/8951#pullrequestreview-552049122", "createdAt": "2020-12-15T02:03:36Z", "commit": {"oid": "f81f3e6f893a95cdcd5ff791a5b1a9c871d37ed6"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQwMjowMzozNlrOIF1XOw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQwMjowMzozNlrOIF1XOw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Mjk4ODA5MQ==", "bodyText": "Is there anything related to seek? IMO, the test should move to org.apache.pulsar.broker.stats.ConsumerStatsTest", "url": "https://github.com/apache/pulsar/pull/8951#discussion_r542988091", "createdAt": "2020-12-15T02:03:36Z", "author": {"login": "BewareMyPower"}, "path": "pulsar-broker/src/test/java/org/apache/pulsar/broker/service/SubscriptionSeekTest.java", "diffHunk": "@@ -493,4 +494,29 @@ public void testOnlyCloseActiveConsumerForSingleActiveConsumerDispatcherWhenSeek\n         }\n         assertTrue(hasConsumerNotDisconnected);\n     }\n+\n+    @Test\n+    public void testUpdateStatsForSingleActiveConsumerDispatcherWhenSeek() throws Exception {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f81f3e6f893a95cdcd5ff791a5b1a9c871d37ed6"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fe7cbc47547401b487e23694c3c07f9c89bc4c53", "author": {"user": null}, "url": "https://github.com/apache/pulsar/commit/fe7cbc47547401b487e23694c3c07f9c89bc4c53", "committedDate": "2020-12-15T03:55:52Z", "message": "move UT to ConsumerStatsTest"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUyMTgxMzA2", "url": "https://github.com/apache/pulsar/pull/8951#pullrequestreview-552181306", "createdAt": "2020-12-15T07:50:04Z", "commit": {"oid": "fe7cbc47547401b487e23694c3c07f9c89bc4c53"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUyNzA3NjA2", "url": "https://github.com/apache/pulsar/pull/8951#pullrequestreview-552707606", "createdAt": "2020-12-15T17:39:33Z", "commit": {"oid": "fe7cbc47547401b487e23694c3c07f9c89bc4c53"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 937, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}