{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIzMTc0MDkz", "number": 8613, "title": "Support enable WebSocket on Pulsar Proxy.", "bodyText": "Motivation\nSupport enable WebSocket on Pulsar Proxy.\nVerifying this change\nIntegration tests added.\nDoes this pull request potentially affect one of the following parts:\nIf yes was chosen, please highlight the changes\n\nDependencies (does it add or upgrade a dependency): (no)\nThe public API: (no)\nThe schema: (no)\nThe default values of configurations: (no)\nThe wire protocol: (no)\nThe rest endpoints: (no)\nThe admin cli options: (no)\nAnything that affects deployment: (no)\n\nDocumentation\n\nDoes this pull request introduce a new feature? (no)", "createdAt": "2020-11-18T13:09:55Z", "url": "https://github.com/apache/pulsar/pull/8613", "merged": true, "mergeCommit": {"oid": "19767c714206aaf99e607301ba66b667579b6f34"}, "closed": true, "closedAt": "2020-11-21T01:09:45Z", "author": {"login": "codelipenghui"}, "timelineItems": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABddt4fOAH2gAyNTIzMTc0MDkzOjhhNDg2NGM0MjFiYWNlMmQzNjFhZWQzNGViMjkwY2JhN2M4NTg4MGI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABder0vIgFqTUzNTk2NTkyMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "8a4864c421bace2d361aed34eb290cba7c85880b", "author": {"user": {"login": "codelipenghui", "name": "lipenghui"}}, "url": "https://github.com/apache/pulsar/commit/8a4864c421bace2d361aed34eb290cba7c85880b", "committedDate": "2020-11-18T13:08:28Z", "message": "Enable WebSocket on Pulsar Proxy."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "38759bef834318cdf0a59c43016e367546fcde01", "author": {"user": {"login": "codelipenghui", "name": "lipenghui"}}, "url": "https://github.com/apache/pulsar/commit/38759bef834318cdf0a59c43016e367546fcde01", "committedDate": "2020-11-18T13:23:16Z", "message": "Fix test."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM0MDI0NzM1", "url": "https://github.com/apache/pulsar/pull/8613#pullrequestreview-534024735", "createdAt": "2020-11-19T02:03:45Z", "commit": {"oid": "38759bef834318cdf0a59c43016e367546fcde01"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM0MDY1NjM3", "url": "https://github.com/apache/pulsar/pull/8613#pullrequestreview-534065637", "createdAt": "2020-11-19T04:01:09Z", "commit": {"oid": "38759bef834318cdf0a59c43016e367546fcde01"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQwNDowMTowOVrOH2L4YA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQwNDowMTowOVrOH2L4YA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjU3OTgwOA==", "bodyText": "The documentation here is wrong?", "url": "https://github.com/apache/pulsar/pull/8613#discussion_r526579808", "createdAt": "2020-11-19T04:01:09Z", "author": {"login": "sijie"}, "path": "pulsar-proxy/src/main/java/org/apache/pulsar/proxy/server/ProxyConfiguration.java", "diffHunk": "@@ -528,6 +530,20 @@\n             )\n         }\n     )\n+\n+    /***** --- WebSocket --- ****/\n+    @FieldContext(\n+            category = CATEGORY_WEBSOCKET,\n+            doc = \"The directory to locate WebSocket servlet\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "38759bef834318cdf0a59c43016e367546fcde01"}, "originalPosition": 17}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cfd526149d97bad53bfc681cdeab18eb69fea1b7", "author": {"user": {"login": "codelipenghui", "name": "lipenghui"}}, "url": "https://github.com/apache/pulsar/commit/cfd526149d97bad53bfc681cdeab18eb69fea1b7", "committedDate": "2020-11-19T08:09:39Z", "message": "Fix document"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM0MjI3ODk1", "url": "https://github.com/apache/pulsar/pull/8613#pullrequestreview-534227895", "createdAt": "2020-11-19T09:28:54Z", "commit": {"oid": "cfd526149d97bad53bfc681cdeab18eb69fea1b7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQwOToyODo1NFrOH2UAdA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQwOToyODo1NFrOH2UAdA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjcxMjk0OA==", "bodyText": "IIUC if we always enable websockets in this test we are losing to test the case in which websocket is disabled\nis it correct ?\nit would be better to have tests that cover default configurations together with tests that test additional features", "url": "https://github.com/apache/pulsar/pull/8613#discussion_r526712948", "createdAt": "2020-11-19T09:28:54Z", "author": {"login": "eolivelli"}, "path": "tests/integration/src/test/java/org/apache/pulsar/tests/integration/proxy/TestProxy.java", "diffHunk": "@@ -53,6 +65,7 @@\n         proxyViaURL = new ProxyContainer(clusterName, \"proxy-via-url\")\n             .withEnv(\"brokerServiceURL\", \"pulsar://pulsar-broker-0:6650\")\n             .withEnv(\"brokerWebServiceURL\", \"http://pulsar-broker-0:8080\")\n+            .withEnv(\"webSocketServiceEnabled\", \"true\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cfd526149d97bad53bfc681cdeab18eb69fea1b7"}, "originalPosition": 31}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a43120af5b1b577a47a1b0f4ab96fafd9a262e46", "author": {"user": {"login": "codelipenghui", "name": "lipenghui"}}, "url": "https://github.com/apache/pulsar/commit/a43120af5b1b577a47a1b0f4ab96fafd9a262e46", "committedDate": "2020-11-19T12:39:02Z", "message": "Merge remote-tracking branch 'apache/master' into penghui/websocket_proxy"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "08751284678be74ec1c0e739450d8ced01e8f54d", "author": {"user": {"login": "codelipenghui", "name": "lipenghui"}}, "url": "https://github.com/apache/pulsar/commit/08751284678be74ec1c0e739450d8ced01e8f54d", "committedDate": "2020-11-19T12:45:45Z", "message": "Fix test."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "19b5d900946d663646cb2902ec996463af0972fa", "author": {"user": {"login": "codelipenghui", "name": "lipenghui"}}, "url": "https://github.com/apache/pulsar/commit/19b5d900946d663646cb2902ec996463af0972fa", "committedDate": "2020-11-19T12:50:25Z", "message": "Fix test."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aef4d9706e51c19748e1bcedfa7deba8036ce3eb", "author": {"user": {"login": "codelipenghui", "name": "lipenghui"}}, "url": "https://github.com/apache/pulsar/commit/aef4d9706e51c19748e1bcedfa7deba8036ce3eb", "committedDate": "2020-11-20T03:55:00Z", "message": "Fix tests."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5a34b55a6d1f1c333bdeda8bb8009b9b7b1349a4", "author": {"user": {"login": "codelipenghui", "name": "lipenghui"}}, "url": "https://github.com/apache/pulsar/commit/5a34b55a6d1f1c333bdeda8bb8009b9b7b1349a4", "committedDate": "2020-11-20T06:38:24Z", "message": "Fix tests."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4355e44e201a6a9b8cf96ef9edf677398a4a26c7", "author": {"user": {"login": "codelipenghui", "name": "lipenghui"}}, "url": "https://github.com/apache/pulsar/commit/4355e44e201a6a9b8cf96ef9edf677398a4a26c7", "committedDate": "2020-11-20T09:54:36Z", "message": "Fix tests."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aaeee1e499acfd399f1aae059ef19e7d2d973b58", "author": {"user": {"login": "codelipenghui", "name": "lipenghui"}}, "url": "https://github.com/apache/pulsar/commit/aaeee1e499acfd399f1aae059ef19e7d2d973b58", "committedDate": "2020-11-20T12:08:57Z", "message": "Fix tests."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eb67441a2226946093614426b5565f30b368e71b", "author": {"user": {"login": "codelipenghui", "name": "lipenghui"}}, "url": "https://github.com/apache/pulsar/commit/eb67441a2226946093614426b5565f30b368e71b", "committedDate": "2020-11-20T16:13:04Z", "message": "Fix tests."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM1OTY1OTIw", "url": "https://github.com/apache/pulsar/pull/8613#pullrequestreview-535965920", "createdAt": "2020-11-21T13:18:29Z", "commit": {"oid": "eb67441a2226946093614426b5565f30b368e71b"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1095, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}