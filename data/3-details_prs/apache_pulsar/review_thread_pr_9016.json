{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQzMzc1NjMw", "number": 9016, "reviewThreads": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yM1QyMDowMzowNFrOFIt4vQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNFQwNzoxMToxNVrOFI3G2A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ0Njg0NzMzOnYy", "diffSide": "RIGHT", "path": "pulsar-common/src/main/resources/findbugsExclude.xml", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yM1QyMDowMzowNFrOIKy89g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yM1QyMDowMzowNFrOIKy89g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODE5MTQ3OA==", "bodyText": "I think we need to fix the bugs introduced by this.", "url": "https://github.com/apache/pulsar/pull/9016#discussion_r548191478", "createdAt": "2020-12-23T20:03:04Z", "author": {"login": "sijie"}, "path": "pulsar-common/src/main/resources/findbugsExclude.xml", "diffHunk": "@@ -0,0 +1,126 @@\n+<!--\n+\n+    Licensed to the Apache Software Foundation (ASF) under one\n+    or more contributor license agreements.  See the NOTICE file\n+    distributed with this work for additional information\n+    regarding copyright ownership.  The ASF licenses this file\n+    to you under the Apache License, Version 2.0 (the\n+    \"License\"); you may not use this file except in compliance\n+    with the License.  You may obtain a copy of the License at\n+\n+      http://www.apache.org/licenses/LICENSE-2.0\n+\n+    Unless required by applicable law or agreed to in writing,\n+    software distributed under the License is distributed on an\n+    \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+    KIND, either express or implied.  See the License for the\n+    specific language governing permissions and limitations\n+    under the License.\n+\n+-->\n+<FindBugsFilter>\n+    <Match>\n+        <Class name=\"org.apache.pulsar.PulsarVersion\"/>\n+    </Match>\n+\n+    <Match>\n+        <Class name=\"~org\\.apache\\.pulsar\\.shaded\\.com\\.google\\.protobuf.*\"/>\n+    </Match>\n+\n+    <Match>\n+        <Class name=\"~org\\.apache\\.pulsar\\.common\\.api\\.proto.*\"/>\n+    </Match>\n+\n+    <Match>\n+        <Class name=\"org.apache.pulsar.common.api.raw.RawMessageImpl\"/>\n+        <Method name=\"getKeyBytes\"/>\n+        <Bug pattern=\"DM_DEFAULT_ENCODING\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "32b163be9b864e687cde173fe7f7eec7b8f025a1"}, "originalPosition": 37}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ0Njg0NzQ3OnYy", "diffSide": "RIGHT", "path": "pulsar-common/src/main/resources/findbugsExclude.xml", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yM1QyMDowMzoxMVrOIKy9Cw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yM1QyMDowMzoxMVrOIKy9Cw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODE5MTQ5OQ==", "bodyText": "I think we need to fix the bugs introduced by this.", "url": "https://github.com/apache/pulsar/pull/9016#discussion_r548191499", "createdAt": "2020-12-23T20:03:11Z", "author": {"login": "sijie"}, "path": "pulsar-common/src/main/resources/findbugsExclude.xml", "diffHunk": "@@ -0,0 +1,126 @@\n+<!--\n+\n+    Licensed to the Apache Software Foundation (ASF) under one\n+    or more contributor license agreements.  See the NOTICE file\n+    distributed with this work for additional information\n+    regarding copyright ownership.  The ASF licenses this file\n+    to you under the Apache License, Version 2.0 (the\n+    \"License\"); you may not use this file except in compliance\n+    with the License.  You may obtain a copy of the License at\n+\n+      http://www.apache.org/licenses/LICENSE-2.0\n+\n+    Unless required by applicable law or agreed to in writing,\n+    software distributed under the License is distributed on an\n+    \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+    KIND, either express or implied.  See the License for the\n+    specific language governing permissions and limitations\n+    under the License.\n+\n+-->\n+<FindBugsFilter>\n+    <Match>\n+        <Class name=\"org.apache.pulsar.PulsarVersion\"/>\n+    </Match>\n+\n+    <Match>\n+        <Class name=\"~org\\.apache\\.pulsar\\.shaded\\.com\\.google\\.protobuf.*\"/>\n+    </Match>\n+\n+    <Match>\n+        <Class name=\"~org\\.apache\\.pulsar\\.common\\.api\\.proto.*\"/>\n+    </Match>\n+\n+    <Match>\n+        <Class name=\"org.apache.pulsar.common.api.raw.RawMessageImpl\"/>\n+        <Method name=\"getKeyBytes\"/>\n+        <Bug pattern=\"DM_DEFAULT_ENCODING\"/>\n+    </Match>\n+\n+    <Match>\n+        <Class name=\"org.apache.pulsar.policies.data.loadbalancer.ResourceUsage\"/>\n+        <Method name=\"compareTo\"/>\n+        <Bug pattern=\"EQ_COMPARETO_USE_OBJECT_EQUALS\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "32b163be9b864e687cde173fe7f7eec7b8f025a1"}, "originalPosition": 43}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ0Njg0ODYxOnYy", "diffSide": "RIGHT", "path": "pulsar-common/src/main/resources/findbugsExclude.xml", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yM1QyMDowMzozNVrOIKy9xw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yM1QyMDowMzozNVrOIKy9xw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODE5MTY4Nw==", "bodyText": "I think we need to fix the bugs introduced by this.", "url": "https://github.com/apache/pulsar/pull/9016#discussion_r548191687", "createdAt": "2020-12-23T20:03:35Z", "author": {"login": "sijie"}, "path": "pulsar-common/src/main/resources/findbugsExclude.xml", "diffHunk": "@@ -0,0 +1,126 @@\n+<!--\n+\n+    Licensed to the Apache Software Foundation (ASF) under one\n+    or more contributor license agreements.  See the NOTICE file\n+    distributed with this work for additional information\n+    regarding copyright ownership.  The ASF licenses this file\n+    to you under the Apache License, Version 2.0 (the\n+    \"License\"); you may not use this file except in compliance\n+    with the License.  You may obtain a copy of the License at\n+\n+      http://www.apache.org/licenses/LICENSE-2.0\n+\n+    Unless required by applicable law or agreed to in writing,\n+    software distributed under the License is distributed on an\n+    \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+    KIND, either express or implied.  See the License for the\n+    specific language governing permissions and limitations\n+    under the License.\n+\n+-->\n+<FindBugsFilter>\n+    <Match>\n+        <Class name=\"org.apache.pulsar.PulsarVersion\"/>\n+    </Match>\n+\n+    <Match>\n+        <Class name=\"~org\\.apache\\.pulsar\\.shaded\\.com\\.google\\.protobuf.*\"/>\n+    </Match>\n+\n+    <Match>\n+        <Class name=\"~org\\.apache\\.pulsar\\.common\\.api\\.proto.*\"/>\n+    </Match>\n+\n+    <Match>\n+        <Class name=\"org.apache.pulsar.common.api.raw.RawMessageImpl\"/>\n+        <Method name=\"getKeyBytes\"/>\n+        <Bug pattern=\"DM_DEFAULT_ENCODING\"/>\n+    </Match>\n+\n+    <Match>\n+        <Class name=\"org.apache.pulsar.policies.data.loadbalancer.ResourceUsage\"/>\n+        <Method name=\"compareTo\"/>\n+        <Bug pattern=\"EQ_COMPARETO_USE_OBJECT_EQUALS\"/>\n+    </Match>\n+\n+    <Match>\n+        <Class name=\"org.apache.pulsar.common.nar.FileUtils\"/>\n+        <Method name=\"deleteFilesInDirectory\"/>\n+        <Bug pattern=\"NP_NULL_ON_SOME_PATH_FROM_RETURN_VALUE\"/>\n+    </Match>\n+\n+    <Match>\n+        <Class name=\"org.apache.pulsar.common.nar.NarClassLoader\"/>\n+        <Method name=\"getServiceImplementation\"/>\n+        <Bug pattern=\"DM_DEFAULT_ENCODING\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "32b163be9b864e687cde173fe7f7eec7b8f025a1"}, "originalPosition": 55}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ0Njg0OTcwOnYy", "diffSide": "RIGHT", "path": "pulsar-common/src/main/resources/findbugsExclude.xml", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yM1QyMDowMzo0NVrOIKy-bA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yM1QyMDowMzo0NVrOIKy-bA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODE5MTg1Mg==", "bodyText": "I think we need to fix the bugs introduced by this.", "url": "https://github.com/apache/pulsar/pull/9016#discussion_r548191852", "createdAt": "2020-12-23T20:03:45Z", "author": {"login": "sijie"}, "path": "pulsar-common/src/main/resources/findbugsExclude.xml", "diffHunk": "@@ -0,0 +1,126 @@\n+<!--\n+\n+    Licensed to the Apache Software Foundation (ASF) under one\n+    or more contributor license agreements.  See the NOTICE file\n+    distributed with this work for additional information\n+    regarding copyright ownership.  The ASF licenses this file\n+    to you under the Apache License, Version 2.0 (the\n+    \"License\"); you may not use this file except in compliance\n+    with the License.  You may obtain a copy of the License at\n+\n+      http://www.apache.org/licenses/LICENSE-2.0\n+\n+    Unless required by applicable law or agreed to in writing,\n+    software distributed under the License is distributed on an\n+    \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+    KIND, either express or implied.  See the License for the\n+    specific language governing permissions and limitations\n+    under the License.\n+\n+-->\n+<FindBugsFilter>\n+    <Match>\n+        <Class name=\"org.apache.pulsar.PulsarVersion\"/>\n+    </Match>\n+\n+    <Match>\n+        <Class name=\"~org\\.apache\\.pulsar\\.shaded\\.com\\.google\\.protobuf.*\"/>\n+    </Match>\n+\n+    <Match>\n+        <Class name=\"~org\\.apache\\.pulsar\\.common\\.api\\.proto.*\"/>\n+    </Match>\n+\n+    <Match>\n+        <Class name=\"org.apache.pulsar.common.api.raw.RawMessageImpl\"/>\n+        <Method name=\"getKeyBytes\"/>\n+        <Bug pattern=\"DM_DEFAULT_ENCODING\"/>\n+    </Match>\n+\n+    <Match>\n+        <Class name=\"org.apache.pulsar.policies.data.loadbalancer.ResourceUsage\"/>\n+        <Method name=\"compareTo\"/>\n+        <Bug pattern=\"EQ_COMPARETO_USE_OBJECT_EQUALS\"/>\n+    </Match>\n+\n+    <Match>\n+        <Class name=\"org.apache.pulsar.common.nar.FileUtils\"/>\n+        <Method name=\"deleteFilesInDirectory\"/>\n+        <Bug pattern=\"NP_NULL_ON_SOME_PATH_FROM_RETURN_VALUE\"/>\n+    </Match>\n+\n+    <Match>\n+        <Class name=\"org.apache.pulsar.common.nar.NarClassLoader\"/>\n+        <Method name=\"getServiceImplementation\"/>\n+        <Bug pattern=\"DM_DEFAULT_ENCODING\"/>\n+    </Match>\n+\n+    <Match>\n+        <Class name=\"org.apache.pulsar.common.policies.data.Policies\"/>\n+        <Method name=\"getBundles\"/>\n+        <Bug pattern=\"INT_BAD_COMPARISON_WITH_INT_VALUE\"/>\n+    </Match>\n+\n+    <Match>\n+        <Class name=\"org.apache.pulsar.common.nar.NarClassLoader\"/>\n+        <Method name=\"getFromArchive\"/>\n+        <Bug pattern=\"DP_CREATE_CLASSLOADER_INSIDE_DO_PRIVILEGED\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "32b163be9b864e687cde173fe7f7eec7b8f025a1"}, "originalPosition": 67}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ0Njg1MDI0OnYy", "diffSide": "RIGHT", "path": "pulsar-common/src/main/resources/findbugsExclude.xml", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yM1QyMDowMzo0OVrOIKy-zw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yM1QyMDowMzo0OVrOIKy-zw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODE5MTk1MQ==", "bodyText": "I think we need to fix the bugs introduced by this.", "url": "https://github.com/apache/pulsar/pull/9016#discussion_r548191951", "createdAt": "2020-12-23T20:03:49Z", "author": {"login": "sijie"}, "path": "pulsar-common/src/main/resources/findbugsExclude.xml", "diffHunk": "@@ -0,0 +1,126 @@\n+<!--\n+\n+    Licensed to the Apache Software Foundation (ASF) under one\n+    or more contributor license agreements.  See the NOTICE file\n+    distributed with this work for additional information\n+    regarding copyright ownership.  The ASF licenses this file\n+    to you under the Apache License, Version 2.0 (the\n+    \"License\"); you may not use this file except in compliance\n+    with the License.  You may obtain a copy of the License at\n+\n+      http://www.apache.org/licenses/LICENSE-2.0\n+\n+    Unless required by applicable law or agreed to in writing,\n+    software distributed under the License is distributed on an\n+    \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+    KIND, either express or implied.  See the License for the\n+    specific language governing permissions and limitations\n+    under the License.\n+\n+-->\n+<FindBugsFilter>\n+    <Match>\n+        <Class name=\"org.apache.pulsar.PulsarVersion\"/>\n+    </Match>\n+\n+    <Match>\n+        <Class name=\"~org\\.apache\\.pulsar\\.shaded\\.com\\.google\\.protobuf.*\"/>\n+    </Match>\n+\n+    <Match>\n+        <Class name=\"~org\\.apache\\.pulsar\\.common\\.api\\.proto.*\"/>\n+    </Match>\n+\n+    <Match>\n+        <Class name=\"org.apache.pulsar.common.api.raw.RawMessageImpl\"/>\n+        <Method name=\"getKeyBytes\"/>\n+        <Bug pattern=\"DM_DEFAULT_ENCODING\"/>\n+    </Match>\n+\n+    <Match>\n+        <Class name=\"org.apache.pulsar.policies.data.loadbalancer.ResourceUsage\"/>\n+        <Method name=\"compareTo\"/>\n+        <Bug pattern=\"EQ_COMPARETO_USE_OBJECT_EQUALS\"/>\n+    </Match>\n+\n+    <Match>\n+        <Class name=\"org.apache.pulsar.common.nar.FileUtils\"/>\n+        <Method name=\"deleteFilesInDirectory\"/>\n+        <Bug pattern=\"NP_NULL_ON_SOME_PATH_FROM_RETURN_VALUE\"/>\n+    </Match>\n+\n+    <Match>\n+        <Class name=\"org.apache.pulsar.common.nar.NarClassLoader\"/>\n+        <Method name=\"getServiceImplementation\"/>\n+        <Bug pattern=\"DM_DEFAULT_ENCODING\"/>\n+    </Match>\n+\n+    <Match>\n+        <Class name=\"org.apache.pulsar.common.policies.data.Policies\"/>\n+        <Method name=\"getBundles\"/>\n+        <Bug pattern=\"INT_BAD_COMPARISON_WITH_INT_VALUE\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "32b163be9b864e687cde173fe7f7eec7b8f025a1"}, "originalPosition": 61}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ0ODMxODcyOnYy", "diffSide": "RIGHT", "path": "pulsar-common/src/main/java/org/apache/pulsar/common/nar/NarClassLoader.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNFQwNjo0ODo1NVrOILA0PA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNFQwNjo0ODo1NVrOILA0PA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODQxODYyMA==", "bodyText": "Is this right?", "url": "https://github.com/apache/pulsar/pull/9016#discussion_r548418620", "createdAt": "2020-12-24T06:48:55Z", "author": {"login": "zymap"}, "path": "pulsar-common/src/main/java/org/apache/pulsar/common/nar/NarClassLoader.java", "diffHunk": "@@ -151,11 +158,13 @@ public static NarClassLoader getFromArchive(File narPath, Set<String> additional\n                                                 String narExtractionDirectory)\n         throws IOException {\n         File unpacked = NarUnpacker.unpackNar(narPath, getNarExtractionDirectory(narExtractionDirectory));\n-        try {\n-            return new NarClassLoader(unpacked, additionalJars, parent);\n-        } catch (ClassNotFoundException | NoClassDefFoundError e) {\n-            throw new IOException(e);\n-        }\n+        return AccessController.doPrivileged(new PrivilegedAction<NarClassLoader>() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6f10913188f021e941ee499edaf02101c084b4f6"}, "originalPosition": 35}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ0ODMyMTk2OnYy", "diffSide": "RIGHT", "path": "pulsar-common/src/main/java/org/apache/pulsar/common/policies/data/Policies.java", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNFQwNjo1MDo1MVrOILA2EQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yOFQwODoyNToxMFrOIL0EOw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODQxOTA4OQ==", "bodyText": "Please take a look at this change. I am not sure why we used the long value before.", "url": "https://github.com/apache/pulsar/pull/9016#discussion_r548419089", "createdAt": "2020-12-24T06:50:51Z", "author": {"login": "zymap"}, "path": "pulsar-common/src/main/java/org/apache/pulsar/common/policies/data/Policies.java", "diffHunk": "@@ -241,18 +241,16 @@ public String toString() {\n     }\n \n \n-    private static final long MAX_BUNDLES = ((long) 1) << 32;\n-\n     public static BundlesData getBundles(int numBundles) {\n-        if (numBundles <= 0 || numBundles > MAX_BUNDLES) {\n+        if (numBundles <= 0) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6f10913188f021e941ee499edaf02101c084b4f6"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODQyMzczNg==", "bodyText": "I don't think the change is correct. What was the findbugs error here?", "url": "https://github.com/apache/pulsar/pull/9016#discussion_r548423736", "createdAt": "2020-12-24T07:09:18Z", "author": {"login": "sijie"}, "path": "pulsar-common/src/main/java/org/apache/pulsar/common/policies/data/Policies.java", "diffHunk": "@@ -241,18 +241,16 @@ public String toString() {\n     }\n \n \n-    private static final long MAX_BUNDLES = ((long) 1) << 32;\n-\n     public static BundlesData getBundles(int numBundles) {\n-        if (numBundles <= 0 || numBundles > MAX_BUNDLES) {\n+        if (numBundles <= 0) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODQxOTA4OQ=="}, "originalCommit": {"oid": "6f10913188f021e941ee499edaf02101c084b4f6"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODUwMTc1MA==", "bodyText": "The findbugs error is: INT_BAD_COMPARISON_WITH_INT_VALUE", "url": "https://github.com/apache/pulsar/pull/9016#discussion_r548501750", "createdAt": "2020-12-24T11:30:42Z", "author": {"login": "zymap"}, "path": "pulsar-common/src/main/java/org/apache/pulsar/common/policies/data/Policies.java", "diffHunk": "@@ -241,18 +241,16 @@ public String toString() {\n     }\n \n \n-    private static final long MAX_BUNDLES = ((long) 1) << 32;\n-\n     public static BundlesData getBundles(int numBundles) {\n-        if (numBundles <= 0 || numBundles > MAX_BUNDLES) {\n+        if (numBundles <= 0) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODQxOTA4OQ=="}, "originalCommit": {"oid": "6f10913188f021e941ee499edaf02101c084b4f6"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTI1ODI5OQ==", "bodyText": "It should be only affected by the comparison of the values. I remove the comparison between the int value and long value.\nBut I still wonder why we use a 'long' to represent the max size of the bundles?", "url": "https://github.com/apache/pulsar/pull/9016#discussion_r549258299", "createdAt": "2020-12-28T08:25:10Z", "author": {"login": "zymap"}, "path": "pulsar-common/src/main/java/org/apache/pulsar/common/policies/data/Policies.java", "diffHunk": "@@ -241,18 +241,16 @@ public String toString() {\n     }\n \n \n-    private static final long MAX_BUNDLES = ((long) 1) << 32;\n-\n     public static BundlesData getBundles(int numBundles) {\n-        if (numBundles <= 0 || numBundles > MAX_BUNDLES) {\n+        if (numBundles <= 0) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODQxOTA4OQ=="}, "originalCommit": {"oid": "6f10913188f021e941ee499edaf02101c084b4f6"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ0ODM1ODAwOnYy", "diffSide": "RIGHT", "path": "pulsar-common/src/main/resources/findbugsExclude.xml", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNFQwNzoxMToxNVrOILBKMw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yOVQwOTo0OTowN1rOIMLXiQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODQyNDI0Mw==", "bodyText": "Why do we exclude the following bugs? At a minimum, we should only exclude those bugs for a specific class if we have a clear idea that we should exclude them.", "url": "https://github.com/apache/pulsar/pull/9016#discussion_r548424243", "createdAt": "2020-12-24T07:11:15Z", "author": {"login": "sijie"}, "path": "pulsar-common/src/main/resources/findbugsExclude.xml", "diffHunk": "@@ -0,0 +1,81 @@\n+<!--\n+\n+    Licensed to the Apache Software Foundation (ASF) under one\n+    or more contributor license agreements.  See the NOTICE file\n+    distributed with this work for additional information\n+    regarding copyright ownership.  The ASF licenses this file\n+    to you under the Apache License, Version 2.0 (the\n+    \"License\"); you may not use this file except in compliance\n+    with the License.  You may obtain a copy of the License at\n+\n+      http://www.apache.org/licenses/LICENSE-2.0\n+\n+    Unless required by applicable law or agreed to in writing,\n+    software distributed under the License is distributed on an\n+    \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+    KIND, either express or implied.  See the License for the\n+    specific language governing permissions and limitations\n+    under the License.\n+\n+-->\n+<FindBugsFilter>\n+    <Match>\n+        <Class name=\"org.apache.pulsar.PulsarVersion\"/>\n+    </Match>\n+\n+    <Match>\n+        <Class name=\"~org\\.apache\\.pulsar\\.shaded\\.com\\.google\\.protobuf.*\"/>\n+    </Match>\n+\n+    <Match>\n+        <Class name=\"~org\\.apache\\.pulsar\\.common\\.api\\.proto.*\"/>\n+    </Match>\n+\n+    <Match>\n+        <Class name=\"org.apache.pulsar.common.nar.FileUtils\"/>\n+        <Method name=\"deleteFilesInDirectory\"/>\n+        <Bug pattern=\"NP_NULL_ON_SOME_PATH_FROM_RETURN_VALUE\"/>\n+    </Match>\n+\n+    <Match>\n+        <Class name=\"org.apache.pulsar.common.policies.data.FunctionStats$FunctionInstanceStats$FunctionInstanceStatsData\"/>\n+        <Bug pattern=\"EQ_OVERRIDING_EQUALS_NOT_SYMMETRIC\"/>\n+    </Match>\n+\n+    <Match>\n+        <Class name=\"org.apache.pulsar.common.util.collections.ConcurrentBitSet\"/>\n+        <Bug pattern=\"EQ_DOESNT_OVERRIDE_EQUALS\"/>\n+    </Match>\n+\n+    <Match>\n+        <Class name=\"org.apache.pulsar.common.util.collections.ConcurrentBitSetRecyclable\"/>\n+        <Bug pattern=\"EQ_DOESNT_OVERRIDE_EQUALS\"/>\n+    </Match>\n+\n+    <Match>\n+        <Class name=\"org.apache.pulsar.common.util.NamespaceBundleStatsComparator\"/>\n+        <Bug pattern=\"SE_COMPARATOR_SHOULD_BE_SERIALIZABLE\"/>\n+    </Match>\n+\n+    <Match>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6f10913188f021e941ee499edaf02101c084b4f6"}, "originalPosition": 60}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTI1ODMxOQ==", "bodyText": "I clean most of the bugs. But there has still some bugs marked excluded by me. Because it will cause almost 130 bugs and it will need to change a lot of files across different modules.\nCan I fix them in other PRs?", "url": "https://github.com/apache/pulsar/pull/9016#discussion_r549258319", "createdAt": "2020-12-28T08:25:13Z", "author": {"login": "zymap"}, "path": "pulsar-common/src/main/resources/findbugsExclude.xml", "diffHunk": "@@ -0,0 +1,81 @@\n+<!--\n+\n+    Licensed to the Apache Software Foundation (ASF) under one\n+    or more contributor license agreements.  See the NOTICE file\n+    distributed with this work for additional information\n+    regarding copyright ownership.  The ASF licenses this file\n+    to you under the Apache License, Version 2.0 (the\n+    \"License\"); you may not use this file except in compliance\n+    with the License.  You may obtain a copy of the License at\n+\n+      http://www.apache.org/licenses/LICENSE-2.0\n+\n+    Unless required by applicable law or agreed to in writing,\n+    software distributed under the License is distributed on an\n+    \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+    KIND, either express or implied.  See the License for the\n+    specific language governing permissions and limitations\n+    under the License.\n+\n+-->\n+<FindBugsFilter>\n+    <Match>\n+        <Class name=\"org.apache.pulsar.PulsarVersion\"/>\n+    </Match>\n+\n+    <Match>\n+        <Class name=\"~org\\.apache\\.pulsar\\.shaded\\.com\\.google\\.protobuf.*\"/>\n+    </Match>\n+\n+    <Match>\n+        <Class name=\"~org\\.apache\\.pulsar\\.common\\.api\\.proto.*\"/>\n+    </Match>\n+\n+    <Match>\n+        <Class name=\"org.apache.pulsar.common.nar.FileUtils\"/>\n+        <Method name=\"deleteFilesInDirectory\"/>\n+        <Bug pattern=\"NP_NULL_ON_SOME_PATH_FROM_RETURN_VALUE\"/>\n+    </Match>\n+\n+    <Match>\n+        <Class name=\"org.apache.pulsar.common.policies.data.FunctionStats$FunctionInstanceStats$FunctionInstanceStatsData\"/>\n+        <Bug pattern=\"EQ_OVERRIDING_EQUALS_NOT_SYMMETRIC\"/>\n+    </Match>\n+\n+    <Match>\n+        <Class name=\"org.apache.pulsar.common.util.collections.ConcurrentBitSet\"/>\n+        <Bug pattern=\"EQ_DOESNT_OVERRIDE_EQUALS\"/>\n+    </Match>\n+\n+    <Match>\n+        <Class name=\"org.apache.pulsar.common.util.collections.ConcurrentBitSetRecyclable\"/>\n+        <Bug pattern=\"EQ_DOESNT_OVERRIDE_EQUALS\"/>\n+    </Match>\n+\n+    <Match>\n+        <Class name=\"org.apache.pulsar.common.util.NamespaceBundleStatsComparator\"/>\n+        <Bug pattern=\"SE_COMPARATOR_SHOULD_BE_SERIALIZABLE\"/>\n+    </Match>\n+\n+    <Match>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODQyNDI0Mw=="}, "originalCommit": {"oid": "6f10913188f021e941ee499edaf02101c084b4f6"}, "originalPosition": 60}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTYzMDYxOA==", "bodyText": "Sure. Can you create a follow-up issue and add a comment with the issue link to the file?", "url": "https://github.com/apache/pulsar/pull/9016#discussion_r549630618", "createdAt": "2020-12-29T09:19:15Z", "author": {"login": "sijie"}, "path": "pulsar-common/src/main/resources/findbugsExclude.xml", "diffHunk": "@@ -0,0 +1,81 @@\n+<!--\n+\n+    Licensed to the Apache Software Foundation (ASF) under one\n+    or more contributor license agreements.  See the NOTICE file\n+    distributed with this work for additional information\n+    regarding copyright ownership.  The ASF licenses this file\n+    to you under the Apache License, Version 2.0 (the\n+    \"License\"); you may not use this file except in compliance\n+    with the License.  You may obtain a copy of the License at\n+\n+      http://www.apache.org/licenses/LICENSE-2.0\n+\n+    Unless required by applicable law or agreed to in writing,\n+    software distributed under the License is distributed on an\n+    \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+    KIND, either express or implied.  See the License for the\n+    specific language governing permissions and limitations\n+    under the License.\n+\n+-->\n+<FindBugsFilter>\n+    <Match>\n+        <Class name=\"org.apache.pulsar.PulsarVersion\"/>\n+    </Match>\n+\n+    <Match>\n+        <Class name=\"~org\\.apache\\.pulsar\\.shaded\\.com\\.google\\.protobuf.*\"/>\n+    </Match>\n+\n+    <Match>\n+        <Class name=\"~org\\.apache\\.pulsar\\.common\\.api\\.proto.*\"/>\n+    </Match>\n+\n+    <Match>\n+        <Class name=\"org.apache.pulsar.common.nar.FileUtils\"/>\n+        <Method name=\"deleteFilesInDirectory\"/>\n+        <Bug pattern=\"NP_NULL_ON_SOME_PATH_FROM_RETURN_VALUE\"/>\n+    </Match>\n+\n+    <Match>\n+        <Class name=\"org.apache.pulsar.common.policies.data.FunctionStats$FunctionInstanceStats$FunctionInstanceStatsData\"/>\n+        <Bug pattern=\"EQ_OVERRIDING_EQUALS_NOT_SYMMETRIC\"/>\n+    </Match>\n+\n+    <Match>\n+        <Class name=\"org.apache.pulsar.common.util.collections.ConcurrentBitSet\"/>\n+        <Bug pattern=\"EQ_DOESNT_OVERRIDE_EQUALS\"/>\n+    </Match>\n+\n+    <Match>\n+        <Class name=\"org.apache.pulsar.common.util.collections.ConcurrentBitSetRecyclable\"/>\n+        <Bug pattern=\"EQ_DOESNT_OVERRIDE_EQUALS\"/>\n+    </Match>\n+\n+    <Match>\n+        <Class name=\"org.apache.pulsar.common.util.NamespaceBundleStatsComparator\"/>\n+        <Bug pattern=\"SE_COMPARATOR_SHOULD_BE_SERIALIZABLE\"/>\n+    </Match>\n+\n+    <Match>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODQyNDI0Mw=="}, "originalCommit": {"oid": "6f10913188f021e941ee499edaf02101c084b4f6"}, "originalPosition": 60}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTY0MDA3Mw==", "bodyText": "issue created #9080", "url": "https://github.com/apache/pulsar/pull/9016#discussion_r549640073", "createdAt": "2020-12-29T09:49:07Z", "author": {"login": "zymap"}, "path": "pulsar-common/src/main/resources/findbugsExclude.xml", "diffHunk": "@@ -0,0 +1,81 @@\n+<!--\n+\n+    Licensed to the Apache Software Foundation (ASF) under one\n+    or more contributor license agreements.  See the NOTICE file\n+    distributed with this work for additional information\n+    regarding copyright ownership.  The ASF licenses this file\n+    to you under the Apache License, Version 2.0 (the\n+    \"License\"); you may not use this file except in compliance\n+    with the License.  You may obtain a copy of the License at\n+\n+      http://www.apache.org/licenses/LICENSE-2.0\n+\n+    Unless required by applicable law or agreed to in writing,\n+    software distributed under the License is distributed on an\n+    \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+    KIND, either express or implied.  See the License for the\n+    specific language governing permissions and limitations\n+    under the License.\n+\n+-->\n+<FindBugsFilter>\n+    <Match>\n+        <Class name=\"org.apache.pulsar.PulsarVersion\"/>\n+    </Match>\n+\n+    <Match>\n+        <Class name=\"~org\\.apache\\.pulsar\\.shaded\\.com\\.google\\.protobuf.*\"/>\n+    </Match>\n+\n+    <Match>\n+        <Class name=\"~org\\.apache\\.pulsar\\.common\\.api\\.proto.*\"/>\n+    </Match>\n+\n+    <Match>\n+        <Class name=\"org.apache.pulsar.common.nar.FileUtils\"/>\n+        <Method name=\"deleteFilesInDirectory\"/>\n+        <Bug pattern=\"NP_NULL_ON_SOME_PATH_FROM_RETURN_VALUE\"/>\n+    </Match>\n+\n+    <Match>\n+        <Class name=\"org.apache.pulsar.common.policies.data.FunctionStats$FunctionInstanceStats$FunctionInstanceStatsData\"/>\n+        <Bug pattern=\"EQ_OVERRIDING_EQUALS_NOT_SYMMETRIC\"/>\n+    </Match>\n+\n+    <Match>\n+        <Class name=\"org.apache.pulsar.common.util.collections.ConcurrentBitSet\"/>\n+        <Bug pattern=\"EQ_DOESNT_OVERRIDE_EQUALS\"/>\n+    </Match>\n+\n+    <Match>\n+        <Class name=\"org.apache.pulsar.common.util.collections.ConcurrentBitSetRecyclable\"/>\n+        <Bug pattern=\"EQ_DOESNT_OVERRIDE_EQUALS\"/>\n+    </Match>\n+\n+    <Match>\n+        <Class name=\"org.apache.pulsar.common.util.NamespaceBundleStatsComparator\"/>\n+        <Bug pattern=\"SE_COMPARATOR_SHOULD_BE_SERIALIZABLE\"/>\n+    </Match>\n+\n+    <Match>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODQyNDI0Mw=="}, "originalCommit": {"oid": "6f10913188f021e941ee499edaf02101c084b4f6"}, "originalPosition": 60}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2602, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}