{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg2MjQ2Njk2", "number": 8053, "title": "[Docs] Cleanup broker documentation ", "bodyText": "clarify broker/topic ownership, role of AuthN and AuthZ working together, fix readability of bundle docs\nMotivation\nThe architecture diagrams generally do not show Brokers being aware of each other but they are not entirely stateless and are aware of which brokers own which namespace bundles. So clarify that as well as cleanup some other areas (e.g. AuthN occurs at proxy not just broker)\nModifications\nUpdated documentation\nVerifying this change\nThis change is a trivial rework / code cleanup without any test coverage.\nDoes this pull request potentially affect one of the following parts:\nIf yes was chosen, please highlight the changes\n\nDependencies (does it add or upgrade a dependency): no\nThe public API: no\nThe schema: no\nThe default values of configurations: no\nThe wire protocol: no\nThe rest endpoints: no\nThe admin cli options:  no\nAnything that affects deployment: no\n\nDocumentation\n\nDoes this pull request introduce a new feature? no\nIf yes, how is the feature documented? not applicable\nIf a feature is not applicable for documentation, explain why?\nIf a feature is not documented yet in this PR, please create a followup issue for adding the documentation", "createdAt": "2020-09-13T22:02:08Z", "url": "https://github.com/apache/pulsar/pull/8053", "merged": true, "mergeCommit": {"oid": "072c6be8281461631f0cb84b54b6dac4c0480b5a"}, "closed": true, "closedAt": "2020-09-16T01:08:45Z", "author": {"login": "kellyfj"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdIl6B3AH2gAyNDg2MjQ2Njk2Ojg5NTY0YTFhZjk2NTllZmFkNWFjNjc0NDY5NDkxOGQ1MWUzNTllN2U=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdJRqE_AFqTQ4OTIwMjM3NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "89564a1af9659efad5ac6744694918d51e359e7e", "author": {"user": {"login": "kellyfj", "name": "Frank J Kelly"}}, "url": "https://github.com/apache/pulsar/commit/89564a1af9659efad5ac6744694918d51e359e7e", "committedDate": "2020-09-13T21:58:30Z", "message": "Cleanup broker documentation: clarify broker/topic ownership, role of AuthN and AuthZ working together, fix readability of bundle docs"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg3MzU3NzQ3", "url": "https://github.com/apache/pulsar/pull/8053#pullrequestreview-487357747", "createdAt": "2020-09-14T00:41:28Z", "commit": {"oid": "89564a1af9659efad5ac6744694918d51e359e7e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg3MzY1OTg5", "url": "https://github.com/apache/pulsar/pull/8053#pullrequestreview-487365989", "createdAt": "2020-09-14T01:29:04Z", "commit": {"oid": "89564a1af9659efad5ac6744694918d51e359e7e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQwMToyOTowNFrOHRBO8A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQwMToyOTowNFrOHRBO8A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzYwODA0OA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            #### split bundle\n          \n          \n            \n            #### Split bundle", "url": "https://github.com/apache/pulsar/pull/8053#discussion_r487608048", "createdAt": "2020-09-14T01:29:04Z", "author": {"login": "Jennifer88huang"}, "path": "site2/docs/admin-api-namespaces.md", "diffHunk": "@@ -417,7 +417,7 @@ admin.namespaces().getNamespaceMessageTTL(namespace)\n \n #### split bundle", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "89564a1af9659efad5ac6744694918d51e359e7e"}, "originalPosition": 11}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg3MzY2Njc2", "url": "https://github.com/apache/pulsar/pull/8053#pullrequestreview-487366676", "createdAt": "2020-09-14T01:32:06Z", "commit": {"oid": "89564a1af9659efad5ac6744694918d51e359e7e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQwMTozMjowNlrOHRBRbA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQwMTozMjowNlrOHRBRbA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzYwODY4NA==", "bodyText": "what does \"If a bundle has multiple live heavily-used topics in it\" and \"create load\" mean? maybe we can refine it to be clearer?\nCould we refine the last sentence as \"... an admin splits the bundle using this command,  and spreads the new bundles across the cluster.\"?", "url": "https://github.com/apache/pulsar/pull/8053#discussion_r487608684", "createdAt": "2020-09-14T01:32:06Z", "author": {"login": "Jennifer88huang"}, "path": "site2/docs/admin-api-namespaces.md", "diffHunk": "@@ -417,7 +417,7 @@ admin.namespaces().getNamespaceMessageTTL(namespace)\n \n #### split bundle\n \n-Each namespace bundle can contain multiple topics and each bundle can be served by only one broker. If bundle gets heavy with multiple live topics in it then it creates load on that broker and in order to resolve this issue, admin can split bundle using this command.\n+Each namespace bundle can contain multiple topics and each bundle can be served by only one broker. If a bundle has multiple live heavily-used topics in it, then it creates load on that broker and in order to resolve this issue an admin can split the bundle using this command permitting the new bundles to be spread across the cluster.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "89564a1af9659efad5ac6744694918d51e359e7e"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg3MzY3ODI2", "url": "https://github.com/apache/pulsar/pull/8053#pullrequestreview-487367826", "createdAt": "2020-09-14T01:37:24Z", "commit": {"oid": "89564a1af9659efad5ac6744694918d51e359e7e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQwMTozNzoyNFrOHRBVag==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQwMTozNzoyNFrOHRBVag==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzYwOTcwNg==", "bodyText": "Note\nIn Pulsar, each topic is handled by only one broker. Requests for creating, reading, updating and deleting topics are sent to the broker owner initially. If the broker owner cannot handle the request for this topic, it redirects the request to  another/ the correct broker.", "url": "https://github.com/apache/pulsar/pull/8053#discussion_r487609706", "createdAt": "2020-09-14T01:37:24Z", "author": {"login": "Jennifer88huang"}, "path": "site2/docs/concepts-architecture-overview.md", "diffHunk": "@@ -150,3 +150,5 @@ from pulsar import Client\n \n client = Client('pulsar://pulsar-cluster.acme.com:6650')\n ```\n+\n+Note that in Pulsar, each topic is handled by only one broker. Therefore, for creating, reading, updating and deleting topics, requests are sent to any broker initially. If the broker finds that it cannot handle the request for this topic, it redirects the client to the correct broker. ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "89564a1af9659efad5ac6744694918d51e359e7e"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5c482544ca21ee4847b604e0027f95c59410d490", "author": {"user": {"login": "kellyfj", "name": "Frank J Kelly"}}, "url": "https://github.com/apache/pulsar/commit/5c482544ca21ee4847b604e0027f95c59410d490", "committedDate": "2020-09-14T21:14:37Z", "message": "PR feedback"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg4MjUwMjg3", "url": "https://github.com/apache/pulsar/pull/8053#pullrequestreview-488250287", "createdAt": "2020-09-15T00:55:38Z", "commit": {"oid": "5c482544ca21ee4847b604e0027f95c59410d490"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQwMDo1NTozOFrOHRsmfg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQwMDo1NTozOFrOHRsmfg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODMxODU5MA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            If a single bundle is creating an excessive load on a broker an admin can split the bundle using this command permitting one or more of the new bundles to be unloaded thus spreading the load across the brokers.\n          \n          \n            \n            If a single bundle is creating an excessive load on a broker, an admin splits the bundle using this command permitting one or more of the new bundles to be unloaded thus spreading the load across the brokers.", "url": "https://github.com/apache/pulsar/pull/8053#discussion_r488318590", "createdAt": "2020-09-15T00:55:38Z", "author": {"login": "Jennifer88huang"}, "path": "site2/docs/admin-api-namespaces.md", "diffHunk": "@@ -415,9 +415,10 @@ admin.namespaces().getNamespaceMessageTTL(namespace)\n ```\n \n \n-#### split bundle\n+#### Split bundle\n \n-Each namespace bundle can contain multiple topics and each bundle can be served by only one broker. If bundle gets heavy with multiple live topics in it then it creates load on that broker and in order to resolve this issue, admin can split bundle using this command.\n+Each namespace bundle can contain multiple topics and each bundle can be served by only one broker. \n+If a single bundle is creating an excessive load on a broker an admin can split the bundle using this command permitting one or more of the new bundles to be unloaded thus spreading the load across the brokers.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5c482544ca21ee4847b604e0027f95c59410d490"}, "originalPosition": 18}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg4MjUwNTU4", "url": "https://github.com/apache/pulsar/pull/8053#pullrequestreview-488250558", "createdAt": "2020-09-15T00:56:29Z", "commit": {"oid": "5c482544ca21ee4847b604e0027f95c59410d490"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQwMDo1NjoyOVrOHRsnew==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQwMDo1NjoyOVrOHRsnew==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODMxODg0Mw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Note: In Pulsar, each topic is handled by only one broker. Initial requests from a client to read, update or delete a topic are sent to a broker that may not be the topic owner. If the broker cannot handle the request for this topic, it redirects the request to the appropriate broker.\n          \n          \n            \n            > **Note**\n          \n          \n            \n            > In Pulsar, each topic is handled by only one broker. Initial requests from a client to read, update or delete a topic are sent to a broker that may not be the topic owner. If the broker cannot handle the request for this topic, it redirects the request to the appropriate broker.", "url": "https://github.com/apache/pulsar/pull/8053#discussion_r488318843", "createdAt": "2020-09-15T00:56:29Z", "author": {"login": "Jennifer88huang"}, "path": "site2/docs/concepts-architecture-overview.md", "diffHunk": "@@ -150,3 +150,5 @@ from pulsar import Client\n \n client = Client('pulsar://pulsar-cluster.acme.com:6650')\n ```\n+\n+Note: In Pulsar, each topic is handled by only one broker. Initial requests from a client to read, update or delete a topic are sent to a broker that may not be the topic owner. If the broker cannot handle the request for this topic, it redirects the request to the appropriate broker.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5c482544ca21ee4847b604e0027f95c59410d490"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "002bf6ef6ca2972ce65be28a297f59fe8948ab89", "author": {"user": {"login": "kellyfj", "name": "Frank J Kelly"}}, "url": "https://github.com/apache/pulsar/commit/002bf6ef6ca2972ce65be28a297f59fe8948ab89", "committedDate": "2020-09-15T22:52:04Z", "message": "More PR feedback"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg5MjAyMTcx", "url": "https://github.com/apache/pulsar/pull/8053#pullrequestreview-489202171", "createdAt": "2020-09-16T00:56:18Z", "commit": {"oid": "002bf6ef6ca2972ce65be28a297f59fe8948ab89"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQwMDo1NjoxOFrOHScOaw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQwMDo1NjoxOFrOHScOaw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTA5ODg1OQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            **Note**\n          \n          \n            \n            In Pulsar, each topic is handled by only one broker. Initial requests from a client to read, update or delete a topic are sent to a broker that may not be the topic owner. If the broker cannot handle the request for this topic, it redirects the request to the appropriate broker.\n          \n          \n            \n            > **Note**\n          \n          \n            \n            > In Pulsar, each topic is handled by only one broker. Initial requests from a client to read, update or delete a topic are sent to a broker that may not be the topic owner. If the broker cannot handle the request for this topic, it redirects the request to the appropriate broker.", "url": "https://github.com/apache/pulsar/pull/8053#discussion_r489098859", "createdAt": "2020-09-16T00:56:18Z", "author": {"login": "Jennifer88huang"}, "path": "site2/docs/concepts-architecture-overview.md", "diffHunk": "@@ -150,3 +150,6 @@ from pulsar import Client\n \n client = Client('pulsar://pulsar-cluster.acme.com:6650')\n ```\n+\n+**Note**\n+In Pulsar, each topic is handled by only one broker. Initial requests from a client to read, update or delete a topic are sent to a broker that may not be the topic owner. If the broker cannot handle the request for this topic, it redirects the request to the appropriate broker.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "002bf6ef6ca2972ce65be28a297f59fe8948ab89"}, "originalPosition": 15}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "15d76c0d2e54014c3972615ab0b54d7ff7344433", "author": {"user": {"login": "Jennifer88huang", "name": "Jennifer Huang"}}, "url": "https://github.com/apache/pulsar/commit/15d76c0d2e54014c3972615ab0b54d7ff7344433", "committedDate": "2020-09-16T00:56:24Z", "message": "Update site2/docs/concepts-architecture-overview.md"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg5MjAyMzc1", "url": "https://github.com/apache/pulsar/pull/8053#pullrequestreview-489202375", "createdAt": "2020-09-16T00:56:54Z", "commit": {"oid": "15d76c0d2e54014c3972615ab0b54d7ff7344433"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 214, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}