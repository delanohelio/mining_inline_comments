{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE0MjQyODgy", "number": 8432, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QwMToyMToyMFrOE0oGaw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QwMToyNjoyNVrOE0oJ3Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIzNjE4NDExOnYy", "diffSide": "RIGHT", "path": "pulsar-common/src/main/java/org/apache/pulsar/common/functions/CryptoConfig.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QwMToyMToyMFrOHsdbrA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QwMToyMToyMFrOHsdbrA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjM4MTYxMg==", "bodyText": "Please add license header for new file.", "url": "https://github.com/apache/pulsar/pull/8432#discussion_r516381612", "createdAt": "2020-11-03T01:21:20Z", "author": {"login": "wolfstudy"}, "path": "pulsar-common/src/main/java/org/apache/pulsar/common/functions/CryptoConfig.java", "diffHunk": "@@ -0,0 +1,30 @@\n+package org.apache.pulsar.common.functions;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63e012c27d9514d48ffea463efa0dc5c7c211df0"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIzNjE4NzIzOnYy", "diffSide": "RIGHT", "path": "pulsar-functions/java-examples/src/main/java/org/apache/pulsar/functions/api/examples/RawFileKeyReader.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QwMToyMzoxNFrOHsddXQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QwMToyMzoxNFrOHsddXQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjM4MjA0NQ==", "bodyText": "Please add the license header for new file.", "url": "https://github.com/apache/pulsar/pull/8432#discussion_r516382045", "createdAt": "2020-11-03T01:23:14Z", "author": {"login": "wolfstudy"}, "path": "pulsar-functions/java-examples/src/main/java/org/apache/pulsar/functions/api/examples/RawFileKeyReader.java", "diffHunk": "@@ -0,0 +1,51 @@\n+package org.apache.pulsar.functions.api.examples;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63e012c27d9514d48ffea463efa0dc5c7c211df0"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIzNjE4OTY4OnYy", "diffSide": "RIGHT", "path": "pulsar-functions/utils/src/main/java/org/apache/pulsar/functions/utils/CryptoUtils.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QwMToyNDozM1rOHsdetQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QwMToyNDozM1rOHsdetQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjM4MjM4OQ==", "bodyText": "Please add license header fr new file.", "url": "https://github.com/apache/pulsar/pull/8432#discussion_r516382389", "createdAt": "2020-11-03T01:24:33Z", "author": {"login": "wolfstudy"}, "path": "pulsar-functions/utils/src/main/java/org/apache/pulsar/functions/utils/CryptoUtils.java", "diffHunk": "@@ -0,0 +1,135 @@\n+package org.apache.pulsar.functions.utils;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63e012c27d9514d48ffea463efa0dc5c7c211df0"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIzNjE5MTYzOnYy", "diffSide": "RIGHT", "path": "pulsar-functions/proto/src/main/proto/Function.proto", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QwMToyNTozM1rOHsdfvA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QxOToxMDozMVrOHs80vA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjM4MjY1Mg==", "bodyText": "Why the SEND command value is 10, Is there any special meaning here? We still reserve the middle value?", "url": "https://github.com/apache/pulsar/pull/8432#discussion_r516382652", "createdAt": "2020-11-03T01:25:33Z", "author": {"login": "wolfstudy"}, "path": "pulsar-functions/proto/src/main/proto/Function.proto", "diffHunk": "@@ -100,12 +100,38 @@ message ConsumerSpec {\n     ReceiverQueueSize receiverQueueSize = 4;\n     map<string, string> schemaProperties = 5;\n     map<string, string> consumerProperties = 6;\n+    CryptoSpec cryptoSpec = 7;\n }\n \n message ProducerSpec {\n     int32 maxPendingMessages = 1;\n     int32 maxPendingMessagesAcrossPartitions = 2;\n     bool useThreadLocalProducers = 3;\n+    CryptoSpec cryptoSpec = 4;\n+}\n+\n+message CryptoSpec {\n+    enum FailureAction {\n+        FAIL = 0;\n+\n+        DISCARD = 1;\n+        CONSUME = 2;\n+\n+        SEND = 10;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63e012c27d9514d48ffea463efa0dc5c7c211df0"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjg5NTkzMg==", "bodyText": "Reserve some single digit values just in case there're new actions added for the consumer failure.\nLogically it's more clear. FAIL or 0 is the default behavior; 1~9 is for consumer; 10 and above is for producer.", "url": "https://github.com/apache/pulsar/pull/8432#discussion_r516895932", "createdAt": "2020-11-03T19:10:31Z", "author": {"login": "nlu90"}, "path": "pulsar-functions/proto/src/main/proto/Function.proto", "diffHunk": "@@ -100,12 +100,38 @@ message ConsumerSpec {\n     ReceiverQueueSize receiverQueueSize = 4;\n     map<string, string> schemaProperties = 5;\n     map<string, string> consumerProperties = 6;\n+    CryptoSpec cryptoSpec = 7;\n }\n \n message ProducerSpec {\n     int32 maxPendingMessages = 1;\n     int32 maxPendingMessagesAcrossPartitions = 2;\n     bool useThreadLocalProducers = 3;\n+    CryptoSpec cryptoSpec = 4;\n+}\n+\n+message CryptoSpec {\n+    enum FailureAction {\n+        FAIL = 0;\n+\n+        DISCARD = 1;\n+        CONSUME = 2;\n+\n+        SEND = 10;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjM4MjY1Mg=="}, "originalCommit": {"oid": "63e012c27d9514d48ffea463efa0dc5c7c211df0"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIzNjE5MjkzOnYy", "diffSide": "RIGHT", "path": "pulsar-functions/java-examples/src/main/java/org/apache/pulsar/functions/api/examples/RawFileKeyReader.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QwMToyNjoyNVrOHsdgfg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QwMToyNjoyNVrOHsdgfg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjM4Mjg0Ng==", "bodyText": "Maybe we need to add comments to the newly created class, otherwise the check of ci may fail.", "url": "https://github.com/apache/pulsar/pull/8432#discussion_r516382846", "createdAt": "2020-11-03T01:26:25Z", "author": {"login": "wolfstudy"}, "path": "pulsar-functions/java-examples/src/main/java/org/apache/pulsar/functions/api/examples/RawFileKeyReader.java", "diffHunk": "@@ -0,0 +1,51 @@\n+package org.apache.pulsar.functions.api.examples;\n+\n+import lombok.Data;\n+import org.apache.pulsar.client.api.CryptoKeyReader;\n+import org.apache.pulsar.client.api.EncryptionKeyInfo;\n+\n+import java.io.IOException;\n+import java.nio.file.Files;\n+import java.nio.file.Paths;\n+import java.util.Map;\n+\n+@Data", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63e012c27d9514d48ffea463efa0dc5c7c211df0"}, "originalPosition": 12}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2861, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}