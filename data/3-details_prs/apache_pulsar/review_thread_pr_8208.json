{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk4MzM3NzEw", "number": 8208, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQwNzo0Mjo1MFrOEqmsFw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxMzoyODoxM1rOErnS7Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEzMTA5NTI3OnYy", "diffSide": "RIGHT", "path": "pulsar-client/src/main/java/org/apache/pulsar/client/impl/PulsarClientImpl.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQwNzo0Mjo1MFrOHc5yrg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQwNzo0Mjo1MFrOHc5yrg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDA2OTAzOA==", "bodyText": "we must shutdown this executor, otherwise we are leaking threads", "url": "https://github.com/apache/pulsar/pull/8208#discussion_r500069038", "createdAt": "2020-10-06T07:42:50Z", "author": {"login": "eolivelli"}, "path": "pulsar-client/src/main/java/org/apache/pulsar/client/impl/PulsarClientImpl.java", "diffHunk": "@@ -145,6 +147,8 @@ public PulsarClientImpl(ClientConfigurationData conf, EventLoopGroup eventLoopGr\n         conf.getAuthentication().start();\n         this.cnxPool = cnxPool;\n         externalExecutorProvider = new ExecutorProvider(conf.getNumListenerThreads(), getThreadFactory(\"pulsar-external-listener\"));\n+        ioExecutorService = new ThreadPoolExecutor(conf.getNumIoThreads(), conf.getNumIoThreads(), 0L, TimeUnit.MILLISECONDS,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e3bf030cdf96952a48c25ba93af95f9a795061d6"}, "originalPosition": 31}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEzNzIzNDM4OnYy", "diffSide": "RIGHT", "path": "pulsar-client/src/main/java/org/apache/pulsar/client/impl/PulsarClientImpl.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QxMzo1MTo1OVrOHd0bfg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QxMzo1MTo1OVrOHd0bfg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTAyOTc1OA==", "bodyText": "Now we already have threads named pulsar-client-io, so it's better to use a different name for the new threads. And I noticed some internal tasks of the client also uses the externalExecutorProvider for executing the internal task of the Pulsar client. Maybe we can add an internalExecutorService for handing the internal tasks of the client.", "url": "https://github.com/apache/pulsar/pull/8208#discussion_r501029758", "createdAt": "2020-10-07T13:51:59Z", "author": {"login": "codelipenghui"}, "path": "pulsar-client/src/main/java/org/apache/pulsar/client/impl/PulsarClientImpl.java", "diffHunk": "@@ -145,6 +147,8 @@ public PulsarClientImpl(ClientConfigurationData conf, EventLoopGroup eventLoopGr\n         conf.getAuthentication().start();\n         this.cnxPool = cnxPool;\n         externalExecutorProvider = new ExecutorProvider(conf.getNumListenerThreads(), getThreadFactory(\"pulsar-external-listener\"));\n+        ioExecutorService = new ThreadPoolExecutor(conf.getNumIoThreads(), conf.getNumIoThreads(), 0L, TimeUnit.MILLISECONDS,\n+                new LinkedBlockingQueue<>(), getThreadFactory(\"pulsar-io-thread\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8612e46e11d617bddfe7268d57b5a3b3b9250aa4"}, "originalPosition": 32}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0MTY4MDQ1OnYy", "diffSide": "RIGHT", "path": "pulsar-client/src/main/java/org/apache/pulsar/client/impl/PulsarClientImpl.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxMzoyODoxM1rOHeekUQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxMzoyODoxM1rOHeekUQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTcyMDE0NQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    internalExecutorService = new ExecutorProvider(conf.getNumIoThreads(), getThreadFactory(\"pulsar-client-io\"));\n          \n          \n            \n                    internalExecutorService = new ExecutorProvider(conf.getNumIoThreads(), getThreadFactory(\"pulsar-client-internal\"));", "url": "https://github.com/apache/pulsar/pull/8208#discussion_r501720145", "createdAt": "2020-10-08T13:28:13Z", "author": {"login": "codelipenghui"}, "path": "pulsar-client/src/main/java/org/apache/pulsar/client/impl/PulsarClientImpl.java", "diffHunk": "@@ -145,6 +147,7 @@ public PulsarClientImpl(ClientConfigurationData conf, EventLoopGroup eventLoopGr\n         conf.getAuthentication().start();\n         this.cnxPool = cnxPool;\n         externalExecutorProvider = new ExecutorProvider(conf.getNumListenerThreads(), getThreadFactory(\"pulsar-external-listener\"));\n+        internalExecutorService = new ExecutorProvider(conf.getNumIoThreads(), getThreadFactory(\"pulsar-client-io\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b19536ba52067d72a2378d83fa3eb2a057c72932"}, "originalPosition": 31}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2141, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}