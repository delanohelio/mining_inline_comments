{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg0MzAzMTA3", "number": 371, "title": "Add step to validate elements number using comparison rule", "bodyText": "Closes #369", "createdAt": "2020-03-05T14:20:04Z", "url": "https://github.com/vividus-framework/vividus/pull/371", "merged": true, "mergeCommit": {"oid": "601e16efc8c5a1d738bcbf24853d9f456bf7e5ef"}, "closed": true, "closedAt": "2020-03-06T15:20:49Z", "author": {"login": "ikalinin1"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcKsW76AFqTM2OTYxMDIwMQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcLBsddgFqTM3MDM5ODY2NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY5NjEwMjAx", "url": "https://github.com/vividus-framework/vividus/pull/371#pullrequestreview-369610201", "createdAt": "2020-03-05T14:25:41Z", "commit": {"oid": "2a57335126e9d074acb0d9bb9480c5d0d318c1e3"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxNDoyNTo0MVrOFyVgyA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxNDoyNTo0MVrOFyVgyA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODMyNTU3Ng==", "bodyText": "Then number of elements found CSS selector `$cssSelector` in HTML `$html` is $comparisonRule `$quantity`", "url": "https://github.com/vividus-framework/vividus/pull/371#discussion_r388325576", "createdAt": "2020-03-05T14:25:41Z", "author": {"login": "valfirst"}, "path": "vividus-plugin-html/src/main/java/org/vividus/bdd/steps/html/HtmlSteps.java", "diffHunk": "@@ -56,6 +48,36 @@\n         return Optional.empty();\n     }\n \n+    /**\n+     * Checks if HTML contains elements according to rule by CSS selector\n+     * @param html HTML to check\n+     * @param comparisonRule The rule to compare values\n+     * <br>(<i>Possible values:</i>\n+     * <br> less than (&lt;),\n+     * <br> less than or equal to (&lt;=),\n+     * <br> greater than(&gt;)\n+     * <br> greater than or equal to(&gt;=),\n+     * <br> equal to(=))\n+     * @param number Number of elements\n+     * @param cssSelector CSS selector\n+     * @see <a href=\"https://www.w3schools.com/cssref/css_selectors.asp\"><i>CSS Selector Reference</i></a>\n+     * @see <a href=\"https://jsoup.org/apidocs/org/jsoup/select/Selector.html\"><i>Jsoup Selector API</i></a>\n+     * @return true if elements quantity corresponds to rule, false otherwise\n+     */\n+    @Then(\"HTML `$html` contains $comparisonRule $number elements by CSS selector `$cssSelector`\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2a57335126e9d074acb0d9bb9480c5d0d318c1e3"}, "originalPosition": 49}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2a57335126e9d074acb0d9bb9480c5d0d318c1e3", "author": {"user": {"login": "ikalinin1", "name": "Ivan Kalinin"}}, "url": "https://github.com/vividus-framework/vividus/commit/2a57335126e9d074acb0d9bb9480c5d0d318c1e3", "committedDate": "2020-03-05T14:17:14Z", "message": "Add step to validate elements number using comparison rule"}, "afterCommit": {"oid": "a4115a5f188538facfd3c1a93053f43b1ebede83", "author": {"user": {"login": "ikalinin1", "name": "Ivan Kalinin"}}, "url": "https://github.com/vividus-framework/vividus/commit/a4115a5f188538facfd3c1a93053f43b1ebede83", "committedDate": "2020-03-05T15:23:20Z", "message": "Add step to validate elements number using comparison rule"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a4115a5f188538facfd3c1a93053f43b1ebede83", "author": {"user": {"login": "ikalinin1", "name": "Ivan Kalinin"}}, "url": "https://github.com/vividus-framework/vividus/commit/a4115a5f188538facfd3c1a93053f43b1ebede83", "committedDate": "2020-03-05T15:23:20Z", "message": "Add step to validate elements number using comparison rule"}, "afterCommit": {"oid": "648450e22c4cc1101fb8562f95ecca798b55dd7e", "author": {"user": {"login": "ikalinin1", "name": "Ivan Kalinin"}}, "url": "https://github.com/vividus-framework/vividus/commit/648450e22c4cc1101fb8562f95ecca798b55dd7e", "committedDate": "2020-03-05T15:57:52Z", "message": "Add step to validate elements number using comparison rule"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcwMjM5MDY1", "url": "https://github.com/vividus-framework/vividus/pull/371#pullrequestreview-370239065", "createdAt": "2020-03-06T10:56:00Z", "commit": {"oid": "648450e22c4cc1101fb8562f95ecca798b55dd7e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQxMDo1NjowMFrOFy01pg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQxMDo1NjowMFrOFy01pg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODgzODgyMg==", "bodyText": "what about reusing here a logic from a new step?", "url": "https://github.com/vividus-framework/vividus/pull/371#discussion_r388838822", "createdAt": "2020-03-06T10:56:00Z", "author": {"login": "valfirst"}, "path": "vividus-plugin-html/src/main/java/org/vividus/bdd/steps/html/HtmlSteps.java", "diffHunk": "@@ -36,18 +37,9 @@\n     @Inject private ISoftAssert softAssert;\n     @Inject private IBddVariableContext bddVariableContext;\n \n-    /**\n-     * Checks if HTML contains element by CSS selector\n-     * @param html HTML to check\n-     * @param cssSelector CSS selector\n-     * @see <a href=\"https://www.w3schools.com/cssref/css_selectors.asp\"><i>CSS Selector Reference</i></a>\n-     * @see <a href=\"https://jsoup.org/apidocs/org/jsoup/select/Selector.html\"><i>Jsoup Selector API</i></a>\n-     * @return element by CSS selector\n-     */\n-    @Then(\"HTML `$html` contains element by CSS selector `$cssSelector`\")\n-    public Optional<Element> doesElementByCssSelectorExist(String html, String cssSelector)\n+    private Optional<Element> findElementByCssSelectorExist(String html, String cssSelector)\n     {\n-        Elements elements = HtmlUtils.getElements(html, cssSelector);\n+        Elements elements = findElements(html, cssSelector);\n         if (softAssert.assertThat(String.format(\"Number of elements found by css selector '%s'\", cssSelector),\n                 elements.size(), Matchers.equalTo(1)))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "648450e22c4cc1101fb8562f95ecca798b55dd7e"}, "originalPosition": 27}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1c94457c20253458b42b620d1693ff517e7d8875", "author": {"user": {"login": "ikalinin1", "name": "Ivan Kalinin"}}, "url": "https://github.com/vividus-framework/vividus/commit/1c94457c20253458b42b620d1693ff517e7d8875", "committedDate": "2020-03-06T13:18:30Z", "message": "Add step to validate elements number using comparison rule"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "648450e22c4cc1101fb8562f95ecca798b55dd7e", "author": {"user": {"login": "ikalinin1", "name": "Ivan Kalinin"}}, "url": "https://github.com/vividus-framework/vividus/commit/648450e22c4cc1101fb8562f95ecca798b55dd7e", "committedDate": "2020-03-05T15:57:52Z", "message": "Add step to validate elements number using comparison rule"}, "afterCommit": {"oid": "1c94457c20253458b42b620d1693ff517e7d8875", "author": {"user": {"login": "ikalinin1", "name": "Ivan Kalinin"}}, "url": "https://github.com/vividus-framework/vividus/commit/1c94457c20253458b42b620d1693ff517e7d8875", "committedDate": "2020-03-06T13:18:30Z", "message": "Add step to validate elements number using comparison rule"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcwMzUyMDg2", "url": "https://github.com/vividus-framework/vividus/pull/371#pullrequestreview-370352086", "createdAt": "2020-03-06T14:17:09Z", "commit": {"oid": "1c94457c20253458b42b620d1693ff517e7d8875"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcwMzk4NjY0", "url": "https://github.com/vividus-framework/vividus/pull/371#pullrequestreview-370398664", "createdAt": "2020-03-06T15:17:43Z", "commit": {"oid": "1c94457c20253458b42b620d1693ff517e7d8875"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 357, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}