{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA1Mjc5MDA2", "number": 489, "title": "Mobile app support", "bodyText": "", "createdAt": "2020-04-17T18:29:08Z", "url": "https://github.com/vividus-framework/vividus/pull/489", "merged": true, "mergeCommit": {"oid": "9b681cfc4952f73022d6638cd79e99bbae9c3ca6"}, "closed": true, "closedAt": "2020-07-23T10:07:25Z", "author": {"login": "uarlouski"}, "timelineItems": {"totalCount": 22, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcYlz2PgBqjMyNDU1NjQ1MDE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc3qXUaAFqTQ1Mzg5MzcwNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e712cc0dd2a3b5f83e95a69bb3626393f02da58b", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/e712cc0dd2a3b5f83e95a69bb3626393f02da58b", "committedDate": "2020-04-17T18:25:51Z", "message": "check build"}, "afterCommit": {"oid": "5c28d62c8ba3e1b636fd13718d93c7ad44bccddc", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/5c28d62c8ba3e1b636fd13718d93c7ad44bccddc", "committedDate": "2020-04-17T18:43:10Z", "message": "check build"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5c28d62c8ba3e1b636fd13718d93c7ad44bccddc", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/5c28d62c8ba3e1b636fd13718d93c7ad44bccddc", "committedDate": "2020-04-17T18:43:10Z", "message": "check build"}, "afterCommit": {"oid": "759fbad018a4bf37383e4b4a255e92c1f5fc9405", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/759fbad018a4bf37383e4b4a255e92c1f5fc9405", "committedDate": "2020-04-17T21:00:13Z", "message": "check build"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "759fbad018a4bf37383e4b4a255e92c1f5fc9405", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/759fbad018a4bf37383e4b4a255e92c1f5fc9405", "committedDate": "2020-04-17T21:00:13Z", "message": "check build"}, "afterCommit": {"oid": "679e5200d857e7397e1570563aaabf58845be145", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/679e5200d857e7397e1570563aaabf58845be145", "committedDate": "2020-07-01T15:31:38Z", "message": "check build"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "679e5200d857e7397e1570563aaabf58845be145", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/679e5200d857e7397e1570563aaabf58845be145", "committedDate": "2020-07-01T15:31:38Z", "message": "check build"}, "afterCommit": {"oid": "a6bbce20b59af92569ae410a326bf1cfb21ddd94", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/a6bbce20b59af92569ae410a326bf1cfb21ddd94", "committedDate": "2020-07-01T16:02:59Z", "message": "check build"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a6bbce20b59af92569ae410a326bf1cfb21ddd94", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/a6bbce20b59af92569ae410a326bf1cfb21ddd94", "committedDate": "2020-07-01T16:02:59Z", "message": "check build"}, "afterCommit": {"oid": "e8847fcba5bed4f262a9d03af00b5b8a0f4c6ad9", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/e8847fcba5bed4f262a9d03af00b5b8a0f4c6ad9", "committedDate": "2020-07-03T11:58:36Z", "message": "Mobile app support"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e8847fcba5bed4f262a9d03af00b5b8a0f4c6ad9", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/e8847fcba5bed4f262a9d03af00b5b8a0f4c6ad9", "committedDate": "2020-07-03T11:58:36Z", "message": "Mobile app support"}, "afterCommit": {"oid": "497ee7e0c3cd4912299e58b45af02ca1dcbd7556", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/497ee7e0c3cd4912299e58b45af02ca1dcbd7556", "committedDate": "2020-07-03T14:49:28Z", "message": "Mobile app support"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "27b00a3e8b3efd95947af9d19b452b88cf5ee812", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/27b00a3e8b3efd95947af9d19b452b88cf5ee812", "committedDate": "2020-07-06T07:39:15Z", "message": "iter 2"}, "afterCommit": {"oid": "3cfe48a4a0b1449a1a0f531da7ee86e399c15dff", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/3cfe48a4a0b1449a1a0f531da7ee86e399c15dff", "committedDate": "2020-07-06T08:26:52Z", "message": "Mobile app support"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3cfe48a4a0b1449a1a0f531da7ee86e399c15dff", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/3cfe48a4a0b1449a1a0f531da7ee86e399c15dff", "committedDate": "2020-07-06T08:26:52Z", "message": "Mobile app support"}, "afterCommit": {"oid": "8401ee25f3da11d1decd197d21aeeac774af5fc8", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/8401ee25f3da11d1decd197d21aeeac774af5fc8", "committedDate": "2020-07-06T08:55:15Z", "message": "Mobile app support"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8401ee25f3da11d1decd197d21aeeac774af5fc8", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/8401ee25f3da11d1decd197d21aeeac774af5fc8", "committedDate": "2020-07-06T08:55:15Z", "message": "Mobile app support"}, "afterCommit": {"oid": "dc8988a150f443f550d9ca492cb0d25ec2d5d415", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/dc8988a150f443f550d9ca492cb0d25ec2d5d415", "committedDate": "2020-07-06T09:19:35Z", "message": "Mobile app support"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQzMDE4MTU0", "url": "https://github.com/vividus-framework/vividus/pull/489#pullrequestreview-443018154", "createdAt": "2020-07-06T12:10:46Z", "commit": {"oid": "dc8988a150f443f550d9ca492cb0d25ec2d5d415"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNlQxMjoxMDo0NlrOGtUozA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNlQxMjo0NDo0M1rOGtVsog==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDE3NzIyOA==", "bodyText": "AbstractVividusDriverFactory -> AbstractVividusWebDriverFactory", "url": "https://github.com/vividus-framework/vividus/pull/489#discussion_r450177228", "createdAt": "2020-07-06T12:10:46Z", "author": {"login": "valfirst"}, "path": "vividus-extension-selenium/src/main/java/org/vividus/selenium/AbstractVividusDriverFactory.java", "diffHunk": "@@ -0,0 +1,82 @@\n+/*\n+ * Copyright 2019-2020 the original author or authors.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     https://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.vividus.selenium;\n+\n+import org.jbehave.core.model.Meta;\n+import org.jbehave.core.model.Scenario;\n+import org.jbehave.core.model.Story;\n+import org.openqa.selenium.remote.DesiredCapabilities;\n+import org.vividus.bdd.context.IBddRunContext;\n+import org.vividus.bdd.model.MetaWrapper;\n+import org.vividus.bdd.model.RunningStory;\n+import org.vividus.selenium.manager.IWebDriverManagerContext;\n+import org.vividus.selenium.manager.WebDriverManagerParameter;\n+\n+public abstract class AbstractVividusDriverFactory implements IVividusDriverFactory", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dc8988a150f443f550d9ca492cb0d25ec2d5d415"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDE3ODAwMw==", "bodyText": "DriverFactory -> WebDriverFactory", "url": "https://github.com/vividus-framework/vividus/pull/489#discussion_r450178003", "createdAt": "2020-07-06T12:12:19Z", "author": {"login": "valfirst"}, "path": "vividus-extension-selenium/src/main/java/org/vividus/selenium/DriverFactory.java", "diffHunk": "@@ -0,0 +1,166 @@\n+/*\n+ * Copyright 2019-2020 the original author or authors.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     https://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.vividus.selenium;\n+\n+import static java.util.stream.Collectors.toMap;\n+import static org.apache.commons.lang3.StringUtils.equalsAnyIgnoreCase;\n+\n+import java.net.URL;\n+import java.util.Map;\n+import java.util.Map.Entry;\n+import java.util.function.Supplier;\n+import java.util.stream.Collectors;\n+\n+import com.google.common.base.Suppliers;\n+import com.google.common.cache.CacheBuilder;\n+import com.google.common.cache.CacheLoader;\n+import com.google.common.cache.LoadingCache;\n+\n+import org.openqa.selenium.HasCapabilities;\n+import org.openqa.selenium.WebDriver;\n+import org.openqa.selenium.remote.DesiredCapabilities;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.vividus.selenium.driver.TextFormattingWebDriver;\n+import org.vividus.util.json.JsonUtils;\n+import org.vividus.util.property.IPropertyParser;\n+\n+public class DriverFactory implements IDriverFactory", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dc8988a150f443f550d9ca492cb0d25ec2d5d415"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDE4MDM0Ng==", "bodyText": "I recommend to make this method abstract and keep empty implementation in child classes", "url": "https://github.com/vividus-framework/vividus/pull/489#discussion_r450180346", "createdAt": "2020-07-06T12:16:49Z", "author": {"login": "valfirst"}, "path": "vividus-extension-selenium/src/main/java/org/vividus/selenium/DriverFactory.java", "diffHunk": "@@ -0,0 +1,166 @@\n+/*\n+ * Copyright 2019-2020 the original author or authors.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     https://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.vividus.selenium;\n+\n+import static java.util.stream.Collectors.toMap;\n+import static org.apache.commons.lang3.StringUtils.equalsAnyIgnoreCase;\n+\n+import java.net.URL;\n+import java.util.Map;\n+import java.util.Map.Entry;\n+import java.util.function.Supplier;\n+import java.util.stream.Collectors;\n+\n+import com.google.common.base.Suppliers;\n+import com.google.common.cache.CacheBuilder;\n+import com.google.common.cache.CacheLoader;\n+import com.google.common.cache.LoadingCache;\n+\n+import org.openqa.selenium.HasCapabilities;\n+import org.openqa.selenium.WebDriver;\n+import org.openqa.selenium.remote.DesiredCapabilities;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.vividus.selenium.driver.TextFormattingWebDriver;\n+import org.vividus.util.json.JsonUtils;\n+import org.vividus.util.property.IPropertyParser;\n+\n+public class DriverFactory implements IDriverFactory\n+{\n+    private static final Logger LOGGER = LoggerFactory.getLogger(DriverFactory.class);\n+\n+    private static final String SELENIUM_GRID_PROPERTY_PREFIX = \"selenium.grid.capabilities.\";\n+    private static final String LOCAL_DRIVER_PROPERTY_PREFIX = \"selenium.capabilities.\";\n+\n+    private final IRemoteWebDriverFactory remoteWebDriverFactory;\n+    private final IPropertyParser propertyParser;\n+    private final JsonUtils jsonUtils;\n+\n+    private URL remoteDriverUrl;\n+\n+    private final Supplier<DesiredCapabilities> seleniumGridDesiredCapabilities = Suppliers.memoize(\n+        () -> getCapabilitiesByPrefix(SELENIUM_GRID_PROPERTY_PREFIX));\n+\n+    private final Supplier<DesiredCapabilities> localDriverDesiredCapabilities = Suppliers.memoize(\n+        () -> getCapabilitiesByPrefix(LOCAL_DRIVER_PROPERTY_PREFIX));\n+\n+    private final LoadingCache<Boolean, DesiredCapabilities> webDriverCapabilities = CacheBuilder.newBuilder()\n+            .build(new CacheLoader<Boolean, DesiredCapabilities>()\n+            {\n+                @Override\n+                public DesiredCapabilities load(Boolean local)\n+                {\n+                    DesiredCapabilities localCapabilities = localDriverDesiredCapabilities.get();\n+                    if (Boolean.TRUE.equals(local))\n+                    {\n+                        return localCapabilities;\n+                    }\n+                    return merge(localCapabilities, seleniumGridDesiredCapabilities.get());\n+                }\n+            });\n+\n+    public DriverFactory(IRemoteWebDriverFactory remoteWebDriverFactory, IPropertyParser propertyParser,\n+            JsonUtils jsonUtils)\n+    {\n+        this.remoteWebDriverFactory = remoteWebDriverFactory;\n+        this.propertyParser = propertyParser;\n+        this.jsonUtils = jsonUtils;\n+    }\n+\n+    private DesiredCapabilities getCapabilitiesByPrefix(String prefix)\n+    {\n+        return propertyParser.getPropertyValuesTreeByPrefix(prefix)\n+            .entrySet()\n+            .stream()\n+            .map(e -> isBoolean(e.getValue())\n+                ? Map.entry(e.getKey(), Boolean.parseBoolean((String) e.getValue()))\n+                : e)\n+            .collect(Collectors.collectingAndThen(toMap(Entry::getKey, Entry::getValue), DesiredCapabilities::new));\n+    }\n+\n+    private boolean isBoolean(Object value)\n+    {\n+        return value instanceof String && equalsAnyIgnoreCase((String) value, \"true\", \"false\");\n+    }\n+\n+    @Override\n+    public WebDriver getRemoteWebDriver(DesiredCapabilities desiredCapabilities)\n+    {\n+        DesiredCapabilities mergedDesiredCapabilities = getWebDriverCapabilities(false, desiredCapabilities);\n+        return createWebDriver(remoteWebDriverFactory.getRemoteWebDriver(remoteDriverUrl,\n+                updateDesiredCapabilities(mergedDesiredCapabilities)));\n+    }\n+\n+    protected WebDriver createWebDriver(WebDriver webDriver)\n+    {\n+        WebDriver driver = new TextFormattingWebDriver(webDriver);\n+        configureWebDriver(driver);\n+\n+        LOGGER.atInfo()\n+              .addArgument(() -> jsonUtils\n+                      .toPrettyJson(WebDriverUtil.unwrap(driver, HasCapabilities.class).getCapabilities().asMap()))\n+              .log(\"Session capabilities:\\n{}\");\n+        return driver;\n+    }\n+\n+    protected DesiredCapabilities updateDesiredCapabilities(DesiredCapabilities desiredCapabilities)\n+    {\n+        return desiredCapabilities;\n+    }\n+\n+    protected void configureWebDriver(WebDriver webDriver)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dc8988a150f443f550d9ca492cb0d25ec2d5d415"}, "originalPosition": 125}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDE4NjEzNg==", "bodyText": "Given(\"I start mobile application located at $location\")?\nWhy are capabilities needed?", "url": "https://github.com/vividus-framework/vividus/pull/489#discussion_r450186136", "createdAt": "2020-07-06T12:28:17Z", "author": {"login": "valfirst"}, "path": "vividus-plugin-mobile-app/src/main/java/org/vividus/mobileapp/bdd/steps/ApplicationSteps.java", "diffHunk": "@@ -0,0 +1,58 @@\n+/*\n+ * Copyright 2019-2020 the original author or authors.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     https://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.vividus.mobileapp.bdd.steps;\n+\n+import java.util.List;\n+\n+import org.jbehave.core.annotations.Given;\n+import org.openqa.selenium.remote.DesiredCapabilities;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.vividus.mobileapp.bdd.model.DesiredCapability;\n+import org.vividus.selenium.IWebDriverProvider;\n+import org.vividus.selenium.SauceLabsCapabilityType;\n+import org.vividus.selenium.manager.IWebDriverManagerContext;\n+import org.vividus.selenium.manager.WebDriverManagerParameter;\n+\n+import io.appium.java_client.HasSessionDetails;\n+\n+public class ApplicationSteps\n+{\n+    private static final Logger LOGGER = LoggerFactory.getLogger(ApplicationSteps.class);\n+\n+    private final IWebDriverProvider webDriverProvider;\n+    private final IWebDriverManagerContext webDriverManagerContext;\n+\n+    public ApplicationSteps(IWebDriverProvider webDriverProvider, IWebDriverManagerContext webDriverManagerContext)\n+    {\n+        this.webDriverProvider = webDriverProvider;\n+        this.webDriverManagerContext = webDriverManagerContext;\n+    }\n+\n+    @Given(\"I run the application located at `$location` and capabilities:$capabilities\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dc8988a150f443f550d9ca492cb0d25ec2d5d415"}, "originalPosition": 46}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDE4NzA0Mw==", "bodyText": "I propose to do not make mobile_app as embedded vividus meta, let's allow users configure it", "url": "https://github.com/vividus-framework/vividus/pull/489#discussion_r450187043", "createdAt": "2020-07-06T12:30:01Z", "author": {"login": "valfirst"}, "path": "vividus-plugin-mobile-app/src/main/resources/properties/defaults/run.properties", "diffHunk": "@@ -0,0 +1,7 @@\n+spring.profiles.active=mobile_app\n+\n+bdd.all-meta-filters=groovy: (!layout || layout.contains('mobile_app')) && !skip && (${bdd.meta-filters})", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dc8988a150f443f550d9ca492cb0d25ec2d5d415"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDE4NzUyNw==", "bodyText": "it's not default grid capability, is it?", "url": "https://github.com/vividus-framework/vividus/pull/489#discussion_r450187527", "createdAt": "2020-07-06T12:30:56Z", "author": {"login": "valfirst"}, "path": "vividus-plugin-mobile-app/src/main/resources/properties/defaults/run.properties", "diffHunk": "@@ -0,0 +1,7 @@\n+spring.profiles.active=mobile_app\n+\n+bdd.all-meta-filters=groovy: (!layout || layout.contains('mobile_app')) && !skip && (${bdd.meta-filters})\n+\n+mobile-native-app=true\n+\n+selenium.grid.appium-version=1.17.0", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dc8988a150f443f550d9ca492cb0d25ec2d5d415"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDE4ODcxMg==", "bodyText": "it doesn't look like generic properties", "url": "https://github.com/vividus-framework/vividus/pull/489#discussion_r450188712", "createdAt": "2020-07-06T12:33:13Z", "author": {"login": "valfirst"}, "path": "vividus-plugin-mobile-app/src/main/resources/properties/profile/mobile_app/android/profile.properties", "diffHunk": "@@ -0,0 +1,4 @@\n+selenium.grid.device-name=Samsung Galaxy S10 Plus\n+selenium.grid.platform-name=Android\n+selenium.grid.platform-version=9.0\n+selenium.grid.automation-name=UIAutomator2", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dc8988a150f443f550d9ca492cb0d25ec2d5d415"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDE4ODgwNA==", "bodyText": "it doesn't look like generic properties", "url": "https://github.com/vividus-framework/vividus/pull/489#discussion_r450188804", "createdAt": "2020-07-06T12:33:25Z", "author": {"login": "valfirst"}, "path": "vividus-plugin-mobile-app/src/main/resources/properties/profile/mobile_app/ios/profile.properties", "diffHunk": "@@ -0,0 +1,4 @@\n+selenium.grid.device-name=iPhone 11 Pro\n+selenium.grid.platform-name=iOS\n+selenium.grid.platform-version=13.3\n+selenium.grid.automation-name=XCUITest", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dc8988a150f443f550d9ca492cb0d25ec2d5d415"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDE5MjM3Mg==", "bodyText": "I think we'll remove SauceLabsCapabilityType.java at some point, so I don't recommend to keep using it", "url": "https://github.com/vividus-framework/vividus/pull/489#discussion_r450192372", "createdAt": "2020-07-06T12:40:25Z", "author": {"login": "valfirst"}, "path": "vividus-extension-selenium/src/main/java/org/vividus/selenium/SauceLabsCapabilityType.java", "diffHunk": "@@ -28,4 +28,5 @@\n     String DEVICE = \"device\";\n     String CAPABILITIES = \"capabilities\";\n     String SELENIUM_VERSION = \"seleniumVersion\";\n+    String APP = \"app\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dc8988a150f443f550d9ca492cb0d25ec2d5d415"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDE5MjczMQ==", "bodyText": "there are both setter and @Inject, something is redundant", "url": "https://github.com/vividus-framework/vividus/pull/489#discussion_r450192731", "createdAt": "2020-07-06T12:41:08Z", "author": {"login": "valfirst"}, "path": "vividus-extension-selenium/src/main/java/org/vividus/selenium/WebDriverProvider.java", "diffHunk": "@@ -23,16 +23,16 @@\n import com.google.common.eventbus.EventBus;\n \n import org.openqa.selenium.WebDriver;\n+import org.vividus.selenium.event.WebDriverCreateEvent;\n+import org.vividus.selenium.event.WebDriverQuitEvent;\n import org.vividus.testcontext.TestContext;\n-import org.vividus.ui.web.event.WebDriverCreateEvent;\n-import org.vividus.ui.web.event.WebDriverQuitEvent;\n \n public class WebDriverProvider implements IWebDriverProvider\n {\n-    private IVividusWebDriverFactory vividusWebDriverFactory;\n+    @Inject private IVividusDriverFactory vividusWebDriverFactory;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dc8988a150f443f550d9ca492cb0d25ec2d5d415"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDE5Mjk5MA==", "bodyText": "DESIRED_CAPABILITIES_KEY", "url": "https://github.com/vividus-framework/vividus/pull/489#discussion_r450192990", "createdAt": "2020-07-06T12:41:38Z", "author": {"login": "valfirst"}, "path": "vividus-extension-selenium/src/main/java/org/vividus/selenium/manager/DriverManager.java", "diffHunk": "@@ -0,0 +1,285 @@\n+/*\n+ * Copyright 2019-2020 the original author or authors.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     https://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.vividus.selenium.manager;\n+\n+import java.util.Map;\n+import java.util.Set;\n+import java.util.function.BooleanSupplier;\n+import java.util.function.Consumer;\n+import java.util.function.Function;\n+import java.util.stream.Stream;\n+\n+import javax.inject.Inject;\n+\n+import org.openqa.selenium.Capabilities;\n+import org.openqa.selenium.ContextAware;\n+import org.openqa.selenium.Dimension;\n+import org.openqa.selenium.HasCapabilities;\n+import org.openqa.selenium.Platform;\n+import org.openqa.selenium.Rotatable;\n+import org.openqa.selenium.ScreenOrientation;\n+import org.openqa.selenium.WebDriver;\n+import org.openqa.selenium.remote.BrowserType;\n+import org.openqa.selenium.remote.CapabilityType;\n+import org.openqa.selenium.remote.DesiredCapabilities;\n+import org.vividus.selenium.IWebDriverProvider;\n+import org.vividus.selenium.SauceLabsCapabilityType;\n+import org.vividus.selenium.WebDriverUtil;\n+\n+import io.appium.java_client.MobileDriver;\n+import io.appium.java_client.MobileElement;\n+import io.appium.java_client.remote.MobilePlatform;\n+\n+public class DriverManager implements IDriverManager\n+{\n+    private static final String DESIREDCAPABILITIES_KEY = \"desired\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dc8988a150f443f550d9ca492cb0d25ec2d5d415"}, "originalPosition": 49}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDE5NDE0Mw==", "bodyText": "org.vividus.selenium.mobileapp the same for all other similar places", "url": "https://github.com/vividus-framework/vividus/pull/489#discussion_r450194143", "createdAt": "2020-07-06T12:43:52Z", "author": {"login": "valfirst"}, "path": "vividus-plugin-mobile-app/src/main/java/org/vividus/mobileapp/selenium/VividusMobileAppDriverFactory.java", "diffHunk": "@@ -0,0 +1,55 @@\n+/*\n+ * Copyright 2019-2020 the original author or authors.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     https://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.vividus.mobileapp.selenium;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dc8988a150f443f550d9ca492cb0d25ec2d5d415"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDE5NDU5NA==", "bodyText": "NAME - is SL specific capability, I don't think we should use it in generic modules", "url": "https://github.com/vividus-framework/vividus/pull/489#discussion_r450194594", "createdAt": "2020-07-06T12:44:43Z", "author": {"login": "valfirst"}, "path": "vividus-plugin-mobile-app/src/main/java/org/vividus/mobileapp/selenium/VividusMobileAppDriverFactory.java", "diffHunk": "@@ -0,0 +1,55 @@\n+/*\n+ * Copyright 2019-2020 the original author or authors.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     https://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.vividus.mobileapp.selenium;\n+\n+import org.jbehave.core.model.Scenario;\n+import org.openqa.selenium.remote.DesiredCapabilities;\n+import org.vividus.bdd.context.IBddRunContext;\n+import org.vividus.bdd.model.MetaWrapper;\n+import org.vividus.bdd.model.RunningStory;\n+import org.vividus.selenium.AbstractVividusDriverFactory;\n+import org.vividus.selenium.IDriverFactory;\n+import org.vividus.selenium.SauceLabsCapabilityType;\n+import org.vividus.selenium.VividusWebDriver;\n+import org.vividus.selenium.manager.IWebDriverManagerContext;\n+\n+public class VividusMobileAppDriverFactory extends AbstractVividusDriverFactory\n+{\n+    private final IDriverFactory driverFactory;\n+\n+    public VividusMobileAppDriverFactory(IBddRunContext bddRunContext, IWebDriverManagerContext webDriverManagerContext,\n+            IDriverFactory driverFactory)\n+    {\n+        super(bddRunContext, webDriverManagerContext);\n+        this.driverFactory = driverFactory;\n+    }\n+\n+    @Override\n+    protected void configureVividusWebDriver(VividusWebDriver vividusWebDriver)\n+    {\n+        DesiredCapabilities capabilities = vividusWebDriver.getDesiredCapabilities();\n+        vividusWebDriver.setWebDriver(driverFactory.getRemoteWebDriver(capabilities));\n+        vividusWebDriver.setRemote(false);\n+    }\n+\n+    @Override\n+    protected void setDesiredCapabilities(DesiredCapabilities desiredCapabilities, RunningStory runningStory,\n+            Scenario scenario, MetaWrapper metaWrapper)\n+    {\n+        desiredCapabilities.setCapability(SauceLabsCapabilityType.NAME, runningStory.getName());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dc8988a150f443f550d9ca492cb0d25ec2d5d415"}, "originalPosition": 53}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "dc8988a150f443f550d9ca492cb0d25ec2d5d415", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/dc8988a150f443f550d9ca492cb0d25ec2d5d415", "committedDate": "2020-07-06T09:19:35Z", "message": "Mobile app support"}, "afterCommit": {"oid": "8be748cee581e3db27a66a64c88d5edfc5551d5f", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/8be748cee581e3db27a66a64c88d5edfc5551d5f", "committedDate": "2020-07-07T11:46:12Z", "message": "Fix comments [1]"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ0ODAzMTUy", "url": "https://github.com/vividus-framework/vividus/pull/489#pullrequestreview-444803152", "createdAt": "2020-07-08T14:08:31Z", "commit": {"oid": "becf7b8fbfe8a62acf8703f2072c0f289cf9b7fe"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQxNDowODozMVrOGup3yg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQxNDoxMzoyOFrOGuqGtA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTU3MzcwNg==", "bodyText": "I think simulators == emulators", "url": "https://github.com/vividus-framework/vividus/pull/489#discussion_r451573706", "createdAt": "2020-07-08T14:08:31Z", "author": {"login": "valfirst"}, "path": "docs/modules/plugins/pages/plugin-mobile-app.adoc", "diffHunk": "@@ -0,0 +1,111 @@\n+= Plugin Mobile App\n+\n+== General Info\n+\n+The plugin provides functionality to test mobile application on real devides, simulators and emulators", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "becf7b8fbfe8a62acf8703f2072c0f289cf9b7fe"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTU3NTA4NA==", "bodyText": "I believe 3 above properties are not mobile specific, but Selenium Grid generic ones, so it makes sense to reflect it somehow here", "url": "https://github.com/vividus-framework/vividus/pull/489#discussion_r451575084", "createdAt": "2020-07-08T14:10:17Z", "author": {"login": "valfirst"}, "path": "docs/modules/plugins/pages/plugin-mobile-app.adoc", "diffHunk": "@@ -0,0 +1,111 @@\n+= Plugin Mobile App\n+\n+== General Info\n+\n+The plugin provides functionality to test mobile application on real devides, simulators and emulators\n+\n+== Installation\n+\n+.build.gradle\n+[source,gradle]\n+----\n+implementation(group: 'org.vividus', name: 'vividus-plugin-mobile-app', version: '<version>')\n+----\n+\n+== Properties\n+\n+=== Required\n+\n+* `selenium.grid.device-name` - defines device name to run tests on\n+* `selenium.grid.username` - defines remote grid username\n+* `selenium.grid.password` - defines remote grid password\n+* `selenium.grid.host` - defines remote grid host", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "becf7b8fbfe8a62acf8703f2072c0f289cf9b7fe"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTU3NTg1OA==", "bodyText": "can we provided table-like view with mapping Mobile OS <> recommended automation engine", "url": "https://github.com/vividus-framework/vividus/pull/489#discussion_r451575858", "createdAt": "2020-07-08T14:11:16Z", "author": {"login": "valfirst"}, "path": "docs/modules/plugins/pages/plugin-mobile-app.adoc", "diffHunk": "@@ -0,0 +1,111 @@\n+= Plugin Mobile App\n+\n+== General Info\n+\n+The plugin provides functionality to test mobile application on real devides, simulators and emulators\n+\n+== Installation\n+\n+.build.gradle\n+[source,gradle]\n+----\n+implementation(group: 'org.vividus', name: 'vividus-plugin-mobile-app', version: '<version>')\n+----\n+\n+== Properties\n+\n+=== Required\n+\n+* `selenium.grid.device-name` - defines device name to run tests on\n+* `selenium.grid.username` - defines remote grid username\n+* `selenium.grid.password` - defines remote grid password\n+* `selenium.grid.host` - defines remote grid host\n+\n+=== Optional\n+\n+* `selenium.grid.automation-name` - defines automation engine to use, e.g. `UIAutomator2` for `Android` platform and `XCUITest` for `iOS` platform", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "becf7b8fbfe8a62acf8703f2072c0f289cf9b7fe"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTU3NjMxOQ==", "bodyText": "it should go first in optional properties", "url": "https://github.com/vividus-framework/vividus/pull/489#discussion_r451576319", "createdAt": "2020-07-08T14:11:50Z", "author": {"login": "valfirst"}, "path": "docs/modules/plugins/pages/plugin-mobile-app.adoc", "diffHunk": "@@ -0,0 +1,111 @@\n+= Plugin Mobile App\n+\n+== General Info\n+\n+The plugin provides functionality to test mobile application on real devides, simulators and emulators\n+\n+== Installation\n+\n+.build.gradle\n+[source,gradle]\n+----\n+implementation(group: 'org.vividus', name: 'vividus-plugin-mobile-app', version: '<version>')\n+----\n+\n+== Properties\n+\n+=== Required\n+\n+* `selenium.grid.device-name` - defines device name to run tests on\n+* `selenium.grid.username` - defines remote grid username\n+* `selenium.grid.password` - defines remote grid password\n+* `selenium.grid.host` - defines remote grid host\n+\n+=== Optional\n+\n+* `selenium.grid.automation-name` - defines automation engine to use, e.g. `UIAutomator2` for `Android` platform and `XCUITest` for `iOS` platform\n+* `selenium.grid.platform-name` - defines mobile OS to use, e.g. `Android` or `iOS`", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "becf7b8fbfe8a62acf8703f2072c0f289cf9b7fe"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTU3NjgxOQ==", "bodyText": "it should go last in profiles", "url": "https://github.com/vividus-framework/vividus/pull/489#discussion_r451576819", "createdAt": "2020-07-08T14:12:30Z", "author": {"login": "valfirst"}, "path": "docs/modules/plugins/pages/plugin-mobile-app.adoc", "diffHunk": "@@ -0,0 +1,111 @@\n+= Plugin Mobile App\n+\n+== General Info\n+\n+The plugin provides functionality to test mobile application on real devides, simulators and emulators\n+\n+== Installation\n+\n+.build.gradle\n+[source,gradle]\n+----\n+implementation(group: 'org.vividus', name: 'vividus-plugin-mobile-app', version: '<version>')\n+----\n+\n+== Properties\n+\n+=== Required\n+\n+* `selenium.grid.device-name` - defines device name to run tests on\n+* `selenium.grid.username` - defines remote grid username\n+* `selenium.grid.password` - defines remote grid password\n+* `selenium.grid.host` - defines remote grid host\n+\n+=== Optional\n+\n+* `selenium.grid.automation-name` - defines automation engine to use, e.g. `UIAutomator2` for `Android` platform and `XCUITest` for `iOS` platform\n+* `selenium.grid.platform-name` - defines mobile OS to use, e.g. `Android` or `iOS`\n+\n+== Profiles\n+\n+=== Browserstack", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "becf7b8fbfe8a62acf8703f2072c0f289cf9b7fe"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTU3NzUyNA==", "bodyText": "create the actual link instead of URL", "url": "https://github.com/vividus-framework/vividus/pull/489#discussion_r451577524", "createdAt": "2020-07-08T14:13:28Z", "author": {"login": "valfirst"}, "path": "docs/modules/plugins/pages/plugin-mobile-app.adoc", "diffHunk": "@@ -0,0 +1,111 @@\n+= Plugin Mobile App\n+\n+== General Info\n+\n+The plugin provides functionality to test mobile application on real devides, simulators and emulators\n+\n+== Installation\n+\n+.build.gradle\n+[source,gradle]\n+----\n+implementation(group: 'org.vividus', name: 'vividus-plugin-mobile-app', version: '<version>')\n+----\n+\n+== Properties\n+\n+=== Required\n+\n+* `selenium.grid.device-name` - defines device name to run tests on\n+* `selenium.grid.username` - defines remote grid username\n+* `selenium.grid.password` - defines remote grid password\n+* `selenium.grid.host` - defines remote grid host\n+\n+=== Optional\n+\n+* `selenium.grid.automation-name` - defines automation engine to use, e.g. `UIAutomator2` for `Android` platform and `XCUITest` for `iOS` platform\n+* `selenium.grid.platform-name` - defines mobile OS to use, e.g. `Android` or `iOS`\n+\n+== Profiles\n+\n+=== Browserstack\n+\n+* The profile can be enabled by adding `browserstack/mobile_app` to `configuration.profiles` property\n+* Browserstack specific properties must be prepended with `selenium.grid.capabilities.bstack\\:options.` prefix, meaning given a property `projectName` with a value `My Project` the resulting property will be `selenium.grid.capabilities.bstack\\:options.projectName=My Project`\n+* Appium specific properties in browserstack must be prepended with `selenium.grid.capabilities.appium\\:options.` prefix, meaning given a property `clearSystemFiles` with a value `true` the resulting property will be `selenium.grid.capabilities.appium\\:options.clearSystemFiles=true`\n+* Platform configurator can be found by the https://www.browserstack.com/automate/capabilities?tag=selenium-4 link", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "becf7b8fbfe8a62acf8703f2072c0f289cf9b7fe"}, "originalPosition": 36}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "af51bf993bd41fcc4ef7667f9e26507bf3a1346f", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/af51bf993bd41fcc4ef7667f9e26507bf3a1346f", "committedDate": "2020-07-08T15:44:32Z", "message": "Fix doc comments [6]"}, "afterCommit": {"oid": "fee7530497b90fdc8c5dd589cd10660f2cc2a1eb", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/fee7530497b90fdc8c5dd589cd10660f2cc2a1eb", "committedDate": "2020-07-10T11:18:40Z", "message": "Mobile app support"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ3MTEzNzEx", "url": "https://github.com/vividus-framework/vividus/pull/489#pullrequestreview-447113711", "createdAt": "2020-07-13T10:07:45Z", "commit": {"oid": "fee7530497b90fdc8c5dd589cd10660f2cc2a1eb"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QxMDowNzo0NlrOGwh95A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QxMDozMToyMlrOGwiv-Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzU0MTM0OA==", "bodyText": "looks confusing, like it relates to a configuraiton.properties when it relates to remote tests execution", "url": "https://github.com/vividus-framework/vividus/pull/489#discussion_r453541348", "createdAt": "2020-07-13T10:07:46Z", "author": {"login": "ikalinin1"}, "path": "docs/modules/ROOT/pages/configuration.adoc", "diffHunk": "@@ -0,0 +1,7 @@\n+= Configuration Properties", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fee7530497b90fdc8c5dd589cd10660f2cc2a1eb"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzU0MjM0Mg==", "bodyText": "use some version instead of placeholder?", "url": "https://github.com/vividus-framework/vividus/pull/489#discussion_r453542342", "createdAt": "2020-07-13T10:09:39Z", "author": {"login": "ikalinin1"}, "path": "docs/modules/plugins/pages/plugin-mobile-app.adoc", "diffHunk": "@@ -0,0 +1,124 @@\n+= Plugin Mobile App\n+\n+== General Info\n+\n+The plugin provides functionality to test mobile application on real devides, Android Emulators and iOS Simulators\n+\n+== Installation\n+\n+.build.gradle\n+[source,gradle]\n+----\n+implementation(group: 'org.vividus', name: 'vividus-plugin-mobile-app', version: '<version>')", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fee7530497b90fdc8c5dd589cd10660f2cc2a1eb"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzU0MzA3NA==", "bodyText": "enging - typo", "url": "https://github.com/vividus-framework/vividus/pull/489#discussion_r453543074", "createdAt": "2020-07-13T10:10:52Z", "author": {"login": "ikalinin1"}, "path": "docs/modules/plugins/pages/plugin-mobile-app.adoc", "diffHunk": "@@ -0,0 +1,124 @@\n+= Plugin Mobile App\n+\n+== General Info\n+\n+The plugin provides functionality to test mobile application on real devides, Android Emulators and iOS Simulators\n+\n+== Installation\n+\n+.build.gradle\n+[source,gradle]\n+----\n+implementation(group: 'org.vividus', name: 'vividus-plugin-mobile-app', version: '<version>')\n+----\n+\n+== Properties\n+\n+=== Required\n+\n+* `selenium.grid.device-name` - defines device name to run tests on\n+\n+See xref:ROOT:configuration.adoc[Selenium Grid] properties to configure remote grid\n+\n+=== Optional\n+\n+* `selenium.grid.platform-name` - defines mobile OS to use, e.g. `Android` or `iOS`\n+* `selenium.grid.automation-name` - defines automation engine to use, see <<automation-engines, automation engines>> table for details\n+\n+.[[automation-engines]]Automation engines\n+[cols=\"1,2\", options=\"header\"]\n+|===\n+\n+|Platform\n+|Recommended enging", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fee7530497b90fdc8c5dd589cd10660f2cc2a1eb"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzU0MzUxNQ==", "bodyText": "add some external links to get more info about underlying engines?", "url": "https://github.com/vividus-framework/vividus/pull/489#discussion_r453543515", "createdAt": "2020-07-13T10:11:44Z", "author": {"login": "ikalinin1"}, "path": "docs/modules/plugins/pages/plugin-mobile-app.adoc", "diffHunk": "@@ -0,0 +1,124 @@\n+= Plugin Mobile App\n+\n+== General Info\n+\n+The plugin provides functionality to test mobile application on real devides, Android Emulators and iOS Simulators\n+\n+== Installation\n+\n+.build.gradle\n+[source,gradle]\n+----\n+implementation(group: 'org.vividus', name: 'vividus-plugin-mobile-app', version: '<version>')\n+----\n+\n+== Properties\n+\n+=== Required\n+\n+* `selenium.grid.device-name` - defines device name to run tests on\n+\n+See xref:ROOT:configuration.adoc[Selenium Grid] properties to configure remote grid\n+\n+=== Optional\n+\n+* `selenium.grid.platform-name` - defines mobile OS to use, e.g. `Android` or `iOS`\n+* `selenium.grid.automation-name` - defines automation engine to use, see <<automation-engines, automation engines>> table for details", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fee7530497b90fdc8c5dd589cd10660f2cc2a1eb"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzU0NDA5Mw==", "bodyText": "should be before MongoDB?", "url": "https://github.com/vividus-framework/vividus/pull/489#discussion_r453544093", "createdAt": "2020-07-13T10:12:49Z", "author": {"login": "ikalinin1"}, "path": "docs/modules/plugins/nav.adoc", "diffHunk": "@@ -8,6 +8,7 @@\n * xref:plugin-excel.adoc[Excel*]\n * xref:plugin-html.adoc[HTML*]\n * xref:plugin-mongodb.adoc[MongoDB*]\n+* xref:plugin-mobile-app.adoc[Mobile App]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fee7530497b90fdc8c5dd589cd10660f2cc2a1eb"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzU0NzQ4OQ==", "bodyText": "don't you mind to align it with getPropertyValuesTreeByPrefix?", "url": "https://github.com/vividus-framework/vividus/pull/489#discussion_r453547489", "createdAt": "2020-07-13T10:18:58Z", "author": {"login": "ikalinin1"}, "path": "vividus-extension-selenium/src/main/java/org/vividus/selenium/AbstractWebDriverFactory.java", "diffHunk": "@@ -0,0 +1,175 @@\n+/*\n+ * Copyright 2019-2020 the original author or authors.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     https://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.vividus.selenium;\n+\n+import static java.util.stream.Collectors.toMap;\n+import static org.apache.commons.lang3.StringUtils.equalsAnyIgnoreCase;\n+\n+import java.net.URL;\n+import java.util.HashMap;\n+import java.util.Map;\n+import java.util.Map.Entry;\n+import java.util.function.Supplier;\n+import java.util.stream.Collectors;\n+\n+import com.google.common.base.Suppliers;\n+import com.google.common.cache.CacheBuilder;\n+import com.google.common.cache.CacheLoader;\n+import com.google.common.cache.LoadingCache;\n+\n+import org.openqa.selenium.HasCapabilities;\n+import org.openqa.selenium.WebDriver;\n+import org.openqa.selenium.remote.DesiredCapabilities;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.vividus.selenium.driver.TextFormattingWebDriver;\n+import org.vividus.util.json.JsonUtils;\n+import org.vividus.util.property.IPropertyParser;\n+\n+public abstract class AbstractWebDriverFactory implements IGenericWebDriverFactory\n+{\n+    private static final Logger LOGGER = LoggerFactory.getLogger(AbstractWebDriverFactory.class);\n+\n+    private static final String SELENIUM_GRID_PROPERTY_PREFIX = \"selenium.grid.capabilities.\";\n+    private static final String LOCAL_DRIVER_PROPERTY_PREFIX = \"selenium.capabilities.\";\n+\n+    private final IRemoteWebDriverFactory remoteWebDriverFactory;\n+    private final IPropertyParser propertyParser;\n+    private final JsonUtils jsonUtils;\n+\n+    private URL remoteDriverUrl;\n+\n+    private final Supplier<DesiredCapabilities> seleniumGridDesiredCapabilities = Suppliers.memoize(\n+        () -> getCapabilitiesByPrefix(SELENIUM_GRID_PROPERTY_PREFIX));\n+\n+    private final Supplier<DesiredCapabilities> localDriverDesiredCapabilities = Suppliers.memoize(\n+        () -> getCapabilitiesByPrefix(LOCAL_DRIVER_PROPERTY_PREFIX));\n+\n+    private final LoadingCache<Boolean, DesiredCapabilities> webDriverCapabilities = CacheBuilder.newBuilder()\n+            .build(new CacheLoader<Boolean, DesiredCapabilities>()\n+            {\n+                @Override\n+                public DesiredCapabilities load(Boolean local)\n+                {\n+                    DesiredCapabilities localCapabilities = localDriverDesiredCapabilities.get();\n+                    if (Boolean.TRUE.equals(local))\n+                    {\n+                        return localCapabilities;\n+                    }\n+                    return merge(localCapabilities, seleniumGridDesiredCapabilities.get());\n+                }\n+            });\n+\n+    public AbstractWebDriverFactory(IRemoteWebDriverFactory remoteWebDriverFactory, IPropertyParser propertyParser,\n+            JsonUtils jsonUtils)\n+    {\n+        this.remoteWebDriverFactory = remoteWebDriverFactory;\n+        this.propertyParser = propertyParser;\n+        this.jsonUtils = jsonUtils;\n+    }\n+\n+    private DesiredCapabilities getCapabilitiesByPrefix(String prefix)\n+    {\n+        return propertyParser.getPropertyValuesTreeByPrefix(prefix)\n+            .entrySet()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fee7530497b90fdc8c5dd589cd10660f2cc2a1eb"}, "originalPosition": 88}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzU0ODc4Mw==", "bodyText": "Why it can't be part of mobile-app plugin?\nIf you starting web profile you will have RemoteDriverFactory if you starting the mobile app profile you will have an available factory for ios/android", "url": "https://github.com/vividus-framework/vividus/pull/489#discussion_r453548783", "createdAt": "2020-07-13T10:21:24Z", "author": {"login": "ikalinin1"}, "path": "vividus-extension-selenium/src/main/java/org/vividus/selenium/RemoteWebDriverFactory.java", "diffHunk": "@@ -30,11 +30,11 @@\n     @Override\n     public RemoteWebDriver getRemoteWebDriver(URL url, Capabilities capabilities)\n     {\n-        if (WebDriverManager.isIOS(capabilities))\n+        if (GenericWebDriverManager.isIOS(capabilities))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fee7530497b90fdc8c5dd589cd10660f2cc2a1eb"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzU1MTcyMw==", "bodyText": "why it is necessary?", "url": "https://github.com/vividus-framework/vividus/pull/489#discussion_r453551723", "createdAt": "2020-07-13T10:26:44Z", "author": {"login": "ikalinin1"}, "path": "vividus-plugin-applitools/src/main/java/org/vividus/bdd/converter/ExamplesTableToApplitoolsVisualChecksConverter.java", "diffHunk": "@@ -20,15 +20,12 @@\n import java.util.List;\n import java.util.stream.Collectors;\n \n-import javax.inject.Named;\n-\n import org.apache.commons.lang3.Validate;\n import org.jbehave.core.model.ExamplesTable;\n import org.jbehave.core.steps.ParameterConverters.AbstractChainableParameterConverter;\n import org.vividus.visual.eyes.factory.ApplitoolsVisualCheckFactory;\n import org.vividus.visual.eyes.model.ApplitoolsVisualCheck;\n \n-@Named", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fee7530497b90fdc8c5dd589cd10660f2cc2a1eb"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzU1Mzk4NA==", "bodyText": "why not name?\nDesiredCapability capability = new DC...;\ncapability.setName() vs capability.setCapabilityName()", "url": "https://github.com/vividus-framework/vividus/pull/489#discussion_r453553984", "createdAt": "2020-07-13T10:30:56Z", "author": {"login": "ikalinin1"}, "path": "vividus-plugin-mobile-app/src/main/java/org/vividus/bdd/mobileapp/model/DesiredCapability.java", "diffHunk": "@@ -0,0 +1,46 @@\n+/*\n+ * Copyright 2019-2020 the original author or authors.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     https://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.vividus.bdd.mobileapp.model;\n+\n+import org.jbehave.core.annotations.AsParameters;\n+\n+@AsParameters\n+public class DesiredCapability\n+{\n+    private String capabilityName;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fee7530497b90fdc8c5dd589cd10660f2cc2a1eb"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzU1NDE2OQ==", "bodyText": "It's like\nList.getListSize()", "url": "https://github.com/vividus-framework/vividus/pull/489#discussion_r453554169", "createdAt": "2020-07-13T10:31:22Z", "author": {"login": "ikalinin1"}, "path": "vividus-plugin-mobile-app/src/main/java/org/vividus/bdd/mobileapp/model/DesiredCapability.java", "diffHunk": "@@ -0,0 +1,46 @@\n+/*\n+ * Copyright 2019-2020 the original author or authors.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     https://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.vividus.bdd.mobileapp.model;\n+\n+import org.jbehave.core.annotations.AsParameters;\n+\n+@AsParameters\n+public class DesiredCapability\n+{\n+    private String capabilityName;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzU1Mzk4NA=="}, "originalCommit": {"oid": "fee7530497b90fdc8c5dd589cd10660f2cc2a1eb"}, "originalPosition": 24}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fee7530497b90fdc8c5dd589cd10660f2cc2a1eb", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/fee7530497b90fdc8c5dd589cd10660f2cc2a1eb", "committedDate": "2020-07-10T11:18:40Z", "message": "Mobile app support"}, "afterCommit": {"oid": "24e9f741c870c2650cc6ba41c2d8063ffb015e88", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/24e9f741c870c2650cc6ba41c2d8063ffb015e88", "committedDate": "2020-07-16T08:39:14Z", "message": "Mobile app support"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "24e9f741c870c2650cc6ba41c2d8063ffb015e88", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/24e9f741c870c2650cc6ba41c2d8063ffb015e88", "committedDate": "2020-07-16T08:39:14Z", "message": "Mobile app support"}, "afterCommit": {"oid": "3b5522fdaebd8d5c49b7160d7231076764db8dc2", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/3b5522fdaebd8d5c49b7160d7231076764db8dc2", "committedDate": "2020-07-16T08:55:10Z", "message": "Mobile app support"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3b5522fdaebd8d5c49b7160d7231076764db8dc2", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/3b5522fdaebd8d5c49b7160d7231076764db8dc2", "committedDate": "2020-07-16T08:55:10Z", "message": "Mobile app support"}, "afterCommit": {"oid": "c17c42ca867f7e683e09955836e9c27d2673682c", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/c17c42ca867f7e683e09955836e9c27d2673682c", "committedDate": "2020-07-16T08:59:11Z", "message": "Mobile app support"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c17c42ca867f7e683e09955836e9c27d2673682c", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/c17c42ca867f7e683e09955836e9c27d2673682c", "committedDate": "2020-07-16T08:59:11Z", "message": "Mobile app support"}, "afterCommit": {"oid": "c42ae38caf1b6cacfb4e10aace7c1ba4ff0fe4fd", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/c42ae38caf1b6cacfb4e10aace7c1ba4ff0fe4fd", "committedDate": "2020-07-16T10:29:30Z", "message": "Mobile app support"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUzNjIzNDY2", "url": "https://github.com/vividus-framework/vividus/pull/489#pullrequestreview-453623466", "createdAt": "2020-07-22T19:33:53Z", "commit": {"oid": "871b6412893edd1c1786b4a8e5f9f6deb1ea8cb9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c07f568165a4e7c21c59091e9eb2a23ca55f6d35", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/c07f568165a4e7c21c59091e9eb2a23ca55f6d35", "committedDate": "2020-07-22T19:46:29Z", "message": "Mobile app support"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "871b6412893edd1c1786b4a8e5f9f6deb1ea8cb9", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/871b6412893edd1c1786b4a8e5f9f6deb1ea8cb9", "committedDate": "2020-07-22T15:59:54Z", "message": "Separate system tests [to squash]"}, "afterCommit": {"oid": "c07f568165a4e7c21c59091e9eb2a23ca55f6d35", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/c07f568165a4e7c21c59091e9eb2a23ca55f6d35", "committedDate": "2020-07-22T19:46:29Z", "message": "Mobile app support"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUzODkzNzA1", "url": "https://github.com/vividus-framework/vividus/pull/489#pullrequestreview-453893705", "createdAt": "2020-07-23T07:33:24Z", "commit": {"oid": "c07f568165a4e7c21c59091e9eb2a23ca55f6d35"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 293, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}