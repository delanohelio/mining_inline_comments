{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk5Mjc3MTk1", "number": 999, "title": "Add ability to use composite steps in known-issues", "bodyText": "Fixes #762", "createdAt": "2020-10-07T14:05:13Z", "url": "https://github.com/vividus-framework/vividus/pull/999", "merged": true, "mergeCommit": {"oid": "bd433cb7bc1eea8b92413d690b4103a865beeb76"}, "closed": true, "closedAt": "2020-10-21T14:48:31Z", "author": {"login": "abudevich"}, "timelineItems": {"totalCount": 30, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdSGxZ-ABqjM4NzA3NDU0NzA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdUqhIHgBqjM5MDMwMTkxNDA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "aead5ca39379f1b2bb5a5f2c735440671198bbac", "author": {"user": {"login": "abudevich", "name": null}}, "url": "https://github.com/vividus-framework/vividus/commit/aead5ca39379f1b2bb5a5f2c735440671198bbac", "committedDate": "2020-10-07T14:01:09Z", "message": "FIX"}, "afterCommit": {"oid": "869cfd45a509b3c937cf0a941ec1107916152dd6", "author": {"user": {"login": "abudevich", "name": null}}, "url": "https://github.com/vividus-framework/vividus/commit/869cfd45a509b3c937cf0a941ec1107916152dd6", "committedDate": "2020-10-13T11:15:18Z", "message": "FIX"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "869cfd45a509b3c937cf0a941ec1107916152dd6", "author": {"user": {"login": "abudevich", "name": null}}, "url": "https://github.com/vividus-framework/vividus/commit/869cfd45a509b3c937cf0a941ec1107916152dd6", "committedDate": "2020-10-13T11:15:18Z", "message": "FIX"}, "afterCommit": {"oid": "69f1da184076f6362f10597240204d209f0b7fe0", "author": {"user": {"login": "abudevich", "name": null}}, "url": "https://github.com/vividus-framework/vividus/commit/69f1da184076f6362f10597240204d209f0b7fe0", "committedDate": "2020-10-14T12:25:19Z", "message": "FIX"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "69f1da184076f6362f10597240204d209f0b7fe0", "author": {"user": {"login": "abudevich", "name": null}}, "url": "https://github.com/vividus-framework/vividus/commit/69f1da184076f6362f10597240204d209f0b7fe0", "committedDate": "2020-10-14T12:25:19Z", "message": "FIX"}, "afterCommit": {"oid": "05713fd0541ac7adf79218182f31a7c80017c347", "author": {"user": {"login": "abudevich", "name": null}}, "url": "https://github.com/vividus-framework/vividus/commit/05713fd0541ac7adf79218182f31a7c80017c347", "committedDate": "2020-10-15T10:46:27Z", "message": "Add ability to use composite steps in known-issues"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "05713fd0541ac7adf79218182f31a7c80017c347", "author": {"user": {"login": "abudevich", "name": null}}, "url": "https://github.com/vividus-framework/vividus/commit/05713fd0541ac7adf79218182f31a7c80017c347", "committedDate": "2020-10-15T10:46:27Z", "message": "Add ability to use composite steps in known-issues"}, "afterCommit": {"oid": "3629d5920eea40b302b6d235ba566eb748e47055", "author": {"user": {"login": "abudevich", "name": null}}, "url": "https://github.com/vividus-framework/vividus/commit/3629d5920eea40b302b6d235ba566eb748e47055", "committedDate": "2020-10-15T11:05:09Z", "message": "Add ability to use composite steps in known-issues"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA5Mjg4OTk0", "url": "https://github.com/vividus-framework/vividus/pull/999#pullrequestreview-509288994", "createdAt": "2020-10-15T11:43:59Z", "commit": {"oid": "3629d5920eea40b302b6d235ba566eb748e47055"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQxMTo0Mzo1OVrOHiDwNg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQxMTo0Nzo1NFrOHiD4bg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTQ3NTEyNg==", "bodyText": "I propose to use Deque", "url": "https://github.com/vividus-framework/vividus/pull/999#discussion_r505475126", "createdAt": "2020-10-15T11:43:59Z", "author": {"login": "valfirst"}, "path": "vividus-soft-assert/src/main/java/org/vividus/softassert/issue/TestInfo.java", "diffHunk": "@@ -16,11 +16,13 @@\n \n package org.vividus.softassert.issue;\n \n+import java.util.List;\n+\n public class TestInfo\n {\n     private String testSuite;\n     private String testCase;\n-    private String testStep;\n+    private List<String> testSteps;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3629d5920eea40b302b6d235ba566eb748e47055"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTQ3NjIxNw==", "bodyText": "when can testInfo.getTestSteps() be null?", "url": "https://github.com/vividus-framework/vividus/pull/999#discussion_r505476217", "createdAt": "2020-10-15T11:45:58Z", "author": {"login": "valfirst"}, "path": "vividus-soft-assert/src/main/java/org/vividus/softassert/issue/KnownIssueChecker.java", "diffHunk": "@@ -142,8 +142,10 @@ boolean isPotentiallyKnown(KnownIssueIdentifier knownIssueIdentifier)\n             return testInfo != null && (\n                     isPotentiallyKnown(testInfo.getTestSuite(), knownIssueIdentifier.getTestSuiteCompiledPattern())\n                             || isPotentiallyKnown(testInfo.getTestCase(),\n-                            knownIssueIdentifier.getTestCaseCompiledPattern()) || isPotentiallyKnown(\n-                            testInfo.getTestStep(), knownIssueIdentifier.getTestStepCompiledPattern()));\n+                            knownIssueIdentifier.getTestCaseCompiledPattern())\n+                            || (testInfo.getTestSteps() != null && !testInfo.getTestSteps().stream()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3629d5920eea40b302b6d235ba566eb748e47055"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTQ3NjYxOA==", "bodyText": "I propose to use Deque", "url": "https://github.com/vividus-framework/vividus/pull/999#discussion_r505476618", "createdAt": "2020-10-15T11:46:45Z", "author": {"login": "valfirst"}, "path": "vividus/src/main/java/org/vividus/bdd/CompositeStepReporter.java", "diffHunk": "@@ -0,0 +1,61 @@\n+/*\n+ * Copyright 2019-2020 the original author or authors.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     https://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.vividus.bdd;\n+\n+import java.util.Stack;\n+\n+import org.vividus.bdd.context.IBddRunContext;\n+\n+public class CompositeStepReporter extends ChainedStoryReporter\n+{\n+    private IBddRunContext bddRunContext;\n+\n+    private Stack<String> steps = new Stack<>();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3629d5920eea40b302b6d235ba566eb748e47055"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTQ3NzIzMA==", "bodyText": "Also I think this logic should be moved to BddRunContext", "url": "https://github.com/vividus-framework/vividus/pull/999#discussion_r505477230", "createdAt": "2020-10-15T11:47:54Z", "author": {"login": "valfirst"}, "path": "vividus/src/main/java/org/vividus/bdd/CompositeStepReporter.java", "diffHunk": "@@ -0,0 +1,61 @@\n+/*\n+ * Copyright 2019-2020 the original author or authors.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     https://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.vividus.bdd;\n+\n+import java.util.Stack;\n+\n+import org.vividus.bdd.context.IBddRunContext;\n+\n+public class CompositeStepReporter extends ChainedStoryReporter\n+{\n+    private IBddRunContext bddRunContext;\n+\n+    private Stack<String> steps = new Stack<>();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3629d5920eea40b302b6d235ba566eb748e47055"}, "originalPosition": 27}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3629d5920eea40b302b6d235ba566eb748e47055", "author": {"user": {"login": "abudevich", "name": null}}, "url": "https://github.com/vividus-framework/vividus/commit/3629d5920eea40b302b6d235ba566eb748e47055", "committedDate": "2020-10-15T11:05:09Z", "message": "Add ability to use composite steps in known-issues"}, "afterCommit": {"oid": "a019131169c68e1e55c9c7978f6f77dc93a07eac", "author": {"user": {"login": "abudevich", "name": null}}, "url": "https://github.com/vividus-framework/vividus/commit/a019131169c68e1e55c9c7978f6f77dc93a07eac", "committedDate": "2020-10-16T07:57:45Z", "message": "Add ability to use composite steps in known-issues"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a019131169c68e1e55c9c7978f6f77dc93a07eac", "author": {"user": {"login": "abudevich", "name": null}}, "url": "https://github.com/vividus-framework/vividus/commit/a019131169c68e1e55c9c7978f6f77dc93a07eac", "committedDate": "2020-10-16T07:57:45Z", "message": "Add ability to use composite steps in known-issues"}, "afterCommit": {"oid": "c7c00dd77c0e794471bd1e817e230e2a8a3b4e49", "author": {"user": {"login": "abudevich", "name": null}}, "url": "https://github.com/vividus-framework/vividus/commit/c7c00dd77c0e794471bd1e817e230e2a8a3b4e49", "committedDate": "2020-10-16T08:24:57Z", "message": "Add ability to use composite steps in known-issues"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c7c00dd77c0e794471bd1e817e230e2a8a3b4e49", "author": {"user": {"login": "abudevich", "name": null}}, "url": "https://github.com/vividus-framework/vividus/commit/c7c00dd77c0e794471bd1e817e230e2a8a3b4e49", "committedDate": "2020-10-16T08:24:57Z", "message": "Add ability to use composite steps in known-issues"}, "afterCommit": {"oid": "bab502f15ff85e3a378c1b7f22df5a398b8581ba", "author": {"user": {"login": "abudevich", "name": null}}, "url": "https://github.com/vividus-framework/vividus/commit/bab502f15ff85e3a378c1b7f22df5a398b8581ba", "committedDate": "2020-10-16T10:53:05Z", "message": "Add ability to use composite steps in known-issues"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bab502f15ff85e3a378c1b7f22df5a398b8581ba", "author": {"user": {"login": "abudevich", "name": null}}, "url": "https://github.com/vividus-framework/vividus/commit/bab502f15ff85e3a378c1b7f22df5a398b8581ba", "committedDate": "2020-10-16T10:53:05Z", "message": "Add ability to use composite steps in known-issues"}, "afterCommit": {"oid": "958d13612abc878a18916b29e79676acf526607a", "author": {"user": {"login": "abudevich", "name": null}}, "url": "https://github.com/vividus-framework/vividus/commit/958d13612abc878a18916b29e79676acf526607a", "committedDate": "2020-10-16T12:16:00Z", "message": "Add ability to use composite steps in known-issues"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "958d13612abc878a18916b29e79676acf526607a", "author": {"user": {"login": "abudevich", "name": null}}, "url": "https://github.com/vividus-framework/vividus/commit/958d13612abc878a18916b29e79676acf526607a", "committedDate": "2020-10-16T12:16:00Z", "message": "Add ability to use composite steps in known-issues"}, "afterCommit": {"oid": "8b93ab2cd14e16a174f2910d307c87a0e4071c3c", "author": {"user": {"login": "abudevich", "name": null}}, "url": "https://github.com/vividus-framework/vividus/commit/8b93ab2cd14e16a174f2910d307c87a0e4071c3c", "committedDate": "2020-10-16T12:18:10Z", "message": "Add ability to use composite steps in known-issues"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEwNTUzNDYw", "url": "https://github.com/vividus-framework/vividus/pull/999#pullrequestreview-510553460", "createdAt": "2020-10-16T14:59:49Z", "commit": {"oid": "8b93ab2cd14e16a174f2910d307c87a0e4071c3c"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQxNDo1OTo0OVrOHjDWzA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQxNTowNjoxNVrOHjD0_A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjUxNzE5Ng==", "bodyText": "it's not thread-safe, this field should be a part of RunningStory class and it should replace String runningStep field: private Deque<String> runningSteps = new LinkedList<>();", "url": "https://github.com/vividus-framework/vividus/pull/999#discussion_r506517196", "createdAt": "2020-10-16T14:59:49Z", "author": {"login": "valfirst"}, "path": "vividus-bdd-engine/src/main/java/org/vividus/bdd/context/BddRunContext.java", "diffHunk": "@@ -31,6 +31,7 @@\n \n     // must be initialized for jbehave-junit-runner\n     private Optional<String> runningBatchKey = Optional.of(\"batch-1\");\n+    private Deque<String> steps = new LinkedList<>();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8b93ab2cd14e16a174f2910d307c87a0e4071c3c"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjUxODA4MQ==", "bodyText": "the formatting could be improved a bit for better readability", "url": "https://github.com/vividus-framework/vividus/pull/999#discussion_r506518081", "createdAt": "2020-10-16T15:00:30Z", "author": {"login": "valfirst"}, "path": "vividus-soft-assert/src/main/java/org/vividus/softassert/issue/KnownIssueChecker.java", "diffHunk": "@@ -142,8 +142,10 @@ boolean isPotentiallyKnown(KnownIssueIdentifier knownIssueIdentifier)\n             return testInfo != null && (\n                     isPotentiallyKnown(testInfo.getTestSuite(), knownIssueIdentifier.getTestSuiteCompiledPattern())\n                             || isPotentiallyKnown(testInfo.getTestCase(),\n-                            knownIssueIdentifier.getTestCaseCompiledPattern()) || isPotentiallyKnown(\n-                            testInfo.getTestStep(), knownIssueIdentifier.getTestStepCompiledPattern()));\n+                            knownIssueIdentifier.getTestCaseCompiledPattern())\n+                            || !testInfo.getTestSteps().stream()\n+                                .anyMatch(s -> !isPotentiallyKnown(s,\n+                                        knownIssueIdentifier.getTestStepCompiledPattern())));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8b93ab2cd14e16a174f2910d307c87a0e4071c3c"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjUyMzUwNg==", "bodyText": "the logic of this class should be fully merged into org.vividus.bdd.RunContextStoryReporter", "url": "https://github.com/vividus-framework/vividus/pull/999#discussion_r506523506", "createdAt": "2020-10-16T15:05:03Z", "author": {"login": "valfirst"}, "path": "vividus/src/main/java/org/vividus/bdd/CompositeStepReporter.java", "diffHunk": "@@ -0,0 +1,50 @@\n+/*\n+ * Copyright 2019-2020 the original author or authors.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     https://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.vividus.bdd;\n+\n+import javax.inject.Inject;\n+\n+import org.vividus.bdd.context.BddRunContext;\n+\n+public class CompositeStepReporter extends ChainedStoryReporter", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8b93ab2cd14e16a174f2910d307c87a0e4071c3c"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjUyNDkyNA==", "bodyText": "use constructor to inject the field", "url": "https://github.com/vividus-framework/vividus/pull/999#discussion_r506524924", "createdAt": "2020-10-16T15:06:15Z", "author": {"login": "valfirst"}, "path": "vividus/src/main/java/org/vividus/bdd/issue/TestInfoProvider.java", "diffHunk": "@@ -18,16 +18,19 @@\n \n import java.util.Optional;\n \n+import javax.inject.Inject;\n+\n import org.jbehave.core.model.Scenario;\n-import org.vividus.bdd.context.IBddRunContext;\n+import org.vividus.bdd.context.BddRunContext;\n import org.vividus.bdd.model.RunningScenario;\n import org.vividus.bdd.model.RunningStory;\n import org.vividus.softassert.issue.ITestInfoProvider;\n import org.vividus.softassert.issue.TestInfo;\n \n public class TestInfoProvider implements ITestInfoProvider\n {\n-    private IBddRunContext bddRunContext;\n+    @Inject\n+    private BddRunContext bddRunContext;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8b93ab2cd14e16a174f2910d307c87a0e4071c3c"}, "originalPosition": 18}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8b93ab2cd14e16a174f2910d307c87a0e4071c3c", "author": {"user": {"login": "abudevich", "name": null}}, "url": "https://github.com/vividus-framework/vividus/commit/8b93ab2cd14e16a174f2910d307c87a0e4071c3c", "committedDate": "2020-10-16T12:18:10Z", "message": "Add ability to use composite steps in known-issues"}, "afterCommit": {"oid": "bbaa5d7cb05843839cde4efc70756268369667d7", "author": {"user": {"login": "abudevich", "name": null}}, "url": "https://github.com/vividus-framework/vividus/commit/bbaa5d7cb05843839cde4efc70756268369667d7", "committedDate": "2020-10-19T08:49:37Z", "message": "Add ability to use composite steps in known-issues"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bbaa5d7cb05843839cde4efc70756268369667d7", "author": {"user": {"login": "abudevich", "name": null}}, "url": "https://github.com/vividus-framework/vividus/commit/bbaa5d7cb05843839cde4efc70756268369667d7", "committedDate": "2020-10-19T08:49:37Z", "message": "Add ability to use composite steps in known-issues"}, "afterCommit": {"oid": "65ab8f5b8482700346227dd2addf4095b0d359ae", "author": {"user": {"login": "abudevich", "name": null}}, "url": "https://github.com/vividus-framework/vividus/commit/65ab8f5b8482700346227dd2addf4095b0d359ae", "committedDate": "2020-10-19T09:19:30Z", "message": "Add ability to use composite steps in known-issues"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "65ab8f5b8482700346227dd2addf4095b0d359ae", "author": {"user": {"login": "abudevich", "name": null}}, "url": "https://github.com/vividus-framework/vividus/commit/65ab8f5b8482700346227dd2addf4095b0d359ae", "committedDate": "2020-10-19T09:19:30Z", "message": "Add ability to use composite steps in known-issues"}, "afterCommit": {"oid": "0e146c4fbc8d127a0daa0f6c87294c8b16f0a7d8", "author": {"user": {"login": "abudevich", "name": null}}, "url": "https://github.com/vividus-framework/vividus/commit/0e146c4fbc8d127a0daa0f6c87294c8b16f0a7d8", "committedDate": "2020-10-19T09:25:53Z", "message": "Add ability to use composite steps in known-issues"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0e146c4fbc8d127a0daa0f6c87294c8b16f0a7d8", "author": {"user": {"login": "abudevich", "name": null}}, "url": "https://github.com/vividus-framework/vividus/commit/0e146c4fbc8d127a0daa0f6c87294c8b16f0a7d8", "committedDate": "2020-10-19T09:25:53Z", "message": "Add ability to use composite steps in known-issues"}, "afterCommit": {"oid": "2cda218ba836acd9bc1d8e106a47d161dd2e80f9", "author": {"user": {"login": "abudevich", "name": null}}, "url": "https://github.com/vividus-framework/vividus/commit/2cda218ba836acd9bc1d8e106a47d161dd2e80f9", "committedDate": "2020-10-19T10:38:22Z", "message": "Add ability to use composite steps in known-issues"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2cda218ba836acd9bc1d8e106a47d161dd2e80f9", "author": {"user": {"login": "abudevich", "name": null}}, "url": "https://github.com/vividus-framework/vividus/commit/2cda218ba836acd9bc1d8e106a47d161dd2e80f9", "committedDate": "2020-10-19T10:38:22Z", "message": "Add ability to use composite steps in known-issues"}, "afterCommit": {"oid": "5858b412e39a4b71e1923c63a90f3247563b49d2", "author": {"user": {"login": "abudevich", "name": null}}, "url": "https://github.com/vividus-framework/vividus/commit/5858b412e39a4b71e1923c63a90f3247563b49d2", "committedDate": "2020-10-19T10:45:27Z", "message": "Add ability to use composite steps in known-issues"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTExNzAyMTE2", "url": "https://github.com/vividus-framework/vividus/pull/999#pullrequestreview-511702116", "createdAt": "2020-10-19T12:23:32Z", "commit": {"oid": "5858b412e39a4b71e1923c63a90f3247563b49d2"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxMjoyMzozMlrOHkLs6g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxMzoyMzo0MVrOHkOHuA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzcwMjUwNg==", "bodyText": "why are these methods removed? each method indicates completion of the step", "url": "https://github.com/vividus-framework/vividus/pull/999#discussion_r507702506", "createdAt": "2020-10-19T12:23:32Z", "author": {"login": "valfirst"}, "path": "vividus-bdd-engine/src/main/java/org/vividus/bdd/RunContextStoryReporter.java", "diffHunk": "@@ -67,51 +67,22 @@ public void afterScenario()\n     @Override\n     public void beforeStep(String step)\n     {\n-        bddRunContext.getRunningStory().setRunningStep(step);\n+        bddRunContext.getRunningStory().addRunningStep(step);\n         super.beforeStep(step);\n     }\n \n     @Override\n     public void successful(String step)\n     {\n+        bddRunContext.getRunningStory().removeRunningStep();\n         super.successful(step);\n-        finishStep();\n     }\n \n     @Override\n     public void failed(String step, Throwable cause)\n     {\n         super.failed(step, cause);\n         bddRunContext.getRunningStory().fail();\n-        finishStep();\n-    }\n-\n-    @Override\n-    public void ignorable(String step)\n-    {\n-        super.ignorable(step);\n-        finishStep();\n-    }\n-\n-    @Override\n-    public void comment(String step)\n-    {\n-        super.comment(step);\n-        finishStep();\n-    }\n-\n-    @Override\n-    public void pending(String step)\n-    {\n-        super.pending(step);\n-        finishStep();\n-    }\n-\n-    @Override\n-    public void notPerformed(String step)\n-    {\n-        super.notPerformed(step);\n-        finishStep();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5858b412e39a4b71e1923c63a90f3247563b49d2"}, "originalPosition": 50}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzc0MDEzOQ==", "bodyText": "addRunningStep -> putRunningStep", "url": "https://github.com/vividus-framework/vividus/pull/999#discussion_r507740139", "createdAt": "2020-10-19T13:21:08Z", "author": {"login": "valfirst"}, "path": "vividus-bdd-engine/src/main/java/org/vividus/bdd/model/RunningStory.java", "diffHunk": "@@ -85,18 +87,28 @@ public void setRunningScenario(RunningScenario runningScenario)\n         this.runningScenario = runningScenario;\n     }\n \n-    public String getRunningStep()\n+    public String removeRunningStep()\n     {\n-        return runningStep;\n+        return runningSteps.removeLast();\n     }\n \n-    public void setRunningStep(String runningStep)\n+    public void addRunningStep(String runningStep)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5858b412e39a4b71e1923c63a90f3247563b49d2"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzc0MDMxMQ==", "bodyText": "pop()", "url": "https://github.com/vividus-framework/vividus/pull/999#discussion_r507740311", "createdAt": "2020-10-19T13:21:15Z", "author": {"login": "valfirst"}, "path": "vividus-bdd-engine/src/main/java/org/vividus/bdd/model/RunningStory.java", "diffHunk": "@@ -85,18 +87,28 @@ public void setRunningScenario(RunningScenario runningScenario)\n         this.runningScenario = runningScenario;\n     }\n \n-    public String getRunningStep()\n+    public String removeRunningStep()\n     {\n-        return runningStep;\n+        return runningSteps.removeLast();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5858b412e39a4b71e1923c63a90f3247563b49d2"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzc0MDc2NQ==", "bodyText": "push(runningStep)", "url": "https://github.com/vividus-framework/vividus/pull/999#discussion_r507740765", "createdAt": "2020-10-19T13:21:44Z", "author": {"login": "valfirst"}, "path": "vividus-bdd-engine/src/main/java/org/vividus/bdd/model/RunningStory.java", "diffHunk": "@@ -85,18 +87,28 @@ public void setRunningScenario(RunningScenario runningScenario)\n         this.runningScenario = runningScenario;\n     }\n \n-    public String getRunningStep()\n+    public String removeRunningStep()\n     {\n-        return runningStep;\n+        return runningSteps.removeLast();\n     }\n \n-    public void setRunningStep(String runningStep)\n+    public void addRunningStep(String runningStep)\n     {\n-        this.runningStep = runningStep;\n+        runningSteps.addLast(runningStep);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5858b412e39a4b71e1923c63a90f3247563b49d2"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzc0MjEzNg==", "bodyText": "it should go after super.successful(step);", "url": "https://github.com/vividus-framework/vividus/pull/999#discussion_r507742136", "createdAt": "2020-10-19T13:23:41Z", "author": {"login": "valfirst"}, "path": "vividus-bdd-engine/src/main/java/org/vividus/bdd/RunContextStoryReporter.java", "diffHunk": "@@ -67,51 +67,22 @@ public void afterScenario()\n     @Override\n     public void beforeStep(String step)\n     {\n-        bddRunContext.getRunningStory().setRunningStep(step);\n+        bddRunContext.getRunningStory().addRunningStep(step);\n         super.beforeStep(step);\n     }\n \n     @Override\n     public void successful(String step)\n     {\n+        bddRunContext.getRunningStory().removeRunningStep();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5858b412e39a4b71e1923c63a90f3247563b49d2"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTExNzU3MzE3", "url": "https://github.com/vividus-framework/vividus/pull/999#pullrequestreview-511757317", "createdAt": "2020-10-19T13:26:04Z", "commit": {"oid": "5858b412e39a4b71e1923c63a90f3247563b49d2"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5858b412e39a4b71e1923c63a90f3247563b49d2", "author": {"user": {"login": "abudevich", "name": null}}, "url": "https://github.com/vividus-framework/vividus/commit/5858b412e39a4b71e1923c63a90f3247563b49d2", "committedDate": "2020-10-19T10:45:27Z", "message": "Add ability to use composite steps in known-issues"}, "afterCommit": {"oid": "335641d7c6d8975f038b368f3862fdbe86ce8b49", "author": {"user": {"login": "abudevich", "name": null}}, "url": "https://github.com/vividus-framework/vividus/commit/335641d7c6d8975f038b368f3862fdbe86ce8b49", "committedDate": "2020-10-19T14:31:00Z", "message": "Add ability to use composite steps in known-issues"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "335641d7c6d8975f038b368f3862fdbe86ce8b49", "author": {"user": {"login": "abudevich", "name": null}}, "url": "https://github.com/vividus-framework/vividus/commit/335641d7c6d8975f038b368f3862fdbe86ce8b49", "committedDate": "2020-10-19T14:31:00Z", "message": "Add ability to use composite steps in known-issues"}, "afterCommit": {"oid": "4741fbbf3ac342f9ef31f6af45c4450fea283db8", "author": {"user": {"login": "abudevich", "name": null}}, "url": "https://github.com/vividus-framework/vividus/commit/4741fbbf3ac342f9ef31f6af45c4450fea283db8", "committedDate": "2020-10-19T15:09:23Z", "message": "Add ability to use composite steps in known-issues"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTExOTA5MDQy", "url": "https://github.com/vividus-framework/vividus/pull/999#pullrequestreview-511909042", "createdAt": "2020-10-19T15:48:15Z", "commit": {"oid": "4741fbbf3ac342f9ef31f6af45c4450fea283db8"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxNTo0ODoxNVrOHkVZwg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxNTo0ODoxNVrOHkVZwg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzg2MTQ0Mg==", "bodyText": "Agree about:\n\nignorable\ncomment\npending\nnotPerformed\n\nbut as for failed I believe we need to removeRunningStep, what do you think?", "url": "https://github.com/vividus-framework/vividus/pull/999#discussion_r507861442", "createdAt": "2020-10-19T15:48:15Z", "author": {"login": "valfirst"}, "path": "vividus-bdd-engine/src/main/java/org/vividus/bdd/RunContextStoryReporter.java", "diffHunk": "@@ -67,51 +67,22 @@ public void afterScenario()\n     @Override\n     public void beforeStep(String step)\n     {\n-        bddRunContext.getRunningStory().setRunningStep(step);\n+        bddRunContext.getRunningStory().addRunningStep(step);\n         super.beforeStep(step);\n     }\n \n     @Override\n     public void successful(String step)\n     {\n+        bddRunContext.getRunningStory().removeRunningStep();\n         super.successful(step);\n-        finishStep();\n     }\n \n     @Override\n     public void failed(String step, Throwable cause)\n     {\n         super.failed(step, cause);\n         bddRunContext.getRunningStory().fail();\n-        finishStep();\n-    }\n-\n-    @Override\n-    public void ignorable(String step)\n-    {\n-        super.ignorable(step);\n-        finishStep();\n-    }\n-\n-    @Override\n-    public void comment(String step)\n-    {\n-        super.comment(step);\n-        finishStep();\n-    }\n-\n-    @Override\n-    public void pending(String step)\n-    {\n-        super.pending(step);\n-        finishStep();\n-    }\n-\n-    @Override\n-    public void notPerformed(String step)\n-    {\n-        super.notPerformed(step);\n-        finishStep();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzcwMjUwNg=="}, "originalCommit": {"oid": "5858b412e39a4b71e1923c63a90f3247563b49d2"}, "originalPosition": 50}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4741fbbf3ac342f9ef31f6af45c4450fea283db8", "author": {"user": {"login": "abudevich", "name": null}}, "url": "https://github.com/vividus-framework/vividus/commit/4741fbbf3ac342f9ef31f6af45c4450fea283db8", "committedDate": "2020-10-19T15:09:23Z", "message": "Add ability to use composite steps in known-issues"}, "afterCommit": {"oid": "6ef3d2a713735a2786a860a277e85fe1688fcfb2", "author": {"user": {"login": "abudevich", "name": null}}, "url": "https://github.com/vividus-framework/vividus/commit/6ef3d2a713735a2786a860a277e85fe1688fcfb2", "committedDate": "2020-10-20T09:38:00Z", "message": "Add ability to use composite steps in known-issues"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEyNTI0NTYx", "url": "https://github.com/vividus-framework/vividus/pull/999#pullrequestreview-512524561", "createdAt": "2020-10-20T09:44:55Z", "commit": {"oid": "6ef3d2a713735a2786a860a277e85fe1688fcfb2"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMFQwOTo0NDo1NVrOHkz2yQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMFQwOTo0NDo1NVrOHkz2yQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODM2MDM5Mw==", "bodyText": "return a defensive copy:\nnew LinkedList<>(runningSteps);", "url": "https://github.com/vividus-framework/vividus/pull/999#discussion_r508360393", "createdAt": "2020-10-20T09:44:55Z", "author": {"login": "valfirst"}, "path": "vividus-bdd-engine/src/main/java/org/vividus/bdd/model/RunningStory.java", "diffHunk": "@@ -85,18 +87,28 @@ public void setRunningScenario(RunningScenario runningScenario)\n         this.runningScenario = runningScenario;\n     }\n \n-    public String getRunningStep()\n+    public String removeRunningStep()\n     {\n-        return runningStep;\n+        return runningSteps.pollLast();\n     }\n \n-    public void setRunningStep(String runningStep)\n+    public void putRunningStep(String runningStep)\n     {\n-        this.runningStep = runningStep;\n+        runningSteps.push(runningStep);\n     }\n \n     public int calculateNextVariableIndex()\n     {\n         return nextVariableIndex.incrementAndGet();\n     }\n+\n+    public Deque<String> getRunningSteps()\n+    {\n+        return runningSteps;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6ef3d2a713735a2786a860a277e85fe1688fcfb2"}, "originalPosition": 43}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6ef3d2a713735a2786a860a277e85fe1688fcfb2", "author": {"user": {"login": "abudevich", "name": null}}, "url": "https://github.com/vividus-framework/vividus/commit/6ef3d2a713735a2786a860a277e85fe1688fcfb2", "committedDate": "2020-10-20T09:38:00Z", "message": "Add ability to use composite steps in known-issues"}, "afterCommit": {"oid": "8cc2a3748fa58a5fed8c42b6f3e025b897b2bdaa", "author": {"user": {"login": "abudevich", "name": null}}, "url": "https://github.com/vividus-framework/vividus/commit/8cc2a3748fa58a5fed8c42b6f3e025b897b2bdaa", "committedDate": "2020-10-20T09:50:07Z", "message": "Add ability to use composite steps in known-issues"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEyNTUyODIx", "url": "https://github.com/vividus-framework/vividus/pull/999#pullrequestreview-512552821", "createdAt": "2020-10-20T10:18:34Z", "commit": {"oid": "8cc2a3748fa58a5fed8c42b6f3e025b897b2bdaa"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEyODU2NDYy", "url": "https://github.com/vividus-framework/vividus/pull/999#pullrequestreview-512856462", "createdAt": "2020-10-20T15:23:00Z", "commit": {"oid": "8cc2a3748fa58a5fed8c42b6f3e025b897b2bdaa"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEzMTQ2MTU5", "url": "https://github.com/vividus-framework/vividus/pull/999#pullrequestreview-513146159", "createdAt": "2020-10-20T21:25:24Z", "commit": {"oid": "8cc2a3748fa58a5fed8c42b6f3e025b897b2bdaa"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMFQyMToyNToyNFrOHlRsmw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMFQyMToyNToyNFrOHlRsmw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODg0OTMwNw==", "bodyText": "why not pop()?", "url": "https://github.com/vividus-framework/vividus/pull/999#discussion_r508849307", "createdAt": "2020-10-20T21:25:24Z", "author": {"login": "valfirst"}, "path": "vividus-bdd-engine/src/main/java/org/vividus/bdd/model/RunningStory.java", "diffHunk": "@@ -85,18 +87,28 @@ public void setRunningScenario(RunningScenario runningScenario)\n         this.runningScenario = runningScenario;\n     }\n \n-    public String getRunningStep()\n+    public String removeRunningStep()\n     {\n-        return runningStep;\n+        return runningSteps.pollLast();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8cc2a3748fa58a5fed8c42b6f3e025b897b2bdaa"}, "originalPosition": 26}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEzMzc1Mjc4", "url": "https://github.com/vividus-framework/vividus/pull/999#pullrequestreview-513375278", "createdAt": "2020-10-21T07:22:21Z", "commit": {"oid": "8cc2a3748fa58a5fed8c42b6f3e025b897b2bdaa"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5b5947c59e42873561e027a2e91c1c27f33bcfdc", "author": {"user": {"login": "abudevich", "name": null}}, "url": "https://github.com/vividus-framework/vividus/commit/5b5947c59e42873561e027a2e91c1c27f33bcfdc", "committedDate": "2020-10-21T10:07:40Z", "message": "Add ability to use composite steps in known-issues"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8cc2a3748fa58a5fed8c42b6f3e025b897b2bdaa", "author": {"user": {"login": "abudevich", "name": null}}, "url": "https://github.com/vividus-framework/vividus/commit/8cc2a3748fa58a5fed8c42b6f3e025b897b2bdaa", "committedDate": "2020-10-20T09:50:07Z", "message": "Add ability to use composite steps in known-issues"}, "afterCommit": {"oid": "5b5947c59e42873561e027a2e91c1c27f33bcfdc", "author": {"user": {"login": "abudevich", "name": null}}, "url": "https://github.com/vividus-framework/vividus/commit/5b5947c59e42873561e027a2e91c1c27f33bcfdc", "committedDate": "2020-10-21T10:07:40Z", "message": "Add ability to use composite steps in known-issues"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 10, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}