{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg0ODgxMzM0", "number": 928, "title": "Fixed 'Step to add single HTTP header to request #881'", "bodyText": "Fixes #881", "createdAt": "2020-09-11T09:50:18Z", "url": "https://github.com/vividus-framework/vividus/pull/928", "merged": true, "mergeCommit": {"oid": "462a23e5c1bf69196321a9a15dc4d28c2797e140"}, "closed": true, "closedAt": "2020-09-20T11:06:03Z", "author": {"login": "TatianaTochko"}, "timelineItems": {"totalCount": 18, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdHyk8vgFqTQ4NjY2NzAxNA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdKHhphAFqTQ5MTU4MDEyNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2NjY3MDE0", "url": "https://github.com/vividus-framework/vividus/pull/928#pullrequestreview-486667014", "createdAt": "2020-09-11T09:51:48Z", "commit": {"oid": "060714758a74985e274c37b0b712b4f89988c11e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQwOTo1MTo0OFrOHQX3Qw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxMDoxMDoxNVrOHQY7JQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjkzMDI0Mw==", "bodyText": "the step doesn't really check anything", "url": "https://github.com/vividus-framework/vividus/pull/928#discussion_r486930243", "createdAt": "2020-09-11T09:51:48Z", "author": {"login": "valfirst"}, "path": "docs/modules/plugins/pages/plugin-rest-api.adoc", "diffHunk": "@@ -88,6 +88,37 @@ When I wait for presence of element by `$.data.testData` with `PT5S` polling int\n |When I issue a HTTP GET request for a resource with the URL '${requestUrl}'|\n ----\n \n+=== Adding headers to HTTP request\n+\n+==== *_Info_*\n+\n+Checks that header `name` and `value` have been added to request", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "060714758a74985e274c37b0b712b4f89988c11e"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjkzMDYzOA==", "bodyText": "possibility", "url": "https://github.com/vividus-framework/vividus/pull/928#discussion_r486930638", "createdAt": "2020-09-11T09:52:09Z", "author": {"login": "valfirst"}, "path": "docs/modules/plugins/pages/plugin-rest-api.adoc", "diffHunk": "@@ -88,6 +88,37 @@ When I wait for presence of element by `$.data.testData` with `PT5S` polling int\n |When I issue a HTTP GET request for a resource with the URL '${requestUrl}'|\n ----\n \n+=== Adding headers to HTTP request\n+\n+==== *_Info_*\n+\n+Checks that header `name` and `value` have been added to request\n+\n+==== *_Wording_*\n+\n+[source,gherkin]\n+----\n+When I add request header with name `$name` and value `$value`\n+----\n+\n+==== *_Parameters_*\n+\n+.  `name` - header name\n+.  `value` - header value\n+\n+==== *_Usage_*\n+\n+.Sample.story\n+[source,gherkin]\n+----\n+Scenario: Verify possobility to add request header with name and value", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "060714758a74985e274c37b0b712b4f89988c11e"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjkzMTI2Mg==", "bodyText": "it's better to use HTTP GET here", "url": "https://github.com/vividus-framework/vividus/pull/928#discussion_r486931262", "createdAt": "2020-09-11T09:52:48Z", "author": {"login": "valfirst"}, "path": "docs/modules/plugins/pages/plugin-rest-api.adoc", "diffHunk": "@@ -88,6 +88,37 @@ When I wait for presence of element by `$.data.testData` with `PT5S` polling int\n |When I issue a HTTP GET request for a resource with the URL '${requestUrl}'|\n ----\n \n+=== Adding headers to HTTP request\n+\n+==== *_Info_*\n+\n+Checks that header `name` and `value` have been added to request\n+\n+==== *_Wording_*\n+\n+[source,gherkin]\n+----\n+When I add request header with name `$name` and value `$value`\n+----\n+\n+==== *_Parameters_*\n+\n+.  `name` - header name\n+.  `value` - header value\n+\n+==== *_Usage_*\n+\n+.Sample.story\n+[source,gherkin]\n+----\n+Scenario: Verify possobility to add request header with name and value\n+When I add request headers:\n+|name  |value |\n+|name  |value |\n+When I send HTTP POST to the relative URL '/post'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "060714758a74985e274c37b0b712b4f89988c11e"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjkzMTY0MA==", "bodyText": "keep the same case", "url": "https://github.com/vividus-framework/vividus/pull/928#discussion_r486931640", "createdAt": "2020-09-11T09:53:15Z", "author": {"login": "valfirst"}, "path": "docs/modules/plugins/pages/plugin-rest-api.adoc", "diffHunk": "@@ -88,6 +88,37 @@ When I wait for presence of element by `$.data.testData` with `PT5S` polling int\n |When I issue a HTTP GET request for a resource with the URL '${requestUrl}'|\n ----\n \n+=== Adding headers to HTTP request\n+\n+==== *_Info_*\n+\n+Checks that header `name` and `value` have been added to request\n+\n+==== *_Wording_*\n+\n+[source,gherkin]\n+----\n+When I add request header with name `$name` and value `$value`\n+----\n+\n+==== *_Parameters_*\n+\n+.  `name` - header name\n+.  `value` - header value\n+\n+==== *_Usage_*\n+\n+.Sample.story\n+[source,gherkin]\n+----\n+Scenario: Verify possobility to add request header with name and value\n+When I add request headers:\n+|name  |value |\n+|name  |value |\n+When I send HTTP POST to the relative URL '/post'\n+Then a JSON element by the JSON path '$.headers.Name' is equal to '\"Value\"'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "060714758a74985e274c37b0b712b4f89988c11e"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjkzMjY1MQ==", "bodyText": "duplicated code, please, avoid copy-paste-s", "url": "https://github.com/vividus-framework/vividus/pull/928#discussion_r486932651", "createdAt": "2020-09-11T09:54:17Z", "author": {"login": "valfirst"}, "path": "vividus-plugin-rest-api/src/main/java/org/vividus/bdd/steps/api/HttpRequestSteps.java", "diffHunk": "@@ -116,6 +116,20 @@ public void setUpRequestHeaders(ExamplesTable headers)\n         httpTestContext.putRequestHeaders(requestHeaders);\n     }\n \n+    /**\n+     * Add request headers\n+     * @param headers ExamplesTable representing list of headers with columns \"name\" and \"value\" specifying HTTP header\n+     * names and values respectively\n+     */\n+    @When(\"I add request headers:$headers\")\n+    public void addRequestHeaders(ExamplesTable headers)\n+    {\n+        List<Header> requestHeaders = headers.getRowsAsParameters(true).stream()\n+                .map(row -> new BasicHeader(row.valueAs(NAME, String.class), row.valueAs(VALUE, String.class)))\n+                .collect(toList());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "060714758a74985e274c37b0b712b4f89988c11e"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Njk0NzYyMQ==", "bodyText": "please add unit tests", "url": "https://github.com/vividus-framework/vividus/pull/928#discussion_r486947621", "createdAt": "2020-09-11T10:10:15Z", "author": {"login": "valfirst"}, "path": "vividus-plugin-rest-api/src/main/java/org/vividus/http/HttpTestContext.java", "diffHunk": "@@ -48,6 +48,11 @@ public void putRequestHeaders(List<Header> requestHeaders)\n         getData().requestHeaders = requestHeaders;\n     }\n \n+    public void addRequestHeaders(List<Header> requestHeaders)\n+    {\n+        getData().requestHeaders.addAll(requestHeaders);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "060714758a74985e274c37b0b712b4f89988c11e"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2Njc5ODQx", "url": "https://github.com/vividus-framework/vividus/pull/928#pullrequestreview-486679841", "createdAt": "2020-09-11T10:11:11Z", "commit": {"oid": "060714758a74985e274c37b0b712b4f89988c11e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxMDoxMToxMVrOHQY85w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxMDoxMToxMVrOHQY85w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Njk0ODA3MQ==", "bodyText": "please format in a table-like view", "url": "https://github.com/vividus-framework/vividus/pull/928#discussion_r486948071", "createdAt": "2020-09-11T10:11:11Z", "author": {"login": "valfirst"}, "path": "vividus-tests/src/main/resources/story/integration/RestApiStepsTests.story", "diffHunk": "@@ -36,3 +36,17 @@ Scenario: Verify step \"Then the connection is secured using $securityProtocol pr\n Given request body: ${request-body}\n When I send HTTP DELETE to the relative URL '/delete'\n Then the connection is secured using TLSv1.2 protocol\n+\n+Scenario: Verify step \"I add request headers:$headers\"\n+Given request body: ${request-body}\n+When I set request headers:\n+|name        |value           |\n+|Content-Type|application/json|\n+Then `${responseCode}` is equal to `200`\n+When I add request headers:\n+|name          |value         |", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "060714758a74985e274c37b0b712b4f89988c11e"}, "originalPosition": 12}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "060714758a74985e274c37b0b712b4f89988c11e", "author": {"user": {"login": "TatianaTochko", "name": null}}, "url": "https://github.com/vividus-framework/vividus/commit/060714758a74985e274c37b0b712b4f89988c11e", "committedDate": "2020-09-11T09:45:50Z", "message": "Fixed 'Step to add single HTTP header to request #881'"}, "afterCommit": {"oid": "c9764ee6cf85f5b682a0de6eef3e382e29b72e58", "author": {"user": {"login": "TatianaTochko", "name": null}}, "url": "https://github.com/vividus-framework/vividus/commit/c9764ee6cf85f5b682a0de6eef3e382e29b72e58", "committedDate": "2020-09-14T07:59:05Z", "message": "Update # 928 commit"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg3NTI4ODM5", "url": "https://github.com/vividus-framework/vividus/pull/928#pullrequestreview-487528839", "createdAt": "2020-09-14T08:27:39Z", "commit": {"oid": "c9764ee6cf85f5b682a0de6eef3e382e29b72e58"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQwODoyNzozOVrOHRJLWw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQwODoyODoxN1rOHRJM7Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzczODIwMw==", "bodyText": "invalid change", "url": "https://github.com/vividus-framework/vividus/pull/928#discussion_r487738203", "createdAt": "2020-09-14T08:27:39Z", "author": {"login": "valfirst"}, "path": ".gitignore", "diffHunk": "@@ -14,3 +14,6 @@\n #Build Dirs#\n output/\n .out/**\n+*.properties\n+*.jar\n+*.properties", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c9764ee6cf85f5b682a0de6eef3e382e29b72e58"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzczODYwNQ==", "bodyText": "it's better to keep such methods before setters", "url": "https://github.com/vividus-framework/vividus/pull/928#discussion_r487738605", "createdAt": "2020-09-14T08:28:17Z", "author": {"login": "valfirst"}, "path": "vividus-plugin-rest-api/src/main/java/org/vividus/bdd/steps/api/HttpRequestSteps.java", "diffHunk": "@@ -255,4 +265,11 @@ public void setApiEndpoint(String apiEndpoint)\n     {\n         this.apiEndpoint = apiEndpoint;\n     }\n+\n+    private List<Header> getRequestHeaders(ExamplesTable headers)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c9764ee6cf85f5b682a0de6eef3e382e29b72e58"}, "originalPosition": 31}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg3ODQwOTAw", "url": "https://github.com/vividus-framework/vividus/pull/928#pullrequestreview-487840900", "createdAt": "2020-09-14T14:40:37Z", "commit": {"oid": "eb5dd27edbfd891229bc11a8d5cb89510c764050"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxNDo0MDozN1rOHRYSHA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxNDo0MDozN1rOHRYSHA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Nzk4NTY5Mg==", "bodyText": "please include some link to docs about req headers", "url": "https://github.com/vividus-framework/vividus/pull/928#discussion_r487985692", "createdAt": "2020-09-14T14:40:37Z", "author": {"login": "uarlouski"}, "path": "docs/modules/plugins/pages/plugin-rest-api.adoc", "diffHunk": "@@ -88,6 +88,37 @@ When I wait for presence of element by `$.data.testData` with `PT5S` polling int\n |When I issue a HTTP GET request for a resource with the URL '${requestUrl}'|\n ----\n \n+=== Adding headers to HTTP request\n+\n+==== *_Info_*\n+\n+Adds request headers to request", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eb5dd27edbfd891229bc11a8d5cb89510c764050"}, "originalPosition": 8}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg3ODQ0OTk2", "url": "https://github.com/vividus-framework/vividus/pull/928#pullrequestreview-487844996", "createdAt": "2020-09-14T14:44:42Z", "commit": {"oid": "eb5dd27edbfd891229bc11a8d5cb89510c764050"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxNDo0NDo0MlrOHRYeXw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxNDo0NDo0MlrOHRYeXw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Nzk4ODgzMQ==", "bodyText": "maybe create function like\nvoid performWithHeaders(ExamplesTable headers, Consumer<List<Header>> headersConsumer) \n\nto inline setUpRequestHeaders and addRequestHeaders methods bodies", "url": "https://github.com/vividus-framework/vividus/pull/928#discussion_r487988831", "createdAt": "2020-09-14T14:44:42Z", "author": {"login": "uarlouski"}, "path": "vividus-plugin-rest-api/src/main/java/org/vividus/bdd/steps/api/HttpRequestSteps.java", "diffHunk": "@@ -110,12 +110,22 @@ public void putMultipartRequest(ExamplesTable requestParts)\n     @When(\"I set request headers:$headers\")\n     public void setUpRequestHeaders(ExamplesTable headers)\n     {\n-        List<Header> requestHeaders = headers.getRowsAsParameters(true).stream()\n-                .map(row -> new BasicHeader(row.valueAs(NAME, String.class), row.valueAs(VALUE, String.class)))\n-                .collect(toList());\n+        List<Header> requestHeaders = getRequestHeaders(headers);\n         httpTestContext.putRequestHeaders(requestHeaders);\n     }\n \n+    /**\n+     * Add request headers\n+     * @param headers ExamplesTable representing list of headers with columns \"name\" and \"value\" specifying HTTP header\n+     * names and values respectively\n+     */\n+    @When(\"I add request headers:$headers\")\n+    public void addRequestHeaders(ExamplesTable headers)\n+    {\n+        List<Header> requestHeaders = getRequestHeaders(headers);\n+        httpTestContext.addRequestHeaders(requestHeaders);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eb5dd27edbfd891229bc11a8d5cb89510c764050"}, "originalPosition": 20}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg3ODQ2MjY4", "url": "https://github.com/vividus-framework/vividus/pull/928#pullrequestreview-487846268", "createdAt": "2020-09-14T14:45:59Z", "commit": {"oid": "eb5dd27edbfd891229bc11a8d5cb89510c764050"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxNDo0NjowMFrOHRYiFA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxNDo0NjowMFrOHRYiFA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Nzk4OTc4MA==", "bodyText": "please use some real header, imho example story will look better by doing this", "url": "https://github.com/vividus-framework/vividus/pull/928#discussion_r487989780", "createdAt": "2020-09-14T14:46:00Z", "author": {"login": "uarlouski"}, "path": "docs/modules/plugins/pages/plugin-rest-api.adoc", "diffHunk": "@@ -88,6 +88,37 @@ When I wait for presence of element by `$.data.testData` with `PT5S` polling int\n |When I issue a HTTP GET request for a resource with the URL '${requestUrl}'|\n ----\n \n+=== Adding headers to HTTP request\n+\n+==== *_Info_*\n+\n+Adds request headers to request\n+\n+==== *_Wording_*\n+\n+[source,gherkin]\n+----\n+When I add request header with name `$name` and value `$value`\n+----\n+\n+==== *_Parameters_*\n+\n+.  `name` - header name\n+.  `value` - header value\n+\n+==== *_Usage_*\n+\n+.Sample.story\n+[source,gherkin]\n+----\n+Scenario: Verify possibility to add request header with name Name and value Value\n+When I add request headers:\n+|name  |value |\n+|Name  |Value |", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eb5dd27edbfd891229bc11a8d5cb89510c764050"}, "originalPosition": 30}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg4Mzk0OTkx", "url": "https://github.com/vividus-framework/vividus/pull/928#pullrequestreview-488394991", "createdAt": "2020-09-15T07:22:31Z", "commit": {"oid": "eb5dd27edbfd891229bc11a8d5cb89510c764050"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQwNzoyMjozMVrOHR0M6g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQwNzoyMjozMVrOHR0M6g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODQ0MzExNA==", "bodyText": "Let's use the Header converter?", "url": "https://github.com/vividus-framework/vividus/pull/928#discussion_r488443114", "createdAt": "2020-09-15T07:22:31Z", "author": {"login": "ikalinin1"}, "path": "vividus-plugin-rest-api/src/main/java/org/vividus/bdd/steps/api/HttpRequestSteps.java", "diffHunk": "@@ -110,12 +110,22 @@ public void putMultipartRequest(ExamplesTable requestParts)\n     @When(\"I set request headers:$headers\")\n     public void setUpRequestHeaders(ExamplesTable headers)\n     {\n-        List<Header> requestHeaders = headers.getRowsAsParameters(true).stream()\n-                .map(row -> new BasicHeader(row.valueAs(NAME, String.class), row.valueAs(VALUE, String.class)))\n-                .collect(toList());\n+        List<Header> requestHeaders = getRequestHeaders(headers);\n         httpTestContext.putRequestHeaders(requestHeaders);\n     }\n \n+    /**\n+     * Add request headers\n+     * @param headers ExamplesTable representing list of headers with columns \"name\" and \"value\" specifying HTTP header\n+     * names and values respectively\n+     */\n+    @When(\"I add request headers:$headers\")\n+    public void addRequestHeaders(ExamplesTable headers)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eb5dd27edbfd891229bc11a8d5cb89510c764050"}, "originalPosition": 17}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg4Mzk1MDk2", "url": "https://github.com/vividus-framework/vividus/pull/928#pullrequestreview-488395096", "createdAt": "2020-09-15T07:22:40Z", "commit": {"oid": "eb5dd27edbfd891229bc11a8d5cb89510c764050"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQwNzoyMjo0MFrOHR0NQA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQwNzoyMjo0MFrOHR0NQA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODQ0MzIwMA==", "bodyText": "cc @valfirst", "url": "https://github.com/vividus-framework/vividus/pull/928#discussion_r488443200", "createdAt": "2020-09-15T07:22:40Z", "author": {"login": "ikalinin1"}, "path": "vividus-plugin-rest-api/src/main/java/org/vividus/bdd/steps/api/HttpRequestSteps.java", "diffHunk": "@@ -110,12 +110,22 @@ public void putMultipartRequest(ExamplesTable requestParts)\n     @When(\"I set request headers:$headers\")\n     public void setUpRequestHeaders(ExamplesTable headers)\n     {\n-        List<Header> requestHeaders = headers.getRowsAsParameters(true).stream()\n-                .map(row -> new BasicHeader(row.valueAs(NAME, String.class), row.valueAs(VALUE, String.class)))\n-                .collect(toList());\n+        List<Header> requestHeaders = getRequestHeaders(headers);\n         httpTestContext.putRequestHeaders(requestHeaders);\n     }\n \n+    /**\n+     * Add request headers\n+     * @param headers ExamplesTable representing list of headers with columns \"name\" and \"value\" specifying HTTP header\n+     * names and values respectively\n+     */\n+    @When(\"I add request headers:$headers\")\n+    public void addRequestHeaders(ExamplesTable headers)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODQ0MzExNA=="}, "originalCommit": {"oid": "eb5dd27edbfd891229bc11a8d5cb89510c764050"}, "originalPosition": 17}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkwMzgwNTE2", "url": "https://github.com/vividus-framework/vividus/pull/928#pullrequestreview-490380516", "createdAt": "2020-09-17T08:52:59Z", "commit": {"oid": "ab9cfcad02e63a6cfc95187beb352930c9279e54"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xN1QwODo1Mjo1OVrOHTYIaQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xN1QwODo1MzowOFrOHTYI0Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDA4MDM2MQ==", "bodyText": "it can be inlined", "url": "https://github.com/vividus-framework/vividus/pull/928#discussion_r490080361", "createdAt": "2020-09-17T08:52:59Z", "author": {"login": "valfirst"}, "path": "vividus-plugin-rest-api/src/main/java/org/vividus/bdd/steps/api/HttpRequestSteps.java", "diffHunk": "@@ -233,6 +242,19 @@ public void waitForResponseCode(int responseCode, Duration duration, int retryTi\n         );\n     }\n \n+    public void performWithHeaders(ExamplesTable headers, Consumer<List<Header>> headersConsumer)\n+    {\n+        List<Header> requestHeaders = getRequestHeaders(headers);\n+        headersConsumer.accept(requestHeaders);\n+    }\n+\n+    private List<Header> getRequestHeaders(ExamplesTable headers)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ab9cfcad02e63a6cfc95187beb352930c9279e54"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDA4MDQ2NQ==", "bodyText": "it shouldn't be public", "url": "https://github.com/vividus-framework/vividus/pull/928#discussion_r490080465", "createdAt": "2020-09-17T08:53:08Z", "author": {"login": "valfirst"}, "path": "vividus-plugin-rest-api/src/main/java/org/vividus/bdd/steps/api/HttpRequestSteps.java", "diffHunk": "@@ -233,6 +242,19 @@ public void waitForResponseCode(int responseCode, Duration duration, int retryTi\n         );\n     }\n \n+    public void performWithHeaders(ExamplesTable headers, Consumer<List<Header>> headersConsumer)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ab9cfcad02e63a6cfc95187beb352930c9279e54"}, "originalPosition": 35}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ab9cfcad02e63a6cfc95187beb352930c9279e54", "author": {"user": {"login": "TatianaTochko", "name": null}}, "url": "https://github.com/vividus-framework/vividus/commit/ab9cfcad02e63a6cfc95187beb352930c9279e54", "committedDate": "2020-09-17T07:57:30Z", "message": "Update fix issue881 via comments"}, "afterCommit": {"oid": "fd81207dc0f25d7a326e8cd7178b5a49179c0ce4", "author": {"user": {"login": "TatianaTochko", "name": null}}, "url": "https://github.com/vividus-framework/vividus/commit/fd81207dc0f25d7a326e8cd7178b5a49179c0ce4", "committedDate": "2020-09-17T09:56:23Z", "message": "Update fix issue881 via comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkwNDM5ODEz", "url": "https://github.com/vividus-framework/vividus/pull/928#pullrequestreview-490439813", "createdAt": "2020-09-17T10:06:09Z", "commit": {"oid": "fd81207dc0f25d7a326e8cd7178b5a49179c0ce4"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xN1QxMDowNjoxMFrOHTa8Jw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xN1QxMDowNzozNFrOHTa_Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDEyNjM3NQ==", "bodyText": ".  `\n\nduplicate whitespace", "url": "https://github.com/vividus-framework/vividus/pull/928#discussion_r490126375", "createdAt": "2020-09-17T10:06:10Z", "author": {"login": "valfirst"}, "path": "docs/modules/plugins/pages/plugin-rest-api.adoc", "diffHunk": "@@ -88,6 +88,37 @@ When I wait for presence of element by `$.data.testData` with `PT5S` polling int\n |When I issue a HTTP GET request for a resource with the URL '${requestUrl}'|\n ----\n \n+=== Adding headers to HTTP request\n+\n+==== *_Info_*\n+\n+Adds request headers to request\n+\n+==== *_Wording_*\n+\n+[source,gherkin]\n+----\n+When I add request header with name `$name` and value `$value`\n+----\n+\n+==== *_Parameters_*\n+\n+.  `name` - header name\n+.  `value` - header value", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fd81207dc0f25d7a326e8cd7178b5a49179c0ce4"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDEyNjQwMg==", "bodyText": ".  `\n\nduplicate whitespace", "url": "https://github.com/vividus-framework/vividus/pull/928#discussion_r490126402", "createdAt": "2020-09-17T10:06:13Z", "author": {"login": "valfirst"}, "path": "docs/modules/plugins/pages/plugin-rest-api.adoc", "diffHunk": "@@ -88,6 +88,37 @@ When I wait for presence of element by `$.data.testData` with `PT5S` polling int\n |When I issue a HTTP GET request for a resource with the URL '${requestUrl}'|\n ----\n \n+=== Adding headers to HTTP request\n+\n+==== *_Info_*\n+\n+Adds request headers to request\n+\n+==== *_Wording_*\n+\n+[source,gherkin]\n+----\n+When I add request header with name `$name` and value `$value`\n+----\n+\n+==== *_Parameters_*\n+\n+.  `name` - header name", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fd81207dc0f25d7a326e8cd7178b5a49179c0ce4"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDEyNjY2Nw==", "bodyText": "it's not related to the current PR", "url": "https://github.com/vividus-framework/vividus/pull/928#discussion_r490126667", "createdAt": "2020-09-17T10:06:44Z", "author": {"login": "valfirst"}, "path": "vividus-http-client/src/main/java/org/vividus/http/exception/HttpRequestBuildException.java", "diffHunk": "@@ -16,7 +16,9 @@\n \n package org.vividus.http.exception;\n \n-public class HttpRequestBuildException extends Exception\n+import java.io.IOException;\n+\n+public class HttpRequestBuildException extends IOException", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fd81207dc0f25d7a326e8cd7178b5a49179c0ce4"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDEyNzE1NA==", "bodyText": "a lot of noisy changes coming from another PRs/commits", "url": "https://github.com/vividus-framework/vividus/pull/928#discussion_r490127154", "createdAt": "2020-09-17T10:07:34Z", "author": {"login": "valfirst"}, "path": "vividus-http-client/src/main/java/org/vividus/http/exception/HttpRequestBuildException.java", "diffHunk": "@@ -16,7 +16,9 @@\n \n package org.vividus.http.exception;\n \n-public class HttpRequestBuildException extends Exception\n+import java.io.IOException;\n+\n+public class HttpRequestBuildException extends IOException", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDEyNjY2Nw=="}, "originalCommit": {"oid": "fd81207dc0f25d7a326e8cd7178b5a49179c0ce4"}, "originalPosition": 7}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b980bddb46e6a10e09f87818d7d4f3381e0eed5e", "author": {"user": {"login": "TatianaTochko", "name": null}}, "url": "https://github.com/vividus-framework/vividus/commit/b980bddb46e6a10e09f87818d7d4f3381e0eed5e", "committedDate": "2020-09-17T10:32:43Z", "message": "Fixed 'Step to add single HTTP header to request #881'"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fd81207dc0f25d7a326e8cd7178b5a49179c0ce4", "author": {"user": {"login": "TatianaTochko", "name": null}}, "url": "https://github.com/vividus-framework/vividus/commit/fd81207dc0f25d7a326e8cd7178b5a49179c0ce4", "committedDate": "2020-09-17T09:56:23Z", "message": "Update fix issue881 via comments"}, "afterCommit": {"oid": "b980bddb46e6a10e09f87818d7d4f3381e0eed5e", "author": {"user": {"login": "TatianaTochko", "name": null}}, "url": "https://github.com/vividus-framework/vividus/commit/b980bddb46e6a10e09f87818d7d4f3381e0eed5e", "committedDate": "2020-09-17T10:32:43Z", "message": "Fixed 'Step to add single HTTP header to request #881'"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "26c4627b18f81f6ae216fd5f0c47b0b8bfe94ac8", "author": {"user": {"login": "TatianaTochko", "name": null}}, "url": "https://github.com/vividus-framework/vividus/commit/26c4627b18f81f6ae216fd5f0c47b0b8bfe94ac8", "committedDate": "2020-09-17T10:56:34Z", "message": "Update fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0374d9c94c011036907079884fa55ac3132b312b", "author": {"user": {"login": "TatianaTochko", "name": null}}, "url": "https://github.com/vividus-framework/vividus/commit/0374d9c94c011036907079884fa55ac3132b312b", "committedDate": "2020-09-18T15:13:03Z", "message": "Update fix issue881 via comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkxNTc1Njk4", "url": "https://github.com/vividus-framework/vividus/pull/928#pullrequestreview-491575698", "createdAt": "2020-09-18T15:36:36Z", "commit": {"oid": "0374d9c94c011036907079884fa55ac3132b312b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkxNTgwMTI1", "url": "https://github.com/vividus-framework/vividus/pull/928#pullrequestreview-491580125", "createdAt": "2020-09-18T15:42:34Z", "commit": {"oid": "0374d9c94c011036907079884fa55ac3132b312b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4923, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}