{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA0OTE4MDkz", "number": 1034, "title": "[extension-selenium] Add step to check element existence for duration", "bodyText": "", "createdAt": "2020-10-16T15:11:47Z", "url": "https://github.com/vividus-framework/vividus/pull/1034", "merged": true, "mergeCommit": {"oid": "f4ba34bc6e90da8ebf293bc6da8fab41103e24ed"}, "closed": true, "closedAt": "2020-10-21T12:37:38Z", "author": {"login": "uarlouski"}, "timelineItems": {"totalCount": 16, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdTIgJagBqjM4ODcwODg1MzI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdUsplhAFqTUxMzYyNzU1OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d5f1405623d7d03d6bab3bc7761577661f4ce939", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/d5f1405623d7d03d6bab3bc7761577661f4ce939", "committedDate": "2020-10-16T15:08:59Z", "message": "[extension-selenium] Add step to check element existence for duration"}, "afterCommit": {"oid": "52aacda77ce5b29fa3fdc983a0754ce833f61a4b", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/52aacda77ce5b29fa3fdc983a0754ce833f61a4b", "committedDate": "2020-10-16T15:55:43Z", "message": "[extension-selenium] Add step to check element existence for duration"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "52aacda77ce5b29fa3fdc983a0754ce833f61a4b", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/52aacda77ce5b29fa3fdc983a0754ce833f61a4b", "committedDate": "2020-10-16T15:55:43Z", "message": "[extension-selenium] Add step to check element existence for duration"}, "afterCommit": {"oid": "5d86affdae1aaa01823bf6af56aa80e14b7ec76b", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/5d86affdae1aaa01823bf6af56aa80e14b7ec76b", "committedDate": "2020-10-16T16:05:09Z", "message": "[extension-selenium] Add step to check element existence for duration"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTExMDExOTc3", "url": "https://github.com/vividus-framework/vividus/pull/1034#pullrequestreview-511011977", "createdAt": "2020-10-17T20:07:26Z", "commit": {"oid": "5d86affdae1aaa01823bf6af56aa80e14b7ec76b"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xN1QyMDowNzoyN1rOHjfjfQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xN1QyMDoxMzoyNlrOHjflQg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjk3OTE5Nw==", "bodyText": "Then element located `$locator` exists for `$duration` duration", "url": "https://github.com/vividus-framework/vividus/pull/1034#discussion_r506979197", "createdAt": "2020-10-17T20:07:27Z", "author": {"login": "valfirst"}, "path": "vividus-extension-selenium/src/main/java/org/vividus/bdd/steps/ui/GenericWaitSteps.java", "diffHunk": "@@ -59,6 +66,22 @@ public void waitForElementDisappearance(Locator locator)\n         waitForCondition(expectedSearchActionsConditions.invisibilityOfElement(locator));\n     }\n \n+    /**\n+     * Checks that element located by <b>locator</b> exists during the <b>duration</b>\n+     * @param locator locator to find an element\n+     * @param duration total waiting time according to <a href=\"https://en.wikipedia.org/wiki/ISO_8601\">ISO 8601</a>\n+     * standard\n+     */\n+    @Then(\"element located '$locator' exists for '$duration' duration\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5d86affdae1aaa01823bf6af56aa80e14b7ec76b"}, "originalPosition": 44}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjk3OTM1NA==", "bodyText": "is there any way to pretty-print duration?", "url": "https://github.com/vividus-framework/vividus/pull/1034#discussion_r506979354", "createdAt": "2020-10-17T20:09:37Z", "author": {"login": "valfirst"}, "path": "vividus-extension-selenium/src/main/java/org/vividus/bdd/steps/ui/GenericWaitSteps.java", "diffHunk": "@@ -59,6 +66,22 @@ public void waitForElementDisappearance(Locator locator)\n         waitForCondition(expectedSearchActionsConditions.invisibilityOfElement(locator));\n     }\n \n+    /**\n+     * Checks that element located by <b>locator</b> exists during the <b>duration</b>\n+     * @param locator locator to find an element\n+     * @param duration total waiting time according to <a href=\"https://en.wikipedia.org/wiki/ISO_8601\">ISO 8601</a>\n+     * standard\n+     */\n+    @Then(\"element located '$locator' exists for '$duration' duration\")\n+    public void doesElementByLocatorExistsForDuration(Locator locator, Duration duration)\n+    {\n+        WaitResult<Boolean> result = waitActions.wait(uiContext.getSearchContext(), duration,\n+                expectedSearchActionsConditions\n+                        .not(expectedSearchActionsConditions.presenceOfAllElementsLocatedBy(locator)), false);\n+        softAssert.assertFalse(String.format(\"Element located by locator '%s' has existed during '%s' duration\",\n+                locator, duration.toSeconds()), result.isWaitPassed());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5d86affdae1aaa01823bf6af56aa80e14b7ec76b"}, "originalPosition": 51}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjk3OTY1MA==", "bodyText": "I believe we should revise org.vividus.ui.action.search.Locator#toString as first", "url": "https://github.com/vividus-framework/vividus/pull/1034#discussion_r506979650", "createdAt": "2020-10-17T20:13:26Z", "author": {"login": "valfirst"}, "path": "vividus-extension-selenium/src/test/java/org/vividus/bdd/steps/ui/GenericWaitStepsTests.java", "diffHunk": "@@ -75,4 +81,26 @@ void testWaitTillElementDisappears()\n         waitSteps.waitForElementDisappearance(locator);\n         verify(waitActions).wait(webElement, condition);\n     }\n+\n+    @SuppressWarnings(\"unchecked\")\n+    @Test\n+    void testElementByLocatorExistsForDuration()\n+    {\n+        Locator locator = new Locator(TestLocatorType.SEARCH, VALUE);\n+        IExpectedSearchContextCondition<List<WebElement>> presenceOfAllElements = mock(\n+                IExpectedSearchContextCondition.class);\n+        IExpectedSearchContextCondition<Boolean> not = mock(IExpectedSearchContextCondition.class);\n+        WaitResult<Boolean> waitResult = new WaitResult<>();\n+        waitResult.setWaitPassed(true);\n+\n+        when(uiContext.getSearchContext()).thenReturn(webElement);\n+        when(expectedSearchActionsConditions.presenceOfAllElementsLocatedBy(locator)).thenReturn(presenceOfAllElements);\n+        when(expectedSearchActionsConditions.not(presenceOfAllElements)).thenReturn(not);\n+        when(waitActions.wait(webElement, Duration.ZERO, not, false)).thenReturn(waitResult);\n+\n+        waitSteps.doesElementByLocatorExistsForDuration(locator, Duration.ZERO);\n+\n+        verify(softAssert).assertFalse(\"Element located by locator ' Search: 'value'; Visibility: VISIBLE;' has existed\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5d86affdae1aaa01823bf6af56aa80e14b7ec76b"}, "originalPosition": 61}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTExMDE0Mzg2", "url": "https://github.com/vividus-framework/vividus/pull/1034#pullrequestreview-511014386", "createdAt": "2020-10-17T20:50:34Z", "commit": {"oid": "5d86affdae1aaa01823bf6af56aa80e14b7ec76b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xN1QyMDo1MDozNFrOHjfxYA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xN1QyMDo1MDozNFrOHjfxYA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjk4Mjc1Mg==", "bodyText": "since = \"0.2.9\"", "url": "https://github.com/vividus-framework/vividus/pull/1034#discussion_r506982752", "createdAt": "2020-10-17T20:50:34Z", "author": {"login": "valfirst"}, "path": "vividus-plugin-web-app/src/main/java/org/vividus/bdd/steps/ui/web/WaitSteps.java", "diffHunk": "@@ -338,9 +338,11 @@ public void elementByIdDisappears(String id)\n \n     /**\n      * Checks that element exists during the timeout\n+     * @deprecated Use <code>Then element located '$locator' exists for '$duration' duration</code>\n      * @param seconds timeout in seconds\n      * @param xpath XPath value of the element\n      */\n+    @Deprecated(forRemoval = true, since = \"0.3.0\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5d86affdae1aaa01823bf6af56aa80e14b7ec76b"}, "originalPosition": 8}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTExNDkwMDE3", "url": "https://github.com/vividus-framework/vividus/pull/1034#pullrequestreview-511490017", "createdAt": "2020-10-19T07:45:30Z", "commit": {"oid": "5d86affdae1aaa01823bf6af56aa80e14b7ec76b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5d86affdae1aaa01823bf6af56aa80e14b7ec76b", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/5d86affdae1aaa01823bf6af56aa80e14b7ec76b", "committedDate": "2020-10-16T16:05:09Z", "message": "[extension-selenium] Add step to check element existence for duration"}, "afterCommit": {"oid": "1da5187406e005174a3b209bbc3c43f994edf0bd", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/1da5187406e005174a3b209bbc3c43f994edf0bd", "committedDate": "2020-10-19T11:36:23Z", "message": "[extension-selenium] Add step to check element existence for duration"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1da5187406e005174a3b209bbc3c43f994edf0bd", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/1da5187406e005174a3b209bbc3c43f994edf0bd", "committedDate": "2020-10-19T11:36:23Z", "message": "[extension-selenium] Add step to check element existence for duration"}, "afterCommit": {"oid": "f7704da5faf82539c10783154774bc64c8e829e2", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/f7704da5faf82539c10783154774bc64c8e829e2", "committedDate": "2020-10-19T11:51:43Z", "message": "[extension-selenium] Add step to check element existence for duration"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f7704da5faf82539c10783154774bc64c8e829e2", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/f7704da5faf82539c10783154774bc64c8e829e2", "committedDate": "2020-10-19T11:51:43Z", "message": "[extension-selenium] Add step to check element existence for duration"}, "afterCommit": {"oid": "e51b0fd117245474962fad97dcab58a39b7ee534", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/e51b0fd117245474962fad97dcab58a39b7ee534", "committedDate": "2020-10-19T12:10:20Z", "message": "[extension-selenium] Add step to check element existence for duration"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTExNzQzOTA4", "url": "https://github.com/vividus-framework/vividus/pull/1034#pullrequestreview-511743908", "createdAt": "2020-10-19T13:12:40Z", "commit": {"oid": "e51b0fd117245474962fad97dcab58a39b7ee534"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxMzoxMjo0MFrOHkNm-A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxMzoxMjo0MFrOHkNm-A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzczMzc1Mg==", "bodyText": "what about adding minutes as well?", "url": "https://github.com/vividus-framework/vividus/pull/1034#discussion_r507733752", "createdAt": "2020-10-19T13:12:40Z", "author": {"login": "valfirst"}, "path": "vividus-extension-selenium/src/main/java/org/vividus/bdd/steps/ui/GenericWaitSteps.java", "diffHunk": "@@ -59,6 +68,41 @@ public void waitForElementDisappearance(Locator locator)\n         waitForCondition(expectedSearchActionsConditions.invisibilityOfElement(locator));\n     }\n \n+    /**\n+     * Checks that element located by <b>locator</b> exists during the <b>duration</b>\n+     * @param locator locator to find an element\n+     * @param duration total waiting time according to <a href=\"https://en.wikipedia.org/wiki/ISO_8601\">ISO 8601</a>\n+     * standard\n+     */\n+    @Then(\"element located `$locator` exists for `$duration` duration\")\n+    public void doesElementByLocatorExistsForDuration(Locator locator, Duration duration)\n+    {\n+        String prettyDuration = formatDuration(duration);\n+\n+        WaitResult<Boolean> result = waitActions.wait(uiContext.getSearchContext(), duration,\n+                expectedSearchActionsConditions\n+                        .not(expectedSearchActionsConditions.presenceOfAllElementsLocatedBy(locator)), false);\n+\n+        String assertionMessage = String.format(\"Element located by locator %s has existed during %s\",\n+                locator.toHumanReadableString(), prettyDuration);\n+        softAssert.assertFalse(assertionMessage, result.isWaitPassed());\n+    }\n+\n+    private String formatDuration(Duration duration)\n+    {\n+        String durationFormat = \"\";\n+        if (duration.toSeconds() != 0)\n+        {\n+            durationFormat += \"s' seconds' \";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e51b0fd117245474962fad97dcab58a39b7ee534"}, "originalPosition": 65}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTExNzQ0OTEz", "url": "https://github.com/vividus-framework/vividus/pull/1034#pullrequestreview-511744913", "createdAt": "2020-10-19T13:13:44Z", "commit": {"oid": "e51b0fd117245474962fad97dcab58a39b7ee534"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxMzoxMzo0NFrOHkNptA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxMzoxMzo0NFrOHkNptA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzczNDQ1Mg==", "bodyText": "during vs for?", "url": "https://github.com/vividus-framework/vividus/pull/1034#discussion_r507734452", "createdAt": "2020-10-19T13:13:44Z", "author": {"login": "valfirst"}, "path": "vividus-extension-selenium/src/main/java/org/vividus/bdd/steps/ui/GenericWaitSteps.java", "diffHunk": "@@ -59,6 +68,41 @@ public void waitForElementDisappearance(Locator locator)\n         waitForCondition(expectedSearchActionsConditions.invisibilityOfElement(locator));\n     }\n \n+    /**\n+     * Checks that element located by <b>locator</b> exists during the <b>duration</b>\n+     * @param locator locator to find an element\n+     * @param duration total waiting time according to <a href=\"https://en.wikipedia.org/wiki/ISO_8601\">ISO 8601</a>\n+     * standard\n+     */\n+    @Then(\"element located `$locator` exists for `$duration` duration\")\n+    public void doesElementByLocatorExistsForDuration(Locator locator, Duration duration)\n+    {\n+        String prettyDuration = formatDuration(duration);\n+\n+        WaitResult<Boolean> result = waitActions.wait(uiContext.getSearchContext(), duration,\n+                expectedSearchActionsConditions\n+                        .not(expectedSearchActionsConditions.presenceOfAllElementsLocatedBy(locator)), false);\n+\n+        String assertionMessage = String.format(\"Element located by locator %s has existed during %s\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e51b0fd117245474962fad97dcab58a39b7ee534"}, "originalPosition": 55}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e51b0fd117245474962fad97dcab58a39b7ee534", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/e51b0fd117245474962fad97dcab58a39b7ee534", "committedDate": "2020-10-19T12:10:20Z", "message": "[extension-selenium] Add step to check element existence for duration"}, "afterCommit": {"oid": "2bf255b51b31e88dad635308d18b9d7f8f820dfc", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/2bf255b51b31e88dad635308d18b9d7f8f820dfc", "committedDate": "2020-10-19T13:33:07Z", "message": "[extension-selenium] Add step to check element existence for duration"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEyNDc0MjE3", "url": "https://github.com/vividus-framework/vividus/pull/1034#pullrequestreview-512474217", "createdAt": "2020-10-20T08:48:00Z", "commit": {"oid": "2bf255b51b31e88dad635308d18b9d7f8f820dfc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2bf255b51b31e88dad635308d18b9d7f8f820dfc", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/2bf255b51b31e88dad635308d18b9d7f8f820dfc", "committedDate": "2020-10-19T13:33:07Z", "message": "[extension-selenium] Add step to check element existence for duration"}, "afterCommit": {"oid": "04e7cc09779ef2966e01d582ef339fee95ce28e9", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/04e7cc09779ef2966e01d582ef339fee95ce28e9", "committedDate": "2020-10-21T08:41:00Z", "message": "[extension-selenium] Add step to check element existence for duration"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3021f410f826380311ad1e9ed960c709e2fb21f9", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/3021f410f826380311ad1e9ed960c709e2fb21f9", "committedDate": "2020-10-21T09:55:11Z", "message": "[extension-selenium] Add step to check element existence for duration"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "04e7cc09779ef2966e01d582ef339fee95ce28e9", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/04e7cc09779ef2966e01d582ef339fee95ce28e9", "committedDate": "2020-10-21T08:41:00Z", "message": "[extension-selenium] Add step to check element existence for duration"}, "afterCommit": {"oid": "3021f410f826380311ad1e9ed960c709e2fb21f9", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/3021f410f826380311ad1e9ed960c709e2fb21f9", "committedDate": "2020-10-21T09:55:11Z", "message": "[extension-selenium] Add step to check element existence for duration"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEzNjI3NTU4", "url": "https://github.com/vividus-framework/vividus/pull/1034#pullrequestreview-513627558", "createdAt": "2020-10-21T12:36:58Z", "commit": {"oid": "3021f410f826380311ad1e9ed960c709e2fb21f9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4829, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}