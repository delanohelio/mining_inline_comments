{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAwMDAxOTI2", "number": 1002, "title": "[vividus] Add while-like step", "bodyText": "", "createdAt": "2020-10-08T15:17:52Z", "url": "https://github.com/vividus-framework/vividus/pull/1002", "merged": true, "mergeCommit": {"oid": "17034a118e3b403893a34290c7400006801de4f5"}, "closed": true, "closedAt": "2020-10-09T20:15:32Z", "author": {"login": "ikalinin1"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdQjLmJABqjM4NTYwMzQ1NjU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdQ3SvGAFqTUwNTc0MjEzOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6069d88797ef1062493c85a4f4fe8bb54faff9ac", "author": {"user": {"login": "ikalinin1", "name": "Ivan Kalinin"}}, "url": "https://github.com/vividus-framework/vividus/commit/6069d88797ef1062493c85a4f4fe8bb54faff9ac", "committedDate": "2020-10-08T15:17:15Z", "message": "[vividus] Add while-like step"}, "afterCommit": {"oid": "871959bfe0bfb92d0085285450c0038b92f4d87c", "author": {"user": {"login": "ikalinin1", "name": "Ivan Kalinin"}}, "url": "https://github.com/vividus-framework/vividus/commit/871959bfe0bfb92d0085285450c0038b92f4d87c", "committedDate": "2020-10-08T15:19:12Z", "message": "[vividus] Add while-like step"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA0ODk4NjIy", "url": "https://github.com/vividus-framework/vividus/pull/1002#pullrequestreview-504898622", "createdAt": "2020-10-08T15:20:57Z", "commit": {"oid": "871959bfe0bfb92d0085285450c0038b92f4d87c"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxNToyMDo1N1rOHej3Xw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxNToyOToyNlrOHekQJg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTgwNjk0Mw==", "bodyText": "lets move it outside commons", "url": "https://github.com/vividus-framework/vividus/pull/1002#discussion_r501806943", "createdAt": "2020-10-08T15:20:57Z", "author": {"login": "valfirst"}, "path": "docs/modules/commons/nav.adoc", "diffHunk": "@@ -1,3 +1,4 @@\n-.Tests development\n+.Commons\n+* xref:vividus-steps.adoc[Steps]\n * xref:tests-configuration.adoc[Tests Configuration]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "871959bfe0bfb92d0085285450c0038b92f4d87c"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTgwNzMwNw==", "bodyText": "that are delivered", "url": "https://github.com/vividus-framework/vividus/pull/1002#discussion_r501807307", "createdAt": "2020-10-08T15:21:26Z", "author": {"login": "valfirst"}, "path": "docs/modules/commons/pages/vividus-steps.adoc", "diffHunk": "@@ -0,0 +1,44 @@\n+= Steps available out of the box\n+\n+Here one could find description of the steps that delivered with Vividus itself without any plugins required.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "871959bfe0bfb92d0085285450c0038b92f4d87c"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTgwNzU4OA==", "bodyText": "while -> until", "url": "https://github.com/vividus-framework/vividus/pull/1002#discussion_r501807588", "createdAt": "2020-10-08T15:21:50Z", "author": {"login": "valfirst"}, "path": "docs/modules/commons/pages/vividus-steps.adoc", "diffHunk": "@@ -0,0 +1,44 @@\n+= Steps available out of the box\n+\n+Here one could find description of the steps that delivered with Vividus itself without any plugins required.\n+\n+=== While-like steps executor\n+\n+==== *_Info_*\n+\n+Executes steps while condition or iteration limit reached.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "871959bfe0bfb92d0085285450c0038b92f4d87c"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTgwNzkwMg==", "bodyText": "is reached", "url": "https://github.com/vividus-framework/vividus/pull/1002#discussion_r501807902", "createdAt": "2020-10-08T15:22:14Z", "author": {"login": "valfirst"}, "path": "docs/modules/commons/pages/vividus-steps.adoc", "diffHunk": "@@ -0,0 +1,44 @@\n+= Steps available out of the box\n+\n+Here one could find description of the steps that delivered with Vividus itself without any plugins required.\n+\n+=== While-like steps executor\n+\n+==== *_Info_*\n+\n+Executes steps while condition or iteration limit reached.\n+\n+[IMPORTANT]\n+If iteration limit reached no failure or exception will happen", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "871959bfe0bfb92d0085285450c0038b92f4d87c"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTgwODIxNw==", "bodyText": "happen -> occur", "url": "https://github.com/vividus-framework/vividus/pull/1002#discussion_r501808217", "createdAt": "2020-10-08T15:22:40Z", "author": {"login": "valfirst"}, "path": "docs/modules/commons/pages/vividus-steps.adoc", "diffHunk": "@@ -0,0 +1,44 @@\n+= Steps available out of the box\n+\n+Here one could find description of the steps that delivered with Vividus itself without any plugins required.\n+\n+=== While-like steps executor\n+\n+==== *_Info_*\n+\n+Executes steps while condition or iteration limit reached.\n+\n+[IMPORTANT]\n+If iteration limit reached no failure or exception will happen", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "871959bfe0bfb92d0085285450c0038b92f4d87c"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTgwODU1Ng==", "bodyText": "please elaborate", "url": "https://github.com/vividus-framework/vividus/pull/1002#discussion_r501808556", "createdAt": "2020-10-08T15:23:06Z", "author": {"login": "valfirst"}, "path": "docs/modules/commons/pages/vividus-steps.adoc", "diffHunk": "@@ -0,0 +1,44 @@\n+= Steps available out of the box\n+\n+Here one could find description of the steps that delivered with Vividus itself without any plugins required.\n+\n+=== While-like steps executor\n+\n+==== *_Info_*\n+\n+Executes steps while condition or iteration limit reached.\n+\n+[IMPORTANT]\n+If iteration limit reached no failure or exception will happen\n+\n+==== *_Wording_*\n+\n+[source,gherkin]\n+----\n+When I execute steps at most $max times while `$variableName` is $comparisonRule `$expectedValue`:$stepsToExecute\n+----\n+\n+==== *_Parameters_*\n+\n+. `$max` - iterations", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "871959bfe0bfb92d0085285450c0038b92f4d87c"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTgwOTQyMg==", "bodyText": "... while variable '$name' is $comparisonRule...\n\nlets make variable reference more explicit", "url": "https://github.com/vividus-framework/vividus/pull/1002#discussion_r501809422", "createdAt": "2020-10-08T15:24:15Z", "author": {"login": "valfirst"}, "path": "docs/modules/commons/pages/vividus-steps.adoc", "diffHunk": "@@ -0,0 +1,44 @@\n+= Steps available out of the box\n+\n+Here one could find description of the steps that delivered with Vividus itself without any plugins required.\n+\n+=== While-like steps executor\n+\n+==== *_Info_*\n+\n+Executes steps while condition or iteration limit reached.\n+\n+[IMPORTANT]\n+If iteration limit reached no failure or exception will happen\n+\n+==== *_Wording_*\n+\n+[source,gherkin]\n+----\n+When I execute steps at most $max times while `$variableName` is $comparisonRule `$expectedValue`:$stepsToExecute", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "871959bfe0bfb92d0085285450c0038b92f4d87c"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTgxMDA2Ng==", "bodyText": "a name of the variable to check", "url": "https://github.com/vividus-framework/vividus/pull/1002#discussion_r501810066", "createdAt": "2020-10-08T15:25:03Z", "author": {"login": "valfirst"}, "path": "docs/modules/commons/pages/vividus-steps.adoc", "diffHunk": "@@ -0,0 +1,44 @@\n+= Steps available out of the box\n+\n+Here one could find description of the steps that delivered with Vividus itself without any plugins required.\n+\n+=== While-like steps executor\n+\n+==== *_Info_*\n+\n+Executes steps while condition or iteration limit reached.\n+\n+[IMPORTANT]\n+If iteration limit reached no failure or exception will happen\n+\n+==== *_Wording_*\n+\n+[source,gherkin]\n+----\n+When I execute steps at most $max times while `$variableName` is $comparisonRule `$expectedValue`:$stepsToExecute\n+----\n+\n+==== *_Parameters_*\n+\n+. `$max` - iterations\n+. `$variableName` - variable name to check", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "871959bfe0bfb92d0085285450c0038b92f4d87c"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTgxMTkyMw==", "bodyText": "noisy change", "url": "https://github.com/vividus-framework/vividus/pull/1002#discussion_r501811923", "createdAt": "2020-10-08T15:27:28Z", "author": {"login": "valfirst"}, "path": "docs/modules/plugins/pages/plugin-web-app.adoc", "diffHunk": "@@ -11,7 +11,6 @@ The plugin provides functionality to interact with Web applications.\n implementation(group: 'org.vividus', name: 'vividus-plugin-web-app', version: '{page-component-version}')\n ----\n \n-", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "871959bfe0bfb92d0085285450c0038b92f4d87c"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTgxMjE5MA==", "bodyText": "I think we need to document alias as well", "url": "https://github.com/vividus-framework/vividus/pull/1002#discussion_r501812190", "createdAt": "2020-10-08T15:27:53Z", "author": {"login": "valfirst"}, "path": "docs/modules/commons/pages/vividus-steps.adoc", "diffHunk": "@@ -0,0 +1,44 @@\n+= Steps available out of the box\n+\n+Here one could find description of the steps that delivered with Vividus itself without any plugins required.\n+\n+=== While-like steps executor\n+\n+==== *_Info_*\n+\n+Executes steps while condition or iteration limit reached.\n+\n+[IMPORTANT]\n+If iteration limit reached no failure or exception will happen\n+\n+==== *_Wording_*\n+\n+[source,gherkin]\n+----\n+When I execute steps at most $max times while `$variableName` is $comparisonRule `$expectedValue`:$stepsToExecute", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "871959bfe0bfb92d0085285450c0038b92f4d87c"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTgxMjg4MQ==", "bodyText": "doesVariableValueMatch", "url": "https://github.com/vividus-framework/vividus/pull/1002#discussion_r501812881", "createdAt": "2020-10-08T15:28:53Z", "author": {"login": "valfirst"}, "path": "vividus/src/main/java/org/vividus/bdd/steps/ExecutableSteps.java", "diffHunk": "@@ -81,6 +81,54 @@ public void ifVariableNotSetPerformSteps(String name, SubSteps stepsToExecute)\n         }\n     }\n \n+    /**\n+     * Executes the steps while variable doesn't have a value fitting defined rules or limit is reached.\n+     * <br>\n+     * <b>Example:</b>\n+     * <br>\n+     * <code>\n+     * When I execute steps at most 5 times while `var` is &lt; `3`:\n+     * <br>\n+     * |step                                                                        |\n+     * <br>\n+     * |When I click on element located `id(counter)`                               |\n+     * <br>\n+     * |When I set the text found in search context to the 'scenario' variable 'var'|\n+     * <br>\n+     * </code>\n+     * @param max Maximum iteration number\n+     * @param name Variable name to check\n+     * @param comparisonRule The rule to compare values\n+     * (&lt;i&gt;Possible values:&lt;b&gt; LESS_THAN, LESS_THAN_OR_EQUAL_TO, GREATER_THAN, GREATER_THAN_OR_EQUAL_TO,\n+     * EQUAL_TO&lt;/b&gt;&lt;/i&gt;)\n+     * @param expectedValue The expected value of the variable\n+     * @param stepsToExecute The examples table with the steps to execute\n+     */\n+    @When(\"I execute steps at most $max times while `$variableName` is $comparisonRule `$expectedValue`:$stepsToExeute\")\n+    @Alias(\n+        \"I execute steps at most $max times while '$variableName' is $comparisonRule '$expectedValue':$stepsToExeute\")\n+    public void executeStepsWhile(int max, String name, ComparisonRule comparisonRule, String expectedValue,\n+            SubSteps stepsToExecute)\n+    {\n+        Matcher<String> valueVerifier = comparisonRule.getComparisonRule(expectedValue);\n+        int iterationsLeft = max;\n+        while (iterationsLeft > 0 && variableValueFits(name, valueVerifier))\n+        {\n+            --iterationsLeft;\n+            stepsToExecute.execute(Optional.empty());\n+        }\n+    }\n+\n+    private boolean variableValueFits(String name, Matcher<String> verifier)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "871959bfe0bfb92d0085285450c0038b92f4d87c"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTgxMzI4Ng==", "bodyText": "return variable == null || verifier.matches(variable);", "url": "https://github.com/vividus-framework/vividus/pull/1002#discussion_r501813286", "createdAt": "2020-10-08T15:29:26Z", "author": {"login": "valfirst"}, "path": "vividus/src/main/java/org/vividus/bdd/steps/ExecutableSteps.java", "diffHunk": "@@ -81,6 +81,54 @@ public void ifVariableNotSetPerformSteps(String name, SubSteps stepsToExecute)\n         }\n     }\n \n+    /**\n+     * Executes the steps while variable doesn't have a value fitting defined rules or limit is reached.\n+     * <br>\n+     * <b>Example:</b>\n+     * <br>\n+     * <code>\n+     * When I execute steps at most 5 times while `var` is &lt; `3`:\n+     * <br>\n+     * |step                                                                        |\n+     * <br>\n+     * |When I click on element located `id(counter)`                               |\n+     * <br>\n+     * |When I set the text found in search context to the 'scenario' variable 'var'|\n+     * <br>\n+     * </code>\n+     * @param max Maximum iteration number\n+     * @param name Variable name to check\n+     * @param comparisonRule The rule to compare values\n+     * (&lt;i&gt;Possible values:&lt;b&gt; LESS_THAN, LESS_THAN_OR_EQUAL_TO, GREATER_THAN, GREATER_THAN_OR_EQUAL_TO,\n+     * EQUAL_TO&lt;/b&gt;&lt;/i&gt;)\n+     * @param expectedValue The expected value of the variable\n+     * @param stepsToExecute The examples table with the steps to execute\n+     */\n+    @When(\"I execute steps at most $max times while `$variableName` is $comparisonRule `$expectedValue`:$stepsToExeute\")\n+    @Alias(\n+        \"I execute steps at most $max times while '$variableName' is $comparisonRule '$expectedValue':$stepsToExeute\")\n+    public void executeStepsWhile(int max, String name, ComparisonRule comparisonRule, String expectedValue,\n+            SubSteps stepsToExecute)\n+    {\n+        Matcher<String> valueVerifier = comparisonRule.getComparisonRule(expectedValue);\n+        int iterationsLeft = max;\n+        while (iterationsLeft > 0 && variableValueFits(name, valueVerifier))\n+        {\n+            --iterationsLeft;\n+            stepsToExecute.execute(Optional.empty());\n+        }\n+    }\n+\n+    private boolean variableValueFits(String name, Matcher<String> verifier)\n+    {\n+        String variable = bddVariableContext.getVariable(name);\n+        if (variable == null)\n+        {\n+            return true;\n+        }\n+        return verifier.matches(variable);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "871959bfe0bfb92d0085285450c0038b92f4d87c"}, "originalPosition": 49}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "871959bfe0bfb92d0085285450c0038b92f4d87c", "author": {"user": {"login": "ikalinin1", "name": "Ivan Kalinin"}}, "url": "https://github.com/vividus-framework/vividus/commit/871959bfe0bfb92d0085285450c0038b92f4d87c", "committedDate": "2020-10-08T15:19:12Z", "message": "[vividus] Add while-like step"}, "afterCommit": {"oid": "96e2112f7fa4d537a02d494725cc3a21ecc20e3c", "author": {"user": {"login": "ikalinin1", "name": "Ivan Kalinin"}}, "url": "https://github.com/vividus-framework/vividus/commit/96e2112f7fa4d537a02d494725cc3a21ecc20e3c", "committedDate": "2020-10-09T07:06:19Z", "message": "[vividus] Add while-like step"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "26248ece2276f0c9ac9506a5afeef65398121f97", "author": {"user": {"login": "ikalinin1", "name": "Ivan Kalinin"}}, "url": "https://github.com/vividus-framework/vividus/commit/26248ece2276f0c9ac9506a5afeef65398121f97", "committedDate": "2020-10-09T08:16:14Z", "message": "[vividus] Add while-like step"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "96e2112f7fa4d537a02d494725cc3a21ecc20e3c", "author": {"user": {"login": "ikalinin1", "name": "Ivan Kalinin"}}, "url": "https://github.com/vividus-framework/vividus/commit/96e2112f7fa4d537a02d494725cc3a21ecc20e3c", "committedDate": "2020-10-09T07:06:19Z", "message": "[vividus] Add while-like step"}, "afterCommit": {"oid": "26248ece2276f0c9ac9506a5afeef65398121f97", "author": {"user": {"login": "ikalinin1", "name": "Ivan Kalinin"}}, "url": "https://github.com/vividus-framework/vividus/commit/26248ece2276f0c9ac9506a5afeef65398121f97", "committedDate": "2020-10-09T08:16:14Z", "message": "[vividus] Add while-like step"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA1NTA1OTc3", "url": "https://github.com/vividus-framework/vividus/pull/1002#pullrequestreview-505505977", "createdAt": "2020-10-09T09:22:44Z", "commit": {"oid": "26248ece2276f0c9ac9506a5afeef65398121f97"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA1NzQyMTM5", "url": "https://github.com/vividus-framework/vividus/pull/1002#pullrequestreview-505742139", "createdAt": "2020-10-09T14:45:16Z", "commit": {"oid": "26248ece2276f0c9ac9506a5afeef65398121f97"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 18, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}