{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQ0NjkwNTI5", "number": 1267, "reviewThreads": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yM1QxMDoyODo1NlrOFIiB0w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yM1QxMDozNjozMFrOFIiJ0A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ0NDkwNDUxOnYy", "diffSide": "RIGHT", "path": "vividus-plugin-mobile-app/src/main/java/org/vividus/bdd/mobileapp/steps/TouchSteps.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yM1QxMDoyODo1NlrOIKgeNw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yM1QxMDoyODo1NlrOIKgeNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Nzg4ODY5NQ==", "bodyText": "adjustVerticalPosition", "url": "https://github.com/vividus-framework/vividus/pull/1267#discussion_r547888695", "createdAt": "2020-12-23T10:28:56Z", "author": {"login": "valfirst"}, "path": "vividus-plugin-mobile-app/src/main/java/org/vividus/bdd/mobileapp/steps/TouchSteps.java", "diffHunk": "@@ -139,8 +145,34 @@ public void swipeToElement(SwipeDirection direction, Locator locator, Duration d\n             });\n         }\n \n-        baseValidations.assertElementsNumber(String.format(\"The element by locator %s exists\", locator), elements,\n-                ComparisonRule.EQUAL_TO, 1);\n+        if (baseValidations.assertElementsNumber(String.format(\"The element by locator %s exists\", locator), elements,\n+                ComparisonRule.EQUAL_TO, 1))\n+        {\n+            adjustElementPosition(elements.get(0), duration);\n+        }\n+    }\n+\n+    private void adjustElementPosition(WebElement element, Duration duration)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "965b9d2e009ec951cc1b7b900a4864301d9a4d3b"}, "originalPosition": 51}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ0NDkwNTg2OnYy", "diffSide": "RIGHT", "path": "vividus-plugin-mobile-app/src/main/java/org/vividus/bdd/mobileapp/steps/TouchSteps.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yM1QxMDoyOToyMFrOIKge7w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yM1QxMDoyOToyMFrOIKge7w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Nzg4ODg3OQ==", "bodyText": "duration -> swipeDuration", "url": "https://github.com/vividus-framework/vividus/pull/1267#discussion_r547888879", "createdAt": "2020-12-23T10:29:20Z", "author": {"login": "valfirst"}, "path": "vividus-plugin-mobile-app/src/main/java/org/vividus/bdd/mobileapp/steps/TouchSteps.java", "diffHunk": "@@ -139,8 +145,34 @@ public void swipeToElement(SwipeDirection direction, Locator locator, Duration d\n             });\n         }\n \n-        baseValidations.assertElementsNumber(String.format(\"The element by locator %s exists\", locator), elements,\n-                ComparisonRule.EQUAL_TO, 1);\n+        if (baseValidations.assertElementsNumber(String.format(\"The element by locator %s exists\", locator), elements,\n+                ComparisonRule.EQUAL_TO, 1))\n+        {\n+            adjustElementPosition(elements.get(0), duration);\n+        }\n+    }\n+\n+    private void adjustElementPosition(WebElement element, Duration duration)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "965b9d2e009ec951cc1b7b900a4864301d9a4d3b"}, "originalPosition": 51}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ0NDkwOTM5OnYy", "diffSide": "RIGHT", "path": "vividus-plugin-mobile-app/src/main/java/org/vividus/bdd/mobileapp/steps/TouchSteps.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yM1QxMDozMDo0OFrOIKghBA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yM1QxMDozMDo0OFrOIKghBA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Nzg4OTQxMg==", "bodyText": "(windowSizeHeight - visibilityIndent) - is calculated twice", "url": "https://github.com/vividus-framework/vividus/pull/1267#discussion_r547889412", "createdAt": "2020-12-23T10:30:48Z", "author": {"login": "valfirst"}, "path": "vividus-plugin-mobile-app/src/main/java/org/vividus/bdd/mobileapp/steps/TouchSteps.java", "diffHunk": "@@ -139,8 +145,34 @@ public void swipeToElement(SwipeDirection direction, Locator locator, Duration d\n             });\n         }\n \n-        baseValidations.assertElementsNumber(String.format(\"The element by locator %s exists\", locator), elements,\n-                ComparisonRule.EQUAL_TO, 1);\n+        if (baseValidations.assertElementsNumber(String.format(\"The element by locator %s exists\", locator), elements,\n+                ComparisonRule.EQUAL_TO, 1))\n+        {\n+            adjustElementPosition(elements.get(0), duration);\n+        }\n+    }\n+\n+    private void adjustElementPosition(WebElement element, Duration duration)\n+    {\n+        int windowSizeHeight = genericWebDriverManager.getSize().getHeight();\n+        int windowCenterY = windowSizeHeight / 2;\n+        int visibilityIndent = (int) (VISIBILITY_INDENT_COEFFICIENT * windowSizeHeight);\n+        int elementTopCoordinateY = element.getLocation().getY();\n+\n+        if (elementTopCoordinateY < visibilityIndent)\n+        {\n+            performSwipe(windowCenterY, visibilityIndent - elementTopCoordinateY, duration);\n+        }\n+        else if (elementTopCoordinateY > windowSizeHeight - visibilityIndent)\n+        {\n+            performSwipe(windowCenterY, Math.negateExact(elementTopCoordinateY - (windowSizeHeight - visibilityIndent)),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "965b9d2e009ec951cc1b7b900a4864301d9a4d3b"}, "originalPosition": 64}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ0NDkxMjMyOnYy", "diffSide": "RIGHT", "path": "vividus-plugin-mobile-app/src/main/java/org/vividus/bdd/mobileapp/steps/TouchSteps.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yM1QxMDozMTo1MlrOIKgisA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yM1QxMDozMTo1MlrOIKgisA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Nzg4OTg0MA==", "bodyText": "what about moving this method to TouchActions and naming performVerticalSwipe", "url": "https://github.com/vividus-framework/vividus/pull/1267#discussion_r547889840", "createdAt": "2020-12-23T10:31:52Z", "author": {"login": "valfirst"}, "path": "vividus-plugin-mobile-app/src/main/java/org/vividus/bdd/mobileapp/steps/TouchSteps.java", "diffHunk": "@@ -139,8 +145,34 @@ public void swipeToElement(SwipeDirection direction, Locator locator, Duration d\n             });\n         }\n \n-        baseValidations.assertElementsNumber(String.format(\"The element by locator %s exists\", locator), elements,\n-                ComparisonRule.EQUAL_TO, 1);\n+        if (baseValidations.assertElementsNumber(String.format(\"The element by locator %s exists\", locator), elements,\n+                ComparisonRule.EQUAL_TO, 1))\n+        {\n+            adjustElementPosition(elements.get(0), duration);\n+        }\n+    }\n+\n+    private void adjustElementPosition(WebElement element, Duration duration)\n+    {\n+        int windowSizeHeight = genericWebDriverManager.getSize().getHeight();\n+        int windowCenterY = windowSizeHeight / 2;\n+        int visibilityIndent = (int) (VISIBILITY_INDENT_COEFFICIENT * windowSizeHeight);\n+        int elementTopCoordinateY = element.getLocation().getY();\n+\n+        if (elementTopCoordinateY < visibilityIndent)\n+        {\n+            performSwipe(windowCenterY, visibilityIndent - elementTopCoordinateY, duration);\n+        }\n+        else if (elementTopCoordinateY > windowSizeHeight - visibilityIndent)\n+        {\n+            performSwipe(windowCenterY, Math.negateExact(elementTopCoordinateY - (windowSizeHeight - visibilityIndent)),\n+                    duration);\n+        }\n+    }\n+\n+    private void performSwipe(int centerY, int offset, Duration duration)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "965b9d2e009ec951cc1b7b900a4864301d9a4d3b"}, "originalPosition": 69}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ0NDkxMzIxOnYy", "diffSide": "RIGHT", "path": "vividus-plugin-mobile-app/src/main/java/org/vividus/bdd/mobileapp/steps/TouchSteps.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yM1QxMDozMjowOVrOIKgjLA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yM1QxMDozMjowOVrOIKgjLA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Nzg4OTk2NA==", "bodyText": "centerY -> startY ?", "url": "https://github.com/vividus-framework/vividus/pull/1267#discussion_r547889964", "createdAt": "2020-12-23T10:32:09Z", "author": {"login": "valfirst"}, "path": "vividus-plugin-mobile-app/src/main/java/org/vividus/bdd/mobileapp/steps/TouchSteps.java", "diffHunk": "@@ -139,8 +145,34 @@ public void swipeToElement(SwipeDirection direction, Locator locator, Duration d\n             });\n         }\n \n-        baseValidations.assertElementsNumber(String.format(\"The element by locator %s exists\", locator), elements,\n-                ComparisonRule.EQUAL_TO, 1);\n+        if (baseValidations.assertElementsNumber(String.format(\"The element by locator %s exists\", locator), elements,\n+                ComparisonRule.EQUAL_TO, 1))\n+        {\n+            adjustElementPosition(elements.get(0), duration);\n+        }\n+    }\n+\n+    private void adjustElementPosition(WebElement element, Duration duration)\n+    {\n+        int windowSizeHeight = genericWebDriverManager.getSize().getHeight();\n+        int windowCenterY = windowSizeHeight / 2;\n+        int visibilityIndent = (int) (VISIBILITY_INDENT_COEFFICIENT * windowSizeHeight);\n+        int elementTopCoordinateY = element.getLocation().getY();\n+\n+        if (elementTopCoordinateY < visibilityIndent)\n+        {\n+            performSwipe(windowCenterY, visibilityIndent - elementTopCoordinateY, duration);\n+        }\n+        else if (elementTopCoordinateY > windowSizeHeight - visibilityIndent)\n+        {\n+            performSwipe(windowCenterY, Math.negateExact(elementTopCoordinateY - (windowSizeHeight - visibilityIndent)),\n+                    duration);\n+        }\n+    }\n+\n+    private void performSwipe(int centerY, int offset, Duration duration)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "965b9d2e009ec951cc1b7b900a4864301d9a4d3b"}, "originalPosition": 69}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ0NDkyNDk2OnYy", "diffSide": "RIGHT", "path": "vividus-plugin-mobile-app/src/main/java/org/vividus/bdd/mobileapp/model/SwipeCoordinates.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yM1QxMDozNjozMFrOIKgqAQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yM1QxMTo0MzozMVrOIKiQeQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Nzg5MTcxMw==", "bodyText": "why is it needed?", "url": "https://github.com/vividus-framework/vividus/pull/1267#discussion_r547891713", "createdAt": "2020-12-23T10:36:30Z", "author": {"login": "valfirst"}, "path": "vividus-plugin-mobile-app/src/main/java/org/vividus/bdd/mobileapp/model/SwipeCoordinates.java", "diffHunk": "@@ -38,4 +40,25 @@ public Point getEnd()\n     {\n         return end;\n     }\n+\n+    @Override\n+    public int hashCode()\n+    {\n+        return Objects.hash(end, start);\n+    }\n+\n+    @Override\n+    public boolean equals(Object obj)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "965b9d2e009ec951cc1b7b900a4864301d9a4d3b"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Nzg5NjM1Nw==", "bodyText": "for unit tests :)", "url": "https://github.com/vividus-framework/vividus/pull/1267#discussion_r547896357", "createdAt": "2020-12-23T10:47:46Z", "author": {"login": "uarlouski"}, "path": "vividus-plugin-mobile-app/src/main/java/org/vividus/bdd/mobileapp/model/SwipeCoordinates.java", "diffHunk": "@@ -38,4 +40,25 @@ public Point getEnd()\n     {\n         return end;\n     }\n+\n+    @Override\n+    public int hashCode()\n+    {\n+        return Objects.hash(end, start);\n+    }\n+\n+    @Override\n+    public boolean equals(Object obj)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Nzg5MTcxMw=="}, "originalCommit": {"oid": "965b9d2e009ec951cc1b7b900a4864301d9a4d3b"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzkwMDE2NA==", "bodyText": "The code for unit tests should live in unit tests", "url": "https://github.com/vividus-framework/vividus/pull/1267#discussion_r547900164", "createdAt": "2020-12-23T10:57:06Z", "author": {"login": "valfirst"}, "path": "vividus-plugin-mobile-app/src/main/java/org/vividus/bdd/mobileapp/model/SwipeCoordinates.java", "diffHunk": "@@ -38,4 +40,25 @@ public Point getEnd()\n     {\n         return end;\n     }\n+\n+    @Override\n+    public int hashCode()\n+    {\n+        return Objects.hash(end, start);\n+    }\n+\n+    @Override\n+    public boolean equals(Object obj)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Nzg5MTcxMw=="}, "originalCommit": {"oid": "965b9d2e009ec951cc1b7b900a4864301d9a4d3b"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzkxNzk0NQ==", "bodyText": "removed as no more needed due api changes", "url": "https://github.com/vividus-framework/vividus/pull/1267#discussion_r547917945", "createdAt": "2020-12-23T11:43:31Z", "author": {"login": "uarlouski"}, "path": "vividus-plugin-mobile-app/src/main/java/org/vividus/bdd/mobileapp/model/SwipeCoordinates.java", "diffHunk": "@@ -38,4 +40,25 @@ public Point getEnd()\n     {\n         return end;\n     }\n+\n+    @Override\n+    public int hashCode()\n+    {\n+        return Objects.hash(end, start);\n+    }\n+\n+    @Override\n+    public boolean equals(Object obj)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Nzg5MTcxMw=="}, "originalCommit": {"oid": "965b9d2e009ec951cc1b7b900a4864301d9a4d3b"}, "originalPosition": 21}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4916, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}