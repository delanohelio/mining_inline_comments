{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgwMzM0NTA0", "number": 346, "reviewThreads": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QwOTowMjozNFrODjYVhw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QwOTo1MzowOFrODjZcpw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM4NDI1NDc5OnYy", "diffSide": "RIGHT", "path": ".github/workflows/gradle.yml", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QwOTowMjozNFrOFvJ9TQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QwOTowMjozNFrOFvJ9TQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDk5MDU0MQ==", "bodyText": "No BROWSERSTACK_USER or BROWSERSTACK_KEY -> No BROWSERSTACK_USER and/or BROWSERSTACK_KEY", "url": "https://github.com/vividus-framework/vividus/pull/346#discussion_r384990541", "createdAt": "2020-02-27T09:02:34Z", "author": {"login": "valfirst"}, "path": ".github/workflows/gradle.yml", "diffHunk": "@@ -63,7 +63,27 @@ jobs:\n       run: ./gradlew :vividus-tests:runStories -Pvividus.configuration.environments=integration\n \n     - name: Publish Integration tests report\n+      if: always()\n       uses: actions/upload-artifact@v1\n       with:\n         name: Integration Tests - Allure report\n         path: vividus-tests/output/reports/allure\n+\n+    - name: System tests\n+      if: always()\n+      env:\n+        BROWSERSTACK_USER: ${{ secrets.BROWSERSTACK_USER }}\n+        BROWSERSTACK_KEY: ${{ secrets.BROWSERSTACK_KEY }}\n+      run: |\n+        if [ -n $BROWSERSTACK_USER ] && [ -n $BROWSERSTACK_KEY ]; then\n+            ./gradlew :vividus-tests:runStories -Pvividus.configuration.environments=system -Pvividus.configuration.suite=system\n+        else\n+            echo No BROWSERSTACK_USER or BROWSERSTACK_KEY not available, System tests will be skipped", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5103a40cc1aa34293ed48ac56337ad4759fd5916"}, "originalPosition": 19}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM4NDI2MjQ4OnYy", "diffSide": "RIGHT", "path": "vividus-plugin-web-app/src/test/java/org/vividus/selenium/screenshot/FilesystemScreenshotDebuggerTests.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QwOTowNTowOVrOFvKCPw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QwOTowNTowOVrOFvKCPw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDk5MTgwNw==", "bodyText": "even for invalid folders I recommend to use @TempDir, since we don't know all environment conditions and interaction with file system is always fragile", "url": "https://github.com/vividus-framework/vividus/pull/346#discussion_r384991807", "createdAt": "2020-02-27T09:05:09Z", "author": {"login": "valfirst"}, "path": "vividus-plugin-web-app/src/test/java/org/vividus/selenium/screenshot/FilesystemScreenshotDebuggerTests.java", "diffHunk": "@@ -57,6 +62,27 @@ void shouldNotSaveDebugScreenshotIfFolderNotSpecified()\n         assertThat(testLogger.getLoggingEvents(), empty());\n     }\n \n+    @Test\n+    void shouldCleanUpFolder(@TempDir File debugFolder) throws IOException\n+    {\n+        filesystemScreenshotDebugger.setDebugScreenshotsLocation(Optional.of(debugFolder));\n+        assertThat(debugFolder.list(), is(arrayWithSize(0)));\n+        assertTrue(new File(debugFolder, \"temp.txt\").createNewFile());\n+        assertThat(debugFolder.list(), is(arrayWithSize(1)));\n+        filesystemScreenshotDebugger.cleanUp();\n+        assertThat(debugFolder.list(), is(arrayWithSize(0)));\n+    }\n+\n+    @Test\n+    @SuppressFBWarnings(\"DMI_HARDCODED_ABSOLUTE_FILENAME\")\n+    void shouldLogExceptionIfCleanUpFails() throws IOException\n+    {\n+        File invalidFolder = new File(\"/invalid\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5103a40cc1aa34293ed48ac56337ad4759fd5916"}, "originalPosition": 47}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM4NDI2MzYwOnYy", "diffSide": "RIGHT", "path": "vividus-tests/src/main/resources/overriding.properties", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QwOTowNToyOFrOFvKC5w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QwOTowNToyOFrOFvKC5w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDk5MTk3NQ==", "bodyText": "useless file", "url": "https://github.com/vividus-framework/vividus/pull/346#discussion_r384991975", "createdAt": "2020-02-27T09:05:28Z", "author": {"login": "valfirst"}, "path": "vividus-tests/src/main/resources/overriding.properties", "diffHunk": "@@ -0,0 +1,7 @@\n+#bdd.story-loader.batch-1.resource-location=story/integration\n+#bdd.story-loader.batch-1.resource-include-patterns=VisualStepsTests.story\n+#bdd.story-loader.batch-1.resource-exclude-patterns=\n+\n+#selenium.grid.enabled=true\n+#selenium.grid.url=http://0.0.0.0:4444/wd/hub\n+#selenium.screenshot.debug-directory=/Users/ivan_kalinin1/Work/debug", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5103a40cc1aa34293ed48ac56337ad4759fd5916"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM4NDI2NTU2OnYy", "diffSide": "RIGHT", "path": "vividus-tests/src/main/resources/properties/environment/system/environment.properties", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QwOTowNjowM1rOFvKEHA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QwOTowNjowM1rOFvKEHA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDk5MjI4NA==", "bodyText": "do not put configuration properties to environment properties", "url": "https://github.com/vividus-framework/vividus/pull/346#discussion_r384992284", "createdAt": "2020-02-27T09:06:03Z", "author": {"login": "valfirst"}, "path": "vividus-tests/src/main/resources/properties/environment/system/environment.properties", "diffHunk": "@@ -0,0 +1,14 @@\n+configuration.profile=web/desktop/chrome", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5103a40cc1aa34293ed48ac56337ad4759fd5916"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM4NDI2OTQzOnYy", "diffSide": "RIGHT", "path": "vividus-tests/src/main/resources/properties/environment/system/environment.properties", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QwOTowNzoxN1rOFvKGdQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QwOTowNzoxN1rOFvKGdQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDk5Mjg4NQ==", "bodyText": "group browserstack-specific capabilities", "url": "https://github.com/vividus-framework/vividus/pull/346#discussion_r384992885", "createdAt": "2020-02-27T09:07:17Z", "author": {"login": "valfirst"}, "path": "vividus-tests/src/main/resources/properties/environment/system/environment.properties", "diffHunk": "@@ -0,0 +1,14 @@\n+configuration.profile=web/desktop/chrome\n+selenium.grid.enabled=true\n+selenium.grid.url=https://${BROWSERSTACK_USER}:${BROWSERSTACK_KEY}@hub-cloud.browserstack.com/wd/hub\n+selenium.grid.capabilities.browser=Chrome\n+selenium.grid.capabilities.os=Windows\n+selenium.grid.capabilities.os_version=10\n+selenium.grid.capabilities.resolution=1920x1080\n+selenium.grid.capabilities.build=Vividus System Tests\n+\n+selenium.screenshot.strategy.vividus.web-header-to-cut=100\n+selenium.screenshot.shooting-strategy=vividus\n+selenium.grid.capabilities.console=verbose\n+selenium.grid.capabilities.networkLogs=true\n+selenium.grid.capabilities.video=false", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5103a40cc1aa34293ed48ac56337ad4759fd5916"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM4NDI3MDcyOnYy", "diffSide": "RIGHT", "path": "vividus-tests/src/main/resources/properties/suite/integration/suite.properties", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QwOTowNzo0NVrOFvKHWQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QwOTowNzo0NVrOFvKHWQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDk5MzExMw==", "bodyText": "what about moving system tests to system directory?", "url": "https://github.com/vividus-framework/vividus/pull/346#discussion_r384993113", "createdAt": "2020-02-27T09:07:45Z", "author": {"login": "valfirst"}, "path": "vividus-tests/src/main/resources/properties/suite/integration/suite.properties", "diffHunk": "@@ -2,7 +2,7 @@ csv.escape-char=\\\\\n \n bdd.story-loader.batch-1.resource-location=story/integration\n bdd.story-loader.batch-1.resource-include-patterns=*.story\n-bdd.story-loader.batch-1.resource-exclude-patterns=VisualStepsTests.story\n+bdd.story-loader.batch-1.resource-exclude-patterns=VisualTests.story", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5103a40cc1aa34293ed48ac56337ad4759fd5916"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM4NDI3MTI3OnYy", "diffSide": "RIGHT", "path": "vividus-tests/src/main/resources/properties/suite/system/suite.properties", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QwOTowNzo1NFrOFvKHow==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QwOTowNzo1NFrOFvKHow==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDk5MzE4Nw==", "bodyText": "is it really required?", "url": "https://github.com/vividus-framework/vividus/pull/346#discussion_r384993187", "createdAt": "2020-02-27T09:07:54Z", "author": {"login": "valfirst"}, "path": "vividus-tests/src/main/resources/properties/suite/system/suite.properties", "diffHunk": "@@ -0,0 +1,4 @@\n+bdd.story-loader.batch-1.resource-location=story/system\n+bdd.story-loader.batch-1.resource-include-patterns=*.story\n+bdd.story-loader.batch-1.resource-exclude-patterns=", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5103a40cc1aa34293ed48ac56337ad4759fd5916"}, "originalPosition": 3}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM4NDQzMjk3OnYy", "diffSide": "RIGHT", "path": "vividus-tests/src/main/resources/properties/environment/system/environment.properties", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QwOTo1MjowOVrOFvLqEw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QxMDoxNTo1MlrOFvMeBQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTAxODM4Nw==", "bodyText": "also please add\nselenium.grid.capabilities.project=Vividus\nto group builds", "url": "https://github.com/vividus-framework/vividus/pull/346#discussion_r385018387", "createdAt": "2020-02-27T09:52:09Z", "author": {"login": "valfirst"}, "path": "vividus-tests/src/main/resources/properties/environment/system/environment.properties", "diffHunk": "@@ -0,0 +1,14 @@\n+selenium.grid.enabled=true\n+selenium.grid.url=https://${BROWSERSTACK_USER}:${BROWSERSTACK_KEY}@hub-cloud.browserstack.com/wd/hub\n+\n+selenium.grid.capabilities.browser=Chrome\n+selenium.grid.capabilities.os=Windows\n+selenium.grid.capabilities.os_version=10\n+selenium.grid.capabilities.resolution=1920x1080\n+selenium.grid.capabilities.build=Vividus System Tests", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f4f5e719516aedd476cc51d4d5dda194811eaba7"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTAzMTY4NQ==", "bodyText": "also what about W3C protocol: https://www.browserstack.com/automate/capabilities?tag=selenium-4 ?", "url": "https://github.com/vividus-framework/vividus/pull/346#discussion_r385031685", "createdAt": "2020-02-27T10:15:52Z", "author": {"login": "valfirst"}, "path": "vividus-tests/src/main/resources/properties/environment/system/environment.properties", "diffHunk": "@@ -0,0 +1,14 @@\n+selenium.grid.enabled=true\n+selenium.grid.url=https://${BROWSERSTACK_USER}:${BROWSERSTACK_KEY}@hub-cloud.browserstack.com/wd/hub\n+\n+selenium.grid.capabilities.browser=Chrome\n+selenium.grid.capabilities.os=Windows\n+selenium.grid.capabilities.os_version=10\n+selenium.grid.capabilities.resolution=1920x1080\n+selenium.grid.capabilities.build=Vividus System Tests", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTAxODM4Nw=="}, "originalCommit": {"oid": "f4f5e719516aedd476cc51d4d5dda194811eaba7"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM4NDQzNjg3OnYy", "diffSide": "RIGHT", "path": "vividus-plugin-web-app/build.gradle", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QwOTo1MzowOFrOFvLsgA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QwOTo1MzowOFrOFvLsgA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTAxOTAwOA==", "bodyText": "it seems it's not required anymore", "url": "https://github.com/vividus-framework/vividus/pull/346#discussion_r385019008", "createdAt": "2020-02-27T09:53:08Z", "author": {"login": "valfirst"}, "path": "vividus-plugin-web-app/build.gradle", "diffHunk": "@@ -43,6 +43,7 @@ dependencies {\n     testImplementation(group: 'org.junit.jupiter', name: 'junit-jupiter')\n     testRuntimeOnly(group: 'org.junit.vintage', name: 'junit-vintage-engine')\n     testCompileOnly(group: 'junit', name: 'junit', version: versions.junit4)\n+    testCompileOnly(group: 'com.github.spotbugs', name: 'spotbugs-annotations', version: spotbugs.toolVersion)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f4f5e719516aedd476cc51d4d5dda194811eaba7"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 438, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}