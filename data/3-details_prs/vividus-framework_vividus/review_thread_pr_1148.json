{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIxNzI2OTc2", "number": 1148, "reviewThreads": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQxNToxNDowN1rOE5iJDA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQxMjoyMTo0M1rOFFjzkw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI4NzYzNjYwOnYy", "diffSide": "RIGHT", "path": "vividus-plugin-browserstack/src/main/java/org/vividus/bdd/browserstack/steps/DebugSteps.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQxNToxNDowN1rOH0DRbw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQxNToxNDowN1rOH0DRbw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDM0MTYxNQ==", "bodyText": "add info how to use saved logs", "url": "https://github.com/vividus-framework/vividus/pull/1148#discussion_r524341615", "createdAt": "2020-11-16T15:14:07Z", "author": {"login": "valfirst"}, "path": "vividus-plugin-browserstack/src/main/java/org/vividus/bdd/browserstack/steps/DebugSteps.java", "diffHunk": "@@ -62,11 +70,30 @@ public DebugSteps(BrowserStackAutomateClient appAutomateClient, IBddVariableCont\n      */\n     @When(\"I save BrowserStack network logs to $scopes variable `$variableName`\")\n     public void saveNetworkLogs(Set<VariableScope> scopes, String variableName) throws BrowserStackException\n+    {\n+        getNetworkLogs(logs -> bddVariableContext.putVariable(scopes, variableName, logs));\n+    }\n+\n+    /**\n+     * Saves network logs from an application session into JSON context. The application session must be closed before", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "788f3ee29133704c4887d5c5f39f73814f35ecef"}, "originalPosition": 52}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI4NzYzNzU2OnYy", "diffSide": "RIGHT", "path": "vividus-plugin-browserstack/build.gradle", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQxNToxNDoyMFrOH0DSBg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQxNToxNDoyMFrOH0DSBg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDM0MTc2Ng==", "bodyText": "useless empty line", "url": "https://github.com/vividus-framework/vividus/pull/1148#discussion_r524341766", "createdAt": "2020-11-16T15:14:20Z", "author": {"login": "valfirst"}, "path": "vividus-plugin-browserstack/build.gradle", "diffHunk": "@@ -4,6 +4,9 @@ dependencies {\n     implementation project(':vividus-bdd-engine')\n     implementation project(':vividus-util')\n     implementation project(':vividus-extension-selenium')\n+    implementation project(':vividus-reporter')\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "788f3ee29133704c4887d5c5f39f73814f35ecef"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI4NzY0MTE5OnYy", "diffSide": "RIGHT", "path": "vividus-plugin-browserstack/src/main/java/org/vividus/bdd/browserstack/steps/DebugSteps.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQxNToxNTowMlrOH0DUIQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQxNToxNTowMlrOH0DUIQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDM0MjMwNQ==", "bodyText": "BrowserStack network logs.json ?", "url": "https://github.com/vividus-framework/vividus/pull/1148#discussion_r524342305", "createdAt": "2020-11-16T15:15:02Z", "author": {"login": "valfirst"}, "path": "vividus-plugin-browserstack/src/main/java/org/vividus/bdd/browserstack/steps/DebugSteps.java", "diffHunk": "@@ -62,11 +70,30 @@ public DebugSteps(BrowserStackAutomateClient appAutomateClient, IBddVariableCont\n      */\n     @When(\"I save BrowserStack network logs to $scopes variable `$variableName`\")\n     public void saveNetworkLogs(Set<VariableScope> scopes, String variableName) throws BrowserStackException\n+    {\n+        getNetworkLogs(logs -> bddVariableContext.putVariable(scopes, variableName, logs));\n+    }\n+\n+    /**\n+     * Saves network logs from an application session into JSON context. The application session must be closed before\n+     * network logs can be saved.\n+     * @throws BrowserStackException if error occurred while interacting with BrowserStack\n+     */\n+    @When(\"I save BrowserStack network logs to JSON context\")\n+    public void saveNetworkLogsToJsonContext() throws BrowserStackException\n+    {\n+        getNetworkLogs(logs ->\n+        {\n+            jsonContext.putJsonContext(logs);\n+            attachmentPublisher.publishAttachment(logs.getBytes(StandardCharsets.UTF_8), \"network-logs.json\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "788f3ee29133704c4887d5c5f39f73814f35ecef"}, "originalPosition": 62}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM5NzI2MjUxOnYy", "diffSide": "RIGHT", "path": "docs/modules/plugins/pages/plugin-browser-stack.adoc", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQxMzozNjoxM1rOID5B2w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQxMzozNjoxM1rOID5B2w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDk1MTAwMw==", "bodyText": "let's just put the link to JSON steps section, no one will update this section while adding new JSOn steps", "url": "https://github.com/vividus-framework/vividus/pull/1148#discussion_r540951003", "createdAt": "2020-12-11T13:36:13Z", "author": {"login": "valfirst"}, "path": "docs/modules/plugins/pages/plugin-browser-stack.adoc", "diffHunk": "@@ -78,6 +78,44 @@ When I save BrowserStack network logs to $scopes variable `$variableName`\n . `$scopes` - xref:parameters:variable-scope.adoc[variable scopes]\n . `$variableName` - name of variable to save network logs\n \n+See <<_enable_network_capturing>>\n+\n+.Save network logs into variable\n+[source,gherkin]\n+----\n+When I close mobile application\n+When I save BrowserStack network logs to SCENARIO variable `networkLogs`\n+Then number of JSON elements from `${networkLogs}` by JSON path `$..*[?(@.url == 'https://graph.example.com/v8.0')]` is equal to 1\n+----\n+\n+=== Save network logs into context\n+\n+Saves network traffic captured during application run into JSON context. The network traffic data is in JSON format. The application session must be closed before network logs can be saved.\n+\n+[source,gherkin]\n+----\n+When I save BrowserStack network logs to JSON context\n+----\n+\n+See <<_enable_network_capturing>>\n+\n+The followinig steps can be used to interact with the JSON context:\n+\n+* xref:plugins:plugin-rest-api.adoc#_verify_context_contains_data[Verify context contains data]\n+* xref:plugins:plugin-rest-api.adoc#_verify_number_of_elements_in_context[Verify number of elements in context]\n+* xref:plugins:plugin-rest-api.adoc#_save_element_from_context[Save element from context]\n+* xref:plugins:plugin-rest-api.adoc#_save_number_of_elements_in_context[Save number of elements in context]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "172ba8c9b91d3a77e9ee219351b1c391e28017f1"}, "originalPosition": 42}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM5NzI2NTg0OnYy", "diffSide": "RIGHT", "path": "docs/modules/plugins/pages/plugin-browser-stack.adoc", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQxMzozNjo1M1rOID5DxQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQxMzozNjo1M1rOID5DxQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDk1MTQ5Mw==", "bodyText": "this section should go before steps saving network logs", "url": "https://github.com/vividus-framework/vividus/pull/1148#discussion_r540951493", "createdAt": "2020-12-11T13:36:53Z", "author": {"login": "valfirst"}, "path": "docs/modules/plugins/pages/plugin-browser-stack.adoc", "diffHunk": "@@ -78,6 +78,44 @@ When I save BrowserStack network logs to $scopes variable `$variableName`\n . `$scopes` - xref:parameters:variable-scope.adoc[variable scopes]\n . `$variableName` - name of variable to save network logs\n \n+See <<_enable_network_capturing>>\n+\n+.Save network logs into variable\n+[source,gherkin]\n+----\n+When I close mobile application\n+When I save BrowserStack network logs to SCENARIO variable `networkLogs`\n+Then number of JSON elements from `${networkLogs}` by JSON path `$..*[?(@.url == 'https://graph.example.com/v8.0')]` is equal to 1\n+----\n+\n+=== Save network logs into context\n+\n+Saves network traffic captured during application run into JSON context. The network traffic data is in JSON format. The application session must be closed before network logs can be saved.\n+\n+[source,gherkin]\n+----\n+When I save BrowserStack network logs to JSON context\n+----\n+\n+See <<_enable_network_capturing>>\n+\n+The followinig steps can be used to interact with the JSON context:\n+\n+* xref:plugins:plugin-rest-api.adoc#_verify_context_contains_data[Verify context contains data]\n+* xref:plugins:plugin-rest-api.adoc#_verify_number_of_elements_in_context[Verify number of elements in context]\n+* xref:plugins:plugin-rest-api.adoc#_save_element_from_context[Save element from context]\n+* xref:plugins:plugin-rest-api.adoc#_save_number_of_elements_in_context[Save number of elements in context]\n+\n+.Save network logs into variable\n+[source,gherkin]\n+----\n+When I close mobile application\n+When I save BrowserStack network logs to JSON context\n+Then number of JSON elements from `${networkLogs}` by JSON path `$..*[?(@.url == 'https://graph.example.com/v8.0')]` is equal to 1\n+----\n+\n+== Enable network capturing", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "172ba8c9b91d3a77e9ee219351b1c391e28017f1"}, "originalPosition": 52}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM5NzI3MTQ3OnYy", "diffSide": "RIGHT", "path": "vividus-plugin-browserstack/src/main/java/org/vividus/bdd/browserstack/steps/DebugSteps.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQxMzozODoxN1rOID5G9Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQxNDozMTo1NlrOID7Vzg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDk1MjMwOQ==", "bodyText": "is it har?", "url": "https://github.com/vividus-framework/vividus/pull/1148#discussion_r540952309", "createdAt": "2020-12-11T13:38:17Z", "author": {"login": "valfirst"}, "path": "vividus-plugin-browserstack/src/main/java/org/vividus/bdd/browserstack/steps/DebugSteps.java", "diffHunk": "@@ -62,11 +70,39 @@ public DebugSteps(BrowserStackAutomateClient appAutomateClient, IBddVariableCont\n      */\n     @When(\"I save BrowserStack network logs to $scopes variable `$variableName`\")\n     public void saveNetworkLogs(Set<VariableScope> scopes, String variableName) throws BrowserStackException\n+    {\n+        getNetworkLogs(logs -> bddVariableContext.putVariable(scopes, variableName, logs));\n+    }\n+\n+    /**\n+     * Saves network logs from an application session into JSON context. The application session must be closed before\n+     * network logs can be saved.\n+     * <br/>\n+     * The following steps can be used to work with data in JSON context:\n+     * <ul>\n+     * <li>Then JSON element by JSON path `$jsonPath` is equal to `$expectedData`$options</li>\n+     * <li>Then number of JSON elements by JSON path `$jsonPath` is $comparisonRule $elementsNumber</li>\n+     * <li>When I save JSON element from context by JSON path `$jsonPath` to $scopes variable `$variableName`</li>\n+     * <li>When I set number of elements found by JSON path `$jsonPath` to $scopes variable `$variableName`</li>\n+     * </ul>\n+     * @throws BrowserStackException if error occurred while interacting with BrowserStack\n+     */\n+    @When(\"I save BrowserStack network logs to JSON context\")\n+    public void saveNetworkLogsToJsonContext() throws BrowserStackException\n+    {\n+        getNetworkLogs(logs ->\n+        {\n+            jsonContext.putJsonContext(logs);\n+            attachmentPublisher.publishAttachment(logs.getBytes(StandardCharsets.UTF_8),\n+                    \"BrowserStack network logs.json\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "172ba8c9b91d3a77e9ee219351b1c391e28017f1"}, "originalPosition": 71}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDk4ODg3OA==", "bodyText": "in browser stack it's just txt, by its structure it corresponds to HAR format, should I rename it to ....har?", "url": "https://github.com/vividus-framework/vividus/pull/1148#discussion_r540988878", "createdAt": "2020-12-11T14:31:56Z", "author": {"login": "uarlouski"}, "path": "vividus-plugin-browserstack/src/main/java/org/vividus/bdd/browserstack/steps/DebugSteps.java", "diffHunk": "@@ -62,11 +70,39 @@ public DebugSteps(BrowserStackAutomateClient appAutomateClient, IBddVariableCont\n      */\n     @When(\"I save BrowserStack network logs to $scopes variable `$variableName`\")\n     public void saveNetworkLogs(Set<VariableScope> scopes, String variableName) throws BrowserStackException\n+    {\n+        getNetworkLogs(logs -> bddVariableContext.putVariable(scopes, variableName, logs));\n+    }\n+\n+    /**\n+     * Saves network logs from an application session into JSON context. The application session must be closed before\n+     * network logs can be saved.\n+     * <br/>\n+     * The following steps can be used to work with data in JSON context:\n+     * <ul>\n+     * <li>Then JSON element by JSON path `$jsonPath` is equal to `$expectedData`$options</li>\n+     * <li>Then number of JSON elements by JSON path `$jsonPath` is $comparisonRule $elementsNumber</li>\n+     * <li>When I save JSON element from context by JSON path `$jsonPath` to $scopes variable `$variableName`</li>\n+     * <li>When I set number of elements found by JSON path `$jsonPath` to $scopes variable `$variableName`</li>\n+     * </ul>\n+     * @throws BrowserStackException if error occurred while interacting with BrowserStack\n+     */\n+    @When(\"I save BrowserStack network logs to JSON context\")\n+    public void saveNetworkLogsToJsonContext() throws BrowserStackException\n+    {\n+        getNetworkLogs(logs ->\n+        {\n+            jsonContext.putJsonContext(logs);\n+            attachmentPublisher.publishAttachment(logs.getBytes(StandardCharsets.UTF_8),\n+                    \"BrowserStack network logs.json\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDk1MjMwOQ=="}, "originalCommit": {"oid": "172ba8c9b91d3a77e9ee219351b1c391e28017f1"}, "originalPosition": 71}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM5NzI3Mzk3OnYy", "diffSide": "RIGHT", "path": "vividus-plugin-browserstack/src/main/java/org/vividus/bdd/browserstack/steps/DebugSteps.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQxMzozODo0OFrOID5IUQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQxNDo1MToxNVrOID8HZQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDk1MjY1Nw==", "bodyText": "just return the value instead of using consumer", "url": "https://github.com/vividus-framework/vividus/pull/1148#discussion_r540952657", "createdAt": "2020-12-11T13:38:48Z", "author": {"login": "valfirst"}, "path": "vividus-plugin-browserstack/src/main/java/org/vividus/bdd/browserstack/steps/DebugSteps.java", "diffHunk": "@@ -62,11 +70,39 @@ public DebugSteps(BrowserStackAutomateClient appAutomateClient, IBddVariableCont\n      */\n     @When(\"I save BrowserStack network logs to $scopes variable `$variableName`\")\n     public void saveNetworkLogs(Set<VariableScope> scopes, String variableName) throws BrowserStackException\n+    {\n+        getNetworkLogs(logs -> bddVariableContext.putVariable(scopes, variableName, logs));\n+    }\n+\n+    /**\n+     * Saves network logs from an application session into JSON context. The application session must be closed before\n+     * network logs can be saved.\n+     * <br/>\n+     * The following steps can be used to work with data in JSON context:\n+     * <ul>\n+     * <li>Then JSON element by JSON path `$jsonPath` is equal to `$expectedData`$options</li>\n+     * <li>Then number of JSON elements by JSON path `$jsonPath` is $comparisonRule $elementsNumber</li>\n+     * <li>When I save JSON element from context by JSON path `$jsonPath` to $scopes variable `$variableName`</li>\n+     * <li>When I set number of elements found by JSON path `$jsonPath` to $scopes variable `$variableName`</li>\n+     * </ul>\n+     * @throws BrowserStackException if error occurred while interacting with BrowserStack\n+     */\n+    @When(\"I save BrowserStack network logs to JSON context\")\n+    public void saveNetworkLogsToJsonContext() throws BrowserStackException\n+    {\n+        getNetworkLogs(logs ->\n+        {\n+            jsonContext.putJsonContext(logs);\n+            attachmentPublisher.publishAttachment(logs.getBytes(StandardCharsets.UTF_8),\n+                    \"BrowserStack network logs.json\");\n+        });\n+    }\n+\n+    private void getNetworkLogs(Consumer<String> networkLogsConsumer) throws BrowserStackException\n     {\n         String sessionId = testContext.get(PREVIOUS_SESSION_ID);\n         isTrue(sessionId != null, \"Unable to find a previous session\");\n-        String networkLogs = appAutomateClient.getNetworkLogs(sessionId);\n-        bddVariableContext.putVariable(scopes, variableName, networkLogs);\n+        networkLogsConsumer.accept(appAutomateClient.getNetworkLogs(sessionId));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "172ba8c9b91d3a77e9ee219351b1c391e28017f1"}, "originalPosition": 81}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTAwMTU3Mw==", "bodyText": "okay, but with the consumer code looks much bette, we do not need declare additional variable + benefits coming from usage of inokedynamic", "url": "https://github.com/vividus-framework/vividus/pull/1148#discussion_r541001573", "createdAt": "2020-12-11T14:51:15Z", "author": {"login": "uarlouski"}, "path": "vividus-plugin-browserstack/src/main/java/org/vividus/bdd/browserstack/steps/DebugSteps.java", "diffHunk": "@@ -62,11 +70,39 @@ public DebugSteps(BrowserStackAutomateClient appAutomateClient, IBddVariableCont\n      */\n     @When(\"I save BrowserStack network logs to $scopes variable `$variableName`\")\n     public void saveNetworkLogs(Set<VariableScope> scopes, String variableName) throws BrowserStackException\n+    {\n+        getNetworkLogs(logs -> bddVariableContext.putVariable(scopes, variableName, logs));\n+    }\n+\n+    /**\n+     * Saves network logs from an application session into JSON context. The application session must be closed before\n+     * network logs can be saved.\n+     * <br/>\n+     * The following steps can be used to work with data in JSON context:\n+     * <ul>\n+     * <li>Then JSON element by JSON path `$jsonPath` is equal to `$expectedData`$options</li>\n+     * <li>Then number of JSON elements by JSON path `$jsonPath` is $comparisonRule $elementsNumber</li>\n+     * <li>When I save JSON element from context by JSON path `$jsonPath` to $scopes variable `$variableName`</li>\n+     * <li>When I set number of elements found by JSON path `$jsonPath` to $scopes variable `$variableName`</li>\n+     * </ul>\n+     * @throws BrowserStackException if error occurred while interacting with BrowserStack\n+     */\n+    @When(\"I save BrowserStack network logs to JSON context\")\n+    public void saveNetworkLogsToJsonContext() throws BrowserStackException\n+    {\n+        getNetworkLogs(logs ->\n+        {\n+            jsonContext.putJsonContext(logs);\n+            attachmentPublisher.publishAttachment(logs.getBytes(StandardCharsets.UTF_8),\n+                    \"BrowserStack network logs.json\");\n+        });\n+    }\n+\n+    private void getNetworkLogs(Consumer<String> networkLogsConsumer) throws BrowserStackException\n     {\n         String sessionId = testContext.get(PREVIOUS_SESSION_ID);\n         isTrue(sessionId != null, \"Unable to find a previous session\");\n-        String networkLogs = appAutomateClient.getNetworkLogs(sessionId);\n-        bddVariableContext.putVariable(scopes, variableName, networkLogs);\n+        networkLogsConsumer.accept(appAutomateClient.getNetworkLogs(sessionId));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDk1MjY1Nw=="}, "originalCommit": {"oid": "172ba8c9b91d3a77e9ee219351b1c391e28017f1"}, "originalPosition": 81}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM5NzI3ODU0OnYy", "diffSide": "RIGHT", "path": "vividus-tests/src/main/resources/story/system/mobile_app/HealthCheckMobileAppSteps.story", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQxMzozOTo1NFrOID5K_w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQxMzozOTo1NFrOID5K_w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDk1MzM0Mw==", "bodyText": "story name should be updated to refer that this is BS-only", "url": "https://github.com/vividus-framework/vividus/pull/1148#discussion_r540953343", "createdAt": "2020-12-11T13:39:54Z", "author": {"login": "valfirst"}, "path": "vividus-tests/src/main/resources/story/system/mobile_app/HealthCheckMobileAppSteps.story", "diffHunk": "@@ -6,3 +6,10 @@ Given I start mobile application with capabilities:\n When I close mobile application\n When I save BrowserStack network logs to SCENARIO variable `networkLogs`\n Then number of JSON elements from `${networkLogs}` by JSON path `$.log` is equal to 1\n+\n+Given I start mobile application with capabilities:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "172ba8c9b91d3a77e9ee219351b1c391e28017f1"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQwNzI4NDE3OnYy", "diffSide": "RIGHT", "path": "docs/modules/plugins/pages/plugin-browser-stack.adoc", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxMTo0ODo0N1rOIFM2FA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxMTo0ODo0N1rOIFM2FA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjMyNDI0NA==", "bodyText": "are available", "url": "https://github.com/vividus-framework/vividus/pull/1148#discussion_r542324244", "createdAt": "2020-12-14T11:48:47Z", "author": {"login": "valfirst"}, "path": "docs/modules/plugins/pages/plugin-browser-stack.adoc", "diffHunk": "@@ -64,11 +64,26 @@ a|`true`\n \n |===\n \n+== Enable network capturing\n+\n+The following options available to enable network logs capturing on BrowserStack side:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4963256c5fdc2606f4955a7be3481d54d8c8a645"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQwNzI5MjYwOnYy", "diffSide": "RIGHT", "path": "docs/modules/plugins/pages/plugin-browser-stack.adoc", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxMTo1MDo0OVrOIFM6sA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxMTo1MDo0OVrOIFM6sA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjMyNTQyNA==", "bodyText": "JSON -> HAR ?", "url": "https://github.com/vividus-framework/vividus/pull/1148#discussion_r542325424", "createdAt": "2020-12-14T11:50:49Z", "author": {"login": "valfirst"}, "path": "docs/modules/plugins/pages/plugin-browser-stack.adoc", "diffHunk": "@@ -64,11 +64,26 @@ a|`true`\n \n |===\n \n+== Enable network capturing\n+\n+The following options available to enable network logs capturing on BrowserStack side:\n+\n+* Add `selenium.grid.capabilities.bstack:options.networkLogs=true` property into tests configuration, this will enable network logs capturing for all stories in suite.\n+* Add `@capability.bstack:options.networkLogs true` meta for a story being run\n+* Pass the capability with name `bstack:options.networkLogs` and value `true` as parameter to the step starting native mobile application.\n+.Enable network logs in the step starting application\n+[source,gherkin]\n+----\n+Given I start mobile application with capabilities:\n+|name                      |value|\n+|bstack:options.networkLogs|true |\n+----\n+\n == Steps\n \n-=== Save network logs\n+=== Save network logs into variable\n \n-Saves network traffic saved during application run in JSON format. The application session must be closed before network logs can be saved.\n+Saves network traffic captured during application run into variable. The network traffic data is in JSON format. The application session must be closed before network logs can be saved.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4963256c5fdc2606f4955a7be3481d54d8c8a645"}, "originalPosition": 25}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQwNzI5NDk0OnYy", "diffSide": "RIGHT", "path": "docs/modules/plugins/pages/plugin-browser-stack.adoc", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxMTo1MToyNFrOIFM78g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxMTo1MToyNFrOIFM78g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjMyNTc0Ng==", "bodyText": "JSON format -> HAR format", "url": "https://github.com/vividus-framework/vividus/pull/1148#discussion_r542325746", "createdAt": "2020-12-14T11:51:24Z", "author": {"login": "valfirst"}, "path": "docs/modules/plugins/pages/plugin-browser-stack.adoc", "diffHunk": "@@ -78,23 +93,33 @@ When I save BrowserStack network logs to $scopes variable `$variableName`\n . `$scopes` - xref:parameters:variable-scope.adoc[variable scopes]\n . `$variableName` - name of variable to save network logs\n \n-The following options available to enable network logs capturing on BrowserStack side:\n+See <<_enable_network_capturing>>\n \n-* Add `selenium.grid.capabilities.bstack:options.networkLogs=true` property into tests configuration, this will enable network logs capturing for all stories in suite.\n-* Add `@capability.bstack:options.networkLogs true` meta for a story being run\n-* Pass the capability with name `bstack:options.networkLogs` and value `true` as parameter to the step starting native mobile application.\n-.Enable network logs in the step starting application\n+.Save network logs into variable\n [source,gherkin]\n ----\n-Given I start mobile application with capabilities:\n-|name                      |value|\n-|bstack:options.networkLogs|true |\n+When I close mobile application\n+When I save BrowserStack network logs to SCENARIO variable `networkLogs`\n+Then number of JSON elements from `${networkLogs}` by JSON path `$..*[?(@.url == 'https://graph.example.com/v8.0')]` is equal to 1\n ----\n \n+=== Save network logs into context\n+\n+Saves network traffic captured during application run into JSON context. The network traffic data is in JSON format. The application session must be closed before network logs can be saved.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4963256c5fdc2606f4955a7be3481d54d8c8a645"}, "originalPosition": 53}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQwNzI5ODM5OnYy", "diffSide": "RIGHT", "path": "vividus-plugin-browserstack/src/main/java/org/vividus/bdd/browserstack/steps/DebugSteps.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxMTo1MjoxNVrOIFM93g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxMTo1MjoxNVrOIFM93g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjMyNjIzOA==", "bodyText": "I propose to remove this list of steps, just describe them in general words", "url": "https://github.com/vividus-framework/vividus/pull/1148#discussion_r542326238", "createdAt": "2020-12-14T11:52:15Z", "author": {"login": "valfirst"}, "path": "vividus-plugin-browserstack/src/main/java/org/vividus/bdd/browserstack/steps/DebugSteps.java", "diffHunk": "@@ -62,11 +69,36 @@ public DebugSteps(BrowserStackAutomateClient appAutomateClient, IBddVariableCont\n      */\n     @When(\"I save BrowserStack network logs to $scopes variable `$variableName`\")\n     public void saveNetworkLogs(Set<VariableScope> scopes, String variableName) throws BrowserStackException\n+    {\n+        bddVariableContext.putVariable(scopes, variableName, getNetworkLogs());\n+    }\n+\n+    /**\n+     * Saves network logs from an application session into JSON context. The application session must be closed before\n+     * network logs can be saved.\n+     * <br>\n+     * The following steps can be used to work with data in JSON context:\n+     * <ul>\n+     * <li>Then JSON element by JSON path `$jsonPath` is equal to `$expectedData`$options</li>\n+     * <li>Then number of JSON elements by JSON path `$jsonPath` is $comparisonRule $elementsNumber</li>\n+     * <li>When I save JSON element from context by JSON path `$jsonPath` to $scopes variable `$variableName`</li>\n+     * <li>When I set number of elements found by JSON path `$jsonPath` to $scopes variable `$variableName`</li>\n+     * </ul>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4963256c5fdc2606f4955a7be3481d54d8c8a645"}, "originalPosition": 59}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQxMzczODQzOnYy", "diffSide": "RIGHT", "path": "vividus-tests/src/main/resources/story/system/mobile_app/BrowserStackHealthCheckMobileAppSteps.story", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQxMjoyMTo0M1rOIGIMTg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQxMjozNTowN1rOIGIr6w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzI5NjU5MA==", "bodyText": "no requirement id?", "url": "https://github.com/vividus-framework/vividus/pull/1148#discussion_r543296590", "createdAt": "2020-12-15T12:21:43Z", "author": {"login": "ikalinin1"}, "path": "vividus-tests/src/main/resources/story/system/mobile_app/BrowserStackHealthCheckMobileAppSteps.story", "diffHunk": "@@ -6,3 +6,10 @@ Given I start mobile application with capabilities:\n When I close mobile application\n When I save BrowserStack network logs to SCENARIO variable `networkLogs`\n Then number of JSON elements from `${networkLogs}` by JSON path `$.log` is equal to 1\n+\n+Given I start mobile application with capabilities:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c3e4f1bd8b4bcf21d3a33443f94b8498af65e556"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzI5NzE2Mw==", "bodyText": "Why it's a single scenario named Verify BrowserStack integration?\nLooks too generic", "url": "https://github.com/vividus-framework/vividus/pull/1148#discussion_r543297163", "createdAt": "2020-12-15T12:22:30Z", "author": {"login": "ikalinin1"}, "path": "vividus-tests/src/main/resources/story/system/mobile_app/BrowserStackHealthCheckMobileAppSteps.story", "diffHunk": "@@ -6,3 +6,10 @@ Given I start mobile application with capabilities:\n When I close mobile application\n When I save BrowserStack network logs to SCENARIO variable `networkLogs`\n Then number of JSON elements from `${networkLogs}` by JSON path `$.log` is equal to 1\n+\n+Given I start mobile application with capabilities:", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzI5NjU5MA=="}, "originalCommit": {"oid": "c3e4f1bd8b4bcf21d3a33443f94b8498af65e556"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzMwNDY4Mw==", "bodyText": "correct, no requirement id\nrenamed", "url": "https://github.com/vividus-framework/vividus/pull/1148#discussion_r543304683", "createdAt": "2020-12-15T12:35:07Z", "author": {"login": "uarlouski"}, "path": "vividus-tests/src/main/resources/story/system/mobile_app/BrowserStackHealthCheckMobileAppSteps.story", "diffHunk": "@@ -6,3 +6,10 @@ Given I start mobile application with capabilities:\n When I close mobile application\n When I save BrowserStack network logs to SCENARIO variable `networkLogs`\n Then number of JSON elements from `${networkLogs}` by JSON path `$.log` is equal to 1\n+\n+Given I start mobile application with capabilities:", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzI5NjU5MA=="}, "originalCommit": {"oid": "c3e4f1bd8b4bcf21d3a33443f94b8498af65e556"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4942, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}