{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM1MDcyNjAw", "number": 677, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQwOTozNDoyM1rOEF3BYQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQwOTowNjo1NVrOEGqlrQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0NTc5ODA5OnYy", "diffSide": "RIGHT", "path": "vividus-plugin-rest-api/src/main/java/org/vividus/bdd/steps/api/HttpCookieSteps.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQwOTozNDoyNFrOGkTSUw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQwOTozNDoyNFrOGkTSUw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDcxNzkwNw==", "bodyText": "If several cookies with the same name exist in cookie store, the value will be changed for all of them", "url": "https://github.com/vividus-framework/vividus/pull/677#discussion_r440717907", "createdAt": "2020-06-16T09:34:24Z", "author": {"login": "valfirst"}, "path": "vividus-plugin-rest-api/src/main/java/org/vividus/bdd/steps/api/HttpCookieSteps.java", "diffHunk": "@@ -89,4 +92,40 @@ public void saveHttpCookieIntoVariable(String cookieName, Set<VariableScope> sco\n             }\n         }\n     }\n+\n+    /**\n+     * Change cookie value.\n+     * If present several cookies with the same name will be changed value for all of them,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2fd0f4116811850568b8562ac6545d968f3b932b"}, "originalPosition": 57}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0NTgyNjM3OnYy", "diffSide": "RIGHT", "path": "vividus-plugin-rest-api/src/main/java/org/vividus/bdd/steps/api/HttpCookieSteps.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQwOTo0MTozOVrOGkTjlA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQwOTo0MTozOVrOGkTjlA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDcyMjMyNA==", "bodyText": "move the assertion to a new method, that's going to be a method with single line of code, but it will improve overall code readability", "url": "https://github.com/vividus-framework/vividus/pull/677#discussion_r440722324", "createdAt": "2020-06-16T09:41:39Z", "author": {"login": "valfirst"}, "path": "vividus-plugin-rest-api/src/main/java/org/vividus/bdd/steps/api/HttpCookieSteps.java", "diffHunk": "@@ -89,4 +92,40 @@ public void saveHttpCookieIntoVariable(String cookieName, Set<VariableScope> sco\n             }\n         }\n     }\n+\n+    /**\n+     * Change cookie value.\n+     * If present several cookies with the same name will be changed value for all of them,\n+     *\n+     * @param cookieName     name of cookie\n+     * @param newCookieValue value to set\n+     */\n+    @When(\"I change value of all HTTP cookies with name `$cookieName` to `$newCookieValue`\")\n+    public void changeHttpCookieValue(String cookieName, String newCookieValue)\n+    {\n+        List<Cookie> cookies = findCookiesBy(FILTER_BY_NAME, cookieName);\n+        if (softAssert.assertThat(String.format(NUMBER_OF_COOKIES_WITH_NAME, cookieName), cookies.size(),\n+                greaterThan(0)))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2fd0f4116811850568b8562ac6545d968f3b932b"}, "originalPosition": 67}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0NTg0NTE5OnYy", "diffSide": "RIGHT", "path": "vividus-tests/src/main/resources/story/integration/HttpCookieSteps.story", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQwOTo0Njo0N1rOGkTvcg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQwOTo0Njo0N1rOGkTvcg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDcyNTM2Mg==", "bodyText": "use another cookieName to make sure the previous scenario doesn't affect this one", "url": "https://github.com/vividus-framework/vividus/pull/677#discussion_r440725362", "createdAt": "2020-06-16T09:46:47Z", "author": {"login": "valfirst"}, "path": "vividus-tests/src/main/resources/story/integration/HttpCookieSteps.story", "diffHunk": "@@ -7,3 +7,9 @@ Scenario: Verify step: \"When I save value of HTTP cookie with name $cookieName t\n When I send HTTP GET to the relative URL '/cookies/set?cookieName=cookieValue'\n When I save value of HTTP cookie with name `cookieName` to SCENARIO variable `value`\n Then `${value}` is equal to `cookieValue`\n+\n+Scenario: Verify step: \"I change value of all HTTP cookies with name `$cookieName` to `$newCookieValue`\"\n+When I send HTTP GET to the relative URL '/cookies/set?cookieName=cookieValue'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2fd0f4116811850568b8562ac6545d968f3b932b"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc1NDI0Njg1OnYy", "diffSide": "RIGHT", "path": "vividus-plugin-rest-api/src/main/java/org/vividus/bdd/steps/api/HttpCookieSteps.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQwOTowNjo1NVrOGlmfIw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQwOTowNjo1NVrOGlmfIw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjA4MTA1OQ==", "bodyText": "it can be inlined now", "url": "https://github.com/vividus-framework/vividus/pull/677#discussion_r442081059", "createdAt": "2020-06-18T09:06:55Z", "author": {"login": "valfirst"}, "path": "vividus-plugin-rest-api/src/main/java/org/vividus/bdd/steps/api/HttpCookieSteps.java", "diffHunk": "@@ -34,6 +36,10 @@\n public class HttpCookieSteps\n {\n     private static final Logger LOGGER = LoggerFactory.getLogger(HttpCookieSteps.class);\n+    private static final BiPredicate<Cookie, String> FILTER_BY_NAME = (cookie, cookieName) -> cookie.getName()\n+            .equals(cookieName);\n+    private static final String NUMBER_OF_COOKIES_WITH_NAME = \"Number of cookies with name '%s'\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6d1109dc24ca88549cae5c78c099cda4104aea99"}, "originalPosition": 18}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 364, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}