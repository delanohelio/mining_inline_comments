{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDYyMTI5Mjg2", "number": 796, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QxNToxMzoyNlrOEUpUeQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQwODozODo0M1rOEVUSPA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkwMDgzOTYxOnYy", "diffSide": "RIGHT", "path": "vividus-plugin-db/src/main/java/org/vividus/bdd/steps/db/DatabaseSteps.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QxNToxMzoyNlrOG69iFA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QxNToxMzoyNlrOG69iFA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDQ3ODc0MA==", "bodyText": "what is root cause of the issue?", "url": "https://github.com/vividus-framework/vividus/pull/796#discussion_r464478740", "createdAt": "2020-08-03T15:13:26Z", "author": {"login": "valfirst"}, "path": "vividus-plugin-db/src/main/java/org/vividus/bdd/steps/db/DatabaseSteps.java", "diffHunk": "@@ -418,6 +418,7 @@ private HashCode hash(Set<String> keys, Map<String, Object> map)\n                            .stream()\n                            .map(map::get)\n                            .filter(Objects::nonNull)\n+                           .sorted()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "78607ad93ed7a0af6a2f41093aa4f29596aa0047"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkwMDg0MDY3OnYy", "diffSide": "RIGHT", "path": "vividus-plugin-db/src/test/java/org/vividus/bdd/steps/db/DatabaseStepsTests.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QxNToxMzo0M1rOG69ivw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQwNzo1Mjo0NFrOG7VNHA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDQ3ODkxMQ==", "bodyText": "please fix checkstyle violations", "url": "https://github.com/vividus-framework/vividus/pull/796#discussion_r464478911", "createdAt": "2020-08-03T15:13:43Z", "author": {"login": "valfirst"}, "path": "vividus-plugin-db/src/test/java/org/vividus/bdd/steps/db/DatabaseStepsTests.java", "diffHunk": "@@ -373,13 +373,21 @@ void shouldThrowTimeoutExceptionIfQueryTakesTooMuchTime()\n         verifyNoInteractions(attachmentPublisher, softAssert);\n     }\n \n-    @Test\n-    void shouldCompareDataVsExamplesTableAndNotPostReportIfDataEqual()\n+    static Stream<Arguments> equalDataProvider() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "78607ad93ed7a0af6a2f41093aa4f29596aa0047"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDg2NjU4OA==", "bodyText": "fixed", "url": "https://github.com/vividus-framework/vividus/pull/796#discussion_r464866588", "createdAt": "2020-08-04T07:52:44Z", "author": {"login": "VitaliLebedzeu"}, "path": "vividus-plugin-db/src/test/java/org/vividus/bdd/steps/db/DatabaseStepsTests.java", "diffHunk": "@@ -373,13 +373,21 @@ void shouldThrowTimeoutExceptionIfQueryTakesTooMuchTime()\n         verifyNoInteractions(attachmentPublisher, softAssert);\n     }\n \n-    @Test\n-    void shouldCompareDataVsExamplesTableAndNotPostReportIfDataEqual()\n+    static Stream<Arguments> equalDataProvider() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDQ3ODkxMQ=="}, "originalCommit": {"oid": "78607ad93ed7a0af6a2f41093aa4f29596aa0047"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkwMzM4MTQ4OnYy", "diffSide": "RIGHT", "path": "vividus-plugin-db/src/main/java/org/vividus/bdd/steps/db/DatabaseSteps.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQwNzo1NDo1NVrOG7VSDQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQwOToxOToyM1rOG7YRRg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDg2Nzg1Mw==", "bodyText": "Could you please clarify what's unordered? Columns within a row and rows within a result set?", "url": "https://github.com/vividus-framework/vividus/pull/796#discussion_r464867853", "createdAt": "2020-08-04T07:54:55Z", "author": {"login": "ikalinin1"}, "path": "vividus-plugin-db/src/main/java/org/vividus/bdd/steps/db/DatabaseSteps.java", "diffHunk": "@@ -249,7 +249,8 @@ public void compareData(String sourceSqlQuery, String sourceDbKey, String target\n     }\n \n     /**\n-     * Step waits until data received from SQL request is equal to data from examples table for some duration.\n+     * Step waits until data received from SQL request is equal to data from examples table in any order", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c3c935f7d3db42fc99c772bf2ce48bcc0b97fee8"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDg2ODUwNw==", "bodyText": "and please add System test", "url": "https://github.com/vividus-framework/vividus/pull/796#discussion_r464868507", "createdAt": "2020-08-04T07:55:59Z", "author": {"login": "ikalinin1"}, "path": "vividus-plugin-db/src/main/java/org/vividus/bdd/steps/db/DatabaseSteps.java", "diffHunk": "@@ -249,7 +249,8 @@ public void compareData(String sourceSqlQuery, String sourceDbKey, String target\n     }\n \n     /**\n-     * Step waits until data received from SQL request is equal to data from examples table for some duration.\n+     * Step waits until data received from SQL request is equal to data from examples table in any order", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDg2Nzg1Mw=="}, "originalCommit": {"oid": "c3c935f7d3db42fc99c772bf2ce48bcc0b97fee8"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDkxNjgwNg==", "bodyText": "definition was changed\nsystem test was added", "url": "https://github.com/vividus-framework/vividus/pull/796#discussion_r464916806", "createdAt": "2020-08-04T09:19:23Z", "author": {"login": "VitaliLebedzeu"}, "path": "vividus-plugin-db/src/main/java/org/vividus/bdd/steps/db/DatabaseSteps.java", "diffHunk": "@@ -249,7 +249,8 @@ public void compareData(String sourceSqlQuery, String sourceDbKey, String target\n     }\n \n     /**\n-     * Step waits until data received from SQL request is equal to data from examples table for some duration.\n+     * Step waits until data received from SQL request is equal to data from examples table in any order", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDg2Nzg1Mw=="}, "originalCommit": {"oid": "c3c935f7d3db42fc99c772bf2ce48bcc0b97fee8"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkwNTg1NDc4OnYy", "diffSide": "RIGHT", "path": "vividus-plugin-db/src/main/java/org/vividus/bdd/steps/db/DatabaseSteps.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQxODo0NzoxM1rOG7tB0w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQwOTo0NDoyNFrOHCL14g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTI1NjkxNQ==", "bodyText": "I think it should be rephrased to make it clear", "url": "https://github.com/vividus-framework/vividus/pull/796#discussion_r465256915", "createdAt": "2020-08-04T18:47:13Z", "author": {"login": "valfirst"}, "path": "vividus-plugin-db/src/main/java/org/vividus/bdd/steps/db/DatabaseSteps.java", "diffHunk": "@@ -249,7 +249,8 @@ public void compareData(String sourceSqlQuery, String sourceDbKey, String target\n     }\n \n     /**\n-     * Step waits until data received from SQL request is equal to data from examples table for some duration.\n+     * Step waits until data received from SQL request is equal to data from examples table with any order columns\n+     * within a row for some duration (each received data element CONTAINS in examples table).", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c67025b2e957172a56668948a9a047e52cd26b1f"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjAxMjk5NQ==", "bodyText": "/**\n     * The step waits until the <code>sqlQuery</code> returns the data equal to the examples table row\n     * The order of columns is ignored\n     * Actions:\n     * <ul>\n     *     <li>run the <code>sqlQuery</code></li>\n     *     <li>compare the response with the examples table row</li>\n     *     <li>sleep for the <code>duration</code></li>\n     *     <li>repeat all of the above until there are no more retry attempts or the response is equal to the examples table row</li>\n     * </ul>\n     * @param duration The time gap between two queries\n     * @param retryTimes How many times request will be retried; duration/retryTimes=timeout between requests\n     * @param sqlQuery SQL query to execute\n     * @param dbKey Key identifying the database connection\n     * @param table Rows to compare the data against", "url": "https://github.com/vividus-framework/vividus/pull/796#discussion_r472012995", "createdAt": "2020-08-18T08:38:15Z", "author": {"login": "ivan-lednev"}, "path": "vividus-plugin-db/src/main/java/org/vividus/bdd/steps/db/DatabaseSteps.java", "diffHunk": "@@ -249,7 +249,8 @@ public void compareData(String sourceSqlQuery, String sourceDbKey, String target\n     }\n \n     /**\n-     * Step waits until data received from SQL request is equal to data from examples table for some duration.\n+     * Step waits until data received from SQL request is equal to data from examples table with any order columns\n+     * within a row for some duration (each received data element CONTAINS in examples table).", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTI1NjkxNQ=="}, "originalCommit": {"oid": "c67025b2e957172a56668948a9a047e52cd26b1f"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjA1MzIxOA==", "bodyText": "rewrite", "url": "https://github.com/vividus-framework/vividus/pull/796#discussion_r472053218", "createdAt": "2020-08-18T09:44:24Z", "author": {"login": "VitaliLebedzeu"}, "path": "vividus-plugin-db/src/main/java/org/vividus/bdd/steps/db/DatabaseSteps.java", "diffHunk": "@@ -249,7 +249,8 @@ public void compareData(String sourceSqlQuery, String sourceDbKey, String target\n     }\n \n     /**\n-     * Step waits until data received from SQL request is equal to data from examples table for some duration.\n+     * Step waits until data received from SQL request is equal to data from examples table with any order columns\n+     * within a row for some duration (each received data element CONTAINS in examples table).", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTI1NjkxNQ=="}, "originalCommit": {"oid": "c67025b2e957172a56668948a9a047e52cd26b1f"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkwNzg3OTAwOnYy", "diffSide": "RIGHT", "path": "vividus-tests/src/main/resources/story/system/DatabaseStepsTests.story", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQwODozODo0M1rOG7_9ng==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQwODo1NTowNVrOG8AiYg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTU2NzEzNA==", "bodyText": "When is missing?", "url": "https://github.com/vividus-framework/vividus/pull/796#discussion_r465567134", "createdAt": "2020-08-05T08:38:43Z", "author": {"login": "ikalinin1"}, "path": "vividus-tests/src/main/resources/story/system/DatabaseStepsTests.story", "diffHunk": "@@ -24,3 +24,13 @@ Then `${result}` matching rows using `id` from `vividus` is equal to data from:\n |1 |Valery                   |\n |2 |Vlad                     |\n |3 |Ivan                     |\n+\n+Scenario: Verify step: 'I wait for '$duration' duration retrying $retryTimes times while data from `$sqlQuery` executed against `$dbKey` is equal to data from:$table\"'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c67025b2e957172a56668948a9a047e52cd26b1f"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTU3NjU0Ng==", "bodyText": "oops... you are right thanks.\nfixed", "url": "https://github.com/vividus-framework/vividus/pull/796#discussion_r465576546", "createdAt": "2020-08-05T08:55:05Z", "author": {"login": "VitaliLebedzeu"}, "path": "vividus-tests/src/main/resources/story/system/DatabaseStepsTests.story", "diffHunk": "@@ -24,3 +24,13 @@ Then `${result}` matching rows using `id` from `vividus` is equal to data from:\n |1 |Valery                   |\n |2 |Vlad                     |\n |3 |Ivan                     |\n+\n+Scenario: Verify step: 'I wait for '$duration' duration retrying $retryTimes times while data from `$sqlQuery` executed against `$dbKey` is equal to data from:$table\"'", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTU2NzEzNA=="}, "originalCommit": {"oid": "c67025b2e957172a56668948a9a047e52cd26b1f"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 294, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}