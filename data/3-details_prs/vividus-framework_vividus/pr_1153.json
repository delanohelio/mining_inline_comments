{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIzOTAzMDg3", "number": 1153, "title": "[plugin-web-app] Add possibility to override browser's proxy host", "bodyText": "Closes #1149", "createdAt": "2020-11-19T12:09:13Z", "url": "https://github.com/vividus-framework/vividus/pull/1153", "merged": true, "mergeCommit": {"oid": "10e77137b7ea23505229d5f6af5642ca141540df"}, "closed": true, "closedAt": "2020-11-20T14:42:25Z", "author": {"login": "ikalinin1"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdeCSGygFqTUzNDQwOTA3Nw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdeX8oGAFqTUzNTQ1NzQzMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM0NDA5MDc3", "url": "https://github.com/vividus-framework/vividus/pull/1153#pullrequestreview-534409077", "createdAt": "2020-11-19T12:54:33Z", "commit": {"oid": "9df98576c6383a09fbfbac0e7d3c6f9570e495f8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQxMjo1NDozM1rOH2c3Cw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQxMjo1NDozM1rOH2c3Cw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjg1Nzk5NQ==", "bodyText": "String proxyAddress = hostName + ':' + proxyServer.getPort();\nreturn new org.openqa.selenium.Proxy().setHttpProxy(proxyAddress)\n                                      .setSslProxy(proxyAddress);\n\nmaybe", "url": "https://github.com/vividus-framework/vividus/pull/1153#discussion_r526857995", "createdAt": "2020-11-19T12:54:33Z", "author": {"login": "uarlouski"}, "path": "vividus-extension-selenium/src/main/java/org/vividus/proxy/Proxy.java", "diffHunk": "@@ -112,7 +115,19 @@ public void clearRequestFilters()\n     @Override\n     public org.openqa.selenium.Proxy createSeleniumProxy()\n     {\n-        return ClientUtil.createSeleniumProxy(proxyServer, InetAddress.getLoopbackAddress());\n+        return Optional.ofNullable(proxyHost)\n+                       .map(this::createSeleniumProxy)\n+                       .orElseGet(() -> ClientUtil.createSeleniumProxy(proxyServer, InetAddress.getLoopbackAddress()));\n+    }\n+\n+    private org.openqa.selenium.Proxy createSeleniumProxy(String hostName)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9df98576c6383a09fbfbac0e7d3c6f9570e495f8"}, "originalPosition": 33}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM0NzMyMzI4", "url": "https://github.com/vividus-framework/vividus/pull/1153#pullrequestreview-534732328", "createdAt": "2020-11-19T18:27:17Z", "commit": {"oid": "9df98576c6383a09fbfbac0e7d3c6f9570e495f8"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQxODoyNzoxN1rOH2sAvA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQxODoyOTowNFrOH2sE6g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzEwNjIzNg==", "bodyText": "com.browserup.bup.client.ClientUtil#createSeleniumProxy(com.browserup.bup.BrowserUpProxy, java.net.InetAddress) ?", "url": "https://github.com/vividus-framework/vividus/pull/1153#discussion_r527106236", "createdAt": "2020-11-19T18:27:17Z", "author": {"login": "valfirst"}, "path": "vividus-extension-selenium/src/main/java/org/vividus/proxy/Proxy.java", "diffHunk": "@@ -112,7 +115,19 @@ public void clearRequestFilters()\n     @Override\n     public org.openqa.selenium.Proxy createSeleniumProxy()\n     {\n-        return ClientUtil.createSeleniumProxy(proxyServer, InetAddress.getLoopbackAddress());\n+        return Optional.ofNullable(proxyHost)\n+                       .map(this::createSeleniumProxy)\n+                       .orElseGet(() -> ClientUtil.createSeleniumProxy(proxyServer, InetAddress.getLoopbackAddress()));\n+    }\n+\n+    private org.openqa.selenium.Proxy createSeleniumProxy(String hostName)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9df98576c6383a09fbfbac0e7d3c6f9570e495f8"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzEwNzMwNg==", "bodyText": "selenium.proxy.host -> proxy.connectable-host ? that's a naming from BrowserUp proxy\n\nconnectableAddress the network address the Selenium Proxy will use to reach this BrowserUpProxy instance", "url": "https://github.com/vividus-framework/vividus/pull/1153#discussion_r527107306", "createdAt": "2020-11-19T18:29:04Z", "author": {"login": "valfirst"}, "path": "docs/modules/plugins/pages/plugin-web-app.adoc", "diffHunk": "@@ -190,6 +190,26 @@ include::partial$selenium-properties.adoc[]\n |proxy\n |empty\n |Provides possibility to attach screenshot for failed proxy steps\n+\n+|proxy.enabled\n+|true/false\n+|false\n+|Enabled proxy for the run\n+\n+|proxy.host\n+|any host name resolving on the machine\n+|empty\n+|Overrides the host which will be used by proxy\n+\n+|proxy.ports\n+|10000-10005\n+|empty\n+|Defines ports range which could be used for proxy\n+\n+|selenium.proxy.host", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9df98576c6383a09fbfbac0e7d3c6f9570e495f8"}, "originalPosition": 20}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3a1bbbc6b397f50b90971c12f64d2930a038d2db", "author": {"user": {"login": "ikalinin1", "name": "Ivan Kalinin"}}, "url": "https://github.com/vividus-framework/vividus/commit/3a1bbbc6b397f50b90971c12f64d2930a038d2db", "committedDate": "2020-11-20T11:01:15Z", "message": "[plugin-web-app] Add possibility to override browser's proxy host"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9df98576c6383a09fbfbac0e7d3c6f9570e495f8", "author": {"user": {"login": "ikalinin1", "name": "Ivan Kalinin"}}, "url": "https://github.com/vividus-framework/vividus/commit/9df98576c6383a09fbfbac0e7d3c6f9570e495f8", "committedDate": "2020-11-19T12:05:27Z", "message": "[plugin-web-app] Add possibility to override browser's proxy host"}, "afterCommit": {"oid": "3a1bbbc6b397f50b90971c12f64d2930a038d2db", "author": {"user": {"login": "ikalinin1", "name": "Ivan Kalinin"}}, "url": "https://github.com/vividus-framework/vividus/commit/3a1bbbc6b397f50b90971c12f64d2930a038d2db", "committedDate": "2020-11-20T11:01:15Z", "message": "[plugin-web-app] Add possibility to override browser's proxy host"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM1MzYyNzA1", "url": "https://github.com/vividus-framework/vividus/pull/1153#pullrequestreview-535362705", "createdAt": "2020-11-20T11:52:59Z", "commit": {"oid": "3a1bbbc6b397f50b90971c12f64d2930a038d2db"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM1NDU3NDMx", "url": "https://github.com/vividus-framework/vividus/pull/1153#pullrequestreview-535457431", "createdAt": "2020-11-20T14:09:00Z", "commit": {"oid": "3a1bbbc6b397f50b90971c12f64d2930a038d2db"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4733, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}