{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE2MDUyOTUx", "number": 561, "title": "[plugin-web-app] Use instant scroll behavior for screenshots taking", "bodyText": "", "createdAt": "2020-05-11T11:45:35Z", "url": "https://github.com/vividus-framework/vividus/pull/561", "merged": true, "mergeCommit": {"oid": "d7e566856e56386b3f50ad96f3dee620c180bec7"}, "closed": true, "closedAt": "2020-05-12T11:21:59Z", "author": {"login": "ikalinin1"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcgOp9xAFqTQwOTExNjIyMA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcghpcyAFqTQwOTkwNDI3Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA5MTE2MjIw", "url": "https://github.com/vividus-framework/vividus/pull/561#pullrequestreview-409116220", "createdAt": "2020-05-11T12:16:10Z", "commit": {"oid": "906850c2ed4eae95736e650ab3f2f99b07821705"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxMjoxNjoxMFrOGTZrEQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxMjoxNjoxMFrOGTZrEQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjk5Njc1Mw==", "bodyText": "IE doesn't support this API and only the latest version (24.03.2020) of Safari supports it: https://caniuse.com/#search=scrollTo", "url": "https://github.com/vividus-framework/vividus/pull/561#discussion_r422996753", "createdAt": "2020-05-11T12:16:10Z", "author": {"login": "valfirst"}, "path": "vividus-plugin-web-app/src/main/java/ru/yandex/qatools/ashot/shooting/DebuggingViewportPastingDecorator.java", "diffHunk": "@@ -39,6 +39,8 @@\n  */\n // CHECKSTYLE:OFF\n public class DebuggingViewportPastingDecorator extends ShootingDecorator {\n+    private static final String SCROLL_Y = \n+            \".scrollTo({\\\"top\\\":arguments[0], \\\"left\\\": 0, \\\"behavior\\\":\\\"instant\\\"}); return [];\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "906850c2ed4eae95736e650ab3f2f99b07821705"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "906850c2ed4eae95736e650ab3f2f99b07821705", "author": {"user": {"login": "ikalinin1", "name": "Ivan Kalinin"}}, "url": "https://github.com/vividus-framework/vividus/commit/906850c2ed4eae95736e650ab3f2f99b07821705", "committedDate": "2020-05-11T11:44:28Z", "message": "[plugin-web-app] Use instant scroll behavior for screenshots taking"}, "afterCommit": {"oid": "9d2f57f16bb3ea667a4ff742fc64550337d2efd6", "author": {"user": {"login": "ikalinin1", "name": "Ivan Kalinin"}}, "url": "https://github.com/vividus-framework/vividus/commit/9d2f57f16bb3ea667a4ff742fc64550337d2efd6", "committedDate": "2020-05-12T06:49:41Z", "message": "[plugin-web-app] Use instant scroll behavior for screenshots taking"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9d2f57f16bb3ea667a4ff742fc64550337d2efd6", "author": {"user": {"login": "ikalinin1", "name": "Ivan Kalinin"}}, "url": "https://github.com/vividus-framework/vividus/commit/9d2f57f16bb3ea667a4ff742fc64550337d2efd6", "committedDate": "2020-05-12T06:49:41Z", "message": "[plugin-web-app] Use instant scroll behavior for screenshots taking"}, "afterCommit": {"oid": "5427ef34c55693c41fcb2b3e64aced7fd053d01b", "author": {"user": {"login": "ikalinin1", "name": "Ivan Kalinin"}}, "url": "https://github.com/vividus-framework/vividus/commit/5427ef34c55693c41fcb2b3e64aced7fd053d01b", "committedDate": "2020-05-12T06:56:25Z", "message": "[plugin-web-app] Use instant scroll behavior for screenshots taking"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA5NzY2ODQx", "url": "https://github.com/vividus-framework/vividus/pull/561#pullrequestreview-409766841", "createdAt": "2020-05-12T07:25:48Z", "commit": {"oid": "5427ef34c55693c41fcb2b3e64aced7fd053d01b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQwNzoyNTo0OFrOGT5d7Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQwNzoyNTo0OFrOGT5d7Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzUxNzY3Nw==", "bodyText": "what about moving this part to constructor and converting getTarget() to a constructor parameter?", "url": "https://github.com/vividus-framework/vividus/pull/561#discussion_r423517677", "createdAt": "2020-05-12T07:25:48Z", "author": {"login": "valfirst"}, "path": "vividus-plugin-web-app/src/main/java/ru/yandex/qatools/ashot/shooting/DebuggingViewportPastingDecorator.java", "diffHunk": "@@ -39,11 +39,27 @@\n  */\n // CHECKSTYLE:OFF\n public class DebuggingViewportPastingDecorator extends ShootingDecorator {\n+    private static final String SCROLL_Y_TEMPLATE =\n+              \"if ('scrollBehavior' in document.documentElement.style) {\"\n+            + \"    %1$s.scrollTo({\"\n+            + \"        \\\"top\\\": arguments[0],\"\n+            + \"        \\\"left\\\": 0,\"\n+            + \"        \\\"behavior\\\": \\\"instant\\\"\"\n+            + \"    });\"\n+            + \"} else {\"\n+            + \"    %1$s.scrollTo(0, arguments[0]);\"\n+            + \"}\"\n+            + \"return [];\";\n     private static final long serialVersionUID = 4173686031614281540L;\n     private static final String CURRENT_SCROLL = \"current_scroll_\";\n     protected int scrollTimeout = 0;\n     private Coords shootingArea;\n     private transient ScreenshotDebugger screenshotDebugger;\n+    protected final String scrollYScript;\n+\n+    {\n+        scrollYScript = String.format(SCROLL_Y_TEMPLATE, getTarget());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5427ef34c55693c41fcb2b3e64aced7fd053d01b"}, "originalPosition": 23}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5427ef34c55693c41fcb2b3e64aced7fd053d01b", "author": {"user": {"login": "ikalinin1", "name": "Ivan Kalinin"}}, "url": "https://github.com/vividus-framework/vividus/commit/5427ef34c55693c41fcb2b3e64aced7fd053d01b", "committedDate": "2020-05-12T06:56:25Z", "message": "[plugin-web-app] Use instant scroll behavior for screenshots taking"}, "afterCommit": {"oid": "ba3346c6d4a23b70d898e9f3877a92bf73992a3c", "author": {"user": {"login": "ikalinin1", "name": "Ivan Kalinin"}}, "url": "https://github.com/vividus-framework/vividus/commit/ba3346c6d4a23b70d898e9f3877a92bf73992a3c", "committedDate": "2020-05-12T09:46:38Z", "message": "[plugin-web-app] Use instant scroll behavior for screenshots taking"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dda0d2a1b7ca9a39ae81f6ef3d5ae624405b5cd6", "author": {"user": {"login": "ikalinin1", "name": "Ivan Kalinin"}}, "url": "https://github.com/vividus-framework/vividus/commit/dda0d2a1b7ca9a39ae81f6ef3d5ae624405b5cd6", "committedDate": "2020-05-12T09:57:45Z", "message": "[plugin-web-app] Use instant scroll behavior for screenshots taking"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ba3346c6d4a23b70d898e9f3877a92bf73992a3c", "author": {"user": {"login": "ikalinin1", "name": "Ivan Kalinin"}}, "url": "https://github.com/vividus-framework/vividus/commit/ba3346c6d4a23b70d898e9f3877a92bf73992a3c", "committedDate": "2020-05-12T09:46:38Z", "message": "[plugin-web-app] Use instant scroll behavior for screenshots taking"}, "afterCommit": {"oid": "dda0d2a1b7ca9a39ae81f6ef3d5ae624405b5cd6", "author": {"user": {"login": "ikalinin1", "name": "Ivan Kalinin"}}, "url": "https://github.com/vividus-framework/vividus/commit/dda0d2a1b7ca9a39ae81f6ef3d5ae624405b5cd6", "committedDate": "2020-05-12T09:57:45Z", "message": "[plugin-web-app] Use instant scroll behavior for screenshots taking"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA5ODg3ODM4", "url": "https://github.com/vividus-framework/vividus/pull/561#pullrequestreview-409887838", "createdAt": "2020-05-12T10:00:28Z", "commit": {"oid": "dda0d2a1b7ca9a39ae81f6ef3d5ae624405b5cd6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA5OTA0Mjcz", "url": "https://github.com/vividus-framework/vividus/pull/561#pullrequestreview-409904273", "createdAt": "2020-05-12T10:23:48Z", "commit": {"oid": "dda0d2a1b7ca9a39ae81f6ef3d5ae624405b5cd6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 182, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}