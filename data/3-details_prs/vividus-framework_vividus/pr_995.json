{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk4NjA3NDQ2", "number": 995, "title": "[plugin-mobile-app] Add property to specify test execution on real device", "bodyText": "", "createdAt": "2020-10-06T14:52:00Z", "url": "https://github.com/vividus-framework/vividus/pull/995", "merged": true, "mergeCommit": {"oid": "4d7888270d40e6e52b5d4adb9488651f31418ee3"}, "closed": true, "closedAt": "2020-10-06T21:25:15Z", "author": {"login": "uarlouski"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdP5r2XgFqTUwMzA1NjAzNA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdP_NOlAFqTUwMzM3MDAzNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAzMDU2MDM0", "url": "https://github.com/vividus-framework/vividus/pull/995#pullrequestreview-503056034", "createdAt": "2020-10-06T14:54:58Z", "commit": {"oid": "d21b87a8f0318ce03e48f240f6c7cdad6451d39d"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQxNDo1NDo1OFrOHdLeHw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQxNDo1Nzo1MFrOHdLpcw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDM1ODY4Nw==", "bodyText": "what about merging 2 [WARNING] and moving items to list?\nalso please describe the reason, why it should be so", "url": "https://github.com/vividus-framework/vividus/pull/995#discussion_r500358687", "createdAt": "2020-10-06T14:54:58Z", "author": {"login": "valfirst"}, "path": "docs/modules/plugins/pages/plugin-mobile-app.adoc", "diffHunk": "@@ -243,6 +243,9 @@ Types the text into the element located by the locator.\n [WARNING]\n Existing text is re-written by the text passed into the step\n \n+[WARNING]\n+The `mobile-application.hide-keyboard-using-native-call` property must be set to `false` for iOS Real Devices", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d21b87a8f0318ce03e48f240f6c7cdad6451d39d"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDM1OTAyMA==", "bodyText": "move to the end of fields list", "url": "https://github.com/vividus-framework/vividus/pull/995#discussion_r500359020", "createdAt": "2020-10-06T14:55:19Z", "author": {"login": "valfirst"}, "path": "vividus-plugin-mobile-app/src/main/java/org/vividus/mobileapp/action/KeyboardActions.java", "diffHunk": "@@ -18,16 +18,32 @@\n \n import org.openqa.selenium.WebElement;\n import org.vividus.selenium.IWebDriverProvider;\n+import org.vividus.selenium.manager.GenericWebDriverManager;\n+import org.vividus.ui.action.ISearchActions;\n+import org.vividus.ui.action.search.Locator;\n+import org.vividus.ui.action.search.SearchParameters;\n+import org.vividus.ui.action.search.Visibility;\n+import org.vividus.ui.mobile.action.search.AppiumLocatorType;\n \n import io.appium.java_client.HidesKeyboard;\n \n public class KeyboardActions\n {\n+    private boolean hideKeyboardUsingNativeCall;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d21b87a8f0318ce03e48f240f6c7cdad6451d39d"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDM2MDc0Nw==", "bodyText": "java.util.Optional#ifPresentOrElse ?", "url": "https://github.com/vividus-framework/vividus/pull/995#discussion_r500360747", "createdAt": "2020-10-06T14:57:03Z", "author": {"login": "valfirst"}, "path": "vividus-plugin-mobile-app/src/main/java/org/vividus/mobileapp/action/KeyboardActions.java", "diffHunk": "@@ -44,6 +60,16 @@ public KeyboardActions(IWebDriverProvider webDriverProvider)\n     public void typeText(WebElement element, String text)\n     {\n         element.sendKeys(text);\n+        // https://github.com/appium/WebDriverAgent/blob/master/WebDriverAgentLib/Commands/FBCustomCommands.m#L107\n+        if (genericWebDriverManager.isIOSNativeApp() && !hideKeyboardUsingNativeCall)\n+        {\n+            Locator keyboardReturnLocator = new Locator(AppiumLocatorType.XPATH, new SearchParameters(\n+                    \"//XCUIElementTypeKeyboard//XCUIElementTypeButton[@name='Return']\", Visibility.VISIBLE, false));\n+            WebElement returnButton = searchActions.findElement(keyboardReturnLocator).orElseThrow(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d21b87a8f0318ce03e48f240f6c7cdad6451d39d"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDM2MTU4Nw==", "bodyText": "it is not an attribute of mobile application", "url": "https://github.com/vividus-framework/vividus/pull/995#discussion_r500361587", "createdAt": "2020-10-06T14:57:50Z", "author": {"login": "valfirst"}, "path": "vividus-plugin-mobile-app/src/main/resources/properties/profile/mobile_app/profile.properties", "diffHunk": "@@ -4,3 +4,4 @@ mobile-app=true\n mobile-application.session-scope=story\n mobile-application.swipe.stabilization-duration=PT1S\n mobile-application.swipe.limit=10\n+mobile-application.hide-keyboard-using-native-call=true", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d21b87a8f0318ce03e48f240f6c7cdad6451d39d"}, "originalPosition": 4}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d21b87a8f0318ce03e48f240f6c7cdad6451d39d", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/d21b87a8f0318ce03e48f240f6c7cdad6451d39d", "committedDate": "2020-10-06T14:50:17Z", "message": "[plugin-mobile-app] Add property to aviod keyboard dismiss native call on iOS RD"}, "afterCommit": {"oid": "96d59a96b574656438e0291b8276d8cb1d789942", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/96d59a96b574656438e0291b8276d8cb1d789942", "committedDate": "2020-10-06T15:34:06Z", "message": "[plugin-mobile-app] Add property to aviod keyboard dismiss native call on iOS RD"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAzMTMxMDQ5", "url": "https://github.com/vividus-framework/vividus/pull/995#pullrequestreview-503131049", "createdAt": "2020-10-06T16:07:17Z", "commit": {"oid": "96d59a96b574656438e0291b8276d8cb1d789942"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQxNjowNzoxOFrOHdPStw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQxNjowNzoxOFrOHdPStw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDQyMTMwMw==", "bodyText": "if (genericWebDriverManager.isIOSNativeApp() && realDevice)\n{\n...\nreturn;\n}\nelse\n{\nwebDriverProvider.getUnwrapped(HidesKeyboard.class).hideKeyboard();\n}", "url": "https://github.com/vividus-framework/vividus/pull/995#discussion_r500421303", "createdAt": "2020-10-06T16:07:18Z", "author": {"login": "valfirst"}, "path": "vividus-plugin-mobile-app/src/main/java/org/vividus/mobileapp/action/KeyboardActions.java", "diffHunk": "@@ -44,6 +60,17 @@ public KeyboardActions(IWebDriverProvider webDriverProvider)\n     public void typeText(WebElement element, String text)\n     {\n         element.sendKeys(text);\n+        // https://github.com/appium/WebDriverAgent/blob/master/WebDriverAgentLib/Commands/FBCustomCommands.m#L107\n+        if (genericWebDriverManager.isIOSNativeApp() && realDevice)\n+        {\n+            Locator keyboardReturnLocator = new Locator(AppiumLocatorType.XPATH, new SearchParameters(\n+                    \"//XCUIElementTypeKeyboard//XCUIElementTypeButton[@name='Return']\", Visibility.VISIBLE, false));\n+            searchActions.findElement(keyboardReturnLocator).ifPresentOrElse(touchActions::tap, () ->\n+            {\n+                throw new IllegalStateException(\"Unable to find 'Return' button to close the keyboard\");\n+            });\n+            return;\n+        }\n         webDriverProvider.getUnwrapped(HidesKeyboard.class).hideKeyboard();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "96d59a96b574656438e0291b8276d8cb1d789942"}, "originalPosition": 49}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6ba29147b5f5e145f39824254512bf70ebbff8c7", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/6ba29147b5f5e145f39824254512bf70ebbff8c7", "committedDate": "2020-10-06T16:13:08Z", "message": "[plugin-mobile-app] Add property to specify test execution on real device"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "96d59a96b574656438e0291b8276d8cb1d789942", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/96d59a96b574656438e0291b8276d8cb1d789942", "committedDate": "2020-10-06T15:34:06Z", "message": "[plugin-mobile-app] Add property to aviod keyboard dismiss native call on iOS RD"}, "afterCommit": {"oid": "6ba29147b5f5e145f39824254512bf70ebbff8c7", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/6ba29147b5f5e145f39824254512bf70ebbff8c7", "committedDate": "2020-10-06T16:13:08Z", "message": "[plugin-mobile-app] Add property to specify test execution on real device"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAzMTM4MTI1", "url": "https://github.com/vividus-framework/vividus/pull/995#pullrequestreview-503138125", "createdAt": "2020-10-06T16:15:18Z", "commit": {"oid": "6ba29147b5f5e145f39824254512bf70ebbff8c7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAzMjc0Mjky", "url": "https://github.com/vividus-framework/vividus/pull/995#pullrequestreview-503274292", "createdAt": "2020-10-06T19:05:04Z", "commit": {"oid": "6ba29147b5f5e145f39824254512bf70ebbff8c7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAzMzcwMDM2", "url": "https://github.com/vividus-framework/vividus/pull/995#pullrequestreview-503370036", "createdAt": "2020-10-06T21:24:34Z", "commit": {"oid": "6ba29147b5f5e145f39824254512bf70ebbff8c7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}