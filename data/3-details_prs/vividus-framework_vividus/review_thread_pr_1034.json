{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA0OTE4MDkz", "number": 1034, "reviewThreads": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xN1QyMDowNzoyN1rOEu2QWw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxMzoxMzo0NFrOEvTpRw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE3NTU4ODc1OnYy", "diffSide": "RIGHT", "path": "vividus-extension-selenium/src/main/java/org/vividus/bdd/steps/ui/GenericWaitSteps.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xN1QyMDowNzoyN1rOHjfjfQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xN1QyMDowNzoyN1rOHjfjfQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjk3OTE5Nw==", "bodyText": "Then element located `$locator` exists for `$duration` duration", "url": "https://github.com/vividus-framework/vividus/pull/1034#discussion_r506979197", "createdAt": "2020-10-17T20:07:27Z", "author": {"login": "valfirst"}, "path": "vividus-extension-selenium/src/main/java/org/vividus/bdd/steps/ui/GenericWaitSteps.java", "diffHunk": "@@ -59,6 +66,22 @@ public void waitForElementDisappearance(Locator locator)\n         waitForCondition(expectedSearchActionsConditions.invisibilityOfElement(locator));\n     }\n \n+    /**\n+     * Checks that element located by <b>locator</b> exists during the <b>duration</b>\n+     * @param locator locator to find an element\n+     * @param duration total waiting time according to <a href=\"https://en.wikipedia.org/wiki/ISO_8601\">ISO 8601</a>\n+     * standard\n+     */\n+    @Then(\"element located '$locator' exists for '$duration' duration\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5d86affdae1aaa01823bf6af56aa80e14b7ec76b"}, "originalPosition": 44}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE3NTU5MDExOnYy", "diffSide": "RIGHT", "path": "vividus-extension-selenium/src/main/java/org/vividus/bdd/steps/ui/GenericWaitSteps.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xN1QyMDowOTozN1rOHjfkGg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xN1QyMDowOTozN1rOHjfkGg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjk3OTM1NA==", "bodyText": "is there any way to pretty-print duration?", "url": "https://github.com/vividus-framework/vividus/pull/1034#discussion_r506979354", "createdAt": "2020-10-17T20:09:37Z", "author": {"login": "valfirst"}, "path": "vividus-extension-selenium/src/main/java/org/vividus/bdd/steps/ui/GenericWaitSteps.java", "diffHunk": "@@ -59,6 +66,22 @@ public void waitForElementDisappearance(Locator locator)\n         waitForCondition(expectedSearchActionsConditions.invisibilityOfElement(locator));\n     }\n \n+    /**\n+     * Checks that element located by <b>locator</b> exists during the <b>duration</b>\n+     * @param locator locator to find an element\n+     * @param duration total waiting time according to <a href=\"https://en.wikipedia.org/wiki/ISO_8601\">ISO 8601</a>\n+     * standard\n+     */\n+    @Then(\"element located '$locator' exists for '$duration' duration\")\n+    public void doesElementByLocatorExistsForDuration(Locator locator, Duration duration)\n+    {\n+        WaitResult<Boolean> result = waitActions.wait(uiContext.getSearchContext(), duration,\n+                expectedSearchActionsConditions\n+                        .not(expectedSearchActionsConditions.presenceOfAllElementsLocatedBy(locator)), false);\n+        softAssert.assertFalse(String.format(\"Element located by locator '%s' has existed during '%s' duration\",\n+                locator, duration.toSeconds()), result.isWaitPassed());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5d86affdae1aaa01823bf6af56aa80e14b7ec76b"}, "originalPosition": 51}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE3NTU5MjQyOnYy", "diffSide": "RIGHT", "path": "vividus-extension-selenium/src/test/java/org/vividus/bdd/steps/ui/GenericWaitStepsTests.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xN1QyMDoxMzoyNlrOHjflQg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xN1QyMDoxMzoyNlrOHjflQg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjk3OTY1MA==", "bodyText": "I believe we should revise org.vividus.ui.action.search.Locator#toString as first", "url": "https://github.com/vividus-framework/vividus/pull/1034#discussion_r506979650", "createdAt": "2020-10-17T20:13:26Z", "author": {"login": "valfirst"}, "path": "vividus-extension-selenium/src/test/java/org/vividus/bdd/steps/ui/GenericWaitStepsTests.java", "diffHunk": "@@ -75,4 +81,26 @@ void testWaitTillElementDisappears()\n         waitSteps.waitForElementDisappearance(locator);\n         verify(waitActions).wait(webElement, condition);\n     }\n+\n+    @SuppressWarnings(\"unchecked\")\n+    @Test\n+    void testElementByLocatorExistsForDuration()\n+    {\n+        Locator locator = new Locator(TestLocatorType.SEARCH, VALUE);\n+        IExpectedSearchContextCondition<List<WebElement>> presenceOfAllElements = mock(\n+                IExpectedSearchContextCondition.class);\n+        IExpectedSearchContextCondition<Boolean> not = mock(IExpectedSearchContextCondition.class);\n+        WaitResult<Boolean> waitResult = new WaitResult<>();\n+        waitResult.setWaitPassed(true);\n+\n+        when(uiContext.getSearchContext()).thenReturn(webElement);\n+        when(expectedSearchActionsConditions.presenceOfAllElementsLocatedBy(locator)).thenReturn(presenceOfAllElements);\n+        when(expectedSearchActionsConditions.not(presenceOfAllElements)).thenReturn(not);\n+        when(waitActions.wait(webElement, Duration.ZERO, not, false)).thenReturn(waitResult);\n+\n+        waitSteps.doesElementByLocatorExistsForDuration(locator, Duration.ZERO);\n+\n+        verify(softAssert).assertFalse(\"Element located by locator ' Search: 'value'; Visibility: VISIBLE;' has existed\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5d86affdae1aaa01823bf6af56aa80e14b7ec76b"}, "originalPosition": 61}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE3NTYxODI4OnYy", "diffSide": "RIGHT", "path": "vividus-plugin-web-app/src/main/java/org/vividus/bdd/steps/ui/web/WaitSteps.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xN1QyMDo1MDozNFrOHjfxYA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xN1QyMDo1MDozNFrOHjfxYA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjk4Mjc1Mg==", "bodyText": "since = \"0.2.9\"", "url": "https://github.com/vividus-framework/vividus/pull/1034#discussion_r506982752", "createdAt": "2020-10-17T20:50:34Z", "author": {"login": "valfirst"}, "path": "vividus-plugin-web-app/src/main/java/org/vividus/bdd/steps/ui/web/WaitSteps.java", "diffHunk": "@@ -338,9 +338,11 @@ public void elementByIdDisappears(String id)\n \n     /**\n      * Checks that element exists during the timeout\n+     * @deprecated Use <code>Then element located '$locator' exists for '$duration' duration</code>\n      * @param seconds timeout in seconds\n      * @param xpath XPath value of the element\n      */\n+    @Deprecated(forRemoval = true, since = \"0.3.0\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5d86affdae1aaa01823bf6af56aa80e14b7ec76b"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE4MDM5OTM3OnYy", "diffSide": "RIGHT", "path": "vividus-extension-selenium/src/main/java/org/vividus/bdd/steps/ui/GenericWaitSteps.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxMzoxMjo0MFrOHkNm-A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxMzoxMjo0MFrOHkNm-A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzczMzc1Mg==", "bodyText": "what about adding minutes as well?", "url": "https://github.com/vividus-framework/vividus/pull/1034#discussion_r507733752", "createdAt": "2020-10-19T13:12:40Z", "author": {"login": "valfirst"}, "path": "vividus-extension-selenium/src/main/java/org/vividus/bdd/steps/ui/GenericWaitSteps.java", "diffHunk": "@@ -59,6 +68,41 @@ public void waitForElementDisappearance(Locator locator)\n         waitForCondition(expectedSearchActionsConditions.invisibilityOfElement(locator));\n     }\n \n+    /**\n+     * Checks that element located by <b>locator</b> exists during the <b>duration</b>\n+     * @param locator locator to find an element\n+     * @param duration total waiting time according to <a href=\"https://en.wikipedia.org/wiki/ISO_8601\">ISO 8601</a>\n+     * standard\n+     */\n+    @Then(\"element located `$locator` exists for `$duration` duration\")\n+    public void doesElementByLocatorExistsForDuration(Locator locator, Duration duration)\n+    {\n+        String prettyDuration = formatDuration(duration);\n+\n+        WaitResult<Boolean> result = waitActions.wait(uiContext.getSearchContext(), duration,\n+                expectedSearchActionsConditions\n+                        .not(expectedSearchActionsConditions.presenceOfAllElementsLocatedBy(locator)), false);\n+\n+        String assertionMessage = String.format(\"Element located by locator %s has existed during %s\",\n+                locator.toHumanReadableString(), prettyDuration);\n+        softAssert.assertFalse(assertionMessage, result.isWaitPassed());\n+    }\n+\n+    private String formatDuration(Duration duration)\n+    {\n+        String durationFormat = \"\";\n+        if (duration.toSeconds() != 0)\n+        {\n+            durationFormat += \"s' seconds' \";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e51b0fd117245474962fad97dcab58a39b7ee534"}, "originalPosition": 65}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE4MDQwMzkxOnYy", "diffSide": "RIGHT", "path": "vividus-extension-selenium/src/main/java/org/vividus/bdd/steps/ui/GenericWaitSteps.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxMzoxMzo0NFrOHkNptA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxMzoxMzo0NFrOHkNptA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzczNDQ1Mg==", "bodyText": "during vs for?", "url": "https://github.com/vividus-framework/vividus/pull/1034#discussion_r507734452", "createdAt": "2020-10-19T13:13:44Z", "author": {"login": "valfirst"}, "path": "vividus-extension-selenium/src/main/java/org/vividus/bdd/steps/ui/GenericWaitSteps.java", "diffHunk": "@@ -59,6 +68,41 @@ public void waitForElementDisappearance(Locator locator)\n         waitForCondition(expectedSearchActionsConditions.invisibilityOfElement(locator));\n     }\n \n+    /**\n+     * Checks that element located by <b>locator</b> exists during the <b>duration</b>\n+     * @param locator locator to find an element\n+     * @param duration total waiting time according to <a href=\"https://en.wikipedia.org/wiki/ISO_8601\">ISO 8601</a>\n+     * standard\n+     */\n+    @Then(\"element located `$locator` exists for `$duration` duration\")\n+    public void doesElementByLocatorExistsForDuration(Locator locator, Duration duration)\n+    {\n+        String prettyDuration = formatDuration(duration);\n+\n+        WaitResult<Boolean> result = waitActions.wait(uiContext.getSearchContext(), duration,\n+                expectedSearchActionsConditions\n+                        .not(expectedSearchActionsConditions.presenceOfAllElementsLocatedBy(locator)), false);\n+\n+        String assertionMessage = String.format(\"Element located by locator %s has existed during %s\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e51b0fd117245474962fad97dcab58a39b7ee534"}, "originalPosition": 55}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 20, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}