{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA0MDg5ODU4", "number": 1030, "title": "[extension-selenium] Add set variable steps", "bodyText": "Needs be fixed for 0.3.0 #1032", "createdAt": "2020-10-15T13:05:39Z", "url": "https://github.com/vividus-framework/vividus/pull/1030", "merged": true, "mergeCommit": {"oid": "c0306031de751a959f08ca6389aa6c0be4351391"}, "closed": true, "closedAt": "2020-10-16T09:14:24Z", "author": {"login": "uarlouski"}, "timelineItems": {"totalCount": 18, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdSx14CABqjM4ODE2MDI0OTY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdTCv0LAFqTUxMDI5MzAxOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "54b9a7ac0a23aa462431400cc03785519bcffce1", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/54b9a7ac0a23aa462431400cc03785519bcffce1", "committedDate": "2020-10-15T13:04:28Z", "message": "[extension-selenium] Template for message"}, "afterCommit": {"oid": "c6e60faeabf3fa784b1e40632ddcc9df02c1863e", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/c6e60faeabf3fa784b1e40632ddcc9df02c1863e", "committedDate": "2020-10-15T13:31:55Z", "message": "[extension-selenium] Template for message"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c6e60faeabf3fa784b1e40632ddcc9df02c1863e", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/c6e60faeabf3fa784b1e40632ddcc9df02c1863e", "committedDate": "2020-10-15T13:31:55Z", "message": "[extension-selenium] Template for message"}, "afterCommit": {"oid": "bc11d85b88a9a4162549b0a4c8efbe75a436f216", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/bc11d85b88a9a4162549b0a4c8efbe75a436f216", "committedDate": "2020-10-15T13:54:06Z", "message": "[extension-selenium] Add set variable steps\n\n- When I set text found in search context to $scopes variable `$variableName`\n- When I set `$attributeName` attribute value of context element to $scopes variable `$variableName`\n- When I set `$attributeName` attribute value of element located `$locator` to $scopes variable `$variableName`"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bc11d85b88a9a4162549b0a4c8efbe75a436f216", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/bc11d85b88a9a4162549b0a4c8efbe75a436f216", "committedDate": "2020-10-15T13:54:06Z", "message": "[extension-selenium] Add set variable steps\n\n- When I set text found in search context to $scopes variable `$variableName`\n- When I set `$attributeName` attribute value of context element to $scopes variable `$variableName`\n- When I set `$attributeName` attribute value of element located `$locator` to $scopes variable `$variableName`"}, "afterCommit": {"oid": "0d82c288eab21eebf32e395b9713b10743453926", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/0d82c288eab21eebf32e395b9713b10743453926", "committedDate": "2020-10-15T13:58:56Z", "message": "[extension-selenium] Add set variable steps\n\n- When I set text found in search context to $scopes variable `$variableName`\n- When I set `$attributeName` attribute value of context element to $scopes variable `$variableName`\n- When I set `$attributeName` attribute value of element located `$locator` to $scopes variable `$variableName`"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0d82c288eab21eebf32e395b9713b10743453926", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/0d82c288eab21eebf32e395b9713b10743453926", "committedDate": "2020-10-15T13:58:56Z", "message": "[extension-selenium] Add set variable steps\n\n- When I set text found in search context to $scopes variable `$variableName`\n- When I set `$attributeName` attribute value of context element to $scopes variable `$variableName`\n- When I set `$attributeName` attribute value of element located `$locator` to $scopes variable `$variableName`"}, "afterCommit": {"oid": "37e15ffce4e39d9f53e33fff96e48cd1af69fb4c", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/37e15ffce4e39d9f53e33fff96e48cd1af69fb4c", "committedDate": "2020-10-15T14:16:33Z", "message": "[extension-selenium] Add set variable steps\n\n- When I set text found in search context to $scopes variable `$variableName`\n- When I set `$attributeName` attribute value of context element to $scopes variable `$variableName`\n- When I set `$attributeName` attribute value of element located `$locator` to $scopes variable `$variableName`"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA5NDUzODMw", "url": "https://github.com/vividus-framework/vividus/pull/1030#pullrequestreview-509453830", "createdAt": "2020-10-15T14:39:33Z", "commit": {"oid": "37e15ffce4e39d9f53e33fff96e48cd1af69fb4c"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQxNDozOTozM1rOHiLOXg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQxNDo1Mzo0MVrOHiL55w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTU5NzUzNA==", "bodyText": "is it applicable for context element only? or is full page supported as well?", "url": "https://github.com/vividus-framework/vividus/pull/1030#discussion_r505597534", "createdAt": "2020-10-15T14:39:33Z", "author": {"login": "valfirst"}, "path": "docs/modules/plugins/partials/generic-ui-steps.adoc", "diffHunk": "@@ -117,3 +117,89 @@ When I wait until element located `$locator` disappears\n Scenario: Wait for element disappearance\n When I wait until element located `name(welcome-image)` disappears\n ----\n+\n+=== Get text of context element\n+\n+==== *_Info_*\n+\n+Extracts text of a context element and saves it to a variable", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "37e15ffce4e39d9f53e33fff96e48cd1af69fb4c"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTU5ODAyMg==", "bodyText": "describe what happens if context is not set to the element", "url": "https://github.com/vividus-framework/vividus/pull/1030#discussion_r505598022", "createdAt": "2020-10-15T14:40:11Z", "author": {"login": "valfirst"}, "path": "docs/modules/plugins/partials/generic-ui-steps.adoc", "diffHunk": "@@ -117,3 +117,89 @@ When I wait until element located `$locator` disappears\n Scenario: Wait for element disappearance\n When I wait until element located `name(welcome-image)` disappears\n ----\n+\n+=== Get text of context element\n+\n+==== *_Info_*\n+\n+Extracts text of a context element and saves it to a variable\n+\n+==== *_Wording_*\n+\n+[source,gherkin]\n+----\n+When I set text found in search context to $scopes variable `$variableName`\n+----\n+\n+==== *_Parameters_*\n+\n+. `$scopes` - xref:parameters:variable-scope.adoc[The set of variable's scope]\n+. `$variableName` - name of a variable\n+\n+==== *_Usage_*\n+\n+.SaveText.story\n+[source,gherkin]\n+----\n+Scenario: Get text of context element\n+When I change context to element located `By.id(username)`\n+When I set text found in search context to SCENARIO variable `username`\n+----\n+\n+=== Get attribute value of context element\n+\n+==== *_Info_*\n+\n+Extracts attribute value of a context element and saves it to a variable", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "37e15ffce4e39d9f53e33fff96e48cd1af69fb4c"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTYwMzY4Ng==", "bodyText": "When I save `$attributeName` attribute value of context element to $scopes variable `$variableName`", "url": "https://github.com/vividus-framework/vividus/pull/1030#discussion_r505603686", "createdAt": "2020-10-15T14:47:28Z", "author": {"login": "valfirst"}, "path": "docs/modules/plugins/partials/generic-ui-steps.adoc", "diffHunk": "@@ -117,3 +117,89 @@ When I wait until element located `$locator` disappears\n Scenario: Wait for element disappearance\n When I wait until element located `name(welcome-image)` disappears\n ----\n+\n+=== Get text of context element\n+\n+==== *_Info_*\n+\n+Extracts text of a context element and saves it to a variable\n+\n+==== *_Wording_*\n+\n+[source,gherkin]\n+----\n+When I set text found in search context to $scopes variable `$variableName`\n+----\n+\n+==== *_Parameters_*\n+\n+. `$scopes` - xref:parameters:variable-scope.adoc[The set of variable's scope]\n+. `$variableName` - name of a variable\n+\n+==== *_Usage_*\n+\n+.SaveText.story\n+[source,gherkin]\n+----\n+Scenario: Get text of context element\n+When I change context to element located `By.id(username)`\n+When I set text found in search context to SCENARIO variable `username`\n+----\n+\n+=== Get attribute value of context element\n+\n+==== *_Info_*\n+\n+Extracts attribute value of a context element and saves it to a variable\n+\n+==== *_Wording_*\n+\n+[source,gherkin]\n+----\n+When I set `$attributeName` attribute value of context element to $scopes variable `$variableName`", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "37e15ffce4e39d9f53e33fff96e48cd1af69fb4c"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTYwNDE4OA==", "bodyText": "When I save `$attributeName` attribute value of element located `$locator` to $scopes variable `$variableName`", "url": "https://github.com/vividus-framework/vividus/pull/1030#discussion_r505604188", "createdAt": "2020-10-15T14:48:07Z", "author": {"login": "valfirst"}, "path": "docs/modules/plugins/partials/generic-ui-steps.adoc", "diffHunk": "@@ -117,3 +117,89 @@ When I wait until element located `$locator` disappears\n Scenario: Wait for element disappearance\n When I wait until element located `name(welcome-image)` disappears\n ----\n+\n+=== Get text of context element\n+\n+==== *_Info_*\n+\n+Extracts text of a context element and saves it to a variable\n+\n+==== *_Wording_*\n+\n+[source,gherkin]\n+----\n+When I set text found in search context to $scopes variable `$variableName`\n+----\n+\n+==== *_Parameters_*\n+\n+. `$scopes` - xref:parameters:variable-scope.adoc[The set of variable's scope]\n+. `$variableName` - name of a variable\n+\n+==== *_Usage_*\n+\n+.SaveText.story\n+[source,gherkin]\n+----\n+Scenario: Get text of context element\n+When I change context to element located `By.id(username)`\n+When I set text found in search context to SCENARIO variable `username`\n+----\n+\n+=== Get attribute value of context element\n+\n+==== *_Info_*\n+\n+Extracts attribute value of a context element and saves it to a variable\n+\n+==== *_Wording_*\n+\n+[source,gherkin]\n+----\n+When I set `$attributeName` attribute value of context element to $scopes variable `$variableName`\n+----\n+\n+==== *_Parameters_*\n+\n+. `$attributeName` - name of an element's attribute\n+. `$scopes` - xref:parameters:variable-scope.adoc[The set of variable's scope]\n+. `$variableName` - name of a variable\n+\n+==== *_Usage_*\n+\n+.SaveAttributeValue.story\n+[source,gherkin]\n+----\n+Scenario: Get attribute value of context element\n+When I change context to element located `By.id(username)`\n+When I set `innerText` attribute value of context element to SCENARIO variable `username`\n+----\n+\n+=== Get attribute value of element\n+\n+==== *_Info_*\n+\n+Extracts attribute value of an element located by locator and saves it to a variable\n+\n+==== *_Wording_*\n+\n+[source,gherkin]\n+----\n+When I set `$attributeName` attribute value of element located `$locator` to $scopes variable `$variableName`", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "37e15ffce4e39d9f53e33fff96e48cd1af69fb4c"}, "originalPosition": 72}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTYwNTI1Nw==", "bodyText": "When I save text of context element to $scopes variable `$variableName`", "url": "https://github.com/vividus-framework/vividus/pull/1030#discussion_r505605257", "createdAt": "2020-10-15T14:49:26Z", "author": {"login": "valfirst"}, "path": "docs/modules/plugins/partials/generic-ui-steps.adoc", "diffHunk": "@@ -117,3 +117,89 @@ When I wait until element located `$locator` disappears\n Scenario: Wait for element disappearance\n When I wait until element located `name(welcome-image)` disappears\n ----\n+\n+=== Get text of context element\n+\n+==== *_Info_*\n+\n+Extracts text of a context element and saves it to a variable\n+\n+==== *_Wording_*\n+\n+[source,gherkin]\n+----\n+When I set text found in search context to $scopes variable `$variableName`", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "37e15ffce4e39d9f53e33fff96e48cd1af69fb4c"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTYwODMwNQ==", "bodyText": "we should init variable with either value or null (to avoid cases when previously created variable contains old value)\nI see that it's not a part of this PR, but it should be fixed", "url": "https://github.com/vividus-framework/vividus/pull/1030#discussion_r505608305", "createdAt": "2020-10-15T14:53:15Z", "author": {"login": "valfirst"}, "path": "vividus-extension-selenium/src/main/java/org/vividus/bdd/steps/ui/GenericSetVariableSteps.java", "diffHunk": "@@ -0,0 +1,148 @@\n+/*\n+ * Copyright 2019-2020 the original author or authors.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     https://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.vividus.bdd.steps.ui;\n+\n+import java.util.Optional;\n+import java.util.Set;\n+import java.util.function.Function;\n+\n+import org.jbehave.core.annotations.When;\n+import org.openqa.selenium.WebElement;\n+import org.vividus.bdd.context.IBddVariableContext;\n+import org.vividus.bdd.monitor.TakeScreenshotOnFailure;\n+import org.vividus.bdd.steps.ui.validation.IBaseValidations;\n+import org.vividus.bdd.variable.VariableScope;\n+import org.vividus.softassert.ISoftAssert;\n+import org.vividus.ui.action.IElementActions;\n+import org.vividus.ui.action.search.Locator;\n+import org.vividus.ui.action.search.Visibility;\n+import org.vividus.ui.context.IUiContext;\n+\n+@TakeScreenshotOnFailure\n+public class GenericSetVariableSteps\n+{\n+    private final ISoftAssert softAssert;\n+    private final IBaseValidations baseValidations;\n+    private final IBddVariableContext bddVariableContext;\n+    private final IElementActions elementActions;\n+    private final IUiContext uiContext;\n+\n+    public GenericSetVariableSteps(ISoftAssert softAssert, IBaseValidations baseValidations,\n+            IBddVariableContext bddVariableContext, IElementActions elementActions, IUiContext uiContext)\n+    {\n+        this.softAssert = softAssert;\n+        this.baseValidations = baseValidations;\n+        this.bddVariableContext = bddVariableContext;\n+        this.elementActions = elementActions;\n+        this.uiContext = uiContext;\n+    }\n+\n+    /**\n+     * Extracts the <b>text</b> of element found in the context and saves it to the <b>variable</b> with the specified\n+     * <b>variableName</b>\n+     * Actions performed at this step:\n+     * <ul>\n+     * <li>Saves the text of element into the <i>variable name</i>\n+     * </ul>\n+     * @param scopes The set (comma separated list of scopes e.g.: STORY, NEXT_BATCHES) of variable's scope<br>\n+     * <i>Available scopes:</i>\n+     * <ul>\n+     * <li><b>STEP</b> - the variable will be available only within the step\n+     * <li><b>SCENARIO</b> - the variable will be available only within the scenario\n+     * <li><b>STORY</b> - the variable will be available within the whole story\n+     * <li><b>NEXT_BATCHES</b> - the variable will be available starting from next batch\n+     * </ul>\n+     * @param variableName A name under which the value should be saved\n+     */\n+    @When(\"I set text found in search context to $scopes variable `$variableName`\")\n+    public void saveContextElementTextToVariable(Set<VariableScope> scopes, String variableName)\n+    {\n+        saveVariableIfContextElementPresent(elementActions::getElementText, scopes, variableName);\n+    }\n+\n+    /**\n+     * Extracts the value of <b>attribute</b> of element found in the context and saves it to the <b>variable</b> with\n+     * the specified <b>variableName</b>\n+     * Actions performed at this step:\n+     * <ul>\n+     * <li>Saves the value of attribute with name <i>attributeName</i> to the <i>variableName</i>\n+     * </ul>\n+     * @param attributeName the name of the attribute (for ex. 'name', 'id')\n+     * @param scopes The set (comma separated list of scopes e.g.: STORY, NEXT_BATCHES) of variable's scope<br>\n+     * <i>Available scopes:</i>\n+     * <ul>\n+     * <li><b>STEP</b> - the variable will be available only within the step\n+     * <li><b>SCENARIO</b> - the variable will be available only within the scenario\n+     * <li><b>STORY</b> - the variable will be available within the whole story\n+     * <li><b>NEXT_BATCHES</b> - the variable will be available starting from next batch\n+     * </ul>\n+     * @param variableName A name under which the value should be saved\n+     */\n+    @When(\"I set `$attributeName` attribute value of context element to $scopes variable `$variableName`\")\n+    public void saveContextElementAttributeValueToVariable(String attributeName, Set<VariableScope> scopes,\n+            String variableName)\n+    {\n+        saveVariableIfContextElementPresent(contextElement -> getAssertedAttributeValue(contextElement, attributeName),\n+                scopes, variableName);\n+    }\n+\n+    /**\n+     * Extracts the value of <b>attribute</b> of element found by <b>locator</b> and saves it to the <b>variable</b>\n+     * with the specified <b>variableName</b>\n+     * Actions performed at this step:\n+     * <ul>\n+     * <li>Saves the value of attribute with name <i>attributeName</i> to the <i>variableName</i>\n+     * </ul>\n+     * @param attributeName the name of the attribute (for ex. 'name', 'id')\n+     * @param locator locator to find an element\n+     * @param scopes The set (comma separated list of scopes e.g.: STORY, NEXT_BATCHES) of variable's scope<br>\n+     * <i>Available scopes:</i>\n+     * <ul>\n+     * <li><b>STEP</b> - the variable will be available only within the step\n+     * <li><b>SCENARIO</b> - the variable will be available only within the scenario\n+     * <li><b>STORY</b> - the variable will be available within the whole story\n+     * <li><b>NEXT_BATCHES</b> - the variable will be available starting from next batch\n+     * </ul>\n+     * @param variableName A name under which the value should be saved\n+     */\n+    @When(\"I set `$attributeName` attribute value of element located `$locator` to $scopes variable `$variableName`\")\n+    public void saveAttributeValueOfElementByLocatorToVariable(String attributeName, Locator locator,\n+            Set<VariableScope> scopes, String variableName)\n+    {\n+        locator.getSearchParameters().setVisibility(Visibility.ALL);\n+        baseValidations.assertElementExists(\"The element to extract the attribute\", locator)\n+                .map(element -> getAssertedAttributeValue(element, attributeName))\n+                .ifPresent(attributeValue -> bddVariableContext.putVariable(scopes, variableName, attributeValue));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "37e15ffce4e39d9f53e33fff96e48cd1af69fb4c"}, "originalPosition": 129}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTYwODY3OQ==", "bodyText": "ElementActions", "url": "https://github.com/vividus-framework/vividus/pull/1030#discussion_r505608679", "createdAt": "2020-10-15T14:53:41Z", "author": {"login": "valfirst"}, "path": "vividus-extension-selenium/src/main/java/org/vividus/ui/action/IElementActions.java", "diffHunk": "@@ -0,0 +1,30 @@\n+/*\n+ * Copyright 2019-2020 the original author or authors.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     https://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.vividus.ui.action;\n+\n+import org.openqa.selenium.WebElement;\n+\n+public interface IElementActions", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "37e15ffce4e39d9f53e33fff96e48cd1af69fb4c"}, "originalPosition": 21}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA5NTU2ODY0", "url": "https://github.com/vividus-framework/vividus/pull/1030#pullrequestreview-509556864", "createdAt": "2020-10-15T16:24:27Z", "commit": {"oid": "37e15ffce4e39d9f53e33fff96e48cd1af69fb4c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQxNjoyNDoyN1rOHiQAKg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQxNjoyNDoyN1rOHiQAKg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTY3NTgxOA==", "bodyText": "Do all the scenarios require navigation to the same page?", "url": "https://github.com/vividus-framework/vividus/pull/1030#discussion_r505675818", "createdAt": "2020-10-15T16:24:27Z", "author": {"login": "ikalinin1"}, "path": "vividus-tests/src/main/resources/story/integration/SetVariableSteps.story", "diffHunk": "@@ -0,0 +1,43 @@\n+Meta:\n+    @epic vividus-extension-selenium\n+\n+Scenario: Verify step: \"When I set the text found in search context to the '$scopes' variable '$variableName'\"\n+Given I am on a page with the URL '${vividus-test-site-url}/inputs.html'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "37e15ffce4e39d9f53e33fff96e48cd1af69fb4c"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "37e15ffce4e39d9f53e33fff96e48cd1af69fb4c", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/37e15ffce4e39d9f53e33fff96e48cd1af69fb4c", "committedDate": "2020-10-15T14:16:33Z", "message": "[extension-selenium] Add set variable steps\n\n- When I set text found in search context to $scopes variable `$variableName`\n- When I set `$attributeName` attribute value of context element to $scopes variable `$variableName`\n- When I set `$attributeName` attribute value of element located `$locator` to $scopes variable `$variableName`"}, "afterCommit": {"oid": "68e2d9506ae33efb0864e92ea5ba43d3d72e5c3b", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/68e2d9506ae33efb0864e92ea5ba43d3d72e5c3b", "committedDate": "2020-10-15T19:25:01Z", "message": "[extension-selenium] Add set variable steps\n\n- When I save text of context element to $scopes variable `$variableName`\n- When I save `$attributeName` attribute value of context element to $scopes variable `$variableName`\n- When I save `$attributeName` attribute value of element located `$locator` to $scopes variable `$variableName`"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "68e2d9506ae33efb0864e92ea5ba43d3d72e5c3b", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/68e2d9506ae33efb0864e92ea5ba43d3d72e5c3b", "committedDate": "2020-10-15T19:25:01Z", "message": "[extension-selenium] Add set variable steps\n\n- When I save text of context element to $scopes variable `$variableName`\n- When I save `$attributeName` attribute value of context element to $scopes variable `$variableName`\n- When I save `$attributeName` attribute value of element located `$locator` to $scopes variable `$variableName`"}, "afterCommit": {"oid": "c4b655deacf53681925d9903f7439bd658572361", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/c4b655deacf53681925d9903f7439bd658572361", "committedDate": "2020-10-15T20:12:06Z", "message": "[extension-selenium] Add set variable steps\n\n- When I save text of context element to $scopes variable `$variableName`\n- When I save `$attributeName` attribute value of context element to $scopes variable `$variableName`\n- When I save `$attributeName` attribute value of element located `$locator` to $scopes variable `$variableName`"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c4b655deacf53681925d9903f7439bd658572361", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/c4b655deacf53681925d9903f7439bd658572361", "committedDate": "2020-10-15T20:12:06Z", "message": "[extension-selenium] Add set variable steps\n\n- When I save text of context element to $scopes variable `$variableName`\n- When I save `$attributeName` attribute value of context element to $scopes variable `$variableName`\n- When I save `$attributeName` attribute value of element located `$locator` to $scopes variable `$variableName`"}, "afterCommit": {"oid": "2a7f426b2c66eb0d7b53b1cc4d2ec0ac6c0d7885", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/2a7f426b2c66eb0d7b53b1cc4d2ec0ac6c0d7885", "committedDate": "2020-10-15T20:19:02Z", "message": "[extension-selenium] Add set variable steps\n\n- When I save text of context element to $scopes variable `$variableName`\n- When I save `$attributeName` attribute value of context element to $scopes variable `$variableName`\n- When I save `$attributeName` attribute value of element located `$locator` to $scopes variable `$variableName`"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2a7f426b2c66eb0d7b53b1cc4d2ec0ac6c0d7885", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/2a7f426b2c66eb0d7b53b1cc4d2ec0ac6c0d7885", "committedDate": "2020-10-15T20:19:02Z", "message": "[extension-selenium] Add set variable steps\n\n- When I save text of context element to $scopes variable `$variableName`\n- When I save `$attributeName` attribute value of context element to $scopes variable `$variableName`\n- When I save `$attributeName` attribute value of element located `$locator` to $scopes variable `$variableName`"}, "afterCommit": {"oid": "c9ce1869056d0ef06c24b41830faf44ec9db79a0", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/c9ce1869056d0ef06c24b41830faf44ec9db79a0", "committedDate": "2020-10-15T20:21:38Z", "message": "[extension-selenium] Add set variable steps\n\n- When I save text of context element to $scopes variable `$variableName`\n- When I save `$attributeName` attribute value of context element to $scopes variable `$variableName`\n- When I save `$attributeName` attribute value of element located `$locator` to $scopes variable `$variableName`"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c9ce1869056d0ef06c24b41830faf44ec9db79a0", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/c9ce1869056d0ef06c24b41830faf44ec9db79a0", "committedDate": "2020-10-15T20:21:38Z", "message": "[extension-selenium] Add set variable steps\n\n- When I save text of context element to $scopes variable `$variableName`\n- When I save `$attributeName` attribute value of context element to $scopes variable `$variableName`\n- When I save `$attributeName` attribute value of element located `$locator` to $scopes variable `$variableName`"}, "afterCommit": {"oid": "e7e3d5de5a5c32eb5b105b27f4d5f408b54df692", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/e7e3d5de5a5c32eb5b105b27f4d5f408b54df692", "committedDate": "2020-10-15T20:48:28Z", "message": "[extension-selenium] Add set variable steps\n\n- When I save text of context element to $scopes variable `$variableName`\n- When I save `$attributeName` attribute value of context element to $scopes variable `$variableName`\n- When I save `$attributeName` attribute value of element located `$locator` to $scopes variable `$variableName`"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e7e3d5de5a5c32eb5b105b27f4d5f408b54df692", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/e7e3d5de5a5c32eb5b105b27f4d5f408b54df692", "committedDate": "2020-10-15T20:48:28Z", "message": "[extension-selenium] Add set variable steps\n\n- When I save text of context element to $scopes variable `$variableName`\n- When I save `$attributeName` attribute value of context element to $scopes variable `$variableName`\n- When I save `$attributeName` attribute value of element located `$locator` to $scopes variable `$variableName`"}, "afterCommit": {"oid": "8eeeb795f511f8a84d10ca66de6ad901b0092b9a", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/8eeeb795f511f8a84d10ca66de6ad901b0092b9a", "committedDate": "2020-10-15T21:11:11Z", "message": "[extension-selenium] Add set variable steps\n\n- When I save text of context element to $scopes variable `$variableName`\n- When I save `$attributeName` attribute value of context element to $scopes variable `$variableName`\n- When I save `$attributeName` attribute value of element located `$locator` to $scopes variable `$variableName`"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8eeeb795f511f8a84d10ca66de6ad901b0092b9a", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/8eeeb795f511f8a84d10ca66de6ad901b0092b9a", "committedDate": "2020-10-15T21:11:11Z", "message": "[extension-selenium] Add set variable steps\n\n- When I save text of context element to $scopes variable `$variableName`\n- When I save `$attributeName` attribute value of context element to $scopes variable `$variableName`\n- When I save `$attributeName` attribute value of element located `$locator` to $scopes variable `$variableName`"}, "afterCommit": {"oid": "35e32c04517b7c5c19ca00f03996e73ceea4d923", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/35e32c04517b7c5c19ca00f03996e73ceea4d923", "committedDate": "2020-10-16T06:01:59Z", "message": "[extension-selenium] Add set variable steps\n\n- When I save text of context element to $scopes variable `$variableName`\n- When I save `$attributeName` attribute value of context element to $scopes variable `$variableName`\n- When I save `$attributeName` attribute value of element located `$locator` to $scopes variable `$variableName`"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEwMTgwMDMw", "url": "https://github.com/vividus-framework/vividus/pull/1030#pullrequestreview-510180030", "createdAt": "2020-10-16T06:16:43Z", "commit": {"oid": "35e32c04517b7c5c19ca00f03996e73ceea4d923"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQwNjoxNjo0M1rOHiodNQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQwNjo1OToxMFrOHiqDPQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjA3NjQ2OQ==", "bodyText": "fails -> will throw an error", "url": "https://github.com/vividus-framework/vividus/pull/1030#discussion_r506076469", "createdAt": "2020-10-16T06:16:43Z", "author": {"login": "valfirst"}, "path": "docs/modules/plugins/partials/generic-ui-steps.adoc", "diffHunk": "@@ -117,3 +117,95 @@ When I wait until element located `$locator` disappears\n Scenario: Wait for element disappearance\n When I wait until element located `name(welcome-image)` disappears\n ----\n+\n+=== Save text of context element\n+\n+==== *_Info_*\n+\n+Saves text of a context element into a variable\n+\n+[WARNING]\n+Step fails if the context element is not set", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "35e32c04517b7c5c19ca00f03996e73ceea4d923"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjA3NzcxNw==", "bodyText": "not expected change", "url": "https://github.com/vividus-framework/vividus/pull/1030#discussion_r506077717", "createdAt": "2020-10-16T06:18:27Z", "author": {"login": "valfirst"}, "path": "vividus-plugin-mobile-app/src/main/java/org/vividus/mobileapp/action/TouchActions.java", "diffHunk": "@@ -154,6 +154,20 @@ public void swipeUntil(SwipeDirection direction, Duration swipeDuration, Boolean\n         }\n     }\n \n+    /**\n+     * Performs swipe based on <b>swipeCoordinates</b> passed as argument\n+     * @param swipeCoordinates coordinates to swipe, must not be {@code null}\n+     * @param duration between an element is pressed and released in\n+     * <a href=\"https://en.wikipedia.org/wiki/ISO_8601\">ISO 8601</a> format, must not be {@code null}\n+     */\n+    public void swipe(SwipeCoordinates swipeCoordinates, Duration duration)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "35e32c04517b7c5c19ca00f03996e73ceea4d923"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjEwMjU4OQ==", "bodyText": "the part of the code can be extracted to a new method, and then re-used:\nprivate void putVariable(Optional<WebElement> element, Function<WebElement, Object> variableMapper, Set<VariableScope> scopes, String variableName)\n{\n    Object value = element.map(variableMapper).orElse(null);\n    bddVariableContext.putVariable(scopes, variableName, value);\n}", "url": "https://github.com/vividus-framework/vividus/pull/1030#discussion_r506102589", "createdAt": "2020-10-16T06:59:10Z", "author": {"login": "valfirst"}, "path": "vividus-extension-selenium/src/main/java/org/vividus/bdd/steps/ui/GenericSetVariableSteps.java", "diffHunk": "@@ -0,0 +1,149 @@\n+/*\n+ * Copyright 2019-2020 the original author or authors.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     https://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.vividus.bdd.steps.ui;\n+\n+import java.util.Optional;\n+import java.util.Set;\n+import java.util.function.Function;\n+\n+import org.jbehave.core.annotations.When;\n+import org.openqa.selenium.WebElement;\n+import org.vividus.bdd.context.IBddVariableContext;\n+import org.vividus.bdd.monitor.TakeScreenshotOnFailure;\n+import org.vividus.bdd.steps.ui.validation.IBaseValidations;\n+import org.vividus.bdd.variable.VariableScope;\n+import org.vividus.softassert.ISoftAssert;\n+import org.vividus.ui.action.ElementActions;\n+import org.vividus.ui.action.search.Locator;\n+import org.vividus.ui.action.search.Visibility;\n+import org.vividus.ui.context.IUiContext;\n+\n+@TakeScreenshotOnFailure\n+public class GenericSetVariableSteps\n+{\n+    private final ISoftAssert softAssert;\n+    private final IBaseValidations baseValidations;\n+    private final IBddVariableContext bddVariableContext;\n+    private final ElementActions elementActions;\n+    private final IUiContext uiContext;\n+\n+    public GenericSetVariableSteps(ISoftAssert softAssert, IBaseValidations baseValidations,\n+            IBddVariableContext bddVariableContext, ElementActions elementActions, IUiContext uiContext)\n+    {\n+        this.softAssert = softAssert;\n+        this.baseValidations = baseValidations;\n+        this.bddVariableContext = bddVariableContext;\n+        this.elementActions = elementActions;\n+        this.uiContext = uiContext;\n+    }\n+\n+    /**\n+     * Extracts the <b>text</b> of element found in the context and saves it to the <b>variable</b> with the specified\n+     * <b>variableName</b>\n+     * Actions performed at this step:\n+     * <ul>\n+     * <li>Saves the text of element into the <i>variable name</i>\n+     * </ul>\n+     * @param scopes The set (comma separated list of scopes e.g.: STORY, NEXT_BATCHES) of variable's scope<br>\n+     * <i>Available scopes:</i>\n+     * <ul>\n+     * <li><b>STEP</b> - the variable will be available only within the step\n+     * <li><b>SCENARIO</b> - the variable will be available only within the scenario\n+     * <li><b>STORY</b> - the variable will be available within the whole story\n+     * <li><b>NEXT_BATCHES</b> - the variable will be available starting from next batch\n+     * </ul>\n+     * @param variableName A name under which the value should be saved\n+     */\n+    @When(\"I save text of context element to $scopes variable `$variableName`\")\n+    public void saveContextElementTextToVariable(Set<VariableScope> scopes, String variableName)\n+    {\n+        saveVariableIfContextElementPresent(elementActions::getElementText, scopes, variableName);\n+    }\n+\n+    /**\n+     * Extracts the value of <b>attribute</b> of element found in the context and saves it to the <b>variable</b> with\n+     * the specified <b>variableName</b>\n+     * Actions performed at this step:\n+     * <ul>\n+     * <li>Saves the value of attribute with name <i>attributeName</i> to the <i>variableName</i>\n+     * </ul>\n+     * @param attributeName the name of the attribute (for ex. 'name', 'id')\n+     * @param scopes The set (comma separated list of scopes e.g.: STORY, NEXT_BATCHES) of variable's scope<br>\n+     * <i>Available scopes:</i>\n+     * <ul>\n+     * <li><b>STEP</b> - the variable will be available only within the step\n+     * <li><b>SCENARIO</b> - the variable will be available only within the scenario\n+     * <li><b>STORY</b> - the variable will be available within the whole story\n+     * <li><b>NEXT_BATCHES</b> - the variable will be available starting from next batch\n+     * </ul>\n+     * @param variableName A name under which the value should be saved\n+     */\n+    @When(\"I save `$attributeName` attribute value of context element to $scopes variable `$variableName`\")\n+    public void saveContextElementAttributeValueToVariable(String attributeName, Set<VariableScope> scopes,\n+            String variableName)\n+    {\n+        saveVariableIfContextElementPresent(contextElement -> getAssertedAttributeValue(contextElement, attributeName),\n+                scopes, variableName);\n+    }\n+\n+    /**\n+     * Extracts the value of <b>attribute</b> of element found by <b>locator</b> and saves it to the <b>variable</b>\n+     * with the specified <b>variableName</b>\n+     * Actions performed at this step:\n+     * <ul>\n+     * <li>Saves the value of attribute with name <i>attributeName</i> to the <i>variableName</i>\n+     * </ul>\n+     * @param attributeName the name of the attribute (for ex. 'name', 'id')\n+     * @param locator locator to find an element\n+     * @param scopes The set (comma separated list of scopes e.g.: STORY, NEXT_BATCHES) of variable's scope<br>\n+     * <i>Available scopes:</i>\n+     * <ul>\n+     * <li><b>STEP</b> - the variable will be available only within the step\n+     * <li><b>SCENARIO</b> - the variable will be available only within the scenario\n+     * <li><b>STORY</b> - the variable will be available within the whole story\n+     * <li><b>NEXT_BATCHES</b> - the variable will be available starting from next batch\n+     * </ul>\n+     * @param variableName A name under which the value should be saved\n+     */\n+    @When(\"I save `$attributeName` attribute value of element located `$locator` to $scopes variable `$variableName`\")\n+    public void saveAttributeValueOfElementByLocatorToVariable(String attributeName, Locator locator,\n+            Set<VariableScope> scopes, String variableName)\n+    {\n+        locator.getSearchParameters().setVisibility(Visibility.ALL);\n+        Object value = baseValidations.assertElementExists(\"The element to extract the attribute\", locator)\n+                                      .map(element -> getAssertedAttributeValue(element, attributeName))\n+                                      .orElse(null);\n+        bddVariableContext.putVariable(scopes, variableName, value);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "35e32c04517b7c5c19ca00f03996e73ceea4d923"}, "originalPosition": 130}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9684ab17238b134888c06357e8fb679c53df2f1d", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/9684ab17238b134888c06357e8fb679c53df2f1d", "committedDate": "2020-10-16T07:31:45Z", "message": "[extension-selenium] Add set variable steps\n\n- When I save text of context element to $scopes variable `$variableName`\n- When I save `$attributeName` attribute value of context element to $scopes variable `$variableName`\n- When I save `$attributeName` attribute value of element located `$locator` to $scopes variable `$variableName`"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "35e32c04517b7c5c19ca00f03996e73ceea4d923", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/35e32c04517b7c5c19ca00f03996e73ceea4d923", "committedDate": "2020-10-16T06:01:59Z", "message": "[extension-selenium] Add set variable steps\n\n- When I save text of context element to $scopes variable `$variableName`\n- When I save `$attributeName` attribute value of context element to $scopes variable `$variableName`\n- When I save `$attributeName` attribute value of element located `$locator` to $scopes variable `$variableName`"}, "afterCommit": {"oid": "9684ab17238b134888c06357e8fb679c53df2f1d", "author": {"user": {"login": "uarlouski", "name": "Uladzislau Arlouski"}}, "url": "https://github.com/vividus-framework/vividus/commit/9684ab17238b134888c06357e8fb679c53df2f1d", "committedDate": "2020-10-16T07:31:45Z", "message": "[extension-selenium] Add set variable steps\n\n- When I save text of context element to $scopes variable `$variableName`\n- When I save `$attributeName` attribute value of context element to $scopes variable `$variableName`\n- When I save `$attributeName` attribute value of element located `$locator` to $scopes variable `$variableName`"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEwMjQ1OTk2", "url": "https://github.com/vividus-framework/vividus/pull/1030#pullrequestreview-510245996", "createdAt": "2020-10-16T08:11:12Z", "commit": {"oid": "9684ab17238b134888c06357e8fb679c53df2f1d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEwMjkzMDE5", "url": "https://github.com/vividus-framework/vividus/pull/1030#pullrequestreview-510293019", "createdAt": "2020-10-16T09:13:50Z", "commit": {"oid": "9684ab17238b134888c06357e8fb679c53df2f1d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4824, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}