{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg3MzAwNjE1", "number": 944, "title": "[web-app] Throw user-friendly error when missing main application page URL is used", "bodyText": "Fixes #784", "createdAt": "2020-09-15T13:33:57Z", "url": "https://github.com/vividus-framework/vividus/pull/944", "merged": true, "mergeCommit": {"oid": "b4e861232068227f0f3d1cdcf01bf10893225a66"}, "closed": true, "closedAt": "2020-10-01T12:23:42Z", "author": {"login": "TatianaTochko"}, "timelineItems": {"totalCount": 18, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdJH7hPAFqTQ4ODY5MDQ3Mw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdOOTE8gFqTUwMDE4NDgzOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg4NjkwNDcz", "url": "https://github.com/vividus-framework/vividus/pull/944#pullrequestreview-488690473", "createdAt": "2020-09-15T13:36:50Z", "commit": {"oid": "f30b776dc5b2727d1008a191cac673874b8e8c02"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQxMzozNjo1MFrOHSCPiA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQxMzozNjo1MFrOHSCPiA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODY3MzE2MA==", "bodyText": "Please update:\n\nUnit tests\nTransformer documentation\nAdd property name into message", "url": "https://github.com/vividus-framework/vividus/pull/944#discussion_r488673160", "createdAt": "2020-09-15T13:36:50Z", "author": {"login": "ikalinin1"}, "path": "vividus-plugin-web-app-to-rest-api/src/main/java/org/vividus/transformer/SiteMapTableTransformer.java", "diffHunk": "@@ -58,10 +58,17 @@\n                 Set<String> siteMapRelativeUrls;\n                 try\n                 {\n-                    siteMapRelativeUrls = filterResults(siteMapParser.parse(true, mainApplicationPage,\n+                    if (mainApplicationPage != null)\n+                    {\n+                        siteMapRelativeUrls = filterResults(siteMapParser.parse(true, mainApplicationPage,\n                             siteMapRelativeUrl).stream()\n                             .map(SiteMapURL::getUrl)\n                             .map(URL::toString));\n+                    }\n+                    else\n+                    {\n+                        throw new IllegalArgumentException(\"URL of the main application page should be non-blank\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f30b776dc5b2727d1008a191cac673874b8e8c02"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg4Njg4ODE4", "url": "https://github.com/vividus-framework/vividus/pull/944#pullrequestreview-488688818", "createdAt": "2020-09-15T13:35:17Z", "commit": {"oid": "f30b776dc5b2727d1008a191cac673874b8e8c02"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQxMzozNToxN1rOHSCKuw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQxMzozNzozMVrOHSCRug==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODY3MTkzMQ==", "bodyText": "unit tests ?", "url": "https://github.com/vividus-framework/vividus/pull/944#discussion_r488671931", "createdAt": "2020-09-15T13:35:17Z", "author": {"login": "valfirst"}, "path": "vividus-plugin-web-app-to-rest-api/src/main/java/org/vividus/transformer/SiteMapTableTransformer.java", "diffHunk": "@@ -58,10 +58,17 @@\n                 Set<String> siteMapRelativeUrls;\n                 try\n                 {\n-                    siteMapRelativeUrls = filterResults(siteMapParser.parse(true, mainApplicationPage,\n+                    if (mainApplicationPage != null)\n+                    {\n+                        siteMapRelativeUrls = filterResults(siteMapParser.parse(true, mainApplicationPage,\n                             siteMapRelativeUrl).stream()\n                             .map(SiteMapURL::getUrl)\n                             .map(URL::toString));\n+                    }\n+                    else\n+                    {\n+                        throw new IllegalArgumentException(\"URL of the main application page should be non-blank\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f30b776dc5b2727d1008a191cac673874b8e8c02"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODY3MjI3Ng==", "bodyText": "use org.apache.commons.lang3.Validate instead", "url": "https://github.com/vividus-framework/vividus/pull/944#discussion_r488672276", "createdAt": "2020-09-15T13:35:42Z", "author": {"login": "valfirst"}, "path": "vividus-plugin-web-app-to-rest-api/src/main/java/org/vividus/transformer/SiteMapTableTransformer.java", "diffHunk": "@@ -58,10 +58,17 @@\n                 Set<String> siteMapRelativeUrls;\n                 try\n                 {\n-                    siteMapRelativeUrls = filterResults(siteMapParser.parse(true, mainApplicationPage,\n+                    if (mainApplicationPage != null)\n+                    {\n+                        siteMapRelativeUrls = filterResults(siteMapParser.parse(true, mainApplicationPage,\n                             siteMapRelativeUrl).stream()\n                             .map(SiteMapURL::getUrl)\n                             .map(URL::toString));\n+                    }\n+                    else\n+                    {\n+                        throw new IllegalArgumentException(\"URL of the main application page should be non-blank\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f30b776dc5b2727d1008a191cac673874b8e8c02"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODY3MzcyMg==", "bodyText": "also I believe the fix should be implemented in getMainApplicationPageUri() to avoid the same issue in HeadlessCrawlerTableTransformer", "url": "https://github.com/vividus-framework/vividus/pull/944#discussion_r488673722", "createdAt": "2020-09-15T13:37:31Z", "author": {"login": "valfirst"}, "path": "vividus-plugin-web-app-to-rest-api/src/main/java/org/vividus/transformer/SiteMapTableTransformer.java", "diffHunk": "@@ -58,10 +58,17 @@\n                 Set<String> siteMapRelativeUrls;\n                 try\n                 {\n-                    siteMapRelativeUrls = filterResults(siteMapParser.parse(true, mainApplicationPage,\n+                    if (mainApplicationPage != null)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f30b776dc5b2727d1008a191cac673874b8e8c02"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f30b776dc5b2727d1008a191cac673874b8e8c02", "author": {"user": {"login": "TatianaTochko", "name": null}}, "url": "https://github.com/vividus-framework/vividus/commit/f30b776dc5b2727d1008a191cac673874b8e8c02", "committedDate": "2020-09-15T13:29:52Z", "message": "Fix issue 784\n\nFix NullPointerException"}, "afterCommit": {"oid": "1183dad26d1690f5261171c13ad9ca7c39232cef", "author": {"user": {"login": "TatianaTochko", "name": null}}, "url": "https://github.com/vividus-framework/vividus/commit/1183dad26d1690f5261171c13ad9ca7c39232cef", "committedDate": "2020-09-16T13:06:10Z", "message": "fix 784 issue"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkwMDIwMTY3", "url": "https://github.com/vividus-framework/vividus/pull/944#pullrequestreview-490020167", "createdAt": "2020-09-16T21:05:34Z", "commit": {"oid": "1183dad26d1690f5261171c13ad9ca7c39232cef"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQyMTowNTozNVrOHTEMiA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQyMToxNToxOVrOHTEfnQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTc1MzczNg==", "bodyText": "Put this info before the example\nAdd this info to each affected table transformer", "url": "https://github.com/vividus-framework/vividus/pull/944#discussion_r489753736", "createdAt": "2020-09-16T21:05:35Z", "author": {"login": "valfirst"}, "path": "docs/modules/plugins/pages/plugin-web-app-to-rest-api.adoc", "diffHunk": "@@ -92,3 +92,5 @@ Examples:\n Examples:\n {transformer=FROM_HEADLESS_CRAWLING, column=page-url}\n ----\n+==== Required envinroment properties\n+* `web-application.main-page-url` - defines main application page name", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1183dad26d1690f5261171c13ad9ca7c39232cef"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTc1NDIwOQ==", "bodyText": "Required envinroment properties-> Required properties", "url": "https://github.com/vividus-framework/vividus/pull/944#discussion_r489754209", "createdAt": "2020-09-16T21:06:28Z", "author": {"login": "valfirst"}, "path": "docs/modules/plugins/pages/plugin-web-app-to-rest-api.adoc", "diffHunk": "@@ -92,3 +92,5 @@ Examples:\n Examples:\n {transformer=FROM_HEADLESS_CRAWLING, column=page-url}\n ----\n+==== Required envinroment properties", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1183dad26d1690f5261171c13ad9ca7c39232cef"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTc1ODYyMQ==", "bodyText": "I believe there is no reason to check the value each time the method invoked, consider caching the result (Suppliers.memoize?)", "url": "https://github.com/vividus-framework/vividus/pull/944#discussion_r489758621", "createdAt": "2020-09-16T21:15:19Z", "author": {"login": "valfirst"}, "path": "vividus-plugin-web-app-to-rest-api/src/main/java/org/vividus/transformer/AbstractFetchingUrlsTableTransformer.java", "diffHunk": "@@ -109,7 +111,9 @@ public void setHttpRedirectsProvider(HttpRedirectsProvider httpRedirectsProvider\n \n     protected URI getMainApplicationPageUri()\n     {\n-        return webApplicationConfiguration.getMainApplicationPageUrl();\n+        URI mainApplicationPageUrl = webApplicationConfiguration.getMainApplicationPageUrl();\n+        isTrue(mainApplicationPageUrl != null, \"URL of the main application page should be non-blank\");\n+        return mainApplicationPageUrl;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1183dad26d1690f5261171c13ad9ca7c39232cef"}, "originalPosition": 16}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkwNzA1MDcw", "url": "https://github.com/vividus-framework/vividus/pull/944#pullrequestreview-490705070", "createdAt": "2020-09-17T15:11:34Z", "commit": {"oid": "afc374a98b88e2d59d271e9605b31ea1896c60df"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xN1QxNToxMTozNVrOHTnbwA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xN1QxNToxMjozNVrOHTnemg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDMzMTA3Mg==", "bodyText": "name -> URL", "url": "https://github.com/vividus-framework/vividus/pull/944#discussion_r490331072", "createdAt": "2020-09-17T15:11:35Z", "author": {"login": "valfirst"}, "path": "docs/modules/plugins/pages/plugin-web-app-to-rest-api.adoc", "diffHunk": "@@ -48,7 +48,8 @@ implementation(group: 'org.vividus', name: 'vividus-plugin-web-app-to-rest-api',\n |`false`\n |defines whether urls that has redirect to the one that has already been included in the table are excluded from the table\n |===\n-\n+==== Required properties\n+* `web-application.main-page-url` - defines main application page name", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "afc374a98b88e2d59d271e9605b31ea1896c60df"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDMzMTI4NQ==", "bodyText": "name -> URL", "url": "https://github.com/vividus-framework/vividus/pull/944#discussion_r490331285", "createdAt": "2020-09-17T15:11:51Z", "author": {"login": "valfirst"}, "path": "docs/modules/plugins/pages/plugin-web-app-to-rest-api.adoc", "diffHunk": "@@ -86,9 +87,12 @@ Examples:\n |`false`\n |defines whether urls that has redirect to the one that has already been included in the table are excluded from the table\n |===\n+==== Required properties\n+* `web-application.main-page-url` - defines main application page name", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "afc374a98b88e2d59d271e9605b31ea1896c60df"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDMzMTM5OQ==", "bodyText": "useless change", "url": "https://github.com/vividus-framework/vividus/pull/944#discussion_r490331399", "createdAt": "2020-09-17T15:12:00Z", "author": {"login": "valfirst"}, "path": "docs/modules/plugins/pages/plugin-web-app-to-rest-api.adoc", "diffHunk": "@@ -86,9 +87,12 @@ Examples:\n |`false`\n |defines whether urls that has redirect to the one that has already been included in the table are excluded from the table\n |===\n+==== Required properties\n+* `web-application.main-page-url` - defines main application page name\n \n .Usage example\n ----\n Examples:\n {transformer=FROM_HEADLESS_CRAWLING, column=page-url}\n ----\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "afc374a98b88e2d59d271e9605b31ea1896c60df"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDMzMTgwMg==", "bodyText": "mainApplicationPageUriSupplier", "url": "https://github.com/vividus-framework/vividus/pull/944#discussion_r490331802", "createdAt": "2020-09-17T15:12:35Z", "author": {"login": "valfirst"}, "path": "vividus-plugin-web-app-to-rest-api/src/main/java/org/vividus/transformer/AbstractFetchingUrlsTableTransformer.java", "diffHunk": "@@ -42,6 +47,12 @@\n     private WebApplicationConfiguration webApplicationConfiguration;\n     private HttpRedirectsProvider httpRedirectsProvider;\n     private boolean filterRedirects;\n+    private final Supplier<URI> pageURLSupplier = Suppliers.memoize(() ->", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "afc374a98b88e2d59d271e9605b31ea1896c60df"}, "originalPosition": 24}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "afc374a98b88e2d59d271e9605b31ea1896c60df", "author": {"user": {"login": "TatianaTochko", "name": null}}, "url": "https://github.com/vividus-framework/vividus/commit/afc374a98b88e2d59d271e9605b31ea1896c60df", "committedDate": "2020-09-17T12:48:53Z", "message": "Update fix via comments"}, "afterCommit": {"oid": "f735675672f572571fed775bfab55eee7e9dcc51", "author": {"user": {"login": "TatianaTochko", "name": null}}, "url": "https://github.com/vividus-framework/vividus/commit/f735675672f572571fed775bfab55eee7e9dcc51", "committedDate": "2020-09-18T10:15:37Z", "message": "Fix 784 issue"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkxMzUxNDI2", "url": "https://github.com/vividus-framework/vividus/pull/944#pullrequestreview-491351426", "createdAt": "2020-09-18T10:45:34Z", "commit": {"oid": "f735675672f572571fed775bfab55eee7e9dcc51"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkxMzUzODQy", "url": "https://github.com/vividus-framework/vividus/pull/944#pullrequestreview-491353842", "createdAt": "2020-09-18T10:49:40Z", "commit": {"oid": "f735675672f572571fed775bfab55eee7e9dcc51"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkxMzY2NjUz", "url": "https://github.com/vividus-framework/vividus/pull/944#pullrequestreview-491366653", "createdAt": "2020-09-18T11:09:12Z", "commit": {"oid": "f735675672f572571fed775bfab55eee7e9dcc51"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xOFQxMTowOToxM1rOHUIjoA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xOFQxMTowOToxM1rOHUIjoA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDg3Mzc2MA==", "bodyText": "Could you please refactor to check in one place?\nWe have a similar check here: https://github.com/vividus-framework/vividus/blob/master/vividus-plugin-web-app/src/main/java/org/vividus/bdd/steps/ui/web/PageSteps.java#L92-L99", "url": "https://github.com/vividus-framework/vividus/pull/944#discussion_r490873760", "createdAt": "2020-09-18T11:09:13Z", "author": {"login": "ikalinin1"}, "path": "vividus-plugin-web-app-to-rest-api/src/main/java/org/vividus/transformer/AbstractFetchingUrlsTableTransformer.java", "diffHunk": "@@ -42,6 +47,12 @@\n     private WebApplicationConfiguration webApplicationConfiguration;\n     private HttpRedirectsProvider httpRedirectsProvider;\n     private boolean filterRedirects;\n+    private final Supplier<URI> mainApplicationPageUriSupplier = Suppliers.memoize(() ->\n+    {\n+        URI mainApplicationPageUrl = webApplicationConfiguration.getMainApplicationPageUrl();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f735675672f572571fed775bfab55eee7e9dcc51"}, "originalPosition": 26}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a082e66d22d25de3b9943a6353cc083afc3ea542", "author": {"user": {"login": "TatianaTochko", "name": null}}, "url": "https://github.com/vividus-framework/vividus/commit/a082e66d22d25de3b9943a6353cc083afc3ea542", "committedDate": "2020-09-29T10:41:02Z", "message": "Merge branch 'issue784' of https://github.com/TatianaTochko/vividus into issue784"}, "afterCommit": {"oid": "dcec0c76149d978d7722c24a59f5b72f0e7de248", "author": {"user": {"login": "TatianaTochko", "name": null}}, "url": "https://github.com/vividus-framework/vividus/commit/dcec0c76149d978d7722c24a59f5b72f0e7de248", "committedDate": "2020-09-29T14:19:48Z", "message": "Fix issue 784: main page url is missing in properties\n\nIt is impossible to run stories if one story is set to be skipped where main page url is missing in properties. Fix NPE"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk4NjM1NTk5", "url": "https://github.com/vividus-framework/vividus/pull/944#pullrequestreview-498635599", "createdAt": "2020-09-29T15:48:44Z", "commit": {"oid": "dcec0c76149d978d7722c24a59f5b72f0e7de248"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQxNTo0ODo0NFrOHZ0e4g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQxNTo1MTo1M1rOHZ0r9g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjgzNjMyMg==", "bodyText": "invalid change", "url": "https://github.com/vividus-framework/vividus/pull/944#discussion_r496836322", "createdAt": "2020-09-29T15:48:44Z", "author": {"login": "valfirst"}, "path": "vividus-plugin-web-app/src/main/resources/properties/profile/web/profile.properties", "diffHunk": "@@ -37,7 +37,7 @@ environment-configurer.profile.proxy=#{${proxy.enabled} ? 'ON' : 'OFF'}\n system.wdm.gitHubTokenName=Vividus WebDriverManager\n system.wdm.gitHubTokenSecret=4733c6adb72f077770a72774c012b070ad4e37eb\n \n-web-application.main-page-url=\n+web-application.main-page-url=https://example.org/", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dcec0c76149d978d7722c24a59f5b72f0e7de248"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjgzOTY3MA==", "bodyText": "it won't work in this way, because Supplier is shared across threads now, but configuration storage is not, it may lead to wrong URL returned from the cache", "url": "https://github.com/vividus-framework/vividus/pull/944#discussion_r496839670", "createdAt": "2020-09-29T15:51:53Z", "author": {"login": "valfirst"}, "path": "vividus-plugin-web-app/src/main/java/org/vividus/ui/web/configuration/WebApplicationConfiguration.java", "diffHunk": "@@ -29,11 +34,18 @@\n     private int tabletScreenResolutionWidthThreshold;\n     private String applicationEnvironmentType;\n     private final ThreadLocal<ConfigurationStorage> configurationStorage;\n+    private final Supplier<URI> mainApplicationPageUriSupplier;\n \n     public WebApplicationConfiguration(String mainApplicationPageUrlString, AuthenticationMode authenticationMode)\n     {\n         configurationStorage = ThreadLocal.withInitial(() ->\n             new ConfigurationStorage(mainApplicationPageUrlString, authenticationMode));\n+        mainApplicationPageUriSupplier = Suppliers.memoize(() ->\n+        {\n+            URI mainApplicationPageUrl = configurationStorage.get().getMainApplicationPageUri();\n+            isTrue(mainApplicationPageUrl != null, \"URL of the main application page should be non-blank\");\n+            return mainApplicationPageUrl;\n+        });", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dcec0c76149d978d7722c24a59f5b72f0e7de248"}, "originalPosition": 28}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "dcec0c76149d978d7722c24a59f5b72f0e7de248", "author": {"user": {"login": "TatianaTochko", "name": null}}, "url": "https://github.com/vividus-framework/vividus/commit/dcec0c76149d978d7722c24a59f5b72f0e7de248", "committedDate": "2020-09-29T14:19:48Z", "message": "Fix issue 784: main page url is missing in properties\n\nIt is impossible to run stories if one story is set to be skipped where main page url is missing in properties. Fix NPE"}, "afterCommit": {"oid": "5b6dc6f8191c112e083d0a804e804d501f7ade81", "author": {"user": {"login": "TatianaTochko", "name": null}}, "url": "https://github.com/vividus-framework/vividus/commit/5b6dc6f8191c112e083d0a804e804d501f7ade81", "committedDate": "2020-09-30T15:02:38Z", "message": "Fix issue 784: main page url is missing in properties\n\nIt is impossible to run stories if one story is set to be skipped where main page url is missing in properties. Fix NPE"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAwMDkwMjU0", "url": "https://github.com/vividus-framework/vividus/pull/944#pullrequestreview-500090254", "createdAt": "2020-10-01T07:51:16Z", "commit": {"oid": "5b6dc6f8191c112e083d0a804e804d501f7ade81"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQwNzo1MToxN1rOHa-jDw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQwNzo1MjoxMFrOHa-k_A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODA0OTgwNw==", "bodyText": "to remove?", "url": "https://github.com/vividus-framework/vividus/pull/944#discussion_r498049807", "createdAt": "2020-10-01T07:51:17Z", "author": {"login": "valfirst"}, "path": "vividus-plugin-web-app-to-rest-api/src/test/java/org/vividus/bdd/steps/integration/ResourceCheckStepsTests.java", "diffHunk": "@@ -336,10 +327,10 @@ void shouldFilterResourceByRegExpCheckDesiredResourcesAnPostAttachment()\n     {\n         mockResourceValidator();\n         runExecutor();\n-        mockWebApplicationConfiguration();\n+        //mockWebApplicationConfiguration();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5b6dc6f8191c112e083d0a804e804d501f7ade81"}, "originalPosition": 71}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODA1MDMwMA==", "bodyText": "return mainApplicationPageUriSupplier.get() ?", "url": "https://github.com/vividus-framework/vividus/pull/944#discussion_r498050300", "createdAt": "2020-10-01T07:52:10Z", "author": {"login": "valfirst"}, "path": "vividus-plugin-web-app/src/main/java/org/vividus/ui/web/configuration/WebApplicationConfiguration.java", "diffHunk": "@@ -128,7 +139,7 @@ public void setApplicationEnvironmentType(String applicationEnvironmentType)\n \n         private URI getMainApplicationPageUri()\n         {\n-            return mainApplicationPageUri;\n+            return Optional.ofNullable(mainApplicationPageUriSupplier.get()).get();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5b6dc6f8191c112e083d0a804e804d501f7ade81"}, "originalPosition": 31}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cdc38316a5f8b5e3926980570e55c5a50c6aa5aa", "author": {"user": {"login": "TatianaTochko", "name": null}}, "url": "https://github.com/vividus-framework/vividus/commit/cdc38316a5f8b5e3926980570e55c5a50c6aa5aa", "committedDate": "2020-10-01T09:13:42Z", "message": "Fix issue 784: main page url is missing in properties\n\nIt is impossible to run stories if one story is set to be skipped where main page url is missing in properties. Fix NPE"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5b6dc6f8191c112e083d0a804e804d501f7ade81", "author": {"user": {"login": "TatianaTochko", "name": null}}, "url": "https://github.com/vividus-framework/vividus/commit/5b6dc6f8191c112e083d0a804e804d501f7ade81", "committedDate": "2020-09-30T15:02:38Z", "message": "Fix issue 784: main page url is missing in properties\n\nIt is impossible to run stories if one story is set to be skipped where main page url is missing in properties. Fix NPE"}, "afterCommit": {"oid": "cdc38316a5f8b5e3926980570e55c5a50c6aa5aa", "author": {"user": {"login": "TatianaTochko", "name": null}}, "url": "https://github.com/vividus-framework/vividus/commit/cdc38316a5f8b5e3926980570e55c5a50c6aa5aa", "committedDate": "2020-10-01T09:13:42Z", "message": "Fix issue 784: main page url is missing in properties\n\nIt is impossible to run stories if one story is set to be skipped where main page url is missing in properties. Fix NPE"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAwMTcyMjY4", "url": "https://github.com/vividus-framework/vividus/pull/944#pullrequestreview-500172268", "createdAt": "2020-10-01T09:35:29Z", "commit": {"oid": "cdc38316a5f8b5e3926980570e55c5a50c6aa5aa"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAwMTc0Njgw", "url": "https://github.com/vividus-framework/vividus/pull/944#pullrequestreview-500174680", "createdAt": "2020-10-01T09:38:25Z", "commit": {"oid": "cdc38316a5f8b5e3926980570e55c5a50c6aa5aa"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAwMTg0ODM5", "url": "https://github.com/vividus-framework/vividus/pull/944#pullrequestreview-500184839", "createdAt": "2020-10-01T09:51:41Z", "commit": {"oid": "cdc38316a5f8b5e3926980570e55c5a50c6aa5aa"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4945, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}