{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDUxMDcyNjg0", "number": 751, "title": "Switch cookies interaction to a WebDriver API", "bodyText": "Closes #645", "createdAt": "2020-07-17T11:53:12Z", "url": "https://github.com/vividus-framework/vividus/pull/751", "merged": true, "mergeCommit": {"oid": "5c9edb8ebfb955aa2941460c156f9e8db0be933a"}, "closed": true, "closedAt": "2020-12-26T13:42:25Z", "author": {"login": "irynaVakulchyk"}, "timelineItems": {"totalCount": 17, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc2rt_ugFqTQ1MTMyNzA0NA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdpsb3BgH2gAyNDUxMDcyNjg0OjliYTk4OGE0MWVmYTNmYzc2ODc3NzhjZDA4ODE0OWJmYTAyMmQ5MjA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxMzI3MDQ0", "url": "https://github.com/vividus-framework/vividus/pull/751#pullrequestreview-451327044", "createdAt": "2020-07-20T06:29:52Z", "commit": {"oid": "b27c6314af50c29a43f000838a4629636991d276"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQwNjoyOTo1MlrOGz60ZA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQwNjozMzo1NVrOGz686w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzA5NDI0NA==", "bodyText": "@epic vividus-plugin-web-app", "url": "https://github.com/vividus-framework/vividus/pull/751#discussion_r457094244", "createdAt": "2020-07-20T06:29:52Z", "author": {"login": "valfirst"}, "path": "vividus-tests/src/main/resources/story/integration/HttpCookieManagerTest.story", "diffHunk": "@@ -0,0 +1,19 @@\n+Description: Integration tests for CookieManager functionality\n+\n+Meta:\n+    @epic vividus-plugin-rest-api", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b27c6314af50c29a43f000838a4629636991d276"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzA5NDU5Nw==", "bodyText": "Description: Integration tests for cookie management in web application", "url": "https://github.com/vividus-framework/vividus/pull/751#discussion_r457094597", "createdAt": "2020-07-20T06:30:26Z", "author": {"login": "valfirst"}, "path": "vividus-tests/src/main/resources/story/integration/HttpCookieManagerTest.story", "diffHunk": "@@ -0,0 +1,19 @@\n+Description: Integration tests for CookieManager functionality", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b27c6314af50c29a43f000838a4629636991d276"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzA5NTAwMg==", "bodyText": "Rename story: HttpCookieManagerTest.story -> WebCookieSteps.story", "url": "https://github.com/vividus-framework/vividus/pull/751#discussion_r457095002", "createdAt": "2020-07-20T06:31:12Z", "author": {"login": "valfirst"}, "path": "vividus-tests/src/main/resources/story/integration/HttpCookieManagerTest.story", "diffHunk": "@@ -0,0 +1,19 @@\n+Description: Integration tests for CookieManager functionality", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b27c6314af50c29a43f000838a4629636991d276"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzA5NTcyNw==", "bodyText": "I believe it should be enough to set only one cookie", "url": "https://github.com/vividus-framework/vividus/pull/751#discussion_r457095727", "createdAt": "2020-07-20T06:32:30Z", "author": {"login": "valfirst"}, "path": "vividus-tests/src/main/resources/story/integration/HttpCookieManagerTest.story", "diffHunk": "@@ -0,0 +1,19 @@\n+Description: Integration tests for CookieManager functionality\n+\n+Meta:\n+    @epic vividus-plugin-rest-api\n+\n+Scenario: Verify step: \"I set all cookies for current domain:$parameters\"\n+Given I am on the main application page\n+When I set all cookies for current domain:\n+|cookieName |cookieValue |path|\n+|cookieName1|cookieValue1|/   |\n+|cookieName2|cookieValue2|/   |\n+Then a cookie with the name 'cookieName1' is set\n+Then a cookie with the name 'cookieName2' is set", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b27c6314af50c29a43f000838a4629636991d276"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzA5NjA0Nw==", "bodyText": "This scenario depends on the previous one, please make them atomic", "url": "https://github.com/vividus-framework/vividus/pull/751#discussion_r457096047", "createdAt": "2020-07-20T06:33:06Z", "author": {"login": "valfirst"}, "path": "vividus-tests/src/main/resources/story/integration/HttpCookieManagerTest.story", "diffHunk": "@@ -0,0 +1,19 @@\n+Description: Integration tests for CookieManager functionality\n+\n+Meta:\n+    @epic vividus-plugin-rest-api\n+\n+Scenario: Verify step: \"I set all cookies for current domain:$parameters\"\n+Given I am on the main application page\n+When I set all cookies for current domain:\n+|cookieName |cookieValue |path|\n+|cookieName1|cookieValue1|/   |\n+|cookieName2|cookieValue2|/   |\n+Then a cookie with the name 'cookieName1' is set\n+Then a cookie with the name 'cookieName2' is set\n+\n+Scenario: Verify step: \"I remove a cookie with the name '$cookieName' from the current domain\"\n+When I remove a cookie with the name 'cookieName1' from the current domain\n+When I remove a cookie with the name 'cookieName2' from the current domain", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b27c6314af50c29a43f000838a4629636991d276"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzA5NjM1OQ==", "bodyText": "...Verify step: \"When I...", "url": "https://github.com/vividus-framework/vividus/pull/751#discussion_r457096359", "createdAt": "2020-07-20T06:33:45Z", "author": {"login": "valfirst"}, "path": "vividus-tests/src/main/resources/story/integration/HttpCookieManagerTest.story", "diffHunk": "@@ -0,0 +1,19 @@\n+Description: Integration tests for CookieManager functionality\n+\n+Meta:\n+    @epic vividus-plugin-rest-api\n+\n+Scenario: Verify step: \"I set all cookies for current domain:$parameters\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b27c6314af50c29a43f000838a4629636991d276"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzA5NjQyNw==", "bodyText": "...Verify step: \"When I...", "url": "https://github.com/vividus-framework/vividus/pull/751#discussion_r457096427", "createdAt": "2020-07-20T06:33:55Z", "author": {"login": "valfirst"}, "path": "vividus-tests/src/main/resources/story/integration/HttpCookieManagerTest.story", "diffHunk": "@@ -0,0 +1,19 @@\n+Description: Integration tests for CookieManager functionality\n+\n+Meta:\n+    @epic vividus-plugin-rest-api\n+\n+Scenario: Verify step: \"I set all cookies for current domain:$parameters\"\n+Given I am on the main application page\n+When I set all cookies for current domain:\n+|cookieName |cookieValue |path|\n+|cookieName1|cookieValue1|/   |\n+|cookieName2|cookieValue2|/   |\n+Then a cookie with the name 'cookieName1' is set\n+Then a cookie with the name 'cookieName2' is set\n+\n+Scenario: Verify step: \"I remove a cookie with the name '$cookieName' from the current domain\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b27c6314af50c29a43f000838a4629636991d276"}, "originalPosition": 15}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b27c6314af50c29a43f000838a4629636991d276", "author": {"user": null}, "url": "https://github.com/vividus-framework/vividus/commit/b27c6314af50c29a43f000838a4629636991d276", "committedDate": "2020-07-17T11:34:42Z", "message": "Switch cookies interaction to a WebDriver API"}, "afterCommit": {"oid": "5897c5ca7dc4123eedd91fa44908e0d3a4723957", "author": {"user": null}, "url": "https://github.com/vividus-framework/vividus/commit/5897c5ca7dc4123eedd91fa44908e0d3a4723957", "committedDate": "2020-07-20T08:59:15Z", "message": "Switch cookies interaction to a WebDriver API"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxNDMxMjAx", "url": "https://github.com/vividus-framework/vividus/pull/751#pullrequestreview-451431201", "createdAt": "2020-07-20T09:12:38Z", "commit": {"oid": "5897c5ca7dc4123eedd91fa44908e0d3a4723957"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQwOToxMjozOFrOG0Bo-A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQwOToxMjozOFrOG0Bo-A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzIwNjAwOA==", "bodyText": "logger.atInfo\njust cookie without toStr", "url": "https://github.com/vividus-framework/vividus/pull/751#discussion_r457206008", "createdAt": "2020-07-20T09:12:38Z", "author": {"login": "uarlouski"}, "path": "vividus-plugin-web-app/src/main/java/org/vividus/ui/web/action/CookieManager.java", "diffHunk": "@@ -65,43 +59,24 @@ public void addCookie(String cookieName, String cookieValue, String path, URI ur\n \n     private void executeAddCookieScript(String cookieName, String cookieValue, String path, String domain)\n     {\n-        String cookie = String.format(JS_COOKIE_FORMAT, cookieName, cookieValue, path, domain);\n-        LOGGER.debug(\"Adding cookie: {}\", cookie);\n-        javascriptActions.executeScript(cookie);\n+        Cookie cookie = new Cookie.Builder(cookieName, cookieValue)\n+                .domain(\".\" + domain)\n+                .path(path)\n+                .build();\n+        LOGGER.info(\"Adding cookie: {}\", cookie.toString());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5897c5ca7dc4123eedd91fa44908e0d3a4723957"}, "originalPosition": 31}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxNDMyNTUx", "url": "https://github.com/vividus-framework/vividus/pull/751#pullrequestreview-451432551", "createdAt": "2020-07-20T09:14:26Z", "commit": {"oid": "5897c5ca7dc4123eedd91fa44908e0d3a4723957"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQwOToxNDoyNlrOG0BuMg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQwOToxNDoyNlrOG0BuMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzIwNzM0Ng==", "bodyText": "please use values different than parameter names", "url": "https://github.com/vividus-framework/vividus/pull/751#discussion_r457207346", "createdAt": "2020-07-20T09:14:26Z", "author": {"login": "uarlouski"}, "path": "vividus-tests/src/main/resources/story/integration/WebCookieSteps.story", "diffHunk": "@@ -0,0 +1,19 @@\n+Description: Integration tests for cookie management in web application\n+\n+Meta:\n+    @epic vividus-plugin-web-app\n+\n+Scenario: Verify step: \"When I set all cookies for current domain:$parameters\"\n+Given I am on the main application page\n+When I set all cookies for current domain:\n+|cookieName |cookieValue |path|\n+|cookieName1|cookieValue1|/   |\n+Then a cookie with the name 'cookieName1' is set\n+\n+Scenario: Verify step: \"When I remove a cookie with the name '$cookieName' from the current domain\"\n+Given I am on the main application page\n+When I set all cookies for current domain:\n+|cookieName |cookieValue |path|\n+|cookieName |cookieValue |/   |", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5897c5ca7dc4123eedd91fa44908e0d3a4723957"}, "originalPosition": 17}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5897c5ca7dc4123eedd91fa44908e0d3a4723957", "author": {"user": null}, "url": "https://github.com/vividus-framework/vividus/commit/5897c5ca7dc4123eedd91fa44908e0d3a4723957", "committedDate": "2020-07-20T08:59:15Z", "message": "Switch cookies interaction to a WebDriver API"}, "afterCommit": {"oid": "db8d991f42489a13efd22e6016c4b2751ead9e48", "author": {"user": null}, "url": "https://github.com/vividus-framework/vividus/commit/db8d991f42489a13efd22e6016c4b2751ead9e48", "committedDate": "2020-07-20T09:44:25Z", "message": "Switch cookies interaction to a WebDriver API"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxNTU4NjIw", "url": "https://github.com/vividus-framework/vividus/pull/751#pullrequestreview-451558620", "createdAt": "2020-07-20T12:27:38Z", "commit": {"oid": "db8d991f42489a13efd22e6016c4b2751ead9e48"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxNjk4OTE1", "url": "https://github.com/vividus-framework/vividus/pull/751#pullrequestreview-451698915", "createdAt": "2020-07-20T15:09:06Z", "commit": {"oid": "db8d991f42489a13efd22e6016c4b2751ead9e48"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUyMTkzNDMy", "url": "https://github.com/vividus-framework/vividus/pull/751#pullrequestreview-452193432", "createdAt": "2020-07-21T07:27:21Z", "commit": {"oid": "db8d991f42489a13efd22e6016c4b2751ead9e48"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQwNzoyNzoyMVrOG0rf-w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQwNzoyNzoyMVrOG0rf-w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzg5MTgzNQ==", "bodyText": "Why it is nor required?\nIf it still not, step description should be updated", "url": "https://github.com/vividus-framework/vividus/pull/751#discussion_r457891835", "createdAt": "2020-07-21T07:27:21Z", "author": {"login": "ikalinin1"}, "path": "vividus-plugin-web-app/src/main/java/org/vividus/bdd/steps/ui/web/CookieSteps.java", "diffHunk": "@@ -194,7 +194,6 @@ public void setAllCookies(ExamplesTable parameters)\n         {\n             cookieManager.addCookie(row.get(\"cookieName\"), row.get(\"cookieValue\"), row.get(\"path\"), currentUrl);\n         });\n-        navigateActions.refresh();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "db8d991f42489a13efd22e6016c4b2751ead9e48"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "36206e29485c037172f07918cebde5d093ef31f2", "author": {"user": null}, "url": "https://github.com/vividus-framework/vividus/commit/36206e29485c037172f07918cebde5d093ef31f2", "committedDate": "2020-07-30T12:37:14Z", "message": "Switch cookies interaction to a WebDriver API"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "db8d991f42489a13efd22e6016c4b2751ead9e48", "author": {"user": null}, "url": "https://github.com/vividus-framework/vividus/commit/db8d991f42489a13efd22e6016c4b2751ead9e48", "committedDate": "2020-07-20T09:44:25Z", "message": "Switch cookies interaction to a WebDriver API"}, "afterCommit": {"oid": "36206e29485c037172f07918cebde5d093ef31f2", "author": {"user": null}, "url": "https://github.com/vividus-framework/vividus/commit/36206e29485c037172f07918cebde5d093ef31f2", "committedDate": "2020-07-30T12:37:14Z", "message": "Switch cookies interaction to a WebDriver API"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU4OTc5MDk2", "url": "https://github.com/vividus-framework/vividus/pull/751#pullrequestreview-458979096", "createdAt": "2020-07-31T07:46:50Z", "commit": {"oid": "36206e29485c037172f07918cebde5d093ef31f2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bad88ceffbf3409568b930db82ce74fb9ad49eea", "author": {"user": {"login": "valfirst", "name": "Valery Yatsynovich"}}, "url": "https://github.com/vividus-framework/vividus/commit/bad88ceffbf3409568b930db82ce74fb9ad49eea", "committedDate": "2020-12-24T15:31:57Z", "message": "[vividus-plugin-web-app] Remove Android 6 and 7 profiles (#1269)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e56d3efa903f0a8da1ab675a1d4a581e51b3e900", "author": {"user": {"login": "valfirst", "name": "Valery Yatsynovich"}}, "url": "https://github.com/vividus-framework/vividus/commit/e56d3efa903f0a8da1ab675a1d4a581e51b3e900", "committedDate": "2020-12-24T15:35:25Z", "message": "Merge branch 'master' into cookie"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a0c8b97122cab2262190cb067d559a9fcdfb1ae9", "author": {"user": {"login": "valfirst", "name": "Valery Yatsynovich"}}, "url": "https://github.com/vividus-framework/vividus/commit/a0c8b97122cab2262190cb067d559a9fcdfb1ae9", "committedDate": "2020-12-24T15:50:33Z", "message": "Fix PMD violations in unit tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1cb4f0096b993a0126fc80fec244967639a78a39", "author": {"user": {"login": "valfirst", "name": "Valery Yatsynovich"}}, "url": "https://github.com/vividus-framework/vividus/commit/1cb4f0096b993a0126fc80fec244967639a78a39", "committedDate": "2020-12-24T16:01:43Z", "message": "Fix CheckStyle violations"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "02ec564ad5dbfae6bf7f99e5975e8de3c244dd1c", "author": {"user": {"login": "valfirst", "name": "Valery Yatsynovich"}}, "url": "https://github.com/vividus-framework/vividus/commit/02ec564ad5dbfae6bf7f99e5975e8de3c244dd1c", "committedDate": "2020-12-25T06:23:25Z", "message": "Fix one more PMD violation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9ba988a41efa3fc7687778cd088149bfa022d920", "author": {"user": {"login": "valfirst", "name": "Valery Yatsynovich"}}, "url": "https://github.com/vividus-framework/vividus/commit/9ba988a41efa3fc7687778cd088149bfa022d920", "committedDate": "2020-12-25T18:14:23Z", "message": "Fix one more CheckStyle violation"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 146, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}