{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDgxNDk2MDk0", "number": 903, "title": "[extension-selenium] Add ability to configure application lifecycle", "bodyText": "Closes #866", "createdAt": "2020-09-07T15:41:12Z", "url": "https://github.com/vividus-framework/vividus/pull/903", "merged": true, "mergeCommit": {"oid": "d7b47d98b81f7a5459107ffa1bf0fd787780066a"}, "closed": true, "closedAt": "2020-09-09T14:46:43Z", "author": {"login": "valfirst"}, "timelineItems": {"totalCount": 19, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdGxtH8gFqTQ4MzgzMTQ5OQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdHNI_7AFqTQ4NTA3MzkxOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgzODMxNDk5", "url": "https://github.com/vividus-framework/vividus/pull/903#pullrequestreview-483831499", "createdAt": "2020-09-08T06:35:24Z", "commit": {"oid": "0f4252e0c033255cd28f4428e0574f819e705d07"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQwNjozNToyNFrOHOOoFg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQwNjozNToyNFrOHOOoFg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDY4MTc1MA==", "bodyText": "Looks confusing to me. It is a driver's scope, not the application. Could it be driver-life-scope", "url": "https://github.com/vividus-framework/vividus/pull/903#discussion_r484681750", "createdAt": "2020-09-08T06:35:24Z", "author": {"login": "ikalinin1"}, "path": "vividus-plugin-web-app/src/main/resources/properties/profile/web/profile.properties", "diffHunk": "@@ -42,6 +42,7 @@ web-application.tablet-resolution-width-threshold=1024\n web-application.phone-resolution-width-threshold=640\n web-application.environment-type=test\n web-application.authentication-mode=URL\n+web-application.life-scope=story", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0f4252e0c033255cd28f4428e0574f819e705d07"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgzODMxNTc2", "url": "https://github.com/vividus-framework/vividus/pull/903#pullrequestreview-483831576", "createdAt": "2020-09-08T06:35:31Z", "commit": {"oid": "0f4252e0c033255cd28f4428e0574f819e705d07"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgzODMyMjQ2", "url": "https://github.com/vividus-framework/vividus/pull/903#pullrequestreview-483832246", "createdAt": "2020-09-08T06:36:47Z", "commit": {"oid": "0f4252e0c033255cd28f4428e0574f819e705d07"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQwNjozNjo0N1rOHOOqZg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQwNjozNjo0N1rOHOOqZg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDY4MjM0Mg==", "bodyText": "I propose to throw an exception in case of null, because it's not clear what's the actual behavior user expecting", "url": "https://github.com/vividus-framework/vividus/pull/903#discussion_r484682342", "createdAt": "2020-09-08T06:36:47Z", "author": {"login": "ikalinin1"}, "path": "vividus-extension-selenium/src/main/java/org/vividus/bdd/steps/WebDriverSetupSteps.java", "diffHunk": "@@ -52,8 +54,25 @@ public void beforeStory()\n         processMeta(bddRunContext.getRunningStory().getStory().getMeta());\n     }\n \n+    @AfterScenario(uponType = ScenarioType.ANY)\n+    public void afterScenario()\n+    {\n+        if (webDriverLifeScope == WebDriverLifeScope.SCENARIO)\n+        {\n+            stopWebDriver();\n+        }\n+    }\n+\n     @AfterStory\n     public void afterStory()\n+    {\n+        if (webDriverLifeScope == WebDriverLifeScope.STORY || webDriverLifeScope == null)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0f4252e0c033255cd28f4428e0574f819e705d07"}, "originalPosition": 43}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0f4252e0c033255cd28f4428e0574f819e705d07", "author": {"user": {"login": "valfirst", "name": "Valery Yatsynovich"}}, "url": "https://github.com/vividus-framework/vividus/commit/0f4252e0c033255cd28f4428e0574f819e705d07", "committedDate": "2020-09-07T15:40:29Z", "message": "[extension-selenium] Add ability to configure application lifecycle"}, "afterCommit": {"oid": "766885fe75bce1263aea14bdf19faafed5619da3", "author": {"user": {"login": "valfirst", "name": "Valery Yatsynovich"}}, "url": "https://github.com/vividus-framework/vividus/commit/766885fe75bce1263aea14bdf19faafed5619da3", "committedDate": "2020-09-08T15:28:52Z", "message": "[extension-selenium] Add ability to configure application lifecycle"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "766885fe75bce1263aea14bdf19faafed5619da3", "author": {"user": {"login": "valfirst", "name": "Valery Yatsynovich"}}, "url": "https://github.com/vividus-framework/vividus/commit/766885fe75bce1263aea14bdf19faafed5619da3", "committedDate": "2020-09-08T15:28:52Z", "message": "[extension-selenium] Add ability to configure application lifecycle"}, "afterCommit": {"oid": "1f5eb3b23f1e5e6042fde7d09bf5ccc9b7a489b5", "author": {"user": {"login": "valfirst", "name": "Valery Yatsynovich"}}, "url": "https://github.com/vividus-framework/vividus/commit/1f5eb3b23f1e5e6042fde7d09bf5ccc9b7a489b5", "committedDate": "2020-09-08T15:44:09Z", "message": "[extension-selenium] Add ability to configure application lifecycle"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1f5eb3b23f1e5e6042fde7d09bf5ccc9b7a489b5", "author": {"user": {"login": "valfirst", "name": "Valery Yatsynovich"}}, "url": "https://github.com/vividus-framework/vividus/commit/1f5eb3b23f1e5e6042fde7d09bf5ccc9b7a489b5", "committedDate": "2020-09-08T15:44:09Z", "message": "[extension-selenium] Add ability to configure application lifecycle"}, "afterCommit": {"oid": "e5588d4afd1c718d236f2286f155313e4dc51059", "author": {"user": {"login": "valfirst", "name": "Valery Yatsynovich"}}, "url": "https://github.com/vividus-framework/vividus/commit/e5588d4afd1c718d236f2286f155313e4dc51059", "committedDate": "2020-09-09T12:13:26Z", "message": "[extension-selenium] Add ability to configure application lifecycle"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e5588d4afd1c718d236f2286f155313e4dc51059", "author": {"user": {"login": "valfirst", "name": "Valery Yatsynovich"}}, "url": "https://github.com/vividus-framework/vividus/commit/e5588d4afd1c718d236f2286f155313e4dc51059", "committedDate": "2020-09-09T12:13:26Z", "message": "[extension-selenium] Add ability to configure application lifecycle"}, "afterCommit": {"oid": "d45ff2ff72dd1aa48e9ffca46e50171a63cda111", "author": {"user": {"login": "valfirst", "name": "Valery Yatsynovich"}}, "url": "https://github.com/vividus-framework/vividus/commit/d45ff2ff72dd1aa48e9ffca46e50171a63cda111", "committedDate": "2020-09-09T12:24:15Z", "message": "[extension-selenium] Add ability to configure application lifecycle"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d45ff2ff72dd1aa48e9ffca46e50171a63cda111", "author": {"user": {"login": "valfirst", "name": "Valery Yatsynovich"}}, "url": "https://github.com/vividus-framework/vividus/commit/d45ff2ff72dd1aa48e9ffca46e50171a63cda111", "committedDate": "2020-09-09T12:24:15Z", "message": "[extension-selenium] Add ability to configure application lifecycle"}, "afterCommit": {"oid": "96d4bbd69f83dca08bb0661ddcce3576a0ebe0c7", "author": {"user": {"login": "valfirst", "name": "Valery Yatsynovich"}}, "url": "https://github.com/vividus-framework/vividus/commit/96d4bbd69f83dca08bb0661ddcce3576a0ebe0c7", "committedDate": "2020-09-09T12:25:55Z", "message": "[extension-selenium] Add ability to configure application lifecycle"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "96d4bbd69f83dca08bb0661ddcce3576a0ebe0c7", "author": {"user": {"login": "valfirst", "name": "Valery Yatsynovich"}}, "url": "https://github.com/vividus-framework/vividus/commit/96d4bbd69f83dca08bb0661ddcce3576a0ebe0c7", "committedDate": "2020-09-09T12:25:55Z", "message": "[extension-selenium] Add ability to configure application lifecycle"}, "afterCommit": {"oid": "bdeabf16a757461818989aecb4e97f82c46469f7", "author": {"user": {"login": "valfirst", "name": "Valery Yatsynovich"}}, "url": "https://github.com/vividus-framework/vividus/commit/bdeabf16a757461818989aecb4e97f82c46469f7", "committedDate": "2020-09-09T12:28:27Z", "message": "[extension-selenium] Add ability to configure application lifecycle"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bdeabf16a757461818989aecb4e97f82c46469f7", "author": {"user": {"login": "valfirst", "name": "Valery Yatsynovich"}}, "url": "https://github.com/vividus-framework/vividus/commit/bdeabf16a757461818989aecb4e97f82c46469f7", "committedDate": "2020-09-09T12:28:27Z", "message": "[extension-selenium] Add ability to configure application lifecycle"}, "afterCommit": {"oid": "80d308d44bd72665056d52673e9905b1bd71a369", "author": {"user": {"login": "valfirst", "name": "Valery Yatsynovich"}}, "url": "https://github.com/vividus-framework/vividus/commit/80d308d44bd72665056d52673e9905b1bd71a369", "committedDate": "2020-09-09T12:40:08Z", "message": "[extension-selenium] Add ability to configure application lifecycle"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "80d308d44bd72665056d52673e9905b1bd71a369", "author": {"user": {"login": "valfirst", "name": "Valery Yatsynovich"}}, "url": "https://github.com/vividus-framework/vividus/commit/80d308d44bd72665056d52673e9905b1bd71a369", "committedDate": "2020-09-09T12:40:08Z", "message": "[extension-selenium] Add ability to configure application lifecycle"}, "afterCommit": {"oid": "e2fe790a7250c2431899ff332ef72c851bc7ee4a", "author": {"user": {"login": "valfirst", "name": "Valery Yatsynovich"}}, "url": "https://github.com/vividus-framework/vividus/commit/e2fe790a7250c2431899ff332ef72c851bc7ee4a", "committedDate": "2020-09-09T12:57:37Z", "message": "[extension-selenium] Add ability to configure application lifecycle"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg0OTg0MDIx", "url": "https://github.com/vividus-framework/vividus/pull/903#pullrequestreview-484984021", "createdAt": "2020-09-09T13:02:57Z", "commit": {"oid": "e2fe790a7250c2431899ff332ef72c851bc7ee4a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg1MDAyMDY1", "url": "https://github.com/vividus-framework/vividus/pull/903#pullrequestreview-485002065", "createdAt": "2020-09-09T13:22:39Z", "commit": {"oid": "e2fe790a7250c2431899ff332ef72c851bc7ee4a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQxMzoyMjozOVrOHPHEqw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQxMzoyMjozOVrOHPHEqw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTYwNjU3MQ==", "bodyText": "Hmm what should I do if I get this error and I'm not aware what the \"Application session scope\" is? :)", "url": "https://github.com/vividus-framework/vividus/pull/903#discussion_r485606571", "createdAt": "2020-09-09T13:22:39Z", "author": {"login": "uarlouski"}, "path": "vividus-extension-selenium/src/main/java/org/vividus/bdd/steps/WebDriverSetupSteps.java", "diffHunk": "@@ -26,15 +29,18 @@\n import org.vividus.selenium.IWebDriverProvider;\n import org.vividus.selenium.manager.IWebDriverManagerContext;\n \n-public class VividusWebDriverSetupSteps\n+public class WebDriverSetupSteps\n {\n+    private final WebDriverSessionScope webDriverSessionScope;\n     private final IWebDriverProvider webDriverProvider;\n     private final IWebDriverManagerContext webDriverManagerContext;\n     private final IBddRunContext bddRunContext;\n \n-    public VividusWebDriverSetupSteps(IWebDriverProvider webDriverProvider,\n+    public WebDriverSetupSteps(WebDriverSessionScope webDriverSessionScope, IWebDriverProvider webDriverProvider,\n             IWebDriverManagerContext webDriverManagerContext, IBddRunContext bddRunContext)\n     {\n+        isTrue(webDriverSessionScope != null, \"Application session scope is not set\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e2fe790a7250c2431899ff332ef72c851bc7ee4a"}, "originalPosition": 26}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg1MDAzNDYz", "url": "https://github.com/vividus-framework/vividus/pull/903#pullrequestreview-485003463", "createdAt": "2020-09-09T13:24:06Z", "commit": {"oid": "e2fe790a7250c2431899ff332ef72c851bc7ee4a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQxMzoyNDowNlrOHPHI3A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQxMzoyNDowNlrOHPHI3A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTYwNzY0NA==", "bodyText": "life-scope -> session-scope and in previous doc", "url": "https://github.com/vividus-framework/vividus/pull/903#discussion_r485607644", "createdAt": "2020-09-09T13:24:06Z", "author": {"login": "uarlouski"}, "path": "docs/modules/plugins/partials/selenium-properties.adoc", "diffHunk": "@@ -0,0 +1,12 @@\n+|`{life-scope-property-base}.life-scope`", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e2fe790a7250c2431899ff332ef72c851bc7ee4a"}, "originalPosition": 1}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e2fe790a7250c2431899ff332ef72c851bc7ee4a", "author": {"user": {"login": "valfirst", "name": "Valery Yatsynovich"}}, "url": "https://github.com/vividus-framework/vividus/commit/e2fe790a7250c2431899ff332ef72c851bc7ee4a", "committedDate": "2020-09-09T12:57:37Z", "message": "[extension-selenium] Add ability to configure application lifecycle"}, "afterCommit": {"oid": "6d1e3614e385d8b9fb7b442f8b6cea22c21de7ae", "author": {"user": {"login": "valfirst", "name": "Valery Yatsynovich"}}, "url": "https://github.com/vividus-framework/vividus/commit/6d1e3614e385d8b9fb7b442f8b6cea22c21de7ae", "committedDate": "2020-09-09T14:03:38Z", "message": "[extension-selenium] Add ability to configure application lifecycle"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6d1e3614e385d8b9fb7b442f8b6cea22c21de7ae", "author": {"user": {"login": "valfirst", "name": "Valery Yatsynovich"}}, "url": "https://github.com/vividus-framework/vividus/commit/6d1e3614e385d8b9fb7b442f8b6cea22c21de7ae", "committedDate": "2020-09-09T14:03:38Z", "message": "[extension-selenium] Add ability to configure application lifecycle"}, "afterCommit": {"oid": "da90998df7face25736ac63811f3fe80bbe1b448", "author": {"user": {"login": "valfirst", "name": "Valery Yatsynovich"}}, "url": "https://github.com/vividus-framework/vividus/commit/da90998df7face25736ac63811f3fe80bbe1b448", "committedDate": "2020-09-09T14:09:29Z", "message": "[extension-selenium] Add ability to configure application lifecycle"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0b1a3b08bd51de06f7132cdd8d7d7cf0e911b93a", "author": {"user": {"login": "valfirst", "name": "Valery Yatsynovich"}}, "url": "https://github.com/vividus-framework/vividus/commit/0b1a3b08bd51de06f7132cdd8d7d7cf0e911b93a", "committedDate": "2020-09-09T14:22:32Z", "message": "[extension-selenium] Add ability to configure application lifecycle"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "da90998df7face25736ac63811f3fe80bbe1b448", "author": {"user": {"login": "valfirst", "name": "Valery Yatsynovich"}}, "url": "https://github.com/vividus-framework/vividus/commit/da90998df7face25736ac63811f3fe80bbe1b448", "committedDate": "2020-09-09T14:09:29Z", "message": "[extension-selenium] Add ability to configure application lifecycle"}, "afterCommit": {"oid": "0b1a3b08bd51de06f7132cdd8d7d7cf0e911b93a", "author": {"user": {"login": "valfirst", "name": "Valery Yatsynovich"}}, "url": "https://github.com/vividus-framework/vividus/commit/0b1a3b08bd51de06f7132cdd8d7d7cf0e911b93a", "committedDate": "2020-09-09T14:22:32Z", "message": "[extension-selenium] Add ability to configure application lifecycle"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg1MDczOTE5", "url": "https://github.com/vividus-framework/vividus/pull/903#pullrequestreview-485073919", "createdAt": "2020-09-09T14:33:19Z", "commit": {"oid": "0b1a3b08bd51de06f7132cdd8d7d7cf0e911b93a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 104, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}