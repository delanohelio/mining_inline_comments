{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM1MDY1NTE3", "number": 1209, "title": "[zephyr-exporter] Property for export executions with specific statuses", "bodyText": "", "createdAt": "2020-12-09T10:13:22Z", "url": "https://github.com/vividus-framework/vividus/pull/1209", "merged": true, "mergeCommit": {"oid": "78a254ad59dc7fafe73fc3797d7c3b2056cf2596"}, "closed": true, "closedAt": "2020-12-10T08:59:03Z", "author": {"login": "abudevich"}, "timelineItems": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdkcAYYAFqTU0ODAzMTUyNA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdkfwN_ABqjQwOTAyNjcxNzc=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ4MDMxNTI0", "url": "https://github.com/vividus-framework/vividus/pull/1209#pullrequestreview-548031524", "createdAt": "2020-12-09T10:16:16Z", "commit": {"oid": "7a5a197aacd4b6cd0b9fc07a443562fa80108630"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQxMDoxNjoxNlrOICM6mg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQxMDoxNjoxNlrOICM6mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTE3OTY3NA==", "bodyText": "statusesForExport sounds like we should export only test cases with such statuses, but if this is empty we export all test cases, maybe set some default value?", "url": "https://github.com/vividus-framework/vividus/pull/1209#discussion_r539179674", "createdAt": "2020-12-09T10:16:16Z", "author": {"login": "uarlouski"}, "path": "vividus-to-zephyr-exporter/src/main/java/org/vividus/zephyr/parser/TestCaseParser.java", "diffHunk": "@@ -62,10 +62,26 @@ public TestCaseParser(ZephyrExporterProperties zephyrExporterProperties)\n         {\n             testCasesForImporting.add(new TestCase(entry.getKey(), entry.getValue().first()));\n         }\n+        testCasesForImporting = filterByStatuses(testCasesForImporting);\n         LOGGER.info(\"Test cases for exporting to JIRA: {}\", testCasesForImporting);\n         return testCasesForImporting;\n     }\n \n+    private List<TestCase> filterByStatuses(List<TestCase> testCases)\n+    {\n+        List<TestCaseStatus> statusesForExport = zephyrExporterProperties.getStatusesForExport();\n+        if (statusesForExport.isEmpty())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7a5a197aacd4b6cd0b9fc07a443562fa80108630"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ4MDMxNzcz", "url": "https://github.com/vividus-framework/vividus/pull/1209#pullrequestreview-548031773", "createdAt": "2020-12-09T10:16:34Z", "commit": {"oid": "7a5a197aacd4b6cd0b9fc07a443562fa80108630"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQxMDoxNjozNFrOICM7dQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQxMDoxNjozNFrOICM7dQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTE3OTg5Mw==", "bodyText": "redundant else", "url": "https://github.com/vividus-framework/vividus/pull/1209#discussion_r539179893", "createdAt": "2020-12-09T10:16:34Z", "author": {"login": "uarlouski"}, "path": "vividus-to-zephyr-exporter/src/main/java/org/vividus/zephyr/parser/TestCaseParser.java", "diffHunk": "@@ -62,10 +62,26 @@ public TestCaseParser(ZephyrExporterProperties zephyrExporterProperties)\n         {\n             testCasesForImporting.add(new TestCase(entry.getKey(), entry.getValue().first()));\n         }\n+        testCasesForImporting = filterByStatuses(testCasesForImporting);\n         LOGGER.info(\"Test cases for exporting to JIRA: {}\", testCasesForImporting);\n         return testCasesForImporting;\n     }\n \n+    private List<TestCase> filterByStatuses(List<TestCase> testCases)\n+    {\n+        List<TestCaseStatus> statusesForExport = zephyrExporterProperties.getStatusesForExport();\n+        if (statusesForExport.isEmpty())\n+        {\n+            return testCases;\n+        }\n+        else", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7a5a197aacd4b6cd0b9fc07a443562fa80108630"}, "originalPosition": 16}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ4MDM5Mzcw", "url": "https://github.com/vividus-framework/vividus/pull/1209#pullrequestreview-548039370", "createdAt": "2020-12-09T10:25:34Z", "commit": {"oid": "7a5a197aacd4b6cd0b9fc07a443562fa80108630"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQxMDoyNTozNFrOICNTzw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQxMDoyNTo1M1rOICNUuA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTE4NjEyNw==", "bodyText": "zephyr.exporter.statuses-of-test-cases-to-add-to-execution", "url": "https://github.com/vividus-framework/vividus/pull/1209#discussion_r539186127", "createdAt": "2020-12-09T10:25:34Z", "author": {"login": "valfirst"}, "path": "vividus-to-zephyr-exporter/src/main/resources/application.properties", "diffHunk": "@@ -35,3 +35,5 @@ zephyr.statuses.PENDING=TEST NEEDS REWORK\n zephyr.statuses.UNKNOWN=PASSED WITH REMARKS\n zephyr.statuses.SKIPPED=SCHEDULED\n zephyr.statuses.PASSED=PASSED\n+\n+zephyr.exporter.statuses-for-export=", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7a5a197aacd4b6cd0b9fc07a443562fa80108630"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTE4NjM2MA==", "bodyText": "Importing -> Exporting", "url": "https://github.com/vividus-framework/vividus/pull/1209#discussion_r539186360", "createdAt": "2020-12-09T10:25:53Z", "author": {"login": "valfirst"}, "path": "vividus-to-zephyr-exporter/src/main/java/org/vividus/zephyr/parser/TestCaseParser.java", "diffHunk": "@@ -62,10 +62,26 @@ public TestCaseParser(ZephyrExporterProperties zephyrExporterProperties)\n         {\n             testCasesForImporting.add(new TestCase(entry.getKey(), entry.getValue().first()));\n         }\n+        testCasesForImporting = filterByStatuses(testCasesForImporting);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7a5a197aacd4b6cd0b9fc07a443562fa80108630"}, "originalPosition": 4}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7a5a197aacd4b6cd0b9fc07a443562fa80108630", "author": {"user": {"login": "abudevich", "name": null}}, "url": "https://github.com/vividus-framework/vividus/commit/7a5a197aacd4b6cd0b9fc07a443562fa80108630", "committedDate": "2020-12-09T09:52:29Z", "message": "[zephyr-exporter] Add ability to export executions with specific statuses"}, "afterCommit": {"oid": "2ff78dff2860b117e2e9bd582d04c38790ea9ca7", "author": {"user": {"login": "abudevich", "name": null}}, "url": "https://github.com/vividus-framework/vividus/commit/2ff78dff2860b117e2e9bd582d04c38790ea9ca7", "committedDate": "2020-12-09T11:47:28Z", "message": "[zephyr-exporter] Add ability to export executions with specific statuses"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ4MTM4MjQ3", "url": "https://github.com/vividus-framework/vividus/pull/1209#pullrequestreview-548138247", "createdAt": "2020-12-09T12:35:16Z", "commit": {"oid": "2ff78dff2860b117e2e9bd582d04c38790ea9ca7"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQxMjozNToxN1rOICSbOg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQxMjozNToxN1rOICSbOg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTI2OTk0Ng==", "bodyText": "TestCaseStatus testCaseStatus = entry.getValue().first();\nif (zephyrExporterProperties.getStatusesOfTestCasesToAddToExecution().contains(testCaseStatus))\n{\n    testCasesForExporting.add(new TestCase(entry.getKey(), testCaseStatus));\n}", "url": "https://github.com/vividus-framework/vividus/pull/1209#discussion_r539269946", "createdAt": "2020-12-09T12:35:17Z", "author": {"login": "valfirst"}, "path": "vividus-to-zephyr-exporter/src/main/java/org/vividus/zephyr/parser/TestCaseParser.java", "diffHunk": "@@ -57,13 +57,21 @@ public TestCaseParser(ZephyrExporterProperties zephyrExporterProperties)\n                 .collect(Collectors.groupingBy(TestCase::getKey,\n                         Collectors.mapping(TestCase::getStatus, Collectors.toCollection(TreeSet::new))));\n \n-        List<TestCase> testCasesForImporting = new ArrayList<>();\n+        List<TestCase> testCasesForExporting = new ArrayList<>();\n         for (Map.Entry<String, TreeSet<TestCaseStatus>> entry : testCasesMap.entrySet())\n         {\n-            testCasesForImporting.add(new TestCase(entry.getKey(), entry.getValue().first()));\n+            testCasesForExporting.add(new TestCase(entry.getKey(), entry.getValue().first()));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2ff78dff2860b117e2e9bd582d04c38790ea9ca7"}, "originalPosition": 9}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2ff78dff2860b117e2e9bd582d04c38790ea9ca7", "author": {"user": {"login": "abudevich", "name": null}}, "url": "https://github.com/vividus-framework/vividus/commit/2ff78dff2860b117e2e9bd582d04c38790ea9ca7", "committedDate": "2020-12-09T11:47:28Z", "message": "[zephyr-exporter] Add ability to export executions with specific statuses"}, "afterCommit": {"oid": "98f914bc7537b4cc1d77538c6e73edb72a18f039", "author": {"user": {"login": "abudevich", "name": null}}, "url": "https://github.com/vividus-framework/vividus/commit/98f914bc7537b4cc1d77538c6e73edb72a18f039", "committedDate": "2020-12-09T12:40:24Z", "message": "[zephyr-exporter] Add ability to export executions with specific statuses"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ4MTY2NzYz", "url": "https://github.com/vividus-framework/vividus/pull/1209#pullrequestreview-548166763", "createdAt": "2020-12-09T13:11:35Z", "commit": {"oid": "98f914bc7537b4cc1d77538c6e73edb72a18f039"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "98f914bc7537b4cc1d77538c6e73edb72a18f039", "author": {"user": {"login": "abudevich", "name": null}}, "url": "https://github.com/vividus-framework/vividus/commit/98f914bc7537b4cc1d77538c6e73edb72a18f039", "committedDate": "2020-12-09T12:40:24Z", "message": "[zephyr-exporter] Add ability to export executions with specific statuses"}, "afterCommit": {"oid": "5bd6214f43bb3e6ad95fc29d3ee02a961c6a34b0", "author": {"user": {"login": "abudevich", "name": null}}, "url": "https://github.com/vividus-framework/vividus/commit/5bd6214f43bb3e6ad95fc29d3ee02a961c6a34b0", "committedDate": "2020-12-09T13:25:35Z", "message": "[zephyr-exporter] Add ability to export executions with specific statuses"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ4MTc5ODIy", "url": "https://github.com/vividus-framework/vividus/pull/1209#pullrequestreview-548179822", "createdAt": "2020-12-09T13:27:20Z", "commit": {"oid": "5bd6214f43bb3e6ad95fc29d3ee02a961c6a34b0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ4MTgwMjgy", "url": "https://github.com/vividus-framework/vividus/pull/1209#pullrequestreview-548180282", "createdAt": "2020-12-09T13:27:50Z", "commit": {"oid": "5bd6214f43bb3e6ad95fc29d3ee02a961c6a34b0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQxMzoyNzo1MFrOICUjxQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQxMzoyNzo1MFrOICUjxQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTMwNDkwMQ==", "bodyText": "why is it required if it has default val?", "url": "https://github.com/vividus-framework/vividus/pull/1209#discussion_r539304901", "createdAt": "2020-12-09T13:27:50Z", "author": {"login": "uarlouski"}, "path": "docs/modules/integrations/pages/zephyr-exporter.adoc", "diffHunk": "@@ -24,6 +24,10 @@ Features:\n |false\n |Property for update existing executions statuses only.\n \n+|`zephyr.exporter.statuses-of-test-cases-to-add-to-execution`\n+|true", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5bd6214f43bb3e6ad95fc29d3ee02a961c6a34b0"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ4MTgwNzE2", "url": "https://github.com/vividus-framework/vividus/pull/1209#pullrequestreview-548180716", "createdAt": "2020-12-09T13:28:18Z", "commit": {"oid": "5bd6214f43bb3e6ad95fc29d3ee02a961c6a34b0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQxMzoyODoxOFrOICUlCg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQxMzoyODoxOFrOICUlCg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTMwNTIyNg==", "bodyText": "testLogger.getLoggingEvents() cache", "url": "https://github.com/vividus-framework/vividus/pull/1209#discussion_r539305226", "createdAt": "2020-12-09T13:28:18Z", "author": {"login": "uarlouski"}, "path": "vividus-to-zephyr-exporter/src/test/java/org/vividus/zephyr/parser/TestCaseParserTests.java", "diffHunk": "@@ -111,19 +115,39 @@ void testResultsProblemWithReading() throws URISyntaxException\n     void testCreateTestCases() throws URISyntaxException, IOException\n     {\n         configureObjectMapper();\n-        Path sourceDirectory = Paths.get(getClass().getResource(\"/test-cases\").toURI());\n+        Path sourceDirectory = Paths.get(getClass().getResource(RESOURCE_PATH).toURI());\n         when(zephyrExporterProperties.getSourceDirectory()).thenReturn(sourceDirectory);\n+        when(zephyrExporterProperties.getStatusesOfTestCasesToAddToExecution())\n+            .thenReturn(List.of(TestCaseStatus.SKIPPED, TestCaseStatus.PASSED));\n         List<TestCase> testCases = testCaseParser.createTestCases(objectMapper);\n         assertEquals(testCases.size(), 2);\n         assertThat(testLogger.getLoggingEvents().get(0).getMessage(), is(JSON_FILES_STRING));\n         assertThat(testLogger.getLoggingEvents().get(0).getLevel(), is(Level.INFO));\n-        assertThat(testLogger.getLoggingEvents().get(1).getMessage(), is(\"Test cases: {}\"));\n+        assertThat(testLogger.getLoggingEvents().get(1).getMessage(), is(TEST_CASES_STRING));\n         assertThat(testLogger.getLoggingEvents().get(1).getLevel(), is(Level.INFO));\n-        assertThat(testLogger.getLoggingEvents().get(2).getMessage(), is(\"Test cases for exporting to JIRA: {}\"));\n+        assertThat(testLogger.getLoggingEvents().get(2).getMessage(), is(FOR_EXPORTING_STRING));\n         assertThat(testLogger.getLoggingEvents().get(2).getLevel(), is(Level.INFO));\n         assertThat(testLogger.getLoggingEvents().size(), equalTo(3));\n     }\n \n+    @Test\n+    void testCreateTestCasesWithStatusFilter() throws URISyntaxException, IOException\n+    {\n+        configureObjectMapper();\n+        Path sourceDirectory = Paths.get(getClass().getResource(RESOURCE_PATH).toURI());\n+        when(zephyrExporterProperties.getSourceDirectory()).thenReturn(sourceDirectory);\n+        when(zephyrExporterProperties.getStatusesOfTestCasesToAddToExecution())\n+            .thenReturn(List.of(TestCaseStatus.PASSED));\n+        List<TestCase> testCases = testCaseParser.createTestCases(objectMapper);\n+        assertEquals(testCases.size(), 1);\n+        assertThat(testLogger.getLoggingEvents().get(0).getMessage(), is(JSON_FILES_STRING));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5bd6214f43bb3e6ad95fc29d3ee02a961c6a34b0"}, "originalPosition": 50}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5bd6214f43bb3e6ad95fc29d3ee02a961c6a34b0", "author": {"user": {"login": "abudevich", "name": null}}, "url": "https://github.com/vividus-framework/vividus/commit/5bd6214f43bb3e6ad95fc29d3ee02a961c6a34b0", "committedDate": "2020-12-09T13:25:35Z", "message": "[zephyr-exporter] Add ability to export executions with specific statuses"}, "afterCommit": {"oid": "b5cac3107f77a12942de2dd8c2a7fb2b46874990", "author": {"user": {"login": "abudevich", "name": null}}, "url": "https://github.com/vividus-framework/vividus/commit/b5cac3107f77a12942de2dd8c2a7fb2b46874990", "committedDate": "2020-12-09T13:31:54Z", "message": "[zephyr-exporter] Add ability to export executions with specific statuses"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ4MTkwNDU2", "url": "https://github.com/vividus-framework/vividus/pull/1209#pullrequestreview-548190456", "createdAt": "2020-12-09T13:39:39Z", "commit": {"oid": "b5cac3107f77a12942de2dd8c2a7fb2b46874990"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0957f68e436b0f6842cbdad8bc808853a385d126", "author": {"user": {"login": "abudevich", "name": null}}, "url": "https://github.com/vividus-framework/vividus/commit/0957f68e436b0f6842cbdad8bc808853a385d126", "committedDate": "2020-12-09T14:37:56Z", "message": "[zephyr-exporter] Add ability to export executions with specific statuses"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b5cac3107f77a12942de2dd8c2a7fb2b46874990", "author": {"user": {"login": "abudevich", "name": null}}, "url": "https://github.com/vividus-framework/vividus/commit/b5cac3107f77a12942de2dd8c2a7fb2b46874990", "committedDate": "2020-12-09T13:31:54Z", "message": "[zephyr-exporter] Add ability to export executions with specific statuses"}, "afterCommit": {"oid": "0957f68e436b0f6842cbdad8bc808853a385d126", "author": {"user": {"login": "abudevich", "name": null}}, "url": "https://github.com/vividus-framework/vividus/commit/0957f68e436b0f6842cbdad8bc808853a385d126", "committedDate": "2020-12-09T14:37:56Z", "message": "[zephyr-exporter] Add ability to export executions with specific statuses"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4770, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}