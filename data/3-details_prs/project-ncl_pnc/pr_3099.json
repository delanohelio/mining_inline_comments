{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM1MDc2NzQ0", "number": 3099, "title": "[NCL-5665] Make sure build is successful even after OpenShift connect\u2026", "bodyText": "\u2026ion error when destroying environment\nChecklist:\n\n Have you added a note in the CHANGELOG wiki for your change if user-facing?\n Have you added unit tests for your change?", "createdAt": "2020-06-16T09:04:38Z", "url": "https://github.com/project-ncl/pnc/pull/3099", "merged": true, "mergeCommit": {"oid": "96af495561dca8b226c48955d5ba7f4d8a3b97ad"}, "closed": true, "closedAt": "2020-06-18T07:41:44Z", "author": {"login": "dominikbrazdil"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcsI5XdgFqTQzMjM0MTQ4NQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcsLJZPABqjM0NTQwMTMxNTA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMyMzQxNDg1", "url": "https://github.com/project-ncl/pnc/pull/3099#pullrequestreview-432341485", "createdAt": "2020-06-17T12:18:40Z", "commit": {"oid": "2b4441a75354203d7828c466e1b6d001c3ed5b77"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxMjoxODo0MFrOGlDEig==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxMjoyMDozMVrOGlDInQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTUwMDgxMA==", "bodyText": "Build executor should not depend on Openshift client. The Openshift client is an implementation detail of the driver.", "url": "https://github.com/project-ncl/pnc/pull/3099#discussion_r441500810", "createdAt": "2020-06-17T12:18:40Z", "author": {"login": "matejonnet"}, "path": "build-executor/pom.xml", "diffHunk": "@@ -129,6 +129,10 @@\n       <groupId>com.fasterxml.jackson.core</groupId>\n       <artifactId>jackson-databind</artifactId>\n     </dependency>\n+      <dependency>\n+          <groupId>com.openshift</groupId>\n+          <artifactId>openshift-restclient-java</artifactId>\n+      </dependency>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2b4441a75354203d7828c466e1b6d001c3ed5b77"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTUwMTg1Mw==", "bodyText": "If the case is that the environment is not destroyed that have to be written in the log.", "url": "https://github.com/project-ncl/pnc/pull/3099#discussion_r441501853", "createdAt": "2020-06-17T12:20:31Z", "author": {"login": "matejonnet"}, "path": "build-executor/src/main/java/org/jboss/pnc/executor/DefaultBuildExecutor.java", "diffHunk": "@@ -446,6 +447,8 @@ private void destroyEnvironment(BuildExecutionSession buildExecutionSession) {\n             } else {\n                 userLog.warn(\"Unable to destroy environment. Most likely due to cancelled operation.\");\n             }\n+        } catch (OpenShiftException e) {\n+            log.error(\"OpenShift connection ERROR.\", e);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2b4441a75354203d7828c466e1b6d001c3ed5b77"}, "originalPosition": 13}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2b4441a75354203d7828c466e1b6d001c3ed5b77", "author": {"user": {"login": "dominikbrazdil", "name": null}}, "url": "https://github.com/project-ncl/pnc/commit/2b4441a75354203d7828c466e1b6d001c3ed5b77", "committedDate": "2020-06-16T08:49:28Z", "message": "[NCL-5665] Make sure build is successful even after OpenShift connection error when destroying environment"}, "afterCommit": {"oid": "f2b009dd66bbc948955bd07b3e83305692a83428", "author": {"user": {"login": "dominikbrazdil", "name": null}}, "url": "https://github.com/project-ncl/pnc/commit/f2b009dd66bbc948955bd07b3e83305692a83428", "committedDate": "2020-06-17T12:51:17Z", "message": "[NCL-5665] Make sure build is successful even after OpenShift connection error when destroying environment"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f2b009dd66bbc948955bd07b3e83305692a83428", "author": {"user": {"login": "dominikbrazdil", "name": null}}, "url": "https://github.com/project-ncl/pnc/commit/f2b009dd66bbc948955bd07b3e83305692a83428", "committedDate": "2020-06-17T12:51:17Z", "message": "[NCL-5665] Make sure build is successful even after OpenShift connection error when destroying environment"}, "afterCommit": {"oid": "3c6fb3534683452bcd01d192c2eac0b128e1868a", "author": {"user": {"login": "dominikbrazdil", "name": null}}, "url": "https://github.com/project-ncl/pnc/commit/3c6fb3534683452bcd01d192c2eac0b128e1868a", "committedDate": "2020-06-17T13:48:29Z", "message": "[NCL-5665] Make sure build is successful even after OpenShift connection error when destroying environment"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMyNDY1OTc5", "url": "https://github.com/project-ncl/pnc/pull/3099#pullrequestreview-432465979", "createdAt": "2020-06-17T14:33:40Z", "commit": {"oid": "3c6fb3534683452bcd01d192c2eac0b128e1868a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "52f10789dbb4cb9f8b110835cd9a2b1ae6d4b214", "author": {"user": {"login": "dominikbrazdil", "name": null}}, "url": "https://github.com/project-ncl/pnc/commit/52f10789dbb4cb9f8b110835cd9a2b1ae6d4b214", "committedDate": "2020-06-17T14:57:37Z", "message": "[NCL-5665] Make sure build is successful even after OpenShift connection error when destroying environment"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3c6fb3534683452bcd01d192c2eac0b128e1868a", "author": {"user": {"login": "dominikbrazdil", "name": null}}, "url": "https://github.com/project-ncl/pnc/commit/3c6fb3534683452bcd01d192c2eac0b128e1868a", "committedDate": "2020-06-17T13:48:29Z", "message": "[NCL-5665] Make sure build is successful even after OpenShift connection error when destroying environment"}, "afterCommit": {"oid": "52f10789dbb4cb9f8b110835cd9a2b1ae6d4b214", "author": {"user": {"login": "dominikbrazdil", "name": null}}, "url": "https://github.com/project-ncl/pnc/commit/52f10789dbb4cb9f8b110835cd9a2b1ae6d4b214", "committedDate": "2020-06-17T14:57:37Z", "message": "[NCL-5665] Make sure build is successful even after OpenShift connection error when destroying environment"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2592, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}