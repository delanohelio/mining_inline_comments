{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE2ODQ1MjEx", "number": 3037, "title": "[NCL-5701] - Port tests to RestResponseFormattingTest", "bodyText": "Checklist:\n\n Have you added a note in the CHANGELOG wiki for your change if user-facing?\n Have you added unit tests for your change?", "createdAt": "2020-05-12T16:45:56Z", "url": "https://github.com/project-ncl/pnc/pull/3037", "merged": true, "mergeCommit": {"oid": "b8257846074daf46e19b123c371f223c3af36977"}, "closed": true, "closedAt": "2020-05-14T08:16:54Z", "author": {"login": "vibe13"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcg2U4-gFqTQxMDc4NDUzMA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABchIwUYAFqTQxMTU1MzE5NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEwNzg0NTMw", "url": "https://github.com/project-ncl/pnc/pull/3037#pullrequestreview-410784530", "createdAt": "2020-05-13T10:15:53Z", "commit": {"oid": "6d839d15c1c980fdebe188a11d8b866b0469fcd8"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxMDoxNTo1M1rOGUq9WQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxMDoyNzozOVrOGUrWEQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDMyODUzNw==", "bodyText": "Please extract the common API path to constant. It will change in the future.", "url": "https://github.com/project-ncl/pnc/pull/3037#discussion_r424328537", "createdAt": "2020-05-13T10:15:53Z", "author": {"login": "janinko"}, "path": "integration-test/src/test/java/org/jboss/pnc/integration_new/RestResponseFormattingTest.java", "diffHunk": "@@ -78,24 +58,23 @@ public void shouldReturnErrorInJsonFormat() {\n                 .statusCode(Response.Status.INTERNAL_SERVER_ERROR.getStatusCode())\n                 .body(\"errorMessage\", IsEqual.equalTo(\"Test exception.\"))\n                 .when()\n-                .get(\"/pnc-rest/rest/test/throw\")\n+                .get(\"/pnc-rest-new/rest-new/debug/throw\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6d839d15c1c980fdebe188a11d8b866b0469fcd8"}, "originalPosition": 79}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDMzMzMxOA==", "bodyText": "you build a response here but then do nothing with it.\nFrom JAX-RS specification\n\n3.3.3 Return Type\nvoid Results in an empty entity body with a 204 status code.\n\nSo Having just empty method will do the works.", "url": "https://github.com/project-ncl/pnc/pull/3037#discussion_r424333318", "createdAt": "2020-05-13T10:24:49Z", "author": {"login": "janinko"}, "path": "rest-new/src/main/java/org/jboss/pnc/rest/endpoints/internal/DebugEndpointImpl.java", "diffHunk": "@@ -75,4 +78,23 @@ public static Build newBuild() {\n                 .temporaryBuild(true)\n                 .build();\n     }\n+\n+    @Override\n+    public void throwEx() throws Exception {\n+        RuntimeException nested = new RuntimeException(\"Root exception.\");\n+        throw new Exception(\"Test exception.\", nested);\n+    }\n+\n+    @Override\n+    public void nocontent() throws Exception {\n+        Response.status(Response.Status.NO_CONTENT).build();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6d839d15c1c980fdebe188a11d8b866b0469fcd8"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDMzNDQ5OQ==", "bodyText": "How can this work? You build a repsoinse but then don't use it anywhere.", "url": "https://github.com/project-ncl/pnc/pull/3037#discussion_r424334499", "createdAt": "2020-05-13T10:26:58Z", "author": {"login": "janinko"}, "path": "rest-new/src/main/java/org/jboss/pnc/rest/endpoints/internal/DebugEndpointImpl.java", "diffHunk": "@@ -75,4 +78,23 @@ public static Build newBuild() {\n                 .temporaryBuild(true)\n                 .build();\n     }\n+\n+    @Override\n+    public void throwEx() throws Exception {\n+        RuntimeException nested = new RuntimeException(\"Root exception.\");\n+        throw new Exception(\"Test exception.\", nested);\n+    }\n+\n+    @Override\n+    public void nocontent() throws Exception {\n+        Response.status(Response.Status.NO_CONTENT).build();\n+    }\n+\n+    @Override\n+    public void redirect() throws Exception {\n+        Response.status(Response.Status.UNAUTHORIZED)\n+                .header(HttpHeaders.WWW_AUTHENTICATE, \"Basic realm=\\\"ApplicationRealm\\\"\")\n+                .build();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6d839d15c1c980fdebe188a11d8b866b0469fcd8"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDMzNDg2NQ==", "bodyText": "Why changing it?", "url": "https://github.com/project-ncl/pnc/pull/3037#discussion_r424334865", "createdAt": "2020-05-13T10:27:39Z", "author": {"login": "janinko"}, "path": "integration-test/src/test/resources/test-ds.xml", "diffHunk": "@@ -30,7 +30,7 @@\n       <!-- Properties for Hibernate -->\n       <property name=\"hibernate.dialect\" value=\"org.hibernate.dialect.HSQLDialect\"/>\n       <property name=\"hibernate.hbm2ddl.auto\" value=\"create-drop\"/>\n-      <property name=\"hibernate.show_sql\" value=\"true\"/>\n+      <property name=\"hibernate.show_sql\" value=\"false\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6d839d15c1c980fdebe188a11d8b866b0469fcd8"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4ceaaad42b53fe92b2987378c6911c20ebf64c8c", "author": {"user": {"login": "vibe13", "name": "Andrea Vibelli"}}, "url": "https://github.com/project-ncl/pnc/commit/4ceaaad42b53fe92b2987378c6911c20ebf64c8c", "committedDate": "2020-05-13T10:46:21Z", "message": "[NCL-5701] - Port tests to RestResponseFormattingTest"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f9790936eee4239d6ecfad9b865ce2d83c02c39a", "author": {"user": {"login": "vibe13", "name": "Andrea Vibelli"}}, "url": "https://github.com/project-ncl/pnc/commit/f9790936eee4239d6ecfad9b865ce2d83c02c39a", "committedDate": "2020-05-13T14:17:57Z", "message": "Fixes after review"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6d839d15c1c980fdebe188a11d8b866b0469fcd8", "author": {"user": {"login": "vibe13", "name": "Andrea Vibelli"}}, "url": "https://github.com/project-ncl/pnc/commit/6d839d15c1c980fdebe188a11d8b866b0469fcd8", "committedDate": "2020-05-12T16:44:29Z", "message": "[NCL-5701] - Port tests to RestResponseFormattingTest"}, "afterCommit": {"oid": "f9790936eee4239d6ecfad9b865ce2d83c02c39a", "author": {"user": {"login": "vibe13", "name": "Andrea Vibelli"}}, "url": "https://github.com/project-ncl/pnc/commit/f9790936eee4239d6ecfad9b865ce2d83c02c39a", "committedDate": "2020-05-13T14:17:57Z", "message": "Fixes after review"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExNTUzMTk0", "url": "https://github.com/project-ncl/pnc/pull/3037#pullrequestreview-411553194", "createdAt": "2020-05-14T07:57:36Z", "commit": {"oid": "f9790936eee4239d6ecfad9b865ce2d83c02c39a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2648, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}