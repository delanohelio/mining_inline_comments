{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDgxODU1ODA5", "number": 3292, "title": "[NCL-5994] Build config creating fails with 500 when environment does\u2026", "bodyText": "\u2026n't exists\nChecklist:\n\n Have you added a note in the CHANGELOG wiki for your change if user-facing?\n Have you added unit tests for your change?", "createdAt": "2020-09-08T07:54:20Z", "url": "https://github.com/project-ncl/pnc/pull/3292", "merged": true, "mergeCommit": {"oid": "421d9f77693abc80255138215360e7732c9a6d0b"}, "closed": true, "closedAt": "2020-09-08T08:48:25Z", "author": {"login": "jomrazek"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdGzRtcgFqTQ4MzkwNjM5NA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdGzYrvABqjM3Mzk3NDY1ODY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgzOTA2Mzk0", "url": "https://github.com/project-ncl/pnc/pull/3292#pullrequestreview-483906394", "createdAt": "2020-09-08T08:25:17Z", "commit": {"oid": "3310ed161f6f3f0fe0de14028c06bf89bc8c226e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgzOTA5MzYy", "url": "https://github.com/project-ncl/pnc/pull/3292#pullrequestreview-483909362", "createdAt": "2020-09-08T08:28:55Z", "commit": {"oid": "3310ed161f6f3f0fe0de14028c06bf89bc8c226e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQwODoyODo1NlrOHOSXmg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQwODoyODo1NlrOHOSXmg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDc0MzA2Ng==", "bodyText": "Typo :D\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        throw new EmptyEntityException(\"Build environment \" + envId + \" does not exists.\");\n          \n          \n            \n                        throw new EmptyEntityException(\"Build environment \" + envId + \" does not exist.\");", "url": "https://github.com/project-ncl/pnc/pull/3292#discussion_r484743066", "createdAt": "2020-09-08T08:28:56Z", "author": {"login": "michalovjan"}, "path": "facade/src/main/java/org/jboss/pnc/facade/providers/BuildConfigurationProviderImpl.java", "diffHunk": "@@ -250,6 +258,14 @@ private void validateIfItsNotConflicted(BuildConfiguration buildConfigurationRes\n         });\n     }\n \n+    private void validateEnvironment(BuildConfiguration buildConfigurationRest) {\n+        String envId = buildConfigurationRest.getEnvironment().getId();\n+        BuildEnvironment env = buildEnvironmentRepository.queryById(Integer.valueOf(envId));\n+        if (env == null) {\n+            throw new EmptyEntityException(\"Build environment \" + envId + \" does not exists.\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3310ed161f6f3f0fe0de14028c06bf89bc8c226e"}, "originalPosition": 56}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b5fb09ce014c607e31e4ca3d59bb35f107ceef95", "author": {"user": {"login": "jomrazek", "name": null}}, "url": "https://github.com/project-ncl/pnc/commit/b5fb09ce014c607e31e4ca3d59bb35f107ceef95", "committedDate": "2020-09-08T08:32:31Z", "message": "[NCL-5994] Build config creating fails with 500 when environment doesn't exists"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3310ed161f6f3f0fe0de14028c06bf89bc8c226e", "author": {"user": {"login": "jomrazek", "name": null}}, "url": "https://github.com/project-ncl/pnc/commit/3310ed161f6f3f0fe0de14028c06bf89bc8c226e", "committedDate": "2020-09-08T07:47:21Z", "message": "[NCL-5994] Build config creating fails with 500 when environment doesn't exists"}, "afterCommit": {"oid": "b5fb09ce014c607e31e4ca3d59bb35f107ceef95", "author": {"user": {"login": "jomrazek", "name": null}}, "url": "https://github.com/project-ncl/pnc/commit/b5fb09ce014c607e31e4ca3d59bb35f107ceef95", "committedDate": "2020-09-08T08:32:31Z", "message": "[NCL-5994] Build config creating fails with 500 when environment doesn't exists"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2523, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}