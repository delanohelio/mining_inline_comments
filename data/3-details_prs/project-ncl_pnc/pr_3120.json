{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM4NTQ0OTgz", "number": 3120, "title": "[NCL-5705] Brew push: selecting build result in case of NO_REBUILD_RE\u2026", "bodyText": "\u2026QUIRED\nChecklist:\n\n Have you added a note in the CHANGELOG wiki for your change if user-facing?\n Have you added unit tests for your change?", "createdAt": "2020-06-23T12:42:14Z", "url": "https://github.com/project-ncl/pnc/pull/3120", "merged": true, "mergeCommit": {"oid": "73f3610c12cd0d27d6934aad9160a702e3e1a71e"}, "closed": true, "closedAt": "2020-06-29T08:32:24Z", "author": {"login": "jomrazek"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcuFx65gBqjM0NzMwNTY3Mzg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcv8ruPgFqTQzODk4NDcxMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "910675bed988ee3ca0a900454278c7e5a519e559", "author": {"user": {"login": "jomrazek", "name": null}}, "url": "https://github.com/project-ncl/pnc/commit/910675bed988ee3ca0a900454278c7e5a519e559", "committedDate": "2020-06-23T12:39:32Z", "message": "[NCL-5705] Brew push: selecting build result in case of NO_REBUILD_REQUIRED"}, "afterCommit": {"oid": "691a7f733e939fd2b9db1011bd73eae9bcc4b9ee", "author": {"user": {"login": "jomrazek", "name": null}}, "url": "https://github.com/project-ncl/pnc/commit/691a7f733e939fd2b9db1011bd73eae9bcc4b9ee", "committedDate": "2020-06-23T13:50:15Z", "message": "[NCL-5705] Brew push: selecting build result in case of NO_REBUILD_REQUIRED"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2Mzg2NTQy", "url": "https://github.com/project-ncl/pnc/pull/3120#pullrequestreview-436386542", "createdAt": "2020-06-24T07:21:17Z", "commit": {"oid": "691a7f733e939fd2b9db1011bd73eae9bcc4b9ee"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQwNzoyMToxN1rOGoF_Ng==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQwNzoyMToxN1rOGoF_Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDY5NDMyNg==", "bodyText": "I would maybe mention to push the one already built then to build a new one to push.", "url": "https://github.com/project-ncl/pnc/pull/3120#discussion_r444694326", "createdAt": "2020-06-24T07:21:17Z", "author": {"login": "janinko"}, "path": "facade/src/main/java/org/jboss/pnc/facade/impl/BrewPusherImpl.java", "diffHunk": "@@ -151,6 +151,11 @@\n \n     @Override\n     public BuildPushResult pushBuild(String buildId, BuildPushParameters buildPushParameters) throws ProcessException {\n+        BuildRecord build = buildRecordRepository.queryById(Integer.valueOf(buildId));\n+        if (build.getStatus().equals(BuildStatus.NO_REBUILD_REQUIRED)) {\n+            throw new OperationNotAllowedException(\n+                    \"Build has NO_REBUILD_REQUIRED status, force-rebuild build or push different one.\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "691a7f733e939fd2b9db1011bd73eae9bcc4b9ee"}, "originalPosition": 7}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "691a7f733e939fd2b9db1011bd73eae9bcc4b9ee", "author": {"user": {"login": "jomrazek", "name": null}}, "url": "https://github.com/project-ncl/pnc/commit/691a7f733e939fd2b9db1011bd73eae9bcc4b9ee", "committedDate": "2020-06-23T13:50:15Z", "message": "[NCL-5705] Brew push: selecting build result in case of NO_REBUILD_REQUIRED"}, "afterCommit": {"oid": "43e5e7bd0041fc768f103d5e8470001a82de3bc7", "author": {"user": {"login": "jomrazek", "name": null}}, "url": "https://github.com/project-ncl/pnc/commit/43e5e7bd0041fc768f103d5e8470001a82de3bc7", "committedDate": "2020-06-24T09:10:28Z", "message": "[NCL-5705] Brew push: selecting build result in case of NO_REBUILD_REQUIRED"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fe5c0105049e89faca2981bedfa856c6da03f676", "author": {"user": {"login": "jomrazek", "name": null}}, "url": "https://github.com/project-ncl/pnc/commit/fe5c0105049e89faca2981bedfa856c6da03f676", "committedDate": "2020-06-24T09:15:17Z", "message": "[NCL-5705] Brew push: selecting build result in case of NO_REBUILD_REQUIRED"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "43e5e7bd0041fc768f103d5e8470001a82de3bc7", "author": {"user": {"login": "jomrazek", "name": null}}, "url": "https://github.com/project-ncl/pnc/commit/43e5e7bd0041fc768f103d5e8470001a82de3bc7", "committedDate": "2020-06-24T09:10:28Z", "message": "[NCL-5705] Brew push: selecting build result in case of NO_REBUILD_REQUIRED"}, "afterCommit": {"oid": "fe5c0105049e89faca2981bedfa856c6da03f676", "author": {"user": {"login": "jomrazek", "name": null}}, "url": "https://github.com/project-ncl/pnc/commit/fe5c0105049e89faca2981bedfa856c6da03f676", "committedDate": "2020-06-24T09:15:17Z", "message": "[NCL-5705] Brew push: selecting build result in case of NO_REBUILD_REQUIRED"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM4OTg0NzEx", "url": "https://github.com/project-ncl/pnc/pull/3120#pullrequestreview-438984711", "createdAt": "2020-06-29T08:22:35Z", "commit": {"oid": "fe5c0105049e89faca2981bedfa856c6da03f676"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2604, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}