{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEwMTE5NDc3", "number": 3007, "title": "[NCL-5507] fix ENQUEUED status being IN_PROGRESS instead of PENDING", "bodyText": "Checklist:\n\n Have you added a note in the CHANGELOG wiki for your change if user-facing?\n Have you added unit tests for your change?", "createdAt": "2020-04-28T13:28:50Z", "url": "https://github.com/project-ncl/pnc/pull/3007", "merged": true, "mergeCommit": {"oid": "84584987fbd1410bc7901eab4677bb5d7177b52f"}, "closed": true, "closedAt": "2020-04-28T14:34:36Z", "author": {"login": "michalovjan"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABccD87zAFqTQwMTgzNzU4NA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABccEDREgFqTQwMTg0NDE3NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAxODM3NTg0", "url": "https://github.com/project-ncl/pnc/pull/3007#pullrequestreview-401837584", "createdAt": "2020-04-28T13:32:13Z", "commit": {"oid": "4a861163dae71e824eedc9b1843b54389b9e1322"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQxMzozMjoxM1rOGNULzg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQxMzozMjoxM1rOGNULzg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjYxNTM3NA==", "bodyText": "\ud83d\ude2c", "url": "https://github.com/project-ncl/pnc/pull/3007#discussion_r416615374", "createdAt": "2020-04-28T13:32:13Z", "author": {"login": "janinko"}, "path": "dto/src/main/java/org/jboss/pnc/dto/notification/BuildChangedNotification.java", "diffHunk": "@@ -67,22 +63,28 @@\n     public BuildChangedNotification(\n             @JsonProperty(\"oldStatus\") BuildStatus oldStatus,\n             @JsonProperty(\"build\") Build build) {\n-        super(BUILD, BUILD_STATUS_CHANGED, getProgress(build.getStatus()), getProgress(oldStatus));\n+        super(\n+                BUILD,\n+                BUILD_STATUS_CHANGED,\n+                getProgress(build.getStatus().progress()),\n+                getProgress(oldStatus.progress()));\n         this.oldStatus = oldStatus;\n         this.build = build;\n     }\n \n-    public static JobNotificationProgress getProgress(BuildStatus status) {\n+    public static JobNotificationProgress getProgress(BuildProgress status) {\n         if (status == null) {\n             return null;\n         }\n-        if (status == WAITING_FOR_DEPENDENCIES || status == NEW) {\n-            return PENDING;\n-        }\n-        if (status.isFinal()) {\n-            return FINISHED;\n-        } else {\n-            return IN_PROGRESS;\n+        switch (status) {\n+            case PENDING:\n+                return PENDING;\n+            case FINISHED:\n+                return FINISHED;\n+            case IN_PROGRESS:\n+                return IN_PROGRESS;\n+            default:\n+                return null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4a861163dae71e824eedc9b1843b54389b9e1322"}, "originalPosition": 63}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b7851dbf4dc7f104c914bc5990bdad55b70f4e9c", "author": {"user": {"login": "michalovjan", "name": null}}, "url": "https://github.com/project-ncl/pnc/commit/b7851dbf4dc7f104c914bc5990bdad55b70f4e9c", "committedDate": "2020-04-28T13:37:25Z", "message": "[NCL-5507] fix ENQUEUED status being IN_PROGRESS instead of PENDING"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4a861163dae71e824eedc9b1843b54389b9e1322", "author": {"user": {"login": "michalovjan", "name": null}}, "url": "https://github.com/project-ncl/pnc/commit/4a861163dae71e824eedc9b1843b54389b9e1322", "committedDate": "2020-04-28T13:22:54Z", "message": "[NCL-5507] fix ENQUEUED status being IN_PROGRESS instead of PENDING"}, "afterCommit": {"oid": "b7851dbf4dc7f104c914bc5990bdad55b70f4e9c", "author": {"user": {"login": "michalovjan", "name": null}}, "url": "https://github.com/project-ncl/pnc/commit/b7851dbf4dc7f104c914bc5990bdad55b70f4e9c", "committedDate": "2020-04-28T13:37:25Z", "message": "[NCL-5507] fix ENQUEUED status being IN_PROGRESS instead of PENDING"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAxODQ0MTc1", "url": "https://github.com/project-ncl/pnc/pull/3007#pullrequestreview-401844175", "createdAt": "2020-04-28T13:39:09Z", "commit": {"oid": "b7851dbf4dc7f104c914bc5990bdad55b70f4e9c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2630, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}