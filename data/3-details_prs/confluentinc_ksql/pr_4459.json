{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzcyMDA2ODI1", "number": 4459, "title": "feat: remove WindowStart() and WindowEnd() UDAFs", "bodyText": "Description\nThese two UDAFs were introduced to allow access to the start and end times of the window in a windowed source. WINDOWSTART and WINDOWEND are now accessible as columns to be used in the SELECT of a query, (outside of UDAFs).  This makes the two UDAFs redundant.\nBREAKING CHANGE: The WindowStart() and WindowEnd() UDAFs have been removed from KSQL. Use the WindowStart and WindowEnd system columns to access the window bounds within the SELECT expression instead.\nTesting done\nUsual.\nReviewer checklist\n\n Ensure docs are updated if necessary. (eg. if a user visible feature is being added or changed).\n Ensure relevant issues are linked (description should include text like \"Fixes #\")", "createdAt": "2020-02-06T16:55:15Z", "url": "https://github.com/confluentinc/ksql/pull/4459", "merged": true, "mergeCommit": {"oid": "eda2e345868ac517977601c74475eee0da3930c8"}, "closed": true, "closedAt": "2020-02-07T10:28:07Z", "author": {"login": "big-andy-coates"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcBtnx1gH2gAyMzcyMDA2ODI1OjkyNTU4NjM5NDhlODhiYjhlMzc5MWM3NjYwZTU3NWE0OTRmMjQzYzk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcBzgJugFqTM1NDg0ODU3NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "9255863948e88bb8e3791c7660e575a494f243c9", "author": {"user": {"login": "big-andy-coates", "name": "Andy Coates"}}, "url": "https://github.com/confluentinc/ksql/commit/9255863948e88bb8e3791c7660e575a494f243c9", "committedDate": "2020-02-06T16:49:11Z", "message": "feat: remove WindowStart() and WindowEnd() UDAFs\n\nThese two UDAFs were introduced to allow access to the start and end times of the window in a windowed source. `WINDOWSTART` and `WINDOWEND` are now accessible as columns to be used in the SELECT of a query, (outside of UDAFs).  This makes the two UDAFs redundant.\n\nBREAKING CHANGE: The `WindowStart()` and `WindowEnd()` UDAFs have been removed from KSQL. Use the `WindowStart` and `WindowEnd` system columns to access the window bounds within the SELECT expression instead."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f8154f52baa28958014eccd10909d4f3cc7f18a8", "author": {"user": {"login": "big-andy-coates", "name": "Andy Coates"}}, "url": "https://github.com/confluentinc/ksql/commit/f8154f52baa28958014eccd10909d4f3cc7f18a8", "committedDate": "2020-02-06T17:40:07Z", "message": "chore: update docs"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU0NjQ1Mzk3", "url": "https://github.com/confluentinc/ksql/pull/4459#pullrequestreview-354645397", "createdAt": "2020-02-06T17:42:42Z", "commit": {"oid": "f8154f52baa28958014eccd10909d4f3cc7f18a8"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU0ODQ4NTc0", "url": "https://github.com/confluentinc/ksql/pull/4459#pullrequestreview-354848574", "createdAt": "2020-02-06T23:38:32Z", "commit": {"oid": "f8154f52baa28958014eccd10909d4f3cc7f18a8"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNlQyMzo0MDowOVrOFmt-5w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNlQyMzo0MDowOVrOFmt-5w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjE0MzU5MQ==", "bodyText": "double checking - is there a problem with aggregating on window bounds of the source? e.g. I'm consuming from a windowed stream and performing an aggregation: SELECT COUNT_DISTINCT(source.WINDOW_START) FROM source", "url": "https://github.com/confluentinc/ksql/pull/4459#discussion_r376143591", "createdAt": "2020-02-06T23:40:09Z", "author": {"login": "agavra"}, "path": "ksql-engine/src/main/java/io/confluent/ksql/planner/plan/AggregateNode.java", "diffHunk": "@@ -404,9 +391,15 @@ private ResolveToInternalRewriter() {\n         }\n \n         final boolean isAggregate = node.getReference().isAggregate();\n+        final boolean windowBounds = SchemaUtil.isWindowBound(node.getReference());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f8154f52baa28958014eccd10909d4f3cc7f18a8"}, "originalPosition": 31}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4950, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}