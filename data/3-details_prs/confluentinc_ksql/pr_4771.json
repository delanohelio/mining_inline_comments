{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg3ODg3ODQ2", "number": 4771, "title": "feat: add internal request to KsqlRequestConfig and SessionProperties", "bodyText": "Description\nBreaking up #4572 into smaller PR's\nThis PR adds an isInteralRequest flag to both KsqlRequestConfig and SessionProperties for use in any future scatter gather patterns among cluster servers.\nTesting done\nUnit tests\nReviewer checklist\n\n Ensure docs are updated if necessary. (eg. if a user visible feature is being added or changed).\n Ensure relevant issues are linked (description should include text like \"Fixes #\")", "createdAt": "2020-03-13T17:10:55Z", "url": "https://github.com/confluentinc/ksql/pull/4771", "merged": true, "mergeCommit": {"oid": "fc10caeb6c164febd8041bc523e765fa6a6b77d8"}, "closed": true, "closedAt": "2020-03-20T18:12:39Z", "author": {"login": "stevenpyzhang"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcNTxw7gBqjMxMjc2MDc2NTg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcPjlbHAFqTM3ODY2MDExMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "04add141f0a3406b59ac670b03204f992f526fe3", "author": {"user": {"login": "stevenpyzhang", "name": "Steven Zhang"}}, "url": "https://github.com/confluentinc/ksql/commit/04add141f0a3406b59ac670b03204f992f526fe3", "committedDate": "2020-03-13T17:10:18Z", "message": "feat: add isInteralRequest flag to both SessionProperties and KsqlRequest"}, "afterCommit": {"oid": "20dd5f28acb17661ea3491e56e5e378c15cea834", "author": {"user": {"login": "stevenpyzhang", "name": "Steven Zhang"}}, "url": "https://github.com/confluentinc/ksql/commit/20dd5f28acb17661ea3491e56e5e378c15cea834", "committedDate": "2020-03-13T17:29:33Z", "message": "feat: add isInteralRequest flag to both SessionProperties and KsqlRequest"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "20dd5f28acb17661ea3491e56e5e378c15cea834", "author": {"user": {"login": "stevenpyzhang", "name": "Steven Zhang"}}, "url": "https://github.com/confluentinc/ksql/commit/20dd5f28acb17661ea3491e56e5e378c15cea834", "committedDate": "2020-03-13T17:29:33Z", "message": "feat: add isInteralRequest flag to both SessionProperties and KsqlRequest"}, "afterCommit": {"oid": "140b6b6ab108fe19e16a42034ee0862860acf553", "author": {"user": {"login": "stevenpyzhang", "name": "Steven Zhang"}}, "url": "https://github.com/confluentinc/ksql/commit/140b6b6ab108fe19e16a42034ee0862860acf553", "committedDate": "2020-03-13T17:46:41Z", "message": "feat: add isInteralRequest flag to both SessionProperties and KsqlRequest"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "140b6b6ab108fe19e16a42034ee0862860acf553", "author": {"user": {"login": "stevenpyzhang", "name": "Steven Zhang"}}, "url": "https://github.com/confluentinc/ksql/commit/140b6b6ab108fe19e16a42034ee0862860acf553", "committedDate": "2020-03-13T17:46:41Z", "message": "feat: add isInteralRequest flag to both SessionProperties and KsqlRequest"}, "afterCommit": {"oid": "c5e21891122e0c326212489dd7af95ce0848b657", "author": {"user": {"login": "stevenpyzhang", "name": "Steven Zhang"}}, "url": "https://github.com/confluentinc/ksql/commit/c5e21891122e0c326212489dd7af95ce0848b657", "committedDate": "2020-03-13T18:59:16Z", "message": "feat: add isInteralRequest flag to both SessionProperties and KsqlRequest"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c5e21891122e0c326212489dd7af95ce0848b657", "author": {"user": {"login": "stevenpyzhang", "name": "Steven Zhang"}}, "url": "https://github.com/confluentinc/ksql/commit/c5e21891122e0c326212489dd7af95ce0848b657", "committedDate": "2020-03-13T18:59:16Z", "message": "feat: add isInteralRequest flag to both SessionProperties and KsqlRequest"}, "afterCommit": {"oid": "b03dca34448b6666deec03507474b9421fd41e8a", "author": {"user": {"login": "stevenpyzhang", "name": "Steven Zhang"}}, "url": "https://github.com/confluentinc/ksql/commit/b03dca34448b6666deec03507474b9421fd41e8a", "committedDate": "2020-03-13T23:29:45Z", "message": "feat: add isInteralRequest flag to both SessionProperties and KsqlRequest"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b03dca34448b6666deec03507474b9421fd41e8a", "author": {"user": {"login": "stevenpyzhang", "name": "Steven Zhang"}}, "url": "https://github.com/confluentinc/ksql/commit/b03dca34448b6666deec03507474b9421fd41e8a", "committedDate": "2020-03-13T23:29:45Z", "message": "feat: add isInteralRequest flag to both SessionProperties and KsqlRequest"}, "afterCommit": {"oid": "4d44ecc2cf1f21f41e021c1857c8bc1b6d2d688c", "author": {"user": {"login": "stevenpyzhang", "name": "Steven Zhang"}}, "url": "https://github.com/confluentinc/ksql/commit/4d44ecc2cf1f21f41e021c1857c8bc1b6d2d688c", "committedDate": "2020-03-14T20:04:26Z", "message": "feat: add isInteralRequest flag to both SessionProperties and KsqlRequest"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4d44ecc2cf1f21f41e021c1857c8bc1b6d2d688c", "author": {"user": {"login": "stevenpyzhang", "name": "Steven Zhang"}}, "url": "https://github.com/confluentinc/ksql/commit/4d44ecc2cf1f21f41e021c1857c8bc1b6d2d688c", "committedDate": "2020-03-14T20:04:26Z", "message": "feat: add isInteralRequest flag to both SessionProperties and KsqlRequest"}, "afterCommit": {"oid": "e6d6ed50df8d977298ae41e3e8f426ad6ff5f958", "author": {"user": {"login": "stevenpyzhang", "name": "Steven Zhang"}}, "url": "https://github.com/confluentinc/ksql/commit/e6d6ed50df8d977298ae41e3e8f426ad6ff5f958", "committedDate": "2020-03-16T18:46:55Z", "message": "feat: add isInteralRequest flag to both SessionProperties and KsqlRequest"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e6d6ed50df8d977298ae41e3e8f426ad6ff5f958", "author": {"user": {"login": "stevenpyzhang", "name": "Steven Zhang"}}, "url": "https://github.com/confluentinc/ksql/commit/e6d6ed50df8d977298ae41e3e8f426ad6ff5f958", "committedDate": "2020-03-16T18:46:55Z", "message": "feat: add isInteralRequest flag to both SessionProperties and KsqlRequest"}, "afterCommit": {"oid": "eca0d372767a4b3a9b97bcf5ea59b1ba18284196", "author": {"user": {"login": "stevenpyzhang", "name": "Steven Zhang"}}, "url": "https://github.com/confluentinc/ksql/commit/eca0d372767a4b3a9b97bcf5ea59b1ba18284196", "committedDate": "2020-03-16T18:53:38Z", "message": "feat: add isInteralRequest flag to both SessionProperties and KsqlRequest"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "eca0d372767a4b3a9b97bcf5ea59b1ba18284196", "author": {"user": {"login": "stevenpyzhang", "name": "Steven Zhang"}}, "url": "https://github.com/confluentinc/ksql/commit/eca0d372767a4b3a9b97bcf5ea59b1ba18284196", "committedDate": "2020-03-16T18:53:38Z", "message": "feat: add isInteralRequest flag to both SessionProperties and KsqlRequest"}, "afterCommit": {"oid": "9fbbcc17b29c8e529e55d58fb8be940265cd38a1", "author": {"user": {"login": "stevenpyzhang", "name": "Steven Zhang"}}, "url": "https://github.com/confluentinc/ksql/commit/9fbbcc17b29c8e529e55d58fb8be940265cd38a1", "committedDate": "2020-03-18T21:55:21Z", "message": "feat: add isInteralRequest flag to both SessionProperties and KsqlRequest"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9fe61e571a44845eb112c990079705bec248b2cc", "author": {"user": {"login": "stevenpyzhang", "name": "Steven Zhang"}}, "url": "https://github.com/confluentinc/ksql/commit/9fe61e571a44845eb112c990079705bec248b2cc", "committedDate": "2020-03-18T22:01:00Z", "message": "feat: add internal request to KsqlRequestConfig and SessionProperties"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9fbbcc17b29c8e529e55d58fb8be940265cd38a1", "author": {"user": {"login": "stevenpyzhang", "name": "Steven Zhang"}}, "url": "https://github.com/confluentinc/ksql/commit/9fbbcc17b29c8e529e55d58fb8be940265cd38a1", "committedDate": "2020-03-18T21:55:21Z", "message": "feat: add isInteralRequest flag to both SessionProperties and KsqlRequest"}, "afterCommit": {"oid": "9fe61e571a44845eb112c990079705bec248b2cc", "author": {"user": {"login": "stevenpyzhang", "name": "Steven Zhang"}}, "url": "https://github.com/confluentinc/ksql/commit/9fe61e571a44845eb112c990079705bec248b2cc", "committedDate": "2020-03-18T22:01:00Z", "message": "feat: add internal request to KsqlRequestConfig and SessionProperties"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3MzU2ODYy", "url": "https://github.com/confluentinc/ksql/pull/4771#pullrequestreview-377356862", "createdAt": "2020-03-19T01:28:03Z", "commit": {"oid": "9fe61e571a44845eb112c990079705bec248b2cc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQwMToyODowNFrOF4c6WQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQwMToyODowNFrOF4c6WQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDczODI2NQ==", "bodyText": "I am not sure about initializing the config with every request. The config has the default value, you should not override it. Instead, you can check if there is the property specified in the request and use that value, else use the default value.\nif (request.getRequestProperties().containsKey(key)) {\n        return (Boolean) request.getRequestProperties().get(key);\n}\nelse {\n    return KsqlRequestConfig. KSQL_REQUEST_INTERNAL_REQUEST_DEFAULT;\n}", "url": "https://github.com/confluentinc/ksql/pull/4771#discussion_r394738265", "createdAt": "2020-03-19T01:28:04Z", "author": {"login": "vpapavas"}, "path": "ksqldb-rest-app/src/main/java/io/confluent/ksql/rest/server/resources/KsqlResource.java", "diffHunk": "@@ -245,14 +247,17 @@ public Response handleKsqlStatements(\n           request,\n           distributedCmdResponseTimeout);\n \n+      final KsqlRequestConfig requestConfig =", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9fe61e571a44845eb112c990079705bec248b2cc"}, "originalPosition": 22}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "164d5fe7fc36a56da25617c0d114b4b27a2aba86", "author": {"user": {"login": "stevenpyzhang", "name": "Steven Zhang"}}, "url": "https://github.com/confluentinc/ksql/commit/164d5fe7fc36a56da25617c0d114b4b27a2aba86", "committedDate": "2020-03-19T17:34:04Z", "message": "add test for KsqlRequestConfig"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b66866b7a3f76547b217579935bc00240854d530", "author": {"user": {"login": "stevenpyzhang", "name": "Steven Zhang"}}, "url": "https://github.com/confluentinc/ksql/commit/b66866b7a3f76547b217579935bc00240854d530", "committedDate": "2020-03-19T17:32:37Z", "message": "add test for KsqlRequestConfig"}, "afterCommit": {"oid": "164d5fe7fc36a56da25617c0d114b4b27a2aba86", "author": {"user": {"login": "stevenpyzhang", "name": "Steven Zhang"}}, "url": "https://github.com/confluentinc/ksql/commit/164d5fe7fc36a56da25617c0d114b4b27a2aba86", "committedDate": "2020-03-19T17:34:04Z", "message": "add test for KsqlRequestConfig"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4NjYwMTEw", "url": "https://github.com/confluentinc/ksql/pull/4771#pullrequestreview-378660110", "createdAt": "2020-03-20T17:02:30Z", "commit": {"oid": "164d5fe7fc36a56da25617c0d114b4b27a2aba86"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 5, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}