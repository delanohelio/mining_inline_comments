{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA3MDA1OTk4", "number": 6476, "title": "test: fix KsqlVersion so it supports new version format", "bodyText": "Description\nPOM now has version set to 6.1.0-0, which KsqlVersion couldn't handle.  This causes any attempt to generate new historical QTT test cases to fail.\n\nUpdated KsqlVersion to be able to handle new format.\nAdded unit test for new format.\nAdded unit test to test against latest version in POM, so we pick this up earlier next time.\n\nTesting done\nUsual\nReviewer checklist\n\n Ensure docs are updated if necessary. (eg. if a user visible feature is being added or changed).\n Ensure relevant issues are linked (description should include text like \"Fixes #\")", "createdAt": "2020-10-20T18:22:48Z", "url": "https://github.com/confluentinc/ksql/pull/6476", "merged": true, "mergeCommit": {"oid": "f8bf2d9821fa07d113086fe2d7979170c9610942"}, "closed": true, "closedAt": "2020-10-20T18:39:05Z", "author": {"login": "big-andy-coates"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdUc_NLAH2gAyNTA3MDA1OTk4OmE3YjI4OWNmOGRiY2M3OGQ4YTBlNzY3ZjMzZDVlYjk4YzIxMjVhMjE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdUdOX4AH2gAyNTA3MDA1OTk4Ojg4ZjQ5YzgwZTY1YTMwYWY0NjRlNjc1ZDk1MmRmNTgxZjY0YWEzMzQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "a7b289cf8dbcc78d8a0e767f33d5eb98c2125a21", "author": {"user": {"login": "big-andy-coates", "name": "Andy Coates"}}, "url": "https://github.com/confluentinc/ksql/commit/a7b289cf8dbcc78d8a0e767f33d5eb98c2125a21", "committedDate": "2020-10-20T18:22:06Z", "message": "test: fix KsqlVersion so it supports new version format\n\nPOM now has version set to `6.1.0-0`, which `KsqlVersion` couldn't handle.  This causes any attempt to generate new historical QTT test cases to fail.\n\n- Updated KsqlVersion to be able to handle new format.\n- Added unit test for new format.\n- Added unit test to test against latest version in POM, so we pick this up earlier next time."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEzMDE5NDk5", "url": "https://github.com/confluentinc/ksql/pull/6476#pullrequestreview-513019499", "createdAt": "2020-10-20T18:30:28Z", "commit": {"oid": "a7b289cf8dbcc78d8a0e767f33d5eb98c2125a21"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMFQxODozMDoyOFrOHlLjbQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMFQxODozMDo0NVrOHlLkDw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODc0ODY1Mw==", "bodyText": "\ud83d\ude0d", "url": "https://github.com/confluentinc/ksql/pull/6476#discussion_r508748653", "createdAt": "2020-10-20T18:30:28Z", "author": {"login": "agavra"}, "path": "ksqldb-functional-tests/src/main/java/io/confluent/ksql/test/model/KsqlVersion.java", "diffHunk": "@@ -29,7 +29,7 @@\n public final class KsqlVersion implements Comparable<KsqlVersion> {\n \n   private static final Pattern VERSION_PATTERN = Pattern\n-      .compile(\"(\\\\d+)\\\\.(\\\\d+)(.\\\\d+)?(-SNAPSHOT)?\");\n+      .compile(\"(?<major>\\\\d+)\\\\.(?<minor>\\\\d+)(?<patch>.\\\\d+)?(?:-(SNAPSHOT|\\\\d+))?\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a7b289cf8dbcc78d8a0e767f33d5eb98c2125a21"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODc0ODgxNQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              public void shouldParseWeirdNewFormat() {\n          \n          \n            \n              public void shouldParseNanoVersions() {\n          \n      \n    \n    \n  \n\n\ud83d\ude44", "url": "https://github.com/confluentinc/ksql/pull/6476#discussion_r508748815", "createdAt": "2020-10-20T18:30:45Z", "author": {"login": "agavra"}, "path": "ksqldb-functional-tests/src/test/java/io/confluent/ksql/test/model/KsqlVersionTest.java", "diffHunk": "@@ -64,6 +64,16 @@ public void shouldParseMajorMinorPointSnapshot() {\n     assertThat(result.getVersion(), is(SemanticVersion.of(5, 4, 1)));\n   }\n \n+  @Test\n+  public void shouldParseWeirdNewFormat() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a7b289cf8dbcc78d8a0e767f33d5eb98c2125a21"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "88f49c80e65a30af464e675d952df581f64aa334", "author": {"user": {"login": "big-andy-coates", "name": "Andy Coates"}}, "url": "https://github.com/confluentinc/ksql/commit/88f49c80e65a30af464e675d952df581f64aa334", "committedDate": "2020-10-20T18:38:40Z", "message": "Update ksqldb-functional-tests/src/test/java/io/confluent/ksql/test/model/KsqlVersionTest.java\n\nCo-authored-by: Almog Gavra <almog@confluent.io>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4585, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}