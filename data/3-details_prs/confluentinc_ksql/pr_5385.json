{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE5NDIxMzAy", "number": 5385, "title": "feat: INSTR function #881", "bodyText": "Implements #881\nDescription\nThis adds implementation of INSTR function as described in https://docs.oracle.com/database/121/SQLRF/functions089.htm#SQLRF00651 (reported in #881)\nTesting done\nI have added unit tests and did manual testing.\nPlease note that I am looking for initial feedback only. I am aware that functional tests and documentation needs to be added.\nReviewer checklist\n\n Ensure docs are updated if necessary. (eg. if a user visible feature is being added or changed).\n Ensure relevant issues are linked (description should include text like \"Fixes #\")", "createdAt": "2020-05-18T10:53:33Z", "url": "https://github.com/confluentinc/ksql/pull/5385", "merged": true, "mergeCommit": {"oid": "ca86bbfad51e479d6847f84a0c7928f31d8a2b26"}, "closed": true, "closedAt": "2020-05-20T16:48:49Z", "author": {"login": "mateuszmrozewski"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcidmmdgH2gAyNDE5NDIxMzAyOjEyM2ZhMzRiNmUxNzZiMjJjY2RjOGY1MmI1ODNiMmI0MjY0ZTdhNzk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcjL8ufgFqTQxNTUyOTM2NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "123fa34b6e176b22ccdc8f52b583b2b4264e7a79", "author": {"user": {"login": "mateuszmrozewski", "name": "Mateusz Mrozewski"}}, "url": "https://github.com/confluentinc/ksql/commit/123fa34b6e176b22ccdc8f52b583b2b4264e7a79", "committedDate": "2020-05-18T10:48:55Z", "message": "feat: INSTR function #881\n\nAdds implementation of INSTR function"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzNzcwMzc0", "url": "https://github.com/confluentinc/ksql/pull/5385#pullrequestreview-413770374", "createdAt": "2020-05-18T16:49:04Z", "commit": {"oid": "123fa34b6e176b22ccdc8f52b583b2b4264e7a79"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ec5cd775b44d481e4cfe12898711e0ab8b3f9328", "author": {"user": {"login": "mateuszmrozewski", "name": "Mateusz Mrozewski"}}, "url": "https://github.com/confluentinc/ksql/commit/ec5cd775b44d481e4cfe12898711e0ab8b3f9328", "committedDate": "2020-05-19T09:53:14Z", "message": "Implements #881: additiona unit tests, fixed implementation, functional tests and documentation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE0NzIxNzE0", "url": "https://github.com/confluentinc/ksql/pull/5385#pullrequestreview-414721714", "createdAt": "2020-05-19T18:37:45Z", "commit": {"oid": "ec5cd775b44d481e4cfe12898711e0ab8b3f9328"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxODozNzo0NVrOGXtoZA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxODozODo0OFrOGXtqzw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzUxODA1Mg==", "bodyText": "we should specify here what it means to have negative position", "url": "https://github.com/confluentinc/ksql/pull/5385#discussion_r427518052", "createdAt": "2020-05-19T18:37:45Z", "author": {"login": "agavra"}, "path": "docs/developer-guide/ksqldb-reference/scalar-functions.md", "diffHunk": "@@ -316,6 +317,30 @@ INITCAP\n Capitalize the first letter in each word and convert all other letters\n to lowercase. Words are delimited by whitespace.\n \n+INSTR\n+-----\n+\n+`INSTR(string, substring, [position], [occurrence])`\n+\n+Returns a position of `substring` in `string` (first character is at position 1).\n+If `position` is given search starts from that position. ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ec5cd775b44d481e4cfe12898711e0ab8b3f9328"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzUxODY3MQ==", "bodyText": "let's fill this out \ud83d\ude02", "url": "https://github.com/confluentinc/ksql/pull/5385#discussion_r427518671", "createdAt": "2020-05-19T18:38:48Z", "author": {"login": "agavra"}, "path": "ksqldb-engine/src/main/java/io/confluent/ksql/function/udf/string/Instr.java", "diffHunk": "@@ -0,0 +1,66 @@\n+/*\n+ * Copyright 2018 Confluent Inc.\n+ *\n+ * Licensed under the Confluent Community License (the \"License\"); you may not use\n+ * this file except in compliance with the License.  You may obtain a copy of the\n+ * License at\n+ *\n+ * http://www.confluent.io/confluent-community-license\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OF ANY KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations under the License.\n+ */\n+\n+package io.confluent.ksql.function.udf.string;\n+\n+import static org.apache.commons.lang3.StringUtils.ordinalIndexOf;\n+import static org.apache.commons.lang3.StringUtils.substring;\n+\n+import io.confluent.ksql.function.udf.Udf;\n+import io.confluent.ksql.function.udf.UdfDescription;\n+import io.confluent.ksql.util.KsqlConstants;\n+import org.apache.commons.lang3.StringUtils;\n+\n+@UdfDescription(name = \"instr\",\n+    author = KsqlConstants.CONFLUENT_AUTHOR,\n+    description = \"PROPER DESCRIPTION\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ec5cd775b44d481e4cfe12898711e0ab8b3f9328"}, "originalPosition": 28}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE0NzUyOTgw", "url": "https://github.com/confluentinc/ksql/pull/5385#pullrequestreview-414752980", "createdAt": "2020-05-19T19:21:35Z", "commit": {"oid": "ec5cd775b44d481e4cfe12898711e0ab8b3f9328"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxOToyMTozNlrOGXvMQg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxOToyMTozNlrOGXvMQg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzU0MzYxOA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Returns a position of `substring` in `string` (first character is at position 1).\n          \n          \n            \n            Returns the position of `substring` in `string`. The first character is at position 1.", "url": "https://github.com/confluentinc/ksql/pull/5385#discussion_r427543618", "createdAt": "2020-05-19T19:21:36Z", "author": {"login": "JimGalasyn"}, "path": "docs/developer-guide/ksqldb-reference/scalar-functions.md", "diffHunk": "@@ -316,6 +317,30 @@ INITCAP\n Capitalize the first letter in each word and convert all other letters\n to lowercase. Words are delimited by whitespace.\n \n+INSTR\n+-----\n+\n+`INSTR(string, substring, [position], [occurrence])`\n+\n+Returns a position of `substring` in `string` (first character is at position 1).", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ec5cd775b44d481e4cfe12898711e0ab8b3f9328"}, "originalPosition": 17}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE0NzUzMjc2", "url": "https://github.com/confluentinc/ksql/pull/5385#pullrequestreview-414753276", "createdAt": "2020-05-19T19:22:00Z", "commit": {"oid": "ec5cd775b44d481e4cfe12898711e0ab8b3f9328"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxOToyMjowMFrOGXvNJg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxOToyMjowMFrOGXvNJg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzU0Mzg0Ng==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            If `position` is given search starts from that position. \n          \n          \n            \n            If `position` is provided, search starts from the specified position.", "url": "https://github.com/confluentinc/ksql/pull/5385#discussion_r427543846", "createdAt": "2020-05-19T19:22:00Z", "author": {"login": "JimGalasyn"}, "path": "docs/developer-guide/ksqldb-reference/scalar-functions.md", "diffHunk": "@@ -316,6 +317,30 @@ INITCAP\n Capitalize the first letter in each word and convert all other letters\n to lowercase. Words are delimited by whitespace.\n \n+INSTR\n+-----\n+\n+`INSTR(string, substring, [position], [occurrence])`\n+\n+Returns a position of `substring` in `string` (first character is at position 1).\n+If `position` is given search starts from that position. ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ec5cd775b44d481e4cfe12898711e0ab8b3f9328"}, "originalPosition": 18}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE0NzUzNjI3", "url": "https://github.com/confluentinc/ksql/pull/5385#pullrequestreview-414753627", "createdAt": "2020-05-19T19:22:31Z", "commit": {"oid": "ec5cd775b44d481e4cfe12898711e0ab8b3f9328"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxOToyMjozMVrOGXvOYg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxOToyMjozMVrOGXvOYg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzU0NDE2Mg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            If `occurrence` is given position of n-th occurrence is returned.\n          \n          \n            \n            If `occurrence` is provided, the position of the *n*-th occurrence is returned.", "url": "https://github.com/confluentinc/ksql/pull/5385#discussion_r427544162", "createdAt": "2020-05-19T19:22:31Z", "author": {"login": "JimGalasyn"}, "path": "docs/developer-guide/ksqldb-reference/scalar-functions.md", "diffHunk": "@@ -316,6 +317,30 @@ INITCAP\n Capitalize the first letter in each word and convert all other letters\n to lowercase. Words are delimited by whitespace.\n \n+INSTR\n+-----\n+\n+`INSTR(string, substring, [position], [occurrence])`\n+\n+Returns a position of `substring` in `string` (first character is at position 1).\n+If `position` is given search starts from that position. \n+If `occurrence` is given position of n-th occurrence is returned.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ec5cd775b44d481e4cfe12898711e0ab8b3f9328"}, "originalPosition": 19}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE0NzUzOTU2", "url": "https://github.com/confluentinc/ksql/pull/5385#pullrequestreview-414753956", "createdAt": "2020-05-19T19:22:58Z", "commit": {"oid": "ec5cd775b44d481e4cfe12898711e0ab8b3f9328"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxOToyMjo1OFrOGXvPYQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxOToyMjo1OFrOGXvPYQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzU0NDQxNw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            If `substring` is not found the return value is 0.\n          \n          \n            \n            If `substring` is not found, the return value is 0.", "url": "https://github.com/confluentinc/ksql/pull/5385#discussion_r427544417", "createdAt": "2020-05-19T19:22:58Z", "author": {"login": "JimGalasyn"}, "path": "docs/developer-guide/ksqldb-reference/scalar-functions.md", "diffHunk": "@@ -316,6 +317,30 @@ INITCAP\n Capitalize the first letter in each word and convert all other letters\n to lowercase. Words are delimited by whitespace.\n \n+INSTR\n+-----\n+\n+`INSTR(string, substring, [position], [occurrence])`\n+\n+Returns a position of `substring` in `string` (first character is at position 1).\n+If `position` is given search starts from that position. \n+If `occurrence` is given position of n-th occurrence is returned.\n+\n+Negative `position` causes the search to work from end to start of `string`.\n+\n+If `substring` is not found the return value is 0.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ec5cd775b44d481e4cfe12898711e0ab8b3f9328"}, "originalPosition": 23}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE0NzU0MTk5", "url": "https://github.com/confluentinc/ksql/pull/5385#pullrequestreview-414754199", "createdAt": "2020-05-19T19:23:21Z", "commit": {"oid": "ec5cd775b44d481e4cfe12898711e0ab8b3f9328"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "16a565c9ae182cbd63226380124d60162667c3fc", "author": {"user": {"login": "mateuszmrozewski", "name": "Mateusz Mrozewski"}}, "url": "https://github.com/confluentinc/ksql/commit/16a565c9ae182cbd63226380124d60162667c3fc", "committedDate": "2020-05-20T08:32:48Z", "message": "Implements #881\n\nAdding generated test topologies.\nImprovements in documentation based on code review."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE1NTI5MzY1", "url": "https://github.com/confluentinc/ksql/pull/5385#pullrequestreview-415529365", "createdAt": "2020-05-20T16:48:43Z", "commit": {"oid": "16a565c9ae182cbd63226380124d60162667c3fc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4780, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}