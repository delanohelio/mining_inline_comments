{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE3NDgxNzk4", "number": 5351, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo0MjozNVrOD8JjhQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo0MzoxMVrOD8JkdQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY0Mzk3NzAxOnYy", "diffSide": "RIGHT", "path": "ksqldb-api-reactive-streams-tck/src/test/java/io/confluent/ksql/api/tck/BlockingQueryPublisherVerificationTest.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo0MjozNVrOGU6YKw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNzowNDo0N1rOGU7Ovg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDU4MTE2Mw==", "bodyText": "did we intentionally change the condition to include elements == 0?", "url": "https://github.com/confluentinc/ksql/pull/5351#discussion_r424581163", "createdAt": "2020-05-13T16:42:35Z", "author": {"login": "agavra"}, "path": "ksqldb-api-reactive-streams-tck/src/test/java/io/confluent/ksql/api/tck/BlockingQueryPublisherVerificationTest.java", "diffHunk": "@@ -69,10 +72,14 @@ private GenericRow generateRow(long num) {\n \n   private static class TestQueryHandle implements PushQueryHandle {\n \n-    private final long elements;\n+    private final TransientQueryQueue queue;\n \n     public TestQueryHandle(final long elements) {\n-      this.elements = elements;\n+      final OptionalInt limit = elements == 0 || elements == Long.MAX_VALUE", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ee2b0a32420f6bd2dda683ad3d84e37c47888e6"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDU5NTEzNA==", "bodyText": "Yes, it was intentional - though I'm testing locally as I think this may be a bug in the current code - around LIMIT 0;", "url": "https://github.com/confluentinc/ksql/pull/5351#discussion_r424595134", "createdAt": "2020-05-13T17:04:47Z", "author": {"login": "big-andy-coates"}, "path": "ksqldb-api-reactive-streams-tck/src/test/java/io/confluent/ksql/api/tck/BlockingQueryPublisherVerificationTest.java", "diffHunk": "@@ -69,10 +72,14 @@ private GenericRow generateRow(long num) {\n \n   private static class TestQueryHandle implements PushQueryHandle {\n \n-    private final long elements;\n+    private final TransientQueryQueue queue;\n \n     public TestQueryHandle(final long elements) {\n-      this.elements = elements;\n+      final OptionalInt limit = elements == 0 || elements == Long.MAX_VALUE", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDU4MTE2Mw=="}, "originalCommit": {"oid": "1ee2b0a32420f6bd2dda683ad3d84e37c47888e6"}, "originalPosition": 41}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY0Mzk3OTQxOnYy", "diffSide": "RIGHT", "path": "ksqldb-engine/src/main/java/io/confluent/ksql/query/BlockingRowQueue.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo0MzoxMVrOGU6ZlQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo0MzoxMVrOGU6ZlQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDU4MTUyNQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n               * Sets the called back that will be called any time a new row is accepted into the queue.\n          \n          \n            \n               * Sets the callback that will be called any time a new row is accepted into the queue.", "url": "https://github.com/confluentinc/ksql/pull/5351#discussion_r424581525", "createdAt": "2020-05-13T16:43:11Z", "author": {"login": "agavra"}, "path": "ksqldb-engine/src/main/java/io/confluent/ksql/query/BlockingRowQueue.java", "diffHunk": "@@ -40,19 +39,36 @@\n   void setLimitHandler(LimitHandler limitHandler);\n \n   /**\n-   * Poll the queue for a single row\n+   * Sets the called back that will be called any time a new row is accepted into the queue.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ee2b0a32420f6bd2dda683ad3d84e37c47888e6"}, "originalPosition": 13}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3403, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}