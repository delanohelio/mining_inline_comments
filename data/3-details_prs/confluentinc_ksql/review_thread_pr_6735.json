{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM0NjM5MDMx", "number": 6735, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQxODozMDo1N1rOFCh00w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQxODozMDo1N1rOFCh00w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM4MTk1NjY3OnYy", "diffSide": "RIGHT", "path": "docs/developer-guide/syntax-reference.md", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQxODozMDo1N1rOIBvpew==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQxODo0MToyMlrOIBwSrg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODcwMDE1NQ==", "bodyText": "are you sure this is true? I thought there were some assumptions baked in at the ksql layer (not the serde layer) about string keys.", "url": "https://github.com/confluentinc/ksql/pull/6735#discussion_r538700155", "createdAt": "2020-12-08T18:30:57Z", "author": {"login": "agavra"}, "path": "docs/developer-guide/syntax-reference.md", "diffHunk": "@@ -254,13 +254,17 @@ SELECT ARRAY[s1.colA, s1.colB, s1.colC] FROM s1 EMIT CHANGES;\n MAP<KeyType, ValueType>\n ```\n \n+!!! note\n+    The `MAP` type is only supported for value columns, not key columns, as map keys\n+    may lead to unexpected behavior due to inconsistent serialization.\n+    This restriction includes nested types containing maps as well.\n+\n !!! note\n \t\tThe `DELIMITED` format doesn't support maps.\n \n ksqlDB supports fields that are maps. A map has a key and value type. All\n of the keys must be of the same type, and all of the values must be also\n-be of the same type. Currently only `STRING` keys are supported. The\n-value type can be any valid SQL type.\n+be of the same type.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e68be39ada6e147657d9c387e29b0c7ed3787874"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODcwNzg5NQ==", "bodyText": "That's funny, the reason I made this change was because I remembered #6182 which removed all the assumptions that were previously baked in at non-serde layers. However. I forgot that the PR didn't actually add support for protobuf maps with non-string keys, even though we in theory could. So ultimately you're right ( for the wrong reason ;) ). I'll put the statement back in.", "url": "https://github.com/confluentinc/ksql/pull/6735#discussion_r538707895", "createdAt": "2020-12-08T18:38:26Z", "author": {"login": "vcrfxia"}, "path": "docs/developer-guide/syntax-reference.md", "diffHunk": "@@ -254,13 +254,17 @@ SELECT ARRAY[s1.colA, s1.colB, s1.colC] FROM s1 EMIT CHANGES;\n MAP<KeyType, ValueType>\n ```\n \n+!!! note\n+    The `MAP` type is only supported for value columns, not key columns, as map keys\n+    may lead to unexpected behavior due to inconsistent serialization.\n+    This restriction includes nested types containing maps as well.\n+\n !!! note\n \t\tThe `DELIMITED` format doesn't support maps.\n \n ksqlDB supports fields that are maps. A map has a key and value type. All\n of the keys must be of the same type, and all of the values must be also\n-be of the same type. Currently only `STRING` keys are supported. The\n-value type can be any valid SQL type.\n+be of the same type.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODcwMDE1NQ=="}, "originalCommit": {"oid": "e68be39ada6e147657d9c387e29b0c7ed3787874"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODcxMDcwMg==", "bodyText": "Thanks for the catch!", "url": "https://github.com/confluentinc/ksql/pull/6735#discussion_r538710702", "createdAt": "2020-12-08T18:41:22Z", "author": {"login": "vcrfxia"}, "path": "docs/developer-guide/syntax-reference.md", "diffHunk": "@@ -254,13 +254,17 @@ SELECT ARRAY[s1.colA, s1.colB, s1.colC] FROM s1 EMIT CHANGES;\n MAP<KeyType, ValueType>\n ```\n \n+!!! note\n+    The `MAP` type is only supported for value columns, not key columns, as map keys\n+    may lead to unexpected behavior due to inconsistent serialization.\n+    This restriction includes nested types containing maps as well.\n+\n !!! note\n \t\tThe `DELIMITED` format doesn't support maps.\n \n ksqlDB supports fields that are maps. A map has a key and value type. All\n of the keys must be of the same type, and all of the values must be also\n-be of the same type. Currently only `STRING` keys are supported. The\n-value type can be any valid SQL type.\n+be of the same type.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODcwMDE1NQ=="}, "originalCommit": {"oid": "e68be39ada6e147657d9c387e29b0c7ed3787874"}, "originalPosition": 16}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2524, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}