{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEwMjU5NDAz", "number": 5205, "title": "fix: /query-stream endpoint should serialize Struct (MINOR)", "bodyText": "Description\nFixes #4996\n^ by switching from DatabindCodec.mapper to the JSON mapper used for the existing APIs. This also means we no longer fail to deserialize on unknown properties, which is nice to have for forward compatibility (in case we evolve the API to add additional properties in the future). The relevant unit test was updated accordingly.\nTesting done\nAdded unit test.\nReviewer checklist\n\n Ensure docs are updated if necessary. (eg. if a user visible feature is being added or changed).\n Ensure relevant issues are linked (description should include text like \"Fixes #\")", "createdAt": "2020-04-28T17:31:03Z", "url": "https://github.com/confluentinc/ksql/pull/5205", "merged": true, "mergeCommit": {"oid": "12b092bda160f614ef0b8096f77b7013efc3b190"}, "closed": true, "closedAt": "2020-04-30T22:03:10Z", "author": {"login": "vcrfxia"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcak_scAH2gAyNDEwMjU5NDAzOjIzNDdkYzY3ZmFiMTg0N2MzZDI3ZGUyZTIyNWRmNTQ1Y2E0MTA3MmE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABccKzQiAFqTQwMjIyNzE1Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2347dc67fab1847c3d27de2e225df545ca41072a", "author": {"user": {"login": "vcrfxia", "name": "Victoria Xia"}}, "url": "https://github.com/confluentinc/ksql/commit/2347dc67fab1847c3d27de2e225df545ca41072a", "committedDate": "2020-04-23T22:54:16Z", "message": "fix: support returning struct from /query-stream endpoint"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5294834400b88fdfa98b04b1cf67c863d66f5408", "author": {"user": {"login": "vcrfxia", "name": "Victoria Xia"}}, "url": "https://github.com/confluentinc/ksql/commit/5294834400b88fdfa98b04b1cf67c863d66f5408", "committedDate": "2020-04-24T03:37:19Z", "message": "fix: accomodate JsonMapper split"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3a094562610ecb3f134ee2d2e9e2a6f7100ea411", "author": {"user": {"login": "vcrfxia", "name": "Victoria Xia"}}, "url": "https://github.com/confluentinc/ksql/commit/3a094562610ecb3f134ee2d2e9e2a6f7100ea411", "committedDate": "2020-04-28T17:26:27Z", "message": "test: update unknown field test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAyMDY1MTMx", "url": "https://github.com/confluentinc/ksql/pull/5205#pullrequestreview-402065131", "createdAt": "2020-04-28T17:38:08Z", "commit": {"oid": "3a094562610ecb3f134ee2d2e9e2a6f7100ea411"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "02c2233353c701d694605689768cefe7a6d59d56", "author": {"user": {"login": "vcrfxia", "name": "Victoria Xia"}}, "url": "https://github.com/confluentinc/ksql/commit/02c2233353c701d694605689768cefe7a6d59d56", "committedDate": "2020-04-28T21:28:44Z", "message": "chore: remove special handling for unknown arg"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAyMjI3MTUy", "url": "https://github.com/confluentinc/ksql/pull/5205#pullrequestreview-402227152", "createdAt": "2020-04-28T21:30:59Z", "commit": {"oid": "02c2233353c701d694605689768cefe7a6d59d56"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQyMTozMTowMFrOGNnvoA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQyMTozMTowMFrOGNnvoA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjkzNTg0MA==", "bodyText": "Hey @purplefox , thanks for the review! I discovered more code related to deserializing with unknown fields that I've removed in my latest commit on this PR. Hopefully it still looks good?\nIt's a bit odd that there's a skipped number in these error codes now. Do you think it's better to leave it in and just mark it as unused?", "url": "https://github.com/confluentinc/ksql/pull/5205#discussion_r416935840", "createdAt": "2020-04-28T21:31:00Z", "author": {"login": "vcrfxia"}, "path": "ksqldb-rest-app/src/main/java/io/confluent/ksql/api/server/ErrorCodes.java", "diffHunk": "@@ -24,7 +24,6 @@ private ErrorCodes() {\n   }\n \n   public static final int ERROR_CODE_MISSING_PARAM = 1;\n-  public static final int ERROR_CODE_UNKNOWN_PARAM = 2;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "02c2233353c701d694605689768cefe7a6d59d56"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4803, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}