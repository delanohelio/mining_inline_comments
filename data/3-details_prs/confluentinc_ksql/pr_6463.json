{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA2MTAzNTM1", "number": 6463, "title": "test: minor fixes in RQTT [MINOR]", "bodyText": "Description\nFixes a few minor issues in QTT/RQTT.", "createdAt": "2020-10-19T16:15:19Z", "url": "https://github.com/confluentinc/ksql/pull/6463", "merged": true, "mergeCommit": {"oid": "5bca5382d3f8428b412ca0e1ec353c205f4dc07d"}, "closed": true, "closedAt": "2020-10-23T14:13:57Z", "author": {"login": "big-andy-coates"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdUGkLYAH2gAyNTA2MTAzNTM1OjlkZDM5ZjYyYzI1NjdkZDc4OTRjMjI3ODY1MDg4ZmUwM2I0ODUwNzY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdVV4iGAH2gAyNTA2MTAzNTM1OmM5MjRkM2M5NDAxNjBhYmYwYjkzYzIxMmE2N2VhNzBjNGY3ZTY5NDI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "9dd39f62c2567dd7894c227865088fe03b485076", "author": {"user": {"login": "big-andy-coates", "name": "Andy Coates"}}, "url": "https://github.com/confluentinc/ksql/commit/9dd39f62c2567dd7894c227865088fe03b485076", "committedDate": "2020-10-19T16:14:40Z", "message": "test: minor fixes in RQTT"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTExOTM0NTUx", "url": "https://github.com/confluentinc/ksql/pull/6463#pullrequestreview-511934551", "createdAt": "2020-10-19T16:15:59Z", "commit": {"oid": "9dd39f62c2567dd7894c227865088fe03b485076"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxNjoxNTo1OVrOHkWl2w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxNjoxNTo1OVrOHkWl2w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzg4MDkyMw==", "bodyText": "This was pointless as getTestLocation finds the first test in the file with the supplied name - so all get the same location.", "url": "https://github.com/confluentinc/ksql/pull/6463#discussion_r507880923", "createdAt": "2020-10-19T16:15:59Z", "author": {"login": "big-andy-coates"}, "path": "ksqldb-functional-tests/src/main/java/io/confluent/ksql/test/loader/JsonTestLoader.java", "diffHunk": "@@ -146,10 +145,8 @@ private static void throwOnDuplicateNames(final List<? extends Test> testCases)\n         .stream()\n         .filter(e -> e.getValue().size() > 1)\n         .map(e -> \"test name: '\" + e.getKey()\n-            + \"' found in files: \" + e.getValue().stream()\n-            .map(Test::getTestLocation)\n-            .map(TestLocation::toString)\n-            .collect(Collectors.joining(\",\")))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9dd39f62c2567dd7894c227865088fe03b485076"}, "originalPosition": 15}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTExOTM0OTUw", "url": "https://github.com/confluentinc/ksql/pull/6463#pullrequestreview-511934950", "createdAt": "2020-10-19T16:16:27Z", "commit": {"oid": "9dd39f62c2567dd7894c227865088fe03b485076"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxNjoxNjoyN1rOHkWnOw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxNjoxNjoyN1rOHkWnOw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzg4MTI3NQ==", "bodyText": "This code was neither waiting for the message to actually be sent, not failing if the message failed to send.", "url": "https://github.com/confluentinc/ksql/pull/6463#discussion_r507881275", "createdAt": "2020-10-19T16:16:27Z", "author": {"login": "big-andy-coates"}, "path": "ksqldb-functional-tests/src/test/java/io/confluent/ksql/test/rest/RestTestExecutor.java", "diffHunk": "@@ -215,14 +217,19 @@ private void produceInputs(final Map<String, List<Record>> inputs) {\n           topicInfo.getKeySerializer(),\n           topicInfo.getValueSerializer()\n       )) {\n-        for (final Record record : records) {\n-          producer.send(new ProducerRecord<>(\n-              topicName,\n-              null,\n-              record.timestamp().orElse(0L),\n-              record.key(),\n-              record.value()\n-          ));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9dd39f62c2567dd7894c227865088fe03b485076"}, "originalPosition": 26}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEyMTc0OTUx", "url": "https://github.com/confluentinc/ksql/pull/6463#pullrequestreview-512174951", "createdAt": "2020-10-19T21:31:59Z", "commit": {"oid": "9dd39f62c2567dd7894c227865088fe03b485076"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQyMTozMTo1OVrOHkibpA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQyMTozMTo1OVrOHkibpA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODA3NDkxNg==", "bodyText": "How did the tests pass if the test wasn't waiting for the records to be sent? Was the downstream validation waiting for records to arrive? (Took a quick skim of the code but didn't see it.) Was it just luck that record production tended to be quick?", "url": "https://github.com/confluentinc/ksql/pull/6463#discussion_r508074916", "createdAt": "2020-10-19T21:31:59Z", "author": {"login": "vcrfxia"}, "path": "ksqldb-functional-tests/src/test/java/io/confluent/ksql/test/rest/RestTestExecutor.java", "diffHunk": "@@ -215,14 +217,19 @@ private void produceInputs(final Map<String, List<Record>> inputs) {\n           topicInfo.getKeySerializer(),\n           topicInfo.getValueSerializer()\n       )) {\n-        for (final Record record : records) {\n-          producer.send(new ProducerRecord<>(\n-              topicName,\n-              null,\n-              record.timestamp().orElse(0L),\n-              record.key(),\n-              record.value()\n-          ));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzg4MTI3NQ=="}, "originalCommit": {"oid": "9dd39f62c2567dd7894c227865088fe03b485076"}, "originalPosition": 26}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c924d3c940160abf0b93c212a67ea70c4f7e6942", "author": {"user": {"login": "big-andy-coates", "name": "Andy Coates"}}, "url": "https://github.com/confluentinc/ksql/commit/c924d3c940160abf0b93c212a67ea70c4f7e6942", "committedDate": "2020-10-23T12:39:24Z", "message": "Merge branch 'master' into rqtt_minor"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4581, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}