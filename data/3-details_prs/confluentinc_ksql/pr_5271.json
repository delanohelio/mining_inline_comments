{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEzNjM3ODk4", "number": 5271, "title": "test: add group by test to ensure useful error on unknown function", "bodyText": "Description\nfixes: #5114\nAdded test to ensure the latest version of ksqlDb gives a meaningful error message if an unknown function is called with a non-aggregate select expression.  Previous versions failed with somewhat confusing error e.g.\nNon-aggregate SELECT expression(s) not part of GROUP BY: [WONT_FIND_ME(ID)]\n\nNow fails with:\nCan't find any functions with the name 'WONT_FIND_ME'\n\nAlso added test covering non-table UDAFs being used on a table source.\nTesting done\ntest only change.\nReviewer checklist\n\n Ensure docs are updated if necessary. (eg. if a user visible feature is being added or changed).\n Ensure relevant issues are linked (description should include text like \"Fixes #\")", "createdAt": "2020-05-05T16:56:54Z", "url": "https://github.com/confluentinc/ksql/pull/5271", "merged": true, "mergeCommit": {"oid": "76851fe5d2fc29ab08e723cae2d1494e31265f61"}, "closed": true, "closedAt": "2020-05-06T18:38:42Z", "author": {"login": "big-andy-coates"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABceXER1AH2gAyNDEzNjM3ODk4OjI4YThjOGNjZTJhNTUzMzRlYjMwOGE2NTM5ZWY3NDBlMzcyZThkYzc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcesAbXAH2gAyNDEzNjM3ODk4OjI0YTE5M2M3OTJhY2VhYmYxYjQ3ZjFkMDc4ODExNWFjZGYwZmViOWU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "28a8c8cce2a55334eb308a6539ef740e372e8dc7", "author": {"user": {"login": "big-andy-coates", "name": "Andy Coates"}}, "url": "https://github.com/confluentinc/ksql/commit/28a8c8cce2a55334eb308a6539ef740e372e8dc7", "committedDate": "2020-05-05T16:56:18Z", "message": "test: add group by test to ensure useful error on unknown function\n\nfixes: https://github.com/confluentinc/ksql/issues/5114\n\nAdded test to ensure the latest version of ksqlDb gives a meaningful error message if an unknown function is called with a non-aggregate select expression.  Previous versions failed with somewhat confusing error e.g.\n\n```\nNon-aggregate SELECT expression(s) not part of GROUP BY: [WONT_FIND_ME(ID)]\n```\n\nNow fails with:\n\n```\nCan't find any functions with the name 'WONT_FIND_ME'\n```"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3e5ae1d18291da3ff857ffec5d2061fdecda0cdd", "author": {"user": {"login": "big-andy-coates", "name": "Andy Coates"}}, "url": "https://github.com/confluentinc/ksql/commit/3e5ae1d18291da3ff857ffec5d2061fdecda0cdd", "committedDate": "2020-05-05T17:13:10Z", "message": "test: add tests covering non-table UDAFs used on tables"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA1OTkzMDQw", "url": "https://github.com/confluentinc/ksql/pull/5271#pullrequestreview-405993040", "createdAt": "2020-05-05T17:14:07Z", "commit": {"oid": "3e5ae1d18291da3ff857ffec5d2061fdecda0cdd"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQxNzoxNDowN1rOGQzd_A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQxNzoxNDowN1rOGQzd_A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDI3MzY2MA==", "bodyText": "Note: poached from #5257, which includes tests for the new class.", "url": "https://github.com/confluentinc/ksql/pull/5271#discussion_r420273660", "createdAt": "2020-05-05T17:14:07Z", "author": {"login": "big-andy-coates"}, "path": "ksqldb-common/src/main/java/io/confluent/ksql/util/GrammaticalJoiner.java", "diffHunk": "@@ -0,0 +1,78 @@\n+/*\n+ * Copyright 2020 Confluent Inc.\n+ *\n+ * Licensed under the Confluent Community License (the \"License\"); you may not use\n+ * this file except in compliance with the License.  You may obtain a copy of the\n+ * License at\n+ *\n+ * http://www.confluent.io/confluent-community-license\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OF ANY KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations under the License.\n+ */\n+\n+package io.confluent.ksql.util;\n+\n+import static java.util.Objects.requireNonNull;\n+\n+import java.util.Iterator;\n+import java.util.Objects;\n+import java.util.stream.Stream;\n+\n+/**\n+ * An object which joins pieces of text, with a separator and additional final word, allowing more\n+ * grammatically correct joining, e,g. \"a, b, c or d\".\n+ */\n+public final class GrammaticalJoiner {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3e5ae1d18291da3ff857ffec5d2061fdecda0cdd"}, "originalPosition": 28}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA2NzQ3MjI2", "url": "https://github.com/confluentinc/ksql/pull/5271#pullrequestreview-406747226", "createdAt": "2020-05-06T15:47:05Z", "commit": {"oid": "3e5ae1d18291da3ff857ffec5d2061fdecda0cdd"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "24a193c792aceabf1b47f1d0788115acdf0feb9e", "author": {"user": {"login": "big-andy-coates", "name": "Andy Coates"}}, "url": "https://github.com/confluentinc/ksql/commit/24a193c792aceabf1b47f1d0788115acdf0feb9e", "committedDate": "2020-05-06T17:20:06Z", "message": "chore: merge from master\n\nConflicting files\nksqldb-common/src/main/java/io/confluent/ksql/util/GrammaticalJoiner.java\nksqldb-functional-tests/src/test/resources/query-validation-tests/group-by.json"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4818, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}