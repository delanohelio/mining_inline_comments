{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE3ODEzMDcx", "number": 6587, "reviewThreads": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQxNDo0NjoxOFrOE2zJXQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQxNzozMTo0NlrOE24AJA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI1ODk2NTQxOnYy", "diffSide": "RIGHT", "path": "docs/developer-guide/ksqldb-reference/scalar-functions.md", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQxNDo0NjoxOFrOHvyKvQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQxNDo0NjoxOFrOHvyKvQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTg2NzA2OQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            | STRING | BOOLEAN | Any string that exactly matches `true`, case-insensitive, will be converted to `true`. Any other value will be converted to `false`. |\n          \n          \n            \n            | STRING | BOOLEAN | Any string that exactly matches `true`, case-insensitive, is converted to `true`. Any other value is converted to `false`. |", "url": "https://github.com/confluentinc/ksql/pull/6587#discussion_r519867069", "createdAt": "2020-11-09T14:46:18Z", "author": {"login": "JimGalasyn"}, "path": "docs/developer-guide/ksqldb-reference/scalar-functions.md", "diffHunk": "@@ -40,6 +40,26 @@ CREATE TABLE AGG AS\n    GROUP BY ID;\n ```\n \n+### CAST\n+\n+Since: -\n+\n+```sql\n+CAST(COL0 AS BIGINT)\n+```\n+\n+Converts one type to another. The following casts are supported:\n+\n+| from | to | notes |\n+|------|----|-------|\n+| ANY  | STRING | Converts the type to its string representation. |\n+| STRING | BOOLEAN | Any string that exactly matches `true`, case-insensitive, will be converted to `true`. Any other value will be converted to `false`. |", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cfa09516cbee230c662a96f3bb2e00f4d9cebee7"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI1ODk3MDI5OnYy", "diffSide": "RIGHT", "path": "docs/developer-guide/ksqldb-reference/scalar-functions.md", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQxNDo0NzoxM1rOHvyNnw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQxNDo0NzoxM1rOHvyNnw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTg2NzgwNw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            | STRUCT | STRUCT | Convert between structs of different field types. Only fields that existing in the target STRUCT type will be copied across. Any fields in the target type that do not exist in the source will be set to `NULL` |\n          \n          \n            \n            | STRUCT | STRUCT | Convert between structs of different field types. Only fields that exist in the target STRUCT type are copied across. Any fields in the target type that don't exist in the source are set to `NULL` |", "url": "https://github.com/confluentinc/ksql/pull/6587#discussion_r519867807", "createdAt": "2020-11-09T14:47:13Z", "author": {"login": "JimGalasyn"}, "path": "docs/developer-guide/ksqldb-reference/scalar-functions.md", "diffHunk": "@@ -40,6 +40,26 @@ CREATE TABLE AGG AS\n    GROUP BY ID;\n ```\n \n+### CAST\n+\n+Since: -\n+\n+```sql\n+CAST(COL0 AS BIGINT)\n+```\n+\n+Converts one type to another. The following casts are supported:\n+\n+| from | to | notes |\n+|------|----|-------|\n+| ANY  | STRING | Converts the type to its string representation. |\n+| STRING | BOOLEAN | Any string that exactly matches `true`, case-insensitive, will be converted to `true`. Any other value will be converted to `false`. |\n+| STRING | INT, BIGINT, DECIMAL, DOUBLE | Converts string representation of numbers to number types. Conversion will fail if text does not contain a number or the number does not fit in the indicated type. |\n+| INT, BIGINT, DECIMAL, DOUBLE | INT, BIGINT, DECIMAL, DOUBLE | Convert between numeric types. Conversion can result in rounding |\n+| ARRAY | ARRAY | Convert between arrays of different element types |   \n+| MAP | MAP | Convert between maps of different key and value types |   \n+| STRUCT | STRUCT | Convert between structs of different field types. Only fields that existing in the target STRUCT type will be copied across. Any fields in the target type that do not exist in the source will be set to `NULL` |", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cfa09516cbee230c662a96f3bb2e00f4d9cebee7"}, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI1ODk3MjQ5OnYy", "diffSide": "RIGHT", "path": "docs/developer-guide/ksqldb-reference/scalar-functions.md", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQxNDo0NzozNlrOHvyO5w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQxNDo1MjozMVrOHvydKA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTg2ODEzNQ==", "bodyText": "Since 0.14.0?", "url": "https://github.com/confluentinc/ksql/pull/6587#discussion_r519868135", "createdAt": "2020-11-09T14:47:36Z", "author": {"login": "JimGalasyn"}, "path": "docs/developer-guide/ksqldb-reference/scalar-functions.md", "diffHunk": "@@ -40,6 +40,26 @@ CREATE TABLE AGG AS\n    GROUP BY ID;\n ```\n \n+### CAST\n+\n+Since: -", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cfa09516cbee230c662a96f3bb2e00f4d9cebee7"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTg3MTc4NA==", "bodyText": "CAST has always been there...", "url": "https://github.com/confluentinc/ksql/pull/6587#discussion_r519871784", "createdAt": "2020-11-09T14:52:31Z", "author": {"login": "big-andy-coates"}, "path": "docs/developer-guide/ksqldb-reference/scalar-functions.md", "diffHunk": "@@ -40,6 +40,26 @@ CREATE TABLE AGG AS\n    GROUP BY ID;\n ```\n \n+### CAST\n+\n+Since: -", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTg2ODEzNQ=="}, "originalCommit": {"oid": "cfa09516cbee230c662a96f3bb2e00f4d9cebee7"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI1ODk3OTY4OnYy", "diffSide": "RIGHT", "path": "docs/developer-guide/ksqldb-reference/scalar-functions.md", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQxNDo0OToxM1rOHvyTeA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQxNDo1NTo1MFrOHvynvw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTg2OTMwNA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            | STRING | INT, BIGINT, DECIMAL, DOUBLE | Converts string representation of numbers to number types. Conversion will fail if text does not contain a number or the number does not fit in the indicated type. |\n          \n          \n            \n            | STRING | INT, BIGINT, DECIMAL, DOUBLE | Converts string representation of numbers to number types. Conversion fails if text doesn't contain a number or the number doesn't fit in the indicated type. |", "url": "https://github.com/confluentinc/ksql/pull/6587#discussion_r519869304", "createdAt": "2020-11-09T14:49:13Z", "author": {"login": "JimGalasyn"}, "path": "docs/developer-guide/ksqldb-reference/scalar-functions.md", "diffHunk": "@@ -40,6 +40,26 @@ CREATE TABLE AGG AS\n    GROUP BY ID;\n ```\n \n+### CAST\n+\n+Since: -\n+\n+```sql\n+CAST(COL0 AS BIGINT)\n+```\n+\n+Converts one type to another. The following casts are supported:\n+\n+| from | to | notes |\n+|------|----|-------|\n+| ANY  | STRING | Converts the type to its string representation. |\n+| STRING | BOOLEAN | Any string that exactly matches `true`, case-insensitive, will be converted to `true`. Any other value will be converted to `false`. |\n+| STRING | INT, BIGINT, DECIMAL, DOUBLE | Converts string representation of numbers to number types. Conversion will fail if text does not contain a number or the number does not fit in the indicated type. |", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cfa09516cbee230c662a96f3bb2e00f4d9cebee7"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTg2OTUyNg==", "bodyText": "Does \"fail\" mean throw an exception?", "url": "https://github.com/confluentinc/ksql/pull/6587#discussion_r519869526", "createdAt": "2020-11-09T14:49:31Z", "author": {"login": "JimGalasyn"}, "path": "docs/developer-guide/ksqldb-reference/scalar-functions.md", "diffHunk": "@@ -40,6 +40,26 @@ CREATE TABLE AGG AS\n    GROUP BY ID;\n ```\n \n+### CAST\n+\n+Since: -\n+\n+```sql\n+CAST(COL0 AS BIGINT)\n+```\n+\n+Converts one type to another. The following casts are supported:\n+\n+| from | to | notes |\n+|------|----|-------|\n+| ANY  | STRING | Converts the type to its string representation. |\n+| STRING | BOOLEAN | Any string that exactly matches `true`, case-insensitive, will be converted to `true`. Any other value will be converted to `false`. |\n+| STRING | INT, BIGINT, DECIMAL, DOUBLE | Converts string representation of numbers to number types. Conversion will fail if text does not contain a number or the number does not fit in the indicated type. |", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTg2OTMwNA=="}, "originalCommit": {"oid": "cfa09516cbee230c662a96f3bb2e00f4d9cebee7"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTg3NDQ5NQ==", "bodyText": "Sure, but 'throws an exception' doesn't necessarily mean anything to the user of ksqlDB.  This isn't a library where the dev using it needs to know to expect an exception.", "url": "https://github.com/confluentinc/ksql/pull/6587#discussion_r519874495", "createdAt": "2020-11-09T14:55:50Z", "author": {"login": "big-andy-coates"}, "path": "docs/developer-guide/ksqldb-reference/scalar-functions.md", "diffHunk": "@@ -40,6 +40,26 @@ CREATE TABLE AGG AS\n    GROUP BY ID;\n ```\n \n+### CAST\n+\n+Since: -\n+\n+```sql\n+CAST(COL0 AS BIGINT)\n+```\n+\n+Converts one type to another. The following casts are supported:\n+\n+| from | to | notes |\n+|------|----|-------|\n+| ANY  | STRING | Converts the type to its string representation. |\n+| STRING | BOOLEAN | Any string that exactly matches `true`, case-insensitive, will be converted to `true`. Any other value will be converted to `false`. |\n+| STRING | INT, BIGINT, DECIMAL, DOUBLE | Converts string representation of numbers to number types. Conversion will fail if text does not contain a number or the number does not fit in the indicated type. |", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTg2OTMwNA=="}, "originalCommit": {"oid": "cfa09516cbee230c662a96f3bb2e00f4d9cebee7"}, "originalPosition": 18}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI1OTY3MzY4OnYy", "diffSide": "RIGHT", "path": "ksqldb-functional-tests/src/test/resources/query-validation-tests/cast.json", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQxNzoxMTozMlrOHv4-Qg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQxNzoxMTozMlrOHv4-Qg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTk3ODU2Mg==", "bodyText": "f0 is a VARCHAR. Shouldn't it be an ARRAY<INT>?", "url": "https://github.com/confluentinc/ksql/pull/6587#discussion_r519978562", "createdAt": "2020-11-09T17:11:32Z", "author": {"login": "spena"}, "path": "ksqldb-functional-tests/src/test/resources/query-validation-tests/cast.json", "diffHunk": "@@ -14,6 +14,19 @@\n         \"message\": \"Invalid Select: Cast of STRING to ARRAY<INTEGER> is not supported\"\n       }\n     },\n+    {\n+      \"name\": \"array to string\",\n+      \"statements\": [\n+        \"CREATE STREAM TEST (f0 VARCHAR) WITH (kafka_topic='test_topic', value_format='JSON');\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b7a7bb166a3ab6e112bd7e5c5364772d6225b3dc"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI1OTczOTkxOnYy", "diffSide": "RIGHT", "path": "ksqldb-execution/src/main/java/io/confluent/ksql/execution/codegen/helpers/LambdaUtil.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQxNzoyNzowOFrOHv5mjg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQxNzoyNzowOFrOHv5mjg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTk4ODg3OA==", "bodyText": "Should it be good to have a unit test for this?", "url": "https://github.com/confluentinc/ksql/pull/6587#discussion_r519988878", "createdAt": "2020-11-09T17:27:08Z", "author": {"login": "spena"}, "path": "ksqldb-execution/src/main/java/io/confluent/ksql/execution/codegen/helpers/LambdaUtil.java", "diffHunk": "@@ -0,0 +1,49 @@\n+/*\n+ * Copyright 2020 Confluent Inc.\n+ *\n+ * Licensed under the Confluent Community License (the \"License\"); you may not use\n+ * this file except in compliance with the License.  You may obtain a copy of the\n+ * License at\n+ *\n+ * http://www.confluent.io/confluent-community-license\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OF ANY KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations under the License.\n+ */\n+\n+package io.confluent.ksql.execution.codegen.helpers;\n+\n+/**\n+ * Functions to help with generating code to work around the fact that the script engine doesn't\n+ * support lambdas.\n+ */\n+public final class LambdaUtil {\n+\n+  private LambdaUtil() {\n+  }\n+\n+  /**\n+   * Generate code to build a {@link java.util.function.Function}.\n+   *\n+   * @param argName the name of the single argument the  {@code lambdaBody} expects.\n+   * @param argType the type of the single argument the {@code lambdaBody} expects.\n+   * @param lambdaBody the body of the lambda. It will find the n\n+   * @return code to instantiate the function.\n+   */\n+  public static String function(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b7a7bb166a3ab6e112bd7e5c5364772d6225b3dc"}, "originalPosition": 35}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI1OTc2MTAwOnYy", "diffSide": "RIGHT", "path": "ksqldb-execution/src/main/java/io/confluent/ksql/execution/codegen/helpers/NullSafe.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQxNzozMTo0NlrOHv5zXQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQxNzozMTo0NlrOHv5zXQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTk5MjE1Nw==", "bodyText": "Unit tests? Seems useful to know what the returned code is.", "url": "https://github.com/confluentinc/ksql/pull/6587#discussion_r519992157", "createdAt": "2020-11-09T17:31:46Z", "author": {"login": "spena"}, "path": "ksqldb-execution/src/main/java/io/confluent/ksql/execution/codegen/helpers/NullSafe.java", "diffHunk": "@@ -0,0 +1,101 @@\n+/*\n+ * Copyright 2020 Confluent Inc.\n+ *\n+ * Licensed under the Confluent Community License (the \"License\"); you may not use\n+ * this file except in compliance with the License.  You may obtain a copy of the\n+ * License at\n+ *\n+ * http://www.confluent.io/confluent-community-license\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OF ANY KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations under the License.\n+ */\n+\n+package io.confluent.ksql.execution.codegen.helpers;\n+\n+import java.util.function.Function;\n+\n+/**\n+ * Helper functions around null handling\n+ */\n+public final class NullSafe {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b7a7bb166a3ab6e112bd7e5c5364772d6225b3dc"}, "originalPosition": 23}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2620, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}