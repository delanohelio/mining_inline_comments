{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMyODU5NTU1", "number": 6727, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQxODoxNTowMVrOFChNlw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQxODoxNTowMVrOFChNlw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM4MTg1NjIzOnYy", "diffSide": "RIGHT", "path": "ksqldb-parser/src/main/java/io/confluent/ksql/parser/AstBuilder.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQxODoxNTowMVrOIBuoqw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQxOToyODoxOVrOIBydHw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODY4MzU2Mw==", "bodyText": "nit: might make sense to include the GH ticket in the error message so that users can understand which part and what to do about it (namely, make the nested parenthesis less nested)", "url": "https://github.com/confluentinc/ksql/pull/6727#discussion_r538683563", "createdAt": "2020-12-08T18:15:01Z", "author": {"login": "agavra"}, "path": "ksqldb-parser/src/main/java/io/confluent/ksql/parser/AstBuilder.java", "diffHunk": "@@ -1474,9 +1474,13 @@ private static OptionalInt getLimit(final LimitClauseContext limitContext) {\n   }\n \n   private static Set<SourceName> getSources(final ParseTree parseTree) {\n-    final SourceAccumulator accumulator = new SourceAccumulator();\n-    accumulator.visit(parseTree);\n-    return accumulator.getSources();\n+    try {\n+      final SourceAccumulator accumulator = new SourceAccumulator();\n+      accumulator.visit(parseTree);\n+      return accumulator.getSources();\n+    } catch (StackOverflowError e) {\n+      throw new KsqlException(\"Error processing statement: Statement is too large to parse.\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "947b3d3a5865f7f2f3940d7b44a373333d10ad29"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODc0NjE0Mw==", "bodyText": "I updated the error messages to suggest that nested expressions could be causing the error.", "url": "https://github.com/confluentinc/ksql/pull/6727#discussion_r538746143", "createdAt": "2020-12-08T19:28:19Z", "author": {"login": "stevenpyzhang"}, "path": "ksqldb-parser/src/main/java/io/confluent/ksql/parser/AstBuilder.java", "diffHunk": "@@ -1474,9 +1474,13 @@ private static OptionalInt getLimit(final LimitClauseContext limitContext) {\n   }\n \n   private static Set<SourceName> getSources(final ParseTree parseTree) {\n-    final SourceAccumulator accumulator = new SourceAccumulator();\n-    accumulator.visit(parseTree);\n-    return accumulator.getSources();\n+    try {\n+      final SourceAccumulator accumulator = new SourceAccumulator();\n+      accumulator.visit(parseTree);\n+      return accumulator.getSources();\n+    } catch (StackOverflowError e) {\n+      throw new KsqlException(\"Error processing statement: Statement is too large to parse.\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODY4MzU2Mw=="}, "originalCommit": {"oid": "947b3d3a5865f7f2f3940d7b44a373333d10ad29"}, "originalPosition": 12}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2519, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}