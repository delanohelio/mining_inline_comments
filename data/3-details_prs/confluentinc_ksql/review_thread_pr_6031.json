{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY4MTY3OTE4", "number": 6031, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQwMToxNjoxNlrOEZRm6Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQwMToxOToyNVrOEZRpGQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk0OTM4MzQ1OnYy", "diffSide": "RIGHT", "path": "ksqldb-rest-app/src/main/java/io/confluent/ksql/rest/server/computation/DistributingExecutor.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQwMToxNjoxNlrOHB_9Kw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQxOToyMToxMVrOHCim1A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTg1ODQ3NQ==", "bodyText": "can we abstract this out as a Supplier<Boolean> instead?", "url": "https://github.com/confluentinc/ksql/pull/6031#discussion_r471858475", "createdAt": "2020-08-18T01:16:16Z", "author": {"login": "rodesai"}, "path": "ksqldb-rest-app/src/main/java/io/confluent/ksql/rest/server/computation/DistributingExecutor.java", "diffHunk": "@@ -61,14 +62,15 @@\n \n   public DistributingExecutor(\n       final KsqlConfig ksqlConfig,\n-      final CommandQueue commandQueue,\n+      final CommandRunner commandRunner,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ca1d143caf7c474773be66c6447f200b7ca23fa0"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjQyNjE5Ng==", "bodyText": "done", "url": "https://github.com/confluentinc/ksql/pull/6031#discussion_r472426196", "createdAt": "2020-08-18T19:21:11Z", "author": {"login": "stevenpyzhang"}, "path": "ksqldb-rest-app/src/main/java/io/confluent/ksql/rest/server/computation/DistributingExecutor.java", "diffHunk": "@@ -61,14 +62,15 @@\n \n   public DistributingExecutor(\n       final KsqlConfig ksqlConfig,\n-      final CommandQueue commandQueue,\n+      final CommandRunner commandRunner,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTg1ODQ3NQ=="}, "originalCommit": {"oid": "ca1d143caf7c474773be66c6447f200b7ca23fa0"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk0OTM4OTA1OnYy", "diffSide": "RIGHT", "path": "ksqldb-rest-model/src/main/java/io/confluent/ksql/rest/DefaultErrorMessages.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQwMToxOToyNVrOHCAAWA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQxOToyMjowN1rOHCio3w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTg1OTI4OA==", "bodyText": "I'd drop the references to CommandRunner or command topic here as they are implementation details of the server that we shouldn't leak in the error message. How about something like:\nFailed to process KSQL statement. The server has encountered an incompatible entry in its log and cannot process further statements. This is most likely due to the service being rolled back to an earlier version.", "url": "https://github.com/confluentinc/ksql/pull/6031#discussion_r471859288", "createdAt": "2020-08-18T01:19:25Z", "author": {"login": "rodesai"}, "path": "ksqldb-rest-model/src/main/java/io/confluent/ksql/rest/DefaultErrorMessages.java", "diffHunk": "@@ -19,6 +19,15 @@\n \n public class DefaultErrorMessages implements ErrorMessages {\n \n+  static String COMMAND_RUNNER_DEGRADED_ERROR_MESSAGE =", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ca1d143caf7c474773be66c6447f200b7ca23fa0"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjQyNjcxOQ==", "bodyText": "I've updated the error message. I'm going to reuse COMMAND_RUNNER_DEGRADED_ERROR_MESSAGE for adding warnings later on to all responses from the KsqlResource so I moved \"Failed to process KSQL statement\" to the DistributingExecutor.", "url": "https://github.com/confluentinc/ksql/pull/6031#discussion_r472426719", "createdAt": "2020-08-18T19:22:07Z", "author": {"login": "stevenpyzhang"}, "path": "ksqldb-rest-model/src/main/java/io/confluent/ksql/rest/DefaultErrorMessages.java", "diffHunk": "@@ -19,6 +19,15 @@\n \n public class DefaultErrorMessages implements ErrorMessages {\n \n+  static String COMMAND_RUNNER_DEGRADED_ERROR_MESSAGE =", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTg1OTI4OA=="}, "originalCommit": {"oid": "ca1d143caf7c474773be66c6447f200b7ca23fa0"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2886, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}