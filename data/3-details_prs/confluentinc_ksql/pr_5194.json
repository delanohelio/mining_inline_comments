{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA5NDMyNDYx", "number": 5194, "title": "chore: add AS_VALUE Udf", "bodyText": "Description\nPart of klip-24.\nA Udf that indicates that a key column in a projection should be copied into a value column, for example:\n-- Given:\nCREATE STREAM INPUT (ID INT KEY, V0 INT, V1 INT) WITH (kafka_topic='input', value_format='JSON');\n\n-- When:\nCREATE STREAM OUTPUT AS SELECT ID, AS_VALUE(ID) AS ID_COPY, V1 FROM INPUT;\n\n-- Then:\n-- resulting schema: ID INT KEY, ID_COPY INT, V1 INT\nNote, the UDF doesn't actually do anything as yet. It requires the request of klip-24 to enable its true purpose.\nDocumentation for this PR will be done along with all the klip-24 / any-key-name work. This is tracked by: #4686\nTesting done\nusual\nReviewer checklist\n\n Ensure docs are updated if necessary. (eg. if a user visible feature is being added or changed).\n Ensure relevant issues are linked (description should include text like \"Fixes #\")", "createdAt": "2020-04-27T11:18:05Z", "url": "https://github.com/confluentinc/ksql/pull/5194", "merged": true, "mergeCommit": {"oid": "c030382e743539cdfedf2f4230e3095c8ecfaf0d"}, "closed": true, "closedAt": "2020-04-28T09:43:24Z", "author": {"login": "big-andy-coates"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcbtax8gH2gAyNDA5NDMyNDYxOmEzYzRmMzBhZmRlZDdiZTM4NWYxOThkNjYzYjMzYzBjN2ZiMTAxODk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcb2E8vgH2gAyNDA5NDMyNDYxOmQxMTg2MTAzNDliMTIyZmM4NjQ4ZGJkMjQxNTc5MGVjNGVjNzViNGU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "a3c4f30afded7be385f198d663b33c0c7fb10189", "author": {"user": {"login": "big-andy-coates", "name": "Andy Coates"}}, "url": "https://github.com/confluentinc/ksql/commit/a3c4f30afded7be385f198d663b33c0c7fb10189", "committedDate": "2020-04-27T11:17:01Z", "message": "chore: add AS_VALUE Udf\n\nPart of [klip-24](https://github.com/confluentinc/ksql/pull/5115).\n\nA Udf that indicates that a key column in a projection should be copied into a value column, for example:\n\n```sql\n-- Given:\nCREATE STREAM INPUT (ID INT KEY, V0 INT, V1 INT) WITH (kafka_topic='input', value_format='JSON');\n\n-- When:\nCREATE STREAM OUTPUT AS SELECT ID, AS_VALUE(ID) AS ID_COPY, V1 FROM INPUT;\n\n-- Then:\n-- resulting schema: ID INT KEY, ID_COPY INT, V1 INT\n```\n\nNote, the UDF doesn't actually _do_ anything as yet. It requires the request of klip-24 to enable its true purpose."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAxMDc3NDc4", "url": "https://github.com/confluentinc/ksql/pull/5194#pullrequestreview-401077478", "createdAt": "2020-04-27T15:40:02Z", "commit": {"oid": "a3c4f30afded7be385f198d663b33c0c7fb10189"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QxNTo0MDowMlrOGMp3yA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QxNTo0MDowMlrOGMp3yA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTkyMjEyMA==", "bodyText": "I think generics would work here:\npublic <T> T asValue(@UdfParameter final T val)", "url": "https://github.com/confluentinc/ksql/pull/5194#discussion_r415922120", "createdAt": "2020-04-27T15:40:02Z", "author": {"login": "agavra"}, "path": "ksqldb-engine/src/main/java/io/confluent/ksql/function/udf/AsValue.java", "diffHunk": "@@ -0,0 +1,50 @@\n+/*\n+ * Copyright 2020 Confluent Inc.\n+ *\n+ * Licensed under the Confluent Community License (the \"License\"); you may not use\n+ * this file except in compliance with the License.  You may obtain a copy of the\n+ * License at\n+ *\n+ * http://www.confluent.io/confluent-community-license\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OF ANY KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations under the License.\n+ */\n+\n+package io.confluent.ksql.function.udf;\n+\n+@SuppressWarnings(\"MethodMayBeStatic\")\n+@UdfDescription(name = \"AS_VALUE\", description = AsValue.DESCRIPTION)\n+public class AsValue {\n+\n+  static final String DESCRIPTION = \"Used exclusively in the projection of a query to allow a key\"\n+      + \"column to be copied into the value schema. Has no affect if used anywhere else.\";\n+\n+  @Udf\n+  public Boolean asValue(@UdfParameter final Boolean val) {\n+    return val;\n+  }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a3c4f30afded7be385f198d663b33c0c7fb10189"}, "originalPosition": 28}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fb0fe7cac1f06e1403485de0ab2b8b9e8c8e0c18", "author": {"user": {"login": "big-andy-coates", "name": "Andy Coates"}}, "url": "https://github.com/confluentinc/ksql/commit/fb0fe7cac1f06e1403485de0ab2b8b9e8c8e0c18", "committedDate": "2020-04-27T21:21:37Z", "message": "chore: simplify"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d118610349b122fc8648dbd2415790ec4ec75b4e", "author": {"user": {"login": "big-andy-coates", "name": "Andy Coates"}}, "url": "https://github.com/confluentinc/ksql/commit/d118610349b122fc8648dbd2415790ec4ec75b4e", "committedDate": "2020-04-27T21:22:19Z", "message": "chore: simplify"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4797, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}