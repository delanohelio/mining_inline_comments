{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkxNzE3Njkw", "number": 6285, "title": "test: correct bug in QTT that meant some tests were ignored", "bodyText": "Description\nSome QTT test cases used input rather than inputs and output rather than outputs. Previously, QTT would have detected this mistake, but the check has been removed.\nThis change adds back in the check to ensure a test case provides at least one of:\n\nan expected exception\ninput messages\noutput messages\n\nThe change also corrects the bad tests and their historic plans\nTesting done\nTest only change.\nReviewer checklist\n\n Ensure docs are updated if necessary. (eg. if a user visible feature is being added or changed).\n Ensure relevant issues are linked (description should include text like \"Fixes #\")", "createdAt": "2020-09-23T11:47:56Z", "url": "https://github.com/confluentinc/ksql/pull/6285", "merged": true, "mergeCommit": {"oid": "bb7c74e3752daf311be42a4ff0316a0c2f21595f"}, "closed": true, "closedAt": "2020-09-23T13:14:06Z", "author": {"login": "big-andy-coates"}, "timelineItems": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdLrJ6kgH2gAyNDkxNzE3NjkwOmQwODhlY2FlYTU2ZjhlMTZjOTFmYzRmZGU4MjRlNmQxOGYwNDc4NmY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdLr9RrgFqTQ5NDYxNzU2Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d088ecaea56f8e16c91fc4fde824e6d18f04786f", "author": {"user": {"login": "big-andy-coates", "name": "Andy Coates"}}, "url": "https://github.com/confluentinc/ksql/commit/d088ecaea56f8e16c91fc4fde824e6d18f04786f", "committedDate": "2020-09-23T11:47:09Z", "message": "test: correct bug in QTT that meant some tests were ignored\n\nSome QTT test cases used `input` rather than `inputs` and `output` rather than `outputs`. Previously, QTT would have detected this mistake, but the check has been removed.\n\nThis change adds back in the check to ensure a test case provides at least one of:\n\n- an expected exception\n- input messages\n- output messages\n\nThe change also corrects the bad tests and their historic plans"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk0NjE3NTY2", "url": "https://github.com/confluentinc/ksql/pull/6285#pullrequestreview-494617566", "createdAt": "2020-09-23T12:43:06Z", "commit": {"oid": "d088ecaea56f8e16c91fc4fde824e6d18f04786f"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yM1QxMjo0MzowNlrOHWrhUQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yM1QxMjo0MzowNlrOHWrhUQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzU0Mzc2MQ==", "bodyText": "How come we only require one of inputs or outputs to be present? Under what scenario would it make sense to provide one and not the other?", "url": "https://github.com/confluentinc/ksql/pull/6285#discussion_r493543761", "createdAt": "2020-09-23T12:43:06Z", "author": {"login": "vcrfxia"}, "path": "ksqldb-functional-tests/src/main/java/io/confluent/ksql/test/model/TestCaseNode.java", "diffHunk": "@@ -133,12 +134,22 @@ public VersionBoundsNode versionBounds() {\n   }\n \n   private void validate() {\n-    if (this.name.isEmpty()) {\n+    if (name.isEmpty()) {\n       throw new MissingFieldException(\"name\");\n     }\n \n-    if (this.statements.isEmpty()) {\n-      throw new InvalidFieldException(\"statements\", \"was empty\");\n+    try {\n+      if (statements.isEmpty()) {\n+        throw new InvalidFieldException(\"statements\", \"was empty\");\n+      }\n+\n+      if (!expectedException.isPresent() && inputs.isEmpty() && outputs.isEmpty()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d088ecaea56f8e16c91fc4fde824e6d18f04786f"}, "originalPosition": 24}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4671, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}