{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA1MDg2OTk0", "number": 5094, "title": "refactor: Migrate /heartbeat and /clusterStatus endpoints", "bodyText": "Description\nThis is a stacked PR so please only review the top commit(s).\nThis PR migrates the /heartbeat and /clusterStatus endpoints to Vert.x\nIt also removes the JAX-RS annotations from already ported endpoints.\nTesting done\nNon functional change.\nReviewer checklist\n\n Ensure docs are updated if necessary. (eg. if a user visible feature is being added or changed).\n Ensure relevant issues are linked (description should include text like \"Fixes #\")", "createdAt": "2020-04-17T11:48:31Z", "url": "https://github.com/confluentinc/ksql/pull/5094", "merged": true, "mergeCommit": {"oid": "9a95091eeb8e02e2856cf8f62fde1f769ce5746c"}, "closed": true, "closedAt": "2020-04-22T08:17:46Z", "author": {"login": "purplefox"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcaDBObABqjMyNTkxODg3MjQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcaD2kfABqjMyNTk0MDA5OTY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c37480eab8f8edbcc1da60b3d9cc51f11d2f573a", "author": {"user": {"login": "purplefox", "name": "Tim Fox"}}, "url": "https://github.com/confluentinc/ksql/commit/c37480eab8f8edbcc1da60b3d9cc51f11d2f573a", "committedDate": "2020-04-17T11:46:52Z", "message": "migrate heartbeat and clusterStatus"}, "afterCommit": {"oid": "81796fc839bb8e0efb02811cc1b0f86d3f86f4c5", "author": {"user": {"login": "purplefox", "name": "Tim Fox"}}, "url": "https://github.com/confluentinc/ksql/commit/81796fc839bb8e0efb02811cc1b0f86d3f86f4c5", "committedDate": "2020-04-22T07:18:55Z", "message": "migrate heartbeat and clusterStatus"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk3ODkyNjc5", "url": "https://github.com/confluentinc/ksql/pull/5094#pullrequestreview-397892679", "createdAt": "2020-04-22T06:55:33Z", "commit": {"oid": "c37480eab8f8edbcc1da60b3d9cc51f11d2f573a"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQwNjo1NTozNFrOGJmWBA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQwNjo1NTozNFrOGJmWBA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjcxODU5Ng==", "bodyText": "What's the purpose of continuing to register migrated resources?", "url": "https://github.com/confluentinc/ksql/pull/5094#discussion_r412718596", "createdAt": "2020-04-22T06:55:34Z", "author": {"login": "vcrfxia"}, "path": "ksqldb-rest-app/src/main/java/io/confluent/ksql/rest/server/KsqlRestApplication.java", "diffHunk": "@@ -356,10 +367,9 @@ public void setupResources(final Configurable<?> config, final KsqlRestConfig ap\n         this.ksqlConfigNoPort)\n     );\n \n-    if (heartbeatAgent.isPresent()) {\n-      config.register(new HeartbeatResource(heartbeatAgent.get()));\n-      config.register(new ClusterStatusResource(\n-          ksqlEngine, heartbeatAgent.get(), lagReportingAgent));\n+    if (heartbeatResource.isPresent()) {\n+      config.register(heartbeatResource.get());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c37480eab8f8edbcc1da60b3d9cc51f11d2f573a"}, "originalPosition": 35}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "35fa5f7462b6c2748a83cfe4a101f167665562ac", "author": {"user": {"login": "purplefox", "name": "Tim Fox"}}, "url": "https://github.com/confluentinc/ksql/commit/35fa5f7462b6c2748a83cfe4a101f167665562ac", "committedDate": "2020-04-22T08:16:52Z", "message": "migrate heartbeats"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b7280c9781e47004833557a16e84fd39100fa43a", "author": {"user": {"login": "purplefox", "name": "Tim Fox"}}, "url": "https://github.com/confluentinc/ksql/commit/b7280c9781e47004833557a16e84fd39100fa43a", "committedDate": "2020-04-22T08:16:53Z", "message": "migrate heartbeat and clusterStatus"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "81796fc839bb8e0efb02811cc1b0f86d3f86f4c5", "author": {"user": {"login": "purplefox", "name": "Tim Fox"}}, "url": "https://github.com/confluentinc/ksql/commit/81796fc839bb8e0efb02811cc1b0f86d3f86f4c5", "committedDate": "2020-04-22T07:18:55Z", "message": "migrate heartbeat and clusterStatus"}, "afterCommit": {"oid": "b7280c9781e47004833557a16e84fd39100fa43a", "author": {"user": {"login": "purplefox", "name": "Tim Fox"}}, "url": "https://github.com/confluentinc/ksql/commit/b7280c9781e47004833557a16e84fd39100fa43a", "committedDate": "2020-04-22T08:16:53Z", "message": "migrate heartbeat and clusterStatus"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4848, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}