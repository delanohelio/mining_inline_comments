{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU4NzEyMzM5", "number": 5902, "title": "build: temporarily suppress deprecation warnings for RETIRES config", "bodyText": "Note, this is a testing only change.\nThis PR changes the deprecated RETRIES config and instead uses the recommended DELIVERY_TIMEOUT_MS configuration. See https://cwiki.apache.org/confluence/display/KAFKA/KIP-572%3A+Improve+timeouts+and+retries+in+Kafka+Streams and\n    /**\n     * <code>retries</code>\n     * @deprecated since 2.7\n     */\n    @Deprecated\n    public static final String RETRIES_CONFIG = CommonClientConfigs.RETRIES_CONFIG;\n    private static final String RETRIES_DOC = \"(Deprecated) Setting a value greater than zero will cause the client to resend any record whose send fails with a potentially transient error.\"\n            + \" Note that this retry is no different than if the client resent the record upon receiving the error.\"\n            + \" Allowing retries without setting <code>\" + MAX_IN_FLIGHT_REQUESTS_PER_CONNECTION + \"</code> to 1 will potentially change the\"\n            + \" ordering of records because if two batches are sent to a single partition, and the first fails and is retried but the second\"\n            + \" succeeds, then the records in the second batch may appear first. Note additionally that produce requests will be\"\n            + \" failed before the number of retries has been exhausted if the timeout configured by\"\n            + \" <code>\" + DELIVERY_TIMEOUT_MS_CONFIG + \"</code> expires first before successful acknowledgement. Users should generally\"\n            + \" prefer to leave this config unset and instead use <code>\" + DELIVERY_TIMEOUT_MS_CONFIG + \"</code> to control\"\n            + \" retry behavior.\";", "createdAt": "2020-07-29T21:26:31Z", "url": "https://github.com/confluentinc/ksql/pull/5902", "merged": true, "mergeCommit": {"oid": "7cf54be123244a4a923488986de36a26be85d920"}, "closed": true, "closedAt": "2020-07-30T16:22:48Z", "author": {"login": "agavra"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc5x7b5ABqjM2MDA5NTI2MDE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc7U9_3AFqTQ2MDE4NTEwNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ff7d91cc4d9cd15ab8f911e5aa481994bc73ffb9", "author": {"user": {"login": "agavra", "name": "Almog Gavra"}}, "url": "https://github.com/confluentinc/ksql/commit/ff7d91cc4d9cd15ab8f911e5aa481994bc73ffb9", "committedDate": "2020-07-29T21:24:52Z", "message": "build: remove use of deprecated config"}, "afterCommit": {"oid": "f3692523449172304b1796e03cdff514f7794f80", "author": {"user": {"login": "agavra", "name": "Almog Gavra"}}, "url": "https://github.com/confluentinc/ksql/commit/f3692523449172304b1796e03cdff514f7794f80", "committedDate": "2020-07-29T21:29:27Z", "message": "build: remove use of deprecated config"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU3OTIyNzc1", "url": "https://github.com/confluentinc/ksql/pull/5902#pullrequestreview-457922775", "createdAt": "2020-07-29T21:49:17Z", "commit": {"oid": "f3692523449172304b1796e03cdff514f7794f80"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4f13a19ce51d9c0041337445510fcc9669fba0e1", "author": {"user": {"login": "agavra", "name": "Almog Gavra"}}, "url": "https://github.com/confluentinc/ksql/commit/4f13a19ce51d9c0041337445510fcc9669fba0e1", "committedDate": "2020-07-30T16:19:45Z", "message": "build: temporarily deprecate build failures while we look into upgrading"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "420c81480ed2e17a30e73ab9e9b46d4e7d8da212", "author": {"user": {"login": "agavra", "name": "Almog Gavra"}}, "url": "https://github.com/confluentinc/ksql/commit/420c81480ed2e17a30e73ab9e9b46d4e7d8da212", "committedDate": "2020-07-29T22:08:01Z", "message": "build: change to higher default"}, "afterCommit": {"oid": "4f13a19ce51d9c0041337445510fcc9669fba0e1", "author": {"user": {"login": "agavra", "name": "Almog Gavra"}}, "url": "https://github.com/confluentinc/ksql/commit/4f13a19ce51d9c0041337445510fcc9669fba0e1", "committedDate": "2020-07-30T16:19:45Z", "message": "build: temporarily deprecate build failures while we look into upgrading"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYwMTgzNzE3", "url": "https://github.com/confluentinc/ksql/pull/5902#pullrequestreview-460183717", "createdAt": "2020-08-03T16:51:18Z", "commit": {"oid": "4f13a19ce51d9c0041337445510fcc9669fba0e1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QxNjo1MToxOFrOG7BB_g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QxNjo1MToxOFrOG7BB_g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDUzNjA2Mg==", "bodyText": "Why are you reducing retries from MAX_VALUE to 10? Are you trying to bound the test time in case of failure? Instead of reducing retries you should set delivery.timeout.ms for this case.", "url": "https://github.com/confluentinc/ksql/pull/5902#discussion_r464536062", "createdAt": "2020-08-03T16:51:18Z", "author": {"login": "mjsax"}, "path": "ksqldb-test-util/src/main/java/io/confluent/ksql/test/util/EmbeddedSingleNodeKafkaCluster.java", "diffHunk": "@@ -246,6 +246,7 @@ public String bootstrapServers(final SecurityProtocol securityProtocol) {\n    *\n    * @return base set of producer properties.\n    */\n+  @SuppressWarnings(\"deprecation\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4f13a19ce51d9c0041337445510fcc9669fba0e1"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYwMTg0NTU0", "url": "https://github.com/confluentinc/ksql/pull/5902#pullrequestreview-460184554", "createdAt": "2020-08-03T16:52:33Z", "commit": {"oid": "4f13a19ce51d9c0041337445510fcc9669fba0e1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QxNjo1MjozM1rOG7BEww==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QxNjo1MjozM1rOG7BEww==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDUzNjc3MQ==", "bodyText": "Similar to above: are you trying to bound the test runtime in case of failure? If admin client you should set default.api.timeout.ms instead of retries for this case.", "url": "https://github.com/confluentinc/ksql/pull/5902#discussion_r464536771", "createdAt": "2020-08-03T16:52:33Z", "author": {"login": "mjsax"}, "path": "ksqldb-test-util/src/main/java/io/confluent/ksql/test/util/EmbeddedSingleNodeKafkaCluster.java", "diffHunk": "@@ -623,6 +624,7 @@ private void resetJaasConfig() {\n     Configuration.setConfiguration(null);\n   }\n \n+  @SuppressWarnings(\"deprecation\")\n   private AdminClient adminClient() {\n     final Map<String, Object> props = new HashMap<>(getClientProperties());\n     props.put(AdminClientConfig.RETRIES_CONFIG, 5);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4f13a19ce51d9c0041337445510fcc9669fba0e1"}, "originalPosition": 15}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYwMTg1MTA0", "url": "https://github.com/confluentinc/ksql/pull/5902#pullrequestreview-460185104", "createdAt": "2020-08-03T16:53:26Z", "commit": {"oid": "4f13a19ce51d9c0041337445510fcc9669fba0e1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QxNjo1MzoyNlrOG7BGbw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QxNjo1MzoyNlrOG7BGbw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDUzNzE5OQ==", "bodyText": "As above.", "url": "https://github.com/confluentinc/ksql/pull/5902#discussion_r464537199", "createdAt": "2020-08-03T16:53:26Z", "author": {"login": "mjsax"}, "path": "ksqldb-test-util/src/main/java/io/confluent/ksql/test/util/KafkaEmbedded.java", "diffHunk": "@@ -268,6 +268,7 @@ private String logDir() {\n     return config.getProperty(KafkaConfig.LogDirProp());\n   }\n \n+  @SuppressWarnings(\"deprecation\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4f13a19ce51d9c0041337445510fcc9669fba0e1"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4766, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}