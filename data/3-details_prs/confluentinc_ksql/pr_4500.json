{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzczMDY0Mzg2", "number": 4500, "title": "fix: support conversion of STRING to BIGINT for window bounds", "bodyText": "Description\nFixes: #4482\nComparison and Between expressions in the WHERE clause already support magic conversion from a STRING containing a ISO formatted datetime into a BIGINT for the ROWTIME column.\nThis changes extends the support to cover the WINDOWSTART and WINDOWEND columns.\nThe change also fixes a bug where by a numeric Between expression on ROWTIME resulted in a class-cast exception, e.g. WHERE ROWTIME < 123546794894.\nTesting done\ntests added.\nReviewer checklist\n\n Ensure docs are updated if necessary. (eg. if a user visible feature is being added or changed).\n Ensure relevant issues are linked (description should include text like \"Fixes #\")", "createdAt": "2020-02-10T10:46:44Z", "url": "https://github.com/confluentinc/ksql/pull/4500", "merged": true, "mergeCommit": {"oid": "9c3cbf8144b49b83c14120bac7b74211190b5590"}, "closed": true, "closedAt": "2020-02-10T23:41:23Z", "author": {"login": "big-andy-coates"}, "timelineItems": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcC604TgH2gAyMzczMDY0Mzg2OjgzNTdkMzQzMGRiYjJhYWIwZmUwZGNlZDdlMjE4MDUwNWQxZmE3MWE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcDFHV6AFqTM1NjMxNzg0MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "8357d3430dbb2aab0fe0dced7e2180505d1fa71a", "author": {"user": {"login": "big-andy-coates", "name": "Andy Coates"}}, "url": "https://github.com/confluentinc/ksql/commit/8357d3430dbb2aab0fe0dced7e2180505d1fa71a", "committedDate": "2020-02-10T10:46:11Z", "message": "fix: support conversion of STRING to BIGINT for window bounds\n\nFixes: https://github.com/confluentinc/ksql/issues/4482\n\nComparison and Between expressions in the WHERE clause already support magic conversion from a STRING containing a ISO formatted datetime into a BIGINT for the `ROWTIME` column.\n\nThis changes extends the support to cover the `WINDOWSTART` and `WINDOWEND` columns.\n\nThe change also fixes a bug where by a numeric Between expression on `ROWTIME` resulted in a class-cast exception, e.g. `WHERE ROWTIME < 123546794894`."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU2MzE3ODQw", "url": "https://github.com/confluentinc/ksql/pull/4500#pullrequestreview-356317840", "createdAt": "2020-02-10T22:39:23Z", "commit": {"oid": "8357d3430dbb2aab0fe0dced7e2180505d1fa71a"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQyMjozOToyNFrOFn4Ohw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQyMjo0NToxOFrOFn4X1w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzM2MDAwNw==", "bodyText": "\ud83d\ude02 \ud83e\udd14 \ud83d\ude44", "url": "https://github.com/confluentinc/ksql/pull/4500#discussion_r377360007", "createdAt": "2020-02-10T22:39:24Z", "author": {"login": "agavra"}, "path": "ksql-engine/src/main/java/io/confluent/ksql/engine/rewrite/StatementRewriteForMagicPseudoTimestamp.java", "diffHunk": "@@ -24,28 +25,33 @@\n import io.confluent.ksql.execution.expression.tree.LongLiteral;\n import io.confluent.ksql.execution.expression.tree.StringLiteral;\n import io.confluent.ksql.execution.expression.tree.VisitParentExpressionVisitor;\n+import io.confluent.ksql.name.ColumnName;\n import io.confluent.ksql.util.SchemaUtil;\n import io.confluent.ksql.util.timestamp.PartialStringToTimestampParser;\n import java.util.Objects;\n import java.util.Optional;\n+import java.util.Set;\n+\n+public class StatementRewriteForMagicPseudoTimestamp {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8357d3430dbb2aab0fe0dced7e2180505d1fa71a"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzM2MjM5MQ==", "bodyText": "should we ad RQTT tests to correspond for pull queries?", "url": "https://github.com/confluentinc/ksql/pull/4500#discussion_r377362391", "createdAt": "2020-02-10T22:45:18Z", "author": {"login": "agavra"}, "path": "ksql-functional-tests/src/test/resources/query-validation-tests/magic-timestamp-conversion.json", "diffHunk": "@@ -0,0 +1,178 @@\n+{", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8357d3430dbb2aab0fe0dced7e2180505d1fa71a"}, "originalPosition": 1}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4998, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}