{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMyNzg2NzQx", "number": 6722, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxNjo1MTo0OVrOFB4Nug==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxNjo1MTo0OVrOFB4Nug==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM3NTEzOTE0OnYy", "diffSide": "RIGHT", "path": "ksqldb-serde/src/main/java/io/confluent/ksql/serde/GenericKeySerDe.java", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxNjo1MTo0OVrOIAwSxA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxODoyNzo1MlrOIA0e4A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzY2MjE0OA==", "bodyText": "(from a previous PR) we might want to link to #6621 in the exception of the message if anyone needs to \"continue the conversation\"", "url": "https://github.com/confluentinc/ksql/pull/6722#discussion_r537662148", "createdAt": "2020-12-07T16:51:49Z", "author": {"login": "agavra"}, "path": "ksqldb-serde/src/main/java/io/confluent/ksql/serde/GenericKeySerDe.java", "diffHunk": "@@ -148,21 +148,12 @@ private static void checkUnsupportedSchema(\n       }\n     }\n \n-    if (config.getBoolean(KsqlConfig.KSQL_COMPLEX_KEY_FORMAT_ENABLED)) {\n-      for (final SimpleColumn column : columns) {\n-        if (containsMapType(column.type())) {\n-          throw new KsqlException(\"Map keys, including types that contain maps, are not supported \"\n-              + \"as they may lead to unexpected behavior due to inconsistent serialization. \"\n-              + \"Key column name: \" + column.name() + \". \"\n-              + \"Column type: \" + column.type().toString(FormatOptions.none()));\n-        }\n-      }\n-    } else {\n-      for (final SimpleColumn column : columns) {\n-        final SqlType sqlType = column.type();\n-        if (!(sqlType instanceof SqlPrimitiveType || sqlType instanceof SqlDecimal)) {\n-          throw new KsqlException(\"Unsupported key schema: \" + columns);\n-        }\n+    for (final SimpleColumn column : columns) {\n+      if (containsMapType(column.type())) {\n+        throw new KsqlException(\"Map keys, including types that contain maps, are not supported \"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8178a761ee60038e957c0aa89a33cc7ad25db0fe"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzcyNjkxOQ==", "bodyText": "Sorry, must've missed the previous comment. Updated in this PR. I went with simply See https://github.com/confluentinc/ksql/issues/6621 for more. rather than language about \"continuing the conversation\" since the latter makes it sound like this is an ongoing discussion which it isn't (at least as of now).", "url": "https://github.com/confluentinc/ksql/pull/6722#discussion_r537726919", "createdAt": "2020-12-07T18:21:58Z", "author": {"login": "vcrfxia"}, "path": "ksqldb-serde/src/main/java/io/confluent/ksql/serde/GenericKeySerDe.java", "diffHunk": "@@ -148,21 +148,12 @@ private static void checkUnsupportedSchema(\n       }\n     }\n \n-    if (config.getBoolean(KsqlConfig.KSQL_COMPLEX_KEY_FORMAT_ENABLED)) {\n-      for (final SimpleColumn column : columns) {\n-        if (containsMapType(column.type())) {\n-          throw new KsqlException(\"Map keys, including types that contain maps, are not supported \"\n-              + \"as they may lead to unexpected behavior due to inconsistent serialization. \"\n-              + \"Key column name: \" + column.name() + \". \"\n-              + \"Column type: \" + column.type().toString(FormatOptions.none()));\n-        }\n-      }\n-    } else {\n-      for (final SimpleColumn column : columns) {\n-        final SqlType sqlType = column.type();\n-        if (!(sqlType instanceof SqlPrimitiveType || sqlType instanceof SqlDecimal)) {\n-          throw new KsqlException(\"Unsupported key schema: \" + columns);\n-        }\n+    for (final SimpleColumn column : columns) {\n+      if (containsMapType(column.type())) {\n+        throw new KsqlException(\"Map keys, including types that contain maps, are not supported \"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzY2MjE0OA=="}, "originalCommit": {"oid": "8178a761ee60038e957c0aa89a33cc7ad25db0fe"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzcyODg1Mw==", "bodyText": "ah sorry my comment wasn't clear! I meant (this is code from a previous PR) not (I left a comment on a previous PR). And definitely don't think we should include \"continue the conversation\" in the exception message! I meant it as that's what they'd be doing.", "url": "https://github.com/confluentinc/ksql/pull/6722#discussion_r537728853", "createdAt": "2020-12-07T18:25:00Z", "author": {"login": "agavra"}, "path": "ksqldb-serde/src/main/java/io/confluent/ksql/serde/GenericKeySerDe.java", "diffHunk": "@@ -148,21 +148,12 @@ private static void checkUnsupportedSchema(\n       }\n     }\n \n-    if (config.getBoolean(KsqlConfig.KSQL_COMPLEX_KEY_FORMAT_ENABLED)) {\n-      for (final SimpleColumn column : columns) {\n-        if (containsMapType(column.type())) {\n-          throw new KsqlException(\"Map keys, including types that contain maps, are not supported \"\n-              + \"as they may lead to unexpected behavior due to inconsistent serialization. \"\n-              + \"Key column name: \" + column.name() + \". \"\n-              + \"Column type: \" + column.type().toString(FormatOptions.none()));\n-        }\n-      }\n-    } else {\n-      for (final SimpleColumn column : columns) {\n-        final SqlType sqlType = column.type();\n-        if (!(sqlType instanceof SqlPrimitiveType || sqlType instanceof SqlDecimal)) {\n-          throw new KsqlException(\"Unsupported key schema: \" + columns);\n-        }\n+    for (final SimpleColumn column : columns) {\n+      if (containsMapType(column.type())) {\n+        throw new KsqlException(\"Map keys, including types that contain maps, are not supported \"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzY2MjE0OA=="}, "originalCommit": {"oid": "8178a761ee60038e957c0aa89a33cc7ad25db0fe"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzczMDc4NA==", "bodyText": "Ah got'cha. Glad we're on the same page :)", "url": "https://github.com/confluentinc/ksql/pull/6722#discussion_r537730784", "createdAt": "2020-12-07T18:27:52Z", "author": {"login": "vcrfxia"}, "path": "ksqldb-serde/src/main/java/io/confluent/ksql/serde/GenericKeySerDe.java", "diffHunk": "@@ -148,21 +148,12 @@ private static void checkUnsupportedSchema(\n       }\n     }\n \n-    if (config.getBoolean(KsqlConfig.KSQL_COMPLEX_KEY_FORMAT_ENABLED)) {\n-      for (final SimpleColumn column : columns) {\n-        if (containsMapType(column.type())) {\n-          throw new KsqlException(\"Map keys, including types that contain maps, are not supported \"\n-              + \"as they may lead to unexpected behavior due to inconsistent serialization. \"\n-              + \"Key column name: \" + column.name() + \". \"\n-              + \"Column type: \" + column.type().toString(FormatOptions.none()));\n-        }\n-      }\n-    } else {\n-      for (final SimpleColumn column : columns) {\n-        final SqlType sqlType = column.type();\n-        if (!(sqlType instanceof SqlPrimitiveType || sqlType instanceof SqlDecimal)) {\n-          throw new KsqlException(\"Unsupported key schema: \" + columns);\n-        }\n+    for (final SimpleColumn column : columns) {\n+      if (containsMapType(column.type())) {\n+        throw new KsqlException(\"Map keys, including types that contain maps, are not supported \"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzY2MjE0OA=="}, "originalCommit": {"oid": "8178a761ee60038e957c0aa89a33cc7ad25db0fe"}, "originalPosition": 21}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2513, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}