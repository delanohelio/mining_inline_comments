{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY2Mzg4NzAy", "number": 5986, "title": "docs: add suppress buffer config docs", "bodyText": "Description\nWhat behavior do you want to change, why, how does your patch achieve the changes?\nAdd docs detailing how the suppress buffer config works\nReviewer checklist\n\n Ensure docs are updated if necessary. (eg. if a user visible feature is being added or changed).\n Ensure relevant issues are linked (description should include text like \"Fixes #\")", "createdAt": "2020-08-11T22:27:51Z", "url": "https://github.com/confluentinc/ksql/pull/5986", "merged": true, "mergeCommit": {"oid": "5765c5881f9c2926c2223abe7c98a6dbfdec4fc7"}, "closed": true, "closedAt": "2020-08-13T16:22:52Z", "author": {"login": "nae701"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc9-hyggH2gAyNDY2Mzg4NzAyOjc4MmU3ZDZhMjhlYmNlZDc4Yzg3NTljODk5Y2IzZDNmMzM1MDUxYjM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc-SxI2gH2gAyNDY2Mzg4NzAyOjMwZDAxMWU0ZTdmZDk2MTI4MjRhYzAyZjg2MDZkOGJmYzk2ZDM5Zjk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "782e7d6a28ebced78c8759c899cb3d3f335051b3", "author": {"user": {"login": "nae701", "name": "Natea Eshetu Beshada"}}, "url": "https://github.com/confluentinc/ksql/commit/782e7d6a28ebced78c8759c899cb3d3f335051b3", "committedDate": "2020-08-11T22:26:29Z", "message": "docs: add suppress buffer config docs"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY1NTAyNDcy", "url": "https://github.com/confluentinc/ksql/pull/5986#pullrequestreview-465502472", "createdAt": "2020-08-11T23:50:54Z", "commit": {"oid": "782e7d6a28ebced78c8759c899cb3d3f335051b3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMVQyMzo1MDo1NFrOG_NCVA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMVQyMzo1MDo1NFrOG_NCVA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODkyNzA2MA==", "bodyText": "I prefer the previous, straight-to-the-point doc. I don't think config documentation should be prescriptive of how someone should use the config, but rather descriptive of what the config does. The SET command is well documented elsewhere, so I'm not sure it should be added here as well.", "url": "https://github.com/confluentinc/ksql/pull/5986#discussion_r468927060", "createdAt": "2020-08-11T23:50:54Z", "author": {"login": "agavra"}, "path": "ksqldb-common/src/main/java/io/confluent/ksql/util/KsqlConfig.java", "diffHunk": "@@ -311,9 +311,12 @@\n   public static final String KSQL_SUPPRESS_BUFFER_SIZE_BYTES = \"ksql.suppress.buffer.size.bytes\";\n   public static final Long KSQL_SUPPRESS_BUFFER_SIZE_BYTES_DEFAULT = -1L;\n   public static final String KSQL_SUPPRESS_BUFFER_SIZE_BYTES_DOC =\n-      \"Bound the number of bytes that the \"\n-      + \"buffer can use for suppression. Negative size means the buffer will be unbounded. If the \"\n-      + \"buffer exceeds its max capacity, a StreamsException stating this is thrown\";\n+      \"Config to control the maximum number of bytes used in the suppress buffer for a query.\\n\"\n+      + \"This can be overridden per query, from the CLI using the `SET` command.\\n\"\n+      + \"By default, the amount is unbounded, which can result in out of memory errors. If a \"\n+      + \"bound is desired a good heuristic is to set the buffer max size to be equal to the heap \"\n+      + \"memory divided by the max number of persistent queries. If the bound is exceeds its max \"\n+      + \"capacity, a StreamsException stating this is thrown.\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "782e7d6a28ebced78c8759c899cb3d3f335051b3"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY1NzY2OTM2", "url": "https://github.com/confluentinc/ksql/pull/5986#pullrequestreview-465766936", "createdAt": "2020-08-12T09:58:11Z", "commit": {"oid": "782e7d6a28ebced78c8759c899cb3d3f335051b3"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQwOTo1ODoxMlrOG_aaqQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQwOTo1ODoxMlrOG_aaqQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTE0NjI4MQ==", "bodyText": "Not sure we should talk about exceptions being thrown in user documentation.\nFrom a user perspective what will happen?  I'm assuming the query will be terminated?\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            By default, the amount is unbounded, which can result in out of memory errors. If a bound is desired\n          \n          \n            \n            a good heuristic is to set the buffer max size to be equal to the heap memory divided by the max \n          \n          \n            \n            number of persistent queries. If the bound is exceeds its max capacity, a StreamsException \n          \n          \n            \n            stating this is thrown.\n          \n          \n            \n            By default, the amount is unbounded, which can result in out of memory errors. If a bound is desired\n          \n          \n            \n            a good heuristic is to set the buffer max size to be equal to the heap memory divided by the max \n          \n          \n            \n            number of persistent queries. If the bound is exceeds its max capacity, the query will be terminated.", "url": "https://github.com/confluentinc/ksql/pull/5986#discussion_r469146281", "createdAt": "2020-08-12T09:58:12Z", "author": {"login": "big-andy-coates"}, "path": "docs/operate-and-deploy/installation/server-config/config-reference.md", "diffHunk": "@@ -347,6 +347,17 @@ the pull query REST endpoint (by including it in the request e.g: `\"streamsPrope\n By default, any amount of lag is allowed. For using this functionality, the server must be configured with `ksql.heartbeat.enable=true` and \n `ksql.lag.reporting.enable=true`, so the servers can exchange lag information between themselves ahead of time, to validate pull queries against the allowed lag. \n \n+### ksql.suppress.buffer.size.bytes\n+\n+Config to control the maximum number of bytes used in the suppress buffer for a query.\n+\n+This can be overridden per query, from the CLI using the `SET` command. \n+\n+By default, the amount is unbounded, which can result in out of memory errors. If a bound is desired\n+a good heuristic is to set the buffer max size to be equal to the heap memory divided by the max \n+number of persistent queries. If the bound is exceeds its max capacity, a StreamsException \n+stating this is thrown.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "782e7d6a28ebced78c8759c899cb3d3f335051b3"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY2MDY0Njc4", "url": "https://github.com/confluentinc/ksql/pull/5986#pullrequestreview-466064678", "createdAt": "2020-08-12T16:07:29Z", "commit": {"oid": "782e7d6a28ebced78c8759c899cb3d3f335051b3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQxNjowNzoyOVrOG_oWoQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQxNjowNzoyOVrOG_oWoQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTM3NDYyNQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Config to control the maximum number of bytes used in the suppress buffer for a query.\n          \n          \n            \n            Sets the maximum number of bytes used in the suppress buffer for a query.", "url": "https://github.com/confluentinc/ksql/pull/5986#discussion_r469374625", "createdAt": "2020-08-12T16:07:29Z", "author": {"login": "JimGalasyn"}, "path": "docs/operate-and-deploy/installation/server-config/config-reference.md", "diffHunk": "@@ -347,6 +347,17 @@ the pull query REST endpoint (by including it in the request e.g: `\"streamsPrope\n By default, any amount of lag is allowed. For using this functionality, the server must be configured with `ksql.heartbeat.enable=true` and \n `ksql.lag.reporting.enable=true`, so the servers can exchange lag information between themselves ahead of time, to validate pull queries against the allowed lag. \n \n+### ksql.suppress.buffer.size.bytes\n+\n+Config to control the maximum number of bytes used in the suppress buffer for a query.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "782e7d6a28ebced78c8759c899cb3d3f335051b3"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY2MDY0OTg1", "url": "https://github.com/confluentinc/ksql/pull/5986#pullrequestreview-466064985", "createdAt": "2020-08-12T16:07:52Z", "commit": {"oid": "782e7d6a28ebced78c8759c899cb3d3f335051b3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQxNjowNzo1MlrOG_oXmA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQxNjowNzo1MlrOG_oXmA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTM3NDg3Mg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            This can be overridden per query, from the CLI using the `SET` command. \n          \n          \n            \n            You can override this setting per query by using the SET command.", "url": "https://github.com/confluentinc/ksql/pull/5986#discussion_r469374872", "createdAt": "2020-08-12T16:07:52Z", "author": {"login": "JimGalasyn"}, "path": "docs/operate-and-deploy/installation/server-config/config-reference.md", "diffHunk": "@@ -347,6 +347,17 @@ the pull query REST endpoint (by including it in the request e.g: `\"streamsPrope\n By default, any amount of lag is allowed. For using this functionality, the server must be configured with `ksql.heartbeat.enable=true` and \n `ksql.lag.reporting.enable=true`, so the servers can exchange lag information between themselves ahead of time, to validate pull queries against the allowed lag. \n \n+### ksql.suppress.buffer.size.bytes\n+\n+Config to control the maximum number of bytes used in the suppress buffer for a query.\n+\n+This can be overridden per query, from the CLI using the `SET` command. ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "782e7d6a28ebced78c8759c899cb3d3f335051b3"}, "originalPosition": 8}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY2MDY2NDU0", "url": "https://github.com/confluentinc/ksql/pull/5986#pullrequestreview-466066454", "createdAt": "2020-08-12T16:09:38Z", "commit": {"oid": "782e7d6a28ebced78c8759c899cb3d3f335051b3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQxNjowOTozOFrOG_ocOg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQxNjowOTozOFrOG_ocOg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTM3NjA1OA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            By default, the amount is unbounded, which can result in out of memory errors. If a bound is desired\n          \n          \n            \n            By default, the size is unbounded, which can result in out of memory errors. If you need an upper limit,", "url": "https://github.com/confluentinc/ksql/pull/5986#discussion_r469376058", "createdAt": "2020-08-12T16:09:38Z", "author": {"login": "JimGalasyn"}, "path": "docs/operate-and-deploy/installation/server-config/config-reference.md", "diffHunk": "@@ -347,6 +347,17 @@ the pull query REST endpoint (by including it in the request e.g: `\"streamsPrope\n By default, any amount of lag is allowed. For using this functionality, the server must be configured with `ksql.heartbeat.enable=true` and \n `ksql.lag.reporting.enable=true`, so the servers can exchange lag information between themselves ahead of time, to validate pull queries against the allowed lag. \n \n+### ksql.suppress.buffer.size.bytes\n+\n+Config to control the maximum number of bytes used in the suppress buffer for a query.\n+\n+This can be overridden per query, from the CLI using the `SET` command. \n+\n+By default, the amount is unbounded, which can result in out of memory errors. If a bound is desired", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "782e7d6a28ebced78c8759c899cb3d3f335051b3"}, "originalPosition": 10}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY2MDY3MjM2", "url": "https://github.com/confluentinc/ksql/pull/5986#pullrequestreview-466067236", "createdAt": "2020-08-12T16:10:36Z", "commit": {"oid": "782e7d6a28ebced78c8759c899cb3d3f335051b3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQxNjoxMDozNlrOG_oeuw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQxNjoxMDozNlrOG_oeuw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTM3NjY5OQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            a good heuristic is to set the buffer max size to be equal to the heap memory divided by the max \n          \n          \n            \n            we recommend setting the buffer maximum size to the heap memory divided by the maximum", "url": "https://github.com/confluentinc/ksql/pull/5986#discussion_r469376699", "createdAt": "2020-08-12T16:10:36Z", "author": {"login": "JimGalasyn"}, "path": "docs/operate-and-deploy/installation/server-config/config-reference.md", "diffHunk": "@@ -347,6 +347,17 @@ the pull query REST endpoint (by including it in the request e.g: `\"streamsPrope\n By default, any amount of lag is allowed. For using this functionality, the server must be configured with `ksql.heartbeat.enable=true` and \n `ksql.lag.reporting.enable=true`, so the servers can exchange lag information between themselves ahead of time, to validate pull queries against the allowed lag. \n \n+### ksql.suppress.buffer.size.bytes\n+\n+Config to control the maximum number of bytes used in the suppress buffer for a query.\n+\n+This can be overridden per query, from the CLI using the `SET` command. \n+\n+By default, the amount is unbounded, which can result in out of memory errors. If a bound is desired\n+a good heuristic is to set the buffer max size to be equal to the heap memory divided by the max ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "782e7d6a28ebced78c8759c899cb3d3f335051b3"}, "originalPosition": 11}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY2MDY4MTYz", "url": "https://github.com/confluentinc/ksql/pull/5986#pullrequestreview-466068163", "createdAt": "2020-08-12T16:11:42Z", "commit": {"oid": "782e7d6a28ebced78c8759c899cb3d3f335051b3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQxNjoxMTo0MlrOG_ohgA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQxNjoxMTo0MlrOG_ohgA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTM3NzQwOA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            number of persistent queries. If the bound is exceeds its max capacity, a StreamsException \n          \n          \n            \n            number of persistent queries. If the maximum capacity is exceeded, a `StreamsException`", "url": "https://github.com/confluentinc/ksql/pull/5986#discussion_r469377408", "createdAt": "2020-08-12T16:11:42Z", "author": {"login": "JimGalasyn"}, "path": "docs/operate-and-deploy/installation/server-config/config-reference.md", "diffHunk": "@@ -347,6 +347,17 @@ the pull query REST endpoint (by including it in the request e.g: `\"streamsPrope\n By default, any amount of lag is allowed. For using this functionality, the server must be configured with `ksql.heartbeat.enable=true` and \n `ksql.lag.reporting.enable=true`, so the servers can exchange lag information between themselves ahead of time, to validate pull queries against the allowed lag. \n \n+### ksql.suppress.buffer.size.bytes\n+\n+Config to control the maximum number of bytes used in the suppress buffer for a query.\n+\n+This can be overridden per query, from the CLI using the `SET` command. \n+\n+By default, the amount is unbounded, which can result in out of memory errors. If a bound is desired\n+a good heuristic is to set the buffer max size to be equal to the heap memory divided by the max \n+number of persistent queries. If the bound is exceeds its max capacity, a StreamsException ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "782e7d6a28ebced78c8759c899cb3d3f335051b3"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY2MDY4MzEy", "url": "https://github.com/confluentinc/ksql/pull/5986#pullrequestreview-466068312", "createdAt": "2020-08-12T16:11:53Z", "commit": {"oid": "782e7d6a28ebced78c8759c899cb3d3f335051b3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQxNjoxMTo1M1rOG_oiBw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQxNjoxMTo1M1rOG_oiBw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTM3NzU0Mw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            stating this is thrown.\n          \n          \n            \n            is thrown.", "url": "https://github.com/confluentinc/ksql/pull/5986#discussion_r469377543", "createdAt": "2020-08-12T16:11:53Z", "author": {"login": "JimGalasyn"}, "path": "docs/operate-and-deploy/installation/server-config/config-reference.md", "diffHunk": "@@ -347,6 +347,17 @@ the pull query REST endpoint (by including it in the request e.g: `\"streamsPrope\n By default, any amount of lag is allowed. For using this functionality, the server must be configured with `ksql.heartbeat.enable=true` and \n `ksql.lag.reporting.enable=true`, so the servers can exchange lag information between themselves ahead of time, to validate pull queries against the allowed lag. \n \n+### ksql.suppress.buffer.size.bytes\n+\n+Config to control the maximum number of bytes used in the suppress buffer for a query.\n+\n+This can be overridden per query, from the CLI using the `SET` command. \n+\n+By default, the amount is unbounded, which can result in out of memory errors. If a bound is desired\n+a good heuristic is to set the buffer max size to be equal to the heap memory divided by the max \n+number of persistent queries. If the bound is exceeds its max capacity, a StreamsException \n+stating this is thrown.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "782e7d6a28ebced78c8759c899cb3d3f335051b3"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY2MDcxMTIw", "url": "https://github.com/confluentinc/ksql/pull/5986#pullrequestreview-466071120", "createdAt": "2020-08-12T16:15:28Z", "commit": {"oid": "782e7d6a28ebced78c8759c899cb3d3f335051b3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f0dd39d9ce621f4804541642e00b632c6f268fa5", "author": {"user": {"login": "nae701", "name": "Natea Eshetu Beshada"}}, "url": "https://github.com/confluentinc/ksql/commit/f0dd39d9ce621f4804541642e00b632c6f268fa5", "committedDate": "2020-08-12T17:18:55Z", "message": "docs: revert to previous straight forward suppress buffer config docs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "30d011e4e7fd9612824ac02f8606d8bfc96d39f9", "author": {"user": {"login": "nae701", "name": "Natea Eshetu Beshada"}}, "url": "https://github.com/confluentinc/ksql/commit/30d011e4e7fd9612824ac02f8606d8bfc96d39f9", "committedDate": "2020-08-12T22:01:21Z", "message": "docs: clarify and fix feedback"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4807, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}