{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg5NTI5NzE0", "number": 6260, "title": "docs: docs for new KEY_FORMAT property and associated server configs", "bodyText": "Description\nPorting over #6252 to a branch on the main repo rather than my personal fork, in preparation for working on this jointly with @big-andy-coates .\nOpening a separate docs PR for the changes in #6194 as these docs cannot go live before the feature flag guarding #6194 is enabled by default.\nTesting done\nDocs-only change.\nReviewer checklist\n\n Ensure docs are updated if necessary. (eg. if a user visible feature is being added or changed).\n Ensure relevant issues are linked (description should include text like \"Fixes #\")", "createdAt": "2020-09-18T20:37:57Z", "url": "https://github.com/confluentinc/ksql/pull/6260", "merged": true, "mergeCommit": {"oid": "8e61d6a6cd6abb360c1035e323f5e7e99de48ffc"}, "closed": true, "closedAt": "2020-10-01T12:30:05Z", "author": {"login": "vcrfxia"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdKLlceAH2gAyNDg5NTI5NzE0OmNiMzA4MmJlZDU1NzdhMDA2M2E3YzFhMDQ2YWY4YjIzYTRmZjkzYjk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdLsli1AH2gAyNDg5NTI5NzE0OjA3MGRjYTBkNzk1NjJlZWZmNzMyYzRiMGEzZTFiYTJkMTliY2NkZjA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "cb3082bed5577a0063a7c1a046af8b23a4ff93b9", "author": {"user": {"login": "vcrfxia", "name": "Victoria Xia"}}, "url": "https://github.com/confluentinc/ksql/commit/cb3082bed5577a0063a7c1a046af8b23a4ff93b9", "committedDate": "2020-09-18T20:26:20Z", "message": "docs: docs for new KEY_FORMAT property and associated server configs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "740907004b2fab59960d709ecfa3f81454e27eff", "author": {"user": {"login": "vcrfxia", "name": "Victoria Xia"}}, "url": "https://github.com/confluentinc/ksql/commit/740907004b2fab59960d709ecfa3f81454e27eff", "committedDate": "2020-09-18T20:26:20Z", "message": "docs: add KEY_FORMAT examples"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "af4f1105a2b1eb725fe43289e3990a18938b9773", "author": {"user": {"login": "vcrfxia", "name": "Victoria Xia"}}, "url": "https://github.com/confluentinc/ksql/commit/af4f1105a2b1eb725fe43289e3990a18938b9773", "committedDate": "2020-09-18T20:26:20Z", "message": "docs: feedback"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkxNzc4MjQy", "url": "https://github.com/confluentinc/ksql/pull/6260#pullrequestreview-491778242", "createdAt": "2020-09-18T21:00:19Z", "commit": {"oid": "af4f1105a2b1eb725fe43289e3990a18938b9773"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkyNDYxMzcw", "url": "https://github.com/confluentinc/ksql/pull/6260#pullrequestreview-492461370", "createdAt": "2020-09-21T10:25:23Z", "commit": {"oid": "af4f1105a2b1eb725fe43289e3990a18938b9773"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMVQxMDoyNToyM1rOHVJhFQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMVQxMDoyODowMVrOHVJl8g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTkzODA2OQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            | KEY_FORMAT        | Specifies the serialization format of the message key in the topic. For supported formats, see [Serialization Formats](../serialization.md#serialization-formats). If this property is not set, the format from the input stream/table is used. |\n          \n          \n            \n            | VALUE_FORMAT      | Specifies the serialization format of the message value in the topic. For supported formats, see [Serialization Formats](../serialization.md#serialization-formats). If this property is not set, the format from the input stream/table is used. |\n          \n          \n            \n            | KEY_FORMAT        | Specifies the serialization format of the message key in the topic. For supported formats, see [Serialization Formats](../serialization.md#serialization-formats). If this property is not set, the format from the left-most input stream/table is used. |\n          \n          \n            \n            | VALUE_FORMAT      | Specifies the serialization format of the message value in the topic. For supported formats, see [Serialization Formats](../serialization.md#serialization-formats). If this property is not set, the format from the left-most input stream/table is used. |", "url": "https://github.com/confluentinc/ksql/pull/6260#discussion_r491938069", "createdAt": "2020-09-21T10:25:23Z", "author": {"login": "big-andy-coates"}, "path": "docs/developer-guide/ksqldb-reference/create-stream-as-select.md", "diffHunk": "@@ -75,7 +75,9 @@ The WITH clause for the result supports the following properties:\n |     Property      |                                             Description                                              |\n | ----------------- | ---------------------------------------------------------------------------------------------------- |\n | KAFKA_TOPIC       | The name of the Kafka topic that backs this stream. If this property is not set, then the name of the stream in upper case will be used as default. |\n-| VALUE_FORMAT      | Specifies the serialization format of the message value in the topic. For supported formats, see [Serialization Formats](../serialization.md#serialization-formats). If this property is not set, the format of the input stream/table is used. |\n+| KEY_FORMAT        | Specifies the serialization format of the message key in the topic. For supported formats, see [Serialization Formats](../serialization.md#serialization-formats). If this property is not set, the format from the input stream/table is used. |\n+| VALUE_FORMAT      | Specifies the serialization format of the message value in the topic. For supported formats, see [Serialization Formats](../serialization.md#serialization-formats). If this property is not set, the format from the input stream/table is used. |", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "af4f1105a2b1eb725fe43289e3990a18938b9773"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTkzODI4OQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            | KEY_FORMAT        | Specifies the serialization format of the message key in the topic. For supported formats, see [Serialization Formats](../serialization.md#serialization-formats). If this property is not set, the format from the input stream/table is used. |\n          \n          \n            \n            | VALUE_FORMAT      | Specifies the serialization format of the message value in the topic. For supported formats, see [Serialization Formats](../serialization.md#serialization-formats). If this property is not set, the format from the input stream/table is used. |\n          \n          \n            \n            | KEY_FORMAT        | Specifies the serialization format of the message key in the topic. For supported formats, see [Serialization Formats](../serialization.md#serialization-formats). If this property is not set, the format from the left-most input stream/table is used. |\n          \n          \n            \n            | VALUE_FORMAT      | Specifies the serialization format of the message value in the topic. For supported formats, see [Serialization Formats](../serialization.md#serialization-formats). If this property is not set, the format from the left-most input stream/table is used. |", "url": "https://github.com/confluentinc/ksql/pull/6260#discussion_r491938289", "createdAt": "2020-09-21T10:25:51Z", "author": {"login": "big-andy-coates"}, "path": "docs/developer-guide/ksqldb-reference/create-table-as-select.md", "diffHunk": "@@ -79,7 +79,9 @@ The WITH clause supports the following properties:\n |     Property      |                                             Description                                              |\n | ----------------- | ---------------------------------------------------------------------------------------------------- |\n | KAFKA_TOPIC       | The name of the Kafka topic that backs this table. If this property is not set, then the name of the table will be used as default. |\n-| VALUE_FORMAT      | Specifies the serialization format of the message value in the topic. For supported formats, see [Serialization Formats](../serialization.md#serialization-formats). If this property is not set, then the format of the input stream/table is used. |\n+| KEY_FORMAT        | Specifies the serialization format of the message key in the topic. For supported formats, see [Serialization Formats](../serialization.md#serialization-formats). If this property is not set, the format from the input stream/table is used. |\n+| VALUE_FORMAT      | Specifies the serialization format of the message value in the topic. For supported formats, see [Serialization Formats](../serialization.md#serialization-formats). If this property is not set, the format from the input stream/table is used. |", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "af4f1105a2b1eb725fe43289e3990a18938b9773"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTkzOTE2Nw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            The default value for this configuration is `KAFKA`.\n          \n          \n            \n            The default value for this configuration is `KAFKA`.\n          \n          \n            \n            \n          \n          \n            \n            If not set and no explicit format is provided in the statement, via either the `KEY_FORMAT` or the `FORMAT` property, the statement will be rejected as invalid.", "url": "https://github.com/confluentinc/ksql/pull/6260#discussion_r491939167", "createdAt": "2020-09-21T10:27:46Z", "author": {"login": "big-andy-coates"}, "path": "docs/operate-and-deploy/installation/server-config/config-reference.md", "diffHunk": "@@ -282,6 +282,29 @@ The corresponding environment variable in the\n [ksqlDB Server image](https://hub.docker.com/r/confluentinc/ksqldb-server/)\n is `KSQL_KSQL_FUNCTIONS_SUBSTRING_LEGACY_ARGS`.\n \n+### ksql.persistence.default.format.key\n+\n+Sets the default value for the `KEY_FORMAT` property if one is\n+not supplied explicitly in [CREATE TABLE](../../../developer-guide/ksqldb-reference/create-table.md)\n+or [CREATE STREAM](../../../developer-guide/ksqldb-reference/create-stream.md)\n+statements.\n+\n+The default value for this configuration is `KAFKA`.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "af4f1105a2b1eb725fe43289e3990a18938b9773"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTkzOTMxNA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            If not set and no explicit value is provided in the statement, via either the `VALUE_FORMAT` or the\n          \n          \n            \n            `FORMAT` property, an error will be thrown.\n          \n          \n            \n            If not set and no explicit value is provided in the statement, via either the `VALUE_FORMAT` or the\n          \n          \n            \n            `FORMAT` property, the statement will be rejected as invalid.", "url": "https://github.com/confluentinc/ksql/pull/6260#discussion_r491939314", "createdAt": "2020-09-21T10:28:01Z", "author": {"login": "big-andy-coates"}, "path": "docs/operate-and-deploy/installation/server-config/config-reference.md", "diffHunk": "@@ -282,6 +282,29 @@ The corresponding environment variable in the\n [ksqlDB Server image](https://hub.docker.com/r/confluentinc/ksqldb-server/)\n is `KSQL_KSQL_FUNCTIONS_SUBSTRING_LEGACY_ARGS`.\n \n+### ksql.persistence.default.format.key\n+\n+Sets the default value for the `KEY_FORMAT` property if one is\n+not supplied explicitly in [CREATE TABLE](../../../developer-guide/ksqldb-reference/create-table.md)\n+or [CREATE STREAM](../../../developer-guide/ksqldb-reference/create-stream.md)\n+statements.\n+\n+The default value for this configuration is `KAFKA`.\n+\n+For supported formats, see [Serialization Formats](../../../developer-guide/serialization.md#serialization-formats).\n+\n+### ksql.persistence.default.format.value\n+\n+Sets the default value for the `VALUE_FORMAT` property if one is\n+not supplied explicitly in [CREATE TABLE](../../../developer-guide/ksqldb-reference/create-table.md)\n+or [CREATE STREAM](../../../developer-guide/ksqldb-reference/create-stream.md)\n+statements.\n+\n+If not set and no explicit value is provided in the statement, via either the `VALUE_FORMAT` or the\n+`FORMAT` property, an error will be thrown.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "af4f1105a2b1eb725fe43289e3990a18938b9773"}, "originalPosition": 23}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8ab1774b8b6d1425981b2557463bd3ed867eb772", "author": {"user": {"login": "vcrfxia", "name": "Victoria Xia"}}, "url": "https://github.com/confluentinc/ksql/commit/8ab1774b8b6d1425981b2557463bd3ed867eb772", "committedDate": "2020-09-21T19:45:28Z", "message": "Merge branch 'master' into key-format-docs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b254fb1c0fed35a52cf3d8b6e79f72ca604eabf9", "author": {"user": {"login": "vcrfxia", "name": "Victoria Xia"}}, "url": "https://github.com/confluentinc/ksql/commit/b254fb1c0fed35a52cf3d8b6e79f72ca604eabf9", "committedDate": "2020-09-21T19:48:56Z", "message": "docs: feedback"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkyOTI5OTU0", "url": "https://github.com/confluentinc/ksql/pull/6260#pullrequestreview-492929954", "createdAt": "2020-09-21T19:49:36Z", "commit": {"oid": "af4f1105a2b1eb725fe43289e3990a18938b9773"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMVQxOTo0OTozNlrOHVgB6w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMVQxOTo0OTozNlrOHVgB6w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjMwNjkyMw==", "bodyText": "Ah sorry, not sure how I lost this comment from your last round of reviews. Fixed!", "url": "https://github.com/confluentinc/ksql/pull/6260#discussion_r492306923", "createdAt": "2020-09-21T19:49:36Z", "author": {"login": "vcrfxia"}, "path": "docs/operate-and-deploy/installation/server-config/config-reference.md", "diffHunk": "@@ -282,6 +282,29 @@ The corresponding environment variable in the\n [ksqlDB Server image](https://hub.docker.com/r/confluentinc/ksqldb-server/)\n is `KSQL_KSQL_FUNCTIONS_SUBSTRING_LEGACY_ARGS`.\n \n+### ksql.persistence.default.format.key\n+\n+Sets the default value for the `KEY_FORMAT` property if one is\n+not supplied explicitly in [CREATE TABLE](../../../developer-guide/ksqldb-reference/create-table.md)\n+or [CREATE STREAM](../../../developer-guide/ksqldb-reference/create-stream.md)\n+statements.\n+\n+The default value for this configuration is `KAFKA`.\n+\n+For supported formats, see [Serialization Formats](../../../developer-guide/serialization.md#serialization-formats).\n+\n+### ksql.persistence.default.format.value\n+\n+Sets the default value for the `VALUE_FORMAT` property if one is\n+not supplied explicitly in [CREATE TABLE](../../../developer-guide/ksqldb-reference/create-table.md)\n+or [CREATE STREAM](../../../developer-guide/ksqldb-reference/create-stream.md)\n+statements.\n+\n+If not set and no explicit value is provided in the statement, via either the `VALUE_FORMAT` or the\n+`FORMAT` property, an error will be thrown.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTkzOTMxNA=="}, "originalCommit": {"oid": "af4f1105a2b1eb725fe43289e3990a18938b9773"}, "originalPosition": 23}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "070dca0d79562eeff732c4b0a3e1ba2d19bccdf0", "author": {"user": {"login": "vcrfxia", "name": "Victoria Xia"}}, "url": "https://github.com/confluentinc/ksql/commit/070dca0d79562eeff732c4b0a3e1ba2d19bccdf0", "committedDate": "2020-09-23T13:27:14Z", "message": "docs: update create-a-stream and create-a-table"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4664, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}