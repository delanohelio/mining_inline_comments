{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQyOTMyMjg2", "number": 5756, "title": "fix: do not overwrite schemas from a CREATE STREAM/TABLE", "bodyText": "Description\nfixes #5553\nThis commit makes sure that C* statements do not overwrite existing schemas in schema registry and instead only check compatibility with a declared schema, if a declared schema is present.\nNOTE: if you INSERT INTO a stream, all bets are off (i.e. another schema will be registered under the schema value, but that is not a regression as this is a serializer-specific behavior)\nTesting done\nUnit tests, and manual testing (registered the same source with a subset schema and confirmed there's only one version in schema registry)\nReviewer checklist\n\n Ensure docs are updated if necessary. (eg. if a user visible feature is being added or changed).\n Ensure relevant issues are linked (description should include text like \"Fixes #\")", "createdAt": "2020-07-01T19:30:43Z", "url": "https://github.com/confluentinc/ksql/pull/5756", "merged": true, "mergeCommit": {"oid": "5aa0b7241b46e54a821eef06b3a1e64b31ccdbaa"}, "closed": true, "closedAt": "2020-07-01T21:38:09Z", "author": {"login": "agavra"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcwvZiqgH2gAyNDQyOTMyMjg2OjFiNjgyZDZjMTNkODRhM2ZkMjMxMzY3ZmJhNzA3ZjIyZTExZjM5ZWY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcwwr-DgFqTQ0MTE5MjEzMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "1b682d6c13d84a3fd231367fba707f22e11f39ef", "author": {"user": {"login": "agavra", "name": "Almog Gavra"}}, "url": "https://github.com/confluentinc/ksql/commit/1b682d6c13d84a3fd231367fba707f22e11f39ef", "committedDate": "2020-07-01T19:27:53Z", "message": "fix: do not overwrite schemas from a CREATE STREAM/TABLE"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQxMTkyMDYw", "url": "https://github.com/confluentinc/ksql/pull/5756#pullrequestreview-441192060", "createdAt": "2020-07-01T20:57:46Z", "commit": {"oid": "1b682d6c13d84a3fd231367fba707f22e11f39ef"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQyMDo1Nzo0NlrOGr1IvA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQyMDo1Nzo0NlrOGr1IvA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODYxMjU0MA==", "bodyText": "Just to make sure, in which case to we want to overwrite existing schemas?", "url": "https://github.com/confluentinc/ksql/pull/5756#discussion_r448612540", "createdAt": "2020-07-01T20:57:46Z", "author": {"login": "vpapavas"}, "path": "ksqldb-engine/src/main/java/io/confluent/ksql/schema/ksql/inference/SchemaRegisterInjector.java", "diffHunk": "@@ -96,7 +99,8 @@ private void registerForCreateAs(final ConfiguredStatement<? extends CreateAsSel\n         queryMetadata.getResultTopic().getKafkaTopicName(),\n         queryMetadata.getResultTopic().getValueFormat().getFormatInfo(),\n         cas.getConfig(),\n-        cas.getStatementText()\n+        cas.getStatementText(),\n+        true", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1b682d6c13d84a3fd231367fba707f22e11f39ef"}, "originalPosition": 25}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQxMTkyMTMw", "url": "https://github.com/confluentinc/ksql/pull/5756#pullrequestreview-441192130", "createdAt": "2020-07-01T20:57:55Z", "commit": {"oid": "1b682d6c13d84a3fd231367fba707f22e11f39ef"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 303, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}