{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA2Njc4MjE0", "number": 5126, "title": "feat: Implement cluster health check endpoints", "bodyText": "Description\nThis is a stacked PR. Please only review the top commit(s).\nThis PR implements the endpoints /chc/live and /chc/ready. They were previously implemented using Jetty resource extensions, but this will not work when Jetty disappears.\nThese endpoints simply return an empty JsonObject. They differ from other endpoints in that they need to be available when the server is waiting for preconditions.\nTesting done\nIncludes tests cases for the endpoints.\nReviewer checklist\n\n Ensure docs are updated if necessary. (eg. if a user visible feature is being added or changed).\n Ensure relevant issues are linked (description should include text like \"Fixes #\")", "createdAt": "2020-04-21T13:34:12Z", "url": "https://github.com/confluentinc/ksql/pull/5126", "merged": true, "mergeCommit": {"oid": "fbc9bf019ec53b02af11832e12ed944ae4e424d0"}, "closed": true, "closedAt": "2020-04-22T18:49:14Z", "author": {"login": "purplefox"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcaDGRqgFqTM5NzkwOTYwMA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcaMfRiAFqTM5ODQ1ODg2MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk3OTA5NjAw", "url": "https://github.com/confluentinc/ksql/pull/5126#pullrequestreview-397909600", "createdAt": "2020-04-22T07:22:02Z", "commit": {"oid": "e32845783927de711f3514dabf7499ef59f4f0e2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQwNzoyMjowMlrOGJnUWQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQwNzoyMjowMlrOGJnUWQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjczNDU1Mw==", "bodyText": "Can we add a comment explaining the importance of handling these before the server state handler (and auth handler)? It's great that you've added tests for this but I think a comment would be nice for anyone who happens to be glancing at the code.", "url": "https://github.com/confluentinc/ksql/pull/5126#discussion_r412734553", "createdAt": "2020-04-22T07:22:02Z", "author": {"login": "vcrfxia"}, "path": "ksqldb-rest-app/src/main/java/io/confluent/ksql/api/server/ServerVerticle.java", "diffHunk": "@@ -116,6 +118,9 @@ int actualPort() {\n   private Router setupRouter() {\n     final Router router = Router.router(vertx);\n \n+    router.route(HttpMethod.GET, \"/chc/ready\").handler(ServerVerticle::chcHandler);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e32845783927de711f3514dabf7499ef59f4f0e2"}, "originalPosition": 17}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e32845783927de711f3514dabf7499ef59f4f0e2", "author": {"user": {"login": "purplefox", "name": "Tim Fox"}}, "url": "https://github.com/confluentinc/ksql/commit/e32845783927de711f3514dabf7499ef59f4f0e2", "committedDate": "2020-04-21T13:31:26Z", "message": "Implement /chc endpoints"}, "afterCommit": {"oid": "164e3d8c2e8e86798ebd85df8001817054e1a0b5", "author": {"user": {"login": "purplefox", "name": "Tim Fox"}}, "url": "https://github.com/confluentinc/ksql/commit/164e3d8c2e8e86798ebd85df8001817054e1a0b5", "committedDate": "2020-04-22T07:42:37Z", "message": "Implement /chc endpoints"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6c2fd7527514396062bfe08011ec4b7700abad59", "author": {"user": {"login": "purplefox", "name": "Tim Fox"}}, "url": "https://github.com/confluentinc/ksql/commit/6c2fd7527514396062bfe08011ec4b7700abad59", "committedDate": "2020-04-22T09:17:35Z", "message": "migrate websocket"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "36d9dd86746e9133debeb5b5bc3e2815e8f93136", "author": {"user": {"login": "purplefox", "name": "Tim Fox"}}, "url": "https://github.com/confluentinc/ksql/commit/36d9dd86746e9133debeb5b5bc3e2815e8f93136", "committedDate": "2020-04-22T10:22:06Z", "message": "Enable compression on websockets + make sure message is truncated or chrome barfs"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "164e3d8c2e8e86798ebd85df8001817054e1a0b5", "author": {"user": {"login": "purplefox", "name": "Tim Fox"}}, "url": "https://github.com/confluentinc/ksql/commit/164e3d8c2e8e86798ebd85df8001817054e1a0b5", "committedDate": "2020-04-22T07:42:37Z", "message": "Implement /chc endpoints"}, "afterCommit": {"oid": "dbff613afb26eb21dd527ab55095048f89c49c4c", "author": {"user": {"login": "purplefox", "name": "Tim Fox"}}, "url": "https://github.com/confluentinc/ksql/commit/dbff613afb26eb21dd527ab55095048f89c49c4c", "committedDate": "2020-04-22T10:30:10Z", "message": "Added note on /chc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b7b927f4d9306a8f97459d812630d5e0c9159bf8", "author": {"user": {"login": "purplefox", "name": "Tim Fox"}}, "url": "https://github.com/confluentinc/ksql/commit/b7b927f4d9306a8f97459d812630d5e0c9159bf8", "committedDate": "2020-04-22T11:52:52Z", "message": "findbugs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c20eba60ea83d4eda9322d10fbfb29528d29dd7d", "author": {"user": {"login": "purplefox", "name": "Tim Fox"}}, "url": "https://github.com/confluentinc/ksql/commit/c20eba60ea83d4eda9322d10fbfb29528d29dd7d", "committedDate": "2020-04-22T11:53:39Z", "message": "Implement /chc endpoints"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d76297c92b0c2838a410cb720fdc6d431514d45b", "author": {"user": {"login": "purplefox", "name": "Tim Fox"}}, "url": "https://github.com/confluentinc/ksql/commit/d76297c92b0c2838a410cb720fdc6d431514d45b", "committedDate": "2020-04-22T11:53:39Z", "message": "Added note on /chc"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "dbff613afb26eb21dd527ab55095048f89c49c4c", "author": {"user": {"login": "purplefox", "name": "Tim Fox"}}, "url": "https://github.com/confluentinc/ksql/commit/dbff613afb26eb21dd527ab55095048f89c49c4c", "committedDate": "2020-04-22T10:30:10Z", "message": "Added note on /chc"}, "afterCommit": {"oid": "d76297c92b0c2838a410cb720fdc6d431514d45b", "author": {"user": {"login": "purplefox", "name": "Tim Fox"}}, "url": "https://github.com/confluentinc/ksql/commit/d76297c92b0c2838a410cb720fdc6d431514d45b", "committedDate": "2020-04-22T11:53:39Z", "message": "Added note on /chc"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk4NDU4ODYw", "url": "https://github.com/confluentinc/ksql/pull/5126#pullrequestreview-398458860", "createdAt": "2020-04-22T18:21:08Z", "commit": {"oid": "d76297c92b0c2838a410cb720fdc6d431514d45b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4881, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}