{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc0OTMwMDEw", "number": 6118, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQwMDo1NzoxM1rOEdb9BA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQxNzo0ODozMVrOEd1lwQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk5MzAyMTQ4OnYy", "diffSide": "RIGHT", "path": "ksqldb-functional-tests/src/test/resources/test-runner/correct/from_docs/input.json", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQwMDo1NzoxM1rOHIl_VA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQxODoxNjo1OVrOHKDaRQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODc3MzA3Ng==", "bodyText": "I think this is an accidental change", "url": "https://github.com/confluentinc/ksql/pull/6118#discussion_r478773076", "createdAt": "2020-08-28T00:57:13Z", "author": {"login": "vpapavas"}, "path": "ksqldb-functional-tests/src/test/resources/test-runner/correct/from_docs/input.json", "diffHunk": "@@ -1,3 +1,4 @@\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2ee4f8db76ad5820d8b9a54175392f4a870c307c"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDI4Njg0OA==", "bodyText": "Can you remove this change from the PR please?", "url": "https://github.com/confluentinc/ksql/pull/6118#discussion_r480286848", "createdAt": "2020-08-31T17:45:07Z", "author": {"login": "vpapavas"}, "path": "ksqldb-functional-tests/src/test/resources/test-runner/correct/from_docs/input.json", "diffHunk": "@@ -1,3 +1,4 @@\n+", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODc3MzA3Ng=="}, "originalCommit": {"oid": "2ee4f8db76ad5820d8b9a54175392f4a870c307c"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDMwMzY4NQ==", "bodyText": "done", "url": "https://github.com/confluentinc/ksql/pull/6118#discussion_r480303685", "createdAt": "2020-08-31T18:16:59Z", "author": {"login": "cprasad1"}, "path": "ksqldb-functional-tests/src/test/resources/test-runner/correct/from_docs/input.json", "diffHunk": "@@ -1,3 +1,4 @@\n+", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODc3MzA3Ng=="}, "originalCommit": {"oid": "2ee4f8db76ad5820d8b9a54175392f4a870c307c"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk5NzIyMTc3OnYy", "diffSide": "RIGHT", "path": "ksqldb-engine/src/test/java/io/confluent/ksql/function/udf/string/EncodeTest.java", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQxNzo0ODozMVrOHJPXFg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQxODo0MjowNlrOHJQ2qA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTQ1MDkwMg==", "bodyText": "What happens if the string is 0x0x? Or 0X? Or X' without a closing quote? Are there any characters that are not allowed with these formats?", "url": "https://github.com/confluentinc/ksql/pull/6118#discussion_r479450902", "createdAt": "2020-08-28T17:48:31Z", "author": {"login": "vpapavas"}, "path": "ksqldb-engine/src/test/java/io/confluent/ksql/function/udf/string/EncodeTest.java", "diffHunk": "@@ -41,6 +41,15 @@ public void shouldEncodeHexToAscii() {\n     assertThat(udf.encode(\"31202b2031203d2031\", \"hex\", \"ascii\"), is(\"1 + 1 = 1\"));\n     assertThat(udf.encode(\"ce95cebbcebbceacceb4ceb1\", \"hex\", \"ascii\"), is(\"\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\"));\n     assertThat(udf.encode(\"c39c6265726d656e736368\", \"hex\", \"ascii\"), is(\"\ufffd\ufffdbermensch\"));\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a404b0b11b1de09717f0a7c7e6eb87c221c61791"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTQ1ODQ1MA==", "bodyText": "I am assuming that you are worried about illegal hex literals (eg: 'p', 'x', '*' etc) in these formats. The function would throw an exception and we would get nulls in the end which was the default behavior before this was implemented. That is because this feature piggybacks on the pre-existing hex decoders that existed before these changes. I am adding a few more tests to demonstrate these corrupted formats.", "url": "https://github.com/confluentinc/ksql/pull/6118#discussion_r479458450", "createdAt": "2020-08-28T18:04:43Z", "author": {"login": "cprasad1"}, "path": "ksqldb-engine/src/test/java/io/confluent/ksql/function/udf/string/EncodeTest.java", "diffHunk": "@@ -41,6 +41,15 @@ public void shouldEncodeHexToAscii() {\n     assertThat(udf.encode(\"31202b2031203d2031\", \"hex\", \"ascii\"), is(\"1 + 1 = 1\"));\n     assertThat(udf.encode(\"ce95cebbcebbceacceb4ceb1\", \"hex\", \"ascii\"), is(\"\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\"));\n     assertThat(udf.encode(\"c39c6265726d656e736368\", \"hex\", \"ascii\"), is(\"\ufffd\ufffdbermensch\"));\n+", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTQ1MDkwMg=="}, "originalCommit": {"oid": "a404b0b11b1de09717f0a7c7e6eb87c221c61791"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTQ2MTI1NQ==", "bodyText": "Also, I noticed that the pre-existing encode udf couldn't deal with Hex of odd lengths (It would throw an exception). Now, it supports odd lengths by padding a \"0\" to the left in the 0x... format but would throw an exception with X'...' and x'...' formats which is consistent with https://dev.mysql.com/doc/refman/8.0/en/hexadecimal-literals.html. But I am not sure if we should support hex of odd lengths before without any of these special characters around them. It would just throw an exception like it used to", "url": "https://github.com/confluentinc/ksql/pull/6118#discussion_r479461255", "createdAt": "2020-08-28T18:10:50Z", "author": {"login": "cprasad1"}, "path": "ksqldb-engine/src/test/java/io/confluent/ksql/function/udf/string/EncodeTest.java", "diffHunk": "@@ -41,6 +41,15 @@ public void shouldEncodeHexToAscii() {\n     assertThat(udf.encode(\"31202b2031203d2031\", \"hex\", \"ascii\"), is(\"1 + 1 = 1\"));\n     assertThat(udf.encode(\"ce95cebbcebbceacceb4ceb1\", \"hex\", \"ascii\"), is(\"\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\"));\n     assertThat(udf.encode(\"c39c6265726d656e736368\", \"hex\", \"ascii\"), is(\"\ufffd\ufffdbermensch\"));\n+", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTQ1MDkwMg=="}, "originalCommit": {"oid": "a404b0b11b1de09717f0a7c7e6eb87c221c61791"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTQ3NTM2OA==", "bodyText": "added more tests to demonstrate that behavior", "url": "https://github.com/confluentinc/ksql/pull/6118#discussion_r479475368", "createdAt": "2020-08-28T18:42:06Z", "author": {"login": "cprasad1"}, "path": "ksqldb-engine/src/test/java/io/confluent/ksql/function/udf/string/EncodeTest.java", "diffHunk": "@@ -41,6 +41,15 @@ public void shouldEncodeHexToAscii() {\n     assertThat(udf.encode(\"31202b2031203d2031\", \"hex\", \"ascii\"), is(\"1 + 1 = 1\"));\n     assertThat(udf.encode(\"ce95cebbcebbceacceb4ceb1\", \"hex\", \"ascii\"), is(\"\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\"));\n     assertThat(udf.encode(\"c39c6265726d656e736368\", \"hex\", \"ascii\"), is(\"\ufffd\ufffdbermensch\"));\n+", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTQ1MDkwMg=="}, "originalCommit": {"oid": "a404b0b11b1de09717f0a7c7e6eb87c221c61791"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2952, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}