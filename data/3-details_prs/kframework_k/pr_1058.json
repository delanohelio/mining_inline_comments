{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY3NzAxNzYz", "number": 1058, "title": "Checking verification modules similarly to regular modules", "bodyText": "Up to now, kprove was not performing checks (similar to those performed at definition parsing time) on the spec files.\nSince we know there are specs where vars occurring only in the RHS are not existentially quantified, I decided not to stop execution when checks are violated, and just to report them at the end of the execution.\nOnce we merge this PR we should let interested parties know about it and advise them to update their specs asap.", "createdAt": "2020-01-27T21:02:11Z", "url": "https://github.com/kframework/k/pull/1058", "merged": true, "mergeCommit": {"oid": "78ae942bc3393a0ef9e74619750d38b6719bf4d5"}, "closed": true, "closedAt": "2020-01-30T15:49:29Z", "author": {"login": "traiansf"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb-jKs6AH2gAyMzY3NzAxNzYzOmFlZDk1MTE0MDY0MTk4YzNmMjgwYTUxNTFhOTVhMTQ0OTM0ODNjMDA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb_bc57AH2gAyMzY3NzAxNzYzOjdjYjNjM2YzYTRmNDNhNTkzYTRkNjFmZTEzMTE1MzI4MTM2Y2VlMDg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "aed95114064198c3f280a5151a95a14493483c00", "author": {"user": {"login": "traiansf", "name": "Traian Florin \u0218erb\u0103nu\u021b\u0103"}}, "url": "https://github.com/kframework/k/commit/aed95114064198c3f280a5151a95a14493483c00", "committedDate": "2020-01-27T20:56:36Z", "message": "Checking verification modules similarly to regular modules"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f05b68c296e8bb90052a1b2f7e67a415f3c08491", "author": {"user": {"login": "traiansf", "name": "Traian Florin \u0218erb\u0103nu\u021b\u0103"}}, "url": "https://github.com/kframework/k/commit/f05b68c296e8bb90052a1b2f7e67a415f3c08491", "committedDate": "2020-01-28T08:58:44Z", "message": "Merge remote-tracking branch 'upstream/master' into claim-checks"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "982807583403968a4b6b9d6a1040c9faeefbb8e7", "author": {"user": {"login": "traiansf", "name": "Traian Florin \u0218erb\u0103nu\u021b\u0103"}}, "url": "https://github.com/kframework/k/commit/982807583403968a4b6b9d6a1040c9faeefbb8e7", "committedDate": "2020-01-28T09:30:21Z", "message": "removing directory from output"}, "afterCommit": {"oid": "9b1f4a8ae70f65e5569ad46385c5b222cd345d20", "author": {"user": {"login": "traiansf", "name": "Traian Florin \u0218erb\u0103nu\u021b\u0103"}}, "url": "https://github.com/kframework/k/commit/9b1f4a8ae70f65e5569ad46385c5b222cd345d20", "committedDate": "2020-01-28T09:38:28Z", "message": "removing directory from output"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cb9a306979abdb9e9def3cf26a02b0cb1b2df2dc", "author": {"user": {"login": "traiansf", "name": "Traian Florin \u0218erb\u0103nu\u021b\u0103"}}, "url": "https://github.com/kframework/k/commit/cb9a306979abdb9e9def3cf26a02b0cb1b2df2dc", "committedDate": "2020-01-28T09:45:08Z", "message": "removing directory from output"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9b1f4a8ae70f65e5569ad46385c5b222cd345d20", "author": {"user": {"login": "traiansf", "name": "Traian Florin \u0218erb\u0103nu\u021b\u0103"}}, "url": "https://github.com/kframework/k/commit/9b1f4a8ae70f65e5569ad46385c5b222cd345d20", "committedDate": "2020-01-28T09:38:28Z", "message": "removing directory from output"}, "afterCommit": {"oid": "cb9a306979abdb9e9def3cf26a02b0cb1b2df2dc", "author": {"user": {"login": "traiansf", "name": "Traian Florin \u0218erb\u0103nu\u021b\u0103"}}, "url": "https://github.com/kframework/k/commit/cb9a306979abdb9e9def3cf26a02b0cb1b2df2dc", "committedDate": "2020-01-28T09:45:08Z", "message": "removing directory from output"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5NTA5MTU4", "url": "https://github.com/kframework/k/pull/1058#pullrequestreview-349509158", "createdAt": "2020-01-28T16:17:46Z", "commit": {"oid": "cb9a306979abdb9e9def3cf26a02b0cb1b2df2dc"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5NTEzNTEz", "url": "https://github.com/kframework/k/pull/1058#pullrequestreview-349513513", "createdAt": "2020-01-28T16:22:55Z", "commit": {"oid": "cb9a306979abdb9e9def3cf26a02b0cb1b2df2dc"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQxNjoyMjo1NlrOFirhzA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQxNjoyNDowOVrOFirlAg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTkwOTA2OA==", "bodyText": "unfortunately this will break the update-results target, because sed will not be run in that case and you will populate the output files with results that will not pass tests. The sed needs to be outside the CHECK variable.", "url": "https://github.com/kframework/k/pull/1058#discussion_r371909068", "createdAt": "2020-01-28T16:22:56Z", "author": {"login": "dwightguth"}, "path": "k-distribution/include/ktest.mak", "diffHunk": "@@ -38,7 +38,9 @@ KAST_TESTS?=$(wildcard $(TESTDIR)/*.kast)\n # default KOMPILE_BACKEND\n KOMPILE_BACKEND?=llvm\n \n-CHECK=| diff -\n+CHECK?=| diff -\n+REMOVE_PATHS=sed 's!'`pwd`'/\\(\\./\\)\\{0,1\\}!!g'\n+CHECK_ERRORS=2>&1 | $(REMOVE_PATHS) | diff -", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cb9a306979abdb9e9def3cf26a02b0cb1b2df2dc"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTkwOTg5MA==", "bodyText": "it doesn't make sense that you wouldn't throw an error here. You should never have errors in the output displayed by a tool unless the tool has exited abnormally.", "url": "https://github.com/kframework/k/pull/1058#discussion_r371909890", "createdAt": "2020-01-28T16:24:09Z", "author": {"login": "dwightguth"}, "path": "kernel/src/main/java/org/kframework/kprove/ProofDefinitionBuilder.java", "diffHunk": "@@ -70,13 +66,15 @@ public ProofDefinitionBuilder(CompiledDefinition compiledDefinition, Backend bac\n                 backend.excludedModuleTags());\n         Map<String, Module> modulesMap = modules.stream().collect(Collectors.toMap(Module::name, m -> m));\n         Definition parsedDefinition = compiledDefinition.getParsedDefinition();\n+        Module specModule = getModule(specModuleNameUpdated, modulesMap, parsedDefinition);\n+        kompile.structuralChecks(scala.collection.JavaConverters.asScalaSet(modules),\n+                specModule, scala.Option.empty(), backend.excludedModuleTags(), false);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cb9a306979abdb9e9def3cf26a02b0cb1b2df2dc"}, "originalPosition": 19}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5acdca5fb4589d47479f2eca6341c2815ff0ef33", "author": {"user": {"login": "traiansf", "name": "Traian Florin \u0218erb\u0103nu\u021b\u0103"}}, "url": "https://github.com/kframework/k/commit/5acdca5fb4589d47479f2eca6341c2815ff0ef33", "committedDate": "2020-01-29T07:57:41Z", "message": "Merge remote-tracking branch 'upstream/master' into claim-checks"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "50c6da2b0e85cc2be218ab5d443160c9a445ce2b", "author": {"user": {"login": "traiansf", "name": "Traian Florin \u0218erb\u0103nu\u021b\u0103"}}, "url": "https://github.com/kframework/k/commit/50c6da2b0e85cc2be218ab5d443160c9a445ce2b", "committedDate": "2020-01-29T11:30:04Z", "message": "Addressing reviews"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a76f6df91e1b498d8eb451ee547173d18d9f2f0c", "author": {"user": {"login": "traiansf", "name": "Traian Florin \u0218erb\u0103nu\u021b\u0103"}}, "url": "https://github.com/kframework/k/commit/a76f6df91e1b498d8eb451ee547173d18d9f2f0c", "committedDate": "2020-01-29T08:39:57Z", "message": "Addressing reviews"}, "afterCommit": {"oid": "50c6da2b0e85cc2be218ab5d443160c9a445ce2b", "author": {"user": {"login": "traiansf", "name": "Traian Florin \u0218erb\u0103nu\u021b\u0103"}}, "url": "https://github.com/kframework/k/commit/50c6da2b0e85cc2be218ab5d443160c9a445ce2b", "committedDate": "2020-01-29T11:30:04Z", "message": "Addressing reviews"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "53722cadaa9fd4809160c1c615c6bf089cce197d", "author": {"user": {"login": "traiansf", "name": "Traian Florin \u0218erb\u0103nu\u021b\u0103"}}, "url": "https://github.com/kframework/k/commit/53722cadaa9fd4809160c1c615c6bf089cce197d", "committedDate": "2020-01-30T09:17:19Z", "message": "Merge branch 'master' into claim-checks"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUwODYyMDE5", "url": "https://github.com/kframework/k/pull/1058#pullrequestreview-350862019", "createdAt": "2020-01-30T14:26:53Z", "commit": {"oid": "53722cadaa9fd4809160c1c615c6bf089cce197d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7cb3c3f3a4f43a593a4d61fe13115328136cee08", "author": {"user": {"login": "traiansf", "name": "Traian Florin \u0218erb\u0103nu\u021b\u0103"}}, "url": "https://github.com/kframework/k/commit/7cb3c3f3a4f43a593a4d61fe13115328136cee08", "committedDate": "2020-01-30T14:31:10Z", "message": "Merge remote-tracking branch 'upstream/master' into claim-checks"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2494, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}