{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA5MDQzODIw", "number": 1238, "title": "Simpler Dockerfile, per-distro packaging Dockerfiles", "bodyText": "This:\n\nMoves the dockerfiles for each distro into a subdirectory of package.\nSimplifies the main Dockerfile for CI container (removes the parametric bits).\nUses the Dockerfile to setup the git credentials rather than throughout the Jenkinsfile.\nMakes sure that hub is installed in the main dockerfile so we can use it directly for doing GitHub releases.\nSwitches the smoke-test test-in-container to use llvm backend, not ocaml backend.\n\nThis is pulled out of #1227 , because that one is failing and I figured we try getting it in one change at a time.", "createdAt": "2020-04-26T08:41:15Z", "url": "https://github.com/kframework/k/pull/1238", "merged": true, "mergeCommit": {"oid": "fb3c282c71b04a497b2d61de42fa56104e3d1c5d"}, "closed": true, "closedAt": "2020-04-27T16:21:58Z", "author": {"login": "ehildenb"}, "timelineItems": {"totalCount": 17, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcbV7vnAH2gAyNDA5MDQzODIwOmQ5ZmUzNzg1MTRkNTU2ZDhhYjQ2ZjNlMTFjOWIyMDE2ZmM0OWM3NWQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcbw8r9AFqTQwMTA2MjA4MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d9fe378514d556d8ab46f3e11c9b2016fc49c75d", "author": {"user": {"login": "ehildenb", "name": "Everett Hildenbrandt"}}, "url": "https://github.com/kframework/k/commit/d9fe378514d556d8ab46f3e11c9b2016fc49c75d", "committedDate": "2020-04-26T07:55:18Z", "message": "src/main/scripts/test-in-container: no point testing ocaml backend"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2a8c5cf2998719cbd7ccdcbe710b51512ad7cd11", "author": {"user": {"login": "ehildenb", "name": "Everett Hildenbrandt"}}, "url": "https://github.com/kframework/k/commit/2a8c5cf2998719cbd7ccdcbe710b51512ad7cd11", "committedDate": "2020-04-26T07:55:18Z", "message": "Jenkinsfile: formatting"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bca212c486fa6c5a60bae653865c435ddcf8b24d", "author": {"user": {"login": "ehildenb", "name": "Everett Hildenbrandt"}}, "url": "https://github.com/kframework/k/commit/bca212c486fa6c5a60bae653865c435ddcf8b24d", "committedDate": "2020-04-26T07:57:05Z", "message": "Jenkinsfile, Dockerfile.debian: use for deploying via hub as well"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c201886b1c75300a7f0ba11363936c3a4a06aa4a", "author": {"user": {"login": "ehildenb", "name": "Everett Hildenbrandt"}}, "url": "https://github.com/kframework/k/commit/c201886b1c75300a7f0ba11363936c3a4a06aa4a", "committedDate": "2020-04-26T07:57:05Z", "message": "Jenkinsfile, package/debian/Dockerfile: separate dockerfile for building deb packages"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c97889d0c5be7d5f6be2d577b4006e4c06143650", "author": {"user": {"login": "ehildenb", "name": "Everett Hildenbrandt"}}, "url": "https://github.com/kframework/k/commit/c97889d0c5be7d5f6be2d577b4006e4c06143650", "committedDate": "2020-04-26T07:57:05Z", "message": "Jenkinsfile, Dockerfile.debian => Dockerfile: single dockerfile for CI build stuffs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b5a43dd4cf9c11aee6ade5b42978cec661105baa", "author": {"user": {"login": "ehildenb", "name": "Everett Hildenbrandt"}}, "url": "https://github.com/kframework/k/commit/b5a43dd4cf9c11aee6ade5b42978cec661105baa", "committedDate": "2020-04-26T07:57:05Z", "message": "Jenkinsfile, Dockerfile: unparameterize where not needed"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8139ef14690fadc7159bf944e84601c3c35123c9", "author": {"user": {"login": "ehildenb", "name": "Everett Hildenbrandt"}}, "url": "https://github.com/kframework/k/commit/8139ef14690fadc7159bf944e84601c3c35123c9", "committedDate": "2020-04-26T07:57:05Z", "message": "Dockerfile, Jenkinsfile, package/ssh/config: build ssh credentials into Dockerfile for CI"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "963733ee1d1597d836a16583afe315a29077a2b3", "author": {"user": {"login": "ehildenb", "name": "Everett Hildenbrandt"}}, "url": "https://github.com/kframework/k/commit/963733ee1d1597d836a16583afe315a29077a2b3", "committedDate": "2020-04-26T08:38:49Z", "message": "Dockerfile: more readable"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "349a1059fdd571546ed3983f9923f18a0f0195e7", "author": {"user": {"login": "ehildenb", "name": "Everett Hildenbrandt"}}, "url": "https://github.com/kframework/k/commit/349a1059fdd571546ed3983f9923f18a0f0195e7", "committedDate": "2020-04-26T08:38:49Z", "message": "Dockerfile: put less-likely to change steps earlier"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3a4d9e0875aa698f4f81e2989f44831241e60c80", "author": {"user": {"login": "ehildenb", "name": "Everett Hildenbrandt"}}, "url": "https://github.com/kframework/k/commit/3a4d9e0875aa698f4f81e2989f44831241e60c80", "committedDate": "2020-04-26T08:38:49Z", "message": "Dockerfile: no sense putting environment setup before hub download"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "756cc7c70b4ef7621e3c30b8f5bf201a278ddc27", "author": {"user": {"login": "ehildenb", "name": "Everett Hildenbrandt"}}, "url": "https://github.com/kframework/k/commit/756cc7c70b4ef7621e3c30b8f5bf201a278ddc27", "committedDate": "2020-04-26T08:38:49Z", "message": "Jenkinsfile, Dockerfile.arch => package/arch/Dockerfile: move arch dockerfile to specific location"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e1c3630e8085463ff3192c4a17e8684ea349e4fe", "author": {"user": {"login": "ehildenb", "name": "Everett Hildenbrandt"}}, "url": "https://github.com/kframework/k/commit/e1c3630e8085463ff3192c4a17e8684ea349e4fe", "committedDate": "2020-04-26T08:38:49Z", "message": "!!! Jenkinsfile: debugging"}, "afterCommit": {"oid": "756cc7c70b4ef7621e3c30b8f5bf201a278ddc27", "author": {"user": {"login": "ehildenb", "name": "Everett Hildenbrandt"}}, "url": "https://github.com/kframework/k/commit/756cc7c70b4ef7621e3c30b8f5bf201a278ddc27", "committedDate": "2020-04-26T08:38:49Z", "message": "Jenkinsfile, Dockerfile.arch => package/arch/Dockerfile: move arch dockerfile to specific location"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4763aaaa55eb8f36190e3e107ccfdfb7d59b27f8", "author": {"user": {"login": "ehildenb", "name": "Everett Hildenbrandt"}}, "url": "https://github.com/kframework/k/commit/4763aaaa55eb8f36190e3e107ccfdfb7d59b27f8", "committedDate": "2020-04-27T13:48:10Z", "message": "Merge branch 'master' into simpler-dockerfile"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAxMDUxMjk0", "url": "https://github.com/kframework/k/pull/1238#pullrequestreview-401051294", "createdAt": "2020-04-27T15:12:21Z", "commit": {"oid": "4763aaaa55eb8f36190e3e107ccfdfb7d59b27f8"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QxNToxMjoyMVrOGMocoA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QxNToxMjoyMVrOGMocoA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTg5ODc4NA==", "bodyText": "The reason we are building with the ocaml backend here is because we have already tested the other backends. Changing this means we will not get informed if something relating to the ocaml backend breaks, but it doesn't actually add any new test coverage. Please undo this change.", "url": "https://github.com/kframework/k/pull/1238#discussion_r415898784", "createdAt": "2020-04-27T15:12:21Z", "author": {"login": "dwightguth"}, "path": "src/main/scripts/test-in-container", "diffHunk": "@@ -9,5 +9,5 @@ echo 'Testing tutorial in user environment...'\n make -j`nproc`\n cd ~\n echo \"module TEST imports BOOL endmodule\" > test.k\n-kompile test.k --backend ocaml\n+kompile test.k --backend llvm", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4763aaaa55eb8f36190e3e107ccfdfb7d59b27f8"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAxMDYwMTM0", "url": "https://github.com/kframework/k/pull/1238#pullrequestreview-401060134", "createdAt": "2020-04-27T15:21:43Z", "commit": {"oid": "4763aaaa55eb8f36190e3e107ccfdfb7d59b27f8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QxNToyMTo0M1rOGMo6qg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QxNToyMTo0M1rOGMo6qg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTkwNjQ3NA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            kompile test.k --backend llvm\n          \n          \n            \n            kompile test.k --backend ocaml", "url": "https://github.com/kframework/k/pull/1238#discussion_r415906474", "createdAt": "2020-04-27T15:21:43Z", "author": {"login": "ehildenb"}, "path": "src/main/scripts/test-in-container", "diffHunk": "@@ -9,5 +9,5 @@ echo 'Testing tutorial in user environment...'\n make -j`nproc`\n cd ~\n echo \"module TEST imports BOOL endmodule\" > test.k\n-kompile test.k --backend ocaml\n+kompile test.k --backend llvm", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4763aaaa55eb8f36190e3e107ccfdfb7d59b27f8"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eb4b1ecf2f3552dfb89dbd7166697dea0155459e", "author": {"user": {"login": "ehildenb", "name": "Everett Hildenbrandt"}}, "url": "https://github.com/kframework/k/commit/eb4b1ecf2f3552dfb89dbd7166697dea0155459e", "committedDate": "2020-04-27T15:21:57Z", "message": "src/main/scripts/test-in-container: back to testing with OCaml"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAxMDYyMDgx", "url": "https://github.com/kframework/k/pull/1238#pullrequestreview-401062081", "createdAt": "2020-04-27T15:23:46Z", "commit": {"oid": "eb4b1ecf2f3552dfb89dbd7166697dea0155459e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2477, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}