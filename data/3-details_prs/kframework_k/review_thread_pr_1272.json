{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE1MzUzMDUw", "number": 1272, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxMToxMzoyOVrOD9WT7w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxMToyMToxN1rOD9WdPQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY1NjU1Mjc5OnYy", "diffSide": "RIGHT", "path": "Jenkinsfile", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxMToxMzoyOVrOGWyhlQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxMToxMzoyOVrOGWyhlQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjU0OTY1Mw==", "bodyText": "Make sure this gets changed back before merge.", "url": "https://github.com/kframework/k/pull/1272#discussion_r426549653", "createdAt": "2020-05-18T11:13:29Z", "author": {"login": "ehildenb"}, "path": "Jenkinsfile", "diffHunk": "@@ -50,7 +50,7 @@ pipeline {\n                     }\n                   }\n                   stages {\n-                    stage('Checkout code') { steps { dir('k-exercises') { git url: 'git@github.com:kframework/k-exercises.git' } } }\n+                    stage('Checkout code') { steps { dir('k-exercises') { git url: 'git@github.com:kframework/k-exercises.git', branch: 'reorg' } } }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "13bad6d2b308fe67c5330b362fa4ff25ecfc127d"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY1NjU1NDczOnYy", "diffSide": "RIGHT", "path": "Jenkinsfile", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxMToxNDoxMFrOGWyi6Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxMToxNDoxMFrOGWyi6Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjU0OTk5Mw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                dir('kframework') {\n          \n          \n            \n                                  checkout scm\n          \n          \n            \n                                }\n          \n          \n            \n                                dir('kframework') { checkout scm }\n          \n      \n    \n    \n  \n\nSticking to the formatting where we use less lines has made the Jenkinsfile more readable on many projects.", "url": "https://github.com/kframework/k/pull/1272#discussion_r426549993", "createdAt": "2020-05-18T11:14:10Z", "author": {"login": "ehildenb"}, "path": "Jenkinsfile", "diffHunk": "@@ -318,15 +318,16 @@ pipeline {\n                   agent { label 'anka' }\n                   steps {\n                     unstash 'src'\n+                    dir('kframework') {\n+                      checkout scm\n+                    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "13bad6d2b308fe67c5330b362fa4ff25ecfc127d"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY1NjU2MDQ1OnYy", "diffSide": "RIGHT", "path": "k-distribution/include/kframework/kore", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxMToxNjowNFrOGWymew==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxMzoyMzoxN1rOGW281Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjU1MDkwNw==", "bodyText": "What is this file used for? Searching for kframework/kore in this state-delta doesn't reveal anything where it's using this file for something AFAICT.", "url": "https://github.com/kframework/k/pull/1272#discussion_r426550907", "createdAt": "2020-05-18T11:16:04Z", "author": {"login": "ehildenb"}, "path": "k-distribution/include/kframework/kore", "diffHunk": "@@ -0,0 +1 @@\n+../../../haskell-backend/src/main/native/haskell-backend/src/main/kore/", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "13bad6d2b308fe67c5330b362fa4ff25ecfc127d"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjYyMjE2NQ==", "bodyText": "This is a symlink to where the kore prelude is declared which is used in source builds.", "url": "https://github.com/kframework/k/pull/1272#discussion_r426622165", "createdAt": "2020-05-18T13:23:17Z", "author": {"login": "dwightguth"}, "path": "k-distribution/include/kframework/kore", "diffHunk": "@@ -0,0 +1 @@\n+../../../haskell-backend/src/main/native/haskell-backend/src/main/kore/", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjU1MDkwNw=="}, "originalCommit": {"oid": "13bad6d2b308fe67c5330b362fa4ff25ecfc127d"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY1NjU2NDIxOnYy", "diffSide": "RIGHT", "path": "k-distribution/src/main/scripts/bin/k-configure-opam-common", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxMToxNzoyM1rOGWypFQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxMzo1MzoxNFrOGW4MOg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjU1MTU3Mw==", "bodyText": "Spacing of these lines looks weird.", "url": "https://github.com/kframework/k/pull/1272#discussion_r426551573", "createdAt": "2020-05-18T11:17:23Z", "author": {"login": "ehildenb"}, "path": "k-distribution/src/main/scripts/bin/k-configure-opam-common", "diffHunk": "@@ -1,18 +1,19 @@\n add_repo() {\n-  opam repository add k \"$(dirname \"$0\")/../lib/opam\" \\\n-   || opam repository set-url k \"$(dirname \"$0\")/../lib/opam\"\n+  opam repository add k \"$(dirname \"$0\")/../lib/kframework/opam\" \\\n+   || opam repository set-url k \"$(dirname \"$0\")/../lib/kframework/opam\"\n   opam update\n }\n \n-OCAML_VERSION=\"4.06.1+k$1\"\n case \"$(opam --version)\" in\n 1.*)\n+        OCAML_VERSION=\"4.06.1+k$1\"\n \techo Detected Opam version 1\n \topam init $INIT_ARGS\n \tadd_repo\n \topam switch \"$OCAML_VERSION\"\n \t;;\n 2.*)\n+        OCAML_VERSION=\"4.10.0$1\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "13bad6d2b308fe67c5330b362fa4ff25ecfc127d"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjU3ODI5NA==", "bodyText": "Mixing spaces with tabs, it seems... Should we pick one of the two (at least, one per language) and convert all sources?", "url": "https://github.com/kframework/k/pull/1272#discussion_r426578294", "createdAt": "2020-05-18T12:09:58Z", "author": {"login": "virgil-serbanuta"}, "path": "k-distribution/src/main/scripts/bin/k-configure-opam-common", "diffHunk": "@@ -1,18 +1,19 @@\n add_repo() {\n-  opam repository add k \"$(dirname \"$0\")/../lib/opam\" \\\n-   || opam repository set-url k \"$(dirname \"$0\")/../lib/opam\"\n+  opam repository add k \"$(dirname \"$0\")/../lib/kframework/opam\" \\\n+   || opam repository set-url k \"$(dirname \"$0\")/../lib/kframework/opam\"\n   opam update\n }\n \n-OCAML_VERSION=\"4.06.1+k$1\"\n case \"$(opam --version)\" in\n 1.*)\n+        OCAML_VERSION=\"4.06.1+k$1\"\n \techo Detected Opam version 1\n \topam init $INIT_ARGS\n \tadd_repo\n \topam switch \"$OCAML_VERSION\"\n \t;;\n 2.*)\n+        OCAML_VERSION=\"4.10.0$1\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjU1MTU3Mw=="}, "originalCommit": {"oid": "13bad6d2b308fe67c5330b362fa4ff25ecfc127d"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjY0MjQ5MA==", "bodyText": "No need to convert all sources, we can just make sure we don't introduce new errors and fix ones we find along the way.", "url": "https://github.com/kframework/k/pull/1272#discussion_r426642490", "createdAt": "2020-05-18T13:53:14Z", "author": {"login": "ehildenb"}, "path": "k-distribution/src/main/scripts/bin/k-configure-opam-common", "diffHunk": "@@ -1,18 +1,19 @@\n add_repo() {\n-  opam repository add k \"$(dirname \"$0\")/../lib/opam\" \\\n-   || opam repository set-url k \"$(dirname \"$0\")/../lib/opam\"\n+  opam repository add k \"$(dirname \"$0\")/../lib/kframework/opam\" \\\n+   || opam repository set-url k \"$(dirname \"$0\")/../lib/kframework/opam\"\n   opam update\n }\n \n-OCAML_VERSION=\"4.06.1+k$1\"\n case \"$(opam --version)\" in\n 1.*)\n+        OCAML_VERSION=\"4.06.1+k$1\"\n \techo Detected Opam version 1\n \topam init $INIT_ARGS\n \tadd_repo\n \topam switch \"$OCAML_VERSION\"\n \t;;\n 2.*)\n+        OCAML_VERSION=\"4.10.0$1\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjU1MTU3Mw=="}, "originalCommit": {"oid": "13bad6d2b308fe67c5330b362fa4ff25ecfc127d"}, "originalPosition": 19}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY1NjU3NjYxOnYy", "diffSide": "RIGHT", "path": "k-distribution/tutorial/find-k.mak", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxMToyMToxN1rOGWywpQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxNzoxMDozMVrOGXAS0Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjU1MzUwOQ==", "bodyText": "Why do we need to check so many places? I thought that this was to make the installation point standard across all distributions? Is the /usr/include/kframework vs /usr/local/include/kframework a difference between Linux/MacOS.\nI guess the point is more to make it so that we're not doing everything under /usr/lib/kframework/..., but instead directly inside /usr/... (on Linux) or /usr/local/... (on MacOS)?", "url": "https://github.com/kframework/k/pull/1272#discussion_r426553509", "createdAt": "2020-05-18T11:21:17Z", "author": {"login": "ehildenb"}, "path": "k-distribution/tutorial/find-k.mak", "diffHunk": "@@ -1,10 +1,12 @@\n MAKEFILE_PATH := $(dir $(abspath $(lastword $(MAKEFILE_LIST))))\n-ifneq (,$(wildcard ${MAKEFILE_PATH}/../include/ktest.mak))\n+ifneq (,$(wildcard ${MAKEFILE_PATH}/../../../include/kframework/ktest.mak))\n+export K_HOME?=${MAKEFILE_PATH}/../../../\n+else ifneq (,$(wildcard ${MAKEFILE_PATH}/../include/kframework/ktest.mak))\n export K_HOME?=${MAKEFILE_PATH}/..\n-else ifneq (,$(wildcard /usr/lib/kframework/include/ktest.mak))\n-export K_HOME?=/usr/lib/kframework\n-else ifneq (,$(wildcard /usr/local/lib/kframework/include/ktest.mak))\n-export K_HOME?=/usr/local/lib/kframework\n+else ifneq (,$(wildcard /usr/include/kframework/ktest.mak))\n+export K_HOME?=/usr\n+else ifneq (,$(wildcard /usr/local/include/kframework/ktest.mak))\n+export K_HOME?=/usr/local", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "13bad6d2b308fe67c5330b362fa4ff25ecfc127d"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjc3NTI0OQ==", "bodyText": "These are the cases for if the tutorial is run from its github sources, its maven target directory, or from a debian package, or from mac os.", "url": "https://github.com/kframework/k/pull/1272#discussion_r426775249", "createdAt": "2020-05-18T17:10:31Z", "author": {"login": "dwightguth"}, "path": "k-distribution/tutorial/find-k.mak", "diffHunk": "@@ -1,10 +1,12 @@\n MAKEFILE_PATH := $(dir $(abspath $(lastword $(MAKEFILE_LIST))))\n-ifneq (,$(wildcard ${MAKEFILE_PATH}/../include/ktest.mak))\n+ifneq (,$(wildcard ${MAKEFILE_PATH}/../../../include/kframework/ktest.mak))\n+export K_HOME?=${MAKEFILE_PATH}/../../../\n+else ifneq (,$(wildcard ${MAKEFILE_PATH}/../include/kframework/ktest.mak))\n export K_HOME?=${MAKEFILE_PATH}/..\n-else ifneq (,$(wildcard /usr/lib/kframework/include/ktest.mak))\n-export K_HOME?=/usr/lib/kframework\n-else ifneq (,$(wildcard /usr/local/lib/kframework/include/ktest.mak))\n-export K_HOME?=/usr/local/lib/kframework\n+else ifneq (,$(wildcard /usr/include/kframework/ktest.mak))\n+export K_HOME?=/usr\n+else ifneq (,$(wildcard /usr/local/include/kframework/ktest.mak))\n+export K_HOME?=/usr/local", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjU1MzUwOQ=="}, "originalCommit": {"oid": "13bad6d2b308fe67c5330b362fa4ff25ecfc127d"}, "originalPosition": 14}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3029, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}