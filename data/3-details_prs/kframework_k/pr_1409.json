{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ3MDU4MDA1", "number": 1409, "title": "report error if concrete backend has existentially-qualified variable", "bodyText": "Fixes #1399", "createdAt": "2020-07-09T19:44:26Z", "url": "https://github.com/kframework/k/pull/1409", "merged": true, "mergeCommit": {"oid": "d6d0433c297cfc72195fe1498601bd2a088223e2"}, "closed": true, "closedAt": "2020-07-13T14:51:07Z", "author": {"login": "dwightguth"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABczUaurgH2gAyNDQ3MDU4MDA1OjlkY2FmMzJlNTQ0MWU0ODliZTBmYTA2NmZkMDAwY2I3NDc2MzU4Mjk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc0hrtMgH2gAyNDQ3MDU4MDA1OjYzNjRjYWFkMzA3ZjI0NWIwYzU4ZjU1MjM4YzI4ODQxYzYwNWUxNTM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "9dcaf32e5441e489be0fa066fd000cb747635829", "author": {"user": {"login": "dwightguth", "name": "Dwight Guth"}}, "url": "https://github.com/kframework/k/commit/9dcaf32e5441e489be0fa066fd000cb747635829", "committedDate": "2020-07-09T19:43:31Z", "message": "report error if concrete backend has existentially-qualified variable"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bf3d1c40e0f9acb59ee4e6a7adef5a9f8e41e6fa", "author": {"user": {"login": "dwightguth", "name": "Dwight Guth"}}, "url": "https://github.com/kframework/k/commit/bf3d1c40e0f9acb59ee4e6a7adef5a9f8e41e6fa", "committedDate": "2020-07-09T19:51:32Z", "message": "tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "333a7c6a28f83a647ad7a0b6cba6753189a65197", "author": {"user": {"login": "dwightguth", "name": "Dwight Guth"}}, "url": "https://github.com/kframework/k/commit/333a7c6a28f83a647ad7a0b6cba6753189a65197", "committedDate": "2020-07-09T19:56:57Z", "message": "fix whitespace"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c108297e0e58119a4be4d70f781dbdf30750a62d", "author": {"user": {"login": "dwightguth", "name": "Dwight Guth"}}, "url": "https://github.com/kframework/k/commit/c108297e0e58119a4be4d70f781dbdf30750a62d", "committedDate": "2020-07-09T20:28:36Z", "message": "change backend"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ2NTQyNzgy", "url": "https://github.com/kframework/k/pull/1409#pullrequestreview-446542782", "createdAt": "2020-07-10T16:37:52Z", "commit": {"oid": "c108297e0e58119a4be4d70f781dbdf30750a62d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMFQxNjozNzo1M1rOGv-BnQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMFQxNjozNzo1M1rOGv-BnQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mjk1MjQ3Nw==", "bodyText": "Hmmmm, why is this here? Is there a test in this directory which has an existential on the RHS (so it was now failing for the wrong reason?)\nMaybe we shouldn't be failing until we collect all the warnings then.", "url": "https://github.com/kframework/k/pull/1409#discussion_r452952477", "createdAt": "2020-07-10T16:37:53Z", "author": {"login": "ehildenb"}, "path": "k-distribution/tests/regression-new/checkWarns/Makefile", "diffHunk": "@@ -1,4 +1,4 @@\n KOMPILE_FLAGS=-w2e\n-KOMPILE_BACKEND=llvm\n+KOMPILE_BACKEND=haskell", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c108297e0e58119a4be4d70f781dbdf30750a62d"}, "originalPosition": 3}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ2NTQ0NzU2", "url": "https://github.com/kframework/k/pull/1409#pullrequestreview-446544756", "createdAt": "2020-07-10T16:40:58Z", "commit": {"oid": "c108297e0e58119a4be4d70f781dbdf30750a62d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMFQxNjo0MDo1OFrOGv-Hrg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMFQxNjo0MDo1OFrOGv-Hrg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mjk1NDAzMA==", "bodyText": "Why are macro allowed to have existential variables on the RHS?\nPlease add test-cases exercising each of the clauses in this big conjunct.", "url": "https://github.com/kframework/k/pull/1409#discussion_r452954030", "createdAt": "2020-07-10T16:40:58Z", "author": {"login": "ehildenb"}, "path": "kernel/src/main/java/org/kframework/compile/checks/CheckRHSVariables.java", "diffHunk": "@@ -29,33 +30,37 @@\n  */\n public class CheckRHSVariables {\n     private final Set<KEMException> errors;\n+    private final boolean errorExistential;\n \n-    public CheckRHSVariables(Set<KEMException> errors) {\n+    public CheckRHSVariables(Set<KEMException> errors, boolean errorExistential) {\n         this.errors = errors;\n+        this.errorExistential = errorExistential;\n     }\n     private void check(Rule rule) {\n         resetVars();\n         Set<String> unboundVariableNames = getUnboundVarNames(rule);\n-        gatherVars(true, rule.body());\n-        gatherVars(false, rule.requires());\n-        gatherVars(false, rule.ensures());\n+        boolean isMacro = ExpandMacros.isMacro(rule);\n+        boolean errorExistential = !isMacro && this.errorExistential && !(rule.att().contains(Att.LABEL()) && rule.att().get(Att.LABEL()).equals(\"STDIN-STREAM.stdinUnblock\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c108297e0e58119a4be4d70f781dbdf30750a62d"}, "originalPosition": 26}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "72691a75f10f8905041797214532d507eff3ba2e", "author": {"user": {"login": "dwightguth", "name": "Dwight Guth"}}, "url": "https://github.com/kframework/k/commit/72691a75f10f8905041797214532d507eff3ba2e", "committedDate": "2020-07-10T16:58:37Z", "message": "fix bug"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b04533e5b9f6ab44712438007d772a6441c58c11", "author": {"user": {"login": "dwightguth", "name": "Dwight Guth"}}, "url": "https://github.com/kframework/k/commit/b04533e5b9f6ab44712438007d772a6441c58c11", "committedDate": "2020-07-10T17:19:21Z", "message": "fix broken test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "21e39ceee9793f528868e0f8da6b109a4b22aa80", "author": {"user": {"login": "dwightguth", "name": "Dwight Guth"}}, "url": "https://github.com/kframework/k/commit/21e39ceee9793f528868e0f8da6b109a4b22aa80", "committedDate": "2020-07-10T18:24:00Z", "message": "fix another bug in test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ2NjMwMTY5", "url": "https://github.com/kframework/k/pull/1409#pullrequestreview-446630169", "createdAt": "2020-07-10T18:50:00Z", "commit": {"oid": "21e39ceee9793f528868e0f8da6b109a4b22aa80"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1590225af6fb3e586b765e9871044778c6f7de90", "author": {"user": {"login": "rv-jenkins", "name": null}}, "url": "https://github.com/kframework/k/commit/1590225af6fb3e586b765e9871044778c6f7de90", "committedDate": "2020-07-10T23:21:56Z", "message": "Merge branch 'master' into concrete"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6364caad307f245b0c58f55238c28841c605e153", "author": {"user": {"login": "dwightguth", "name": "Dwight Guth"}}, "url": "https://github.com/kframework/k/commit/6364caad307f245b0c58f55238c28841c605e153", "committedDate": "2020-07-13T13:44:45Z", "message": "Merge branch 'master' into concrete"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2287, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}