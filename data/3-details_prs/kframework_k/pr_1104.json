{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc1MDg5OTU4", "number": 1104, "title": "Fix add empty list pass for parametric productions", "bodyText": "Fixes #1098\nThis is kinda an ugly fix, but the only logic to correctly compute the least upper bound sorts of parametric productions is in AddSortInjections, so we reuse that code rather than starting from scratch. Eventually, we will probably want the type inferencer to substitute out all the sort parameters and have the rest of the compilation pipeline operate over fully substituted productions, but that's a much larger refactoring.", "createdAt": "2020-02-13T21:12:23Z", "url": "https://github.com/kframework/k/pull/1104", "merged": true, "mergeCommit": {"oid": "9852fe2e4fae52663ac4eb1a0ef2726e495573b5"}, "closed": true, "closedAt": "2020-02-19T22:51:09Z", "author": {"login": "dwightguth"}, "timelineItems": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcEBYbbAH2gAyMzc1MDg5OTU4OjExNzg0N2RkNGZlMGIwZjc2OWJjMmRmOGVkZmE5NzcyZjU2ZTBkZDg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcF9UPKgH2gAyMzc1MDg5OTU4OmQ5ZDRkOGI0NmNhNjM0MTUzNmEwYTk0NjA4Y2YwZjhkNWZjYWU0ZmM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "117847dd4fe0b0f769bc2df8edfa9772f56e0dd8", "author": {"user": {"login": "dwightguth", "name": "Dwight Guth"}}, "url": "https://github.com/kframework/k/commit/117847dd4fe0b0f769bc2df8edfa9772f56e0dd8", "committedDate": "2020-02-13T20:58:22Z", "message": "fix definitions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3ef301aab99b07a152c019b34ae51bb5acd6b55e", "author": {"user": {"login": "dwightguth", "name": "Dwight Guth"}}, "url": "https://github.com/kframework/k/commit/3ef301aab99b07a152c019b34ae51bb5acd6b55e", "committedDate": "2020-02-13T20:58:32Z", "message": "fix add empty list for parametric productions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f1b6ce3bb539603c4e73fdf5b42eefa929b7a748", "author": {"user": {"login": "dwightguth", "name": "Dwight Guth"}}, "url": "https://github.com/kframework/k/commit/f1b6ce3bb539603c4e73fdf5b42eefa929b7a748", "committedDate": "2020-02-13T21:06:49Z", "message": "add test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ab91dc56c017a313a8718c50abe56aa4ca6764dc", "author": {"user": {"login": "dwightguth", "name": "Dwight Guth"}}, "url": "https://github.com/kframework/k/commit/ab91dc56c017a313a8718c50abe56aa4ca6764dc", "committedDate": "2020-02-13T21:25:34Z", "message": "add start symbol"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "72e1e12bb27d671cd39599829baaf2a64759beb1", "author": {"user": {"login": "dwightguth", "name": "Dwight Guth"}}, "url": "https://github.com/kframework/k/commit/72e1e12bb27d671cd39599829baaf2a64759beb1", "committedDate": "2020-02-13T21:31:02Z", "message": "update tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "477a64c6bb032d877014e8d044c81ed6c58fb97a", "author": {"user": {"login": "dwightguth", "name": "Dwight Guth"}}, "url": "https://github.com/kframework/k/commit/477a64c6bb032d877014e8d044c81ed6c58fb97a", "committedDate": "2020-02-14T18:22:01Z", "message": "fix another case where an empty list should not be added"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "59ed50991df2ef12138511109c41f792b27d31ef", "author": {"user": {"login": "dwightguth", "name": "Dwight Guth"}}, "url": "https://github.com/kframework/k/commit/59ed50991df2ef12138511109c41f792b27d31ef", "committedDate": "2020-02-14T18:22:19Z", "message": "fix bug with error when rewrite is at top of term and child is\npolymorphic in return sort"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "67cc1be4924f6d657aaecf189186626c40162864", "author": {"user": {"login": "dwightguth", "name": "Dwight Guth"}}, "url": "https://github.com/kframework/k/commit/67cc1be4924f6d657aaecf189186626c40162864", "committedDate": "2020-02-14T19:20:33Z", "message": "tmp: Jenkinsfile"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU5Nzg1NDE1", "url": "https://github.com/kframework/k/pull/1104#pullrequestreview-359785415", "createdAt": "2020-02-17T14:45:24Z", "commit": {"oid": "67cc1be4924f6d657aaecf189186626c40162864"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xN1QxNDo0NToyNFrOFqm4dA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xN1QxNTowOTo0M1rOFqntiA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDIyMTU1Ng==", "bodyText": "I think I understand why, but this looks wrong. I'm curious what Grigore has to say.", "url": "https://github.com/kframework/k/pull/1104#discussion_r380221556", "createdAt": "2020-02-17T14:45:24Z", "author": {"login": "radumereuta"}, "path": "k-distribution/tutorial/2_languages/4_logik/basic/logik.k", "diffHunk": "@@ -343,7 +343,7 @@ another clause can be chosen using the rule above):  */\n   rule <k> L:Term => . ...</k>\n        <fresh>  L:Term . => . </fresh>\n \n-  rule <k> L:Term => Ls ...</k>\n+  rule <k> L:Term :KItem => Ls ...</k>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "67cc1be4924f6d657aaecf189186626c40162864"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDIzNTE0NA==", "bodyText": "This needs a small description.", "url": "https://github.com/kframework/k/pull/1104#discussion_r380235144", "createdAt": "2020-02-17T15:09:43Z", "author": {"login": "radumereuta"}, "path": "kernel/src/main/java/org/kframework/compile/AddSortInjections.java", "diffHunk": "@@ -249,6 +221,40 @@ private K visitChildren(K term, Sort actualSort, Sort expectedSort) {\n         }\n     }\n \n+    public Production substituteProd(Production prod, Sort expectedSort, BiFunction<Integer, Production, Sort> getSort, HasLocation loc) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "67cc1be4924f6d657aaecf189186626c40162864"}, "originalPosition": 50}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "004375bad3794e1fc2db0b745463c5cf69c9b8ae", "author": {"user": {"login": "dwightguth", "name": "Dwight Guth"}}, "url": "https://github.com/kframework/k/commit/004375bad3794e1fc2db0b745463c5cf69c9b8ae", "committedDate": "2020-02-17T16:18:22Z", "message": "add comment"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU5ODYxMDAz", "url": "https://github.com/kframework/k/pull/1104#pullrequestreview-359861003", "createdAt": "2020-02-17T16:36:57Z", "commit": {"oid": "004375bad3794e1fc2db0b745463c5cf69c9b8ae"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU5ODg5NDY1", "url": "https://github.com/kframework/k/pull/1104#pullrequestreview-359889465", "createdAt": "2020-02-17T17:31:35Z", "commit": {"oid": "004375bad3794e1fc2db0b745463c5cf69c9b8ae"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xN1QxNzozMTozNVrOFqr6fw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xN1QxNzozMTozNVrOFqr6fw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDMwMzk5OQ==", "bodyText": "Is this for the final version? I haven't seen it before.", "url": "https://github.com/kframework/k/pull/1104#discussion_r380303999", "createdAt": "2020-02-17T17:31:35Z", "author": {"login": "radumereuta"}, "path": "Jenkinsfile", "diffHunk": "@@ -89,7 +89,7 @@ pipeline {\n                     stage('Checkout code') {\n                       steps {\n                         dir('k-exercises') {\n-                          git url: 'git@github.com:kframework/k-exercises.git'\n+                          git url: 'git@github.com:kframework/k-exercises.git', branch: 'emptylists'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "004375bad3794e1fc2db0b745463c5cf69c9b8ae"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ae199cbe1b32ebc95858f76fb3a89445f25b0c9f", "author": {"user": {"login": "dwightguth", "name": "Dwight Guth"}}, "url": "https://github.com/kframework/k/commit/ae199cbe1b32ebc95858f76fb3a89445f25b0c9f", "committedDate": "2020-02-19T19:33:52Z", "message": "Revert \"tmp: Jenkinsfile\"\n\nThis reverts commit 67cc1be4924f6d657aaecf189186626c40162864."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "79ee7911d6126bf3810263f2ac46b94caf085b42", "author": {"user": {"login": "dwightguth", "name": "Dwight Guth"}}, "url": "https://github.com/kframework/k/commit/79ee7911d6126bf3810263f2ac46b94caf085b42", "committedDate": "2020-02-19T19:34:09Z", "message": "Merge branch 'master' into emptylists"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d9d4d8b46ca6341536a0a94608cf0f8d5fcae4fc", "author": {"user": {"login": "rv-jenkins", "name": null}}, "url": "https://github.com/kframework/k/commit/d9d4d8b46ca6341536a0a94608cf0f8d5fcae4fc", "committedDate": "2020-02-19T21:22:01Z", "message": "Merge branch 'master' into emptylists"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2508, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}