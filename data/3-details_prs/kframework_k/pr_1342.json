{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM0MjAyODQw", "number": 1342, "title": "Updates to pyk library for processing rule merges", "bodyText": "Add timeout option to _teeProcessStdout so that we can stop the rule merger if it's hanging.\nCleans up and adds to boolean predicate simplification when minimizing rules.\nPushes down rewrites in KSequences further.\nRemoves trivial requires/ensures clauses when minimizing rules.", "createdAt": "2020-06-14T21:12:06Z", "url": "https://github.com/kframework/k/pull/1342", "merged": true, "mergeCommit": {"oid": "c295c534f28a894545b64a5b320333f400e3ac87"}, "closed": true, "closedAt": "2020-06-16T22:50:49Z", "author": {"login": "ehildenb"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcqwXD6AH2gAyNDM0MjAyODQwOmJhYmRjMWFkYTgwYmE1MDM2YTAwMGRlZjFlMmI5NTFhZTMyMjU4MWE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcr8C-pgH2gAyNDM0MjAyODQwOjExODRlYzBlNjZhOTJjNjQ2YmU1N2RlOTIwZjg3YTcwYTUyOTgxM2Y=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "babdc1ada80ba5036a000def1e2b951ae322581a", "author": {"user": {"login": "ehildenb", "name": "Everett Hildenbrandt"}}, "url": "https://github.com/kframework/k/commit/babdc1ada80ba5036a000def1e2b951ae322581a", "committedDate": "2020-06-13T05:11:32Z", "message": "pyk/__init__.py: give _teeProcessStdout a timeout option"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "927c7b90b3bd662b9a0c4aa6e0fb4793888e01a0", "author": {"user": {"login": "ehildenb", "name": "Everett Hildenbrandt"}}, "url": "https://github.com/kframework/k/commit/927c7b90b3bd662b9a0c4aa6e0fb4793888e01a0", "committedDate": "2020-06-14T23:23:47Z", "message": "pyk/kastManip: better simplifying of side-conditions in minimizeRule"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9204a87256c8c33b4b9ae4bf237e14fa932c1ff0", "author": {"user": {"login": "ehildenb", "name": "Everett Hildenbrandt"}}, "url": "https://github.com/kframework/k/commit/9204a87256c8c33b4b9ae4bf237e14fa932c1ff0", "committedDate": "2020-06-14T23:50:09Z", "message": "pyk/__init__.py: formatting"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "af24036c3cacaeb6b6e5cc7085574a7f771de7a7", "author": {"user": {"login": "ehildenb", "name": "Everett Hildenbrandt"}}, "url": "https://github.com/kframework/k/commit/af24036c3cacaeb6b6e5cc7085574a7f771de7a7", "committedDate": "2020-06-15T00:32:45Z", "message": "pyk/kastManip: typo"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2f547e96e2ebe43d2ee304f21fc27eb360c96dda", "author": {"user": {"login": "ehildenb", "name": "Everett Hildenbrandt"}}, "url": "https://github.com/kframework/k/commit/2f547e96e2ebe43d2ee304f21fc27eb360c96dda", "committedDate": "2020-06-15T01:15:03Z", "message": "pyk/kastManip: more boolean simplifications"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9c799d3c176ca2e5ec3e6ee5ab0f0f2d7413a6ef", "author": {"user": {"login": "ehildenb", "name": "Everett Hildenbrandt"}}, "url": "https://github.com/kframework/k/commit/9c799d3c176ca2e5ec3e6ee5ab0f0f2d7413a6ef", "committedDate": "2020-06-15T01:15:18Z", "message": "pyk/kastManip: remove useless requires/ensures clauses"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "753be73e059b70d9beb0c28afa9915028299b4ba", "author": {"user": {"login": "ehildenb", "name": "Everett Hildenbrandt"}}, "url": "https://github.com/kframework/k/commit/753be73e059b70d9beb0c28afa9915028299b4ba", "committedDate": "2020-06-15T01:19:42Z", "message": "pyk/kastManip: integer simplification rules"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2e365dfbba5efb744eb12ad63b381ce63c261092", "author": {"user": {"login": "ehildenb", "name": "Everett Hildenbrandt"}}, "url": "https://github.com/kframework/k/commit/2e365dfbba5efb744eb12ad63b381ce63c261092", "committedDate": "2020-06-15T02:58:33Z", "message": "pyk/kastManip: formatting"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "993ce648c37c8197d11af0951e10eeebddffd67c", "author": {"user": {"login": "ehildenb", "name": "Everett Hildenbrandt"}}, "url": "https://github.com/kframework/k/commit/993ce648c37c8197d11af0951e10eeebddffd67c", "committedDate": "2020-06-15T02:59:05Z", "message": "pyk/kastManip: push rewrites down through ksequences"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7990884583dfe50b9723b02ccdf58f84ede8d657", "author": {"user": {"login": "ehildenb", "name": "Everett Hildenbrandt"}}, "url": "https://github.com/kframework/k/commit/7990884583dfe50b9723b02ccdf58f84ede8d657", "committedDate": "2020-06-15T05:51:24Z", "message": "pyk/kastManip: check for None before simplifying rules/predicates"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMxODEyNjkz", "url": "https://github.com/kframework/k/pull/1342#pullrequestreview-431812693", "createdAt": "2020-06-16T19:08:32Z", "commit": {"oid": "7990884583dfe50b9723b02ccdf58f84ede8d657"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQxOTowODozMlrOGkpbiw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQxOTowODozMlrOGkpbiw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA4MDcxNQ==", "bodyText": "Is this really true? I thought the # values were used for matching logic operators and terms, not for the regular boolean operators.", "url": "https://github.com/kframework/k/pull/1342#discussion_r441080715", "createdAt": "2020-06-16T19:08:32Z", "author": {"login": "hjorthjort"}, "path": "k-distribution/src/main/scripts/lib/pyk/kastManip.py", "diffHunk": "@@ -84,27 +84,41 @@ def rewriteAnywhereWith(rule, pattern):\n     return traverseBottomUp(pattern, lambda p: rewriteWith(rule, p))\n \n def mlPredToBool(k):\n-    klabelMap = { \"#And\"    : \"_andBool_\"\n-                , \"#Or\"     : \"_orBool_\"\n-                , \"#Not\"    : \"notBool_\"\n-                , \"#Equals\" : '_==K_'\n-                }\n-    return replaceKLabels(k, klabelMap)\n+    if k is None:\n+        return None\n+    mlPredToBoolRules = [ (KApply('#True', [])  , KToken('true', 'Bool'))\n+                        , (KApply('#False', []) , KToken('false', 'Bool'))\n+                        , (KApply('#And'    , [KVariable('#V1'), KVariable('#V2')]) , KApply('_andBool_' , [KVariable('#V1'), KVariable('#V2')]))\n+                        , (KApply('#Or'     , [KVariable('#V1'), KVariable('#V2')]) , KApply('_orBool_'  , [KVariable('#V1'), KVariable('#V2')]))\n+                        , (KApply('#Not'    , [KVariable('#V1')])                   , KApply('notBool_'  , [KVariable('#V1')]))\n+                        , (KApply('#Equals' , [KVariable('#V1'), KVariable('#V2')]) , KApply('_==K_'     , [KVariable('#V1'), KVariable('#V2')]))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7990884583dfe50b9723b02ccdf58f84ede8d657"}, "originalPosition": 17}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMxODQxMTI3", "url": "https://github.com/kframework/k/pull/1342#pullrequestreview-431841127", "createdAt": "2020-06-16T19:50:38Z", "commit": {"oid": "7990884583dfe50b9723b02ccdf58f84ede8d657"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2ab507f8702debd6d466f39c91c5dbcc78c4a182", "author": {"user": {"login": "ehildenb", "name": "Everett Hildenbrandt"}}, "url": "https://github.com/kframework/k/commit/2ab507f8702debd6d466f39c91c5dbcc78c4a182", "committedDate": "2020-06-16T20:15:25Z", "message": "pyk/kastManip: mlPredToBool => unsafeMlPredToBool"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1184ec0e66a92c646be57de920f87a70a529813f", "author": {"user": {"login": "rv-jenkins", "name": null}}, "url": "https://github.com/kframework/k/commit/1184ec0e66a92c646be57de920f87a70a529813f", "committedDate": "2020-06-16T21:22:23Z", "message": "Merge branch 'master' into pyk-updates"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2396, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}