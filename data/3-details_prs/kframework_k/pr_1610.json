{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA3MDI5NzAy", "number": 1610, "title": "Pyk updates for gas expression manipulation", "bodyText": "These updates are inspired by the MKR regression test suite, where we are rewriting things like gas expression optimization directly in the pyk library instead of the external javascript library.\n\nPrint out the variable's originalName when it's available in prettyPrintKast.\nSwitch a bunch of double-quotes to single-quotes for readability.\nAdd a few routines to kastManip, including whereMatchingTopDown, whereMatchingBottomUp, replaceWith, and replaceAnywhereWith.", "createdAt": "2020-10-20T19:00:09Z", "url": "https://github.com/kframework/k/pull/1610", "merged": true, "mergeCommit": {"oid": "1b088841cbb9bfe57e0fce8be1fca4838804e221"}, "closed": true, "closedAt": "2020-11-16T19:50:09Z", "author": {"login": "ehildenb"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdLwSybAH2gAyNTA3MDI5NzAyOjdmNDEzMDA1YTQ3MTQyYmJkYzBlYTEyODZmMTY4YzYzODk3MmQ1NGM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABddIleqgH2gAyNTA3MDI5NzAyOmRmOWRhYzY1ODg5Y2JiYzcyZDFhMDk1ZTJjYjhjODYxYjZhZjVlNGE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "7f413005a47142bbdc0ea1286f168c638972d54c", "author": {"user": {"login": "ehildenb", "name": "Everett Hildenbrandt"}}, "url": "https://github.com/kframework/k/commit/7f413005a47142bbdc0ea1286f168c638972d54c", "committedDate": "2020-09-23T17:46:22Z", "message": "pyk/kast: return originalName of variable when present for unparsing"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eef1bda458482e49eb09391177bf0f0b68d8617e", "author": {"user": {"login": "ehildenb", "name": "Everett Hildenbrandt"}}, "url": "https://github.com/kframework/k/commit/eef1bda458482e49eb09391177bf0f0b68d8617e", "committedDate": "2020-09-23T17:47:29Z", "message": "pyk/kast: double => single quotes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bac6784c7668718a7b149fd0b28ac0f14a6a7846", "author": {"user": {"login": "ehildenb", "name": "Everett Hildenbrandt"}}, "url": "https://github.com/kframework/k/commit/bac6784c7668718a7b149fd0b28ac0f14a6a7846", "committedDate": "2020-09-24T17:12:06Z", "message": "pyk/kastManip: add replaceWith, replaceAnywhereWith macro expanders"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6f6506ec88b242c5030ea6229cf6333460b6fe08", "author": {"user": {"login": "ehildenb", "name": "Everett Hildenbrandt"}}, "url": "https://github.com/kframework/k/commit/6f6506ec88b242c5030ea6229cf6333460b6fe08", "committedDate": "2020-09-28T13:48:15Z", "message": "Merge remote-tracking branch 'upstream/master' into pyk-updates"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "150237718b25bba61eaed8009cb1b91b1ddcf5db", "author": {"user": {"login": "ehildenb", "name": "Everett Hildenbrandt"}}, "url": "https://github.com/kframework/k/commit/150237718b25bba61eaed8009cb1b91b1ddcf5db", "committedDate": "2020-09-28T14:08:45Z", "message": "pyk/kastManip: add whereMatchingBottomUp/whereMatchingTopDown"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b7366ea7bede2eb22bc11ef916a17ee0538ddab5", "author": {"user": {"login": "ehildenb", "name": "Everett Hildenbrandt"}}, "url": "https://github.com/kframework/k/commit/b7366ea7bede2eb22bc11ef916a17ee0538ddab5", "committedDate": "2020-10-20T18:59:03Z", "message": "Merge remote-tracking branch 'upstream/master' into pyk-updates"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEzMDU0OTI3", "url": "https://github.com/kframework/k/pull/1610#pullrequestreview-513054927", "createdAt": "2020-10-20T19:15:30Z", "commit": {"oid": "b7366ea7bede2eb22bc11ef916a17ee0538ddab5"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMFQxOToxNTozMFrOHlNTtQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMFQxOToxNTozMFrOHlNTtQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODc3NzM5Nw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            def whereMattchingBottomUp(effect, matchPattern, pattern):\n          \n          \n            \n                def _effect(k):\n          \n          \n            \n                    matchingSubst = match(matchPattern, k)\n          \n          \n            \n                    newK = k\n          \n          \n            \n                    if matchingSubst is not None:\n          \n          \n            \n                        newK = effect(matchingSubst)\n          \n          \n            \n                    return newK\n          \n          \n            \n                return traverseBottomUp(_effect, pattern)\n          \n          \n            \n            \n          \n          \n            \n            def whereMattchingTopDown(effect, matchPattern, pattern):\n          \n          \n            \n            def whereMatchingBottomUp(effect, matchPattern, pattern):\n          \n          \n            \n                def _effect(k):\n          \n          \n            \n                    matchingSubst = match(matchPattern, k)\n          \n          \n            \n                    newK = k\n          \n          \n            \n                    if matchingSubst is not None:\n          \n          \n            \n                        newK = effect(matchingSubst)\n          \n          \n            \n                    return newK\n          \n          \n            \n                return traverseBottomUp(_effect, pattern)\n          \n          \n            \n            \n          \n          \n            \n            def whereMatchingTopDown(effect, matchPattern, pattern):", "url": "https://github.com/kframework/k/pull/1610#discussion_r508777397", "createdAt": "2020-10-20T19:15:30Z", "author": {"login": "gtrepta"}, "path": "k-distribution/src/main/scripts/lib/pyk/kastManip.py", "diffHunk": "@@ -66,6 +66,24 @@ def replace(k):\n         return k\n     return traverseBottomUp(pattern, replace)\n \n+def whereMattchingBottomUp(effect, matchPattern, pattern):\n+    def _effect(k):\n+        matchingSubst = match(matchPattern, k)\n+        newK = k\n+        if matchingSubst is not None:\n+            newK = effect(matchingSubst)\n+        return newK\n+    return traverseBottomUp(_effect, pattern)\n+\n+def whereMattchingTopDown(effect, matchPattern, pattern):", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b7366ea7bede2eb22bc11ef916a17ee0538ddab5"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0f43aab8cff0ccf4efb209dc3341021b49361de6", "author": {"user": {"login": "ehildenb", "name": "Everett Hildenbrandt"}}, "url": "https://github.com/kframework/k/commit/0f43aab8cff0ccf4efb209dc3341021b49361de6", "committedDate": "2020-10-20T19:18:52Z", "message": "Update k-distribution/src/main/scripts/lib/pyk/kastManip.py\n\nCo-authored-by: gtrepta <50716988+gtrepta@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0eebd4f331b418e25f7225720a8a14eaf4939e99", "author": {"user": {"login": "ehildenb", "name": "Everett Hildenbrandt"}}, "url": "https://github.com/kframework/k/commit/0eebd4f331b418e25f7225720a8a14eaf4939e99", "committedDate": "2020-10-22T22:58:02Z", "message": "Merge branch 'master' into pyk-updates"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "10eddddb8273ce76772a68ea302081a9ad92c16e", "author": {"user": {"login": "ehildenb", "name": "Everett Hildenbrandt"}}, "url": "https://github.com/kframework/k/commit/10eddddb8273ce76772a68ea302081a9ad92c16e", "committedDate": "2020-11-16T16:13:38Z", "message": "Merge branch 'master' into pyk-updates"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "df9dac65889cbbc72d1a095e2cb8c861b6af5e4a", "author": {"user": {"login": "ehildenb", "name": "Everett Hildenbrandt"}}, "url": "https://github.com/kframework/k/commit/df9dac65889cbbc72d1a095e2cb8c861b6af5e4a", "committedDate": "2020-11-16T17:41:13Z", "message": "pyk/kast: correct quotations for requires clause"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2233, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}