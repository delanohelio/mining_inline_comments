{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY3MTY2NTI1", "number": 11943, "title": "Remove use-bucket-space-metric feature flag", "bodyText": "The flag controlled config read by the Cluster Controller. Therefore, I have\nleft the ModelContextImpl.Properties method and implementation (now always\nreturning true), but the model has stopped using that method internally, and\nthe config is no longer used in the CC.\nThe field in the fleetcontroller.def is left unchanged and documented as\ndeprecated.", "createdAt": "2020-01-25T23:50:51Z", "url": "https://github.com/vespa-engine/vespa/pull/11943", "merged": true, "mergeCommit": {"oid": "33c94080e9f5e1672bfbd8ceb66cd550f2e91815"}, "closed": true, "closedAt": "2020-04-20T09:04:00Z", "author": {"login": "hakonhall"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb98Z2fgH2gAyMzY3MTY2NTI1OjdiOTljNjI1ZjM5ZDMzNDYzOGIxM2Y1YTA4M2M2ODBlNGVlMzAxOGI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcZa7WmgH2gAyMzY3MTY2NTI1OmIxMDVlZWFkMWZiYmNlZmJiODViYzk2Mjc0OWYyYTEyZmE2NjBiYmU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "7b99c625f39d334638b13f5a083c680e4ee3018b", "author": {"user": {"login": "hakonhall", "name": "H\u00e5kon Hallingstad"}}, "url": "https://github.com/vespa-engine/vespa/commit/7b99c625f39d334638b13f5a083c680e4ee3018b", "committedDate": "2020-01-25T23:46:51Z", "message": "Remove use-bucket-space-metric feature flag\n\nThe flag controlled config read by the Cluster Controller. Therefore, I have\nleft the ModelContextImpl.Properties method and implementation (now always\nreturning true), but the model has stopped using that method internally, and\nthe config is no longer used in the CC.\n\nThe field in the fleetcontroller.def is left unchanged and documented as\ndeprecated."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4MzYwNjA4", "url": "https://github.com/vespa-engine/vespa/pull/11943#pullrequestreview-348360608", "createdAt": "2020-01-26T06:19:11Z", "commit": {"oid": "7b99c625f39d334638b13f5a083c680e4ee3018b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNlQwNjoxOToxMVrOFhymUQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNlQwNjoxOToxMVrOFhymUQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDk3NjMzNw==", "bodyText": "Remove comment for the removed argument as well", "url": "https://github.com/vespa-engine/vespa/pull/11943#discussion_r370976337", "createdAt": "2020-01-26T06:19:11Z", "author": {"login": "hmusum"}, "path": "clustercontroller-core/src/test/java/com/yahoo/vespa/clustercontroller/core/restapiv2/StateRestApiTest.java", "diffHunk": "@@ -42,8 +42,8 @@ protected void setUp(boolean dontInitializeNode2) throws Exception {\n         {\n             Set<ConfiguredNode> nodes = FleetControllerTest.toNodes(0, 1, 2, 3);\n             ContentCluster cluster = new ContentCluster(\n-                    \"books\", nodes, distribution, 6 /* minStorageNodesUp*/, 0.9 /* minRatioOfStorageNodesUp */,\n-                    true /* determineBucketsFromBucketSpaceMetric */);\n+                    \"books\", nodes, distribution, 6 /* minStorageNodesUp*/, 0.9 /* minRatioOfStorageNodesUp */\n+                    /* determineBucketsFromBucketSpaceMetric */);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b99c625f39d334638b13f5a083c680e4ee3018b"}, "originalPosition": 7}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4MzYwNjA5", "url": "https://github.com/vespa-engine/vespa/pull/11943#pullrequestreview-348360609", "createdAt": "2020-01-26T06:19:16Z", "commit": {"oid": "7b99c625f39d334638b13f5a083c680e4ee3018b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNlQwNjoxOToxN1rOFhymUg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNlQwNjoxOToxN1rOFhymUg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDk3NjMzOA==", "bodyText": "Remove comment for the removed argument as well", "url": "https://github.com/vespa-engine/vespa/pull/11943#discussion_r370976338", "createdAt": "2020-01-26T06:19:17Z", "author": {"login": "hmusum"}, "path": "clustercontroller-core/src/test/java/com/yahoo/vespa/clustercontroller/core/restapiv2/StateRestApiTest.java", "diffHunk": "@@ -57,8 +57,8 @@ protected void setUp(boolean dontInitializeNode2) throws Exception {\n             Set<ConfiguredNode> nodesInSlobrok = FleetControllerTest.toNodes(1, 3, 5, 7);\n \n             ContentCluster cluster = new ContentCluster(\n-                    \"music\", nodes, distribution, 4 /* minStorageNodesUp*/, 0.0 /* minRatioOfStorageNodesUp */,\n-                    true /* determineBucketsFromBucketSpaceMetric */);\n+                    \"music\", nodes, distribution, 4 /* minStorageNodesUp*/, 0.0 /* minRatioOfStorageNodesUp */\n+                    /* determineBucketsFromBucketSpaceMetric */);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b99c625f39d334638b13f5a083c680e4ee3018b"}, "originalPosition": 18}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4MzYwNjM3", "url": "https://github.com/vespa-engine/vespa/pull/11943#pullrequestreview-348360637", "createdAt": "2020-01-26T06:20:38Z", "commit": {"oid": "7b99c625f39d334638b13f5a083c680e4ee3018b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNlQwNjoyMDozOVrOFhymcg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNlQwNjoyMDozOVrOFhymcg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDk3NjM3MA==", "bodyText": "Consider making a default implementation of the method in the interface, then you could remove this now", "url": "https://github.com/vespa-engine/vespa/pull/11943#discussion_r370976370", "createdAt": "2020-01-26T06:20:39Z", "author": {"login": "hmusum"}, "path": "configserver/src/main/java/com/yahoo/vespa/config/server/deploy/ModelContextImpl.java", "diffHunk": "@@ -217,8 +214,9 @@ public String athenzDnsSuffix() {\n         @Override\n         public double defaultTermwiseLimit() { return defaultTermwiseLimit; }\n \n+        // TODO: Remove\n         @Override\n-        public boolean useBucketSpaceMetric() { return useBucketSpaceMetric; }\n+        public boolean useBucketSpaceMetric() { return true; }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b99c625f39d334638b13f5a083c680e4ee3018b"}, "originalPosition": 24}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4MzYwNjQw", "url": "https://github.com/vespa-engine/vespa/pull/11943#pullrequestreview-348360640", "createdAt": "2020-01-26T06:20:44Z", "commit": {"oid": "7b99c625f39d334638b13f5a083c680e4ee3018b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f61f6c701dc91e839b865f158a6da56ff166def7", "author": {"user": {"login": "hakonhall", "name": "H\u00e5kon Hallingstad"}}, "url": "https://github.com/vespa-engine/vespa/commit/f61f6c701dc91e839b865f158a6da56ff166def7", "committedDate": "2020-01-27T11:35:54Z", "message": "Remove stray parameter doc"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4NjAxMDIw", "url": "https://github.com/vespa-engine/vespa/pull/11943#pullrequestreview-348601020", "createdAt": "2020-01-27T11:39:00Z", "commit": {"oid": "f61f6c701dc91e839b865f158a6da56ff166def7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b105eead1fbbcefbb85bc962749f2a12fa660bbe", "author": {"user": {"login": "hakonhall", "name": "H\u00e5kon Hallingstad"}}, "url": "https://github.com/vespa-engine/vespa/commit/b105eead1fbbcefbb85bc962749f2a12fa660bbe", "committedDate": "2020-04-20T08:36:33Z", "message": "Merge branch 'master' into hakonhall/remove-use-bucket-space-metric-feature-flag"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3879, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}