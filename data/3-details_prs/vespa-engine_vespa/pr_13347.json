{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIxOTA1NTY1", "number": 13347, "title": "Factor out portions of field match computer to field match computer shared state.", "bodyText": "@havardpe : please review", "createdAt": "2020-05-22T12:59:49Z", "url": "https://github.com/vespa-engine/vespa/pull/13347", "merged": true, "mergeCommit": {"oid": "9fbf28d399520f05180904cde08ece6a27736046"}, "closed": true, "closedAt": "2020-05-25T09:25:35Z", "author": {"login": "toregge"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcjxzbOgH2gAyNDIxOTA1NTY1OmE3YWRmODZkY2Q0M2Q5NDllZDk5YjJhODg4MWUwNzM5YTRjOGFlMDg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABckqzMQgFqTQxNzUwNDg3Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "a7adf86dcd43d949ed99b2a8881e0739a4c8ae08", "author": {"user": null}, "url": "https://github.com/vespa-engine/vespa/commit/a7adf86dcd43d949ed99b2a8881e0739a4c8ae08", "committedDate": "2020-05-22T12:54:57Z", "message": "Factor out portions of field match computer to field match computer shared state."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3NTA0NTc3", "url": "https://github.com/vespa-engine/vespa/pull/13347#pullrequestreview-417504577", "createdAt": "2020-05-25T07:18:43Z", "commit": {"oid": "a7adf86dcd43d949ed99b2a8881e0739a4c8ae08"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQwNzoxODo0M1rOGZ3E6A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQwNzoxODo0M1rOGZ3E6A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTc2OTk2MA==", "bodyText": "Any reason why you copy the fields in the shared state, and not use it where they are ?", "url": "https://github.com/vespa-engine/vespa/pull/13347#discussion_r429769960", "createdAt": "2020-05-25T07:18:43Z", "author": {"login": "baldersheim"}, "path": "searchlib/src/vespa/searchlib/features/fieldmatch/computer.cpp", "diffHunk": "@@ -15,55 +17,24 @@ using namespace search::fef;\n \n namespace search::features::fieldmatch {\n \n-Computer::Computer(const vespalib::string &propertyNamespace, const PhraseSplitter &splitter,\n-                   const FieldInfo &fieldInfo, const Params &params) :\n-    _splitter(splitter),\n-    _fieldId(fieldInfo.id()),\n-    _params(params),\n-    _useCachedHits(true),\n-    _queryTerms(),\n-    _queryTermFieldMatch(),\n-    _totalTermWeight(0),\n-    _totalTermSignificance(0.0f),\n-    _fieldLength(FieldPositionsIterator::UNKNOWN_LENGTH),\n-    _currentMetrics(this),\n-    _finalMetrics(this),\n-    _simpleMetrics(params),\n-    _segments(),\n-    _alternativeSegmentationsTried(0),\n-    _cachedHits()\n+Computer::Computer(const ComputerSharedState& shared_state, const PhraseSplitter& splitter)\n+    : _shared_state(shared_state),\n+      _splitter(splitter),\n+      _fieldId(_shared_state.get_field_id()),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a7adf86dcd43d949ed99b2a8881e0739a4c8ae08"}, "originalPosition": 35}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3NTA0ODc2", "url": "https://github.com/vespa-engine/vespa/pull/13347#pullrequestreview-417504876", "createdAt": "2020-05-25T07:19:17Z", "commit": {"oid": "a7adf86dcd43d949ed99b2a8881e0739a4c8ae08"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3169, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}