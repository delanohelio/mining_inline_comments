{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI3NDI4MjQz", "number": 15466, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxMzoxOToyMFrOE9OalA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxMzoxOToyMFrOE9OalA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMyNjM0NzcyOnYy", "diffSide": "RIGHT", "path": "storageapi/src/vespa/storageapi/messageapi/storagemessage.cpp", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxMzoxOToyMFrOH5zFVw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxMzo1NDoxMFrOH50bug==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDM2NzgzMQ==", "bodyText": "To avoid having to contemplate any struct alignment issues and how they may affect the resulting value, could be simplified down to\nuint16_t buf[] = { type, index };\nreturn vespalib::hashValue(&buf, sizeof(buf));", "url": "https://github.com/vespa-engine/vespa/pull/15466#discussion_r530367831", "createdAt": "2020-11-25T13:19:20Z", "author": {"login": "vekterli"}, "path": "storageapi/src/vespa/storageapi/messageapi/storagemessage.cpp", "diffHunk": "@@ -160,39 +151,50 @@ createAddress(vespalib::stringref cluster, const lib::NodeType& type, uint16_t i\n     return os.str();\n }\n \n+size_t\n+calculate_node_hash(const lib::NodeType& type, uint16_t index)\n+{\n+    struct NodeValue {\n+        uint16_t type;\n+        uint16_t index;\n+        NodeValue(const lib::NodeType& type_in, uint16_t index_in) : type(type_in), index(index_in) {}\n+    };\n+    NodeValue value(type, index);\n+    return vespalib::hashValue(&value, sizeof(NodeValue));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c090dda709692c07ca492b698af9db3e1a76d8e1"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDM4OTk0Ng==", "bodyText": "Nice, will fix.", "url": "https://github.com/vespa-engine/vespa/pull/15466#discussion_r530389946", "createdAt": "2020-11-25T13:54:10Z", "author": {"login": "geirst"}, "path": "storageapi/src/vespa/storageapi/messageapi/storagemessage.cpp", "diffHunk": "@@ -160,39 +151,50 @@ createAddress(vespalib::stringref cluster, const lib::NodeType& type, uint16_t i\n     return os.str();\n }\n \n+size_t\n+calculate_node_hash(const lib::NodeType& type, uint16_t index)\n+{\n+    struct NodeValue {\n+        uint16_t type;\n+        uint16_t index;\n+        NodeValue(const lib::NodeType& type_in, uint16_t index_in) : type(type_in), index(index_in) {}\n+    };\n+    NodeValue value(type, index);\n+    return vespalib::hashValue(&value, sizeof(NodeValue));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDM2NzgzMQ=="}, "originalCommit": {"oid": "c090dda709692c07ca492b698af9db3e1a76d8e1"}, "originalPosition": 29}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 808, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}