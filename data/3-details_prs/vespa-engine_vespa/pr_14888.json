{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAzODc1ODEx", "number": 14888, "title": "Arnej/backwards compatible tensor partial update", "bodyText": "I confirm that this contribution is made under the terms of the license found in the root directory of this repository's source tree and that I have the authority necessary to make this contribution on behalf of its copyright owner.\n@havardpe please review", "createdAt": "2020-10-15T06:56:19Z", "url": "https://github.com/vespa-engine/vespa/pull/14888", "merged": true, "mergeCommit": {"oid": "732f45bda01cce0bfe5a7ebea3235c975c94fcbe"}, "closed": true, "closedAt": "2020-10-15T11:09:23Z", "author": {"login": "arnej27959"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdSrpMVgH2gAyNTAzODc1ODExOjJmOTk0Y2YwZDc2MTI1MmE0Njk5YmQ1MWE0MmEzYWQ3NzM1NGY0MDI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdSutIYAH2gAyNTAzODc1ODExOjYzZjdhMWVmZTQ3ZWE0ODE5YjNkMDc3MWU0MTg4NTUyMTNkOWM5M2E=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2f994cf0d761252a4699bd51a42a3ad77354f402", "author": {"user": {"login": "arnej27959", "name": "Arne H Juul"}}, "url": "https://github.com/vespa-engine/vespa/commit/2f994cf0d761252a4699bd51a42a3ad77354f402", "committedDate": "2020-10-15T06:18:47Z", "message": "compatibility adapters for add/modify/remove"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e67bc2b8191de560fedcc3948a0703507664a07c", "author": {"user": {"login": "arnej27959", "name": "Arne H Juul"}}, "url": "https://github.com/vespa-engine/vespa/commit/e67bc2b8191de560fedcc3948a0703507664a07c", "committedDate": "2020-10-15T06:55:17Z", "message": "test via compatibility layer"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA5MTk3MzE3", "url": "https://github.com/vespa-engine/vespa/pull/14888#pullrequestreview-509197317", "createdAt": "2020-10-15T09:39:01Z", "commit": {"oid": "e67bc2b8191de560fedcc3948a0703507664a07c"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQwOTozOTowMVrOHh_VKg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQwOTozOTowMVrOHh_VKg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTQwMjY2Ng==", "bodyText": "prefer tensor::Tensor to be more explicit", "url": "https://github.com/vespa-engine/vespa/pull/14888#discussion_r505402666", "createdAt": "2020-10-15T09:39:01Z", "author": {"login": "havardpe"}, "path": "eval/src/vespa/eval/tensor/partial_update.cpp", "diffHunk": "@@ -356,4 +359,62 @@ TensorPartialUpdate::remove(const Value &input, const Value &remove_spec, const\n             input, remove_spec, factory);\n }\n \n+Value::UP\n+TensorPartialUpdate::modify(const Value &input, join_fun_t function,\n+                            const Value &modifier, EngineOrFactory engine)\n+{\n+    if (engine.is_engine()) {\n+        auto inp_ptr = dynamic_cast<const Tensor *>(&input);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e67bc2b8191de560fedcc3948a0703507664a07c"}, "originalPosition": 19}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "63f7a1efe47ea4819b3d0771e418855213d9c93a", "author": {"user": {"login": "arnej27959", "name": "Arne H Juul"}}, "url": "https://github.com/vespa-engine/vespa/commit/63f7a1efe47ea4819b3d0771e418855213d9c93a", "committedDate": "2020-10-15T09:52:48Z", "message": "use tensor::Tensor"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2409, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}