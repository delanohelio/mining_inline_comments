{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAwNjkyMjYy", "number": 12872, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxMTozOTozNlrODv9BZg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxMTozOTo0OFrODv9ByQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUxNjA5NDQ2OnYy", "diffSide": "RIGHT", "path": "searchlib/src/tests/tensor/hnsw_index/hnsw_index_test.cpp", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxMTozOTozNlrOGCrPrA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxMTozOTozNlrOGCrPrA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTQ1ODg2MA==", "bodyText": "Consider checking number of nodes with 1 outgoing link at level 0 as well (root[\"level_0_links_histogram\"][1])", "url": "https://github.com/vespa-engine/vespa/pull/12872#discussion_r405458860", "createdAt": "2020-04-08T11:39:36Z", "author": {"login": "geirst"}, "path": "searchlib/src/tests/tensor/hnsw_index/hnsw_index_test.cpp", "diffHunk": "@@ -293,6 +297,19 @@ TEST_F(HnswIndexTest, 2d_vectors_inserted_in_hierarchic_graph_with_heuristic_sel\n     expect_level_0(5, {2, 6});\n     expect_levels(6, {{2, 5, 7}, {3}, {}});\n     expect_level_0(7, {3, 6});\n+    {\n+        Slime actualSlime;\n+        SlimeInserter inserter(actualSlime);\n+        index->get_state(inserter);\n+        const auto &root = actualSlime.get();\n+        EXPECT_EQ(0, root[\"memory_usage\"][\"onHold\"].asLong());\n+        EXPECT_EQ(8, root[\"nodes\"].asLong());\n+        EXPECT_EQ(7, root[\"valid_nodes\"].asLong());\n+        EXPECT_EQ(0, root[\"level_histogram\"][0].asLong());\n+        EXPECT_EQ(5, root[\"level_histogram\"][1].asLong());\n+        EXPECT_EQ(0, root[\"level_0_links_histogram\"][0].asLong());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "91e0020981c6ebfedf7db7f9975f780001d05cce"}, "originalPosition": 32}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUxNjA5NTQ1OnYy", "diffSide": "RIGHT", "path": "searchlib/src/tests/tensor/hnsw_index/hnsw_index_test.cpp", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxMTozOTo0OFrOGCrQOA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxMTozOTo0OFrOGCrQOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTQ1OTAwMA==", "bodyText": "Consider checking number of nodes with 1 outgoing link at level 0 as well (root[\"level_0_links_histogram\"][1])", "url": "https://github.com/vespa-engine/vespa/pull/12872#discussion_r405459000", "createdAt": "2020-04-08T11:39:48Z", "author": {"login": "geirst"}, "path": "searchlib/src/tests/tensor/hnsw_index/hnsw_index_test.cpp", "diffHunk": "@@ -305,6 +322,19 @@ TEST_F(HnswIndexTest, 2d_vectors_inserted_in_hierarchic_graph_with_heuristic_sel\n     expect_level_0(5, {2, 6});\n     expect_levels(6, {{2, 5, 7}, {3}, {}});\n     expect_level_0(7, {3, 6});\n+    {\n+        Slime actualSlime;\n+        SlimeInserter inserter(actualSlime);\n+        index->get_state(inserter);\n+        const auto &root = actualSlime.get();\n+        EXPECT_EQ(0, root[\"memory_usage\"][\"onHold\"].asLong());\n+        EXPECT_EQ(8, root[\"nodes\"].asLong());\n+        EXPECT_EQ(6, root[\"valid_nodes\"].asLong());\n+        EXPECT_EQ(0, root[\"level_histogram\"][0].asLong());\n+        EXPECT_EQ(4, root[\"level_histogram\"][1].asLong());\n+        EXPECT_EQ(0, root[\"level_0_links_histogram\"][0].asLong());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "91e0020981c6ebfedf7db7f9975f780001d05cce"}, "originalPosition": 52}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1760, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}