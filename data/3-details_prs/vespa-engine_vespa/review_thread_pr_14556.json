{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkyOTgzNjg2", "number": 14556, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNVQxMDozNzowMlrOEnZwiw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNVQxMDozNzowMlrOEnZwiw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA5NzUxOTQ3OnYy", "diffSide": "RIGHT", "path": "configserver/src/main/java/com/yahoo/vespa/config/server/ApplicationRepository.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNVQxMDozNzowMlrOHX-WjQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNVQxMDozNzowMlrOHX-WjQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDkwMDg3Nw==", "bodyText": "Without ZONE_ID here since the flag will be set on the configserver for internal deployments. For external deployments the flag still must be set on the controller. That could be changed, but would need to re-create PrepareParams.\nI think we can remove internalRestart parameter and this flag in a week or so anyway and just always do internal restarts if the provisioner is set?", "url": "https://github.com/vespa-engine/vespa/pull/14556#discussion_r494900877", "createdAt": "2020-09-25T10:37:02Z", "author": {"login": "freva"}, "path": "configserver/src/main/java/com/yahoo/vespa/config/server/ApplicationRepository.java", "diffHunk": "@@ -395,9 +382,10 @@ public PrepareResult deploy(File applicationPackage, PrepareParams prepareParams\n         SessionRepository sessionRepository = tenant.getSessionRepository();\n         LocalSession newSession = sessionRepository.createSessionFromExisting(activeSession, logger, true, timeoutBudget);\n         sessionRepository.addLocalSession(newSession);\n+        boolean internalRestart = deployWithInternalRestart.with(FetchVector.Dimension.APPLICATION_ID, application.serializedForm()).value();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "27c498346fcf15c999f5c93ddf8e9e36e055a2b8"}, "originalPosition": 113}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1325, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}