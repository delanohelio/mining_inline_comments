{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI5MTg2NTg4", "number": 15524, "title": "Balder/added throughput mode", "bodyText": "@havardpe PR\n@geirst @vekterli @toregge FYI", "createdAt": "2020-11-29T21:52:47Z", "url": "https://github.com/vespa-engine/vespa/pull/15524", "merged": true, "mergeCommit": {"oid": "a3289b0060bd7a0e5eb2b6d638c05c9d76e3a8d4"}, "closed": true, "closedAt": "2020-11-30T13:15:41Z", "author": {"login": "baldersheim"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdhXrAyAH2gAyNTI5MTg2NTg4OjM0ZDY0ODc1YzM4ZDJhODA0OWE3MGYwYmRmOWQ3ZmNjM2NlMTZlZjg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdhlFr3AH2gAyNTI5MTg2NTg4OmE0NzFhYjcyYTQ2OGNjYzUxMzkwZDIzMjI3NWRmNmVmNWZkZjhmMWI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "34d64875c38d2a8049a70f0bdf9d7fcc3ce16ef8", "author": {"user": {"login": "baldersheim", "name": "Henning Baldersheim"}}, "url": "https://github.com/vespa-engine/vespa/commit/34d64875c38d2a8049a70f0bdf9d7fcc3ce16ef8", "committedDate": "2020-11-29T21:31:32Z", "message": "Use std::make_unique and hide actual ThreadExecutor implementation."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "12275ab8fb1f83935ba2a4ab2f7a72bd262cbcf3", "author": {"user": {"login": "baldersheim", "name": "Henning Baldersheim"}}, "url": "https://github.com/vespa-engine/vespa/commit/12275ab8fb1f83935ba2a4ab2f7a72bd262cbcf3", "committedDate": "2020-11-29T21:32:15Z", "message": "Allow to optimize for throughput over latency. Wakeup is extremely expensive."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8d4eb868704b3374c937f354f30533b174edb4fe", "author": {"user": {"login": "baldersheim", "name": "Henning Baldersheim"}}, "url": "https://github.com/vespa-engine/vespa/commit/8d4eb868704b3374c937f354f30533b174edb4fe", "committedDate": "2020-11-29T21:48:12Z", "message": "In ADAPTIVE mode a wakeup will be done with 100 packets ready for write."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQwNzMyODA1", "url": "https://github.com/vespa-engine/vespa/pull/15524#pullrequestreview-540732805", "createdAt": "2020-11-30T09:33:22Z", "commit": {"oid": "8d4eb868704b3374c937f354f30533b174edb4fe"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "32065b5a38dcad1a7c30d89509ee9be02ad5373d", "author": {"user": {"login": "baldersheim", "name": "Henning Baldersheim"}}, "url": "https://github.com/vespa-engine/vespa/commit/32065b5a38dcad1a7c30d89509ee9be02ad5373d", "committedDate": "2020-11-30T11:21:19Z", "message": "Simplify and use a single events_before_wakup number in the transport thread for controlling wakeup frequency."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7481d52c6ce19da5efa9435a5e57a5b25beb232a", "author": {"user": {"login": "baldersheim", "name": "Henning Baldersheim"}}, "url": "https://github.com/vespa-engine/vespa/commit/7481d52c6ce19da5efa9435a5e57a5b25beb232a", "committedDate": "2020-11-30T11:52:10Z", "message": "We must keep the handling in the selector still."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQwODQ2OTI4", "url": "https://github.com/vespa-engine/vespa/pull/15524#pullrequestreview-540846928", "createdAt": "2020-11-30T12:06:35Z", "commit": {"oid": "7481d52c6ce19da5efa9435a5e57a5b25beb232a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0zMFQxMjowNjozNVrOH74N4Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0zMFQxMjowNjozNVrOH74N4Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjU0OTA4OQ==", "bodyText": "consider protecting against 0", "url": "https://github.com/vespa-engine/vespa/pull/15524#discussion_r532549089", "createdAt": "2020-11-30T12:06:35Z", "author": {"login": "havardpe"}, "path": "fnet/src/vespa/fnet/transport.h", "diffHunk": "@@ -53,6 +53,11 @@ class FNET_Transport\n         : FNET_Transport(vespalib::AsyncResolver::get_shared(), vespalib::CryptoEngine::get_default(), 1) {}\n     ~FNET_Transport();\n \n+    size_t events_before_wakeup() const { return _events_before_wakeup; }\n+    void events_before_wakeup(size_t events_before_wakeup_in) {\n+        _events_before_wakeup = events_before_wakeup_in;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7481d52c6ce19da5efa9435a5e57a5b25beb232a"}, "originalPosition": 25}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a471ab72a468ccc51390d232275df6ef5fdf8f1b", "author": {"user": {"login": "baldersheim", "name": "Henning Baldersheim"}}, "url": "https://github.com/vespa-engine/vespa/commit/a471ab72a468ccc51390d232275df6ef5fdf8f1b", "committedDate": "2020-11-30T13:09:26Z", "message": "Rename handle_wakeup -> handle_wakeup_events and leave an empty handle_wakeup to satisfy selector callback api."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1793, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}