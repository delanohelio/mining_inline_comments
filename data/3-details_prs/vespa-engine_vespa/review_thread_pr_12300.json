{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc4MTcwMTg4", "number": 12300, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMVQwODo1ODo1NlrODhzpAg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMVQwODo1OToxNVrODhzpdQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM2Nzc1NjgyOnYy", "diffSide": "RIGHT", "path": "controller-server/src/main/java/com/yahoo/vespa/hosted/controller/ApplicationController.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMVQwODo1ODo1NlrOFsvyYg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMVQwOToyMDowNlrOFswYRg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjQ2NDYxMA==", "bodyText": "Add a TODO for removing this.", "url": "https://github.com/vespa-engine/vespa/pull/12300#discussion_r382464610", "createdAt": "2020-02-21T08:58:56Z", "author": {"login": "mpolden"}, "path": "controller-server/src/main/java/com/yahoo/vespa/hosted/controller/ApplicationController.java", "diffHunk": "@@ -130,13 +130,18 @@\n             int count = 0;\n             for (TenantAndApplicationId id: curator.readApplicationIds()) {\n                 lockApplicationIfPresent(id, application -> {\n-                    if (id.tenant().value().startsWith(\"by-\"))\n-                        application = application.with(DeploymentSpec.empty);\n-                    else\n+                    if (id.tenant().value().startsWith(\"by-\")) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cca6019344fcbc03fd84007059f73c2ea7c6cbce"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjQ3NDMxMA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                if (id.tenant().value().startsWith(\"by-\")) {\n          \n          \n            \n                                if (id.tenant().value().startsWith(\"by-\")) { // TODO jonmv: Remove after run once.", "url": "https://github.com/vespa-engine/vespa/pull/12300#discussion_r382474310", "createdAt": "2020-02-21T09:20:06Z", "author": {"login": "jonmv"}, "path": "controller-server/src/main/java/com/yahoo/vespa/hosted/controller/ApplicationController.java", "diffHunk": "@@ -130,13 +130,18 @@\n             int count = 0;\n             for (TenantAndApplicationId id: curator.readApplicationIds()) {\n                 lockApplicationIfPresent(id, application -> {\n-                    if (id.tenant().value().startsWith(\"by-\"))\n-                        application = application.with(DeploymentSpec.empty);\n-                    else\n+                    if (id.tenant().value().startsWith(\"by-\")) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjQ2NDYxMA=="}, "originalCommit": {"oid": "cca6019344fcbc03fd84007059f73c2ea7c6cbce"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM2Nzc1Nzk3OnYy", "diffSide": "RIGHT", "path": "controller-server/src/main/java/com/yahoo/vespa/hosted/controller/TenantController.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMVQwODo1OToxNVrOFsvzAQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMVQwOToyMDoyMFrOFswYyQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjQ2NDc2OQ==", "bodyText": "Add a TODO for removing this.", "url": "https://github.com/vespa-engine/vespa/pull/12300#discussion_r382464769", "createdAt": "2020-02-21T08:59:15Z", "author": {"login": "mpolden"}, "path": "controller-server/src/main/java/com/yahoo/vespa/hosted/controller/TenantController.java", "diffHunk": "@@ -47,8 +46,12 @@ public TenantController(Controller controller, CuratorDb curator, AccessControl\n             Instant start = controller.clock().instant();\n             int count = 0;\n             for (TenantName name : curator.readTenantNames()) {\n-                lockIfPresent(name, LockedTenant.class, this::store);\n-                count++;\n+                if (name.value().startsWith(Tenant.userPrefix))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cca6019344fcbc03fd84007059f73c2ea7c6cbce"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjQ3NDQ0MQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            if (name.value().startsWith(Tenant.userPrefix))\n          \n          \n            \n                            if (name.value().startsWith(Tenant.userPrefix)) // TODO jonmv: Remove after run once.", "url": "https://github.com/vespa-engine/vespa/pull/12300#discussion_r382474441", "createdAt": "2020-02-21T09:20:20Z", "author": {"login": "jonmv"}, "path": "controller-server/src/main/java/com/yahoo/vespa/hosted/controller/TenantController.java", "diffHunk": "@@ -47,8 +46,12 @@ public TenantController(Controller controller, CuratorDb curator, AccessControl\n             Instant start = controller.clock().instant();\n             int count = 0;\n             for (TenantName name : curator.readTenantNames()) {\n-                lockIfPresent(name, LockedTenant.class, this::store);\n-                count++;\n+                if (name.value().startsWith(Tenant.userPrefix))", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjQ2NDc2OQ=="}, "originalCommit": {"oid": "cca6019344fcbc03fd84007059f73c2ea7c6cbce"}, "originalPosition": 14}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2443, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}