{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA5ODY3MDQ5", "number": 15030, "title": "Fix corner case for system/staging test jobs", "bodyText": "@mpolden please review and merge.\nThis fixes a corner case where we compute versions to run in system and staging tests, where the first production deployment used to compute the versions has a newer platform that what we are deploying \u2014\u00a0this confused the algorithm into believing it needed both a run which was a success both on the deploying change, AND on the newer version, which is obviously impossible. When a newer version exists in the production deployment, this is now used instead of, not in addition to, the deploying change.", "createdAt": "2020-10-26T08:33:45Z", "url": "https://github.com/vespa-engine/vespa/pull/15030", "merged": true, "mergeCommit": {"oid": "e1f0948bc98caba830c85138c4cff335e96fc3fc"}, "closed": true, "closedAt": "2020-10-26T09:43:25Z", "author": {"login": "jonmv"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdWQKVIAH2gAyNTA5ODY3MDQ5Ojc2MDc4ZTExNmM3ZTlhMTkzMmI3YjMwOTMzNzNiZTJmZWQwMDk4ZTc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdWQnz2AFqTUxNjU3ODUxOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "76078e116c7e9a1932b7b3093373be2fed0098e7", "author": {"user": {"login": "jonmv", "name": "Jon Marius Venstad"}}, "url": "https://github.com/vespa-engine/vespa/commit/76078e116c7e9a1932b7b3093373be2fed0098e7", "committedDate": "2020-10-26T08:33:20Z", "message": "Fix corner case for system/staging test jobs\n\nThis fixes a corner case where we compute versions to run in system and staging tests, where the first production deployment used to compute the versions has a newer platform that what we are deploying \u2014\u00a0this confused the algorithm into believing it needed both a run which was a success both on the deploying change, AND on the newer version, which is obviously impossible. When a newer version exists in the production deployment, this is now used instead of, not in addition to, the deploying change."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE2NTU3MTIz", "url": "https://github.com/vespa-engine/vespa/pull/15030#pullrequestreview-516557123", "createdAt": "2020-10-26T08:35:57Z", "commit": {"oid": "76078e116c7e9a1932b7b3093373be2fed0098e7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQwODozNTo1N1rOHoFOmg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQwODozNTo1N1rOHoFOmg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTc5MDc0Ng==", "bodyText": "I think there's a better name to be found.", "url": "https://github.com/vespa-engine/vespa/pull/15030#discussion_r511790746", "createdAt": "2020-10-26T08:35:57Z", "author": {"login": "mpolden"}, "path": "controller-server/src/test/java/com/yahoo/vespa/hosted/controller/deployment/DeploymentTriggerTest.java", "diffHunk": "@@ -1216,4 +1217,42 @@ public void testEagerTests() {\n         app.assertNotRunning(stagingTest);\n     }\n \n+    @Test\n+    public void test() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "76078e116c7e9a1932b7b3093373be2fed0098e7"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "41ba2d8a54a7997270e0eb2c20b841a36e9d80d7", "author": {"user": {"login": "jonmv", "name": "Jon Marius Venstad"}}, "url": "https://github.com/vespa-engine/vespa/commit/41ba2d8a54a7997270e0eb2c20b841a36e9d80d7", "committedDate": "2020-10-26T09:04:11Z", "message": "Rename test method"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE2NTc4NTE5", "url": "https://github.com/vespa-engine/vespa/pull/15030#pullrequestreview-516578519", "createdAt": "2020-10-26T09:05:32Z", "commit": {"oid": "41ba2d8a54a7997270e0eb2c20b841a36e9d80d7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2164, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}