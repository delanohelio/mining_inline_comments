{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkxNzYzMDI0", "number": 14509, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yM1QxMzo0NjozOFrOEmnAlQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yM1QxNDowNjoyOFrOEmnntg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA4OTIwNDY5OnYy", "diffSide": "RIGHT", "path": "node-repository/src/main/java/com/yahoo/vespa/hosted/provision/maintenance/NodeRepositoryMaintenance.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yM1QxMzo0NjozOFrOHWvSbw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yM1QxMzo1ODo0OVrOHWv56A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzYwNTQ4Nw==", "bodyText": "PeriodicApplicationMaintainer runs every minute (redeployMaintainerInterval), this is the minTimeBetweenRedeployments, so I don't think we should change this.", "url": "https://github.com/vespa-engine/vespa/pull/14509#discussion_r493605487", "createdAt": "2020-09-23T13:46:38Z", "author": {"login": "freva"}, "path": "node-repository/src/main/java/com/yahoo/vespa/hosted/provision/maintenance/NodeRepositoryMaintenance.java", "diffHunk": "@@ -178,14 +180,14 @@ public void deconstruct() {\n             nodeMetricsCollectionInterval = Duration.ofMinutes(1);\n             operatorChangeRedeployInterval = Duration.ofMinutes(1);\n             osUpgradeActivatorInterval = zone.system().isCd() ? Duration.ofSeconds(30) : Duration.ofMinutes(5);\n-            periodicRedeployInterval = Duration.ofMinutes(30);\n+            periodicRedeployInterval = deploymentExistsOnAllConfigServers ? Duration.ofMinutes(90) : Duration.ofMinutes(30);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "efc62ebb67af59aa6410e9604961722d7f04958e"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzYxNTU5Mg==", "bodyText": "Ouch, yes, thanks", "url": "https://github.com/vespa-engine/vespa/pull/14509#discussion_r493615592", "createdAt": "2020-09-23T13:58:49Z", "author": {"login": "hmusum"}, "path": "node-repository/src/main/java/com/yahoo/vespa/hosted/provision/maintenance/NodeRepositoryMaintenance.java", "diffHunk": "@@ -178,14 +180,14 @@ public void deconstruct() {\n             nodeMetricsCollectionInterval = Duration.ofMinutes(1);\n             operatorChangeRedeployInterval = Duration.ofMinutes(1);\n             osUpgradeActivatorInterval = zone.system().isCd() ? Duration.ofSeconds(30) : Duration.ofMinutes(5);\n-            periodicRedeployInterval = Duration.ofMinutes(30);\n+            periodicRedeployInterval = deploymentExistsOnAllConfigServers ? Duration.ofMinutes(90) : Duration.ofMinutes(30);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzYwNTQ4Nw=="}, "originalCommit": {"oid": "efc62ebb67af59aa6410e9604961722d7f04958e"}, "originalPosition": 33}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA4OTMwNDg2OnYy", "diffSide": "RIGHT", "path": "node-repository/src/main/java/com/yahoo/vespa/hosted/provision/maintenance/NodeRepositoryMaintenance.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yM1QxNDowNjoyOFrOHWwRKw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yM1QxNDoxNToxNlrOHWwsSg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzYyMTU0Nw==", "bodyText": "This can also be reduced back now, it does not deploy (assume it was increased because of periodic interval change?)", "url": "https://github.com/vespa-engine/vespa/pull/14509#discussion_r493621547", "createdAt": "2020-09-23T14:06:28Z", "author": {"login": "freva"}, "path": "node-repository/src/main/java/com/yahoo/vespa/hosted/provision/maintenance/NodeRepositoryMaintenance.java", "diffHunk": "@@ -180,12 +181,12 @@ public void deconstruct() {\n             osUpgradeActivatorInterval = zone.system().isCd() ? Duration.ofSeconds(30) : Duration.ofMinutes(5);\n             periodicRedeployInterval = Duration.ofMinutes(30);\n             provisionedExpiry = Duration.ofHours(4);\n-            rebalancerInterval = Duration.ofMinutes(40);\n+            rebalancerInterval = deploymentExistsOnAllConfigServers ? Duration.ofMinutes(120) : Duration.ofMinutes(40);\n             redeployMaintainerInterval = Duration.ofMinutes(1);\n             // Need to be long enough for deployment to be finished for all config model versions\n             // Should be equal to timeout for deployments\n             reservationExpiry = zone.system().isCd() ? Duration.ofMinutes(5) : Duration.ofMinutes(30);\n-            scalingSuggestionsInterval = Duration.ofMinutes(31);\n+            scalingSuggestionsInterval = deploymentExistsOnAllConfigServers ? Duration.ofMinutes(91) : Duration.ofMinutes(31);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ae9af2ba9c3c476ef1e228a0bc36928c013ae3f3"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzYyODQ5MA==", "bodyText": "Yes, thanks, fixed", "url": "https://github.com/vespa-engine/vespa/pull/14509#discussion_r493628490", "createdAt": "2020-09-23T14:15:16Z", "author": {"login": "hmusum"}, "path": "node-repository/src/main/java/com/yahoo/vespa/hosted/provision/maintenance/NodeRepositoryMaintenance.java", "diffHunk": "@@ -180,12 +181,12 @@ public void deconstruct() {\n             osUpgradeActivatorInterval = zone.system().isCd() ? Duration.ofSeconds(30) : Duration.ofMinutes(5);\n             periodicRedeployInterval = Duration.ofMinutes(30);\n             provisionedExpiry = Duration.ofHours(4);\n-            rebalancerInterval = Duration.ofMinutes(40);\n+            rebalancerInterval = deploymentExistsOnAllConfigServers ? Duration.ofMinutes(120) : Duration.ofMinutes(40);\n             redeployMaintainerInterval = Duration.ofMinutes(1);\n             // Need to be long enough for deployment to be finished for all config model versions\n             // Should be equal to timeout for deployments\n             reservationExpiry = zone.system().isCd() ? Duration.ofMinutes(5) : Duration.ofMinutes(30);\n-            scalingSuggestionsInterval = Duration.ofMinutes(31);\n+            scalingSuggestionsInterval = deploymentExistsOnAllConfigServers ? Duration.ofMinutes(91) : Duration.ofMinutes(31);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzYyMTU0Nw=="}, "originalCommit": {"oid": "ae9af2ba9c3c476ef1e228a0bc36928c013ae3f3"}, "originalPosition": 37}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1296, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}