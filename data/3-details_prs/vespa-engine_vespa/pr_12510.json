{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg1NTU4MDg0", "number": 12510, "title": "Jonmv/longer convergence timeout and better debug info", "bodyText": "@mpolden", "createdAt": "2020-03-09T12:36:05Z", "url": "https://github.com/vespa-engine/vespa/pull/12510", "merged": true, "mergeCommit": {"oid": "4755492fd6e911363f3ae2e36a070e0a167b23a9"}, "closed": true, "closedAt": "2020-03-09T13:37:22Z", "author": {"login": "jonmv"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcL9JIfAH2gAyMzg1NTU4MDg0Ojk5OWFlMzFhNzgyYWFjODUyOWI3YWJmYWZlMTE5NzU2Njc2ZjhlODU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcL-Dg0AFqTM3MTE4ODAwMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "999ae31a782aac8529b7abfafe119756676f8e85", "author": {"user": {"login": "jonmv", "name": "Jon Marius Venstad"}}, "url": "https://github.com/vespa-engine/vespa/commit/999ae31a782aac8529b7abfafe119756676f8e85", "committedDate": "2020-03-09T12:33:26Z", "message": "Allow no progress for 2 hours while redistributing docs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "11691ee8a0894a012a043599541f34a13bf7165d", "author": {"user": {"login": "jonmv", "name": "Jon Marius Venstad"}}, "url": "https://github.com/vespa-engine/vespa/commit/11691ee8a0894a012a043599541f34a13bf7165d", "committedDate": "2020-03-09T12:35:49Z", "message": "Highlight nodes with pending changes when job fails"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcxMTg4MDAx", "url": "https://github.com/vespa-engine/vespa/pull/12510#pullrequestreview-371188001", "createdAt": "2020-03-09T13:37:05Z", "commit": {"oid": "11691ee8a0894a012a043599541f34a13bf7165d"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOVQxMzozNzowNlrOFznwxQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOVQxMzozNzowNlrOFznwxQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTY3MzE1Nw==", "bodyText": "\ud83d\ude06", "url": "https://github.com/vespa-engine/vespa/pull/12510#discussion_r389673157", "createdAt": "2020-03-09T13:37:06Z", "author": {"login": "mpolden"}, "path": "controller-server/src/main/java/com/yahoo/vespa/hosted/controller/deployment/InternalStepRunner.java", "diffHunk": "@@ -380,9 +381,20 @@ else if (timedOut(id, deployment.get(), endpointTimeout)) {\n         }\n \n         if (failureReason != null) {\n+            logger.log(\"######## Details for all nodes ########\");\n             logger.log(nodeList.asList().stream()\n                                .flatMap(node -> nodeDetails(node, true))\n                                .collect(toList()));\n+            logger.log(\"######## Details for nodes with pending changes ########\");\n+            logger.log(nodeList.not().in(nodeList.not().needsNewConfig()\n+                                                 .not().needsPlatformUpgrade()\n+                                                 .not().needsReboot()\n+                                                 .not().needsRestart()\n+                                                 .not().needsFirmwareUpgrade()\n+                                                 .not().needsOsUpgrade())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "11691ee8a0894a012a043599541f34a13bf7165d"}, "originalPosition": 22}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2784, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}