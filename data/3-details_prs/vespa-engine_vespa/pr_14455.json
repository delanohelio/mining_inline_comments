{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg5MzcyMjY1", "number": 14455, "title": "30s down-moratorium before allowing suspension", "bodyText": "If all services of a node are down, we used allow suspension.  If those services are monitored with /state/v1/health, we have the timestamp the service became unhealthy - the \"since\" timestamp.  Now we will require the services to have been down for at least 30s before allowing suspension based on unhealthiness.\nAlso, for config servers only, we will log all healthiness transitions to track down some orchestrator issues.", "createdAt": "2020-09-18T15:00:11Z", "url": "https://github.com/vespa-engine/vespa/pull/14455", "merged": true, "mergeCommit": {"oid": "3a6bcde2ddcb322db6308e2817d1f3bdceded454"}, "closed": true, "closedAt": "2020-09-18T21:41:06Z", "author": {"login": "hakonhall"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdKG6tVAH2gAyNDg5MzcyMjY1OjhlZjI5MzkyZjQ4N2VjOTE3YzU5NzYzNWEyN2I4MmY5YTdkODgzNDI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdKLVf9gFqTQ5MTc1MDc5Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "8ef29392f487ec917c597635a27b82f9a7d88342", "author": {"user": {"login": "hakonhall", "name": "H\u00e5kon Hallingstad"}}, "url": "https://github.com/vespa-engine/vespa/commit/8ef29392f487ec917c597635a27b82f9a7d88342", "committedDate": "2020-09-18T15:00:02Z", "message": "30s down-moratorium before allowing suspension"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d300efc1d61d6405efe12d296c9ad09333b9d9c7", "author": {"user": {"login": "hakonhall", "name": "H\u00e5kon Hallingstad"}}, "url": "https://github.com/vespa-engine/vespa/commit/d300efc1d61d6405efe12d296c9ad09333b9d9c7", "committedDate": "2020-09-18T15:12:52Z", "message": "Log when config server changes health"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkxNjgwMjQw", "url": "https://github.com/vespa-engine/vespa/pull/14455#pullrequestreview-491680240", "createdAt": "2020-09-18T18:09:06Z", "commit": {"oid": "d300efc1d61d6405efe12d296c9ad09333b9d9c7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xOFQxODowOTowNlrOHUXFzQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xOFQxODowOTowNlrOHUXFzQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTExMTg4NQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public static final ClusterId CONTROLLER_HOST = new ClusterId(\"configserver-host\");\n          \n          \n            \n                public static final ClusterId CONTROLLER_HOST = new ClusterId(\"controller-host\");", "url": "https://github.com/vespa-engine/vespa/pull/14455#discussion_r491111885", "createdAt": "2020-09-18T18:09:06Z", "author": {"login": "hmusum"}, "path": "application-model/src/main/java/com/yahoo/vespa/applicationmodel/ClusterId.java", "diffHunk": "@@ -12,6 +12,9 @@\n \n     public static final ClusterId CONFIG_SERVER = new ClusterId(\"zone-config-servers\");\n     public static final ClusterId CONTROLLER = new ClusterId(\"controller\");\n+    public static final ClusterId CONFIG_SERVER_HOST = new ClusterId(\"configserver-host\");\n+    public static final ClusterId CONTROLLER_HOST = new ClusterId(\"configserver-host\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d300efc1d61d6405efe12d296c9ad09333b9d9c7"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkxNjg2Mzcw", "url": "https://github.com/vespa-engine/vespa/pull/14455#pullrequestreview-491686370", "createdAt": "2020-09-18T18:18:47Z", "commit": {"oid": "d300efc1d61d6405efe12d296c9ad09333b9d9c7"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2416431bcd3079d032dcc4cdc189f943df5f5950", "author": {"user": {"login": "hakonhall", "name": "H\u00e5kon Hallingstad"}}, "url": "https://github.com/vespa-engine/vespa/commit/2416431bcd3079d032dcc4cdc189f943df5f5950", "committedDate": "2020-09-18T19:58:48Z", "message": "Update application-model/src/main/java/com/yahoo/vespa/applicationmodel/ClusterId.java\n\nCo-authored-by: Harald Musum <musum@verizonmedia.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkxNzUwNzkz", "url": "https://github.com/vespa-engine/vespa/pull/14455#pullrequestreview-491750793", "createdAt": "2020-09-18T20:08:55Z", "commit": {"oid": "2416431bcd3079d032dcc4cdc189f943df5f5950"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4271, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}