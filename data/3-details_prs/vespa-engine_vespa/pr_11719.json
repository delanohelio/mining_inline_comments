{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYwOTM2ODEx", "number": 11719, "title": "Accept, store and display optional sourceUrl and commit", "bodyText": "@mpolden please review.", "createdAt": "2020-01-09T12:33:00Z", "url": "https://github.com/vespa-engine/vespa/pull/11719", "merged": true, "mergeCommit": {"oid": "b051cc64b6ec62f24c562f1c85f615d1516589a4"}, "closed": true, "closedAt": "2020-01-09T13:23:46Z", "author": {"login": "jonmv"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb4pKtzAH2gAyMzYwOTM2ODExOjdkYWRmNjhkZTg3YjZjYmFiZmZkMjQ4ZjMwNmRmNTIxZTkwYzEyNWI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb4pytXgFqTM0MDQ5OTgxNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "7dadf68de87b6cbabffd248f306df521e90c125b", "author": {"user": {"login": "jonmv", "name": "Jon Marius Venstad"}}, "url": "https://github.com/vespa-engine/vespa/commit/7dadf68de87b6cbabffd248f306df521e90c125b", "committedDate": "2020-01-09T12:32:30Z", "message": "Accept, store and display optional sourceUrl and commit"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0353b17e52678ca85979e6fe2308afbef5ac8263", "author": {"user": {"login": "jonmv", "name": "Jon Marius Venstad"}}, "url": "https://github.com/vespa-engine/vespa/commit/0353b17e52678ca85979e6fe2308afbef5ac8263", "committedDate": "2020-01-09T12:41:27Z", "message": "Set commit and sourceUrl fields when present, in submit mojo"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQwNDk5ODE1", "url": "https://github.com/vespa-engine/vespa/pull/11719#pullrequestreview-340499815", "createdAt": "2020-01-09T12:56:31Z", "commit": {"oid": "7dadf68de87b6cbabffd248f306df521e90c125b"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOVQxMjo1NjozMVrOFb086Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOVQxMjo1NjozMVrOFb086Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDcyMzQzMw==", "bodyText": "Name? Isn't this the commit hash?", "url": "https://github.com/vespa-engine/vespa/pull/11719#discussion_r364723433", "createdAt": "2020-01-09T12:56:31Z", "author": {"login": "mpolden"}, "path": "controller-api/src/main/java/com/yahoo/vespa/hosted/controller/api/integration/deployment/ApplicationVersion.java", "diffHunk": "@@ -104,6 +123,21 @@ public String id() {\n     /** Returns the time this package was built, if known. */\n     public Optional<Instant> buildTime() { return buildTime; }\n \n+    /** Returns the source URL for this application version. */\n+    public Optional<String> sourceUrl() {\n+        return sourceUrl.or(() -> source.map(source -> {\n+            String repository = source.repository();\n+            if (repository.startsWith(\"git@\"))\n+                repository = \"https://\" + repository.substring(4).replace(':', '/');\n+            if (repository.endsWith(\".git\"))\n+                repository = repository.substring(0, repository.length() - 4);\n+            return repository + \"/tree/\" + source.commit();\n+        }));\n+    }\n+\n+    /** Returns the commit name of this application version. */", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7dadf68de87b6cbabffd248f306df521e90c125b"}, "originalPosition": 95}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4095, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}