{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIxOTA1NTY1", "number": 13347, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQwNzoxODo0M1rOD_SPQg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQwNzoxODo0M1rOD_SPQg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY3Njg1Njk4OnYy", "diffSide": "RIGHT", "path": "searchlib/src/vespa/searchlib/features/fieldmatch/computer.cpp", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQwNzoxODo0M1rOGZ3E6A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQwOToyNDowNFrOGZ61dw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTc2OTk2MA==", "bodyText": "Any reason why you copy the fields in the shared state, and not use it where they are ?", "url": "https://github.com/vespa-engine/vespa/pull/13347#discussion_r429769960", "createdAt": "2020-05-25T07:18:43Z", "author": {"login": "baldersheim"}, "path": "searchlib/src/vespa/searchlib/features/fieldmatch/computer.cpp", "diffHunk": "@@ -15,55 +17,24 @@ using namespace search::fef;\n \n namespace search::features::fieldmatch {\n \n-Computer::Computer(const vespalib::string &propertyNamespace, const PhraseSplitter &splitter,\n-                   const FieldInfo &fieldInfo, const Params &params) :\n-    _splitter(splitter),\n-    _fieldId(fieldInfo.id()),\n-    _params(params),\n-    _useCachedHits(true),\n-    _queryTerms(),\n-    _queryTermFieldMatch(),\n-    _totalTermWeight(0),\n-    _totalTermSignificance(0.0f),\n-    _fieldLength(FieldPositionsIterator::UNKNOWN_LENGTH),\n-    _currentMetrics(this),\n-    _finalMetrics(this),\n-    _simpleMetrics(params),\n-    _segments(),\n-    _alternativeSegmentationsTried(0),\n-    _cachedHits()\n+Computer::Computer(const ComputerSharedState& shared_state, const PhraseSplitter& splitter)\n+    : _shared_state(shared_state),\n+      _splitter(splitter),\n+      _fieldId(_shared_state.get_field_id()),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a7adf86dcd43d949ed99b2a8881e0739a4c8ae08"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTgzMTU0Mw==", "bodyText": "To keep the data localized while also minimizing the size of the PR diff.", "url": "https://github.com/vespa-engine/vespa/pull/13347#discussion_r429831543", "createdAt": "2020-05-25T09:24:04Z", "author": {"login": "toregge"}, "path": "searchlib/src/vespa/searchlib/features/fieldmatch/computer.cpp", "diffHunk": "@@ -15,55 +17,24 @@ using namespace search::fef;\n \n namespace search::features::fieldmatch {\n \n-Computer::Computer(const vespalib::string &propertyNamespace, const PhraseSplitter &splitter,\n-                   const FieldInfo &fieldInfo, const Params &params) :\n-    _splitter(splitter),\n-    _fieldId(fieldInfo.id()),\n-    _params(params),\n-    _useCachedHits(true),\n-    _queryTerms(),\n-    _queryTermFieldMatch(),\n-    _totalTermWeight(0),\n-    _totalTermSignificance(0.0f),\n-    _fieldLength(FieldPositionsIterator::UNKNOWN_LENGTH),\n-    _currentMetrics(this),\n-    _finalMetrics(this),\n-    _simpleMetrics(params),\n-    _segments(),\n-    _alternativeSegmentationsTried(0),\n-    _cachedHits()\n+Computer::Computer(const ComputerSharedState& shared_state, const PhraseSplitter& splitter)\n+    : _shared_state(shared_state),\n+      _splitter(splitter),\n+      _fieldId(_shared_state.get_field_id()),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTc2OTk2MA=="}, "originalCommit": {"oid": "a7adf86dcd43d949ed99b2a8881e0739a4c8ae08"}, "originalPosition": 35}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1600, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}