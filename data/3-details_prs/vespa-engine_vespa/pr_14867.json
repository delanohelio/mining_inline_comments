{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAzNDE0MTg3", "number": 14867, "title": "vespalib::Monitor -> std:.mutex/std::condition_variable", "bodyText": "@havardpe PR\nA small one", "createdAt": "2020-10-14T14:24:05Z", "url": "https://github.com/vespa-engine/vespa/pull/14867", "merged": true, "mergeCommit": {"oid": "61d7e5169e55f2f78f6aed956813f3caa362bc21"}, "closed": true, "closedAt": "2020-10-14T14:39:15Z", "author": {"login": "baldersheim"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdSd8VMgH2gAyNTAzNDE0MTg3OmMxMjdmYjg0ODgzNjg3ZmMxODRjMGVhZmViMmViYjhlOTA3M2NjN2E=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdSeLGggH2gAyNTAzNDE0MTg3OmVlMDg0NjEyOWYxMjc1ZDgwODQ4OTFjMTIzYzllYTljZDdjYzFjMDE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c127fb84883687fc184c0eafeb2ebb8e9073cc7a", "author": {"user": {"login": "baldersheim", "name": "Henning Baldersheim"}}, "url": "https://github.com/vespa-engine/vespa/commit/c127fb84883687fc184c0eafeb2ebb8e9073cc7a", "committedDate": "2020-10-14T14:21:01Z", "message": "vespalib::Monitor -> std:.mutex/std::condition_variable"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cbaed757c8163d4853ba91d7a91bd17be32ca23e", "author": {"user": {"login": "baldersheim", "name": "Henning Baldersheim"}}, "url": "https://github.com/vespa-engine/vespa/commit/cbaed757c8163d4853ba91d7a91bd17be32ca23e", "committedDate": "2020-10-14T14:30:11Z", "message": "GC unused include"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA4NDA5Nzkz", "url": "https://github.com/vespa-engine/vespa/pull/14867#pullrequestreview-508409793", "createdAt": "2020-10-14T14:30:02Z", "commit": {"oid": "c127fb84883687fc184c0eafeb2ebb8e9073cc7a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxNDozMDowMlrOHhV-lA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxNDozMDowMlrOHhV-lA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDcyNTE0MA==", "bodyText": "prefer signal while holding lock unless very special conditions", "url": "https://github.com/vespa-engine/vespa/pull/14867#discussion_r504725140", "createdAt": "2020-10-14T14:30:02Z", "author": {"login": "havardpe"}, "path": "vbench/src/vbench/core/handler_thread.hpp", "diffHunk": "@@ -58,10 +59,10 @@ void\n HandlerThread<T>::join()\n {\n     {\n-        vespalib::MonitorGuard guard(_monitor);\n+        std::lock_guard guard(_lock);\n         _done = true;\n-        guard.signal();\n     }\n+    _cond.notify_one();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c127fb84883687fc184c0eafeb2ebb8e9073cc7a"}, "originalPosition": 44}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ee0846129f1275d8084891c123c9ea9cd7cc1c01", "author": {"user": {"login": "baldersheim", "name": "Henning Baldersheim"}}, "url": "https://github.com/vespa-engine/vespa/commit/ee0846129f1275d8084891c123c9ea9cd7cc1c01", "committedDate": "2020-10-14T14:37:09Z", "message": "Hold lock when signaling"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2391, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}