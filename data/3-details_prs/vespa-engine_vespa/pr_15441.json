{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI2NDMyNDY2", "number": 15441, "title": "Report metric for non-active nodes", "bodyText": "@bratseth", "createdAt": "2020-11-24T12:06:57Z", "url": "https://github.com/vespa-engine/vespa/pull/15441", "merged": true, "mergeCommit": {"oid": "8a444ed0cef284b7a93f795d8f451accfbb2577f"}, "closed": true, "closedAt": "2020-11-25T11:29:47Z", "author": {"login": "mpolden"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdfos7lAFqTUzNzQzMTk0Mw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdfp1YTABqjQwMzI4MzYxMDE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM3NDMxOTQz", "url": "https://github.com/vespa-engine/vespa/pull/15441#pullrequestreview-537431943", "createdAt": "2020-11-24T12:14:09Z", "commit": {"oid": "493c2df9ffe6bd846dade947104ad200d2e42961"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQxMjoxNDowOVrOH4-HGA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQxMjoxNDowOVrOH4-HGA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTQ5OTkyOA==", "bodyText": "byCluster?", "url": "https://github.com/vespa-engine/vespa/pull/15441#discussion_r529499928", "createdAt": "2020-11-24T12:14:09Z", "author": {"login": "bratseth"}, "path": "node-repository/src/main/java/com/yahoo/vespa/hosted/provision/maintenance/MetricsReporter.java", "diffHunk": "@@ -70,9 +72,38 @@ public boolean maintain() {\n         updateLockMetrics();\n         updateDockerMetrics(nodes);\n         updateTenantUsageMetrics(nodes);\n+        updateAllocationMetrics(nodes);\n         return true;\n     }\n \n+    private void updateAllocationMetrics(NodeList nodes) {\n+        Map<ClusterKey, List<Node>> byApplication = nodes.stream()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "493c2df9ffe6bd846dade947104ad200d2e42961"}, "originalPosition": 39}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM3NDQxMzI4", "url": "https://github.com/vespa-engine/vespa/pull/15441#pullrequestreview-537441328", "createdAt": "2020-11-24T12:27:00Z", "commit": {"oid": "493c2df9ffe6bd846dade947104ad200d2e42961"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "493c2df9ffe6bd846dade947104ad200d2e42961", "author": {"user": {"login": "mpolden", "name": "Martin Polden"}}, "url": "https://github.com/vespa-engine/vespa/commit/493c2df9ffe6bd846dade947104ad200d2e42961", "committedDate": "2020-11-24T12:05:36Z", "message": "Report metric for non-active nodes"}, "afterCommit": {"oid": "fade2716cb016e07d9d8d273d7f8af7aaed00b36", "author": {"user": {"login": "mpolden", "name": "Martin Polden"}}, "url": "https://github.com/vespa-engine/vespa/commit/fade2716cb016e07d9d8d273d7f8af7aaed00b36", "committedDate": "2020-11-24T12:41:44Z", "message": "Report metric for non-active nodes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d7013eef05cd91a49640d479c100652d4a792b93", "author": {"user": {"login": "mpolden", "name": "Martin Polden"}}, "url": "https://github.com/vespa-engine/vespa/commit/d7013eef05cd91a49640d479c100652d4a792b93", "committedDate": "2020-11-24T13:33:00Z", "message": "Report metric for non-active nodes"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fade2716cb016e07d9d8d273d7f8af7aaed00b36", "author": {"user": {"login": "mpolden", "name": "Martin Polden"}}, "url": "https://github.com/vespa-engine/vespa/commit/fade2716cb016e07d9d8d273d7f8af7aaed00b36", "committedDate": "2020-11-24T12:41:44Z", "message": "Report metric for non-active nodes"}, "afterCommit": {"oid": "d7013eef05cd91a49640d479c100652d4a792b93", "author": {"user": {"login": "mpolden", "name": "Martin Polden"}}, "url": "https://github.com/vespa-engine/vespa/commit/d7013eef05cd91a49640d479c100652d4a792b93", "committedDate": "2020-11-24T13:33:00Z", "message": "Report metric for non-active nodes"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1859, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}