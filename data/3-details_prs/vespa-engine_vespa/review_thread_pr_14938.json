{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA1NzE4MDY4", "number": 14938, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxMToyNToyN1rOEvRHTg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxMToyNToyN1rOEvRHTg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE3OTk4OTI2OnYy", "diffSide": "RIGHT", "path": "configserver/src/main/java/com/yahoo/vespa/config/server/session/SessionRepository.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxMToyNToyN1rOHkJvxA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxMTozMzo0N1rOHkKBCw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzY3MDQ2OA==", "bodyText": "Perhaps rename this method as well, to be in line with others? deleteSessionFromFileSystem?", "url": "https://github.com/vespa-engine/vespa/pull/14938#discussion_r507670468", "createdAt": "2020-10-19T11:25:27Z", "author": {"login": "jonmv"}, "path": "configserver/src/main/java/com/yahoo/vespa/config/server/session/SessionRepository.java", "diffHunk": "@@ -320,28 +276,21 @@ void activate(RemoteSession session) {\n         log.log(Level.INFO, session.logPre() + \"Session activated: \" + sessionId);\n     }\n \n-    public void delete(Session remoteSession) {\n-        long sessionId = remoteSession.getSessionId();\n-        // TODO: Change log level to FINE when debugging is finished\n-        log.log(Level.INFO, () -> remoteSession.logPre() + \"Deactivating and deleting remote session \" + sessionId);\n-        deleteRemoteSessionFromZooKeeper(remoteSession);\n-        remoteSessionCache.remove(sessionId);\n-        LocalSession localSession = getLocalSession(sessionId);\n-        if (localSession != null) {\n-            // TODO: Change log level to FINE when debugging is finished\n-            log.log(Level.INFO, () -> localSession.logPre() + \"Deleting local session \" + sessionId);\n-            deleteLocalSession(localSession);\n-        }\n+    public void delete(Session session) {\n+        long sessionId = session.getSessionId();\n+        deleteSessionFromZooKeeper(session);\n+        sessionCache.remove(sessionId);\n+        deleteLocalSession(session);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "575c4df90a8391eaea5f797d679ff9979f4b4496"}, "originalPosition": 237}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzY3NDg5MQ==", "bodyText": "Yeah, there is more renaming, collapsing and simplification that can be done. Will follow up in a later PR", "url": "https://github.com/vespa-engine/vespa/pull/14938#discussion_r507674891", "createdAt": "2020-10-19T11:33:47Z", "author": {"login": "hmusum"}, "path": "configserver/src/main/java/com/yahoo/vespa/config/server/session/SessionRepository.java", "diffHunk": "@@ -320,28 +276,21 @@ void activate(RemoteSession session) {\n         log.log(Level.INFO, session.logPre() + \"Session activated: \" + sessionId);\n     }\n \n-    public void delete(Session remoteSession) {\n-        long sessionId = remoteSession.getSessionId();\n-        // TODO: Change log level to FINE when debugging is finished\n-        log.log(Level.INFO, () -> remoteSession.logPre() + \"Deactivating and deleting remote session \" + sessionId);\n-        deleteRemoteSessionFromZooKeeper(remoteSession);\n-        remoteSessionCache.remove(sessionId);\n-        LocalSession localSession = getLocalSession(sessionId);\n-        if (localSession != null) {\n-            // TODO: Change log level to FINE when debugging is finished\n-            log.log(Level.INFO, () -> localSession.logPre() + \"Deleting local session \" + sessionId);\n-            deleteLocalSession(localSession);\n-        }\n+    public void delete(Session session) {\n+        long sessionId = session.getSessionId();\n+        deleteSessionFromZooKeeper(session);\n+        sessionCache.remove(sessionId);\n+        deleteLocalSession(session);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzY3MDQ2OA=="}, "originalCommit": {"oid": "575c4df90a8391eaea5f797d679ff9979f4b4496"}, "originalPosition": 237}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1082, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}