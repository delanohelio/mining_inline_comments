{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA5MTc2NjQy", "number": 13075, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QwODozNjo1NlrOD2jyJg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QwODozODozMFrOD2j02g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU4NTM1OTc0OnYy", "diffSide": "RIGHT", "path": "storage/src/vespa/storage/persistence/persistencethread.cpp", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QwODozNjo1NlrOGMXdyw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QwODo1MjowMlrOGMYHTA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTYyMDU1NQ==", "bodyText": "Super nitpick: missing leading space", "url": "https://github.com/vespa-engine/vespa/pull/13075#discussion_r415620555", "createdAt": "2020-04-27T08:36:56Z", "author": {"login": "vekterli"}, "path": "storage/src/vespa/storage/persistence/persistencethread.cpp", "diffHunk": "@@ -934,7 +933,10 @@ PersistenceThread::flushAllReplies(\n         }\n #endif\n         spi::Bucket b(bucket, spi::PartitionId(_env._partition));\n-        spi::Result result = _spi.flush(b, _context);\n+        // Flush is not used for anything currentlu, and the context is not correct either when batching is done\n+        //So just faking it here.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4663fd3fab5ee4d7a00c7549a96628d44f27ca6d"}, "originalPosition": 368}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTYzMTE4MA==", "bodyText": "Fixed", "url": "https://github.com/vespa-engine/vespa/pull/13075#discussion_r415631180", "createdAt": "2020-04-27T08:52:02Z", "author": {"login": "baldersheim"}, "path": "storage/src/vespa/storage/persistence/persistencethread.cpp", "diffHunk": "@@ -934,7 +933,10 @@ PersistenceThread::flushAllReplies(\n         }\n #endif\n         spi::Bucket b(bucket, spi::PartitionId(_env._partition));\n-        spi::Result result = _spi.flush(b, _context);\n+        // Flush is not used for anything currentlu, and the context is not correct either when batching is done\n+        //So just faking it here.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTYyMDU1NQ=="}, "originalCommit": {"oid": "4663fd3fab5ee4d7a00c7549a96628d44f27ca6d"}, "originalPosition": 368}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU4NTM2NjY2OnYy", "diffSide": "RIGHT", "path": "storage/src/vespa/storage/persistence/persistencethread.cpp", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QwODozODozMFrOGMXh2w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QwODo1MjozN1rOGMYIpw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTYyMTU5NQ==", "bodyText": "Consider removing now outdated comment for this line regarding old _context", "url": "https://github.com/vespa-engine/vespa/pull/13075#discussion_r415621595", "createdAt": "2020-04-27T08:38:30Z", "author": {"login": "vekterli"}, "path": "storage/src/vespa/storage/persistence/persistencethread.cpp", "diffHunk": "@@ -186,9 +185,9 @@ PersistenceThread::handleGet(api::GetCommand& cmd)\n     document::FieldSetRepo repo;\n     document::FieldSet::UP fieldSet = repo.parse(*_env._component.getTypeRepo(), cmd.getFieldSet());\n     // _context is reset per command, so it's safe to modify it like this.\n-    _context.setReadConsistency(api_read_consistency_to_spi(cmd.internal_read_consistency()));\n+    context.setReadConsistency(api_read_consistency_to_spi(cmd.internal_read_consistency()));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4663fd3fab5ee4d7a00c7549a96628d44f27ca6d"}, "originalPosition": 100}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTYzMTUyNw==", "bodyText": "Fixed", "url": "https://github.com/vespa-engine/vespa/pull/13075#discussion_r415631527", "createdAt": "2020-04-27T08:52:37Z", "author": {"login": "baldersheim"}, "path": "storage/src/vespa/storage/persistence/persistencethread.cpp", "diffHunk": "@@ -186,9 +185,9 @@ PersistenceThread::handleGet(api::GetCommand& cmd)\n     document::FieldSetRepo repo;\n     document::FieldSet::UP fieldSet = repo.parse(*_env._component.getTypeRepo(), cmd.getFieldSet());\n     // _context is reset per command, so it's safe to modify it like this.\n-    _context.setReadConsistency(api_read_consistency_to_spi(cmd.internal_read_consistency()));\n+    context.setReadConsistency(api_read_consistency_to_spi(cmd.internal_read_consistency()));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTYyMTU5NQ=="}, "originalCommit": {"oid": "4663fd3fab5ee4d7a00c7549a96628d44f27ca6d"}, "originalPosition": 100}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1667, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}