{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI5NTUyNTI5", "number": 15539, "title": "Bratseth/filter unstable later", "bodyText": "", "createdAt": "2020-11-30T13:32:06Z", "url": "https://github.com/vespa-engine/vespa/pull/15539", "merged": true, "mergeCommit": {"oid": "fa4302626526d3dcba9aa93825392ee24e2bf7e4"}, "closed": true, "closedAt": "2020-11-30T15:12:44Z", "author": {"login": "bratseth"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdhi2PMgH2gAyNTI5NTUyNTI5OjY5NjY3ZTc1OTgxZWY0M2I5MDQ4MzU0Y2NiODkyOTViNjc2YWYyNjU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdhmAyFgH2gAyNTI5NTUyNTI5OjdkNTE4ZDhlYWExYTBhMmU4NzExMjEzY2FiNGJiOGY1ZTIyN2U4NGY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "69667e75981ef43b9048354ccb89295b676af265", "author": {"user": {"login": "bratseth", "name": "Jon Bratseth"}}, "url": "https://github.com/vespa-engine/vespa/commit/69667e75981ef43b9048354ccb89295b676af265", "committedDate": "2020-11-30T10:32:45Z", "message": "Filter unstable at db insert"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ac7af6d0b2e4f2fe8399d26518262d5d7396c794", "author": {"user": {"login": "bratseth", "name": "Jon Bratseth"}}, "url": "https://github.com/vespa-engine/vespa/commit/ac7af6d0b2e4f2fe8399d26518262d5d7396c794", "committedDate": "2020-11-30T12:10:45Z", "message": "Store metrics with inService or stable false"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9a2bce1b48ebcaa807e79ce7bb048ff2e93c6473", "author": {"user": {"login": "bratseth", "name": "Jon Bratseth"}}, "url": "https://github.com/vespa-engine/vespa/commit/9a2bce1b48ebcaa807e79ce7bb048ff2e93c6473", "committedDate": "2020-11-30T12:51:38Z", "message": "Filter at read time"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7ad2fca1417f807ebd81a716a2fbfdc458397927", "author": {"user": {"login": "bratseth", "name": "Jon Bratseth"}}, "url": "https://github.com/vespa-engine/vespa/commit/7ad2fca1417f807ebd81a716a2fbfdc458397927", "committedDate": "2020-11-30T13:03:36Z", "message": "Add tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4765de9be3717b0dcdc08deac520b7fd7f4f9dca", "author": {"user": {"login": "bratseth", "name": "Jon Bratseth"}}, "url": "https://github.com/vespa-engine/vespa/commit/4765de9be3717b0dcdc08deac520b7fd7f4f9dca", "committedDate": "2020-11-30T13:31:26Z", "message": "Add temporary additional information"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQwOTIxMzIx", "url": "https://github.com/vespa-engine/vespa/pull/15539#pullrequestreview-540921321", "createdAt": "2020-11-30T13:46:55Z", "commit": {"oid": "4765de9be3717b0dcdc08deac520b7fd7f4f9dca"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0zMFQxMzo0Njo1NVrOH77yhg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0zMFQxMzo1MTo0MFrOH77-tQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjYwNzYyMg==", "bodyText": "This is unused now?", "url": "https://github.com/vespa-engine/vespa/pull/15539#discussion_r532607622", "createdAt": "2020-11-30T13:46:55Z", "author": {"login": "freva"}, "path": "node-repository/src/main/java/com/yahoo/vespa/hosted/provision/maintenance/NodeMetricsDbMaintainer.java", "diffHunk": "@@ -63,6 +63,7 @@ protected boolean maintain() {\n     private Collection<Pair<String, MetricSnapshot>> filter(Collection<Pair<String, MetricSnapshot>> snapshots) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4765de9be3717b0dcdc08deac520b7fd7f4f9dca"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjYxMDc0MQ==", "bodyText": "What about the existing tables?", "url": "https://github.com/vespa-engine/vespa/pull/15539#discussion_r532610741", "createdAt": "2020-11-30T13:51:40Z", "author": {"login": "freva"}, "path": "node-repository/src/main/java/com/yahoo/vespa/hosted/provision/autoscale/QuestMetricsDb.java", "diffHunk": "@@ -152,7 +154,8 @@ private void ensureExists(String tableName) {\n \n         try (SqlCompiler compiler = new SqlCompiler(engine)) {\n             compiler.compile(\"create table \" + tableName +\n-                             \" (hostname string, at timestamp, cpu_util float, mem_total_util float, disk_util float, application_generation long)\" +\n+                             \" (hostname string, at timestamp, cpu_util float, mem_total_util float, disk_util float,\" +", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4765de9be3717b0dcdc08deac520b7fd7f4f9dca"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7d518d8eaa1a0a2e8711213cab4bb8f5e227e84f", "author": {"user": {"login": "bratseth", "name": "Jon Bratseth"}}, "url": "https://github.com/vespa-engine/vespa/commit/7d518d8eaa1a0a2e8711213cab4bb8f5e227e84f", "committedDate": "2020-11-30T14:13:59Z", "message": "Remove dead code"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1808, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}