{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg5MjE2ODQ3", "number": 12578, "title": "Consume metrics timestamps in seconds not ms", "bodyText": "", "createdAt": "2020-03-16T12:55:36Z", "url": "https://github.com/vespa-engine/vespa/pull/12578", "merged": true, "mergeCommit": {"oid": "bb38b24402381dbaa2cd19ccada38400ee9c961e"}, "closed": true, "closedAt": "2020-03-16T14:56:37Z", "author": {"login": "bratseth"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcONpJiAH2gAyMzg5MjE2ODQ3OjcxNjk1YjkyNjlkODIwYjcyOTY2YjZkZTVmODEzODViNzNlM2NiZDA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcOO6enAFqTM3NTI2NTY3NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "71695b9269d820b72966b6de5f81385b73e3cbd0", "author": {"user": {"login": "vespa-headless", "name": null}}, "url": "https://github.com/vespa-engine/vespa/commit/71695b9269d820b72966b6de5f81385b73e3cbd0", "committedDate": "2020-03-16T12:54:44Z", "message": "Consume metrics timestamps in seconds not ms"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc1MTkwMzQ2", "url": "https://github.com/vespa-engine/vespa/pull/12578#pullrequestreview-375190346", "createdAt": "2020-03-16T13:00:34Z", "commit": {"oid": "71695b9269d820b72966b6de5f81385b73e3cbd0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQxMzowMDozNFrOF2zKHQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQxMzowMDozNFrOF2zKHQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzAwNTU5Nw==", "bodyText": "Remove", "url": "https://github.com/vespa-engine/vespa/pull/12578#discussion_r393005597", "createdAt": "2020-03-16T13:00:34Z", "author": {"login": "freva"}, "path": "node-repository/src/test/java/com/yahoo/vespa/hosted/provision/autoscale/AutoscalingTest.java", "diffHunk": "@@ -141,4 +145,33 @@ public void testAutoscalingAws() {\n                                tester.autoscale(application1, cluster1));\n     }\n \n+    @Test", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "71695b9269d820b72966b6de5f81385b73e3cbd0"}, "originalPosition": 27}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4628eeaa4f467500c36f8fe7caf91b666846f302", "author": {"user": {"login": "vespa-headless", "name": null}}, "url": "https://github.com/vespa-engine/vespa/commit/4628eeaa4f467500c36f8fe7caf91b666846f302", "committedDate": "2020-03-16T13:46:17Z", "message": "Remove temporary test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc1MjY1Njc0", "url": "https://github.com/vespa-engine/vespa/pull/12578#pullrequestreview-375265674", "createdAt": "2020-03-16T14:23:31Z", "commit": {"oid": "4628eeaa4f467500c36f8fe7caf91b666846f302"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQxNDoyMzozMVrOF22lrw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQxNDoyMzozMVrOF22lrw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzA2MTgwNw==", "bodyText": "Why did this happen?", "url": "https://github.com/vespa-engine/vespa/pull/12578#discussion_r393061807", "createdAt": "2020-03-16T14:23:31Z", "author": {"login": "freva"}, "path": "node-repository/src/test/java/com/yahoo/vespa/hosted/provision/autoscale/NodeMetricsDbTest.java", "diffHunk": "@@ -18,15 +18,15 @@ public void testNodeMetricsDb() {\n         NodeMetricsDb db = new NodeMetricsDb();\n         List<NodeMetrics.MetricValue> values = new ArrayList<>();\n         for (int i = 0; i < 40; i++) {\n-            values.add(new NodeMetrics.MetricValue(\"host0\", \"cpu.util\", clock.instant().toEpochMilli(), 0.9f));\n+            values.add(new NodeMetrics.MetricValue(\"host0\", \"cpu.util\", clock.instant().getEpochSecond(), 0.9f));\n             clock.advance(Duration.ofHours(1));\n         }\n         db.add(values);\n \n-        assertEquals(30, db.getWindow(clock.instant().minus(Duration.ofHours(30)), Resource.cpu,    List.of(\"host0\")).measurementCount());\n+        assertEquals(29, db.getWindow(clock.instant().minus(Duration.ofHours(30)), Resource.cpu,    List.of(\"host0\")).measurementCount());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4628eeaa4f467500c36f8fe7caf91b666846f302"}, "originalPosition": 11}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2691, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}