{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY4MTM1MTM1", "number": 14051, "title": "Balder/use an actual fieldset repo", "bodyText": "@havardpe PR And this concludes optimising the fieldset handlig in the backend.\n@vekterli FYI", "createdAt": "2020-08-14T18:51:34Z", "url": "https://github.com/vespa-engine/vespa/pull/14051", "merged": true, "mergeCommit": {"oid": "2f0ccbe4e07afee74513e9e89a2a037db47fd542"}, "closed": true, "closedAt": "2020-08-18T20:28:24Z", "author": {"login": "baldersheim"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc-26qSAH2gAyNDY4MTM1MTM1OmJiYzc2OGQ2ZWY5MmYxNjY3MTdkNjVlNjc2ODlmNmFhMTVjOTg5NTI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdANBawgH2gAyNDY4MTM1MTM1OjYyMzY0ODM2NGE4ZTMyZmYwZWM4MTFmMmE4YjAxNzliZDEzZDU5NTY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "bbc768d6ef92f166717d65e67689f6aa15c98952", "author": {"user": {"login": "baldersheim", "name": "Henning Baldersheim"}}, "url": "https://github.com/vespa-engine/vespa/commit/bbc768d6ef92f166717d65e67689f6aa15c98952", "committedDate": "2020-08-14T16:08:20Z", "message": "Change api so that we can drop clone from the interface and prepare for using a true repo."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "729e8546d793a43ecfc94c11d5eed042d4dc74e1", "author": {"user": {"login": "baldersheim", "name": "Henning Baldersheim"}}, "url": "https://github.com/vespa-engine/vespa/commit/729e8546d793a43ecfc94c11d5eed042d4dc74e1", "committedDate": "2020-08-14T18:48:09Z", "message": "Build the FieldSetRepo up front with all configured fieldsets to avoid building them for every get() call.\""}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY5MTI2ODk5", "url": "https://github.com/vespa-engine/vespa/pull/14051#pullrequestreview-469126899", "createdAt": "2020-08-18T08:56:35Z", "commit": {"oid": "729e8546d793a43ecfc94c11d5eed042d4dc74e1"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQwODo1NjozNlrOHCKGtw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQwODo1NjozNlrOHCKGtw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjAyNDc1OQ==", "bodyText": "this type name is somewhat confusing and dishonest", "url": "https://github.com/vespa-engine/vespa/pull/14051#discussion_r472024759", "createdAt": "2020-08-18T08:56:36Z", "author": {"login": "havardpe"}, "path": "storage/src/vespa/storage/common/storagecomponent.h", "diffHunk": "@@ -58,34 +59,38 @@ struct StorageComponentRegister;\n \n class StorageComponent : public framework::Component {\n public:\n+    struct Repos {\n+        explicit Repos(std::shared_ptr<const document::DocumentTypeRepo> repo);\n+        ~Repos();\n+        const std::shared_ptr<const document::DocumentTypeRepo> documentTypeRepo;\n+        const std::shared_ptr<const document::FieldSetRepo> fieldSetRepo;\n+    };\n     using UP = std::unique_ptr<StorageComponent>;\n     using PriorityConfig = vespa::config::content::core::internal::InternalStorPrioritymappingType;\n-    using DocumentTypeRepoSP = std::shared_ptr<const document::DocumentTypeRepo>;\n+    using DocumentTypeRepoSP = std::shared_ptr<Repos>;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "729e8546d793a43ecfc94c11d5eed042d4dc74e1"}, "originalPosition": 21}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "623648364a8e32ff0ec811f2a8b0179bd13d5956", "author": {"user": {"login": "baldersheim", "name": "Henning Baldersheim"}}, "url": "https://github.com/vespa-engine/vespa/commit/623648364a8e32ff0ec811f2a8b0179bd13d5956", "committedDate": "2020-08-18T20:27:33Z", "message": "Avoid renaming a simple shared_ptr."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4493, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}