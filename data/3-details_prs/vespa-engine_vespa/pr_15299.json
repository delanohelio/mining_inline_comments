{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE5Mzg0Mjc3", "number": 15299, "title": "Set state for session instead of deleting it when deleting an applica\u2026", "bodyText": "\u2026tion\nSimplify by just setting the state of the active session belonging to an\napplication that is deleted. This is more in line with what we do for other\ntransitions.\nInactive sessions will be deleted by maintainers in config server after\nsome time.", "createdAt": "2020-11-11T18:46:04Z", "url": "https://github.com/vespa-engine/vespa/pull/15299", "merged": true, "mergeCommit": {"oid": "de23b574462e6931e6afd0906257f0bd7673f1f8"}, "closed": true, "closedAt": "2020-11-12T09:09:39Z", "author": {"login": "hmusum"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdbigG7AH2gAyNTE5Mzg0Mjc3OjEwNThjMjlhMjczYTQxZWJhNzRlYWU2OTI4Y2EyN2ViZTE1NzQ4NGU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdbuD0uAH2gAyNTE5Mzg0Mjc3OmNlNTg3MDczMGIzNjA2ZWQxMGE5MmQyYmVhYzkwMjI2YTM2YjM5ZDk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "1058c29a273a41eba74eae6928ca27ebe157484e", "author": {"user": {"login": "hmusum", "name": "Harald Musum"}}, "url": "https://github.com/vespa-engine/vespa/commit/1058c29a273a41eba74eae6928ca27ebe157484e", "committedDate": "2020-11-11T18:45:02Z", "message": "Set state for session instead of deleting it when deleting an application\n\nSimplify by just setting the state of the active session belonging to an\napplication that is deleted. This is more in line with what we do for other\ntransitions.\n\nInactive sessions will be deleted nby maintainers in config server after\nsome time"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI4ODExMjIy", "url": "https://github.com/vespa-engine/vespa/pull/15299#pullrequestreview-528811222", "createdAt": "2020-11-12T07:33:37Z", "commit": {"oid": "1058c29a273a41eba74eae6928ca27ebe157484e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQwNzozMzozN1rOHxtp2Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQwNzozMzozN1rOHxtp2Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTg5MDI2NQ==", "bodyText": "Doing nothing on DELETE means we must be sure the DEACTIVATE has already been acted upon, and the session deactivated. How can we be sure this is the case here?", "url": "https://github.com/vespa-engine/vespa/pull/15299#discussion_r521890265", "createdAt": "2020-11-12T07:33:37Z", "author": {"login": "jonmv"}, "path": "configserver/src/main/java/com/yahoo/vespa/config/server/session/SessionStateWatcher.java", "diffHunk": "@@ -48,6 +48,7 @@ private synchronized void sessionStatusChanged(Status newStatus) {\n         switch (newStatus) {\n             case NEW:\n             case NONE:\n+            case DELETE:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1058c29a273a41eba74eae6928ca27ebe157484e"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ce5870730b3606ed10a92d2beac90226a36b39d9", "author": {"user": {"login": "hmusum", "name": "Harald Musum"}}, "url": "https://github.com/vespa-engine/vespa/commit/ce5870730b3606ed10a92d2beac90226a36b39d9", "committedDate": "2020-11-12T08:13:00Z", "message": "Deactivate session when session status is DELETE"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2055, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}