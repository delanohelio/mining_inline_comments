{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg2MTY2MTMx", "number": 12527, "reviewThreads": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxNTo0MToyN1rODmvNTQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxNTo1NzozNFrODmvq1w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxOTQ1OTMzOnYy", "diffSide": "RIGHT", "path": "searchlib/src/vespa/searchlib/tensor/distance_functions.h", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxNTo0MToyN1rOF0Uzew==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxOTozNjo1M1rOF0eHQQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDQxMTEzMQ==", "bodyText": "Please update class description to indicate that it can be hardware accelerated.", "url": "https://github.com/vespa-engine/vespa/pull/12527#discussion_r390411131", "createdAt": "2020-03-10T15:41:27Z", "author": {"login": "geirst"}, "path": "searchlib/src/vespa/searchlib/tensor/distance_functions.h", "diffHunk": "@@ -13,66 +14,20 @@ namespace search::tensor {\n template <typename FloatType>\n class SquaredEuclideanDistance : public DistanceFunction {\n public:\n+    SquaredEuclideanDistance()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "03bd3b755650d828e63458379d5c120da63d7221"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDU2MzY0OQ==", "bodyText": "Fixed", "url": "https://github.com/vespa-engine/vespa/pull/12527#discussion_r390563649", "createdAt": "2020-03-10T19:36:53Z", "author": {"login": "baldersheim"}, "path": "searchlib/src/vespa/searchlib/tensor/distance_functions.h", "diffHunk": "@@ -13,66 +14,20 @@ namespace search::tensor {\n template <typename FloatType>\n class SquaredEuclideanDistance : public DistanceFunction {\n public:\n+    SquaredEuclideanDistance()", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDQxMTEzMQ=="}, "originalCommit": {"oid": "03bd3b755650d828e63458379d5c120da63d7221"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxOTQ2MTY0OnYy", "diffSide": "RIGHT", "path": "vespalib/src/tests/hwaccelrated/CMakeLists.txt", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxNTo0MTo1M1rOF0U04w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxOTozNzoxMVrOF0eH0Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDQxMTQ5MQ==", "bodyText": "Please use new copyright", "url": "https://github.com/vespa-engine/vespa/pull/12527#discussion_r390411491", "createdAt": "2020-03-10T15:41:53Z", "author": {"login": "geirst"}, "path": "vespalib/src/tests/hwaccelrated/CMakeLists.txt", "diffHunk": "@@ -0,0 +1,8 @@\n+# Copyright 2017 Yahoo Holdings. Licensed under the terms of the Apache 2.0 license. See LICENSE in the project root.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "03bd3b755650d828e63458379d5c120da63d7221"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDU2Mzc5Mw==", "bodyText": "Fixed", "url": "https://github.com/vespa-engine/vespa/pull/12527#discussion_r390563793", "createdAt": "2020-03-10T19:37:11Z", "author": {"login": "baldersheim"}, "path": "vespalib/src/tests/hwaccelrated/CMakeLists.txt", "diffHunk": "@@ -0,0 +1,8 @@\n+# Copyright 2017 Yahoo Holdings. Licensed under the terms of the Apache 2.0 license. See LICENSE in the project root.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDQxMTQ5MQ=="}, "originalCommit": {"oid": "03bd3b755650d828e63458379d5c120da63d7221"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxOTQ2MjU3OnYy", "diffSide": "RIGHT", "path": "vespalib/src/tests/hwaccelrated/hwaccelrated_test.cpp", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxNTo0MjowOFrOF0U1lA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxOTo0NzozOVrOF0ec6Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDQxMTY2OA==", "bodyText": "Please use new copyright", "url": "https://github.com/vespa-engine/vespa/pull/12527#discussion_r390411668", "createdAt": "2020-03-10T15:42:08Z", "author": {"login": "geirst"}, "path": "vespalib/src/tests/hwaccelrated/hwaccelrated_test.cpp", "diffHunk": "@@ -0,0 +1,39 @@\n+// Copyright 2017 Yahoo Holdings. Licensed under the terms of the Apache 2.0 license. See LICENSE in the project root.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "03bd3b755650d828e63458379d5c120da63d7221"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDU2OTE5Mw==", "bodyText": "Fixed", "url": "https://github.com/vespa-engine/vespa/pull/12527#discussion_r390569193", "createdAt": "2020-03-10T19:47:39Z", "author": {"login": "baldersheim"}, "path": "vespalib/src/tests/hwaccelrated/hwaccelrated_test.cpp", "diffHunk": "@@ -0,0 +1,39 @@\n+// Copyright 2017 Yahoo Holdings. Licensed under the terms of the Apache 2.0 license. See LICENSE in the project root.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDQxMTY2OA=="}, "originalCommit": {"oid": "03bd3b755650d828e63458379d5c120da63d7221"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxOTQ2NzU3OnYy", "diffSide": "RIGHT", "path": "vespalib/src/tests/hwaccelrated/hwaccelrated_test.cpp", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxNTo0MzoxMVrOF0U4yw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxOTo1MDo1NFrOF0ejeA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDQxMjQ5MQ==", "bodyText": "Typo: \"Euclidian\" -> \"Euclidean\"", "url": "https://github.com/vespa-engine/vespa/pull/12527#discussion_r390412491", "createdAt": "2020-03-10T15:43:11Z", "author": {"login": "geirst"}, "path": "vespalib/src/tests/hwaccelrated/hwaccelrated_test.cpp", "diffHunk": "@@ -0,0 +1,39 @@\n+// Copyright 2017 Yahoo Holdings. Licensed under the terms of the Apache 2.0 license. See LICENSE in the project root.\n+\n+#include <vespa/vespalib/testkit/test_kit.h>\n+#include <vespa/vespalib/hwaccelrated/iaccelrated.h>\n+#include <vespa/vespalib/hwaccelrated/generic.h>\n+\n+using namespace vespalib;\n+\n+template<typename T>\n+std::vector<T> createAndFill(size_t sz) {\n+    std::vector<T> v(sz);\n+    for (size_t i(0); i < sz; i++) {\n+        v[i] = i;\n+    }\n+    return v;\n+}\n+\n+template<typename T>\n+void verifyEuclidianDistance(const hwaccelrated::IAccelrated & accel) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "03bd3b755650d828e63458379d5c120da63d7221"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDU3MDg3Mg==", "bodyText": "Fixed", "url": "https://github.com/vespa-engine/vespa/pull/12527#discussion_r390570872", "createdAt": "2020-03-10T19:50:54Z", "author": {"login": "baldersheim"}, "path": "vespalib/src/tests/hwaccelrated/hwaccelrated_test.cpp", "diffHunk": "@@ -0,0 +1,39 @@\n+// Copyright 2017 Yahoo Holdings. Licensed under the terms of the Apache 2.0 license. See LICENSE in the project root.\n+\n+#include <vespa/vespalib/testkit/test_kit.h>\n+#include <vespa/vespalib/hwaccelrated/iaccelrated.h>\n+#include <vespa/vespalib/hwaccelrated/generic.h>\n+\n+using namespace vespalib;\n+\n+template<typename T>\n+std::vector<T> createAndFill(size_t sz) {\n+    std::vector<T> v(sz);\n+    for (size_t i(0); i < sz; i++) {\n+        v[i] = i;\n+    }\n+    return v;\n+}\n+\n+template<typename T>\n+void verifyEuclidianDistance(const hwaccelrated::IAccelrated & accel) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDQxMjQ5MQ=="}, "originalCommit": {"oid": "03bd3b755650d828e63458379d5c120da63d7221"}, "originalPosition": 19}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxOTQ3MjYyOnYy", "diffSide": "RIGHT", "path": "vespalib/src/tests/hwaccelrated/hwaccelrated_test.cpp", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxNTo0NDoxMVrOF0U74A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQyMDowMTozNlrOF0e6wQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDQxMzI4MA==", "bodyText": "Typo: \"euclidian\" -> \"euclidean\"", "url": "https://github.com/vespa-engine/vespa/pull/12527#discussion_r390413280", "createdAt": "2020-03-10T15:44:11Z", "author": {"login": "geirst"}, "path": "vespalib/src/tests/hwaccelrated/hwaccelrated_test.cpp", "diffHunk": "@@ -0,0 +1,39 @@\n+// Copyright 2017 Yahoo Holdings. Licensed under the terms of the Apache 2.0 license. See LICENSE in the project root.\n+\n+#include <vespa/vespalib/testkit/test_kit.h>\n+#include <vespa/vespalib/hwaccelrated/iaccelrated.h>\n+#include <vespa/vespalib/hwaccelrated/generic.h>\n+\n+using namespace vespalib;\n+\n+template<typename T>\n+std::vector<T> createAndFill(size_t sz) {\n+    std::vector<T> v(sz);\n+    for (size_t i(0); i < sz; i++) {\n+        v[i] = i;\n+    }\n+    return v;\n+}\n+\n+template<typename T>\n+void verifyEuclidianDistance(const hwaccelrated::IAccelrated & accel) {\n+    const size_t testLength(255);\n+    std::vector<T> a = createAndFill<T>(testLength);\n+    std::vector<T> b = createAndFill<T>(testLength);\n+    for (size_t j(0); j < 0x20; j++) {\n+        T sum(0);\n+        for (size_t i(j); i < testLength; i++) {\n+            sum += (a[i] - b[i]) * (a[i] - b[i]);\n+        }\n+        T hwComputedSum(accel.squaredEuclidianDistance(&a[j], &b[j], testLength - j));\n+        EXPECT_EQUAL (sum, hwComputedSum);\n+    }\n+}\n+\n+TEST(\"test euclidian distance\") {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "03bd3b755650d828e63458379d5c120da63d7221"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDU3NjgzMw==", "bodyText": "Fixed", "url": "https://github.com/vespa-engine/vespa/pull/12527#discussion_r390576833", "createdAt": "2020-03-10T20:01:36Z", "author": {"login": "baldersheim"}, "path": "vespalib/src/tests/hwaccelrated/hwaccelrated_test.cpp", "diffHunk": "@@ -0,0 +1,39 @@\n+// Copyright 2017 Yahoo Holdings. Licensed under the terms of the Apache 2.0 license. See LICENSE in the project root.\n+\n+#include <vespa/vespalib/testkit/test_kit.h>\n+#include <vespa/vespalib/hwaccelrated/iaccelrated.h>\n+#include <vespa/vespalib/hwaccelrated/generic.h>\n+\n+using namespace vespalib;\n+\n+template<typename T>\n+std::vector<T> createAndFill(size_t sz) {\n+    std::vector<T> v(sz);\n+    for (size_t i(0); i < sz; i++) {\n+        v[i] = i;\n+    }\n+    return v;\n+}\n+\n+template<typename T>\n+void verifyEuclidianDistance(const hwaccelrated::IAccelrated & accel) {\n+    const size_t testLength(255);\n+    std::vector<T> a = createAndFill<T>(testLength);\n+    std::vector<T> b = createAndFill<T>(testLength);\n+    for (size_t j(0); j < 0x20; j++) {\n+        T sum(0);\n+        for (size_t i(j); i < testLength; i++) {\n+            sum += (a[i] - b[i]) * (a[i] - b[i]);\n+        }\n+        T hwComputedSum(accel.squaredEuclidianDistance(&a[j], &b[j], testLength - j));\n+        EXPECT_EQUAL (sum, hwComputedSum);\n+    }\n+}\n+\n+TEST(\"test euclidian distance\") {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDQxMzI4MA=="}, "originalCommit": {"oid": "03bd3b755650d828e63458379d5c120da63d7221"}, "originalPosition": 33}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxOTQ3NzA1OnYy", "diffSide": "RIGHT", "path": "vespalib/src/vespa/vespalib/hwaccelrated/avx2.cpp", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxNTo0NToxMlrOF0U-wQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQyMDowMTo1MlrOF0e7PQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDQxNDAxNw==", "bodyText": "Typo: \"Euclidian\" -> \"Euclidean\". This applies else where as well.", "url": "https://github.com/vespa-engine/vespa/pull/12527#discussion_r390414017", "createdAt": "2020-03-10T15:45:12Z", "author": {"login": "geirst"}, "path": "vespalib/src/vespa/vespalib/hwaccelrated/avx2.cpp", "diffHunk": "@@ -10,4 +10,14 @@ Avx2Accelrator::populationCount(const uint64_t *a, size_t sz) const {\n     return helper::populationCount(a, sz);\n }\n \n+double\n+Avx2Accelrator::squaredEuclidianDistance(const float * a, const float * b, size_t sz) const {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "03bd3b755650d828e63458379d5c120da63d7221"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDU3Njk1Nw==", "bodyText": "Fixed", "url": "https://github.com/vespa-engine/vespa/pull/12527#discussion_r390576957", "createdAt": "2020-03-10T20:01:52Z", "author": {"login": "baldersheim"}, "path": "vespalib/src/vespa/vespalib/hwaccelrated/avx2.cpp", "diffHunk": "@@ -10,4 +10,14 @@ Avx2Accelrator::populationCount(const uint64_t *a, size_t sz) const {\n     return helper::populationCount(a, sz);\n }\n \n+double\n+Avx2Accelrator::squaredEuclidianDistance(const float * a, const float * b, size_t sz) const {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDQxNDAxNw=="}, "originalCommit": {"oid": "03bd3b755650d828e63458379d5c120da63d7221"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxOTUzMjM1OnYy", "diffSide": "RIGHT", "path": "vespalib/src/tests/hwaccelrated/hwaccelrated_test.cpp", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxNTo1NzowMFrOF0VhkA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQyMDowNzo1M1rOF0fHZA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDQyMjkyOA==", "bodyText": "Consider using different data for vectors a and b. Now they are equal, and the difference between them are always 0 -> the squared euclidean distance is 0.", "url": "https://github.com/vespa-engine/vespa/pull/12527#discussion_r390422928", "createdAt": "2020-03-10T15:57:00Z", "author": {"login": "geirst"}, "path": "vespalib/src/tests/hwaccelrated/hwaccelrated_test.cpp", "diffHunk": "@@ -0,0 +1,39 @@\n+// Copyright 2017 Yahoo Holdings. Licensed under the terms of the Apache 2.0 license. See LICENSE in the project root.\n+\n+#include <vespa/vespalib/testkit/test_kit.h>\n+#include <vespa/vespalib/hwaccelrated/iaccelrated.h>\n+#include <vespa/vespalib/hwaccelrated/generic.h>\n+\n+using namespace vespalib;\n+\n+template<typename T>\n+std::vector<T> createAndFill(size_t sz) {\n+    std::vector<T> v(sz);\n+    for (size_t i(0); i < sz; i++) {\n+        v[i] = i;\n+    }\n+    return v;\n+}\n+\n+template<typename T>\n+void verifyEuclidianDistance(const hwaccelrated::IAccelrated & accel) {\n+    const size_t testLength(255);\n+    std::vector<T> a = createAndFill<T>(testLength);\n+    std::vector<T> b = createAndFill<T>(testLength);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "03bd3b755650d828e63458379d5c120da63d7221"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDU4MDA2OA==", "bodyText": "Random with fixed seed.", "url": "https://github.com/vespa-engine/vespa/pull/12527#discussion_r390580068", "createdAt": "2020-03-10T20:07:53Z", "author": {"login": "baldersheim"}, "path": "vespalib/src/tests/hwaccelrated/hwaccelrated_test.cpp", "diffHunk": "@@ -0,0 +1,39 @@\n+// Copyright 2017 Yahoo Holdings. Licensed under the terms of the Apache 2.0 license. See LICENSE in the project root.\n+\n+#include <vespa/vespalib/testkit/test_kit.h>\n+#include <vespa/vespalib/hwaccelrated/iaccelrated.h>\n+#include <vespa/vespalib/hwaccelrated/generic.h>\n+\n+using namespace vespalib;\n+\n+template<typename T>\n+std::vector<T> createAndFill(size_t sz) {\n+    std::vector<T> v(sz);\n+    for (size_t i(0); i < sz; i++) {\n+        v[i] = i;\n+    }\n+    return v;\n+}\n+\n+template<typename T>\n+void verifyEuclidianDistance(const hwaccelrated::IAccelrated & accel) {\n+    const size_t testLength(255);\n+    std::vector<T> a = createAndFill<T>(testLength);\n+    std::vector<T> b = createAndFill<T>(testLength);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDQyMjkyOA=="}, "originalCommit": {"oid": "03bd3b755650d828e63458379d5c120da63d7221"}, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxOTUzNDk1OnYy", "diffSide": "RIGHT", "path": "vespalib/src/vespa/vespalib/hwaccelrated/iaccelrated.cpp", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxNTo1NzozNFrOF0VjOg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQyMDowODowOVrOF0fH5Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDQyMzM1NA==", "bodyText": "Consider using different data for vectors a and b. Now they are equal, and the difference between them are always 0 -> the squared euclidean distance is 0.", "url": "https://github.com/vespa-engine/vespa/pull/12527#discussion_r390423354", "createdAt": "2020-03-10T15:57:34Z", "author": {"login": "geirst"}, "path": "vespalib/src/vespa/vespalib/hwaccelrated/iaccelrated.cpp", "diffHunk": "@@ -65,8 +62,24 @@ void verifyAccelrator(const IAccelrated & accel)\n             LOG_ABORT(\"should not be reached\");\n         }\n     }\n-    delete [] a;\n-    delete [] b;\n+}\n+\n+template<typename T>\n+void verifyEuclidianDistance(const IAccelrated & accel) {\n+    const size_t testLength(255);\n+    std::vector<T> a = createAndFill<T>(testLength);\n+    std::vector<T> b = createAndFill<T>(testLength);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "03bd3b755650d828e63458379d5c120da63d7221"}, "originalPosition": 81}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDU4MDE5Nw==", "bodyText": "Random with fixed seed.", "url": "https://github.com/vespa-engine/vespa/pull/12527#discussion_r390580197", "createdAt": "2020-03-10T20:08:09Z", "author": {"login": "baldersheim"}, "path": "vespalib/src/vespa/vespalib/hwaccelrated/iaccelrated.cpp", "diffHunk": "@@ -65,8 +62,24 @@ void verifyAccelrator(const IAccelrated & accel)\n             LOG_ABORT(\"should not be reached\");\n         }\n     }\n-    delete [] a;\n-    delete [] b;\n+}\n+\n+template<typename T>\n+void verifyEuclidianDistance(const IAccelrated & accel) {\n+    const size_t testLength(255);\n+    std::vector<T> a = createAndFill<T>(testLength);\n+    std::vector<T> b = createAndFill<T>(testLength);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDQyMzM1NA=="}, "originalCommit": {"oid": "03bd3b755650d828e63458379d5c120da63d7221"}, "originalPosition": 81}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2235, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}