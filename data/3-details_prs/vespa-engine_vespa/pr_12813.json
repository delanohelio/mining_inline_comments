{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk3NzM5NTI3", "number": 12813, "title": "Bypass communicationmanager Q", "bodyText": "@vekterli PR", "createdAt": "2020-04-02T18:14:47Z", "url": "https://github.com/vespa-engine/vespa/pull/12813", "merged": true, "mergeCommit": {"oid": "4de936c04e19e372dcdc47f6c4ed1e50a2d7c433"}, "closed": true, "closedAt": "2020-04-02T21:29:19Z", "author": {"login": "baldersheim"}, "timelineItems": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcTwY8gAH2gAyMzk3NzM5NTI3OmEyYzhhZDQ3NWRlNThlNjY4NmU0ODQ2MTA0ODhiYzRhZGFlMzAyNzM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcT_6PygFqTM4NzE2NzA4Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "a2c8ad475de58e6686e484610488bc4adae30273", "author": {"user": {"login": "baldersheim", "name": "Henning Baldersheim"}}, "url": "https://github.com/vespa-engine/vespa/commit/a2c8ad475de58e6686e484610488bc4adae30273", "committedDate": "2020-04-02T18:13:20Z", "message": "Bypass communicationmanager Q"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg3MTY3MDg2", "url": "https://github.com/vespa-engine/vespa/pull/12813#pullrequestreview-387167086", "createdAt": "2020-04-03T11:17:20Z", "commit": {"oid": "a2c8ad475de58e6686e484610488bc4adae30273"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QxMToxNzoyMFrOGARMxQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QxMjoxNzoyM1rOGAS7qw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjkzNDk4MQ==", "bodyText": "Were these assertions removed because they were triggering or because it was desired to observe explicit log errors during testing?", "url": "https://github.com/vespa-engine/vespa/pull/12813#discussion_r402934981", "createdAt": "2020-04-03T11:17:20Z", "author": {"login": "vekterli"}, "path": "storage/src/vespa/storage/common/storagelink.cpp", "diffHunk": "@@ -165,9 +165,9 @@ void StorageLink::sendUp(const shared_ptr<StorageMessage> & msg)\n         default:\n             LOG(error, \"Link %s trying to send %s up while in state %s\",\n                 toString().c_str(), msg->toString(true).c_str(), stateToString(getState()));\n-            assert(false);\n+            return;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2c8ad475de58e6686e484610488bc4adae30273"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjk2MzM3MQ==", "bodyText": "We should probably rename CommunicationManager::enqueue in due time as well \ud83d\ude42", "url": "https://github.com/vespa-engine/vespa/pull/12813#discussion_r402963371", "createdAt": "2020-04-03T12:17:23Z", "author": {"login": "vekterli"}, "path": "storage/src/vespa/storage/storageserver/communicationmanager.cpp", "diffHunk": "@@ -492,8 +489,8 @@ void\n CommunicationManager::enqueue(std::shared_ptr<api::StorageMessage> msg)\n {\n     assert(msg);\n-    LOG(spam, \"Enq storage message %s, priority %d\", msg->toString().c_str(), msg->getPriority());\n-    _eventQueue.enqueue(std::move(msg));\n+    LOG(spam, \"Process storage message %s, priority %d\", msg->toString().c_str(), msg->getPriority());\n+    process(msg);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2c8ad475de58e6686e484610488bc4adae30273"}, "originalPosition": 31}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2571, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}