{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYzNzEyNzMw", "number": 11822, "title": "Balder/reduce bytebuffer exposure", "bodyText": "@vekterli PR", "createdAt": "2020-01-16T15:44:12Z", "url": "https://github.com/vespa-engine/vespa/pull/11822", "merged": true, "mergeCommit": {"oid": "c9db06db7b01a2da9228c38783fd9f95c4fc7bba"}, "closed": true, "closedAt": "2020-01-21T19:57:50Z", "author": {"login": "baldersheim"}, "timelineItems": {"totalCount": 22, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb68EKLgH2gAyMzYzNzEyNzMwOjZhYmMwNTY4NGZjM2ZlNDZkYTJiMTU5Yjg5NDRmYWU5YWRiMDg2YTQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb8mlX8AH2gAyMzYzNzEyNzMwOmFhMGJmYjExZDA1MzgxYTU1NWMxOTdhMmFiMjZlZTExN2MwNzU4ZTY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "6abc05684fc3fe46da2b159b8944fae9adb086a4", "author": {"user": {"login": "baldersheim", "name": "Henning Baldersheim"}}, "url": "https://github.com/vespa-engine/vespa/commit/6abc05684fc3fe46da2b159b8944fae9adb086a4", "committedDate": "2020-01-16T15:41:23Z", "message": "GC unused constructors."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d3cf455cba32ef3f5280634470858e80761d8450", "author": {"user": {"login": "baldersheim", "name": "Henning Baldersheim"}}, "url": "https://github.com/vespa-engine/vespa/commit/d3cf455cba32ef3f5280634470858e80761d8450", "committedDate": "2020-01-16T15:41:23Z", "message": "Unify towards nbostream"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b1bc742e8ac18dd41ea8f19919005257fbfa277b", "author": {"user": {"login": "baldersheim", "name": "Henning Baldersheim"}}, "url": "https://github.com/vespa-engine/vespa/commit/b1bc742e8ac18dd41ea8f19919005257fbfa277b", "committedDate": "2020-01-16T15:41:24Z", "message": "Remove complicated option for slicing as it is not used anywhere."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d092c8e45fe74f0fe7808a6d4fa363fb0a009181", "author": {"user": {"login": "baldersheim", "name": "Henning Baldersheim"}}, "url": "https://github.com/vespa-engine/vespa/commit/d092c8e45fe74f0fe7808a6d4fa363fb0a009181", "committedDate": "2020-01-17T09:25:04Z", "message": "GC unused code and simplify StructFieldValue."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "21aa89bea7799ef8da18c1804c3d6fddfc085449", "author": {"user": {"login": "baldersheim", "name": "Henning Baldersheim"}}, "url": "https://github.com/vespa-engine/vespa/commit/21aa89bea7799ef8da18c1804c3d6fddfc085449", "committedDate": "2020-01-17T09:41:13Z", "message": "GC unused swap"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c9b92a456b0dd9980dfa17806b4f0948be60002f", "author": {"user": {"login": "baldersheim", "name": "Henning Baldersheim"}}, "url": "https://github.com/vespa-engine/vespa/commit/c9b92a456b0dd9980dfa17806b4f0948be60002f", "committedDate": "2020-01-17T09:59:48Z", "message": "GC unused code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5eaae9afb93ad82a931e117a14babdbb271762c6", "author": {"user": {"login": "baldersheim", "name": "Henning Baldersheim"}}, "url": "https://github.com/vespa-engine/vespa/commit/5eaae9afb93ad82a931e117a14babdbb271762c6", "committedDate": "2020-01-17T12:30:07Z", "message": "Simplify as functionality is abandoned."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ0NTc5MTcw", "url": "https://github.com/vespa-engine/vespa/pull/11822#pullrequestreview-344579170", "createdAt": "2020-01-17T13:34:07Z", "commit": {"oid": "d3cf455cba32ef3f5280634470858e80761d8450"}, "state": "COMMENTED", "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xN1QxMzozNDowN1rOFe5EmA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xN1QxNDoyODo1MVrOFe6omQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzkzNjY2NA==", "bodyText": "Could consider wrapping the \"deserialize document from working byte buffer\" case in its own utility method to avoid duplication", "url": "https://github.com/vespa-engine/vespa/pull/11822#discussion_r367936664", "createdAt": "2020-01-17T13:34:07Z", "author": {"login": "vekterli"}, "path": "documentapi/src/vespa/documentapi/messagebus/routablefactories60.cpp", "diffHunk": "@@ -540,7 +542,9 @@ RoutableFactories60::MapVisitorReplyFactory::doEncode(const DocumentReply &, ves\n \n void\n RoutableFactories60::PutDocumentMessageFactory::decodeInto(PutDocumentMessage & msg, document::ByteBuffer & buf) const {\n-    msg.setDocument(make_shared<document::Document>(_repo, buf));\n+    vespalib::nbostream stream(buf.getBufferAtPos(), buf.getRemaining());\n+    msg.setDocument(make_shared<document::Document>(_repo, stream));\n+    buf.incPos(buf.getRemaining() - stream.size());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d3cf455cba32ef3f5280634470858e80761d8450"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Nzk0MjcwOQ==", "bodyText": "Nit: missing whitespace after comma", "url": "https://github.com/vespa-engine/vespa/pull/11822#discussion_r367942709", "createdAt": "2020-01-17T13:47:50Z", "author": {"login": "vekterli"}, "path": "document/src/vespa/document/fieldvalue/serializablearray.cpp", "diffHunk": "@@ -34,6 +34,22 @@ SerializableArray::SerializableArray()\n {\n }\n \n+SerializableArray::SerializableArray(EntryMap entries, ByteBuffer::UP buffer,\n+                                     CompressionConfig::Type comp_type,uint32_t uncompressed_length)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b1bc742e8ac18dd41ea8f19919005257fbfa277b"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Nzk0ODA1Mw==", "bodyText": "I'm not sure about testing the size of STL types, as these are implementation defined. Though I suppose we already transitively depend on these since we're checking the sizes of more complex types that include STL types in them...\nCould also make these static_assert instead to catch at compile time, since they don't depend on any runtime info.", "url": "https://github.com/vespa-engine/vespa/pull/11822#discussion_r367948053", "createdAt": "2020-01-17T13:59:38Z", "author": {"login": "vekterli"}, "path": "document/src/tests/documenttestcase.cpp", "diffHunk": "@@ -28,10 +30,15 @@ using namespace fieldvalue;\n \n TEST(DocumentTest, testSizeOf)\n {\n+    EXPECT_EQ(24u, sizeof(std::vector<char>));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d092c8e45fe74f0fe7808a6d4fa363fb0a009181"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Nzk0OTkxNg==", "bodyText": "Since this changes the behavior from using chunk 1 to chunk 0 in the case of (legacy) 2 chunks, I presume we rather want to put it into the \"header\" chunk anyway?", "url": "https://github.com/vespa-engine/vespa/pull/11822#discussion_r367949916", "createdAt": "2020-01-17T14:03:42Z", "author": {"login": "vekterli"}, "path": "document/src/vespa/document/fieldvalue/structfieldvalue.cpp", "diffHunk": "@@ -262,7 +261,7 @@ StructFieldValue::setFieldValue(const Field& field, FieldValue::UP value)\n         _chunks.push_back(std::make_unique<SerializableArray>());\n     }\n \n-    _chunks.back().set(fieldId, std::move(serialized));\n+    _chunks[0].set(fieldId, std::move(serialized));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d092c8e45fe74f0fe7808a6d4fa363fb0a009181"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Nzk1OTg2NA==", "bodyText": "Consider updating comment to reflect new semantics", "url": "https://github.com/vespa-engine/vespa/pull/11822#discussion_r367959864", "createdAt": "2020-01-17T14:24:10Z", "author": {"login": "vekterli"}, "path": "document/src/vespa/document/util/bytebuffer.h", "diffHunk": "@@ -93,14 +73,11 @@ class ByteBuffer\n     /** @return Returns the index of the current position in the buffer. */\n     size_t getPos() const { return _pos; }\n \n-    /** @return Returns the limit. */\n-    size_t getLimit() const { return _limit; }\n-\n     /**\n      * @return Returns the number of bytes remaining in the buffer - that is,\n      *         getLimit()-getPos().\n     */\n-    size_t getRemaining() const { return _limit-_pos; }\n+    size_t getRemaining() const { return _len -_pos; }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5eaae9afb93ad82a931e117a14babdbb271762c6"}, "originalPosition": 50}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Nzk2MTM2OQ==", "bodyText": "Since getRemaining now has different semantics than it used to, is there any other code that might be expecting the old behavior and may now change in subtle ways?", "url": "https://github.com/vespa-engine/vespa/pull/11822#discussion_r367961369", "createdAt": "2020-01-17T14:27:04Z", "author": {"login": "vekterli"}, "path": "document/src/tests/testbytebuffer.cpp", "diffHunk": "@@ -136,251 +53,248 @@ TEST(ByteBuffer_Test, test_copy_constructor)\n \n TEST(ByteBuffer_Test, test_putGetFlip)\n {\n-    ByteBuffer* newBuf=new ByteBuffer(100);\n+    ByteBuffer newBuf(100);\n \n     try {\n-        newBuf->putInt(10);\n+        newBuf.putInt(10);\n         int test;\n-        newBuf->flip();\n+        newBuf.flip();\n \n-        newBuf->getInt(test);\n-        EXPECT_TRUE(test==10);\n+        newBuf.getInt(test);\n+        EXPECT_EQ(test, 10);\n \n-        newBuf->clear();\n-        newBuf->putDouble(3.35);\n-        newBuf->flip();\n-        EXPECT_TRUE(newBuf->getRemaining()==sizeof(double));\n+        newBuf.clear();\n+        newBuf.putDouble(3.35);\n+        newBuf.flip();\n+        EXPECT_EQ(newBuf.getRemaining(), 100);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5eaae9afb93ad82a931e117a14babdbb271762c6"}, "originalPosition": 131}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Nzk2MjI2NQ==", "bodyText": "Consider updating comment to reflect new semantics", "url": "https://github.com/vespa-engine/vespa/pull/11822#discussion_r367962265", "createdAt": "2020-01-17T14:28:51Z", "author": {"login": "vekterli"}, "path": "document/src/vespa/document/util/bytebuffer.h", "diffHunk": "@@ -134,17 +100,13 @@ class ByteBuffer\n \n     void incPosNoCheck(size_t pos) {\n         _pos += pos;\n-#ifdef __FORCE_VALGRIND_ON_SERIALIZE__\n-        forceValgrindStart2Pos();\n-#endif\n     }\n \n     /**\n      * Resets pos to 0, and sets limit to old pos. Use this before reading\n      * from a buffer you have written to\n      */\n     void flip() {\n-        _limit = _pos;\n         _pos = 0;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5eaae9afb93ad82a931e117a14babdbb271762c6"}, "originalPosition": 87}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1d3fe1bedb648cfd497eeee61478fa45f332255b", "author": {"user": {"login": "baldersheim", "name": "Henning Baldersheim"}}, "url": "https://github.com/vespa-engine/vespa/commit/1d3fe1bedb648cfd497eeee61478fa45f332255b", "committedDate": "2020-01-20T13:04:49Z", "message": "GC a load of unused code. ByteBuffer towards read only."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1f9cb926b91659840e687f9cab0f508522d58690", "author": {"user": {"login": "baldersheim", "name": "Henning Baldersheim"}}, "url": "https://github.com/vespa-engine/vespa/commit/1f9cb926b91659840e687f9cab0f508522d58690", "committedDate": "2020-01-20T15:50:01Z", "message": "Make it known that getting serialized size will always be expensive."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "543360cbd31917ab0ba71bed0e89ee7b4b1b359c", "author": {"user": {"login": "baldersheim", "name": "Henning Baldersheim"}}, "url": "https://github.com/vespa-engine/vespa/commit/543360cbd31917ab0ba71bed0e89ee7b4b1b359c", "committedDate": "2020-01-20T16:24:24Z", "message": "Make length const."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ce14cf6fb4d97902205107968ed0455784a3a3e7", "author": {"user": {"login": "baldersheim", "name": "Henning Baldersheim"}}, "url": "https://github.com/vespa-engine/vespa/commit/ce14cf6fb4d97902205107968ed0455784a3a3e7", "committedDate": "2020-01-20T16:37:17Z", "message": "32bit size is more than enough here."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cc1be38ff2d4328dd6a0ca0e633b7ecafeee30c6", "author": {"user": {"login": "baldersheim", "name": "Henning Baldersheim"}}, "url": "https://github.com/vespa-engine/vespa/commit/cc1be38ff2d4328dd6a0ca0e633b7ecafeee30c6", "committedDate": "2020-01-20T16:54:19Z", "message": "Update comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9a43c6a6228ead44bd6a5ad27a578adc53a207ab", "author": {"user": {"login": "baldersheim", "name": "Henning Baldersheim"}}, "url": "https://github.com/vespa-engine/vespa/commit/9a43c6a6228ead44bd6a5ad27a578adc53a207ab", "committedDate": "2020-01-20T17:06:27Z", "message": "GC unused constructor"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bafbb6423c7b628fce955c8ae2136e2b1be761ef", "author": {"user": {"login": "baldersheim", "name": "Henning Baldersheim"}}, "url": "https://github.com/vespa-engine/vespa/commit/bafbb6423c7b628fce955c8ae2136e2b1be761ef", "committedDate": "2020-01-20T17:20:08Z", "message": "GC unused code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d47460a83e0cc3938ccc69327f433f110a6cf2da", "author": {"user": {"login": "baldersheim", "name": "Henning Baldersheim"}}, "url": "https://github.com/vespa-engine/vespa/commit/d47460a83e0cc3938ccc69327f433f110a6cf2da", "committedDate": "2020-01-20T17:22:30Z", "message": "Fix typo"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d6a77cbf0cf342f2091c9c92c58ace6ed4951b89", "author": {"user": {"login": "baldersheim", "name": "Henning Baldersheim"}}, "url": "https://github.com/vespa-engine/vespa/commit/d6a77cbf0cf342f2091c9c92c58ace6ed4951b89", "committedDate": "2020-01-20T17:29:16Z", "message": "Add TODO for next commit."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "da91b7fd521edc6b00498247c91a58a3d8c132b5", "author": {"user": {"login": "baldersheim", "name": "Henning Baldersheim"}}, "url": "https://github.com/vespa-engine/vespa/commit/da91b7fd521edc6b00498247c91a58a3d8c132b5", "committedDate": "2020-01-21T06:03:39Z", "message": "Unify and factor out common code."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ1ODk3OTI0", "url": "https://github.com/vespa-engine/vespa/pull/11822#pullrequestreview-345897924", "createdAt": "2020-01-21T14:02:10Z", "commit": {"oid": "da91b7fd521edc6b00498247c91a58a3d8c132b5"}, "state": "APPROVED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQxNDowMjoxMVrOFf7Abw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQxNjozMzo0NlrOFgAqRw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTAxNjk0Mw==", "bodyText": "Consider adding a data() function to nbostream, since c_str() implies a zero-terminated C string (I don't think we guarantee zero termination of nbostream buffers?)", "url": "https://github.com/vespa-engine/vespa/pull/11822#discussion_r369016943", "createdAt": "2020-01-21T14:02:11Z", "author": {"login": "vekterli"}, "path": "document/src/tests/documentupdatetestcase.cpp", "diffHunk": "@@ -83,25 +82,25 @@ void testRoundtripSerialize(const UpdateType& update, const DataType &type) {\n }\n \n void\n-writeBufferToFile(const ByteBuffer &buf, const vespalib::string &fileName)\n+writeBufferToFile(const nbostream &buf, const vespalib::string &fileName)\n {\n     auto file = std::fstream(fileName, std::ios::out | std::ios::binary);\n-    file.write(buf.getBuffer(), buf.getPos());\n+    file.write(buf.c_str(), buf.size());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "da91b7fd521edc6b00498247c91a58a3d8c132b5"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTAzMTE2Mg==", "bodyText": "As a bit of an aside, what is the rationale behind us zero-terminating ByteBuffers during copy construction? I'm not sure if this is an invariant we maintain when constructing ByteBuffers from raw buffers. Seems like if we e.g. try to alloc page-aligned sizes, this behavior will cause copied allocs to use one more page than intended from the one added byte.", "url": "https://github.com/vespa-engine/vespa/pull/11822#discussion_r369031162", "createdAt": "2020-01-21T14:27:11Z", "author": {"login": "vekterli"}, "path": "document/src/vespa/document/util/bytebuffer.cpp", "diffHunk": "@@ -65,21 +84,17 @@ ByteBuffer::ByteBuffer(const ByteBuffer& rhs) :\n       _ownedBuffer()\n {\n     if (rhs._len > 0 && rhs._buffer) {\n-        Alloc::alloc(rhs._len + 1).swap(_ownedBuffer);\n-        _buffer = static_cast<char *>(_ownedBuffer.get());\n-        memcpy(_buffer, rhs._buffer, rhs._len);\n-        _buffer[rhs._len] = 0;\n+        Alloc buf = Alloc::alloc(rhs._len + 1);\n+        memcpy(buf.get(), rhs._buffer, rhs._len);\n+        static_cast<char *>(buf.get())[rhs._len] = 0;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "da91b7fd521edc6b00498247c91a58a3d8c132b5"}, "originalPosition": 90}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTAzNTQ2Mg==", "bodyText": "Consider replacing these reinterpret_casts with memcpy instead for happier days with less casts", "url": "https://github.com/vespa-engine/vespa/pull/11822#discussion_r369035462", "createdAt": "2020-01-21T14:34:32Z", "author": {"login": "vekterli"}, "path": "document/src/vespa/document/util/bytebuffer.cpp", "diffHunk": "@@ -132,309 +128,44 @@ void ByteBuffer::getNumericNetwork(int16_t & v) {\n     if (__builtin_expect(getRemaining() < sizeof(v), 0)) {\n         throwOutOfBounds(getRemaining(), sizeof(v));\n     } else {\n-        uint16_t val = *(uint16_t *) (void *) getBufferAtPos();\n+        uint16_t val = *reinterpret_cast<const uint16_t *>(getBufferAtPos());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "da91b7fd521edc6b00498247c91a58a3d8c132b5"}, "originalPosition": 150}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTEwOTU3NQ==", "bodyText": "Consider adding explicit operator<< for ReturnCode; it is used in many unit test macros so having it ostreamable makes \"expectation vs. reality\" printing much better.\nThis would also remove need to add toString() calls in a lot of the result printing functions.", "url": "https://github.com/vespa-engine/vespa/pull/11822#discussion_r369109575", "createdAt": "2020-01-21T16:33:46Z", "author": {"login": "vekterli"}, "path": "storageapi/src/vespa/storageapi/messageapi/returncode.h", "diffHunk": "@@ -121,8 +102,7 @@ class ReturnCode : public document::Deserializable,\n     bool isShutdownRelated() const;\n     bool isBucketDisappearance() const;\n     bool isNonCriticalForIntegrityChecker() const;\n+    vespalib::string toString() const;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "da91b7fd521edc6b00498247c91a58a3d8c132b5"}, "originalPosition": 59}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "28e18ba48168b6ea3ca09164c647c96fe261a74a", "author": {"user": {"login": "baldersheim", "name": "Henning Baldersheim"}}, "url": "https://github.com/vespa-engine/vespa/commit/28e18ba48168b6ea3ca09164c647c96fe261a74a", "committedDate": "2020-01-21T19:09:50Z", "message": "c_str -> data"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e7c1a4fc8c55795f707e83ce6d5607e0b41f5099", "author": {"user": {"login": "baldersheim", "name": "Henning Baldersheim"}}, "url": "https://github.com/vespa-engine/vespa/commit/e7c1a4fc8c55795f707e83ce6d5607e0b41f5099", "committedDate": "2020-01-21T19:41:33Z", "message": "Add stream method and use memcpy over casting."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aa0bfb11d05381a555c197a2ab26ee117c0758e6", "author": {"user": {"login": "baldersheim", "name": "Henning Baldersheim"}}, "url": "https://github.com/vespa-engine/vespa/commit/aa0bfb11d05381a555c197a2ab26ee117c0758e6", "committedDate": "2020-01-21T19:47:36Z", "message": "Remove zero termination."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4041, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}