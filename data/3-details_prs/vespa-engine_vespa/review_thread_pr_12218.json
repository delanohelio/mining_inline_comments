{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc2MDk4MjQ0", "number": 12218, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xN1QxMjoyNTo1MFrODgX0Xg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xN1QxMzoxOToxOVrODgYwbg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM1MjcxMjYyOnYy", "diffSide": "RIGHT", "path": "controller-api/src/main/java/com/yahoo/vespa/hosted/controller/api/role/PathGroup.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xN1QxMjoyNTo1MFrOFqisMw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xN1QxMjoyNzoxMFrOFqiuhQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDE1Mjg4Mw==", "bodyText": "Seems to me everything under /status/ is GET, and could lie here, with .../{tenant}/{*}.", "url": "https://github.com/vespa-engine/vespa/pull/12218#discussion_r380152883", "createdAt": "2020-02-17T12:25:50Z", "author": {"login": "jonmv"}, "path": "controller-api/src/main/java/com/yahoo/vespa/hosted/controller/api/role/PathGroup.java", "diffHunk": "@@ -53,7 +55,8 @@\n                Optional.of(\"/api\"),\n                \"/application/v4/tenant/{tenant}/application/\",\n                \"/application/v4/tenant/{tenant}/cost\",\n-               \"/application/v4/tenant/{tenant}/cost/{date}\"),\n+               \"/application/v4/tenant/{tenant}/cost/{date}\",\n+               \"/routing/v1/status/tenant/{tenant}\"),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e06a00c19a1340ea5efbc7d0e05a114fac4ac8cc"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDE1MzQ3Nw==", "bodyText": "Thanks!", "url": "https://github.com/vespa-engine/vespa/pull/12218#discussion_r380153477", "createdAt": "2020-02-17T12:27:10Z", "author": {"login": "mpolden"}, "path": "controller-api/src/main/java/com/yahoo/vespa/hosted/controller/api/role/PathGroup.java", "diffHunk": "@@ -53,7 +55,8 @@\n                Optional.of(\"/api\"),\n                \"/application/v4/tenant/{tenant}/application/\",\n                \"/application/v4/tenant/{tenant}/cost\",\n-               \"/application/v4/tenant/{tenant}/cost/{date}\"),\n+               \"/application/v4/tenant/{tenant}/cost/{date}\",\n+               \"/routing/v1/status/tenant/{tenant}\"),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDE1Mjg4Mw=="}, "originalCommit": {"oid": "e06a00c19a1340ea5efbc7d0e05a114fac4ac8cc"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM1Mjg2NjM4OnYy", "diffSide": "RIGHT", "path": "controller-api/src/main/java/com/yahoo/vespa/hosted/controller/api/role/PathGroup.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xN1QxMzoxOToxOVrOFqkJBg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xN1QxMzo1MDo0NFrOFqlHTg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDE3NjY0Ng==", "bodyText": "Ah, there was one /inactive/ as well? So I guess this is to allow application owners to manipulate endpoint status? The athenzTenantAdmin does not cover this group \u2014\u00a0it was split out specifically for the legacy pipeline. Putting this under the applicationInfo should work for both sets of roles (Athenz and otherwise).", "url": "https://github.com/vespa-engine/vespa/pull/12218#discussion_r380176646", "createdAt": "2020-02-17T13:19:19Z", "author": {"login": "jonmv"}, "path": "controller-api/src/main/java/com/yahoo/vespa/hosted/controller/api/role/PathGroup.java", "diffHunk": "@@ -153,7 +156,8 @@\n                          \"/application/v4/tenant/{tenant}/application/{application}/environment/test/region/{region}/instance/{ignored}\",\n                          \"/application/v4/tenant/{tenant}/application/{application}/environment/test/region/{region}/instance/{ignored}/deploy\",\n                          \"/application/v4/tenant/{tenant}/application/{application}/environment/staging/region/{region}/instance/{ignored}\",\n-                         \"/application/v4/tenant/{tenant}/application/{application}/environment/staging/region/{region}/instance/{ignored}/deploy\"),\n+                         \"/application/v4/tenant/{tenant}/application/{application}/environment/staging/region/{region}/instance/{ignored}/deploy\",\n+                         \"/routing/v1/inactive/tenant/{tenant}/application/{application}/instance/{ignored}/environment/prod/region/{region}\"),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "40e429feef528c3203b0f23c0ed3d59e0906a55a"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDE4NTgwNg==", "bodyText": "Done. There's too many groups!", "url": "https://github.com/vespa-engine/vespa/pull/12218#discussion_r380185806", "createdAt": "2020-02-17T13:38:00Z", "author": {"login": "mpolden"}, "path": "controller-api/src/main/java/com/yahoo/vespa/hosted/controller/api/role/PathGroup.java", "diffHunk": "@@ -153,7 +156,8 @@\n                          \"/application/v4/tenant/{tenant}/application/{application}/environment/test/region/{region}/instance/{ignored}\",\n                          \"/application/v4/tenant/{tenant}/application/{application}/environment/test/region/{region}/instance/{ignored}/deploy\",\n                          \"/application/v4/tenant/{tenant}/application/{application}/environment/staging/region/{region}/instance/{ignored}\",\n-                         \"/application/v4/tenant/{tenant}/application/{application}/environment/staging/region/{region}/instance/{ignored}/deploy\"),\n+                         \"/application/v4/tenant/{tenant}/application/{application}/environment/staging/region/{region}/instance/{ignored}/deploy\",\n+                         \"/routing/v1/inactive/tenant/{tenant}/application/{application}/instance/{ignored}/environment/prod/region/{region}\"),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDE3NjY0Ng=="}, "originalCommit": {"oid": "40e429feef528c3203b0f23c0ed3d59e0906a55a"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDE5MjU5MA==", "bodyText": "Yes, should be able to remove some already now.", "url": "https://github.com/vespa-engine/vespa/pull/12218#discussion_r380192590", "createdAt": "2020-02-17T13:50:44Z", "author": {"login": "jonmv"}, "path": "controller-api/src/main/java/com/yahoo/vespa/hosted/controller/api/role/PathGroup.java", "diffHunk": "@@ -153,7 +156,8 @@\n                          \"/application/v4/tenant/{tenant}/application/{application}/environment/test/region/{region}/instance/{ignored}\",\n                          \"/application/v4/tenant/{tenant}/application/{application}/environment/test/region/{region}/instance/{ignored}/deploy\",\n                          \"/application/v4/tenant/{tenant}/application/{application}/environment/staging/region/{region}/instance/{ignored}\",\n-                         \"/application/v4/tenant/{tenant}/application/{application}/environment/staging/region/{region}/instance/{ignored}/deploy\"),\n+                         \"/application/v4/tenant/{tenant}/application/{application}/environment/staging/region/{region}/instance/{ignored}/deploy\",\n+                         \"/routing/v1/inactive/tenant/{tenant}/application/{application}/instance/{ignored}/environment/prod/region/{region}\"),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDE3NjY0Ng=="}, "originalCommit": {"oid": "40e429feef528c3203b0f23c0ed3d59e0906a55a"}, "originalPosition": 27}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2402, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}