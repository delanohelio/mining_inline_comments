{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMwODQ0OTY5", "number": 13501, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQxMDo0OToxNlrOEDZHcA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQxMDo0OToxNlrOEDZHcA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcxOTkyNjg4OnYy", "diffSide": "RIGHT", "path": "searchlib/src/vespa/searchlib/queryeval/nearest_neighbor_blueprint.cpp", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQxMDo0OToxNlrOGgYh9g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQxMDo0OToxNlrOGgYh9g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjYwOTUyNg==", "bodyText": "Until we have data on performance tests, perhaps we should not do fallback to brute force. That will make it harder to interpret the results.", "url": "https://github.com/vespa-engine/vespa/pull/13501#discussion_r436609526", "createdAt": "2020-06-08T10:49:16Z", "author": {"login": "geirst"}, "path": "searchlib/src/vespa/searchlib/queryeval/nearest_neighbor_blueprint.cpp", "diffHunk": "@@ -84,10 +87,15 @@ NearestNeighborBlueprint::set_global_filter(const GlobalFilter &global_filter)\n {\n     _global_filter = global_filter.shared_from_this();\n     auto nns_index = _attr_tensor.nearest_neighbor_index();\n+    LOG(debug, \"set_global_filter with: %s / %s / %s\",\n+        (_approximate ? \"approximate\" : \"exact\"),\n+        (nns_index ? \"nns_index\" : \"no_index\"),\n+        (_global_filter->has_filter() ? \"has_filter\" : \"no_filter\"));\n     if (_approximate && nns_index) {\n         uint32_t est_hits = _attr_tensor.getNumDocs();\n         if (_global_filter->has_filter()) {\n             uint32_t max_hits = _global_filter->filter()->countTrueBits();\n+            LOG(debug, \"set_global_filter getNumDocs: %u / max_hits %u\", est_hits, max_hits);\n             if (max_hits * 10 < est_hits) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "54a23d2bc9a05eb7d503d5be5cbe5e757eea571e"}, "originalPosition": 23}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1997, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}