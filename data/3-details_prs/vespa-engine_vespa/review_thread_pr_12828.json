{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk4NjM1OTU4", "number": 12828, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQwODo0NTowMVrODvBudA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQwODo0ODo0M1rODvBz3A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwNjM3OTQwOnYy", "diffSide": "RIGHT", "path": "staging_vespalib/src/vespa/vespalib/util/singleexecutor.cpp", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQwODo0NTowMVrOGBNkqQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQwODo0NTowMVrOGBNkqQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzkyNDEzNw==", "bodyText": "What is the end effect if wp < _watermark and this expression underflows?", "url": "https://github.com/vespa-engine/vespa/pull/12828#discussion_r403924137", "createdAt": "2020-04-06T08:45:01Z", "author": {"login": "vekterli"}, "path": "staging_vespalib/src/vespa/vespalib/util/singleexecutor.cpp", "diffHunk": "@@ -144,7 +151,7 @@ SingleExecutor::wait_for_room(Lock & lock) {\n     }\n     _queueSize.add(numTasks());\n     while (numTasks() >= _taskLimit.load(std::memory_order_relaxed)) {\n-        sleepProducer(lock, 10ms, wp - taskLimit/4);\n+        sleepProducer(lock, _napTime, wp - _watermark);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a8043a2e3edb544442961e3947c466e6d45ad716"}, "originalPosition": 43}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwNjM5MzI0OnYy", "diffSide": "RIGHT", "path": "staging_vespalib/src/vespa/vespalib/util/singleexecutor.cpp", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQwODo0ODo0M1rOGBNtiQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQwODo0ODo0M1rOGBNtiQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzkyNjQwOQ==", "bodyText": "Intentional to change default watermark from /4 to /10?", "url": "https://github.com/vespa-engine/vespa/pull/12828#discussion_r403926409", "createdAt": "2020-04-06T08:48:43Z", "author": {"login": "vekterli"}, "path": "staging_vespalib/src/vespa/vespalib/util/singleexecutor.cpp", "diffHunk": "@@ -6,6 +6,10 @@\n namespace vespalib {\n \n SingleExecutor::SingleExecutor(uint32_t taskLimit)\n+    : SingleExecutor(taskLimit, taskLimit/10, 5ms)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a8043a2e3edb544442961e3947c466e6d45ad716"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1801, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}