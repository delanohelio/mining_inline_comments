{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzczMTA5ODIx", "number": 12135, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMVQwODo0OToxOVrODeuLjw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMVQwODo0OToxOVrODeuLjw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMzNTQwNDk1OnYy", "diffSide": "RIGHT", "path": "searchlib/src/vespa/searchlib/tensor/distance_functions.h", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMVQwODo0OToxOVrOFoA3oQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMVQxMTo0NjowOVrOFoGBgg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzUwMTYwMQ==", "bodyText": "i don't see that you should need \"template\" here...", "url": "https://github.com/vespa-engine/vespa/pull/12135#discussion_r377501601", "createdAt": "2020-02-11T08:49:19Z", "author": {"login": "arnej27959"}, "path": "searchlib/src/vespa/searchlib/tensor/distance_functions.h", "diffHunk": "@@ -0,0 +1,34 @@\n+// Copyright 2020 Oath Inc. Licensed under the terms of the Apache 2.0 license. See LICENSE in the project root.\n+\n+#pragma once\n+\n+#include \"distance_function.h\"\n+\n+namespace search::tensor {\n+\n+// TODO: Make distance functions hardware optimized.\n+\n+/**\n+ * Calculates the square of the standard Euclidean distance.\n+ */\n+template <typename FloatType>\n+class SquaredEuclideanDistance : public DistanceFunction {\n+public:\n+    double calc(const vespalib::tensor::TypedCells& lhs, const vespalib::tensor::TypedCells& rhs) const override {\n+        auto lhs_vector = lhs.template typify<FloatType>();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b9e867c4a20e9aa340dbdb110066083ebcc2a619"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzU4NjA1MA==", "bodyText": "You are right. It was (somehow) needed when this was done inside the templated HnswIndex class, but not here. Fixed.", "url": "https://github.com/vespa-engine/vespa/pull/12135#discussion_r377586050", "createdAt": "2020-02-11T11:46:09Z", "author": {"login": "geirst"}, "path": "searchlib/src/vespa/searchlib/tensor/distance_functions.h", "diffHunk": "@@ -0,0 +1,34 @@\n+// Copyright 2020 Oath Inc. Licensed under the terms of the Apache 2.0 license. See LICENSE in the project root.\n+\n+#pragma once\n+\n+#include \"distance_function.h\"\n+\n+namespace search::tensor {\n+\n+// TODO: Make distance functions hardware optimized.\n+\n+/**\n+ * Calculates the square of the standard Euclidean distance.\n+ */\n+template <typename FloatType>\n+class SquaredEuclideanDistance : public DistanceFunction {\n+public:\n+    double calc(const vespalib::tensor::TypedCells& lhs, const vespalib::tensor::TypedCells& rhs) const override {\n+        auto lhs_vector = lhs.template typify<FloatType>();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzUwMTYwMQ=="}, "originalCommit": {"oid": "b9e867c4a20e9aa340dbdb110066083ebcc2a619"}, "originalPosition": 18}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2467, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}