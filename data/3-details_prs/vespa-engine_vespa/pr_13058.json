{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA4NTU4NzEy", "number": 13058, "title": "Ignore hnsw index attribute save file if major parameters are changed.", "bodyText": "@geirst : please review\n@arnej27959 : FYI", "createdAt": "2020-04-24T13:41:42Z", "url": "https://github.com/vespa-engine/vespa/pull/13058", "merged": true, "mergeCommit": {"oid": "7e7eb8cdcd4cc384a01e80c3dc860fb1cddfa613"}, "closed": true, "closedAt": "2020-04-27T11:03:40Z", "author": {"login": "toregge"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcaxojCgH2gAyNDA4NTU4NzEyOmMwOTY3NWE0MTc2ODY0MmQzNzM5MGMwMGNiMDVlY2ZjNTMzY2E1ZDE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcbtOYAAFqTQwMDg0NjMwNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c09675a41768642d37390c00cb05ecfc533ca5d1", "author": {"user": null}, "url": "https://github.com/vespa-engine/vespa/commit/c09675a41768642d37390c00cb05ecfc533ca5d1", "committedDate": "2020-04-24T13:37:45Z", "message": "Ignore hnsw index attribute save file if major parameters are changed."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAwNjY5NTYx", "url": "https://github.com/vespa-engine/vespa/pull/13058#pullrequestreview-400669561", "createdAt": "2020-04-27T06:53:00Z", "commit": {"oid": "c09675a41768642d37390c00cb05ecfc533ca5d1"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QwNjo1MzowMFrOGMTgXA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QwNjo1MzowMFrOGMTgXA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTU1NTY3Ng==", "bodyText": "neightbor -> neighbor", "url": "https://github.com/vespa-engine/vespa/pull/13058#discussion_r415555676", "createdAt": "2020-04-27T06:53:00Z", "author": {"login": "geirst"}, "path": "searchlib/src/tests/attribute/tensorattribute/tensorattribute_test.cpp", "diffHunk": "@@ -689,5 +730,36 @@ TEST_F(\"onLoad() reconstructs nearest neighbor index if save file does not exist\n     index.expect_adds({{1, {3, 5}}, {2, {7, 9}}});\n }\n \n+TEST_F(\"onLoads() ignores saved nearest neighbor index if not enabled in config\", DenseTensorAttributeMockIndex)\n+{\n+    f.save_example_tensors_with_mock_index();\n+    f.disable_hnsw_index();\n+    f.load();\n+    f.assert_example_tensors();\n+    EXPECT_EQUAL(f.as_dense_tensor().nearest_neighbor_index(), nullptr);\n+}\n+\n+TEST_F(\"onLoad() ignores saved nearest neightbor index if major index parameters are changed\", DenseTensorAttributeMockIndex)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c09675a41768642d37390c00cb05ecfc533ca5d1"}, "originalPosition": 139}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dc92064fec43ee5e60df086061c49149a398383c", "author": {"user": null}, "url": "https://github.com/vespa-engine/vespa/commit/dc92064fec43ee5e60df086061c49149a398383c", "committedDate": "2020-04-27T07:50:36Z", "message": "Fix typos in test descriptions."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAwODQ2MzA2", "url": "https://github.com/vespa-engine/vespa/pull/13058#pullrequestreview-400846306", "createdAt": "2020-04-27T11:03:28Z", "commit": {"oid": "dc92064fec43ee5e60df086061c49149a398383c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3259, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}