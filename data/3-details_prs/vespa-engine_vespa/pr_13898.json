{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ5NTQ3NTQ1", "number": 13898, "title": "Load platform bundles separately", "bodyText": "FYI: @baldersheim\nThere is still some cleanup that can be left to a future PR.\nThe bundles.def file will be removed after its use has rolled out of hosted Vespa.", "createdAt": "2020-07-15T15:12:06Z", "url": "https://github.com/vespa-engine/vespa/pull/13898", "merged": true, "mergeCommit": {"oid": "14c65de9b6b0d7a5dac17aa96109e125c14762b5"}, "closed": true, "closedAt": "2020-07-15T23:27:07Z", "author": {"login": "gjoranv"}, "timelineItems": {"totalCount": 17, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc06p5YAH2gAyNDQ5NTQ3NTQ1OjE2OTIxNmFlYzhhNTk0ZTFlNThlODUwMmU2MjJhYzlkNTMzN2ZhZDA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc1N1WBABqjM1NDk1MDQ2NDc=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "169216aec8a594e1e58e8502e622ac9d5337fad0", "author": {"user": {"login": "gjoranv", "name": null}}, "url": "https://github.com/vespa-engine/vespa/commit/169216aec8a594e1e58e8502e622ac9d5337fad0", "committedDate": "2020-07-14T18:50:24Z", "message": "Simplify BundleManager so that it only handles app bundles.\n\n- Fail if an app bundle tries to pre-install other bundles."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dfef0283d7293cdc6a206e7e56def1d8a60d194f", "author": {"user": {"login": "gjoranv", "name": null}}, "url": "https://github.com/vespa-engine/vespa/commit/dfef0283d7293cdc6a206e7e56def1d8a60d194f", "committedDate": "2020-07-14T18:50:24Z", "message": "Remove the now unused getInitialBundles method."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f832e4330d5452e228659d7d2b55cf992e6550d0", "author": {"user": {"login": "gjoranv", "name": null}}, "url": "https://github.com/vespa-engine/vespa/commit/f832e4330d5452e228659d7d2b55cf992e6550d0", "committedDate": "2020-07-14T18:50:24Z", "message": "Split bundles.def into platform-bundles and application-bundles\n\n- The new configs are only generated, but not used."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "72eb7a8938f60b6c3c7a562673514414bcb1b106", "author": {"user": {"login": "gjoranv", "name": null}}, "url": "https://github.com/vespa-engine/vespa/commit/72eb7a8938f60b6c3c7a562673514414bcb1b106", "committedDate": "2020-07-15T10:51:54Z", "message": "Separate installation for platform and application bundles."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1da1e3b3a9189e4fdff2ecd1b96210818896f3cc", "author": {"user": {"login": "gjoranv", "name": null}}, "url": "https://github.com/vespa-engine/vespa/commit/1da1e3b3a9189e4fdff2ecd1b96210818896f3cc", "committedDate": "2020-07-15T10:52:19Z", "message": "Don't throw when using a test osgi framework\n\n- ClassloaderOsgiFramework returns all installed bundles upon\n  each call to install()."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ec07ab582af461c92fbc5abd127d1e7cc15e37d5", "author": {"user": {"login": "gjoranv", "name": null}}, "url": "https://github.com/vespa-engine/vespa/commit/ec07ab582af461c92fbc5abd127d1e7cc15e37d5", "committedDate": "2020-07-15T14:05:16Z", "message": "Rename useBundles -> useApplicationBundles"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d6240973ff085f3f954d62989d2cabf3f61537fe", "author": {"user": {"login": "gjoranv", "name": null}}, "url": "https://github.com/vespa-engine/vespa/commit/d6240973ff085f3f954d62989d2cabf3f61537fe", "committedDate": "2020-07-15T15:02:31Z", "message": "Remove unused PredicateSplit class"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ad6940f52cf0c575e7c540653197170dd6d7591c", "author": {"user": {"login": "gjoranv", "name": null}}, "url": "https://github.com/vespa-engine/vespa/commit/ad6940f52cf0c575e7c540653197170dd6d7591c", "committedDate": "2020-07-15T15:02:31Z", "message": "Add author, no functional changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "893dda577f52157274357da58f93e9e8580f417f", "author": {"user": {"login": "gjoranv", "name": null}}, "url": "https://github.com/vespa-engine/vespa/commit/893dda577f52157274357da58f93e9e8580f417f", "committedDate": "2020-07-15T15:02:31Z", "message": "Remove all usage of BundleConfig and bundles.cfg test files.\n\n- The latter were not even used by the tests.\n- The bundles.def file itself will be removed when the last\n  model using it has rolled out of hosted Vespa."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "94119fc8757bc5b8bf45be79bc9dde7b81b8d73a", "author": {"user": {"login": "gjoranv", "name": null}}, "url": "https://github.com/vespa-engine/vespa/commit/94119fc8757bc5b8bf45be79bc9dde7b81b8d73a", "committedDate": "2020-07-15T15:05:02Z", "message": "Rename bundle loader classes and fields for consistency.\n\n* BundleManager -> ApplicationBundleLoader\n* PlatformBundleInstaller -> PlatformBundleLoader"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "afa5a29be7d8416b8186d1f2045b379dd592f5ad", "author": {"user": {"login": "gjoranv", "name": null}}, "url": "https://github.com/vespa-engine/vespa/commit/afa5a29be7d8416b8186d1f2045b379dd592f5ad", "committedDate": "2020-07-15T15:08:02Z", "message": "Add comment about platform bundles."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "224e5599dad0f67b1fb3c88d36e6321bccc8ac6a", "author": {"user": {"login": "gjoranv", "name": null}}, "url": "https://github.com/vespa-engine/vespa/commit/224e5599dad0f67b1fb3c88d36e6321bccc8ac6a", "committedDate": "2020-07-15T14:20:20Z", "message": "Add author, no functional changes"}, "afterCommit": {"oid": "94119fc8757bc5b8bf45be79bc9dde7b81b8d73a", "author": {"user": {"login": "gjoranv", "name": null}}, "url": "https://github.com/vespa-engine/vespa/commit/94119fc8757bc5b8bf45be79bc9dde7b81b8d73a", "committedDate": "2020-07-15T15:05:02Z", "message": "Rename bundle loader classes and fields for consistency.\n\n* BundleManager -> ApplicationBundleLoader\n* PlatformBundleInstaller -> PlatformBundleLoader"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a6d6fef475fe86b3357926d8c5f9d39721d72689", "author": {"user": {"login": "gjoranv", "name": null}}, "url": "https://github.com/vespa-engine/vespa/commit/a6d6fef475fe86b3357926d8c5f9d39721d72689", "committedDate": "2020-07-15T16:23:33Z", "message": "Rename use -> useBundles"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ5MTMzODI4", "url": "https://github.com/vespa-engine/vespa/pull/13898#pullrequestreview-449133828", "createdAt": "2020-07-15T16:48:33Z", "commit": {"oid": "72eb7a8938f60b6c3c7a562673514414bcb1b106"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxNjo0ODozM1rOGyGl5g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxNjo0ODozM1rOGyGl5g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTE4OTk5MA==", "bodyText": "The interface also behaves as a mock implementation of itself? Never seen that before.", "url": "https://github.com/vespa-engine/vespa/pull/13898#discussion_r455189990", "createdAt": "2020-07-15T16:48:33Z", "author": {"login": "bjorncs"}, "path": "container-di/src/main/java/com/yahoo/container/di/Osgi.java", "diffHunk": "@@ -25,6 +25,10 @@ default BundleClasses getBundleClasses(ComponentSpecification bundle, Set<String\n         return new BundleClasses(new MockBundle(), Collections.emptySet());\n     }\n \n+    default void installPlatformBundles(Collection<FileReference> bundles) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "72eb7a8938f60b6c3c7a562673514414bcb1b106"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3585a616776552e3defbbf517c84dc590b4cdd5f", "author": {"user": {"login": "gjoranv", "name": null}}, "url": "https://github.com/vespa-engine/vespa/commit/3585a616776552e3defbbf517c84dc590b4cdd5f", "committedDate": "2020-07-15T17:03:20Z", "message": "Throw exception if platform bundles change.\n\n+ extract method for duplicate string creation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bc043db9094d62a15cf7d3190797569161848dfc", "author": {"user": {"login": "gjoranv", "name": null}}, "url": "https://github.com/vespa-engine/vespa/commit/bc043db9094d62a15cf7d3190797569161848dfc", "committedDate": "2020-07-15T17:05:49Z", "message": "Rename installBundles -> installApplicationBundles"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7c2c3913e6dd9cf907838d0621fc289685cdd9bf", "author": {"user": {"login": "gjoranv", "name": null}}, "url": "https://github.com/vespa-engine/vespa/commit/7c2c3913e6dd9cf907838d0621fc289685cdd9bf", "committedDate": "2020-07-15T16:59:41Z", "message": "Throw exception if platform bundles change."}, "afterCommit": {"oid": "3585a616776552e3defbbf517c84dc590b4cdd5f", "author": {"user": {"login": "gjoranv", "name": null}}, "url": "https://github.com/vespa-engine/vespa/commit/3585a616776552e3defbbf517c84dc590b4cdd5f", "committedDate": "2020-07-15T17:03:20Z", "message": "Throw exception if platform bundles change.\n\n+ extract method for duplicate string creation"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3461, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}