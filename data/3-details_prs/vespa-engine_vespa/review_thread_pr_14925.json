{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA0ODA1NjI1", "number": 14925, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQxMjozMDowMlrOEuei-Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQxMjozMzoxMVrOEueoJw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE3MTcwNDI1OnYy", "diffSide": "RIGHT", "path": "config-model/src/main/java/com/yahoo/vespa/model/clients/ContainerDocumentApi.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQxMjozMDowMlrOHi6Crw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQxMjozMDowMlrOHi6Crw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjM2NDU5MQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    // TODO(bjorncs,jvenstad) Cleanup once old restapi handler is gone\n          \n          \n            \n                    // TODO(bjorncs,jonmv) Cleanup once old restapi handler is gone", "url": "https://github.com/vespa-engine/vespa/pull/14925#discussion_r506364591", "createdAt": "2020-10-16T12:30:02Z", "author": {"login": "jonmv"}, "path": "config-model/src/main/java/com/yahoo/vespa/model/clients/ContainerDocumentApi.java", "diffHunk": "@@ -41,16 +41,21 @@ private static void addFeedHandler(ContainerCluster<?> cluster, Options options)\n \n \n     private static void addRestApiHandler(ContainerCluster<?> cluster, Options options) {\n-        String handlerClassName = options.useNewRestapiHandler\n-                ? \"com.yahoo.document.restapi.resource.DocumentV1ApiHandler\"\n-                : \"com.yahoo.document.restapi.resource.RestApi\";\n-        var handler = newVespaClientHandler(handlerClassName, \"/document/v1/*\", options);\n-        cluster.addComponent(handler);\n-        if (!options.useNewRestapiHandler) {\n-            var executor = new Threadpool(\n-                    \"restapi-handler\", cluster, options.restApiThreadpoolOptions, options.feedThreadPoolSizeFactor);\n-            handler.inject(executor);\n-            handler.addComponent(executor);\n+        // TODO(bjorncs,jvenstad) Cleanup once old restapi handler is gone", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e49ff4621653db5f5aae496963c36d49b2c6f507"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE3MTcxNzUxOnYy", "diffSide": "RIGHT", "path": "config-model/src/main/java/com/yahoo/vespa/model/clients/ContainerDocumentApi.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQxMjozMzoxMVrOHi6LXw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQxMjozMzoxMVrOHi6LXw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjM2NjgxNQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    if (bindingSuffix == null) return handler; // TODO(bjorncs,jvenstad) Cleanup once old restapi handler is gone\n          \n          \n            \n                    if (bindingSuffix == null) return handler; // TODO(bjorncs,jonmv) Cleanup once old restapi handler is gone", "url": "https://github.com/vespa-engine/vespa/pull/14925#discussion_r506366815", "createdAt": "2020-10-16T12:33:11Z", "author": {"login": "jonmv"}, "path": "config-model/src/main/java/com/yahoo/vespa/model/clients/ContainerDocumentApi.java", "diffHunk": "@@ -60,6 +65,7 @@ private static void addRestApiHandler(ContainerCluster<?> cluster, Options optio\n             Options options) {\n         Handler<AbstractConfigProducer<?>> handler = new Handler<>(new ComponentModel(\n                 BundleInstantiationSpecification.getFromStrings(componentId, null, \"vespaclient-container-plugin\"), \"\"));\n+        if (bindingSuffix == null) return handler; // TODO(bjorncs,jvenstad) Cleanup once old restapi handler is gone", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "75eb94eec1a8d80ece788956d0612848918c704c"}, "originalPosition": 36}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1078, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}