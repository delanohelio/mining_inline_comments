{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM0NDgyNDk5", "number": 13586, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxMzoxNzo0NVrOEFiCzQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxMzoxODo0MFrOEFiEPw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0MjM2MTA5OnYy", "diffSide": "RIGHT", "path": "searchlib/src/vespa/searchlib/attribute/attributeiterators.hpp", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxMzoxNzo0NVrOGjxvGA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxMzoxNzo0NVrOGjxvGA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDE2ODIxNg==", "bodyText": "This looks like the same code as on lines 142 - 148. Consider refactor into common function.", "url": "https://github.com/vespa-engine/vespa/pull/13586#discussion_r440168216", "createdAt": "2020-06-15T13:17:45Z", "author": {"login": "geirst"}, "path": "searchlib/src/vespa/searchlib/attribute/attributeiterators.hpp", "diffHunk": "@@ -143,8 +191,18 @@ template <typename PL>\n std::unique_ptr<BitVector>\n FilterAttributePostingListIteratorT<PL>::get_hits(uint32_t begin_id) {\n     BitVector::UP result(BitVector::create(begin_id, getEndId()));\n-    for (; _iterator.valid() && _iterator.getKey() < getEndId(); ++_iterator) {\n-        result->setBit(_iterator.getKey());\n+    if constexpr (is_tree_iterator_v<PL>) {\n+        auto end_itr = _iterator;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d2bd498b4d89afd7b170602549cd165abb843e09"}, "originalPosition": 83}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0MjM2NDc5OnYy", "diffSide": "RIGHT", "path": "searchlib/src/vespa/searchlib/attribute/attributeiterators.hpp", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxMzoxODo0MFrOGjxxUw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxMzoxODo0MFrOGjxxUw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDE2ODc4Nw==", "bodyText": "This looks like the same code as on lines 163 - 173. Consider refactor into common function.", "url": "https://github.com/vespa-engine/vespa/pull/13586#discussion_r440168787", "createdAt": "2020-06-15T13:18:40Z", "author": {"login": "geirst"}, "path": "searchlib/src/vespa/searchlib/attribute/attributeiterators.hpp", "diffHunk": "@@ -154,9 +212,23 @@ template <typename PL>\n void\n FilterAttributePostingListIteratorT<PL>::or_hits_into(BitVector & result, uint32_t begin_id) {\n     (void) begin_id;\n-    for (; _iterator.valid() && _iterator.getKey() < getEndId(); ++_iterator) {\n-        if ( ! result.testBit(_iterator.getKey()) ) {\n-            result.setBit(_iterator.getKey());\n+    if constexpr (is_tree_iterator_v<PL>) {\n+        auto end_itr = _iterator;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d2bd498b4d89afd7b170602549cd165abb843e09"}, "originalPosition": 105}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1943, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}