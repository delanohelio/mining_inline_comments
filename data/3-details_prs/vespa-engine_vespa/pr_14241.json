{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc3NzE1NDUy", "number": 14241, "title": "- Add test for sequencing.", "bodyText": "Also sequence multiple operations to the same id as the originating request.\n\n@bratseth PR", "createdAt": "2020-09-02T10:12:18Z", "url": "https://github.com/vespa-engine/vespa/pull/14241", "merged": true, "mergeCommit": {"oid": "cd63f91e42815221a257ba23dedfd1411b398561"}, "closed": true, "closedAt": "2020-09-02T12:38:08Z", "author": {"login": "baldersheim"}, "timelineItems": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdE5LTYAH2gAyNDc3NzE1NDUyOmVhODIwODY4ZDY2NjczOWRhNjg4NTBlY2FlMDdkMjA2MjhkOTQxYjY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdE65IrAFqTQ4MDc1MTI5OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "ea820868d666739da68850ecae07d20628d941b6", "author": {"user": {"login": "baldersheim", "name": "Henning Baldersheim"}}, "url": "https://github.com/vespa-engine/vespa/commit/ea820868d666739da68850ecae07d20628d941b6", "committedDate": "2020-09-02T10:09:52Z", "message": "- Add test for sequencing.\n- Also sequence multiple operations to the same id as the originating request."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgwNzUxMjk5", "url": "https://github.com/vespa-engine/vespa/pull/14241#pullrequestreview-480751299", "createdAt": "2020-09-02T12:05:14Z", "commit": {"oid": "ea820868d666739da68850ecae07d20628d941b6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQxMjowNToxNVrOHLr8zA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQxMjowNToxNVrOHLr8zA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjAxNjQ2MA==", "bodyText": "Shouldn't this be numMsgWithOriginalSequenceId >= 1 ?", "url": "https://github.com/vespa-engine/vespa/pull/14241#discussion_r482016460", "createdAt": "2020-09-02T12:05:15Z", "author": {"login": "bratseth"}, "path": "docproc/src/main/java/com/yahoo/docproc/jdisc/messagebus/MbusRequestContext.java", "diffHunk": "@@ -96,12 +97,16 @@ public void processingDone(List<Processing> processings) {\n         }\n         long inputSequenceId = requestMsg.getSequenceId();\n         ResponseMerger responseHandler = new ResponseMerger(requestMsg, messages.size(), this);\n+        int numMsgWithOriginalSequenceId = 0;\n         for (Message message : messages) {\n+            if (message.getSequenceId() == inputSequenceId) numMsgWithOriginalSequenceId++;\n+        }\n+        for (Message message : messages) {\n+            String path = internalNoThrottledSourcePath;\n+            if ((numMsgWithOriginalSequenceId == 1) && (message.getSequenceId() == inputSequenceId))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ea820868d666739da68850ecae07d20628d941b6"}, "originalPosition": 18}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4376, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}