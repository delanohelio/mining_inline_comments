{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI5NTQ0Nzky", "number": 15538, "title": "Arnej/less simple tensor engine", "bodyText": "I confirm that this contribution is made under the terms of the license found in the root directory of this repository's source tree and that I have the authority necessary to make this contribution on behalf of its copyright owner.\n@havardpe please review", "createdAt": "2020-11-30T13:19:17Z", "url": "https://github.com/vespa-engine/vespa/pull/15538", "merged": true, "mergeCommit": {"oid": "5cb7f88944ff14dc3ab16d083d3e6832b4f43146"}, "closed": true, "closedAt": "2020-12-01T11:33:29Z", "author": {"login": "arnej27959"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdhk4q2gH2gAyNTI5NTQ0NzkyOjQ1MGMwZjliZDdlZWU5NzFjOGY2MzgyNGNiYjRmMmI3YTNhNGQxYzQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdh4MX0AH2gAyNTI5NTQ0NzkyOjU3ZTkzYTYyZmFmNWY3ZjM0ZWEyZGUwN2NiNmYzNzI0NjM1M2ZiMzA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "450c0f9bd7eee971c8f63824cbb4f2b7a3a4d1c4", "author": {"user": {"login": "arnej27959", "name": "Arne H Juul"}}, "url": "https://github.com/vespa-engine/vespa/commit/450c0f9bd7eee971c8f63824cbb4f2b7a3a4d1c4", "committedDate": "2020-11-30T12:55:13Z", "message": "compare with reference operation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7a9047804a199fb3472a6c31127cf0368ecb173e", "author": {"user": {"login": "arnej27959", "name": "Arne H Juul"}}, "url": "https://github.com/vespa-engine/vespa/commit/7a9047804a199fb3472a6c31127cf0368ecb173e", "committedDate": "2020-11-30T12:55:17Z", "message": "SimpleTensorEngine -> SimpleValueBuilderFactory"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6cfdc395d29bbb399c3010c0d60a3141f8d4d915", "author": {"user": {"login": "arnej27959", "name": "Arne H Juul"}}, "url": "https://github.com/vespa-engine/vespa/commit/6cfdc395d29bbb399c3010c0d60a3141f8d4d915", "committedDate": "2020-11-30T12:56:41Z", "message": "remove comparison with SimpleTensor results"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1161a1a21db6d967cecf0bd16887d608285cc53c", "author": {"user": {"login": "arnej27959", "name": "Arne H Juul"}}, "url": "https://github.com/vespa-engine/vespa/commit/1161a1a21db6d967cecf0bd16887d608285cc53c", "committedDate": "2020-11-30T12:58:34Z", "message": "SimpleTensorEngine -> SimpleValueBuilderFactory"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "958c6b36103f9d638cf25a83ab9b79eae85d30a7", "author": {"user": {"login": "arnej27959", "name": "Arne H Juul"}}, "url": "https://github.com/vespa-engine/vespa/commit/958c6b36103f9d638cf25a83ab9b79eae85d30a7", "committedDate": "2020-11-30T13:09:01Z", "message": "out-of-bound verbatim label not allowed, use dynamic peek"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b8601ce03e91fd8caba36c3d5ca056e5876cc0f3", "author": {"user": {"login": "arnej27959", "name": "Arne H Juul"}}, "url": "https://github.com/vespa-engine/vespa/commit/b8601ce03e91fd8caba36c3d5ca056e5876cc0f3", "committedDate": "2020-11-30T13:09:59Z", "message": "test with SimpleValueBuilderFactory instead"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQxNzE5NDY0", "url": "https://github.com/vespa-engine/vespa/pull/15538#pullrequestreview-541719464", "createdAt": "2020-12-01T09:42:32Z", "commit": {"oid": "b8601ce03e91fd8caba36c3d5ca056e5876cc0f3"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMVQwOTo0MjozMlrOH8iJDQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMVQwOTo0MjozMlrOH8iJDQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzIzNTk4MQ==", "bodyText": "here I think we should use the reference evaluation instead", "url": "https://github.com/vespa-engine/vespa/pull/15538#discussion_r533235981", "createdAt": "2020-12-01T09:42:32Z", "author": {"login": "havardpe"}, "path": "eval/src/vespa/eval/eval/tensor_spec.cpp", "diffHunk": "@@ -208,7 +208,8 @@ TensorSpec::from_expr(const vespalib::string &expr)\n     NoParams no_params;\n     auto fun = Function::parse(expr);\n     if (!fun->has_error() && (fun->num_params() == 0)) {\n-        InterpretedFunction ifun(SimpleTensorEngine::ref(), *fun, NodeTypes());\n+        NodeTypes node_types(*fun, {});\n+        InterpretedFunction ifun(SimpleValueBuilderFactory::get(), *fun, node_types);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b8601ce03e91fd8caba36c3d5ca056e5876cc0f3"}, "originalPosition": 15}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "57e93a62faf5f7f34ea2de07cb6f37246353fb30", "author": {"user": {"login": "arnej27959", "name": "Arne H Juul"}}, "url": "https://github.com/vespa-engine/vespa/commit/57e93a62faf5f7f34ea2de07cb6f37246353fb30", "committedDate": "2020-12-01T11:24:56Z", "message": "use ReferenceEvaluation instead"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1806, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}