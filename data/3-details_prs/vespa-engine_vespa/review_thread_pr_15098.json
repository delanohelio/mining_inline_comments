{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEyNDg0ODk2", "number": 15098, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQxODo0ODozOVrOEzb4Bg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQxODo0ODozOVrOEzb4Bg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIyMzY5NTQyOnYy", "diffSide": "RIGHT", "path": "vespaclient-container-plugin/src/main/java/com/yahoo/document/restapi/resource/DocumentV1ApiHandler.java", "isResolved": false, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQxODo0ODozOVrOHqp78w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQxOToxNjozMlrOHqq8gA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDQ4OTMzMQ==", "bodyText": "What about us and ns ?\nDon't we have som utility method for this ?", "url": "https://github.com/vespa-engine/vespa/pull/15098#discussion_r514489331", "createdAt": "2020-10-29T18:48:39Z", "author": {"login": "baldersheim"}, "path": "vespaclient-container-plugin/src/main/java/com/yahoo/document/restapi/resource/DocumentV1ApiHandler.java", "diffHunk": "@@ -113,7 +114,11 @@\n \n     private static final Logger log = Logger.getLogger(DocumentV1ApiHandler.class.getName());\n     private static final Parser<Integer> integerParser = Integer::parseInt;\n-    private static final Parser<Double> doubleParser = Double::parseDouble;\n+    private static final Parser<Double> timeoutParser = value -> {\n+        int suffixLength = value.endsWith(\"ms\") ? 2 : value.endsWith(\"s\") ? 1 : 0;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "50c1f916a1699daac57f35cbc0c37060d09aed54"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDUwMTQ3OA==", "bodyText": "It doesn't need to be an integer, do I don't see the need for other units. The search handler recognises ms, and treats everything else as s. I think this is strictly better.", "url": "https://github.com/vespa-engine/vespa/pull/15098#discussion_r514501478", "createdAt": "2020-10-29T19:08:25Z", "author": {"login": "jonmv"}, "path": "vespaclient-container-plugin/src/main/java/com/yahoo/document/restapi/resource/DocumentV1ApiHandler.java", "diffHunk": "@@ -113,7 +114,11 @@\n \n     private static final Logger log = Logger.getLogger(DocumentV1ApiHandler.class.getName());\n     private static final Parser<Integer> integerParser = Integer::parseInt;\n-    private static final Parser<Double> doubleParser = Double::parseDouble;\n+    private static final Parser<Double> timeoutParser = value -> {\n+        int suffixLength = value.endsWith(\"ms\") ? 2 : value.endsWith(\"s\") ? 1 : 0;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDQ4OTMzMQ=="}, "originalCommit": {"oid": "50c1f916a1699daac57f35cbc0c37060d09aed54"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDUwMzQzMw==", "bodyText": "Actually, it recognise ks and \u00b5s as well, which is just obscene. I found the code, which is split out somewhere, but it's in the search module.", "url": "https://github.com/vespa-engine/vespa/pull/15098#discussion_r514503433", "createdAt": "2020-10-29T19:11:55Z", "author": {"login": "jonmv"}, "path": "vespaclient-container-plugin/src/main/java/com/yahoo/document/restapi/resource/DocumentV1ApiHandler.java", "diffHunk": "@@ -113,7 +114,11 @@\n \n     private static final Logger log = Logger.getLogger(DocumentV1ApiHandler.class.getName());\n     private static final Parser<Integer> integerParser = Integer::parseInt;\n-    private static final Parser<Double> doubleParser = Double::parseDouble;\n+    private static final Parser<Double> timeoutParser = value -> {\n+        int suffixLength = value.endsWith(\"ms\") ? 2 : value.endsWith(\"s\") ? 1 : 0;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDQ4OTMzMQ=="}, "originalCommit": {"oid": "50c1f916a1699daac57f35cbc0c37060d09aed54"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDUwNTU5Ng==", "bodyText": "May as well use that code, then.", "url": "https://github.com/vespa-engine/vespa/pull/15098#discussion_r514505596", "createdAt": "2020-10-29T19:16:04Z", "author": {"login": "jonmv"}, "path": "vespaclient-container-plugin/src/main/java/com/yahoo/document/restapi/resource/DocumentV1ApiHandler.java", "diffHunk": "@@ -113,7 +114,11 @@\n \n     private static final Logger log = Logger.getLogger(DocumentV1ApiHandler.class.getName());\n     private static final Parser<Integer> integerParser = Integer::parseInt;\n-    private static final Parser<Double> doubleParser = Double::parseDouble;\n+    private static final Parser<Double> timeoutParser = value -> {\n+        int suffixLength = value.endsWith(\"ms\") ? 2 : value.endsWith(\"s\") ? 1 : 0;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDQ4OTMzMQ=="}, "originalCommit": {"oid": "50c1f916a1699daac57f35cbc0c37060d09aed54"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDUwNTg1Ng==", "bodyText": "(It was already a dependency of this module.)", "url": "https://github.com/vespa-engine/vespa/pull/15098#discussion_r514505856", "createdAt": "2020-10-29T19:16:32Z", "author": {"login": "jonmv"}, "path": "vespaclient-container-plugin/src/main/java/com/yahoo/document/restapi/resource/DocumentV1ApiHandler.java", "diffHunk": "@@ -113,7 +114,11 @@\n \n     private static final Logger log = Logger.getLogger(DocumentV1ApiHandler.class.getName());\n     private static final Parser<Integer> integerParser = Integer::parseInt;\n-    private static final Parser<Double> doubleParser = Double::parseDouble;\n+    private static final Parser<Double> timeoutParser = value -> {\n+        int suffixLength = value.endsWith(\"ms\") ? 2 : value.endsWith(\"s\") ? 1 : 0;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDQ4OTMzMQ=="}, "originalCommit": {"oid": "50c1f916a1699daac57f35cbc0c37060d09aed54"}, "originalPosition": 14}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1062, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}