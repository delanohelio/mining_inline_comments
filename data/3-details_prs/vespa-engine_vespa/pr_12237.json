{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc2NDkyMTgw", "number": 12237, "title": "Let only successful run expire due to age", "bodyText": "@mpolden please review.\nThis fixes a problem where a NoSuchElementException was thrown when the\nonly run was a success, this expired, and a new run failed.\nThe solution is simply to throw away the success in this case, as we\nhave no logs for it anyway", "createdAt": "2020-02-18T08:57:43Z", "url": "https://github.com/vespa-engine/vespa/pull/12237", "merged": true, "mergeCommit": {"oid": "67f7e2aa307b00f2d10db3d249e0b16f9f92bd69"}, "closed": true, "closedAt": "2020-02-18T10:51:43Z", "author": {"login": "jonmv"}, "timelineItems": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcFeEOMAH2gAyMzc2NDkyMTgwOjBlODgyYjY0YjZjYjk0ZjQ5NTkzNjE5ZGNmMjc1MzVlMDMwYzkxMDA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcFeJKmAFqTM2MDE2NDg3OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "0e882b64b6cb94f49593619dcf27535e030c9100", "author": {"user": {"login": "jonmv", "name": "Jon Marius Venstad"}}, "url": "https://github.com/vespa-engine/vespa/commit/0e882b64b6cb94f49593619dcf27535e030c9100", "committedDate": "2020-02-18T08:57:28Z", "message": "Let only successful run expire due to age\n\n@mpolden please review.\n\nThis fixes a problem where a NoSuchElementException was thrown when the\nonly run was a success, this expired, and a new run failed.\nThe solution is simply to throw away the success in this case, as we\nhave no logs for it anyway"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYwMTY0ODc5", "url": "https://github.com/vespa-engine/vespa/pull/12237#pullrequestreview-360164879", "createdAt": "2020-02-18T09:02:45Z", "commit": {"oid": "0e882b64b6cb94f49593619dcf27535e030c9100"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQwOTowMjo0NlrOFq6FOg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQwOTowMjo0NlrOFq6FOg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDUzNjEyMg==", "bodyText": "To var or not to var, that is the question.", "url": "https://github.com/vespa-engine/vespa/pull/12237#discussion_r380536122", "createdAt": "2020-02-18T09:02:46Z", "author": {"login": "mpolden"}, "path": "controller-server/src/test/java/com/yahoo/vespa/hosted/controller/maintenance/JobRunnerTest.java", "diffHunk": "@@ -337,6 +337,25 @@ public void historyPruning() {\n         assertFalse(jobs.firstFailing(jobId).isPresent());\n     }\n \n+    @Test\n+    public void onlySuccessfulRunExpiresThenAnotherFails() {\n+        DeploymentTester tester = new DeploymentTester();\n+        JobController jobs = tester.controller().jobController();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0e882b64b6cb94f49593619dcf27535e030c9100"}, "originalPosition": 7}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2899, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}