{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcwMTEyMDk0", "number": 14104, "title": "return Vespa connection when deploying Vespa app.", "bodyText": "Deploying with VespaDocker.deploy now return a Vespa app connection in addition to the deployment message.\nI confirm that this contribution is made under the terms of the license found in the root directory of this repository's source tree and that I have the authority necessary to make this contribution on behalf of its copyright owner.", "createdAt": "2020-08-19T11:49:07Z", "url": "https://github.com/vespa-engine/vespa/pull/14104", "merged": true, "mergeCommit": {"oid": "186d8fa8e77455cbcc9d5d1b7c72f373e2a81f2f"}, "closed": true, "closedAt": "2020-08-21T07:55:45Z", "author": {"login": "thigm85"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdAaMZ7gH2gAyNDcwMTEyMDk0OmViYzA3OWE5MWEwYjRiYmU1YWQ5YTFhOGRlOGNlYWQ3ZDJmN2RkYzM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdA2L_EAFqTQ3MTk1OTk4Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "ebc079a91a0b4bbe5ad9a1a8de8cead7d2f7ddc3", "author": {"user": {"login": "thigm85", "name": "Thiago G. Martins"}}, "url": "https://github.com/vespa-engine/vespa/commit/ebc079a91a0b4bbe5ad9a1a8de8cead7d2f7ddc3", "committedDate": "2020-08-19T11:48:19Z", "message": "return Vespa connection when deploying Vespa app."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "63a21adb6720d9182ace983b69c9b1636371fd4e", "author": {"user": {"login": "thigm85", "name": "Thiago G. Martins"}}, "url": "https://github.com/vespa-engine/vespa/commit/63a21adb6720d9182ace983b69c9b1636371fd4e", "committedDate": "2020-08-19T12:21:02Z", "message": "add __repr__ method"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcwNDA4ODc1", "url": "https://github.com/vespa-engine/vespa/pull/14104#pullrequestreview-470408875", "createdAt": "2020-08-19T12:32:14Z", "commit": {"oid": "63a21adb6720d9182ace983b69c9b1636371fd4e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOVQxMjozMjoxNFrOHDFLPg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOVQxMjozMjoxNFrOHDFLPg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Mjk5MjU3NA==", "bodyText": "Is it idiomatic to return a tuple with message and a handle? It seems odd, and how do you programatically see the difference between successes and failures here?\nYou should probably use self.local_port instead of directly referencing port 8080?", "url": "https://github.com/vespa-engine/vespa/pull/14104#discussion_r472992574", "createdAt": "2020-08-19T12:32:14Z", "author": {"login": "oyving"}, "path": "python/vespa/vespa/package.py", "diffHunk": "@@ -446,4 +457,8 @@ def deploy(self, disk_folder: str, container_memory: str = \"4G\"):\n         deployment = self.container.exec_run(\n             \"bash -c '/opt/vespa/bin/vespa-deploy prepare /app/application && /opt/vespa/bin/vespa-deploy activate'\"\n         )\n-        return deployment.output.decode(\"utf-8\").split(\"\\n\")\n+\n+        return (\n+            deployment.output.decode(\"utf-8\").split(\"\\n\"),\n+            Vespa(url=\"http://localhost\", port=8080),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63a21adb6720d9182ace983b69c9b1636371fd4e"}, "originalPosition": 49}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c5b2d82bb3d8612f7a3df85ff6b61b8200099b47", "author": {"user": {"login": "thigm85", "name": "Thiago G. Martins"}}, "url": "https://github.com/vespa-engine/vespa/commit/c5b2d82bb3d8612f7a3df85ff6b61b8200099b47", "committedDate": "2020-08-20T11:28:58Z", "message": "include vespa engine deployment message in the Vespa class as attribute"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3f6fcaefe320aa5f6207f87ea5b5c538c2304686", "author": {"user": {"login": "thigm85", "name": "Thiago G. Martins"}}, "url": "https://github.com/vespa-engine/vespa/commit/3f6fcaefe320aa5f6207f87ea5b5c538c2304686", "committedDate": "2020-08-20T11:37:13Z", "message": "raise exception when deployment fails or return Vespa with deployment message when deployment succeeds."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9fd6d4a25199bbf356f3ebbb9265cff76e126a84", "author": {"user": {"login": "thigm85", "name": "Thiago G. Martins"}}, "url": "https://github.com/vespa-engine/vespa/commit/9fd6d4a25199bbf356f3ebbb9265cff76e126a84", "committedDate": "2020-08-20T11:38:12Z", "message": "use self.local_port instead of hard coded 8080"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxOTU5OTg2", "url": "https://github.com/vespa-engine/vespa/pull/14104#pullrequestreview-471959986", "createdAt": "2020-08-20T20:25:13Z", "commit": {"oid": "9fd6d4a25199bbf356f3ebbb9265cff76e126a84"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4421, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}