{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAzODEyNjU5", "number": 12928, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQwODo0NDo0OFrODyZqwA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQwOTowNjozNVrODyaM0w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU0MTc1OTM2OnYy", "diffSide": "RIGHT", "path": "vespa-http-client/src/main/java/com/yahoo/vespa/http/client/core/communication/EndpointIOException.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQwODo0NDo0OFrOGGa7Dg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQwODo0NDo0OFrOGGa7Dg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTM4NTc0Mg==", "bodyText": "Should this be \"(...) or null if the failure occurred before this (...)\"?", "url": "https://github.com/vespa-engine/vespa/pull/12928#discussion_r409385742", "createdAt": "2020-04-16T08:44:48Z", "author": {"login": "vekterli"}, "path": "vespa-http-client/src/main/java/com/yahoo/vespa/http/client/core/communication/EndpointIOException.java", "diffHunk": "@@ -20,8 +20,7 @@ public EndpointIOException(Endpoint endpoint, String message, Throwable cause) {\n         this.endpoint = endpoint;\n     }\n \n-    public Endpoint getEndpoint() {\n-        return endpoint;\n-    }\n+    /** Returns the endpoint, or the failure occurred before  this was assigned to a unique endpoint */", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3881d6283dc36646f958da16b948cbb2affec845"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU0MTc5ODIyOnYy", "diffSide": "RIGHT", "path": "vespa-http-client/src/main/java/com/yahoo/vespa/http/client/core/communication/IOThread.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQwODo1NDoyNFrOGGbTgA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQwODo1NDoyNFrOGGbTgA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTM5MjAwMA==", "bodyText": "Should probably be Level.FINEST to match log.finest() call below", "url": "https://github.com/vespa-engine/vespa/pull/12928#discussion_r409392000", "createdAt": "2020-04-16T08:54:24Z", "author": {"login": "vekterli"}, "path": "vespa-http-client/src/main/java/com/yahoo/vespa/http/client/core/communication/IOThread.java", "diffHunk": "@@ -184,22 +184,22 @@ public String toString() {\n                 chunkSizeBytes = doc.size();\n             }\n         } catch (InterruptedException ie) {\n-            log.fine(\"Got break signal while waiting for new documents to feed.\");\n+            log.fine(\"Got break signal while waiting for new documents to feed\");\n             return docsForSendChunk;\n         }\n         int pendingSize = 1 + resultQueue.getPendingSize();\n         // see if we can get more documents without blocking\n+\n         while (chunkSizeBytes < maxChunkSizeBytes && pendingSize < maxInFlightRequests) {\n             drainFirstDocumentsInQueueIfOld();\n-            Document d = documentQueue.poll();\n-            if (d == null) {\n-                break;\n-            }\n-            docsForSendChunk.add(d);\n-            chunkSizeBytes += d.size();\n+            Document document = documentQueue.poll();\n+            if (document == null) break;\n+            docsForSendChunk.add(document);\n+            chunkSizeBytes += document.size();\n             pendingSize++;\n         }\n-        log.finest(\"Chunk has \" + docsForSendChunk.size() + \" docs with a size \" + chunkSizeBytes + \" bytes.\");\n+        if (log.isLoggable(Level.FINE))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "874968628cb824e2a8dc99e1b9148e61c09a867e"}, "originalPosition": 26}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU0MTg0NjU5OnYy", "diffSide": "RIGHT", "path": "vespa-http-client/src/main/java/com/yahoo/vespa/http/client/core/communication/IOThread.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQwOTowNjozNVrOGGbypA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQwOTowNjozNVrOGGbypA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTM5OTk3Mg==", "bodyText": "This import does not seem to have been used", "url": "https://github.com/vespa-engine/vespa/pull/12928#discussion_r409399972", "createdAt": "2020-04-16T09:06:35Z", "author": {"login": "vekterli"}, "path": "vespa-http-client/src/main/java/com/yahoo/vespa/http/client/core/communication/IOThread.java", "diffHunk": "@@ -17,7 +17,9 @@\n import java.util.Collection;\n import java.util.List;\n import java.util.Optional;\n+import java.util.Random;\n import java.util.concurrent.CountDownLatch;\n+import java.util.concurrent.ThreadLocalRandom;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "748fcdf0901196fb6c7339ffdaf45bd47c56c78b"}, "originalPosition": 6}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1786, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}