{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQxMDMyMDU2", "number": 13727, "title": "Config server refactoring, remove TenantHandlerProvider", "bodyText": "", "createdAt": "2020-06-28T09:52:28Z", "url": "https://github.com/vespa-engine/vespa/pull/13727", "merged": true, "mergeCommit": {"oid": "8ee130dd15f0eac592f33ba80535a31bea2eb0e5"}, "closed": true, "closedAt": "2020-06-29T10:11:46Z", "author": {"login": "hmusum"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcvoOmEAH2gAyNDQxMDMyMDU2OmM0NWI0NDllZDI0OWI2YzJjZGQxOTEwZWI4OWRkZDVhYjM0MmNiNDQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcv-NSYgFqTQzODk4MTY1NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c45b449ed249b6c2cdd1910eb89ddd5ab342cb44", "author": {"user": {"login": "hmusum", "name": "Harald Musum"}}, "url": "https://github.com/vespa-engine/vespa/commit/c45b449ed249b6c2cdd1910eb89ddd5ab342cb44", "committedDate": "2020-06-28T08:32:40Z", "message": "Do not hardcode application id in MockTenantProvider and MockRequestHandler\n\nHardcoding makes it really hard to understand what is going on when you\ntry to use something else than the default application id in a test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "afbbd3230a33e7e572d246a4de0d5650e3161fa2", "author": {"user": {"login": "hmusum", "name": "Harald Musum"}}, "url": "https://github.com/vespa-engine/vespa/commit/afbbd3230a33e7e572d246a4de0d5650e3161fa2", "committedDate": "2020-06-28T08:41:26Z", "message": "Remove unused argument"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8ec420c7f72686162b797826d61f6408e379b805", "author": {"user": {"login": "hmusum", "name": "Harald Musum"}}, "url": "https://github.com/vespa-engine/vespa/commit/8ec420c7f72686162b797826d61f6408e379b805", "committedDate": "2020-06-28T09:46:07Z", "message": "Rewrite test to use less low-level code\n\nAlso use TenantHandlerProvider less"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "06df2bd19373923c0566ec2d8f83d674458d9c38", "author": {"user": {"login": "hmusum", "name": "Harald Musum"}}, "url": "https://github.com/vespa-engine/vespa/commit/06df2bd19373923c0566ec2d8f83d674458d9c38", "committedDate": "2020-06-28T09:50:54Z", "message": "Remove TenantHandlerProvider"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM4OTgxNjU1", "url": "https://github.com/vespa-engine/vespa/pull/13727#pullrequestreview-438981655", "createdAt": "2020-06-29T08:18:16Z", "commit": {"oid": "c45b449ed249b6c2cdd1910eb89ddd5ab342cb44"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQwODoxODoxNlrOGqJokQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQwODoxODoxNlrOGqJokQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Njg1MTIxNw==", "bodyText": "It would probably make sense to rename this class to MockRpcServer", "url": "https://github.com/vespa-engine/vespa/pull/13727#discussion_r446851217", "createdAt": "2020-06-29T08:18:16Z", "author": {"login": "gjoranv"}, "path": "configserver/src/test/java/com/yahoo/vespa/config/server/rpc/MockRpc.java", "diffHunk": "@@ -39,20 +37,15 @@\n     public volatile JRTServerConfigRequest latestRequest = null;\n \n \n-    public MockRpc(int port, boolean createDefaultTenant, boolean pretendToHaveLoadedAnyApplication, File tempDir) {\n-        super(createConfig(port), null, Metrics.createTestMetrics(), \n-              new HostRegistries(), new ConfigRequestHostLivenessTracker(), new FileServer(tempDir), new NoopRpcAuthorizer(), new RpcRequestHandlerProvider());\n-        if (createDefaultTenant) {\n-            onTenantCreate(TenantName.from(\"default\"), new MockTenantProvider(pretendToHaveLoadedAnyApplication));\n-        }\n-    }\n-\n-    public MockRpc(int port, boolean createDefaultTenant, File tempDir) {\n-        this(port, createDefaultTenant, true, tempDir);\n-    }\n-\n     public MockRpc(int port, File tempDir) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c45b449ed249b6c2cdd1910eb89ddd5ab342cb44"}, "originalPosition": 32}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3594, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}