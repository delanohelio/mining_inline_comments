{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc2MDk4MjQ0", "number": 12218, "title": "Add tenant access rules for /routing/v1/", "bodyText": "", "createdAt": "2020-02-17T11:57:05Z", "url": "https://github.com/vespa-engine/vespa/pull/12218", "merged": true, "mergeCommit": {"oid": "343fe02f520f73e90b93058129452f1ec4c7f3cb"}, "closed": true, "closedAt": "2020-02-17T14:16:57Z", "author": {"login": "mpolden"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcFMcoLAFqTM1OTY5ODE0OQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcFNrHnAFqTM1OTc0ODE0Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU5Njk4MTQ5", "url": "https://github.com/vespa-engine/vespa/pull/12218#pullrequestreview-359698149", "createdAt": "2020-02-17T12:25:49Z", "commit": {"oid": "e06a00c19a1340ea5efbc7d0e05a114fac4ac8cc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xN1QxMjoyNTo1MFrOFqisMw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xN1QxMjoyNTo1MFrOFqisMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDE1Mjg4Mw==", "bodyText": "Seems to me everything under /status/ is GET, and could lie here, with .../{tenant}/{*}.", "url": "https://github.com/vespa-engine/vespa/pull/12218#discussion_r380152883", "createdAt": "2020-02-17T12:25:50Z", "author": {"login": "jonmv"}, "path": "controller-api/src/main/java/com/yahoo/vespa/hosted/controller/api/role/PathGroup.java", "diffHunk": "@@ -53,7 +55,8 @@\n                Optional.of(\"/api\"),\n                \"/application/v4/tenant/{tenant}/application/\",\n                \"/application/v4/tenant/{tenant}/cost\",\n-               \"/application/v4/tenant/{tenant}/cost/{date}\"),\n+               \"/application/v4/tenant/{tenant}/cost/{date}\",\n+               \"/routing/v1/status/tenant/{tenant}\"),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e06a00c19a1340ea5efbc7d0e05a114fac4ac8cc"}, "originalPosition": 17}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e06a00c19a1340ea5efbc7d0e05a114fac4ac8cc", "author": {"user": {"login": "mpolden", "name": "Martin Polden"}}, "url": "https://github.com/vespa-engine/vespa/commit/e06a00c19a1340ea5efbc7d0e05a114fac4ac8cc", "committedDate": "2020-02-17T11:55:12Z", "message": "Add tenant access rules for /routing/v1/"}, "afterCommit": {"oid": "40e429feef528c3203b0f23c0ed3d59e0906a55a", "author": {"user": {"login": "mpolden", "name": "Martin Polden"}}, "url": "https://github.com/vespa-engine/vespa/commit/40e429feef528c3203b0f23c0ed3d59e0906a55a", "committedDate": "2020-02-17T12:46:10Z", "message": "Add tenant access rules for /routing/v1/"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU5NzI3NDk1", "url": "https://github.com/vespa-engine/vespa/pull/12218#pullrequestreview-359727495", "createdAt": "2020-02-17T13:19:19Z", "commit": {"oid": "40e429feef528c3203b0f23c0ed3d59e0906a55a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xN1QxMzoxOToxOVrOFqkJBg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xN1QxMzoxOToxOVrOFqkJBg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDE3NjY0Ng==", "bodyText": "Ah, there was one /inactive/ as well? So I guess this is to allow application owners to manipulate endpoint status? The athenzTenantAdmin does not cover this group \u2014\u00a0it was split out specifically for the legacy pipeline. Putting this under the applicationInfo should work for both sets of roles (Athenz and otherwise).", "url": "https://github.com/vespa-engine/vespa/pull/12218#discussion_r380176646", "createdAt": "2020-02-17T13:19:19Z", "author": {"login": "jonmv"}, "path": "controller-api/src/main/java/com/yahoo/vespa/hosted/controller/api/role/PathGroup.java", "diffHunk": "@@ -153,7 +156,8 @@\n                          \"/application/v4/tenant/{tenant}/application/{application}/environment/test/region/{region}/instance/{ignored}\",\n                          \"/application/v4/tenant/{tenant}/application/{application}/environment/test/region/{region}/instance/{ignored}/deploy\",\n                          \"/application/v4/tenant/{tenant}/application/{application}/environment/staging/region/{region}/instance/{ignored}\",\n-                         \"/application/v4/tenant/{tenant}/application/{application}/environment/staging/region/{region}/instance/{ignored}/deploy\"),\n+                         \"/application/v4/tenant/{tenant}/application/{application}/environment/staging/region/{region}/instance/{ignored}/deploy\",\n+                         \"/routing/v1/inactive/tenant/{tenant}/application/{application}/instance/{ignored}/environment/prod/region/{region}\"),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "40e429feef528c3203b0f23c0ed3d59e0906a55a"}, "originalPosition": 27}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "350797fb677fd5936bf4bec50dfb250fea9b1886", "author": {"user": {"login": "mpolden", "name": "Martin Polden"}}, "url": "https://github.com/vespa-engine/vespa/commit/350797fb677fd5936bf4bec50dfb250fea9b1886", "committedDate": "2020-02-17T13:37:11Z", "message": "Add tenant access rules for /routing/v1/"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "40e429feef528c3203b0f23c0ed3d59e0906a55a", "author": {"user": {"login": "mpolden", "name": "Martin Polden"}}, "url": "https://github.com/vespa-engine/vespa/commit/40e429feef528c3203b0f23c0ed3d59e0906a55a", "committedDate": "2020-02-17T12:46:10Z", "message": "Add tenant access rules for /routing/v1/"}, "afterCommit": {"oid": "350797fb677fd5936bf4bec50dfb250fea9b1886", "author": {"user": {"login": "mpolden", "name": "Martin Polden"}}, "url": "https://github.com/vespa-engine/vespa/commit/350797fb677fd5936bf4bec50dfb250fea9b1886", "committedDate": "2020-02-17T13:37:11Z", "message": "Add tenant access rules for /routing/v1/"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU5NzQ4MTQ3", "url": "https://github.com/vespa-engine/vespa/pull/12218#pullrequestreview-359748147", "createdAt": "2020-02-17T13:51:34Z", "commit": {"oid": "350797fb677fd5936bf4bec50dfb250fea9b1886"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2876, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}