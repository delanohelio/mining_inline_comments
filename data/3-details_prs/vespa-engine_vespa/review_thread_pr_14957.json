{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA2MDg3ODAy", "number": 14957, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxODoyNzo1OVrOEvcynw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxODozMToyOVrOEvc31Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE4MTkwMjM5OnYy", "diffSide": "RIGHT", "path": "node-repository/src/main/java/com/yahoo/vespa/hosted/provision/maintenance/Rebalancer.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxODoyNzo1OVrOHkcOiw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxODoyNzo1OVrOHkcOiw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzk3MzI1OQ==", "bodyText": "\"not necessary\" is not correct - we hope to enable rebalancing even with dynamic provisioning, but it's a todo.", "url": "https://github.com/vespa-engine/vespa/pull/14957#discussion_r507973259", "createdAt": "2020-10-19T18:27:59Z", "author": {"login": "hakonhall"}, "path": "node-repository/src/main/java/com/yahoo/vespa/hosted/provision/maintenance/Rebalancer.java", "diffHunk": "@@ -35,7 +35,7 @@ public Rebalancer(Deployer deployer,\n     @Override\n     protected boolean maintain() {\n         boolean success = true;\n-        if ( ! nodeRepository().zone().getCloud().allowHostSharing()) return success; // Rebalancing not necessary\n+        if (nodeRepository().zone().getCloud().dynamicProvisioning()) return success; // Rebalancing not necessary", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ea72fc4e53147f6bb03bca9237e1cacd0df468d1"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE4MTkxNTczOnYy", "diffSide": "RIGHT", "path": "node-repository/src/main/java/com/yahoo/vespa/hosted/provision/maintenance/SpareCapacityMaintainer.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxODozMToyOVrOHkcW2g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxODozMToyOVrOHkcW2g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzk3NTM4Ng==", "bodyText": "We'd like to maintain spare capacity in dynamically provisioned zones too - but it will depend on flags.", "url": "https://github.com/vespa-engine/vespa/pull/14957#discussion_r507975386", "createdAt": "2020-10-19T18:31:29Z", "author": {"login": "hakonhall"}, "path": "node-repository/src/main/java/com/yahoo/vespa/hosted/provision/maintenance/SpareCapacityMaintainer.java", "diffHunk": "@@ -68,7 +68,8 @@ public SpareCapacityMaintainer(Deployer deployer,\n     @Override\n     protected boolean maintain() {\n         boolean success = true;\n-        if ( ! nodeRepository().zone().getCloud().allowHostSharing()) return success;\n+        // Don't need to maintain spare capacity in dynamically provisioned zones; can provision more on demand.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ea72fc4e53147f6bb03bca9237e1cacd0df468d1"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1093, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}