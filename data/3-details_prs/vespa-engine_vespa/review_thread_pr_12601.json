{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg5ODk4NjYz", "number": 12601, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QyMDoyNjoxM1rODo4AMA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QyMDoyNjoxM1rODo4AMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ0MTg3MTg0OnYy", "diffSide": "RIGHT", "path": "config-model/src/main/java/com/yahoo/vespa/model/container/http/xml/HttpBuilder.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QyMDoyNjoxM1rOF3stnw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQxMDoxMjo1NFrOF3-N-w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mzk0ODU3NQ==", "bodyText": "will this fail the first redeploy (after config server is upgraded) ? or will this only be evaluated when application is deployed with the new version?", "url": "https://github.com/vespa-engine/vespa/pull/12601#discussion_r393948575", "createdAt": "2020-03-17T20:26:13Z", "author": {"login": "tokle"}, "path": "config-model/src/main/java/com/yahoo/vespa/model/container/http/xml/HttpBuilder.java", "diffHunk": "@@ -79,6 +82,28 @@ private AccessControl buildAccessControl(DeployState deployState, AbstractConfig\n         return builder.build();\n     }\n \n+    // TODO Fail if domain is not provided through deploy properties\n+    private static AthenzDomain getAccessControlDomain(DeployState deployState, Element accessControlElem) {\n+        AthenzDomain tenantDomain = deployState.getProperties().athenzDomain().orElse(null);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2ae2b42dc0c323e8965918078bee538f746cdf31"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDIzNTM4Nw==", "bodyText": "Only if domain attribute is missing from access-control. This attribute has been mandatory up to now, so it should not be the case.", "url": "https://github.com/vespa-engine/vespa/pull/12601#discussion_r394235387", "createdAt": "2020-03-18T10:12:54Z", "author": {"login": "bjorncs"}, "path": "config-model/src/main/java/com/yahoo/vespa/model/container/http/xml/HttpBuilder.java", "diffHunk": "@@ -79,6 +82,28 @@ private AccessControl buildAccessControl(DeployState deployState, AbstractConfig\n         return builder.build();\n     }\n \n+    // TODO Fail if domain is not provided through deploy properties\n+    private static AthenzDomain getAccessControlDomain(DeployState deployState, Element accessControlElem) {\n+        AthenzDomain tenantDomain = deployState.getProperties().athenzDomain().orElse(null);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mzk0ODU3NQ=="}, "originalCommit": {"oid": "2ae2b42dc0c323e8965918078bee538f746cdf31"}, "originalPosition": 32}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2284, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}