{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk4NjM1OTU4", "number": 12828, "title": "Balder/control naptime", "bodyText": "@vekterli PR", "createdAt": "2020-04-04T16:30:31Z", "url": "https://github.com/vespa-engine/vespa/pull/12828", "merged": true, "mergeCommit": {"oid": "ed34407f0470d5ff5446df903c57f7b649dc835f"}, "closed": true, "closedAt": "2020-04-04T16:30:45Z", "author": {"login": "baldersheim"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcUXiPXgH2gAyMzk4NjM1OTU4OjYwN2M3Y2IyMzJmNDM2YzJmMDk0ZjFjYjhjZGUwM2U3NmI2ZTM2MGQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcU6tz9AFqTM4ODA0NTUzOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "607c7cb232f436c2f094f1cb8cde03e76b6e360d", "author": {"user": null}, "url": "https://github.com/vespa-engine/vespa/commit/607c7cb232f436c2f094f1cb8cde03e76b6e360d", "committedDate": "2020-04-04T15:49:47Z", "message": "Control nap time"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a8043a2e3edb544442961e3947c466e6d45ad716", "author": {"user": null}, "url": "https://github.com/vespa-engine/vespa/commit/a8043a2e3edb544442961e3947c466e6d45ad716", "committedDate": "2020-04-04T16:28:15Z", "message": "Go back to initial and rerun tests."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg4MDQ1NTM5", "url": "https://github.com/vespa-engine/vespa/pull/12828#pullrequestreview-388045539", "createdAt": "2020-04-06T08:45:00Z", "commit": {"oid": "a8043a2e3edb544442961e3947c466e6d45ad716"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQwODo0NTowMVrOGBNkqQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQwODo0ODo0M1rOGBNtiQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzkyNDEzNw==", "bodyText": "What is the end effect if wp < _watermark and this expression underflows?", "url": "https://github.com/vespa-engine/vespa/pull/12828#discussion_r403924137", "createdAt": "2020-04-06T08:45:01Z", "author": {"login": "vekterli"}, "path": "staging_vespalib/src/vespa/vespalib/util/singleexecutor.cpp", "diffHunk": "@@ -144,7 +151,7 @@ SingleExecutor::wait_for_room(Lock & lock) {\n     }\n     _queueSize.add(numTasks());\n     while (numTasks() >= _taskLimit.load(std::memory_order_relaxed)) {\n-        sleepProducer(lock, 10ms, wp - taskLimit/4);\n+        sleepProducer(lock, _napTime, wp - _watermark);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a8043a2e3edb544442961e3947c466e6d45ad716"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzkyNjQwOQ==", "bodyText": "Intentional to change default watermark from /4 to /10?", "url": "https://github.com/vespa-engine/vespa/pull/12828#discussion_r403926409", "createdAt": "2020-04-06T08:48:43Z", "author": {"login": "vekterli"}, "path": "staging_vespalib/src/vespa/vespalib/util/singleexecutor.cpp", "diffHunk": "@@ -6,6 +6,10 @@\n namespace vespalib {\n \n SingleExecutor::SingleExecutor(uint32_t taskLimit)\n+    : SingleExecutor(taskLimit, taskLimit/10, 5ms)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a8043a2e3edb544442961e3947c466e6d45ad716"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3435, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}