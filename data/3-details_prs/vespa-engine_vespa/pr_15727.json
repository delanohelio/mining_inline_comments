{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMzODQxMzc3", "number": 15727, "title": "Refactor code into module that does not depend on zookeeper", "bodyText": "", "createdAt": "2020-12-07T17:47:40Z", "url": "https://github.com/vespa-engine/vespa/pull/15727", "merged": true, "mergeCommit": {"oid": "fefcc6ec9e6e3934527ef38952773cf616d2e26f"}, "closed": true, "closedAt": "2020-12-08T10:47:55Z", "author": {"login": "hmusum"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdj0053AH2gAyNTMzODQxMzc3OmY5OGUxNThhNmY2MWNkMzkwMjlmNDM5ZGE5MDNmMTBlNzVlNGMzZmE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdkG2rqAFqTU0Njk1MzE1MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "f98e158a6f61cd39029f439da903f10e75e4c3fa", "author": {"user": {"login": "hmusum", "name": "Harald Musum"}}, "url": "https://github.com/vespa-engine/vespa/commit/f98e158a6f61cd39029f439da903f10e75e4c3fa", "committedDate": "2020-12-07T12:37:26Z", "message": "Split out a ZKAdmin interface and implement it"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7e7b7c72b7ca4131f6f29efa0f9d63f857d9f369", "author": {"user": {"login": "hmusum", "name": "Harald Musum"}}, "url": "https://github.com/vespa-engine/vespa/commit/7e7b7c72b7ca4131f6f29efa0f9d63f857d9f369", "committedDate": "2020-12-07T13:23:28Z", "message": "Merge branch 'master' into hmusum/refactor-reconfigurer"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9e82c2c81e161a1cd449456d5f8ba797762ecdcd", "author": {"user": {"login": "hmusum", "name": "Harald Musum"}}, "url": "https://github.com/vespa-engine/vespa/commit/9e82c2c81e161a1cd449456d5f8ba797762ecdcd", "committedDate": "2020-12-07T13:40:47Z", "message": "Merge branch 'master' into hmusum/refactor-reconfigurer"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2effa9bfef3ad615887f4ecf3190ad87ccc22c6a", "author": {"user": {"login": "hmusum", "name": "Harald Musum"}}, "url": "https://github.com/vespa-engine/vespa/commit/2effa9bfef3ad615887f4ecf3190ad87ccc22c6a", "committedDate": "2020-12-07T13:42:14Z", "message": "Retry on NewConfigNoQuorum"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b0f74766d1b2af781d93da7d2ad89c89c8e9825b", "author": {"user": {"login": "hmusum", "name": "Harald Musum"}}, "url": "https://github.com/vespa-engine/vespa/commit/b0f74766d1b2af781d93da7d2ad89c89c8e9825b", "committedDate": "2020-12-07T17:33:23Z", "message": "Refactor to prepare for mving more code to zokeeper-server-common"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6e44ab449d2bb686127192c71e4dbe87091be6ee", "author": {"user": {"login": "hmusum", "name": "Harald Musum"}}, "url": "https://github.com/vespa-engine/vespa/commit/6e44ab449d2bb686127192c71e4dbe87091be6ee", "committedDate": "2020-12-07T17:47:02Z", "message": "Move more code to zookeeper-server-common"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9f94fca1554fde44fd652739f3cf6e647d87184a", "author": {"user": {"login": "hmusum", "name": "Harald Musum"}}, "url": "https://github.com/vespa-engine/vespa/commit/9f94fca1554fde44fd652739f3cf6e647d87184a", "committedDate": "2020-12-07T17:54:13Z", "message": "Minor fixes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ2ODU5NjI2", "url": "https://github.com/vespa-engine/vespa/pull/15727#pullrequestreview-546859626", "createdAt": "2020-12-08T08:36:58Z", "commit": {"oid": "9f94fca1554fde44fd652739f3cf6e647d87184a"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQwODozNjo1OFrOIBNaxQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQwODo0MTowNVrOIBNlUg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODEzOTMzMw==", "bodyText": "Consider inlining this as (event) -> log.log(Level.INFO, event.toString()) so we don't need to have this class in every versioned module.", "url": "https://github.com/vespa-engine/vespa/pull/15727#discussion_r538139333", "createdAt": "2020-12-08T08:36:58Z", "author": {"login": "mpolden"}, "path": "zookeeper-server/zookeeper-server-3.5.6/src/main/java/com/yahoo/vespa/zookeeper/LoggingWatcher.java", "diffHunk": "@@ -0,0 +1,19 @@\n+// Copyright Verizon Media. Licensed under the terms of the Apache 2.0 license. See LICENSE in the project root.\n+package com.yahoo.vespa.zookeeper;\n+\n+import org.apache.zookeeper.WatchedEvent;\n+import org.apache.zookeeper.Watcher;\n+\n+import java.util.logging.Level;\n+import java.util.logging.Logger;\n+\n+class LoggingWatcher implements Watcher {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f94fca1554fde44fd652739f3cf6e647d87184a"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODE0MjAzNA==", "bodyText": "Consider naming it VespaZooKeeperAdmin, similar to VespaZooKeeperServer.", "url": "https://github.com/vespa-engine/vespa/pull/15727#discussion_r538142034", "createdAt": "2020-12-08T08:41:05Z", "author": {"login": "mpolden"}, "path": "zookeeper-server/zookeeper-server-common/src/main/java/com/yahoo/vespa/zookeeper/ZkAdmin.java", "diffHunk": "@@ -0,0 +1,18 @@\n+// Copyright Verizon Media. Licensed under the terms of the Apache 2.0 license. See LICENSE in the project root.\n+package com.yahoo.vespa.zookeeper;\n+\n+import java.time.Duration;\n+\n+/**\n+ * Interface for administering a zookeeper cluster. Currently only supports reconfiguring a zookeeper cluster.\n+ *\n+ * @author hmusum\n+ */\n+public interface ZkAdmin {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f94fca1554fde44fd652739f3cf6e647d87184a"}, "originalPosition": 11}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c51b8fe382f8647cb624f34d408d33b90778eb43", "author": {"user": {"login": "hmusum", "name": "Harald Musum"}}, "url": "https://github.com/vespa-engine/vespa/commit/c51b8fe382f8647cb624f34d408d33b90778eb43", "committedDate": "2020-12-08T08:59:27Z", "message": "Inline watcher and rename class"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ2OTUzMTUw", "url": "https://github.com/vespa-engine/vespa/pull/15727#pullrequestreview-546953150", "createdAt": "2020-12-08T09:37:40Z", "commit": {"oid": "c51b8fe382f8647cb624f34d408d33b90778eb43"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3811, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}