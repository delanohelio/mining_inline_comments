{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQyMTQ4NTM1", "number": 15843, "title": "Add some smartness to what to build in PR's.", "bodyText": "", "createdAt": "2020-12-17T21:47:34Z", "url": "https://github.com/vespa-engine/vespa/pull/15843", "merged": true, "mergeCommit": {"oid": "f6eb76ea7290b66a6e2d83fbb20413603b04a543"}, "closed": true, "closedAt": "2020-12-18T12:03:56Z", "author": {"login": "aressem"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdnKr4qAH2gAyNTQyMTQ4NTM1OjBmMTQ1YThjOWZjZTM5ZmE4NjJiMGViMmI1NjhiYTJhMWZhODQyMTY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdnWussAFqTU1NTQyMjI3OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "0f145a8c9fce39fa862b0eb2b568ba2a1fa84216", "author": {"user": {"login": "aressem", "name": "Arnstein Ressem"}}, "url": "https://github.com/vespa-engine/vespa/commit/0f145a8c9fce39fa862b0eb2b568ba2a1fa84216", "committedDate": "2020-12-17T21:47:16Z", "message": "Add some smartness to what to build in PR's."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e05249a2380721ed4c491b386c5da4ae0f92e97b", "author": {"user": {"login": "aressem", "name": "Arnstein Ressem"}}, "url": "https://github.com/vespa-engine/vespa/commit/e05249a2380721ed4c491b386c5da4ae0f92e97b", "committedDate": "2020-12-18T07:34:52Z", "message": "Only set -e"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a121c888ea4b606f855890ebda936987a3e2a81f", "author": {"user": {"login": "aressem", "name": "Arnstein Ressem"}}, "url": "https://github.com/vespa-engine/vespa/commit/a121c888ea4b606f855890ebda936987a3e2a81f", "committedDate": "2020-12-18T08:21:31Z", "message": "Print something if the detection failed."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU1NDE0MTE5", "url": "https://github.com/vespa-engine/vespa/pull/15843#pullrequestreview-555414119", "createdAt": "2020-12-18T11:35:09Z", "commit": {"oid": "a121c888ea4b606f855890ebda936987a3e2a81f"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQxMTozNTowOVrOIIfdxg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQxMTozNTowOVrOIIfdxg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTc3NTA0Ng==", "bodyText": "Shouldn't this be bootstrap.sh full?", "url": "https://github.com/vespa-engine/vespa/pull/15843#discussion_r545775046", "createdAt": "2020-12-18T11:35:09Z", "author": {"login": "hmusum"}, "path": "travis/travis-build.sh", "diffHunk": "@@ -0,0 +1,49 @@\n+#!/bin/bash\n+# Copyright Verizon Media. Licensed under the terms of the Apache 2.0 license. See LICENSE in the project root.\n+\n+set -e\n+\n+export SOURCE_DIR=/source\n+export NUM_THREADS=6\n+export MALLOC_ARENA_MAX=1\n+export MAVEN_OPTS=\"-Xss1m -Xms128m -Xmx2g\"\n+source /etc/profile.d/enable-devtoolset-9.sh\n+source /etc/profile.d/enable-rh-maven35.sh\n+\n+ccache --max-size=1600M\n+ccache --set-config=compression=true\n+ccache -p\n+\n+if ! source /source/travis/detect-what-to-build.sh; then\n+    echo \"Could not detect what to build.\"\n+    SHOULD_BUILD=all\n+fi\n+\n+echo \"Building: $SHOULD_BUILD\"\n+\n+cd ${SOURCE_DIR}\n+\n+case $SHOULD_BUILD in\n+  cpp)\n+    env VESPA_MAVEN_EXTRA_OPTS=\"--no-snapshot-updates --batch-mode --threads ${NUM_THREADS}\" sh ./bootstrap.sh full\n+    cmake3 -DVESPA_UNPRIVILEGED=no .\n+    make -j ${NUM_THREADS}\n+    ctest3 --output-on-failure -j ${NUM_THREADS}\n+    ccache --show-stats\n+    ;;\n+  java)\n+    env VESPA_MAVEN_EXTRA_OPTS=\"--no-snapshot-updates --batch-mode --threads ${NUM_THREADS}\" sh ./bootstrap.sh java\n+    mvn -V install --no-snapshot-updates --batch-mode --threads ${NUM_THREADS}\n+    ;;\n+  *)\n+    env VESPA_MAVEN_EXTRA_OPTS=\"--no-snapshot-updates --batch-mode --threads ${NUM_THREADS}\" sh ./bootstrap.sh java", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a121c888ea4b606f855890ebda936987a3e2a81f"}, "originalPosition": 39}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU1NDIyMjc4", "url": "https://github.com/vespa-engine/vespa/pull/15843#pullrequestreview-555422278", "createdAt": "2020-12-18T11:49:12Z", "commit": {"oid": "a121c888ea4b606f855890ebda936987a3e2a81f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3784, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}