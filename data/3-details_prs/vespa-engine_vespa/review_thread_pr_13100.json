{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEwNjA4NDc0", "number": 13100, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQxMDoxNToxMFrOD3j_pg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQxMDoyMjo0MlrOD3kIuQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU5NTg4MDA2OnYy", "diffSide": "RIGHT", "path": "searchcore/src/vespa/searchcore/proton/documentmetastore/documentmetastore.h", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQxMDoxNToxMFrOGN4XTQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQxMjozMDozNVrOGN8kcg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzIwODE0MQ==", "bodyText": "Consider using std::shared_ptr<documentmetastore::OperationListener>, to be consistent with forward declaration above\nand not depend on corresponding include file having been included.", "url": "https://github.com/vespa-engine/vespa/pull/13100#discussion_r417208141", "createdAt": "2020-04-29T10:15:10Z", "author": {"login": "toregge"}, "path": "searchcore/src/vespa/searchcore/proton/documentmetastore/documentmetastore.h", "diffHunk": "@@ -71,7 +74,7 @@ class DocumentMetaStore final : public DocumentMetaStoreAttribute,\n     uint32_t            _shrinkLidSpaceBlockers;\n     const SubDbType     _subDbType;\n     bool                _trackDocumentSizes;\n-    search::LidUsageStats::TimePoint _last_remove_batch;\n+    documentmetastore::OperationListener::SP _op_listener;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7cc0f99900706932ac98c29af66c609199387785"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzI3NzA0Mg==", "bodyText": "Fixed", "url": "https://github.com/vespa-engine/vespa/pull/13100#discussion_r417277042", "createdAt": "2020-04-29T12:30:35Z", "author": {"login": "geirst"}, "path": "searchcore/src/vespa/searchcore/proton/documentmetastore/documentmetastore.h", "diffHunk": "@@ -71,7 +74,7 @@ class DocumentMetaStore final : public DocumentMetaStoreAttribute,\n     uint32_t            _shrinkLidSpaceBlockers;\n     const SubDbType     _subDbType;\n     bool                _trackDocumentSizes;\n-    search::LidUsageStats::TimePoint _last_remove_batch;\n+    documentmetastore::OperationListener::SP _op_listener;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzIwODE0MQ=="}, "originalCommit": {"oid": "7cc0f99900706932ac98c29af66c609199387785"}, "originalPosition": 23}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU5NTkwMDgyOnYy", "diffSide": "RIGHT", "path": "searchcore/src/vespa/searchcore/proton/documentmetastore/i_document_meta_store.h", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQxMDoyMTo1NFrOGN4kQw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQxMjozMDo0MVrOGN8kpA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzIxMTQ1OQ==", "bodyText": "Consider forward declaring documentmetastore::OperationListener and using std::shared_ptr here.", "url": "https://github.com/vespa-engine/vespa/pull/13100#discussion_r417211459", "createdAt": "2020-04-29T10:21:54Z", "author": {"login": "toregge"}, "path": "searchcore/src/vespa/searchcore/proton/documentmetastore/i_document_meta_store.h", "diffHunk": "@@ -82,6 +83,8 @@ struct IDocumentMetaStore : public search::IDocumentMetaStore,\n      */\n     virtual void compactLidSpace(DocId wantedLidLimit) = 0;\n \n+    virtual void set_operation_listener(documentmetastore::OperationListener::SP op_listener) = 0;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7cc0f99900706932ac98c29af66c609199387785"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzI3NzA5Mg==", "bodyText": "Fixed", "url": "https://github.com/vespa-engine/vespa/pull/13100#discussion_r417277092", "createdAt": "2020-04-29T12:30:41Z", "author": {"login": "geirst"}, "path": "searchcore/src/vespa/searchcore/proton/documentmetastore/i_document_meta_store.h", "diffHunk": "@@ -82,6 +83,8 @@ struct IDocumentMetaStore : public search::IDocumentMetaStore,\n      */\n     virtual void compactLidSpace(DocId wantedLidLimit) = 0;\n \n+    virtual void set_operation_listener(documentmetastore::OperationListener::SP op_listener) = 0;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzIxMTQ1OQ=="}, "originalCommit": {"oid": "7cc0f99900706932ac98c29af66c609199387785"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU5NTkwMzI5OnYy", "diffSide": "RIGHT", "path": "searchcore/src/vespa/searchcore/proton/documentmetastore/i_document_meta_store.h", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQxMDoyMjo0MlrOGN4l0Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQxMjozMDo0OFrOGN8k3w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzIxMTg1Nw==", "bodyText": "This include is not needed if documentmetastore::OperationListener is forward declared later on in this file.", "url": "https://github.com/vespa-engine/vespa/pull/13100#discussion_r417211857", "createdAt": "2020-04-29T10:22:42Z", "author": {"login": "toregge"}, "path": "searchcore/src/vespa/searchcore/proton/documentmetastore/i_document_meta_store.h", "diffHunk": "@@ -4,6 +4,7 @@\n \n #include \"lid_gid_key_comparator.h\"\n #include \"i_simple_document_meta_store.h\"\n+#include \"operation_listener.h\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7cc0f99900706932ac98c29af66c609199387785"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzI3NzE1MQ==", "bodyText": "Fixed", "url": "https://github.com/vespa-engine/vespa/pull/13100#discussion_r417277151", "createdAt": "2020-04-29T12:30:48Z", "author": {"login": "geirst"}, "path": "searchcore/src/vespa/searchcore/proton/documentmetastore/i_document_meta_store.h", "diffHunk": "@@ -4,6 +4,7 @@\n \n #include \"lid_gid_key_comparator.h\"\n #include \"i_simple_document_meta_store.h\"\n+#include \"operation_listener.h\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzIxMTg1Nw=="}, "originalCommit": {"oid": "7cc0f99900706932ac98c29af66c609199387785"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1682, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}