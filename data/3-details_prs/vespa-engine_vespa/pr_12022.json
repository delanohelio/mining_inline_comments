{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY5NTc2ODI5", "number": 12022, "title": "Support using imported fields in document selection expressions", "bodyText": "@geirst please review\n@toregge please review 4c6c916 and a1bb9ca\nThis adds end-to-end support for using imported fields as part of document selections (and thereby GC expressions). Since the information required to match imported attributes against their parent documents is only available in the search core backend, all other evaluations of such selections treat imported fields as if they are valid but missing. This means that the same logic that is used for missing (null) fields today can be used for dealing with missing imported fields.\nWith these changes, the identities of imported fields will be present in the concrete document type configs rather than only being available through a separate config.\nTo be followed by feature system tests early next week.", "createdAt": "2020-01-31T13:15:50Z", "url": "https://github.com/vespa-engine/vespa/pull/12022", "merged": true, "mergeCommit": {"oid": "013df9d9d5e84a018b47ff666e3459902aba40fc"}, "closed": true, "closedAt": "2020-02-03T11:50:50Z", "author": {"login": "vekterli"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb_spRwAH2gAyMzY5NTc2ODI5OjIyOGQ4ODAzOTVlOWFlMDdlOWU1NWNhMzE1ZjM4MWExZGU5MWNjMTU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcAqBm1gH2gAyMzY5NTc2ODI5OjY1ZDQxYTQ3ZTNkZjkyNGMzNDFkMjMyZDJhNmVkNWY0OWZiYjk2Y2Q=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "228d880395e9ae07e9e55ca315f381a1de91cc15", "author": {"user": {"login": "vekterli", "name": "Tor Brede Vekterli"}}, "url": "https://github.com/vespa-engine/vespa/commit/228d880395e9ae07e9e55ca315f381a1de91cc15", "committedDate": "2020-01-31T10:33:04Z", "message": "Add imported fields to document configs\n\nThis adds the field names of all imported fields in a search definition\nto the document configs associated with it (document manager and document\ntypes config for Java and C++, respectively). This enables consumers of\nthese configs to distinguish between field references to imported fields\nand fields that don't exist in the document schema itself."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "918aa65874eb4ddac5ae251862e1ee4887e81d1b", "author": {"user": {"login": "vekterli", "name": "Tor Brede Vekterli"}}, "url": "https://github.com/vespa-engine/vespa/commit/918aa65874eb4ddac5ae251862e1ee4887e81d1b", "committedDate": "2020-01-31T10:33:08Z", "message": "Wire imported fields config into Java DocumentType"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c5d747c072f8a94f30e6748737b5f1ad2023dcf0", "author": {"user": {"login": "vekterli", "name": "Tor Brede Vekterli"}}, "url": "https://github.com/vespa-engine/vespa/commit/c5d747c072f8a94f30e6748737b5f1ad2023dcf0", "committedDate": "2020-01-31T10:33:08Z", "message": "Detect and handle simple imported fields in expressions (Java)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cf606f5c9610df78ae57b516c5415350418633fa", "author": {"user": {"login": "vekterli", "name": "Tor Brede Vekterli"}}, "url": "https://github.com/vespa-engine/vespa/commit/cf606f5c9610df78ae57b516c5415350418633fa", "committedDate": "2020-01-31T10:33:08Z", "message": "Propagate configured imported fields to DocumentTypeRepo (C++)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a3d50fb4b8ea0e6cea01d9283d7029d7ed88fb3c", "author": {"user": {"login": "vekterli", "name": "Tor Brede Vekterli"}}, "url": "https://github.com/vespa-engine/vespa/commit/a3d50fb4b8ea0e6cea01d9283d7029d7ed88fb3c", "committedDate": "2020-01-31T10:33:08Z", "message": "Detect and handle simple imported fields in expressions (C++)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4c6c916212641e4759f85e9e598777c260932f23", "author": {"user": {"login": "vekterli", "name": "Tor Brede Vekterli"}}, "url": "https://github.com/vespa-engine/vespa/commit/4c6c916212641e4759f85e9e598777c260932f23", "committedDate": "2020-01-31T10:33:08Z", "message": "Forward isUndefined() for imported attributes to the target attribute vector\n\nDefault implementation would always return false, which means that the\nundefined sentinel value would be returned to--and used by--the caller."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a1bb9ca48345104869ee7dfe3844b2b1fcb679a9", "author": {"user": {"login": "vekterli", "name": "Tor Brede Vekterli"}}, "url": "https://github.com/vespa-engine/vespa/commit/a1bb9ca48345104869ee7dfe3844b2b1fcb679a9", "committedDate": "2020-01-31T10:33:08Z", "message": "Support imported attribute fields in backend selection logic"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "75e04be1f59da14324f0e91d2304a385f09ead7b", "author": {"user": {"login": "vekterli", "name": "Tor Brede Vekterli"}}, "url": "https://github.com/vespa-engine/vespa/commit/75e04be1f59da14324f0e91d2304a385f09ead7b", "committedDate": "2020-01-31T15:22:42Z", "message": "Add copyright to new files"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUyMDk1NDU4", "url": "https://github.com/vespa-engine/vespa/pull/12022#pullrequestreview-352095458", "createdAt": "2020-02-03T08:53:14Z", "commit": {"oid": "228d880395e9ae07e9e55ca315f381a1de91cc15"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QwODo1MzoxNVrOFkp-Iw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QwODo1MzoxNVrOFkp-Iw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzk4MDcwNw==", "bodyText": "Please add description similar to the one in documentmanager.def.", "url": "https://github.com/vespa-engine/vespa/pull/12022#discussion_r373980707", "createdAt": "2020-02-03T08:53:15Z", "author": {"login": "geirst"}, "path": "document/src/vespa/document/config/documenttypes.def", "diffHunk": "@@ -104,3 +104,5 @@ documenttype[].referencetype[].id int\n \n ## Numeric ID of the document type instances of the reference point to.\n documenttype[].referencetype[].target_type_id int\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "228d880395e9ae07e9e55ca315f381a1de91cc15"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "65d41a47e3df924c341d232d2a6ed5f49fbb96cd", "author": {"user": {"login": "vekterli", "name": "Tor Brede Vekterli"}}, "url": "https://github.com/vespa-engine/vespa/commit/65d41a47e3df924c341d232d2a6ed5f49fbb96cd", "committedDate": "2020-02-03T10:03:51Z", "message": "Add comment to importedfield entry in documenttypes config definition"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3920, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}