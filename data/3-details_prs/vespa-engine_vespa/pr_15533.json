{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI5NDkwMzA1", "number": 15533, "title": "renumber Peek children, the sequel", "bodyText": "change the ReferenceOperations peek API also, putting\nthe input parameter as the first child, and numbering\nchild indexes in the Spec starting at 1.\n\nI confirm that this contribution is made under the terms of the license found in the root directory of this repository's source tree and that I have the authority necessary to make this contribution on behalf of its copyright owner.\n@havardpe please review", "createdAt": "2020-11-30T11:40:46Z", "url": "https://github.com/vespa-engine/vespa/pull/15533", "merged": true, "mergeCommit": {"oid": "3e5cf1de4c336c2e8d4f3a380dc242f402cb6dea"}, "closed": true, "closedAt": "2020-11-30T21:17:34Z", "author": {"login": "arnej27959"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdhkao-gFqTU0MDg1NjgxNA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdhlMjUABqjQwNTE4ODEyNDQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQwODU2ODE0", "url": "https://github.com/vespa-engine/vespa/pull/15533#pullrequestreview-540856814", "createdAt": "2020-11-30T12:20:58Z", "commit": {"oid": "4c12600e5f86cdcd8ae66f88dc3ad5b0f383ceca"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0zMFQxMjoyMDo1OFrOH74sTg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0zMFQxMjoyMTo0MFrOH74txQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjU1Njg3OA==", "bodyText": "should no longer normalize here, since it is done in eval_node instead", "url": "https://github.com/vespa-engine/vespa/pull/15533#discussion_r532556878", "createdAt": "2020-11-30T12:20:58Z", "author": {"login": "havardpe"}, "path": "eval/src/vespa/eval/eval/test/reference_evaluation.cpp", "diffHunk": "@@ -135,7 +130,7 @@ struct EvalNode : public NodeVisitor {\n                 }\n             }\n         }\n-        result = ReferenceOperations::peek(param, spec, children).normalize();\n+        result = ReferenceOperations::peek(spec, children).normalize();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4c12600e5f86cdcd8ae66f88dc3ad5b0f383ceca"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjU1NzI1Mw==", "bodyText": "should also check for empty children", "url": "https://github.com/vespa-engine/vespa/pull/15533#discussion_r532557253", "createdAt": "2020-11-30T12:21:40Z", "author": {"login": "havardpe"}, "path": "eval/src/vespa/eval/eval/test/reference_operations.cpp", "diffHunk": "@@ -175,14 +175,15 @@ TensorSpec ReferenceOperations::merge(const TensorSpec &a, const TensorSpec &b,\n }\n \n \n-TensorSpec ReferenceOperations::peek(const TensorSpec &param, const PeekSpec &peek_spec, const std::vector<TensorSpec> &children) {\n+TensorSpec ReferenceOperations::peek(const PeekSpec &peek_spec, const std::vector<TensorSpec> &children) {\n     if (peek_spec.empty()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4c12600e5f86cdcd8ae66f88dc3ad5b0f383ceca"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c65ddeb8386bda44c33324a3f6e8950a817ad46d", "author": {"user": {"login": "arnej27959", "name": "Arne H Juul"}}, "url": "https://github.com/vespa-engine/vespa/commit/c65ddeb8386bda44c33324a3f6e8950a817ad46d", "committedDate": "2020-11-30T13:16:19Z", "message": "renumber Peek children, the sequel\n\n* change the ReferenceOperations peek API also, putting\n  the input parameter as the first child, and numbering\n  child indexes in the Spec starting at 1."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "582f6150b046e5563a3870011cd399deeabb2932", "author": {"user": {"login": "arnej27959", "name": "Arne H Juul"}}, "url": "https://github.com/vespa-engine/vespa/commit/582f6150b046e5563a3870011cd399deeabb2932", "committedDate": "2020-11-30T13:16:28Z", "message": "also check for empty children"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0af78d7cdd159aaa5c46c994758531fd5a29dab7", "author": {"user": {"login": "arnej27959", "name": "Arne H Juul"}}, "url": "https://github.com/vespa-engine/vespa/commit/0af78d7cdd159aaa5c46c994758531fd5a29dab7", "committedDate": "2020-11-30T13:14:20Z", "message": "also check for empty children"}, "afterCommit": {"oid": "582f6150b046e5563a3870011cd399deeabb2932", "author": {"user": {"login": "arnej27959", "name": "Arne H Juul"}}, "url": "https://github.com/vespa-engine/vespa/commit/582f6150b046e5563a3870011cd399deeabb2932", "committedDate": "2020-11-30T13:16:28Z", "message": "also check for empty children"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1803, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}