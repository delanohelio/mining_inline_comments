{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA0MDAzMjUy", "number": 12934, "title": "Unset IP addresses on deprovisioning ", "bodyText": "I confirm that this contribution is made under the terms of the license found in the root directory of this repository's source tree and that I have the authority necessary to make this contribution on behalf of its copyright owner.", "createdAt": "2020-04-15T21:40:34Z", "url": "https://github.com/vespa-engine/vespa/pull/12934", "merged": true, "mergeCommit": {"oid": "27c4b91619083e756d691f4749efa4bb88e6da7a"}, "closed": true, "closedAt": "2020-04-17T07:47:09Z", "author": {"login": "bjormel"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcX_IoLgH2gAyNDA0MDAzMjUyOjRlZjhhMzg3ZWM5YWY0YWE0MzYwODlhNTExOGM4OGQ1ZmQxZTBlOTA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcYLKX2gH2gAyNDA0MDAzMjUyOjQ4OGVmMjhiNWJiMmZmNTRiMTA3ODNiMDcxMmNjNTZiY2Q4ZWI0Mzg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "4ef8a387ec9af4aa436089a5118c88d5fd1e0e90", "author": {"user": {"login": "bjormel", "name": "Bj\u00f8rn Meland"}}, "url": "https://github.com/vespa-engine/vespa/commit/4ef8a387ec9af4aa436089a5118c88d5fd1e0e90", "committedDate": "2020-04-15T21:39:47Z", "message": "Unset IP addresses on deprovisioning"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "394d5ac7d2f154791f4516bf5d66e495b50214c2", "author": {"user": {"login": "bjormel", "name": "Bj\u00f8rn Meland"}}, "url": "https://github.com/vespa-engine/vespa/commit/394d5ac7d2f154791f4516bf5d66e495b50214c2", "committedDate": "2020-04-16T08:56:21Z", "message": "Removed unnecessary method"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk0NDgyMDg4", "url": "https://github.com/vespa-engine/vespa/pull/12934#pullrequestreview-394482088", "createdAt": "2020-04-16T10:01:41Z", "commit": {"oid": "394d5ac7d2f154791f4516bf5d66e495b50214c2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk0NDgyOTQ5", "url": "https://github.com/vespa-engine/vespa/pull/12934#pullrequestreview-394482949", "createdAt": "2020-04-16T10:02:49Z", "commit": {"oid": "394d5ac7d2f154791f4516bf5d66e495b50214c2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQxMDowMjo0OVrOGGd-Fg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQxMDowMjo0OVrOGGd-Fg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTQzNTY3MA==", "bodyText": "Consider extending one of the deprovision tests in NodeRepositoryTest to test this behaviour.", "url": "https://github.com/vespa-engine/vespa/pull/12934#discussion_r409435670", "createdAt": "2020-04-16T10:02:49Z", "author": {"login": "mpolden"}, "path": "node-repository/src/main/java/com/yahoo/vespa/hosted/provision/NodeRepository.java", "diffHunk": "@@ -629,8 +629,10 @@ public Node markNodeAvailableForNewAllocation(String hostname, Agent agent, Stri\n                 List<Node> removed = new ArrayList<>(children);\n                 if (zone.cloud().value().equals(\"aws\"))\n                     db.removeNodes(List.of(node));\n-                else\n+                else {\n+                    node = node.with(IP.Config.EMPTY);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "394d5ac7d2f154791f4516bf5d66e495b50214c2"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "488ef28b5bb2ff54b10783b0712cc56bcd8eb438", "author": {"user": {"login": "bjormel", "name": "Bj\u00f8rn Meland"}}, "url": "https://github.com/vespa-engine/vespa/commit/488ef28b5bb2ff54b10783b0712cc56bcd8eb438", "committedDate": "2020-04-16T11:40:33Z", "message": "Testing for reset of IP Config"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3420, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}