{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc5NTkxMTQ2", "number": 12335, "title": "Keep Athenz user domains lookup for 1min, per identity", "bodyText": "@mpolden please review. @bjorncs @tokle FYI.\nThere is already some delay on Athenz' end, so adding another minute on our side shouldn't matter much? It would, however, make access control much faster, for all requests using Athenz for authorisation, and also reduce the number of calls we do against Athenz by a great deal.", "createdAt": "2020-02-25T13:43:32Z", "url": "https://github.com/vespa-engine/vespa/pull/12335", "merged": true, "mergeCommit": {"oid": "275ae4e28004b515afd793eb39bb1f044a23c67f"}, "closed": true, "closedAt": "2020-02-27T09:49:36Z", "author": {"login": "jonmv"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcHyUVcgH2gAyMzc5NTkxMTQ2Ojk0OGIyMDY3YjkzZmMzNjM0NTgzY2M1NTQ1ZGFlYzRjNGZkM2IwYjQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcIYMDnAFqTM2NTU0MDg1Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "948b2067b93fc3634583cc5545daec4c4fd3b0b4", "author": {"user": {"login": "jonmv", "name": "Jon Marius Venstad"}}, "url": "https://github.com/vespa-engine/vespa/commit/948b2067b93fc3634583cc5545daec4c4fd3b0b4", "committedDate": "2020-02-25T13:41:01Z", "message": "Keep Athenz user domains lookup for 1min, per identity"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a0e14da8a3439ab1d96ecfc11a5c544555cef15c", "author": {"user": {"login": "jonmv", "name": "Jon Marius Venstad"}}, "url": "https://github.com/vespa-engine/vespa/commit/a0e14da8a3439ab1d96ecfc11a5c544555cef15c", "committedDate": "2020-02-25T14:59:11Z", "message": "Cache ZMS has-access lookups as well"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "481c2cf7bd964682deefe3cb6fa0530604eed92b", "author": {"user": {"login": "jonmv", "name": "Jon Marius Venstad"}}, "url": "https://github.com/vespa-engine/vespa/commit/481c2cf7bd964682deefe3cb6fa0530604eed92b", "committedDate": "2020-02-25T15:23:38Z", "message": "Parallellise lookups to ZMS during access control evaluation"}, "afterCommit": {"oid": "9440ecd2f5dd358ce24e3f1e31c2907a87649a2d", "author": {"user": {"login": "jonmv", "name": "Jon Marius Venstad"}}, "url": "https://github.com/vespa-engine/vespa/commit/9440ecd2f5dd358ce24e3f1e31c2907a87649a2d", "committedDate": "2020-02-25T15:25:50Z", "message": "Parallellise lookups to ZMS during access control evaluation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d44c49fbc6ad1f4901cd5a1b6c9ec4d43580f13c", "author": {"user": {"login": "jonmv", "name": "Jon Marius Venstad"}}, "url": "https://github.com/vespa-engine/vespa/commit/d44c49fbc6ad1f4901cd5a1b6c9ec4d43580f13c", "committedDate": "2020-02-25T15:27:57Z", "message": "Parallellise lookups to ZMS during access control evaluation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9440ecd2f5dd358ce24e3f1e31c2907a87649a2d", "author": {"user": {"login": "jonmv", "name": "Jon Marius Venstad"}}, "url": "https://github.com/vespa-engine/vespa/commit/9440ecd2f5dd358ce24e3f1e31c2907a87649a2d", "committedDate": "2020-02-25T15:25:50Z", "message": "Parallellise lookups to ZMS during access control evaluation"}, "afterCommit": {"oid": "d44c49fbc6ad1f4901cd5a1b6c9ec4d43580f13c", "author": {"user": {"login": "jonmv", "name": "Jon Marius Venstad"}}, "url": "https://github.com/vespa-engine/vespa/commit/d44c49fbc6ad1f4901cd5a1b6c9ec4d43580f13c", "committedDate": "2020-02-25T15:27:57Z", "message": "Parallellise lookups to ZMS during access control evaluation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dd530f2c269442230f3285649fec166c7ca4b1fa", "author": {"user": {"login": "jonmv", "name": "Jon Marius Venstad"}}, "url": "https://github.com/vespa-engine/vespa/commit/dd530f2c269442230f3285649fec166c7ca4b1fa", "committedDate": "2020-02-25T15:32:00Z", "message": "Rename variable with silly name"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "29c74cfb8d63216a7bf310826398b79c3945f8ca", "author": {"user": {"login": "jonmv", "name": "Jon Marius Venstad"}}, "url": "https://github.com/vespa-engine/vespa/commit/29c74cfb8d63216a7bf310826398b79c3945f8ca", "committedDate": "2020-02-26T07:57:32Z", "message": "Merge branch 'master' into jvenstad/cache-Athenz-user-domains"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY1MDAwNDI0", "url": "https://github.com/vespa-engine/vespa/pull/12335#pullrequestreview-365000424", "createdAt": "2020-02-26T15:34:12Z", "commit": {"oid": "29c74cfb8d63216a7bf310826398b79c3945f8ca"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQxNTozNDoxMlrOFuwYdg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQxNTozNDoxMlrOFuwYdg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDU3MTUxMA==", "bodyText": "Should probably be shut down on deconstruction? (Not 100% on whether this applies to filters)", "url": "https://github.com/vespa-engine/vespa/pull/12335#discussion_r384571510", "createdAt": "2020-02-26T15:34:12Z", "author": {"login": "mpolden"}, "path": "controller-server/src/main/java/com/yahoo/vespa/hosted/controller/restapi/filter/AthenzRoleFilter.java", "diffHunk": "@@ -46,11 +50,13 @@\n \n     private final AthenzFacade athenz;\n     private final TenantController tenants;\n+    private final ExecutorService executor;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "29c74cfb8d63216a7bf310826398b79c3945f8ca"}, "originalPosition": 37}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2955bfcc05234ccc3c7a61a6bb10c7caddeb7989", "author": {"user": {"login": "jonmv", "name": "Jon Marius Venstad"}}, "url": "https://github.com/vespa-engine/vespa/commit/2955bfcc05234ccc3c7a61a6bb10c7caddeb7989", "committedDate": "2020-02-27T09:23:26Z", "message": "Close executor on deconstruction"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY1NTQwODUz", "url": "https://github.com/vespa-engine/vespa/pull/12335#pullrequestreview-365540853", "createdAt": "2020-02-27T09:48:22Z", "commit": {"oid": "2955bfcc05234ccc3c7a61a6bb10c7caddeb7989"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2815, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}