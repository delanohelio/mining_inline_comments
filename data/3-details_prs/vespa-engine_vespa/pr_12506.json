{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg1NDU3MTYx", "number": 12506, "title": "Jonmv/compile version on separate path", "bodyText": "@mpolden please review and merge.", "createdAt": "2020-03-09T08:52:37Z", "url": "https://github.com/vespa-engine/vespa/pull/12506", "merged": true, "mergeCommit": {"oid": "a70515167a9f7f717d47002a6f41503d535a4048"}, "closed": true, "closedAt": "2020-03-09T12:34:29Z", "author": {"login": "jonmv"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcL5-iqgH2gAyMzg1NDU3MTYxOjE4NzFjYjM4ODI5ZGNmNDNkNjQxNDFjZTQ3NDdhOGI5ODRhODMzOTc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcL82GtgFqTM3MTExMTkxMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "1871cb38829dcf43d64141ce4747a8b984a83397", "author": {"user": {"login": "jonmv", "name": "Jon Marius Venstad"}}, "url": "https://github.com/vespa-engine/vespa/commit/1871cb38829dcf43d64141ce4747a8b984a83397", "committedDate": "2020-03-09T08:52:09Z", "message": "Expose compile version on separate path"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "152bbcc34a406ce3746bbc352addbc807e1de252", "author": {"user": {"login": "jonmv", "name": "Jon Marius Venstad"}}, "url": "https://github.com/vespa-engine/vespa/commit/152bbcc34a406ce3746bbc352addbc807e1de252", "committedDate": "2020-03-09T08:52:18Z", "message": "Use new path for compile version"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcxMTExOTEy", "url": "https://github.com/vespa-engine/vespa/pull/12506#pullrequestreview-371111912", "createdAt": "2020-03-09T12:12:11Z", "commit": {"oid": "1871cb38829dcf43d64141ce4747a8b984a83397"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOVQxMjoxMjoxMVrOFzkmMg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOVQxMjoxMjoxMVrOFzkmMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTYyMTI5OA==", "bodyText": "Good.", "url": "https://github.com/vespa-engine/vespa/pull/12506#discussion_r389621298", "createdAt": "2020-03-09T12:12:11Z", "author": {"login": "mpolden"}, "path": "controller-server/src/main/java/com/yahoo/vespa/hosted/controller/restapi/application/ApplicationApiHandler.java", "diffHunk": "@@ -1176,20 +1186,21 @@ private URI monitoringSystemUri(DeploymentId deploymentId) {\n      */\n     private Version compileVersion(TenantAndApplicationId id) {\n         Version oldestPlatform = controller.applications().oldestInstalledPlatform(id);\n-        return controller.versionStatus().versions().stream()\n-                         .filter(version -> version.confidence().equalOrHigherThan(VespaVersion.Confidence.low))\n-                         .filter(VespaVersion::isReleased)\n-                         .map(VespaVersion::versionNumber)\n-                         .filter(version -> ! version.isAfter(oldestPlatform))\n-                         .max(Comparator.naturalOrder())\n-                         .orElseGet(() -> controller.mavenRepository().metadata().versions().stream()\n-                                                    .filter(version -> ! version.isAfter(oldestPlatform))\n-                                                    .filter(version -> ! controller.versionStatus().versions().stream()\n-                                                                                   .map(VespaVersion::versionNumber)\n-                                                                                   .collect(Collectors.toSet()).contains(version))\n-                                                    .max(Comparator.naturalOrder())\n-                                                    .orElseThrow(() -> new IllegalStateException(\"No available releases of \" +\n-                                                                                                 controller.mavenRepository().artifactId())));\n+        VersionStatus versionStatus = controller.versionStatus();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1871cb38829dcf43d64141ce4747a8b984a83397"}, "originalPosition": 72}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2776, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}