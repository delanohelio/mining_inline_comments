{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE5MzQxOTk2", "number": 2062, "title": "Some cleanup in span land.", "bodyText": "Clean up the SpanBuilder javadoc to match the current APIs\nScrub mentions of canonical status code\nDeprecate the getCanonicalCode method on SpanBuilder and replace with getStatusCode", "createdAt": "2020-11-11T17:23:30Z", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2062", "merged": true, "mergeCommit": {"oid": "1fe334ff12a867f427c3b0bb99da17949e73949c"}, "closed": true, "closedAt": "2020-11-12T02:34:07Z", "author": {"login": "jkwatson"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdbhle-AFqTUyODM5NTMxNA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdbpCnGgBqjM5ODY0NzQ5MTU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI4Mzk1MzE0", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2062#pullrequestreview-528395314", "createdAt": "2020-11-11T17:41:00Z", "commit": {"oid": "95a2a1a5092a6d9a2260a354ea06912330654433"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQxNzo0MTowMFrOHxXkEg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQxNzo0MTowMFrOHxXkEg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTUyODMzOA==", "bodyText": "I think we currently still have enough other breaking changes that it is OK to completely remove this. It's just a renaming, right?", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2062#discussion_r521528338", "createdAt": "2020-11-11T17:41:00Z", "author": {"login": "Oberon00"}, "path": "sdk/tracing/src/main/java/io/opentelemetry/sdk/trace/data/SpanData.java", "diffHunk": "@@ -340,12 +340,19 @@ static Status create(StatusCode code, @Nullable String description) {\n       return ImmutableStatus.create(code, description);\n     }\n \n+    /** Returns the status code. */\n+    StatusCode getStatusCode();\n+\n     /**\n-     * Returns the canonical status code.\n+     * Returns the status code.\n      *\n-     * @return the canonical status code.\n+     * @deprecated Please use {@link #getStatusCode()}. This method will be removed in the next\n+     *     release.\n      */\n-    StatusCode getCanonicalCode();\n+    @Deprecated", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "95a2a1a5092a6d9a2260a354ea06912330654433"}, "originalPosition": 16}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI4MzkyNDMz", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2062#pullrequestreview-528392433", "createdAt": "2020-11-11T17:36:53Z", "commit": {"oid": "95a2a1a5092a6d9a2260a354ea06912330654433"}, "state": "APPROVED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQxNzozNjo1NFrOHxXZaQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQxNzo0Njo0OVrOHxXwZw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTUyNTYwOQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n             *   private static final Tracer tracer = OpenTelemetry.get().getTracer(\"com.anyco.rpc\");\n          \n          \n            \n             *   private static final Tracer tracer = OpenTelemetry.get().getTracer(\"com.example.rpc\");\n          \n      \n    \n    \n  \n\nThis would be the reserved domain by IANA for such purposes.", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2062#discussion_r521525609", "createdAt": "2020-11-11T17:36:54Z", "author": {"login": "arminru"}, "path": "api/src/main/java/io/opentelemetry/api/trace/SpanBuilder.java", "diffHunk": "@@ -44,20 +45,20 @@\n  *\n  * <pre>{@code\n  * class MyRpcServerInterceptorListener implements RpcServerInterceptor.Listener {\n- *   private static final Tracer tracer = OpenTelemetry.getTracer();\n+ *   private static final Tracer tracer = OpenTelemetry.get().getTracer(\"com.anyco.rpc\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "95a2a1a5092a6d9a2260a354ea06912330654433"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTUyODQ4MQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                assertThat(spans.get(0).getStatus().getStatusCode()).isEqualTo(StatusCode.ERROR);\n          \n          \n            \n                assertThat(spans.get(0).getStatus().getStatusCode()).isEqualTo(StatusCode.ERROR);\n          \n          \n            \n                assertThat(spans.get(0).getStatus().getCanonicalCode()).isEqualTo(StatusCode.ERROR);\n          \n      \n    \n    \n  \n\nI'd also add tests assuring that the deprecated method still works and doesn't throw until it's removed.", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2062#discussion_r521528481", "createdAt": "2020-11-11T17:41:16Z", "author": {"login": "arminru"}, "path": "sdk/tracing/src/test/java/io/opentelemetry/sdk/trace/testbed/errorreporting/ErrorReportingTest.java", "diffHunk": "@@ -50,7 +50,7 @@ void testSimpleError() {\n \n     List<SpanData> spans = otelTesting.getSpans();\n     assertThat(spans).hasSize(1);\n-    assertThat(spans.get(0).getStatus().getCanonicalCode()).isEqualTo(StatusCode.ERROR);\n+    assertThat(spans.get(0).getStatus().getStatusCode()).isEqualTo(StatusCode.ERROR);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "95a2a1a5092a6d9a2260a354ea06912330654433"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTUzMTIzMw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n             *   private static final Tracer tracer = OpenTelemetry.get().getTracer(\"com.anyco.rpc\");\n          \n          \n            \n             *   private static final Tracer tracer = OpenTelemetry.get().getTracer(\"com.example.rpc\");", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2062#discussion_r521531233", "createdAt": "2020-11-11T17:46:18Z", "author": {"login": "arminru"}, "path": "api/src/main/java/io/opentelemetry/api/trace/SpanBuilder.java", "diffHunk": "@@ -84,10 +85,12 @@\n  *\n  * <pre>{@code\n  * class MyClass {\n- *   private static final Tracer tracer = OpenTelemetry.getTracer();\n- *   void DoWork(Span parent) {\n+ *   private static final Tracer tracer = OpenTelemetry.get().getTracer(\"com.anyco.rpc\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "95a2a1a5092a6d9a2260a354ea06912330654433"}, "originalPosition": 57}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTUzMTQ5NQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n               *   private static final Tracer tracer = OpenTelemetry.get().getTracer(\"com.anyco.rpc\");\n          \n          \n            \n               *   private static final Tracer tracer = OpenTelemetry.get().getTracer(\"com.example.rpc\");", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2062#discussion_r521531495", "createdAt": "2020-11-11T17:46:49Z", "author": {"login": "arminru"}, "path": "api/src/main/java/io/opentelemetry/api/trace/SpanBuilder.java", "diffHunk": "@@ -290,10 +292,11 @@ default SpanBuilder setStartTimestamp(Instant startTimestamp) {\n    *\n    * <pre>{@code\n    * class MyClass {\n-   *   private static final Tracer tracer = OpenTelemetry.getTracer();\n-   *   void DoWork(Span parent) {\n+   *   private static final Tracer tracer = OpenTelemetry.get().getTracer(\"com.anyco.rpc\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "95a2a1a5092a6d9a2260a354ea06912330654433"}, "originalPosition": 83}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI4NDU3MTg5", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2062#pullrequestreview-528457189", "createdAt": "2020-11-11T19:07:11Z", "commit": {"oid": "cef7184707c70e3ecf719cab366eac7c8e4c76df"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI4NjQzMTcx", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2062#pullrequestreview-528643171", "createdAt": "2020-11-12T00:06:58Z", "commit": {"oid": "3957cc61e9a6375232593c15c8b8f6515ff1c1a8"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "00a69b1fa70ab87fdbbc41155e89b378d233bba7", "author": {"user": {"login": "jkwatson", "name": "John Watson"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/00a69b1fa70ab87fdbbc41155e89b378d233bba7", "committedDate": "2020-11-12T00:11:33Z", "message": "Some cleanup in span land.\n* Clean up the SpanBuilder javadoc to match the current APIs\n* Scrub mentions of canonical status code\n* Deprecate the getCanonicalCode method on SpanBuilder and replace with getStatusCode"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "19db52c60458e4bebb52928863124d5b9703dd0a", "author": {"user": {"login": "jkwatson", "name": "John Watson"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/19db52c60458e4bebb52928863124d5b9703dd0a", "committedDate": "2020-11-12T00:11:36Z", "message": "rename an internal method to make more sense"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4fe3cd713e80bb4d027b7efab190fa002cc49b60", "author": {"user": {"login": "jkwatson", "name": "John Watson"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/4fe3cd713e80bb4d027b7efab190fa002cc49b60", "committedDate": "2020-11-12T00:11:36Z", "message": "Update api/src/main/java/io/opentelemetry/api/trace/SpanBuilder.java\n\nCo-authored-by: Armin Ruech <armin.ruech@dynatrace.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "60beb80e412c9a7476f7a29e3c86d85ea21b3a4a", "author": {"user": {"login": "jkwatson", "name": "John Watson"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/60beb80e412c9a7476f7a29e3c86d85ea21b3a4a", "committedDate": "2020-11-12T00:11:36Z", "message": "Update api/src/main/java/io/opentelemetry/api/trace/SpanBuilder.java\n\nCo-authored-by: Armin Ruech <armin.ruech@dynatrace.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3c7790be8615c34ffcbd92decd0e277e369e627e", "author": {"user": {"login": "jkwatson", "name": "John Watson"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/3c7790be8615c34ffcbd92decd0e277e369e627e", "committedDate": "2020-11-12T00:11:36Z", "message": "Update api/src/main/java/io/opentelemetry/api/trace/SpanBuilder.java\n\nCo-authored-by: Armin Ruech <armin.ruech@dynatrace.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3e10818516f018cedb401730749d4848bc7f76b1", "author": {"user": {"login": "jkwatson", "name": "John Watson"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/3e10818516f018cedb401730749d4848bc7f76b1", "committedDate": "2020-11-12T00:11:36Z", "message": "add tests for the deprecated method"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3957cc61e9a6375232593c15c8b8f6515ff1c1a8", "author": {"user": {"login": "jkwatson", "name": "John Watson"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/3957cc61e9a6375232593c15c8b8f6515ff1c1a8", "committedDate": "2020-11-11T20:30:12Z", "message": "add tests for the deprecated method"}, "afterCommit": {"oid": "3e10818516f018cedb401730749d4848bc7f76b1", "author": {"user": {"login": "jkwatson", "name": "John Watson"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/3e10818516f018cedb401730749d4848bc7f76b1", "committedDate": "2020-11-12T00:11:36Z", "message": "add tests for the deprecated method"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4020, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}