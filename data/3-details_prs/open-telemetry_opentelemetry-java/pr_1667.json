{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkwMjg0NDU1", "number": 1667, "title": "de-duplicate fields in TraceMultiPropagator", "bodyText": "fix #1388", "createdAt": "2020-09-21T13:08:03Z", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1667", "merged": true, "mergeCommit": {"oid": "e8d24a3aede033b7d5e21d6abc3fc3d3f5c8ea76"}, "closed": true, "closedAt": "2020-09-22T15:30:49Z", "author": {"login": "malafeev"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdLDGoxAH2gAyNDkwMjg0NDU1OjA3NGEyOWFlMTgwMmI3OGViZDMxNmQ4ZWQ1ZTVmOTg3Y2EyNjE1ZjI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdLZsqqgFqTQ5MzU4NjE3MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "074a29ae1802b78ebd316d8ed5e5f987ca2615f2", "author": {"user": {"login": "malafeev", "name": "Sergei Malafeev"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/074a29ae1802b78ebd316d8ed5e5f987ca2615f2", "committedDate": "2020-09-21T13:07:22Z", "message": "de-duplicate fields in TraceMultiPropagator\n\nSigned-off-by: Sergei Malafeev <sergei@malafeev.org>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dbf935b7bd319e02c68897a75073603dce10a26f", "author": {"user": {"login": "malafeev", "name": "Sergei Malafeev"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/dbf935b7bd319e02c68897a75073603dce10a26f", "committedDate": "2020-09-21T13:11:36Z", "message": "reformat\n\nSigned-off-by: Sergei Malafeev <sergei@malafeev.org>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkyNTk5NDYz", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1667#pullrequestreview-492599463", "createdAt": "2020-09-21T13:28:18Z", "commit": {"oid": "dbf935b7bd319e02c68897a75073603dce10a26f"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMVQxMzoyODoxOFrOHVP-Ug==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMVQxMzoyODoxOFrOHVP-Ug==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjA0Mzg1OA==", "bodyText": "Nit: we could skip this since it is already covered by containsOnly\nThe same at line 91", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1667#discussion_r492043858", "createdAt": "2020-09-21T13:28:18Z", "author": {"login": "thisthat"}, "path": "extensions/trace_propagators/src/test/java/io/opentelemetry/extensions/trace/propagation/TraceMultiPropagatorTest.java", "diffHunk": "@@ -76,7 +76,20 @@ void fields() {\n \n     List<String> fields = prop.fields();\n     assertThat(fields).hasSize(4);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dbf935b7bd319e02c68897a75073603dce10a26f"}, "originalPosition": 3}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "63bbfb466f4a028144deae730c0ac0739380e937", "author": {"user": {"login": "malafeev", "name": "Sergei Malafeev"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/63bbfb466f4a028144deae730c0ac0739380e937", "committedDate": "2020-09-22T02:41:44Z", "message": "de-duplicate fields in DefaultContextPropagators\n\nSigned-off-by: Sergei Malafeev <sergei@malafeev.org>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "83e6672198827077ca2a5e12018bec274a1ff3fb", "author": {"user": {"login": "malafeev", "name": "Sergei Malafeev"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/83e6672198827077ca2a5e12018bec274a1ff3fb", "committedDate": "2020-09-22T02:45:03Z", "message": "use containsExactlyInAnyOrder\n\nSigned-off-by: Sergei Malafeev <sergei@malafeev.org>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzMTQxMDE3", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1667#pullrequestreview-493141017", "createdAt": "2020-09-22T05:49:00Z", "commit": {"oid": "83e6672198827077ca2a5e12018bec274a1ff3fb"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQwNTo0OTowMFrOHVrAOA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQwNTo1MDowMlrOHVrBUw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjQ4NjcxMg==", "bodyText": "Nice catch!", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1667#discussion_r492486712", "createdAt": "2020-09-22T05:49:00Z", "author": {"login": "anuraaga"}, "path": "context_prop/src/main/java/io/opentelemetry/context/propagation/DefaultContextPropagators.java", "diffHunk": "@@ -114,7 +118,7 @@ public ContextPropagators build() {\n     private MultiTextMapPropagator(List<TextMapPropagator> textPropagators) {\n       this.textPropagators = new TextMapPropagator[textPropagators.size()];\n       textPropagators.toArray(this.textPropagators);\n-      this.allFields = getAllFields(this.textPropagators);\n+      this.allFields = Collections.unmodifiableList(getAllFields(this.textPropagators));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "83e6672198827077ca2a5e12018bec274a1ff3fb"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjQ4Njg5NQ==", "bodyText": "Let's use LinkedHashSet to preserve order, users may have a reason to iterate in a specified order.", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1667#discussion_r492486895", "createdAt": "2020-09-22T05:49:42Z", "author": {"login": "anuraaga"}, "path": "context_prop/src/main/java/io/opentelemetry/context/propagation/DefaultContextPropagators.java", "diffHunk": "@@ -123,12 +127,12 @@ private MultiTextMapPropagator(List<TextMapPropagator> textPropagators) {\n     }\n \n     private static List<String> getAllFields(TextMapPropagator[] textPropagators) {\n-      List<String> fields = new ArrayList<>();\n+      Set<String> fields = new HashSet<>();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "83e6672198827077ca2a5e12018bec274a1ff3fb"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjQ4Njk5NQ==", "bodyText": "Ditto", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1667#discussion_r492486995", "createdAt": "2020-09-22T05:50:02Z", "author": {"login": "anuraaga"}, "path": "extensions/trace_propagators/src/main/java/io/opentelemetry/extensions/trace/propagation/TraceMultiPropagator.java", "diffHunk": "@@ -66,11 +70,11 @@ private TraceMultiPropagator(List<TextMapPropagator> propagatorList) {\n     this.propagators = new TextMapPropagator[propagatorList.size()];\n     propagatorList.toArray(this.propagators);\n \n-    List<String> fields = new ArrayList<>();\n+    Set<String> fields = new HashSet<>();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "83e6672198827077ca2a5e12018bec274a1ff3fb"}, "originalPosition": 26}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f8fc39d1547265367419cbc44b7ac03e52439329", "author": {"user": {"login": "malafeev", "name": "Sergei Malafeev"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/f8fc39d1547265367419cbc44b7ac03e52439329", "committedDate": "2020-09-22T05:59:27Z", "message": "use LinkedHashSet to preserve order\n\nSigned-off-by: Sergei Malafeev <sergei@malafeev.org>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzMTU4ODAx", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1667#pullrequestreview-493158801", "createdAt": "2020-09-22T06:35:01Z", "commit": {"oid": "f8fc39d1547265367419cbc44b7ac03e52439329"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzNTg2MTcx", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1667#pullrequestreview-493586171", "createdAt": "2020-09-22T15:26:49Z", "commit": {"oid": "f8fc39d1547265367419cbc44b7ac03e52439329"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3457, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}