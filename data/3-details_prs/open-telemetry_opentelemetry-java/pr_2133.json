{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI3NDE3MTAz", "number": 2133, "title": "handle case insensitive logic for keys on context extraction in OpenTracing TracerShim", "bodyText": "fix #2122", "createdAt": "2020-11-25T12:41:17Z", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2133", "merged": true, "mergeCommit": {"oid": "49b3e68b926d2149de4549ae1818983cd0801be0"}, "closed": true, "closedAt": "2020-12-01T07:14:46Z", "author": {"login": "malafeev"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdf9rgYgH2gAyNTI3NDE3MTAzOjMwZjk0NDJiZjdkYjllZTJiMzNkYjgwNDNlMGYzN2Q1OGI4YWRkY2M=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdh0Z7NgFqTU0MTUzNDM4OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "30f9442bf7db9ee2b33db8043e0f37d58b8addcc", "author": {"user": {"login": "malafeev", "name": "Sergei Malafeev"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/30f9442bf7db9ee2b33db8043e0f37d58b8addcc", "committedDate": "2020-11-25T12:40:37Z", "message": "#2122 handle case insensitive logic for keys on context extraction in OpenTracing TracerShim\n\nSigned-off-by: Sergei Malafeev <sergei@malafeev.org>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e40517a4ce049a7b7e6012fad539029bc4f78e3e", "author": {"user": {"login": "malafeev", "name": "Sergei Malafeev"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/e40517a4ce049a7b7e6012fad539029bc4f78e3e", "committedDate": "2020-11-25T13:08:24Z", "message": "#2122 fix test\n\nSigned-off-by: Sergei Malafeev <sergei@malafeev.org>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM4NTkxMDg5", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2133#pullrequestreview-538591089", "createdAt": "2020-11-25T15:05:37Z", "commit": {"oid": "e40517a4ce049a7b7e6012fad539029bc4f78e3e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxNTowNTozN1rOH53kWw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxNTowNTozN1rOH53kWw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDQ0MTMwNw==", "bodyText": "If we plan to iterate over all the values per get() call, we should get rid of the intermediate temporary Map.", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2133#discussion_r530441307", "createdAt": "2020-11-25T15:05:37Z", "author": {"login": "carlosalberto"}, "path": "opentracing-shim/src/main/java/io/opentelemetry/opentracingshim/Propagation.java", "diffHunk": "@@ -73,7 +73,12 @@ private TextMapGetter() {}\n \n     @Override\n     public String get(Map<String, String> carrier, String key) {\n-      return carrier.get(key);\n+      for (Map.Entry<String, String> entry : carrier.entrySet()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e40517a4ce049a7b7e6012fad539029bc4f78e3e"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM4Nzk5NjQ2", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2133#pullrequestreview-538799646", "createdAt": "2020-11-25T19:39:34Z", "commit": {"oid": "e40517a4ce049a7b7e6012fad539029bc4f78e3e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxOTozOTozNFrOH6Bhpw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxOTozOTozNFrOH6Bhpw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDYwNDQ1NQ==", "bodyText": "do we need to sortByStartTime any more if we're not going to rely on the order? Also, why did this change make the times change?", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2133#discussion_r530604455", "createdAt": "2020-11-25T19:39:34Z", "author": {"login": "jkwatson"}, "path": "opentracing-shim/src/test/java/io/opentelemetry/opentracingshim/testbed/clientserver/TestClientServerTest.java", "diffHunk": "@@ -47,17 +48,33 @@ void after() throws InterruptedException {\n   @Test\n   void test() throws Exception {\n     Client client = new Client(queue, tracer);\n-    client.send();\n+    client.send(false);\n+    verify();\n+  }\n+\n+  @Test\n+  public void testUpperCaseKeys() throws Exception {\n+    Client client = new Client(queue, tracer);\n+    client.send(true);\n+    verify();\n+  }\n \n+  private void verify() {\n     await().atMost(Duration.ofSeconds(15)).until(finishedSpansSize(otelTesting), equalTo(2));\n \n     List<SpanData> finished = otelTesting.getSpans();\n     assertThat(finished).hasSize(2);\n \n     finished = sortByStartTime(finished);\n     assertThat(finished.get(1).getTraceId()).isEqualTo(finished.get(0).getTraceId());\n-    assertThat(finished.get(0).getKind()).isEqualTo(Kind.CLIENT);\n-    assertThat(finished.get(1).getKind()).isEqualTo(Kind.SERVER);\n+    Kind firstSpanKind = finished.get(0).getKind();\n+    if (firstSpanKind == Kind.CLIENT) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e40517a4ce049a7b7e6012fad539029bc4f78e3e"}, "originalPosition": 35}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1028ebebde6adda595592a59beefe4df7807517f", "author": {"user": {"login": "malafeev", "name": "Sergei Malafeev"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/1028ebebde6adda595592a59beefe4df7807517f", "committedDate": "2020-11-26T02:25:16Z", "message": "#2122 remove sort\n\nSigned-off-by: Sergei Malafeev <sergei@malafeev.org>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQxMzU0MTI0", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2133#pullrequestreview-541354124", "createdAt": "2020-11-30T22:42:35Z", "commit": {"oid": "1028ebebde6adda595592a59beefe4df7807517f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQxNTM0Mzg4", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2133#pullrequestreview-541534388", "createdAt": "2020-12-01T07:00:07Z", "commit": {"oid": "1028ebebde6adda595592a59beefe4df7807517f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3765, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}