{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM1NDk5MjE5", "number": 1338, "title": "Convert the usages of the LabelSetSdk to use the Labels class.", "bodyText": "After this, we can consider if we want to change the metric APIs to use Labels, rather than varargs of String.", "createdAt": "2020-06-16T22:26:25Z", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1338", "merged": true, "mergeCommit": {"oid": "fccc6d9bc33b7264dc901335e4a2db68cc17fc46"}, "closed": true, "closedAt": "2020-06-17T17:43:12Z", "author": {"login": "jkwatson"}, "timelineItems": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcr8rDGgH2gAyNDM1NDk5MjE5OjA5MTk4NzdiM2U5N2Q2YzlmNjdiODY4ZThkOWExMDJkZTZmNjVlOTU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcsMaEUgFqTQzMjU2NTI5Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "0919877b3e97d6c9f67b868e8d9a102de6f65e95", "author": {"user": null}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/0919877b3e97d6c9f67b868e8d9a102de6f65e95", "committedDate": "2020-06-16T22:06:09Z", "message": "Convert the usages of the LabelSetSdk to use the Labels class."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMyNTY1Mjkz", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1338#pullrequestreview-432565293", "createdAt": "2020-06-17T16:20:56Z", "commit": {"oid": "0919877b3e97d6c9f67b868e8d9a102de6f65e95"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxNjoyMDo1N1rOGlNVdQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxNjoyNToxNFrOGlNfsw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTY2ODk4MQ==", "bodyText": "One of this 2 can be removed.", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1338#discussion_r441668981", "createdAt": "2020-06-17T16:20:57Z", "author": {"login": "bogdandrutu"}, "path": "api/src/main/java/io/opentelemetry/common/Labels.java", "diffHunk": "@@ -102,6 +102,10 @@ public static Labels of(\n         key5, value5);\n   }\n \n+  public static Labels of(String[] keyValueLabelPairs) {\n+    return sortAndFilterToLabels((Object[]) keyValueLabelPairs);\n+  }\n+\n   private static Labels sortAndFilterToLabels(Object... data) {\n     return new AutoValue_Labels_ArrayBackedLabels(sortAndFilter(data));\n   }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0919877b3e97d6c9f67b868e8d9a102de6f65e95"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTY3MTYwMw==", "bodyText": "Please create an issue to revisit this logic and assign to me. seems we do unnecessary work.", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1338#discussion_r441671603", "createdAt": "2020-06-17T16:25:14Z", "author": {"login": "bogdandrutu"}, "path": "exporters/prometheus/src/main/java/io/opentelemetry/exporters/prometheus/MetricAdapter.java", "diffHunk": "@@ -105,10 +105,18 @@ static Type toMetricFamilyType(MetricData.Descriptor.Type type) {\n     if (descriptor.getConstantLabels().size() != 0) {\n       constLabelNames = new ArrayList<>(descriptor.getConstantLabels().size());\n       constLabelValues = new ArrayList<>(descriptor.getConstantLabels().size());\n-      for (Map.Entry<String, String> entry : descriptor.getConstantLabels().entrySet()) {\n-        constLabelNames.add(toLabelName(entry.getKey()));\n-        constLabelValues.add(entry.getValue() == null ? \"\" : entry.getValue());\n-      }\n+      final List<String> finalConstLabelNames = constLabelNames;\n+      final List<String> finalConstLabelValues = constLabelValues;\n+      descriptor\n+          .getConstantLabels()\n+          .forEach(\n+              new KeyValueConsumer<String>() {\n+                @Override\n+                public void consume(String key, String value) {\n+                  finalConstLabelNames.add(toLabelName(key));\n+                  finalConstLabelValues.add(value == null ? \"\" : value);\n+                }\n+              });", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0919877b3e97d6c9f67b868e8d9a102de6f65e95"}, "originalPosition": 35}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2463, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}