{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDUwMzQyODMx", "number": 1423, "title": "Implemented index page for zPages", "bodyText": "Implemented an index page for zPages that includes links to available zPages.\nThis PR addresses issue #1416", "createdAt": "2020-07-16T16:49:08Z", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1423", "merged": true, "mergeCommit": {"oid": "df146234023c09ebb66a72a17ecbce2d10c0204e"}, "closed": true, "closedAt": "2020-07-16T22:55:43Z", "author": {"login": "wtyanan"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc1YFm_gH2gAyNDUwMzQyODMxOmU5ZTRkZmQzMDE5MDQ5YWQwMmRmOGI4ODBlZDg4ZjRkNTMyYWFhYTQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc1onn4gFqTQ1MDI5OTAyNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e9e4dfd3019049ad02df8b880ed88f4d532aaaa4", "author": {"user": {"login": "wtyanan", "name": "Terry (Tianyu) Wang"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/e9e4dfd3019049ad02df8b880ed88f4d532aaaa4", "committedDate": "2020-07-16T05:07:55Z", "message": "Added two abstract getter method for obtaining page information"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "95555a557ee0b613ffaefcec5e0c994e7e275f78", "author": {"user": {"login": "wtyanan", "name": "Terry (Tianyu) Wang"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/95555a557ee0b613ffaefcec5e0c994e7e275f78", "committedDate": "2020-07-16T05:08:16Z", "message": "Added page information getter method"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "442a2172dfb758f6d5b73fd7fbfe532237f1947f", "author": {"user": {"login": "wtyanan", "name": "Terry (Tianyu) Wang"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/442a2172dfb758f6d5b73fd7fbfe532237f1947f", "committedDate": "2020-07-16T05:08:30Z", "message": "Implemented index zPage handler"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "61118a4ce488463ad3091fdb136d945edf5c1912", "author": {"user": {"login": "wtyanan", "name": "Terry (Tianyu) Wang"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/61118a4ce488463ad3091fdb136d945edf5c1912", "committedDate": "2020-07-16T16:01:33Z", "message": "Implemented index page for zPages"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "34a988cd793860d587d26c57dcc548903105c456", "author": {"user": {"login": "wtyanan", "name": "Terry (Tianyu) Wang"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/34a988cd793860d587d26c57dcc548903105c456", "committedDate": "2020-07-16T16:18:44Z", "message": "Added unit test for index zPage"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4d8a6a82a45372150ddaebba3a3de0efd4f44e31", "author": {"user": {"login": "wtyanan", "name": "Terry (Tianyu) Wang"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/4d8a6a82a45372150ddaebba3a3de0efd4f44e31", "committedDate": "2020-07-16T16:35:37Z", "message": "Small style and comment fixes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwMDM5NzQ2", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1423#pullrequestreview-450039746", "createdAt": "2020-07-16T16:58:41Z", "commit": {"oid": "4d8a6a82a45372150ddaebba3a3de0efd4f44e31"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQxNjo1ODo0MVrOGy0A_Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQxNjo1ODo0MVrOGy0A_Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTkzNDIwNQ==", "bodyText": "nit: this should end with .", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1423#discussion_r455934205", "createdAt": "2020-07-16T16:58:41Z", "author": {"login": "LinghanX"}, "path": "sdk_extensions/zpages/src/main/java/io/opentelemetry/sdk/extensions/zpages/ZPageServer.java", "diffHunk": "@@ -59,7 +60,7 @@\n  */\n @ThreadSafe\n public final class ZPageServer {\n-  // The maximum number of queued incoming connections allowed on the HttpServer listening socket.\n+  // The maximum number of queued incoming connections allowed on the HttpServer listening socket", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4d8a6a82a45372150ddaebba3a3de0efd4f44e31"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwMDc2OTkz", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1423#pullrequestreview-450076993", "createdAt": "2020-07-16T17:47:10Z", "commit": {"oid": "4d8a6a82a45372150ddaebba3a3de0efd4f44e31"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwMTczNDk1", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1423#pullrequestreview-450173495", "createdAt": "2020-07-16T20:00:25Z", "commit": {"oid": "4d8a6a82a45372150ddaebba3a3de0efd4f44e31"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQyMDowMDoyNVrOGy6seg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQyMDowMDoyNVrOGy6seg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjA0MzY0Mg==", "bodyText": "I wish the font were slightly bigger in the text on the page, but that's a very minor issue.", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1423#discussion_r456043642", "createdAt": "2020-07-16T20:00:25Z", "author": {"login": "jkwatson"}, "path": "sdk_extensions/zpages/src/main/java/io/opentelemetry/sdk/extensions/zpages/IndexZPageHandler.java", "diffHunk": "@@ -0,0 +1,108 @@\n+/*\n+ * Copyright 2020, OpenTelemetry Authors\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package io.opentelemetry.sdk.extensions.zpages;\n+\n+import java.io.OutputStream;\n+import java.io.PrintStream;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.logging.Level;\n+import java.util.logging.Logger;\n+import javax.annotation.Nullable;\n+\n+final class IndexZPageHandler extends ZPageHandler {\n+  private static final String INDEX_URL = \"/\";\n+  private static final String INDEX_NAME = \"Index\";\n+  private static final String INDEX_DESCRITION = \"Index page of zPages\";\n+  private static final Logger logger = Logger.getLogger(IndexZPageHandler.class.getName());\n+  @Nullable private final List<ZPageHandler> availableHandlers;\n+\n+  IndexZPageHandler(@Nullable List<ZPageHandler> availableHandlers) {\n+    this.availableHandlers = availableHandlers;\n+  }\n+\n+  @Override\n+  public String getUrlPath() {\n+    return INDEX_URL;\n+  }\n+\n+  @Override\n+  public String getPageName() {\n+    return INDEX_NAME;\n+  }\n+\n+  @Override\n+  public String getPageDescription() {\n+    return INDEX_DESCRITION;\n+  }\n+\n+  private static void emitPageLinkAndInfo(PrintStream out, ZPageHandler handler) {\n+    out.print(\"<a href=\\\"\" + handler.getUrlPath() + \"\\\">\");\n+    out.print(\"<h2 style=\\\"text-align: left;\\\">\" + handler.getPageName() + \"</h2>\");\n+    out.print(\"</a>\");\n+    out.print(\"<p>\" + handler.getPageDescription() + \"</p>\");\n+  }\n+\n+  @Override\n+  public void emitHtml(Map<String, String> queryMap, OutputStream outputStream) {\n+    // PrintStream for emiting HTML contents\n+    try (PrintStream out = new PrintStream(outputStream, /* autoFlush= */ false, \"UTF-8\")) {\n+      out.print(\"<!DOCTYPE html>\");\n+      out.print(\"<html lang=\\\"en\\\">\");\n+      out.print(\"<head>\");\n+      out.print(\"<meta charset=\\\"UTF-8\\\">\");\n+      out.print(\n+          \"<link rel=\\\"shortcut icon\\\" href=\\\"data:image/png;base64,\"\n+              + ZPageLogo.getFaviconBase64()\n+              + \"\\\" type=\\\"image/png\\\">\");\n+      out.print(\n+          \"<link href=\\\"https://fonts.googleapis.com/css?family=Open+Sans:300\\\"\"\n+              + \"rel=\\\"stylesheet\\\">\");\n+      out.print(\n+          \"<link href=\\\"https://fonts.googleapis.com/css?family=Roboto\\\" rel=\\\"stylesheet\\\">\");\n+      out.print(\"<title>zPages</title>\");\n+      out.print(\"<style>\");\n+      out.print(ZPageStyle.style);\n+      out.print(\"</style>\");\n+      out.print(\"</head>\");\n+      out.print(\"<body>\");\n+      out.print(\n+          \"<a href=\\\"/\\\"><img style=\\\"height: 90px;\\\" src=\\\"data:image/png;base64,\"\n+              + ZPageLogo.getLogoBase64()\n+              + \"\\\" /></a>\");\n+      out.print(\"<h1 style=\\\"text-align: left;\\\">zPages</h1>\");\n+      out.print(\n+          \"<p>OpenTelemetry provides in-process web pages that display collected data from\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4d8a6a82a45372150ddaebba3a3de0efd4f44e31"}, "originalPosition": 89}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwMTc1MDgy", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1423#pullrequestreview-450175082", "createdAt": "2020-07-16T20:02:53Z", "commit": {"oid": "4d8a6a82a45372150ddaebba3a3de0efd4f44e31"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "93c460f87452c720a75efcefde1004b11183a059", "author": {"user": {"login": "wtyanan", "name": "Terry (Tianyu) Wang"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/93c460f87452c720a75efcefde1004b11183a059", "committedDate": "2020-07-16T20:53:57Z", "message": "Increased font size, code style fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d94b3aa70fcc812b790389940fc842a25db9c8de", "author": {"user": {"login": "wtyanan", "name": "Terry (Tianyu) Wang"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/d94b3aa70fcc812b790389940fc842a25db9c8de", "committedDate": "2020-07-16T20:54:14Z", "message": "Merged with OpenTelemetry master branch for latest updates"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3bf2bab05d5cf0d743278832cfc0287bf25cca63", "author": {"user": {"login": "wtyanan", "name": "Terry (Tianyu) Wang"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/3bf2bab05d5cf0d743278832cfc0287bf25cca63", "committedDate": "2020-07-16T21:01:52Z", "message": "Fixed font size issue"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwMjk5MDI3", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1423#pullrequestreview-450299027", "createdAt": "2020-07-17T00:22:58Z", "commit": {"oid": "3bf2bab05d5cf0d743278832cfc0287bf25cca63"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QwMDoyMjo1OFrOGzBLOg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QwMDoyMjo1OFrOGzBLOg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjE0OTgxOA==", "bodyText": "We should almost never have a nullable container, if there are no handlers the caller would just pass empty", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1423#discussion_r456149818", "createdAt": "2020-07-17T00:22:58Z", "author": {"login": "anuraaga"}, "path": "sdk_extensions/zpages/src/main/java/io/opentelemetry/sdk/extensions/zpages/IndexZPageHandler.java", "diffHunk": "@@ -0,0 +1,108 @@\n+/*\n+ * Copyright 2020, OpenTelemetry Authors\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package io.opentelemetry.sdk.extensions.zpages;\n+\n+import java.io.OutputStream;\n+import java.io.PrintStream;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.logging.Level;\n+import java.util.logging.Logger;\n+import javax.annotation.Nullable;\n+\n+final class IndexZPageHandler extends ZPageHandler {\n+  private static final String INDEX_URL = \"/\";\n+  private static final String INDEX_NAME = \"Index\";\n+  private static final String INDEX_DESCRITION = \"Index page of zPages\";\n+  private static final Logger logger = Logger.getLogger(IndexZPageHandler.class.getName());\n+  @Nullable private final List<ZPageHandler> availableHandlers;\n+\n+  IndexZPageHandler(@Nullable List<ZPageHandler> availableHandlers) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3bf2bab05d5cf0d743278832cfc0287bf25cca63"}, "originalPosition": 34}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2562, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}