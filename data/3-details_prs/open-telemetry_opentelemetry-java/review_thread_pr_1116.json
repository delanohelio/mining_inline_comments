{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA0MDAzMzIy", "number": 1116, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQxMDo1ODoxMFrODycx5A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQyMjo0Mjo1OFrODz9HBw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU0MjI2OTE2OnYy", "diffSide": "RIGHT", "path": "sdk/src/main/java/io/opentelemetry/sdk/trace/Samplers.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQxMDo1ODoxMFrOGGf68w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQyMDozNToxNVrOGImlDA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTQ2NzYzNQ==", "bodyText": "All other semantic conventions use a prefix followed by a dot and underscores instead of camelCase (e.g. messaging.protocol_version). So a better name would probably be probability_sampler.probability.", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1116#discussion_r409467635", "createdAt": "2020-04-16T10:58:10Z", "author": {"login": "Oberon00"}, "path": "sdk/src/main/java/io/opentelemetry/sdk/trace/Samplers.java", "diffHunk": "@@ -233,4 +244,33 @@ public boolean isSampled() {\n       return Collections.emptyMap();\n     }\n   }\n+\n+  /** Probability-based sampling decision with a single attribute for the probability. */\n+  @Immutable\n+  @AutoValue\n+  abstract static class ProbabilityDecision implements Decision {\n+\n+    ProbabilityDecision() {}\n+\n+    /**\n+     * Creates sampling decision without attributes.\n+     *\n+     * @param decision sampling decision\n+     * @param probability the probability that was used for the decision.\n+     */\n+    static ProbabilityDecision create(boolean decision, double probability) {\n+      return new AutoValue_Samplers_ProbabilityDecision(\n+          decision, singletonMap(\"samplingProbability\", doubleAttributeValue(probability)));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b0e50210c9befe355da70cf5eea06e902fbc612"}, "originalPosition": 64}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTYwMjU5MQ==", "bodyText": "Or just sampler.probability if we intend to have this cross samplers.", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1116#discussion_r409602591", "createdAt": "2020-04-16T14:29:29Z", "author": {"login": "bogdandrutu"}, "path": "sdk/src/main/java/io/opentelemetry/sdk/trace/Samplers.java", "diffHunk": "@@ -233,4 +244,33 @@ public boolean isSampled() {\n       return Collections.emptyMap();\n     }\n   }\n+\n+  /** Probability-based sampling decision with a single attribute for the probability. */\n+  @Immutable\n+  @AutoValue\n+  abstract static class ProbabilityDecision implements Decision {\n+\n+    ProbabilityDecision() {}\n+\n+    /**\n+     * Creates sampling decision without attributes.\n+     *\n+     * @param decision sampling decision\n+     * @param probability the probability that was used for the decision.\n+     */\n+    static ProbabilityDecision create(boolean decision, double probability) {\n+      return new AutoValue_Samplers_ProbabilityDecision(\n+          decision, singletonMap(\"samplingProbability\", doubleAttributeValue(probability)));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTQ2NzYzNQ=="}, "originalCommit": {"oid": "9b0e50210c9befe355da70cf5eea06e902fbc612"}, "originalPosition": 64}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTYyMzMzOA==", "bodyText": "yeah, I was just throwing something in there to start this discussion!  Agree this should be something in the semantic conventions. Should we put this PR on hold while that gets done? @pavolloffay as the original requester, can you create an issue in the spec repo and get the ball rolling?", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1116#discussion_r409623338", "createdAt": "2020-04-16T14:55:32Z", "author": {"login": "jkwatson"}, "path": "sdk/src/main/java/io/opentelemetry/sdk/trace/Samplers.java", "diffHunk": "@@ -233,4 +244,33 @@ public boolean isSampled() {\n       return Collections.emptyMap();\n     }\n   }\n+\n+  /** Probability-based sampling decision with a single attribute for the probability. */\n+  @Immutable\n+  @AutoValue\n+  abstract static class ProbabilityDecision implements Decision {\n+\n+    ProbabilityDecision() {}\n+\n+    /**\n+     * Creates sampling decision without attributes.\n+     *\n+     * @param decision sampling decision\n+     * @param probability the probability that was used for the decision.\n+     */\n+    static ProbabilityDecision create(boolean decision, double probability) {\n+      return new AutoValue_Samplers_ProbabilityDecision(\n+          decision, singletonMap(\"samplingProbability\", doubleAttributeValue(probability)));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTQ2NzYzNQ=="}, "originalCommit": {"oid": "9b0e50210c9befe355da70cf5eea06e902fbc612"}, "originalPosition": 64}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTY3Mzg2OA==", "bodyText": "I went ahead and put in a PR with sampling.probability as the attribute name. open-telemetry/opentelemetry-specification#570.", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1116#discussion_r411673868", "createdAt": "2020-04-20T20:35:15Z", "author": {"login": "jkwatson"}, "path": "sdk/src/main/java/io/opentelemetry/sdk/trace/Samplers.java", "diffHunk": "@@ -233,4 +244,33 @@ public boolean isSampled() {\n       return Collections.emptyMap();\n     }\n   }\n+\n+  /** Probability-based sampling decision with a single attribute for the probability. */\n+  @Immutable\n+  @AutoValue\n+  abstract static class ProbabilityDecision implements Decision {\n+\n+    ProbabilityDecision() {}\n+\n+    /**\n+     * Creates sampling decision without attributes.\n+     *\n+     * @param decision sampling decision\n+     * @param probability the probability that was used for the decision.\n+     */\n+    static ProbabilityDecision create(boolean decision, double probability) {\n+      return new AutoValue_Samplers_ProbabilityDecision(\n+          decision, singletonMap(\"samplingProbability\", doubleAttributeValue(probability)));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTQ2NzYzNQ=="}, "originalCommit": {"oid": "9b0e50210c9befe355da70cf5eea06e902fbc612"}, "originalPosition": 64}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU0MzEwMjkwOnYy", "diffSide": "RIGHT", "path": "sdk/src/main/java/io/opentelemetry/sdk/trace/Samplers.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQxNDoyNzo1M1rOGGoErw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQxNToyNjozMlrOGGq2JA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTYwMTE5OQ==", "bodyText": "To be more java we should use getAttributes in the Decision class I think.", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1116#discussion_r409601199", "createdAt": "2020-04-16T14:27:53Z", "author": {"login": "bogdandrutu"}, "path": "sdk/src/main/java/io/opentelemetry/sdk/trace/Samplers.java", "diffHunk": "@@ -233,4 +244,33 @@ public boolean isSampled() {\n       return Collections.emptyMap();\n     }\n   }\n+\n+  /** Probability-based sampling decision with a single attribute for the probability. */\n+  @Immutable\n+  @AutoValue\n+  abstract static class ProbabilityDecision implements Decision {\n+\n+    ProbabilityDecision() {}\n+\n+    /**\n+     * Creates sampling decision without attributes.\n+     *\n+     * @param decision sampling decision\n+     * @param probability the probability that was used for the decision.\n+     */\n+    static ProbabilityDecision create(boolean decision, double probability) {\n+      return new AutoValue_Samplers_ProbabilityDecision(\n+          decision, singletonMap(\"samplingProbability\", doubleAttributeValue(probability)));\n+    }\n+\n+    @Override\n+    public abstract boolean isSampled();\n+\n+    public abstract Map<String, AttributeValue> getAttributes();\n+\n+    @Override\n+    public Map<String, AttributeValue> attributes() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b0e50210c9befe355da70cf5eea06e902fbc612"}, "originalPosition": 73}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTYyMzg0MA==", "bodyText": "I agree. Should I make that part of this PR, or create an issue for it?", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1116#discussion_r409623840", "createdAt": "2020-04-16T14:56:10Z", "author": {"login": "jkwatson"}, "path": "sdk/src/main/java/io/opentelemetry/sdk/trace/Samplers.java", "diffHunk": "@@ -233,4 +244,33 @@ public boolean isSampled() {\n       return Collections.emptyMap();\n     }\n   }\n+\n+  /** Probability-based sampling decision with a single attribute for the probability. */\n+  @Immutable\n+  @AutoValue\n+  abstract static class ProbabilityDecision implements Decision {\n+\n+    ProbabilityDecision() {}\n+\n+    /**\n+     * Creates sampling decision without attributes.\n+     *\n+     * @param decision sampling decision\n+     * @param probability the probability that was used for the decision.\n+     */\n+    static ProbabilityDecision create(boolean decision, double probability) {\n+      return new AutoValue_Samplers_ProbabilityDecision(\n+          decision, singletonMap(\"samplingProbability\", doubleAttributeValue(probability)));\n+    }\n+\n+    @Override\n+    public abstract boolean isSampled();\n+\n+    public abstract Map<String, AttributeValue> getAttributes();\n+\n+    @Override\n+    public Map<String, AttributeValue> attributes() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTYwMTE5OQ=="}, "originalCommit": {"oid": "9b0e50210c9befe355da70cf5eea06e902fbc612"}, "originalPosition": 73}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTYzMTA5Nw==", "bodyText": "up to you, happy to review that in this PR.", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1116#discussion_r409631097", "createdAt": "2020-04-16T15:05:21Z", "author": {"login": "bogdandrutu"}, "path": "sdk/src/main/java/io/opentelemetry/sdk/trace/Samplers.java", "diffHunk": "@@ -233,4 +244,33 @@ public boolean isSampled() {\n       return Collections.emptyMap();\n     }\n   }\n+\n+  /** Probability-based sampling decision with a single attribute for the probability. */\n+  @Immutable\n+  @AutoValue\n+  abstract static class ProbabilityDecision implements Decision {\n+\n+    ProbabilityDecision() {}\n+\n+    /**\n+     * Creates sampling decision without attributes.\n+     *\n+     * @param decision sampling decision\n+     * @param probability the probability that was used for the decision.\n+     */\n+    static ProbabilityDecision create(boolean decision, double probability) {\n+      return new AutoValue_Samplers_ProbabilityDecision(\n+          decision, singletonMap(\"samplingProbability\", doubleAttributeValue(probability)));\n+    }\n+\n+    @Override\n+    public abstract boolean isSampled();\n+\n+    public abstract Map<String, AttributeValue> getAttributes();\n+\n+    @Override\n+    public Map<String, AttributeValue> attributes() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTYwMTE5OQ=="}, "originalCommit": {"oid": "9b0e50210c9befe355da70cf5eea06e902fbc612"}, "originalPosition": 73}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTY0NjYyOA==", "bodyText": "done", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1116#discussion_r409646628", "createdAt": "2020-04-16T15:26:32Z", "author": {"login": "jkwatson"}, "path": "sdk/src/main/java/io/opentelemetry/sdk/trace/Samplers.java", "diffHunk": "@@ -233,4 +244,33 @@ public boolean isSampled() {\n       return Collections.emptyMap();\n     }\n   }\n+\n+  /** Probability-based sampling decision with a single attribute for the probability. */\n+  @Immutable\n+  @AutoValue\n+  abstract static class ProbabilityDecision implements Decision {\n+\n+    ProbabilityDecision() {}\n+\n+    /**\n+     * Creates sampling decision without attributes.\n+     *\n+     * @param decision sampling decision\n+     * @param probability the probability that was used for the decision.\n+     */\n+    static ProbabilityDecision create(boolean decision, double probability) {\n+      return new AutoValue_Samplers_ProbabilityDecision(\n+          decision, singletonMap(\"samplingProbability\", doubleAttributeValue(probability)));\n+    }\n+\n+    @Override\n+    public abstract boolean isSampled();\n+\n+    public abstract Map<String, AttributeValue> getAttributes();\n+\n+    @Override\n+    public Map<String, AttributeValue> attributes() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTYwMTE5OQ=="}, "originalCommit": {"oid": "9b0e50210c9befe355da70cf5eea06e902fbc612"}, "originalPosition": 73}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU0MzQzODY0OnYy", "diffSide": "RIGHT", "path": "api/src/main/java/io/opentelemetry/trace/attributes/SemanticAttributes.java", "isResolved": false, "comments": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQxNTozODo0OFrOGGrZ2g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQyMDozMzo1N1rOGImiEg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTY1NTc3MA==", "bodyText": "I would put this in the SDK since it is SDK specific.", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1116#discussion_r409655770", "createdAt": "2020-04-16T15:38:48Z", "author": {"login": "bogdandrutu"}, "path": "api/src/main/java/io/opentelemetry/trace/attributes/SemanticAttributes.java", "diffHunk": "@@ -125,5 +125,9 @@\n   /** JDBC substring like \"mysql://db.example.com:3306\" */\n   public static final StringAttributeSetter DB_URL = StringAttributeSetter.create(\"db.url\");\n \n+  /** Probability value used by a probability-based Span sampling strategy. */\n+  public static final DoubleAttributeSetter SAMPLING_PROBABILITY =", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "204b4d33708a3b5e8b8d53e7d79f38b3fd9540e9"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTY5MTY3Mw==", "bodyText": "It's probably also useful for vendor API implementations though.", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1116#discussion_r409691673", "createdAt": "2020-04-16T16:30:55Z", "author": {"login": "Oberon00"}, "path": "api/src/main/java/io/opentelemetry/trace/attributes/SemanticAttributes.java", "diffHunk": "@@ -125,5 +125,9 @@\n   /** JDBC substring like \"mysql://db.example.com:3306\" */\n   public static final StringAttributeSetter DB_URL = StringAttributeSetter.create(\"db.url\");\n \n+  /** Probability value used by a probability-based Span sampling strategy. */\n+  public static final DoubleAttributeSetter SAMPLING_PROBABILITY =", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTY1NTc3MA=="}, "originalCommit": {"oid": "204b4d33708a3b5e8b8d53e7d79f38b3fd9540e9"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTcyMDAwMQ==", "bodyText": "Can you give an example of how an API user would want to use this attribute?", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1116#discussion_r409720001", "createdAt": "2020-04-16T17:16:17Z", "author": {"login": "jkwatson"}, "path": "api/src/main/java/io/opentelemetry/trace/attributes/SemanticAttributes.java", "diffHunk": "@@ -125,5 +125,9 @@\n   /** JDBC substring like \"mysql://db.example.com:3306\" */\n   public static final StringAttributeSetter DB_URL = StringAttributeSetter.create(\"db.url\");\n \n+  /** Probability value used by a probability-based Span sampling strategy. */\n+  public static final DoubleAttributeSetter SAMPLING_PROBABILITY =", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTY1NTc3MA=="}, "originalCommit": {"oid": "204b4d33708a3b5e8b8d53e7d79f38b3fd9540e9"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDQ5OTgxNw==", "bodyText": "@jkwatson this is for the moment only in java so we cannot have it here. I would suggest two things:\n\nOpen a PR in specs to add this\nMove it as internal member in probability sampler for the moment. and document that we need to follow the specs.", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1116#discussion_r410499817", "createdAt": "2020-04-17T22:30:25Z", "author": {"login": "bogdandrutu"}, "path": "api/src/main/java/io/opentelemetry/trace/attributes/SemanticAttributes.java", "diffHunk": "@@ -125,5 +125,9 @@\n   /** JDBC substring like \"mysql://db.example.com:3306\" */\n   public static final StringAttributeSetter DB_URL = StringAttributeSetter.create(\"db.url\");\n \n+  /** Probability value used by a probability-based Span sampling strategy. */\n+  public static final DoubleAttributeSetter SAMPLING_PROBABILITY =", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTY1NTc3MA=="}, "originalCommit": {"oid": "204b4d33708a3b5e8b8d53e7d79f38b3fd9540e9"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDUwMDIwMg==", "bodyText": "Yes, strong agree. I'll make it happen.", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1116#discussion_r410500202", "createdAt": "2020-04-17T22:32:04Z", "author": {"login": "jkwatson"}, "path": "api/src/main/java/io/opentelemetry/trace/attributes/SemanticAttributes.java", "diffHunk": "@@ -125,5 +125,9 @@\n   /** JDBC substring like \"mysql://db.example.com:3306\" */\n   public static final StringAttributeSetter DB_URL = StringAttributeSetter.create(\"db.url\");\n \n+  /** Probability value used by a probability-based Span sampling strategy. */\n+  public static final DoubleAttributeSetter SAMPLING_PROBABILITY =", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTY1NTc3MA=="}, "originalCommit": {"oid": "204b4d33708a3b5e8b8d53e7d79f38b3fd9540e9"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTE4NDg1OQ==", "bodyText": "@jkwatson I think an API user won't use this attribute (except if you use the API package at the backend, then you could use it to read the attribute back from the exported span), but implementers that want to be compatible with the official SDK in that regard could use it.", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1116#discussion_r411184859", "createdAt": "2020-04-20T08:19:46Z", "author": {"login": "Oberon00"}, "path": "api/src/main/java/io/opentelemetry/trace/attributes/SemanticAttributes.java", "diffHunk": "@@ -125,5 +125,9 @@\n   /** JDBC substring like \"mysql://db.example.com:3306\" */\n   public static final StringAttributeSetter DB_URL = StringAttributeSetter.create(\"db.url\");\n \n+  /** Probability value used by a probability-based Span sampling strategy. */\n+  public static final DoubleAttributeSetter SAMPLING_PROBABILITY =", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTY1NTc3MA=="}, "originalCommit": {"oid": "204b4d33708a3b5e8b8d53e7d79f38b3fd9540e9"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTUxOTk0OQ==", "bodyText": "I see. Do you think there's a whole class of stuff that an alternate SDK implementation would want to use from the default SDK?", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1116#discussion_r411519949", "createdAt": "2020-04-20T16:30:09Z", "author": {"login": "jkwatson"}, "path": "api/src/main/java/io/opentelemetry/trace/attributes/SemanticAttributes.java", "diffHunk": "@@ -125,5 +125,9 @@\n   /** JDBC substring like \"mysql://db.example.com:3306\" */\n   public static final StringAttributeSetter DB_URL = StringAttributeSetter.create(\"db.url\");\n \n+  /** Probability value used by a probability-based Span sampling strategy. */\n+  public static final DoubleAttributeSetter SAMPLING_PROBABILITY =", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTY1NTc3MA=="}, "originalCommit": {"oid": "204b4d33708a3b5e8b8d53e7d79f38b3fd9540e9"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTU4MjcyNQ==", "bodyText": "Even if that is the case, I am not sure we can have this in the API: Sampler is not part of the API (and explicitly removed from the API any \"sampling\" logic).\nSo I think this should be moved to SDK anyway.", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1116#discussion_r411582725", "createdAt": "2020-04-20T18:04:09Z", "author": {"login": "bogdandrutu"}, "path": "api/src/main/java/io/opentelemetry/trace/attributes/SemanticAttributes.java", "diffHunk": "@@ -125,5 +125,9 @@\n   /** JDBC substring like \"mysql://db.example.com:3306\" */\n   public static final StringAttributeSetter DB_URL = StringAttributeSetter.create(\"db.url\");\n \n+  /** Probability value used by a probability-based Span sampling strategy. */\n+  public static final DoubleAttributeSetter SAMPLING_PROBABILITY =", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTY1NTc3MA=="}, "originalCommit": {"oid": "204b4d33708a3b5e8b8d53e7d79f38b3fd9540e9"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTU4NDM5NQ==", "bodyText": "I was just wondering if there was going to be a need for some sort of \"SDK Support\" module that could contain this kind of thing. I'm not suggesting we do that now, though. :)", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1116#discussion_r411584395", "createdAt": "2020-04-20T18:07:01Z", "author": {"login": "jkwatson"}, "path": "api/src/main/java/io/opentelemetry/trace/attributes/SemanticAttributes.java", "diffHunk": "@@ -125,5 +125,9 @@\n   /** JDBC substring like \"mysql://db.example.com:3306\" */\n   public static final StringAttributeSetter DB_URL = StringAttributeSetter.create(\"db.url\");\n \n+  /** Probability value used by a probability-based Span sampling strategy. */\n+  public static final DoubleAttributeSetter SAMPLING_PROBABILITY =", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTY1NTc3MA=="}, "originalCommit": {"oid": "204b4d33708a3b5e8b8d53e7d79f38b3fd9540e9"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTY2ODU1MQ==", "bodyText": "open-telemetry/opentelemetry-specification#570 for the spec change", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1116#discussion_r411668551", "createdAt": "2020-04-20T20:26:17Z", "author": {"login": "jkwatson"}, "path": "api/src/main/java/io/opentelemetry/trace/attributes/SemanticAttributes.java", "diffHunk": "@@ -125,5 +125,9 @@\n   /** JDBC substring like \"mysql://db.example.com:3306\" */\n   public static final StringAttributeSetter DB_URL = StringAttributeSetter.create(\"db.url\");\n \n+  /** Probability value used by a probability-based Span sampling strategy. */\n+  public static final DoubleAttributeSetter SAMPLING_PROBABILITY =", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTY1NTc3MA=="}, "originalCommit": {"oid": "204b4d33708a3b5e8b8d53e7d79f38b3fd9540e9"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTY3MzEwNg==", "bodyText": "ok, moved into the SDK. PTAL, @bogdandrutu", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1116#discussion_r411673106", "createdAt": "2020-04-20T20:33:57Z", "author": {"login": "jkwatson"}, "path": "api/src/main/java/io/opentelemetry/trace/attributes/SemanticAttributes.java", "diffHunk": "@@ -125,5 +125,9 @@\n   /** JDBC substring like \"mysql://db.example.com:3306\" */\n   public static final StringAttributeSetter DB_URL = StringAttributeSetter.create(\"db.url\");\n \n+  /** Probability value used by a probability-based Span sampling strategy. */\n+  public static final DoubleAttributeSetter SAMPLING_PROBABILITY =", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTY1NTc3MA=="}, "originalCommit": {"oid": "204b4d33708a3b5e8b8d53e7d79f38b3fd9540e9"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU1Njk5NDE4OnYy", "diffSide": "RIGHT", "path": "sdk/src/main/java/io/opentelemetry/sdk/trace/Samplers.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxODowMjozOFrOGIg9VA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxODowOTozMVrOGIhNqg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTU4MTc4MA==", "bodyText": "nit: I like more to see Collections.singletonMap :)", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1116#discussion_r411581780", "createdAt": "2020-04-20T18:02:38Z", "author": {"login": "bogdandrutu"}, "path": "sdk/src/main/java/io/opentelemetry/sdk/trace/Samplers.java", "diffHunk": "@@ -229,8 +241,35 @@ public boolean isSampled() {\n     }\n \n     @Override\n-    public Map<String, AttributeValue> attributes() {\n+    public Map<String, AttributeValue> getAttributes() {\n       return Collections.emptyMap();\n     }\n   }\n+\n+  /** Probability-based sampling decision with a single attribute for the probability. */\n+  @Immutable\n+  @AutoValue\n+  abstract static class ProbabilityDecision implements Decision {\n+\n+    ProbabilityDecision() {}\n+\n+    /**\n+     * Creates sampling decision without attributes.\n+     *\n+     * @param decision sampling decision\n+     * @param probability the probability that was used for the decision.\n+     */\n+    static ProbabilityDecision create(boolean decision, double probability) {\n+      return new AutoValue_Samplers_ProbabilityDecision(\n+          decision,\n+          singletonMap(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "204b4d33708a3b5e8b8d53e7d79f38b3fd9540e9"}, "originalPosition": 78}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTU4NDAxMQ==", "bodyText": "really? for methods that are really clear in their naming (as opposed to something like ImmutableMap.of(...)), I very much prefer the static import version of it.", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1116#discussion_r411584011", "createdAt": "2020-04-20T18:06:21Z", "author": {"login": "jkwatson"}, "path": "sdk/src/main/java/io/opentelemetry/sdk/trace/Samplers.java", "diffHunk": "@@ -229,8 +241,35 @@ public boolean isSampled() {\n     }\n \n     @Override\n-    public Map<String, AttributeValue> attributes() {\n+    public Map<String, AttributeValue> getAttributes() {\n       return Collections.emptyMap();\n     }\n   }\n+\n+  /** Probability-based sampling decision with a single attribute for the probability. */\n+  @Immutable\n+  @AutoValue\n+  abstract static class ProbabilityDecision implements Decision {\n+\n+    ProbabilityDecision() {}\n+\n+    /**\n+     * Creates sampling decision without attributes.\n+     *\n+     * @param decision sampling decision\n+     * @param probability the probability that was used for the decision.\n+     */\n+    static ProbabilityDecision create(boolean decision, double probability) {\n+      return new AutoValue_Samplers_ProbabilityDecision(\n+          decision,\n+          singletonMap(", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTU4MTc4MA=="}, "originalCommit": {"oid": "204b4d33708a3b5e8b8d53e7d79f38b3fd9540e9"}, "originalPosition": 78}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTU4NTk2Mg==", "bodyText": "Personal preference, no need to do it :)", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1116#discussion_r411585962", "createdAt": "2020-04-20T18:09:31Z", "author": {"login": "bogdandrutu"}, "path": "sdk/src/main/java/io/opentelemetry/sdk/trace/Samplers.java", "diffHunk": "@@ -229,8 +241,35 @@ public boolean isSampled() {\n     }\n \n     @Override\n-    public Map<String, AttributeValue> attributes() {\n+    public Map<String, AttributeValue> getAttributes() {\n       return Collections.emptyMap();\n     }\n   }\n+\n+  /** Probability-based sampling decision with a single attribute for the probability. */\n+  @Immutable\n+  @AutoValue\n+  abstract static class ProbabilityDecision implements Decision {\n+\n+    ProbabilityDecision() {}\n+\n+    /**\n+     * Creates sampling decision without attributes.\n+     *\n+     * @param decision sampling decision\n+     * @param probability the probability that was used for the decision.\n+     */\n+    static ProbabilityDecision create(boolean decision, double probability) {\n+      return new AutoValue_Samplers_ProbabilityDecision(\n+          decision,\n+          singletonMap(", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTU4MTc4MA=="}, "originalCommit": {"oid": "204b4d33708a3b5e8b8d53e7d79f38b3fd9540e9"}, "originalPosition": 78}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU1ODA1MTkxOnYy", "diffSide": "RIGHT", "path": "sdk/src/main/java/io/opentelemetry/sdk/trace/SamplingAttributes.java", "isResolved": false, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQyMjo0Mjo1OFrOGIqpUQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQyMzozMjoxOVrOGIr9-g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTc0MDQ5Nw==", "bodyText": "As I mentioned in a previous comment, I would make this internal in the Samplers until a decision in the specs is made. I think this was the confusion from the other thread, but would not expose it for the moment, my comment there was that if we decide to expose it will definitely not going to be in the API.", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1116#discussion_r411740497", "createdAt": "2020-04-20T22:42:58Z", "author": {"login": "bogdandrutu"}, "path": "sdk/src/main/java/io/opentelemetry/sdk/trace/SamplingAttributes.java", "diffHunk": "@@ -0,0 +1,36 @@\n+/*\n+ * Copyright 2020, OpenTelemetry Authors\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package io.opentelemetry.sdk.trace;\n+\n+import io.opentelemetry.trace.attributes.DoubleAttributeSetter;\n+\n+/** Attributes that are applied by {@link Sampler} instances. */\n+public class SamplingAttributes {\n+\n+  /**\n+   * Probability value used by a probability-based Span sampling strategy.\n+   *\n+   * <p>Note: This will need to be updated if a specification for this value is merged which changes\n+   * this proposed value.\n+   *\n+   * <p>See https://github.com/open-telemetry/opentelemetry-specification/pull/570\n+   */\n+  public static final DoubleAttributeSetter SAMPLING_PROBABILITY =\n+      DoubleAttributeSetter.create(\"sampling.probability\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8ffc5903b256575e3f9d6f575844a47845cb5e74"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTc0MTIyOQ==", "bodyText": "oh yeah. I somehow spaced on that part of things. I'll move it in there for the nonce.", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1116#discussion_r411741229", "createdAt": "2020-04-20T22:44:37Z", "author": {"login": "jkwatson"}, "path": "sdk/src/main/java/io/opentelemetry/sdk/trace/SamplingAttributes.java", "diffHunk": "@@ -0,0 +1,36 @@\n+/*\n+ * Copyright 2020, OpenTelemetry Authors\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package io.opentelemetry.sdk.trace;\n+\n+import io.opentelemetry.trace.attributes.DoubleAttributeSetter;\n+\n+/** Attributes that are applied by {@link Sampler} instances. */\n+public class SamplingAttributes {\n+\n+  /**\n+   * Probability value used by a probability-based Span sampling strategy.\n+   *\n+   * <p>Note: This will need to be updated if a specification for this value is merged which changes\n+   * this proposed value.\n+   *\n+   * <p>See https://github.com/open-telemetry/opentelemetry-specification/pull/570\n+   */\n+  public static final DoubleAttributeSetter SAMPLING_PROBABILITY =\n+      DoubleAttributeSetter.create(\"sampling.probability\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTc0MDQ5Nw=="}, "originalCommit": {"oid": "8ffc5903b256575e3f9d6f575844a47845cb5e74"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTc0ODU1NA==", "bodyText": "Thanks, please do it before merging :)", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1116#discussion_r411748554", "createdAt": "2020-04-20T23:01:58Z", "author": {"login": "bogdandrutu"}, "path": "sdk/src/main/java/io/opentelemetry/sdk/trace/SamplingAttributes.java", "diffHunk": "@@ -0,0 +1,36 @@\n+/*\n+ * Copyright 2020, OpenTelemetry Authors\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package io.opentelemetry.sdk.trace;\n+\n+import io.opentelemetry.trace.attributes.DoubleAttributeSetter;\n+\n+/** Attributes that are applied by {@link Sampler} instances. */\n+public class SamplingAttributes {\n+\n+  /**\n+   * Probability value used by a probability-based Span sampling strategy.\n+   *\n+   * <p>Note: This will need to be updated if a specification for this value is merged which changes\n+   * this proposed value.\n+   *\n+   * <p>See https://github.com/open-telemetry/opentelemetry-specification/pull/570\n+   */\n+  public static final DoubleAttributeSetter SAMPLING_PROBABILITY =\n+      DoubleAttributeSetter.create(\"sampling.probability\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTc0MDQ5Nw=="}, "originalCommit": {"oid": "8ffc5903b256575e3f9d6f575844a47845cb5e74"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTc0OTQ4Ng==", "bodyText": "Also good to wait for @Oberon00 because they requested changes.", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1116#discussion_r411749486", "createdAt": "2020-04-20T23:04:14Z", "author": {"login": "bogdandrutu"}, "path": "sdk/src/main/java/io/opentelemetry/sdk/trace/SamplingAttributes.java", "diffHunk": "@@ -0,0 +1,36 @@\n+/*\n+ * Copyright 2020, OpenTelemetry Authors\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package io.opentelemetry.sdk.trace;\n+\n+import io.opentelemetry.trace.attributes.DoubleAttributeSetter;\n+\n+/** Attributes that are applied by {@link Sampler} instances. */\n+public class SamplingAttributes {\n+\n+  /**\n+   * Probability value used by a probability-based Span sampling strategy.\n+   *\n+   * <p>Note: This will need to be updated if a specification for this value is merged which changes\n+   * this proposed value.\n+   *\n+   * <p>See https://github.com/open-telemetry/opentelemetry-specification/pull/570\n+   */\n+  public static final DoubleAttributeSetter SAMPLING_PROBABILITY =\n+      DoubleAttributeSetter.create(\"sampling.probability\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTc0MDQ5Nw=="}, "originalCommit": {"oid": "8ffc5903b256575e3f9d6f575844a47845cb5e74"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTc2MjE3MA==", "bodyText": "moved into the Samplers, near the usage.", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1116#discussion_r411762170", "createdAt": "2020-04-20T23:32:19Z", "author": {"login": "jkwatson"}, "path": "sdk/src/main/java/io/opentelemetry/sdk/trace/SamplingAttributes.java", "diffHunk": "@@ -0,0 +1,36 @@\n+/*\n+ * Copyright 2020, OpenTelemetry Authors\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package io.opentelemetry.sdk.trace;\n+\n+import io.opentelemetry.trace.attributes.DoubleAttributeSetter;\n+\n+/** Attributes that are applied by {@link Sampler} instances. */\n+public class SamplingAttributes {\n+\n+  /**\n+   * Probability value used by a probability-based Span sampling strategy.\n+   *\n+   * <p>Note: This will need to be updated if a specification for this value is merged which changes\n+   * this proposed value.\n+   *\n+   * <p>See https://github.com/open-telemetry/opentelemetry-specification/pull/570\n+   */\n+  public static final DoubleAttributeSetter SAMPLING_PROBABILITY =\n+      DoubleAttributeSetter.create(\"sampling.probability\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTc0MDQ5Nw=="}, "originalCommit": {"oid": "8ffc5903b256575e3f9d6f575844a47845cb5e74"}, "originalPosition": 33}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 857, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}