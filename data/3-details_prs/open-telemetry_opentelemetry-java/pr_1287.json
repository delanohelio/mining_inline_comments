{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI0ODU4MTY0", "number": 1287, "title": "Update config / deps to allow building on Java 14.", "bodyText": "I normally use Java 14 and found my build failing due to deprecated source=7 option. I figured suppressing this option would be enough to get the build to work and ended up in a rabbit hole :)\n\nSuppress options warnings because we are a library, not executable, so warnings about compiler arguments aren't so useful\nInstead of updating check to disable Werror on Java 9+, enabled Werror on all Java.\nUpdate error prone to fix buggy check that triggered false positive on Utils.checkNotNull\nOnly set error prone javac for pre Java 9 (though I don't think anyone uses such a JDK to build this project)\nImprove javax.annotation-api branch to apply to Java 9+ forever\nUpdate jacoco and mockito to support Java 14\nFix error prone warnings\nFix mockito deprecations", "createdAt": "2020-05-29T03:08:02Z", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1287", "merged": true, "mergeCommit": {"oid": "a9c7c7237d59a21d5b83ee9828afad511114e4ae"}, "closed": true, "closedAt": "2020-05-29T15:55:39Z", "author": {"login": "anuraaga"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcl5insgH2gAyNDI0ODU4MTY0OjRkMGQ4ODJjMTAzNjU1NmY4ZjZjODVjZGVmYzNlNTA4ZmM5NTAyOGQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcmElSQgFqTQyMTA4MjE5Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "4d0d882c1036556f8f6c85cdefc3e508fc95028d", "author": {"user": {"login": "anuraaga", "name": "Anuraag Agrawal"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/4d0d882c1036556f8f6c85cdefc3e508fc95028d", "committedDate": "2020-05-29T03:03:41Z", "message": "Update config / deps to allow building on Java 14."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIwNjk2NTcy", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1287#pullrequestreview-420696572", "createdAt": "2020-05-29T06:57:19Z", "commit": {"oid": "4d0d882c1036556f8f6c85cdefc3e508fc95028d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQwNjo1NzoyMFrOGcQ6yw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQwNjo1NzoyMFrOGcQ6yw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjI5MDUwNw==", "bodyText": "prevent what?", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1287#discussion_r432290507", "createdAt": "2020-05-29T06:57:20Z", "author": {"login": "iNikem"}, "path": "build.gradle", "diffHunk": "@@ -38,11 +38,17 @@ configure(opentelemetryProjects) {\n     targetCompatibility = 1.7\n \n     tasks.withType(JavaCompile) {\n-        // We suppress the \"try\" warning because it disallows managing an auto-closeable with\n-        // try-with-resources without referencing the auto-closeable within the try block.\n-        // We suppress the \"processing\" warning as suggested in\n-        // https://groups.google.com/forum/#!topic/bazel-discuss/_R3A9TJSoPM\n-        it.options.compilerArgs += [\"-Xlint:all\", \"-Xlint:-try\", \"-Xlint:-processing\"]\n+        it.options.compilerArgs += [\n+                \"-Xlint:all\",\n+                // We suppress the \"try\" warning because it disallows managing an auto-closeable with\n+                // try-with-resources without referencing the auto-closeable within the try block.\n+                \"-Xlint:-try\",\n+                // We suppress the \"processing\" warning as suggested in\n+                // https://groups.google.com/forum/#!topic/bazel-discuss/_R3A9TJSoPM\n+                \"-Xlint:-processing\",\n+                // We suppress the \"options\" warning because it prevents", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4d0d882c1036556f8f6c85cdefc3e508fc95028d"}, "originalPosition": 17}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "862aef76d2ad0b2617c85b66917ba2a19efe7f5e", "author": {"user": {"login": "anuraaga", "name": "Anuraag Agrawal"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/862aef76d2ad0b2617c85b66917ba2a19efe7f5e", "committedDate": "2020-05-29T06:58:17Z", "message": "Finish comment"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxMDM1MTA3", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1287#pullrequestreview-421035107", "createdAt": "2020-05-29T14:59:19Z", "commit": {"oid": "862aef76d2ad0b2617c85b66917ba2a19efe7f5e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQxNDo1OToyMFrOGcgd-A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQxNDo1OToyMFrOGcgd-A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjU0NTI3Mg==", "bodyText": "Please leave this if java version 8", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1287#discussion_r432545272", "createdAt": "2020-05-29T14:59:20Z", "author": {"login": "bogdandrutu"}, "path": "build.gradle", "diffHunk": "@@ -66,17 +72,17 @@ configure(opentelemetryProjects) {\n         it.options.errorprone.disable(\"AutoValueImmutableFields\")\n         // \"-Xep:AutoValueImmutableFields:OFF\"\n \n+        // UnnecessaryAnonymousClass requires Java 8 but we target Java 7\n+        it.options.errorprone.disable(\"UnnecessaryAnonymousClass\")\n+        // \"-Xep:UnnecessaryAnonymousClass:OFF\"\n+\n         it.options.encoding = \"UTF-8\"\n \n         // Ignore warnings for protobuf and jmh generated files.\n         it.options.errorprone.excludedPaths = \".*generated.*\"\n         // \"-XepExcludedPaths:.*/build/generated/source/proto/.*\"\n \n-        // Enforce errorprone warnings to be errors.\n-        if (!JavaVersion.current().isJava9() && !JavaVersion.current().isJava10() && !JavaVersion.current().isJava11()) {\n-            // TODO: Enable -Werror for Java 9+\n-            it.options.compilerArgs += [\"-Werror\"]\n-        }\n+        it.options.compilerArgs += [\"-Werror\"]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "862aef76d2ad0b2617c85b66917ba2a19efe7f5e"}, "originalPosition": 42}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxMDgyMTk2", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1287#pullrequestreview-421082196", "createdAt": "2020-05-29T15:55:33Z", "commit": {"oid": "862aef76d2ad0b2617c85b66917ba2a19efe7f5e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2812, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}