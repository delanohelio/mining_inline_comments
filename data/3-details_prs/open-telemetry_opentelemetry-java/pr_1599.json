{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc1MjQ4MTM0", "number": 1599, "title": "Add an overload to the recordException method to support additional attributes", "bodyText": "closes #1597", "createdAt": "2020-08-28T07:54:27Z", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1599", "merged": true, "mergeCommit": {"oid": "ed08e9f28783978e792156fa97283b384e90bf87"}, "closed": true, "closedAt": "2020-08-28T19:41:38Z", "author": {"login": "dengliming"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdDQMdhAH2gAyNDc1MjQ4MTM0OmFjODk2N2FjNzVjMjQxNDA1MjhjNDA0MGEyZjU1NDQ3MmJiMTVjY2M=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdDaW1igFqTQ3Nzk4Mjc3OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "ac8967ac75c24140528c4040a2f554472bb15ccc", "author": {"user": {"login": "dengliming", "name": null}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/ac8967ac75c24140528c4040a2f554472bb15ccc", "committedDate": "2020-08-28T07:51:06Z", "message": "Add an overload to the recordException method to support additional attributes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "29ef46df9270791455831a44c86ddc9d3061046c", "author": {"user": {"login": "dengliming", "name": null}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/29ef46df9270791455831a44c86ddc9d3061046c", "committedDate": "2020-08-28T08:34:10Z", "message": "Fix Codecov"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc3NTg2NTU2", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1599#pullrequestreview-477586556", "createdAt": "2020-08-28T09:33:51Z", "commit": {"oid": "29ef46df9270791455831a44c86ddc9d3061046c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc3NjA3ODU0", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1599#pullrequestreview-477607854", "createdAt": "2020-08-28T10:07:37Z", "commit": {"oid": "29ef46df9270791455831a44c86ddc9d3061046c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc3OTIyOTk1", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1599#pullrequestreview-477922995", "createdAt": "2020-08-28T17:56:07Z", "commit": {"oid": "29ef46df9270791455831a44c86ddc9d3061046c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQxNzo1NjowN1rOHJPlSQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQxNzo1NjowN1rOHJPlSQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTQ1NDUzNw==", "bodyText": "why not just assign this to additionalAttributes.newBuilder() if the additional attributes are provided? I think the code will read more simply and be slightly more efficient.", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1599#discussion_r479454537", "createdAt": "2020-08-28T17:56:07Z", "author": {"login": "jkwatson"}, "path": "sdk/tracing/src/main/java/io/opentelemetry/sdk/trace/RecordEventsReadableSpan.java", "diffHunk": "@@ -428,11 +428,25 @@ public void setStatus(Status status) {\n \n   @Override\n   public void recordException(Throwable exception) {\n+    recordException(exception, null);\n+  }\n+\n+  @Override\n+  public void recordException(Throwable exception, Attributes additionalAttributes) {\n     if (exception == null) {\n       return;\n     }\n     long timestamp = clock.now();\n-    Attributes.Builder attributes = Attributes.newBuilder();\n+    final Attributes.Builder attributes = Attributes.newBuilder();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "29ef46df9270791455831a44c86ddc9d3061046c"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fb55db1d5deddfa6ef867bbd51efc6bdf40bb206", "author": {"user": {"login": "dengliming", "name": null}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/fb55db1d5deddfa6ef867bbd51efc6bdf40bb206", "committedDate": "2020-08-28T18:21:17Z", "message": "Fix review"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc3OTQ4NzEz", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1599#pullrequestreview-477948713", "createdAt": "2020-08-28T18:40:01Z", "commit": {"oid": "fb55db1d5deddfa6ef867bbd51efc6bdf40bb206"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc3OTUxNTEy", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1599#pullrequestreview-477951512", "createdAt": "2020-08-28T18:44:47Z", "commit": {"oid": "fb55db1d5deddfa6ef867bbd51efc6bdf40bb206"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQxODo0NDo0OFrOHJQ7lA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQxODo0NDo0OFrOHJQ7lA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTQ3NjYyOA==", "bodyText": "even simpler is just ? addiontalAttributes.toBuilder() yes?", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1599#discussion_r479476628", "createdAt": "2020-08-28T18:44:48Z", "author": {"login": "jkwatson"}, "path": "sdk/tracing/src/main/java/io/opentelemetry/sdk/trace/RecordEventsReadableSpan.java", "diffHunk": "@@ -428,11 +428,19 @@ public void setStatus(Status status) {\n \n   @Override\n   public void recordException(Throwable exception) {\n+    recordException(exception, null);\n+  }\n+\n+  @Override\n+  public void recordException(Throwable exception, Attributes additionalAttributes) {\n     if (exception == null) {\n       return;\n     }\n     long timestamp = clock.now();\n-    Attributes.Builder attributes = Attributes.newBuilder();\n+    Attributes.Builder attributes =\n+        additionalAttributes != null\n+            ? Attributes.newBuilder(additionalAttributes)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fb55db1d5deddfa6ef867bbd51efc6bdf40bb206"}, "originalPosition": 16}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "214356e938dad89d826cc0519580fa1d2f10c232", "author": {"user": {"login": "dengliming", "name": null}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/214356e938dad89d826cc0519580fa1d2f10c232", "committedDate": "2020-08-28T18:48:42Z", "message": "Fix review"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc3OTgyNzc5", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1599#pullrequestreview-477982779", "createdAt": "2020-08-28T19:41:29Z", "commit": {"oid": "214356e938dad89d826cc0519580fa1d2f10c232"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2414, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}