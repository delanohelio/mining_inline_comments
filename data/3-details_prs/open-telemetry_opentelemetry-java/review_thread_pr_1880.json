{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA5ODA1MzUz", "number": 1880, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQxNToyNzo1NlrOEx9LVw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QxMDo1OTozOFrOEySu8Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIwODE4MDA3OnYy", "diffSide": "RIGHT", "path": "sdk/testing/src/main/java/io/opentelemetry/sdk/testing/junit5/OpenTelemetryExtension.java", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQxNToyNzo1NlrOHoVEBw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QwNzozMjoyNVrOHougBA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjA1MDE4Mw==", "bodyText": "Should we return OpenTelemetry, rather than SDK, so people don't create tracers using the SDK directly and expect that to be the normal way to operate? We could have a separate method that returns the TracerManagement interface, perhaps?", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1880#discussion_r512050183", "createdAt": "2020-10-26T15:27:56Z", "author": {"login": "jkwatson"}, "path": "sdk/testing/src/main/java/io/opentelemetry/sdk/testing/junit5/OpenTelemetryExtension.java", "diffHunk": "@@ -0,0 +1,110 @@\n+/*\n+ * Copyright The OpenTelemetry Authors\n+ * SPDX-License-Identifier: Apache-2.0\n+ */\n+\n+package io.opentelemetry.sdk.testing.junit5;\n+\n+import io.opentelemetry.OpenTelemetry;\n+import io.opentelemetry.context.propagation.DefaultContextPropagators;\n+import io.opentelemetry.exporters.inmemory.InMemorySpanExporter;\n+import io.opentelemetry.sdk.OpenTelemetrySdk;\n+import io.opentelemetry.sdk.trace.TracerSdkProvider;\n+import io.opentelemetry.sdk.trace.data.SpanData;\n+import io.opentelemetry.sdk.trace.export.SimpleSpanProcessor;\n+import io.opentelemetry.trace.propagation.HttpTraceContext;\n+import java.util.List;\n+import org.junit.jupiter.api.extension.AfterAllCallback;\n+import org.junit.jupiter.api.extension.BeforeAllCallback;\n+import org.junit.jupiter.api.extension.BeforeEachCallback;\n+import org.junit.jupiter.api.extension.ExtensionContext;\n+\n+/**\n+ * A JUnit5 extension which sets up the {@link OpenTelemetrySdk} for testing, resetting state\n+ * between tests.\n+ *\n+ * <pre>{@code\n+ * > class CoolTest {\n+ * >   {@literal @}RegisterExtension\n+ * >   static final OpenTelemetryExtension otelTesting = OpenTelemetryExtension.create();\n+ * >\n+ * >   private final Tracer tracer = otelTesting.getOpenTelemetry().getTracer(\"test\");\n+ * >\n+ * >   {@literal @}Test\n+ * >   void test() {\n+ * >     tracer.spanBuilder(\"name\").startSpan();\n+ * >     assertThat(otelTesting.getSpans()).containsExactly(expected);\n+ * >   }\n+ * >  }\n+ * }</pre>\n+ */\n+public class OpenTelemetryExtension\n+    implements BeforeEachCallback, BeforeAllCallback, AfterAllCallback {\n+\n+  /**\n+   * Returns a {@link OpenTelemetryExtension} with a default SDK initialized with an in-memory span\n+   * exporter and W3C trace context propagation.\n+   */\n+  public static OpenTelemetryExtension create() {\n+    InMemorySpanExporter spanExporter = InMemorySpanExporter.create();\n+\n+    TracerSdkProvider tracerProvider = TracerSdkProvider.builder().build();\n+    tracerProvider.addSpanProcessor(SimpleSpanProcessor.builder(spanExporter).build());\n+\n+    OpenTelemetrySdk openTelemetry =\n+        OpenTelemetrySdk.builder()\n+            .setPropagators(\n+                DefaultContextPropagators.builder()\n+                    .addTextMapPropagator(HttpTraceContext.getInstance())\n+                    .build())\n+            .setTracerProvider(tracerProvider)\n+            .build();\n+\n+    return new OpenTelemetryExtension(openTelemetry, spanExporter);\n+  }\n+\n+  private final OpenTelemetrySdk openTelemetry;\n+  private final InMemorySpanExporter spanExporter;\n+\n+  private OpenTelemetry previousGlobalOpenTelemetry;\n+\n+  private OpenTelemetryExtension(\n+      OpenTelemetrySdk openTelemetry, InMemorySpanExporter spanExporter) {\n+    this.openTelemetry = openTelemetry;\n+    this.spanExporter = spanExporter;\n+  }\n+\n+  /** Returns the {@link OpenTelemetrySdk} created by this extension. */\n+  public OpenTelemetrySdk getOpenTelemetry() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fd6cffcfe8d8db6a43aa63534b68d49b2186aa31"}, "originalPosition": 78}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjA1NTU0Nw==", "bodyText": "It's a good point - I wasn't sure how important the distinction is in tests so made it this way. I originally had this in the top level package but moved it into the sdk package / artifact name after realizing it's only useful with the SDK. Instead of exposing API and management separately I figured this is simpler but open to alternatives.", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1880#discussion_r512055547", "createdAt": "2020-10-26T15:34:49Z", "author": {"login": "anuraaga"}, "path": "sdk/testing/src/main/java/io/opentelemetry/sdk/testing/junit5/OpenTelemetryExtension.java", "diffHunk": "@@ -0,0 +1,110 @@\n+/*\n+ * Copyright The OpenTelemetry Authors\n+ * SPDX-License-Identifier: Apache-2.0\n+ */\n+\n+package io.opentelemetry.sdk.testing.junit5;\n+\n+import io.opentelemetry.OpenTelemetry;\n+import io.opentelemetry.context.propagation.DefaultContextPropagators;\n+import io.opentelemetry.exporters.inmemory.InMemorySpanExporter;\n+import io.opentelemetry.sdk.OpenTelemetrySdk;\n+import io.opentelemetry.sdk.trace.TracerSdkProvider;\n+import io.opentelemetry.sdk.trace.data.SpanData;\n+import io.opentelemetry.sdk.trace.export.SimpleSpanProcessor;\n+import io.opentelemetry.trace.propagation.HttpTraceContext;\n+import java.util.List;\n+import org.junit.jupiter.api.extension.AfterAllCallback;\n+import org.junit.jupiter.api.extension.BeforeAllCallback;\n+import org.junit.jupiter.api.extension.BeforeEachCallback;\n+import org.junit.jupiter.api.extension.ExtensionContext;\n+\n+/**\n+ * A JUnit5 extension which sets up the {@link OpenTelemetrySdk} for testing, resetting state\n+ * between tests.\n+ *\n+ * <pre>{@code\n+ * > class CoolTest {\n+ * >   {@literal @}RegisterExtension\n+ * >   static final OpenTelemetryExtension otelTesting = OpenTelemetryExtension.create();\n+ * >\n+ * >   private final Tracer tracer = otelTesting.getOpenTelemetry().getTracer(\"test\");\n+ * >\n+ * >   {@literal @}Test\n+ * >   void test() {\n+ * >     tracer.spanBuilder(\"name\").startSpan();\n+ * >     assertThat(otelTesting.getSpans()).containsExactly(expected);\n+ * >   }\n+ * >  }\n+ * }</pre>\n+ */\n+public class OpenTelemetryExtension\n+    implements BeforeEachCallback, BeforeAllCallback, AfterAllCallback {\n+\n+  /**\n+   * Returns a {@link OpenTelemetryExtension} with a default SDK initialized with an in-memory span\n+   * exporter and W3C trace context propagation.\n+   */\n+  public static OpenTelemetryExtension create() {\n+    InMemorySpanExporter spanExporter = InMemorySpanExporter.create();\n+\n+    TracerSdkProvider tracerProvider = TracerSdkProvider.builder().build();\n+    tracerProvider.addSpanProcessor(SimpleSpanProcessor.builder(spanExporter).build());\n+\n+    OpenTelemetrySdk openTelemetry =\n+        OpenTelemetrySdk.builder()\n+            .setPropagators(\n+                DefaultContextPropagators.builder()\n+                    .addTextMapPropagator(HttpTraceContext.getInstance())\n+                    .build())\n+            .setTracerProvider(tracerProvider)\n+            .build();\n+\n+    return new OpenTelemetryExtension(openTelemetry, spanExporter);\n+  }\n+\n+  private final OpenTelemetrySdk openTelemetry;\n+  private final InMemorySpanExporter spanExporter;\n+\n+  private OpenTelemetry previousGlobalOpenTelemetry;\n+\n+  private OpenTelemetryExtension(\n+      OpenTelemetrySdk openTelemetry, InMemorySpanExporter spanExporter) {\n+    this.openTelemetry = openTelemetry;\n+    this.spanExporter = spanExporter;\n+  }\n+\n+  /** Returns the {@link OpenTelemetrySdk} created by this extension. */\n+  public OpenTelemetrySdk getOpenTelemetry() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjA1MDE4Mw=="}, "originalCommit": {"oid": "fd6cffcfe8d8db6a43aa63534b68d49b2186aa31"}, "originalPosition": 78}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjE4NzUzOA==", "bodyText": "My only concern is having people develop good habits wrt. using the API vs. using the SDK, so I think I'd prefer having the 2 methods exposed separately, even if it's just for this test utility. We've had enough people try to use the SDK for writing instrumentation that anything we can do to get them to not do that would be good. :)", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1880#discussion_r512187538", "createdAt": "2020-10-26T18:41:00Z", "author": {"login": "jkwatson"}, "path": "sdk/testing/src/main/java/io/opentelemetry/sdk/testing/junit5/OpenTelemetryExtension.java", "diffHunk": "@@ -0,0 +1,110 @@\n+/*\n+ * Copyright The OpenTelemetry Authors\n+ * SPDX-License-Identifier: Apache-2.0\n+ */\n+\n+package io.opentelemetry.sdk.testing.junit5;\n+\n+import io.opentelemetry.OpenTelemetry;\n+import io.opentelemetry.context.propagation.DefaultContextPropagators;\n+import io.opentelemetry.exporters.inmemory.InMemorySpanExporter;\n+import io.opentelemetry.sdk.OpenTelemetrySdk;\n+import io.opentelemetry.sdk.trace.TracerSdkProvider;\n+import io.opentelemetry.sdk.trace.data.SpanData;\n+import io.opentelemetry.sdk.trace.export.SimpleSpanProcessor;\n+import io.opentelemetry.trace.propagation.HttpTraceContext;\n+import java.util.List;\n+import org.junit.jupiter.api.extension.AfterAllCallback;\n+import org.junit.jupiter.api.extension.BeforeAllCallback;\n+import org.junit.jupiter.api.extension.BeforeEachCallback;\n+import org.junit.jupiter.api.extension.ExtensionContext;\n+\n+/**\n+ * A JUnit5 extension which sets up the {@link OpenTelemetrySdk} for testing, resetting state\n+ * between tests.\n+ *\n+ * <pre>{@code\n+ * > class CoolTest {\n+ * >   {@literal @}RegisterExtension\n+ * >   static final OpenTelemetryExtension otelTesting = OpenTelemetryExtension.create();\n+ * >\n+ * >   private final Tracer tracer = otelTesting.getOpenTelemetry().getTracer(\"test\");\n+ * >\n+ * >   {@literal @}Test\n+ * >   void test() {\n+ * >     tracer.spanBuilder(\"name\").startSpan();\n+ * >     assertThat(otelTesting.getSpans()).containsExactly(expected);\n+ * >   }\n+ * >  }\n+ * }</pre>\n+ */\n+public class OpenTelemetryExtension\n+    implements BeforeEachCallback, BeforeAllCallback, AfterAllCallback {\n+\n+  /**\n+   * Returns a {@link OpenTelemetryExtension} with a default SDK initialized with an in-memory span\n+   * exporter and W3C trace context propagation.\n+   */\n+  public static OpenTelemetryExtension create() {\n+    InMemorySpanExporter spanExporter = InMemorySpanExporter.create();\n+\n+    TracerSdkProvider tracerProvider = TracerSdkProvider.builder().build();\n+    tracerProvider.addSpanProcessor(SimpleSpanProcessor.builder(spanExporter).build());\n+\n+    OpenTelemetrySdk openTelemetry =\n+        OpenTelemetrySdk.builder()\n+            .setPropagators(\n+                DefaultContextPropagators.builder()\n+                    .addTextMapPropagator(HttpTraceContext.getInstance())\n+                    .build())\n+            .setTracerProvider(tracerProvider)\n+            .build();\n+\n+    return new OpenTelemetryExtension(openTelemetry, spanExporter);\n+  }\n+\n+  private final OpenTelemetrySdk openTelemetry;\n+  private final InMemorySpanExporter spanExporter;\n+\n+  private OpenTelemetry previousGlobalOpenTelemetry;\n+\n+  private OpenTelemetryExtension(\n+      OpenTelemetrySdk openTelemetry, InMemorySpanExporter spanExporter) {\n+    this.openTelemetry = openTelemetry;\n+    this.spanExporter = spanExporter;\n+  }\n+\n+  /** Returns the {@link OpenTelemetrySdk} created by this extension. */\n+  public OpenTelemetrySdk getOpenTelemetry() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjA1MDE4Mw=="}, "originalCommit": {"oid": "fd6cffcfe8d8db6a43aa63534b68d49b2186aa31"}, "originalPosition": 78}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjQ2Njk0OA==", "bodyText": "Makes sense, thanks!", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1880#discussion_r512466948", "createdAt": "2020-10-27T07:32:25Z", "author": {"login": "anuraaga"}, "path": "sdk/testing/src/main/java/io/opentelemetry/sdk/testing/junit5/OpenTelemetryExtension.java", "diffHunk": "@@ -0,0 +1,110 @@\n+/*\n+ * Copyright The OpenTelemetry Authors\n+ * SPDX-License-Identifier: Apache-2.0\n+ */\n+\n+package io.opentelemetry.sdk.testing.junit5;\n+\n+import io.opentelemetry.OpenTelemetry;\n+import io.opentelemetry.context.propagation.DefaultContextPropagators;\n+import io.opentelemetry.exporters.inmemory.InMemorySpanExporter;\n+import io.opentelemetry.sdk.OpenTelemetrySdk;\n+import io.opentelemetry.sdk.trace.TracerSdkProvider;\n+import io.opentelemetry.sdk.trace.data.SpanData;\n+import io.opentelemetry.sdk.trace.export.SimpleSpanProcessor;\n+import io.opentelemetry.trace.propagation.HttpTraceContext;\n+import java.util.List;\n+import org.junit.jupiter.api.extension.AfterAllCallback;\n+import org.junit.jupiter.api.extension.BeforeAllCallback;\n+import org.junit.jupiter.api.extension.BeforeEachCallback;\n+import org.junit.jupiter.api.extension.ExtensionContext;\n+\n+/**\n+ * A JUnit5 extension which sets up the {@link OpenTelemetrySdk} for testing, resetting state\n+ * between tests.\n+ *\n+ * <pre>{@code\n+ * > class CoolTest {\n+ * >   {@literal @}RegisterExtension\n+ * >   static final OpenTelemetryExtension otelTesting = OpenTelemetryExtension.create();\n+ * >\n+ * >   private final Tracer tracer = otelTesting.getOpenTelemetry().getTracer(\"test\");\n+ * >\n+ * >   {@literal @}Test\n+ * >   void test() {\n+ * >     tracer.spanBuilder(\"name\").startSpan();\n+ * >     assertThat(otelTesting.getSpans()).containsExactly(expected);\n+ * >   }\n+ * >  }\n+ * }</pre>\n+ */\n+public class OpenTelemetryExtension\n+    implements BeforeEachCallback, BeforeAllCallback, AfterAllCallback {\n+\n+  /**\n+   * Returns a {@link OpenTelemetryExtension} with a default SDK initialized with an in-memory span\n+   * exporter and W3C trace context propagation.\n+   */\n+  public static OpenTelemetryExtension create() {\n+    InMemorySpanExporter spanExporter = InMemorySpanExporter.create();\n+\n+    TracerSdkProvider tracerProvider = TracerSdkProvider.builder().build();\n+    tracerProvider.addSpanProcessor(SimpleSpanProcessor.builder(spanExporter).build());\n+\n+    OpenTelemetrySdk openTelemetry =\n+        OpenTelemetrySdk.builder()\n+            .setPropagators(\n+                DefaultContextPropagators.builder()\n+                    .addTextMapPropagator(HttpTraceContext.getInstance())\n+                    .build())\n+            .setTracerProvider(tracerProvider)\n+            .build();\n+\n+    return new OpenTelemetryExtension(openTelemetry, spanExporter);\n+  }\n+\n+  private final OpenTelemetrySdk openTelemetry;\n+  private final InMemorySpanExporter spanExporter;\n+\n+  private OpenTelemetry previousGlobalOpenTelemetry;\n+\n+  private OpenTelemetryExtension(\n+      OpenTelemetrySdk openTelemetry, InMemorySpanExporter spanExporter) {\n+    this.openTelemetry = openTelemetry;\n+    this.spanExporter = spanExporter;\n+  }\n+\n+  /** Returns the {@link OpenTelemetrySdk} created by this extension. */\n+  public OpenTelemetrySdk getOpenTelemetry() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjA1MDE4Mw=="}, "originalCommit": {"oid": "fd6cffcfe8d8db6a43aa63534b68d49b2186aa31"}, "originalPosition": 78}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIxMTY5MzMyOnYy", "diffSide": "RIGHT", "path": "sdk/testing/src/main/java/io/opentelemetry/sdk/testing/junit5/OpenTelemetryExtension.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QxMDo1NjoxMlrOHo2Kmw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QxMDo1NjoxMlrOHo2Kmw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjU5MjUzOQ==", "bodyText": "NIT:\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n             * A JUnit5 extension which sets up the {@link OpenTelemetrySdk} for testing, resetting state\n          \n          \n            \n             * A JUnit5 extension which sets up the {@link OpenTelemetrySdk} for testing, and resetting state", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1880#discussion_r512592539", "createdAt": "2020-10-27T10:56:12Z", "author": {"login": "thisthat"}, "path": "sdk/testing/src/main/java/io/opentelemetry/sdk/testing/junit5/OpenTelemetryExtension.java", "diffHunk": "@@ -0,0 +1,116 @@\n+/*\n+ * Copyright The OpenTelemetry Authors\n+ * SPDX-License-Identifier: Apache-2.0\n+ */\n+\n+package io.opentelemetry.sdk.testing.junit5;\n+\n+import io.opentelemetry.OpenTelemetry;\n+import io.opentelemetry.context.propagation.DefaultContextPropagators;\n+import io.opentelemetry.exporters.inmemory.InMemorySpanExporter;\n+import io.opentelemetry.sdk.OpenTelemetrySdk;\n+import io.opentelemetry.sdk.trace.TracerSdkManagement;\n+import io.opentelemetry.sdk.trace.TracerSdkProvider;\n+import io.opentelemetry.sdk.trace.data.SpanData;\n+import io.opentelemetry.sdk.trace.export.SimpleSpanProcessor;\n+import io.opentelemetry.trace.propagation.HttpTraceContext;\n+import java.util.List;\n+import org.junit.jupiter.api.extension.AfterAllCallback;\n+import org.junit.jupiter.api.extension.BeforeAllCallback;\n+import org.junit.jupiter.api.extension.BeforeEachCallback;\n+import org.junit.jupiter.api.extension.ExtensionContext;\n+\n+/**\n+ * A JUnit5 extension which sets up the {@link OpenTelemetrySdk} for testing, resetting state", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7f2dcfdab86d96eb1c755e81ebbc1b9e42c387d2"}, "originalPosition": 24}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIxMTcxMTg1OnYy", "diffSide": "RIGHT", "path": "sdk/testing/src/main/java/io/opentelemetry/sdk/testing/junit5/OpenTelemetryExtension.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QxMDo1OTozOFrOHo2VVQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QxMDo1OTozOFrOHo2VVQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjU5NTI4NQ==", "bodyText": "Maybe\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n             * >     tracer.spanBuilder(\"name\").startSpan();\n          \n          \n            \n             * >     tracer.spanBuilder(\"name\").startSpan().end();", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1880#discussion_r512595285", "createdAt": "2020-10-27T10:59:38Z", "author": {"login": "thisthat"}, "path": "sdk/testing/src/main/java/io/opentelemetry/sdk/testing/junit5/OpenTelemetryExtension.java", "diffHunk": "@@ -0,0 +1,116 @@\n+/*\n+ * Copyright The OpenTelemetry Authors\n+ * SPDX-License-Identifier: Apache-2.0\n+ */\n+\n+package io.opentelemetry.sdk.testing.junit5;\n+\n+import io.opentelemetry.OpenTelemetry;\n+import io.opentelemetry.context.propagation.DefaultContextPropagators;\n+import io.opentelemetry.exporters.inmemory.InMemorySpanExporter;\n+import io.opentelemetry.sdk.OpenTelemetrySdk;\n+import io.opentelemetry.sdk.trace.TracerSdkManagement;\n+import io.opentelemetry.sdk.trace.TracerSdkProvider;\n+import io.opentelemetry.sdk.trace.data.SpanData;\n+import io.opentelemetry.sdk.trace.export.SimpleSpanProcessor;\n+import io.opentelemetry.trace.propagation.HttpTraceContext;\n+import java.util.List;\n+import org.junit.jupiter.api.extension.AfterAllCallback;\n+import org.junit.jupiter.api.extension.BeforeAllCallback;\n+import org.junit.jupiter.api.extension.BeforeEachCallback;\n+import org.junit.jupiter.api.extension.ExtensionContext;\n+\n+/**\n+ * A JUnit5 extension which sets up the {@link OpenTelemetrySdk} for testing, resetting state\n+ * between tests.\n+ *\n+ * <pre>{@code\n+ * > class CoolTest {\n+ * >   {@literal @}RegisterExtension\n+ * >   static final OpenTelemetryExtension otelTesting = OpenTelemetryExtension.create();\n+ * >\n+ * >   private final Tracer tracer = otelTesting.getOpenTelemetry().getTracer(\"test\");\n+ * >\n+ * >   {@literal @}Test\n+ * >   void test() {\n+ * >     tracer.spanBuilder(\"name\").startSpan();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7f2dcfdab86d96eb1c755e81ebbc1b9e42c387d2"}, "originalPosition": 36}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2015, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}