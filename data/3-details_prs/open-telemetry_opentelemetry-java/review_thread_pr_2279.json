{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM3NTA4ODM2", "number": 2279, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xM1QwMDoyODo1OVrOFEjcSA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xM1QwMDoyODo1OVrOFEjcSA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQwMzE5MzA0OnYy", "diffSide": "RIGHT", "path": "exporters/otlp/src/main/java/io/opentelemetry/exporter/otlp/OtlpGrpcSpanExporter.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xM1QwMDoyOTowMFrOIEtdVA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQwNTowMDoxNVrOIF4_5A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTgxMDAwNA==", "bodyText": "I thought we had already done this. Good catch!", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2279#discussion_r541810004", "createdAt": "2020-12-13T00:29:00Z", "author": {"login": "jkwatson"}, "path": "exporters/otlp/src/main/java/io/opentelemetry/exporter/otlp/OtlpGrpcSpanExporter.java", "diffHunk": "@@ -105,6 +99,12 @@\n    *     or to a negative value, the exporter will wait indefinitely.\n    */\n   private OtlpGrpcSpanExporter(ManagedChannel channel, long deadlineMs) {\n+    Meter meter = GlobalMetricsProvider.getMeter(\"io.opentelemetry.exporters.otlp\");\n+    this.spansSeen =\n+        meter.longCounterBuilder(\"spansSeenByExporter\").build().bind(EXPORTER_NAME_LABELS);\n+    LongCounter spansExportedCounter = meter.longCounterBuilder(\"spansExportedByExporter\").build();\n+    this.spansExportedSuccess = spansExportedCounter.bind(EXPORT_SUCCESS_LABELS);\n+    this.spansExportedFailure = spansExportedCounter.bind(EXPORT_FAILURE_LABELS);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a715516b2d569e12f2dea7c1fdda3e2b13f85368"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjUxNzQ0Nw==", "bodyText": "I need to unbind them in shutdown.", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2279#discussion_r542517447", "createdAt": "2020-12-14T16:22:53Z", "author": {"login": "bogdandrutu"}, "path": "exporters/otlp/src/main/java/io/opentelemetry/exporter/otlp/OtlpGrpcSpanExporter.java", "diffHunk": "@@ -105,6 +99,12 @@\n    *     or to a negative value, the exporter will wait indefinitely.\n    */\n   private OtlpGrpcSpanExporter(ManagedChannel channel, long deadlineMs) {\n+    Meter meter = GlobalMetricsProvider.getMeter(\"io.opentelemetry.exporters.otlp\");\n+    this.spansSeen =\n+        meter.longCounterBuilder(\"spansSeenByExporter\").build().bind(EXPORTER_NAME_LABELS);\n+    LongCounter spansExportedCounter = meter.longCounterBuilder(\"spansExportedByExporter\").build();\n+    this.spansExportedSuccess = spansExportedCounter.bind(EXPORT_SUCCESS_LABELS);\n+    this.spansExportedFailure = spansExportedCounter.bind(EXPORT_FAILURE_LABELS);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTgxMDAwNA=="}, "originalCommit": {"oid": "a715516b2d569e12f2dea7c1fdda3e2b13f85368"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzA0NzY1Mg==", "bodyText": "Done.", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2279#discussion_r543047652", "createdAt": "2020-12-15T05:00:15Z", "author": {"login": "bogdandrutu"}, "path": "exporters/otlp/src/main/java/io/opentelemetry/exporter/otlp/OtlpGrpcSpanExporter.java", "diffHunk": "@@ -105,6 +99,12 @@\n    *     or to a negative value, the exporter will wait indefinitely.\n    */\n   private OtlpGrpcSpanExporter(ManagedChannel channel, long deadlineMs) {\n+    Meter meter = GlobalMetricsProvider.getMeter(\"io.opentelemetry.exporters.otlp\");\n+    this.spansSeen =\n+        meter.longCounterBuilder(\"spansSeenByExporter\").build().bind(EXPORTER_NAME_LABELS);\n+    LongCounter spansExportedCounter = meter.longCounterBuilder(\"spansExportedByExporter\").build();\n+    this.spansExportedSuccess = spansExportedCounter.bind(EXPORT_SUCCESS_LABELS);\n+    this.spansExportedFailure = spansExportedCounter.bind(EXPORT_FAILURE_LABELS);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTgxMDAwNA=="}, "originalCommit": {"oid": "a715516b2d569e12f2dea7c1fdda3e2b13f85368"}, "originalPosition": 41}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1698, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}