{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMwOTEwNDQ2", "number": 1317, "title": "Allow setting semantic attributes on Span.Builder", "bodyText": "Fixes #1316", "createdAt": "2020-06-08T08:17:28Z", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1317", "merged": true, "mergeCommit": {"oid": "546867b1ff89b4a54ae5f6282d36cf8d0d99b5d2"}, "closed": true, "closedAt": "2020-06-10T19:53:10Z", "author": {"login": "iNikem"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcpMA1cgH2gAyNDMwOTEwNDQ2OmE4YjFlNzUyNWE1MGQ4NGM4NzYwZmYwMjBjMGFjMjM5MjY4NDdjZDU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcpXgcjAFqTQyNjY0MTUzOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "a8b1e7525a50d84c8760ff020c0ac23926847cd5", "author": {"user": {"login": "iNikem", "name": "Nikita Salnikov-Tarnovski"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/a8b1e7525a50d84c8760ff020c0ac23926847cd5", "committedDate": "2020-06-08T08:16:45Z", "message": "Allow setting semantic attributes on Span.Builder"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI2MDA5NDMz", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1317#pullrequestreview-426009433", "createdAt": "2020-06-08T08:22:52Z", "commit": {"oid": "a8b1e7525a50d84c8760ff020c0ac23926847cd5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI2MjkyMzE3", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1317#pullrequestreview-426292317", "createdAt": "2020-06-08T14:21:35Z", "commit": {"oid": "a8b1e7525a50d84c8760ff020c0ac23926847cd5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI2MzEzNDYy", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1317#pullrequestreview-426313462", "createdAt": "2020-06-08T14:43:24Z", "commit": {"oid": "a8b1e7525a50d84c8760ff020c0ac23926847cd5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI2MzM2NTE3", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1317#pullrequestreview-426336517", "createdAt": "2020-06-08T15:05:45Z", "commit": {"oid": "a8b1e7525a50d84c8760ff020c0ac23926847cd5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI2MzUwNTg3", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1317#pullrequestreview-426350587", "createdAt": "2020-06-08T15:20:59Z", "commit": {"oid": "a8b1e7525a50d84c8760ff020c0ac23926847cd5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQxNToyMDo1OVrOGgjk7g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQxNToyMDo1OVrOGgjk7g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjc5MDUxMA==", "bodyText": "would it make sense to return this, or the builder from this call? Or does that not help make a more fluent API?", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1317#discussion_r436790510", "createdAt": "2020-06-08T15:20:59Z", "author": {"login": "jkwatson"}, "path": "api/src/main/java/io/opentelemetry/trace/attributes/StringAttributeSetter.java", "diffHunk": "@@ -61,4 +61,14 @@ public String key() {\n   public void set(Span span, @Nullable String value) {\n     span.setAttribute(key(), value);\n   }\n+\n+  /**\n+   * Sets the attribute on the provided span builder.\n+   *\n+   * @param spanBuilder the span builder to add the attribute to\n+   * @param value the value for this attribute\n+   */\n+  public void set(Span.Builder spanBuilder, @Nullable String value) {\n+    spanBuilder.setAttribute(key(), value);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a8b1e7525a50d84c8760ff020c0ac23926847cd5"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI2MzU3MTU5", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1317#pullrequestreview-426357159", "createdAt": "2020-06-08T15:28:04Z", "commit": {"oid": "a8b1e7525a50d84c8760ff020c0ac23926847cd5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQxNToyODowNFrOGgj4OA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQxNToyODowNFrOGgj4OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjc5NTQ0OA==", "bodyText": "This test doesn't actually test anything except that you can loop over the fields of the class. Can we add some actual assertions about the functionality, rather than just making calls that don't test anything?", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1317#discussion_r436795448", "createdAt": "2020-06-08T15:28:04Z", "author": {"login": "jkwatson"}, "path": "api/src/test/java/io/opentelemetry/trace/attributes/SemanticAttributesTest.java", "diffHunk": "@@ -51,15 +53,20 @@ public void shouldEnableSetAttributeOnSpan() throws IllegalAccessException {\n         keys.add(((StringAttributeSetter) attribute).key());\n         ((StringAttributeSetter) attribute).set(span, \"TestValue\");\n         ((StringAttributeSetter) attribute).set(span, null);\n+        ((StringAttributeSetter) attribute).set(builder, \"TestValue\");\n+        ((StringAttributeSetter) attribute).set(builder, null);\n       } else if (attribute instanceof LongAttributeSetter) {\n         keys.add(((LongAttributeSetter) attribute).key());\n         ((LongAttributeSetter) attribute).set(span, 42L);\n+        ((LongAttributeSetter) attribute).set(builder, 42L);\n       } else if (attribute instanceof DoubleAttributeSetter) {\n         keys.add(((DoubleAttributeSetter) attribute).key());\n         ((DoubleAttributeSetter) attribute).set(span, 3.14);\n+        ((DoubleAttributeSetter) attribute).set(builder, 3.14);\n       } else if (attribute instanceof BooleanAttributeSetter) {\n         keys.add(((BooleanAttributeSetter) attribute).key());\n         ((BooleanAttributeSetter) attribute).set(span, true);\n+        ((BooleanAttributeSetter) attribute).set(builder, true);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a8b1e7525a50d84c8760ff020c0ac23926847cd5"}, "originalPosition": 31}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b8ebf6e1cb6a12b5cc4dee9baabb561ef0f21b49", "author": {"user": {"login": "iNikem", "name": "Nikita Salnikov-Tarnovski"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/b8ebf6e1cb6a12b5cc4dee9baabb561ef0f21b49", "committedDate": "2020-06-08T17:58:27Z", "message": "Make test actually verify something"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI2NjQxNTM5", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1317#pullrequestreview-426641539", "createdAt": "2020-06-08T21:40:14Z", "commit": {"oid": "b8ebf6e1cb6a12b5cc4dee9baabb561ef0f21b49"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2850, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}