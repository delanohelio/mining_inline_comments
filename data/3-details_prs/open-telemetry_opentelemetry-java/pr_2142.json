{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI4MDM3MjA3", "number": 2142, "title": "Add support for AWS Lambda resource attributes", "bodyText": "Resolves #2141", "createdAt": "2020-11-26T12:13:10Z", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2142", "merged": true, "mergeCommit": {"oid": "8bcfaa46bca24f3f0dccbfdb0d43b3610e5d742c"}, "closed": true, "closedAt": "2020-12-02T04:36:45Z", "author": {"login": "mateuszrzeszutek"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdhnyBKAFqTU0MTA2Njk1Mw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdiG8yMgFqTU0MjQ5MjYzNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQxMDY2OTUz", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2142#pullrequestreview-541066953", "createdAt": "2020-11-30T16:17:40Z", "commit": {"oid": "701621e55240fb1ef767d2e1a82c227a182b68a9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQxNDg0NzU1", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2142#pullrequestreview-541484755", "createdAt": "2020-12-01T04:42:30Z", "commit": {"oid": "701621e55240fb1ef767d2e1a82c227a182b68a9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMVQwNDo0MjozMVrOH8X-JA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMVQwNDo0MjozMVrOH8X-JA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzA2OTM0OA==", "bodyText": "Can you rebase? I've removed the guava dependency from this module. You can use getOrDefault and just isEmpty instead I believe.", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2142#discussion_r533069348", "createdAt": "2020-12-01T04:42:31Z", "author": {"login": "anuraaga"}, "path": "sdk-extensions/aws/src/main/java/io/opentelemetry/sdk/extension/aws/resource/LambdaResource.java", "diffHunk": "@@ -0,0 +1,57 @@\n+/*\n+ * Copyright The OpenTelemetry Authors\n+ * SPDX-License-Identifier: Apache-2.0\n+ */\n+\n+package io.opentelemetry.sdk.extension.aws.resource;\n+\n+import static com.google.common.base.Strings.isNullOrEmpty;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "701621e55240fb1ef767d2e1a82c227a182b68a9"}, "originalPosition": 8}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5bf6424233e46344b3511e7b24fa37c942d62701", "author": {"user": {"login": "mateuszrzeszutek", "name": "Mateusz Rzeszutek"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/5bf6424233e46344b3511e7b24fa37c942d62701", "committedDate": "2020-12-01T09:33:31Z", "message": "Add support for AWS Lambda resource attributes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "47f6362f27defbd821322c27cfdb6678a32562bd", "author": {"user": {"login": "mateuszrzeszutek", "name": "Mateusz Rzeszutek"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/47f6362f27defbd821322c27cfdb6678a32562bd", "committedDate": "2020-12-01T09:37:29Z", "message": "Fix after rebase"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "701621e55240fb1ef767d2e1a82c227a182b68a9", "author": {"user": {"login": "mateuszrzeszutek", "name": "Mateusz Rzeszutek"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/701621e55240fb1ef767d2e1a82c227a182b68a9", "committedDate": "2020-11-26T12:09:59Z", "message": "Add support for AWS Lambda resource attributes"}, "afterCommit": {"oid": "47f6362f27defbd821322c27cfdb6678a32562bd", "author": {"user": {"login": "mateuszrzeszutek", "name": "Mateusz Rzeszutek"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/47f6362f27defbd821322c27cfdb6678a32562bd", "committedDate": "2020-12-01T09:37:29Z", "message": "Fix after rebase"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQxNzM2Mjgw", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2142#pullrequestreview-541736280", "createdAt": "2020-12-01T10:01:13Z", "commit": {"oid": "47f6362f27defbd821322c27cfdb6678a32562bd"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMVQxMDowMToxM1rOH8jlSw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMVQxMDowMToxM1rOH8jlSw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzI1OTU5NQ==", "bodyText": "Shouldn't we check empty for this too? It's not clear why we check for the others only but not this one.", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2142#discussion_r533259595", "createdAt": "2020-12-01T10:01:13Z", "author": {"login": "anuraaga"}, "path": "sdk-extensions/aws/src/main/java/io/opentelemetry/sdk/extension/aws/resource/LambdaResource.java", "diffHunk": "@@ -0,0 +1,54 @@\n+/*\n+ * Copyright The OpenTelemetry Authors\n+ * SPDX-License-Identifier: Apache-2.0\n+ */\n+\n+package io.opentelemetry.sdk.extension.aws.resource;\n+\n+import io.opentelemetry.api.common.Attributes;\n+import io.opentelemetry.api.common.AttributesBuilder;\n+import io.opentelemetry.api.trace.attributes.SemanticAttributes;\n+import io.opentelemetry.sdk.resources.ResourceProvider;\n+import java.util.Map;\n+\n+/** A {@link ResourceProvider} which provides information about the AWS Lambda function. */\n+public final class LambdaResource extends ResourceProvider {\n+  private final Map<String, String> environmentVariables;\n+\n+  public LambdaResource() {\n+    this(System.getenv());\n+  }\n+\n+  // Visible for testing\n+  LambdaResource(Map<String, String> environmentVariables) {\n+    this.environmentVariables = environmentVariables;\n+  }\n+\n+  @Override\n+  protected Attributes getAttributes() {\n+    if (!isLambda()) {\n+      return Attributes.empty();\n+    }\n+    String region = environmentVariables.getOrDefault(\"AWS_REGION\", \"\");\n+    String functionName = environmentVariables.get(\"AWS_LAMBDA_FUNCTION_NAME\");\n+    String functionVersion = environmentVariables.getOrDefault(\"AWS_LAMBDA_FUNCTION_VERSION\", \"\");\n+\n+    AttributesBuilder builder =\n+        Attributes.builder()\n+            .put(SemanticAttributes.CLOUD_PROVIDER, SemanticAttributes.CloudProviderValues.AWS)\n+            .put(SemanticAttributes.FAAS_NAME, functionName);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "47f6362f27defbd821322c27cfdb6678a32562bd"}, "originalPosition": 39}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "71b4ce836b1905e8bf6716bad3d604ac21eb480f", "author": {"user": {"login": "mateuszrzeszutek", "name": "Mateusz Rzeszutek"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/71b4ce836b1905e8bf6716bad3d604ac21eb480f", "committedDate": "2020-12-01T10:21:59Z", "message": "Minor refactor"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "12cd4089b35ab8a426c7a5541d4d25169277571a", "author": {"user": {"login": "mateuszrzeszutek", "name": "Mateusz Rzeszutek"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/12cd4089b35ab8a426c7a5541d4d25169277571a", "committedDate": "2020-12-01T10:23:26Z", "message": "Minor refactor"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b6944578e70493bdc8668243f8c3d6edfddd6163", "author": {"user": {"login": "mateuszrzeszutek", "name": "Mateusz Rzeszutek"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/b6944578e70493bdc8668243f8c3d6edfddd6163", "committedDate": "2020-12-01T10:24:52Z", "message": "Minor refactor"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQyNDkyNjM2", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2142#pullrequestreview-542492636", "createdAt": "2020-12-02T04:36:29Z", "commit": {"oid": "b6944578e70493bdc8668243f8c3d6edfddd6163"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3783, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}