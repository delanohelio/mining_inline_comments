{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk1MTQzMzM1", "number": 1051, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQwNTo0MToxMlrODshIyQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQxNjo0MDozMFrODswlmw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ4MDA2ODU3OnYy", "diffSide": "RIGHT", "path": "QUICKSTART.md", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQwNTo0MToxMlrOF9aSrw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQxNTo0MzoxN1rOF9wFVg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTkzODIyMw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            [W3C Trace Context](https://www.w3.org/TR/trace-context/) HTTP headers. For doing in-process\n          \n          \n            \n            propagation, [gRPC Context]() is used (contained in a single, small artifact non-dependent on\n          \n          \n            \n            [W3C Trace Context](https://www.w3.org/TR/trace-context/) HTTP headers.", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1051#discussion_r399938223", "createdAt": "2020-03-30T05:41:12Z", "author": {"login": "thisthat"}, "path": "QUICKSTART.md", "diffHunk": "@@ -164,8 +164,15 @@ For more details how to read context from remote processes, see\n \n ### Context Propagation\n \n+In-process propagation leverages [gRPC Context](https://grpc.github.io/grpc-java/javadoc/io/grpc/Context.html),\n+a well established context propagation library, contained in a small artifact, which is non-dependent on the\n+entire gRPC engine.\n+\n OpenTelemetry provides a text-based approach to propagate context to remote services using the\n-[W3C Trace Context](https://www.w3.org/TR/trace-context/) HTTP headers. The following presents an\n+[W3C Trace Context](https://www.w3.org/TR/trace-context/) HTTP headers. For doing in-process\n+propagation, [gRPC Context]() is used (contained in a single, small artifact non-dependent on", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "078c001a58c87d14edfe0a1aac695b604a90725b"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDI5NTI1NA==", "bodyText": "Ooops, somehow this ended up repeated. Fixed.", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1051#discussion_r400295254", "createdAt": "2020-03-30T15:43:17Z", "author": {"login": "carlosalberto"}, "path": "QUICKSTART.md", "diffHunk": "@@ -164,8 +164,15 @@ For more details how to read context from remote processes, see\n \n ### Context Propagation\n \n+In-process propagation leverages [gRPC Context](https://grpc.github.io/grpc-java/javadoc/io/grpc/Context.html),\n+a well established context propagation library, contained in a small artifact, which is non-dependent on the\n+entire gRPC engine.\n+\n OpenTelemetry provides a text-based approach to propagate context to remote services using the\n-[W3C Trace Context](https://www.w3.org/TR/trace-context/) HTTP headers. The following presents an\n+[W3C Trace Context](https://www.w3.org/TR/trace-context/) HTTP headers. For doing in-process\n+propagation, [gRPC Context]() is used (contained in a single, small artifact non-dependent on", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTkzODIyMw=="}, "originalCommit": {"oid": "078c001a58c87d14edfe0a1aac695b604a90725b"}, "originalPosition": 11}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ4MjA1NTM5OnYy", "diffSide": "RIGHT", "path": "QUICKSTART.md", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQxNDo0NDo1M1rOF9tRhw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQxODowMjoxNVrOF91w_w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDI0OTIyMw==", "bodyText": "This makes it look like if setting attributes was only allowed within the scope. You might want to move that out to make it clear this is not the case.", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1051#discussion_r400249223", "createdAt": "2020-03-30T14:44:53Z", "author": {"login": "arminru"}, "path": "QUICKSTART.md", "diffHunk": "@@ -181,13 +188,17 @@ HttpTextFormat.Setter<HttpURLConnection> setter =\n \n URL url = new URL(\"http://127.0.0.1:8080/resource\");\n Span outGoing = tracer.spanBuilder(\"/resource\").setSpanKind(Span.Kind.CLIENT).startSpan();\n-// Semantic Convention\n-outGoing.setAttribute(\"http.method\", \"GET\");\n-outGoing.setAttribute(\"http.url\", url.toString());\n-HttpURLConnection transportLayer = (HttpURLConnection) url.openConnection();\n-// Inject the request with the context\n-tracer.getHttpTextFormat().inject(outGoing.getContext(), transportLayer, setter);\n-// Make outgoing call\n+try (Scope scope = tracer.withSpan(outGoing)) {\n+  // Semantic Convention\n+  outGoing.setAttribute(\"http.method\", \"GET\");\n+  outGoing.setAttribute(\"http.url\", url.toString());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "078c001a58c87d14edfe0a1aac695b604a90725b"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDI5NjY5OA==", "bodyText": "I'd rather add a note such as setting attributes does not require the Span to be associated to the current Context, as moving that out of the scope would also give users a bad idea (that you set the attributes first and then you set the Span active). Would that work for you?", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1051#discussion_r400296698", "createdAt": "2020-03-30T15:45:11Z", "author": {"login": "carlosalberto"}, "path": "QUICKSTART.md", "diffHunk": "@@ -181,13 +188,17 @@ HttpTextFormat.Setter<HttpURLConnection> setter =\n \n URL url = new URL(\"http://127.0.0.1:8080/resource\");\n Span outGoing = tracer.spanBuilder(\"/resource\").setSpanKind(Span.Kind.CLIENT).startSpan();\n-// Semantic Convention\n-outGoing.setAttribute(\"http.method\", \"GET\");\n-outGoing.setAttribute(\"http.url\", url.toString());\n-HttpURLConnection transportLayer = (HttpURLConnection) url.openConnection();\n-// Inject the request with the context\n-tracer.getHttpTextFormat().inject(outGoing.getContext(), transportLayer, setter);\n-// Make outgoing call\n+try (Scope scope = tracer.withSpan(outGoing)) {\n+  // Semantic Convention\n+  outGoing.setAttribute(\"http.method\", \"GET\");\n+  outGoing.setAttribute(\"http.url\", url.toString());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDI0OTIyMw=="}, "originalCommit": {"oid": "078c001a58c87d14edfe0a1aac695b604a90725b"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDMzNjg2MQ==", "bodyText": "Sounds reasonable!", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1051#discussion_r400336861", "createdAt": "2020-03-30T16:42:01Z", "author": {"login": "arminru"}, "path": "QUICKSTART.md", "diffHunk": "@@ -181,13 +188,17 @@ HttpTextFormat.Setter<HttpURLConnection> setter =\n \n URL url = new URL(\"http://127.0.0.1:8080/resource\");\n Span outGoing = tracer.spanBuilder(\"/resource\").setSpanKind(Span.Kind.CLIENT).startSpan();\n-// Semantic Convention\n-outGoing.setAttribute(\"http.method\", \"GET\");\n-outGoing.setAttribute(\"http.url\", url.toString());\n-HttpURLConnection transportLayer = (HttpURLConnection) url.openConnection();\n-// Inject the request with the context\n-tracer.getHttpTextFormat().inject(outGoing.getContext(), transportLayer, setter);\n-// Make outgoing call\n+try (Scope scope = tracer.withSpan(outGoing)) {\n+  // Semantic Convention\n+  outGoing.setAttribute(\"http.method\", \"GET\");\n+  outGoing.setAttribute(\"http.url\", url.toString());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDI0OTIyMw=="}, "originalCommit": {"oid": "078c001a58c87d14edfe0a1aac695b604a90725b"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDM4ODM1MQ==", "bodyText": "Done.", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1051#discussion_r400388351", "createdAt": "2020-03-30T18:02:15Z", "author": {"login": "carlosalberto"}, "path": "QUICKSTART.md", "diffHunk": "@@ -181,13 +188,17 @@ HttpTextFormat.Setter<HttpURLConnection> setter =\n \n URL url = new URL(\"http://127.0.0.1:8080/resource\");\n Span outGoing = tracer.spanBuilder(\"/resource\").setSpanKind(Span.Kind.CLIENT).startSpan();\n-// Semantic Convention\n-outGoing.setAttribute(\"http.method\", \"GET\");\n-outGoing.setAttribute(\"http.url\", url.toString());\n-HttpURLConnection transportLayer = (HttpURLConnection) url.openConnection();\n-// Inject the request with the context\n-tracer.getHttpTextFormat().inject(outGoing.getContext(), transportLayer, setter);\n-// Make outgoing call\n+try (Scope scope = tracer.withSpan(outGoing)) {\n+  // Semantic Convention\n+  outGoing.setAttribute(\"http.method\", \"GET\");\n+  outGoing.setAttribute(\"http.url\", url.toString());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDI0OTIyMw=="}, "originalCommit": {"oid": "078c001a58c87d14edfe0a1aac695b604a90725b"}, "originalPosition": 31}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ4MjQ5NjUzOnYy", "diffSide": "RIGHT", "path": "QUICKSTART.md", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQxNjoxNjozOVrOF9xj9A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQxODowMToyOFrOF91vPg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDMxOTQ3Ng==", "bodyText": "he/ctx are too Go like for the Java world :) Probably we should use better variable names.", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1051#discussion_r400319476", "createdAt": "2020-03-30T16:16:39Z", "author": {"login": "bogdandrutu"}, "path": "QUICKSTART.md", "diffHunk": "@@ -207,10 +216,11 @@ HttpTextFormat.Getter<HttpExchange> getter =\n };\n ...\n public void handle(HttpExchange he) {\n-    // Extract the context from the request\n-    SpanContext ctx = tracer.getHttpTextFormat().extract(he, getter);\n+  // Extract the SpanContext and other elements from the request.\n+  Context ctx = tracer.getHttpTextFormat().extract(Context.current(), he, getter);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "04e0e9ae9e00c2a9d3b76ddbe4eddc807452eb92"}, "originalPosition": 49}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDM4NzkwMg==", "bodyText": "Done.", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1051#discussion_r400387902", "createdAt": "2020-03-30T18:01:28Z", "author": {"login": "carlosalberto"}, "path": "QUICKSTART.md", "diffHunk": "@@ -207,10 +216,11 @@ HttpTextFormat.Getter<HttpExchange> getter =\n };\n ...\n public void handle(HttpExchange he) {\n-    // Extract the context from the request\n-    SpanContext ctx = tracer.getHttpTextFormat().extract(he, getter);\n+  // Extract the SpanContext and other elements from the request.\n+  Context ctx = tracer.getHttpTextFormat().extract(Context.current(), he, getter);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDMxOTQ3Ng=="}, "originalCommit": {"oid": "04e0e9ae9e00c2a9d3b76ddbe4eddc807452eb92"}, "originalPosition": 49}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ4MjU5OTk1OnYy", "diffSide": "RIGHT", "path": "QUICKSTART.md", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQxNjo0MDozMFrOF9yj6g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQxODoxMTo1M1rOF92ITQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDMzNTg1MA==", "bodyText": "Can we put a comment up above about where this HttpExchange class comes from?", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1051#discussion_r400335850", "createdAt": "2020-03-30T16:40:30Z", "author": {"login": "jkwatson"}, "path": "QUICKSTART.md", "diffHunk": "@@ -207,10 +216,11 @@ HttpTextFormat.Getter<HttpExchange> getter =\n };\n ...\n public void handle(HttpExchange he) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "04e0e9ae9e00c2a9d3b76ddbe4eddc807452eb92"}, "originalPosition": 45}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDM4ODI2MA==", "bodyText": "I linked HttpExchange to https://docs.oracle.com/javase/8/docs/jre/api/net/httpserver/spec/com/sun/net/httpserver/HttpExchange.html\nDoes that work for you?", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1051#discussion_r400388260", "createdAt": "2020-03-30T18:02:06Z", "author": {"login": "carlosalberto"}, "path": "QUICKSTART.md", "diffHunk": "@@ -207,10 +216,11 @@ HttpTextFormat.Getter<HttpExchange> getter =\n };\n ...\n public void handle(HttpExchange he) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDMzNTg1MA=="}, "originalCommit": {"oid": "04e0e9ae9e00c2a9d3b76ddbe4eddc807452eb92"}, "originalPosition": 45}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDM5NDMxNw==", "bodyText": "perfect (always scary to be using stuff in com.sun, but it's good to at least have the connection)", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1051#discussion_r400394317", "createdAt": "2020-03-30T18:11:53Z", "author": {"login": "jkwatson"}, "path": "QUICKSTART.md", "diffHunk": "@@ -207,10 +216,11 @@ HttpTextFormat.Getter<HttpExchange> getter =\n };\n ...\n public void handle(HttpExchange he) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDMzNTg1MA=="}, "originalCommit": {"oid": "04e0e9ae9e00c2a9d3b76ddbe4eddc807452eb92"}, "originalPosition": 45}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 803, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}