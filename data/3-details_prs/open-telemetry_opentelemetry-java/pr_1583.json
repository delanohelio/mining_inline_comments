{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDczMDI3MjEx", "number": 1583, "title": "Add helpers to CompletableResultCode to wait for a result.", "bodyText": "In #1579 #1571 etc, we found that we do need to allow users to be able to wait for a result, perhaps in a FaaS scenario or just in a unit test. Extracted this out since I ended up needing it in another PR. Added a test for interruption since that PR too. @iNikem", "createdAt": "2020-08-25T08:17:44Z", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1583", "merged": true, "mergeCommit": {"oid": "3671d2b84db74eaa22212b8534a92524ddd7c3d8"}, "closed": true, "closedAt": "2020-08-26T04:06:07Z", "author": {"login": "anuraaga"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdCSwJjAH2gAyNDczMDI3MjExOmUzMjI2NmFiZTkwYTkyNWJlYTgwODkyNGY2MGQ3M2FmNjJkMGU5YWM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdCjk0xgH2gAyNDczMDI3MjExOjkyZWY5MGViOTBmZGE3NGUzYWVmMjk1MGU2MmFjNjY4YzZmYjM0YmI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e32266abe90a925bea808924f60d73af62d0e9ac", "author": {"user": {"login": "anuraaga", "name": "Anuraag Agrawal"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/e32266abe90a925bea808924f60d73af62d0e9ac", "committedDate": "2020-08-25T08:15:58Z", "message": "Add helpers to CompletableResultCode to wait for a result."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc0MjkxMzIw", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1583#pullrequestreview-474291320", "createdAt": "2020-08-25T09:13:49Z", "commit": {"oid": "e32266abe90a925bea808924f60d73af62d0e9ac"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8aa29e5bef15e6d100562367d90e69214033a40f", "author": {"user": {"login": "anuraaga", "name": "Anuraag Agrawal"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/8aa29e5bef15e6d100562367d90e69214033a40f", "committedDate": "2020-08-25T09:21:30Z", "message": "Flaky?"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc0NjUxOTAy", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1583#pullrequestreview-474651902", "createdAt": "2020-08-25T16:28:33Z", "commit": {"oid": "8aa29e5bef15e6d100562367d90e69214033a40f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQxNjoyODozM1rOHGgHLA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQxNjoyODozM1rOHGgHLA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjU3OTYyOA==", "bodyText": "could we replace this block with if (isDone()) return this; ?", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1583#discussion_r476579628", "createdAt": "2020-08-25T16:28:33Z", "author": {"login": "jkwatson"}, "path": "sdk/common/src/main/java/io/opentelemetry/sdk/common/export/CompletableResultCode.java", "diffHunk": "@@ -107,4 +109,42 @@ public CompletableResultCode whenComplete(Runnable action) {\n     }\n     return this;\n   }\n+\n+  /** Returns whether this {@link CompletableResultCode} has completed. */\n+  public boolean isDone() {\n+    synchronized (lock) {\n+      return succeeded != null;\n+    }\n+  }\n+\n+  /**\n+   * Waits for the specified amount of time for this {@link CompletableResultCode} to complete. If\n+   * it times out or is interrupted, the {@link CompletableResultCode} is failed.\n+   *\n+   * @return this {@link CompletableResultCode}\n+   */\n+  public CompletableResultCode join(long timeout, TimeUnit unit) {\n+    synchronized (lock) {\n+      if (succeeded != null) {\n+        return this;\n+      }\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8aa29e5bef15e6d100562367d90e69214033a40f"}, "originalPosition": 32}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc0NjU0NDg4", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1583#pullrequestreview-474654488", "createdAt": "2020-08-25T16:31:41Z", "commit": {"oid": "8aa29e5bef15e6d100562367d90e69214033a40f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "92ef90eb90fda74e3aef2950e62ac668c6fb34bb", "author": {"user": {"login": "anuraaga", "name": "Anuraag Agrawal"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/92ef90eb90fda74e3aef2950e62ac668c6fb34bb", "committedDate": "2020-08-26T03:51:59Z", "message": "Cleanup"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2403, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}