{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI3NTQ5NTI1", "number": 2134, "title": "Convert Attributes to an interface", "bodyText": "", "createdAt": "2020-11-25T16:05:45Z", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2134", "merged": true, "mergeCommit": {"oid": "e90a6a886b90056dc172bbe13ffe878fe5e08e12"}, "closed": true, "closedAt": "2020-12-01T23:54:08Z", "author": {"login": "jkwatson"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdgJCtZgFqTUzODk0MjY0Mw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdh-S4AAH2gAyNTI3NTQ5NTI1OjMyM2I0NTczMDMwMDgwNzA2M2ZkNmNkM2FmZTk3ZWNhMTVmNWE0OTc=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM4OTQyNjQz", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2134#pullrequestreview-538942643", "createdAt": "2020-11-26T01:51:20Z", "commit": {"oid": "f3dfa203f76d4194d9e6ff80c1366163c14670f7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNlQwMTo1MToyMFrOH6JG3g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNlQwMTo1MToyMFrOH6JG3g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDcyODY3MA==", "bodyText": "This class is public - can you move it to a top level package private class?", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2134#discussion_r530728670", "createdAt": "2020-11-26T01:51:20Z", "author": {"login": "anuraaga"}, "path": "api/src/main/java/io/opentelemetry/api/common/Attributes.java", "diffHunk": "@@ -20,16 +23,25 @@\n  * <p>Null keys will be silently dropped.\n  *\n  * <p>Note: The behavior of null-valued attributes is undefined, and hence strongly discouraged.\n+ *\n+ * <p>Implementations of this interface *must* be immutable and have well-defined value-based\n+ * equals/hashCode implementations. If an implementation does not strictly conform to these\n+ * requirements, behavior of the OpenTelemetry APIs and default SDK cannot be guaranteed.\n+ *\n+ * <p>For this reason, it is strongly suggested that you use the implementation that is provided\n+ * here via the factory methods and the {@link AttributesBuilder}.\n  */\n @SuppressWarnings(\"rawtypes\")\n @Immutable\n-public abstract class Attributes extends ImmutableKeyValuePairs<AttributeKey, Object>\n-    implements ReadableAttributes {\n-  private static final Attributes EMPTY = Attributes.builder().build();\n+public interface Attributes extends ReadableAttributes {\n \n   @AutoValue\n   @Immutable\n-  abstract static class ArrayBackedAttributes extends Attributes {\n+  abstract class ArrayBackedAttributes extends ImmutableKeyValuePairs<AttributeKey, Object>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f3dfa203f76d4194d9e6ff80c1366163c14670f7"}, "originalPosition": 32}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM4OTUxNjE5", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2134#pullrequestreview-538951619", "createdAt": "2020-11-26T02:22:17Z", "commit": {"oid": "f3dfa203f76d4194d9e6ff80c1366163c14670f7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNlQwMjoyMjoxN1rOH6JnDA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNlQwMjoyMjoxN1rOH6JnDA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDczNjkwOA==", "bodyText": "By the way - must they be immutable? Actually one of the, completely unsupported but wild, use cases that came up for me for this interface is mutable attributes in resource. Docker cgroups come to mind, but I wouldn't be surprised if there are some good use cases for process-related information that is updatable at runtime.", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2134#discussion_r530736908", "createdAt": "2020-11-26T02:22:17Z", "author": {"login": "anuraaga"}, "path": "api/src/main/java/io/opentelemetry/api/common/Attributes.java", "diffHunk": "@@ -20,16 +23,25 @@\n  * <p>Null keys will be silently dropped.\n  *\n  * <p>Note: The behavior of null-valued attributes is undefined, and hence strongly discouraged.\n+ *\n+ * <p>Implementations of this interface *must* be immutable and have well-defined value-based", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f3dfa203f76d4194d9e6ff80c1366163c14670f7"}, "originalPosition": 15}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM4OTc2NTQ4", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2134#pullrequestreview-538976548", "createdAt": "2020-11-26T03:50:54Z", "commit": {"oid": "f3dfa203f76d4194d9e6ff80c1366163c14670f7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNlQwMzo1MDo1NFrOH6K7kw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNlQwMzo1MDo1NFrOH6K7kw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDc1ODU0Nw==", "bodyText": "in order for the javaagent to provide a single implementation that satisfies both the shaded and unshaded interfaces, we need the return value here to be an interface, so that its implementation use a covariant return type that satisfies both, similar to the TraceState.getTraceState() example in #1946 (comment)", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2134#discussion_r530758547", "createdAt": "2020-11-26T03:50:54Z", "author": {"login": "trask"}, "path": "api/src/main/java/io/opentelemetry/api/common/Attributes.java", "diffHunk": "@@ -39,47 +51,65 @@\n     public AttributesBuilder toBuilder() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f3dfa203f76d4194d9e6ff80c1366163c14670f7"}, "originalPosition": 41}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f3dfa203f76d4194d9e6ff80c1366163c14670f7", "author": {"user": {"login": "jkwatson", "name": "John Watson"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/f3dfa203f76d4194d9e6ff80c1366163c14670f7", "committedDate": "2020-11-25T19:42:51Z", "message": "Add javadoc explaining Attributes implementation requirements."}, "afterCommit": {"oid": "f19b5a5024cac8400f93955b4fd472b61113eb2b", "author": {"user": {"login": "jkwatson", "name": "John Watson"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/f19b5a5024cac8400f93955b4fd472b61113eb2b", "committedDate": "2020-11-30T18:58:49Z", "message": "Convert the AttributesBuilder into an interface."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQxNDg0MDI5", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2134#pullrequestreview-541484029", "createdAt": "2020-12-01T04:40:05Z", "commit": {"oid": "f19b5a5024cac8400f93955b4fd472b61113eb2b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0756bd7c777f2a86f853dfac3db813de10b4137c", "author": {"user": {"login": "jkwatson", "name": "John Watson"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/0756bd7c777f2a86f853dfac3db813de10b4137c", "committedDate": "2020-12-01T16:59:10Z", "message": "Convert Attributes to an interface"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "625bcc9282d9f4ff1ae7165748e0d1091695f7dd", "author": {"user": {"login": "jkwatson", "name": "John Watson"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/625bcc9282d9f4ff1ae7165748e0d1091695f7dd", "committedDate": "2020-12-01T16:59:13Z", "message": "Add javadoc explaining Attributes implementation requirements."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "40ca7494a257e91b7e656ee76de625c3cd237de5", "author": {"user": {"login": "jkwatson", "name": "John Watson"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/40ca7494a257e91b7e656ee76de625c3cd237de5", "committedDate": "2020-12-01T16:59:13Z", "message": "Convert the AttributesBuilder into an interface."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bf41f0923042fd024d32662e96697d424f5f0fd5", "author": {"user": {"login": "jkwatson", "name": "John Watson"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/bf41f0923042fd024d32662e96697d424f5f0fd5", "committedDate": "2020-12-01T17:12:22Z", "message": "update from upstream changes"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f19b5a5024cac8400f93955b4fd472b61113eb2b", "author": {"user": {"login": "jkwatson", "name": "John Watson"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/f19b5a5024cac8400f93955b4fd472b61113eb2b", "committedDate": "2020-11-30T18:58:49Z", "message": "Convert the AttributesBuilder into an interface."}, "afterCommit": {"oid": "bf41f0923042fd024d32662e96697d424f5f0fd5", "author": {"user": {"login": "jkwatson", "name": "John Watson"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/bf41f0923042fd024d32662e96697d424f5f0fd5", "committedDate": "2020-12-01T17:12:22Z", "message": "update from upstream changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8e44b96930ecc623b855aadac24d2149763dc688", "author": {"user": {"login": "jkwatson", "name": "John Watson"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/8e44b96930ecc623b855aadac24d2149763dc688", "committedDate": "2020-12-01T18:11:06Z", "message": "move the implementation class out of the interface"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "323b45730300807063fd6cd3afe97eca15f5a497", "author": {"user": {"login": "jkwatson", "name": "John Watson"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/323b45730300807063fd6cd3afe97eca15f5a497", "committedDate": "2020-12-01T18:31:28Z", "message": "clean up some javadoc that referenced non-public classes"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3769, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}