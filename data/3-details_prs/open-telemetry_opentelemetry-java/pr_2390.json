{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQzOTE4NDQ1", "number": 2390, "title": "Allow registering TraceConfigSupplier and use it from zpages.", "bodyText": "This is to move mutability out of the SDK and into those that need mutability.\nZPages still eventually needs some rework to make it applicable to non-global SDK, for now it is a mix but I think we should update that as a followup since it's an extension.\nAn idea for\ninterface SdkTracerProviderExtension {\n  void configure(SdkTracerProviderBuilder builder);\n}\n\nclass SdkTracerProviderBuilder {\n  addExtension(SdkTracerProviderExtension extension) { extension.configure(this)) }\ncame to mind but for now not pursuing it.", "createdAt": "2020-12-22T07:04:54Z", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2390", "merged": true, "mergeCommit": {"oid": "d48eab6aa96afea03b2f5aac0d59e9f1a6e9c375"}, "closed": true, "closedAt": "2020-12-23T02:52:17Z", "author": {"login": "anuraaga"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdoSD7JgH2gAyNTQzOTE4NDQ1Ojk3MmQ1OGYwYTA1ZjU1YmRjYTkwMWIwM2VhN2FmMDM3Yjc5YmU5ZDA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdo14V_gH2gAyNTQzOTE4NDQ1OmNjYzc2NDk5ZjVmMDY1MmM2MTY2YzlmMDZjZmVjNDBmOTEyNGI1ZmI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "972d58f0a05f55bdca901b03ea7af037b79be9d0", "author": {"user": {"login": "anuraaga", "name": "Anuraag Agrawal"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/972d58f0a05f55bdca901b03ea7af037b79be9d0", "committedDate": "2020-12-21T08:56:47Z", "message": "Allow registering TraceConfigSupplier and use it from zpages."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "60f217c4c505a1de262102df405afd113295078f", "author": {"user": {"login": "anuraaga", "name": "Anuraag Agrawal"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/60f217c4c505a1de262102df405afd113295078f", "committedDate": "2020-12-22T06:53:30Z", "message": "Merge branch 'master' of github.com:open-telemetry/opentelemetry-java into zpage-traceconfig-factory"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "99b3ee6b160539d4be44f3b4394ff058ef7116b6", "author": {"user": {"login": "anuraaga", "name": "Anuraag Agrawal"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/99b3ee6b160539d4be44f3b4394ff058ef7116b6", "committedDate": "2020-12-22T06:59:07Z", "message": "Finish"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b17c656632ff2212f8f0a22c9ffa17128602ef22", "author": {"user": {"login": "anuraaga", "name": "Anuraag Agrawal"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/b17c656632ff2212f8f0a22c9ffa17128602ef22", "committedDate": "2020-12-22T07:17:20Z", "message": "Remove unnecessary method"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU3MjkwOTU5", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2390#pullrequestreview-557290959", "createdAt": "2020-12-22T18:44:56Z", "commit": {"oid": "b17c656632ff2212f8f0a22c9ffa17128602ef22"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQxODo0NDo1N1rOIKFVCA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQxODo0NDo1N1rOIKFVCA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzQ0Mzk3Ng==", "bodyText": "My only concern here is that we now have 2 methods that override each other's selection, which could potentially add some confusion for the user. Could we possibly get away only with this one, rather than providing both and dealing with the potential confusion?", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2390#discussion_r547443976", "createdAt": "2020-12-22T18:44:57Z", "author": {"login": "jkwatson"}, "path": "sdk/trace/src/main/java/io/opentelemetry/sdk/trace/SdkTracerProviderBuilder.java", "diffHunk": "@@ -67,7 +68,20 @@ public SdkTracerProviderBuilder setResource(Resource resource) {\n    */\n   public SdkTracerProviderBuilder setTraceConfig(TraceConfig traceConfig) {\n     requireNonNull(traceConfig, \"traceConfig\");\n-    this.traceConfig = traceConfig;\n+    this.traceConfigSupplier = () -> traceConfig;\n+    return this;\n+  }\n+\n+  /**\n+   * Assign a {@link Supplier} of {@link TraceConfig}. {@link TraceConfig} will be retrieved each\n+   * time a {@link io.opentelemetry.api.trace.Span} is started.\n+   *\n+   * @return this\n+   */\n+  public SdkTracerProviderBuilder setTraceConfigSupplier(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b17c656632ff2212f8f0a22c9ffa17128602ef22"}, "originalPosition": 32}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU3NDc1NjI0", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2390#pullrequestreview-557475624", "createdAt": "2020-12-23T02:35:27Z", "commit": {"oid": "b17c656632ff2212f8f0a22c9ffa17128602ef22"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yM1QwMjozNToyN1rOIKPQoA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yM1QwMjozNToyN1rOIKPQoA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzYwNjY4OA==", "bodyText": "\u2764\ufe0f", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2390#discussion_r547606688", "createdAt": "2020-12-23T02:35:27Z", "author": {"login": "jkwatson"}, "path": "build.gradle", "diffHunk": "@@ -131,6 +131,9 @@ subprojects {\n             it.options.errorprone.disable(\"JdkObsolete\")\n             it.options.errorprone.disable(\"UnnecessaryAnonymousClass\")\n \n+            // Limits APIs\n+            it.options.errorprone.disable(\"NoFunctionalReturnType\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b17c656632ff2212f8f0a22c9ffa17128602ef22"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU3NDc1NzM0", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2390#pullrequestreview-557475734", "createdAt": "2020-12-23T02:35:50Z", "commit": {"oid": "b17c656632ff2212f8f0a22c9ffa17128602ef22"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ccc76499f5f0652c6166c9f06cfec40f9124b5fb", "author": {"user": {"login": "anuraaga", "name": "Anuraag Agrawal"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/ccc76499f5f0652c6166c9f06cfec40f9124b5fb", "committedDate": "2020-12-23T02:40:43Z", "message": "Same method name"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3527, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}