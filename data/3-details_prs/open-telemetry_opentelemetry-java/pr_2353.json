{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQyMjQzOTA5", "number": 2353, "title": "Fix flappy IntervalMetricReaderTest", "bodyText": "This resolves #2340", "createdAt": "2020-12-18T02:16:26Z", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2353", "merged": true, "mergeCommit": {"oid": "ddc5fc5216dc8f7a3ebef8df77e559502dae085b"}, "closed": true, "closedAt": "2020-12-18T03:20:44Z", "author": {"login": "breedx-splk"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdnOftJgH2gAyNTQyMjQzOTA5OmZhZjUxYmI5ZjcxMDAyZGU4MTFkN2Q2YTAwNGNjODkyOTgzNTNiODA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdnPdF3AFqTU1NTE0NzMyOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "faf51bb9f71002de811d7d6a004cc89298353b80", "author": {"user": {"login": "breedx-splk", "name": "jason plumb"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/faf51bb9f71002de811d7d6a004cc89298353b80", "committedDate": "2020-12-18T02:13:35Z", "message": "fix flappy test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU1MTI5NDIw", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2353#pullrequestreview-555129420", "createdAt": "2020-12-18T02:21:53Z", "commit": {"oid": "faf51bb9f71002de811d7d6a004cc89298353b80"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU1MTQ3MzI4", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2353#pullrequestreview-555147328", "createdAt": "2020-12-18T03:20:14Z", "commit": {"oid": "faf51bb9f71002de811d7d6a004cc89298353b80"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQwMzoyMDoxNFrOIIRmEA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQwMzoyMDoxNFrOIIRmEA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTU0Nzc5Mg==", "bodyText": "IIUC, the problem was that exportedMetrics could have more than the expected number of exports returned? Anyways, blockingqueue always better than monitors!", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2353#discussion_r545547792", "createdAt": "2020-12-18T03:20:14Z", "author": {"login": "anuraaga"}, "path": "sdk/metrics/src/test/java/io/opentelemetry/sdk/metrics/export/IntervalMetricReaderTest.java", "diffHunk": "@@ -176,20 +173,12 @@ public CompletableResultCode shutdown() {\n      * metrics.\n      */\n     @Nullable\n-    List<List<MetricData>> waitForNumberOfExports(int numberOfExports) {\n-      List<List<MetricData>> result;\n-      synchronized (monitor) {\n-        while (exportedMetrics.size() < numberOfExports) {\n-          try {\n-            monitor.wait();\n-          } catch (InterruptedException e) {\n-            // Preserve the interruption status as per guidance.\n-            Thread.currentThread().interrupt();\n-            return null;\n-          }\n-        }\n-        result = exportedMetrics;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "faf51bb9f71002de811d7d6a004cc89298353b80"}, "originalPosition": 83}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3454, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}