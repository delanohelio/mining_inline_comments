{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDUyMzc1OTkz", "number": 1433, "title": "Remove null checks in Span API.", "bodyText": "I was randomly looking through the Span API and was surprised to see null checks in the no-op span for sure but also in the real span. It seems to not follow the spec with regards to error handling. \"API methods MUST NOT throw unhandled exceptions when used incorrectly by end users. \"\nhttps://github.com/open-telemetry/opentelemetry-specification/blob/master/specification/error-handling.md#basic-error-handling-principles", "createdAt": "2020-07-19T06:23:21Z", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1433", "merged": true, "mergeCommit": {"oid": "f5452f4f2b66e87014bb5d91a602ae7bebf93112"}, "closed": true, "closedAt": "2020-07-21T02:00:15Z", "author": {"login": "anuraaga"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc2W80WAH2gAyNDUyMzc1OTkzOjNmNDFlNmFmOTRiYWUzYTA4NmVlYmNhZWQ4ZTE3M2RjNTc3OWM0N2Y=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc28PSuAH2gAyNDUyMzc1OTkzOjJjMGVmOWFiYmI5NWMwYjFlMWIzNGIyOWRjMGIxN2RjNzY0ZTMwZTU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "3f41e6af94bae3a086eebcaed8e173dc5779c47f", "author": {"user": {"login": "anuraaga", "name": "Anuraag Agrawal"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/3f41e6af94bae3a086eebcaed8e173dc5779c47f", "committedDate": "2020-07-19T06:22:20Z", "message": "Remove null checks in Span API."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxNTUxNTA5", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1433#pullrequestreview-451551509", "createdAt": "2020-07-20T12:16:58Z", "commit": {"oid": "3f41e6af94bae3a086eebcaed8e173dc5779c47f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQxMjoxNjo1OFrOG0JLFg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQxMjoxNjo1OFrOG0JLFg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzMyOTQzMA==", "bodyText": "Before returning, I would add a log to notify the error since the spec requires that key MUST not be null https://github.com/open-telemetry/opentelemetry-specification/blob/master/specification/trace/api.md#set-attributes\nFurthermore, I just noticed that we allow empty strings as a key", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1433#discussion_r457329430", "createdAt": "2020-07-20T12:16:58Z", "author": {"login": "thisthat"}, "path": "sdk/src/main/java/io/opentelemetry/sdk/trace/RecordEventsReadableSpan.java", "diffHunk": "@@ -300,7 +299,9 @@ public void setAttribute(String key, boolean value) {\n \n   @Override\n   public void setAttribute(String key, AttributeValue value) {\n-    Preconditions.checkNotNull(key, \"key\");\n+    if (key == null) {\n+      return;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3f41e6af94bae3a086eebcaed8e173dc5779c47f"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxNzg1Njg5", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1433#pullrequestreview-451785689", "createdAt": "2020-07-20T16:50:27Z", "commit": {"oid": "3f41e6af94bae3a086eebcaed8e173dc5779c47f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxODY1MzA5", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1433#pullrequestreview-451865309", "createdAt": "2020-07-20T18:42:40Z", "commit": {"oid": "3f41e6af94bae3a086eebcaed8e173dc5779c47f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQxODo0Mjo0MVrOG0as1Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQxODo0Mjo0MVrOG0as1Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzYxNjU5Nw==", "bodyText": "We need new tests for all the SDK changes too.", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1433#discussion_r457616597", "createdAt": "2020-07-20T18:42:41Z", "author": {"login": "carlosalberto"}, "path": "sdk/src/main/java/io/opentelemetry/sdk/trace/RecordEventsReadableSpan.java", "diffHunk": "@@ -385,7 +386,9 @@ private void addTimedEvent(TimedEvent timedEvent) {\n \n   @Override\n   public void setStatus(Status status) {\n-    Preconditions.checkNotNull(status, \"status\");\n+    if (status == null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3f41e6af94bae3a086eebcaed8e173dc5779c47f"}, "originalPosition": 24}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxODY1MzU4", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1433#pullrequestreview-451865358", "createdAt": "2020-07-20T18:42:45Z", "commit": {"oid": "3f41e6af94bae3a086eebcaed8e173dc5779c47f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2c0ef9abbb95c0b1e1b34b29dc0b17dc764e30e5", "author": {"user": {"login": "anuraaga", "name": "Anuraag Agrawal"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/2c0ef9abbb95c0b1e1b34b29dc0b17dc764e30e5", "committedDate": "2020-07-21T01:49:00Z", "message": "Add tests and loosen events as well."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2584, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}