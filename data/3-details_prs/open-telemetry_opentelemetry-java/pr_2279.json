{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM3NTA4ODM2", "number": 2279, "title": "Deprecate metrics from opentelemetry-api, add a global version in metrics api", "bodyText": "One small caveat, the GlobalMeterProvider class may be removed when we do the stable release. When the metrics will be stable/release candidate we need to find a different solution for that class in order to avoid removing it just before the release.\nSigned-off-by: Bogdan Drutu bogdandrutu@gmail.com", "createdAt": "2020-12-11T22:54:13Z", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2279", "merged": true, "mergeCommit": {"oid": "dbb1ae91f9f07f32e694db7cf1ac3283457cc815"}, "closed": true, "closedAt": "2020-12-15T23:14:51Z", "author": {"login": "bogdandrutu"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdlQEfQgBqjQxMDI3NTIwMDA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdmh894gBqjQxMTY5MTEyNDM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bb64cf590be93e3b06a30bb29bbbead6fca74d17", "author": {"user": {"login": "bogdandrutu", "name": "Bogdan Drutu"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/bb64cf590be93e3b06a30bb29bbbead6fca74d17", "committedDate": "2020-12-11T22:53:11Z", "message": "Deprecate metrics from opentelemetry-api, add a global version in metrics api\n\nSigned-off-by: Bogdan Drutu <bogdandrutu@gmail.com>"}, "afterCommit": {"oid": "91da3c7fa6a90fc425af82231c2b41525a775979", "author": {"user": {"login": "bogdandrutu", "name": "Bogdan Drutu"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/91da3c7fa6a90fc425af82231c2b41525a775979", "committedDate": "2020-12-11T22:55:40Z", "message": "Deprecate metrics from opentelemetry-api, add a global version in metrics api\n\nSigned-off-by: Bogdan Drutu <bogdandrutu@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "91da3c7fa6a90fc425af82231c2b41525a775979", "author": {"user": {"login": "bogdandrutu", "name": "Bogdan Drutu"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/91da3c7fa6a90fc425af82231c2b41525a775979", "committedDate": "2020-12-11T22:55:40Z", "message": "Deprecate metrics from opentelemetry-api, add a global version in metrics api\n\nSigned-off-by: Bogdan Drutu <bogdandrutu@gmail.com>"}, "afterCommit": {"oid": "1d536b4398745dbb2f53402a60228e9e11e09920", "author": {"user": {"login": "bogdandrutu", "name": "Bogdan Drutu"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/1d536b4398745dbb2f53402a60228e9e11e09920", "committedDate": "2020-12-11T22:58:14Z", "message": "Deprecate metrics from opentelemetry-api, add a global version in metrics api\n\nSigned-off-by: Bogdan Drutu <bogdandrutu@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1d536b4398745dbb2f53402a60228e9e11e09920", "author": {"user": {"login": "bogdandrutu", "name": "Bogdan Drutu"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/1d536b4398745dbb2f53402a60228e9e11e09920", "committedDate": "2020-12-11T22:58:14Z", "message": "Deprecate metrics from opentelemetry-api, add a global version in metrics api\n\nSigned-off-by: Bogdan Drutu <bogdandrutu@gmail.com>"}, "afterCommit": {"oid": "a715516b2d569e12f2dea7c1fdda3e2b13f85368", "author": {"user": {"login": "bogdandrutu", "name": "Bogdan Drutu"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/a715516b2d569e12f2dea7c1fdda3e2b13f85368", "committedDate": "2020-12-11T23:23:44Z", "message": "Deprecate metrics from opentelemetry-api, add a global version in metrics api\n\nSigned-off-by: Bogdan Drutu <bogdandrutu@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUwODczMTM0", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2279#pullrequestreview-550873134", "createdAt": "2020-12-13T00:28:59Z", "commit": {"oid": "a715516b2d569e12f2dea7c1fdda3e2b13f85368"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xM1QwMDoyOTowMFrOIEtdVA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xM1QwMDoyOTowMFrOIEtdVA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTgxMDAwNA==", "bodyText": "I thought we had already done this. Good catch!", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2279#discussion_r541810004", "createdAt": "2020-12-13T00:29:00Z", "author": {"login": "jkwatson"}, "path": "exporters/otlp/src/main/java/io/opentelemetry/exporter/otlp/OtlpGrpcSpanExporter.java", "diffHunk": "@@ -105,6 +99,12 @@\n    *     or to a negative value, the exporter will wait indefinitely.\n    */\n   private OtlpGrpcSpanExporter(ManagedChannel channel, long deadlineMs) {\n+    Meter meter = GlobalMetricsProvider.getMeter(\"io.opentelemetry.exporters.otlp\");\n+    this.spansSeen =\n+        meter.longCounterBuilder(\"spansSeenByExporter\").build().bind(EXPORTER_NAME_LABELS);\n+    LongCounter spansExportedCounter = meter.longCounterBuilder(\"spansExportedByExporter\").build();\n+    this.spansExportedSuccess = spansExportedCounter.bind(EXPORT_SUCCESS_LABELS);\n+    this.spansExportedFailure = spansExportedCounter.bind(EXPORT_FAILURE_LABELS);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a715516b2d569e12f2dea7c1fdda3e2b13f85368"}, "originalPosition": 41}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUwODczMTk1", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2279#pullrequestreview-550873195", "createdAt": "2020-12-13T00:30:00Z", "commit": {"oid": "a715516b2d569e12f2dea7c1fdda3e2b13f85368"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a715516b2d569e12f2dea7c1fdda3e2b13f85368", "author": {"user": {"login": "bogdandrutu", "name": "Bogdan Drutu"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/a715516b2d569e12f2dea7c1fdda3e2b13f85368", "committedDate": "2020-12-11T23:23:44Z", "message": "Deprecate metrics from opentelemetry-api, add a global version in metrics api\n\nSigned-off-by: Bogdan Drutu <bogdandrutu@gmail.com>"}, "afterCommit": {"oid": "c40b67328d1fda82261bd0a87f0e62679e057f3f", "author": {"user": {"login": "bogdandrutu", "name": "Bogdan Drutu"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/c40b67328d1fda82261bd0a87f0e62679e057f3f", "committedDate": "2020-12-15T04:59:57Z", "message": "Deprecate metrics from opentelemetry-api, add a global version in metrics api\n\nSigned-off-by: Bogdan Drutu <bogdandrutu@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c40b67328d1fda82261bd0a87f0e62679e057f3f", "author": {"user": {"login": "bogdandrutu", "name": "Bogdan Drutu"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/c40b67328d1fda82261bd0a87f0e62679e057f3f", "committedDate": "2020-12-15T04:59:57Z", "message": "Deprecate metrics from opentelemetry-api, add a global version in metrics api\n\nSigned-off-by: Bogdan Drutu <bogdandrutu@gmail.com>"}, "afterCommit": {"oid": "908cf69309dcdf857b33865da6ff599a411eac77", "author": {"user": {"login": "bogdandrutu", "name": "Bogdan Drutu"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/908cf69309dcdf857b33865da6ff599a411eac77", "committedDate": "2020-12-15T21:18:17Z", "message": "Deprecate metrics from opentelemetry-api, add a global version in metrics api\n\nSigned-off-by: Bogdan Drutu <bogdandrutu@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f4d2592c8138b2043d5175521643a57ccdd2dcee", "author": {"user": {"login": "bogdandrutu", "name": "Bogdan Drutu"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/f4d2592c8138b2043d5175521643a57ccdd2dcee", "committedDate": "2020-12-15T22:19:39Z", "message": "Deprecate metrics from opentelemetry-api, add a global version in metrics api\n\nSigned-off-by: Bogdan Drutu <bogdandrutu@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "908cf69309dcdf857b33865da6ff599a411eac77", "author": {"user": {"login": "bogdandrutu", "name": "Bogdan Drutu"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/908cf69309dcdf857b33865da6ff599a411eac77", "committedDate": "2020-12-15T21:18:17Z", "message": "Deprecate metrics from opentelemetry-api, add a global version in metrics api\n\nSigned-off-by: Bogdan Drutu <bogdandrutu@gmail.com>"}, "afterCommit": {"oid": "f4d2592c8138b2043d5175521643a57ccdd2dcee", "author": {"user": {"login": "bogdandrutu", "name": "Bogdan Drutu"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/f4d2592c8138b2043d5175521643a57ccdd2dcee", "committedDate": "2020-12-15T22:19:39Z", "message": "Deprecate metrics from opentelemetry-api, add a global version in metrics api\n\nSigned-off-by: Bogdan Drutu <bogdandrutu@gmail.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3648, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}