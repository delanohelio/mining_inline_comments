{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE3MDUzOTM3", "number": 1210, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QwNTo0NDoxNFrOD76rMQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNTowMzo0OVrOD8G61Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY0MTUzOTA1OnYy", "diffSide": "RIGHT", "path": "api/src/main/java/io/opentelemetry/metrics/DoubleUpDownCounter.java", "isResolved": true, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QwNTo0NDoxNFrOGUiNDQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo0MjoxNFrOGU6XQg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDE4NTEwMQ==", "bodyText": "Following open-telemetry/community#113 (comment), should we stop reporting the year?", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1210#discussion_r424185101", "createdAt": "2020-05-13T05:44:14Z", "author": {"login": "thisthat"}, "path": "api/src/main/java/io/opentelemetry/metrics/DoubleUpDownCounter.java", "diffHunk": "@@ -0,0 +1,108 @@\n+/*\n+ * Copyright 2019, OpenTelemetry Authors", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d30995119efead02328049a878574bb827dda756"}, "originalPosition": 2}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDUwNzgyOA==", "bodyText": "yes, can you create an issue for it?", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1210#discussion_r424507828", "createdAt": "2020-05-13T15:00:34Z", "author": {"login": "jkwatson"}, "path": "api/src/main/java/io/opentelemetry/metrics/DoubleUpDownCounter.java", "diffHunk": "@@ -0,0 +1,108 @@\n+/*\n+ * Copyright 2019, OpenTelemetry Authors", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDE4NTEwMQ=="}, "originalCommit": {"oid": "d30995119efead02328049a878574bb827dda756"}, "originalPosition": 2}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDUxMzg0Mw==", "bodyText": "Note: we can also use a much more concise license header as suggested here:  open-telemetry/community#113 (comment)", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1210#discussion_r424513843", "createdAt": "2020-05-13T15:08:25Z", "author": {"login": "jkwatson"}, "path": "api/src/main/java/io/opentelemetry/metrics/DoubleUpDownCounter.java", "diffHunk": "@@ -0,0 +1,108 @@\n+/*\n+ * Copyright 2019, OpenTelemetry Authors", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDE4NTEwMQ=="}, "originalCommit": {"oid": "d30995119efead02328049a878574bb827dda756"}, "originalPosition": 2}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDUyMTY3OA==", "bodyText": "Done in #1212", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1210#discussion_r424521678", "createdAt": "2020-05-13T15:18:47Z", "author": {"login": "thisthat"}, "path": "api/src/main/java/io/opentelemetry/metrics/DoubleUpDownCounter.java", "diffHunk": "@@ -0,0 +1,108 @@\n+/*\n+ * Copyright 2019, OpenTelemetry Authors", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDE4NTEwMQ=="}, "originalCommit": {"oid": "d30995119efead02328049a878574bb827dda756"}, "originalPosition": 2}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDU4MDkzMA==", "bodyText": "Fixed the year, will fix other things when we fix the issue.", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1210#discussion_r424580930", "createdAt": "2020-05-13T16:42:14Z", "author": {"login": "bogdandrutu"}, "path": "api/src/main/java/io/opentelemetry/metrics/DoubleUpDownCounter.java", "diffHunk": "@@ -0,0 +1,108 @@\n+/*\n+ * Copyright 2019, OpenTelemetry Authors", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDE4NTEwMQ=="}, "originalCommit": {"oid": "d30995119efead02328049a878574bb827dda756"}, "originalPosition": 2}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY0MzU0NTE3OnYy", "diffSide": "RIGHT", "path": "api/src/main/java/io/opentelemetry/metrics/DefaultMeter.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNTowMzo0OVrOGU2Dag==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjoyNDozMlrOGU5qSA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDUxMDMxNA==", "bodyText": "This implementation is different from the one above. You could move it up out of the inner classes and put it one level higher so it doesn't need to be repeated.", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1210#discussion_r424510314", "createdAt": "2020-05-13T15:03:49Z", "author": {"login": "jkwatson"}, "path": "api/src/main/java/io/opentelemetry/metrics/DefaultMeter.java", "diffHunk": "@@ -150,21 +174,31 @@ public DoubleCounter build() {\n     private NoopLongCounter() {}\n \n     @Override\n-    public void add(long increment, String... labelKeyValuePairs) {}\n+    public void add(long increment, String... labelKeyValuePairs) {\n+      Utils.validateLabelPairs(labelKeyValuePairs);\n+      verifyIncrement(increment);\n+    }\n \n     @Override\n     public NoopBoundLongCounter bind(String... labelKeyValuePairs) {\n       Utils.validateLabelPairs(labelKeyValuePairs);\n       return NoopBoundLongCounter.INSTANCE;\n     }\n \n+    // Similar to add but does not verify labels.\n+    private static void verifyIncrement(long increment) {\n+      Utils.checkArgument(increment >= 0, \"Counters can only increase\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d30995119efead02328049a878574bb827dda756"}, "originalPosition": 80}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDU0OTMyNw==", "bodyText": "It is different, because one uses long the other uses double.", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1210#discussion_r424549327", "createdAt": "2020-05-13T15:55:31Z", "author": {"login": "bogdandrutu"}, "path": "api/src/main/java/io/opentelemetry/metrics/DefaultMeter.java", "diffHunk": "@@ -150,21 +174,31 @@ public DoubleCounter build() {\n     private NoopLongCounter() {}\n \n     @Override\n-    public void add(long increment, String... labelKeyValuePairs) {}\n+    public void add(long increment, String... labelKeyValuePairs) {\n+      Utils.validateLabelPairs(labelKeyValuePairs);\n+      verifyIncrement(increment);\n+    }\n \n     @Override\n     public NoopBoundLongCounter bind(String... labelKeyValuePairs) {\n       Utils.validateLabelPairs(labelKeyValuePairs);\n       return NoopBoundLongCounter.INSTANCE;\n     }\n \n+    // Similar to add but does not verify labels.\n+    private static void verifyIncrement(long increment) {\n+      Utils.checkArgument(increment >= 0, \"Counters can only increase\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDUxMDMxNA=="}, "originalCommit": {"oid": "d30995119efead02328049a878574bb827dda756"}, "originalPosition": 80}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDU2OTQxNg==", "bodyText": "oh drat. stupid java.", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1210#discussion_r424569416", "createdAt": "2020-05-13T16:24:32Z", "author": {"login": "jkwatson"}, "path": "api/src/main/java/io/opentelemetry/metrics/DefaultMeter.java", "diffHunk": "@@ -150,21 +174,31 @@ public DoubleCounter build() {\n     private NoopLongCounter() {}\n \n     @Override\n-    public void add(long increment, String... labelKeyValuePairs) {}\n+    public void add(long increment, String... labelKeyValuePairs) {\n+      Utils.validateLabelPairs(labelKeyValuePairs);\n+      verifyIncrement(increment);\n+    }\n \n     @Override\n     public NoopBoundLongCounter bind(String... labelKeyValuePairs) {\n       Utils.validateLabelPairs(labelKeyValuePairs);\n       return NoopBoundLongCounter.INSTANCE;\n     }\n \n+    // Similar to add but does not verify labels.\n+    private static void verifyIncrement(long increment) {\n+      Utils.checkArgument(increment >= 0, \"Counters can only increase\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDUxMDMxNA=="}, "originalCommit": {"oid": "d30995119efead02328049a878574bb827dda756"}, "originalPosition": 80}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 662, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}