{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE4OTk3MTE2", "number": 1233, "title": "Cleanup samplers.", "bodyText": "", "createdAt": "2020-05-16T17:18:46Z", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1233", "merged": true, "mergeCommit": {"oid": "c9fe822c130c57b4261614af3dec1fbae091cc22"}, "closed": true, "closedAt": "2020-05-20T17:02:36Z", "author": {"login": "bogdandrutu"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABch6DErABqjMzNDM3OTQzNDQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcjMFwngFqTQxNTUzNzI1Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "09ac1d7e120e02316ef45fbe1f0211f9f164154a", "author": {"user": {"login": "bogdandrutu", "name": "Bogdan Drutu"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/09ac1d7e120e02316ef45fbe1f0211f9f164154a", "committedDate": "2020-05-16T17:18:25Z", "message": "Add alwaysParent sampler, cleanup samplers.\n\nSigned-off-by: Bogdan Drutu <bogdandrutu@gmail.com>"}, "afterCommit": {"oid": "efae69c5901e0957a4806bf34b3fd1cb35f80849", "author": {"user": {"login": "bogdandrutu", "name": "Bogdan Drutu"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/efae69c5901e0957a4806bf34b3fd1cb35f80849", "committedDate": "2020-05-16T17:23:17Z", "message": "Add alwaysParent sampler, cleanup samplers.\n\nSigned-off-by: Bogdan Drutu <bogdandrutu@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "efae69c5901e0957a4806bf34b3fd1cb35f80849", "author": {"user": {"login": "bogdandrutu", "name": "Bogdan Drutu"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/efae69c5901e0957a4806bf34b3fd1cb35f80849", "committedDate": "2020-05-16T17:23:17Z", "message": "Add alwaysParent sampler, cleanup samplers.\n\nSigned-off-by: Bogdan Drutu <bogdandrutu@gmail.com>"}, "afterCommit": {"oid": "c158f5d9a9aaca19d4ff0f9b26b17cbb80e4f817", "author": {"user": {"login": "bogdandrutu", "name": "Bogdan Drutu"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/c158f5d9a9aaca19d4ff0f9b26b17cbb80e4f817", "committedDate": "2020-05-16T17:46:19Z", "message": "Add alwaysParent sampler, cleanup samplers.\n\nSigned-off-by: Bogdan Drutu <bogdandrutu@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzNzIzNzc1", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1233#pullrequestreview-413723775", "createdAt": "2020-05-18T15:51:23Z", "commit": {"oid": "c158f5d9a9aaca19d4ff0f9b26b17cbb80e4f817"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxNTo1MToyM1rOGW9UQQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxNTo1MToyM1rOGW9UQQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjcyNjQ2NQ==", "bodyText": "this javadoc needs to be corrected.", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1233#discussion_r426726465", "createdAt": "2020-05-18T15:51:23Z", "author": {"login": "jkwatson"}, "path": "sdk/src/main/java/io/opentelemetry/sdk/trace/Samplers.java", "diffHunk": "@@ -68,7 +80,17 @@ public static Sampler alwaysOn() {\n    * @since 0.1.0\n    */\n   public static Sampler alwaysOff() {\n-    return ALWAYS_OFF;\n+    return AlwaysOffSampler.INSTANCE;\n+  }\n+\n+  /**\n+   * Returns a {@link Sampler} that always makes a \"no\" decision on {@link Span} sampling.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c158f5d9a9aaca19d4ff0f9b26b17cbb80e4f817"}, "originalPosition": 45}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzNzI1OTM2", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1233#pullrequestreview-413725936", "createdAt": "2020-05-18T15:53:55Z", "commit": {"oid": "c158f5d9a9aaca19d4ff0f9b26b17cbb80e4f817"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxNTo1Mzo1NVrOGW9bVQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxNTo1Mzo1NVrOGW9bVQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjcyODI3Nw==", "bodyText": "Now that this is used for something other than the always-on sampler, I think we should rename this to just SIMPLE_ON_DECISION or maybe even just ON_DECISION", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1233#discussion_r426728277", "createdAt": "2020-05-18T15:53:55Z", "author": {"login": "jkwatson"}, "path": "sdk/src/main/java/io/opentelemetry/sdk/trace/Samplers.java", "diffHunk": "@@ -43,10 +43,22 @@\n @Immutable\n public final class Samplers {\n \n-  private static final Sampler ALWAYS_ON = new AlwaysOnSampler();\n-  private static final Sampler ALWAYS_OFF = new AlwaysOffSampler();\n-  private static final Decision ALWAYS_ON_DECISION = new SimpleDecision(/* decision= */ true);\n-  private static final Decision ALWAYS_OFF_DECISION = new SimpleDecision(/* decision= */ false);\n+  private static final Decision ALWAYS_ON_DECISION =", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c158f5d9a9aaca19d4ff0f9b26b17cbb80e4f817"}, "originalPosition": 8}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzNzI3MjU0", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1233#pullrequestreview-413727254", "createdAt": "2020-05-18T15:55:26Z", "commit": {"oid": "c158f5d9a9aaca19d4ff0f9b26b17cbb80e4f817"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxNTo1NToyNlrOGW9fZg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxNTo1NToyNlrOGW9fZg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjcyOTMxOA==", "bodyText": "javadoc on this class isn't correct any more.", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1233#discussion_r426729318", "createdAt": "2020-05-18T15:55:26Z", "author": {"login": "jkwatson"}, "path": "sdk/src/main/java/io/opentelemetry/sdk/trace/Samplers.java", "diffHunk": "@@ -223,57 +261,27 @@ public final String getDescription() {\n \n   /** Sampling decision without attributes. */\n   @Immutable\n-  private static final class SimpleDecision implements Decision {\n-\n-    private final boolean decision;\n-\n+  @AutoValue\n+  abstract static class DecisionImpl implements Decision {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c158f5d9a9aaca19d4ff0f9b26b17cbb80e4f817"}, "originalPosition": 144}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5322621835639f7c3e4e5badbdbc24eb2a6f6066", "author": {"user": {"login": "bogdandrutu", "name": "Bogdan Drutu"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/5322621835639f7c3e4e5badbdbc24eb2a6f6066", "committedDate": "2020-05-20T14:45:58Z", "message": "Cleanup Samplers\n\nSigned-off-by: Bogdan Drutu <bogdandrutu@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c158f5d9a9aaca19d4ff0f9b26b17cbb80e4f817", "author": {"user": {"login": "bogdandrutu", "name": "Bogdan Drutu"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/c158f5d9a9aaca19d4ff0f9b26b17cbb80e4f817", "committedDate": "2020-05-16T17:46:19Z", "message": "Add alwaysParent sampler, cleanup samplers.\n\nSigned-off-by: Bogdan Drutu <bogdandrutu@gmail.com>"}, "afterCommit": {"oid": "5322621835639f7c3e4e5badbdbc24eb2a6f6066", "author": {"user": {"login": "bogdandrutu", "name": "Bogdan Drutu"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/5322621835639f7c3e4e5badbdbc24eb2a6f6066", "committedDate": "2020-05-20T14:45:58Z", "message": "Cleanup Samplers\n\nSigned-off-by: Bogdan Drutu <bogdandrutu@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE1NDU4NDI4", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1233#pullrequestreview-415458428", "createdAt": "2020-05-20T15:30:24Z", "commit": {"oid": "5322621835639f7c3e4e5badbdbc24eb2a6f6066"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQxNTozMDoyNFrOGYRitA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQxNTozMDoyNFrOGYRitA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODEwNjQyMA==", "bodyText": "Why change these to enums? This is a non-idiomatic usage of an enum.", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1233#discussion_r428106420", "createdAt": "2020-05-20T15:30:24Z", "author": {"login": "jkwatson"}, "path": "sdk/src/main/java/io/opentelemetry/sdk/trace/Samplers.java", "diffHunk": "@@ -84,8 +96,8 @@ public static Sampler probability(double probability) {\n   }\n \n   @Immutable\n-  private static final class AlwaysOnSampler implements Sampler {\n-    AlwaysOnSampler() {}\n+  private enum AlwaysOnSampler implements Sampler {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5322621835639f7c3e4e5badbdbc24eb2a6f6066"}, "originalPosition": 51}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE1NTM3MjU2", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1233#pullrequestreview-415537256", "createdAt": "2020-05-20T16:58:35Z", "commit": {"oid": "5322621835639f7c3e4e5badbdbc24eb2a6f6066"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2730, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}