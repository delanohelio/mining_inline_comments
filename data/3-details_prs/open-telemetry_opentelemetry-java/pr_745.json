{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYxNjUwMjMz", "number": 745, "title": "Change LabelSet creation to use varargs, rather than overloaded k/v methods.", "bodyText": "For now, keeping the version that takes a Map, and the emptyLabelSet method, although they both technically could be removed if we go with this.\nresolves #723", "createdAt": "2020-01-10T22:40:03Z", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/745", "merged": true, "mergeCommit": {"oid": "f6a27c7eee2db2e7f16b88bb18ab05f1df0057d1"}, "closed": true, "closedAt": "2020-01-14T18:57:41Z", "author": {"login": "jkwatson"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb5GMF3gH2gAyMzYxNjUwMjMzOmM1ZjcwNWU2YzE4NzQ4NDZhMzlmNzA4Y2M3ZTgzMTAyMTM3NzYwNDc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb6UxtYAFqTM0MjcyNTA5Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c5f705e6c1874846a39f708cc7e8310213776047", "author": {"user": null}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/c5f705e6c1874846a39f708cc7e8310213776047", "committedDate": "2020-01-10T22:21:15Z", "message": "switch to varargs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "74b30f7d395ded4aa92cee83aa04dfc9e88d2f8b", "author": {"user": null}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/74b30f7d395ded4aa92cee83aa04dfc9e88d2f8b", "committedDate": "2020-01-10T22:21:15Z", "message": "update the sdk to handle the varargs option"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a9c55968aa16c127343d6f2b6c7b5d76fc7beb1b", "author": {"user": null}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/a9c55968aa16c127343d6f2b6c7b5d76fc7beb1b", "committedDate": "2020-01-10T22:21:15Z", "message": "format"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "91c701fb508c9214df4e439595265a170a1c8d4e", "author": {"user": null}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/91c701fb508c9214df4e439595265a170a1c8d4e", "committedDate": "2020-01-10T22:33:09Z", "message": "rename a variable to make more sense"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQxNDc1ODE2", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/745#pullrequestreview-341475816", "createdAt": "2020-01-10T23:38:52Z", "commit": {"oid": "91c701fb508c9214df4e439595265a170a1c8d4e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMFQyMzozODo1MlrOFciowg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMFQyMzozODo1MlrOFciowg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTQ3MTkzOA==", "bodyText": "Why are these removed?", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/745#discussion_r365471938", "createdAt": "2020-01-10T23:38:52Z", "author": {"login": "bogdandrutu"}, "path": "sdk/src/test/java/io/opentelemetry/sdk/metrics/MeterSdkTest.java", "diffHunk": "@@ -54,19 +53,15 @@ public void testLabelSets() {\n     MeterSdk testSdk = new MeterSdk();\n \n     assertThat(testSdk.emptyLabelSet()).isSameInstanceAs(testSdk.emptyLabelSet());\n+    assertThat(testSdk.emptyLabelSet()).isSameInstanceAs(testSdk.createLabelSet());\n     assertThat(testSdk.emptyLabelSet())\n         .isSameInstanceAs(testSdk.createLabelSet(Collections.<String, String>emptyMap()));\n+\n     assertThat(testSdk.createLabelSet(\"key\", \"value\"))\n         .isEqualTo(testSdk.createLabelSet(\"key\", \"value\"));\n-    assertThat(testSdk.createLabelSet(\"k1\", \"v1\", \"k2\", \"v2\"))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "91c701fb508c9214df4e439595265a170a1c8d4e"}, "originalPosition": 18}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d988cbd40fb7912dace3b50326157ddb9c0091b9", "author": {"user": null}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/d988cbd40fb7912dace3b50326157ddb9c0091b9", "committedDate": "2020-01-10T23:42:38Z", "message": "add back a test with 2 key/value pairs"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQyMTM2Njcz", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/745#pullrequestreview-342136673", "createdAt": "2020-01-13T21:03:11Z", "commit": {"oid": "d988cbd40fb7912dace3b50326157ddb9c0091b9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQyMTM2OTI5", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/745#pullrequestreview-342136929", "createdAt": "2020-01-13T21:03:40Z", "commit": {"oid": "d988cbd40fb7912dace3b50326157ddb9c0091b9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QyMTowMzo0MFrOFdEfXA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QyMTowMzo0MFrOFdEfXA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjAyNjU4OA==", "bodyText": "Do we need this method anymore?", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/745#discussion_r366026588", "createdAt": "2020-01-13T21:03:40Z", "author": {"login": "bogdandrutu"}, "path": "api/src/main/java/io/opentelemetry/metrics/DefaultMeter.java", "diffHunk": "@@ -125,49 +125,21 @@ public BatchRecorder newMeasureBatchRecorder() {\n   }\n \n   @Override\n-  public LabelSet createLabelSet(String k1, String v1) {\n-    Utils.checkNotNull(k1, \"k1\");\n-    Utils.checkNotNull(v1, \"v1\");\n-    return NoopLabelSet.INSTANCE;\n-  }\n-\n-  @Override\n-  public LabelSet createLabelSet(String k1, String v1, String k2, String v2) {\n-    Utils.checkNotNull(k1, \"k1\");\n-    Utils.checkNotNull(v1, \"v1\");\n-    Utils.checkNotNull(k2, \"k2\");\n-    Utils.checkNotNull(v2, \"v2\");\n-    return NoopLabelSet.INSTANCE;\n-  }\n-\n-  @Override\n-  public LabelSet createLabelSet(String k1, String v1, String k2, String v2, String k3, String v3) {\n-    Utils.checkNotNull(k1, \"k1\");\n-    Utils.checkNotNull(v1, \"v1\");\n-    Utils.checkNotNull(k2, \"k2\");\n-    Utils.checkNotNull(v2, \"v2\");\n-    Utils.checkNotNull(k3, \"k3\");\n-    Utils.checkNotNull(v3, \"v3\");\n-    return NoopLabelSet.INSTANCE;\n-  }\n-\n-  @Override\n-  public LabelSet createLabelSet(\n-      String k1, String v1, String k2, String v2, String k3, String v3, String k4, String v4) {\n-    Utils.checkNotNull(k1, \"k1\");\n-    Utils.checkNotNull(v1, \"v1\");\n-    Utils.checkNotNull(k2, \"k2\");\n-    Utils.checkNotNull(v2, \"v2\");\n-    Utils.checkNotNull(k3, \"k3\");\n-    Utils.checkNotNull(v3, \"v3\");\n-    Utils.checkNotNull(k4, \"k4\");\n-    Utils.checkNotNull(v4, \"v4\");\n+  public LabelSet createLabelSet(String... keyValuePairs) {\n+    Utils.checkArgument(\n+        keyValuePairs.length % 2 == 0,\n+        \"You must provide an even number of key/value pair arguments.\");\n+    for (int i = 0; i < keyValuePairs.length; i += 2) {\n+      String key = keyValuePairs[i];\n+      Utils.checkNotNull(key, \"You cannot provide null keys for LabelSet creation.\");\n+    }\n     return NoopLabelSet.INSTANCE;\n   }\n \n   @Override\n   public LabelSet createLabelSet(Map<String, String> labels) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d988cbd40fb7912dace3b50326157ddb9c0091b9"}, "originalPosition": 53}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "447b4cb8d2ca1847bd136631c99f7f35de3c6c2b", "author": {"user": null}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/447b4cb8d2ca1847bd136631c99f7f35de3c6c2b", "committedDate": "2020-01-14T16:00:14Z", "message": "replace the emptyLabelSet method with the empty varargs call"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQyNzI1MDk3", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/745#pullrequestreview-342725097", "createdAt": "2020-01-14T17:54:26Z", "commit": {"oid": "447b4cb8d2ca1847bd136631c99f7f35de3c6c2b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQxNzo1NDoyN1rOFdgfdg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQxNzo1NDoyN1rOFdgfdg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjQ4NTM2Ng==", "bodyText": "We should return a NoopLabelSet to not crash if they call record on a metric with the result of this.", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/745#discussion_r366485366", "createdAt": "2020-01-14T17:54:27Z", "author": {"login": "bogdandrutu"}, "path": "api/src/test/java/io/opentelemetry/OpenTelemetryTest.java", "diffHunk": "@@ -371,27 +371,7 @@ public BatchRecorder newMeasureBatchRecorder() {\n \n     @Nullable\n     @Override\n-    public LabelSet createLabelSet(String k1, String v1) {\n-      return null;\n-    }\n-\n-    @Nullable\n-    @Override\n-    public LabelSet createLabelSet(String k1, String v1, String k2, String v2) {\n-      return null;\n-    }\n-\n-    @Nullable\n-    @Override\n-    public LabelSet createLabelSet(\n-        String k1, String v1, String k2, String v2, String k3, String v3) {\n-      return null;\n-    }\n-\n-    @Nullable\n-    @Override\n-    public LabelSet createLabelSet(\n-        String k1, String v1, String k2, String v2, String k3, String v3, String k4, String v4) {\n+    public LabelSet createLabelSet(String... keyValuePairs) {\n       return null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "447b4cb8d2ca1847bd136631c99f7f35de3c6c2b"}, "originalPosition": 26}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3434, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}