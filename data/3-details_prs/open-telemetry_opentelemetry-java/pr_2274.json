{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM2NDEyODU2", "number": 2274, "title": "Change MetricData to be consistent with protos, move creation to the Aggregation", "bodyText": "Currently the temporality is not handled correctly, and in all of the cases I am setting it as CUMULATIVE, but in this PR I adding the capability to set temporality from the SDK.\nFew fixes in this PR:\n\nNo empty metrics emitted from the SDK. We used to always emit metadata about the metrics without any points even if there were no recordings.\n\nSigned-off-by: Bogdan Drutu bogdandrutu@gmail.com", "createdAt": "2020-12-11T02:16:23Z", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2274", "merged": true, "mergeCommit": {"oid": "d4bddd1fdf56fa957a57d13231f7450a06cb7f2d"}, "closed": true, "closedAt": "2020-12-11T19:04:13Z", "author": {"login": "bogdandrutu"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdk-fpBgBqjQwOTgxMzIyMjc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdlMoXXgFqTU1MDQ4MTk5NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c65c093a124f52c9e6d05fa784df7366b1ca1fd1", "author": {"user": {"login": "bogdandrutu", "name": "Bogdan Drutu"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/c65c093a124f52c9e6d05fa784df7366b1ca1fd1", "committedDate": "2020-12-11T02:15:31Z", "message": "Change MetricData to be consistent with protos, move creation to the Aggregation\n\nSigned-off-by: Bogdan Drutu <bogdandrutu@gmail.com>"}, "afterCommit": {"oid": "615b2e39b68dbbce3b53222a077a417a5d1b0a9f", "author": {"user": {"login": "bogdandrutu", "name": "Bogdan Drutu"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/615b2e39b68dbbce3b53222a077a417a5d1b0a9f", "committedDate": "2020-12-11T02:27:02Z", "message": "Change MetricData to be consistent with protos, move creation to the Aggregation\n\nSigned-off-by: Bogdan Drutu <bogdandrutu@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "615b2e39b68dbbce3b53222a077a417a5d1b0a9f", "author": {"user": {"login": "bogdandrutu", "name": "Bogdan Drutu"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/615b2e39b68dbbce3b53222a077a417a5d1b0a9f", "committedDate": "2020-12-11T02:27:02Z", "message": "Change MetricData to be consistent with protos, move creation to the Aggregation\n\nSigned-off-by: Bogdan Drutu <bogdandrutu@gmail.com>"}, "afterCommit": {"oid": "81f4f1fe7501104817d4748afdf43e6560a08640", "author": {"user": {"login": "bogdandrutu", "name": "Bogdan Drutu"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/81f4f1fe7501104817d4748afdf43e6560a08640", "committedDate": "2020-12-11T17:13:00Z", "message": "Change MetricData to be consistent with protos, move creation to the Aggregation\n\nSigned-off-by: Bogdan Drutu <bogdandrutu@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "81f4f1fe7501104817d4748afdf43e6560a08640", "author": {"user": {"login": "bogdandrutu", "name": "Bogdan Drutu"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/81f4f1fe7501104817d4748afdf43e6560a08640", "committedDate": "2020-12-11T17:13:00Z", "message": "Change MetricData to be consistent with protos, move creation to the Aggregation\n\nSigned-off-by: Bogdan Drutu <bogdandrutu@gmail.com>"}, "afterCommit": {"oid": "6660a5b8fa70065c1f26e1c00aa0b30816d8b772", "author": {"user": {"login": "bogdandrutu", "name": "Bogdan Drutu"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/6660a5b8fa70065c1f26e1c00aa0b30816d8b772", "committedDate": "2020-12-11T17:26:59Z", "message": "Change MetricData to be consistent with protos, move creation to the Aggregation\n\nSigned-off-by: Bogdan Drutu <bogdandrutu@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUwMzQ3NzAy", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2274#pullrequestreview-550347702", "createdAt": "2020-12-11T17:37:40Z", "commit": {"oid": "6660a5b8fa70065c1f26e1c00aa0b30816d8b772"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQxNzozNzo0MFrOIEC_bQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQxNzozNzo0MFrOIEC_bQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTExNDIyMQ==", "bodyText": "previously this was a long sum; seems like there would be value in testing both long and double here, rather than only double.", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2274#discussion_r541114221", "createdAt": "2020-12-11T17:37:40Z", "author": {"login": "jkwatson"}, "path": "exporters/prometheus/src/test/java/io/opentelemetry/exporter/prometheus/PrometheusCollectorTest.java", "diffHunk": "@@ -55,23 +55,27 @@ void registerToDefault() throws IOException {\n \n   private static ImmutableList<MetricData> generateTestData() {\n     return ImmutableList.of(\n-        MetricData.create(\n+        MetricData.createDoubleSum(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6660a5b8fa70065c1f26e1c00aa0b30816d8b772"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fdef1d23aa7a834d50c755984972a3a3442342bd", "author": {"user": {"login": "bogdandrutu", "name": "Bogdan Drutu"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/fdef1d23aa7a834d50c755984972a3a3442342bd", "committedDate": "2020-12-11T17:45:54Z", "message": "Change MetricData to be consistent with protos, move creation to the Aggregation\n\nSigned-off-by: Bogdan Drutu <bogdandrutu@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6660a5b8fa70065c1f26e1c00aa0b30816d8b772", "author": {"user": {"login": "bogdandrutu", "name": "Bogdan Drutu"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/6660a5b8fa70065c1f26e1c00aa0b30816d8b772", "committedDate": "2020-12-11T17:26:59Z", "message": "Change MetricData to be consistent with protos, move creation to the Aggregation\n\nSigned-off-by: Bogdan Drutu <bogdandrutu@gmail.com>"}, "afterCommit": {"oid": "fdef1d23aa7a834d50c755984972a3a3442342bd", "author": {"user": {"login": "bogdandrutu", "name": "Bogdan Drutu"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/fdef1d23aa7a834d50c755984972a3a3442342bd", "committedDate": "2020-12-11T17:45:54Z", "message": "Change MetricData to be consistent with protos, move creation to the Aggregation\n\nSigned-off-by: Bogdan Drutu <bogdandrutu@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUwNDgxOTk1", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2274#pullrequestreview-550481995", "createdAt": "2020-12-11T18:55:23Z", "commit": {"oid": "fdef1d23aa7a834d50c755984972a3a3442342bd"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3644, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}