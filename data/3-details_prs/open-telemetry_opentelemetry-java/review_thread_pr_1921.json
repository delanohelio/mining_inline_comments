{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEyNDAyMjY5", "number": 1921, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQxNjo0NTo0MVrOEzY1Kg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQxNjozNTo0OFrOEz3qsw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIyMzE5NjU4OnYy", "diffSide": "RIGHT", "path": "exporters/otlp/src/main/java/io/opentelemetry/exporters/otlp/SpanAdapter.java", "isResolved": true, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQxNjo0NTo0MVrOHqlDHA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQxNjozNjoyOVrOHrXAeQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDQwOTI0NA==", "bodyText": "I think there's a little more we need to do here. See the comments in the proto:  https://github.com/open-telemetry/opentelemetry-proto/blob/master/opentelemetry/proto/trace/v1/trace.proto#L239-L249", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1921#discussion_r514409244", "createdAt": "2020-10-29T16:45:41Z", "author": {"login": "jkwatson"}, "path": "exporters/otlp/src/main/java/io/opentelemetry/exporters/otlp/SpanAdapter.java", "diffHunk": "@@ -172,7 +172,7 @@ static Status toStatusProto(SpanData.Status status) {\n     // todo: Update this when the proto definitions are updated to include UNSET and ERROR\n     Status.StatusCode protoStatusCode = Status.StatusCode.STATUS_CODE_OK;\n     if (status.getCanonicalCode() == StatusCode.ERROR) {\n-      protoStatusCode = Status.StatusCode.STATUS_CODE_UNKNOWN_ERROR;\n+      protoStatusCode = Status.StatusCode.STATUS_CODE_ERROR;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ebc8f7b6c66b4db04c14a9c2933d49860e0743ed"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDQzMzcxNg==", "bodyText": "When status.getCanonicalCode() is StatusCode.UNSET, the protoStatusCode  should be set to Status.StatusCode.STATUS_CODE_OK. Is that right?", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1921#discussion_r514433716", "createdAt": "2020-10-29T17:20:21Z", "author": {"login": "dengliming"}, "path": "exporters/otlp/src/main/java/io/opentelemetry/exporters/otlp/SpanAdapter.java", "diffHunk": "@@ -172,7 +172,7 @@ static Status toStatusProto(SpanData.Status status) {\n     // todo: Update this when the proto definitions are updated to include UNSET and ERROR\n     Status.StatusCode protoStatusCode = Status.StatusCode.STATUS_CODE_OK;\n     if (status.getCanonicalCode() == StatusCode.ERROR) {\n-      protoStatusCode = Status.StatusCode.STATUS_CODE_UNKNOWN_ERROR;\n+      protoStatusCode = Status.StatusCode.STATUS_CODE_ERROR;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDQwOTI0NA=="}, "originalCommit": {"oid": "ebc8f7b6c66b4db04c14a9c2933d49860e0743ed"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDQ4MTMzNA==", "bodyText": "I think we're also supposed to be setting the deprecated_code as well, if I read those comments correctly.", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1921#discussion_r514481334", "createdAt": "2020-10-29T18:34:17Z", "author": {"login": "jkwatson"}, "path": "exporters/otlp/src/main/java/io/opentelemetry/exporters/otlp/SpanAdapter.java", "diffHunk": "@@ -172,7 +172,7 @@ static Status toStatusProto(SpanData.Status status) {\n     // todo: Update this when the proto definitions are updated to include UNSET and ERROR\n     Status.StatusCode protoStatusCode = Status.StatusCode.STATUS_CODE_OK;\n     if (status.getCanonicalCode() == StatusCode.ERROR) {\n-      protoStatusCode = Status.StatusCode.STATUS_CODE_UNKNOWN_ERROR;\n+      protoStatusCode = Status.StatusCode.STATUS_CODE_ERROR;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDQwOTI0NA=="}, "originalCommit": {"oid": "ebc8f7b6c66b4db04c14a9c2933d49860e0743ed"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDg2NDYzOA==", "bodyText": "Can you help to confirm again? Thanks.", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1921#discussion_r514864638", "createdAt": "2020-10-30T05:02:54Z", "author": {"login": "dengliming"}, "path": "exporters/otlp/src/main/java/io/opentelemetry/exporters/otlp/SpanAdapter.java", "diffHunk": "@@ -172,7 +172,7 @@ static Status toStatusProto(SpanData.Status status) {\n     // todo: Update this when the proto definitions are updated to include UNSET and ERROR\n     Status.StatusCode protoStatusCode = Status.StatusCode.STATUS_CODE_OK;\n     if (status.getCanonicalCode() == StatusCode.ERROR) {\n-      protoStatusCode = Status.StatusCode.STATUS_CODE_UNKNOWN_ERROR;\n+      protoStatusCode = Status.StatusCode.STATUS_CODE_ERROR;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDQwOTI0NA=="}, "originalCommit": {"oid": "ebc8f7b6c66b4db04c14a9c2933d49860e0743ed"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTIyNzc2OQ==", "bodyText": "looks good!", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1921#discussion_r515227769", "createdAt": "2020-10-30T16:36:29Z", "author": {"login": "jkwatson"}, "path": "exporters/otlp/src/main/java/io/opentelemetry/exporters/otlp/SpanAdapter.java", "diffHunk": "@@ -172,7 +172,7 @@ static Status toStatusProto(SpanData.Status status) {\n     // todo: Update this when the proto definitions are updated to include UNSET and ERROR\n     Status.StatusCode protoStatusCode = Status.StatusCode.STATUS_CODE_OK;\n     if (status.getCanonicalCode() == StatusCode.ERROR) {\n-      protoStatusCode = Status.StatusCode.STATUS_CODE_UNKNOWN_ERROR;\n+      protoStatusCode = Status.StatusCode.STATUS_CODE_ERROR;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDQwOTI0NA=="}, "originalCommit": {"oid": "ebc8f7b6c66b4db04c14a9c2933d49860e0743ed"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIyNjQ4MjIzOnYy", "diffSide": "RIGHT", "path": "exporters/otlp/src/main/java/io/opentelemetry/exporters/otlp/SpanAdapter.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQwODo1NDo0N1rOHrGHBQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQxMDo0OTozMlrOHrJ0IA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDk1MDkxNw==", "bodyText": "I think there is a mistake here: For UNSET, we should use UNSET, not OK.", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1921#discussion_r514950917", "createdAt": "2020-10-30T08:54:47Z", "author": {"login": "Oberon00"}, "path": "exporters/otlp/src/main/java/io/opentelemetry/exporters/otlp/SpanAdapter.java", "diffHunk": "@@ -169,12 +171,16 @@ static Span toProtoSpan(SpanData spanData) {\n   }\n \n   static Status toStatusProto(SpanData.Status status) {\n-    // todo: Update this when the proto definitions are updated to include UNSET and ERROR\n     Status.StatusCode protoStatusCode = Status.StatusCode.STATUS_CODE_OK;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "14d78343af893c8d90584668bfd9875c3c66b610"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTAwNTUzMw==", "bodyText": "Thanks. Can you review again?", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1921#discussion_r515005533", "createdAt": "2020-10-30T10:37:31Z", "author": {"login": "dengliming"}, "path": "exporters/otlp/src/main/java/io/opentelemetry/exporters/otlp/SpanAdapter.java", "diffHunk": "@@ -169,12 +171,16 @@ static Span toProtoSpan(SpanData spanData) {\n   }\n \n   static Status toStatusProto(SpanData.Status status) {\n-    // todo: Update this when the proto definitions are updated to include UNSET and ERROR\n     Status.StatusCode protoStatusCode = Status.StatusCode.STATUS_CODE_OK;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDk1MDkxNw=="}, "originalCommit": {"oid": "14d78343af893c8d90584668bfd9875c3c66b610"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTAxMTYxNg==", "bodyText": "Thanks, looks good now!", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1921#discussion_r515011616", "createdAt": "2020-10-30T10:49:32Z", "author": {"login": "Oberon00"}, "path": "exporters/otlp/src/main/java/io/opentelemetry/exporters/otlp/SpanAdapter.java", "diffHunk": "@@ -169,12 +171,16 @@ static Span toProtoSpan(SpanData spanData) {\n   }\n \n   static Status toStatusProto(SpanData.Status status) {\n-    // todo: Update this when the proto definitions are updated to include UNSET and ERROR\n     Status.StatusCode protoStatusCode = Status.StatusCode.STATUS_CODE_OK;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDk1MDkxNw=="}, "originalCommit": {"oid": "14d78343af893c8d90584668bfd9875c3c66b610"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIyODI0ODgzOnYy", "diffSide": "RIGHT", "path": "exporters/otlp/src/test/java/io/opentelemetry/exporters/otlp/SpanAdapterTest.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQxNjozNTo0OFrOHrW-_A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQxNzo1MzoyNFrOHraMQg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTIyNzM4OA==", "bodyText": "this line of code makes me laugh, with the comment.  \ud83d\ude06", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1921#discussion_r515227388", "createdAt": "2020-10-30T16:35:48Z", "author": {"login": "jkwatson"}, "path": "exporters/otlp/src/test/java/io/opentelemetry/exporters/otlp/SpanAdapterTest.java", "diffHunk": "@@ -109,17 +112,35 @@ void toProtoSpanKind() {\n   }\n \n   @Test\n+  @SuppressWarnings(\"deprecation\") // setDeprecatedCode is deprecated.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4d336cc67bfae68b7d1ac14d4b23674a122678f4"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTI3OTkzOA==", "bodyText": "yes. without this line comment, the java compile will not pass.  : )", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1921#discussion_r515279938", "createdAt": "2020-10-30T17:53:24Z", "author": {"login": "dengliming"}, "path": "exporters/otlp/src/test/java/io/opentelemetry/exporters/otlp/SpanAdapterTest.java", "diffHunk": "@@ -109,17 +112,35 @@ void toProtoSpanKind() {\n   }\n \n   @Test\n+  @SuppressWarnings(\"deprecation\") // setDeprecatedCode is deprecated.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTIyNzM4OA=="}, "originalCommit": {"oid": "4d336cc67bfae68b7d1ac14d4b23674a122678f4"}, "originalPosition": 17}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2046, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}