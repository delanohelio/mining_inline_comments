{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIyNzUwOTAx", "number": 2087, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QyMzo1OToxMVrOE6SRMg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QyMzo1OToxMVrOE6SRMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI5NTUyMTc4OnYy", "diffSide": "RIGHT", "path": "sdk/tracing/src/main/java/io/opentelemetry/sdk/trace/export/BatchSpanProcessor.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QyMzo1OToxMVrOH1QXxQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOFQwMToyOToxNVrOH1SQGQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTYwNDgwNQ==", "bodyText": "This makes me think that we should have both the class name and the key be static fields of the Worker class, since we use them quite a bit. What do you think about making that simple refactoring?", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2087#discussion_r525604805", "createdAt": "2020-11-17T23:59:11Z", "author": {"login": "jkwatson"}, "path": "sdk/tracing/src/main/java/io/opentelemetry/sdk/trace/export/BatchSpanProcessor.java", "diffHunk": "@@ -187,6 +195,11 @@ private Worker(\n       this.exporterTimeoutMillis = exporterTimeoutMillis;\n       this.queue = queue;\n       this.batch = new ArrayList<>(this.maxExportBatchSize);\n+      spansInQueue.setCallback(\n+          result ->\n+              result.observe(\n+                  queue.size(),\n+                  Labels.of(\"spanProcessorType\", BatchSpanProcessor.class.getSimpleName())));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "01e557a5261f49d209ac70f0d6d92ef8e0349352"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTYyMzk2MQ==", "bodyText": "+1 I'll do the change.", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2087#discussion_r525623961", "createdAt": "2020-11-18T00:54:12Z", "author": {"login": "rubenvp8510"}, "path": "sdk/tracing/src/main/java/io/opentelemetry/sdk/trace/export/BatchSpanProcessor.java", "diffHunk": "@@ -187,6 +195,11 @@ private Worker(\n       this.exporterTimeoutMillis = exporterTimeoutMillis;\n       this.queue = queue;\n       this.batch = new ArrayList<>(this.maxExportBatchSize);\n+      spansInQueue.setCallback(\n+          result ->\n+              result.observe(\n+                  queue.size(),\n+                  Labels.of(\"spanProcessorType\", BatchSpanProcessor.class.getSimpleName())));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTYwNDgwNQ=="}, "originalCommit": {"oid": "01e557a5261f49d209ac70f0d6d92ef8e0349352"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTYzNTYwOQ==", "bodyText": "Done.", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2087#discussion_r525635609", "createdAt": "2020-11-18T01:29:15Z", "author": {"login": "rubenvp8510"}, "path": "sdk/tracing/src/main/java/io/opentelemetry/sdk/trace/export/BatchSpanProcessor.java", "diffHunk": "@@ -187,6 +195,11 @@ private Worker(\n       this.exporterTimeoutMillis = exporterTimeoutMillis;\n       this.queue = queue;\n       this.batch = new ArrayList<>(this.maxExportBatchSize);\n+      spansInQueue.setCallback(\n+          result ->\n+              result.observe(\n+                  queue.size(),\n+                  Labels.of(\"spanProcessorType\", BatchSpanProcessor.class.getSimpleName())));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTYwNDgwNQ=="}, "originalCommit": {"oid": "01e557a5261f49d209ac70f0d6d92ef8e0349352"}, "originalPosition": 34}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1951, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}