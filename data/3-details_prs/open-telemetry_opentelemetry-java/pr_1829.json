{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA1NzI1NDM0", "number": 1829, "title": "Upgrade to Gradle 6.7 and use toolchains feature to build on 11 and t\u2026", "bodyText": "\u2026est on 11/8.\nGradle 6.7 has a great feature to automatically download toolchains when it can't find them on the system. This can allow easily testing multiple Java versions without build system tweaks. As long as the user has any version of Java installed, Gradle will run, and it will automatically downloads additional needed toolchains, including the primary one (e.g. Java 8 user can run our build and it will use Java 11)\nThis tweaks the build so now\n\n\nBuild always uses Java 11. In the future, I would probably bump this to 15 - while runtime tweaks are often backported to older Java, compiler tweaks rarely are. I'd generally recommend using latest Java for building to get the latest compiler tweaks (which are in practice mostly improvements to Javadoc), when targeted to older Java versions and running tests on them there's basically no downside\n\nrelease flag is used instead of source/target compatibility to allow Java to enforce classpath version\n\n\n\nTests default to using Java 11. With the -PtestAdditionalJavaVersions, additionally testJava8 task runs the tests using Java 8. CI enables this flag on ubuntu test runner in GitHub and CircleCI", "createdAt": "2020-10-19T06:39:29Z", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1829", "merged": true, "mergeCommit": {"oid": "082791503b1972ee6aaec472f8a2fa6624d24abd"}, "closed": true, "closedAt": "2020-10-21T06:01:51Z", "author": {"login": "anuraaga"}, "timelineItems": {"totalCount": 16, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdT-VI6AH2gAyNTA1NzI1NDM0OjA0MzAwZDIyYWM3OTc3ODZiNjUwMDkyMzA2ZjBmMzA1YjNkZDc5M2Y=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdWsk_qAFqTUxNzk3ODc2NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "04300d22ac797786b650092306f0f305b3dd793f", "author": {"user": {"login": "anuraaga", "name": "Anuraag Agrawal"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/04300d22ac797786b650092306f0f305b3dd793f", "committedDate": "2020-10-19T06:39:00Z", "message": "Upgrade to Gradle 6.7 and use toolchains feature to build on 11 and test on 11/8."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4080b3f23cbf7443adaffe65b412f6d883813144", "author": {"user": {"login": "anuraaga", "name": "Anuraag Agrawal"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/4080b3f23cbf7443adaffe65b412f6d883813144", "committedDate": "2020-10-19T06:56:11Z", "message": "Debug (probably first JDK download taking some time)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "16b975dcbd3c38edbb5faa6a455c14a6d20a2574", "author": {"user": {"login": "anuraaga", "name": "Anuraag Agrawal"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/16b975dcbd3c38edbb5faa6a455c14a6d20a2574", "committedDate": "2020-10-19T07:17:37Z", "message": "Remove now unnecessary java toolchain workarounds"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "71a782fd9e619068fccaba28092ec51b74b70eb2", "author": {"user": {"login": "anuraaga", "name": "Anuraag Agrawal"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/71a782fd9e619068fccaba28092ec51b74b70eb2", "committedDate": "2020-10-19T08:43:47Z", "message": "Remove debug"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3ec747c70fe821db75761abf66e6c68ceaea634f", "author": {"user": {"login": "anuraaga", "name": "Anuraag Agrawal"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/3ec747c70fe821db75761abf66e6c68ceaea634f", "committedDate": "2020-10-19T23:22:22Z", "message": "Merge branch 'master' of github.com:open-telemetry/opentelemetry-java into gradle-6.7"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEyNjE0NTY3", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1829#pullrequestreview-512614567", "createdAt": "2020-10-20T11:41:35Z", "commit": {"oid": "3ec747c70fe821db75761abf66e6c68ceaea634f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMFQxMTo0MTozNVrOHk4Iiw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMFQxMTo0MTozNVrOHk4Iiw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODQzMDQ3NQ==", "bodyText": "If gradle is supposed to downloaded needed toolchain, why do we provide it manually?", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1829#discussion_r508430475", "createdAt": "2020-10-20T11:41:35Z", "author": {"login": "iNikem"}, "path": ".github/workflows/continuous-build.yml", "diffHunk": "@@ -18,28 +18,32 @@ jobs:\n           - macos-latest\n           - ubuntu-latest\n           - windows-latest\n-        java:\n-          # Test all OS's with Java 11\n-          - 11\n         include:\n           - os: ubuntu-latest\n-            java: 11\n+            testAdditionalJavaVersions: true\n             coverage: true\n-          - os: ubuntu-latest\n-            java: 8\n     steps:\n       - uses: actions/checkout@v2\n         with:\n           submodules: true\n-      - uses: actions/setup-java@v1\n+      - id: setup-java-8", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3ec747c70fe821db75761abf66e6c68ceaea634f"}, "originalPosition": 19}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEyNjIxOTM2", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1829#pullrequestreview-512621936", "createdAt": "2020-10-20T11:51:48Z", "commit": {"oid": "3ec747c70fe821db75761abf66e6c68ceaea634f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMFQxMTo1MTo0OVrOHk4fIA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMFQxMTo1MTo0OVrOHk4fIA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODQzNjI1Ng==", "bodyText": "Do you really need all?\nCan you use bin distribution?", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1829#discussion_r508436256", "createdAt": "2020-10-20T11:51:49Z", "author": {"login": "vlsi"}, "path": "examples/gradle/wrapper/gradle-wrapper.properties", "diffHunk": "@@ -1,5 +1,6 @@\n distributionBase=GRADLE_USER_HOME\n distributionPath=wrapper/dists\n-distributionUrl=https\\://services.gradle.org/distributions/gradle-6.6-all.zip\n+distributionUrl=https\\://services.gradle.org/distributions/gradle-6.7-all.zip", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3ec747c70fe821db75761abf66e6c68ceaea634f"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEyNjIyMDY4", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1829#pullrequestreview-512622068", "createdAt": "2020-10-20T11:51:58Z", "commit": {"oid": "3ec747c70fe821db75761abf66e6c68ceaea634f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMFQxMTo1MTo1OVrOHk4fjQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMFQxMTo1MTo1OVrOHk4fjQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODQzNjM2NQ==", "bodyText": "Do you really need all?\nCan you use bin distribution?", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1829#discussion_r508436365", "createdAt": "2020-10-20T11:51:59Z", "author": {"login": "vlsi"}, "path": "gradle/wrapper/gradle-wrapper.properties", "diffHunk": "@@ -1,5 +1,6 @@\n distributionBase=GRADLE_USER_HOME\n distributionPath=wrapper/dists\n-distributionUrl=https\\://services.gradle.org/distributions/gradle-6.6-all.zip\n+distributionUrl=https\\://services.gradle.org/distributions/gradle-6.7-all.zip", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3ec747c70fe821db75761abf66e6c68ceaea634f"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "019664202aea321d26e2fa6dcd4fdfb96b3351e1", "author": {"user": {"login": "anuraaga", "name": "Anuraag Agrawal"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/019664202aea321d26e2fa6dcd4fdfb96b3351e1", "committedDate": "2020-10-20T23:51:20Z", "message": "Remove windows build for now"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "13c72fd0a5076cf75eb1e527b04a7d982d4b077c", "author": {"user": {"login": "anuraaga", "name": "Anuraag Agrawal"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/13c72fd0a5076cf75eb1e527b04a7d982d4b077c", "committedDate": "2020-10-21T03:00:04Z", "message": "bin"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "351c760f2d982aac9e0e1c78d287a8e19bd5dc78", "author": {"user": {"login": "anuraaga", "name": "Anuraag Agrawal"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/351c760f2d982aac9e0e1c78d287a8e19bd5dc78", "committedDate": "2020-10-21T04:32:15Z", "message": "Raise no_output_timeout since this change seems to eliminate cache and build doesn't finish."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c6f025547f7c863c89587c1fb78a6944e4e0dd51", "author": {"user": {"login": "anuraaga", "name": "Anuraag Agrawal"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/c6f025547f7c863c89587c1fb78a6944e4e0dd51", "committedDate": "2020-10-21T04:38:47Z", "message": "Merge branch 'master' of github.com:open-telemetry/opentelemetry-java into gradle-6.7"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9d9eb589afe129f0d98e20217d63ed055590faf4", "author": {"user": {"login": "anuraaga", "name": "Anuraag Agrawal"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/9d9eb589afe129f0d98e20217d63ed055590faf4", "committedDate": "2020-10-21T04:38:56Z", "message": "Merge branch 'gradle-6.7' of github.com:anuraaga/opentelemetry-java into gradle-6.7"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEzMzIxMDc1", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1829#pullrequestreview-513321075", "createdAt": "2020-10-21T05:40:19Z", "commit": {"oid": "9d9eb589afe129f0d98e20217d63ed055590faf4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEzNDU0MzU1", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1829#pullrequestreview-513454355", "createdAt": "2020-10-21T08:57:09Z", "commit": {"oid": "9d9eb589afe129f0d98e20217d63ed055590faf4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQwODo1NzowOVrOHlhevA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQwODo1NzowOVrOHlhevA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTEwNzkwMA==", "bodyText": "Are we sure that this image is being used? The line 25 defines executor type as machine which is VM and I think as it is applied at root all jobs will use it.", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1829#discussion_r509107900", "createdAt": "2020-10-21T08:57:09Z", "author": {"login": "pavolloffay"}, "path": ".circleci/config.yml", "diffHunk": "@@ -28,8 +30,9 @@ jobs:\n       # Configure the JVM and Gradle to avoid OOM errors\n       _JAVA_OPTIONS: \"-Xmx1g\"\n       GRADLE_OPTS: \"-Dorg.gradle.daemon=false -Dorg.gradle.workers.max=2\"\n+      ORG_GRADLE_PROJECT_testAdditionalJavaVersions: true\n     docker:\n-      - image: circleci/openjdk:8-jdk\n+      - image: circleci/openjdk:11.0.6-jdk-buster", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9d9eb589afe129f0d98e20217d63ed055590faf4"}, "originalPosition": 16}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE3OTc4NzY0", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1829#pullrequestreview-517978764", "createdAt": "2020-10-27T17:39:48Z", "commit": {"oid": "9d9eb589afe129f0d98e20217d63ed055590faf4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QxNzozOTo0OFrOHpItqA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QxNzozOTo0OFrOHpItqA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjg5NjQyNA==", "bodyText": "@anuraaga I think by removing this, Intellij doesn't configure the language level correctly.", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1829#discussion_r512896424", "createdAt": "2020-10-27T17:39:48Z", "author": {"login": "tylerbenson"}, "path": "build.gradle", "diffHunk": "@@ -169,15 +169,32 @@ configure(opentelemetryProjects) {\n         mavenLocal()\n     }\n \n-    sourceCompatibility = 1.8\n-    targetCompatibility = 1.8", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9d9eb589afe129f0d98e20217d63ed055590faf4"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4084, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}