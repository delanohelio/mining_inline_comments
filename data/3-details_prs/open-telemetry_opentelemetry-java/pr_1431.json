{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDUxNTg2ODI2", "number": 1431, "title": "Removed URLEncoder from TracezZPageHandler", "bodyText": "Resolves Issue #1425.", "createdAt": "2020-07-18T00:43:27Z", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1431", "merged": true, "mergeCommit": {"oid": "19da7d01cb84fec7e0df8901c100a2bb5ff68712"}, "closed": true, "closedAt": "2020-07-22T02:24:42Z", "author": {"login": "williamhu99"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc19SBrAH2gAyNDUxNTg2ODI2OmVjMzFlM2U5Y2IwMjEyYzc1MTMzMzMxMjkwMjQ2YjI1OGY0NDViMTM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc3Ov4MgFqTQ1Mjg5NTA4NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "ec31e3e9cb0212c75133331290246b258f445b13", "author": {"user": {"login": "williamhu99", "name": "William Hu"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/ec31e3e9cb0212c75133331290246b258f445b13", "committedDate": "2020-07-18T00:27:58Z", "message": "Removed URLEncoder"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e0fe0ede7bbd0e660feab6b0eac647f972224a12", "author": {"user": {"login": "williamhu99", "name": "William Hu"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/e0fe0ede7bbd0e660feab6b0eac647f972224a12", "committedDate": "2020-07-18T00:44:15Z", "message": "Fixed typo"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxMDI0MDY0", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1431#pullrequestreview-451024064", "createdAt": "2020-07-18T02:28:10Z", "commit": {"oid": "e0fe0ede7bbd0e660feab6b0eac647f972224a12"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "870c1b9ffd9965d73dfb3f7b4a8304c95ed3410b", "author": {"user": {"login": "wtyanan", "name": "Terry (Tianyu) Wang"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/870c1b9ffd9965d73dfb3f7b4a8304c95ed3410b", "committedDate": "2020-07-20T19:43:29Z", "message": "Merged origin/master for updates"}, "afterCommit": {"oid": "e0fe0ede7bbd0e660feab6b0eac647f972224a12", "author": {"user": {"login": "williamhu99", "name": "William Hu"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/e0fe0ede7bbd0e660feab6b0eac647f972224a12", "committedDate": "2020-07-18T00:44:15Z", "message": "Fixed typo"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cf7f5c8f7890ffb19aabcd675ca4bcc7f4a5739a", "author": {"user": {"login": "williamhu99", "name": "William Hu"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/cf7f5c8f7890ffb19aabcd675ca4bcc7f4a5739a", "committedDate": "2020-07-20T21:20:21Z", "message": "Added URLDecoding"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9db8e7e6edd7b8188fe3b4deda6b091cf2f92a66", "author": {"user": {"login": "williamhu99", "name": "William Hu"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/9db8e7e6edd7b8188fe3b4deda6b091cf2f92a66", "committedDate": "2020-07-20T21:29:32Z", "message": "Included comment for string replacement"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxOTg2MDg4", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1431#pullrequestreview-451986088", "createdAt": "2020-07-20T21:54:08Z", "commit": {"oid": "9db8e7e6edd7b8188fe3b4deda6b091cf2f92a66"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQyMTo1NDowOFrOG0gmkA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQyMTo1NDowOFrOG0gmkA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzcxMzI5Ng==", "bodyText": "I think you can use StandardCharsets.UTF-8 here, and avoid the exception that could result.", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1431#discussion_r457713296", "createdAt": "2020-07-20T21:54:08Z", "author": {"login": "jkwatson"}, "path": "sdk_extensions/zpages/src/main/java/io/opentelemetry/sdk/extensions/zpages/TracezZPageHandler.java", "diffHunk": "@@ -186,7 +187,10 @@ private static void emitSummaryTableCell(\n     // If numOfSamples is smaller than 0, print the text \"N/A\", otherwise print the text \"0\"\n     if (numOfSamples > 0) {\n       out.print(\"<td class=\\\"align-center border-left-dark\\\"><a href=\\\"?\");\n-      out.print(PARAM_SPAN_NAME + \"=\" + URLEncoder.encode(spanName, \"UTF-8\"));\n+      out.print(\n+          PARAM_SPAN_NAME\n+              + \"=\"\n+              + URLEncoder.encode(spanName.replace(\"+\", /* Unicode for + */ \"%2B\"), \"UTF-8\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9db8e7e6edd7b8188fe3b4deda6b091cf2f92a66"}, "originalPosition": 16}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUyMDIwMjMy", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1431#pullrequestreview-452020232", "createdAt": "2020-07-20T23:11:14Z", "commit": {"oid": "9db8e7e6edd7b8188fe3b4deda6b091cf2f92a66"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQyMzoxMToxNFrOG0iYiA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQyMzoxNTo1OFrOG0ieSQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzc0MjQ3Mg==", "bodyText": "Ah didn't know this behavior of urlencoder. In that case may want to use guava which I don't think has this problem\nhttps://guava.dev/releases/19.0/api/docs/com/google/common/net/UrlEscapers.html#urlFormParameterEscaper()", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1431#discussion_r457742472", "createdAt": "2020-07-20T23:11:14Z", "author": {"login": "anuraaga"}, "path": "sdk_extensions/zpages/src/main/java/io/opentelemetry/sdk/extensions/zpages/TracezZPageHandler.java", "diffHunk": "@@ -186,7 +187,10 @@ private static void emitSummaryTableCell(\n     // If numOfSamples is smaller than 0, print the text \"N/A\", otherwise print the text \"0\"\n     if (numOfSamples > 0) {\n       out.print(\"<td class=\\\"align-center border-left-dark\\\"><a href=\\\"?\");\n-      out.print(PARAM_SPAN_NAME + \"=\" + URLEncoder.encode(spanName, \"UTF-8\"));\n+      out.print(\n+          PARAM_SPAN_NAME\n+              + \"=\"\n+              + URLEncoder.encode(spanName.replace(\"+\", /* Unicode for + */ \"%2B\"), \"UTF-8\"));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzcxMzI5Ng=="}, "originalCommit": {"oid": "9db8e7e6edd7b8188fe3b4deda6b091cf2f92a66"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzc0Mzk0NQ==", "bodyText": "It's the \"job\" of parseQueryMap to do URL encoding, not this business logic do it there. This is important\n\nif we add more parameters\nif someone uses this in their own server instead of the default sun http", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1431#discussion_r457743945", "createdAt": "2020-07-20T23:15:58Z", "author": {"login": "anuraaga"}, "path": "sdk_extensions/zpages/src/main/java/io/opentelemetry/sdk/extensions/zpages/TracezZPageHandler.java", "diffHunk": "@@ -475,7 +479,7 @@ private void emitHtmlBody(Map<String, String> queryMap, PrintStream out)\n     String spanName = queryMap.get(PARAM_SPAN_NAME);\n     if (spanName != null) {\n       // Convert spanName with URL encoding\n-      spanName = URLEncoder.encode(spanName, \"UTF-8\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9db8e7e6edd7b8188fe3b4deda6b091cf2f92a66"}, "originalPosition": 24}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "412797843fe71d406538cd0173d414afd3872019", "author": {"user": {"login": "williamhu99", "name": "William Hu"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/412797843fe71d406538cd0173d414afd3872019", "committedDate": "2020-07-20T23:50:41Z", "message": "Added unit tests for special characters in span names"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e17c337050a0c57947eea07b53c36393805fc3e3", "author": {"user": {"login": "williamhu99", "name": "William Hu"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/e17c337050a0c57947eea07b53c36393805fc3e3", "committedDate": "2020-07-21T20:34:47Z", "message": "Resolved URL decoding issues"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUyODE1ODE4", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1431#pullrequestreview-452815818", "createdAt": "2020-07-21T20:45:56Z", "commit": {"oid": "e17c337050a0c57947eea07b53c36393805fc3e3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bb58b26018ed710133ff0493894b58d70b977640", "author": {"user": {"login": "williamhu99", "name": "William Hu"}}, "url": "https://github.com/open-telemetry/opentelemetry-java/commit/bb58b26018ed710133ff0493894b58d70b977640", "committedDate": "2020-07-21T22:08:18Z", "message": "Moved url decoding to parseQueryMap and updated the corresponding unit tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUyODk1MDg0", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1431#pullrequestreview-452895084", "createdAt": "2020-07-21T23:22:54Z", "commit": {"oid": "bb58b26018ed710133ff0493894b58d70b977640"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2576, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}