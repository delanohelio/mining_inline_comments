{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQwMDc1NjYz", "number": 2309, "reviewThreads": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQwODozNjo1NFrOFFdr0A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQxODoxNTo0OFrOFFvFqg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQxMjczNTUyOnYy", "diffSide": "LEFT", "path": "exporters/jaeger-thrift/src/test/java/io/opentelemetry/exporter/jaeger/thrift/JaegerThriftSpanExporterTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQwODozNjo1NFrOIF_CKg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQwODozNjo1NFrOIF_CKg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzE0NjUzOA==", "bodyText": "Don't think I'm too sad to lose this check", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2309#discussion_r543146538", "createdAt": "2020-12-15T08:36:54Z", "author": {"login": "anuraaga"}, "path": "exporters/jaeger-thrift/src/test/java/io/opentelemetry/exporter/jaeger/thrift/JaegerThriftSpanExporterTest.java", "diffHunk": "@@ -235,14 +234,12 @@ void testExportMultipleResources() throws SenderException, UnknownHostException\n   void configTest() {\n     Map<String, String> options = new HashMap<>();\n     String serviceName = \"myGreatService\";\n-    String endpoint = \"http://127.0.0.1:9090\";\n     options.put(\"otel.exporter.jaeger.service.name\", serviceName);\n-    options.put(\"otel.exporter.jaeger.endpoint\", endpoint);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c7044a1dde120590dd8454ae9afc93c472352fe"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQxMjczOTM2OnYy", "diffSide": "LEFT", "path": "exporters/otlp/src/test/java/io/opentelemetry/exporter/otlp/OtlpGrpcSpanExporterTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQwODozNzo0OFrOIF_Eag==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQwODozNzo0OFrOIF_Eag==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzE0NzExNA==", "bodyText": "endpoint isn't allowed to start with http:// btw", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2309#discussion_r543147114", "createdAt": "2020-12-15T08:37:48Z", "author": {"login": "anuraaga"}, "path": "exporters/otlp/src/test/java/io/opentelemetry/exporter/otlp/OtlpGrpcSpanExporterTest.java", "diffHunk": "@@ -50,23 +91,36 @@\n   @Test\n   void configTest() {\n     Map<String, String> options = new HashMap<>();\n-    options.put(\"otel.exporter.otlp.span.timeout\", \"12\");\n-    options.put(\"otel.exporter.otlp.span.endpoint\", \"http://localhost:6553\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c7044a1dde120590dd8454ae9afc93c472352fe"}, "originalPosition": 78}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQxNTU3MzUwOnYy", "diffSide": "RIGHT", "path": "exporters/jaeger-thrift/src/main/java/io/opentelemetry/exporter/jaeger/thrift/JaegerThriftSpanExporter.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQxODoxMjo0OFrOIGZHDg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQxODoxMjo0OFrOIGZHDg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzU3Mzc3NA==", "bodyText": "I would expose a package protected getter for testing, to keep the logic that all members should be private final when possible.", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2309#discussion_r543573774", "createdAt": "2020-12-15T18:12:48Z", "author": {"login": "bogdandrutu"}, "path": "exporters/jaeger-thrift/src/main/java/io/opentelemetry/exporter/jaeger/thrift/JaegerThriftSpanExporter.java", "diffHunk": "@@ -41,7 +41,8 @@\n   private static final String IP_KEY = \"ip\";\n   private static final String IP_DEFAULT = \"0.0.0.0\";\n   private final ThriftSender thriftSender;\n-  private final Process process;\n+  // Visible for testing\n+  final Process process;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c7044a1dde120590dd8454ae9afc93c472352fe"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQxNTU3NDkxOnYy", "diffSide": "RIGHT", "path": "exporters/jaeger/src/main/java/io/opentelemetry/exporter/jaeger/JaegerGrpcSpanExporter.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQxODoxMzoxMFrOIGZH8g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQxODoxMzoxMFrOIGZH8g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzU3NDAwMg==", "bodyText": "ditto", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2309#discussion_r543574002", "createdAt": "2020-12-15T18:13:10Z", "author": {"login": "bogdandrutu"}, "path": "exporters/jaeger/src/main/java/io/opentelemetry/exporter/jaeger/JaegerGrpcSpanExporter.java", "diffHunk": "@@ -49,8 +49,11 @@\n   private static final String IP_KEY = \"ip\";\n   private static final String IP_DEFAULT = \"0.0.0.0\";\n   private final CollectorServiceGrpc.CollectorServiceFutureStub stub;\n-  private final Model.Process.Builder processBuilder;\n-  private final ManagedChannel managedChannel;\n+\n+  // Visible for testing\n+  final Model.Process.Builder processBuilder;\n+  // Visible for testing\n+  final ManagedChannel managedChannel;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c7044a1dde120590dd8454ae9afc93c472352fe"}, "originalPosition": 10}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQxNTU4MDY5OnYy", "diffSide": "RIGHT", "path": "exporters/otlp/build.gradle", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQxODoxNDoyN1rOIGZLTw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQxOTowNjozM1rOIGbccg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzU3NDg2Mw==", "bodyText": "Why this change?", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2309#discussion_r543574863", "createdAt": "2020-12-15T18:14:27Z", "author": {"login": "bogdandrutu"}, "path": "exporters/otlp/build.gradle", "diffHunk": "@@ -18,7 +18,9 @@ dependencies {\n             libraries.protobuf,\n             libraries.protobuf_util\n \n-    testImplementation project(':opentelemetry-sdk-testing')\n+    testImplementation project(':opentelemetry-sdk-testing'),\n+            'com.linecorp.armeria:armeria-grpc',\n+            'com.linecorp.armeria:armeria-junit5'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c7044a1dde120590dd8454ae9afc93c472352fe"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzYxMjAxOA==", "bodyText": "yeah, feels like this snuck in to the wrong PR", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2309#discussion_r543612018", "createdAt": "2020-12-15T19:06:33Z", "author": {"login": "jkwatson"}, "path": "exporters/otlp/build.gradle", "diffHunk": "@@ -18,7 +18,9 @@ dependencies {\n             libraries.protobuf,\n             libraries.protobuf_util\n \n-    testImplementation project(':opentelemetry-sdk-testing')\n+    testImplementation project(':opentelemetry-sdk-testing'),\n+            'com.linecorp.armeria:armeria-grpc',\n+            'com.linecorp.armeria:armeria-junit5'", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzU3NDg2Mw=="}, "originalCommit": {"oid": "9c7044a1dde120590dd8454ae9afc93c472352fe"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQxNTU4Njk4OnYy", "diffSide": "RIGHT", "path": "exporters/otlp/src/test/java/io/opentelemetry/exporter/otlp/OtlpGrpcSpanExporterTest.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQxODoxNTo0OFrOIGZO8A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQyMzo1NDo0NVrOIGlTaw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzU3NTc5Mg==", "bodyText": "This are great test, but why adding them in a PR that says it does make things final?", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2309#discussion_r543575792", "createdAt": "2020-12-15T18:15:48Z", "author": {"login": "bogdandrutu"}, "path": "exporters/otlp/src/test/java/io/opentelemetry/exporter/otlp/OtlpGrpcSpanExporterTest.java", "diffHunk": "@@ -34,9 +42,42 @@\n import org.junit.jupiter.api.AfterEach;\n import org.junit.jupiter.api.BeforeEach;\n import org.junit.jupiter.api.Test;\n-import org.mockito.Mockito;\n+import org.junit.jupiter.api.extension.RegisterExtension;\n \n class OtlpGrpcSpanExporterTest {\n+\n+  @RegisterExtension\n+  public static ServerExtension server =", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c7044a1dde120590dd8454ae9afc93c472352fe"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Mzc3MzU0Nw==", "bodyText": "Without the spy (can't because of final), we lose a significant test that the key-value splitting logic is correct (a regression test since it was broken for a while).", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2309#discussion_r543773547", "createdAt": "2020-12-15T23:54:45Z", "author": {"login": "anuraaga"}, "path": "exporters/otlp/src/test/java/io/opentelemetry/exporter/otlp/OtlpGrpcSpanExporterTest.java", "diffHunk": "@@ -34,9 +42,42 @@\n import org.junit.jupiter.api.AfterEach;\n import org.junit.jupiter.api.BeforeEach;\n import org.junit.jupiter.api.Test;\n-import org.mockito.Mockito;\n+import org.junit.jupiter.api.extension.RegisterExtension;\n \n class OtlpGrpcSpanExporterTest {\n+\n+  @RegisterExtension\n+  public static ServerExtension server =", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzU3NTc5Mg=="}, "originalCommit": {"oid": "9c7044a1dde120590dd8454ae9afc93c472352fe"}, "originalPosition": 39}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1725, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}