{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA5OTg5NjU2", "number": 579, "reviewThreads": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQxMjoyNDoxNVrOEx4GQQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQxNDo0NDo1N1rOEx71Sg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIwNzM0Nzg1OnYy", "diffSide": "RIGHT", "path": "server/src/main/java/com/broadcom/lsp/cobol/core/visitor/CobolVisitor.java", "isResolved": true, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQxMjoyNDoxNVrOHoNG0g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQxMzowMjoxOFrOHoObeA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTkxOTgyNg==", "bodyText": "we have i18n service now, should be externalized", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/579#discussion_r511919826", "createdAt": "2020-10-26T12:24:15Z", "author": {"login": "asatklichov"}, "path": "server/src/main/java/com/broadcom/lsp/cobol/core/visitor/CobolVisitor.java", "diffHunk": "@@ -63,10 +63,14 @@\n   private static final String INVALID_DEF_MSG = \"Invalid definition for: \";\n   private static final String MISSPELLED_WORD = \"A misspelled word, maybe you want to put \";\n   private static final String PROGRAM_ID_ISSUE_MSG = \"There is an issue with PROGRAM-ID paragraph\";\n+  private static final String PARAGRAPH_NOT_DEFINED_MSG = \"The following paragraph is not defined: \";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "246fe514880f7c47f5f081c0400cd7549afd8339"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTkyNjAxNQ==", "bodyText": "Great, can you point me to an example of how to do that?", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/579#discussion_r511926015", "createdAt": "2020-10-26T12:35:19Z", "author": {"login": "Nurkambay"}, "path": "server/src/main/java/com/broadcom/lsp/cobol/core/visitor/CobolVisitor.java", "diffHunk": "@@ -63,10 +63,14 @@\n   private static final String INVALID_DEF_MSG = \"Invalid definition for: \";\n   private static final String MISSPELLED_WORD = \"A misspelled word, maybe you want to put \";\n   private static final String PROGRAM_ID_ISSUE_MSG = \"There is an issue with PROGRAM-ID paragraph\";\n+  private static final String PARAGRAPH_NOT_DEFINED_MSG = \"The following paragraph is not defined: \";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTkxOTgyNg=="}, "originalCommit": {"oid": "246fe514880f7c47f5f081c0400cd7549afd8339"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTkyNzk3Nw==", "bodyText": "MessageService#getMessage(key)", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/579#discussion_r511927977", "createdAt": "2020-10-26T12:38:45Z", "author": {"login": "asatklichov"}, "path": "server/src/main/java/com/broadcom/lsp/cobol/core/visitor/CobolVisitor.java", "diffHunk": "@@ -63,10 +63,14 @@\n   private static final String INVALID_DEF_MSG = \"Invalid definition for: \";\n   private static final String MISSPELLED_WORD = \"A misspelled word, maybe you want to put \";\n   private static final String PROGRAM_ID_ISSUE_MSG = \"There is an issue with PROGRAM-ID paragraph\";\n+  private static final String PARAGRAPH_NOT_DEFINED_MSG = \"The following paragraph is not defined: \";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTkxOTgyNg=="}, "originalCommit": {"oid": "246fe514880f7c47f5f081c0400cd7549afd8339"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTkzMDUxMA==", "bodyText": "@Nurkambay probably, if you pull changes from dev branch, these would be unused we can get rid of them. Apart from the newly introduced. For which you would have to introduce your key in messages_en.properties file and use.", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/579#discussion_r511930510", "createdAt": "2020-10-26T12:43:16Z", "author": {"login": "ap891843"}, "path": "server/src/main/java/com/broadcom/lsp/cobol/core/visitor/CobolVisitor.java", "diffHunk": "@@ -63,10 +63,14 @@\n   private static final String INVALID_DEF_MSG = \"Invalid definition for: \";\n   private static final String MISSPELLED_WORD = \"A misspelled word, maybe you want to put \";\n   private static final String PROGRAM_ID_ISSUE_MSG = \"There is an issue with PROGRAM-ID paragraph\";\n+  private static final String PARAGRAPH_NOT_DEFINED_MSG = \"The following paragraph is not defined: \";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTkxOTgyNg=="}, "originalCommit": {"oid": "246fe514880f7c47f5f081c0400cd7549afd8339"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTk0MTQ5Ng==", "bodyText": "Thanks! Done.", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/579#discussion_r511941496", "createdAt": "2020-10-26T13:02:18Z", "author": {"login": "Nurkambay"}, "path": "server/src/main/java/com/broadcom/lsp/cobol/core/visitor/CobolVisitor.java", "diffHunk": "@@ -63,10 +63,14 @@\n   private static final String INVALID_DEF_MSG = \"Invalid definition for: \";\n   private static final String MISSPELLED_WORD = \"A misspelled word, maybe you want to put \";\n   private static final String PROGRAM_ID_ISSUE_MSG = \"There is an issue with PROGRAM-ID paragraph\";\n+  private static final String PARAGRAPH_NOT_DEFINED_MSG = \"The following paragraph is not defined: \";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTkxOTgyNg=="}, "originalCommit": {"oid": "246fe514880f7c47f5f081c0400cd7549afd8339"}, "originalPosition": 28}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIwNzU1NTUxOnYy", "diffSide": "RIGHT", "path": "server/src/main/java/com/broadcom/lsp/cobol/core/visitor/CobolVisitor.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQxMzoxOTozNlrOHoPFKA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQxMzo1NzoyNlrOHoQuAA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTk1MjE2OA==", "bodyText": "The name is already in UpperCase. It's done in visitParagraphNameUsage method.", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/579#discussion_r511952168", "createdAt": "2020-10-26T13:19:36Z", "author": {"login": "grianbrcom"}, "path": "server/src/main/java/com/broadcom/lsp/cobol/core/visitor/CobolVisitor.java", "diffHunk": "@@ -436,12 +444,21 @@ private void addUsage(SubContext<?> langContext, String name, @NonNull Location\n     langContext.addUsage(name.toUpperCase(), location);\n   }\n \n+  private void addParagraphUsage(String name, @NonNull Locality locality) {\n+    paragraphs.addUsage(name.toUpperCase(), locality.toLocation());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c0bc9fb78e99b46d792a1b2081b5c9b8d0f263f4"}, "originalPosition": 91}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTk3OTAwOA==", "bodyText": "Thanks, fixed.", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/579#discussion_r511979008", "createdAt": "2020-10-26T13:57:26Z", "author": {"login": "Nurkambay"}, "path": "server/src/main/java/com/broadcom/lsp/cobol/core/visitor/CobolVisitor.java", "diffHunk": "@@ -436,12 +444,21 @@ private void addUsage(SubContext<?> langContext, String name, @NonNull Location\n     langContext.addUsage(name.toUpperCase(), location);\n   }\n \n+  private void addParagraphUsage(String name, @NonNull Locality locality) {\n+    paragraphs.addUsage(name.toUpperCase(), locality.toLocation());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTk1MjE2OA=="}, "originalCommit": {"oid": "c0bc9fb78e99b46d792a1b2081b5c9b8d0f263f4"}, "originalPosition": 91}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIwNzU4NDU0OnYy", "diffSide": "RIGHT", "path": "server/src/test/java/com/broadcom/lsp/cobol/usecases/TestParagraphNotDefined.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQxMzoyNjoyNVrOHoPXHQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQxNTowMjo0OVrOHoT2Hw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTk1Njc2NQ==", "bodyText": "I think that you can wrap PRINT-DATA like:\n+ \"           PERFORM {#PRINT-DATA}.\";\n\nIt will calculate the position automatically. Please, refer to UseCaseEngine docs for details. I didn't have a chance to use it but want to try someday. So, my suggestion can be wrong.", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/579#discussion_r511956765", "createdAt": "2020-10-26T13:26:25Z", "author": {"login": "grianbrcom"}, "path": "server/src/test/java/com/broadcom/lsp/cobol/usecases/TestParagraphNotDefined.java", "diffHunk": "@@ -0,0 +1,41 @@\n+package com.broadcom.lsp.cobol.usecases;\n+\n+import org.eclipse.lsp4j.Diagnostic;\n+import org.eclipse.lsp4j.DiagnosticSeverity;\n+import org.eclipse.lsp4j.Position;\n+import org.eclipse.lsp4j.Range;\n+import org.junit.jupiter.api.Test;\n+\n+import java.util.List;\n+\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+\n+class TestParagraphNotDefined extends NegativeUseCase {\n+    private static final String TEXT =\n+            \"        IDENTIFICATION DIVISION.\\r\\n\"\n+                    + \"        PROGRAM-ID. test1.\\r\\n\"\n+                    + \"        DATA DIVISION.\\r\\n\"\n+                    + \"        WORKING-STORAGE SECTION.\\r\\n\"\n+                    + \"        PROCEDURE DIVISION.\\r\\n\"\n+                    + \"        PROGA.\\r\\n\"\n+                    + \"           PERFORM PRINT-DATA.\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c0bc9fb78e99b46d792a1b2081b5c9b8d0f263f4"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTk4MDUwMQ==", "bodyText": "In that case there will be 2 diagnostic errors. One of them will be that counts for usages and declarations do not match. To avoid this I did not use {#PRINT-DATA}", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/579#discussion_r511980501", "createdAt": "2020-10-26T13:59:22Z", "author": {"login": "Nurkambay"}, "path": "server/src/test/java/com/broadcom/lsp/cobol/usecases/TestParagraphNotDefined.java", "diffHunk": "@@ -0,0 +1,41 @@\n+package com.broadcom.lsp.cobol.usecases;\n+\n+import org.eclipse.lsp4j.Diagnostic;\n+import org.eclipse.lsp4j.DiagnosticSeverity;\n+import org.eclipse.lsp4j.Position;\n+import org.eclipse.lsp4j.Range;\n+import org.junit.jupiter.api.Test;\n+\n+import java.util.List;\n+\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+\n+class TestParagraphNotDefined extends NegativeUseCase {\n+    private static final String TEXT =\n+            \"        IDENTIFICATION DIVISION.\\r\\n\"\n+                    + \"        PROGRAM-ID. test1.\\r\\n\"\n+                    + \"        DATA DIVISION.\\r\\n\"\n+                    + \"        WORKING-STORAGE SECTION.\\r\\n\"\n+                    + \"        PROCEDURE DIVISION.\\r\\n\"\n+                    + \"        PROGA.\\r\\n\"\n+                    + \"           PERFORM PRINT-DATA.\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTk1Njc2NQ=="}, "originalCommit": {"oid": "c0bc9fb78e99b46d792a1b2081b5c9b8d0f263f4"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjAzMDIzOQ==", "bodyText": "Fixed with Andrei's help :-)", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/579#discussion_r512030239", "createdAt": "2020-10-26T15:02:49Z", "author": {"login": "Nurkambay"}, "path": "server/src/test/java/com/broadcom/lsp/cobol/usecases/TestParagraphNotDefined.java", "diffHunk": "@@ -0,0 +1,41 @@\n+package com.broadcom.lsp.cobol.usecases;\n+\n+import org.eclipse.lsp4j.Diagnostic;\n+import org.eclipse.lsp4j.DiagnosticSeverity;\n+import org.eclipse.lsp4j.Position;\n+import org.eclipse.lsp4j.Range;\n+import org.junit.jupiter.api.Test;\n+\n+import java.util.List;\n+\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+\n+class TestParagraphNotDefined extends NegativeUseCase {\n+    private static final String TEXT =\n+            \"        IDENTIFICATION DIVISION.\\r\\n\"\n+                    + \"        PROGRAM-ID. test1.\\r\\n\"\n+                    + \"        DATA DIVISION.\\r\\n\"\n+                    + \"        WORKING-STORAGE SECTION.\\r\\n\"\n+                    + \"        PROCEDURE DIVISION.\\r\\n\"\n+                    + \"        PROGA.\\r\\n\"\n+                    + \"           PERFORM PRINT-DATA.\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTk1Njc2NQ=="}, "originalCommit": {"oid": "c0bc9fb78e99b46d792a1b2081b5c9b8d0f263f4"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIwNzg5MDA3OnYy", "diffSide": "RIGHT", "path": "server/src/test/java/com/broadcom/lsp/cobol/usecases/TestParagraphNotDefined.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQxNDozMToyNFrOHoSSsA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQxNTowMjoyOFrOHoT1LA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjAwNDc4NA==", "bodyText": "PROGA is a paragraph definition, you need to wrap it also\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                + \"        PROGA.\\r\\n\"\n          \n          \n            \n                                + \"           PERFORM PRINT-DATA.\";\n          \n          \n            \n                                + \"        {#*PROGA}.\\r\\n\"\n          \n          \n            \n                                + \"           PERFORM {#PRINT-DATA}.\";", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/579#discussion_r512004784", "createdAt": "2020-10-26T14:31:24Z", "author": {"login": "temanbrcom"}, "path": "server/src/test/java/com/broadcom/lsp/cobol/usecases/TestParagraphNotDefined.java", "diffHunk": "@@ -0,0 +1,41 @@\n+package com.broadcom.lsp.cobol.usecases;\n+\n+import org.eclipse.lsp4j.Diagnostic;\n+import org.eclipse.lsp4j.DiagnosticSeverity;\n+import org.eclipse.lsp4j.Position;\n+import org.eclipse.lsp4j.Range;\n+import org.junit.jupiter.api.Test;\n+\n+import java.util.List;\n+\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+\n+class TestParagraphNotDefined extends NegativeUseCase {\n+    private static final String TEXT =\n+            \"        IDENTIFICATION DIVISION.\\r\\n\"\n+                    + \"        PROGRAM-ID. test1.\\r\\n\"\n+                    + \"        DATA DIVISION.\\r\\n\"\n+                    + \"        WORKING-STORAGE SECTION.\\r\\n\"\n+                    + \"        PROCEDURE DIVISION.\\r\\n\"\n+                    + \"        PROGA.\\r\\n\"\n+                    + \"           PERFORM PRINT-DATA.\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8075fc942522fcf54c5f2c998e31aa8a23baebcc"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjAyOTk5Ng==", "bodyText": "Done", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/579#discussion_r512029996", "createdAt": "2020-10-26T15:02:28Z", "author": {"login": "Nurkambay"}, "path": "server/src/test/java/com/broadcom/lsp/cobol/usecases/TestParagraphNotDefined.java", "diffHunk": "@@ -0,0 +1,41 @@\n+package com.broadcom.lsp.cobol.usecases;\n+\n+import org.eclipse.lsp4j.Diagnostic;\n+import org.eclipse.lsp4j.DiagnosticSeverity;\n+import org.eclipse.lsp4j.Position;\n+import org.eclipse.lsp4j.Range;\n+import org.junit.jupiter.api.Test;\n+\n+import java.util.List;\n+\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+\n+class TestParagraphNotDefined extends NegativeUseCase {\n+    private static final String TEXT =\n+            \"        IDENTIFICATION DIVISION.\\r\\n\"\n+                    + \"        PROGRAM-ID. test1.\\r\\n\"\n+                    + \"        DATA DIVISION.\\r\\n\"\n+                    + \"        WORKING-STORAGE SECTION.\\r\\n\"\n+                    + \"        PROCEDURE DIVISION.\\r\\n\"\n+                    + \"        PROGA.\\r\\n\"\n+                    + \"           PERFORM PRINT-DATA.\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjAwNDc4NA=="}, "originalCommit": {"oid": "8075fc942522fcf54c5f2c998e31aa8a23baebcc"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIwNzg5NTgyOnYy", "diffSide": "RIGHT", "path": "server/src/test/java/com/broadcom/lsp/cobol/usecases/TestParagraphSectionDefined.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQxNDozMjoyNVrOHoSWGA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQxNTowMjoxOVrOHoT0vQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjAwNTY1Ng==", "bodyText": "Please, provide a description of what do you check here and what is the expected behavior", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/579#discussion_r512005656", "createdAt": "2020-10-26T14:32:25Z", "author": {"login": "temanbrcom"}, "path": "server/src/test/java/com/broadcom/lsp/cobol/usecases/TestParagraphSectionDefined.java", "diffHunk": "@@ -0,0 +1,27 @@\n+package com.broadcom.lsp.cobol.usecases;\n+\n+import com.broadcom.lsp.cobol.usecases.engine.UseCaseEngine;\n+import org.junit.jupiter.api.Test;\n+\n+import java.util.List;\n+import java.util.Map;\n+\n+class TestParagraphSectionDefined {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8075fc942522fcf54c5f2c998e31aa8a23baebcc"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjAyOTg4NQ==", "bodyText": "Done", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/579#discussion_r512029885", "createdAt": "2020-10-26T15:02:19Z", "author": {"login": "Nurkambay"}, "path": "server/src/test/java/com/broadcom/lsp/cobol/usecases/TestParagraphSectionDefined.java", "diffHunk": "@@ -0,0 +1,27 @@\n+package com.broadcom.lsp.cobol.usecases;\n+\n+import com.broadcom.lsp.cobol.usecases.engine.UseCaseEngine;\n+import org.junit.jupiter.api.Test;\n+\n+import java.util.List;\n+import java.util.Map;\n+\n+class TestParagraphSectionDefined {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjAwNTY1Ng=="}, "originalCommit": {"oid": "8075fc942522fcf54c5f2c998e31aa8a23baebcc"}, "originalPosition": 9}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIwNzg5NzU2OnYy", "diffSide": "RIGHT", "path": "server/src/test/java/com/broadcom/lsp/cobol/usecases/TestParagraphSectionDefined.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQxNDozMjo0NlrOHoSXHg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQxNTowMjoxMlrOHoT0Zg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjAwNTkxOA==", "bodyText": "Please, remove the empty lines", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/579#discussion_r512005918", "createdAt": "2020-10-26T14:32:46Z", "author": {"login": "temanbrcom"}, "path": "server/src/test/java/com/broadcom/lsp/cobol/usecases/TestParagraphSectionDefined.java", "diffHunk": "@@ -0,0 +1,27 @@\n+package com.broadcom.lsp.cobol.usecases;\n+\n+import com.broadcom.lsp.cobol.usecases.engine.UseCaseEngine;\n+import org.junit.jupiter.api.Test;\n+\n+import java.util.List;\n+import java.util.Map;\n+\n+class TestParagraphSectionDefined {\n+  private static final String TEXT =\n+\"       IDENTIFICATION DIVISION.\\n\" +\n+        \"          PROGRAM-ID. TEST1.\\n\" +\n+        \"          DATA DIVISION.\\n\" +\n+        \"          WORKING-STORAGE SECTION.\\n\" +\n+        \"    \\n\" +", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8075fc942522fcf54c5f2c998e31aa8a23baebcc"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjAyOTc5OA==", "bodyText": "Done", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/579#discussion_r512029798", "createdAt": "2020-10-26T15:02:12Z", "author": {"login": "Nurkambay"}, "path": "server/src/test/java/com/broadcom/lsp/cobol/usecases/TestParagraphSectionDefined.java", "diffHunk": "@@ -0,0 +1,27 @@\n+package com.broadcom.lsp.cobol.usecases;\n+\n+import com.broadcom.lsp.cobol.usecases.engine.UseCaseEngine;\n+import org.junit.jupiter.api.Test;\n+\n+import java.util.List;\n+import java.util.Map;\n+\n+class TestParagraphSectionDefined {\n+  private static final String TEXT =\n+\"       IDENTIFICATION DIVISION.\\n\" +\n+        \"          PROGRAM-ID. TEST1.\\n\" +\n+        \"          DATA DIVISION.\\n\" +\n+        \"          WORKING-STORAGE SECTION.\\n\" +\n+        \"    \\n\" +", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjAwNTkxOA=="}, "originalCommit": {"oid": "8075fc942522fcf54c5f2c998e31aa8a23baebcc"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIwNzkxODM1OnYy", "diffSide": "RIGHT", "path": "server/src/main/resources/resourceBundles/messages_en.properties", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQxNDozNjo0OVrOHoSj_A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQxNDozNjo0OVrOHoSj_A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjAwOTIxMg==", "bodyText": "Looks ok for me, but we should make sure with Scott what is the expected error message from the COBOL programmer point of view. It may be changed later on.", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/579#discussion_r512009212", "createdAt": "2020-10-26T14:36:49Z", "author": {"login": "temanbrcom"}, "path": "server/src/main/resources/resourceBundles/messages_en.properties", "diffHunk": "@@ -17,6 +17,7 @@ CobolVisitor.declarativeSameMsg=The following token cannot be on the same line a\n CobolVisitor.invalidDefMsg=Invalid definition for: %s\n CobolVisitor.misspelledWord=A misspelled word, maybe you want to put %s\n CobolVisitor.progIDIssueMsg=There is an issue with PROGRAM-ID paragraph\n+CobolVisitor.paragraphNotDefined=The following paragraph is not defined: %s", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8075fc942522fcf54c5f2c998e31aa8a23baebcc"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIwNzk0MjQ0OnYy", "diffSide": "RIGHT", "path": "server/src/main/java/com/broadcom/lsp/cobol/core/visitor/CobolVisitor.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQxNDo0MToyN1rOHoSyWw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQxNDo1ODozMFrOHoToOw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjAxMjg5MQ==", "bodyText": "Ok, will work for now. We will change the paragraph context to accept localities later on, altogether with the same late check for variables.", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/579#discussion_r512012891", "createdAt": "2020-10-26T14:41:27Z", "author": {"login": "temanbrcom"}, "path": "server/src/main/java/com/broadcom/lsp/cobol/core/visitor/CobolVisitor.java", "diffHunk": "@@ -55,19 +55,15 @@\n  */\n @Slf4j\n public class CobolVisitor extends CobolParserBaseVisitor<Class> {\n-  private static final String AREA_A_WARNING_MSG = \"The following token must start in Area A: \";\n-  private static final String AREA_B_WARNING_MSG = \"The following token must start in Area B: \";\n-  private static final String IDENTICAL_PROGRAM_MSG =\n-      \"Program-name must be identical to the program-name of the corresponding PROGRAM-ID paragraph: \";\n   private static final String DECLARATIVE_SAME_MSG =\n       \"The following token cannot be on the same line as a DECLARATIVE token: \";\n-  private static final String INVALID_DEF_MSG = \"Invalid definition for: \";\n-  private static final String MISSPELLED_WORD = \"A misspelled word, maybe you want to put \";\n-  private static final String PROGRAM_ID_ISSUE_MSG = \"There is an issue with PROGRAM-ID paragraph\";\n \n-  @Getter private List<SyntaxError> errors = new ArrayList<>();\n+  private List<SyntaxError> errors = new ArrayList<>();\n \n   private SubContext<String> paragraphs = new NamedSubContext();\n+  private Multimap<String, Locality> paragraphUsageLocalities = HashMultimap.create();\n+  private Multimap<String, Locality> paragraphDefinitionLocalities = HashMultimap.create();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8075fc942522fcf54c5f2c998e31aa8a23baebcc"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjAyNjY4Mw==", "bodyText": "Yep. Better to use Locality instead of Location internally and only for publishing to the client convert map values to Location.", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/579#discussion_r512026683", "createdAt": "2020-10-26T14:58:30Z", "author": {"login": "Nurkambay"}, "path": "server/src/main/java/com/broadcom/lsp/cobol/core/visitor/CobolVisitor.java", "diffHunk": "@@ -55,19 +55,15 @@\n  */\n @Slf4j\n public class CobolVisitor extends CobolParserBaseVisitor<Class> {\n-  private static final String AREA_A_WARNING_MSG = \"The following token must start in Area A: \";\n-  private static final String AREA_B_WARNING_MSG = \"The following token must start in Area B: \";\n-  private static final String IDENTICAL_PROGRAM_MSG =\n-      \"Program-name must be identical to the program-name of the corresponding PROGRAM-ID paragraph: \";\n   private static final String DECLARATIVE_SAME_MSG =\n       \"The following token cannot be on the same line as a DECLARATIVE token: \";\n-  private static final String INVALID_DEF_MSG = \"Invalid definition for: \";\n-  private static final String MISSPELLED_WORD = \"A misspelled word, maybe you want to put \";\n-  private static final String PROGRAM_ID_ISSUE_MSG = \"There is an issue with PROGRAM-ID paragraph\";\n \n-  @Getter private List<SyntaxError> errors = new ArrayList<>();\n+  private List<SyntaxError> errors = new ArrayList<>();\n \n   private SubContext<String> paragraphs = new NamedSubContext();\n+  private Multimap<String, Locality> paragraphUsageLocalities = HashMultimap.create();\n+  private Multimap<String, Locality> paragraphDefinitionLocalities = HashMultimap.create();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjAxMjg5MQ=="}, "originalCommit": {"oid": "8075fc942522fcf54c5f2c998e31aa8a23baebcc"}, "originalPosition": 43}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIwNzk1OTc4OnYy", "diffSide": "RIGHT", "path": "server/src/main/java/com/broadcom/lsp/cobol/core/visitor/CobolVisitor.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQxNDo0NDo1N1rOHoS9Kg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQxNDo1ODo1MFrOHoTpfQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjAxNTY1OA==", "bodyText": "A section is not a paragraph, it should not be consumed here", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/579#discussion_r512015658", "createdAt": "2020-10-26T14:44:57Z", "author": {"login": "temanbrcom"}, "path": "server/src/main/java/com/broadcom/lsp/cobol/core/visitor/CobolVisitor.java", "diffHunk": "@@ -190,6 +194,10 @@ public Class visitProgramUnit(ProgramUnitContext ctx) {\n   public Class visitProcedureSection(ProcedureSectionContext ctx) {\n     throwWarning(ctx.getStart());\n     outlineTreeBuilder.addNode(ctx.getStart().getText(), NodeType.PROCEDURE_SECTION, ctx);\n+\n+    String name = ctx.getStart().getText().toUpperCase();\n+    getLocality(ctx.getStart())\n+        .ifPresent(locality -> paragraphDefinitionLocalities.put(name, locality));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8075fc942522fcf54c5f2c998e31aa8a23baebcc"}, "originalPosition": 70}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjAyNzAwNQ==", "bodyText": "Discussed in the chat. Closed.", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/579#discussion_r512027005", "createdAt": "2020-10-26T14:58:50Z", "author": {"login": "Nurkambay"}, "path": "server/src/main/java/com/broadcom/lsp/cobol/core/visitor/CobolVisitor.java", "diffHunk": "@@ -190,6 +194,10 @@ public Class visitProgramUnit(ProgramUnitContext ctx) {\n   public Class visitProcedureSection(ProcedureSectionContext ctx) {\n     throwWarning(ctx.getStart());\n     outlineTreeBuilder.addNode(ctx.getStart().getText(), NodeType.PROCEDURE_SECTION, ctx);\n+\n+    String name = ctx.getStart().getText().toUpperCase();\n+    getLocality(ctx.getStart())\n+        .ifPresent(locality -> paragraphDefinitionLocalities.put(name, locality));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjAxNTY1OA=="}, "originalCommit": {"oid": "8075fc942522fcf54c5f2c998e31aa8a23baebcc"}, "originalPosition": 70}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3808, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}