{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk5NDk2MDE2", "number": 265, "title": "Patch Nested Copybooks", "bodyText": "There were couple of files that I forgot to merge in development addressing some requirements from the code reviewers in the PR #254 (typo in method name, simplify logic and so on).\nTested on VSC/Che works as expected.\nSorry for the extra-review!", "createdAt": "2020-04-06T09:13:00Z", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/265", "merged": true, "mergeCommit": {"oid": "89f27faced446c4d7edc3dad9854317bc27b22c9"}, "closed": true, "closedAt": "2020-04-07T12:19:34Z", "author": {"login": "zacanbrcom"}, "timelineItems": {"totalCount": 18, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcOMokuAH2gAyMzk5NDk2MDE2OmM0Yjc1ZWFmMjlhNjk2M2E2YmYzYTY4YTJkZDQ1MDc0MGNlMWRiZWQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcVQ9t1gFqTM4ODk5Njc1MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c4b75eaf29a6963a6bf3a68a2dd450740ce1dbed", "author": {"user": {"login": "zacanbrcom", "name": "Andrea Zaccaro"}}, "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/c4b75eaf29a6963a6bf3a68a2dd450740ce1dbed", "committedDate": "2020-03-16T11:44:12Z", "message": "Move responsability on DependencyService and adjust unit test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "708562617e6ed5e71f4053455f01bb7f2d99b9de", "author": {"user": {"login": "zacanbrcom", "name": "Andrea Zaccaro"}}, "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/708562617e6ed5e71f4053455f01bb7f2d99b9de", "committedDate": "2020-03-20T09:00:52Z", "message": "Refactor FSConfig file"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1955e9620852abcce2b851a85aeba80517c038bf", "author": {"user": {"login": "zacanbrcom", "name": "Andrea Zaccaro"}}, "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/1955e9620852abcce2b851a85aeba80517c038bf", "committedDate": "2020-03-20T10:45:07Z", "message": "update unit test and concrete implementation in CopybookDependencyServiceImpl"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "335d28357e703ab0ebd3b66d817089c9c24a184d", "author": {"user": {"login": "zacanbrcom", "name": "Andrea Zaccaro"}}, "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/335d28357e703ab0ebd3b66d817089c9c24a184d", "committedDate": "2020-03-24T08:29:03Z", "message": "Fix lombok issue - need deep investigation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2e0234e0afa9169c93f134b0383b64348fb100ca", "author": {"user": {"login": "zacanbrcom", "name": "Andrea Zaccaro"}}, "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/2e0234e0afa9169c93f134b0383b64348fb100ca", "committedDate": "2020-03-26T07:55:38Z", "message": "Add e2e test involving preprocessor and copybook service"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2b9c7edf64bd6732bf0e5246c9ad9150e46ae3fd", "author": {"user": {"login": "zacanbrcom", "name": "Andrea Zaccaro"}}, "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/2b9c7edf64bd6732bf0e5246c9ad9150e46ae3fd", "committedDate": "2020-03-26T13:38:30Z", "message": "Remove commented code after unit test refactoring"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2846fdcc3f6b513d05bef7ba45aab93e404dc9c6", "author": {"user": {"login": "zacanbrcom", "name": "Andrea Zaccaro"}}, "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/2846fdcc3f6b513d05bef7ba45aab93e404dc9c6", "committedDate": "2020-03-26T15:14:51Z", "message": "Update Changelog"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9cb39ef8ac7bd1371edaa69cb4ca142edc7700a9", "author": {"user": {"login": "zacanbrcom", "name": "Andrea Zaccaro"}}, "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/9cb39ef8ac7bd1371edaa69cb4ca142edc7700a9", "committedDate": "2020-03-31T07:35:44Z", "message": "Merge remote-tracking branch 'remotes/origin/development' into 251_AddNestedCpyInDep\n\n# Conflicts:\n#\tCHANGELOG.md\n#\tclients/cobol-lsp-vscode-extension/CHANGELOG.md\n#\tcom.ca.lsp.cobol/lsp-service-cobol/src/main/java/com/ca/lsp/cobol/service/CopybookServiceImpl.java\n#\tcom.ca.lsp.cobol/lsp-service-cobol/src/main/java/com/ca/lsp/cobol/service/delegates/dependency/CopybookDependencyServiceImpl.java\n#\tcom.ca.lsp.cobol/lsp-service-cobol/src/main/java/com/ca/lsp/cobol/service/utils/FileSystemUtils.java\n#\tcom.ca.lsp.cobol/lsp-service-cobol/src/test/java/com/ca/lsp/cobol/FileSystemConfiguration.java\n#\tcom.ca.lsp.cobol/lsp-service-cobol/src/test/java/com/ca/lsp/cobol/service/DependencyServiceTest.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8f624c3754e2964eeb0a05fadc8bbb21d6c59cdb", "author": {"user": {"login": "zacanbrcom", "name": "Andrea Zaccaro"}}, "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/8f624c3754e2964eeb0a05fadc8bbb21d6c59cdb", "committedDate": "2020-04-01T08:02:54Z", "message": "Address request of change"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2a3bbeb6ee3d1f277b59e009d3e090edbef6c930", "author": {"user": {"login": "zacanbrcom", "name": "Andrea Zaccaro"}}, "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/2a3bbeb6ee3d1f277b59e009d3e090edbef6c930", "committedDate": "2020-04-01T11:36:27Z", "message": "Refactor CopybookDependencyServiceImpl.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3f7c9367178af65605d1c59635a5d777c1b43a5e", "author": {"user": {"login": "zacanbrcom", "name": "Andrea Zaccaro"}}, "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/3f7c9367178af65605d1c59635a5d777c1b43a5e", "committedDate": "2020-04-01T11:47:18Z", "message": "Polish CopybookDependencyServiceImpl & FileSystemUtils.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d7052edcd559b47a5c154597b449d469d5ae2cbf", "author": {"user": {"login": "zacanbrcom", "name": "Andrea Zaccaro"}}, "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/d7052edcd559b47a5c154597b449d469d5ae2cbf", "committedDate": "2020-04-01T12:50:53Z", "message": "Fix extra chars in javadoc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "795d4728b44d2a7f039d0e6e67e36eab727d1af8", "author": {"user": {"login": "zacanbrcom", "name": "Andrea Zaccaro"}}, "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/795d4728b44d2a7f039d0e6e67e36eab727d1af8", "committedDate": "2020-04-01T12:53:07Z", "message": "Cleanup FileSystemUtils.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "77cf43a78dfb964480988044f329a86fb4551143", "author": {"user": {"login": "zacanbrcom", "name": "Andrea Zaccaro"}}, "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/77cf43a78dfb964480988044f329a86fb4551143", "committedDate": "2020-04-06T09:17:30Z", "message": "Fix code review requests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg4OTYzODQ5", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/265#pullrequestreview-388963849", "createdAt": "2020-04-07T09:56:56Z", "commit": {"oid": "77cf43a78dfb964480988044f329a86fb4551143"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QwOTo1Njo1N1rOGB8CZg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QxMDowMDo0MlrOGB8LbQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDY4NTQxNA==", "bodyText": "This name describes the logic of the method, but not the expected result. It would be better to use something like shouldUpdateDependecies() or any more descriptive name. But it is not obligatory.\nThe real question here is exposing the internal implementation by using a data bus event in the interface. I would prefer to hide it if it is possible", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/265#discussion_r404685414", "createdAt": "2020-04-07T09:56:57Z", "author": {"login": "temanbrcom"}, "path": "com.ca.lsp.cobol/lsp-service-cobol/src/main/java/com/ca/lsp/cobol/service/delegates/dependency/CopybookDependencyService.java", "diffHunk": "@@ -24,11 +26,14 @@\n  * management\n  */\n public interface CopybookDependencyService {\n+\n+  void addCopybookInDepFile(RequiredCopybookEvent event, String requiredCopybookName);\n+\n+  boolean isFileInDidOpen(RequiredCopybookEvent event);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "77cf43a78dfb964480988044f329a86fb4551143"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDY4NzcyNQ==", "bodyText": "Why do you need to sort it?", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/265#discussion_r404687725", "createdAt": "2020-04-07T10:00:42Z", "author": {"login": "temanbrcom"}, "path": "com.ca.lsp.cobol/lsp-service-cobol/src/test/java/com/ca/lsp/cobol/FileSystemConfiguration.java", "diffHunk": "@@ -85,36 +92,35 @@\n    * the filesystem service capabilities using the physical filesystem\n    */\n   @Before\n-  public void buildFS() {\n-    intializeSettings();\n+  public void buildTempFilesystem() {\n+    intializeSettingsWithSomeContent();\n+\n     createWorkspaceFolderStructure();\n-    createCopybookStructure();\n-    createDependencyFileStructure();\n+    createCopybookFolders();\n+    createDependencyFolder();\n \n-    // populate copybook folder and dependency file with some content\n     createCopybookFiles();\n+    createNestedCopybooks();\n     createDependencyFile();\n   }\n \n   @After\n-  public void cleanupTempFolder() {\n+  public void cleanupTempFilesystem() {\n     try {\n-      Files.walk(getWorkspaceFolderPath())\n-          .sorted(Comparator.reverseOrder())\n-          .map(Path::toFile)\n-          .forEach(File::delete);\n+      deleteFolders();\n     } catch (IOException e) {\n       log.error(e.getMessage());\n     }\n   }\n \n-  /**\n-   * This method define the steps necessary to emulate the json settings provided by the user in the\n-   * settings.json\n-   */\n-  private void intializeSettings() {\n-    // SettingsProvider settingsProvider = new SettingsProvider();\n+  private void deleteFolders() throws IOException {\n+    Files.walk(getWorkspaceFolderPath())\n+        .sorted(Comparator.reverseOrder())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "77cf43a78dfb964480988044f329a86fb4551143"}, "originalPosition": 80}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "842a925d0249c7a3d5d0e08ab4c99b415dc47d47", "author": {"user": {"login": "zacanbrcom", "name": "Andrea Zaccaro"}}, "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/842a925d0249c7a3d5d0e08ab4c99b415dc47d47", "committedDate": "2020-04-07T10:25:51Z", "message": "Merge branch 'development' into PATCH_NST_CPY\n\n# Conflicts:\n#\tcom.ca.lsp.cobol/lsp-service-cobol/src/main/java/com/ca/lsp/cobol/service/CopybookServiceImpl.java\n#\tcom.ca.lsp.cobol/lsp-service-cobol/src/main/java/com/ca/lsp/cobol/service/delegates/dependency/CopybookDependencyServiceImpl.java\n#\tcom.ca.lsp.cobol/lsp-service-cobol/src/main/java/com/ca/lsp/cobol/service/utils/FileSystemUtils.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "70d777b9c7e0baaa109296665ef59c8bbb570017", "author": {"user": {"login": "zacanbrcom", "name": "Andrea Zaccaro"}}, "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/70d777b9c7e0baaa109296665ef59c8bbb570017", "committedDate": "2020-04-07T10:30:38Z", "message": "Address merge conflict"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg4OTk2NzUw", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/265#pullrequestreview-388996750", "createdAt": "2020-04-07T10:44:23Z", "commit": {"oid": "70d777b9c7e0baaa109296665ef59c8bbb570017"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1061, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}