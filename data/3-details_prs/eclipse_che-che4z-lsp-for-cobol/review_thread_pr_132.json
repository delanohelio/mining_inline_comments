{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYxMDYxMDc3", "number": 132, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMFQwOTozNjowMFrODXGPtg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMFQxNDoxNzoyNlrODXKk6Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI1NTQ2MTY2OnYy", "diffSide": "LEFT", "path": "com.ca.lsp.cobol/lsp-core-cobol-parser/src/main/java/com/ca/lsp/core/cobol/model/SyntaxError.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMFQwOTozNjowMFrOFcOqrA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMFQwOTozNjowMFrOFcOqrA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTE0NDc0OA==", "bodyText": "ruleStack can be a very good part of our new mapping implementation idea", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/132#discussion_r365144748", "createdAt": "2020-01-10T09:36:00Z", "author": {"login": "sergiuilie"}, "path": "com.ca.lsp.cobol/lsp-core-cobol-parser/src/main/java/com/ca/lsp/core/cobol/model/SyntaxError.java", "diffHunk": "@@ -19,22 +19,15 @@\n import lombok.Builder;\n import lombok.Value;\n \n-import java.util.List;\n-\n @Value\n public class SyntaxError {\n   private final Position position;\n-  private final List<String> ruleStack;\n-  private final int type;\n   private final String suggestion;\n   private final int severity;\n \n   @Builder(builderMethodName = \"syntaxerror\")\n-  public SyntaxError(\n-      Position position, List<String> ruleStack, int type, String suggestion, int severity) {\n+  public SyntaxError(Position position, String suggestion, int severity) {\n     this.position = position;\n-    this.ruleStack = ruleStack;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "32542bda7aa9f6380a34d16f414910d9cd09b128"}, "originalPosition": 19}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI1NjE3MTI5OnYy", "diffSide": "RIGHT", "path": "com.ca.lsp.cobol/lsp-core-cobol-parser/src/main/java/com/ca/lsp/core/cobol/engine/CobolLanguageEngine.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMFQxNDoxNzoyNlrOFcVTHA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMFQxNDoxNzoyNlrOFcVTHA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTI1MzQwNA==", "bodyText": "should be final", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/132#discussion_r365253404", "createdAt": "2020-01-10T14:17:26Z", "author": {"login": "sergiuilie"}, "path": "com.ca.lsp.cobol/lsp-core-cobol-parser/src/main/java/com/ca/lsp/core/cobol/engine/CobolLanguageEngine.java", "diffHunk": "@@ -45,19 +45,22 @@ public CobolLanguageEngine(CobolSourceFormat sourceFormat) {\n     this.sourceFormat = sourceFormat;\n   }\n \n-  public ProcessingResult run(String in) {\n-    List<SyntaxError> errors = new CopyOnWriteArrayList<>();\n+  public ResultWithErrors<SemanticContext> run(String in) {\n+\n     CobolPreprocessorImpl preprocessor = new CobolPreprocessorImpl();\n-    preprocessor.setListener(new PreprocessorListener(errors));\n \n-    final PreprocessedInput preProcessedInput = preprocessor.process(in, sourceFormat);\n-    final CobolLexer lexer = new CobolLexer(CharStreams.fromString(preProcessedInput.getInput()));\n+    ResultWithErrors<PreprocessedInput> preProcessedInput = preprocessor.process(in, sourceFormat);\n+\n+    CobolLexer lexer =\n+        new CobolLexer(CharStreams.fromString(preProcessedInput.getResult().getInput()));\n+\n+    List<SyntaxError> errors = new ArrayList<>(preProcessedInput.getErrors());\n \n     lexer.removeErrorListeners();\n     lexer.addErrorListener(new VerboseListener(errors));\n \n-    final CommonTokenStream tokens = new CommonTokenStream(lexer);\n-    final CobolParser parser = new CobolParser(tokens);\n+    CommonTokenStream tokens = new CommonTokenStream(lexer);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1e6d0e8fd736b7d5a03029aad239efb09c50d777"}, "originalPosition": 53}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4086, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}