{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg1NDU1MjIz", "number": 229, "title": "Ext refactoring", "bodyText": "This is not the final version, but. I want to merge it into development.\nThis PR contains Quick Fix for missing copybooks on the extension site.", "createdAt": "2020-03-09T08:48:31Z", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/229", "merged": true, "mergeCommit": {"oid": "615c7e616b99664c6cf5a40349e183d0fbef19f8"}, "closed": true, "closedAt": "2020-03-11T10:23:24Z", "author": {"login": "ishche"}, "timelineItems": {"totalCount": 28, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcKURO9gH2gAyMzg1NDU1MjIzOjJiM2UxMDhhNWMyZWFkOWIxMzg4NDJjOTQwZmIyYjIzMzQ1YzMxMjQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcMkd10gFqTM3MjYzMDg4Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2b3e108a5c2ead9b138842c940fb2b23345c3124", "author": {"user": {"login": "ishche", "name": "Yuriy Shekochihin"}}, "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/2b3e108a5c2ead9b138842c940fb2b23345c3124", "committedDate": "2020-03-04T10:22:15Z", "message": "Get 100% on download queue"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0f20abce2830e2a8508a250da1df86fbf31ec433", "author": {"user": {"login": "ishche", "name": "Yuriy Shekochihin"}}, "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/0f20abce2830e2a8508a250da1df86fbf31ec433", "committedDate": "2020-03-04T10:33:02Z", "message": "Refactor JavaCheck service"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "30fe1cc8bcbf1d61ce0cf3d0aaee15d065ced3b4", "author": {"user": {"login": "ishche", "name": "Yuriy Shekochihin"}}, "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/30fe1cc8bcbf1d61ce0cf3d0aaee15d065ced3b4", "committedDate": "2020-03-04T16:29:47Z", "message": "PathUtils tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0420bfef143edc9ccc63358aafd7bd0a475c04c2", "author": {"user": {"login": "ishche", "name": "Yuriy Shekochihin"}}, "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/0420bfef143edc9ccc63358aafd7bd0a475c04c2", "committedDate": "2020-03-05T11:13:49Z", "message": "Small refactoring and tests for Profile service."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fbde7a7a5c34d802d32eefcc89f17ba5258a4453", "author": {"user": {"login": "ishche", "name": "Yuriy Shekochihin"}}, "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/fbde7a7a5c34d802d32eefcc89f17ba5258a4453", "committedDate": "2020-03-05T11:16:59Z", "message": "Merge branch 'development' into client-unittests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "793062bfcecff938f1bca9435ec5b8d7b0c26c81", "author": {"user": {"login": "ishche", "name": "Yuriy Shekochihin"}}, "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/793062bfcecff938f1bca9435ec5b8d7b0c26c81", "committedDate": "2020-03-05T15:27:58Z", "message": "Fix profile service"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b3c97a4bccb55d49ed3bb18f9982261542994347", "author": {"user": {"login": "ishche", "name": "Yuriy Shekochihin"}}, "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/b3c97a4bccb55d49ed3bb18f9982261542994347", "committedDate": "2020-03-06T11:12:52Z", "message": "Extract Language Client logic to service"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ea97a21d5b3111a9cd7da993befcdb0ecb4f8b61", "author": {"user": {"login": "ishche", "name": "Yuriy Shekochihin"}}, "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/ea97a21d5b3111a9cd7da993befcdb0ecb4f8b61", "committedDate": "2020-03-09T08:13:54Z", "message": "Extrack error handling to CopybookResolver"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "86421bc6bdcf6e843e243e7edd6592691123070c", "author": {"user": {"login": "ishche", "name": "Yuriy Shekochihin"}}, "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/86421bc6bdcf6e843e243e7edd6592691123070c", "committedDate": "2020-03-09T08:15:28Z", "message": "Merge branch 'development' into client-unittests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1fb79a4a7334b0def7db4a804e21792e346fb12a", "author": {"user": {"login": "ishche", "name": "Yuriy Shekochihin"}}, "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/1fb79a4a7334b0def7db4a804e21792e346fb12a", "committedDate": "2020-03-09T08:42:50Z", "message": "Add quickfix for missing copybook on client site."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcwOTk2MTI3", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/229#pullrequestreview-370996127", "createdAt": "2020-03-09T08:56:01Z", "commit": {"oid": "1fb79a4a7334b0def7db4a804e21792e346fb12a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOVQwODo1NjowMlrOFze6Kw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOVQwODo1NjowMlrOFze6Kw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTUyODEwNw==", "bodyText": "What means that? Can we remove it?", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/229#discussion_r389528107", "createdAt": "2020-03-09T08:56:02Z", "author": {"login": "zacanbrcom"}, "path": "clients/cobol-lsp-vscode-extension/src/CopybooksDownloader.ts", "diffHunk": "@@ -14,81 +14,64 @@\n \n import * as fs from \"fs\";\n import * as vscode from \"vscode\";\n-import { SETTINGS_SECTION } from \"./constants\";\n-import { CopybookProfile, DownloadQueue } from \"./DownloadQueue\";\n-import { checkWorkspace, createCopybookPath, createDatasetPath } from \"./PathUtils\";\n+import { DEPENDENCIES_FOLDER, SETTINGS_SECTION } from \"./constants\";\n import { ProfileService } from \"./ProfileService\";\n+import { DependenciesDesc, loadDepFile } from \"./services/DependencyService\";\n+import { CopybookProfile, DownloadQueue } from \"./services/DownloadQueue\";\n+import { checkWorkspace, createCopybookPath, createDatasetPath } from \"./services/PathUtils\";\n import { ZoweApi } from \"./ZoweApi\";\n+import { CopybookResolver } from \"./services/CopybookResolver\";\n \n export class CopybooksDownloader implements vscode.Disposable {\n     private queue: DownloadQueue = new DownloadQueue();\n \n     public constructor(\n+        private resolver: CopybookResolver,\n         private zoweApi: ZoweApi,\n         private profileService: ProfileService) { }\n \n     public async redownloadDependencies(message: string = \"Redownload dependencies requested.\") {\n-        (await vscode.workspace.findFiles(\".cobdeps/**/*.dep\")).forEach(dep => {\n-            const errFile = dep.fsPath.substr(0, dep.fsPath.length - 4) + \".err\";\n-            if (fs.existsSync(errFile)) {\n-                try {\n-                    fs.unlinkSync(errFile);\n-                } catch (error) {\n-                    vscode.window.showErrorMessage(error.toString());\n-                }\n-            }\n+        (await vscode.workspace.findFiles(DEPENDENCIES_FOLDER + \"/**/*.dep\")).forEach(dep => {\n             this.downloadDependencies(dep, message);\n         });\n     }\n     /**\n      * @param copybooks array of copybooks names to download\n      */\n-    public async downloadDependencies(uri: vscode.Uri, message: string = \"\"): Promise<void> {\n+    async downloadCopybooks(copybooks: string[], programName: string): Promise<void> {\n+        // TODO do it right", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1fb79a4a7334b0def7db4a804e21792e346fb12a"}, "originalPosition": 42}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcxMDA3NzY4", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/229#pullrequestreview-371007768", "createdAt": "2020-03-09T09:15:46Z", "commit": {"oid": "1fb79a4a7334b0def7db4a804e21792e346fb12a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOVQwOToxNTo0N1rOFzfd8A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOVQwOToxNTo0N1rOFzfd8A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTUzNzI2NA==", "bodyText": "Can we regroup those three assignment in a BeforeEach?\n    beforeEach(() => {\n        vscode.workspace.workspaceFolders = [{uri: {fsPath}} as any];\n      });", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/229#discussion_r389537264", "createdAt": "2020-03-09T09:15:47Z", "author": {"login": "zacanbrcom"}, "path": "clients/cobol-lsp-vscode-extension/src/__tests__/PathUtilsTest.ts", "diffHunk": "@@ -0,0 +1,37 @@\n+/*\n+ * Copyright (c) 2020 Broadcom.\n+ * The term \"Broadcom\" refers to Broadcom Inc. and/or its subsidiaries.\n+ *\n+ * This program and the accompanying materials are made\n+ * available under the terms of the Eclipse Public License 2.0\n+ * which is available at https://www.eclipse.org/legal/epl-2.0/\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *\n+ * Contributors:\n+ *   Broadcom, Inc. - initial API and implementation\n+ */\n+import * as vscode from \"vscode\";\n+import { checkWorkspace, createCopybookPath, createDatasetPath } from \"../services/PathUtils\";\n+\n+describe(\"PathUtils tests\", () => {\n+    const fsPath = \"/projects\";\n+    const profile = \"profile\";\n+    const dataset = \"dataset\";\n+\n+    it(\"creates copybook path\", () => {\n+        vscode.workspace.workspaceFolders = [{uri: {fsPath}} as any];", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1fb79a4a7334b0def7db4a804e21792e346fb12a"}, "originalPosition": 23}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcxMDExMzYw", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/229#pullrequestreview-371011360", "createdAt": "2020-03-09T09:21:37Z", "commit": {"oid": "1fb79a4a7334b0def7db4a804e21792e346fb12a"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOVQwOToyMTozN1rOFzfpKQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOVQwOToyMTozN1rOFzfpKQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTU0MDEzNw==", "bodyText": "test failing because of the wrong path expected due to the OS", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/229#discussion_r389540137", "createdAt": "2020-03-09T09:21:37Z", "author": {"login": "sergiuilie"}, "path": "clients/cobol-lsp-vscode-extension/src/__tests__/PathUtilsTest.ts", "diffHunk": "@@ -0,0 +1,37 @@\n+/*", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1fb79a4a7334b0def7db4a804e21792e346fb12a"}, "originalPosition": 1}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcxMDE4NDc0", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/229#pullrequestreview-371018474", "createdAt": "2020-03-09T09:32:34Z", "commit": {"oid": "1fb79a4a7334b0def7db4a804e21792e346fb12a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOVQwOTozMjozNFrOFzf_sg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOVQwOTozMjozNFrOFzf_sg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTU0NTkwNg==", "bodyText": "Ideally we should take care of the cognitive complexity.\nIf there is no space at moment to fix that please file an issue on GH to tackle it later on with a specific fix.", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/229#discussion_r389545906", "createdAt": "2020-03-09T09:32:34Z", "author": {"login": "zacanbrcom"}, "path": "clients/cobol-lsp-vscode-extension/src/CopybooksDownloader.ts", "diffHunk": "@@ -14,81 +14,64 @@\n \n import * as fs from \"fs\";\n import * as vscode from \"vscode\";\n-import { SETTINGS_SECTION } from \"./constants\";\n-import { CopybookProfile, DownloadQueue } from \"./DownloadQueue\";\n-import { checkWorkspace, createCopybookPath, createDatasetPath } from \"./PathUtils\";\n+import { DEPENDENCIES_FOLDER, SETTINGS_SECTION } from \"./constants\";\n import { ProfileService } from \"./ProfileService\";\n+import { DependenciesDesc, loadDepFile } from \"./services/DependencyService\";\n+import { CopybookProfile, DownloadQueue } from \"./services/DownloadQueue\";\n+import { checkWorkspace, createCopybookPath, createDatasetPath } from \"./services/PathUtils\";\n import { ZoweApi } from \"./ZoweApi\";\n+import { CopybookResolver } from \"./services/CopybookResolver\";\n \n export class CopybooksDownloader implements vscode.Disposable {\n     private queue: DownloadQueue = new DownloadQueue();\n \n     public constructor(\n+        private resolver: CopybookResolver,\n         private zoweApi: ZoweApi,\n         private profileService: ProfileService) { }\n \n     public async redownloadDependencies(message: string = \"Redownload dependencies requested.\") {\n-        (await vscode.workspace.findFiles(\".cobdeps/**/*.dep\")).forEach(dep => {\n-            const errFile = dep.fsPath.substr(0, dep.fsPath.length - 4) + \".err\";\n-            if (fs.existsSync(errFile)) {\n-                try {\n-                    fs.unlinkSync(errFile);\n-                } catch (error) {\n-                    vscode.window.showErrorMessage(error.toString());\n-                }\n-            }\n+        (await vscode.workspace.findFiles(DEPENDENCIES_FOLDER + \"/**/*.dep\")).forEach(dep => {\n             this.downloadDependencies(dep, message);\n         });\n     }\n     /**\n      * @param copybooks array of copybooks names to download\n      */\n-    public async downloadDependencies(uri: vscode.Uri, message: string = \"\"): Promise<void> {\n+    async downloadCopybooks(copybooks: string[], programName: string): Promise<void> {\n+        // TODO do it right\n+        const profile: string = await this.profileService.getProfile(programName);\n+        if (!profile) {\n+            return;\n+        }\n+        copybooks.forEach(copybook => this.queue.push(copybook, profile));\n+    }\n+\n+    public async downloadDependencies(depFileUri: vscode.Uri, message: string = \"\"): Promise<void> {\n         if (!checkWorkspace()) {\n             return;\n         }\n-        const profile: string = await this.profileService.getProfile(uri);\n+        const depDesc: DependenciesDesc = loadDepFile(depFileUri);\n+        const profile: string = await this.profileService.getProfile(depDesc.programName);\n         if (!profile) {\n             return;\n         }\n \n-        const missingCopybooks: string[] = await this.listMissingCopybooks(uri, profile);\n+        const missingCopybooks: string[] = await this.listMissingCopybooks(depDesc.copybooks, profile);\n \n         if (!message.length) {\n             missingCopybooks.forEach(copybook => this.queue.push(copybook, profile));\n         } else if (missingCopybooks.length > 0) {\n-            // TODO: refactor: move to external class\n-            const downloadCopybookAction = \"Download Copybooks\";\n-            const actionDatasets = \"Edit Datasets\";\n-            const actionProfile = \"Change zowe profile\";\n-            const actions = [];\n-            if ((await this.listPathDatasets()).length > 0) {\n-                actions.push(downloadCopybookAction);\n-            }\n-            if (message !== \"Configuration was updated\") {\n-                actions.push(actionDatasets);\n-                actions.push(actionProfile);\n-            }\n-            const action: string = await vscode.window.showInformationMessage(\n-                message,\n-                ...actions);\n-            if (action === downloadCopybookAction) {\n-                missingCopybooks.forEach(copybook => this.queue.push(copybook, profile));\n-            }\n-            if (action === actionDatasets) {\n-                vscode.commands.executeCommand(\"workbench.action.openSettings\",\n-                    \"broadcom-cobol-lsp.cpy-manager.paths\");\n-            }\n-            if (action === actionProfile) {\n-                vscode.commands.executeCommand(\"workbench.action.openSettings\",\n-                    \"broadcom-cobol-lsp.cpy-manager.profiles\");\n-            }\n+            this.resolver.fixMissingDownloads(message, missingCopybooks, profile, {\n+                hasPaths: (await this.listPathDatasets()).length > 0,\n+            });\n         }\n \n     }\n \n     // tslint:disable-next-line: cognitive-complexity\n     public async start() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1fb79a4a7334b0def7db4a804e21792e346fb12a"}, "originalPosition": 101}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcxMDE5MTIx", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/229#pullrequestreview-371019121", "createdAt": "2020-03-09T09:33:40Z", "commit": {"oid": "1fb79a4a7334b0def7db4a804e21792e346fb12a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOVQwOTozMzo0MFrOFzgB0Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOVQwOTozMzo0MFrOFzgB0Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTU0NjQ0OQ==", "bodyText": "pls remove this extra line :D", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/229#discussion_r389546449", "createdAt": "2020-03-09T09:33:40Z", "author": {"login": "zacanbrcom"}, "path": "clients/cobol-lsp-vscode-extension/src/CopybooksDownloader.ts", "diffHunk": "@@ -135,27 +118,14 @@ export class CopybooksDownloader implements vscode.Disposable {\n     public dispose() {\n         this.queue.stop();\n     }\n-    public async processDownloadError(title: string) {\n-        const actionDatasets = \"Edit Datasets\";\n-        const actionProfile = \"Change zowe profile\";\n-        const action = await vscode.window.showErrorMessage(title,\n-            actionDatasets, actionProfile);\n-        if (action === actionDatasets) {\n-            vscode.commands.executeCommand(\"workbench.action.openSettings\",\n-                \"broadcom-cobol-lsp.cpy-manager.paths\");\n-        }\n-        if (action === actionProfile) {\n-            vscode.commands.executeCommand(\"workbench.action.openSettings\",\n-                \"broadcom-cobol-lsp.cpy-manager.profiles\");\n-        }\n-    }\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1fb79a4a7334b0def7db4a804e21792e346fb12a"}, "originalPosition": 142}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcxMDA4MTIy", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/229#pullrequestreview-371008122", "createdAt": "2020-03-09T09:16:20Z", "commit": {"oid": "1fb79a4a7334b0def7db4a804e21792e346fb12a"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOVQwOToxNjoyMFrOFzffDw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOVQwOTozNjo1MVrOFzgIMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTUzNzU1MQ==", "bodyText": "In fact, we support also .cob and .cobol case insensitively as valid file extensions for COBOL files.", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/229#discussion_r389537551", "createdAt": "2020-03-09T09:16:20Z", "author": {"login": "temanbrcom"}, "path": "clients/cobol-lsp-vscode-extension/src/ProfileService.ts", "diffHunk": "@@ -63,27 +66,23 @@ export class ProfileService {\n         return undefined;\n     }\n \n-    private async findProfileByDependenciesFile(depFile: vscode.Uri): Promise<string | undefined> {\n-        const depName = path.basename(depFile.fsPath, \".dep\");\n+    private async findProfileByDependenciesFile(programName: string): Promise<string | undefined> {\n         for (const doc of vscode.workspace.textDocuments) {\n             const docPath = doc.fileName;\n             if (!docPath.toLowerCase().endsWith(\".cbl\")) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1fb79a4a7334b0def7db4a804e21792e346fb12a"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTU0NzIzMw==", "bodyText": "Maybe it would be better to move \".dep\" to constants?", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/229#discussion_r389547233", "createdAt": "2020-03-09T09:35:16Z", "author": {"login": "temanbrcom"}, "path": "clients/cobol-lsp-vscode-extension/src/services/DependencyService.ts", "diffHunk": "@@ -0,0 +1,30 @@\n+/*\n+ * Copyright (c) 2020 Broadcom.\n+ * The term \"Broadcom\" refers to Broadcom Inc. and/or its subsidiaries.\n+ *\n+ * This program and the accompanying materials are made\n+ * available under the terms of the Eclipse Public License 2.0\n+ * which is available at https://www.eclipse.org/legal/epl-2.0/\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *\n+ * Contributors:\n+ *   Broadcom, Inc. - initial API and implementation\n+ */\n+\n+import * as fs from \"fs\";\n+import * as path from \"path\";\n+import * as vscode from \"vscode\";\n+\n+export interface DependenciesDesc {\n+    programName: string;\n+    copybooks: string[];\n+}\n+\n+export function loadDepFile(depFileUri: vscode.Uri): DependenciesDesc {\n+    const copybooks: string[] = fs.readFileSync(depFileUri.fsPath).toString().split(\"\\n\")\n+        .filter(e => e.trim().length > 0)\n+        .map(e => e.trim());\n+    const programName: string = path.basename(depFileUri.fsPath, \".dep\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1fb79a4a7334b0def7db4a804e21792e346fb12a"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTU0ODA4MQ==", "bodyText": "The new Java to be released next week, we should if this regex is actual later on", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/229#discussion_r389548081", "createdAt": "2020-03-09T09:36:51Z", "author": {"login": "temanbrcom"}, "path": "clients/cobol-lsp-vscode-extension/src/services/JavaCheck.ts", "diffHunk": "@@ -0,0 +1,44 @@\n+/*\n+ * Copyright (c) 2020 Broadcom.\n+ * The term \"Broadcom\" refers to Broadcom Inc. and/or its subsidiaries.\n+ *\n+ * This program and the accompanying materials are made\n+ * available under the terms of the Eclipse Public License 2.0\n+ * which is available at https://www.eclipse.org/legal/epl-2.0/\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *\n+ * Contributors:\n+ *   Broadcom, Inc. - initial API and implementation\n+ */\n+import * as cp from \"child_process\";\n+\n+export class JavaCheck {\n+    public static isJavaVersionSupported(versionString: string) {\n+        // tslint:disable-next-line: max-line-length\n+        const versionPattern = new RegExp('(java|openjdk) (version)? ?\"?((9|[0-9][0-9])|(1|9|[0-9][0-9])\\.(1|8|[0-9][0-9]).*).*');", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1fb79a4a7334b0def7db4a804e21792e346fb12a"}, "originalPosition": 19}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcxMDIyNzY0", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/229#pullrequestreview-371022764", "createdAt": "2020-03-09T09:39:24Z", "commit": {"oid": "1fb79a4a7334b0def7db4a804e21792e346fb12a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOVQwOTozOToyNFrOFzgNPg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOVQwOTozOToyNFrOFzgNPg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTU0OTM3NA==", "bodyText": "Is better extract the pattern as constant and get rid of the tslint max length", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/229#discussion_r389549374", "createdAt": "2020-03-09T09:39:24Z", "author": {"login": "zacanbrcom"}, "path": "clients/cobol-lsp-vscode-extension/src/services/JavaCheck.ts", "diffHunk": "@@ -0,0 +1,44 @@\n+/*\n+ * Copyright (c) 2020 Broadcom.\n+ * The term \"Broadcom\" refers to Broadcom Inc. and/or its subsidiaries.\n+ *\n+ * This program and the accompanying materials are made\n+ * available under the terms of the Eclipse Public License 2.0\n+ * which is available at https://www.eclipse.org/legal/epl-2.0/\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *\n+ * Contributors:\n+ *   Broadcom, Inc. - initial API and implementation\n+ */\n+import * as cp from \"child_process\";\n+\n+export class JavaCheck {\n+    public static isJavaVersionSupported(versionString: string) {\n+        // tslint:disable-next-line: max-line-length", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1fb79a4a7334b0def7db4a804e21792e346fb12a"}, "originalPosition": 18}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7af570153e034d0d100fe5ee5a3bb097a901cc9c", "author": {"user": {"login": "ishche", "name": "Yuriy Shekochihin"}}, "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/7af570153e034d0d100fe5ee5a3bb097a901cc9c", "committedDate": "2020-03-09T09:58:16Z", "message": "Fix tests and some PR remarks."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c1f4198e54536d197e8c322ab71a8a029a4f0723", "author": {"user": {"login": "ishche", "name": "Yuriy Shekochihin"}}, "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/c1f4198e54536d197e8c322ab71a8a029a4f0723", "committedDate": "2020-03-10T11:28:51Z", "message": "Small cleanups"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ab458f7511b36c07dbb951c8f85c83b1d2639e42", "author": {"user": {"login": "ishche", "name": "Yuriy Shekochihin"}}, "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/ab458f7511b36c07dbb951c8f85c83b1d2639e42", "committedDate": "2020-03-10T11:29:33Z", "message": "Merge branch 'development' into ext-refactoring"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5ddce0461f8c5a76733c4ad6e1075dd8e5b6e690", "author": {"user": {"login": "ishche", "name": "Yuriy Shekochihin"}}, "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/5ddce0461f8c5a76733c4ad6e1075dd8e5b6e690", "committedDate": "2020-03-10T13:08:24Z", "message": "Fix quickfix scope"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "79b8cf02615e9530976c7149cd367e8fa0a81dc9", "author": {"user": {"login": "ishche", "name": "Yuriy Shekochihin"}}, "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/79b8cf02615e9530976c7149cd367e8fa0a81dc9", "committedDate": "2020-03-10T14:30:31Z", "message": "Profile selection command"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcyMTI5MDEy", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/229#pullrequestreview-372129012", "createdAt": "2020-03-10T16:40:17Z", "commit": {"oid": "79b8cf02615e9530976c7149cd367e8fa0a81dc9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "623d9e50909c6551aa30d650a58699fa0bfd20d9", "author": {"user": {"login": "ishche", "name": "Yuriy Shekochihin"}}, "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/623d9e50909c6551aa30d650a58699fa0bfd20d9", "committedDate": "2020-03-11T08:49:00Z", "message": "Update Chengelog"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "683a6202805e26b9838376c944f1348afd489663", "author": {"user": {"login": "ishche", "name": "Yuriy Shekochihin"}}, "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/683a6202805e26b9838376c944f1348afd489663", "committedDate": "2020-03-11T08:51:13Z", "message": "Merge branch 'development' into ext-refactoring"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcyNTY2ODM2", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/229#pullrequestreview-372566836", "createdAt": "2020-03-11T08:51:49Z", "commit": {"oid": "683a6202805e26b9838376c944f1348afd489663"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "462e9fb2d3784468ed3409b2ef29aaa803b28521", "author": {"user": {"login": "ishche", "name": "Yuriy Shekochihin"}}, "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/462e9fb2d3784468ed3409b2ef29aaa803b28521", "committedDate": "2020-03-11T09:46:26Z", "message": "Merge branch 'development' into ext-refactoring"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcyNjMwODgy", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/229#pullrequestreview-372630882", "createdAt": "2020-03-11T10:22:21Z", "commit": {"oid": "462e9fb2d3784468ed3409b2ef29aaa803b28521"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1227, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}