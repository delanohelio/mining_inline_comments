{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAwNDM5MjQy", "number": 551, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQwODo1NzoyMlrOEr9ntA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQxMDoxMTo0NVrOEr_LVw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0NTMzODEyOnYy", "diffSide": "RIGHT", "path": "server/src/main/antlr4/com/ca/lsp/core/cobol/parser/CobolParser.g4", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQwODo1NzoyMlrOHfBLNw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQwODo1NzoyMlrOHfBLNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjI4NzE1OQ==", "bodyText": "seems not formatted", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/551#discussion_r502287159", "createdAt": "2020-10-09T08:57:22Z", "author": {"login": "asatklichov"}, "path": "server/src/main/antlr4/com/ca/lsp/core/cobol/parser/CobolParser.g4", "diffHunk": "@@ -932,17 +932,27 @@ libraryIsGlobalClause\n    ;\n \n dataDescriptionEntry\n-   : dataDescriptionEntryFormat1 | dataDescriptionEntryFormat2 | dataDescriptionEntryFormat3 | dataDescriptionEntryExecSql\n+   : dataDescriptionEntryFormat1 | dataDescriptionEntryFormat2 | dataDescriptionEntryFormat1Level77 | dataDescriptionEntryFormat3 | dataDescriptionEntryExecSql\n    ;\n \n dataDescriptionEntryFormat1\n-   : otherLevel (FILLER | dataName1)? (dataGroupUsageClause | dataRedefinesClause | dataIntegerStringClause | dataExternalClause | dataGlobalClause | dataTypeDefClause | dataThreadLocalClause | dataPictureClause | dataCommonOwnLocalClause | dataTypeClause | dataUsingClause | dataUsageClause | dataValueClause | dataReceivedByClause | dataOccursClause | dataSignClause | dataSynchronizedClause | dataJustifiedClause | dataBlankWhenZeroClause | dataWithLowerBoundsClause | dataAlignedClause | dataRecordAreaClause)* (DOT_FS|DOT_FS2)\n+   : LEVEL_NUMBER (FILLER | dataName1)? (dataGroupUsageClause | dataRedefinesClause | dataIntegerStringClause | dataExternalClause\n+   | dataGlobalClause | dataTypeDefClause | dataThreadLocalClause | dataPictureClause | dataCommonOwnLocalClause | dataTypeClause\n+   | dataUsingClause | dataUsageClause | dataValueClause | dataReceivedByClause | dataOccursClause | dataSignClause | dataSynchronizedClause\n+   | dataJustifiedClause | dataBlankWhenZeroClause | dataWithLowerBoundsClause | dataAlignedClause | dataRecordAreaClause)* (DOT_FS|DOT_FS2)\n    ;\n \n dataDescriptionEntryFormat2\n    : LEVEL_NUMBER_66 dataName1 dataRenamesClause DOT_FS\n    ;\n \n+dataDescriptionEntryFormat1Level77\n+   : LEVEL_NUMBER_77 dataName1 (dataPictureClause | dataRedefinesClause | dataIntegerStringClause | dataExternalClause\n+   | dataGlobalClause | dataTypeDefClause | dataThreadLocalClause | dataCommonOwnLocalClause | dataTypeClause | dataUsingClause\n+   | dataUsageClause | dataValueClause | dataReceivedByClause | dataOccursClause | dataSignClause | dataSynchronizedClause\n+   | dataJustifiedClause | dataBlankWhenZeroClause | dataWithLowerBoundsClause | dataAlignedClause | dataRecordAreaClause)* (DOT_FS|DOT_FS2)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "442af2d4a5ab029e5c367d221d681ceeeb293322"}, "originalPosition": 24}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0NTM0NDg3OnYy", "diffSide": "RIGHT", "path": "server/src/main/java/com/ca/lsp/core/cobol/model/variables/ConditionalName.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQwODo1OTowOFrOHfBPWQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQxMDoxOTo1MlrOHfD5Lg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjI4ODIxNw==", "bodyText": "optional: ConditionalDataName  looks more nice", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/551#discussion_r502288217", "createdAt": "2020-10-09T08:59:08Z", "author": {"login": "asatklichov"}, "path": "server/src/main/java/com/ca/lsp/core/cobol/model/variables/ConditionalName.java", "diffHunk": "@@ -0,0 +1,31 @@\n+/*\n+ * Copyright (c) 2020 Broadcom.\n+ * The term \"Broadcom\" refers to Broadcom Inc. and/or its subsidiaries.\n+ *\n+ * This program and the accompanying materials are made\n+ * available under the terms of the Eclipse Public License 2.0\n+ * which is available at https://www.eclipse.org/legal/epl-2.0/\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *\n+ * Contributors:\n+ *    Broadcom, Inc. - initial API and implementation\n+ *\n+ */\n+\n+package com.ca.lsp.core.cobol.model.variables;\n+\n+import lombok.AllArgsConstructor;\n+import lombok.Value;\n+\n+/**\n+ * This value class represents a conditional data name entry, that has a level number 88. It cannot\n+ * be a top element in the structure. It always contains a variable name and a value, but not PIC\n+ * clause.\n+ */\n+@Value\n+@AllArgsConstructor\n+public class ConditionalName implements Variable {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "442af2d4a5ab029e5c367d221d681ceeeb293322"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjMzMTY5NA==", "bodyText": "Makes sense", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/551#discussion_r502331694", "createdAt": "2020-10-09T10:19:52Z", "author": {"login": "temanbrcom"}, "path": "server/src/main/java/com/ca/lsp/core/cobol/model/variables/ConditionalName.java", "diffHunk": "@@ -0,0 +1,31 @@\n+/*\n+ * Copyright (c) 2020 Broadcom.\n+ * The term \"Broadcom\" refers to Broadcom Inc. and/or its subsidiaries.\n+ *\n+ * This program and the accompanying materials are made\n+ * available under the terms of the Eclipse Public License 2.0\n+ * which is available at https://www.eclipse.org/legal/epl-2.0/\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *\n+ * Contributors:\n+ *    Broadcom, Inc. - initial API and implementation\n+ *\n+ */\n+\n+package com.ca.lsp.core.cobol.model.variables;\n+\n+import lombok.AllArgsConstructor;\n+import lombok.Value;\n+\n+/**\n+ * This value class represents a conditional data name entry, that has a level number 88. It cannot\n+ * be a top element in the structure. It always contains a variable name and a value, but not PIC\n+ * clause.\n+ */\n+@Value\n+@AllArgsConstructor\n+public class ConditionalName implements Variable {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjI4ODIxNw=="}, "originalCommit": {"oid": "442af2d4a5ab029e5c367d221d681ceeeb293322"}, "originalPosition": 28}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0NTU3MDA1OnYy", "diffSide": "RIGHT", "path": "server/src/main/java/com/ca/lsp/core/cobol/model/variables/GroupItem.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQxMDowNDo0M1rOHfDbjg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQxMDo1MTo1NVrOHfE0dA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjMyNDExMA==", "bodyText": "Do we modify this returned list? Otherwise better  to use List.of(children)", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/551#discussion_r502324110", "createdAt": "2020-10-09T10:04:43Z", "author": {"login": "asatklichov"}, "path": "server/src/main/java/com/ca/lsp/core/cobol/model/variables/GroupItem.java", "diffHunk": "@@ -0,0 +1,56 @@\n+/*\n+ * Copyright (c) 2020 Broadcom.\n+ * The term \"Broadcom\" refers to Broadcom Inc. and/or its subsidiaries.\n+ *\n+ * This program and the accompanying materials are made\n+ * available under the terms of the Eclipse Public License 2.0\n+ * which is available at https://www.eclipse.org/legal/epl-2.0/\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *\n+ * Contributors:\n+ *    Broadcom, Inc. - initial API and implementation\n+ *\n+ */\n+\n+package com.ca.lsp.core.cobol.model.variables;\n+\n+import lombok.Value;\n+\n+import javax.annotation.Nonnull;\n+import java.util.ArrayList;\n+import java.util.List;\n+\n+/**\n+ * This value class represents a group item COBOL variable. Group elements can have nested\n+ * variables. They cannot have neither PIC nor VALUE clauses. Can be the top element of the\n+ * structure with level 01, as well as nested ones with higher level numbers.\n+ */\n+@Value\n+public class GroupItem implements StructuredVariable {\n+  private String name;\n+  private List<Variable> children = new ArrayList<>();\n+\n+  public GroupItem(@Nonnull String name) {\n+    this.name = name;\n+  }\n+\n+  /**\n+   * Add a new nested variable to this structure\n+   *\n+   * @param child - a nested variable. Can be a group or element, or all the other allowed type\n+   *     item.\n+   */\n+  public void addChild(Variable child) {\n+    children.add(child);\n+  }\n+\n+  /**\n+   * Return a list of already defined nested variables\n+   *\n+   * @return defined nested variables.\n+   */\n+  public List<Variable> getChildren() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "442af2d4a5ab029e5c367d221d681ceeeb293322"}, "originalPosition": 53}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjM0Njg2OA==", "bodyText": "List.of will create a list of lists in this case. I will use Collections.unmodifiableList instead", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/551#discussion_r502346868", "createdAt": "2020-10-09T10:51:55Z", "author": {"login": "temanbrcom"}, "path": "server/src/main/java/com/ca/lsp/core/cobol/model/variables/GroupItem.java", "diffHunk": "@@ -0,0 +1,56 @@\n+/*\n+ * Copyright (c) 2020 Broadcom.\n+ * The term \"Broadcom\" refers to Broadcom Inc. and/or its subsidiaries.\n+ *\n+ * This program and the accompanying materials are made\n+ * available under the terms of the Eclipse Public License 2.0\n+ * which is available at https://www.eclipse.org/legal/epl-2.0/\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *\n+ * Contributors:\n+ *    Broadcom, Inc. - initial API and implementation\n+ *\n+ */\n+\n+package com.ca.lsp.core.cobol.model.variables;\n+\n+import lombok.Value;\n+\n+import javax.annotation.Nonnull;\n+import java.util.ArrayList;\n+import java.util.List;\n+\n+/**\n+ * This value class represents a group item COBOL variable. Group elements can have nested\n+ * variables. They cannot have neither PIC nor VALUE clauses. Can be the top element of the\n+ * structure with level 01, as well as nested ones with higher level numbers.\n+ */\n+@Value\n+public class GroupItem implements StructuredVariable {\n+  private String name;\n+  private List<Variable> children = new ArrayList<>();\n+\n+  public GroupItem(@Nonnull String name) {\n+    this.name = name;\n+  }\n+\n+  /**\n+   * Add a new nested variable to this structure\n+   *\n+   * @param child - a nested variable. Can be a group or element, or all the other allowed type\n+   *     item.\n+   */\n+  public void addChild(Variable child) {\n+    children.add(child);\n+  }\n+\n+  /**\n+   * Return a list of already defined nested variables\n+   *\n+   * @return defined nested variables.\n+   */\n+  public List<Variable> getChildren() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjMyNDExMA=="}, "originalCommit": {"oid": "442af2d4a5ab029e5c367d221d681ceeeb293322"}, "originalPosition": 53}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0NTU4NTkwOnYy", "diffSide": "RIGHT", "path": "server/src/main/java/com/ca/lsp/core/cobol/model/variables/Table.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQxMDowOTo0MFrOHfDlcQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQxMDowOTo0MFrOHfDlcQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjMyNjY0MQ==", "bodyText": "if used as read-only purpose later the better use List.of(children)", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/551#discussion_r502326641", "createdAt": "2020-10-09T10:09:40Z", "author": {"login": "asatklichov"}, "path": "server/src/main/java/com/ca/lsp/core/cobol/model/variables/Table.java", "diffHunk": "@@ -0,0 +1,60 @@\n+/*\n+ * Copyright (c) 2020 Broadcom.\n+ * The term \"Broadcom\" refers to Broadcom Inc. and/or its subsidiaries.\n+ *\n+ * This program and the accompanying materials are made\n+ * available under the terms of the Eclipse Public License 2.0\n+ * which is available at https://www.eclipse.org/legal/epl-2.0/\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *\n+ * Contributors:\n+ *    Broadcom, Inc. - initial API and implementation\n+ *\n+ */\n+\n+package com.ca.lsp.core.cobol.model.variables;\n+\n+import lombok.Value;\n+\n+import javax.annotation.Nonnull;\n+import javax.annotation.Nullable;\n+import java.util.ArrayList;\n+import java.util.List;\n+\n+/**\n+ * This value class represents the Table variable that may have nested variables, and an optional\n+ * index\n+ */\n+@Value\n+public class Table implements StructuredVariable {\n+\n+  private String name;\n+  private int occursTimes;\n+  private IndexItem index;\n+  private List<Variable> children = new ArrayList<>();\n+\n+  public Table(@Nonnull String name, int occursTimes, @Nullable IndexItem index) {\n+    this.name = name;\n+    this.occursTimes = occursTimes;\n+    this.index = index;\n+  }\n+\n+  /**\n+   * Add a new nested variable to this one\n+   *\n+   * @param child - a nested variable. Can be a group or element item.\n+   */\n+  public void addChild(Variable child) {\n+    children.add(child);\n+  }\n+\n+  /**\n+   * Return a list of already defined nested variables\n+   *\n+   * @return defined nested variables.\n+   */\n+  public List<Variable> getChildren() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "442af2d4a5ab029e5c367d221d681ceeeb293322"}, "originalPosition": 57}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0NTU5MzE5OnYy", "diffSide": "RIGHT", "path": "server/src/main/java/com/ca/lsp/core/cobol/visitor/CobolVisitor.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQxMDoxMTo0NVrOHfDpuQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQxMDoxOTozMVrOHfD4fg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjMyNzczNw==", "bodyText": "\"01\" isn't it Level 01?", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/551#discussion_r502327737", "createdAt": "2020-10-09T10:11:45Z", "author": {"login": "asatklichov"}, "path": "server/src/main/java/com/ca/lsp/core/cobol/visitor/CobolVisitor.java", "diffHunk": "@@ -332,10 +333,10 @@ public Class visitParagraphName(ParagraphNameContext ctx) {\n   public Class visitDataDescriptionEntryFormat1(DataDescriptionEntryFormat1Context ctx) {\n     Token token = ctx.getStart();\n     String tokenText = token.getText();\n-    if (tokenText.equals(\"01\") || tokenText.equals(\"1\") || tokenText.equals(\"77\")) {\n+    if (tokenText.equals(\"01\") || tokenText.equals(\"1\")) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "442af2d4a5ab029e5c367d221d681ceeeb293322"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjMzMTUxOA==", "bodyText": "Yes, it is", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/551#discussion_r502331518", "createdAt": "2020-10-09T10:19:31Z", "author": {"login": "temanbrcom"}, "path": "server/src/main/java/com/ca/lsp/core/cobol/visitor/CobolVisitor.java", "diffHunk": "@@ -332,10 +333,10 @@ public Class visitParagraphName(ParagraphNameContext ctx) {\n   public Class visitDataDescriptionEntryFormat1(DataDescriptionEntryFormat1Context ctx) {\n     Token token = ctx.getStart();\n     String tokenText = token.getText();\n-    if (tokenText.equals(\"01\") || tokenText.equals(\"1\") || tokenText.equals(\"77\")) {\n+    if (tokenText.equals(\"01\") || tokenText.equals(\"1\")) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjMyNzczNw=="}, "originalCommit": {"oid": "442af2d4a5ab029e5c367d221d681ceeeb293322"}, "originalPosition": 13}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3985, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}