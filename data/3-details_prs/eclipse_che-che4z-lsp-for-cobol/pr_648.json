{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE5OTQzNDg4", "number": 648, "title": "refactor: Resolve Coverity Issues", "bodyText": "", "createdAt": "2020-11-12T14:59:20Z", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/648", "merged": true, "mergeCommit": {"oid": "450ad65036e3870ce948e8aafcef24bf9ebb8bef"}, "closed": true, "closedAt": "2020-11-12T17:15:55Z", "author": {"login": "Nurkambay"}, "timelineItems": {"totalCount": 19, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdbz9U4AFqTUyOTE3ODUyMQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdb1xQzAFqTUyOTMwNTc3Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI5MTc4NTIx", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/648#pullrequestreview-529178521", "createdAt": "2020-11-12T15:05:20Z", "commit": {"oid": "957276dbf4a5720416222373cffdc37eb496d02d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQxNTowNToyMFrOHx_DXQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQxNTowNToyMFrOHx_DXQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjE3NTMyNQ==", "bodyText": "", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/648#discussion_r522175325", "createdAt": "2020-11-12T15:05:20Z", "author": {"login": "Nurkambay"}, "path": "server/src/main/java/com/broadcom/lsp/cobol/LangServerBootstrap.java", "diffHunk": "@@ -96,8 +96,9 @@ boolean isPipeEnabled(@NonNull String[] args) {\n       LOG.info(\"Language server started using socket communication on port [{}]\", LSP_PORT);\n       LOG.info(\"Java version: \" + Runtime.version());\n       // wait for clients to connect\n-      Socket socket = serverSocket.accept();\n-      return createServerLauncher(server, socket.getInputStream(), socket.getOutputStream());\n+      try (Socket socket = serverSocket.accept()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "957276dbf4a5720416222373cffdc37eb496d02d"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI5MTc4ODg5", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/648#pullrequestreview-529178889", "createdAt": "2020-11-12T15:05:43Z", "commit": {"oid": "957276dbf4a5720416222373cffdc37eb496d02d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQxNTowNTo0M1rOHx_EZw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQxNTowNTo0M1rOHx_EZw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjE3NTU5MQ==", "bodyText": "", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/648#discussion_r522175591", "createdAt": "2020-11-12T15:05:43Z", "author": {"login": "Nurkambay"}, "path": "server/src/main/java/com/broadcom/lsp/cobol/core/semantics/outline/OutlineTreeBuilder.java", "diffHunk": "@@ -187,7 +186,7 @@ private void addOutlineNodeToTree(List<DocumentSymbol> outlineNodes, DocumentSym\n   }\n \n   @Value\n-  private class VariableNode {\n+  private static class VariableNode {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "957276dbf4a5720416222373cffdc37eb496d02d"}, "originalPosition": 38}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI5MTc5MzA3", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/648#pullrequestreview-529179307", "createdAt": "2020-11-12T15:06:04Z", "commit": {"oid": "957276dbf4a5720416222373cffdc37eb496d02d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQxNTowNjowNVrOHx_FiQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQxNTowNjowNVrOHx_FiQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjE3NTg4MQ==", "bodyText": "", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/648#discussion_r522175881", "createdAt": "2020-11-12T15:06:05Z", "author": {"login": "Nurkambay"}, "path": "server/src/main/java/com/broadcom/lsp/cobol/core/strategy/CobolErrorStrategy.java", "diffHunk": "@@ -64,13 +66,14 @@ public void setMessageService(MessageService messageService) {\n     this.messageService = messageService;\n   }\n \n-  private String getExpectedToken(Parser recognizer, InputMismatchException e) {\n-    if (e == null) {\n-      IntervalSet expecting = getExpectedTokens(recognizer);\n-      return expecting.toString(recognizer.getVocabulary());\n-    } else {\n-      return e.getExpectedTokens().toString(recognizer.getVocabulary());\n-    }\n+  private String getExpectedToken(@NonNull Parser recognizer, InputMismatchException e) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "957276dbf4a5720416222373cffdc37eb496d02d"}, "originalPosition": 25}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI5MTgwMzk0", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/648#pullrequestreview-529180394", "createdAt": "2020-11-12T15:07:08Z", "commit": {"oid": "957276dbf4a5720416222373cffdc37eb496d02d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQxNTowNzowOVrOHx_ItQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQxNTowNzowOVrOHx_ItQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjE3NjY5Mw==", "bodyText": "", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/648#discussion_r522176693", "createdAt": "2020-11-12T15:07:09Z", "author": {"login": "Nurkambay"}, "path": "server/src/main/java/com/broadcom/lsp/cobol/core/visitor/CobolVisitor.java", "diffHunk": "@@ -291,7 +288,7 @@ public Class visitLocalStorageSection(LocalStorageSectionContext ctx) {\n \n   @Override\n   public Class visitStatement(StatementContext ctx) {\n-    List<Token> tokenList =\n+    @NonNull List<Token> tokenList =", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "957276dbf4a5720416222373cffdc37eb496d02d"}, "originalPosition": 17}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI5MTgxMDg1", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/648#pullrequestreview-529181085", "createdAt": "2020-11-12T15:07:47Z", "commit": {"oid": "957276dbf4a5720416222373cffdc37eb496d02d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQxNTowNzo0N1rOHx_KmA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQxNTowNzo0N1rOHx_KmA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjE3NzE3Ng==", "bodyText": "", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/648#discussion_r522177176", "createdAt": "2020-11-12T15:07:47Z", "author": {"login": "Nurkambay"}, "path": "server/src/main/java/com/broadcom/lsp/cobol/core/visitor/CobolVisitor.java", "diffHunk": "@@ -568,8 +565,9 @@ private void checkVariableStructure(\n     }\n   }\n \n-  private String extractErrorStatementText(Token childToken, Token parentToken) {\n-    return tokenStream.getTokens(childToken.getTokenIndex(), parentToken.getTokenIndex()).stream()\n+  private String extractErrorStatementText(@NonNull Token childToken, @NonNull Token parentToken) {\n+    @NonNull List<Token> tokenList = tokenStream.getTokens(childToken.getTokenIndex(), parentToken.getTokenIndex());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "957276dbf4a5720416222373cffdc37eb496d02d"}, "originalPosition": 28}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "957276dbf4a5720416222373cffdc37eb496d02d", "author": {"user": {"login": "Nurkambay", "name": "Leonid Baranov"}}, "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/957276dbf4a5720416222373cffdc37eb496d02d", "committedDate": "2020-11-12T14:57:13Z", "message": "fix: Resolve Coverity Issues\n\nSigned-off-by: Leonid Baranov <leonid.baranov@broadcom.com>"}, "afterCommit": {"oid": "e54be02d18b29e0cdee36d2f9ea0d84b46cf30a7", "author": {"user": {"login": "Nurkambay", "name": "Leonid Baranov"}}, "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/e54be02d18b29e0cdee36d2f9ea0d84b46cf30a7", "committedDate": "2020-11-12T15:09:18Z", "message": "refactor: Resolve Coverity Issues\n\nSigned-off-by: Leonid Baranov <leonid.baranov@broadcom.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI5MTk0MzUy", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/648#pullrequestreview-529194352", "createdAt": "2020-11-12T15:20:25Z", "commit": {"oid": "e54be02d18b29e0cdee36d2f9ea0d84b46cf30a7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQxNToyMDoyNVrOHx_wLA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQxNToyMDoyNVrOHx_wLA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjE4Njc5Ng==", "bodyText": "", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/648#discussion_r522186796", "createdAt": "2020-11-12T15:20:25Z", "author": {"login": "Nurkambay"}, "path": "server/src/main/java/com/broadcom/lsp/cobol/service/CopybookServiceImpl.java", "diffHunk": "@@ -117,7 +117,7 @@ CopybookModel resolveSync(\n       @NonNull String documentUri,\n       @NonNull CopybookProcessingMode copybookProcessingMode)\n       throws ExecutionException, InterruptedException {\n-    String cobolFileName = files.getNameFromURI(documentUri);\n+    @NonNull String cobolFileName = files.getNameFromURI(documentUri);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e54be02d18b29e0cdee36d2f9ea0d84b46cf30a7"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI5MjAyNjcy", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/648#pullrequestreview-529202672", "createdAt": "2020-11-12T15:28:08Z", "commit": {"oid": "e54be02d18b29e0cdee36d2f9ea0d84b46cf30a7"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQxNToyODowOVrOHyAHbg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQxNTozMDoxN1rOHyAOWg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjE5Mjc1MA==", "bodyText": "Maybe, it would be better to just return an empty string?", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/648#discussion_r522192750", "createdAt": "2020-11-12T15:28:09Z", "author": {"login": "temanbrcom"}, "path": "server/src/main/java/com/broadcom/lsp/cobol/core/strategy/CobolErrorStrategy.java", "diffHunk": "@@ -64,13 +66,14 @@ public void setMessageService(MessageService messageService) {\n     this.messageService = messageService;\n   }\n \n-  private String getExpectedToken(Parser recognizer, InputMismatchException e) {\n-    if (e == null) {\n-      IntervalSet expecting = getExpectedTokens(recognizer);\n-      return expecting.toString(recognizer.getVocabulary());\n-    } else {\n-      return e.getExpectedTokens().toString(recognizer.getVocabulary());\n-    }\n+  private String getExpectedToken(@NonNull Parser recognizer, InputMismatchException e) {\n+    IntervalSet expecting = Optional.ofNullable(e)\n+        .map(RecognitionException::getExpectedTokens)\n+        .orElse(getExpectedTokens(recognizer));\n+\n+    return Optional.ofNullable(expecting)\n+        .map(exp -> exp.toString(recognizer.getVocabulary()))\n+        .orElseThrow(() -> new RuntimeException(\"Cannot find expected tokens\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e54be02d18b29e0cdee36d2f9ea0d84b46cf30a7"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjE5NDUyMg==", "bodyText": "INFO: Socket closed\njava.net.SocketException: Socket closed\n\tat java.base/sun.nio.ch.NioSocketImpl.ensureOpenAndConnected(NioSocketImpl.java:166)\n\tat java.base/sun.nio.ch.NioSocketImpl.beginRead(NioSocketImpl.java:232)\n\tat java.base/sun.nio.ch.NioSocketImpl.implRead(NioSocketImpl.java:300)\n\tat java.base/sun.nio.ch.NioSocketImpl.read(NioSocketImpl.java:351)\n\tat java.base/sun.nio.ch.NioSocketImpl$1.read(NioSocketImpl.java:802)\n\tat java.base/java.net.Socket$SocketInputStream.read(Socket.java:937)\n\tat java.base/java.net.Socket$SocketInputStream.read(Socket.java:932)\n\tat org.eclipse.lsp4j.jsonrpc.json.StreamMessageProducer.listen(StreamMessageProducer.java:79)\n\tat org.eclipse.lsp4j.jsonrpc.json.ConcurrentMessageProcessor.run(ConcurrentMessageProcessor.java:99)\n\tat java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)\n\tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\n\tat java.base/java.lang.Thread.run(Thread.java:830)", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/648#discussion_r522194522", "createdAt": "2020-11-12T15:30:17Z", "author": {"login": "temanbrcom"}, "path": "server/src/main/java/com/broadcom/lsp/cobol/LangServerBootstrap.java", "diffHunk": "@@ -96,8 +96,9 @@ boolean isPipeEnabled(@NonNull String[] args) {\n       LOG.info(\"Language server started using socket communication on port [{}]\", LSP_PORT);\n       LOG.info(\"Java version: \" + Runtime.version());\n       // wait for clients to connect\n-      Socket socket = serverSocket.accept();\n-      return createServerLauncher(server, socket.getInputStream(), socket.getOutputStream());\n+      try (Socket socket = serverSocket.accept()) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjE3NTMyNQ=="}, "originalCommit": {"oid": "957276dbf4a5720416222373cffdc37eb496d02d"}, "originalPosition": 6}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e54be02d18b29e0cdee36d2f9ea0d84b46cf30a7", "author": {"user": {"login": "Nurkambay", "name": "Leonid Baranov"}}, "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/e54be02d18b29e0cdee36d2f9ea0d84b46cf30a7", "committedDate": "2020-11-12T15:09:18Z", "message": "refactor: Resolve Coverity Issues\n\nSigned-off-by: Leonid Baranov <leonid.baranov@broadcom.com>"}, "afterCommit": {"oid": "febe3ab3472fd567627b96fd463ecd66b30d1cf4", "author": {"user": {"login": "Nurkambay", "name": "Leonid Baranov"}}, "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/febe3ab3472fd567627b96fd463ecd66b30d1cf4", "committedDate": "2020-11-12T15:35:00Z", "message": "refactor: Resolve Coverity Issues\n\nSigned-off-by: Leonid Baranov <leonid.baranov@broadcom.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI5MjE5NTg0", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/648#pullrequestreview-529219584", "createdAt": "2020-11-12T15:44:27Z", "commit": {"oid": "febe3ab3472fd567627b96fd463ecd66b30d1cf4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI5MjI3MjY1", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/648#pullrequestreview-529227265", "createdAt": "2020-11-12T15:51:42Z", "commit": {"oid": "febe3ab3472fd567627b96fd463ecd66b30d1cf4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI5MjU1NTU0", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/648#pullrequestreview-529255554", "createdAt": "2020-11-12T16:19:30Z", "commit": {"oid": "febe3ab3472fd567627b96fd463ecd66b30d1cf4"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQxNjoxOTozMFrOHyCmhw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQxNjoxOTozMFrOHyCmhw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjIzMzQ3OQ==", "bodyText": "Sorry, but it will not work this way. Lombok's NonNull works only with parameters.", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/648#discussion_r522233479", "createdAt": "2020-11-12T16:19:30Z", "author": {"login": "grianbrcom"}, "path": "server/src/main/java/com/broadcom/lsp/cobol/core/visitor/CobolVisitor.java", "diffHunk": "@@ -291,7 +288,7 @@ public Class visitLocalStorageSection(LocalStorageSectionContext ctx) {\n \n   @Override\n   public Class visitStatement(StatementContext ctx) {\n-    List<Token> tokenList =\n+    @NonNull List<Token> tokenList =", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjE3NjY5Mw=="}, "originalCommit": {"oid": "957276dbf4a5720416222373cffdc37eb496d02d"}, "originalPosition": 17}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "febe3ab3472fd567627b96fd463ecd66b30d1cf4", "author": {"user": {"login": "Nurkambay", "name": "Leonid Baranov"}}, "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/febe3ab3472fd567627b96fd463ecd66b30d1cf4", "committedDate": "2020-11-12T15:35:00Z", "message": "refactor: Resolve Coverity Issues\n\nSigned-off-by: Leonid Baranov <leonid.baranov@broadcom.com>"}, "afterCommit": {"oid": "f8729b0ac365c265118785eb4bac17fbb52c13d9", "author": {"user": {"login": "Nurkambay", "name": "Leonid Baranov"}}, "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/f8729b0ac365c265118785eb4bac17fbb52c13d9", "committedDate": "2020-11-12T16:49:23Z", "message": "refactor: Resolve Coverity Issues\n\nSigned-off-by: Leonid Baranov <leonid.baranov@broadcom.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI5Mjg2Nzgx", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/648#pullrequestreview-529286781", "createdAt": "2020-11-12T16:51:37Z", "commit": {"oid": "f8729b0ac365c265118785eb4bac17fbb52c13d9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQxNjo1MTozN1rOHyEFBA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQxNjo1MTozN1rOHyEFBA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjI1NzY2OA==", "bodyText": "Will throw an exception on null tokenList", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/648#discussion_r522257668", "createdAt": "2020-11-12T16:51:37Z", "author": {"login": "Nurkambay"}, "path": "server/src/main/java/com/broadcom/lsp/cobol/core/visitor/CobolVisitor.java", "diffHunk": "@@ -620,7 +620,7 @@ private void areaAWarning(Token token) {\n         .ifPresent(it -> throwException(token.getText(), it, messageService.getMessage(\"CobolVisitor.AreaAWarningMsg\")));\n   }\n \n-  private void areaBWarning(List<Token> tokenList) {\n+  private void areaBWarning(@NonNull List<Token> tokenList) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f8729b0ac365c265118785eb4bac17fbb52c13d9"}, "originalPosition": 31}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI5Mjg4Njc2", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/648#pullrequestreview-529288676", "createdAt": "2020-11-12T16:53:36Z", "commit": {"oid": "f8729b0ac365c265118785eb4bac17fbb52c13d9"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQxNjo1MzozNlrOHyEKkg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQxNjo1NDozOFrOHyENvw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjI1OTA5MA==", "bodyText": "This makes sense. Let's see if Coverity agreed with this.", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/648#discussion_r522259090", "createdAt": "2020-11-12T16:53:36Z", "author": {"login": "grianbrcom"}, "path": "server/src/main/java/com/broadcom/lsp/cobol/core/visitor/CobolVisitor.java", "diffHunk": "@@ -620,7 +620,7 @@ private void areaAWarning(Token token) {\n         .ifPresent(it -> throwException(token.getText(), it, messageService.getMessage(\"CobolVisitor.AreaAWarningMsg\")));\n   }\n \n-  private void areaBWarning(List<Token> tokenList) {\n+  private void areaBWarning(@NonNull List<Token> tokenList) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjI1NzY2OA=="}, "originalCommit": {"oid": "f8729b0ac365c265118785eb4bac17fbb52c13d9"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjI1OTkwMw==", "bodyText": "Please, rewrite this too. The annotation will not work here as well.\nAs I see, this error is about null check between computeIfAbsent and add calls.", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/648#discussion_r522259903", "createdAt": "2020-11-12T16:54:38Z", "author": {"login": "grianbrcom"}, "path": "server/src/main/java/com/broadcom/lsp/cobol/service/CopybookServiceImpl.java", "diffHunk": "@@ -117,7 +117,7 @@ CopybookModel resolveSync(\n       @NonNull String documentUri,\n       @NonNull CopybookProcessingMode copybookProcessingMode)\n       throws ExecutionException, InterruptedException {\n-    String cobolFileName = files.getNameFromURI(documentUri);\n+    @NonNull String cobolFileName = files.getNameFromURI(documentUri);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjE4Njc5Ng=="}, "originalCommit": {"oid": "e54be02d18b29e0cdee36d2f9ea0d84b46cf30a7"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f31b6e7d8732c8c04be0a4cc303e3636d96a5f00", "author": {"user": {"login": "Nurkambay", "name": "Leonid Baranov"}}, "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/f31b6e7d8732c8c04be0a4cc303e3636d96a5f00", "committedDate": "2020-11-12T17:06:29Z", "message": "refactor: Resolve Coverity Issues\n\nSigned-off-by: Leonid Baranov <leonid.baranov@broadcom.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f8729b0ac365c265118785eb4bac17fbb52c13d9", "author": {"user": {"login": "Nurkambay", "name": "Leonid Baranov"}}, "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/f8729b0ac365c265118785eb4bac17fbb52c13d9", "committedDate": "2020-11-12T16:49:23Z", "message": "refactor: Resolve Coverity Issues\n\nSigned-off-by: Leonid Baranov <leonid.baranov@broadcom.com>"}, "afterCommit": {"oid": "f31b6e7d8732c8c04be0a4cc303e3636d96a5f00", "author": {"user": {"login": "Nurkambay", "name": "Leonid Baranov"}}, "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/f31b6e7d8732c8c04be0a4cc303e3636d96a5f00", "committedDate": "2020-11-12T17:06:29Z", "message": "refactor: Resolve Coverity Issues\n\nSigned-off-by: Leonid Baranov <leonid.baranov@broadcom.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI5MzAyMzcz", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/648#pullrequestreview-529302373", "createdAt": "2020-11-12T17:08:06Z", "commit": {"oid": "f31b6e7d8732c8c04be0a4cc303e3636d96a5f00"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQxNzowODowNlrOHyE0Rg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQxNzowODowNlrOHyE0Rg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjI2OTc2Ng==", "bodyText": "Anyway better to check cobolFileName for null.\ncopybooksForDownloading.computeIfAbsent if always not null, so it is false-positive issue in that case", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/648#discussion_r522269766", "createdAt": "2020-11-12T17:08:06Z", "author": {"login": "Nurkambay"}, "path": "server/src/main/java/com/broadcom/lsp/cobol/service/CopybookServiceImpl.java", "diffHunk": "@@ -124,9 +124,8 @@ CopybookModel resolveSync(\n                 .getConfiguration(COPYBOOK_RESOLVE.label, cobolFileName, copybookName)\n                 .get());\n     if (uri.isEmpty()) {\n-      if (copybookProcessingMode.download) {\n-        copybooksForDownloading\n-            .computeIfAbsent(cobolFileName, s -> ConcurrentHashMap.newKeySet())\n+      if (copybookProcessingMode.download && cobolFileName != null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f31b6e7d8732c8c04be0a4cc303e3636d96a5f00"}, "originalPosition": 7}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI5MzA1Nzcy", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/648#pullrequestreview-529305772", "createdAt": "2020-11-12T17:11:42Z", "commit": {"oid": "f31b6e7d8732c8c04be0a4cc303e3636d96a5f00"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQxNzoxMTo0MlrOHyE-Ug==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQxNzoxMTo0MlrOHyE-Ug==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjI3MjMzOA==", "bodyText": "I think that the issue is that computeIfAbsent can return null if our mapping function returns null. But maybe your assumption right.", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/648#discussion_r522272338", "createdAt": "2020-11-12T17:11:42Z", "author": {"login": "grianbrcom"}, "path": "server/src/main/java/com/broadcom/lsp/cobol/service/CopybookServiceImpl.java", "diffHunk": "@@ -124,9 +124,8 @@ CopybookModel resolveSync(\n                 .getConfiguration(COPYBOOK_RESOLVE.label, cobolFileName, copybookName)\n                 .get());\n     if (uri.isEmpty()) {\n-      if (copybookProcessingMode.download) {\n-        copybooksForDownloading\n-            .computeIfAbsent(cobolFileName, s -> ConcurrentHashMap.newKeySet())\n+      if (copybookProcessingMode.download && cobolFileName != null) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjI2OTc2Ng=="}, "originalCommit": {"oid": "f31b6e7d8732c8c04be0a4cc303e3636d96a5f00"}, "originalPosition": 7}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 897, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}