{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE5MDQ4OTg1", "number": 637, "title": "refactor : get rid of LangServerCtx", "bodyText": "refactor : get rid of LangServerCtx\nSigned-off-by: ap891843 aman.prashant@broadcom.com", "createdAt": "2020-11-11T08:50:52Z", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/637", "merged": true, "mergeCommit": {"oid": "db87dcff713d3be64c64b600e2bd3a8134f712a8"}, "closed": true, "closedAt": "2020-11-11T12:08:38Z", "author": {"login": "ap891843"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdbbOjBgFqTUyODAzODQxOA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdbcssagFqTUyODEwODU2Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI4MDM4NDE4", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/637#pullrequestreview-528038418", "createdAt": "2020-11-11T10:15:45Z", "commit": {"oid": "1db8754412d3a86f10494887ae7baad5649d99b0"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQxMDoxNTo0NVrOHxG1aQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQxMDoxNjoxOFrOHxG2pA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTI1NDI0OQ==", "bodyText": "Why is it protected?", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/637#discussion_r521254249", "createdAt": "2020-11-11T10:15:45Z", "author": {"login": "temanbrcom"}, "path": "server/src/test/java/com/broadcom/lsp/cobol/ConfigurableTest.java", "diffHunk": "@@ -14,20 +14,29 @@\n  */\n package com.broadcom.lsp.cobol;\n \n-import com.broadcom.lsp.cobol.domain.modules.EngineModule;\n-import com.broadcom.lsp.cobol.domain.modules.LangServerCtx;\n import com.broadcom.lsp.cobol.domain.modules.DatabusModule;\n-import org.junit.jupiter.api.AfterAll;\n-import org.junit.jupiter.api.BeforeAll;\n+import com.broadcom.lsp.cobol.domain.modules.EngineModule;\n+import com.broadcom.lsp.cobol.positive.CobolTextRegistry;\n+import com.broadcom.lsp.cobol.positive.FolderTextRegistry;\n+import com.google.inject.Guice;\n+import com.google.inject.Injector;\n+import org.junit.jupiter.api.TestInstance;\n \n+import static java.lang.System.getProperty;\n+import static java.util.Optional.ofNullable;\n+\n+@TestInstance(TestInstance.Lifecycle.PER_CLASS)\n public abstract class ConfigurableTest {\n-  @BeforeAll\n-  public static void setUp() {\n-    LangServerCtx.getGuiceCtx(new TestModule(), new EngineModule(), new DatabusModule());\n-  }\n+  protected static final String PATH_TO_TEST_RESOURCES = \"filesToTestPath\";\n+  protected Injector injector =", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1db8754412d3a86f10494887ae7baad5649d99b0"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTI1NDU2NA==", "bodyText": "Seems like it may be encapsulated in PositiveTest", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/637#discussion_r521254564", "createdAt": "2020-11-11T10:16:18Z", "author": {"login": "temanbrcom"}, "path": "server/src/test/java/com/broadcom/lsp/cobol/ConfigurableTest.java", "diffHunk": "@@ -14,20 +14,29 @@\n  */\n package com.broadcom.lsp.cobol;\n \n-import com.broadcom.lsp.cobol.domain.modules.EngineModule;\n-import com.broadcom.lsp.cobol.domain.modules.LangServerCtx;\n import com.broadcom.lsp.cobol.domain.modules.DatabusModule;\n-import org.junit.jupiter.api.AfterAll;\n-import org.junit.jupiter.api.BeforeAll;\n+import com.broadcom.lsp.cobol.domain.modules.EngineModule;\n+import com.broadcom.lsp.cobol.positive.CobolTextRegistry;\n+import com.broadcom.lsp.cobol.positive.FolderTextRegistry;\n+import com.google.inject.Guice;\n+import com.google.inject.Injector;\n+import org.junit.jupiter.api.TestInstance;\n \n+import static java.lang.System.getProperty;\n+import static java.util.Optional.ofNullable;\n+\n+@TestInstance(TestInstance.Lifecycle.PER_CLASS)\n public abstract class ConfigurableTest {\n-  @BeforeAll\n-  public static void setUp() {\n-    LangServerCtx.getGuiceCtx(new TestModule(), new EngineModule(), new DatabusModule());\n-  }\n+  protected static final String PATH_TO_TEST_RESOURCES = \"filesToTestPath\";\n+  protected Injector injector =\n+      Guice.createInjector(new TestModule(), new EngineModule(), new DatabusModule());\n \n-  @AfterAll\n-  public static void tearDown() {\n-    LangServerCtx.shutdown();\n+  /**\n+   * Retrieve {@link CobolTextRegistry} using file-based implementation.\n+   *\n+   * @return {@link CobolTextRegistry}.\n+   */\n+  public static CobolTextRegistry retrieveTextsRegistry() {\n+    return new FolderTextRegistry(ofNullable(getProperty(PATH_TO_TEST_RESOURCES)).orElse(\"\"));\n   }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1db8754412d3a86f10494887ae7baad5649d99b0"}, "originalPosition": 39}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI4MDQ5MzU5", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/637#pullrequestreview-528049359", "createdAt": "2020-11-11T10:31:04Z", "commit": {"oid": "1db8754412d3a86f10494887ae7baad5649d99b0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI4MDYxMDM1", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/637#pullrequestreview-528061035", "createdAt": "2020-11-11T10:47:50Z", "commit": {"oid": "1db8754412d3a86f10494887ae7baad5649d99b0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI4MDc1MjQw", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/637#pullrequestreview-528075240", "createdAt": "2020-11-11T11:08:12Z", "commit": {"oid": "1db8754412d3a86f10494887ae7baad5649d99b0"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQxMTowODoxMlrOHxIljg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQxMTowODoxMlrOHxIljg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTI4Mjk1OA==", "bodyText": "copybooks not initialized", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/637#discussion_r521282958", "createdAt": "2020-11-11T11:08:12Z", "author": {"login": "temanbrcom"}, "path": "server/src/test/java/com/broadcom/lsp/cobol/positive/PositiveTest.java", "diffHunk": "@@ -47,10 +44,7 @@\n    * @return a collection of objects that would be passed to the constructor one by one.\n    */\n   private static Stream<CobolText> retrieveTextsToTest() {\n-    CobolTextRegistry registry =\n-        new FolderTextRegistry(ofNullable(getProperty(PATH_TO_TEST_RESOURCES)).orElse(\"\"));\n-    copybooks = registry.getCopybooks();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1db8754412d3a86f10494887ae7baad5649d99b0"}, "originalPosition": 23}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1db8754412d3a86f10494887ae7baad5649d99b0", "author": {"user": {"login": "ap891843", "name": "Aman Prashant"}}, "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/1db8754412d3a86f10494887ae7baad5649d99b0", "committedDate": "2020-11-11T09:33:25Z", "message": "refactor : remove todo for MisspelledKeywordDistance utility class.\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>"}, "afterCommit": {"oid": "0ff5f549ba5c56f14950dfc4f5a0a6de06487bdc", "author": {"user": {"login": "ap891843", "name": "Aman Prashant"}}, "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/0ff5f549ba5c56f14950dfc4f5a0a6de06487bdc", "committedDate": "2020-11-11T11:12:42Z", "message": "refactor : remove todo for MisspelledKeywordDistance utility class.\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0ff5f549ba5c56f14950dfc4f5a0a6de06487bdc", "author": {"user": {"login": "ap891843", "name": "Aman Prashant"}}, "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/0ff5f549ba5c56f14950dfc4f5a0a6de06487bdc", "committedDate": "2020-11-11T11:12:42Z", "message": "refactor : remove todo for MisspelledKeywordDistance utility class.\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>"}, "afterCommit": {"oid": "25afe580dd2e9206c82f2f895c9cdca09e821227", "author": {"user": {"login": "ap891843", "name": "Aman Prashant"}}, "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/25afe580dd2e9206c82f2f895c9cdca09e821227", "committedDate": "2020-11-11T11:53:05Z", "message": "refactor : remove todo for MisspelledKeywordDistance utility class.\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5df2092697c7f21686c5cffcd263b75d79a0ac94", "author": {"user": {"login": "ap891843", "name": "Aman Prashant"}}, "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/5df2092697c7f21686c5cffcd263b75d79a0ac94", "committedDate": "2020-11-11T11:55:33Z", "message": "refactor : get rid of LangServerCtx #637\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "58b46558ee611ff556fdc1dee1ad5f11b9e1ac73", "author": {"user": {"login": "ap891843", "name": "Aman Prashant"}}, "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/58b46558ee611ff556fdc1dee1ad5f11b9e1ac73", "committedDate": "2020-11-11T11:55:33Z", "message": "refactor : remove todo for MisspelledKeywordDistance utility class.\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "25afe580dd2e9206c82f2f895c9cdca09e821227", "author": {"user": {"login": "ap891843", "name": "Aman Prashant"}}, "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/25afe580dd2e9206c82f2f895c9cdca09e821227", "committedDate": "2020-11-11T11:53:05Z", "message": "refactor : remove todo for MisspelledKeywordDistance utility class.\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>"}, "afterCommit": {"oid": "58b46558ee611ff556fdc1dee1ad5f11b9e1ac73", "author": {"user": {"login": "ap891843", "name": "Aman Prashant"}}, "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/58b46558ee611ff556fdc1dee1ad5f11b9e1ac73", "committedDate": "2020-11-11T11:55:33Z", "message": "refactor : remove todo for MisspelledKeywordDistance utility class.\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI4MTA2MzAw", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/637#pullrequestreview-528106300", "createdAt": "2020-11-11T11:55:46Z", "commit": {"oid": "25afe580dd2e9206c82f2f895c9cdca09e821227"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI4MTA4NTY2", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/637#pullrequestreview-528108566", "createdAt": "2020-11-11T11:59:21Z", "commit": {"oid": "58b46558ee611ff556fdc1dee1ad5f11b9e1ac73"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 886, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}