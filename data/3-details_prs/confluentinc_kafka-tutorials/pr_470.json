{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDUzNjE2NTE4", "number": 470, "title": "GH-446: Changing the number of partitions and replicas of a Kafka topic #446", "bodyText": "Addresses #446", "createdAt": "2020-07-20T16:28:08Z", "url": "https://github.com/confluentinc/kafka-tutorials/pull/470", "merged": true, "mergeCommit": {"oid": "61417b2cf2ba4b7ee9a12887c43a618487175633"}, "closed": true, "closedAt": "2020-07-22T17:51:28Z", "author": {"login": "ybyzek"}, "timelineItems": {"totalCount": 23, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc13yqXgH2gAyNDUzNjE2NTE4OmZjMDYyNDI5YzBlYzAxZWYyYmUxODU2YWEwYzFlMTc0NWRkYWY5NzU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc3eSP2AFqTQ1MzUzNDAwMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "fc062429c0ec01ef2be1856aa0c1e1745ddaf975", "author": {"user": {"login": "ybyzek", "name": "Yeva Byzek"}}, "url": "https://github.com/confluentinc/kafka-tutorials/commit/fc062429c0ec01ef2be1856aa0c1e1745ddaf975", "committedDate": "2020-07-17T18:04:11Z", "message": "GH-446: #446 framework"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9a5e4cb88f155c15a283d8be0854c86a53c2add1", "author": {"user": {"login": "ybyzek", "name": "Yeva Byzek"}}, "url": "https://github.com/confluentinc/kafka-tutorials/commit/9a5e4cb88f155c15a283d8be0854c86a53c2add1", "committedDate": "2020-07-17T18:24:38Z", "message": "Checkpoint 2"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f99dda78f24f7c4c5ff22d7b4b513e4852a5cb54", "author": {"user": {"login": "ybyzek", "name": "Yeva Byzek"}}, "url": "https://github.com/confluentinc/kafka-tutorials/commit/f99dda78f24f7c4c5ff22d7b4b513e4852a5cb54", "committedDate": "2020-07-17T19:50:35Z", "message": "Next checkpoint"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5d6fccceb1e27087e92e0473ef00d56c81206ca2", "author": {"user": {"login": "ybyzek", "name": "Yeva Byzek"}}, "url": "https://github.com/confluentinc/kafka-tutorials/commit/5d6fccceb1e27087e92e0473ef00d56c81206ca2", "committedDate": "2020-07-17T22:18:44Z", "message": "Fix some things"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c08fc2c8b5622f4a4f2c9adfc6b94e8139fa8539", "author": {"user": {"login": "ybyzek", "name": "Yeva Byzek"}}, "url": "https://github.com/confluentinc/kafka-tutorials/commit/c08fc2c8b5622f4a4f2c9adfc6b94e8139fa8539", "committedDate": "2020-07-17T23:13:28Z", "message": "Create proper streams"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2b95196b7e540027661e9a109881639073cea16e", "author": {"user": {"login": "ybyzek", "name": "Yeva Byzek"}}, "url": "https://github.com/confluentinc/kafka-tutorials/commit/2b95196b7e540027661e9a109881639073cea16e", "committedDate": "2020-07-17T23:40:37Z", "message": "Add per partition consumers"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8d30d752279f8a259e5e684a4ba43dee6cfaefa6", "author": {"user": {"login": "ybyzek", "name": "Yeva Byzek"}}, "url": "https://github.com/confluentinc/kafka-tutorials/commit/8d30d752279f8a259e5e684a4ba43dee6cfaefa6", "committedDate": "2020-07-17T23:57:34Z", "message": "Split test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5b28c8fbac92fd7e26875450dc0538faa029ada0", "author": {"user": {"login": "ybyzek", "name": "Yeva Byzek"}}, "url": "https://github.com/confluentinc/kafka-tutorials/commit/5b28c8fbac92fd7e26875450dc0538faa029ada0", "committedDate": "2020-07-18T00:16:05Z", "message": "Get produce to work for make"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7a97a10f61e47b82e4129f2bced3daf7e324d5e4", "author": {"user": {"login": "ybyzek", "name": "Yeva Byzek"}}, "url": "https://github.com/confluentinc/kafka-tutorials/commit/7a97a10f61e47b82e4129f2bced3daf7e324d5e4", "committedDate": "2020-07-18T00:26:09Z", "message": "Add files for harness-console-consumer"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5ceffbac47755768ef503fb8ce26b6f0326eeb21", "author": {"user": {"login": "ybyzek", "name": "Yeva Byzek"}}, "url": "https://github.com/confluentinc/kafka-tutorials/commit/5ceffbac47755768ef503fb8ce26b6f0326eeb21", "committedDate": "2020-07-18T01:16:40Z", "message": "Fixup some tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c8c5fa8c7034c97db7560e6f91cdab6bd55967da", "author": {"user": {"login": "ybyzek", "name": "Yeva Byzek"}}, "url": "https://github.com/confluentinc/kafka-tutorials/commit/c8c5fa8c7034c97db7560e6f91cdab6bd55967da", "committedDate": "2020-07-18T01:25:32Z", "message": "make passes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e0aedfac5b79d9a090506ef919eeee4e0ac6dde6", "author": {"user": {"login": "ybyzek", "name": "Yeva Byzek"}}, "url": "https://github.com/confluentinc/kafka-tutorials/commit/e0aedfac5b79d9a090506ef919eeee4e0ac6dde6", "committedDate": "2020-07-18T01:32:07Z", "message": "Modify introduction"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c99f37398606c87a1a32179f46083b7a7ae945f1", "author": {"user": {"login": "ybyzek", "name": "Yeva Byzek"}}, "url": "https://github.com/confluentinc/kafka-tutorials/commit/c99f37398606c87a1a32179f46083b7a7ae945f1", "committedDate": "2020-07-18T01:51:45Z", "message": "tweaks"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aadb05ea23964cee227495d903dbd5da2599862d", "author": {"user": {"login": "ybyzek", "name": "Yeva Byzek"}}, "url": "https://github.com/confluentinc/kafka-tutorials/commit/aadb05ea23964cee227495d903dbd5da2599862d", "committedDate": "2020-07-18T02:27:12Z", "message": "Add changing replicas; reformat some commands"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "beef11dc519e9e9b8c7334b9e5e029e579ef9125", "author": {"user": {"login": "ybyzek", "name": "Yeva Byzek"}}, "url": "https://github.com/confluentinc/kafka-tutorials/commit/beef11dc519e9e9b8c7334b9e5e029e579ef9125", "committedDate": "2020-07-18T02:39:24Z", "message": "Tweak"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f844d695a0bb90ad09c93bdde749892ed98200bc", "author": {"user": {"login": "ybyzek", "name": "Yeva Byzek"}}, "url": "https://github.com/confluentinc/kafka-tutorials/commit/f844d695a0bb90ad09c93bdde749892ed98200bc", "committedDate": "2020-07-20T16:27:06Z", "message": "Rename KT folder; tweaks to tutorial"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUyNjA2OTU1", "url": "https://github.com/confluentinc/kafka-tutorials/pull/470#pullrequestreview-452606955", "createdAt": "2020-07-21T16:01:47Z", "commit": {"oid": "f844d695a0bb90ad09c93bdde749892ed98200bc"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxNjowMTo0N1rOG0_B9w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxNjo0NzoxMlrOG1A4QQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODIxMTgzMQ==", "bodyText": "skip needs to be replaced with file:<path to adoc file> to show the clean-up command to users.", "url": "https://github.com/confluentinc/kafka-tutorials/pull/470#discussion_r458211831", "createdAt": "2020-07-21T16:01:47Z", "author": {"login": "bbejeck"}, "path": "_data/harnesses/change-topic-partitions-replicas/ksql.yml", "diffHunk": "@@ -0,0 +1,139 @@\n+dev:\n+  steps:\n+    - title: Initialize the project\n+      content:\n+        - action: execute\n+          file: tutorial-steps/dev/init.sh\n+          render:\n+            file: tutorials/change-topic-partitions-replicas/ksql/markup/dev/init.adoc\n+\n+        - change_directory: change-topic-partitions-replicas\n+          action: execute\n+          file: tutorial-steps/dev/make-dirs.sh\n+          render:\n+            file: tutorials/change-topic-partitions-replicas/ksql/markup/dev/make-dirs.adoc\n+\n+    - title: Get Confluent Platform\n+      content:\n+        - action: make_file\n+          file: docker-compose.yml\n+          render:\n+            file: tutorials/change-topic-partitions-replicas/ksql/markup/dev/make-docker-compose.adoc\n+\n+        - action: execute_async\n+          file: tutorial-steps/dev/docker-compose-up.sh\n+          render:\n+            file: tutorials/change-topic-partitions-replicas/ksql/markup/dev/start-compose.adoc\n+\n+        - action: execute\n+          file: tutorial-steps/dev/wait-for-containers.sh\n+          render:\n+            skip: true\n+\n+    - title: Create the original topic\n+      content:\n+        - action: execute\n+          file: tutorial-steps/dev/create-topic.sh\n+          render:\n+            file: tutorials/change-topic-partitions-replicas/ksql/markup/dev/create-topic.adoc\n+\n+    - title: Describe the original topic\n+      content:\n+        - action: execute\n+          file: tutorial-steps/dev/describe-original-topic.sh\n+          render:\n+            file: tutorials/change-topic-partitions-replicas/ksql/markup/dev/describe-original-topic.adoc\n+\n+    - title: Write the program interactively using the CLI\n+      content:\n+        - action: docker_ksql_cli_session\n+          container: ksqldb-cli\n+          docker_bootup_file: tutorial-steps/dev/start-cli.sh\n+          column_width: 24\n+          render:\n+            file: tutorials/change-topic-partitions-replicas/ksql/markup/dev/start-cli.adoc\n+          stdin:\n+            - file: tutorial-steps/dev/create-original-stream.sql\n+              render:\n+                file: tutorials/change-topic-partitions-replicas/ksql/markup/dev/create-inputs.adoc\n+\n+            - file: tutorial-steps/dev/create-new-stream.sql\n+              render:\n+                file: tutorials/change-topic-partitions-replicas/ksql/markup/dev/create-new-stream.adoc\n+          stdout:\n+            directory: tutorial-steps/dev/outputs\n+\n+    - title: Describe the new topic\n+      content:\n+        - action: execute\n+          file: tutorial-steps/dev/describe-new-topic.sh\n+          stdout: tutorial-steps/dev/outputs/actual-describe-from-topic2.txt\n+          render:\n+            file: tutorials/change-topic-partitions-replicas/ksql/markup/dev/describe-new-topic.adoc\n+\n+    - title: Write your statements to a file\n+      content:\n+        - action: make_file\n+          file: src/statements.sql\n+          render:\n+            file: tutorials/change-topic-partitions-replicas/ksql/markup/dev/make-src-file.adoc\n+\n+test:\n+  steps:\n+    - title: Create the test data\n+      content:\n+        - action: make_file\n+          file: test/input.txt\n+          render:\n+            file: tutorials/change-topic-partitions-replicas/ksql/markup/test/make-test-input.adoc\n+\n+    - title: Produce the test data to the original topic\n+      content:\n+        - action: execute\n+          file: tutorial-steps/test/harness-console-producer.sh\n+          stdin: test/input.txt\n+          render:\n+            file: tutorials/change-topic-partitions-replicas/ksql/markup/test/produce-data-input.adoc\n+\n+        - name: wait for producer to write records\n+          action: sleep\n+          ms: 2000\n+          render:\n+            skip: true\n+\n+    - title: View the data in the original topic (partition 0)\n+      content:\n+        - action: execute\n+          file: tutorial-steps/test/harness-console-consumer-topic1-partition-0.sh\n+          stdout: tutorial-steps/test/outputs/actual-output-topic1-partition-0.txt\n+          render:\n+            file: tutorials/change-topic-partitions-replicas/ksql/markup/test/consume-data-topic1-partition-0.adoc\n+\n+    - title: View the data in the new topic (partition 0)\n+      content:\n+        - action: execute\n+          file: tutorial-steps/test/harness-console-consumer-topic2-partition-0.sh\n+          stdout: tutorial-steps/test/outputs/actual-output-topic2-partition-0.txt\n+          render:\n+            file: tutorials/change-topic-partitions-replicas/ksql/markup/test/consume-data-topic2-partition-0.adoc\n+\n+    - title: View the data in the new topic (partition 1)\n+      content:\n+        - action: execute\n+          file: tutorial-steps/test/harness-console-consumer-topic2-partition-1.sh\n+          stdout: tutorial-steps/test/outputs/actual-output-topic2-partition-1.txt\n+          render:\n+            file: tutorials/change-topic-partitions-replicas/ksql/markup/test/consume-data-topic2-partition-1.adoc\n+\n+prod:\n+  steps:\n+    - title: Send the statements to the REST API\n+      content:\n+        - action: skip\n+          render:\n+            file: tutorials/change-topic-partitions-replicas/ksql/markup/prod/submit-to-api.adoc\n+\n+        - action: execute\n+          file: tutorial-steps/dev/clean-up.sh\n+          render:\n+            skip: true", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f844d695a0bb90ad09c93bdde749892ed98200bc"}, "originalPosition": 139}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODIyMDk4Mg==", "bodyText": "Maybe we should add a step here instructing the user to shut down the ksqlDB cli since it's not needed beyond this step.", "url": "https://github.com/confluentinc/kafka-tutorials/pull/470#discussion_r458220982", "createdAt": "2020-07-21T16:14:52Z", "author": {"login": "bbejeck"}, "path": "_includes/tutorials/change-topic-partitions-replicas/ksql/markup/dev/create-new-stream.adoc", "diffHunk": "@@ -0,0 +1,7 @@\n+Next, create a new ksqlDB stream\u2014let's call it `s2`\u2014that will be backed by a new target Kafka topic `topic2` with the desired number of partitions and replicas. Using the `WITH` clause, you can specify the partitions and replicas of the underlying Kafka topic.\n+\n+The result of `SELECT * FROM S1` causes every record from Kafka topic `topic1` (with 1 partition and 1 replica) to be produced to Kafka topic `topic2` (with 2 partitions and 2 replicas).\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f844d695a0bb90ad09c93bdde749892ed98200bc"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODI0MjExMw==", "bodyText": "FYC: Swap the order of creating the test data and starting the producer.  It will be simpler for users to simply copy/paste from the tutorial.", "url": "https://github.com/confluentinc/kafka-tutorials/pull/470#discussion_r458242113", "createdAt": "2020-07-21T16:47:12Z", "author": {"login": "bbejeck"}, "path": "_data/harnesses/change-topic-partitions-replicas/ksql.yml", "diffHunk": "@@ -0,0 +1,139 @@\n+dev:\n+  steps:\n+    - title: Initialize the project\n+      content:\n+        - action: execute\n+          file: tutorial-steps/dev/init.sh\n+          render:\n+            file: tutorials/change-topic-partitions-replicas/ksql/markup/dev/init.adoc\n+\n+        - change_directory: change-topic-partitions-replicas\n+          action: execute\n+          file: tutorial-steps/dev/make-dirs.sh\n+          render:\n+            file: tutorials/change-topic-partitions-replicas/ksql/markup/dev/make-dirs.adoc\n+\n+    - title: Get Confluent Platform\n+      content:\n+        - action: make_file\n+          file: docker-compose.yml\n+          render:\n+            file: tutorials/change-topic-partitions-replicas/ksql/markup/dev/make-docker-compose.adoc\n+\n+        - action: execute_async\n+          file: tutorial-steps/dev/docker-compose-up.sh\n+          render:\n+            file: tutorials/change-topic-partitions-replicas/ksql/markup/dev/start-compose.adoc\n+\n+        - action: execute\n+          file: tutorial-steps/dev/wait-for-containers.sh\n+          render:\n+            skip: true\n+\n+    - title: Create the original topic\n+      content:\n+        - action: execute\n+          file: tutorial-steps/dev/create-topic.sh\n+          render:\n+            file: tutorials/change-topic-partitions-replicas/ksql/markup/dev/create-topic.adoc\n+\n+    - title: Describe the original topic\n+      content:\n+        - action: execute\n+          file: tutorial-steps/dev/describe-original-topic.sh\n+          render:\n+            file: tutorials/change-topic-partitions-replicas/ksql/markup/dev/describe-original-topic.adoc\n+\n+    - title: Write the program interactively using the CLI\n+      content:\n+        - action: docker_ksql_cli_session\n+          container: ksqldb-cli\n+          docker_bootup_file: tutorial-steps/dev/start-cli.sh\n+          column_width: 24\n+          render:\n+            file: tutorials/change-topic-partitions-replicas/ksql/markup/dev/start-cli.adoc\n+          stdin:\n+            - file: tutorial-steps/dev/create-original-stream.sql\n+              render:\n+                file: tutorials/change-topic-partitions-replicas/ksql/markup/dev/create-inputs.adoc\n+\n+            - file: tutorial-steps/dev/create-new-stream.sql\n+              render:\n+                file: tutorials/change-topic-partitions-replicas/ksql/markup/dev/create-new-stream.adoc\n+          stdout:\n+            directory: tutorial-steps/dev/outputs\n+\n+    - title: Describe the new topic\n+      content:\n+        - action: execute\n+          file: tutorial-steps/dev/describe-new-topic.sh\n+          stdout: tutorial-steps/dev/outputs/actual-describe-from-topic2.txt\n+          render:\n+            file: tutorials/change-topic-partitions-replicas/ksql/markup/dev/describe-new-topic.adoc\n+\n+    - title: Write your statements to a file\n+      content:\n+        - action: make_file\n+          file: src/statements.sql\n+          render:\n+            file: tutorials/change-topic-partitions-replicas/ksql/markup/dev/make-src-file.adoc\n+\n+test:\n+  steps:\n+    - title: Create the test data", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f844d695a0bb90ad09c93bdde749892ed98200bc"}, "originalPosition": 83}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8f59218b3a6bd366fa3c71ccceb5747f4b852240", "author": {"user": {"login": "ybyzek", "name": "Yeva Byzek"}}, "url": "https://github.com/confluentinc/kafka-tutorials/commit/8f59218b3a6bd366fa3c71ccceb5747f4b852240", "committedDate": "2020-07-22T16:41:47Z", "message": "Address feedback from Bill"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e92007bfe68b01fa40a7307a3442831b0b684144", "author": {"user": {"login": "ybyzek", "name": "Yeva Byzek"}}, "url": "https://github.com/confluentinc/kafka-tutorials/commit/e92007bfe68b01fa40a7307a3442831b0b684144", "committedDate": "2020-07-22T16:44:25Z", "message": "Merge branch 'master' into GH-446"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "97ff23780632cf8d031412a449c88663d256db6d", "author": {"user": {"login": "ybyzek", "name": "Yeva Byzek"}}, "url": "https://github.com/confluentinc/kafka-tutorials/commit/97ff23780632cf8d031412a449c88663d256db6d", "committedDate": "2020-07-22T16:47:14Z", "message": "Tweak line"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "71fd519bb95c1a4655cf8b391ae4ba4a04f33419", "author": {"user": {"login": "ybyzek", "name": "Yeva Byzek"}}, "url": "https://github.com/confluentinc/kafka-tutorials/commit/71fd519bb95c1a4655cf8b391ae4ba4a04f33419", "committedDate": "2020-07-22T16:53:16Z", "message": "Add missing file"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "47c4900fdc8c344c8bfd1249e12cdf1af73c5ad1", "author": {"user": {"login": "ybyzek", "name": "Yeva Byzek"}}, "url": "https://github.com/confluentinc/kafka-tutorials/commit/47c4900fdc8c344c8bfd1249e12cdf1af73c5ad1", "committedDate": "2020-07-22T16:54:18Z", "message": "Tweak language"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUzNTM0MDAy", "url": "https://github.com/confluentinc/kafka-tutorials/pull/470#pullrequestreview-453534002", "createdAt": "2020-07-22T17:29:00Z", "commit": {"oid": "47c4900fdc8c344c8bfd1249e12cdf1af73c5ad1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 196, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}