{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk5MzkwMTYy", "number": 576, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QyMDoyNToxNVrOErWCsQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QyMDozMTo1NFrOErWLOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEzODg1MzYxOnYy", "diffSide": "RIGHT", "path": ".semaphore/semaphore.yml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QyMDoyNToxNVrOHeEMJA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QyMDoyNToxNVrOHeEMJA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTI4Nzk3Mg==", "bodyText": "This rule is needed so any PR automatically promoted except for dependabot PRs.", "url": "https://github.com/confluentinc/kafka-tutorials/pull/576#discussion_r501287972", "createdAt": "2020-10-07T20:25:15Z", "author": {"login": "bbejeck"}, "path": ".semaphore/semaphore.yml", "diffHunk": "@@ -20,6 +20,11 @@ promotions:\n         branch:\n           - ^master$\n \n+  - name: Stage PRs for review \n+    pipeline_file: pr-staging-deploy.yml\n+    auto_promote:\n+      when: \"branch != 'master' or branch != 'release' or branch !~ '^dependabot\\.'\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3ceb0e1d9b507807f4c31a58723a21a8af524ba3"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEzODg1NjM1OnYy", "diffSide": "RIGHT", "path": ".semaphore/semaphore.yml", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QyMDoyNjowOVrOHeEN4g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QyMDozNDo1MlrOHeEgTA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTI4ODQxOA==", "bodyText": "needed to change this since I removed the $SEMAPHORE_GIT_SHA", "url": "https://github.com/confluentinc/kafka-tutorials/pull/576#discussion_r501288418", "createdAt": "2020-10-07T20:26:09Z", "author": {"login": "bbejeck"}, "path": ".semaphore/semaphore.yml", "diffHunk": "@@ -34,8 +39,8 @@ blocks:\n       jobs:\n         - name: Compile with Jekyll\n           commands:\n-            - bundle exec jekyll build --baseurl \"/$SEMAPHORE_GIT_BRANCH/$SEMAPHORE_GIT_SHA\"\n-            - cache store site-$SEMAPHORE_GIT_SHA _site\n+            - bundle exec jekyll build --baseurl \"/$SEMAPHORE_GIT_BRANCH\"\n+            - cache store site-$SEMAPHORE_GIT_BRANCH _site", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3ceb0e1d9b507807f4c31a58723a21a8af524ba3"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTI5MzEzMg==", "bodyText": "The SHA was removed from the deployment path, but you might want to use it for the cache key as before. Consider a scenario where you went back to an older job for a branch and hit the deploy to staging button. With the current change, it would not deploy the site from the SHA that this older job built; semaphore would redeploy the latest build", "url": "https://github.com/confluentinc/kafka-tutorials/pull/576#discussion_r501293132", "createdAt": "2020-10-07T20:34:52Z", "author": {"login": "colinhicks"}, "path": ".semaphore/semaphore.yml", "diffHunk": "@@ -34,8 +39,8 @@ blocks:\n       jobs:\n         - name: Compile with Jekyll\n           commands:\n-            - bundle exec jekyll build --baseurl \"/$SEMAPHORE_GIT_BRANCH/$SEMAPHORE_GIT_SHA\"\n-            - cache store site-$SEMAPHORE_GIT_SHA _site\n+            - bundle exec jekyll build --baseurl \"/$SEMAPHORE_GIT_BRANCH\"\n+            - cache store site-$SEMAPHORE_GIT_BRANCH _site", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTI4ODQxOA=="}, "originalCommit": {"oid": "3ceb0e1d9b507807f4c31a58723a21a8af524ba3"}, "originalPosition": 19}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEzODg1NzAwOnYy", "diffSide": "RIGHT", "path": ".semaphore/staging-site-deploy.yml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QyMDoyNjoxOVrOHeEOTA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QyMDoyNjoxOVrOHeEOTA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTI4ODUyNA==", "bodyText": "same here", "url": "https://github.com/confluentinc/kafka-tutorials/pull/576#discussion_r501288524", "createdAt": "2020-10-07T20:26:19Z", "author": {"login": "bbejeck"}, "path": ".semaphore/staging-site-deploy.yml", "diffHunk": "@@ -13,6 +13,6 @@ blocks:\n         - name: Compile and deploy site\n           commands:\n             - checkout\n-            - cache restore site-$SEMAPHORE_GIT_SHA\n-            - aws s3 cp --recursive ./_site \"s3://kafka-tutorials-staging/$SEMAPHORE_GIT_BRANCH/$SEMAPHORE_GIT_SHA/\"\n-            - echo \"Deployed to http://kafka-tutorials-staging.s3-website-us-west-2.amazonaws.com/$SEMAPHORE_GIT_BRANCH/$SEMAPHORE_GIT_SHA/\"\n+            - cache restore site-$SEMAPHORE_GIT_BRANCH", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3ceb0e1d9b507807f4c31a58723a21a8af524ba3"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEzODg3NTQ1OnYy", "diffSide": "RIGHT", "path": ".semaphore/semaphore.yml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QyMDozMTo1NFrOHeEaHA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QyMDozNDoxOVrOHeEfIg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTI5MTU0OA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                  when: \"branch != 'master' or branch != 'release' or branch !~ '^dependabot\\.'\"\n          \n          \n            \n                  when: \"branch != 'master' and branch != 'release' and branch !~ '^dependabot\\.'\"", "url": "https://github.com/confluentinc/kafka-tutorials/pull/576#discussion_r501291548", "createdAt": "2020-10-07T20:31:54Z", "author": {"login": "colinhicks"}, "path": ".semaphore/semaphore.yml", "diffHunk": "@@ -20,6 +20,11 @@ promotions:\n         branch:\n           - ^master$\n \n+  - name: Stage PRs for review \n+    pipeline_file: pr-staging-deploy.yml\n+    auto_promote:\n+      when: \"branch != 'master' or branch != 'release' or branch !~ '^dependabot\\.'\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3ceb0e1d9b507807f4c31a58723a21a8af524ba3"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTI5MjgzNA==", "bodyText": "Thanks,  @colinhicks, that is a better condition", "url": "https://github.com/confluentinc/kafka-tutorials/pull/576#discussion_r501292834", "createdAt": "2020-10-07T20:34:19Z", "author": {"login": "bbejeck"}, "path": ".semaphore/semaphore.yml", "diffHunk": "@@ -20,6 +20,11 @@ promotions:\n         branch:\n           - ^master$\n \n+  - name: Stage PRs for review \n+    pipeline_file: pr-staging-deploy.yml\n+    auto_promote:\n+      when: \"branch != 'master' or branch != 'release' or branch !~ '^dependabot\\.'\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTI5MTU0OA=="}, "originalCommit": {"oid": "3ceb0e1d9b507807f4c31a58723a21a8af524ba3"}, "originalPosition": 7}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3819, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}