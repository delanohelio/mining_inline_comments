{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ0MDE2Mjg5", "number": 1542, "title": "Refactors to ThreadedAnvilChunkStorage and ChunkHolder generation logic", "bodyText": "This mainly targets the asynchronous loading side of TACS/ChunkHolder, especially regarding the naming of functions returning futures. This should improve consistency and hopefully better describe the implications of each function.\nIt also improves the targetGenerationRadius in ChunkStatus which would previously be easily confused with the task margin, which is often referred to as radius.", "createdAt": "2020-07-03T11:47:21Z", "url": "https://github.com/FabricMC/yarn/pull/1542", "merged": true, "mergeCommit": {"oid": "d51da147c1886855ea644f2e6961b8f4a2e4f0c0"}, "closed": true, "closedAt": "2020-07-28T19:13:23Z", "author": {"login": "Gegy"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcxRwj-AH2gAyNDQ0MDE2Mjg5OjE3NTBjMmIzYWE1MDdiOTcwMjA0MzJlZWM0NTgwYjc2ZWQ2NDRiZjg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc5THucAH2gAyNDQ0MDE2Mjg5OmViOGNhNjJkN2Y0NGNiMGIwNzQ0YTQxOGI3MjQzNzUzYmZjNzIzODY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "1750c2b3aa507b97020432eec4580b76ed644bf8", "author": {"user": {"login": "Gegy", "name": null}}, "url": "https://github.com/FabricMC/yarn/commit/1750c2b3aa507b97020432eec4580b76ed644bf8", "committedDate": "2020-07-03T11:29:48Z", "message": "Refactors to ThreadedAnvilChunkStorage and ChunkHolder generation logic"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "822b626813c40036eb1266dddd69e2b50961130f", "author": {"user": {"login": "Gegy", "name": null}}, "url": "https://github.com/FabricMC/yarn/commit/822b626813c40036eb1266dddd69e2b50961130f", "committedDate": "2020-07-03T11:33:52Z", "message": "revert statusListeners"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b0ff6c78b0f1e0c6b68838336d018f26beec1c04", "author": {"user": {"login": "Gegy", "name": null}}, "url": "https://github.com/FabricMC/yarn/commit/b0ff6c78b0f1e0c6b68838336d018f26beec1c04", "committedDate": "2020-07-03T11:39:05Z", "message": "improve consistency of future-returning functions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e98d0e11b1448f74133fe95d9ffadf87f5a4e440", "author": {"user": {"login": "Gegy", "name": null}}, "url": "https://github.com/FabricMC/yarn/commit/e98d0e11b1448f74133fe95d9ffadf87f5a4e440", "committedDate": "2020-07-03T12:45:13Z", "message": "ChunkHolder.ticking -> accessible"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ2MzQ3OTQz", "url": "https://github.com/FabricMC/yarn/pull/1542#pullrequestreview-446347943", "createdAt": "2020-07-10T12:06:59Z", "commit": {"oid": "05fe99596c93e51b52979e8cee10d33d8584a144"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2e613cebf88253b159932488e766668b82c10ebf", "author": {"user": {"login": "Gegy", "name": null}}, "url": "https://github.com/FabricMC/yarn/commit/2e613cebf88253b159932488e766668b82c10ebf", "committedDate": "2020-07-26T15:46:00Z", "message": "Merge 20w30a"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "05fe99596c93e51b52979e8cee10d33d8584a144", "author": {"user": {"login": "Gegy", "name": null}}, "url": "https://github.com/FabricMC/yarn/commit/05fe99596c93e51b52979e8cee10d33d8584a144", "committedDate": "2020-07-08T18:33:11Z", "message": "Merge branch '20w28a' into tacs"}, "afterCommit": {"oid": "2e613cebf88253b159932488e766668b82c10ebf", "author": {"user": {"login": "Gegy", "name": null}}, "url": "https://github.com/FabricMC/yarn/commit/2e613cebf88253b159932488e766668b82c10ebf", "committedDate": "2020-07-26T15:46:00Z", "message": "Merge 20w30a"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6e55a24f05ead2c4e39253117949342e818db828", "author": {"user": {"login": "Gegy", "name": null}}, "url": "https://github.com/FabricMC/yarn/commit/6e55a24f05ead2c4e39253117949342e818db828", "committedDate": "2020-07-26T15:55:05Z", "message": "Update ChunkStatus \"distance from full\" mappings and name ChunkHolder#future more specific to saving"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU2MDk5NTI1", "url": "https://github.com/FabricMC/yarn/pull/1542#pullrequestreview-456099525", "createdAt": "2020-07-27T20:11:30Z", "commit": {"oid": "6e55a24f05ead2c4e39253117949342e818db828"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QyMDoxMTozMFrOG3x0bA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QyMDoxMjoxMFrOG3x1xA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE0MTEwMA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \tMETHOD method_17247 awaitEntitiesTickable (Lnet/minecraft/class_1923;)Ljava/util/concurrent/CompletableFuture;\n          \n          \n            \n            \tMETHOD method_17247 awaitTickableEntities (Lnet/minecraft/class_1923;)Ljava/util/concurrent/CompletableFuture;", "url": "https://github.com/FabricMC/yarn/pull/1542#discussion_r461141100", "createdAt": "2020-07-27T20:11:30Z", "author": {"login": "liach"}, "path": "mappings/net/minecraft/server/world/ThreadedAnvilChunkStorage.mapping", "diffHunk": "@@ -62,7 +68,7 @@ CLASS net/minecraft/class_3898 net/minecraft/server/world/ThreadedAnvilChunkStor\n \tMETHOD method_17242 save (Z)V\n \t\tARG 1 flush\n \tMETHOD method_17244 updateHolderMap ()Z\n-\tMETHOD method_17247 createEntityTickingChunkFuture (Lnet/minecraft/class_1923;)Ljava/util/concurrent/CompletableFuture;\n+\tMETHOD method_17247 awaitEntitiesTickable (Lnet/minecraft/class_1923;)Ljava/util/concurrent/CompletableFuture;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6e55a24f05ead2c4e39253117949342e818db828"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE0MTMwMw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \tMETHOD method_17235 makeTickable (Lnet/minecraft/class_3193;)Ljava/util/concurrent/CompletableFuture;\n          \n          \n            \n            \tMETHOD method_17235 awaitTickable (Lnet/minecraft/class_3193;)Ljava/util/concurrent/CompletableFuture;", "url": "https://github.com/FabricMC/yarn/pull/1542#discussion_r461141303", "createdAt": "2020-07-27T20:11:51Z", "author": {"login": "liach"}, "path": "mappings/net/minecraft/server/world/ThreadedAnvilChunkStorage.mapping", "diffHunk": "@@ -40,19 +42,23 @@ CLASS net/minecraft/class_3898 net/minecraft/server/world/ThreadedAnvilChunkStor\n \t\tARG 1 pos\n \t\tARG 3 level\n \t\tARG 4 holder\n-\tMETHOD method_17220 createChunkRegionFuture (Lnet/minecraft/class_1923;ILjava/util/function/IntFunction;)Ljava/util/concurrent/CompletableFuture;\n+\tMETHOD method_17220 getRegion (Lnet/minecraft/class_1923;ILjava/util/function/IntFunction;)Ljava/util/concurrent/CompletableFuture;\n \t\tARG 1 centerChunk\n \t\tARG 2 margin\n \t\tARG 3 distanceToStatus\n \tMETHOD method_17226 convertToFullChunk (Lnet/minecraft/class_3193;)Ljava/util/concurrent/CompletableFuture;\n \tMETHOD method_17228 save (Lnet/minecraft/class_2791;)Z\n+\t\tARG 1 chunk\n \tMETHOD method_17229 getRequiredStatusForGeneration (Lnet/minecraft/class_2806;I)Lnet/minecraft/class_2806;\n \t\tARG 1 centerChunkTargetStatus\n \t\tARG 2 distance\n \tMETHOD method_17233 tick (Ljava/util/function/BooleanSupplier;)V\n \t\tARG 1 shouldKeepTicking\n-\tMETHOD method_17235 createTickingFuture (Lnet/minecraft/class_3193;)Ljava/util/concurrent/CompletableFuture;\n-\tMETHOD method_17236 createChunkFuture (Lnet/minecraft/class_3193;Lnet/minecraft/class_2806;)Ljava/util/concurrent/CompletableFuture;\n+\tMETHOD method_17235 makeTickable (Lnet/minecraft/class_3193;)Ljava/util/concurrent/CompletableFuture;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6e55a24f05ead2c4e39253117949342e818db828"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE0MTM2NQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \tMETHOD method_17236 getChunk (Lnet/minecraft/class_3193;Lnet/minecraft/class_2806;)Ljava/util/concurrent/CompletableFuture;\n          \n          \n            \n            \tMETHOD method_17236 awaitChunk (Lnet/minecraft/class_3193;Lnet/minecraft/class_2806;)Ljava/util/concurrent/CompletableFuture;", "url": "https://github.com/FabricMC/yarn/pull/1542#discussion_r461141365", "createdAt": "2020-07-27T20:11:59Z", "author": {"login": "liach"}, "path": "mappings/net/minecraft/server/world/ThreadedAnvilChunkStorage.mapping", "diffHunk": "@@ -40,19 +42,23 @@ CLASS net/minecraft/class_3898 net/minecraft/server/world/ThreadedAnvilChunkStor\n \t\tARG 1 pos\n \t\tARG 3 level\n \t\tARG 4 holder\n-\tMETHOD method_17220 createChunkRegionFuture (Lnet/minecraft/class_1923;ILjava/util/function/IntFunction;)Ljava/util/concurrent/CompletableFuture;\n+\tMETHOD method_17220 getRegion (Lnet/minecraft/class_1923;ILjava/util/function/IntFunction;)Ljava/util/concurrent/CompletableFuture;\n \t\tARG 1 centerChunk\n \t\tARG 2 margin\n \t\tARG 3 distanceToStatus\n \tMETHOD method_17226 convertToFullChunk (Lnet/minecraft/class_3193;)Ljava/util/concurrent/CompletableFuture;\n \tMETHOD method_17228 save (Lnet/minecraft/class_2791;)Z\n+\t\tARG 1 chunk\n \tMETHOD method_17229 getRequiredStatusForGeneration (Lnet/minecraft/class_2806;I)Lnet/minecraft/class_2806;\n \t\tARG 1 centerChunkTargetStatus\n \t\tARG 2 distance\n \tMETHOD method_17233 tick (Ljava/util/function/BooleanSupplier;)V\n \t\tARG 1 shouldKeepTicking\n-\tMETHOD method_17235 createTickingFuture (Lnet/minecraft/class_3193;)Ljava/util/concurrent/CompletableFuture;\n-\tMETHOD method_17236 createChunkFuture (Lnet/minecraft/class_3193;Lnet/minecraft/class_2806;)Ljava/util/concurrent/CompletableFuture;\n+\tMETHOD method_17235 makeTickable (Lnet/minecraft/class_3193;)Ljava/util/concurrent/CompletableFuture;\n+\t\tARG 1 holder\n+\tMETHOD method_17236 getChunk (Lnet/minecraft/class_3193;Lnet/minecraft/class_2806;)Ljava/util/concurrent/CompletableFuture;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6e55a24f05ead2c4e39253117949342e818db828"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE0MTQ0NA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \tMETHOD method_17220 getRegion (Lnet/minecraft/class_1923;ILjava/util/function/IntFunction;)Ljava/util/concurrent/CompletableFuture;\n          \n          \n            \n            \tMETHOD method_17220 awaitRegion (Lnet/minecraft/class_1923;ILjava/util/function/IntFunction;)Ljava/util/concurrent/CompletableFuture;", "url": "https://github.com/FabricMC/yarn/pull/1542#discussion_r461141444", "createdAt": "2020-07-27T20:12:10Z", "author": {"login": "liach"}, "path": "mappings/net/minecraft/server/world/ThreadedAnvilChunkStorage.mapping", "diffHunk": "@@ -40,19 +42,23 @@ CLASS net/minecraft/class_3898 net/minecraft/server/world/ThreadedAnvilChunkStor\n \t\tARG 1 pos\n \t\tARG 3 level\n \t\tARG 4 holder\n-\tMETHOD method_17220 createChunkRegionFuture (Lnet/minecraft/class_1923;ILjava/util/function/IntFunction;)Ljava/util/concurrent/CompletableFuture;\n+\tMETHOD method_17220 getRegion (Lnet/minecraft/class_1923;ILjava/util/function/IntFunction;)Ljava/util/concurrent/CompletableFuture;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6e55a24f05ead2c4e39253117949342e818db828"}, "originalPosition": 15}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU2MjU5NDU4", "url": "https://github.com/FabricMC/yarn/pull/1542#pullrequestreview-456259458", "createdAt": "2020-07-28T02:28:45Z", "commit": {"oid": "6e55a24f05ead2c4e39253117949342e818db828"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU2NDIxMTg5", "url": "https://github.com/FabricMC/yarn/pull/1542#pullrequestreview-456421189", "createdAt": "2020-07-28T08:38:35Z", "commit": {"oid": "6e55a24f05ead2c4e39253117949342e818db828"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eb8ca62d7f44cb0b0744a418b7243753bfc72386", "author": {"user": {"login": "Gegy", "name": null}}, "url": "https://github.com/FabricMC/yarn/commit/eb8ca62d7f44cb0b0744a418b7243753bfc72386", "committedDate": "2020-07-28T09:36:24Z", "message": "Remove `await` prefix for consistency"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4610, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}