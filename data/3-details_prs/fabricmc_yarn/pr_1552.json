{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ1MzQ4NTMz", "number": 1552, "title": "Structure Placement", "bodyText": "I tried documenting how structure placement works in the Javadocs.\nDebatable: StructureConfig seems like it's more like a StructurePlacementConfig to me, but I didn't rename it in this.\nI've also started using the terms \"placement grid\" and \"grid cell\" because I think it describes pretty well how the algorithm works.\nA bit of background info on the placement.\nGiven spacing=32, which means one structure placed per 32x32 chunks, the following shows where within that 32x32 chunks the structure could be placed (samples=1000):\n\nSince the charts might need an explanation: I applied the spawn-position algorithm 1000 times for a single cell in the placement grid (32x32 chunks in this example), with various types of parameters. Each pixel in the chart indicates how many structures (out of 1000) ended up in that particular chunk. Darker = More, Brighter = Fewer.", "createdAt": "2020-07-07T11:22:45Z", "url": "https://github.com/FabricMC/yarn/pull/1552", "merged": true, "mergeCommit": {"oid": "099c461affdd942e5eb21cd9e4859c6607fd7e00"}, "closed": true, "closedAt": "2020-07-09T17:44:25Z", "author": {"login": "shartte"}, "timelineItems": {"totalCount": 16, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcykVqEABqjM1MjAwMTM4MTc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABczStgcgFqTQ0NTgzNTc3NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5e339ddcfd43c844c2c11198149aed1506ed015f", "author": {"user": {"login": "shartte", "name": null}}, "url": "https://github.com/FabricMC/yarn/commit/5e339ddcfd43c844c2c11198149aed1506ed015f", "committedDate": "2020-07-07T11:20:29Z", "message": "Structure placement"}, "afterCommit": {"oid": "231585f5fc7b0adce37ec06f00e816e684de4cc9", "author": {"user": {"login": "shartte", "name": null}}, "url": "https://github.com/FabricMC/yarn/commit/231585f5fc7b0adce37ec06f00e816e684de4cc9", "committedDate": "2020-07-07T11:42:24Z", "message": "Structure placement"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQzODE5NTAy", "url": "https://github.com/FabricMC/yarn/pull/1552#pullrequestreview-443819502", "createdAt": "2020-07-07T11:57:45Z", "commit": {"oid": "231585f5fc7b0adce37ec06f00e816e684de4cc9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QxMTo1Nzo0NVrOGt7Odw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QxMTo1Nzo0NVrOGt7Odw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDgwOTQ2Mw==", "bodyText": "Might be a bit confusing here- maybe rather:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\tCOMMENT Defines how many chunks make up one cell in the grid used to place structures.\n          \n          \n            \n            \t\tCOMMENT Defines the width in chunks of one cell in the grid used to place structures.", "url": "https://github.com/FabricMC/yarn/pull/1552#discussion_r450809463", "createdAt": "2020-07-07T11:57:45Z", "author": {"login": "Gegy"}, "path": "mappings/net/minecraft/world/gen/chunk/StructureConfig.mapping", "diffHunk": "@@ -1,8 +1,29 @@\n CLASS net/minecraft/class_5314 net/minecraft/world/gen/chunk/StructureConfig\n+\tCOMMENT Contains parameters for placement of a single type of {@link net.minecraft.world.gen.feature.StructureFeature} during chunk\n+\tCOMMENT generation.\n \tFIELD field_24917 CODEC Lcom/mojang/serialization/Codec;\n \tFIELD field_24918 spacing I\n+\t\tCOMMENT Defines how many chunks make up one cell in the grid used to place structures.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "231585f5fc7b0adce37ec06f00e816e684de4cc9"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQzODIwNzE0", "url": "https://github.com/FabricMC/yarn/pull/1552#pullrequestreview-443820714", "createdAt": "2020-07-07T11:59:35Z", "commit": {"oid": "231585f5fc7b0adce37ec06f00e816e684de4cc9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QxMTo1OTozNVrOGt7SEA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QxMTo1OTozNVrOGt7SEA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDgxMDM4NA==", "bodyText": "It might help to define separation along the lines of being the minimum distance in chunks between structures", "url": "https://github.com/FabricMC/yarn/pull/1552#discussion_r450810384", "createdAt": "2020-07-07T11:59:35Z", "author": {"login": "Gegy"}, "path": "mappings/net/minecraft/world/gen/chunk/StructureConfig.mapping", "diffHunk": "@@ -1,8 +1,29 @@\n CLASS net/minecraft/class_5314 net/minecraft/world/gen/chunk/StructureConfig\n+\tCOMMENT Contains parameters for placement of a single type of {@link net.minecraft.world.gen.feature.StructureFeature} during chunk\n+\tCOMMENT generation.\n \tFIELD field_24917 CODEC Lcom/mojang/serialization/Codec;\n \tFIELD field_24918 spacing I\n+\t\tCOMMENT Defines how many chunks make up one cell in the grid used to place structures.\n+\t\tCOMMENT Each cell in the grid will receive one potential structure start.\n+\t\tCOMMENT <p>\n+\t\tCOMMENT Minimum is 1, which means the structure will potentially be placed in every chunk.\n+\t\tCOMMENT 2 leads to one structure per 2x2 chunks, and so on.\n \tFIELD field_24919 separation I\n+\t\tCOMMENT Defines how varied the placement of a structure within the chunk grid (see spacing) is.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "231585f5fc7b0adce37ec06f00e816e684de4cc9"}, "originalPosition": 12}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "231585f5fc7b0adce37ec06f00e816e684de4cc9", "author": {"user": {"login": "shartte", "name": null}}, "url": "https://github.com/FabricMC/yarn/commit/231585f5fc7b0adce37ec06f00e816e684de4cc9", "committedDate": "2020-07-07T11:42:24Z", "message": "Structure placement"}, "afterCommit": {"oid": "9c1a9b4ffd0919590918d7b2b425a9a02684892f", "author": {"user": {"login": "shartte", "name": null}}, "url": "https://github.com/FabricMC/yarn/commit/9c1a9b4ffd0919590918d7b2b425a9a02684892f", "committedDate": "2020-07-07T14:38:07Z", "message": "Structure placement"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ0MDkwMjQw", "url": "https://github.com/FabricMC/yarn/pull/1552#pullrequestreview-444090240", "createdAt": "2020-07-07T17:08:35Z", "commit": {"oid": "9c1a9b4ffd0919590918d7b2b425a9a02684892f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7812cd95a37a888220d97104c3731558730519bf", "author": {"user": {"login": "shartte", "name": null}}, "url": "https://github.com/FabricMC/yarn/commit/7812cd95a37a888220d97104c3731558730519bf", "committedDate": "2020-07-08T23:03:17Z", "message": "Structure placement"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9c1a9b4ffd0919590918d7b2b425a9a02684892f", "author": {"user": {"login": "shartte", "name": null}}, "url": "https://github.com/FabricMC/yarn/commit/9c1a9b4ffd0919590918d7b2b425a9a02684892f", "committedDate": "2020-07-07T14:38:07Z", "message": "Structure placement"}, "afterCommit": {"oid": "7812cd95a37a888220d97104c3731558730519bf", "author": {"user": {"login": "shartte", "name": null}}, "url": "https://github.com/FabricMC/yarn/commit/7812cd95a37a888220d97104c3731558730519bf", "committedDate": "2020-07-08T23:03:17Z", "message": "Structure placement"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e0be9da7b27b9370a0f627844e80a8cbd2d93e8c", "author": {"user": {"login": "shartte", "name": null}}, "url": "https://github.com/FabricMC/yarn/commit/e0be9da7b27b9370a0f627844e80a8cbd2d93e8c", "committedDate": "2020-07-09T00:24:32Z", "message": "Enhanced structure mappings"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ1MjEyOTQ4", "url": "https://github.com/FabricMC/yarn/pull/1552#pullrequestreview-445212948", "createdAt": "2020-07-09T00:25:46Z", "commit": {"oid": "e0be9da7b27b9370a0f627844e80a8cbd2d93e8c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQwMDoyNTo0N1rOGu9jvg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQwMDoyNTo0N1rOGu9jvg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTg5NjI1NA==", "bodyText": "Underscore sucks, but while it's private, Enigma won't let me name it the same as a field in the subclass.", "url": "https://github.com/FabricMC/yarn/pull/1552#discussion_r451896254", "createdAt": "2020-07-09T00:25:47Z", "author": {"login": "shartte"}, "path": "mappings/net/minecraft/world/gen/chunk/ChunkGenerator.mapping", "diffHunk": "@@ -4,6 +4,10 @@ CLASS net/minecraft/class_2794 net/minecraft/world/gen/chunk/ChunkGenerator\n \tCOMMENT Biome placement starts here, however all vanilla and most modded chunk generators delegate this to a {@linkplain net.minecraft.world.biome.source.BiomeSource biome source}.\n \tFIELD field_12761 biomeSource Lnet/minecraft/class_1966;\n \tFIELD field_16567 config Lnet/minecraft/class_5311;\n+\tFIELD field_24748 worldSeed_ J", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e0be9da7b27b9370a0f627844e80a8cbd2d93e8c"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cd5c8d0db5e2c24246bee19af510c64c4e9bb37d", "author": {"user": {"login": "shartte", "name": null}}, "url": "https://github.com/FabricMC/yarn/commit/cd5c8d0db5e2c24246bee19af510c64c4e9bb37d", "committedDate": "2020-07-09T00:40:22Z", "message": "Added docs to structure start"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5436b502f6f444bd42bbe392aeb328c45d29624b", "author": {"user": {"login": "shartte", "name": null}}, "url": "https://github.com/FabricMC/yarn/commit/5436b502f6f444bd42bbe392aeb328c45d29624b", "committedDate": "2020-07-09T07:38:05Z", "message": "Update mappings/net/minecraft/world/gen/chunk/ChunkGenerator.mapping\n\nCo-authored-by: liach <7806504+liach@users.noreply.github.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ1Njc5MjQ5", "url": "https://github.com/FabricMC/yarn/pull/1552#pullrequestreview-445679249", "createdAt": "2020-07-09T14:36:22Z", "commit": {"oid": "5436b502f6f444bd42bbe392aeb328c45d29624b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ1NzA0MTY1", "url": "https://github.com/FabricMC/yarn/pull/1552#pullrequestreview-445704165", "createdAt": "2020-07-09T15:01:31Z", "commit": {"oid": "5436b502f6f444bd42bbe392aeb328c45d29624b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxNTowMTozMVrOGvVQwQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxNTowMTozMVrOGvVQwQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjI4NDYwOQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\tCOMMENT The number of chunks that inersect the structures bounding box,\n          \n          \n            \n            \t\tCOMMENT The number of chunks that intersect the structures bounding box,", "url": "https://github.com/FabricMC/yarn/pull/1552#discussion_r452284609", "createdAt": "2020-07-09T15:01:31Z", "author": {"login": "Gegy"}, "path": "mappings/net/minecraft/structure/StructureStart.mapping", "diffHunk": "@@ -1,6 +1,16 @@\n CLASS net/minecraft/class_3449 net/minecraft/structure/StructureStart\n+\tCOMMENT A structure start is created to describe a structure that will be generated by\n+\tCOMMENT chunk generation. It contains a definition of its pieces and is associated\n+\tCOMMENT with the chunk that the structure originates from.\n \tFIELD field_15325 children Ljava/util/List;\n \tFIELD field_15326 references I\n+\t\tCOMMENT The number of chunks that inersect the structures bounding box,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5436b502f6f444bd42bbe392aeb328c45d29624b"}, "originalPosition": 7}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7bf7d9222306799e0d392860df3791a4d8c87dc8", "author": {"user": {"login": "shartte", "name": null}}, "url": "https://github.com/FabricMC/yarn/commit/7bf7d9222306799e0d392860df3791a4d8c87dc8", "committedDate": "2020-07-09T16:36:06Z", "message": "Update mappings/net/minecraft/structure/StructureStart.mapping\n\nCo-authored-by: Gegy <gegy1000@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ1ODIzNTc1", "url": "https://github.com/FabricMC/yarn/pull/1552#pullrequestreview-445823575", "createdAt": "2020-07-09T17:26:45Z", "commit": {"oid": "7bf7d9222306799e0d392860df3791a4d8c87dc8"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ1ODM1Nzc0", "url": "https://github.com/FabricMC/yarn/pull/1552#pullrequestreview-445835774", "createdAt": "2020-07-09T17:44:13Z", "commit": {"oid": "7bf7d9222306799e0d392860df3791a4d8c87dc8"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4640, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}