{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQ1MDMzOTgy", "number": 1934, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNFQwMjoyNjoxMFrOFI0Jbg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNFQwMjoyODoyOFrOFI0Ktw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ0Nzg3MzEwOnYy", "diffSide": "RIGHT", "path": "build.gradle", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNFQwMjoyNjoxMFrOIK82Fg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNFQwMjoyNjoxMFrOIK82Fg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODM1MzU1OA==", "bodyText": "I think this is good for now, we can look at enforcing java 11 in a while, possibly along with engima.", "url": "https://github.com/FabricMC/yarn/pull/1934#discussion_r548353558", "createdAt": "2020-12-24T02:26:10Z", "author": {"login": "modmuss50"}, "path": "build.gradle", "diffHunk": "@@ -23,6 +22,30 @@ plugins {\n \tid 'java' // for jd gen\n }\n \n+def toolchainLanguageVersion = JavaLanguageVersion.of(11)\n+\n+if (!JavaVersion.current().isCompatibleWith(JavaVersion.toVersion(toolchainLanguageVersion))) {\n+\tlogger.warn \":The current Java Version ${JavaVersion.current()} is too old.\"\n+\tlogger.warn \":Gradle may download newer Java online and the build may be slower.\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dabda29a22fc3f05b3c03ca7d6761678584e97d9"}, "originalPosition": 16}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ0Nzg3NjM5OnYy", "diffSide": "RIGHT", "path": "build.gradle", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNFQwMjoyODoyOFrOIK84Bw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNFQwNToyMzowNVrOIK-5NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODM1NDA1NQ==", "bodyText": "This does use java 11 when using 15 for example, might be worth moving this to only apply when running on java versions bellow 11 (same time as the warning).", "url": "https://github.com/FabricMC/yarn/pull/1934#discussion_r548354055", "createdAt": "2020-12-24T02:28:28Z", "author": {"login": "modmuss50"}, "path": "build.gradle", "diffHunk": "@@ -23,6 +22,30 @@ plugins {\n \tid 'java' // for jd gen\n }\n \n+def toolchainLanguageVersion = JavaLanguageVersion.of(11)\n+\n+if (!JavaVersion.current().isCompatibleWith(JavaVersion.toVersion(toolchainLanguageVersion))) {\n+\tlogger.warn \":The current Java Version ${JavaVersion.current()} is too old.\"\n+\tlogger.warn \":Gradle may download newer Java online and the build may be slower.\"\n+}\n+\n+java.toolchain { // defined in JavaPluginExtension\n+\tlanguageVersion = toolchainLanguageVersion\n+}\n+\n+// currently gradle does not yet propagate that version above, so\n+tasks.withType(JavaExec) {\n+\tjavaLauncher = javaToolchains.launcherFor {\n+\t\tlanguageVersion = toolchainLanguageVersion\n+\t}\n+}\n+\n+tasks.withType(Javadoc) {\n+\tjavadocTool = javaToolchains.javadocToolFor {\n+\t\tlanguageVersion = toolchainLanguageVersion\n+\t}\n+}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dabda29a22fc3f05b3c03ca7d6761678584e97d9"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODM4NzEyNA==", "bodyText": "I will just set the current java language version as the toolchain language version if it can compile or run the minimum version (this case 11). Done in last forced update.", "url": "https://github.com/FabricMC/yarn/pull/1934#discussion_r548387124", "createdAt": "2020-12-24T05:23:05Z", "author": {"login": "liach"}, "path": "build.gradle", "diffHunk": "@@ -23,6 +22,30 @@ plugins {\n \tid 'java' // for jd gen\n }\n \n+def toolchainLanguageVersion = JavaLanguageVersion.of(11)\n+\n+if (!JavaVersion.current().isCompatibleWith(JavaVersion.toVersion(toolchainLanguageVersion))) {\n+\tlogger.warn \":The current Java Version ${JavaVersion.current()} is too old.\"\n+\tlogger.warn \":Gradle may download newer Java online and the build may be slower.\"\n+}\n+\n+java.toolchain { // defined in JavaPluginExtension\n+\tlanguageVersion = toolchainLanguageVersion\n+}\n+\n+// currently gradle does not yet propagate that version above, so\n+tasks.withType(JavaExec) {\n+\tjavaLauncher = javaToolchains.launcherFor {\n+\t\tlanguageVersion = toolchainLanguageVersion\n+\t}\n+}\n+\n+tasks.withType(Javadoc) {\n+\tjavadocTool = javaToolchains.javadocToolFor {\n+\t\tlanguageVersion = toolchainLanguageVersion\n+\t}\n+}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODM1NDA1NQ=="}, "originalCommit": {"oid": "dabda29a22fc3f05b3c03ca7d6761678584e97d9"}, "originalPosition": 34}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2846, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}