{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzcwNzgyMjYx", "number": 316, "title": "set llvm bin.dir to graal llvm toolchain", "bodyText": "with this patch, we can use the latest GraalVM and use the bundled llvm toolchain", "createdAt": "2020-02-04T11:21:03Z", "url": "https://github.com/gluonhq/substrate/pull/316", "merged": true, "mergeCommit": {"oid": "b3c1f8af405172a05a0a3ccda2d83c1e2d35785b"}, "closed": true, "closedAt": "2020-02-05T12:55:34Z", "author": {"login": "johanvos"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcA_rgGgH2gAyMzcwNzgyMjYxOmYzYWI4YjVlZTIzZDEzODg1NTgwZjk5OGRkNTA4ZmI1ZDM2YjQ4OGY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcBDPGggFqTM1MzA2NTcxNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "f3ab8b5ee23d13885580f998dd508fb5d36b488f", "author": {"user": {"login": "johanvos", "name": "Johan Vos"}}, "url": "https://github.com/gluonhq/substrate/commit/f3ab8b5ee23d13885580f998dd508fb5d36b488f", "committedDate": "2020-02-04T11:17:37Z", "message": "with this patch, we can use the latest GraalVM and use the bundled llvm toolchain"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUyOTA2OTkx", "url": "https://github.com/gluonhq/substrate/pull/316#pullrequestreview-352906991", "createdAt": "2020-02-04T11:32:55Z", "commit": {"oid": "f3ab8b5ee23d13885580f998dd508fb5d36b488f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNFQxMTozMjo1NVrOFlQ55Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNFQxMTozMjo1NVrOFlQ55Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDYxODU5Nw==", "bodyText": "probably better to do resolve(\"lib\").resolve(\"llvm\").resolve(\"bin\")? Do we need to check if that exists?", "url": "https://github.com/gluonhq/substrate/pull/316#discussion_r374618597", "createdAt": "2020-02-04T11:32:55Z", "author": {"login": "jperedadnr"}, "path": "src/main/java/com/gluonhq/substrate/target/IosTargetConfiguration.java", "diffHunk": "@@ -112,6 +112,7 @@ public IosTargetConfiguration(ProcessPaths paths, InternalProjectConfiguration c\n         Path llcPath = getLlcPath();\n         return Arrays.asList(\"-H:CompilerBackend=\" + Constants.BACKEND_LLVM,\n                 \"-H:-SpawnIsolates\",\n+                \"-Dllvm.bin.dir=\" + projectConfiguration.getGraalPath().resolve(\"lib/llvm/bin\"),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f3ab8b5ee23d13885580f998dd508fb5d36b488f"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5dc8e2621d73edd17907c0da4abdb15bccd3ebb3", "author": {"user": {"login": "johanvos", "name": "Johan Vos"}}, "url": "https://github.com/gluonhq/substrate/commit/5dc8e2621d73edd17907c0da4abdb15bccd3ebb3", "committedDate": "2020-02-04T11:44:26Z", "message": "it seems to be preferred to make 3 calls instead of 1 call ;)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUyOTE0NjQx", "url": "https://github.com/gluonhq/substrate/pull/316#pullrequestreview-352914641", "createdAt": "2020-02-04T11:47:22Z", "commit": {"oid": "f3ab8b5ee23d13885580f998dd508fb5d36b488f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "291009b6ea70b6340f11eb617ba1a4e37c29b4e4", "author": {"user": {"login": "johanvos", "name": "Johan Vos"}}, "url": "https://github.com/gluonhq/substrate/commit/291009b6ea70b6340f11eb617ba1a4e37c29b4e4", "committedDate": "2020-02-04T12:49:59Z", "message": "Don't set customLLC in case we're using a recent GraalVM build"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUyOTUwODcy", "url": "https://github.com/gluonhq/substrate/pull/316#pullrequestreview-352950872", "createdAt": "2020-02-04T12:53:05Z", "commit": {"oid": "291009b6ea70b6340f11eb617ba1a4e37c29b4e4"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNFQxMjo1MzowNVrOFlS-zw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNFQxMjo1MzozNFrOFlS_ow==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDY1MjYyMw==", "bodyText": "Move Path llcPath = getLlcPath(); inside if (!gralvm22) {} ?", "url": "https://github.com/gluonhq/substrate/pull/316#discussion_r374652623", "createdAt": "2020-02-04T12:53:05Z", "author": {"login": "jperedadnr"}, "path": "src/main/java/com/gluonhq/substrate/target/IosTargetConfiguration.java", "diffHunk": "@@ -108,14 +108,21 @@ public IosTargetConfiguration(ProcessPaths paths, InternalProjectConfiguration c\n \n     @Override\n     List<String> getTargetSpecificAOTCompileFlags() throws IOException {\n-\n+        boolean graalvm22 = true;\n+        Path internalLlcPath = projectConfiguration.getGraalPath().resolve(\"lib\").resolve(\"llvm\").resolve(\"bin\");\n+        if (!Files.exists(internalLlcPath)) {\n+            graalvm22 = false; // and use customLLC\n+        }\n         Path llcPath = getLlcPath();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "291009b6ea70b6340f11eb617ba1a4e37c29b4e4"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDY1MjgzNQ==", "bodyText": "Maybe rename to useInternalLlc?", "url": "https://github.com/gluonhq/substrate/pull/316#discussion_r374652835", "createdAt": "2020-02-04T12:53:34Z", "author": {"login": "jperedadnr"}, "path": "src/main/java/com/gluonhq/substrate/target/IosTargetConfiguration.java", "diffHunk": "@@ -108,14 +108,21 @@ public IosTargetConfiguration(ProcessPaths paths, InternalProjectConfiguration c\n \n     @Override\n     List<String> getTargetSpecificAOTCompileFlags() throws IOException {\n-\n+        boolean graalvm22 = true;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "291009b6ea70b6340f11eb617ba1a4e37c29b4e4"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUyOTc3MDM1", "url": "https://github.com/gluonhq/substrate/pull/316#pullrequestreview-352977035", "createdAt": "2020-02-04T13:35:26Z", "commit": {"oid": "291009b6ea70b6340f11eb617ba1a4e37c29b4e4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNFQxMzozNToyNlrOFlULnQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNFQxMzozNToyNlrOFlULnQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDY3MjI4NQ==", "bodyText": "This path already exists in Graal 21, so it is not a valid check", "url": "https://github.com/gluonhq/substrate/pull/316#discussion_r374672285", "createdAt": "2020-02-04T13:35:26Z", "author": {"login": "jperedadnr"}, "path": "src/main/java/com/gluonhq/substrate/target/IosTargetConfiguration.java", "diffHunk": "@@ -108,13 +108,21 @@ public IosTargetConfiguration(ProcessPaths paths, InternalProjectConfiguration c\n \n     @Override\n     List<String> getTargetSpecificAOTCompileFlags() throws IOException {\n-\n+        boolean graalvm22 = true;\n+        Path internalLlcPath = projectConfiguration.getGraalPath().resolve(\"lib\").resolve(\"llvm\").resolve(\"bin\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "291009b6ea70b6340f11eb617ba1a4e37c29b4e4"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1ff5c3870cb9c47e247f605c65e15caa0b949bfb", "author": {"user": {"login": "johanvos", "name": "Johan Vos"}}, "url": "https://github.com/gluonhq/substrate/commit/1ff5c3870cb9c47e247f605c65e15caa0b949bfb", "committedDate": "2020-02-04T13:45:47Z", "message": "check on llc binary"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUyOTg1NDcy", "url": "https://github.com/gluonhq/substrate/pull/316#pullrequestreview-352985472", "createdAt": "2020-02-04T13:47:52Z", "commit": {"oid": "1ff5c3870cb9c47e247f605c65e15caa0b949bfb"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cf94378d6586b32626bd33d47f9230fccecb88cf", "author": {"user": {"login": "johanvos", "name": "Johan Vos"}}, "url": "https://github.com/gluonhq/substrate/commit/cf94378d6586b32626bd33d47f9230fccecb88cf", "committedDate": "2020-02-04T15:19:23Z", "message": "add not supported on all lists"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUzMDY1NzE1", "url": "https://github.com/gluonhq/substrate/pull/316#pullrequestreview-353065715", "createdAt": "2020-02-04T15:26:12Z", "commit": {"oid": "cf94378d6586b32626bd33d47f9230fccecb88cf"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNFQxNToyNjoxM1rOFlYRAg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNFQxNToyNjoxM1rOFlYRAg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDczOTIwMg==", "bodyText": "Arrays.asList shouldn't be required here.", "url": "https://github.com/gluonhq/substrate/pull/316#discussion_r374739202", "createdAt": "2020-02-04T15:26:13Z", "author": {"login": "abhinayagarwal"}, "path": "src/main/java/com/gluonhq/substrate/target/IosTargetConfiguration.java", "diffHunk": "@@ -113,11 +113,12 @@ public IosTargetConfiguration(ProcessPaths paths, InternalProjectConfiguration c\n         if (!Files.exists(internalLlcPath.resolve(\"llc\"))) {\n             graalvm22 = false; // and use customLLC\n         }\n-        List<String> answer = Arrays.asList(\"-H:CompilerBackend=\" + Constants.BACKEND_LLVM,\n+        List<String> answer = new ArrayList<>();\n+        answer.addAll(Arrays.asList(\"-H:CompilerBackend=\" + Constants.BACKEND_LLVM,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cf94378d6586b32626bd33d47f9230fccecb88cf"}, "originalPosition": 6}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2209, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}