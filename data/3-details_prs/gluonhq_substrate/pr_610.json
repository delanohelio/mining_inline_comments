{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIwNzI1Mjg4", "number": 610, "title": "#606 Check correct cross compilation setup", "bodyText": "Fixes #606\nFails fast checking if cross compilation can be done (before initializing the target, as that might lead to further attempts to install required software for such target).", "createdAt": "2020-05-20T12:41:44Z", "url": "https://github.com/gluonhq/substrate/pull/610", "merged": true, "mergeCommit": {"oid": "e8b1e75c5995506716bf5ff926495ef15269b018"}, "closed": true, "closedAt": "2020-10-07T15:39:08Z", "author": {"login": "jperedadnr"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcjIDH4gH2gAyNDIwNzI1Mjg4OjYwZTc5NzUwZDRmODI0OTQwM2U1MGRlOGUxMWE3YzZhYjNhMDk1NjI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdQN_dLAH2gAyNDIwNzI1Mjg4OjVmNTRkNzMyZmEwMjczNDlhNmRkYTJlNGZjZjcyMDdhNjI5MDYyNjI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "60e79750d4f8249403e50de8e11a7c6ab3a09562", "author": {"user": null}, "url": "https://github.com/gluonhq/substrate/commit/60e79750d4f8249403e50de8e11a7c6ab3a09562", "committedDate": "2020-05-20T12:16:05Z", "message": "#606 Check correct cross compilation setup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e2a7e2b64a75a49c2bf946660e4d1d9964ad59fe", "author": {"user": null}, "url": "https://github.com/gluonhq/substrate/commit/e2a7e2b64a75a49c2bf946660e4d1d9964ad59fe", "committedDate": "2020-05-20T12:35:55Z", "message": "Fail fast, before creating targets"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "de4cd8d3a5d4b7c016a5b39220c46a89cd8727ce", "author": {"user": null}, "url": "https://github.com/gluonhq/substrate/commit/de4cd8d3a5d4b7c016a5b39220c46a89cd8727ce", "committedDate": "2020-05-20T13:47:58Z", "message": "Fix test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE1Mzg2Nzg5", "url": "https://github.com/gluonhq/substrate/pull/610#pullrequestreview-415386789", "createdAt": "2020-05-20T14:20:00Z", "commit": {"oid": "de4cd8d3a5d4b7c016a5b39220c46a89cd8727ce"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQxNDoyMDowMFrOGYOMdA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQxNDoyMDowMFrOGYOMdA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODA1MTU3Mg==", "bodyText": "this will fail on Darwin as host and target", "url": "https://github.com/gluonhq/substrate/pull/610#discussion_r428051572", "createdAt": "2020-05-20T14:20:00Z", "author": {"login": "johanvos"}, "path": "src/main/java/com/gluonhq/substrate/model/Triplet.java", "diffHunk": "@@ -114,9 +114,9 @@ public boolean canCompileTo(Triplet target) {\n         // if the host os and target os are the same, always return true\n         if (getOs().equals(target.getOs())) return true;\n \n-        // if host is linux and target is ios, fail\n-        return (!Constants.OS_LINUX.equals(getOs()) && !Constants.OS_WINDOWS.equals(getOs())) ||\n-                !Constants.OS_IOS.equals(target.getOs());\n+        // so far, iOS can be built from Mac, Android can be built from Linux\n+        return (OS_DARWIN.equals(getOs()) && Constants.OS_IOS.equals(target.getOs())) ||", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "de4cd8d3a5d4b7c016a5b39220c46a89cd8727ce"}, "originalPosition": 8}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE1NDM3MTc3", "url": "https://github.com/gluonhq/substrate/pull/610#pullrequestreview-415437177", "createdAt": "2020-05-20T15:08:40Z", "commit": {"oid": "de4cd8d3a5d4b7c016a5b39220c46a89cd8727ce"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQxNTowODo0MFrOGYQi6w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQxNTowODo0MFrOGYQi6w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODA5MDA5MQ==", "bodyText": "s/Constants.OS_IOS/OS_IOS", "url": "https://github.com/gluonhq/substrate/pull/610#discussion_r428090091", "createdAt": "2020-05-20T15:08:40Z", "author": {"login": "abhinayagarwal"}, "path": "src/main/java/com/gluonhq/substrate/model/Triplet.java", "diffHunk": "@@ -114,9 +114,9 @@ public boolean canCompileTo(Triplet target) {\n         // if the host os and target os are the same, always return true\n         if (getOs().equals(target.getOs())) return true;\n \n-        // if host is linux and target is ios, fail\n-        return (!Constants.OS_LINUX.equals(getOs()) && !Constants.OS_WINDOWS.equals(getOs())) ||\n-                !Constants.OS_IOS.equals(target.getOs());\n+        // so far, iOS can be built from Mac, Android can be built from Linux\n+        return (OS_DARWIN.equals(getOs()) && Constants.OS_IOS.equals(target.getOs())) ||", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "de4cd8d3a5d4b7c016a5b39220c46a89cd8727ce"}, "originalPosition": 8}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1287bc793d5cf423575c63bcaeb1b6faf64f09cd", "author": {"user": null}, "url": "https://github.com/gluonhq/substrate/commit/1287bc793d5cf423575c63bcaeb1b6faf64f09cd", "committedDate": "2020-05-20T15:21:14Z", "message": "Remove unnecessary Constants"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3NDc4NDQy", "url": "https://github.com/gluonhq/substrate/pull/610#pullrequestreview-417478442", "createdAt": "2020-05-25T06:19:17Z", "commit": {"oid": "1287bc793d5cf423575c63bcaeb1b6faf64f09cd"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQwNjoxOToxN1rOGZ11Tw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQwNjoxOToxN1rOGZ11Tw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTc0OTU4Mw==", "bodyText": "I don't think this check belongs here. We want to get the targetConfiguration, even if we can't compile to it.\n(e.g. because we want to build in the cloud, or do other operations, e.g. link/run or so, that do not depend on compilation)", "url": "https://github.com/gluonhq/substrate/pull/610#discussion_r429749583", "createdAt": "2020-05-25T06:19:17Z", "author": {"login": "johanvos"}, "path": "src/main/java/com/gluonhq/substrate/SubstrateDispatcher.java", "diffHunk": "@@ -310,6 +310,9 @@ public SubstrateDispatcher(Path buildRoot, ProjectConfiguration config) throws I\n     }\n \n     private TargetConfiguration getTargetConfiguration(Triplet targetTriplet) throws IOException {\n+        if (!config.getHostTriplet().canCompileTo(targetTriplet)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1287bc793d5cf423575c63bcaeb1b6faf64f09cd"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAzOTIzNjA5", "url": "https://github.com/gluonhq/substrate/pull/610#pullrequestreview-503923609", "createdAt": "2020-10-07T14:11:51Z", "commit": {"oid": "1287bc793d5cf423575c63bcaeb1b6faf64f09cd"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1c1ca104a17508749c1e627f6eb4aade44056b5a", "author": {"user": null}, "url": "https://github.com/gluonhq/substrate/commit/1c1ca104a17508749c1e627f6eb4aade44056b5a", "committedDate": "2020-10-07T14:33:02Z", "message": "Merge branch 'master' of https://github.com/gluonhq/substrate into 606-cross"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5f54d732fa027349a6dda2e4fcf7207a62906262", "author": {"user": null}, "url": "https://github.com/gluonhq/substrate/commit/5f54d732fa027349a6dda2e4fcf7207a62906262", "committedDate": "2020-10-07T14:38:06Z", "message": "Remove duplicated check"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2047, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}