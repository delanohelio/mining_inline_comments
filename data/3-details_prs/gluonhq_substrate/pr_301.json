{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY4NTc5NDgy", "number": 301, "title": "Various android improvements", "bodyText": "This PR brings makes Android target behave more like iOS target:\n\nrunUntilEnd installs application, and then starts it and shows log\napps that don't use JFX (stdout only apps) now don't crash in runtime", "createdAt": "2020-01-29T14:14:35Z", "url": "https://github.com/gluonhq/substrate/pull/301", "merged": true, "mergeCommit": {"oid": "312d78b7c1faf6c755808fafb232ba7c9bd8284e"}, "closed": true, "closedAt": "2020-01-31T14:22:48Z", "author": {"login": "lazar-mitrovic"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb_FuR7AH2gAyMzY4NTc5NDgyOjhmY2ZjNjdmMDFlYzVkNmE3YWZjNmIzNjZjZTI2NzJkYjdjYTZmNjE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb_scM1gFqTM1MTQwOTQ0NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "8fcfc67f01ec5d6a7afc6b366ce2672db7ca6f61", "author": {"user": {"login": "lazar-mitrovic", "name": "Lazar Mitrovi\u0107"}}, "url": "https://github.com/gluonhq/substrate/commit/8fcfc67f01ec5d6a7afc6b366ce2672db7ca6f61", "committedDate": "2020-01-29T13:12:14Z", "message": "Start app and see log on `runUntilEnd`, enable non-jfx apps building\n\nFixes to get on par with ios"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0798222fc20f42280b619e1f5b38627151d5791a", "author": {"user": {"login": "lazar-mitrovic", "name": "Lazar Mitrovi\u0107"}}, "url": "https://github.com/gluonhq/substrate/commit/0798222fc20f42280b619e1f5b38627151d5791a", "committedDate": "2020-01-29T14:57:16Z", "message": "Force Travis to rebuild due to transient issues"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "36df71b024b04a7ddef78cce26fe91fd27af51eb", "author": {"user": {"login": "lazar-mitrovic", "name": "Lazar Mitrovi\u0107"}}, "url": "https://github.com/gluonhq/substrate/commit/36df71b024b04a7ddef78cce26fe91fd27af51eb", "committedDate": "2020-01-29T16:33:04Z", "message": "Remove log clutter"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6c39a7a603e01b085a78f03ebd6c65b6f2bf4970", "author": {"user": {"login": "lazar-mitrovic", "name": "Lazar Mitrovi\u0107"}}, "url": "https://github.com/gluonhq/substrate/commit/6c39a7a603e01b085a78f03ebd6c65b6f2bf4970", "committedDate": "2020-01-29T17:09:30Z", "message": "Transient issues with travis (+ debug info removal)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUwNjg3MjI5", "url": "https://github.com/gluonhq/substrate/pull/301#pullrequestreview-350687229", "createdAt": "2020-01-30T09:38:40Z", "commit": {"oid": "6c39a7a603e01b085a78f03ebd6c65b6f2bf4970"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMFQwOTozODo0MFrOFjkmVg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMFQwOTozODo0MFrOFjkmVg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mjg0NDExOA==", "bodyText": "this is a nice feature, but I wonder if we should have an option to toggle it on/off (the whole logcat thread). For example, I typically use logcat -v threadtime but depending on what you are doing, you want to try different options.", "url": "https://github.com/gluonhq/substrate/pull/301#discussion_r372844118", "createdAt": "2020-01-30T09:38:40Z", "author": {"login": "johanvos"}, "path": "src/main/java/com/gluonhq/substrate/target/AndroidTargetConfiguration.java", "diffHunk": "@@ -242,7 +242,32 @@ public boolean runUntilEnd() throws IOException, InterruptedException {\n         ProcessRunner install = new ProcessRunner(sdkPath.resolve(\"platform-tools\").resolve(\"adb\").toString(),\n                 \"install\", \"-r\", alignedApk);\n         processResult = install.runProcess(\"install\");\n+        if (processResult != 0) throw new IOException(\"Application instalation failed!\");\n+\n+        Runnable logcat = () -> {\n+            try {\n+                ProcessRunner clearLog = new ProcessRunner(sdkPath.resolve(\"platform-tools\").resolve(\"adb\").toString(),\n+                \"logcat\", \"-c\");\n+                clearLog.runProcess(\"clearLog\");\n+\n+                ProcessRunner log = new ProcessRunner(sdkPath.resolve(\"platform-tools\").resolve(\"adb\").toString(),\n+                \"-d\", \"logcat\", \"-v\", \"brief\", \"-v\", \"color\", \"GraalCompiled:V\", \"GraalGluon:V\", \"AndroidRuntime:E\", \"ActivityManager:W\", \"*:S\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6c39a7a603e01b085a78f03ebd6c65b6f2bf4970"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "343e0ba307c79887a1dea86aac91542d00edb522", "author": {"user": {"login": "lazar-mitrovic", "name": "Lazar Mitrovi\u0107"}}, "url": "https://github.com/gluonhq/substrate/commit/343e0ba307c79887a1dea86aac91542d00edb522", "committedDate": "2020-01-30T23:54:42Z", "message": "Merge remote-tracking branch 'gluonhq/master' into androidQoL"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUxNDA3MDk1", "url": "https://github.com/gluonhq/substrate/pull/301#pullrequestreview-351407095", "createdAt": "2020-01-31T10:14:31Z", "commit": {"oid": "343e0ba307c79887a1dea86aac91542d00edb522"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUxNDA5NDQ0", "url": "https://github.com/gluonhq/substrate/pull/301#pullrequestreview-351409444", "createdAt": "2020-01-31T10:18:47Z", "commit": {"oid": "343e0ba307c79887a1dea86aac91542d00edb522"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2203, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}