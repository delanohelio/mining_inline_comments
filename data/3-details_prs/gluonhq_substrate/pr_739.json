{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY1NjUyMjAz", "number": 739, "title": "Use pathing jar to shorten command line", "bodyText": "Fixes #597", "createdAt": "2020-08-10T18:09:24Z", "url": "https://github.com/gluonhq/substrate/pull/739", "merged": true, "mergeCommit": {"oid": "83bc330b1cb5d13738f65ac7d65074d5cee40393"}, "closed": true, "closedAt": "2020-08-21T10:21:15Z", "author": {"login": "jperedadnr"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc9g5bUgH2gAyNDY1NjUyMjAzOjExMzllNTZmY2NmNDU3ZjI4YjNiNWVkYWJiMjU3ZWVhZTAwY2I0ZGY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc9yTq2AFqTQ2NDg0Mjc4OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "1139e56fccf457f28b3b5edabb257eeae00cb4df", "author": {"user": null}, "url": "https://github.com/gluonhq/substrate/commit/1139e56fccf457f28b3b5edabb257eeae00cb4df", "committedDate": "2020-08-10T11:55:09Z", "message": "Use pathing jar to shorten command line"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0e62c6f4a3b05600458b143563141d76f90b193a", "author": {"user": null}, "url": "https://github.com/gluonhq/substrate/commit/0e62c6f4a3b05600458b143563141d76f90b193a", "committedDate": "2020-08-10T17:49:52Z", "message": "Don\u2019t use URI"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "192bf5b1140267d009a07a1014b6c481fdd6d154", "author": {"user": null}, "url": "https://github.com/gluonhq/substrate/commit/192bf5b1140267d009a07a1014b6c481fdd6d154", "committedDate": "2020-08-10T18:06:29Z", "message": "Use replaceAll"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY0ODM5NDc5", "url": "https://github.com/gluonhq/substrate/pull/739#pullrequestreview-464839479", "createdAt": "2020-08-11T08:07:19Z", "commit": {"oid": "192bf5b1140267d009a07a1014b6c481fdd6d154"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY0ODQyNzg5", "url": "https://github.com/gluonhq/substrate/pull/739#pullrequestreview-464842789", "createdAt": "2020-08-11T08:12:11Z", "commit": {"oid": "192bf5b1140267d009a07a1014b6c481fdd6d154"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMVQwODoxMjoxMlrOG-tEtw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMVQwODoxMjoxMlrOG-tEtw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODQwMzM4Mw==", "bodyText": "One small remark. Wouldn't it be better to create the temporary pathing jar file in the directory provided by ProcessPaths.getTmpPath()?", "url": "https://github.com/gluonhq/substrate/pull/739#discussion_r468403383", "createdAt": "2020-08-11T08:12:12Z", "author": {"login": "tiainen"}, "path": "src/main/java/com/gluonhq/substrate/util/FileOps.java", "diffHunk": "@@ -671,6 +674,28 @@ public static void downloadAndUnzip(String sourceUrl, Path destPath, String file\n         }\n     }\n \n+    /**\n+     * Shorten the Java classpath with a pathing jar\n+     * @param classpath A string with the classpath of files that will be added to the\n+     *                 pathing jar Class-Path attribute\n+     * @return a String with the path to the created pathing jar\n+     * @throws IOException\n+     */\n+    public static String createPathingJar(String classpath) throws IOException {\n+        Objects.requireNonNull(classpath);\n+        Manifest manifest = new Manifest();\n+        Attributes attributes = manifest.getMainAttributes();\n+        attributes.put(Attributes.Name.MANIFEST_VERSION, \"1.0\");\n+        attributes.put(Attributes.Name.CLASS_PATH,\n+                classpath.replaceAll(File.pathSeparator, \" \"));\n+        File jarFile = File.createTempFile(\"classpathJar\", \".jar\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "192bf5b1140267d009a07a1014b6c481fdd6d154"}, "originalPosition": 28}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2096, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}