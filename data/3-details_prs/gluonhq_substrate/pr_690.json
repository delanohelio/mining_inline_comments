{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ1Mjc0NTA5", "number": 690, "title": "Use JAVA_HOME/bin/jar", "bodyText": "Fixes #689", "createdAt": "2020-07-07T09:12:01Z", "url": "https://github.com/gluonhq/substrate/pull/690", "merged": true, "mergeCommit": {"oid": "a550b7900d6229c6748fccd6b1baac09b31cd935"}, "closed": true, "closedAt": "2020-07-07T11:55:53Z", "author": {"login": "jperedadnr"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcyiIppgH2gAyNDQ1Mjc0NTA5Ojg0Yzk5MTIxNTZmMzlmYWE4YTViNWEwNWIyMTFjYTRlM2ExNTE1YzA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcyjJHoAFqTQ0Mzc1NjczMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "84c9912156f39faa8a5b5a05b211ca4e3a1515c0", "author": {"user": null}, "url": "https://github.com/gluonhq/substrate/commit/84c9912156f39faa8a5b5a05b211ca4e3a1515c0", "committedDate": "2020-07-07T09:08:31Z", "message": "Use JAVA_HOME/bin/jar"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQzNzE5MDIy", "url": "https://github.com/gluonhq/substrate/pull/690#pullrequestreview-443719022", "createdAt": "2020-07-07T09:27:40Z", "commit": {"oid": "84c9912156f39faa8a5b5a05b211ca4e3a1515c0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QwOToyNzo0MFrOGt2bjQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QwOToyNzo0MFrOGt2bjQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDczMDg5Mw==", "bodyText": "Should be jarPath in the exception message.", "url": "https://github.com/gluonhq/substrate/pull/690#discussion_r450730893", "createdAt": "2020-07-07T09:27:40Z", "author": {"login": "tiainen"}, "path": "src/main/java/com/gluonhq/substrate/model/ClassPath.java", "diffHunk": "@@ -120,10 +130,26 @@ public String mapWithLibs(Path libsPath, String... libNames) {\n                 if (resourcesPath != null && Files.exists(resourcesPath)) {\n                     FileOps.copyDirectory(resourcesPath, classesPath);\n                 }\n-                Path jar = classesPath.resolve(\"classes.jar\");\n-                ProcessRunner runner = new ProcessRunner(\"jar\", \"cf\", jar.toString(), \"-C\", classesPath.toString(), \".\");\n-                if (runner.runProcess(\"jar\") == 0 && Files.exists(jar)) {\n-                    jars.add(jar.toFile());\n+\n+                String javaPath = System.getenv(\"JAVA_HOME\");\n+                if (javaPath == null || javaPath.isEmpty()) {\n+                    javaPath = System.getenv(\"GRAALVM_HOME\");\n+                    if (javaPath == null || javaPath.isEmpty()) {\n+                        throw new IOException(\"Error: $JAVA_HOME and $GRAALVM_HOME are undefined\");\n+                    }\n+                }\n+                Path jarPath = Path.of(javaPath, \"bin\", \"jar\");\n+                if (!Files.exists(jarPath)) {\n+                    throw new IOException(\"Error: \" + javaPath + \" doesn't exist\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "84c9912156f39faa8a5b5a05b211ca4e3a1515c0"}, "originalPosition": 35}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2f2d0cf8312149f1e0accbb28cbeb96be82afa58", "author": {"user": null}, "url": "https://github.com/gluonhq/substrate/commit/2f2d0cf8312149f1e0accbb28cbeb96be82afa58", "committedDate": "2020-07-07T09:43:45Z", "message": "Fix typo"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQzNzU2NzMz", "url": "https://github.com/gluonhq/substrate/pull/690#pullrequestreview-443756733", "createdAt": "2020-07-07T10:18:56Z", "commit": {"oid": "2f2d0cf8312149f1e0accbb28cbeb96be82afa58"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2072, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}