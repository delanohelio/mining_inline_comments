{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA2NjUyMjcz", "number": 814, "reviewThreads": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMFQxMDowMTowMVrOEvspOQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQyMDoyOTowM1rOEweDgg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE4NDQ5OTc3OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/gluonhq/substrate/target/AndroidTargetConfiguration.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMFQxMDowMTowMVrOHk0gwQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMFQxMDowODozOFrOHk0zww==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODM3MTEzNw==", "bodyText": "Any specific reason why these are public? I don't see their usage outside this class.", "url": "https://github.com/gluonhq/substrate/pull/814#discussion_r508371137", "createdAt": "2020-10-20T10:01:01Z", "author": {"login": "abhinayagarwal"}, "path": "src/main/java/com/gluonhq/substrate/target/AndroidTargetConfiguration.java", "diffHunk": "@@ -70,6 +70,8 @@\n     private static final String ANDROID_TRIPLET = new Triplet(Constants.Profile.ANDROID).toString();\n     private static final String ANDROID_MIN_SDK_VERSION = \"21\";\n     private static final List<String> ANDROID_KEYSTORE_EXTENSIONS = List.of(\".keystore\", \".jks\");\n+    public static final String WL_WHOLE_ARCHIVE = \"-Wl,--whole-archive\";\n+    public static final String WL_NO_WHOLE_ARCHIVE = \"-Wl,--no-whole-archive\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "899b9ef58bad19bbdb87dafcf465e17afd7ea321"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODM3NjAwMw==", "bodyText": "Fixed", "url": "https://github.com/gluonhq/substrate/pull/814#discussion_r508376003", "createdAt": "2020-10-20T10:08:38Z", "author": {"login": "jperedadnr"}, "path": "src/main/java/com/gluonhq/substrate/target/AndroidTargetConfiguration.java", "diffHunk": "@@ -70,6 +70,8 @@\n     private static final String ANDROID_TRIPLET = new Triplet(Constants.Profile.ANDROID).toString();\n     private static final String ANDROID_MIN_SDK_VERSION = \"21\";\n     private static final List<String> ANDROID_KEYSTORE_EXTENSIONS = List.of(\".keystore\", \".jks\");\n+    public static final String WL_WHOLE_ARCHIVE = \"-Wl,--whole-archive\";\n+    public static final String WL_NO_WHOLE_ARCHIVE = \"-Wl,--no-whole-archive\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODM3MTEzNw=="}, "originalCommit": {"oid": "899b9ef58bad19bbdb87dafcf465e17afd7ea321"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE5MjUwNjMzOnYy", "diffSide": "RIGHT", "path": "src/main/java/com/gluonhq/substrate/target/AndroidTargetConfiguration.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQyMDoxNDozOFrOHmCyNw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQyMDoyNjo1N1rOHmDoHw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTY1MzU1OQ==", "bodyText": "This is dangerous. It's better to fit the lib between whole-archive/no-whole-archive options, so that it keeps working in case there is more than 1 occurrence of whole-archive", "url": "https://github.com/gluonhq/substrate/pull/814#discussion_r509653559", "createdAt": "2020-10-21T20:14:38Z", "author": {"login": "johanvos"}, "path": "src/main/java/com/gluonhq/substrate/target/AndroidTargetConfiguration.java", "diffHunk": "@@ -255,7 +258,9 @@ String getLinker() {\n         if (!useJavaFX) return linkFlags;\n         List<String> answer = new ArrayList<>();\n         answer.addAll(linkFlags);\n-        answer.addAll(javafxLinkFlags);\n+        if (projectConfiguration.getClasspath().contains(\"javafx-web\")) {\n+            javafxLinkFlags.add(javafxLinkFlags.indexOf(WL_NO_WHOLE_ARCHIVE) - 1, javafxWebLib);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "93a4b58961739d3294bfd25b70e272d10db72531"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTY2NzM1OQ==", "bodyText": "I've fixed this by adding it to the end.", "url": "https://github.com/gluonhq/substrate/pull/814#discussion_r509667359", "createdAt": "2020-10-21T20:26:57Z", "author": {"login": "jperedadnr"}, "path": "src/main/java/com/gluonhq/substrate/target/AndroidTargetConfiguration.java", "diffHunk": "@@ -255,7 +258,9 @@ String getLinker() {\n         if (!useJavaFX) return linkFlags;\n         List<String> answer = new ArrayList<>();\n         answer.addAll(linkFlags);\n-        answer.addAll(javafxLinkFlags);\n+        if (projectConfiguration.getClasspath().contains(\"javafx-web\")) {\n+            javafxLinkFlags.add(javafxLinkFlags.indexOf(WL_NO_WHOLE_ARCHIVE) - 1, javafxWebLib);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTY1MzU1OQ=="}, "originalCommit": {"oid": "93a4b58961739d3294bfd25b70e272d10db72531"}, "originalPosition": 29}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE5MjU5NDcwOnYy", "diffSide": "RIGHT", "path": "src/main/resources/native/android/android_project/app/src/main/java/com/gluonhq/helloandroid/NativeWebView.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQyMDoyODo1OFrOHmDtKQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQyMDoyODo1OFrOHmDtKQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTY2ODY0OQ==", "bodyText": "Codacy found an issue: Avoid unused private methods such as 'setWidth(double)'.", "url": "https://github.com/gluonhq/substrate/pull/814#discussion_r509668649", "createdAt": "2020-10-21T20:28:58Z", "author": {"login": "eugener"}, "path": "src/main/resources/native/android/android_project/app/src/main/java/com/gluonhq/helloandroid/NativeWebView.java", "diffHunk": "@@ -0,0 +1,252 @@\n+/*\n+ * Copyright (c) 2020, Gluon\n+ *\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL GLUON BE LIABLE FOR ANY\n+ * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+package com.gluonhq.helloandroid;\n+\n+import android.graphics.Bitmap;\n+import android.net.http.SslError;\n+import android.os.Build;\n+import android.support.annotation.RequiresApi;\n+import android.util.Log;\n+import android.view.Gravity;\n+import android.view.View;\n+import android.view.ViewGroup;\n+import android.widget.FrameLayout;\n+import android.webkit.SslErrorHandler;\n+import android.webkit.ValueCallback;\n+import android.webkit.WebChromeClient;\n+import android.webkit.WebResourceError;\n+import android.webkit.WebResourceRequest;\n+import android.webkit.WebResourceResponse;\n+import android.webkit.WebSettings;\n+import android.webkit.WebView;\n+import android.webkit.WebViewClient;\n+\n+import java.io.StringReader;\n+import java.util.Properties;\n+import java.util.concurrent.CountDownLatch;\n+\n+public class NativeWebView {\n+\n+    private static final String TAG     = \"GraalActivity\";\n+\n+    private static MainActivity instance;\n+    private WebView webView;\n+    private boolean inlayout = false;\n+    private boolean layoutStarted = false;\n+    private double width = 0;\n+    private double height = 0;\n+    private int x = 0;\n+    private int y = 0;\n+    private boolean visible = true;\n+    private String scriptResult;\n+\n+    public NativeWebView() {\n+        Log.v(TAG, \"NATIVEWEBVIEW constructor starts\");\n+        instance = MainActivity.getInstance();\n+        instance.runOnUiThread(new Runnable () {\n+            public void run() {\n+                NativeWebView.this.webView = new WebView(instance);\n+                NativeWebView.this.webView.setWebChromeClient(new WebChromeClient());\n+                NativeWebView.this.webView.setWebViewClient(new WebViewClient() {\n+                    @Override\n+                    public void onPageStarted(WebView view, String url, Bitmap favicon) {\n+                        super.onPageStarted(view, url, favicon);\n+                        Log.d(TAG, \"Page started: \" + url);\n+                        nativeStartURL(url);\n+                    }\n+\n+                    @Override\n+                    public void onPageFinished(WebView view, final String url) {\n+                        Log.v(TAG, \"Page finished: \" + url);\n+                        NativeWebView.this.webView.evaluateJavascript(\"document.documentElement.innerHTML\", new ValueCallback<String>() {\n+                            @Override\n+                            public void onReceiveValue(String s) {\n+                                Properties p = new Properties();\n+                                try {\n+                                    p.load(new StringReader(\"innerHtmlKey=\" + s));\n+                                } catch (Exception e) {\n+\n+                                }\n+                                nativeFinishURL(url, p.getProperty(\"innerHtmlKey\"));\n+                            }\n+                        });\n+                    }\n+\n+                    @RequiresApi(api = Build.VERSION_CODES.M)\n+                    @Override\n+                    public void onReceivedError(WebView view, WebResourceRequest request, WebResourceError error) {\n+                        Log.v(TAG, \"LOAD onReceivedError: request: \" + request.getMethod());\n+                        Log.v(TAG, \"LOAD onReceivedError: errorResponse: \" + error.getDescription());\n+                        nativeFailedURL(request.getUrl().toString());\n+                    }\n+\n+                    @Override\n+                    public void onReceivedHttpError(WebView view, WebResourceRequest request, WebResourceResponse errorResponse) {\n+                        Log.v(TAG, \"LOAD onReceivedHttpError: request: \" + request.getMethod());\n+                        Log.v(TAG, \"LOAD onReceivedHttpError: errorResponse: \" + errorResponse.getReasonPhrase());\n+                        nativeFailedURL(request.getUrl().toString());\n+                    }\n+\n+                    @Override\n+                    public void onReceivedSslError(WebView view, SslErrorHandler handler, SslError error) {\n+                        Log.v(TAG, \"onReceivedSslError, skipping error: \" + error);\n+                        handler.proceed();\n+                    }\n+                });\n+\n+                WebSettings webSettings = NativeWebView.this.webView.getSettings();\n+                // TODO, pass from Java\n+                webSettings.setJavaScriptEnabled(true);\n+                webSettings.setJavaScriptCanOpenWindowsAutomatically(true);\n+                webSettings.setDomStorageEnabled(true);\n+                webSettings.setUseWideViewPort(true);\n+                webSettings.setLoadWithOverviewMode(true);\n+\n+                Log.v(TAG, \"NATIVEWEBVIEW wv = \"+NativeWebView.this.webView);\n+                Log.v(TAG, \"finally, NATIVEWEBVIEW wv = \"+NativeWebView.this.webView);\n+            }\n+        });\n+        reLayout();\n+        Log.v(TAG, \"NATIVEWEBVIEW constructor returns: \"+this);\n+    }\n+\n+    public void loadUrl(final String url) {\n+        Log.v(TAG, \"in dalvik, loadUrl called wwith url = \"+url+\" and webView = \"+this.webView);\n+        instance.runOnUiThread(new Runnable () {\n+            public void run() {\n+                NativeWebView.this.webView.loadUrl(url);\n+            }\n+        });\n+    }\n+\n+    public String executeScript(final String script) {\n+        Log.v(TAG, \"in dalvik, loadUrl called with script  and webView = \"+this.webView);\n+        final CountDownLatch latch = new CountDownLatch(1);\n+        scriptResult = null;\n+        Runnable action = new Runnable() {\n+            @Override\n+            public void run() {\n+                NativeWebView.this.webView.evaluateJavascript(script, new ValueCallback<String>() {\n+                    @Override\n+                    public void onReceiveValue(String s) {\n+                        Log.v(TAG, \"in dalvik, script result: \" + s);\n+                        scriptResult = s;\n+                        latch.countDown();\n+                    }\n+                });\n+            }\n+        };\n+        webView.post(action);\n+        try {\n+            latch.await();\n+        } catch (Exception e) {\n+            e.printStackTrace();\n+        }\n+        Log.v(TAG, \"in dalvik, loadUrl script result = \" + scriptResult);\n+        return scriptResult;\n+    }\n+\n+    private void setVisible(boolean visible) {\n+        if (this.visible != visible) {\n+            this.visible = visible;\n+            Log.v(TAG, \"in dalvik, set visible = \" + visible);\n+            instance.runOnUiThread(new Runnable() {\n+                public void run() {\n+                    if (NativeWebView.this.visible) {\n+                        NativeWebView.this.webView.setVisibility(View.VISIBLE);\n+                    } else {\n+                        NativeWebView.this.webView.setVisibility(View.GONE);\n+                    }\n+                }\n+            });\n+        }\n+    }\n+\n+    private void setX(double x) {\n+        if (this.x != (int) x) {\n+            this.x = (int) x;\n+            reLayout();\n+        }\n+    }\n+\n+    private void setY(double y) {\n+        if (this.y != (int) y) {\n+            this.y = (int) y;\n+            reLayout();\n+        }\n+    }\n+\n+    private void setWidth(double width) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6e0e8615ed178e73419c8004c943bab10bc2bce5"}, "originalPosition": 204}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE5MjU5NDgwOnYy", "diffSide": "RIGHT", "path": "src/main/resources/native/android/android_project/app/src/main/java/com/gluonhq/helloandroid/NativeWebView.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQyMDoyODo1OVrOHmDtOQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQyMDoyODo1OVrOHmDtOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTY2ODY2NQ==", "bodyText": "Codacy found an issue: Avoid unused private methods such as 'setVisible(boolean)'.", "url": "https://github.com/gluonhq/substrate/pull/814#discussion_r509668665", "createdAt": "2020-10-21T20:28:59Z", "author": {"login": "eugener"}, "path": "src/main/resources/native/android/android_project/app/src/main/java/com/gluonhq/helloandroid/NativeWebView.java", "diffHunk": "@@ -0,0 +1,252 @@\n+/*\n+ * Copyright (c) 2020, Gluon\n+ *\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL GLUON BE LIABLE FOR ANY\n+ * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+package com.gluonhq.helloandroid;\n+\n+import android.graphics.Bitmap;\n+import android.net.http.SslError;\n+import android.os.Build;\n+import android.support.annotation.RequiresApi;\n+import android.util.Log;\n+import android.view.Gravity;\n+import android.view.View;\n+import android.view.ViewGroup;\n+import android.widget.FrameLayout;\n+import android.webkit.SslErrorHandler;\n+import android.webkit.ValueCallback;\n+import android.webkit.WebChromeClient;\n+import android.webkit.WebResourceError;\n+import android.webkit.WebResourceRequest;\n+import android.webkit.WebResourceResponse;\n+import android.webkit.WebSettings;\n+import android.webkit.WebView;\n+import android.webkit.WebViewClient;\n+\n+import java.io.StringReader;\n+import java.util.Properties;\n+import java.util.concurrent.CountDownLatch;\n+\n+public class NativeWebView {\n+\n+    private static final String TAG     = \"GraalActivity\";\n+\n+    private static MainActivity instance;\n+    private WebView webView;\n+    private boolean inlayout = false;\n+    private boolean layoutStarted = false;\n+    private double width = 0;\n+    private double height = 0;\n+    private int x = 0;\n+    private int y = 0;\n+    private boolean visible = true;\n+    private String scriptResult;\n+\n+    public NativeWebView() {\n+        Log.v(TAG, \"NATIVEWEBVIEW constructor starts\");\n+        instance = MainActivity.getInstance();\n+        instance.runOnUiThread(new Runnable () {\n+            public void run() {\n+                NativeWebView.this.webView = new WebView(instance);\n+                NativeWebView.this.webView.setWebChromeClient(new WebChromeClient());\n+                NativeWebView.this.webView.setWebViewClient(new WebViewClient() {\n+                    @Override\n+                    public void onPageStarted(WebView view, String url, Bitmap favicon) {\n+                        super.onPageStarted(view, url, favicon);\n+                        Log.d(TAG, \"Page started: \" + url);\n+                        nativeStartURL(url);\n+                    }\n+\n+                    @Override\n+                    public void onPageFinished(WebView view, final String url) {\n+                        Log.v(TAG, \"Page finished: \" + url);\n+                        NativeWebView.this.webView.evaluateJavascript(\"document.documentElement.innerHTML\", new ValueCallback<String>() {\n+                            @Override\n+                            public void onReceiveValue(String s) {\n+                                Properties p = new Properties();\n+                                try {\n+                                    p.load(new StringReader(\"innerHtmlKey=\" + s));\n+                                } catch (Exception e) {\n+\n+                                }\n+                                nativeFinishURL(url, p.getProperty(\"innerHtmlKey\"));\n+                            }\n+                        });\n+                    }\n+\n+                    @RequiresApi(api = Build.VERSION_CODES.M)\n+                    @Override\n+                    public void onReceivedError(WebView view, WebResourceRequest request, WebResourceError error) {\n+                        Log.v(TAG, \"LOAD onReceivedError: request: \" + request.getMethod());\n+                        Log.v(TAG, \"LOAD onReceivedError: errorResponse: \" + error.getDescription());\n+                        nativeFailedURL(request.getUrl().toString());\n+                    }\n+\n+                    @Override\n+                    public void onReceivedHttpError(WebView view, WebResourceRequest request, WebResourceResponse errorResponse) {\n+                        Log.v(TAG, \"LOAD onReceivedHttpError: request: \" + request.getMethod());\n+                        Log.v(TAG, \"LOAD onReceivedHttpError: errorResponse: \" + errorResponse.getReasonPhrase());\n+                        nativeFailedURL(request.getUrl().toString());\n+                    }\n+\n+                    @Override\n+                    public void onReceivedSslError(WebView view, SslErrorHandler handler, SslError error) {\n+                        Log.v(TAG, \"onReceivedSslError, skipping error: \" + error);\n+                        handler.proceed();\n+                    }\n+                });\n+\n+                WebSettings webSettings = NativeWebView.this.webView.getSettings();\n+                // TODO, pass from Java\n+                webSettings.setJavaScriptEnabled(true);\n+                webSettings.setJavaScriptCanOpenWindowsAutomatically(true);\n+                webSettings.setDomStorageEnabled(true);\n+                webSettings.setUseWideViewPort(true);\n+                webSettings.setLoadWithOverviewMode(true);\n+\n+                Log.v(TAG, \"NATIVEWEBVIEW wv = \"+NativeWebView.this.webView);\n+                Log.v(TAG, \"finally, NATIVEWEBVIEW wv = \"+NativeWebView.this.webView);\n+            }\n+        });\n+        reLayout();\n+        Log.v(TAG, \"NATIVEWEBVIEW constructor returns: \"+this);\n+    }\n+\n+    public void loadUrl(final String url) {\n+        Log.v(TAG, \"in dalvik, loadUrl called wwith url = \"+url+\" and webView = \"+this.webView);\n+        instance.runOnUiThread(new Runnable () {\n+            public void run() {\n+                NativeWebView.this.webView.loadUrl(url);\n+            }\n+        });\n+    }\n+\n+    public String executeScript(final String script) {\n+        Log.v(TAG, \"in dalvik, loadUrl called with script  and webView = \"+this.webView);\n+        final CountDownLatch latch = new CountDownLatch(1);\n+        scriptResult = null;\n+        Runnable action = new Runnable() {\n+            @Override\n+            public void run() {\n+                NativeWebView.this.webView.evaluateJavascript(script, new ValueCallback<String>() {\n+                    @Override\n+                    public void onReceiveValue(String s) {\n+                        Log.v(TAG, \"in dalvik, script result: \" + s);\n+                        scriptResult = s;\n+                        latch.countDown();\n+                    }\n+                });\n+            }\n+        };\n+        webView.post(action);\n+        try {\n+            latch.await();\n+        } catch (Exception e) {\n+            e.printStackTrace();\n+        }\n+        Log.v(TAG, \"in dalvik, loadUrl script result = \" + scriptResult);\n+        return scriptResult;\n+    }\n+\n+    private void setVisible(boolean visible) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6e0e8615ed178e73419c8004c943bab10bc2bce5"}, "originalPosition": 174}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE5MjU5NDkwOnYy", "diffSide": "RIGHT", "path": "src/main/resources/native/android/android_project/app/src/main/java/com/gluonhq/helloandroid/NativeWebView.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQyMDoyOTowMFrOHmDtRQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQyMDoyOTowMFrOHmDtRQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTY2ODY3Nw==", "bodyText": "Codacy found an issue: Avoid unused private methods such as 'setY(double)'.", "url": "https://github.com/gluonhq/substrate/pull/814#discussion_r509668677", "createdAt": "2020-10-21T20:29:00Z", "author": {"login": "eugener"}, "path": "src/main/resources/native/android/android_project/app/src/main/java/com/gluonhq/helloandroid/NativeWebView.java", "diffHunk": "@@ -0,0 +1,252 @@\n+/*\n+ * Copyright (c) 2020, Gluon\n+ *\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL GLUON BE LIABLE FOR ANY\n+ * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+package com.gluonhq.helloandroid;\n+\n+import android.graphics.Bitmap;\n+import android.net.http.SslError;\n+import android.os.Build;\n+import android.support.annotation.RequiresApi;\n+import android.util.Log;\n+import android.view.Gravity;\n+import android.view.View;\n+import android.view.ViewGroup;\n+import android.widget.FrameLayout;\n+import android.webkit.SslErrorHandler;\n+import android.webkit.ValueCallback;\n+import android.webkit.WebChromeClient;\n+import android.webkit.WebResourceError;\n+import android.webkit.WebResourceRequest;\n+import android.webkit.WebResourceResponse;\n+import android.webkit.WebSettings;\n+import android.webkit.WebView;\n+import android.webkit.WebViewClient;\n+\n+import java.io.StringReader;\n+import java.util.Properties;\n+import java.util.concurrent.CountDownLatch;\n+\n+public class NativeWebView {\n+\n+    private static final String TAG     = \"GraalActivity\";\n+\n+    private static MainActivity instance;\n+    private WebView webView;\n+    private boolean inlayout = false;\n+    private boolean layoutStarted = false;\n+    private double width = 0;\n+    private double height = 0;\n+    private int x = 0;\n+    private int y = 0;\n+    private boolean visible = true;\n+    private String scriptResult;\n+\n+    public NativeWebView() {\n+        Log.v(TAG, \"NATIVEWEBVIEW constructor starts\");\n+        instance = MainActivity.getInstance();\n+        instance.runOnUiThread(new Runnable () {\n+            public void run() {\n+                NativeWebView.this.webView = new WebView(instance);\n+                NativeWebView.this.webView.setWebChromeClient(new WebChromeClient());\n+                NativeWebView.this.webView.setWebViewClient(new WebViewClient() {\n+                    @Override\n+                    public void onPageStarted(WebView view, String url, Bitmap favicon) {\n+                        super.onPageStarted(view, url, favicon);\n+                        Log.d(TAG, \"Page started: \" + url);\n+                        nativeStartURL(url);\n+                    }\n+\n+                    @Override\n+                    public void onPageFinished(WebView view, final String url) {\n+                        Log.v(TAG, \"Page finished: \" + url);\n+                        NativeWebView.this.webView.evaluateJavascript(\"document.documentElement.innerHTML\", new ValueCallback<String>() {\n+                            @Override\n+                            public void onReceiveValue(String s) {\n+                                Properties p = new Properties();\n+                                try {\n+                                    p.load(new StringReader(\"innerHtmlKey=\" + s));\n+                                } catch (Exception e) {\n+\n+                                }\n+                                nativeFinishURL(url, p.getProperty(\"innerHtmlKey\"));\n+                            }\n+                        });\n+                    }\n+\n+                    @RequiresApi(api = Build.VERSION_CODES.M)\n+                    @Override\n+                    public void onReceivedError(WebView view, WebResourceRequest request, WebResourceError error) {\n+                        Log.v(TAG, \"LOAD onReceivedError: request: \" + request.getMethod());\n+                        Log.v(TAG, \"LOAD onReceivedError: errorResponse: \" + error.getDescription());\n+                        nativeFailedURL(request.getUrl().toString());\n+                    }\n+\n+                    @Override\n+                    public void onReceivedHttpError(WebView view, WebResourceRequest request, WebResourceResponse errorResponse) {\n+                        Log.v(TAG, \"LOAD onReceivedHttpError: request: \" + request.getMethod());\n+                        Log.v(TAG, \"LOAD onReceivedHttpError: errorResponse: \" + errorResponse.getReasonPhrase());\n+                        nativeFailedURL(request.getUrl().toString());\n+                    }\n+\n+                    @Override\n+                    public void onReceivedSslError(WebView view, SslErrorHandler handler, SslError error) {\n+                        Log.v(TAG, \"onReceivedSslError, skipping error: \" + error);\n+                        handler.proceed();\n+                    }\n+                });\n+\n+                WebSettings webSettings = NativeWebView.this.webView.getSettings();\n+                // TODO, pass from Java\n+                webSettings.setJavaScriptEnabled(true);\n+                webSettings.setJavaScriptCanOpenWindowsAutomatically(true);\n+                webSettings.setDomStorageEnabled(true);\n+                webSettings.setUseWideViewPort(true);\n+                webSettings.setLoadWithOverviewMode(true);\n+\n+                Log.v(TAG, \"NATIVEWEBVIEW wv = \"+NativeWebView.this.webView);\n+                Log.v(TAG, \"finally, NATIVEWEBVIEW wv = \"+NativeWebView.this.webView);\n+            }\n+        });\n+        reLayout();\n+        Log.v(TAG, \"NATIVEWEBVIEW constructor returns: \"+this);\n+    }\n+\n+    public void loadUrl(final String url) {\n+        Log.v(TAG, \"in dalvik, loadUrl called wwith url = \"+url+\" and webView = \"+this.webView);\n+        instance.runOnUiThread(new Runnable () {\n+            public void run() {\n+                NativeWebView.this.webView.loadUrl(url);\n+            }\n+        });\n+    }\n+\n+    public String executeScript(final String script) {\n+        Log.v(TAG, \"in dalvik, loadUrl called with script  and webView = \"+this.webView);\n+        final CountDownLatch latch = new CountDownLatch(1);\n+        scriptResult = null;\n+        Runnable action = new Runnable() {\n+            @Override\n+            public void run() {\n+                NativeWebView.this.webView.evaluateJavascript(script, new ValueCallback<String>() {\n+                    @Override\n+                    public void onReceiveValue(String s) {\n+                        Log.v(TAG, \"in dalvik, script result: \" + s);\n+                        scriptResult = s;\n+                        latch.countDown();\n+                    }\n+                });\n+            }\n+        };\n+        webView.post(action);\n+        try {\n+            latch.await();\n+        } catch (Exception e) {\n+            e.printStackTrace();\n+        }\n+        Log.v(TAG, \"in dalvik, loadUrl script result = \" + scriptResult);\n+        return scriptResult;\n+    }\n+\n+    private void setVisible(boolean visible) {\n+        if (this.visible != visible) {\n+            this.visible = visible;\n+            Log.v(TAG, \"in dalvik, set visible = \" + visible);\n+            instance.runOnUiThread(new Runnable() {\n+                public void run() {\n+                    if (NativeWebView.this.visible) {\n+                        NativeWebView.this.webView.setVisibility(View.VISIBLE);\n+                    } else {\n+                        NativeWebView.this.webView.setVisibility(View.GONE);\n+                    }\n+                }\n+            });\n+        }\n+    }\n+\n+    private void setX(double x) {\n+        if (this.x != (int) x) {\n+            this.x = (int) x;\n+            reLayout();\n+        }\n+    }\n+\n+    private void setY(double y) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6e0e8615ed178e73419c8004c943bab10bc2bce5"}, "originalPosition": 197}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE5MjU5NTA1OnYy", "diffSide": "RIGHT", "path": "src/main/resources/native/android/android_project/app/src/main/java/com/gluonhq/helloandroid/NativeWebView.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQyMDoyOTowMVrOHmDtXA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQyMDoyOTowMVrOHmDtXA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTY2ODcwMA==", "bodyText": "Codacy found an issue: Avoid unused private methods such as 'setHeight(double)'.", "url": "https://github.com/gluonhq/substrate/pull/814#discussion_r509668700", "createdAt": "2020-10-21T20:29:01Z", "author": {"login": "eugener"}, "path": "src/main/resources/native/android/android_project/app/src/main/java/com/gluonhq/helloandroid/NativeWebView.java", "diffHunk": "@@ -0,0 +1,252 @@\n+/*\n+ * Copyright (c) 2020, Gluon\n+ *\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL GLUON BE LIABLE FOR ANY\n+ * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+package com.gluonhq.helloandroid;\n+\n+import android.graphics.Bitmap;\n+import android.net.http.SslError;\n+import android.os.Build;\n+import android.support.annotation.RequiresApi;\n+import android.util.Log;\n+import android.view.Gravity;\n+import android.view.View;\n+import android.view.ViewGroup;\n+import android.widget.FrameLayout;\n+import android.webkit.SslErrorHandler;\n+import android.webkit.ValueCallback;\n+import android.webkit.WebChromeClient;\n+import android.webkit.WebResourceError;\n+import android.webkit.WebResourceRequest;\n+import android.webkit.WebResourceResponse;\n+import android.webkit.WebSettings;\n+import android.webkit.WebView;\n+import android.webkit.WebViewClient;\n+\n+import java.io.StringReader;\n+import java.util.Properties;\n+import java.util.concurrent.CountDownLatch;\n+\n+public class NativeWebView {\n+\n+    private static final String TAG     = \"GraalActivity\";\n+\n+    private static MainActivity instance;\n+    private WebView webView;\n+    private boolean inlayout = false;\n+    private boolean layoutStarted = false;\n+    private double width = 0;\n+    private double height = 0;\n+    private int x = 0;\n+    private int y = 0;\n+    private boolean visible = true;\n+    private String scriptResult;\n+\n+    public NativeWebView() {\n+        Log.v(TAG, \"NATIVEWEBVIEW constructor starts\");\n+        instance = MainActivity.getInstance();\n+        instance.runOnUiThread(new Runnable () {\n+            public void run() {\n+                NativeWebView.this.webView = new WebView(instance);\n+                NativeWebView.this.webView.setWebChromeClient(new WebChromeClient());\n+                NativeWebView.this.webView.setWebViewClient(new WebViewClient() {\n+                    @Override\n+                    public void onPageStarted(WebView view, String url, Bitmap favicon) {\n+                        super.onPageStarted(view, url, favicon);\n+                        Log.d(TAG, \"Page started: \" + url);\n+                        nativeStartURL(url);\n+                    }\n+\n+                    @Override\n+                    public void onPageFinished(WebView view, final String url) {\n+                        Log.v(TAG, \"Page finished: \" + url);\n+                        NativeWebView.this.webView.evaluateJavascript(\"document.documentElement.innerHTML\", new ValueCallback<String>() {\n+                            @Override\n+                            public void onReceiveValue(String s) {\n+                                Properties p = new Properties();\n+                                try {\n+                                    p.load(new StringReader(\"innerHtmlKey=\" + s));\n+                                } catch (Exception e) {\n+\n+                                }\n+                                nativeFinishURL(url, p.getProperty(\"innerHtmlKey\"));\n+                            }\n+                        });\n+                    }\n+\n+                    @RequiresApi(api = Build.VERSION_CODES.M)\n+                    @Override\n+                    public void onReceivedError(WebView view, WebResourceRequest request, WebResourceError error) {\n+                        Log.v(TAG, \"LOAD onReceivedError: request: \" + request.getMethod());\n+                        Log.v(TAG, \"LOAD onReceivedError: errorResponse: \" + error.getDescription());\n+                        nativeFailedURL(request.getUrl().toString());\n+                    }\n+\n+                    @Override\n+                    public void onReceivedHttpError(WebView view, WebResourceRequest request, WebResourceResponse errorResponse) {\n+                        Log.v(TAG, \"LOAD onReceivedHttpError: request: \" + request.getMethod());\n+                        Log.v(TAG, \"LOAD onReceivedHttpError: errorResponse: \" + errorResponse.getReasonPhrase());\n+                        nativeFailedURL(request.getUrl().toString());\n+                    }\n+\n+                    @Override\n+                    public void onReceivedSslError(WebView view, SslErrorHandler handler, SslError error) {\n+                        Log.v(TAG, \"onReceivedSslError, skipping error: \" + error);\n+                        handler.proceed();\n+                    }\n+                });\n+\n+                WebSettings webSettings = NativeWebView.this.webView.getSettings();\n+                // TODO, pass from Java\n+                webSettings.setJavaScriptEnabled(true);\n+                webSettings.setJavaScriptCanOpenWindowsAutomatically(true);\n+                webSettings.setDomStorageEnabled(true);\n+                webSettings.setUseWideViewPort(true);\n+                webSettings.setLoadWithOverviewMode(true);\n+\n+                Log.v(TAG, \"NATIVEWEBVIEW wv = \"+NativeWebView.this.webView);\n+                Log.v(TAG, \"finally, NATIVEWEBVIEW wv = \"+NativeWebView.this.webView);\n+            }\n+        });\n+        reLayout();\n+        Log.v(TAG, \"NATIVEWEBVIEW constructor returns: \"+this);\n+    }\n+\n+    public void loadUrl(final String url) {\n+        Log.v(TAG, \"in dalvik, loadUrl called wwith url = \"+url+\" and webView = \"+this.webView);\n+        instance.runOnUiThread(new Runnable () {\n+            public void run() {\n+                NativeWebView.this.webView.loadUrl(url);\n+            }\n+        });\n+    }\n+\n+    public String executeScript(final String script) {\n+        Log.v(TAG, \"in dalvik, loadUrl called with script  and webView = \"+this.webView);\n+        final CountDownLatch latch = new CountDownLatch(1);\n+        scriptResult = null;\n+        Runnable action = new Runnable() {\n+            @Override\n+            public void run() {\n+                NativeWebView.this.webView.evaluateJavascript(script, new ValueCallback<String>() {\n+                    @Override\n+                    public void onReceiveValue(String s) {\n+                        Log.v(TAG, \"in dalvik, script result: \" + s);\n+                        scriptResult = s;\n+                        latch.countDown();\n+                    }\n+                });\n+            }\n+        };\n+        webView.post(action);\n+        try {\n+            latch.await();\n+        } catch (Exception e) {\n+            e.printStackTrace();\n+        }\n+        Log.v(TAG, \"in dalvik, loadUrl script result = \" + scriptResult);\n+        return scriptResult;\n+    }\n+\n+    private void setVisible(boolean visible) {\n+        if (this.visible != visible) {\n+            this.visible = visible;\n+            Log.v(TAG, \"in dalvik, set visible = \" + visible);\n+            instance.runOnUiThread(new Runnable() {\n+                public void run() {\n+                    if (NativeWebView.this.visible) {\n+                        NativeWebView.this.webView.setVisibility(View.VISIBLE);\n+                    } else {\n+                        NativeWebView.this.webView.setVisibility(View.GONE);\n+                    }\n+                }\n+            });\n+        }\n+    }\n+\n+    private void setX(double x) {\n+        if (this.x != (int) x) {\n+            this.x = (int) x;\n+            reLayout();\n+        }\n+    }\n+\n+    private void setY(double y) {\n+        if (this.y != (int) y) {\n+            this.y = (int) y;\n+            reLayout();\n+        }\n+    }\n+\n+    private void setWidth(double width) {\n+        if (this.width != width) {\n+            this.width = width;\n+            reLayout();\n+        }\n+    }\n+\n+    private void setHeight(double height) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6e0e8615ed178e73419c8004c943bab10bc2bce5"}, "originalPosition": 211}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE5MjU5NTE0OnYy", "diffSide": "RIGHT", "path": "src/main/resources/native/android/android_project/app/src/main/java/com/gluonhq/helloandroid/NativeWebView.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQyMDoyOTowMlrOHmDtaw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQyMDoyOTowMlrOHmDtaw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTY2ODcxNQ==", "bodyText": "Codacy found an issue: Possible unsafe assignment to a non-final static field in a constructor.", "url": "https://github.com/gluonhq/substrate/pull/814#discussion_r509668715", "createdAt": "2020-10-21T20:29:02Z", "author": {"login": "eugener"}, "path": "src/main/resources/native/android/android_project/app/src/main/java/com/gluonhq/helloandroid/NativeWebView.java", "diffHunk": "@@ -0,0 +1,252 @@\n+/*\n+ * Copyright (c) 2020, Gluon\n+ *\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL GLUON BE LIABLE FOR ANY\n+ * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+package com.gluonhq.helloandroid;\n+\n+import android.graphics.Bitmap;\n+import android.net.http.SslError;\n+import android.os.Build;\n+import android.support.annotation.RequiresApi;\n+import android.util.Log;\n+import android.view.Gravity;\n+import android.view.View;\n+import android.view.ViewGroup;\n+import android.widget.FrameLayout;\n+import android.webkit.SslErrorHandler;\n+import android.webkit.ValueCallback;\n+import android.webkit.WebChromeClient;\n+import android.webkit.WebResourceError;\n+import android.webkit.WebResourceRequest;\n+import android.webkit.WebResourceResponse;\n+import android.webkit.WebSettings;\n+import android.webkit.WebView;\n+import android.webkit.WebViewClient;\n+\n+import java.io.StringReader;\n+import java.util.Properties;\n+import java.util.concurrent.CountDownLatch;\n+\n+public class NativeWebView {\n+\n+    private static final String TAG     = \"GraalActivity\";\n+\n+    private static MainActivity instance;\n+    private WebView webView;\n+    private boolean inlayout = false;\n+    private boolean layoutStarted = false;\n+    private double width = 0;\n+    private double height = 0;\n+    private int x = 0;\n+    private int y = 0;\n+    private boolean visible = true;\n+    private String scriptResult;\n+\n+    public NativeWebView() {\n+        Log.v(TAG, \"NATIVEWEBVIEW constructor starts\");\n+        instance = MainActivity.getInstance();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6e0e8615ed178e73419c8004c943bab10bc2bce5"}, "originalPosition": 70}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE5MjU5NTIyOnYy", "diffSide": "RIGHT", "path": "src/main/resources/native/android/android_project/app/src/main/java/com/gluonhq/helloandroid/NativeWebView.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQyMDoyOTowM1rOHmDtdA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQyMDoyOTowM1rOHmDtdA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTY2ODcyNA==", "bodyText": "Codacy found an issue: Avoid unused private methods such as 'setX(double)'.", "url": "https://github.com/gluonhq/substrate/pull/814#discussion_r509668724", "createdAt": "2020-10-21T20:29:03Z", "author": {"login": "eugener"}, "path": "src/main/resources/native/android/android_project/app/src/main/java/com/gluonhq/helloandroid/NativeWebView.java", "diffHunk": "@@ -0,0 +1,252 @@\n+/*\n+ * Copyright (c) 2020, Gluon\n+ *\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL GLUON BE LIABLE FOR ANY\n+ * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+package com.gluonhq.helloandroid;\n+\n+import android.graphics.Bitmap;\n+import android.net.http.SslError;\n+import android.os.Build;\n+import android.support.annotation.RequiresApi;\n+import android.util.Log;\n+import android.view.Gravity;\n+import android.view.View;\n+import android.view.ViewGroup;\n+import android.widget.FrameLayout;\n+import android.webkit.SslErrorHandler;\n+import android.webkit.ValueCallback;\n+import android.webkit.WebChromeClient;\n+import android.webkit.WebResourceError;\n+import android.webkit.WebResourceRequest;\n+import android.webkit.WebResourceResponse;\n+import android.webkit.WebSettings;\n+import android.webkit.WebView;\n+import android.webkit.WebViewClient;\n+\n+import java.io.StringReader;\n+import java.util.Properties;\n+import java.util.concurrent.CountDownLatch;\n+\n+public class NativeWebView {\n+\n+    private static final String TAG     = \"GraalActivity\";\n+\n+    private static MainActivity instance;\n+    private WebView webView;\n+    private boolean inlayout = false;\n+    private boolean layoutStarted = false;\n+    private double width = 0;\n+    private double height = 0;\n+    private int x = 0;\n+    private int y = 0;\n+    private boolean visible = true;\n+    private String scriptResult;\n+\n+    public NativeWebView() {\n+        Log.v(TAG, \"NATIVEWEBVIEW constructor starts\");\n+        instance = MainActivity.getInstance();\n+        instance.runOnUiThread(new Runnable () {\n+            public void run() {\n+                NativeWebView.this.webView = new WebView(instance);\n+                NativeWebView.this.webView.setWebChromeClient(new WebChromeClient());\n+                NativeWebView.this.webView.setWebViewClient(new WebViewClient() {\n+                    @Override\n+                    public void onPageStarted(WebView view, String url, Bitmap favicon) {\n+                        super.onPageStarted(view, url, favicon);\n+                        Log.d(TAG, \"Page started: \" + url);\n+                        nativeStartURL(url);\n+                    }\n+\n+                    @Override\n+                    public void onPageFinished(WebView view, final String url) {\n+                        Log.v(TAG, \"Page finished: \" + url);\n+                        NativeWebView.this.webView.evaluateJavascript(\"document.documentElement.innerHTML\", new ValueCallback<String>() {\n+                            @Override\n+                            public void onReceiveValue(String s) {\n+                                Properties p = new Properties();\n+                                try {\n+                                    p.load(new StringReader(\"innerHtmlKey=\" + s));\n+                                } catch (Exception e) {\n+\n+                                }\n+                                nativeFinishURL(url, p.getProperty(\"innerHtmlKey\"));\n+                            }\n+                        });\n+                    }\n+\n+                    @RequiresApi(api = Build.VERSION_CODES.M)\n+                    @Override\n+                    public void onReceivedError(WebView view, WebResourceRequest request, WebResourceError error) {\n+                        Log.v(TAG, \"LOAD onReceivedError: request: \" + request.getMethod());\n+                        Log.v(TAG, \"LOAD onReceivedError: errorResponse: \" + error.getDescription());\n+                        nativeFailedURL(request.getUrl().toString());\n+                    }\n+\n+                    @Override\n+                    public void onReceivedHttpError(WebView view, WebResourceRequest request, WebResourceResponse errorResponse) {\n+                        Log.v(TAG, \"LOAD onReceivedHttpError: request: \" + request.getMethod());\n+                        Log.v(TAG, \"LOAD onReceivedHttpError: errorResponse: \" + errorResponse.getReasonPhrase());\n+                        nativeFailedURL(request.getUrl().toString());\n+                    }\n+\n+                    @Override\n+                    public void onReceivedSslError(WebView view, SslErrorHandler handler, SslError error) {\n+                        Log.v(TAG, \"onReceivedSslError, skipping error: \" + error);\n+                        handler.proceed();\n+                    }\n+                });\n+\n+                WebSettings webSettings = NativeWebView.this.webView.getSettings();\n+                // TODO, pass from Java\n+                webSettings.setJavaScriptEnabled(true);\n+                webSettings.setJavaScriptCanOpenWindowsAutomatically(true);\n+                webSettings.setDomStorageEnabled(true);\n+                webSettings.setUseWideViewPort(true);\n+                webSettings.setLoadWithOverviewMode(true);\n+\n+                Log.v(TAG, \"NATIVEWEBVIEW wv = \"+NativeWebView.this.webView);\n+                Log.v(TAG, \"finally, NATIVEWEBVIEW wv = \"+NativeWebView.this.webView);\n+            }\n+        });\n+        reLayout();\n+        Log.v(TAG, \"NATIVEWEBVIEW constructor returns: \"+this);\n+    }\n+\n+    public void loadUrl(final String url) {\n+        Log.v(TAG, \"in dalvik, loadUrl called wwith url = \"+url+\" and webView = \"+this.webView);\n+        instance.runOnUiThread(new Runnable () {\n+            public void run() {\n+                NativeWebView.this.webView.loadUrl(url);\n+            }\n+        });\n+    }\n+\n+    public String executeScript(final String script) {\n+        Log.v(TAG, \"in dalvik, loadUrl called with script  and webView = \"+this.webView);\n+        final CountDownLatch latch = new CountDownLatch(1);\n+        scriptResult = null;\n+        Runnable action = new Runnable() {\n+            @Override\n+            public void run() {\n+                NativeWebView.this.webView.evaluateJavascript(script, new ValueCallback<String>() {\n+                    @Override\n+                    public void onReceiveValue(String s) {\n+                        Log.v(TAG, \"in dalvik, script result: \" + s);\n+                        scriptResult = s;\n+                        latch.countDown();\n+                    }\n+                });\n+            }\n+        };\n+        webView.post(action);\n+        try {\n+            latch.await();\n+        } catch (Exception e) {\n+            e.printStackTrace();\n+        }\n+        Log.v(TAG, \"in dalvik, loadUrl script result = \" + scriptResult);\n+        return scriptResult;\n+    }\n+\n+    private void setVisible(boolean visible) {\n+        if (this.visible != visible) {\n+            this.visible = visible;\n+            Log.v(TAG, \"in dalvik, set visible = \" + visible);\n+            instance.runOnUiThread(new Runnable() {\n+                public void run() {\n+                    if (NativeWebView.this.visible) {\n+                        NativeWebView.this.webView.setVisibility(View.VISIBLE);\n+                    } else {\n+                        NativeWebView.this.webView.setVisibility(View.GONE);\n+                    }\n+                }\n+            });\n+        }\n+    }\n+\n+    private void setX(double x) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6e0e8615ed178e73419c8004c943bab10bc2bce5"}, "originalPosition": 190}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2875, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}