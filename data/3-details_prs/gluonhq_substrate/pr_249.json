{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYwMDg2MzE3", "number": 249, "title": "Use latest Android build-tools", "bodyText": "Removes hard-coded version of build-tools and uses the latest version present in Android SDK path.\nFixes #255", "createdAt": "2020-01-07T17:09:57Z", "url": "https://github.com/gluonhq/substrate/pull/249", "merged": true, "mergeCommit": {"oid": "0adc83ecfc03f7bcabee06c5aa9423eabb89be7c"}, "closed": true, "closedAt": "2020-01-14T20:45:18Z", "author": {"login": "abhinayagarwal"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb4D6j3AH2gAyMzYwMDg2MzE3OmRiZmRlMjlmNTRkMjE2NGY4YjJmM2VmMmRmOTg0YTViZjljMGRiYzk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb6XKW6AFqTM0MjgyNDYyMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "dbfde29f54d2164f8b2f3ef2df984a5bf9c0dbc9", "author": {"user": {"login": "abhinayagarwal", "name": "Abhinay Agarwal"}}, "url": "https://github.com/gluonhq/substrate/commit/dbfde29f54d2164f8b2f3ef2df984a5bf9c0dbc9", "committedDate": "2020-01-07T17:08:22Z", "message": "Use latest Android build-tools"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM5Mzg0NzU3", "url": "https://github.com/gluonhq/substrate/pull/249#pullrequestreview-339384757", "createdAt": "2020-01-07T17:21:33Z", "commit": {"oid": "dbfde29f54d2164f8b2f3ef2df984a5bf9c0dbc9"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QxNzoyMTozM1rOFbALJw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QxNzoyNjoyMlrOFbATxQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mzg1ODcyNw==", "bodyText": "Use Files.exists(buildToolsPath) instead", "url": "https://github.com/gluonhq/substrate/pull/249#discussion_r363858727", "createdAt": "2020-01-07T17:21:33Z", "author": {"login": "jperedadnr"}, "path": "src/main/java/com/gluonhq/substrate/target/AndroidTargetConfiguration.java", "diffHunk": "@@ -360,4 +362,20 @@ private void createDevelopKeystore() throws IOException, InterruptedException {\n \n         System.err.println(\"done creating ks\");\n     }\n+    \n+    private String findLatestBuildTool(Path sdkPath) throws IOException {\n+        Path buildToolsPath = sdkPath.resolve(\"build-tools\");\n+        if (buildToolsPath.toFile().exists()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dbfde29f54d2164f8b2f3ef2df984a5bf9c0dbc9"}, "originalPosition": 44}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mzg1OTYyOA==", "bodyText": "Objects.requireNonNull(sdkPath) and Files.exists(sdkPath)?", "url": "https://github.com/gluonhq/substrate/pull/249#discussion_r363859628", "createdAt": "2020-01-07T17:23:32Z", "author": {"login": "jperedadnr"}, "path": "src/main/java/com/gluonhq/substrate/target/AndroidTargetConfiguration.java", "diffHunk": "@@ -360,4 +362,20 @@ private void createDevelopKeystore() throws IOException, InterruptedException {\n \n         System.err.println(\"done creating ks\");\n     }\n+    \n+    private String findLatestBuildTool(Path sdkPath) throws IOException {\n+        Path buildToolsPath = sdkPath.resolve(\"build-tools\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dbfde29f54d2164f8b2f3ef2df984a5bf9c0dbc9"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mzg2MDkzMw==", "bodyText": "maybe you simplify it to something like return Files.walk().filter().map().max(...).map(toString).orElseThrow(IOException)?", "url": "https://github.com/gluonhq/substrate/pull/249#discussion_r363860933", "createdAt": "2020-01-07T17:26:22Z", "author": {"login": "jperedadnr"}, "path": "src/main/java/com/gluonhq/substrate/target/AndroidTargetConfiguration.java", "diffHunk": "@@ -360,4 +362,20 @@ private void createDevelopKeystore() throws IOException, InterruptedException {\n \n         System.err.println(\"done creating ks\");\n     }\n+    \n+    private String findLatestBuildTool(Path sdkPath) throws IOException {\n+        Path buildToolsPath = sdkPath.resolve(\"build-tools\");\n+        if (buildToolsPath.toFile().exists()) {\n+            Optional<Version> latest = Files.walk(buildToolsPath, 1)\n+                    .filter(file -> Files.isDirectory(file) && !file.equals(buildToolsPath))\n+                    .map(file -> new Version(file.getFileName().toString()))\n+                    .max(Version::compareTo);\n+            if (latest.isPresent()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dbfde29f54d2164f8b2f3ef2df984a5bf9c0dbc9"}, "originalPosition": 49}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "038c82061344bf39363603fdbd300dcd7a6a7b1c", "author": {"user": {"login": "abhinayagarwal", "name": "Abhinay Agarwal"}}, "url": "https://github.com/gluonhq/substrate/commit/038c82061344bf39363603fdbd300dcd7a6a7b1c", "committedDate": "2020-01-08T13:58:34Z", "message": "Changes as per review comments"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3530b17452fbafe746a4473d9c693fa413eb5970", "author": {"user": {"login": "gluon-bot", "name": "Gluon Bot"}}, "url": "https://github.com/gluonhq/substrate/commit/3530b17452fbafe746a4473d9c693fa413eb5970", "committedDate": "2020-01-08T13:49:45Z", "message": "Changes as per review comments"}, "afterCommit": {"oid": "038c82061344bf39363603fdbd300dcd7a6a7b1c", "author": {"user": {"login": "abhinayagarwal", "name": "Abhinay Agarwal"}}, "url": "https://github.com/gluonhq/substrate/commit/038c82061344bf39363603fdbd300dcd7a6a7b1c", "committedDate": "2020-01-08T13:58:34Z", "message": "Changes as per review comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQwMzY2MTc4", "url": "https://github.com/gluonhq/substrate/pull/249#pullrequestreview-340366178", "createdAt": "2020-01-09T08:53:56Z", "commit": {"oid": "038c82061344bf39363603fdbd300dcd7a6a7b1c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQyODI0NjIx", "url": "https://github.com/gluonhq/substrate/pull/249#pullrequestreview-342824621", "createdAt": "2020-01-14T20:41:40Z", "commit": {"oid": "038c82061344bf39363603fdbd300dcd7a6a7b1c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2182, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}