{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIwNzI1Mjg4", "number": 610, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQxNDoyMDowMFrOD-PgQQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQwNjoxOToxN1rOD_Rcjw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY2NTkyMzIxOnYy", "diffSide": "RIGHT", "path": "src/main/java/com/gluonhq/substrate/model/Triplet.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQxNDoyMDowMFrOGYOMdA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQxNDoyMjoyN1rOGYOUSw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODA1MTU3Mg==", "bodyText": "this will fail on Darwin as host and target", "url": "https://github.com/gluonhq/substrate/pull/610#discussion_r428051572", "createdAt": "2020-05-20T14:20:00Z", "author": {"login": "johanvos"}, "path": "src/main/java/com/gluonhq/substrate/model/Triplet.java", "diffHunk": "@@ -114,9 +114,9 @@ public boolean canCompileTo(Triplet target) {\n         // if the host os and target os are the same, always return true\n         if (getOs().equals(target.getOs())) return true;\n \n-        // if host is linux and target is ios, fail\n-        return (!Constants.OS_LINUX.equals(getOs()) && !Constants.OS_WINDOWS.equals(getOs())) ||\n-                !Constants.OS_IOS.equals(target.getOs());\n+        // so far, iOS can be built from Mac, Android can be built from Linux\n+        return (OS_DARWIN.equals(getOs()) && Constants.OS_IOS.equals(target.getOs())) ||", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "de4cd8d3a5d4b7c016a5b39220c46a89cd8727ce"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODA1MzU3OQ==", "bodyText": "if returns true before when host and target are the same.", "url": "https://github.com/gluonhq/substrate/pull/610#discussion_r428053579", "createdAt": "2020-05-20T14:22:27Z", "author": {"login": "jperedadnr"}, "path": "src/main/java/com/gluonhq/substrate/model/Triplet.java", "diffHunk": "@@ -114,9 +114,9 @@ public boolean canCompileTo(Triplet target) {\n         // if the host os and target os are the same, always return true\n         if (getOs().equals(target.getOs())) return true;\n \n-        // if host is linux and target is ios, fail\n-        return (!Constants.OS_LINUX.equals(getOs()) && !Constants.OS_WINDOWS.equals(getOs())) ||\n-                !Constants.OS_IOS.equals(target.getOs());\n+        // so far, iOS can be built from Mac, Android can be built from Linux\n+        return (OS_DARWIN.equals(getOs()) && Constants.OS_IOS.equals(target.getOs())) ||", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODA1MTU3Mg=="}, "originalCommit": {"oid": "de4cd8d3a5d4b7c016a5b39220c46a89cd8727ce"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY2NjE1NzA4OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/gluonhq/substrate/model/Triplet.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQxNTowODo0MFrOGYQi6w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQxNTowODo0MFrOGYQi6w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODA5MDA5MQ==", "bodyText": "s/Constants.OS_IOS/OS_IOS", "url": "https://github.com/gluonhq/substrate/pull/610#discussion_r428090091", "createdAt": "2020-05-20T15:08:40Z", "author": {"login": "abhinayagarwal"}, "path": "src/main/java/com/gluonhq/substrate/model/Triplet.java", "diffHunk": "@@ -114,9 +114,9 @@ public boolean canCompileTo(Triplet target) {\n         // if the host os and target os are the same, always return true\n         if (getOs().equals(target.getOs())) return true;\n \n-        // if host is linux and target is ios, fail\n-        return (!Constants.OS_LINUX.equals(getOs()) && !Constants.OS_WINDOWS.equals(getOs())) ||\n-                !Constants.OS_IOS.equals(target.getOs());\n+        // so far, iOS can be built from Mac, Android can be built from Linux\n+        return (OS_DARWIN.equals(getOs()) && Constants.OS_IOS.equals(target.getOs())) ||", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "de4cd8d3a5d4b7c016a5b39220c46a89cd8727ce"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY3NjcyNzE5OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/gluonhq/substrate/SubstrateDispatcher.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQwNjoxOToxN1rOGZ11Tw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQwODo0Mjo1OVrOGZ5jkg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTc0OTU4Mw==", "bodyText": "I don't think this check belongs here. We want to get the targetConfiguration, even if we can't compile to it.\n(e.g. because we want to build in the cloud, or do other operations, e.g. link/run or so, that do not depend on compilation)", "url": "https://github.com/gluonhq/substrate/pull/610#discussion_r429749583", "createdAt": "2020-05-25T06:19:17Z", "author": {"login": "johanvos"}, "path": "src/main/java/com/gluonhq/substrate/SubstrateDispatcher.java", "diffHunk": "@@ -310,6 +310,9 @@ public SubstrateDispatcher(Path buildRoot, ProjectConfiguration config) throws I\n     }\n \n     private TargetConfiguration getTargetConfiguration(Triplet targetTriplet) throws IOException {\n+        if (!config.getHostTriplet().canCompileTo(targetTriplet)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1287bc793d5cf423575c63bcaeb1b6faf64f09cd"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTc5NzMyMg==", "bodyText": "Ok, but problem so far is that AndroidTarget will start downloading SDK once the target is set.", "url": "https://github.com/gluonhq/substrate/pull/610#discussion_r429797322", "createdAt": "2020-05-25T08:16:13Z", "author": {"login": "jperedadnr"}, "path": "src/main/java/com/gluonhq/substrate/SubstrateDispatcher.java", "diffHunk": "@@ -310,6 +310,9 @@ public SubstrateDispatcher(Path buildRoot, ProjectConfiguration config) throws I\n     }\n \n     private TargetConfiguration getTargetConfiguration(Triplet targetTriplet) throws IOException {\n+        if (!config.getHostTriplet().canCompileTo(targetTriplet)) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTc0OTU4Mw=="}, "originalCommit": {"oid": "1287bc793d5cf423575c63bcaeb1b6faf64f09cd"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTgxMDU3OA==", "bodyText": "That is wrong, but has nothing to do with cross-compiling.\ne.g. farm build allows for AndroidTarget on mac, but SDK should not be downloaded.", "url": "https://github.com/gluonhq/substrate/pull/610#discussion_r429810578", "createdAt": "2020-05-25T08:42:59Z", "author": {"login": "johanvos"}, "path": "src/main/java/com/gluonhq/substrate/SubstrateDispatcher.java", "diffHunk": "@@ -310,6 +310,9 @@ public SubstrateDispatcher(Path buildRoot, ProjectConfiguration config) throws I\n     }\n \n     private TargetConfiguration getTargetConfiguration(Triplet targetTriplet) throws IOException {\n+        if (!config.getHostTriplet().canCompileTo(targetTriplet)) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTc0OTU4Mw=="}, "originalCommit": {"oid": "1287bc793d5cf423575c63bcaeb1b6faf64f09cd"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2906, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}