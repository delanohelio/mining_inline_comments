{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ2Njc0MjM5", "number": 2394, "title": "Add distribute-to-one edge type", "bodyText": "State: feature implemented, but untested", "createdAt": "2020-07-09T07:32:10Z", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2394", "merged": true, "mergeCommit": {"oid": "ac7c06e1fedd1e6db86be1a795680c9881606f68"}, "closed": true, "closedAt": "2020-08-03T08:58:06Z", "author": {"login": "viliam-durina"}, "timelineItems": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABczJ8jFAH2gAyNDQ2Njc0MjM5OjY1N2I2OGM2YmQ3NjFlNmVlOGM2OWQ2NTg1NzZlZDQ2ZmIyNWE5OTc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc5qfulAH2gAyNDQ2Njc0MjM5OjQ0MDBiMWU4MTcxNGJlZDdmMzQ5MmMxNDQ4YmMxZjg4MjcxMGJjNWY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "657b68c6bd761e6ee8c69d658576ed46fb25a997", "author": {"user": {"login": "viliam-durina", "name": "Viliam Durina"}}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/657b68c6bd761e6ee8c69d658576ed46fb25a997", "committedDate": "2020-07-09T07:31:30Z", "message": "Add distribute-to-one edge type\n\nState: feature implemented, but untested"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2d28d2dd4386034d567e38a3b4b0aa4d1d8fa12d", "author": {"user": {"login": "viliam-durina", "name": "Viliam Durina"}}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/2d28d2dd4386034d567e38a3b4b0aa4d1d8fa12d", "committedDate": "2020-07-09T08:29:10Z", "message": "Fix test failure"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "367281f85b44e0c5de6165be6066aacd1d8db608", "author": {"user": {"login": "viliam-durina", "name": "Viliam Durina"}}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/367281f85b44e0c5de6165be6066aacd1d8db608", "committedDate": "2020-07-09T14:56:39Z", "message": "Add test, the orphaned processor doesn't terminate (i guess so)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ4ODA0NTQy", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2394#pullrequestreview-448804542", "createdAt": "2020-07-15T09:56:20Z", "commit": {"oid": "2d28d2dd4386034d567e38a3b4b0aa4d1d8fa12d"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "77b736e5f18c779ee8d82944a023e6e70a7a535b", "author": {"user": {"login": "viliam-durina", "name": "Viliam Durina"}}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/77b736e5f18c779ee8d82944a023e6e70a7a535b", "committedDate": "2020-07-20T14:44:55Z", "message": "Merge branch 'master' into distribute-to-one"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6daff779acfc0ddcfaa48e51d75f8882d5519847", "author": {"user": {"login": "viliam-durina", "name": "Viliam Durina"}}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/6daff779acfc0ddcfaa48e51d75f8882d5519847", "committedDate": "2020-07-20T14:59:33Z", "message": "Test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a9f1cbe8add0cb1a38c262e5f03e3bdbf0377d3c", "author": {"user": {"login": "viliam-durina", "name": "Viliam Durina"}}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/a9f1cbe8add0cb1a38c262e5f03e3bdbf0377d3c", "committedDate": "2020-07-21T13:33:23Z", "message": "Final impl"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f039da385d6483ad320286c36e030ffe30b967f2", "author": {"user": {"login": "viliam-durina", "name": "Viliam Durina"}}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/f039da385d6483ad320286c36e030ffe30b967f2", "committedDate": "2020-07-21T14:03:35Z", "message": "Touchups"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0daddcf021f30547601c8429f9d5d9c2fd7ef162", "author": {"user": {"login": "viliam-durina", "name": "Viliam Durina"}}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/0daddcf021f30547601c8429f9d5d9c2fd7ef162", "committedDate": "2020-07-22T08:20:02Z", "message": "Merge branch 'master' into distribute-to-one\n\n# Conflicts:\n#\thazelcast-jet-core/src/main/java/com/hazelcast/jet/impl/execution/init/ExecutionPlan.java\n#\thazelcast-jet-core/src/main/java/com/hazelcast/jet/impl/execution/init/PartitionArrangement.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bfab85be3d15884d1e204a5cba23005fdb0d6c2e", "author": {"user": {"login": "viliam-durina", "name": "Viliam Durina"}}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/bfab85be3d15884d1e204a5cba23005fdb0d6c2e", "committedDate": "2020-07-22T09:37:01Z", "message": "Fix test failure"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU2NjQyNTUx", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2394#pullrequestreview-456642551", "createdAt": "2020-07-28T13:41:58Z", "commit": {"oid": "bfab85be3d15884d1e204a5cba23005fdb0d6c2e"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxMzo0MTo1OFrOG4NJsw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxNDoyNjo1OFrOG4PULg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTU4ODkxNQ==", "bodyText": "This is a breaking change and possibly undesirable. The user could be checking if the edge already has a destination.", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2394#discussion_r461588915", "createdAt": "2020-07-28T13:41:58Z", "author": {"login": "mtopolnik"}, "path": "hazelcast-jet-core/src/main/java/com/hazelcast/jet/core/Edge.java", "diffHunk": "@@ -177,8 +198,9 @@ public int getSourceOrdinal() {\n     /**\n      * Returns the name of the destination vertex.\n      */\n+    @Nonnull\n     public String getDestName() {\n-        return destName;\n+        return requireNonNull(destName, \"destination not yet set on the edge\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bfab85be3d15884d1e204a5cba23005fdb0d6c2e"}, "originalPosition": 94}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTU5MjAxMw==", "bodyText": "Why the double null check?", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2394#discussion_r461592013", "createdAt": "2020-07-28T13:46:05Z", "author": {"login": "mtopolnik"}, "path": "hazelcast-jet-core/src/main/java/com/hazelcast/jet/impl/execution/ConveyorCollector.java", "diffHunk": "@@ -19,16 +19,19 @@\n import com.hazelcast.internal.util.concurrent.ConcurrentConveyor;\n import com.hazelcast.jet.impl.util.ProgressState;\n \n+import javax.annotation.Nonnull;\n import javax.annotation.Nullable;\n \n+import static java.util.Objects.requireNonNull;\n+\n public class ConveyorCollector implements OutboundCollector {\n \n     private final ConcurrentConveyor<Object> conveyor;\n     private final int queueIndex;\n     private final int[] partitions;\n \n-    public ConveyorCollector(ConcurrentConveyor<Object> conveyor, int queueIndex, @Nullable int[] partitions) {\n-        this.conveyor = conveyor;\n+    public ConveyorCollector(@Nonnull ConcurrentConveyor<Object> conveyor, int queueIndex, @Nullable int[] partitions) {\n+        this.conveyor = requireNonNull(conveyor);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bfab85be3d15884d1e204a5cba23005fdb0d6c2e"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTYyNDM2Ng==", "bodyText": "String.valueOf(e.getDistributedTo()) is nicer than this \"append empty string\" idiom.", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2394#discussion_r461624366", "createdAt": "2020-07-28T14:26:58Z", "author": {"login": "mtopolnik"}, "path": "hazelcast-jet-core/src/main/java/com/hazelcast/jet/core/DAG.java", "diffHunk": "@@ -363,7 +361,7 @@ public JsonObject toJson(int defaultLocalParallelism) {\n             edge.add(\"to\", e.getDestName());\n             edge.add(\"toOrdinal\", e.getDestOrdinal());\n             edge.add(\"priority\", e.getPriority());\n-            edge.add(\"distributed\", e.isDistributed());\n+            edge.add(\"distributedTo\", e.getDistributedTo() + \"\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bfab85be3d15884d1e204a5cba23005fdb0d6c2e"}, "originalPosition": 23}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "448b681c87d5bfa93ad3055f6feb5573b17a9ad0", "author": {"user": {"login": "viliam-durina", "name": "Viliam Durina"}}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/448b681c87d5bfa93ad3055f6feb5573b17a9ad0", "committedDate": "2020-07-28T20:16:25Z", "message": "Merge branch 'master' into distribute-to-one"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "309f442fd4d8da3c029011b25838affe83d8af46", "author": {"user": {"login": "viliam-durina", "name": "Viliam Durina"}}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/309f442fd4d8da3c029011b25838affe83d8af46", "committedDate": "2020-07-28T20:24:40Z", "message": "Address the review"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU3NDA1NzU5", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2394#pullrequestreview-457405759", "createdAt": "2020-07-29T10:46:50Z", "commit": {"oid": "309f442fd4d8da3c029011b25838affe83d8af46"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4400b1e81714bed7f3492c1448bc1f882710bc5f", "author": {"user": {"login": "viliam-durina", "name": "Viliam Durina"}}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/4400b1e81714bed7f3492c1448bc1f882710bc5f", "committedDate": "2020-07-29T12:50:26Z", "message": "Fix test failure"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3727, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}