{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc3OTE2NTQ0", "number": 2485, "title": "Use real-time WMs with ingestion timestamps", "bodyText": "Will not have the sparse-event issue.", "createdAt": "2020-09-02T15:49:40Z", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2485", "merged": true, "mergeCommit": {"oid": "bd96382fa6462d5e12f9376d7a9b993580b16615"}, "closed": true, "closedAt": "2020-09-07T10:17:51Z", "author": {"login": "viliam-durina"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdE9_GmAH2gAyNDc3OTE2NTQ0OjFlNGY4NDU4ZGIyM2MxN2I2NDU5MDhkZWI1MWNjMzE5NDBkNWVjY2M=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdGfg_EAH2gAyNDc3OTE2NTQ0OmJiNTI5MTYyM2Q2MTIxZjk1Y2QxZTIwOTJhZWViNjUxZDFlOWIxN2Q=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "1e4f8458db23c17b645908deb51cc31940d5eccc", "author": {"user": {"login": "viliam-durina", "name": "Viliam Durina"}}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/1e4f8458db23c17b645908deb51cc31940d5eccc", "committedDate": "2020-09-02T15:46:04Z", "message": "Use real-time WMs with ingestion timestamps\n\nWill not have the sparse-event issue."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgwOTY3OTAy", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2485#pullrequestreview-480967902", "createdAt": "2020-09-02T15:56:04Z", "commit": {"oid": "1e4f8458db23c17b645908deb51cc31940d5eccc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQxNTo1NjowNVrOHL2F0A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQxNTo1NjowNVrOHL2F0A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjE4MjYwOA==", "bodyText": "missing @since", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2485#discussion_r482182608", "createdAt": "2020-09-02T15:56:05Z", "author": {"login": "cangencer"}, "path": "hazelcast-jet-core/src/main/java/com/hazelcast/jet/core/WatermarkPolicy.java", "diffHunk": "@@ -98,4 +90,27 @@ public long getCurrentWatermark() {\n             }\n         };\n     }\n+\n+    /**\n+     * Maintains a watermark that lags behind the real time by the given\n+     * amount. Doesn't consider the event timestamp at all.\n+     *\n+     * @param lag the desired difference between the top observed timestamp\n+     *            and the watermark\n+     */\n+    @Nonnull", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1e4f8458db23c17b645908deb51cc31940d5eccc"}, "originalPosition": 54}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f27cf95e03279c84fc25f113b2550fa8368f9a82", "author": {"user": {"login": "viliam-durina", "name": "Viliam Durina"}}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/f27cf95e03279c84fc25f113b2550fa8368f9a82", "committedDate": "2020-09-03T08:02:43Z", "message": "Add @since tag"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "99772271222b39259e306d084d88d1b7d6aab262", "author": {"user": {"login": "viliam-durina", "name": "Viliam Durina"}}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/99772271222b39259e306d084d88d1b7d6aab262", "committedDate": "2020-09-03T12:13:42Z", "message": "Fix test failures"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d065d36be562dc4b8f453cf94fa716fefa662182", "author": {"user": {"login": "viliam-durina", "name": "Viliam Durina"}}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/d065d36be562dc4b8f453cf94fa716fefa662182", "committedDate": "2020-09-03T12:46:31Z", "message": "Add documentation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgxODE1MDYy", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2485#pullrequestreview-481815062", "createdAt": "2020-09-03T13:02:41Z", "commit": {"oid": "d065d36be562dc4b8f453cf94fa716fefa662182"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QxMzowMjo0MVrOHMlizA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QxMzowMzo0MFrOHMllEg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mjk2MDA3Ng==", "bodyText": "missing a .. Should we also say, instead of event-time semantics, system-time semantics will be used?", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2485#discussion_r482960076", "createdAt": "2020-09-03T13:02:41Z", "author": {"login": "cangencer"}, "path": "site/docs/api/pipeline.md", "diffHunk": "@@ -53,6 +53,10 @@ a `SourceStreamStage` which offers just these methods:\n   provides a function to the source that determines the timestamp of\n   each event.\n \n+- `withIngestionTimestamps()`\n+  declares that the source will assign the time of ingestion as the\n+  event timestamp", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d065d36be562dc4b8f453cf94fa716fefa662182"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mjk2MDY1OA==", "bodyText": "\"If the timestamp is extracted from the event and there are no more event\" sounds a bit confusing since it sounds like it's referring to this method. I think it would be better to link to the other methods, i.e. if nativeTimestamps or withTimestamps method is used..", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2485#discussion_r482960658", "createdAt": "2020-09-03T13:03:40Z", "author": {"login": "cangencer"}, "path": "hazelcast-jet-core/src/main/java/com/hazelcast/jet/pipeline/StreamSourceStage.java", "diffHunk": "@@ -49,6 +49,11 @@\n      * it observes an event from the data source and assign it as the event\n      * timestamp.\n      * <p>\n+     * With this mode the event time advances even in the absence of events. If\n+     * the timestamp is extracted from the event and there are no more events,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d065d36be562dc4b8f453cf94fa716fefa662182"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5f9150a53a2a3551181cc9f03b158015957b14da", "author": {"user": {"login": "viliam-durina", "name": "Viliam Durina"}}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/5f9150a53a2a3551181cc9f03b158015957b14da", "committedDate": "2020-09-04T06:45:11Z", "message": "Improve documentation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "951011f6131a3c333f6cae08bca5ec28a989dfd5", "author": {"user": {"login": "viliam-durina", "name": "Viliam Durina"}}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/951011f6131a3c333f6cae08bca5ec28a989dfd5", "committedDate": "2020-09-04T11:45:42Z", "message": "Fix WM should not exceed the last reported event timestamp"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a4000d9d9fd516c8e8d18f952b2e1343748208b1", "author": {"user": {"login": "viliam-durina", "name": "Viliam Durina"}}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/a4000d9d9fd516c8e8d18f952b2e1343748208b1", "committedDate": "2020-09-04T12:00:09Z", "message": "Fix projection to null in StreamJmsP"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "77c8cf793616cf2eb79d3f22b0a03535668ee7f4", "author": {"user": {"login": "viliam-durina", "name": "Viliam Durina"}}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/77c8cf793616cf2eb79d3f22b0a03535668ee7f4", "committedDate": "2020-09-04T12:28:06Z", "message": "Merge branch 'master' into real-time-wms"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgyNjI2OTk0", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2485#pullrequestreview-482626994", "createdAt": "2020-09-04T12:55:02Z", "commit": {"oid": "77c8cf793616cf2eb79d3f22b0a03535668ee7f4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6a910fcde4aa257458c48266bcfcf5c3d1443ae0", "author": {"user": {"login": "mtopolnik", "name": "Marko Topolnik"}}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/6a910fcde4aa257458c48266bcfcf5c3d1443ae0", "committedDate": "2020-09-07T08:06:01Z", "message": "Touch up Javadoc"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgzMzgyNTQw", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2485#pullrequestreview-483382540", "createdAt": "2020-09-07T09:02:33Z", "commit": {"oid": "77c8cf793616cf2eb79d3f22b0a03535668ee7f4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bb5291623d6121f95cd1e2092aeeb651d1e9b17d", "author": {"user": {"login": "mtopolnik", "name": "Marko Topolnik"}}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/bb5291623d6121f95cd1e2092aeeb651d1e9b17d", "committedDate": "2020-09-07T09:23:52Z", "message": "Touch up comment in EventTimeMapper"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3592, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}