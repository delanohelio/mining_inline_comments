{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA2MTAwODc4", "number": 2610, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQxMDo1NjowOVrOEzPpBQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMVQxNToyNjoyNVrOFH1NWw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIyMTY5MDkzOnYy", "diffSide": "RIGHT", "path": "hazelcast-jet-core/src/main/java/com/hazelcast/jet/Jet.java", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQxMDo1NjowOVrOHqWcqA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQxNzowNjozNVrOH0Ikog==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDE3MDAyNA==", "bodyText": "We have com.hazelcast.jet.core.JetProperties that declares and documents all the user-configurable properties Jet recognizes.\nThe user can configure a property both as a system property and in the configuration file, this would be an exception. We could either make the check in a place where the properties are accessible, or failing that, document that this only works as a system property.\nAlso, please adjust the name to comply with the convention, and semantics so that the default value of false does the right thing: jet.imdg.version.mismatch.check.disabled.", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2610#discussion_r514170024", "createdAt": "2020-10-29T10:56:09Z", "author": {"login": "mtopolnik"}, "path": "hazelcast-jet-core/src/main/java/com/hazelcast/jet/Jet.java", "diffHunk": "@@ -258,11 +259,18 @@ private static void assertHazelcastVersion() {\n             Properties p = new Properties();\n             p.load(resource);\n             String jetHzVersion = p.getProperty(\"jet.hazelcast.version\");\n+\n             if (!hzVersion.equals(jetHzVersion)) {\n-                throw new JetException(\"Jet uses Hazelcast IMDG version \" + jetHzVersion + \" however \" +\n+                String message = \"Jet uses Hazelcast IMDG version \" + jetHzVersion + \" however \" +\n                         \"version \" + hzVersion + \" was found in the classpath. \" +\n                         \" As Jet already shades Hazelcast jars there is no need to explicitly \" +\n-                        \"add a dependency to it.\");\n+                        \"add a dependency to it.\";\n+                boolean errorOnMismatch = parseBoolean(System.getProperty(\"jet.hazelcast.errorOnMismatch\", \"true\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0efc024f2b2022b6cbddaeddafeb340e49224660"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDE4ODg1OA==", "bodyText": "Thanks, I didn't know about it. Will submit changes shortly", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2610#discussion_r514188858", "createdAt": "2020-10-29T11:30:55Z", "author": {"login": "TomaszGaweda"}, "path": "hazelcast-jet-core/src/main/java/com/hazelcast/jet/Jet.java", "diffHunk": "@@ -258,11 +259,18 @@ private static void assertHazelcastVersion() {\n             Properties p = new Properties();\n             p.load(resource);\n             String jetHzVersion = p.getProperty(\"jet.hazelcast.version\");\n+\n             if (!hzVersion.equals(jetHzVersion)) {\n-                throw new JetException(\"Jet uses Hazelcast IMDG version \" + jetHzVersion + \" however \" +\n+                String message = \"Jet uses Hazelcast IMDG version \" + jetHzVersion + \" however \" +\n                         \"version \" + hzVersion + \" was found in the classpath. \" +\n                         \" As Jet already shades Hazelcast jars there is no need to explicitly \" +\n-                        \"add a dependency to it.\");\n+                        \"add a dependency to it.\";\n+                boolean errorOnMismatch = parseBoolean(System.getProperty(\"jet.hazelcast.errorOnMismatch\", \"true\"));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDE3MDAyNA=="}, "originalCommit": {"oid": "0efc024f2b2022b6cbddaeddafeb340e49224660"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDIyMjczMQ==", "bodyText": "We discussed this some more, we already have a precedent for a property that only works as a sysprop: hazelcast.logging.type, and the reasons are similar -- it's read at class init time. So I think we're good if we just make a note on this in the docs.", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2610#discussion_r514222731", "createdAt": "2020-10-29T12:33:46Z", "author": {"login": "mtopolnik"}, "path": "hazelcast-jet-core/src/main/java/com/hazelcast/jet/Jet.java", "diffHunk": "@@ -258,11 +259,18 @@ private static void assertHazelcastVersion() {\n             Properties p = new Properties();\n             p.load(resource);\n             String jetHzVersion = p.getProperty(\"jet.hazelcast.version\");\n+\n             if (!hzVersion.equals(jetHzVersion)) {\n-                throw new JetException(\"Jet uses Hazelcast IMDG version \" + jetHzVersion + \" however \" +\n+                String message = \"Jet uses Hazelcast IMDG version \" + jetHzVersion + \" however \" +\n                         \"version \" + hzVersion + \" was found in the classpath. \" +\n                         \" As Jet already shades Hazelcast jars there is no need to explicitly \" +\n-                        \"add a dependency to it.\");\n+                        \"add a dependency to it.\";\n+                boolean errorOnMismatch = parseBoolean(System.getProperty(\"jet.hazelcast.errorOnMismatch\", \"true\"));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDE3MDAyNA=="}, "originalCommit": {"oid": "0efc024f2b2022b6cbddaeddafeb340e49224660"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDQyODQ1MA==", "bodyText": "I've changed the name and moved property to JetProperties. What kind of docs you were thinking about?", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2610#discussion_r524428450", "createdAt": "2020-11-16T17:06:35Z", "author": {"login": "TomaszGaweda"}, "path": "hazelcast-jet-core/src/main/java/com/hazelcast/jet/Jet.java", "diffHunk": "@@ -258,11 +259,18 @@ private static void assertHazelcastVersion() {\n             Properties p = new Properties();\n             p.load(resource);\n             String jetHzVersion = p.getProperty(\"jet.hazelcast.version\");\n+\n             if (!hzVersion.equals(jetHzVersion)) {\n-                throw new JetException(\"Jet uses Hazelcast IMDG version \" + jetHzVersion + \" however \" +\n+                String message = \"Jet uses Hazelcast IMDG version \" + jetHzVersion + \" however \" +\n                         \"version \" + hzVersion + \" was found in the classpath. \" +\n                         \" As Jet already shades Hazelcast jars there is no need to explicitly \" +\n-                        \"add a dependency to it.\");\n+                        \"add a dependency to it.\";\n+                boolean errorOnMismatch = parseBoolean(System.getProperty(\"jet.hazelcast.errorOnMismatch\", \"true\"));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDE3MDAyNA=="}, "originalCommit": {"oid": "0efc024f2b2022b6cbddaeddafeb340e49224660"}, "originalPosition": 20}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQzNzU2MTIzOnYy", "diffSide": "RIGHT", "path": "hazelcast-jet-core/src/main/java/com/hazelcast/jet/core/JetProperties.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMVQxNToyNjoyNVrOIJcE8g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMVQxNToyNjoyNVrOIJcE8g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Njc2ODExNA==", "bodyText": "Please wrap this text (72 chars starting from the 1st text char), otherwise we can merge it.", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2610#discussion_r546768114", "createdAt": "2020-12-21T15:26:25Z", "author": {"login": "mtopolnik"}, "path": "hazelcast-jet-core/src/main/java/com/hazelcast/jet/core/JetProperties.java", "diffHunk": "@@ -88,6 +88,16 @@\n     public static final HazelcastProperty JET_HOME\n             = new HazelcastProperty(\"jet.home\", \"\");\n \n+    /**\n+     * If {@code false}, Jet will check during initialization that IMDG module has compatible version.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f1da7ef3e9be81234fb3ce1fefd025f0e4b54eaa"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4424, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}