{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ1MjM2NDU2", "number": 2390, "title": "[005] Make Debezium sequences public", "bodyText": "We are using sequence numbers from Debezium to fix reordering of CDC events anyways, so why not make them part of the API.\nChecklist\n\n Tags Set\n Milestone Set", "createdAt": "2020-07-07T08:09:46Z", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2390", "merged": true, "mergeCommit": {"oid": "7549a02b7351d201e0f364f865127ca7c2ba16de"}, "closed": true, "closedAt": "2020-07-28T07:21:39Z", "author": {"login": "jbartok"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcyhIvzgH2gAyNDQ1MjM2NDU2OjNiNTYxYThhZTMwNWUxMTJlZTQwYTMyNWZiYzcxZjE4MjY2ZjBmODc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc5D0bogFqTQ1NTkwODQ0Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "3b561a8ae305e112ee40a325fbc71f18266f0f87", "author": {"user": null}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/3b561a8ae305e112ee40a325fbc71f18266f0f87", "committedDate": "2020-07-07T07:58:43Z", "message": "Make Debezium sequences public"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "06084f7b1fde22518215fccfe922ed5811a17ad6", "author": {"user": null}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/06084f7b1fde22518215fccfe922ed5811a17ad6", "committedDate": "2020-07-07T08:09:18Z", "message": "Add @since annotations"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ4ODIxMTYw", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2390#pullrequestreview-448821160", "createdAt": "2020-07-15T10:20:12Z", "commit": {"oid": "06084f7b1fde22518215fccfe922ed5811a17ad6"}, "state": "COMMENTED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxMDoyMDoxMlrOGx3xlg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxMDoyNjo0MFrOGx3_Bw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDk0NzIyMg==", "bodyText": "why not \"insert, delete or update\" (alternatively, \"insertion, deletion or updating\")", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2390#discussion_r454947222", "createdAt": "2020-07-15T10:20:12Z", "author": {"login": "mtopolnik"}, "path": "extensions/cdc-debezium/src/main/java/com/hazelcast/jet/cdc/ChangeRecord.java", "diffHunk": "@@ -21,27 +21,34 @@\n import javax.annotation.Nonnull;\n \n /**\n- * Information pertaining to a single data change event (insertion,\n- * delete or update), affecting a single database record.\n+ * Information pertaining to a single data change event (insertion, delete or", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06084f7b1fde22518215fccfe922ed5811a17ad6"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDk0NzYyMw==", "bodyText": "same here", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2390#discussion_r454947623", "createdAt": "2020-07-15T10:20:52Z", "author": {"login": "mtopolnik"}, "path": "extensions/cdc-debezium/src/main/java/com/hazelcast/jet/cdc/ChangeRecord.java", "diffHunk": "@@ -21,27 +21,34 @@\n import javax.annotation.Nonnull;\n \n /**\n- * Information pertaining to a single data change event (insertion,\n- * delete or update), affecting a single database record.\n+ * Information pertaining to a single data change event (insertion, delete or\n+ * update), affecting a single database record.\n  * <p>\n  * Each event has a <em>key</em>, identifying the affected record, and a\n  * <em>value</em>, describing the change to that record.\n  * <p>\n- * Most events have an <em>operation</em> which specifies the type of\n- * change (insertion, delete or update). Events without an operation\n- * have specialized usage, for example heartbeats, and aren't supposed\n- * to affect the data model. You can observe and act upon them in a Jet\n- * CDC sink, but we discourage such usage.\n+ * Most events have an <em>operation</em> which specifies the type of change\n+ * (insertion, delete or update). Events without an operation have specialized", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06084f7b1fde22518215fccfe922ed5811a17ad6"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDk0ODMyMw==", "bodyText": "source-specific", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2390#discussion_r454948323", "createdAt": "2020-07-15T10:22:11Z", "author": {"login": "mtopolnik"}, "path": "extensions/cdc-debezium/src/main/java/com/hazelcast/jet/cdc/ChangeRecord.java", "diffHunk": "@@ -21,27 +21,34 @@\n import javax.annotation.Nonnull;\n \n /**\n- * Information pertaining to a single data change event (insertion,\n- * delete or update), affecting a single database record.\n+ * Information pertaining to a single data change event (insertion, delete or\n+ * update), affecting a single database record.\n  * <p>\n  * Each event has a <em>key</em>, identifying the affected record, and a\n  * <em>value</em>, describing the change to that record.\n  * <p>\n- * Most events have an <em>operation</em> which specifies the type of\n- * change (insertion, delete or update). Events without an operation\n- * have specialized usage, for example heartbeats, and aren't supposed\n- * to affect the data model. You can observe and act upon them in a Jet\n- * CDC sink, but we discourage such usage.\n+ * Most events have an <em>operation</em> which specifies the type of change\n+ * (insertion, delete or update). Events without an operation have specialized\n+ * usage, for example heartbeats, and aren't supposed to affect the data model.\n+ * You can observe and act upon them in a Jet CDC sink, but we discourage such\n+ * usage.\n  * <p>\n- * All events have a <em>timestamp</em> specifying the moment when the\n- * change event occurred in the database. Normally this is the timestamp\n- * recorded in the database's change log, but since it has a finite size,\n- * the change stream begins with virtual events that reproduce the state of\n- * the table at the start of the change log. These events have an\n- * artificial timestamp. In principle, it should be easy to identify them\n- * because they have a separate {@code SYNC} operation instead of {@code\n- * INSERT}, however some databases emit {@code INSERT} events in both\n- * cases (a notable example is MySQL).\n+ * All events have a <em>timestamp</em> specifying the moment when the change\n+ * event occurred in the database. Normally this is the timestamp recorded in\n+ * the database's change log, but since it has a finite size, the change stream\n+ * begins with virtual events that reproduce the state of the table at the start\n+ * of the change log. These events have an artificial timestamp. In principle,\n+ * it should be easy to identify them because they have a separate {@code SYNC}\n+ * operation instead of {@code INSERT}, however some databases emit {@code INSERT}\n+ * events in both cases (a notable example is MySQL).\n+ * <p>\n+ * All events have a source specific <em>sequence</em> which can be used to", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06084f7b1fde22518215fccfe922ed5811a17ad6"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDk0OTA4Mg==", "bodyText": "... doesn't change, the values ...", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2390#discussion_r454949082", "createdAt": "2020-07-15T10:23:34Z", "author": {"login": "mtopolnik"}, "path": "extensions/cdc-debezium/src/main/java/com/hazelcast/jet/cdc/ChangeRecord.java", "diffHunk": "@@ -63,6 +70,25 @@\n      */\n     long timestamp() throws ParsingException;\n \n+    /**\n+     * Specifies the numeric value part of the record's source sequence. As long\n+     * as the source sequence doesn't change the values will be monotonically", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06084f7b1fde22518215fccfe922ed5811a17ad6"}, "originalPosition": 57}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDk1MDI0OQ==", "bodyText": "... and so can ...", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2390#discussion_r454950249", "createdAt": "2020-07-15T10:25:47Z", "author": {"login": "mtopolnik"}, "path": "site/docs/tutorials/cdc-join.md", "diffHunk": "@@ -420,9 +420,10 @@ public class OrdersOfCustomer implements Serializable {\n \n There is also another element in the pipeline, an extra processing stage\n which handles and fixes event reordering that might happen due to\n-parallel processing. It's based on non-public classes because future\n-versions of Jet (4.3 most likely) will contain generic solutions for\n-the reordering problem and then this code will no longer be necessary:\n+parallel processing. It's based on sequence numbers specific to CDC\n+sources so can be used only for these kinds of pipelines. Hopefully", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06084f7b1fde22518215fccfe922ed5811a17ad6"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDk1MDY2Mw==", "bodyText": "... a future version of Jet will introduce a generic solution ...", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2390#discussion_r454950663", "createdAt": "2020-07-15T10:26:40Z", "author": {"login": "mtopolnik"}, "path": "site/docs/tutorials/cdc-join.md", "diffHunk": "@@ -420,9 +420,10 @@ public class OrdersOfCustomer implements Serializable {\n \n There is also another element in the pipeline, an extra processing stage\n which handles and fixes event reordering that might happen due to\n-parallel processing. It's based on non-public classes because future\n-versions of Jet (4.3 most likely) will contain generic solutions for\n-the reordering problem and then this code will no longer be necessary:\n+parallel processing. It's based on sequence numbers specific to CDC\n+sources so can be used only for these kinds of pipelines. Hopefully\n+future versions of Jet will contain generic solutions for the reoreding", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06084f7b1fde22518215fccfe922ed5811a17ad6"}, "originalPosition": 9}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dff6b3f97553d1a2aa674e4fa3e3e6817dbcd0aa", "author": {"user": null}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/dff6b3f97553d1a2aa674e4fa3e3e6817dbcd0aa", "committedDate": "2020-07-15T10:57:51Z", "message": "Address review concerns"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1OTA4NDQ3", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2390#pullrequestreview-455908447", "createdAt": "2020-07-27T15:46:46Z", "commit": {"oid": "dff6b3f97553d1a2aa674e4fa3e3e6817dbcd0aa"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3722, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}