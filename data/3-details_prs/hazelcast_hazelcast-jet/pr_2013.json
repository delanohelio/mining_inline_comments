{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgwMTIzMDU4", "number": 2013, "title": "Unify various trade sources, extract in separate module", "bodyText": "We want the Trade Generator source to be clearly defined, unique and published on Maven so that we can use in tutorials as a realistic stream source.\nChecklist\n\n Tags Set\n Milestone Set", "createdAt": "2020-02-26T09:59:54Z", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2013", "merged": true, "mergeCommit": {"oid": "6604b12fb75bd37a336ae1361a59ae45d911977d"}, "closed": true, "closedAt": "2020-03-02T07:43:54Z", "author": {"login": "jbartok"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcHv1nPgH2gAyMzgwMTIzMDU4OmU5ZDBiNWY4NmE1MWE0NzlmMWRmZWU0ZmU2MzI0MThkZDQ4YzM0OTI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcIaF5dgFqTM2NTYyNTEyOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e9d0b5f86a51a479f1dfee4fe632418dd48c3492", "author": {"user": null}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/e9d0b5f86a51a479f1dfee4fe632418dd48c3492", "committedDate": "2020-02-25T10:47:39Z", "message": "Unify various trade sources, extract in separate module"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bb3c3fe0d430c5d44e01fceda19af6e54c215a4a", "author": {"user": null}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/bb3c3fe0d430c5d44e01fceda19af6e54c215a4a", "committedDate": "2020-02-26T10:05:14Z", "message": "Fix minor issue"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c6dce0165ee8183739751557ea225368f8710a82", "author": {"user": null}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/c6dce0165ee8183739751557ea225368f8710a82", "committedDate": "2020-02-26T11:46:42Z", "message": "Fix checkstyle problems"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY1NTk2ODUy", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2013#pullrequestreview-365596852", "createdAt": "2020-02-27T11:11:25Z", "commit": {"oid": "c6dce0165ee8183739751557ea225368f8710a82"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QxMToxMToyNVrOFvOQeg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QxMToxMjo0OVrOFvOTPA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTA2MDk4Ng==", "bodyText": "Is the change in the logic intended ?", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2013#discussion_r385060986", "createdAt": "2020-02-27T11:11:25Z", "author": {"login": "eminn"}, "path": "examples/early-window-results/src/main/java/com/hazelcast/jet/examples/earlyresults/TradingVolumeOverTime.java", "diffHunk": "@@ -53,17 +53,18 @@\n \n     private static final String VOLUME_LIST_NAME = \"trading-volume\";\n     private static final int TRADES_PER_SEC = 3_000;\n+    private static final int MAX_LAG = 5000;\n     private static final int DURATION_SECONDS = 60;\n \n     private static Pipeline buildPipeline() {\n         Pipeline p = Pipeline.create();\n-        p.readFrom(TradeGenerator.tradeSource(TRADES_PER_SEC, DURATION_SECONDS))\n-         .withNativeTimestamps(TradeGenerator.MAX_LAG)\n+        p.readFrom(TradeGenerator.tradeSource(1, TRADES_PER_SEC, MAX_LAG, DURATION_SECONDS))\n+         .withNativeTimestamps(MAX_LAG)\n          .window(tumbling(SECONDS.toMillis(2))\n                  // comment out this line to see how the chart behaves without early results:\n                  .setEarlyResultsPeriod(20)\n          )\n-         .aggregate(summingLong(trade -> trade.getQuantity() * trade.getPrice()))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c6dce0165ee8183739751557ea225368f8710a82"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTA2MTY5Mg==", "bodyText": "same here ?", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2013#discussion_r385061692", "createdAt": "2020-02-27T11:12:49Z", "author": {"login": "eminn"}, "path": "examples/rolling-aggregation/src/main/java/com/hazelcast/jet/examples/rollingaggregation/TradingVolume.java", "diffHunk": "@@ -18,34 +18,36 @@\n \n import com.hazelcast.jet.Jet;\n import com.hazelcast.jet.JetInstance;\n+import com.hazelcast.jet.examples.tradesource.Trade;\n import com.hazelcast.jet.pipeline.Pipeline;\n import com.hazelcast.jet.pipeline.Sinks;\n \n import static com.hazelcast.jet.aggregate.AggregateOperations.summingLong;\n-import static com.hazelcast.jet.examples.rollingaggregation.TradeGenerator.tradeSource;\n+import static com.hazelcast.jet.examples.tradesource.TradeGenerator.tradeSource;\n \n /**\n  * Showcases the Rolling Aggregation operator of the Pipeline API.\n  * <p>\n  * The sample Jet pipeline uses a mock data source that generates random\n  * trade events. It calculates for each stock the rolling sum of the amount\n- * of money that changed hands trading it (i.e., the current traded volume\n+ * of stock that changed hands trading it (i.e., the current traded volume\n  * on that stock). The sample also starts a GUI window that visualizes the\n  * rising traded volume of all stocks.\n  */\n public class TradingVolume {\n \n     private static final String VOLUME_MAP_NAME = \"volume-by-stock\";\n     private static final int TRADES_PER_SEC = 3_000;\n+    private static final int MAX_LAG = 1000;\n     private static final int NUMBER_OF_TICKERS = 20;\n     private static final int DURATION_SECONDS = 60;\n \n     private static Pipeline buildPipeline() {\n         Pipeline p = Pipeline.create();\n-        p.readFrom(tradeSource(NUMBER_OF_TICKERS, TRADES_PER_SEC, DURATION_SECONDS))\n+        p.readFrom(tradeSource(NUMBER_OF_TICKERS, TRADES_PER_SEC, MAX_LAG, DURATION_SECONDS))\n          .withoutTimestamps()\n          .groupingKey(Trade::getTicker)\n-         .rollingAggregate(summingLong(Trade::getPrice))\n+         .rollingAggregate(summingLong(Trade::getQuantity))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c6dce0165ee8183739751557ea225368f8710a82"}, "originalPosition": 37}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY1NjI1MTI5", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2013#pullrequestreview-365625129", "createdAt": "2020-02-27T12:01:27Z", "commit": {"oid": "c6dce0165ee8183739751557ea225368f8710a82"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2875, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}