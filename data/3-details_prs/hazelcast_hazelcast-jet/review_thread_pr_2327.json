{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM0MzE0NTYy", "number": 2327, "reviewThreads": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQwNjoxOTowM1rOEFZv6A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxMDoxMTo0OVrOEFeZ0A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0MTAwMjAwOnYy", "diffSide": "RIGHT", "path": "extensions/cdc-mysql/src/test/java/com/hazelcast/jet/cdc/mysql/AbstractMySqlIntegrationTest.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQwNjoxOTowM1rOGjkfvA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQwNzoyMDozMlrOGjl95A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTk1MTI5Mg==", "bodyText": "If you introduce such a parent test class, then would be nice to modify the already existing integration test to use it too.", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2327#discussion_r439951292", "createdAt": "2020-06-15T06:19:03Z", "author": {"login": "jbartok"}, "path": "extensions/cdc-mysql/src/test/java/com/hazelcast/jet/cdc/mysql/AbstractMySqlIntegrationTest.java", "diffHunk": "@@ -0,0 +1,135 @@\n+/*\n+ * Copyright (c) 2008-2020, Hazelcast, Inc. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.hazelcast.jet.cdc.mysql;\n+\n+import com.fasterxml.jackson.annotation.JsonProperty;\n+import com.hazelcast.jet.accumulator.LongAccumulator;\n+import com.hazelcast.jet.cdc.AbstractIntegrationTest;\n+import com.hazelcast.jet.cdc.ChangeRecord;\n+import com.hazelcast.jet.cdc.Operation;\n+import com.hazelcast.jet.cdc.RecordPart;\n+import com.hazelcast.jet.pipeline.Pipeline;\n+import com.hazelcast.jet.pipeline.Sinks;\n+import com.hazelcast.jet.pipeline.StreamSource;\n+import java.sql.Connection;\n+import java.sql.DriverManager;\n+import java.sql.SQLException;\n+import java.util.Objects;\n+import org.junit.Rule;\n+import org.testcontainers.containers.MySQLContainer;\n+\n+import static com.hazelcast.jet.Util.entry;\n+import static org.testcontainers.containers.MySQLContainer.MYSQL_PORT;\n+\n+public class AbstractMySqlIntegrationTest extends AbstractIntegrationTest {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fc2294fd00f0c753168cead79d17d9696d32cdd0"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTk3NTM5Ng==", "bodyText": "Make sense, I'll update it.", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2327#discussion_r439975396", "createdAt": "2020-06-15T07:20:32Z", "author": {"login": "olukas"}, "path": "extensions/cdc-mysql/src/test/java/com/hazelcast/jet/cdc/mysql/AbstractMySqlIntegrationTest.java", "diffHunk": "@@ -0,0 +1,135 @@\n+/*\n+ * Copyright (c) 2008-2020, Hazelcast, Inc. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.hazelcast.jet.cdc.mysql;\n+\n+import com.fasterxml.jackson.annotation.JsonProperty;\n+import com.hazelcast.jet.accumulator.LongAccumulator;\n+import com.hazelcast.jet.cdc.AbstractIntegrationTest;\n+import com.hazelcast.jet.cdc.ChangeRecord;\n+import com.hazelcast.jet.cdc.Operation;\n+import com.hazelcast.jet.cdc.RecordPart;\n+import com.hazelcast.jet.pipeline.Pipeline;\n+import com.hazelcast.jet.pipeline.Sinks;\n+import com.hazelcast.jet.pipeline.StreamSource;\n+import java.sql.Connection;\n+import java.sql.DriverManager;\n+import java.sql.SQLException;\n+import java.util.Objects;\n+import org.junit.Rule;\n+import org.testcontainers.containers.MySQLContainer;\n+\n+import static com.hazelcast.jet.Util.entry;\n+import static org.testcontainers.containers.MySQLContainer.MYSQL_PORT;\n+\n+public class AbstractMySqlIntegrationTest extends AbstractIntegrationTest {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTk1MTI5Mg=="}, "originalCommit": {"oid": "fc2294fd00f0c753168cead79d17d9696d32cdd0"}, "originalPosition": 38}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0MTAwNTk2OnYy", "diffSide": "RIGHT", "path": "extensions/cdc-mysql/src/test/java/com/hazelcast/jet/cdc/mysql/AbstractMySqlIntegrationTest.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQwNjoyMDo0MFrOGjkh4g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQwNzoyMToyMlrOGjl_hA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTk1MTg0Mg==", "bodyText": "Maybe use database whitelisting (source configuration option) instead of filtering in the pipeline (unless that's what you want to test).", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2327#discussion_r439951842", "createdAt": "2020-06-15T06:20:40Z", "author": {"login": "jbartok"}, "path": "extensions/cdc-mysql/src/test/java/com/hazelcast/jet/cdc/mysql/AbstractMySqlIntegrationTest.java", "diffHunk": "@@ -0,0 +1,135 @@\n+/*\n+ * Copyright (c) 2008-2020, Hazelcast, Inc. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.hazelcast.jet.cdc.mysql;\n+\n+import com.fasterxml.jackson.annotation.JsonProperty;\n+import com.hazelcast.jet.accumulator.LongAccumulator;\n+import com.hazelcast.jet.cdc.AbstractIntegrationTest;\n+import com.hazelcast.jet.cdc.ChangeRecord;\n+import com.hazelcast.jet.cdc.Operation;\n+import com.hazelcast.jet.cdc.RecordPart;\n+import com.hazelcast.jet.pipeline.Pipeline;\n+import com.hazelcast.jet.pipeline.Sinks;\n+import com.hazelcast.jet.pipeline.StreamSource;\n+import java.sql.Connection;\n+import java.sql.DriverManager;\n+import java.sql.SQLException;\n+import java.util.Objects;\n+import org.junit.Rule;\n+import org.testcontainers.containers.MySQLContainer;\n+\n+import static com.hazelcast.jet.Util.entry;\n+import static org.testcontainers.containers.MySQLContainer.MYSQL_PORT;\n+\n+public class AbstractMySqlIntegrationTest extends AbstractIntegrationTest {\n+\n+    protected static final String DATABASE = \"testDb\";\n+    protected static final String SINK_MAP_NAME = \"resultsMap\";\n+\n+    @Rule\n+    public MySQLContainer<?> mysql = new MySQLContainer<>(\"debezium/example-mysql:1.2\")\n+            .withUsername(\"mysqluser\")\n+            .withPassword(\"mysqlpw\");\n+\n+    protected MySqlCdcSources.Builder initialSourceBuilder() {\n+        return MySqlCdcSources.mysql(\"cdcMysql\")\n+                .setDatabaseAddress(mysql.getContainerIpAddress())\n+                .setDatabasePort(mysql.getMappedPort(MYSQL_PORT))\n+                .setDatabaseUser(\"debezium\")\n+                .setDatabasePassword(\"dbz\")\n+                .setClusterName(\"dbserver1\");\n+    }\n+\n+    protected Pipeline preparePipeline(StreamSource<ChangeRecord> source) {\n+        Pipeline pipeline = Pipeline.create();\n+        pipeline.readFrom(source)\n+                .withNativeTimestamps(0)\n+                .filter(t -> t.database().startsWith(DATABASE))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fc2294fd00f0c753168cead79d17d9696d32cdd0"}, "originalPosition": 61}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTk3NTgxMg==", "bodyText": "Ok, I will use this pipeline only for tests for whitelist and blacklist and for other tests i will use whitelisting.", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2327#discussion_r439975812", "createdAt": "2020-06-15T07:21:22Z", "author": {"login": "olukas"}, "path": "extensions/cdc-mysql/src/test/java/com/hazelcast/jet/cdc/mysql/AbstractMySqlIntegrationTest.java", "diffHunk": "@@ -0,0 +1,135 @@\n+/*\n+ * Copyright (c) 2008-2020, Hazelcast, Inc. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.hazelcast.jet.cdc.mysql;\n+\n+import com.fasterxml.jackson.annotation.JsonProperty;\n+import com.hazelcast.jet.accumulator.LongAccumulator;\n+import com.hazelcast.jet.cdc.AbstractIntegrationTest;\n+import com.hazelcast.jet.cdc.ChangeRecord;\n+import com.hazelcast.jet.cdc.Operation;\n+import com.hazelcast.jet.cdc.RecordPart;\n+import com.hazelcast.jet.pipeline.Pipeline;\n+import com.hazelcast.jet.pipeline.Sinks;\n+import com.hazelcast.jet.pipeline.StreamSource;\n+import java.sql.Connection;\n+import java.sql.DriverManager;\n+import java.sql.SQLException;\n+import java.util.Objects;\n+import org.junit.Rule;\n+import org.testcontainers.containers.MySQLContainer;\n+\n+import static com.hazelcast.jet.Util.entry;\n+import static org.testcontainers.containers.MySQLContainer.MYSQL_PORT;\n+\n+public class AbstractMySqlIntegrationTest extends AbstractIntegrationTest {\n+\n+    protected static final String DATABASE = \"testDb\";\n+    protected static final String SINK_MAP_NAME = \"resultsMap\";\n+\n+    @Rule\n+    public MySQLContainer<?> mysql = new MySQLContainer<>(\"debezium/example-mysql:1.2\")\n+            .withUsername(\"mysqluser\")\n+            .withPassword(\"mysqlpw\");\n+\n+    protected MySqlCdcSources.Builder initialSourceBuilder() {\n+        return MySqlCdcSources.mysql(\"cdcMysql\")\n+                .setDatabaseAddress(mysql.getContainerIpAddress())\n+                .setDatabasePort(mysql.getMappedPort(MYSQL_PORT))\n+                .setDatabaseUser(\"debezium\")\n+                .setDatabasePassword(\"dbz\")\n+                .setClusterName(\"dbserver1\");\n+    }\n+\n+    protected Pipeline preparePipeline(StreamSource<ChangeRecord> source) {\n+        Pipeline pipeline = Pipeline.create();\n+        pipeline.readFrom(source)\n+                .withNativeTimestamps(0)\n+                .filter(t -> t.database().startsWith(DATABASE))", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTk1MTg0Mg=="}, "originalCommit": {"oid": "fc2294fd00f0c753168cead79d17d9696d32cdd0"}, "originalPosition": 61}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0MTAwNzI0OnYy", "diffSide": "RIGHT", "path": "extensions/cdc-mysql/src/test/java/com/hazelcast/jet/cdc/mysql/AbstractMySqlIntegrationTest.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQwNjoyMToxNlrOGjkilg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQwOTozNDoyOFrOGjqikw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTk1MjAyMg==", "bodyText": "No need to set local parallelism, the source by default has a single instance.", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2327#discussion_r439952022", "createdAt": "2020-06-15T06:21:16Z", "author": {"login": "jbartok"}, "path": "extensions/cdc-mysql/src/test/java/com/hazelcast/jet/cdc/mysql/AbstractMySqlIntegrationTest.java", "diffHunk": "@@ -0,0 +1,135 @@\n+/*\n+ * Copyright (c) 2008-2020, Hazelcast, Inc. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.hazelcast.jet.cdc.mysql;\n+\n+import com.fasterxml.jackson.annotation.JsonProperty;\n+import com.hazelcast.jet.accumulator.LongAccumulator;\n+import com.hazelcast.jet.cdc.AbstractIntegrationTest;\n+import com.hazelcast.jet.cdc.ChangeRecord;\n+import com.hazelcast.jet.cdc.Operation;\n+import com.hazelcast.jet.cdc.RecordPart;\n+import com.hazelcast.jet.pipeline.Pipeline;\n+import com.hazelcast.jet.pipeline.Sinks;\n+import com.hazelcast.jet.pipeline.StreamSource;\n+import java.sql.Connection;\n+import java.sql.DriverManager;\n+import java.sql.SQLException;\n+import java.util.Objects;\n+import org.junit.Rule;\n+import org.testcontainers.containers.MySQLContainer;\n+\n+import static com.hazelcast.jet.Util.entry;\n+import static org.testcontainers.containers.MySQLContainer.MYSQL_PORT;\n+\n+public class AbstractMySqlIntegrationTest extends AbstractIntegrationTest {\n+\n+    protected static final String DATABASE = \"testDb\";\n+    protected static final String SINK_MAP_NAME = \"resultsMap\";\n+\n+    @Rule\n+    public MySQLContainer<?> mysql = new MySQLContainer<>(\"debezium/example-mysql:1.2\")\n+            .withUsername(\"mysqluser\")\n+            .withPassword(\"mysqlpw\");\n+\n+    protected MySqlCdcSources.Builder initialSourceBuilder() {\n+        return MySqlCdcSources.mysql(\"cdcMysql\")\n+                .setDatabaseAddress(mysql.getContainerIpAddress())\n+                .setDatabasePort(mysql.getMappedPort(MYSQL_PORT))\n+                .setDatabaseUser(\"debezium\")\n+                .setDatabasePassword(\"dbz\")\n+                .setClusterName(\"dbserver1\");\n+    }\n+\n+    protected Pipeline preparePipeline(StreamSource<ChangeRecord> source) {\n+        Pipeline pipeline = Pipeline.create();\n+        pipeline.readFrom(source)\n+                .withNativeTimestamps(0)\n+                .filter(t -> t.database().startsWith(DATABASE))\n+                .setLocalParallelism(1)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fc2294fd00f0c753168cead79d17d9696d32cdd0"}, "originalPosition": 62}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDA1MDMyMw==", "bodyText": "actually, by default local parallelism for filter is 4:\ndigraph DAG {\n\t\"cdcMysql\" [localParallelism=1];\n\t\"filter\" [localParallelism=4];\n\t\"filter_timestamps\" [localParallelism=1];\n        ...", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2327#discussion_r440050323", "createdAt": "2020-06-15T09:34:28Z", "author": {"login": "olukas"}, "path": "extensions/cdc-mysql/src/test/java/com/hazelcast/jet/cdc/mysql/AbstractMySqlIntegrationTest.java", "diffHunk": "@@ -0,0 +1,135 @@\n+/*\n+ * Copyright (c) 2008-2020, Hazelcast, Inc. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.hazelcast.jet.cdc.mysql;\n+\n+import com.fasterxml.jackson.annotation.JsonProperty;\n+import com.hazelcast.jet.accumulator.LongAccumulator;\n+import com.hazelcast.jet.cdc.AbstractIntegrationTest;\n+import com.hazelcast.jet.cdc.ChangeRecord;\n+import com.hazelcast.jet.cdc.Operation;\n+import com.hazelcast.jet.cdc.RecordPart;\n+import com.hazelcast.jet.pipeline.Pipeline;\n+import com.hazelcast.jet.pipeline.Sinks;\n+import com.hazelcast.jet.pipeline.StreamSource;\n+import java.sql.Connection;\n+import java.sql.DriverManager;\n+import java.sql.SQLException;\n+import java.util.Objects;\n+import org.junit.Rule;\n+import org.testcontainers.containers.MySQLContainer;\n+\n+import static com.hazelcast.jet.Util.entry;\n+import static org.testcontainers.containers.MySQLContainer.MYSQL_PORT;\n+\n+public class AbstractMySqlIntegrationTest extends AbstractIntegrationTest {\n+\n+    protected static final String DATABASE = \"testDb\";\n+    protected static final String SINK_MAP_NAME = \"resultsMap\";\n+\n+    @Rule\n+    public MySQLContainer<?> mysql = new MySQLContainer<>(\"debezium/example-mysql:1.2\")\n+            .withUsername(\"mysqluser\")\n+            .withPassword(\"mysqlpw\");\n+\n+    protected MySqlCdcSources.Builder initialSourceBuilder() {\n+        return MySqlCdcSources.mysql(\"cdcMysql\")\n+                .setDatabaseAddress(mysql.getContainerIpAddress())\n+                .setDatabasePort(mysql.getMappedPort(MYSQL_PORT))\n+                .setDatabaseUser(\"debezium\")\n+                .setDatabasePassword(\"dbz\")\n+                .setClusterName(\"dbserver1\");\n+    }\n+\n+    protected Pipeline preparePipeline(StreamSource<ChangeRecord> source) {\n+        Pipeline pipeline = Pipeline.create();\n+        pipeline.readFrom(source)\n+                .withNativeTimestamps(0)\n+                .filter(t -> t.database().startsWith(DATABASE))\n+                .setLocalParallelism(1)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTk1MjAyMg=="}, "originalCommit": {"oid": "fc2294fd00f0c753168cead79d17d9696d32cdd0"}, "originalPosition": 62}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0MTAzODczOnYy", "diffSide": "RIGHT", "path": "extensions/cdc-mysql/src/test/java/com/hazelcast/jet/cdc/mysql/AuthAndConnectionIntegrationTest.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQwNjozNDozOFrOGjk1NQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQwNzoyMjoyMVrOGjmBXw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTk1Njc4OQ==", "bodyText": "The tests you describe here are conceptually non-DB specific, but I'm not sure you can rely on every connector to every DB behaving the same way, so it would be safest to threat it as MySQL specific tests.", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2327#discussion_r439956789", "createdAt": "2020-06-15T06:34:38Z", "author": {"login": "jbartok"}, "path": "extensions/cdc-mysql/src/test/java/com/hazelcast/jet/cdc/mysql/AuthAndConnectionIntegrationTest.java", "diffHunk": "@@ -0,0 +1,143 @@\n+/*\n+ * Copyright (c) 2008-2020, Hazelcast, Inc. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.hazelcast.jet.cdc.mysql;\n+\n+import com.hazelcast.jet.JetInstance;\n+import com.hazelcast.jet.Job;\n+import com.hazelcast.jet.cdc.ChangeRecord;\n+import com.hazelcast.jet.core.JetTestSupport;\n+import com.hazelcast.jet.pipeline.Pipeline;\n+import com.hazelcast.jet.pipeline.Sinks;\n+import com.hazelcast.jet.pipeline.StreamSource;\n+import com.hazelcast.test.annotation.NightlyTest;\n+import java.sql.SQLException;\n+import org.junit.Rule;\n+import org.junit.Test;\n+import org.junit.experimental.categories.Category;\n+import org.testcontainers.containers.MySQLContainer;\n+\n+import static com.hazelcast.jet.core.JobStatus.FAILED;\n+import static com.hazelcast.test.HazelcastTestSupport.assertEqualsEventually;\n+import static org.assertj.core.api.Assertions.assertThatThrownBy;\n+import static org.testcontainers.containers.MySQLContainer.MYSQL_PORT;\n+\n+@Category(NightlyTest.class)\n+public class AuthAndConnectionIntegrationTest extends JetTestSupport {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fc2294fd00f0c753168cead79d17d9696d32cdd0"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTk1NjkzNA==", "bodyText": "Threat it and NAME it like MySQL specific tests.", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2327#discussion_r439956934", "createdAt": "2020-06-15T06:35:03Z", "author": {"login": "jbartok"}, "path": "extensions/cdc-mysql/src/test/java/com/hazelcast/jet/cdc/mysql/AuthAndConnectionIntegrationTest.java", "diffHunk": "@@ -0,0 +1,143 @@\n+/*\n+ * Copyright (c) 2008-2020, Hazelcast, Inc. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.hazelcast.jet.cdc.mysql;\n+\n+import com.hazelcast.jet.JetInstance;\n+import com.hazelcast.jet.Job;\n+import com.hazelcast.jet.cdc.ChangeRecord;\n+import com.hazelcast.jet.core.JetTestSupport;\n+import com.hazelcast.jet.pipeline.Pipeline;\n+import com.hazelcast.jet.pipeline.Sinks;\n+import com.hazelcast.jet.pipeline.StreamSource;\n+import com.hazelcast.test.annotation.NightlyTest;\n+import java.sql.SQLException;\n+import org.junit.Rule;\n+import org.junit.Test;\n+import org.junit.experimental.categories.Category;\n+import org.testcontainers.containers.MySQLContainer;\n+\n+import static com.hazelcast.jet.core.JobStatus.FAILED;\n+import static com.hazelcast.test.HazelcastTestSupport.assertEqualsEventually;\n+import static org.assertj.core.api.Assertions.assertThatThrownBy;\n+import static org.testcontainers.containers.MySQLContainer.MYSQL_PORT;\n+\n+@Category(NightlyTest.class)\n+public class AuthAndConnectionIntegrationTest extends JetTestSupport {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTk1Njc4OQ=="}, "originalCommit": {"oid": "fc2294fd00f0c753168cead79d17d9696d32cdd0"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTk3NjI4Nw==", "bodyText": "This test is in cdc-mysql module. Do we need to mention MySQL also in test name?", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2327#discussion_r439976287", "createdAt": "2020-06-15T07:22:21Z", "author": {"login": "olukas"}, "path": "extensions/cdc-mysql/src/test/java/com/hazelcast/jet/cdc/mysql/AuthAndConnectionIntegrationTest.java", "diffHunk": "@@ -0,0 +1,143 @@\n+/*\n+ * Copyright (c) 2008-2020, Hazelcast, Inc. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.hazelcast.jet.cdc.mysql;\n+\n+import com.hazelcast.jet.JetInstance;\n+import com.hazelcast.jet.Job;\n+import com.hazelcast.jet.cdc.ChangeRecord;\n+import com.hazelcast.jet.core.JetTestSupport;\n+import com.hazelcast.jet.pipeline.Pipeline;\n+import com.hazelcast.jet.pipeline.Sinks;\n+import com.hazelcast.jet.pipeline.StreamSource;\n+import com.hazelcast.test.annotation.NightlyTest;\n+import java.sql.SQLException;\n+import org.junit.Rule;\n+import org.junit.Test;\n+import org.junit.experimental.categories.Category;\n+import org.testcontainers.containers.MySQLContainer;\n+\n+import static com.hazelcast.jet.core.JobStatus.FAILED;\n+import static com.hazelcast.test.HazelcastTestSupport.assertEqualsEventually;\n+import static org.assertj.core.api.Assertions.assertThatThrownBy;\n+import static org.testcontainers.containers.MySQLContainer.MYSQL_PORT;\n+\n+@Category(NightlyTest.class)\n+public class AuthAndConnectionIntegrationTest extends JetTestSupport {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTk1Njc4OQ=="}, "originalCommit": {"oid": "fc2294fd00f0c753168cead79d17d9696d32cdd0"}, "originalPosition": 39}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0MTc2MjQzOnYy", "diffSide": "RIGHT", "path": "extensions/cdc-mysql/src/test/java/com/hazelcast/jet/cdc/mysql/MySqlIntegrationTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxMDoxMTowOFrOGjr0tg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxMDoxMTowOFrOGjr0tg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDA3MTM1MA==", "bodyText": "Maybe drop initial, just call it sourceBuilder?", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2327#discussion_r440071350", "createdAt": "2020-06-15T10:11:08Z", "author": {"login": "jbartok"}, "path": "extensions/cdc-mysql/src/test/java/com/hazelcast/jet/cdc/mysql/MySqlIntegrationTest.java", "diffHunk": "@@ -298,12 +289,7 @@ public void cdcMapSink() throws Exception {\n \n     @Nonnull\n     private StreamSource<ChangeRecord> source(String tableName) {\n-        return MySqlCdcSources.mysql(tableName)\n-                .setDatabaseAddress(mysql.getContainerIpAddress())\n-                .setDatabasePort(mysql.getMappedPort(MYSQL_PORT))\n-                .setDatabaseUser(\"debezium\")\n-                .setDatabasePassword(\"dbz\")\n-                .setClusterName(\"dbserver1\")\n+        return initialSourceBuilder(tableName)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63514ad18ca1d176799455ae5d877e8d3abae4be"}, "originalPosition": 44}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0MTc2NDY0OnYy", "diffSide": "RIGHT", "path": "extensions/cdc-mysql/src/test/java/com/hazelcast/jet/cdc/mysql/MySqlListenWhiteBlackListIntegrationTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxMDoxMTo0OVrOGjr2GA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxMDoxMTo0OVrOGjr2GA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDA3MTcwNA==", "bodyText": "Maybe drop prepare from the method name?", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2327#discussion_r440071704", "createdAt": "2020-06-15T10:11:49Z", "author": {"login": "jbartok"}, "path": "extensions/cdc-mysql/src/test/java/com/hazelcast/jet/cdc/mysql/MySqlListenWhiteBlackListIntegrationTest.java", "diffHunk": "@@ -314,6 +320,30 @@ private void test(StreamSource<ChangeRecord> source, List<String> expectedRecord\n         }\n     }\n \n+    private Pipeline preparePipeline(StreamSource<ChangeRecord> source) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63514ad18ca1d176799455ae5d877e8d3abae4be"}, "originalPosition": 31}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4612, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}