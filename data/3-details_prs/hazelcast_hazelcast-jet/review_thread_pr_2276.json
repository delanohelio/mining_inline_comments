{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIzOTAwMTg2", "number": 2276, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQwODozNDo1OVrOEAaaJQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQwOTo1MzoxMlrOEIsTSA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY4ODY4MTMzOnYy", "diffSide": "LEFT", "path": "hazelcast-jet-all/src/main/java/com/hazelcast/jet/server/JetCommandLine.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQwODozNDo1OVrOGbrJMA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQwODozNDo1OVrOGbrJMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTY3MTYwMA==", "bodyText": "I think we still need to keep these, as this is a breaking change. You can mark them as deprecated", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2276#discussion_r431671600", "createdAt": "2020-05-28T08:34:59Z", "author": {"login": "cangencer"}, "path": "hazelcast-jet-all/src/main/java/com/hazelcast/jet/server/JetCommandLine.java", "diffHunk": "@@ -96,30 +99,14 @@\n     @Option(names = {\"-f\", \"--config\"},\n             description = \"Optional path to a client config XML/YAML file.\" +\n                     \" The default is to use config/hazelcast-client.yaml.\" +\n-                    \" If you set this option, Jet will ignore the --addresses and --cluster-name options.\",\n+                    \" If you set this option, Jet will ignore the --targets option.\",\n             order = 0\n     )\n     private File config;\n \n-    @Option(names = {\"-a\", \"--addresses\"},\n-            split = \",\",\n-            arity = \"1..*\",\n-            paramLabel = \"<hostname>:<port>\",\n-            description = \"Optional comma-separated list of Jet node addresses in the format\" +\n-                    \" <hostname>:<port>, if you want to connect to a cluster other than the\" +\n-                    \" one configured in the configuration file\",\n-            order = 1\n-    )\n-    private List<String> addresses;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b597ff130081c2575eef788aa5875041ba01f053"}, "originalPosition": 44}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc1MTI3ODYyOnYy", "diffSide": "RIGHT", "path": "hazelcast-jet-all/src/main/java/com/hazelcast/jet/server/JetCommandLine.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxNDo0NDo0NFrOGlJMyg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxNDo0NDo0NFrOGlJMyg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTYwMTIyNg==", "bodyText": "Make cluster-name optional", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2276#discussion_r441601226", "createdAt": "2020-06-17T14:44:44Z", "author": {"login": "frant-hartm"}, "path": "hazelcast-jet-all/src/main/java/com/hazelcast/jet/server/JetCommandLine.java", "diffHunk": "@@ -555,6 +590,59 @@ void merge(Verbosity other) {\n         }\n     }\n \n+    public static class TargetsMixin {\n+\n+        @Option(names = {\"-t\", \"--targets\"},\n+                description = \"The cluster name and addresses to use if you want to connect to a \"\n+                    + \"cluster other than the one configured in the configuration file.\",\n+                paramLabel = \"<cluster-name>@<hostname>:<port>[,<hostname>:<port>]\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3d5d03a58277e2a57e3ccbdddf60360e799ca752"}, "originalPosition": 228}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc1MTI4NDg3OnYy", "diffSide": "RIGHT", "path": "hazelcast-jet-all/src/test/java/com/hazelcast/jet/server/JetCommandLineTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxNDo0NjowMlrOGlJQwQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxNDo0NjowMlrOGlJQwQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTYwMjI0MQ==", "bodyText": "Use more descriptive name. It is not immediately obvious if the option before or after command takes precedence.", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2276#discussion_r441602241", "createdAt": "2020-06-17T14:46:02Z", "author": {"login": "frant-hartm"}, "path": "hazelcast-jet-all/src/test/java/com/hazelcast/jet/server/JetCommandLineTest.java", "diffHunk": "@@ -483,6 +484,72 @@ public void test_submit_argsPassing() {\n         assertTrueEventually(() -> assertContains(captureOut(), \" with arguments [--jobOption, fooValue]\"));\n     }\n \n+    @Test\n+    public void testTargetsMixin() {\n+        String target = \"foobar@127.0.0.1:5701,127.0.0.1:5702\";\n+\n+        testTargetsCommand(\"cancel\", \"-t\", target, \"jobName\");\n+        testTargetsCommand(\"-t\", target, \"cancel\", \"jobName\");\n+\n+        testTargetsCommand(\"cluster\", \"-t\", target);\n+        testTargetsCommand(\"-t\", target, \"cluster\");\n+\n+        testTargetsCommand(\"delete-snapshot\", \"snapshotName\", \"-t\", target);\n+        testTargetsCommand(\"-t\", target, \"delete-snapshot\", \"snapshotName\");\n+\n+        testTargetsCommand(\"list-jobs\", \"-t\", target);\n+        testTargetsCommand(\"-t\", target, \"list-jobs\");\n+\n+        testTargetsCommand(\"list-snapshots\", \"-t\", target);\n+        testTargetsCommand(\"-t\", target, \"list-snapshots\");\n+\n+        testTargetsCommand(\"restart\", \"jobName\", \"-t\", target);\n+        testTargetsCommand(\"-t\", target, \"restart\", \"jobName\");\n+\n+        testTargetsCommand(\"resume\", \"jobName\", \"-t\", target);\n+        testTargetsCommand(\"-t\", target, \"resume\", \"jobName\");\n+\n+        testTargetsCommand(\"save-snapshot\", \"jobName\", \"snapshotName\", \"-t\", target);\n+        testTargetsCommand(\"-t\", target, \"save-snapshot\", \"jobName\", \"snapshotName\");\n+\n+        testTargetsCommand(\"submit\", \"-t\", target, testJobJarFile.toString());\n+        testTargetsCommand(\"-t\", target, \"submit\", testJobJarFile.toString());\n+\n+        testTargetsCommand(\"suspend\", \"jobName\", \"-t\", target);\n+        testTargetsCommand(\"-t\", target, \"suspend\", \"jobName\");\n+    }\n+\n+    @Test\n+    public void testTargetsPrecedence() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3d5d03a58277e2a57e3ccbdddf60360e799ca752"}, "originalPosition": 48}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc3NTQ5ODk2OnYy", "diffSide": "RIGHT", "path": "hazelcast-jet-all/src/main/java/com/hazelcast/jet/server/JetCommandLine.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQwOTo1MzoxMlrOGozqTg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQwOTo1MzoxMlrOGozqTg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTQ0MjYzOA==", "bodyText": "should point to the replaced command", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2276#discussion_r445442638", "createdAt": "2020-06-25T09:53:12Z", "author": {"login": "cangencer"}, "path": "hazelcast-jet-all/src/main/java/com/hazelcast/jet/server/JetCommandLine.java", "diffHunk": "@@ -105,22 +109,25 @@\n             split = \",\",\n             arity = \"1..*\",\n             paramLabel = \"<hostname>:<port>\",\n-            description = \"Optional comma-separated list of Jet node addresses in the format\" +\n+            description = \"[DEPRECATED] Optional comma-separated list of Jet node addresses in the format\" +\n                     \" <hostname>:<port>, if you want to connect to a cluster other than the\" +\n                     \" one configured in the configuration file\",\n             order = 1\n     )\n     private List<String> addresses;\n \n     @Option(names = {\"-n\", \"--cluster-name\"},\n-            description = \"The cluster name to use when connecting to the cluster \" +\n-                    \"specified by the <addresses> parameter. \",\n-            defaultValue = \"jet\",\n-            showDefaultValue = Visibility.ALWAYS,\n-            order = 2\n+        description = \"[DEPRECATED] The cluster name to use when connecting to the cluster \" +\n+            \"specified by the <addresses> parameter. \",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6882d53a0e5cff46a3881581c50339e69862a103"}, "originalPosition": 53}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4588, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}