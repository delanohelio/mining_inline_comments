{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk2NDQyMDAx", "number": 2124, "title": "Add Protocol Buffers serialization docs", "bodyText": "Added Protocol Buffers serialization docs.", "createdAt": "2020-03-31T16:15:23Z", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2124", "merged": true, "mergeCommit": {"oid": "ea33865eab23464319c4db564a124daa502962f4"}, "closed": true, "closedAt": "2020-04-02T06:59:07Z", "author": {"login": "gierlachg"}, "timelineItems": {"totalCount": 16, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcS99WGAH2gAyMzk2NDQyMDAxOjVjOTRjOGY4MmIxODVjNjA5YzA3NTRhOTYyNTkwOTJkMmY1MTExMjM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcTmqwMAFqTM4NjE0ODgwMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "5c94c8f82b185c609c0754a96259092d2f511123", "author": {"user": {"login": "gierlachg", "name": "Grzegorz Gierlach"}}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/5c94c8f82b185c609c0754a96259092d2f511123", "committedDate": "2020-03-31T07:27:56Z", "message": "Add job-level serializer & addClass/addPackage docs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "712e13ebe7ec4a8671a315b118838641366d47f4", "author": {"user": {"login": "gierlachg", "name": "Grzegorz Gierlach"}}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/712e13ebe7ec4a8671a315b118838641366d47f4", "committedDate": "2020-03-31T11:44:45Z", "message": "Improving serialization docs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d95e384aeb4ba5a05fa735259bb9938a96f03835", "author": {"user": {"login": "gierlachg", "name": "Grzegorz Gierlach"}}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/d95e384aeb4ba5a05fa735259bb9938a96f03835", "committedDate": "2020-03-31T12:34:14Z", "message": "Improving serialization docs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "056e553d804db6f46bbf6185cb9c7c127ebd34d0", "author": {"user": {"login": "gierlachg", "name": "Grzegorz Gierlach"}}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/056e553d804db6f46bbf6185cb9c7c127ebd34d0", "committedDate": "2020-03-31T12:58:45Z", "message": "Improving serialization docs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8a14a7fdd007952b9ec69eec6aed4bb3bacd5687", "author": {"user": {"login": "gierlachg", "name": "Grzegorz Gierlach"}}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/8a14a7fdd007952b9ec69eec6aed4bb3bacd5687", "committedDate": "2020-03-31T14:58:27Z", "message": "Add Protocol Buffers docs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ecccec6985a6ebe403824484316b06200ad24062", "author": {"user": {"login": "gierlachg", "name": "Grzegorz Gierlach"}}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/ecccec6985a6ebe403824484316b06200ad24062", "committedDate": "2020-03-31T16:14:18Z", "message": "Merge branch 'master' into protobuf_docs"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg1NTM2OTY4", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2124#pullrequestreview-385536968", "createdAt": "2020-04-01T12:31:16Z", "commit": {"oid": "ecccec6985a6ebe403824484316b06200ad24062"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQxMjozMToxN1rOF--W5A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQxMjozMToxN1rOF--W5A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTU3NzcwMA==", "bodyText": "do you need to add any additional classes ? (Protobuf specific) or just registering serializer is enough, without calling addClass ?", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2124#discussion_r401577700", "createdAt": "2020-04-01T12:31:17Z", "author": {"login": "cangencer"}, "path": "site/docs/api/serialization.md", "diffHunk": "@@ -321,3 +321,56 @@ a jar file. Moreover, used type ids have to be unique across all\n serializers. Despite those limitations cluster level serializers offer\n full support for IMDG [sources and sinks](sources-sinks.md) - in particular\n the possibility to query & update `Map`s as well as read from `EventJournal`.\n+\n+### 3rd Party Serialization Support\n+\n+#### Google Protocol Buffers\n+\n+As Google Protocol Buffers types already implement `Serializable` interface\n+they are natively supported and don't need custom serializer. However, for\n+best performance we encourage using Protocol Buffers specific serialization.\n+Jet extensions already contain an adapter and hook (supporting Protocol\n+Buffers v3) that allow you to make use of it.\n+\n+To include Maven dependency add following to your pom:\n+\n+```xml\n+<dependency>\n+    <groupId>com.hazelcast.jet</groupId>\n+    <artifactId>hazelcast-jet-protobuf</artifactId>\n+    <classifier>jar-with-dependencies</classifier>\n+    <version>${hazelcast.jet.version}</version>\n+</dependency>\n+```\n+\n+If you want to use it with just a job, implement provided adapter:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ecccec6985a6ebe403824484316b06200ad24062"}, "originalPosition": 26}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a8201e5e20fc106e93371da8ef40c95649a2d3ab", "author": {"user": {"login": "gierlachg", "name": "Grzegorz Gierlach"}}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/a8201e5e20fc106e93371da8ef40c95649a2d3ab", "committedDate": "2020-04-01T13:19:02Z", "message": "Improving protobuf docs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "23579a855af43fa8d04c83c34c3f9069a5a5bce3", "author": {"user": {"login": "gierlachg", "name": "Grzegorz Gierlach"}}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/23579a855af43fa8d04c83c34c3f9069a5a5bce3", "committedDate": "2020-04-01T14:05:30Z", "message": "Improving protobuf docs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "beb60e3b8ff31c91831e25b0c2415c3f8e130cb5", "author": {"user": {"login": "gierlachg", "name": "Grzegorz Gierlach"}}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/beb60e3b8ff31c91831e25b0c2415c3f8e130cb5", "committedDate": "2020-04-01T14:29:34Z", "message": "Improving protobuf docs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cb6e0ad23357a68d4c9bf111f0cb9fe65a08bb66", "author": {"user": {"login": "mtopolnik", "name": "Marko Topolnik"}}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/cb6e0ad23357a68d4c9bf111f0cb9fe65a08bb66", "committedDate": "2020-04-01T16:09:10Z", "message": "Improve serialization page"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5bf66f2406ca822bdccb3f72e3b2ecf271246d45", "author": {"user": {"login": "mtopolnik", "name": "Marko Topolnik"}}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/5bf66f2406ca822bdccb3f72e3b2ecf271246d45", "committedDate": "2020-04-01T16:12:39Z", "message": "Undo changing title (breaks links)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg1NzQwMTIw", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2124#pullrequestreview-385740120", "createdAt": "2020-04-01T16:14:10Z", "commit": {"oid": "5bf66f2406ca822bdccb3f72e3b2ecf271246d45"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg1NzQzNzYw", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2124#pullrequestreview-385743760", "createdAt": "2020-04-01T16:18:28Z", "commit": {"oid": "5bf66f2406ca822bdccb3f72e3b2ecf271246d45"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQxNjoxODoyOVrOF_IUJQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQxNjoxOToxNlrOF_IWYw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTc0MDgzNw==", "bodyText": "since it's reworded, we don't need to depend on the fat JAR here, and we should also include the equivalent gradle snippet as the first option (this is the convention throughout the documentation)", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2124#discussion_r401740837", "createdAt": "2020-04-01T16:18:29Z", "author": {"login": "cangencer"}, "path": "site/docs/api/serialization.md", "diffHunk": "@@ -315,9 +316,58 @@ hazelcast:\n         \"class-name\": \"com.hazelcast.jet.examples.PersonSerializer\"\n ```\n \n-All the classes - data types, serializers & hooks - should be present\n-on the cluster classpath, ideally in server's `lib` directory packaged as\n-a jar file. Moreover, used type ids have to be unique across all\n-serializers. Despite those limitations cluster level serializers offer\n-full support for IMDG [sources and sinks](sources-sinks.md) - in particular\n-the possibility to query & update `Map`s as well as read from `EventJournal`.\n+Put the JAR containing the serializer hook and related classes in the\n+`<jet_home>/lib` directory. Make sure that ecah registered serializer\n+has a unique type ID.\n+\n+The advantage of a cluster-level serializer is that it is supported in\n+all Hazelcast Jet features.\n+\n+## 3rd-Party Serialization Support\n+\n+### Google Protocol Buffers\n+\n+Since the classes generated by Google Protocol Buffers (Protobuf)\n+already implement `java.io.Serializable`, Hazelcast Jet automatically\n+supports them without a custom serializer. However, for best performance\n+we encourage registering a Protobuf-specific serializer. There is a Jet\n+extension module that simplifies this for Protobuf version 3.\n+\n+Add the extension as a dependency to your Jet job's Maven project:\n+\n+```xml\n+<dependency>\n+    <groupId>com.hazelcast.jet</groupId>\n+    <artifactId>hazelcast-jet-protobuf</artifactId>\n+    <classifier>jar-with-dependencies</classifier>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5bf66f2406ca822bdccb3f72e3b2ecf271246d45"}, "originalPosition": 167}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTc0MTQxMQ==", "bodyText": "wouldn't it be easier to use the registerSerializer(ProtobufSerializer.from(..) option?", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2124#discussion_r401741411", "createdAt": "2020-04-01T16:19:16Z", "author": {"login": "cangencer"}, "path": "site/docs/api/serialization.md", "diffHunk": "@@ -315,9 +316,58 @@ hazelcast:\n         \"class-name\": \"com.hazelcast.jet.examples.PersonSerializer\"\n ```\n \n-All the classes - data types, serializers & hooks - should be present\n-on the cluster classpath, ideally in server's `lib` directory packaged as\n-a jar file. Moreover, used type ids have to be unique across all\n-serializers. Despite those limitations cluster level serializers offer\n-full support for IMDG [sources and sinks](sources-sinks.md) - in particular\n-the possibility to query & update `Map`s as well as read from `EventJournal`.\n+Put the JAR containing the serializer hook and related classes in the\n+`<jet_home>/lib` directory. Make sure that ecah registered serializer\n+has a unique type ID.\n+\n+The advantage of a cluster-level serializer is that it is supported in\n+all Hazelcast Jet features.\n+\n+## 3rd-Party Serialization Support\n+\n+### Google Protocol Buffers\n+\n+Since the classes generated by Google Protocol Buffers (Protobuf)\n+already implement `java.io.Serializable`, Hazelcast Jet automatically\n+supports them without a custom serializer. However, for best performance\n+we encourage registering a Protobuf-specific serializer. There is a Jet\n+extension module that simplifies this for Protobuf version 3.\n+\n+Add the extension as a dependency to your Jet job's Maven project:\n+\n+```xml\n+<dependency>\n+    <groupId>com.hazelcast.jet</groupId>\n+    <artifactId>hazelcast-jet-protobuf</artifactId>\n+    <classifier>jar-with-dependencies</classifier>\n+    <version>${hazelcast.jet.version}</version>\n+</dependency>\n+```\n+\n+If you want to use it locally within a Jet job, implement an adapter\n+by extending the provided class:\n+\n+```java\n+class PersonSerializer extends ProtobufSerializer<Person> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5bf66f2406ca822bdccb3f72e3b2ecf271246d45"}, "originalPosition": 176}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "682837e8f5b753c373587b5de82a6f2b62d7a1bc", "author": {"user": {"login": "gierlachg", "name": "Grzegorz Gierlach"}}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/682837e8f5b753c373587b5de82a6f2b62d7a1bc", "committedDate": "2020-04-01T17:02:00Z", "message": "Add gradle/maven protobuf dependency section"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg2MTQ4ODAx", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2124#pullrequestreview-386148801", "createdAt": "2020-04-02T06:53:44Z", "commit": {"oid": "682837e8f5b753c373587b5de82a6f2b62d7a1bc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2760, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}