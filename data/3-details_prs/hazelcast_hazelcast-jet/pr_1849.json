{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYxNDUwMDIw", "number": 1849, "title": "Expose read function", "bodyText": "Exoise readFileFn from SourcesProcessors. This allows to easily plug in custom file reading (like: CSV and TSV parsers, batched parsers, etc.).\nAdditionally I've added readFileFn to S3 source.\nChecklist\n\n Tags Set\n Milestone Set\n Any breaking changes are documented\n New public APIs have @Nonnull/@Nullable annotations\n New public APIs have @since tags in Javadoc\n For code samples, code sample main readme is updated\n\nLinks to issues fixed (if any): #1772\nFixes #1772\nList of breaking changes:\n\n..", "createdAt": "2020-01-10T13:27:34Z", "url": "https://github.com/hazelcast/hazelcast-jet/pull/1849", "merged": true, "mergeCommit": {"oid": "f6b8b516cb8db9bfa23691a2d65441f56d0deda1"}, "closed": true, "closedAt": "2020-01-20T08:34:52Z", "author": {"login": "TomaszGaweda"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb4r_wtgH2gAyMzYxNDUwMDIwOjBkNjk0NTI4MmJhMzdjOTdkZmI1MTZiYjI4ZTUxY2FiOWMwMTA4YjI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb8G3iwgFqTM0NTEwNDcxMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "0d6945282ba37c97dfb516bb28e51cab9c0108b2", "author": {"user": null}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/0d6945282ba37c97dfb516bb28e51cab9c0108b2", "committedDate": "2020-01-09T15:50:15Z", "message": "#1772 Expose readFileFn from SourcesProcessors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "07297045404a1311ed56220ee3fdeba72c474d6c", "author": {"user": null}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/07297045404a1311ed56220ee3fdeba72c474d6c", "committedDate": "2020-01-10T13:27:03Z", "message": "#1772 Expose readFileFn from S3 Source"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQxMTc5OTg1", "url": "https://github.com/hazelcast/hazelcast-jet/pull/1849#pullrequestreview-341179985", "createdAt": "2020-01-10T14:02:50Z", "commit": {"oid": "07297045404a1311ed56220ee3fdeba72c474d6c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMFQxNDowMjo1MFrOFcU6Yg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMFQxNDowMjo1MFrOFcU6Yg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTI0NzA3NA==", "bodyText": "does it make sense that if you want to provide a mapping, you also have to implement reading the files?", "url": "https://github.com/hazelcast/hazelcast-jet/pull/1849#discussion_r365247074", "createdAt": "2020-01-10T14:02:50Z", "author": {"login": "cangencer"}, "path": "hazelcast-jet-core/src/main/java/com/hazelcast/jet/pipeline/FileSourceBuilder.java", "diffHunk": "@@ -107,13 +111,17 @@ public FileSourceBuilder charset(@Nonnull Charset charset) {\n      * The default local parallelism for this processor is 2 (or 1 if just 1\n      * CPU is available).\n      *\n+     * @param readFileFn the function which reads line and emits immediate items from it.\n+     *                   Gets file {@code Path} as parameter and returns Stream of immediate items.\n      * @param mapOutputFn the function which creates output object from each\n      *                    line. Gets the filename and line as parameters\n+     * @param <I> the type of immediate items returned from file reading\n      * @param <T> the type of the items the source emits\n      */\n-    public <T> BatchSource<T> build(BiFunctionEx<String, String, ? extends T> mapOutputFn) {\n+    public <I, T> BatchSource<T> build(@Nonnull FunctionEx<? super Path, ? extends Stream<I>> readFileFn,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "07297045404a1311ed56220ee3fdeba72c474d6c"}, "originalPosition": 62}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "75129a615fe6bf60c57e4cfb850c178c03b38af2", "author": {"user": null}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/75129a615fe6bf60c57e4cfb850c178c03b38af2", "committedDate": "2020-01-10T14:17:11Z", "message": "#1772 Expose readFileFn from SourcesProcessors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e3593016274088734e0ae1f21984a6c5e76cee88", "author": {"user": null}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/e3593016274088734e0ae1f21984a6c5e76cee88", "committedDate": "2020-01-10T14:17:11Z", "message": "#1772 Expose readFileFn from S3 Source"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a25e0f78f3db78ee395cebbd820368b801e6c7fe", "author": {"user": null}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/a25e0f78f3db78ee395cebbd820368b801e6c7fe", "committedDate": "2020-01-10T14:18:13Z", "message": "Merge branch 'expose-read-function' of https://github.com/TomaszGaweda/hazelcast-jet into expose-read-function"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e405ccc9d4ca70e1dbd80aeb4d2620547a66ade6", "author": {"user": null}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/e405ccc9d4ca70e1dbd80aeb4d2620547a66ade6", "committedDate": "2020-01-10T16:39:31Z", "message": "Fix unserializable error\n\nSpotBugs upgraded to allow testing on JDK 13"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f50954f0f3342754032084f6b8bf8ec97f02492a", "author": {"user": {"login": "viliam-durina", "name": "Viliam Durina"}}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/f50954f0f3342754032084f6b8bf8ec97f02492a", "committedDate": "2020-01-14T13:40:08Z", "message": "Improve, simplify, make bw-compatible"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQyNTM3OTIy", "url": "https://github.com/hazelcast/hazelcast-jet/pull/1849#pullrequestreview-342537922", "createdAt": "2020-01-14T13:41:56Z", "commit": {"oid": "e405ccc9d4ca70e1dbd80aeb4d2620547a66ade6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ1MTA0NzEy", "url": "https://github.com/hazelcast/hazelcast-jet/pull/1849#pullrequestreview-345104712", "createdAt": "2020-01-20T06:50:29Z", "commit": {"oid": "f50954f0f3342754032084f6b8bf8ec97f02492a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2911, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}