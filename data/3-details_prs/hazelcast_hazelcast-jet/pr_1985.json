{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc2MTIwMzky", "number": 1985, "title": "Add serialization sample implementation.", "bodyText": "Added serialization sample implementation.", "createdAt": "2020-02-17T12:52:46Z", "url": "https://github.com/hazelcast/hazelcast-jet/pull/1985", "merged": true, "mergeCommit": {"oid": "0608cb2decd775fafb0ba9970bb7a52664fe09c0"}, "closed": true, "closedAt": "2020-02-19T10:26:33Z", "author": {"login": "gierlachg"}, "timelineItems": {"totalCount": 19, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcD69XzgH2gAyMzc2MTIwMzkyOjczYmZjOTJjZjQwOTY3YjY4ZWJmYmJkODZiMjRiNjk4Y2YzYWNjOWU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcFz8BGgFqTM2MDk5NzI0OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "73bfc92cf40967b68ebfbbd86b24b698cf3acc9e", "author": {"user": {"login": "gierlachg", "name": "Grzegorz Gierlach"}}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/73bfc92cf40967b68ebfbbd86b24b698cf3acc9e", "committedDate": "2020-02-13T13:29:23Z", "message": "(De)serialization docs."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "37df40991d5b399eb7f2615110c2a82897585b13", "author": {"user": {"login": "gierlachg", "name": "Grzegorz Gierlach"}}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/37df40991d5b399eb7f2615110c2a82897585b13", "committedDate": "2020-02-13T14:01:58Z", "message": "Wrap each line to 72 chars."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aab6a607d08defb31c3d830b9ebcd15ee95befcd", "author": {"user": {"login": "gierlachg", "name": "Grzegorz Gierlach"}}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/aab6a607d08defb31c3d830b9ebcd15ee95befcd", "committedDate": "2020-02-13T15:21:01Z", "message": "Add size comparison."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "47f7861642d1b831be206a1ab84d992f35b7eff8", "author": {"user": {"login": "gierlachg", "name": "Grzegorz Gierlach"}}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/47f7861642d1b831be206a1ab84d992f35b7eff8", "committedDate": "2020-02-13T15:48:12Z", "message": "Merge remote-tracking branch 'upstream/docs' into docs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "62471c8fb8b903642f0b1e287383b65e3df81a8d", "author": {"user": {"login": "gierlachg", "name": "Grzegorz Gierlach"}}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/62471c8fb8b903642f0b1e287383b65e3df81a8d", "committedDate": "2020-02-14T08:17:53Z", "message": "Add (de)serialization pros and cons."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b990ddf1fb76417c8a4f3cdffec7795cdfc1b299", "author": {"user": {"login": "gierlachg", "name": "Grzegorz Gierlach"}}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/b990ddf1fb76417c8a4f3cdffec7795cdfc1b299", "committedDate": "2020-02-14T09:31:06Z", "message": "Address reviews."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d798703990dedb23fb5147ca22969aa0994d8984", "author": {"user": {"login": "gierlachg", "name": "Grzegorz Gierlach"}}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/d798703990dedb23fb5147ca22969aa0994d8984", "committedDate": "2020-02-14T14:51:12Z", "message": "Amend numbers & add (not yet active) benchmark link."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9626d1a50e99f9a6b59de2c87d9e589f61710a65", "author": {"user": {"login": "gierlachg", "name": "Grzegorz Gierlach"}}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/9626d1a50e99f9a6b59de2c87d9e589f61710a65", "committedDate": "2020-02-14T16:15:44Z", "message": "Merge remote-tracking branch 'upstream/docs' into docs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "53577042457a6033716bdd0aa6b2660dc6e9c63d", "author": {"user": {"login": "gierlachg", "name": "Grzegorz Gierlach"}}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/53577042457a6033716bdd0aa6b2660dc6e9c63d", "committedDate": "2020-02-17T07:20:45Z", "message": "Merge remote-tracking branch 'upstream/docs' into docs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b6b86fddd0069f76c4da5db4e0ef1cde25819b9c", "author": {"user": {"login": "gierlachg", "name": "Grzegorz Gierlach"}}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/b6b86fddd0069f76c4da5db4e0ef1cde25819b9c", "committedDate": "2020-02-17T11:21:07Z", "message": "Merge remote-tracking branch 'upstream/docs' into docs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "964ceb55ac19956962ad19cfc57e27532d078c2a", "author": {"user": {"login": "gierlachg", "name": "Grzegorz Gierlach"}}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/964ceb55ac19956962ad19cfc57e27532d078c2a", "committedDate": "2020-02-17T12:51:27Z", "message": "Add serialization sample implementation."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c4d5e76e7bc05b0f061ee0903060766bdec6ee7c", "author": {"user": {"login": "gierlachg", "name": "Grzegorz Gierlach"}}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/c4d5e76e7bc05b0f061ee0903060766bdec6ee7c", "committedDate": "2020-02-17T12:57:13Z", "message": "Add serialization sample implementation."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "66f21e005e8f49d6b2b4c53e17f431fca9a76d59", "author": {"user": {"login": "gierlachg", "name": "Grzegorz Gierlach"}}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/66f21e005e8f49d6b2b4c53e17f431fca9a76d59", "committedDate": "2020-02-17T13:07:01Z", "message": "Merge remote-tracking branch 'upstream/docs' into serialization_docs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "99d851885836034cf36d4bf69b42335ba3a27159", "author": {"user": {"login": "gierlachg", "name": "Grzegorz Gierlach"}}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/99d851885836034cf36d4bf69b42335ba3a27159", "committedDate": "2020-02-17T14:07:20Z", "message": "Merge branch 'docs' into serialization_docs"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU5NzczODYy", "url": "https://github.com/hazelcast/hazelcast-jet/pull/1985#pullrequestreview-359773862", "createdAt": "2020-02-17T14:28:47Z", "commit": {"oid": "99d851885836034cf36d4bf69b42335ba3a27159"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xN1QxNDoyODo0N1rOFqmVqA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xN1QxNDoyODo0N1rOFqmVqA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDIxMjY0OA==", "bodyText": "I think worth mentioning is SerializerHooks, and also how to mention it when using a standalone cluster", "url": "https://github.com/hazelcast/hazelcast-jet/pull/1985#discussion_r380212648", "createdAt": "2020-02-17T14:28:47Z", "author": {"login": "cangencer"}, "path": "site/docs/api/serialization.md", "diffHunk": "@@ -84,11 +77,49 @@ Strategy                                                   Number of Bytes   Ove\n java.io.Serializable                                                   162          523\n java.io.Externalizable                                                  87          234\n com.hazelcast.nio.serialization.Portable                               104          300\n-com.hazelcast.nio.serialization.DataSerializable                        88          238\n-com.hazelcast.nio.serialization.IdentifiedDataSerializable              35           34\n com.hazelcast.nio.serialization.StreamSerializer                        26            0\n ```\n \n+## Sample implementation\n+\n+For best performance we recommend using \n+[com.hazelcast.nio.serialization.StreamSerializer](https://docs.hazelcast.org/docs/latest/javadoc/com/hazelcast/nio/serialization/StreamSerializer.html) or\n+[com.hazelcast.nio.serialization.ByteArraySerializer](https://docs.hazelcast.org/docs/latest/javadoc/com/hazelcast/nio/serialization/ByteArraySerializer.html).\n+Below you can find a sample implementation of `StreamSerializer` for \n+`Person` (mind the type id which should be unique across all stream serializers):\n+```\n+class PersonSerializer implements StreamSerializer<Person> {\n+\n+        private static final int TYPE_ID = 1;\n+\n+        @Override\n+        public int getTypeId() {\n+            return TYPE_ID;\n+        }\n+\n+        @Override\n+        public void write(ObjectDataOutput out, Person person) throws IOException {\n+            out.writeUTF(person.firstName);\n+            out.writeUTF(person.lastName);\n+            out.writeInt(person.age);\n+            out.writeFloat(person.height);\n+        }\n+\n+        @Override\n+        public Person read(ObjectDataInput in) throws IOException {\n+            return new Person(in.readUTF(), in.readUTF(), in.readInt(), in.readFloat());\n+        }\n+    }\n+```\n+\n+Then the serializer should be registered with Jet on cluster startup:\n+```\n+JetConfig config = new JetConfig();\n+config.getHazelcastConfig().getSerializationConfig()\n+    .addSerializerConfig(new SerializerConfig().setTypeClass(Person.class).setClass(PersonSerializer.class));\n+JetInstance jet = Jet.newJetInstance(config);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "99d851885836034cf36d4bf69b42335ba3a27159"}, "originalPosition": 105}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3cef45d36ce788f5fd0178cdf26a0705b1230338", "author": {"user": {"login": "gierlachg", "name": "Grzegorz Gierlach"}}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/3cef45d36ce788f5fd0178cdf26a0705b1230338", "committedDate": "2020-02-18T08:57:13Z", "message": "Add pipeline serialization & serializer hook registration sections."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f95b58b4b24f6f1cb895c5862f7424e560563a19", "author": {"user": {"login": "gierlachg", "name": "Grzegorz Gierlach"}}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/f95b58b4b24f6f1cb895c5862f7424e560563a19", "committedDate": "2020-02-18T09:04:15Z", "message": "Merge remote-tracking branch 'upstream/docs' into serialization_docs\n\n# Conflicts:\n#\tsite/docs/api/serialization.md"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5fed93ed5172ed5a0e97f86cbfa585eb83b6295a", "author": {"user": {"login": "gierlachg", "name": "Grzegorz Gierlach"}}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/5fed93ed5172ed5a0e97f86cbfa585eb83b6295a", "committedDate": "2020-02-18T10:46:51Z", "message": "Fix wording."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYwOTk3MjQ4", "url": "https://github.com/hazelcast/hazelcast-jet/pull/1985#pullrequestreview-360997248", "createdAt": "2020-02-19T10:26:25Z", "commit": {"oid": "5fed93ed5172ed5a0e97f86cbfa585eb83b6295a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2862, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}