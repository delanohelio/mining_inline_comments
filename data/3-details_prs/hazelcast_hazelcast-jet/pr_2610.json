{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA2MTAwODc4", "number": 2610, "title": "Config option to disable the IMDG version check", "bodyText": "Jet is normally used as the hazelcast-jet artifact, but hazelcast-jet-core is also available, and the user can combine it with any version of the hazelcast artifact.\nSome users want to use this in order to benefit from a bug fix in IMDG that doesn't influence interoperability with Jet, but the version check in Jet prevents them.\nThis PR adds a system property that disables the version check.\nChecklist:\n\n Labels and Milestone set\n Added a line in hazelcast-jet-distribution/src/root/release_notes.txt (for any non-trivial fix/enhancement/feature)\n New public APIs have @since tags in Javadoc", "createdAt": "2020-10-19T16:11:14Z", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2610", "merged": true, "mergeCommit": {"oid": "241c02d164d82894527484b9693cd5c3f1b62ede"}, "closed": true, "closedAt": "2020-12-23T11:38:19Z", "author": {"login": "TomaszGaweda"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdUGfemAH2gAyNTA2MTAwODc4OjBlZmMwMjRmMmIyMDIyYjZjYmRkYWVkZGFmZWIzNDBlNDkyMjQ2NjA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdo9kSXgFqTU1NzgxNTU5NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "0efc024f2b2022b6cbddaeddafeb340e49224660", "author": {"user": {"login": "TomaszGaweda", "name": "Tomasz Gaw\u0119da"}}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/0efc024f2b2022b6cbddaeddafeb340e49224660", "committedDate": "2020-10-19T16:09:32Z", "message": "Move variable closer to usage"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE5NTQ2NzEy", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2610#pullrequestreview-519546712", "createdAt": "2020-10-29T10:56:09Z", "commit": {"oid": "0efc024f2b2022b6cbddaeddafeb340e49224660"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQxMDo1NjowOVrOHqWcqA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQxMDo1NjowOVrOHqWcqA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDE3MDAyNA==", "bodyText": "We have com.hazelcast.jet.core.JetProperties that declares and documents all the user-configurable properties Jet recognizes.\nThe user can configure a property both as a system property and in the configuration file, this would be an exception. We could either make the check in a place where the properties are accessible, or failing that, document that this only works as a system property.\nAlso, please adjust the name to comply with the convention, and semantics so that the default value of false does the right thing: jet.imdg.version.mismatch.check.disabled.", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2610#discussion_r514170024", "createdAt": "2020-10-29T10:56:09Z", "author": {"login": "mtopolnik"}, "path": "hazelcast-jet-core/src/main/java/com/hazelcast/jet/Jet.java", "diffHunk": "@@ -258,11 +259,18 @@ private static void assertHazelcastVersion() {\n             Properties p = new Properties();\n             p.load(resource);\n             String jetHzVersion = p.getProperty(\"jet.hazelcast.version\");\n+\n             if (!hzVersion.equals(jetHzVersion)) {\n-                throw new JetException(\"Jet uses Hazelcast IMDG version \" + jetHzVersion + \" however \" +\n+                String message = \"Jet uses Hazelcast IMDG version \" + jetHzVersion + \" however \" +\n                         \"version \" + hzVersion + \" was found in the classpath. \" +\n                         \" As Jet already shades Hazelcast jars there is no need to explicitly \" +\n-                        \"add a dependency to it.\");\n+                        \"add a dependency to it.\";\n+                boolean errorOnMismatch = parseBoolean(System.getProperty(\"jet.hazelcast.errorOnMismatch\", \"true\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0efc024f2b2022b6cbddaeddafeb340e49224660"}, "originalPosition": 20}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eb58688b6117d6d952b4ce9b8048085235b8328c", "author": {"user": {"login": "TomaszGaweda", "name": "Tomasz Gaw\u0119da"}}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/eb58688b6117d6d952b4ce9b8048085235b8328c", "committedDate": "2020-11-16T16:40:06Z", "message": "After CR: Name changed"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "682e92eba20f1425b484028dce44b6863ed24b42", "author": {"user": {"login": "TomaszGaweda", "name": "Tomasz Gaw\u0119da"}}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/682e92eba20f1425b484028dce44b6863ed24b42", "committedDate": "2020-11-16T16:42:01Z", "message": "Checkstyle"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "692f11ecd06a2324c752b9baf4f211be8a4c11cf", "author": {"user": {"login": "TomaszGaweda", "name": "Tomasz Gaw\u0119da"}}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/692f11ecd06a2324c752b9baf4f211be8a4c11cf", "committedDate": "2020-11-16T16:51:40Z", "message": "Typo"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6fd828a3e57ded5ea6117664cf37fd461d20cbd2", "author": {"user": {"login": "TomaszGaweda", "name": "Tomasz Gaw\u0119da"}}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/6fd828a3e57ded5ea6117664cf37fd461d20cbd2", "committedDate": "2020-11-16T17:06:09Z", "message": "Moved property to JetProperties"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d484d55e312d4d9e55b93c0a15b7e21e5faaff75", "author": {"user": {"login": "TomaszGaweda", "name": "Tomasz Gaw\u0119da"}}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/d484d55e312d4d9e55b93c0a15b7e21e5faaff75", "committedDate": "2020-11-16T17:22:28Z", "message": "Checkstyle again"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f1da7ef3e9be81234fb3ce1fefd025f0e4b54eaa", "author": {"user": {"login": "TomaszGaweda", "name": "Tomasz Gaw\u0119da"}}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/f1da7ef3e9be81234fb3ce1fefd025f0e4b54eaa", "committedDate": "2020-11-16T17:38:59Z", "message": "Checkstyle again"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU2NDYwNjYy", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2610#pullrequestreview-556460662", "createdAt": "2020-12-21T15:26:25Z", "commit": {"oid": "f1da7ef3e9be81234fb3ce1fefd025f0e4b54eaa"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMVQxNToyNjoyNVrOIJcE8g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMVQxNToyNjoyNVrOIJcE8g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Njc2ODExNA==", "bodyText": "Please wrap this text (72 chars starting from the 1st text char), otherwise we can merge it.", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2610#discussion_r546768114", "createdAt": "2020-12-21T15:26:25Z", "author": {"login": "mtopolnik"}, "path": "hazelcast-jet-core/src/main/java/com/hazelcast/jet/core/JetProperties.java", "diffHunk": "@@ -88,6 +88,16 @@\n     public static final HazelcastProperty JET_HOME\n             = new HazelcastProperty(\"jet.home\", \"\");\n \n+    /**\n+     * If {@code false}, Jet will check during initialization that IMDG module has compatible version.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f1da7ef3e9be81234fb3ce1fefd025f0e4b54eaa"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0cafe51a55636ff1addd04fc4e20e7a75a7443df", "author": {"user": {"login": "mtopolnik", "name": "Marko Topolnik"}}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/0cafe51a55636ff1addd04fc4e20e7a75a7443df", "committedDate": "2020-12-23T10:09:04Z", "message": "Rewrap Javadoc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c3f4e01f02d0e869333361d0a2d48c22d0f089ae", "author": {"user": {"login": "mtopolnik", "name": "Marko Topolnik"}}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/c3f4e01f02d0e869333361d0a2d48c22d0f089ae", "committedDate": "2020-12-23T11:11:30Z", "message": "Improve version check property doc"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU3ODE1NTk1", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2610#pullrequestreview-557815595", "createdAt": "2020-12-23T11:38:03Z", "commit": {"oid": "c3f4e01f02d0e869333361d0a2d48c22d0f089ae"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3484, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}