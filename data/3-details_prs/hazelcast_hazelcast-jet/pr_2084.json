{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkxNTY3MjE5", "number": 2084, "title": "Fix sliding-windows TopNStocks code sample", "bodyText": "TopNStocks code sample does not have any valuable output after migration to new TradeSource generator. There were two issues:\n\nit started to use all tickers instead of limited number (500)\nchanges in price started to be too low that display cents of double was not sufficient (fixed by using 5f instead of original 2f)\n\nOriginal output looks like:\nTop rising stocks:\n   AMCX by 0.04\n   ASML by 0.04\n   BIIB by 0.04\n   ALTY by 0.03\n   ACIA by 0.03\nTop falling stocks:\n   AGNC by -0.04\n   AXSM by -0.04\n   ACRX by -0.03\n   AREX by -0.03\n   ACGLP by -0.03\n\nNot valuable output after TradeSource migration looks like:\nTop rising stocks:\n   HMTA by 0.00\n   MSDIW by 0.00\n   SQBG by 0.00\n   ELOS by 0.00\n   CLRBW by 0.00\nTop falling stocks:\n   INVT by -0.00\n   DBVT by -0.00\n   ADRA by -0.00\n   OFED by -0.00\n   WFM by -0.00\n\nOutput after this PR:\nTop rising stocks:\n   CDC by 4.44%\n   ABCD by 3.86%\n   CBMG by 3.86%\n   ASTE by 3.86%\n   AGLE by 3.79%\nTop falling stocks:\n   ATNI by -1.99%\n   AGII by -1.92%\n   AMAG by -1.74%\n   AGIIL by -1.73%\n   BATRA by -1.73%\n\nChecklist\n\n Tags Set\n Milestone Set\n[N/A] Any breaking changes are documented\n[N/A] New public APIs have @Nonnull/@Nullable annotations\n[N/A] New public APIs have @since tags in Javadoc\n[N/A] For code samples, code sample main readme is updated", "createdAt": "2020-03-20T14:38:54Z", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2084", "merged": true, "mergeCommit": {"oid": "132a80773b0afffc3f7a79f1945e8246422de5b0"}, "closed": true, "closedAt": "2020-03-23T14:16:57Z", "author": {"login": "olukas"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcPhwvVgH2gAyMzkxNTY3MjE5OjZhMDZhYjY3NGM2YTViOTQwNmI0M2M4MmRmZTgwNmQwZjc4NjViOWQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcQe3WogFqTM3OTQ2MDg2Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "6a06ab674c6a5b9406b43c82dfe806d0f7865b9d", "author": {"user": {"login": "olukas", "name": "Ondrej Lukas"}}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/6a06ab674c6a5b9406b43c82dfe806d0f7865b9d", "committedDate": "2020-03-20T14:55:03Z", "message": "Fix sliding-windows TopNStocks code sample"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "48a82efccda057a00a53b3a225b36880ca01d536", "author": {"user": {"login": "olukas", "name": "Ondrej Lukas"}}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/48a82efccda057a00a53b3a225b36880ca01d536", "committedDate": "2020-03-20T14:36:29Z", "message": "Fix sliding-windows TopNStocks code source"}, "afterCommit": {"oid": "6a06ab674c6a5b9406b43c82dfe806d0f7865b9d", "author": {"user": {"login": "olukas", "name": "Ondrej Lukas"}}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/6a06ab674c6a5b9406b43c82dfe806d0f7865b9d", "committedDate": "2020-03-20T14:55:03Z", "message": "Fix sliding-windows TopNStocks code sample"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4NTY4MTIw", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2084#pullrequestreview-378568120", "createdAt": "2020-03-20T15:10:54Z", "commit": {"oid": "6a06ab674c6a5b9406b43c82dfe806d0f7865b9d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxNToxMDo1NFrOF5Xu8g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxNToxMDo1NFrOF5Xu8g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTcwMjAwMg==", "bodyText": "Can't we make the price differences larger instead of adding decimals?", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2084#discussion_r395702002", "createdAt": "2020-03-20T15:10:54Z", "author": {"login": "mtopolnik"}, "path": "examples/sliding-windows/src/main/java/com/hazelcast/jet/examples/slidingwindow/TopNStocks.java", "diffHunk": "@@ -116,9 +116,9 @@ public static void main(String[] args) throws Exception {\n         public String toString() {\n             return String.format(\n                     \"Top rising stocks:%n%s\\nTop falling stocks:%n%s\",\n-                    topIncrease.stream().map(kwr -> String.format(\"   %s by %.2f\", kwr.key(), kwr.result()))\n+                    topIncrease.stream().map(kwr -> String.format(\"   %s by %.5f\", kwr.key(), kwr.result()))\n                                .collect(joining(\"\\n\")),\n-                    topDecrease.stream().map(kwr -> String.format(\"   %s by %.2f\", kwr.key(), kwr.result()))\n+                    topDecrease.stream().map(kwr -> String.format(\"   %s by %.5f\", kwr.key(), kwr.result()))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6a06ab674c6a5b9406b43c82dfe806d0f7865b9d"}, "originalPosition": 17}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "769718a1a138d8e6230c13c462cb4d19b976fe7a", "author": {"user": null}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/769718a1a138d8e6230c13c462cb4d19b976fe7a", "committedDate": "2020-03-23T09:36:02Z", "message": "Improve trade price values"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cb8306702487729084637ee9cee7c1ba6dfb9448", "author": {"user": null}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/cb8306702487729084637ee9cee7c1ba6dfb9448", "committedDate": "2020-03-23T13:52:41Z", "message": "Rename constant"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc5NDYwODYz", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2084#pullrequestreview-379460863", "createdAt": "2020-03-23T14:06:29Z", "commit": {"oid": "cb8306702487729084637ee9cee7c1ba6dfb9448"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3819, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}