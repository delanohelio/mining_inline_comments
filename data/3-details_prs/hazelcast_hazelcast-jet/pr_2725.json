{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMxMTUxMjAz", "number": 2725, "title": "Fix SqlResult.close when there are no rows", "bodyText": "The RootResultConsumerSink didn't check the status when it had no items\nin the inbox.", "createdAt": "2020-12-02T16:50:41Z", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2725", "merged": true, "mergeCommit": {"oid": "c194f25f0dd1e58c1f4712d0a71598992bda6896"}, "closed": true, "closedAt": "2020-12-09T16:45:26Z", "author": {"login": "viliam-durina"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdiRcXpAH2gAyNTMxMTUxMjAzOjA2M2E1NWRhZWRhODdkNmU2NTE1MzQ5MTJhOGVjNzY5NjcxMWE1OTc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdkg-5JAH2gAyNTMxMTUxMjAzOmFhODQwMGYyZmJhYmRkNjljNjZjZjQ5Mjk0MGQwODkzM2FjNjY5MjA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "063a55daeda87d6e651534912a8ec7696711a597", "author": {"user": {"login": "viliam-durina", "name": "Viliam Durina"}}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/063a55daeda87d6e651534912a8ec7696711a597", "committedDate": "2020-12-02T16:50:02Z", "message": "Fix SqlResult.close when there are no rows\n\nThe RootResultConsumerSink didn't check the status when it had no items\nin the inbox."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQzNjYzNjY0", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2725#pullrequestreview-543663664", "createdAt": "2020-12-03T07:18:50Z", "commit": {"oid": "063a55daeda87d6e651534912a8ec7696711a597"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QwNzoxODo1MVrOH-BCfw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QwNzoxODo1MVrOH-BCfw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDc5MDc4Mw==", "bodyText": "Can't we use simply TestBatchSqlConnector with zero items?", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2725#discussion_r534790783", "createdAt": "2020-12-03T07:18:51Z", "author": {"login": "gierlachg"}, "path": "hazelcast-jet-sql/src/test/java/com/hazelcast/jet/sql/impl/connector/test/TestEmptyStreamSqlConnector.java", "diffHunk": "@@ -0,0 +1,103 @@\n+/*\n+ * Copyright (c) 2008-2020, Hazelcast, Inc. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.hazelcast.jet.sql.impl.connector.test;\n+\n+import com.hazelcast.jet.core.DAG;\n+import com.hazelcast.jet.core.TestProcessors.MockP;\n+import com.hazelcast.jet.core.Vertex;\n+import com.hazelcast.jet.sql.impl.connector.SqlConnector;\n+import com.hazelcast.jet.sql.impl.schema.JetTable;\n+import com.hazelcast.jet.sql.impl.schema.MappingField;\n+import com.hazelcast.spi.impl.NodeEngine;\n+import com.hazelcast.sql.impl.QueryException;\n+import com.hazelcast.sql.impl.expression.Expression;\n+import com.hazelcast.sql.impl.schema.ConstantTableStatistics;\n+import com.hazelcast.sql.impl.schema.Table;\n+import com.hazelcast.sql.impl.schema.TableField;\n+import com.hazelcast.sql.impl.type.QueryDataType;\n+\n+import javax.annotation.Nonnull;\n+import javax.annotation.Nullable;\n+import java.util.List;\n+import java.util.Map;\n+\n+import static com.hazelcast.jet.impl.util.Util.toList;\n+import static java.util.Collections.singletonList;\n+\n+/**\n+ * A connector for SQL that has a single column `v` of type BIGINT, is a\n+ * streaming type, but never produces any items..\n+ */\n+public class TestEmptyStreamSqlConnector implements SqlConnector {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "063a55daeda87d6e651534912a8ec7696711a597"}, "originalPosition": 45}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQzNjc2MDI0", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2725#pullrequestreview-543676024", "createdAt": "2020-12-03T07:40:14Z", "commit": {"oid": "063a55daeda87d6e651534912a8ec7696711a597"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1d496b531e006e540fef6d4f37a8b9bea00d6f0a", "author": {"user": {"login": "viliam-durina", "name": "Viliam Durina"}}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/1d496b531e006e540fef6d4f37a8b9bea00d6f0a", "committedDate": "2020-12-09T15:58:17Z", "message": "Merge remote-tracking branch 'remotes/hazelcast/master' into sqlresult-close-fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aa8400f2fbabdd69c66cf492940d08933ac66920", "author": {"user": {"login": "viliam-durina", "name": "Viliam Durina"}}, "url": "https://github.com/hazelcast/hazelcast-jet/commit/aa8400f2fbabdd69c66cf492940d08933ac66920", "committedDate": "2020-12-09T16:04:10Z", "message": "Fix test failure"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3404, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}