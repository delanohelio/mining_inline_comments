{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIwODY4MzQz", "number": 4804, "title": "Improve persistence manager", "bodyText": "We observed some issues with persistence (corrupted files). This PR intends to fix that by adding more checks so that edge cases where it was possible that methods got called repeatadly or in a state where they should not be called anymore are avoided.", "createdAt": "2020-11-13T21:50:27Z", "url": "https://github.com/bisq-network/bisq/pull/4804", "merged": true, "mergeCommit": {"oid": "c1287ac43a90f4fe80409205ed1a0c7d483c3ced"}, "closed": true, "closedAt": "2020-11-14T21:30:10Z", "author": {"login": "chimp1984"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdcMB3mgH2gAyNTIwODY4MzQzOmE2NGMxMWViZTRmYjNiODUxOTEwMWJjNzI5YmY0ZDFjN2ZhY2IzNGY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdciqR2AFqTUzMDYwNTk0MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "a64c11ebe4fb3b8519101bc729bf4d1c7facb34f", "author": {"user": {"login": "chimp1984", "name": null}}, "url": "https://github.com/bisq-network/bisq/commit/a64c11ebe4fb3b8519101bc729bf4d1c7facb34f", "committedDate": "2020-11-13T19:08:01Z", "message": "Add additional guards to ensure that the shut down routine is not called multiple times\n(which can happen in rare cases) and add guards that we never create multiple instances\nfor a given file as well not call initialize or other API methods after shutdown was started."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMwNTg3NTAx", "url": "https://github.com/bisq-network/bisq/pull/4804#pullrequestreview-530587501", "createdAt": "2020-11-14T16:11:46Z", "commit": {"oid": "a64c11ebe4fb3b8519101bc729bf4d1c7facb34f"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNFQxNjoxMTo0NlrOHzL8Hw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNFQxNjoxMTo0NlrOHzL8Hw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzQzNTAzOQ==", "bodyText": "initCalled is always false as it's only set here", "url": "https://github.com/bisq-network/bisq/pull/4804#discussion_r523435039", "createdAt": "2020-11-14T16:11:46Z", "author": {"login": "sqrrm"}, "path": "common/src/main/java/bisq/common/persistence/PersistenceManager.java", "diffHunk": "@@ -166,6 +183,7 @@ private static void onWriteCompleted(ResultHandler completeHandler,\n     @Nullable\n     private Timer timer;\n     private ExecutorService writeToDiskExecutor;\n+    public final AtomicBoolean initCalled = new AtomicBoolean(false);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a64c11ebe4fb3b8519101bc729bf4d1c7facb34f"}, "originalPosition": 92}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "755ea4d792420c99909508eb747beaa29a7df28f", "author": {"user": {"login": "chimp1984", "name": null}}, "url": "https://github.com/bisq-network/bisq/commit/755ea4d792420c99909508eb747beaa29a7df28f", "committedDate": "2020-11-14T20:51:51Z", "message": "Add missing initCalled.set(true);"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMwNjA1OTQx", "url": "https://github.com/bisq-network/bisq/pull/4804#pullrequestreview-530605941", "createdAt": "2020-11-14T21:30:04Z", "commit": {"oid": "755ea4d792420c99909508eb747beaa29a7df28f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3540, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}