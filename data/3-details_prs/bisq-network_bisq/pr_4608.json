{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk5MzI1MTUy", "number": 4608, "title": "Add new 'getoffer offer-id' api method", "bodyText": "There are a number of use cases where a user may want to see a single offer instead of every offer for a currency pair on the buy or sell side.  The changes are:\n\nAdd getoffer to grpc.proto\nAdd new method to GrpcOffersService, CoreApi, CoreOffersService\nAdd new method to CLI\nAdjust create offer tests to use this new convenience", "createdAt": "2020-10-07T15:12:14Z", "url": "https://github.com/bisq-network/bisq/pull/4608", "merged": true, "mergeCommit": {"oid": "44394adb1edf761fa86dfa693f0e2cf8471f8e67"}, "closed": true, "closedAt": "2020-10-15T09:14:06Z", "author": {"login": "ghubstan"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdQOb8agH2gAyNDk5MzI1MTUyOjI5ZDE5MDVmMzE3OGRiNTk3MWI4YTQ0ODYwNGU3YjA0YTc5NmI1NjE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdSuJm8AFqTUwOTE3NjcxNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "29d1905f3178db5971b8a448604e7b04a796b561", "author": {"user": {"login": "ghubstan", "name": "Stan"}}, "url": "https://github.com/bisq-network/bisq/commit/29d1905f3178db5971b8a448604e7b04a796b561", "committedDate": "2020-10-07T15:09:13Z", "message": "Add new 'getoffer offer-id' api method\n\nThere are a number of use cases where a user may want to see a single\noffer instead of every offer for a currency pair on the buy or sell side.\nThe changes are:\n\n- Add getoffer to grpc.proto\n- Add new method to GrpcOffersService, CoreApi, CoreOffersService\n- Add new method to CLI\n- Adjust create offer tests to use this new convenience"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3a3f456fc9e0c211ebc0bafa050472b82f0ed58c", "author": {"user": {"login": "ghubstan", "name": "Stan"}}, "url": "https://github.com/bisq-network/bisq/commit/3a3f456fc9e0c211ebc0bafa050472b82f0ed58c", "committedDate": "2020-10-07T18:58:43Z", "message": "Wrap Exception in gRPC StatusRuntimeException"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA4Nzc0MjM1", "url": "https://github.com/bisq-network/bisq/pull/4608#pullrequestreview-508774235", "createdAt": "2020-10-14T21:35:19Z", "commit": {"oid": "29d1905f3178db5971b8a448604e7b04a796b561"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQyMTozNToxOVrOHhl4hA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQyMTozNToxOVrOHhl4hA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDk4NTczMg==", "bodyText": "Not wrong, but it's a bit odd to make list when we're looking for one element. .findAny() returns an Optional<> which you could then do offer.isPresent() and return offer.get() making it clear we only expect to find one offer.", "url": "https://github.com/bisq-network/bisq/pull/4608#discussion_r504985732", "createdAt": "2020-10-14T21:35:19Z", "author": {"login": "sqrrm"}, "path": "core/src/main/java/bisq/core/api/CoreOffersService.java", "diffHunk": "@@ -67,6 +68,16 @@ public CoreOffersService(CreateOfferService createOfferService,\n         this.user = user;\n     }\n \n+    Offer getOffer(String id) {\n+        List<Offer> offers = offerBookService.getOffers().stream()\n+                .filter(o -> o.getId().equals(id))\n+                .collect(Collectors.toList());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "29d1905f3178db5971b8a448604e7b04a796b561"}, "originalPosition": 15}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8394bd1f6401a0b6f6843bd3b31e3c3b391d7f3c", "author": {"user": {"login": "ghubstan", "name": "Stan"}}, "url": "https://github.com/bisq-network/bisq/commit/8394bd1f6401a0b6f6843bd3b31e3c3b391d7f3c", "committedDate": "2020-10-14T22:26:35Z", "message": "Tidy up getOffer(id)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA4ODU3ODk1", "url": "https://github.com/bisq-network/bisq/pull/4608#pullrequestreview-508857895", "createdAt": "2020-10-15T00:25:06Z", "commit": {"oid": "29d1905f3178db5971b8a448604e7b04a796b561"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQwMDoyNTowN1rOHhsijg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQwMDoyNjo0MFrOHhskXQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTA5NDc5OA==", "bodyText": "As we expect only one I would use a findAny and create an optional instead of a list.", "url": "https://github.com/bisq-network/bisq/pull/4608#discussion_r505094798", "createdAt": "2020-10-15T00:25:07Z", "author": {"login": "chimp1984"}, "path": "core/src/main/java/bisq/core/api/CoreOffersService.java", "diffHunk": "@@ -67,6 +68,16 @@ public CoreOffersService(CreateOfferService createOfferService,\n         this.user = user;\n     }\n \n+    Offer getOffer(String id) {\n+        List<Offer> offers = offerBookService.getOffers().stream()\n+                .filter(o -> o.getId().equals(id))\n+                .collect(Collectors.toList());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "29d1905f3178db5971b8a448604e7b04a796b561"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTA5NTI2MQ==", "bodyText": "Ah see you changed that in 8394bd1 ;-)", "url": "https://github.com/bisq-network/bisq/pull/4608#discussion_r505095261", "createdAt": "2020-10-15T00:26:40Z", "author": {"login": "chimp1984"}, "path": "core/src/main/java/bisq/core/api/CoreOffersService.java", "diffHunk": "@@ -67,6 +68,16 @@ public CoreOffersService(CreateOfferService createOfferService,\n         this.user = user;\n     }\n \n+    Offer getOffer(String id) {\n+        List<Offer> offers = offerBookService.getOffers().stream()\n+                .filter(o -> o.getId().equals(id))\n+                .collect(Collectors.toList());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTA5NDc5OA=="}, "originalCommit": {"oid": "29d1905f3178db5971b8a448604e7b04a796b561"}, "originalPosition": 15}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA5MTc2NzE2", "url": "https://github.com/bisq-network/bisq/pull/4608#pullrequestreview-509176716", "createdAt": "2020-10-15T09:14:00Z", "commit": {"oid": "8394bd1f6401a0b6f6843bd3b31e3c3b391d7f3c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3101, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}