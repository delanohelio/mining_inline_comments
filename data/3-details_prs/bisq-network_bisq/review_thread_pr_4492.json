{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDgxMDAxMzA1", "number": 4492, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QxNToxMDoyNlrOEg-DvA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QxNToxMDoyNlrOEg-DvA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAzMDA2NjUyOnYy", "diffSide": "RIGHT", "path": "core/src/main/java/bisq/core/trade/txproof/xmr/XmrTxProofRequest.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QxNToxMDoyNlrOHOCqRg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QxNToxMzoyN1rOHOCvWA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDQ4NTcwMg==", "bodyText": "should be else if", "url": "https://github.com/bisq-network/bisq/pull/4492#discussion_r484485702", "createdAt": "2020-09-07T15:10:26Z", "author": {"login": "jmacxx"}, "path": "core/src/main/java/bisq/core/trade/txproof/xmr/XmrTxProofRequest.java", "diffHunk": "@@ -163,10 +163,19 @@ public String toString() {\n         this.model = model;\n \n         httpClient = new XmrTxProofHttpClient(socks5ProxyProvider);\n-        httpClient.setBaseUrl(\"http://\" + model.getServiceAddress());\n-        if (model.getServiceAddress().matches(\"^192.*|^localhost.*\")) {\n-            log.info(\"Ignoring Socks5 proxy for local net address: {}\", model.getServiceAddress());\n+\n+        // localhost, LAN address, or *.local FQDN starts with http://, don't use Tor\n+        if (model.getServiceAddress().regionMatches(0, \"http:\", 0, 5)) {\n+            httpClient.setBaseUrl(model.getServiceAddress());\n             httpClient.setIgnoreSocks5Proxy(true);\n+        // any non-onion FQDN starts with https://, use Tor\n+        } if (model.getServiceAddress().regionMatches(0, \"https:\", 0, 6)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "378efcfa92f9ec5b226335312c8e4f3ce21b6bc1"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDQ4NzAwMA==", "bodyText": "should be else if", "url": "https://github.com/bisq-network/bisq/pull/4492#discussion_r484487000", "createdAt": "2020-09-07T15:13:27Z", "author": {"login": "jmacxx"}, "path": "core/src/main/java/bisq/core/trade/txproof/xmr/XmrTxProofRequest.java", "diffHunk": "@@ -163,10 +163,19 @@ public String toString() {\n         this.model = model;\n \n         httpClient = new XmrTxProofHttpClient(socks5ProxyProvider);\n-        httpClient.setBaseUrl(\"http://\" + model.getServiceAddress());\n-        if (model.getServiceAddress().matches(\"^192.*|^localhost.*\")) {\n-            log.info(\"Ignoring Socks5 proxy for local net address: {}\", model.getServiceAddress());\n+\n+        // localhost, LAN address, or *.local FQDN starts with http://, don't use Tor\n+        if (model.getServiceAddress().regionMatches(0, \"http:\", 0, 5)) {\n+            httpClient.setBaseUrl(model.getServiceAddress());\n             httpClient.setIgnoreSocks5Proxy(true);\n+        // any non-onion FQDN starts with https://, use Tor\n+        } if (model.getServiceAddress().regionMatches(0, \"https:\", 0, 6)) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDQ4NTcwMg=="}, "originalCommit": {"oid": "378efcfa92f9ec5b226335312c8e4f3ce21b6bc1"}, "originalPosition": 13}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2440, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}