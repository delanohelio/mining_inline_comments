{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg5MzYwMDMw", "number": 4539, "title": "Refactor API & add registerdisputeagent method to CLI", "bodyText": "This commit contains most of the changes suggested by @chimp1984 in his api-suggestions branch.  See 961703e\nA new registerdisputeagent method was also added to CliMain, finishing the work to support registration of mediators and refund agents on arbitration daemons running in regtest mode.  This method cannot be used to register dispute agents on mainnet;  users will see an error msg if they try.  (The change was added to this PR to avoid likely CliMain file conflicts.)\nThis PR replaces 4526.", "createdAt": "2020-09-18T14:40:16Z", "url": "https://github.com/bisq-network/bisq/pull/4539", "merged": true, "mergeCommit": {"oid": "dee92670c52a32a559773032826aeb3ddd55f8a3"}, "closed": true, "closedAt": "2020-09-22T09:37:19Z", "author": {"login": "ghubstan"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdKGiM-AH2gAyNDg5MzYwMDMwOmUyYmQ4OWYzOWE4OTFjOGIyNDM2NDE1M2EyMDQxNzdmMzdkMGNjYzQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdLUslUAFqTQ5MzI4NTY4OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e2bd89f39a891c8b24364153a204177f37d0ccc4", "author": {"user": {"login": "ghubstan", "name": "Stan"}}, "url": "https://github.com/bisq-network/bisq/commit/e2bd89f39a891c8b24364153a204177f37d0ccc4", "committedDate": "2020-09-18T14:33:16Z", "message": "Refactor API & add registerdisputeagent method to CLI\n\nThis commit contains most of the changes suggested by @chimp1984 in\nhis api-suggestions branch.  See\nhttps://github.com/bisq-network/bisq/commit/961703ecea62df62946ab001ec28205662688ccd\n\nA new 'registerdisputeagent' method was also added to MainCli, finishing\nthe work to support registration of mediators and refund agents on\narbitration daemons running in regtest mode.  This method cannot be\nused to register dispute agents on mainnet;  users will see an error\nmsg if they try."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "da78465fe4167f9d1b168bf15c13eb12cf4b50e4", "author": {"user": {"login": "ghubstan", "name": "Stan"}}, "url": "https://github.com/bisq-network/bisq/commit/da78465fe4167f9d1b168bf15c13eb12cf4b50e4", "committedDate": "2020-09-18T14:46:29Z", "message": "Make grpc boilerplate classes pkg protected"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkyODk0MzAw", "url": "https://github.com/bisq-network/bisq/pull/4539#pullrequestreview-492894300", "createdAt": "2020-09-21T18:56:25Z", "commit": {"oid": "e2bd89f39a891c8b24364153a204177f37d0ccc4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMVQxODo1NjoyNVrOHVeRkw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMVQxODo1NjoyNVrOHVeRkw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjI3ODE2Mw==", "bodyText": "Yes there is lots of extra stuff, mainly the many different payment methods with their custom requirements. Input validation, currency selection, country selection, etc...", "url": "https://github.com/bisq-network/bisq/pull/4539#discussion_r492278163", "createdAt": "2020-09-21T18:56:25Z", "author": {"login": "chimp1984"}, "path": "core/src/main/java/bisq/core/api/CorePaymentAccountsService.java", "diffHunk": "@@ -49,17 +52,19 @@ public CorePaymentAccountsService(Config config,\n         this.user = user;\n     }\n \n-    public void createPaymentAccount(String accountName, String accountNumber, String fiatCurrencyCode) {\n-        // Create and persist a PerfectMoney dummy payment account.  There is no guard\n-        // against creating accounts with duplicate names & numbers, only the uuid and\n-        // creation date are unique.\n-        PaymentMethod dummyPaymentMethod = PaymentMethod.getDummyPaymentMethod(PaymentMethod.PERFECT_MONEY_ID);\n-        PaymentAccount paymentAccount = PaymentAccountFactory.getPaymentAccount(dummyPaymentMethod);\n-        paymentAccount.init();\n-        paymentAccount.setAccountName(accountName);\n-        ((PerfectMoneyAccount) paymentAccount).setAccountNr(accountNumber);\n-        paymentAccount.setSingleTradeCurrency(new FiatCurrency(fiatCurrencyCode.toUpperCase()));\n-        user.addPaymentAccount(paymentAccount);\n+    void createPaymentAccount(String paymentMethodId,\n+                              String accountName,\n+                              String accountNumber,\n+                              String currencyCode) {\n+\n+        PaymentAccount paymentAccount = getNewPaymentAccount(paymentMethodId,\n+                accountName,\n+                accountNumber,\n+                currencyCode);\n+\n+        // TODO not sure if there is more to do at account creation.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e2bd89f39a891c8b24364153a204177f37d0ccc4"}, "originalPosition": 35}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkyODk2MzA5", "url": "https://github.com/bisq-network/bisq/pull/4539#pullrequestreview-492896309", "createdAt": "2020-09-21T18:59:12Z", "commit": {"oid": "da78465fe4167f9d1b168bf15c13eb12cf4b50e4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzMjg1Njg4", "url": "https://github.com/bisq-network/bisq/pull/4539#pullrequestreview-493285688", "createdAt": "2020-09-22T09:37:12Z", "commit": {"oid": "da78465fe4167f9d1b168bf15c13eb12cf4b50e4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3196, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}