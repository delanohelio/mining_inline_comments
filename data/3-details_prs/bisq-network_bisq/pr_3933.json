{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzcwMjA5NTM0", "number": 3933, "title": "Accept old trade statistic object", "bodyText": "The code didn't handle before the use case of new trade statistic objects\ncreated by two old clients. This change make it independent of the cut off date\nand allows us at a later point to update all trade statistics objects with\ndepositTxId value of null.", "createdAt": "2020-02-03T09:23:11Z", "url": "https://github.com/bisq-network/bisq/pull/3933", "merged": true, "mergeCommit": {"oid": "cd745717fae70cf1277b5c20f51f5ce792126209"}, "closed": true, "closedAt": "2020-02-04T11:11:24Z", "author": {"login": "ripcurlx"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcAqgz6AH2gAyMzcwMjA5NTM0OjJhZDI3OWY5OWU3N2ZmNzNlNjFiNzNkZDFkYjEwYzhlYzE3NjkxMmU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcA_lK1AFqTM1Mjg5NDg1MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2ad279f99e77ff73e61b73dd1db10c8ec176912e", "author": {"user": {"login": "ripcurlx", "name": "Christoph Atteneder"}}, "url": "https://github.com/bisq-network/bisq/commit/2ad279f99e77ff73e61b73dd1db10c8ec176912e", "committedDate": "2020-02-03T10:37:56Z", "message": "Accept old trade statistic object\n\nThe code didn't handle before the use case of new trade statistic objects\ncreated by two old clients. This change make it independent of the cut off date\nand allows us at a later point to update all trade statistics objects with\ndepositTxId value of null."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4992762512175e633584373d3772820ade840259", "author": {"user": {"login": "ripcurlx", "name": "Christoph Atteneder"}}, "url": "https://github.com/bisq-network/bisq/commit/4992762512175e633584373d3772820ade840259", "committedDate": "2020-02-03T09:22:20Z", "message": "Accept old trade statistic object\n\nThe code didn't handle before the use case of new trade statistic objects\ncreated by two old clients. This change make it independent of the cut off date\nand allows us at a later point to update all trade statistics objects with\ndepositTxId value of null."}, "afterCommit": {"oid": "2ad279f99e77ff73e61b73dd1db10c8ec176912e", "author": {"user": {"login": "ripcurlx", "name": "Christoph Atteneder"}}, "url": "https://github.com/bisq-network/bisq/commit/2ad279f99e77ff73e61b73dd1db10c8ec176912e", "committedDate": "2020-02-03T10:37:56Z", "message": "Accept old trade statistic object\n\nThe code didn't handle before the use case of new trade statistic objects\ncreated by two old clients. This change make it independent of the cut off date\nand allows us at a later point to update all trade statistics objects with\ndepositTxId value of null."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "112aaf99105b3f80eb8442a44f88e9a3cfd008c3", "author": {"user": {"login": "ripcurlx", "name": "Christoph Atteneder"}}, "url": "https://github.com/bisq-network/bisq/commit/112aaf99105b3f80eb8442a44f88e9a3cfd008c3", "committedDate": "2020-02-03T14:46:33Z", "message": "Not set depositTxId to null by default\n\nThis prevents unnecessary load on the seednodes from old clients\nloading all trade statistic objects on startup as they interpret\nthe null value as empty string"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUyNDYyNzk4", "url": "https://github.com/bisq-network/bisq/pull/3933#pullrequestreview-352462798", "createdAt": "2020-02-03T18:22:48Z", "commit": {"oid": "112aaf99105b3f80eb8442a44f88e9a3cfd008c3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QxODoyMjo0OFrOFk7Kkw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QxODoyMjo0OFrOFk7Kkw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDI2MjQxOQ==", "bodyText": "This would leave all new trades from older clients still exposed. That's perhaps the safest way to do it. Was hoping it would be possible to keep setting it to null for new version and just not serve the old version anything. Not sure if that would break things though.", "url": "https://github.com/bisq-network/bisq/pull/3933#discussion_r374262419", "createdAt": "2020-02-03T18:22:48Z", "author": {"login": "sqrrm"}, "path": "core/src/main/java/bisq/core/trade/statistics/TradeStatistics2.java", "diffHunk": "@@ -217,7 +218,7 @@ public static TradeStatistics2 fromProto(protobuf.TradeStatistics2 proto) {\n                 proto.getTradePrice(),\n                 proto.getTradeAmount(),\n                 proto.getTradeDate(),\n-                null, // We don't want to expose this anymore\n+                ProtoUtil.stringOrNullFromProto(proto.getDepositTxId()),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "112aaf99105b3f80eb8442a44f88e9a3cfd008c3"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUyODk0ODUx", "url": "https://github.com/bisq-network/bisq/pull/3933#pullrequestreview-352894851", "createdAt": "2020-02-04T11:10:42Z", "commit": {"oid": "112aaf99105b3f80eb8442a44f88e9a3cfd008c3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3412, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}