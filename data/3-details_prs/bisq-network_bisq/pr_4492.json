{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDgxMDAxMzA1", "number": 4492, "title": "Use https:// for XMR explorer API endpoints, except if localhost or Tor", "bodyText": "If Tor *.onion hostname, use HTTP with Tor proxy\nIf 127.0.0.1 or localhost, use HTTP without Tor proxy\nIf LAN address or *.local FQDN, use HTTP without Tor proxy\nIf any other FQDN hostname, use HTTPS with Tor proxy", "createdAt": "2020-09-07T03:04:40Z", "url": "https://github.com/bisq-network/bisq/pull/4492", "merged": true, "mergeCommit": {"oid": "f1a284ceb0acdc0dd4715918298da2bfbef776ff"}, "closed": true, "closedAt": "2020-09-08T16:17:12Z", "author": {"login": "wiz"}, "timelineItems": {"totalCount": 20, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdGaH7FAFqTQ4MzIxNjgwMA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdG6AzSgFqTQ4NDI5ODI3Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgzMjE2ODAw", "url": "https://github.com/bisq-network/bisq/pull/4492#pullrequestreview-483216800", "createdAt": "2020-09-07T03:06:58Z", "commit": {"oid": "d1f241aebc36f8d0b6ba2aaaa1a846b84ca50e05"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgzMjM2MDA2", "url": "https://github.com/bisq-network/bisq/pull/4492#pullrequestreview-483236006", "createdAt": "2020-09-07T04:35:08Z", "commit": {"oid": "d1f241aebc36f8d0b6ba2aaaa1a846b84ca50e05"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d1f241aebc36f8d0b6ba2aaaa1a846b84ca50e05", "author": {"user": {"login": "wiz", "name": null}}, "url": "https://github.com/bisq-network/bisq/commit/d1f241aebc36f8d0b6ba2aaaa1a846b84ca50e05", "committedDate": "2020-09-07T03:03:40Z", "message": "Use https:// for XMR explorer API endpoints, except if localhost or Tor"}, "afterCommit": {"oid": "95186c90c1ff2593e3fc37cc8beeec8213c11ce8", "author": {"user": {"login": "wiz", "name": null}}, "url": "https://github.com/bisq-network/bisq/commit/95186c90c1ff2593e3fc37cc8beeec8213c11ce8", "committedDate": "2020-09-07T09:52:33Z", "message": "Use fancy regex to use http or https for XMR explorer API endpoint\n\n* If Tor *.onion hostname, use HTTP with Tor proxy\n* If 127.0.0.1 or localhost, use HTTP without Tor proxy\n* If LAN address or *.local FQDN, use HTTP without Tor proxy\n* Otherwise use HTTPS over clearnet without Tor proxy"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "95186c90c1ff2593e3fc37cc8beeec8213c11ce8", "author": {"user": {"login": "wiz", "name": null}}, "url": "https://github.com/bisq-network/bisq/commit/95186c90c1ff2593e3fc37cc8beeec8213c11ce8", "committedDate": "2020-09-07T09:52:33Z", "message": "Use fancy regex to use http or https for XMR explorer API endpoint\n\n* If Tor *.onion hostname, use HTTP with Tor proxy\n* If 127.0.0.1 or localhost, use HTTP without Tor proxy\n* If LAN address or *.local FQDN, use HTTP without Tor proxy\n* Otherwise use HTTPS over clearnet without Tor proxy"}, "afterCommit": {"oid": "82c6aaa5759dc8b5c61e52f121a3250e503f69e4", "author": {"user": {"login": "wiz", "name": null}}, "url": "https://github.com/bisq-network/bisq/commit/82c6aaa5759dc8b5c61e52f121a3250e503f69e4", "committedDate": "2020-09-07T09:56:03Z", "message": "Use fancy regex to use http or https for XMR explorer API endpoint\n\n* If Tor *.onion hostname, use HTTP with Tor proxy\n* If 127.0.0.1 or localhost, use HTTP without Tor proxy\n* If LAN address or *.local FQDN, use HTTP without Tor proxy\n* If any other FQDN hostname, use HTTPS with Tor proxy"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "82c6aaa5759dc8b5c61e52f121a3250e503f69e4", "author": {"user": {"login": "wiz", "name": null}}, "url": "https://github.com/bisq-network/bisq/commit/82c6aaa5759dc8b5c61e52f121a3250e503f69e4", "committedDate": "2020-09-07T09:56:03Z", "message": "Use fancy regex to use http or https for XMR explorer API endpoint\n\n* If Tor *.onion hostname, use HTTP with Tor proxy\n* If 127.0.0.1 or localhost, use HTTP without Tor proxy\n* If LAN address or *.local FQDN, use HTTP without Tor proxy\n* If any other FQDN hostname, use HTTPS with Tor proxy"}, "afterCommit": {"oid": "03451d3ed256d96d970b3d48a101b5ad6fc3a45b", "author": {"user": {"login": "wiz", "name": null}}, "url": "https://github.com/bisq-network/bisq/commit/03451d3ed256d96d970b3d48a101b5ad6fc3a45b", "committedDate": "2020-09-07T10:12:52Z", "message": "Use fancy regex to use http or https for XMR explorer API endpoint\n\n* If Tor *.onion hostname, use HTTP with Tor proxy\n* If 127.0.0.1 or localhost, use HTTP without Tor proxy\n* If LAN address or *.local FQDN, use HTTP without Tor proxy\n* If any other FQDN hostname, use HTTPS with Tor proxy"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgzNjIyNTI3", "url": "https://github.com/bisq-network/bisq/pull/4492#pullrequestreview-483622527", "createdAt": "2020-09-07T15:10:25Z", "commit": {"oid": "378efcfa92f9ec5b226335312c8e4f3ce21b6bc1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QxNToxMDoyNlrOHOCqRg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QxNToxMDoyNlrOHOCqRg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDQ4NTcwMg==", "bodyText": "should be else if", "url": "https://github.com/bisq-network/bisq/pull/4492#discussion_r484485702", "createdAt": "2020-09-07T15:10:26Z", "author": {"login": "jmacxx"}, "path": "core/src/main/java/bisq/core/trade/txproof/xmr/XmrTxProofRequest.java", "diffHunk": "@@ -163,10 +163,19 @@ public String toString() {\n         this.model = model;\n \n         httpClient = new XmrTxProofHttpClient(socks5ProxyProvider);\n-        httpClient.setBaseUrl(\"http://\" + model.getServiceAddress());\n-        if (model.getServiceAddress().matches(\"^192.*|^localhost.*\")) {\n-            log.info(\"Ignoring Socks5 proxy for local net address: {}\", model.getServiceAddress());\n+\n+        // localhost, LAN address, or *.local FQDN starts with http://, don't use Tor\n+        if (model.getServiceAddress().regionMatches(0, \"http:\", 0, 5)) {\n+            httpClient.setBaseUrl(model.getServiceAddress());\n             httpClient.setIgnoreSocks5Proxy(true);\n+        // any non-onion FQDN starts with https://, use Tor\n+        } if (model.getServiceAddress().regionMatches(0, \"https:\", 0, 6)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "378efcfa92f9ec5b226335312c8e4f3ce21b6bc1"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgzNjI0MjAw", "url": "https://github.com/bisq-network/bisq/pull/4492#pullrequestreview-483624200", "createdAt": "2020-09-07T15:13:27Z", "commit": {"oid": "378efcfa92f9ec5b226335312c8e4f3ce21b6bc1"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QxNToxMzoyN1rOHOCvWA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QxNToxMzoyN1rOHOCvWA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDQ4NzAwMA==", "bodyText": "should be else if", "url": "https://github.com/bisq-network/bisq/pull/4492#discussion_r484487000", "createdAt": "2020-09-07T15:13:27Z", "author": {"login": "jmacxx"}, "path": "core/src/main/java/bisq/core/trade/txproof/xmr/XmrTxProofRequest.java", "diffHunk": "@@ -163,10 +163,19 @@ public String toString() {\n         this.model = model;\n \n         httpClient = new XmrTxProofHttpClient(socks5ProxyProvider);\n-        httpClient.setBaseUrl(\"http://\" + model.getServiceAddress());\n-        if (model.getServiceAddress().matches(\"^192.*|^localhost.*\")) {\n-            log.info(\"Ignoring Socks5 proxy for local net address: {}\", model.getServiceAddress());\n+\n+        // localhost, LAN address, or *.local FQDN starts with http://, don't use Tor\n+        if (model.getServiceAddress().regionMatches(0, \"http:\", 0, 5)) {\n+            httpClient.setBaseUrl(model.getServiceAddress());\n             httpClient.setIgnoreSocks5Proxy(true);\n+        // any non-onion FQDN starts with https://, use Tor\n+        } if (model.getServiceAddress().regionMatches(0, \"https:\", 0, 6)) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDQ4NTcwMg=="}, "originalCommit": {"oid": "378efcfa92f9ec5b226335312c8e4f3ce21b6bc1"}, "originalPosition": 13}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b419337ec4fc5b4186120bf51705ec297eca3ff4", "author": {"user": {"login": "wiz", "name": null}}, "url": "https://github.com/bisq-network/bisq/commit/b419337ec4fc5b4186120bf51705ec297eca3ff4", "committedDate": "2020-09-07T15:13:16Z", "message": "Fix typo using \"replace\" instead of \"replaceAll\" in PreferencesView"}, "afterCommit": {"oid": "7e916e6bbd0e05a8f0b6caf63d467d20a303bd9e", "author": {"user": {"login": "wiz", "name": null}}, "url": "https://github.com/bisq-network/bisq/commit/7e916e6bbd0e05a8f0b6caf63d467d20a303bd9e", "committedDate": "2020-09-07T15:14:29Z", "message": "Use lots of regex to add http or https for XMR explorer API endpoint\n\n* If Tor *.onion hostname, use HTTP with Tor proxy\n* If 127.0.0.1 or localhost, use HTTP without Tor proxy\n* If LAN address or *.local FQDN, use HTTP without Tor proxy\n* If any other FQDN hostname, use HTTPS with Tor proxy"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7e916e6bbd0e05a8f0b6caf63d467d20a303bd9e", "author": {"user": {"login": "wiz", "name": null}}, "url": "https://github.com/bisq-network/bisq/commit/7e916e6bbd0e05a8f0b6caf63d467d20a303bd9e", "committedDate": "2020-09-07T15:14:29Z", "message": "Use lots of regex to add http or https for XMR explorer API endpoint\n\n* If Tor *.onion hostname, use HTTP with Tor proxy\n* If 127.0.0.1 or localhost, use HTTP without Tor proxy\n* If LAN address or *.local FQDN, use HTTP without Tor proxy\n* If any other FQDN hostname, use HTTPS with Tor proxy"}, "afterCommit": {"oid": "1c45a9c9c65610dd6f8e011090c383520a58512d", "author": {"user": {"login": "wiz", "name": null}}, "url": "https://github.com/bisq-network/bisq/commit/1c45a9c9c65610dd6f8e011090c383520a58512d", "committedDate": "2020-09-07T15:26:18Z", "message": "Use lots of regex to add http or https for XMR explorer API endpoint\n\n* If Tor *.onion hostname, use HTTP with Tor proxy\n* If 127.0.0.1 or localhost, use HTTP without Tor proxy\n* If LAN address or *.local FQDN, use HTTP without Tor proxy\n* If any other FQDN hostname, use HTTPS with Tor proxy"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0869f9a016d890511e14392deb99c791167208e9", "author": {"user": {"login": "wiz", "name": null}}, "url": "https://github.com/bisq-network/bisq/commit/0869f9a016d890511e14392deb99c791167208e9", "committedDate": "2020-09-07T15:26:56Z", "message": "Use lots of regex to add http or https for XMR explorer API endpoint\n\n* If Tor *.onion hostname, use HTTP with Tor proxy\n* If 127.0.0.1 or localhost, use HTTP without Tor proxy\n* If LAN address or *.local FQDN, use HTTP without Tor proxy\n* If any other FQDN hostname, use HTTPS with Tor proxy"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1c45a9c9c65610dd6f8e011090c383520a58512d", "author": {"user": {"login": "wiz", "name": null}}, "url": "https://github.com/bisq-network/bisq/commit/1c45a9c9c65610dd6f8e011090c383520a58512d", "committedDate": "2020-09-07T15:26:18Z", "message": "Use lots of regex to add http or https for XMR explorer API endpoint\n\n* If Tor *.onion hostname, use HTTP with Tor proxy\n* If 127.0.0.1 or localhost, use HTTP without Tor proxy\n* If LAN address or *.local FQDN, use HTTP without Tor proxy\n* If any other FQDN hostname, use HTTPS with Tor proxy"}, "afterCommit": {"oid": "0869f9a016d890511e14392deb99c791167208e9", "author": {"user": {"login": "wiz", "name": null}}, "url": "https://github.com/bisq-network/bisq/commit/0869f9a016d890511e14392deb99c791167208e9", "committedDate": "2020-09-07T15:26:56Z", "message": "Use lots of regex to add http or https for XMR explorer API endpoint\n\n* If Tor *.onion hostname, use HTTP with Tor proxy\n* If 127.0.0.1 or localhost, use HTTP without Tor proxy\n* If LAN address or *.local FQDN, use HTTP without Tor proxy\n* If any other FQDN hostname, use HTTPS with Tor proxy"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgzNjc1MDM1", "url": "https://github.com/bisq-network/bisq/pull/4492#pullrequestreview-483675035", "createdAt": "2020-09-07T17:33:01Z", "commit": {"oid": "0869f9a016d890511e14392deb99c791167208e9"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1461d95b0b622b2d20dacb0523b68345d595ffa8", "author": {"user": {"login": "wiz", "name": null}}, "url": "https://github.com/bisq-network/bisq/commit/1461d95b0b622b2d20dacb0523b68345d595ffa8", "committedDate": "2020-09-08T03:08:44Z", "message": "Tweak string for \"Service Addresses\" to \"Monero Explorer URLs\""}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5d83ca5c233826cd0811abceaedcc15a83d5573f", "author": {"user": {"login": "wiz", "name": null}}, "url": "https://github.com/bisq-network/bisq/commit/5d83ca5c233826cd0811abceaedcc15a83d5573f", "committedDate": "2020-09-08T03:09:31Z", "message": "Add friendly name for node77.monero.wiz.biz -> explorer.monero.wiz.biz"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a2c6f279a66248bfcd21a6574321ed2497963d69", "author": {"user": {"login": "wiz", "name": null}}, "url": "https://github.com/bisq-network/bisq/commit/a2c6f279a66248bfcd21a6574321ed2497963d69", "committedDate": "2020-09-08T11:19:20Z", "message": "Merge remote-tracking branch 'bisq/master' into use-https-for-xmr-explorer-api"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "245027bff4153830e1cac15064163b7445a8ff74", "author": {"user": {"login": "wiz", "name": null}}, "url": "https://github.com/bisq-network/bisq/commit/245027bff4153830e1cac15064163b7445a8ff74", "committedDate": "2020-09-08T11:20:30Z", "message": "Fix codacy complaining about missing space character"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "906805ec2e7a5f380fa351fa912124b9ee171e01", "author": {"user": {"login": "wiz", "name": null}}, "url": "https://github.com/bisq-network/bisq/commit/906805ec2e7a5f380fa351fa912124b9ee171e01", "committedDate": "2020-09-08T11:26:23Z", "message": "Rename Monero Explorer to friendlier hostname explorer.monero.wiz.biz"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg0MTE5NDI5", "url": "https://github.com/bisq-network/bisq/pull/4492#pullrequestreview-484119429", "createdAt": "2020-09-08T13:14:34Z", "commit": {"oid": "906805ec2e7a5f380fa351fa912124b9ee171e01"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg0Mjk3NjA4", "url": "https://github.com/bisq-network/bisq/pull/4492#pullrequestreview-484297608", "createdAt": "2020-09-08T16:15:22Z", "commit": {"oid": "906805ec2e7a5f380fa351fa912124b9ee171e01"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg0Mjk4Mjcz", "url": "https://github.com/bisq-network/bisq/pull/4492#pullrequestreview-484298273", "createdAt": "2020-09-08T16:16:09Z", "commit": {"oid": "906805ec2e7a5f380fa351fa912124b9ee171e01"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3173, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}