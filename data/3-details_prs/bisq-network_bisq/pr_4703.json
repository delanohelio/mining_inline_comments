{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA5NjUxNTgx", "number": 4703, "title": "Refactor CLI output formatting code & add trade formatter", "bodyText": "Move output column header specs to its own shared constants class.\nAdd new TradeFormat class for printing trade details in the console.\nPrint formatted trade in api trade tests -- to see output before using formatter in CLI (in next PR).\n\nPR #4701 should be reviewed & merged before this PR.", "createdAt": "2020-10-25T19:55:22Z", "url": "https://github.com/bisq-network/bisq/pull/4703", "merged": true, "mergeCommit": {"oid": "8c23017d62bd72781d82442d24482bc0f8870257"}, "closed": true, "closedAt": "2020-10-30T12:59:43Z", "author": {"login": "ghubstan"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdVYkYJAH2gAyNTA5NjUxNTgxOmNiNjVkZTZkMmUxNDk3ZWI4ZWFmODY0MDRmYzMyODU3MjlhYmE4N2M=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdXmXisAFqTUyMDYzOTY0OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "cb65de6d2e1497eb8eaf86404fc3285729aba87c", "author": {"user": {"login": "ghubstan", "name": "Stan"}}, "url": "https://github.com/bisq-network/bisq/commit/cb65de6d2e1497eb8eaf86404fc3285729aba87c", "committedDate": "2020-10-23T15:47:06Z", "message": "Block on tx-fee-request in core TakeOfferModel init\n\nAdded license comment too."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ab20225cd2d50003a8f7f45feca6227a2370a9fb", "author": {"user": {"login": "ghubstan", "name": "Stan"}}, "url": "https://github.com/bisq-network/bisq/commit/ab20225cd2d50003a8f7f45feca6227a2370a9fb", "committedDate": "2020-10-24T19:25:20Z", "message": "Add compiler warning suppression, remove comment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "63cf4369904855013ac5b8e37de43462c02e1551", "author": {"user": {"login": "ghubstan", "name": "Stan"}}, "url": "https://github.com/bisq-network/bisq/commit/63cf4369904855013ac5b8e37de43462c02e1551", "committedDate": "2020-10-24T19:27:03Z", "message": "Add fields to grpc TradeInfo proto & wrapper"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "296e4f98cb6231ed2226e72d95c1317981a9d008", "author": {"user": {"login": "ghubstan", "name": "Stan"}}, "url": "https://github.com/bisq-network/bisq/commit/296e4f98cb6231ed2226e72d95c1317981a9d008", "committedDate": "2020-10-24T20:26:10Z", "message": "Replace static TradeUtil with singleton TradeUtil\n\nThe API is going to need some desktop trade utilities, which should be\nshared between :desktop and :core.api."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ccd3c99f2e5b9cf276e6b70bceb34e73fb0a6858", "author": {"user": {"login": "ghubstan", "name": "Stan"}}, "url": "https://github.com/bisq-network/bisq/commit/ccd3c99f2e5b9cf276e6b70bceb34e73fb0a6858", "committedDate": "2020-10-24T20:45:01Z", "message": "Fix comment typos"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "24ba9215cd12f65605b23c2f5d53037258afd019", "author": {"user": {"login": "ghubstan", "name": "Stan"}}, "url": "https://github.com/bisq-network/bisq/commit/24ba9215cd12f65605b23c2f5d53037258afd019", "committedDate": "2020-10-25T13:41:19Z", "message": "Refactor PendingTradesViewModel methods -> TradeUtil & OfferUtil"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "36ad1379496d29bf26d6d3c90c4cc50b8c74b928", "author": {"user": {"login": "ghubstan", "name": "Stan"}}, "url": "https://github.com/bisq-network/bisq/commit/36ad1379496d29bf26d6d3c90c4cc50b8c74b928", "committedDate": "2020-10-25T13:54:40Z", "message": "Remove trailing spaces for codacy"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "95bcb1ef9c74c6fa48f946ebc29b9af55bd1ed70", "author": {"user": {"login": "ghubstan", "name": "Stan"}}, "url": "https://github.com/bisq-network/bisq/commit/95bcb1ef9c74c6fa48f946ebc29b9af55bd1ed70", "committedDate": "2020-10-25T14:27:30Z", "message": "Refactor PendingTradesDataModel methods -> TradeUtil\n\nScope of this refactoring is small;  more can be done, but the short\nterm goal is to share trade util logic with core api.\n\n- Removed unused method getCurrencyCode()\n- Made minor style changes\n- Removed duplicated code block"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bbd7a31c88907e7c29ce473e5a71603f976ace21", "author": {"user": {"login": "ghubstan", "name": "Stan"}}, "url": "https://github.com/bisq-network/bisq/commit/bbd7a31c88907e7c29ce473e5a71603f976ace21", "committedDate": "2020-10-25T14:38:03Z", "message": "Remove unused import"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "161dbade0d04dcd7439e3ed94929a4c4ce3fdab0", "author": {"user": {"login": "ghubstan", "name": "Stan"}}, "url": "https://github.com/bisq-network/bisq/commit/161dbade0d04dcd7439e3ed94929a4c4ce3fdab0", "committedDate": "2020-10-25T19:22:20Z", "message": "Add getRole(tradeId) to core api\n\nAPI users will need to see their role as maker/taker when looking at trade details.\n\n- Add getRole(trade) to TradeUtil.\n- Add getTradeRole(tradeId) to CoreApi, CoreTradesService.\n- Add role field to TradeInfo proto and its wrapper class."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3379376babab645af1f65cf595aca06768fd40c1", "author": {"user": {"login": "ghubstan", "name": "Stan"}}, "url": "https://github.com/bisq-network/bisq/commit/3379376babab645af1f65cf595aca06768fd40c1", "committedDate": "2020-10-25T19:50:22Z", "message": "Refactor CLI output formatting code & add trade formatter\n\n- Move output column header specs to its own shared constants class.\n\n- Add new TradeFormat class for printing trade details in the console.\n\n- Print formatted trade in api trade tests -- to see output before\n  using formatter in CLI (in next PR)."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d8bc26588c90d35436380143988e485b62a19e83", "author": {"user": {"login": "ghubstan", "name": "Stan"}}, "url": "https://github.com/bisq-network/bisq/commit/d8bc26588c90d35436380143988e485b62a19e83", "committedDate": "2020-10-25T19:52:45Z", "message": "Add license comment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "31435bba51162f2ba352a7c055f5af9106010e5f", "author": {"user": {"login": "ghubstan", "name": "Stan"}}, "url": "https://github.com/bisq-network/bisq/commit/31435bba51162f2ba352a7c055f5af9106010e5f", "committedDate": "2020-10-25T20:02:40Z", "message": "Move semicolon up from blank line"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIwNjM5NjQ5", "url": "https://github.com/bisq-network/bisq/pull/4703#pullrequestreview-520639649", "createdAt": "2020-10-30T12:56:01Z", "commit": {"oid": "31435bba51162f2ba352a7c055f5af9106010e5f"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQxMjo1NjowMlrOHrNzCA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQxMjo1NjowMlrOHrNzCA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTA3Njg3Mg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    // Some column values might be longer than header, so we need to calculated them.\n          \n          \n            \n                    // Some column values might be longer than header, so we need to calculate them.", "url": "https://github.com/bisq-network/bisq/pull/4703#discussion_r515076872", "createdAt": "2020-10-30T12:56:02Z", "author": {"login": "sqrrm"}, "path": "cli/src/main/java/bisq/cli/TradeFormat.java", "diffHunk": "@@ -0,0 +1,118 @@\n+/*\n+ * This file is part of Bisq.\n+ *\n+ * Bisq is free software: you can redistribute it and/or modify it\n+ * under the terms of the GNU Affero General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or (at\n+ * your option) any later version.\n+ *\n+ * Bisq is distributed in the hope that it will be useful, but WITHOUT\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+ * FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero General Public\n+ * License for more details.\n+ *\n+ * You should have received a copy of the GNU Affero General Public License\n+ * along with Bisq. If not, see <http://www.gnu.org/licenses/>.\n+ */\n+\n+package bisq.cli;\n+\n+import bisq.proto.grpc.TradeInfo;\n+\n+import com.google.common.annotations.VisibleForTesting;\n+\n+import java.util.function.Supplier;\n+\n+import static bisq.cli.ColumnHeaderConstants.*;\n+import static bisq.cli.CurrencyFormat.formatOfferPrice;\n+import static bisq.cli.CurrencyFormat.formatSatoshis;\n+import static com.google.common.base.Strings.padEnd;\n+\n+@VisibleForTesting\n+public class TradeFormat {\n+\n+    @VisibleForTesting\n+    public static String format(TradeInfo tradeInfo) {\n+        // Some column values might be longer than header, so we need to calculated them.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "31435bba51162f2ba352a7c055f5af9106010e5f"}, "originalPosition": 36}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3487, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}