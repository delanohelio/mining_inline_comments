{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc1NTg1MzU0", "number": 4446, "title": "Improve dispute views", "bodyText": "Add re-open dispute button to mediation views (not refund agent as\nthere it might be dangerous if he would close 2 times and pay out twice.\nIf a dispute was reopened and a message was sent afterwards the receiver\nwill auto-reopen the dispute as well and the UI shows the number\nindicator.\nAdd search field to traders dispute views.\nFix DisputeMsgEvents which was handling only legacy arbitration cases\nand now uses mediation and refund agent. Used to update state in case\nthe UI is not selected.\nAdd \"send private notification\" button for mediators and refund agents.\nAdd report button for mediators and refund agents\nGenerates report text of all disputes with more detailed information\nwhich should be used for reporting.\nAdd \"Dump text of all disputes\" button for getting a text representation\nof all disputes including the messages for mediators and refund agents.\nThis is not used for report but might be useful for search, etc.\nDo not show legacy arbitration tabs (for traders as well for\narbitrators) if no cases available.\nAdd 5 new enum entries for Reason for dispute:\nOPTION_TRADE\nSELLER_NOT_RESPONDING\nWRONG_SENDER_ACCOUNT,\nTRADE_ALREADY_SETTLED,\nPEER_WAS_LATE\nHide NO_REPLY, SCAM and PROTOCOL_VIOLATION in UI (still in code if we still\nneed it and re-activate them).\nFor testing there are several scenarios:\n\nmediator reopens and send message (reopen alone does not trigger anything on peers), traders should get it reopened as well\ntrader reopens and send message -> mediator get it reopened as well\nreopening need to be visible by updated number indicator\ntest with user has mediation screen activated, has other screen activated, is offline. In all cases the number indicator need to be correct and once the mediation screen is opened the dispute opened.\nif the payout distribution is different at second close the new distribution should be show at both traders. If they have the popup open it will not be updated, but at close/open it will be updated.\n\nImportant note to mediators:\nTry to avoid to change the payout distribution as there is a case where that would lead to a failed trade. If one user has already accepted the earlier payout distribution and the other user accept the updated one an exception is thrown. It would be more effort to support that as well so I left that out.\nIf both users accept the new distribution all goes well, but the mediator cannot know that.", "createdAt": "2020-08-28T18:49:18Z", "url": "https://github.com/bisq-network/bisq/pull/4446", "merged": true, "mergeCommit": {"oid": "79a26aa95df24d6b550610c6cd46f0233cda35bd"}, "closed": true, "closedAt": "2020-08-29T12:18:22Z", "author": {"login": "chimp1984"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdCqSDegH2gAyNDc1NTg1MzU0OjJjYzBlNDEzNGJjMzdlNzIxMGMxZWE2N2VlMjM0MGNlOWI0ODYyOWE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdDonW6AFqTQ3ODEyNDAwMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2cc0e4134bc37e7210c1ea67ee2340ce9b48629a", "author": {"user": {"login": "sqrrm", "name": null}}, "url": "https://github.com/bisq-network/bisq/commit/2cc0e4134bc37e7210c1ea67ee2340ce9b48629a", "committedDate": "2020-08-26T11:40:49Z", "message": "Reload dispute layout on reopen\n\nWhen a dispute is reopened it now shows the chat text entry field."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fa9f7991865e8a067cf34277356178debbff49e6", "author": {"user": {"login": "chimp1984", "name": null}}, "url": "https://github.com/bisq-network/bisq/commit/fa9f7991865e8a067cf34277356178debbff49e6", "committedDate": "2020-08-28T18:48:28Z", "message": "Improve dispute views\n\nAdd report button:\nGenerates report text of all disputes with more detailed information\nwhich should be used for reporting.\n\nAdd \"Dump text of all disputes\" button for getting a text representation\nof all disputes including the messages. This is not used for report but\nmight be useful for search, etc.\n\nDo not show legacy arbitration tabs (for traders as well for\narbitrators) if no cases available.\n\nAdd 3 new enum entries for Reason for dispute:\nOPTION_TRADE\nSELLER_NOT_RESPONDING\nWRONG_SENDER_ACCOUNT\nHide NO_REPLY and PROTOCOL_VIOLATION in UI (still in code if we still\nneed it and re-activate them)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a1488506859c7f9d5d6ea6da42905fc1387eaef8", "author": {"user": {"login": "chimp1984", "name": null}}, "url": "https://github.com/bisq-network/bisq/commit/a1488506859c7f9d5d6ea6da42905fc1387eaef8", "committedDate": "2020-08-28T19:11:59Z", "message": "Merge branch 'master_upstream' into reenable-chat-on-dispute-reopen"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "97ec45c1731afc1558475b50080058c3f5689d0a", "author": {"user": {"login": "chimp1984", "name": null}}, "url": "https://github.com/bisq-network/bisq/commit/97ec45c1731afc1558475b50080058c3f5689d0a", "committedDate": "2020-08-28T19:23:36Z", "message": "Merge branch 'reenable-chat-on-dispute-reopen' into add-report-button-for-dispute-views"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f52beadc476f2cb58ff9b4b4a051156cb70c3b7f", "author": {"user": {"login": "chimp1984", "name": null}}, "url": "https://github.com/bisq-network/bisq/commit/f52beadc476f2cb58ff9b4b4a051156cb70c3b7f", "committedDate": "2020-08-29T03:15:11Z", "message": "Improve dispute views\n\nAdd re-open dispute button to mediation views (not refund agent as\nthere it might be dangerous if he would close 2 times and pay out twice.\n\nIf a dispute was reopened and a message was sent afterwards the receiver\nwill auto-reopen the dispute as well and the UI shows the number\nindicator.\n\nAdd search field to traders dispute views.\n\nFix DisputeMsgEvents which was handling only legacy arbitration cases\nand now uses mediation and refund agent. Used to update state in case\nthe UI is not selected.\n\nAdd \"send private notification\" button for mediators and refund agents.\n\nAdd report button for mediators and refund agents\nGenerates report text of all disputes with more detailed information\nwhich should be used for reporting.\n\nAdd \"Dump text of all disputes\" button for getting a text representation\nof all disputes including the messages for mediators and refund agents.\nThis is not used for report but might be useful for search, etc.\n\nDo not show legacy arbitration tabs (for traders as well for\narbitrators) if no cases available.\n\nAdd 5 new enum entries for Reason for dispute:\nOPTION_TRADE\nSELLER_NOT_RESPONDING\nWRONG_SENDER_ACCOUNT,\nTRADE_ALREADY_SETTLED,\nPEER_WAS_LATE\n\nHide NO_REPLY, SCAM and PROTOCOL_VIOLATION in UI (still in code if we still\nneed it and re-activate them)."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b5c8bae1fae3883e42f63020ed35a706cbc2049e", "author": {"user": {"login": "chimp1984", "name": null}}, "url": "https://github.com/bisq-network/bisq/commit/b5c8bae1fae3883e42f63020ed35a706cbc2049e", "committedDate": "2020-08-29T03:16:04Z", "message": "Enable check for lock time on mainnet and add a 3 block tolerance."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc4MDk0MDkw", "url": "https://github.com/bisq-network/bisq/pull/4446#pullrequestreview-478094090", "createdAt": "2020-08-29T03:27:07Z", "commit": {"oid": "b5c8bae1fae3883e42f63020ed35a706cbc2049e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOVQwMzoyNzowN1rOHJYhvg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOVQwMzoyNzowN1rOHJYhvg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTYwMTA4Ng==", "bodyText": "Thanks, the TRADE_ALREADY_SETTLED is badly needed", "url": "https://github.com/bisq-network/bisq/pull/4446#discussion_r479601086", "createdAt": "2020-08-29T03:27:07Z", "author": {"login": "wiz"}, "path": "core/src/main/java/bisq/core/support/dispute/DisputeResult.java", "diffHunk": "@@ -56,10 +56,15 @@\n         OTHER,\n         BUG,\n         USABILITY,\n-        SCAM,\n-        PROTOCOL_VIOLATION,\n-        NO_REPLY,\n-        BANK_PROBLEMS\n+        SCAM,               // Not used anymore\n+        PROTOCOL_VIOLATION, // Not used anymore\n+        NO_REPLY,           // Not used anymore\n+        BANK_PROBLEMS,\n+        OPTION_TRADE,\n+        SELLER_NOT_RESPONDING,\n+        WRONG_SENDER_ACCOUNT,\n+        TRADE_ALREADY_SETTLED,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b5c8bae1fae3883e42f63020ed35a706cbc2049e"}, "originalPosition": 15}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc4MTExMjUy", "url": "https://github.com/bisq-network/bisq/pull/4446#pullrequestreview-478111252", "createdAt": "2020-08-29T08:35:21Z", "commit": {"oid": "b5c8bae1fae3883e42f63020ed35a706cbc2049e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc4MTI0MDAy", "url": "https://github.com/bisq-network/bisq/pull/4446#pullrequestreview-478124002", "createdAt": "2020-08-29T12:18:12Z", "commit": {"oid": "b5c8bae1fae3883e42f63020ed35a706cbc2049e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3149, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}