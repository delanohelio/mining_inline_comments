{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc2NTU5NDEx", "number": 3985, "title": "Monitoring install scripts", "bodyText": "Completes first part of #3916.\n\ncleans up the seednode install script\ninstall script for monitoring servers with collectd\ninstall script for the networksize metric\n\nI tested the script for general monitoring using a fresh ubuntu 18.04 LTS installation. I could not test the script for the networksize metric as thoroughly, as there is no install script for a price node available yet.", "createdAt": "2020-02-18T11:18:14Z", "url": "https://github.com/bisq-network/bisq/pull/3985", "merged": true, "mergeCommit": {"oid": "794302678d3aed2912812b6cdcf7423eebf31913"}, "closed": true, "closedAt": "2020-02-20T15:48:57Z", "author": {"login": "freimair"}, "timelineItems": {"totalCount": 16, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcFgTr1AH2gAyMzc2NTU5NDExOmM5NGRiNTI4NWJiN2U3ZDg3ZjdlMWY3ZDAwZTc1MGQ3ODMwN2QwYzA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcGNJKUAFqTM2MjAxNDEzNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c94db5285bb7e7d87f7e1f7d00e750d78307d0c0", "author": {"user": {"login": "freimair", "name": "Florian Reimair"}}, "url": "https://github.com/bisq-network/bisq/commit/c94db5285bb7e7d87f7e1f7d00e750d78307d0c0", "committedDate": "2020-02-18T11:34:10Z", "message": "Install script for collectd"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a0d76258abf08c90b00647b7bf452177c766ff73", "author": {"user": {"login": "freimair", "name": "Florian Reimair"}}, "url": "https://github.com/bisq-network/bisq/commit/a0d76258abf08c90b00647b7bf452177c766ff73", "committedDate": "2020-02-18T11:11:30Z", "message": "Install script for network size metric"}, "afterCommit": {"oid": "79eb3079effe83212532b3ed358fb372d344cd01", "author": {"user": {"login": "freimair", "name": "Florian Reimair"}}, "url": "https://github.com/bisq-network/bisq/commit/79eb3079effe83212532b3ed358fb372d344cd01", "committedDate": "2020-02-18T11:34:38Z", "message": "Install script for network size metric"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "79eb3079effe83212532b3ed358fb372d344cd01", "author": {"user": {"login": "freimair", "name": "Florian Reimair"}}, "url": "https://github.com/bisq-network/bisq/commit/79eb3079effe83212532b3ed358fb372d344cd01", "committedDate": "2020-02-18T11:34:38Z", "message": "Install script for network size metric"}, "afterCommit": {"oid": "3d4ba9a95be5bcdb12912e21d67a581cffe8571e", "author": {"user": {"login": "freimair", "name": "Florian Reimair"}}, "url": "https://github.com/bisq-network/bisq/commit/3d4ba9a95be5bcdb12912e21d67a581cffe8571e", "committedDate": "2020-02-18T11:53:43Z", "message": "Install script for network size metric"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3d4ba9a95be5bcdb12912e21d67a581cffe8571e", "author": {"user": {"login": "freimair", "name": "Florian Reimair"}}, "url": "https://github.com/bisq-network/bisq/commit/3d4ba9a95be5bcdb12912e21d67a581cffe8571e", "committedDate": "2020-02-18T11:53:43Z", "message": "Install script for network size metric"}, "afterCommit": {"oid": "69df120db2c994872b055cca6db840e4503a1945", "author": {"user": {"login": "freimair", "name": "Florian Reimair"}}, "url": "https://github.com/bisq-network/bisq/commit/69df120db2c994872b055cca6db840e4503a1945", "committedDate": "2020-02-18T12:06:43Z", "message": "Install script for network size metric"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "69df120db2c994872b055cca6db840e4503a1945", "author": {"user": {"login": "freimair", "name": "Florian Reimair"}}, "url": "https://github.com/bisq-network/bisq/commit/69df120db2c994872b055cca6db840e4503a1945", "committedDate": "2020-02-18T12:06:43Z", "message": "Install script for network size metric"}, "afterCommit": {"oid": "c090416c4c835d9d7c17140ddb7fd2f3d89f7bdb", "author": {"user": {"login": "freimair", "name": "Florian Reimair"}}, "url": "https://github.com/bisq-network/bisq/commit/c090416c4c835d9d7c17140ddb7fd2f3d89f7bdb", "committedDate": "2020-02-18T16:39:55Z", "message": "Install script for network size metric"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0d17bb6e82f2d88141d3223a3c43f29ec021f6c4", "author": {"user": {"login": "freimair", "name": "Florian Reimair"}}, "url": "https://github.com/bisq-network/bisq/commit/0d17bb6e82f2d88141d3223a3c43f29ec021f6c4", "committedDate": "2020-02-19T11:12:35Z", "message": "Install script for network size metric"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c090416c4c835d9d7c17140ddb7fd2f3d89f7bdb", "author": {"user": {"login": "freimair", "name": "Florian Reimair"}}, "url": "https://github.com/bisq-network/bisq/commit/c090416c4c835d9d7c17140ddb7fd2f3d89f7bdb", "committedDate": "2020-02-18T16:39:55Z", "message": "Install script for network size metric"}, "afterCommit": {"oid": "0d17bb6e82f2d88141d3223a3c43f29ec021f6c4", "author": {"user": {"login": "freimair", "name": "Florian Reimair"}}, "url": "https://github.com/bisq-network/bisq/commit/0d17bb6e82f2d88141d3223a3c43f29ec021f6c4", "committedDate": "2020-02-19T11:12:35Z", "message": "Install script for network size metric"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYxMTAwMDA2", "url": "https://github.com/bisq-network/bisq/pull/3985#pullrequestreview-361100006", "createdAt": "2020-02-19T13:17:25Z", "commit": {"oid": "0d17bb6e82f2d88141d3223a3c43f29ec021f6c4"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYxODIyODcz", "url": "https://github.com/bisq-network/bisq/pull/3985#pullrequestreview-361822873", "createdAt": "2020-02-20T11:20:18Z", "commit": {"oid": "0d17bb6e82f2d88141d3223a3c43f29ec021f6c4"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQxMToyMDoxOFrOFsPpFA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQxMToyNzo0MFrOFsP2YA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTkzNzk0MA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \n          \n          \n            \n            BISQ_REPO_URL=https://raw.githubusercontent.com/bisq-network/bisq\n          \n          \n            \n            BISQ_REPO_TAG=master", "url": "https://github.com/bisq-network/bisq/pull/3985#discussion_r381937940", "createdAt": "2020-02-20T11:20:18Z", "author": {"login": "wiz"}, "path": "monitor/install_collectd_debian.sh", "diffHunk": "@@ -0,0 +1,62 @@\n+#!/bin/sh\n+set -e\n+\n+echo \"[*] Bisq Server Monitoring installation script\"\n+\n+##### change paths if necessary for your system\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0d17bb6e82f2d88141d3223a3c43f29ec021f6c4"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTkzODEzNA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            sudo -H -i -u \"${ROOT_USER}\" DEBIAN_FRONTEND=noninteractive apt-get install -qq -y \"${ROOT_PKG}\"\n          \n          \n            \n            sudo -H -i -u \"${ROOT_USER}\" DEBIAN_FRONTEND=noninteractive apt-get install -qq -y ${ROOT_PKG}", "url": "https://github.com/bisq-network/bisq/pull/3985#discussion_r381938134", "createdAt": "2020-02-20T11:20:46Z", "author": {"login": "wiz"}, "path": "monitor/install_collectd_debian.sh", "diffHunk": "@@ -0,0 +1,62 @@\n+#!/bin/sh\n+set -e\n+\n+echo \"[*] Bisq Server Monitoring installation script\"\n+\n+##### change paths if necessary for your system\n+\n+ROOT_USER=root\n+ROOT_GROUP=root\n+ROOT_PKG=\"nginx collectd openssl\"\n+\n+SYSTEMD_ENV_HOME=/etc/default\n+\n+#####\n+\n+echo \"[*] Gathering information\"\n+read -p \"Please provide the onion address of your service (eg. 3f3cu2yw7u457ztq): \" onionaddress\n+\n+echo \"[*] Updating apt repo sources\"\n+sudo -H -i -u \"${ROOT_USER}\" DEBIAN_FRONTEND=noninteractive apt-get update -q\n+\n+echo \"[*] Upgrading OS packages\"\n+sudo -H -i -u \"${ROOT_USER}\" DEBIAN_FRONTEND=noninteractive apt-get upgrade -qq -y\n+\n+echo \"[*] Installing base packages\"\n+sudo -H -i -u \"${ROOT_USER}\" DEBIAN_FRONTEND=noninteractive apt-get install -qq -y \"${ROOT_PKG}\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0d17bb6e82f2d88141d3223a3c43f29ec021f6c4"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTkzODczMg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            curl -s https://raw.githubusercontent.com/bisq-network/bisq/master/monitor/nginx.conf > /tmp/nginx.conf\n          \n          \n            \n            curl -s \"${BISQ_REPO_URL}/${BISQ_REPO_TAG}/monitor/nginx.conf\" > /tmp/nginx.conf", "url": "https://github.com/bisq-network/bisq/pull/3985#discussion_r381938732", "createdAt": "2020-02-20T11:22:02Z", "author": {"login": "wiz"}, "path": "monitor/install_collectd_debian.sh", "diffHunk": "@@ -0,0 +1,62 @@\n+#!/bin/sh\n+set -e\n+\n+echo \"[*] Bisq Server Monitoring installation script\"\n+\n+##### change paths if necessary for your system\n+\n+ROOT_USER=root\n+ROOT_GROUP=root\n+ROOT_PKG=\"nginx collectd openssl\"\n+\n+SYSTEMD_ENV_HOME=/etc/default\n+\n+#####\n+\n+echo \"[*] Gathering information\"\n+read -p \"Please provide the onion address of your service (eg. 3f3cu2yw7u457ztq): \" onionaddress\n+\n+echo \"[*] Updating apt repo sources\"\n+sudo -H -i -u \"${ROOT_USER}\" DEBIAN_FRONTEND=noninteractive apt-get update -q\n+\n+echo \"[*] Upgrading OS packages\"\n+sudo -H -i -u \"${ROOT_USER}\" DEBIAN_FRONTEND=noninteractive apt-get upgrade -qq -y\n+\n+echo \"[*] Installing base packages\"\n+sudo -H -i -u \"${ROOT_USER}\" DEBIAN_FRONTEND=noninteractive apt-get install -qq -y \"${ROOT_PKG}\"\n+\n+echo \"[*] Preparing Bisq init script for monitoring\"\n+# remove stuff it it is there already\n+sudo -H -i -u \"${ROOT_USER}\" sed -i 's/ -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.host=127.0.0.1 -Dcom.sun.management.jmxremote.port=6969 -Dcom.sun.management.jmxremote.rmi.port=6969 -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.authenticate=false//' \"${SYSTEMD_ENV_HOME}/bisq.env\"\n+sudo -H -i -u \"${ROOT_USER}\" sed -i -e '/JAVA_OPTS/ s/\"$/ -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.local.only=true -Dcom.sun.management.jmxremote.port=6969 -Dcom.sun.management.jmxremote.rmi.port=6969 -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.authenticate=false\"/' \"${SYSTEMD_ENV_HOME}/bisq.env\"\n+\n+echo \"[*] Installing Nginx config\"\n+sudo -H -i -u \"${ROOT_USER}\" openssl req -x509 -nodes -newkey rsa:2048 -keyout /etc/nginx/cert.key -out /etc/nginx/cert.crt -subj=\"/O=Bisq/OU=Bisq Infrastructure/CN=$onionaddress\"\n+curl -s https://raw.githubusercontent.com/bisq-network/bisq/master/monitor/nginx.conf > /tmp/nginx.conf", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0d17bb6e82f2d88141d3223a3c43f29ec021f6c4"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTkzODk1OQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            curl -s https://raw.githubusercontent.com/bisq-network/bisq/master/monitor/collectd.conf > /tmp/collectd.conf\n          \n          \n            \n            curl -s \"${BISQ_REPO_URL}/${BISQ_REPO_TAG}/monitor/collectd.conf\" > /tmp/collectd.conf", "url": "https://github.com/bisq-network/bisq/pull/3985#discussion_r381938959", "createdAt": "2020-02-20T11:22:34Z", "author": {"login": "wiz"}, "path": "monitor/install_collectd_debian.sh", "diffHunk": "@@ -0,0 +1,62 @@\n+#!/bin/sh\n+set -e\n+\n+echo \"[*] Bisq Server Monitoring installation script\"\n+\n+##### change paths if necessary for your system\n+\n+ROOT_USER=root\n+ROOT_GROUP=root\n+ROOT_PKG=\"nginx collectd openssl\"\n+\n+SYSTEMD_ENV_HOME=/etc/default\n+\n+#####\n+\n+echo \"[*] Gathering information\"\n+read -p \"Please provide the onion address of your service (eg. 3f3cu2yw7u457ztq): \" onionaddress\n+\n+echo \"[*] Updating apt repo sources\"\n+sudo -H -i -u \"${ROOT_USER}\" DEBIAN_FRONTEND=noninteractive apt-get update -q\n+\n+echo \"[*] Upgrading OS packages\"\n+sudo -H -i -u \"${ROOT_USER}\" DEBIAN_FRONTEND=noninteractive apt-get upgrade -qq -y\n+\n+echo \"[*] Installing base packages\"\n+sudo -H -i -u \"${ROOT_USER}\" DEBIAN_FRONTEND=noninteractive apt-get install -qq -y \"${ROOT_PKG}\"\n+\n+echo \"[*] Preparing Bisq init script for monitoring\"\n+# remove stuff it it is there already\n+sudo -H -i -u \"${ROOT_USER}\" sed -i 's/ -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.host=127.0.0.1 -Dcom.sun.management.jmxremote.port=6969 -Dcom.sun.management.jmxremote.rmi.port=6969 -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.authenticate=false//' \"${SYSTEMD_ENV_HOME}/bisq.env\"\n+sudo -H -i -u \"${ROOT_USER}\" sed -i -e '/JAVA_OPTS/ s/\"$/ -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.local.only=true -Dcom.sun.management.jmxremote.port=6969 -Dcom.sun.management.jmxremote.rmi.port=6969 -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.authenticate=false\"/' \"${SYSTEMD_ENV_HOME}/bisq.env\"\n+\n+echo \"[*] Installing Nginx config\"\n+sudo -H -i -u \"${ROOT_USER}\" openssl req -x509 -nodes -newkey rsa:2048 -keyout /etc/nginx/cert.key -out /etc/nginx/cert.crt -subj=\"/O=Bisq/OU=Bisq Infrastructure/CN=$onionaddress\"\n+curl -s https://raw.githubusercontent.com/bisq-network/bisq/master/monitor/nginx.conf > /tmp/nginx.conf\n+sudo -H -i -u \"${ROOT_USER}\" install -c -o \"${ROOT_USER}\" -g \"${ROOT_GROUP}\" -m 644 /tmp/nginx.conf /etc/nginx/nginx.conf\n+\n+echo \"[*] Installing collectd config\"\n+curl -s https://raw.githubusercontent.com/bisq-network/bisq/master/monitor/collectd.conf > /tmp/collectd.conf", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0d17bb6e82f2d88141d3223a3c43f29ec021f6c4"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTk0MTA3Mw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            ROOT_GROUP=root\n          \n          \n            \n            ROOT_GROUP=root\n          \n          \n            \n            ROOT_HOME=~root", "url": "https://github.com/bisq-network/bisq/pull/3985#discussion_r381941073", "createdAt": "2020-02-20T11:27:02Z", "author": {"login": "wiz"}, "path": "monitor/install_collectd_debian.sh", "diffHunk": "@@ -0,0 +1,62 @@\n+#!/bin/sh\n+set -e\n+\n+echo \"[*] Bisq Server Monitoring installation script\"\n+\n+##### change paths if necessary for your system\n+\n+ROOT_USER=root\n+ROOT_GROUP=root", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0d17bb6e82f2d88141d3223a3c43f29ec021f6c4"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTk0MTM0NA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \n          \n          \n            \n            \n          \n          \n            \n            echo \"[*] Seeding entropy from /dev/urandom\"\n          \n          \n            \n            sudo -H -i -u \"${ROOT_USER}\" /bin/sh -c \"head -1500 /dev/urandom > ${ROOT_HOME}/.rnd\"", "url": "https://github.com/bisq-network/bisq/pull/3985#discussion_r381941344", "createdAt": "2020-02-20T11:27:40Z", "author": {"login": "wiz"}, "path": "monitor/install_collectd_debian.sh", "diffHunk": "@@ -0,0 +1,62 @@\n+#!/bin/sh\n+set -e\n+\n+echo \"[*] Bisq Server Monitoring installation script\"\n+\n+##### change paths if necessary for your system\n+\n+ROOT_USER=root\n+ROOT_GROUP=root\n+ROOT_PKG=\"nginx collectd openssl\"\n+\n+SYSTEMD_ENV_HOME=/etc/default\n+\n+#####\n+\n+echo \"[*] Gathering information\"\n+read -p \"Please provide the onion address of your service (eg. 3f3cu2yw7u457ztq): \" onionaddress\n+\n+echo \"[*] Updating apt repo sources\"\n+sudo -H -i -u \"${ROOT_USER}\" DEBIAN_FRONTEND=noninteractive apt-get update -q\n+\n+echo \"[*] Upgrading OS packages\"\n+sudo -H -i -u \"${ROOT_USER}\" DEBIAN_FRONTEND=noninteractive apt-get upgrade -qq -y\n+\n+echo \"[*] Installing base packages\"\n+sudo -H -i -u \"${ROOT_USER}\" DEBIAN_FRONTEND=noninteractive apt-get install -qq -y \"${ROOT_PKG}\"\n+\n+echo \"[*] Preparing Bisq init script for monitoring\"\n+# remove stuff it it is there already\n+sudo -H -i -u \"${ROOT_USER}\" sed -i 's/ -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.host=127.0.0.1 -Dcom.sun.management.jmxremote.port=6969 -Dcom.sun.management.jmxremote.rmi.port=6969 -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.authenticate=false//' \"${SYSTEMD_ENV_HOME}/bisq.env\"\n+sudo -H -i -u \"${ROOT_USER}\" sed -i -e '/JAVA_OPTS/ s/\"$/ -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.local.only=true -Dcom.sun.management.jmxremote.port=6969 -Dcom.sun.management.jmxremote.rmi.port=6969 -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.authenticate=false\"/' \"${SYSTEMD_ENV_HOME}/bisq.env\"\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0d17bb6e82f2d88141d3223a3c43f29ec021f6c4"}, "originalPosition": 32}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYxODMyODA1", "url": "https://github.com/bisq-network/bisq/pull/3985#pullrequestreview-361832805", "createdAt": "2020-02-20T11:38:08Z", "commit": {"oid": "0d17bb6e82f2d88141d3223a3c43f29ec021f6c4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQxMTozODowOVrOFsQIFA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQxMTozODowOVrOFsQIFA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTk0NTg3Ng==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            sudo -H -i -u \"${ROOT_USER}\" sed -i 's/ -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.host=127.0.0.1 -Dcom.sun.management.jmxremote.port=6969 -Dcom.sun.management.jmxremote.rmi.port=6969 -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.authenticate=false//' \"${SYSTEMD_ENV_HOME}/bisq.env\"\n          \n          \n            \n            sudo -H -i -u \"${ROOT_USER}\" sed -i -e 's/ -Dcom.sun.management.jmxremote //g' -e 's/-Dcom.sun.management.jmxremote.local.only=true//g' -e 's/ -Dcom.sun.management.jmxremote.host=127.0.0.1//g' -e 's/ -Dcom.sun.management.jmxremote.port=6969//g' -e 's/ -Dcom.sun.management.jmxremote.rmi.port=6969//g' -e 's/ -Dcom.sun.management.jmxremote.ssl=false//g' -e 's/ -Dcom.sun.management.jmxremote.authenticate=false//g' \"${SYSTEMD_ENV_HOME}/bisq.env\"", "url": "https://github.com/bisq-network/bisq/pull/3985#discussion_r381945876", "createdAt": "2020-02-20T11:38:09Z", "author": {"login": "wiz"}, "path": "monitor/install_collectd_debian.sh", "diffHunk": "@@ -0,0 +1,62 @@\n+#!/bin/sh\n+set -e\n+\n+echo \"[*] Bisq Server Monitoring installation script\"\n+\n+##### change paths if necessary for your system\n+\n+ROOT_USER=root\n+ROOT_GROUP=root\n+ROOT_PKG=\"nginx collectd openssl\"\n+\n+SYSTEMD_ENV_HOME=/etc/default\n+\n+#####\n+\n+echo \"[*] Gathering information\"\n+read -p \"Please provide the onion address of your service (eg. 3f3cu2yw7u457ztq): \" onionaddress\n+\n+echo \"[*] Updating apt repo sources\"\n+sudo -H -i -u \"${ROOT_USER}\" DEBIAN_FRONTEND=noninteractive apt-get update -q\n+\n+echo \"[*] Upgrading OS packages\"\n+sudo -H -i -u \"${ROOT_USER}\" DEBIAN_FRONTEND=noninteractive apt-get upgrade -qq -y\n+\n+echo \"[*] Installing base packages\"\n+sudo -H -i -u \"${ROOT_USER}\" DEBIAN_FRONTEND=noninteractive apt-get install -qq -y \"${ROOT_PKG}\"\n+\n+echo \"[*] Preparing Bisq init script for monitoring\"\n+# remove stuff it it is there already\n+sudo -H -i -u \"${ROOT_USER}\" sed -i 's/ -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.host=127.0.0.1 -Dcom.sun.management.jmxremote.port=6969 -Dcom.sun.management.jmxremote.rmi.port=6969 -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.authenticate=false//' \"${SYSTEMD_ENV_HOME}/bisq.env\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0d17bb6e82f2d88141d3223a3c43f29ec021f6c4"}, "originalPosition": 30}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d41a4d220dc378cdb393a4737b456df5e8d92ab3", "author": {"user": {"login": "freimair", "name": "Florian Reimair"}}, "url": "https://github.com/bisq-network/bisq/commit/d41a4d220dc378cdb393a4737b456df5e8d92ab3", "committedDate": "2020-02-20T11:52:57Z", "message": "Apply suggestions from code review\n\nCo-Authored-By: wiz <j@wiz.biz>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "257e9bb71fcad4a41744904a9ff05b93736e5b9b", "author": {"user": {"login": "freimair", "name": "Florian Reimair"}}, "url": "https://github.com/bisq-network/bisq/commit/257e9bb71fcad4a41744904a9ff05b93736e5b9b", "committedDate": "2020-02-20T12:20:59Z", "message": "Update monitor/install_collectd_debian.sh\n\nCo-Authored-By: wiz <j@wiz.biz>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYxODkyMDgy", "url": "https://github.com/bisq-network/bisq/pull/3985#pullrequestreview-361892082", "createdAt": "2020-02-20T13:19:03Z", "commit": {"oid": "257e9bb71fcad4a41744904a9ff05b93736e5b9b"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQxMzoxOTowM1rOFsS8PQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQxMzoyMzoyMlrOFsTE3A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTk5MTk5Nw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            #!/bin/sh\n          \n          \n            \n            #!/bin/bash", "url": "https://github.com/bisq-network/bisq/pull/3985#discussion_r381991997", "createdAt": "2020-02-20T13:19:03Z", "author": {"login": "wiz"}, "path": "monitor/install_collectd_debian.sh", "diffHunk": "@@ -0,0 +1,66 @@\n+#!/bin/sh", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "257e9bb71fcad4a41744904a9ff05b93736e5b9b"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTk5MjExNw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            ROOT_PKG=\"nginx collectd openssl\"\n          \n          \n            \n            ROOT_PKG=(nginx collectd openssl)", "url": "https://github.com/bisq-network/bisq/pull/3985#discussion_r381992117", "createdAt": "2020-02-20T13:19:19Z", "author": {"login": "wiz"}, "path": "monitor/install_collectd_debian.sh", "diffHunk": "@@ -0,0 +1,66 @@\n+#!/bin/sh\n+set -e\n+\n+echo \"[*] Bisq Server Monitoring installation script\"\n+\n+##### change paths if necessary for your system\n+BISQ_REPO_URL=https://raw.githubusercontent.com/bisq-network/bisq\n+BISQ_REPO_TAG=master\n+ROOT_USER=root\n+ROOT_GROUP=root\n+ROOT_HOME=~root\n+ROOT_PKG=\"nginx collectd openssl\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "257e9bb71fcad4a41744904a9ff05b93736e5b9b"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTk5MjIzNQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            sudo -H -i -u \"${ROOT_USER}\" DEBIAN_FRONTEND=noninteractive apt-get install -qq -y ${ROOT_PKG}\n          \n          \n            \n            sudo -H -i -u \"${ROOT_USER}\" DEBIAN_FRONTEND=noninteractive apt-get install -qq -y ${ROOT_PKG[@]}", "url": "https://github.com/bisq-network/bisq/pull/3985#discussion_r381992235", "createdAt": "2020-02-20T13:19:34Z", "author": {"login": "wiz"}, "path": "monitor/install_collectd_debian.sh", "diffHunk": "@@ -0,0 +1,66 @@\n+#!/bin/sh\n+set -e\n+\n+echo \"[*] Bisq Server Monitoring installation script\"\n+\n+##### change paths if necessary for your system\n+BISQ_REPO_URL=https://raw.githubusercontent.com/bisq-network/bisq\n+BISQ_REPO_TAG=master\n+ROOT_USER=root\n+ROOT_GROUP=root\n+ROOT_HOME=~root\n+ROOT_PKG=\"nginx collectd openssl\"\n+\n+SYSTEMD_ENV_HOME=/etc/default\n+\n+#####\n+\n+echo \"[*] Gathering information\"\n+read -p \"Please provide the onion address of your service (eg. 3f3cu2yw7u457ztq): \" onionaddress\n+\n+echo \"[*] Updating apt repo sources\"\n+sudo -H -i -u \"${ROOT_USER}\" DEBIAN_FRONTEND=noninteractive apt-get update -q\n+\n+echo \"[*] Upgrading OS packages\"\n+sudo -H -i -u \"${ROOT_USER}\" DEBIAN_FRONTEND=noninteractive apt-get upgrade -qq -y\n+\n+echo \"[*] Installing base packages\"\n+sudo -H -i -u \"${ROOT_USER}\" DEBIAN_FRONTEND=noninteractive apt-get install -qq -y ${ROOT_PKG}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "257e9bb71fcad4a41744904a9ff05b93736e5b9b"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTk5NDIwNA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            sudo -H -i -u \"${ROOT_USER}\" sed -i -e 's/ -Dcom.sun.management.jmxremote //g' -e 's/-Dcom.sun.management.jmxremote.local.only=true//g' -e 's/ -Dcom.sun.management.jmxremote.host=127.0.0.1//g' -e 's/ -Dcom.sun.management.jmxremote.port=6969//g' -e 's/ -Dcom.sun.management.jmxremote.rmi.port=6969//g' -e 's/ -Dcom.sun.management.jmxremote.ssl=false//g' -e 's/ -Dcom.sun.management.jmxremote.authenticate=false//g' \"${SYSTEMD_ENV_HOME}/bisq.env\"\n          \n          \n            \n            sudo -H -i -u \"${ROOT_USER}\" sed -i -e 's/-Dcom.sun.management.jmxremote //g' -e 's/-Dcom.sun.management.jmxremote.local.only=true//g' -e 's/ -Dcom.sun.management.jmxremote.host=127.0.0.1//g' -e 's/ -Dcom.sun.management.jmxremote.port=6969//g' -e 's/ -Dcom.sun.management.jmxremote.rmi.port=6969//g' -e 's/ -Dcom.sun.management.jmxremote.ssl=false//g' -e 's/ -Dcom.sun.management.jmxremote.authenticate=false//g' \"${SYSTEMD_ENV_HOME}/bisq.env\"", "url": "https://github.com/bisq-network/bisq/pull/3985#discussion_r381994204", "createdAt": "2020-02-20T13:23:22Z", "author": {"login": "wiz"}, "path": "monitor/install_collectd_debian.sh", "diffHunk": "@@ -0,0 +1,66 @@\n+#!/bin/sh\n+set -e\n+\n+echo \"[*] Bisq Server Monitoring installation script\"\n+\n+##### change paths if necessary for your system\n+BISQ_REPO_URL=https://raw.githubusercontent.com/bisq-network/bisq\n+BISQ_REPO_TAG=master\n+ROOT_USER=root\n+ROOT_GROUP=root\n+ROOT_HOME=~root\n+ROOT_PKG=\"nginx collectd openssl\"\n+\n+SYSTEMD_ENV_HOME=/etc/default\n+\n+#####\n+\n+echo \"[*] Gathering information\"\n+read -p \"Please provide the onion address of your service (eg. 3f3cu2yw7u457ztq): \" onionaddress\n+\n+echo \"[*] Updating apt repo sources\"\n+sudo -H -i -u \"${ROOT_USER}\" DEBIAN_FRONTEND=noninteractive apt-get update -q\n+\n+echo \"[*] Upgrading OS packages\"\n+sudo -H -i -u \"${ROOT_USER}\" DEBIAN_FRONTEND=noninteractive apt-get upgrade -qq -y\n+\n+echo \"[*] Installing base packages\"\n+sudo -H -i -u \"${ROOT_USER}\" DEBIAN_FRONTEND=noninteractive apt-get install -qq -y ${ROOT_PKG}\n+\n+echo \"[*] Preparing Bisq init script for monitoring\"\n+# remove stuff it it is there already\n+sudo -H -i -u \"${ROOT_USER}\" sed -i -e 's/ -Dcom.sun.management.jmxremote //g' -e 's/-Dcom.sun.management.jmxremote.local.only=true//g' -e 's/ -Dcom.sun.management.jmxremote.host=127.0.0.1//g' -e 's/ -Dcom.sun.management.jmxremote.port=6969//g' -e 's/ -Dcom.sun.management.jmxremote.rmi.port=6969//g' -e 's/ -Dcom.sun.management.jmxremote.ssl=false//g' -e 's/ -Dcom.sun.management.jmxremote.authenticate=false//g' \"${SYSTEMD_ENV_HOME}/bisq.env\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "257e9bb71fcad4a41744904a9ff05b93736e5b9b"}, "originalPosition": 32}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1c83d09649b7033387cbf9040f52119a55bdc97f", "author": {"user": {"login": "freimair", "name": "Florian Reimair"}}, "url": "https://github.com/bisq-network/bisq/commit/1c83d09649b7033387cbf9040f52119a55bdc97f", "committedDate": "2020-02-20T13:30:14Z", "message": "Apply suggestions from code review\n\nCo-Authored-By: wiz <j@wiz.biz>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYxOTIxNTIy", "url": "https://github.com/bisq-network/bisq/pull/3985#pullrequestreview-361921522", "createdAt": "2020-02-20T14:00:20Z", "commit": {"oid": "1c83d09649b7033387cbf9040f52119a55bdc97f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYyMDE0MTM2", "url": "https://github.com/bisq-network/bisq/pull/3985#pullrequestreview-362014136", "createdAt": "2020-02-20T15:48:24Z", "commit": {"oid": "1c83d09649b7033387cbf9040f52119a55bdc97f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3326, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}