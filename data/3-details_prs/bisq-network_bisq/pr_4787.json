{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIwMTU2NjMx", "number": 4787, "title": "Various monitor improvements", "bodyText": "The only change which is not only affecting Seed nodes and monitor is the reduction of TTL of mailbox msg from 15 days to 7 days.\nThis code is used by seed nodes and monitor over the past days/weeks.", "createdAt": "2020-11-12T21:03:34Z", "url": "https://github.com/bisq-network/bisq/pull/4787", "merged": true, "mergeCommit": {"oid": "457257b72ad810e911b15f2ed14959629f338575"}, "closed": true, "closedAt": "2020-11-18T10:01:02Z", "author": {"login": "chimp1984"}, "timelineItems": {"totalCount": 29, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdb5BCpgH2gAyNTIwMTU2NjMxOjVjN2FhODBhZmFhZjI0NGMwNzU3ODUyZDgzMDU4OTBhOTFkYjU5ODY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABddqVWHAFqTUzMzIyODQ2NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "5c7aa80afaaf244c0757852d8305890a91db5986", "author": {"user": {"login": "chimp1984", "name": null}}, "url": "https://github.com/bisq-network/bisq/commit/5c7aa80afaaf244c0757852d8305890a91db5986", "committedDate": "2020-11-12T20:58:55Z", "message": "Add deviation to persistent warnings/alerts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "850f73aad5a1bf0935ced160c0c61be581413a17", "author": {"user": {"login": "chimp1984", "name": null}}, "url": "https://github.com/bisq-network/bisq/commit/850f73aad5a1bf0935ced160c0c61be581413a17", "committedDate": "2020-11-12T20:58:55Z", "message": "Fix formatting"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4d17e986a2246badcfe151c794ba0d2e67a50672", "author": {"user": {"login": "chimp1984", "name": null}}, "url": "https://github.com/bisq-network/bisq/commit/4d17e986a2246badcfe151c794ba0d2e67a50672", "committedDate": "2020-11-12T20:58:55Z", "message": "Update COMMIT_HASH to 04440f95 (after merged master)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ac955e1875ae35d0ece0fd43a7ad033973597b21", "author": {"user": {"login": "chimp1984", "name": null}}, "url": "https://github.com/bisq-network/bisq/commit/ac955e1875ae35d0ece0fd43a7ad033973597b21", "committedDate": "2020-11-12T20:58:55Z", "message": "Reduce TTL for ack and mailbox messages"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b09ebdeeba35fa7870d5f61f2ff6e08d8f538ab7", "author": {"user": {"login": "chimp1984", "name": null}}, "url": "https://github.com/bisq-network/bisq/commit/b09ebdeeba35fa7870d5f61f2ff6e08d8f538ab7", "committedDate": "2020-11-12T20:58:56Z", "message": "Update COMMIT_HASH to fd2a04a2"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "012c54cf0241f627b7324216b69dc1fe6f131be6", "author": {"user": {"login": "chimp1984", "name": null}}, "url": "https://github.com/bisq-network/bisq/commit/012c54cf0241f627b7324216b69dc1fe6f131be6", "committedDate": "2020-11-12T20:58:56Z", "message": "Fix log at startup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f10d2318f308cb8221d99a31acf6d8f57273e292", "author": {"user": {"login": "chimp1984", "name": null}}, "url": "https://github.com/bisq-network/bisq/commit/f10d2318f308cb8221d99a31acf6d8f57273e292", "committedDate": "2020-11-12T20:58:56Z", "message": "Log when we remove expired entries"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4bececeb4ca24e7722f1235d0ea95b5418ef0283", "author": {"user": {"login": "chimp1984", "name": null}}, "url": "https://github.com/bisq-network/bisq/commit/4bececeb4ca24e7722f1235d0ea95b5418ef0283", "committedDate": "2020-11-12T20:58:56Z", "message": "Increase MAX_PERMITTED_MESSAGE_SIZE to 15 MB, increase SOCKET_TIMEOUT to 6 min"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b002c93d784e6fb3cd30c11aa08e46fcf69ff23d", "author": {"user": {"login": "chimp1984", "name": null}}, "url": "https://github.com/bisq-network/bisq/commit/b002c93d784e6fb3cd30c11aa08e46fcf69ff23d", "committedDate": "2020-11-12T20:58:56Z", "message": "Increase SOCKET_TIMEOUT to 6 min"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a1c84741f3b32b0de56734d0506cf9c131c0971e", "author": {"user": {"login": "chimp1984", "name": null}}, "url": "https://github.com/bisq-network/bisq/commit/a1c84741f3b32b0de56734d0506cf9c131c0971e", "committedDate": "2020-11-12T20:58:56Z", "message": "Add comments, revert TTL change at AckMessage as it has no effect anyway"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "33e378accdbd575ef6352c076a534c84d2d3cb83", "author": {"user": {"login": "chimp1984", "name": null}}, "url": "https://github.com/bisq-network/bisq/commit/33e378accdbd575ef6352c076a534c84d2d3cb83", "committedDate": "2020-11-12T20:58:56Z", "message": "Update COMMIT_HASH to fec8f6e3"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "16880b2f6abb72d8cd08ff171598a1434815abdb", "author": {"user": {"login": "chimp1984", "name": null}}, "url": "https://github.com/bisq-network/bisq/commit/16880b2f6abb72d8cd08ff171598a1434815abdb", "committedDate": "2020-11-12T20:58:56Z", "message": "Change deviation limits for OfferPayload"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "86a853bfb996c2377a346e161b522d4a26edb195", "author": {"user": {"login": "chimp1984", "name": null}}, "url": "https://github.com/bisq-network/bisq/commit/86a853bfb996c2377a346e161b522d4a26edb195", "committedDate": "2020-11-12T20:58:56Z", "message": "Set response time only in non error case"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a0565425df6175e2e95d1e705596fb05f3327670", "author": {"user": {"login": "chimp1984", "name": null}}, "url": "https://github.com/bisq-network/bisq/commit/a0565425df6175e2e95d1e705596fb05f3327670", "committedDate": "2020-11-12T20:58:57Z", "message": "Add historical data for error msg\nRename 'Number of responses' to 'Number of requests'\nRename timeout err msg\n\n@jmacxx: See comment at `getErrorMsgLine`... If you need those historical\nerror msg data in the json as well we need to refactor a bit more..."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1eca9dff4b6ea471f1430aac7fbba9068b1435b3", "author": {"user": {"login": "chimp1984", "name": null}}, "url": "https://github.com/bisq-network/bisq/commit/1eca9dff4b6ea471f1430aac7fbba9068b1435b3", "committedDate": "2020-11-12T20:58:57Z", "message": "Use dash for empty filteredSeedNodes value"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5e4156910a893da39f718ce482dbcd9337cded38", "author": {"user": {"login": "chimp1984", "name": null}}, "url": "https://github.com/bisq-network/bisq/commit/5e4156910a893da39f718ce482dbcd9337cded38", "committedDate": "2020-11-12T20:58:57Z", "message": "Add hasError util method\nReformattings, cleanups"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "04ab5077830864e546393b325bec56e0c84d7bef", "author": {"user": {"login": "chimp1984", "name": null}}, "url": "https://github.com/bisq-network/bisq/commit/04ab5077830864e546393b325bec56e0c84d7bef", "committedDate": "2020-11-12T20:58:57Z", "message": "Update COMMIT_HASH to 627888f0"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "86a204528408a81e05cb2989ff2d93007bd5b976", "author": {"user": {"login": "chimp1984", "name": null}}, "url": "https://github.com/bisq-network/bisq/commit/86a204528408a81e05cb2989ff2d93007bd5b976", "committedDate": "2020-11-12T20:58:57Z", "message": "Fix wrong kb display"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "69802e232ddfbb3bb371a9f1172cc9bc148787cf", "author": {"user": {"login": "chimp1984", "name": null}}, "url": "https://github.com/bisq-network/bisq/commit/69802e232ddfbb3bb371a9f1172cc9bc148787cf", "committedDate": "2020-11-12T20:58:57Z", "message": "Reduce timeout"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bb095d413ca8e81138eb69c65594aa002249e3f7", "author": {"user": {"login": "chimp1984", "name": null}}, "url": "https://github.com/bisq-network/bisq/commit/bb095d413ca8e81138eb69c65594aa002249e3f7", "committedDate": "2020-11-12T20:58:57Z", "message": "Increase timout to 90 sec"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6a2583d5fa20c3a8090785ba988d0b3ec68fda9b", "author": {"user": {"login": "chimp1984", "name": null}}, "url": "https://github.com/bisq-network/bisq/commit/6a2583d5fa20c3a8090785ba988d0b3ec68fda9b", "committedDate": "2020-11-12T20:58:57Z", "message": "Decrease deviationTolerance for numAllConnectionsLostEvents"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1b7c1ce49a60f2c3796fdda98ef1caf3dc142660", "author": {"user": {"login": "chimp1984", "name": null}}, "url": "https://github.com/bisq-network/bisq/commit/1b7c1ce49a60f2c3796fdda98ef1caf3dc142660", "committedDate": "2020-11-12T20:58:57Z", "message": "Only reset numAllConnectionsLostEvents if we have nodes connected"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2486bd512fdf12fb6af30a0eab59e7ce960d38a8", "author": {"user": {"login": "chimp1984", "name": null}}, "url": "https://github.com/bisq-network/bisq/commit/2486bd512fdf12fb6af30a0eab59e7ce960d38a8", "committedDate": "2020-11-12T20:58:58Z", "message": "Shut down if more then 1 all connections lost events"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8bc78c852b9a94021409d43f0fce296c83849387", "author": {"user": {"login": "chimp1984", "name": null}}, "url": "https://github.com/bisq-network/bisq/commit/8bc78c852b9a94021409d43f0fce296c83849387", "committedDate": "2020-11-12T20:58:58Z", "message": "Cleanup tor dir if all connections lost"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2b807769d4590389bf9ca5bfb4a130deaebd7d5a", "author": {"user": {"login": "chimp1984", "name": null}}, "url": "https://github.com/bisq-network/bisq/commit/2b807769d4590389bf9ca5bfb4a130deaebd7d5a", "committedDate": "2020-11-12T20:58:58Z", "message": "Update commit hash to 7f83d1b3"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ee5fca95324ebd125193a787d70e1c2c1cd1eb75", "author": {"user": {"login": "chimp1984", "name": null}}, "url": "https://github.com/bisq-network/bisq/commit/ee5fca95324ebd125193a787d70e1c2c1cd1eb75", "committedDate": "2020-11-12T21:01:30Z", "message": "Revert timeout changes and MAX_PERMITTED_MESSAGE_SIZE change"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMwODI2ODc4", "url": "https://github.com/bisq-network/bisq/pull/4787#pullrequestreview-530826878", "createdAt": "2020-11-15T19:21:43Z", "commit": {"oid": "5e4156910a893da39f718ce482dbcd9337cded38"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNVQxOToyMTo0M1rOHziSLg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNVQxOToyMTo0M1rOHziSLg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzgwMTEzNA==", "bodyText": "I almost left a comment regarding a little precedence confusion, re:\n( System.currentTimeMillis() - requestInfo1.getRequestStartTime()  ) > TimeUnit.HOURS.toMillis(24)\n\nThe precedence rules work, but now it's clear from the change below.", "url": "https://github.com/bisq-network/bisq/pull/4787#discussion_r523801134", "createdAt": "2020-11-15T19:21:43Z", "author": {"login": "ghubstan"}, "path": "inventory/src/main/java/bisq/inventory/InventoryWebServer.java", "diffHunk": "@@ -484,14 +487,12 @@ private String getErrorMsgLine(NodeAddress seedNode,\n                 RequestInfo requestInfo1 = requestInfoList.get(i);\n \n                 // We ignore old errors as at startup timeouts are expected and each node restarts once a day\n-                if (requestInfo1.getRequestStartTime() > 0 &&\n-                        System.currentTimeMillis() - requestInfo1.getRequestStartTime() > TimeUnit.HOURS.toMillis(24)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5e4156910a893da39f718ce482dbcd9337cded38"}, "originalPosition": 51}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ccfcc351f4b25cfd4989cd753363e252d08ddaaa", "author": {"user": {"login": "chimp1984", "name": null}}, "url": "https://github.com/bisq-network/bisq/commit/ccfcc351f4b25cfd4989cd753363e252d08ddaaa", "committedDate": "2020-11-18T01:17:44Z", "message": "Clean tor dir at startup"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMzMjI4NDY1", "url": "https://github.com/bisq-network/bisq/pull/4787#pullrequestreview-533228465", "createdAt": "2020-11-18T09:00:22Z", "commit": {"oid": "ccfcc351f4b25cfd4989cd753363e252d08ddaaa"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3529, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}