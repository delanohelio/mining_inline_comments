{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM5MDU4NDIx", "number": 4943, "title": "Add tx broadcast to mempool explorer api", "bodyText": "Send raw tx to mempool space explorer nodes.\nUse https://mempool.space/api", "createdAt": "2020-12-14T00:45:27Z", "url": "https://github.com/bisq-network/bisq/pull/4943", "merged": true, "mergeCommit": {"oid": "bc60db39ae10b9fdd9b781c529c21c7cffcd73dc"}, "closed": true, "closedAt": "2020-12-15T21:57:38Z", "author": {"login": "chimp1984"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdmIQtdgH2gAyNTM5MDU4NDIxOjdkMDZiZjM4MDNiY2EzNDJjZDM1NDYzNzI1ZWUzMjk3MjVjNjAzNzM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdmhofVgFqTU1Mjk1MDczMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "7d06bf3803bca342cd35463725ee329725c60373", "author": {"user": {"login": "chimp1984", "name": null}}, "url": "https://github.com/bisq-network/bisq/commit/7d06bf3803bca342cd35463725ee329725c60373", "committedDate": "2020-12-14T16:23:51Z", "message": "Add mempool nodes to Preferences"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "664ebc13b5ec0c68d3563de269dfdb909fe61331", "author": {"user": {"login": "chimp1984", "name": null}}, "url": "https://github.com/bisq-network/bisq/commit/664ebc13b5ec0c68d3563de269dfdb909fe61331", "committedDate": "2020-12-14T16:24:07Z", "message": "Add constructor with responseCode"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7f73fa10afa1ee8bf1eef3743bdb99c27faeba48", "author": {"user": {"login": "chimp1984", "name": null}}, "url": "https://github.com/bisq-network/bisq/commit/7f73fa10afa1ee8bf1eef3743bdb99c27faeba48", "committedDate": "2020-12-14T16:24:49Z", "message": "Add support for data post"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUxNTY4MDE0", "url": "https://github.com/bisq-network/bisq/pull/4943#pullrequestreview-551568014", "createdAt": "2020-12-14T16:34:07Z", "commit": {"oid": "300671abb2c1407c1959994edaac441e37ec0b09"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxNjozNDowN1rOIFZLqg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxNjozNDowN1rOIFZLqg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjUyNjM3OA==", "bodyText": "Instead of checking for that exact message, maybe just checking for a substring of \\\"code\\\":-27 is better, since the exact string might change in future releases of Bitcoin Core RPC", "url": "https://github.com/bisq-network/bisq/pull/4943#discussion_r542526378", "createdAt": "2020-12-14T16:34:07Z", "author": {"login": "wiz"}, "path": "core/src/main/java/bisq/core/btc/wallet/http/MemPoolSpaceTxBroadcaster.java", "diffHunk": "@@ -115,8 +114,21 @@ public void onSuccess(String txId) {\n             }\n \n             public void onFailure(@NotNull Throwable throwable) {\n-                log.warn(\"Broadcast of raw tx with txId {} to {} failed. Error={}\",\n-                        txIdToSend, url, throwable.toString());\n+                Throwable cause = throwable.getCause();\n+                if (cause instanceof HttpException) {\n+                    int responseCode = ((HttpException) cause).getResponseCode();\n+                    String message = cause.getMessage();\n+                    if (responseCode == 400 && message.equals(\"sendrawtransaction RPC error: {\\\"code\\\":-27,\\\"message\\\":\\\"Transaction already in block chain\\\"}\")) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "300671abb2c1407c1959994edaac441e37ec0b09"}, "originalPosition": 56}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f0eefe794312bd94b675726c744242b9cbaf121c", "author": {"user": {"login": "chimp1984", "name": null}}, "url": "https://github.com/bisq-network/bisq/commit/f0eefe794312bd94b675726c744242b9cbaf121c", "committedDate": "2020-12-14T16:35:24Z", "message": "Add MemPoolSpaceTxBroadcaster"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "910441125e44b37a3695be3b0dcf92967da6efc5", "author": {"user": {"login": "chimp1984", "name": null}}, "url": "https://github.com/bisq-network/bisq/commit/910441125e44b37a3695be3b0dcf92967da6efc5", "committedDate": "2020-12-14T17:11:24Z", "message": "Return if not mainnet"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f26e76c908cae37fef6e7dcd37376caef32f1276", "author": {"user": {"login": "chimp1984", "name": null}}, "url": "https://github.com/bisq-network/bisq/commit/f26e76c908cae37fef6e7dcd37376caef32f1276", "committedDate": "2020-12-14T17:30:37Z", "message": "Only check for code"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "300671abb2c1407c1959994edaac441e37ec0b09", "author": {"user": {"login": "chimp1984", "name": null}}, "url": "https://github.com/bisq-network/bisq/commit/300671abb2c1407c1959994edaac441e37ec0b09", "committedDate": "2020-12-14T16:03:46Z", "message": "Add data for POST calls"}, "afterCommit": {"oid": "f26e76c908cae37fef6e7dcd37376caef32f1276", "author": {"user": {"login": "chimp1984", "name": null}}, "url": "https://github.com/bisq-network/bisq/commit/f26e76c908cae37fef6e7dcd37376caef32f1276", "committedDate": "2020-12-14T17:30:37Z", "message": "Only check for code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "478e1224e8c727f63c13cb3f8266ed6701fe8ea8", "author": {"user": {"login": "chimp1984", "name": null}}, "url": "https://github.com/bisq-network/bisq/commit/478e1224e8c727f63c13cb3f8266ed6701fe8ea8", "committedDate": "2020-12-14T17:52:32Z", "message": "Use MemPoolSpaceTxBroadcaster for withdrawing\nfunds and for empty wallet call."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "33cf657d1dc7722739a3068872833fe66cfce8de", "author": {"user": {"login": "chimp1984", "name": null}}, "url": "https://github.com/bisq-network/bisq/commit/33cf657d1dc7722739a3068872833fe66cfce8de", "committedDate": "2020-12-14T18:02:15Z", "message": "Clone txBroadcastServices so we do not manipulate source list"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cb289845b65a62550ab2984c16aaaf068285d8b2", "author": {"user": {"login": "chimp1984", "name": null}}, "url": "https://github.com/bisq-network/bisq/commit/cb289845b65a62550ab2984c16aaaf068285d8b2", "committedDate": "2020-12-14T18:08:12Z", "message": "Add reference to bitcoin RPC error codes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUyOTUwNzMy", "url": "https://github.com/bisq-network/bisq/pull/4943#pullrequestreview-552950732", "createdAt": "2020-12-15T21:57:27Z", "commit": {"oid": "cb289845b65a62550ab2984c16aaaf068285d8b2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3465, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}