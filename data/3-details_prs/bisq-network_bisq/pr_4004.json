{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc5MDE0ODIx", "number": 4004, "title": "Adjust NetworkSize metric installer", "bodyText": "followup to #3997, part of bisq-network/projects#13\nTweak the networksize metric scraper script, the pricenode installer and amend the readme on how to use it.\nnotes to self:\ncannot make the JVM fire up a jmx-service.\nstandin jar works\n% jcmd 28970 PerfCounter.print\n[snip]\njava.rt.vmArgs=\"-Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.local.only=true -Dcom.sun.management.jmxremote.port=6969 -Dcom.sun.management.jmxremote.rmi.port=6969 -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.authenticate=false\"\n[snip]\nsun.management.JMXConnectorServer.0.authenticate=\"false\"\nsun.management.JMXConnectorServer.0.remoteAddress=\"service:jmx:rmi:///jndi/rmi://workstation:6969/jmxrmi\"\nsun.management.JMXConnectorServer.0.ssl=\"false\"\nsun.management.JMXConnectorServer.0.sslNeedClientAuth=\"false\"\nsun.management.JMXConnectorServer.0.sslRegistry=\"false\"\nsun.management.JMXConnectorServer.address=\"service:jmx:rmi://127.0.0.1/stub/rO0ABXNyAC5qYXZheC5tYW5hZ2VtZW50LnJlbW90ZS5ybWkuUk1JU2VydmVySW1wbF9TdHViAAAAAAAAAAICAAB4cgAaamF2YS5ybWkuc2VydmVyLlJlbW90ZVN0dWLp/tzJi+FlGgIAAHhyABxqYXZhLnJtaS5zZXJ2ZXIuUmVtb3RlT2JqZWN002G0kQxhMx4DAAB4cHc5AAtVbmljYXN0UmVmMgAADjE5Mi4xNjguOTMuMTAyAACyuWmYcsfkIQJcg+K0sQAAAXB3S81MgAIAeA==\"\nsun.management.JMXConnectorServer.remote.enabled=0\n\n[snip]\nprice node does not\nroot@bisqserver ~ # /usr/lib/jvm/openjdk-10.0.2/bin/jcmd 18831 PerfCounter.print\n[snip]\njava.rt.vmArgs=\"-Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.local.only=true -Dcom.sun.management.jmxremote.port=6969 -Dcom.sun.management.jmxremote.rmi.port=6969 -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.authenticate=false\"\n[snip]\n\nI can exclude these from the list of reasons\n\njava version\nusing it with a .jar\nrunning with an unprivileged user\nis caused by service hardening\n\nstill open:\n\n the pricenode is fired up via .jar and not with the startup scripts (used for seednodes for example) see #3997 (review)\nthere seems to be an embedded tomcat within the pricenode, can that be the reason? but why should it be?\n\nI currently tend to just leave it. It takes too much efforts to find the cause. We did not have any JVM heap data on pricenodes until now, we might visit that again once it issues show up.", "createdAt": "2020-02-24T14:18:29Z", "url": "https://github.com/bisq-network/bisq/pull/4004", "merged": true, "mergeCommit": {"oid": "ac3e58846bc66242df290b80b984bb18af84615a"}, "closed": true, "closedAt": "2020-03-09T10:21:43Z", "author": {"login": "freimair"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcIX26GAH2gAyMzc5MDE0ODIxOmQxZmM5ZDBkMThmNjQwODU5NWJlNWIzNmNmODNlZDIwMzQ1M2ZhMzg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcIuq_aAFqTM2NjM0ODE5OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d1fc9d0d18f6408595be5b36cf83ed203453fa38", "author": {"user": {"login": "freimair", "name": "Florian Reimair"}}, "url": "https://github.com/bisq-network/bisq/commit/d1fc9d0d18f6408595be5b36cf83ed203453fa38", "committedDate": "2020-02-27T09:25:16Z", "message": "Adjust the pricenode installer"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ebdff5661ddb76436ae6ae534008ebe421d6b3ef", "author": {"user": {"login": "freimair", "name": "Florian Reimair"}}, "url": "https://github.com/bisq-network/bisq/commit/ebdff5661ddb76436ae6ae534008ebe421d6b3ef", "committedDate": "2020-02-27T09:25:17Z", "message": "Amended pricenode readme"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "23f73a999c5c71936302b267645f5c1cea9269ff", "author": {"user": {"login": "freimair", "name": "Florian Reimair"}}, "url": "https://github.com/bisq-network/bisq/commit/23f73a999c5c71936302b267645f5c1cea9269ff", "committedDate": "2020-02-24T14:11:22Z", "message": "Amended pricenode readme"}, "afterCommit": {"oid": "ebdff5661ddb76436ae6ae534008ebe421d6b3ef", "author": {"user": {"login": "freimair", "name": "Florian Reimair"}}, "url": "https://github.com/bisq-network/bisq/commit/ebdff5661ddb76436ae6ae534008ebe421d6b3ef", "committedDate": "2020-02-27T09:25:17Z", "message": "Amended pricenode readme"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cfa55df4b2823dbf68b5854fbedd47242edf8c5f", "author": {"user": {"login": "freimair", "name": "Florian Reimair"}}, "url": "https://github.com/bisq-network/bisq/commit/cfa55df4b2823dbf68b5854fbedd47242edf8c5f", "committedDate": "2020-02-27T10:26:26Z", "message": "Align scraper script"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY1NTk0MjYz", "url": "https://github.com/bisq-network/bisq/pull/4004#pullrequestreview-365594263", "createdAt": "2020-02-27T11:07:06Z", "commit": {"oid": "cfa55df4b2823dbf68b5854fbedd47242edf8c5f"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QxMTowNzowNlrOFvOIug==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QxMTowNzozNVrOFvOJiQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTA1OTAwMg==", "bodyText": "These \"obligations\" should be listed at https://bisq.wiki/Pricenode_Operator#Duties. I've just created that page as a stub. I've asked all @bisq-network/pricenode-operators to watch that page at bisq-network/roles#14 (comment), so changes you make there will have a reasonable chance of being seen by them (duty changes should be communicated and followed up on more explicitly in any case, but FYI the wiki page is there, and we should rally around it).", "url": "https://github.com/bisq-network/bisq/pull/4004#discussion_r385059002", "createdAt": "2020-02-27T11:07:06Z", "author": {"login": "cbeams"}, "path": "pricenode/README.md", "diffHunk": "@@ -67,6 +67,21 @@ curl http://localhost:8080/getVersion\n curl http://localhost:8080/info\n ```\n \n+### Monitoring\n+\n+If you run a main pricenode, you also are obliged to activate the monitoring feed by running", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cfa55df4b2823dbf68b5854fbedd47242edf8c5f"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTA1OTIwOQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Follow the instruction given by the script and report your certificate to the seednode group!\n          \n          \n            \n            Follow the instruction given by the script and report your certificate to the pricenode group!\n          \n      \n    \n    \n  \n\nWhat does \"group\" mean here?", "url": "https://github.com/bisq-network/bisq/pull/4004#discussion_r385059209", "createdAt": "2020-02-27T11:07:35Z", "author": {"login": "cbeams"}, "path": "pricenode/README.md", "diffHunk": "@@ -67,6 +67,21 @@ curl http://localhost:8080/getVersion\n curl http://localhost:8080/info\n ```\n \n+### Monitoring\n+\n+If you run a main pricenode, you also are obliged to activate the monitoring feed by running\n+\n+```bash\n+curl -s https://raw.githubusercontent.com/bisq-network/bisq/master/monitor/install_collectd_debian.sh | sudo bash\n+```\n+Follow the instruction given by the script and report your certificate to the seednode group!", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cfa55df4b2823dbf68b5854fbedd47242edf8c5f"}, "originalPosition": 11}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY1ODM4NzAx", "url": "https://github.com/bisq-network/bisq/pull/4004#pullrequestreview-365838701", "createdAt": "2020-02-27T17:08:15Z", "commit": {"oid": "cfa55df4b2823dbf68b5854fbedd47242edf8c5f"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bdc4dec71636f7223e9ab78c0c59b3f9aab40d2c", "author": {"user": {"login": "freimair", "name": "Florian Reimair"}}, "url": "https://github.com/bisq-network/bisq/commit/bdc4dec71636f7223e9ab78c0c59b3f9aab40d2c", "committedDate": "2020-02-27T17:36:14Z", "message": "Apply suggestions from code review"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2MTQ2OTc4", "url": "https://github.com/bisq-network/bisq/pull/4004#pullrequestreview-366146978", "createdAt": "2020-02-28T03:50:06Z", "commit": {"oid": "bdc4dec71636f7223e9ab78c0c59b3f9aab40d2c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2MzQ4MTk5", "url": "https://github.com/bisq-network/bisq/pull/4004#pullrequestreview-366348199", "createdAt": "2020-02-28T12:00:05Z", "commit": {"oid": "bdc4dec71636f7223e9ab78c0c59b3f9aab40d2c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3334, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}