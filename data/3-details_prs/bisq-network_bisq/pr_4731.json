{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEzMDQ2OTc1", "number": 4731, "title": "Resolve issues found in reviewed PRs 4699, 4703, 4711 [, ...]", "bodyText": "A chain of 18 PRs are being reviewed in parent-branch -> child-branch order, and the reviewer agreed to allow me to put requested changes into its own PR branch -- this one, the final branch of the chain.\nThe first two commits resolve issues in #4699, #4703, #4711\nWhen all issues in the PR chain are resolved here, this PR will move from draft to ready for review status.", "createdAt": "2020-10-30T14:29:48Z", "url": "https://github.com/bisq-network/bisq/pull/4731", "merged": true, "mergeCommit": {"oid": "84ac65b163d02b3b1e7c638c18277aca0478de1f"}, "closed": true, "closedAt": "2020-11-02T14:32:08Z", "author": {"login": "ghubstan"}, "timelineItems": {"totalCount": 21, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdWdMqlgH2gAyNTEzMDQ2OTc1OmEzNjMxYTAyMmY0NzdjZDJlOWEwMDEzNGJlOTc4Yzc1YTBjZTNlYzQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdYjylmgFqTUyMTU4NDY1Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "a3631a022f477cd2e9a00134be978c75a0ce3ec4", "author": {"user": {"login": "ghubstan", "name": "Stan"}}, "url": "https://github.com/bisq-network/bisq/commit/a3631a022f477cd2e9a00134be978c75a0ce3ec4", "committedDate": "2020-10-26T23:44:39Z", "message": "Implement api methods 'keepfunds', 'withdrawfunds'\n\nThe CoreTradesService was refactored to work for newly added api methods:\n\n- keepfunds -- close trade, keep funds in bisq wallet\n\n- withdrawfunds -- close trade, withdraw funds to external btc wallet\n\nA getKey accessor was added to CoreWalletsService (needed by withdrawfunds impl)."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f1db254073577ac656a0bbd59cdc6246502d4bfa", "author": {"user": {"login": "ghubstan", "name": "Stan"}}, "url": "https://github.com/bisq-network/bisq/commit/f1db254073577ac656a0bbd59cdc6246502d4bfa", "committedDate": "2020-10-27T16:01:33Z", "message": "Make formatSatoshis visible for testing"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b8ae566b69578405cc87b8c08c362c98abb3ac99", "author": {"user": {"login": "ghubstan", "name": "Stan"}}, "url": "https://github.com/bisq-network/bisq/commit/b8ae566b69578405cc87b8c08c362c98abb3ac99", "committedDate": "2020-10-27T16:03:48Z", "message": "Add method for printing current jupiter test name"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1e25be5bdc40073921de795191b8f7327f494e5e", "author": {"user": {"login": "ghubstan", "name": "Stan"}}, "url": "https://github.com/bisq-network/bisq/commit/1e25be5bdc40073921de795191b8f7327f494e5e", "committedDate": "2020-10-27T16:04:53Z", "message": "Test trade closing api methods 'keepfunds' withdrawfunds'\n\nSome refactoring of the api test case hierarchy is included in this commit."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2746b276744a6c282d96170326146ed298f1df97", "author": {"user": {"login": "ghubstan", "name": "Stan"}}, "url": "https://github.com/bisq-network/bisq/commit/2746b276744a6c282d96170326146ed298f1df97", "committedDate": "2020-10-27T16:47:23Z", "message": "Fix apitest dummy payment acct init bug\n\nThis commit fixes non-trade tests broken by the last refactoring."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "027a7d5cd3bfaf4afefbd92612c67356a43d6353", "author": {"user": {"login": "ghubstan", "name": "Stan"}}, "url": "https://github.com/bisq-network/bisq/commit/027a7d5cd3bfaf4afefbd92612c67356a43d6353", "committedDate": "2020-10-27T17:54:50Z", "message": "Stub out canceloffer api method\n\nThe implementation will be added to CoreOffersService in the next PR."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0f1d4f8ac38d0591c2e4c1b10608938b36c8619a", "author": {"user": {"login": "ghubstan", "name": "Stan"}}, "url": "https://github.com/bisq-network/bisq/commit/0f1d4f8ac38d0591c2e4c1b10608938b36c8619a", "committedDate": "2020-10-27T18:03:36Z", "message": "Fix typo"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b38507c6e68aca9176da48515633dcc613e80ddc", "author": {"user": {"login": "ghubstan", "name": "Stan"}}, "url": "https://github.com/bisq-network/bisq/commit/b38507c6e68aca9176da48515633dcc613e80ddc", "committedDate": "2020-10-27T18:31:57Z", "message": "Implement api method 'canceloffer'"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "91a2e2ce1ff0e900ac0ad91b92da1de420dc3171", "author": {"user": {"login": "ghubstan", "name": "Stan"}}, "url": "https://github.com/bisq-network/bisq/commit/91a2e2ce1ff0e900ac0ad91b92da1de420dc3171", "committedDate": "2020-10-27T22:06:59Z", "message": "Add canceloffer test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8e51e1e495d79470defae2c9877f3a8d43cb095f", "author": {"user": {"login": "ghubstan", "name": "Stan"}}, "url": "https://github.com/bisq-network/bisq/commit/8e51e1e495d79470defae2c9877f3a8d43cb095f", "committedDate": "2020-10-28T20:21:04Z", "message": "Upgrade jupiterVersion = '5.7.0'\n\nThis upgrades jupiter for all subprojects using this library, but\nit does not affect released code."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d6524bf46d5e8a9960c1c992a12a106be8877401", "author": {"user": {"login": "ghubstan", "name": "Stan"}}, "url": "https://github.com/bisq-network/bisq/commit/d6524bf46d5e8a9960c1c992a12a106be8877401", "committedDate": "2020-10-28T20:39:50Z", "message": "Improve apitest cmd line console logging\n\n- Show full stack traces in console\n- Do use previously cached test outputs\n- Do not show skipped test name in console (too noisy)\n- Show test run summary, including number of skipped tests\n- Show note about skipped test info in the html report\n- Show link to html report on test SUCCESS"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2a052035190081c51d561e4e431ffca2b68987ec", "author": {"user": {"login": "ghubstan", "name": "Stan"}}, "url": "https://github.com/bisq-network/bisq/commit/2a052035190081c51d561e4e431ffca2b68987ec", "committedDate": "2020-10-28T20:46:30Z", "message": "Remove dead code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f61f148db194f38b16b299027a82289eea6d78ca", "author": {"user": {"login": "ghubstan", "name": "Stan"}}, "url": "https://github.com/bisq-network/bisq/commit/f61f148db194f38b16b299027a82289eea6d78ca", "committedDate": "2020-10-28T20:59:15Z", "message": "Refactor api test fixture setup\n\n- Remove dead code from AbstractLinuxProcess.\n\n- Make default dummy accts static in MethodTest.\n\n- Simplify gRPC stub creation, btc block generation, dispute agent\n  registration, and dummy acct initialization in test case startup.\n\n- Make ExpectedProtocolStatus visible to scenario test pkg."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e8e55d2286ec8063361c3ece281883648e6c6ba9", "author": {"user": {"login": "ghubstan", "name": "Stan"}}, "url": "https://github.com/bisq-network/bisq/commit/e8e55d2286ec8063361c3ece281883648e6c6ba9", "committedDate": "2020-10-28T21:01:49Z", "message": "Remove redundant ScenarioTest superclass"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c2f8db3c7dcd30d9af054d091c0fd8d304879f6b", "author": {"user": {"login": "ghubstan", "name": "Stan"}}, "url": "https://github.com/bisq-network/bisq/commit/c2f8db3c7dcd30d9af054d091c0fd8d304879f6b", "committedDate": "2020-10-28T21:17:59Z", "message": "Reduce apitest case execution time\n\nConsolidated all method tests into fewer test cases by running them\nfrom new 'scenario' test cases.  This cuts the current scaffold\nsetup & teardown times by almost 1/2.  No method tests were deleted\nor duplicated.\n\n(1)  Disabled all method (unit) test cases at the class level.\n(2)  Added new scenario test cases to run all disabled test cases (1).\n\nThe method test cases can still be run by commenting out the @Disabled\nannotation."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0656c57d393e3313050a762effefa010347da970", "author": {"user": {"login": "ghubstan", "name": "Stan"}}, "url": "https://github.com/bisq-network/bisq/commit/0656c57d393e3313050a762effefa010347da970", "committedDate": "2020-10-30T14:07:18Z", "message": "Add null checks in PendingTradesViewModel\n\nThese changes were requested in review of PR\nhttps://github.com/bisq-network/bisq/pull/4699"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f764e9feb07f1cae45309b6271ef84862ee7d8b4", "author": {"user": {"login": "ghubstan", "name": "Stan"}}, "url": "https://github.com/bisq-network/bisq/commit/f764e9feb07f1cae45309b6271ef84862ee7d8b4", "committedDate": "2020-10-30T14:15:39Z", "message": "Simplify TradeUtil#getPaymentMethodNameWithCountryCode\n\nThese changes were requested in review of PR\nhttps://github.com/bisq-network/bisq/pull/4699"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3cd3bf0e3ed3aed626fe38ef1b1da29cbc761c61", "author": {"user": {"login": "ghubstan", "name": "Stan"}}, "url": "https://github.com/bisq-network/bisq/commit/3cd3bf0e3ed3aed626fe38ef1b1da29cbc761c61", "committedDate": "2020-10-30T14:52:37Z", "message": "Fix grammar / typo\n\nThis change resolves issue found in PR review.  See\nhttps://github.com/bisq-network/bisq/pull/4703#discussion_r515076872"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c27d5a6da87d05a0d1700c174929ad0a9af1b154", "author": {"user": {"login": "ghubstan", "name": "Stan"}}, "url": "https://github.com/bisq-network/bisq/commit/c27d5a6da87d05a0d1700c174929ad0a9af1b154", "committedDate": "2020-10-31T16:32:14Z", "message": "Use Bisq's timer in API's 'unlockwallet timeout(s)'\n\nThis change was requested in\nhttps://github.com/chimp1984/bisq/commit/961703ecea62df62946ab001ec28205662688ccd\n\nThis replaces and closes PR https://github.com/bisq-network/bisq/pull/4558"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fcdfc687e45d1d613838d7189aa4e8edd41228e2", "author": {"user": {"login": "ghubstan", "name": "Stan"}}, "url": "https://github.com/bisq-network/bisq/commit/fcdfc687e45d1d613838d7189aa4e8edd41228e2", "committedDate": "2020-10-31T18:44:14Z", "message": "Verify closedTradableManager.getTradableById return value is a Trade instance\n\nThis change requested at https://github.com/bisq-network/bisq/pull/4711#discussion_r515520278"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIxNTg0NjUz", "url": "https://github.com/bisq-network/bisq/pull/4731#pullrequestreview-521584653", "createdAt": "2020-11-02T12:29:56Z", "commit": {"oid": "f764e9feb07f1cae45309b6271ef84862ee7d8b4"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQxMjoyOTo1N1rOHsCYLA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQxMjoyOTo1N1rOHsCYLA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTkzODM0OA==", "bodyText": "This is not required, but I do like the notation\nOffer offer = checkNotNull(trade.getOffer());", "url": "https://github.com/bisq-network/bisq/pull/4731#discussion_r515938348", "createdAt": "2020-11-02T12:29:57Z", "author": {"login": "sqrrm"}, "path": "core/src/main/java/bisq/core/trade/TradeUtil.java", "diffHunk": "@@ -164,14 +164,13 @@ public String getMarketDescription(Trade trade) {\n     }\n \n     public String getPaymentMethodNameWithCountryCode(Trade trade) {\n-        String paymentMethodDescription = \"\";\n-        if (trade != null) {\n-            Offer offer = trade.getOffer();\n-            checkNotNull(offer);\n-            checkNotNull(offer.getPaymentMethod());\n-            paymentMethodDescription = offer.getPaymentMethodNameWithCountryCode();\n-        }\n-        return paymentMethodDescription;\n+        if (trade == null)\n+            return \"\";\n+\n+        Offer offer = trade.getOffer();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f764e9feb07f1cae45309b6271ef84862ee7d8b4"}, "originalPosition": 15}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3497, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}