{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTExMDAyMjcy", "number": 4715, "title": "Cleaner formatting for trading charts date axes", "bodyText": "Clean up date axes style for easy reading. Made date labels shorter,\nwith clear visual correspondence to relevant axes tick mark.\nTick marks with labels are now larger than those without.\n\nCurrently, the X-axis for the Price and Volume charts is not well designed. The labels are large, all the tick marks are the same. It is difficult to estimate to which tick mark the date label corresponds.  Here is a typical example for the DAY interval:\n\nThe fix proposed here draws the labels more compact and the respective ticks stand-out. The chart view becomes cleaner and more visually intuitive. Above example, becomes:\n\nThe labels take less horizontal space by splitting into 2-levels, using 24-hour time instead of AM/PM. The examples here show English locale, though localization for the month names is maintained, as before.\nOf course, further customization is possible, but the above, I feel, provides an acceptable improvement to chart display, without deviating from the current UI or introducing new features.\nSimilar results are obtained with the other chart interval  values. Examples (10min, HOUR, WEEK, MOTH):\n\n\n\n\nBisq is a unique tool. It deserves better charts.\nHope you find this a small improvement in the right direction.", "createdAt": "2020-10-27T19:26:55Z", "url": "https://github.com/bisq-network/bisq/pull/4715", "merged": true, "mergeCommit": {"oid": "e082ac667e35d2b57c77b281d51e9cb830a16f32"}, "closed": true, "closedAt": "2020-11-02T16:38:03Z", "author": {"login": "deusmax"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdW8pZCgH2gAyNTExMDAyMjcyOmMwYWY5Zjk2Mzc1Y2RjOWI0NGM5ZGU2NWFjNWE4ZWY5ZmIwMjQ4MTY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdYnSinAFqTUyMTgwMDM2Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c0af9f96375cdc9b44c9de65ac5a8ef9fb024816", "author": {"user": {"login": "deusmax", "name": null}}, "url": "https://github.com/bisq-network/bisq/commit/c0af9f96375cdc9b44c9de65ac5a8ef9fb024816", "committedDate": "2020-10-28T12:23:05Z", "message": "Cleaner formatting for trading charts date axes\n\nClean up date axes style for easy reading. Made date labels shorter,\nwith clear visual correspondance to relevant axes tick mark.\nTick marks with labels are now larger than those without.\n\nSigned-off-by: Deus Max <deusmax@gmx.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "162c119285012122b574fd52dd73895342c011da", "author": {"user": {"login": "deusmax", "name": null}}, "url": "https://github.com/bisq-network/bisq/commit/162c119285012122b574fd52dd73895342c011da", "committedDate": "2020-10-29T23:17:06Z", "message": "Added date format for each chart interval period.\n\nProvide specific formats for each trade chart interval period, for added\nprecision and flexibility in formatting the X-axis. Covers suggestion in\nBisq PR#4715 for more compact date formats."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIwNzg2NTE3", "url": "https://github.com/bisq-network/bisq/pull/4715#pullrequestreview-520786517", "createdAt": "2020-10-30T15:32:23Z", "commit": {"oid": "162c119285012122b574fd52dd73895342c011da"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQxNTozMjoyM1rOHrUbEw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQxNTozMjoyM1rOHrUbEw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTE4NTQyNw==", "bodyText": "You might want to reformat the style of the switch statement so fmt = \"...\" are on separate lines.  Not sure codacy will complain about this, but other devs might want the switch style to be consistent with the rest of the code base.\n(This is the 1st time I've seen this style in Bisq;  I'm not saying there may be other examples in the code base.)\nswitch (model.tickUnit) {\n                    case YEAR:\n                        fmt = \"yyyy\";\n                        break;\n                    case MONTH:\n                        fmt = \"MMMyy\";\n                        break;\n                    case WEEK:\n                    case DAY:\n                        fmt = \"dd/MMM\\nyyyy\";\n                        break;\n                    case HOUR:\n                    case MINUTE_10:\n                        fmt = \"HH:mm\\ndd/MMM\";\n                        break;\n                    default:        // nothing here\n                }", "url": "https://github.com/bisq-network/bisq/pull/4715#discussion_r515185427", "createdAt": "2020-10-30T15:32:23Z", "author": {"login": "ghubstan"}, "path": "desktop/src/main/java/bisq/desktop/main/market/trades/TradesChartsView.java", "diffHunk": "@@ -479,11 +479,27 @@ private void layoutChart() {\n             @Override\n             public String toString(Number object) {\n                 long index = MathUtils.doubleToLong((double) object);\n+                // The last tick is on the chart edge, it is not well spaced with\n+                // the previous tick and interferes with its label.\n+                if (model.maxTicks + 1 == index) return \"\";\n+\n                 long time = model.getTimeFromTickIndex(index);\n-                if (model.tickUnit.ordinal() <= TradesChartsViewModel.TickUnit.DAY.ordinal())\n-                    return index % 4 == 0 ? DisplayUtils.formatDateAxis(new Date(time)) : \"\";\n-                else\n-                    return index % 3 == 0 ? DisplayUtils.formatTimeAxis(new Date(time)) : \"\";\n+                String fmt = \"\";\n+                switch (model.tickUnit) {\n+                case YEAR  : fmt = \"yyyy\";\n+                    break;\n+                case MONTH : fmt = \"MMMyy\";\n+                    break;\n+                case WEEK  :\n+                case DAY   : fmt = \"dd/MMM\\nyyyy\";\n+                    break;\n+                case HOUR  :\n+                case MINUTE_10: fmt = \"HH:mm\\ndd/MMM\";\n+                    break;\n+                default:        // nothing here", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "162c119285012122b574fd52dd73895342c011da"}, "originalPosition": 25}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "24784cb22da25f6e9c47b321d382012ba0d50234", "author": {"user": {"login": "deusmax", "name": null}}, "url": "https://github.com/bisq-network/bisq/commit/24784cb22da25f6e9c47b321d382012ba0d50234", "committedDate": "2020-10-31T12:48:18Z", "message": "Minor style formatting.\n\nFixed a switch statement formatting to conform with Bisq code style."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIxMTQ3MDE0", "url": "https://github.com/bisq-network/bisq/pull/4715#pullrequestreview-521147014", "createdAt": "2020-10-31T15:20:46Z", "commit": {"oid": "24784cb22da25f6e9c47b321d382012ba0d50234"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIxODAwMzYy", "url": "https://github.com/bisq-network/bisq/pull/4715#pullrequestreview-521800362", "createdAt": "2020-11-02T16:37:58Z", "commit": {"oid": "24784cb22da25f6e9c47b321d382012ba0d50234"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3495, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}