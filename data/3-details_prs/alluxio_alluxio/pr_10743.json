{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYyNDY0MDk2", "number": 10743, "title": "Fix PageStore FindBugs issues", "bodyText": "Fixed following issues reported by findbugs:\n[ERROR] Possible null pointer dereference in alluxio.client.file.cache.store.LocalPageStore.delete(PageId) due to return value of called method [alluxio.client.file.cache.store.LocalPageStore, alluxio.client.file.cache.store.LocalPageStore] Method invoked at LocalPageStore.java:[line 89]Known null at LocalPageStore.java:[line 89] NP_NULL_ON_SOME_PATH_FROM_RETURN_VALUE\n[ERROR] Possible null pointer dereference in alluxio.client.file.cache.store.LocalPageStore.delete(PageId) due to return value of called method [alluxio.client.file.cache.store.LocalPageStore, alluxio.client.file.cache.store.LocalPageStore] Method invoked at LocalPageStore.java:[line 90]Known null at LocalPageStore.java:[line 90] NP_NULL_ON_SOME_PATH_FROM_RETURN_VALUE\n[ERROR] Possible null pointer dereference in alluxio.client.file.cache.store.LocalPageStore.put(PageId, byte[]) due to return value of called method [alluxio.client.file.cache.store.LocalPageStore, alluxio.client.file.cache.store.LocalPageStore] Method invoked at LocalPageStore.java:[line 59]Known null at LocalPageStore.java:[line 59] NP_NULL_ON_SOME_PATH_FROM_RETURN_VALUE\n[ERROR] alluxio.client.file.cache.store.LocalPageStore.delete(PageId) may fail to close stream [alluxio.client.file.cache.store.LocalPageStore] At LocalPageStore.java:[line 89] OS_OPEN_STREAM\n[ERROR] Unused field: alluxio.client.file.cache.store.LocalPageStoreOptions.mRootDir [alluxio.client.file.cache.store.LocalPageStoreOptions] In LocalPageStoreOptions.java UUF_UNUSED_FIELD", "createdAt": "2020-01-14T06:15:53Z", "url": "https://github.com/Alluxio/alluxio/pull/10743", "merged": true, "mergeCommit": {"oid": "25154b45e5a85f2cc1c664edceec5df47373139c"}, "closed": true, "closedAt": "2020-01-14T19:36:39Z", "author": {"login": "bf8086"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb6KvMSAH2gAyMzYyNDY0MDk2OjcxODJlZDkxOTYyNjdlYTNkNjVlN2RmYTI2MjAwOWQ3OTllM2E2ZDU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb6WOjwgFqTM0Mjc4NzYxOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "7182ed9196267ea3d65e7dfa262009d799e3a6d5", "author": {"user": {"login": "bf8086", "name": null}}, "url": "https://github.com/Alluxio/alluxio/commit/7182ed9196267ea3d65e7dfa262009d799e3a6d5", "committedDate": "2020-01-14T06:13:08Z", "message": "fix findbugs"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQyMzQ0MDgx", "url": "https://github.com/Alluxio/alluxio/pull/10743#pullrequestreview-342344081", "createdAt": "2020-01-14T08:02:14Z", "commit": {"oid": "7182ed9196267ea3d65e7dfa262009d799e3a6d5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQwODowMjoxNVrOFdOwEA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQwODowMjoxNVrOFdOwEA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjE5NDcwNA==", "bodyText": "nit: for src code readability & more explicit error message\nPreconditions.checkNotNull(p.getParent(), \"Path for page %s can not be root\", pageId);\nFiles.createDirectories(p.getParent());", "url": "https://github.com/Alluxio/alluxio/pull/10743#discussion_r366194704", "createdAt": "2020-01-14T08:02:15Z", "author": {"login": "apc999"}, "path": "core/client/fs/src/main/java/alluxio/client/file/cache/store/LocalPageStore.java", "diffHunk": "@@ -55,7 +57,7 @@ public LocalPageStore(LocalPageStoreOptions options) {\n   public void put(PageId pageId, byte[] page) throws IOException {\n     Path p = getFilePath(pageId);\n     if (!Files.exists(p)) {\n-      Files.createDirectories(p.getParent());\n+      Files.createDirectories(Preconditions.checkNotNull(p.getParent(), \"parent\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7182ed9196267ea3d65e7dfa262009d799e3a6d5"}, "originalPosition": 21}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQyMzQ0MjY4", "url": "https://github.com/Alluxio/alluxio/pull/10743#pullrequestreview-342344268", "createdAt": "2020-01-14T08:02:45Z", "commit": {"oid": "7182ed9196267ea3d65e7dfa262009d799e3a6d5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQwODowMjo0NVrOFdOwjg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQwODowMjo0NVrOFdOwjg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjE5NDgzMA==", "bodyText": "please make the error message more explicit.", "url": "https://github.com/Alluxio/alluxio/pull/10743#discussion_r366194830", "createdAt": "2020-01-14T08:02:45Z", "author": {"login": "apc999"}, "path": "core/client/fs/src/main/java/alluxio/client/file/cache/store/LocalPageStore.java", "diffHunk": "@@ -82,8 +84,11 @@ public void delete(PageId pageId) throws IOException, PageNotFoundException {\n     }\n     Files.delete(p);\n     mSize.decrementAndGet();\n-    if (!Files.newDirectoryStream(p.getParent()).iterator().hasNext()) {\n-      Files.delete(p.getParent());\n+    Path parent = Preconditions.checkNotNull(p.getParent(), \"parent\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7182ed9196267ea3d65e7dfa262009d799e3a6d5"}, "originalPosition": 31}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f5320c5fa3c378f74abf6fc273ef1e1964a56c98", "author": {"user": {"login": "bf8086", "name": null}}, "url": "https://github.com/Alluxio/alluxio/commit/f5320c5fa3c378f74abf6fc273ef1e1964a56c98", "committedDate": "2020-01-14T19:17:31Z", "message": "address comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4226258b3438ab7fa1aff7d2d3b63d884aaa4e92", "author": {"user": {"login": "bf8086", "name": null}}, "url": "https://github.com/Alluxio/alluxio/commit/4226258b3438ab7fa1aff7d2d3b63d884aaa4e92", "committedDate": "2020-01-14T19:32:18Z", "message": "Merge remote-tracking branch 'upstream/lite' into lite-findbugs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a2ef152bb399c55a85aee6ab1ba4a66c934e72f9", "author": {"user": {"login": "bf8086", "name": null}}, "url": "https://github.com/Alluxio/alluxio/commit/a2ef152bb399c55a85aee6ab1ba4a66c934e72f9", "committedDate": "2020-01-14T19:32:38Z", "message": "fix checkstyles"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQyNzg3NjE4", "url": "https://github.com/Alluxio/alluxio/pull/10743#pullrequestreview-342787618", "createdAt": "2020-01-14T19:36:21Z", "commit": {"oid": "a2ef152bb399c55a85aee6ab1ba4a66c934e72f9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3294, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}