{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc1NTcxMTkx", "number": 10921, "title": "Fix UpdateCheckTest", "bodyText": "Avoid NPE thrown in UpdateCheckTest by mocking all the methods called.", "createdAt": "2020-02-14T21:00:15Z", "url": "https://github.com/Alluxio/alluxio/pull/10921", "merged": true, "mergeCommit": {"oid": "ae3a1cd5ca990ae75dad6b70fb6b571e8da4822a"}, "closed": true, "closedAt": "2020-02-14T21:38:06Z", "author": {"login": "LuQQiu"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcEV_3wgH2gAyMzc1NTcxMTkxOmExMTE4NGI0MGJlMjM0NWE1ZThmMDE1NmM4NTEzOTY2ZGVkZWRkN2I=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcEWhyqAFqTM1OTIzMzExOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "a11184b40be2345a5e8f0156c8513966dededd7b", "author": {"user": {"login": "LuQQiu", "name": null}}, "url": "https://github.com/Alluxio/alluxio/commit/a11184b40be2345a5e8f0156c8513966dededd7b", "committedDate": "2020-02-14T20:59:33Z", "message": "Fix UpdateCheckTest"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU5MjE3ODQ2", "url": "https://github.com/Alluxio/alluxio/pull/10921#pullrequestreview-359217846", "createdAt": "2020-02-14T21:04:16Z", "commit": {"oid": "a11184b40be2345a5e8f0156c8513966dededd7b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU5MjE4Mjcy", "url": "https://github.com/Alluxio/alluxio/pull/10921#pullrequestreview-359218272", "createdAt": "2020-02-14T21:05:10Z", "commit": {"oid": "a11184b40be2345a5e8f0156c8513966dededd7b"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5d1975cba716fa448a78a2be6b79e051da63a8e5", "author": {"user": {"login": "LuQQiu", "name": null}}, "url": "https://github.com/Alluxio/alluxio/commit/5d1975cba716fa448a78a2be6b79e051da63a8e5", "committedDate": "2020-02-14T21:11:35Z", "message": "Add before adn fix bug"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU5MjI3NzIx", "url": "https://github.com/Alluxio/alluxio/pull/10921#pullrequestreview-359227721", "createdAt": "2020-02-14T21:25:33Z", "commit": {"oid": "5d1975cba716fa448a78a2be6b79e051da63a8e5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNFQyMToyNTozNFrOFqEE8g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNFQyMToyNTozNFrOFqEE8g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTY1MTMxNA==", "bodyText": "can we move this to before as well so that each test only mocks the methods specific to that test", "url": "https://github.com/Alluxio/alluxio/pull/10921#discussion_r379651314", "createdAt": "2020-02-14T21:25:34Z", "author": {"login": "madanadit"}, "path": "core/server/master/src/test/java/alluxio/master/meta/UpdateCheckTest.java", "diffHunk": "@@ -40,23 +42,25 @@ public void userAgentStringEmpty() throws Exception {\n     Mockito.when(EnvironmentUtils.isEC2()).thenReturn(false);\n     Mockito.when(EnvironmentUtils.isCFT(Mockito.anyString())).thenReturn(false);\n     Mockito.when(EnvironmentUtils.isEMR(Mockito.anyString())).thenReturn(false);\n+    PowerMockito.mockStatic(EC2MetadataUtils.class);\n+  }\n \n+  @Test\n+  public void userAgentStringEmpty() throws Exception {\n     String userAgentString = UpdateCheck.getUserAgentString(\"cluster1\");\n+    Mockito.when(EC2MetadataUtils.getUserData())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5d1975cba716fa448a78a2be6b79e051da63a8e5"}, "originalPosition": 32}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU5MjI3OTEz", "url": "https://github.com/Alluxio/alluxio/pull/10921#pullrequestreview-359227913", "createdAt": "2020-02-14T21:25:57Z", "commit": {"oid": "5d1975cba716fa448a78a2be6b79e051da63a8e5"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU5MjMzMTE5", "url": "https://github.com/Alluxio/alluxio/pull/10921#pullrequestreview-359233119", "createdAt": "2020-02-14T21:36:36Z", "commit": {"oid": "5d1975cba716fa448a78a2be6b79e051da63a8e5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4965, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}