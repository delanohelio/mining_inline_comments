{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkzNDQ2ODAw", "number": 12147, "reviewThreads": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQxODo0Mjo0NVrOEoNq3g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQxNzoyMzo1M1rOEpIaHg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEwNjAyNDYyOnYy", "diffSide": "RIGHT", "path": ".github/workflows/checkstyle.yml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQxODo0Mjo0NVrOHZLGuQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQxODo0Mjo0NVrOHZLGuQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjE1ODM5Mw==", "bodyText": "where are these secret strings set?", "url": "https://github.com/Alluxio/alluxio/pull/12147#discussion_r496158393", "createdAt": "2020-09-28T18:42:45Z", "author": {"login": "Xenorith"}, "path": ".github/workflows/checkstyle.yml", "diffHunk": "@@ -0,0 +1,58 @@\n+# This is a basic workflow to help you get started with Actions\n+\n+name: Checkstyle, Findbugs, Doc Check, etc.\n+\n+# Controls when the action will run. Triggers the workflow on push or pull request\n+# events but only for the master branch\n+on:\n+  pull_request:\n+    branches: [ github_actions, master ]\n+\n+env:\n+  AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8b05aadc2116761e70a3f02135098364b889d8a5"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEwNjAyNjk4OnYy", "diffSide": "RIGHT", "path": ".github/workflows/checkstyle.yml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQxODo0MzozMFrOHZLIJg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQxODo0MzozMFrOHZLIJg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjE1ODc1OA==", "bodyText": "nit: split each env var into its own line for readability and same throughout similar files", "url": "https://github.com/Alluxio/alluxio/pull/12147#discussion_r496158758", "createdAt": "2020-09-28T18:43:30Z", "author": {"login": "Xenorith"}, "path": ".github/workflows/checkstyle.yml", "diffHunk": "@@ -0,0 +1,58 @@\n+# This is a basic workflow to help you get started with Actions\n+\n+name: Checkstyle, Findbugs, Doc Check, etc.\n+\n+# Controls when the action will run. Triggers the workflow on push or pull request\n+# events but only for the master branch\n+on:\n+  pull_request:\n+    branches: [ github_actions, master ]\n+\n+env:\n+  AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}\n+  AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}\n+  AWS_REGION: us-east-1\n+\n+# A workflow run is made up of one or more jobs that can run sequentially or in parallel\n+jobs:\n+  # This workflow contains a single job called \"build\"\n+  build:\n+    # The type of runner that the job will run on\n+    runs-on: ubuntu-latest\n+\n+    # Steps represent a sequence of tasks that will be executed as part of the job\n+    steps:\n+      # Checks-out your repository under $GITHUB_WORKSPACE, so your job can access it\n+      - name: checkout repo\n+        uses: actions/checkout@v2\n+\n+      - name: Use Node.js ${{ matrix.node-version }}\n+        uses: actions/setup-node@v1\n+        with:\n+          node-version: '10.11.0'\n+\n+      - name: Cache local Maven repository\n+        uses: actions/cache@v2\n+        with:\n+          path: ~/.m2/repository\n+          key: ${{ runner.os }}-maven-${{ hashFiles('**/pom.xml') }}\n+          restore-keys: |\n+            ${{ runner.os }}-maven-\n+\n+      # Runs a single command using the runners shell\n+      - name: Run a one-line script\n+        run: |\n+          mkdir -p ~/.m2\n+          ALLUXIO_DOCKER_NO_TTY=true ALLUXIO_DOCKER_GIT_CLEAN=true ALLUXIO_DOCKER_MVN_RUNTOEND=true \\", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8b05aadc2116761e70a3f02135098364b889d8a5"}, "originalPosition": 46}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEwNjAyOTI4OnYy", "diffSide": "RIGHT", "path": ".github/workflows/checkstyle.yml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQxODo0NDoxM1rOHZLJlQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQxODo0NDoxM1rOHZLJlQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjE1OTEyNQ==", "bodyText": "newline at eof and many other new files", "url": "https://github.com/Alluxio/alluxio/pull/12147#discussion_r496159125", "createdAt": "2020-09-28T18:44:13Z", "author": {"login": "Xenorith"}, "path": ".github/workflows/checkstyle.yml", "diffHunk": "@@ -0,0 +1,58 @@\n+# This is a basic workflow to help you get started with Actions\n+\n+name: Checkstyle, Findbugs, Doc Check, etc.\n+\n+# Controls when the action will run. Triggers the workflow on push or pull request\n+# events but only for the master branch\n+on:\n+  pull_request:\n+    branches: [ github_actions, master ]\n+\n+env:\n+  AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}\n+  AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}\n+  AWS_REGION: us-east-1\n+\n+# A workflow run is made up of one or more jobs that can run sequentially or in parallel\n+jobs:\n+  # This workflow contains a single job called \"build\"\n+  build:\n+    # The type of runner that the job will run on\n+    runs-on: ubuntu-latest\n+\n+    # Steps represent a sequence of tasks that will be executed as part of the job\n+    steps:\n+      # Checks-out your repository under $GITHUB_WORKSPACE, so your job can access it\n+      - name: checkout repo\n+        uses: actions/checkout@v2\n+\n+      - name: Use Node.js ${{ matrix.node-version }}\n+        uses: actions/setup-node@v1\n+        with:\n+          node-version: '10.11.0'\n+\n+      - name: Cache local Maven repository\n+        uses: actions/cache@v2\n+        with:\n+          path: ~/.m2/repository\n+          key: ${{ runner.os }}-maven-${{ hashFiles('**/pom.xml') }}\n+          restore-keys: |\n+            ${{ runner.os }}-maven-\n+\n+      # Runs a single command using the runners shell\n+      - name: Run a one-line script\n+        run: |\n+          mkdir -p ~/.m2\n+          ALLUXIO_DOCKER_NO_TTY=true ALLUXIO_DOCKER_GIT_CLEAN=true ALLUXIO_DOCKER_MVN_RUNTOEND=true \\\n+          ALLUXIO_CHECKSTYLE=true dev/github/run_docker.sh \"\\\"-Dtest=${{ matrix.modules }}\\\"\" -pl tests\n+        timeout-minutes: 60\n+\n+      - name: Archive artifacts\n+        uses: actions/upload-artifact@v2\n+        if: always()\n+        with:\n+          name: artifact\n+          path: |\n+            **/target/artifacts/*\n+            **/target/logs/*\n+            log*", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8b05aadc2116761e70a3f02135098364b889d8a5"}, "originalPosition": 58}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEwNjAzNTQxOnYy", "diffSide": "RIGHT", "path": ".github/workflows/integrationtests.yml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQxODo0NTo1NFrOHZLNZw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQxODo0NTo1NFrOHZLNZw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjE2MDEwMw==", "bodyText": "rename to file integration_tests.yml or whatever is allowed as long as there's some kind of separation between words?", "url": "https://github.com/Alluxio/alluxio/pull/12147#discussion_r496160103", "createdAt": "2020-09-28T18:45:54Z", "author": {"login": "Xenorith"}, "path": ".github/workflows/integrationtests.yml", "diffHunk": "@@ -0,0 +1,81 @@\n+# This is a basic workflow to help you get started with Actions", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8b05aadc2116761e70a3f02135098364b889d8a5"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEwNjAzOTg5OnYy", "diffSide": "RIGHT", "path": ".github/workflows/checkstyle.yml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQxODo0NzowOVrOHZLQKA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQxODo0NzowOVrOHZLQKA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjE2MDgwOA==", "bodyText": "are wildcards allowed for branches? we will need these to run on release branches (ex. branch-2.x) as well", "url": "https://github.com/Alluxio/alluxio/pull/12147#discussion_r496160808", "createdAt": "2020-09-28T18:47:09Z", "author": {"login": "Xenorith"}, "path": ".github/workflows/checkstyle.yml", "diffHunk": "@@ -0,0 +1,58 @@\n+# This is a basic workflow to help you get started with Actions\n+\n+name: Checkstyle, Findbugs, Doc Check, etc.\n+\n+# Controls when the action will run. Triggers the workflow on push or pull request\n+# events but only for the master branch\n+on:\n+  pull_request:\n+    branches: [ github_actions, master ]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8b05aadc2116761e70a3f02135098364b889d8a5"}, "originalPosition": 9}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEwNjA0Nzk4OnYy", "diffSide": "RIGHT", "path": ".github/workflows/unittests.yml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQxODo0OTozMVrOHZLVUA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQxODo0OTozMVrOHZLVUA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjE2MjEyOA==", "bodyText": "ditto for file name here", "url": "https://github.com/Alluxio/alluxio/pull/12147#discussion_r496162128", "createdAt": "2020-09-28T18:49:31Z", "author": {"login": "Xenorith"}, "path": ".github/workflows/unittests.yml", "diffHunk": "@@ -0,0 +1,69 @@\n+# This is a basic workflow to help you get started with Actions", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8b05aadc2116761e70a3f02135098364b889d8a5"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEwNjA3MTkxOnYy", "diffSide": "RIGHT", "path": "dev/github/run_tests.sh", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQxODo1NjozOVrOHZLkkg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQyMjoyNTowMFrOHZR5MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjE2NjAzNA==", "bodyText": "this is a copy of the bash code in run_checks.sh; can they be consolidated?", "url": "https://github.com/Alluxio/alluxio/pull/12147#discussion_r496166034", "createdAt": "2020-09-28T18:56:39Z", "author": {"login": "Xenorith"}, "path": "dev/github/run_tests.sh", "diffHunk": "@@ -0,0 +1,100 @@\n+#!/usr/bin/env bash\n+#\n+# The Alluxio Open Foundation licenses this work under the Apache License, version 2.0\n+# (the \"License\"). You may not use this work except in compliance with the License, which is\n+# available at www.apache.org/licenses/LICENSE-2.0\n+#\n+# This software is distributed on an \"AS IS\" basis, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n+# either express or implied, as more fully set forth in the License.\n+#\n+# See the NOTICE file distributed with this work for information regarding copyright ownership.\n+#\n+\n+#\n+# This script is run from inside the Docker container\n+#\n+set -ex\n+\n+if [ -n \"${ALLUXIO_GIT_CLEAN}\" ]\n+then\n+  git clean -fdx\n+fi\n+\n+mvn_args=\"\"\n+if [ -n \"${ALLUXIO_MVN_RUNTOEND}\" ]\n+then\n+  mvn_args+=\" -fn -DfailIfNoTests=false --fail-at-end\"\n+fi\n+\n+RUN_MAVEN=\"false\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8b05aadc2116761e70a3f02135098364b889d8a5"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjI2NzQzNA==", "bodyText": "I don't intend to consolidate them. It's very very annoying to consolidate shell code in a reasonable way", "url": "https://github.com/Alluxio/alluxio/pull/12147#discussion_r496267434", "createdAt": "2020-09-28T22:18:54Z", "author": {"login": "bradyoo"}, "path": "dev/github/run_tests.sh", "diffHunk": "@@ -0,0 +1,100 @@\n+#!/usr/bin/env bash\n+#\n+# The Alluxio Open Foundation licenses this work under the Apache License, version 2.0\n+# (the \"License\"). You may not use this work except in compliance with the License, which is\n+# available at www.apache.org/licenses/LICENSE-2.0\n+#\n+# This software is distributed on an \"AS IS\" basis, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n+# either express or implied, as more fully set forth in the License.\n+#\n+# See the NOTICE file distributed with this work for information regarding copyright ownership.\n+#\n+\n+#\n+# This script is run from inside the Docker container\n+#\n+set -ex\n+\n+if [ -n \"${ALLUXIO_GIT_CLEAN}\" ]\n+then\n+  git clean -fdx\n+fi\n+\n+mvn_args=\"\"\n+if [ -n \"${ALLUXIO_MVN_RUNTOEND}\" ]\n+then\n+  mvn_args+=\" -fn -DfailIfNoTests=false --fail-at-end\"\n+fi\n+\n+RUN_MAVEN=\"false\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjE2NjAzNA=="}, "originalCommit": {"oid": "8b05aadc2116761e70a3f02135098364b889d8a5"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjI2OTYxNw==", "bodyText": "though I can probably delete a lot of things here so gonna do that first.", "url": "https://github.com/Alluxio/alluxio/pull/12147#discussion_r496269617", "createdAt": "2020-09-28T22:25:00Z", "author": {"login": "bradyoo"}, "path": "dev/github/run_tests.sh", "diffHunk": "@@ -0,0 +1,100 @@\n+#!/usr/bin/env bash\n+#\n+# The Alluxio Open Foundation licenses this work under the Apache License, version 2.0\n+# (the \"License\"). You may not use this work except in compliance with the License, which is\n+# available at www.apache.org/licenses/LICENSE-2.0\n+#\n+# This software is distributed on an \"AS IS\" basis, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n+# either express or implied, as more fully set forth in the License.\n+#\n+# See the NOTICE file distributed with this work for information regarding copyright ownership.\n+#\n+\n+#\n+# This script is run from inside the Docker container\n+#\n+set -ex\n+\n+if [ -n \"${ALLUXIO_GIT_CLEAN}\" ]\n+then\n+  git clean -fdx\n+fi\n+\n+mvn_args=\"\"\n+if [ -n \"${ALLUXIO_MVN_RUNTOEND}\" ]\n+then\n+  mvn_args+=\" -fn -DfailIfNoTests=false --fail-at-end\"\n+fi\n+\n+RUN_MAVEN=\"false\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjE2NjAzNA=="}, "originalCommit": {"oid": "8b05aadc2116761e70a3f02135098364b889d8a5"}, "originalPosition": 29}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEwNjg0OTA3OnYy", "diffSide": "RIGHT", "path": ".github/workflows/checkstyle.yml", "isResolved": false, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQyMzoxNzo0MVrOHZS8Hg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQwODoxODowNFrOHaSZMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjI4Njc1MA==", "bodyText": "i was a bit lax in my previous comment. we need to run PR builds for the release branches but only starting from 2.4. i presume none of this would work for 2.3 or earlier, unless you think the full set of changes to make this work can be backported", "url": "https://github.com/Alluxio/alluxio/pull/12147#discussion_r496286750", "createdAt": "2020-09-28T23:17:41Z", "author": {"login": "Xenorith"}, "path": ".github/workflows/checkstyle.yml", "diffHunk": "@@ -0,0 +1,56 @@\n+# This is a basic workflow to help you get started with Actions\n+\n+name: Checkstyle, Findbugs, Doc Check, etc.\n+\n+# Controls when the action will run. Triggers the workflow on push or pull request\n+# events but only for the master branch\n+on:\n+  pull_request:\n+    branches: [ github_actions, master, branch-2.* ]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "67519ba3e7bcad39dca73395590267c6f71c7d2e"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjI5MDI1OQ==", "bodyText": "Since the yml files don't exist in the branches themselves, it won't actually run them. For example, note that this code is in the github_actions branch in alluxio/alluxio but it's not actually running in master branch for others right now!", "url": "https://github.com/Alluxio/alluxio/pull/12147#discussion_r496290259", "createdAt": "2020-09-28T23:28:55Z", "author": {"login": "bradyoo"}, "path": ".github/workflows/checkstyle.yml", "diffHunk": "@@ -0,0 +1,56 @@\n+# This is a basic workflow to help you get started with Actions\n+\n+name: Checkstyle, Findbugs, Doc Check, etc.\n+\n+# Controls when the action will run. Triggers the workflow on push or pull request\n+# events but only for the master branch\n+on:\n+  pull_request:\n+    branches: [ github_actions, master, branch-2.* ]", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjI4Njc1MA=="}, "originalCommit": {"oid": "67519ba3e7bcad39dca73395590267c6f71c7d2e"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjI5MDk3Mw==", "bodyText": "good point. so why is this line here at all?", "url": "https://github.com/Alluxio/alluxio/pull/12147#discussion_r496290973", "createdAt": "2020-09-28T23:31:06Z", "author": {"login": "Xenorith"}, "path": ".github/workflows/checkstyle.yml", "diffHunk": "@@ -0,0 +1,56 @@\n+# This is a basic workflow to help you get started with Actions\n+\n+name: Checkstyle, Findbugs, Doc Check, etc.\n+\n+# Controls when the action will run. Triggers the workflow on push or pull request\n+# events but only for the master branch\n+on:\n+  pull_request:\n+    branches: [ github_actions, master, branch-2.* ]", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjI4Njc1MA=="}, "originalCommit": {"oid": "67519ba3e7bcad39dca73395590267c6f71c7d2e"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Njk1OTAyMg==", "bodyText": "ping", "url": "https://github.com/Alluxio/alluxio/pull/12147#discussion_r496959022", "createdAt": "2020-09-29T18:42:45Z", "author": {"login": "Xenorith"}, "path": ".github/workflows/checkstyle.yml", "diffHunk": "@@ -0,0 +1,56 @@\n+# This is a basic workflow to help you get started with Actions\n+\n+name: Checkstyle, Findbugs, Doc Check, etc.\n+\n+# Controls when the action will run. Triggers the workflow on push or pull request\n+# events but only for the master branch\n+on:\n+  pull_request:\n+    branches: [ github_actions, master, branch-2.* ]", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjI4Njc1MA=="}, "originalCommit": {"oid": "67519ba3e7bcad39dca73395590267c6f71c7d2e"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzMyNjM4Nw==", "bodyText": "because the line is still required for it to run. Even with this code being checked in, without this line of branch-2.* it will not run on it.", "url": "https://github.com/Alluxio/alluxio/pull/12147#discussion_r497326387", "createdAt": "2020-09-30T08:18:04Z", "author": {"login": "bradyoo"}, "path": ".github/workflows/checkstyle.yml", "diffHunk": "@@ -0,0 +1,56 @@\n+# This is a basic workflow to help you get started with Actions\n+\n+name: Checkstyle, Findbugs, Doc Check, etc.\n+\n+# Controls when the action will run. Triggers the workflow on push or pull request\n+# events but only for the master branch\n+on:\n+  pull_request:\n+    branches: [ github_actions, master, branch-2.* ]", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjI4Njc1MA=="}, "originalCommit": {"oid": "67519ba3e7bcad39dca73395590267c6f71c7d2e"}, "originalPosition": 9}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzExMTg3OTcwOnYy", "diffSide": "RIGHT", "path": "dev/github/run_tests.sh", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQyMTo1Njo0OVrOHaDm9g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQxNzoyMTo1MlrOHan4hw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzA4NDE1MA==", "bodyText": "why are checkstyle and findbugs disabled in the PR builds?", "url": "https://github.com/Alluxio/alluxio/pull/12147#discussion_r497084150", "createdAt": "2020-09-29T21:56:49Z", "author": {"login": "gpang"}, "path": "dev/github/run_tests.sh", "diffHunk": "@@ -0,0 +1,34 @@\n+#!/usr/bin/env bash\n+#\n+# The Alluxio Open Foundation licenses this work under the Apache License, version 2.0\n+# (the \"License\"). You may not use this work except in compliance with the License, which is\n+# available at www.apache.org/licenses/LICENSE-2.0\n+#\n+# This software is distributed on an \"AS IS\" basis, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n+# either express or implied, as more fully set forth in the License.\n+#\n+# See the NOTICE file distributed with this work for information regarding copyright ownership.\n+#\n+\n+#\n+# This script is run from inside the Docker container\n+#\n+set -ex\n+\n+./dev/github/helper.sh\n+\n+mvn_args=\"\"\n+if [ -n \"${ALLUXIO_MVN_RUNTOEND}\" ]\n+then\n+  mvn_args+=\" -fn -DfailIfNoTests=false --fail-at-end\"\n+fi\n+\n+# Set things up so that the current user has a real name and can authenticate.\n+myuid=$(id -u)\n+mygid=$(id -g)\n+echo \"$myuid:x:$myuid:$mygid:anonymous uid:/home/jenkins:/bin/false\" >> /etc/passwd\n+\n+export MAVEN_OPTS=\"-Dorg.slf4j.simpleLogger.showDateTime=true -Dorg.slf4j.simpleLogger.dateTimeFormat=HH:mm:ss.SSS\"\n+\n+mvn -Duser.home=/home/jenkins test -Pdeveloper -Dmaven.main.skip -Dskip.protoc=true  -Dmaven.javadoc.skip -Dlicense.skip=true \\\n+-Dcheckstyle.skip=true -Dfindbugs.skip=true -Dsurefire.forkCount=2 ${mvn_args} $@", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c3bf984e4fef0769becf1276a599bf6cadd45929"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzIwNTYyNw==", "bodyText": "It is not it is under run_checks.sh checkstyle.yml in .github/ goes through a separate codepath that does builds, checkstyles, etc. note that you can see that category separately in the checks below.", "url": "https://github.com/Alluxio/alluxio/pull/12147#discussion_r497205627", "createdAt": "2020-09-30T02:18:51Z", "author": {"login": "bradyoo"}, "path": "dev/github/run_tests.sh", "diffHunk": "@@ -0,0 +1,34 @@\n+#!/usr/bin/env bash\n+#\n+# The Alluxio Open Foundation licenses this work under the Apache License, version 2.0\n+# (the \"License\"). You may not use this work except in compliance with the License, which is\n+# available at www.apache.org/licenses/LICENSE-2.0\n+#\n+# This software is distributed on an \"AS IS\" basis, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n+# either express or implied, as more fully set forth in the License.\n+#\n+# See the NOTICE file distributed with this work for information regarding copyright ownership.\n+#\n+\n+#\n+# This script is run from inside the Docker container\n+#\n+set -ex\n+\n+./dev/github/helper.sh\n+\n+mvn_args=\"\"\n+if [ -n \"${ALLUXIO_MVN_RUNTOEND}\" ]\n+then\n+  mvn_args+=\" -fn -DfailIfNoTests=false --fail-at-end\"\n+fi\n+\n+# Set things up so that the current user has a real name and can authenticate.\n+myuid=$(id -u)\n+mygid=$(id -g)\n+echo \"$myuid:x:$myuid:$mygid:anonymous uid:/home/jenkins:/bin/false\" >> /etc/passwd\n+\n+export MAVEN_OPTS=\"-Dorg.slf4j.simpleLogger.showDateTime=true -Dorg.slf4j.simpleLogger.dateTimeFormat=HH:mm:ss.SSS\"\n+\n+mvn -Duser.home=/home/jenkins test -Pdeveloper -Dmaven.main.skip -Dskip.protoc=true  -Dmaven.javadoc.skip -Dlicense.skip=true \\\n+-Dcheckstyle.skip=true -Dfindbugs.skip=true -Dsurefire.forkCount=2 ${mvn_args} $@", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzA4NDE1MA=="}, "originalCommit": {"oid": "c3bf984e4fef0769becf1276a599bf6cadd45929"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzIwNTY4NA==", "bodyText": "Checkstyle, Findbugs, Doc Check, etc. / build (pull_request)", "url": "https://github.com/Alluxio/alluxio/pull/12147#discussion_r497205684", "createdAt": "2020-09-30T02:19:05Z", "author": {"login": "bradyoo"}, "path": "dev/github/run_tests.sh", "diffHunk": "@@ -0,0 +1,34 @@\n+#!/usr/bin/env bash\n+#\n+# The Alluxio Open Foundation licenses this work under the Apache License, version 2.0\n+# (the \"License\"). You may not use this work except in compliance with the License, which is\n+# available at www.apache.org/licenses/LICENSE-2.0\n+#\n+# This software is distributed on an \"AS IS\" basis, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n+# either express or implied, as more fully set forth in the License.\n+#\n+# See the NOTICE file distributed with this work for information regarding copyright ownership.\n+#\n+\n+#\n+# This script is run from inside the Docker container\n+#\n+set -ex\n+\n+./dev/github/helper.sh\n+\n+mvn_args=\"\"\n+if [ -n \"${ALLUXIO_MVN_RUNTOEND}\" ]\n+then\n+  mvn_args+=\" -fn -DfailIfNoTests=false --fail-at-end\"\n+fi\n+\n+# Set things up so that the current user has a real name and can authenticate.\n+myuid=$(id -u)\n+mygid=$(id -g)\n+echo \"$myuid:x:$myuid:$mygid:anonymous uid:/home/jenkins:/bin/false\" >> /etc/passwd\n+\n+export MAVEN_OPTS=\"-Dorg.slf4j.simpleLogger.showDateTime=true -Dorg.slf4j.simpleLogger.dateTimeFormat=HH:mm:ss.SSS\"\n+\n+mvn -Duser.home=/home/jenkins test -Pdeveloper -Dmaven.main.skip -Dskip.protoc=true  -Dmaven.javadoc.skip -Dlicense.skip=true \\\n+-Dcheckstyle.skip=true -Dfindbugs.skip=true -Dsurefire.forkCount=2 ${mvn_args} $@", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzA4NDE1MA=="}, "originalCommit": {"oid": "c3bf984e4fef0769becf1276a599bf6cadd45929"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzY3ODQ3MQ==", "bodyText": "Ahhh, I see. Thanks!", "url": "https://github.com/Alluxio/alluxio/pull/12147#discussion_r497678471", "createdAt": "2020-09-30T17:21:52Z", "author": {"login": "gpang"}, "path": "dev/github/run_tests.sh", "diffHunk": "@@ -0,0 +1,34 @@\n+#!/usr/bin/env bash\n+#\n+# The Alluxio Open Foundation licenses this work under the Apache License, version 2.0\n+# (the \"License\"). You may not use this work except in compliance with the License, which is\n+# available at www.apache.org/licenses/LICENSE-2.0\n+#\n+# This software is distributed on an \"AS IS\" basis, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n+# either express or implied, as more fully set forth in the License.\n+#\n+# See the NOTICE file distributed with this work for information regarding copyright ownership.\n+#\n+\n+#\n+# This script is run from inside the Docker container\n+#\n+set -ex\n+\n+./dev/github/helper.sh\n+\n+mvn_args=\"\"\n+if [ -n \"${ALLUXIO_MVN_RUNTOEND}\" ]\n+then\n+  mvn_args+=\" -fn -DfailIfNoTests=false --fail-at-end\"\n+fi\n+\n+# Set things up so that the current user has a real name and can authenticate.\n+myuid=$(id -u)\n+mygid=$(id -g)\n+echo \"$myuid:x:$myuid:$mygid:anonymous uid:/home/jenkins:/bin/false\" >> /etc/passwd\n+\n+export MAVEN_OPTS=\"-Dorg.slf4j.simpleLogger.showDateTime=true -Dorg.slf4j.simpleLogger.dateTimeFormat=HH:mm:ss.SSS\"\n+\n+mvn -Duser.home=/home/jenkins test -Pdeveloper -Dmaven.main.skip -Dskip.protoc=true  -Dmaven.javadoc.skip -Dlicense.skip=true \\\n+-Dcheckstyle.skip=true -Dfindbugs.skip=true -Dsurefire.forkCount=2 ${mvn_args} $@", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzA4NDE1MA=="}, "originalCommit": {"oid": "c3bf984e4fef0769becf1276a599bf6cadd45929"}, "originalPosition": 34}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzExNTY0ODMwOnYy", "diffSide": "RIGHT", "path": "dev/github/helper.sh", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQxNzoyMzo1M1rOHan8zQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQxODowMjoxNVrOHbVagA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzY3OTU2NQ==", "bodyText": "This is for the checkstyle and findbugs task, right? This is also skipping checkstyle, findbugs, etc. Is this correct? I am a bit confused.\nThis is an output for this PR's checkstyle check. https://pipelines.actions.githubusercontent.com/110HvfICxw4TXSOnsd72jk32naeMsNgZF0xPcAxH5PwqdiBHUN/_apis/pipelines/1/runs/106/signedlogcontent/3?urlExpires=2020-09-30T17%3A18%3A37.2939398Z&urlSigningMethod=HMACV1&urlSignature=y%2B13RULZz8azm5yA9KZIWAnIzZTiBsg0JVWduMCxaDQ%3D\nHowever, in that output, I see\n2020-09-30T08:20:56.6182722Z + mvn -Duser.home=/home/jenkins -T 4C clean install -Pdeveloper -Dfindbugs.skip -Dcheckstyle.skip -DskipTests -Dmaven.javadoc.skip -Dlicense.skip -Dsurefire.forkCount=2 -fn -DfailIfNoTests=false --fail-at-end\n\nThis looks like all the checks are skipped?", "url": "https://github.com/Alluxio/alluxio/pull/12147#discussion_r497679565", "createdAt": "2020-09-30T17:23:53Z", "author": {"login": "gpang"}, "path": "dev/github/helper.sh", "diffHunk": "@@ -0,0 +1,39 @@\n+#!/usr/bin/env bash\n+#\n+# The Alluxio Open Foundation licenses this work under the Apache License, version 2.0\n+# (the \"License\"). You may not use this work except in compliance with the License, which is\n+# available at www.apache.org/licenses/LICENSE-2.0\n+#\n+# This software is distributed on an \"AS IS\" basis, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n+# either express or implied, as more fully set forth in the License.\n+#\n+# See the NOTICE file distributed with this work for information regarding copyright ownership.\n+#\n+\n+# This script is called by both run_checks.sh and run_tests.sh to perform the initial build process\n+\n+#\n+# This script is run from inside the Docker container\n+#\n+set -ex\n+\n+if [ -n \"${ALLUXIO_GIT_CLEAN}\" ]\n+then\n+  git clean -fdx\n+fi\n+\n+mvn_args=\"\"\n+if [ -n \"${ALLUXIO_MVN_RUNTOEND}\" ]\n+then\n+  mvn_args+=\" -fn -DfailIfNoTests=false --fail-at-end\"\n+fi\n+\n+export MAVEN_OPTS=\"-Dorg.slf4j.simpleLogger.showDateTime=true -Dorg.slf4j.simpleLogger.dateTimeFormat=HH:mm:ss.SSS\"\n+\n+# Always use java 8 to compile the source code\n+JAVA_HOME_BACKUP=${JAVA_HOME}\n+PATH_BACKUP=${PATH}\n+JAVA_HOME=/usr/local/openjdk-8\n+PATH=$JAVA_HOME/bin:$PATH\n+mvn -Duser.home=/home/jenkins -T 4C clean install -Pdeveloper -Dfindbugs.skip -Dcheckstyle.skip -DskipTests -Dmaven.javadoc.skip \\", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "865ade71818392f03ce9be28549927a52239531b"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Nzg1NTA4NQ==", "bodyText": "Oh wow you are right. I accidentally dropped it while doing the refactor during the review process. I ended up undoing the refactor and moved helper.sh into the respective callers and modified the findbug/checkstyle skip parts.", "url": "https://github.com/Alluxio/alluxio/pull/12147#discussion_r497855085", "createdAt": "2020-09-30T23:26:05Z", "author": {"login": "bradyoo"}, "path": "dev/github/helper.sh", "diffHunk": "@@ -0,0 +1,39 @@\n+#!/usr/bin/env bash\n+#\n+# The Alluxio Open Foundation licenses this work under the Apache License, version 2.0\n+# (the \"License\"). You may not use this work except in compliance with the License, which is\n+# available at www.apache.org/licenses/LICENSE-2.0\n+#\n+# This software is distributed on an \"AS IS\" basis, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n+# either express or implied, as more fully set forth in the License.\n+#\n+# See the NOTICE file distributed with this work for information regarding copyright ownership.\n+#\n+\n+# This script is called by both run_checks.sh and run_tests.sh to perform the initial build process\n+\n+#\n+# This script is run from inside the Docker container\n+#\n+set -ex\n+\n+if [ -n \"${ALLUXIO_GIT_CLEAN}\" ]\n+then\n+  git clean -fdx\n+fi\n+\n+mvn_args=\"\"\n+if [ -n \"${ALLUXIO_MVN_RUNTOEND}\" ]\n+then\n+  mvn_args+=\" -fn -DfailIfNoTests=false --fail-at-end\"\n+fi\n+\n+export MAVEN_OPTS=\"-Dorg.slf4j.simpleLogger.showDateTime=true -Dorg.slf4j.simpleLogger.dateTimeFormat=HH:mm:ss.SSS\"\n+\n+# Always use java 8 to compile the source code\n+JAVA_HOME_BACKUP=${JAVA_HOME}\n+PATH_BACKUP=${PATH}\n+JAVA_HOME=/usr/local/openjdk-8\n+PATH=$JAVA_HOME/bin:$PATH\n+mvn -Duser.home=/home/jenkins -T 4C clean install -Pdeveloper -Dfindbugs.skip -Dcheckstyle.skip -DskipTests -Dmaven.javadoc.skip \\", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzY3OTU2NQ=="}, "originalCommit": {"oid": "865ade71818392f03ce9be28549927a52239531b"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Nzg2NjQwOQ==", "bodyText": "Fixed now.", "url": "https://github.com/Alluxio/alluxio/pull/12147#discussion_r497866409", "createdAt": "2020-10-01T00:06:47Z", "author": {"login": "bradyoo"}, "path": "dev/github/helper.sh", "diffHunk": "@@ -0,0 +1,39 @@\n+#!/usr/bin/env bash\n+#\n+# The Alluxio Open Foundation licenses this work under the Apache License, version 2.0\n+# (the \"License\"). You may not use this work except in compliance with the License, which is\n+# available at www.apache.org/licenses/LICENSE-2.0\n+#\n+# This software is distributed on an \"AS IS\" basis, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n+# either express or implied, as more fully set forth in the License.\n+#\n+# See the NOTICE file distributed with this work for information regarding copyright ownership.\n+#\n+\n+# This script is called by both run_checks.sh and run_tests.sh to perform the initial build process\n+\n+#\n+# This script is run from inside the Docker container\n+#\n+set -ex\n+\n+if [ -n \"${ALLUXIO_GIT_CLEAN}\" ]\n+then\n+  git clean -fdx\n+fi\n+\n+mvn_args=\"\"\n+if [ -n \"${ALLUXIO_MVN_RUNTOEND}\" ]\n+then\n+  mvn_args+=\" -fn -DfailIfNoTests=false --fail-at-end\"\n+fi\n+\n+export MAVEN_OPTS=\"-Dorg.slf4j.simpleLogger.showDateTime=true -Dorg.slf4j.simpleLogger.dateTimeFormat=HH:mm:ss.SSS\"\n+\n+# Always use java 8 to compile the source code\n+JAVA_HOME_BACKUP=${JAVA_HOME}\n+PATH_BACKUP=${PATH}\n+JAVA_HOME=/usr/local/openjdk-8\n+PATH=$JAVA_HOME/bin:$PATH\n+mvn -Duser.home=/home/jenkins -T 4C clean install -Pdeveloper -Dfindbugs.skip -Dcheckstyle.skip -DskipTests -Dmaven.javadoc.skip \\", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzY3OTU2NQ=="}, "originalCommit": {"oid": "865ade71818392f03ce9be28549927a52239531b"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODQyNDQ0OA==", "bodyText": "cool, thanks! The mvn command looks correct now.", "url": "https://github.com/Alluxio/alluxio/pull/12147#discussion_r498424448", "createdAt": "2020-10-01T18:02:15Z", "author": {"login": "gpang"}, "path": "dev/github/helper.sh", "diffHunk": "@@ -0,0 +1,39 @@\n+#!/usr/bin/env bash\n+#\n+# The Alluxio Open Foundation licenses this work under the Apache License, version 2.0\n+# (the \"License\"). You may not use this work except in compliance with the License, which is\n+# available at www.apache.org/licenses/LICENSE-2.0\n+#\n+# This software is distributed on an \"AS IS\" basis, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n+# either express or implied, as more fully set forth in the License.\n+#\n+# See the NOTICE file distributed with this work for information regarding copyright ownership.\n+#\n+\n+# This script is called by both run_checks.sh and run_tests.sh to perform the initial build process\n+\n+#\n+# This script is run from inside the Docker container\n+#\n+set -ex\n+\n+if [ -n \"${ALLUXIO_GIT_CLEAN}\" ]\n+then\n+  git clean -fdx\n+fi\n+\n+mvn_args=\"\"\n+if [ -n \"${ALLUXIO_MVN_RUNTOEND}\" ]\n+then\n+  mvn_args+=\" -fn -DfailIfNoTests=false --fail-at-end\"\n+fi\n+\n+export MAVEN_OPTS=\"-Dorg.slf4j.simpleLogger.showDateTime=true -Dorg.slf4j.simpleLogger.dateTimeFormat=HH:mm:ss.SSS\"\n+\n+# Always use java 8 to compile the source code\n+JAVA_HOME_BACKUP=${JAVA_HOME}\n+PATH_BACKUP=${PATH}\n+JAVA_HOME=/usr/local/openjdk-8\n+PATH=$JAVA_HOME/bin:$PATH\n+mvn -Duser.home=/home/jenkins -T 4C clean install -Pdeveloper -Dfindbugs.skip -Dcheckstyle.skip -DskipTests -Dmaven.javadoc.skip \\", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzY3OTU2NQ=="}, "originalCommit": {"oid": "865ade71818392f03ce9be28549927a52239531b"}, "originalPosition": 38}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1205, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}