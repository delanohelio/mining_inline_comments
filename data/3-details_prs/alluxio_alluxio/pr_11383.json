{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEzMzIzNjIw", "number": 11383, "title": "Make reserved space on directories only when required", "bodyText": "This is to improve the compatibility of multi-tier management for configurations that don't need the functionality.\nFor when the reserved space is required by a later configuration change, the swap-restore task will make sure reserved space will be carved out if necessary.", "createdAt": "2020-05-05T06:05:50Z", "url": "https://github.com/Alluxio/alluxio/pull/11383", "merged": true, "mergeCommit": {"oid": "1763bd81ab91450ad544a0c422613555e14d4edf"}, "closed": true, "closedAt": "2020-05-07T01:36:27Z", "author": {"login": "ggezer"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABceNvrNgH2gAyNDEzMzIzNjIwOmVmOTAzYzFjNTljMTM0ODdlMzAzM2ZhZDMyZmExOGFhNzI4MmFjMDE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcezGosgFqTQwNzA5NTI0MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "ef903c1c59c13487e3033fad32fa18aa7282ac01", "author": {"user": {"login": "ggezer", "name": "G\u00f6kt\u00fcrk Gezer"}}, "url": "https://github.com/Alluxio/alluxio/commit/ef903c1c59c13487e3033fad32fa18aa7282ac01", "committedDate": "2020-05-05T06:04:39Z", "message": "Reserve space on directories only when required"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "797685f7b58eb5783a1adcdebb75f4060fe972e6", "author": {"user": {"login": "ggezer", "name": "G\u00f6kt\u00fcrk Gezer"}}, "url": "https://github.com/Alluxio/alluxio/commit/797685f7b58eb5783a1adcdebb75f4060fe972e6", "committedDate": "2020-05-05T06:33:39Z", "message": "Test changes"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cd8be33cbec4a486f2ba58a06e4dfab9f11325c5", "author": {"user": {"login": "ggezer", "name": "G\u00f6kt\u00fcrk Gezer"}}, "url": "https://github.com/Alluxio/alluxio/commit/cd8be33cbec4a486f2ba58a06e4dfab9f11325c5", "committedDate": "2020-05-05T06:04:51Z", "message": "Test changes"}, "afterCommit": {"oid": "797685f7b58eb5783a1adcdebb75f4060fe972e6", "author": {"user": {"login": "ggezer", "name": "G\u00f6kt\u00fcrk Gezer"}}, "url": "https://github.com/Alluxio/alluxio/commit/797685f7b58eb5783a1adcdebb75f4060fe972e6", "committedDate": "2020-05-05T06:33:39Z", "message": "Test changes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA3MDkyNzYx", "url": "https://github.com/Alluxio/alluxio/pull/11383#pullrequestreview-407092761", "createdAt": "2020-05-07T01:28:19Z", "commit": {"oid": "797685f7b58eb5783a1adcdebb75f4060fe972e6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QwMToyODoxOVrOGRrKjw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QwMToyODoxOVrOGRrKjw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTE4NjE5MQ==", "bodyText": "Should we reserve the total tier reserve bytes in each directory in the tier?", "url": "https://github.com/Alluxio/alluxio/pull/11383#discussion_r421186191", "createdAt": "2020-05-07T01:28:19Z", "author": {"login": "calvinjia"}, "path": "core/server/worker/src/main/java/alluxio/worker/block/meta/StorageTier.java", "diffHunk": "@@ -99,7 +104,7 @@ private void initStorageTier()\n       int mediumTypeindex = i >= dirMedium.length ? dirMedium.length - 1 : i;\n       long capacity = FormatUtils.parseSpaceSize(dirQuotas[index]);\n       try {\n-        StorageDir dir = StorageDir.newStorageDir(this, i, capacity, reservedSpaceBytes,\n+        StorageDir dir = StorageDir.newStorageDir(this, i, capacity, reservedBytes,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "797685f7b58eb5783a1adcdebb75f4060fe972e6"}, "originalPosition": 30}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA3MDkyODc0", "url": "https://github.com/Alluxio/alluxio/pull/11383#pullrequestreview-407092874", "createdAt": "2020-05-07T01:28:39Z", "commit": {"oid": "797685f7b58eb5783a1adcdebb75f4060fe972e6"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA3MDk1MjQw", "url": "https://github.com/Alluxio/alluxio/pull/11383#pullrequestreview-407095240", "createdAt": "2020-05-07T01:36:13Z", "commit": {"oid": "797685f7b58eb5783a1adcdebb75f4060fe972e6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4592, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}