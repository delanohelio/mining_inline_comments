{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzcxNTg4NTkz", "number": 10848, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNlQxODo1Njo1MVrODdy1AQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNlQxODo1Njo1MVrODdy1AQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMyNTY4MDY1OnYy", "diffSide": "RIGHT", "path": "core/common/src/main/java/alluxio/metrics/MetricKey.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNlQxODo1Njo1MVrOFmmeeA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNlQxOToxMzozNlrOFmm-_g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjAyMDYwMA==", "bodyText": "Aggreagated is spelled like Aggregated. not related to this PR, but feel free to rename the method", "url": "https://github.com/Alluxio/alluxio/pull/10848#discussion_r376020600", "createdAt": "2020-02-06T18:56:51Z", "author": {"login": "madanadit"}, "path": "core/common/src/main/java/alluxio/metrics/MetricKey.java", "diffHunk": "@@ -533,12 +533,85 @@ public MetricKey build() {\n           .build();\n \n   // Worker metrics\n+  public static final MetricKey WORKER_ASYNC_CACHE_DUPLICATE_REQUESTS =\n+      new Builder(Name.WORKER_ASYNC_CACHE_DUPLICATE_REQUESTS)\n+          .setDescription(\"Total number of duplicated async cache request received by this worker\")\n+          .setMetricType(MetricType.COUNTER)\n+          .setIsClusterAggreagated(false)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "27ff209417d320cf31fbfaacd62b6cf693746aaa"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjAyMTg1Ng==", "bodyText": "how is IsClusterAggregated used? I'm not quiet sure how to set this to true/false", "url": "https://github.com/Alluxio/alluxio/pull/10848#discussion_r376021856", "createdAt": "2020-02-06T18:59:20Z", "author": {"login": "madanadit"}, "path": "core/common/src/main/java/alluxio/metrics/MetricKey.java", "diffHunk": "@@ -533,12 +533,85 @@ public MetricKey build() {\n           .build();\n \n   // Worker metrics\n+  public static final MetricKey WORKER_ASYNC_CACHE_DUPLICATE_REQUESTS =\n+      new Builder(Name.WORKER_ASYNC_CACHE_DUPLICATE_REQUESTS)\n+          .setDescription(\"Total number of duplicated async cache request received by this worker\")\n+          .setMetricType(MetricType.COUNTER)\n+          .setIsClusterAggreagated(false)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjAyMDYwMA=="}, "originalCommit": {"oid": "27ff209417d320cf31fbfaacd62b6cf693746aaa"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjAyODkyNg==", "bodyText": "Oh!!! Thanks for finding it!\nThis is used when worker/client report metrics. They only report the isClusterAggregated == true metrics. This is helpful to reduce the metrics client sent and leading master stored.\nNow I only define those metrics that are actually aggregated to cluster metrics in DefaultMetricsMaster with isClusterAggregated == true. In the future, maybe all the metrics that we think can be aggregated at cluster level can set it to true.", "url": "https://github.com/Alluxio/alluxio/pull/10848#discussion_r376028926", "createdAt": "2020-02-06T19:13:36Z", "author": {"login": "LuQQiu"}, "path": "core/common/src/main/java/alluxio/metrics/MetricKey.java", "diffHunk": "@@ -533,12 +533,85 @@ public MetricKey build() {\n           .build();\n \n   // Worker metrics\n+  public static final MetricKey WORKER_ASYNC_CACHE_DUPLICATE_REQUESTS =\n+      new Builder(Name.WORKER_ASYNC_CACHE_DUPLICATE_REQUESTS)\n+          .setDescription(\"Total number of duplicated async cache request received by this worker\")\n+          .setMetricType(MetricType.COUNTER)\n+          .setIsClusterAggreagated(false)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjAyMDYwMA=="}, "originalCommit": {"oid": "27ff209417d320cf31fbfaacd62b6cf693746aaa"}, "originalPosition": 8}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2153, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}