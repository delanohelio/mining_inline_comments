{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg5MDEyOTg1", "number": 11173, "title": "Change K8s Alluxio master to format journal in initContainer", "bodyText": "This moves the journal formatting logic from a standalone Job to an initContainer in the StatefulSet. This will resolve the conflicts against the journal volume between the master and job pods.", "createdAt": "2020-03-16T06:21:29Z", "url": "https://github.com/Alluxio/alluxio/pull/11173", "merged": true, "mergeCommit": {"oid": "c19e2183d5f00f47fc3a87c1b331943d0ed5fff6"}, "closed": true, "closedAt": "2020-03-17T19:39:46Z", "author": {"login": "jiacheliu3"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcOH5t6AH2gAyMzg5MDEyOTg1OjE3OGQ4MDhkMzNmOWU2M2M2N2I1MDI3YTllYWY1ODE3YjhiZDNiYWU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcOoCDYAFqTM3NjM0Nzk0MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "178d808d33f9e63c67b5027a9eaf5817b8bd3bae", "author": {"user": {"login": "jiacheliu3", "name": "Jiacheng Liu"}}, "url": "https://github.com/Alluxio/alluxio/commit/178d808d33f9e63c67b5027a9eaf5817b8bd3bae", "committedDate": "2020-03-16T06:13:24Z", "message": "remove journal formatting job"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ddb78b6eac775111f21122cffe22da35d80326c9", "author": {"user": {"login": "jiacheliu3", "name": "Jiacheng Liu"}}, "url": "https://github.com/Alluxio/alluxio/commit/ddb78b6eac775111f21122cffe22da35d80326c9", "committedDate": "2020-03-16T06:17:13Z", "message": "remove occurrence of the job"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc0OTM0NTgx", "url": "https://github.com/Alluxio/alluxio/pull/11173#pullrequestreview-374934581", "createdAt": "2020-03-16T06:23:35Z", "commit": {"oid": "ddb78b6eac775111f21122cffe22da35d80326c9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQwNjoyMzozNVrOF2msyQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQwNjoyMzozNVrOF2msyQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjgwMTQ4MQ==", "bodyText": "This is because we moved the if-else to inside the initContainers. It's fine to have initContainers as empty.", "url": "https://github.com/Alluxio/alluxio/pull/11173#discussion_r392801481", "createdAt": "2020-03-16T06:23:35Z", "author": {"login": "jiacheliu3"}, "path": "integration/kubernetes/singleMaster-hdfsJournal/master/alluxio-master-statefulset.yaml.template", "diffHunk": "@@ -45,6 +45,7 @@ spec:\n       nodeSelector:\n       securityContext:\n         fsGroup: 1000\n+      initContainers:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ddb78b6eac775111f21122cffe22da35d80326c9"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc1NzE1MzM1", "url": "https://github.com/Alluxio/alluxio/pull/11173#pullrequestreview-375715335", "createdAt": "2020-03-17T03:18:22Z", "commit": {"oid": "ddb78b6eac775111f21122cffe22da35d80326c9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QwMzoxODoyMlrOF3MqOQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QwMzoxODoyMlrOF3MqOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzQyMzQxNw==", "bodyText": "is this chown still needed now that we use local pv instead of hostPath? i would like to get rid of runAsUser: 0 as that might be unavailable in security constrained environments", "url": "https://github.com/Alluxio/alluxio/pull/11173#discussion_r393423417", "createdAt": "2020-03-17T03:18:22Z", "author": {"login": "madanadit"}, "path": "integration/kubernetes/helm-chart/alluxio/templates/master/statefulset.yaml", "diffHunk": "@@ -60,8 +60,8 @@ spec:\n       {{- end }}\n       securityContext:\n         fsGroup: {{ .Values.fsGroup }}\n-      {{- if and $needJournalVolume (not $isRoot) }}\n       initContainers:\n+      {{- if and $needJournalVolume (not $isRoot) }}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ddb78b6eac775111f21122cffe22da35d80326c9"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "739dc98f09e305e138ca7e8759a5ec6e2ed5705f", "author": {"user": {"login": "jiacheliu3", "name": "Jiacheng Liu"}}, "url": "https://github.com/Alluxio/alluxio/commit/739dc98f09e305e138ca7e8759a5ec6e2ed5705f", "committedDate": "2020-03-17T08:08:45Z", "message": "remove journal chown"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc2MzQ3OTQw", "url": "https://github.com/Alluxio/alluxio/pull/11173#pullrequestreview-376347940", "createdAt": "2020-03-17T19:39:28Z", "commit": {"oid": "739dc98f09e305e138ca7e8759a5ec6e2ed5705f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4668, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}