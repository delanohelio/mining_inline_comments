{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYwMTc0NTc0", "number": 10706, "title": "Add listening address for embedded journal", "bodyText": "Fixes #10693", "createdAt": "2020-01-07T21:11:25Z", "url": "https://github.com/Alluxio/alluxio/pull/10706", "merged": true, "mergeCommit": {"oid": "0d5f9f6547394a5154a4db82d4e56cdf22e75f6b"}, "closed": true, "closedAt": "2020-01-14T19:22:45Z", "author": {"login": "ggezer"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb4HKoRAH2gAyMzYwMTc0NTc0OmE3ZTM5NzQwNjQyMzYxNTRkYzgyYTNkYTJlODk1MzJlMzY5Y2Y0NmE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb6EYQVgH2gAyMzYwMTc0NTc0OjE3OGFiOGI3ZDIxNzg5ZWZmOTMzMzJkMzE1YjhlZjExMzQ5OTM2MDE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "a7e3974064236154dc82a3da2e89532e369cf46a", "author": {"user": {"login": "ggezer", "name": "G\u00f6kt\u00fcrk Gezer"}}, "url": "https://github.com/Alluxio/alluxio/commit/a7e3974064236154dc82a3da2e89532e369cf46a", "committedDate": "2020-01-07T20:55:38Z", "message": "Add external proxy support for GrpcMessagingTransport"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d3d8c5ca498d866db16a87fd26264ca8fa896240", "author": {"user": {"login": "ggezer", "name": "G\u00f6kt\u00fcrk Gezer"}}, "url": "https://github.com/Alluxio/alluxio/commit/d3d8c5ca498d866db16a87fd26264ca8fa896240", "committedDate": "2020-01-07T21:10:38Z", "message": "Use external proxy infra to pass bind address"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "08ea41b7ffa53653649fd5c93c997d5d3b8ccd68", "author": {"user": {"login": "ggezer", "name": "G\u00f6kt\u00fcrk Gezer"}}, "url": "https://github.com/Alluxio/alluxio/commit/08ea41b7ffa53653649fd5c93c997d5d3b8ccd68", "committedDate": "2020-01-07T22:00:29Z", "message": "Fix bug-check"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQxNDk0MTIw", "url": "https://github.com/Alluxio/alluxio/pull/10706#pullrequestreview-341494120", "createdAt": "2020-01-11T01:32:47Z", "commit": {"oid": "08ea41b7ffa53653649fd5c93c997d5d3b8ccd68"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMVQwMTozMjo0N1rOFcjoGQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMVQwMTozMjo0N1rOFcjoGQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTQ4ODE1Mw==", "bodyText": "Consider creating the GrpcMessagingTransport here? Then we won't have to do as many null checks here and in GrpcMessagingTransport since we can assume the proxy is only set if necessary.", "url": "https://github.com/Alluxio/alluxio/pull/10706#discussion_r365488153", "createdAt": "2020-01-11T01:32:47Z", "author": {"login": "calvinjia"}, "path": "core/server/common/src/main/java/alluxio/master/journal/raft/RaftJournalSystem.java", "diffHunk": "@@ -238,14 +239,21 @@ private synchronized void initServer() {\n       mStateMachine.close();\n     }\n     mStateMachine = new JournalStateMachine(mJournals, () -> this.getJournalSinks(null));\n+    // Read external proxy configuration.\n+    GrpcMessagingProxy serverProxy = null;\n+    if (mConf.getProxyAddress() != null) {\n+      serverProxy = new GrpcMessagingProxy();\n+      serverProxy.addProxy(getLocalAddress(mConf), new Address(mConf.getProxyAddress()));\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "08ea41b7ffa53653649fd5c93c997d5d3b8ccd68"}, "originalPosition": 17}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "178ab8b7d21789eff93332d315b8ef1134993601", "author": {"user": {"login": "ggezer", "name": "G\u00f6kt\u00fcrk Gezer"}}, "url": "https://github.com/Alluxio/alluxio/commit/178ab8b7d21789eff93332d315b8ef1134993601", "committedDate": "2020-01-13T22:48:39Z", "message": "Require valid proxy reference"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3248, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}