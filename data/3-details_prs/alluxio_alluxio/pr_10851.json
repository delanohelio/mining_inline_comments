{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzcxNjcwMDk3", "number": 10851, "title": "Allow eventual consistency in ufs contract tests", "bodyText": "Increase the retry timeout and interval for the ufs contract tests.", "createdAt": "2020-02-06T01:52:34Z", "url": "https://github.com/Alluxio/alluxio/pull/10851", "merged": true, "mergeCommit": {"oid": "cc5fa4fca481647feaec1f0f770f7f64dc4624ed"}, "closed": true, "closedAt": "2020-02-06T02:59:14Z", "author": {"login": "gpang"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcBgxluAH2gAyMzcxNjcwMDk3OjhiZDRmN2E2NTk3ODRhMmVhZDM0NWE1OGMxNDYyYzI4OGFmNDQxN2Q=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcBhdKyAFqTM1NDE3MDQzOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "8bd4f7a659784a2ead345a58c1462c288af4417d", "author": {"user": {"login": "gpang", "name": "Gene Pang"}}, "url": "https://github.com/Alluxio/alluxio/commit/8bd4f7a659784a2ead345a58c1462c288af4417d", "committedDate": "2020-02-06T01:51:08Z", "message": "[WIP] Allow eventual consistency in ufs"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU0MTYzMDI5", "url": "https://github.com/Alluxio/alluxio/pull/10851#pullrequestreview-354163029", "createdAt": "2020-02-06T02:08:52Z", "commit": {"oid": "8bd4f7a659784a2ead345a58c1462c288af4417d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNlQwMjowODo1M1rOFmNUTQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNlQwMjowODo1M1rOFmNUTQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTYwODM5Nw==", "bodyText": "why do we need an atomic here?", "url": "https://github.com/Alluxio/alluxio/pull/10851#discussion_r375608397", "createdAt": "2020-02-06T02:08:53Z", "author": {"login": "madanadit"}, "path": "examples/src/main/java/alluxio/examples/UnderFileSystemCommonOperations.java", "diffHunk": "@@ -675,27 +673,24 @@ public void listStatusFileTest() throws IOException {\n    * Test for listing large directory.\n    */\n   @RelatedS3Operations(operations = {\"putObject\", \"listObjectsV2\", \"getObjectMetadata\"})\n-  public void listLargeDirectoryTest() throws IOException {\n+  public void listLargeDirectoryTest() throws Exception {\n     LargeDirectoryConfig config = prepareLargeDirectory();\n     String[] children = config.getChildren();\n \n     // Retry for some time to allow list operations eventual consistency for S3 and GCS.\n     // See http://docs.aws.amazon.com/AmazonS3/latest/dev/Introduction.html and\n     // https://cloud.google.com/storage/docs/consistency for more details.\n-    // Note: not using CommonUtils.waitFor here because we intend to sleep with a longer interval.\n-    UfsStatus[] results = new UfsStatus[] {};\n-    for (int i = 0; i < 50; i++) {\n-      results = mUfs.listStatus(config.getTopLevelDirectory());\n-      if (children.length == results.length) {\n-        break;\n+    AtomicReference<UfsStatus[]> results = new AtomicReference<>();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8bd4f7a659784a2ead345a58c1462c288af4417d"}, "originalPosition": 69}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU0MTYzMTI4", "url": "https://github.com/Alluxio/alluxio/pull/10851#pullrequestreview-354163128", "createdAt": "2020-02-06T02:09:14Z", "commit": {"oid": "8bd4f7a659784a2ead345a58c1462c288af4417d"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU0MTcwNDM5", "url": "https://github.com/Alluxio/alluxio/pull/10851#pullrequestreview-354170439", "createdAt": "2020-02-06T02:38:44Z", "commit": {"oid": "8bd4f7a659784a2ead345a58c1462c288af4417d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3197, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}