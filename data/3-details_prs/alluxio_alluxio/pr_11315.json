{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA1NDgxMTI1", "number": 11315, "title": "Format K8s Configmap helm template", "bodyText": "This change breaks the one-liner property for each Java option into one line for each single property. This makes the helm template more manageable.\nThis addresses #11081", "createdAt": "2020-04-18T10:48:24Z", "url": "https://github.com/Alluxio/alluxio/pull/11315", "merged": true, "mergeCommit": {"oid": "214089f980b28f107afc7cbef75deaec921be709"}, "closed": true, "closedAt": "2020-04-26T18:17:37Z", "author": {"login": "jiacheliu3"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcZmeWgAFqTM5Njg0NDQwNA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcbaBS3gBqjMyNzI5MDQxMzQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2ODQ0NDA0", "url": "https://github.com/Alluxio/alluxio/pull/11315#pullrequestreview-396844404", "createdAt": "2020-04-20T22:01:35Z", "commit": {"oid": "832c4d5f0e8fa5b56de4313ce83a6e2555a05241"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQyMjowMTozNVrOGIpgKg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQyMjowMjo0MVrOGIph8w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTcyMTc3MA==", "bodyText": "this seems like a redundant pattern, can we have a builder for java opts?", "url": "https://github.com/Alluxio/alluxio/pull/11315#discussion_r411721770", "createdAt": "2020-04-20T22:01:35Z", "author": {"login": "madanadit"}, "path": "integration/kubernetes/helm-chart/alluxio/templates/config/alluxio-conf.yaml", "diffHunk": "@@ -32,15 +32,141 @@ metadata:\n     heritage: {{ .Release.Service }}\n data:\n   ALLUXIO_JAVA_OPTS: |-\n-    {{if $isSingleMaster}}-Dalluxio.master.hostname={{ $fullName }}-{{ $defaultMasterName }}{{end}} -Dalluxio.master.journal.type={{ .Values.journal.type }} -Dalluxio.master.journal.folder={{ .Values.journal.folder }} {{if $isHaEmbedded}}-Dalluxio.master.embedded.journal.addresses={{range $i := until $masterCount}}{{ $fullName }}-master-{{$i}}:19200,{{end}}{{end}} {{ .Values.jvmOptions }} {{- range $key, $val := .Values.properties }} -D{{ $key }}={{ $val }} {{ end }}\n+    {{- $alluxioJavaOpts := list }}\n+\n+    {{- /* Specify master hostname if single master */}}\n+    {{- if $isSingleMaster }}\n+      {{- $alluxioJavaOpts = printf \"-Dalluxio.master.hostname=%v-%v\" $fullName $defaultMasterName | append $alluxioJavaOpts }}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "832c4d5f0e8fa5b56de4313ce83a6e2555a05241"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTcyMjIyNw==", "bodyText": "we might still need the leading / trailing space, until we fix the issue with appending common java opts in libexec. alternatively, you could fix that issue", "url": "https://github.com/Alluxio/alluxio/pull/11315#discussion_r411722227", "createdAt": "2020-04-20T22:02:41Z", "author": {"login": "madanadit"}, "path": "integration/kubernetes/multiMaster-embeddedJournal/alluxio-configmap.yaml.template", "diffHunk": "@@ -28,16 +28,16 @@ metadata:\n     heritage: Tiller\n data:\n   ALLUXIO_JAVA_OPTS: |-\n-     -Dalluxio.master.journal.type=EMBEDDED -Dalluxio.master.journal.folder=/journal -Dalluxio.master.embedded.journal.addresses=alluxio-master-0:19200,alluxio-master-1:19200,alluxio-master-2:19200,  -Dalluxio.security.stale.channel.purge.interval=365d ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "832c4d5f0e8fa5b56de4313ce83a6e2555a05241"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAwMzY2NDgz", "url": "https://github.com/Alluxio/alluxio/pull/11315#pullrequestreview-400366483", "createdAt": "2020-04-25T06:51:46Z", "commit": {"oid": "832c4d5f0e8fa5b56de4313ce83a6e2555a05241"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "af869653fe4b963a712ac31389314c8c57d6d2d9", "author": {"user": {"login": "jiacheliu3", "name": "Jiacheng Liu"}}, "url": "https://github.com/Alluxio/alluxio/commit/af869653fe4b963a712ac31389314c8c57d6d2d9", "committedDate": "2020-04-26T12:39:23Z", "message": "format configmap"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2b3fcd876a1745fee9eedd662da64491a7cc7e06", "author": {"user": {"login": "jiacheliu3", "name": "Jiacheng Liu"}}, "url": "https://github.com/Alluxio/alluxio/commit/2b3fcd876a1745fee9eedd662da64491a7cc7e06", "committedDate": "2020-04-26T12:40:03Z", "message": "put java opts back to slepp"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7cf80ba7b09170e6fdf680f75bac9bb8a0466c4e", "author": {"user": {"login": "jiacheliu3", "name": "Jiacheng Liu"}}, "url": "https://github.com/Alluxio/alluxio/commit/7cf80ba7b09170e6fdf680f75bac9bb8a0466c4e", "committedDate": "2020-04-26T12:40:04Z", "message": "remove experimental lines"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "710d29a94d272ead14ee6cb8ab223a49150c37ff", "author": {"user": {"login": "jiacheliu3", "name": "Jiacheng Liu"}}, "url": "https://github.com/Alluxio/alluxio/commit/710d29a94d272ead14ee6cb8ab223a49150c37ff", "committedDate": "2020-04-26T12:40:33Z", "message": "remove 0.0.0.0 default values"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "832c4d5f0e8fa5b56de4313ce83a6e2555a05241", "author": {"user": {"login": "jiacheliu3", "name": "Jiacheng Liu"}}, "url": "https://github.com/Alluxio/alluxio/commit/832c4d5f0e8fa5b56de4313ce83a6e2555a05241", "committedDate": "2020-04-18T10:50:22Z", "message": "remove 0.0.0.0 default values"}, "afterCommit": {"oid": "710d29a94d272ead14ee6cb8ab223a49150c37ff", "author": {"user": {"login": "jiacheliu3", "name": "Jiacheng Liu"}}, "url": "https://github.com/Alluxio/alluxio/commit/710d29a94d272ead14ee6cb8ab223a49150c37ff", "committedDate": "2020-04-26T12:40:33Z", "message": "remove 0.0.0.0 default values"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4768, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}