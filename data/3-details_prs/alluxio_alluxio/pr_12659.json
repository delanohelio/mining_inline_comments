{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQxNjk4MTMx", "number": 12659, "title": "Improve logging for tier mgmt task", "bodyText": "This change does 2 things:\n\nWhen a tier mgmt task fails because the destination dir is full, it logs a warning instead of error\nAdds a unit test that verifies a failed tier move issued by a tier mgmt task fail consistently", "createdAt": "2020-12-17T08:34:59Z", "url": "https://github.com/Alluxio/alluxio/pull/12659", "merged": true, "mergeCommit": {"oid": "29631bd54e57fbae33019643c5bc69724dea0a1b"}, "closed": true, "closedAt": "2020-12-17T17:14:07Z", "author": {"login": "jiacheliu3"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdm_SCsgH2gAyNTQxNjk4MTMxOjMyZTY2NDQ3Yzk4NmNkNDFhZDI1NDE5ZGE4NGU2OWIyN2Y1ZDIwZjM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdnGrz_AFqTU1NDgwODAxMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "32e66447c986cd41ad25419da84e69b27f5d20f3", "author": {"user": {"login": "jiacheliu3", "name": "Jiacheng Liu"}}, "url": "https://github.com/Alluxio/alluxio/commit/32e66447c986cd41ad25419da84e69b27f5d20f3", "committedDate": "2020-12-17T08:30:05Z", "message": "add unit test for failed tier move"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU0Mzg3NDkz", "url": "https://github.com/Alluxio/alluxio/pull/12659#pullrequestreview-554387493", "createdAt": "2020-12-17T08:48:14Z", "commit": {"oid": "32e66447c986cd41ad25419da84e69b27f5d20f3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QwODo0ODoxNVrOIHqvyQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QwODo0ODoxNVrOIHqvyQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDkxMTMwNQ==", "bodyText": "This comment is from 530c4c3 it doesn't make sense here anymore. We have changed how the space allocation works largely. When the move task failed, it can be due to many more reasons than just a transient error here, for example:\n\nThe target location is full and this move operation does not evict\nEviction failed since the target is full of pinned blocks\nWe evict on the target location but the free space is stolen by someone else\nmaybe an unfound bug from concurrency\n\nBasically this TODO can be removed.", "url": "https://github.com/Alluxio/alluxio/pull/12659#discussion_r544911305", "createdAt": "2020-12-17T08:48:15Z", "author": {"login": "jiacheliu3"}, "path": "core/server/worker/src/main/java/alluxio/worker/block/TieredBlockStore.java", "diffHunk": "@@ -362,10 +362,8 @@ public void moveBlock(long sessionId, long blockId, BlockStoreLocation oldLocati\n       }\n       return;\n     }\n-    // TODO(bin): We are probably seeing a rare transient failure, maybe define and throw some\n-    // other types of exception to indicate this case.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "32e66447c986cd41ad25419da84e69b27f5d20f3"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "34daec2ba7c47f442ce64bd68245647d804893b1", "author": {"user": {"login": "jiacheliu3", "name": "Jiacheng Liu"}}, "url": "https://github.com/Alluxio/alluxio/commit/34daec2ba7c47f442ce64bd68245647d804893b1", "committedDate": "2020-12-17T08:48:32Z", "message": "whitespace"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU0ODA4MDEw", "url": "https://github.com/Alluxio/alluxio/pull/12659#pullrequestreview-554808010", "createdAt": "2020-12-17T17:07:34Z", "commit": {"oid": "34daec2ba7c47f442ce64bd68245647d804893b1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3367, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}