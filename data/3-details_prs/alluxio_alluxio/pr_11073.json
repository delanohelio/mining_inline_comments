{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgxNjYyODU0", "number": 11073, "title": "Add debug logging facilities for fuse", "bodyText": "With this PR, after setting log4j.logger.alluxio.fuse.AlluxioFuseFileSystem=DEBUG in conf/log4j.properties, one can find debug logs on FUSE operation in logs/fuse.log:\n2020-03-03 14:33:35,129 DEBUG AlluxioFuseFileSystem - Enter: chmod(path=/aaa,mode=100644)\n2020-03-03 14:33:35,131 DEBUG AlluxioFuseFileSystem - Exit (0): chmod(path=/aaa,mode=100644) in 2 ms\n2020-03-03 14:33:35,132 DEBUG AlluxioFuseFileSystem - Enter: getattr(path=/aaa)\n2020-03-03 14:33:35,135 DEBUG AlluxioFuseFileSystem - Exit (0): getattr(path=/aaa) in 3 ms\n2020-03-03 14:33:35,135 DEBUG AlluxioFuseFileSystem - Enter: getattr(path=/._aaa)\n2020-03-03 14:33:35,136 DEBUG AlluxioFuseFileSystem - Failed to get info of /._aaa, path does not exist or is invalid\n2020-03-03 14:33:35,136 DEBUG AlluxioFuseFileSystem - Exit (-2): getattr(path=/._aaa) in 1 ms\n2020-03-03 14:33:35,137 DEBUG AlluxioFuseFileSystem - Enter: getattr(path=/._aaa)\n2020-03-03 14:33:35,138 DEBUG AlluxioFuseFileSystem - Failed to get info of /._aaa, path does not exist or is invalid\n2020-03-03 14:33:35,138 DEBUG AlluxioFuseFileSystem - Exit (-2): getattr(path=/._aaa) in 1 ms\n2020-03-03 14:33:35,138 DEBUG AlluxioFuseFileSystem - Enter: getattr(path=/._aaa)\n2020-03-03 14:33:35,140 DEBUG AlluxioFuseFileSystem - Failed to get info of /._aaa, path does not exist or is invalid\n2020-03-03 14:33:35,140 DEBUG AlluxioFuseFileSystem - Exit (-2): getattr(path=/._aaa) in 2 ms\n2020-03-03 14:33:35,140 DEBUG AlluxioFuseFileSystem - Enter: create(path=/._aaa,mode=100644)\n2020-03-03 14:33:35,143 DEBUG AlluxioFuseFileSystem - Exit (0): create(path=/._aaa,mode=100644) in 3 ms\n2020-03-03 14:33:35,144 DEBUG AlluxioFuseFileSystem - Enter: getattr(path=/._aaa)\n2020-03-03 14:33:35,147 DEBUG AlluxioFuseFileSystem - Exit (0): getattr(path=/._aaa) in 3 ms\n2020-03-03 14:33:35,147 DEBUG AlluxioFuseFileSystem - Enter: write(path=/._aaa,buf=jnr.ffi.provider.jffi.DirectMemoryIO[address=0x126223050],size=4096,offset=0)\n2020-03-03 14:33:35,166 DEBUG AlluxioFuseFileSystem - Exit (4096): write(path=/._aaa,buf=jnr.ffi.provider.jffi.DirectMemoryIO[address=0x126223050],size=4096,offset=0) in 19 ms", "createdAt": "2020-02-29T00:44:20Z", "url": "https://github.com/Alluxio/alluxio/pull/11073", "merged": true, "mergeCommit": {"oid": "91249e846963abf8861680fa50f3501e7056218d"}, "closed": true, "closedAt": "2020-03-03T22:40:11Z", "author": {"login": "apc999"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcI5of5ABqjMwODM5ODEyODE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcJ21pKABqjMwOTAxNDgxNTg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c91eb3d66b2518c4c81fecbf55bf045ec3a143a3", "author": {"user": {"login": "apc999", "name": "Bin Fan"}}, "url": "https://github.com/Alluxio/alluxio/commit/c91eb3d66b2518c4c81fecbf55bf045ec3a143a3", "committedDate": "2020-02-29T00:43:51Z", "message": "Add debug logging fasilities for fuse"}, "afterCommit": {"oid": "6f45ad7762a13347a3774eda2e3d143a9f2f855c", "author": {"user": {"login": "apc999", "name": "Bin Fan"}}, "url": "https://github.com/Alluxio/alluxio/commit/6f45ad7762a13347a3774eda2e3d143a9f2f855c", "committedDate": "2020-02-29T00:46:05Z", "message": "Add debug logging fasilities for fuse"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6f45ad7762a13347a3774eda2e3d143a9f2f855c", "author": {"user": {"login": "apc999", "name": "Bin Fan"}}, "url": "https://github.com/Alluxio/alluxio/commit/6f45ad7762a13347a3774eda2e3d143a9f2f855c", "committedDate": "2020-02-29T00:46:05Z", "message": "Add debug logging fasilities for fuse"}, "afterCommit": {"oid": "19dc29e238f0153ca887775266f52afac42a8bfa", "author": {"user": {"login": "apc999", "name": "Bin Fan"}}, "url": "https://github.com/Alluxio/alluxio/commit/19dc29e238f0153ca887775266f52afac42a8bfa", "committedDate": "2020-02-29T01:24:27Z", "message": "Add debug logging fasilities for fuse"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "19dc29e238f0153ca887775266f52afac42a8bfa", "author": {"user": {"login": "apc999", "name": "Bin Fan"}}, "url": "https://github.com/Alluxio/alluxio/commit/19dc29e238f0153ca887775266f52afac42a8bfa", "committedDate": "2020-02-29T01:24:27Z", "message": "Add debug logging fasilities for fuse"}, "afterCommit": {"oid": "5f9cdd776ab2e8598d6c787405ed218ca5183efa", "author": {"user": {"login": "apc999", "name": "Bin Fan"}}, "url": "https://github.com/Alluxio/alluxio/commit/5f9cdd776ab2e8598d6c787405ed218ca5183efa", "committedDate": "2020-03-02T19:41:32Z", "message": "Add debug logging fasilities for fuse"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5f9cdd776ab2e8598d6c787405ed218ca5183efa", "author": {"user": {"login": "apc999", "name": "Bin Fan"}}, "url": "https://github.com/Alluxio/alluxio/commit/5f9cdd776ab2e8598d6c787405ed218ca5183efa", "committedDate": "2020-03-02T19:41:32Z", "message": "Add debug logging fasilities for fuse"}, "afterCommit": {"oid": "2224b1c42af12c0baf6e8d958b76e45ac4e38625", "author": {"user": {"login": "apc999", "name": "Bin Fan"}}, "url": "https://github.com/Alluxio/alluxio/commit/2224b1c42af12c0baf6e8d958b76e45ac4e38625", "committedDate": "2020-03-02T22:32:50Z", "message": "Add debug logging fasilities for fuse"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2224b1c42af12c0baf6e8d958b76e45ac4e38625", "author": {"user": {"login": "apc999", "name": "Bin Fan"}}, "url": "https://github.com/Alluxio/alluxio/commit/2224b1c42af12c0baf6e8d958b76e45ac4e38625", "committedDate": "2020-03-02T22:32:50Z", "message": "Add debug logging fasilities for fuse"}, "afterCommit": {"oid": "030bfb353aa1790bfece1291ec9e3681b69490e2", "author": {"user": {"login": "apc999", "name": "Bin Fan"}}, "url": "https://github.com/Alluxio/alluxio/commit/030bfb353aa1790bfece1291ec9e3681b69490e2", "committedDate": "2020-03-02T22:57:02Z", "message": "Add debug logging fasilities for fuse"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY3NTY0MTE1", "url": "https://github.com/Alluxio/alluxio/pull/11073#pullrequestreview-367564115", "createdAt": "2020-03-02T22:06:36Z", "commit": {"oid": "5f9cdd776ab2e8598d6c787405ed218ca5183efa"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQyMjowNjozNlrOFwxDow==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQyMjowNjozNlrOFwxDow==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjY3OTcxNQ==", "bodyText": "indentation", "url": "https://github.com/Alluxio/alluxio/pull/11073#discussion_r386679715", "createdAt": "2020-03-02T22:06:36Z", "author": {"login": "LuQQiu"}, "path": "integration/fuse/src/main/java/alluxio/fuse/AlluxioFuseUtils.java", "diffHunk": "@@ -209,4 +209,37 @@ private static int getAlluxioErrorCode(AlluxioException e) {\n       return -ErrorCodes.EBADMSG();\n     }\n   }\n+\n+  /**\n+   * An interface representing a callable for FUSE APIs.\n+   */\n+  public interface FuseCallable {\n+    /**\n+     * The RPC implementation.\n+     *\n+     * @return the return value from the RPC\n+     */\n+    int call();\n+  }\n+\n+  /**\n+   * Calls the given {@link FuseCallable} and returns its result.\n+   *\n+   * @param logger the logger to use for this call\n+   * @param callable the callable to call\n+   * @param methodName the name of the method, used for metrics\n+   * @param description the format string of the description, used for logging\n+   * @param args the arguments for the description\n+   * @return the result\n+   */\n+  public static int call(Logger logger, FuseCallable callable,\n+                         String methodName, String description, Object... args) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5f9cdd776ab2e8598d6c787405ed218ca5183efa"}, "originalPosition": 28}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ca960e5f8588f4a86277a896d8bb5389c3494ce3", "author": {"user": {"login": "apc999", "name": "Bin Fan"}}, "url": "https://github.com/Alluxio/alluxio/commit/ca960e5f8588f4a86277a896d8bb5389c3494ce3", "committedDate": "2020-03-03T00:04:41Z", "message": "Add debug logging fasilities for fuse"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "030bfb353aa1790bfece1291ec9e3681b69490e2", "author": {"user": {"login": "apc999", "name": "Bin Fan"}}, "url": "https://github.com/Alluxio/alluxio/commit/030bfb353aa1790bfece1291ec9e3681b69490e2", "committedDate": "2020-03-02T22:57:02Z", "message": "Add debug logging fasilities for fuse"}, "afterCommit": {"oid": "ca960e5f8588f4a86277a896d8bb5389c3494ce3", "author": {"user": {"login": "apc999", "name": "Bin Fan"}}, "url": "https://github.com/Alluxio/alluxio/commit/ca960e5f8588f4a86277a896d8bb5389c3494ce3", "committedDate": "2020-03-03T00:04:41Z", "message": "Add debug logging fasilities for fuse"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4786, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}