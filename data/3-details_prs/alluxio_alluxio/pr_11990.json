{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY4MTE4MTA1", "number": 11990, "title": "Fix tools.jar dependency", "bodyText": "", "createdAt": "2020-08-14T18:07:20Z", "url": "https://github.com/Alluxio/alluxio/pull/11990", "merged": true, "mergeCommit": {"oid": "5db442531f1ec0a94c748e1be980080b174ca3f0"}, "closed": true, "closedAt": "2020-08-15T04:00:06Z", "author": {"login": "yuzhu"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc-4nNjAH2gAyNDY4MTE4MTA1Ojg2MzZkMzg3ZWE0N2EwOGJjZmU3NGJmOTJjNWY3NzYwYTEyZGJlY2I=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc-95AsAFqTQ2NzkyODkxMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "8636d387ea47a08bcfe74bf92c5f7760a12dbecb", "author": {"user": {"login": "yuzhu", "name": "David Zhu"}}, "url": "https://github.com/Alluxio/alluxio/commit/8636d387ea47a08bcfe74bf92c5f7760a12dbecb", "committedDate": "2020-08-14T18:06:54Z", "message": "try fixing tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "338d6852133f6f3c8321bfc73a8642148836009a", "author": {"user": {"login": "yuzhu", "name": "David Zhu"}}, "url": "https://github.com/Alluxio/alluxio/commit/338d6852133f6f3c8321bfc73a8642148836009a", "committedDate": "2020-08-14T19:31:18Z", "message": "exclude tools.jar"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "42e02a6eac452fe78e582329a2660c4e540e13ae", "author": {"user": {"login": "yuzhu", "name": "David Zhu"}}, "url": "https://github.com/Alluxio/alluxio/commit/42e02a6eac452fe78e582329a2660c4e540e13ae", "committedDate": "2020-08-14T20:33:14Z", "message": "fix dependency to be jdk aware"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4d5ada5c8cab0b4fba103167e0448e6042300b18", "author": {"user": {"login": "yuzhu", "name": "David Zhu"}}, "url": "https://github.com/Alluxio/alluxio/commit/4d5ada5c8cab0b4fba103167e0448e6042300b18", "committedDate": "2020-08-14T20:37:36Z", "message": "remove exclusion"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY3ODYyMTc3", "url": "https://github.com/Alluxio/alluxio/pull/11990#pullrequestreview-467862177", "createdAt": "2020-08-14T20:39:20Z", "commit": {"oid": "4d5ada5c8cab0b4fba103167e0448e6042300b18"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xNFQyMDozOToyMFrOHBCsPQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xNFQyMDozOToyMFrOHBCsPQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDg1NDcxNw==", "bodyText": "this is the main part of the change. the rest of the file was wrongly indented", "url": "https://github.com/Alluxio/alluxio/pull/11990#discussion_r470854717", "createdAt": "2020-08-14T20:39:20Z", "author": {"login": "yuzhu"}, "path": "table/server/underdb/glue/pom.xml", "diffHunk": "@@ -77,5 +77,38 @@\n         </dependency>\n     </dependencies>\n \n-\n+  <profiles>\n+    <profile>\n+      <id>java11</id>\n+      <activation>\n+        <jdk>11</jdk>\n+      </activation>\n+      <dependencies>\n+        <dependency>\n+          <groupId>org.apache.hive</groupId>\n+          <artifactId>hive-metastore</artifactId>\n+          <version>${hive-metastore.version}</version>\n+          <scope>compile</scope>\n+          <exclusions>\n+            <exclusion>\n+              <groupId>org.apache.logging.log4j</groupId>\n+              <artifactId>log4j-1.2-api</artifactId>\n+            </exclusion>\n+            <exclusion>\n+              <groupId>org.apache.logging.log4j</groupId>\n+              <artifactId>log4j-slf4j-impl</artifactId>\n+            </exclusion>\n+            <exclusion>\n+              <groupId>com.google.protobuf</groupId>\n+              <artifactId>protobuf-java</artifactId>\n+            </exclusion>\n+            <exclusion>\n+              <groupId>jdk.tools</groupId>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4d5ada5c8cab0b4fba103167e0448e6042300b18"}, "originalPosition": 31}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "913a42bf70a631b5191948d4e50700a8e1a44063", "author": {"user": {"login": "yuzhu", "name": "David Zhu"}}, "url": "https://github.com/Alluxio/alluxio/commit/913a42bf70a631b5191948d4e50700a8e1a44063", "committedDate": "2020-08-14T22:15:57Z", "message": "glue library exclusion"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8b7a571af720548f9d02f2f97c31978e7b624d30", "author": {"user": {"login": "yuzhu", "name": "David Zhu"}}, "url": "https://github.com/Alluxio/alluxio/commit/8b7a571af720548f9d02f2f97c31978e7b624d30", "committedDate": "2020-08-14T22:24:45Z", "message": "more pom adjustment"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY3OTI0OTk0", "url": "https://github.com/Alluxio/alluxio/pull/11990#pullrequestreview-467924994", "createdAt": "2020-08-14T23:52:08Z", "commit": {"oid": "8b7a571af720548f9d02f2f97c31978e7b624d30"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xNFQyMzo1MjowOFrOHBF90A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xNFQyMzo1MjowOFrOHBF90A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDkwODM2OA==", "bodyText": "do we not need to exclude this any more?", "url": "https://github.com/Alluxio/alluxio/pull/11990#discussion_r470908368", "createdAt": "2020-08-14T23:52:08Z", "author": {"login": "ZacBlanco"}, "path": "table/server/underdb/glue/pom.xml", "diffHunk": "@@ -13,69 +13,98 @@\n <project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n          xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n          xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n-    <parent>\n-        <artifactId>alluxio-table-server-underdb</artifactId>\n-        <groupId>org.alluxio</groupId>\n-        <version>2.4.0-SNAPSHOT</version>\n-    </parent>\n-    <modelVersion>4.0.0</modelVersion>\n+  <parent>\n+      <artifactId>alluxio-table-server-underdb</artifactId>\n+      <groupId>org.alluxio</groupId>\n+      <version>2.4.0-SNAPSHOT</version>\n+  </parent>\n+  <modelVersion>4.0.0</modelVersion>\n \n-    <artifactId>alluxio-table-server-underdb-glue</artifactId>\n-    <packaging>jar</packaging>\n-    <name>Alluxio Table - Server - UnderDB - Glue</name>\n-    <description>Alluxio table underDB implementation for aws glue</description>\n+  <artifactId>alluxio-table-server-underdb-glue</artifactId>\n+  <packaging>jar</packaging>\n+  <name>Alluxio Table - Server - UnderDB - Glue</name>\n+  <description>Alluxio table underDB implementation for aws glue</description>\n \n-    <properties>\n-        <!-- The following paths need to be defined here as well as in the parent pom so that mvn can -->\n-        <!-- run properly from sub-project directories -->\n-        <build.path>${project.parent.parent.parent.parent.basedir}/build</build.path>\n-        <glue.version>1.11.820</glue.version>\n-        <aws.java.jdk.version>1.11.820</aws.java.jdk.version>\n-        <hive-metastore.version>2.3.7</hive-metastore.version>\n-    </properties>\n+  <properties>\n+      <!-- The following paths need to be defined here as well as in the parent pom so that mvn can -->\n+      <!-- run properly from sub-project directories -->\n+      <build.path>${project.parent.parent.parent.parent.basedir}/build</build.path>\n+      <glue.version>1.11.820</glue.version>\n+      <aws.java.jdk.version>1.11.820</aws.java.jdk.version>\n+      <hive-metastore.version>2.3.7</hive-metastore.version>\n+  </properties>\n \n-    <dependencies>\n-        <!-- External dependencies -->\n-        <dependency>\n-            <groupId>com.amazonaws</groupId>\n-            <artifactId>aws-java-sdk-glue</artifactId>\n-            <version>${glue.version}</version>\n-        </dependency>\n+  <dependencies>\n+      <!-- External dependencies -->\n+      <dependency>\n+          <groupId>com.amazonaws</groupId>\n+          <artifactId>aws-java-sdk-glue</artifactId>\n+          <version>${glue.version}</version>\n+      </dependency>\n \n-        <dependency>\n-            <groupId>com.amazonaws</groupId>\n-            <artifactId>aws-java-sdk-core</artifactId>\n-            <version>${aws.java.jdk.version}</version>\n-        </dependency>\n+      <dependency>\n+          <groupId>com.amazonaws</groupId>\n+          <artifactId>aws-java-sdk-core</artifactId>\n+          <version>${aws.java.jdk.version}</version>\n+      </dependency>\n \n-        <!--aws sdk requires jaxb binding at runtime-->\n-        <dependency>\n-            <groupId>com.sun.xml.bind</groupId>\n-            <artifactId>jaxb-impl</artifactId>\n-            <scope>runtime</scope>\n-        </dependency>\n+      <!--aws sdk requires jaxb binding at runtime-->\n+      <dependency>\n+          <groupId>com.sun.xml.bind</groupId>\n+          <artifactId>jaxb-impl</artifactId>\n+          <scope>runtime</scope>\n+      </dependency>\n+\n+      <dependency>\n+          <groupId>org.apache.hive</groupId>\n+          <artifactId>hive-common</artifactId>\n+          <version>${hive-metastore.version}</version>\n+          <scope>compile</scope>\n+          <exclusions>\n+              <exclusion>\n+                  <groupId>org.apache.logging.log4j</groupId>\n+                  <artifactId>log4j-1.2-api</artifactId>\n+              </exclusion>\n+              <exclusion>\n+                  <groupId>org.apache.logging.log4j</groupId>\n+                  <artifactId>log4j-slf4j-impl</artifactId>\n+              </exclusion>\n+              <exclusion>\n+                  <groupId>com.google.protobuf</groupId>\n+                  <artifactId>protobuf-java</artifactId>\n+              </exclusion>\n+          </exclusions>\n+      </dependency>\n+  </dependencies>\n \n+  <profiles>\n+    <profile>\n+      <id>java11</id>\n+      <activation>\n+        <jdk>11</jdk>\n+      </activation>\n+      <dependencies>\n         <dependency>\n-            <groupId>org.apache.hive</groupId>\n-            <artifactId>hive-common</artifactId>\n-            <version>${hive-metastore.version}</version>\n-            <scope>compile</scope>\n-            <exclusions>\n-                <exclusion>\n-                    <groupId>org.apache.logging.log4j</groupId>\n-                    <artifactId>log4j-1.2-api</artifactId>\n-                </exclusion>\n-                <exclusion>\n-                    <groupId>org.apache.logging.log4j</groupId>\n-                    <artifactId>log4j-slf4j-impl</artifactId>\n-                </exclusion>\n-                <exclusion>\n-                    <groupId>com.google.protobuf</groupId>\n-                    <artifactId>protobuf-java</artifactId>\n-                </exclusion>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8b7a571af720548f9d02f2f97c31978e7b624d30"}, "originalPosition": 128}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "edd26524703b1d4e623a6a43356ce943463c1c3a", "author": {"user": {"login": "yuzhu", "name": "David Zhu"}}, "url": "https://github.com/Alluxio/alluxio/commit/edd26524703b1d4e623a6a43356ce943463c1c3a", "committedDate": "2020-08-15T00:11:48Z", "message": "address comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY3OTI4OTEy", "url": "https://github.com/Alluxio/alluxio/pull/11990#pullrequestreview-467928912", "createdAt": "2020-08-15T00:15:52Z", "commit": {"oid": "edd26524703b1d4e623a6a43356ce943463c1c3a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xNVQwMDoxNTo1MlrOHBGNXA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xNVQwMDoxNTo1MlrOHBGNXA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDkxMjM0OA==", "bodyText": "is this added now to be consistent with the other dependency? Can we make this a dependency in table/server or table/server/underdb and share it between hive and glue so we don't have to name the exclusions list twice?\nedit: by \"make this a dependency\" I mean the hive-metastore a higher level dependency so we don't need the exclusions multiple places", "url": "https://github.com/Alluxio/alluxio/pull/11990#discussion_r470912348", "createdAt": "2020-08-15T00:15:52Z", "author": {"login": "ZacBlanco"}, "path": "table/server/underdb/hive/pom.xml", "diffHunk": "@@ -151,6 +151,10 @@\n               <groupId>org.apache.logging.log4j</groupId>\n               <artifactId>log4j-slf4j-impl</artifactId>\n             </exclusion>\n+            <exclusion>\n+              <groupId>com.google.protobuf</groupId>\n+              <artifactId>protobuf-java</artifactId>\n+            </exclusion>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "edd26524703b1d4e623a6a43356ce943463c1c3a"}, "originalPosition": 7}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4141, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}