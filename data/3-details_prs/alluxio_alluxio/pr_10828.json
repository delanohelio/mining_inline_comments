{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY5ODIzMjY0", "number": 10828, "title": "Fix gRPC exception handling and improve traces", "bodyText": "Client level retries were sometimes ineffective due to narrow handling of exceptions.", "createdAt": "2020-02-01T00:21:59Z", "url": "https://github.com/Alluxio/alluxio/pull/10828", "merged": true, "mergeCommit": {"oid": "0077608788f725ac8720fa747824022f8828b227"}, "closed": true, "closedAt": "2020-02-04T02:16:06Z", "author": {"login": "ggezer"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb_3Q35AH2gAyMzY5ODIzMjY0OjY5ZGRhYjM1ZmM4OWQwYmM1NTA4MmZlYWEzNzE4ZDdhYmZlMWRlYzE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcA1QvQAFqTM1MjYyODA1MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "69ddab35fc89d0bc55082feaa3718d7abfe1dec1", "author": {"user": {"login": "ggezer", "name": "G\u00f6kt\u00fcrk Gezer"}}, "url": "https://github.com/Alluxio/alluxio/commit/69ddab35fc89d0bc55082feaa3718d7abfe1dec1", "committedDate": "2020-01-31T22:55:22Z", "message": "Fix traces"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a6e5df07a11fc8823a5aa5b737d92073f8059bf5", "author": {"user": {"login": "ggezer", "name": "G\u00f6kt\u00fcrk Gezer"}}, "url": "https://github.com/Alluxio/alluxio/commit/a6e5df07a11fc8823a5aa5b737d92073f8059bf5", "committedDate": "2020-02-01T03:31:37Z", "message": "Synchronize sasl handler resource usage"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c661f37e316fee96caef79e3b7212bc564c982bf", "author": {"user": {"login": "ggezer", "name": "G\u00f6kt\u00fcrk Gezer"}}, "url": "https://github.com/Alluxio/alluxio/commit/c661f37e316fee96caef79e3b7212bc564c982bf", "committedDate": "2020-02-01T03:32:08Z", "message": "Avoid throwing CANCELLED if stream is closed"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8f7ec6dd19eea1a7aeea77e40ea8dd4a92f3f68f", "author": {"user": {"login": "ggezer", "name": "G\u00f6kt\u00fcrk Gezer"}}, "url": "https://github.com/Alluxio/alluxio/commit/8f7ec6dd19eea1a7aeea77e40ea8dd4a92f3f68f", "committedDate": "2020-02-01T03:32:26Z", "message": "Catch all exceptions during authentication"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f9596f7aa542628d28004b12ac8a48effe6e0c32", "author": {"user": {"login": "ggezer", "name": "G\u00f6kt\u00fcrk Gezer"}}, "url": "https://github.com/Alluxio/alluxio/commit/f9596f7aa542628d28004b12ac8a48effe6e0c32", "committedDate": "2020-02-01T00:21:27Z", "message": "Temp commit"}, "afterCommit": {"oid": "8f7ec6dd19eea1a7aeea77e40ea8dd4a92f3f68f", "author": {"user": {"login": "ggezer", "name": "G\u00f6kt\u00fcrk Gezer"}}, "url": "https://github.com/Alluxio/alluxio/commit/8f7ec6dd19eea1a7aeea77e40ea8dd4a92f3f68f", "committedDate": "2020-02-01T03:32:26Z", "message": "Catch all exceptions during authentication"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a8ab46f08be1bb65dc6987309aa3290c46dc66c8", "author": {"user": {"login": "ggezer", "name": "G\u00f6kt\u00fcrk Gezer"}}, "url": "https://github.com/Alluxio/alluxio/commit/a8ab46f08be1bb65dc6987309aa3290c46dc66c8", "committedDate": "2020-02-01T04:25:18Z", "message": "Pre-generate initiate message"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c9b70c49909a056060d83d99583b0796af70a749", "author": {"user": {"login": "ggezer", "name": "G\u00f6kt\u00fcrk Gezer"}}, "url": "https://github.com/Alluxio/alluxio/commit/c9b70c49909a056060d83d99583b0796af70a749", "committedDate": "2020-02-02T03:04:22Z", "message": "Synchronously shut down gRPC channels"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUyMjYyOTk0", "url": "https://github.com/Alluxio/alluxio/pull/10828#pullrequestreview-352262994", "createdAt": "2020-02-03T13:47:26Z", "commit": {"oid": "c9b70c49909a056060d83d99583b0796af70a749"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QxMzo0NzoyNlrOFkx2-Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QxMzo0OTo1MVrOFkx7sQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDEwOTk0NQ==", "bodyText": "why is this (and others) \"\"?", "url": "https://github.com/Alluxio/alluxio/pull/10828#discussion_r374109945", "createdAt": "2020-02-03T13:47:26Z", "author": {"login": "gpang"}, "path": "core/common/src/main/java/alluxio/grpc/GrpcChannel.java", "diffHunk": "@@ -127,7 +127,7 @@ public boolean isHealthy() {\n \n   @Override\n   public String toString() {\n-    return MoreObjects.toStringHelper(this)\n+    return MoreObjects.toStringHelper(\"\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c9b70c49909a056060d83d99583b0796af70a749"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDExMDM0MA==", "bodyText": "could you add a comment in the code to explain why this has to be synchronized?", "url": "https://github.com/Alluxio/alluxio/pull/10828#discussion_r374110340", "createdAt": "2020-02-03T13:48:12Z", "author": {"login": "gpang"}, "path": "core/common/src/main/java/alluxio/grpc/GrpcChannel.java", "diffHunk": "@@ -95,7 +95,7 @@ public void intercept(ClientInterceptor interceptor) {\n   /**\n    * Shuts down the channel.\n    */\n-  public void shutdown() {\n+  public synchronized void shutdown() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c9b70c49909a056060d83d99583b0796af70a749"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDExMDk3Ng==", "bodyText": "do we want to keep this non-null if there is an issue with dispose? Basically, should we set it to null in finally or here?", "url": "https://github.com/Alluxio/alluxio/pull/10828#discussion_r374110976", "createdAt": "2020-02-03T13:49:28Z", "author": {"login": "gpang"}, "path": "core/common/src/main/java/alluxio/security/authentication/AbstractSaslClientHandler.java", "diffHunk": "@@ -85,10 +88,11 @@ public SaslMessage handleMessage(SaslMessage message) throws SaslException {\n   }\n \n   @Override\n-  public void close() {\n+  public synchronized void close() {\n     if (mSaslClient != null) {\n       try {\n         mSaslClient.dispose();\n+        mSaslClient = null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c9b70c49909a056060d83d99583b0796af70a749"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDExMTE1Mw==", "bodyText": "can you leave a comment as to why this and others have to be synchronized? (seems like it is for mSaslClient?)", "url": "https://github.com/Alluxio/alluxio/pull/10828#discussion_r374111153", "createdAt": "2020-02-03T13:49:51Z", "author": {"login": "gpang"}, "path": "core/common/src/main/java/alluxio/security/authentication/AbstractSaslClientHandler.java", "diffHunk": "@@ -47,7 +47,10 @@ public AbstractSaslClientHandler(ChannelAuthenticationScheme authScheme) {\n   }\n \n   @Override\n-  public SaslMessage handleMessage(SaslMessage message) throws SaslException {\n+  public synchronized SaslMessage handleMessage(SaslMessage message) throws SaslException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c9b70c49909a056060d83d99583b0796af70a749"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "225931f233574191dfce39c1a15b05fe2f042b4a", "author": {"user": {"login": "ggezer", "name": "G\u00f6kt\u00fcrk Gezer"}}, "url": "https://github.com/Alluxio/alluxio/commit/225931f233574191dfce39c1a15b05fe2f042b4a", "committedDate": "2020-02-03T18:46:37Z", "message": "PR feedback"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUyNTU5MjM4", "url": "https://github.com/Alluxio/alluxio/pull/10828#pullrequestreview-352559238", "createdAt": "2020-02-03T21:00:59Z", "commit": {"oid": "225931f233574191dfce39c1a15b05fe2f042b4a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QyMTowMDo1OVrOFk_zfw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QyMTowMDo1OVrOFk_zfw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDMzODQzMQ==", "bodyText": "We want to remove the class name? I would have thought the class name is useful?", "url": "https://github.com/Alluxio/alluxio/pull/10828#discussion_r374338431", "createdAt": "2020-02-03T21:00:59Z", "author": {"login": "gpang"}, "path": "core/common/src/main/java/alluxio/grpc/GrpcChannel.java", "diffHunk": "@@ -127,7 +127,7 @@ public boolean isHealthy() {\n \n   @Override\n   public String toString() {\n-    return MoreObjects.toStringHelper(this)\n+    return MoreObjects.toStringHelper(\"\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDEwOTk0NQ=="}, "originalCommit": {"oid": "c9b70c49909a056060d83d99583b0796af70a749"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d4468bd7f6406c10a9b3c678a0b5e8d24f78f49b", "author": {"user": {"login": "ggezer", "name": "G\u00f6kt\u00fcrk Gezer"}}, "url": "https://github.com/Alluxio/alluxio/commit/d4468bd7f6406c10a9b3c678a0b5e8d24f78f49b", "committedDate": "2020-02-03T21:35:28Z", "message": "Revert class name for GrpcChannel.toString()"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUyNjA4Mzkz", "url": "https://github.com/Alluxio/alluxio/pull/10828#pullrequestreview-352608393", "createdAt": "2020-02-03T22:27:17Z", "commit": {"oid": "d4468bd7f6406c10a9b3c678a0b5e8d24f78f49b"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QyMjoyNzoxOFrOFlCLNw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QyMjoyNzo0MlrOFlCL5w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDM3NzI3MQ==", "bodyText": "I am confused when this is supposed to be \"\" or this?", "url": "https://github.com/Alluxio/alluxio/pull/10828#discussion_r374377271", "createdAt": "2020-02-03T22:27:18Z", "author": {"login": "gpang"}, "path": "core/common/src/main/java/alluxio/grpc/GrpcChannelKey.java", "diffHunk": "@@ -288,7 +288,7 @@ public boolean equals(Object other) {\n \n   @Override\n   public String toString() {\n-    return MoreObjects.toStringHelper(this)\n+    return MoreObjects.toStringHelper(\"\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d4468bd7f6406c10a9b3c678a0b5e8d24f78f49b"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDM3NzMwOQ==", "bodyText": "I am confused when this is supposed to be \"\" or this?", "url": "https://github.com/Alluxio/alluxio/pull/10828#discussion_r374377309", "createdAt": "2020-02-03T22:27:22Z", "author": {"login": "gpang"}, "path": "core/common/src/main/java/alluxio/grpc/GrpcChannelKey.java", "diffHunk": "@@ -305,7 +305,7 @@ public String toString() {\n    * @return short representation of this channel key\n    */\n   public String toStringShort() {\n-    return MoreObjects.toStringHelper(\"Channel\")\n+    return MoreObjects.toStringHelper(\"\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d4468bd7f6406c10a9b3c678a0b5e8d24f78f49b"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDM3NzM5OA==", "bodyText": "I am confused when this is supposed to be \"\" or this?", "url": "https://github.com/Alluxio/alluxio/pull/10828#discussion_r374377398", "createdAt": "2020-02-03T22:27:35Z", "author": {"login": "gpang"}, "path": "core/common/src/main/java/alluxio/grpc/GrpcServer.java", "diffHunk": "@@ -135,7 +135,7 @@ public boolean isServing() {\n \n   @Override\n   public String toString() {\n-    return MoreObjects.toStringHelper(this)\n+    return MoreObjects.toStringHelper(\"\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d4468bd7f6406c10a9b3c678a0b5e8d24f78f49b"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDM3NzQ0Nw==", "bodyText": "I am confused when this is supposed to be \"\" or this?", "url": "https://github.com/Alluxio/alluxio/pull/10828#discussion_r374377447", "createdAt": "2020-02-03T22:27:42Z", "author": {"login": "gpang"}, "path": "core/common/src/main/java/alluxio/grpc/GrpcServerAddress.java", "diffHunk": "@@ -86,7 +86,7 @@ public boolean equals(Object other) {\n \n   @Override\n   public String toString() {\n-    return MoreObjects.toStringHelper(this)\n+    return MoreObjects.toStringHelper(\"\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d4468bd7f6406c10a9b3c678a0b5e8d24f78f49b"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c2555c4af0d457e139121d7aded6a46c1ebc57b0", "author": {"user": {"login": "ggezer", "name": "G\u00f6kt\u00fcrk Gezer"}}, "url": "https://github.com/Alluxio/alluxio/commit/c2555c4af0d457e139121d7aded6a46c1ebc57b0", "committedDate": "2020-02-03T23:03:08Z", "message": "Include classname for toString() overrides"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUyNjI4MDUx", "url": "https://github.com/Alluxio/alluxio/pull/10828#pullrequestreview-352628051", "createdAt": "2020-02-03T23:09:20Z", "commit": {"oid": "c2555c4af0d457e139121d7aded6a46c1ebc57b0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3162, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}