{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY5ODIzMjY0", "number": 10828, "reviewThreads": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QxMzo0NzoyNlrODcowrA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QyMjoyNzo0MlrODczDKA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMxMzU0NTQwOnYy", "diffSide": "RIGHT", "path": "core/common/src/main/java/alluxio/grpc/GrpcChannel.java", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QxMzo0NzoyNlrOFkx2-Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QyMTozNTo1M1rOFlAxzg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDEwOTk0NQ==", "bodyText": "why is this (and others) \"\"?", "url": "https://github.com/Alluxio/alluxio/pull/10828#discussion_r374109945", "createdAt": "2020-02-03T13:47:26Z", "author": {"login": "gpang"}, "path": "core/common/src/main/java/alluxio/grpc/GrpcChannel.java", "diffHunk": "@@ -127,7 +127,7 @@ public boolean isHealthy() {\n \n   @Override\n   public String toString() {\n-    return MoreObjects.toStringHelper(this)\n+    return MoreObjects.toStringHelper(\"\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c9b70c49909a056060d83d99583b0796af70a749"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDI3MTUzNQ==", "bodyText": "When given an instance, the string generated will start with that class's name. (Something like \"GrpcChannel { Host=....... }\". Giving empty header makes the traces much cleaner.", "url": "https://github.com/Alluxio/alluxio/pull/10828#discussion_r374271535", "createdAt": "2020-02-03T18:40:49Z", "author": {"login": "ggezer"}, "path": "core/common/src/main/java/alluxio/grpc/GrpcChannel.java", "diffHunk": "@@ -127,7 +127,7 @@ public boolean isHealthy() {\n \n   @Override\n   public String toString() {\n-    return MoreObjects.toStringHelper(this)\n+    return MoreObjects.toStringHelper(\"\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDEwOTk0NQ=="}, "originalCommit": {"oid": "c9b70c49909a056060d83d99583b0796af70a749"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDMzODQzMQ==", "bodyText": "We want to remove the class name? I would have thought the class name is useful?", "url": "https://github.com/Alluxio/alluxio/pull/10828#discussion_r374338431", "createdAt": "2020-02-03T21:00:59Z", "author": {"login": "gpang"}, "path": "core/common/src/main/java/alluxio/grpc/GrpcChannel.java", "diffHunk": "@@ -127,7 +127,7 @@ public boolean isHealthy() {\n \n   @Override\n   public String toString() {\n-    return MoreObjects.toStringHelper(this)\n+    return MoreObjects.toStringHelper(\"\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDEwOTk0NQ=="}, "originalCommit": {"oid": "c9b70c49909a056060d83d99583b0796af70a749"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDM1NDM4Mg==", "bodyText": "Yeah, I think it's better for this particular one. For the rest, empty is better.", "url": "https://github.com/Alluxio/alluxio/pull/10828#discussion_r374354382", "createdAt": "2020-02-03T21:35:53Z", "author": {"login": "ggezer"}, "path": "core/common/src/main/java/alluxio/grpc/GrpcChannel.java", "diffHunk": "@@ -127,7 +127,7 @@ public boolean isHealthy() {\n \n   @Override\n   public String toString() {\n-    return MoreObjects.toStringHelper(this)\n+    return MoreObjects.toStringHelper(\"\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDEwOTk0NQ=="}, "originalCommit": {"oid": "c9b70c49909a056060d83d99583b0796af70a749"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMxMzU0NzkzOnYy", "diffSide": "RIGHT", "path": "core/common/src/main/java/alluxio/grpc/GrpcChannel.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QxMzo0ODoxMlrOFkx4hA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QxMzo0ODoxMlrOFkx4hA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDExMDM0MA==", "bodyText": "could you add a comment in the code to explain why this has to be synchronized?", "url": "https://github.com/Alluxio/alluxio/pull/10828#discussion_r374110340", "createdAt": "2020-02-03T13:48:12Z", "author": {"login": "gpang"}, "path": "core/common/src/main/java/alluxio/grpc/GrpcChannel.java", "diffHunk": "@@ -95,7 +95,7 @@ public void intercept(ClientInterceptor interceptor) {\n   /**\n    * Shuts down the channel.\n    */\n-  public void shutdown() {\n+  public synchronized void shutdown() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c9b70c49909a056060d83d99583b0796af70a749"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMxMzU1MTk2OnYy", "diffSide": "RIGHT", "path": "core/common/src/main/java/alluxio/security/authentication/AbstractSaslClientHandler.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QxMzo0OToyOFrOFkx7AA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QxODo0MzozOFrOFk7zbA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDExMDk3Ng==", "bodyText": "do we want to keep this non-null if there is an issue with dispose? Basically, should we set it to null in finally or here?", "url": "https://github.com/Alluxio/alluxio/pull/10828#discussion_r374110976", "createdAt": "2020-02-03T13:49:28Z", "author": {"login": "gpang"}, "path": "core/common/src/main/java/alluxio/security/authentication/AbstractSaslClientHandler.java", "diffHunk": "@@ -85,10 +88,11 @@ public SaslMessage handleMessage(SaslMessage message) throws SaslException {\n   }\n \n   @Override\n-  public void close() {\n+  public synchronized void close() {\n     if (mSaslClient != null) {\n       try {\n         mSaslClient.dispose();\n+        mSaslClient = null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c9b70c49909a056060d83d99583b0796af70a749"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDI3Mjg3Ng==", "bodyText": "We don't want to keep it set if dispose fails. So in finally is better.", "url": "https://github.com/Alluxio/alluxio/pull/10828#discussion_r374272876", "createdAt": "2020-02-03T18:43:38Z", "author": {"login": "ggezer"}, "path": "core/common/src/main/java/alluxio/security/authentication/AbstractSaslClientHandler.java", "diffHunk": "@@ -85,10 +88,11 @@ public SaslMessage handleMessage(SaslMessage message) throws SaslException {\n   }\n \n   @Override\n-  public void close() {\n+  public synchronized void close() {\n     if (mSaslClient != null) {\n       try {\n         mSaslClient.dispose();\n+        mSaslClient = null;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDExMDk3Ng=="}, "originalCommit": {"oid": "c9b70c49909a056060d83d99583b0796af70a749"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMxMzU1MzE2OnYy", "diffSide": "RIGHT", "path": "core/common/src/main/java/alluxio/security/authentication/AbstractSaslClientHandler.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QxMzo0OTo1MVrOFkx7sQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QxMzo0OTo1MVrOFkx7sQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDExMTE1Mw==", "bodyText": "can you leave a comment as to why this and others have to be synchronized? (seems like it is for mSaslClient?)", "url": "https://github.com/Alluxio/alluxio/pull/10828#discussion_r374111153", "createdAt": "2020-02-03T13:49:51Z", "author": {"login": "gpang"}, "path": "core/common/src/main/java/alluxio/security/authentication/AbstractSaslClientHandler.java", "diffHunk": "@@ -47,7 +47,10 @@ public AbstractSaslClientHandler(ChannelAuthenticationScheme authScheme) {\n   }\n \n   @Override\n-  public SaslMessage handleMessage(SaslMessage message) throws SaslException {\n+  public synchronized SaslMessage handleMessage(SaslMessage message) throws SaslException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c9b70c49909a056060d83d99583b0796af70a749"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMxNTIzMDAyOnYy", "diffSide": "RIGHT", "path": "core/common/src/main/java/alluxio/grpc/GrpcChannelKey.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QyMjoyNzoxOFrOFlCLNw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QyMjoyNzoxOFrOFlCLNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDM3NzI3MQ==", "bodyText": "I am confused when this is supposed to be \"\" or this?", "url": "https://github.com/Alluxio/alluxio/pull/10828#discussion_r374377271", "createdAt": "2020-02-03T22:27:18Z", "author": {"login": "gpang"}, "path": "core/common/src/main/java/alluxio/grpc/GrpcChannelKey.java", "diffHunk": "@@ -288,7 +288,7 @@ public boolean equals(Object other) {\n \n   @Override\n   public String toString() {\n-    return MoreObjects.toStringHelper(this)\n+    return MoreObjects.toStringHelper(\"\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d4468bd7f6406c10a9b3c678a0b5e8d24f78f49b"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMxNTIzMDI2OnYy", "diffSide": "RIGHT", "path": "core/common/src/main/java/alluxio/grpc/GrpcChannelKey.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QyMjoyNzoyMlrOFlCLXQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QyMjoyNzoyMlrOFlCLXQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDM3NzMwOQ==", "bodyText": "I am confused when this is supposed to be \"\" or this?", "url": "https://github.com/Alluxio/alluxio/pull/10828#discussion_r374377309", "createdAt": "2020-02-03T22:27:22Z", "author": {"login": "gpang"}, "path": "core/common/src/main/java/alluxio/grpc/GrpcChannelKey.java", "diffHunk": "@@ -305,7 +305,7 @@ public String toString() {\n    * @return short representation of this channel key\n    */\n   public String toStringShort() {\n-    return MoreObjects.toStringHelper(\"Channel\")\n+    return MoreObjects.toStringHelper(\"\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d4468bd7f6406c10a9b3c678a0b5e8d24f78f49b"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMxNTIzMDgzOnYy", "diffSide": "RIGHT", "path": "core/common/src/main/java/alluxio/grpc/GrpcServer.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QyMjoyNzozNVrOFlCLtg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QyMjoyNzozNVrOFlCLtg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDM3NzM5OA==", "bodyText": "I am confused when this is supposed to be \"\" or this?", "url": "https://github.com/Alluxio/alluxio/pull/10828#discussion_r374377398", "createdAt": "2020-02-03T22:27:35Z", "author": {"login": "gpang"}, "path": "core/common/src/main/java/alluxio/grpc/GrpcServer.java", "diffHunk": "@@ -135,7 +135,7 @@ public boolean isServing() {\n \n   @Override\n   public String toString() {\n-    return MoreObjects.toStringHelper(this)\n+    return MoreObjects.toStringHelper(\"\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d4468bd7f6406c10a9b3c678a0b5e8d24f78f49b"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMxNTIzMTEyOnYy", "diffSide": "RIGHT", "path": "core/common/src/main/java/alluxio/grpc/GrpcServerAddress.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QyMjoyNzo0MlrOFlCL5w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QyMjoyNzo0MlrOFlCL5w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDM3NzQ0Nw==", "bodyText": "I am confused when this is supposed to be \"\" or this?", "url": "https://github.com/Alluxio/alluxio/pull/10828#discussion_r374377447", "createdAt": "2020-02-03T22:27:42Z", "author": {"login": "gpang"}, "path": "core/common/src/main/java/alluxio/grpc/GrpcServerAddress.java", "diffHunk": "@@ -86,7 +86,7 @@ public boolean equals(Object other) {\n \n   @Override\n   public String toString() {\n-    return MoreObjects.toStringHelper(this)\n+    return MoreObjects.toStringHelper(\"\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d4468bd7f6406c10a9b3c678a0b5e8d24f78f49b"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2125, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}