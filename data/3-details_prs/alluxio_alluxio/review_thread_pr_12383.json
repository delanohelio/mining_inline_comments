{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA5MjI5NDY2", "number": 12383, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QyMjoyNjoyOFrOExZBYQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QyMjoyNzozNlrOExZCMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIwMjI1NjMzOnYy", "diffSide": "RIGHT", "path": "core/server/master/src/main/java/alluxio/master/file/meta/InodeTreeBufferedIterator.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QyMjoyNjoyOFrOHngCJQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QyMjozODowNFrOHngOYQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTE4MTM0OQ==", "bodyText": "is this the correct order to shut them down?", "url": "https://github.com/Alluxio/alluxio/pull/12383#discussion_r511181349", "createdAt": "2020-10-23T22:26:28Z", "author": {"login": "gpang"}, "path": "core/server/master/src/main/java/alluxio/master/file/meta/InodeTreeBufferedIterator.java", "diffHunk": "@@ -302,4 +319,11 @@ public boolean hasNext() {\n   public void remove() {\n     throw new UnsupportedOperationException(\"remove is not supported in inode tree iterator\");\n   }\n+\n+  @Override\n+  public void close() {\n+    LOG.debug(\"Closing {} inode tree iterators\", mActiveCrawlers.size());\n+    mCoordinatorExecutor.shutdownNow();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4ffb33a3ed8ba38810ae2bdf3159821a33743486"}, "originalPosition": 85}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTE4NDQ4MQ==", "bodyText": "I don't think the order matters much. Both shutdown calls are asynchronous so the order of close does not make a big difference.", "url": "https://github.com/Alluxio/alluxio/pull/12383#discussion_r511184481", "createdAt": "2020-10-23T22:38:04Z", "author": {"login": "bf8086"}, "path": "core/server/master/src/main/java/alluxio/master/file/meta/InodeTreeBufferedIterator.java", "diffHunk": "@@ -302,4 +319,11 @@ public boolean hasNext() {\n   public void remove() {\n     throw new UnsupportedOperationException(\"remove is not supported in inode tree iterator\");\n   }\n+\n+  @Override\n+  public void close() {\n+    LOG.debug(\"Closing {} inode tree iterators\", mActiveCrawlers.size());\n+    mCoordinatorExecutor.shutdownNow();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTE4MTM0OQ=="}, "originalCommit": {"oid": "4ffb33a3ed8ba38810ae2bdf3159821a33743486"}, "originalPosition": 85}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIwMjI1ODQyOnYy", "diffSide": "RIGHT", "path": "core/server/master/src/main/java/alluxio/master/file/meta/InodeTreeBufferedIterator.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QyMjoyNzozNlrOHngDWg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QyMjozODoxMlrOHngOlQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTE4MTY1OA==", "bodyText": "Is this the only iterator that implements close() right now?", "url": "https://github.com/Alluxio/alluxio/pull/12383#discussion_r511181658", "createdAt": "2020-10-23T22:27:36Z", "author": {"login": "gpang"}, "path": "core/server/master/src/main/java/alluxio/master/file/meta/InodeTreeBufferedIterator.java", "diffHunk": "@@ -44,12 +46,13 @@\n  * makes applying those entries later more efficient by guaranteeing that a parent of an inode is\n  * iterated before it.\n  */\n-public class InodeTreeBufferedIterator implements Iterator<Journal.JournalEntry> {\n+public class InodeTreeBufferedIterator implements Iterator<Journal.JournalEntry>, Closeable {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4ffb33a3ed8ba38810ae2bdf3159821a33743486"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTE4NDUzMw==", "bodyText": "Yes.", "url": "https://github.com/Alluxio/alluxio/pull/12383#discussion_r511184533", "createdAt": "2020-10-23T22:38:12Z", "author": {"login": "bf8086"}, "path": "core/server/master/src/main/java/alluxio/master/file/meta/InodeTreeBufferedIterator.java", "diffHunk": "@@ -44,12 +46,13 @@\n  * makes applying those entries later more efficient by guaranteeing that a parent of an inode is\n  * iterated before it.\n  */\n-public class InodeTreeBufferedIterator implements Iterator<Journal.JournalEntry> {\n+public class InodeTreeBufferedIterator implements Iterator<Journal.JournalEntry>, Closeable {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTE4MTY1OA=="}, "originalCommit": {"oid": "4ffb33a3ed8ba38810ae2bdf3159821a33743486"}, "originalPosition": 19}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1084, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}