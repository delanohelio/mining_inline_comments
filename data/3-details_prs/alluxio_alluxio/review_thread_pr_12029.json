{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDczNTc3NTEx", "number": 12029, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QyMDo1NToxMlrOEdYneQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QyMDo1NToxMlrOEdYneQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk5MjQ3NDgxOnYy", "diffSide": "RIGHT", "path": "core/server/worker/src/main/java/alluxio/worker/block/AsyncCacheRequestManager.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QyMDo1NToxMlrOHIg7XQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QyMTowMTo1MVrOHIhIvA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODY5MDE0MQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                      \"Async cache thread pool is at capacity. To increase, update the parameter '%s'. \"\n          \n          \n            \n                      \"Failed to cache block locally (async & best effort) as the thread pool is at capacity. To increase, update the parameter '%s'. \"", "url": "https://github.com/Alluxio/alluxio/pull/12029#discussion_r478690141", "createdAt": "2020-08-27T20:55:12Z", "author": {"login": "apc999"}, "path": "core/server/worker/src/main/java/alluxio/worker/block/AsyncCacheRequestManager.java", "diffHunk": "@@ -131,11 +137,18 @@ public void submitRequest(AsyncCacheRequest request) {\n           mPendingRequests.remove(blockId);\n         }\n       });\n-    } catch (Exception e) {\n-      // RuntimeExceptions (e.g. RejectedExecutionException) may be thrown in extreme cases when the\n+    } catch (RejectedExecutionException e) {\n+      // RejectedExecutionException may be thrown in extreme cases when the\n       // gRPC thread pool is drained due to highly concurrent caching workloads. In these cases,\n       // return as async caching is at best effort.\n-      LOG.warn(\"Failed to submit async cache request.\\n{}\\nError: {}\", request, e);\n+      mNumRejected.incrementAndGet();\n+      SAMPLING_LOG.warn(String.format(\n+          \"Async cache thread pool is at capacity. To increase, update the parameter '%s'. \"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "db3b0f8d85a2c421c71b97acbeb9ff2692d5ec52"}, "originalPosition": 56}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODY5MzU2NA==", "bodyText": "Done", "url": "https://github.com/Alluxio/alluxio/pull/12029#discussion_r478693564", "createdAt": "2020-08-27T21:01:51Z", "author": {"login": "gpang"}, "path": "core/server/worker/src/main/java/alluxio/worker/block/AsyncCacheRequestManager.java", "diffHunk": "@@ -131,11 +137,18 @@ public void submitRequest(AsyncCacheRequest request) {\n           mPendingRequests.remove(blockId);\n         }\n       });\n-    } catch (Exception e) {\n-      // RuntimeExceptions (e.g. RejectedExecutionException) may be thrown in extreme cases when the\n+    } catch (RejectedExecutionException e) {\n+      // RejectedExecutionException may be thrown in extreme cases when the\n       // gRPC thread pool is drained due to highly concurrent caching workloads. In these cases,\n       // return as async caching is at best effort.\n-      LOG.warn(\"Failed to submit async cache request.\\n{}\\nError: {}\", request, e);\n+      mNumRejected.incrementAndGet();\n+      SAMPLING_LOG.warn(String.format(\n+          \"Async cache thread pool is at capacity. To increase, update the parameter '%s'. \"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODY5MDE0MQ=="}, "originalCommit": {"oid": "db3b0f8d85a2c421c71b97acbeb9ff2692d5ec52"}, "originalPosition": 56}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1329, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}