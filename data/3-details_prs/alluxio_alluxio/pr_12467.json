{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE2NDEzMjA2", "number": 12467, "title": "Log Some Job Failure Stacktraces with sampling logger", "bodyText": "", "createdAt": "2020-11-06T00:09:29Z", "url": "https://github.com/Alluxio/alluxio/pull/12467", "merged": true, "mergeCommit": {"oid": "37f6239bf3703a5fe48d950cb8447093ec014f09"}, "closed": true, "closedAt": "2020-11-12T02:02:28Z", "author": {"login": "bradyoo"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdbN3bfAFqTUyNzUwNDExNQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdblOEtgFqTUyODU2MzMyMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI3NTA0MTE1", "url": "https://github.com/Alluxio/alluxio/pull/12467#pullrequestreview-527504115", "createdAt": "2020-11-10T18:42:30Z", "commit": {"oid": "21cede39748e467064dc543c65b13eb904bd5735"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bccda9a36c0e95fed996d74f8d6c60958450543b", "author": {"user": {"login": "bradyoo", "name": "Bradley Yoo"}}, "url": "https://github.com/Alluxio/alluxio/commit/bccda9a36c0e95fed996d74f8d6c60958450543b", "committedDate": "2020-11-10T23:01:30Z", "message": "Sample stacktrace logs"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "21cede39748e467064dc543c65b13eb904bd5735", "author": {"user": {"login": "bradyoo", "name": "Bradley Yoo"}}, "url": "https://github.com/Alluxio/alluxio/commit/21cede39748e467064dc543c65b13eb904bd5735", "committedDate": "2020-11-06T00:52:19Z", "message": "checkstyle"}, "afterCommit": {"oid": "bccda9a36c0e95fed996d74f8d6c60958450543b", "author": {"user": {"login": "bradyoo", "name": "Bradley Yoo"}}, "url": "https://github.com/Alluxio/alluxio/commit/bccda9a36c0e95fed996d74f8d6c60958450543b", "committedDate": "2020-11-10T23:01:30Z", "message": "Sample stacktrace logs"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI3NzUzNzg0", "url": "https://github.com/Alluxio/alluxio/pull/12467#pullrequestreview-527753784", "createdAt": "2020-11-11T00:45:49Z", "commit": {"oid": "bccda9a36c0e95fed996d74f8d6c60958450543b"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQwMDo0NTo0OVrOHw1P1g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQwMDo0NTo0OVrOHw1P1g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDk2NjEwMg==", "bodyText": "I think this message should have taskId and jobId, so we know what the stack is for?\nSomething like:\nSAMPLING_LOGGER.info(\"Stack trace for taskId: {} jobId: {} : {}\", taskId, jobId, Throwables.getStackTraceAsString(t));```", "url": "https://github.com/Alluxio/alluxio/pull/12467#discussion_r520966102", "createdAt": "2020-11-11T00:45:49Z", "author": {"login": "gpang"}, "path": "job/server/src/main/java/alluxio/worker/job/task/TaskExecutorManager.java", "diffHunk": "@@ -201,6 +203,7 @@ public synchronized void notifyTaskFailure(long jobId, long taskId, Throwable t)\n     }\n     finishTask(id);\n     LOG.info(\"Task {} for job {} failed: {}\", taskId, jobId, errorMessage);\n+    SAMPLING_LOGGER.info(Throwables.getStackTraceAsString(t));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bccda9a36c0e95fed996d74f8d6c60958450543b"}, "originalPosition": 20}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e219a8410837255a826df62530c5fbcf3ba57610", "author": {"user": {"login": "bradyoo", "name": "Bradley Yoo"}}, "url": "https://github.com/Alluxio/alluxio/commit/e219a8410837255a826df62530c5fbcf3ba57610", "committedDate": "2020-11-11T17:19:01Z", "message": "feedback"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI4NTYzMzIz", "url": "https://github.com/Alluxio/alluxio/pull/12467#pullrequestreview-528563323", "createdAt": "2020-11-11T21:55:03Z", "commit": {"oid": "e219a8410837255a826df62530c5fbcf3ba57610"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3405, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}