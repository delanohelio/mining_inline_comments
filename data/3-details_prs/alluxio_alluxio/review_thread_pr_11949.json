{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY1MTAxMDky", "number": 11949, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMVQxODo1OTozNVrOEbEt7Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMVQxODo1OTo0MlrOEbEuCg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk2ODI0MzAxOnYy", "diffSide": "RIGHT", "path": "docs/cn/ufs/S3.md", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMVQxODo1OTozNVrOHE38zQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMVQxODo1OTozNVrOHE38zQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDg3MzAzNw==", "bodyText": "space after ###", "url": "https://github.com/Alluxio/alluxio/pull/11949#discussion_r474873037", "createdAt": "2020-08-21T18:59:35Z", "author": {"login": "LuQQiu"}, "path": "docs/cn/ufs/S3.md", "diffHunk": "@@ -182,3 +182,60 @@ Alluxio\u901a\u8fc7S3 bucket\u7684\u8bfb\u5199ACL\u6765\u51b3\u5b9aAlluxio\u6587\u4ef6\u7684\u6240\u6709\u8005\u6743\u9650\u6a21\u5f0f\n ### \u6743\u9650\u66f4\u6539\n \n \u5bf9Alluxio\u76ee\u5f55\u6216\u8005\u6587\u4ef6\u8fdb\u884c`chown`, `chgrp`, `chmod`\u64cd\u4f5c\u4e0d\u4f1a\u5bf9\u5176\u5e95\u5c42S3 bucket\u6216\u8005\u5bf9\u8c61\u7684\u6743\u9650\u505a\u51fa\u66f4\u6539\u3002\n+\n+### \u6587\u4ef6\u6743\u9650\n+\n+Alluxio\u901a\u8fc7\u68c0\u67e5S3\u5b58\u50a8\u6876\u7684\u8bfb/\u5199ACL\u6765\u786e\u5b9a\u6587\u4ef6\u6240\u6709\u8005\u5bf9Alluxio\u6587\u4ef6\u7684\u6743\u9650\u3002\n+\u4f8b\u5982\uff0c\u5982\u679cAWS\u7528\u6237\u5bf9\u5df2\u6302\u8f7d\u7684\u5b58\u50a8\u6876\u5177\u6709\u53ea\u8bfb\u8bbf\u95ee\u6743\u9650\uff0c\u5219\u5df2\u6302\u8f7d\u7684\u5b58\u50a8\u6876\n+\u76ee\u5f55\u548c\u6587\u4ef6\u5c06\u8bbe\u7f6e\u4e3a`0500`\u6743\u9650\u3002\n+\u5982\u679cAWS\u7528\u6237\u5bf9\u5e95\u5c42\u5b58\u50a8\u6876\u5177\u6709\u5b8c\u5168\u8bbf\u95ee\u6743\u9650\uff0c\n+\u6302\u8f7d\u7684\u76ee\u5f55\u548c\u6587\u4ef6\u5c06\u8bbe\u7f6e\u4e3a`0700`\u6743\u9650\u3002\n+\u6ce8\u610f\uff0cAlluxio\u4ec5\u5728\u786e\u5b9a\u6302\u8f7d\u70b9\u7684\u6587\u4ef6\u7cfb\u7edf\u6743\u9650\u65f6\u7ee7\u627f\u5b58\u50a8\u6876\u7ea7ACL\uff0c\n+\u5e76\u5ffd\u7565\u5355\u4e2a\u5bf9\u8c61\u7684ACLS\u8bbe\u7f6e\u3002\n+\n+`0500`\u6216`0700`\u4e3a\u6587\u4ef6\u9ed8\u8ba4\u6743\u9650\uff0c\u975e\u6587\u4ef6\u6240\u6709\u8005Alluxio\u6587\u4ef6\u7cfb\u7edf\u7528\u6237\u5c06\n+\u65e0\u6cd5\u8bbf\u95ee\u8be5\u6302\u8f7d\u70b9\u4e0b\u7684\u6587\u4ef6\u3002\n+\u8fd9\u53ef\u80fd\u7ed9\u4e0d\u540c\u7684\u7528\u6237\u8bfb\u53d6\u6302\u8f7d\u7684\u6570\u636e\u5e26\u6765\u95ee\u9898\u3002\n+\u4f8b\u5982\uff0c\u5728\u7528\u6237`presto`\u4e0b\u8fd0\u884c\u7684Presto\u4f5c\u4e1a\u53ef\u80fd\u4f1a\u9047\u5230\u7c7b\u4f3c\u4ee5\u4e0b\u9519\u8bef\n+\u5f53\u8bbf\u95ee\u6743\u9650\u4e3a0700\u7684\u7528\u6237john\u62e5\u6709\u7684\u6302\u8f7d\u70b9\u65f6\u51fa\u73b0\u9519\u8bef Query failed: Failed to list directory\u3002\n+\u5728Alluxio master\u65e5\u5fd7(`master.log`)\u4e2d\uff0c\u53ef\u4ee5\u627e\u5230\u7c7b\u4f3c\u4ee5\u4e0b\u9519\u8bef\n+\n+```\n+Error=alluxio.exception.AccessControlException: Permission denied: user=presto, access=--x, path=/mnt/s3/myobject: failed at s3, inode owner=john, inode group=john, inode mode=rwx------\n+```\n+\n+\u8fd9\u662f\u56e0\u4e3a\u6302\u8f7d\u7684\u76ee\u5f55\u5177\u6709`0700`\u6743\u9650\uff0c\u56e0\u6b64\u5e94\u7528\u7a0b\u5e8f\u7528\u6237`presto`\n+\u65e0\u6cd5\u8bbf\u95ee\u8be5\u6587\u4ef6\u3002\n+\u8981\u4e0eAlluxio\u547d\u540d\u7a7a\u95f4\u4e2d\u7684\u5176\u4ed6\u7528\u6237\u5171\u4eabS3\u6302\u8f7d\u70b9\uff0c\u53ef\u4ee5\u9009\u62e9\u4ee5\u4e0b\u4e24\u8005\u4e4b\u4e00:\n+\n+1.(\u9009\u98791):\u4e3a\u6839\u6302\u8f7d\u8bbe\u7f6e\n+`alluxio-site.properties`\u4e2d\u7684`alluxio.master.mount.table.root.shared=true`\u6216\n+\u5728fs mount\u547d\u4ee4\u4e2d\u4f20\u9012--shared\u53c2\u6570; \u5982\u6b64\u8bbe\u7f6e\u7ed9\u6240\u6709\u7528\u6237`rwx`\u6743\u9650\u3002\n+2.(\u9009\u98792):\u5c06`alluxio.underfs.s3.inherit.acl=false`\u548c`alluxio.underfs.s3.default.mode`\u8bbe\u7f6e\u4e3a\u4e00\u4e2a\u65b0\u7684\u975e`0700`\u9ed8\u8ba4\u503c\uff0c\u6765\u5141\u8bb8\u5176\u4ed6\u7528\u6237\u8bbf\u95ee\u3002\n+\n+### \u66f4\u6539\u6743\u9650\n+\n+\u9488\u5bf9Alluxio\u76ee\u5f55\u548c\u6587\u4ef6\u7684`chown`\uff0c`chgrp`\u548c`chmod`\u7b49\u6743\u9650\u66f4\u6539\u547d\u4ee4\u4e0d\u4f1a\u4fee\u6539\u5e95\u5c42\n+S3\u6876\u6216\u5bf9\u8c61\u7684\u6743\u9650\u3002\n+\n+## \u6545\u969c\u6392\u9664\n+\n+###\u542f\u7528AWS-SDK Debug\u7ea7\u522b", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9ebf710290216035acde7cf5d39e708a7fb9668d"}, "originalPosition": 42}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk2ODI0MzMwOnYy", "diffSide": "RIGHT", "path": "docs/cn/ufs/S3.md", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMVQxODo1OTo0MlrOHE39Aw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMVQxODo1OTo0MlrOHE39Aw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDg3MzA5MQ==", "bodyText": "duplicate empty lines", "url": "https://github.com/Alluxio/alluxio/pull/11949#discussion_r474873091", "createdAt": "2020-08-21T18:59:42Z", "author": {"login": "LuQQiu"}, "path": "docs/cn/ufs/S3.md", "diffHunk": "@@ -182,3 +182,60 @@ Alluxio\u901a\u8fc7S3 bucket\u7684\u8bfb\u5199ACL\u6765\u51b3\u5b9aAlluxio\u6587\u4ef6\u7684\u6240\u6709\u8005\u6743\u9650\u6a21\u5f0f\n ### \u6743\u9650\u66f4\u6539\n \n \u5bf9Alluxio\u76ee\u5f55\u6216\u8005\u6587\u4ef6\u8fdb\u884c`chown`, `chgrp`, `chmod`\u64cd\u4f5c\u4e0d\u4f1a\u5bf9\u5176\u5e95\u5c42S3 bucket\u6216\u8005\u5bf9\u8c61\u7684\u6743\u9650\u505a\u51fa\u66f4\u6539\u3002\n+\n+### \u6587\u4ef6\u6743\u9650\n+\n+Alluxio\u901a\u8fc7\u68c0\u67e5S3\u5b58\u50a8\u6876\u7684\u8bfb/\u5199ACL\u6765\u786e\u5b9a\u6587\u4ef6\u6240\u6709\u8005\u5bf9Alluxio\u6587\u4ef6\u7684\u6743\u9650\u3002\n+\u4f8b\u5982\uff0c\u5982\u679cAWS\u7528\u6237\u5bf9\u5df2\u6302\u8f7d\u7684\u5b58\u50a8\u6876\u5177\u6709\u53ea\u8bfb\u8bbf\u95ee\u6743\u9650\uff0c\u5219\u5df2\u6302\u8f7d\u7684\u5b58\u50a8\u6876\n+\u76ee\u5f55\u548c\u6587\u4ef6\u5c06\u8bbe\u7f6e\u4e3a`0500`\u6743\u9650\u3002\n+\u5982\u679cAWS\u7528\u6237\u5bf9\u5e95\u5c42\u5b58\u50a8\u6876\u5177\u6709\u5b8c\u5168\u8bbf\u95ee\u6743\u9650\uff0c\n+\u6302\u8f7d\u7684\u76ee\u5f55\u548c\u6587\u4ef6\u5c06\u8bbe\u7f6e\u4e3a`0700`\u6743\u9650\u3002\n+\u6ce8\u610f\uff0cAlluxio\u4ec5\u5728\u786e\u5b9a\u6302\u8f7d\u70b9\u7684\u6587\u4ef6\u7cfb\u7edf\u6743\u9650\u65f6\u7ee7\u627f\u5b58\u50a8\u6876\u7ea7ACL\uff0c\n+\u5e76\u5ffd\u7565\u5355\u4e2a\u5bf9\u8c61\u7684ACLS\u8bbe\u7f6e\u3002\n+\n+`0500`\u6216`0700`\u4e3a\u6587\u4ef6\u9ed8\u8ba4\u6743\u9650\uff0c\u975e\u6587\u4ef6\u6240\u6709\u8005Alluxio\u6587\u4ef6\u7cfb\u7edf\u7528\u6237\u5c06\n+\u65e0\u6cd5\u8bbf\u95ee\u8be5\u6302\u8f7d\u70b9\u4e0b\u7684\u6587\u4ef6\u3002\n+\u8fd9\u53ef\u80fd\u7ed9\u4e0d\u540c\u7684\u7528\u6237\u8bfb\u53d6\u6302\u8f7d\u7684\u6570\u636e\u5e26\u6765\u95ee\u9898\u3002\n+\u4f8b\u5982\uff0c\u5728\u7528\u6237`presto`\u4e0b\u8fd0\u884c\u7684Presto\u4f5c\u4e1a\u53ef\u80fd\u4f1a\u9047\u5230\u7c7b\u4f3c\u4ee5\u4e0b\u9519\u8bef\n+\u5f53\u8bbf\u95ee\u6743\u9650\u4e3a0700\u7684\u7528\u6237john\u62e5\u6709\u7684\u6302\u8f7d\u70b9\u65f6\u51fa\u73b0\u9519\u8bef Query failed: Failed to list directory\u3002\n+\u5728Alluxio master\u65e5\u5fd7(`master.log`)\u4e2d\uff0c\u53ef\u4ee5\u627e\u5230\u7c7b\u4f3c\u4ee5\u4e0b\u9519\u8bef\n+\n+```\n+Error=alluxio.exception.AccessControlException: Permission denied: user=presto, access=--x, path=/mnt/s3/myobject: failed at s3, inode owner=john, inode group=john, inode mode=rwx------\n+```\n+\n+\u8fd9\u662f\u56e0\u4e3a\u6302\u8f7d\u7684\u76ee\u5f55\u5177\u6709`0700`\u6743\u9650\uff0c\u56e0\u6b64\u5e94\u7528\u7a0b\u5e8f\u7528\u6237`presto`\n+\u65e0\u6cd5\u8bbf\u95ee\u8be5\u6587\u4ef6\u3002\n+\u8981\u4e0eAlluxio\u547d\u540d\u7a7a\u95f4\u4e2d\u7684\u5176\u4ed6\u7528\u6237\u5171\u4eabS3\u6302\u8f7d\u70b9\uff0c\u53ef\u4ee5\u9009\u62e9\u4ee5\u4e0b\u4e24\u8005\u4e4b\u4e00:\n+\n+1.(\u9009\u98791):\u4e3a\u6839\u6302\u8f7d\u8bbe\u7f6e\n+`alluxio-site.properties`\u4e2d\u7684`alluxio.master.mount.table.root.shared=true`\u6216\n+\u5728fs mount\u547d\u4ee4\u4e2d\u4f20\u9012--shared\u53c2\u6570; \u5982\u6b64\u8bbe\u7f6e\u7ed9\u6240\u6709\u7528\u6237`rwx`\u6743\u9650\u3002\n+2.(\u9009\u98792):\u5c06`alluxio.underfs.s3.inherit.acl=false`\u548c`alluxio.underfs.s3.default.mode`\u8bbe\u7f6e\u4e3a\u4e00\u4e2a\u65b0\u7684\u975e`0700`\u9ed8\u8ba4\u503c\uff0c\u6765\u5141\u8bb8\u5176\u4ed6\u7528\u6237\u8bbf\u95ee\u3002\n+\n+### \u66f4\u6539\u6743\u9650\n+\n+\u9488\u5bf9Alluxio\u76ee\u5f55\u548c\u6587\u4ef6\u7684`chown`\uff0c`chgrp`\u548c`chmod`\u7b49\u6743\u9650\u66f4\u6539\u547d\u4ee4\u4e0d\u4f1a\u4fee\u6539\u5e95\u5c42\n+S3\u6876\u6216\u5bf9\u8c61\u7684\u6743\u9650\u3002\n+\n+## \u6545\u969c\u6392\u9664\n+\n+###\u542f\u7528AWS-SDK Debug\u7ea7\u522b\n+\u5982\u679c\u5728\u7279\u5b9aS3\u540e\u7aef\u4e0a\u8fd0\u884c\u65f6\u9047\u5230\u95ee\u9898\uff0c\u8bf7\u542f\u7528\u989d\u5916\u65e5\u5fd7\u8bb0\u5f55\u4ee5\u8ddf\u8e2aHTTP\u7f51\u6d41\u3002 \u4fee\u6539`conf/log4j.properties`\u4ee5\u6dfb\u52a0\u4ee5\u4e0b\u5c5e\u6027:\n+\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9ebf710290216035acde7cf5d39e708a7fb9668d"}, "originalPosition": 45}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1280, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}