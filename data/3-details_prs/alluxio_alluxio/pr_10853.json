{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzcxNjc2NDE0", "number": 10853, "title": "Improve performance of MetricsHeartbeatContextTest", "bodyText": "The test currently runs for almost 3 minutes due to client retry\nconfiguration. This change makes the PollingMasterInquireClient\nrespect the USER_RPC_RETRY* configuration values which\nsubsequently speeds up the test from ~3min to ~5sec", "createdAt": "2020-02-06T02:23:50Z", "url": "https://github.com/Alluxio/alluxio/pull/10853", "merged": true, "mergeCommit": {"oid": "01f360c389e01cf359cb95f06acd3387ec8d3079"}, "closed": true, "closedAt": "2020-02-07T20:48:42Z", "author": {"login": "ZacBlanco"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcBhPDdgH2gAyMzcxNjc2NDE0OjZiMzcxOWZiODU5ZWI2MzRlNWVjZjViYTA1NmMyZmEyMjdlOTNhOTY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcCFmXtAFqTM1NTQyNjEzNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "6b3719fb859eb634e5ecf5ba056c2fa227e93a96", "author": {"user": {"login": "ZacBlanco", "name": "Zac Blanco"}}, "url": "https://github.com/Alluxio/alluxio/commit/6b3719fb859eb634e5ecf5ba056c2fa227e93a96", "committedDate": "2020-02-06T02:23:19Z", "message": "Improve performance of MetricsHeartbeatContextTest\n\nThe test currently runs for almost 3 minutes due to client retry\nconfiguration. This change makes the PollingMasterInquireClient\nrespect the USER_RPC_RETRY* configuration values which\nsubsequently speeds up the test."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU0NzAxOTIw", "url": "https://github.com/Alluxio/alluxio/pull/10853#pullrequestreview-354701920", "createdAt": "2020-02-06T19:11:49Z", "commit": {"oid": "6b3719fb859eb634e5ecf5ba056c2fa227e93a96"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU0NzM4Mzg4", "url": "https://github.com/Alluxio/alluxio/pull/10853#pullrequestreview-354738388", "createdAt": "2020-02-06T20:09:31Z", "commit": {"oid": "6b3719fb859eb634e5ecf5ba056c2fa227e93a96"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNlQyMDowOTozMVrOFmoo0w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNlQyMDowOTozMVrOFmoo0w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjA1NjAxOQ==", "bodyText": "How does changing this affect other tests? Will it still behave similarly to the previous retry policy?", "url": "https://github.com/Alluxio/alluxio/pull/10853#discussion_r376056019", "createdAt": "2020-02-06T20:09:31Z", "author": {"login": "gpang"}, "path": "core/common/src/main/java/alluxio/master/PollingMasterInquireClient.java", "diffHunk": "@@ -61,7 +61,10 @@\n   public PollingMasterInquireClient(List<InetSocketAddress> masterAddresses,\n       AlluxioConfiguration alluxioConf,\n       UserState userState) {\n-    this(masterAddresses, () -> new ExponentialBackoffRetry(20, 2000, 30),\n+    this(masterAddresses, () -> RetryUtils.defaultClientRetry(\n+        alluxioConf.getDuration(PropertyKey.USER_RPC_RETRY_MAX_DURATION),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6b3719fb859eb634e5ecf5ba056c2fa227e93a96"}, "originalPosition": 16}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU0ODc3MTQx", "url": "https://github.com/Alluxio/alluxio/pull/10853#pullrequestreview-354877141", "createdAt": "2020-02-07T01:06:58Z", "commit": {"oid": "6b3719fb859eb634e5ecf5ba056c2fa227e93a96"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU1NDI2MTM0", "url": "https://github.com/Alluxio/alluxio/pull/10853#pullrequestreview-355426134", "createdAt": "2020-02-07T20:45:22Z", "commit": {"oid": "6b3719fb859eb634e5ecf5ba056c2fa227e93a96"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3200, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}