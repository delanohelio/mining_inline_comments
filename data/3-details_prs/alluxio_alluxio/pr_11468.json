{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIyMTg5Mjkw", "number": 11468, "title": "Support alluxio.tar.gz in alluxio-emr.sh emr bootstrap", "bodyText": "Support users providing tarball with name alluxio.tar.gz for alluxio-emr.sh", "createdAt": "2020-05-23T01:23:21Z", "url": "https://github.com/Alluxio/alluxio/pull/11468", "merged": true, "mergeCommit": {"oid": "920583159e5951c8763b3dec17fae463e47af669"}, "closed": true, "closedAt": "2020-05-26T18:46:37Z", "author": {"login": "LuQQiu"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcj8fkYgH2gAyNDIyMTg5MjkwOjI4Y2UwZjMzYWNjZmU3Njc4YzY1MjJmNWY0ZDgwMzZhYTlkNWY5MTY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcj-ULRgFqTQxNzI0NjQzMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "28ce0f33accfe7678c6522f5f4d8036aa9d5f916", "author": {"user": {"login": "LuQQiu", "name": null}}, "url": "https://github.com/Alluxio/alluxio/commit/28ce0f33accfe7678c6522f5f4d8036aa9d5f916", "committedDate": "2020-05-23T01:22:13Z", "message": "Support alluxio.tar.gz in alluxio-emr.sh emr bootstrap"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3MjQyMjk3", "url": "https://github.com/Alluxio/alluxio/pull/11468#pullrequestreview-417242297", "createdAt": "2020-05-23T02:16:02Z", "commit": {"oid": "28ce0f33accfe7678c6522f5f4d8036aa9d5f916"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yM1QwMjoxNjowMlrOGZm76w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yM1QwMjoyMDozMFrOGZm86Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTUwNTUxNQ==", "bodyText": "should this be release_unzip?", "url": "https://github.com/Alluxio/alluxio/pull/11468#discussion_r429505515", "createdAt": "2020-05-23T02:16:02Z", "author": {"login": "Xenorith"}, "path": "integration/emr/alluxio-emr.sh", "diffHunk": "@@ -143,9 +143,12 @@ emr_install_alluxio() {\n   download_file \"${alluxio_tarball}\"\n \n   release=$(basename \"${alluxio_tarball}\")\n-  local release_unzip\n-  release_unzip=\"${release%%-*}\" # trims everything after the first '-', ex. alluxio-foo-bar-whatever -> alluxio\n-\n+  local release_prefix", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "28ce0f33accfe7678c6522f5f4d8036aa9d5f916"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTUwNTc2OQ==", "bodyText": "both of these expressions seem very fragile to me :/\nthe original expression of converting alluxio-* -> alluxio seems unnecessarily difficult\nis it not possible to trim the \".tar.gz\" suffix from the tarball and use that as the directory name that the tarball unzips to?", "url": "https://github.com/Alluxio/alluxio/pull/11468#discussion_r429505769", "createdAt": "2020-05-23T02:20:30Z", "author": {"login": "Xenorith"}, "path": "integration/emr/alluxio-emr.sh", "diffHunk": "@@ -143,9 +143,12 @@ emr_install_alluxio() {\n   download_file \"${alluxio_tarball}\"\n \n   release=$(basename \"${alluxio_tarball}\")\n-  local release_unzip\n-  release_unzip=\"${release%%-*}\" # trims everything after the first '-', ex. alluxio-foo-bar-whatever -> alluxio\n-\n+  local release_prefix\n+  if [[ \"${release}\" == *-* ]]; then\n+    release_unzip=\"${release%%-*}\" # trims everything after the first '-', ex. alluxio-foo-bar-whatever -> alluxio", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "28ce0f33accfe7678c6522f5f4d8036aa9d5f916"}, "originalPosition": 9}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8590e1b3f4524b7ac7148fb491a9a2f30583eec5", "author": {"user": {"login": "LuQQiu", "name": null}}, "url": "https://github.com/Alluxio/alluxio/commit/8590e1b3f4524b7ac7148fb491a9a2f30583eec5", "committedDate": "2020-05-23T03:02:32Z", "message": "Fix error"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3MjQ2NDMz", "url": "https://github.com/Alluxio/alluxio/pull/11468#pullrequestreview-417246433", "createdAt": "2020-05-23T03:29:35Z", "commit": {"oid": "8590e1b3f4524b7ac7148fb491a9a2f30583eec5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4427, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}