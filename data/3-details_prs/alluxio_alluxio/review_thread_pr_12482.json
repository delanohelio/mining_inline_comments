{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE4Njc5OTQ0", "number": 12482, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQxODo1MzoyN1rOE3XcCw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQxODo1MzoyN1rOE3XcCw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI2NDkxMTQ3OnYy", "diffSide": "RIGHT", "path": "core/server/common/src/main/java/alluxio/master/journal/raft/JournalStateMachine.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQxODo1MzoyN1rOHwq54g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQyMjo0NDo0NlrOHwyjZQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDc5NjY0Mg==", "bodyText": "Can you add more context/details to this comment?\nAlso, is there a way to add a simple unit test for this behavior?", "url": "https://github.com/Alluxio/alluxio/pull/12482#discussion_r520796642", "createdAt": "2020-11-10T18:53:27Z", "author": {"login": "gpang"}, "path": "core/server/common/src/main/java/alluxio/master/journal/raft/JournalStateMachine.java", "diffHunk": "@@ -242,7 +246,10 @@ public void close() {\n   public CompletableFuture<Message> applyTransaction(TransactionContext trx) {\n     try {\n       applyJournalEntryCommand(trx);\n-      return super.applyTransaction(trx);\n+      RaftProtos.LogEntryProto entry = Objects.requireNonNull(trx.getLogEntry());\n+      updateLastAppliedTermIndex(entry.getTerm(), entry.getIndex());\n+      // no response message is expected", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "29fa52ff76e3ed2944d80619bc5c024c3116c249"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDkyMTk1Nw==", "bodyText": "Added a simple test and more comments.", "url": "https://github.com/Alluxio/alluxio/pull/12482#discussion_r520921957", "createdAt": "2020-11-10T22:44:46Z", "author": {"login": "bf8086"}, "path": "core/server/common/src/main/java/alluxio/master/journal/raft/JournalStateMachine.java", "diffHunk": "@@ -242,7 +246,10 @@ public void close() {\n   public CompletableFuture<Message> applyTransaction(TransactionContext trx) {\n     try {\n       applyJournalEntryCommand(trx);\n-      return super.applyTransaction(trx);\n+      RaftProtos.LogEntryProto entry = Objects.requireNonNull(trx.getLogEntry());\n+      updateLastAppliedTermIndex(entry.getTerm(), entry.getIndex());\n+      // no response message is expected", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDc5NjY0Mg=="}, "originalCommit": {"oid": "29fa52ff76e3ed2944d80619bc5c024c3116c249"}, "originalPosition": 25}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1020, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}