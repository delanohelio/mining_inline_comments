{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgxMDg4NjIx", "number": 11048, "title": "Add getWorkerAddresses and invalidate cache when registering worker", "bodyText": "A loading cache is used for caching worker info list results. In this way, the overhead to construct worker info list is reduced but the worker info list result is not up to date.\nAdd a getWorkerAddresses() method which returns the most up-to-date live worker addresses.\nAdd an invalidate cache in registering worker to make sure getWorkerInfoList() call catchs up with the worker changes.", "createdAt": "2020-02-27T21:43:54Z", "url": "https://github.com/Alluxio/alluxio/pull/11048", "merged": true, "mergeCommit": {"oid": "799e4dedd44b1d23816a29bbf3aba12140d785a8"}, "closed": true, "closedAt": "2020-02-28T00:00:29Z", "author": {"login": "LuQQiu"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcIiYJ_AH2gAyMzgxMDg4NjIxOmQ2NWU5YmE0ZTRhODU5ZWVkNjJmNDAyZTdlZmMzMzMwZWM2ODZlYzg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcIkK8qgFqTM2NjA3ODA3MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d65e9ba4e4a859eed62f402e7efc3330ec686ec8", "author": {"user": {"login": "LuQQiu", "name": null}}, "url": "https://github.com/Alluxio/alluxio/commit/d65e9ba4e4a859eed62f402e7efc3330ec686ec8", "committedDate": "2020-02-27T21:40:38Z", "message": "Add getWorkerAddresses() RPC"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2MDI4MzM4", "url": "https://github.com/Alluxio/alluxio/pull/11048#pullrequestreview-366028338", "createdAt": "2020-02-27T21:56:53Z", "commit": {"oid": "d65e9ba4e4a859eed62f402e7efc3330ec686ec8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QyMTo1Njo1M1rOFviovg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QyMTo1Njo1M1rOFviovg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTM5NDg3OA==", "bodyText": "(nit) Initialize with initial capacity to be the number of workers.", "url": "https://github.com/Alluxio/alluxio/pull/11048#discussion_r385394878", "createdAt": "2020-02-27T21:56:53Z", "author": {"login": "bf8086"}, "path": "core/server/master/src/main/java/alluxio/master/block/DefaultBlockMaster.java", "diffHunk": "@@ -463,6 +463,19 @@ public long getUsedBytes() {\n     return workerInfoList;\n   }\n \n+  @Override\n+  public Set<WorkerNetAddress> getWorkerAddresses() throws UnavailableException {\n+    if (mSafeModeManager.isInSafeMode()) {\n+      throw new UnavailableException(ExceptionMessage.MASTER_IN_SAFEMODE.getMessage());\n+    }\n+    Set<WorkerNetAddress> workerAddresses = new HashSet<>();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d65e9ba4e4a859eed62f402e7efc3330ec686ec8"}, "originalPosition": 9}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c4c78124633188faa89edb18e261db3bd125e206", "author": {"user": {"login": "LuQQiu", "name": null}}, "url": "https://github.com/Alluxio/alluxio/commit/c4c78124633188faa89edb18e261db3bd125e206", "committedDate": "2020-02-27T22:05:17Z", "message": "add size to set during initialization"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2MDc4MDcx", "url": "https://github.com/Alluxio/alluxio/pull/11048#pullrequestreview-366078071", "createdAt": "2020-02-27T23:46:01Z", "commit": {"oid": "c4c78124633188faa89edb18e261db3bd125e206"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4916, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}