{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk1NzgwNTEy", "number": 11219, "title": "Add ORC file input support", "bodyText": "", "createdAt": "2020-03-30T17:03:36Z", "url": "https://github.com/Alluxio/alluxio/pull/11219", "merged": true, "mergeCommit": {"oid": "da0f0eb43ab89b87f6db23859af3b9ab354f77a2"}, "closed": true, "closedAt": "2020-04-17T16:07:18Z", "author": {"login": "bradyoo"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcRKyoggH2gAyMzk1NzgwNTEyOmM1MWJmMTZlOWFjNWM3NzVjZGQzNTMyYzc3YmUxODA4ZDdiZDBjNzk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcVpgiEAFqTM5MDA3NzUzMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c51bf16e9ac5c775cdd3532c77be1808d7bd0c79", "author": {"user": {"login": "bradyoo", "name": "Bradley Yoo"}}, "url": "https://github.com/Alluxio/alluxio/commit/c51bf16e9ac5c775cdd3532c77be1808d7bd0c79", "committedDate": "2020-03-25T17:17:09Z", "message": "ORC File type support"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "82a731a18bc3f719cd6e9f7e0b01418621f50043", "author": {"user": {"login": "bradyoo", "name": "Bradley Yoo"}}, "url": "https://github.com/Alluxio/alluxio/commit/82a731a18bc3f719cd6e9f7e0b01418621f50043", "committedDate": "2020-03-25T18:30:59Z", "message": "License Headers"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6fda34e2457adfd4bec1cecf2dd1294e1f104c57", "author": {"user": {"login": "bradyoo", "name": "Bradley Yoo"}}, "url": "https://github.com/Alluxio/alluxio/commit/6fda34e2457adfd4bec1cecf2dd1294e1f104c57", "committedDate": "2020-03-25T18:37:52Z", "message": "fix build"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d610243e539c610557f8adc44f4bee09ca70bac8", "author": {"user": {"login": "bradyoo", "name": "Bradley Yoo"}}, "url": "https://github.com/Alluxio/alluxio/commit/d610243e539c610557f8adc44f4bee09ca70bac8", "committedDate": "2020-03-26T18:24:00Z", "message": "trying this"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "69bc28d0e8790f985da8e463ce13675fb88cf84c", "author": {"user": {"login": "bradyoo", "name": "Bradley Yoo"}}, "url": "https://github.com/Alluxio/alluxio/commit/69bc28d0e8790f985da8e463ce13675fb88cf84c", "committedDate": "2020-03-26T23:57:04Z", "message": "improve types"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4d194bd83c321c2e3ed285a95819fcaa806700a6", "author": {"user": {"login": "bradyoo", "name": "Bradley Yoo"}}, "url": "https://github.com/Alluxio/alluxio/commit/4d194bd83c321c2e3ed285a95819fcaa806700a6", "committedDate": "2020-03-27T18:26:30Z", "message": "Work"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a20ff70319d43e674e519f52466f5cd30a7c666b", "author": {"user": {"login": "bradyoo", "name": "Bradley Yoo"}}, "url": "https://github.com/Alluxio/alluxio/commit/a20ff70319d43e674e519f52466f5cd30a7c666b", "committedDate": "2020-03-30T17:01:25Z", "message": "fix checkstyle"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg1ODczNTQ0", "url": "https://github.com/Alluxio/alluxio/pull/11219#pullrequestreview-385873544", "createdAt": "2020-04-01T19:11:38Z", "commit": {"oid": "a20ff70319d43e674e519f52466f5cd30a7c666b"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQxOToxMTozOVrOF_O0qQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQxOToxNDo0MVrOF_O7Yg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTg0NzQ2NQ==", "bodyText": "were these methods mainly copied from the previous location?", "url": "https://github.com/Alluxio/alluxio/pull/11219#discussion_r401847465", "createdAt": "2020-04-01T19:11:39Z", "author": {"login": "gpang"}, "path": "job/server/src/main/java/alluxio/job/plan/transform/format/SchemaConversionUtils.java", "diffHunk": "@@ -0,0 +1,121 @@\n+/*\n+ * The Alluxio Open Foundation licenses this work under the Apache License, version 2.0\n+ * (the \"License\"). You may not use this work except in compliance with the License, which is\n+ * available at www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * This software is distributed on an \"AS IS\" basis, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n+ * either express or implied, as more fully set forth in the License.\n+ *\n+ * See the NOTICE file distributed with this work for information regarding copyright ownership.\n+ */\n+\n+package alluxio.job.plan.transform.format;\n+\n+import alluxio.job.plan.transform.FieldSchema;\n+import alluxio.job.plan.transform.HiveConstants;\n+import alluxio.job.plan.transform.format.csv.CsvUtils;\n+import alluxio.job.plan.transform.format.csv.Decimal;\n+\n+import org.apache.avro.LogicalTypes;\n+import org.apache.avro.Schema;\n+import org.apache.avro.SchemaBuilder;\n+\n+import java.io.IOException;\n+import java.util.Arrays;\n+import java.util.List;\n+\n+/**\n+ * Utility Class for converting schema to Parquet.\n+ */\n+public class SchemaConversionUtils {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a20ff70319d43e674e519f52466f5cd30a7c666b"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTg0ODI2MA==", "bodyText": "can you add javadoc comments for these 2 members?", "url": "https://github.com/Alluxio/alluxio/pull/11219#discussion_r401848260", "createdAt": "2020-04-01T19:13:08Z", "author": {"login": "gpang"}, "path": "job/server/src/main/java/alluxio/job/plan/transform/format/orc/OrcReader.java", "diffHunk": "@@ -0,0 +1,97 @@\n+/*\n+ * The Alluxio Open Foundation licenses this work under the Apache License, version 2.0\n+ * (the \"License\"). You may not use this work except in compliance with the License, which is\n+ * available at www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * This software is distributed on an \"AS IS\" basis, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n+ * either express or implied, as more fully set forth in the License.\n+ *\n+ * See the NOTICE file distributed with this work for information regarding copyright ownership.\n+ */\n+\n+package alluxio.job.plan.transform.format.orc;\n+\n+import alluxio.AlluxioURI;\n+import alluxio.job.plan.transform.format.JobPath;\n+import alluxio.job.plan.transform.format.ReadWriterUtils;\n+import alluxio.job.plan.transform.format.TableReader;\n+import alluxio.job.plan.transform.format.TableRow;\n+import alluxio.job.plan.transform.format.TableSchema;\n+\n+import com.google.common.io.Closer;\n+import org.apache.hadoop.conf.Configuration;\n+import org.apache.hadoop.hive.ql.exec.vector.VectorizedRowBatch;\n+import org.apache.orc.OrcFile;\n+import org.apache.orc.Reader;\n+import org.apache.orc.RecordReader;\n+\n+import java.io.IOException;\n+import java.util.List;\n+\n+/**\n+ * The Orc reader.\n+ */\n+public final class OrcReader implements TableReader {\n+\n+  private final Closer mCloser;\n+  private final OrcSchema mSchema;\n+  private final Reader mReader;\n+  private final RecordReader mRows;\n+  private final List<String> mFieldNames;\n+\n+  private VectorizedRowBatch mCurrentBatch;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a20ff70319d43e674e519f52466f5cd30a7c666b"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTg0OTE4Ng==", "bodyText": "can this be initialized with the size?", "url": "https://github.com/Alluxio/alluxio/pull/11219#discussion_r401849186", "createdAt": "2020-04-01T19:14:41Z", "author": {"login": "gpang"}, "path": "job/server/src/main/java/alluxio/job/plan/transform/format/orc/OrcSchema.java", "diffHunk": "@@ -0,0 +1,86 @@\n+/*\n+ * The Alluxio Open Foundation licenses this work under the Apache License, version 2.0\n+ * (the \"License\"). You may not use this work except in compliance with the License, which is\n+ * available at www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * This software is distributed on an \"AS IS\" basis, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n+ * either express or implied, as more fully set forth in the License.\n+ *\n+ * See the NOTICE file distributed with this work for information regarding copyright ownership.\n+ */\n+\n+package alluxio.job.plan.transform.format.orc;\n+\n+import alluxio.job.plan.transform.FieldSchema;\n+import alluxio.job.plan.transform.format.SchemaConversionUtils;\n+import alluxio.job.plan.transform.format.TableSchema;\n+import alluxio.job.plan.transform.format.parquet.ParquetSchema;\n+\n+import org.apache.avro.Schema;\n+import org.apache.orc.Reader;\n+import org.apache.orc.TypeDescription;\n+\n+import java.io.IOException;\n+import java.util.ArrayList;\n+import java.util.List;\n+\n+/**\n+ * The Orc Schema.\n+ */\n+public class OrcSchema implements TableSchema {\n+  private final ArrayList<FieldSchema> mAlluxioSchema;\n+\n+  private final Schema mWriteSchema;\n+\n+  /**\n+   * Default constructor for OrcSchema.\n+   * @param reader the orc reader\n+   */\n+  public OrcSchema(Reader reader) throws IOException {\n+    mAlluxioSchema = new ArrayList<>();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a20ff70319d43e674e519f52466f5cd30a7c666b"}, "originalPosition": 40}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3c9458764520ffa2b6355f11e979e1c56a6115e3", "author": {"user": {"login": "bradyoo", "name": "Bradley Yoo"}}, "url": "https://github.com/Alluxio/alluxio/commit/3c9458764520ffa2b6355f11e979e1c56a6115e3", "committedDate": "2020-04-01T21:57:42Z", "message": "feedback"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "af3ef236b15e48312fc7635ab0a7670f23671734", "author": {"user": {"login": "bradyoo", "name": "Bradley Yoo"}}, "url": "https://github.com/Alluxio/alluxio/commit/af3ef236b15e48312fc7635ab0a7670f23671734", "committedDate": "2020-04-02T16:45:53Z", "message": "Added OrcReader test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "97a22296d35e3678ac708053d4602545a94120b2", "author": {"user": {"login": "bradyoo", "name": "Bradley Yoo"}}, "url": "https://github.com/Alluxio/alluxio/commit/97a22296d35e3678ac708053d4602545a94120b2", "committedDate": "2020-04-02T17:15:51Z", "message": "checkstyle"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkwMDc3NTMx", "url": "https://github.com/Alluxio/alluxio/pull/11219#pullrequestreview-390077531", "createdAt": "2020-04-08T15:20:08Z", "commit": {"oid": "97a22296d35e3678ac708053d4602545a94120b2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4710, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}