{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA4MzMyODg3", "number": 12367, "title": "Add a releaseProfile to generate dependency reduced pom", "bodyText": "#12338\nThis is a workaround for MSHADE-148, which leads to an infinite loop when building Alluxio.\nThere are two scenarios.\n\nReleasing Alluxio\nMaven build with -Prelease.\n\nIf using newer than 3.3.x version of maven, you also have to use sequential build, Like mvn clean install -Prelease xxxx.\nIf using lower version maven before 3.3.x, you can use parallel build, e.g. mvn clean install -T 4 -Prelease xxxx\n\n\nNot Releasing Alluxio\nIf you are not releasing Alluxio, you can build Alluxio like before, please don't add the -Prelease into you build command line. e.g. mvn clean install -T 4 xxxx\n\nThis patch adds a -Prelease. If present, it will set createDependencyReducedPom true. The consequences are:\nIf you are releasing Alluxio with this profile, you are fine as long as before.\nIf you are releasing Alluxio without this profile, the alluxio-shaded-xxx-yyy.pom will be the same as the pom.xml under the module directory.\nIf you are not releasing Alluxio but you are using this profile, you may run into #12338\nIf you are not releasing Alluxio and you did not include this profile, you are fine.\nThis is all documented in pom.xml and tested locally with maven 3.6.3.", "createdAt": "2020-10-22T14:25:51Z", "url": "https://github.com/Alluxio/alluxio/pull/12367", "merged": true, "mergeCommit": {"oid": "91e1e86416c852e030b5185391aa30e42bb8815e"}, "closed": true, "closedAt": "2020-10-23T07:18:57Z", "author": {"login": "maobaolong"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdVCi3KAH2gAyNTA4MzMyODg3OjRkOWQ1OTRhNmU4OGI1ODRhYTA5NDdiNTQ1NDg0MmFmZGZiMTNkZGM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdVRSNLgFqTUxNTQwMjU4MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "4d9d594a6e88b584aa0947b5454842afdfb13ddc", "author": {"user": {"login": "maobaolong", "name": "maobaolong"}}, "url": "https://github.com/Alluxio/alluxio/commit/4d9d594a6e88b584aa0947b5454842afdfb13ddc", "committedDate": "2020-10-22T14:07:32Z", "message": "add a releaseProfile to generate dependency reduced pom"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE1MDMwNTk3", "url": "https://github.com/Alluxio/alluxio/pull/12367#pullrequestreview-515030597", "createdAt": "2020-10-22T18:59:53Z", "commit": {"oid": "4d9d594a6e88b584aa0947b5454842afdfb13ddc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQxODo1OTo1M1rOHmvrtg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQxODo1OTo1M1rOHmvrtg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDM4OTE3NA==", "bodyText": "shall we add it here too @Xenorith  -Prelease-profile\n\n  \n    \n      alluxio/dev/scripts/src/alluxio.org/build-distribution/cmd/generate-tarball.go\n    \n    \n         Line 99\n      in\n      384f944\n    \n    \n    \n    \n\n        \n          \n           args := []string{\"-T\", \"2C\", \"-am\", \"clean\", \"install\", \"-DskipTests\", \"-Dfindbugs.skip\", \"-Dmaven.javadoc.skip\", \"-Dcheckstyle.skip\", \"-Pno-webui-linter\"}", "url": "https://github.com/Alluxio/alluxio/pull/12367#discussion_r510389174", "createdAt": "2020-10-22T18:59:53Z", "author": {"login": "apc999"}, "path": "pom.xml", "diffHunk": "@@ -1487,5 +1488,19 @@\n         </plugins>\n       </build>\n     </profile>\n+    <profile>\n+      <id>release-profile</id>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4d9d594a6e88b584aa0947b5454842afdfb13ddc"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE1MDQ5NzI4", "url": "https://github.com/Alluxio/alluxio/pull/12367#pullrequestreview-515049728", "createdAt": "2020-10-22T19:26:06Z", "commit": {"oid": "4d9d594a6e88b584aa0947b5454842afdfb13ddc"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "67c602e2d6775d6682cb3a8a5715a6ae997faa8d", "author": {"user": {"login": "maobaolong", "name": "maobaolong"}}, "url": "https://github.com/Alluxio/alluxio/commit/67c602e2d6775d6682cb3a8a5715a6ae997faa8d", "committedDate": "2020-10-22T23:10:27Z", "message": "Rename the release-profile profile name to release"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE1MTk3MDM3", "url": "https://github.com/Alluxio/alluxio/pull/12367#pullrequestreview-515197037", "createdAt": "2020-10-22T23:56:20Z", "commit": {"oid": "67c602e2d6775d6682cb3a8a5715a6ae997faa8d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE1NDAyNTgw", "url": "https://github.com/Alluxio/alluxio/pull/12367#pullrequestreview-515402580", "createdAt": "2020-10-23T07:17:55Z", "commit": {"oid": "67c602e2d6775d6682cb3a8a5715a6ae997faa8d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3472, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}