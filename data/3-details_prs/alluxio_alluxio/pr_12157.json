{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk0MTQxNTg1", "number": 12157, "title": "[DOCFIX] Include new collectInfo features into the doc", "bodyText": "", "createdAt": "2020-09-28T13:26:07Z", "url": "https://github.com/Alluxio/alluxio/pull/12157", "merged": true, "mergeCommit": {"oid": "21bb11fd3d7b6c0ffc5de973d99d8aa00c9547ab"}, "closed": true, "closedAt": "2020-09-30T17:11:34Z", "author": {"login": "jiacheliu3"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdNTiaVAH2gAyNDk0MTQxNTg1OjI4Nzk1MTdiN2FhZDdkYmE1YmUwYzcxMmI5ZDNjOWQ2ZjMwNTZkOGE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdN__LwgFqTQ5OTY0NTY1MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2879517b7aad7dba5be0c712b9d3c9d6f3056d8a", "author": {"user": {"login": "jiacheliu3", "name": "Jiacheng Liu"}}, "url": "https://github.com/Alluxio/alluxio/commit/2879517b7aad7dba5be0c712b9d3c9d6f3056d8a", "committedDate": "2020-09-28T13:24:02Z", "message": "improve collectInfo doc with the new features"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk4ODMwODM5", "url": "https://github.com/Alluxio/alluxio/pull/12157#pullrequestreview-498830839", "createdAt": "2020-09-29T19:55:24Z", "commit": {"oid": "2879517b7aad7dba5be0c712b9d3c9d6f3056d8a"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQxOTo1NToyNFrOHZ-34g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQxOTo1NToyNFrOHZ-34g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzAwNjU2Mg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            1. `--start-time <datetime>` specifis a datetime before with the log files can be ignored.\n          \n          \n            \n            1. `--start-time <datetime>` specifies a datetime before with the log files can be ignored.", "url": "https://github.com/Alluxio/alluxio/pull/12157#discussion_r497006562", "createdAt": "2020-09-29T19:55:24Z", "author": {"login": "gpang"}, "path": "docs/en/operation/Troubleshooting.md", "diffHunk": "@@ -116,26 +116,81 @@ like -Daws.access.key=XXX, DO NOT share the collected tarball with anybody unles\n The `collectInfo` command has the below options.\n \n ```console\n-$ bin/alluxio collectInfo [--local] [--max-threads threadNum]\n-    [all <outputPath>]\n-    [collectAlluxioInfo <outputPath>]\n-    [collectConfig <outputPath>]\n-    [collectEnv <outputPath>]\n-    [collectJvmInfo <outputPath>]\n-    [collectLog <outputPath>]\n-    [collectMetrics <outputPath>]\n+$ bin/alluxio collectInfo \n+    [--max-threads <threadNum>] \n+    [--local] \n+    [--help]\n+    [--additional-logs <filename-prefixes>] \n+    [--exclude-logs <filename-prefixes>] \n+    [--include-logs <filename-prefixes>] \n+    [--start-time <datetime>] \n+    [--end-time <datetime>]\n+    COMMAND <outputPath>\n ```\n \n `<outputPath>` is the directory you want the final tarball to be written into.\n \n Options:\n-1. `--local` option specifies the `collectInfo` command to run only on `localhost`.\n-That means the command will only collect information about the `localhost`.\n-\n 1. `--max-threads threadNum` option configures how many threads to use for concurrently collecting information and transmitting tarballs.\n When the cluster has a large number of nodes, or large log files, the network IO for transmitting tarballs can be significant.\n Use this parameter to constrain the resource usage of this command.\n \n+1. `--local` option specifies the `collectInfo` command to run only on `localhost`.\n+That means the command will only collect information about the `localhost`.\n+\n+1. `--help` option asks the command to print the help message and exit.\n+\n+1. `--additional-logs <filename-prefixes>` specifies extra log file name prefixes to include.\n+By default, only log files recognized by Alluxio will be collected by the `collectInfo` command.\n+The recognized files include below:\n+```\n+logs/master.log*, \n+logs/master.out*, \n+logs/job_master.log*, \n+logs/job_master.out*, \n+logs/master_audit.log*, \n+logs/worker.log*, \n+logs/worker.out*, \n+logs/job_worker.log*, \n+logs/job_worker.out*, \n+logs/proxy.log*, \n+logs/proxy.out*, \n+logs/task.log*, \n+logs/task.out*, \n+logs/user/*\n+```\n+Other than mentioned above, `--additional-logs <filename-prefixes>` specifies that files \n+whose names start with the prefixes in `<filename-prefixes>` should be collected.\n+This will be checked after the exclusions defined in `--exclude-logs`.\n+`<filename-prefixes>`  specifies the filename prefixes, separated by commas.\n+\n+1. `--exclude-logs <filename-prefixes>` specifies file name prefixes to ignore from the default list.\n+\n+1. `--include-logs <filename-prefixes>` specifies only to collect files whose names start\n+with the specified prefixes, and ignore all the rest.\n+You CANNOT use `--include-logs` option together with either `--additional-logs` or\n+`--exclude-logs`, because it is ambiguous what you want to include.\n+\n+1. `--end-time <datetime>` specifies a datetime after which the log files can be ignored.\n+A log file will be ignore if the file was created after this end time.\n+The first couple of lines of the log file will be parsed, in order to infer when the log\n+file started.\n+The `<datetime>` is a datetime string like `2020-06-27T11:58:53`.\n+The parsable datetime formats include below:\n+```\n+\"2020-01-03 12:10:11,874\"\n+\"2020-01-03 12:10:11\"\n+\"2020-01-03 12:10\"\n+\"20/01/03 12:10:11\"\n+\"20/01/03 12:10\"\n+2020-01-03T12:10:11.874+0800\n+2020-01-03T12:10:11\n+2020-01-03T12:10\n+```\n+\n+1. `--start-time <datetime>` specifis a datetime before with the log files can be ignored.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2879517b7aad7dba5be0c712b9d3c9d6f3056d8a"}, "originalPosition": 87}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1f26fa454fc9d27e4a5d6db7960a5501005dbc32", "author": {"user": {"login": "jiacheliu3", "name": "Jiacheng Liu"}}, "url": "https://github.com/Alluxio/alluxio/commit/1f26fa454fc9d27e4a5d6db7960a5501005dbc32", "committedDate": "2020-09-30T01:36:15Z", "message": "fix typo\n\nCo-authored-by: Gene Pang <gene.pang@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk5NjQ1NjUx", "url": "https://github.com/Alluxio/alluxio/pull/12157#pullrequestreview-499645651", "createdAt": "2020-09-30T17:11:17Z", "commit": {"oid": "1f26fa454fc9d27e4a5d6db7960a5501005dbc32"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3615, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}