{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc2ODY1Njc2", "number": 12059, "title": "Remove assert in JVM Pause Monitor stop", "bodyText": "This assert came up a lot when running integration tests in smaller machine.", "createdAt": "2020-09-01T07:04:18Z", "url": "https://github.com/Alluxio/alluxio/pull/12059", "merged": true, "mergeCommit": {"oid": "06b4556d3d201558cb9ad0904c05971513a656a5"}, "closed": true, "closedAt": "2020-09-09T17:22:31Z", "author": {"login": "bradyoo"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdEh6JtgH2gAyNDc2ODY1Njc2OmY1OThlNTYxYzU5OWI4ZWIzMzIyMzE0OGUyMmQ1ZWFjZGJlN2VmZmQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdHPjKIgFqTQ4NTI0MDYyNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "f598e561c599b8eb33223148e22d5eacdbe7effd", "author": {"user": {"login": "bradyoo", "name": "Bradley Yoo"}}, "url": "https://github.com/Alluxio/alluxio/commit/f598e561c599b8eb33223148e22d5eacdbe7effd", "committedDate": "2020-09-01T07:03:19Z", "message": "Remove assert in JVM Pause Monitor stop"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgwMDczNzQ4", "url": "https://github.com/Alluxio/alluxio/pull/12059#pullrequestreview-480073748", "createdAt": "2020-09-01T20:02:01Z", "commit": {"oid": "f598e561c599b8eb33223148e22d5eacdbe7effd"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQyMDowMjowMVrOHLGNqA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQyMDowMjowMVrOHLGNqA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTM5ODE4NA==", "bodyText": "I think this should be fine, but maybe we should also add synchronized on both start and stop to keep the starting/stopping thread-safe.\nHow do tests call start and stop in different threads?", "url": "https://github.com/Alluxio/alluxio/pull/12059#discussion_r481398184", "createdAt": "2020-09-01T20:02:01Z", "author": {"login": "gpang"}, "path": "core/common/src/main/java/alluxio/util/JvmPauseMonitor.java", "diffHunk": "@@ -88,8 +88,9 @@ public void start() {\n    * Stops jvm monitor.\n    */\n   public void stop() {\n-    Preconditions.checkState(mJvmMonitorThread != null,\n-        \"JVM monitor thread does not start\");\n+    if (mJvmMonitorThread == null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f598e561c599b8eb33223148e22d5eacdbe7effd"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg0MzA0NDk4", "url": "https://github.com/Alluxio/alluxio/pull/12059#pullrequestreview-484304498", "createdAt": "2020-09-08T16:24:15Z", "commit": {"oid": "f598e561c599b8eb33223148e22d5eacdbe7effd"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQxNjoyNDoxNVrOHOk5sg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQxNjoyNDoxNVrOHOk5sg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTA0NjcwNg==", "bodyText": "If start and stop are not synchronized, couldn't there be a situation where the clean up is not performed at all? It would be the same situation when the assert failed.", "url": "https://github.com/Alluxio/alluxio/pull/12059#discussion_r485046706", "createdAt": "2020-09-08T16:24:15Z", "author": {"login": "gpang"}, "path": "core/common/src/main/java/alluxio/util/JvmPauseMonitor.java", "diffHunk": "@@ -88,8 +88,9 @@ public void start() {\n    * Stops jvm monitor.\n    */\n   public void stop() {\n-    Preconditions.checkState(mJvmMonitorThread != null,\n-        \"JVM monitor thread does not start\");\n+    if (mJvmMonitorThread == null) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTM5ODE4NA=="}, "originalCommit": {"oid": "f598e561c599b8eb33223148e22d5eacdbe7effd"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg1MjQwNjI2", "url": "https://github.com/Alluxio/alluxio/pull/12059#pullrequestreview-485240626", "createdAt": "2020-09-09T17:21:42Z", "commit": {"oid": "f598e561c599b8eb33223148e22d5eacdbe7effd"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3649, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}