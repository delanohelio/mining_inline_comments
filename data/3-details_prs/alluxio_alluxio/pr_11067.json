{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgxNTg4ODc1", "number": 11067, "title": "Fix K8s job worker java opts", "bodyText": "Due to this issue (#10341), we require java opts to end with a space. Job workers failed to start because ALLUXIO_JOB_WORKER_JAVA_OPTS did not end with a space and the first property in ALLUXIO_JAVA_OPTS (alluxio.master.hostname) was lost.", "createdAt": "2020-02-28T20:49:22Z", "url": "https://github.com/Alluxio/alluxio/pull/11067", "merged": true, "mergeCommit": {"oid": "f9d2d404ebc346688800bc759d1a53383c503537"}, "closed": true, "closedAt": "2020-03-01T04:17:26Z", "author": {"login": "madanadit"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcI2L7rgH2gAyMzgxNTg4ODc1Ojc3YjM0YWQ3NWJlMWI1YTZhMTA4YWJkYmZjYThhZGE4ZmRlYzNhNzY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcJmZ0wAFqTM2Njk1MDQ2Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "77b34ad75be1b5a6a108abdbfca8ada8fdec3a76", "author": {"user": {"login": "madanadit", "name": "Adit Madan"}}, "url": "https://github.com/Alluxio/alluxio/commit/77b34ad75be1b5a6a108abdbfca8ada8fdec3a76", "committedDate": "2020-02-28T20:45:23Z", "message": "Fix K8s job worker java opts"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2NzUzMTgz", "url": "https://github.com/Alluxio/alluxio/pull/11067#pullrequestreview-366753183", "createdAt": "2020-02-29T00:12:56Z", "commit": {"oid": "77b34ad75be1b5a6a108abdbfca8ada8fdec3a76"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2OTUwNDY2", "url": "https://github.com/Alluxio/alluxio/pull/11067#pullrequestreview-366950466", "createdAt": "2020-03-02T04:55:56Z", "commit": {"oid": "77b34ad75be1b5a6a108abdbfca8ada8fdec3a76"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQwNDo1NTo1N1rOFwTnkQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQwNDo1NTo1N1rOFwTnkQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjE5NzM5Mw==", "bodyText": "since these are simply a space-separated list, is it possible for us to simply split this into a key-value format in yaml and run some post-processing to generate the string needed when we pass all of these values to the containers? I think it is harder to maintain and more prone to errors like this\nEx:\n ALLUXIO_JOB_WORKER_JAVA_OPTS:\n  alluxio.job.worker.rpc.port: 30001\n  alluxio.job.worker.data.port: 30002\n  alluxio.job.worker.web.port: 30003  \n  alluxio.worker.hostname: ${ALLUXIO_WORKER_HOSTNAME}\nAnd then somewhere later on down the pipeline..\nopts = \"\"\nfor key, value in ALLUXIO_JOB_WORKER_JAVA_OPTS:\n  opts += \" -D$key=\\\"$value\\\" \"\n\nIs this feasible?", "url": "https://github.com/Alluxio/alluxio/pull/11067#discussion_r386197393", "createdAt": "2020-03-02T04:55:57Z", "author": {"login": "ZacBlanco"}, "path": "integration/kubernetes/singleMaster-localJournal/alluxio-configmap.yaml.template", "diffHunk": "@@ -36,7 +36,7 @@ data:\n   ALLUXIO_WORKER_JAVA_OPTS: |-\n     -Dalluxio.worker.bind.host=0.0.0.0  -Dalluxio.worker.data.server.domain.socket.address=/opt/domain -Dalluxio.worker.data.server.domain.socket.as.uuid=true -Dalluxio.worker.memory.size=2G -Dalluxio.worker.rpc.port=29999 -Dalluxio.worker.web.port=30000 -Dalluxio.worker.hostname=${ALLUXIO_WORKER_HOSTNAME} -Dalluxio.worker.tieredstore.levels=1 -Dalluxio.worker.tieredstore.level0.dirs.mediumtype=MEM -Dalluxio.worker.tieredstore.level0.dirs.path=/dev/shm -Dalluxio.worker.tieredstore.level0.dirs.quota=1G -Dalluxio.worker.tieredstore.level0.watermark.high.ratio=0.95 -Dalluxio.worker.tieredstore.level0.watermark.low.ratio=0.7 \n   ALLUXIO_JOB_WORKER_JAVA_OPTS: |-\n-    -Dalluxio.job.worker.rpc.port=30001  -Dalluxio.job.worker.data.port=30002 -Dalluxio.job.worker.web.port=30003 -Dalluxio.worker.hostname=${ALLUXIO_WORKER_HOSTNAME}\n+    -Dalluxio.job.worker.rpc.port=30001  -Dalluxio.job.worker.data.port=30002 -Dalluxio.job.worker.web.port=30003 -Dalluxio.worker.hostname=${ALLUXIO_WORKER_HOSTNAME} ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "77b34ad75be1b5a6a108abdbfca8ada8fdec3a76"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4781, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}