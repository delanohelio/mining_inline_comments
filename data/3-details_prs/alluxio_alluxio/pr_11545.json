{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMyNzU0NTQw", "number": 11545, "title": "Update emr script", "bodyText": "allow empty ufs uri (means local hdfs mount)\n-c flag which installs client jar and conf but do not start alluxio\nThe reason for these changes:\n\nso that we can launch an emr cluster where the hdfs of that cluster is mounted as root mount\nso that we can load jars on to a cluster that does not need alluxio running. In this case, a hive metastore containing alluxio uris.", "createdAt": "2020-06-10T23:35:38Z", "url": "https://github.com/Alluxio/alluxio/pull/11545", "merged": true, "mergeCommit": {"oid": "b52ca955a1ebd262952e4405d28426a7f6dacbf2"}, "closed": true, "closedAt": "2020-06-11T13:59:21Z", "author": {"login": "yuzhu"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcqCU8JgH2gAyNDMyNzU0NTQwOmYyZGYyZmZlZWVjNDc3MTlhNDdmODQwYTQwNTJmNDgyYTRmMzhjMTg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcqJoKfgFqTQyODY4MTQ1MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "f2df2ffeeec47719a47f840a4052f482a4f38c18", "author": {"user": {"login": "yuzhu", "name": "David Zhu"}}, "url": "https://github.com/Alluxio/alluxio/commit/f2df2ffeeec47719a47f840a4052f482a4f38c18", "committedDate": "2020-06-10T23:33:35Z", "message": "Update emr script\n\nallow empty ufs uri (means local hdfs mount)\n-c flag which installs client jar and conf but do not start alluxio"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI4NTM5MjE0", "url": "https://github.com/Alluxio/alluxio/pull/11545#pullrequestreview-428539214", "createdAt": "2020-06-11T01:49:39Z", "commit": {"oid": "f2df2ffeeec47719a47f840a4052f482a4f38c18"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQwMTo0OTozOVrOGiL1Og==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQwMTo1MDo0MFrOGiL2Yw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODQ5ODYxOA==", "bodyText": "alphabetical ordering of flags (but i may suggest using other characters in a bit)", "url": "https://github.com/Alluxio/alluxio/pull/11545#discussion_r438498618", "createdAt": "2020-06-11T01:49:39Z", "author": {"login": "Xenorith"}, "path": "integration/emr/alluxio-emr.sh", "diffHunk": "@@ -170,13 +171,15 @@ main() {\n   print_help() {\n     local -r USAGE=$(cat <<USAGE_END\n \n-Usage: alluxio-emr.sh <root-ufs-uri> [-b <backup_uri>]\n-                             [ -d <alluxio-download-uri>]\n-                             [-f <file_uri>]\n-                             [-i <journal_backup_uri>]\n-                             [-n <storage percentage>]\n-                             [-p <delimited_properties>]\n-                             [-s <property_delimiter>]\n+Usage: alluxio-emr.sh [-u <root-ufs-uri>]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f2df2ffeeec47719a47f840a4052f482a4f38c18"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODQ5ODkxNQ==", "bodyText": "the getopts string should be \"b:cd:f:i:n:p:s:u:\"\n: means expect an argument value afterwards, so c doesn't get one", "url": "https://github.com/Alluxio/alluxio/pull/11545#discussion_r438498915", "createdAt": "2020-06-11T01:50:40Z", "author": {"login": "Xenorith"}, "path": "integration/emr/alluxio-emr.sh", "diffHunk": "@@ -244,17 +249,16 @@ USAGE_END\n   local restore_from_backup_uri=\"\"\n   local files_list=\"\"\n   local nvme_capacity_usage=\"\"\n-\n-  if [[ \"$#\" -lt \"1\" ]]; then\n-    echo -e \"No root UFS URI provided\"\n-    print_help 1\n-  fi\n-\n-  local root_ufs_uri=\"${1}\"\n-  shift\n-  while getopts \"b:d:f:i:n:p:s:\" option; do\n-    OPTARG=$(echo -e \"${OPTARG}\" | tr -d '[:space:]')\n+  local root_ufs_uri=\"\"\n+  local client_only=\"false\"\n+  while getopts \":u:b:d:f:i:n:p:s:c\" option; do", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f2df2ffeeec47719a47f840a4052f482a4f38c18"}, "originalPosition": 69}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI4NTQ2NzQ0", "url": "https://github.com/Alluxio/alluxio/pull/11545#pullrequestreview-428546744", "createdAt": "2020-06-11T02:14:49Z", "commit": {"oid": "f2df2ffeeec47719a47f840a4052f482a4f38c18"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQwMjoxNDo0OVrOGiMNoA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQwMjoxNDo0OVrOGiMNoA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODUwNDg2NA==", "bodyText": "@yuzhu why introduce a new flag? we are breaking backwards compatibility here", "url": "https://github.com/Alluxio/alluxio/pull/11545#discussion_r438504864", "createdAt": "2020-06-11T02:14:49Z", "author": {"login": "madanadit"}, "path": "integration/emr/alluxio-emr.sh", "diffHunk": "@@ -170,13 +171,15 @@ main() {\n   print_help() {\n     local -r USAGE=$(cat <<USAGE_END\n \n-Usage: alluxio-emr.sh <root-ufs-uri> [-b <backup_uri>]\n-                             [ -d <alluxio-download-uri>]\n-                             [-f <file_uri>]\n-                             [-i <journal_backup_uri>]\n-                             [-n <storage percentage>]\n-                             [-p <delimited_properties>]\n-                             [-s <property_delimiter>]\n+Usage: alluxio-emr.sh [-u <root-ufs-uri>]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f2df2ffeeec47719a47f840a4052f482a4f38c18"}, "originalPosition": 19}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c8bf3ebc8e9faf706ae0cd467dfba999b356effb", "author": {"user": {"login": "yuzhu", "name": "David Zhu"}}, "url": "https://github.com/Alluxio/alluxio/commit/c8bf3ebc8e9faf706ae0cd467dfba999b356effb", "committedDate": "2020-06-11T03:16:32Z", "message": "address comments, back compat"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI4NTcwNzE3", "url": "https://github.com/Alluxio/alluxio/pull/11545#pullrequestreview-428570717", "createdAt": "2020-06-11T03:37:48Z", "commit": {"oid": "c8bf3ebc8e9faf706ae0cd467dfba999b356effb"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI4NjgxNDUw", "url": "https://github.com/Alluxio/alluxio/pull/11545#pullrequestreview-428681450", "createdAt": "2020-06-11T08:03:55Z", "commit": {"oid": "c8bf3ebc8e9faf706ae0cd467dfba999b356effb"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4502, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}