{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA4Njg5OTIy", "number": 11348, "title": "Add doc for PrometheusMetricsServlet", "bodyText": "", "createdAt": "2020-04-24T18:01:27Z", "url": "https://github.com/Alluxio/alluxio/pull/11348", "merged": true, "mergeCommit": {"oid": "5d03fc185051ad6535c51d29e5bf219aa016c1a1"}, "closed": true, "closedAt": "2020-04-27T18:19:50Z", "author": {"login": "LuQQiu"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABca1YiagH2gAyNDA4Njg5OTIyOjk3MDY1MmUxNmUwODMwZTNhNGRmMmYzMjFlZmNmOGMwNTEzMTJlMzk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcbyxQ5AFqTQwMTE3MjM4Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "970652e16e0830e3a4df2f321efcf8c051312e39", "author": {"user": {"login": "LuQQiu", "name": null}}, "url": "https://github.com/Alluxio/alluxio/commit/970652e16e0830e3a4df2f321efcf8c051312e39", "committedDate": "2020-04-24T17:59:53Z", "message": "Add doc for PrometheusMetricsServlet"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAwMTk0Mjk0", "url": "https://github.com/Alluxio/alluxio/pull/11348#pullrequestreview-400194294", "createdAt": "2020-04-24T18:53:29Z", "commit": {"oid": "970652e16e0830e3a4df2f321efcf8c051312e39"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxODo1MzoyOVrOGLk9TQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxODo1NjoyM1rOGLlDzQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDc5MzAzNw==", "bodyText": "a HTTP request to the /metrics/prometheus/ endpoint of the Alluxio leading master or workers", "url": "https://github.com/Alluxio/alluxio/pull/11348#discussion_r414793037", "createdAt": "2020-04-24T18:53:29Z", "author": {"login": "Xenorith"}, "path": "docs/en/operation/Metrics-System.md", "diffHunk": "@@ -96,6 +97,43 @@ The filename will correspond with the metric name.\n \n Refer to `metrics.properties.template` for all possible sink specific configurations. \n \n+### Prometheus Sink Setup\n+\n+[Prometheus](https://prometheus.io/) is a monitoring tool that can help monitoring Alluxio metrics changes.\n+\n+In the metrics property file, `$ALLUXIO_HOME/conf/metrics.properties` by default, add the following properties:\n+\n+```\n+# Enable PrometheusMetricsServlet\n+sink.prometheus.class=alluxio.metrics.sink.PrometheusMetricsServlet\n+```\n+\n+You can send an HTTP request to `/metrics/prometheus/` of the Alluxio leading master or workers to get a snapshot of metrics in Prometheus format. ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "970652e16e0830e3a4df2f321efcf8c051312e39"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDc5NDcwMQ==", "bodyText": "does the server need to be restarted after setting this property for it to work?", "url": "https://github.com/Alluxio/alluxio/pull/11348#discussion_r414794701", "createdAt": "2020-04-24T18:56:23Z", "author": {"login": "Xenorith"}, "path": "docs/en/operation/Metrics-System.md", "diffHunk": "@@ -96,6 +97,43 @@ The filename will correspond with the metric name.\n \n Refer to `metrics.properties.template` for all possible sink specific configurations. \n \n+### Prometheus Sink Setup\n+\n+[Prometheus](https://prometheus.io/) is a monitoring tool that can help monitoring Alluxio metrics changes.\n+\n+In the metrics property file, `$ALLUXIO_HOME/conf/metrics.properties` by default, add the following properties:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "970652e16e0830e3a4df2f321efcf8c051312e39"}, "originalPosition": 28}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ab1c3527b509600443372d789e2dab4663bf474b", "author": {"user": {"login": "LuQQiu", "name": null}}, "url": "https://github.com/Alluxio/alluxio/commit/ab1c3527b509600443372d789e2dab4663bf474b", "committedDate": "2020-04-24T21:45:20Z", "message": "small fix"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAwMzIyODMx", "url": "https://github.com/Alluxio/alluxio/pull/11348#pullrequestreview-400322831", "createdAt": "2020-04-24T23:28:24Z", "commit": {"oid": "ab1c3527b509600443372d789e2dab4663bf474b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQyMzoyODoyNVrOGLsiEw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQyMzoyODoyNVrOGLsiEw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDkxNzEzOQ==", "bodyText": "to activate the new configuration changes", "url": "https://github.com/Alluxio/alluxio/pull/11348#discussion_r414917139", "createdAt": "2020-04-24T23:28:25Z", "author": {"login": "Xenorith"}, "path": "docs/en/operation/Metrics-System.md", "diffHunk": "@@ -96,6 +97,46 @@ The filename will correspond with the metric name.\n \n Refer to `metrics.properties.template` for all possible sink specific configurations. \n \n+### Prometheus Sink Setup\n+\n+[Prometheus](https://prometheus.io/) is a monitoring tool that can help monitoring Alluxio metrics changes.\n+\n+In the metrics property file, `$ALLUXIO_HOME/conf/metrics.properties` by default, add the following properties:\n+\n+```\n+# Enable PrometheusMetricsServlet\n+sink.prometheus.class=alluxio.metrics.sink.PrometheusMetricsServlet\n+```\n+\n+If Alluxio is deployed in a cluster, this file needs to be distributed to all the nodes.\n+Restart the Alluxio servers to active new configuration changes.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ab1c3527b509600443372d789e2dab4663bf474b"}, "originalPosition": 54}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "73b477b471c53bd8c7450715276568f6c1f4fb06", "author": {"user": {"login": "LuQQiu", "name": null}}, "url": "https://github.com/Alluxio/alluxio/commit/73b477b471c53bd8c7450715276568f6c1f4fb06", "committedDate": "2020-04-25T18:35:41Z", "message": "smallfix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e77dc11cf5f2ae48e959a6d38d1180f73bba6a56", "author": {"user": {"login": "LuQQiu", "name": null}}, "url": "https://github.com/Alluxio/alluxio/commit/e77dc11cf5f2ae48e959a6d38d1180f73bba6a56", "committedDate": "2020-04-27T16:53:50Z", "message": "fix to activate"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAxMTcyMzg2", "url": "https://github.com/Alluxio/alluxio/pull/11348#pullrequestreview-401172386", "createdAt": "2020-04-27T17:31:06Z", "commit": {"oid": "e77dc11cf5f2ae48e959a6d38d1180f73bba6a56"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4559, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}