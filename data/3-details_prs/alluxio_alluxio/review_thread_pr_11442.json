{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE4OTEyNjk0", "number": 11442, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxNzo0Mzo1NlrOD9fkrQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxNzo1ODo0OVrOD9f4uw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY1ODA3MDIxOnYy", "diffSide": "RIGHT", "path": "core/common/src/main/java/alluxio/worker/block/BlockStoreLocation.java", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxNzo0Mzo1NlrOGXBZKA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQyMjozMjoxN1rOGXJmgA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjc5MzI1Ng==", "bodyText": "Do we not want to show the ANY information anymore?", "url": "https://github.com/Alluxio/alluxio/pull/11442#discussion_r426793256", "createdAt": "2020-05-18T17:43:56Z", "author": {"login": "calvinjia"}, "path": "core/common/src/main/java/alluxio/worker/block/BlockStoreLocation.java", "diffHunk": "@@ -150,25 +152,17 @@ public boolean belongsTo(BlockStoreLocation location) {\n    */\n   @Override\n   public String toString() {\n-    StringBuilder result = new StringBuilder();\n-    if (mDirIndex == ANY_DIR) {\n-      result.append(\"any dir\");\n-    } else {\n-      result.append(\"dir \").append(mDirIndex);\n+    MoreObjects.ToStringHelper strHelper = MoreObjects.toStringHelper(this);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cc7852e7889cd0deab50d8e6225ab4a44968f777"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjg0NTgwMA==", "bodyText": "It's implicit by not having it shown.\nI couldn't find any justification to generate a human-readable string.\nHowever this helps a great deal during investigations.", "url": "https://github.com/Alluxio/alluxio/pull/11442#discussion_r426845800", "createdAt": "2020-05-18T19:25:41Z", "author": {"login": "ggezer"}, "path": "core/common/src/main/java/alluxio/worker/block/BlockStoreLocation.java", "diffHunk": "@@ -150,25 +152,17 @@ public boolean belongsTo(BlockStoreLocation location) {\n    */\n   @Override\n   public String toString() {\n-    StringBuilder result = new StringBuilder();\n-    if (mDirIndex == ANY_DIR) {\n-      result.append(\"any dir\");\n-    } else {\n-      result.append(\"dir \").append(mDirIndex);\n+    MoreObjects.ToStringHelper strHelper = MoreObjects.toStringHelper(this);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjc5MzI1Ng=="}, "originalCommit": {"oid": "cc7852e7889cd0deab50d8e6225ab4a44968f777"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjg5NDI0Nw==", "bodyText": "Right, I would prefer explicit for easier debugging.", "url": "https://github.com/Alluxio/alluxio/pull/11442#discussion_r426894247", "createdAt": "2020-05-18T21:08:37Z", "author": {"login": "calvinjia"}, "path": "core/common/src/main/java/alluxio/worker/block/BlockStoreLocation.java", "diffHunk": "@@ -150,25 +152,17 @@ public boolean belongsTo(BlockStoreLocation location) {\n    */\n   @Override\n   public String toString() {\n-    StringBuilder result = new StringBuilder();\n-    if (mDirIndex == ANY_DIR) {\n-      result.append(\"any dir\");\n-    } else {\n-      result.append(\"dir \").append(mDirIndex);\n+    MoreObjects.ToStringHelper strHelper = MoreObjects.toStringHelper(this);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjc5MzI1Ng=="}, "originalCommit": {"oid": "cc7852e7889cd0deab50d8e6225ab4a44968f777"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjkyNzc0NA==", "bodyText": "Made it explicit, but with the new string helper format.", "url": "https://github.com/Alluxio/alluxio/pull/11442#discussion_r426927744", "createdAt": "2020-05-18T22:32:17Z", "author": {"login": "ggezer"}, "path": "core/common/src/main/java/alluxio/worker/block/BlockStoreLocation.java", "diffHunk": "@@ -150,25 +152,17 @@ public boolean belongsTo(BlockStoreLocation location) {\n    */\n   @Override\n   public String toString() {\n-    StringBuilder result = new StringBuilder();\n-    if (mDirIndex == ANY_DIR) {\n-      result.append(\"any dir\");\n-    } else {\n-      result.append(\"dir \").append(mDirIndex);\n+    MoreObjects.ToStringHelper strHelper = MoreObjects.toStringHelper(this);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjc5MzI1Ng=="}, "originalCommit": {"oid": "cc7852e7889cd0deab50d8e6225ab4a44968f777"}, "originalPosition": 18}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY1ODA3MTM1OnYy", "diffSide": "RIGHT", "path": "core/server/worker/src/main/java/alluxio/worker/block/annotator/DefaultBlockIterator.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxNzo0NDoxN1rOGXBZ4w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxOToyNjoyOFrOGXEoFA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjc5MzQ0Mw==", "bodyText": "Can this fit on one line? (applies in general)", "url": "https://github.com/Alluxio/alluxio/pull/11442#discussion_r426793443", "createdAt": "2020-05-18T17:44:17Z", "author": {"login": "calvinjia"}, "path": "core/server/worker/src/main/java/alluxio/worker/block/annotator/DefaultBlockIterator.java", "diffHunk": "@@ -116,7 +116,8 @@ private void blockUpdated(long blockId, BlockStoreLocation location) {\n     }\n \n     if (LOG.isDebugEnabled()) {\n-      LOG.debug(\"Block:{} updated at location:{}. Size:{}\", blockId, location, sortedSet.size());\n+      LOG.debug(\"Block:{} updated at {} with {} blocks.\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cc7852e7889cd0deab50d8e6225ab4a44968f777"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjg0NjIyOA==", "bodyText": "This and one other fit indeed. However I did this mostly when the last or two parameter spilled to the second line.", "url": "https://github.com/Alluxio/alluxio/pull/11442#discussion_r426846228", "createdAt": "2020-05-18T19:26:28Z", "author": {"login": "ggezer"}, "path": "core/server/worker/src/main/java/alluxio/worker/block/annotator/DefaultBlockIterator.java", "diffHunk": "@@ -116,7 +116,8 @@ private void blockUpdated(long blockId, BlockStoreLocation location) {\n     }\n \n     if (LOG.isDebugEnabled()) {\n-      LOG.debug(\"Block:{} updated at location:{}. Size:{}\", blockId, location, sortedSet.size());\n+      LOG.debug(\"Block:{} updated at {} with {} blocks.\",", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjc5MzQ0Mw=="}, "originalCommit": {"oid": "cc7852e7889cd0deab50d8e6225ab4a44968f777"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY1ODEyMTU1OnYy", "diffSide": "RIGHT", "path": "core/server/worker/src/main/java/alluxio/worker/block/management/tier/AlignTask.java", "isResolved": false, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxNzo1ODo0OVrOGXB5Mw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQyMjozMTo0N1rOGXJlzQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjgwMTQ1OQ==", "bodyText": "Do we need to wrap in isDebugEnabled? Also, based on our logging framework, will just using debug be sufficient to avoid the expensive portions for most of these?", "url": "https://github.com/Alluxio/alluxio/pull/11442#discussion_r426801459", "createdAt": "2020-05-18T17:58:49Z", "author": {"login": "calvinjia"}, "path": "core/server/worker/src/main/java/alluxio/worker/block/management/tier/AlignTask.java", "diffHunk": "@@ -143,6 +163,8 @@ public void run() {\n           blockLocPairListDst.get(i).getFirst()));\n     }\n \n+    LOG.debug(\"Generated {} swap transfers: \\n ->{}\", transferInfos.size(),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cc7852e7889cd0deab50d8e6225ab4a44968f777"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjg0NDAyNQ==", "bodyText": "Yes, otherwise the parameters will be evaluated before making the decision to print.", "url": "https://github.com/Alluxio/alluxio/pull/11442#discussion_r426844025", "createdAt": "2020-05-18T19:22:08Z", "author": {"login": "ggezer"}, "path": "core/server/worker/src/main/java/alluxio/worker/block/management/tier/AlignTask.java", "diffHunk": "@@ -143,6 +163,8 @@ public void run() {\n           blockLocPairListDst.get(i).getFirst()));\n     }\n \n+    LOG.debug(\"Generated {} swap transfers: \\n ->{}\", transferInfos.size(),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjgwMTQ1OQ=="}, "originalCommit": {"oid": "cc7852e7889cd0deab50d8e6225ab4a44968f777"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjg0NjgxMw==", "bodyText": "I also validated this on debugger.", "url": "https://github.com/Alluxio/alluxio/pull/11442#discussion_r426846813", "createdAt": "2020-05-18T19:27:37Z", "author": {"login": "ggezer"}, "path": "core/server/worker/src/main/java/alluxio/worker/block/management/tier/AlignTask.java", "diffHunk": "@@ -143,6 +163,8 @@ public void run() {\n           blockLocPairListDst.get(i).getFirst()));\n     }\n \n+    LOG.debug(\"Generated {} swap transfers: \\n ->{}\", transferInfos.size(),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjgwMTQ1OQ=="}, "originalCommit": {"oid": "cc7852e7889cd0deab50d8e6225ab4a44968f777"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjg5NDU5NQ==", "bodyText": "This message is not wrapped in isDebugEnabled?", "url": "https://github.com/Alluxio/alluxio/pull/11442#discussion_r426894595", "createdAt": "2020-05-18T21:09:21Z", "author": {"login": "calvinjia"}, "path": "core/server/worker/src/main/java/alluxio/worker/block/management/tier/AlignTask.java", "diffHunk": "@@ -143,6 +163,8 @@ public void run() {\n           blockLocPairListDst.get(i).getFirst()));\n     }\n \n+    LOG.debug(\"Generated {} swap transfers: \\n ->{}\", transferInfos.size(),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjgwMTQ1OQ=="}, "originalCommit": {"oid": "cc7852e7889cd0deab50d8e6225ab4a44968f777"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjkyNzU2NQ==", "bodyText": "Oh. right.", "url": "https://github.com/Alluxio/alluxio/pull/11442#discussion_r426927565", "createdAt": "2020-05-18T22:31:47Z", "author": {"login": "ggezer"}, "path": "core/server/worker/src/main/java/alluxio/worker/block/management/tier/AlignTask.java", "diffHunk": "@@ -143,6 +163,8 @@ public void run() {\n           blockLocPairListDst.get(i).getFirst()));\n     }\n \n+    LOG.debug(\"Generated {} swap transfers: \\n ->{}\", transferInfos.size(),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjgwMTQ1OQ=="}, "originalCommit": {"oid": "cc7852e7889cd0deab50d8e6225ab4a44968f777"}, "originalPosition": 47}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1758, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}