{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzU4ODE2OTM2", "number": 10691, "title": "Make SleepingUnderFileSystem to make use of managed blocking", "bodyText": "Wrapping SleepingUnderFileSystem with a special forwarder to let master thread-pool know that threads will sleep on this UFS.", "createdAt": "2020-01-02T22:34:03Z", "url": "https://github.com/Alluxio/alluxio/pull/10691", "merged": true, "mergeCommit": {"oid": "778033a83b8394859f1e07689a2669474fb71ff7"}, "closed": true, "closedAt": "2020-01-13T23:09:19Z", "author": {"login": "ggezer"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb2jC7fgFqTMzNzkxNDU2NA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABb6Eq3vgFqTM0MjIwMTAwMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM3OTE0NTY0", "url": "https://github.com/Alluxio/alluxio/pull/10691#pullrequestreview-337914564", "createdAt": "2020-01-03T00:16:42Z", "commit": {"oid": "f8ebe527451562d9e858f1c0e49c8fee9860768a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wM1QwMDoxNjo0M1rOFZ4ACA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wM1QwMDoxNjo0M1rOFZ4ACA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjY3NjIzMg==", "bodyText": "Instead of directly wrapping, should we modify the conf to set managedblocking to true? This will make sleeping ufs behave more closely to normal ufs's (in cases where we do not wrap with managed blocking this will not automatically be wrapped either).", "url": "https://github.com/Alluxio/alluxio/pull/10691#discussion_r362676232", "createdAt": "2020-01-03T00:16:43Z", "author": {"login": "calvinjia"}, "path": "tests/src/test/java/alluxio/testutils/underfs/sleeping/SleepingUnderFileSystemFactory.java", "diffHunk": "@@ -41,14 +42,17 @@ public SleepingUnderFileSystemFactory(SleepingUnderFileSystemOptions options) {\n    * @param ufs the UFS instance to return on creation\n    */\n   public SleepingUnderFileSystemFactory(SleepingUnderFileSystem ufs) {\n-    mUfs = ufs;\n+    mUfs = new ManagedBlockingUfsForwarder(ufs);\n   }\n \n   @Override\n   public UnderFileSystem create(String path, UnderFileSystemConfiguration conf) {\n     if (mUfs == null) {\n       Preconditions.checkArgument(path != null, \"path may not be null\");\n-      return new SleepingUnderFileSystem(new AlluxioURI(path), mOptions, conf);\n+      // Wrapping with a special forwarder to let master thread-pool know that threads will sleep\n+      // on this UFS.\n+      return new ManagedBlockingUfsForwarder(\n+          new SleepingUnderFileSystem(new AlluxioURI(path), mOptions, conf));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f8ebe527451562d9e858f1c0e49c8fee9860768a"}, "originalPosition": 33}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2859904e6edaa393d362097201c225bedb21f99b", "author": {"user": {"login": "ggezer", "name": "G\u00f6kt\u00fcrk Gezer"}}, "url": "https://github.com/Alluxio/alluxio/commit/2859904e6edaa393d362097201c225bedb21f99b", "committedDate": "2020-01-13T22:38:16Z", "message": "Make SleepingUnderFileSystem to make use of managed blocking"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f8ebe527451562d9e858f1c0e49c8fee9860768a", "author": {"user": {"login": "ggezer", "name": "G\u00f6kt\u00fcrk Gezer"}}, "url": "https://github.com/Alluxio/alluxio/commit/f8ebe527451562d9e858f1c0e49c8fee9860768a", "committedDate": "2020-01-02T22:26:26Z", "message": "Make SleepingUnderFileSystem to make use of managed blocking"}, "afterCommit": {"oid": "2859904e6edaa393d362097201c225bedb21f99b", "author": {"user": {"login": "ggezer", "name": "G\u00f6kt\u00fcrk Gezer"}}, "url": "https://github.com/Alluxio/alluxio/commit/2859904e6edaa393d362097201c225bedb21f99b", "committedDate": "2020-01-13T22:38:16Z", "message": "Make SleepingUnderFileSystem to make use of managed blocking"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQyMjAxMDAw", "url": "https://github.com/Alluxio/alluxio/pull/10691#pullrequestreview-342201000", "createdAt": "2020-01-13T23:08:59Z", "commit": {"oid": "2859904e6edaa393d362097201c225bedb21f99b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3229, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}