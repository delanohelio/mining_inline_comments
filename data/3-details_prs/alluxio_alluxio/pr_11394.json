{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE0NzI5OTQy", "number": 11394, "title": "[DOCFIX] Update port list on Docker doc", "bodyText": "We have users that use customized bridge network policies that have firewall (container inbound & outbound) settings. The existing doc assumes all the ports within a bridge network are open to each other, which is not always true.\nThis change also elaborates docker network configs a bit more along the way.", "createdAt": "2020-05-07T14:39:17Z", "url": "https://github.com/Alluxio/alluxio/pull/11394", "merged": true, "mergeCommit": {"oid": "92bd44e9f9e251d11eb3635dcfd39c0dcd6b8464"}, "closed": true, "closedAt": "2020-05-19T17:11:28Z", "author": {"login": "jiacheliu3"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABce-NyXgH2gAyNDE0NzI5OTQyOjMzZjFjZDM1M2NmNTkyNTk2MmY5OTY1YzRhMjUyZmMxODU1ZDU2MmI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABciizjDgFqTQxMzc3MzAyMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "33f1cd353cf5925962f9965c4a252fc1855d562b", "author": {"user": {"login": "jiacheliu3", "name": "Jiacheng Liu"}}, "url": "https://github.com/Alluxio/alluxio/commit/33f1cd353cf5925962f9965c4a252fc1855d562b", "committedDate": "2020-05-07T14:32:59Z", "message": "update doc on ports"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "881788ea8484a7d945c559cdb6230db996a3ac7b", "author": {"user": {"login": "jiacheliu3", "name": "Jiacheng Liu"}}, "url": "https://github.com/Alluxio/alluxio/commit/881788ea8484a7d945c559cdb6230db996a3ac7b", "committedDate": "2020-05-07T14:35:36Z", "message": "add -p"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "847e33de916973730db0fbc8b8fc1ce8d0f5e4d0", "author": {"user": {"login": "jiacheliu3", "name": "Jiacheng Liu"}}, "url": "https://github.com/Alluxio/alluxio/commit/847e33de916973730db0fbc8b8fc1ce8d0f5e4d0", "committedDate": "2020-05-07T14:41:15Z", "message": "whitespace"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0b85073f2afb0087ad0bd937afcc2355a9daab6c", "author": {"user": {"login": "jiacheliu3", "name": "Jiacheng Liu"}}, "url": "https://github.com/Alluxio/alluxio/commit/0b85073f2afb0087ad0bd937afcc2355a9daab6c", "committedDate": "2020-05-07T14:42:21Z", "message": "formatting never ends"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEyMzM2MTg5", "url": "https://github.com/Alluxio/alluxio/pull/11394#pullrequestreview-412336189", "createdAt": "2020-05-15T04:16:15Z", "commit": {"oid": "0b85073f2afb0087ad0bd937afcc2355a9daab6c"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQwNDoxNjoxNVrOGV17qQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQwNDoyMjoxNFrOGV2AkQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTU1NjkwNQ==", "bodyText": "nit: Internal leader election", "url": "https://github.com/Alluxio/alluxio/pull/11394#discussion_r425556905", "createdAt": "2020-05-15T04:16:15Z", "author": {"login": "ZacBlanco"}, "path": "docs/en/deploy/Running-Alluxio-On-Docker.md", "diffHunk": "@@ -93,6 +93,18 @@ both of the following services:\n + Master RPC on port 19998\n + Worker RPC on port 29999\n \n+Within the Alluxio cluster, please also make sure the master and worker containers can reach\n+each other on the following ports.\n+You can find all the ports used by Alluxio components in [Alluxio configurations]({{ '/en/reference/Properties-List.html?q=port' | relativize_url }})\n+\n++ Master RPC on port 19998\n++ Master embedded journal on port 19200 if you are using [Internal leader selection]({{ '/en/deploy/Running-Alluxio-On-Docker.html#option-a-internal-leader-election' | relativize_url }})", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0b85073f2afb0087ad0bd937afcc2355a9daab6c"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTU1NjkyOQ==", "bodyText": "Internal leader election", "url": "https://github.com/Alluxio/alluxio/pull/11394#discussion_r425556929", "createdAt": "2020-05-15T04:16:24Z", "author": {"login": "ZacBlanco"}, "path": "docs/en/deploy/Running-Alluxio-On-Docker.md", "diffHunk": "@@ -93,6 +93,18 @@ both of the following services:\n + Master RPC on port 19998\n + Worker RPC on port 29999\n \n+Within the Alluxio cluster, please also make sure the master and worker containers can reach\n+each other on the following ports.\n+You can find all the ports used by Alluxio components in [Alluxio configurations]({{ '/en/reference/Properties-List.html?q=port' | relativize_url }})\n+\n++ Master RPC on port 19998\n++ Master embedded journal on port 19200 if you are using [Internal leader selection]({{ '/en/deploy/Running-Alluxio-On-Docker.html#option-a-internal-leader-election' | relativize_url }})\n++ Job master RPC on port 20001\n++ Job master embedded journal on port 20003 if you are using [Internal leader selection]({{ '/en/deploy/Running-Alluxio-On-Docker.html#option-a-internal-leader-election' | relativize_url }})", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0b85073f2afb0087ad0bd937afcc2355a9daab6c"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTU1NzA4MA==", "bodyText": "We can also refer users to the Requirements page that lists out all of these ports? I think it would be better to do that rather than having the information duplicated", "url": "https://github.com/Alluxio/alluxio/pull/11394#discussion_r425557080", "createdAt": "2020-05-15T04:17:06Z", "author": {"login": "ZacBlanco"}, "path": "docs/en/deploy/Running-Alluxio-On-Docker.md", "diffHunk": "@@ -93,6 +93,18 @@ both of the following services:\n + Master RPC on port 19998\n + Worker RPC on port 29999\n \n+Within the Alluxio cluster, please also make sure the master and worker containers can reach\n+each other on the following ports.\n+You can find all the ports used by Alluxio components in [Alluxio configurations]({{ '/en/reference/Properties-List.html?q=port' | relativize_url }})\n+\n++ Master RPC on port 19998\n++ Master embedded journal on port 19200 if you are using [Internal leader selection]({{ '/en/deploy/Running-Alluxio-On-Docker.html#option-a-internal-leader-election' | relativize_url }})\n++ Job master RPC on port 20001\n++ Job master embedded journal on port 20003 if you are using [Internal leader selection]({{ '/en/deploy/Running-Alluxio-On-Docker.html#option-a-internal-leader-election' | relativize_url }})\n++ Worker RPC on port 29999\n++ Job worker RPC on port 30001\n++ Job worker data on port 30001\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0b85073f2afb0087ad0bd937afcc2355a9daab6c"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTU1NzI3OQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 unless firewall policies are defined specifically. \n          \n          \n            \n                 unless firewall policies are defined.", "url": "https://github.com/Alluxio/alluxio/pull/11394#discussion_r425557279", "createdAt": "2020-05-15T04:18:01Z", "author": {"login": "ZacBlanco"}, "path": "docs/en/deploy/Running-Alluxio-On-Docker.md", "diffHunk": "@@ -193,17 +208,23 @@ Notes:\n \n   1. The argument `--net=alluxio_network` tells Docker to use the user-defined bridge network ```alluxio_network```.\n      All containers will use their own container IDs as their hostname, and each of them has a different IP\n-     address within the network's subnet. Only the specified ports (-p option) are exposed to the Docker host.\n-  1. You must explicitly expose the two ports 19999 and 19998 for the Master container and the port 29999 and 30000 for the\n-     Worker container. Otherwise, the clients can't communicate with the the master and worker.\n+     address within the network's subnet.\n+     Containers connected to the same user-defined bridge network effectively expose all ports to each other,\n+     unless firewall policies are defined specifically. ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0b85073f2afb0087ad0bd937afcc2355a9daab6c"}, "originalPosition": 61}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTU1NzMyNA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 You can find more details about bridge network [here](https://docs.docker.com/network/bridge/).\n          \n          \n            \n                 You can find more details about the bridge network driver [here](https://docs.docker.com/network/bridge/).", "url": "https://github.com/Alluxio/alluxio/pull/11394#discussion_r425557324", "createdAt": "2020-05-15T04:18:13Z", "author": {"login": "ZacBlanco"}, "path": "docs/en/deploy/Running-Alluxio-On-Docker.md", "diffHunk": "@@ -193,17 +208,23 @@ Notes:\n \n   1. The argument `--net=alluxio_network` tells Docker to use the user-defined bridge network ```alluxio_network```.\n      All containers will use their own container IDs as their hostname, and each of them has a different IP\n-     address within the network's subnet. Only the specified ports (-p option) are exposed to the Docker host.\n-  1. You must explicitly expose the two ports 19999 and 19998 for the Master container and the port 29999 and 30000 for the\n-     Worker container. Otherwise, the clients can't communicate with the the master and worker.\n+     address within the network's subnet.\n+     Containers connected to the same user-defined bridge network effectively expose all ports to each other,\n+     unless firewall policies are defined specifically. \n+     You can find more details about bridge network [here](https://docs.docker.com/network/bridge/).", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0b85073f2afb0087ad0bd937afcc2355a9daab6c"}, "originalPosition": 62}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTU1NzM4MQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              1. Only the specified ports (-p option) are exposed to the outside network, where the client may be run.\n          \n          \n            \n              1. Only the specified ports (`-p` option) are exposed to the outside network, where the client may be run.", "url": "https://github.com/Alluxio/alluxio/pull/11394#discussion_r425557381", "createdAt": "2020-05-15T04:18:29Z", "author": {"login": "ZacBlanco"}, "path": "docs/en/deploy/Running-Alluxio-On-Docker.md", "diffHunk": "@@ -193,17 +208,23 @@ Notes:\n \n   1. The argument `--net=alluxio_network` tells Docker to use the user-defined bridge network ```alluxio_network```.\n      All containers will use their own container IDs as their hostname, and each of them has a different IP\n-     address within the network's subnet. Only the specified ports (-p option) are exposed to the Docker host.\n-  1. You must explicitly expose the two ports 19999 and 19998 for the Master container and the port 29999 and 30000 for the\n-     Worker container. Otherwise, the clients can't communicate with the the master and worker.\n+     address within the network's subnet.\n+     Containers connected to the same user-defined bridge network effectively expose all ports to each other,\n+     unless firewall policies are defined specifically. \n+     You can find more details about bridge network [here](https://docs.docker.com/network/bridge/).\n+  1. Only the specified ports (-p option) are exposed to the outside network, where the client may be run.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0b85073f2afb0087ad0bd937afcc2355a9daab6c"}, "originalPosition": 63}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTU1NzcwNA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 In host network, the master can't be referenced to by the master container name `alluxio-master` or\n          \n          \n            \n                 When using the `host` network driver, the master can't be referenced to by the master container name `alluxio-master` or", "url": "https://github.com/Alluxio/alluxio/pull/11394#discussion_r425557704", "createdAt": "2020-05-15T04:20:09Z", "author": {"login": "ZacBlanco"}, "path": "docs/en/deploy/Running-Alluxio-On-Docker.md", "diffHunk": "@@ -133,19 +145,22 @@ $ docker run -d --rm \\\n \n Notes:\n \n-  1. The argument `--net=host ` tells Docker to use the host network.  All containers\n-    will have the same hostname and IP address as the Docker host,\n-    and all the host's ports are directly mapped to containers. Therefore, all the required container\n-    ports `19999, 19998, 29999, 30000` are available for the clients via the Docker host.\n+  1. The argument `--net=host ` tells Docker to use the host network.\n+     Under this setup, the containers are directly using the host's network adapter.  \n+     All containers will have the same hostname and IP address as the Docker host,\n+     and all the host's ports are directly mapped to containers. Therefore, all the required container\n+     ports `19999, 19998, 29999, 30000` are available for the clients via the Docker host.\n+     You can find more details about this setting [here](https://docs.docker.com/network/host/).\n   1. The argument  `-e ALLUXIO_JAVA_OPTS=\"-Dalluxio.worker.memory.size=1G -Dalluxio.master.hostname=$(hostname -i)\"`\n-    allocates the worker's memory capacity and bind the master address. In host network,\n-\tthe master can't be referenced to by the master container name `alluxio-master` or\n-    it will throw `\"No Alluxio worker available\" ` error.\n-    Instead, it should be referenced to by the host IP address.\n-    The substitution `$(hostname -i)` does the trick.\n+     allocates the worker's memory capacity and bind the master address. \n+     In host network, the master can't be referenced to by the master container name `alluxio-master` or", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0b85073f2afb0087ad0bd937afcc2355a9daab6c"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTU1ODE2MQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 The substitution `$(hostname -i)` does the trick.\n          \n          \n            \n                 The substitution `$(hostname -i)` uses the docker host's name instead.", "url": "https://github.com/Alluxio/alluxio/pull/11394#discussion_r425558161", "createdAt": "2020-05-15T04:22:14Z", "author": {"login": "ZacBlanco"}, "path": "docs/en/deploy/Running-Alluxio-On-Docker.md", "diffHunk": "@@ -133,19 +145,22 @@ $ docker run -d --rm \\\n \n Notes:\n \n-  1. The argument `--net=host ` tells Docker to use the host network.  All containers\n-    will have the same hostname and IP address as the Docker host,\n-    and all the host's ports are directly mapped to containers. Therefore, all the required container\n-    ports `19999, 19998, 29999, 30000` are available for the clients via the Docker host.\n+  1. The argument `--net=host ` tells Docker to use the host network.\n+     Under this setup, the containers are directly using the host's network adapter.  \n+     All containers will have the same hostname and IP address as the Docker host,\n+     and all the host's ports are directly mapped to containers. Therefore, all the required container\n+     ports `19999, 19998, 29999, 30000` are available for the clients via the Docker host.\n+     You can find more details about this setting [here](https://docs.docker.com/network/host/).\n   1. The argument  `-e ALLUXIO_JAVA_OPTS=\"-Dalluxio.worker.memory.size=1G -Dalluxio.master.hostname=$(hostname -i)\"`\n-    allocates the worker's memory capacity and bind the master address. In host network,\n-\tthe master can't be referenced to by the master container name `alluxio-master` or\n-    it will throw `\"No Alluxio worker available\" ` error.\n-    Instead, it should be referenced to by the host IP address.\n-    The substitution `$(hostname -i)` does the trick.\n+     allocates the worker's memory capacity and bind the master address. \n+     In host network, the master can't be referenced to by the master container name `alluxio-master` or\n+     it will throw `\"No Alluxio worker available\" ` error.\n+     Instead, it should be referenced to by the host IP address.\n+     The substitution `$(hostname -i)` does the trick.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0b85073f2afb0087ad0bd937afcc2355a9daab6c"}, "originalPosition": 43}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "de6f9a5a4f1155f683e18655e85b589da084d27f", "author": {"user": {"login": "jiacheliu3", "name": "Jiacheng Liu"}}, "url": "https://github.com/Alluxio/alluxio/commit/de6f9a5a4f1155f683e18655e85b589da084d27f", "committedDate": "2020-05-15T15:45:10Z", "message": "resolve comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7a731aa0b8fbb6964cc8f5a875e99536f26f9230", "author": {"user": {"login": "jiacheliu3", "name": "Jiacheng Liu"}}, "url": "https://github.com/Alluxio/alluxio/commit/7a731aa0b8fbb6964cc8f5a875e99536f26f9230", "committedDate": "2020-05-16T12:13:02Z", "message": "refer to requirements.html page"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzNzczMDIz", "url": "https://github.com/Alluxio/alluxio/pull/11394#pullrequestreview-413773023", "createdAt": "2020-05-18T16:52:35Z", "commit": {"oid": "7a731aa0b8fbb6964cc8f5a875e99536f26f9230"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4603, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}