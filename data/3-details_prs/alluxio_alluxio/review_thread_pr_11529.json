{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMxMzg4MTE1", "number": 11529, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQyMjozMDoyMVrOEDphdw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQyMjozMDoyMVrOEDphdw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyMjYxNDk1OnYy", "diffSide": "RIGHT", "path": "core/server/master/src/main/java/alluxio/master/file/InodeSyncStream.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQyMjozMDoyMVrOGgymww==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQxODoyMjozNFrOGiBKWA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzAzNjczOQ==", "bodyText": "Do we have to set this explicitly? If so, why isn't it set in the other method above?\nAlso, can we have a constant for this \"no ttl\" common option. instead of building each time?", "url": "https://github.com/Alluxio/alluxio/pull/11529#discussion_r437036739", "createdAt": "2020-06-08T22:30:21Z", "author": {"login": "gpang"}, "path": "core/server/master/src/main/java/alluxio/master/file/InodeSyncStream.java", "diffHunk": "@@ -645,6 +650,11 @@ private void loadMetadata(LockedInodePath inodePath, LoadMetadataContext context\n             LoadMetadataContext loadMetadataContext =\n                 LoadMetadataContext.mergeFrom(LoadMetadataPOptions.newBuilder()\n                     .setLoadDescendantType(LoadDescendantPType.NONE)\n+                    // No Ttl on loaded files\n+                    .setCommonOptions(FileSystemMasterCommonPOptions.newBuilder()\n+                        .setTtl(-1)\n+                        .setTtlAction(TtlAction.DELETE)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f879dd6609e4ee51ae88b20e52329ded7d68b25"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzA0MjA0Nw==", "bodyText": "Do we have to set this explicitly? If so, why isn't it set in the other method above?\n\n\"Other method above\" is not clear to me.", "url": "https://github.com/Alluxio/alluxio/pull/11529#discussion_r437042047", "createdAt": "2020-06-08T22:45:38Z", "author": {"login": "ZacBlanco"}, "path": "core/server/master/src/main/java/alluxio/master/file/InodeSyncStream.java", "diffHunk": "@@ -645,6 +650,11 @@ private void loadMetadata(LockedInodePath inodePath, LoadMetadataContext context\n             LoadMetadataContext loadMetadataContext =\n                 LoadMetadataContext.mergeFrom(LoadMetadataPOptions.newBuilder()\n                     .setLoadDescendantType(LoadDescendantPType.NONE)\n+                    // No Ttl on loaded files\n+                    .setCommonOptions(FileSystemMasterCommonPOptions.newBuilder()\n+                        .setTtl(-1)\n+                        .setTtlAction(TtlAction.DELETE)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzAzNjczOQ=="}, "originalCommit": {"oid": "9f879dd6609e4ee51ae88b20e52329ded7d68b25"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzEyODEyMA==", "bodyText": "I see 2 setCommonOptions() calls in this file. This one and the one earlier. They are slightly different because this one sets the action, and the other one doesn't.", "url": "https://github.com/Alluxio/alluxio/pull/11529#discussion_r437128120", "createdAt": "2020-06-09T04:17:02Z", "author": {"login": "gpang"}, "path": "core/server/master/src/main/java/alluxio/master/file/InodeSyncStream.java", "diffHunk": "@@ -645,6 +650,11 @@ private void loadMetadata(LockedInodePath inodePath, LoadMetadataContext context\n             LoadMetadataContext loadMetadataContext =\n                 LoadMetadataContext.mergeFrom(LoadMetadataPOptions.newBuilder()\n                     .setLoadDescendantType(LoadDescendantPType.NONE)\n+                    // No Ttl on loaded files\n+                    .setCommonOptions(FileSystemMasterCommonPOptions.newBuilder()\n+                        .setTtl(-1)\n+                        .setTtlAction(TtlAction.DELETE)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzAzNjczOQ=="}, "originalCommit": {"oid": "9f879dd6609e4ee51ae88b20e52329ded7d68b25"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODMyMzgwMA==", "bodyText": "I see now, updated", "url": "https://github.com/Alluxio/alluxio/pull/11529#discussion_r438323800", "createdAt": "2020-06-10T18:22:34Z", "author": {"login": "ZacBlanco"}, "path": "core/server/master/src/main/java/alluxio/master/file/InodeSyncStream.java", "diffHunk": "@@ -645,6 +650,11 @@ private void loadMetadata(LockedInodePath inodePath, LoadMetadataContext context\n             LoadMetadataContext loadMetadataContext =\n                 LoadMetadataContext.mergeFrom(LoadMetadataPOptions.newBuilder()\n                     .setLoadDescendantType(LoadDescendantPType.NONE)\n+                    // No Ttl on loaded files\n+                    .setCommonOptions(FileSystemMasterCommonPOptions.newBuilder()\n+                        .setTtl(-1)\n+                        .setTtlAction(TtlAction.DELETE)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzAzNjczOQ=="}, "originalCommit": {"oid": "9f879dd6609e4ee51ae88b20e52329ded7d68b25"}, "originalPosition": 26}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1599, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}