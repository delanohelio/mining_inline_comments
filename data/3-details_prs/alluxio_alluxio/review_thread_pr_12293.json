{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAzNTM4MTI2", "number": 12293, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxNzo0Nzo1MFrOEtmDwg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxNzo0ODo1NlrOEtmFew==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE2MjQ0OTMwOnYy", "diffSide": "RIGHT", "path": "conf/log4j.properties", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxNzo0Nzo1MFrOHheUOA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxODoxNjozMFrOHhfVyw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDg2MTc1Mg==", "bodyText": "Do we also want to ignore the WARN level logs for GrpcLogAppender?", "url": "https://github.com/Alluxio/alluxio/pull/12293#discussion_r504861752", "createdAt": "2020-10-14T17:47:50Z", "author": {"login": "HelloHorizon"}, "path": "conf/log4j.properties", "diffHunk": "@@ -181,6 +181,7 @@ log4j.appender.FUSE_LOGGER.layout.ConversionPattern=%d{ISO8601} %-5p %c{1} - %m%\n log4j.logger.io.grpc.netty.NettyServerHandler=OFF\n \n # Disable noisy INFO logs from ratis\n+log4j.logger.org.apache.ratis.grpc.server.GrpcLogAppender=ERROR", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9d9f3ddfd1d8be46980569d978d79347d0e4e20b"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDg2OTc4OA==", "bodyText": "Yes this line tells log4j to only record ERROR level logs and ignore INFO or WARN level logs.", "url": "https://github.com/Alluxio/alluxio/pull/12293#discussion_r504869788", "createdAt": "2020-10-14T18:00:58Z", "author": {"login": "bf8086"}, "path": "conf/log4j.properties", "diffHunk": "@@ -181,6 +181,7 @@ log4j.appender.FUSE_LOGGER.layout.ConversionPattern=%d{ISO8601} %-5p %c{1} - %m%\n log4j.logger.io.grpc.netty.NettyServerHandler=OFF\n \n # Disable noisy INFO logs from ratis\n+log4j.logger.org.apache.ratis.grpc.server.GrpcLogAppender=ERROR", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDg2MTc1Mg=="}, "originalCommit": {"oid": "9d9f3ddfd1d8be46980569d978d79347d0e4e20b"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDg3MTQ2Mw==", "bodyText": "Is there any reason for us to disable the WARN level log for GrpcLogAppender? Will it filter out some useful WARN level logs?", "url": "https://github.com/Alluxio/alluxio/pull/12293#discussion_r504871463", "createdAt": "2020-10-14T18:04:01Z", "author": {"login": "HelloHorizon"}, "path": "conf/log4j.properties", "diffHunk": "@@ -181,6 +181,7 @@ log4j.appender.FUSE_LOGGER.layout.ConversionPattern=%d{ISO8601} %-5p %c{1} - %m%\n log4j.logger.io.grpc.netty.NettyServerHandler=OFF\n \n # Disable noisy INFO logs from ratis\n+log4j.logger.org.apache.ratis.grpc.server.GrpcLogAppender=ERROR", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDg2MTc1Mg=="}, "originalCommit": {"oid": "9d9f3ddfd1d8be46980569d978d79347d0e4e20b"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDg3ODUzOQ==", "bodyText": "The main purpose is to suppress the excessive messages from GrpcLogAppender when a follower is offline:\n2020-10-14 17:56:30,594 WARN  GrpcLogAppender - FaultToleranceScaleEmbeddedJournal1-masters-1_19200@group-ABB3109A44C1->FaultToleranceScaleEmbeddedJournal1-masters-4_19200-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception\n2020-10-14 17:56:30,594 INFO  GrpcLogAppender - FaultToleranceScaleEmbeddedJournal1-masters-1_19200@group-ABB3109A44C1->FaultToleranceScaleEmbeddedJournal1-masters-4_19200-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 24044765, notify follower to install snapshot-(t:188, i:24044765)\n2020-10-14 17:56:30,594 INFO  GrpcLogAppender - FaultToleranceScaleEmbeddedJournal1-masters-1_19200@group-ABB3109A44C1->FaultToleranceScaleEmbeddedJournal1-masters-4_19200-GrpcLogAppender: send FaultToleranceScaleEmbeddedJournal1-masters-1_19200->FaultToleranceScaleEmbeddedJournal1-masters-4_19200#0-t212,notify:(t:188, i:24044765)\n2020-10-14 17:56:30,595 WARN  GrpcLogAppender - FaultToleranceScaleEmbeddedJournal1-masters-1_19200@group-ABB3109A44C1->FaultToleranceScaleEmbeddedJournal1-masters-4_19200-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception\n2020-10-14 17:56:30,595 INFO  GrpcLogAppender - FaultToleranceScaleEmbeddedJournal1-masters-1_19200@group-ABB3109A44C1->FaultToleranceScaleEmbeddedJournal1-masters-4_19200-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 24044765, notify follower to install snapshot-(t:188, i:24044765)\n2020-10-14 17:56:30,595 INFO  GrpcLogAppender - FaultToleranceScaleEmbeddedJournal1-masters-1_19200@group-ABB3109A44C1->FaultToleranceScaleEmbeddedJournal1-masters-4_19200-GrpcLogAppender: send FaultToleranceScaleEmbeddedJournal1-masters-1_19200->FaultToleranceScaleEmbeddedJournal1-masters-4_19200#0-t212,notify:(t:188, i:24044765)\n2020-10-14 17:56:30,595 WARN  GrpcLogAppender - FaultToleranceScaleEmbeddedJournal1-masters-1_19200@group-ABB3109A44C1->FaultToleranceScaleEmbeddedJournal1-masters-4_19200-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception\n2020-10-14 17:56:30,595 INFO  GrpcLogAppender - FaultToleranceScaleEmbeddedJournal1-masters-1_19200@group-ABB3109A44C1->FaultToleranceScaleEmbeddedJournal1-masters-4_19200-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 24044765, notify follower to install snapshot-(t:188, i:24044765)\n2020-10-14 17:56:30,595 INFO  GrpcLogAppender - FaultToleranceScaleEmbeddedJournal1-masters-1_19200@group-ABB3109A44C1->FaultToleranceScaleEmbeddedJournal1-masters-4_19200-GrpcLogAppender: send FaultToleranceScaleEmbeddedJournal1-masters-1_19200->FaultToleranceScaleEmbeddedJournal1-masters-4_19200#0-t212,notify:(t:188, i:24044765)\n2020-10-14 17:56:30,596 WARN  GrpcLogAppender - FaultToleranceScaleEmbeddedJournal1-masters-1_19200@group-ABB3109A44C1->FaultToleranceScaleEmbeddedJournal1-masters-4_19200-InstallSnapshotResponseHandler: Failed InstallSnapshot: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: UNAVAILABLE: io exception\n2020-10-14 17:56:30,596 INFO  GrpcLogAppender - FaultToleranceScaleEmbeddedJournal1-masters-1_19200@group-ABB3109A44C1->FaultToleranceScaleEmbeddedJournal1-masters-4_19200-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 24044765, notify follower to install snapshot-(t:188, i:24044765)\n...", "url": "https://github.com/Alluxio/alluxio/pull/12293#discussion_r504878539", "createdAt": "2020-10-14T18:16:30Z", "author": {"login": "bf8086"}, "path": "conf/log4j.properties", "diffHunk": "@@ -181,6 +181,7 @@ log4j.appender.FUSE_LOGGER.layout.ConversionPattern=%d{ISO8601} %-5p %c{1} - %m%\n log4j.logger.io.grpc.netty.NettyServerHandler=OFF\n \n # Disable noisy INFO logs from ratis\n+log4j.logger.org.apache.ratis.grpc.server.GrpcLogAppender=ERROR", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDg2MTc1Mg=="}, "originalCommit": {"oid": "9d9f3ddfd1d8be46980569d978d79347d0e4e20b"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE2MjQ1MzcxOnYy", "diffSide": "RIGHT", "path": "conf/log4j.properties", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxNzo0ODo1NlrOHheW9g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxODoxMDo0OFrOHhfJMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDg2MjQ1NA==", "bodyText": "Are there useful ERROR log in this class beside the annoying one?", "url": "https://github.com/Alluxio/alluxio/pull/12293#discussion_r504862454", "createdAt": "2020-10-14T17:48:56Z", "author": {"login": "LuQQiu"}, "path": "conf/log4j.properties", "diffHunk": "@@ -181,6 +181,7 @@ log4j.appender.FUSE_LOGGER.layout.ConversionPattern=%d{ISO8601} %-5p %c{1} - %m%\n log4j.logger.io.grpc.netty.NettyServerHandler=OFF\n \n # Disable noisy INFO logs from ratis\n+log4j.logger.org.apache.ratis.grpc.server.GrpcLogAppender=ERROR", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9d9f3ddfd1d8be46980569d978d79347d0e4e20b"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDg3MDYyMQ==", "bodyText": "This line will still allow log4j to show ERROR level logs for this class. I am sure there are useful WARN and INFO level logs, we can re-enable them per use case when we need to debug certain issues.", "url": "https://github.com/Alluxio/alluxio/pull/12293#discussion_r504870621", "createdAt": "2020-10-14T18:02:33Z", "author": {"login": "bf8086"}, "path": "conf/log4j.properties", "diffHunk": "@@ -181,6 +181,7 @@ log4j.appender.FUSE_LOGGER.layout.ConversionPattern=%d{ISO8601} %-5p %c{1} - %m%\n log4j.logger.io.grpc.netty.NettyServerHandler=OFF\n \n # Disable noisy INFO logs from ratis\n+log4j.logger.org.apache.ratis.grpc.server.GrpcLogAppender=ERROR", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDg2MjQ1NA=="}, "originalCommit": {"oid": "9d9f3ddfd1d8be46980569d978d79347d0e4e20b"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDg3NTMxMw==", "bodyText": "that's dangerous.... emmm...", "url": "https://github.com/Alluxio/alluxio/pull/12293#discussion_r504875313", "createdAt": "2020-10-14T18:10:48Z", "author": {"login": "LuQQiu"}, "path": "conf/log4j.properties", "diffHunk": "@@ -181,6 +181,7 @@ log4j.appender.FUSE_LOGGER.layout.ConversionPattern=%d{ISO8601} %-5p %c{1} - %m%\n log4j.logger.io.grpc.netty.NettyServerHandler=OFF\n \n # Disable noisy INFO logs from ratis\n+log4j.logger.org.apache.ratis.grpc.server.GrpcLogAppender=ERROR", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDg2MjQ1NA=="}, "originalCommit": {"oid": "9d9f3ddfd1d8be46980569d978d79347d0e4e20b"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1154, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}