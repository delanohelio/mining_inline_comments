{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzczNzQyOTYz", "number": 743, "title": "Improvements to various quickstart scripts for execution on Mac OS X", "bodyText": "For Yarn, MR_INTER_DIR and MR_DONE_DIR are on HDFS, so no need to use the DW_CLOUD_DATA directory as a prefix for these.\nEliminated whitespace in -d arg for various process checking functions that would cause malfunction on OSX.\nAdded explicit -i'bak' for sed command in accumulo/install.sh to address malfunction on OSX.\nChanged process names in pgrep targets for Hadoop to work around process name length limitation on OSX.", "createdAt": "2020-02-11T16:05:10Z", "url": "https://github.com/NationalSecurityAgency/datawave/pull/743", "merged": true, "mergeCommit": {"oid": "d95a371d843f77300a86feb863a581e581f1e3a7"}, "closed": true, "closedAt": "2020-02-11T21:51:27Z", "author": {"login": "drewfarris"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcDUvkjgFqTM1NjgyNzQwMQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcDY4gnAFqTM1NzAyMDU4Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU2ODI3NDAx", "url": "https://github.com/NationalSecurityAgency/datawave/pull/743#pullrequestreview-356827401", "createdAt": "2020-02-11T16:57:06Z", "commit": {"oid": "8b19ded7455001d51c2eb71c095fb6b3f1fa4df6"}, "state": "DISMISSED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMVQxNjo1NzowN1rOFoRDVw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMVQxNjo1NzowN1rOFoRDVw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Nzc2Njc0Mw==", "bodyText": "Won't this leave backup files around that we need to clean up?", "url": "https://github.com/NationalSecurityAgency/datawave/pull/743#discussion_r377766743", "createdAt": "2020-02-11T16:57:07Z", "author": {"login": "ivakegg"}, "path": "contrib/datawave-quickstart/bin/services/accumulo/install.sh", "diffHunk": "@@ -59,9 +59,9 @@ fi\n assertCreateDir \"${DW_ACCUMULO_JVM_HEAPDUMP_DIR}\"\n \n # Update tserver and other options in accumulo-env.sh\n-sed -i \"s~\\(ACCUMULO_TSERVER_OPTS=\\).*$~\\1\\\"${DW_ACCUMULO_TSERVER_OPTS}\\\"~g\" ${DW_ACCUMULO_CONF_DIR}/accumulo-env.sh\n-sed -i \"s~\\(export JAVA_HOME=\\).*$~\\1\\\"${JAVA_HOME}\\\"~g\" ${DW_ACCUMULO_CONF_DIR}/accumulo-env.sh\n-sed -i \"s~\\(export ACCUMULO_MONITOR_OPTS=\\).*$~\\1\\\"\\${POLICY} -Xmx2g -Xms512m\\\"~g\" ${DW_ACCUMULO_CONF_DIR}/accumulo-env.sh\n+sed -i'bak' \"s~\\(ACCUMULO_TSERVER_OPTS=\\).*$~\\1\\\"${DW_ACCUMULO_TSERVER_OPTS}\\\"~g\" ${DW_ACCUMULO_CONF_DIR}/accumulo-env.sh\n+sed -i'bak' \"s~\\(export JAVA_HOME=\\).*$~\\1\\\"${JAVA_HOME}\\\"~g\" ${DW_ACCUMULO_CONF_DIR}/accumulo-env.sh\n+sed -i'bak' \"s~\\(export ACCUMULO_MONITOR_OPTS=\\).*$~\\1\\\"\\${POLICY} -Xmx2g -Xms512m\\\"~g\" ${DW_ACCUMULO_CONF_DIR}/accumulo-env.sh", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8b19ded7455001d51c2eb71c095fb6b3f1fa4df6"}, "originalPosition": 9}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3f4e4493e7f3588a9b572917dea4ae5751c1ead0", "author": {"user": {"login": "drewfarris", "name": "Drew Farris"}}, "url": "https://github.com/NationalSecurityAgency/datawave/commit/3f4e4493e7f3588a9b572917dea4ae5751c1ead0", "committedDate": "2020-02-11T20:09:30Z", "message": "Improvements to various quickstart scripts..\n\n . For Yarn, the directories MR_INTER_DIR and MR_DONE_DIR are on HDFS, so no need to have DW_CLOUD_DATA as a\n   prefix for these and we no longer need to assert that they exist on the local disk.\n . Changed argument structure for pgrep. Neither the OSX pgrep or the proctools pgrep did the right thing\n   with the current implementation.\n . OSX sed wasn't happy with the bare -i argument, so we do -i'bak' and clean up the backup files.\n . Changed process names in pgrep for hadoop to work aroung process name length limitation on OSX"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "61931d1f20c051d76e8229e8dd8e04a5a2e68891", "author": {"user": {"login": "brianloss", "name": "Brian Loss"}}, "url": "https://github.com/NationalSecurityAgency/datawave/commit/61931d1f20c051d76e8229e8dd8e04a5a2e68891", "committedDate": "2020-02-11T18:37:47Z", "message": "Merge branch 'master' into quickstart-tweaks"}, "afterCommit": {"oid": "3f4e4493e7f3588a9b572917dea4ae5751c1ead0", "author": {"user": {"login": "drewfarris", "name": "Drew Farris"}}, "url": "https://github.com/NationalSecurityAgency/datawave/commit/3f4e4493e7f3588a9b572917dea4ae5751c1ead0", "committedDate": "2020-02-11T20:09:30Z", "message": "Improvements to various quickstart scripts..\n\n . For Yarn, the directories MR_INTER_DIR and MR_DONE_DIR are on HDFS, so no need to have DW_CLOUD_DATA as a\n   prefix for these and we no longer need to assert that they exist on the local disk.\n . Changed argument structure for pgrep. Neither the OSX pgrep or the proctools pgrep did the right thing\n   with the current implementation.\n . OSX sed wasn't happy with the bare -i argument, so we do -i'bak' and clean up the backup files.\n . Changed process names in pgrep for hadoop to work aroung process name length limitation on OSX"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU2OTcwODA5", "url": "https://github.com/NationalSecurityAgency/datawave/pull/743#pullrequestreview-356970809", "createdAt": "2020-02-11T20:28:41Z", "commit": {"oid": "3f4e4493e7f3588a9b572917dea4ae5751c1ead0"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMVQyMDoyODo0MlrOFoX9TQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMVQyMDozNDo1NlrOFoYI8A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Nzg3OTg4NQ==", "bodyText": "Why not just sed -i '' instead of sed -i '.bak' and then you don't have to remove the .bak file separately?", "url": "https://github.com/NationalSecurityAgency/datawave/pull/743#discussion_r377879885", "createdAt": "2020-02-11T20:28:42Z", "author": {"login": "brianloss"}, "path": "contrib/datawave-quickstart/bin/services/hadoop/install.sh", "diffHunk": "@@ -89,13 +89,10 @@ else\n fi\n \n # Ensure that $JAVA_HOME is observed by all hadoop scripts\n-sed -i \"s|.*\\(export JAVA_HOME=\\).*|\\1${JAVA_HOME}|g\" ${HADOOP_CONF_DIR}/hadoop-env.sh\n+sed -i'.bak' \"s|.*\\(export JAVA_HOME=\\).*|\\1${JAVA_HOME}|g\" ${HADOOP_CONF_DIR}/hadoop-env.sh && rm ${HADOOP_CONF_DIR}/hadoop-env.sh.bak", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3f4e4493e7f3588a9b572917dea4ae5751c1ead0"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Nzg4MDA0OQ==", "bodyText": "Why not just sed -i '' instead of sed -i '.bak' and then you don't have to remove the .bak file separately?", "url": "https://github.com/NationalSecurityAgency/datawave/pull/743#discussion_r377880049", "createdAt": "2020-02-11T20:28:59Z", "author": {"login": "brianloss"}, "path": "contrib/datawave-quickstart/bin/services/accumulo/install.sh", "diffHunk": "@@ -59,9 +59,9 @@ fi\n assertCreateDir \"${DW_ACCUMULO_JVM_HEAPDUMP_DIR}\"\n \n # Update tserver and other options in accumulo-env.sh\n-sed -i \"s~\\(ACCUMULO_TSERVER_OPTS=\\).*$~\\1\\\"${DW_ACCUMULO_TSERVER_OPTS}\\\"~g\" ${DW_ACCUMULO_CONF_DIR}/accumulo-env.sh\n-sed -i \"s~\\(export JAVA_HOME=\\).*$~\\1\\\"${JAVA_HOME}\\\"~g\" ${DW_ACCUMULO_CONF_DIR}/accumulo-env.sh\n-sed -i \"s~\\(export ACCUMULO_MONITOR_OPTS=\\).*$~\\1\\\"\\${POLICY} -Xmx2g -Xms512m\\\"~g\" ${DW_ACCUMULO_CONF_DIR}/accumulo-env.sh\n+sed -i'.bak' \"s~\\(ACCUMULO_TSERVER_OPTS=\\).*$~\\1\\\"${DW_ACCUMULO_TSERVER_OPTS}\\\"~g\" ${DW_ACCUMULO_CONF_DIR}/accumulo-env.sh && rm ${DW_ACCUMULO_CONF_DIR}/accumulo-env.sh.bak\n+sed -i'.bak' \"s~\\(export JAVA_HOME=\\).*$~\\1\\\"${JAVA_HOME}\\\"~g\" ${DW_ACCUMULO_CONF_DIR}/accumulo-env.sh && rm ${DW_ACCUMULO_CONF_DIR}/accumulo-env.sh.bak\n+sed -i'.bak' \"s~\\(export ACCUMULO_MONITOR_OPTS=\\).*$~\\1\\\"\\${POLICY} -Xmx2g -Xms512m\\\"~g\" ${DW_ACCUMULO_CONF_DIR}/accumulo-env.sh && rm ${DW_ACCUMULO_CONF_DIR}/accumulo-env.sh.bak", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3f4e4493e7f3588a9b572917dea4ae5751c1ead0"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Nzg4Mjg2NA==", "bodyText": "What's the reason for removing these lines?", "url": "https://github.com/NationalSecurityAgency/datawave/pull/743#discussion_r377882864", "createdAt": "2020-02-11T20:34:56Z", "author": {"login": "brianloss"}, "path": "contrib/datawave-quickstart/bin/services/hadoop/install.sh", "diffHunk": "@@ -89,13 +89,10 @@ else\n fi\n \n # Ensure that $JAVA_HOME is observed by all hadoop scripts\n-sed -i \"s|.*\\(export JAVA_HOME=\\).*|\\1${JAVA_HOME}|g\" ${HADOOP_CONF_DIR}/hadoop-env.sh\n+sed -i'.bak' \"s|.*\\(export JAVA_HOME=\\).*|\\1${JAVA_HOME}|g\" ${HADOOP_CONF_DIR}/hadoop-env.sh && rm ${HADOOP_CONF_DIR}/hadoop-env.sh.bak\n \n verifySSHConfig\n \n-assertCreateDir \"${DW_HADOOP_MR_INTER_DIR}\"\n-assertCreateDir \"${DW_HADOOP_MR_DONE_DIR}\"\n-", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3f4e4493e7f3588a9b572917dea4ae5751c1ead0"}, "originalPosition": 11}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU2OTgwMjAy", "url": "https://github.com/NationalSecurityAgency/datawave/pull/743#pullrequestreview-356980202", "createdAt": "2020-02-11T20:44:25Z", "commit": {"oid": "3f4e4493e7f3588a9b572917dea4ae5751c1ead0"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5c9851d06d6c63eda3aaaf5289f2f4583401c744", "author": {"user": {"login": "drewfarris", "name": "Drew Farris"}}, "url": "https://github.com/NationalSecurityAgency/datawave/commit/5c9851d06d6c63eda3aaaf5289f2f4583401c744", "committedDate": "2020-02-11T21:22:33Z", "message": "Merge branch 'master' into quickstart-tweaks"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "57db7025f0058fa384a107ac9893b148ba6da0ec", "author": {"user": {"login": "drewfarris", "name": "Drew Farris"}}, "url": "https://github.com/NationalSecurityAgency/datawave/commit/57db7025f0058fa384a107ac9893b148ba6da0ec", "committedDate": "2020-02-11T21:24:53Z", "message": "Improvements to various quickstart scripts for execution on Mac OS X\n\n- Fixed `sed` calls to avoid creating backups in accumulo/install.sh"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU3MDA3MDAx", "url": "https://github.com/NationalSecurityAgency/datawave/pull/743#pullrequestreview-357007001", "createdAt": "2020-02-11T21:25:41Z", "commit": {"oid": "57db7025f0058fa384a107ac9893b148ba6da0ec"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0a1993ecac6a4eb7abfe8c362de2f986b9ff6a97", "author": {"user": {"login": "drewfarris", "name": "Drew Farris"}}, "url": "https://github.com/NationalSecurityAgency/datawave/commit/0a1993ecac6a4eb7abfe8c362de2f986b9ff6a97", "committedDate": "2020-02-11T21:26:34Z", "message": "Improvements to various quickstart scripts for execution on Mac OS X\n\n- Fixed `sed` call to avoid creating backups"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU3MDA3OTM0", "url": "https://github.com/NationalSecurityAgency/datawave/pull/743#pullrequestreview-357007934", "createdAt": "2020-02-11T21:27:07Z", "commit": {"oid": "0a1993ecac6a4eb7abfe8c362de2f986b9ff6a97"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU3MDIwNTgz", "url": "https://github.com/NationalSecurityAgency/datawave/pull/743#pullrequestreview-357020583", "createdAt": "2020-02-11T21:47:19Z", "commit": {"oid": "57db7025f0058fa384a107ac9893b148ba6da0ec"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1127, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}