{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM3MTExOTI4", "number": 837, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQxNDowMzo1MFrOEHIKvA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQxNDowMzo1MFrOEHIKvA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc1OTA5MzA4OnYy", "diffSide": "RIGHT", "path": "warehouse/query-core/src/test/java/datawave/query/planner/rules/NodeTransformVisitorTest.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQxNDowMzo1MFrOGmWAIg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQxNToxMjoyMlrOGmYSmA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mjg1OTU1NA==", "bodyText": "shouldn't this be simplified to BLA == '.*?x'?", "url": "https://github.com/NationalSecurityAgency/datawave/pull/837#discussion_r442859554", "createdAt": "2020-06-19T14:03:50Z", "author": {"login": "FineAndDandy"}, "path": "warehouse/query-core/src/test/java/datawave/query/planner/rules/NodeTransformVisitorTest.java", "diffHunk": "@@ -112,7 +117,24 @@ public void regexPushdownAnyfieldTransformRuleTest() throws Exception {\n             // ok\n         }\n     }\n-    \n+\n+    @Test\n+    public void regexSimplifierTransformRuleTest() throws Exception {\n+        // @formatter:off\n+        String query = \"BLA == '.*?.*?x' && \" +\n+                \"BLA =~ 'ab.*.*' && \" +\n+                \"BLA =~ 'a.*.*.*.*?.*?' && \" +\n+                \"BLA =~ '.*?.*?.*bla.*?.*?blabla' && \" +\n+                \"_ANYFIELD_ =~ '.*.*?.*?<bla>'\";\n+        String expected = \"BLA == '.*?.*?x' && \" +", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f1abf2c65c7ef5bea28a90962516c0fae99d6f9b"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mjg5NDI5MA==", "bodyText": "That is an equals node, not a regex node.", "url": "https://github.com/NationalSecurityAgency/datawave/pull/837#discussion_r442894290", "createdAt": "2020-06-19T15:07:08Z", "author": {"login": "ivakegg"}, "path": "warehouse/query-core/src/test/java/datawave/query/planner/rules/NodeTransformVisitorTest.java", "diffHunk": "@@ -112,7 +117,24 @@ public void regexPushdownAnyfieldTransformRuleTest() throws Exception {\n             // ok\n         }\n     }\n-    \n+\n+    @Test\n+    public void regexSimplifierTransformRuleTest() throws Exception {\n+        // @formatter:off\n+        String query = \"BLA == '.*?.*?x' && \" +\n+                \"BLA =~ 'ab.*.*' && \" +\n+                \"BLA =~ 'a.*.*.*.*?.*?' && \" +\n+                \"BLA =~ '.*?.*?.*bla.*?.*?blabla' && \" +\n+                \"_ANYFIELD_ =~ '.*.*?.*?<bla>'\";\n+        String expected = \"BLA == '.*?.*?x' && \" +", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mjg1OTU1NA=="}, "originalCommit": {"oid": "f1abf2c65c7ef5bea28a90962516c0fae99d6f9b"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mjg5NDYyNA==", "bodyText": "That is an equals node, not a regex node.", "url": "https://github.com/NationalSecurityAgency/datawave/pull/837#discussion_r442894624", "createdAt": "2020-06-19T15:07:47Z", "author": {"login": "ivakegg"}, "path": "warehouse/query-core/src/test/java/datawave/query/planner/rules/NodeTransformVisitorTest.java", "diffHunk": "@@ -112,7 +117,24 @@ public void regexPushdownAnyfieldTransformRuleTest() throws Exception {\n             // ok\n         }\n     }\n-    \n+\n+    @Test\n+    public void regexSimplifierTransformRuleTest() throws Exception {\n+        // @formatter:off\n+        String query = \"BLA == '.*?.*?x' && \" +\n+                \"BLA =~ 'ab.*.*' && \" +\n+                \"BLA =~ 'a.*.*.*.*?.*?' && \" +\n+                \"BLA =~ '.*?.*?.*bla.*?.*?blabla' && \" +\n+                \"_ANYFIELD_ =~ '.*.*?.*?<bla>'\";\n+        String expected = \"BLA == '.*?.*?x' && \" +", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mjg1OTU1NA=="}, "originalCommit": {"oid": "f1abf2c65c7ef5bea28a90962516c0fae99d6f9b"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mjg5NzA0OA==", "bodyText": "ha, right. You got me", "url": "https://github.com/NationalSecurityAgency/datawave/pull/837#discussion_r442897048", "createdAt": "2020-06-19T15:12:22Z", "author": {"login": "FineAndDandy"}, "path": "warehouse/query-core/src/test/java/datawave/query/planner/rules/NodeTransformVisitorTest.java", "diffHunk": "@@ -112,7 +117,24 @@ public void regexPushdownAnyfieldTransformRuleTest() throws Exception {\n             // ok\n         }\n     }\n-    \n+\n+    @Test\n+    public void regexSimplifierTransformRuleTest() throws Exception {\n+        // @formatter:off\n+        String query = \"BLA == '.*?.*?x' && \" +\n+                \"BLA =~ 'ab.*.*' && \" +\n+                \"BLA =~ 'a.*.*.*.*?.*?' && \" +\n+                \"BLA =~ '.*?.*?.*bla.*?.*?blabla' && \" +\n+                \"_ANYFIELD_ =~ '.*.*?.*?<bla>'\";\n+        String expected = \"BLA == '.*?.*?x' && \" +", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mjg1OTU1NA=="}, "originalCommit": {"oid": "f1abf2c65c7ef5bea28a90962516c0fae99d6f9b"}, "originalPosition": 35}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4394, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}