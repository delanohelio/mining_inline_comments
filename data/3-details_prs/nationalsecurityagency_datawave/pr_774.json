{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgzMTU1MTI5", "number": 774, "title": "Updated the tree flattener to better handle queries with large or'd l\u2026", "bodyText": "\u2026ists, and updated the selector extractor to flatten before extracting selectors.", "createdAt": "2020-03-03T20:21:11Z", "url": "https://github.com/NationalSecurityAgency/datawave/pull/774", "merged": true, "mergeCommit": {"oid": "96072bf538395711e84ceaec15af7c203c4743a6"}, "closed": true, "closedAt": "2020-03-11T12:40:03Z", "author": {"login": "jwomeara"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcKIN_lgH2gAyMzgzMTU1MTI5OjVkZGZlODUyMjcyZmNkOTI0ODJhNTMwY2ZkNmNhNzQyMTAxZDk3OGU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcMYcMAgH2gAyMzgzMTU1MTI5OjBmNzY1OWFjZGVmZTE1ZDg4Y2I5MDI4YTIwMzFiODgzZjFhZWExNzg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "5ddfe852272fcd92482a530cfd6ca742101d978e", "author": {"user": {"login": "jwomeara", "name": "Whitney O'Meara"}}, "url": "https://github.com/NationalSecurityAgency/datawave/commit/5ddfe852272fcd92482a530cfd6ca742101d978e", "committedDate": "2020-03-03T20:19:51Z", "message": "Updated the tree flattener to better handle queries with large or'd lists, and updated the selector extractor to flatten before extracting selectors."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY4ODQ0NTMw", "url": "https://github.com/NationalSecurityAgency/datawave/pull/774#pullrequestreview-368844530", "createdAt": "2020-03-04T14:54:15Z", "commit": {"oid": "5ddfe852272fcd92482a530cfd6ca742101d978e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQxNDo1NDoxNVrOFxwa7A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQxNDo1NDoxNVrOFxwa7A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzcxNzg2OA==", "bodyText": "Make the operation precedence obvious between the initial || and the subsequent &&", "url": "https://github.com/NationalSecurityAgency/datawave/pull/774#discussion_r387717868", "createdAt": "2020-03-04T14:54:15Z", "author": {"login": "ivakegg"}, "path": "warehouse/query-core/src/main/java/datawave/query/jexl/visitors/TreeFlatteningRebuilder.java", "diffHunk": "@@ -182,6 +190,32 @@ private JexlNode copyTree(JexlNode node, Deque<JexlNode> postOrderDeque) {\n         return copiedNode;\n     }\n     \n+    private List<JexlNode> getAndOrLeaves(JexlNode node) {\n+        LinkedList<JexlNode> children = new LinkedList<>();\n+        LinkedList<JexlNode> stack = new LinkedList<>();\n+        stack.push(node);\n+        \n+        while (!stack.isEmpty()) {\n+            JexlNode currNode = stack.pop();\n+            \n+            // only add children if\n+            // 1) this is the original node, or\n+            // 2) this node is the same type as the root node and\n+            // -- a) this is an OR node, or\n+            // -- b) this is an AND node (but not a bounded range)\n+            if (currNode == node || node.getClass().isInstance(currNode)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5ddfe852272fcd92482a530cfd6ca742101d978e"}, "originalPosition": 48}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY5NzAyOTE5", "url": "https://github.com/NationalSecurityAgency/datawave/pull/774#pullrequestreview-369702919", "createdAt": "2020-03-05T16:07:55Z", "commit": {"oid": "5ddfe852272fcd92482a530cfd6ca742101d978e"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "122834c05d11eb420b7f72d3c530d67ca1998441", "author": {"user": {"login": "jwomeara", "name": "Whitney O'Meara"}}, "url": "https://github.com/NationalSecurityAgency/datawave/commit/122834c05d11eb420b7f72d3c530d67ca1998441", "committedDate": "2020-03-06T15:37:32Z", "message": "Merge branch 'release/version2.9' into bugfix/largeOrListImprovements"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cb1d07ae75cc57330f00562d95c242eb23c7376a", "author": {"user": {"login": "jwomeara", "name": "Whitney O'Meara"}}, "url": "https://github.com/NationalSecurityAgency/datawave/commit/cb1d07ae75cc57330f00562d95c242eb23c7376a", "committedDate": "2020-03-06T15:49:43Z", "message": "pr feedback"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcwNDQ4MzYy", "url": "https://github.com/NationalSecurityAgency/datawave/pull/774#pullrequestreview-370448362", "createdAt": "2020-03-06T16:19:28Z", "commit": {"oid": "cb1d07ae75cc57330f00562d95c242eb23c7376a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c849c0d9eb2a61d486a52f2fea4ef412af08d340", "author": {"user": {"login": "apmoriarty", "name": "Moriarty"}}, "url": "https://github.com/NationalSecurityAgency/datawave/commit/c849c0d9eb2a61d486a52f2fea4ef412af08d340", "committedDate": "2020-03-06T17:07:51Z", "message": "Merge branch 'release/version2.9' into bugfix/largeOrListImprovements"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcyMjkyMzgw", "url": "https://github.com/NationalSecurityAgency/datawave/pull/774#pullrequestreview-372292380", "createdAt": "2020-03-10T20:21:34Z", "commit": {"oid": "c849c0d9eb2a61d486a52f2fea4ef412af08d340"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0f7659acdefe15d88cb9028a2031b883f1aea178", "author": {"user": {"login": "ivakegg", "name": "Ivan Bella"}}, "url": "https://github.com/NationalSecurityAgency/datawave/commit/0f7659acdefe15d88cb9028a2031b883f1aea178", "committedDate": "2020-03-10T20:21:41Z", "message": "Merge branch 'release/version2.9' into bugfix/largeOrListImprovements"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1162, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}