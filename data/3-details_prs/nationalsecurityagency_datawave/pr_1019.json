{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQyNjE0MzY5", "number": 1019, "title": "Groupby function should group fields based on value/name", "bodyText": "Currently, groupby code only compares the value which is breaking when groupby fields have the same value.", "createdAt": "2020-12-18T15:26:13Z", "url": "https://github.com/NationalSecurityAgency/datawave/pull/1019", "merged": true, "mergeCommit": {"oid": "57fa8d31fb7b5f1ee0cb822c179abc4493edb5c5"}, "closed": true, "closedAt": "2021-01-08T14:05:49Z", "author": {"login": "d-hwang"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdnbdengBqjQxMzA3NDA2MTM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdoabicgBqjQxMzcxOTU1NTY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ebb2f7d01cc8561d8c420f28444a2385621126ca", "author": {"user": {"login": "d-hwang", "name": null}}, "url": "https://github.com/NationalSecurityAgency/datawave/commit/ebb2f7d01cc8561d8c420f28444a2385621126ca", "committedDate": "2020-12-18T15:23:08Z", "message": "Groupby function should group fields based on value/name"}, "afterCommit": {"oid": "522477ad7d288186843549eb856d21e78ec13d1b", "author": {"user": {"login": "d-hwang", "name": null}}, "url": "https://github.com/NationalSecurityAgency/datawave/commit/522477ad7d288186843549eb856d21e78ec13d1b", "committedDate": "2020-12-18T17:04:24Z", "message": "Groupby function should group fields based on value/name"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0dc6701fba247a2e32c81a2ead936ad29b2958ad", "author": {"user": {"login": "d-hwang", "name": null}}, "url": "https://github.com/NationalSecurityAgency/datawave/commit/0dc6701fba247a2e32c81a2ead936ad29b2958ad", "committedDate": "2020-12-18T17:21:05Z", "message": "Merge branch 'release/version3.1' into DATAWAVE-1007"}, "afterCommit": {"oid": "ce48d4e24664c40aa88a4a5d1301ce7386ce2bdf", "author": {"user": {"login": "d-hwang", "name": null}}, "url": "https://github.com/NationalSecurityAgency/datawave/commit/ce48d4e24664c40aa88a4a5d1301ce7386ce2bdf", "committedDate": "2020-12-18T17:22:20Z", "message": "Groupby function should group fields based on value/name"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ce48d4e24664c40aa88a4a5d1301ce7386ce2bdf", "author": {"user": {"login": "d-hwang", "name": null}}, "url": "https://github.com/NationalSecurityAgency/datawave/commit/ce48d4e24664c40aa88a4a5d1301ce7386ce2bdf", "committedDate": "2020-12-18T17:22:20Z", "message": "Groupby function should group fields based on value/name"}, "afterCommit": {"oid": "7ac5a7a98ef2f01f958af453c6f9db831ef15e5d", "author": {"user": {"login": "d-hwang", "name": null}}, "url": "https://github.com/NationalSecurityAgency/datawave/commit/7ac5a7a98ef2f01f958af453c6f9db831ef15e5d", "committedDate": "2020-12-18T19:23:50Z", "message": "Groupby function should group fields based on value/name"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7ac5a7a98ef2f01f958af453c6f9db831ef15e5d", "author": {"user": {"login": "d-hwang", "name": null}}, "url": "https://github.com/NationalSecurityAgency/datawave/commit/7ac5a7a98ef2f01f958af453c6f9db831ef15e5d", "committedDate": "2020-12-18T19:23:50Z", "message": "Groupby function should group fields based on value/name"}, "afterCommit": {"oid": "deaa017650be392b9566bf994f87760bb9d072dc", "author": {"user": {"login": "d-hwang", "name": null}}, "url": "https://github.com/NationalSecurityAgency/datawave/commit/deaa017650be392b9566bf994f87760bb9d072dc", "committedDate": "2020-12-18T19:26:51Z", "message": "Groupby function should group fields based on value/name"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU2MzQ1MTA2", "url": "https://github.com/NationalSecurityAgency/datawave/pull/1019#pullrequestreview-556345106", "createdAt": "2020-12-21T12:31:01Z", "commit": {"oid": "deaa017650be392b9566bf994f87760bb9d072dc"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU2Mzc2MTMw", "url": "https://github.com/NationalSecurityAgency/datawave/pull/1019#pullrequestreview-556376130", "createdAt": "2020-12-21T13:25:23Z", "commit": {"oid": "deaa017650be392b9566bf994f87760bb9d072dc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMVQxMzoyNToyM1rOIJYJqw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMVQxMzoyNToyM1rOIJYJqw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjcwMzc4Nw==", "bodyText": "In theory you could collapse these, but not absolutely required:\ncase \"GENDER\":\ncase \"GEN\":\ncase \"BIRTHDAY\":\n      firstKey = fieldBase.getValueString()\n      break;\ncase \"AGE\":\ncase \"AG\":\n       secondKey = fieldBase.getValueString()\n      break;", "url": "https://github.com/NationalSecurityAgency/datawave/pull/1019#discussion_r546703787", "createdAt": "2020-12-21T13:25:23Z", "author": {"login": "drewfarris"}, "path": "warehouse/query-core/src/test/java/datawave/query/transformer/GroupingTest.java", "diffHunk": "@@ -205,28 +205,31 @@ protected BaseQueryResponse runTestQueryWithGrouping(Map<String,Integer> expecte\n                         value = Integer.valueOf(fieldBase.getValueString());\n                         break;\n                     case \"GENDER\":\n-                        genderKey = fieldBase.getValueString();\n+                        firstKey = fieldBase.getValueString();\n                         break;\n                     case \"GEN\":\n-                        genderKey = fieldBase.getValueString();\n+                        firstKey = fieldBase.getValueString();\n+                        break;\n+                    case \"BIRTHDAY\":\n+                        firstKey = fieldBase.getValueString();\n                         break;\n                     case \"AGE\":\n-                        ageKey = fieldBase.getValueString();\n+                        secondKey = fieldBase.getValueString();\n                         break;\n                     case \"AG\":\n-                        ageKey = fieldBase.getValueString();\n+                        secondKey = fieldBase.getValueString();\n                         break;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "deaa017650be392b9566bf994f87760bb9d072dc"}, "originalPosition": 32}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU2Mzc3ODY5", "url": "https://github.com/NationalSecurityAgency/datawave/pull/1019#pullrequestreview-556377869", "createdAt": "2020-12-21T13:27:59Z", "commit": {"oid": "deaa017650be392b9566bf994f87760bb9d072dc"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ab43365b3aa5c5b5f9e1c928701efd8475dde433", "author": {"user": {"login": "d-hwang", "name": null}}, "url": "https://github.com/NationalSecurityAgency/datawave/commit/ab43365b3aa5c5b5f9e1c928701efd8475dde433", "committedDate": "2020-12-21T18:41:22Z", "message": "Groupby function should group fields based on value/name"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "deaa017650be392b9566bf994f87760bb9d072dc", "author": {"user": {"login": "d-hwang", "name": null}}, "url": "https://github.com/NationalSecurityAgency/datawave/commit/deaa017650be392b9566bf994f87760bb9d072dc", "committedDate": "2020-12-18T19:26:51Z", "message": "Groupby function should group fields based on value/name"}, "afterCommit": {"oid": "ab43365b3aa5c5b5f9e1c928701efd8475dde433", "author": {"user": {"login": "d-hwang", "name": null}}, "url": "https://github.com/NationalSecurityAgency/datawave/commit/ab43365b3aa5c5b5f9e1c928701efd8475dde433", "committedDate": "2020-12-21T18:41:22Z", "message": "Groupby function should group fields based on value/name"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 971, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}