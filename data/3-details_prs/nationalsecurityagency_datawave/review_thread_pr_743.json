{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzczNzQyOTYz", "number": 743, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMVQxNjo1NzowN1rODe4hmw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMVQyMDozNDo1NlrODe87MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMzNzA5OTc5OnYy", "diffSide": "RIGHT", "path": "contrib/datawave-quickstart/bin/services/accumulo/install.sh", "isResolved": true, "comments": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMVQxNjo1NzowN1rOFoRDVw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMVQyMTowMToxNFrOFoY6_Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Nzc2Njc0Mw==", "bodyText": "Won't this leave backup files around that we need to clean up?", "url": "https://github.com/NationalSecurityAgency/datawave/pull/743#discussion_r377766743", "createdAt": "2020-02-11T16:57:07Z", "author": {"login": "ivakegg"}, "path": "contrib/datawave-quickstart/bin/services/accumulo/install.sh", "diffHunk": "@@ -59,9 +59,9 @@ fi\n assertCreateDir \"${DW_ACCUMULO_JVM_HEAPDUMP_DIR}\"\n \n # Update tserver and other options in accumulo-env.sh\n-sed -i \"s~\\(ACCUMULO_TSERVER_OPTS=\\).*$~\\1\\\"${DW_ACCUMULO_TSERVER_OPTS}\\\"~g\" ${DW_ACCUMULO_CONF_DIR}/accumulo-env.sh\n-sed -i \"s~\\(export JAVA_HOME=\\).*$~\\1\\\"${JAVA_HOME}\\\"~g\" ${DW_ACCUMULO_CONF_DIR}/accumulo-env.sh\n-sed -i \"s~\\(export ACCUMULO_MONITOR_OPTS=\\).*$~\\1\\\"\\${POLICY} -Xmx2g -Xms512m\\\"~g\" ${DW_ACCUMULO_CONF_DIR}/accumulo-env.sh\n+sed -i'bak' \"s~\\(ACCUMULO_TSERVER_OPTS=\\).*$~\\1\\\"${DW_ACCUMULO_TSERVER_OPTS}\\\"~g\" ${DW_ACCUMULO_CONF_DIR}/accumulo-env.sh\n+sed -i'bak' \"s~\\(export JAVA_HOME=\\).*$~\\1\\\"${JAVA_HOME}\\\"~g\" ${DW_ACCUMULO_CONF_DIR}/accumulo-env.sh\n+sed -i'bak' \"s~\\(export ACCUMULO_MONITOR_OPTS=\\).*$~\\1\\\"\\${POLICY} -Xmx2g -Xms512m\\\"~g\" ${DW_ACCUMULO_CONF_DIR}/accumulo-env.sh", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8b19ded7455001d51c2eb71c095fb6b3f1fa4df6"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Nzc3MDA0Mw==", "bodyText": "I think you can do sed -i''", "url": "https://github.com/NationalSecurityAgency/datawave/pull/743#discussion_r377770043", "createdAt": "2020-02-11T17:02:15Z", "author": {"login": "alerman"}, "path": "contrib/datawave-quickstart/bin/services/accumulo/install.sh", "diffHunk": "@@ -59,9 +59,9 @@ fi\n assertCreateDir \"${DW_ACCUMULO_JVM_HEAPDUMP_DIR}\"\n \n # Update tserver and other options in accumulo-env.sh\n-sed -i \"s~\\(ACCUMULO_TSERVER_OPTS=\\).*$~\\1\\\"${DW_ACCUMULO_TSERVER_OPTS}\\\"~g\" ${DW_ACCUMULO_CONF_DIR}/accumulo-env.sh\n-sed -i \"s~\\(export JAVA_HOME=\\).*$~\\1\\\"${JAVA_HOME}\\\"~g\" ${DW_ACCUMULO_CONF_DIR}/accumulo-env.sh\n-sed -i \"s~\\(export ACCUMULO_MONITOR_OPTS=\\).*$~\\1\\\"\\${POLICY} -Xmx2g -Xms512m\\\"~g\" ${DW_ACCUMULO_CONF_DIR}/accumulo-env.sh\n+sed -i'bak' \"s~\\(ACCUMULO_TSERVER_OPTS=\\).*$~\\1\\\"${DW_ACCUMULO_TSERVER_OPTS}\\\"~g\" ${DW_ACCUMULO_CONF_DIR}/accumulo-env.sh\n+sed -i'bak' \"s~\\(export JAVA_HOME=\\).*$~\\1\\\"${JAVA_HOME}\\\"~g\" ${DW_ACCUMULO_CONF_DIR}/accumulo-env.sh\n+sed -i'bak' \"s~\\(export ACCUMULO_MONITOR_OPTS=\\).*$~\\1\\\"\\${POLICY} -Xmx2g -Xms512m\\\"~g\" ${DW_ACCUMULO_CONF_DIR}/accumulo-env.sh", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Nzc2Njc0Mw=="}, "originalCommit": {"oid": "8b19ded7455001d51c2eb71c095fb6b3f1fa4df6"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Nzc3NTY2MA==", "bodyText": "Yup, that seems to work in my local testing. (Tested in a CentOS docker container too in order to make sure that doesn't break there.)", "url": "https://github.com/NationalSecurityAgency/datawave/pull/743#discussion_r377775660", "createdAt": "2020-02-11T17:11:30Z", "author": {"login": "brianloss"}, "path": "contrib/datawave-quickstart/bin/services/accumulo/install.sh", "diffHunk": "@@ -59,9 +59,9 @@ fi\n assertCreateDir \"${DW_ACCUMULO_JVM_HEAPDUMP_DIR}\"\n \n # Update tserver and other options in accumulo-env.sh\n-sed -i \"s~\\(ACCUMULO_TSERVER_OPTS=\\).*$~\\1\\\"${DW_ACCUMULO_TSERVER_OPTS}\\\"~g\" ${DW_ACCUMULO_CONF_DIR}/accumulo-env.sh\n-sed -i \"s~\\(export JAVA_HOME=\\).*$~\\1\\\"${JAVA_HOME}\\\"~g\" ${DW_ACCUMULO_CONF_DIR}/accumulo-env.sh\n-sed -i \"s~\\(export ACCUMULO_MONITOR_OPTS=\\).*$~\\1\\\"\\${POLICY} -Xmx2g -Xms512m\\\"~g\" ${DW_ACCUMULO_CONF_DIR}/accumulo-env.sh\n+sed -i'bak' \"s~\\(ACCUMULO_TSERVER_OPTS=\\).*$~\\1\\\"${DW_ACCUMULO_TSERVER_OPTS}\\\"~g\" ${DW_ACCUMULO_CONF_DIR}/accumulo-env.sh\n+sed -i'bak' \"s~\\(export JAVA_HOME=\\).*$~\\1\\\"${JAVA_HOME}\\\"~g\" ${DW_ACCUMULO_CONF_DIR}/accumulo-env.sh\n+sed -i'bak' \"s~\\(export ACCUMULO_MONITOR_OPTS=\\).*$~\\1\\\"\\${POLICY} -Xmx2g -Xms512m\\\"~g\" ${DW_ACCUMULO_CONF_DIR}/accumulo-env.sh", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Nzc2Njc0Mw=="}, "originalCommit": {"oid": "8b19ded7455001d51c2eb71c095fb6b3f1fa4df6"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Nzc4MzA2MA==", "bodyText": "Not an issue, really. Any cruft in DW_ACCUMULO_CONF_DIR will get obliterated automatically on an uninstall/reinstall, along with any other paths created by the quickstart.", "url": "https://github.com/NationalSecurityAgency/datawave/pull/743#discussion_r377783060", "createdAt": "2020-02-11T17:24:12Z", "author": {"login": "keith-ratcliffe"}, "path": "contrib/datawave-quickstart/bin/services/accumulo/install.sh", "diffHunk": "@@ -59,9 +59,9 @@ fi\n assertCreateDir \"${DW_ACCUMULO_JVM_HEAPDUMP_DIR}\"\n \n # Update tserver and other options in accumulo-env.sh\n-sed -i \"s~\\(ACCUMULO_TSERVER_OPTS=\\).*$~\\1\\\"${DW_ACCUMULO_TSERVER_OPTS}\\\"~g\" ${DW_ACCUMULO_CONF_DIR}/accumulo-env.sh\n-sed -i \"s~\\(export JAVA_HOME=\\).*$~\\1\\\"${JAVA_HOME}\\\"~g\" ${DW_ACCUMULO_CONF_DIR}/accumulo-env.sh\n-sed -i \"s~\\(export ACCUMULO_MONITOR_OPTS=\\).*$~\\1\\\"\\${POLICY} -Xmx2g -Xms512m\\\"~g\" ${DW_ACCUMULO_CONF_DIR}/accumulo-env.sh\n+sed -i'bak' \"s~\\(ACCUMULO_TSERVER_OPTS=\\).*$~\\1\\\"${DW_ACCUMULO_TSERVER_OPTS}\\\"~g\" ${DW_ACCUMULO_CONF_DIR}/accumulo-env.sh\n+sed -i'bak' \"s~\\(export JAVA_HOME=\\).*$~\\1\\\"${JAVA_HOME}\\\"~g\" ${DW_ACCUMULO_CONF_DIR}/accumulo-env.sh\n+sed -i'bak' \"s~\\(export ACCUMULO_MONITOR_OPTS=\\).*$~\\1\\\"\\${POLICY} -Xmx2g -Xms512m\\\"~g\" ${DW_ACCUMULO_CONF_DIR}/accumulo-env.sh", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Nzc2Njc0Mw=="}, "originalCommit": {"oid": "8b19ded7455001d51c2eb71c095fb6b3f1fa4df6"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Nzg4NDc4NA==", "bodyText": "It would have been nice if sed -i'' would have worked, but it didn't. I've added a sed ... && rm ....bak to the end of these to clean up the backup file if the sed completes successfully.", "url": "https://github.com/NationalSecurityAgency/datawave/pull/743#discussion_r377884784", "createdAt": "2020-02-11T20:38:59Z", "author": {"login": "drewfarris"}, "path": "contrib/datawave-quickstart/bin/services/accumulo/install.sh", "diffHunk": "@@ -59,9 +59,9 @@ fi\n assertCreateDir \"${DW_ACCUMULO_JVM_HEAPDUMP_DIR}\"\n \n # Update tserver and other options in accumulo-env.sh\n-sed -i \"s~\\(ACCUMULO_TSERVER_OPTS=\\).*$~\\1\\\"${DW_ACCUMULO_TSERVER_OPTS}\\\"~g\" ${DW_ACCUMULO_CONF_DIR}/accumulo-env.sh\n-sed -i \"s~\\(export JAVA_HOME=\\).*$~\\1\\\"${JAVA_HOME}\\\"~g\" ${DW_ACCUMULO_CONF_DIR}/accumulo-env.sh\n-sed -i \"s~\\(export ACCUMULO_MONITOR_OPTS=\\).*$~\\1\\\"\\${POLICY} -Xmx2g -Xms512m\\\"~g\" ${DW_ACCUMULO_CONF_DIR}/accumulo-env.sh\n+sed -i'bak' \"s~\\(ACCUMULO_TSERVER_OPTS=\\).*$~\\1\\\"${DW_ACCUMULO_TSERVER_OPTS}\\\"~g\" ${DW_ACCUMULO_CONF_DIR}/accumulo-env.sh\n+sed -i'bak' \"s~\\(export JAVA_HOME=\\).*$~\\1\\\"${JAVA_HOME}\\\"~g\" ${DW_ACCUMULO_CONF_DIR}/accumulo-env.sh\n+sed -i'bak' \"s~\\(export ACCUMULO_MONITOR_OPTS=\\).*$~\\1\\\"\\${POLICY} -Xmx2g -Xms512m\\\"~g\" ${DW_ACCUMULO_CONF_DIR}/accumulo-env.sh", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Nzc2Njc0Mw=="}, "originalCommit": {"oid": "8b19ded7455001d51c2eb71c095fb6b3f1fa4df6"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Nzg4NTY4MQ==", "bodyText": "I'll re-run and capture the specific error..", "url": "https://github.com/NationalSecurityAgency/datawave/pull/743#discussion_r377885681", "createdAt": "2020-02-11T20:41:01Z", "author": {"login": "drewfarris"}, "path": "contrib/datawave-quickstart/bin/services/accumulo/install.sh", "diffHunk": "@@ -59,9 +59,9 @@ fi\n assertCreateDir \"${DW_ACCUMULO_JVM_HEAPDUMP_DIR}\"\n \n # Update tserver and other options in accumulo-env.sh\n-sed -i \"s~\\(ACCUMULO_TSERVER_OPTS=\\).*$~\\1\\\"${DW_ACCUMULO_TSERVER_OPTS}\\\"~g\" ${DW_ACCUMULO_CONF_DIR}/accumulo-env.sh\n-sed -i \"s~\\(export JAVA_HOME=\\).*$~\\1\\\"${JAVA_HOME}\\\"~g\" ${DW_ACCUMULO_CONF_DIR}/accumulo-env.sh\n-sed -i \"s~\\(export ACCUMULO_MONITOR_OPTS=\\).*$~\\1\\\"\\${POLICY} -Xmx2g -Xms512m\\\"~g\" ${DW_ACCUMULO_CONF_DIR}/accumulo-env.sh\n+sed -i'bak' \"s~\\(ACCUMULO_TSERVER_OPTS=\\).*$~\\1\\\"${DW_ACCUMULO_TSERVER_OPTS}\\\"~g\" ${DW_ACCUMULO_CONF_DIR}/accumulo-env.sh\n+sed -i'bak' \"s~\\(export JAVA_HOME=\\).*$~\\1\\\"${JAVA_HOME}\\\"~g\" ${DW_ACCUMULO_CONF_DIR}/accumulo-env.sh\n+sed -i'bak' \"s~\\(export ACCUMULO_MONITOR_OPTS=\\).*$~\\1\\\"\\${POLICY} -Xmx2g -Xms512m\\\"~g\" ${DW_ACCUMULO_CONF_DIR}/accumulo-env.sh", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Nzc2Njc0Mw=="}, "originalCommit": {"oid": "8b19ded7455001d51c2eb71c095fb6b3f1fa4df6"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Nzg5MDQ3NQ==", "bodyText": "Here's the bizarre error that I get regardless of whether I'm using a bare -i or -i''\nsed: 1: \"/Users/andrewfarris/pro ...\": command a expects \\ followed by text", "url": "https://github.com/NationalSecurityAgency/datawave/pull/743#discussion_r377890475", "createdAt": "2020-02-11T20:50:45Z", "author": {"login": "drewfarris"}, "path": "contrib/datawave-quickstart/bin/services/accumulo/install.sh", "diffHunk": "@@ -59,9 +59,9 @@ fi\n assertCreateDir \"${DW_ACCUMULO_JVM_HEAPDUMP_DIR}\"\n \n # Update tserver and other options in accumulo-env.sh\n-sed -i \"s~\\(ACCUMULO_TSERVER_OPTS=\\).*$~\\1\\\"${DW_ACCUMULO_TSERVER_OPTS}\\\"~g\" ${DW_ACCUMULO_CONF_DIR}/accumulo-env.sh\n-sed -i \"s~\\(export JAVA_HOME=\\).*$~\\1\\\"${JAVA_HOME}\\\"~g\" ${DW_ACCUMULO_CONF_DIR}/accumulo-env.sh\n-sed -i \"s~\\(export ACCUMULO_MONITOR_OPTS=\\).*$~\\1\\\"\\${POLICY} -Xmx2g -Xms512m\\\"~g\" ${DW_ACCUMULO_CONF_DIR}/accumulo-env.sh\n+sed -i'bak' \"s~\\(ACCUMULO_TSERVER_OPTS=\\).*$~\\1\\\"${DW_ACCUMULO_TSERVER_OPTS}\\\"~g\" ${DW_ACCUMULO_CONF_DIR}/accumulo-env.sh\n+sed -i'bak' \"s~\\(export JAVA_HOME=\\).*$~\\1\\\"${JAVA_HOME}\\\"~g\" ${DW_ACCUMULO_CONF_DIR}/accumulo-env.sh\n+sed -i'bak' \"s~\\(export ACCUMULO_MONITOR_OPTS=\\).*$~\\1\\\"\\${POLICY} -Xmx2g -Xms512m\\\"~g\" ${DW_ACCUMULO_CONF_DIR}/accumulo-env.sh", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Nzc2Njc0Mw=="}, "originalCommit": {"oid": "8b19ded7455001d51c2eb71c095fb6b3f1fa4df6"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Nzg5NTY3Nw==", "bodyText": "Ultimately, this works:\nsed -i'' -e 's|.*\\(export JAVA_HOME=\\).*|\\1'${JAVA_HOME}'|g' ${HADOOP_CONF_DIR}/hadoop-env.sh\n\nWhereas this fails:\nsed -i'' \"s|.*\\(export JAVA_HOME=\\).*|\\1${JAVA_HOME}|g\" ${HADOOP_CONF_DIR}/hadoop-env.sh`", "url": "https://github.com/NationalSecurityAgency/datawave/pull/743#discussion_r377895677", "createdAt": "2020-02-11T21:01:14Z", "author": {"login": "drewfarris"}, "path": "contrib/datawave-quickstart/bin/services/accumulo/install.sh", "diffHunk": "@@ -59,9 +59,9 @@ fi\n assertCreateDir \"${DW_ACCUMULO_JVM_HEAPDUMP_DIR}\"\n \n # Update tserver and other options in accumulo-env.sh\n-sed -i \"s~\\(ACCUMULO_TSERVER_OPTS=\\).*$~\\1\\\"${DW_ACCUMULO_TSERVER_OPTS}\\\"~g\" ${DW_ACCUMULO_CONF_DIR}/accumulo-env.sh\n-sed -i \"s~\\(export JAVA_HOME=\\).*$~\\1\\\"${JAVA_HOME}\\\"~g\" ${DW_ACCUMULO_CONF_DIR}/accumulo-env.sh\n-sed -i \"s~\\(export ACCUMULO_MONITOR_OPTS=\\).*$~\\1\\\"\\${POLICY} -Xmx2g -Xms512m\\\"~g\" ${DW_ACCUMULO_CONF_DIR}/accumulo-env.sh\n+sed -i'bak' \"s~\\(ACCUMULO_TSERVER_OPTS=\\).*$~\\1\\\"${DW_ACCUMULO_TSERVER_OPTS}\\\"~g\" ${DW_ACCUMULO_CONF_DIR}/accumulo-env.sh\n+sed -i'bak' \"s~\\(export JAVA_HOME=\\).*$~\\1\\\"${JAVA_HOME}\\\"~g\" ${DW_ACCUMULO_CONF_DIR}/accumulo-env.sh\n+sed -i'bak' \"s~\\(export ACCUMULO_MONITOR_OPTS=\\).*$~\\1\\\"\\${POLICY} -Xmx2g -Xms512m\\\"~g\" ${DW_ACCUMULO_CONF_DIR}/accumulo-env.sh", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Nzc2Njc0Mw=="}, "originalCommit": {"oid": "8b19ded7455001d51c2eb71c095fb6b3f1fa4df6"}, "originalPosition": 9}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMzNzgwMjA2OnYy", "diffSide": "RIGHT", "path": "contrib/datawave-quickstart/bin/services/hadoop/install.sh", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMVQyMDoyODo0MlrOFoX9TQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMVQyMDoyODo0MlrOFoX9TQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Nzg3OTg4NQ==", "bodyText": "Why not just sed -i '' instead of sed -i '.bak' and then you don't have to remove the .bak file separately?", "url": "https://github.com/NationalSecurityAgency/datawave/pull/743#discussion_r377879885", "createdAt": "2020-02-11T20:28:42Z", "author": {"login": "brianloss"}, "path": "contrib/datawave-quickstart/bin/services/hadoop/install.sh", "diffHunk": "@@ -89,13 +89,10 @@ else\n fi\n \n # Ensure that $JAVA_HOME is observed by all hadoop scripts\n-sed -i \"s|.*\\(export JAVA_HOME=\\).*|\\1${JAVA_HOME}|g\" ${HADOOP_CONF_DIR}/hadoop-env.sh\n+sed -i'.bak' \"s|.*\\(export JAVA_HOME=\\).*|\\1${JAVA_HOME}|g\" ${HADOOP_CONF_DIR}/hadoop-env.sh && rm ${HADOOP_CONF_DIR}/hadoop-env.sh.bak", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3f4e4493e7f3588a9b572917dea4ae5751c1ead0"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMzNzgwMzEwOnYy", "diffSide": "RIGHT", "path": "contrib/datawave-quickstart/bin/services/accumulo/install.sh", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMVQyMDoyODo1OVrOFoX98Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMVQyMDoyODo1OVrOFoX98Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Nzg4MDA0OQ==", "bodyText": "Why not just sed -i '' instead of sed -i '.bak' and then you don't have to remove the .bak file separately?", "url": "https://github.com/NationalSecurityAgency/datawave/pull/743#discussion_r377880049", "createdAt": "2020-02-11T20:28:59Z", "author": {"login": "brianloss"}, "path": "contrib/datawave-quickstart/bin/services/accumulo/install.sh", "diffHunk": "@@ -59,9 +59,9 @@ fi\n assertCreateDir \"${DW_ACCUMULO_JVM_HEAPDUMP_DIR}\"\n \n # Update tserver and other options in accumulo-env.sh\n-sed -i \"s~\\(ACCUMULO_TSERVER_OPTS=\\).*$~\\1\\\"${DW_ACCUMULO_TSERVER_OPTS}\\\"~g\" ${DW_ACCUMULO_CONF_DIR}/accumulo-env.sh\n-sed -i \"s~\\(export JAVA_HOME=\\).*$~\\1\\\"${JAVA_HOME}\\\"~g\" ${DW_ACCUMULO_CONF_DIR}/accumulo-env.sh\n-sed -i \"s~\\(export ACCUMULO_MONITOR_OPTS=\\).*$~\\1\\\"\\${POLICY} -Xmx2g -Xms512m\\\"~g\" ${DW_ACCUMULO_CONF_DIR}/accumulo-env.sh\n+sed -i'.bak' \"s~\\(ACCUMULO_TSERVER_OPTS=\\).*$~\\1\\\"${DW_ACCUMULO_TSERVER_OPTS}\\\"~g\" ${DW_ACCUMULO_CONF_DIR}/accumulo-env.sh && rm ${DW_ACCUMULO_CONF_DIR}/accumulo-env.sh.bak\n+sed -i'.bak' \"s~\\(export JAVA_HOME=\\).*$~\\1\\\"${JAVA_HOME}\\\"~g\" ${DW_ACCUMULO_CONF_DIR}/accumulo-env.sh && rm ${DW_ACCUMULO_CONF_DIR}/accumulo-env.sh.bak\n+sed -i'.bak' \"s~\\(export ACCUMULO_MONITOR_OPTS=\\).*$~\\1\\\"\\${POLICY} -Xmx2g -Xms512m\\\"~g\" ${DW_ACCUMULO_CONF_DIR}/accumulo-env.sh && rm ${DW_ACCUMULO_CONF_DIR}/accumulo-env.sh.bak", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3f4e4493e7f3588a9b572917dea4ae5751c1ead0"}, "originalPosition": 9}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMzNzgyMDY1OnYy", "diffSide": "LEFT", "path": "contrib/datawave-quickstart/bin/services/hadoop/install.sh", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMVQyMDozNDo1NlrOFoYI8A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMVQyMDo0MzowNVrOFoYXzQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Nzg4Mjg2NA==", "bodyText": "What's the reason for removing these lines?", "url": "https://github.com/NationalSecurityAgency/datawave/pull/743#discussion_r377882864", "createdAt": "2020-02-11T20:34:56Z", "author": {"login": "brianloss"}, "path": "contrib/datawave-quickstart/bin/services/hadoop/install.sh", "diffHunk": "@@ -89,13 +89,10 @@ else\n fi\n \n # Ensure that $JAVA_HOME is observed by all hadoop scripts\n-sed -i \"s|.*\\(export JAVA_HOME=\\).*|\\1${JAVA_HOME}|g\" ${HADOOP_CONF_DIR}/hadoop-env.sh\n+sed -i'.bak' \"s|.*\\(export JAVA_HOME=\\).*|\\1${JAVA_HOME}|g\" ${HADOOP_CONF_DIR}/hadoop-env.sh && rm ${HADOOP_CONF_DIR}/hadoop-env.sh.bak\n \n verifySSHConfig\n \n-assertCreateDir \"${DW_HADOOP_MR_INTER_DIR}\"\n-assertCreateDir \"${DW_HADOOP_MR_DONE_DIR}\"\n-", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3f4e4493e7f3588a9b572917dea4ae5751c1ead0"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Nzg4NjIxMQ==", "bodyText": "They're not needed because the directories are on HDFS - assertCreateDir checks local filesystem directories.", "url": "https://github.com/NationalSecurityAgency/datawave/pull/743#discussion_r377886211", "createdAt": "2020-02-11T20:42:06Z", "author": {"login": "drewfarris"}, "path": "contrib/datawave-quickstart/bin/services/hadoop/install.sh", "diffHunk": "@@ -89,13 +89,10 @@ else\n fi\n \n # Ensure that $JAVA_HOME is observed by all hadoop scripts\n-sed -i \"s|.*\\(export JAVA_HOME=\\).*|\\1${JAVA_HOME}|g\" ${HADOOP_CONF_DIR}/hadoop-env.sh\n+sed -i'.bak' \"s|.*\\(export JAVA_HOME=\\).*|\\1${JAVA_HOME}|g\" ${HADOOP_CONF_DIR}/hadoop-env.sh && rm ${HADOOP_CONF_DIR}/hadoop-env.sh.bak\n \n verifySSHConfig\n \n-assertCreateDir \"${DW_HADOOP_MR_INTER_DIR}\"\n-assertCreateDir \"${DW_HADOOP_MR_DONE_DIR}\"\n-", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Nzg4Mjg2NA=="}, "originalCommit": {"oid": "3f4e4493e7f3588a9b572917dea4ae5751c1ead0"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Nzg4NjY2OQ==", "bodyText": "Ah, sounds good. Thanks.", "url": "https://github.com/NationalSecurityAgency/datawave/pull/743#discussion_r377886669", "createdAt": "2020-02-11T20:43:05Z", "author": {"login": "brianloss"}, "path": "contrib/datawave-quickstart/bin/services/hadoop/install.sh", "diffHunk": "@@ -89,13 +89,10 @@ else\n fi\n \n # Ensure that $JAVA_HOME is observed by all hadoop scripts\n-sed -i \"s|.*\\(export JAVA_HOME=\\).*|\\1${JAVA_HOME}|g\" ${HADOOP_CONF_DIR}/hadoop-env.sh\n+sed -i'.bak' \"s|.*\\(export JAVA_HOME=\\).*|\\1${JAVA_HOME}|g\" ${HADOOP_CONF_DIR}/hadoop-env.sh && rm ${HADOOP_CONF_DIR}/hadoop-env.sh.bak\n \n verifySSHConfig\n \n-assertCreateDir \"${DW_HADOOP_MR_INTER_DIR}\"\n-assertCreateDir \"${DW_HADOOP_MR_DONE_DIR}\"\n-", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Nzg4Mjg2NA=="}, "originalCommit": {"oid": "3f4e4493e7f3588a9b572917dea4ae5751c1ead0"}, "originalPosition": 11}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4492, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}