{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDYzNjk2NTMx", "number": 5038, "title": "feat(TDI-42668):update jar of tssh component branch 7.3", "bodyText": "What is the current behavior? (You can also link to an open issue here)\nhttps://jira.talendforge.org/browse/TDI-42668\nWhat is the new behavior?\nPlease check if the PR fulfills these requirements\n\n The commit message follows Talend standard\n Tests for the changes have been added (for bug fixes / features)\n Docs have been added / updated (for bug fixes / features) ?\n The code coverage on new code >75%\n The new code does not introduce new technical issues (sonar / eslint)\n\nWhat kind of change does this PR introduce?\n\n Bugfix\n Feature\n Code style update (formatting, local variables)\n Refactoring (no functional changes, no api changes)\n Build / CI related changes\n Other... Please describe:\n\nDoes this PR introduce a breaking change?\n\n Yes\n No\n\nIf this PR contains a breaking change, please describe the impact and migration path for existing applications: ...\nOther information:", "createdAt": "2020-08-05T23:31:15Z", "url": "https://github.com/Talend/tdi-studio-se/pull/5038", "merged": true, "mergeCommit": {"oid": "82a927aed4bf80bcc10532714b6238e2d7c852f6"}, "closed": true, "closedAt": "2020-08-13T04:25:38Z", "author": {"login": "pyzhou-talend"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc8D1GPgH2gAyNDYzNjk2NTMxOmFkOTc2MDJkZDkzYTg3NzIwN2FiZGNhMjFmZDYxNmY4MDNmYTZjZGU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdAheDsAFqTQ3MDg2MTYzNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "ad97602dd93a877207abdca21fd616f803fa6cde", "author": {"user": {"login": "pyzhou-talend", "name": "pyzhou"}}, "url": "https://github.com/Talend/tdi-studio-se/commit/ad97602dd93a877207abdca21fd616f803fa6cde", "committedDate": "2020-08-05T23:29:15Z", "message": "feat(TDI-42668):update jar of tssh component"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a47966a23363568f88d925a5f0bc6859293b98da", "author": {"user": {"login": "pyzhou-talend", "name": "pyzhou"}}, "url": "https://github.com/Talend/tdi-studio-se/commit/a47966a23363568f88d925a5f0bc6859293b98da", "committedDate": "2020-08-06T02:04:43Z", "message": "fix status code"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYyMTQxMDEy", "url": "https://github.com/Talend/tdi-studio-se/pull/5038#pullrequestreview-462141012", "createdAt": "2020-08-06T02:15:08Z", "commit": {"oid": "a47966a23363568f88d925a5f0bc6859293b98da"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0f61e4b1f78af2a90eb44afce8397625b959f227", "author": {"user": {"login": "pyzhou-talend", "name": "pyzhou"}}, "url": "https://github.com/Talend/tdi-studio-se/commit/0f61e4b1f78af2a90eb44afce8397625b959f227", "committedDate": "2020-08-10T06:49:01Z", "message": "fix error interactive"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "db41c6d07888a3789b2c57e8524d491441980669", "author": {"user": {"login": "pyzhou-talend", "name": "pyzhou"}}, "url": "https://github.com/Talend/tdi-studio-se/commit/db41c6d07888a3789b2c57e8524d491441980669", "committedDate": "2020-08-12T08:59:48Z", "message": "support dsa"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "749091b5cad8c0c92e7789bd0c44e2df185c23e6", "author": {"user": {"login": "pyzhou-talend", "name": "pyzhou"}}, "url": "https://github.com/Talend/tdi-studio-se/commit/749091b5cad8c0c92e7789bd0c44e2df185c23e6", "committedDate": "2020-08-12T09:06:55Z", "message": "fix compile error"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY2NDM0NDU3", "url": "https://github.com/Talend/tdi-studio-se/pull/5038#pullrequestreview-466434457", "createdAt": "2020-08-13T04:23:38Z", "commit": {"oid": "749091b5cad8c0c92e7789bd0c44e2df185c23e6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcwODYxNjM2", "url": "https://github.com/Talend/tdi-studio-se/pull/5038#pullrequestreview-470861636", "createdAt": "2020-08-19T20:16:55Z", "commit": {"oid": "749091b5cad8c0c92e7789bd0c44e2df185c23e6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOVQyMDoxNjo1NlrOHDXi1g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOVQyMDoxNjo1NlrOHDXi1g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzI5MzUyNg==", "bodyText": "hardcoded value. create a regression", "url": "https://github.com/Talend/tdi-studio-se/pull/5038#discussion_r473293526", "createdAt": "2020-08-19T20:16:56Z", "author": {"login": "pteyssier"}, "path": "main/plugins/org.talend.designer.components.localprovider/components/tSSH/tSSH_begin.javajet", "diffHunk": "@@ -83,104 +47,95 @@ if ((metadatas!=null)&&(metadatas.size()>0)) {\n \t\t<%if(isLog4jEnabled){%>\n \t\t\tlog.info(\"<%=cid%> - Connection attempt to '\" +hostname_<%=cid%> + \"' on the port '\"+<%=port%>+\"' as '\" + username_<%=cid%> + \"'.\");\n \t\t<%}%>\n-<%\n-        if((\"\").equals(port)){\n-%>\n-\t\t\t  ch.ethz.ssh2.Connection conn_<%=cid%> = new ch.ethz.ssh2.Connection(hostname_<%=cid%>);\n-<%\n-        } else {\n-%>\n-\t\t\t  ch.ethz.ssh2.Connection conn_<%=cid%> = new ch.ethz.ssh2.Connection(hostname_<%=cid%>,Integer.parseInt(<%=port %> + \"\"));\n-<%\n-        }\n-%>\n-\t\t/* Create a session */\n-\t\tch.ethz.ssh2.Session sess_<%=cid%> = null;\n-              /* Now connect */\n-<%\n-        if((\"true\").equals(useTimeout)){\n-%>\n-\t\t\t  conn_<%=cid%>.connect(null,0,<%=timeout%>*1000);\n-<%\n-        } else {\n-%>\n-\t\t\t  conn_<%=cid%>.connect();\n-<%\n-        }\n-        \n+\t\torg.apache.sshd.client.SshClient client_<%=cid%> = org.apache.sshd.client.SshClient.setUpDefaultClient();\n+\t\t\n+\t\t<%\n         if ((\"PUBLICKEY\").equals(authMethod)) {\n-%>\n-\t\t<%if(isLog4jEnabled){%>\n-\t\t\tlog.info(\"<%=cid%> - Authentication using a public key.\");\n-\t\t<%}%>\n-        java.io.File keyfile_<%=cid%> = new java.io.File(<%=privatekey%>); \n-        \n-        <%\n-        String passwordFieldName = \"__PASSPHRASE__\";\n         %>\n-        \n-        <%@ include file=\"@{org.talend.designer.components.localprovider}/components/templates/password.javajet\"%>        \n-        \n-\t\t    boolean isAuthenticated_<%=cid%> = conn_<%=cid%>.authenticateWithPublicKey(username_<%=cid%>, keyfile_<%=cid%>, decryptedPassword_<%=cid%>);\n-\t\t\t  if (isAuthenticated_<%=cid%> == false){\n-\t\t\t      throw new RuntimeException(\"Authentication failed.\");\n-\t\t\t  }\n-<%\n-        }\n-        if ((\"PASSWORD\").equals(authMethod)) {\n-%>\n \t\t<%if(isLog4jEnabled){%>\n-\t\t\tlog.info(\"<%=cid%> - Authentication using a password.\");\n+\t\t\tlog.info(\"<%=cid%> - Authentication using a public key.\");\n \t\t<%}%>\n+\t\tclient_<%=cid%>.setUserAuthFactories(java.util.Collections.singletonList(org.apache.sshd.client.auth.pubkey.UserAuthPublicKeyFactory.INSTANCE));\n+\t\tjava.nio.file.Path privateKey_<%=cid%> = java.nio.file.Paths.get(<%=privatekey%>);\n+\t\tjava.util.List<String> lines_<%=cid%> = java.nio.file.Files.readAllLines(privateKey_tSSH_1);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "749091b5cad8c0c92e7789bd0c44e2df185c23e6"}, "originalPosition": 120}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4674, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}