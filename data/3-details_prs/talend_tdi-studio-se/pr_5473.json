{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE2MDc1MzIz", "number": 5473, "title": "feat(TDI-44915) access token feature", "bodyText": "What is the current behavior? (You can also link to an open issue here)\nThere are only HMAC and Service Account file authentication types.\nhttps://jira.talendforge.org/browse/TDI-44915\nWhat is the new behavior?\nProvide a new way of OAuth2 Token access.\nPlease check if the PR fulfills these requirements\n\n The commit message follows Talend standard\n Tests for the changes have been added (for bug fixes / features)\n Docs have been added / updated (for bug fixes / features) ?\n The code coverage on new code >75%\n The new code does not introduce new technical issues (sonar / eslint)\n\nWhat kind of change does this PR introduce?\n\n Bugfix\n Feature\n Code style update (formatting, local variables)\n Refactoring (no functional changes, no api changes)\n Build / CI related changes\n Other... Please describe:\n\nDoes this PR introduce a breaking change?\n\n Yes\n No\n\nIf this PR contains a breaking change, please describe the impact and migration path for existing applications: ...\nOther information:", "createdAt": "2020-11-05T13:52:14Z", "url": "https://github.com/Talend/tdi-studio-se/pull/5473", "merged": true, "mergeCommit": {"oid": "3c00488dc8a439d08894863b5e92d40c495303a9"}, "closed": true, "closedAt": "2020-11-27T08:04:15Z", "author": {"login": "mbasiuk-talend"}, "timelineItems": {"totalCount": 28, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdZicx8gH2gAyNTE2MDc1MzIzOjYxNDMyNGQxMWEyMGI2ZTg4OWMwYjc0YjAzMmU1OTRhNmVhNDBiMTI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdgQ9FmgFqTUzOTIxNjYxMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "614324d11a20b6e889c0b74b032e594a6ea40b12", "author": {"user": {"login": "mbasiuk-talend", "name": null}}, "url": "https://github.com/Talend/tdi-studio-se/commit/614324d11a20b6e889c0b74b032e594a6ea40b12", "committedDate": "2020-11-05T13:33:33Z", "message": "feat(TDI-44915): integrate Balazs POC"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3f4ecef02bc255578db537e8383bccc2b2b2788e", "author": {"user": {"login": "mbasiuk-talend", "name": null}}, "url": "https://github.com/Talend/tdi-studio-se/commit/3f4ecef02bc255578db537e8383bccc2b2b2788e", "committedDate": "2020-11-05T13:33:33Z", "message": "feat(TDI-44915): implement other BigQuery component with access token"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "44e196cbbbb04afcb666e848e6b6073c2eafabdd", "author": {"user": {"login": "mbasiuk-talend", "name": null}}, "url": "https://github.com/Talend/tdi-studio-se/commit/44e196cbbbb04afcb666e848e6b6073c2eafabdd", "committedDate": "2020-11-05T13:33:34Z", "message": "feat(TDI-44915): update BigQuery bulkexec with new common jet"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ad6bb2803c93953ab528550404c6d20d35149ed2", "author": {"user": {"login": "mbasiuk-talend", "name": null}}, "url": "https://github.com/Talend/tdi-studio-se/commit/ad6bb2803c93953ab528550404c6d20d35149ed2", "committedDate": "2020-11-05T13:35:26Z", "message": "feat(TDI-44915): update tGSBucketCreate"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b507ec3fec929ea5aba17009a2b32b3f1df0da6b", "author": {"user": {"login": "mbasiuk-talend", "name": null}}, "url": "https://github.com/Talend/tdi-studio-se/commit/b507ec3fec929ea5aba17009a2b32b3f1df0da6b", "committedDate": "2020-11-05T13:36:16Z", "message": "feat(TDI-44915): update tGSBucketDelete"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b77a6209b40fb2214174d3bc5644a9de8e6ca966", "author": {"user": {"login": "mbasiuk-talend", "name": null}}, "url": "https://github.com/Talend/tdi-studio-se/commit/b77a6209b40fb2214174d3bc5644a9de8e6ca966", "committedDate": "2020-11-05T13:37:02Z", "message": "feat(TDI-44915): update tGSBucketExist"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3568ab6e2657b49eefcbb878b86efe4a799e4aa6", "author": {"user": {"login": "mbasiuk-talend", "name": null}}, "url": "https://github.com/Talend/tdi-studio-se/commit/3568ab6e2657b49eefcbb878b86efe4a799e4aa6", "committedDate": "2020-11-05T13:37:36Z", "message": "feat(TDI-44915): update tGSBucketList"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c60a51870465c266c2b0fca48f77a33de7a44846", "author": {"user": {"login": "mbasiuk-talend", "name": null}}, "url": "https://github.com/Talend/tdi-studio-se/commit/c60a51870465c266c2b0fca48f77a33de7a44846", "committedDate": "2020-11-05T13:38:10Z", "message": "feat(TDI-44915): update connection and close part"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8ab0248b6000115d725b8558befa8bde3ebf89d9", "author": {"user": {"login": "mbasiuk-talend", "name": null}}, "url": "https://github.com/Talend/tdi-studio-se/commit/8ab0248b6000115d725b8558befa8bde3ebf89d9", "committedDate": "2020-11-05T13:38:58Z", "message": "feat(TDI-44915): update tGSCopy"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "435158dab609b9a43a5996b1fc000921220393ce", "author": {"user": {"login": "mbasiuk-talend", "name": null}}, "url": "https://github.com/Talend/tdi-studio-se/commit/435158dab609b9a43a5996b1fc000921220393ce", "committedDate": "2020-11-05T13:39:28Z", "message": "feat(TDI-44915): update tGSDelete"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "69c1f3bc489e970e5523d0fe0f8e122c0620c89e", "author": {"user": {"login": "mbasiuk-talend", "name": null}}, "url": "https://github.com/Talend/tdi-studio-se/commit/69c1f3bc489e970e5523d0fe0f8e122c0620c89e", "committedDate": "2020-11-05T13:40:02Z", "message": "feat(TDI-44915): update tGSGet"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e32bbb0be490cd53d0d418c9e7fc5ee087e05bdc", "author": {"user": {"login": "mbasiuk-talend", "name": null}}, "url": "https://github.com/Talend/tdi-studio-se/commit/e32bbb0be490cd53d0d418c9e7fc5ee087e05bdc", "committedDate": "2020-11-05T13:40:32Z", "message": "feat(TDI-44915): update tGSList"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9f430e0cb47a33884d687f270479e1272030bfbc", "author": {"user": {"login": "mbasiuk-talend", "name": null}}, "url": "https://github.com/Talend/tdi-studio-se/commit/9f430e0cb47a33884d687f270479e1272030bfbc", "committedDate": "2020-11-05T13:41:00Z", "message": "feat(TDI-44915): update tGSPut"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "08a1713a0372413716556d174b5a95d77e35144c", "author": {"user": {"login": "mbasiuk-talend", "name": null}}, "url": "https://github.com/Talend/tdi-studio-se/commit/08a1713a0372413716556d174b5a95d77e35144c", "committedDate": "2020-11-06T14:45:20Z", "message": "feat(TDI-44915): use proxy to communicate with GS"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI1MTc1MTIw", "url": "https://github.com/Talend/tdi-studio-se/pull/5473#pullrequestreview-525175120", "createdAt": "2020-11-06T14:03:50Z", "commit": {"oid": "9f430e0cb47a33884d687f270479e1272030bfbc"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQxNDowMzo1MVrOHuvQng==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQxNTozMTo1M1rOHuyuqQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODc3MDg0Ng==", "bodyText": "Maybe would be better to use comma instead of first \"or\"?", "url": "https://github.com/Talend/tdi-studio-se/pull/5473#discussion_r518770846", "createdAt": "2020-11-06T14:03:51Z", "author": {"login": "chmyga"}, "path": "main/plugins/org.talend.designer.components.localprovider/components/tBigQueryBulkExec/tBigQueryBulkExec_begin.javajet", "diffHunk": "@@ -213,9 +213,35 @@\n \t\t/* ----END-CREATING-CLIENT (Cloud API)---- */\r\n \r\n \t\tlong nb_line_<%=cid%> = 0;\r\n+  <%\r\n+  } else if (authMode.equals(\"TOKEN\")) {\r\n+    if (ElementParameterParser.canEncrypt(node, \"__ACCESS_TOKEN__\")) {%>\n+       final String decryptedAccessToken_<%=cid%> = routines.system.PasswordEncryptUtil.decryptPassword(<%=ElementParameterParser.getEncryptedValue(node, \"__ACCESS_TOKEN__\")%>);\n+  <%} else {%>\n+       final String decryptedAccessToken_<%=cid%> = <%= ElementParameterParser.getValue(node, \"__ACCESS_TOKEN__\")%>;\n+  <%}%>\r\n+\t/* ----START-CREATING-CLIENT (OAuth based Token)---- */\r\n+\t\tfinal String PROJECT_ID_<%=cid %> = <%=projectId %>;\r\n+\r\n+\t\tcom.google.api.client.auth.oauth2.Credential cred_<%=cid%> =\r\n+\t\tnew com.google.api.client.auth.oauth2.Credential(com.google.api.client.auth.oauth2.BearerToken.authorizationHeaderAccessMethod()).setFromTokenResponse(\r\n+\t\t\t(new com.google.api.client.auth.oauth2.TokenResponse()).setAccessToken(decryptedAccessToken_<%=cid%>));\r\n+\r\n+\t\tcom.google.api.services.bigquery.Bigquery bigqueryclient_<%=cid%> = null;\r\n+\t\tlong nb_line_<%=cid%> = 0;\r\n+\t\t<%\r\n+\t\tif(isLog4jEnabled){\r\n+\t\t%>\r\n+\t\t\tlog.info(\"<%=cid%> - Creating client.\");\r\n+\t\t<%\r\n+\t\t}\r\n+\t\t%>\r\n+\t\tbigqueryclient_<%=cid%> =\r\n+\t\tnew com.google.api.services.bigquery.Bigquery.Builder(new com.google.api.client.http.javanet.NetHttpTransport(), new com.google.api.client.json.jackson2.JacksonFactory(), cred_<%=cid%>).setApplicationName(\"Talend\").build();\r\n+\t/* ----END-CREATING-CLIENT (OAuth based Token)---- */\r\n \t<%\r\n \t} else {\r\n-\t\tthrow new IllegalArgumentException(\"authentication mode should be either \\\"SERVICEACCOUNT\\\" or \\\"OAUTH\\\", but it is \" + authMode);\r\n+\t\tthrow new IllegalArgumentException(\"authentication mode should be either \\\"SERVICEACCOUNT\\\" or \\\"OAUTH\\\" or \\\"TOKEN\\\", but it is \" + authMode);\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f430e0cb47a33884d687f270479e1272030bfbc"}, "originalPosition": 130}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODc5ODkxMQ==", "bodyText": "if ACCESS_TOKEN is going to be a function and we need to call the function we should call the function here and not to set final String decryptedAccessToken_<%=cid%> here.", "url": "https://github.com/Talend/tdi-studio-se/pull/5473#discussion_r518798911", "createdAt": "2020-11-06T14:49:11Z", "author": {"login": "chmyga"}, "path": "main/plugins/org.talend.designer.components.localprovider/components/tBigQueryBulkExec/tBigQueryBulkExec_begin.javajet", "diffHunk": "@@ -351,10 +360,13 @@\n \t\t\t\t}\r\n \t\t\t}\r\n \t\t<%}%>\r\n-\t\t\r\n+\r\n \t\t<%if (createTableIfNotExist) { %>\r\n-\t\t\t\r\n+\r\n \t\t\ttry {\r\n+\t\t\t\t<% if(authMode.equals(\"TOKEN\") && !ElementParameterParser.canEncrypt(node, \"__ACCESS_TOKEN__\")) { %>\r\n+\t\t\t\tcred_<%=cid%>.setAccessToken(decryptedAccessToken_<%=cid%>);\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "08a1713a0372413716556d174b5a95d77e35144c"}, "originalPosition": 242}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODgxNjQzNA==", "bodyText": "Don't we need to update this token from function(if it is set as function) in BigQuery Input?", "url": "https://github.com/Talend/tdi-studio-se/pull/5473#discussion_r518816434", "createdAt": "2020-11-06T15:15:42Z", "author": {"login": "chmyga"}, "path": "main/plugins/org.talend.designer.components.localprovider/components/tBigQueryInput/tBigQueryInput_begin.javajet", "diffHunk": "@@ -195,17 +199,23 @@\n \t\t\t\t// Store the refresh token for future use.\n \t\t\t\tjava.util.Properties storeProperties_<%=cid%> = new java.util.Properties();\n \t\t\t\tstoreProperties_<%=cid%>.setProperty(\"refreshtoken\", credential_<%=cid%>.getRefreshToken());\n-\t\t\t\tjava.io.FileOutputStream outputStream_<%=cid%> = new java.io.FileOutputStream(tokenFile_<%=cid %>);\n-\t\t\t\tstoreProperties_<%=cid%>.store(outputStream_<%=cid%>,null);\n-\t\t\t\tif (outputStream_<%=cid%> != null) {\n-\t\t\t\t    outputStream_<%=cid%>.close();\n-\t\t\t\t}\n-\n-\t\t\t\tbigqueryclient_<%=cid%> = new com.google.api.services.bigquery.Bigquery.Builder(new com.google.api.client.http.javanet.NetHttpTransport(),new com.google.api.client.json.jackson2.JacksonFactory(),credential_<%=cid%>).build();\n+        try (java.io.FileOutputStream outputStream_<%=cid%> = new java.io.FileOutputStream(tokenFile_<%=cid %>)) {\n+            storeProperties_<%=cid%>.store(outputStream_<%=cid%>,null);\n+        }\n \t\t\t}\n \t\t}\n-\n-\n+<%} else {\n+\n+  if (ElementParameterParser.canEncrypt(node, \"__ACCESS_TOKEN__\")) {%>\n+     final String decryptedAccessToken_<%=cid%> = routines.system.PasswordEncryptUtil.decryptPassword(<%=ElementParameterParser.getEncryptedValue(node, \"__ACCESS_TOKEN__\")%>);\n+  <%} else {%>\n+     final String decryptedAccessToken_<%=cid%> = <%= ElementParameterParser.getValue(node, \"__ACCESS_TOKEN__\")%>;\n+  <%}%>\n+\t\tcredential_<%=cid%> =\n+\t\t\tnew com.google.api.client.auth.oauth2.Credential(com.google.api.client.auth.oauth2.BearerToken.authorizationHeaderAccessMethod()).setFromTokenResponse(\n+\t\t\t\t(new com.google.api.client.auth.oauth2.TokenResponse()).setAccessToken(decryptedAccessToken_<%=cid%>));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "08a1713a0372413716556d174b5a95d77e35144c"}, "originalPosition": 119}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODgyMDExMQ==", "bodyText": "For BigQueryOutput this token should be updated as well, I guess.", "url": "https://github.com/Talend/tdi-studio-se/pull/5473#discussion_r518820111", "createdAt": "2020-11-06T15:20:23Z", "author": {"login": "chmyga"}, "path": "main/plugins/org.talend.designer.components.localprovider/components/tBigQuerySQLRow/tBigQuerySQLRow_begin.javajet", "diffHunk": "@@ -151,17 +155,27 @@\n \t\t\t\ttry(java.io.FileOutputStream outputStream_<%=cid%> = new java.io.FileOutputStream(tokenFile_<%=cid %>)) {\n \t\t\t\t\tstoreProperties_<%=cid%>.store(outputStream_<%=cid%>,null);\n \t\t\t\t}\n-\t\n-\t\t\t\tbigqueryclient_<%=cid%> = new com.google.api.services.bigquery.Bigquery.Builder(new com.google.api.client.http.javanet.NetHttpTransport(),new com.google.api.client.json.jackson2.JacksonFactory(),credential_<%=cid%>).build();\n \t\t\t}\n \t\t}\n+    <% } else {\n+\n+      if (ElementParameterParser.canEncrypt(node, \"__ACCESS_TOKEN__\")) {%>\n+         final String decryptedAccessToken_<%=cid%> = routines.system.PasswordEncryptUtil.decryptPassword(<%=ElementParameterParser.getEncryptedValue(node, \"__ACCESS_TOKEN__\")%>);\n+      <%} else {%>\n+         final String decryptedAccessToken_<%=cid%> = <%= ElementParameterParser.getValue(node, \"__ACCESS_TOKEN__\")%>;\n+      <%}%>\n+    \t\tcredential_<%=cid%> =\n+    \t\t\tnew com.google.api.client.auth.oauth2.Credential(com.google.api.client.auth.oauth2.BearerToken.authorizationHeaderAccessMethod()).setFromTokenResponse(\n+    \t\t\t\t(new com.google.api.client.auth.oauth2.TokenResponse()).setAccessToken(decryptedAccessToken_<%=cid%>));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "08a1713a0372413716556d174b5a95d77e35144c"}, "originalPosition": 143}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODgyMzAzMg==", "bodyText": "Refresh the token from function.", "url": "https://github.com/Talend/tdi-studio-se/pull/5473#discussion_r518823032", "createdAt": "2020-11-06T15:24:45Z", "author": {"login": "chmyga"}, "path": "main/plugins/org.talend.designer.components.localprovider/components/tBigQuerySQLRow/tBigQuerySQLRow_begin.javajet", "diffHunk": "@@ -151,17 +155,27 @@\n \t\t\t\ttry(java.io.FileOutputStream outputStream_<%=cid%> = new java.io.FileOutputStream(tokenFile_<%=cid %>)) {\n \t\t\t\t\tstoreProperties_<%=cid%>.store(outputStream_<%=cid%>,null);\n \t\t\t\t}\n-\t\n-\t\t\t\tbigqueryclient_<%=cid%> = new com.google.api.services.bigquery.Bigquery.Builder(new com.google.api.client.http.javanet.NetHttpTransport(),new com.google.api.client.json.jackson2.JacksonFactory(),credential_<%=cid%>).build();\n \t\t\t}\n \t\t}\n+    <% } else {\n+\n+      if (ElementParameterParser.canEncrypt(node, \"__ACCESS_TOKEN__\")) {%>\n+         final String decryptedAccessToken_<%=cid%> = routines.system.PasswordEncryptUtil.decryptPassword(<%=ElementParameterParser.getEncryptedValue(node, \"__ACCESS_TOKEN__\")%>);\n+      <%} else {%>\n+         final String decryptedAccessToken_<%=cid%> = <%= ElementParameterParser.getValue(node, \"__ACCESS_TOKEN__\")%>;\n+      <%}%>\n+    \t\tcredential_<%=cid%> =\n+    \t\t\tnew com.google.api.client.auth.oauth2.Credential(com.google.api.client.auth.oauth2.BearerToken.authorizationHeaderAccessMethod()).setFromTokenResponse(\n+    \t\t\t\t(new com.google.api.client.auth.oauth2.TokenResponse()).setAccessToken(decryptedAccessToken_<%=cid%>));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f430e0cb47a33884d687f270479e1272030bfbc"}, "originalPosition": 143}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODgyNzY4OQ==", "bodyText": "Why did you remove check from existing connection? it should be shown if existing connection also uses service account authentication(or oauth token as well, I guess).", "url": "https://github.com/Talend/tdi-studio-se/pull/5473#discussion_r518827689", "createdAt": "2020-11-06T15:31:53Z", "author": {"login": "chmyga"}, "path": "main/plugins/org.talend.designer.components.localprovider/components/tGSPut/tGSPut_java.xml", "diffHunk": "@@ -158,16 +187,16 @@\n     </PARAMETERS>\n \n     <ADVANCED_PARAMETERS>\n-\t\n+\n \t\t<PARAMETER\n                 NAME=\"PART_SIZE\"\n                 FIELD=\"TEXT\"\n                 NUM_ROW=\"1\"\n-\t\t\t\tSHOW_IF=\"((USE_EXISTING_CONNECTION == 'true') AND (#LINK@NODE.CONNECTION.AUTH_TYPE == 'SERVICE_ACCOUNT')) OR ((USE_EXISTING_CONNECTION == 'false') AND (AUTH_TYPE == 'SERVICE_ACCOUNT'))\"\n+\t\t\t\tSHOW_IF=\"((AUTH_TYPE == 'SERVICE_ACCOUNT') OR (AUTH_TYPE == 'TOKEN'))\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f430e0cb47a33884d687f270479e1272030bfbc"}, "originalPosition": 54}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "383bcd21fb60d16774766f307e10dbf5cf6575d1", "author": {"user": {"login": "mbasiuk-talend", "name": null}}, "url": "https://github.com/Talend/tdi-studio-se/commit/383bcd21fb60d16774766f307e10dbf5cf6575d1", "committedDate": "2020-11-09T09:22:10Z", "message": "feat(TDI-44915): update code due to PR comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d0fbc877ef40d06b1373b4400bc59e5bcb2959cc", "author": {"user": {"login": "mbasiuk-talend", "name": null}}, "url": "https://github.com/Talend/tdi-studio-se/commit/d0fbc877ef40d06b1373b4400bc59e5bcb2959cc", "committedDate": "2020-11-10T09:18:12Z", "message": "feat(TDI-44915): update Input code generation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI3MDMyMDQ0", "url": "https://github.com/Talend/tdi-studio-se/pull/5473#pullrequestreview-527032044", "createdAt": "2020-11-10T09:54:06Z", "commit": {"oid": "d0fbc877ef40d06b1373b4400bc59e5bcb2959cc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4dc39d61b34b837cb4ee534a1622f50a12d68cf3", "author": {"user": {"login": "mbasiuk-talend", "name": null}}, "url": "https://github.com/Talend/tdi-studio-se/commit/4dc39d61b34b837cb4ee534a1622f50a12d68cf3", "committedDate": "2020-11-20T10:42:43Z", "message": "feat(TDI-44915): fix tGSPut xml definition"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM1MzI0MTY3", "url": "https://github.com/Talend/tdi-studio-se/pull/5473#pullrequestreview-535324167", "createdAt": "2020-11-20T10:53:21Z", "commit": {"oid": "4dc39d61b34b837cb4ee534a1622f50a12d68cf3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "790637c3201d8e01ace9fe221cc95256c9cd4eb3", "author": {"user": {"login": "mbasiuk-talend", "name": null}}, "url": "https://github.com/Talend/tdi-studio-se/commit/790637c3201d8e01ace9fe221cc95256c9cd4eb3", "committedDate": "2020-11-24T10:32:54Z", "message": "feat(TDI-44915): update BigQuery Output and generic connection"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM3NDA0MzIz", "url": "https://github.com/Talend/tdi-studio-se/pull/5473#pullrequestreview-537404323", "createdAt": "2020-11-24T11:36:31Z", "commit": {"oid": "790637c3201d8e01ace9fe221cc95256c9cd4eb3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1a11086e0df15abff32c3977c8cb619bc8809da3", "author": {"user": {"login": "mbasiuk-talend", "name": null}}, "url": "https://github.com/Talend/tdi-studio-se/commit/1a11086e0df15abff32c3977c8cb619bc8809da3", "committedDate": "2020-11-25T08:07:28Z", "message": "feat(TDI-44915): fix _end javajet parts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1a297ff7e4fe60fe5afbd33ef0be643f368718a3", "author": {"user": {"login": "mbasiuk-talend", "name": null}}, "url": "https://github.com/Talend/tdi-studio-se/commit/1a297ff7e4fe60fe5afbd33ef0be643f368718a3", "committedDate": "2020-11-25T15:52:23Z", "message": "feat(TDI-44915): fix bigqueryoutput config mappings"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a769afe69bbfd8bc73b8e6ad6d79d0fdc19df368", "author": {"user": {"login": "mbasiuk-talend", "name": null}}, "url": "https://github.com/Talend/tdi-studio-se/commit/a769afe69bbfd8bc73b8e6ad6d79d0fdc19df368", "committedDate": "2020-11-26T09:23:59Z", "message": "feat(TDI-44915): fix tGSBuckerCreate dependencies"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM5MTk5MjM5", "url": "https://github.com/Talend/tdi-studio-se/pull/5473#pullrequestreview-539199239", "createdAt": "2020-11-26T10:45:19Z", "commit": {"oid": "1a11086e0df15abff32c3977c8cb619bc8809da3"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNlQxMDo0NToxOVrOH6V2cQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNlQxMDo0ODowNVrOH6V9Gg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDkzNzQ1Nw==", "bodyText": "Maybe add \"break\" after this, so no need to iterate further?", "url": "https://github.com/Talend/tdi-studio-se/pull/5473#discussion_r530937457", "createdAt": "2020-11-26T10:45:19Z", "author": {"login": "dmytrogrygorenko"}, "path": "main/plugins/org.talend.designer.components.localprovider/components/tGSDelete/tGSDelete_end.javajet", "diffHunk": "@@ -19,16 +19,19 @@ imports=\"\n \r\n \tString connection = ElementParameterParser.getValue(node,\"__CONNECTION__\");\r\n \tString authType = ElementParameterParser.getValue(node, \"__AUTH_TYPE__\");\r\n-  boolean useHMACAuthType = false;\r\n-\r\n-\tList< ? extends INode> nodes =  node.getProcess().getNodesOfType(\"tGSConnection\");\r\n-\tfor (INode ne : nodes) {\r\n-\t\tif (connection.equals(ne.getUniqueName())) {\r\n-\t\t\tString authTypeInConnectionComponent = ElementParameterParser.getValue(ne, \"__AUTH_TYPE__\");\r\n-\t\t\tuseHMACAuthType = \"USER_ACCOUNT_HMAC\".equals(authTypeInConnectionComponent);\r\n-\t\t}\r\n-\t}\r\n-\r\n+\tboolean useHMACAuthType = false;\n+\tif((\"true\").equals(useExistingConn)) {\n+\t\tList< ? extends INode> nodes =  node.getProcess().getNodesOfType(\"tGSConnection\");\n+\t\tfor (INode ne : nodes) {\n+\t\t\tif (connection.equals(ne.getUniqueName())) {\n+\t\t\t\tString authTypeInConnectionComponent = ElementParameterParser.getValue(ne, \"__AUTH_TYPE__\");\n+\t\t\t\tuseHMACAuthType = \"USER_ACCOUNT_HMAC\".equals(authTypeInConnectionComponent);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1a11086e0df15abff32c3977c8cb619bc8809da3"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDkzNzgzOA==", "bodyText": "Same here.", "url": "https://github.com/Talend/tdi-studio-se/pull/5473#discussion_r530937838", "createdAt": "2020-11-26T10:45:57Z", "author": {"login": "dmytrogrygorenko"}, "path": "main/plugins/org.talend.designer.components.localprovider/components/tGSGet/tGSGet_end.javajet", "diffHunk": "@@ -21,16 +21,19 @@ imports=\"\n \tList<Map<String, String>> keys = (List<Map<String,String>>)ElementParameterParser.getObjectValue(node, \"__KEYS__\");\r\n \tString connection = ElementParameterParser.getValue(node,\"__CONNECTION__\");\r\n \tString authType = ElementParameterParser.getValue(node, \"__AUTH_TYPE__\");\r\n-  boolean useHMACAuthType = false;\r\n-\r\n-\tList< ? extends INode> nodes =  node.getProcess().getNodesOfType(\"tGSConnection\");\r\n-\tfor (INode ne : nodes) {\r\n-\t\tif (connection.equals(ne.getUniqueName())) {\r\n-\t\t\tString authTypeInConnectionComponent = ElementParameterParser.getValue(ne, \"__AUTH_TYPE__\");\r\n-\t\t\tuseHMACAuthType = \"USER_ACCOUNT_HMAC\".equals(authTypeInConnectionComponent);\r\n-\t\t}\r\n-\t}\r\n-\r\n+        boolean useHMACAuthType = false;\n+        if((\"true\").equals(useExistingConn)) {\n+            List< ? extends INode> nodes =  node.getProcess().getNodesOfType(\"tGSConnection\");\n+            for (INode ne : nodes) {\n+                if (connection.equals(ne.getUniqueName())) {\n+                        String authTypeInConnectionComponent = ElementParameterParser.getValue(ne, \"__AUTH_TYPE__\");\n+                        useHMACAuthType = \"USER_ACCOUNT_HMAC\".equals(authTypeInConnectionComponent);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1a11086e0df15abff32c3977c8cb619bc8809da3"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDkzOTE2Mg==", "bodyText": "And here.", "url": "https://github.com/Talend/tdi-studio-se/pull/5473#discussion_r530939162", "createdAt": "2020-11-26T10:48:05Z", "author": {"login": "dmytrogrygorenko"}, "path": "main/plugins/org.talend.designer.components.localprovider/components/tGSList/tGSList_end.javajet", "diffHunk": "@@ -19,16 +19,19 @@ imports=\"\n \tList<Map<String, String>> buckets = (List<Map<String,String>>)ElementParameterParser.getObjectValue(node, \"__BUCKETS__\");\r\n \tString connection = ElementParameterParser.getValue(node,\"__CONNECTION__\");\r\n \tString authType = ElementParameterParser.getValue(node, \"__AUTH_TYPE__\");\r\n-  boolean useHMACAuthType = false;\r\n-\r\n-  List< ? extends INode> nodes =  node.getProcess().getNodesOfType(\"tGSConnection\");\r\n-  for (INode ne : nodes) {\r\n-    if (connection.equals(ne.getUniqueName())) {\r\n-      String authTypeInConnectionComponent = ElementParameterParser.getValue(ne, \"__AUTH_TYPE__\");\r\n-      useHMACAuthType = \"USER_ACCOUNT_HMAC\".equals(authTypeInConnectionComponent);\r\n-    }\r\n-  }\r\n-\r\n+    boolean useHMACAuthType = false;\n+    if((\"true\").equals(useExistingConn)) {\n+        List< ? extends INode> nodes =  node.getProcess().getNodesOfType(\"tGSConnection\");\n+        for (INode ne : nodes) {\n+                if (connection.equals(ne.getUniqueName())) {\n+                        String authTypeInConnectionComponent = ElementParameterParser.getValue(ne, \"__AUTH_TYPE__\");\n+                        useHMACAuthType = \"USER_ACCOUNT_HMAC\".equals(authTypeInConnectionComponent);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1a11086e0df15abff32c3977c8cb619bc8809da3"}, "originalPosition": 20}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "67255ada03a2ff1c98e545bf49b3b1db2d72583d", "author": {"user": {"login": "mbasiuk-talend", "name": null}}, "url": "https://github.com/Talend/tdi-studio-se/commit/67255ada03a2ff1c98e545bf49b3b1db2d72583d", "committedDate": "2020-11-26T11:05:44Z", "message": "feat(TDI-44915): fix PR comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM5MjE2NjEz", "url": "https://github.com/Talend/tdi-studio-se/pull/5473#pullrequestreview-539216613", "createdAt": "2020-11-26T11:08:01Z", "commit": {"oid": "67255ada03a2ff1c98e545bf49b3b1db2d72583d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4710, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}