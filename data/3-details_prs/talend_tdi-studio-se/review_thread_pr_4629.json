{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA2MDg0NjQ4", "number": 4629, "reviewThreads": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQxMDoyMToxOVrOD0Kqag==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQwNDoxNzoyOVrOD-d-7g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU2MDI3MjQyOnYy", "diffSide": "RIGHT", "path": "main/plugins/org.talend.designer.components.localprovider/components/tDB2Output/tDB2Output_end.javajet", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQxMDoyMToxOVrOGI-OeQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQxMjozNzoyNVrOGJDbQA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjA2MTMwNQ==", "bodyText": "IMO it is good idea to put break here", "url": "https://github.com/Talend/tdi-studio-se/pull/4629#discussion_r412061305", "createdAt": "2020-04-21T10:21:19Z", "author": {"login": "dmytro-sylaiev"}, "path": "main/plugins/org.talend.designer.components.localprovider/components/tDB2Output/tDB2Output_end.javajet", "diffHunk": "@@ -30,6 +34,16 @@ imports=\"\n         IConnection rejectConn = rejectConns.get(0);\n         rejectConnName = rejectConn.getName();\n     }\n+\t\n+    String connection = ElementParameterParser.getValue(node,\"__CONNECTION__\");\n+    if(useExistingConn) {\n+        List<? extends INode> nodes = process.getNodesOfType(\"tDB2Connection\");\n+        for (INode ne:nodes) {\n+            if (connection.equals(ne.getUniqueName())) {\n+                setAutoCommit = \"true\".equals(ElementParameterParser.getValue(ne, \"__AUTO_COMMIT__\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "42ae467c51c2e049b79de8b8c580d6e5613239d5"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjE0NjQ5Ng==", "bodyText": "Added \"break\" line in all similar cycles.", "url": "https://github.com/Talend/tdi-studio-se/pull/4629#discussion_r412146496", "createdAt": "2020-04-21T12:37:25Z", "author": {"login": "dmytrogrygorenko"}, "path": "main/plugins/org.talend.designer.components.localprovider/components/tDB2Output/tDB2Output_end.javajet", "diffHunk": "@@ -30,6 +34,16 @@ imports=\"\n         IConnection rejectConn = rejectConns.get(0);\n         rejectConnName = rejectConn.getName();\n     }\n+\t\n+    String connection = ElementParameterParser.getValue(node,\"__CONNECTION__\");\n+    if(useExistingConn) {\n+        List<? extends INode> nodes = process.getNodesOfType(\"tDB2Connection\");\n+        for (INode ne:nodes) {\n+            if (connection.equals(ne.getUniqueName())) {\n+                setAutoCommit = \"true\".equals(ElementParameterParser.getValue(ne, \"__AUTO_COMMIT__\"));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjA2MTMwNQ=="}, "originalCommit": {"oid": "42ae467c51c2e049b79de8b8c580d6e5613239d5"}, "originalPosition": 33}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU2MDI3NDMzOnYy", "diffSide": "RIGHT", "path": "main/plugins/org.talend.designer.components.localprovider/components/tEXAOutput/tEXAOutput_end.javajet", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQxMDoyMTo0NFrOGI-Pdg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQxMjozODoxOFrOGJDdnQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjA2MTU1OA==", "bodyText": "indentation is broken", "url": "https://github.com/Talend/tdi-studio-se/pull/4629#discussion_r412061558", "createdAt": "2020-04-21T10:21:44Z", "author": {"login": "dmytro-sylaiev"}, "path": "main/plugins/org.talend.designer.components.localprovider/components/tEXAOutput/tEXAOutput_end.javajet", "diffHunk": "@@ -5,6 +5,7 @@ imports=\"\n     org.talend.core.model.process.INode\n     org.talend.core.model.process.ElementParameterParser\n     org.talend.core.model.process.IConnection\n+\torg.talend.core.model.process.IProcess", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "42ae467c51c2e049b79de8b8c580d6e5613239d5"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjE0NzEwMQ==", "bodyText": "Fixed", "url": "https://github.com/Talend/tdi-studio-se/pull/4629#discussion_r412147101", "createdAt": "2020-04-21T12:38:18Z", "author": {"login": "dmytrogrygorenko"}, "path": "main/plugins/org.talend.designer.components.localprovider/components/tEXAOutput/tEXAOutput_end.javajet", "diffHunk": "@@ -5,6 +5,7 @@ imports=\"\n     org.talend.core.model.process.INode\n     org.talend.core.model.process.ElementParameterParser\n     org.talend.core.model.process.IConnection\n+\torg.talend.core.model.process.IProcess", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjA2MTU1OA=="}, "originalCommit": {"oid": "42ae467c51c2e049b79de8b8c580d6e5613239d5"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU2MDI4MTc3OnYy", "diffSide": "RIGHT", "path": "main/plugins/org.talend.designer.components.localprovider/components/templates/DB/Output/DBOutputEndGlobalVars.javajet", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQxMDoyMzoxOFrOGI-Tpg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQxMjozODo0MFrOGJDeiA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjA2MjYzMA==", "bodyText": "Maybe need to remove extra %><% here", "url": "https://github.com/Talend/tdi-studio-se/pull/4629#discussion_r412062630", "createdAt": "2020-04-21T10:23:18Z", "author": {"login": "dmytro-sylaiev"}, "path": "main/plugins/org.talend.designer.components.localprovider/components/templates/DB/Output/DBOutputEndGlobalVars.javajet", "diffHunk": "@@ -47,21 +47,30 @@ imports=\"\n         globalMap.put(\"<%=cid %>_NB_LINE_DELETED\",nb_line_deleted_<%=cid%>);\n         globalMap.put(\"<%=cid %>_NB_LINE_REJECTED\", nb_line_rejected_<%=cid%>);\n     \n+    <%\n+    }\n+    %>\n+\n+\t<%\n+\tif(!useExistingConnection || (useExistingConnection && setAutoCommit)){\n+\t\t%>\n+\t\t<%", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "42ae467c51c2e049b79de8b8c580d6e5613239d5"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjE0NzMzNg==", "bodyText": "Removed extra %><%", "url": "https://github.com/Talend/tdi-studio-se/pull/4629#discussion_r412147336", "createdAt": "2020-04-21T12:38:40Z", "author": {"login": "dmytrogrygorenko"}, "path": "main/plugins/org.talend.designer.components.localprovider/components/templates/DB/Output/DBOutputEndGlobalVars.javajet", "diffHunk": "@@ -47,21 +47,30 @@ imports=\"\n         globalMap.put(\"<%=cid %>_NB_LINE_DELETED\",nb_line_deleted_<%=cid%>);\n         globalMap.put(\"<%=cid %>_NB_LINE_REJECTED\", nb_line_rejected_<%=cid%>);\n     \n+    <%\n+    }\n+    %>\n+\n+\t<%\n+\tif(!useExistingConnection || (useExistingConnection && setAutoCommit)){\n+\t\t%>\n+\t\t<%", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjA2MjYzMA=="}, "originalCommit": {"oid": "42ae467c51c2e049b79de8b8c580d6e5613239d5"}, "originalPosition": 11}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU2MDI4MjYzOnYy", "diffSide": "RIGHT", "path": "main/plugins/org.talend.designer.components.localprovider/components/templates/DB/Output/DBOutputEndGlobalVars.javajet", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQxMDoyMzozMVrOGI-UMw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQxMjozODo1MlrOGJDfKw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjA2Mjc3MQ==", "bodyText": "and here also", "url": "https://github.com/Talend/tdi-studio-se/pull/4629#discussion_r412062771", "createdAt": "2020-04-21T10:23:31Z", "author": {"login": "dmytro-sylaiev"}, "path": "main/plugins/org.talend.designer.components.localprovider/components/templates/DB/Output/DBOutputEndGlobalVars.javajet", "diffHunk": "@@ -47,21 +47,30 @@ imports=\"\n         globalMap.put(\"<%=cid %>_NB_LINE_DELETED\",nb_line_deleted_<%=cid%>);\n         globalMap.put(\"<%=cid %>_NB_LINE_REJECTED\", nb_line_rejected_<%=cid%>);\n     \n+    <%\n+    }\n+    %>\n+\n+\t<%\n+\tif(!useExistingConnection || (useExistingConnection && setAutoCommit)){\n+\t\t%>\n+\t\t<%\n+\t\tif ((\"INSERT\").equals(dataAction)) {\n+\t\t\tdbLog.state().logInsertedLines(dbLog.var(\"nb_line_inserted\"));\n+\t\t}else if ((\"UPDATE\").equals(dataAction)) {\n+\t\t\tdbLog.state().logUpdatedLines(dbLog.var(\"nb_line_update\"));\n+\t\t}else if ((\"DELETE\").equals(dataAction)) {\n+\t\t\tdbLog.state().logDeletedLines(dbLog.var(\"nb_line_deleted\"));\n+\t\t}else if(\"UPDATE_OR_INSERT\".equals(dataAction)){\n+\t\t\tdbLog.state().logUpdatedLines(dbLog.var(\"nb_line_update\"));\n+\t\t\tdbLog.state().logInsertedLines(dbLog.var(\"nb_line_inserted\"));\n+\t\t}else if(\"INSERT_OR_UPDATE\".equals(dataAction)){\n+\t\t\tdbLog.state().logInsertedLines(dbLog.var(\"nb_line_inserted\"));\n+\t\t\tdbLog.state().logUpdatedLines(dbLog.var(\"nb_line_update\"));\n+\t\t}%>\n+\t<%", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "42ae467c51c2e049b79de8b8c580d6e5613239d5"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjE0NzQ5OQ==", "bodyText": "Removed extra %><%", "url": "https://github.com/Talend/tdi-studio-se/pull/4629#discussion_r412147499", "createdAt": "2020-04-21T12:38:52Z", "author": {"login": "dmytrogrygorenko"}, "path": "main/plugins/org.talend.designer.components.localprovider/components/templates/DB/Output/DBOutputEndGlobalVars.javajet", "diffHunk": "@@ -47,21 +47,30 @@ imports=\"\n         globalMap.put(\"<%=cid %>_NB_LINE_DELETED\",nb_line_deleted_<%=cid%>);\n         globalMap.put(\"<%=cid %>_NB_LINE_REJECTED\", nb_line_rejected_<%=cid%>);\n     \n+    <%\n+    }\n+    %>\n+\n+\t<%\n+\tif(!useExistingConnection || (useExistingConnection && setAutoCommit)){\n+\t\t%>\n+\t\t<%\n+\t\tif ((\"INSERT\").equals(dataAction)) {\n+\t\t\tdbLog.state().logInsertedLines(dbLog.var(\"nb_line_inserted\"));\n+\t\t}else if ((\"UPDATE\").equals(dataAction)) {\n+\t\t\tdbLog.state().logUpdatedLines(dbLog.var(\"nb_line_update\"));\n+\t\t}else if ((\"DELETE\").equals(dataAction)) {\n+\t\t\tdbLog.state().logDeletedLines(dbLog.var(\"nb_line_deleted\"));\n+\t\t}else if(\"UPDATE_OR_INSERT\".equals(dataAction)){\n+\t\t\tdbLog.state().logUpdatedLines(dbLog.var(\"nb_line_update\"));\n+\t\t\tdbLog.state().logInsertedLines(dbLog.var(\"nb_line_inserted\"));\n+\t\t}else if(\"INSERT_OR_UPDATE\".equals(dataAction)){\n+\t\t\tdbLog.state().logInsertedLines(dbLog.var(\"nb_line_inserted\"));\n+\t\t\tdbLog.state().logUpdatedLines(dbLog.var(\"nb_line_update\"));\n+\t\t}%>\n+\t<%", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjA2Mjc3MQ=="}, "originalCommit": {"oid": "42ae467c51c2e049b79de8b8c580d6e5613239d5"}, "originalPosition": 25}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU2MDI4MzI0OnYy", "diffSide": "RIGHT", "path": "main/plugins/org.talend.designer.components.localprovider/components/templates/DB/Output/DBOutputEndGlobalVars.javajet", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQxMDoyMzo0MVrOGI-Uig==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQxMjozOTowMlrOGJDfpQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjA2Mjg1OA==", "bodyText": "and here", "url": "https://github.com/Talend/tdi-studio-se/pull/4629#discussion_r412062858", "createdAt": "2020-04-21T10:23:41Z", "author": {"login": "dmytro-sylaiev"}, "path": "main/plugins/org.talend.designer.components.localprovider/components/templates/DB/Output/DBOutputEndGlobalVars.javajet", "diffHunk": "@@ -47,21 +47,30 @@ imports=\"\n         globalMap.put(\"<%=cid %>_NB_LINE_DELETED\",nb_line_deleted_<%=cid%>);\n         globalMap.put(\"<%=cid %>_NB_LINE_REJECTED\", nb_line_rejected_<%=cid%>);\n     \n+    <%\n+    }\n+    %>\n+\n+\t<%\n+\tif(!useExistingConnection || (useExistingConnection && setAutoCommit)){\n+\t\t%>\n+\t\t<%\n+\t\tif ((\"INSERT\").equals(dataAction)) {\n+\t\t\tdbLog.state().logInsertedLines(dbLog.var(\"nb_line_inserted\"));\n+\t\t}else if ((\"UPDATE\").equals(dataAction)) {\n+\t\t\tdbLog.state().logUpdatedLines(dbLog.var(\"nb_line_update\"));\n+\t\t}else if ((\"DELETE\").equals(dataAction)) {\n+\t\t\tdbLog.state().logDeletedLines(dbLog.var(\"nb_line_deleted\"));\n+\t\t}else if(\"UPDATE_OR_INSERT\".equals(dataAction)){\n+\t\t\tdbLog.state().logUpdatedLines(dbLog.var(\"nb_line_update\"));\n+\t\t\tdbLog.state().logInsertedLines(dbLog.var(\"nb_line_inserted\"));\n+\t\t}else if(\"INSERT_OR_UPDATE\".equals(dataAction)){\n+\t\t\tdbLog.state().logInsertedLines(dbLog.var(\"nb_line_inserted\"));\n+\t\t\tdbLog.state().logUpdatedLines(dbLog.var(\"nb_line_update\"));\n+\t\t}%>\n+\t<%\n+\t}%>\n \t<%", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "42ae467c51c2e049b79de8b8c580d6e5613239d5"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjE0NzYyMQ==", "bodyText": "Removed extra %><%", "url": "https://github.com/Talend/tdi-studio-se/pull/4629#discussion_r412147621", "createdAt": "2020-04-21T12:39:02Z", "author": {"login": "dmytrogrygorenko"}, "path": "main/plugins/org.talend.designer.components.localprovider/components/templates/DB/Output/DBOutputEndGlobalVars.javajet", "diffHunk": "@@ -47,21 +47,30 @@ imports=\"\n         globalMap.put(\"<%=cid %>_NB_LINE_DELETED\",nb_line_deleted_<%=cid%>);\n         globalMap.put(\"<%=cid %>_NB_LINE_REJECTED\", nb_line_rejected_<%=cid%>);\n     \n+    <%\n+    }\n+    %>\n+\n+\t<%\n+\tif(!useExistingConnection || (useExistingConnection && setAutoCommit)){\n+\t\t%>\n+\t\t<%\n+\t\tif ((\"INSERT\").equals(dataAction)) {\n+\t\t\tdbLog.state().logInsertedLines(dbLog.var(\"nb_line_inserted\"));\n+\t\t}else if ((\"UPDATE\").equals(dataAction)) {\n+\t\t\tdbLog.state().logUpdatedLines(dbLog.var(\"nb_line_update\"));\n+\t\t}else if ((\"DELETE\").equals(dataAction)) {\n+\t\t\tdbLog.state().logDeletedLines(dbLog.var(\"nb_line_deleted\"));\n+\t\t}else if(\"UPDATE_OR_INSERT\".equals(dataAction)){\n+\t\t\tdbLog.state().logUpdatedLines(dbLog.var(\"nb_line_update\"));\n+\t\t\tdbLog.state().logInsertedLines(dbLog.var(\"nb_line_inserted\"));\n+\t\t}else if(\"INSERT_OR_UPDATE\".equals(dataAction)){\n+\t\t\tdbLog.state().logInsertedLines(dbLog.var(\"nb_line_inserted\"));\n+\t\t\tdbLog.state().logUpdatedLines(dbLog.var(\"nb_line_update\"));\n+\t\t}%>\n+\t<%\n+\t}%>\n \t<%", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjA2Mjg1OA=="}, "originalCommit": {"oid": "42ae467c51c2e049b79de8b8c580d6e5613239d5"}, "originalPosition": 27}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY2ODI5NTUwOnYy", "diffSide": "LEFT", "path": "main/plugins/org.talend.designer.components.localprovider/components/templates/DB/Output/DBOutputEndGlobalVars.javajet", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQwNDoxNzoyOVrOGYlqtg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQwNDoxNzoyOVrOGYlqtg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODQzNjE1MA==", "bodyText": "LGTM, some other about the jira:\nif we remove the log for commit, it will never appear if not auto commit, yes, is expected, but some customer may don't like it.", "url": "https://github.com/Talend/tdi-studio-se/pull/4629#discussion_r428436150", "createdAt": "2020-05-21T04:17:29Z", "author": {"login": "wwang-talend"}, "path": "main/plugins/org.talend.designer.components.localprovider/components/templates/DB/Output/DBOutputEndGlobalVars.javajet", "diffHunk": "@@ -47,20 +47,25 @@ imports=\"\n         globalMap.put(\"<%=cid %>_NB_LINE_DELETED\",nb_line_deleted_<%=cid%>);\n         globalMap.put(\"<%=cid %>_NB_LINE_REJECTED\", nb_line_rejected_<%=cid%>);\n     \n+    <%\n+    }\n+    %>\n+\n \t<%\n-\t}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e6c62ea082cecf78a9cb7869242d819f0609e425"}, "originalPosition": 9}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4515, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}