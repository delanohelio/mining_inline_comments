{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ2MTM4Mjgx", "number": 4901, "title": "fix(TUP-26347):Bug in tMap component using Talend Studio on Mac", "bodyText": "https://jira.talendforge.org/browse/TUP-26347\nWhat is the current behavior? (You can also link to an open issue here)\nWhat is the new behavior?\nPlease check if the PR fulfills these requirements\n\n The commit message follows Talend standard\n Tests for the changes have been added (for bug fixes / features)\n Docs have been added / updated (for bug fixes / features) ?\n The code coverage on new code >75%\n The new code does not introduce new technical issues (sonar / eslint)\n\nWhat kind of change does this PR introduce?\n\n Bugfix\n Feature\n Code style update (formatting, local variables)\n Refactoring (no functional changes, no api changes)\n Build / CI related changes\n Other... Please describe:\n\nDoes this PR introduce a breaking change?\n\n Yes\n No\n\nIf this PR contains a breaking change, please describe the impact and migration path for existing applications: ...\nOther information:", "createdAt": "2020-07-08T10:12:09Z", "url": "https://github.com/Talend/tdi-studio-se/pull/4901", "merged": true, "mergeCommit": {"oid": "9b8cd9062ddfdd0198bc6338f11fb700df94be25"}, "closed": true, "closedAt": "2020-07-08T14:30:57Z", "author": {"login": "jding-tlnd"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcy3mTtgH2gAyNDQ2MTM4MjgxOjc3YWM4NmZjYzliYzRjODM1ZDMwMjNhM2Q2OTZiYWQ4ODEzODZkYzI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcy7V7pgFqTQ0NDgyNTUxMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "77ac86fcc9bc4c835d3023a3d696bad881386dc2", "author": {"user": {"login": "jding-tlnd", "name": "Jane Ding"}}, "url": "https://github.com/Talend/tdi-studio-se/commit/77ac86fcc9bc4c835d3023a3d696bad881386dc2", "committedDate": "2020-07-08T10:08:55Z", "message": "fix(TUP-26347):Bug in tMap component using Talend Studio on Mac\nhttps://jira.talendforge.org/browse/TUP-26347"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ0NjYzNTkz", "url": "https://github.com/Talend/tdi-studio-se/pull/4901#pullrequestreview-444663593", "createdAt": "2020-07-08T11:44:26Z", "commit": {"oid": "77ac86fcc9bc4c835d3023a3d696bad881386dc2"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQxMTo0NDoyNlrOGukHOQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQxMTo0NDoyNlrOGukHOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTQ3OTM1Mw==", "bodyText": "It is better to use try finally block here, change the default value of customSized in try block, then set back the default value of customSized in finally block.", "url": "https://github.com/Talend/tdi-studio-se/pull/4901#discussion_r451479353", "createdAt": "2020-07-08T11:44:26Z", "author": {"login": "cmeng-talend"}, "path": "main/plugins/org.talend.designer.mapper/src/main/java/org/talend/designer/mapper/ui/visualmap/table/DataMapTableView.java", "diffHunk": "@@ -3531,20 +3531,26 @@ protected Object openDialogBox(Control cellEditorWindow) {\n                             }\n                         }\n \n-                        // avoid fire UIManager#handleEvent execute afterOperationListener\n-                        // resize will fire focuseLost to applyEditorValue remove the columnViewEditorListener\n-                        extendedTableModel.removeAll(copyedAllList, true, false);\n+                        // avoid UIManager#handleEvent execute afterOperationListener\n+                        // resize fire focuseLost to applyEditorValue remove the columnViewEditorListener\n+                        // after extendedTableModel remove/add reset back the original customSized\n+                        boolean isCustom = DataMapTableView.this.customSized;\n+                        DataMapTableView.this.customSized = true;\n+\n+                        extendedTableModel.removeAll(copyedAllList);\n                         for (IMetadataColumn metaColumnToAdd : columns) {\n                             String label = metaColumnToAdd.getLabel();\n                             String expression = oldMappingMap.get(label);\n                             if (expression != null && !\"\".equals(expression)) {\n                                 metaColumnToAdd.setExpression(expression);\n                             }\n                         }\n-                        extendedTableModel.addAll(columns, true, false);\n+                        extendedTableModel.addAll(columns);\n                         mapperManager.getUiManager().parseAllExpressionsForAllTables();\n                         mapperManager.getUiManager().getOldMappingMap().clear();\n                         oldMappingMap.clear();\n+\n+                        DataMapTableView.this.customSized = isCustom;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "77ac86fcc9bc4c835d3023a3d696bad881386dc2"}, "originalPosition": 27}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "afa155778dc1b49c71f733c51142c4fd02416ca1", "author": {"user": {"login": "jding-tlnd", "name": "Jane Ding"}}, "url": "https://github.com/Talend/tdi-studio-se/commit/afa155778dc1b49c71f733c51142c4fd02416ca1", "committedDate": "2020-07-08T12:18:16Z", "message": "fix(TUP-26347)Bug in tMap component using Talend Studio on Mac\nhttps://jira.talendforge.org/browse/TUP-26347"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ0ODI1NTEy", "url": "https://github.com/Talend/tdi-studio-se/pull/4901#pullrequestreview-444825512", "createdAt": "2020-07-08T14:30:39Z", "commit": {"oid": "afa155778dc1b49c71f733c51142c4fd02416ca1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4682, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}