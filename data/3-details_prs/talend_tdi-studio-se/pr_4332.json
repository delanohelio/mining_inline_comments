{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYzNTY0NzMx", "number": 4332, "title": "Fix(TDI-35027):improve the log when loading data from file.", "bodyText": "What is the current behavior? (You can also link to an open issue here)\nhttps://jira.talendforge.org/browse/TDI-35027\nWhat is the new behavior?\nPlease check if the PR fulfills these requirements\n\n The commit message follows Talend standard\n Tests for the changes have been added (for bug fixes / features)\n Docs have been added / updated (for bug fixes / features) ?\n The code coverage on new code >75%\n The new code does not introduce new technical issues (sonar / eslint)\n\nWhat kind of change does this PR introduce?\n\n Bugfix\n Feature\n Code style update (formatting, local variables)\n Refactoring (no functional changes, no api changes)\n Build / CI related changes\n Other... Please describe:\n\nDoes this PR introduce a breaking change?\n\n Yes\n No\n\nIf this PR contains a breaking change, please describe the impact and migration path for existing applications: ...\nOther information:", "createdAt": "2020-01-16T10:18:21Z", "url": "https://github.com/Talend/tdi-studio-se/pull/4332", "merged": true, "mergeCommit": {"oid": "1eaee7c5564d455f9987bcf7893f2cd18e91f2bd"}, "closed": true, "closedAt": "2020-04-27T07:46:30Z", "author": {"login": "vyu-talend"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb63bopAH2gAyMzYzNTY0NzMxOjI4Yzg1ZTE1OTQyNmY3NGYxMzM1MWRiNDYwMGY2MWIyNWVlMTVhNzE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcaTMOqAFqTM5ODcxMTE4NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "28c85e159426f74f13351db4600f61b25ee15a71", "author": {"user": {"login": "vyu-talend", "name": null}}, "url": "https://github.com/Talend/tdi-studio-se/commit/28c85e159426f74f13351db4600f61b25ee15a71", "committedDate": "2020-01-16T10:17:30Z", "message": "Fix(TDI-35027):This is a demo."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a45c287a2f44d170157320290246cf94accd8d40", "author": {"user": {"login": "vyu-talend", "name": null}}, "url": "https://github.com/Talend/tdi-studio-se/commit/a45c287a2f44d170157320290246cf94accd8d40", "committedDate": "2020-04-20T07:57:32Z", "message": "Merge branch 'master' into vyu/TDI-35027_no_errors_shows_in_tDb2BulkExec"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6a93e08242e2ff2386fa4966359fe586a8c6b5e9", "author": {"user": {"login": "vyu-talend", "name": null}}, "url": "https://github.com/Talend/tdi-studio-se/commit/6a93e08242e2ff2386fa4966359fe586a8c6b5e9", "committedDate": "2020-04-22T07:45:27Z", "message": "fix(TDI-35027):optimize codes."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk3OTk5MDg1", "url": "https://github.com/Talend/tdi-studio-se/pull/4332#pullrequestreview-397999085", "createdAt": "2020-04-22T09:16:16Z", "commit": {"oid": "6a93e08242e2ff2386fa4966359fe586a8c6b5e9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQwOToxNjoxNlrOGJsMkA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQwOToxNjoxNlrOGJsMkA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjgxNDQ4MA==", "bodyText": "Maybe better try-catch the SQL exception here? You don't want a log break the job, right?", "url": "https://github.com/Talend/tdi-studio-se/pull/4332#discussion_r412814480", "createdAt": "2020-04-22T09:16:16Z", "author": {"login": "pyzhou-talend"}, "path": "main/plugins/org.talend.designer.components.localprovider/components/tDB2BulkExec/tDB2BulkExec_begin_LOAD.javajet", "diffHunk": "@@ -103,6 +109,23 @@ Character field_separator_<%=cid %> = (<%=field_separator%>).charAt(0);\n         callStmt_<%=cid%> = conn_<%=cid%>.prepareCall(sql_<%=cid%>);\n         callStmt_<%=cid%>.setString(1, param_<%=cid%>);\n         callStmt_<%=cid%>.execute();\n+        <%\n+        if(isLog4jEnabled_tableAction && isMessagesOnServer) {\n+        \t%>\n+\t        java.sql.ResultSet rs_<%=cid%> = callStmt_<%=cid%>.getResultSet();\n+        \tString mgsSQL_<%=cid%> = null;\n+        \tif (rs_<%=cid%>.next()) {\n+        \t\tmgsSQL_<%=cid%> = rs_<%=cid%>.getString(\"MSG_RETRIEVAL\");\n+\t        }\n+\t        callStmt_<%=cid%> = conn_<%=cid%>.prepareCall(mgsSQL_<%=cid%>);\n+\t        callStmt_<%=cid%>.execute();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6a93e08242e2ff2386fa4966359fe586a8c6b5e9"}, "originalPosition": 33}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c18f408225f300238eb1f233f52c05b6336c4fab", "author": {"user": {"login": "vyu-talend", "name": null}}, "url": "https://github.com/Talend/tdi-studio-se/commit/c18f408225f300238eb1f233f52c05b6336c4fab", "committedDate": "2020-04-23T02:05:16Z", "message": "fix(TDI-35027):add try/catch."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk4NzExMTg1", "url": "https://github.com/Talend/tdi-studio-se/pull/4332#pullrequestreview-398711185", "createdAt": "2020-04-23T02:09:40Z", "commit": {"oid": "c18f408225f300238eb1f233f52c05b6336c4fab"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4641, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}