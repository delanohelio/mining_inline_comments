{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg4ODg4ODMy", "number": 4530, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQwNzoyNDoxNVrODpZO1w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMlQwNzo1NTo1N1rODqIu3A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ0NzMxNjA3OnYy", "diffSide": "RIGHT", "path": "main/plugins/org.talend.designer.codegen/src/main/java/org/talend/designer/codegen/CodeGenerator.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQwNzoyNDoxNVrOF4imiQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQwODo1Mjo1MVrOF5LlRg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDgzMTQ5Nw==", "bodyText": "missing one caller of BigDataCodeGenerator, can move the isExportConfig to resourceService.getResourcePathForContext, no need add another api getFullResourcePathForContext", "url": "https://github.com/Talend/tdi-studio-se/pull/4530#discussion_r394831497", "createdAt": "2020-03-19T07:24:15Z", "author": {"login": "zwxue"}, "path": "main/plugins/org.talend.designer.codegen/src/main/java/org/talend/designer/codegen/CodeGenerator.java", "diffHunk": "@@ -353,8 +354,14 @@ public String generateContextCode(IContext designerContext) throws CodeGenerator\n                                     .getDefault().getService(IResourcesDependenciesService.class);\n                             String resourcePathForContext = null;\n                             if (process instanceof IProcess2) {\n-                                resourcePathForContext = resourceService.getResourcePathForContext(process,\n-                                        contextPar.getValue());\n+                                String value = contextPar.getValue();\n+                                // for runtime\n+                                if (!ProcessorUtilities.isExportConfig()) {\n+                                    contextPar.setType(JavaTypesManager.FILE.getId());\n+                                    resourcePathForContext = resourceService.getFullResourcePathForContext(process, value);\n+                                } else {\n+                                    resourcePathForContext = resourceService.getResourcePathForContext(process, value);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "62c842532639398ae40a1c876a99209b7cabee9a"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTUwMjkxOA==", "bodyText": "Modified, thanks", "url": "https://github.com/Talend/tdi-studio-se/pull/4530#discussion_r395502918", "createdAt": "2020-03-20T08:52:51Z", "author": {"login": "jding-tlnd"}, "path": "main/plugins/org.talend.designer.codegen/src/main/java/org/talend/designer/codegen/CodeGenerator.java", "diffHunk": "@@ -353,8 +354,14 @@ public String generateContextCode(IContext designerContext) throws CodeGenerator\n                                     .getDefault().getService(IResourcesDependenciesService.class);\n                             String resourcePathForContext = null;\n                             if (process instanceof IProcess2) {\n-                                resourcePathForContext = resourceService.getResourcePathForContext(process,\n-                                        contextPar.getValue());\n+                                String value = contextPar.getValue();\n+                                // for runtime\n+                                if (!ProcessorUtilities.isExportConfig()) {\n+                                    contextPar.setType(JavaTypesManager.FILE.getId());\n+                                    resourcePathForContext = resourceService.getFullResourcePathForContext(process, value);\n+                                } else {\n+                                    resourcePathForContext = resourceService.getResourcePathForContext(process, value);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDgzMTQ5Nw=="}, "originalCommit": {"oid": "62c842532639398ae40a1c876a99209b7cabee9a"}, "originalPosition": 20}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ0NzMxODAxOnYy", "diffSide": "RIGHT", "path": "main/plugins/org.talend.designer.core/src/main/java/org/talend/designer/core/ui/editor/dependencies/util/ResourceDependenciesUtil.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQwNzoyNToxMlrOF4inxA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQwODo1Mjo1OVrOF5LllA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDgzMTgxMg==", "bodyText": "can use RunprocessService.getTalendJobJavaProject.getExtsourceFolder() here", "url": "https://github.com/Talend/tdi-studio-se/pull/4530#discussion_r394831812", "createdAt": "2020-03-19T07:25:12Z", "author": {"login": "zwxue"}, "path": "main/plugins/org.talend.designer.core/src/main/java/org/talend/designer/core/ui/editor/dependencies/util/ResourceDependenciesUtil.java", "diffHunk": "@@ -310,6 +310,21 @@ public static void copyToExtResourceFolder(JobResourceDependencyModel model, Str\n         }\r\n     }\r\n \r\n+    public static String getJobExecuteResourceFilePath(JobResourceDependencyModel model, IRepositoryViewObject jobObject,\r\n+            String jobLabel,\r\n+            String resourceVersion) {\r\n+        String path = null;\r\n+        String extResPath = getProcessFolder(jobObject) + jobLabel.toLowerCase() + SRC_EXTRESOURCE_FOLDER;\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "62c842532639398ae40a1c876a99209b7cabee9a"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTUwMjk5Ng==", "bodyText": "Modified, thanks", "url": "https://github.com/Talend/tdi-studio-se/pull/4530#discussion_r395502996", "createdAt": "2020-03-20T08:52:59Z", "author": {"login": "jding-tlnd"}, "path": "main/plugins/org.talend.designer.core/src/main/java/org/talend/designer/core/ui/editor/dependencies/util/ResourceDependenciesUtil.java", "diffHunk": "@@ -310,6 +310,21 @@ public static void copyToExtResourceFolder(JobResourceDependencyModel model, Str\n         }\r\n     }\r\n \r\n+    public static String getJobExecuteResourceFilePath(JobResourceDependencyModel model, IRepositoryViewObject jobObject,\r\n+            String jobLabel,\r\n+            String resourceVersion) {\r\n+        String path = null;\r\n+        String extResPath = getProcessFolder(jobObject) + jobLabel.toLowerCase() + SRC_EXTRESOURCE_FOLDER;\r", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDgzMTgxMg=="}, "originalCommit": {"oid": "62c842532639398ae40a1c876a99209b7cabee9a"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1NTA5ODUyOnYy", "diffSide": "RIGHT", "path": "main/plugins/org.talend.designer.core/src/main/java/org/talend/designer/core/ui/editor/dependencies/service/ResourcesDependenciesService.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMlQwNzo1NTo1OFrOF5t4bQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QwMDoxOToxMlrOF50Akw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjA2NDg3Nw==", "bodyText": "if(!ProcessorUtilities.isExportConfig())  ?", "url": "https://github.com/Talend/tdi-studio-se/pull/4530#discussion_r396064877", "createdAt": "2020-03-22T07:55:58Z", "author": {"login": "zwxue"}, "path": "main/plugins/org.talend.designer.core/src/main/java/org/talend/designer/core/ui/editor/dependencies/service/ResourcesDependenciesService.java", "diffHunk": "@@ -89,12 +91,12 @@ public String getResourcePathForContext(IProcess process, String resourceContext\n                     if (repoObject != null) {\r\n                         JobResourceDependencyModel model = new JobResourceDependencyModel(\r\n                                 (ResourceItem) repoObject.getProperty().getItem());\r\n-                        StringBuffer joblabel = new StringBuffer();\r\n-                        if (StringUtils.isNotBlank(property.getItem().getState().getPath())) {\r\n-                            joblabel.append(property.getItem().getState().getPath() + \"/\");\r\n+                        String jobLabel = JavaResourcesHelper.getJobFolderName(property.getLabel(), property.getVersion());\r\n+                        if (ProcessorUtilities.isExportConfig()) {\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c918e647d731c33c22d8e6d919e08d62b1490fb"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjE2NTI2Nw==", "bodyText": "if(ProcessorUtilities.isExportConfig()) relativePath else fullPath", "url": "https://github.com/Talend/tdi-studio-se/pull/4530#discussion_r396165267", "createdAt": "2020-03-23T00:19:12Z", "author": {"login": "jding-tlnd"}, "path": "main/plugins/org.talend.designer.core/src/main/java/org/talend/designer/core/ui/editor/dependencies/service/ResourcesDependenciesService.java", "diffHunk": "@@ -89,12 +91,12 @@ public String getResourcePathForContext(IProcess process, String resourceContext\n                     if (repoObject != null) {\r\n                         JobResourceDependencyModel model = new JobResourceDependencyModel(\r\n                                 (ResourceItem) repoObject.getProperty().getItem());\r\n-                        StringBuffer joblabel = new StringBuffer();\r\n-                        if (StringUtils.isNotBlank(property.getItem().getState().getPath())) {\r\n-                            joblabel.append(property.getItem().getState().getPath() + \"/\");\r\n+                        String jobLabel = JavaResourcesHelper.getJobFolderName(property.getLabel(), property.getVersion());\r\n+                        if (ProcessorUtilities.isExportConfig()) {\r", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjA2NDg3Nw=="}, "originalCommit": {"oid": "9c918e647d731c33c22d8e6d919e08d62b1490fb"}, "originalPosition": 24}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4527, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}