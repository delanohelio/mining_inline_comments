{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMyMzk5Njkz", "number": 4798, "title": "TDI-44342 : Ignore microseconds in BigQuery datetime", "bodyText": "https://jira.talendforge.org/browse/TDI-44342\nWhat is the current behavior? (You can also link to an open issue here)\nDateTime columns are not correctly read from BigQuery. This is because BigQuery stores date with a microsecond precision while Java can only hanlde to milliseconds.\nWhat is the new behavior?\nThe datetime string is cut to remove the last three digits to conform to java Date precision.\nWhat kind of change does this PR introduce?\n\n[x ] Bugfix\n Feature\n Code style update (formatting, local variables)\n Refactoring (no functional changes, no api changes)\n Build / CI related changes\n Other... Please describe:\n\nDoes this PR introduce a breaking change?\n\n Yes\n[x ] No", "createdAt": "2020-06-10T11:44:19Z", "url": "https://github.com/Talend/tdi-studio-se/pull/4798", "merged": true, "mergeCommit": {"oid": "4468d89b0e966ae129bdb419756eb0c04bffb8f4"}, "closed": true, "closedAt": "2020-06-24T12:13:29Z", "author": null, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcp4D2cAH2gAyNDMyMzk5NjkzOjRmNDNiYWI3MDAyZjZiMGIzZTc2NDBhY2EzYmE1ZTA1MDJmMjlmZjE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcrzqPFgFqTQzMTQxMTg2NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "4f43bab7002f6b0b3e7640aca3ba5e0502f29ff1", "author": {"user": null}, "url": "https://github.com/Talend/tdi-studio-se/commit/4f43bab7002f6b0b3e7640aca3ba5e0502f29ff1", "committedDate": "2020-06-10T11:35:52Z", "message": "TDI-44342 : Ignore microseconds in BigQuery datetime"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI4MDA1Nzcz", "url": "https://github.com/Talend/tdi-studio-se/pull/4798#pullrequestreview-428005773", "createdAt": "2020-06-10T12:34:51Z", "commit": {"oid": "4f43bab7002f6b0b3e7640aca3ba5e0502f29ff1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bcc01814b0e1e149ef4b46489b1c502746c21ff4", "author": {"user": null}, "url": "https://github.com/Talend/tdi-studio-se/commit/bcc01814b0e1e149ef4b46489b1c502746c21ff4", "committedDate": "2020-06-16T09:50:35Z", "message": "TDI-44342 : Ignore microseconds in BigQuery datetime\n\nFixed for BigQuerySQLRow component"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMxNDExODY0", "url": "https://github.com/Talend/tdi-studio-se/pull/4798#pullrequestreview-431411864", "createdAt": "2020-06-16T11:32:35Z", "commit": {"oid": "bcc01814b0e1e149ef4b46489b1c502746c21ff4"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQxMTozMjozNVrOGkXKbA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQxMTozNTozOVrOGkXQZA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDc4MTQyMA==", "bodyText": "if match is for six last char, put regexp with $ at the end : \".*\\.\\d{6}$\" => more efficient and more precise", "url": "https://github.com/Talend/tdi-studio-se/pull/4798#discussion_r440781420", "createdAt": "2020-06-16T11:32:35Z", "author": {"login": "clesaec"}, "path": "main/plugins/org.talend.designer.components.localprovider/components/tBigQueryInput/tBigQueryInput_begin.javajet", "diffHunk": "@@ -529,7 +529,12 @@\n \t\t\t\t\t\t\t\t\t%>\n \n \t\t\t\t\t\t\t\t\t\tif (value_<%=cid%>.toString().contains(\"-\")) {\n-\t\t\t\t\t\t\t\t\t\t\t<%=connName%>.<%=columnName%> = ParserUtils.parseTo_Date(value_<%=cid%>.toString(),<%=patternValue%>);\n+\t\t\t\t\t\t\t\t\t\t\tString sValue_<%=cid%> = value_<%=cid%>.toString();\n+\t\t\t\t\t\t\t\t\t\t\tif (sValue_<%=cid%>.matches(\".*\\\\.\\\\d{6}\")) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bcc01814b0e1e149ef4b46489b1c502746c21ff4"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDc4MTg5Mw==", "bodyText": "same for regexp", "url": "https://github.com/Talend/tdi-studio-se/pull/4798#discussion_r440781893", "createdAt": "2020-06-16T11:33:31Z", "author": {"login": "clesaec"}, "path": "main/plugins/org.talend.designer.components.localprovider/components/tBigQuerySQLRow/tBigQuerySQLRow_main.javajet", "diffHunk": "@@ -183,8 +183,18 @@\n \t\t\t\t\t\t\t\t\t\t<%=connName%>.<%=columnName%> = value_<%=cid%>;\n \t\t\t\t\t\t\t\t\t<%\t\t\n \t\t\t\t\t\t\t\t\t} else if(javaType == JavaTypesManager.DATE) {\t\t\t\t\t\t\n-\t\t\t\t\t\t\t\t\t%>\t\t\t\t\t\n-\t\t\t\t\t\t\t\t\t\t<%=connName%>.<%=columnName%> = ParserUtils.parseTo_Date(value_<%=cid%>.toString());\t\t\t\t\n+\t\t\t\t\t\t\t\t\t%>\n+\t\t\t\t\t\t\t\t\t\tif (value_<%=cid%>.toString().contains(\"-\")) {\n+\t\t\t\t\t\t\t\t\t\t\tString sValue_<%=cid%> = value_<%=cid%>.toString();\n+\t\t\t\t\t\t\t\t\t\t\tif (sValue_<%=cid%>.matches(\".*\\\\.\\\\d{6}\")) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bcc01814b0e1e149ef4b46489b1c502746c21ff4"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDc4Mjk0OA==", "bodyText": "Switch if and String sValu... to avoid \"toString\" twice call.\nExplain in a comment contains(\"-\") => what does it means if it contains minus char", "url": "https://github.com/Talend/tdi-studio-se/pull/4798#discussion_r440782948", "createdAt": "2020-06-16T11:35:39Z", "author": {"login": "clesaec"}, "path": "main/plugins/org.talend.designer.components.localprovider/components/tBigQuerySQLRow/tBigQuerySQLRow_main.javajet", "diffHunk": "@@ -183,8 +183,18 @@\n \t\t\t\t\t\t\t\t\t\t<%=connName%>.<%=columnName%> = value_<%=cid%>;\n \t\t\t\t\t\t\t\t\t<%\t\t\n \t\t\t\t\t\t\t\t\t} else if(javaType == JavaTypesManager.DATE) {\t\t\t\t\t\t\n-\t\t\t\t\t\t\t\t\t%>\t\t\t\t\t\n-\t\t\t\t\t\t\t\t\t\t<%=connName%>.<%=columnName%> = ParserUtils.parseTo_Date(value_<%=cid%>.toString());\t\t\t\t\n+\t\t\t\t\t\t\t\t\t%>\n+\t\t\t\t\t\t\t\t\t\tif (value_<%=cid%>.toString().contains(\"-\")) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bcc01814b0e1e149ef4b46489b1c502746c21ff4"}, "originalPosition": 7}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4687, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}