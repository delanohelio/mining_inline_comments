{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA5NDgzMDQz", "number": 4647, "title": "fix(TDI-44093): Fix processing of quoted strings", "bodyText": "What is the current behavior? (You can also link to an open issue here)\nhttps://jira.talendforge.org/browse/TDI-44093\nSyntax error when use query for tCosmosDBSQLAPIInput. Because strings with quotes were not processed correctly\nWhat is the new behavior?\nCurrently strings with quoted values process as expected.\nPlease check if the PR fulfills these requirements\n\n The commit message follows Talend standard\n Tests for the changes have been added (for bug fixes / features)\n Docs have been added / updated (for bug fixes / features) ?\n The code coverage on new code >75%\n The new code does not introduce new technical issues (sonar / eslint)\n\nWhat kind of change does this PR introduce?\n\n Bugfix\n Feature\n Code style update (formatting, local variables)\n Refactoring (no functional changes, no api changes)\n Build / CI related changes\n Other... Please describe:\n\nDoes this PR introduce a breaking change?\n\n Yes\n No\n\nIf this PR contains a breaking change, please describe the impact and migration path for existing applications: ...\nOther information:", "createdAt": "2020-04-27T12:55:42Z", "url": "https://github.com/Talend/tdi-studio-se/pull/4647", "merged": true, "mergeCommit": {"oid": "fcf9867ccbcb194552b5dca0e4f6088404b36a43"}, "closed": true, "closedAt": "2020-05-06T09:53:40Z", "author": {"login": "OleksiiNimych"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcbu-2PgFqTQwMDkzMTQxMQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABccGZXhAFqTQwMjAwNDU5MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAwOTMxNDEx", "url": "https://github.com/Talend/tdi-studio-se/pull/4647#pullrequestreview-400931411", "createdAt": "2020-04-27T13:06:19Z", "commit": {"oid": "e74fd91e4b69c88f9809e3deb8d4dc3c6e302bbc"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e74fd91e4b69c88f9809e3deb8d4dc3c6e302bbc", "author": {"user": {"login": "OleksiiNimych", "name": null}}, "url": "https://github.com/Talend/tdi-studio-se/commit/e74fd91e4b69c88f9809e3deb8d4dc3c6e302bbc", "committedDate": "2020-04-27T12:46:49Z", "message": "fix(TDI-44093): Fix processing of quoted strings"}, "afterCommit": {"oid": "7d5383651a9ed3ce68e0e226a9fdcd2ce318c139", "author": {"user": {"login": "OleksiiNimych", "name": null}}, "url": "https://github.com/Talend/tdi-studio-se/commit/7d5383651a9ed3ce68e0e226a9fdcd2ce318c139", "committedDate": "2020-04-27T13:20:56Z", "message": "fix(TDI-44093): Fix processing of quoted strings"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "64fc7826471bc9b00dbc86dc51451082e9278626", "author": {"user": {"login": "OleksiiNimych", "name": null}}, "url": "https://github.com/Talend/tdi-studio-se/commit/64fc7826471bc9b00dbc86dc51451082e9278626", "committedDate": "2020-04-27T13:34:10Z", "message": "fix(TDI-44093): Fix processing of quoted strings"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7d5383651a9ed3ce68e0e226a9fdcd2ce318c139", "author": {"user": {"login": "OleksiiNimych", "name": null}}, "url": "https://github.com/Talend/tdi-studio-se/commit/7d5383651a9ed3ce68e0e226a9fdcd2ce318c139", "committedDate": "2020-04-27T13:20:56Z", "message": "fix(TDI-44093): Fix processing of quoted strings"}, "afterCommit": {"oid": "64fc7826471bc9b00dbc86dc51451082e9278626", "author": {"user": {"login": "OleksiiNimych", "name": null}}, "url": "https://github.com/Talend/tdi-studio-se/commit/64fc7826471bc9b00dbc86dc51451082e9278626", "committedDate": "2020-04-27T13:34:10Z", "message": "fix(TDI-44093): Fix processing of quoted strings"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAwOTc4MjAw", "url": "https://github.com/Talend/tdi-studio-se/pull/4647#pullrequestreview-400978200", "createdAt": "2020-04-27T13:57:59Z", "commit": {"oid": "64fc7826471bc9b00dbc86dc51451082e9278626"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAxNzMwNjUy", "url": "https://github.com/Talend/tdi-studio-se/pull/4647#pullrequestreview-401730652", "createdAt": "2020-04-28T11:09:15Z", "commit": {"oid": "64fc7826471bc9b00dbc86dc51451082e9278626"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQxMTowOToxNVrOGNO02A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQxMTowOToxNVrOGNO02A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjUyNzU3Ng==", "bodyText": "I would change it in following way:\nif (org.talend.core.model.utils.TalendTextUtils.isEnclosed(value)) {\n    value = org.talend.core.model.utils.TalendTextUtils.removeQuotes(value);\n}\nvalue = org.talend.core.model.utils.TalendTextUtils.addQuotes(value);", "url": "https://github.com/Talend/tdi-studio-se/pull/4647#discussion_r416527576", "createdAt": "2020-04-28T11:09:15Z", "author": {"login": "gonchar-ivan"}, "path": "main/plugins/org.talend.sdk.component.studio-integration/jet_stub/generic/configuration.javajet", "diffHunk": "@@ -45,8 +45,12 @@ final java.util.Map<String, String> configuration_<%=cid%> = new java.util.HashM\n                         }\n                         String value = lineValues.get(items[j]);\n                         if (!org.talend.core.model.utils.ContextParameterUtils.isDynamic(value)) {\n-                            value = org.talend.core.model.utils.TalendTextUtils.removeQuotes(value);\n-                            value = org.talend.core.model.utils.TalendTextUtils.addQuotes(value);\n+                            if (org.talend.core.model.utils.TalendTextUtils.checkTextQuotation(value)) {\n+                                value = org.talend.core.model.utils.TalendTextUtils.removeQuotes(value);\n+                                value = org.talend.core.model.utils.TalendTextUtils.addQuotes(value);\n+                            } else {\n+                                value = org.talend.core.model.utils.TalendTextUtils.addQuotes(value);\n+                            }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "64fc7826471bc9b00dbc86dc51451082e9278626"}, "originalPosition": 11}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2b86a8ecdf890ea8a8c02633cfe68073c9f7fd0d", "author": {"user": {"login": "OleksiiNimych", "name": null}}, "url": "https://github.com/Talend/tdi-studio-se/commit/2b86a8ecdf890ea8a8c02633cfe68073c9f7fd0d", "committedDate": "2020-04-28T14:45:44Z", "message": "fix(TDI-44093): Refactoring to improve readability"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAyMDA0NTkw", "url": "https://github.com/Talend/tdi-studio-se/pull/4647#pullrequestreview-402004590", "createdAt": "2020-04-28T16:23:06Z", "commit": {"oid": "2b86a8ecdf890ea8a8c02633cfe68073c9f7fd0d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4608, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}