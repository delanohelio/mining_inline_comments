{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAzMTcxNzkw", "number": 4622, "title": "Dsylaiev/tdi 43931 pass full date to independand child job", "bodyText": "What is the current behavior? (You can also link to an open issue here)\nDate passed to independent child job as a string (losing milis)\nWhat is the new behavior?\nDate passed to independent child job as long (parsing from string is still supported to not break user scripts )\nPlease check if the PR fulfills these requirements\n\n The commit message follows Talend standard\n Tests for the changes have been added (for bug fixes / features)\n Docs have been added / updated (for bug fixes / features) ?\n The code coverage on new code >75%\n The new code does not introduce new technical issues (sonar / eslint)\n\nWhat kind of change does this PR introduce?\n\n Bugfix\n Feature\n Code style update (formatting, local variables)\n Refactoring (no functional changes, no api changes)\n Build / CI related changes\n Other... Please describe:\n\nDoes this PR introduce a breaking change?\n\n Yes\n No\n\nIf this PR contains a breaking change, please describe the impact and migration path for existing applications: ...\nChanging codegen context handling. could be dangerous\nOther information:", "createdAt": "2020-04-14T13:05:20Z", "url": "https://github.com/Talend/tdi-studio-se/pull/4622", "merged": true, "mergeCommit": {"oid": "87d3fd7c7d810011dd73330b26a314ad0ba3d784"}, "closed": true, "closedAt": "2020-04-22T09:03:23Z", "author": {"login": "dmytro-sylaiev"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcXSr3ugH2gAyNDAzMTcxNzkwOjhhOTY4YzQ5YzlkYzhmODhlNzZiZjQ2M2M0MmVmODIzOTcxNzM0ZjQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcYGwChAFqTM5NDMzMzMwNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "8a968c49c9dc8f88e76bf463c42ef823971734f4", "author": {"user": {"login": "dmytro-sylaiev", "name": "Dmytro Sylaiev"}}, "url": "https://github.com/Talend/tdi-studio-se/commit/8a968c49c9dc8f88e76bf463c42ef823971734f4", "committedDate": "2020-04-13T17:52:33Z", "message": "fix(TDI-43931): Convert long as date from context args"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "caf831a50f99877d711cb6f38ffcb0e8edeb6d6d", "author": {"user": {"login": "dmytro-sylaiev", "name": "Dmytro Sylaiev"}}, "url": "https://github.com/Talend/tdi-studio-se/commit/caf831a50f99877d711cb6f38ffcb0e8edeb6d6d", "committedDate": "2020-04-13T17:57:22Z", "message": "fix(TDI-43931): Update file root to be up to date"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eb05242d78729b56141b19f15017243727fbd41f", "author": {"user": {"login": "dmytro-sylaiev", "name": "Dmytro Sylaiev"}}, "url": "https://github.com/Talend/tdi-studio-se/commit/eb05242d78729b56141b19f15017243727fbd41f", "committedDate": "2020-04-14T13:00:25Z", "message": "fix(TDI-43931): Implement fix for tRunJob"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkzNzI5MzM5", "url": "https://github.com/Talend/tdi-studio-se/pull/4622#pullrequestreview-393729339", "createdAt": "2020-04-15T12:34:30Z", "commit": {"oid": "eb05242d78729b56141b19f15017243727fbd41f"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQxMjozNDozMFrOGF3kcw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQxMjozNDozMFrOGF3kcw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODgwNjUxNQ==", "bodyText": "Add log message about impossibility to parse date value and attempt to parse value as long, please.", "url": "https://github.com/Talend/tdi-studio-se/pull/4622#discussion_r408806515", "createdAt": "2020-04-15T12:34:30Z", "author": {"login": "chmyga"}, "path": "main/plugins/org.talend.designer.codegen/jet_stub/footer.javajet", "diffHunk": "@@ -665,34 +665,39 @@\n <%\n                         } else if(typeToGenerate.equals(\"java.util.Date\")) {\n %>\n-                        try{\n                             String context_<%=ctxParam.getName()%>_value = context.getProperty(\"<%=ctxParam.getName()%>\");\n-                            if (context_<%=ctxParam.getName()%>_value == null){\n-                                context_<%=ctxParam.getName()%>_value = \"\";\n-                            }\n-                            int context_<%=ctxParam.getName()%>_pos = context_<%=ctxParam.getName()%>_value.indexOf(\";\");\n-                            String context_<%=ctxParam.getName()%>_pattern =  \"yyyy-MM-dd HH:mm:ss\";\n-                            if(context_<%=ctxParam.getName()%>_pos > -1){\n-                                context_<%=ctxParam.getName()%>_pattern = context_<%=ctxParam.getName()%>_value.substring(0, context_<%=ctxParam.getName()%>_pos);\n-                                context_<%=ctxParam.getName()%>_value = context_<%=ctxParam.getName()%>_value.substring(context_<%=ctxParam.getName()%>_pos + 1);\n-                            }\n+                            try{\n+                                if (context_<%=ctxParam.getName()%>_value == null){\n+                                    context_<%=ctxParam.getName()%>_value = \"\";\n+                                }\n+                                int context_<%=ctxParam.getName()%>_pos = context_<%=ctxParam.getName()%>_value.indexOf(\";\");\n+                                String context_<%=ctxParam.getName()%>_pattern =  \"yyyy-MM-dd HH:mm:ss\";\n+                                if(context_<%=ctxParam.getName()%>_pos > -1){\n+                                    context_<%=ctxParam.getName()%>_pattern = context_<%=ctxParam.getName()%>_value.substring(0, context_<%=ctxParam.getName()%>_pos);\n+                                    context_<%=ctxParam.getName()%>_value = context_<%=ctxParam.getName()%>_value.substring(context_<%=ctxParam.getName()%>_pos + 1);\n+                                }\n \n-                            context.<%=ctxParam.getName()%>=(java.util.Date)(new java.text.SimpleDateFormat(context_<%=ctxParam.getName()%>_pattern).parse(context_<%=ctxParam.getName()%>_value));\n+                                context.<%=ctxParam.getName()%>=(java.util.Date)(new java.text.SimpleDateFormat(context_<%=ctxParam.getName()%>_pattern).parse(context_<%=ctxParam.getName()%>_value));\n \n-                        } catch(ParseException e) {\n+                            } catch(ParseException e) {\n+                                try { <% /*try to check if date passed as long also*/ %>\n+                                    long context_<%=ctxParam.getName()%>_longValue = Long.valueOf(context_<%=ctxParam.getName()%>_value);\n+                                    context.<%=ctxParam.getName()%> = new java.util.Date(context_<%=ctxParam.getName()%>_longValue);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eb05242d78729b56141b19f15017243727fbd41f"}, "originalPosition": 33}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "72950e65eea537221410001faab78f3a82d2613e", "author": {"user": {"login": "dmytro-sylaiev", "name": "Dmytro Sylaiev"}}, "url": "https://github.com/Talend/tdi-studio-se/commit/72950e65eea537221410001faab78f3a82d2613e", "committedDate": "2020-04-15T15:22:07Z", "message": "fix(TDI-43931): Mention string parse exception in log warn"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk0MzMzMzA0", "url": "https://github.com/Talend/tdi-studio-se/pull/4622#pullrequestreview-394333304", "createdAt": "2020-04-16T06:32:10Z", "commit": {"oid": "72950e65eea537221410001faab78f3a82d2613e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4625, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}