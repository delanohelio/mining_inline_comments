{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA0NDIxMTc0", "number": 4625, "title": "fix(TDI-44070): Unable to execute the job, receiving \"Failed to gener\u2026", "bodyText": "What is the current behavior? (You can also link to an open issue here)\ntAmazonRedshiftManage  does not support context variable for \"Node count\" field\nWhat is the new behavior?\ntAmazonRedshiftManage  supports context variable for \"Node count\" field\nPlease check if the PR fulfills these requirements\n\n The commit message follows Talend standard\n Tests for the changes have been added (for bug fixes / features)\n Docs have been added / updated (for bug fixes / features) ?\n The code coverage on new code >75%\n The new code does not introduce new technical issues (sonar / eslint)\n\nWhat kind of change does this PR introduce?\n\n Bugfix\n Feature\n Code style update (formatting, local variables)\n Refactoring (no functional changes, no api changes)\n Build / CI related changes\n Other... Please describe:\n\nDoes this PR introduce a breaking change?\n\n Yes\n No\n\nIf this PR contains a breaking change, please describe the impact and migration path for existing applications: ...\nOther information:\nhttps://jira.talendforge.org/browse/TDI-44070", "createdAt": "2020-04-16T14:37:57Z", "url": "https://github.com/Talend/tdi-studio-se/pull/4625", "merged": true, "mergeCommit": {"oid": "0fecec96359e5f74d3fead372b6eb7b5f21353b4"}, "closed": true, "closedAt": "2020-04-21T08:23:22Z", "author": {"login": "sbovsunovskyi"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcYNaYpgH2gAyNDA0NDIxMTc0OjZkMWRiMWU5OTU2OTMxNGJkNTg2MGNiYThkZjMzOGMyNjI1MzRmMjY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcYlY6nAFqTM5NTY3MTk0NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "6d1db1e99569314bd5860cba8df338c262534f26", "author": {"user": {"login": "sbovsunovskyi", "name": null}}, "url": "https://github.com/Talend/tdi-studio-se/commit/6d1db1e99569314bd5860cba8df338c262534f26", "committedDate": "2020-04-16T14:17:51Z", "message": "fix(TDI-44070): Unable to execute the job, receiving \"Failed to generate code.\" when using tAmazonRedshiftManage component."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk1NDg2NzQ4", "url": "https://github.com/Talend/tdi-studio-se/pull/4625#pullrequestreview-395486748", "createdAt": "2020-04-17T14:08:38Z", "commit": {"oid": "6d1db1e99569314bd5860cba8df338c262534f26"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xN1QxNDowODozOVrOGHPigw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xN1QxNDowODozOVrOGHPigw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDI0NzgxMQ==", "bodyText": "please, enclose if body with braces:\nif (node_count.isEmpty()) {\n    node_count = \"1\";\n}\n\nplease refer to java code conventions, section 7.2\nhttps://www.oracle.com/technetwork/java/codeconventions-150003.pdf\nBraces are used around all statements, even singletons, when they are part of a control\nstructure, such as a if-else or for statement. This makes it easier to add statements\nwithout accidentally introducing bugs due to forgetting to add braces", "url": "https://github.com/Talend/tdi-studio-se/pull/4625#discussion_r410247811", "createdAt": "2020-04-17T14:08:39Z", "author": {"login": "gonchar-ivan"}, "path": "main/plugins/org.talend.designer.components.localprovider/components/tAmazonRedshiftManage/tAmazonRedshiftManage_begin.javajet", "diffHunk": "@@ -24,6 +24,7 @@\n \tString user = ElementParameterParser.getValue(node, \"__USER__\");\n \tString node_type = ElementParameterParser.getValue(node, \"__NODE_TYPE__\");\n \tString node_count = ElementParameterParser.getValue(node, \"__NODE_COUNT__\");\n+\tif (node_count.isEmpty()) node_count = \"1\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6d1db1e99569314bd5860cba8df338c262534f26"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk1NDg4MTIw", "url": "https://github.com/Talend/tdi-studio-se/pull/4625#pullrequestreview-395488120", "createdAt": "2020-04-17T14:10:15Z", "commit": {"oid": "6d1db1e99569314bd5860cba8df338c262534f26"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xN1QxNDoxMDoxNVrOGHPmkQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xN1QxNDoxMDoxNVrOGHPmkQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDI0ODg0OQ==", "bodyText": "please, enclose if-else bodes with braces", "url": "https://github.com/Talend/tdi-studio-se/pull/4625#discussion_r410248849", "createdAt": "2020-04-17T14:10:15Z", "author": {"login": "gonchar-ivan"}, "path": "main/plugins/org.talend.designer.components.localprovider/components/tAmazonRedshiftManage/tAmazonRedshiftManage_begin.javajet", "diffHunk": "@@ -88,52 +89,43 @@\n     \t\t.withMasterUsername(<%=user%>)\n     \t\t.withMasterUserPassword(decryptedPwd_<%=cid%>)\n     \t\t\n-    \t\t.withNodeType(<%=node_type%>)\n-    \t\t\n-    \t\t<%\n-    \t\tif(new Integer(node_count) > 1){\n-    \t\t%>\n-    \t\t.withNumberOfNodes(<%=node_count%>)\n-    \t\t<%\n-    \t\t} else {\n-    \t\t%>\n-    \t\t.withClusterType(\"single-node\")\n-    \t\t<%\n-    \t\t}\n-    \t\t%>\n+    \t\t.withNodeType(<%=node_type%>);\n     \t\t\n-    \t\t//advanced settings\n-    \t\t<%if(parameterUtil.isValid(parameter_group_name)) {%>\n-    \t\t.withClusterParameterGroupName(<%=parameter_group_name%>)\n-    \t\t<%}%>\n-\t\t\t\n-\t\t\t<%if(parameterUtil.isValid(subnet_group_name)) {%>\n-\t\t\t.withClusterSubnetGroupName(<%=subnet_group_name%>)\n-\t\t\t<%}%>\n-\t\t\t\n-\t\t\t<%\n-\t\t\tif(publicly_accessible) {\n-\t\t\t%>\n-\t\t\t\t.withPubliclyAccessible(true)\n-    \t\t\t<%if(set_public_ip_address) {%>\n-    \t\t\t.withElasticIp(<%=elastic_ip%>)\n-    \t\t\t<%}%>\n-\t\t\t<%\n-\t\t\t} else {\n-\t\t\t%>\n-\t\t\t\t.withPubliclyAccessible(false)\n-\t\t\t<%\n-\t\t\t}\n-\t\t\t%>\n-\t\t\t\n-\t\t\t<%if(parameterUtil.isValid(availability_zone)) {%>\n-\t\t\t.withAvailabilityZone(<%=availability_zone%>)\n-\t\t\t<%}%>\n-\t\t\t\n-\t\t\t<%if(parameterUtil.isValid(vpc_security_groupids)) {%>\n-\t\t\t.withVpcSecurityGroupIds(<%=vpc_security_groupids%>.split(\",\"))\n+\t\tif (<%=node_count%> > 1) request_<%=cid%> = request_<%=cid%>.withNumberOfNodes(<%=node_count%>);\n+\t\telse request_<%=cid%> = request_<%=cid%>.withClusterType(\"single-node\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6d1db1e99569314bd5860cba8df338c262534f26"}, "originalPosition": 58}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk1NDg5NzUz", "url": "https://github.com/Talend/tdi-studio-se/pull/4625#pullrequestreview-395489753", "createdAt": "2020-04-17T14:12:11Z", "commit": {"oid": "6d1db1e99569314bd5860cba8df338c262534f26"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b1a975e4c4cc3b268e4017619c58513c7af12da3", "author": {"user": {"login": "sbovsunovskyi", "name": null}}, "url": "https://github.com/Talend/tdi-studio-se/commit/b1a975e4c4cc3b268e4017619c58513c7af12da3", "committedDate": "2020-04-17T18:11:02Z", "message": "fix(TDI-44070): Unable to execute the job, receiving \"Failed to generate code.\" when using tAmazonRedshiftManage component."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk1NjcxOTQ1", "url": "https://github.com/Talend/tdi-studio-se/pull/4625#pullrequestreview-395671945", "createdAt": "2020-04-17T18:13:58Z", "commit": {"oid": "b1a975e4c4cc3b268e4017619c58513c7af12da3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4606, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}