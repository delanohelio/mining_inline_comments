{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY2MjY5MjM5", "number": 4363, "title": "feat(TDI-40852): add dynamic support for tMSSQLBulkExec", "bodyText": "What is the current behavior? (You can also link to an open issue here)\nhttps://jira.talendforge.org/browse/TDI-40852\nWhat is the new behavior?\nAdd a feature\nPlease check if the PR fulfills these requirements\n\n The commit message follows Talend standard\n Tests for the changes have been added (for bug fixes / features)\n Docs have been added / updated (for bug fixes / features) ?\n The code coverage on new code >75%\n The new code does not introduce new technical issues (sonar / eslint)\n\nWhat kind of change does this PR introduce?\n\n Bugfix\n Feature\n Code style update (formatting, local variables)\n Refactoring (no functional changes, no api changes)\n Build / CI related changes\n Other... Please describe:\n\nDoes this PR introduce a breaking change?\n\n Yes\n No\n\nIf this PR contains a breaking change, please describe the impact and migration path for existing applications: ...\nOther information:", "createdAt": "2020-01-23T09:44:53Z", "url": "https://github.com/Talend/tdi-studio-se/pull/4363", "merged": true, "mergeCommit": {"oid": "24f146a76dda6e2c92634db5925afd3ce0127a87"}, "closed": true, "closedAt": "2020-02-07T13:32:18Z", "author": {"login": "Voievidko"}, "timelineItems": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb8Klx1AH2gAyMzY2MjY5MjM5OmU1OTcyNDE5ODYxMDY1NDhlNTdmZjE5YjUxZjBhNzEyMGE1ZjMyNDg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcB_ZZdAFqTM1NTE1NTkyNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e597241986106548e57ff19b51f0a7120a5f3248", "author": {"user": {"login": "Voievidko", "name": "Roman"}}, "url": "https://github.com/Talend/tdi-studio-se/commit/e597241986106548e57ff19b51f0a7120a5f3248", "committedDate": "2020-01-20T11:10:42Z", "message": "feat(TDI-40852): add feature for CREATE_IF_NOT_EXIST table action"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d4fa7813281c9ec672275f622ed7c2f9cd86c611", "author": {"user": {"login": "Voievidko", "name": "Roman"}}, "url": "https://github.com/Talend/tdi-studio-se/commit/d4fa7813281c9ec672275f622ed7c2f9cd86c611", "committedDate": "2020-01-20T11:17:31Z", "message": "feat(TDI-40852): add feature for DROP_IF_EXIST_AND_CREATE table action"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "239768bdf6da7ee1287f75fe321d5f5c3d3157be", "author": {"user": {"login": "Voievidko", "name": "Roman"}}, "url": "https://github.com/Talend/tdi-studio-se/commit/239768bdf6da7ee1287f75fe321d5f5c3d3157be", "committedDate": "2020-01-23T09:40:37Z", "message": "feat(TDI-40852): made improvements | correct template code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "233f7c4f47f007c7f7e279d7eafa3fe6a7ecfa8c", "author": {"user": {"login": "Voievidko", "name": "Roman"}}, "url": "https://github.com/Talend/tdi-studio-se/commit/233f7c4f47f007c7f7e279d7eafa3fe6a7ecfa8c", "committedDate": "2020-01-23T09:47:42Z", "message": "feat(TDI-40852): return CODEPAGE"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4NTUyNzg1", "url": "https://github.com/Talend/tdi-studio-se/pull/4363#pullrequestreview-348552785", "createdAt": "2020-01-27T10:13:58Z", "commit": {"oid": "233f7c4f47f007c7f7e279d7eafa3fe6a7ecfa8c"}, "state": "DISMISSED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QxMDoxMzo1OVrOFh9fwQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QxMDoxMzo1OVrOFh9fwQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTE1NDg4MQ==", "bodyText": "Maybe set it customizable : column.setLength(Integer.parseInt(System.getProperty(\"talend.mssql.bulk.double.precision\", \"53\"));", "url": "https://github.com/Talend/tdi-studio-se/pull/4363#discussion_r371154881", "createdAt": "2020-01-27T10:13:59Z", "author": {"login": "ypiel-talend"}, "path": "main/plugins/org.talend.designer.components.localprovider/components/templates/_tableActionForBulk.javajet", "diffHunk": "@@ -205,7 +206,33 @@ if (!isParallelize) {\n \t\t\t\t\t<%if(isLog4jEnabled_tableAction){%>\n \t\t\t\t\t\tlog.info(\"<%=cid%> - Creating table <%=manager.getLProtectedChar()%>\" + tableName_<%=cid%> + \"<%=manager.getRProtectedChar()%>.\");\n \t\t\t\t\t<%}%>\n-\t\t\t\t\tstmtCreate_<%=cid%>.execute(\"<%=manager.getCreateTableSQL(stmtStructure)%>)\");\n+\t\t\t\t\t<%\n+\t\t\t\t\tif (MSSQL.equalsIgnoreCase(dbmsId) && isDynamic){\n+\t\t\t\t\t%>\n+\t\t\t\t\t\troutines.system.Dynamic dynamicColumn = (Dynamic)globalMap.get(\"<%=dynamicComponentName%>\" + \"_DYNAMIC\");\n+\n+\t\t\t\t\t\t//This code should be in DynamicUtils class.\n+\t\t\t\t\t\tfor (DynamicMetadata column : dynamicColumn.metadatas){\n+\t\t\t\t\t\t\t//set maximum precision for double types\n+\t\t\t\t\t\t\t//in MSSQL double is float. Maximum precision is 53\n+\t\t\t\t\t\t\tif (column.getType().equals(\"id_Double\")){\n+\t\t\t\t\t\t\t\tcolumn.setLength(53);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "233f7c4f47f007c7f7e279d7eafa3fe6a7ecfa8c"}, "originalPosition": 93}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c30324b188e9e14475eab9908a2bc024262f3dac", "author": {"user": {"login": "Voievidko", "name": "Roman"}}, "url": "https://github.com/Talend/tdi-studio-se/commit/c30324b188e9e14475eab9908a2bc024262f3dac", "committedDate": "2020-01-31T14:10:57Z", "message": "feat(TDI-40852): add hidden values | add log"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "563c2977b0f2dfa1b5095dcec7b46942f8d9ea6e", "author": {"user": {"login": "Voievidko", "name": "Roman"}}, "url": "https://github.com/Talend/tdi-studio-se/commit/563c2977b0f2dfa1b5095dcec7b46942f8d9ea6e", "committedDate": "2020-01-31T14:13:21Z", "message": "fix(TDI-43484): tSetDynamic schema cant work with tFile***Positional (#4369)\n\n* fix(TDI-43484): throw RuntimeException if useDynamicFromFile\r\n\r\n* fix(TDI-43484): throw Exception if schema defined from file\r\n\r\n* fix(TDI-43484): code format"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ef66da75496668f3a3e9a333b508e5c19bcbdcb6", "author": {"user": {"login": "Voievidko", "name": "Roman"}}, "url": "https://github.com/Talend/tdi-studio-se/commit/ef66da75496668f3a3e9a333b508e5c19bcbdcb6", "committedDate": "2020-01-31T14:23:07Z", "message": "Revert \"fix(TDI-43484): tSetDynamic schema cant work with tFile***Positional (#4369)\" (#4379)\n\nThis reverts commit 563c2977b0f2dfa1b5095dcec7b46942f8d9ea6e."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUyMTY0NzE5", "url": "https://github.com/Talend/tdi-studio-se/pull/4363#pullrequestreview-352164719", "createdAt": "2020-02-03T10:47:32Z", "commit": {"oid": "ef66da75496668f3a3e9a333b508e5c19bcbdcb6"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "80900503e0f30ac5eb5fdde693df4d1fec8da468", "author": {"user": {"login": "Voievidko", "name": "Roman"}}, "url": "https://github.com/Talend/tdi-studio-se/commit/80900503e0f30ac5eb5fdde693df4d1fec8da468", "committedDate": "2020-02-05T08:22:59Z", "message": "feat(TDI-40852): solve problem with create table"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c3f16e062431bb473498477373ac46bbcb222cb0", "author": {"user": {"login": "Voievidko", "name": "Roman"}}, "url": "https://github.com/Talend/tdi-studio-se/commit/c3f16e062431bb473498477373ac46bbcb222cb0", "committedDate": "2020-02-05T08:24:01Z", "message": "Merge branch 'master' of github.com:Talend/tdi-studio-se into rvoievidko/TDI-40852_Add_dynamic_support_for_tMSSQLBulkExec"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8e535a75908acd920728d783927248cc0db88a32", "author": {"user": {"login": "Voievidko", "name": "Roman"}}, "url": "https://github.com/Talend/tdi-studio-se/commit/8e535a75908acd920728d783927248cc0db88a32", "committedDate": "2020-02-05T08:32:22Z", "message": "Merge branch 'rvoievidko/TDI-40852_Add_dynamic_support_for_tMSSQLBulkExec' of github.com:Talend/tdi-studio-se into rvoievidko/TDI-40852_Add_dynamic_support_for_tMSSQLBulkExec"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUzNTYwMjcy", "url": "https://github.com/Talend/tdi-studio-se/pull/4363#pullrequestreview-353560272", "createdAt": "2020-02-05T09:12:46Z", "commit": {"oid": "8e535a75908acd920728d783927248cc0db88a32"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f185ed9e471717e0a66cf53cd0767679115f7558", "author": {"user": {"login": "Voievidko", "name": "Roman"}}, "url": "https://github.com/Talend/tdi-studio-se/commit/f185ed9e471717e0a66cf53cd0767679115f7558", "committedDate": "2020-02-07T13:29:25Z", "message": "Merge branch 'master' into rvoievidko/TDI-40852_Add_dynamic_support_for_tMSSQLBulkExec"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU1MTU1OTI1", "url": "https://github.com/Talend/tdi-studio-se/pull/4363#pullrequestreview-355155925", "createdAt": "2020-02-07T13:31:46Z", "commit": {"oid": "f185ed9e471717e0a66cf53cd0767679115f7558"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4643, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}