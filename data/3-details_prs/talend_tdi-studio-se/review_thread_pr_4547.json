{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkxNDk0Njg1", "number": 4547, "reviewThreads": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxMjoyMTozMVrODp2NYw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QwNzozNDoyNFrOD2iCoQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1MjA2MzcxOnYy", "diffSide": "RIGHT", "path": "main/plugins/org.talend.designer.components.localprovider/components/tRedshiftOutputBulk/tRedshiftOutputBulk_java.xml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxMjoyMTozMVrOF5RhzA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxMjozMTozMlrOF5R0Hg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTYwMDMzMg==", "bodyText": "why add this check-box ?\nand it looks duplicate with \"Assume Role\"", "url": "https://github.com/Talend/tdi-studio-se/pull/4547#discussion_r395600332", "createdAt": "2020-03-20T12:21:31Z", "author": {"login": "jzhao-talend"}, "path": "main/plugins/org.talend.designer.components.localprovider/components/tRedshiftOutputBulk/tRedshiftOutputBulk_java.xml", "diffHunk": "@@ -281,6 +260,114 @@\n \t\t\t\t<ITEM NAME=\"VALUE\" />\n \t\t\t</ITEMS>\n \t\t</PARAMETER>\n+\t\t\n+\t\t<PARAMETER\n+\t      NAME=\"CONFIG_ASSUME_ROLE\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "65af7d11644e15094198f4397dcb8cfc704a0067"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTYwNTAyMg==", "bodyText": "and where did it used in javajet?", "url": "https://github.com/Talend/tdi-studio-se/pull/4547#discussion_r395605022", "createdAt": "2020-03-20T12:31:32Z", "author": {"login": "jzhao-talend"}, "path": "main/plugins/org.talend.designer.components.localprovider/components/tRedshiftOutputBulk/tRedshiftOutputBulk_java.xml", "diffHunk": "@@ -281,6 +260,114 @@\n \t\t\t\t<ITEM NAME=\"VALUE\" />\n \t\t\t</ITEMS>\n \t\t</PARAMETER>\n+\t\t\n+\t\t<PARAMETER\n+\t      NAME=\"CONFIG_ASSUME_ROLE\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTYwMDMzMg=="}, "originalCommit": {"oid": "65af7d11644e15094198f4397dcb8cfc704a0067"}, "originalPosition": 41}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1MjA2ODE0OnYy", "diffSide": "RIGHT", "path": "main/plugins/org.talend.designer.components.localprovider/components/tRedshiftOutputBulk/tRedshiftOutputBulk_java.xml", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxMjoyMzowNVrOF5Rkeg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxMjoyMzowNVrOF5Rkeg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTYwMTAxOA==", "bodyText": "after you add CONFIG_ASSUME_ROLE, how can you make this work which old job checked \"SET_STS_ENDPOINT\"?", "url": "https://github.com/Talend/tdi-studio-se/pull/4547#discussion_r395601018", "createdAt": "2020-03-20T12:23:05Z", "author": {"login": "jzhao-talend"}, "path": "main/plugins/org.talend.designer.components.localprovider/components/tRedshiftOutputBulk/tRedshiftOutputBulk_java.xml", "diffHunk": "@@ -281,6 +260,114 @@\n \t\t\t\t<ITEM NAME=\"VALUE\" />\n \t\t\t</ITEMS>\n \t\t</PARAMETER>\n+\t\t\n+\t\t<PARAMETER\n+\t      NAME=\"CONFIG_ASSUME_ROLE\"\n+\t      FIELD=\"CHECK\"\n+\t      NUM_ROW=\"50\"\n+\t      NB_LINES=\"5\"\n+\t      GROUP=\"ASSUME_ROLE_CONFIG\"\n+\t      SHOW_IF=\"isShow[ASSUME_ROLE] AND (ASSUME_ROLE == 'true')\"\n+\t    >\n+\t    </PARAMETER>\n+\t    \n+\t    <PARAMETER\n+\t      NAME=\"SIGNING_REGION\"\n+\t      FIELD=\"TEXT\"\n+\t      NUM_ROW=\"51\"\n+\t      GROUP=\"ASSUME_ROLE_CONFIG\"\n+\t      REQUIRED=\"true\"\n+\t      SHOW_IF=\"isShow[ASSUME_ROLE] AND (ASSUME_ROLE == 'true') AND (CONFIG_ASSUME_ROLE == 'true')\"\n+\t    >\n+\t      <DEFAULT>\"\"</DEFAULT>\n+\t    </PARAMETER>\n+\t    \n+\t    <PARAMETER\n+\t      NAME=\"SET_STS_ENDPOINT\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "65af7d11644e15094198f4397dcb8cfc704a0067"}, "originalPosition": 62}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1MjExNDc3OnYy", "diffSide": "RIGHT", "path": "main/plugins/org.talend.designer.components.localprovider/components/tRedshiftOutputBulk/tRedshiftOutputBulk_java.xml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxMjozODoyNlrOF5SBaA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxMjo0NzozMlrOF5SSlw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTYwODQyNA==", "bodyText": "is this region list is fixed? why can't provide a drop-down list let customer pick up?", "url": "https://github.com/Talend/tdi-studio-se/pull/4547#discussion_r395608424", "createdAt": "2020-03-20T12:38:26Z", "author": {"login": "jzhao-talend"}, "path": "main/plugins/org.talend.designer.components.localprovider/components/tRedshiftOutputBulk/tRedshiftOutputBulk_java.xml", "diffHunk": "@@ -281,6 +260,114 @@\n \t\t\t\t<ITEM NAME=\"VALUE\" />\n \t\t\t</ITEMS>\n \t\t</PARAMETER>\n+\t\t\n+\t\t<PARAMETER\n+\t      NAME=\"CONFIG_ASSUME_ROLE\"\n+\t      FIELD=\"CHECK\"\n+\t      NUM_ROW=\"50\"\n+\t      NB_LINES=\"5\"\n+\t      GROUP=\"ASSUME_ROLE_CONFIG\"\n+\t      SHOW_IF=\"isShow[ASSUME_ROLE] AND (ASSUME_ROLE == 'true')\"\n+\t    >\n+\t    </PARAMETER>\n+\t    \n+\t    <PARAMETER\n+\t      NAME=\"SIGNING_REGION\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "65af7d11644e15094198f4397dcb8cfc704a0067"}, "originalPosition": 51}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTYxMjgyMw==", "bodyText": "i remember this parameter must be set if the \"SET_STS_ENDPOINT\" checked\nso better add require_if for this parameter.", "url": "https://github.com/Talend/tdi-studio-se/pull/4547#discussion_r395612823", "createdAt": "2020-03-20T12:47:32Z", "author": {"login": "jzhao-talend"}, "path": "main/plugins/org.talend.designer.components.localprovider/components/tRedshiftOutputBulk/tRedshiftOutputBulk_java.xml", "diffHunk": "@@ -281,6 +260,114 @@\n \t\t\t\t<ITEM NAME=\"VALUE\" />\n \t\t\t</ITEMS>\n \t\t</PARAMETER>\n+\t\t\n+\t\t<PARAMETER\n+\t      NAME=\"CONFIG_ASSUME_ROLE\"\n+\t      FIELD=\"CHECK\"\n+\t      NUM_ROW=\"50\"\n+\t      NB_LINES=\"5\"\n+\t      GROUP=\"ASSUME_ROLE_CONFIG\"\n+\t      SHOW_IF=\"isShow[ASSUME_ROLE] AND (ASSUME_ROLE == 'true')\"\n+\t    >\n+\t    </PARAMETER>\n+\t    \n+\t    <PARAMETER\n+\t      NAME=\"SIGNING_REGION\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTYwODQyNA=="}, "originalCommit": {"oid": "65af7d11644e15094198f4397dcb8cfc704a0067"}, "originalPosition": 51}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1MjE3NjkxOnYy", "diffSide": "LEFT", "path": "main/plugins/org.talend.designer.components.localprovider/components/tRedshiftOutputBulk/tRedshiftOutputBulk_java.xml", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxMjo1ODozNVrOF5So3Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxMjo1ODozNVrOF5So3Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTYxODUyNQ==", "bodyText": "seems you didn't change tRedshiftOutputBulkExec", "url": "https://github.com/Talend/tdi-studio-se/pull/4547#discussion_r395618525", "createdAt": "2020-03-20T12:58:35Z", "author": {"login": "jzhao-talend"}, "path": "main/plugins/org.talend.designer.components.localprovider/components/tRedshiftOutputBulk/tRedshiftOutputBulk_java.xml", "diffHunk": "@@ -182,26 +181,6 @@\n \t    \t</ITEMS>\n \t    </PARAMETER>\n \t    \n-\t    <PARAMETER\n-\t      NAME=\"SET_STS_ENDPOINT\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "65af7d11644e15094198f4397dcb8cfc704a0067"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ2MDE4NTEzOnYy", "diffSide": "RIGHT", "path": "main/plugins/org.talend.designer.components.localprovider/components/tRedshiftOutputBulkExec/tRedshiftOutputBulkExec_java.xml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQwMjoyMDo0NFrOF6e0vw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQwMjoyMDo0NFrOF6e0vw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Njg2Njc1MQ==", "bodyText": "i think this show_if can be shorter: isShow[SET_STS_ENDPOINT ] AND (SET_STS_ENDPOINT == 'true')", "url": "https://github.com/Talend/tdi-studio-se/pull/4547#discussion_r396866751", "createdAt": "2020-03-24T02:20:44Z", "author": {"login": "jzhao-talend"}, "path": "main/plugins/org.talend.designer.components.localprovider/components/tRedshiftOutputBulkExec/tRedshiftOutputBulkExec_java.xml", "diffHunk": "@@ -433,7 +412,124 @@\n \t\t\t\t<ITEM NAME=\"VALUE\" />\n \t\t\t</ITEMS>\n \t\t</PARAMETER>\n-\n+\t\t<PARAMETER\n+          NAME=\"SET_STS_ENDPOINT\"\n+          FIELD=\"CHECK\"\n+          NUM_ROW=\"81\"\n+          NB_LINES=\"5\"\n+          SHOW_IF=\"isShow[ASSUME_ROLE_S3] AND (ASSUME_ROLE_S3 == 'true')\"\n+          GROUP=\"ASSUME_ROLE_CONFIG\"\n+        >\n+        </PARAMETER>\n+        <PARAMETER\n+          NAME=\"STS_ENDPOINT\"\n+          FIELD=\"TEXT\"\n+          NUM_ROW=\"81\"\n+          SHOW_IF=\"isShow[ASSUME_ROLE_S3] AND (ASSUME_ROLE_S3 == 'true') AND (SET_STS_ENDPOINT == 'true')\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6a5acf816f01208d23faf530845024655e13cc78"}, "originalPosition": 52}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ2MDIzOTQxOnYy", "diffSide": "RIGHT", "path": "main/plugins/org.talend.designer.components.localprovider/components/tS3Connection/S3Client.javajet", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQwMjo1NDo1OFrOF6fWSg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQwMzo1MToxM1rOF6gJSg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Njg3NTMzOA==", "bodyText": "this part of code can be improve. you can set signingRegion \"US_EAST_1\", if set_signingRegion is false\nonly call withRegion(<%=signingRegion%>)", "url": "https://github.com/Talend/tdi-studio-se/pull/4547#discussion_r396875338", "createdAt": "2020-03-24T02:54:58Z", "author": {"login": "jzhao-talend"}, "path": "main/plugins/org.talend.designer.components.localprovider/components/tS3Connection/S3Client.javajet", "diffHunk": "@@ -225,22 +234,117 @@\n \t\t}\r\n \t\t\r\n \t\tif(assumeRole) {\r\n+\t\t\tint policyListSize = policyList.size();\r\n+\t\t\tint tagInfoListSize = tagInfoList.size();\r\n \t\t%>\r\n+\t\t\tint policyListSize_<%=cid%> = <%=policyListSize%>;\r\n+\t\t\tint tagInfoListSize_<%=cid%> = <%=tagInfoListSize%>;\r\n \t\t\tint sessionDurationSeconds_<%=cid%> = <%=sessionDuration%> * 60;\r\n-\t\t\tcom.amazonaws.auth.STSAssumeRoleSessionCredentialsProvider.Builder stsBuilder_<%=cid%> = \r\n-\t\t\t\t\tnew com.amazonaws.auth.STSAssumeRoleSessionCredentialsProvider.Builder(<%=arn%>, <%=roleSessionName%>).withLongLivedCredentialsProvider(credentialsProvider_<%=cid%>)\r\n-\t\t\t\t\t.withRoleSessionDurationSeconds(sessionDurationSeconds_<%=cid%>);\r\n-\t\t\t\t\t\r\n-\t\t\t<%\r\n-\t\t\tif(setStsEndpoint) {\r\n-\t\t\t%>\r\n-\t\t\t\tstsBuilder_<%=cid%>.withServiceEndpoint(<%=stsEndpoint%>);\r\n-\t\t\t<%\r\n-\t\t\t}\r\n+\t\t\t\r\n+    \t\tList<com.amazonaws.services.securitytoken.model.PolicyDescriptorType> policyArnList_<%=cid%> = null;\r\n+    \t\t\t\r\n+    \t\t<%\r\n+\t\t\t\tif(policyListSize > 0){\r\n+\t        %>\r\n+\t                policyArnList_<%=cid%> = new java.util.ArrayList<com.amazonaws.services.securitytoken.model.PolicyDescriptorType>();\r\n+\t        <%\r\n+\t        \t\tfor(int policyListIndex = 0; policyListIndex < policyListSize; policyListIndex++){\r\n+\t        \t\t\tString policyArn = policyList.get(policyListIndex).get(\"POLICY_ARN\");\r\n+\t        %>\r\n+\t        \t\t\tcom.amazonaws.services.securitytoken.model.PolicyDescriptorType pdt_<%=cid%> = \r\n+\t        \t\t\t\tnew com.amazonaws.services.securitytoken.model.PolicyDescriptorType().withArn(<%=policyArn%>);\r\n+\t        \t\t\tpolicyArnList_<%=cid%>.add(pdt_<%=cid%>);\r\n+\t        <%\r\n+\t        \t\t}\r\n+\t        \t}\r\n+        \t%>\r\n+    \t\tList<com.amazonaws.services.securitytoken.model.Tag> tagList_<%=cid%> = null;\r\n+    \t\tList<String> tranTagKeys_<%=cid%> = null;\r\n+    \t\t\r\n+    \t\t<%\r\n+\t        \tif(tagInfoListSize > 0){\r\n+\t        %>\r\n+\t        \t\ttagList_<%=cid%> = new java.util.ArrayList<com.amazonaws.services.securitytoken.model.Tag>();\r\n+\t        \t\ttranTagKeys_<%=cid%> = new java.util.ArrayList<String>();\r\n+\t        <%\r\n+\t        \t\tfor(int tagInfoListIndex = 0; tagInfoListIndex < tagInfoListSize; tagInfoListIndex++){\r\n+\t        \t\t\tString tagKey = tagInfoList.get(tagInfoListIndex).get(\"TAG_KEY\");\r\n+\t        \t\t\tString tagValue = tagInfoList.get(tagInfoListIndex).get(\"TAG_VALUE\");\r\n+\t        \t\t\tString tagTransitive = tagInfoList.get(tagInfoListIndex).get(\"TAG_TRANSITIVE\");\r\n+\t        %>\r\n+\t        \t\t\tcom.amazonaws.services.securitytoken.model.Tag tag_<%=cid%> = \r\n+\t        \t\t\t\tnew com.amazonaws.services.securitytoken.model.Tag().withKey(<%=tagKey%>).withValue(<%=tagValue%>);\r\n+\t        \t\t\ttagList_<%=cid%>.add(tag_<%=cid%>);\r\n+\t        \t\t\t\r\n+\t        \t\t\tif(\"true\".equals(<%=tagTransitive%>))\r\n+\t        \t\t\t\ttranTagKeys_<%=cid%>.add(<%=tagKey%>);\r\n+\t        <%\r\n+\t        \t\t}\r\n+\t\t\t\t}\r\n \t\t\t%>\r\n-\t\t\tstsBuilder_<%=cid%>.withClientConfiguration(cc_<%=cid%>);\r\n \t\t\t\r\n-\t\t\tcredentialsProvider_<%=cid%> = stsBuilder_<%=cid%>.build();\r\n+\t\t\tcom.amazonaws.services.securitytoken.AWSSecurityTokenService stsClient_<%=cid%> = \r\n+\t\t\t\t\tcom.amazonaws.services.securitytoken.AWSSecurityTokenServiceClientBuilder.standard()\r\n+\t\t\t\t\t.withCredentials(credentialsProvider_<%=cid%>)\r\n+\t\t\t\t\t<%if(setStsEndpoint && stsEndpoint != null && !stsEndpoint.isEmpty()){%>\r\n+\t\t\t\t\t\r\n+\t\t\t\t\t\t<%if(set_signingRegion){%>\r\n+\t\t\t\t\t\t.withEndpointConfiguration(new com.amazonaws.client.builder.AwsClientBuilder.EndpointConfiguration(<%=stsEndpoint%>, <%=signingRegion%>))\r\n+\t\t\t\t\t\t<%}else{%>\r\n+\t\t\t\t\t\t.withEndpointConfiguration(new com.amazonaws.client.builder.AwsClientBuilder.EndpointConfiguration(<%=stsEndpoint%>, null))\r\n+\t\t\t\t\t\t<%}%>\r\n+\t\t\t\t\t\t\r\n+\t\t\t\t\t<%}else{%>\r\n+\t\t\t\t\t\r\n+\t\t\t\t\t\t<%if(set_signingRegion){%>\r\n+\t\t\t\t\t\t.withRegion(<%=signingRegion%>)\r\n+\t\t\t\t\t\t<%}else{%>\r\n+\t\t\t\t\t\t.withRegion(com.amazonaws.regions.Regions.US_EAST_1)\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6a5acf816f01208d23faf530845024655e13cc78"}, "originalPosition": 100}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Njg4ODM5NA==", "bodyText": "Ok, thank you.", "url": "https://github.com/Talend/tdi-studio-se/pull/4547#discussion_r396888394", "createdAt": "2020-03-24T03:51:13Z", "author": {"login": "vyu-talend"}, "path": "main/plugins/org.talend.designer.components.localprovider/components/tS3Connection/S3Client.javajet", "diffHunk": "@@ -225,22 +234,117 @@\n \t\t}\r\n \t\t\r\n \t\tif(assumeRole) {\r\n+\t\t\tint policyListSize = policyList.size();\r\n+\t\t\tint tagInfoListSize = tagInfoList.size();\r\n \t\t%>\r\n+\t\t\tint policyListSize_<%=cid%> = <%=policyListSize%>;\r\n+\t\t\tint tagInfoListSize_<%=cid%> = <%=tagInfoListSize%>;\r\n \t\t\tint sessionDurationSeconds_<%=cid%> = <%=sessionDuration%> * 60;\r\n-\t\t\tcom.amazonaws.auth.STSAssumeRoleSessionCredentialsProvider.Builder stsBuilder_<%=cid%> = \r\n-\t\t\t\t\tnew com.amazonaws.auth.STSAssumeRoleSessionCredentialsProvider.Builder(<%=arn%>, <%=roleSessionName%>).withLongLivedCredentialsProvider(credentialsProvider_<%=cid%>)\r\n-\t\t\t\t\t.withRoleSessionDurationSeconds(sessionDurationSeconds_<%=cid%>);\r\n-\t\t\t\t\t\r\n-\t\t\t<%\r\n-\t\t\tif(setStsEndpoint) {\r\n-\t\t\t%>\r\n-\t\t\t\tstsBuilder_<%=cid%>.withServiceEndpoint(<%=stsEndpoint%>);\r\n-\t\t\t<%\r\n-\t\t\t}\r\n+\t\t\t\r\n+    \t\tList<com.amazonaws.services.securitytoken.model.PolicyDescriptorType> policyArnList_<%=cid%> = null;\r\n+    \t\t\t\r\n+    \t\t<%\r\n+\t\t\t\tif(policyListSize > 0){\r\n+\t        %>\r\n+\t                policyArnList_<%=cid%> = new java.util.ArrayList<com.amazonaws.services.securitytoken.model.PolicyDescriptorType>();\r\n+\t        <%\r\n+\t        \t\tfor(int policyListIndex = 0; policyListIndex < policyListSize; policyListIndex++){\r\n+\t        \t\t\tString policyArn = policyList.get(policyListIndex).get(\"POLICY_ARN\");\r\n+\t        %>\r\n+\t        \t\t\tcom.amazonaws.services.securitytoken.model.PolicyDescriptorType pdt_<%=cid%> = \r\n+\t        \t\t\t\tnew com.amazonaws.services.securitytoken.model.PolicyDescriptorType().withArn(<%=policyArn%>);\r\n+\t        \t\t\tpolicyArnList_<%=cid%>.add(pdt_<%=cid%>);\r\n+\t        <%\r\n+\t        \t\t}\r\n+\t        \t}\r\n+        \t%>\r\n+    \t\tList<com.amazonaws.services.securitytoken.model.Tag> tagList_<%=cid%> = null;\r\n+    \t\tList<String> tranTagKeys_<%=cid%> = null;\r\n+    \t\t\r\n+    \t\t<%\r\n+\t        \tif(tagInfoListSize > 0){\r\n+\t        %>\r\n+\t        \t\ttagList_<%=cid%> = new java.util.ArrayList<com.amazonaws.services.securitytoken.model.Tag>();\r\n+\t        \t\ttranTagKeys_<%=cid%> = new java.util.ArrayList<String>();\r\n+\t        <%\r\n+\t        \t\tfor(int tagInfoListIndex = 0; tagInfoListIndex < tagInfoListSize; tagInfoListIndex++){\r\n+\t        \t\t\tString tagKey = tagInfoList.get(tagInfoListIndex).get(\"TAG_KEY\");\r\n+\t        \t\t\tString tagValue = tagInfoList.get(tagInfoListIndex).get(\"TAG_VALUE\");\r\n+\t        \t\t\tString tagTransitive = tagInfoList.get(tagInfoListIndex).get(\"TAG_TRANSITIVE\");\r\n+\t        %>\r\n+\t        \t\t\tcom.amazonaws.services.securitytoken.model.Tag tag_<%=cid%> = \r\n+\t        \t\t\t\tnew com.amazonaws.services.securitytoken.model.Tag().withKey(<%=tagKey%>).withValue(<%=tagValue%>);\r\n+\t        \t\t\ttagList_<%=cid%>.add(tag_<%=cid%>);\r\n+\t        \t\t\t\r\n+\t        \t\t\tif(\"true\".equals(<%=tagTransitive%>))\r\n+\t        \t\t\t\ttranTagKeys_<%=cid%>.add(<%=tagKey%>);\r\n+\t        <%\r\n+\t        \t\t}\r\n+\t\t\t\t}\r\n \t\t\t%>\r\n-\t\t\tstsBuilder_<%=cid%>.withClientConfiguration(cc_<%=cid%>);\r\n \t\t\t\r\n-\t\t\tcredentialsProvider_<%=cid%> = stsBuilder_<%=cid%>.build();\r\n+\t\t\tcom.amazonaws.services.securitytoken.AWSSecurityTokenService stsClient_<%=cid%> = \r\n+\t\t\t\t\tcom.amazonaws.services.securitytoken.AWSSecurityTokenServiceClientBuilder.standard()\r\n+\t\t\t\t\t.withCredentials(credentialsProvider_<%=cid%>)\r\n+\t\t\t\t\t<%if(setStsEndpoint && stsEndpoint != null && !stsEndpoint.isEmpty()){%>\r\n+\t\t\t\t\t\r\n+\t\t\t\t\t\t<%if(set_signingRegion){%>\r\n+\t\t\t\t\t\t.withEndpointConfiguration(new com.amazonaws.client.builder.AwsClientBuilder.EndpointConfiguration(<%=stsEndpoint%>, <%=signingRegion%>))\r\n+\t\t\t\t\t\t<%}else{%>\r\n+\t\t\t\t\t\t.withEndpointConfiguration(new com.amazonaws.client.builder.AwsClientBuilder.EndpointConfiguration(<%=stsEndpoint%>, null))\r\n+\t\t\t\t\t\t<%}%>\r\n+\t\t\t\t\t\t\r\n+\t\t\t\t\t<%}else{%>\r\n+\t\t\t\t\t\r\n+\t\t\t\t\t\t<%if(set_signingRegion){%>\r\n+\t\t\t\t\t\t.withRegion(<%=signingRegion%>)\r\n+\t\t\t\t\t\t<%}else{%>\r\n+\t\t\t\t\t\t.withRegion(com.amazonaws.regions.Regions.US_EAST_1)\r", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Njg3NTMzOA=="}, "originalCommit": {"oid": "6a5acf816f01208d23faf530845024655e13cc78"}, "originalPosition": 100}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ3MDIxMjM0OnYy", "diffSide": "RIGHT", "path": "main/plugins/org.talend.designer.components.localprovider/components/tS3Connection/tS3Connection_java.xml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQxMDoxOToxOVrOF8ACcg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQxMDoxOToxOVrOF8ACcg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODQ1OTUwNg==", "bodyText": "please note that: don't include change which plan to fix in other PR", "url": "https://github.com/Talend/tdi-studio-se/pull/4547#discussion_r398459506", "createdAt": "2020-03-26T10:19:19Z", "author": {"login": "jzhao-talend"}, "path": "main/plugins/org.talend.designer.components.localprovider/components/tS3Connection/tS3Connection_java.xml", "diffHunk": "@@ -337,8 +438,8 @@\n \n    <CODEGENERATION>\n     <IMPORTS>\n-       <IMPORT NAME=\"aws-java-sdk-1.11.406.jar\" MODULE=\"aws-java-sdk-1.11.406.jar\"\n-\t\t\tMVN=\"mvn:com.amazonaws/aws-java-sdk/1.11.406\"\n+       <IMPORT NAME=\"aws-java-sdk-1.11.729.jar\" MODULE=\"aws-java-sdk-1.11.729.jar\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5e4bf0e8918d6928f7a760c5264f70b17d6a9061"}, "originalPosition": 230}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU4NTA3NDI1OnYy", "diffSide": "RIGHT", "path": "main/plugins/org.talend.designer.components.localprovider/components/tSQSConnection/SQSClient.javajet", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QwNzozNDoyNFrOGMU6mg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QwNzo0NToyM1rOGMVVWA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTU3ODc3OA==", "bodyText": "Isn't this tagInfoList a List<Map<String,String>> ? why convert directly to boolean? Are you sure it works?", "url": "https://github.com/Talend/tdi-studio-se/pull/4547#discussion_r415578778", "createdAt": "2020-04-27T07:34:24Z", "author": {"login": "pyzhou-talend"}, "path": "main/plugins/org.talend.designer.components.localprovider/components/tSQSConnection/SQSClient.javajet", "diffHunk": "@@ -98,22 +107,115 @@\n \t\t\t}\r\n \t\t}\r\n \t\tif(assumeRole) {\r\n+\t\t\tint policyListSize = policyList.size();\r\n+\t\t\tint tagInfoListSize = tagInfoList.size();\r\n \t\t%>\r\n+\t\t\tint policyListSize_<%=cid%> = <%=policyListSize%>;\r\n+\t\t\tint tagInfoListSize_<%=cid%> = <%=tagInfoListSize%>;\r\n \t\t\tint sessionDurationSeconds_<%=cid%> = <%=sessionDuration%> * 60;\r\n-\t\t\tcom.amazonaws.auth.STSAssumeRoleSessionCredentialsProvider.Builder stsBuilder_<%=cid%> = \r\n-\t\t\t\t\tnew com.amazonaws.auth.STSAssumeRoleSessionCredentialsProvider.Builder(<%=arn%>, <%=roleSessionName%>).withLongLivedCredentialsProvider(credentialsProvider_<%=cid%>)\r\n-\t\t\t\t\t.withRoleSessionDurationSeconds(sessionDurationSeconds_<%=cid%>);\r\n-\t\t\t\t\t\r\n-\t\t\t<%\r\n-\t\t\tif(setStsEndpoint) {\r\n-\t\t\t%>\r\n-\t\t\t\tstsBuilder_<%=cid%>.withServiceEndpoint(<%=stsEndpoint%>);\r\n-\t\t\t<%\r\n-\t\t\t}\r\n+\t\t\tList<com.amazonaws.services.securitytoken.model.PolicyDescriptorType> policyArnList_<%=cid%> = null;\r\n+    \t\t\t\r\n+    \t\t<%\r\n+\t\t\t\tif(policyListSize > 0){\r\n+\t        %>\r\n+\t                policyArnList_<%=cid%> = new java.util.ArrayList<com.amazonaws.services.securitytoken.model.PolicyDescriptorType>();\r\n+\t        <%\r\n+\t        \t\tfor(int policyListIndex = 0; policyListIndex < policyListSize; policyListIndex++){\r\n+\t        \t\t\tString policyArn = policyList.get(policyListIndex).get(\"POLICY_ARN\");\r\n+\t        %>\r\n+\t        \t\t\tpolicyArnList_<%=cid%>.add(new com.amazonaws.services.securitytoken.model.PolicyDescriptorType().withArn(<%=policyArn%>));\r\n+\t        <%\r\n+\t        \t\t}\r\n+\t        \t}\r\n+        \t%>\r\n+    \t\tList<com.amazonaws.services.securitytoken.model.Tag> tagList_<%=cid%> = null;\r\n+    \t\tList<String> tranTagKeys_<%=cid%> = null;\r\n+    \t\t\r\n+    \t\t<%\r\n+\t        \tif(tagInfoListSize > 0){\r\n+\t        %>\r\n+\t        \t\ttagList_<%=cid%> = new java.util.ArrayList<com.amazonaws.services.securitytoken.model.Tag>();\r\n+\t        \t\ttranTagKeys_<%=cid%> = new java.util.ArrayList<String>();\r\n+\t        <%\r\n+\t        \t\tfor(int tagInfoListIndex = 0; tagInfoListIndex < tagInfoListSize; tagInfoListIndex++){\r\n+\t        \t\t\tString tagKey = tagInfoList.get(tagInfoListIndex).get(\"TAG_KEY\");\r\n+\t        \t\t\tString tagValue = tagInfoList.get(tagInfoListIndex).get(\"TAG_VALUE\");\r\n+\t        \t\t\tboolean tagTransitive = tagInfoList.get(tagInfoListIndex).get(\"TAG_TRANSITIVE\");\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a595d27e011a7a558e085dbd3f11a8280df13615"}, "originalPosition": 66}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTU4NTYyNA==", "bodyText": "yes, I've checked it. Actually, I have the same question as you. It will throw an exception if I get it as a string. It is so strange.", "url": "https://github.com/Talend/tdi-studio-se/pull/4547#discussion_r415585624", "createdAt": "2020-04-27T07:45:23Z", "author": {"login": "vyu-talend"}, "path": "main/plugins/org.talend.designer.components.localprovider/components/tSQSConnection/SQSClient.javajet", "diffHunk": "@@ -98,22 +107,115 @@\n \t\t\t}\r\n \t\t}\r\n \t\tif(assumeRole) {\r\n+\t\t\tint policyListSize = policyList.size();\r\n+\t\t\tint tagInfoListSize = tagInfoList.size();\r\n \t\t%>\r\n+\t\t\tint policyListSize_<%=cid%> = <%=policyListSize%>;\r\n+\t\t\tint tagInfoListSize_<%=cid%> = <%=tagInfoListSize%>;\r\n \t\t\tint sessionDurationSeconds_<%=cid%> = <%=sessionDuration%> * 60;\r\n-\t\t\tcom.amazonaws.auth.STSAssumeRoleSessionCredentialsProvider.Builder stsBuilder_<%=cid%> = \r\n-\t\t\t\t\tnew com.amazonaws.auth.STSAssumeRoleSessionCredentialsProvider.Builder(<%=arn%>, <%=roleSessionName%>).withLongLivedCredentialsProvider(credentialsProvider_<%=cid%>)\r\n-\t\t\t\t\t.withRoleSessionDurationSeconds(sessionDurationSeconds_<%=cid%>);\r\n-\t\t\t\t\t\r\n-\t\t\t<%\r\n-\t\t\tif(setStsEndpoint) {\r\n-\t\t\t%>\r\n-\t\t\t\tstsBuilder_<%=cid%>.withServiceEndpoint(<%=stsEndpoint%>);\r\n-\t\t\t<%\r\n-\t\t\t}\r\n+\t\t\tList<com.amazonaws.services.securitytoken.model.PolicyDescriptorType> policyArnList_<%=cid%> = null;\r\n+    \t\t\t\r\n+    \t\t<%\r\n+\t\t\t\tif(policyListSize > 0){\r\n+\t        %>\r\n+\t                policyArnList_<%=cid%> = new java.util.ArrayList<com.amazonaws.services.securitytoken.model.PolicyDescriptorType>();\r\n+\t        <%\r\n+\t        \t\tfor(int policyListIndex = 0; policyListIndex < policyListSize; policyListIndex++){\r\n+\t        \t\t\tString policyArn = policyList.get(policyListIndex).get(\"POLICY_ARN\");\r\n+\t        %>\r\n+\t        \t\t\tpolicyArnList_<%=cid%>.add(new com.amazonaws.services.securitytoken.model.PolicyDescriptorType().withArn(<%=policyArn%>));\r\n+\t        <%\r\n+\t        \t\t}\r\n+\t        \t}\r\n+        \t%>\r\n+    \t\tList<com.amazonaws.services.securitytoken.model.Tag> tagList_<%=cid%> = null;\r\n+    \t\tList<String> tranTagKeys_<%=cid%> = null;\r\n+    \t\t\r\n+    \t\t<%\r\n+\t        \tif(tagInfoListSize > 0){\r\n+\t        %>\r\n+\t        \t\ttagList_<%=cid%> = new java.util.ArrayList<com.amazonaws.services.securitytoken.model.Tag>();\r\n+\t        \t\ttranTagKeys_<%=cid%> = new java.util.ArrayList<String>();\r\n+\t        <%\r\n+\t        \t\tfor(int tagInfoListIndex = 0; tagInfoListIndex < tagInfoListSize; tagInfoListIndex++){\r\n+\t        \t\t\tString tagKey = tagInfoList.get(tagInfoListIndex).get(\"TAG_KEY\");\r\n+\t        \t\t\tString tagValue = tagInfoList.get(tagInfoListIndex).get(\"TAG_VALUE\");\r\n+\t        \t\t\tboolean tagTransitive = tagInfoList.get(tagInfoListIndex).get(\"TAG_TRANSITIVE\");\r", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTU3ODc3OA=="}, "originalCommit": {"oid": "a595d27e011a7a558e085dbd3f11a8280df13615"}, "originalPosition": 66}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4529, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}