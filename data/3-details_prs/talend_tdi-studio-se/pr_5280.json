{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkzNjgyMzEy", "number": 5280, "title": "feat(TESB-29271): Route debuging feature", "bodyText": "What is the current behavior? (You can also link to an open issue here)\nWhat is the new behavior?\nPlease check if the PR fulfills these requirements\n\n The commit message follows Talend standard\n Tests for the changes have been added (for bug fixes / features)\n Docs have been added / updated (for bug fixes / features) ?\n The code coverage on new code >75%\n The new code does not introduce new technical issues (sonar / eslint)\n\nWhat kind of change does this PR introduce?\n\n Bugfix\n Feature\n Code style update (formatting, local variables)\n Refactoring (no functional changes, no api changes)\n Build / CI related changes\n Other... Please describe:\n\nDoes this PR introduce a breaking change?\n\n Yes\n No\n\nIf this PR contains a breaking change, please describe the impact and migration path for existing applications: ...\nOther information:", "createdAt": "2020-09-27T07:17:27Z", "url": "https://github.com/Talend/tdi-studio-se/pull/5280", "merged": true, "mergeCommit": {"oid": "03eeaac50781b003a551c90ea4eb2b7b92cf291c"}, "closed": true, "closedAt": "2020-10-07T13:50:36Z", "author": {"login": "yanbasic"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdM2uP9gH2gAyNDkzNjgyMzEyOjQ2MTBiZWE0N2YxMGRjNTdlZWEwNDUxNjRlNzUxMDAyZTNlYmFiNmQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdQNKARgFqTUwMzg4OTI1MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "4610bea47f10dc57eea045164e751002e3ebab6d", "author": {"user": {"login": "yanbasic", "name": "Mike Yan"}}, "url": "https://github.com/Talend/tdi-studio-se/commit/4610bea47f10dc57eea045164e751002e3ebab6d", "committedDate": "2020-09-27T03:49:43Z", "message": "feat(TESB-29271):Initical update for route debugger"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4f84bfefec4d0d28789b3d6d70a13c3caa910db6", "author": {"user": {"login": "yanbasic", "name": "Mike Yan"}}, "url": "https://github.com/Talend/tdi-studio-se/commit/4f84bfefec4d0d28789b3d6d70a13c3caa910db6", "committedDate": "2020-09-27T03:57:18Z", "message": "feat(TESB-29271): conditional breakpoint component tab"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a02aed322847d8d1e9d0549c71428b63df199d99", "author": {"user": {"login": "yanbasic", "name": "Mike Yan"}}, "url": "https://github.com/Talend/tdi-studio-se/commit/a02aed322847d8d1e9d0549c71428b63df199d99", "committedDate": "2020-09-27T03:57:36Z", "message": "feat(TESB-29271): Route debuging feature"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk5MDQzNjQ1", "url": "https://github.com/Talend/tdi-studio-se/pull/5280#pullrequestreview-499043645", "createdAt": "2020-09-30T02:25:47Z", "commit": {"oid": "a02aed322847d8d1e9d0549c71428b63df199d99"}, "state": "COMMENTED", "comments": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQwMjoyNTo0N1rOHaLISA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQwMjo1OTo1N1rOHaLnsQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzIwNzM2OA==", "bodyText": "strange if block here, means these parameters can also be add into product without ESB?", "url": "https://github.com/Talend/tdi-studio-se/pull/5280#discussion_r497207368", "createdAt": "2020-09-30T02:25:47Z", "author": {"login": "cmeng-talend"}, "path": "main/plugins/org.talend.designer.core/src/main/java/org/talend/designer/core/model/components/EmfComponent.java", "diffHunk": "@@ -1001,6 +1004,98 @@ public void addViewParameters(final List<ElementParameter> listParam, INode node\n         param.setDefaultValue(param.getValue());\n         listParam.add(param);\n     }\n+    \n+    //rename for route break points\n+    public void addRouteExpressionParameters(final List<ElementParameter> listParam, INode node) {\n+        if (PluginChecker.isTeamEdition() && !ComponentCategory.CATEGORY_4_CAMEL.getName().equals(getPaletteType())) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a02aed322847d8d1e9d0549c71428b63df199d99"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzIwNzQ0OQ==", "bodyText": "not sure whether need i18n", "url": "https://github.com/Talend/tdi-studio-se/pull/5280#discussion_r497207449", "createdAt": "2020-09-30T02:26:05Z", "author": {"login": "cmeng-talend"}, "path": "main/plugins/org.talend.designer.core/src/main/java/org/talend/designer/core/model/components/EmfComponent.java", "diffHunk": "@@ -1001,6 +1004,98 @@ public void addViewParameters(final List<ElementParameter> listParam, INode node\n         param.setDefaultValue(param.getValue());\n         listParam.add(param);\n     }\n+    \n+    //rename for route break points\n+    public void addRouteExpressionParameters(final List<ElementParameter> listParam, INode node) {\n+        if (PluginChecker.isTeamEdition() && !ComponentCategory.CATEGORY_4_CAMEL.getName().equals(getPaletteType())) {\n+            return;\n+        }\n+        \n+        ElementParameter param = new ElementParameter(node);\n+        param.setName(EParameterName.ACTIVEBREAKPOINT.getName());\n+        param.setDisplayName(EParameterName.ACTIVEBREAKPOINT.getDisplayName());\n+        param.setFieldType(EParameterFieldType.CHECK);\n+        param.setCategory(EComponentCategory.BREAKPOINT_CAMEL);\n+        param.setNumRow(13);\n+        param.setValue(false);\n+        param.setContextMode(false);\n+        param.setDefaultValue(param.getValue());\n+        listParam.add(param);\n+        \n+\n+        String[] displayNames = {\n+                \"JavaScript\",\n+                \"JSonPath\",\n+                \"JXPath\",\n+                \"Property\",\n+                \"Simple\",\n+                \"XPath\",\n+                \"XQuery\"\n+              };\n+        \n+        String[] itemValues = {\n+                \"javaScript\",\n+                \"jsonpath\",\n+                \"jxpath\",\n+                \"property\",\n+                \"simple\",\n+                \"xpath\",\n+                \"xquery\"\n+              };\n+        \n+        String[] displayCodeNames = {\n+                \"JAVASCRIPT\",\n+                \"JSONPATH\",\n+                \"JXPATH\",\n+                \"PROPERTY\",\n+                \"SIMPLE\",\n+                \"XPATH\",\n+                \"XQUERY\"\n+              };\n+\n+        param = new ElementParameter(node);\n+        param.setName(\"BREAKPOINT_LANGUAGES\");\n+        param.setDisplayName(\"Languages\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a02aed322847d8d1e9d0549c71428b63df199d99"}, "originalPosition": 72}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzIwNzUyMA==", "bodyText": "not sure whether need i18n", "url": "https://github.com/Talend/tdi-studio-se/pull/5280#discussion_r497207520", "createdAt": "2020-09-30T02:26:19Z", "author": {"login": "cmeng-talend"}, "path": "main/plugins/org.talend.designer.core/src/main/java/org/talend/designer/core/model/components/EmfComponent.java", "diffHunk": "@@ -1001,6 +1004,98 @@ public void addViewParameters(final List<ElementParameter> listParam, INode node\n         param.setDefaultValue(param.getValue());\n         listParam.add(param);\n     }\n+    \n+    //rename for route break points\n+    public void addRouteExpressionParameters(final List<ElementParameter> listParam, INode node) {\n+        if (PluginChecker.isTeamEdition() && !ComponentCategory.CATEGORY_4_CAMEL.getName().equals(getPaletteType())) {\n+            return;\n+        }\n+        \n+        ElementParameter param = new ElementParameter(node);\n+        param.setName(EParameterName.ACTIVEBREAKPOINT.getName());\n+        param.setDisplayName(EParameterName.ACTIVEBREAKPOINT.getDisplayName());\n+        param.setFieldType(EParameterFieldType.CHECK);\n+        param.setCategory(EComponentCategory.BREAKPOINT_CAMEL);\n+        param.setNumRow(13);\n+        param.setValue(false);\n+        param.setContextMode(false);\n+        param.setDefaultValue(param.getValue());\n+        listParam.add(param);\n+        \n+\n+        String[] displayNames = {\n+                \"JavaScript\",\n+                \"JSonPath\",\n+                \"JXPath\",\n+                \"Property\",\n+                \"Simple\",\n+                \"XPath\",\n+                \"XQuery\"\n+              };\n+        \n+        String[] itemValues = {\n+                \"javaScript\",\n+                \"jsonpath\",\n+                \"jxpath\",\n+                \"property\",\n+                \"simple\",\n+                \"xpath\",\n+                \"xquery\"\n+              };\n+        \n+        String[] displayCodeNames = {\n+                \"JAVASCRIPT\",\n+                \"JSONPATH\",\n+                \"JXPATH\",\n+                \"PROPERTY\",\n+                \"SIMPLE\",\n+                \"XPATH\",\n+                \"XQUERY\"\n+              };\n+\n+        param = new ElementParameter(node);\n+        param.setName(\"BREAKPOINT_LANGUAGES\");\n+        param.setDisplayName(\"Languages\");\n+        param.setFieldType(EParameterFieldType.CLOSED_LIST);\n+        param.setCategory(EComponentCategory.BREAKPOINT_CAMEL);\n+        param.setNumRow(14);\n+        \n+        param.setListItemsValue(itemValues);\n+        param.setListItemsDisplayCodeName(displayCodeNames);\n+        param.setListItemsDisplayName(displayNames);\n+        param.setListRepositoryItems(new String[itemValues.length]);\n+        param.setListItemsShowIf(new String[itemValues.length]);\n+        param.setListItemsNotShowIf(new String[itemValues.length]);\n+        param.setListItemsReadOnlyIf(new String[itemValues.length]);\n+        param.setListItemsNotReadOnlyIf(new String[itemValues.length]);\n+        param.setValue(\"simple\");\n+        param.setContextMode(false);\n+        param.setDefaultValue(\"simple\");\n+        listParam.add(param);\n+\n+        \n+        param = new ElementParameter(node);\n+        param.setName(\"BREAKPOINT_EXPRESSION\");\n+        param.setDisplayName(\"Expression\");\n+        param.setFieldType(EParameterFieldType.TEXT);\n+        param.setCategory(EComponentCategory.BREAKPOINT_CAMEL);\n+        param.setNumRow(15);\n+        param.setReadOnly(false);\n+        param.setRequired(false);\n+        param.setValue(\"\\\"\\\"\");\n+        param.setDefaultValue(param.getValue());\n+        listParam.add(param);\n+\n+        param = new ElementParameter(node);\n+        param.setName(\"EXAMPLE\");\n+        param.setDisplayName(\"Example\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a02aed322847d8d1e9d0549c71428b63df199d99"}, "originalPosition": 105}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzIwNzU4Ng==", "bodyText": "not sure whether need i18n", "url": "https://github.com/Talend/tdi-studio-se/pull/5280#discussion_r497207586", "createdAt": "2020-09-30T02:26:39Z", "author": {"login": "cmeng-talend"}, "path": "main/plugins/org.talend.designer.core/src/main/java/org/talend/designer/core/model/components/EmfComponent.java", "diffHunk": "@@ -1001,6 +1004,98 @@ public void addViewParameters(final List<ElementParameter> listParam, INode node\n         param.setDefaultValue(param.getValue());\n         listParam.add(param);\n     }\n+    \n+    //rename for route break points\n+    public void addRouteExpressionParameters(final List<ElementParameter> listParam, INode node) {\n+        if (PluginChecker.isTeamEdition() && !ComponentCategory.CATEGORY_4_CAMEL.getName().equals(getPaletteType())) {\n+            return;\n+        }\n+        \n+        ElementParameter param = new ElementParameter(node);\n+        param.setName(EParameterName.ACTIVEBREAKPOINT.getName());\n+        param.setDisplayName(EParameterName.ACTIVEBREAKPOINT.getDisplayName());\n+        param.setFieldType(EParameterFieldType.CHECK);\n+        param.setCategory(EComponentCategory.BREAKPOINT_CAMEL);\n+        param.setNumRow(13);\n+        param.setValue(false);\n+        param.setContextMode(false);\n+        param.setDefaultValue(param.getValue());\n+        listParam.add(param);\n+        \n+\n+        String[] displayNames = {\n+                \"JavaScript\",\n+                \"JSonPath\",\n+                \"JXPath\",\n+                \"Property\",\n+                \"Simple\",\n+                \"XPath\",\n+                \"XQuery\"\n+              };\n+        \n+        String[] itemValues = {\n+                \"javaScript\",\n+                \"jsonpath\",\n+                \"jxpath\",\n+                \"property\",\n+                \"simple\",\n+                \"xpath\",\n+                \"xquery\"\n+              };\n+        \n+        String[] displayCodeNames = {\n+                \"JAVASCRIPT\",\n+                \"JSONPATH\",\n+                \"JXPATH\",\n+                \"PROPERTY\",\n+                \"SIMPLE\",\n+                \"XPATH\",\n+                \"XQUERY\"\n+              };\n+\n+        param = new ElementParameter(node);\n+        param.setName(\"BREAKPOINT_LANGUAGES\");\n+        param.setDisplayName(\"Languages\");\n+        param.setFieldType(EParameterFieldType.CLOSED_LIST);\n+        param.setCategory(EComponentCategory.BREAKPOINT_CAMEL);\n+        param.setNumRow(14);\n+        \n+        param.setListItemsValue(itemValues);\n+        param.setListItemsDisplayCodeName(displayCodeNames);\n+        param.setListItemsDisplayName(displayNames);\n+        param.setListRepositoryItems(new String[itemValues.length]);\n+        param.setListItemsShowIf(new String[itemValues.length]);\n+        param.setListItemsNotShowIf(new String[itemValues.length]);\n+        param.setListItemsReadOnlyIf(new String[itemValues.length]);\n+        param.setListItemsNotReadOnlyIf(new String[itemValues.length]);\n+        param.setValue(\"simple\");\n+        param.setContextMode(false);\n+        param.setDefaultValue(\"simple\");\n+        listParam.add(param);\n+\n+        \n+        param = new ElementParameter(node);\n+        param.setName(\"BREAKPOINT_EXPRESSION\");\n+        param.setDisplayName(\"Expression\");\n+        param.setFieldType(EParameterFieldType.TEXT);\n+        param.setCategory(EComponentCategory.BREAKPOINT_CAMEL);\n+        param.setNumRow(15);\n+        param.setReadOnly(false);\n+        param.setRequired(false);\n+        param.setValue(\"\\\"\\\"\");\n+        param.setDefaultValue(param.getValue());\n+        listParam.add(param);\n+\n+        param = new ElementParameter(node);\n+        param.setName(\"EXAMPLE\");\n+        param.setDisplayName(\"Example\");\n+        param.setValue(\"Example: Lauguages=Simple, Expression=\\\"${body} contains 'Camel'\\\"\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a02aed322847d8d1e9d0549c71428b63df199d99"}, "originalPosition": 106}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzIwOTQ5NQ==", "bodyText": "maybe it is better to find another way to decide whether add the TOS helper? in case later we'll add some other type helper in TOS, then the default tos helper can't be registed using this logic", "url": "https://github.com/Talend/tdi-studio-se/pull/5280#discussion_r497209495", "createdAt": "2020-09-30T02:34:43Z", "author": {"login": "cmeng-talend"}, "path": "main/plugins/org.talend.designer.runprocess/src/main/java/org/talend/designer/runprocess/ui/views/ProcessView.java", "diffHunk": "@@ -185,19 +187,25 @@ public ProcessView() {\n                 \"org.talend.designer.runprocess.runprocess_view_helper\", \"runprocess_view_helper\"); //$NON-NLS-1$ //$NON-NLS-2$\n         IExtensionPointLimiter debugextensionPointLimiter = new ExtensionPointLimiterImpl(\n                 \"org.talend.designer.runprocess.debugprocess_view_helper\", \"debugprocess_view_helper\");\n-        IDebugViewHelper debugViewHelperPrm = ExtensionImplementationProvider.getSingleInstance(debugextensionPointLimiter, null);\n+        debugViewHelpers = new HashMap<String, IDebugViewHelper>();\n+        ExtensionImplementationProvider.getInstance(debugextensionPointLimiter, null).forEach(e -> {\n+            if (e instanceof IDebugViewHelper) {\n+                IDebugViewHelper helper = (IDebugViewHelper) e;\n+                debugViewHelpers.put(helper.getDebugType(), helper);\n+            }\n+        });\n+        \n         IProcessViewHelper processViewHelperPrm = ExtensionImplementationProvider.getSingleInstance(extensionPointLimiter, null);\n \n         if (processViewHelperPrm == null) {\n             processViewHelperPrm = new DefaultProcessViewHelper();\n         }\n         tabFactory = new HorizontalTabFactory();\n         setProcessViewHelper(processViewHelperPrm);\n-\n-        if (debugViewHelperPrm != null) {\n-            debugViewHelper = debugViewHelperPrm;\n-        } else {\n-            debugViewHelper = new DefaultDebugviewHelper();\n+        if(debugViewHelpers.size() == 0) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a02aed322847d8d1e9d0549c71428b63df199d99"}, "originalPosition": 45}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzIxMzI2NA==", "bodyText": "maybe it's better to extract the \"DI\" into a constant class? so that we can trace the usage easily", "url": "https://github.com/Talend/tdi-studio-se/pull/5280#discussion_r497213264", "createdAt": "2020-09-30T02:50:48Z", "author": {"login": "cmeng-talend"}, "path": "main/plugins/org.talend.designer.runprocess/src/main/java/org/talend/designer/runprocess/ui/views/ProcessView.java", "diffHunk": "@@ -393,7 +401,13 @@ public void createDynamicComposite(Composite parent, Element element, EComponent\n             processComposite = new ProcessComposite(parent, SWT.H_SCROLL | SWT.V_SCROLL | SWT.NO_FOCUS);\n             dc = processComposite;\n         } else if (category == EComponentCategory.DEBUGRUN) {\n-            debugTisProcessComposite = this.debugViewHelper.getDebugComposite(parent);\n+            debugViewHelpers.values().forEach(helper -> {\n+                helper.getDebugComposite(parent).setVisible(false);\n+            });\n+            debugTisProcessComposite = oldJobType != null && debugViewHelpers.get(oldJobType) != null\n+                    ? debugViewHelpers.get(oldJobType).getDebugComposite(parent)\n+                    : debugViewHelpers.get(\"DI\").getDebugComposite(parent);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a02aed322847d8d1e9d0549c71428b63df199d99"}, "originalPosition": 62}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzIxMzM3Ng==", "bodyText": "maybe also add the oldJobType blank check here?", "url": "https://github.com/Talend/tdi-studio-se/pull/5280#discussion_r497213376", "createdAt": "2020-09-30T02:51:12Z", "author": {"login": "cmeng-talend"}, "path": "main/plugins/org.talend.designer.runprocess/src/main/java/org/talend/designer/runprocess/ui/views/ProcessView.java", "diffHunk": "@@ -431,7 +445,7 @@ public void createDynamicComposite(Composite parent, Element element, EComponent\n     }\n \n     public IDebugViewHelper getDebugViewHelper() {\n-        return this.debugViewHelper;\n+        return this.debugViewHelpers.get(oldJobType);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a02aed322847d8d1e9d0549c71428b63df199d99"}, "originalPosition": 72}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzIxMzYwNQ==", "bodyText": "not sure whether the oldJobType is alway not null here, better improve the logic to keep it same with before", "url": "https://github.com/Talend/tdi-studio-se/pull/5280#discussion_r497213605", "createdAt": "2020-09-30T02:52:10Z", "author": {"login": "cmeng-talend"}, "path": "main/plugins/org.talend.designer.runprocess/src/main/java/org/talend/designer/runprocess/ui/views/ProcessView.java", "diffHunk": "@@ -617,9 +631,20 @@ public void refresh(boolean force) {\n         }\n         if (dc != null && dc == processComposite) {\n             processComposite.setProcessContext(activeContext);\n-        } else if (dc != null && dc == debugTisProcessComposite) {\n-            debugTisProcessComposite.setProcessContext(activeContext);\n-            debugTisProcessComposite.setContextComposite(this.contextComposite);\n+        } else if (dc != null && dc instanceof TraceDebugProcessComposite) {\n+            if (this.oldJobType != null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a02aed322847d8d1e9d0549c71428b63df199d99"}, "originalPosition": 84}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzIxNDAyNA==", "bodyText": "maybe it is better to extract it into a constant class, so that we can trace the usage easily", "url": "https://github.com/Talend/tdi-studio-se/pull/5280#discussion_r497214024", "createdAt": "2020-09-30T02:53:55Z", "author": {"login": "cmeng-talend"}, "path": "main/plugins/org.talend.designer.runprocess/src/main/java/org/talend/designer/runprocess/ui/views/DefaultDebugviewHelper.java", "diffHunk": "@@ -33,4 +33,9 @@ public TraceDebugProcessComposite getDebugComposite(Composite container) {\n         return new DebugProcessTosComposite(container, SWT.NONE);\n     }\n \n+    @Override\n+    public String getDebugType() {\n+        return \"DI\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a02aed322847d8d1e9d0549c71428b63df199d99"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzIxNDcxMQ==", "bodyText": "not sure whether we should add it into EParameterName just same like ACTIVEBREAKPOINT", "url": "https://github.com/Talend/tdi-studio-se/pull/5280#discussion_r497214711", "createdAt": "2020-09-30T02:56:51Z", "author": {"login": "cmeng-talend"}, "path": "main/plugins/org.talend.designer.core/src/main/java/org/talend/designer/core/model/components/EmfComponent.java", "diffHunk": "@@ -1001,6 +1004,98 @@ public void addViewParameters(final List<ElementParameter> listParam, INode node\n         param.setDefaultValue(param.getValue());\n         listParam.add(param);\n     }\n+    \n+    //rename for route break points\n+    public void addRouteExpressionParameters(final List<ElementParameter> listParam, INode node) {\n+        if (PluginChecker.isTeamEdition() && !ComponentCategory.CATEGORY_4_CAMEL.getName().equals(getPaletteType())) {\n+            return;\n+        }\n+        \n+        ElementParameter param = new ElementParameter(node);\n+        param.setName(EParameterName.ACTIVEBREAKPOINT.getName());\n+        param.setDisplayName(EParameterName.ACTIVEBREAKPOINT.getDisplayName());\n+        param.setFieldType(EParameterFieldType.CHECK);\n+        param.setCategory(EComponentCategory.BREAKPOINT_CAMEL);\n+        param.setNumRow(13);\n+        param.setValue(false);\n+        param.setContextMode(false);\n+        param.setDefaultValue(param.getValue());\n+        listParam.add(param);\n+        \n+\n+        String[] displayNames = {\n+                \"JavaScript\",\n+                \"JSonPath\",\n+                \"JXPath\",\n+                \"Property\",\n+                \"Simple\",\n+                \"XPath\",\n+                \"XQuery\"\n+              };\n+        \n+        String[] itemValues = {\n+                \"javaScript\",\n+                \"jsonpath\",\n+                \"jxpath\",\n+                \"property\",\n+                \"simple\",\n+                \"xpath\",\n+                \"xquery\"\n+              };\n+        \n+        String[] displayCodeNames = {\n+                \"JAVASCRIPT\",\n+                \"JSONPATH\",\n+                \"JXPATH\",\n+                \"PROPERTY\",\n+                \"SIMPLE\",\n+                \"XPATH\",\n+                \"XQUERY\"\n+              };\n+\n+        param = new ElementParameter(node);\n+        param.setName(\"BREAKPOINT_LANGUAGES\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a02aed322847d8d1e9d0549c71428b63df199d99"}, "originalPosition": 71}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzIxNDg4MQ==", "bodyText": "maybe need i18n here?", "url": "https://github.com/Talend/tdi-studio-se/pull/5280#discussion_r497214881", "createdAt": "2020-09-30T02:57:34Z", "author": {"login": "cmeng-talend"}, "path": "main/plugins/org.talend.designer.core/src/main/java/org/talend/designer/core/ui/action/NodeConditionalBreakpointAction.java", "diffHunk": "@@ -0,0 +1,140 @@\n+// ============================================================================\n+//\n+// Copyright (C) 2006-2019 Talend Inc. - www.talend.com\n+//\n+// This source code is available under agreement available at\n+// %InstallDIR%\\features\\org.talend.rcp.branding.%PRODUCTNAME%\\%PRODUCTNAME%license.txt\n+//\n+// You should have received a copy of the agreement\n+// along with this program; if not, write to Talend SA\n+// 9 rue Pages 92150 Suresnes, France\n+//\n+// ============================================================================\n+package org.talend.designer.core.ui.action;\n+\n+import java.util.List;\n+\n+import org.eclipse.gef.EditPart;\n+import org.eclipse.gef.ui.actions.SelectionAction;\n+import org.eclipse.ui.IViewPart;\n+import org.eclipse.ui.IWorkbench;\n+import org.eclipse.ui.IWorkbenchPage;\n+import org.eclipse.ui.IWorkbenchPart;\n+import org.eclipse.ui.PartInitException;\n+import org.eclipse.ui.PlatformUI;\n+import org.talend.commons.ui.runtime.exception.ExceptionHandler;\n+import org.talend.core.CorePlugin;\n+import org.talend.core.GlobalServiceRegister;\n+import org.talend.core.context.Context;\n+import org.talend.core.model.process.EComponentCategory;\n+import org.talend.core.model.process.INode;\n+import org.talend.core.model.process.IProcess;\n+import org.talend.core.ui.branding.IBrandingService;\n+import org.talend.core.ui.utils.PluginUtil;\n+import org.talend.designer.core.DesignerPlugin;\n+import org.talend.designer.core.i18n.Messages;\n+import org.talend.designer.core.ui.editor.nodes.Node;\n+import org.talend.designer.core.ui.editor.nodes.NodePart;\n+import org.talend.designer.core.ui.editor.process.Process;\n+import org.talend.designer.core.ui.editor.process.ProcessPart;\n+import org.talend.designer.core.ui.views.properties.ComponentSettingsView;\n+\n+/**\n+ * Action to toggle a conditional breakpoint on a camel route node, for ESB only. <br/>\n+ *\n+ * $Id$\n+ *\n+ */\n+public class NodeConditionalBreakpointAction extends ShowComponentSettingViewerAction {\n+\n+    public static final String ID = \"org.talend.designer.core.ui.editor.action.NodeConditionalBreakpointAction\"; //$NON-NLS-1$\n+\n+    private IProcess process;\n+\n+    private Node node;\n+\n+    /**\n+     * Constructs a new PropertiesContextAction.\n+     *\n+     * @param part\n+     */\n+    public NodeConditionalBreakpointAction(IWorkbenchPart part) {\n+        super(part);\n+        setId(ID);\n+        setImageDescriptor(DesignerPlugin.getImageDescriptor(\"icons/breakpoint.png\")); //$NON-NLS-1$\n+//        setText(Messages.getString(\"Conditional Breakpoint\")); //$NON-NLS-1$\n+        setText(\"Conditional breakpoint\"); //$NON-NLS-1$", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a02aed322847d8d1e9d0549c71428b63df199d99"}, "originalPosition": 66}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzIxNDk3OQ==", "bodyText": "image is set twice here, not sure", "url": "https://github.com/Talend/tdi-studio-se/pull/5280#discussion_r497214979", "createdAt": "2020-09-30T02:58:11Z", "author": {"login": "cmeng-talend"}, "path": "main/plugins/org.talend.designer.core/src/main/java/org/talend/designer/core/ui/editor/nodecontainer/NodeContainerFigure.java", "diffHunk": "@@ -115,7 +122,13 @@ protected void fillShape(Graphics graphics) {\n         breakpointFigure.setSize(breakpointFigure.getPreferredSize());\n         this.add(breakpointFigure);\n \n+        breakpointLineBorder = new LineBorder(new Color(Display.getDefault(), new RGB(255, 255, 0)), 2);\n+        breakpointBottomLineBorder = new OneLineBorder(new Color(Display.getDefault(), new RGB(113, 113, 225)), 2,\n+                PositionConstants.BOTTOM);\n+        \n         errorFigure = new ImageFigure();\n+        Image image = ImageProvider.getImage(CoreUIPlugin.getImageDescriptor(BREAKPOINT_IMAGE));\n+        errorFigure.setImage(image);\n         errorFigure.setImage(ImageProvider.getImage(EImage.ERROR_SMALL));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a02aed322847d8d1e9d0549c71428b63df199d99"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzIxNTE1NQ==", "bodyText": "not sure why it is removed, can you please explain it?", "url": "https://github.com/Talend/tdi-studio-se/pull/5280#discussion_r497215155", "createdAt": "2020-09-30T02:58:50Z", "author": {"login": "cmeng-talend"}, "path": "main/plugins/org.talend.designer.runprocess/src/main/java/org/talend/designer/runprocess/java/JavaProcessor.java", "diffHunk": "@@ -1868,14 +1870,34 @@ public Object saveLaunchConfigurationWithParam(String parameterStr) throws CoreE\n                     launchManager.generateUniqueLaunchConfigurationNameFrom(this.getCodePath().lastSegment()));\n             wc.setAttribute(IJavaLaunchConfigurationConstants.ATTR_PROJECT_NAME, projectName);\n             wc.setAttribute(IJavaLaunchConfigurationConstants.ATTR_MAIN_TYPE_NAME, this.getMainClass());\n-            wc.setAttribute(IJavaLaunchConfigurationConstants.ATTR_STOP_IN_MAIN, true);\n+//            wc.setAttribute(IJavaLaunchConfigurationConstants.ATTR_STOP_IN_MAIN, true);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a02aed322847d8d1e9d0549c71428b63df199d99"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzIxNTQwOQ==", "bodyText": "confusing name here, maybe DEBUG_ROUTE_ID ? and maybe put in constant class? or maybe make it a more general usage? like record the id, and detect whether it is route through the job type?", "url": "https://github.com/Talend/tdi-studio-se/pull/5280#discussion_r497215409", "createdAt": "2020-09-30T02:59:57Z", "author": {"login": "cmeng-talend"}, "path": "main/plugins/org.talend.designer.runprocess/src/main/java/org/talend/designer/runprocess/java/JavaProcessor.java", "diffHunk": "@@ -1868,14 +1870,34 @@ public Object saveLaunchConfigurationWithParam(String parameterStr) throws CoreE\n                     launchManager.generateUniqueLaunchConfigurationNameFrom(this.getCodePath().lastSegment()));\n             wc.setAttribute(IJavaLaunchConfigurationConstants.ATTR_PROJECT_NAME, projectName);\n             wc.setAttribute(IJavaLaunchConfigurationConstants.ATTR_MAIN_TYPE_NAME, this.getMainClass());\n-            wc.setAttribute(IJavaLaunchConfigurationConstants.ATTR_STOP_IN_MAIN, true);\n+//            wc.setAttribute(IJavaLaunchConfigurationConstants.ATTR_STOP_IN_MAIN, true);\n             wc.setAttribute(IJavaLaunchConfigurationConstants.ATTR_PROGRAM_ARGUMENTS, CTX_ARG + context.getName() + parameterStr);\n+            if (isRouteDebugging()) {\n+                wc.setAttribute(\"DEBUG_JOB_ID\", this.getProperty().getId());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a02aed322847d8d1e9d0549c71428b63df199d99"}, "originalPosition": 24}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "77df8048e4913e8730f6f0d2e3c3434ac0438426", "author": {"user": {"login": "yanbasic", "name": "Mike Yan"}}, "url": "https://github.com/Talend/tdi-studio-se/commit/77df8048e4913e8730f6f0d2e3c3434ac0438426", "committedDate": "2020-09-30T08:50:04Z", "message": "fix(TESB-29271): Cumulative fixes and code improvement"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0dbf6d2a4e793a6309df567984b64e554a7d33b0", "author": {"user": {"login": "yanbasic", "name": "Mike Yan"}}, "url": "https://github.com/Talend/tdi-studio-se/commit/0dbf6d2a4e793a6309df567984b64e554a7d33b0", "committedDate": "2020-09-30T10:45:20Z", "message": "fix(TESB-29271): Added default view(DI)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b8d1556c72f3421b8e8f5d2036affb8d3e8f4edd", "author": {"user": {"login": "yanbasic", "name": "Mike Yan"}}, "url": "https://github.com/Talend/tdi-studio-se/commit/b8d1556c72f3421b8e8f5d2036affb8d3e8f4edd", "committedDate": "2020-10-01T06:41:16Z", "message": "fix(TESB-29271): Code improvements by code review"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eaf534d44a47e8d450b8e2fcc598dc394f30c0db", "author": {"user": {"login": "yanbasic", "name": "Mike Yan"}}, "url": "https://github.com/Talend/tdi-studio-se/commit/eaf534d44a47e8d450b8e2fcc598dc394f30c0db", "committedDate": "2020-10-07T13:37:15Z", "message": "feat(TESB-29271): code updated by review"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAzODg5MjUx", "url": "https://github.com/Talend/tdi-studio-se/pull/5280#pullrequestreview-503889251", "createdAt": "2020-10-07T13:39:43Z", "commit": {"oid": "eaf534d44a47e8d450b8e2fcc598dc394f30c0db"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4658, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}