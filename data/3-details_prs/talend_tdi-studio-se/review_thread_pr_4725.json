{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIxNzU2ODU2", "number": 4725, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQwOToxMzowOFrOEBTDCg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQwOToxODo0OVrOEBTJVQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY5Nzk2MTA2OnYy", "diffSide": "RIGHT", "path": "main/plugins/org.talend.designer.components.libs/libs_src/talend-job-monitoring/src/main/java/org/talend/job/audit/JobContextBuilder.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQwOToxMzowOFrOGdD69Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQwOToxMzowOFrOGdD69Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzEyNjEzMw==", "bodyText": "Could you rename the context key \"sourceConnectorName\" to \"sourceConnectorType\" to keep the same vocabulary as for \"connectorType\" please? \ud83d\ude42", "url": "https://github.com/Talend/tdi-studio-se/pull/4725#discussion_r433126133", "createdAt": "2020-06-01T09:13:08Z", "author": {"login": "elogeart"}, "path": "main/plugins/org.talend.designer.components.libs/libs_src/talend-job-monitoring/src/main/java/org/talend/job/audit/JobContextBuilder.java", "diffHunk": "@@ -86,5 +96,59 @@ public JobContextBuilder status(String status) {\n     public Context build() {\n         return builder.build();\n     }\n-\n+    \n+    /**\n+     * source connector id\n+     * @return\n+     */\n+    public JobContextBuilder sourceId(String sourceId) {\n+        builder.with(\"sourceId\", sourceId);\n+        return this;\n+    }\n+    \n+    /**\n+     * source connector label\n+     * @return\n+     */\n+    public JobContextBuilder sourceLabel(String sourceLabel) {\n+        builder.with(\"sourceLabel\", sourceLabel);\n+        return this;\n+    }\n+    \n+    /**\n+     * source connector name\n+     * @return\n+     */\n+    public JobContextBuilder sourceConnectorName(String sourceConnectorName) {\n+        builder.with(\"sourceConnectorName\", sourceConnectorName);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2c27cad17d2808054c81a2856a7075cc404c27b3"}, "originalPosition": 55}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY5Nzk2MjEwOnYy", "diffSide": "RIGHT", "path": "main/plugins/org.talend.designer.components.libs/libs_src/talend-job-monitoring/src/main/java/org/talend/job/audit/JobContextBuilder.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQwOToxMzoyOVrOGdD7lA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQwNDowMDowM1rOGdhRfQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzEyNjI5Mg==", "bodyText": "Could you rename the context key \"targetConnectorName\" to \"targetConnectorType\" to keep the same vocabulary as for \"connectorType\" please? \ud83d\ude42", "url": "https://github.com/Talend/tdi-studio-se/pull/4725#discussion_r433126292", "createdAt": "2020-06-01T09:13:29Z", "author": {"login": "elogeart"}, "path": "main/plugins/org.talend.designer.components.libs/libs_src/talend-job-monitoring/src/main/java/org/talend/job/audit/JobContextBuilder.java", "diffHunk": "@@ -86,5 +96,59 @@ public JobContextBuilder status(String status) {\n     public Context build() {\n         return builder.build();\n     }\n-\n+    \n+    /**\n+     * source connector id\n+     * @return\n+     */\n+    public JobContextBuilder sourceId(String sourceId) {\n+        builder.with(\"sourceId\", sourceId);\n+        return this;\n+    }\n+    \n+    /**\n+     * source connector label\n+     * @return\n+     */\n+    public JobContextBuilder sourceLabel(String sourceLabel) {\n+        builder.with(\"sourceLabel\", sourceLabel);\n+        return this;\n+    }\n+    \n+    /**\n+     * source connector name\n+     * @return\n+     */\n+    public JobContextBuilder sourceConnectorName(String sourceConnectorName) {\n+        builder.with(\"sourceConnectorName\", sourceConnectorName);\n+        return this;\n+    }\n+    \n+    /**\n+     * target connector id\n+     * @return\n+     */\n+    public JobContextBuilder targetId(String targetId) {\n+        builder.with(\"targetId\", targetId);\n+        return this;\n+    }\n+    \n+    /**\n+     * target connector label\n+     * @return\n+     */\n+    public JobContextBuilder targetLabel(String targetLabel) {\n+        builder.with(\"targetLabel\", targetLabel);\n+        return this;\n+    }\n+    \n+    /**\n+     * target connector name\n+     * @return\n+     */\n+    public JobContextBuilder targetConnectorName(String targetConnectorName) {\n+        builder.with(\"targetConnectorName\", targetConnectorName);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2c27cad17d2808054c81a2856a7075cc404c27b3"}, "originalPosition": 82}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzYwNzAzNw==", "bodyText": "fixed", "url": "https://github.com/Talend/tdi-studio-se/pull/4725#discussion_r433607037", "createdAt": "2020-06-02T04:00:03Z", "author": {"login": "wwang-talend"}, "path": "main/plugins/org.talend.designer.components.libs/libs_src/talend-job-monitoring/src/main/java/org/talend/job/audit/JobContextBuilder.java", "diffHunk": "@@ -86,5 +96,59 @@ public JobContextBuilder status(String status) {\n     public Context build() {\n         return builder.build();\n     }\n-\n+    \n+    /**\n+     * source connector id\n+     * @return\n+     */\n+    public JobContextBuilder sourceId(String sourceId) {\n+        builder.with(\"sourceId\", sourceId);\n+        return this;\n+    }\n+    \n+    /**\n+     * source connector label\n+     * @return\n+     */\n+    public JobContextBuilder sourceLabel(String sourceLabel) {\n+        builder.with(\"sourceLabel\", sourceLabel);\n+        return this;\n+    }\n+    \n+    /**\n+     * source connector name\n+     * @return\n+     */\n+    public JobContextBuilder sourceConnectorName(String sourceConnectorName) {\n+        builder.with(\"sourceConnectorName\", sourceConnectorName);\n+        return this;\n+    }\n+    \n+    /**\n+     * target connector id\n+     * @return\n+     */\n+    public JobContextBuilder targetId(String targetId) {\n+        builder.with(\"targetId\", targetId);\n+        return this;\n+    }\n+    \n+    /**\n+     * target connector label\n+     * @return\n+     */\n+    public JobContextBuilder targetLabel(String targetLabel) {\n+        builder.with(\"targetLabel\", targetLabel);\n+        return this;\n+    }\n+    \n+    /**\n+     * target connector name\n+     * @return\n+     */\n+    public JobContextBuilder targetConnectorName(String targetConnectorName) {\n+        builder.with(\"targetConnectorName\", targetConnectorName);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzEyNjI5Mg=="}, "originalCommit": {"oid": "2c27cad17d2808054c81a2856a7075cc404c27b3"}, "originalPosition": 82}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY5Nzk3NzE3OnYy", "diffSide": "RIGHT", "path": "main/plugins/org.talend.designer.components.libs/libs_src/talend-job-monitoring/src/main/java/org/talend/job/audit/JobAuditLogger.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQwOToxODo0OVrOGdEEnQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQwMzo0Mzo0MFrOGdhDpA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzEyODYwNQ==", "bodyText": "I think we forget to ask you but we need some (little) changes in this interface: could you change all category attributes to the name of the corresponding method please ? \ud83d\ude42\nI mean, current code is:\n@AuditEvent(category = \"connection\" ... ) {\n    void flowExecution(...);\n}\n\nand we need instead:\n@AuditEvent(category = \"flowExecution\" ... ) {\n    void flowExecution(...);\n}\n\nand so on for each @AuditEvent.", "url": "https://github.com/Talend/tdi-studio-se/pull/4725#discussion_r433128605", "createdAt": "2020-06-01T09:18:49Z", "author": {"login": "elogeart"}, "path": "main/plugins/org.talend.designer.components.libs/libs_src/talend-job-monitoring/src/main/java/org/talend/job/audit/JobAuditLogger.java", "diffHunk": "@@ -13,13 +13,16 @@\n \t@AuditEvent(category = \"job\", message = \"Job stop : job_name:{jobName}, job_version:{jobVersion}, job_id:{jobId}, timestamp:{timestamp}, status:{status}, duration:{duration}\", level = LogLevel.INFO)\n     void jobstop(Context context);\n \t\n-\t@AuditEvent(category = \"connector\", message = \"Component run : job_name:{jobName}, job_version:{jobVersion}, job_id:{jobId}, connector_type:{connectorType}, connector_id:{connectorId}\", level = LogLevel.INFO)\n+\t@AuditEvent(category = \"connector\", message = \"Component run : job_name:{jobName}, job_version:{jobVersion}, job_id:{jobId}, connector_type:{connectorType}, connector_id:{connectorId}, connector_label:{connectorLabel}\", level = LogLevel.INFO)\n     void runcomponent(Context context);\n \n-    @AuditEvent(category = \"connection\", message = \"Component {connectorType} {connectionType} {rows} rows in {duration} with {connectionName} line\", level = LogLevel.INFO)\n+    @AuditEvent(category = \"connection\", message = \"Component {connectorType} {connectorLabel} {connectionType} {rows} rows in {duration} with {connectionName} line\", level = LogLevel.INFO)\n     void flowOutput(Context context);\n     \n-    @AuditEvent(category = \"connection\", message = \"Component {connectorType} received {rows} rows in {duration} with {connectionName} line\", level = LogLevel.INFO)\n+    @AuditEvent(category = \"connection\", message = \"Component {connectorType} {connectorLabel} received {rows} rows in {duration} with {connectionName} line\", level = LogLevel.INFO)\n     void flowInput(Context context);\n+    \n+    @AuditEvent(category = \"connection\", message = \"connection : {connectionName}, row : {rows}, cost : {duration}\", level = LogLevel.INFO)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2c27cad17d2808054c81a2856a7075cc404c27b3"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzYwMzQ5Mg==", "bodyText": "fixed", "url": "https://github.com/Talend/tdi-studio-se/pull/4725#discussion_r433603492", "createdAt": "2020-06-02T03:43:40Z", "author": {"login": "wwang-talend"}, "path": "main/plugins/org.talend.designer.components.libs/libs_src/talend-job-monitoring/src/main/java/org/talend/job/audit/JobAuditLogger.java", "diffHunk": "@@ -13,13 +13,16 @@\n \t@AuditEvent(category = \"job\", message = \"Job stop : job_name:{jobName}, job_version:{jobVersion}, job_id:{jobId}, timestamp:{timestamp}, status:{status}, duration:{duration}\", level = LogLevel.INFO)\n     void jobstop(Context context);\n \t\n-\t@AuditEvent(category = \"connector\", message = \"Component run : job_name:{jobName}, job_version:{jobVersion}, job_id:{jobId}, connector_type:{connectorType}, connector_id:{connectorId}\", level = LogLevel.INFO)\n+\t@AuditEvent(category = \"connector\", message = \"Component run : job_name:{jobName}, job_version:{jobVersion}, job_id:{jobId}, connector_type:{connectorType}, connector_id:{connectorId}, connector_label:{connectorLabel}\", level = LogLevel.INFO)\n     void runcomponent(Context context);\n \n-    @AuditEvent(category = \"connection\", message = \"Component {connectorType} {connectionType} {rows} rows in {duration} with {connectionName} line\", level = LogLevel.INFO)\n+    @AuditEvent(category = \"connection\", message = \"Component {connectorType} {connectorLabel} {connectionType} {rows} rows in {duration} with {connectionName} line\", level = LogLevel.INFO)\n     void flowOutput(Context context);\n     \n-    @AuditEvent(category = \"connection\", message = \"Component {connectorType} received {rows} rows in {duration} with {connectionName} line\", level = LogLevel.INFO)\n+    @AuditEvent(category = \"connection\", message = \"Component {connectorType} {connectorLabel} received {rows} rows in {duration} with {connectionName} line\", level = LogLevel.INFO)\n     void flowInput(Context context);\n+    \n+    @AuditEvent(category = \"connection\", message = \"connection : {connectionName}, row : {rows}, cost : {duration}\", level = LogLevel.INFO)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzEyODYwNQ=="}, "originalCommit": {"oid": "2c27cad17d2808054c81a2856a7075cc404c27b3"}, "originalPosition": 16}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4737, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}