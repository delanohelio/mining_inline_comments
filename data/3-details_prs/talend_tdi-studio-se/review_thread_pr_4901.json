{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ2MTM4Mjgx", "number": 4901, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQxMTo0NDoyNlrOEMcxRw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQxMTo0NDoyNlrOEMcxRw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgxNDg5NzM1OnYy", "diffSide": "RIGHT", "path": "main/plugins/org.talend.designer.mapper/src/main/java/org/talend/designer/mapper/ui/visualmap/table/DataMapTableView.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQxMTo0NDoyNlrOGukHOQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQxMjoyMDo1NFrOGulfNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTQ3OTM1Mw==", "bodyText": "It is better to use try finally block here, change the default value of customSized in try block, then set back the default value of customSized in finally block.", "url": "https://github.com/Talend/tdi-studio-se/pull/4901#discussion_r451479353", "createdAt": "2020-07-08T11:44:26Z", "author": {"login": "cmeng-talend"}, "path": "main/plugins/org.talend.designer.mapper/src/main/java/org/talend/designer/mapper/ui/visualmap/table/DataMapTableView.java", "diffHunk": "@@ -3531,20 +3531,26 @@ protected Object openDialogBox(Control cellEditorWindow) {\n                             }\n                         }\n \n-                        // avoid fire UIManager#handleEvent execute afterOperationListener\n-                        // resize will fire focuseLost to applyEditorValue remove the columnViewEditorListener\n-                        extendedTableModel.removeAll(copyedAllList, true, false);\n+                        // avoid UIManager#handleEvent execute afterOperationListener\n+                        // resize fire focuseLost to applyEditorValue remove the columnViewEditorListener\n+                        // after extendedTableModel remove/add reset back the original customSized\n+                        boolean isCustom = DataMapTableView.this.customSized;\n+                        DataMapTableView.this.customSized = true;\n+\n+                        extendedTableModel.removeAll(copyedAllList);\n                         for (IMetadataColumn metaColumnToAdd : columns) {\n                             String label = metaColumnToAdd.getLabel();\n                             String expression = oldMappingMap.get(label);\n                             if (expression != null && !\"\".equals(expression)) {\n                                 metaColumnToAdd.setExpression(expression);\n                             }\n                         }\n-                        extendedTableModel.addAll(columns, true, false);\n+                        extendedTableModel.addAll(columns);\n                         mapperManager.getUiManager().parseAllExpressionsForAllTables();\n                         mapperManager.getUiManager().getOldMappingMap().clear();\n                         oldMappingMap.clear();\n+\n+                        DataMapTableView.this.customSized = isCustom;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "77ac86fcc9bc4c835d3023a3d696bad881386dc2"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTUwMTg3OA==", "bodyText": "Modified, thanks", "url": "https://github.com/Talend/tdi-studio-se/pull/4901#discussion_r451501878", "createdAt": "2020-07-08T12:20:54Z", "author": {"login": "jding-tlnd"}, "path": "main/plugins/org.talend.designer.mapper/src/main/java/org/talend/designer/mapper/ui/visualmap/table/DataMapTableView.java", "diffHunk": "@@ -3531,20 +3531,26 @@ protected Object openDialogBox(Control cellEditorWindow) {\n                             }\n                         }\n \n-                        // avoid fire UIManager#handleEvent execute afterOperationListener\n-                        // resize will fire focuseLost to applyEditorValue remove the columnViewEditorListener\n-                        extendedTableModel.removeAll(copyedAllList, true, false);\n+                        // avoid UIManager#handleEvent execute afterOperationListener\n+                        // resize fire focuseLost to applyEditorValue remove the columnViewEditorListener\n+                        // after extendedTableModel remove/add reset back the original customSized\n+                        boolean isCustom = DataMapTableView.this.customSized;\n+                        DataMapTableView.this.customSized = true;\n+\n+                        extendedTableModel.removeAll(copyedAllList);\n                         for (IMetadataColumn metaColumnToAdd : columns) {\n                             String label = metaColumnToAdd.getLabel();\n                             String expression = oldMappingMap.get(label);\n                             if (expression != null && !\"\".equals(expression)) {\n                                 metaColumnToAdd.setExpression(expression);\n                             }\n                         }\n-                        extendedTableModel.addAll(columns, true, false);\n+                        extendedTableModel.addAll(columns);\n                         mapperManager.getUiManager().parseAllExpressionsForAllTables();\n                         mapperManager.getUiManager().getOldMappingMap().clear();\n                         oldMappingMap.clear();\n+\n+                        DataMapTableView.this.customSized = isCustom;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTQ3OTM1Mw=="}, "originalCommit": {"oid": "77ac86fcc9bc4c835d3023a3d696bad881386dc2"}, "originalPosition": 27}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4704, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}