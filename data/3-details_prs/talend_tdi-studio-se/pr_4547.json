{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkxNDk0Njg1", "number": 4547, "title": "feat(TDI-43756):extends STS AssumeRole fields for S3.", "bodyText": "What is the current behavior? (You can also link to an open issue here)\nhttps://jira.talendforge.org/browse/TDI-43756\nWhat is the new behavior?\nPlease check if the PR fulfills these requirements\n\n The commit message follows Talend standard\n Tests for the changes have been added (for bug fixes / features)\n Docs have been added / updated (for bug fixes / features) ?\n The code coverage on new code >75%\n The new code does not introduce new technical issues (sonar / eslint)\n\nWhat kind of change does this PR introduce?\n\n Bugfix\n Feature\n Code style update (formatting, local variables)\n Refactoring (no functional changes, no api changes)\n Build / CI related changes\n Other... Please describe:\n\nDoes this PR introduce a breaking change?\n\n Yes\n No\n\nIf this PR contains a breaking change, please describe the impact and migration path for existing applications: ...\nOther information:", "createdAt": "2020-03-20T12:00:27Z", "url": "https://github.com/Talend/tdi-studio-se/pull/4547", "merged": true, "mergeCommit": {"oid": "0f13728bd84eb5cc500204c7385769b9da9f32db"}, "closed": true, "closedAt": "2020-04-27T07:28:11Z", "author": {"login": "vyu-talend"}, "timelineItems": {"totalCount": 21, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcPev6hAH2gAyMzkxNDk0Njg1OjY1YWY3ZDExNjQ0ZTE1MDk0MTk4ZjQzOTdkY2I4Y2ZjNzA0YTAwNjc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcbqO-AAFqTQwMDY5NDQ5Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "65af7d11644e15094198f4397dcb8cfc704a0067", "author": {"user": {"login": "vyu-talend", "name": null}}, "url": "https://github.com/Talend/tdi-studio-se/commit/65af7d11644e15094198f4397dcb8cfc704a0067", "committedDate": "2020-03-20T11:24:26Z", "message": "feat(TDI-43756):extends STS AssumeRole fields."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4NDM1NTk0", "url": "https://github.com/Talend/tdi-studio-se/pull/4547#pullrequestreview-378435594", "createdAt": "2020-03-20T12:21:31Z", "commit": {"oid": "65af7d11644e15094198f4397dcb8cfc704a0067"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxMjoyMTozMVrOF5RhzA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxMjo1ODozNVrOF5So3Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTYwMDMzMg==", "bodyText": "why add this check-box ?\nand it looks duplicate with \"Assume Role\"", "url": "https://github.com/Talend/tdi-studio-se/pull/4547#discussion_r395600332", "createdAt": "2020-03-20T12:21:31Z", "author": {"login": "jzhao-talend"}, "path": "main/plugins/org.talend.designer.components.localprovider/components/tRedshiftOutputBulk/tRedshiftOutputBulk_java.xml", "diffHunk": "@@ -281,6 +260,114 @@\n \t\t\t\t<ITEM NAME=\"VALUE\" />\n \t\t\t</ITEMS>\n \t\t</PARAMETER>\n+\t\t\n+\t\t<PARAMETER\n+\t      NAME=\"CONFIG_ASSUME_ROLE\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "65af7d11644e15094198f4397dcb8cfc704a0067"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTYwMTAxOA==", "bodyText": "after you add CONFIG_ASSUME_ROLE, how can you make this work which old job checked \"SET_STS_ENDPOINT\"?", "url": "https://github.com/Talend/tdi-studio-se/pull/4547#discussion_r395601018", "createdAt": "2020-03-20T12:23:05Z", "author": {"login": "jzhao-talend"}, "path": "main/plugins/org.talend.designer.components.localprovider/components/tRedshiftOutputBulk/tRedshiftOutputBulk_java.xml", "diffHunk": "@@ -281,6 +260,114 @@\n \t\t\t\t<ITEM NAME=\"VALUE\" />\n \t\t\t</ITEMS>\n \t\t</PARAMETER>\n+\t\t\n+\t\t<PARAMETER\n+\t      NAME=\"CONFIG_ASSUME_ROLE\"\n+\t      FIELD=\"CHECK\"\n+\t      NUM_ROW=\"50\"\n+\t      NB_LINES=\"5\"\n+\t      GROUP=\"ASSUME_ROLE_CONFIG\"\n+\t      SHOW_IF=\"isShow[ASSUME_ROLE] AND (ASSUME_ROLE == 'true')\"\n+\t    >\n+\t    </PARAMETER>\n+\t    \n+\t    <PARAMETER\n+\t      NAME=\"SIGNING_REGION\"\n+\t      FIELD=\"TEXT\"\n+\t      NUM_ROW=\"51\"\n+\t      GROUP=\"ASSUME_ROLE_CONFIG\"\n+\t      REQUIRED=\"true\"\n+\t      SHOW_IF=\"isShow[ASSUME_ROLE] AND (ASSUME_ROLE == 'true') AND (CONFIG_ASSUME_ROLE == 'true')\"\n+\t    >\n+\t      <DEFAULT>\"\"</DEFAULT>\n+\t    </PARAMETER>\n+\t    \n+\t    <PARAMETER\n+\t      NAME=\"SET_STS_ENDPOINT\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "65af7d11644e15094198f4397dcb8cfc704a0067"}, "originalPosition": 62}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTYwNTAyMg==", "bodyText": "and where did it used in javajet?", "url": "https://github.com/Talend/tdi-studio-se/pull/4547#discussion_r395605022", "createdAt": "2020-03-20T12:31:32Z", "author": {"login": "jzhao-talend"}, "path": "main/plugins/org.talend.designer.components.localprovider/components/tRedshiftOutputBulk/tRedshiftOutputBulk_java.xml", "diffHunk": "@@ -281,6 +260,114 @@\n \t\t\t\t<ITEM NAME=\"VALUE\" />\n \t\t\t</ITEMS>\n \t\t</PARAMETER>\n+\t\t\n+\t\t<PARAMETER\n+\t      NAME=\"CONFIG_ASSUME_ROLE\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTYwMDMzMg=="}, "originalCommit": {"oid": "65af7d11644e15094198f4397dcb8cfc704a0067"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTYwODQyNA==", "bodyText": "is this region list is fixed? why can't provide a drop-down list let customer pick up?", "url": "https://github.com/Talend/tdi-studio-se/pull/4547#discussion_r395608424", "createdAt": "2020-03-20T12:38:26Z", "author": {"login": "jzhao-talend"}, "path": "main/plugins/org.talend.designer.components.localprovider/components/tRedshiftOutputBulk/tRedshiftOutputBulk_java.xml", "diffHunk": "@@ -281,6 +260,114 @@\n \t\t\t\t<ITEM NAME=\"VALUE\" />\n \t\t\t</ITEMS>\n \t\t</PARAMETER>\n+\t\t\n+\t\t<PARAMETER\n+\t      NAME=\"CONFIG_ASSUME_ROLE\"\n+\t      FIELD=\"CHECK\"\n+\t      NUM_ROW=\"50\"\n+\t      NB_LINES=\"5\"\n+\t      GROUP=\"ASSUME_ROLE_CONFIG\"\n+\t      SHOW_IF=\"isShow[ASSUME_ROLE] AND (ASSUME_ROLE == 'true')\"\n+\t    >\n+\t    </PARAMETER>\n+\t    \n+\t    <PARAMETER\n+\t      NAME=\"SIGNING_REGION\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "65af7d11644e15094198f4397dcb8cfc704a0067"}, "originalPosition": 51}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTYxMjgyMw==", "bodyText": "i remember this parameter must be set if the \"SET_STS_ENDPOINT\" checked\nso better add require_if for this parameter.", "url": "https://github.com/Talend/tdi-studio-se/pull/4547#discussion_r395612823", "createdAt": "2020-03-20T12:47:32Z", "author": {"login": "jzhao-talend"}, "path": "main/plugins/org.talend.designer.components.localprovider/components/tRedshiftOutputBulk/tRedshiftOutputBulk_java.xml", "diffHunk": "@@ -281,6 +260,114 @@\n \t\t\t\t<ITEM NAME=\"VALUE\" />\n \t\t\t</ITEMS>\n \t\t</PARAMETER>\n+\t\t\n+\t\t<PARAMETER\n+\t      NAME=\"CONFIG_ASSUME_ROLE\"\n+\t      FIELD=\"CHECK\"\n+\t      NUM_ROW=\"50\"\n+\t      NB_LINES=\"5\"\n+\t      GROUP=\"ASSUME_ROLE_CONFIG\"\n+\t      SHOW_IF=\"isShow[ASSUME_ROLE] AND (ASSUME_ROLE == 'true')\"\n+\t    >\n+\t    </PARAMETER>\n+\t    \n+\t    <PARAMETER\n+\t      NAME=\"SIGNING_REGION\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTYwODQyNA=="}, "originalCommit": {"oid": "65af7d11644e15094198f4397dcb8cfc704a0067"}, "originalPosition": 51}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTYxODUyNQ==", "bodyText": "seems you didn't change tRedshiftOutputBulkExec", "url": "https://github.com/Talend/tdi-studio-se/pull/4547#discussion_r395618525", "createdAt": "2020-03-20T12:58:35Z", "author": {"login": "jzhao-talend"}, "path": "main/plugins/org.talend.designer.components.localprovider/components/tRedshiftOutputBulk/tRedshiftOutputBulk_java.xml", "diffHunk": "@@ -182,26 +181,6 @@\n \t    \t</ITEMS>\n \t    </PARAMETER>\n \t    \n-\t    <PARAMETER\n-\t      NAME=\"SET_STS_ENDPOINT\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "65af7d11644e15094198f4397dcb8cfc704a0067"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5386d041d8e476dce93be243b79d084b3316d8e3", "author": {"user": {"login": "vyu-talend", "name": null}}, "url": "https://github.com/Talend/tdi-studio-se/commit/5386d041d8e476dce93be243b79d084b3316d8e3", "committedDate": "2020-03-23T08:37:19Z", "message": "feat(TDI-43756):extends AssumeRole fields(v2)."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6a5acf816f01208d23faf530845024655e13cc78", "author": {"user": {"login": "vyu-talend", "name": null}}, "url": "https://github.com/Talend/tdi-studio-se/commit/6a5acf816f01208d23faf530845024655e13cc78", "committedDate": "2020-03-23T09:39:46Z", "message": "feat(TDI-43756):set Session duration not required."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc5OTU3NDEx", "url": "https://github.com/Talend/tdi-studio-se/pull/4547#pullrequestreview-379957411", "createdAt": "2020-03-24T02:20:44Z", "commit": {"oid": "6a5acf816f01208d23faf530845024655e13cc78"}, "state": "DISMISSED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQwMjoyMDo0NFrOF6e0vw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQwMjo1NDo1OFrOF6fWSg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Njg2Njc1MQ==", "bodyText": "i think this show_if can be shorter: isShow[SET_STS_ENDPOINT ] AND (SET_STS_ENDPOINT == 'true')", "url": "https://github.com/Talend/tdi-studio-se/pull/4547#discussion_r396866751", "createdAt": "2020-03-24T02:20:44Z", "author": {"login": "jzhao-talend"}, "path": "main/plugins/org.talend.designer.components.localprovider/components/tRedshiftOutputBulkExec/tRedshiftOutputBulkExec_java.xml", "diffHunk": "@@ -433,7 +412,124 @@\n \t\t\t\t<ITEM NAME=\"VALUE\" />\n \t\t\t</ITEMS>\n \t\t</PARAMETER>\n-\n+\t\t<PARAMETER\n+          NAME=\"SET_STS_ENDPOINT\"\n+          FIELD=\"CHECK\"\n+          NUM_ROW=\"81\"\n+          NB_LINES=\"5\"\n+          SHOW_IF=\"isShow[ASSUME_ROLE_S3] AND (ASSUME_ROLE_S3 == 'true')\"\n+          GROUP=\"ASSUME_ROLE_CONFIG\"\n+        >\n+        </PARAMETER>\n+        <PARAMETER\n+          NAME=\"STS_ENDPOINT\"\n+          FIELD=\"TEXT\"\n+          NUM_ROW=\"81\"\n+          SHOW_IF=\"isShow[ASSUME_ROLE_S3] AND (ASSUME_ROLE_S3 == 'true') AND (SET_STS_ENDPOINT == 'true')\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6a5acf816f01208d23faf530845024655e13cc78"}, "originalPosition": 52}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Njg3NTMzOA==", "bodyText": "this part of code can be improve. you can set signingRegion \"US_EAST_1\", if set_signingRegion is false\nonly call withRegion(<%=signingRegion%>)", "url": "https://github.com/Talend/tdi-studio-se/pull/4547#discussion_r396875338", "createdAt": "2020-03-24T02:54:58Z", "author": {"login": "jzhao-talend"}, "path": "main/plugins/org.talend.designer.components.localprovider/components/tS3Connection/S3Client.javajet", "diffHunk": "@@ -225,22 +234,117 @@\n \t\t}\r\n \t\t\r\n \t\tif(assumeRole) {\r\n+\t\t\tint policyListSize = policyList.size();\r\n+\t\t\tint tagInfoListSize = tagInfoList.size();\r\n \t\t%>\r\n+\t\t\tint policyListSize_<%=cid%> = <%=policyListSize%>;\r\n+\t\t\tint tagInfoListSize_<%=cid%> = <%=tagInfoListSize%>;\r\n \t\t\tint sessionDurationSeconds_<%=cid%> = <%=sessionDuration%> * 60;\r\n-\t\t\tcom.amazonaws.auth.STSAssumeRoleSessionCredentialsProvider.Builder stsBuilder_<%=cid%> = \r\n-\t\t\t\t\tnew com.amazonaws.auth.STSAssumeRoleSessionCredentialsProvider.Builder(<%=arn%>, <%=roleSessionName%>).withLongLivedCredentialsProvider(credentialsProvider_<%=cid%>)\r\n-\t\t\t\t\t.withRoleSessionDurationSeconds(sessionDurationSeconds_<%=cid%>);\r\n-\t\t\t\t\t\r\n-\t\t\t<%\r\n-\t\t\tif(setStsEndpoint) {\r\n-\t\t\t%>\r\n-\t\t\t\tstsBuilder_<%=cid%>.withServiceEndpoint(<%=stsEndpoint%>);\r\n-\t\t\t<%\r\n-\t\t\t}\r\n+\t\t\t\r\n+    \t\tList<com.amazonaws.services.securitytoken.model.PolicyDescriptorType> policyArnList_<%=cid%> = null;\r\n+    \t\t\t\r\n+    \t\t<%\r\n+\t\t\t\tif(policyListSize > 0){\r\n+\t        %>\r\n+\t                policyArnList_<%=cid%> = new java.util.ArrayList<com.amazonaws.services.securitytoken.model.PolicyDescriptorType>();\r\n+\t        <%\r\n+\t        \t\tfor(int policyListIndex = 0; policyListIndex < policyListSize; policyListIndex++){\r\n+\t        \t\t\tString policyArn = policyList.get(policyListIndex).get(\"POLICY_ARN\");\r\n+\t        %>\r\n+\t        \t\t\tcom.amazonaws.services.securitytoken.model.PolicyDescriptorType pdt_<%=cid%> = \r\n+\t        \t\t\t\tnew com.amazonaws.services.securitytoken.model.PolicyDescriptorType().withArn(<%=policyArn%>);\r\n+\t        \t\t\tpolicyArnList_<%=cid%>.add(pdt_<%=cid%>);\r\n+\t        <%\r\n+\t        \t\t}\r\n+\t        \t}\r\n+        \t%>\r\n+    \t\tList<com.amazonaws.services.securitytoken.model.Tag> tagList_<%=cid%> = null;\r\n+    \t\tList<String> tranTagKeys_<%=cid%> = null;\r\n+    \t\t\r\n+    \t\t<%\r\n+\t        \tif(tagInfoListSize > 0){\r\n+\t        %>\r\n+\t        \t\ttagList_<%=cid%> = new java.util.ArrayList<com.amazonaws.services.securitytoken.model.Tag>();\r\n+\t        \t\ttranTagKeys_<%=cid%> = new java.util.ArrayList<String>();\r\n+\t        <%\r\n+\t        \t\tfor(int tagInfoListIndex = 0; tagInfoListIndex < tagInfoListSize; tagInfoListIndex++){\r\n+\t        \t\t\tString tagKey = tagInfoList.get(tagInfoListIndex).get(\"TAG_KEY\");\r\n+\t        \t\t\tString tagValue = tagInfoList.get(tagInfoListIndex).get(\"TAG_VALUE\");\r\n+\t        \t\t\tString tagTransitive = tagInfoList.get(tagInfoListIndex).get(\"TAG_TRANSITIVE\");\r\n+\t        %>\r\n+\t        \t\t\tcom.amazonaws.services.securitytoken.model.Tag tag_<%=cid%> = \r\n+\t        \t\t\t\tnew com.amazonaws.services.securitytoken.model.Tag().withKey(<%=tagKey%>).withValue(<%=tagValue%>);\r\n+\t        \t\t\ttagList_<%=cid%>.add(tag_<%=cid%>);\r\n+\t        \t\t\t\r\n+\t        \t\t\tif(\"true\".equals(<%=tagTransitive%>))\r\n+\t        \t\t\t\ttranTagKeys_<%=cid%>.add(<%=tagKey%>);\r\n+\t        <%\r\n+\t        \t\t}\r\n+\t\t\t\t}\r\n \t\t\t%>\r\n-\t\t\tstsBuilder_<%=cid%>.withClientConfiguration(cc_<%=cid%>);\r\n \t\t\t\r\n-\t\t\tcredentialsProvider_<%=cid%> = stsBuilder_<%=cid%>.build();\r\n+\t\t\tcom.amazonaws.services.securitytoken.AWSSecurityTokenService stsClient_<%=cid%> = \r\n+\t\t\t\t\tcom.amazonaws.services.securitytoken.AWSSecurityTokenServiceClientBuilder.standard()\r\n+\t\t\t\t\t.withCredentials(credentialsProvider_<%=cid%>)\r\n+\t\t\t\t\t<%if(setStsEndpoint && stsEndpoint != null && !stsEndpoint.isEmpty()){%>\r\n+\t\t\t\t\t\r\n+\t\t\t\t\t\t<%if(set_signingRegion){%>\r\n+\t\t\t\t\t\t.withEndpointConfiguration(new com.amazonaws.client.builder.AwsClientBuilder.EndpointConfiguration(<%=stsEndpoint%>, <%=signingRegion%>))\r\n+\t\t\t\t\t\t<%}else{%>\r\n+\t\t\t\t\t\t.withEndpointConfiguration(new com.amazonaws.client.builder.AwsClientBuilder.EndpointConfiguration(<%=stsEndpoint%>, null))\r\n+\t\t\t\t\t\t<%}%>\r\n+\t\t\t\t\t\t\r\n+\t\t\t\t\t<%}else{%>\r\n+\t\t\t\t\t\r\n+\t\t\t\t\t\t<%if(set_signingRegion){%>\r\n+\t\t\t\t\t\t.withRegion(<%=signingRegion%>)\r\n+\t\t\t\t\t\t<%}else{%>\r\n+\t\t\t\t\t\t.withRegion(com.amazonaws.regions.Regions.US_EAST_1)\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6a5acf816f01208d23faf530845024655e13cc78"}, "originalPosition": 100}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1805a55cd1f1052fb097c110ba0030cdf65c4434", "author": {"user": {"login": "vyu-talend", "name": null}}, "url": "https://github.com/Talend/tdi-studio-se/commit/1805a55cd1f1052fb097c110ba0030cdf65c4434", "committedDate": "2020-03-25T08:55:02Z", "message": "feat(TDI-43756):"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgxMDAyOTgw", "url": "https://github.com/Talend/tdi-studio-se/pull/4547#pullrequestreview-381002980", "createdAt": "2020-03-25T10:02:08Z", "commit": {"oid": "1805a55cd1f1052fb097c110ba0030cdf65c4434"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5e8f5e28e69847487af85b33d99d286dd138d853", "author": {"user": {"login": "vyu-talend", "name": null}}, "url": "https://github.com/Talend/tdi-studio-se/commit/5e8f5e28e69847487af85b33d99d286dd138d853", "committedDate": "2020-03-25T10:27:14Z", "message": "feat(TDI-43756):extends fields for SQS"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "be4b8c89a1676602fcc91ef278c4367699f4a587", "author": {"user": {"login": "vyu-talend", "name": null}}, "url": "https://github.com/Talend/tdi-studio-se/commit/be4b8c89a1676602fcc91ef278c4367699f4a587", "committedDate": "2020-03-25T10:27:41Z", "message": "feat(TDI-43756):fix the mistakes."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "872ef07ead6f6d2509510378e4d3cf6e4d5eada9", "author": {"user": {"login": "vyu-talend", "name": null}}, "url": "https://github.com/Talend/tdi-studio-se/commit/872ef07ead6f6d2509510378e4d3cf6e4d5eada9", "committedDate": "2020-03-25T10:36:52Z", "message": "feat(TDI-43756):extends fields for tAmazonEMRXXX,tAamzonRedshiftManage."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5e4bf0e8918d6928f7a760c5264f70b17d6a9061", "author": {"user": {"login": "vyu-talend", "name": null}}, "url": "https://github.com/Talend/tdi-studio-se/commit/5e4bf0e8918d6928f7a760c5264f70b17d6a9061", "committedDate": "2020-03-25T10:37:18Z", "message": "feat(TDI-43756):optimize code."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgxODY5NTYx", "url": "https://github.com/Talend/tdi-studio-se/pull/4547#pullrequestreview-381869561", "createdAt": "2020-03-26T10:19:19Z", "commit": {"oid": "5e4bf0e8918d6928f7a760c5264f70b17d6a9061"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQxMDoxOToxOVrOF8ACcg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQxMDoxOToxOVrOF8ACcg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODQ1OTUwNg==", "bodyText": "please note that: don't include change which plan to fix in other PR", "url": "https://github.com/Talend/tdi-studio-se/pull/4547#discussion_r398459506", "createdAt": "2020-03-26T10:19:19Z", "author": {"login": "jzhao-talend"}, "path": "main/plugins/org.talend.designer.components.localprovider/components/tS3Connection/tS3Connection_java.xml", "diffHunk": "@@ -337,8 +438,8 @@\n \n    <CODEGENERATION>\n     <IMPORTS>\n-       <IMPORT NAME=\"aws-java-sdk-1.11.406.jar\" MODULE=\"aws-java-sdk-1.11.406.jar\"\n-\t\t\tMVN=\"mvn:com.amazonaws/aws-java-sdk/1.11.406\"\n+       <IMPORT NAME=\"aws-java-sdk-1.11.729.jar\" MODULE=\"aws-java-sdk-1.11.729.jar\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5e4bf0e8918d6928f7a760c5264f70b17d6a9061"}, "originalPosition": 230}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1acaf65689ad72e0f251dbeec47b41b5aeb67e0f", "author": {"user": {"login": "vyu-talend", "name": null}}, "url": "https://github.com/Talend/tdi-studio-se/commit/1acaf65689ad72e0f251dbeec47b41b5aeb67e0f", "committedDate": "2020-03-26T10:40:18Z", "message": "feat(TDI-43756):retrieve changes on S3connection.xml"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgxOTAzMDY5", "url": "https://github.com/Talend/tdi-studio-se/pull/4547#pullrequestreview-381903069", "createdAt": "2020-03-26T11:05:27Z", "commit": {"oid": "1acaf65689ad72e0f251dbeec47b41b5aeb67e0f"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "07e6a5aaa69d54498539637fc24a188fd7344011", "author": {"user": {"login": "vyu-talend", "name": null}}, "url": "https://github.com/Talend/tdi-studio-se/commit/07e6a5aaa69d54498539637fc24a188fd7344011", "committedDate": "2020-04-21T02:10:26Z", "message": "feat(TDI-43756):fix duplicated variables."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "de947530ac01e665883638b7fc3d52473aa956b8", "author": {"user": {"login": "vyu-talend", "name": null}}, "url": "https://github.com/Talend/tdi-studio-se/commit/de947530ac01e665883638b7fc3d52473aa956b8", "committedDate": "2020-04-21T02:30:54Z", "message": "feat(TDI-43756):fix same error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cbd0b48b33f09580d68b213ae5b2aafbfa5910b8", "author": {"user": {"login": "vyu-talend", "name": null}}, "url": "https://github.com/Talend/tdi-studio-se/commit/cbd0b48b33f09580d68b213ae5b2aafbfa5910b8", "committedDate": "2020-04-21T04:14:14Z", "message": "feat(TDI-43756):optimize codes."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "785ce1c79df6c7a1f67c3f1f785378e684d2c15b", "author": {"user": {"login": "vyu-talend", "name": null}}, "url": "https://github.com/Talend/tdi-studio-se/commit/785ce1c79df6c7a1f67c3f1f785378e684d2c15b", "committedDate": "2020-04-26T09:33:45Z", "message": "feat(TDI-43756):use default region(US_WEST_2) for sts."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a595d27e011a7a558e085dbd3f11a8280df13615", "author": {"user": {"login": "vyu-talend", "name": null}}, "url": "https://github.com/Talend/tdi-studio-se/commit/a595d27e011a7a558e085dbd3f11a8280df13615", "committedDate": "2020-04-27T01:34:03Z", "message": "feat(TDI-43756):change default to US-EAST-1."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAwNjkwMjI4", "url": "https://github.com/Talend/tdi-studio-se/pull/4547#pullrequestreview-400690228", "createdAt": "2020-04-27T07:27:45Z", "commit": {"oid": "a595d27e011a7a558e085dbd3f11a8280df13615"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAwNjk0NDk3", "url": "https://github.com/Talend/tdi-studio-se/pull/4547#pullrequestreview-400694497", "createdAt": "2020-04-27T07:34:24Z", "commit": {"oid": "a595d27e011a7a558e085dbd3f11a8280df13615"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QwNzozNDoyNFrOGMU6mg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QwNzozNDoyNFrOGMU6mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTU3ODc3OA==", "bodyText": "Isn't this tagInfoList a List<Map<String,String>> ? why convert directly to boolean? Are you sure it works?", "url": "https://github.com/Talend/tdi-studio-se/pull/4547#discussion_r415578778", "createdAt": "2020-04-27T07:34:24Z", "author": {"login": "pyzhou-talend"}, "path": "main/plugins/org.talend.designer.components.localprovider/components/tSQSConnection/SQSClient.javajet", "diffHunk": "@@ -98,22 +107,115 @@\n \t\t\t}\r\n \t\t}\r\n \t\tif(assumeRole) {\r\n+\t\t\tint policyListSize = policyList.size();\r\n+\t\t\tint tagInfoListSize = tagInfoList.size();\r\n \t\t%>\r\n+\t\t\tint policyListSize_<%=cid%> = <%=policyListSize%>;\r\n+\t\t\tint tagInfoListSize_<%=cid%> = <%=tagInfoListSize%>;\r\n \t\t\tint sessionDurationSeconds_<%=cid%> = <%=sessionDuration%> * 60;\r\n-\t\t\tcom.amazonaws.auth.STSAssumeRoleSessionCredentialsProvider.Builder stsBuilder_<%=cid%> = \r\n-\t\t\t\t\tnew com.amazonaws.auth.STSAssumeRoleSessionCredentialsProvider.Builder(<%=arn%>, <%=roleSessionName%>).withLongLivedCredentialsProvider(credentialsProvider_<%=cid%>)\r\n-\t\t\t\t\t.withRoleSessionDurationSeconds(sessionDurationSeconds_<%=cid%>);\r\n-\t\t\t\t\t\r\n-\t\t\t<%\r\n-\t\t\tif(setStsEndpoint) {\r\n-\t\t\t%>\r\n-\t\t\t\tstsBuilder_<%=cid%>.withServiceEndpoint(<%=stsEndpoint%>);\r\n-\t\t\t<%\r\n-\t\t\t}\r\n+\t\t\tList<com.amazonaws.services.securitytoken.model.PolicyDescriptorType> policyArnList_<%=cid%> = null;\r\n+    \t\t\t\r\n+    \t\t<%\r\n+\t\t\t\tif(policyListSize > 0){\r\n+\t        %>\r\n+\t                policyArnList_<%=cid%> = new java.util.ArrayList<com.amazonaws.services.securitytoken.model.PolicyDescriptorType>();\r\n+\t        <%\r\n+\t        \t\tfor(int policyListIndex = 0; policyListIndex < policyListSize; policyListIndex++){\r\n+\t        \t\t\tString policyArn = policyList.get(policyListIndex).get(\"POLICY_ARN\");\r\n+\t        %>\r\n+\t        \t\t\tpolicyArnList_<%=cid%>.add(new com.amazonaws.services.securitytoken.model.PolicyDescriptorType().withArn(<%=policyArn%>));\r\n+\t        <%\r\n+\t        \t\t}\r\n+\t        \t}\r\n+        \t%>\r\n+    \t\tList<com.amazonaws.services.securitytoken.model.Tag> tagList_<%=cid%> = null;\r\n+    \t\tList<String> tranTagKeys_<%=cid%> = null;\r\n+    \t\t\r\n+    \t\t<%\r\n+\t        \tif(tagInfoListSize > 0){\r\n+\t        %>\r\n+\t        \t\ttagList_<%=cid%> = new java.util.ArrayList<com.amazonaws.services.securitytoken.model.Tag>();\r\n+\t        \t\ttranTagKeys_<%=cid%> = new java.util.ArrayList<String>();\r\n+\t        <%\r\n+\t        \t\tfor(int tagInfoListIndex = 0; tagInfoListIndex < tagInfoListSize; tagInfoListIndex++){\r\n+\t        \t\t\tString tagKey = tagInfoList.get(tagInfoListIndex).get(\"TAG_KEY\");\r\n+\t        \t\t\tString tagValue = tagInfoList.get(tagInfoListIndex).get(\"TAG_VALUE\");\r\n+\t        \t\t\tboolean tagTransitive = tagInfoList.get(tagInfoListIndex).get(\"TAG_TRANSITIVE\");\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a595d27e011a7a558e085dbd3f11a8280df13615"}, "originalPosition": 66}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4615, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}