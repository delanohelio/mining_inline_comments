{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc3MDcxNjkw", "number": 4465, "title": "fix(TUP-26156)tCreateTable change DBType and Property Type not work", "bodyText": "https://jira.talendforge.org/browse/TUP-26156\nWhat is the current behavior? (You can also link to an open issue here)\nWhat is the new behavior?\nPlease check if the PR fulfills these requirements\n\n The commit message follows Talend standard\n Tests for the changes have been added (for bug fixes / features)\n Docs have been added / updated (for bug fixes / features) ?\n The code coverage on new code >75%\n The new code does not introduce new technical issues (sonar / eslint)\n\nWhat kind of change does this PR introduce?\n\n Bugfix\n Feature\n Code style update (formatting, local variables)\n Refactoring (no functional changes, no api changes)\n Build / CI related changes\n Other... Please describe:\n\nDoes this PR introduce a breaking change?\n\n Yes\n No\n\nIf this PR contains a breaking change, please describe the impact and migration path for existing applications: ...\nOther information:", "createdAt": "2020-02-19T10:00:48Z", "url": "https://github.com/Talend/tdi-studio-se/pull/4465", "merged": true, "mergeCommit": {"oid": "5dca25b157203964b3b27669d43e8dc3134e31db"}, "closed": true, "closedAt": "2020-03-04T09:16:47Z", "author": {"login": "jding-tlnd"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcFzdyiAH2gAyMzc3MDcxNjkwOjFkYjlkNzBkNTY1ZTZlOTM4ODRiYjBkOTAwZjRkMTliMGYwZjBkMjA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcKTVGVAFqTM2ODYxMTI3MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "1db9d70d565e6e93884bb0d900f4d19b0f0f0d20", "author": {"user": {"login": "jding-tlnd", "name": "Jane Ding"}}, "url": "https://github.com/Talend/tdi-studio-se/commit/1db9d70d565e6e93884bb0d900f4d19b0f0f0d20", "committedDate": "2020-02-19T09:53:24Z", "message": "fix(TUP-26156)tCreateTable: change \"DBType\" and \"Property Type\" not work\nhttps://jira.talendforge.org/browse/TUP-26156"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "28a85c9c196bef3fce5d5e4f1d6e6602c4ccf2c9", "author": {"user": {"login": "jding-tlnd", "name": "Jane Ding"}}, "url": "https://github.com/Talend/tdi-studio-se/commit/28a85c9c196bef3fce5d5e4f1d6e6602c4ccf2c9", "committedDate": "2020-02-19T11:16:40Z", "message": "fix(TUP-26156)tCreateTable: change \"DBType\" and \"Property Type\" not work\nhttps://jira.talendforge.org/browse/TUP-26156"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYxNjc1MzAy", "url": "https://github.com/Talend/tdi-studio-se/pull/4465#pullrequestreview-361675302", "createdAt": "2020-02-20T07:16:48Z", "commit": {"oid": "28a85c9c196bef3fce5d5e4f1d6e6602c4ccf2c9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQwNzoxNjo0OVrOFsIaVA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQwNzoxNjo0OVrOFsIaVA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTgxOTQ3Ng==", "bodyText": "I think no need to check if it is \"tCreateTable\"  ,we set value when it is show should be ok.", "url": "https://github.com/Talend/tdi-studio-se/pull/4465#discussion_r381819476", "createdAt": "2020-02-20T07:16:49Z", "author": {"login": "wchen-talend"}, "path": "main/plugins/org.talend.designer.core/src/main/java/org/talend/designer/core/ui/editor/cmd/ChangeValuesFromRepository.java", "diffHunk": "@@ -625,6 +625,16 @@ else if (connection instanceof SalesforceSchemaConnection && \"CUSTOM_MODULE_NAME\n                                 objectValue = newValue;\n                             }\n \n+                            /**\n+                             * For tCreateTable, several parameter have the same repository value\n+                             * (e.g.DB_MYSQL_VERSION/DB_POSTGRE_VERSION/...=>DB_VERSION), avoid to set all...\n+                             */\n+                            if (\"tCreateTable\".equals(elem.getPropertyValue(EParameterName.COMPONENT_NAME.getName())) //$NON-NLS-1$\n+                                    && EParameterName.DB_VERSION.getName().equals(param.getRepositoryValue())\n+                                    && !param.isShow(elem.getElementParameters())) {\n+                                continue;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "28a85c9c196bef3fce5d5e4f1d6e6602c4ccf2c9"}, "originalPosition": 11}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYxNjc1NjIx", "url": "https://github.com/Talend/tdi-studio-se/pull/4465#pullrequestreview-361675621", "createdAt": "2020-02-20T07:17:36Z", "commit": {"oid": "28a85c9c196bef3fce5d5e4f1d6e6602c4ccf2c9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQwNzoxNzozN1rOFsIbWg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQwNzoxNzozN1rOFsIbWg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTgxOTczOA==", "bodyText": "I'm not quite understand how it works for other components and why only problem for tCreateTable.", "url": "https://github.com/Talend/tdi-studio-se/pull/4465#discussion_r381819738", "createdAt": "2020-02-20T07:17:37Z", "author": {"login": "wchen-talend"}, "path": "main/plugins/org.talend.designer.core/src/main/java/org/talend/designer/core/ui/editor/cmd/PropertyChangeCommand.java", "diffHunk": "@@ -238,6 +238,15 @@ public void execute() {\n                 Object value = elem.getPropertyValue(propName);\n                 if (value == null || (!value.toString().endsWith(\"xsd\") && !value.toString().endsWith(\"xsd\\\"\"))) {\n                     elem.setPropertyValue(propertyTypeName, EmfComponent.BUILTIN);\n+\n+                    /**\n+                     * For tCreateTable, DbType changed need to clean repository connection id stored, or it will get\n+                     * original DbType repository connection when click to Repository property type from built-in\n+                     */\n+                    if (\"tCreateTable\".equals(elem.getPropertyValue(EParameterName.COMPONENT_NAME.getName()))\n+                            && \"DBTYPE\".equals(propName)) {\n+                        elem.setPropertyValue(EParameterName.REPOSITORY_PROPERTY_TYPE.getName(), \"\");\n+                    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "28a85c9c196bef3fce5d5e4f1d6e6602c4ccf2c9"}, "originalPosition": 12}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3be7688f76977d9897057cda62aa1bf55bff68e0", "author": {"user": {"login": "jding-tlnd", "name": "Jane Ding"}}, "url": "https://github.com/Talend/tdi-studio-se/commit/3be7688f76977d9897057cda62aa1bf55bff68e0", "committedDate": "2020-02-20T09:41:02Z", "message": "fix(TUP-26156)tCreateTable change DBType and Property Type not work\nhttps://jira.talendforge.org/browse/TUP-26156"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY4NjExMjcx", "url": "https://github.com/Talend/tdi-studio-se/pull/4465#pullrequestreview-368611271", "createdAt": "2020-03-04T09:16:35Z", "commit": {"oid": "3be7688f76977d9897057cda62aa1bf55bff68e0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4631, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}