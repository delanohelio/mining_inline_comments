{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIyNzk5NzYz", "number": 1978, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQxMTo0ODo1M1rOD_o2nQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQwOToyNjozNlrOEAbhQg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY4MDU2MjIxOnYy", "diffSide": "RIGHT", "path": "services/device-registry-base/src/main/java/org/eclipse/hono/service/management/device/DelegatingDeviceManagementHttpEndpoint.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQxMTo0ODo1M1rOGaapAA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQxMTo0ODo1M1rOGaapAA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDM1MjY0MA==", "bodyText": "I think it would be better to do this check within span, so that we have a proper tracing/logging for the errors. Like it's done for the credentials endpoint.", "url": "https://github.com/eclipse/hono/pull/1978#discussion_r430352640", "createdAt": "2020-05-26T11:48:53Z", "author": {"login": "dejanb"}, "path": "services/device-registry-base/src/main/java/org/eclipse/hono/service/management/device/DelegatingDeviceManagementHttpEndpoint.java", "diffHunk": "@@ -93,21 +93,25 @@ public void addRoutes(final Router router) {\n \n         // CREATE device\n         router.post(pathWithTenantAndDeviceId)\n+                .handler(this::verifyDeviceId)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a882af252e1d1e65522c83437b1e84e6400bc631"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY4MDU2NTI2OnYy", "diffSide": "RIGHT", "path": "core/src/main/java/org/eclipse/hono/util/CredentialsConstants.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQxMTo0OTo0OVrOGaaq3w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQxNDoyNDoxNlrOGagvjw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDM1MzExOQ==", "bodyText": "Maybe you can define default regex at one place, like DEFAULT_ID_REGEX and reuse that value.", "url": "https://github.com/eclipse/hono/pull/1978#discussion_r430353119", "createdAt": "2020-05-26T11:49:49Z", "author": {"login": "dejanb"}, "path": "core/src/main/java/org/eclipse/hono/util/CredentialsConstants.java", "diffHunk": "@@ -116,6 +116,14 @@\n      * The vert.x event bus address to which inbound credentials messages are published.\n      */\n     public static final String EVENT_BUS_ADDRESS_CREDENTIALS_IN = \"credentials.in\";\n+    /**\n+     * The regular expression to validate that the auth-id field supplied in credentials is legal.\n+     */\n+    public static final String AUTH_ID_VALUE_REGEX = \"^[a-z0-9-=]+$\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a882af252e1d1e65522c83437b1e84e6400bc631"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDQ1MjYyMw==", "bodyText": "I moved the regexp for tenant id and device id to RegistryManagementConstants.DEFAULT_ID_REGEX", "url": "https://github.com/eclipse/hono/pull/1978#discussion_r430452623", "createdAt": "2020-05-26T14:24:16Z", "author": {"login": "jbtrystram"}, "path": "core/src/main/java/org/eclipse/hono/util/CredentialsConstants.java", "diffHunk": "@@ -116,6 +116,14 @@\n      * The vert.x event bus address to which inbound credentials messages are published.\n      */\n     public static final String EVENT_BUS_ADDRESS_CREDENTIALS_IN = \"credentials.in\";\n+    /**\n+     * The regular expression to validate that the auth-id field supplied in credentials is legal.\n+     */\n+    public static final String AUTH_ID_VALUE_REGEX = \"^[a-z0-9-=]+$\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDM1MzExOQ=="}, "originalCommit": {"oid": "a882af252e1d1e65522c83437b1e84e6400bc631"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY4ODg2MzM4OnYy", "diffSide": "RIGHT", "path": "site/documentation/content/api/management/device-registry-v1.yaml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQwOToyNjozNlrOGbs_iw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQxMTo0NToyNFrOGbxcdQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTcwMTg5OQ==", "bodyText": "We should update a default patterns for different identifiers and add some docs on the configuration.", "url": "https://github.com/eclipse/hono/pull/1978#discussion_r431701899", "createdAt": "2020-05-28T09:26:36Z", "author": {"login": "dejanb"}, "path": "site/documentation/content/api/management/device-registry-v1.yaml", "diffHunk": "@@ -810,8 +810,10 @@ components:\n          properties:\n             \"type\":\n                type: string\n+               pattern: [a-z0-9-]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ba4c18ee3d1c5e3b2d0d18b1230fcc37cd32696e"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTc3NDgzNw==", "bodyText": "done :)", "url": "https://github.com/eclipse/hono/pull/1978#discussion_r431774837", "createdAt": "2020-05-28T11:45:24Z", "author": {"login": "jbtrystram"}, "path": "site/documentation/content/api/management/device-registry-v1.yaml", "diffHunk": "@@ -810,8 +810,10 @@ components:\n          properties:\n             \"type\":\n                type: string\n+               pattern: [a-z0-9-]", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTcwMTg5OQ=="}, "originalCommit": {"oid": "ba4c18ee3d1c5e3b2d0d18b1230fcc37cd32696e"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3124, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}