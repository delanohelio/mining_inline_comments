{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc3MzA2MDgw", "number": 1777, "title": "[#1679] Split and refactor device registry module.", "bodyText": "Currently I am working on the issue #1679, which is implementing a Mongodb based device-registry. IMHO the existing device-registry module could be split into various sub-modules and also the classes could be reorganised under different packages. I think this enables to understand the code better and also to easier to maintain. This PR is a proposal how it could be refactored.\nIn the existing device-registry module, although there is a possibility to add more implementations (eg. Mongodb, Infinispan based etc.) by enabling the spring services/repositories based on the conditional property, this approach bundles all the the implementation classes and the dependencies into a single jar/image. With the propsal in this PR, this can be avoided and each device-registry implementations could be created into a separate jar/image.\nThe helm charts could also be adapted in such a way to specify which implementation ie. a File or Mongodb  or Infinispan based device-registry should be deployed.", "createdAt": "2020-02-19T17:58:15Z", "url": "https://github.com/eclipse/hono/pull/1777", "merged": true, "mergeCommit": {"oid": "85274b36f8a83f1448c5d6059f5ddee069a9b684"}, "closed": true, "closedAt": "2020-03-02T14:22:38Z", "author": {"login": "kaniyan"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcGK_yUgBqjMwNTYwMjAyMTU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcJtd1dgFqTM2NzE4NDQ0NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "38a168c6136e8cbe2048694bb341e73b41a5aee9", "author": {"user": {"login": "kaniyan", "name": "Karthees Kalidass"}}, "url": "https://github.com/eclipse/hono/commit/38a168c6136e8cbe2048694bb341e73b41a5aee9", "committedDate": "2020-02-19T17:10:32Z", "message": "[#1679] Refactor device registry module into various sub modules.\n\nSigned-off-by: Kartheeswaran Kalidass <kartheeswaran.kalidass@bosch.io>"}, "afterCommit": {"oid": "70f89aded7346ba42cf54cb5e5f9f7af858b7913", "author": {"user": {"login": "kaniyan", "name": "Karthees Kalidass"}}, "url": "https://github.com/eclipse/hono/commit/70f89aded7346ba42cf54cb5e5f9f7af858b7913", "committedDate": "2020-02-20T13:11:11Z", "message": "[#1679] Refactor device registry module into various sub modules.\n\nSigned-off-by: Kartheeswaran Kalidass <kartheeswaran.kalidass@bosch.io>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "70f89aded7346ba42cf54cb5e5f9f7af858b7913", "author": {"user": {"login": "kaniyan", "name": "Karthees Kalidass"}}, "url": "https://github.com/eclipse/hono/commit/70f89aded7346ba42cf54cb5e5f9f7af858b7913", "committedDate": "2020-02-20T13:11:11Z", "message": "[#1679] Refactor device registry module into various sub modules.\n\nSigned-off-by: Kartheeswaran Kalidass <kartheeswaran.kalidass@bosch.io>"}, "afterCommit": {"oid": "d8833ae447642d6c2e3edcf5dc5629fe19968745", "author": {"user": {"login": "kaniyan", "name": "Karthees Kalidass"}}, "url": "https://github.com/eclipse/hono/commit/d8833ae447642d6c2e3edcf5dc5629fe19968745", "committedDate": "2020-02-25T11:02:03Z", "message": "[#1679] Refactor device registry module into various sub modules.\n\nSigned-off-by: Kartheeswaran Kalidass <kartheeswaran.kalidass@bosch.io>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4253b74cd5a974ff6d8deccb728bec03e16438e8", "author": {"user": {"login": "kaniyan", "name": "Karthees Kalidass"}}, "url": "https://github.com/eclipse/hono/commit/4253b74cd5a974ff6d8deccb728bec03e16438e8", "committedDate": "2020-02-27T15:41:17Z", "message": "[#1679] Refactor device registry module into various sub modules.\n\nSigned-off-by: Kartheeswaran Kalidass <kartheeswaran.kalidass@bosch.io>"}, "afterCommit": {"oid": "4acb65dc7f03a6b452c4791af5e92e5b358864b6", "author": {"user": {"login": "kaniyan", "name": "Karthees Kalidass"}}, "url": "https://github.com/eclipse/hono/commit/4acb65dc7f03a6b452c4791af5e92e5b358864b6", "committedDate": "2020-02-28T10:10:49Z", "message": "[#1679] Refactor device registry module into various sub modules.\n\nSigned-off-by: Kartheeswaran Kalidass <kartheeswaran.kalidass@bosch.io>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4acb65dc7f03a6b452c4791af5e92e5b358864b6", "author": {"user": {"login": "kaniyan", "name": "Karthees Kalidass"}}, "url": "https://github.com/eclipse/hono/commit/4acb65dc7f03a6b452c4791af5e92e5b358864b6", "committedDate": "2020-02-28T10:10:49Z", "message": "[#1679] Refactor device registry module into various sub modules.\n\nSigned-off-by: Kartheeswaran Kalidass <kartheeswaran.kalidass@bosch.io>"}, "afterCommit": {"oid": "c994d0a43d0f6213a25ebdc47ecd10d5b6ad6921", "author": {"user": {"login": "kaniyan", "name": "Karthees Kalidass"}}, "url": "https://github.com/eclipse/hono/commit/c994d0a43d0f6213a25ebdc47ecd10d5b6ad6921", "committedDate": "2020-02-28T14:12:04Z", "message": "[#1679] Refactor device registry module into various sub modules.\n\nSigned-off-by: Kartheeswaran Kalidass <kartheeswaran.kalidass@bosch.io>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c994d0a43d0f6213a25ebdc47ecd10d5b6ad6921", "author": {"user": {"login": "kaniyan", "name": "Karthees Kalidass"}}, "url": "https://github.com/eclipse/hono/commit/c994d0a43d0f6213a25ebdc47ecd10d5b6ad6921", "committedDate": "2020-02-28T14:12:04Z", "message": "[#1679] Refactor device registry module into various sub modules.\n\nSigned-off-by: Kartheeswaran Kalidass <kartheeswaran.kalidass@bosch.io>"}, "afterCommit": {"oid": "530035c6f2686819b648ccd241b394d3e31026de", "author": {"user": {"login": "kaniyan", "name": "Karthees Kalidass"}}, "url": "https://github.com/eclipse/hono/commit/530035c6f2686819b648ccd241b394d3e31026de", "committedDate": "2020-02-28T14:20:37Z", "message": "[#1679] Refactor device registry.\n\nSigned-off-by: Kartheeswaran Kalidass <kartheeswaran.kalidass@bosch.io>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY3MTA4Mzgw", "url": "https://github.com/eclipse/hono/pull/1777#pullrequestreview-367108380", "createdAt": "2020-03-02T10:53:55Z", "commit": {"oid": "530035c6f2686819b648ccd241b394d3e31026de"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQxMDo1Mzo1NVrOFwbSeQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQxMDo1Mzo1NVrOFwbSeQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjMyMzA2NQ==", "bodyText": "Package name should be all lowercase, so deviceconnection.", "url": "https://github.com/eclipse/hono/pull/1777#discussion_r386323065", "createdAt": "2020-03-02T10:53:55Z", "author": {"login": "calohmn"}, "path": "services/device-registry-base/src/main/java/org/eclipse/hono/deviceregistry/service/deviceConnection/AutowiredDeviceConnectionAdapter.java", "diffHunk": "@@ -11,7 +11,7 @@\n  * SPDX-License-Identifier: EPL-2.0\n  *******************************************************************************/\n \n-package org.eclipse.hono.deviceregistry;\n+package org.eclipse.hono.deviceregistry.service.deviceConnection;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "530035c6f2686819b648ccd241b394d3e31026de"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY3MTA5MjQx", "url": "https://github.com/eclipse/hono/pull/1777#pullrequestreview-367109241", "createdAt": "2020-03-02T10:55:18Z", "commit": {"oid": "530035c6f2686819b648ccd241b394d3e31026de"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQxMDo1NToxOFrOFwbVDw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQxMDo1NToxOFrOFwbVDw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjMyMzcyNw==", "bodyText": "Package name all lowercase (deviceconnection) also in test directory.", "url": "https://github.com/eclipse/hono/pull/1777#discussion_r386323727", "createdAt": "2020-03-02T10:55:18Z", "author": {"login": "calohmn"}, "path": "services/device-registry-base/src/test/java/org/eclipse/hono/deviceregistry/service/deviceConnection/MapBasedDeviceConnectionServiceTest.java", "diffHunk": "@@ -11,7 +11,7 @@\n  * SPDX-License-Identifier: EPL-2.0\n  *******************************************************************************/\n \n-package org.eclipse.hono.deviceregistry;\n+package org.eclipse.hono.deviceregistry.service.deviceConnection;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "530035c6f2686819b648ccd241b394d3e31026de"}, "originalPosition": 12}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "530035c6f2686819b648ccd241b394d3e31026de", "author": {"user": {"login": "kaniyan", "name": "Karthees Kalidass"}}, "url": "https://github.com/eclipse/hono/commit/530035c6f2686819b648ccd241b394d3e31026de", "committedDate": "2020-02-28T14:20:37Z", "message": "[#1679] Refactor device registry.\n\nSigned-off-by: Kartheeswaran Kalidass <kartheeswaran.kalidass@bosch.io>"}, "afterCommit": {"oid": "2f6b219fe4e4df78abcc0c428276f2f3f4470cb1", "author": {"user": {"login": "kaniyan", "name": "Karthees Kalidass"}}, "url": "https://github.com/eclipse/hono/commit/2f6b219fe4e4df78abcc0c428276f2f3f4470cb1", "committedDate": "2020-03-02T12:06:21Z", "message": "[#1679] Refactor device registry.\n\nSigned-off-by: Kartheeswaran Kalidass <kartheeswaran.kalidass@bosch.io>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2d112a3900d2cc1d224a5311a3dc6890fe46a0cd", "author": {"user": {"login": "kaniyan", "name": "Karthees Kalidass"}}, "url": "https://github.com/eclipse/hono/commit/2d112a3900d2cc1d224a5311a3dc6890fe46a0cd", "committedDate": "2020-03-02T12:11:01Z", "message": "[#1679] Refactor device registry.\n\nSigned-off-by: Kartheeswaran Kalidass <kartheeswaran.kalidass@bosch.io>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2f6b219fe4e4df78abcc0c428276f2f3f4470cb1", "author": {"user": {"login": "kaniyan", "name": "Karthees Kalidass"}}, "url": "https://github.com/eclipse/hono/commit/2f6b219fe4e4df78abcc0c428276f2f3f4470cb1", "committedDate": "2020-03-02T12:06:21Z", "message": "[#1679] Refactor device registry.\n\nSigned-off-by: Kartheeswaran Kalidass <kartheeswaran.kalidass@bosch.io>"}, "afterCommit": {"oid": "2d112a3900d2cc1d224a5311a3dc6890fe46a0cd", "author": {"user": {"login": "kaniyan", "name": "Karthees Kalidass"}}, "url": "https://github.com/eclipse/hono/commit/2d112a3900d2cc1d224a5311a3dc6890fe46a0cd", "committedDate": "2020-03-02T12:11:01Z", "message": "[#1679] Refactor device registry.\n\nSigned-off-by: Kartheeswaran Kalidass <kartheeswaran.kalidass@bosch.io>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY3MTg0NDQ0", "url": "https://github.com/eclipse/hono/pull/1777#pullrequestreview-367184444", "createdAt": "2020-03-02T13:09:44Z", "commit": {"oid": "2d112a3900d2cc1d224a5311a3dc6890fe46a0cd"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 982, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}