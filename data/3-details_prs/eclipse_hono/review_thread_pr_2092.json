{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU3NTgzNTQ2", "number": 2092, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQwNzozNjozMlrOESsIiQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQwNzozNjozMlrOESsIiQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg4MDMyOTA1OnYy", "diffSide": "RIGHT", "path": "tests/src/test/java/org/eclipse/hono/tests/coap/CoapTestBase.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQwNzozNjozMlrOG4AUzg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQwNzo0MjowMlrOG4AgqQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTM3ODc2Ng==", "bodyText": "I'm not sure, if a device, which doesn't use coaps, could be considered to be authenticated?", "url": "https://github.com/eclipse/hono/pull/2092#discussion_r461378766", "createdAt": "2020-07-28T07:36:32Z", "author": {"login": "boaks"}, "path": "tests/src/test/java/org/eclipse/hono/tests/coap/CoapTestBase.java", "diffHunk": "@@ -1053,6 +1059,53 @@ private URI getRequestUri(final String scheme, final String resource) {\n         }\n     }\n \n+    /**\n+     * Creates a CoAP request using either the <em>coaps</em> or <em>coap</em> scheme,\n+     * depending on the given endpoint configuration.\n+     *\n+     * @param endpointConfig The endpoint configuration.\n+     * @param requestDeviceId The identifier of the device to publish data for.\n+     * @param msgNo The message number.\n+     * @return The request to send.\n+     */\n+    protected Request createCoapsOrCoapRequest(\n+            final CoapCommandEndpointConfiguration endpointConfig,\n+            final String requestDeviceId,\n+            final int msgNo) {\n+\n+        if (endpointConfig.isSubscribeAsGatewayForSingleDevice()) {\n+            return createCoapsRequest(Code.PUT, getMessageType(), getPutResource(tenantId, requestDeviceId), msgNo);\n+        } else if (endpointConfig.isSubscribeAsUnauthenticatedDevice()) {\n+            return createCoapRequest(Code.PUT, getMessageType(), getPutResource(tenantId, requestDeviceId), msgNo);\n+        } else {\n+            return createCoapsRequest(Code.POST, getMessageType(), getPostResource(), msgNo);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f193237f76bfe5f8e3df3991807e8e70e7e7157"}, "originalPosition": 111}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTM4MTgwMQ==", "bodyText": "The not-using-coaps request handling is done in the UnauthenticatedDevice block.", "url": "https://github.com/eclipse/hono/pull/2092#discussion_r461381801", "createdAt": "2020-07-28T07:42:02Z", "author": {"login": "calohmn"}, "path": "tests/src/test/java/org/eclipse/hono/tests/coap/CoapTestBase.java", "diffHunk": "@@ -1053,6 +1059,53 @@ private URI getRequestUri(final String scheme, final String resource) {\n         }\n     }\n \n+    /**\n+     * Creates a CoAP request using either the <em>coaps</em> or <em>coap</em> scheme,\n+     * depending on the given endpoint configuration.\n+     *\n+     * @param endpointConfig The endpoint configuration.\n+     * @param requestDeviceId The identifier of the device to publish data for.\n+     * @param msgNo The message number.\n+     * @return The request to send.\n+     */\n+    protected Request createCoapsOrCoapRequest(\n+            final CoapCommandEndpointConfiguration endpointConfig,\n+            final String requestDeviceId,\n+            final int msgNo) {\n+\n+        if (endpointConfig.isSubscribeAsGatewayForSingleDevice()) {\n+            return createCoapsRequest(Code.PUT, getMessageType(), getPutResource(tenantId, requestDeviceId), msgNo);\n+        } else if (endpointConfig.isSubscribeAsUnauthenticatedDevice()) {\n+            return createCoapRequest(Code.PUT, getMessageType(), getPutResource(tenantId, requestDeviceId), msgNo);\n+        } else {\n+            return createCoapsRequest(Code.POST, getMessageType(), getPostResource(), msgNo);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTM3ODc2Ng=="}, "originalCommit": {"oid": "9f193237f76bfe5f8e3df3991807e8e70e7e7157"}, "originalPosition": 111}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3205, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}