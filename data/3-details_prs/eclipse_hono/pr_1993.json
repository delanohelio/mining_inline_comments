{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI0NDg5MjU1", "number": 1993, "title": "[#1679] Integration tests for the mongo db based device registry", "bodyText": "", "createdAt": "2020-05-28T13:32:40Z", "url": "https://github.com/eclipse/hono/pull/1993", "merged": true, "mergeCommit": {"oid": "3387850b2753c28b779a5468c32f1b26410538ff"}, "closed": true, "closedAt": "2020-06-03T12:34:55Z", "author": {"login": "kaniyan"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcl-QEqgFqTQyMDc1NTMxNQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcnotB9gFqTQyMzUwNTczOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIwNzU1MzE1", "url": "https://github.com/eclipse/hono/pull/1993#pullrequestreview-420755315", "createdAt": "2020-05-29T08:32:19Z", "commit": {"oid": "437e1324601cba4c043bb11044c6990c63fb5fd3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQwODozMjoxOVrOGcTsOg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQwODozMjoxOVrOGcTsOg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjMzNTkzMA==", "bodyText": "IMHO we should also skip building the image if the MongoDB profile is disabled", "url": "https://github.com/eclipse/hono/pull/1993#discussion_r432335930", "createdAt": "2020-05-29T08:32:19Z", "author": {"login": "sophokles73"}, "path": "tests/pom.xml", "diffHunk": "@@ -223,6 +239,54 @@ Test cases are run against Docker images of Hono server + (Apache Qpid Dispatch\n               <autoCreateCustomNetworks>true</autoCreateCustomNetworks>\n               <startParallel>false</startParallel>\n               <images>\n+                <!-- ##### Mongo DB instance for the device registry ##### -->\n+                <image>\n+                  <name>${docker.image.org-name}/hono-mongodb-test</name>\n+                  <alias>mongo</alias>\n+                  <build>\n+                    <imagePullPolicy>IfNotPresent</imagePullPolicy>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "437e1324601cba4c043bb11044c6990c63fb5fd3"}, "originalPosition": 39}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "437e1324601cba4c043bb11044c6990c63fb5fd3", "author": {"user": {"login": "kaniyan", "name": "Karthees Kalidass"}}, "url": "https://github.com/eclipse/hono/commit/437e1324601cba4c043bb11044c6990c63fb5fd3", "committedDate": "2020-05-28T13:28:28Z", "message": "[#1679] Integration tests for the mongo db based device registry\n\nSigned-off-by: Kartheeswaran Kalidass <kartheeswaran.kalidass@bosch.io>"}, "afterCommit": {"oid": "a7cb9f8ef8fa107dc1d574ae6bcd753158579462", "author": {"user": {"login": "kaniyan", "name": "Karthees Kalidass"}}, "url": "https://github.com/eclipse/hono/commit/a7cb9f8ef8fa107dc1d574ae6bcd753158579462", "committedDate": "2020-06-03T08:48:35Z", "message": "[#1679] Integration tests for the mongo db based device registry\n\nSigned-off-by: Kartheeswaran Kalidass <kartheeswaran.kalidass@bosch.io>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIzMzc5MDkz", "url": "https://github.com/eclipse/hono/pull/1993#pullrequestreview-423379093", "createdAt": "2020-06-03T09:30:27Z", "commit": {"oid": "a7cb9f8ef8fa107dc1d574ae6bcd753158579462"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QwOTozMDoyN1rOGeTxKQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QwOTozMDoyN1rOGeTxKQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDQzNDM0NQ==", "bodyText": "please use ${log.color.hono-device-registry} instead", "url": "https://github.com/eclipse/hono/pull/1993#discussion_r434434345", "createdAt": "2020-06-03T09:30:27Z", "author": {"login": "sophokles73"}, "path": "tests/pom.xml", "diffHunk": "@@ -228,6 +244,55 @@ Test cases are run against Docker images of Hono server + (Apache Qpid Dispatch\n               <autoCreateCustomNetworks>true</autoCreateCustomNetworks>\n               <startParallel>false</startParallel>\n               <images>\n+                <!-- ##### Mongo DB instance for the device registry ##### -->\n+                <image>\n+                  <name>${docker.image.org-name}/hono-mongodb-test</name>\n+                  <alias>mongo</alias>\n+                  <build>\n+                    <skip>${hono.mongodb.disabled}</skip>\n+                    <imagePullPolicy>IfNotPresent</imagePullPolicy>\n+                    <from>${hono.mongodb.image.name}</from>\n+                    <assembly>\n+                      <mode>dir</mode>\n+                      <basedir>/</basedir>\n+                      <inline>\n+                        <id>config</id>\n+                          <fileSet>\n+                            <directory>${project.build.directory}/resources/mongodb/init_db</directory>\n+                            <outputDirectory>docker-entrypoint-initdb.d/</outputDirectory>\n+                            <includes>\n+                              <include>*</include>\n+                            </includes>\n+                          </fileSet>\n+                      </inline>\n+                    </assembly>\n+                  </build>\n+                  <run>\n+                    <skip>${hono.mongodb.disabled}</skip>\n+                    <ports>\n+                      <port>+mongodb.ip:mongodb.port:${hono.mongodb.port}</port>\n+                    </ports>\n+                    <portPropertyFile>${project.build.directory}/docker/mongodb.port.properties</portPropertyFile>\n+                    <env>\n+                      <MONGO_INITDB_DATABASE>${hono.mongodb.database.name}</MONGO_INITDB_DATABASE>\n+                    </env>\n+                    <network>\n+                      <mode>custom</mode>\n+                      <name>hono</name>\n+                      <alias>${hono.mongodb.host}</alias>\n+                    </network>\n+                    <memorySwap>314572800</memorySwap>\n+                    <memory>314572800</memory>\n+                    <log>\n+                      <prefix>MONGODB</prefix>\n+                      <color>green</color>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a7cb9f8ef8fa107dc1d574ae6bcd753158579462"}, "originalPosition": 75}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a75a551c155d545a7baca4f76ed7ecb64550f7c5", "author": {"user": {"login": "kaniyan", "name": "Karthees Kalidass"}}, "url": "https://github.com/eclipse/hono/commit/a75a551c155d545a7baca4f76ed7ecb64550f7c5", "committedDate": "2020-06-03T09:57:33Z", "message": "[#1679] Integration tests for the mongo db based device registry\n\nSigned-off-by: Kartheeswaran Kalidass <kartheeswaran.kalidass@bosch.io>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1d738be0a3fa8dc3f30bf48531d5f24b6b24f7b0", "author": {"user": {"login": "kaniyan", "name": "Karthees Kalidass"}}, "url": "https://github.com/eclipse/hono/commit/1d738be0a3fa8dc3f30bf48531d5f24b6b24f7b0", "committedDate": "2020-06-03T10:01:06Z", "message": "Use corresponding property for the log color\n\nSigned-off-by: Kartheeswaran Kalidass <kartheeswaran.kalidass@bosch.io>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a7cb9f8ef8fa107dc1d574ae6bcd753158579462", "author": {"user": {"login": "kaniyan", "name": "Karthees Kalidass"}}, "url": "https://github.com/eclipse/hono/commit/a7cb9f8ef8fa107dc1d574ae6bcd753158579462", "committedDate": "2020-06-03T08:48:35Z", "message": "[#1679] Integration tests for the mongo db based device registry\n\nSigned-off-by: Kartheeswaran Kalidass <kartheeswaran.kalidass@bosch.io>"}, "afterCommit": {"oid": "1d738be0a3fa8dc3f30bf48531d5f24b6b24f7b0", "author": {"user": {"login": "kaniyan", "name": "Karthees Kalidass"}}, "url": "https://github.com/eclipse/hono/commit/1d738be0a3fa8dc3f30bf48531d5f24b6b24f7b0", "committedDate": "2020-06-03T10:01:06Z", "message": "Use corresponding property for the log color\n\nSigned-off-by: Kartheeswaran Kalidass <kartheeswaran.kalidass@bosch.io>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIzNTA1NzM4", "url": "https://github.com/eclipse/hono/pull/1993#pullrequestreview-423505738", "createdAt": "2020-06-03T12:34:31Z", "commit": {"oid": "1d738be0a3fa8dc3f30bf48531d5f24b6b24f7b0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 641, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}