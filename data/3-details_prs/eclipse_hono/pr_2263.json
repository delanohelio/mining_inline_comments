{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEwMDE4MTU3", "number": 2263, "title": "[#2258] Specify the content-type of a telemetry/event message via MQTT property bag", "bodyText": "", "createdAt": "2020-10-26T13:10:11Z", "url": "https://github.com/eclipse/hono/pull/2263", "merged": true, "mergeCommit": {"oid": "3d3239ae09f9d1be90b35bba3aa9597dea2853ff"}, "closed": true, "closedAt": "2020-10-27T08:54:53Z", "author": {"login": "kaniyan"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdWULB1gBqjM5MjA2MzE5MDY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdWj5ZEAFqTUxNzQxMTY0Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "864188a5e5e013594c3ffeb194dfb01b1177ceac", "author": {"user": {"login": "kaniyan", "name": "Karthees Kalidass"}}, "url": "https://github.com/eclipse/hono/commit/864188a5e5e013594c3ffeb194dfb01b1177ceac", "committedDate": "2020-10-26T12:01:15Z", "message": "[#2258] Specify the content-type of a telemetry/event message via MQTT property bag\n\nSigned-off-by: Kartheeswaran Kalidass <kartheeswaran.kalidass@bosch.io>"}, "afterCommit": {"oid": "11eb21d38838dc479fafe45a2d6f1677cf568dab", "author": {"user": {"login": "kaniyan", "name": "Karthees Kalidass"}}, "url": "https://github.com/eclipse/hono/commit/11eb21d38838dc479fafe45a2d6f1677cf568dab", "committedDate": "2020-10-26T13:13:29Z", "message": "[#2258] Specify the content-type of a telemetry/event message via MQTT property bag\n\nSigned-off-by: Kartheeswaran Kalidass <kartheeswaran.kalidass@bosch.io>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE2NzY2Mzk0", "url": "https://github.com/eclipse/hono/pull/2263#pullrequestreview-516766394", "createdAt": "2020-10-26T13:19:37Z", "commit": {"oid": "11eb21d38838dc479fafe45a2d6f1677cf568dab"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQxMzoxOTozN1rOHoPFNQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQxMzoyMDowOFrOHoPGmw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTk1MjE4MQ==", "bodyText": "What if I specify the content type using Content-Type?", "url": "https://github.com/eclipse/hono/pull/2263#discussion_r511952181", "createdAt": "2020-10-26T13:19:37Z", "author": {"login": "sophokles73"}, "path": "adapters/mqtt-vertx-base/src/main/java/org/eclipse/hono/adapter/mqtt/MqttContext.java", "diffHunk": "@@ -110,6 +111,9 @@ public static MqttContext fromPublishPacket(\n                     .ifPresentOrElse(propertyBag -> {\n                         result.topic = ResourceIdentifier.fromString(propertyBag.topicWithoutPropertyBag());\n                         result.propertyBag = propertyBag;\n+                        // sets the content type using the corresponding value from the property bag\n+                        Optional.ofNullable(propertyBag.getProperty(MessageHelper.SYS_PROPERTY_CONTENT_TYPE))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "11eb21d38838dc479fafe45a2d6f1677cf568dab"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTk1MjUzOQ==", "bodyText": "can you please insert an empty line between this paragraph and the next section heading?", "url": "https://github.com/eclipse/hono/pull/2263#discussion_r511952539", "createdAt": "2020-10-26T13:20:08Z", "author": {"login": "sophokles73"}, "path": "site/documentation/content/user-guide/mqtt-adapter.md", "diffHunk": "@@ -97,6 +97,7 @@ This requires that\n \n The protocol adapter checks the configured [message limit] ({{< relref \"/concepts/resource-limits.md\" >}}) before accepting any telemetry messages. If the message limit is exceeded or the incoming telemetry message cannot be processed, the connection to the client is closed.\n \n+The devices can optionally indicate the content type of the payload by setting the *content-type* property explicitly in the `property-bag`. The `property-bag` is an optional collection of properties intended for the receiver of the message. A property bag is only allowed at the very end of a topic. It always starts with a `/?` character, followed by pairs of URL encoded property names and values that are separated by `&`. For example, a property bag containing two properties *seqNo* and *importance* looks like this: `/topic/name/?seqNo=10034&importance=high`.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "11eb21d38838dc479fafe45a2d6f1677cf568dab"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "71d88f21740fd7b7bf0d3f284dd85cc58a6205b4", "author": {"user": {"login": "kaniyan", "name": "Karthees Kalidass"}}, "url": "https://github.com/eclipse/hono/commit/71d88f21740fd7b7bf0d3f284dd85cc58a6205b4", "committedDate": "2020-10-26T19:48:42Z", "message": "[#2258] Specify the content-type of a telemetry/event message via MQTT property bag\n\nSigned-off-by: Kartheeswaran Kalidass <kartheeswaran.kalidass@bosch.io>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a17fa1e49acc658fdf9c359a958b356400539334", "author": {"user": {"login": "kaniyan", "name": "Karthees Kalidass"}}, "url": "https://github.com/eclipse/hono/commit/a17fa1e49acc658fdf9c359a958b356400539334", "committedDate": "2020-10-26T20:07:19Z", "message": "Incorporate feedback and minor improvements.\n\n* Treat property names as case insensitive while retrieving the value of a property.\n* Change the return type of the PropertyBag.topicWithoutPropertyBag() to ResourceIdentifier.\n* Insert an empty line between a paragraph and the next section heading in MQTT adapter guide.\n\nSigned-off-by: Kartheeswaran Kalidass <kartheeswaran.kalidass@bosch.io>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "11eb21d38838dc479fafe45a2d6f1677cf568dab", "author": {"user": {"login": "kaniyan", "name": "Karthees Kalidass"}}, "url": "https://github.com/eclipse/hono/commit/11eb21d38838dc479fafe45a2d6f1677cf568dab", "committedDate": "2020-10-26T13:13:29Z", "message": "[#2258] Specify the content-type of a telemetry/event message via MQTT property bag\n\nSigned-off-by: Kartheeswaran Kalidass <kartheeswaran.kalidass@bosch.io>"}, "afterCommit": {"oid": "a17fa1e49acc658fdf9c359a958b356400539334", "author": {"user": {"login": "kaniyan", "name": "Karthees Kalidass"}}, "url": "https://github.com/eclipse/hono/commit/a17fa1e49acc658fdf9c359a958b356400539334", "committedDate": "2020-10-26T20:07:19Z", "message": "Incorporate feedback and minor improvements.\n\n* Treat property names as case insensitive while retrieving the value of a property.\n* Change the return type of the PropertyBag.topicWithoutPropertyBag() to ResourceIdentifier.\n* Insert an empty line between a paragraph and the next section heading in MQTT adapter guide.\n\nSigned-off-by: Kartheeswaran Kalidass <kartheeswaran.kalidass@bosch.io>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE3NDExNjQ2", "url": "https://github.com/eclipse/hono/pull/2263#pullrequestreview-517411646", "createdAt": "2020-10-27T07:32:56Z", "commit": {"oid": "a17fa1e49acc658fdf9c359a958b356400539334"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 404, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}