{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIwNjQxMzQ3", "number": 2297, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xM1QxNzo0NDoyM1rOE4xKaQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQwODoxNDozM1rOE5T0uw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI3OTYxMTkzOnYy", "diffSide": "RIGHT", "path": "adapters/mqtt-vertx-quarkus/src/main/java/org/eclipse/hono/adapter/mqtt/quarkus/Application.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xM1QxNzo0NDoyM1rOHy4vqw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQwNzowOTozMFrOHzqWMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzEyMDU1NQ==", "bodyText": "It seems to me, the content of the adapter() method can be reduced to just:\n        final VertxBasedMqttProtocolAdapter adapter = new VertxBasedMqttProtocolAdapter();\n        setCollaborators(adapter);\n        adapter.setConfig(adapterProperties);\n        adapter.setMetrics(metrics);\n        adapter.setMessageMapping(messageMapping());\n        return adapter;\n\nusing the parent setCollaborators(AbstractProtocolAdapterBase) method.\nSame goes for the corresponding class/method in the hono-adapter-http-vertx-quarkus module.", "url": "https://github.com/eclipse/hono/pull/2297#discussion_r523120555", "createdAt": "2020-11-13T17:44:23Z", "author": {"login": "calohmn"}, "path": "adapters/mqtt-vertx-quarkus/src/main/java/org/eclipse/hono/adapter/mqtt/quarkus/Application.java", "diffHunk": "@@ -83,16 +96,73 @@ void onStop(final @Observes ShutdownEvent ev) {\n \n     private VertxBasedMqttProtocolAdapter adapter() {\n \n+        final DeviceRegistrationClient registrationClient = registrationClient();\n+        final DeviceConnectionClient deviceConnectionClient = deviceConnectionClient();\n+        final CommandTargetMapper commandTargetMapper = commandTargetMapper();\n+\n+        commandTargetMapper.initialize(new CommandTargetMapperContext() {\n+\n+            @Override\n+            public Future<List<String>> getViaGateways(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8ec1c72ec0526a23d0e46a6b11850d2473fe0f95"}, "originalPosition": 51}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzkzMzIzNQ==", "bodyText": "That's true and that is what I actually wanted to do. Don't know why it ended up this way ...", "url": "https://github.com/eclipse/hono/pull/2297#discussion_r523933235", "createdAt": "2020-11-16T07:09:30Z", "author": {"login": "sophokles73"}, "path": "adapters/mqtt-vertx-quarkus/src/main/java/org/eclipse/hono/adapter/mqtt/quarkus/Application.java", "diffHunk": "@@ -83,16 +96,73 @@ void onStop(final @Observes ShutdownEvent ev) {\n \n     private VertxBasedMqttProtocolAdapter adapter() {\n \n+        final DeviceRegistrationClient registrationClient = registrationClient();\n+        final DeviceConnectionClient deviceConnectionClient = deviceConnectionClient();\n+        final CommandTargetMapper commandTargetMapper = commandTargetMapper();\n+\n+        commandTargetMapper.initialize(new CommandTargetMapperContext() {\n+\n+            @Override\n+            public Future<List<String>> getViaGateways(", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzEyMDU1NQ=="}, "originalCommit": {"oid": "8ec1c72ec0526a23d0e46a6b11850d2473fe0f95"}, "originalPosition": 51}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI4NTI5MDgzOnYy", "diffSide": "LEFT", "path": "service-base/src/main/java/org/eclipse/hono/service/AbstractProtocolAdapterBase.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQwODoxNDozM1rOHzr97Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQxMDowMDoxNlrOHzx7gA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzk1OTc4OQ==", "bodyText": "There are still subclasses of AbstractProtocolAdapterBase that use the @Autowired annotation (e.g. VertxBasedMqttProtocolAdapter), I guess it should be removed there as well.", "url": "https://github.com/eclipse/hono/pull/2297#discussion_r523959789", "createdAt": "2020-11-16T08:14:33Z", "author": {"login": "calohmn"}, "path": "service-base/src/main/java/org/eclipse/hono/service/AbstractProtocolAdapterBase.java", "diffHunk": "@@ -55,22 +51,15 @@\n import org.eclipse.hono.service.resourcelimits.ResourceLimitChecks;\n import org.eclipse.hono.service.util.ServiceBaseUtils;\n import org.eclipse.hono.util.Constants;\n-import org.eclipse.hono.util.CredentialsConstants;\n-import org.eclipse.hono.util.DeviceConnectionConstants;\n import org.eclipse.hono.util.EventConstants;\n import org.eclipse.hono.util.Lifecycle;\n import org.eclipse.hono.util.MessageHelper;\n import org.eclipse.hono.util.QoS;\n import org.eclipse.hono.util.RegistrationAssertion;\n-import org.eclipse.hono.util.RegistrationConstants;\n import org.eclipse.hono.util.ResourceIdentifier;\n import org.eclipse.hono.util.Strings;\n-import org.eclipse.hono.util.TelemetryConstants;\n import org.eclipse.hono.util.TelemetryExecutionContext;\n-import org.eclipse.hono.util.TenantConstants;\n import org.eclipse.hono.util.TenantObject;\n-import org.springframework.beans.factory.annotation.Autowired;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "65354b3611da2a353cb7fb44ec06f3fdf40c00ef"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDAwNzM0MA==", "bodyText": "Good point. I will remove those as well ...", "url": "https://github.com/eclipse/hono/pull/2297#discussion_r524007340", "createdAt": "2020-11-16T09:16:10Z", "author": {"login": "sophokles73"}, "path": "service-base/src/main/java/org/eclipse/hono/service/AbstractProtocolAdapterBase.java", "diffHunk": "@@ -55,22 +51,15 @@\n import org.eclipse.hono.service.resourcelimits.ResourceLimitChecks;\n import org.eclipse.hono.service.util.ServiceBaseUtils;\n import org.eclipse.hono.util.Constants;\n-import org.eclipse.hono.util.CredentialsConstants;\n-import org.eclipse.hono.util.DeviceConnectionConstants;\n import org.eclipse.hono.util.EventConstants;\n import org.eclipse.hono.util.Lifecycle;\n import org.eclipse.hono.util.MessageHelper;\n import org.eclipse.hono.util.QoS;\n import org.eclipse.hono.util.RegistrationAssertion;\n-import org.eclipse.hono.util.RegistrationConstants;\n import org.eclipse.hono.util.ResourceIdentifier;\n import org.eclipse.hono.util.Strings;\n-import org.eclipse.hono.util.TelemetryConstants;\n import org.eclipse.hono.util.TelemetryExecutionContext;\n-import org.eclipse.hono.util.TenantConstants;\n import org.eclipse.hono.util.TenantObject;\n-import org.springframework.beans.factory.annotation.Autowired;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzk1OTc4OQ=="}, "originalCommit": {"oid": "65354b3611da2a353cb7fb44ec06f3fdf40c00ef"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDA1NzQ3Mg==", "bodyText": "I have pushed changes ...", "url": "https://github.com/eclipse/hono/pull/2297#discussion_r524057472", "createdAt": "2020-11-16T10:00:16Z", "author": {"login": "sophokles73"}, "path": "service-base/src/main/java/org/eclipse/hono/service/AbstractProtocolAdapterBase.java", "diffHunk": "@@ -55,22 +51,15 @@\n import org.eclipse.hono.service.resourcelimits.ResourceLimitChecks;\n import org.eclipse.hono.service.util.ServiceBaseUtils;\n import org.eclipse.hono.util.Constants;\n-import org.eclipse.hono.util.CredentialsConstants;\n-import org.eclipse.hono.util.DeviceConnectionConstants;\n import org.eclipse.hono.util.EventConstants;\n import org.eclipse.hono.util.Lifecycle;\n import org.eclipse.hono.util.MessageHelper;\n import org.eclipse.hono.util.QoS;\n import org.eclipse.hono.util.RegistrationAssertion;\n-import org.eclipse.hono.util.RegistrationConstants;\n import org.eclipse.hono.util.ResourceIdentifier;\n import org.eclipse.hono.util.Strings;\n-import org.eclipse.hono.util.TelemetryConstants;\n import org.eclipse.hono.util.TelemetryExecutionContext;\n-import org.eclipse.hono.util.TenantConstants;\n import org.eclipse.hono.util.TenantObject;\n-import org.springframework.beans.factory.annotation.Autowired;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzk1OTc4OQ=="}, "originalCommit": {"oid": "65354b3611da2a353cb7fb44ec06f3fdf40c00ef"}, "originalPosition": 41}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2874, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}