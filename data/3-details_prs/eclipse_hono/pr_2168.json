{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDgzOTQ1NjU3", "number": 2168, "title": "[#2156] Add Hono API client interfaces for protocol adapters", "bodyText": "This is just a first step towards a major refactoring of the client. In particular, it will be split up into separate modules targeting different client roles: devices/gateways, protocol adapters and downstream applications.\nI have a created a new module clients which I would like to use as the parent for all the other client role specific modules, the first one being the adapter module containing the clients required for implementing protocol adapters.", "createdAt": "2020-09-10T14:42:20Z", "url": "https://github.com/eclipse/hono/pull/2168", "merged": true, "mergeCommit": {"oid": "27607e1c8f7e2b20a33f5bb5e8605e88e7cabcd7"}, "closed": true, "closedAt": "2020-10-12T07:02:32Z", "author": {"login": "sophokles73"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdHi6ZqABqjM3NTE4NTk5OTY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdQ3bLIgFqTUwNTc1MDA3Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "41c87328248a1f10ab0bd6133422c2a8cab17797", "author": {"user": {"login": "sophokles73", "name": "Kai Hudalla"}}, "url": "https://github.com/eclipse/hono/commit/41c87328248a1f10ab0bd6133422c2a8cab17797", "committedDate": "2020-09-10T14:39:56Z", "message": "[#2156] Add Hono API client interfaces for protocol adapters\n\nSigned-off-by: Kai Hudalla <kai.hudalla@bosch.io>"}, "afterCommit": {"oid": "d828cf3f93418a85beb0147e83e698661ed07195", "author": {"user": {"login": "sophokles73", "name": "Kai Hudalla"}}, "url": "https://github.com/eclipse/hono/commit/d828cf3f93418a85beb0147e83e698661ed07195", "committedDate": "2020-09-10T15:54:59Z", "message": "[#2156] Add Hono API client interfaces for protocol adapters\n\nSigned-off-by: Kai Hudalla <kai.hudalla@bosch.io>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2ODc5NTc0", "url": "https://github.com/eclipse/hono/pull/2168#pullrequestreview-486879574", "createdAt": "2020-09-11T14:53:26Z", "commit": {"oid": "d828cf3f93418a85beb0147e83e698661ed07195"}, "state": "COMMENTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxNDo1MzoyNlrOHQiOyQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxNTowMjo1MVrOHQimUg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzEwMDEwNQ==", "bodyText": "I am not sure what the idea is of having two methods here. Do AMQP-based clients only implement the method that returns Future<ProtonDelivery> and other clients only the other one? If so, how does the invocation look like in the protocol adapter? Btw., I used Future<?> as return type there in the refactorings I did for my experiments with Kafka. This way I can return always a result, at the price that I have to check it with instanceof in the calling code.", "url": "https://github.com/eclipse/hono/pull/2168#discussion_r487100105", "createdAt": "2020-09-11T14:53:26Z", "author": {"login": "b-abel"}, "path": "clients/adapter/src/main/java/org/eclipse/hono/client/downstream/EventSender.java", "diffHunk": "@@ -0,0 +1,76 @@\n+/**\n+ * Copyright (c) 2020 Contributors to the Eclipse Foundation\n+ *\n+ * See the NOTICE file(s) distributed with this work for additional\n+ * information regarding copyright ownership.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+\n+\n+package org.eclipse.hono.client.downstream;\n+\n+import java.util.Map;\n+\n+import io.opentracing.SpanContext;\n+import io.vertx.core.Future;\n+import io.vertx.core.buffer.Buffer;\n+import io.vertx.proton.ProtonDelivery;\n+\n+/**\n+ * A client for publishing events originating from devices to downstream consumers.\n+ */\n+public interface EventSender {\n+\n+    /**\n+     * Sends an event originating from a device to downstream consumers.\n+     *\n+     * @param tenantId The ID of the tenant that the device belongs to.\n+     * @param deviceId The ID of the device that the data originates from.\n+     * @param payload The data to send.\n+     * @param contentType The content type of the data.\n+     * @return A future indicating the outcome of the operation.\n+     *         <p>\n+     *         The future will be succeeded if the event has been sent downstream .\n+     *         <p>\n+     *         The future will be failed with a {@link org.eclipse.hono.client.ServerErrorException} if the event\n+     *         could not be sent. The error code contained in the exception indicates the\n+     *         cause of the failure.\n+     * @throws NullPointerException tenant ID, device ID or contentType are {@code null}.\n+     */\n+    Future<Void> sendEvent(\n+            String tenantId,\n+            String deviceId,\n+            Buffer payload,\n+            String contentType,\n+            SpanContext context);\n+\n+    /**\n+     * Sends an event originating from a device to downstream consumers.\n+     *\n+     * @param tenantId The ID of the tenant that the device belongs to.\n+     * @param deviceId The ID of the device that the data originates from.\n+     * @param properties Additional meta data that should be included in the downstream message.\n+     * @param payload The data to send.\n+     * @param contentType The content type of the data.\n+     * @return A future indicating the outcome of the operation.\n+     *         <p>\n+     *         The future will be succeeded if the event has been sent downstream.\n+     *         <p>\n+     *         The future will be failed with a {@link org.eclipse.hono.client.ServerErrorException} if the data\n+     *         could not be sent. The error code contained in the exception indicates the\n+     *         cause of the failure.\n+     * @throws NullPointerException tenant ID, device ID or contentType are {@code null}.\n+     */\n+    Future<ProtonDelivery> sendEvent(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d828cf3f93418a85beb0147e83e698661ed07195"}, "originalPosition": 69}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzEwMTY2Ng==", "bodyText": "Why does this method does not have the properties parameter? In the other method, it is optional anyway. For Kafka I would also want to set metadata, 'Map<String, ?>' would work (although I am thinking about limiting the values to strings).", "url": "https://github.com/eclipse/hono/pull/2168#discussion_r487101666", "createdAt": "2020-09-11T14:55:45Z", "author": {"login": "b-abel"}, "path": "clients/adapter/src/main/java/org/eclipse/hono/client/downstream/EventSender.java", "diffHunk": "@@ -0,0 +1,76 @@\n+/**\n+ * Copyright (c) 2020 Contributors to the Eclipse Foundation\n+ *\n+ * See the NOTICE file(s) distributed with this work for additional\n+ * information regarding copyright ownership.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+\n+\n+package org.eclipse.hono.client.downstream;\n+\n+import java.util.Map;\n+\n+import io.opentracing.SpanContext;\n+import io.vertx.core.Future;\n+import io.vertx.core.buffer.Buffer;\n+import io.vertx.proton.ProtonDelivery;\n+\n+/**\n+ * A client for publishing events originating from devices to downstream consumers.\n+ */\n+public interface EventSender {\n+\n+    /**\n+     * Sends an event originating from a device to downstream consumers.\n+     *\n+     * @param tenantId The ID of the tenant that the device belongs to.\n+     * @param deviceId The ID of the device that the data originates from.\n+     * @param payload The data to send.\n+     * @param contentType The content type of the data.\n+     * @return A future indicating the outcome of the operation.\n+     *         <p>\n+     *         The future will be succeeded if the event has been sent downstream .\n+     *         <p>\n+     *         The future will be failed with a {@link org.eclipse.hono.client.ServerErrorException} if the event\n+     *         could not be sent. The error code contained in the exception indicates the\n+     *         cause of the failure.\n+     * @throws NullPointerException tenant ID, device ID or contentType are {@code null}.\n+     */\n+    Future<Void> sendEvent(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d828cf3f93418a85beb0147e83e698661ed07195"}, "originalPosition": 45}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzEwMjkxMw==", "bodyText": "I do not see why this method is necessary when the parameter clientContext is optional in the other one.", "url": "https://github.com/eclipse/hono/pull/2168#discussion_r487102913", "createdAt": "2020-09-11T14:57:44Z", "author": {"login": "b-abel"}, "path": "clients/adapter/src/main/java/org/eclipse/hono/client/registry/CredentialsClient.java", "diffHunk": "@@ -0,0 +1,84 @@\n+/*******************************************************************************\n+ * Copyright (c) 2020 Contributors to the Eclipse Foundation\n+ *\n+ * See the NOTICE file(s) distributed with this work for additional\n+ * information regarding copyright ownership.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *******************************************************************************/\n+\n+package org.eclipse.hono.client.registry;\n+\n+import org.eclipse.hono.util.CredentialsObject;\n+\n+import io.opentracing.SpanContext;\n+import io.vertx.core.Future;\n+import io.vertx.core.json.JsonObject;\n+\n+/**\n+ * A client for accessing Hono's Credentials API.\n+ * <p>\n+ * See Hono's <a href=\"https://www.eclipse.org/hono/docs/api/credentials/\">\n+ * Credentials API</a> for a description of the status codes returned.\n+ * </p>\n+ */\n+public interface CredentialsClient {\n+\n+    /**\n+     * Gets credentials for a device by type and authentication identifier.\n+     *\n+     * @param tenantId The ID of the tenant that the device belongs to.\n+     * @param type The type of credentials to retrieve.\n+     * @param authId The authentication identifier used in the credentials to retrieve.\n+     * @param spanContext The currently active OpenTracing span (may be {@code null}). An implementation\n+     *                    should use this as the parent for any span it creates for tracing\n+     *                    the execution of this operation.\n+     * @return A future indicating the result of the operation.\n+     *         <p>\n+     *         The future will succeed if a response with a status code in the [200, 300) range\n+     *         has been received from the Credentials service. The JSON object will then contain values as\n+     *         defined in <a href=\"https://www.eclipse.org/hono/docs/api/credentials/#get-credentials\">\n+     *         Get Credentials</a>.\n+     *         <p>\n+     *         Otherwise, the future will fail with a {@link org.eclipse.hono.client.ServiceInvocationException}\n+     *         containing the (error) status code returned by the service.\n+     * @throws NullPointerException if tenant ID, type or auth ID are {@code null}.\n+     */\n+    Future<CredentialsObject> get(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d828cf3f93418a85beb0147e83e698661ed07195"}, "originalPosition": 51}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzEwNTI5Mw==", "bodyText": "I haven't spent much time on the interfaces for the registry clients. We haven't talked about whether we want registry clients with other transport protocols. But the way the interfaces look, there is nothing AMQP-specific in them anyway.", "url": "https://github.com/eclipse/hono/pull/2168#discussion_r487105293", "createdAt": "2020-09-11T15:01:35Z", "author": {"login": "b-abel"}, "path": "clients/adapter/src/main/java/org/eclipse/hono/client/registry/DeviceRegistrationClient.java", "diffHunk": "@@ -0,0 +1,81 @@\n+/**\n+ * Copyright (c) 2020 Contributors to the Eclipse Foundation\n+ *\n+ * See the NOTICE file(s) distributed with this work for additional\n+ * information regarding copyright ownership.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+\n+\n+package org.eclipse.hono.client.registry;\n+\n+import io.opentracing.SpanContext;\n+import io.vertx.core.Future;\n+import io.vertx.core.json.JsonObject;\n+\n+/**\n+ * A client for accessing Hono's Device Registration API.\n+ * <p>\n+ * See Hono's <a href=\"https://www.eclipse.org/hono/docs/api/device-registration/\">\n+ * Device Registration API</a> for a description of the status codes returned.\n+ */\n+public interface DeviceRegistrationClient {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d828cf3f93418a85beb0147e83e698661ed07195"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzEwNjEzMA==", "bodyText": "The interfaces in the upstream package still depend heavily on AMQP. Do we change them completely again if we want to support Kafka for commands? I think that if you use Kafka for downstream messaging, you might want to use Hono in the future entirely without AMQP.", "url": "https://github.com/eclipse/hono/pull/2168#discussion_r487106130", "createdAt": "2020-09-11T15:02:51Z", "author": {"login": "b-abel"}, "path": "clients/adapter/src/main/java/org/eclipse/hono/client/upstream/CommandResponseSender.java", "diffHunk": "@@ -0,0 +1,41 @@\n+/*******************************************************************************\n+ * Copyright (c) 2020 Contributors to the Eclipse Foundation\n+ *\n+ * See the NOTICE file(s) distributed with this work for additional\n+ * information regarding copyright ownership.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *******************************************************************************/\n+package org.eclipse.hono.client.upstream;\n+\n+import io.opentracing.SpanContext;\n+import io.vertx.core.Future;\n+import io.vertx.proton.ProtonDelivery;\n+\n+/**\n+ * A client for publishing a device's response to a command received from a downstream application.\n+ */\n+public interface CommandResponseSender {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d828cf3f93418a85beb0147e83e698661ed07195"}, "originalPosition": 22}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg3NzY5NzE4", "url": "https://github.com/eclipse/hono/pull/2168#pullrequestreview-487769718", "createdAt": "2020-09-14T13:30:22Z", "commit": {"oid": "d828cf3f93418a85beb0147e83e698661ed07195"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxMzozMDoyMlrOHRT35Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxMzo1MjoxOFrOHRVR-A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzkxMzQ0NQ==", "bodyText": "I would expect that the content type is optional but the payload required (empty events could provide an empty buffer). At least for MQTT, the content type is usually null in the current code.\nAnd my expectation is that optional parameters come after the required ones.", "url": "https://github.com/eclipse/hono/pull/2168#discussion_r487913445", "createdAt": "2020-09-14T13:30:22Z", "author": {"login": "b-abel"}, "path": "clients/adapter/src/main/java/org/eclipse/hono/client/downstream/EventSender.java", "diffHunk": "@@ -0,0 +1,76 @@\n+/**\n+ * Copyright (c) 2020 Contributors to the Eclipse Foundation\n+ *\n+ * See the NOTICE file(s) distributed with this work for additional\n+ * information regarding copyright ownership.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+\n+\n+package org.eclipse.hono.client.downstream;\n+\n+import java.util.Map;\n+\n+import io.opentracing.SpanContext;\n+import io.vertx.core.Future;\n+import io.vertx.core.buffer.Buffer;\n+import io.vertx.proton.ProtonDelivery;\n+\n+/**\n+ * A client for publishing events originating from devices to downstream consumers.\n+ */\n+public interface EventSender {\n+\n+    /**\n+     * Sends an event originating from a device to downstream consumers.\n+     *\n+     * @param tenantId The ID of the tenant that the device belongs to.\n+     * @param deviceId The ID of the device that the data originates from.\n+     * @param payload The data to send.\n+     * @param contentType The content type of the data.\n+     * @return A future indicating the outcome of the operation.\n+     *         <p>\n+     *         The future will be succeeded if the event has been sent downstream .\n+     *         <p>\n+     *         The future will be failed with a {@link org.eclipse.hono.client.ServerErrorException} if the event\n+     *         could not be sent. The error code contained in the exception indicates the\n+     *         cause of the failure.\n+     * @throws NullPointerException tenant ID, device ID or contentType are {@code null}.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d828cf3f93418a85beb0147e83e698661ed07195"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzkxNTIyNA==", "bodyText": "What about adding a close method to EventSender and TelemetrySender (or extending a separate interface defining it)? That way there would be no need to depend on the implementation type to close the sender.", "url": "https://github.com/eclipse/hono/pull/2168#discussion_r487915224", "createdAt": "2020-09-14T13:31:58Z", "author": {"login": "b-abel"}, "path": "clients/adapter/src/main/java/org/eclipse/hono/client/downstream/EventSender.java", "diffHunk": "@@ -0,0 +1,76 @@\n+/**\n+ * Copyright (c) 2020 Contributors to the Eclipse Foundation\n+ *\n+ * See the NOTICE file(s) distributed with this work for additional\n+ * information regarding copyright ownership.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+\n+\n+package org.eclipse.hono.client.downstream;\n+\n+import java.util.Map;\n+\n+import io.opentracing.SpanContext;\n+import io.vertx.core.Future;\n+import io.vertx.core.buffer.Buffer;\n+import io.vertx.proton.ProtonDelivery;\n+\n+/**\n+ * A client for publishing events originating from devices to downstream consumers.\n+ */\n+public interface EventSender {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d828cf3f93418a85beb0147e83e698661ed07195"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzkxNjYyMg==", "bodyText": "JavaDoc is missing for context.", "url": "https://github.com/eclipse/hono/pull/2168#discussion_r487916622", "createdAt": "2020-09-14T13:33:17Z", "author": {"login": "b-abel"}, "path": "clients/adapter/src/main/java/org/eclipse/hono/client/downstream/EventSender.java", "diffHunk": "@@ -0,0 +1,76 @@\n+/**\n+ * Copyright (c) 2020 Contributors to the Eclipse Foundation\n+ *\n+ * See the NOTICE file(s) distributed with this work for additional\n+ * information regarding copyright ownership.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+\n+\n+package org.eclipse.hono.client.downstream;\n+\n+import java.util.Map;\n+\n+import io.opentracing.SpanContext;\n+import io.vertx.core.Future;\n+import io.vertx.core.buffer.Buffer;\n+import io.vertx.proton.ProtonDelivery;\n+\n+/**\n+ * A client for publishing events originating from devices to downstream consumers.\n+ */\n+public interface EventSender {\n+\n+    /**\n+     * Sends an event originating from a device to downstream consumers.\n+     *\n+     * @param tenantId The ID of the tenant that the device belongs to.\n+     * @param deviceId The ID of the device that the data originates from.\n+     * @param payload The data to send.\n+     * @param contentType The content type of the data.\n+     * @return A future indicating the outcome of the operation.\n+     *         <p>\n+     *         The future will be succeeded if the event has been sent downstream .\n+     *         <p>\n+     *         The future will be failed with a {@link org.eclipse.hono.client.ServerErrorException} if the event\n+     *         could not be sent. The error code contained in the exception indicates the\n+     *         cause of the failure.\n+     * @throws NullPointerException tenant ID, device ID or contentType are {@code null}.\n+     */\n+    Future<Void> sendEvent(\n+            String tenantId,\n+            String deviceId,\n+            Buffer payload,\n+            String contentType,\n+            SpanContext context);\n+\n+    /**\n+     * Sends an event originating from a device to downstream consumers.\n+     *\n+     * @param tenantId The ID of the tenant that the device belongs to.\n+     * @param deviceId The ID of the device that the data originates from.\n+     * @param properties Additional meta data that should be included in the downstream message.\n+     * @param payload The data to send.\n+     * @param contentType The content type of the data.\n+     * @return A future indicating the outcome of the operation.\n+     *         <p>\n+     *         The future will be succeeded if the event has been sent downstream.\n+     *         <p>\n+     *         The future will be failed with a {@link org.eclipse.hono.client.ServerErrorException} if the data\n+     *         could not be sent. The error code contained in the exception indicates the\n+     *         cause of the failure.\n+     * @throws NullPointerException tenant ID, device ID or contentType are {@code null}.\n+     */\n+    Future<ProtonDelivery> sendEvent(\n+            String tenantId,\n+            String deviceId,\n+            Map<String, ?> properties,\n+            Buffer payload,\n+            String contentType,\n+            SpanContext context);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d828cf3f93418a85beb0147e83e698661ed07195"}, "originalPosition": 75}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzkzNjUwNA==", "bodyText": "A boolean or an enum instead of the int would be more obvious for me (the QoS numbers are only obvious if one knows MQTT).", "url": "https://github.com/eclipse/hono/pull/2168#discussion_r487936504", "createdAt": "2020-09-14T13:52:18Z", "author": {"login": "b-abel"}, "path": "clients/adapter/src/main/java/org/eclipse/hono/client/downstream/TelemetrySender.java", "diffHunk": "@@ -0,0 +1,88 @@\n+/**\n+ * Copyright (c) 2020 Contributors to the Eclipse Foundation\n+ *\n+ * See the NOTICE file(s) distributed with this work for additional\n+ * information regarding copyright ownership.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+\n+\n+package org.eclipse.hono.client.downstream;\n+\n+import java.util.Map;\n+\n+import io.opentracing.SpanContext;\n+import io.vertx.core.Future;\n+import io.vertx.core.buffer.Buffer;\n+import io.vertx.proton.ProtonDelivery;\n+\n+/**\n+ * A client for publishing telemetry data originating from devices to downstream consumers.\n+ */\n+public interface TelemetrySender {\n+\n+    /**\n+     * Sends telemetry data originating from a device to downstream consumers.\n+     *\n+     * @param tenantId The ID of the tenant that the device belongs to.\n+     * @param deviceId The ID of the device that the data originates from.\n+     * @param payload The data to send.\n+     * @param contentType The content type of the data.\n+     * @param qos The delivery semantics to use for sending the data.\n+     *            A value of 0 indicates <em>at most once</em> semantics while\n+     *            1 indicates <em>at least once</em> semantics.\n+     * @return A future indicating the outcome of the operation.\n+     *         <p>\n+     *         The future will be succeeded if the data has been sent downstream according to\n+     *         the delivery semantics indicated by the qos parameter.\n+     *         <p>\n+     *         The future will be failed with a {@link org.eclipse.hono.client.ServerErrorException} if the data\n+     *         could not be sent. The error code contained in the exception indicates the\n+     *         cause of the failure.\n+     * @throws NullPointerException tenant ID, device ID or contentType are {@code null}.\n+     * @throws IllegalArgumentException if qos is neither 0 nor 1.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d828cf3f93418a85beb0147e83e698661ed07195"}, "originalPosition": 48}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkxMTgwOTUz", "url": "https://github.com/eclipse/hono/pull/2168#pullrequestreview-491180953", "createdAt": "2020-09-18T06:24:35Z", "commit": {"oid": "e632b951cadfac3fbcd703b9b716c29de6cbae62"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xOFQwNjoyNDozNVrOHT_ozA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xOFQwNjoyNDozNVrOHT_ozA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDcyNzYyOA==", "bodyText": "Sticking to the downstream/upstream structure, I think this class as well as CommandResponseSender should be in the downstream package.", "url": "https://github.com/eclipse/hono/pull/2168#discussion_r490727628", "createdAt": "2020-09-18T06:24:35Z", "author": {"login": "calohmn"}, "path": "clients/adapter/src/main/java/org/eclipse/hono/client/upstream/CommandResponse.java", "diffHunk": "@@ -0,0 +1,195 @@\n+/*******************************************************************************\n+ * Copyright (c) 2018, 2020 Contributors to the Eclipse Foundation\n+ *\n+ * See the NOTICE file(s) distributed with this work for additional\n+ * information regarding copyright ownership.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *******************************************************************************/\n+\n+package org.eclipse.hono.client.upstream;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e632b951cadfac3fbcd703b9b716c29de6cbae62"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAzNTQ3NzEy", "url": "https://github.com/eclipse/hono/pull/2168#pullrequestreview-503547712", "createdAt": "2020-10-07T06:02:58Z", "commit": {"oid": "e632b951cadfac3fbcd703b9b716c29de6cbae62"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QwNjowMjo1OVrOHdjwVg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QwNjowMjo1OVrOHdjwVg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDc1NjU2Ng==", "bodyText": "Just stumbled upon this via #2216 : there's already a QoS class in org.eclipse.hono.util (and another one in org.eclipse.hono.service.metric). I think we could use the one in org.eclipse.hono.util here. It looks similar to me.", "url": "https://github.com/eclipse/hono/pull/2168#discussion_r500756566", "createdAt": "2020-10-07T06:02:59Z", "author": {"login": "fkaltner"}, "path": "clients/adapter/src/main/java/org/eclipse/hono/client/downstream/QoS.java", "diffHunk": "@@ -0,0 +1,26 @@\n+/**\n+ * Copyright (c) 2020 Contributors to the Eclipse Foundation\n+ *\n+ * See the NOTICE file(s) distributed with this work for additional\n+ * information regarding copyright ownership.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+\n+\n+package org.eclipse.hono.client.downstream;\n+\n+\n+/**\n+ * A definition of the delivery semantics used for transferring messages.\n+ *\n+ */\n+public enum QoS {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e632b951cadfac3fbcd703b9b716c29de6cbae62"}, "originalPosition": 22}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e632b951cadfac3fbcd703b9b716c29de6cbae62", "author": {"user": {"login": "sophokles73", "name": "Kai Hudalla"}}, "url": "https://github.com/eclipse/hono/commit/e632b951cadfac3fbcd703b9b716c29de6cbae62", "committedDate": "2020-09-15T09:03:26Z", "message": "Incorporate feedback\n\n- extend io.vertx.core.Closeable\n- add missing JavaDoc\n- use enum for QoS\n- fix parameter types\n- put mandatory args to beginning of arg list\n\nSigned-off-by: Kai Hudalla <kai.hudalla@bosch.io>"}, "afterCommit": {"oid": "8220a121ae18065999cd86f6b693963f0e686bbb", "author": {"user": {"login": "sophokles73", "name": "Kai Hudalla"}}, "url": "https://github.com/eclipse/hono/commit/8220a121ae18065999cd86f6b693963f0e686bbb", "committedDate": "2020-10-07T06:34:20Z", "message": "Remove duplicate class\n\nSigned-off-by: Kai Hudalla <kai.hudalla@bosch.io>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c1f320a82a301b21fe4260c79e1eee4627bed9ef", "author": {"user": {"login": "sophokles73", "name": "Kai Hudalla"}}, "url": "https://github.com/eclipse/hono/commit/c1f320a82a301b21fe4260c79e1eee4627bed9ef", "committedDate": "2020-10-09T08:34:53Z", "message": "[#2156] Add Hono API client interfaces for protocol adapters\n\nSigned-off-by: Kai Hudalla <kai.hudalla@bosch.io>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7913d9b2f7c265f97a830d5845f20176a785a8f4", "author": {"user": {"login": "sophokles73", "name": "Kai Hudalla"}}, "url": "https://github.com/eclipse/hono/commit/7913d9b2f7c265f97a830d5845f20176a785a8f4", "committedDate": "2020-10-09T08:34:53Z", "message": "Incorporate feedback\n\n- extend io.vertx.core.Closeable\n- add missing JavaDoc\n- use enum for QoS\n- fix parameter types\n- put mandatory args to beginning of arg list\n\nSigned-off-by: Kai Hudalla <kai.hudalla@bosch.io>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0d58b1ac6788117ef16b5abf892da2951b429f6b", "author": {"user": {"login": "sophokles73", "name": "Kai Hudalla"}}, "url": "https://github.com/eclipse/hono/commit/0d58b1ac6788117ef16b5abf892da2951b429f6b", "committedDate": "2020-10-09T10:24:50Z", "message": "Small improvements\n\n- remove method variants\n- remove unused imports\n- add value object for registration assertion\n\nSigned-off-by: Kai Hudalla <kai.hudalla@bosch.io>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8220a121ae18065999cd86f6b693963f0e686bbb", "author": {"user": {"login": "sophokles73", "name": "Kai Hudalla"}}, "url": "https://github.com/eclipse/hono/commit/8220a121ae18065999cd86f6b693963f0e686bbb", "committedDate": "2020-10-07T06:34:20Z", "message": "Remove duplicate class\n\nSigned-off-by: Kai Hudalla <kai.hudalla@bosch.io>"}, "afterCommit": {"oid": "0d58b1ac6788117ef16b5abf892da2951b429f6b", "author": {"user": {"login": "sophokles73", "name": "Kai Hudalla"}}, "url": "https://github.com/eclipse/hono/commit/0d58b1ac6788117ef16b5abf892da2951b429f6b", "committedDate": "2020-10-09T10:24:50Z", "message": "Small improvements\n\n- remove method variants\n- remove unused imports\n- add value object for registration assertion\n\nSigned-off-by: Kai Hudalla <kai.hudalla@bosch.io>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bc6a70d1ed82976f1ffcb1f739814b900417b705", "author": {"user": {"login": "sophokles73", "name": "Kai Hudalla"}}, "url": "https://github.com/eclipse/hono/commit/bc6a70d1ed82976f1ffcb1f739814b900417b705", "committedDate": "2020-10-09T12:49:36Z", "message": "Rename packages\n\n- added *adapter* level in order to prevent package name clash with\npackage holding the application side client\n- renamed packages to better reflect semantics of clients\n\nSigned-off-by: Kai Hudalla <kai.hudalla@bosch.io>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA1NzUwMDc2", "url": "https://github.com/eclipse/hono/pull/2168#pullrequestreview-505750076", "createdAt": "2020-10-09T14:54:29Z", "commit": {"oid": "bc6a70d1ed82976f1ffcb1f739814b900417b705"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 560, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}