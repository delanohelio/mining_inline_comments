{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkyMjI5ODQ0", "number": 1852, "title": "[#1272] Add tracing in HotrodBasedDeviceConnectionInfo", "bodyText": "This is for #1272.", "createdAt": "2020-03-23T08:24:06Z", "url": "https://github.com/eclipse/hono/pull/1852", "merged": true, "mergeCommit": {"oid": "51986a887183b6a7f2e7bb70edf16f18b58c06d2"}, "closed": true, "closedAt": "2020-03-23T11:03:58Z", "author": {"login": "calohmn"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcQan1rgFqTM3OTIzOTQ1NA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcQbbZfAFqTM3OTI4NDA2OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc5MjM5NDU0", "url": "https://github.com/eclipse/hono/pull/1852#pullrequestreview-379239454", "createdAt": "2020-03-23T09:06:13Z", "commit": {"oid": "2c613872ce6b9ffcddc195c4cd0c8a9901ac460a"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QwOTowNjoxM1rOF58OQQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QwOTowOToyNVrOF58VGw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjI5OTg0MQ==", "bodyText": "get command handling adapter instances?\notherwise, it will be hard to guess what this span is for, won't it?", "url": "https://github.com/eclipse/hono/pull/1852#discussion_r396299841", "createdAt": "2020-03-23T09:06:13Z", "author": {"login": "sophokles73"}, "path": "client-device-connection-infinispan/src/main/java/org/eclipse/hono/deviceconnection/infinispan/client/HotrodBasedDeviceConnectionInfo.java", "diffHunk": "@@ -201,9 +206,12 @@ public HotrodBasedDeviceConnectionInfo(final RemoteCache<String, String> cache,\n     public Future<JsonObject> getCommandHandlingAdapterInstances(final String tenantId, final String deviceId,\n             final Set<String> viaGateways, final SpanContext context) {\n \n+        final Span span = createSpan(\"get command handling instances\", tenantId, deviceId, null, context);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2c613872ce6b9ffcddc195c4cd0c8a9901ac460a"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjMwMTU5NQ==", "bodyText": "IMHO this is a client as we are retrieving data from the remote grid, aren't we?", "url": "https://github.com/eclipse/hono/pull/1852#discussion_r396301595", "createdAt": "2020-03-23T09:09:25Z", "author": {"login": "sophokles73"}, "path": "client-device-connection-infinispan/src/main/java/org/eclipse/hono/deviceconnection/infinispan/client/HotrodBasedDeviceConnectionInfo.java", "diffHunk": "@@ -437,4 +484,17 @@ private void checkForCacheAvailability(final Promise<Status> status) {\n     @Override\n     public void registerLivenessChecks(final HealthCheckHandler livenessHandler) {\n     }\n+\n+    private Span createSpan(final String operationName, final String tenantId, final String deviceId,\n+            final String adapterInstanceId, final SpanContext spanContext) {\n+        final Tracer.SpanBuilder spanBuilder = TracingHelper.buildChildSpan(tracer, spanContext, operationName, getClass().getSimpleName())\n+                .withTag(Tags.SPAN_KIND.getKey(), Tags.SPAN_KIND_SERVER)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2c613872ce6b9ffcddc195c4cd0c8a9901ac460a"}, "originalPosition": 216}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2c613872ce6b9ffcddc195c4cd0c8a9901ac460a", "author": {"user": {"login": "calohmn", "name": "Carsten Lohmann"}}, "url": "https://github.com/eclipse/hono/commit/2c613872ce6b9ffcddc195c4cd0c8a9901ac460a", "committedDate": "2020-03-23T08:23:00Z", "message": "[#1272] Add tracing in HotrodBasedDeviceConnectionInfo.\n\nSigned-off-by: Carsten Lohmann <carsten.lohmann@bosch.io>"}, "afterCommit": {"oid": "ecd4989654df81ae57238903e51ad61f8bfcd1d0", "author": {"user": {"login": "calohmn", "name": "Carsten Lohmann"}}, "url": "https://github.com/eclipse/hono/commit/ecd4989654df81ae57238903e51ad61f8bfcd1d0", "committedDate": "2020-03-23T09:13:47Z", "message": "[#1272] Add tracing in HotrodBasedDeviceConnectionInfo.\n\nSigned-off-by: Carsten Lohmann <carsten.lohmann@bosch.io>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cc31e46133dbd578a10f7173b5cc4f783d2154e9", "author": {"user": {"login": "calohmn", "name": "Carsten Lohmann"}}, "url": "https://github.com/eclipse/hono/commit/cc31e46133dbd578a10f7173b5cc4f783d2154e9", "committedDate": "2020-03-23T09:39:34Z", "message": "[#1272] Add tracing in HotrodBasedDeviceConnectionInfo.\n\nSigned-off-by: Carsten Lohmann <carsten.lohmann@bosch.io>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ecd4989654df81ae57238903e51ad61f8bfcd1d0", "author": {"user": {"login": "calohmn", "name": "Carsten Lohmann"}}, "url": "https://github.com/eclipse/hono/commit/ecd4989654df81ae57238903e51ad61f8bfcd1d0", "committedDate": "2020-03-23T09:13:47Z", "message": "[#1272] Add tracing in HotrodBasedDeviceConnectionInfo.\n\nSigned-off-by: Carsten Lohmann <carsten.lohmann@bosch.io>"}, "afterCommit": {"oid": "cc31e46133dbd578a10f7173b5cc4f783d2154e9", "author": {"user": {"login": "calohmn", "name": "Carsten Lohmann"}}, "url": "https://github.com/eclipse/hono/commit/cc31e46133dbd578a10f7173b5cc4f783d2154e9", "committedDate": "2020-03-23T09:39:34Z", "message": "[#1272] Add tracing in HotrodBasedDeviceConnectionInfo.\n\nSigned-off-by: Carsten Lohmann <carsten.lohmann@bosch.io>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc5Mjg0MDY5", "url": "https://github.com/eclipse/hono/pull/1852#pullrequestreview-379284069", "createdAt": "2020-03-23T10:06:14Z", "commit": {"oid": "cc31e46133dbd578a10f7173b5cc4f783d2154e9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 825, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}