{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU1NjU3MTI3", "number": 2090, "title": "Improve configuration classes", "bodyText": "While working on Quarkus PoC I found some improvements we need to in our configuration classes. The idea is to bring that in as a separate PR (as some other improvements not related to Quarkus directly).\nThe main changes are:\n\nDefining default values for every property\nAdapting proper property names with getter/setter methods\nUsing better suited classes for properties", "createdAt": "2020-07-23T11:54:35Z", "url": "https://github.com/eclipse/hono/pull/2090", "merged": true, "mergeCommit": {"oid": "e2d82303d4cacf3f14bf92de704effcbb9e0e624"}, "closed": true, "closedAt": "2020-08-04T11:17:30Z", "author": {"login": "dejanb"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc4802IAFqTQ1NTU0Mjk4NA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc7kedcAFqTQ2MDcwNzU2Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1NTQyOTg0", "url": "https://github.com/eclipse/hono/pull/2090#pullrequestreview-455542984", "createdAt": "2020-07-27T07:37:52Z", "commit": {"oid": "cbf1587e9b40d9fb62c394e887b84ba61c5e25e8"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1NTg0MzUz", "url": "https://github.com/eclipse/hono/pull/2090#pullrequestreview-455584353", "createdAt": "2020-07-27T08:38:47Z", "commit": {"oid": "cbf1587e9b40d9fb62c394e887b84ba61c5e25e8"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwODozODo0OFrOG3Y96A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwODo0Nzo0MVrOG3ZS3g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDczMzkyOA==", "bodyText": "I think it's common practice to rather use char[] for password fields.", "url": "https://github.com/eclipse/hono/pull/2090#discussion_r460733928", "createdAt": "2020-07-27T08:38:48Z", "author": {"login": "calohmn"}, "path": "core/src/main/java/org/eclipse/hono/config/AbstractConfig.java", "diffHunk": "@@ -41,25 +41,23 @@\n     /**\n      *  A logger to be shared with subclasses.\n      */\n-    protected final Logger LOG = LoggerFactory.getLogger(getClass());\n+    public static final Logger LOG = LoggerFactory.getLogger(AbstractConfig.class);\n \n-    private String trustStorePath;\n-    private char[] trustStorePassword;\n-    private TrustOptions trustOptions;\n+    private String trustStorePath = \"\";\n+    private String trustStorePassword = \"\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cbf1587e9b40d9fb62c394e887b84ba61c5e25e8"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDczOTI5NA==", "bodyText": "Can you explain the motivation here? With the old definition, there is the added info in the log from which actual (sub)class the log statements are coming.", "url": "https://github.com/eclipse/hono/pull/2090#discussion_r460739294", "createdAt": "2020-07-27T08:47:41Z", "author": {"login": "calohmn"}, "path": "core/src/main/java/org/eclipse/hono/config/AbstractConfig.java", "diffHunk": "@@ -41,25 +41,23 @@\n     /**\n      *  A logger to be shared with subclasses.\n      */\n-    protected final Logger LOG = LoggerFactory.getLogger(getClass());\n+    public static final Logger LOG = LoggerFactory.getLogger(AbstractConfig.class);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cbf1587e9b40d9fb62c394e887b84ba61c5e25e8"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cbf1587e9b40d9fb62c394e887b84ba61c5e25e8", "author": {"user": {"login": "dejanb", "name": "Dejan Bosanac"}}, "url": "https://github.com/eclipse/hono/commit/cbf1587e9b40d9fb62c394e887b84ba61c5e25e8", "committedDate": "2020-07-23T11:35:00Z", "message": "Improve configuration classes"}, "afterCommit": {"oid": "7b8ab2cda2916db2950778c3aa7d540731d4150f", "author": {"user": {"login": "dejanb", "name": "Dejan Bosanac"}}, "url": "https://github.com/eclipse/hono/commit/7b8ab2cda2916db2950778c3aa7d540731d4150f", "committedDate": "2020-07-28T13:32:27Z", "message": "Improve configuration classes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU5OTU5NDAz", "url": "https://github.com/eclipse/hono/pull/2090#pullrequestreview-459959403", "createdAt": "2020-08-03T11:43:05Z", "commit": {"oid": "7b8ab2cda2916db2950778c3aa7d540731d4150f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QxMTo0MzowNlrOG62VXA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QxMTo0MzowNlrOG62VXA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDM2MDc5Ng==", "bodyText": "what's the reason for having to use an empty string as the initial value?", "url": "https://github.com/eclipse/hono/pull/2090#discussion_r464360796", "createdAt": "2020-08-03T11:43:06Z", "author": {"login": "sophokles73"}, "path": "core/src/main/java/org/eclipse/hono/config/AuthenticatingClientConfigProperties.java", "diffHunk": "@@ -29,14 +30,15 @@\n \n     public static final String SERVER_ROLE_UNKNOWN = \"unknown\";\n \n-    private String credentialsPath;\n+    private String credentialsPath = \"\";\n     private String host = \"localhost\";\n     private boolean hostnameVerificationRequired = true;\n-    private char[] password;\n-    private int port;\n+    private String password = \"\";\n+    private int port = Constants.PORT_AMQPS;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b8ab2cda2916db2950778c3aa7d540731d4150f"}, "originalPosition": 19}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYwMDU4NzQ3", "url": "https://github.com/eclipse/hono/pull/2090#pullrequestreview-460058747", "createdAt": "2020-08-03T14:10:26Z", "commit": {"oid": "7b8ab2cda2916db2950778c3aa7d540731d4150f"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QxNDoxMDoyNlrOG67EVw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QxNDoxMzoyNVrOG67LTQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDQzODM1OQ==", "bodyText": "I do see value in creating the options once only. However, we then should also return the already created instance in subsequent invocations of this method. WDYT?", "url": "https://github.com/eclipse/hono/pull/2090#discussion_r464438359", "createdAt": "2020-08-03T14:10:26Z", "author": {"login": "sophokles73"}, "path": "core/src/main/java/org/eclipse/hono/config/AbstractConfig.java", "diffHunk": "@@ -186,25 +175,21 @@ public final TrustOptions getTrustOptions() {\n         switch (format) {\n         case PEM:\n             LOG.debug(\"using certificates from file [{}] as trust anchor\", this.trustStorePath);\n-            trustOptions = new PemTrustOptions().addCertPath(this.trustStorePath);\n-            break;\n+            return new PemTrustOptions().addCertPath(this.trustStorePath);\n         case PKCS12:\n             LOG.debug(\"using certificates from PKCS12 key store [{}] as trust anchor\", this.trustStorePath);\n-            trustOptions = new PfxOptions()\n+            return new PfxOptions()\n                     .setPath(getTrustStorePath())\n                     .setPassword(getTrustStorePassword());\n-            break;\n         case JKS:\n             LOG.debug(\"using certificates from JKS key store [{}] as trust anchor\", this.trustStorePath);\n-            trustOptions = new JksOptions()\n+            return new JksOptions()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b8ab2cda2916db2950778c3aa7d540731d4150f"}, "originalPosition": 96}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDQzOTQwNg==", "bodyText": "StringUtils.isNullOrEmpty()?", "url": "https://github.com/eclipse/hono/pull/2090#discussion_r464439406", "createdAt": "2020-08-03T14:12:13Z", "author": {"login": "sophokles73"}, "path": "core/src/main/java/org/eclipse/hono/config/KeyLoader.java", "diffHunk": "@@ -162,10 +162,10 @@ public static KeyLoader fromFiles(final Vertx vertx, final String keyPath, final\n         PrivateKey privateKey = null;\n         List<Certificate> certChain = null;\n \n-        if (keyPath != null) {\n+        if (keyPath != null && !keyPath.isEmpty()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b8ab2cda2916db2950778c3aa7d540731d4150f"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDQ0MDE0MQ==", "bodyText": "We usually use an abstract type for field declarations, don't we? Why can't we keep the Map here?", "url": "https://github.com/eclipse/hono/pull/2090#discussion_r464440141", "createdAt": "2020-08-03T14:13:25Z", "author": {"login": "sophokles73"}, "path": "core/src/main/java/org/eclipse/hono/config/ProtocolAdapterProperties.java", "diffHunk": "@@ -36,7 +36,7 @@\n     private long eventLoopBlockedCheckTimeout = 5000L;\n     private int maxConnections = 0;\n     private Duration tenantIdleTimeout = DEFAULT_TENANT_IDLE_TIMEOUT;\n-    private Map<String, MapperEndpoint> mapperEndpoints = new HashMap<>();\n+    private HashMap<String, MapperEndpoint> mapperEndpoints = new HashMap<>();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b8ab2cda2916db2950778c3aa7d540731d4150f"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b34cb122afc040c310dd1e005362f00af583eb57", "author": {"user": {"login": "dejanb", "name": "Dejan Bosanac"}}, "url": "https://github.com/eclipse/hono/commit/b34cb122afc040c310dd1e005362f00af583eb57", "committedDate": "2020-08-04T09:47:58Z", "message": "Improve configuration classes"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7b8ab2cda2916db2950778c3aa7d540731d4150f", "author": {"user": {"login": "dejanb", "name": "Dejan Bosanac"}}, "url": "https://github.com/eclipse/hono/commit/7b8ab2cda2916db2950778c3aa7d540731d4150f", "committedDate": "2020-07-28T13:32:27Z", "message": "Improve configuration classes"}, "afterCommit": {"oid": "b34cb122afc040c310dd1e005362f00af583eb57", "author": {"user": {"login": "dejanb", "name": "Dejan Bosanac"}}, "url": "https://github.com/eclipse/hono/commit/b34cb122afc040c310dd1e005362f00af583eb57", "committedDate": "2020-08-04T09:47:58Z", "message": "Improve configuration classes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYwNzA3NTYy", "url": "https://github.com/eclipse/hono/pull/2090#pullrequestreview-460707562", "createdAt": "2020-08-04T10:57:28Z", "commit": {"oid": "b34cb122afc040c310dd1e005362f00af583eb57"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 717, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}