{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ2MDQ3Nzc0", "number": 2076, "title": "[#2075] Check adapter connection limit for unauthenticated devices", "bodyText": "The AMQP adapter now always checks the adapter's connection limit\nregardless of whether the device is authenticated or not.", "createdAt": "2020-07-08T07:21:05Z", "url": "https://github.com/eclipse/hono/pull/2076", "merged": true, "mergeCommit": {"oid": "1d180937428ecc7fd914b3d86eedd346bb9352e6"}, "closed": true, "closedAt": "2020-07-08T11:05:13Z", "author": {"login": "sophokles73"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcy1L54AH2gAyNDQ2MDQ3Nzc0Ojg2M2NkYmViZWQ2NTY2NTk4OWEzYzViOTVlZTY0NGMwZjAxMDdjM2Q=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcy4YmdgFqTQ0NDYzNzQ4Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "863cdbebed65665989a3c5b95ee644c0f0107c3d", "author": {"user": {"login": "sophokles73", "name": "Kai Hudalla"}}, "url": "https://github.com/eclipse/hono/commit/863cdbebed65665989a3c5b95ee644c0f0107c3d", "committedDate": "2020-07-08T07:20:16Z", "message": "[#2075] Check adapter connection limit for unauthenticated devices\n\nThe AMQP adapter now always checks the adapter's connection limit\nregardless of whether the device is authenticated or not.\n\nSigned-off-by: Kai Hudalla <kai.hudalla@bosch.io>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ0NjM0NzYz", "url": "https://github.com/eclipse/hono/pull/2076#pullrequestreview-444634763", "createdAt": "2020-07-08T10:59:44Z", "commit": {"oid": "863cdbebed65665989a3c5b95ee644c0f0107c3d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQxMDo1OTo0NVrOGuiyJQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQxMDo1OTo0NVrOGuiyJQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTQ1NzU3Mw==", "bodyText": "My first intuition here would have been to keep the order of the checks and do the (usually less expensive) tenant and device checks first. But, thinking more about it, I agree that doing the connection limit check first seems more intuitive and logical. In any case, that is also how it is done in the MQTT adapter.", "url": "https://github.com/eclipse/hono/pull/2076#discussion_r451457573", "createdAt": "2020-07-08T10:59:45Z", "author": {"login": "calohmn"}, "path": "adapters/amqp-vertx/src/main/java/org/eclipse/hono/adapter/amqp/impl/VertxBasedAmqpProtocolAdapter.java", "diffHunk": "@@ -377,6 +377,36 @@ private void processRemoteOpen(final ProtonConnection con) {\n             TracingHelper.setDeviceTags(span, authenticatedDevice.getTenantId(), authenticatedDevice.getDeviceId());\n         }\n \n+        checkConnectionLimitForAdapter()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "863cdbebed65665989a3c5b95ee644c0f0107c3d"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ0NjM3NDgz", "url": "https://github.com/eclipse/hono/pull/2076#pullrequestreview-444637483", "createdAt": "2020-07-08T11:03:51Z", "commit": {"oid": "863cdbebed65665989a3c5b95ee644c0f0107c3d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 702, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}