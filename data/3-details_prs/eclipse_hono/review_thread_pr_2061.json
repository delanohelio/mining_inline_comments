{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQyNzQ1OTE4", "number": 2061, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QwODozOTowN1rOELLEiQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QwODozOTowN1rOELLEiQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgwMTUxMTc3OnYy", "diffSide": "RIGHT", "path": "client-device-connection-infinispan/src/main/java/org/eclipse/hono/deviceconnection/infinispan/client/HotrodCache.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QwODozOTowN1rOGsonaw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QxMTowNDowMlrOGsszyg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTQ1NTk3OQ==", "bodyText": "When using that method in removeCommandHandlingAdapterInstance(), the return value is actually needed.\nThat means when removing the FORCE_RETURN_VALUE flag here, the removeCommandHandlingAdapterInstance() method also needs to be changed. I think we can do that here in 1.2.x - the information, whether removal succeeded or not is only logged here anyway.", "url": "https://github.com/eclipse/hono/pull/2061#discussion_r449455979", "createdAt": "2020-07-03T08:39:07Z", "author": {"login": "calohmn"}, "path": "client-device-connection-infinispan/src/main/java/org/eclipse/hono/deviceconnection/infinispan/client/HotrodCache.java", "diffHunk": "@@ -227,11 +218,7 @@ public void addReconnectListener(final ReconnectListener<HotrodCache<K, V>> list\n \n         } else {\n \n-            return Futures.create(() -> {\n-                return cache\n-                    .withFlags(Flag.FORCE_RETURN_VALUE)\n-                    .removeWithVersionAsync(key, version);\n-            });\n+            return Futures.create(() -> cache.removeWithVersionAsync(key, version));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "217b61057160164676ef73dc4a8233ebb489b2d8"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTQ2MTkwNQ==", "bodyText": "You are suggesting that the FORCE_RETURN_VALUE flag determines whether we always get back a boolean as the result of removeWithVersionAsync, right? The only documentation I have found on this is https://infinispan.org/docs/9.4.x/user_guide/user_guide.html#return_values_2 which doesn't mention the removeWithVersionAsync method so I assume that the flag has no impact on that method. Or have you conducted any particular tests that would suggest otherwise?", "url": "https://github.com/eclipse/hono/pull/2061#discussion_r449461905", "createdAt": "2020-07-03T08:50:44Z", "author": {"login": "sophokles73"}, "path": "client-device-connection-infinispan/src/main/java/org/eclipse/hono/deviceconnection/infinispan/client/HotrodCache.java", "diffHunk": "@@ -227,11 +218,7 @@ public void addReconnectListener(final ReconnectListener<HotrodCache<K, V>> list\n \n         } else {\n \n-            return Futures.create(() -> {\n-                return cache\n-                    .withFlags(Flag.FORCE_RETURN_VALUE)\n-                    .removeWithVersionAsync(key, version);\n-            });\n+            return Futures.create(() -> cache.removeWithVersionAsync(key, version));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTQ1NTk3OQ=="}, "originalCommit": {"oid": "217b61057160164676ef73dc4a8233ebb489b2d8"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTUyNDY4Mg==", "bodyText": "I mixed it up with the removeAsync method here. So, you're right, I think the flag can be removed here without it affecting the return value.", "url": "https://github.com/eclipse/hono/pull/2061#discussion_r449524682", "createdAt": "2020-07-03T11:04:02Z", "author": {"login": "calohmn"}, "path": "client-device-connection-infinispan/src/main/java/org/eclipse/hono/deviceconnection/infinispan/client/HotrodCache.java", "diffHunk": "@@ -227,11 +218,7 @@ public void addReconnectListener(final ReconnectListener<HotrodCache<K, V>> list\n \n         } else {\n \n-            return Futures.create(() -> {\n-                return cache\n-                    .withFlags(Flag.FORCE_RETURN_VALUE)\n-                    .removeWithVersionAsync(key, version);\n-            });\n+            return Futures.create(() -> cache.removeWithVersionAsync(key, version));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTQ1NTk3OQ=="}, "originalCommit": {"oid": "217b61057160164676ef73dc4a8233ebb489b2d8"}, "originalPosition": 43}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3185, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}