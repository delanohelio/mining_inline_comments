{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY2NjI3MjM5", "number": 2108, "title": "[#1395] Implement trace sampling mode option in CoAP adapter", "bodyText": "This fixes #1395.", "createdAt": "2020-08-12T08:59:04Z", "url": "https://github.com/eclipse/hono/pull/2108", "merged": true, "mergeCommit": {"oid": "132683d87f05302ecafa2e70476dc70f64244cc1"}, "closed": true, "closedAt": "2020-08-13T08:39:54Z", "author": {"login": "calohmn"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc-HzflAFqTQ2NTczMTUyNg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc-b1HBAFqTQ2NjU1NDA4Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY1NzMxNTI2", "url": "https://github.com/eclipse/hono/pull/2108#pullrequestreview-465731526", "createdAt": "2020-08-12T09:10:06Z", "commit": {"oid": "0553a4cbe19f3f52c64ed546f782c4415b8bf967"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQwOToxMDowN1rOG_YrpA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQwOToxMzozNVrOG_YzdA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTExNzg2MA==", "bodyText": "nice catch \ud83d\udc4d", "url": "https://github.com/eclipse/hono/pull/2108#discussion_r469117860", "createdAt": "2020-08-12T09:10:07Z", "author": {"login": "sophokles73"}, "path": "adapters/coap-vertx-base/src/main/java/org/eclipse/hono/adapter/coap/AbstractVertxBasedCoapAdapter.java", "diffHunk": "@@ -1085,18 +1102,14 @@ private TtdStatus getTtdStatus(final CoapContext context) {\n      * Uploads a command response message to Hono.\n      *\n      * @param context The context representing the request to be processed.\n-     * @param device The device that has executed the command.\n-     * @param authenticatedDevice The authenticated device or {@code null}.\n      * @return A succeeded future containing the CoAP status code that has been returned to the device.\n-     * @throws NullPointerException if context or device are {@code null}.\n+     * @throws NullPointerException if context is {@code null}.\n      */\n-    public final Future<ResponseCode> uploadCommandResponseMessage(\n-            final CoapContext context,\n-            final Device device,\n-            final Device authenticatedDevice) {\n-\n+    public final Future<ResponseCode> uploadCommandResponseMessage(final CoapContext context) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0553a4cbe19f3f52c64ed546f782c4415b8bf967"}, "originalPosition": 67}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTExOTg2MA==", "bodyText": "isn't this useful for all other adapters as well, i.e. doesn't it make sense to pull it up into MapBasedTelemetryExecutionContext?", "url": "https://github.com/eclipse/hono/pull/2108#discussion_r469119860", "createdAt": "2020-08-12T09:13:35Z", "author": {"login": "sophokles73"}, "path": "adapters/coap-vertx-base/src/main/java/org/eclipse/hono/adapter/coap/CoapContext.java", "diffHunk": "@@ -45,14 +45,20 @@\n \n     private final CoapExchange exchange;\n     private final Device originDevice;\n+    private final String authId;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0553a4cbe19f3f52c64ed546f782c4415b8bf967"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY2NDgwMTg4", "url": "https://github.com/eclipse/hono/pull/2108#pullrequestreview-466480188", "createdAt": "2020-08-13T06:35:41Z", "commit": {"oid": "0553a4cbe19f3f52c64ed546f782c4415b8bf967"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xM1QwNjozNTo0MVrOG_95Xg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xM1QwNjo0NDowNFrOG_-GHw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTcyNzU4Mg==", "bodyText": "final ?", "url": "https://github.com/eclipse/hono/pull/2108#discussion_r469727582", "createdAt": "2020-08-13T06:35:41Z", "author": {"login": "sophokles73"}, "path": "adapters/coap-vertx-base/src/main/java/org/eclipse/hono/adapter/coap/RequestDeviceAndAuth.java", "diffHunk": "@@ -53,6 +59,17 @@ public Device getOriginDevice() {\n         return originDevice;\n     }\n \n+    /**\n+     * Gets the authentication identifier of the request.\n+     * <p>\n+     * Will be {@code null} for an unauthenticated request.\n+     *\n+     * @return The authentication identifier or {@code null}.\n+     */\n+    public String getAuthId() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0553a4cbe19f3f52c64ed546f782c4415b8bf967"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTczMDg0Nw==", "bodyText": "I guess it would be good to define constants for these keys as they are used across different classes", "url": "https://github.com/eclipse/hono/pull/2108#discussion_r469730847", "createdAt": "2020-08-13T06:44:04Z", "author": {"login": "sophokles73"}, "path": "adapters/coap-vertx-base/src/main/java/org/eclipse/hono/adapter/coap/DefaultDeviceResolver.java", "diffHunk": "@@ -146,6 +153,7 @@ public AdditionalInfo getInfo(final Principal clientIdentity, final Object custo\n                 final String deviceId = (String) customArgument;\n                 final PreSharedKeyDeviceIdentity deviceIdentity = getHandshakeIdentity(clientIdentity.getName(), null);\n                 result.put(\"hono-device\", new Device(deviceIdentity.getTenantId(), deviceId));\n+                result.put(\"hono-auth-id\", deviceIdentity.getAuthId());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0553a4cbe19f3f52c64ed546f782c4415b8bf967"}, "originalPosition": 54}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1ed828fab0bcf651cda5790ea5ba12d0649a8824", "author": {"user": {"login": "calohmn", "name": "Carsten Lohmann"}}, "url": "https://github.com/eclipse/hono/commit/1ed828fab0bcf651cda5790ea5ba12d0649a8824", "committedDate": "2020-08-13T07:54:21Z", "message": "[#1395] Implement trace sampling mode option in CoAP adapter.\n\nSigned-off-by: Carsten Lohmann <carsten.lohmann@bosch.io>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0553a4cbe19f3f52c64ed546f782c4415b8bf967", "author": {"user": {"login": "calohmn", "name": "Carsten Lohmann"}}, "url": "https://github.com/eclipse/hono/commit/0553a4cbe19f3f52c64ed546f782c4415b8bf967", "committedDate": "2020-08-12T08:57:46Z", "message": "[#1395] Implement trace sampling mode option in CoAP adapter.\n\nSigned-off-by: Carsten Lohmann <carsten.lohmann@bosch.io>"}, "afterCommit": {"oid": "1ed828fab0bcf651cda5790ea5ba12d0649a8824", "author": {"user": {"login": "calohmn", "name": "Carsten Lohmann"}}, "url": "https://github.com/eclipse/hono/commit/1ed828fab0bcf651cda5790ea5ba12d0649a8824", "committedDate": "2020-08-13T07:54:21Z", "message": "[#1395] Implement trace sampling mode option in CoAP adapter.\n\nSigned-off-by: Carsten Lohmann <carsten.lohmann@bosch.io>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY2NTU0MDg3", "url": "https://github.com/eclipse/hono/pull/2108#pullrequestreview-466554087", "createdAt": "2020-08-13T08:34:50Z", "commit": {"oid": "1ed828fab0bcf651cda5790ea5ba12d0649a8824"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 504, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}