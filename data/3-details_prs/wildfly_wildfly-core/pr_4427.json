{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM2MjMyNjE5", "number": 4427, "title": "[WFCORE-5226] No acceptedIssuers is sent when CRLs are configured", "bodyText": "https://issues.redhat.com/browse/WFCORE-5226\nRequires: https://issues.redhat.com/browse/ELY-2057\nElytron PR: wildfly-security/wildfly-elytron#1473\nTo pass CI, this will require an Elytron upgrade.", "createdAt": "2020-12-10T20:27:24Z", "url": "https://github.com/wildfly/wildfly-core/pull/4427", "merged": true, "mergeCommit": {"oid": "84c051847907777c9be5eeb9438f143a8398edb8"}, "closed": true, "closedAt": "2021-03-01T13:45:31Z", "author": {"login": "SoniaZaldana"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdlLAGhABqjQxMDEzNzg3Mjg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdztjoOgBqjQyNDc3Mzg0NDg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e55940430419548b69ee8a1c402e51dbdd6461e4", "author": {"user": {"login": "SoniaZaldana", "name": "Sonia"}}, "url": "https://github.com/wildfly/wildfly-core/commit/e55940430419548b69ee8a1c402e51dbdd6461e4", "committedDate": "2020-12-10T20:25:44Z", "message": "[WFCORE-5226] No acceptedIssuers is sent when CRLs are configured"}, "afterCommit": {"oid": "0bce5529748307c850ccd1591bb16e39a5b35fc1", "author": {"user": {"login": "SoniaZaldana", "name": "Sonia"}}, "url": "https://github.com/wildfly/wildfly-core/commit/0bce5529748307c850ccd1591bb16e39a5b35fc1", "committedDate": "2020-12-11T17:01:22Z", "message": "[WFCORE-5226] No acceptedIssuers is sent when CRLs are configured"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0bce5529748307c850ccd1591bb16e39a5b35fc1", "author": {"user": {"login": "SoniaZaldana", "name": "Sonia"}}, "url": "https://github.com/wildfly/wildfly-core/commit/0bce5529748307c850ccd1591bb16e39a5b35fc1", "committedDate": "2020-12-11T17:01:22Z", "message": "[WFCORE-5226] No acceptedIssuers is sent when CRLs are configured"}, "afterCommit": {"oid": "7fa895302a5c4809ef47220186aa464a09b27ef9", "author": {"user": {"login": "SoniaZaldana", "name": "Sonia"}}, "url": "https://github.com/wildfly/wildfly-core/commit/7fa895302a5c4809ef47220186aa464a09b27ef9", "committedDate": "2020-12-11T17:03:06Z", "message": "[WFCORE-5226] No acceptedIssuers is sent when CRLs are configured"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUwMzAxNjQx", "url": "https://github.com/wildfly/wildfly-core/pull/4427#pullrequestreview-550301641", "createdAt": "2020-12-11T17:07:04Z", "commit": {"oid": "7fa895302a5c4809ef47220186aa464a09b27ef9"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQxNzowNzowNFrOIEB2Sw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQxNzowNzowNFrOIEB2Sw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTA5NTQ5OQ==", "bodyText": "Instead of casting to SSLDefinitions.ReloadableX509ExtendedTrustManager, you should be able to just cast to X509TrustManager instead. Then, ReloadableX509ExtendedTrustManager can be made private again.", "url": "https://github.com/wildfly/wildfly-core/pull/4427#discussion_r541095499", "createdAt": "2020-12-11T17:07:04Z", "author": {"login": "fjuma"}, "path": "elytron/src/test/java/org/wildfly/extension/elytron/TlsTestCase.java", "diffHunk": "@@ -471,6 +471,19 @@ public void testRevocationListsDp() throws Throwable {\n         Assert.assertTrue(services.executeOperation(operation).get(OUTCOME).asString().equals(FAILED)); // not realoadable\n     }\n \n+\n+    /**\n+     * Verifies accepted issuers are sent when CRLs are configured.\n+     * Verifies ELY-2057 (No acceptedIssuers sent when CRLs are configured) is resolved.\n+     */\n+    @Test\n+    public void testAcceptedIssuersWithCRLs() throws Throwable {\n+        ServiceName serviceName = Capabilities.TRUST_MANAGER_RUNTIME_CAPABILITY.getCapabilityServiceName(\"trust-with-crl\");\n+        TrustManager trustManager = (TrustManager) services.getContainer().getService(serviceName).getValue();\n+        Assert.assertNotNull(trustManager);\n+        Assert.assertTrue(((SSLDefinitions.ReloadableX509ExtendedTrustManager) trustManager).getAcceptedIssuers().length > 0);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7fa895302a5c4809ef47220186aa464a09b27ef9"}, "originalPosition": 14}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7fa895302a5c4809ef47220186aa464a09b27ef9", "author": {"user": {"login": "SoniaZaldana", "name": "Sonia"}}, "url": "https://github.com/wildfly/wildfly-core/commit/7fa895302a5c4809ef47220186aa464a09b27ef9", "committedDate": "2020-12-11T17:03:06Z", "message": "[WFCORE-5226] No acceptedIssuers is sent when CRLs are configured"}, "afterCommit": {"oid": "b5a8632c97c24b63560cce07997de3319c84d470", "author": {"user": {"login": "SoniaZaldana", "name": "Sonia"}}, "url": "https://github.com/wildfly/wildfly-core/commit/b5a8632c97c24b63560cce07997de3319c84d470", "committedDate": "2020-12-11T17:12:20Z", "message": "[WFCORE-5226] No acceptedIssuers is sent when CRLs are configured"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUwNTUyMzA1", "url": "https://github.com/wildfly/wildfly-core/pull/4427#pullrequestreview-550552305", "createdAt": "2020-12-11T20:22:09Z", "commit": {"oid": "b5a8632c97c24b63560cce07997de3319c84d470"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "147179e2a9a2e47a7a241c8ef2b67add1aafc3f9", "author": {"user": {"login": "SoniaZaldana", "name": "Sonia"}}, "url": "https://github.com/wildfly/wildfly-core/commit/147179e2a9a2e47a7a241c8ef2b67add1aafc3f9", "committedDate": "2021-01-25T21:11:38Z", "message": "[WFCORE-5226] No acceptedIssuers is sent when CRLs are configured"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b5a8632c97c24b63560cce07997de3319c84d470", "author": {"user": {"login": "SoniaZaldana", "name": "Sonia"}}, "url": "https://github.com/wildfly/wildfly-core/commit/b5a8632c97c24b63560cce07997de3319c84d470", "committedDate": "2020-12-11T17:12:20Z", "message": "[WFCORE-5226] No acceptedIssuers is sent when CRLs are configured"}, "afterCommit": {"oid": "147179e2a9a2e47a7a241c8ef2b67add1aafc3f9", "author": {"user": {"login": "SoniaZaldana", "name": "Sonia"}}, "url": "https://github.com/wildfly/wildfly-core/commit/147179e2a9a2e47a7a241c8ef2b67add1aafc3f9", "committedDate": "2021-01-25T21:11:38Z", "message": "[WFCORE-5226] No acceptedIssuers is sent when CRLs are configured"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3326, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}