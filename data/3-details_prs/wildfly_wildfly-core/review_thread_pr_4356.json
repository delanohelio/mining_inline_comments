{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk5NzYxMjY5", "number": 4356, "reviewThreads": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQwMjoxMzozOFrOFAlufQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQwMjozMzoxMFrOFAmBAw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM2MTYyNDI5OnYy", "diffSide": "RIGHT", "path": "controller/src/main/java/org/jboss/as/controller/AbstractOperationContext.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQwMjoxMzozOFrOH-9sTQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQwMjoxMzozOFrOH-9sTQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTc4NDUyNQ==", "bodyText": "@lvydra Please remove 'parameterName.equals(NAME) 'from this. My apologies; I should not have listed 'name' as an invalid key in the JIRA description. I've corrected the JIRA description.", "url": "https://github.com/wildfly/wildfly-core/pull/4356#discussion_r535784525", "createdAt": "2020-12-04T02:13:38Z", "author": {"login": "bstansberry"}, "path": "controller/src/main/java/org/jboss/as/controller/AbstractOperationContext.java", "diffHunk": "@@ -541,6 +541,41 @@ public final String getCurrentAddressValue() {\n         return pa.getLastElement().getValue();\n     }\n \n+    @Override\n+    public final ModelNode getCurrentOperationName() {\n+        assert activeStep != null;\n+        ModelNode operation = activeStep.operation;\n+\n+        assert operation != null;\n+        return operation.get(NAME);\n+    }\n+\n+    @Override\n+    public final ModelNode getCurrentOperationParameter(final String parameterName) {\n+        return getCurrentOperationParameter(parameterName, true);\n+    }\n+\n+    @Override\n+    public final ModelNode getCurrentOperationParameter(final String parameterName, boolean nullable) {\n+        if (isLegalParameterName(parameterName)) {\n+            assert activeStep != null;\n+            ModelNode operation = activeStep.operation;\n+\n+            assert operation != null;\n+            if (!operation.has(parameterName) && nullable) {\n+                return null;\n+            } else {\n+                return operation.get(parameterName);\n+            }\n+        } else {\n+            throw new IllegalArgumentException(ControllerLogger.ROOT_LOGGER.invalidParameterName(parameterName));\n+        }\n+    }\n+\n+    private boolean isLegalParameterName(final String parameterName) {\n+        return !(parameterName.equals(NAME) || parameterName.equals(OP) || parameterName.equals(OP_ADDR) || parameterName.equals(OPERATION_HEADERS));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a08b093efef315999d6a6e91fc2970734a7fa690"}, "originalPosition": 36}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM2MTYzODY3OnYy", "diffSide": "RIGHT", "path": "controller/src/main/java/org/jboss/as/controller/logging/ControllerLogger.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQwMjoxOToyNVrOH-90Jw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQwMjoxOToyNVrOH-90Jw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTc4NjUzNQ==", "bodyText": "The return type here should be IllegalArgumentException, as that is what you intend to throw.", "url": "https://github.com/wildfly/wildfly-core/pull/4356#discussion_r535786535", "createdAt": "2020-12-04T02:19:25Z", "author": {"login": "bstansberry"}, "path": "controller/src/main/java/org/jboss/as/controller/logging/ControllerLogger.java", "diffHunk": "@@ -3629,4 +3629,7 @@ OperationFailedRuntimeException capabilityAlreadyRegisteredInContext(String capa\n \n     @Message(id = 476, value = \"Value for attribute '%s' is invalid: either '%s' must be specified on its own or '%s' needs to be specified with at least one of '%s' or '%s'\")\n     OperationFailedException invalidCredentialReferenceValue(String attributeName, String clearTextAttributeName, String credentialStoreAttributeName, String clearTextAttributeName1, String alias);\n+\n+    @Message(id = 477, value = \"Parameter name '%s' is invalid.\")\n+    OperationFailedException invalidParameterName(String parameterName);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a08b093efef315999d6a6e91fc2970734a7fa690"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM2MTY0MDY2OnYy", "diffSide": "RIGHT", "path": "controller/src/main/java/org/jboss/as/controller/AbstractOperationContext.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQwMjoyMDoxOFrOH-91Rg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQwMjoyMDoxOFrOH-91Rg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTc4NjgyMg==", "bodyText": "ControllerLogger.ROOT_LOGGER.invalidParameterName should return IllegalArgumentException so you can just throw what it returns without wrapping.", "url": "https://github.com/wildfly/wildfly-core/pull/4356#discussion_r535786822", "createdAt": "2020-12-04T02:20:18Z", "author": {"login": "bstansberry"}, "path": "controller/src/main/java/org/jboss/as/controller/AbstractOperationContext.java", "diffHunk": "@@ -541,6 +541,41 @@ public final String getCurrentAddressValue() {\n         return pa.getLastElement().getValue();\n     }\n \n+    @Override\n+    public final ModelNode getCurrentOperationName() {\n+        assert activeStep != null;\n+        ModelNode operation = activeStep.operation;\n+\n+        assert operation != null;\n+        return operation.get(NAME);\n+    }\n+\n+    @Override\n+    public final ModelNode getCurrentOperationParameter(final String parameterName) {\n+        return getCurrentOperationParameter(parameterName, true);\n+    }\n+\n+    @Override\n+    public final ModelNode getCurrentOperationParameter(final String parameterName, boolean nullable) {\n+        if (isLegalParameterName(parameterName)) {\n+            assert activeStep != null;\n+            ModelNode operation = activeStep.operation;\n+\n+            assert operation != null;\n+            if (!operation.has(parameterName) && nullable) {\n+                return null;\n+            } else {\n+                return operation.get(parameterName);\n+            }\n+        } else {\n+            throw new IllegalArgumentException(ControllerLogger.ROOT_LOGGER.invalidParameterName(parameterName));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a08b093efef315999d6a6e91fc2970734a7fa690"}, "originalPosition": 31}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM2MTY1MTkxOnYy", "diffSide": "RIGHT", "path": "controller/src/main/java/org/jboss/as/controller/OperationContext.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQwMjoyNTowMVrOH-97cg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQwMjoyNTowMVrOH-97cg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTc4ODQwMg==", "bodyText": "This should also say 'or {@code null} if the operation has no such parameter'.", "url": "https://github.com/wildfly/wildfly-core/pull/4356#discussion_r535788402", "createdAt": "2020-12-04T02:25:01Z", "author": {"login": "bstansberry"}, "path": "controller/src/main/java/org/jboss/as/controller/OperationContext.java", "diffHunk": "@@ -418,6 +418,30 @@\n      */\n     String getCurrentAddressValue();\n \n+    /**\n+     * Get the node with current operation name\n+     *\n+     * @return operation name node\n+     */\n+    ModelNode getCurrentOperationName();\n+\n+    /**\n+     * Get parameter node by its name\n+     *\n+     * @param name of desired parameter\n+     * @return node for parameter of given name", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a08b093efef315999d6a6e91fc2970734a7fa690"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM2MTY1NDA5OnYy", "diffSide": "RIGHT", "path": "controller/src/main/java/org/jboss/as/controller/OperationContext.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQwMjoyNTo1M1rOH-98lA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQwMjoyNTo1M1rOH-98lA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTc4ODY5Mg==", "bodyText": "This should return String. The node will always hold a string.", "url": "https://github.com/wildfly/wildfly-core/pull/4356#discussion_r535788692", "createdAt": "2020-12-04T02:25:53Z", "author": {"login": "bstansberry"}, "path": "controller/src/main/java/org/jboss/as/controller/OperationContext.java", "diffHunk": "@@ -418,6 +418,30 @@\n      */\n     String getCurrentAddressValue();\n \n+    /**\n+     * Get the node with current operation name\n+     *\n+     * @return operation name node\n+     */\n+    ModelNode getCurrentOperationName();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a08b093efef315999d6a6e91fc2970734a7fa690"}, "originalPosition": 9}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM2MTY2OTkwOnYy", "diffSide": "RIGHT", "path": "controller/src/main/java/org/jboss/as/controller/OperationContext.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQwMjozMjoxOVrOH--FAA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQwMjozMjoxOVrOH--FAA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTc5MDg0OA==", "bodyText": "whether the return value can be null if the operation has no parameter with the given name", "url": "https://github.com/wildfly/wildfly-core/pull/4356#discussion_r535790848", "createdAt": "2020-12-04T02:32:19Z", "author": {"login": "bstansberry"}, "path": "controller/src/main/java/org/jboss/as/controller/OperationContext.java", "diffHunk": "@@ -418,6 +418,30 @@\n      */\n     String getCurrentAddressValue();\n \n+    /**\n+     * Get the node with current operation name\n+     *\n+     * @return operation name node\n+     */\n+    ModelNode getCurrentOperationName();\n+\n+    /**\n+     * Get parameter node by its name\n+     *\n+     * @param name of desired parameter\n+     * @return node for parameter of given name\n+     */\n+    ModelNode getCurrentOperationParameter(String name);\n+\n+    /**\n+     * Get parameter node by its name\n+     *\n+     * @param name of desired parameter\n+     * @param nullable whether return value can be null", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a08b093efef315999d6a6e91fc2970734a7fa690"}, "originalPosition": 23}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM2MTY3MTcxOnYy", "diffSide": "RIGHT", "path": "controller/src/main/java/org/jboss/as/controller/OperationContext.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQwMjozMzoxMFrOH--GAw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQwMjozMzoxMFrOH--GAw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTc5MTEwNw==", "bodyText": "node for the parameter of the given name, or {@code null} if {@code nullable} is {@code true} and the operation has no parameter with the given name", "url": "https://github.com/wildfly/wildfly-core/pull/4356#discussion_r535791107", "createdAt": "2020-12-04T02:33:10Z", "author": {"login": "bstansberry"}, "path": "controller/src/main/java/org/jboss/as/controller/OperationContext.java", "diffHunk": "@@ -418,6 +418,30 @@\n      */\n     String getCurrentAddressValue();\n \n+    /**\n+     * Get the node with current operation name\n+     *\n+     * @return operation name node\n+     */\n+    ModelNode getCurrentOperationName();\n+\n+    /**\n+     * Get parameter node by its name\n+     *\n+     * @param name of desired parameter\n+     * @return node for parameter of given name\n+     */\n+    ModelNode getCurrentOperationParameter(String name);\n+\n+    /**\n+     * Get parameter node by its name\n+     *\n+     * @param name of desired parameter\n+     * @param nullable whether return value can be null\n+     * @return node for parameter of given name", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a08b093efef315999d6a6e91fc2970734a7fa690"}, "originalPosition": 24}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3793, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}