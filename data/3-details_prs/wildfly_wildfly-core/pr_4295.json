{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY0NDcyNTgz", "number": 4295, "title": "[WFCORE-5079] Refactoring of \"management\" layers.", "bodyText": "https://issues.redhat.com/browse/WFCORE-5079\nhttps://issues.redhat.com/browse/WFCORE-5084\nSwitches to two secured layers only, this will make it impossible to accidentally provision an unsecured server.\nThis also contains a small correction to the Elytron layer which was bringing in management specific RBAC configuration.\nThe following diff illustrates the effect of adding the elytron layer to base-server:\nhttps://gist.github.com/darranl/0447770f0a7a35998225277caa2b4549/revisions#diff-d07c1929437497a0dbbef91e2c232b3c\nThe next diff illustrates the result of the management layer:\nhttps://gist.github.com/darranl/0447770f0a7a35998225277caa2b4549/revisions#diff-c3a1460cbad7b8a1f5176b566a2ac35a\nFinally the legacy-management layer can be visualised here:\nhttps://gist.github.com/darranl/0447770f0a7a35998225277caa2b4549/revisions#diff-6df06b002fa7b64133a9cbe69cc1aa48\nA final commit is to add back a \"secure-management\" layer, this is just an alias to \"management\" until WildFly can move over to use \"management\" instead.", "createdAt": "2020-08-07T08:33:41Z", "url": "https://github.com/wildfly/wildfly-core/pull/4295", "merged": true, "mergeCommit": {"oid": "7dc0c8bd91d00c454c44fab5d7553c3f1621432b"}, "closed": true, "closedAt": "2020-08-13T18:42:19Z", "author": {"login": "darranl"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc8TSzEAH2gAyNDY0NDcyNTgzOmVlZmYzOTEzMTczNzM3YzU3ZTI0NDY3OTZlMjc3NmU5ZWZiMTg0MzE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc93wHoAFqTQ2NTEyODE5Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "eeff3913173737c57e2446796e2776e9efb18431", "author": {"user": {"login": "darranl", "name": "Darran Lofthouse"}}, "url": "https://github.com/wildfly/wildfly-core/commit/eeff3913173737c57e2446796e2776e9efb18431", "committedDate": "2020-08-06T17:30:16Z", "message": "[WFCORE-5079] Adjust the management layers so we have just two layers.\n  management - secured by WildFly Elytron\n  legacy-management - secured by legacy security realms\n\ncore-tools and jmx-remoting optionally depend on management but this layer can be excluded to depend on legacy-security instead."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f34cc807dba7998f680fb6f26ccd84b424368b70", "author": {"user": {"login": "darranl", "name": "Darran Lofthouse"}}, "url": "https://github.com/wildfly/wildfly-core/commit/f34cc807dba7998f680fb6f26ccd84b424368b70", "committedDate": "2020-08-06T17:30:17Z", "message": "[WFCORE-5084] The elytron layer does not need access control, this should instead come in via the management layers."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "91492612900a580bd4a4caab50ebd7de0cd512c1", "author": {"user": {"login": "darranl", "name": "Darran Lofthouse"}}, "url": "https://github.com/wildfly/wildfly-core/commit/91492612900a580bd4a4caab50ebd7de0cd512c1", "committedDate": "2020-08-07T07:57:35Z", "message": "[WFCORE-5079] Temporarily add \"secure-management\" as an alis for \"management\" until WildFly has switched to use \"management\"."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY0OTk1NjQy", "url": "https://github.com/wildfly/wildfly-core/pull/4295#pullrequestreview-464995642", "createdAt": "2020-08-11T11:59:28Z", "commit": {"oid": "91492612900a580bd4a4caab50ebd7de0cd512c1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMVQxMTo1OToyOFrOG-0kDA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMVQxMTo1OToyOFrOG-0kDA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODUyNjA5Mg==", "bodyText": "Hi @darranl , I would like to confirm my understanding, the reason of this explicit exclusion is to avoid getting Elytron security enabled by default in our default wildfly-core distribution, right? If so, since the security subsystem is in WildFly full, what is making the management interface secured in the default wildfly-core distribution?", "url": "https://github.com/wildfly/wildfly-core/pull/4295#discussion_r468526092", "createdAt": "2020-08-11T11:59:28Z", "author": {"login": "yersan"}, "path": "core-feature-pack/galleon-feature-pack/src/main/resources/configs/standalone/standalone.xml/config.xml", "diffHunk": "@@ -3,6 +3,8 @@\n <config xmlns=\"urn:jboss:galleon:config:1.0\" name=\"standalone.xml\" model=\"standalone\">\n     <layers>\n         <include name=\"legacy-management\"/>\n+        <exclude name=\"management\"/> <!-- Other layers may optionally depend on this one. -->", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "91492612900a580bd4a4caab50ebd7de0cd512c1"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY1MTI4MTk3", "url": "https://github.com/wildfly/wildfly-core/pull/4295#pullrequestreview-465128197", "createdAt": "2020-08-11T14:32:49Z", "commit": {"oid": "91492612900a580bd4a4caab50ebd7de0cd512c1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3346, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}