{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA2NzQxNTI2", "number": 4175, "title": "[WFCORE-4901] TCCL not set to application classloader when MBean Noti\u2026", "bodyText": "JIRA issue: https://issues.redhat.com/browse/WFCORE-4901\nOld PR : #4126", "createdAt": "2020-04-21T15:16:35Z", "url": "https://github.com/wildfly/wildfly-core/pull/4175", "merged": true, "mergeCommit": {"oid": "f343f09bef5ff8fe00101a7a48abe206580deeb9"}, "closed": true, "closedAt": "2020-04-23T07:56:57Z", "author": {"login": "moulalis"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcZ2cQ2AFqTM5NzQ4MDMxOA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcaTITrgFqTM5ODcwOTk1MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk3NDgwMzE4", "url": "https://github.com/wildfly/wildfly-core/pull/4175#pullrequestreview-397480318", "createdAt": "2020-04-21T16:39:55Z", "commit": {"oid": "bcb1ecbc6ea7a2922b92f85dd6291d90edce15d9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQxNjozOTo1NVrOGJNrAg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQxNjozOTo1NVrOGJNrAg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjMxNDM3MA==", "bodyText": "Minor: can you call this \"testNotificationTccl\"?  Or something like that.", "url": "https://github.com/wildfly/wildfly-core/pull/4175#discussion_r412314370", "createdAt": "2020-04-21T16:39:55Z", "author": {"login": "bstansberry"}, "path": "jmx/src/test/java/org/jboss/as/jmx/PluggableMBeanServerTestCase.java", "diffHunk": "@@ -105,6 +112,33 @@ public void testReservedDomainMBeanRegistrationFails() throws Exception {\n         reservedDomainTest(\"jboss.as.expr:bean=test-null\", NAME);\n     }\n \n+    @Test\n+    public void testTccl() throws Exception {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bcb1ecbc6ea7a2922b92f85dd6291d90edce15d9"}, "originalPosition": 32}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk3NDgyMjUz", "url": "https://github.com/wildfly/wildfly-core/pull/4175#pullrequestreview-397482253", "createdAt": "2020-04-21T16:42:15Z", "commit": {"oid": "bcb1ecbc6ea7a2922b92f85dd6291d90edce15d9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQxNjo0MjoxNVrOGJNwwA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQxNjo0MjoxNVrOGJNwwA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjMxNTg0MA==", "bodyText": "If you change the return type of this method to ClassLoader, then you can add this:\nreturn WildFlySecurityManager.getCurrentContextClassLoaderPrivileged();\n\nAnd then the test can validate that it returns newOutTccl. That both serves as a sanity check that newOutTccl was in place before the notification handling, and confirms that it got restored.", "url": "https://github.com/wildfly/wildfly-core/pull/4175#discussion_r412315840", "createdAt": "2020-04-21T16:42:15Z", "author": {"login": "bstansberry"}, "path": "jmx/src/test/java/org/jboss/as/jmx/PluggableMBeanServerTestCase.java", "diffHunk": "@@ -165,6 +199,10 @@ public void preDeregister() throws Exception {\n         public void postDeregister() {\n         }\n \n+        @Override\n+        public void proceed() {\n+            sendNotification(new Notification(\"testtccl\", 1, 1));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bcb1ecbc6ea7a2922b92f85dd6291d90edce15d9"}, "originalPosition": 80}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk3NDg0MTg4", "url": "https://github.com/wildfly/wildfly-core/pull/4175#pullrequestreview-397484188", "createdAt": "2020-04-21T16:44:38Z", "commit": {"oid": "bcb1ecbc6ea7a2922b92f85dd6291d90edce15d9"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6b661ba0beb1af1c9f3923b9f6edb23cc528f2d1", "author": {"user": null}, "url": "https://github.com/wildfly/wildfly-core/commit/6b661ba0beb1af1c9f3923b9f6edb23cc528f2d1", "committedDate": "2020-04-22T06:13:08Z", "message": "[WFCORE-4901] TCCL not set to application classloader when MBean Notification is invoked\n\n[WFCORE-4901] TCCL not set to application classloader when MBean Notification is invoked"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fb5da76764d97b66e3738d38b8976a392b324590", "author": {"user": null}, "url": "https://github.com/wildfly/wildfly-core/commit/fb5da76764d97b66e3738d38b8976a392b324590", "committedDate": "2020-04-22T06:01:20Z", "message": "[WFCORE-4901] TCCL not set to application classloader when MBean Notification is invoked"}, "afterCommit": {"oid": "6b661ba0beb1af1c9f3923b9f6edb23cc528f2d1", "author": {"user": null}, "url": "https://github.com/wildfly/wildfly-core/commit/6b661ba0beb1af1c9f3923b9f6edb23cc528f2d1", "committedDate": "2020-04-22T06:13:08Z", "message": "[WFCORE-4901] TCCL not set to application classloader when MBean Notification is invoked\n\n[WFCORE-4901] TCCL not set to application classloader when MBean Notification is invoked"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk4NzA5OTUx", "url": "https://github.com/wildfly/wildfly-core/pull/4175#pullrequestreview-398709951", "createdAt": "2020-04-23T02:05:23Z", "commit": {"oid": "6b661ba0beb1af1c9f3923b9f6edb23cc528f2d1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3487, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}