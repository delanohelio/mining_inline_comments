{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM0OTQxNDk0", "number": 4234, "title": "[WFCORE-4993] Organize feature pack code to facilitate separate EE 8 and EE 9 variants", "bodyText": "https://issues.redhat.com/browse/WFCORE-4993\nAlso https://issues.redhat.com/browse/WFCORE-5008 which is needed to allow license generation from the multiple license configuration files the result from the refactoring described below.\nThis is essentially a code reorganization:\n\n\nConvert the 'core-feature-pack' maven module to a parent module containing submodules related to both the legacy core fp and the galleon one. The top level core-galleon-pack maven module is eliminated.\n\n\nUnder 'core-feature-pack' create a 'common' submodule that holds content that is expected to be usable in the legacy fp, the current EE 8 galleon FP, and a future EE 9 galleon FP. This includes the various module.xml files, a license information file for the artifacts referenced in those module.xml files, other shared content, and the dependency set declaration in the pom for all the artifacts referenced in the module.xml files.\n\n\nUnder 'core-feature-pack' create a 'ee-8-api' submodule that holds content that is expected to be usable in the legacy fp and the current EE 8 galleon FP but not by a future EE 9 galleon FP. This includes the various module.xml files, a license information file for the artifacts referenced in those module.xml files,, and the dependency set declaration in the pom for all the artifacts referenced in the module.xml files.\n\n\nUnder 'core-feature-pack' create a 'galleon-common' submodule that holds content that is expected to be usable in the current EE 8 galleon FP and a future EE 9 galleon FP. It is not meant to include galleon content that would not be used in both FP variants, e.g. deprecated config items that won't appear in the EE 9 variant without a conscious decision to bring them in.\n\n\nUnder 'core-feature-pack' create a 'galleon-feature-pack' submodule that replaces the previous top level 'core-galleon-pack' module.  It copies in content from the 'common', 'ee-8-api' and 'galleon-common' sibling maven modules discussed above, and also depends on the 'common' and 'ee-8-api' poms, as a source of dependency information. It also has some content of its own that is unique to the EE 8 galleon FP.\n\n\nUnder 'core-feature-pack' create a 'legacy-feature-pack' submodule that replaces the function of the previous top level 'core-feature-pack' module.  It copies in content from the 'common' and 'ee-8-api' sibling maven modules discussed above, and also depends on the 'common' and 'ee-8-api' poms, as a source of dependency information. It also has some content of its own that is unique to the legacy FP.\n\n\nA goal here is to remove the current requirement to declare detailed dependency info in the poms for both the legacy FP and the galleon FP.  @jfdenise we need to confirm this doesn't introduce problems for external FP authors.\nThe 'galleon-common' content needs further investigation to see if more things there are not truly common between EE 8 and EE 9 feature packs. I'd like that to be future work.\nIn the future the Galleon FPs in full WF may be able to directly depend on artifacts produced by the submodules here as source inputs, eliminating the need for feature pack dependencies. See GAL-319.", "createdAt": "2020-06-16T02:54:35Z", "url": "https://github.com/wildfly/wildfly-core/pull/4234", "merged": true, "mergeCommit": {"oid": "3e46fe9138f15eecf9ce1287eae0118c46b53d80"}, "closed": true, "closedAt": "2020-06-19T11:29:15Z", "author": {"login": "bstansberry"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcrxOu8AFqTQzMTI4NjcyNw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcshLNwABqjM0NTkwNTY4NDQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMxMjg2NzI3", "url": "https://github.com/wildfly/wildfly-core/pull/4234#pullrequestreview-431286727", "createdAt": "2020-06-16T08:42:14Z", "commit": {"oid": "4467b47191b8dbcb66d95e14d012c86805db3100"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQwODo0MjoxNFrOGkRTmw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQwODo0NjoxM1rOGkRdnQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDY4NTQ2Nw==", "bodyText": "I'm not sure to follow.  wildfly-core-feature-pack-common \"holds content that is expected to be usable in the legacy fp, the current EE 8 galleon FP, and a future EE 9 galleon FP\". It depends on ee-8-api though but we exclude them in this feature pack to bring them back with wildfly-core-feature-pack-ee-8-api.\nThe comments seems to imply that this is for all ee-8-api dependencies, but you only exclude the JSON API.", "url": "https://github.com/wildfly/wildfly-core/pull/4234#discussion_r440685467", "createdAt": "2020-06-16T08:42:14Z", "author": {"login": "jmesnil"}, "path": "core-feature-pack/galleon-feature-pack/pom.xml", "diffHunk": "@@ -0,0 +1,372 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+\n+<!--\n+  ~ JBoss, Home of Professional Open Source.\n+  ~ Copyright 2010, Red Hat, Inc., and individual contributors\n+  ~ as indicated by the @author tags. See the copyright.txt file in the\n+  ~ distribution for a full listing of individual contributors.\n+  ~\n+  ~ This is free software; you can redistribute it and/or modify it\n+  ~ under the terms of the GNU Lesser General Public License as\n+  ~ published by the Free Software Foundation; either version 2.1 of\n+  ~ the License, or (at your option) any later version.\n+  ~\n+  ~ This software is distributed in the hope that it will be useful,\n+  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of\n+  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU\n+  ~ Lesser General Public License for more details.\n+  ~\n+  ~ You should have received a copy of the GNU Lesser General Public\n+  ~ License along with this software; if not, write to the Free\n+  ~ Software Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA\n+  ~ 02110-1301 USA, or see the FSF site: http://www.fsf.org.\n+  -->\n+\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+    <modelVersion>4.0.0</modelVersion>\n+\n+    <parent>\n+        <groupId>org.wildfly.core</groupId>\n+        <artifactId>wildfly-core-feature-pack-parent</artifactId>\n+        <version>13.0.0.Beta1-SNAPSHOT</version>\n+    </parent>\n+\n+    <artifactId>wildfly-core-galleon-pack</artifactId>\n+\n+    <name>WildFly: Core Galleon Pack</name>\n+    <packaging>pom</packaging>\n+\n+    <properties>\n+        <license.directory>${project.build.directory}/resources/content/docs/licenses</license.directory>\n+        <common.resources.directory>${basedir}/../common/src/main/resources</common.resources.directory>\n+        <ee-8-api.resources.directory>${basedir}/../ee-8-api/src/main/resources</ee-8-api.resources.directory>\n+        <legacy.resources.directory>${basedir}/../legacy-feature-pack/src/main/resources</legacy.resources.directory>\n+        <galleon-common.resources.directory>${basedir}/../galleon-common/src/main/resources</galleon-common.resources.directory>\n+        <common.license.directory>${basedir}/../common/src/license</common.license.directory>\n+        <ee-8-api.license.directory>${basedir}/../ee-8-api/src/license</ee-8-api.license.directory>\n+    </properties>\n+\n+    <dependencies>\n+\n+        <dependency>\n+            <groupId>org.wildfly.galleon-plugins</groupId>\n+            <artifactId>wildfly-galleon-plugins</artifactId>\n+            <scope>provided</scope>\n+        </dependency>\n+\n+        <dependency>\n+            <groupId>org.wildfly.galleon-plugins</groupId>\n+            <artifactId>wildfly-config-gen</artifactId>\n+            <scope>provided</scope>\n+        </dependency>\n+\n+        <!-- module and copy artifact dependencies -->\n+\n+        <!-- Bring in all the common deps in one go -->\n+        <dependency>\n+            <groupId>${project.groupId}</groupId>\n+            <artifactId>wildfly-core-feature-pack-common</artifactId>\n+            <type>pom</type>\n+            <scope>provided</scope>\n+            <!-- Exclude the ee-8-api dependencies -->", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4467b47191b8dbcb66d95e14d012c86805db3100"}, "originalPosition": 73}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDY4NjIyOQ==", "bodyText": "should we rename the artifactId to wildfly-core-legacy-feature-pack and accept that starting from now a feature pack means Galleon unless specified otherwise?", "url": "https://github.com/wildfly/wildfly-core/pull/4234#discussion_r440686229", "createdAt": "2020-06-16T08:43:30Z", "author": {"login": "jmesnil"}, "path": "core-feature-pack/legacy-feature-pack/pom.xml", "diffHunk": "@@ -0,0 +1,408 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+\n+<!--\n+  ~ JBoss, Home of Professional Open Source.\n+  ~ Copyright 2010, Red Hat, Inc., and individual contributors\n+  ~ as indicated by the @author tags. See the copyright.txt file in the\n+  ~ distribution for a full listing of individual contributors.\n+  ~\n+  ~ This is free software; you can redistribute it and/or modify it\n+  ~ under the terms of the GNU Lesser General Public License as\n+  ~ published by the Free Software Foundation; either version 2.1 of\n+  ~ the License, or (at your option) any later version.\n+  ~\n+  ~ This software is distributed in the hope that it will be useful,\n+  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of\n+  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU\n+  ~ Lesser General Public License for more details.\n+  ~\n+  ~ You should have received a copy of the GNU Lesser General Public\n+  ~ License along with this software; if not, write to the Free\n+  ~ Software Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA\n+  ~ 02110-1301 USA, or see the FSF site: http://www.fsf.org.\n+  -->\n+\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+    <modelVersion>4.0.0</modelVersion>\n+\n+    <parent>\n+        <groupId>org.wildfly.core</groupId>\n+        <artifactId>wildfly-core-feature-pack-parent</artifactId>\n+        <version>13.0.0.Beta1-SNAPSHOT</version>\n+    </parent>\n+\n+    <artifactId>wildfly-core-feature-pack</artifactId>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4467b47191b8dbcb66d95e14d012c86805db3100"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDY4Njg1OA==", "bodyText": "related to my comment above, you don't exclude Jakarta.json:jakarta.json-api as you did in the Galleon feature pack. Is it intended?", "url": "https://github.com/wildfly/wildfly-core/pull/4234#discussion_r440686858", "createdAt": "2020-06-16T08:44:29Z", "author": {"login": "jmesnil"}, "path": "core-feature-pack/legacy-feature-pack/pom.xml", "diffHunk": "@@ -0,0 +1,408 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+\n+<!--\n+  ~ JBoss, Home of Professional Open Source.\n+  ~ Copyright 2010, Red Hat, Inc., and individual contributors\n+  ~ as indicated by the @author tags. See the copyright.txt file in the\n+  ~ distribution for a full listing of individual contributors.\n+  ~\n+  ~ This is free software; you can redistribute it and/or modify it\n+  ~ under the terms of the GNU Lesser General Public License as\n+  ~ published by the Free Software Foundation; either version 2.1 of\n+  ~ the License, or (at your option) any later version.\n+  ~\n+  ~ This software is distributed in the hope that it will be useful,\n+  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of\n+  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU\n+  ~ Lesser General Public License for more details.\n+  ~\n+  ~ You should have received a copy of the GNU Lesser General Public\n+  ~ License along with this software; if not, write to the Free\n+  ~ Software Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA\n+  ~ 02110-1301 USA, or see the FSF site: http://www.fsf.org.\n+  -->\n+\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+    <modelVersion>4.0.0</modelVersion>\n+\n+    <parent>\n+        <groupId>org.wildfly.core</groupId>\n+        <artifactId>wildfly-core-feature-pack-parent</artifactId>\n+        <version>13.0.0.Beta1-SNAPSHOT</version>\n+    </parent>\n+\n+    <artifactId>wildfly-core-feature-pack</artifactId>\n+\n+    <name>WildFly: Core Feature Pack</name>\n+    <packaging>pom</packaging>\n+\n+    <properties>\n+        <license.directory>${project.build.directory}/${project.build.finalName}/content/docs/licenses</license.directory>\n+        <common.resources.directory>${basedir}/../common/src/main/resources</common.resources.directory>\n+        <ee-8-api.resources.directory>${basedir}/../ee-8-api/src/main/resources</ee-8-api.resources.directory>\n+        <common.license.directory>${basedir}/../common/src/license</common.license.directory>\n+        <ee-8-api.license.directory>${basedir}/../ee-8-api/src/license</ee-8-api.license.directory>\n+    </properties>\n+\n+    <dependencies>\n+\n+        <!-- module and copy artifact dependencies -->\n+\n+        <!-- Bring in all the common deps in one go -->\n+        <dependency>\n+            <groupId>${project.groupId}</groupId>\n+            <artifactId>wildfly-core-feature-pack-common</artifactId>\n+            <type>pom</type>\n+        </dependency>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4467b47191b8dbcb66d95e14d012c86805db3100"}, "originalPosition": 58}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDY4ODAyOQ==", "bodyText": "(although it is not required, I like to have Maven GAV matching the names of the directories as much as possible)", "url": "https://github.com/wildfly/wildfly-core/pull/4234#discussion_r440688029", "createdAt": "2020-06-16T08:46:13Z", "author": {"login": "jmesnil"}, "path": "core-feature-pack/legacy-feature-pack/pom.xml", "diffHunk": "@@ -0,0 +1,408 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+\n+<!--\n+  ~ JBoss, Home of Professional Open Source.\n+  ~ Copyright 2010, Red Hat, Inc., and individual contributors\n+  ~ as indicated by the @author tags. See the copyright.txt file in the\n+  ~ distribution for a full listing of individual contributors.\n+  ~\n+  ~ This is free software; you can redistribute it and/or modify it\n+  ~ under the terms of the GNU Lesser General Public License as\n+  ~ published by the Free Software Foundation; either version 2.1 of\n+  ~ the License, or (at your option) any later version.\n+  ~\n+  ~ This software is distributed in the hope that it will be useful,\n+  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of\n+  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU\n+  ~ Lesser General Public License for more details.\n+  ~\n+  ~ You should have received a copy of the GNU Lesser General Public\n+  ~ License along with this software; if not, write to the Free\n+  ~ Software Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA\n+  ~ 02110-1301 USA, or see the FSF site: http://www.fsf.org.\n+  -->\n+\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+    <modelVersion>4.0.0</modelVersion>\n+\n+    <parent>\n+        <groupId>org.wildfly.core</groupId>\n+        <artifactId>wildfly-core-feature-pack-parent</artifactId>\n+        <version>13.0.0.Beta1-SNAPSHOT</version>\n+    </parent>\n+\n+    <artifactId>wildfly-core-feature-pack</artifactId>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDY4NjIyOQ=="}, "originalCommit": {"oid": "4467b47191b8dbcb66d95e14d012c86805db3100"}, "originalPosition": 36}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4467b47191b8dbcb66d95e14d012c86805db3100", "author": {"user": {"login": "bstansberry", "name": " Brian Stansberry"}}, "url": "https://github.com/wildfly/wildfly-core/commit/4467b47191b8dbcb66d95e14d012c86805db3100", "committedDate": "2020-06-16T02:29:12Z", "message": "[WFCORE-4993] Organize feature pack code to facilitate separate EE 8 and EE 9 variants"}, "afterCommit": {"oid": "1adc06c724ef75242928694478bd894f3dbce376", "author": {"user": {"login": "bstansberry", "name": " Brian Stansberry"}}, "url": "https://github.com/wildfly/wildfly-core/commit/1adc06c724ef75242928694478bd894f3dbce376", "committedDate": "2020-06-16T13:51:05Z", "message": "[WFCORE-4993] Organize feature pack code to facilitate separate EE 8 and EE 9 variants"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "510ac7ad6214eec34c566a8cd96fbc006a69f305", "author": {"user": {"login": "bstansberry", "name": " Brian Stansberry"}}, "url": "https://github.com/wildfly/wildfly-core/commit/510ac7ad6214eec34c566a8cd96fbc006a69f305", "committedDate": "2020-06-18T16:19:08Z", "message": "[WFCORE-5008] Upgrade WildFly maven-plugins to 2.2.0.Final"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4f78291e078972c808488afc878063b75fdf5ec8", "author": {"user": {"login": "bstansberry", "name": " Brian Stansberry"}}, "url": "https://github.com/wildfly/wildfly-core/commit/4f78291e078972c808488afc878063b75fdf5ec8", "committedDate": "2020-06-18T16:22:37Z", "message": "[WFCORE-4993] Organize feature pack code to facilitate separate EE 8 and EE 9 variants"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1adc06c724ef75242928694478bd894f3dbce376", "author": {"user": {"login": "bstansberry", "name": " Brian Stansberry"}}, "url": "https://github.com/wildfly/wildfly-core/commit/1adc06c724ef75242928694478bd894f3dbce376", "committedDate": "2020-06-16T13:51:05Z", "message": "[WFCORE-4993] Organize feature pack code to facilitate separate EE 8 and EE 9 variants"}, "afterCommit": {"oid": "4f78291e078972c808488afc878063b75fdf5ec8", "author": {"user": {"login": "bstansberry", "name": " Brian Stansberry"}}, "url": "https://github.com/wildfly/wildfly-core/commit/4f78291e078972c808488afc878063b75fdf5ec8", "committedDate": "2020-06-18T16:22:37Z", "message": "[WFCORE-4993] Organize feature pack code to facilitate separate EE 8 and EE 9 variants"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3420, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}