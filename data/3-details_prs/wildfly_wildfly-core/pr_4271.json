{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDUxNDk2Njg4", "number": 4271, "title": "[WFCORE-4842] Add tests for TLS 1.3 that make use of the OpenSSL TLS provider", "bodyText": "https://issues.redhat.com/browse/WFCORE-4842\nhttps://issues.redhat.com/browse/EAP7-1414\nTo pass CI, this will require a WildFly OpenSSL upgrade but this is ready to be reviewed.\nAnalysis document: wildfly/wildfly-proposals#288\nWildFly PR with documentation: wildfly/wildfly#13414\nDepends on: wildfly-security/wildfly-openssl#81", "createdAt": "2020-07-17T22:07:50Z", "url": "https://github.com/wildfly/wildfly-core/pull/4271", "merged": true, "mergeCommit": {"oid": "410d27ebcfc087b987e0252cadf1baa3f75f85ab"}, "closed": true, "closedAt": "2020-09-22T14:33:23Z", "author": {"login": "fjuma"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc21Se8gBqjM1NjcwNTQ1MzM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdJIPKEgFqTQ4ODcxMzA0MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e7c9e190ea6b196e2e1c1f3a28a89dee3cd93da5", "author": {"user": {"login": "fjuma", "name": "Farah Juma"}}, "url": "https://github.com/wildfly/wildfly-core/commit/e7c9e190ea6b196e2e1c1f3a28a89dee3cd93da5", "committedDate": "2020-07-17T21:35:18Z", "message": "[WFCORE-4842] Add tests for TLS 1.3 that make use of the OpenSSL TLS provider"}, "afterCommit": {"oid": "23ea462daae15f6efeca0c0f1bcec27c13ade04f", "author": {"user": {"login": "fjuma", "name": "Farah Juma"}}, "url": "https://github.com/wildfly/wildfly-core/commit/23ea462daae15f6efeca0c0f1bcec27c13ade04f", "committedDate": "2020-07-20T17:42:54Z", "message": "[WFCORE-4842] Add tests for TLS 1.3 that make use of the OpenSSL TLS provider"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "23ea462daae15f6efeca0c0f1bcec27c13ade04f", "author": {"user": {"login": "fjuma", "name": "Farah Juma"}}, "url": "https://github.com/wildfly/wildfly-core/commit/23ea462daae15f6efeca0c0f1bcec27c13ade04f", "committedDate": "2020-07-20T17:42:54Z", "message": "[WFCORE-4842] Add tests for TLS 1.3 that make use of the OpenSSL TLS provider"}, "afterCommit": {"oid": "411be6c8d3345820e523be3217a648b9d666de73", "author": {"user": {"login": "fjuma", "name": "Farah Juma"}}, "url": "https://github.com/wildfly/wildfly-core/commit/411be6c8d3345820e523be3217a648b9d666de73", "committedDate": "2020-07-20T17:45:28Z", "message": "[WFCORE-4842] Add tests for TLS 1.3 that make use of the OpenSSL TLS provider"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "411be6c8d3345820e523be3217a648b9d666de73", "author": {"user": {"login": "fjuma", "name": "Farah Juma"}}, "url": "https://github.com/wildfly/wildfly-core/commit/411be6c8d3345820e523be3217a648b9d666de73", "committedDate": "2020-07-20T17:45:28Z", "message": "[WFCORE-4842] Add tests for TLS 1.3 that make use of the OpenSSL TLS provider"}, "afterCommit": {"oid": "16a6936beda3b901d148f2638fbd2d658ca3ec92", "author": {"user": {"login": "fjuma", "name": "Farah Juma"}}, "url": "https://github.com/wildfly/wildfly-core/commit/16a6936beda3b901d148f2638fbd2d658ca3ec92", "committedDate": "2020-07-20T17:50:09Z", "message": "[WFCORE-4842] Add tests for TLS 1.3 that make use of the OpenSSL TLS provider"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "83d0f5db947312562e8dd1893e5b07687f2d854a", "author": {"user": {"login": "fjuma", "name": "Farah Juma"}}, "url": "https://github.com/wildfly/wildfly-core/commit/83d0f5db947312562e8dd1893e5b07687f2d854a", "committedDate": "2020-08-31T17:40:00Z", "message": "[WFCORE-4842] Add tests for TLS 1.3 that make use of the OpenSSL TLS provider"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "16a6936beda3b901d148f2638fbd2d658ca3ec92", "author": {"user": {"login": "fjuma", "name": "Farah Juma"}}, "url": "https://github.com/wildfly/wildfly-core/commit/16a6936beda3b901d148f2638fbd2d658ca3ec92", "committedDate": "2020-07-20T17:50:09Z", "message": "[WFCORE-4842] Add tests for TLS 1.3 that make use of the OpenSSL TLS provider"}, "afterCommit": {"oid": "83d0f5db947312562e8dd1893e5b07687f2d854a", "author": {"user": {"login": "fjuma", "name": "Farah Juma"}}, "url": "https://github.com/wildfly/wildfly-core/commit/83d0f5db947312562e8dd1893e5b07687f2d854a", "committedDate": "2020-08-31T17:40:00Z", "message": "[WFCORE-4842] Add tests for TLS 1.3 that make use of the OpenSSL TLS provider"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "12c7c835551b2e156cbe4ad88e1e2eb70f9fc441", "author": {"user": {"login": "fjuma", "name": "Farah Juma"}}, "url": "https://github.com/wildfly/wildfly-core/commit/12c7c835551b2e156cbe4ad88e1e2eb70f9fc441", "committedDate": "2020-09-08T21:13:13Z", "message": "[WFCORE-4842] Verify that TLS 1.3 is disabled by default when using the WildFly OpenSSL provider"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2NTE3NTg2", "url": "https://github.com/wildfly/wildfly-core/pull/4271#pullrequestreview-486517586", "createdAt": "2020-09-11T06:51:54Z", "commit": {"oid": "12c7c835551b2e156cbe4ad88e1e2eb70f9fc441"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg3ODUxNTAw", "url": "https://github.com/wildfly/wildfly-core/pull/4271#pullrequestreview-487851500", "createdAt": "2020-09-14T14:51:12Z", "commit": {"oid": "83d0f5db947312562e8dd1893e5b07687f2d854a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxNDo1MToxM1rOHRYxwA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxNDo1MToxM1rOHRYxwA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Nzk5Mzc5Mg==", "bodyText": "@fjuma, just noticed - isn't here missing the && isOpenSSL111OrHigher() part here? There is client using TLS13 two lines down...\nOf course not - it's not OpenSSL in use. Ignore this comment :)", "url": "https://github.com/wildfly/wildfly-core/pull/4271#discussion_r487993792", "createdAt": "2020-09-14T14:51:13Z", "author": {"login": "jstourac"}, "path": "elytron/src/test/java/org/wildfly/extension/elytron/TlsTestCase.java", "diffHunk": "@@ -345,16 +362,24 @@ public void testSslServiceAuth() throws Throwable {\n \n     @Test\n     public void testSslServiceAuthTLS13() throws Throwable {\n-        Assume.assumeTrue(\"Skipping testSslServiceAuthTLS13, test is not being run on JDK 11.\",\n-                System.getProperty(\"java.specification.version\").equals(\"11\"));\n+        Assume.assumeTrue(\"Skipping testSslServiceAuthTLS13, test is not being run on JDK 11+.\",\n+                JdkUtils.getJavaSpecVersion() >= 11);\n         testCommunication(\"ServerSslContextTLS13\", \"ClientSslContextTLS13\", false, \"OU=Elytron,O=Elytron,C=CZ,ST=Elytron,CN=localhost\",\n                 \"OU=Elytron,O=Elytron,C=UK,ST=Elytron,CN=Firefly\", \"TLS_AES_256_GCM_SHA384\", true);\n     }\n \n+    @Test\n+    public void testSslServiceAuthTLS13OpenSsl() throws Throwable {\n+        Assume.assumeTrue(\"Skipping testSslServiceAuthTLS13OpenSsl, test is not being run with JDK 11+ and OpenSSL 1.1.1+\",\n+                JdkUtils.getJavaSpecVersion() >= 11 && isOpenSSL111OrHigher());\n+        testCommunication(\"ServerSslContextTLS13OpenSsl\", \"ClientSslContextTLS13OpenSsl\", false, \"OU=Elytron,O=Elytron,C=CZ,ST=Elytron,CN=localhost\",\n+                \"OU=Elytron,O=Elytron,C=UK,ST=Elytron,CN=Firefly\", \"TLS_AES_256_GCM_SHA384\", true);\n+    }\n+\n     @Test\n     public void testSslServiceAuthProtocolMismatch() throws Throwable {\n-        Assume.assumeTrue(\"Skipping testSslServiceAuthProtocolMismatch, test is not being run on JDK 11.\",\n-                System.getProperty(\"java.specification.version\").equals(\"11\"));\n+        Assume.assumeTrue(\"Skipping testSslServiceAuthProtocolMismatch, test is not being run on JDK 11+.\",\n+                JdkUtils.getJavaSpecVersion() >= 11);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "83d0f5db947312562e8dd1893e5b07687f2d854a"}, "originalPosition": 74}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg4NzEzMDQx", "url": "https://github.com/wildfly/wildfly-core/pull/4271#pullrequestreview-488713041", "createdAt": "2020-09-15T13:58:21Z", "commit": {"oid": "12c7c835551b2e156cbe4ad88e1e2eb70f9fc441"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3441, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}