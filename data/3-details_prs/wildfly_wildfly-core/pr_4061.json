{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY1MzIzNTU5", "number": 4061, "title": "[WFCORE-4803] EJB Client authentication does not work using SASL DIGEST-MD5 and EXTERNAL mechanisms in Legacy security", "bodyText": "Issue: https://issues.redhat.com/browse/WFCORE-4803\nTest Issue: https://issues.redhat.com/browse/WFLY-12999\nTest PR: wildfly/wildfly#12936\nAlthough there is a test in WFCORE the SaslLegacyMechanismConfigurationTestCase in WFLY is also modified to include a DIGEST-MD5 test.", "createdAt": "2020-01-21T14:07:47Z", "url": "https://github.com/wildfly/wildfly-core/pull/4061", "merged": true, "mergeCommit": {"oid": "f51b214cf97ee3aa34a216e7de554e1470da3137"}, "closed": true, "closedAt": "2020-03-19T08:44:22Z", "author": {"login": "rmartinc"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcKGQbdAFqTM2ODIwMjYwMg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcKXwZMAFqTM2ODgyMDA5MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY4MjAyNjAy", "url": "https://github.com/wildfly/wildfly-core/pull/4061#pullrequestreview-368202602", "createdAt": "2020-03-03T18:02:42Z", "commit": {"oid": "8cfd8e002157641249f8fc986c736dfca3636213"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QxODowMjo0MlrOFxQnvA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QxODowMjo0MlrOFxQnvA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzE5Njg2MA==", "bodyText": "Just looking at the code, I think this line should likely have always been the line you are adding i.e. I am not sure if using 'mechanismName` was valid as that is a SASL mechanism name which would not match a realm name which is what this String is being used for.\nOverall I think if authMechanism is null maybe this mechanismName should be skipped and the loop continues.", "url": "https://github.com/wildfly/wildfly-core/pull/4061#discussion_r387196860", "createdAt": "2020-03-03T18:02:42Z", "author": {"login": "darranl"}, "path": "domain-management/src/main/java/org/jboss/as/domain/management/security/SecurityRealmService.java", "diffHunk": "@@ -690,6 +690,8 @@ public SaslAuthenticationFactory getSaslAuthenticationFactory(final String[] mec\n                     String preferredMechanism;\n                     if(authMechanism == AuthMechanism.PLAIN && !registeredServices.containsKey(AuthMechanism.PLAIN) && registeredServices.containsKey(AuthMechanism.DIGEST)) {\n                         preferredMechanism = AuthMechanism.DIGEST.name();\n+                    } else if (authMechanism != null) {\n+                        preferredMechanism = authMechanism.name();\n                     } else {\n                         preferredMechanism = mechanismName;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8cfd8e002157641249f8fc986c736dfca3636213"}, "originalPosition": 7}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0cb0160da6154311aa5f1932f031eee5cad83dbc", "author": {"user": {"login": "rmartinc", "name": null}}, "url": "https://github.com/wildfly/wildfly-core/commit/0cb0160da6154311aa5f1932f031eee5cad83dbc", "committedDate": "2020-03-04T14:01:39Z", "message": "[WFCORE-4803] EJB Client authentication does not work using SASL DIGEST-MD5 and EXTERNAL mechanisms in Legacy security"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8cfd8e002157641249f8fc986c736dfca3636213", "author": {"user": {"login": "rmartinc", "name": null}}, "url": "https://github.com/wildfly/wildfly-core/commit/8cfd8e002157641249f8fc986c736dfca3636213", "committedDate": "2020-01-21T08:34:06Z", "message": "[WFCORE-4803] EJB Client authentication does not work using SASL DIGEST-MD5 and EXTERNAL mechanisms in Legacy security"}, "afterCommit": {"oid": "0cb0160da6154311aa5f1932f031eee5cad83dbc", "author": {"user": {"login": "rmartinc", "name": null}}, "url": "https://github.com/wildfly/wildfly-core/commit/0cb0160da6154311aa5f1932f031eee5cad83dbc", "committedDate": "2020-03-04T14:01:39Z", "message": "[WFCORE-4803] EJB Client authentication does not work using SASL DIGEST-MD5 and EXTERNAL mechanisms in Legacy security"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY4ODIwMDkw", "url": "https://github.com/wildfly/wildfly-core/pull/4061#pullrequestreview-368820090", "createdAt": "2020-03-04T14:26:00Z", "commit": {"oid": "0cb0160da6154311aa5f1932f031eee5cad83dbc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3496, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}