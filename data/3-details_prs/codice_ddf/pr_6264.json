{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcyODQ2NDg0", "number": 6264, "title": "Upgrade to Solr 8.6.1", "bodyText": "What does this PR do?\nUpgrades Solr and converts the SolrCloud docker compose files to a maven project.\nWho is reviewing it?\n\n@lamhuy\n@derekwilhelm\nSelect relevant component teams:\n\n@codice/solr\nAsk 2 committers to review/merge the PR and tag them here.\n\n@rzwiefel\n@Lambeaux\nHow should this be tested?\n\nStart SolrCloud using distribution\\docker\\solrcloud. Verify data can be ingested and searched.\nAny background context you want to provide?\nWhat are the relevant tickets?\nFixes: n/a\nScreenshots\n\nChecklist:\n\n Documentation Updated\n Update / Add Threat Dragon models\n Update / Add Unit Tests\n Update / Add Integration Tests\n\nNotes on Review Process\nPlease see Notes on Review Process for further guidance on requirements for merging and abbreviated reviews.\nReview Comment Legend:\n\n\u270f\ufe0f (Pencil) This comment is a nitpick or style suggestion, no action required for approval. This comment should provide a suggestion either as an in line code snippet or a gist.\n\u2753 (Question Mark) This comment is to gain a clearer understanding of design or code choices, clarification is required but action may not be necessary for approval.\n\u2757 (Exclamation Mark) This comment is critical and requires clarification or action before approval.", "createdAt": "2020-08-25T00:00:33Z", "url": "https://github.com/codice/ddf/pull/6264", "merged": true, "mergeCommit": {"oid": "8729f7143eaf52a5e1bb1476c5a65f58147ae7d0"}, "closed": true, "closedAt": "2020-08-28T20:13:23Z", "author": {"login": "pklinef"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdCMtakgFqTQ3NDAyMTgyNg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdDazN8gBqjM3MDU0ODcyOTQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc0MDIxODI2", "url": "https://github.com/codice/ddf/pull/6264#pullrequestreview-474021826", "createdAt": "2020-08-25T00:55:27Z", "commit": {"oid": "6f9c7b2791d4c65154fe2233195589d9d86ac811"}, "state": "APPROVED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQwMDo1ODoxMFrOHF95Cw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQwMTowOTo0MVrOHF-Wog==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjAxODk1NQ==", "bodyText": "\u270f\ufe0f  ... You may have to ** enable ** file sharing... instead of past tense.", "url": "https://github.com/codice/ddf/pull/6264#discussion_r476018955", "createdAt": "2020-08-25T00:58:10Z", "author": {"login": "Lambeaux"}, "path": "distribution/docker/solrcloud/README.md", "diffHunk": "@@ -1,22 +1,31 @@\n # DDF SolrCloud Docker Compose\n-This docker compose will start one Zookeeper and two DDF compatible SolrCloud nodes exposed to the local host.\n+Docker compose will start one Zookeeper and two DDF compatible SolrCloud nodes exposed to the local host.\n \n ## How to use this\n \n-Note: You may be asked to enabled file sharing in Docker with this directory on Windows or MacOS.\n-\n-To run:\n-```\n-docker-compose up\n-```\n+Note: You may have to enabled file sharing in Docker with this directory on Windows or MacOS.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6f9c7b2791d4c65154fe2233195589d9d86ac811"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjAyMzUzMQ==", "bodyText": "\u2753 Just want to ensure I'm understanding this correctly. The docker-maven-plugin is handling the interpolation of these props right?", "url": "https://github.com/codice/ddf/pull/6264#discussion_r476023531", "createdAt": "2020-08-25T01:05:06Z", "author": {"login": "Lambeaux"}, "path": "distribution/docker/solr-docker/src/main/docker/Dockerfile", "diffHunk": "@@ -13,7 +13,7 @@ RUN unzip /jars/solr-schema-${project.version}.jar -d /prep\n # Final Image Stage\n FROM solr:${solr.version}\n # Copy solr libs\n-COPY maven/jts-core-1.15.0.jar /opt/solr/server/solr-webapp/webapp/WEB-INF/lib/\n+COPY maven/jts-core-${jts.spatial4j.version}.jar /opt/solr/server/solr-webapp/webapp/WEB-INF/lib/", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6f9c7b2791d4c65154fe2233195589d9d86ac811"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjAyNjUzMA==", "bodyText": "\u2753 What are the implications of this? Just force quit some orphaned docker process and try again? If this doesn't fail, how will I know I orphaned something or am otherwise stuck in an invalid development state?\nIf the cleanup still occurs regardless of failure, then \ud83d\udc4d", "url": "https://github.com/codice/ddf/pull/6264#discussion_r476026530", "createdAt": "2020-08-25T01:09:41Z", "author": {"login": "Lambeaux"}, "path": "distribution/docker/solrcloud/pom.xml", "diffHunk": "@@ -0,0 +1,132 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+/**\n+ * Copyright (c) Codice Foundation\n+ *\n+ * This is free software: you can redistribute it and/or modify it under the terms of the GNU Lesser General Public License as published by the Free Software Foundation, either\n+ * version 3 of the License, or any later version.\n+ *\n+ * This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n+ * See the GNU Lesser General Public License for more details. A copy of the GNU Lesser General Public License is distributed along with this program and can be found at\n+ * <http://www.gnu.org/licenses/lgpl.html>.\n+ *\n+ **/\n+-->\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd\">\n+    <modelVersion>4.0.0</modelVersion>\n+    <parent>\n+        <groupId>ddf.distribution</groupId>\n+        <artifactId>docker</artifactId>\n+        <version>2.26.0-SNAPSHOT</version>\n+    </parent>\n+    <artifactId>ddf-solrcloud</artifactId>\n+    <groupId>ddf.distribution.docker</groupId>\n+    <packaging>pom</packaging>\n+    <name>DDF :: Distribution :: Docker :: SolrCloud</name>\n+\n+    <build>\n+        <resources>\n+            <resource>\n+                <directory>src/main/resources-filtered</directory>\n+                <filtering>true</filtering>\n+            </resource>\n+            <resource>\n+                <directory>src/main/resources</directory>\n+                <filtering>false</filtering>\n+            </resource>\n+        </resources>\n+        <plugins>\n+            <plugin>\n+                <artifactId>maven-clean-plugin</artifactId>\n+                <version>3.1.0</version>\n+                <configuration>\n+                    <!-- avoid directory clean failures on Windows due to exec command holding onto directory lock -->\n+                    <failOnError>false</failOnError>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6f9c7b2791d4c65154fe2233195589d9d86ac811"}, "originalPosition": 45}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc0ODk1OTY3", "url": "https://github.com/codice/ddf/pull/6264#pullrequestreview-474895967", "createdAt": "2020-08-25T21:05:02Z", "commit": {"oid": "6f9c7b2791d4c65154fe2233195589d9d86ac811"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQyMTowNTowMlrOHGpsEQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQyMTowNTowMlrOHGpsEQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjczNjUyOQ==", "bodyText": "\u2753 Why do we use a separate Jetty version for Solr? As far as I can tell, Solr just ends up using the version that's provided by Karaf", "url": "https://github.com/codice/ddf/pull/6264#discussion_r476736529", "createdAt": "2020-08-25T21:05:02Z", "author": {"login": "SmithJosh"}, "path": "pom.xml", "diffHunk": "@@ -215,7 +215,7 @@\n         <jboss-logging.version>3.3.1.Final</jboss-logging.version>\n         <jcodec.version>0.2.0_1</jcodec.version>\n         <jdom.bundle.version>1.1_4</jdom.bundle.version>\n-        <jetty.solr.version>9.4.19.v20190610</jetty.solr.version>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6f9c7b2791d4c65154fe2233195589d9d86ac811"}, "originalPosition": 4}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6f9c7b2791d4c65154fe2233195589d9d86ac811", "author": {"user": {"login": "pklinef", "name": "Phil Klinefelter"}}, "url": "https://github.com/codice/ddf/commit/6f9c7b2791d4c65154fe2233195589d9d86ac811", "committedDate": "2020-08-24T23:03:38Z", "message": "Upgrade to Solr 8.6.1\n\n- Converted solrcloud directory to maven module for version properties\n  and executing docker compose commands."}, "afterCommit": {"oid": "3ddc663bd68f63b553bd51fe4413babdfc7e427b", "author": {"user": {"login": "pklinef", "name": "Phil Klinefelter"}}, "url": "https://github.com/codice/ddf/commit/3ddc663bd68f63b553bd51fe4413babdfc7e427b", "committedDate": "2020-08-26T23:37:58Z", "message": "Upgrade to Solr 8.6.1\n\n- Converted solrcloud directory to maven module for version properties\n  and executing docker compose commands."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3ddc663bd68f63b553bd51fe4413babdfc7e427b", "author": {"user": {"login": "pklinef", "name": "Phil Klinefelter"}}, "url": "https://github.com/codice/ddf/commit/3ddc663bd68f63b553bd51fe4413babdfc7e427b", "committedDate": "2020-08-26T23:37:58Z", "message": "Upgrade to Solr 8.6.1\n\n- Converted solrcloud directory to maven module for version properties\n  and executing docker compose commands."}, "afterCommit": {"oid": "2822252815969176351176ce0f838be61dbd8cba", "author": {"user": {"login": "pklinef", "name": "Phil Klinefelter"}}, "url": "https://github.com/codice/ddf/commit/2822252815969176351176ce0f838be61dbd8cba", "committedDate": "2020-08-27T23:55:23Z", "message": "Upgrade to Solr 8.6.1\n\n- Converted solrcloud directory to maven module for version properties\n  and executing docker compose commands."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2822252815969176351176ce0f838be61dbd8cba", "author": {"user": {"login": "pklinef", "name": "Phil Klinefelter"}}, "url": "https://github.com/codice/ddf/commit/2822252815969176351176ce0f838be61dbd8cba", "committedDate": "2020-08-27T23:55:23Z", "message": "Upgrade to Solr 8.6.1\n\n- Converted solrcloud directory to maven module for version properties\n  and executing docker compose commands."}, "afterCommit": {"oid": "4341224fe09b4683e291da5db9c91a13e7abae33", "author": {"user": {"login": "pklinef", "name": "Phil Klinefelter"}}, "url": "https://github.com/codice/ddf/commit/4341224fe09b4683e291da5db9c91a13e7abae33", "committedDate": "2020-08-27T23:59:34Z", "message": "Upgrade to Solr 8.6.1\n\n- Converted solrcloud directory to maven module for version properties\n  and executing docker compose commands."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc3ODc2NTIx", "url": "https://github.com/codice/ddf/pull/6264#pullrequestreview-477876521", "createdAt": "2020-08-28T16:41:58Z", "commit": {"oid": "4341224fe09b4683e291da5db9c91a13e7abae33"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc3ODk5NTU1", "url": "https://github.com/codice/ddf/pull/6264#pullrequestreview-477899555", "createdAt": "2020-08-28T17:17:37Z", "commit": {"oid": "4341224fe09b4683e291da5db9c91a13e7abae33"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQxNzoxNzozOFrOHJOdXw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQxNzoxNzozOFrOHJOdXw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTQzNjEyNw==", "bodyText": "\u2754 Just curious, How did you come up with 50 lines for tailing the logs?", "url": "https://github.com/codice/ddf/pull/6264#discussion_r479436127", "createdAt": "2020-08-28T17:17:38Z", "author": {"login": "shaundmorris"}, "path": "distribution/docker/solrcloud/pom.xml", "diffHunk": "@@ -0,0 +1,132 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+/**\n+ * Copyright (c) Codice Foundation\n+ *\n+ * This is free software: you can redistribute it and/or modify it under the terms of the GNU Lesser General Public License as published by the Free Software Foundation, either\n+ * version 3 of the License, or any later version.\n+ *\n+ * This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n+ * See the GNU Lesser General Public License for more details. A copy of the GNU Lesser General Public License is distributed along with this program and can be found at\n+ * <http://www.gnu.org/licenses/lgpl.html>.\n+ *\n+ **/\n+-->\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd\">\n+    <modelVersion>4.0.0</modelVersion>\n+    <parent>\n+        <groupId>ddf.distribution</groupId>\n+        <artifactId>docker</artifactId>\n+        <version>2.26.0-SNAPSHOT</version>\n+    </parent>\n+    <artifactId>ddf-solrcloud</artifactId>\n+    <groupId>ddf.distribution.docker</groupId>\n+    <packaging>pom</packaging>\n+    <name>DDF :: Distribution :: Docker :: SolrCloud</name>\n+\n+    <build>\n+        <resources>\n+            <resource>\n+                <directory>src/main/resources-filtered</directory>\n+                <filtering>true</filtering>\n+            </resource>\n+            <resource>\n+                <directory>src/main/resources</directory>\n+                <filtering>false</filtering>\n+            </resource>\n+        </resources>\n+        <plugins>\n+            <plugin>\n+                <artifactId>maven-clean-plugin</artifactId>\n+                <version>3.1.0</version>\n+                <configuration>\n+                    <!-- avoid directory clean failures on Windows due to exec command holding onto directory lock -->\n+                    <failOnError>false</failOnError>\n+                </configuration>\n+            </plugin>\n+            <plugin>\n+                <groupId>org.codehaus.mojo</groupId>\n+                <artifactId>exec-maven-plugin</artifactId>\n+                <executions>\n+                    <execution>\n+                        <id>up</id>\n+                        <goals>\n+                            <goal>exec</goal>\n+                        </goals>\n+                        <configuration>\n+                            <executable>docker-compose</executable>\n+                            <arguments>\n+                                <argument>up</argument>\n+                                <argument>-d</argument>\n+                            </arguments>\n+                            <workingDirectory>${project.build.outputDirectory}</workingDirectory>\n+                        </configuration>\n+                    </execution>\n+                    <execution>\n+                        <id>logs</id>\n+                        <goals>\n+                            <goal>exec</goal>\n+                        </goals>\n+                        <configuration>\n+                            <executable>docker-compose</executable>\n+                            <arguments>\n+                                <argument>logs</argument>\n+                                <argument>--tail=50</argument>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4341224fe09b4683e291da5db9c91a13e7abae33"}, "originalPosition": 75}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc3OTQ5NzI0", "url": "https://github.com/codice/ddf/pull/6264#pullrequestreview-477949724", "createdAt": "2020-08-28T18:41:44Z", "commit": {"oid": "4341224fe09b4683e291da5db9c91a13e7abae33"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "60e95f61a22651a51c9301d16d27af7e0696f8ab", "author": {"user": {"login": "pklinef", "name": "Phil Klinefelter"}}, "url": "https://github.com/codice/ddf/commit/60e95f61a22651a51c9301d16d27af7e0696f8ab", "committedDate": "2020-08-28T20:12:06Z", "message": "Upgrade to Solr 8.6.1\n\n- Converted solrcloud directory to maven module for version properties\n  and executing docker compose commands."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4341224fe09b4683e291da5db9c91a13e7abae33", "author": {"user": {"login": "pklinef", "name": "Phil Klinefelter"}}, "url": "https://github.com/codice/ddf/commit/4341224fe09b4683e291da5db9c91a13e7abae33", "committedDate": "2020-08-27T23:59:34Z", "message": "Upgrade to Solr 8.6.1\n\n- Converted solrcloud directory to maven module for version properties\n  and executing docker compose commands."}, "afterCommit": {"oid": "60e95f61a22651a51c9301d16d27af7e0696f8ab", "author": {"user": {"login": "pklinef", "name": "Phil Klinefelter"}}, "url": "https://github.com/codice/ddf/commit/60e95f61a22651a51c9301d16d27af7e0696f8ab", "committedDate": "2020-08-28T20:12:06Z", "message": "Upgrade to Solr 8.6.1\n\n- Converted solrcloud directory to maven module for version properties\n  and executing docker compose commands."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 879, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}