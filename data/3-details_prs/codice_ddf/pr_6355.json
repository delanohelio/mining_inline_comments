{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk1MTEyNzQx", "number": 6355, "title": "[2.19.x] DDF-UI-396 Result Form shows 'Make Default Form' even though already default", "bodyText": "ddf-ui PRs:\n3.4.x codice/ddf-ui#398\n\nWhat does this PR do?\nIssue 1 - Unable to clear default Result Form if tried to switch Workspace Search Forms (works after refresh)\nIssue 2 - Unable to clear default Result Form if tried to select User custom Search Forms (still issue even after refresh)\nIssue 3 - Deleted Result Form is still selected when Updating a custom Search Forms if selected prior to its deletion\nIssue 4 - Deleted Result Form still appears in dropdown in Workspace Search\nIssue 5 - Exception is thrown when deleting a non-default Search Form\nIssue 6 - Updated Search form that saved \u201cAll Field\u201d in Search Form for Result form, gets overridden to existing default Result Form\nIssue 7 - \u201cUse Another Search Form\u201d in workspace do not show correct selected Search Form for dropdown\nIssue 8 - When default is removed from Search form, and there exists a default Result Form, if try to open new search form in workspace, default Result Form is not selected, instead \u201cAll Field\u201d is.\nWho is reviewing it?\n\n@andrewzimmer\n@hayleynorton\n@cassandrabailey293\n@zta6\nSelect relevant component teams:\nAsk 2 committers to review/merge the PR and tag them here.\n@bdeining\n@mojogitoverhere\nHow should this be tested?\n\n\nbuild / install\n\nIssue 1:\n\nOpen 'Result Forms' via the main menu ('hamburger') button\nCreate a Result Form and set as default via the 3 ellipse button . If you click on the ellipse, you'll see the 'Clear Default\u00a0Form'\nGo to Workspaces, open or click create a New Workspace\nClick on 'Search DDF Intrigue' or 'Create a Search'\nClick ellipse menu to switch to advance or basic or text search, just switch to something else then what was opened\nNow Open 'Result Forms' via the main menu ('hamburger') button\nGo to default Result Form, and click the ellipse menu button\nEnsure able to see the 'Clear Default\u00a0Form' and can click on it to clear default\n\nIssue 2:\n\nOpen 'Search Forms' via the main menu ('hamburger') button\nCreate a Search Form\nGo to Workspaces, open or click create a New Workspace\nClick on 'Search DDF Intrigue' or 'Create a Search'\nClick ellipse menu and click on 'Use Another Search Form'\nSelect a Search Form from drop down\nOpen 'Result Forms' via the main menu ('hamburger') button\nCreate a Result Form and set as default via the 3 ellipse button.\nClick the ellipse menu button again\nEnsure able to see the 'Clear Default\u00a0Form'\nRefresh page and Ensure and Ensure able to see the 'Clear Default\u00a0Form' and can click on it to clear default\n\nIssue 3:\n\nOpen 'Result Forms' via the main menu ('hamburger') button\nCreate couple Result Forms\nOpen 'Search Forms' via the main menu ('hamburger') button\nCreate a Search Form and make sure under 'Result Form' to select one of the created Result Forms\nNow Open 'Result Forms' via the main menu ('hamburger') button\nDelete a Result Form via the ellipse menu button\nGo to 'Search Forms'\nOpen previously created search form\nEnsure under 'Result Form', the deleted Result Form is not selected and does not appear in drop down list\nThis behavior should work same in Workspace for Advanced and Basic Search forms\n\nIssue 4:\n\nOpen 'Result Forms' via the main menu ('hamburger') button\nCreate couple Result Forms\nGo to Workspaces, open or click create a New Workspace\nClick on 'Search DDF Intrigue' or 'Create a Search'\nClick ellipse menu to switch to advance or basic search\nUnder 'Result Form' click drop down, should see all existing Result forms\nNow Open 'Result Forms' via the main menu ('hamburger') button\nDelete a Result Form via the ellipse menu button\nDo steps 3 to 6\nEnsure the deleted Result Form is not displayed in drop down list\nThis behavior should work same in create/update custom 'Search Forms'\n\nIssue 5:\n\nOpen 'Search Forms' via the main menu ('hamburger') button\nCreate couple Search Forms\nSet one as default via the 3 ellipse button\nPull up and clear console log\nTry to delete the non-default Search form\nEnsure no exception are thrown for each item deleted\n\nIssue 6:\n\nOpen 'Result Forms' via the main menu ('hamburger') button\nCreate couple Result Form and set one as default via the 3 ellipse button\nOpen 'Search Forms' via the main menu ('hamburger') button\nCreate a Search Form (Note-Under 'Result Form' the existing default Result Form that was created should be selected)\nSave changes\nOpen created Search Form and make sure under 'Result Form' to select \"All Field\"\nSave changes\nOpen updated Search Form\nEnsure under 'Result Form' the \"All Field\" option is selected. Can also try with other Result Forms that's not default.\n\nIssue 7:\n\nOpen 'Search Forms' via the main menu ('hamburger') button\nCreate couple Search Forms\nGo to Workspaces, open or click create a New Workspace\nClick on 'Search DDF Intrigue' or 'Create a Search'\nClick ellipse menu and click on 'Use Another Search Form'\nSelect a Search Form from drop down\nEnsure when do steps 4 to 5 again, the previously selected Search Form has 'check mark' next to it in list\nOpen 'Search Forms' via the main menu ('hamburger') button\nMake one of other Search Form that you have not selected in step 6, as default\nDo steps 3 to 5\nEnsure the Search Form presented is the default Search Form and the drop down for 'Use Another Search Form' has the default Search Form selected\n\nIssue 8:\n\nOpen 'Result Forms' via the main menu ('hamburger') button\nCreate a Result Form and set as default via the 3 ellipse button\nGo to Workspaces, open or click create a New Workspace\nClick on 'Search DDF Intrigue' or 'Create a Search'\nClick ellipse menu to switch to advance or basic search\nEnsure under 'Result Form', the default Result Form is selected\nOpen 'Search Forms' via the main menu ('hamburger') button\nCreate a Search Form\nSet created Search Form as default\nClear default from created Search Form\nDo steps 3 to 6\n\nAny background context you want to provide?\nWhat are the relevant tickets?\ncodice/ddf-ui#396\nScreenshots\n\nIssue 1 - Before\n\nIssue 1 - After\n\nIssue 2 - Before\n\nIssue 2 - After\n\nIssue 3 - Before\n\nIssue 3 - After\n\nIssue 4 - Before\n\nIssue 4 - After\n\nIssue 5 - Before\n\nIssue 5 - After\n\nIssue 6 - Before\n\nIssue 6 - After\n\nIssue 7 - Before\n\nIssue 7 - After\n\nIssue 8 - Before\n\nIssue 8 - After\n\nChecklist:\n\n Documentation Updated\n Update / Add Threat Dragon models\n Update / Add Unit Tests\n Update / Add Integration Tests\n\nNotes on Review Process\nPlease see Notes on Review Process for further guidance on requirements for merging and abbreviated reviews.\nReview Comment Legend:\n\n\u270f\ufe0f (Pencil) This comment is a nitpick or style suggestion, no action required for approval. This comment should provide a suggestion either as an in line code snippet or a gist.\n\u2753 (Question Mark) This comment is to gain a clearer understanding of design or code choices, clarification is required but action may not be necessary for approval.\n\u2757 (Exclamation Mark) This comment is critical and requires clarification or action before approval.", "createdAt": "2020-09-29T21:24:26Z", "url": "https://github.com/codice/ddf/pull/6355", "merged": true, "mergeCommit": {"oid": "fc9c864e335e7aaec45acd6a0e7e8585fabcfc96"}, "closed": true, "closedAt": "2020-10-21T15:52:47Z", "author": {"login": "abel-connexta"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdNu3AfAH2gAyNDk1MTEyNzQxOjVmZmJmZWE2ZTk1ZWM5Yzc5OGYwODIxZDU4ZTlkY2IwMDkwNDRiODI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdUbx81gFqTUxMjk0NTcyOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "5ffbfea6e95ec9c798f0821d58e9dcb009044b82", "author": {"user": {"login": "abel-connexta", "name": null}}, "url": "https://github.com/codice/ddf/commit/5ffbfea6e95ec9c798f0821d58e9dcb009044b82", "committedDate": "2020-09-29T21:13:58Z", "message": "DDF-UI-396 Result Form shows 'Make Default Form' even though already default"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAwNDg0NzY3", "url": "https://github.com/codice/ddf/pull/6355#pullrequestreview-500484767", "createdAt": "2020-10-01T15:45:57Z", "commit": {"oid": "5ffbfea6e95ec9c798f0821d58e9dcb009044b82"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAyMjcyMjA4", "url": "https://github.com/codice/ddf/pull/6355#pullrequestreview-502272208", "createdAt": "2020-10-05T17:30:36Z", "commit": {"oid": "5ffbfea6e95ec9c798f0821d58e9dcb009044b82"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQxNzozMDozN1rOHcm7UQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQxNzozMDozN1rOHcm7UQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTc1OTk1Mw==", "bodyText": "\u2753 Would this change impact how existing queries (i.e. queries created before this change) are handled ? I suspect it would be best if the code is able to handle both of these falsey values", "url": "https://github.com/codice/ddf/pull/6355#discussion_r499759953", "createdAt": "2020-10-05T17:30:37Z", "author": {"login": "mojogitoverhere"}, "path": "ui/packages/catalog-ui-search/src/main/webapp/js/model/Query.js", "diffHunk": "@@ -186,7 +186,7 @@ Query.Model = PartialAssociatedModel.extend({\n         type: 'text',\n         isLocal: false,\n         isOutdated: false,\n-        'detail-level': undefined,\n+        'detail-level': null,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5ffbfea6e95ec9c798f0821d58e9dcb009044b82"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAyMzA5NTgy", "url": "https://github.com/codice/ddf/pull/6355#pullrequestreview-502309582", "createdAt": "2020-10-05T18:22:55Z", "commit": {"oid": "5ffbfea6e95ec9c798f0821d58e9dcb009044b82"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEyOTEyMjcw", "url": "https://github.com/codice/ddf/pull/6355#pullrequestreview-512912270", "createdAt": "2020-10-20T16:18:59Z", "commit": {"oid": "5ffbfea6e95ec9c798f0821d58e9dcb009044b82"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEyOTQ1NzI4", "url": "https://github.com/codice/ddf/pull/6355#pullrequestreview-512945728", "createdAt": "2020-10-20T16:57:43Z", "commit": {"oid": "5ffbfea6e95ec9c798f0821d58e9dcb009044b82"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 770, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}