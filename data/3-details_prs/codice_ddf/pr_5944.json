{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkzODcwNjc1", "number": 5944, "title": "DDF-5940 - Add anyText expansion whitelist and blacklist", "bodyText": "What does this PR do?\nAdds the ability to provide a whitelist or blacklist for text fields that are included in an anyText query.\nWho is reviewing it?\n@bdeining\n@pklinef\nSelect relevant component teams:\n@codice/solr\nAsk 2 committers to review/merge the PR and tag them here.\n@andrewkfiedler\n@jlcsmith\nHow should this be tested?\n\nBuild and do a standard profile install\nIngest some data\nPerform an anyText query that will find the data\nIn the admin console, select the Solr Catalog application\nEdit the Solr Catalog Provider configuration\nAdd new whitelist or blacklist entries\n\n\nentries can be the field name as seen by DDF OR Solr (i.e. id or id_txt)\nentries can be regular expressions (i.e. to ignore all security fields use security.*)\n\n\nIn the admin console, select the Catalog application and choose Configuration\nEdit the Solr Cache Provider configuration\nAdd the same configuration here as in the Solr Catalog Provider configuration. This configures the cache the same as the catalog. Alternatively, you could disable the cache instead of doing this step.\nUsing the whitelist / blacklist capability to eliminate / restrict fields, perform a new query that would only hit against a removed field and verify that the result is no longer returned.\nModify the whitelist / blacklist configurations to allow that field in the anyText expansion, perform the same search again and verify that it now shows up again.\n\nA simple example to prove it works is to do a search for Adler32. This will return all ingested records because the ingest checksum uses the Adler32 algorithm. Then add a blacklist entry for checksum-algorithm and perform the search again. No results will show up unless your data also has Adler somewhere else in the data.\nAny background context you want to provide?\nWhat are the relevant tickets?\nFixes: #5940\nScreenshots\n\nChecklist:\n\n Documentation Updated\n Update / Add Threat Dragon models\n Update / Add Unit Tests\n Update / Add Integration Tests\n\nNotes on Review Process\nPlease see Notes on Review Process for further guidance on requirements for merging and abbreviated reviews.\nReview Comment Legend:\n\n\u270f\ufe0f (Pencil) This comment is a nitpick or style suggestion, no action required for approval. This comment should provide a suggestion either as an in line code snippet or a gist.\n\u2753 (Question Mark) This comment is to gain a clearer understanding of design or code choices, clarification is required but action may not be necessary for approval.\n\u2757 (Exclamation Mark) This comment is critical and requires clarification or action before approval.", "createdAt": "2020-03-25T23:03:44Z", "url": "https://github.com/codice/ddf/pull/5944", "merged": true, "mergeCommit": {"oid": "e25f56b44624d2e4d4a5f9b217f0b7316add3e74"}, "closed": true, "closedAt": "2020-04-05T20:28:42Z", "author": {"login": "derekwilhelm"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcRPUcXAH2gAyMzkzODcwNjc1OmM2Nzg2ZWE5MjYyOThkOGIyNTg1MjJhM2M5ZTk1OWZjODFjZWFlNzk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcUwG7tgFqTM4Nzg1NzY5Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c6786ea926298d8b258522a3c9e959fc81ceae79", "author": {"user": {"login": "derekwilhelm", "name": null}}, "url": "https://github.com/codice/ddf/commit/c6786ea926298d8b258522a3c9e959fc81ceae79", "committedDate": "2020-03-25T22:33:42Z", "message": "DDF-5940 - Add anyText expansion whitelist and blacklist"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1b227564d0a7b5f4db48e83aadb606b8d52bc400", "author": {"user": {"login": "derekwilhelm", "name": null}}, "url": "https://github.com/codice/ddf/commit/1b227564d0a7b5f4db48e83aadb606b8d52bc400", "committedDate": "2020-03-25T23:54:45Z", "message": "Allow both blacklist and whitelist at the same time"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgyMDg5MjU3", "url": "https://github.com/codice/ddf/pull/5944#pullrequestreview-382089257", "createdAt": "2020-03-26T14:53:23Z", "commit": {"oid": "1b227564d0a7b5f4db48e83aadb606b8d52bc400"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0105333ddb60b9da30e69a634bbefd33deadaec0", "author": {"user": {"login": "derekwilhelm", "name": null}}, "url": "https://github.com/codice/ddf/commit/0105333ddb60b9da30e69a634bbefd33deadaec0", "committedDate": "2020-03-26T21:18:07Z", "message": "Move filtering logic to DynamicSchemaResolver"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgyNDM1Mzcx", "url": "https://github.com/codice/ddf/pull/5944#pullrequestreview-382435371", "createdAt": "2020-03-26T21:30:47Z", "commit": {"oid": "0105333ddb60b9da30e69a634bbefd33deadaec0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQyMTozMDo0N1rOF8bOcg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQyMTozMDo0N1rOF8bOcg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODkwNDk0Ng==", "bodyText": "\u2753 The blueprint provide list is thread safe.  Is there another reason you are clearing and adding the elements?", "url": "https://github.com/codice/ddf/pull/5944#discussion_r398904946", "createdAt": "2020-03-26T21:30:47Z", "author": {"login": "pklinef"}, "path": "catalog/core/catalog-core-solr/src/main/java/ddf/catalog/source/solr/ConfigurationStore.java", "diffHunk": "@@ -78,9 +92,51 @@ public boolean isInMemory() {\n \n   public void setInMemory(boolean isInMemory) {\n     inMemory = isInMemory;\n+\n+    notifyListeners();\n   }\n \n   public void setForceAutoCommit(boolean forceAutoCommit) {\n     this.forceAutoCommit = forceAutoCommit;\n   }\n+\n+  public void setAnyTextFieldWhitelist(List<String> fieldWhitelist) {\n+    this.anyTextFieldWhitelist.clear();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0105333ddb60b9da30e69a634bbefd33deadaec0"}, "originalPosition": 62}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7e2f36811413641e6130639a44aa4c0567deabbb", "author": {"user": {"login": "derekwilhelm", "name": null}}, "url": "https://github.com/codice/ddf/commit/7e2f36811413641e6130639a44aa4c0567deabbb", "committedDate": "2020-03-26T23:09:27Z", "message": "Add unit tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg3ODU3Njk2", "url": "https://github.com/codice/ddf/pull/5944#pullrequestreview-387857696", "createdAt": "2020-04-05T20:27:35Z", "commit": {"oid": "7e2f36811413641e6130639a44aa4c0567deabbb"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4868, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}