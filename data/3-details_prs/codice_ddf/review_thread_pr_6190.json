{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDUzNzczMzIz", "number": 6190, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxNjo1NDo1M1rOEQtnEQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxODozMDo1N1rOERkUUw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg1OTU5OTUzOnYy", "diffSide": "RIGHT", "path": "platform/security/rest/security-rest-cxfwrapper/src/main/java/org/codice/ddf/cxf/client/interceptor/SubjectRetrievalInterceptor.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxNjo1NDo1M1rOG1BLSQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxNjo1NDo1M1rOG1BLSQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODI0Njk4NQ==", "bodyText": "\u270f\ufe0f Javadoc needs to be updated", "url": "https://github.com/codice/ddf/pull/6190#discussion_r458246985", "createdAt": "2020-07-21T16:54:53Z", "author": {"login": "SmithJosh"}, "path": "platform/security/rest/security-rest-cxfwrapper/src/main/java/org/codice/ddf/cxf/client/interceptor/SubjectRetrievalInterceptor.java", "diffHunk": "@@ -38,7 +38,7 @@\n  * that stores the receivers subject in the header of the response with a key of\n  * ddf.security.Subject.\n  */\n-public class OutgoingSubjectRetrievalInterceptor extends AbstractPhaseInterceptor<Message>\n+public class SubjectRetrievalInterceptor extends AbstractPhaseInterceptor<Message>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "21d47844c57ea260289f7535f27447134abc269b"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg1OTYxMTUyOnYy", "diffSide": "RIGHT", "path": "platform/security/rest/security-rest-clientapi/src/main/java/org/codice/ddf/cxf/client/ClientBuilder.java", "isResolved": true, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxNjo1Nzo0OVrOG1BSwA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQyMToyNTozOFrOG50Ysw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODI0ODg5Ng==", "bodyText": "\u2753 In what case would you set this to false?", "url": "https://github.com/codice/ddf/pull/6190#discussion_r458248896", "createdAt": "2020-07-21T16:57:49Z", "author": {"login": "SmithJosh"}, "path": "platform/security/rest/security-rest-clientapi/src/main/java/org/codice/ddf/cxf/client/ClientBuilder.java", "diffHunk": "@@ -188,4 +188,12 @@\n    * @return\n    */\n   ClientBuilder<T> useSamlEcp(boolean useSamlEcp);\n+\n+  /**\n+   * True will enable the use of the SubjectRetrievalInterceptor for this client.\n+   *\n+   * @param useSubjectRetrievalInterceptor\n+   * @return\n+   */\n+  ClientBuilder<T> useSubjectRetrievalInterceptor(boolean useSubjectRetrievalInterceptor);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "21d47844c57ea260289f7535f27447134abc269b"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTY0Njc1MQ==", "bodyText": "Sorry, I'm still a little unclear here. What's the use case where the subject retrieval interceptor would not be used?", "url": "https://github.com/codice/ddf/pull/6190#discussion_r459646751", "createdAt": "2020-07-23T18:29:46Z", "author": {"login": "SmithJosh"}, "path": "platform/security/rest/security-rest-clientapi/src/main/java/org/codice/ddf/cxf/client/ClientBuilder.java", "diffHunk": "@@ -188,4 +188,12 @@\n    * @return\n    */\n   ClientBuilder<T> useSamlEcp(boolean useSamlEcp);\n+\n+  /**\n+   * True will enable the use of the SubjectRetrievalInterceptor for this client.\n+   *\n+   * @param useSubjectRetrievalInterceptor\n+   * @return\n+   */\n+  ClientBuilder<T> useSubjectRetrievalInterceptor(boolean useSubjectRetrievalInterceptor);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODI0ODg5Ng=="}, "originalCommit": {"oid": "21d47844c57ea260289f7535f27447134abc269b"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzIyNTI0OQ==", "bodyText": "I don't have a very clear grasp on it either since I was focusing on preserving functionality. But I think I know its use.\nWhat I know:\nLets say DDF1 subscribes to DDF2 through CSW by sending a subscription request. The subscription request contains a query and says \"Hey, every time you (DDF2) update your catalog with an entry that matches the given query, I want you to send me (DDF1) those updates\".\nWhat I think I know:\nNow when DDF2 updates is catalog appropriately, it needs to run the query and possible return results to DDF1. But that query might contain sensitive information that DDF1 isn't allowed to see, so before DDF2 runs the query it uses the SubjectRetreivalInterceptor to grab the certificates of DDF1, creates a subject, and runs the query as that subject in order to filter results DDF1 shouldn't see.", "url": "https://github.com/codice/ddf/pull/6190#discussion_r463225249", "createdAt": "2020-07-30T19:35:13Z", "author": {"login": "bakejeyner"}, "path": "platform/security/rest/security-rest-clientapi/src/main/java/org/codice/ddf/cxf/client/ClientBuilder.java", "diffHunk": "@@ -188,4 +188,12 @@\n    * @return\n    */\n   ClientBuilder<T> useSamlEcp(boolean useSamlEcp);\n+\n+  /**\n+   * True will enable the use of the SubjectRetrievalInterceptor for this client.\n+   *\n+   * @param useSubjectRetrievalInterceptor\n+   * @return\n+   */\n+  ClientBuilder<T> useSubjectRetrievalInterceptor(boolean useSubjectRetrievalInterceptor);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODI0ODg5Ng=="}, "originalCommit": {"oid": "21d47844c57ea260289f7535f27447134abc269b"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzIyODA3OQ==", "bodyText": "The original javadoc says \"stores the receivers subject in the header of the response with a key of ddf.security.Subject.\"\nNot sure why we would care about the subject in a response.", "url": "https://github.com/codice/ddf/pull/6190#discussion_r463228079", "createdAt": "2020-07-30T19:40:43Z", "author": {"login": "bakejeyner"}, "path": "platform/security/rest/security-rest-clientapi/src/main/java/org/codice/ddf/cxf/client/ClientBuilder.java", "diffHunk": "@@ -188,4 +188,12 @@\n    * @return\n    */\n   ClientBuilder<T> useSamlEcp(boolean useSamlEcp);\n+\n+  /**\n+   * True will enable the use of the SubjectRetrievalInterceptor for this client.\n+   *\n+   * @param useSubjectRetrievalInterceptor\n+   * @return\n+   */\n+  ClientBuilder<T> useSubjectRetrievalInterceptor(boolean useSubjectRetrievalInterceptor);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODI0ODg5Ng=="}, "originalCommit": {"oid": "21d47844c57ea260289f7535f27447134abc269b"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzI4MDMwNw==", "bodyText": "Not sure why we would care about the subject in a response.\n\nI don't get that either. Thanks for the explanation though \ud83d\ude04", "url": "https://github.com/codice/ddf/pull/6190#discussion_r463280307", "createdAt": "2020-07-30T21:25:38Z", "author": {"login": "SmithJosh"}, "path": "platform/security/rest/security-rest-clientapi/src/main/java/org/codice/ddf/cxf/client/ClientBuilder.java", "diffHunk": "@@ -188,4 +188,12 @@\n    * @return\n    */\n   ClientBuilder<T> useSamlEcp(boolean useSamlEcp);\n+\n+  /**\n+   * True will enable the use of the SubjectRetrievalInterceptor for this client.\n+   *\n+   * @param useSubjectRetrievalInterceptor\n+   * @return\n+   */\n+  ClientBuilder<T> useSubjectRetrievalInterceptor(boolean useSubjectRetrievalInterceptor);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODI0ODg5Ng=="}, "originalCommit": {"oid": "21d47844c57ea260289f7535f27447134abc269b"}, "originalPosition": 11}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg2ODU2Mjc1OnYy", "diffSide": "RIGHT", "path": "catalog/spatial/csw/spatial-csw-endpoint/src/main/java/org/codice/ddf/spatial/ogc/csw/catalog/endpoint/event/SendEvent.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxODozMDo1N1rOG2Wp4Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxODozMDo1N1rOG2Wp4Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTY0NzQ1Nw==", "bodyText": "This uses the old api method", "url": "https://github.com/codice/ddf/pull/6190#discussion_r459647457", "createdAt": "2020-07-23T18:30:57Z", "author": {"login": "SmithJosh"}, "path": "catalog/spatial/csw/spatial-csw-endpoint/src/main/java/org/codice/ddf/spatial/ogc/csw/catalog/endpoint/event/SendEvent.java", "diffHunk": "@@ -156,11 +154,11 @@ public SendEvent(\n               .interfaceClass(CswSubscribe.class)\n               .entityProviders(providers)\n               .useSamlEcp(true)\n+              .useSubjectRetrievalInterceptor(true)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "65d8b8cd64ccb817dd5f1fb6402d95fe39f6352f"}, "originalPosition": 22}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4523, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}