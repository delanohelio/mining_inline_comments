{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE4MzAzMjg1", "number": 6062, "title": "DDF-6061 Remove all uses of deprecated mockito-all dependency", "bodyText": "What does this PR do?\nRemoves all uses of mockito-all and fixes unit tests to work with mockito-core 2.8\nWho is reviewing it?\n\n@bakejeyner @blen-desta @garrettfreibott @stustison\nAlso, tagging @ahoffer\nSelect relevant component teams:\n@codice/test\nHow should this be tested?\nFull build, making sure all tests pass\nAny background context you want to provide?\nWhat are the relevant tickets?\nFixes: #6061\nScreenshots\n\nChecklist:\n\n Documentation Updated\n Update / Add Threat Dragon models\n Update / Add Unit Tests\n Update / Add Integration Tests\n\nNotes on Review Process\nPlease see Notes on Review Process for further guidance on requirements for merging and abbreviated reviews.\nReview Comment Legend:\n\n\u270f\ufe0f (Pencil) This comment is a nitpick or style suggestion, no action required for approval. This comment should provide a suggestion either as an in line code snippet or a gist.\n\u2753 (Question Mark) This comment is to gain a clearer understanding of design or code choices, clarification is required but action may not be necessary for approval.\n\u2757 (Exclamation Mark) This comment is critical and requires clarification or action before approval.", "createdAt": "2020-05-14T23:56:08Z", "url": "https://github.com/codice/ddf/pull/6062", "merged": true, "mergeCommit": {"oid": "1221948ba0ae33c27d7e6f166b46ba3b79b39c79"}, "closed": true, "closedAt": "2020-05-28T18:39:56Z", "author": {"login": "SmithJosh"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcikvZ0AH2gAyNDE4MzAzMjg1OmZjMzc1MGViNTUyNWI0YzYzNmY2ZThhZGU5NjU5NDNmZDAzMzU0MmE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABclx3JmAFqTQyMDM2NDUyNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "fc3750eb5525b4c636f6e8ade965943fd033542a", "author": {"user": {"login": "SmithJosh", "name": "Joshua Smith"}}, "url": "https://github.com/codice/ddf/commit/fc3750eb5525b4c636f6e8ade965943fd033542a", "committedDate": "2020-05-18T19:07:52Z", "message": "DDF-6061 Remove deprecated mockito-all dependency"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f74f7660a5ca6ef2159bb4e81d47bc7ed362eea1", "author": {"user": {"login": "SmithJosh", "name": "Joshua Smith"}}, "url": "https://github.com/codice/ddf/commit/f74f7660a5ca6ef2159bb4e81d47bc7ed362eea1", "committedDate": "2020-05-18T19:08:22Z", "message": "DDF-6061 Replace deprecated Matchers class with ArgumentMatchers interface"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7e35093fd0d28f9ccdbcfac874a33a691e62e606", "author": {"user": {"login": "SmithJosh", "name": "Joshua Smith"}}, "url": "https://github.com/codice/ddf/commit/7e35093fd0d28f9ccdbcfac874a33a691e62e606", "committedDate": "2020-05-18T19:08:34Z", "message": "DDF-6061 Correct ArgumentMatcher implementations"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8ad7bf911cd5c65c0bab824facc6532187e40010", "author": {"user": {"login": "SmithJosh", "name": "Joshua Smith"}}, "url": "https://github.com/codice/ddf/commit/8ad7bf911cd5c65c0bab824facc6532187e40010", "committedDate": "2020-05-18T19:08:34Z", "message": "DDF-6061 Fix argThat usages"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dd283912cbccefe460a14934e1f209df588cda09", "author": {"user": {"login": "SmithJosh", "name": "Joshua Smith"}}, "url": "https://github.com/codice/ddf/commit/dd283912cbccefe460a14934e1f209df588cda09", "committedDate": "2020-05-18T19:08:35Z", "message": "DDF-6061 Fix getArgumentAt uses"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "800e38565faf01f9b558c658860edb024ab3d199", "author": {"user": {"login": "SmithJosh", "name": "Joshua Smith"}}, "url": "https://github.com/codice/ddf/commit/800e38565faf01f9b558c658860edb024ab3d199", "committedDate": "2020-05-18T19:08:35Z", "message": "DDF-6061 Replace org.mockito.runners.MockitoJUnitRunner with org.mockito.junit.MockitoJUnitRunner"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d94b49eeba9627730d724ae8ad4e785bff52ef62", "author": {"user": {"login": "SmithJosh", "name": "Joshua Smith"}}, "url": "https://github.com/codice/ddf/commit/d94b49eeba9627730d724ae8ad4e785bff52ef62", "committedDate": "2020-05-18T19:08:35Z", "message": "DDF-6061 Update deprecated Mockito matcher methods"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzODc0ODI3", "url": "https://github.com/codice/ddf/pull/6062#pullrequestreview-413874827", "createdAt": "2020-05-18T19:21:29Z", "commit": {"oid": "20236c756b5159f8ee62efc3957046939a7cf959"}, "state": "APPROVED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxOToyMTozMFrOGXEeLQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQyMDozMjoxM1rOGXGh0w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjg0MzY5Mw==", "bodyText": "I think it would be better if we add this login in the getWebClientForSubject method instead.", "url": "https://github.com/codice/ddf/pull/6062#discussion_r426843693", "createdAt": "2020-05-18T19:21:30Z", "author": {"login": "blen-desta"}, "path": "catalog/opensearch/catalog-opensearch-source/src/main/java/org/codice/ddf/opensearch/source/OpenSearchSource.java", "diffHunk": "@@ -1161,7 +1161,9 @@ private RestUrl newRestUrl(String url) {\n    */\n   private WebClient newOpenSearchClient(String url, Subject subj) {\n     SecureCxfClientFactory<OpenSearch> clientFactory = createClientFactory(url, username, password);\n-    return clientFactory.getWebClientForSubject(subj);\n+    return (subj != null)\n+        ? clientFactory.getWebClientForSubject(subj)\n+        : clientFactory.getWebClient();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "20236c756b5159f8ee62efc3957046939a7cf959"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjg3NzMwMg==", "bodyText": "Same comment as above", "url": "https://github.com/codice/ddf/pull/6062#discussion_r426877302", "createdAt": "2020-05-18T20:31:59Z", "author": {"login": "blen-desta"}, "path": "catalog/spatial/csw/spatial-csw-source-common/src/main/java/org/codice/ddf/spatial/ogc/csw/catalog/common/source/AbstractCswSource.java", "diffHunk": "@@ -794,7 +794,7 @@ public boolean isAvailable(SourceMonitor sourceMonitor) {\n   @Override\n   public SourceResponse query(QueryRequest queryRequest) throws UnsupportedQueryException {\n     Subject subject = (Subject) queryRequest.getPropertyValue(SecurityConstants.SECURITY_SUBJECT);\n-    Csw csw = factory.getClientForSubject(subject);\n+    Csw csw = (subject != null) ? factory.getClientForSubject(subject) : factory.getClient();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "20236c756b5159f8ee62efc3957046939a7cf959"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjg3NzM5NQ==", "bodyText": "Same comment as above", "url": "https://github.com/codice/ddf/pull/6062#discussion_r426877395", "createdAt": "2020-05-18T20:32:13Z", "author": {"login": "blen-desta"}, "path": "catalog/spatial/csw/spatial-csw-source-common/src/main/java/org/codice/ddf/spatial/ogc/csw/catalog/common/source/AbstractCswSource.java", "diffHunk": "@@ -985,9 +985,8 @@ public ResourceResponse retrieveResource(\n   private ResourceResponse retrieveResourceById(\n       Map<String, Serializable> requestProperties, String metacardId)\n       throws ResourceNotFoundException {\n-    Csw csw =\n-        factory.getClientForSubject(\n-            (Subject) requestProperties.get(SecurityConstants.SECURITY_SUBJECT));\n+    Subject subject = (Subject) requestProperties.get(SecurityConstants.SECURITY_SUBJECT);\n+    Csw csw = (subject != null) ? factory.getClientForSubject(subject) : factory.getClient();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "20236c756b5159f8ee62efc3957046939a7cf959"}, "originalPosition": 17}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0aa9f86c702a8e10db016a3d012224a309e09689", "author": {"user": {"login": "SmithJosh", "name": "Joshua Smith"}}, "url": "https://github.com/codice/ddf/commit/0aa9f86c702a8e10db016a3d012224a309e09689", "committedDate": "2020-05-18T23:08:16Z", "message": "DDF-6061 Fix tests"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "20236c756b5159f8ee62efc3957046939a7cf959", "author": {"user": {"login": "SmithJosh", "name": "Joshua Smith"}}, "url": "https://github.com/codice/ddf/commit/20236c756b5159f8ee62efc3957046939a7cf959", "committedDate": "2020-05-14T23:48:56Z", "message": "DDF-6061 Fix tests"}, "afterCommit": {"oid": "0aa9f86c702a8e10db016a3d012224a309e09689", "author": {"user": {"login": "SmithJosh", "name": "Joshua Smith"}}, "url": "https://github.com/codice/ddf/commit/0aa9f86c702a8e10db016a3d012224a309e09689", "committedDate": "2020-05-18T23:08:16Z", "message": "DDF-6061 Fix tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE0NzE5NjUx", "url": "https://github.com/codice/ddf/pull/6062#pullrequestreview-414719651", "createdAt": "2020-05-19T18:34:51Z", "commit": {"oid": "0aa9f86c702a8e10db016a3d012224a309e09689"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxODozNDo1MVrOGXtiAg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxODozNDo1MVrOGXtiAg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzUxNjQxOA==", "bodyText": "\u270f\ufe0f If we are expecting a Boolean to be here instead of a boolean, it might be worth changing the variable type.", "url": "https://github.com/codice/ddf/pull/6062#discussion_r427516418", "createdAt": "2020-05-19T18:34:51Z", "author": {"login": "bakejeyner"}, "path": "catalog/spatial/wfs/1.1.0/spatial-wfs-v1_1_0-source/src/main/java/org/codice/ddf/spatial/ogc/wfs/v110/catalog/source/WfsSource.java", "diffHunk": "@@ -230,7 +230,7 @@\n \n   private String srsName;\n \n-  private boolean allowRedirects;\n+  private boolean allowRedirects = Boolean.FALSE;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0aa9f86c702a8e10db016a3d012224a309e09689"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3MDE4OTMx", "url": "https://github.com/codice/ddf/pull/6062#pullrequestreview-417018931", "createdAt": "2020-05-22T15:55:45Z", "commit": {"oid": "0aa9f86c702a8e10db016a3d012224a309e09689"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIwMzY0NTI0", "url": "https://github.com/codice/ddf/pull/6062#pullrequestreview-420364524", "createdAt": "2020-05-28T18:06:52Z", "commit": {"oid": "0aa9f86c702a8e10db016a3d012224a309e09689"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 909, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}