{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEzMjA2MjY5", "number": 6041, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQyMjoyNTowMVrOD5MAEg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjoyMDoxN1rOD8JA3A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYxMjkyMDUwOnYy", "diffSide": "RIGHT", "path": "platform/solr/solr-factory-impl/src/main/java/org/codice/solr/factory/impl/CollectionConfig.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQyMjoyNTowMVrOGQUbHg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQyMjo1OTo1NVrOGQVMKg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTc2NTAyMg==", "bodyText": "\u2753 Should we be creating this FileInputStream with a try-with-resources? Properties::load states\n\nThe specified stream remains open after this method returns.", "url": "https://github.com/codice/ddf/pull/6041#discussion_r419765022", "createdAt": "2020-05-04T22:25:01Z", "author": {"login": "rzwiefel"}, "path": "platform/solr/solr-factory-impl/src/main/java/org/codice/solr/factory/impl/CollectionConfig.java", "diffHunk": "@@ -0,0 +1,91 @@\n+/**\n+ * Copyright (c) Codice Foundation\n+ *\n+ * <p>This is free software: you can redistribute it and/or modify it under the terms of the GNU\n+ * Lesser General Public License as published by the Free Software Foundation, either version 3 of\n+ * the License, or any later version.\n+ *\n+ * <p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;\n+ * without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n+ * GNU Lesser General Public License for more details. A copy of the GNU Lesser General Public\n+ * License is distributed along with this program and can be found at\n+ * <http://www.gnu.org/licenses/lgpl.html>.\n+ */\n+package org.codice.solr.factory.impl;\n+\n+import java.io.File;\n+import java.io.FileInputStream;\n+import java.io.IOException;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+import java.util.Properties;\n+import org.apache.commons.lang.math.NumberUtils;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+public class CollectionConfig {\n+\n+  private static final Logger LOGGER = LoggerFactory.getLogger(CollectionConfig.class);\n+\n+  private final int shardCount;\n+\n+  private final int replicationFactor;\n+\n+  private final int maximumShardsPerNode;\n+\n+  public CollectionConfig(String collection) {\n+    this(collection, Paths.get(System.getProperty(\"ddf.home\", \"\"), \"etc/solr/configsets\"));\n+  }\n+\n+  public CollectionConfig(String collection, Path collectionConfigs) {\n+    File matchingConfig =\n+        collectionConfigs.resolve(Paths.get(collection, \"collection.properties\")).toFile();\n+    Properties collectionProps = new Properties();\n+    if (matchingConfig.exists()) {\n+      try {\n+        collectionProps.load(new FileInputStream(matchingConfig));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e8c876ca28b5dc5487890f9614a1c925f151c31c"}, "originalPosition": 46}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTc3NzU3OA==", "bodyText": "Oops. Yes, I forgot to clean this up. Fixed.", "url": "https://github.com/codice/ddf/pull/6041#discussion_r419777578", "createdAt": "2020-05-04T22:59:55Z", "author": {"login": "pklinef"}, "path": "platform/solr/solr-factory-impl/src/main/java/org/codice/solr/factory/impl/CollectionConfig.java", "diffHunk": "@@ -0,0 +1,91 @@\n+/**\n+ * Copyright (c) Codice Foundation\n+ *\n+ * <p>This is free software: you can redistribute it and/or modify it under the terms of the GNU\n+ * Lesser General Public License as published by the Free Software Foundation, either version 3 of\n+ * the License, or any later version.\n+ *\n+ * <p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;\n+ * without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n+ * GNU Lesser General Public License for more details. A copy of the GNU Lesser General Public\n+ * License is distributed along with this program and can be found at\n+ * <http://www.gnu.org/licenses/lgpl.html>.\n+ */\n+package org.codice.solr.factory.impl;\n+\n+import java.io.File;\n+import java.io.FileInputStream;\n+import java.io.IOException;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+import java.util.Properties;\n+import org.apache.commons.lang.math.NumberUtils;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+public class CollectionConfig {\n+\n+  private static final Logger LOGGER = LoggerFactory.getLogger(CollectionConfig.class);\n+\n+  private final int shardCount;\n+\n+  private final int replicationFactor;\n+\n+  private final int maximumShardsPerNode;\n+\n+  public CollectionConfig(String collection) {\n+    this(collection, Paths.get(System.getProperty(\"ddf.home\", \"\"), \"etc/solr/configsets\"));\n+  }\n+\n+  public CollectionConfig(String collection, Path collectionConfigs) {\n+    File matchingConfig =\n+        collectionConfigs.resolve(Paths.get(collection, \"collection.properties\")).toFile();\n+    Properties collectionProps = new Properties();\n+    if (matchingConfig.exists()) {\n+      try {\n+        collectionProps.load(new FileInputStream(matchingConfig));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTc2NTAyMg=="}, "originalCommit": {"oid": "e8c876ca28b5dc5487890f9614a1c925f151c31c"}, "originalPosition": 46}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY0Mzg4ODI4OnYy", "diffSide": "RIGHT", "path": "platform/solr/solr-factory-impl/src/test/java/org/codice/solr/factory/impl/CollectionConfigTest.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjoyMDoxN1rOGU5fGw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QyMDowOTo0MFrOGVBvMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDU2NjU1NQ==", "bodyText": "do the coverage numbers change with this addition?", "url": "https://github.com/codice/ddf/pull/6041#discussion_r424566555", "createdAt": "2020-05-13T16:20:17Z", "author": {"login": "bdeining"}, "path": "platform/solr/solr-factory-impl/src/test/java/org/codice/solr/factory/impl/CollectionConfigTest.java", "diffHunk": "@@ -0,0 +1,61 @@\n+/**\n+ * Copyright (c) Codice Foundation\n+ *\n+ * <p>This is free software: you can redistribute it and/or modify it under the terms of the GNU\n+ * Lesser General Public License as published by the Free Software Foundation, either version 3 of\n+ * the License, or any later version.\n+ *\n+ * <p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;\n+ * without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n+ * GNU Lesser General Public License for more details. A copy of the GNU Lesser General Public\n+ * License is distributed along with this program and can be found at\n+ * <http://www.gnu.org/licenses/lgpl.html>.\n+ */\n+package org.codice.solr.factory.impl;\n+\n+import static org.hamcrest.core.Is.is;\n+import static org.junit.Assert.assertThat;\n+\n+import java.io.File;\n+import java.io.IOException;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+import org.junit.Rule;\n+import org.junit.Test;\n+import org.junit.rules.TemporaryFolder;\n+\n+public class CollectionConfigTest {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "18e8bcfaf06e547974a70cca3a3325cbd0d96b0c"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDcwMTc0Ng==", "bodyText": "Maybe but I suspect it is probably much smaller than lenient variance.", "url": "https://github.com/codice/ddf/pull/6041#discussion_r424701746", "createdAt": "2020-05-13T20:09:40Z", "author": {"login": "pklinef"}, "path": "platform/solr/solr-factory-impl/src/test/java/org/codice/solr/factory/impl/CollectionConfigTest.java", "diffHunk": "@@ -0,0 +1,61 @@\n+/**\n+ * Copyright (c) Codice Foundation\n+ *\n+ * <p>This is free software: you can redistribute it and/or modify it under the terms of the GNU\n+ * Lesser General Public License as published by the Free Software Foundation, either version 3 of\n+ * the License, or any later version.\n+ *\n+ * <p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;\n+ * without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n+ * GNU Lesser General Public License for more details. A copy of the GNU Lesser General Public\n+ * License is distributed along with this program and can be found at\n+ * <http://www.gnu.org/licenses/lgpl.html>.\n+ */\n+package org.codice.solr.factory.impl;\n+\n+import static org.hamcrest.core.Is.is;\n+import static org.junit.Assert.assertThat;\n+\n+import java.io.File;\n+import java.io.IOException;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+import org.junit.Rule;\n+import org.junit.Test;\n+import org.junit.rules.TemporaryFolder;\n+\n+public class CollectionConfigTest {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDU2NjU1NQ=="}, "originalCommit": {"oid": "18e8bcfaf06e547974a70cca3a3325cbd0d96b0c"}, "originalPosition": 27}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4757, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}