{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY4ODM1Nzc5", "number": 5806, "reviewThreads": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMFQxNTowMDo1MlrODb8jfA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNlQyMDo0NDoxNFrODd0xCg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMwNjMwMjY4OnYy", "diffSide": "RIGHT", "path": "catalog/ui/catalog-ui-search/src/main/java/org/codice/ddf/catalog/ui/query/handlers/CqlTransformHandler.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMFQxNTowMDo1MlrOFjuGtw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMFQxNzowOTo1M1rOFjy5-Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mjk5OTg2Mw==", "bodyText": "\u2753 Do we still need EndpointUtil in this class?", "url": "https://github.com/codice/ddf/pull/5806#discussion_r372999863", "createdAt": "2020-01-30T15:00:52Z", "author": {"login": "cassandrabailey293"}, "path": "catalog/ui/catalog-ui-search/src/main/java/org/codice/ddf/catalog/ui/query/handlers/CqlTransformHandler.java", "diffHunk": "@@ -38,8 +38,9 @@\n import org.apache.tika.mime.MimeTypeException;\n import org.apache.tika.mime.MimeTypes;\n import org.codice.ddf.catalog.ui.metacard.transform.CsvTransform;\n-import org.codice.ddf.catalog.ui.query.cql.CqlQueryResponse;\n-import org.codice.ddf.catalog.ui.query.cql.CqlRequest;\n+import org.codice.ddf.catalog.ui.query.utility.CqlQueryResponse;\n+import org.codice.ddf.catalog.ui.query.utility.CqlRequest;\n+import org.codice.ddf.catalog.ui.util.CqlQueryUtil;\n import org.codice.ddf.catalog.ui.util.EndpointUtil;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1777c3ac350e61be0512a170ec862bb5b8ba86e3"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzA3ODUyMQ==", "bodyText": "yeah other functions from endpointUtil are used https://github.com/codice/ddf/pull/5806/files/1777c3ac350e61be0512a170ec862bb5b8ba86e3#diff-cc5f97af83867437776fddd13f08d36bR124", "url": "https://github.com/codice/ddf/pull/5806#discussion_r373078521", "createdAt": "2020-01-30T17:09:53Z", "author": {"login": "andrewzimmer"}, "path": "catalog/ui/catalog-ui-search/src/main/java/org/codice/ddf/catalog/ui/query/handlers/CqlTransformHandler.java", "diffHunk": "@@ -38,8 +38,9 @@\n import org.apache.tika.mime.MimeTypeException;\n import org.apache.tika.mime.MimeTypes;\n import org.codice.ddf.catalog.ui.metacard.transform.CsvTransform;\n-import org.codice.ddf.catalog.ui.query.cql.CqlQueryResponse;\n-import org.codice.ddf.catalog.ui.query.cql.CqlRequest;\n+import org.codice.ddf.catalog.ui.query.utility.CqlQueryResponse;\n+import org.codice.ddf.catalog.ui.query.utility.CqlRequest;\n+import org.codice.ddf.catalog.ui.util.CqlQueryUtil;\n import org.codice.ddf.catalog.ui.util.EndpointUtil;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mjk5OTg2Mw=="}, "originalCommit": {"oid": "1777c3ac350e61be0512a170ec862bb5b8ba86e3"}, "originalPosition": 9}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMwNjQ2ODA2OnYy", "diffSide": "RIGHT", "path": "catalog/ui/catalog-ui-search-api/src/main/java/org/codice/ddf/catalog/ui/query/utility/MetacardAttribute.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMFQxNTo0MzowMVrOFjvuTg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMFQxNzowODozOVrOFjy3hQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzAyNjM4Mg==", "bodyText": "missing copyright headers", "url": "https://github.com/codice/ddf/pull/5806#discussion_r373026382", "createdAt": "2020-01-30T15:43:01Z", "author": {"login": "bdeining"}, "path": "catalog/ui/catalog-ui-search-api/src/main/java/org/codice/ddf/catalog/ui/query/utility/MetacardAttribute.java", "diffHunk": "@@ -0,0 +1,10 @@\n+package org.codice.ddf.catalog.ui.query.utility;\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1777c3ac350e61be0512a170ec862bb5b8ba86e3"}, "originalPosition": 2}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzA3Nzg5Mw==", "bodyText": "added", "url": "https://github.com/codice/ddf/pull/5806#discussion_r373077893", "createdAt": "2020-01-30T17:08:39Z", "author": {"login": "andrewzimmer"}, "path": "catalog/ui/catalog-ui-search-api/src/main/java/org/codice/ddf/catalog/ui/query/utility/MetacardAttribute.java", "diffHunk": "@@ -0,0 +1,10 @@\n+package org.codice.ddf.catalog.ui.query.utility;\n+", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzAyNjM4Mg=="}, "originalCommit": {"oid": "1777c3ac350e61be0512a170ec862bb5b8ba86e3"}, "originalPosition": 2}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMxNTQxOTE2OnYy", "diffSide": "RIGHT", "path": "catalog/ui/catalog-ui-search-api/src/main/java/org/codice/ddf/catalog/ui/query/utility/CqlQueryResponse.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QyMzo1MDoyMlrOFlD9_g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QyMzo1MDoyMlrOFlD9_g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDQwNjY1NA==", "bodyText": "we might want to mark the interfaces as experimental\n\n  \n    \n      ddf/catalog/core/catalog-core-attachment/src/main/java/org/codice/ddf/attachment/AttachmentInfo.java\n    \n    \n         Line 18\n      in\n      b054ac2\n    \n    \n    \n    \n\n        \n          \n           /**", "url": "https://github.com/codice/ddf/pull/5806#discussion_r374406654", "createdAt": "2020-02-03T23:50:22Z", "author": {"login": "bdeining"}, "path": "catalog/ui/catalog-ui-search-api/src/main/java/org/codice/ddf/catalog/ui/query/utility/CqlQueryResponse.java", "diffHunk": "@@ -0,0 +1,34 @@\n+/**\n+ * Copyright (c) Codice Foundation\n+ *\n+ * <p>This is free software: you can redistribute it and/or modify it under the terms of the GNU\n+ * Lesser General Public License as published by the Free Software Foundation, either version 3 of\n+ * the License, or any later version.\n+ *\n+ * <p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;\n+ * without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n+ * GNU Lesser General Public License for more details. A copy of the GNU Lesser General Public\n+ * License is distributed along with this program and can be found at\n+ * <http://www.gnu.org/licenses/lgpl.html>.\n+ */\n+package org.codice.ddf.catalog.ui.query.utility;\n+\n+import ddf.catalog.operation.QueryResponse;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Set;\n+\n+public interface CqlQueryResponse {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cc289002388eefcfb65cb001712293e98c9796ab"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMxODEwNTg5OnYy", "diffSide": "RIGHT", "path": "catalog/ui/catalog-ui-search/src/main/java/org/codice/ddf/catalog/ui/util/CqlQueryUtil.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNFQxNzo1NTo1M1rOFldtIA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNFQxNzo1NTo1M1rOFldtIA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDgyODMyMA==", "bodyText": "\u2753 How about CqlQueries and CqlQueriesImpl instead? It's minor but this will surprise anyone not familiar with Java conventions.", "url": "https://github.com/codice/ddf/pull/5806#discussion_r374828320", "createdAt": "2020-02-04T17:55:53Z", "author": {"login": "Lambeaux"}, "path": "catalog/ui/catalog-ui-search/src/main/java/org/codice/ddf/catalog/ui/util/CqlQueryUtil.java", "diffHunk": "@@ -0,0 +1,141 @@\n+/**\n+ * Copyright (c) Codice Foundation\n+ *\n+ * <p>This is free software: you can redistribute it and/or modify it under the terms of the GNU\n+ * Lesser General Public License as published by the Free Software Foundation, either version 3 of\n+ * the License, or any later version.\n+ *\n+ * <p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;\n+ * without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n+ * GNU Lesser General Public License for more details. A copy of the GNU Lesser General Public\n+ * License is distributed along with this program and can be found at\n+ * <http://www.gnu.org/licenses/lgpl.html>.\n+ */\n+package org.codice.ddf.catalog.ui.util;\n+\n+import com.google.common.base.Stopwatch;\n+import ddf.action.ActionRegistry;\n+import ddf.catalog.CatalogFramework;\n+import ddf.catalog.data.Result;\n+import ddf.catalog.federation.FederationException;\n+import ddf.catalog.filter.FilterAdapter;\n+import ddf.catalog.filter.FilterBuilder;\n+import ddf.catalog.operation.QueryRequest;\n+import ddf.catalog.operation.QueryResponse;\n+import ddf.catalog.operation.impl.QueryResponseImpl;\n+import ddf.catalog.source.SourceUnavailableException;\n+import ddf.catalog.source.UnsupportedQueryException;\n+import ddf.catalog.util.impl.QueryFunction;\n+import ddf.catalog.util.impl.ResultIterable;\n+import java.util.ArrayList;\n+import java.util.Collections;\n+import java.util.List;\n+import java.util.Objects;\n+import java.util.concurrent.TimeUnit;\n+import java.util.stream.Collectors;\n+import org.codice.ddf.catalog.ui.query.cql.CqlQueryResponseImpl;\n+import org.codice.ddf.catalog.ui.query.utility.CqlQueryResponse;\n+import org.codice.ddf.catalog.ui.query.utility.CqlQueryUtility;\n+import org.codice.ddf.catalog.ui.query.utility.CqlRequest;\n+import org.codice.ddf.catalog.ui.transformer.TransformerDescriptors;\n+\n+public class CqlQueryUtil implements CqlQueryUtility {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cc289002388eefcfb65cb001712293e98c9796ab"}, "originalPosition": 42}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMxODExMDQyOnYy", "diffSide": "RIGHT", "path": "catalog/ui/catalog-ui-search/src/main/resources/OSGI-INF/blueprint/provides.xml", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNFQxNzo1NzoxNFrOFldv_Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNFQxNzo1NzoxNFrOFldv_Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDgyOTA1Mw==", "bodyText": "\ud83d\udc4d Nice. Splitting this stuff up helps us be more selective about what we depend on.", "url": "https://github.com/codice/ddf/pull/5806#discussion_r374829053", "createdAt": "2020-02-04T17:57:14Z", "author": {"login": "Lambeaux"}, "path": "catalog/ui/catalog-ui-search/src/main/resources/OSGI-INF/blueprint/provides.xml", "diffHunk": "@@ -33,7 +33,11 @@ Services (OSGi) that catalog-ui-search PROVIDES to DDF\n \n     <!-- Exposing endpoint util as a service to allow for system templates to be managed through\n     the means of a Karaf command (reference injection) -->\n-    <service ref=\"endpointUtil\" interface=\"org.codice.ddf.catalog.ui.api.EndpointUtility\"/>\n+    <service ref=\"endpointUtil\"\n+             interface=\"org.codice.ddf.catalog.ui.query.utility.EndpointUtility\"/>\n+\n+    <service ref=\"cqlQueryUtil\"\n+             interface=\"org.codice.ddf.catalog.ui.query.utility.CqlQueryUtility\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cc289002388eefcfb65cb001712293e98c9796ab"}, "originalPosition": 9}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMxODExMzc3OnYy", "diffSide": "LEFT", "path": "catalog/ui/catalog-ui-search/src/test/java/org/codice/ddf/catalog/ui/forms/SearchFormsSymbolsIT.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNFQxNzo1ODoyMVrOFldyQw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNFQxNzo1ODoyMVrOFldyQw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDgyOTYzNQ==", "bodyText": "\ud83d\udc4d Nice. Splitting stuff up also makes wiring things together for unit / component tests a lot easier. We were able to kill two arguments here.", "url": "https://github.com/codice/ddf/pull/5806#discussion_r374829635", "createdAt": "2020-02-04T17:58:21Z", "author": {"login": "Lambeaux"}, "path": "catalog/ui/catalog-ui-search/src/test/java/org/codice/ddf/catalog/ui/forms/SearchFormsSymbolsIT.java", "diffHunk": "@@ -158,8 +158,6 @@\n           FILTER_BUILDER,\n           null, // No interaction\n           null, // No interaction\n-          null, // No interaction\n-          null, // No interaction", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cc289002388eefcfb65cb001712293e98c9796ab"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMxODE1NDU1OnYy", "diffSide": "RIGHT", "path": "catalog/ui/catalog-ui-search-api/pom.xml", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNFQxODoxMToyNFrOFleL4g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNFQxODoxMToyNFrOFleL4g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDgzNjE5NA==", "bodyText": "\u2753 Are these absolutely necessary dependencies for the API? I know we use some Geotools interfaces but does that require the entire suite? Also, what Spark classes are we using in our APIs? If possible we should write the interfaces such that none of these (with the exception of the core Geotools interfaces) are used (but they're fine in the impl).", "url": "https://github.com/codice/ddf/pull/5806#discussion_r374836194", "createdAt": "2020-02-04T18:11:24Z", "author": {"login": "Lambeaux"}, "path": "catalog/ui/catalog-ui-search-api/pom.xml", "diffHunk": "@@ -38,6 +38,16 @@\n             <artifactId>platform-util</artifactId>\n             <version>${project.version}</version>\n         </dependency>\n+        <dependency>\n+            <groupId>org.codice.thirdparty</groupId>\n+            <artifactId>geotools-suite</artifactId>\n+            <version>${org.geotools.bundle.version}</version>\n+        </dependency>\n+        <dependency>\n+            <groupId>com.sparkjava</groupId>\n+            <artifactId>spark-core</artifactId>\n+            <version>${spark.version}</version>\n+        </dependency>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cc289002388eefcfb65cb001712293e98c9796ab"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMyNTk4Njg2OnYy", "diffSide": "RIGHT", "path": "catalog/ui/catalog-ui-search-api/pom.xml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNlQyMDo0MDoxMlrOFmpe7g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNlQyMDo0MDoxMlrOFmpe7g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjA2OTg3MA==", "bodyText": "\ud83d\udc4d Nice! I noticed the dependencies in this pom are gone.", "url": "https://github.com/codice/ddf/pull/5806#discussion_r376069870", "createdAt": "2020-02-06T20:40:12Z", "author": {"login": "Lambeaux"}, "path": "catalog/ui/catalog-ui-search-api/pom.xml", "diffHunk": "@@ -56,7 +56,8 @@\n                         <Export-Package>\n                             org.codice.ddf.catalog.ui.metacard.workspace.transformer,\n                             org.codice.ddf.catalog.ui.splitter,\n-                            org.codice.ddf.catalog.ui.subscription\n+                            org.codice.ddf.catalog.ui.subscription,\n+                            org.codice.ddf.catalog.ui.query.utility", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "98afa25dfdaf73ea793727460046aaccbd24031f"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMyNTk5ODE4OnYy", "diffSide": "LEFT", "path": "catalog/ui/catalog-ui-search/pom.xml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNlQyMDo0NDoxNFrOFmpmCA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNlQyMDo0NDoxNFrOFmpmCA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjA3MTY4OA==", "bodyText": "\ud83d\udc4d", "url": "https://github.com/codice/ddf/pull/5806#discussion_r376071688", "createdAt": "2020-02-06T20:44:14Z", "author": {"login": "Lambeaux"}, "path": "catalog/ui/catalog-ui-search/pom.xml", "diffHunk": "@@ -465,9 +465,6 @@\n                         <Export-Package>\n                             org.codice.ddf.catalog.ui.metacard.internal,\n                             org.codice.ddf.catalog.ui.alias,\n-                            org.codice.ddf.catalog.ui.api,\n-                            org.codice.ddf.catalog.ui.query.cql,\n-                            org.codice.ddf.catalog.ui.metacard.transform,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "98afa25dfdaf73ea793727460046aaccbd24031f"}, "originalPosition": 6}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4781, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}