{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk2NTA1OTcx", "number": 5957, "title": "[2.19.x] DDF-UI-145 default result form", "bodyText": "What does this PR do?\nAdds the ability to set a default result form.\nSetting a result form as default means that it will show up automatically in these cases:\n\nWhen you create a basic or advanced search in your workspace\nWhen you create a new search form in the search form editor\n\nIf you set a result form to default, but you already have a default search form that does not have that result form, you will NOT see the default result form when you search. You will see the result form associated with your default search form.\nWho is reviewing it?\n\n@andrewzimmer @hayleynorton @zta6\nSelect relevant component teams:\n\n@codice/ui\nAsk 2 committers to review/merge the PR and tag them here.\n\nHow should this be tested?\n\n\nbuild/profile install\ncreate two result forms if you don't already have them\nVerify that the dropdown has the \"Set Default\" option\nSet one as the default\nVerify that the result form you set as default appears in the basic and advanced search (make sure you don't have a default search form set)\nVerify that the result form you set as default appears when you're creating a new search form\nCreate two search forms, one with one of your result forms, and another with no result form specified (\"All Fields\")\nVerify that when you set these search forms to default, the default result form doesn't show up in the Basic and Advanced search. Rather, the result form you set ON the search from should show up.\n\nAny background context you want to provide?\nWhat are the relevant tickets?\nFixes: codice/ddf-ui#145\nScreenshots\n\nChecklist:\n\n Documentation Updated\n Update / Add Threat Dragon models\n Update / Add Unit Tests\n Update / Add Integration Tests\n\nNotes on Review Process\nPlease see Notes on Review Process for further guidance on requirements for merging and abbreviated reviews.\nReview Comment Legend:\n\n\u270f\ufe0f (Pencil) This comment is a nitpick or style suggestion, no action required for approval. This comment should provide a suggestion either as an in line code snippet or a gist.\n\u2753 (Question Mark) This comment is to gain a clearer understanding of design or code choices, clarification is required but action may not be necessary for approval.\n\u2757 (Exclamation Mark) This comment is critical and requires clarification or action before approval.", "createdAt": "2020-03-31T18:11:27Z", "url": "https://github.com/codice/ddf/pull/5957", "merged": true, "mergeCommit": {"oid": "118fc02398da15133000acbaa199c0a4a93b75cb"}, "closed": true, "closedAt": "2020-04-15T13:56:22Z", "author": {"login": "cassandrabailey293"}, "timelineItems": {"totalCount": 23, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcTIOEXgFqTM4NTAzNjc3Ng==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcXw0VmgFqTM5MzQ1NDk3OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg1MDM2Nzc2", "url": "https://github.com/codice/ddf/pull/5957#pullrequestreview-385036776", "createdAt": "2020-03-31T19:25:14Z", "commit": {"oid": "226c242458effa64f80a218d666967bcf6b0841e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQxOToyNToxNFrOF-kzDg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQxOToyNToxNFrOF-kzDg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTE1ODkyNg==", "bodyText": "you will need to toggle this class https://github.com/codice/ddf/pull/5957/files#diff-1af92a3d1da92776b5779e1e855b8c24R114 if the current result form is default, otherwise the clear default option that calls this function will never show", "url": "https://github.com/codice/ddf/pull/5957#discussion_r401158926", "createdAt": "2020-03-31T19:25:14Z", "author": {"login": "andrewzimmer"}, "path": "ui/packages/catalog-ui-search/src/main/webapp/component/search-form-interactions/search-form-interactions.view.js", "diffHunk": "@@ -213,10 +219,16 @@ Anyone who has access to this search ${formTitleLowerCase} will subsequently los\n     )\n   },\n   handleClearDefault() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "226c242458effa64f80a218d666967bcf6b0841e"}, "originalPosition": 24}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg1MDQ1OTU2", "url": "https://github.com/codice/ddf/pull/5957#pullrequestreview-385045956", "createdAt": "2020-03-31T19:38:42Z", "commit": {"oid": "226c242458effa64f80a218d666967bcf6b0841e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQxOTozODo0MlrOF-lQPw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQxOTozODo0MlrOF-lQPw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTE2NjM5OQ==", "bodyText": "I think it would be simpler if we moved this to query-setting's initialize method. then we could set up the listener like\nthis.listenTo(user.getQuerySettings(),\n      'change:defaultResultFormId',\n     () => this.renderResultForms(this.resultFormCollection.filteredList)\n    )\n\nand we won't need to set the default id to the model, we could access it directly from the user QuerySettings in renderResultForms method", "url": "https://github.com/codice/ddf/pull/5957#discussion_r401166399", "createdAt": "2020-03-31T19:38:42Z", "author": {"login": "andrewzimmer"}, "path": "ui/packages/catalog-ui-search/src/main/webapp/component/query-add/query-add.view.js", "diffHunk": "@@ -54,6 +54,11 @@ module.exports = Marionette.LayoutView.extend({\n     this.listenTo(user.getQuerySettings(), 'change:template', querySettings =>\n       this.updateCurrentQuery(querySettings)\n     )\n+    this.listenTo(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "226c242458effa64f80a218d666967bcf6b0841e"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg1NzQ4MDk0", "url": "https://github.com/codice/ddf/pull/5957#pullrequestreview-385748094", "createdAt": "2020-04-01T16:23:35Z", "commit": {"oid": "0f558b4e513b72e292bb5aef8d07d4e9ed3628cd"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQxNjoyMzozNVrOF_Ihqg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQxNjoyMzozNVrOF_Ihqg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTc0NDI5OA==", "bodyText": "you should be able to remove all the changes in this file, user is a single instance that is shared by all the components so we do not need to set it again.\nIn this method currentQuerySettings and user.getQuerySettings() are referencing the same model", "url": "https://github.com/codice/ddf/pull/5957#discussion_r401744298", "createdAt": "2020-04-01T16:23:35Z", "author": {"login": "andrewzimmer"}, "path": "ui/packages/catalog-ui-search/src/main/webapp/component/query-add/query-add.view.js", "diffHunk": "@@ -63,6 +68,11 @@ module.exports = Marionette.LayoutView.extend({\n   updateCurrentQuery(currentQuerySettings) {\n     const searchForm = new SearchForm(currentQuerySettings.get('template'))\n     const sharedAttributes = searchForm.transformToQueryStructure()\n+    if (currentQuerySettings.get('defaultResultFormId')) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0f558b4e513b72e292bb5aef8d07d4e9ed3628cd"}, "originalPosition": 16}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg1OTM5Njc5", "url": "https://github.com/codice/ddf/pull/5957#pullrequestreview-385939679", "createdAt": "2020-04-01T20:51:23Z", "commit": {"oid": "cdcafd200c3ae2049fb284f779eae79e304f50eb"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg2NjQ5NjE1", "url": "https://github.com/codice/ddf/pull/5957#pullrequestreview-386649615", "createdAt": "2020-04-02T17:34:14Z", "commit": {"oid": "df5b5697f11f1aba5561f941590d5accec23e0e1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bab7dd6bac1785879327bbab399f6829024e21aa", "author": {"user": null}, "url": "https://github.com/codice/ddf/commit/bab7dd6bac1785879327bbab399f6829024e21aa", "committedDate": "2020-04-07T16:54:46Z", "message": "DDF-UI-145 allow setting of default result form"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "92e66346ecd74c8471cda5bea6bf5463c2d6b3b4", "author": {"user": null}, "url": "https://github.com/codice/ddf/commit/92e66346ecd74c8471cda5bea6bf5463c2d6b3b4", "committedDate": "2020-04-07T16:54:47Z", "message": "DDF-UI-145 use the search form's result form first"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "edae46a3fd734f5fa7fd4816a57e98d859e1a6bd", "author": {"user": null}, "url": "https://github.com/codice/ddf/commit/edae46a3fd734f5fa7fd4816a57e98d859e1a6bd", "committedDate": "2020-04-07T16:54:47Z", "message": "DDF-UI-145 update default result form on change"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1b85b832a0e7bbca1d137174aafbf686c753d91f", "author": {"user": null}, "url": "https://github.com/codice/ddf/commit/1b85b832a0e7bbca1d137174aafbf686c753d91f", "committedDate": "2020-04-07T16:54:48Z", "message": "DDF-UI-145 update view so default star appears immediately"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d744bfe50243823dbe484f654557d2e77cd0f158", "author": {"user": null}, "url": "https://github.com/codice/ddf/commit/d744bfe50243823dbe484f654557d2e77cd0f158", "committedDate": "2020-04-07T16:55:30Z", "message": "DDF-UI-145 formatting"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3f2e3c95e47ee728d559b152814041da852e52b4", "author": {"user": null}, "url": "https://github.com/codice/ddf/commit/3f2e3c95e47ee728d559b152814041da852e52b4", "committedDate": "2020-04-07T16:55:32Z", "message": "DDF-UI-145 toggle make/clear default form options"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "35a0fda89a514413f461e0560c5cf92531a74283", "author": {"user": null}, "url": "https://github.com/codice/ddf/commit/35a0fda89a514413f461e0560c5cf92531a74283", "committedDate": "2020-04-07T16:55:32Z", "message": "DDF-UI-145 refactor"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f506ec45601e2fa616ebfed9fe3426302440f600", "author": {"user": null}, "url": "https://github.com/codice/ddf/commit/f506ec45601e2fa616ebfed9fe3426302440f600", "committedDate": "2020-04-07T16:55:33Z", "message": "DDF-UI-145 address comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "07a2e60feec713cfbe4457ccb3267757ab564f1e", "author": {"user": null}, "url": "https://github.com/codice/ddf/commit/07a2e60feec713cfbe4457ccb3267757ab564f1e", "committedDate": "2020-04-07T16:55:33Z", "message": "DDF-UI-145 formatting"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "df5b5697f11f1aba5561f941590d5accec23e0e1", "author": {"user": null}, "url": "https://github.com/codice/ddf/commit/df5b5697f11f1aba5561f941590d5accec23e0e1", "committedDate": "2020-04-02T16:11:09Z", "message": "DDF-UI-145 formatting"}, "afterCommit": {"oid": "07a2e60feec713cfbe4457ccb3267757ab564f1e", "author": {"user": null}, "url": "https://github.com/codice/ddf/commit/07a2e60feec713cfbe4457ccb3267757ab564f1e", "committedDate": "2020-04-07T16:55:33Z", "message": "DDF-UI-145 formatting"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4c7a69ee8c83bc0ccf480fd29ef29fdcae124bbe", "author": {"user": null}, "url": "https://github.com/codice/ddf/commit/4c7a69ee8c83bc0ccf480fd29ef29fdcae124bbe", "committedDate": "2020-04-07T17:19:51Z", "message": "DDF-UI-145 use All Results if detail level is undefined"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7e1f8f6f6346f27763f8b77d59f3b7fa5c89e26b", "author": {"user": null}, "url": "https://github.com/codice/ddf/commit/7e1f8f6f6346f27763f8b77d59f3b7fa5c89e26b", "committedDate": "2020-04-07T20:28:49Z", "message": "DDF-UI-145 clear the detail level when none is specified"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "13ac77387f05d3b5b151aaf8cc5f8753619379d8", "author": {"user": null}, "url": "https://github.com/codice/ddf/commit/13ac77387f05d3b5b151aaf8cc5f8753619379d8", "committedDate": "2020-04-07T20:50:39Z", "message": "DDF-UI-145 formatting"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxNTczOTEz", "url": "https://github.com/codice/ddf/pull/5957#pullrequestreview-391573913", "createdAt": "2020-04-10T17:49:32Z", "commit": {"oid": "13ac77387f05d3b5b151aaf8cc5f8753619379d8"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "341e4b7da86476bc9bc9e3731ec8a69e4e69e846", "author": {"user": null}, "url": "https://github.com/codice/ddf/commit/341e4b7da86476bc9bc9e3731ec8a69e4e69e846", "committedDate": "2020-04-14T00:26:58Z", "message": "DDF-UI-145 fix detail level logic"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c6a68e6e7dd7c710aee2d20514e7a63ee7894c9e", "author": {"user": null}, "url": "https://github.com/codice/ddf/commit/c6a68e6e7dd7c710aee2d20514e7a63ee7894c9e", "committedDate": "2020-04-14T16:18:03Z", "message": "DDF-UI-145 dont use default result form automatically in edited searches"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2e5cc4c901f4774e13a07ebb0dea2c13150cafd3", "author": {"user": null}, "url": "https://github.com/codice/ddf/commit/2e5cc4c901f4774e13a07ebb0dea2c13150cafd3", "committedDate": "2020-04-14T22:11:04Z", "message": "DDF-UI-145 build issue"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkzNDU0OTc5", "url": "https://github.com/codice/ddf/pull/5957#pullrequestreview-393454979", "createdAt": "2020-04-15T04:54:38Z", "commit": {"oid": "2e5cc4c901f4774e13a07ebb0dea2c13150cafd3"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQwNDo1NDozOFrOGFpwTw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQwNDo1NDozOFrOGFpwTw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODU4MDE3NQ==", "bodyText": "\u2753 Was the Jenkinsfile intentionally modified as part of a UI feature? Are we just throwing a separate fix onto this PR? I'm not picky just making sure we want to commit this. And looking for background on what it does.", "url": "https://github.com/codice/ddf/pull/5957#discussion_r408580175", "createdAt": "2020-04-15T04:54:38Z", "author": {"login": "Lambeaux"}, "path": "Jenkinsfile", "diffHunk": "@@ -49,7 +49,7 @@ pipeline {\n         stage('Validate Poms') {\n             steps {\n                 retry(3) {\n-                    checkout scm\n+                    checkout([$class: 'GitSCM', branches: [[name: \"refs/heads/${BRANCH_NAME}\"]], doGenerateSubmoduleConfigurations: false, extensions: [[$class: 'WipeWorkspace'], [$class: 'LocalBranch', localBranch: \"${BRANCH_NAME}\"], [$class: 'CloneOption', timeout: 30, shallow: true]], submoduleCfg: [], userRemoteConfigs: scm.userRemoteConfigs ])", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2e5cc4c901f4774e13a07ebb0dea2c13150cafd3"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4884, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}