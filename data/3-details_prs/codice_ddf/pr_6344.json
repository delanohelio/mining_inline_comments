{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkyMDkzMDE2", "number": 6344, "title": "Update the contentDirectoryMonitor appender configuration in org.ops4j.pax.logging.cfg to match the configuration in log4j2.xml", "bodyText": "What does this PR do?\nFixes a typo from #6064\nWho is reviewing it?\n@josephthweatt @shaundmorris @blen-desta @bakejeyner @garrettfreibott @SmithJosh @stustison\nHow should this be tested?\nCI doesn't test this, but it's so low risk that I don't think it needs a hero.\nAny background context you want to provide?\n\n  \n    \n      ddf/distribution/ddf-common/src/main/resources/etc/org.ops4j.pax.logging.cfg\n    \n    \n        Lines 177 to 190\n      in\n      bfbd3b4\n    \n    \n    \n    \n\n        \n          \n           # Content Directory Monitor \n        \n\n        \n          \n           log4j2.appender.contentDirectoryMonitor.type = RollingFile \n        \n\n        \n          \n           log4j2.appender.contentDirectoryMonitor.name = cdm \n        \n\n        \n          \n           log4j2.appender.contentDirectoryMonitor.fileName = ${karaf.log}/cdm.log \n        \n\n        \n          \n           log4j2.appender.contentDirectoryMonitor.filePattern = ${karaf.log}/cdm.log-%d{yyyy-MM-dd-HH}-%i.log.gz \n        \n\n        \n          \n           log4j2.appender.contentDirectoryMonitor.append = true \n        \n\n        \n          \n           log4j2.appender.contentDirectoryMonitor.ignoreExceptions = false \n        \n\n        \n          \n           log4j2.appender.contentDirectoryMonitor.layout.type = PatternLayout \n        \n\n        \n          \n           log4j2.appender.contentDirectoryMonitor.layout.pattern = [%-5p] %d{ISO8601} | %-16.16t | %-15.20c{1} |  %m%n \n        \n\n        \n          \n           log4j2.appender.contentDirectoryMonitor.policies.type = Policies \n        \n\n        \n          \n           log4j2.appender.contentDirectoryMonitor.policies.size.type = SizeBasedTriggeringPolicy \n        \n\n        \n          \n           log4j2.appender.contentDirectoryMonitor.policies.size.size = 20MB \n        \n\n        \n          \n           log4j2.appender.contentDirectoryMonitor.strategy.type = DefaultRolloverStrategy \n        \n\n        \n          \n           log4j2.appender.contentDirectoryMonitor.strategy.max = 10 \n        \n    \n  \n\n\n\n  \n    \n      ddf/distribution/ddf-common/src/main/resources/etc/log4j2.xml\n    \n    \n        Lines 56 to 64\n      in\n      bfbd3b4\n    \n    \n    \n    \n\n        \n          \n           <RollingFile name=\"cdm\" append=\"true\" \n        \n\n        \n          \n                        fileName=\"${sys:karaf.log}/cdm.log\" \n        \n\n        \n          \n                        filePattern=\"${sys:karaf.log}/cdm.log-%d{yyyy-MM-dd-HH}-%i.log.gz\"> \n        \n\n        \n          \n               <PatternLayout pattern=\"${log4j2.pattern}\"/> \n        \n\n        \n          \n               <Policies> \n        \n\n        \n          \n                   <SizeBasedTriggeringPolicy size=\"20 MB\"/> \n        \n\n        \n          \n               </Policies> \n        \n\n        \n          \n               <DefaultRolloverStrategy max=\"10\"/> \n        \n\n        \n          \n           </RollingFile> \n        \n    \n  \n\n\nWhat are the relevant tickets?\nRelated to #6048\nChecklist:\n\n[n/a] Documentation Updated\n[n/a] Update / Add Threat Dragon models\n[n/a] Update / Add Unit Tests\n[n/a] Update / Add Integration Tests\n\nNotes on Review Process\nPlease see Notes on Review Process for further guidance on requirements for merging and abbreviated reviews.\nReview Comment Legend:\n\n\u270f\ufe0f (Pencil) This comment is a nitpick or style suggestion, no action required for approval. This comment should provide a suggestion either as an in line code snippet or a gist.\n\u2753 (Question Mark) This comment is to gain a clearer understanding of design or code choices, clarification is required but action may not be necessary for approval.\n\u2757 (Exclamation Mark) This comment is critical and requires clarification or action before approval.", "createdAt": "2020-09-23T23:26:34Z", "url": "https://github.com/codice/ddf/pull/6344", "merged": true, "mergeCommit": {"oid": "f9525eeafbfc5a898e34b4b3d02a8583a980ece8"}, "closed": true, "closedAt": "2020-09-29T19:59:07Z", "author": {"login": "emmberk"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdL0m-NAH2gAyNDkyMDkzMDE2OjkyM2FlNDAwMGRhMDAzMzI2ZmY4YmVhYzExZmNlOGQ1ZTA1YTk4MTQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdMFUUrgFqTQ5NTgzNTE3MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "923ae4000da003326ff8beac11fce8d5e05a9814", "author": {"user": {"login": "emmberk", "name": "Emily Berk"}}, "url": "https://github.com/codice/ddf/commit/923ae4000da003326ff8beac11fce8d5e05a9814", "committedDate": "2020-09-23T22:48:02Z", "message": "Update the contentDirectoryMonitor appender configuration in org.ops4j.pax.logging.cfg to match the configuration in log4j2.xml"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk1MTE4MTc0", "url": "https://github.com/codice/ddf/pull/6344#pullrequestreview-495118174", "createdAt": "2020-09-23T23:28:46Z", "commit": {"oid": "923ae4000da003326ff8beac11fce8d5e05a9814"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk1MTE4NjY3", "url": "https://github.com/codice/ddf/pull/6344#pullrequestreview-495118667", "createdAt": "2020-09-23T23:30:12Z", "commit": {"oid": "923ae4000da003326ff8beac11fce8d5e05a9814"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk1MTIwOTYz", "url": "https://github.com/codice/ddf/pull/6344#pullrequestreview-495120963", "createdAt": "2020-09-23T23:36:43Z", "commit": {"oid": "923ae4000da003326ff8beac11fce8d5e05a9814"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk1MTMyMzAw", "url": "https://github.com/codice/ddf/pull/6344#pullrequestreview-495132300", "createdAt": "2020-09-23T23:54:43Z", "commit": {"oid": "923ae4000da003326ff8beac11fce8d5e05a9814"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yM1QyMzo1NDo0M1rOHXFCrg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yM1QyMzo1NDo0M1rOHXFCrg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mzk2MTkwMg==", "bodyText": "@SmithJosh, I'm starting a thread to reply to #6344 (review)\nThe xml-style didn't work in the itests. Also, we decided to keep maintaining both here (rather than just use the cfg-style in the itests) because there was some karaf console bug with the xml-style config, which make the cfg-style config preferable for devs who don't need to harden. Lastly, there was a bug with the failover appender that made it so that we needed to use the xml-style if you wanted failover logging, which is part of hardening. These issues might have been fixed since I last worked with these files, but iirc, those were the motivations for this decision.\n\n  \n    \n      ddf/distribution/ddf-common/src/main/resources/etc/org.ops4j.pax.logging.cfg\n    \n    \n        Lines 20 to 24\n      in\n      bfbd3b4\n    \n    \n    \n    \n\n        \n          \n           # In order to switch to the xml-style configuration for Log4j2 in ${karaf.etc}/log4j2.xml, \n        \n\n        \n          \n           # uncomment the following line and remove all the configuration beneath it. This change has not been \n        \n\n        \n          \n           # made default because the xml-style configuration causes log entries to be missing from the itests. \n        \n\n        \n          \n           # However, because failover logging capabilities are only available for the xml-style configuration, \n        \n\n        \n          \n           # this step is required for security hardening.", "url": "https://github.com/codice/ddf/pull/6344#discussion_r493961902", "createdAt": "2020-09-23T23:54:43Z", "author": {"login": "emmberk"}, "path": "distribution/ddf-common/src/main/resources/etc/org.ops4j.pax.logging.cfg", "diffHunk": "@@ -180,9 +180,8 @@ log4j2.appender.contentDirectoryMonitor.name = cdm\n log4j2.appender.contentDirectoryMonitor.fileName = ${karaf.log}/cdm.log\n log4j2.appender.contentDirectoryMonitor.filePattern = ${karaf.log}/cdm.log-%d{yyyy-MM-dd-HH}-%i.log.gz\n log4j2.appender.contentDirectoryMonitor.append = true\n-log4j2.appender.contentDirectoryMonitor.ignoreExceptions = false\n log4j2.appender.contentDirectoryMonitor.layout.type = PatternLayout\n-log4j2.appender.contentDirectoryMonitor.layout.pattern = [%-5p] %d{ISO8601} | %-16.16t | %-15.20c{1} |  %m%n\n+log4j2.appender.contentDirectoryMonitor.layout.pattern = ${log4j2.pattern}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "923ae4000da003326ff8beac11fce8d5e05a9814"}, "originalPosition": 7}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk1ODI3MDA1", "url": "https://github.com/codice/ddf/pull/6344#pullrequestreview-495827005", "createdAt": "2020-09-24T18:09:03Z", "commit": {"oid": "923ae4000da003326ff8beac11fce8d5e05a9814"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk1ODM1MTcx", "url": "https://github.com/codice/ddf/pull/6344#pullrequestreview-495835171", "createdAt": "2020-09-24T18:16:03Z", "commit": {"oid": "923ae4000da003326ff8beac11fce8d5e05a9814"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 752, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}