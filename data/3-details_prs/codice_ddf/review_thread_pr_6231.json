{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY0MjkwNjg3", "number": 6231, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQyMjo0Mzo1M1rOEWBCeA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQyMDozMDowOVrOEW8__w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkxNTIxMTQ0OnYy", "diffSide": "RIGHT", "path": "platform/email/platform-email-impl/src/main/resources/OSGI-INF/blueprint/blueprint.xml", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQyMjo0Mzo1M1rOG9Gm9g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQyMjo0OToxOVrOG9GuDg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjcyNDU5OA==", "bodyText": "i think this is default", "url": "https://github.com/codice/ddf/pull/6231#discussion_r466724598", "createdAt": "2020-08-06T22:43:53Z", "author": {"login": "bdeining"}, "path": "platform/email/platform-email-impl/src/main/resources/OSGI-INF/blueprint/blueprint.xml", "diffHunk": "@@ -18,7 +18,12 @@\n            xsi:schemaLocation=\"http://www.osgi.org/xmlns/blueprint/v1.0.0\n            http://www.osgi.org/xmlns/blueprint/v1.0.0/blueprint.xsd\">\n \n+    <reference id=\"encryptionService\"\n+        interface=\"ddf.security.encryption.EncryptionService\"\n+        availability=\"mandatory\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a4174979aa993f75148184daa9cdfc96b18669e2"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjcyNTgzMw==", "bodyText": "", "url": "https://github.com/codice/ddf/pull/6231#discussion_r466725833", "createdAt": "2020-08-06T22:47:35Z", "author": {"login": "rymach"}, "path": "platform/email/platform-email-impl/src/main/resources/OSGI-INF/blueprint/blueprint.xml", "diffHunk": "@@ -18,7 +18,12 @@\n            xsi:schemaLocation=\"http://www.osgi.org/xmlns/blueprint/v1.0.0\n            http://www.osgi.org/xmlns/blueprint/v1.0.0/blueprint.xsd\">\n \n+    <reference id=\"encryptionService\"\n+        interface=\"ddf.security.encryption.EncryptionService\"\n+        availability=\"mandatory\"/>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjcyNDU5OA=="}, "originalCommit": {"oid": "a4174979aa993f75148184daa9cdfc96b18669e2"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjcyNjQxNA==", "bodyText": "I'm not sure if it's necessary or not - I just copy pasted from another location in the codebase", "url": "https://github.com/codice/ddf/pull/6231#discussion_r466726414", "createdAt": "2020-08-06T22:49:19Z", "author": {"login": "rymach"}, "path": "platform/email/platform-email-impl/src/main/resources/OSGI-INF/blueprint/blueprint.xml", "diffHunk": "@@ -18,7 +18,12 @@\n            xsi:schemaLocation=\"http://www.osgi.org/xmlns/blueprint/v1.0.0\n            http://www.osgi.org/xmlns/blueprint/v1.0.0/blueprint.xsd\">\n \n+    <reference id=\"encryptionService\"\n+        interface=\"ddf.security.encryption.EncryptionService\"\n+        availability=\"mandatory\"/>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjcyNDU5OA=="}, "originalCommit": {"oid": "a4174979aa993f75148184daa9cdfc96b18669e2"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkyNTAzNTUxOnYy", "diffSide": "RIGHT", "path": "platform/email/platform-email-impl/src/main/java/org/codice/ddf/platform/email/impl/SmtpClientImpl.java", "isResolved": false, "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQyMDozMDowOVrOG-etfA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xM1QxNTo0MzoyN1rOHARb5A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODE2ODA2MA==", "bodyText": "\u2753 Do we want to keep the password encrypted in-memory and only decrypt on use?", "url": "https://github.com/codice/ddf/pull/6231#discussion_r468168060", "createdAt": "2020-08-10T20:30:09Z", "author": {"login": "Lambeaux"}, "path": "platform/email/platform-email-impl/src/main/java/org/codice/ddf/platform/email/impl/SmtpClientImpl.java", "diffHunk": "@@ -92,7 +99,7 @@ public void setUserName(@Nullable String userName) {\n    * @param password the password for the email server\n    */\n   public void setPassword(@Nullable String password) {\n-    this.password = password;\n+    this.password = encryptionService.decryptValue(password);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a4174979aa993f75148184daa9cdfc96b18669e2"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTQ4NDQyNQ==", "bodyText": "seems like overkill", "url": "https://github.com/codice/ddf/pull/6231#discussion_r469484425", "createdAt": "2020-08-12T19:17:11Z", "author": {"login": "rymach"}, "path": "platform/email/platform-email-impl/src/main/java/org/codice/ddf/platform/email/impl/SmtpClientImpl.java", "diffHunk": "@@ -92,7 +99,7 @@ public void setUserName(@Nullable String userName) {\n    * @param password the password for the email server\n    */\n   public void setPassword(@Nullable String password) {\n-    this.password = password;\n+    this.password = encryptionService.decryptValue(password);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODE2ODA2MA=="}, "originalCommit": {"oid": "a4174979aa993f75148184daa9cdfc96b18669e2"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTUzMTE4NQ==", "bodyText": "why? isn't that actually a safer approach?", "url": "https://github.com/codice/ddf/pull/6231#discussion_r469531185", "createdAt": "2020-08-12T20:38:41Z", "author": {"login": "bdeining"}, "path": "platform/email/platform-email-impl/src/main/java/org/codice/ddf/platform/email/impl/SmtpClientImpl.java", "diffHunk": "@@ -92,7 +99,7 @@ public void setUserName(@Nullable String userName) {\n    * @param password the password for the email server\n    */\n   public void setPassword(@Nullable String password) {\n-    this.password = password;\n+    this.password = encryptionService.decryptValue(password);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODE2ODA2MA=="}, "originalCommit": {"oid": "a4174979aa993f75148184daa9cdfc96b18669e2"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTU0MDI1NQ==", "bodyText": "where does the decryption key live", "url": "https://github.com/codice/ddf/pull/6231#discussion_r469540255", "createdAt": "2020-08-12T20:53:32Z", "author": {"login": "rymach"}, "path": "platform/email/platform-email-impl/src/main/java/org/codice/ddf/platform/email/impl/SmtpClientImpl.java", "diffHunk": "@@ -92,7 +99,7 @@ public void setUserName(@Nullable String userName) {\n    * @param password the password for the email server\n    */\n   public void setPassword(@Nullable String password) {\n-    this.password = password;\n+    this.password = encryptionService.decryptValue(password);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODE2ODA2MA=="}, "originalCommit": {"oid": "a4174979aa993f75148184daa9cdfc96b18669e2"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTU5OTk2NA==", "bodyText": "Someone from the @codice/security team could probably help. Is it only accessible here? https://github.com/codice/ddf/blob/2.19.x/platform/email/platform-email-impl/src/main/java/org/codice/ddf/platform/email/impl/SmtpClientImpl.java#L162\nIf so then possible could decrypt it there so it isn't in memory. Not sure if that is better.", "url": "https://github.com/codice/ddf/pull/6231#discussion_r469599964", "createdAt": "2020-08-12T23:20:37Z", "author": {"login": "shaundmorris"}, "path": "platform/email/platform-email-impl/src/main/java/org/codice/ddf/platform/email/impl/SmtpClientImpl.java", "diffHunk": "@@ -92,7 +99,7 @@ public void setUserName(@Nullable String userName) {\n    * @param password the password for the email server\n    */\n   public void setPassword(@Nullable String password) {\n-    this.password = password;\n+    this.password = encryptionService.decryptValue(password);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODE2ODA2MA=="}, "originalCommit": {"oid": "a4174979aa993f75148184daa9cdfc96b18669e2"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDA0NzcxNg==", "bodyText": "The decryption key lives in etc/ketsets which is protected by the security policy.\nhttps://github.com/codice/ddf/blob/master/distribution/ddf-common/src/main/resources/security/default.policy#L234-L235", "url": "https://github.com/codice/ddf/pull/6231#discussion_r470047716", "createdAt": "2020-08-13T15:43:27Z", "author": {"login": "pklinef"}, "path": "platform/email/platform-email-impl/src/main/java/org/codice/ddf/platform/email/impl/SmtpClientImpl.java", "diffHunk": "@@ -92,7 +99,7 @@ public void setUserName(@Nullable String userName) {\n    * @param password the password for the email server\n    */\n   public void setPassword(@Nullable String password) {\n-    this.password = password;\n+    this.password = encryptionService.decryptValue(password);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODE2ODA2MA=="}, "originalCommit": {"oid": "a4174979aa993f75148184daa9cdfc96b18669e2"}, "originalPosition": 33}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4545, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}