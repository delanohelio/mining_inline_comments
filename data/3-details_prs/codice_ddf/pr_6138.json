{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM1NTE1NDYw", "number": 6138, "title": "DDF-6137 Upgrade Tika to 1.24.1", "bodyText": "What does this PR do?\nTika and its dependencies have a few CVEs reported against them. This PR upgrades to the latest Tika version to fix them. Also, upgrades POI and other transitive Tika dependencies to match the version that Tika uses.\nThis PR depends on codice/thirdparty#86\nWho is reviewing it?\n@blen-desta @garrettfreibott @bakejeyner @stustison\nSelect relevant component teams:\n@codice/io\n@codice/security\nHow should this be tested?\n\nBuild codice/thirdparty#86\nBuild this PR branch and run DDF\nDownload this set of assorted file types: https://github.com/codice/ddf/tree/master/catalog/transformer/catalog-transformer-tika-input/src/test/resources.\nTest the Tika input transformer by ingesting those files from the Karaf shell.\n\nadmin@root()> catalog:ingest -t tika \"/path/to/test/resources\"\n\n\nTest the video input transformer\n\nadmin@root()> catalog:ingest -t video \"/path/to/test/resources/testMP4.m4a\"\n\n\nTest the pdf input transformer\n\nadmin@root()> catalog:ingest -t pdf \"/path/to/test/resources/testPDF.pdf\"\n\n\nTest the OgcUrlResourceReader by attempting to download a resource from the UI. You'll need this change to install the UI: codice/ddf-ui#254\n\nAny background context you want to provide?\nThis is part of an ongoing effort to reduce the DDF CVE level\nWhat are the relevant tickets?\nFixes: #6137\nhttps://codice.atlassian.net/browse/DDF-1986\nhttps://codice.atlassian.net/browse/DDF-3064\nScreenshots\n\nChecklist:\n\n Documentation Updated\n Update / Add Threat Dragon models\n Update / Add Unit Tests\n Update / Add Integration Tests\n\nNotes on Review Process\nPlease see Notes on Review Process for further guidance on requirements for merging and abbreviated reviews.\nReview Comment Legend:\n\n\u270f\ufe0f (Pencil) This comment is a nitpick or style suggestion, no action required for approval. This comment should provide a suggestion either as an in line code snippet or a gist.\n\u2753 (Question Mark) This comment is to gain a clearer understanding of design or code choices, clarification is required but action may not be necessary for approval.\n\u2757 (Exclamation Mark) This comment is critical and requires clarification or action before approval.", "createdAt": "2020-06-16T23:18:21Z", "url": "https://github.com/codice/ddf/pull/6138", "merged": true, "mergeCommit": {"oid": "3e77ea7895d64f342f40c0becfd40ba3ec698bcd"}, "closed": true, "closedAt": "2020-06-24T19:50:53Z", "author": {"login": "SmithJosh"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABct4AFZgFqTQzNTI5NzE2Mg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcuMCNEAFqTQzNjE1ODYzNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM1Mjk3MTYy", "url": "https://github.com/codice/ddf/pull/6138#pullrequestreview-435297162", "createdAt": "2020-06-22T21:47:27Z", "commit": {"oid": "af968ecadd70e4958da6993317c8980fc7d62d71"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3f834c1a9bf940928ccb4b3ac8828d099f7a78d3", "author": {"user": {"login": "SmithJosh", "name": "Joshua Smith"}}, "url": "https://github.com/codice/ddf/commit/3f834c1a9bf940928ccb4b3ac8828d099f7a78d3", "committedDate": "2020-06-23T18:05:30Z", "message": "DDF-6137 Upgrade Tika to 1.24.1\n\nAlso updates POI and other dependencies to match the version that\nTika uses."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "af968ecadd70e4958da6993317c8980fc7d62d71", "author": {"user": {"login": "SmithJosh", "name": "Joshua Smith"}}, "url": "https://github.com/codice/ddf/commit/af968ecadd70e4958da6993317c8980fc7d62d71", "committedDate": "2020-06-16T23:06:23Z", "message": "DDF-6137 Upgrade Tika to 1.24.1\n\nAlso updates POI and other dependencies to match the version that\nTika uses."}, "afterCommit": {"oid": "3f834c1a9bf940928ccb4b3ac8828d099f7a78d3", "author": {"user": {"login": "SmithJosh", "name": "Joshua Smith"}}, "url": "https://github.com/codice/ddf/commit/3f834c1a9bf940928ccb4b3ac8828d099f7a78d3", "committedDate": "2020-06-23T18:05:30Z", "message": "DDF-6137 Upgrade Tika to 1.24.1\n\nAlso updates POI and other dependencies to match the version that\nTika uses."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2MDQwNzk3", "url": "https://github.com/codice/ddf/pull/6138#pullrequestreview-436040797", "createdAt": "2020-06-23T18:18:55Z", "commit": {"oid": "3f834c1a9bf940928ccb4b3ac8828d099f7a78d3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2MDg5NTEw", "url": "https://github.com/codice/ddf/pull/6138#pullrequestreview-436089510", "createdAt": "2020-06-23T19:28:04Z", "commit": {"oid": "3f834c1a9bf940928ccb4b3ac8828d099f7a78d3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2MTU4NjM2", "url": "https://github.com/codice/ddf/pull/6138#pullrequestreview-436158636", "createdAt": "2020-06-23T21:07:28Z", "commit": {"oid": "3f834c1a9bf940928ccb4b3ac8828d099f7a78d3"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QyMTowNzoyOFrOGn6r1w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QyMTowNzoyOFrOGn6r1w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDUwOTE0Mw==", "bodyText": "\u2753 Oddly enough, just declaring the <feature> dependency without attributes works most of the time so I've never understood why the feature data model needed these attributes.\nI've seen cases wheredependency=\"true\" is necessary, and also cases where it doesn't help at all. There's also prerequisite=\"true\" which I think creates a new OSGi subsystem but sometimes works when dependency=\"true\" does not. Have you explored these subtle differences by chance and know precisely what differs between the different strategies?", "url": "https://github.com/codice/ddf/pull/6138#discussion_r444509143", "createdAt": "2020-06-23T21:07:28Z", "author": {"login": "Lambeaux"}, "path": "features/utilities/src/main/feature/feature.xml", "diffHunk": "@@ -155,4 +159,20 @@\n         <bundle>mvn:ddf.platform.io/platform-io-impl/${project.version}</bundle>\n     </feature>\n \n+    <feature name=\"jackson\" version=\"${project.version}\">\n+        <bundle>mvn:com.fasterxml.jackson.core/jackson-core/${jackson.version}</bundle>\n+        <bundle>mvn:com.fasterxml.jackson.core/jackson-annotations/${jackson.version}</bundle>\n+        <bundle>mvn:com.fasterxml.jackson.core/jackson-databind/${jackson.version}</bundle>\n+    </feature>\n+\n+    <feature name=\"poi\" version=\"${project.version}\">\n+        <feature dependency=\"true\">apache-commons</feature>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3f834c1a9bf940928ccb4b3ac8828d099f7a78d3"}, "originalPosition": 33}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 948, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}