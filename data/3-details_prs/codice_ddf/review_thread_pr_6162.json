{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ1NDczMzg3", "number": 6162, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxNjoyNzowOVrOERH6fw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxNjozMjoxNlrOERIFHA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg2MzkwOTExOnYy", "diffSide": "RIGHT", "path": "ui/packages/catalog-ui-search/src/main/webapp/component/golden-layout/golden-layout.view.js", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxNjoyNzowOVrOG1qaqA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxNjoyNzowOVrOG1qaqA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODkyMjY2NA==", "bodyText": "\u2753 Not sure if it matters or not, but are there any problems with rebinding these functions on every itemCreated / itemDestroyed event?", "url": "https://github.com/codice/ddf/pull/6162#discussion_r458922664", "createdAt": "2020-07-22T16:27:09Z", "author": {"login": "mojogitoverhere"}, "path": "ui/packages/catalog-ui-search/src/main/webapp/component/golden-layout/golden-layout.view.js", "diffHunk": "@@ -241,6 +237,14 @@ module.exports = Marionette.LayoutView.extend({\n       'initialised',\n       this.handleGoldenLayoutInitialised.bind(this)\n     )\n+    this.goldenLayout.on(\n+      'itemCreated',\n+      this.handleGoldenLayoutTabCreated.bind(this)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "41c061bc2e2c451883fca00da1df81dbbcf6491e"}, "originalPosition": 41}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg2MzkzNjI4OnYy", "diffSide": "RIGHT", "path": "ui/packages/catalog-ui-search/src/main/webapp/component/golden-layout/golden-layout.view.js", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxNjozMjoxNlrOG1qsBQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxOTo0Mjo0NVrOG1xiNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODkyNzEwOQ==", "bodyText": "\u2753 Just curious, why do we need to manually calculate the tab widths and remove / re-add the add visualization button when a tab is updated?", "url": "https://github.com/codice/ddf/pull/6162#discussion_r458927109", "createdAt": "2020-07-22T16:32:16Z", "author": {"login": "mojogitoverhere"}, "path": "ui/packages/catalog-ui-search/src/main/webapp/component/golden-layout/golden-layout.view.js", "diffHunk": "@@ -263,15 +267,58 @@ module.exports = Marionette.LayoutView.extend({\n     this.$el.toggleClass('is-maximised', isMaximised(this.goldenLayout.root))\n   },\n   detectIfGoldenLayoutEmpty() {\n-    this.$el.toggleClass(\n-      'is-empty',\n-      this.goldenLayout.root.contentItems.length === 0\n-    )\n+    const isEmpty = this.goldenLayout.root.contentItems.length === 0\n+    this.$el.toggleClass('is-empty', isEmpty)\n+    if (isEmpty) {\n+      this.addEmptyVisualizationTab()\n+    }\n   },\n   handleGoldenLayoutInitialised() {\n     this.detectIfGoldenLayoutMaximised()\n     this.detectIfGoldenLayoutEmpty()\n   },\n+  handleGoldenLayoutTabCreated() {\n+    this.handleTabUpdate(1)\n+  },\n+  handleGoldenLayoutTabDestroyed() {\n+    this.handleTabUpdate(-1)\n+  },\n+  handleTabUpdate(i) {\n+    if (\n+      this.goldenLayout.root.contentItems.length > 0 &&\n+      this.goldenLayout.root.contentItems[0].header\n+    ) {\n+      const items = this.goldenLayout.root.contentItems[0].header.tabs.length\n+      const width =\n+        (this.goldenLayout.container.find('.lm_tabs').width() / items) *\n+        (items + i)\n+      this.addVisualizationTab(width)\n+    }\n+  },\n+  addVisualizationTab(width) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "41c061bc2e2c451883fca00da1df81dbbcf6491e"}, "originalPosition": 86}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTAzOTI4Ng==", "bodyText": "Thought this was necessary because of the way golden-layout was rendering their tabs, but looking at it again I realized I was overcomplicating the issue. Styling has been updating and it is no longer manually doing this", "url": "https://github.com/codice/ddf/pull/6162#discussion_r459039286", "createdAt": "2020-07-22T19:42:45Z", "author": {"login": "andrewzimmer"}, "path": "ui/packages/catalog-ui-search/src/main/webapp/component/golden-layout/golden-layout.view.js", "diffHunk": "@@ -263,15 +267,58 @@ module.exports = Marionette.LayoutView.extend({\n     this.$el.toggleClass('is-maximised', isMaximised(this.goldenLayout.root))\n   },\n   detectIfGoldenLayoutEmpty() {\n-    this.$el.toggleClass(\n-      'is-empty',\n-      this.goldenLayout.root.contentItems.length === 0\n-    )\n+    const isEmpty = this.goldenLayout.root.contentItems.length === 0\n+    this.$el.toggleClass('is-empty', isEmpty)\n+    if (isEmpty) {\n+      this.addEmptyVisualizationTab()\n+    }\n   },\n   handleGoldenLayoutInitialised() {\n     this.detectIfGoldenLayoutMaximised()\n     this.detectIfGoldenLayoutEmpty()\n   },\n+  handleGoldenLayoutTabCreated() {\n+    this.handleTabUpdate(1)\n+  },\n+  handleGoldenLayoutTabDestroyed() {\n+    this.handleTabUpdate(-1)\n+  },\n+  handleTabUpdate(i) {\n+    if (\n+      this.goldenLayout.root.contentItems.length > 0 &&\n+      this.goldenLayout.root.contentItems[0].header\n+    ) {\n+      const items = this.goldenLayout.root.contentItems[0].header.tabs.length\n+      const width =\n+        (this.goldenLayout.container.find('.lm_tabs').width() / items) *\n+        (items + i)\n+      this.addVisualizationTab(width)\n+    }\n+  },\n+  addVisualizationTab(width) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODkyNzEwOQ=="}, "originalCommit": {"oid": "41c061bc2e2c451883fca00da1df81dbbcf6491e"}, "originalPosition": 86}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4647, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}