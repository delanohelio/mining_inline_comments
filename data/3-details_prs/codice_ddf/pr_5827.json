{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc0NTg0MTIx", "number": 5827, "title": "[2.19.x] Disable attributes that are not supported by selected sources", "bodyText": "What does this PR do?\nDisables attributes from the dropdown when a source with supportedAttributes is selected. Display a warning below the dropdown that the currently selected attribute is not available to be selected in the dropdown\nWho is reviewing it?\n\nSelect relevant component teams:\n@codice/ui\nHow should this be tested?\n\nTBD\nAny background context you want to provide?\nTBD\nThese changes were done in catalog-ui-search which is now removed from master a forward port to ddf-ui will be necessary\nWhat are the relevant tickets?\nFixes: #____\nScreenshots\n\nTBD\nChecklist:\n\n Documentation Updated\n Update / Add Threat Dragon models\n Update / Add Unit Tests\n Update / Add Integration Tests\n\nNotes on Review Process\nPlease see Notes on Review Process for further guidance on requirements for merging and abbreviated reviews.\nReview Comment Legend:\n\n\u270f\ufe0f (Pencil) This comment is a nitpick or style suggestion, no action required for approval. This comment should provide a suggestion either as an in line code snippet or a gist.\n\u2753 (Question Mark) This comment is to gain a clearer understanding of design or code choices, clarification is required but action may not be necessary for approval.\n\u2757 (Exclamation Mark) This comment is critical and requires clarification or action before approval.", "createdAt": "2020-02-12T23:04:09Z", "url": "https://github.com/codice/ddf/pull/5827", "merged": true, "mergeCommit": {"oid": "168254cd6e30bddc663fa0a8e4de5c90dae93736"}, "closed": true, "closedAt": "2020-03-12T20:53:28Z", "author": {"login": "mazarag2"}, "timelineItems": {"totalCount": 40, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcDtybkAH2gAyMzc0NTg0MTIxOmUzNWI3OTE1NWYyMjkzYWM1NzhjMzAwMDJkMmRlMWU3MTIzNmFkNjA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcKwct0AH2gAyMzc0NTg0MTIxOmZiNDE3NzUwNzViMjE0ODBmMTQ1YmIyYzY4ZTVhODFmOTU5YzA2NTc=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e35b79155f2293ac578c30002d2de1e71236ad60", "author": {"user": {"login": "mazarag2", "name": null}}, "url": "https://github.com/codice/ddf/commit/e35b79155f2293ac578c30002d2de1e71236ad60", "committedDate": "2020-02-12T22:08:40Z", "message": "5652 conflicts\n\n5652 resolve conflict markers\n\n5652 add missing settingsModel and check when other search forms are selected\n\n5652 enable all attributes when no source is selected and clean up files\n\n5652 fix comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "79f335be0130efdc2c43ba328324c6b5061848b3", "author": {"user": {"login": "mazarag2", "name": null}}, "url": "https://github.com/codice/ddf/commit/79f335be0130efdc2c43ba328324c6b5061848b3", "committedDate": "2020-02-12T22:12:30Z", "message": "5652 remove log"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU3ODY1NDU2", "url": "https://github.com/codice/ddf/pull/5827#pullrequestreview-357865456", "createdAt": "2020-02-12T23:36:14Z", "commit": {"oid": "79f335be0130efdc2c43ba328324c6b5061848b3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU4NDUzNjE1", "url": "https://github.com/codice/ddf/pull/5827#pullrequestreview-358453615", "createdAt": "2020-02-13T18:32:09Z", "commit": {"oid": "79f335be0130efdc2c43ba328324c6b5061848b3"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QxODozMjoxMFrOFpe6cw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QxOToxNDo0MVrOFpgQFA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTA0MjQxOQ==", "bodyText": "\u270f\ufe0f\n\n  \n    \n      \n        Suggested change", "url": "https://github.com/codice/ddf/pull/5827#discussion_r379042419", "createdAt": "2020-02-13T18:32:10Z", "author": {"login": "mojogitoverhere"}, "path": "ui/packages/catalog-ui-search/src/main/webapp/component/filter-builder/filter-builder.view.js", "diffHunk": "@@ -97,6 +97,8 @@ module.exports = Marionette.LayoutView.extend({\n         isFormBuilder: this.options.isFormBuilder || false,\n         suggester: this.options.suggester,\n         includedAttributes: this.options.includedAttributes,\n+        settingsModel: this.options.settingsModel,\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "79f335be0130efdc2c43ba328324c6b5061848b3"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTA1NjY4OQ==", "bodyText": "\u270f\ufe0f I recommend reverting these formatting changes since nothing else was changed in this file", "url": "https://github.com/codice/ddf/pull/5827#discussion_r379056689", "createdAt": "2020-02-13T18:59:09Z", "author": {"login": "mojogitoverhere"}, "path": "ui/packages/catalog-ui-search/src/main/webapp/component/query-settings/query-settings.view.js", "diffHunk": "@@ -158,6 +157,7 @@ module.exports = plugin(\n           model: this._srcDropdownModel,\n         })\n       )\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "79f335be0130efdc2c43ba328324c6b5061848b3"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTA2NDM0MA==", "bodyText": "I could be wrong but I think EnumInput was intended to be a generic dropdown component (plus a filter capability) - it shouldn't be aware of sources or attributes. Can we move this logic to a higher level component?", "url": "https://github.com/codice/ddf/pull/5827#discussion_r379064340", "createdAt": "2020-02-13T19:14:41Z", "author": {"login": "mojogitoverhere"}, "path": "ui/packages/catalog-ui-search/src/main/webapp/react-component/inputs/enum-input/enum-input.js", "diffHunk": "@@ -13,37 +13,89 @@\n  *\n  **/\n import React, { useState } from 'react'\n+\n import Dropdown from '../../dropdown'\n-import { Menu, MenuItem } from '../../menu'\n+import { Menu, MenuItemDisabled } from '../../menu'\n import TextField from '../../text-field'\n import styled from 'styled-components'\n import { getFilteredSuggestions, inputMatchesSuggestions } from './enumHelper'\n import PropTypes from 'prop-types'\n-\n+const sources = require('../../../component/singletons/sources-instance')\n const TextWrapper = styled.div`\n   padding: ${({ theme }) => theme.minimumSpacing};\n `\n-\n const EnumMenuItem = props => (\n-  <MenuItem {...props} style={{ paddingLeft: '1.5rem' }} />\n+  <MenuItemDisabled {...props} style={{ paddingLeft: '1.5rem' }} />\n )\n \n+const UnsupportedAttribute = styled.div`", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "79f335be0130efdc2c43ba328324c6b5061848b3"}, "originalPosition": 23}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU4NDg3NjIz", "url": "https://github.com/codice/ddf/pull/5827#pullrequestreview-358487623", "createdAt": "2020-02-13T19:24:02Z", "commit": {"oid": "79f335be0130efdc2c43ba328324c6b5061848b3"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QxOToyNjo0MVrOFpgpcg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QxOTo0NjozNFrOFphRfw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTA3MDgzNA==", "bodyText": "Camel-cased identifiers that also start with a capital letter are typically used for class / type names\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            const isAttributeDisabled = (AllSupportedAttributes, currValue) => {\n          \n          \n            \n            const isAttributeDisabled = (allSupportedAttributes, currValue) => {", "url": "https://github.com/codice/ddf/pull/5827#discussion_r379070834", "createdAt": "2020-02-13T19:26:41Z", "author": {"login": "mojogitoverhere"}, "path": "ui/packages/catalog-ui-search/src/main/webapp/react-component/inputs/enum-input/enum-input.js", "diffHunk": "@@ -13,37 +13,89 @@\n  *\n  **/\n import React, { useState } from 'react'\n+\n import Dropdown from '../../dropdown'\n-import { Menu, MenuItem } from '../../menu'\n+import { Menu, MenuItemDisabled } from '../../menu'\n import TextField from '../../text-field'\n import styled from 'styled-components'\n import { getFilteredSuggestions, inputMatchesSuggestions } from './enumHelper'\n import PropTypes from 'prop-types'\n-\n+const sources = require('../../../component/singletons/sources-instance')\n const TextWrapper = styled.div`\n   padding: ${({ theme }) => theme.minimumSpacing};\n `\n-\n const EnumMenuItem = props => (\n-  <MenuItem {...props} style={{ paddingLeft: '1.5rem' }} />\n+  <MenuItemDisabled {...props} style={{ paddingLeft: '1.5rem' }} />\n )\n \n+const UnsupportedAttribute = styled.div`\n+border-style: solid\n+border-color: red\n+`\n+\n+const isAttributeDisabled = (AllSupportedAttributes, currValue) => {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "79f335be0130efdc2c43ba328324c6b5061848b3"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTA3MzE3MQ==", "bodyText": "This can be simplified to\nreturn allSupportedAttributes.length > 0 && allSupportedAttributes.indexOf(currValue) == -1", "url": "https://github.com/codice/ddf/pull/5827#discussion_r379073171", "createdAt": "2020-02-13T19:30:48Z", "author": {"login": "mojogitoverhere"}, "path": "ui/packages/catalog-ui-search/src/main/webapp/react-component/inputs/enum-input/enum-input.js", "diffHunk": "@@ -13,37 +13,89 @@\n  *\n  **/\n import React, { useState } from 'react'\n+\n import Dropdown from '../../dropdown'\n-import { Menu, MenuItem } from '../../menu'\n+import { Menu, MenuItemDisabled } from '../../menu'\n import TextField from '../../text-field'\n import styled from 'styled-components'\n import { getFilteredSuggestions, inputMatchesSuggestions } from './enumHelper'\n import PropTypes from 'prop-types'\n-\n+const sources = require('../../../component/singletons/sources-instance')\n const TextWrapper = styled.div`\n   padding: ${({ theme }) => theme.minimumSpacing};\n `\n-\n const EnumMenuItem = props => (\n-  <MenuItem {...props} style={{ paddingLeft: '1.5rem' }} />\n+  <MenuItemDisabled {...props} style={{ paddingLeft: '1.5rem' }} />\n )\n \n+const UnsupportedAttribute = styled.div`\n+border-style: solid\n+border-color: red\n+`\n+\n+const isAttributeDisabled = (AllSupportedAttributes, currValue) => {\n+  //All attributes are supported\n+  if (AllSupportedAttributes.length == 0) {\n+    return false\n+  }\n+  //If attribute is supported  dont disable the option\n+  if (AllSupportedAttributes.indexOf(currValue) >= 0) {\n+    return false\n+  }\n+  //attribute was not found in the supported list therefore disable the option\n+  return true", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "79f335be0130efdc2c43ba328324c6b5061848b3"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTA3NTE2Mg==", "bodyText": "Consider chaining these calls together\nconst allSupportedAttributes = sources.models.filter(source => settingsModel.includes(source.id))\n                                             .map(sourceSelected => sourceSelected.attributes.supportedAttributes)\n                                             .flat()", "url": "https://github.com/codice/ddf/pull/5827#discussion_r379075162", "createdAt": "2020-02-13T19:34:51Z", "author": {"login": "mojogitoverhere"}, "path": "ui/packages/catalog-ui-search/src/main/webapp/react-component/inputs/enum-input/enum-input.js", "diffHunk": "@@ -13,37 +13,89 @@\n  *\n  **/\n import React, { useState } from 'react'\n+\n import Dropdown from '../../dropdown'\n-import { Menu, MenuItem } from '../../menu'\n+import { Menu, MenuItemDisabled } from '../../menu'\n import TextField from '../../text-field'\n import styled from 'styled-components'\n import { getFilteredSuggestions, inputMatchesSuggestions } from './enumHelper'\n import PropTypes from 'prop-types'\n-\n+const sources = require('../../../component/singletons/sources-instance')\n const TextWrapper = styled.div`\n   padding: ${({ theme }) => theme.minimumSpacing};\n `\n-\n const EnumMenuItem = props => (\n-  <MenuItem {...props} style={{ paddingLeft: '1.5rem' }} />\n+  <MenuItemDisabled {...props} style={{ paddingLeft: '1.5rem' }} />\n )\n \n+const UnsupportedAttribute = styled.div`\n+border-style: solid\n+border-color: red\n+`\n+\n+const isAttributeDisabled = (AllSupportedAttributes, currValue) => {\n+  //All attributes are supported\n+  if (AllSupportedAttributes.length == 0) {\n+    return false\n+  }\n+  //If attribute is supported  dont disable the option\n+  if (AllSupportedAttributes.indexOf(currValue) >= 0) {\n+    return false\n+  }\n+  //attribute was not found in the supported list therefore disable the option\n+  return true\n+}\n+const isAttributeUnsupported = (currValue, settingsModel) => {\n+  // if no source is selected and settingsModel is present from parent component we want to present all attributes as available\n+  if (settingsModel != undefined && settingsModel.length == 0) {\n+        return false;\n+  } else {\n+    // if settingsModel is not available treat it as all attributes are supported\n+    if (settingsModel == undefined) {\n+      return false;\n+    }\n+\n+    let sourceModelsSelected = sources.models.filter(source =>\n+      settingsModel.includes(source.id)\n+    )\n+\n+    let AllSupportedAttributes = sourceModelsSelected.map(sourceSelected => {\n+      return sourceSelected.attributes.supportedAttributes\n+    })\n+\n+    AllSupportedAttributes = AllSupportedAttributes.flat()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "79f335be0130efdc2c43ba328324c6b5061848b3"}, "originalPosition": 58}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTA4MTA4Nw==", "bodyText": "In DDF, content stores are called sources. We'll have to fetch this string using the i18n service", "url": "https://github.com/codice/ddf/pull/5827#discussion_r379081087", "createdAt": "2020-02-13T19:46:34Z", "author": {"login": "mojogitoverhere"}, "path": "ui/packages/catalog-ui-search/src/main/webapp/react-component/inputs/enum-input/enum-input.js", "diffHunk": "@@ -53,23 +105,49 @@ const EnumInput = ({\n           onChange={setInput}\n         />\n       </TextWrapper>\n-      <Menu value={value} onChange={onChange}>\n+      <Menu value={value} onChange={onChange} class=\"fa\">\n         {allowCustom &&\n           displayInput && (\n             <EnumMenuItem value={input}>{input} (custom)</EnumMenuItem>\n           )}\n         {filteredSuggestions.map(suggestion => {\n           return (\n-            <EnumMenuItem key={suggestion.value} value={suggestion.value}>\n+            <EnumMenuItem\n+              title={\n+                isAttributeUnsupportedHelper(settingsModel, suggestion)\n+                  ? 'Attribute is unsupported by the content store(s) selected'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "79f335be0130efdc2c43ba328324c6b5061848b3"}, "originalPosition": 111}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU4NDk1NTM0", "url": "https://github.com/codice/ddf/pull/5827#pullrequestreview-358495534", "createdAt": "2020-02-13T19:35:48Z", "commit": {"oid": "79f335be0130efdc2c43ba328324c6b5061848b3"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QxOTozNTo0OFrOFpg8Fg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QyMDoxMDozNVrOFph-Wg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTA3NTYwNg==", "bodyText": "Can you add a disabled prop to MenuItem instead?", "url": "https://github.com/codice/ddf/pull/5827#discussion_r379075606", "createdAt": "2020-02-13T19:35:48Z", "author": {"login": "samuelechu"}, "path": "ui/packages/catalog-ui-search/src/main/webapp/react-component/menu/menu.tsx", "diffHunk": "@@ -249,5 +248,78 @@ export const MenuItem = (props: MenuItemProps) => {\n   )\n }\n \n+type MenutItemPropsDisabled = {\n+  /** A value to represent the current Item */\n+  value?: any\n+  /**\n+   * Children to display for menu item.\n+   *\n+   * @default value\n+   */\n+  children?: any\n+  /** Optional styles for root element. */\n+  style?: object\n+  onClick?: any\n+  selected?: any\n+  active?: any\n+  onHover?: any\n+  disabled?: any\n+  title?: any\n+}\n+\n+const ItemRootDisabled = styled.option<{ active: boolean; disabled: boolean }>`\n+  position: relative;\n+  padding: 0px ${({ theme }) => theme.minimumSpacing};\n+  padding-right: ${({ theme }) => theme.minimumButtonSize};\n+  box-sizing: border-box;\n+  height: ${({ theme }) => theme.minimumButtonSize};\n+  line-height: ${({ theme }) => theme.minimumButtonSize};\n+  cursor: pointer;\n+  -webkit-touch-callout: none; /* iOS Safari */\n+  -webkit-user-select: none; /* Safari */\n+  -khtml-user-select: none; /* Konqueror HTML */\n+  -moz-user-select: none; /* Firefox */\n+  -ms-user-select: none; /* Internet Explorer/Edge */\n+  user-select: none; /* Non-prefixed version, currently supported by Chrome and Opera */\n+  white-space: nowrap;\n+  overflow: hidden;\n+  text-overflow: ellipsis;\n+  ${({ theme, active, disabled }) =>\n+    active && !disabled\n+      ? `box-shadow: inset 0px 0px 0px 1px  ${theme.primaryColor};`\n+      : ''}\n+  ${({ active }) => (active ? 'font-weight: bold;' : '')}\n+  ${({ active, disabled }) => (active && !disabled ? after : '')}\n+  background: ${props =>\n+    props.active && !props.disabled ? background(props) : 'inherit'};\n+  color: ${props => (props.disabled ? 'lightgrey' : foreground)};\n+`\n+export const MenuItemDisabled = (props: MenutItemPropsDisabled) => {\n+  const {\n+    value,\n+    children,\n+    onClick,\n+    active,\n+    onHover,\n+    style,\n+    disabled,\n+    title,\n+  } = props\n+  return (\n+    <ItemRootDisabled\n+      disabled={disabled}\n+      active={active}\n+      style={style}\n+      onMouseEnter={() => onHover(value)}\n+      onFocus={() => onHover(value)}\n+      tabIndex={0}\n+      onClick={() => onClick(value)}\n+      title={title}\n+    >\n+      {children || value}\n+    </ItemRootDisabled>\n+  )\n+}\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "79f335be0130efdc2c43ba328324c6b5061848b3"}, "originalPosition": 84}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTA3NzMzNg==", "bodyText": "Why is this change needed?", "url": "https://github.com/codice/ddf/pull/5827#discussion_r379077336", "createdAt": "2020-02-13T19:39:09Z", "author": {"login": "samuelechu"}, "path": "ui/packages/catalog-ui-search/src/main/webapp/react-component/inputs/enum-input/enum-input.js", "diffHunk": "@@ -53,23 +105,49 @@ const EnumInput = ({\n           onChange={setInput}\n         />\n       </TextWrapper>\n-      <Menu value={value} onChange={onChange}>\n+      <Menu value={value} onChange={onChange} class=\"fa\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "79f335be0130efdc2c43ba328324c6b5061848b3"}, "originalPosition": 100}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTA4ODI5Mg==", "bodyText": "Can you pass down a list of sources instead of a backbone model?", "url": "https://github.com/codice/ddf/pull/5827#discussion_r379088292", "createdAt": "2020-02-13T20:01:07Z", "author": {"login": "samuelechu"}, "path": "ui/packages/catalog-ui-search/src/main/webapp/component/query-advanced/query-advanced.view.js", "diffHunk": "@@ -135,9 +140,9 @@ module.exports = Marionette.LayoutView.extend({\n         filter,\n         isForm: this.options.isForm || false,\n         isFormBuilder: this.options.isFormBuilder || false,\n+        settingsModel: this.querySettings.currentView.model", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "79f335be0130efdc2c43ba328324c6b5061848b3"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTA4OTYzMw==", "bodyText": "Why is this needed?", "url": "https://github.com/codice/ddf/pull/5827#discussion_r379089633", "createdAt": "2020-02-13T20:04:08Z", "author": {"login": "samuelechu"}, "path": "ui/packages/catalog-ui-search/src/main/webapp/component/filter/filter.view.js", "diffHunk": "@@ -41,11 +42,12 @@ module.exports = Marionette.LayoutView.extend({\n     this.model.destroy()\n   },\n   onChange(state) {\n-    const { attribute, comparator, value } = state\n+    const { attribute, comparator, value, settingsModel } = state\n     this.model.set({\n       type: attribute,\n       comparator,\n       value: [value],\n+      settingsModel", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "79f335be0130efdc2c43ba328324c6b5061848b3"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTA5MjU3MA==", "bodyText": "You should probably compute the list of supported attributes outside the JSX instead", "url": "https://github.com/codice/ddf/pull/5827#discussion_r379092570", "createdAt": "2020-02-13T20:10:35Z", "author": {"login": "samuelechu"}, "path": "ui/packages/catalog-ui-search/src/main/webapp/react-component/inputs/enum-input/enum-input.js", "diffHunk": "@@ -53,23 +105,49 @@ const EnumInput = ({\n           onChange={setInput}\n         />\n       </TextWrapper>\n-      <Menu value={value} onChange={onChange}>\n+      <Menu value={value} onChange={onChange} class=\"fa\">\n         {allowCustom &&\n           displayInput && (\n             <EnumMenuItem value={input}>{input} (custom)</EnumMenuItem>\n           )}\n         {filteredSuggestions.map(suggestion => {\n           return (\n-            <EnumMenuItem key={suggestion.value} value={suggestion.value}>\n+            <EnumMenuItem\n+              title={\n+                isAttributeUnsupportedHelper(settingsModel, suggestion)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "79f335be0130efdc2c43ba328324c6b5061848b3"}, "originalPosition": 110}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3067f281b5cb4e1b61e596537c6bd89901c99ba3", "author": {"user": {"login": "mazarag2", "name": null}}, "url": "https://github.com/codice/ddf/commit/3067f281b5cb4e1b61e596537c6bd89901c99ba3", "committedDate": "2020-02-14T16:07:21Z", "message": "Update ui/packages/catalog-ui-search/src/main/webapp/react-component/inputs/enum-input/enum-input.js\n\nCo-Authored-By: David Morales <david.morales@connexta.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5c340537e73756a80d9a8e640ff30076029c5d63", "author": {"user": {"login": "mazarag2", "name": null}}, "url": "https://github.com/codice/ddf/commit/5c340537e73756a80d9a8e640ff30076029c5d63", "committedDate": "2020-02-14T16:29:18Z", "message": "Update ui/packages/catalog-ui-search/src/main/webapp/component/filter-builder/filter-builder.view.js\n\nCo-Authored-By: David Morales <david.morales@connexta.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "583c729d54cbd592fdc2c8e0bbd05f3a0e05b5ce", "author": {"user": {"login": "mazarag2", "name": null}}, "url": "https://github.com/codice/ddf/commit/583c729d54cbd592fdc2c8e0bbd05f3a0e05b5ce", "committedDate": "2020-02-14T17:24:28Z", "message": "5652 pass src downn instead model"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "abbd0ed71f1119d61bc270012156995c5d982054", "author": {"user": {"login": "mazarag2", "name": null}}, "url": "https://github.com/codice/ddf/commit/abbd0ed71f1119d61bc270012156995c5d982054", "committedDate": "2020-02-14T23:13:31Z", "message": "5652 refactor to bring supportedAttribute logic to filter and send listOfAttributes as a prop"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "23b9aaaf0c4b9245dee7d6252b7d5f2e4d56a879", "author": {"user": {"login": "mazarag2", "name": null}}, "url": "https://github.com/codice/ddf/commit/23b9aaaf0c4b9245dee7d6252b7d5f2e4d56a879", "committedDate": "2020-02-14T23:30:55Z", "message": "5652 simplify logic for disabling attribute"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU5MzY0MTEy", "url": "https://github.com/codice/ddf/pull/5827#pullrequestreview-359364112", "createdAt": "2020-02-15T20:11:09Z", "commit": {"oid": "23b9aaaf0c4b9245dee7d6252b7d5f2e4d56a879"}, "state": "COMMENTED", "comments": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNVQyMDoxMToxMFrOFqQaJA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNVQyMDo1MDoyN1rOFqQhwg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTg1MzM0OA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    settingsModel: this.querySettings.currentView.model.attributes.src\n          \n          \n            \n                    settingsModel: this.querySettings.currentView.model.attributes.src,\n          \n      \n    \n    \n  \n\nbrought to you by /projects/ddf/ui>> yarn format -w", "url": "https://github.com/codice/ddf/pull/5827#discussion_r379853348", "createdAt": "2020-02-15T20:11:10Z", "author": {"login": "kentmorrissey"}, "path": "ui/packages/catalog-ui-search/src/main/webapp/component/query-advanced/query-advanced.view.js", "diffHunk": "@@ -135,9 +140,9 @@ module.exports = Marionette.LayoutView.extend({\n         filter,\n         isForm: this.options.isForm || false,\n         isFormBuilder: this.options.isFormBuilder || false,\n+        settingsModel: this.querySettings.currentView.model.attributes.src", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "23b9aaaf0c4b9245dee7d6252b7d5f2e4d56a879"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTg1MzQyMg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                if(settingsModel.length == 0){\n          \n          \n            \n                if (settingsModel.length == 0) {\n          \n      \n    \n    \n  \n\nbrought to you by /projects/ddf/ui>> yarn format -w", "url": "https://github.com/codice/ddf/pull/5827#discussion_r379853422", "createdAt": "2020-02-15T20:12:43Z", "author": {"login": "kentmorrissey"}, "path": "ui/packages/catalog-ui-search/src/main/webapp/react-component/filter/filter.js", "diffHunk": "@@ -82,7 +81,20 @@ class Filter extends React.Component {\n   componentDidMount() {\n     this.updateSuggestions()\n   }\n+  getListofSupportedAttributes = (settingsModel) => {\n+    // if no source is selected and settingsModel is present from parent component we want to present all attributes as available \n+    if(settingsModel.length == 0){", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "23b9aaaf0c4b9245dee7d6252b7d5f2e4d56a879"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTg1Mzc5OA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                      settingsModel={this.getListofSupportedAttributes(this.props.settingsModel)}\n          \n          \n            \n                      settingsModel={this.getListOfSupportedAttributes(\n          \n          \n            \n                        this.props.settingsModel\n          \n          \n            \n                      )}\n          \n      \n    \n    \n  \n\nbrought to you by /projects/ddf/ui>> yarn format -w", "url": "https://github.com/codice/ddf/pull/5827#discussion_r379853798", "createdAt": "2020-02-15T20:20:41Z", "author": {"login": "kentmorrissey"}, "path": "ui/packages/catalog-ui-search/src/main/webapp/react-component/filter/filter.js", "diffHunk": "@@ -100,6 +112,7 @@ class Filter extends React.Component {\n           includedAttributes={this.props.includedAttributes}\n           editing={this.props.editing}\n           onChange={this.updateAttribute}\n+          settingsModel={this.getListofSupportedAttributes(this.props.settingsModel)}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "23b9aaaf0c4b9245dee7d6252b7d5f2e4d56a879"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTg1NDE1MA==", "bodyText": "", "url": "https://github.com/codice/ddf/pull/5827#discussion_r379854150", "createdAt": "2020-02-15T20:27:37Z", "author": {"login": "kentmorrissey"}, "path": "ui/packages/catalog-ui-search/src/main/webapp/react-component/inputs/enum-input/enum-input.js", "diffHunk": "@@ -13,37 +13,51 @@\n  *\n  **/\n import React, { useState } from 'react'\n+\n import Dropdown from '../../dropdown'\n-import { Menu, MenuItem } from '../../menu'\n+import { Menu, MenuItemDisabled } from '../../menu'\n import TextField from '../../text-field'\n import styled from 'styled-components'\n import { getFilteredSuggestions, inputMatchesSuggestions } from './enumHelper'\n import PropTypes from 'prop-types'\n-\n+const sources = require('../../../component/singletons/sources-instance')", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "23b9aaaf0c4b9245dee7d6252b7d5f2e4d56a879"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTg1NDY5MA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              return allSupportedAttributes.length > 0 && allSupportedAttributes.indexOf(currValue) == -1;\n          \n          \n            \n              return (\n          \n          \n            \n                allSupportedAttributes.length > 0 &&\n          \n          \n            \n                allSupportedAttributes.indexOf(currValue) == -1\n          \n          \n            \n              )\n          \n      \n    \n    \n  \n\nbrought to you by /projects/ddf/ui>> yarn format -w", "url": "https://github.com/codice/ddf/pull/5827#discussion_r379854690", "createdAt": "2020-02-15T20:37:43Z", "author": {"login": "kentmorrissey"}, "path": "ui/packages/catalog-ui-search/src/main/webapp/react-component/inputs/enum-input/enum-input.js", "diffHunk": "@@ -13,37 +13,51 @@\n  *\n  **/\n import React, { useState } from 'react'\n+\n import Dropdown from '../../dropdown'\n-import { Menu, MenuItem } from '../../menu'\n+import { Menu, MenuItemDisabled } from '../../menu'\n import TextField from '../../text-field'\n import styled from 'styled-components'\n import { getFilteredSuggestions, inputMatchesSuggestions } from './enumHelper'\n import PropTypes from 'prop-types'\n-\n+const sources = require('../../../component/singletons/sources-instance')\n const TextWrapper = styled.div`\n   padding: ${({ theme }) => theme.minimumSpacing};\n `\n-\n const EnumMenuItem = props => (\n-  <MenuItem {...props} style={{ paddingLeft: '1.5rem' }} />\n+  <MenuItemDisabled {...props} style={{ paddingLeft: '1.5rem' }} />\n )\n \n+const UnsupportedAttribute = styled.div`\n+border-style: solid\n+border-color: red\n+`\n+\n+const isAttributeDisabled = (allSupportedAttributes, currValue) => {\n+  \n+  return allSupportedAttributes.length > 0 && allSupportedAttributes.indexOf(currValue) == -1;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "23b9aaaf0c4b9245dee7d6252b7d5f2e4d56a879"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTg1NDk4MA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            isAttributeDisabled(settingsModel,suggestion.value)\n          \n          \n            \n                            isAttributeDisabled(settingsModel, suggestion.value)\n          \n      \n    \n    \n  \n\nbrought to you by /projects/ddf/ui>> yarn format -w", "url": "https://github.com/codice/ddf/pull/5827#discussion_r379854980", "createdAt": "2020-02-15T20:44:01Z", "author": {"login": "kentmorrissey"}, "path": "ui/packages/catalog-ui-search/src/main/webapp/react-component/inputs/enum-input/enum-input.js", "diffHunk": "@@ -53,23 +67,49 @@ const EnumInput = ({\n           onChange={setInput}\n         />\n       </TextWrapper>\n-      <Menu value={value} onChange={onChange}>\n+      <Menu value={value} onChange={onChange} class=\"fa\">\n         {allowCustom &&\n           displayInput && (\n             <EnumMenuItem value={input}>{input} (custom)</EnumMenuItem>\n           )}\n         {filteredSuggestions.map(suggestion => {\n           return (\n-            <EnumMenuItem key={suggestion.value} value={suggestion.value}>\n+            <EnumMenuItem\n+              title={\n+                isAttributeDisabled(settingsModel,suggestion.value)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "23b9aaaf0c4b9245dee7d6252b7d5f2e4d56a879"}, "originalPosition": 72}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTg1NTA0NA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                          disabled={isAttributeDisabled(settingsModel,suggestion.value)}\n          \n          \n            \n                          disabled={isAttributeDisabled(settingsModel, suggestion.value)}\n          \n      \n    \n    \n  \n\nbrought to you by /projects/ddf/ui>> yarn format -w", "url": "https://github.com/codice/ddf/pull/5827#discussion_r379855044", "createdAt": "2020-02-15T20:45:25Z", "author": {"login": "kentmorrissey"}, "path": "ui/packages/catalog-ui-search/src/main/webapp/react-component/inputs/enum-input/enum-input.js", "diffHunk": "@@ -53,23 +67,49 @@ const EnumInput = ({\n           onChange={setInput}\n         />\n       </TextWrapper>\n-      <Menu value={value} onChange={onChange}>\n+      <Menu value={value} onChange={onChange} class=\"fa\">\n         {allowCustom &&\n           displayInput && (\n             <EnumMenuItem value={input}>{input} (custom)</EnumMenuItem>\n           )}\n         {filteredSuggestions.map(suggestion => {\n           return (\n-            <EnumMenuItem key={suggestion.value} value={suggestion.value}>\n+            <EnumMenuItem\n+              title={\n+                isAttributeDisabled(settingsModel,suggestion.value)\n+                  ? 'Attribute is unsupported by the content store(s) selected'\n+                  : ''\n+              }\n+              key={suggestion.value}\n+              value={suggestion.value}\n+              disabled={isAttributeDisabled(settingsModel,suggestion.value)}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "23b9aaaf0c4b9245dee7d6252b7d5f2e4d56a879"}, "originalPosition": 78}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTg1NTEyOQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                  {isAttributeDisabled(settingsModel,selected.value) ? (\n          \n          \n            \n                  {isAttributeDisabled(settingsModel, selected.value) ? (\n          \n      \n    \n    \n  \n\nbrought to you by /projects/ddf/ui>> yarn format -w", "url": "https://github.com/codice/ddf/pull/5827#discussion_r379855129", "createdAt": "2020-02-15T20:46:51Z", "author": {"login": "kentmorrissey"}, "path": "ui/packages/catalog-ui-search/src/main/webapp/react-component/inputs/enum-input/enum-input.js", "diffHunk": "@@ -53,23 +67,49 @@ const EnumInput = ({\n           onChange={setInput}\n         />\n       </TextWrapper>\n-      <Menu value={value} onChange={onChange}>\n+      <Menu value={value} onChange={onChange} class=\"fa\">\n         {allowCustom &&\n           displayInput && (\n             <EnumMenuItem value={input}>{input} (custom)</EnumMenuItem>\n           )}\n         {filteredSuggestions.map(suggestion => {\n           return (\n-            <EnumMenuItem key={suggestion.value} value={suggestion.value}>\n+            <EnumMenuItem\n+              title={\n+                isAttributeDisabled(settingsModel,suggestion.value)\n+                  ? 'Attribute is unsupported by the content store(s) selected'\n+                  : ''\n+              }\n+              key={suggestion.value}\n+              value={suggestion.value}\n+              disabled={isAttributeDisabled(settingsModel,suggestion.value)}\n+            >\n               {suggestion.label}\n             </EnumMenuItem>\n           )\n         })}\n       </Menu>\n     </Dropdown>\n   )\n+  \n+  return (\n+    <div>\n+      {isAttributeDisabled(settingsModel,selected.value) ? (", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "23b9aaaf0c4b9245dee7d6252b7d5f2e4d56a879"}, "originalPosition": 90}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTg1NTI5OA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                let allSupportedAttributes = sources.models.filter(source => settingsModel.includes(source.id))\n          \n          \n            \n                .map(sourceSelected => sourceSelected.attributes.supportedAttributes)\n          \n          \n            \n                .flat();\n          \n          \n            \n                return allSupportedAttributes;\n          \n          \n            \n                let allSupportedAttributes = sources.models\n          \n          \n            \n                  .filter(source => settingsModel.includes(source.id))\n          \n          \n            \n                  .map(sourceSelected => sourceSelected.attributes.supportedAttributes)\n          \n          \n            \n                  .flat()\n          \n          \n            \n                return allSupportedAttributes\n          \n      \n    \n    \n  \n\nbrought to you by /projects/ddf/ui>> yarn format -w", "url": "https://github.com/codice/ddf/pull/5827#discussion_r379855298", "createdAt": "2020-02-15T20:50:27Z", "author": {"login": "kentmorrissey"}, "path": "ui/packages/catalog-ui-search/src/main/webapp/react-component/filter/filter.js", "diffHunk": "@@ -82,7 +81,20 @@ class Filter extends React.Component {\n   componentDidMount() {\n     this.updateSuggestions()\n   }\n+  getListofSupportedAttributes = (settingsModel) => {\n+    // if no source is selected and settingsModel is present from parent component we want to present all attributes as available \n+    if(settingsModel.length == 0){\n+        return [];\n+    }\n+    if (settingsModel.includes('GIMS_GIN')) {\n+      return ['ext.alternate-identifier-qualifier']\n+    }\n \n+    let allSupportedAttributes = sources.models.filter(source => settingsModel.includes(source.id))\n+    .map(sourceSelected => sourceSelected.attributes.supportedAttributes)\n+    .flat();\n+    return allSupportedAttributes;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "23b9aaaf0c4b9245dee7d6252b7d5f2e4d56a879"}, "originalPosition": 33}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "adc960dc95ada85177fb8b0337283d76a1fce578", "author": {"user": {"login": "mazarag2", "name": null}}, "url": "https://github.com/codice/ddf/commit/adc960dc95ada85177fb8b0337283d76a1fce578", "committedDate": "2020-02-17T21:35:57Z", "message": "Update ui/packages/catalog-ui-search/src/main/webapp/component/query-advanced/query-advanced.view.js\n\nCo-Authored-By: kentmorrissey <kentmorrissey0@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2a9d5e800e67d1f73931707d608ea03627aca400", "author": {"user": {"login": "mazarag2", "name": null}}, "url": "https://github.com/codice/ddf/commit/2a9d5e800e67d1f73931707d608ea03627aca400", "committedDate": "2020-02-17T21:36:22Z", "message": "Update ui/packages/catalog-ui-search/src/main/webapp/react-component/filter/filter.js\n\nCo-Authored-By: kentmorrissey <kentmorrissey0@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d21aae4b411c808544cadd77ec02735f45986caa", "author": {"user": {"login": "mazarag2", "name": null}}, "url": "https://github.com/codice/ddf/commit/d21aae4b411c808544cadd77ec02735f45986caa", "committedDate": "2020-02-17T21:37:22Z", "message": "Update ui/packages/catalog-ui-search/src/main/webapp/react-component/inputs/enum-input/enum-input.js\n\nCo-Authored-By: kentmorrissey <kentmorrissey0@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dcd794e0551345eb08041e40aa918ea854823629", "author": {"user": {"login": "mazarag2", "name": null}}, "url": "https://github.com/codice/ddf/commit/dcd794e0551345eb08041e40aa918ea854823629", "committedDate": "2020-02-17T21:46:57Z", "message": "Update ui/packages/catalog-ui-search/src/main/webapp/react-component/inputs/enum-input/enum-input.js\n\nCo-Authored-By: kentmorrissey <kentmorrissey0@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "78a8bdf4c2622f3e168c61effcc14da8817ce0f8", "author": {"user": {"login": "mazarag2", "name": null}}, "url": "https://github.com/codice/ddf/commit/78a8bdf4c2622f3e168c61effcc14da8817ce0f8", "committedDate": "2020-02-17T21:47:18Z", "message": "Update ui/packages/catalog-ui-search/src/main/webapp/react-component/filter/filter.js\n\nCo-Authored-By: kentmorrissey <kentmorrissey0@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a66bd2b2c490dd6b026dbe728344b7549df8d60b", "author": {"user": {"login": "mazarag2", "name": null}}, "url": "https://github.com/codice/ddf/commit/a66bd2b2c490dd6b026dbe728344b7549df8d60b", "committedDate": "2020-02-17T21:47:42Z", "message": "Update ui/packages/catalog-ui-search/src/main/webapp/react-component/inputs/enum-input/enum-input.js\n\nCo-Authored-By: kentmorrissey <kentmorrissey0@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4d2c37222523e0f73793a0c18cd92813c33535f3", "author": {"user": {"login": "mazarag2", "name": null}}, "url": "https://github.com/codice/ddf/commit/4d2c37222523e0f73793a0c18cd92813c33535f3", "committedDate": "2020-02-17T21:48:03Z", "message": "Update ui/packages/catalog-ui-search/src/main/webapp/react-component/inputs/enum-input/enum-input.js\n\nCo-Authored-By: kentmorrissey <kentmorrissey0@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "09ea380b1e53b8ebb748e5412dae593bbc656101", "author": {"user": {"login": "mazarag2", "name": null}}, "url": "https://github.com/codice/ddf/commit/09ea380b1e53b8ebb748e5412dae593bbc656101", "committedDate": "2020-02-17T22:21:45Z", "message": "5652 formatting"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f01550edc6ebf27841818e4c5939d3194fb4f08a", "author": {"user": {"login": "mazarag2", "name": null}}, "url": "https://github.com/codice/ddf/commit/f01550edc6ebf27841818e4c5939d3194fb4f08a", "committedDate": "2020-02-17T22:32:47Z", "message": "5652 remove fa class"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "03c63512e8f11bc2bf3de31e66fd08e26b82bfd8", "author": {"user": {"login": "mazarag2", "name": null}}, "url": "https://github.com/codice/ddf/commit/03c63512e8f11bc2bf3de31e66fd08e26b82bfd8", "committedDate": "2020-02-18T01:34:36Z", "message": "5652 refactor method and format"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "faa4dfdaa3b4d263a0d4f1442b59d040e3e530f1", "author": {"user": {"login": "mazarag2", "name": null}}, "url": "https://github.com/codice/ddf/commit/faa4dfdaa3b4d263a0d4f1442b59d040e3e530f1", "committedDate": "2020-02-19T00:29:08Z", "message": "5652 remove unncessary settingsMOdel and fix form"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYxMzkxNzY0", "url": "https://github.com/codice/ddf/pull/5827#pullrequestreview-361391764", "createdAt": "2020-02-19T19:54:14Z", "commit": {"oid": "faa4dfdaa3b4d263a0d4f1442b59d040e3e530f1"}, "state": "COMMENTED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQxOTo1NDoxNFrOFr1diQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQyMDowMjo0OFrOFr1uOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTUwOTAwMQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                let settingsModel = this.props.settingsModel\n          \n          \n            \n                const settingsModel = this.props.settingsModel", "url": "https://github.com/codice/ddf/pull/5827#discussion_r381509001", "createdAt": "2020-02-19T19:54:14Z", "author": {"login": "mojogitoverhere"}, "path": "ui/packages/catalog-ui-search/src/main/webapp/react-component/filter/filter.js", "diffHunk": "@@ -125,7 +124,27 @@ class Filter extends React.Component {\n     this.updateSuggestions()\n     this.props.onChange(this.state)\n   }\n+  getListofSupportedAttributes = () => {\n+    // if no source is selected and settingsModel is present from parent component we want to present all attributes as available\n+    let settingsModel = this.props.settingsModel", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "faa4dfdaa3b4d263a0d4f1442b59d040e3e530f1"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTUxMDYxMQ==", "bodyText": "\u2757\ufe0f We should rename this variable (possibly supportedAttributes) if we aren't passing down the entire settings model anymore", "url": "https://github.com/codice/ddf/pull/5827#discussion_r381510611", "createdAt": "2020-02-19T19:57:31Z", "author": {"login": "mojogitoverhere"}, "path": "ui/packages/catalog-ui-search/src/main/webapp/react-component/filter/filter.js", "diffHunk": "@@ -100,6 +98,7 @@ class Filter extends React.Component {\n           includedAttributes={this.props.includedAttributes}\n           editing={this.props.editing}\n           onChange={this.updateAttribute}\n+          settingsModel={this.getListofSupportedAttributes()}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "faa4dfdaa3b4d263a0d4f1442b59d040e3e530f1"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTUxMDk0Mg==", "bodyText": "\u2757\ufe0f This block should be removed", "url": "https://github.com/codice/ddf/pull/5827#discussion_r381510942", "createdAt": "2020-02-19T19:58:11Z", "author": {"login": "mojogitoverhere"}, "path": "ui/packages/catalog-ui-search/src/main/webapp/react-component/filter/filter.js", "diffHunk": "@@ -125,7 +124,27 @@ class Filter extends React.Component {\n     this.updateSuggestions()\n     this.props.onChange(this.state)\n   }\n+  getListofSupportedAttributes = () => {\n+    // if no source is selected and settingsModel is present from parent component we want to present all attributes as available\n+    let settingsModel = this.props.settingsModel\n+    // if settingsModel is not paased down from another parentConponent (other than advanced) return emoty list\n+    if (!settingsModel) {\n+      return []\n+    }\n \n+    if (settingsModel.length == 0) {\n+      return []\n+    }\n+    if (settingsModel.includes('GIMS_GIN')) {\n+      return ['ext.alternate-identifier-qualifier']\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "faa4dfdaa3b4d263a0d4f1442b59d040e3e530f1"}, "originalPosition": 50}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTUxMTI1NQ==", "bodyText": "Some typos\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                // if settingsModel is not paased down from another parentConponent (other than advanced) return emoty list\n          \n          \n            \n                // if settingsModel is not passed down from another parent Component (other than advanced) return empty list", "url": "https://github.com/codice/ddf/pull/5827#discussion_r381511255", "createdAt": "2020-02-19T19:58:48Z", "author": {"login": "mojogitoverhere"}, "path": "ui/packages/catalog-ui-search/src/main/webapp/react-component/filter/filter.js", "diffHunk": "@@ -125,7 +124,27 @@ class Filter extends React.Component {\n     this.updateSuggestions()\n     this.props.onChange(this.state)\n   }\n+  getListofSupportedAttributes = () => {\n+    // if no source is selected and settingsModel is present from parent component we want to present all attributes as available\n+    let settingsModel = this.props.settingsModel\n+    // if settingsModel is not paased down from another parentConponent (other than advanced) return emoty list", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "faa4dfdaa3b4d263a0d4f1442b59d040e3e530f1"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTUxMjU3NA==", "bodyText": "\u270f\ufe0f These can be combined\n    if (!settingsModel || settingsModel.length === 0) {\n      return []\n    }", "url": "https://github.com/codice/ddf/pull/5827#discussion_r381512574", "createdAt": "2020-02-19T20:01:27Z", "author": {"login": "mojogitoverhere"}, "path": "ui/packages/catalog-ui-search/src/main/webapp/react-component/filter/filter.js", "diffHunk": "@@ -125,7 +124,27 @@ class Filter extends React.Component {\n     this.updateSuggestions()\n     this.props.onChange(this.state)\n   }\n+  getListofSupportedAttributes = () => {\n+    // if no source is selected and settingsModel is present from parent component we want to present all attributes as available\n+    let settingsModel = this.props.settingsModel\n+    // if settingsModel is not paased down from another parentConponent (other than advanced) return emoty list\n+    if (!settingsModel) {\n+      return []\n+    }\n \n+    if (settingsModel.length == 0) {\n+      return []\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "faa4dfdaa3b4d263a0d4f1442b59d040e3e530f1"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTUxMzI3Mg==", "bodyText": "We can return this result immediately and remove this intermediate variable (the function name is descriptive enough to figure out what the stream operations are doing)", "url": "https://github.com/codice/ddf/pull/5827#discussion_r381513272", "createdAt": "2020-02-19T20:02:48Z", "author": {"login": "mojogitoverhere"}, "path": "ui/packages/catalog-ui-search/src/main/webapp/react-component/filter/filter.js", "diffHunk": "@@ -125,7 +124,27 @@ class Filter extends React.Component {\n     this.updateSuggestions()\n     this.props.onChange(this.state)\n   }\n+  getListofSupportedAttributes = () => {\n+    // if no source is selected and settingsModel is present from parent component we want to present all attributes as available\n+    let settingsModel = this.props.settingsModel\n+    // if settingsModel is not paased down from another parentConponent (other than advanced) return emoty list\n+    if (!settingsModel) {\n+      return []\n+    }\n \n+    if (settingsModel.length == 0) {\n+      return []\n+    }\n+    if (settingsModel.includes('GIMS_GIN')) {\n+      return ['ext.alternate-identifier-qualifier']\n+    }\n+\n+    let allSupportedAttributes = sources.models", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "faa4dfdaa3b4d263a0d4f1442b59d040e3e530f1"}, "originalPosition": 52}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYxNDAxMzc4", "url": "https://github.com/codice/ddf/pull/5827#pullrequestreview-361401378", "createdAt": "2020-02-19T20:09:24Z", "commit": {"oid": "faa4dfdaa3b4d263a0d4f1442b59d040e3e530f1"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQyMDowOToyNVrOFr16MQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQyMDoyOTozOVrOFr2gMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTUxNjMzNw==", "bodyText": "\u270f\ufe0f I recommend reverting this change. The hanging comma on the last item makes it easier to add new keys in the future and makes it more obvious in the diff", "url": "https://github.com/codice/ddf/pull/5827#discussion_r381516337", "createdAt": "2020-02-19T20:09:25Z", "author": {"login": "mojogitoverhere"}, "path": "ui/packages/catalog-ui-search/src/main/webapp/component/filter/filter.view.js", "diffHunk": "@@ -45,7 +46,7 @@ module.exports = Marionette.LayoutView.extend({\n     this.model.set({\n       type: attribute,\n       comparator,\n-      value: [value],\n+      value: [value]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "faa4dfdaa3b4d263a0d4f1442b59d040e3e530f1"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTUyMzYyMw==", "bodyText": "This logic still feels like it should be raised to a higher level. I would expect each suggestion object to provide all these values, something like this (with some sensible defaults if they aren't set)\n            <EnumMenuItem\n              title={suggestion.title}\n              key={suggestion.value}\n              value={suggestion.value}\n              disabled={suggestion.disabled}\n            >", "url": "https://github.com/codice/ddf/pull/5827#discussion_r381523623", "createdAt": "2020-02-19T20:24:16Z", "author": {"login": "mojogitoverhere"}, "path": "ui/packages/catalog-ui-search/src/main/webapp/react-component/inputs/enum-input/enum-input.js", "diffHunk": "@@ -60,16 +79,41 @@ const EnumInput = ({\n           )}\n         {filteredSuggestions.map(suggestion => {\n           return (\n-            <EnumMenuItem key={suggestion.value} value={suggestion.value}>\n+            <EnumMenuItem\n+              title={\n+                isAttributeDisabled(settingsModel, suggestion)\n+                  ? `Attribute is unsupported by the ${SOURCES} selected`\n+                  : ''\n+              }\n+              key={suggestion.value}\n+              value={suggestion.value}\n+              disabled={isAttributeDisabled(settingsModel, suggestion)}\n+            >", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "faa4dfdaa3b4d263a0d4f1442b59d040e3e530f1"}, "originalPosition": 75}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTUyNjA2Ng==", "bodyText": "Consider collapsing the active and disabled options into a single active option since disabled is the same as !active. This also prevents weird state issues like having both of them set to true or false", "url": "https://github.com/codice/ddf/pull/5827#discussion_r381526066", "createdAt": "2020-02-19T20:29:39Z", "author": {"login": "mojogitoverhere"}, "path": "ui/packages/catalog-ui-search/src/main/webapp/react-component/menu/menu.tsx", "diffHunk": "@@ -249,5 +248,78 @@ export const MenuItem = (props: MenuItemProps) => {\n   )\n }\n \n+type MenutItemPropsDisabled = {\n+  /** A value to represent the current Item */\n+  value?: any\n+  /**\n+   * Children to display for menu item.\n+   *\n+   * @default value\n+   */\n+  children?: any\n+  /** Optional styles for root element. */\n+  style?: object\n+  onClick?: any\n+  selected?: any\n+  active?: any\n+  onHover?: any\n+  disabled?: any\n+  title?: any\n+}\n+\n+const ItemRootDisabled = styled.option<{ active: boolean; disabled: boolean }>`", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "faa4dfdaa3b4d263a0d4f1442b59d040e3e530f1"}, "originalPosition": 31}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c71f5bdbeff18ea62c4855ece3a3698c6d0bd2e3", "author": {"user": {"login": "mazarag2", "name": null}}, "url": "https://github.com/codice/ddf/commit/c71f5bdbeff18ea62c4855ece3a3698c6d0bd2e3", "committedDate": "2020-02-20T16:33:06Z", "message": "Update ui/packages/catalog-ui-search/src/main/webapp/react-component/filter/filter.js\n\nCo-Authored-By: David Morales <david.morales@connexta.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3839955aa710ab30c347cf34a9642068a7692a3d", "author": {"user": {"login": "mazarag2", "name": null}}, "url": "https://github.com/codice/ddf/commit/3839955aa710ab30c347cf34a9642068a7692a3d", "committedDate": "2020-02-20T16:34:35Z", "message": "Update ui/packages/catalog-ui-search/src/main/webapp/react-component/filter/filter.js\n\nCo-Authored-By: David Morales <david.morales@connexta.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "18acb1e861a70549cd376896fa5e639d1d83fd1b", "author": {"user": {"login": "mazarag2", "name": null}}, "url": "https://github.com/codice/ddf/commit/18acb1e861a70549cd376896fa5e639d1d83fd1b", "committedDate": "2020-02-22T00:35:51Z", "message": "5652 add Disabled prop to existing MenuItem and refactored disable behavior in enum-input"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d35394fb99254a73f411b296b690043f7a4858b4", "author": {"user": {"login": "mazarag2", "name": null}}, "url": "https://github.com/codice/ddf/commit/d35394fb99254a73f411b296b690043f7a4858b4", "committedDate": "2020-02-22T00:43:07Z", "message": "5652 format"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a7035aabb1eea0ff60a3ad41ff3a8b5cb9044d9c", "author": {"user": {"login": "mazarag2", "name": null}}, "url": "https://github.com/codice/ddf/commit/a7035aabb1eea0ff60a3ad41ff3a8b5cb9044d9c", "committedDate": "2020-02-24T15:08:49Z", "message": "5652 fix export in menu"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6b3702f4212a0ee7fc63cad4e4646ef1dc395947", "author": {"user": {"login": "mazarag2", "name": null}}, "url": "https://github.com/codice/ddf/commit/6b3702f4212a0ee7fc63cad4e4646ef1dc395947", "committedDate": "2020-02-24T18:31:31Z", "message": "5652 rename settingsModel to supportedAttributes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f4d0289e4dc3d0b44111297659db2aeb5105a82c", "author": {"user": {"login": "mazarag2", "name": null}}, "url": "https://github.com/codice/ddf/commit/f4d0289e4dc3d0b44111297659db2aeb5105a82c", "committedDate": "2020-02-24T18:52:19Z", "message": "5652 use disabled prop for tooltip"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fa3e47e87a66f0f830bf5f02c9e2706b99895c25", "author": {"user": {"login": "mazarag2", "name": null}}, "url": "https://github.com/codice/ddf/commit/fa3e47e87a66f0f830bf5f02c9e2706b99895c25", "committedDate": "2020-02-24T19:09:55Z", "message": "5652 remove space"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY1MjEyNzEz", "url": "https://github.com/codice/ddf/pull/5827#pullrequestreview-365212713", "createdAt": "2020-02-26T20:19:35Z", "commit": {"oid": "fa3e47e87a66f0f830bf5f02c9e2706b99895c25"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY1MjQ0MDEx", "url": "https://github.com/codice/ddf/pull/5827#pullrequestreview-365244011", "createdAt": "2020-02-26T21:10:02Z", "commit": {"oid": "fa3e47e87a66f0f830bf5f02c9e2706b99895c25"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQyMToxMDowMlrOFu8UVA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQyMToxMDowMlrOFu8UVA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDc2NzA2MA==", "bodyText": "Need to use the SOURCES var here instead of hard coding \"content store(s)\"", "url": "https://github.com/codice/ddf/pull/5827#discussion_r384767060", "createdAt": "2020-02-26T21:10:02Z", "author": {"login": "mojogitoverhere"}, "path": "ui/packages/catalog-ui-search/src/main/webapp/react-component/inputs/enum-input/enum-input.js", "diffHunk": "@@ -60,16 +98,37 @@ const EnumInput = ({\n           )}\n         {filteredSuggestions.map(suggestion => {\n           return (\n-            <EnumMenuItem key={suggestion.value} value={suggestion.value}>\n+            <EnumMenuItem\n+              key={suggestion.value}\n+              value={suggestion.value}\n+              supportedAttributes={supportedAttributes}\n+              disabled={suggestion.disabled}\n+            >\n               {suggestion.label}\n             </EnumMenuItem>\n           )\n         })}\n       </Menu>\n     </Dropdown>\n   )\n+  return (\n+    <div>\n+      {isAttributeDisabled(supportedAttributes, selected) ? (\n+        <div>\n+          <UnsupportedAttribute title=\"Attribute is unsupported by the content store(s) selected\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fa3e47e87a66f0f830bf5f02c9e2706b99895c25"}, "originalPosition": 100}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "22afcebbb8dd22906aecc0f33c136972db0dbc3d", "author": {"user": {"login": "mazarag2", "name": null}}, "url": "https://github.com/codice/ddf/commit/22afcebbb8dd22906aecc0f33c136972db0dbc3d", "committedDate": "2020-02-26T22:01:26Z", "message": "5652 refactor title string"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY1Mjc5NDU1", "url": "https://github.com/codice/ddf/pull/5827#pullrequestreview-365279455", "createdAt": "2020-02-26T22:07:29Z", "commit": {"oid": "22afcebbb8dd22906aecc0f33c136972db0dbc3d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY1MjgxODk2", "url": "https://github.com/codice/ddf/pull/5827#pullrequestreview-365281896", "createdAt": "2020-02-26T22:11:31Z", "commit": {"oid": "22afcebbb8dd22906aecc0f33c136972db0dbc3d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d30b6ca413d50069e9577174e3e2b4032f22c027", "author": {"user": {"login": "mazarag2", "name": null}}, "url": "https://github.com/codice/ddf/commit/d30b6ca413d50069e9577174e3e2b4032f22c027", "committedDate": "2020-02-26T22:36:36Z", "message": "5652 more format"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fb41775075b21480f145bb2c68e5a81f959c0657", "author": {"user": {"login": "mazarag2", "name": null}}, "url": "https://github.com/codice/ddf/commit/fb41775075b21480f145bb2c68e5a81f959c0657", "committedDate": "2020-03-05T19:12:08Z", "message": "5652 check in filter if attributes are present"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 8, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}