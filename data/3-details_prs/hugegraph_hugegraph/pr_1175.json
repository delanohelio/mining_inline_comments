{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg3MDA5ODEz", "number": 1175, "title": "add lpa/trianglecount/louvain computer api", "bodyText": "Change-Id: Icd203abfbd4dfdb2b9a5754d7f2cdd037ddc4503", "createdAt": "2020-09-15T03:38:06Z", "url": "https://github.com/hugegraph/hugegraph/pull/1175", "merged": true, "mergeCommit": {"oid": "0b5be065aa70cfe9c71e15bf19b7314527c58f2d"}, "closed": true, "closedAt": "2020-11-03T09:22:36Z", "author": {"login": "zhoney"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdJYZlMgFqTQ4OTM1MjcyNg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdY1EFjgFqTUyMjI3NzQ3MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg5MzUyNzI2", "url": "https://github.com/hugegraph/hugegraph/pull/1175#pullrequestreview-489352726", "createdAt": "2020-09-16T07:37:09Z", "commit": {"oid": "97b3ef13fce7dc22d366cc0726f9f55dcf60d5a7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQwNzozNzoxMFrOHSkBzQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQwNzozNzoxMFrOHSkBzQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTIyNjcwMQ==", "bodyText": "align with checkAndCollectParameters", "url": "https://github.com/hugegraph/hugegraph/pull/1175#discussion_r489226701", "createdAt": "2020-09-16T07:37:10Z", "author": {"login": "javeme"}, "path": "hugegraph-core/src/main/java/com/baidu/hugegraph/job/computer/TriangleCountComputer.java", "diffHunk": "@@ -0,0 +1,52 @@\n+/*\n+ * Copyright 2017 HugeGraph Authors\n+ *\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements. See the NOTICE file distributed with this\n+ * work for additional information regarding copyright ownership. The ASF\n+ * licenses this file to You under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package com.baidu.hugegraph.job.computer;\n+\n+import java.util.Map;\n+\n+import com.google.common.collect.ImmutableMap;\n+\n+public class TriangleCountComputer extends AbstractComputer {\n+\n+    public static final String TRIANGLE_COUNT = \"triangle_count\";\n+\n+    @Override\n+    public String name() {\n+        return TRIANGLE_COUNT;\n+    }\n+\n+    @Override\n+    public String category() {\n+        return CATEGORY_COMM;\n+    }\n+\n+    @Override\n+    public void checkParameters(Map<String, Object> parameters) {\n+        direction(parameters);\n+        degree(parameters);\n+    }\n+\n+    @Override\n+    protected Map<String, Object> checkAndCollectParameters(\n+            Map<String, Object> parameters) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "97b3ef13fce7dc22d366cc0726f9f55dcf60d5a7"}, "originalPosition": 48}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e9856e6a95af8855981e59f61036538566b7621a", "author": {"user": {"login": "zhoney", "name": null}}, "url": "https://github.com/hugegraph/hugegraph/commit/e9856e6a95af8855981e59f61036538566b7621a", "committedDate": "2020-09-22T09:34:34Z", "message": "add lpa/trianglecount/louvain computer api (#53)\n\nChange-Id: Icd203abfbd4dfdb2b9a5754d7f2cdd037ddc4503"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d5366c78168ba9438740757ae4fd8abbeef2352a", "author": {"user": {"login": "zhoney", "name": null}}, "url": "https://github.com/hugegraph/hugegraph/commit/d5366c78168ba9438740757ae4fd8abbeef2352a", "committedDate": "2020-09-22T09:35:48Z", "message": "improve\n\nChange-Id: Id69fbc03acac824f75615a6797eff90cf1f34bb9"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "97b3ef13fce7dc22d366cc0726f9f55dcf60d5a7", "author": {"user": {"login": "zhoney", "name": null}}, "url": "https://github.com/hugegraph/hugegraph/commit/97b3ef13fce7dc22d366cc0726f9f55dcf60d5a7", "committedDate": "2020-09-15T03:36:57Z", "message": "add lpa/trianglecount/louvain computer api (#53)\n\nChange-Id: Icd203abfbd4dfdb2b9a5754d7f2cdd037ddc4503"}, "afterCommit": {"oid": "d5366c78168ba9438740757ae4fd8abbeef2352a", "author": {"user": {"login": "zhoney", "name": null}}, "url": "https://github.com/hugegraph/hugegraph/commit/d5366c78168ba9438740757ae4fd8abbeef2352a", "committedDate": "2020-09-22T09:35:48Z", "message": "improve\n\nChange-Id: Id69fbc03acac824f75615a6797eff90cf1f34bb9"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIxNjA5MDU2", "url": "https://github.com/hugegraph/hugegraph/pull/1175#pullrequestreview-521609056", "createdAt": "2020-11-02T13:05:31Z", "commit": {"oid": "d5366c78168ba9438740757ae4fd8abbeef2352a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQxMzowNTozMVrOHsDimA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQxMzowNTozMVrOHsDimA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTk1NzQwMA==", "bodyText": "align", "url": "https://github.com/hugegraph/hugegraph/pull/1175#discussion_r515957400", "createdAt": "2020-11-02T13:05:31Z", "author": {"login": "javeme"}, "path": "hugegraph-core/src/main/java/com/baidu/hugegraph/job/computer/LouvainComputer.java", "diffHunk": "@@ -0,0 +1,128 @@\n+/*\n+ * Copyright 2017 HugeGraph Authors\n+ *\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements. See the NOTICE file distributed with this\n+ * work for additional information regarding copyright ownership. The ASF\n+ * licenses this file to You under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package com.baidu.hugegraph.job.computer;\n+\n+import java.util.Map;\n+\n+import com.baidu.hugegraph.traversal.algorithm.HugeTraverser;\n+import com.baidu.hugegraph.util.E;\n+import com.baidu.hugegraph.util.ParameterUtil;\n+import com.google.common.collect.ImmutableMap;\n+\n+public class LouvainComputer extends AbstractComputer {\n+\n+    public static final String LOUVAIN = \"louvain\";\n+\n+    public static final String KEY_STABLE_TIMES = \"stable_times\";\n+    public static final String KEY_PRECISION = \"precision\";\n+    public static final String KEY_SHOW_MOD= \"show_modularity\";\n+    public static final String KEY_SHOW_COMM = \"show_community\";\n+    public static final String KEY_EXPORT_COMM = \"export_community\";\n+    public static final String KEY_SKIP_ISOLATED = \"skip_isolated\";\n+    public static final String KEY_CLEAR = \"clear\";\n+\n+    public static final long DEFAULT_STABLE_TIMES= 3L;\n+    private static final int MAX_TIMES = 2048;\n+\n+    @Override\n+    public String name() {\n+        return LOUVAIN;\n+    }\n+\n+    @Override\n+    public String category() {\n+        return CATEGORY_COMM;\n+    }\n+\n+    @Override\n+    public void checkParameters(Map<String, Object> parameters) {\n+        times(parameters);\n+        stableTimes(parameters);\n+        precision(parameters);\n+        degree(parameters);\n+        showModularity(parameters);\n+        showCommunity(parameters);\n+        exportCommunity(parameters);\n+        skipIsolated(parameters);\n+        clearPass(parameters);\n+    }\n+\n+    @Override\n+    protected Map<String, Object> checkAndCollectParameters(\n+                                  Map<String, Object> parameters) {\n+        return ImmutableMap.of(TIMES, times(parameters),\n+                               PRECISION, precision(parameters),\n+                               DIRECTION, direction(parameters),\n+                               DEGREE, degree(parameters));\n+    }\n+\n+    protected static int stableTimes(Map<String, Object> parameters) {\n+        if (!parameters.containsKey(KEY_STABLE_TIMES)) {\n+            return (int) DEFAULT_STABLE_TIMES;\n+        }\n+        int times = ParameterUtil.parameterInt(parameters, KEY_STABLE_TIMES);\n+        HugeTraverser.checkPositiveOrNoLimit(times, KEY_STABLE_TIMES);\n+        E.checkArgument(times <= MAX_TIMES,\n+                        \"The maximum number of stable iterations is %s, \" +\n+                                \"but got %s\", MAX_TIMES, times);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d5366c78168ba9438740757ae4fd8abbeef2352a"}, "originalPosition": 84}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0fd0ecbf484f780cf03e6ec7902a2cbb58038345", "author": {"user": {"login": "zhoney", "name": null}}, "url": "https://github.com/hugegraph/hugegraph/commit/0fd0ecbf484f780cf03e6ec7902a2cbb58038345", "committedDate": "2020-11-02T13:16:54Z", "message": "improve\n\nChange-Id: I1cb8f9fe8ee430f1c6bd65ad122a90bb4b6c47a4"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIyMTc4NDU1", "url": "https://github.com/hugegraph/hugegraph/pull/1175#pullrequestreview-522178455", "createdAt": "2020-11-03T04:04:02Z", "commit": {"oid": "0fd0ecbf484f780cf03e6ec7902a2cbb58038345"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIyMjc3NDcw", "url": "https://github.com/hugegraph/hugegraph/pull/1175#pullrequestreview-522277470", "createdAt": "2020-11-03T08:40:51Z", "commit": {"oid": "0fd0ecbf484f780cf03e6ec7902a2cbb58038345"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2281, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}