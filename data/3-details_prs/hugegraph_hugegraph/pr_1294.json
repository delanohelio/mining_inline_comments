{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM1NTg4Nzg4", "number": 1294, "title": "Fix HBase init error when Kerberos is enabled", "bodyText": "This PR fix 2 errors when  Kerberos is enabled\uff0cas follws:\n1\u3001The script init-store.sh excludes /jre/lib/ext path\uff1b\n2\u3001The  hbase-site.xml can\u2018t be readed when HBase create configuration.", "createdAt": "2020-12-10T02:18:25Z", "url": "https://github.com/hugegraph/hugegraph/pull/1294", "merged": true, "mergeCommit": {"oid": "f0d1146a9406ebb1aa52f69fae2095d45a1a8a90"}, "closed": true, "closedAt": "2020-12-14T08:18:13Z", "author": {"login": "tmljob"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdko6DJgH2gAyNTM1NTg4Nzg4OjY3MDEwMjIyOWM5YTQ4OTFkMjc2NDU2NDU2MmY2ZjU4MmQ5N2IzZDI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdmBSUIAFqTU1MTEyNzcxMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "670102229c9a4891d2764564562f6f582d97b3d2", "author": {"user": {"login": "zhoney", "name": null}}, "url": "https://github.com/hugegraph/hugegraph/commit/670102229c9a4891d2764564562f6f582d97b3d2", "committedDate": "2020-12-10T01:18:07Z", "message": "set indexlabel invalid if create or rebuild failed (#1226)\n\n* set indexlabel invalid if create or rebuild failed\n* also check if indexlabel invalid when query by index\n* set vl/el to UNDELETED if fail to delete\n\nChange-Id: If890b3bd8c441b63642a2006479cf4ccca9ddf67"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "45cf281e2bdba6a19e1f8ba3ba770da4e795f0fc", "author": {"user": {"login": "tmljob", "name": null}}, "url": "https://github.com/hugegraph/hugegraph/commit/45cf281e2bdba6a19e1f8ba3ba770da4e795f0fc", "committedDate": "2020-12-10T01:23:50Z", "message": "Merge remote-tracking branch 'upstream/master'"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f59e71d644962652e13151a7a89a6b9a6952fa19", "author": {"user": {"login": "tmljob", "name": null}}, "url": "https://github.com/hugegraph/hugegraph/commit/f59e71d644962652e13151a7a89a6b9a6952fa19", "committedDate": "2020-12-10T02:05:34Z", "message": "Fix bug: hbase init error when kerberos is enabled\nfix #1292"}, "afterCommit": {"oid": "6c780f1a0842a06cea4b45ec44f4a0ecf5b382a8", "author": {"user": {"login": "tmljob", "name": null}}, "url": "https://github.com/hugegraph/hugegraph/commit/6c780f1a0842a06cea4b45ec44f4a0ecf5b382a8", "committedDate": "2020-12-10T03:24:06Z", "message": "Fix bug: hbase init error when kerberos is enabled\nfix #1292"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ4Nzk5MzIw", "url": "https://github.com/hugegraph/hugegraph/pull/1294#pullrequestreview-548799320", "createdAt": "2020-12-10T03:51:35Z", "commit": {"oid": "6c780f1a0842a06cea4b45ec44f4a0ecf5b382a8"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQwMzo1MTozNVrOIC0UDw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQwMzo1MzoyOFrOIC0WRg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTgyNTE2Nw==", "bodyText": "add $EXT var for \"$JAVA_HOME/jre/lib/ext\" and set -Djava.ext.dirs=$EXT:$LIB:$PLUGINS", "url": "https://github.com/hugegraph/hugegraph/pull/1294#discussion_r539825167", "createdAt": "2020-12-10T03:51:35Z", "author": {"login": "javeme"}, "path": "hugegraph-dist/src/assembly/static/bin/init-store.sh", "diffHunk": "@@ -30,7 +30,7 @@ cd $TOP\n \n echo \"Initializing HugeGraph Store...\"\n \n-$JAVA -cp $LIB/hugegraph-dist-*.jar -Djava.ext.dirs=$LIB:$PLUGINS \\\n+$JAVA -cp $LIB/hugegraph-dist-*.jar -Djava.ext.dirs=$LIB:$PLUGINS:$JAVA_HOME/jre/lib/ext \\", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6c780f1a0842a06cea4b45ec44f4a0ecf5b382a8"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTgyNTczNA==", "bodyText": "can it be null? don't addResource if hbaseSite is null", "url": "https://github.com/hugegraph/hugegraph/pull/1294#discussion_r539825734", "createdAt": "2020-12-10T03:53:28Z", "author": {"login": "javeme"}, "path": "hugegraph-hbase/src/main/java/com/baidu/hugegraph/backend/store/hbase/HbaseSessions.java", "diffHunk": "@@ -135,6 +136,9 @@ public synchronized void open() throws IOException {\n         hConfig.setInt(\"hbase.hconnection.threads.max\",\n                        config.get(HbaseOptions.HBASE_THREADS_MAX));\n \n+        String hbaseSite = config.get(HbaseOptions.HBASE_HBASE_SITE);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6c780f1a0842a06cea4b45ec44f4a0ecf5b382a8"}, "originalPosition": 12}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6c780f1a0842a06cea4b45ec44f4a0ecf5b382a8", "author": {"user": {"login": "tmljob", "name": null}}, "url": "https://github.com/hugegraph/hugegraph/commit/6c780f1a0842a06cea4b45ec44f4a0ecf5b382a8", "committedDate": "2020-12-10T03:24:06Z", "message": "Fix bug: hbase init error when kerberos is enabled\nfix #1292"}, "afterCommit": {"oid": "777f60d91e1a03e319396ec4d192aeda3b51864c", "author": {"user": {"login": "tmljob", "name": null}}, "url": "https://github.com/hugegraph/hugegraph/commit/777f60d91e1a03e319396ec4d192aeda3b51864c", "committedDate": "2020-12-10T05:36:00Z", "message": "Fix bug: hbase init error when kerberos is enabled\nfix #1292"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "777f60d91e1a03e319396ec4d192aeda3b51864c", "author": {"user": {"login": "tmljob", "name": null}}, "url": "https://github.com/hugegraph/hugegraph/commit/777f60d91e1a03e319396ec4d192aeda3b51864c", "committedDate": "2020-12-10T05:36:00Z", "message": "Fix bug: hbase init error when kerberos is enabled\nfix #1292"}, "afterCommit": {"oid": "51d2a6aea11365a4a8b43afdd21cd5e5a3d65ef1", "author": {"user": {"login": "tmljob", "name": null}}, "url": "https://github.com/hugegraph/hugegraph/commit/51d2a6aea11365a4a8b43afdd21cd5e5a3d65ef1", "committedDate": "2020-12-10T06:03:14Z", "message": "Fix bug: hbase init error when kerberos is enabled\nfix #1292"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "51d2a6aea11365a4a8b43afdd21cd5e5a3d65ef1", "author": {"user": {"login": "tmljob", "name": null}}, "url": "https://github.com/hugegraph/hugegraph/commit/51d2a6aea11365a4a8b43afdd21cd5e5a3d65ef1", "committedDate": "2020-12-10T06:03:14Z", "message": "Fix bug: hbase init error when kerberos is enabled\nfix #1292"}, "afterCommit": {"oid": "90092b8b8f9f580faefe75a7af371d2418c41f85", "author": {"user": {"login": "tmljob", "name": null}}, "url": "https://github.com/hugegraph/hugegraph/commit/90092b8b8f9f580faefe75a7af371d2418c41f85", "committedDate": "2020-12-10T09:36:12Z", "message": "Fix bug: hbase init error when kerberos is enabled\nfix #1292"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "90092b8b8f9f580faefe75a7af371d2418c41f85", "author": {"user": {"login": "tmljob", "name": null}}, "url": "https://github.com/hugegraph/hugegraph/commit/90092b8b8f9f580faefe75a7af371d2418c41f85", "committedDate": "2020-12-10T09:36:12Z", "message": "Fix bug: hbase init error when kerberos is enabled\nfix #1292"}, "afterCommit": {"oid": "967ef78d815c5cd32ef88551c5937b0bfa834a3e", "author": {"user": {"login": "tmljob", "name": null}}, "url": "https://github.com/hugegraph/hugegraph/commit/967ef78d815c5cd32ef88551c5937b0bfa834a3e", "committedDate": "2020-12-10T13:33:11Z", "message": "Fix bug: hbase init error when kerberos is enabled\nfix #1292"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ5MjMyMTg5", "url": "https://github.com/hugegraph/hugegraph/pull/1294#pullrequestreview-549232189", "createdAt": "2020-12-10T14:10:20Z", "commit": {"oid": "967ef78d815c5cd32ef88551c5937b0bfa834a3e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQxNDoxMDoyMFrOIDLEqQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQxNDoxMDoyMFrOIDLEqQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDE5ODA1Nw==", "bodyText": "what happens if there not exist file \"/etc/hbase/conf/hbase-site.xml\"", "url": "https://github.com/hugegraph/hugegraph/pull/1294#discussion_r540198057", "createdAt": "2020-12-10T14:10:20Z", "author": {"login": "javeme"}, "path": "hugegraph-hbase/src/main/java/com/baidu/hugegraph/backend/store/hbase/HbaseSessions.java", "diffHunk": "@@ -135,6 +136,9 @@ public synchronized void open() throws IOException {\n         hConfig.setInt(\"hbase.hconnection.threads.max\",\n                        config.get(HbaseOptions.HBASE_THREADS_MAX));\n \n+        String hbaseSite = config.get(HbaseOptions.HBASE_HBASE_SITE);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTgyNTczNA=="}, "originalCommit": {"oid": "6c780f1a0842a06cea4b45ec44f4a0ecf5b382a8"}, "originalPosition": 12}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "54a58f34e9f16b1b95026a978c78dd6f3f14fe4c", "author": {"user": {"login": "tmljob", "name": null}}, "url": "https://github.com/hugegraph/hugegraph/commit/54a58f34e9f16b1b95026a978c78dd6f3f14fe4c", "committedDate": "2020-12-10T14:27:21Z", "message": "Fix bug: hbase init error when kerberos is enabled\nfix #1292"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "967ef78d815c5cd32ef88551c5937b0bfa834a3e", "author": {"user": {"login": "tmljob", "name": null}}, "url": "https://github.com/hugegraph/hugegraph/commit/967ef78d815c5cd32ef88551c5937b0bfa834a3e", "committedDate": "2020-12-10T13:33:11Z", "message": "Fix bug: hbase init error when kerberos is enabled\nfix #1292"}, "afterCommit": {"oid": "54a58f34e9f16b1b95026a978c78dd6f3f14fe4c", "author": {"user": {"login": "tmljob", "name": null}}, "url": "https://github.com/hugegraph/hugegraph/commit/54a58f34e9f16b1b95026a978c78dd6f3f14fe4c", "committedDate": "2020-12-10T14:27:21Z", "message": "Fix bug: hbase init error when kerberos is enabled\nfix #1292"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ5Mjg1NzEx", "url": "https://github.com/hugegraph/hugegraph/pull/1294#pullrequestreview-549285711", "createdAt": "2020-12-10T15:02:31Z", "commit": {"oid": "54a58f34e9f16b1b95026a978c78dd6f3f14fe4c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ5ODA4NTY3", "url": "https://github.com/hugegraph/hugegraph/pull/1294#pullrequestreview-549808567", "createdAt": "2020-12-11T05:20:34Z", "commit": {"oid": "54a58f34e9f16b1b95026a978c78dd6f3f14fe4c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUxMTI3NzEy", "url": "https://github.com/hugegraph/hugegraph/pull/1294#pullrequestreview-551127712", "createdAt": "2020-12-14T08:16:16Z", "commit": {"oid": "54a58f34e9f16b1b95026a978c78dd6f3f14fe4c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2337, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}