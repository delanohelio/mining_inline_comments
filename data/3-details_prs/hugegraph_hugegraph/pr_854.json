{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc2NDA0NzAz", "number": 854, "title": "add graph name check in gremlin and rest config", "bodyText": "fixed: #850\nChange-Id: I5c4c82c784aebeb0bfe910107d7d4e19abc62d7c", "createdAt": "2020-02-18T03:55:40Z", "url": "https://github.com/hugegraph/hugegraph/pull/854", "merged": true, "mergeCommit": {"oid": "08af8f8fdccd04a1e3f1904f44728f46ab2e2b08"}, "closed": true, "closedAt": "2020-02-19T02:57:21Z", "author": {"login": "zhoney"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcFf7uoAFqTM2MDI1MTk1OQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcFtfSEAFqTM2MDgxMzI2MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYwMjUxOTU5", "url": "https://github.com/hugegraph/hugegraph/pull/854#pullrequestreview-360251959", "createdAt": "2020-02-18T11:08:00Z", "commit": {"oid": "51bcc8f5cf84660d53461e17d297ca78e93cafa2"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f36ed6002b76d5cadaa47712a3b95fa2ed23042c", "author": {"user": {"login": "zhoney", "name": null}}, "url": "https://github.com/hugegraph/hugegraph/commit/f36ed6002b76d5cadaa47712a3b95fa2ed23042c", "committedDate": "2020-02-18T12:15:36Z", "message": "add graph name check in gremlin and rest config\n\nfixed: #850\n\nChange-Id: I5c4c82c784aebeb0bfe910107d7d4e19abc62d7c"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "51bcc8f5cf84660d53461e17d297ca78e93cafa2", "author": {"user": {"login": "zhoney", "name": null}}, "url": "https://github.com/hugegraph/hugegraph/commit/51bcc8f5cf84660d53461e17d297ca78e93cafa2", "committedDate": "2020-02-16T17:03:44Z", "message": "forbid use \"-\" in graph name\n\nfixed: #850\n\nChange-Id: I5c4c82c784aebeb0bfe910107d7d4e19abc62d7c"}, "afterCommit": {"oid": "f36ed6002b76d5cadaa47712a3b95fa2ed23042c", "author": {"user": {"login": "zhoney", "name": null}}, "url": "https://github.com/hugegraph/hugegraph/commit/f36ed6002b76d5cadaa47712a3b95fa2ed23042c", "committedDate": "2020-02-18T12:15:36Z", "message": "add graph name check in gremlin and rest config\n\nfixed: #850\n\nChange-Id: I5c4c82c784aebeb0bfe910107d7d4e19abc62d7c"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYwMzk3MTY0", "url": "https://github.com/hugegraph/hugegraph/pull/854#pullrequestreview-360397164", "createdAt": "2020-02-18T14:47:44Z", "commit": {"oid": "f36ed6002b76d5cadaa47712a3b95fa2ed23042c"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQxNDo0Nzo0NVrOFrFKaw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQxNDo1MDo0OFrOFrFSLQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDcxNzY3NQ==", "bodyText": "move to line 90", "url": "https://github.com/hugegraph/hugegraph/pull/854#discussion_r380717675", "createdAt": "2020-02-18T14:47:45Z", "author": {"login": "javeme"}, "path": "hugegraph-dist/src/main/java/com/baidu/hugegraph/cmd/InitStore.java", "diffHunk": "@@ -57,6 +60,7 @@\n         exceptions.put(\"InvalidQueryException\", \"unconfigured table\");\n     }\n \n+    @SuppressWarnings(\"unchecked\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f36ed6002b76d5cadaa47712a3b95fa2ed23042c"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDcxNzg1NA==", "bodyText": "can we call graphName.getName()", "url": "https://github.com/hugegraph/hugegraph/pull/854#discussion_r380717854", "createdAt": "2020-02-18T14:48:01Z", "author": {"login": "javeme"}, "path": "hugegraph-dist/src/main/java/com/baidu/hugegraph/cmd/InitStore.java", "diffHunk": "@@ -83,7 +87,15 @@ public static void main(String[] args)\n                         \"Must contain at least one graph\");\n \n         for (ConfigurationNode graphName : graphNames) {\n+            String name = ((Map.Entry<String, Object>)\n+                           graphName.getReference()).getKey();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f36ed6002b76d5cadaa47712a3b95fa2ed23042c"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDcxOTY2MQ==", "bodyText": "seems better to add a method checkGraphName()", "url": "https://github.com/hugegraph/hugegraph/pull/854#discussion_r380719661", "createdAt": "2020-02-18T14:50:48Z", "author": {"login": "javeme"}, "path": "hugegraph-dist/src/main/java/com/baidu/hugegraph/cmd/InitStore.java", "diffHunk": "@@ -83,7 +87,15 @@ public static void main(String[] args)\n                         \"Must contain at least one graph\");\n \n         for (ConfigurationNode graphName : graphNames) {\n+            String name = ((Map.Entry<String, Object>)\n+                           graphName.getReference()).getKey();\n             String configPath = graphName.getValue().toString();\n+            E.checkArgument(name.matches(NAME_REGEX),\n+                            \"Invalid graph name '%s' in gremlin-server.yaml,\" +\n+                            \" valid graph name is up to 48 alpha-numeric \" +\n+                            \"characters and underscores and only letters are \" +\n+                            \"supported as first letter. \" +\n+                            \"Note: letter is case insensitive\", name);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f36ed6002b76d5cadaa47712a3b95fa2ed23042c"}, "originalPosition": 37}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dace2b21db2d84919ac14e0396322bda822b13f6", "author": {"user": {"login": "zhoney", "name": null}}, "url": "https://github.com/hugegraph/hugegraph/commit/dace2b21db2d84919ac14e0396322bda822b13f6", "committedDate": "2020-02-19T01:30:24Z", "message": "improve\n\nChange-Id: Ib2b74d6471e9298c8d48809df8ce0e32da66067c"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYwODAxOTMy", "url": "https://github.com/hugegraph/hugegraph/pull/854#pullrequestreview-360801932", "createdAt": "2020-02-19T02:14:38Z", "commit": {"oid": "dace2b21db2d84919ac14e0396322bda822b13f6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYwODEzMjYx", "url": "https://github.com/hugegraph/hugegraph/pull/854#pullrequestreview-360813261", "createdAt": "2020-02-19T02:55:36Z", "commit": {"oid": "dace2b21db2d84919ac14e0396322bda822b13f6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2390, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}