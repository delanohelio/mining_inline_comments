{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI0NDAwNTQy", "number": 1009, "reviewThreads": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQyMTowNToxNFrOEArNPA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQwNTowOToyNVrOEBPxOw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY5MTQzMzU2OnYy", "diffSide": "RIGHT", "path": "hugegraph-test/src/main/java/com/baidu/hugegraph/core/VertexLabelCoreTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQyMTowNToxNFrOGcGr_A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQyMTowNToxNFrOGcGr_A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjEyMjg3Ng==", "bodyText": "align with \".vertexLabel\"", "url": "https://github.com/hugegraph/hugegraph/pull/1009#discussion_r432122876", "createdAt": "2020-05-28T21:05:14Z", "author": {"login": "javeme"}, "path": "hugegraph-test/src/main/java/com/baidu/hugegraph/core/VertexLabelCoreTest.java", "diffHunk": "@@ -1041,4 +1043,41 @@ public void testCreateTime() {\n         createTime = (Date) person.userdata().get(Userdata.CREATE_TIME);\n         Assert.assertFalse(createTime.after(now));\n     }\n+\n+    @Test\n+    public void testDuplicatePropertyWithIdentityProperties() {\n+        super.initPropertyKeys();\n+        SchemaManager schema = graph().schema();\n+        schema.vertexLabel(\"person\").properties(\"name\", \"age\", \"city\")\n+                .primaryKeys(\"name\").create();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d7c09f30a39a5793b05d689b415cc1b0b6f1ba31"}, "originalPosition": 26}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY5MTQzNjM0OnYy", "diffSide": "RIGHT", "path": "hugegraph-core/src/main/java/com/baidu/hugegraph/schema/builder/VertexLabelBuilder.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQyMTowNjowM1rOGcGtrw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQyMTowNjowM1rOGcGtrw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjEyMzMxMQ==", "bodyText": "remove empty lines", "url": "https://github.com/hugegraph/hugegraph/pull/1009#discussion_r432123311", "createdAt": "2020-05-28T21:06:03Z", "author": {"login": "javeme"}, "path": "hugegraph-core/src/main/java/com/baidu/hugegraph/schema/builder/VertexLabelBuilder.java", "diffHunk": "@@ -130,6 +130,72 @@ public VertexLabel create() {\n         });\n     }\n \n+    /**\n+     * Check whither this has same properties with vertexLabel.\n+     * Only  properties,  primaryKeys, nullableKeys, enableLabelIndex  is checked.\n+     * The id, idStrategy, checkExist, transaction,userdata is not checked.\n+     * @param existedVertexLabel to be compared with\n+     * @return true if this has same properties with propertyKey\n+     */\n+    private boolean hasSameProperties(VertexLabel existedVertexLabel) {\n+\n+//        if (this.idStrategy != existedVertexLabel.idStrategy()) {\n+//            return false;\n+//        }\n+\n+        Set<Id> existedProperties = existedVertexLabel.properties();\n+        if (this.properties.size() != existedProperties.size()) {\n+            return false;\n+        }\n+        for (String propertyName : this.properties) {\n+            PropertyKey propertyKey = this.transaction.getPropertyKey(propertyName);\n+            if (! existedProperties.contains(propertyKey.id())) {\n+                return false;\n+            }\n+        }\n+\n+        List<Id> existedPrimaryKeys = existedVertexLabel.primaryKeys();\n+        if (this.primaryKeys.size() != existedPrimaryKeys.size()) {\n+            return false;\n+        }\n+\n+        for (String primaryKeyName : this.primaryKeys) {\n+            PropertyKey primaryKey = this.transaction.getPropertyKey(primaryKeyName);\n+            if (!existedPrimaryKeys.contains(primaryKey.id())) {\n+                return false;\n+            }\n+        }\n+\n+        Set<Id> existedNullableKeys = existedVertexLabel.nullableKeys();\n+        if (this.nullableKeys.size() != existedNullableKeys.size()) {\n+            return false;\n+        }\n+\n+        for (String nullableKeyName : this.nullableKeys) {\n+            PropertyKey nullableKey = this.transaction.getPropertyKey(nullableKeyName);\n+            if (!existedNullableKeys.contains(nullableKey.id())) {\n+                return false;\n+            }\n+        }\n+\n+        // this.enableLabelIndex == null, it means true.\n+        if (this.enableLabelIndex == null || this.enableLabelIndex) {\n+            if (! existedVertexLabel.enableLabelIndex()) {\n+                return false;\n+            }\n+        } else {\n+            if (existedVertexLabel.enableLabelIndex() == false) {\n+                return false;\n+            }\n+        }\n+\n+\n+        return true;\n+\n+\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d7c09f30a39a5793b05d689b415cc1b0b6f1ba31"}, "originalPosition": 76}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY5MTQzNzI5OnYy", "diffSide": "RIGHT", "path": "hugegraph-core/src/main/java/com/baidu/hugegraph/schema/builder/VertexLabelBuilder.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQyMTowNjoyM1rOGcGuSg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQyMTowNjoyM1rOGcGuSg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjEyMzQ2Ng==", "bodyText": "remove unused code", "url": "https://github.com/hugegraph/hugegraph/pull/1009#discussion_r432123466", "createdAt": "2020-05-28T21:06:23Z", "author": {"login": "javeme"}, "path": "hugegraph-core/src/main/java/com/baidu/hugegraph/schema/builder/VertexLabelBuilder.java", "diffHunk": "@@ -130,6 +130,72 @@ public VertexLabel create() {\n         });\n     }\n \n+    /**\n+     * Check whither this has same properties with vertexLabel.\n+     * Only  properties,  primaryKeys, nullableKeys, enableLabelIndex  is checked.\n+     * The id, idStrategy, checkExist, transaction,userdata is not checked.\n+     * @param existedVertexLabel to be compared with\n+     * @return true if this has same properties with propertyKey\n+     */\n+    private boolean hasSameProperties(VertexLabel existedVertexLabel) {\n+\n+//        if (this.idStrategy != existedVertexLabel.idStrategy()) {\n+//            return false;\n+//        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d7c09f30a39a5793b05d689b415cc1b0b6f1ba31"}, "originalPosition": 24}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY5MTQzOTI1OnYy", "diffSide": "RIGHT", "path": "hugegraph-core/src/main/java/com/baidu/hugegraph/schema/builder/VertexLabelBuilder.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQyMTowNzowMVrOGcGviA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQyMTowNzowMVrOGcGviA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjEyMzc4NA==", "bodyText": "remove space in \"! existedProperties\"", "url": "https://github.com/hugegraph/hugegraph/pull/1009#discussion_r432123784", "createdAt": "2020-05-28T21:07:01Z", "author": {"login": "javeme"}, "path": "hugegraph-core/src/main/java/com/baidu/hugegraph/schema/builder/VertexLabelBuilder.java", "diffHunk": "@@ -130,6 +130,72 @@ public VertexLabel create() {\n         });\n     }\n \n+    /**\n+     * Check whither this has same properties with vertexLabel.\n+     * Only  properties,  primaryKeys, nullableKeys, enableLabelIndex  is checked.\n+     * The id, idStrategy, checkExist, transaction,userdata is not checked.\n+     * @param existedVertexLabel to be compared with\n+     * @return true if this has same properties with propertyKey\n+     */\n+    private boolean hasSameProperties(VertexLabel existedVertexLabel) {\n+\n+//        if (this.idStrategy != existedVertexLabel.idStrategy()) {\n+//            return false;\n+//        }\n+\n+        Set<Id> existedProperties = existedVertexLabel.properties();\n+        if (this.properties.size() != existedProperties.size()) {\n+            return false;\n+        }\n+        for (String propertyName : this.properties) {\n+            PropertyKey propertyKey = this.transaction.getPropertyKey(propertyName);\n+            if (! existedProperties.contains(propertyKey.id())) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d7c09f30a39a5793b05d689b415cc1b0b6f1ba31"}, "originalPosition": 32}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY5MTQ3MTExOnYy", "diffSide": "RIGHT", "path": "hugegraph-core/src/main/java/com/baidu/hugegraph/schema/builder/EdgeLabelBuilder.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQyMToxNzozM1rOGcHDoA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQwMTozMzoyOVrOGcMByQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjEyODkyOA==", "bodyText": "prefer to move this method to class EdgeLabel, and process parent fields by each super class like SchemaLabel/SchemaElement", "url": "https://github.com/hugegraph/hugegraph/pull/1009#discussion_r432128928", "createdAt": "2020-05-28T21:17:33Z", "author": {"login": "javeme"}, "path": "hugegraph-core/src/main/java/com/baidu/hugegraph/schema/builder/EdgeLabelBuilder.java", "diffHunk": "@@ -141,6 +141,72 @@ public EdgeLabel create() {\n         });\n     }\n \n+    private boolean hasSameProperties(EdgeLabel existedEdgeLabel) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d7c09f30a39a5793b05d689b415cc1b0b6f1ba31"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjIxMDM3Nw==", "bodyText": "If move hasSameProperties to EdgeLabel, and parent class, it will reduce some duplicate check.\nSchemaLabel has the following fields used by VertexLabel and EdgeLabel.\nprivate final Set<Id> properties;\n    private final Set<Id> nullableKeys;\n    private final Set<Id> indexLabels;\n    private boolean enableLabelIndex;\n\nBut the parameter should be Builder, and in should has proper method to retrieve correspond information.  There is not common parent Builder with these information.", "url": "https://github.com/hugegraph/hugegraph/pull/1009#discussion_r432210377", "createdAt": "2020-05-29T01:33:29Z", "author": {"login": "houzhizhen"}, "path": "hugegraph-core/src/main/java/com/baidu/hugegraph/schema/builder/EdgeLabelBuilder.java", "diffHunk": "@@ -141,6 +141,72 @@ public EdgeLabel create() {\n         });\n     }\n \n+    private boolean hasSameProperties(EdgeLabel existedEdgeLabel) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjEyODkyOA=="}, "originalCommit": {"oid": "d7c09f30a39a5793b05d689b415cc1b0b6f1ba31"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY5MTQ3MzMzOnYy", "diffSide": "RIGHT", "path": "hugegraph-core/src/main/java/com/baidu/hugegraph/schema/builder/IndexLabelBuilder.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQyMToxODoxOFrOGcHE-A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQyMToxODoxOFrOGcHE-A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjEyOTI3Mg==", "bodyText": "space", "url": "https://github.com/hugegraph/hugegraph/pull/1009#discussion_r432129272", "createdAt": "2020-05-28T21:18:18Z", "author": {"login": "javeme"}, "path": "hugegraph-core/src/main/java/com/baidu/hugegraph/schema/builder/IndexLabelBuilder.java", "diffHunk": "@@ -99,6 +99,45 @@ public IndexLabel build() {\n         return indexLabel;\n     }\n \n+\n+    /**\n+     * Check whither this has same properties with existedIndexLabel.\n+     * Only baseType,baseValue,indexType, indexFields is checked.\n+     * The id, checkExist, transaction,userdata is not checked.\n+     * @param existedIndexLabel to be compared with\n+     * @return true if this has same properties with propertyKey\n+     */\n+    private boolean hasSameProperties(IndexLabel existedIndexLabel) {\n+        // baseType is null, it means HugeType.SYS_SCHEMA\n+        if (this.baseType == null && existedIndexLabel.baseType() != HugeType.SYS_SCHEMA\n+        || this.baseType != existedIndexLabel.baseType()) {\n+            return false;\n+        }\n+\n+        SchemaLabel schemaLabel = this.loadElement();\n+        if (! schemaLabel.id().equals(existedIndexLabel.baseValue())) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d7c09f30a39a5793b05d689b415cc1b0b6f1ba31"}, "originalPosition": 20}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY5MTQ3Mzc5OnYy", "diffSide": "RIGHT", "path": "hugegraph-core/src/main/java/com/baidu/hugegraph/schema/builder/IndexLabelBuilder.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQyMToxODoyOFrOGcHFRA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQyMToxODoyOFrOGcHFRA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjEyOTM0OA==", "bodyText": "align", "url": "https://github.com/hugegraph/hugegraph/pull/1009#discussion_r432129348", "createdAt": "2020-05-28T21:18:28Z", "author": {"login": "javeme"}, "path": "hugegraph-core/src/main/java/com/baidu/hugegraph/schema/builder/IndexLabelBuilder.java", "diffHunk": "@@ -99,6 +99,45 @@ public IndexLabel build() {\n         return indexLabel;\n     }\n \n+\n+    /**\n+     * Check whither this has same properties with existedIndexLabel.\n+     * Only baseType,baseValue,indexType, indexFields is checked.\n+     * The id, checkExist, transaction,userdata is not checked.\n+     * @param existedIndexLabel to be compared with\n+     * @return true if this has same properties with propertyKey\n+     */\n+    private boolean hasSameProperties(IndexLabel existedIndexLabel) {\n+        // baseType is null, it means HugeType.SYS_SCHEMA\n+        if (this.baseType == null && existedIndexLabel.baseType() != HugeType.SYS_SCHEMA\n+        || this.baseType != existedIndexLabel.baseType()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d7c09f30a39a5793b05d689b415cc1b0b6f1ba31"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY5MTQ3NDE4OnYy", "diffSide": "RIGHT", "path": "hugegraph-core/src/main/java/com/baidu/hugegraph/schema/builder/IndexLabelBuilder.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQyMToxODo0MFrOGcHFjg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQyMToxODo0MFrOGcHFjg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjEyOTQyMg==", "bodyText": "align", "url": "https://github.com/hugegraph/hugegraph/pull/1009#discussion_r432129422", "createdAt": "2020-05-28T21:18:40Z", "author": {"login": "javeme"}, "path": "hugegraph-core/src/main/java/com/baidu/hugegraph/schema/builder/IndexLabelBuilder.java", "diffHunk": "@@ -99,6 +99,45 @@ public IndexLabel build() {\n         return indexLabel;\n     }\n \n+\n+    /**\n+     * Check whither this has same properties with existedIndexLabel.\n+     * Only baseType,baseValue,indexType, indexFields is checked.\n+     * The id, checkExist, transaction,userdata is not checked.\n+     * @param existedIndexLabel to be compared with\n+     * @return true if this has same properties with propertyKey\n+     */\n+    private boolean hasSameProperties(IndexLabel existedIndexLabel) {\n+        // baseType is null, it means HugeType.SYS_SCHEMA\n+        if (this.baseType == null && existedIndexLabel.baseType() != HugeType.SYS_SCHEMA\n+        || this.baseType != existedIndexLabel.baseType()) {\n+            return false;\n+        }\n+\n+        SchemaLabel schemaLabel = this.loadElement();\n+        if (! schemaLabel.id().equals(existedIndexLabel.baseValue())) {\n+            return false;\n+        }\n+\n+        if (this.indexType == null && existedIndexLabel.indexType() != IndexType.SECONDARY\n+                || this.indexType != existedIndexLabel.indexType()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d7c09f30a39a5793b05d689b415cc1b0b6f1ba31"}, "originalPosition": 25}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY5NzIyNzUwOnYy", "diffSide": "RIGHT", "path": "hugegraph-core/src/main/java/com/baidu/hugegraph/schema/builder/EdgeLabelBuilder.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQwMjowNDowNVrOGc9ENg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQwMjo0MjoyN1rOGc9cAg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzAxMzgxNA==", "bodyText": "here this. enableLabelIndex = false, seems only existedEdgeLabel.enableLabelIndex() == true should return false.", "url": "https://github.com/hugegraph/hugegraph/pull/1009#discussion_r433013814", "createdAt": "2020-06-01T02:04:05Z", "author": {"login": "Linary"}, "path": "hugegraph-core/src/main/java/com/baidu/hugegraph/schema/builder/EdgeLabelBuilder.java", "diffHunk": "@@ -149,6 +149,71 @@ public EdgeLabel create() {\n         });\n     }\n \n+    private boolean hasSameProperties(EdgeLabel existedEdgeLabel) {\n+        HugeGraph graph = this.graph();\n+        Id sourceId = graph.vertexLabel(this.sourceLabel).id();\n+        if (! existedEdgeLabel.sourceLabel().equals(sourceId)) {\n+            return false;\n+        }\n+\n+        Id targetId = graph.vertexLabel(this.targetLabel).id();\n+\n+        if (! existedEdgeLabel.targetLabel().equals(targetId)) {\n+            return false;\n+        }\n+\n+        if (this.frequency != existedEdgeLabel.frequency()) {\n+            return false;\n+        }\n+\n+        // this.enableLabelIndex == null, it means true.\n+        if (this.enableLabelIndex == null || this.enableLabelIndex) {\n+            if (! existedEdgeLabel.enableLabelIndex()) {\n+                return false;\n+            }\n+        } else { // means false\n+            if (existedEdgeLabel.enableLabelIndex() == false) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "97bc6bbddde246b6986831e977283359c59e145d"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzAxOTkwNg==", "bodyText": "Good job, this is a bug.", "url": "https://github.com/hugegraph/hugegraph/pull/1009#discussion_r433019906", "createdAt": "2020-06-01T02:42:27Z", "author": {"login": "houzhizhen"}, "path": "hugegraph-core/src/main/java/com/baidu/hugegraph/schema/builder/EdgeLabelBuilder.java", "diffHunk": "@@ -149,6 +149,71 @@ public EdgeLabel create() {\n         });\n     }\n \n+    private boolean hasSameProperties(EdgeLabel existedEdgeLabel) {\n+        HugeGraph graph = this.graph();\n+        Id sourceId = graph.vertexLabel(this.sourceLabel).id();\n+        if (! existedEdgeLabel.sourceLabel().equals(sourceId)) {\n+            return false;\n+        }\n+\n+        Id targetId = graph.vertexLabel(this.targetLabel).id();\n+\n+        if (! existedEdgeLabel.targetLabel().equals(targetId)) {\n+            return false;\n+        }\n+\n+        if (this.frequency != existedEdgeLabel.frequency()) {\n+            return false;\n+        }\n+\n+        // this.enableLabelIndex == null, it means true.\n+        if (this.enableLabelIndex == null || this.enableLabelIndex) {\n+            if (! existedEdgeLabel.enableLabelIndex()) {\n+                return false;\n+            }\n+        } else { // means false\n+            if (existedEdgeLabel.enableLabelIndex() == false) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzAxMzgxNA=="}, "originalCommit": {"oid": "97bc6bbddde246b6986831e977283359c59e145d"}, "originalPosition": 36}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY5NzIyODM4OnYy", "diffSide": "RIGHT", "path": "hugegraph-core/src/main/java/com/baidu/hugegraph/schema/builder/EdgeLabelBuilder.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQwMjowNTowMFrOGc9Eug==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQwMjowNTowMFrOGc9Eug==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzAxMzk0Ng==", "bodyText": "There should no space between ! and existedEdgeLabel.sourceLabel().equals(sourceId) in our code style", "url": "https://github.com/hugegraph/hugegraph/pull/1009#discussion_r433013946", "createdAt": "2020-06-01T02:05:00Z", "author": {"login": "Linary"}, "path": "hugegraph-core/src/main/java/com/baidu/hugegraph/schema/builder/EdgeLabelBuilder.java", "diffHunk": "@@ -149,6 +149,71 @@ public EdgeLabel create() {\n         });\n     }\n \n+    private boolean hasSameProperties(EdgeLabel existedEdgeLabel) {\n+        HugeGraph graph = this.graph();\n+        Id sourceId = graph.vertexLabel(this.sourceLabel).id();\n+        if (! existedEdgeLabel.sourceLabel().equals(sourceId)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "97bc6bbddde246b6986831e977283359c59e145d"}, "originalPosition": 16}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY5NzQyMDMzOnYy", "diffSide": "RIGHT", "path": "hugegraph-core/src/main/java/com/baidu/hugegraph/schema/builder/EdgeLabelBuilder.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQwNTowNjozNlrOGc-2Jg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQwNTowNjozNlrOGc-2Jg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzA0Mjk4Mg==", "bodyText": "delete empty line", "url": "https://github.com/hugegraph/hugegraph/pull/1009#discussion_r433042982", "createdAt": "2020-06-01T05:06:36Z", "author": {"login": "zhoney"}, "path": "hugegraph-core/src/main/java/com/baidu/hugegraph/schema/builder/EdgeLabelBuilder.java", "diffHunk": "@@ -149,6 +149,69 @@ public EdgeLabel create() {\n         });\n     }\n \n+    private boolean hasSameProperties(EdgeLabel existedEdgeLabel) {\n+        HugeGraph graph = this.graph();\n+        Id sourceId = graph.vertexLabel(this.sourceLabel).id();\n+        if (!existedEdgeLabel.sourceLabel().equals(sourceId)) {\n+            return false;\n+        }\n+\n+        Id targetId = graph.vertexLabel(this.targetLabel).id();\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a114c1197a4539272da78042b9fe7c112e1297ac"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY5NzQyMTE1OnYy", "diffSide": "RIGHT", "path": "hugegraph-core/src/main/java/com/baidu/hugegraph/schema/builder/IndexLabelBuilder.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQwNTowNzoxOFrOGc-2pg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQwNTowNzoxOFrOGc-2pg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzA0MzExMA==", "bodyText": "more or less empty\nOnly baseType, baseValue, indexType, indexFields are checked.", "url": "https://github.com/hugegraph/hugegraph/pull/1009#discussion_r433043110", "createdAt": "2020-06-01T05:07:18Z", "author": {"login": "zhoney"}, "path": "hugegraph-core/src/main/java/com/baidu/hugegraph/schema/builder/IndexLabelBuilder.java", "diffHunk": "@@ -99,6 +99,47 @@ public IndexLabel build() {\n         return indexLabel;\n     }\n \n+\n+    /**\n+     * Check whether this has same properties with existedIndexLabel.\n+     * Only baseType,baseValue,indexType, indexFields are checked.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a114c1197a4539272da78042b9fe7c112e1297ac"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY5NzQyMzgxOnYy", "diffSide": "RIGHT", "path": "hugegraph-core/src/main/java/com/baidu/hugegraph/schema/builder/PropertyKeyBuilder.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQwNTowOToxN1rOGc-4Mw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQwNTowOToxN1rOGc-4Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzA0MzUwNw==", "bodyText": "ditto", "url": "https://github.com/hugegraph/hugegraph/pull/1009#discussion_r433043507", "createdAt": "2020-06-01T05:09:17Z", "author": {"login": "zhoney"}, "path": "hugegraph-core/src/main/java/com/baidu/hugegraph/schema/builder/PropertyKeyBuilder.java", "diffHunk": "@@ -98,6 +98,34 @@ public PropertyKey create() {\n         });\n     }\n \n+\n+    /**\n+     * Check whether this has same properties with propertyKey.\n+     * Only dataType, cardinality, aggregateType  are checked.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a114c1197a4539272da78042b9fe7c112e1297ac"}, "originalPosition": 16}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY5NzQyMzk1OnYy", "diffSide": "RIGHT", "path": "hugegraph-core/src/main/java/com/baidu/hugegraph/schema/builder/VertexLabelBuilder.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQwNTowOToyNVrOGc-4SA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQwNTowOToyNVrOGc-4SA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzA0MzUyOA==", "bodyText": "ditto", "url": "https://github.com/hugegraph/hugegraph/pull/1009#discussion_r433043528", "createdAt": "2020-06-01T05:09:25Z", "author": {"login": "zhoney"}, "path": "hugegraph-core/src/main/java/com/baidu/hugegraph/schema/builder/VertexLabelBuilder.java", "diffHunk": "@@ -137,6 +137,62 @@ public VertexLabel create() {\n         });\n     }\n \n+    /**\n+     * Check whether this has same properties with existedVertexLabel.\n+     * Only  properties,  primaryKeys, nullableKeys, enableLabelIndex  are checked.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a114c1197a4539272da78042b9fe7c112e1297ac"}, "originalPosition": 15}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1623, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}