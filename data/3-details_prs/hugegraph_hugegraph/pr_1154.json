{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcyNDMwNDAy", "number": 1154, "title": "Add some raft options used to improve perf", "bodyText": "Change-Id: Ifadc84767120afb8d72128c68ebb1afb2b34e3cd", "createdAt": "2020-08-24T10:44:09Z", "url": "https://github.com/hugegraph/hugegraph/pull/1154", "merged": true, "mergeCommit": {"oid": "2fceac92ccee54721cd0d448299e481615f7dec7"}, "closed": true, "closedAt": "2020-09-23T06:58:40Z", "author": {"login": "Linary"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdCNEExAFqTQ3NDAzNDI1OQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdLmoC0AFqTQ5NDI0NjcwMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc0MDM0MjU5", "url": "https://github.com/hugegraph/hugegraph/pull/1154#pullrequestreview-474034259", "createdAt": "2020-08-25T01:36:17Z", "commit": {"oid": "fdaccc5b67822973bb92c0f657ec37df1109f00b"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQwMTozNjoxN1rOHF_aiA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQwMTozNzo1N1rOHF_ezA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjA0MzkxMg==", "bodyText": "what is the behavior if it is turned on", "url": "https://github.com/hugegraph/hugegraph/pull/1154#discussion_r476043912", "createdAt": "2020-08-25T01:36:17Z", "author": {"login": "javeme"}, "path": "hugegraph-core/src/main/java/com/baidu/hugegraph/config/CoreOptions.java", "diffHunk": "@@ -158,12 +151,28 @@ public static synchronized CoreOptions instance() {\n                     \"./raftlog\"\n             );\n \n+    public static final ConfigOption<Boolean> RAFT_STEPDOWN_WHEN_VOTE_TIMEOUT =\n+            new ConfigOption<>(\n+                    \"raft.stepdown_when_vote_timeout\",\n+                    \"Whether the leader stepped down when vote timeout.\",\n+                    disallowEmpty(),\n+                    true\n+            );\n+\n+    public static final ConfigOption<Boolean> RAFT_REPLICATOR_PIPELINE =\n+            new ConfigOption<>(\n+                    \"raft.use_replicator_pipeline\",\n+                    \"Whether to use replicator line.\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fdaccc5b67822973bb92c0f657ec37df1109f00b"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjA0NDIzNw==", "bodyText": "reading index", "url": "https://github.com/hugegraph/hugegraph/pull/1154#discussion_r476044237", "createdAt": "2020-08-25T01:36:47Z", "author": {"login": "javeme"}, "path": "hugegraph-core/src/main/java/com/baidu/hugegraph/config/CoreOptions.java", "diffHunk": "@@ -179,9 +188,72 @@ public static synchronized CoreOptions instance() {\n                     \"raft.backend_threads\",\n                     \"The thread number used to apply task to bakcend.\",\n                     rangeInt(0, Integer.MAX_VALUE),\n+                    CPUS\n+            );\n+\n+    public static final ConfigOption<Integer> RAFT_READ_INDEX_THREADS =\n+            new ConfigOption<>(\n+                    \"raft.read_index_threads\",\n+                    \"The thread number used to execute read index.\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fdaccc5b67822973bb92c0f657ec37df1109f00b"}, "originalPosition": 65}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjA0NTAwNA==", "bodyText": "ms?", "url": "https://github.com/hugegraph/hugegraph/pull/1154#discussion_r476045004", "createdAt": "2020-08-25T01:37:57Z", "author": {"login": "javeme"}, "path": "hugegraph-core/src/main/java/com/baidu/hugegraph/config/CoreOptions.java", "diffHunk": "@@ -179,9 +188,72 @@ public static synchronized CoreOptions instance() {\n                     \"raft.backend_threads\",\n                     \"The thread number used to apply task to bakcend.\",\n                     rangeInt(0, Integer.MAX_VALUE),\n+                    CPUS\n+            );\n+\n+    public static final ConfigOption<Integer> RAFT_READ_INDEX_THREADS =\n+            new ConfigOption<>(\n+                    \"raft.read_index_threads\",\n+                    \"The thread number used to execute read index.\",\n+                    rangeInt(0, Integer.MAX_VALUE),\n                     8\n             );\n \n+    public static final ConfigOption<Integer> RAFT_APPLY_BATCH =\n+            new ConfigOption<>(\n+                    \"raft.apply_batch\",\n+                    \"The apply batch size to trigger disruptor event handler.\",\n+                    positiveInt(),\n+                    // jraft default value is 32\n+                    1\n+            );\n+\n+    public static final ConfigOption<Integer> RAFT_QUEUE_SIZE =\n+            new ConfigOption<>(\n+                    \"raft.queue_size\",\n+                    \"The disruptor buffers size for jraft RaftNode, \" +\n+                    \"StateMachine and LogManager\",\n+                    positiveInt(),\n+                    // jraft default value is 16384\n+                    8192\n+            );\n+\n+    public static final ConfigOption<Integer> RAFT_QUEUE_PUBLISH_TIMEOUT =\n+            new ConfigOption<>(\n+                    \"raft.queue_publish_timeout\",\n+                    \"The timeout in second when publish event into disruptor\",\n+                    positiveInt(),\n+                    // jraft default value is 10(sec)\n+                    60\n+            );\n+\n+    public static final ConfigOption<Integer> RAFT_RPC_THREADS =\n+            new ConfigOption<>(\n+                    \"raft.rpc_threads\",\n+                    \"The rpc threads for jraft RPC layer\",\n+                    positiveInt(),\n+                    // jraft default value is 80\n+                    48\n+            );\n+\n+    public static final ConfigOption<Integer> RAFT_RPC_CONNECT_TIMEOUT =\n+            new ConfigOption<>(\n+                    \"raft.rpc_connect_timeout\",\n+                    \"The rpc connect timeout for jraft rpc\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fdaccc5b67822973bb92c0f657ec37df1109f00b"}, "originalPosition": 110}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1813a46b54f6994a6746c91744538b578b2648dc", "author": {"user": {"login": "Linary", "name": "Linary"}}, "url": "https://github.com/hugegraph/hugegraph/commit/1813a46b54f6994a6746c91744538b578b2648dc", "committedDate": "2020-09-22T07:13:10Z", "message": "Add some raft options used to improve perf\n\nChange-Id: Ifadc84767120afb8d72128c68ebb1afb2b34e3cd"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fdaccc5b67822973bb92c0f657ec37df1109f00b", "author": {"user": {"login": "Linary", "name": "Linary"}}, "url": "https://github.com/hugegraph/hugegraph/commit/fdaccc5b67822973bb92c0f657ec37df1109f00b", "committedDate": "2020-08-24T10:43:20Z", "message": "Add some raft options used to improve perf\n\nChange-Id: Ifadc84767120afb8d72128c68ebb1afb2b34e3cd"}, "afterCommit": {"oid": "1813a46b54f6994a6746c91744538b578b2648dc", "author": {"user": {"login": "Linary", "name": "Linary"}}, "url": "https://github.com/hugegraph/hugegraph/commit/1813a46b54f6994a6746c91744538b578b2648dc", "committedDate": "2020-09-22T07:13:10Z", "message": "Add some raft options used to improve perf\n\nChange-Id: Ifadc84767120afb8d72128c68ebb1afb2b34e3cd"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1754a0150734475103b3e21f9039ebad5327be8f", "author": {"user": {"login": "Linary", "name": "Linary"}}, "url": "https://github.com/hugegraph/hugegraph/commit/1754a0150734475103b3e21f9039ebad5327be8f", "committedDate": "2020-09-22T07:48:18Z", "message": "tiny improve\n\nChange-Id: I2f25194b98567dd6952aa65180b29ce52f9aeebc"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzOTkzNDkz", "url": "https://github.com/hugegraph/hugegraph/pull/1154#pullrequestreview-493993493", "createdAt": "2020-09-23T02:51:35Z", "commit": {"oid": "1754a0150734475103b3e21f9039ebad5327be8f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk0MjQ2NzAy", "url": "https://github.com/hugegraph/hugegraph/pull/1154#pullrequestreview-494246702", "createdAt": "2020-09-23T06:30:32Z", "commit": {"oid": "1754a0150734475103b3e21f9039ebad5327be8f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2262, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}