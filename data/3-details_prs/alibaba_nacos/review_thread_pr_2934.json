{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI1ODA5NjAw", "number": 2934, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQwMToyNToyNVrOEBkF3g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQwMTozMjozMVrOEBkKzQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwMDc1MzU4OnYy", "diffSide": "RIGHT", "path": "common/src/main/java/com/alibaba/nacos/common/utils/ByteUtils.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQwMToyNToyNVrOGdfHHQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQwMjozNDoxMlrOGdgI5Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzU3MTYxMw==", "bodyText": "Why  remove constant value\uff1fI think use constant value will be better", "url": "https://github.com/alibaba/nacos/pull/2934#discussion_r433571613", "createdAt": "2020-06-02T01:25:25Z", "author": {"login": "KomachiSion"}, "path": "common/src/main/java/com/alibaba/nacos/common/utils/ByteUtils.java", "diffHunk": "@@ -17,12 +17,13 @@\n package com.alibaba.nacos.common.utils;\n \n import java.nio.charset.Charset;\n-import java.nio.charset.StandardCharsets;\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "31694246058ef6c226cba4bf7d39ad3fc4a65362"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzU4ODQ1Mw==", "bodyText": "JDK6 does not exist with this constant", "url": "https://github.com/alibaba/nacos/pull/2934#discussion_r433588453", "createdAt": "2020-06-02T02:34:12Z", "author": {"login": "chuntaojun"}, "path": "common/src/main/java/com/alibaba/nacos/common/utils/ByteUtils.java", "diffHunk": "@@ -17,12 +17,13 @@\n package com.alibaba.nacos.common.utils;\n \n import java.nio.charset.Charset;\n-import java.nio.charset.StandardCharsets;\n+", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzU3MTYxMw=="}, "originalCommit": {"oid": "31694246058ef6c226cba4bf7d39ad3fc4a65362"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwMDc1NTIyOnYy", "diffSide": "RIGHT", "path": "common/src/main/java/com/alibaba/nacos/common/utils/StringUtils.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQwMToyNjoyOFrOGdfIJA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQwMToyNjoyOFrOGdfIJA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzU3MTg3Ng==", "bodyText": "like before said, I think use constant value will be better.", "url": "https://github.com/alibaba/nacos/pull/2934#discussion_r433571876", "createdAt": "2020-06-02T01:26:28Z", "author": {"login": "KomachiSion"}, "path": "common/src/main/java/com/alibaba/nacos/common/utils/StringUtils.java", "diffHunk": "@@ -41,7 +38,7 @@\n     public static final String EMPTY = \"\";\n \n     public static String newString4UTF8(byte[] bytes) {\n-        return new String(bytes, Charset.forName(StandardCharsets.UTF_8.name()));\n+        return new String(bytes, Charset.forName(\"UTF-8\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "31694246058ef6c226cba4bf7d39ad3fc4a65362"}, "originalPosition": 19}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwMDc2MTMzOnYy", "diffSide": "RIGHT", "path": "naming/src/main/java/com/alibaba/nacos/naming/cluster/ServerListManager.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQwMToyOTo0OVrOGdfLvQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQwMToyOTo0OVrOGdfLvQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzU3Mjc5Nw==", "bodyText": "Move this TODO common to deprecated annotation may be better?", "url": "https://github.com/alibaba/nacos/pull/2934#discussion_r433572797", "createdAt": "2020-06-02T01:29:49Z", "author": {"login": "KomachiSion"}, "path": "naming/src/main/java/com/alibaba/nacos/naming/cluster/ServerListManager.java", "diffHunk": "@@ -0,0 +1,233 @@\n+/*\n+ * Copyright 1999-2018 Alibaba Group Holding Ltd.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.alibaba.nacos.naming.cluster;\n+\n+import com.alibaba.nacos.common.utils.JacksonUtils;\n+import com.alibaba.nacos.core.cluster.Member;\n+import com.alibaba.nacos.core.cluster.MemberChangeEvent;\n+import com.alibaba.nacos.core.cluster.MemberChangeListener;\n+import com.alibaba.nacos.core.cluster.MemberMetaDataConstants;\n+import com.alibaba.nacos.core.cluster.NodeState;\n+import com.alibaba.nacos.core.cluster.ServerMemberManager;\n+import com.alibaba.nacos.core.notify.NotifyCenter;\n+import com.alibaba.nacos.core.utils.ApplicationUtils;\n+import com.alibaba.nacos.naming.consistency.persistent.raft.RaftPeer;\n+import com.alibaba.nacos.naming.misc.GlobalExecutor;\n+import com.alibaba.nacos.naming.misc.Loggers;\n+import com.alibaba.nacos.naming.misc.Message;\n+import com.alibaba.nacos.naming.misc.NamingProxy;\n+import com.alibaba.nacos.naming.misc.ServerStatusSynchronizer;\n+import com.alibaba.nacos.naming.misc.SwitchDomain;\n+import com.alibaba.nacos.naming.misc.Synchronizer;\n+import com.alibaba.nacos.naming.misc.UtilsAndCommons;\n+import com.google.common.collect.Maps;\n+import org.apache.commons.lang3.StringUtils;\n+import org.springframework.stereotype.Component;\n+\n+import javax.annotation.PostConstruct;\n+import java.util.ArrayList;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Objects;\n+import java.util.Optional;\n+\n+/**\n+ * The manager to globally refresh and operate server list.\n+ *\n+ * // TODO This object will be deleted sometime after version 1.3.0", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "31694246058ef6c226cba4bf7d39ad3fc4a65362"}, "originalPosition": 52}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwMDc2NTk4OnYy", "diffSide": "RIGHT", "path": "naming/src/main/java/com/alibaba/nacos/naming/controllers/OperatorController.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQwMTozMjoyM1rOGdfOfg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQwMTozMjoyM1rOGdfOfg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzU3MzUwMg==", "bodyText": "Move this TODO common to deprecated annotation may be better?", "url": "https://github.com/alibaba/nacos/pull/2934#discussion_r433573502", "createdAt": "2020-06-02T01:32:23Z", "author": {"login": "KomachiSion"}, "path": "naming/src/main/java/com/alibaba/nacos/naming/controllers/OperatorController.java", "diffHunk": "@@ -200,12 +200,37 @@ public ObjectNode getHealthyServerList(@RequestParam(required = false) boolean h\n         return result;\n     }\n \n+    /**\n+     * This interface will be removed in a future release\n+     *\n+     * // TODO This object will be deleted sometime after version 1.3.0", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "31694246058ef6c226cba4bf7d39ad3fc4a65362"}, "originalPosition": 80}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwMDc2NjIxOnYy", "diffSide": "RIGHT", "path": "naming/src/main/java/com/alibaba/nacos/naming/controllers/OperatorController.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQwMTozMjozMVrOGdfOmw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQwMTozMjozMVrOGdfOmw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzU3MzUzMQ==", "bodyText": "Move this TODO common to deprecated annotation may be better?", "url": "https://github.com/alibaba/nacos/pull/2934#discussion_r433573531", "createdAt": "2020-06-02T01:32:31Z", "author": {"login": "KomachiSion"}, "path": "naming/src/main/java/com/alibaba/nacos/naming/controllers/OperatorController.java", "diffHunk": "@@ -200,12 +200,37 @@ public ObjectNode getHealthyServerList(@RequestParam(required = false) boolean h\n         return result;\n     }\n \n+    /**\n+     * This interface will be removed in a future release\n+     *\n+     * // TODO This object will be deleted sometime after version 1.3.0\n+     *\n+     * @deprecated 1.3.0\n+     * @param serverStatus server status\n+     * @return \"ok\"\n+     */\n+    @Deprecated\n+    @RequestMapping(\"/server/status\")\n+    public String serverStatus(@RequestParam String serverStatus) {\n+        serverListManager.onReceiveServerStatus(serverStatus);\n+        return \"ok\";\n+    }\n+\n     @PutMapping(\"/log\")\n     public String setLogLevel(@RequestParam String logName, @RequestParam String logLevel) {\n         Loggers.setLogLevel(logName, logLevel);\n         return \"ok\";\n     }\n \n+    /**\n+     * This interface will be removed in a future release\n+     *\n+     * // TODO This object will be deleted sometime after version 1.3.0", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "31694246058ef6c226cba4bf7d39ad3fc4a65362"}, "originalPosition": 102}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4398, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}