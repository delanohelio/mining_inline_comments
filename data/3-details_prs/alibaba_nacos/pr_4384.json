{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMwNzgwNzA4", "number": 4384, "title": "Fix an order-dependent flaky test", "bodyText": "What is the purpose of the change\nFix an order-dependent flaky test (trivial, just one line)\n[Problem]\ntestSerializeExtend add an item to a static mapper,\nand testDeserializeExtend read that item from that static mapper.\nSo if testDeserializeExtend runs before testSerializeExtend,\ntestDeserializeExtend will fail.\n@ignore testSerializeExtend can stably reproduce this issue.\n[Solution]\nAdd that item to the static mapper at the beginning of the\ntestDeserializeExtend to make this test independent of\ntestSerializeExtend.\n(Even though using static variables in unit tests is a bad practice)\nBrief changelog\nN/A\nVerifying this change\nmvn test passes\nFollow this checklist to help us incorporate your contribution quickly and easily:\n\n Make sure there is a Github issue filed for the change (usually before you start working on it). Trivial changes like typos do not require a Github issue. Your pull request should address just this issue, without pulling in other changes - one PR resolves one issue. (Trivial)\n Format the pull request title like [ISSUE #123] Fix UnknownException when host config not exist. Each commit in the pull request should have a meaningful subject line and body. (Trivial)\n Write a pull request description that is detailed enough to understand what the pull request does, how, and why.\n Write necessary unit-test to verify your logic correction, more mock a little better when cross module dependency exist. If the new feature or significant change is committed, please remember to add integration-test in test module.\n Run mvn -B clean package apache-rat:check findbugs:findbugs -Dmaven.test.skip=true to make sure basic checks pass. Run mvn clean install -DskipITs to make sure unit-test pass. Run mvn clean test-compile failsafe:integration-test  to make sure integration-test pass.", "createdAt": "2020-12-02T06:21:23Z", "url": "https://github.com/alibaba/nacos/pull/4384", "merged": true, "mergeCommit": {"oid": "24b99aa16b42d25fba2cd497314b8525eb7d909d"}, "closed": true, "closedAt": "2020-12-04T01:18:55Z", "author": {"login": "luoos"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdiKKp-gFqTU0MjU4OTkzNA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABditUcTgFqTU0NDU4OTE5Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQyNTg5OTM0", "url": "https://github.com/alibaba/nacos/pull/4384#pullrequestreview-542589934", "createdAt": "2020-12-02T08:21:22Z", "commit": {"oid": "869a197467747b6cc49aab713e8df9bb6af4dfa6"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQzMzgwMDEz", "url": "https://github.com/alibaba/nacos/pull/4384#pullrequestreview-543380013", "createdAt": "2020-12-03T01:50:45Z", "commit": {"oid": "869a197467747b6cc49aab713e8df9bb6af4dfa6"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QwMTo1MDo0NlrOH91x3A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QwMTo1MDo0NlrOH91x3A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDYwNjMwMA==", "bodyText": "I think solve this problem by add @BeforeClass method. And register subType in @BeforeClass method will be better.", "url": "https://github.com/alibaba/nacos/pull/4384#discussion_r534606300", "createdAt": "2020-12-03T01:50:46Z", "author": {"login": "KomachiSion"}, "path": "api/src/test/java/com/alibaba/nacos/api/naming/pojo/healthcheck/HealthCheckerFactoryTest.java", "diffHunk": "@@ -48,6 +48,7 @@ public void testDeserialize() {\n     \n     @Test\n     public void testDeserializeExtend() {\n+        HealthCheckerFactory.registerSubType(TestChecker.class, TestChecker.TYPE);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "869a197467747b6cc49aab713e8df9bb6af4dfa6"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b57e6c708faf8b7dc7399e6188c7c2aa75ee6702", "author": {"user": {"login": "luoos", "name": null}}, "url": "https://github.com/alibaba/nacos/commit/b57e6c708faf8b7dc7399e6188c7c2aa75ee6702", "committedDate": "2020-12-03T02:01:41Z", "message": "Fix an order-dependent flaky test\n\n[Problem]\ntestSerializeExtend add an item to a static mapper,\nand testDeserializeExtend read that item from that static mapper.\nSo if testDeserializeExtend runs before testSerializeExtend,\ntestDeserializeExtend will fail.\n\n@Ignore testSerializeExtend can stably reproduce this issue.\n\n[Solution]\nAdd that item to the static mapper in @BeforeClass method\n(Even though using static variables in unit tests is a bad practice)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ0NTg5MTky", "url": "https://github.com/alibaba/nacos/pull/4384#pullrequestreview-544589192", "createdAt": "2020-12-04T01:18:43Z", "commit": {"oid": "b57e6c708faf8b7dc7399e6188c7c2aa75ee6702"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4159, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}