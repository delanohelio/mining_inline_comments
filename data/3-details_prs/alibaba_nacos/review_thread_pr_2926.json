{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI1NDg0ODY5", "number": 2926, "reviewThreads": {"totalCount": 55, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0zMVQwMDo1MjoxM1rOEBJa6w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQwNzo0ODo1NVrOEElAMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY5NjM4Mzc5OnYy", "diffSide": "RIGHT", "path": "common/src/main/java/com/alibaba/nacos/common/http/client/NacosAsyncRestTemplate.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0zMVQwMDo1MjoxM1rOGc2Esg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0zMVQwOToyNzoyN1rOGc3zOg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjg5OTI1MA==", "bodyText": "You need to do a content-type substitution", "url": "https://github.com/alibaba/nacos/pull/2926#discussion_r432899250", "createdAt": "2020-05-31T00:52:13Z", "author": {"login": "chuntaojun"}, "path": "common/src/main/java/com/alibaba/nacos/common/http/client/NacosAsyncRestTemplate.java", "diffHunk": "@@ -0,0 +1,170 @@\n+/*\n+ * Copyright 1999-2018 Alibaba Group Holding Ltd.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.alibaba.nacos.common.http.client;\n+\n+import com.alibaba.nacos.common.constant.HttpHeaderConsts;\n+import com.alibaba.nacos.common.http.Callback;\n+import com.alibaba.nacos.common.http.param.Header;\n+import com.alibaba.nacos.common.http.param.MediaType;\n+import com.alibaba.nacos.common.http.param.Query;\n+import com.alibaba.nacos.common.model.RequestHttpEntity;\n+import com.alibaba.nacos.common.utils.HttpMethod;\n+import com.alibaba.nacos.common.utils.UriUtils;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.lang.reflect.Type;\n+import java.net.URI;\n+import java.util.Map;\n+\n+/**\n+ * NacosAsyncRestTemplate async\n+ *\n+ * @author mai.jh\n+ * @date 2020/5/29\n+ * @see AsyncHttpClientRequest\n+ * @see HttpClientResponse\n+ */\n+public class NacosAsyncRestTemplate implements AsyncRestOperations {\n+\n+    private static final Logger logger = LoggerFactory.getLogger(NacosAsyncRestTemplate.class);\n+\n+    private AsyncHttpClientRequest clientRequest;\n+\n+    public NacosAsyncRestTemplate(AsyncHttpClientRequest clientRequest) {\n+        this.clientRequest = clientRequest;\n+    }\n+\n+\n+    @Override\n+    public <T> void get(String url, Header header, Query query, Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.GET, new RequestHttpEntity(header, query), responseType, callback);\n+    }\n+\n+    @Override\n+    public <T> void get(String url, Header header, Map<String, String> paramValues,\n+                        Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.GET, new RequestHttpEntity(header,\n+            Query.newInstance().initParams(paramValues)), responseType, callback);\n+    }\n+\n+    @Override\n+    public <T> void getLarge(String url, Header header, Query query, Object body,\n+                             Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.GET_LARGE,\n+            new RequestHttpEntity(header, query, body), responseType, callback);\n+    }\n+\n+    @Override\n+    public <T> void delete(String url, Header header, Query query,\n+                           Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.DELETE,\n+            new RequestHttpEntity(header, query), responseType, callback);\n+    }\n+\n+    @Override\n+    public <T> void put(String url, Header header, Query query, Object body,\n+                        Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.PUT,\n+            new RequestHttpEntity(header, query, body), responseType, callback);\n+    }\n+\n+    @Override\n+    public <T> void putJson(String url, Header header, Map<String, String> paramValues,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2b7ebbf5bceb565cf6eaa3f12164f6fb1d5cff77"}, "originalPosition": 92}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjkyNzU0Ng==", "bodyText": "ok", "url": "https://github.com/alibaba/nacos/pull/2926#discussion_r432927546", "createdAt": "2020-05-31T09:27:27Z", "author": {"login": "Maijh97"}, "path": "common/src/main/java/com/alibaba/nacos/common/http/client/NacosAsyncRestTemplate.java", "diffHunk": "@@ -0,0 +1,170 @@\n+/*\n+ * Copyright 1999-2018 Alibaba Group Holding Ltd.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.alibaba.nacos.common.http.client;\n+\n+import com.alibaba.nacos.common.constant.HttpHeaderConsts;\n+import com.alibaba.nacos.common.http.Callback;\n+import com.alibaba.nacos.common.http.param.Header;\n+import com.alibaba.nacos.common.http.param.MediaType;\n+import com.alibaba.nacos.common.http.param.Query;\n+import com.alibaba.nacos.common.model.RequestHttpEntity;\n+import com.alibaba.nacos.common.utils.HttpMethod;\n+import com.alibaba.nacos.common.utils.UriUtils;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.lang.reflect.Type;\n+import java.net.URI;\n+import java.util.Map;\n+\n+/**\n+ * NacosAsyncRestTemplate async\n+ *\n+ * @author mai.jh\n+ * @date 2020/5/29\n+ * @see AsyncHttpClientRequest\n+ * @see HttpClientResponse\n+ */\n+public class NacosAsyncRestTemplate implements AsyncRestOperations {\n+\n+    private static final Logger logger = LoggerFactory.getLogger(NacosAsyncRestTemplate.class);\n+\n+    private AsyncHttpClientRequest clientRequest;\n+\n+    public NacosAsyncRestTemplate(AsyncHttpClientRequest clientRequest) {\n+        this.clientRequest = clientRequest;\n+    }\n+\n+\n+    @Override\n+    public <T> void get(String url, Header header, Query query, Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.GET, new RequestHttpEntity(header, query), responseType, callback);\n+    }\n+\n+    @Override\n+    public <T> void get(String url, Header header, Map<String, String> paramValues,\n+                        Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.GET, new RequestHttpEntity(header,\n+            Query.newInstance().initParams(paramValues)), responseType, callback);\n+    }\n+\n+    @Override\n+    public <T> void getLarge(String url, Header header, Query query, Object body,\n+                             Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.GET_LARGE,\n+            new RequestHttpEntity(header, query, body), responseType, callback);\n+    }\n+\n+    @Override\n+    public <T> void delete(String url, Header header, Query query,\n+                           Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.DELETE,\n+            new RequestHttpEntity(header, query), responseType, callback);\n+    }\n+\n+    @Override\n+    public <T> void put(String url, Header header, Query query, Object body,\n+                        Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.PUT,\n+            new RequestHttpEntity(header, query, body), responseType, callback);\n+    }\n+\n+    @Override\n+    public <T> void putJson(String url, Header header, Map<String, String> paramValues,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjg5OTI1MA=="}, "originalCommit": {"oid": "2b7ebbf5bceb565cf6eaa3f12164f6fb1d5cff77"}, "originalPosition": 92}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY5NjM4Mzk0OnYy", "diffSide": "RIGHT", "path": "common/src/main/java/com/alibaba/nacos/common/http/client/NacosAsyncRestTemplate.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0zMVQwMDo1MjoyNlrOGc2Ewg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0zMVQwOToyNzozNVrOGc3zPg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjg5OTI2Ng==", "bodyText": "You need to do a content-type substitution", "url": "https://github.com/alibaba/nacos/pull/2926#discussion_r432899266", "createdAt": "2020-05-31T00:52:26Z", "author": {"login": "chuntaojun"}, "path": "common/src/main/java/com/alibaba/nacos/common/http/client/NacosAsyncRestTemplate.java", "diffHunk": "@@ -0,0 +1,170 @@\n+/*\n+ * Copyright 1999-2018 Alibaba Group Holding Ltd.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.alibaba.nacos.common.http.client;\n+\n+import com.alibaba.nacos.common.constant.HttpHeaderConsts;\n+import com.alibaba.nacos.common.http.Callback;\n+import com.alibaba.nacos.common.http.param.Header;\n+import com.alibaba.nacos.common.http.param.MediaType;\n+import com.alibaba.nacos.common.http.param.Query;\n+import com.alibaba.nacos.common.model.RequestHttpEntity;\n+import com.alibaba.nacos.common.utils.HttpMethod;\n+import com.alibaba.nacos.common.utils.UriUtils;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.lang.reflect.Type;\n+import java.net.URI;\n+import java.util.Map;\n+\n+/**\n+ * NacosAsyncRestTemplate async\n+ *\n+ * @author mai.jh\n+ * @date 2020/5/29\n+ * @see AsyncHttpClientRequest\n+ * @see HttpClientResponse\n+ */\n+public class NacosAsyncRestTemplate implements AsyncRestOperations {\n+\n+    private static final Logger logger = LoggerFactory.getLogger(NacosAsyncRestTemplate.class);\n+\n+    private AsyncHttpClientRequest clientRequest;\n+\n+    public NacosAsyncRestTemplate(AsyncHttpClientRequest clientRequest) {\n+        this.clientRequest = clientRequest;\n+    }\n+\n+\n+    @Override\n+    public <T> void get(String url, Header header, Query query, Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.GET, new RequestHttpEntity(header, query), responseType, callback);\n+    }\n+\n+    @Override\n+    public <T> void get(String url, Header header, Map<String, String> paramValues,\n+                        Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.GET, new RequestHttpEntity(header,\n+            Query.newInstance().initParams(paramValues)), responseType, callback);\n+    }\n+\n+    @Override\n+    public <T> void getLarge(String url, Header header, Query query, Object body,\n+                             Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.GET_LARGE,\n+            new RequestHttpEntity(header, query, body), responseType, callback);\n+    }\n+\n+    @Override\n+    public <T> void delete(String url, Header header, Query query,\n+                           Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.DELETE,\n+            new RequestHttpEntity(header, query), responseType, callback);\n+    }\n+\n+    @Override\n+    public <T> void put(String url, Header header, Query query, Object body,\n+                        Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.PUT,\n+            new RequestHttpEntity(header, query, body), responseType, callback);\n+    }\n+\n+    @Override\n+    public <T> void putJson(String url, Header header, Map<String, String> paramValues,\n+                            String body, Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.PUT, new RequestHttpEntity(\n+            header, Query.newInstance().initParams(paramValues), body), responseType, callback);\n+\n+    }\n+\n+    @Override\n+    public <T> void putFrom(String url, Header header, Query query, Map<String, String> bodyValues,\n+                            Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.PUT, new RequestHttpEntity(\n+            header.addParam(HttpHeaderConsts.CONTENT_TYPE, MediaType.APPLICATION_FORM_URLENCODED),\n+            query, bodyValues), responseType, callback);\n+    }\n+\n+    @Override\n+    public <T> void putFrom(String url, Header header, Map<String, String> paramValues,\n+                            Map<String, String> bodyValues, Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.PUT, new RequestHttpEntity(\n+            header.addParam(HttpHeaderConsts.CONTENT_TYPE, MediaType.APPLICATION_FORM_URLENCODED),\n+            Query.newInstance().initParams(paramValues), bodyValues), responseType, callback);\n+    }\n+\n+    @Override\n+    public <T> void post(String url, Header header, Query query, Object body,\n+                         Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.POST, new RequestHttpEntity(\n+            header, query, body), responseType, callback);\n+    }\n+\n+    @Override\n+    public <T> void postJson(String url, Header header, Map<String, String> paramValues,\n+                             String body, Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.POST, new RequestHttpEntity(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2b7ebbf5bceb565cf6eaa3f12164f6fb1d5cff77"}, "originalPosition": 130}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjkyNzU1MA==", "bodyText": "ok", "url": "https://github.com/alibaba/nacos/pull/2926#discussion_r432927550", "createdAt": "2020-05-31T09:27:35Z", "author": {"login": "Maijh97"}, "path": "common/src/main/java/com/alibaba/nacos/common/http/client/NacosAsyncRestTemplate.java", "diffHunk": "@@ -0,0 +1,170 @@\n+/*\n+ * Copyright 1999-2018 Alibaba Group Holding Ltd.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.alibaba.nacos.common.http.client;\n+\n+import com.alibaba.nacos.common.constant.HttpHeaderConsts;\n+import com.alibaba.nacos.common.http.Callback;\n+import com.alibaba.nacos.common.http.param.Header;\n+import com.alibaba.nacos.common.http.param.MediaType;\n+import com.alibaba.nacos.common.http.param.Query;\n+import com.alibaba.nacos.common.model.RequestHttpEntity;\n+import com.alibaba.nacos.common.utils.HttpMethod;\n+import com.alibaba.nacos.common.utils.UriUtils;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.lang.reflect.Type;\n+import java.net.URI;\n+import java.util.Map;\n+\n+/**\n+ * NacosAsyncRestTemplate async\n+ *\n+ * @author mai.jh\n+ * @date 2020/5/29\n+ * @see AsyncHttpClientRequest\n+ * @see HttpClientResponse\n+ */\n+public class NacosAsyncRestTemplate implements AsyncRestOperations {\n+\n+    private static final Logger logger = LoggerFactory.getLogger(NacosAsyncRestTemplate.class);\n+\n+    private AsyncHttpClientRequest clientRequest;\n+\n+    public NacosAsyncRestTemplate(AsyncHttpClientRequest clientRequest) {\n+        this.clientRequest = clientRequest;\n+    }\n+\n+\n+    @Override\n+    public <T> void get(String url, Header header, Query query, Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.GET, new RequestHttpEntity(header, query), responseType, callback);\n+    }\n+\n+    @Override\n+    public <T> void get(String url, Header header, Map<String, String> paramValues,\n+                        Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.GET, new RequestHttpEntity(header,\n+            Query.newInstance().initParams(paramValues)), responseType, callback);\n+    }\n+\n+    @Override\n+    public <T> void getLarge(String url, Header header, Query query, Object body,\n+                             Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.GET_LARGE,\n+            new RequestHttpEntity(header, query, body), responseType, callback);\n+    }\n+\n+    @Override\n+    public <T> void delete(String url, Header header, Query query,\n+                           Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.DELETE,\n+            new RequestHttpEntity(header, query), responseType, callback);\n+    }\n+\n+    @Override\n+    public <T> void put(String url, Header header, Query query, Object body,\n+                        Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.PUT,\n+            new RequestHttpEntity(header, query, body), responseType, callback);\n+    }\n+\n+    @Override\n+    public <T> void putJson(String url, Header header, Map<String, String> paramValues,\n+                            String body, Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.PUT, new RequestHttpEntity(\n+            header, Query.newInstance().initParams(paramValues), body), responseType, callback);\n+\n+    }\n+\n+    @Override\n+    public <T> void putFrom(String url, Header header, Query query, Map<String, String> bodyValues,\n+                            Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.PUT, new RequestHttpEntity(\n+            header.addParam(HttpHeaderConsts.CONTENT_TYPE, MediaType.APPLICATION_FORM_URLENCODED),\n+            query, bodyValues), responseType, callback);\n+    }\n+\n+    @Override\n+    public <T> void putFrom(String url, Header header, Map<String, String> paramValues,\n+                            Map<String, String> bodyValues, Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.PUT, new RequestHttpEntity(\n+            header.addParam(HttpHeaderConsts.CONTENT_TYPE, MediaType.APPLICATION_FORM_URLENCODED),\n+            Query.newInstance().initParams(paramValues), bodyValues), responseType, callback);\n+    }\n+\n+    @Override\n+    public <T> void post(String url, Header header, Query query, Object body,\n+                         Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.POST, new RequestHttpEntity(\n+            header, query, body), responseType, callback);\n+    }\n+\n+    @Override\n+    public <T> void postJson(String url, Header header, Map<String, String> paramValues,\n+                             String body, Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.POST, new RequestHttpEntity(", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjg5OTI2Ng=="}, "originalCommit": {"oid": "2b7ebbf5bceb565cf6eaa3f12164f6fb1d5cff77"}, "originalPosition": 130}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY5NjM4NTIzOnYy", "diffSide": "RIGHT", "path": "common/src/main/java/com/alibaba/nacos/common/http/handler/ResponseHandler.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0zMVQwMDo1NTozMlrOGc2FWw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0zMVQwOTo0NzoyNVrOGc35Xg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjg5OTQxOQ==", "bodyText": "This is where the ClassCastException happens, so you need to think a little bit more about whether you want to return byte[] to the upper level", "url": "https://github.com/alibaba/nacos/pull/2926#discussion_r432899419", "createdAt": "2020-05-31T00:55:32Z", "author": {"login": "chuntaojun"}, "path": "common/src/main/java/com/alibaba/nacos/common/http/handler/ResponseHandler.java", "diffHunk": "@@ -37,4 +45,23 @@\n         return JacksonUtils.toObj(s, type);\n     }\n \n+    public static <T> T convert(InputStream inputStream, Class<T> tClass) throws Exception{\n+        return JacksonUtils.toObj(inputStream, tClass);\n+    }\n+\n+    @SuppressWarnings({\"unchecked\", \"rawtypes\", \"resource\"})\n+    public static <T> RestResult<T> responseEntityExtractor(HttpClientResponse response, Type type) throws Exception{\n+        Header headers = response.getHeaders();\n+        String contentType = headers.getValue(HttpHeaderConsts.CONTENT_TYPE);\n+        String body = IoUtils.toString(response.getBody(), headers.getCharset());\n+        T extractBody = (T) body;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2b7ebbf5bceb565cf6eaa3f12164f6fb1d5cff77"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjkyNzY4OA==", "bodyText": "I think that if a ClassCastException occurs, an exception should be thrown to let the user know.", "url": "https://github.com/alibaba/nacos/pull/2926#discussion_r432927688", "createdAt": "2020-05-31T09:29:16Z", "author": {"login": "Maijh97"}, "path": "common/src/main/java/com/alibaba/nacos/common/http/handler/ResponseHandler.java", "diffHunk": "@@ -37,4 +45,23 @@\n         return JacksonUtils.toObj(s, type);\n     }\n \n+    public static <T> T convert(InputStream inputStream, Class<T> tClass) throws Exception{\n+        return JacksonUtils.toObj(inputStream, tClass);\n+    }\n+\n+    @SuppressWarnings({\"unchecked\", \"rawtypes\", \"resource\"})\n+    public static <T> RestResult<T> responseEntityExtractor(HttpClientResponse response, Type type) throws Exception{\n+        Header headers = response.getHeaders();\n+        String contentType = headers.getValue(HttpHeaderConsts.CONTENT_TYPE);\n+        String body = IoUtils.toString(response.getBody(), headers.getCharset());\n+        T extractBody = (T) body;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjg5OTQxOQ=="}, "originalCommit": {"oid": "2b7ebbf5bceb565cf6eaa3f12164f6fb1d5cff77"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjkyOTExOA==", "bodyText": "Because there may be a problem with the type specified by the user, causing an exception. So I think the ClassCastException is inevitable", "url": "https://github.com/alibaba/nacos/pull/2926#discussion_r432929118", "createdAt": "2020-05-31T09:47:25Z", "author": {"login": "Maijh97"}, "path": "common/src/main/java/com/alibaba/nacos/common/http/handler/ResponseHandler.java", "diffHunk": "@@ -37,4 +45,23 @@\n         return JacksonUtils.toObj(s, type);\n     }\n \n+    public static <T> T convert(InputStream inputStream, Class<T> tClass) throws Exception{\n+        return JacksonUtils.toObj(inputStream, tClass);\n+    }\n+\n+    @SuppressWarnings({\"unchecked\", \"rawtypes\", \"resource\"})\n+    public static <T> RestResult<T> responseEntityExtractor(HttpClientResponse response, Type type) throws Exception{\n+        Header headers = response.getHeaders();\n+        String contentType = headers.getValue(HttpHeaderConsts.CONTENT_TYPE);\n+        String body = IoUtils.toString(response.getBody(), headers.getCharset());\n+        T extractBody = (T) body;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjg5OTQxOQ=="}, "originalCommit": {"oid": "2b7ebbf5bceb565cf6eaa3f12164f6fb1d5cff77"}, "originalPosition": 31}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY5NjM4NjMxOnYy", "diffSide": "RIGHT", "path": "common/src/main/java/com/alibaba/nacos/common/model/RestResult.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0zMVQwMDo1ODozNFrOGc2F4w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0zMVQwOTozMTo1OVrOGc30lg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjg5OTU1NQ==", "bodyText": "This constructor can only appear in HTTP packages", "url": "https://github.com/alibaba/nacos/pull/2926#discussion_r432899555", "createdAt": "2020-05-31T00:58:34Z", "author": {"login": "chuntaojun"}, "path": "common/src/main/java/com/alibaba/nacos/common/model/RestResult.java", "diffHunk": "@@ -25,13 +27,20 @@\n \n     private static final long serialVersionUID = 6095433538316185017L;\n \n+    private Header header;\n     private int code;\n     private String message;\n     private T data;\n \n     public RestResult() {\n     }\n \n+    public RestResult(Header header, int code, T data) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2b7ebbf5bceb565cf6eaa3f12164f6fb1d5cff77"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjkyNzg5NA==", "bodyText": "ok, expanded com.alibaba.nacos.common.http.HttpRestResult", "url": "https://github.com/alibaba/nacos/pull/2926#discussion_r432927894", "createdAt": "2020-05-31T09:31:59Z", "author": {"login": "Maijh97"}, "path": "common/src/main/java/com/alibaba/nacos/common/model/RestResult.java", "diffHunk": "@@ -25,13 +27,20 @@\n \n     private static final long serialVersionUID = 6095433538316185017L;\n \n+    private Header header;\n     private int code;\n     private String message;\n     private T data;\n \n     public RestResult() {\n     }\n \n+    public RestResult(Header header, int code, T data) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjg5OTU1NQ=="}, "originalCommit": {"oid": "2b7ebbf5bceb565cf6eaa3f12164f6fb1d5cff77"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY5NjM4NjU4OnYy", "diffSide": "RIGHT", "path": "common/src/main/java/com/alibaba/nacos/common/utils/UriUtils.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0zMVQwMDo1OTo0MVrOGc2GAw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0zMVQwOTozNjowNlrOGc311A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjg5OTU4Nw==", "bodyText": "can move into HttpUtils", "url": "https://github.com/alibaba/nacos/pull/2926#discussion_r432899587", "createdAt": "2020-05-31T00:59:41Z", "author": {"login": "chuntaojun"}, "path": "common/src/main/java/com/alibaba/nacos/common/utils/UriUtils.java", "diffHunk": "@@ -0,0 +1,38 @@\n+package com.alibaba.nacos.common.utils;\n+\n+import com.alibaba.nacos.common.http.param.Query;\n+\n+import java.net.URI;\n+import java.net.URISyntaxException;\n+\n+/**\n+ * URI build utils\n+ *\n+ * @author mai.jh\n+ * @date 2020/5/24\n+ */\n+public class UriUtils {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2b7ebbf5bceb565cf6eaa3f12164f6fb1d5cff77"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjkyODIxMg==", "bodyText": "Migrated to HttpUtils", "url": "https://github.com/alibaba/nacos/pull/2926#discussion_r432928212", "createdAt": "2020-05-31T09:36:06Z", "author": {"login": "Maijh97"}, "path": "common/src/main/java/com/alibaba/nacos/common/utils/UriUtils.java", "diffHunk": "@@ -0,0 +1,38 @@\n+package com.alibaba.nacos.common.utils;\n+\n+import com.alibaba.nacos.common.http.param.Query;\n+\n+import java.net.URI;\n+import java.net.URISyntaxException;\n+\n+/**\n+ * URI build utils\n+ *\n+ * @author mai.jh\n+ * @date 2020/5/24\n+ */\n+public class UriUtils {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjg5OTU4Nw=="}, "originalCommit": {"oid": "2b7ebbf5bceb565cf6eaa3f12164f6fb1d5cff77"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyNzQ4MTA0OnYy", "diffSide": "RIGHT", "path": "common/src/test/java/com/alibaba/nacos/common/http/HttpUtilsTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMTo1MDoyNVrOGhiHGw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMTo1MDoyNVrOGhiHGw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzgxNTA2Nw==", "bodyText": "Why add empty ut\uff1f", "url": "https://github.com/alibaba/nacos/pull/2926#discussion_r437815067", "createdAt": "2020-06-10T01:50:25Z", "author": {"login": "KomachiSion"}, "path": "common/src/test/java/com/alibaba/nacos/common/http/HttpUtilsTest.java", "diffHunk": "@@ -1,12 +1,29 @@\n+/*\n+ * Copyright 1999-2018 Alibaba Group Holding Ltd.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n package com.alibaba.nacos.common.http;\n \n+\n import org.junit.Test;\n \n public class HttpUtilsTest {\n \n-\t@Test\n-\tpublic void test_url_encode() throws Exception {\n+    @Test\n+    public void test_url_encode() throws Exception {\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a83241205ccf9ff651065a1874a18be6918ceddc"}, "originalPosition": 27}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyNzQ4NTMwOnYy", "diffSide": "RIGHT", "path": "common/src/main/java/com/alibaba/nacos/common/http/HttpClientManager.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMTo1MzowN1rOGhiJwg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMTo1MzowN1rOGhiJwg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzgxNTc0Ng==", "bodyText": "remove extra blank line", "url": "https://github.com/alibaba/nacos/pull/2926#discussion_r437815746", "createdAt": "2020-06-10T01:53:07Z", "author": {"login": "KomachiSion"}, "path": "common/src/main/java/com/alibaba/nacos/common/http/HttpClientManager.java", "diffHunk": "@@ -83,4 +104,5 @@ public static void shutdown() {\n \t\tlogger.warn(\"[HttpClientManager] Destruction of the end\");\n \t}\n \n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a83241205ccf9ff651065a1874a18be6918ceddc"}, "originalPosition": 58}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyNzUwNzYxOnYy", "diffSide": "RIGHT", "path": "common/src/main/java/com/alibaba/nacos/common/http/client/DefaultAsyncHttpClientRequest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMjowNzoyMFrOGhiXxw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMjowNzoyMFrOGhiXxw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzgxOTMzNQ==", "bodyText": "remove extra blank line", "url": "https://github.com/alibaba/nacos/pull/2926#discussion_r437819335", "createdAt": "2020-06-10T02:07:20Z", "author": {"login": "KomachiSion"}, "path": "common/src/main/java/com/alibaba/nacos/common/http/client/DefaultAsyncHttpClientRequest.java", "diffHunk": "@@ -0,0 +1,84 @@\n+/*\n+ * Copyright 1999-2018 Alibaba Group Holding Ltd.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.alibaba.nacos.common.http.client;\n+\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a83241205ccf9ff651065a1874a18be6918ceddc"}, "originalPosition": 19}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyNzUwODI0OnYy", "diffSide": "RIGHT", "path": "common/src/main/java/com/alibaba/nacos/common/http/client/DefaultAsyncHttpClientRequest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMjowNzo0MFrOGhiYIA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMjowNzo0MFrOGhiYIA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzgxOTQyNA==", "bodyText": "remove extra blank line", "url": "https://github.com/alibaba/nacos/pull/2926#discussion_r437819424", "createdAt": "2020-06-10T02:07:40Z", "author": {"login": "KomachiSion"}, "path": "common/src/main/java/com/alibaba/nacos/common/http/client/DefaultAsyncHttpClientRequest.java", "diffHunk": "@@ -0,0 +1,84 @@\n+/*\n+ * Copyright 1999-2018 Alibaba Group Holding Ltd.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.alibaba.nacos.common.http.client;\n+\n+\n+import com.alibaba.nacos.common.http.Callback;\n+import com.alibaba.nacos.common.http.HttpRestResult;\n+import com.alibaba.nacos.common.http.handler.ResponseHandler;\n+import com.alibaba.nacos.common.model.RequestHttpEntity;\n+import org.apache.http.HttpResponse;\n+import org.apache.http.client.methods.HttpRequestBase;\n+import org.apache.http.concurrent.FutureCallback;\n+import org.apache.http.impl.nio.client.CloseableHttpAsyncClient;\n+\n+import java.io.IOException;\n+import java.lang.reflect.Type;\n+import java.net.URI;\n+\n+/**\n+ * {@link AsyncHttpClientRequest} implementation that uses apache async http client to\n+ * execute streaming requests\n+ *\n+ * @author mai.jh\n+ * @date 2020/5/29\n+ */\n+public class DefaultAsyncHttpClientRequest implements AsyncHttpClientRequest {\n+\n+    private final CloseableHttpAsyncClient asyncClient;\n+\n+    public DefaultAsyncHttpClientRequest(CloseableHttpAsyncClient asyncClient) {\n+        this.asyncClient = asyncClient;\n+        if (!this.asyncClient.isRunning()) {\n+            this.asyncClient.start();\n+        }\n+    }\n+\n+    @Override\n+    public <T> void execute(URI uri, String httpMethod, RequestHttpEntity requestHttpEntity, final Type responseType, final Callback<T> callback) throws Exception {\n+        HttpRequestBase httpRequestBase = DefaultHttpClientRequest.build(uri, httpMethod, requestHttpEntity);\n+        asyncClient.execute(httpRequestBase, new FutureCallback<HttpResponse>() {\n+            @Override\n+            public void completed(HttpResponse result) {\n+                DefaultClientHttpResponse response = new DefaultClientHttpResponse(result);\n+                try {\n+                    HttpRestResult<T> httpRestResult = ResponseHandler.responseEntityExtractor(response, responseType);\n+                    callback.onReceive(httpRestResult);\n+                } catch (Exception e) {\n+                    callback.onError(e);\n+                }\n+            }\n+\n+            @Override\n+            public void failed(Exception ex) {\n+                callback.onError(ex);\n+            }\n+\n+            @Override\n+            public void cancelled() {\n+\n+            }\n+        });\n+\n+    }\n+\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a83241205ccf9ff651065a1874a18be6918ceddc"}, "originalPosition": 79}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyNzUwODQ1OnYy", "diffSide": "RIGHT", "path": "common/src/main/java/com/alibaba/nacos/common/http/client/DefaultClientHttpResponse.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMjowNzo1MFrOGhiYSg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMjowNzo1MFrOGhiYSg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzgxOTQ2Ng==", "bodyText": "remove extra blank line", "url": "https://github.com/alibaba/nacos/pull/2926#discussion_r437819466", "createdAt": "2020-06-10T02:07:50Z", "author": {"login": "KomachiSion"}, "path": "common/src/main/java/com/alibaba/nacos/common/http/client/DefaultClientHttpResponse.java", "diffHunk": "@@ -0,0 +1,82 @@\n+/*\n+ * Copyright 1999-2018 Alibaba Group Holding Ltd.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.alibaba.nacos.common.http.client;\n+\n+import com.alibaba.nacos.common.http.param.Header;\n+import org.apache.http.HttpResponse;\n+import org.apache.http.client.utils.HttpClientUtils;\n+\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a83241205ccf9ff651065a1874a18be6918ceddc"}, "originalPosition": 23}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyNzUwODYwOnYy", "diffSide": "RIGHT", "path": "common/src/main/java/com/alibaba/nacos/common/http/client/DefaultClientHttpResponse.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMjowNzo1NVrOGhiYZQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMjowNzo1NVrOGhiYZQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzgxOTQ5Mw==", "bodyText": "remove extra blank line", "url": "https://github.com/alibaba/nacos/pull/2926#discussion_r437819493", "createdAt": "2020-06-10T02:07:55Z", "author": {"login": "KomachiSion"}, "path": "common/src/main/java/com/alibaba/nacos/common/http/client/DefaultClientHttpResponse.java", "diffHunk": "@@ -0,0 +1,82 @@\n+/*\n+ * Copyright 1999-2018 Alibaba Group Holding Ltd.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.alibaba.nacos.common.http.client;\n+\n+import com.alibaba.nacos.common.http.param.Header;\n+import org.apache.http.HttpResponse;\n+import org.apache.http.client.utils.HttpClientUtils;\n+\n+\n+import java.io.IOException;\n+import java.io.InputStream;\n+\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a83241205ccf9ff651065a1874a18be6918ceddc"}, "originalPosition": 27}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyNzUxMjk4OnYy", "diffSide": "RIGHT", "path": "common/src/main/java/com/alibaba/nacos/common/http/client/DefaultHttpClientRequest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMjoxMDoxMVrOGhia9w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMjoxMDoxMVrOGhia9w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzgyMDE1MQ==", "bodyText": "remove extra blank line", "url": "https://github.com/alibaba/nacos/pull/2926#discussion_r437820151", "createdAt": "2020-06-10T02:10:11Z", "author": {"login": "KomachiSion"}, "path": "common/src/main/java/com/alibaba/nacos/common/http/client/DefaultHttpClientRequest.java", "diffHunk": "@@ -0,0 +1,81 @@\n+/*\n+ * Copyright 1999-2018 Alibaba Group Holding Ltd.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.alibaba.nacos.common.http.client;\n+\n+import com.alibaba.nacos.common.constant.HttpHeaderConsts;\n+import com.alibaba.nacos.common.http.BaseHttpMethod;\n+import com.alibaba.nacos.common.http.param.Header;\n+import com.alibaba.nacos.common.http.param.MediaType;\n+import com.alibaba.nacos.common.model.RequestHttpEntity;\n+import org.apache.http.client.methods.CloseableHttpResponse;\n+import org.apache.http.client.methods.HttpRequestBase;\n+import org.apache.http.impl.client.CloseableHttpClient;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.io.IOException;\n+import java.net.URI;\n+import java.util.Map;\n+\n+/**\n+ * {@link HttpClientRequest} implementation that uses apache http client to\n+ * execute streaming requests\n+ *\n+ * @author mai.jh\n+ * @date 2020/5/24\n+ */\n+@SuppressWarnings({\"unchecked\", \"rawtypes\", \"resource\"})\n+public class DefaultHttpClientRequest implements HttpClientRequest {\n+\n+    private static final Logger logger = LoggerFactory.getLogger(NacosRestTemplate.class);\n+\n+    private final CloseableHttpClient client;\n+\n+    public DefaultHttpClientRequest(CloseableHttpClient client) {\n+        this.client = client;\n+    }\n+\n+    @Override\n+    public HttpClientResponse execute(URI uri, String httpMethod, RequestHttpEntity requestHttpEntity) throws Exception {\n+        HttpRequestBase request = build(uri, httpMethod, requestHttpEntity);\n+        CloseableHttpResponse response = client.execute(request);\n+        if (logger.isDebugEnabled()) {\n+            logger.debug(\"Request from server: \" + request.getURI().toString());\n+        }\n+        return new DefaultClientHttpResponse(response);\n+    }\n+\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a83241205ccf9ff651065a1874a18be6918ceddc"}, "originalPosition": 62}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyNzUxNTUxOnYy", "diffSide": "RIGHT", "path": "common/src/main/java/com/alibaba/nacos/common/http/client/HttpClientRequest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMjoxMTo0MVrOGhicaQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMjoxMTo0MVrOGhicaQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzgyMDUyMQ==", "bodyText": "remove extra blank line", "url": "https://github.com/alibaba/nacos/pull/2926#discussion_r437820521", "createdAt": "2020-06-10T02:11:41Z", "author": {"login": "KomachiSion"}, "path": "common/src/main/java/com/alibaba/nacos/common/http/client/HttpClientRequest.java", "diffHunk": "@@ -0,0 +1,43 @@\n+/*\n+ * Copyright 1999-2018 Alibaba Group Holding Ltd.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.alibaba.nacos.common.http.client;\n+\n+import com.alibaba.nacos.common.model.RequestHttpEntity;\n+\n+import java.io.Closeable;\n+import java.net.URI;\n+\n+/**\n+ * Represents a client-side HTTP request.\n+ * Created via an implementation execute.\n+ *\n+ * @author mai.jh\n+ * @date 2020/5/23\n+ */\n+public interface HttpClientRequest extends Closeable {\n+\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a83241205ccf9ff651065a1874a18be6918ceddc"}, "originalPosition": 33}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyNzUxODgyOnYy", "diffSide": "RIGHT", "path": "common/src/main/java/com/alibaba/nacos/common/http/client/NacosAsyncRestTemplate.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMjoxMzo0NVrOGhiedA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMjoxMzo0NVrOGhiedA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzgyMTA0NA==", "bodyText": "remove extra blank line", "url": "https://github.com/alibaba/nacos/pull/2926#discussion_r437821044", "createdAt": "2020-06-10T02:13:45Z", "author": {"login": "KomachiSion"}, "path": "common/src/main/java/com/alibaba/nacos/common/http/client/NacosAsyncRestTemplate.java", "diffHunk": "@@ -0,0 +1,353 @@\n+/*\n+ * Copyright 1999-2018 Alibaba Group Holding Ltd.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.alibaba.nacos.common.http.client;\n+\n+import com.alibaba.nacos.common.http.Callback;\n+import com.alibaba.nacos.common.http.HttpUtils;\n+import com.alibaba.nacos.common.http.param.Header;\n+import com.alibaba.nacos.common.http.param.MediaType;\n+import com.alibaba.nacos.common.http.param.Query;\n+import com.alibaba.nacos.common.model.RequestHttpEntity;\n+import com.alibaba.nacos.common.utils.HttpMethod;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.lang.reflect.Type;\n+import java.net.URI;\n+import java.util.Map;\n+\n+/**\n+ * NacosAsyncRestTemplate async\n+ *\n+ * @author mai.jh\n+ * @date 2020/5/29\n+ * @see AsyncHttpClientRequest\n+ * @see HttpClientResponse\n+ */\n+public class NacosAsyncRestTemplate {\n+\n+    private static final Logger logger = LoggerFactory.getLogger(NacosAsyncRestTemplate.class);\n+\n+    private AsyncHttpClientRequest clientRequest;\n+\n+    public NacosAsyncRestTemplate(AsyncHttpClientRequest clientRequest) {\n+        this.clientRequest = clientRequest;\n+    }\n+\n+\n+    /**\n+     * async http get\n+     * URL request params are expanded using the given query {@link Query}.\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type.\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param responseType return type\n+     * @param header       http header param\n+     * @param query        http query param\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void get(String url, Header header, Query query, Type responseType, Callback<T> callback) throws Exception {\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a83241205ccf9ff651065a1874a18be6918ceddc"}, "originalPosition": 67}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyNzUxOTAzOnYy", "diffSide": "RIGHT", "path": "common/src/main/java/com/alibaba/nacos/common/http/client/NacosAsyncRestTemplate.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMjoxMzo1MFrOGhieiw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMjoxMzo1MFrOGhieiw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzgyMTA2Nw==", "bodyText": "remove extra blank line", "url": "https://github.com/alibaba/nacos/pull/2926#discussion_r437821067", "createdAt": "2020-06-10T02:13:50Z", "author": {"login": "KomachiSion"}, "path": "common/src/main/java/com/alibaba/nacos/common/http/client/NacosAsyncRestTemplate.java", "diffHunk": "@@ -0,0 +1,353 @@\n+/*\n+ * Copyright 1999-2018 Alibaba Group Holding Ltd.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.alibaba.nacos.common.http.client;\n+\n+import com.alibaba.nacos.common.http.Callback;\n+import com.alibaba.nacos.common.http.HttpUtils;\n+import com.alibaba.nacos.common.http.param.Header;\n+import com.alibaba.nacos.common.http.param.MediaType;\n+import com.alibaba.nacos.common.http.param.Query;\n+import com.alibaba.nacos.common.model.RequestHttpEntity;\n+import com.alibaba.nacos.common.utils.HttpMethod;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.lang.reflect.Type;\n+import java.net.URI;\n+import java.util.Map;\n+\n+/**\n+ * NacosAsyncRestTemplate async\n+ *\n+ * @author mai.jh\n+ * @date 2020/5/29\n+ * @see AsyncHttpClientRequest\n+ * @see HttpClientResponse\n+ */\n+public class NacosAsyncRestTemplate {\n+\n+    private static final Logger logger = LoggerFactory.getLogger(NacosAsyncRestTemplate.class);\n+\n+    private AsyncHttpClientRequest clientRequest;\n+\n+    public NacosAsyncRestTemplate(AsyncHttpClientRequest clientRequest) {\n+        this.clientRequest = clientRequest;\n+    }\n+\n+\n+    /**\n+     * async http get\n+     * URL request params are expanded using the given query {@link Query}.\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type.\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param responseType return type\n+     * @param header       http header param\n+     * @param query        http query param\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void get(String url, Header header, Query query, Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.GET, new RequestHttpEntity(header, query), responseType, callback);\n+    }\n+\n+    /**\n+     * async http get\n+     * URL request params are expanded using the given map {@code paramValues}.\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type.\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param header       headers\n+     * @param paramValues  paramValues\n+     * @param responseType return type\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void get(String url, Header header, Map<String, String> paramValues,\n+                        Type responseType, Callback<T> callback) throws Exception {\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a83241205ccf9ff651065a1874a18be6918ceddc"}, "originalPosition": 87}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyNzUxOTE1OnYy", "diffSide": "RIGHT", "path": "common/src/main/java/com/alibaba/nacos/common/http/client/NacosAsyncRestTemplate.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMjoxMzo1NFrOGhiemg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMjoxMzo1NFrOGhiemg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzgyMTA4Mg==", "bodyText": "remove extra blank line", "url": "https://github.com/alibaba/nacos/pull/2926#discussion_r437821082", "createdAt": "2020-06-10T02:13:54Z", "author": {"login": "KomachiSion"}, "path": "common/src/main/java/com/alibaba/nacos/common/http/client/NacosAsyncRestTemplate.java", "diffHunk": "@@ -0,0 +1,353 @@\n+/*\n+ * Copyright 1999-2018 Alibaba Group Holding Ltd.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.alibaba.nacos.common.http.client;\n+\n+import com.alibaba.nacos.common.http.Callback;\n+import com.alibaba.nacos.common.http.HttpUtils;\n+import com.alibaba.nacos.common.http.param.Header;\n+import com.alibaba.nacos.common.http.param.MediaType;\n+import com.alibaba.nacos.common.http.param.Query;\n+import com.alibaba.nacos.common.model.RequestHttpEntity;\n+import com.alibaba.nacos.common.utils.HttpMethod;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.lang.reflect.Type;\n+import java.net.URI;\n+import java.util.Map;\n+\n+/**\n+ * NacosAsyncRestTemplate async\n+ *\n+ * @author mai.jh\n+ * @date 2020/5/29\n+ * @see AsyncHttpClientRequest\n+ * @see HttpClientResponse\n+ */\n+public class NacosAsyncRestTemplate {\n+\n+    private static final Logger logger = LoggerFactory.getLogger(NacosAsyncRestTemplate.class);\n+\n+    private AsyncHttpClientRequest clientRequest;\n+\n+    public NacosAsyncRestTemplate(AsyncHttpClientRequest clientRequest) {\n+        this.clientRequest = clientRequest;\n+    }\n+\n+\n+    /**\n+     * async http get\n+     * URL request params are expanded using the given query {@link Query}.\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type.\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param responseType return type\n+     * @param header       http header param\n+     * @param query        http query param\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void get(String url, Header header, Query query, Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.GET, new RequestHttpEntity(header, query), responseType, callback);\n+    }\n+\n+    /**\n+     * async http get\n+     * URL request params are expanded using the given map {@code paramValues}.\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type.\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param header       headers\n+     * @param paramValues  paramValues\n+     * @param responseType return type\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void get(String url, Header header, Map<String, String> paramValues,\n+                        Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.GET, new RequestHttpEntity(header,\n+            Query.newInstance().initParams(paramValues)), responseType, callback);\n+    }\n+\n+    /**\n+     * async get request, may be pulling a lot of data\n+     * URL request params are expanded using the given query {@link Query},\n+     * More request parameters can be set via body.\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type.\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param query        http query param\n+     * @param body         get with body\n+     * @param responseType return type\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void getLarge(String url, Header header, Query query, Object body,\n+                             Type responseType, Callback<T> callback) throws Exception {\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a83241205ccf9ff651065a1874a18be6918ceddc"}, "originalPosition": 110}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyNzUxOTMxOnYy", "diffSide": "RIGHT", "path": "common/src/main/java/com/alibaba/nacos/common/http/client/NacosAsyncRestTemplate.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMjoxMzo1OFrOGhiesA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMjoxMzo1OFrOGhiesA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzgyMTEwNA==", "bodyText": "remove extra blank line", "url": "https://github.com/alibaba/nacos/pull/2926#discussion_r437821104", "createdAt": "2020-06-10T02:13:58Z", "author": {"login": "KomachiSion"}, "path": "common/src/main/java/com/alibaba/nacos/common/http/client/NacosAsyncRestTemplate.java", "diffHunk": "@@ -0,0 +1,353 @@\n+/*\n+ * Copyright 1999-2018 Alibaba Group Holding Ltd.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.alibaba.nacos.common.http.client;\n+\n+import com.alibaba.nacos.common.http.Callback;\n+import com.alibaba.nacos.common.http.HttpUtils;\n+import com.alibaba.nacos.common.http.param.Header;\n+import com.alibaba.nacos.common.http.param.MediaType;\n+import com.alibaba.nacos.common.http.param.Query;\n+import com.alibaba.nacos.common.model.RequestHttpEntity;\n+import com.alibaba.nacos.common.utils.HttpMethod;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.lang.reflect.Type;\n+import java.net.URI;\n+import java.util.Map;\n+\n+/**\n+ * NacosAsyncRestTemplate async\n+ *\n+ * @author mai.jh\n+ * @date 2020/5/29\n+ * @see AsyncHttpClientRequest\n+ * @see HttpClientResponse\n+ */\n+public class NacosAsyncRestTemplate {\n+\n+    private static final Logger logger = LoggerFactory.getLogger(NacosAsyncRestTemplate.class);\n+\n+    private AsyncHttpClientRequest clientRequest;\n+\n+    public NacosAsyncRestTemplate(AsyncHttpClientRequest clientRequest) {\n+        this.clientRequest = clientRequest;\n+    }\n+\n+\n+    /**\n+     * async http get\n+     * URL request params are expanded using the given query {@link Query}.\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type.\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param responseType return type\n+     * @param header       http header param\n+     * @param query        http query param\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void get(String url, Header header, Query query, Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.GET, new RequestHttpEntity(header, query), responseType, callback);\n+    }\n+\n+    /**\n+     * async http get\n+     * URL request params are expanded using the given map {@code paramValues}.\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type.\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param header       headers\n+     * @param paramValues  paramValues\n+     * @param responseType return type\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void get(String url, Header header, Map<String, String> paramValues,\n+                        Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.GET, new RequestHttpEntity(header,\n+            Query.newInstance().initParams(paramValues)), responseType, callback);\n+    }\n+\n+    /**\n+     * async get request, may be pulling a lot of data\n+     * URL request params are expanded using the given query {@link Query},\n+     * More request parameters can be set via body.\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type.\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param query        http query param\n+     * @param body         get with body\n+     * @param responseType return type\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void getLarge(String url, Header header, Query query, Object body,\n+                             Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.GET_LARGE,\n+            new RequestHttpEntity(header, query, body), responseType, callback);\n+    }\n+\n+    /**\n+     * async http delete\n+     * URL request params are expanded using the given query {@link Query},\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param query        http query param\n+     * @param responseType return type\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void delete(String url, Header header, Query query,\n+                           Type responseType, Callback<T> callback) throws Exception {\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a83241205ccf9ff651065a1874a18be6918ceddc"}, "originalPosition": 131}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyNzUxOTU0OnYy", "diffSide": "RIGHT", "path": "common/src/main/java/com/alibaba/nacos/common/http/client/NacosAsyncRestTemplate.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMjoxNDowNlrOGhie1w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMjoxNDowNlrOGhie1w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzgyMTE0Mw==", "bodyText": "remove extra blank line", "url": "https://github.com/alibaba/nacos/pull/2926#discussion_r437821143", "createdAt": "2020-06-10T02:14:06Z", "author": {"login": "KomachiSion"}, "path": "common/src/main/java/com/alibaba/nacos/common/http/client/NacosAsyncRestTemplate.java", "diffHunk": "@@ -0,0 +1,353 @@\n+/*\n+ * Copyright 1999-2018 Alibaba Group Holding Ltd.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.alibaba.nacos.common.http.client;\n+\n+import com.alibaba.nacos.common.http.Callback;\n+import com.alibaba.nacos.common.http.HttpUtils;\n+import com.alibaba.nacos.common.http.param.Header;\n+import com.alibaba.nacos.common.http.param.MediaType;\n+import com.alibaba.nacos.common.http.param.Query;\n+import com.alibaba.nacos.common.model.RequestHttpEntity;\n+import com.alibaba.nacos.common.utils.HttpMethod;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.lang.reflect.Type;\n+import java.net.URI;\n+import java.util.Map;\n+\n+/**\n+ * NacosAsyncRestTemplate async\n+ *\n+ * @author mai.jh\n+ * @date 2020/5/29\n+ * @see AsyncHttpClientRequest\n+ * @see HttpClientResponse\n+ */\n+public class NacosAsyncRestTemplate {\n+\n+    private static final Logger logger = LoggerFactory.getLogger(NacosAsyncRestTemplate.class);\n+\n+    private AsyncHttpClientRequest clientRequest;\n+\n+    public NacosAsyncRestTemplate(AsyncHttpClientRequest clientRequest) {\n+        this.clientRequest = clientRequest;\n+    }\n+\n+\n+    /**\n+     * async http get\n+     * URL request params are expanded using the given query {@link Query}.\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type.\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param responseType return type\n+     * @param header       http header param\n+     * @param query        http query param\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void get(String url, Header header, Query query, Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.GET, new RequestHttpEntity(header, query), responseType, callback);\n+    }\n+\n+    /**\n+     * async http get\n+     * URL request params are expanded using the given map {@code paramValues}.\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type.\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param header       headers\n+     * @param paramValues  paramValues\n+     * @param responseType return type\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void get(String url, Header header, Map<String, String> paramValues,\n+                        Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.GET, new RequestHttpEntity(header,\n+            Query.newInstance().initParams(paramValues)), responseType, callback);\n+    }\n+\n+    /**\n+     * async get request, may be pulling a lot of data\n+     * URL request params are expanded using the given query {@link Query},\n+     * More request parameters can be set via body.\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type.\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param query        http query param\n+     * @param body         get with body\n+     * @param responseType return type\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void getLarge(String url, Header header, Query query, Object body,\n+                             Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.GET_LARGE,\n+            new RequestHttpEntity(header, query, body), responseType, callback);\n+    }\n+\n+    /**\n+     * async http delete\n+     * URL request params are expanded using the given query {@link Query},\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param query        http query param\n+     * @param responseType return type\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void delete(String url, Header header, Query query,\n+                           Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.DELETE,\n+            new RequestHttpEntity(header, query), responseType, callback);\n+    }\n+\n+    /**\n+     * async http put\n+     * Create a new resource by PUTting the given body to http request.\n+     * <p>URL request params are expanded using the given query {@link Query}.\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param query        http query param\n+     * @param body         http body param\n+     * @param responseType return type\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void put(String url, Header header, Query query, Object body,\n+                        Type responseType, Callback<T> callback) throws Exception {\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a83241205ccf9ff651065a1874a18be6918ceddc"}, "originalPosition": 154}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyNzUxOTY3OnYy", "diffSide": "RIGHT", "path": "common/src/main/java/com/alibaba/nacos/common/http/client/NacosAsyncRestTemplate.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMjoxNDoxMlrOGhie7Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMjoxNDoxMlrOGhie7Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzgyMTE2NQ==", "bodyText": "remove extra blank line", "url": "https://github.com/alibaba/nacos/pull/2926#discussion_r437821165", "createdAt": "2020-06-10T02:14:12Z", "author": {"login": "KomachiSion"}, "path": "common/src/main/java/com/alibaba/nacos/common/http/client/NacosAsyncRestTemplate.java", "diffHunk": "@@ -0,0 +1,353 @@\n+/*\n+ * Copyright 1999-2018 Alibaba Group Holding Ltd.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.alibaba.nacos.common.http.client;\n+\n+import com.alibaba.nacos.common.http.Callback;\n+import com.alibaba.nacos.common.http.HttpUtils;\n+import com.alibaba.nacos.common.http.param.Header;\n+import com.alibaba.nacos.common.http.param.MediaType;\n+import com.alibaba.nacos.common.http.param.Query;\n+import com.alibaba.nacos.common.model.RequestHttpEntity;\n+import com.alibaba.nacos.common.utils.HttpMethod;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.lang.reflect.Type;\n+import java.net.URI;\n+import java.util.Map;\n+\n+/**\n+ * NacosAsyncRestTemplate async\n+ *\n+ * @author mai.jh\n+ * @date 2020/5/29\n+ * @see AsyncHttpClientRequest\n+ * @see HttpClientResponse\n+ */\n+public class NacosAsyncRestTemplate {\n+\n+    private static final Logger logger = LoggerFactory.getLogger(NacosAsyncRestTemplate.class);\n+\n+    private AsyncHttpClientRequest clientRequest;\n+\n+    public NacosAsyncRestTemplate(AsyncHttpClientRequest clientRequest) {\n+        this.clientRequest = clientRequest;\n+    }\n+\n+\n+    /**\n+     * async http get\n+     * URL request params are expanded using the given query {@link Query}.\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type.\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param responseType return type\n+     * @param header       http header param\n+     * @param query        http query param\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void get(String url, Header header, Query query, Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.GET, new RequestHttpEntity(header, query), responseType, callback);\n+    }\n+\n+    /**\n+     * async http get\n+     * URL request params are expanded using the given map {@code paramValues}.\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type.\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param header       headers\n+     * @param paramValues  paramValues\n+     * @param responseType return type\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void get(String url, Header header, Map<String, String> paramValues,\n+                        Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.GET, new RequestHttpEntity(header,\n+            Query.newInstance().initParams(paramValues)), responseType, callback);\n+    }\n+\n+    /**\n+     * async get request, may be pulling a lot of data\n+     * URL request params are expanded using the given query {@link Query},\n+     * More request parameters can be set via body.\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type.\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param query        http query param\n+     * @param body         get with body\n+     * @param responseType return type\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void getLarge(String url, Header header, Query query, Object body,\n+                             Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.GET_LARGE,\n+            new RequestHttpEntity(header, query, body), responseType, callback);\n+    }\n+\n+    /**\n+     * async http delete\n+     * URL request params are expanded using the given query {@link Query},\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param query        http query param\n+     * @param responseType return type\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void delete(String url, Header header, Query query,\n+                           Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.DELETE,\n+            new RequestHttpEntity(header, query), responseType, callback);\n+    }\n+\n+    /**\n+     * async http put\n+     * Create a new resource by PUTting the given body to http request.\n+     * <p>URL request params are expanded using the given query {@link Query}.\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param query        http query param\n+     * @param body         http body param\n+     * @param responseType return type\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void put(String url, Header header, Query query, Object body,\n+                        Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.PUT,\n+            new RequestHttpEntity(header, query, body), responseType, callback);\n+    }\n+\n+    /**\n+     * async http put Json\n+     * Create a new resource by PUTting the given body to http request,\n+     * http header contentType default 'application/json;charset=UTF-8'.\n+     * <p>URL request params are expanded using the given map {@code paramValues}.\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param paramValues  http query param\n+     * @param body         http body param\n+     * @param responseType return type\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void putJson(String url, Header header, Map<String, String> paramValues,\n+                            String body, Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.PUT, new RequestHttpEntity(\n+            header.setContentType(MediaType.APPLICATION_JSON),\n+                Query.newInstance().initParams(paramValues), body),\n+            responseType, callback);\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a83241205ccf9ff651065a1874a18be6918ceddc"}, "originalPosition": 183}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyNzUxOTc1OnYy", "diffSide": "RIGHT", "path": "common/src/main/java/com/alibaba/nacos/common/http/client/NacosAsyncRestTemplate.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMjoxNDoxOFrOGhifBA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMjoxNDoxOFrOGhifBA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzgyMTE4OA==", "bodyText": "remove extra blank line", "url": "https://github.com/alibaba/nacos/pull/2926#discussion_r437821188", "createdAt": "2020-06-10T02:14:18Z", "author": {"login": "KomachiSion"}, "path": "common/src/main/java/com/alibaba/nacos/common/http/client/NacosAsyncRestTemplate.java", "diffHunk": "@@ -0,0 +1,353 @@\n+/*\n+ * Copyright 1999-2018 Alibaba Group Holding Ltd.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.alibaba.nacos.common.http.client;\n+\n+import com.alibaba.nacos.common.http.Callback;\n+import com.alibaba.nacos.common.http.HttpUtils;\n+import com.alibaba.nacos.common.http.param.Header;\n+import com.alibaba.nacos.common.http.param.MediaType;\n+import com.alibaba.nacos.common.http.param.Query;\n+import com.alibaba.nacos.common.model.RequestHttpEntity;\n+import com.alibaba.nacos.common.utils.HttpMethod;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.lang.reflect.Type;\n+import java.net.URI;\n+import java.util.Map;\n+\n+/**\n+ * NacosAsyncRestTemplate async\n+ *\n+ * @author mai.jh\n+ * @date 2020/5/29\n+ * @see AsyncHttpClientRequest\n+ * @see HttpClientResponse\n+ */\n+public class NacosAsyncRestTemplate {\n+\n+    private static final Logger logger = LoggerFactory.getLogger(NacosAsyncRestTemplate.class);\n+\n+    private AsyncHttpClientRequest clientRequest;\n+\n+    public NacosAsyncRestTemplate(AsyncHttpClientRequest clientRequest) {\n+        this.clientRequest = clientRequest;\n+    }\n+\n+\n+    /**\n+     * async http get\n+     * URL request params are expanded using the given query {@link Query}.\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type.\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param responseType return type\n+     * @param header       http header param\n+     * @param query        http query param\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void get(String url, Header header, Query query, Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.GET, new RequestHttpEntity(header, query), responseType, callback);\n+    }\n+\n+    /**\n+     * async http get\n+     * URL request params are expanded using the given map {@code paramValues}.\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type.\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param header       headers\n+     * @param paramValues  paramValues\n+     * @param responseType return type\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void get(String url, Header header, Map<String, String> paramValues,\n+                        Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.GET, new RequestHttpEntity(header,\n+            Query.newInstance().initParams(paramValues)), responseType, callback);\n+    }\n+\n+    /**\n+     * async get request, may be pulling a lot of data\n+     * URL request params are expanded using the given query {@link Query},\n+     * More request parameters can be set via body.\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type.\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param query        http query param\n+     * @param body         get with body\n+     * @param responseType return type\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void getLarge(String url, Header header, Query query, Object body,\n+                             Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.GET_LARGE,\n+            new RequestHttpEntity(header, query, body), responseType, callback);\n+    }\n+\n+    /**\n+     * async http delete\n+     * URL request params are expanded using the given query {@link Query},\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param query        http query param\n+     * @param responseType return type\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void delete(String url, Header header, Query query,\n+                           Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.DELETE,\n+            new RequestHttpEntity(header, query), responseType, callback);\n+    }\n+\n+    /**\n+     * async http put\n+     * Create a new resource by PUTting the given body to http request.\n+     * <p>URL request params are expanded using the given query {@link Query}.\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param query        http query param\n+     * @param body         http body param\n+     * @param responseType return type\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void put(String url, Header header, Query query, Object body,\n+                        Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.PUT,\n+            new RequestHttpEntity(header, query, body), responseType, callback);\n+    }\n+\n+    /**\n+     * async http put Json\n+     * Create a new resource by PUTting the given body to http request,\n+     * http header contentType default 'application/json;charset=UTF-8'.\n+     * <p>URL request params are expanded using the given map {@code paramValues}.\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param paramValues  http query param\n+     * @param body         http body param\n+     * @param responseType return type\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void putJson(String url, Header header, Map<String, String> paramValues,\n+                            String body, Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.PUT, new RequestHttpEntity(\n+            header.setContentType(MediaType.APPLICATION_JSON),\n+                Query.newInstance().initParams(paramValues), body),\n+            responseType, callback);\n+\n+    }\n+\n+    /**\n+     * async http put from\n+     * Create a new resource by PUTting the given map {@code bodyValues} to http request,\n+     * http header contentType default 'application/x-www-form-urlencoded;charset=utf-8'.\n+     * <p>URL request params are expanded using the given query {@link Query}.\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type.\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param query        http query param\n+     * @param bodyValues   http body param\n+     * @param responseType return type\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void putFrom(String url, Header header, Query query, Map<String, String> bodyValues,\n+                            Type responseType, Callback<T> callback) throws Exception {\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a83241205ccf9ff651065a1874a18be6918ceddc"}, "originalPosition": 205}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyNzUxOTg3OnYy", "diffSide": "RIGHT", "path": "common/src/main/java/com/alibaba/nacos/common/http/client/NacosAsyncRestTemplate.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMjoxNDoyMlrOGhifGA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMjoxNDoyMlrOGhifGA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzgyMTIwOA==", "bodyText": "remove extra blank line", "url": "https://github.com/alibaba/nacos/pull/2926#discussion_r437821208", "createdAt": "2020-06-10T02:14:22Z", "author": {"login": "KomachiSion"}, "path": "common/src/main/java/com/alibaba/nacos/common/http/client/NacosAsyncRestTemplate.java", "diffHunk": "@@ -0,0 +1,353 @@\n+/*\n+ * Copyright 1999-2018 Alibaba Group Holding Ltd.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.alibaba.nacos.common.http.client;\n+\n+import com.alibaba.nacos.common.http.Callback;\n+import com.alibaba.nacos.common.http.HttpUtils;\n+import com.alibaba.nacos.common.http.param.Header;\n+import com.alibaba.nacos.common.http.param.MediaType;\n+import com.alibaba.nacos.common.http.param.Query;\n+import com.alibaba.nacos.common.model.RequestHttpEntity;\n+import com.alibaba.nacos.common.utils.HttpMethod;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.lang.reflect.Type;\n+import java.net.URI;\n+import java.util.Map;\n+\n+/**\n+ * NacosAsyncRestTemplate async\n+ *\n+ * @author mai.jh\n+ * @date 2020/5/29\n+ * @see AsyncHttpClientRequest\n+ * @see HttpClientResponse\n+ */\n+public class NacosAsyncRestTemplate {\n+\n+    private static final Logger logger = LoggerFactory.getLogger(NacosAsyncRestTemplate.class);\n+\n+    private AsyncHttpClientRequest clientRequest;\n+\n+    public NacosAsyncRestTemplate(AsyncHttpClientRequest clientRequest) {\n+        this.clientRequest = clientRequest;\n+    }\n+\n+\n+    /**\n+     * async http get\n+     * URL request params are expanded using the given query {@link Query}.\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type.\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param responseType return type\n+     * @param header       http header param\n+     * @param query        http query param\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void get(String url, Header header, Query query, Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.GET, new RequestHttpEntity(header, query), responseType, callback);\n+    }\n+\n+    /**\n+     * async http get\n+     * URL request params are expanded using the given map {@code paramValues}.\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type.\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param header       headers\n+     * @param paramValues  paramValues\n+     * @param responseType return type\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void get(String url, Header header, Map<String, String> paramValues,\n+                        Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.GET, new RequestHttpEntity(header,\n+            Query.newInstance().initParams(paramValues)), responseType, callback);\n+    }\n+\n+    /**\n+     * async get request, may be pulling a lot of data\n+     * URL request params are expanded using the given query {@link Query},\n+     * More request parameters can be set via body.\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type.\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param query        http query param\n+     * @param body         get with body\n+     * @param responseType return type\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void getLarge(String url, Header header, Query query, Object body,\n+                             Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.GET_LARGE,\n+            new RequestHttpEntity(header, query, body), responseType, callback);\n+    }\n+\n+    /**\n+     * async http delete\n+     * URL request params are expanded using the given query {@link Query},\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param query        http query param\n+     * @param responseType return type\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void delete(String url, Header header, Query query,\n+                           Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.DELETE,\n+            new RequestHttpEntity(header, query), responseType, callback);\n+    }\n+\n+    /**\n+     * async http put\n+     * Create a new resource by PUTting the given body to http request.\n+     * <p>URL request params are expanded using the given query {@link Query}.\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param query        http query param\n+     * @param body         http body param\n+     * @param responseType return type\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void put(String url, Header header, Query query, Object body,\n+                        Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.PUT,\n+            new RequestHttpEntity(header, query, body), responseType, callback);\n+    }\n+\n+    /**\n+     * async http put Json\n+     * Create a new resource by PUTting the given body to http request,\n+     * http header contentType default 'application/json;charset=UTF-8'.\n+     * <p>URL request params are expanded using the given map {@code paramValues}.\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param paramValues  http query param\n+     * @param body         http body param\n+     * @param responseType return type\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void putJson(String url, Header header, Map<String, String> paramValues,\n+                            String body, Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.PUT, new RequestHttpEntity(\n+            header.setContentType(MediaType.APPLICATION_JSON),\n+                Query.newInstance().initParams(paramValues), body),\n+            responseType, callback);\n+\n+    }\n+\n+    /**\n+     * async http put from\n+     * Create a new resource by PUTting the given map {@code bodyValues} to http request,\n+     * http header contentType default 'application/x-www-form-urlencoded;charset=utf-8'.\n+     * <p>URL request params are expanded using the given query {@link Query}.\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type.\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param query        http query param\n+     * @param bodyValues   http body param\n+     * @param responseType return type\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void putFrom(String url, Header header, Query query, Map<String, String> bodyValues,\n+                            Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.PUT, new RequestHttpEntity(\n+            header.setContentType(MediaType.APPLICATION_FORM_URLENCODED),\n+            query, bodyValues), responseType, callback);\n+    }\n+\n+    /**\n+     * async http put from\n+     * Create a new resource by PUTting the given map {@code bodyValues} to http request,\n+     * http header contentType default 'application/x-www-form-urlencoded;charset=utf-8'.\n+     * <p>URL request params are expanded using the given map {@code paramValues}.\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type.\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param paramValues  http query param\n+     * @param bodyValues   http body param\n+     * @param responseType return type\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void putFrom(String url, Header header, Map<String, String> paramValues,\n+                            Map<String, String> bodyValues, Type responseType, Callback<T> callback) throws Exception {\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a83241205ccf9ff651065a1874a18be6918ceddc"}, "originalPosition": 230}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyNzUxOTk1OnYy", "diffSide": "RIGHT", "path": "common/src/main/java/com/alibaba/nacos/common/http/client/NacosAsyncRestTemplate.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMjoxNDoyN1rOGhifJg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMjoxNDoyN1rOGhifJg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzgyMTIyMg==", "bodyText": "remove extra blank line", "url": "https://github.com/alibaba/nacos/pull/2926#discussion_r437821222", "createdAt": "2020-06-10T02:14:27Z", "author": {"login": "KomachiSion"}, "path": "common/src/main/java/com/alibaba/nacos/common/http/client/NacosAsyncRestTemplate.java", "diffHunk": "@@ -0,0 +1,353 @@\n+/*\n+ * Copyright 1999-2018 Alibaba Group Holding Ltd.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.alibaba.nacos.common.http.client;\n+\n+import com.alibaba.nacos.common.http.Callback;\n+import com.alibaba.nacos.common.http.HttpUtils;\n+import com.alibaba.nacos.common.http.param.Header;\n+import com.alibaba.nacos.common.http.param.MediaType;\n+import com.alibaba.nacos.common.http.param.Query;\n+import com.alibaba.nacos.common.model.RequestHttpEntity;\n+import com.alibaba.nacos.common.utils.HttpMethod;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.lang.reflect.Type;\n+import java.net.URI;\n+import java.util.Map;\n+\n+/**\n+ * NacosAsyncRestTemplate async\n+ *\n+ * @author mai.jh\n+ * @date 2020/5/29\n+ * @see AsyncHttpClientRequest\n+ * @see HttpClientResponse\n+ */\n+public class NacosAsyncRestTemplate {\n+\n+    private static final Logger logger = LoggerFactory.getLogger(NacosAsyncRestTemplate.class);\n+\n+    private AsyncHttpClientRequest clientRequest;\n+\n+    public NacosAsyncRestTemplate(AsyncHttpClientRequest clientRequest) {\n+        this.clientRequest = clientRequest;\n+    }\n+\n+\n+    /**\n+     * async http get\n+     * URL request params are expanded using the given query {@link Query}.\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type.\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param responseType return type\n+     * @param header       http header param\n+     * @param query        http query param\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void get(String url, Header header, Query query, Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.GET, new RequestHttpEntity(header, query), responseType, callback);\n+    }\n+\n+    /**\n+     * async http get\n+     * URL request params are expanded using the given map {@code paramValues}.\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type.\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param header       headers\n+     * @param paramValues  paramValues\n+     * @param responseType return type\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void get(String url, Header header, Map<String, String> paramValues,\n+                        Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.GET, new RequestHttpEntity(header,\n+            Query.newInstance().initParams(paramValues)), responseType, callback);\n+    }\n+\n+    /**\n+     * async get request, may be pulling a lot of data\n+     * URL request params are expanded using the given query {@link Query},\n+     * More request parameters can be set via body.\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type.\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param query        http query param\n+     * @param body         get with body\n+     * @param responseType return type\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void getLarge(String url, Header header, Query query, Object body,\n+                             Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.GET_LARGE,\n+            new RequestHttpEntity(header, query, body), responseType, callback);\n+    }\n+\n+    /**\n+     * async http delete\n+     * URL request params are expanded using the given query {@link Query},\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param query        http query param\n+     * @param responseType return type\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void delete(String url, Header header, Query query,\n+                           Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.DELETE,\n+            new RequestHttpEntity(header, query), responseType, callback);\n+    }\n+\n+    /**\n+     * async http put\n+     * Create a new resource by PUTting the given body to http request.\n+     * <p>URL request params are expanded using the given query {@link Query}.\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param query        http query param\n+     * @param body         http body param\n+     * @param responseType return type\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void put(String url, Header header, Query query, Object body,\n+                        Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.PUT,\n+            new RequestHttpEntity(header, query, body), responseType, callback);\n+    }\n+\n+    /**\n+     * async http put Json\n+     * Create a new resource by PUTting the given body to http request,\n+     * http header contentType default 'application/json;charset=UTF-8'.\n+     * <p>URL request params are expanded using the given map {@code paramValues}.\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param paramValues  http query param\n+     * @param body         http body param\n+     * @param responseType return type\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void putJson(String url, Header header, Map<String, String> paramValues,\n+                            String body, Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.PUT, new RequestHttpEntity(\n+            header.setContentType(MediaType.APPLICATION_JSON),\n+                Query.newInstance().initParams(paramValues), body),\n+            responseType, callback);\n+\n+    }\n+\n+    /**\n+     * async http put from\n+     * Create a new resource by PUTting the given map {@code bodyValues} to http request,\n+     * http header contentType default 'application/x-www-form-urlencoded;charset=utf-8'.\n+     * <p>URL request params are expanded using the given query {@link Query}.\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type.\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param query        http query param\n+     * @param bodyValues   http body param\n+     * @param responseType return type\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void putFrom(String url, Header header, Query query, Map<String, String> bodyValues,\n+                            Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.PUT, new RequestHttpEntity(\n+            header.setContentType(MediaType.APPLICATION_FORM_URLENCODED),\n+            query, bodyValues), responseType, callback);\n+    }\n+\n+    /**\n+     * async http put from\n+     * Create a new resource by PUTting the given map {@code bodyValues} to http request,\n+     * http header contentType default 'application/x-www-form-urlencoded;charset=utf-8'.\n+     * <p>URL request params are expanded using the given map {@code paramValues}.\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type.\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param paramValues  http query param\n+     * @param bodyValues   http body param\n+     * @param responseType return type\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void putFrom(String url, Header header, Map<String, String> paramValues,\n+                            Map<String, String> bodyValues, Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.PUT, new RequestHttpEntity(\n+            header.setContentType(MediaType.APPLICATION_FORM_URLENCODED),\n+            Query.newInstance().initParams(paramValues), bodyValues), responseType, callback);\n+    }\n+\n+    /**\n+     * async http post\n+     * Create a new resource by POSTing the given object to the http request.\n+     * <p>URL request params are expanded using the given query {@link Query}.\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type.\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param query        http query param\n+     * @param body         http body param\n+     * @param responseType return type\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void post(String url, Header header, Query query, Object body,\n+                         Type responseType, Callback<T> callback) throws Exception {\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a83241205ccf9ff651065a1874a18be6918ceddc"}, "originalPosition": 254}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyNzUyMDE5OnYy", "diffSide": "RIGHT", "path": "common/src/main/java/com/alibaba/nacos/common/http/client/NacosAsyncRestTemplate.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMjoxNDo0MFrOGhifUA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMjoxNDo0MFrOGhifUA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzgyMTI2NA==", "bodyText": "remove extra blank line", "url": "https://github.com/alibaba/nacos/pull/2926#discussion_r437821264", "createdAt": "2020-06-10T02:14:40Z", "author": {"login": "KomachiSion"}, "path": "common/src/main/java/com/alibaba/nacos/common/http/client/NacosAsyncRestTemplate.java", "diffHunk": "@@ -0,0 +1,353 @@\n+/*\n+ * Copyright 1999-2018 Alibaba Group Holding Ltd.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.alibaba.nacos.common.http.client;\n+\n+import com.alibaba.nacos.common.http.Callback;\n+import com.alibaba.nacos.common.http.HttpUtils;\n+import com.alibaba.nacos.common.http.param.Header;\n+import com.alibaba.nacos.common.http.param.MediaType;\n+import com.alibaba.nacos.common.http.param.Query;\n+import com.alibaba.nacos.common.model.RequestHttpEntity;\n+import com.alibaba.nacos.common.utils.HttpMethod;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.lang.reflect.Type;\n+import java.net.URI;\n+import java.util.Map;\n+\n+/**\n+ * NacosAsyncRestTemplate async\n+ *\n+ * @author mai.jh\n+ * @date 2020/5/29\n+ * @see AsyncHttpClientRequest\n+ * @see HttpClientResponse\n+ */\n+public class NacosAsyncRestTemplate {\n+\n+    private static final Logger logger = LoggerFactory.getLogger(NacosAsyncRestTemplate.class);\n+\n+    private AsyncHttpClientRequest clientRequest;\n+\n+    public NacosAsyncRestTemplate(AsyncHttpClientRequest clientRequest) {\n+        this.clientRequest = clientRequest;\n+    }\n+\n+\n+    /**\n+     * async http get\n+     * URL request params are expanded using the given query {@link Query}.\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type.\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param responseType return type\n+     * @param header       http header param\n+     * @param query        http query param\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void get(String url, Header header, Query query, Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.GET, new RequestHttpEntity(header, query), responseType, callback);\n+    }\n+\n+    /**\n+     * async http get\n+     * URL request params are expanded using the given map {@code paramValues}.\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type.\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param header       headers\n+     * @param paramValues  paramValues\n+     * @param responseType return type\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void get(String url, Header header, Map<String, String> paramValues,\n+                        Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.GET, new RequestHttpEntity(header,\n+            Query.newInstance().initParams(paramValues)), responseType, callback);\n+    }\n+\n+    /**\n+     * async get request, may be pulling a lot of data\n+     * URL request params are expanded using the given query {@link Query},\n+     * More request parameters can be set via body.\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type.\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param query        http query param\n+     * @param body         get with body\n+     * @param responseType return type\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void getLarge(String url, Header header, Query query, Object body,\n+                             Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.GET_LARGE,\n+            new RequestHttpEntity(header, query, body), responseType, callback);\n+    }\n+\n+    /**\n+     * async http delete\n+     * URL request params are expanded using the given query {@link Query},\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param query        http query param\n+     * @param responseType return type\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void delete(String url, Header header, Query query,\n+                           Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.DELETE,\n+            new RequestHttpEntity(header, query), responseType, callback);\n+    }\n+\n+    /**\n+     * async http put\n+     * Create a new resource by PUTting the given body to http request.\n+     * <p>URL request params are expanded using the given query {@link Query}.\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param query        http query param\n+     * @param body         http body param\n+     * @param responseType return type\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void put(String url, Header header, Query query, Object body,\n+                        Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.PUT,\n+            new RequestHttpEntity(header, query, body), responseType, callback);\n+    }\n+\n+    /**\n+     * async http put Json\n+     * Create a new resource by PUTting the given body to http request,\n+     * http header contentType default 'application/json;charset=UTF-8'.\n+     * <p>URL request params are expanded using the given map {@code paramValues}.\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param paramValues  http query param\n+     * @param body         http body param\n+     * @param responseType return type\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void putJson(String url, Header header, Map<String, String> paramValues,\n+                            String body, Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.PUT, new RequestHttpEntity(\n+            header.setContentType(MediaType.APPLICATION_JSON),\n+                Query.newInstance().initParams(paramValues), body),\n+            responseType, callback);\n+\n+    }\n+\n+    /**\n+     * async http put from\n+     * Create a new resource by PUTting the given map {@code bodyValues} to http request,\n+     * http header contentType default 'application/x-www-form-urlencoded;charset=utf-8'.\n+     * <p>URL request params are expanded using the given query {@link Query}.\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type.\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param query        http query param\n+     * @param bodyValues   http body param\n+     * @param responseType return type\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void putFrom(String url, Header header, Query query, Map<String, String> bodyValues,\n+                            Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.PUT, new RequestHttpEntity(\n+            header.setContentType(MediaType.APPLICATION_FORM_URLENCODED),\n+            query, bodyValues), responseType, callback);\n+    }\n+\n+    /**\n+     * async http put from\n+     * Create a new resource by PUTting the given map {@code bodyValues} to http request,\n+     * http header contentType default 'application/x-www-form-urlencoded;charset=utf-8'.\n+     * <p>URL request params are expanded using the given map {@code paramValues}.\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type.\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param paramValues  http query param\n+     * @param bodyValues   http body param\n+     * @param responseType return type\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void putFrom(String url, Header header, Map<String, String> paramValues,\n+                            Map<String, String> bodyValues, Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.PUT, new RequestHttpEntity(\n+            header.setContentType(MediaType.APPLICATION_FORM_URLENCODED),\n+            Query.newInstance().initParams(paramValues), bodyValues), responseType, callback);\n+    }\n+\n+    /**\n+     * async http post\n+     * Create a new resource by POSTing the given object to the http request.\n+     * <p>URL request params are expanded using the given query {@link Query}.\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type.\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param query        http query param\n+     * @param body         http body param\n+     * @param responseType return type\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void post(String url, Header header, Query query, Object body,\n+                         Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.POST, new RequestHttpEntity(\n+            header, query, body), responseType, callback);\n+    }\n+\n+    /**\n+     * async http post Json\n+     * Create a new resource by POSTing the given object to the http request,\n+     * http header contentType default 'application/json;charset=UTF-8'.\n+     * <p>URL request params are expanded using the given map {@code paramValues}.\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type.\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param paramValues  http query param\n+     * @param body         http body param\n+     * @param responseType return type\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void postJson(String url, Header header, Map<String, String> paramValues,\n+                             String body, Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.POST, new RequestHttpEntity(\n+            header.setContentType(MediaType.APPLICATION_JSON),\n+            Query.newInstance().initParams(paramValues), body),\n+            responseType, callback);\n+    }\n+\n+    /**\n+     * async http post from\n+     * Create a new resource by PUTting the given map {@code bodyValues} to http request,\n+     * http header contentType default 'application/x-www-form-urlencoded;charset=utf-8'.\n+     * <p>URL request params are expanded using the given query {@link Query}.\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type.\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param query        http query param\n+     * @param bodyValues   http body param\n+     * @param responseType return type\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void postFrom(String url, Header header, Query query, Map<String, String> bodyValues,\n+                             Type responseType, Callback<T> callback) throws Exception {\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a83241205ccf9ff651065a1874a18be6918ceddc"}, "originalPosition": 304}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyNzUyMDUyOnYy", "diffSide": "RIGHT", "path": "common/src/main/java/com/alibaba/nacos/common/http/client/NacosAsyncRestTemplate.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMjoxNDo0OFrOGhiffQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMjoxNDo0OFrOGhiffQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzgyMTMwOQ==", "bodyText": "remove extra blank line", "url": "https://github.com/alibaba/nacos/pull/2926#discussion_r437821309", "createdAt": "2020-06-10T02:14:48Z", "author": {"login": "KomachiSion"}, "path": "common/src/main/java/com/alibaba/nacos/common/http/client/NacosAsyncRestTemplate.java", "diffHunk": "@@ -0,0 +1,353 @@\n+/*\n+ * Copyright 1999-2018 Alibaba Group Holding Ltd.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.alibaba.nacos.common.http.client;\n+\n+import com.alibaba.nacos.common.http.Callback;\n+import com.alibaba.nacos.common.http.HttpUtils;\n+import com.alibaba.nacos.common.http.param.Header;\n+import com.alibaba.nacos.common.http.param.MediaType;\n+import com.alibaba.nacos.common.http.param.Query;\n+import com.alibaba.nacos.common.model.RequestHttpEntity;\n+import com.alibaba.nacos.common.utils.HttpMethod;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.lang.reflect.Type;\n+import java.net.URI;\n+import java.util.Map;\n+\n+/**\n+ * NacosAsyncRestTemplate async\n+ *\n+ * @author mai.jh\n+ * @date 2020/5/29\n+ * @see AsyncHttpClientRequest\n+ * @see HttpClientResponse\n+ */\n+public class NacosAsyncRestTemplate {\n+\n+    private static final Logger logger = LoggerFactory.getLogger(NacosAsyncRestTemplate.class);\n+\n+    private AsyncHttpClientRequest clientRequest;\n+\n+    public NacosAsyncRestTemplate(AsyncHttpClientRequest clientRequest) {\n+        this.clientRequest = clientRequest;\n+    }\n+\n+\n+    /**\n+     * async http get\n+     * URL request params are expanded using the given query {@link Query}.\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type.\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param responseType return type\n+     * @param header       http header param\n+     * @param query        http query param\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void get(String url, Header header, Query query, Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.GET, new RequestHttpEntity(header, query), responseType, callback);\n+    }\n+\n+    /**\n+     * async http get\n+     * URL request params are expanded using the given map {@code paramValues}.\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type.\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param header       headers\n+     * @param paramValues  paramValues\n+     * @param responseType return type\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void get(String url, Header header, Map<String, String> paramValues,\n+                        Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.GET, new RequestHttpEntity(header,\n+            Query.newInstance().initParams(paramValues)), responseType, callback);\n+    }\n+\n+    /**\n+     * async get request, may be pulling a lot of data\n+     * URL request params are expanded using the given query {@link Query},\n+     * More request parameters can be set via body.\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type.\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param query        http query param\n+     * @param body         get with body\n+     * @param responseType return type\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void getLarge(String url, Header header, Query query, Object body,\n+                             Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.GET_LARGE,\n+            new RequestHttpEntity(header, query, body), responseType, callback);\n+    }\n+\n+    /**\n+     * async http delete\n+     * URL request params are expanded using the given query {@link Query},\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param query        http query param\n+     * @param responseType return type\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void delete(String url, Header header, Query query,\n+                           Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.DELETE,\n+            new RequestHttpEntity(header, query), responseType, callback);\n+    }\n+\n+    /**\n+     * async http put\n+     * Create a new resource by PUTting the given body to http request.\n+     * <p>URL request params are expanded using the given query {@link Query}.\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param query        http query param\n+     * @param body         http body param\n+     * @param responseType return type\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void put(String url, Header header, Query query, Object body,\n+                        Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.PUT,\n+            new RequestHttpEntity(header, query, body), responseType, callback);\n+    }\n+\n+    /**\n+     * async http put Json\n+     * Create a new resource by PUTting the given body to http request,\n+     * http header contentType default 'application/json;charset=UTF-8'.\n+     * <p>URL request params are expanded using the given map {@code paramValues}.\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param paramValues  http query param\n+     * @param body         http body param\n+     * @param responseType return type\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void putJson(String url, Header header, Map<String, String> paramValues,\n+                            String body, Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.PUT, new RequestHttpEntity(\n+            header.setContentType(MediaType.APPLICATION_JSON),\n+                Query.newInstance().initParams(paramValues), body),\n+            responseType, callback);\n+\n+    }\n+\n+    /**\n+     * async http put from\n+     * Create a new resource by PUTting the given map {@code bodyValues} to http request,\n+     * http header contentType default 'application/x-www-form-urlencoded;charset=utf-8'.\n+     * <p>URL request params are expanded using the given query {@link Query}.\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type.\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param query        http query param\n+     * @param bodyValues   http body param\n+     * @param responseType return type\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void putFrom(String url, Header header, Query query, Map<String, String> bodyValues,\n+                            Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.PUT, new RequestHttpEntity(\n+            header.setContentType(MediaType.APPLICATION_FORM_URLENCODED),\n+            query, bodyValues), responseType, callback);\n+    }\n+\n+    /**\n+     * async http put from\n+     * Create a new resource by PUTting the given map {@code bodyValues} to http request,\n+     * http header contentType default 'application/x-www-form-urlencoded;charset=utf-8'.\n+     * <p>URL request params are expanded using the given map {@code paramValues}.\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type.\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param paramValues  http query param\n+     * @param bodyValues   http body param\n+     * @param responseType return type\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void putFrom(String url, Header header, Map<String, String> paramValues,\n+                            Map<String, String> bodyValues, Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.PUT, new RequestHttpEntity(\n+            header.setContentType(MediaType.APPLICATION_FORM_URLENCODED),\n+            Query.newInstance().initParams(paramValues), bodyValues), responseType, callback);\n+    }\n+\n+    /**\n+     * async http post\n+     * Create a new resource by POSTing the given object to the http request.\n+     * <p>URL request params are expanded using the given query {@link Query}.\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type.\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param query        http query param\n+     * @param body         http body param\n+     * @param responseType return type\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void post(String url, Header header, Query query, Object body,\n+                         Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.POST, new RequestHttpEntity(\n+            header, query, body), responseType, callback);\n+    }\n+\n+    /**\n+     * async http post Json\n+     * Create a new resource by POSTing the given object to the http request,\n+     * http header contentType default 'application/json;charset=UTF-8'.\n+     * <p>URL request params are expanded using the given map {@code paramValues}.\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type.\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param paramValues  http query param\n+     * @param body         http body param\n+     * @param responseType return type\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void postJson(String url, Header header, Map<String, String> paramValues,\n+                             String body, Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.POST, new RequestHttpEntity(\n+            header.setContentType(MediaType.APPLICATION_JSON),\n+            Query.newInstance().initParams(paramValues), body),\n+            responseType, callback);\n+    }\n+\n+    /**\n+     * async http post from\n+     * Create a new resource by PUTting the given map {@code bodyValues} to http request,\n+     * http header contentType default 'application/x-www-form-urlencoded;charset=utf-8'.\n+     * <p>URL request params are expanded using the given query {@link Query}.\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type.\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param query        http query param\n+     * @param bodyValues   http body param\n+     * @param responseType return type\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void postFrom(String url, Header header, Query query, Map<String, String> bodyValues,\n+                             Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.POST, new RequestHttpEntity(\n+                header.setContentType(MediaType.APPLICATION_FORM_URLENCODED), query, bodyValues),\n+            responseType, callback);\n+    }\n+\n+    /**\n+     * async http post from\n+     * Create a new resource by PUTting the given map {@code bodyValues} to http request,\n+     * http header contentType default 'application/x-www-form-urlencoded;charset=utf-8'.\n+     * <p>URL request params are expanded using the given map {@code paramValues}.\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type.\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param paramValues  http query param\n+     * @param bodyValues   http body param\n+     * @param responseType return type\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void postFrom(String url, Header header, Map<String, String> paramValues,\n+                             Map<String, String> bodyValues, Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.POST, new RequestHttpEntity(\n+            header.setContentType(MediaType.APPLICATION_FORM_URLENCODED),\n+            Query.newInstance().initParams(paramValues),\n+            bodyValues), responseType, callback);\n+\n+    }\n+\n+    private <T> void execute(String url, String httpMethod, RequestHttpEntity requestEntity,\n+                             Type responseType, Callback<T> callback) throws Exception {\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a83241205ccf9ff651065a1874a18be6918ceddc"}, "originalPosition": 339}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyNzUyMDYxOnYy", "diffSide": "RIGHT", "path": "common/src/main/java/com/alibaba/nacos/common/http/client/NacosAsyncRestTemplate.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMjoxNDo1M1rOGhifjg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMjoxNDo1M1rOGhifjg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzgyMTMyNg==", "bodyText": "remove extra blank line", "url": "https://github.com/alibaba/nacos/pull/2926#discussion_r437821326", "createdAt": "2020-06-10T02:14:53Z", "author": {"login": "KomachiSion"}, "path": "common/src/main/java/com/alibaba/nacos/common/http/client/NacosAsyncRestTemplate.java", "diffHunk": "@@ -0,0 +1,353 @@\n+/*\n+ * Copyright 1999-2018 Alibaba Group Holding Ltd.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.alibaba.nacos.common.http.client;\n+\n+import com.alibaba.nacos.common.http.Callback;\n+import com.alibaba.nacos.common.http.HttpUtils;\n+import com.alibaba.nacos.common.http.param.Header;\n+import com.alibaba.nacos.common.http.param.MediaType;\n+import com.alibaba.nacos.common.http.param.Query;\n+import com.alibaba.nacos.common.model.RequestHttpEntity;\n+import com.alibaba.nacos.common.utils.HttpMethod;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.lang.reflect.Type;\n+import java.net.URI;\n+import java.util.Map;\n+\n+/**\n+ * NacosAsyncRestTemplate async\n+ *\n+ * @author mai.jh\n+ * @date 2020/5/29\n+ * @see AsyncHttpClientRequest\n+ * @see HttpClientResponse\n+ */\n+public class NacosAsyncRestTemplate {\n+\n+    private static final Logger logger = LoggerFactory.getLogger(NacosAsyncRestTemplate.class);\n+\n+    private AsyncHttpClientRequest clientRequest;\n+\n+    public NacosAsyncRestTemplate(AsyncHttpClientRequest clientRequest) {\n+        this.clientRequest = clientRequest;\n+    }\n+\n+\n+    /**\n+     * async http get\n+     * URL request params are expanded using the given query {@link Query}.\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type.\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param responseType return type\n+     * @param header       http header param\n+     * @param query        http query param\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void get(String url, Header header, Query query, Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.GET, new RequestHttpEntity(header, query), responseType, callback);\n+    }\n+\n+    /**\n+     * async http get\n+     * URL request params are expanded using the given map {@code paramValues}.\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type.\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param header       headers\n+     * @param paramValues  paramValues\n+     * @param responseType return type\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void get(String url, Header header, Map<String, String> paramValues,\n+                        Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.GET, new RequestHttpEntity(header,\n+            Query.newInstance().initParams(paramValues)), responseType, callback);\n+    }\n+\n+    /**\n+     * async get request, may be pulling a lot of data\n+     * URL request params are expanded using the given query {@link Query},\n+     * More request parameters can be set via body.\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type.\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param query        http query param\n+     * @param body         get with body\n+     * @param responseType return type\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void getLarge(String url, Header header, Query query, Object body,\n+                             Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.GET_LARGE,\n+            new RequestHttpEntity(header, query, body), responseType, callback);\n+    }\n+\n+    /**\n+     * async http delete\n+     * URL request params are expanded using the given query {@link Query},\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param query        http query param\n+     * @param responseType return type\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void delete(String url, Header header, Query query,\n+                           Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.DELETE,\n+            new RequestHttpEntity(header, query), responseType, callback);\n+    }\n+\n+    /**\n+     * async http put\n+     * Create a new resource by PUTting the given body to http request.\n+     * <p>URL request params are expanded using the given query {@link Query}.\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param query        http query param\n+     * @param body         http body param\n+     * @param responseType return type\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void put(String url, Header header, Query query, Object body,\n+                        Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.PUT,\n+            new RequestHttpEntity(header, query, body), responseType, callback);\n+    }\n+\n+    /**\n+     * async http put Json\n+     * Create a new resource by PUTting the given body to http request,\n+     * http header contentType default 'application/json;charset=UTF-8'.\n+     * <p>URL request params are expanded using the given map {@code paramValues}.\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param paramValues  http query param\n+     * @param body         http body param\n+     * @param responseType return type\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void putJson(String url, Header header, Map<String, String> paramValues,\n+                            String body, Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.PUT, new RequestHttpEntity(\n+            header.setContentType(MediaType.APPLICATION_JSON),\n+                Query.newInstance().initParams(paramValues), body),\n+            responseType, callback);\n+\n+    }\n+\n+    /**\n+     * async http put from\n+     * Create a new resource by PUTting the given map {@code bodyValues} to http request,\n+     * http header contentType default 'application/x-www-form-urlencoded;charset=utf-8'.\n+     * <p>URL request params are expanded using the given query {@link Query}.\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type.\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param query        http query param\n+     * @param bodyValues   http body param\n+     * @param responseType return type\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void putFrom(String url, Header header, Query query, Map<String, String> bodyValues,\n+                            Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.PUT, new RequestHttpEntity(\n+            header.setContentType(MediaType.APPLICATION_FORM_URLENCODED),\n+            query, bodyValues), responseType, callback);\n+    }\n+\n+    /**\n+     * async http put from\n+     * Create a new resource by PUTting the given map {@code bodyValues} to http request,\n+     * http header contentType default 'application/x-www-form-urlencoded;charset=utf-8'.\n+     * <p>URL request params are expanded using the given map {@code paramValues}.\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type.\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param paramValues  http query param\n+     * @param bodyValues   http body param\n+     * @param responseType return type\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void putFrom(String url, Header header, Map<String, String> paramValues,\n+                            Map<String, String> bodyValues, Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.PUT, new RequestHttpEntity(\n+            header.setContentType(MediaType.APPLICATION_FORM_URLENCODED),\n+            Query.newInstance().initParams(paramValues), bodyValues), responseType, callback);\n+    }\n+\n+    /**\n+     * async http post\n+     * Create a new resource by POSTing the given object to the http request.\n+     * <p>URL request params are expanded using the given query {@link Query}.\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type.\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param query        http query param\n+     * @param body         http body param\n+     * @param responseType return type\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void post(String url, Header header, Query query, Object body,\n+                         Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.POST, new RequestHttpEntity(\n+            header, query, body), responseType, callback);\n+    }\n+\n+    /**\n+     * async http post Json\n+     * Create a new resource by POSTing the given object to the http request,\n+     * http header contentType default 'application/json;charset=UTF-8'.\n+     * <p>URL request params are expanded using the given map {@code paramValues}.\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type.\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param paramValues  http query param\n+     * @param body         http body param\n+     * @param responseType return type\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void postJson(String url, Header header, Map<String, String> paramValues,\n+                             String body, Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.POST, new RequestHttpEntity(\n+            header.setContentType(MediaType.APPLICATION_JSON),\n+            Query.newInstance().initParams(paramValues), body),\n+            responseType, callback);\n+    }\n+\n+    /**\n+     * async http post from\n+     * Create a new resource by PUTting the given map {@code bodyValues} to http request,\n+     * http header contentType default 'application/x-www-form-urlencoded;charset=utf-8'.\n+     * <p>URL request params are expanded using the given query {@link Query}.\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type.\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param query        http query param\n+     * @param bodyValues   http body param\n+     * @param responseType return type\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void postFrom(String url, Header header, Query query, Map<String, String> bodyValues,\n+                             Type responseType, Callback<T> callback) throws Exception {\n+\n+        execute(url, HttpMethod.POST, new RequestHttpEntity(\n+                header.setContentType(MediaType.APPLICATION_FORM_URLENCODED), query, bodyValues),\n+            responseType, callback);\n+    }\n+\n+    /**\n+     * async http post from\n+     * Create a new resource by PUTting the given map {@code bodyValues} to http request,\n+     * http header contentType default 'application/x-www-form-urlencoded;charset=utf-8'.\n+     * <p>URL request params are expanded using the given map {@code paramValues}.\n+     * <p>{@code responseType} can be an RestResult or RestResult data {@code T} type.\n+     * <p>{@code callback} Result callback execution,\n+     * if you need response headers, you can convert the received RestResult to HttpRestResult.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param paramValues  http query param\n+     * @param bodyValues   http body param\n+     * @param responseType return type\n+     * @param callback     callback {@link Callback#onReceive(com.alibaba.nacos.common.model.RestResult)}\n+     * @throws Exception ex\n+     */\n+    public <T> void postFrom(String url, Header header, Map<String, String> paramValues,\n+                             Map<String, String> bodyValues, Type responseType, Callback<T> callback) throws Exception {\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a83241205ccf9ff651065a1874a18be6918ceddc"}, "originalPosition": 329}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyNzUyMDg2OnYy", "diffSide": "RIGHT", "path": "common/src/main/java/com/alibaba/nacos/common/http/client/NacosRestTemplate.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMjoxNTowMFrOGhiftQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMjoxNTowMFrOGhiftQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzgyMTM2NQ==", "bodyText": "remove extra blank line", "url": "https://github.com/alibaba/nacos/pull/2926#discussion_r437821365", "createdAt": "2020-06-10T02:15:00Z", "author": {"login": "KomachiSion"}, "path": "common/src/main/java/com/alibaba/nacos/common/http/client/NacosRestTemplate.java", "diffHunk": "@@ -0,0 +1,324 @@\n+/*\n+ * Copyright 1999-2018 Alibaba Group Holding Ltd.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.alibaba.nacos.common.http.client;\n+\n+import com.alibaba.nacos.common.http.HttpRestResult;\n+import com.alibaba.nacos.common.http.HttpUtils;\n+import com.alibaba.nacos.common.http.handler.ResponseHandler;\n+import com.alibaba.nacos.common.http.param.Header;\n+import com.alibaba.nacos.common.http.param.MediaType;\n+import com.alibaba.nacos.common.http.param.Query;\n+import com.alibaba.nacos.common.model.RequestHttpEntity;\n+import com.alibaba.nacos.common.utils.HttpMethod;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.lang.reflect.Type;\n+import java.net.URI;\n+import java.util.Map;\n+\n+/**\n+ * NacosRestTemplate\n+ * Interface specifying a basic set of RESTful operations.\n+ *\n+ * @author mai.jh\n+ * @date 2020/5/24\n+ * @see HttpClientRequest\n+ * @see HttpClientResponse\n+ */\n+public class NacosRestTemplate {\n+\n+    private static final Logger logger = LoggerFactory.getLogger(NacosRestTemplate.class);\n+\n+    private HttpClientRequest requestClient;\n+\n+    public NacosRestTemplate(HttpClientRequest requestClient) {\n+        this.requestClient = requestClient;\n+    }\n+\n+    /**\n+     * http get\n+     * URL request params are expanded using the given query {@link Query}.\n+     * <p>{@code responseType} can be an HttpRestResult or HttpRestResult data {@code T} type.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param query        http query param\n+     * @param responseType return type\n+     * @return {@link HttpRestResult}\n+     * @throws Exception ex\n+     */\n+    public <T> HttpRestResult<T> get(String url, Header header, Query query, Type responseType) throws Exception {\n+        return execute(url, HttpMethod.GET, new RequestHttpEntity(header, query), responseType);\n+    }\n+\n+    /**\n+     * http get\n+     * URL request params are expanded using the given query {@link Query}.\n+     * <p>{@code responseType} can be an HttpRestResult or HttpRestResult data {@code T} type.\n+     *\n+     * @param url          url\n+     * @param header       headers\n+     * @param paramValues  paramValues\n+     * @param responseType return type\n+     * @return {@link HttpRestResult}\n+     * @throws Exception ex\n+     */\n+    public <T> HttpRestResult<T> get(String url, Header header, Map<String, String> paramValues, Type responseType) throws Exception {\n+        RequestHttpEntity requestHttpEntity = new RequestHttpEntity(header, Query.newInstance().initParams(paramValues));\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a83241205ccf9ff651065a1874a18be6918ceddc"}, "originalPosition": 83}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyNzUyMTA5OnYy", "diffSide": "RIGHT", "path": "common/src/main/java/com/alibaba/nacos/common/http/client/NacosRestTemplate.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMjoxNTowOVrOGhif2Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMjoxNTowOVrOGhif2Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzgyMTQwMQ==", "bodyText": "remove extra blank line", "url": "https://github.com/alibaba/nacos/pull/2926#discussion_r437821401", "createdAt": "2020-06-10T02:15:09Z", "author": {"login": "KomachiSion"}, "path": "common/src/main/java/com/alibaba/nacos/common/http/client/NacosRestTemplate.java", "diffHunk": "@@ -0,0 +1,324 @@\n+/*\n+ * Copyright 1999-2018 Alibaba Group Holding Ltd.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.alibaba.nacos.common.http.client;\n+\n+import com.alibaba.nacos.common.http.HttpRestResult;\n+import com.alibaba.nacos.common.http.HttpUtils;\n+import com.alibaba.nacos.common.http.handler.ResponseHandler;\n+import com.alibaba.nacos.common.http.param.Header;\n+import com.alibaba.nacos.common.http.param.MediaType;\n+import com.alibaba.nacos.common.http.param.Query;\n+import com.alibaba.nacos.common.model.RequestHttpEntity;\n+import com.alibaba.nacos.common.utils.HttpMethod;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.lang.reflect.Type;\n+import java.net.URI;\n+import java.util.Map;\n+\n+/**\n+ * NacosRestTemplate\n+ * Interface specifying a basic set of RESTful operations.\n+ *\n+ * @author mai.jh\n+ * @date 2020/5/24\n+ * @see HttpClientRequest\n+ * @see HttpClientResponse\n+ */\n+public class NacosRestTemplate {\n+\n+    private static final Logger logger = LoggerFactory.getLogger(NacosRestTemplate.class);\n+\n+    private HttpClientRequest requestClient;\n+\n+    public NacosRestTemplate(HttpClientRequest requestClient) {\n+        this.requestClient = requestClient;\n+    }\n+\n+    /**\n+     * http get\n+     * URL request params are expanded using the given query {@link Query}.\n+     * <p>{@code responseType} can be an HttpRestResult or HttpRestResult data {@code T} type.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param query        http query param\n+     * @param responseType return type\n+     * @return {@link HttpRestResult}\n+     * @throws Exception ex\n+     */\n+    public <T> HttpRestResult<T> get(String url, Header header, Query query, Type responseType) throws Exception {\n+        return execute(url, HttpMethod.GET, new RequestHttpEntity(header, query), responseType);\n+    }\n+\n+    /**\n+     * http get\n+     * URL request params are expanded using the given query {@link Query}.\n+     * <p>{@code responseType} can be an HttpRestResult or HttpRestResult data {@code T} type.\n+     *\n+     * @param url          url\n+     * @param header       headers\n+     * @param paramValues  paramValues\n+     * @param responseType return type\n+     * @return {@link HttpRestResult}\n+     * @throws Exception ex\n+     */\n+    public <T> HttpRestResult<T> get(String url, Header header, Map<String, String> paramValues, Type responseType) throws Exception {\n+        RequestHttpEntity requestHttpEntity = new RequestHttpEntity(header, Query.newInstance().initParams(paramValues));\n+\n+        return execute(url, HttpMethod.GET, requestHttpEntity, responseType);\n+    }\n+\n+    /**\n+     * get request, may be pulling a lot of data\n+     * URL request params are expanded using the given query {@link Query},\n+     * More request parameters can be set via body.\n+     * <p>{@code responseType} can be an HttpRestResult or HttpRestResult data {@code T} type.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param query        http query param\n+     * @param body         get with body\n+     * @param responseType return type\n+     * @return {@link HttpRestResult}\n+     * @throws Exception ex\n+     */\n+    public <T> HttpRestResult<T> getLarge(String url, Header header, Query query, Object body, Type responseType) throws Exception {\n+        return execute(url, HttpMethod.GET_LARGE, new RequestHttpEntity(header, query, body), responseType);\n+    }\n+\n+    /**\n+     * http delete\n+     * URL request params are expanded using the given query {@link Query}.\n+     * <p>{@code responseType} can be an HttpRestResult or HttpRestResult data {@code T} type.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param query        http query param\n+     * @param responseType return type\n+     * @return {@link HttpRestResult}\n+     * @throws Exception ex\n+     */\n+    public <T> HttpRestResult<T> delete(String url, Header header, Query query, Type responseType) throws Exception {\n+        return execute(url, HttpMethod.DELETE, new RequestHttpEntity(header, query), responseType);\n+    }\n+\n+    /**\n+     * http put\n+     * Create a new resource by PUTting the given body to http request.\n+     * <p>URL request params are expanded using the given query {@link Query}.\n+     * <p>{@code responseType} can be an HttpRestResult or HttpRestResult data {@code T} type.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param query        http query param\n+     * @param body         http body param\n+     * @param responseType return type\n+     * @return {@link HttpRestResult}\n+     * @throws Exception ex\n+     */\n+    public <T> HttpRestResult<T> put(String url, Header header, Query query, Object body, Type responseType) throws Exception {\n+        return execute(url, HttpMethod.PUT, new RequestHttpEntity(header, query, body), responseType);\n+    }\n+\n+    /**\n+     * http put json\n+     * Create a new resource by PUTting the given body to http request,\n+     * http header contentType default 'application/json;charset=UTF-8'.\n+     * <p>URL request params are expanded using the given map {@code paramValues}.\n+     * <p>{@code responseType} can be an HttpRestResult or HttpRestResult data {@code T} type.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param paramValues  http query param\n+     * @param body         http body param\n+     * @param responseType return type\n+     * @return {@link HttpRestResult}\n+     * @throws Exception ex\n+     */\n+    public <T> HttpRestResult<T> putJson(String url, Header header, Map<String, String> paramValues, String body, Type responseType) throws Exception {\n+        RequestHttpEntity requestHttpEntity = new RequestHttpEntity(\n+            header.setContentType(MediaType.APPLICATION_JSON),\n+            Query.newInstance().initParams(paramValues),\n+            body);\n+\n+        return execute(url, HttpMethod.PUT, requestHttpEntity, responseType);\n+    }\n+\n+    /**\n+     * http put from\n+     * Create a new resource by PUTting the given map {@code bodyValues} to http request,\n+     * http header contentType default 'application/x-www-form-urlencoded;charset=utf-8'.\n+     * <p>URL request params are expanded using the given query {@code Query}.\n+     * <p>{@code responseType} can be an HttpRestResult or HttpRestResult data {@code T} type.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param query  http query param\n+     * @param bodyValues   http body param\n+     * @param responseType return type\n+     * @return {@link HttpRestResult}\n+     * @throws Exception ex\n+     */\n+    public <T> HttpRestResult<T> putFrom(String url, Header header, Query query, Map<String, String> bodyValues, Type responseType) throws Exception {\n+        RequestHttpEntity requestHttpEntity = new RequestHttpEntity(\n+            header.setContentType(MediaType.APPLICATION_FORM_URLENCODED), query, bodyValues);\n+        return execute(url, HttpMethod.PUT, requestHttpEntity, responseType);\n+    }\n+\n+    /**\n+     * http put from\n+     * Create a new resource by PUTting the given map {@code bodyValues} to http request,\n+     * http header contentType default 'application/x-www-form-urlencoded;charset=utf-8'.\n+     * <p>URL request params are expanded using the given map {@code paramValues}.\n+     * <p>{@code responseType} can be an HttpRestResult or HttpRestResult data {@code T} type.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param paramValues  http query param\n+     * @param bodyValues   http body param\n+     * @param responseType return type\n+     * @return {@link HttpRestResult}\n+     * @throws Exception ex\n+     */\n+    public <T> HttpRestResult<T> putFrom(String url, Header header, Map<String, String> paramValues, Map<String, String> bodyValues, Type responseType) throws Exception {\n+        RequestHttpEntity requestHttpEntity = new RequestHttpEntity(\n+            header.setContentType(MediaType.APPLICATION_FORM_URLENCODED),\n+            Query.newInstance().initParams(paramValues),\n+            bodyValues);\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a83241205ccf9ff651065a1874a18be6918ceddc"}, "originalPosition": 204}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyNzUyMTIyOnYy", "diffSide": "RIGHT", "path": "common/src/main/java/com/alibaba/nacos/common/http/client/NacosRestTemplate.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMjoxNToxNVrOGhif7Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMjoxNToxNVrOGhif7Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzgyMTQyMQ==", "bodyText": "remove extra blank line", "url": "https://github.com/alibaba/nacos/pull/2926#discussion_r437821421", "createdAt": "2020-06-10T02:15:15Z", "author": {"login": "KomachiSion"}, "path": "common/src/main/java/com/alibaba/nacos/common/http/client/NacosRestTemplate.java", "diffHunk": "@@ -0,0 +1,324 @@\n+/*\n+ * Copyright 1999-2018 Alibaba Group Holding Ltd.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.alibaba.nacos.common.http.client;\n+\n+import com.alibaba.nacos.common.http.HttpRestResult;\n+import com.alibaba.nacos.common.http.HttpUtils;\n+import com.alibaba.nacos.common.http.handler.ResponseHandler;\n+import com.alibaba.nacos.common.http.param.Header;\n+import com.alibaba.nacos.common.http.param.MediaType;\n+import com.alibaba.nacos.common.http.param.Query;\n+import com.alibaba.nacos.common.model.RequestHttpEntity;\n+import com.alibaba.nacos.common.utils.HttpMethod;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.lang.reflect.Type;\n+import java.net.URI;\n+import java.util.Map;\n+\n+/**\n+ * NacosRestTemplate\n+ * Interface specifying a basic set of RESTful operations.\n+ *\n+ * @author mai.jh\n+ * @date 2020/5/24\n+ * @see HttpClientRequest\n+ * @see HttpClientResponse\n+ */\n+public class NacosRestTemplate {\n+\n+    private static final Logger logger = LoggerFactory.getLogger(NacosRestTemplate.class);\n+\n+    private HttpClientRequest requestClient;\n+\n+    public NacosRestTemplate(HttpClientRequest requestClient) {\n+        this.requestClient = requestClient;\n+    }\n+\n+    /**\n+     * http get\n+     * URL request params are expanded using the given query {@link Query}.\n+     * <p>{@code responseType} can be an HttpRestResult or HttpRestResult data {@code T} type.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param query        http query param\n+     * @param responseType return type\n+     * @return {@link HttpRestResult}\n+     * @throws Exception ex\n+     */\n+    public <T> HttpRestResult<T> get(String url, Header header, Query query, Type responseType) throws Exception {\n+        return execute(url, HttpMethod.GET, new RequestHttpEntity(header, query), responseType);\n+    }\n+\n+    /**\n+     * http get\n+     * URL request params are expanded using the given query {@link Query}.\n+     * <p>{@code responseType} can be an HttpRestResult or HttpRestResult data {@code T} type.\n+     *\n+     * @param url          url\n+     * @param header       headers\n+     * @param paramValues  paramValues\n+     * @param responseType return type\n+     * @return {@link HttpRestResult}\n+     * @throws Exception ex\n+     */\n+    public <T> HttpRestResult<T> get(String url, Header header, Map<String, String> paramValues, Type responseType) throws Exception {\n+        RequestHttpEntity requestHttpEntity = new RequestHttpEntity(header, Query.newInstance().initParams(paramValues));\n+\n+        return execute(url, HttpMethod.GET, requestHttpEntity, responseType);\n+    }\n+\n+    /**\n+     * get request, may be pulling a lot of data\n+     * URL request params are expanded using the given query {@link Query},\n+     * More request parameters can be set via body.\n+     * <p>{@code responseType} can be an HttpRestResult or HttpRestResult data {@code T} type.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param query        http query param\n+     * @param body         get with body\n+     * @param responseType return type\n+     * @return {@link HttpRestResult}\n+     * @throws Exception ex\n+     */\n+    public <T> HttpRestResult<T> getLarge(String url, Header header, Query query, Object body, Type responseType) throws Exception {\n+        return execute(url, HttpMethod.GET_LARGE, new RequestHttpEntity(header, query, body), responseType);\n+    }\n+\n+    /**\n+     * http delete\n+     * URL request params are expanded using the given query {@link Query}.\n+     * <p>{@code responseType} can be an HttpRestResult or HttpRestResult data {@code T} type.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param query        http query param\n+     * @param responseType return type\n+     * @return {@link HttpRestResult}\n+     * @throws Exception ex\n+     */\n+    public <T> HttpRestResult<T> delete(String url, Header header, Query query, Type responseType) throws Exception {\n+        return execute(url, HttpMethod.DELETE, new RequestHttpEntity(header, query), responseType);\n+    }\n+\n+    /**\n+     * http put\n+     * Create a new resource by PUTting the given body to http request.\n+     * <p>URL request params are expanded using the given query {@link Query}.\n+     * <p>{@code responseType} can be an HttpRestResult or HttpRestResult data {@code T} type.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param query        http query param\n+     * @param body         http body param\n+     * @param responseType return type\n+     * @return {@link HttpRestResult}\n+     * @throws Exception ex\n+     */\n+    public <T> HttpRestResult<T> put(String url, Header header, Query query, Object body, Type responseType) throws Exception {\n+        return execute(url, HttpMethod.PUT, new RequestHttpEntity(header, query, body), responseType);\n+    }\n+\n+    /**\n+     * http put json\n+     * Create a new resource by PUTting the given body to http request,\n+     * http header contentType default 'application/json;charset=UTF-8'.\n+     * <p>URL request params are expanded using the given map {@code paramValues}.\n+     * <p>{@code responseType} can be an HttpRestResult or HttpRestResult data {@code T} type.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param paramValues  http query param\n+     * @param body         http body param\n+     * @param responseType return type\n+     * @return {@link HttpRestResult}\n+     * @throws Exception ex\n+     */\n+    public <T> HttpRestResult<T> putJson(String url, Header header, Map<String, String> paramValues, String body, Type responseType) throws Exception {\n+        RequestHttpEntity requestHttpEntity = new RequestHttpEntity(\n+            header.setContentType(MediaType.APPLICATION_JSON),\n+            Query.newInstance().initParams(paramValues),\n+            body);\n+\n+        return execute(url, HttpMethod.PUT, requestHttpEntity, responseType);\n+    }\n+\n+    /**\n+     * http put from\n+     * Create a new resource by PUTting the given map {@code bodyValues} to http request,\n+     * http header contentType default 'application/x-www-form-urlencoded;charset=utf-8'.\n+     * <p>URL request params are expanded using the given query {@code Query}.\n+     * <p>{@code responseType} can be an HttpRestResult or HttpRestResult data {@code T} type.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param query  http query param\n+     * @param bodyValues   http body param\n+     * @param responseType return type\n+     * @return {@link HttpRestResult}\n+     * @throws Exception ex\n+     */\n+    public <T> HttpRestResult<T> putFrom(String url, Header header, Query query, Map<String, String> bodyValues, Type responseType) throws Exception {\n+        RequestHttpEntity requestHttpEntity = new RequestHttpEntity(\n+            header.setContentType(MediaType.APPLICATION_FORM_URLENCODED), query, bodyValues);\n+        return execute(url, HttpMethod.PUT, requestHttpEntity, responseType);\n+    }\n+\n+    /**\n+     * http put from\n+     * Create a new resource by PUTting the given map {@code bodyValues} to http request,\n+     * http header contentType default 'application/x-www-form-urlencoded;charset=utf-8'.\n+     * <p>URL request params are expanded using the given map {@code paramValues}.\n+     * <p>{@code responseType} can be an HttpRestResult or HttpRestResult data {@code T} type.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param paramValues  http query param\n+     * @param bodyValues   http body param\n+     * @param responseType return type\n+     * @return {@link HttpRestResult}\n+     * @throws Exception ex\n+     */\n+    public <T> HttpRestResult<T> putFrom(String url, Header header, Map<String, String> paramValues, Map<String, String> bodyValues, Type responseType) throws Exception {\n+        RequestHttpEntity requestHttpEntity = new RequestHttpEntity(\n+            header.setContentType(MediaType.APPLICATION_FORM_URLENCODED),\n+            Query.newInstance().initParams(paramValues),\n+            bodyValues);\n+\n+        return execute(url, HttpMethod.PUT, requestHttpEntity, responseType);\n+    }\n+\n+    /**\n+     * http post\n+     * Create a new resource by POSTing the given object to the http request.\n+     * <p>URL request params are expanded using the given query {@link Query}.\n+     * <p>{@code responseType} can be an HttpRestResult or HttpRestResult data {@code T} type.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param query        http query param\n+     * @param body         http body param\n+     * @param responseType return type\n+     * @return {@link HttpRestResult}\n+     * @throws Exception ex\n+     */\n+    public <T> HttpRestResult<T> post(String url, Header header, Query query, Object body, Type responseType) throws Exception {\n+        return execute(url, HttpMethod.POST, new RequestHttpEntity(header, query, body),\n+            responseType);\n+    }\n+\n+    /**\n+     * http post json\n+     * Create a new resource by POSTing the given object to the http request,\n+     * http header contentType default 'application/json;charset=UTF-8'.\n+     * <p>URL request params are expanded using the given map {@code paramValues}.\n+     * <p>{@code responseType} can be an HttpRestResult or HttpRestResult data {@code T} type.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param paramValues  http query param\n+     * @param body         http body param\n+     * @param responseType return type\n+     * @return {@link HttpRestResult}\n+     * @throws Exception ex\n+     */\n+    public <T> HttpRestResult<T> postJson(String url, Header header, Map<String, String> paramValues, String body, Type responseType) throws Exception {\n+        RequestHttpEntity requestHttpEntity = new RequestHttpEntity(\n+            header.setContentType(MediaType.APPLICATION_JSON),\n+            Query.newInstance().initParams(paramValues),\n+            body);\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a83241205ccf9ff651065a1874a18be6918ceddc"}, "originalPosition": 247}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyNzUyMTMwOnYy", "diffSide": "RIGHT", "path": "common/src/main/java/com/alibaba/nacos/common/http/client/NacosRestTemplate.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMjoxNToxOVrOGhigAA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMjoxNToxOVrOGhigAA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzgyMTQ0MA==", "bodyText": "remove extra blank line", "url": "https://github.com/alibaba/nacos/pull/2926#discussion_r437821440", "createdAt": "2020-06-10T02:15:19Z", "author": {"login": "KomachiSion"}, "path": "common/src/main/java/com/alibaba/nacos/common/http/client/NacosRestTemplate.java", "diffHunk": "@@ -0,0 +1,324 @@\n+/*\n+ * Copyright 1999-2018 Alibaba Group Holding Ltd.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.alibaba.nacos.common.http.client;\n+\n+import com.alibaba.nacos.common.http.HttpRestResult;\n+import com.alibaba.nacos.common.http.HttpUtils;\n+import com.alibaba.nacos.common.http.handler.ResponseHandler;\n+import com.alibaba.nacos.common.http.param.Header;\n+import com.alibaba.nacos.common.http.param.MediaType;\n+import com.alibaba.nacos.common.http.param.Query;\n+import com.alibaba.nacos.common.model.RequestHttpEntity;\n+import com.alibaba.nacos.common.utils.HttpMethod;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.lang.reflect.Type;\n+import java.net.URI;\n+import java.util.Map;\n+\n+/**\n+ * NacosRestTemplate\n+ * Interface specifying a basic set of RESTful operations.\n+ *\n+ * @author mai.jh\n+ * @date 2020/5/24\n+ * @see HttpClientRequest\n+ * @see HttpClientResponse\n+ */\n+public class NacosRestTemplate {\n+\n+    private static final Logger logger = LoggerFactory.getLogger(NacosRestTemplate.class);\n+\n+    private HttpClientRequest requestClient;\n+\n+    public NacosRestTemplate(HttpClientRequest requestClient) {\n+        this.requestClient = requestClient;\n+    }\n+\n+    /**\n+     * http get\n+     * URL request params are expanded using the given query {@link Query}.\n+     * <p>{@code responseType} can be an HttpRestResult or HttpRestResult data {@code T} type.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param query        http query param\n+     * @param responseType return type\n+     * @return {@link HttpRestResult}\n+     * @throws Exception ex\n+     */\n+    public <T> HttpRestResult<T> get(String url, Header header, Query query, Type responseType) throws Exception {\n+        return execute(url, HttpMethod.GET, new RequestHttpEntity(header, query), responseType);\n+    }\n+\n+    /**\n+     * http get\n+     * URL request params are expanded using the given query {@link Query}.\n+     * <p>{@code responseType} can be an HttpRestResult or HttpRestResult data {@code T} type.\n+     *\n+     * @param url          url\n+     * @param header       headers\n+     * @param paramValues  paramValues\n+     * @param responseType return type\n+     * @return {@link HttpRestResult}\n+     * @throws Exception ex\n+     */\n+    public <T> HttpRestResult<T> get(String url, Header header, Map<String, String> paramValues, Type responseType) throws Exception {\n+        RequestHttpEntity requestHttpEntity = new RequestHttpEntity(header, Query.newInstance().initParams(paramValues));\n+\n+        return execute(url, HttpMethod.GET, requestHttpEntity, responseType);\n+    }\n+\n+    /**\n+     * get request, may be pulling a lot of data\n+     * URL request params are expanded using the given query {@link Query},\n+     * More request parameters can be set via body.\n+     * <p>{@code responseType} can be an HttpRestResult or HttpRestResult data {@code T} type.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param query        http query param\n+     * @param body         get with body\n+     * @param responseType return type\n+     * @return {@link HttpRestResult}\n+     * @throws Exception ex\n+     */\n+    public <T> HttpRestResult<T> getLarge(String url, Header header, Query query, Object body, Type responseType) throws Exception {\n+        return execute(url, HttpMethod.GET_LARGE, new RequestHttpEntity(header, query, body), responseType);\n+    }\n+\n+    /**\n+     * http delete\n+     * URL request params are expanded using the given query {@link Query}.\n+     * <p>{@code responseType} can be an HttpRestResult or HttpRestResult data {@code T} type.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param query        http query param\n+     * @param responseType return type\n+     * @return {@link HttpRestResult}\n+     * @throws Exception ex\n+     */\n+    public <T> HttpRestResult<T> delete(String url, Header header, Query query, Type responseType) throws Exception {\n+        return execute(url, HttpMethod.DELETE, new RequestHttpEntity(header, query), responseType);\n+    }\n+\n+    /**\n+     * http put\n+     * Create a new resource by PUTting the given body to http request.\n+     * <p>URL request params are expanded using the given query {@link Query}.\n+     * <p>{@code responseType} can be an HttpRestResult or HttpRestResult data {@code T} type.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param query        http query param\n+     * @param body         http body param\n+     * @param responseType return type\n+     * @return {@link HttpRestResult}\n+     * @throws Exception ex\n+     */\n+    public <T> HttpRestResult<T> put(String url, Header header, Query query, Object body, Type responseType) throws Exception {\n+        return execute(url, HttpMethod.PUT, new RequestHttpEntity(header, query, body), responseType);\n+    }\n+\n+    /**\n+     * http put json\n+     * Create a new resource by PUTting the given body to http request,\n+     * http header contentType default 'application/json;charset=UTF-8'.\n+     * <p>URL request params are expanded using the given map {@code paramValues}.\n+     * <p>{@code responseType} can be an HttpRestResult or HttpRestResult data {@code T} type.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param paramValues  http query param\n+     * @param body         http body param\n+     * @param responseType return type\n+     * @return {@link HttpRestResult}\n+     * @throws Exception ex\n+     */\n+    public <T> HttpRestResult<T> putJson(String url, Header header, Map<String, String> paramValues, String body, Type responseType) throws Exception {\n+        RequestHttpEntity requestHttpEntity = new RequestHttpEntity(\n+            header.setContentType(MediaType.APPLICATION_JSON),\n+            Query.newInstance().initParams(paramValues),\n+            body);\n+\n+        return execute(url, HttpMethod.PUT, requestHttpEntity, responseType);\n+    }\n+\n+    /**\n+     * http put from\n+     * Create a new resource by PUTting the given map {@code bodyValues} to http request,\n+     * http header contentType default 'application/x-www-form-urlencoded;charset=utf-8'.\n+     * <p>URL request params are expanded using the given query {@code Query}.\n+     * <p>{@code responseType} can be an HttpRestResult or HttpRestResult data {@code T} type.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param query  http query param\n+     * @param bodyValues   http body param\n+     * @param responseType return type\n+     * @return {@link HttpRestResult}\n+     * @throws Exception ex\n+     */\n+    public <T> HttpRestResult<T> putFrom(String url, Header header, Query query, Map<String, String> bodyValues, Type responseType) throws Exception {\n+        RequestHttpEntity requestHttpEntity = new RequestHttpEntity(\n+            header.setContentType(MediaType.APPLICATION_FORM_URLENCODED), query, bodyValues);\n+        return execute(url, HttpMethod.PUT, requestHttpEntity, responseType);\n+    }\n+\n+    /**\n+     * http put from\n+     * Create a new resource by PUTting the given map {@code bodyValues} to http request,\n+     * http header contentType default 'application/x-www-form-urlencoded;charset=utf-8'.\n+     * <p>URL request params are expanded using the given map {@code paramValues}.\n+     * <p>{@code responseType} can be an HttpRestResult or HttpRestResult data {@code T} type.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param paramValues  http query param\n+     * @param bodyValues   http body param\n+     * @param responseType return type\n+     * @return {@link HttpRestResult}\n+     * @throws Exception ex\n+     */\n+    public <T> HttpRestResult<T> putFrom(String url, Header header, Map<String, String> paramValues, Map<String, String> bodyValues, Type responseType) throws Exception {\n+        RequestHttpEntity requestHttpEntity = new RequestHttpEntity(\n+            header.setContentType(MediaType.APPLICATION_FORM_URLENCODED),\n+            Query.newInstance().initParams(paramValues),\n+            bodyValues);\n+\n+        return execute(url, HttpMethod.PUT, requestHttpEntity, responseType);\n+    }\n+\n+    /**\n+     * http post\n+     * Create a new resource by POSTing the given object to the http request.\n+     * <p>URL request params are expanded using the given query {@link Query}.\n+     * <p>{@code responseType} can be an HttpRestResult or HttpRestResult data {@code T} type.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param query        http query param\n+     * @param body         http body param\n+     * @param responseType return type\n+     * @return {@link HttpRestResult}\n+     * @throws Exception ex\n+     */\n+    public <T> HttpRestResult<T> post(String url, Header header, Query query, Object body, Type responseType) throws Exception {\n+        return execute(url, HttpMethod.POST, new RequestHttpEntity(header, query, body),\n+            responseType);\n+    }\n+\n+    /**\n+     * http post json\n+     * Create a new resource by POSTing the given object to the http request,\n+     * http header contentType default 'application/json;charset=UTF-8'.\n+     * <p>URL request params are expanded using the given map {@code paramValues}.\n+     * <p>{@code responseType} can be an HttpRestResult or HttpRestResult data {@code T} type.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param paramValues  http query param\n+     * @param body         http body param\n+     * @param responseType return type\n+     * @return {@link HttpRestResult}\n+     * @throws Exception ex\n+     */\n+    public <T> HttpRestResult<T> postJson(String url, Header header, Map<String, String> paramValues, String body, Type responseType) throws Exception {\n+        RequestHttpEntity requestHttpEntity = new RequestHttpEntity(\n+            header.setContentType(MediaType.APPLICATION_JSON),\n+            Query.newInstance().initParams(paramValues),\n+            body);\n+\n+        return execute(url, HttpMethod.POST, requestHttpEntity, responseType);\n+    }\n+\n+    /**\n+     * http post from\n+     * Create a new resource by PUTting the given map {@code bodyValues} to http request,\n+     * http header contentType default 'application/x-www-form-urlencoded;charset=utf-8'.\n+     * <p>URL request params are expanded using the given query {@link Query}.\n+     * <p>{@code responseType} can be an HttpRestResult or HttpRestResult data {@code T} type.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param query  http query param\n+     * @param bodyValues   http body param\n+     * @param responseType return type\n+     * @return {@link HttpRestResult}\n+     * @throws Exception ex\n+     */\n+    public <T> HttpRestResult<T> postFrom(String url, Header header, Query query, Map<String, String> bodyValues, Type responseType) throws Exception {\n+        RequestHttpEntity requestHttpEntity = new RequestHttpEntity(\n+            header.setContentType(MediaType.APPLICATION_FORM_URLENCODED), query, bodyValues);\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a83241205ccf9ff651065a1874a18be6918ceddc"}, "originalPosition": 269}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyNzUyMTQ2OnYy", "diffSide": "RIGHT", "path": "common/src/main/java/com/alibaba/nacos/common/http/client/NacosRestTemplate.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMjoxNToyNFrOGhigGQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMjoxNToyNFrOGhigGQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzgyMTQ2NQ==", "bodyText": "remove extra blank line", "url": "https://github.com/alibaba/nacos/pull/2926#discussion_r437821465", "createdAt": "2020-06-10T02:15:24Z", "author": {"login": "KomachiSion"}, "path": "common/src/main/java/com/alibaba/nacos/common/http/client/NacosRestTemplate.java", "diffHunk": "@@ -0,0 +1,324 @@\n+/*\n+ * Copyright 1999-2018 Alibaba Group Holding Ltd.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.alibaba.nacos.common.http.client;\n+\n+import com.alibaba.nacos.common.http.HttpRestResult;\n+import com.alibaba.nacos.common.http.HttpUtils;\n+import com.alibaba.nacos.common.http.handler.ResponseHandler;\n+import com.alibaba.nacos.common.http.param.Header;\n+import com.alibaba.nacos.common.http.param.MediaType;\n+import com.alibaba.nacos.common.http.param.Query;\n+import com.alibaba.nacos.common.model.RequestHttpEntity;\n+import com.alibaba.nacos.common.utils.HttpMethod;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.lang.reflect.Type;\n+import java.net.URI;\n+import java.util.Map;\n+\n+/**\n+ * NacosRestTemplate\n+ * Interface specifying a basic set of RESTful operations.\n+ *\n+ * @author mai.jh\n+ * @date 2020/5/24\n+ * @see HttpClientRequest\n+ * @see HttpClientResponse\n+ */\n+public class NacosRestTemplate {\n+\n+    private static final Logger logger = LoggerFactory.getLogger(NacosRestTemplate.class);\n+\n+    private HttpClientRequest requestClient;\n+\n+    public NacosRestTemplate(HttpClientRequest requestClient) {\n+        this.requestClient = requestClient;\n+    }\n+\n+    /**\n+     * http get\n+     * URL request params are expanded using the given query {@link Query}.\n+     * <p>{@code responseType} can be an HttpRestResult or HttpRestResult data {@code T} type.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param query        http query param\n+     * @param responseType return type\n+     * @return {@link HttpRestResult}\n+     * @throws Exception ex\n+     */\n+    public <T> HttpRestResult<T> get(String url, Header header, Query query, Type responseType) throws Exception {\n+        return execute(url, HttpMethod.GET, new RequestHttpEntity(header, query), responseType);\n+    }\n+\n+    /**\n+     * http get\n+     * URL request params are expanded using the given query {@link Query}.\n+     * <p>{@code responseType} can be an HttpRestResult or HttpRestResult data {@code T} type.\n+     *\n+     * @param url          url\n+     * @param header       headers\n+     * @param paramValues  paramValues\n+     * @param responseType return type\n+     * @return {@link HttpRestResult}\n+     * @throws Exception ex\n+     */\n+    public <T> HttpRestResult<T> get(String url, Header header, Map<String, String> paramValues, Type responseType) throws Exception {\n+        RequestHttpEntity requestHttpEntity = new RequestHttpEntity(header, Query.newInstance().initParams(paramValues));\n+\n+        return execute(url, HttpMethod.GET, requestHttpEntity, responseType);\n+    }\n+\n+    /**\n+     * get request, may be pulling a lot of data\n+     * URL request params are expanded using the given query {@link Query},\n+     * More request parameters can be set via body.\n+     * <p>{@code responseType} can be an HttpRestResult or HttpRestResult data {@code T} type.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param query        http query param\n+     * @param body         get with body\n+     * @param responseType return type\n+     * @return {@link HttpRestResult}\n+     * @throws Exception ex\n+     */\n+    public <T> HttpRestResult<T> getLarge(String url, Header header, Query query, Object body, Type responseType) throws Exception {\n+        return execute(url, HttpMethod.GET_LARGE, new RequestHttpEntity(header, query, body), responseType);\n+    }\n+\n+    /**\n+     * http delete\n+     * URL request params are expanded using the given query {@link Query}.\n+     * <p>{@code responseType} can be an HttpRestResult or HttpRestResult data {@code T} type.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param query        http query param\n+     * @param responseType return type\n+     * @return {@link HttpRestResult}\n+     * @throws Exception ex\n+     */\n+    public <T> HttpRestResult<T> delete(String url, Header header, Query query, Type responseType) throws Exception {\n+        return execute(url, HttpMethod.DELETE, new RequestHttpEntity(header, query), responseType);\n+    }\n+\n+    /**\n+     * http put\n+     * Create a new resource by PUTting the given body to http request.\n+     * <p>URL request params are expanded using the given query {@link Query}.\n+     * <p>{@code responseType} can be an HttpRestResult or HttpRestResult data {@code T} type.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param query        http query param\n+     * @param body         http body param\n+     * @param responseType return type\n+     * @return {@link HttpRestResult}\n+     * @throws Exception ex\n+     */\n+    public <T> HttpRestResult<T> put(String url, Header header, Query query, Object body, Type responseType) throws Exception {\n+        return execute(url, HttpMethod.PUT, new RequestHttpEntity(header, query, body), responseType);\n+    }\n+\n+    /**\n+     * http put json\n+     * Create a new resource by PUTting the given body to http request,\n+     * http header contentType default 'application/json;charset=UTF-8'.\n+     * <p>URL request params are expanded using the given map {@code paramValues}.\n+     * <p>{@code responseType} can be an HttpRestResult or HttpRestResult data {@code T} type.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param paramValues  http query param\n+     * @param body         http body param\n+     * @param responseType return type\n+     * @return {@link HttpRestResult}\n+     * @throws Exception ex\n+     */\n+    public <T> HttpRestResult<T> putJson(String url, Header header, Map<String, String> paramValues, String body, Type responseType) throws Exception {\n+        RequestHttpEntity requestHttpEntity = new RequestHttpEntity(\n+            header.setContentType(MediaType.APPLICATION_JSON),\n+            Query.newInstance().initParams(paramValues),\n+            body);\n+\n+        return execute(url, HttpMethod.PUT, requestHttpEntity, responseType);\n+    }\n+\n+    /**\n+     * http put from\n+     * Create a new resource by PUTting the given map {@code bodyValues} to http request,\n+     * http header contentType default 'application/x-www-form-urlencoded;charset=utf-8'.\n+     * <p>URL request params are expanded using the given query {@code Query}.\n+     * <p>{@code responseType} can be an HttpRestResult or HttpRestResult data {@code T} type.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param query  http query param\n+     * @param bodyValues   http body param\n+     * @param responseType return type\n+     * @return {@link HttpRestResult}\n+     * @throws Exception ex\n+     */\n+    public <T> HttpRestResult<T> putFrom(String url, Header header, Query query, Map<String, String> bodyValues, Type responseType) throws Exception {\n+        RequestHttpEntity requestHttpEntity = new RequestHttpEntity(\n+            header.setContentType(MediaType.APPLICATION_FORM_URLENCODED), query, bodyValues);\n+        return execute(url, HttpMethod.PUT, requestHttpEntity, responseType);\n+    }\n+\n+    /**\n+     * http put from\n+     * Create a new resource by PUTting the given map {@code bodyValues} to http request,\n+     * http header contentType default 'application/x-www-form-urlencoded;charset=utf-8'.\n+     * <p>URL request params are expanded using the given map {@code paramValues}.\n+     * <p>{@code responseType} can be an HttpRestResult or HttpRestResult data {@code T} type.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param paramValues  http query param\n+     * @param bodyValues   http body param\n+     * @param responseType return type\n+     * @return {@link HttpRestResult}\n+     * @throws Exception ex\n+     */\n+    public <T> HttpRestResult<T> putFrom(String url, Header header, Map<String, String> paramValues, Map<String, String> bodyValues, Type responseType) throws Exception {\n+        RequestHttpEntity requestHttpEntity = new RequestHttpEntity(\n+            header.setContentType(MediaType.APPLICATION_FORM_URLENCODED),\n+            Query.newInstance().initParams(paramValues),\n+            bodyValues);\n+\n+        return execute(url, HttpMethod.PUT, requestHttpEntity, responseType);\n+    }\n+\n+    /**\n+     * http post\n+     * Create a new resource by POSTing the given object to the http request.\n+     * <p>URL request params are expanded using the given query {@link Query}.\n+     * <p>{@code responseType} can be an HttpRestResult or HttpRestResult data {@code T} type.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param query        http query param\n+     * @param body         http body param\n+     * @param responseType return type\n+     * @return {@link HttpRestResult}\n+     * @throws Exception ex\n+     */\n+    public <T> HttpRestResult<T> post(String url, Header header, Query query, Object body, Type responseType) throws Exception {\n+        return execute(url, HttpMethod.POST, new RequestHttpEntity(header, query, body),\n+            responseType);\n+    }\n+\n+    /**\n+     * http post json\n+     * Create a new resource by POSTing the given object to the http request,\n+     * http header contentType default 'application/json;charset=UTF-8'.\n+     * <p>URL request params are expanded using the given map {@code paramValues}.\n+     * <p>{@code responseType} can be an HttpRestResult or HttpRestResult data {@code T} type.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param paramValues  http query param\n+     * @param body         http body param\n+     * @param responseType return type\n+     * @return {@link HttpRestResult}\n+     * @throws Exception ex\n+     */\n+    public <T> HttpRestResult<T> postJson(String url, Header header, Map<String, String> paramValues, String body, Type responseType) throws Exception {\n+        RequestHttpEntity requestHttpEntity = new RequestHttpEntity(\n+            header.setContentType(MediaType.APPLICATION_JSON),\n+            Query.newInstance().initParams(paramValues),\n+            body);\n+\n+        return execute(url, HttpMethod.POST, requestHttpEntity, responseType);\n+    }\n+\n+    /**\n+     * http post from\n+     * Create a new resource by PUTting the given map {@code bodyValues} to http request,\n+     * http header contentType default 'application/x-www-form-urlencoded;charset=utf-8'.\n+     * <p>URL request params are expanded using the given query {@link Query}.\n+     * <p>{@code responseType} can be an HttpRestResult or HttpRestResult data {@code T} type.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param query  http query param\n+     * @param bodyValues   http body param\n+     * @param responseType return type\n+     * @return {@link HttpRestResult}\n+     * @throws Exception ex\n+     */\n+    public <T> HttpRestResult<T> postFrom(String url, Header header, Query query, Map<String, String> bodyValues, Type responseType) throws Exception {\n+        RequestHttpEntity requestHttpEntity = new RequestHttpEntity(\n+            header.setContentType(MediaType.APPLICATION_FORM_URLENCODED), query, bodyValues);\n+\n+        return execute(url, HttpMethod.POST, requestHttpEntity, responseType);\n+    }\n+\n+    /**\n+     * http post from\n+     * Create a new resource by PUTting the given map {@code bodyValues} to http request,\n+     * http header contentType default 'application/x-www-form-urlencoded;charset=utf-8'.\n+     * <p>URL request params are expanded using the given map {@code paramValues}.\n+     * <p>{@code responseType} can be an HttpRestResult or HttpRestResult data {@code T} type.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param paramValues  http query param\n+     * @param bodyValues   http body param\n+     * @param responseType return type\n+     * @return {@link HttpRestResult}\n+     * @throws Exception ex\n+     */\n+    public <T> HttpRestResult<T> postFrom(String url, Header header, Map<String, String> paramValues, Map<String, String> bodyValues, Type responseType) throws Exception {\n+        RequestHttpEntity requestHttpEntity = new RequestHttpEntity(\n+            header.setContentType(MediaType.APPLICATION_FORM_URLENCODED),\n+            Query.newInstance().initParams(paramValues),\n+            bodyValues);\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a83241205ccf9ff651065a1874a18be6918ceddc"}, "originalPosition": 293}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyNzUyMTg1OnYy", "diffSide": "RIGHT", "path": "common/src/main/java/com/alibaba/nacos/common/http/client/NacosRestTemplate.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMjoxNTozOVrOGhigYA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMjoxNTozOVrOGhigYA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzgyMTUzNg==", "bodyText": "remove extra blank line", "url": "https://github.com/alibaba/nacos/pull/2926#discussion_r437821536", "createdAt": "2020-06-10T02:15:39Z", "author": {"login": "KomachiSion"}, "path": "common/src/main/java/com/alibaba/nacos/common/http/client/NacosRestTemplate.java", "diffHunk": "@@ -0,0 +1,324 @@\n+/*\n+ * Copyright 1999-2018 Alibaba Group Holding Ltd.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.alibaba.nacos.common.http.client;\n+\n+import com.alibaba.nacos.common.http.HttpRestResult;\n+import com.alibaba.nacos.common.http.HttpUtils;\n+import com.alibaba.nacos.common.http.handler.ResponseHandler;\n+import com.alibaba.nacos.common.http.param.Header;\n+import com.alibaba.nacos.common.http.param.MediaType;\n+import com.alibaba.nacos.common.http.param.Query;\n+import com.alibaba.nacos.common.model.RequestHttpEntity;\n+import com.alibaba.nacos.common.utils.HttpMethod;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.lang.reflect.Type;\n+import java.net.URI;\n+import java.util.Map;\n+\n+/**\n+ * NacosRestTemplate\n+ * Interface specifying a basic set of RESTful operations.\n+ *\n+ * @author mai.jh\n+ * @date 2020/5/24\n+ * @see HttpClientRequest\n+ * @see HttpClientResponse\n+ */\n+public class NacosRestTemplate {\n+\n+    private static final Logger logger = LoggerFactory.getLogger(NacosRestTemplate.class);\n+\n+    private HttpClientRequest requestClient;\n+\n+    public NacosRestTemplate(HttpClientRequest requestClient) {\n+        this.requestClient = requestClient;\n+    }\n+\n+    /**\n+     * http get\n+     * URL request params are expanded using the given query {@link Query}.\n+     * <p>{@code responseType} can be an HttpRestResult or HttpRestResult data {@code T} type.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param query        http query param\n+     * @param responseType return type\n+     * @return {@link HttpRestResult}\n+     * @throws Exception ex\n+     */\n+    public <T> HttpRestResult<T> get(String url, Header header, Query query, Type responseType) throws Exception {\n+        return execute(url, HttpMethod.GET, new RequestHttpEntity(header, query), responseType);\n+    }\n+\n+    /**\n+     * http get\n+     * URL request params are expanded using the given query {@link Query}.\n+     * <p>{@code responseType} can be an HttpRestResult or HttpRestResult data {@code T} type.\n+     *\n+     * @param url          url\n+     * @param header       headers\n+     * @param paramValues  paramValues\n+     * @param responseType return type\n+     * @return {@link HttpRestResult}\n+     * @throws Exception ex\n+     */\n+    public <T> HttpRestResult<T> get(String url, Header header, Map<String, String> paramValues, Type responseType) throws Exception {\n+        RequestHttpEntity requestHttpEntity = new RequestHttpEntity(header, Query.newInstance().initParams(paramValues));\n+\n+        return execute(url, HttpMethod.GET, requestHttpEntity, responseType);\n+    }\n+\n+    /**\n+     * get request, may be pulling a lot of data\n+     * URL request params are expanded using the given query {@link Query},\n+     * More request parameters can be set via body.\n+     * <p>{@code responseType} can be an HttpRestResult or HttpRestResult data {@code T} type.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param query        http query param\n+     * @param body         get with body\n+     * @param responseType return type\n+     * @return {@link HttpRestResult}\n+     * @throws Exception ex\n+     */\n+    public <T> HttpRestResult<T> getLarge(String url, Header header, Query query, Object body, Type responseType) throws Exception {\n+        return execute(url, HttpMethod.GET_LARGE, new RequestHttpEntity(header, query, body), responseType);\n+    }\n+\n+    /**\n+     * http delete\n+     * URL request params are expanded using the given query {@link Query}.\n+     * <p>{@code responseType} can be an HttpRestResult or HttpRestResult data {@code T} type.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param query        http query param\n+     * @param responseType return type\n+     * @return {@link HttpRestResult}\n+     * @throws Exception ex\n+     */\n+    public <T> HttpRestResult<T> delete(String url, Header header, Query query, Type responseType) throws Exception {\n+        return execute(url, HttpMethod.DELETE, new RequestHttpEntity(header, query), responseType);\n+    }\n+\n+    /**\n+     * http put\n+     * Create a new resource by PUTting the given body to http request.\n+     * <p>URL request params are expanded using the given query {@link Query}.\n+     * <p>{@code responseType} can be an HttpRestResult or HttpRestResult data {@code T} type.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param query        http query param\n+     * @param body         http body param\n+     * @param responseType return type\n+     * @return {@link HttpRestResult}\n+     * @throws Exception ex\n+     */\n+    public <T> HttpRestResult<T> put(String url, Header header, Query query, Object body, Type responseType) throws Exception {\n+        return execute(url, HttpMethod.PUT, new RequestHttpEntity(header, query, body), responseType);\n+    }\n+\n+    /**\n+     * http put json\n+     * Create a new resource by PUTting the given body to http request,\n+     * http header contentType default 'application/json;charset=UTF-8'.\n+     * <p>URL request params are expanded using the given map {@code paramValues}.\n+     * <p>{@code responseType} can be an HttpRestResult or HttpRestResult data {@code T} type.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param paramValues  http query param\n+     * @param body         http body param\n+     * @param responseType return type\n+     * @return {@link HttpRestResult}\n+     * @throws Exception ex\n+     */\n+    public <T> HttpRestResult<T> putJson(String url, Header header, Map<String, String> paramValues, String body, Type responseType) throws Exception {\n+        RequestHttpEntity requestHttpEntity = new RequestHttpEntity(\n+            header.setContentType(MediaType.APPLICATION_JSON),\n+            Query.newInstance().initParams(paramValues),\n+            body);\n+\n+        return execute(url, HttpMethod.PUT, requestHttpEntity, responseType);\n+    }\n+\n+    /**\n+     * http put from\n+     * Create a new resource by PUTting the given map {@code bodyValues} to http request,\n+     * http header contentType default 'application/x-www-form-urlencoded;charset=utf-8'.\n+     * <p>URL request params are expanded using the given query {@code Query}.\n+     * <p>{@code responseType} can be an HttpRestResult or HttpRestResult data {@code T} type.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param query  http query param\n+     * @param bodyValues   http body param\n+     * @param responseType return type\n+     * @return {@link HttpRestResult}\n+     * @throws Exception ex\n+     */\n+    public <T> HttpRestResult<T> putFrom(String url, Header header, Query query, Map<String, String> bodyValues, Type responseType) throws Exception {\n+        RequestHttpEntity requestHttpEntity = new RequestHttpEntity(\n+            header.setContentType(MediaType.APPLICATION_FORM_URLENCODED), query, bodyValues);\n+        return execute(url, HttpMethod.PUT, requestHttpEntity, responseType);\n+    }\n+\n+    /**\n+     * http put from\n+     * Create a new resource by PUTting the given map {@code bodyValues} to http request,\n+     * http header contentType default 'application/x-www-form-urlencoded;charset=utf-8'.\n+     * <p>URL request params are expanded using the given map {@code paramValues}.\n+     * <p>{@code responseType} can be an HttpRestResult or HttpRestResult data {@code T} type.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param paramValues  http query param\n+     * @param bodyValues   http body param\n+     * @param responseType return type\n+     * @return {@link HttpRestResult}\n+     * @throws Exception ex\n+     */\n+    public <T> HttpRestResult<T> putFrom(String url, Header header, Map<String, String> paramValues, Map<String, String> bodyValues, Type responseType) throws Exception {\n+        RequestHttpEntity requestHttpEntity = new RequestHttpEntity(\n+            header.setContentType(MediaType.APPLICATION_FORM_URLENCODED),\n+            Query.newInstance().initParams(paramValues),\n+            bodyValues);\n+\n+        return execute(url, HttpMethod.PUT, requestHttpEntity, responseType);\n+    }\n+\n+    /**\n+     * http post\n+     * Create a new resource by POSTing the given object to the http request.\n+     * <p>URL request params are expanded using the given query {@link Query}.\n+     * <p>{@code responseType} can be an HttpRestResult or HttpRestResult data {@code T} type.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param query        http query param\n+     * @param body         http body param\n+     * @param responseType return type\n+     * @return {@link HttpRestResult}\n+     * @throws Exception ex\n+     */\n+    public <T> HttpRestResult<T> post(String url, Header header, Query query, Object body, Type responseType) throws Exception {\n+        return execute(url, HttpMethod.POST, new RequestHttpEntity(header, query, body),\n+            responseType);\n+    }\n+\n+    /**\n+     * http post json\n+     * Create a new resource by POSTing the given object to the http request,\n+     * http header contentType default 'application/json;charset=UTF-8'.\n+     * <p>URL request params are expanded using the given map {@code paramValues}.\n+     * <p>{@code responseType} can be an HttpRestResult or HttpRestResult data {@code T} type.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param paramValues  http query param\n+     * @param body         http body param\n+     * @param responseType return type\n+     * @return {@link HttpRestResult}\n+     * @throws Exception ex\n+     */\n+    public <T> HttpRestResult<T> postJson(String url, Header header, Map<String, String> paramValues, String body, Type responseType) throws Exception {\n+        RequestHttpEntity requestHttpEntity = new RequestHttpEntity(\n+            header.setContentType(MediaType.APPLICATION_JSON),\n+            Query.newInstance().initParams(paramValues),\n+            body);\n+\n+        return execute(url, HttpMethod.POST, requestHttpEntity, responseType);\n+    }\n+\n+    /**\n+     * http post from\n+     * Create a new resource by PUTting the given map {@code bodyValues} to http request,\n+     * http header contentType default 'application/x-www-form-urlencoded;charset=utf-8'.\n+     * <p>URL request params are expanded using the given query {@link Query}.\n+     * <p>{@code responseType} can be an HttpRestResult or HttpRestResult data {@code T} type.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param query  http query param\n+     * @param bodyValues   http body param\n+     * @param responseType return type\n+     * @return {@link HttpRestResult}\n+     * @throws Exception ex\n+     */\n+    public <T> HttpRestResult<T> postFrom(String url, Header header, Query query, Map<String, String> bodyValues, Type responseType) throws Exception {\n+        RequestHttpEntity requestHttpEntity = new RequestHttpEntity(\n+            header.setContentType(MediaType.APPLICATION_FORM_URLENCODED), query, bodyValues);\n+\n+        return execute(url, HttpMethod.POST, requestHttpEntity, responseType);\n+    }\n+\n+    /**\n+     * http post from\n+     * Create a new resource by PUTting the given map {@code bodyValues} to http request,\n+     * http header contentType default 'application/x-www-form-urlencoded;charset=utf-8'.\n+     * <p>URL request params are expanded using the given map {@code paramValues}.\n+     * <p>{@code responseType} can be an HttpRestResult or HttpRestResult data {@code T} type.\n+     *\n+     * @param url          url\n+     * @param header       http header param\n+     * @param paramValues  http query param\n+     * @param bodyValues   http body param\n+     * @param responseType return type\n+     * @return {@link HttpRestResult}\n+     * @throws Exception ex\n+     */\n+    public <T> HttpRestResult<T> postFrom(String url, Header header, Map<String, String> paramValues, Map<String, String> bodyValues, Type responseType) throws Exception {\n+        RequestHttpEntity requestHttpEntity = new RequestHttpEntity(\n+            header.setContentType(MediaType.APPLICATION_FORM_URLENCODED),\n+            Query.newInstance().initParams(paramValues),\n+            bodyValues);\n+\n+        return execute(url, HttpMethod.POST, requestHttpEntity, responseType);\n+    }\n+\n+\n+    private <T> HttpRestResult<T> execute(String url, String httpMethod, RequestHttpEntity requestEntity,\n+                          Type responseType) throws Exception {\n+        URI uri = HttpUtils.buildUri(url, requestEntity.getQuery());\n+        if (logger.isDebugEnabled()) {\n+            logger.debug(\"HTTP \" + httpMethod + \" \" + url);\n+        }\n+        HttpClientResponse response = null;\n+        try {\n+            response = requestClient.execute(uri, httpMethod, requestEntity);\n+            return ResponseHandler.responseEntityExtractor(response, responseType);\n+        } finally {\n+            if (response != null) {\n+                response.close();\n+            }\n+        }\n+    }\n+\n+    /**\n+     * close request client\n+     */\n+    public void close() throws Exception{\n+        requestClient.close();\n+    }\n+\n+\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a83241205ccf9ff651065a1874a18be6918ceddc"}, "originalPosition": 323}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyNzUyMjI4OnYy", "diffSide": "RIGHT", "path": "common/src/main/java/com/alibaba/nacos/common/http/handler/ResponseHandler.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMjoxNTo1N1rOGhigpg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMjoxNTo1N1rOGhigpg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzgyMTYwNg==", "bodyText": "remove extra blank line", "url": "https://github.com/alibaba/nacos/pull/2926#discussion_r437821606", "createdAt": "2020-06-10T02:15:57Z", "author": {"login": "KomachiSion"}, "path": "common/src/main/java/com/alibaba/nacos/common/http/handler/ResponseHandler.java", "diffHunk": "@@ -37,4 +48,42 @@\n         return JacksonUtils.toObj(s, type);\n     }\n \n+    public static <T> T convert(InputStream inputStream, Type type) throws Exception {\n+        return JacksonUtils.toObj(inputStream, type);\n+    }\n+\n+    @SuppressWarnings({\"unchecked\", \"rawtypes\", \"resource\"})\n+    public static <T> HttpRestResult<T> responseEntityExtractor(HttpClientResponse response, Type type) throws Exception {\n+        Header headers = response.getHeaders();\n+        String contentType = headers.getValue(HttpHeaderConsts.CONTENT_TYPE);\n+        InputStream body = response.getBody();\n+        T extractBody = null;\n+        if (MediaType.APPLICATION_JSON.equals(contentType) && HttpStatus.SC_OK == response.getStatusCode()) {\n+            extractBody = convert(body, type);\n+        }\n+        if (extractBody == null) {\n+            if (!String.class.toString().equals(type.toString())) {\n+                logger.error(\"if the response contentType is not [application/json],\" +\n+                    \" only support to java.lang.String\");\n+                throw new NacosDeserializationException(type);\n+            }\n+            extractBody = (T)IoUtils.toString(body, headers.getCharset());\n+        }\n+        if (extractBody instanceof RestResult) {\n+            HttpRestResult<T> httpRestResult = convert((RestResult<T>) extractBody);\n+            httpRestResult.setHeader(headers);\n+            return httpRestResult;\n+        }\n+        return new HttpRestResult<T>(response.getHeaders(), response.getStatusCode(), extractBody);\n+    }\n+\n+    private static <T> HttpRestResult<T> convert(RestResult<T> restResult) {\n+        HttpRestResult<T> httpRestResult = new HttpRestResult<T>();\n+        httpRestResult.setCode(restResult.getCode());\n+        httpRestResult.setData(restResult.getData());\n+        httpRestResult.setMessage(restResult.getMessage());\n+        return httpRestResult;\n+    }\n+\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a83241205ccf9ff651065a1874a18be6918ceddc"}, "originalPosition": 63}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyNzUyMjYwOnYy", "diffSide": "RIGHT", "path": "common/src/main/java/com/alibaba/nacos/common/http/param/Header.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMjoxNjoxMFrOGhig2A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMjoxNjoxMFrOGhig2A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzgyMTY1Ng==", "bodyText": "remove extra blank lines", "url": "https://github.com/alibaba/nacos/pull/2926#discussion_r437821656", "createdAt": "2020-06-10T02:16:10Z", "author": {"login": "KomachiSion"}, "path": "common/src/main/java/com/alibaba/nacos/common/http/param/Header.java", "diffHunk": "@@ -91,9 +103,38 @@ public void addAll(Map<String, String> params) {\n         }\n     }\n \n+    public String getCharset() {\n+        String value = getValue(HttpHeaderConsts.CONTENT_TYPE);\n+        return (StringUtils.isNotBlank(value) ? analysisCharset(value) : Constants.ENCODE);\n+    }\n+\n+    private String analysisCharset(String contentType) {\n+        String[] values = contentType.split(\";\");\n+        String charset = Constants.ENCODE;\n+        if (values.length == 0) {\n+            return charset;\n+        }\n+        for (String value : values) {\n+            if (value.startsWith(\"charset=\")) {\n+                charset = value.substring(\"charset=\".length());\n+            }\n+        }\n+        return charset;\n+    }\n+\n+\n+\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a83241205ccf9ff651065a1874a18be6918ceddc"}, "originalPosition": 77}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyNzUyMjY5OnYy", "diffSide": "RIGHT", "path": "common/src/main/java/com/alibaba/nacos/common/http/param/Header.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMjoxNjoxN1rOGhig7A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMjoxNjoxN1rOGhig7A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzgyMTY3Ng==", "bodyText": "remove extra blank line", "url": "https://github.com/alibaba/nacos/pull/2926#discussion_r437821676", "createdAt": "2020-06-10T02:16:17Z", "author": {"login": "KomachiSion"}, "path": "common/src/main/java/com/alibaba/nacos/common/http/param/Header.java", "diffHunk": "@@ -91,9 +103,38 @@ public void addAll(Map<String, String> params) {\n         }\n     }\n \n+    public String getCharset() {\n+        String value = getValue(HttpHeaderConsts.CONTENT_TYPE);\n+        return (StringUtils.isNotBlank(value) ? analysisCharset(value) : Constants.ENCODE);\n+    }\n+\n+    private String analysisCharset(String contentType) {\n+        String[] values = contentType.split(\";\");\n+        String charset = Constants.ENCODE;\n+        if (values.length == 0) {\n+            return charset;\n+        }\n+        for (String value : values) {\n+            if (value.startsWith(\"charset=\")) {\n+                charset = value.substring(\"charset=\".length());\n+            }\n+        }\n+        return charset;\n+    }\n+\n+\n+\n+\n     public void clear() {\n         header.clear();\n     }\n \n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a83241205ccf9ff651065a1874a18be6918ceddc"}, "originalPosition": 82}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyNzUyMzcwOnYy", "diffSide": "RIGHT", "path": "common/src/main/java/com/alibaba/nacos/common/utils/IoUtils.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMjoxNjo1NFrOGhihhA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMjoxNjo1NFrOGhihhA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzgyMTgyOA==", "bodyText": "remove extra blank line", "url": "https://github.com/alibaba/nacos/pull/2926#discussion_r437821828", "createdAt": "2020-06-10T02:16:54Z", "author": {"login": "KomachiSion"}, "path": "common/src/main/java/com/alibaba/nacos/common/utils/IoUtils.java", "diffHunk": "@@ -167,6 +167,20 @@ public static void cleanDirectory(File directory) throws IOException {\n         }\n     }\n \n+    public static void copy(byte[] in, OutputStream out) throws IOException {\n+\n+        try {\n+            out.write(in);\n+        } finally {\n+            try {\n+                out.close();\n+            } catch (IOException io) {\n+            }\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a83241205ccf9ff651065a1874a18be6918ceddc"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyNzUyMzc1OnYy", "diffSide": "RIGHT", "path": "common/src/main/java/com/alibaba/nacos/common/utils/IoUtils.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMjoxNjo1OFrOGhihjQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMjoxNjo1OFrOGhihjQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzgyMTgzNw==", "bodyText": "remove extra blank line", "url": "https://github.com/alibaba/nacos/pull/2926#discussion_r437821837", "createdAt": "2020-06-10T02:16:58Z", "author": {"login": "KomachiSion"}, "path": "common/src/main/java/com/alibaba/nacos/common/utils/IoUtils.java", "diffHunk": "@@ -167,6 +167,20 @@ public static void cleanDirectory(File directory) throws IOException {\n         }\n     }\n \n+    public static void copy(byte[] in, OutputStream out) throws IOException {\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a83241205ccf9ff651065a1874a18be6918ceddc"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyNzUyMzkzOnYy", "diffSide": "RIGHT", "path": "common/src/main/java/com/alibaba/nacos/common/utils/IoUtils.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMjoxNzowNFrOGhihqw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMjoxNzowNFrOGhihqw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzgyMTg2Nw==", "bodyText": "remove extra blank line", "url": "https://github.com/alibaba/nacos/pull/2926#discussion_r437821867", "createdAt": "2020-06-10T02:17:04Z", "author": {"login": "KomachiSion"}, "path": "common/src/main/java/com/alibaba/nacos/common/utils/IoUtils.java", "diffHunk": "@@ -167,6 +167,20 @@ public static void cleanDirectory(File directory) throws IOException {\n         }\n     }\n \n+    public static void copy(byte[] in, OutputStream out) throws IOException {\n+\n+        try {\n+            out.write(in);\n+        } finally {\n+            try {\n+                out.close();\n+            } catch (IOException io) {\n+            }\n+\n+        }\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a83241205ccf9ff651065a1874a18be6918ceddc"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyNzUyNzYzOnYy", "diffSide": "RIGHT", "path": "common/src/main/java/com/alibaba/nacos/common/utils/JacksonUtils.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMjoxOToxMlrOGhij2Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMjoxOToxMlrOGhij2Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzgyMjQyNQ==", "bodyText": "remove extra blank line", "url": "https://github.com/alibaba/nacos/pull/2926#discussion_r437822425", "createdAt": "2020-06-10T02:19:12Z", "author": {"login": "KomachiSion"}, "path": "common/src/main/java/com/alibaba/nacos/common/utils/JacksonUtils.java", "diffHunk": "@@ -71,22 +72,26 @@ public static String toJson(Object obj) {\n \t}\n \n \tpublic static <T> T toObj(byte[] json, Type cls) {\n-\t\ttry {\n-\t\t\treturn toObj(StringUtils.newString4UTF8(json), cls);\n-\t\t}\n-\t\tcatch (Exception e) {\n-\t\t\tthrow new NacosDeserializationException(e);\n-\t\t}\n-\t}\n+        try {\n+            return toObj(StringUtils.newString4UTF8(json), cls);\n+        } catch (Exception e) {\n+            throw new NacosDeserializationException(e);\n+        }\n+  }\n \n-\tpublic static <T> T toObj(byte[] json, TypeReference<T> typeReference) {\n-\t\ttry {\n-\t\t\treturn toObj(StringUtils.newString4UTF8(json), typeReference);\n-\t\t}\n-\t\tcatch (Exception e) {\n-\t\t\tthrow new NacosDeserializationException(e);\n-\t\t}\n-\t}\n+\n+\tpublic static <T> T toObj(InputStream inputStream, Class<T> tClass) throws Exception {\n+\t    return mapper.readValue(inputStream, tClass);\n+    }\n+\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a83241205ccf9ff651065a1874a18be6918ceddc"}, "originalPosition": 39}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyNzUyNzc3OnYy", "diffSide": "RIGHT", "path": "common/src/test/java/com/alibaba/nacos/common/http/HttpUtilsTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMjoxOToyMFrOGhij_Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMjoxOToyMFrOGhij_Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzgyMjQ2MQ==", "bodyText": "remove extra blank line", "url": "https://github.com/alibaba/nacos/pull/2926#discussion_r437822461", "createdAt": "2020-06-10T02:19:20Z", "author": {"login": "KomachiSion"}, "path": "common/src/test/java/com/alibaba/nacos/common/http/HttpUtilsTest.java", "diffHunk": "@@ -1,12 +1,29 @@\n+/*\n+ * Copyright 1999-2018 Alibaba Group Holding Ltd.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n package com.alibaba.nacos.common.http;\n \n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a83241205ccf9ff651065a1874a18be6918ceddc"}, "originalPosition": 18}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyNzUyODA5OnYy", "diffSide": "RIGHT", "path": "test/src/test/java/com/alibaba/nacos/test/common/NacosAsyncRestTemplate_ITCase.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMjoxOTozNlrOGhikLg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMjoxOTozNlrOGhikLg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzgyMjUxMA==", "bodyText": "remove extra blank line", "url": "https://github.com/alibaba/nacos/pull/2926#discussion_r437822510", "createdAt": "2020-06-10T02:19:36Z", "author": {"login": "KomachiSion"}, "path": "test/src/test/java/com/alibaba/nacos/test/common/NacosAsyncRestTemplate_ITCase.java", "diffHunk": "@@ -0,0 +1,174 @@\n+/*\n+ * Copyright 1999-2018 Alibaba Group Holding Ltd.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.alibaba.nacos.test.common;\n+\n+import com.alibaba.nacos.Nacos;\n+import com.alibaba.nacos.api.exception.NacosException;\n+import com.alibaba.nacos.common.http.Callback;\n+import com.alibaba.nacos.common.http.HttpClientManager;\n+import com.alibaba.nacos.common.http.HttpRestResult;\n+import com.alibaba.nacos.common.http.client.NacosAsyncRestTemplate;\n+import com.alibaba.nacos.common.http.param.Header;\n+import com.alibaba.nacos.common.http.param.Query;\n+import com.alibaba.nacos.common.model.RestResult;\n+import org.junit.Assert;\n+import org.junit.Before;\n+import org.junit.FixMethodOrder;\n+import org.junit.Test;\n+import org.junit.runner.RunWith;\n+import org.junit.runners.MethodSorters;\n+import org.springframework.boot.test.context.SpringBootTest;\n+import org.springframework.boot.web.server.LocalServerPort;\n+import org.springframework.test.context.junit4.SpringRunner;\n+\n+import java.util.HashMap;\n+import java.util.Map;\n+\n+/**\n+ * NacosAsyncRestTemplate_ITCase\n+ *\n+ * @author mai.jh\n+ * @date 2020/5/29\n+ */\n+@SuppressWarnings(\"all\")\n+@FixMethodOrder(MethodSorters.JVM)\n+@RunWith(SpringRunner.class)\n+@SpringBootTest(classes = Nacos.class, properties = {\"server.servlet.context-path=/nacos\"},\n+    webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\n+public class NacosAsyncRestTemplate_ITCase {\n+\n+    @LocalServerPort\n+    private int port;\n+\n+    private NacosAsyncRestTemplate nacosRestTemplate = HttpClientManager.getNacosAsyncRestTemplate();\n+\n+    private final String CONFIG_INSTANCE_PATH = \"/nacos/v1/ns\";\n+    private String IP = null;\n+\n+    @Before\n+    public void init() throws NacosException {\n+        IP = String.format(\"http://localhost:%d\", port);\n+    }\n+\n+    private class CallbackMap<T> implements Callback<T> {\n+\n+        private HttpRestResult<T> restResult;\n+        private Throwable throwable;\n+\n+        @Override\n+        public void onReceive(RestResult<T> result) {\n+            restResult = (HttpRestResult<T>) result;\n+        }\n+\n+        @Override\n+        public void onError(Throwable throwable) {\n+            throwable = throwable;\n+        }\n+\n+        public HttpRestResult<T> getRestResult() {\n+            return restResult;\n+        }\n+\n+        public Throwable getThrowable() {\n+            return throwable;\n+        }\n+    }\n+\n+    @Test\n+    public void test_url_post_from() throws Exception{\n+        String url = IP + CONFIG_INSTANCE_PATH + \"/instance\";\n+        Map<String, String> param = new HashMap<>();\n+        param.put(\"serviceName\", \"app-test\");\n+        param.put(\"port\", \"8080\");\n+        param.put(\"ip\", \"11.11.11.11\");\n+        CallbackMap<String> callbackMap = new CallbackMap<>();\n+        nacosRestTemplate.postFrom(url, Header.newInstance(), Query.newInstance(), param, String.class, callbackMap);\n+        Thread.sleep(2000);\n+        HttpRestResult<String> restResult = callbackMap.getRestResult();\n+        System.out.println(restResult.getData());\n+        System.out.println(restResult.getHeader());\n+        Assert.assertTrue(restResult.ok());\n+    }\n+\n+    @Test\n+    public void test_url_put_from() throws Exception{\n+        String url = IP + CONFIG_INSTANCE_PATH + \"/instance\";\n+        Map<String, String> param = new HashMap<>();\n+        param.put(\"serviceName\", \"app-test-change\");\n+        param.put(\"port\", \"8080\");\n+        param.put(\"ip\", \"11.11.11.11\");\n+        CallbackMap<String> callbackMap = new CallbackMap<>();\n+        nacosRestTemplate.putFrom(url, Header.newInstance(), Query.newInstance(), param, String.class, callbackMap);\n+        Thread.sleep(2000);\n+        HttpRestResult<String> restResult = callbackMap.getRestResult();\n+        System.out.println(restResult.getData());\n+        System.out.println(restResult.getHeader());\n+        Assert.assertTrue(restResult.ok());\n+    }\n+\n+\n+    @Test\n+    public void test_url_get() throws Exception {\n+        String url = IP + CONFIG_INSTANCE_PATH + \"/instance/list\";\n+        Query query = Query.newInstance().addParam(\"serviceName\", \"app-test\");\n+        CallbackMap<Map> callbackMap = new CallbackMap<>();\n+        nacosRestTemplate.get(url, Header.newInstance(), query, Map.class, callbackMap);\n+        Thread.sleep(2000);\n+        HttpRestResult<Map> restResult = callbackMap.getRestResult();\n+        System.out.println(restResult.getData());\n+        System.out.println(restResult.getHeader());\n+        Assert.assertTrue(restResult.ok());\n+        Assert.assertEquals(restResult.getData().get(\"dom\"), \"app-test\");\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a83241205ccf9ff651065a1874a18be6918ceddc"}, "originalPosition": 135}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyNzUyODE3OnYy", "diffSide": "RIGHT", "path": "test/src/test/java/com/alibaba/nacos/test/common/NacosAsyncRestTemplate_ITCase.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMjoxOTo0MVrOGhikPQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMjoxOTo0MVrOGhikPQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzgyMjUyNQ==", "bodyText": "remove extra blank line", "url": "https://github.com/alibaba/nacos/pull/2926#discussion_r437822525", "createdAt": "2020-06-10T02:19:41Z", "author": {"login": "KomachiSion"}, "path": "test/src/test/java/com/alibaba/nacos/test/common/NacosAsyncRestTemplate_ITCase.java", "diffHunk": "@@ -0,0 +1,174 @@\n+/*\n+ * Copyright 1999-2018 Alibaba Group Holding Ltd.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.alibaba.nacos.test.common;\n+\n+import com.alibaba.nacos.Nacos;\n+import com.alibaba.nacos.api.exception.NacosException;\n+import com.alibaba.nacos.common.http.Callback;\n+import com.alibaba.nacos.common.http.HttpClientManager;\n+import com.alibaba.nacos.common.http.HttpRestResult;\n+import com.alibaba.nacos.common.http.client.NacosAsyncRestTemplate;\n+import com.alibaba.nacos.common.http.param.Header;\n+import com.alibaba.nacos.common.http.param.Query;\n+import com.alibaba.nacos.common.model.RestResult;\n+import org.junit.Assert;\n+import org.junit.Before;\n+import org.junit.FixMethodOrder;\n+import org.junit.Test;\n+import org.junit.runner.RunWith;\n+import org.junit.runners.MethodSorters;\n+import org.springframework.boot.test.context.SpringBootTest;\n+import org.springframework.boot.web.server.LocalServerPort;\n+import org.springframework.test.context.junit4.SpringRunner;\n+\n+import java.util.HashMap;\n+import java.util.Map;\n+\n+/**\n+ * NacosAsyncRestTemplate_ITCase\n+ *\n+ * @author mai.jh\n+ * @date 2020/5/29\n+ */\n+@SuppressWarnings(\"all\")\n+@FixMethodOrder(MethodSorters.JVM)\n+@RunWith(SpringRunner.class)\n+@SpringBootTest(classes = Nacos.class, properties = {\"server.servlet.context-path=/nacos\"},\n+    webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\n+public class NacosAsyncRestTemplate_ITCase {\n+\n+    @LocalServerPort\n+    private int port;\n+\n+    private NacosAsyncRestTemplate nacosRestTemplate = HttpClientManager.getNacosAsyncRestTemplate();\n+\n+    private final String CONFIG_INSTANCE_PATH = \"/nacos/v1/ns\";\n+    private String IP = null;\n+\n+    @Before\n+    public void init() throws NacosException {\n+        IP = String.format(\"http://localhost:%d\", port);\n+    }\n+\n+    private class CallbackMap<T> implements Callback<T> {\n+\n+        private HttpRestResult<T> restResult;\n+        private Throwable throwable;\n+\n+        @Override\n+        public void onReceive(RestResult<T> result) {\n+            restResult = (HttpRestResult<T>) result;\n+        }\n+\n+        @Override\n+        public void onError(Throwable throwable) {\n+            throwable = throwable;\n+        }\n+\n+        public HttpRestResult<T> getRestResult() {\n+            return restResult;\n+        }\n+\n+        public Throwable getThrowable() {\n+            return throwable;\n+        }\n+    }\n+\n+    @Test\n+    public void test_url_post_from() throws Exception{\n+        String url = IP + CONFIG_INSTANCE_PATH + \"/instance\";\n+        Map<String, String> param = new HashMap<>();\n+        param.put(\"serviceName\", \"app-test\");\n+        param.put(\"port\", \"8080\");\n+        param.put(\"ip\", \"11.11.11.11\");\n+        CallbackMap<String> callbackMap = new CallbackMap<>();\n+        nacosRestTemplate.postFrom(url, Header.newInstance(), Query.newInstance(), param, String.class, callbackMap);\n+        Thread.sleep(2000);\n+        HttpRestResult<String> restResult = callbackMap.getRestResult();\n+        System.out.println(restResult.getData());\n+        System.out.println(restResult.getHeader());\n+        Assert.assertTrue(restResult.ok());\n+    }\n+\n+    @Test\n+    public void test_url_put_from() throws Exception{\n+        String url = IP + CONFIG_INSTANCE_PATH + \"/instance\";\n+        Map<String, String> param = new HashMap<>();\n+        param.put(\"serviceName\", \"app-test-change\");\n+        param.put(\"port\", \"8080\");\n+        param.put(\"ip\", \"11.11.11.11\");\n+        CallbackMap<String> callbackMap = new CallbackMap<>();\n+        nacosRestTemplate.putFrom(url, Header.newInstance(), Query.newInstance(), param, String.class, callbackMap);\n+        Thread.sleep(2000);\n+        HttpRestResult<String> restResult = callbackMap.getRestResult();\n+        System.out.println(restResult.getData());\n+        System.out.println(restResult.getHeader());\n+        Assert.assertTrue(restResult.ok());\n+    }\n+\n+\n+    @Test\n+    public void test_url_get() throws Exception {\n+        String url = IP + CONFIG_INSTANCE_PATH + \"/instance/list\";\n+        Query query = Query.newInstance().addParam(\"serviceName\", \"app-test\");\n+        CallbackMap<Map> callbackMap = new CallbackMap<>();\n+        nacosRestTemplate.get(url, Header.newInstance(), query, Map.class, callbackMap);\n+        Thread.sleep(2000);\n+        HttpRestResult<Map> restResult = callbackMap.getRestResult();\n+        System.out.println(restResult.getData());\n+        System.out.println(restResult.getHeader());\n+        Assert.assertTrue(restResult.ok());\n+        Assert.assertEquals(restResult.getData().get(\"dom\"), \"app-test\");\n+\n+    }\n+\n+    @Test\n+    public void test_url_by_map() throws Exception{\n+        String url = IP + CONFIG_INSTANCE_PATH + \"/instance/list\";\n+        Map<String, String> param = new HashMap<>();\n+        param.put(\"serviceName\", \"app-test\");\n+        CallbackMap<Map> callbackMap = new CallbackMap<>();\n+        nacosRestTemplate.get(url, Header.newInstance(), param, Map.class, callbackMap);\n+        Thread.sleep(2000);\n+        HttpRestResult<Map> restResult = callbackMap.getRestResult();\n+        System.out.println(restResult.getData());\n+        System.out.println(restResult.getHeader());\n+        Assert.assertTrue(restResult.ok());\n+        Assert.assertEquals(restResult.getData().get(\"dom\"), \"app-test\");\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a83241205ccf9ff651065a1874a18be6918ceddc"}, "originalPosition": 151}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyNzUyODI1OnYy", "diffSide": "RIGHT", "path": "test/src/test/java/com/alibaba/nacos/test/common/NacosAsyncRestTemplate_ITCase.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMjoxOTo0NVrOGhikTA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMjoxOTo0NVrOGhikTA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzgyMjU0MA==", "bodyText": "remove extra blank line", "url": "https://github.com/alibaba/nacos/pull/2926#discussion_r437822540", "createdAt": "2020-06-10T02:19:45Z", "author": {"login": "KomachiSion"}, "path": "test/src/test/java/com/alibaba/nacos/test/common/NacosAsyncRestTemplate_ITCase.java", "diffHunk": "@@ -0,0 +1,174 @@\n+/*\n+ * Copyright 1999-2018 Alibaba Group Holding Ltd.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.alibaba.nacos.test.common;\n+\n+import com.alibaba.nacos.Nacos;\n+import com.alibaba.nacos.api.exception.NacosException;\n+import com.alibaba.nacos.common.http.Callback;\n+import com.alibaba.nacos.common.http.HttpClientManager;\n+import com.alibaba.nacos.common.http.HttpRestResult;\n+import com.alibaba.nacos.common.http.client.NacosAsyncRestTemplate;\n+import com.alibaba.nacos.common.http.param.Header;\n+import com.alibaba.nacos.common.http.param.Query;\n+import com.alibaba.nacos.common.model.RestResult;\n+import org.junit.Assert;\n+import org.junit.Before;\n+import org.junit.FixMethodOrder;\n+import org.junit.Test;\n+import org.junit.runner.RunWith;\n+import org.junit.runners.MethodSorters;\n+import org.springframework.boot.test.context.SpringBootTest;\n+import org.springframework.boot.web.server.LocalServerPort;\n+import org.springframework.test.context.junit4.SpringRunner;\n+\n+import java.util.HashMap;\n+import java.util.Map;\n+\n+/**\n+ * NacosAsyncRestTemplate_ITCase\n+ *\n+ * @author mai.jh\n+ * @date 2020/5/29\n+ */\n+@SuppressWarnings(\"all\")\n+@FixMethodOrder(MethodSorters.JVM)\n+@RunWith(SpringRunner.class)\n+@SpringBootTest(classes = Nacos.class, properties = {\"server.servlet.context-path=/nacos\"},\n+    webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\n+public class NacosAsyncRestTemplate_ITCase {\n+\n+    @LocalServerPort\n+    private int port;\n+\n+    private NacosAsyncRestTemplate nacosRestTemplate = HttpClientManager.getNacosAsyncRestTemplate();\n+\n+    private final String CONFIG_INSTANCE_PATH = \"/nacos/v1/ns\";\n+    private String IP = null;\n+\n+    @Before\n+    public void init() throws NacosException {\n+        IP = String.format(\"http://localhost:%d\", port);\n+    }\n+\n+    private class CallbackMap<T> implements Callback<T> {\n+\n+        private HttpRestResult<T> restResult;\n+        private Throwable throwable;\n+\n+        @Override\n+        public void onReceive(RestResult<T> result) {\n+            restResult = (HttpRestResult<T>) result;\n+        }\n+\n+        @Override\n+        public void onError(Throwable throwable) {\n+            throwable = throwable;\n+        }\n+\n+        public HttpRestResult<T> getRestResult() {\n+            return restResult;\n+        }\n+\n+        public Throwable getThrowable() {\n+            return throwable;\n+        }\n+    }\n+\n+    @Test\n+    public void test_url_post_from() throws Exception{\n+        String url = IP + CONFIG_INSTANCE_PATH + \"/instance\";\n+        Map<String, String> param = new HashMap<>();\n+        param.put(\"serviceName\", \"app-test\");\n+        param.put(\"port\", \"8080\");\n+        param.put(\"ip\", \"11.11.11.11\");\n+        CallbackMap<String> callbackMap = new CallbackMap<>();\n+        nacosRestTemplate.postFrom(url, Header.newInstance(), Query.newInstance(), param, String.class, callbackMap);\n+        Thread.sleep(2000);\n+        HttpRestResult<String> restResult = callbackMap.getRestResult();\n+        System.out.println(restResult.getData());\n+        System.out.println(restResult.getHeader());\n+        Assert.assertTrue(restResult.ok());\n+    }\n+\n+    @Test\n+    public void test_url_put_from() throws Exception{\n+        String url = IP + CONFIG_INSTANCE_PATH + \"/instance\";\n+        Map<String, String> param = new HashMap<>();\n+        param.put(\"serviceName\", \"app-test-change\");\n+        param.put(\"port\", \"8080\");\n+        param.put(\"ip\", \"11.11.11.11\");\n+        CallbackMap<String> callbackMap = new CallbackMap<>();\n+        nacosRestTemplate.putFrom(url, Header.newInstance(), Query.newInstance(), param, String.class, callbackMap);\n+        Thread.sleep(2000);\n+        HttpRestResult<String> restResult = callbackMap.getRestResult();\n+        System.out.println(restResult.getData());\n+        System.out.println(restResult.getHeader());\n+        Assert.assertTrue(restResult.ok());\n+    }\n+\n+\n+    @Test\n+    public void test_url_get() throws Exception {\n+        String url = IP + CONFIG_INSTANCE_PATH + \"/instance/list\";\n+        Query query = Query.newInstance().addParam(\"serviceName\", \"app-test\");\n+        CallbackMap<Map> callbackMap = new CallbackMap<>();\n+        nacosRestTemplate.get(url, Header.newInstance(), query, Map.class, callbackMap);\n+        Thread.sleep(2000);\n+        HttpRestResult<Map> restResult = callbackMap.getRestResult();\n+        System.out.println(restResult.getData());\n+        System.out.println(restResult.getHeader());\n+        Assert.assertTrue(restResult.ok());\n+        Assert.assertEquals(restResult.getData().get(\"dom\"), \"app-test\");\n+\n+    }\n+\n+    @Test\n+    public void test_url_by_map() throws Exception{\n+        String url = IP + CONFIG_INSTANCE_PATH + \"/instance/list\";\n+        Map<String, String> param = new HashMap<>();\n+        param.put(\"serviceName\", \"app-test\");\n+        CallbackMap<Map> callbackMap = new CallbackMap<>();\n+        nacosRestTemplate.get(url, Header.newInstance(), param, Map.class, callbackMap);\n+        Thread.sleep(2000);\n+        HttpRestResult<Map> restResult = callbackMap.getRestResult();\n+        System.out.println(restResult.getData());\n+        System.out.println(restResult.getHeader());\n+        Assert.assertTrue(restResult.ok());\n+        Assert.assertEquals(restResult.getData().get(\"dom\"), \"app-test\");\n+\n+    }\n+\n+    @Test\n+    public void test_url_delete() throws Exception{\n+        String url = IP + CONFIG_INSTANCE_PATH + \"/instance\";\n+        Query query = Query.newInstance()\n+            .addParam(\"ip\", \"11.11.11.11\")\n+            .addParam(\"port\", \"8080\")\n+            .addParam(\"serviceName\", \"app-test\");\n+        CallbackMap<String> callbackMap = new CallbackMap<>();\n+        nacosRestTemplate.delete(url, Header.newInstance(), query,  String.class, callbackMap);\n+        Thread.sleep(2000);\n+        HttpRestResult<String> restResult = callbackMap.getRestResult();\n+        System.out.println(restResult.getData());\n+        System.out.println(restResult.getHeader());\n+        Assert.assertTrue(restResult.ok());\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a83241205ccf9ff651065a1874a18be6918ceddc"}, "originalPosition": 168}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyNzUyODQyOnYy", "diffSide": "RIGHT", "path": "test/src/test/java/com/alibaba/nacos/test/common/NacosAsyncRestTemplate_ITCase.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMjoxOTo1MFrOGhikZg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMjoxOTo1MFrOGhikZg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzgyMjU2Ng==", "bodyText": "remove extra blank lines.", "url": "https://github.com/alibaba/nacos/pull/2926#discussion_r437822566", "createdAt": "2020-06-10T02:19:50Z", "author": {"login": "KomachiSion"}, "path": "test/src/test/java/com/alibaba/nacos/test/common/NacosAsyncRestTemplate_ITCase.java", "diffHunk": "@@ -0,0 +1,174 @@\n+/*\n+ * Copyright 1999-2018 Alibaba Group Holding Ltd.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.alibaba.nacos.test.common;\n+\n+import com.alibaba.nacos.Nacos;\n+import com.alibaba.nacos.api.exception.NacosException;\n+import com.alibaba.nacos.common.http.Callback;\n+import com.alibaba.nacos.common.http.HttpClientManager;\n+import com.alibaba.nacos.common.http.HttpRestResult;\n+import com.alibaba.nacos.common.http.client.NacosAsyncRestTemplate;\n+import com.alibaba.nacos.common.http.param.Header;\n+import com.alibaba.nacos.common.http.param.Query;\n+import com.alibaba.nacos.common.model.RestResult;\n+import org.junit.Assert;\n+import org.junit.Before;\n+import org.junit.FixMethodOrder;\n+import org.junit.Test;\n+import org.junit.runner.RunWith;\n+import org.junit.runners.MethodSorters;\n+import org.springframework.boot.test.context.SpringBootTest;\n+import org.springframework.boot.web.server.LocalServerPort;\n+import org.springframework.test.context.junit4.SpringRunner;\n+\n+import java.util.HashMap;\n+import java.util.Map;\n+\n+/**\n+ * NacosAsyncRestTemplate_ITCase\n+ *\n+ * @author mai.jh\n+ * @date 2020/5/29\n+ */\n+@SuppressWarnings(\"all\")\n+@FixMethodOrder(MethodSorters.JVM)\n+@RunWith(SpringRunner.class)\n+@SpringBootTest(classes = Nacos.class, properties = {\"server.servlet.context-path=/nacos\"},\n+    webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\n+public class NacosAsyncRestTemplate_ITCase {\n+\n+    @LocalServerPort\n+    private int port;\n+\n+    private NacosAsyncRestTemplate nacosRestTemplate = HttpClientManager.getNacosAsyncRestTemplate();\n+\n+    private final String CONFIG_INSTANCE_PATH = \"/nacos/v1/ns\";\n+    private String IP = null;\n+\n+    @Before\n+    public void init() throws NacosException {\n+        IP = String.format(\"http://localhost:%d\", port);\n+    }\n+\n+    private class CallbackMap<T> implements Callback<T> {\n+\n+        private HttpRestResult<T> restResult;\n+        private Throwable throwable;\n+\n+        @Override\n+        public void onReceive(RestResult<T> result) {\n+            restResult = (HttpRestResult<T>) result;\n+        }\n+\n+        @Override\n+        public void onError(Throwable throwable) {\n+            throwable = throwable;\n+        }\n+\n+        public HttpRestResult<T> getRestResult() {\n+            return restResult;\n+        }\n+\n+        public Throwable getThrowable() {\n+            return throwable;\n+        }\n+    }\n+\n+    @Test\n+    public void test_url_post_from() throws Exception{\n+        String url = IP + CONFIG_INSTANCE_PATH + \"/instance\";\n+        Map<String, String> param = new HashMap<>();\n+        param.put(\"serviceName\", \"app-test\");\n+        param.put(\"port\", \"8080\");\n+        param.put(\"ip\", \"11.11.11.11\");\n+        CallbackMap<String> callbackMap = new CallbackMap<>();\n+        nacosRestTemplate.postFrom(url, Header.newInstance(), Query.newInstance(), param, String.class, callbackMap);\n+        Thread.sleep(2000);\n+        HttpRestResult<String> restResult = callbackMap.getRestResult();\n+        System.out.println(restResult.getData());\n+        System.out.println(restResult.getHeader());\n+        Assert.assertTrue(restResult.ok());\n+    }\n+\n+    @Test\n+    public void test_url_put_from() throws Exception{\n+        String url = IP + CONFIG_INSTANCE_PATH + \"/instance\";\n+        Map<String, String> param = new HashMap<>();\n+        param.put(\"serviceName\", \"app-test-change\");\n+        param.put(\"port\", \"8080\");\n+        param.put(\"ip\", \"11.11.11.11\");\n+        CallbackMap<String> callbackMap = new CallbackMap<>();\n+        nacosRestTemplate.putFrom(url, Header.newInstance(), Query.newInstance(), param, String.class, callbackMap);\n+        Thread.sleep(2000);\n+        HttpRestResult<String> restResult = callbackMap.getRestResult();\n+        System.out.println(restResult.getData());\n+        System.out.println(restResult.getHeader());\n+        Assert.assertTrue(restResult.ok());\n+    }\n+\n+\n+    @Test\n+    public void test_url_get() throws Exception {\n+        String url = IP + CONFIG_INSTANCE_PATH + \"/instance/list\";\n+        Query query = Query.newInstance().addParam(\"serviceName\", \"app-test\");\n+        CallbackMap<Map> callbackMap = new CallbackMap<>();\n+        nacosRestTemplate.get(url, Header.newInstance(), query, Map.class, callbackMap);\n+        Thread.sleep(2000);\n+        HttpRestResult<Map> restResult = callbackMap.getRestResult();\n+        System.out.println(restResult.getData());\n+        System.out.println(restResult.getHeader());\n+        Assert.assertTrue(restResult.ok());\n+        Assert.assertEquals(restResult.getData().get(\"dom\"), \"app-test\");\n+\n+    }\n+\n+    @Test\n+    public void test_url_by_map() throws Exception{\n+        String url = IP + CONFIG_INSTANCE_PATH + \"/instance/list\";\n+        Map<String, String> param = new HashMap<>();\n+        param.put(\"serviceName\", \"app-test\");\n+        CallbackMap<Map> callbackMap = new CallbackMap<>();\n+        nacosRestTemplate.get(url, Header.newInstance(), param, Map.class, callbackMap);\n+        Thread.sleep(2000);\n+        HttpRestResult<Map> restResult = callbackMap.getRestResult();\n+        System.out.println(restResult.getData());\n+        System.out.println(restResult.getHeader());\n+        Assert.assertTrue(restResult.ok());\n+        Assert.assertEquals(restResult.getData().get(\"dom\"), \"app-test\");\n+\n+    }\n+\n+    @Test\n+    public void test_url_delete() throws Exception{\n+        String url = IP + CONFIG_INSTANCE_PATH + \"/instance\";\n+        Query query = Query.newInstance()\n+            .addParam(\"ip\", \"11.11.11.11\")\n+            .addParam(\"port\", \"8080\")\n+            .addParam(\"serviceName\", \"app-test\");\n+        CallbackMap<String> callbackMap = new CallbackMap<>();\n+        nacosRestTemplate.delete(url, Header.newInstance(), query,  String.class, callbackMap);\n+        Thread.sleep(2000);\n+        HttpRestResult<String> restResult = callbackMap.getRestResult();\n+        System.out.println(restResult.getData());\n+        System.out.println(restResult.getHeader());\n+        Assert.assertTrue(restResult.ok());\n+\n+    }\n+\n+\n+\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a83241205ccf9ff651065a1874a18be6918ceddc"}, "originalPosition": 173}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyNzUyODU5OnYy", "diffSide": "RIGHT", "path": "test/src/test/java/com/alibaba/nacos/test/common/NacosRestTemplate_ITCase.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMjoxOTo1NlrOGhikfQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMjoxOTo1NlrOGhikfQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzgyMjU4OQ==", "bodyText": "remove extra blank line", "url": "https://github.com/alibaba/nacos/pull/2926#discussion_r437822589", "createdAt": "2020-06-10T02:19:56Z", "author": {"login": "KomachiSion"}, "path": "test/src/test/java/com/alibaba/nacos/test/common/NacosRestTemplate_ITCase.java", "diffHunk": "@@ -0,0 +1,142 @@\n+/*\n+ * Copyright 1999-2018 Alibaba Group Holding Ltd.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.alibaba.nacos.test.common;\n+\n+import com.alibaba.nacos.Nacos;\n+import com.alibaba.nacos.api.exception.NacosException;\n+import com.alibaba.nacos.common.http.HttpClientManager;\n+import com.alibaba.nacos.common.http.HttpRestResult;\n+import com.alibaba.nacos.common.http.client.NacosRestTemplate;\n+import com.alibaba.nacos.common.http.param.Header;\n+import com.alibaba.nacos.common.http.param.Query;\n+import com.alibaba.nacos.common.model.RestResult;\n+import org.junit.Assert;\n+import org.junit.Before;\n+import org.junit.FixMethodOrder;\n+import org.junit.Test;\n+import org.junit.runner.RunWith;\n+import org.junit.runners.MethodSorters;\n+import org.springframework.boot.test.context.SpringBootTest;\n+import org.springframework.boot.web.server.LocalServerPort;\n+import org.springframework.test.context.junit4.SpringRunner;\n+\n+import java.util.HashMap;\n+import java.util.Map;\n+\n+/**\n+ *  NacosRestTemplate_ITCase\n+ *\n+ * @author mai.jh\n+ * @date 2020/5/30\n+ */\n+@RunWith(SpringRunner.class)\n+@SpringBootTest(classes = Nacos.class, properties = {\"server.servlet.context-path=/nacos\"},\n+    webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\n+@FixMethodOrder(MethodSorters.JVM)\n+public class NacosRestTemplate_ITCase {\n+\n+    @LocalServerPort\n+    private int port;\n+\n+    private NacosRestTemplate nacosRestTemplate = HttpClientManager.getNacosRestTemplate();\n+\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a83241205ccf9ff651065a1874a18be6918ceddc"}, "originalPosition": 56}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyNzUyODY3OnYy", "diffSide": "RIGHT", "path": "test/src/test/java/com/alibaba/nacos/test/common/NacosRestTemplate_ITCase.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMjoxOTo1OVrOGhikiA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMjoxOTo1OVrOGhikiA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzgyMjYwMA==", "bodyText": "remove extra blank line", "url": "https://github.com/alibaba/nacos/pull/2926#discussion_r437822600", "createdAt": "2020-06-10T02:19:59Z", "author": {"login": "KomachiSion"}, "path": "test/src/test/java/com/alibaba/nacos/test/common/NacosRestTemplate_ITCase.java", "diffHunk": "@@ -0,0 +1,142 @@\n+/*\n+ * Copyright 1999-2018 Alibaba Group Holding Ltd.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.alibaba.nacos.test.common;\n+\n+import com.alibaba.nacos.Nacos;\n+import com.alibaba.nacos.api.exception.NacosException;\n+import com.alibaba.nacos.common.http.HttpClientManager;\n+import com.alibaba.nacos.common.http.HttpRestResult;\n+import com.alibaba.nacos.common.http.client.NacosRestTemplate;\n+import com.alibaba.nacos.common.http.param.Header;\n+import com.alibaba.nacos.common.http.param.Query;\n+import com.alibaba.nacos.common.model.RestResult;\n+import org.junit.Assert;\n+import org.junit.Before;\n+import org.junit.FixMethodOrder;\n+import org.junit.Test;\n+import org.junit.runner.RunWith;\n+import org.junit.runners.MethodSorters;\n+import org.springframework.boot.test.context.SpringBootTest;\n+import org.springframework.boot.web.server.LocalServerPort;\n+import org.springframework.test.context.junit4.SpringRunner;\n+\n+import java.util.HashMap;\n+import java.util.Map;\n+\n+/**\n+ *  NacosRestTemplate_ITCase\n+ *\n+ * @author mai.jh\n+ * @date 2020/5/30\n+ */\n+@RunWith(SpringRunner.class)\n+@SpringBootTest(classes = Nacos.class, properties = {\"server.servlet.context-path=/nacos\"},\n+    webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\n+@FixMethodOrder(MethodSorters.JVM)\n+public class NacosRestTemplate_ITCase {\n+\n+    @LocalServerPort\n+    private int port;\n+\n+    private NacosRestTemplate nacosRestTemplate = HttpClientManager.getNacosRestTemplate();\n+\n+\n+    private final String INSTANCE_PATH = \"/nacos/v1/ns\";\n+    private final String CONFIG_PATH = \"/nacos/v1/cs\";\n+    private String IP = null;\n+\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a83241205ccf9ff651065a1874a18be6918ceddc"}, "originalPosition": 61}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyNzUyODgyOnYy", "diffSide": "RIGHT", "path": "test/src/test/java/com/alibaba/nacos/test/common/NacosRestTemplate_ITCase.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMjoyMDowNlrOGhikow==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMjoyMDowNlrOGhikow==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzgyMjYyNw==", "bodyText": "remove extra blank lines.", "url": "https://github.com/alibaba/nacos/pull/2926#discussion_r437822627", "createdAt": "2020-06-10T02:20:06Z", "author": {"login": "KomachiSion"}, "path": "test/src/test/java/com/alibaba/nacos/test/common/NacosRestTemplate_ITCase.java", "diffHunk": "@@ -0,0 +1,142 @@\n+/*\n+ * Copyright 1999-2018 Alibaba Group Holding Ltd.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.alibaba.nacos.test.common;\n+\n+import com.alibaba.nacos.Nacos;\n+import com.alibaba.nacos.api.exception.NacosException;\n+import com.alibaba.nacos.common.http.HttpClientManager;\n+import com.alibaba.nacos.common.http.HttpRestResult;\n+import com.alibaba.nacos.common.http.client.NacosRestTemplate;\n+import com.alibaba.nacos.common.http.param.Header;\n+import com.alibaba.nacos.common.http.param.Query;\n+import com.alibaba.nacos.common.model.RestResult;\n+import org.junit.Assert;\n+import org.junit.Before;\n+import org.junit.FixMethodOrder;\n+import org.junit.Test;\n+import org.junit.runner.RunWith;\n+import org.junit.runners.MethodSorters;\n+import org.springframework.boot.test.context.SpringBootTest;\n+import org.springframework.boot.web.server.LocalServerPort;\n+import org.springframework.test.context.junit4.SpringRunner;\n+\n+import java.util.HashMap;\n+import java.util.Map;\n+\n+/**\n+ *  NacosRestTemplate_ITCase\n+ *\n+ * @author mai.jh\n+ * @date 2020/5/30\n+ */\n+@RunWith(SpringRunner.class)\n+@SpringBootTest(classes = Nacos.class, properties = {\"server.servlet.context-path=/nacos\"},\n+    webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\n+@FixMethodOrder(MethodSorters.JVM)\n+public class NacosRestTemplate_ITCase {\n+\n+    @LocalServerPort\n+    private int port;\n+\n+    private NacosRestTemplate nacosRestTemplate = HttpClientManager.getNacosRestTemplate();\n+\n+\n+    private final String INSTANCE_PATH = \"/nacos/v1/ns\";\n+    private final String CONFIG_PATH = \"/nacos/v1/cs\";\n+    private String IP = null;\n+\n+\n+    @Before\n+    public void init() throws NacosException {\n+        IP = String.format(\"http://localhost:%d\", port);\n+    }\n+\n+    @Test\n+    public void test_url_get_return_restResult() throws Exception{\n+        String url = IP + CONFIG_PATH + \"/configs\";\n+        Query query = Query.newInstance().addParam(\"beta\", true).addParam(\"dataId\",\"test-1\").addParam(\"group\", \"DEFAULT_GROUP\");\n+        HttpRestResult<String> restResult = nacosRestTemplate.get(url, Header.newInstance(), query, RestResult.class);\n+        Assert.assertTrue(restResult.ok());\n+        System.out.println(restResult.getData());\n+        System.out.println(restResult.getHeader());\n+    }\n+\n+\n+    @Test\n+    public void test_url_post_from() throws Exception{\n+        String url = IP + INSTANCE_PATH + \"/instance\";\n+        Map<String, String> param = new HashMap<>();\n+        param.put(\"serviceName\", \"app-test\");\n+        param.put(\"port\", \"8080\");\n+        param.put(\"ip\", \"11.11.11.11\");\n+        HttpRestResult<String> restResult = nacosRestTemplate.postFrom(url, Header.newInstance(), Query.newInstance(), param, String.class);\n+        Assert.assertTrue(restResult.ok());\n+        System.out.println(restResult.getData());\n+    }\n+\n+    @Test\n+    public void test_url_put_from() throws Exception{\n+        String url = IP + INSTANCE_PATH + \"/instance\";\n+        Map<String, String> param = new HashMap<>();\n+        param.put(\"serviceName\", \"app-test-change\");\n+        param.put(\"port\", \"8080\");\n+        param.put(\"ip\", \"11.11.11.11\");\n+        HttpRestResult<String> restResult = nacosRestTemplate.putFrom(url, Header.newInstance(), Query.newInstance(), param, String.class);\n+        Assert.assertTrue(restResult.ok());\n+        System.out.println(restResult.getData());\n+    }\n+\n+    @Test\n+    public void test_url_get() throws Exception {\n+        String url = IP + INSTANCE_PATH + \"/instance/list\";\n+        Query query = Query.newInstance().addParam(\"serviceName\", \"app-test\");\n+        HttpRestResult<Map> restResult = nacosRestTemplate.get(url, Header.newInstance(), query, Map.class);\n+        Assert.assertTrue(restResult.ok());\n+        Assert.assertEquals(restResult.getData().get(\"dom\"), \"app-test\");\n+        System.out.println(restResult.getData());\n+    }\n+\n+    @Test\n+    public void test_url_get_by_map() throws Exception {\n+        String url = IP + INSTANCE_PATH + \"/instance/list\";\n+        Map<String, String> param = new HashMap<>();\n+        param.put(\"serviceName\", \"app-test\");\n+        HttpRestResult<Map> restResult = nacosRestTemplate.get(url, Header.newInstance(), param, Map.class);\n+        Assert.assertTrue(restResult.ok());\n+        Assert.assertEquals(restResult.getData().get(\"dom\"), \"app-test\");\n+        System.out.println(restResult.getData());\n+    }\n+\n+    @Test\n+    public void test_url_delete() throws Exception{\n+        String url = IP + INSTANCE_PATH + \"/instance\";\n+        Query query = Query.newInstance()\n+            .addParam(\"ip\", \"11.11.11.11\")\n+            .addParam(\"port\", \"8080\")\n+            .addParam(\"serviceName\", \"app-test\");\n+        HttpRestResult<String> restResult = nacosRestTemplate.delete(url, Header.newInstance(), query,  String.class);\n+        Assert.assertTrue(restResult.ok());\n+        System.out.println(restResult);\n+    }\n+\n+\n+\n+\n+\n+\n+\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a83241205ccf9ff651065a1874a18be6918ceddc"}, "originalPosition": 141}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjczMjA5NDUyOnYy", "diffSide": "RIGHT", "path": "common/src/main/java/com/alibaba/nacos/common/http/client/DefaultHttpClientRequest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQwNjowODowN1rOGiPsMQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQwNjowODowN1rOGiPsMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODU2MTg0MQ==", "bodyText": "log class is wrong", "url": "https://github.com/alibaba/nacos/pull/2926#discussion_r438561841", "createdAt": "2020-06-11T06:08:07Z", "author": {"login": "KomachiSion"}, "path": "common/src/main/java/com/alibaba/nacos/common/http/client/DefaultHttpClientRequest.java", "diffHunk": "@@ -0,0 +1,80 @@\n+/*\n+ * Copyright 1999-2018 Alibaba Group Holding Ltd.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.alibaba.nacos.common.http.client;\n+\n+import com.alibaba.nacos.common.constant.HttpHeaderConsts;\n+import com.alibaba.nacos.common.http.BaseHttpMethod;\n+import com.alibaba.nacos.common.http.param.Header;\n+import com.alibaba.nacos.common.http.param.MediaType;\n+import com.alibaba.nacos.common.model.RequestHttpEntity;\n+import org.apache.http.client.methods.CloseableHttpResponse;\n+import org.apache.http.client.methods.HttpRequestBase;\n+import org.apache.http.impl.client.CloseableHttpClient;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.io.IOException;\n+import java.net.URI;\n+import java.util.Map;\n+\n+/**\n+ * {@link HttpClientRequest} implementation that uses apache http client to\n+ * execute streaming requests\n+ *\n+ * @author mai.jh\n+ * @date 2020/5/24\n+ */\n+@SuppressWarnings({\"unchecked\", \"rawtypes\", \"resource\"})\n+public class DefaultHttpClientRequest implements HttpClientRequest {\n+\n+    private static final Logger logger = LoggerFactory.getLogger(NacosRestTemplate.class);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fa6bf9951d3484fd46b29c5aa71f543bc0e6ff7e"}, "originalPosition": 44}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjczMjEyMzc0OnYy", "diffSide": "RIGHT", "path": "common/src/main/java/com/alibaba/nacos/common/utils/IoUtils.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQwNjoyMjowMFrOGiP-PA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQwOTo1ODozOVrOGiWntg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODU2NjQ2MA==", "bodyText": "Why close stream in there, what's going on when stream will be used in outer?", "url": "https://github.com/alibaba/nacos/pull/2926#discussion_r438566460", "createdAt": "2020-06-11T06:22:00Z", "author": {"login": "KomachiSion"}, "path": "common/src/main/java/com/alibaba/nacos/common/utils/IoUtils.java", "diffHunk": "@@ -167,6 +167,17 @@ public static void cleanDirectory(File directory) throws IOException {\n         }\n     }\n \n+    public static void copy(byte[] in, OutputStream out) throws IOException {\n+        try {\n+            out.write(in);\n+        } finally {\n+            try {\n+                out.close();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fa6bf9951d3484fd46b29c5aa71f543bc0e6ff7e"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODY3NTM4Mg==", "bodyText": "This method is no used and has remove", "url": "https://github.com/alibaba/nacos/pull/2926#discussion_r438675382", "createdAt": "2020-06-11T09:58:39Z", "author": {"login": "Maijh97"}, "path": "common/src/main/java/com/alibaba/nacos/common/utils/IoUtils.java", "diffHunk": "@@ -167,6 +167,17 @@ public static void cleanDirectory(File directory) throws IOException {\n         }\n     }\n \n+    public static void copy(byte[] in, OutputStream out) throws IOException {\n+        try {\n+            out.write(in);\n+        } finally {\n+            try {\n+                out.close();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODU2NjQ2MA=="}, "originalCommit": {"oid": "fa6bf9951d3484fd46b29c5aa71f543bc0e6ff7e"}, "originalPosition": 9}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjczMjIxMDQ4OnYy", "diffSide": "RIGHT", "path": "common/src/main/java/com/alibaba/nacos/common/utils/JacksonUtils.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQwNjo1ODoyNVrOGiQ0zA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQwNjo1ODoyNVrOGiQ0zA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODU4MDQyOA==", "bodyText": "catch jackson exception in util and throw NacosDeserializationException", "url": "https://github.com/alibaba/nacos/pull/2926#discussion_r438580428", "createdAt": "2020-06-11T06:58:25Z", "author": {"login": "KomachiSion"}, "path": "common/src/main/java/com/alibaba/nacos/common/utils/JacksonUtils.java", "diffHunk": "@@ -71,22 +72,24 @@ public static String toJson(Object obj) {\n \t}\n \n \tpublic static <T> T toObj(byte[] json, Type cls) {\n-\t\ttry {\n-\t\t\treturn toObj(StringUtils.newString4UTF8(json), cls);\n-\t\t}\n-\t\tcatch (Exception e) {\n-\t\t\tthrow new NacosDeserializationException(e);\n-\t\t}\n-\t}\n-\n-\tpublic static <T> T toObj(byte[] json, TypeReference<T> typeReference) {\n-\t\ttry {\n-\t\t\treturn toObj(StringUtils.newString4UTF8(json), typeReference);\n-\t\t}\n-\t\tcatch (Exception e) {\n-\t\t\tthrow new NacosDeserializationException(e);\n-\t\t}\n-\t}\n+        try {\n+            return toObj(StringUtils.newString4UTF8(json), cls);\n+        } catch (Exception e) {\n+            throw new NacosDeserializationException(e);\n+        }\n+    }\n+\n+\tpublic static <T> T toObj(InputStream inputStream, Class<T> tClass) throws Exception {\n+\t    return mapper.readValue(inputStream, tClass);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fa6bf9951d3484fd46b29c5aa71f543bc0e6ff7e"}, "originalPosition": 36}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjczMjIxMjE3OnYy", "diffSide": "RIGHT", "path": "common/src/main/java/com/alibaba/nacos/common/utils/JacksonUtils.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQwNjo1OTowMVrOGiQ11g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQwNjo1OTowMVrOGiQ11g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODU4MDY5NA==", "bodyText": "catch follow } in same line, not next line please.", "url": "https://github.com/alibaba/nacos/pull/2926#discussion_r438580694", "createdAt": "2020-06-11T06:59:01Z", "author": {"login": "KomachiSion"}, "path": "common/src/main/java/com/alibaba/nacos/common/utils/JacksonUtils.java", "diffHunk": "@@ -115,6 +118,15 @@ public static String toJson(Object obj) {\n \t\t}\n \t}\n \n+\tpublic static <T> T toObj(InputStream inputStream, Type type) {\n+        try {\n+            return mapper.readValue(inputStream, mapper.constructType(type));\n+        }\n+        catch (IOException e) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fa6bf9951d3484fd46b29c5aa71f543bc0e6ff7e"}, "originalPosition": 57}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjczMjIxMzYwOnYy", "diffSide": "RIGHT", "path": "common/src/test/java/com/alibaba/nacos/common/http/HttpUtilsTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQwNjo1OTozM1rOGiQ2wQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQwNjo1OTozM1rOGiQ2wQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODU4MDkyOQ==", "bodyText": "If it's an empty class, please remove it.", "url": "https://github.com/alibaba/nacos/pull/2926#discussion_r438580929", "createdAt": "2020-06-11T06:59:33Z", "author": {"login": "KomachiSion"}, "path": "common/src/test/java/com/alibaba/nacos/common/http/HttpUtilsTest.java", "diffHunk": "@@ -1,12 +1,20 @@\n+/*\n+ * Copyright 1999-2018 Alibaba Group Holding Ltd.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n package com.alibaba.nacos.common.http;\n \n-import org.junit.Test;\n-\n public class HttpUtilsTest {\n \n-\t@Test\n-\tpublic void test_url_encode() throws Exception {\n-\n-\t}\n-\n-}\n\\ No newline at end of file\n+}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fa6bf9951d3484fd46b29c5aa71f543bc0e6ff7e"}, "originalPosition": 29}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjczMjI5OTI3OnYy", "diffSide": "RIGHT", "path": "common/src/main/java/com/alibaba/nacos/common/http/param/MediaType.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQwNzoyOTozNVrOGiRs1g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQwNzoyOTozNVrOGiRs1g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODU5NDc3NA==", "bodyText": "Why add charset in Type? Header.java has add Accept-Charset as UTF-8 default", "url": "https://github.com/alibaba/nacos/pull/2926#discussion_r438594774", "createdAt": "2020-06-11T07:29:35Z", "author": {"login": "KomachiSion"}, "path": "common/src/main/java/com/alibaba/nacos/common/http/param/MediaType.java", "diffHunk": "@@ -25,7 +25,7 @@ private MediaType() {}\n \n     public static final String APPLICATION_ATOM_XML = \"application/atom+xml\";\n \n-    public static final String APPLICATION_FORM_URLENCODED = \"application/x-www-form-urlencoded\";\n+    public static final String APPLICATION_FORM_URLENCODED = \"application/x-www-form-urlencoded;charset=utf-8\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fa6bf9951d3484fd46b29c5aa71f543bc0e6ff7e"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjczMjMwNDkzOnYy", "diffSide": "RIGHT", "path": "common/src/main/java/com/alibaba/nacos/common/http/param/Header.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQwNzozMToxOFrOGiRwUA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQwNzozMToxOFrOGiRwUA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODU5NTY2NA==", "bodyText": "Can you move these all static values to HttpHeadeConsts?", "url": "https://github.com/alibaba/nacos/pull/2926#discussion_r438595664", "createdAt": "2020-06-11T07:31:18Z", "author": {"login": "KomachiSion"}, "path": "common/src/main/java/com/alibaba/nacos/common/http/param/Header.java", "diffHunk": "@@ -34,7 +38,7 @@\n \n     private Header() {\n         header = new LinkedHashMap<String, String>();\n-        addParam(\"Content-Type\", \"application/json\");\n+        addParam(HttpHeaderConsts.CONTENT_TYPE, MediaType.APPLICATION_JSON);\n         addParam(\"Accept-Charset\", \"UTF-8\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fa6bf9951d3484fd46b29c5aa71f543bc0e6ff7e"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjczMjMwNjg5OnYy", "diffSide": "RIGHT", "path": "common/src/main/java/com/alibaba/nacos/common/http/param/Header.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQwNzozMjowMFrOGiRxlA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQwNzozMjowMFrOGiRxlA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODU5NTk4OA==", "bodyText": "Same question as MediaType", "url": "https://github.com/alibaba/nacos/pull/2926#discussion_r438595988", "createdAt": "2020-06-11T07:32:00Z", "author": {"login": "KomachiSion"}, "path": "common/src/main/java/com/alibaba/nacos/common/http/param/Header.java", "diffHunk": "@@ -91,9 +103,34 @@ public void addAll(Map<String, String> params) {\n         }\n     }\n \n+    public String getCharset() {\n+        String value = getValue(HttpHeaderConsts.CONTENT_TYPE);\n+        return (StringUtils.isNotBlank(value) ? analysisCharset(value) : Constants.ENCODE);\n+    }\n+\n+    private String analysisCharset(String contentType) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fa6bf9951d3484fd46b29c5aa71f543bc0e6ff7e"}, "originalPosition": 61}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjczMjM2MDE5OnYy", "diffSide": "RIGHT", "path": "common/src/main/java/com/alibaba/nacos/common/http/client/DefaultClientHttpResponse.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQwNzo0ODo1NVrOGiSTNg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQwNzo0ODo1NVrOGiSTNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODYwNDU5OA==", "bodyText": "catch follow } in same line", "url": "https://github.com/alibaba/nacos/pull/2926#discussion_r438604598", "createdAt": "2020-06-11T07:48:55Z", "author": {"login": "KomachiSion"}, "path": "common/src/main/java/com/alibaba/nacos/common/http/client/DefaultClientHttpResponse.java", "diffHunk": "@@ -0,0 +1,80 @@\n+/*\n+ * Copyright 1999-2018 Alibaba Group Holding Ltd.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.alibaba.nacos.common.http.client;\n+\n+import com.alibaba.nacos.common.http.param.Header;\n+import org.apache.http.HttpResponse;\n+import org.apache.http.client.utils.HttpClientUtils;\n+\n+import java.io.IOException;\n+import java.io.InputStream;\n+\n+/**\n+ * ApacheClientHttpResponse implementation {@link HttpClientResponse}\n+ *\n+ * @author mai.jh\n+ * @date 2020/5/25\n+ */\n+public class DefaultClientHttpResponse implements HttpClientResponse {\n+\n+    private HttpResponse response;\n+\n+    private Header responseHeader;\n+\n+    public DefaultClientHttpResponse(HttpResponse response) {\n+        this.response = response;\n+    }\n+\n+    @Override\n+    public int getStatusCode() {\n+        return this.response.getStatusLine().getStatusCode();\n+    }\n+\n+    @Override\n+    public String getStatusText() {\n+        return this.response.getStatusLine().getReasonPhrase();\n+    }\n+\n+    @Override\n+    public Header getHeaders() {\n+        if (this.responseHeader == null) {\n+            this.responseHeader = Header.newInstance();\n+            org.apache.http.Header[] allHeaders = response.getAllHeaders();\n+            for (org.apache.http.Header header : allHeaders) {\n+                this.responseHeader.addParam(header.getName(), header.getValue());\n+            }\n+        }\n+        return this.responseHeader;\n+    }\n+\n+    @Override\n+    public InputStream getBody() throws IOException{\n+        return response.getEntity().getContent();\n+    }\n+\n+    @Override\n+    public void close() {\n+        try {\n+            if (this.response != null) {\n+                HttpClientUtils.closeQuietly(response);\n+            }\n+        }\n+        catch (Exception ex) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fa6bf9951d3484fd46b29c5aa71f543bc0e6ff7e"}, "originalPosition": 76}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4483, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}