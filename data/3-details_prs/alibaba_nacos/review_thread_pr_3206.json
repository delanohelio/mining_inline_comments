{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQxNzU5OTMy", "number": 3206, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QwMzowMjo1NlrOENqsfQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QwMzozMToyMFrOENq8jg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgyNzY2NDYxOnYy", "diffSide": "RIGHT", "path": "cmdb/src/main/java/com/alibaba/nacos/cmdb/memory/CmdbProvider.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QwMzowMjo1NlrOGwZ_Mg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QwMzowMjo1NlrOGwZ_Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzQxMDYxMA==", "bodyText": "Should we create a new class CmdbExecutors like naming and config? Don't put them into UtilsAndCommons", "url": "https://github.com/alibaba/nacos/pull/3206#discussion_r453410610", "createdAt": "2020-07-13T03:02:56Z", "author": {"login": "KomachiSion"}, "path": "cmdb/src/main/java/com/alibaba/nacos/cmdb/memory/CmdbProvider.java", "diffHunk": "@@ -117,11 +117,9 @@ public void init() throws NacosException {\n         initCmdbService();\n         load();\n         \n-        UtilsAndCommons.GLOBAL_EXECUTOR.schedule(new CmdbDumpTask(), switches.getDumpTaskInterval(), TimeUnit.SECONDS);\n-        UtilsAndCommons.GLOBAL_EXECUTOR\n-                .schedule(new CmdbLabelTask(), switches.getLabelTaskInterval(), TimeUnit.SECONDS);\n-        UtilsAndCommons.GLOBAL_EXECUTOR\n-                .schedule(new CmdbEventTask(), switches.getEventTaskInterval(), TimeUnit.SECONDS);\n+        UtilsAndCommons.scheduleCmdbTask(new CmdbDumpTask(), switches.getDumpTaskInterval(), TimeUnit.SECONDS);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "94f6c61ccdccd0866abc724ca4f8618aa1b8f10b"}, "originalPosition": 9}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgyNzY2NjE0OnYy", "diffSide": "RIGHT", "path": "config/src/main/java/com/alibaba/nacos/config/server/monitor/MemoryMonitor.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QwMzowNDowMlrOGwaAJQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QwMzowNDowMlrOGwaAJQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzQxMDg1Mw==", "bodyText": "Why remove public?", "url": "https://github.com/alibaba/nacos/pull/3206#discussion_r453410853", "createdAt": "2020-07-13T03:04:02Z", "author": {"login": "KomachiSion"}, "path": "config/src/main/java/com/alibaba/nacos/config/server/monitor/MemoryMonitor.java", "diffHunk": "@@ -30,17 +30,17 @@\n  * @author Nacos\n  */\n @Service\n-public class MemoryMonitor {\n+class MemoryMonitor {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "94f6c61ccdccd0866abc724ca4f8618aa1b8f10b"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgyNzcwNTc0OnYy", "diffSide": "RIGHT", "path": "config/src/main/java/com/alibaba/nacos/config/server/utils/ConfigExecutor.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QwMzozMToyMFrOGwaWlg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QwMzozMToyMFrOGwaWlg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzQxNjU5OA==", "bodyText": "The thread pool factory are different between original and here.", "url": "https://github.com/alibaba/nacos/pull/3206#discussion_r453416598", "createdAt": "2020-07-13T03:31:20Z", "author": {"login": "KomachiSion"}, "path": "config/src/main/java/com/alibaba/nacos/config/server/utils/ConfigExecutor.java", "diffHunk": "@@ -31,20 +35,68 @@\n  */\n public final class ConfigExecutor {\n     \n-    private static final Executor DUMP_EXECUTOR = ExecutorFactory\n-            .newFixedExecutorService(Config.class.getCanonicalName(), 1,\n-                    new NameThreadFactory(\"nacos.config.embedded.dump\"));\n+    private static final Executor DUMP_EXECUTOR = ExecutorFactory.Managed\n+            .newSingleExecutorService(ClassUtils.getCanonicalName(Config.class),\n+                    new NameThreadFactory(\"com.alibaba.nacos.config.embedded.dump\"));\n     \n-    private static final ScheduledExecutorService TIMER_EXECUTOR = ExecutorFactory\n-            .newScheduledExecutorService(Config.class.getCanonicalName(), 10,\n-                    new NameThreadFactory(\"com.alibaba.nacos.server.Timer\"));\n+    private static final ScheduledExecutorService TIMER_EXECUTOR = ExecutorFactory.Managed\n+            .newScheduledExecutorService(ClassUtils.getCanonicalName(Config.class), 10,\n+                    new NameThreadFactory(\"com.alibaba.nacos.config.server.timer\"));\n     \n-    public static void scheduleWithFixedDelay(Runnable command, long initialDelay, long delay, TimeUnit unit) {\n+    private static final ScheduledExecutorService CAPACITY_MANAGEMENT_EXECUTOR = ExecutorFactory.Managed", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "94f6c61ccdccd0866abc724ca4f8618aa1b8f10b"}, "originalPosition": 34}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4447, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}