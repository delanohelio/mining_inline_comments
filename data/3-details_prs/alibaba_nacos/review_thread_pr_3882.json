{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkwMjYxNDUz", "number": 3882, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMVQxMjo1MDoyM1rOElpHHA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQwNjoxNzozNVrOEl777w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA3OTA2MzMyOnYy", "diffSide": "RIGHT", "path": "client/src/main/java/com/alibaba/nacos/client/logging/AbstractNacosLogging.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMVQxMjo1MDoyM1rOHVOafg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQwNjoxNjo1MVrOHVrfTA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjAxODMwMg==", "bodyText": "I think the nacos need keep, because in user.home/logs, there are many different app will print logs.", "url": "https://github.com/alibaba/nacos/pull/3882#discussion_r492018302", "createdAt": "2020-09-21T12:50:23Z", "author": {"login": "KomachiSion"}, "path": "client/src/main/java/com/alibaba/nacos/client/logging/AbstractNacosLogging.java", "diffHunk": "@@ -31,13 +33,13 @@\n     \n     private static final String NACOS_LOGGING_DEFAULT_CONFIG_ENABLED_PROPERTY = \"nacos.logging.default.config.enabled\";\n     \n-    private static final String NACOS_LOGGING_PATH_PROPERTY = \"nacos.logging.path\";\n+    private static final String NACOS_LOGGING_PATH_PROPERTY = \"JM.LOG.PATH\";\n     \n     static {\n         String loggingPath = System.getProperty(NACOS_LOGGING_PATH_PROPERTY);\n         if (StringUtils.isBlank(loggingPath)) {\n             String userHome = System.getProperty(\"user.home\");\n-            System.setProperty(NACOS_LOGGING_PATH_PROPERTY, userHome + \"/logs/nacos\");\n+            System.setProperty(NACOS_LOGGING_PATH_PROPERTY, userHome + File.separator + \"logs\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "340b1ee77ba5498263785d2573dc8c49782a6e68"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjQ5NDY2OA==", "bodyText": "I do kept the 'nacos' in nacos-log4j.xml, as is shown in the next comment.\nThe reason why I move 'nacos' dir into xml files is:\nIn 1.3.2, the ${nacos.logging.path} is directly the parent dir of log files:\nif ${nacos.logging.path} exists: \n    directly use ${nacos.log.path} as the log dir\nelse:\n    use ${nacos.log.path} = ${user.home}/logs/nacos as the log dir\n[code 1]\nbut in 1.4.0, the ${JM.LOG.PATH} is NOT the direct parent dir of log files. The direct dir should be ${JM.LOG.PATH}/nacos\nI can't direcly write this way:\nif ${JM.LOG.PATH} exists: \n    ${JM.LOG.PATH} = ${JM.LOG.PATH}/nacos\nelse:\n    use ${JM.LOG.PATH}= ${user.home}/logs/nacos as the log dir\n[code 2]\nthis code is wrong, because if ${JM.LOG.PATH} already exists, it should not be reassigned.\nso I write this way:\nif ${JM.LOG.PATH} exists: \n    do nothing\nelse:\n    ${JM.LOG.PATH}= ${user.home}/logs\nThen in the resource files:\nUse ${JM.LOG.PATH}/nacos instead of ${JM.LOG.PATH} as the logging parent dir.\nBut I see this process is not elegant.", "url": "https://github.com/alibaba/nacos/pull/3882#discussion_r492494668", "createdAt": "2020-09-22T06:16:51Z", "author": {"login": "realJackSun"}, "path": "client/src/main/java/com/alibaba/nacos/client/logging/AbstractNacosLogging.java", "diffHunk": "@@ -31,13 +33,13 @@\n     \n     private static final String NACOS_LOGGING_DEFAULT_CONFIG_ENABLED_PROPERTY = \"nacos.logging.default.config.enabled\";\n     \n-    private static final String NACOS_LOGGING_PATH_PROPERTY = \"nacos.logging.path\";\n+    private static final String NACOS_LOGGING_PATH_PROPERTY = \"JM.LOG.PATH\";\n     \n     static {\n         String loggingPath = System.getProperty(NACOS_LOGGING_PATH_PROPERTY);\n         if (StringUtils.isBlank(loggingPath)) {\n             String userHome = System.getProperty(\"user.home\");\n-            System.setProperty(NACOS_LOGGING_PATH_PROPERTY, userHome + \"/logs/nacos\");\n+            System.setProperty(NACOS_LOGGING_PATH_PROPERTY, userHome + File.separator + \"logs\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjAxODMwMg=="}, "originalCommit": {"oid": "340b1ee77ba5498263785d2573dc8c49782a6e68"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA4MjE0NzY3OnYy", "diffSide": "RIGHT", "path": "client/src/main/resources/nacos-log4j2.xml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQwNjoxNzozNVrOHVrgLw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQwNjoxNzozNVrOHVrgLw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjQ5NDg5NQ==", "bodyText": "I kept 'nacos' here", "url": "https://github.com/alibaba/nacos/pull/3882#discussion_r492494895", "createdAt": "2020-09-22T06:17:35Z", "author": {"login": "realJackSun"}, "path": "client/src/main/resources/nacos-log4j2.xml", "diffHunk": "@@ -17,8 +17,8 @@\n \n <Configuration status=\"WARN\">\n     <Appenders>\n-        <RollingFile name=\"CONFIG_LOG_FILE\" fileName=\"${sys:nacos.logging.path}/config.log\"\n-            filePattern=\"${sys:nacos.logging.path}/config.log.%d{yyyy-MM-dd}.%i\">\n+        <RollingFile name=\"CONFIG_LOG_FILE\" fileName=\"${sys:JM.LOG.PATH}/nacos/config.log\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "340b1ee77ba5498263785d2573dc8c49782a6e68"}, "originalPosition": 6}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4290, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}