{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM3NTg2MDQ4", "number": 3138, "title": "[#2979] Inline storage support importing data from external data sources", "bodyText": "Please do not create a Pull Request without creating an issue first.\nWhat is the purpose of the change\n#2979\nBrief changelog\nXX\nVerifying this change\nXXXX\nFollow this checklist to help us incorporate your contribution quickly and easily:\n\n Make sure there is a Github issue filed for the change (usually before you start working on it). Trivial changes like typos do not require a Github issue. Your pull request should address just this issue, without pulling in other changes - one PR resolves one issue.\n Format the pull request title like [ISSUE #123] Fix UnknownException when host config not exist. Each commit in the pull request should have a meaningful subject line and body.\n Write a pull request description that is detailed enough to understand what the pull request does, how, and why.\n Write necessary unit-test to verify your logic correction, more mock a little better when cross module dependency exist. If the new feature or significant change is committed, please remember to add integration-test in test module.\n Run mvn -B clean package apache-rat:check findbugs:findbugs -Dmaven.test.skip=true to make sure basic checks pass. Run mvn clean install -DskipITs to make sure unit-test pass. Run mvn clean test-compile failsafe:integration-test  to make sure integration-test pass.", "createdAt": "2020-06-21T18:57:15Z", "url": "https://github.com/alibaba/nacos/pull/3138", "merged": true, "mergeCommit": {"oid": "2c733d57ffa1e44f3e79ff302926c617d98122ff"}, "closed": true, "closedAt": "2020-06-28T02:25:07Z", "author": {"login": "chuntaojun"}, "timelineItems": {"totalCount": 29, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcofsTXAH2gAyNDM3NTg2MDQ4OjI0MDBkZDU1ZTNkNGY4YTZhOWQ2YWIwMjRmOWZiYjUyNDE5NDQ0OGE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcvi9-HgFqTQzODczNzUzNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2400dd55e3d4f8a6a9d6ab024f9fbb524194448a", "author": {"user": {"login": "chuntaojun", "name": "liaochuntao"}}, "url": "https://github.com/alibaba/nacos/commit/2400dd55e3d4f8a6a9d6ab024f9fbb524194448a", "committedDate": "2020-06-06T04:38:30Z", "message": "feat: data import Derby, Derby export complete"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "36939515951964232feebf0ab4d8518ca098cc32", "author": {"user": {"login": "chuntaojun", "name": "liaochuntao"}}, "url": "https://github.com/alibaba/nacos/commit/36939515951964232feebf0ab4d8518ca098cc32", "committedDate": "2020-06-06T13:16:16Z", "message": "feat: external data source import is complete"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "824f854bab5f2c28b155464498ad0107b1f54f6a", "author": {"user": {"login": "chuntaojun", "name": "liaochuntao"}}, "url": "https://github.com/alibaba/nacos/commit/824f854bab5f2c28b155464498ad0107b1f54f6a", "committedDate": "2020-06-07T08:43:32Z", "message": "feat: import data to derby and derby backup finished"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a74ceb49147161d793211a2125ce1817cf908215", "author": {"user": {"login": "chuntaojun", "name": "liaochuntao"}}, "url": "https://github.com/alibaba/nacos/commit/a74ceb49147161d793211a2125ce1817cf908215", "committedDate": "2020-06-08T01:30:56Z", "message": "refactor: merge develop"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d2c435059b13314d8a0555e6f7a3bfd40f4fb75d", "author": {"user": {"login": "chuntaojun", "name": "liaochuntao"}}, "url": "https://github.com/alibaba/nacos/commit/d2c435059b13314d8a0555e6f7a3bfd40f4fb75d", "committedDate": "2020-06-10T04:06:53Z", "message": "refactor: merge develop"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0df6044b0f534b8d5831b7d2b8f51135f7db9411", "author": {"user": {"login": "chuntaojun", "name": "liaochuntao"}}, "url": "https://github.com/alibaba/nacos/commit/0df6044b0f534b8d5831b7d2b8f51135f7db9411", "committedDate": "2020-06-10T05:54:58Z", "message": "fix: fixed bug where external storage mode could not find beans"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "77c1f3bd83ed40d255b0ab058bc042cd41b73908", "author": {"user": {"login": "chuntaojun", "name": "liaochuntao"}}, "url": "https://github.com/alibaba/nacos/commit/77c1f3bd83ed40d255b0ab058bc042cd41b73908", "committedDate": "2020-06-11T01:46:36Z", "message": "style: fix code style"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3b2cb6794b69c206e4a42235c70a949be409bfed", "author": {"user": {"login": "chuntaojun", "name": "liaochuntao"}}, "url": "https://github.com/alibaba/nacos/commit/3b2cb6794b69c206e4a42235c70a949be409bfed", "committedDate": "2020-06-11T05:03:56Z", "message": "style: remove unuse code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bc0ed7957535394279f8fe209825a9edd7aeaf3e", "author": {"user": {"login": "chuntaojun", "name": "liaochuntao"}}, "url": "https://github.com/alibaba/nacos/commit/bc0ed7957535394279f8fe209825a9edd7aeaf3e", "committedDate": "2020-06-11T08:45:52Z", "message": "refactor: fixed configuration file information"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9585d55adccffde50385ed9af89d385ebfcd53c6", "author": {"user": {"login": "chuntaojun", "name": "liaochuntao"}}, "url": "https://github.com/alibaba/nacos/commit/9585d55adccffde50385ed9af89d385ebfcd53c6", "committedDate": "2020-06-17T07:20:06Z", "message": "improvement: merge upstream/develop"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "29df82f694c9ed80ae7e28bd7acb507386972ec7", "author": {"user": {"login": "chuntaojun", "name": "liaochuntao"}}, "url": "https://github.com/alibaba/nacos/commit/29df82f694c9ed80ae7e28bd7acb507386972ec7", "committedDate": "2020-06-18T15:15:01Z", "message": "refactor: merge upstream develop"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "78167ab1e72c3db2d2a1fa0da68caed994db6c19", "author": {"user": {"login": "chuntaojun", "name": "liaochuntao"}}, "url": "https://github.com/alibaba/nacos/commit/78167ab1e72c3db2d2a1fa0da68caed994db6c19", "committedDate": "2020-06-19T03:39:46Z", "message": "Merge branch 'develop' of https://github.com/alibaba/nacos into new_develop"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7915e4fc647f9861636df7b049cdcaaef930968d", "author": {"user": {"login": "chuntaojun", "name": "liaochuntao"}}, "url": "https://github.com/alibaba/nacos/commit/7915e4fc647f9861636df7b049cdcaaef930968d", "committedDate": "2020-06-19T13:40:16Z", "message": "Merge branch 'develop' of https://github.com/alibaba/nacos into new_develop"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "43a22143190d3426e9d01c88cd2bc15814e0c388", "author": {"user": {"login": "chuntaojun", "name": "liaochuntao"}}, "url": "https://github.com/alibaba/nacos/commit/43a22143190d3426e9d01c88cd2bc15814e0c388", "committedDate": "2020-06-21T18:55:50Z", "message": "feat: support derby import data from sql script"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ce30ec31b12d5bc20f467882243ffb1498088607", "author": {"user": {"login": "chuntaojun", "name": "liaochuntao"}}, "url": "https://github.com/alibaba/nacos/commit/ce30ec31b12d5bc20f467882243ffb1498088607", "committedDate": "2020-06-21T18:55:59Z", "message": "Merge branch 'develop' of https://github.com/alibaba/nacos into feat_config_import"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7c0f291506866bf0841cd6799febef75217062f6", "author": {"user": {"login": "chuntaojun", "name": "liaochuntao"}}, "url": "https://github.com/alibaba/nacos/commit/7c0f291506866bf0841cd6799febef75217062f6", "committedDate": "2020-06-21T19:00:01Z", "message": "style: fix code style"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM0NTU5ODgw", "url": "https://github.com/alibaba/nacos/pull/3138#pullrequestreview-434559880", "createdAt": "2020-06-22T01:46:06Z", "commit": {"oid": "7c0f291506866bf0841cd6799febef75217062f6"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQwMTo0NjowN1rOGmv0FA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQwMTo1MDoxOFrOGmv2vw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzI4MjQ1Mg==", "bodyText": "When the latch will count down?", "url": "https://github.com/alibaba/nacos/pull/3138#discussion_r443282452", "createdAt": "2020-06-22T01:46:07Z", "author": {"login": "KomachiSion"}, "path": "client/src/test/java/com/alibaba/nacos/client/NamingTest.java", "diffHunk": "@@ -61,7 +62,8 @@ public void testServiceList() throws Exception {\n \n         System.out.println(list);\n \n-        ThreadUtils.sleep(60_000L);\n+        CountDownLatch latch = new CountDownLatch(1);\n+        latch.await();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7c0f291506866bf0841cd6799febef75217062f6"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzI4MzEzNQ==", "bodyText": "blank line between varaible.", "url": "https://github.com/alibaba/nacos/pull/3138#discussion_r443283135", "createdAt": "2020-06-22T01:50:18Z", "author": {"login": "KomachiSion"}, "path": "config/src/main/java/com/alibaba/nacos/config/server/filter/CurcuitFilter.java", "diffHunk": "@@ -53,9 +51,11 @@\n  *\n  * @author <a href=\"mailto:liaochuntao@live.com\">liaochuntao</a>\n  */\n-@SuppressWarnings(\"all\")\n public class CurcuitFilter implements Filter {\n \n+\tprivate volatile boolean isDowngrading = false;\n+\tprivate volatile boolean isOpenService = false;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7c0f291506866bf0841cd6799febef75217062f6"}, "originalPosition": 22}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f79f151b59f087e36b9f0a066e35fde72bee407c", "author": {"user": {"login": "chuntaojun", "name": "liaochuntao"}}, "url": "https://github.com/alibaba/nacos/commit/f79f151b59f087e36b9f0a066e35fde72bee407c", "committedDate": "2020-06-22T15:12:31Z", "message": "Merge branch 'develop' of https://github.com/alibaba/nacos into feat_config_import"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "78086e2295488400a70e92c3af64c2c9307626da", "author": {"user": {"login": "chuntaojun", "name": "liaochuntao"}}, "url": "https://github.com/alibaba/nacos/commit/78086e2295488400a70e92c3af64c2c9307626da", "committedDate": "2020-06-23T02:53:29Z", "message": "fix: a way to fix the missing"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "87b3bd5c2cab1381d2c8ea2be862969a65d9f466", "author": {"user": {"login": "chuntaojun", "name": "liaochuntao"}}, "url": "https://github.com/alibaba/nacos/commit/87b3bd5c2cab1381d2c8ea2be862969a65d9f466", "committedDate": "2020-06-23T15:36:52Z", "message": "fix: fix derby data import in standalone mode"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2MzEwNTc0", "url": "https://github.com/alibaba/nacos/pull/3138#pullrequestreview-436310574", "createdAt": "2020-06-24T04:09:16Z", "commit": {"oid": "87b3bd5c2cab1381d2c8ea2be862969a65d9f466"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQwNDowOToxNlrOGoCRCQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQwNDowOToxNlrOGoCRCQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDYzMzM1Mw==", "bodyText": "Is the two method copied?", "url": "https://github.com/alibaba/nacos/pull/3138#discussion_r444633353", "createdAt": "2020-06-24T04:09:16Z", "author": {"login": "KomachiSion"}, "path": "core/src/main/java/com/alibaba/nacos/core/utils/DiskUtils.java", "diffHunk": "@@ -87,6 +90,81 @@ public static void touch(File file) throws IOException {\n         FileUtils.touch(file);\n     }\n     \n+    /**\n+     * Creates a new empty file in the specified directory, using the given\n+     * prefix and suffix strings to generate its name. The resulting\n+     * {@code Path} is associated with the same {@code FileSystem} as the given\n+     * directory.\n+     *\n+     * <p> The details as to how the name of the file is constructed is\n+     * implementation dependent and therefore not specified. Where possible\n+     * the {@code prefix} and {@code suffix} are used to construct candidate\n+     * names in the same manner as the {@link\n+     * java.io.File#createTempFile(String,String,File)} method.\n+     *\n+     *\n+     * @param   dir\n+     *          the path to directory in which to create the file\n+     * @param   prefix\n+     *          the prefix string to be used in generating the file's name;\n+     *          may be {@code null}\n+     * @param   suffix\n+     *          the suffix string to be used in generating the file's name;\n+     *          may be {@code null}, in which case \"{@code .tmp}\" is used\n+     *\n+     * @return  the path to the newly created file that did not exist before\n+     *          this method was invoked\n+     *\n+     * @throws  IllegalArgumentException\n+     *          if the prefix or suffix parameters cannot be used to generate\n+     *          a candidate file name\n+     * @throws  UnsupportedOperationException\n+     *          if the array contains an attribute that cannot be set atomically\n+     *          when creating the directory\n+     * @throws  IOException\n+     *          if an I/O error occurs or {@code dir} does not exist\n+     * @throws  SecurityException\n+     *          In the case of the default provider, and a security manager is\n+     *          installed, the {@link SecurityManager#checkWrite(String) checkWrite}\n+     *          method is invoked to check write access to the file.\n+     */\n+    public static File createTmpFile(String dir, String prefix, String suffix) throws IOException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "87b3bd5c2cab1381d2c8ea2be862969a65d9f466"}, "originalPosition": 62}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3909d8200edf563f2864dedb0acdda531a22e7b3", "author": {"user": {"login": "chuntaojun", "name": "liaochuntao"}}, "url": "https://github.com/alibaba/nacos/commit/3909d8200edf563f2864dedb0acdda531a22e7b3", "committedDate": "2020-06-24T10:22:17Z", "message": "Merge branch 'develop' of https://github.com/alibaba/nacos into feat_config_import"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f1b08ab338b7aabd7b9c1cf0317511525ca52927", "author": {"user": {"login": "chuntaojun", "name": "liaochuntao"}}, "url": "https://github.com/alibaba/nacos/commit/f1b08ab338b7aabd7b9c1cf0317511525ca52927", "committedDate": "2020-06-24T10:34:13Z", "message": "style: fix code style"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5bc900867273ec3428f7eef20be22028ba08112f", "author": {"user": {"login": "chuntaojun", "name": "liaochuntao"}}, "url": "https://github.com/alibaba/nacos/commit/5bc900867273ec3428f7eef20be22028ba08112f", "committedDate": "2020-06-24T11:24:42Z", "message": "Merge branch 'develop' of https://github.com/alibaba/nacos into feat_config_import"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "37dee9813c02d645958e2ca55dfef1ffe970d2e8", "author": {"user": {"login": "chuntaojun", "name": "liaochuntao"}}, "url": "https://github.com/alibaba/nacos/commit/37dee9813c02d645958e2ca55dfef1ffe970d2e8", "committedDate": "2020-06-25T03:15:13Z", "message": "Merge branch 'develop' of https://github.com/alibaba/nacos into feat_config_import"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c52fed2b69d59d3aa1ce0a57201bdfab58598cbe", "author": {"user": {"login": "chuntaojun", "name": "liaochuntao"}}, "url": "https://github.com/alibaba/nacos/commit/c52fed2b69d59d3aa1ce0a57201bdfab58598cbe", "committedDate": "2020-06-25T04:30:16Z", "message": "refactor: merge upstream develop and fix code style"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4cfa53bdb3ffb8e00251cfa57ec4a47241fe3636", "author": {"user": {"login": "chuntaojun", "name": "liaochuntao"}}, "url": "https://github.com/alibaba/nacos/commit/4cfa53bdb3ffb8e00251cfa57ec4a47241fe3636", "committedDate": "2020-06-25T06:46:40Z", "message": "test: modify ut"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1816ab0d99e60201994361ec5916fcb9ec098221", "author": {"user": {"login": "chuntaojun", "name": "liaochuntao"}}, "url": "https://github.com/alibaba/nacos/commit/1816ab0d99e60201994361ec5916fcb9ec098221", "committedDate": "2020-06-26T04:14:55Z", "message": "style: fix code style"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM4NzM3NTM1", "url": "https://github.com/alibaba/nacos/pull/3138#pullrequestreview-438737535", "createdAt": "2020-06-28T02:24:59Z", "commit": {"oid": "1816ab0d99e60201994361ec5916fcb9ec098221"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4385, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}