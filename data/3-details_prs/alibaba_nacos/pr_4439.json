{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM1MDk0MjE3", "number": 4439, "title": "[ISSUE-3917] Enhance service detail console web, add metadata filter", "bodyText": "What is the purpose of the change\nFor-#3917", "createdAt": "2020-12-09T10:59:31Z", "url": "https://github.com/alibaba/nacos/pull/4439", "merged": true, "mergeCommit": {"oid": "638d89b70a3dda16e96e9cca886cd39437daaf76"}, "closed": true, "closedAt": "2020-12-21T02:19:43Z", "author": {"login": "horizonzy"}, "timelineItems": {"totalCount": 25, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdg5Y9oAH2gAyNTM1MDk0MjE3OjY1NmU3OWUxMTg5NzViNzJhZTE2NDM5MmUyODQ3YzNhYjAwNzFjMGM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdoMYM1AFqTU1NjA5NTkyOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "656e79e118975b72ae164392e2847c3ab0071c0c", "author": {"user": {"login": "horizonzy", "name": "\u8d75\u5ef6"}}, "url": "https://github.com/alibaba/nacos/commit/656e79e118975b72ae164392e2847c3ab0071c0c", "committedDate": "2020-11-28T10:14:40Z", "message": "add metadata filter at back-end of nacos naming console"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "764390ae7953345df5e5fd7fae54a7da12ac9dd6", "author": {"user": {"login": "horizonzy", "name": "\u8d75\u5ef6"}}, "url": "https://github.com/alibaba/nacos/commit/764390ae7953345df5e5fd7fae54a7da12ac9dd6", "committedDate": "2020-11-28T10:14:44Z", "message": "code enhance"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "971dd7a62879d428265c6adb1e48ae7858cd1645", "author": {"user": {"login": "jzhishu", "name": "jiang"}}, "url": "https://github.com/alibaba/nacos/commit/971dd7a62879d428265c6adb1e48ae7858cd1645", "committedDate": "2020-12-02T08:46:35Z", "message": "\u6dfb\u52a0input\uff0ctag\u7b49\u7ec4\u4ef6\uff0c\u521d\u6b65\u5e03\u5c40"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "924ecdbc339bdc7476d05b088273672557eae179", "author": {"user": {"login": "jzhishu", "name": "jiang"}}, "url": "https://github.com/alibaba/nacos/commit/924ecdbc339bdc7476d05b088273672557eae179", "committedDate": "2020-12-04T04:34:07Z", "message": "\u5b9e\u73b0\u9875\u9762\u4ea4\u4e92\uff0c\u53ef\u6dfb\u52a0\uff0c\u5220\u9664filter"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "26f55cc2ec1133348812f1da97c7d52368aafcf3", "author": {"user": {"login": "jzhishu", "name": "jiang"}}, "url": "https://github.com/alibaba/nacos/commit/26f55cc2ec1133348812f1da97c7d52368aafcf3", "committedDate": "2020-12-04T10:22:36Z", "message": "\u66f4\u65b0filter\u5411\u540e\u7aef\u53d1\u8d77\u8bf7\u6c42\u83b7\u53d6\u6570\u636e"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f0572cdb52e34c45a461515698844572ba3aa14f", "author": {"user": {"login": "jzhishu", "name": "jiang"}}, "url": "https://github.com/alibaba/nacos/commit/f0572cdb52e34c45a461515698844572ba3aa14f", "committedDate": "2020-12-07T06:35:27Z", "message": "\u5b9e\u73b0\u66f4\u65b0\u66f4\u6539\u8fc7\u6ee4\u6761\u4ef6\uff0c\u5237\u65b0\u8868\u683c"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c713ccd5a8cf8db59aaa9dabf7ecd06f0713843d", "author": {"user": {"login": "jzhishu", "name": "jiang"}}, "url": "https://github.com/alibaba/nacos/commit/c713ccd5a8cf8db59aaa9dabf7ecd06f0713843d", "committedDate": "2020-12-07T06:45:52Z", "message": "\u6dfb\u52a0\u56fd\u9645\u5316\u914d\u7f6e"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "71db48b70ca07b18e59fa39d5822cc7f9e7db583", "author": {"user": {"login": "jzhishu", "name": "jiang"}}, "url": "https://github.com/alibaba/nacos/commit/71db48b70ca07b18e59fa39d5822cc7f9e7db583", "committedDate": "2020-12-07T07:35:39Z", "message": "\u8f93\u5165\u5b8c\u540e\u6309\u7a7a\u683c\u76f4\u63a5\u6dfb\u52a0\uff0c\u6ca1\u8f93\u5165\u7684input\u7ed9\u51fa\u54cd\u5e94"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d37079c579583de7754f279464ba51a9f128e1a5", "author": {"user": {"login": "jzhishu", "name": "jiang"}}, "url": "https://github.com/alibaba/nacos/commit/d37079c579583de7754f279464ba51a9f128e1a5", "committedDate": "2020-12-07T07:50:13Z", "message": "\u63d0\u4ea4\u5355\u5143\u6d4b\u8bd5\uff0c\u66f4\u65b0\u6253\u5305\u540e\u7684\u9759\u6001\u8d44\u6e90"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d57a1d24c5da058bc27f1d63f0a78068cab07700", "author": {"user": {"login": "horizonzy", "name": "\u8d75\u5ef6"}}, "url": "https://github.com/alibaba/nacos/commit/d57a1d24c5da058bc27f1d63f0a78068cab07700", "committedDate": "2020-12-07T08:51:26Z", "message": "Merge pull request #1 from jzhishu/fix-3917\n\nFix 3917"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "78ed94555688b4039b5729c72359372c0cfccdd8", "author": {"user": {"login": "jzhishu", "name": "jiang"}}, "url": "https://github.com/alibaba/nacos/commit/78ed94555688b4039b5729c72359372c0cfccdd8", "committedDate": "2020-12-08T08:38:49Z", "message": "\u4fee\u6539\u914d\u7f6e \u89e3\u51b3\u751f\u4ea7\u73af\u5883\u4e0asourcemap\u4e0d\u751f\u6548\u7684\u95ee\u9898"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "acc6dd3bc788aa952deb26fe0ee31167610f4d1c", "author": {"user": {"login": "horizonzy", "name": "\u8d75\u5ef6"}}, "url": "https://github.com/alibaba/nacos/commit/acc6dd3bc788aa952deb26fe0ee31167610f4d1c", "committedDate": "2020-12-08T09:23:06Z", "message": "Merge pull request #2 from jzhishu/fix-3917\n\n\u4fee\u6539\u914d\u7f6e \u89e3\u51b3\u751f\u4ea7\u73af\u5883\u4e0asourcemap\u4e0d\u751f\u6548\u7684\u95ee\u9898"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b8dca3e0c40958cc58995fd8e16cb89c83d3b076", "author": {"user": {"login": "jzhishu", "name": "jiang"}}, "url": "https://github.com/alibaba/nacos/commit/b8dca3e0c40958cc58995fd8e16cb89c83d3b076", "committedDate": "2020-12-09T08:58:27Z", "message": "\u7528hook\u91cd\u6784\u7ec4\u4ef6InstanceFilter"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fea93007f7b034b9f278d137c64ac62bc6b35b03", "author": {"user": {"login": "jzhishu", "name": "jiang"}}, "url": "https://github.com/alibaba/nacos/commit/fea93007f7b034b9f278d137c64ac62bc6b35b03", "committedDate": "2020-12-09T09:33:22Z", "message": "\u591a\u4e2a\u96c6\u7fa4\u5404\u81ea\u4f7f\u7528\u8fc7\u6ee4"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0f268de556f5e28c12c73bd94e4176730520a11c", "author": {"user": {"login": "jzhishu", "name": "jiang"}}, "url": "https://github.com/alibaba/nacos/commit/0f268de556f5e28c12c73bd94e4176730520a11c", "committedDate": "2020-12-09T09:35:04Z", "message": "\u89e3\u51b3\u591a\u96c6\u7fa4\u65f6\uff0c\u5143\u6570\u636e\u8fc7\u6ee4\u65e0\u6cd5\u5355\u72ec\u4f7f\u7528\u7684\u95ee\u9898"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9cdd27ab137f4d8f3700acdcb3578b35e5f4bf5c", "author": {"user": {"login": "horizonzy", "name": "\u8d75\u5ef6"}}, "url": "https://github.com/alibaba/nacos/commit/9cdd27ab137f4d8f3700acdcb3578b35e5f4bf5c", "committedDate": "2020-12-09T09:36:06Z", "message": "Merge pull request #3 from jzhishu/fix-3917\n\nFix 3917"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ4MDg1NjQy", "url": "https://github.com/alibaba/nacos/pull/4439#pullrequestreview-548085642", "createdAt": "2020-12-09T11:23:41Z", "commit": {"oid": "9cdd27ab137f4d8f3700acdcb3578b35e5f4bf5c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQxMToyMzo0MVrOICPryg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQxMToyMzo0MVrOICPryg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTIyNTAzNA==", "bodyText": "\u53ef\u4ee5\u8003\u8651\u5e76\u53d1\u7684Stream", "url": "https://github.com/alibaba/nacos/pull/4439#discussion_r539225034", "createdAt": "2020-12-09T11:23:41Z", "author": {"login": "chuntaojun"}, "path": "naming/src/main/java/com/alibaba/nacos/naming/controllers/CatalogController.java", "diffHunk": "@@ -306,4 +317,18 @@ public ObjectNode rt4Service(HttpServletRequest request) {\n         return ipAddressInfos;\n     }\n     \n+    private List<Instance> filterInstance(List<Instance> instances, Map<String, String> metadata) {\n+        if (MapUtils.isEmpty(metadata)) {\n+            return instances;\n+        }\n+        return instances.stream().filter(instance -> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9cdd27ab137f4d8f3700acdcb3578b35e5f4bf5c"}, "originalPosition": 69}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "38bb8cd700ddb2f80aff8ef1ad31f90be360a79e", "author": {"user": {"login": "horizonzy", "name": "\u8d75\u5ef6"}}, "url": "https://github.com/alibaba/nacos/commit/38bb8cd700ddb2f80aff8ef1ad31f90be360a79e", "committedDate": "2020-12-10T03:46:26Z", "message": "revert backend code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "84e1bf50d6cb6cada72c2ce6fd0314e2bb00d747", "author": {"user": {"login": "horizonzy", "name": "\u8d75\u5ef6"}}, "url": "https://github.com/alibaba/nacos/commit/84e1bf50d6cb6cada72c2ce6fd0314e2bb00d747", "committedDate": "2020-12-10T04:28:36Z", "message": "revert metadata filter test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ5MDI0MjI2", "url": "https://github.com/alibaba/nacos/pull/4439#pullrequestreview-549024226", "createdAt": "2020-12-10T09:55:18Z", "commit": {"oid": "84e1bf50d6cb6cada72c2ce6fd0314e2bb00d747"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b00fbf198258eb3b4d3d8df79346eb8c87afaf9f", "author": {"user": {"login": "jzhishu", "name": "jiang"}}, "url": "https://github.com/alibaba/nacos/commit/b00fbf198258eb3b4d3d8df79346eb8c87afaf9f", "committedDate": "2020-12-16T15:16:32Z", "message": "\u53ea\u4ece\u5ba2\u6237\u7aef\u5df2\u83b7\u53d6\u5230\u7684\u5b9e\u4f8b\u4e2d\u8fc7\u6ee4"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6d27a665558d2c54a70bce61bf7c8fb1e376f064", "author": {"user": {"login": "horizonzy", "name": "\u8d75\u5ef6"}}, "url": "https://github.com/alibaba/nacos/commit/6d27a665558d2c54a70bce61bf7c8fb1e376f064", "committedDate": "2020-12-16T15:19:39Z", "message": "Merge pull request #4 from jzhishu/fix-3917\n\n\u53ea\u4ece\u5ba2\u6237\u7aef\u5df2\u83b7\u53d6\u5230\u7684\u5b9e\u4f8b\u4e2d\u8fc7\u6ee4"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eeb62b100d98709fcb0d05d0ca1882270c39b1cf", "author": {"user": {"login": "jzhishu", "name": "jiang"}}, "url": "https://github.com/alibaba/nacos/commit/eeb62b100d98709fcb0d05d0ca1882270c39b1cf", "committedDate": "2020-12-17T02:03:51Z", "message": "\u53d8\u52a8\u66f4\u65b0\u5230\u6253\u5305\u540e\u7684mian.js"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "160dfda5c3d76c23d05a0109ac5bd2b5eef21325", "author": {"user": {"login": "horizonzy", "name": "\u8d75\u5ef6"}}, "url": "https://github.com/alibaba/nacos/commit/160dfda5c3d76c23d05a0109ac5bd2b5eef21325", "committedDate": "2020-12-17T04:37:56Z", "message": "Merge pull request #6 from jzhishu/fix-3917\n\n\u53d8\u52a8\u66f4\u65b0\u5230\u6253\u5305\u540e\u7684mian.js"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU2MDk1OTI5", "url": "https://github.com/alibaba/nacos/pull/4439#pullrequestreview-556095929", "createdAt": "2020-12-21T02:19:30Z", "commit": {"oid": "160dfda5c3d76c23d05a0109ac5bd2b5eef21325"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4054, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}