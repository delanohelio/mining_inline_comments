{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg5NTkwMjk4", "number": 747, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQxOTo1ODo0NlrOEnMsnw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQyMDowNTozOFrOEnM1lQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA5NTM3OTUxOnYy", "diffSide": "RIGHT", "path": "ppl/src/main/java/com/amazon/opendistroforelasticsearch/sql/ppl/parser/AstExpressionBuilder.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQxOTo1ODo0NlrOHXqikQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQyMDoyMjoyMlrOHXrRUQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDU3NjI3Mw==", "bodyText": "np: we can label the alternatives in rule (ex. | keywordsCanBeId  #keywordId) and move this to individual method generated.", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/747#discussion_r494576273", "createdAt": "2020-09-24T19:58:46Z", "author": {"login": "dai-chen"}, "path": "ppl/src/main/java/com/amazon/opendistroforelasticsearch/sql/ppl/parser/AstExpressionBuilder.java", "diffHunk": "@@ -191,6 +191,9 @@ public UnresolvedExpression visitEvalFunctionCall(EvalFunctionCallContext ctx) {\n    */\n   @Override\n   public UnresolvedExpression visitQualifiedName(QualifiedNameContext ctx) {\n+    if (ctx.keywordsCanBeId() != null) {\n+      return new QualifiedName(ctx.keywordsCanBeId().getText());\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "814889428c6812cee16faf812c1cd1b2fd1e2fa6"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDU4ODI0MQ==", "bodyText": "Yes we can, that introduces more changes so I didn't add label. But yes I can use label since it makes code more readable", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/747#discussion_r494588241", "createdAt": "2020-09-24T20:22:22Z", "author": {"login": "chloe-zh"}, "path": "ppl/src/main/java/com/amazon/opendistroforelasticsearch/sql/ppl/parser/AstExpressionBuilder.java", "diffHunk": "@@ -191,6 +191,9 @@ public UnresolvedExpression visitEvalFunctionCall(EvalFunctionCallContext ctx) {\n    */\n   @Override\n   public UnresolvedExpression visitQualifiedName(QualifiedNameContext ctx) {\n+    if (ctx.keywordsCanBeId() != null) {\n+      return new QualifiedName(ctx.keywordsCanBeId().getText());\n+    }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDU3NjI3Mw=="}, "originalCommit": {"oid": "814889428c6812cee16faf812c1cd1b2fd1e2fa6"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA5NTM5NDU4OnYy", "diffSide": "RIGHT", "path": "sql/src/main/antlr/OpenDistroSQLIdentifierParser.g4", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQyMDowMzowN1rOHXqraA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQyMjozNjoyNlrOHXu60Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDU3ODUzNg==", "bodyText": "Can we also add functionNameBase here as before? https://github.com/opendistro-for-elasticsearch/sql/blob/master/legacy/src/main/antlr/OpenDistroSqlParser.g4#L237. Although this is a separate g4 file, I guess it may have access to rules in parent g4.", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/747#discussion_r494578536", "createdAt": "2020-09-24T20:03:07Z", "author": {"login": "dai-chen"}, "path": "sql/src/main/antlr/OpenDistroSQLIdentifierParser.g4", "diffHunk": "@@ -44,10 +44,18 @@ alias\n \n qualifiedName\n     : ident (DOT ident)*\n+    | keywordsCanBeId", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "814889428c6812cee16faf812c1cd1b2fd1e2fa6"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDU5MTkxNw==", "bodyText": "It looks like it cannot read the functionNameBase so I added them separately. Do they have heritance relation, I only see OpenDistroSQLParser imports Identifier parser file", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/747#discussion_r494591917", "createdAt": "2020-09-24T20:29:33Z", "author": {"login": "chloe-zh"}, "path": "sql/src/main/antlr/OpenDistroSQLIdentifierParser.g4", "diffHunk": "@@ -44,10 +44,18 @@ alias\n \n qualifiedName\n     : ident (DOT ident)*\n+    | keywordsCanBeId", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDU3ODUzNg=="}, "originalCommit": {"oid": "814889428c6812cee16faf812c1cd1b2fd1e2fa6"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDY0ODAxNw==", "bodyText": "I see. Thanks!", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/747#discussion_r494648017", "createdAt": "2020-09-24T22:36:26Z", "author": {"login": "dai-chen"}, "path": "sql/src/main/antlr/OpenDistroSQLIdentifierParser.g4", "diffHunk": "@@ -44,10 +44,18 @@ alias\n \n qualifiedName\n     : ident (DOT ident)*\n+    | keywordsCanBeId", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDU3ODUzNg=="}, "originalCommit": {"oid": "814889428c6812cee16faf812c1cd1b2fd1e2fa6"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA5NTQwMjQ1OnYy", "diffSide": "LEFT", "path": "sql-jdbc/src/main/java/com/amazon/opendistroforelasticsearch/jdbc/types/ElasticsearchType.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQyMDowNTozOFrOHXqwYA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQyMDozNDo1MFrOHXrq6w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDU3OTgwOA==", "bodyText": "Are the changes in UT meant for this? I can see we're changing date type in test data and code to timestamp in UT?", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/747#discussion_r494579808", "createdAt": "2020-09-24T20:05:38Z", "author": {"login": "dai-chen"}, "path": "sql-jdbc/src/main/java/com/amazon/opendistroforelasticsearch/jdbc/types/ElasticsearchType.java", "diffHunk": "@@ -72,7 +72,7 @@\n     IP(JDBCType.VARCHAR, String.class, 15, 0, false),\n     NESTED(JDBCType.STRUCT, null, 0, 0, false),\n     OBJECT(JDBCType.STRUCT, null, 0, 0, false),\n-    DATE(JDBCType.TIMESTAMP, Timestamp.class, 24, 24, false),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "814889428c6812cee16faf812c1cd1b2fd1e2fa6"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDU5NDc5NQ==", "bodyText": "Yes, all timestamp type were taken as date type in JDBC, here it's corrected back to timestamp and so are the UTs", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/747#discussion_r494594795", "createdAt": "2020-09-24T20:34:50Z", "author": {"login": "chloe-zh"}, "path": "sql-jdbc/src/main/java/com/amazon/opendistroforelasticsearch/jdbc/types/ElasticsearchType.java", "diffHunk": "@@ -72,7 +72,7 @@\n     IP(JDBCType.VARCHAR, String.class, 15, 0, false),\n     NESTED(JDBCType.STRUCT, null, 0, 0, false),\n     OBJECT(JDBCType.STRUCT, null, 0, 0, false),\n-    DATE(JDBCType.TIMESTAMP, Timestamp.class, 24, 24, false),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDU3OTgwOA=="}, "originalCommit": {"oid": "814889428c6812cee16faf812c1cd1b2fd1e2fa6"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2035, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}