{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE4NzY1NDY5", "number": 812, "title": "Migrate Query Workbench to new Platform ", "bodyText": "Issue #, if available:\nN/A\nDescription of changes:\n\nMigrated query workbench to new Kibana platform.\n\nRefactored server routes and removed sql_console.css in place of scss\nRemoved <Header /> from Main\nChanged response type of backend services to return custom vs ResponseToolkit object\nChanged input type of backend services to intake single queryString parameter\n\n\n\nBy submitting this pull request, I confirm that my contribution is made under the terms of the Apache 2.0 license.", "createdAt": "2020-11-10T21:09:20Z", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/812", "merged": true, "mergeCommit": {"oid": "2be1590732776e7a333223193715f40c1c80ac8a"}, "closed": true, "closedAt": "2020-11-11T20:05:42Z", "author": {"login": "davidcui1225"}, "timelineItems": {"totalCount": 17, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABda6cQ_AH2gAyNTE4NzY1NDY5OmIyYTdjYmU0YzViYTNmZGViYzZkNGFiNjg5YjU3YjM2OTliYTY1ZDE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdbjdvQgFqTUyODQ4NzM5Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b2a7cbe4c5ba3fdebc6d4ab689b57b3699ba65d1", "author": {"user": {"login": "davidcui1225", "name": "David Cui"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/b2a7cbe4c5ba3fdebc6d4ab689b57b3699ba65d1", "committedDate": "2020-11-09T20:04:38Z", "message": "initial commit for new platform- save progress on server migration"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2cab346cd09e890d3a582750d6bb8c7eb638347c", "author": {"user": {"login": "davidcui1225", "name": "David Cui"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/2cab346cd09e890d3a582750d6bb8c7eb638347c", "committedDate": "2020-11-09T23:12:07Z", "message": "requests being made now, need to create request body correctly"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5053b32d1fbbe5aaa0bc5c16ff22644119048b63", "author": {"user": {"login": "davidcui1225", "name": "David Cui"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/5053b32d1fbbe5aaa0bc5c16ff22644119048b63", "committedDate": "2020-11-09T23:47:31Z", "message": "saving progress, need to send correct response format to client"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dbe75214168842b32c3e5d43cf6c7ec15dcec6e4", "author": {"user": {"login": "davidcui1225", "name": "David Cui"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/dbe75214168842b32c3e5d43cf6c7ec15dcec6e4", "committedDate": "2020-11-10T01:29:33Z", "message": "sql and ppl queries working- csv not"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d4ffdd8b588e2f016e7488d753b6729c7207a3cf", "author": {"user": {"login": "davidcui1225", "name": "David Cui"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/d4ffdd8b588e2f016e7488d753b6729c7207a3cf", "committedDate": "2020-11-10T01:58:58Z", "message": "removed header, added ppl json and ppl csv"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3cd895452a193ceb173e354fa11daaeecacd9943", "author": {"user": {"login": "davidcui1225", "name": "David Cui"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/3cd895452a193ceb173e354fa11daaeecacd9943", "committedDate": "2020-11-10T02:33:22Z", "message": "added all routes for query, removed comments from query.ts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b43b7b799eafd18229d96abf497723c0fb6ae2f4", "author": {"user": {"login": "davidcui1225", "name": "David Cui"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/b43b7b799eafd18229d96abf497723c0fb6ae2f4", "committedDate": "2020-11-10T18:01:33Z", "message": "saving progress, converting translate queries"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2526541e52ce0f1e6f83fbe67048e85b7805147a", "author": {"user": {"login": "davidcui1225", "name": "David Cui"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/2526541e52ce0f1e6f83fbe67048e85b7805147a", "committedDate": "2020-11-10T19:02:56Z", "message": "server migration done, css pending before PR"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bbad2626ab9425518e1c370ddde4eb5fee6a9590", "author": {"user": {"login": "davidcui1225", "name": "David Cui"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/bbad2626ab9425518e1c370ddde4eb5fee6a9590", "committedDate": "2020-11-10T19:35:31Z", "message": "fixed sidebar placement name and url"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f0a9f66567da9859fcd42995249cae199422c7a4", "author": {"user": {"login": "davidcui1225", "name": "David Cui"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/f0a9f66567da9859fcd42995249cae199422c7a4", "committedDate": "2020-11-10T19:48:02Z", "message": "checking responsive width on dev, saving progress"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ca64d6c31e594779745060b5f031e2f42478ca7c", "author": {"user": {"login": "davidcui1225", "name": "David Cui"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/ca64d6c31e594779745060b5f031e2f42478ca7c", "committedDate": "2020-11-10T20:48:43Z", "message": "got rid of horizontal line, deleted old index.js and css file"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e2b16484c0c63036931796c393370cdfb5e13781", "author": {"user": {"login": "davidcui1225", "name": "David Cui"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/e2b16484c0c63036931796c393370cdfb5e13781", "committedDate": "2020-11-10T21:05:48Z", "message": "removed comments and ran through yarn prettier"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI3ODc4Mzcy", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/812#pullrequestreview-527878372", "createdAt": "2020-11-11T05:48:18Z", "commit": {"oid": "e2b16484c0c63036931796c393370cdfb5e13781"}, "state": "COMMENTED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQwNTo0ODoxOFrOHw_DsQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQwNTo1OToxMFrOHw_Puw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTEyNjgzMw==", "bodyText": "Missing license header? and should the id be something like opendistroQueryWorkbench?", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/812#discussion_r521126833", "createdAt": "2020-11-11T05:48:18Z", "author": {"login": "joshuali925"}, "path": "workbench/common/index.ts", "diffHunk": "@@ -0,0 +1,2 @@\n+export const PLUGIN_ID = 'workbench';", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e2b16484c0c63036931796c393370cdfb5e13781"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTEyNzAyMQ==", "bodyText": "if you change PLUGIN_ID in common/index.ts, update this as well", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/812#discussion_r521127021", "createdAt": "2020-11-11T05:49:05Z", "author": {"login": "joshuali925"}, "path": "workbench/kibana.json", "diffHunk": "@@ -0,0 +1,8 @@\n+{\n+  \"id\": \"workbench\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e2b16484c0c63036931796c393370cdfb5e13781"}, "originalPosition": 2}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTEyNzU5Ng==", "bodyText": "httpClient: CoreStart['http']?", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/812#discussion_r521127596", "createdAt": "2020-11-11T05:50:56Z", "author": {"login": "joshuali925"}, "path": "workbench/public/components/Main/main.tsx", "diffHunk": "@@ -64,7 +64,7 @@ export type ItemIdToExpandedRowMap = {\n };\n \n interface MainProps {\n-  httpClient: IHttpService;\n+  httpClient: any;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e2b16484c0c63036931796c393370cdfb5e13781"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTEyNzYwOA==", "bodyText": "httpClient: CoreStart['http']?", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/812#discussion_r521127608", "createdAt": "2020-11-11T05:51:00Z", "author": {"login": "joshuali925"}, "path": "workbench/public/components/Main/main.tsx", "diffHunk": "@@ -181,8 +181,7 @@ export function getQueryResultsForTable(queryResults: ResponseDetail<string>[]):\n }\n \n export class Main extends React.Component<MainProps, MainState> {\n-  httpClient: IHttpService;\n-  // httpClient: any;\n+  httpClient: any;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e2b16484c0c63036931796c393370cdfb5e13781"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTEyODAwMw==", "bodyText": "what's this empty function onChange? I don't see it being used in Main, you can try removing it in MainProps", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/812#discussion_r521128003", "createdAt": "2020-11-11T05:52:22Z", "author": {"login": "joshuali925"}, "path": "workbench/public/components/app.tsx", "diffHunk": "@@ -0,0 +1,53 @@\n+/*\n+ *   Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ *   Licensed under the Apache License, Version 2.0 (the \"License\").\n+ *   You may not use this file except in compliance with the License.\n+ *   A copy of the License is located at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *   or in the \"license\" file accompanying this file. This file is distributed\n+ *   on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ *   express or implied. See the License for the specific language governing\n+ *   permissions and limitations under the License.\n+ */\n+\n+import React from 'react';\n+import { I18nProvider } from '@kbn/i18n/react';\n+import { BrowserRouter as Router, Route } from 'react-router-dom';\n+\n+import { EuiPage, EuiPageBody } from '@elastic/eui';\n+\n+import { CoreStart } from '../../../../src/core/public';\n+import { NavigationPublicPluginStart } from '../../../../src/plugins/navigation/public';\n+\n+import { Main } from './Main';\n+\n+interface WorkbenchAppDeps {\n+  basename: string;\n+  notifications: CoreStart['notifications'];\n+  http: CoreStart['http'];\n+  navigation: NavigationPublicPluginStart;\n+}\n+\n+const onChange = () => {};\n+\n+export const WorkbenchApp = ({ basename, notifications, http, navigation }: WorkbenchAppDeps) => {\n+  return (\n+    <Router basename={'/' + basename}>\n+      <I18nProvider>\n+        <div>\n+          <EuiPage>\n+            <EuiPageBody>\n+              <Route\n+                path=\"/\"\n+                render={(props) => <Main httpClient={http} {...props} onChange={onChange} />}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e2b16484c0c63036931796c393370cdfb5e13781"}, "originalPosition": 45}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTEyOTkxNQ==", "bodyText": "Question, why do we need global variable? and why do we need to concatenate queries?", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/812#discussion_r521129915", "createdAt": "2020-11-11T05:59:10Z", "author": {"login": "joshuali925"}, "path": "workbench/server/services/utils/constants.ts", "diffHunk": "@@ -32,3 +34,12 @@ export const CLUSTER = {\n   SQL: 'opendistro_sql',\n   DATA: 'data',\n };\n+\n+export const convertQueryToString = (query: string | ParsedUrlQuery) => {\n+  let index;\n+  var queryString = \"\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e2b16484c0c63036931796c393370cdfb5e13781"}, "originalPosition": 16}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5418ff31aae0e6da0e0922870b1aeb2eea72b289", "author": {"user": {"login": "davidcui1225", "name": "David Cui"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/5418ff31aae0e6da0e0922870b1aeb2eea72b289", "committedDate": "2020-11-11T17:34:24Z", "message": "addressed comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI4NDU1MTE1", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/812#pullrequestreview-528455115", "createdAt": "2020-11-11T19:04:10Z", "commit": {"oid": "5418ff31aae0e6da0e0922870b1aeb2eea72b289"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ce769ae7a842863b8d85473e491ba06b3abf3b1a", "author": {"user": {"login": "davidcui1225", "name": "David Cui"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/ce769ae7a842863b8d85473e491ba06b3abf3b1a", "committedDate": "2020-11-11T19:27:08Z", "message": "addressed more comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI4NDg3Mzk2", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/812#pullrequestreview-528487396", "createdAt": "2020-11-11T19:52:21Z", "commit": {"oid": "ce769ae7a842863b8d85473e491ba06b3abf3b1a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 552, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}