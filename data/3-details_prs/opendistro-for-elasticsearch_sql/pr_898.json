{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM0MTQ4NDAy", "number": 898, "title": "Fix for ExprValueFactory construct issue", "bodyText": "Issue #858, #867\nDescription of changes:\n\nadded date, time, and datetime in ExprValueFactory\nadded unit tests\nadded manual integration tests (SQLite returned the wrong type in a schema and the comparison test failed).\n\nBy submitting this pull request, I confirm that my contribution is made under the terms of the Apache 2.0 license.", "createdAt": "2020-12-08T06:06:25Z", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/898", "merged": true, "mergeCommit": {"oid": "0cda05cd5155f13d2225f4e1c625409919c7832f"}, "closed": true, "closedAt": "2020-12-08T21:13:45Z", "author": {"login": "rupal-bq"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdinVoTgH2gAyNTM0MTQ4NDAyOmZlMDJlY2UzNTUwM2JjMjlhZTNhOWQwZDZlYTliYzY5MWRkODllMDg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdkQz1-gFqTU0NzYzNjg1NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "fe02ece35503bc29ae3a9d0d6ea9bc691dd89e08", "author": {"user": null}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/fe02ece35503bc29ae3a9d0d6ea9bc691dd89e08", "committedDate": "2020-12-03T18:20:35Z", "message": "add date & time"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9f9c29dd88e016a76c6c51e69672135c494b9f5d", "author": {"user": null}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/9f9c29dd88e016a76c6c51e69672135c494b9f5d", "committedDate": "2020-12-07T19:22:38Z", "message": "Merge branch 'develop' of https://github.com/rupal-bq/sql into expr-value-construct"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d996cd13c28e86a271e25e2b67e6e679a0072c5f", "author": {"user": null}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/d996cd13c28e86a271e25e2b67e6e679a0072c5f", "committedDate": "2020-12-07T20:18:03Z", "message": "add datetime"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5982c091eab3ef8493a29fe1b179669694efc69b", "author": {"user": null}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/5982c091eab3ef8493a29fe1b179669694efc69b", "committedDate": "2020-12-07T22:08:03Z", "message": "try comparison test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0eebbf9fcfddfb2512521185dc56349e667d3316", "author": {"user": null}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/0eebbf9fcfddfb2512521185dc56349e667d3316", "committedDate": "2020-12-07T23:01:40Z", "message": "add manual IT"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "103862ade6bec3ff509db419e4d0e8c746dd7632", "author": {"user": null}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/103862ade6bec3ff509db419e4d0e8c746dd7632", "committedDate": "2020-12-08T18:44:44Z", "message": "add integration test for issue #867"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ3NjE2MDY2", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/898#pullrequestreview-547616066", "createdAt": "2020-12-08T20:47:38Z", "commit": {"oid": "103862ade6bec3ff509db419e4d0e8c746dd7632"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ3NjI5NTgz", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/898#pullrequestreview-547629583", "createdAt": "2020-12-08T21:02:55Z", "commit": {"oid": "103862ade6bec3ff509db419e4d0e8c746dd7632"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQyMTowMjo1NVrOIB2FPg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQyMTowMjo1NVrOIB2FPg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODgwNTU2Ng==", "bodyText": "Quesiton,  In which case the field will in type of DATA/TIME/DATETIME?\nThe main purpose of ExprValueFactory is extract data from Elasticsearch response. Elasticsearch only support date type and it is mapped to TIMESTAMP.", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/898#discussion_r538805566", "createdAt": "2020-12-08T21:02:55Z", "author": {"login": "penghuo"}, "path": "elasticsearch/src/main/java/com/amazon/opendistroforelasticsearch/sql/elasticsearch/data/value/ElasticsearchExprValueFactory.java", "diffHunk": "@@ -177,14 +183,22 @@ public ExprValue construct(String field, Object value) {\n       return constructString((String) value);\n     } else if (type.equals(BOOLEAN)) {\n       return constructBoolean((Boolean) value);\n-    } else if (type.equals(TIMESTAMP)) {\n+    } else if (type.equals(TIMESTAMP) || type.equals(DATE) || type.equals(TIME)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "103862ade6bec3ff509db419e4d0e8c746dd7632"}, "originalPosition": 38}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ3NjM2ODU0", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/898#pullrequestreview-547636854", "createdAt": "2020-12-08T21:13:37Z", "commit": {"oid": "103862ade6bec3ff509db419e4d0e8c746dd7632"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 583, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}