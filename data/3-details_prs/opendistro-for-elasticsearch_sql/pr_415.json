{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAwOTk3Mjcy", "number": 415, "title": "[PPL] add basic parser support", "bodyText": "Description of changes\nSpring\nintegrate with Spring IOC\nPPL\n\nadd the basic ANTLR\nadd the parser\n\nelasticsearch\n\nadd the new module for elasticsearch related operation.\n\ncommon\n\nadd the common module for shard utils.\n\nBy submitting this pull request, I confirm that my contribution is made under the terms of the Apache 2.0 license.", "createdAt": "2020-04-08T18:04:23Z", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/415", "merged": true, "mergeCommit": {"oid": "13f8b85ae00269d2fd673ac330a0d336d2e5627a"}, "closed": true, "closedAt": "2020-04-08T22:41:22Z", "author": {"login": "penghuo"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcVrqysgH2gAyNDAwOTk3MjcyOjMwYWQ2ZGI4NjkzZmJlODcwY2Y4MGE2NGUyNGZmNDkzMWU5MjliOWM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcVvnyGgH2gAyNDAwOTk3MjcyOmZkODg0NTlkYWM2YmRkYmZjMTEwMjMzMjk1Mzk2MzhiOGMxOGJjNjY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "30ad6db8693fbe870cf80a64e24ff4931e929b9c", "author": {"user": {"login": "penghuo", "name": "Peng Huo"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/30ad6db8693fbe870cf80a64e24ff4931e929b9c", "committedDate": "2020-04-08T17:51:09Z", "message": "[PPL] add basic parser support"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkwMjMxODAz", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/415#pullrequestreview-390231803", "createdAt": "2020-04-08T18:36:15Z", "commit": {"oid": "30ad6db8693fbe870cf80a64e24ff4931e929b9c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkwMzEyMDQy", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/415#pullrequestreview-390312042", "createdAt": "2020-04-08T20:36:04Z", "commit": {"oid": "30ad6db8693fbe870cf80a64e24ff4931e929b9c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkwMzI2MDYz", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/415#pullrequestreview-390326063", "createdAt": "2020-04-08T20:57:01Z", "commit": {"oid": "30ad6db8693fbe870cf80a64e24ff4931e929b9c"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQyMDo1NzowMlrOGDArww==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQyMDo1NzowMlrOGDArww==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTgxMDExNQ==", "bodyText": "Just curious, is this privilege call required for all classes annotated by Spring annotation?", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/415#discussion_r405810115", "createdAt": "2020-04-08T20:57:02Z", "author": {"login": "dai-chen"}, "path": "plugin/src/main/java/com/amazon/opendistroforelasticsearch/sql/plugin/rest/RestPPLQueryAction.java", "diffHunk": "@@ -44,17 +48,23 @@ public String getName() {\n \n     @Override\n     protected RestChannelConsumer prepareRequest(RestRequest request, NodeClient client) throws IOException {\n-        PPLService pplService = new PPLService();\n-        return channel -> pplService.execute(new PPLQueryRequest(), new ResponseListener<PPLQueryResponse>() {\n-            @Override\n-            public void onResponse(PPLQueryResponse pplQueryResponse) {\n-                channel.sendResponse(new BytesRestResponse(OK, \"application/json; charset=UTF-8\", \"ok\"));\n-            }\n-\n-            @Override\n-            public void onFailure(Exception e) {\n-                channel.sendResponse(new BytesRestResponse(OK, \"application/json; charset=UTF-8\", \"error\"));\n-            }\n-        });\n+        AnnotationConfigApplicationContext context = SecurityAccess.doPrivileged(\n+                () -> new AnnotationConfigApplicationContext(\n+                        PPLServiceConfig.class));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "30ad6db8693fbe870cf80a64e24ff4931e929b9c"}, "originalPosition": 42}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fd88459dac6bddbfc11023329539638b8c18bc66", "author": {"user": {"login": "penghuo", "name": "Peng Huo"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/fd88459dac6bddbfc11023329539638b8c18bc66", "committedDate": "2020-04-08T22:27:29Z", "message": "Reduce the permission by removing java.security.AllPermission"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 773, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}