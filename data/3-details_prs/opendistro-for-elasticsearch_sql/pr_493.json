{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIzNTQ3NDk1", "number": 493, "title": "[PPL] Support Count aggregator and OR operator", "bodyText": "Issue #, if available:\nDescription of changes:\nBy submitting this pull request, I confirm that my contribution is made under the terms of the Apache 2.0 license.", "createdAt": "2020-05-27T01:11:16Z", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/493", "merged": true, "mergeCommit": {"oid": "1c16f2f90495e42952f6b9fa56a4d49b5f67eb4f"}, "closed": true, "closedAt": "2020-05-28T18:42:19Z", "author": {"login": "penghuo"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABclOtVUAH2gAyNDIzNTQ3NDk1OjhiYmFiMWFkN2RlOWIyZWMwODRmN2NkZjgxOTI1NjZjZWQ1ZjRmMjg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABclyR0oAFqTQyMDM4NTMzMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "8bbab1ad7de9b2ec084f7cdf8192566ced5f4f28", "author": {"user": {"login": "penghuo", "name": "Peng Huo"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/8bbab1ad7de9b2ec084f7cdf8192566ced5f4f28", "committedDate": "2020-05-27T01:09:28Z", "message": "[PPL] Support Count aggregator and OR operator"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5MzkzNTAz", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/493#pullrequestreview-419393503", "createdAt": "2020-05-27T16:18:42Z", "commit": {"oid": "8bbab1ad7de9b2ec084f7cdf8192566ced5f4f28"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxNjoxODo0M1rOGbSu2Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxNjo1MjozMVrOGbUIog==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTI3MTY0MQ==", "bodyText": "Is this meant for JavaDoc on CountAggregator ?", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/493#discussion_r431271641", "createdAt": "2020-05-27T16:18:43Z", "author": {"login": "dai-chen"}, "path": "core/src/main/java/com/amazon/opendistroforelasticsearch/sql/expression/aggregation/AvgAggregator.java", "diffHunk": "@@ -29,7 +29,7 @@\n import static com.amazon.opendistroforelasticsearch.sql.utils.ExpressionUtils.format;\n \n /**\n- * The average aggregator aggregate the value evaluated by the expression.\n+ * The count aggregator aggregate the value evaluated by the expression.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8bbab1ad7de9b2ec084f7cdf8192566ced5f4f28"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTI5NDYyNg==", "bodyText": "Np: since the only difference is input type, this can be simplified into a for loop on input type array.", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/493#discussion_r431294626", "createdAt": "2020-05-27T16:52:31Z", "author": {"login": "dai-chen"}, "path": "core/src/main/java/com/amazon/opendistroforelasticsearch/sql/expression/aggregation/AggregatorFunction.java", "diffHunk": "@@ -54,6 +55,31 @@ private static FunctionResolver avg() {\n         );\n     }\n \n+    private static FunctionResolver count() {\n+        FunctionName functionName = BuiltinFunctionName.COUNT.getName();\n+        return new FunctionResolver(\n+            functionName,\n+            new ImmutableMap.Builder<FunctionSignature, FunctionBuilder>()\n+                .put(new FunctionSignature(functionName, Collections.singletonList(ExprType.INTEGER)),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8bbab1ad7de9b2ec084f7cdf8192566ced5f4f28"}, "originalPosition": 17}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5dd2845ca29352a40cf43287640ba27bc7c4a6de", "author": {"user": {"login": "penghuo", "name": "Peng Huo"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/5dd2845ca29352a40cf43287640ba27bc7c4a6de", "committedDate": "2020-05-27T20:51:57Z", "message": "address comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIwMzg1MTA2", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/493#pullrequestreview-420385106", "createdAt": "2020-05-28T18:35:40Z", "commit": {"oid": "5dd2845ca29352a40cf43287640ba27bc7c4a6de"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIwMzg1MzMy", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/493#pullrequestreview-420385332", "createdAt": "2020-05-28T18:36:00Z", "commit": {"oid": "5dd2845ca29352a40cf43287640ba27bc7c4a6de"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 687, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}