{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMyNzcxNTYz", "number": 516, "title": "[PPL] Add PPL documentation.", "bodyText": "To reviewer:\nPlease refer the generated documentation. The documentation. https://github.com/penghuo/sql/blob/ppl-doc/docs/experiment/ppl/index.rst\nDescription of changes:\n\nAdd PPL documentation.\n2.Remove sample documentation.\n\nBy submitting this pull request, I confirm that my contribution is made under the terms of the Apache 2.0 license.", "createdAt": "2020-06-11T00:25:25Z", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/516", "merged": true, "mergeCommit": {"oid": "7d53d8200395e9369b64b90ed960926341f3c150"}, "closed": true, "closedAt": "2020-06-12T22:54:18Z", "author": {"login": "penghuo"}, "timelineItems": {"totalCount": 17, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcpwia6gH2gAyNDMyNzcxNTYzOmVhNjlkMjI4ZGM0OTAzMGU2ZGU0Yzg0YWMxOWZlMTg3MzY3MzRhMDg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcqpiDKAFqTQzMDA0MTI1Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "ea69d228dc49030e6de4c84ac19fe18736734a08", "author": {"user": {"login": "penghuo", "name": "Peng Huo"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/ea69d228dc49030e6de4c84ac19fe18736734a08", "committedDate": "2020-06-10T02:50:01Z", "message": "add interface"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0ec0f77b3eca71ed75c06a3195ea0014b78d5154", "author": {"user": {"login": "penghuo", "name": "Peng Huo"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/0ec0f77b3eca71ed75c06a3195ea0014b78d5154", "committedDate": "2020-06-10T02:59:21Z", "message": "update"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "969f743b8f800226ec826a2da56fe9800233c758", "author": {"user": {"login": "penghuo", "name": "Peng Huo"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/969f743b8f800226ec826a2da56fe9800233c758", "committedDate": "2020-06-10T03:54:52Z", "message": "search command"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a53a1912ddbf9e25d8cdfb0b552881a127b179c7", "author": {"user": {"login": "penghuo", "name": "Peng Huo"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/a53a1912ddbf9e25d8cdfb0b552881a127b179c7", "committedDate": "2020-06-10T20:40:02Z", "message": "add dedup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "985d4de62f57332fecb659b50698aaea0a26f6fa", "author": {"user": {"login": "penghuo", "name": "Peng Huo"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/985d4de62f57332fecb659b50698aaea0a26f6fa", "committedDate": "2020-06-10T23:15:55Z", "message": "update commands"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fb70191fa57bd9014b900c47240d87c6f799c2e4", "author": {"user": {"login": "penghuo", "name": "Peng Huo"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/fb70191fa57bd9014b900c47240d87c6f799c2e4", "committedDate": "2020-06-10T23:31:11Z", "message": "update syntax"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ead0201a05526c57848e6615ff520555ae977fc0", "author": {"user": {"login": "penghuo", "name": "Peng Huo"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/ead0201a05526c57848e6615ff520555ae977fc0", "committedDate": "2020-06-11T00:18:20Z", "message": "wording"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b7cc8f38a1b3a313964962769ac8f232afe35deb", "author": {"user": {"login": "penghuo", "name": "Peng Huo"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/b7cc8f38a1b3a313964962769ac8f232afe35deb", "committedDate": "2020-06-11T00:23:41Z", "message": "remove sample"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI5NDUwODI5", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/516#pullrequestreview-429450829", "createdAt": "2020-06-12T04:18:28Z", "commit": {"oid": "b7cc8f38a1b3a313964962769ac8f232afe35deb"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQwNDoxODoyOVrOGi2ilA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQwNDoyNzo1MFrOGi2qMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTE5ODM1Ng==", "bodyText": "What about removing example 3 or merging example 3 & 4 to one example by making 3 as the comparison case?", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/516#discussion_r439198356", "createdAt": "2020-06-12T04:18:29Z", "author": {"login": "chloe-zh"}, "path": "docs/experiment/ppl/cmd/dedup.rst", "diffHunk": "@@ -0,0 +1,112 @@\n+=============\n+dedup\n+=============\n+\n+.. rubric:: Table of contents\n+\n+.. contents::\n+   :local:\n+   :depth: 2\n+\n+\n+Description\n+============\n+| Using ``dedup`` command to remove identical document defined by field from the search result.\n+\n+\n+Syntax\n+============\n+dedup [int] <field-list> [keepempty=<bool>] [consecutive=<bool>]\n+\n+\n+* int: optional. The ``dedup`` command retains multiple events for each combination when you specify <int>. The number for <int> must be greater than 0. If you do not specify a number, only the first occurring event is kept. All other duplicates are removed from the results. **Default:** 1\n+* keepempty: optional. if true, keep the document if the any field in the field-list has NULL value or field is MISSING. **Default:** false.\n+* consecutive: optional. If set to true, removes only events with duplicate combinations of values that are consecutive. **Default:** false.\n+* field-list: mandatory. The comma-delimited field list. At least one field is required.\n+\n+\n+Example 1: Dedup by one field\n+=============================\n+\n+The example show dedup the document with gender field.\n+\n+PPL query::\n+\n+    od> source=accounts | dedup gender | fields account_number, gender;\n+    fetched rows / total rows = 2/2\n+    +------------------+----------+\n+    | account_number   | gender   |\n+    |------------------+----------|\n+    | 1                | M        |\n+    | 13               | F        |\n+    +------------------+----------+\n+\n+Example 2: Keep 2 duplicates documents\n+======================================\n+\n+The example show dedup the document with gender field keep 2 duplication.\n+\n+PPL query::\n+\n+    od> source=accounts | dedup 2 gender | fields account_number, gender;\n+    fetched rows / total rows = 3/3\n+    +------------------+----------+\n+    | account_number   | gender   |\n+    |------------------+----------|\n+    | 1                | M        |\n+    | 6                | M        |\n+    | 13               | F        |\n+    +------------------+----------+\n+\n+Example 3: Ignore the empty field by default\n+============================================\n+\n+The example show dedup the document by ignore the empty value field.\n+\n+PPL query::\n+\n+    od> source=accounts | dedup email | fields account_number, email;\n+    fetched rows / total rows = 3/3\n+    +------------------+-----------------------+\n+    | account_number   | email                 |\n+    |------------------+-----------------------|\n+    | 1                | amberduke@pyrami.com  |\n+    | 6                | hattiebond@netagy.com |\n+    | 18               | daleadams@boink.com   |\n+    +------------------+-----------------------+\n+\n+Example 4: Keep the empty field\n+===============================\n+\n+The example show dedup the document by keep null value field.\n+\n+PPL query::\n+\n+    od> source=accounts | dedup email keepempty=true | fields account_number, email;\n+    fetched rows / total rows = 4/4\n+    +------------------+-----------------------+\n+    | account_number   | email                 |\n+    |------------------+-----------------------|\n+    | 1                | amberduke@pyrami.com  |\n+    | 6                | hattiebond@netagy.com |\n+    | 13               | null                  |\n+    | 18               | daleadams@boink.com   |\n+    +------------------+-----------------------+\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b7cc8f38a1b3a313964962769ac8f232afe35deb"}, "originalPosition": 95}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTIwMDExOA==", "bodyText": "Maybe we should also put the rule (that search command is mandatory and used as the first command) in syntax.rst so that users can get to know it more straightforward", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/516#discussion_r439200118", "createdAt": "2020-06-12T04:27:00Z", "author": {"login": "chloe-zh"}, "path": "docs/experiment/ppl/cmd/search.rst", "diffHunk": "@@ -0,0 +1,59 @@\n+=============\n+search\n+=============\n+\n+.. rubric:: Table of contents\n+\n+.. contents::\n+   :local:\n+   :depth: 2\n+\n+\n+Description\n+============\n+| Using ``search`` command to retrieve document from the index. ``search`` command could be only used as the first command in the PPL query.\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b7cc8f38a1b3a313964962769ac8f232afe35deb"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTIwMDMwNQ==", "bodyText": "Typo?", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/516#discussion_r439200305", "createdAt": "2020-06-12T04:27:50Z", "author": {"login": "chloe-zh"}, "path": "docs/experiment/ppl/cmd/syntax.rst", "diffHunk": "@@ -0,0 +1,19 @@\n+=============\n+rename", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b7cc8f38a1b3a313964962769ac8f232afe35deb"}, "originalPosition": 2}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "14f0f53134c181b37db81b67feb7b9895b8e5e3e", "author": {"user": {"login": "penghuo", "name": "Peng Huo"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/14f0f53134c181b37db81b67feb7b9895b8e5e3e", "committedDate": "2020-06-12T19:22:43Z", "message": "address comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "08265aebd84a63539d848d0ae8049305a4ec6cc1", "author": {"user": {"login": "penghuo", "name": "Peng Huo"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/08265aebd84a63539d848d0ae8049305a4ec6cc1", "committedDate": "2020-06-12T19:24:34Z", "message": "update"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI5OTg4MDg5", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/516#pullrequestreview-429988089", "createdAt": "2020-06-12T19:27:53Z", "commit": {"oid": "08265aebd84a63539d848d0ae8049305a4ec6cc1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQxOToyNzo1M1rOGjPWVw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQxOToyNzo1M1rOGjPWVw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTYwNDgyMw==", "bodyText": "np but reminder: #513 merged, rename command can be applied to multiple fields now", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/516#discussion_r439604823", "createdAt": "2020-06-12T19:27:53Z", "author": {"login": "chloe-zh"}, "path": "docs/experiment/ppl/cmd/rename.rst", "diffHunk": "@@ -0,0 +1,42 @@\n+=============\n+rename\n+=============\n+\n+.. rubric:: Table of contents\n+\n+.. contents::\n+   :local:\n+   :depth: 2\n+\n+\n+Description\n+============\n+| Using ``rename`` command to rename one in the search result.\n+\n+\n+Syntax\n+============\n+rename <source-field> AS <target-field>\n+\n+* source-field: mandatory. The name of the field you want to rename.\n+* field list: mandatory. The name you want to rename to.\n+\n+\n+Example 1: Rename one field\n+==============================================\n+\n+The example show rename one field.\n+\n+PPL query::\n+\n+    od> source=accounts | rename account_number as an | fields an;\n+    fetched rows / total rows = 4/4\n+    +------+\n+    | an   |\n+    |------|\n+    | 1    |\n+    | 6    |\n+    | 13   |\n+    | 18   |\n+    +------+\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "08265aebd84a63539d848d0ae8049305a4ec6cc1"}, "originalPosition": 42}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI5OTk4Mzgw", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/516#pullrequestreview-429998380", "createdAt": "2020-06-12T19:47:38Z", "commit": {"oid": "08265aebd84a63539d848d0ae8049305a4ec6cc1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3d8f0aa589dad469bf487d23ce1227e2bf43b857", "author": {"user": {"login": "penghuo", "name": "Peng Huo"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/3d8f0aa589dad469bf487d23ce1227e2bf43b857", "committedDate": "2020-06-12T20:45:35Z", "message": "update"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d7d6bb4e79bf8c4cbbc4e666c628a1f9a7b5cdf2", "author": {"user": {"login": "penghuo", "name": "Peng Huo"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/d7d6bb4e79bf8c4cbbc4e666c628a1f9a7b5cdf2", "committedDate": "2020-06-12T20:45:38Z", "message": "Merge branch 'develop' into ppl-doc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "02cefc2ab1e11599736f0f63f6e72261f4abf8d9", "author": {"user": {"login": "penghuo", "name": "Peng Huo"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/02cefc2ab1e11599736f0f63f6e72261f4abf8d9", "committedDate": "2020-06-12T20:50:36Z", "message": "add multiple fields description for rename"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMwMDQxMjU3", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/516#pullrequestreview-430041257", "createdAt": "2020-06-12T21:14:12Z", "commit": {"oid": "02cefc2ab1e11599736f0f63f6e72261f4abf8d9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 693, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}