{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzU5NzMwNzUw", "number": 335, "title": "Sql test bench", "bodyText": "Issue #, if available: #315\nDescription of changes: Added a test framework to perform comparison tests by running same test case set against different database implementations.\nDocumentation: https://github.com/dai-chen/sql/blob/sql-test-bench/docs/dev/Testing.md\nBy submitting this pull request, I confirm that my contribution is made under the terms of the Apache 2.0 license.", "createdAt": "2020-01-06T21:56:27Z", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/335", "merged": true, "mergeCommit": {"oid": "0685920fd405963ab21cd20caeecf5e24dfeb7f5"}, "closed": true, "closedAt": "2020-01-08T00:26:04Z", "author": {"login": "dai-chen"}, "timelineItems": {"totalCount": 46, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABbvzScAAH2gAyMzU5NzMwNzUwOmNlYTkwM2ZhNmMzYmYzMGI3ZWQ0Y2FkMzNlNDdiZTEyMGRlODUxOTc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb4I0LJgH2gAyMzU5NzMwNzUwOmQ4MWIxNjU0MzE5YjM4NWNjYTM4NGY1YjA5M2ZkNzY5MWZlYTJlYWE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "cea903fa6c3bf30b7ed4cad33e47be120de85197", "author": {"user": {"login": "dai-chen", "name": "Chen Dai"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/cea903fa6c3bf30b7ed4cad33e47be120de85197", "committedDate": "2019-12-13T01:14:40Z", "message": "Initial commit with clean code from PoC branch"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a69def24b8f53152d78c9456536300b24c6ea11f", "author": {"user": {"login": "dai-chen", "name": "Chen Dai"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/a69def24b8f53152d78c9456536300b24c6ea11f", "committedDate": "2019-12-16T19:54:25Z", "message": "Refactor code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "34d951ce64e70f874a60af69962c94600c7d3288", "author": {"user": {"login": "dai-chen", "name": "Chen Dai"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/34d951ce64e70f874a60af69962c94600c7d3288", "committedDate": "2019-12-17T01:30:21Z", "message": "Fix float number parse issue"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "68655bbca1d979b6d8e4535dae1101b213a66c27", "author": {"user": {"login": "dai-chen", "name": "Chen Dai"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/68655bbca1d979b6d8e4535dae1101b213a66c27", "committedDate": "2019-12-19T01:41:23Z", "message": "Fix sqlite memory db issue"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e3f06033b88315a8b28f4855e1ed431992b8b967", "author": {"user": {"login": "dai-chen", "name": "Chen Dai"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/e3f06033b88315a8b28f4855e1ed431992b8b967", "committedDate": "2019-12-19T18:51:38Z", "message": "Save reports"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "239ce2dc520d57de16a467124deeed3cb68e027f", "author": {"user": {"login": "dai-chen", "name": "Chen Dai"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/239ce2dc520d57de16a467124deeed3cb68e027f", "committedDate": "2019-12-26T23:06:14Z", "message": "Handle date type"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fba4a6cec617ffe1a1bb08d09204b26c370b0630", "author": {"user": {"login": "dai-chen", "name": "Chen Dai"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/fba4a6cec617ffe1a1bb08d09204b26c370b0630", "committedDate": "2019-12-30T21:57:07Z", "message": "Load ecommerce test data"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fb487716ebdb1dc5ed0d69824dceaba41a7c693b", "author": {"user": {"login": "dai-chen", "name": "Chen Dai"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/fb487716ebdb1dc5ed0d69824dceaba41a7c693b", "committedDate": "2019-12-30T23:03:27Z", "message": "Refactor comparison test class"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e9c7e0f1adb0a29cce2f6cba32bd26adbc59679d", "author": {"user": {"login": "dai-chen", "name": "Chen Dai"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/e9c7e0f1adb0a29cce2f6cba32bd26adbc59679d", "committedDate": "2019-12-31T21:57:53Z", "message": "Support command line args from gradlew"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2fcb8a69bbb137087c3deae794f16b0a4e994dd8", "author": {"user": {"login": "dai-chen", "name": "Chen Dai"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/2fcb8a69bbb137087c3deae794f16b0a4e994dd8", "committedDate": "2019-12-31T22:26:56Z", "message": "Support command line args from gradlew"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e6b5df5e30b2fcccd785976468a4c3d12b543b3d", "author": {"user": {"login": "dai-chen", "name": "Chen Dai"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/e6b5df5e30b2fcccd785976468a4c3d12b543b3d", "committedDate": "2019-12-31T23:38:35Z", "message": "Close connection"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bcfb680e980636d42c033ddc9cd54f4b4e60ca15", "author": {"user": {"login": "dai-chen", "name": "Chen Dai"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/bcfb680e980636d42c033ddc9cd54f4b4e60ca15", "committedDate": "2020-01-01T00:31:09Z", "message": "Use ES rest client only"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5fc017f7761db2bb5fba547e3e343001eb3b848c", "author": {"user": {"login": "dai-chen", "name": "Chen Dai"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/5fc017f7761db2bb5fba547e3e343001eb3b848c", "committedDate": "2020-01-01T00:58:54Z", "message": "Rename es host url argument"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "08b77715e6b7b750ab41dd99694413a7002b8bcb", "author": {"user": {"login": "dai-chen", "name": "Chen Dai"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/08b77715e6b7b750ab41dd99694413a7002b8bcb", "committedDate": "2020-01-02T19:49:07Z", "message": "Refactor test set"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d1e2aace53664655e4d40f00faadf6036bc68548", "author": {"user": {"login": "dai-chen", "name": "Chen Dai"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/d1e2aace53664655e4d40f00faadf6036bc68548", "committedDate": "2020-01-02T22:21:51Z", "message": "Print log to console"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "19d4d9fdfe8aca9a98c455fba7748db36ed882f8", "author": {"user": {"login": "dai-chen", "name": "Chen Dai"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/19d4d9fdfe8aca9a98c455fba7748db36ed882f8", "committedDate": "2020-01-03T00:04:19Z", "message": "Add unit test for es connection"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a8cd0c1d60745eaf35a1d7bc98a6963686e6102c", "author": {"user": {"login": "dai-chen", "name": "Chen Dai"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/a8cd0c1d60745eaf35a1d7bc98a6963686e6102c", "committedDate": "2020-01-03T01:34:42Z", "message": "Add unit test for jdbc connection"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2f0d672daf340f507a54ccb858f4986837e5c371", "author": {"user": {"login": "dai-chen", "name": "Chen Dai"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/2f0d672daf340f507a54ccb858f4986837e5c371", "committedDate": "2020-01-03T19:14:30Z", "message": "Fix connect issue"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "15deeef2b7e178224febb55575b6629ead23a799", "author": {"user": {"login": "dai-chen", "name": "Chen Dai"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/15deeef2b7e178224febb55575b6629ead23a799", "committedDate": "2020-01-03T19:50:21Z", "message": "Add more unit test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c3d6d38bc116fdf30d9e104c532b60b6a30874a0", "author": {"user": {"login": "dai-chen", "name": "Chen Dai"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/c3d6d38bc116fdf30d9e104c532b60b6a30874a0", "committedDate": "2020-01-03T22:00:19Z", "message": "Refactor DBResult and Row"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c8cc0350654d97d29a8eb8e414629fc1b0fd2305", "author": {"user": {"login": "dai-chen", "name": "Chen Dai"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/c8cc0350654d97d29a8eb8e414629fc1b0fd2305", "committedDate": "2020-01-03T22:02:43Z", "message": "Fix unit tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b99deaeb588348eb2acaf15c7140cdb248dc4228", "author": {"user": {"login": "dai-chen", "name": "Chen Dai"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/b99deaeb588348eb2acaf15c7140cdb248dc4228", "committedDate": "2020-01-03T22:08:19Z", "message": "Refactor"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dfd3befc13f96dde06c9c5e0859c8a432b25ab1f", "author": {"user": {"login": "dai-chen", "name": "Chen Dai"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/dfd3befc13f96dde06c9c5e0859c8a432b25ab1f", "committedDate": "2020-01-04T00:42:05Z", "message": "Support command line args via gradle"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6d423795a629cc5146b471ce51ad72d2b5f62130", "author": {"user": {"login": "dai-chen", "name": "Chen Dai"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/6d423795a629cc5146b471ce51ad72d2b5f62130", "committedDate": "2020-01-04T01:57:11Z", "message": "Retry different database if mismatch on first one"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "088b44f9865696790a476fc46010e74382671f6c", "author": {"user": {"login": "dai-chen", "name": "Chen Dai"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/088b44f9865696790a476fc46010e74382671f6c", "committedDate": "2020-01-04T02:18:22Z", "message": "Add more test data"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4b2d9f8ae9aeb3f5869efd14d3da22a2aa8eb19d", "author": {"user": {"login": "dai-chen", "name": "Chen Dai"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/4b2d9f8ae9aeb3f5869efd14d3da22a2aa8eb19d", "committedDate": "2020-01-04T02:19:42Z", "message": "Merge branch 'master' into sql-test-bench"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1947a3aad26805f0f98566f6b3d5991bba7fe4e1", "author": {"user": {"login": "dai-chen", "name": "Chen Dai"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/1947a3aad26805f0f98566f6b3d5991bba7fe4e1", "committedDate": "2020-01-06T17:56:57Z", "message": "Merge branch 'master' into sql-test-bench"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e4dabbd09bf4e4141d8f5c2eeb34debfcaccc5d7", "author": {"user": {"login": "dai-chen", "name": "Chen Dai"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/e4dabbd09bf4e4141d8f5c2eeb34debfcaccc5d7", "committedDate": "2020-01-06T19:33:06Z", "message": "Add documentation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f1fe0c2af8294a52e96efe87b185e283f20e26d2", "author": {"user": {"login": "dai-chen", "name": "Chen Dai"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/f1fe0c2af8294a52e96efe87b185e283f20e26d2", "committedDate": "2020-01-06T19:36:19Z", "message": "Add documentation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "525cb3df334109b03ea51b12ff0b36b4ece743bc", "author": {"user": {"login": "dai-chen", "name": "Chen Dai"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/525cb3df334109b03ea51b12ff0b36b4ece743bc", "committedDate": "2020-01-06T19:53:26Z", "message": "Add documentation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "01a579f316e9625b94e7ecc310a82a39bf6995e2", "author": {"user": {"login": "dai-chen", "name": "Chen Dai"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/01a579f316e9625b94e7ecc310a82a39bf6995e2", "committedDate": "2020-01-06T19:59:57Z", "message": "Add documentation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1eb33c8f42f29a5d470b69464700902a3f88824a", "author": {"user": {"login": "dai-chen", "name": "Chen Dai"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/1eb33c8f42f29a5d470b69464700902a3f88824a", "committedDate": "2020-01-06T20:59:26Z", "message": "Add documentation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ee18634339d647cbda0924b99a470ec70af7b1b9", "author": {"user": {"login": "dai-chen", "name": "Chen Dai"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/ee18634339d647cbda0924b99a470ec70af7b1b9", "committedDate": "2020-01-06T21:50:26Z", "message": "Clean up old report files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ff242beff5bcfee5171daaeeaff203db3460ad15", "author": {"user": {"login": "dai-chen", "name": "Chen Dai"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/ff242beff5bcfee5171daaeeaff203db3460ad15", "committedDate": "2020-01-07T00:06:44Z", "message": "Add missing java doc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3d2934f787894eff356c5c4ee1e9f7d71d091e9b", "author": {"user": {"login": "dai-chen", "name": "Chen Dai"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/3d2934f787894eff356c5c4ee1e9f7d71d091e9b", "committedDate": "2020-01-07T00:34:50Z", "message": "Create report folder if not exist"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6b9642f3c68b0ad8fcb98788bd3ce6489610c73a", "author": {"user": {"login": "dai-chen", "name": "Chen Dai"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/6b9642f3c68b0ad8fcb98788bd3ce6489610c73a", "committedDate": "2020-01-07T00:52:22Z", "message": "Upgrade our JDBC dependency to 1.3"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM5MzU5ODY3", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/335#pullrequestreview-339359867", "createdAt": "2020-01-07T16:41:35Z", "commit": {"oid": "6b9642f3c68b0ad8fcb98788bd3ce6489610c73a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QxNjo0MTozNVrOFa_CKg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QxNjo0MTozNVrOFa_CKg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mzg0MDA0Mg==", "bodyText": "When excluding the doctest folder. Does it means the doc need to be build manually with doctest paramater?", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/335#discussion_r363840042", "createdAt": "2020-01-07T16:41:35Z", "author": {"login": "penghuo"}, "path": "build.gradle", "diffHunk": "@@ -132,6 +132,33 @@ integTestRunner {\n     systemProperty 'tests.security.manager', 'false'\n     // allows integration test classes to access test resource from project root path\n     systemProperty('project.root', project.rootDir.absolutePath)\n+\n+    // Run different task based on test type. \"exclude\" is required for each task.\n+    def testType = System.getProperty(\"testType\")\n+    if (testType == 'doctest') { // Doctest to generate documentation\n+        include 'com/amazon/opendistroforelasticsearch/sql/doctest/**/*IT.class'\n+        exclude 'com/amazon/opendistroforelasticsearch/sql/correctness/**'\n+        exclude 'com/amazon/opendistroforelasticsearch/sql/esintgtest/**'\n+\n+    } else if (testType == 'comparison') { // Comparision testing\n+        include 'com/amazon/opendistroforelasticsearch/sql/correctness/CorrectnessIT.class'\n+        exclude 'com/amazon/opendistroforelasticsearch/sql/doctest/**'\n+        exclude 'com/amazon/opendistroforelasticsearch/sql/esintgtest/**'\n+\n+        // Enable logging output to console\n+        testLogging.showStandardStreams true\n+\n+        // Pass down system properties to IT class\n+        systemProperty \"esHost\", System.getProperty(\"esHost\")\n+        systemProperty \"dbUrl\", System.getProperty(\"dbUrl\")\n+        systemProperty \"otherDbUrls\", System.getProperty(\"otherDbUrls\")\n+        systemProperty \"queries\", System.getProperty(\"queries\")\n+\n+    } else { // Run all other integration tests\n+        include 'com/amazon/opendistroforelasticsearch/sql/esintgtest/**/*IT.class'\n+        exclude 'com/amazon/opendistroforelasticsearch/sql/doctest/**'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6b9642f3c68b0ad8fcb98788bd3ce6489610c73a"}, "originalPosition": 28}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM5MzcyNDQ5", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/335#pullrequestreview-339372449", "createdAt": "2020-01-07T17:00:46Z", "commit": {"oid": "6b9642f3c68b0ad8fcb98788bd3ce6489610c73a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QxNzowMDo0NlrOFa_niA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QxNzowMDo0NlrOFa_niA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mzg0OTYwOA==", "bodyText": "Is it possible to construct the report object and serialize the object to json. It may more clear to represent what is include in the report.", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/335#discussion_r363849608", "createdAt": "2020-01-07T17:00:46Z", "author": {"login": "penghuo"}, "path": "src/test/java/com/amazon/opendistroforelasticsearch/sql/correctness/report/FailedTestCase.java", "diffHunk": "@@ -0,0 +1,91 @@\n+/*\n+ *   Copyright 2019 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ *   Licensed under the Apache License, Version 2.0 (the \"License\").\n+ *   You may not use this file except in compliance with the License.\n+ *   A copy of the License is located at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *   or in the \"license\" file accompanying this file. This file is distributed\n+ *   on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ *   express or implied. See the License for the specific language governing\n+ *   permissions and limitations under the License.\n+ */\n+\n+package com.amazon.opendistroforelasticsearch.sql.correctness.report;\n+\n+import com.amazon.opendistroforelasticsearch.sql.correctness.runner.resultset.DBResult;\n+import com.amazon.opendistroforelasticsearch.sql.correctness.runner.resultset.Row;\n+import org.json.JSONArray;\n+import org.json.JSONObject;\n+\n+import java.util.Comparator;\n+import java.util.List;\n+import java.util.Objects;\n+\n+/**\n+ * Report for test case that fails due to inconsistent result set.\n+ */\n+public class FailedTestCase extends TestCaseReport {\n+\n+    /** Inconsistent result set for reporting */\n+    private final List<DBResult> results;\n+\n+    public FailedTestCase(String sql, List<DBResult> results) {\n+        super(false, sql);\n+        this.results = results;\n+        this.results.sort(Comparator.comparing(DBResult::getDatabaseName));\n+    }\n+\n+    @Override\n+    public JSONObject report() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6b9642f3c68b0ad8fcb98788bd3ce6489610c73a"}, "originalPosition": 42}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM5Mzc2MDkw", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/335#pullrequestreview-339376090", "createdAt": "2020-01-07T17:06:49Z", "commit": {"oid": "6b9642f3c68b0ad8fcb98788bd3ce6489610c73a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM5Mzk1MzUw", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/335#pullrequestreview-339395350", "createdAt": "2020-01-07T17:40:26Z", "commit": {"oid": "6b9642f3c68b0ad8fcb98788bd3ce6489610c73a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM5NDEwNTMy", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/335#pullrequestreview-339410532", "createdAt": "2020-01-07T18:08:38Z", "commit": {"oid": "6b9642f3c68b0ad8fcb98788bd3ce6489610c73a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QxODowODozOFrOFbBYSA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QxODowODozOFrOFbBYSA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mzg3ODQ3Mg==", "bodyText": "Curious: are these sanity tests testing basic bug fixes/feature additions we've made recently, or are they just a list of generic queries?", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/335#discussion_r363878472", "createdAt": "2020-01-07T18:08:38Z", "author": {"login": "davidcui1225"}, "path": "src/test/resources/correctness/sanity_integration_tests.txt", "diffHunk": "@@ -0,0 +1,8 @@\n+SELECT AvgTicketPrice, Cancelled, Carrier, FlightDelayMin, timestamp FROM kibana_sample_data_flights", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6b9642f3c68b0ad8fcb98788bd3ce6489610c73a"}, "originalPosition": 1}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM5NDEwNjA2", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/335#pullrequestreview-339410606", "createdAt": "2020-01-07T18:08:45Z", "commit": {"oid": "6b9642f3c68b0ad8fcb98788bd3ce6489610c73a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM5NDE5NDg2", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/335#pullrequestreview-339419486", "createdAt": "2020-01-07T18:25:15Z", "commit": {"oid": "6b9642f3c68b0ad8fcb98788bd3ce6489610c73a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QxODoyNToxNlrOFbBzTg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QxODoyNToxNlrOFbBzTg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mzg4NTM5MA==", "bodyText": "Seems that the doc ut is only for manual testing, any reason for that? or shall we put both IT and UT in \"doctest\"?", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/335#discussion_r363885390", "createdAt": "2020-01-07T18:25:16Z", "author": {"login": "chloe-zh"}, "path": "build.gradle", "diffHunk": "@@ -132,6 +132,33 @@ integTestRunner {\n     systemProperty 'tests.security.manager', 'false'\n     // allows integration test classes to access test resource from project root path\n     systemProperty('project.root', project.rootDir.absolutePath)\n+\n+    // Run different task based on test type. \"exclude\" is required for each task.\n+    def testType = System.getProperty(\"testType\")\n+    if (testType == 'doctest') { // Doctest to generate documentation\n+        include 'com/amazon/opendistroforelasticsearch/sql/doctest/**/*IT.class'\n+        exclude 'com/amazon/opendistroforelasticsearch/sql/correctness/**'\n+        exclude 'com/amazon/opendistroforelasticsearch/sql/esintgtest/**'\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6b9642f3c68b0ad8fcb98788bd3ce6489610c73a"}, "originalPosition": 11}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM5NDIwOTE5", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/335#pullrequestreview-339420919", "createdAt": "2020-01-07T18:27:50Z", "commit": {"oid": "6b9642f3c68b0ad8fcb98788bd3ce6489610c73a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QxODoyNzo1MFrOFbB3iA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QxODoyNzo1MFrOFbB3iA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mzg4NjQ3Mg==", "bodyText": "Just curious, are we going to base the test on v1.3? Because I thought it would be v1.4.", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/335#discussion_r363886472", "createdAt": "2020-01-07T18:27:50Z", "author": {"login": "chloe-zh"}, "path": "build.gradle", "diffHunk": "@@ -214,6 +241,12 @@ dependencies {\n     // testCompile group: 'com.alibaba', name: 'fastjson', version:'1.2.56'\n     // testCompile group: 'org.mockito', name: 'mockito-core', version:'2.23.4'\n     testCompile group: \"org.elasticsearch.client\", name: 'transport', version: \"${es_version}\"\n+\n+    // JDBC drivers for comparison test. Somehow Apache Derby throws security permission exception.\n+    testCompile group: 'com.amazon.opendistroforelasticsearch.client', name: 'opendistro-sql-jdbc', version: '1.3.0.0'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6b9642f3c68b0ad8fcb98788bd3ce6489610c73a"}, "originalPosition": 40}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2feab8cf60d33f2c7c70fb2cfaec07b241273c3e", "author": {"user": {"login": "dai-chen", "name": "Chen Dai"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/2feab8cf60d33f2c7c70fb2cfaec07b241273c3e", "committedDate": "2020-01-07T22:20:45Z", "message": "Generate JSON by serializing java bean and use Lombok"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d81b1654319b385cca384f5b093fd7691fea2eaa", "author": {"user": {"login": "dai-chen", "name": "Chen Dai"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/d81b1654319b385cca384f5b093fd7691fea2eaa", "committedDate": "2020-01-07T22:50:55Z", "message": "Run doctest by default"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 724, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}