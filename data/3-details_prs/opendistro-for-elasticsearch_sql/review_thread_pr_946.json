{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQyMjE5MjM5", "number": 946, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNVQyMzozMTozMFrOFLewAA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNVQyMzozMTozMFrOFLewAA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ3NTgyNDY0OnYy", "diffSide": "RIGHT", "path": "core/src/main/java/com/amazon/opendistroforelasticsearch/sql/expression/window/ranking/DenseRankFunction.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNVQyMzozMTozMFrOIOrUFQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNlQyMToyOToxM1rOIPWm_A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjI2MDYyOQ==", "bodyText": "Could we use PeerRowsWindowFrame in here?", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/946#discussion_r552260629", "createdAt": "2021-01-05T23:31:30Z", "author": {"login": "penghuo"}, "path": "core/src/main/java/com/amazon/opendistroforelasticsearch/sql/expression/window/ranking/DenseRankFunction.java", "diffHunk": "@@ -30,7 +30,7 @@ public DenseRankFunction() {\n   }\n \n   @Override\n-  protected int rank(CumulativeWindowFrame frame) {\n+  protected int rank(CurrentRowWindowFrame frame) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ec79c160cf3507a3580a9d628508abb2c5a6c50"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1Mjk2OTk4MA==", "bodyText": "I just dived into the code and it looks doable. Conceptually, RANK and DENSE_RANK share same meaning of \"current row\" and thus can use peer window frame. But I think we'd better use this minimal window frame for now to avoid potential data preload. We can revisit and refactor this later if necessary. Thanks!", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/946#discussion_r552969980", "createdAt": "2021-01-06T21:29:13Z", "author": {"login": "dai-chen"}, "path": "core/src/main/java/com/amazon/opendistroforelasticsearch/sql/expression/window/ranking/DenseRankFunction.java", "diffHunk": "@@ -30,7 +30,7 @@ public DenseRankFunction() {\n   }\n \n   @Override\n-  protected int rank(CumulativeWindowFrame frame) {\n+  protected int rank(CurrentRowWindowFrame frame) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjI2MDYyOQ=="}, "originalCommit": {"oid": "1ec79c160cf3507a3580a9d628508abb2c5a6c50"}, "originalPosition": 14}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1883, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}