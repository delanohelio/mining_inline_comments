{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAzMDQyNTQ0", "number": 780, "title": "Add support of basic data types byte, short, binary and add data type testing", "bodyText": "Issue #, if available:\n*Description of changes:\n\nAdded support of basic data types including BYTE, SHORT (short type was already partly implemented before this PR), and es type BINARY\nEnabled BYTE and SHORT in arithmetic operations and some mathematical functions\nAdded support of BINARY type in JDBC driver\nAdded integration test for all data types we have supported in the core engine\n\nRef: https://www.elastic.co/guide/en/elasticsearch/reference/current/sql-data-types.html\nBy submitting this pull request, I confirm that my contribution is made under the terms of the Apache 2.0 license.", "createdAt": "2020-10-14T01:05:10Z", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/780", "merged": true, "mergeCommit": {"oid": "081882ce140666f577f1e6e7359fa2675a5269df"}, "closed": true, "closedAt": "2020-10-16T20:24:21Z", "author": {"login": "chloe-zh"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdSSgbZgH2gAyNTAzMDQyNTQ0OmQ5OTM2MDQ0YWUwODM4NTA4MjkzZmNhZjFlZDViYTE1N2Q2N2YzZWY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdTMJdDgFqTUxMDc2OTQzNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d9936044ae0838508293fcaf1ed5ba157d67f3ef", "author": {"user": {"login": "chloe-zh", "name": "Chloe"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/d9936044ae0838508293fcaf1ed5ba157d67f3ef", "committedDate": "2020-10-14T01:01:35Z", "message": "update"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "31c71f6bb08443d8219a464b68b6ef09fc2b3e8f", "author": {"user": {"login": "chloe-zh", "name": "Chloe"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/31c71f6bb08443d8219a464b68b6ef09fc2b3e8f", "committedDate": "2020-10-14T02:35:30Z", "message": "added binary in jdbc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cbc4214db20477c3728d3c8f98384938861a744d", "author": {"user": {"login": "chloe-zh", "name": "Chloe"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/cbc4214db20477c3728d3c8f98384938861a744d", "committedDate": "2020-10-14T02:57:40Z", "message": "added data types IT"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA4NTk5NDQ0", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/780#pullrequestreview-508599444", "createdAt": "2020-10-14T18:02:24Z", "commit": {"oid": "cbc4214db20477c3728d3c8f98384938861a744d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxODowMjoyNFrOHhe2jg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxODowMjoyNFrOHhe2jg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDg3MDU0Mg==", "bodyText": "do we need to verify the row?", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/780#discussion_r504870542", "createdAt": "2020-10-14T18:02:24Z", "author": {"login": "penghuo"}, "path": "integ-test/src/test/java/com/amazon/opendistroforelasticsearch/sql/ppl/DataTypeIT.java", "diffHunk": "@@ -0,0 +1,67 @@\n+/*\n+ *   Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ *   Licensed under the Apache License, Version 2.0 (the \"License\").\n+ *   You may not use this file except in compliance with the License.\n+ *   A copy of the License is located at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *   or in the \"license\" file accompanying this file. This file is distributed\n+ *   on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ *   express or implied. See the License for the specific language governing\n+ *   permissions and limitations under the License.\n+ */\n+\n+package com.amazon.opendistroforelasticsearch.sql.ppl;\n+\n+import static com.amazon.opendistroforelasticsearch.sql.legacy.SQLIntegTestCase.Index.DATA_TYPE_NONNUMERIC;\n+import static com.amazon.opendistroforelasticsearch.sql.legacy.SQLIntegTestCase.Index.DATA_TYPE_NUMERIC;\n+import static com.amazon.opendistroforelasticsearch.sql.legacy.TestsConstants.TEST_INDEX_DATATYPE_NONNUMERIC;\n+import static com.amazon.opendistroforelasticsearch.sql.legacy.TestsConstants.TEST_INDEX_DATATYPE_NUMERIC;\n+import static com.amazon.opendistroforelasticsearch.sql.util.MatcherUtils.schema;\n+import static com.amazon.opendistroforelasticsearch.sql.util.MatcherUtils.verifySchema;\n+\n+import java.io.IOException;\n+import org.json.JSONObject;\n+import org.junit.Test;\n+\n+public class DataTypeIT extends PPLIntegTestCase {\n+\n+  @Override\n+  public void init() throws IOException {\n+    loadIndex(DATA_TYPE_NUMERIC);\n+    loadIndex(DATA_TYPE_NONNUMERIC);\n+  }\n+\n+  @Test\n+  public void test_numeric_data_types() throws IOException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cbc4214db20477c3728d3c8f98384938861a744d"}, "originalPosition": 38}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA4NjAxMzMz", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/780#pullrequestreview-508601333", "createdAt": "2020-10-14T18:04:57Z", "commit": {"oid": "cbc4214db20477c3728d3c8f98384938861a744d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxODowNDo1OFrOHhe8UA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxODowNDo1OFrOHhe8UA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDg3MjAxNg==", "bodyText": "doc?", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/780#discussion_r504872016", "createdAt": "2020-10-14T18:04:58Z", "author": {"login": "penghuo"}, "path": "elasticsearch/src/main/java/com/amazon/opendistroforelasticsearch/sql/elasticsearch/data/value/ElasticsearchExprBinaryValue.java", "diffHunk": "@@ -0,0 +1,51 @@\n+/*\n+ *   Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ *   Licensed under the Apache License, Version 2.0 (the \"License\").\n+ *   You may not use this file except in compliance with the License.\n+ *   A copy of the License is located at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *   or in the \"license\" file accompanying this file. This file is distributed\n+ *   on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ *   express or implied. See the License for the specific language governing\n+ *   permissions and limitations under the License.\n+ */\n+\n+package com.amazon.opendistroforelasticsearch.sql.elasticsearch.data.value;\n+\n+import com.amazon.opendistroforelasticsearch.sql.data.model.AbstractExprValue;\n+import com.amazon.opendistroforelasticsearch.sql.data.model.ExprValue;\n+import com.amazon.opendistroforelasticsearch.sql.data.type.ExprType;\n+import com.amazon.opendistroforelasticsearch.sql.elasticsearch.data.type.ElasticsearchDataType;\n+import lombok.EqualsAndHashCode;\n+\n+@EqualsAndHashCode(callSuper = false)\n+public class ElasticsearchExprBinaryValue extends AbstractExprValue {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cbc4214db20477c3728d3c8f98384938861a744d"}, "originalPosition": 25}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA4NjAyMjE2", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/780#pullrequestreview-508602216", "createdAt": "2020-10-14T18:06:11Z", "commit": {"oid": "cbc4214db20477c3728d3c8f98384938861a744d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxODowNjoxMVrOHhe_FA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxODowNjoxMVrOHhe_FA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDg3MjcyNA==", "bodyText": "Short -> Byte", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/780#discussion_r504872724", "createdAt": "2020-10-14T18:06:11Z", "author": {"login": "penghuo"}, "path": "core/src/main/java/com/amazon/opendistroforelasticsearch/sql/data/model/ExprByteValue.java", "diffHunk": "@@ -0,0 +1,54 @@\n+/*\n+ *   Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ *   Licensed under the Apache License, Version 2.0 (the \"License\").\n+ *   You may not use this file except in compliance with the License.\n+ *   A copy of the License is located at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *   or in the \"license\" file accompanying this file. This file is distributed\n+ *   on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ *   express or implied. See the License for the specific language governing\n+ *   permissions and limitations under the License.\n+ */\n+\n+package com.amazon.opendistroforelasticsearch.sql.data.model;\n+\n+import com.amazon.opendistroforelasticsearch.sql.data.type.ExprCoreType;\n+import com.amazon.opendistroforelasticsearch.sql.data.type.ExprType;\n+\n+/**\n+ * Expression Short Value.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cbc4214db20477c3728d3c8f98384938861a744d"}, "originalPosition": 22}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA4NjAzOTQw", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/780#pullrequestreview-508603940", "createdAt": "2020-10-14T18:08:37Z", "commit": {"oid": "cbc4214db20477c3728d3c8f98384938861a744d"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4479e411497404391cfa584ca5790f1df4c228fd", "author": {"user": {"login": "chloe-zh", "name": "Chloe"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/4479e411497404391cfa584ca5790f1df4c228fd", "committedDate": "2020-10-15T04:59:07Z", "message": "addressed comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEwNzQwMzY5", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/780#pullrequestreview-510740369", "createdAt": "2020-10-16T19:19:14Z", "commit": {"oid": "4479e411497404391cfa584ca5790f1df4c228fd"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEwNzY5NDM3", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/780#pullrequestreview-510769437", "createdAt": "2020-10-16T20:10:59Z", "commit": {"oid": "4479e411497404391cfa584ca5790f1df4c228fd"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 545, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}