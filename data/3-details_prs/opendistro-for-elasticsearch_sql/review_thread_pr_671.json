{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY0ODM4ODg1", "number": 671, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xNVQwMTowMzoxOVrOEYpuHA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xNVQwMTowMzoxOVrOEYpuHA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk0Mjg0ODI4OnYy", "diffSide": "RIGHT", "path": "elasticsearch/src/main/java/com/amazon/opendistroforelasticsearch/sql/elasticsearch/storage/script/filter/lucene/TermQuery.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xNVQwMTowMzoxOVrOHBGlIA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QxODowNzo0N1rOHB0ZtQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDkxODQzMg==", "bodyText": "could you add doc for this limitation?", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/671#discussion_r470918432", "createdAt": "2020-08-15T01:03:19Z", "author": {"login": "penghuo"}, "path": "elasticsearch/src/main/java/com/amazon/opendistroforelasticsearch/sql/elasticsearch/storage/script/filter/lucene/TermQuery.java", "diffHunk": "@@ -0,0 +1,39 @@\n+/*\n+ *    Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ *    Licensed under the Apache License, Version 2.0 (the \"License\").\n+ *    You may not use this file except in compliance with the License.\n+ *    A copy of the License is located at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *    or in the \"license\" file accompanying this file. This file is distributed\n+ *    on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ *    express or implied. See the License for the specific language governing\n+ *    permissions and limitations under the License.\n+ *\n+ */\n+\n+package com.amazon.opendistroforelasticsearch.sql.elasticsearch.storage.script.filter.lucene;\n+\n+import static com.amazon.opendistroforelasticsearch.sql.elasticsearch.data.type.ElasticsearchDataType.ES_TEXT_KEYWORD;\n+\n+import com.amazon.opendistroforelasticsearch.sql.data.model.ExprValue;\n+import com.amazon.opendistroforelasticsearch.sql.data.type.ExprType;\n+import org.elasticsearch.index.query.QueryBuilder;\n+import org.elasticsearch.index.query.QueryBuilders;\n+\n+/**\n+ * Lucene query that build term query for equality comparison.\n+ */\n+public class TermQuery extends LuceneQuery {\n+\n+  @Override\n+  protected QueryBuilder doBuild(String fieldName, ExprType fieldType, ExprValue literal) {\n+    if (fieldType == ES_TEXT_KEYWORD) { // Assume inner field name is always \"keyword\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3a0053e128f21969d16974c80ecd14bb0e35c45a"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTY2OTE3Mw==", "bodyText": "Good idea! Added a limitation folder with a single doc for now. Copy-pasted the up-to-date content from ODFE doc. Will make it doctest with example in explain API PR. Thanks!\n\nMySQL reference: https://dev.mysql.com/doc/mysql-reslimits-excerpt/8.0/en/\nODFE doc: https://opendistro.github.io/for-elasticsearch-docs/docs/sql/limitation/\nNew limitation doc: https://github.com/dai-chen/sql/blob/lucene-pushdown-optimization/docs/user/limitations/limitations.rst", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/671#discussion_r471669173", "createdAt": "2020-08-17T18:07:47Z", "author": {"login": "dai-chen"}, "path": "elasticsearch/src/main/java/com/amazon/opendistroforelasticsearch/sql/elasticsearch/storage/script/filter/lucene/TermQuery.java", "diffHunk": "@@ -0,0 +1,39 @@\n+/*\n+ *    Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ *    Licensed under the Apache License, Version 2.0 (the \"License\").\n+ *    You may not use this file except in compliance with the License.\n+ *    A copy of the License is located at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *    or in the \"license\" file accompanying this file. This file is distributed\n+ *    on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ *    express or implied. See the License for the specific language governing\n+ *    permissions and limitations under the License.\n+ *\n+ */\n+\n+package com.amazon.opendistroforelasticsearch.sql.elasticsearch.storage.script.filter.lucene;\n+\n+import static com.amazon.opendistroforelasticsearch.sql.elasticsearch.data.type.ElasticsearchDataType.ES_TEXT_KEYWORD;\n+\n+import com.amazon.opendistroforelasticsearch.sql.data.model.ExprValue;\n+import com.amazon.opendistroforelasticsearch.sql.data.type.ExprType;\n+import org.elasticsearch.index.query.QueryBuilder;\n+import org.elasticsearch.index.query.QueryBuilders;\n+\n+/**\n+ * Lucene query that build term query for equality comparison.\n+ */\n+public class TermQuery extends LuceneQuery {\n+\n+  @Override\n+  protected QueryBuilder doBuild(String fieldName, ExprType fieldType, ExprValue literal) {\n+    if (fieldType == ES_TEXT_KEYWORD) { // Assume inner field name is always \"keyword\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDkxODQzMg=="}, "originalCommit": {"oid": "3a0053e128f21969d16974c80ecd14bb0e35c45a"}, "originalPosition": 33}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1989, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}