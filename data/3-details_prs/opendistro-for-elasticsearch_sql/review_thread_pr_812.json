{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE4NzY1NDY5", "number": 812, "reviewThreads": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQwNTo0ODoxOFrOE3kCOA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQwNTo1OToxMFrOE3kKRg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI2Njk3NTI4OnYy", "diffSide": "RIGHT", "path": "workbench/common/index.ts", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQwNTo0ODoxOFrOHw_DsQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQxNzowODo1MVrOHxWUnQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTEyNjgzMw==", "bodyText": "Missing license header? and should the id be something like opendistroQueryWorkbench?", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/812#discussion_r521126833", "createdAt": "2020-11-11T05:48:18Z", "author": {"login": "joshuali925"}, "path": "workbench/common/index.ts", "diffHunk": "@@ -0,0 +1,2 @@\n+export const PLUGIN_ID = 'workbench';", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e2b16484c0c63036931796c393370cdfb5e13781"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTUwNzk5Nw==", "bodyText": "Good catch, will change and add header", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/812#discussion_r521507997", "createdAt": "2020-11-11T17:08:51Z", "author": {"login": "davidcui1225"}, "path": "workbench/common/index.ts", "diffHunk": "@@ -0,0 +1,2 @@\n+export const PLUGIN_ID = 'workbench';", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTEyNjgzMw=="}, "originalCommit": {"oid": "e2b16484c0c63036931796c393370cdfb5e13781"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI2Njk3NjYwOnYy", "diffSide": "RIGHT", "path": "workbench/kibana.json", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQwNTo0OTowNVrOHw_EbQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQwNTo0OTowNVrOHw_EbQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTEyNzAyMQ==", "bodyText": "if you change PLUGIN_ID in common/index.ts, update this as well", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/812#discussion_r521127021", "createdAt": "2020-11-11T05:49:05Z", "author": {"login": "joshuali925"}, "path": "workbench/kibana.json", "diffHunk": "@@ -0,0 +1,8 @@\n+{\n+  \"id\": \"workbench\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e2b16484c0c63036931796c393370cdfb5e13781"}, "originalPosition": 2}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI2Njk4MDYzOnYy", "diffSide": "RIGHT", "path": "workbench/public/components/Main/main.tsx", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQwNTo1MDo1NlrOHw_GrA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQxNzowMDoxM1rOHxV9tA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTEyNzU5Ng==", "bodyText": "httpClient: CoreStart['http']?", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/812#discussion_r521127596", "createdAt": "2020-11-11T05:50:56Z", "author": {"login": "joshuali925"}, "path": "workbench/public/components/Main/main.tsx", "diffHunk": "@@ -64,7 +64,7 @@ export type ItemIdToExpandedRowMap = {\n };\n \n interface MainProps {\n-  httpClient: IHttpService;\n+  httpClient: any;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e2b16484c0c63036931796c393370cdfb5e13781"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTUwMjEzMg==", "bodyText": "Good catch, forgot to update this- will change", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/812#discussion_r521502132", "createdAt": "2020-11-11T17:00:13Z", "author": {"login": "davidcui1225"}, "path": "workbench/public/components/Main/main.tsx", "diffHunk": "@@ -64,7 +64,7 @@ export type ItemIdToExpandedRowMap = {\n };\n \n interface MainProps {\n-  httpClient: IHttpService;\n+  httpClient: any;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTEyNzU5Ng=="}, "originalCommit": {"oid": "e2b16484c0c63036931796c393370cdfb5e13781"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI2Njk4MDY5OnYy", "diffSide": "RIGHT", "path": "workbench/public/components/Main/main.tsx", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQwNTo1MTowMFrOHw_GuA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQxNzowMDoyMVrOHxV-KA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTEyNzYwOA==", "bodyText": "httpClient: CoreStart['http']?", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/812#discussion_r521127608", "createdAt": "2020-11-11T05:51:00Z", "author": {"login": "joshuali925"}, "path": "workbench/public/components/Main/main.tsx", "diffHunk": "@@ -181,8 +181,7 @@ export function getQueryResultsForTable(queryResults: ResponseDetail<string>[]):\n }\n \n export class Main extends React.Component<MainProps, MainState> {\n-  httpClient: IHttpService;\n-  // httpClient: any;\n+  httpClient: any;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e2b16484c0c63036931796c393370cdfb5e13781"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTUwMjI0OA==", "bodyText": "Same as above", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/812#discussion_r521502248", "createdAt": "2020-11-11T17:00:21Z", "author": {"login": "davidcui1225"}, "path": "workbench/public/components/Main/main.tsx", "diffHunk": "@@ -181,8 +181,7 @@ export function getQueryResultsForTable(queryResults: ResponseDetail<string>[]):\n }\n \n export class Main extends React.Component<MainProps, MainState> {\n-  httpClient: IHttpService;\n-  // httpClient: any;\n+  httpClient: any;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTEyNzYwOA=="}, "originalCommit": {"oid": "e2b16484c0c63036931796c393370cdfb5e13781"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI2Njk4MzIxOnYy", "diffSide": "RIGHT", "path": "workbench/public/components/app.tsx", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQwNTo1MjoyMlrOHw_IQw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQxODo1NzoyNFrOHxaPGA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTEyODAwMw==", "bodyText": "what's this empty function onChange? I don't see it being used in Main, you can try removing it in MainProps", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/812#discussion_r521128003", "createdAt": "2020-11-11T05:52:22Z", "author": {"login": "joshuali925"}, "path": "workbench/public/components/app.tsx", "diffHunk": "@@ -0,0 +1,53 @@\n+/*\n+ *   Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ *   Licensed under the Apache License, Version 2.0 (the \"License\").\n+ *   You may not use this file except in compliance with the License.\n+ *   A copy of the License is located at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *   or in the \"license\" file accompanying this file. This file is distributed\n+ *   on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ *   express or implied. See the License for the specific language governing\n+ *   permissions and limitations under the License.\n+ */\n+\n+import React from 'react';\n+import { I18nProvider } from '@kbn/i18n/react';\n+import { BrowserRouter as Router, Route } from 'react-router-dom';\n+\n+import { EuiPage, EuiPageBody } from '@elastic/eui';\n+\n+import { CoreStart } from '../../../../src/core/public';\n+import { NavigationPublicPluginStart } from '../../../../src/plugins/navigation/public';\n+\n+import { Main } from './Main';\n+\n+interface WorkbenchAppDeps {\n+  basename: string;\n+  notifications: CoreStart['notifications'];\n+  http: CoreStart['http'];\n+  navigation: NavigationPublicPluginStart;\n+}\n+\n+const onChange = () => {};\n+\n+export const WorkbenchApp = ({ basename, notifications, http, navigation }: WorkbenchAppDeps) => {\n+  return (\n+    <Router basename={'/' + basename}>\n+      <I18nProvider>\n+        <div>\n+          <EuiPage>\n+            <EuiPageBody>\n+              <Route\n+                path=\"/\"\n+                render={(props) => <Main httpClient={http} {...props} onChange={onChange} />}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e2b16484c0c63036931796c393370cdfb5e13781"}, "originalPosition": 45}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTUwMjgwMQ==", "bodyText": "onChange is required props for Main but is also defined in Main so I just created the empty onChange to pass into Main", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/812#discussion_r521502801", "createdAt": "2020-11-11T17:00:57Z", "author": {"login": "davidcui1225"}, "path": "workbench/public/components/app.tsx", "diffHunk": "@@ -0,0 +1,53 @@\n+/*\n+ *   Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ *   Licensed under the Apache License, Version 2.0 (the \"License\").\n+ *   You may not use this file except in compliance with the License.\n+ *   A copy of the License is located at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *   or in the \"license\" file accompanying this file. This file is distributed\n+ *   on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ *   express or implied. See the License for the specific language governing\n+ *   permissions and limitations under the License.\n+ */\n+\n+import React from 'react';\n+import { I18nProvider } from '@kbn/i18n/react';\n+import { BrowserRouter as Router, Route } from 'react-router-dom';\n+\n+import { EuiPage, EuiPageBody } from '@elastic/eui';\n+\n+import { CoreStart } from '../../../../src/core/public';\n+import { NavigationPublicPluginStart } from '../../../../src/plugins/navigation/public';\n+\n+import { Main } from './Main';\n+\n+interface WorkbenchAppDeps {\n+  basename: string;\n+  notifications: CoreStart['notifications'];\n+  http: CoreStart['http'];\n+  navigation: NavigationPublicPluginStart;\n+}\n+\n+const onChange = () => {};\n+\n+export const WorkbenchApp = ({ basename, notifications, http, navigation }: WorkbenchAppDeps) => {\n+  return (\n+    <Router basename={'/' + basename}>\n+      <I18nProvider>\n+        <div>\n+          <EuiPage>\n+            <EuiPageBody>\n+              <Route\n+                path=\"/\"\n+                render={(props) => <Main httpClient={http} {...props} onChange={onChange} />}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTEyODAwMw=="}, "originalCommit": {"oid": "e2b16484c0c63036931796c393370cdfb5e13781"}, "originalPosition": 45}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTU3MjEyMA==", "bodyText": "Main uses this.onChange which is defined in Main itself, you can remove the onChange in MainProps (line 68 in Main.tsx) so you don't have to pass in this empty function", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/812#discussion_r521572120", "createdAt": "2020-11-11T18:57:24Z", "author": {"login": "joshuali925"}, "path": "workbench/public/components/app.tsx", "diffHunk": "@@ -0,0 +1,53 @@\n+/*\n+ *   Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ *   Licensed under the Apache License, Version 2.0 (the \"License\").\n+ *   You may not use this file except in compliance with the License.\n+ *   A copy of the License is located at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *   or in the \"license\" file accompanying this file. This file is distributed\n+ *   on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ *   express or implied. See the License for the specific language governing\n+ *   permissions and limitations under the License.\n+ */\n+\n+import React from 'react';\n+import { I18nProvider } from '@kbn/i18n/react';\n+import { BrowserRouter as Router, Route } from 'react-router-dom';\n+\n+import { EuiPage, EuiPageBody } from '@elastic/eui';\n+\n+import { CoreStart } from '../../../../src/core/public';\n+import { NavigationPublicPluginStart } from '../../../../src/plugins/navigation/public';\n+\n+import { Main } from './Main';\n+\n+interface WorkbenchAppDeps {\n+  basename: string;\n+  notifications: CoreStart['notifications'];\n+  http: CoreStart['http'];\n+  navigation: NavigationPublicPluginStart;\n+}\n+\n+const onChange = () => {};\n+\n+export const WorkbenchApp = ({ basename, notifications, http, navigation }: WorkbenchAppDeps) => {\n+  return (\n+    <Router basename={'/' + basename}>\n+      <I18nProvider>\n+        <div>\n+          <EuiPage>\n+            <EuiPageBody>\n+              <Route\n+                path=\"/\"\n+                render={(props) => <Main httpClient={http} {...props} onChange={onChange} />}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTEyODAwMw=="}, "originalCommit": {"oid": "e2b16484c0c63036931796c393370cdfb5e13781"}, "originalPosition": 45}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI2Njk5NTkwOnYy", "diffSide": "RIGHT", "path": "workbench/server/services/utils/constants.ts", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQwNTo1OToxMFrOHw_Puw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQxOToyNTo1MVrOHxbKBg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTEyOTkxNQ==", "bodyText": "Question, why do we need global variable? and why do we need to concatenate queries?", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/812#discussion_r521129915", "createdAt": "2020-11-11T05:59:10Z", "author": {"login": "joshuali925"}, "path": "workbench/server/services/utils/constants.ts", "diffHunk": "@@ -32,3 +34,12 @@ export const CLUSTER = {\n   SQL: 'opendistro_sql',\n   DATA: 'data',\n };\n+\n+export const convertQueryToString = (query: string | ParsedUrlQuery) => {\n+  let index;\n+  var queryString = \"\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e2b16484c0c63036931796c393370cdfb5e13781"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTUwNjEwOQ==", "bodyText": "The request object has changed, and the query is not in an Object with each key containing a single character from the query e.g { {'0': 'S'}, {'1': 'E'}, {'2': 'L'}, ...} so convertQueryToString converts it to a string containing the query", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/812#discussion_r521506109", "createdAt": "2020-11-11T17:05:46Z", "author": {"login": "davidcui1225"}, "path": "workbench/server/services/utils/constants.ts", "diffHunk": "@@ -32,3 +34,12 @@ export const CLUSTER = {\n   SQL: 'opendistro_sql',\n   DATA: 'data',\n };\n+\n+export const convertQueryToString = (query: string | ParsedUrlQuery) => {\n+  let index;\n+  var queryString = \"\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTEyOTkxNQ=="}, "originalCommit": {"oid": "e2b16484c0c63036931796c393370cdfb5e13781"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTU3NTk1OA==", "bodyText": "That's a weird problem.. is the use of var necessary? can we use let?", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/812#discussion_r521575958", "createdAt": "2020-11-11T19:04:40Z", "author": {"login": "joshuali925"}, "path": "workbench/server/services/utils/constants.ts", "diffHunk": "@@ -32,3 +34,12 @@ export const CLUSTER = {\n   SQL: 'opendistro_sql',\n   DATA: 'data',\n };\n+\n+export const convertQueryToString = (query: string | ParsedUrlQuery) => {\n+  let index;\n+  var queryString = \"\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTEyOTkxNQ=="}, "originalCommit": {"oid": "e2b16484c0c63036931796c393370cdfb5e13781"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTU4NzIwNg==", "bodyText": "Yeah the change to the KibanaRequest type made the object change completely. And yes good catch, will change to let", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/812#discussion_r521587206", "createdAt": "2020-11-11T19:25:51Z", "author": {"login": "davidcui1225"}, "path": "workbench/server/services/utils/constants.ts", "diffHunk": "@@ -32,3 +34,12 @@ export const CLUSTER = {\n   SQL: 'opendistro_sql',\n   DATA: 'data',\n };\n+\n+export const convertQueryToString = (query: string | ParsedUrlQuery) => {\n+  let index;\n+  var queryString = \"\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTEyOTkxNQ=="}, "originalCommit": {"oid": "e2b16484c0c63036931796c393370cdfb5e13781"}, "originalPosition": 16}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1905, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}