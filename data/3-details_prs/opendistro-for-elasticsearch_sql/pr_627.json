{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU4MDIwMzM5", "number": 627, "title": "ODBC: Fix for data loading failure in Power BI Desktop", "bodyText": "Issue #595\nDescription of changes:\n\nAdded data type & SQL data type values in SQLColumns\nTested with Power BI Desktop (using import mode)\n\nBy submitting this pull request, I confirm that my contribution is made under the terms of the Apache 2.0 license.", "createdAt": "2020-07-28T19:57:37Z", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/627", "merged": true, "mergeCommit": {"oid": "bee2ca26ed4b8bf8e072df027bc4014b6027ee71"}, "closed": true, "closedAt": "2020-07-29T17:06:03Z", "author": {"login": "rupal-bq"}, "timelineItems": {"totalCount": 35, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc2U7rsgH2gAyNDU4MDIwMzM5OjQyN2JkNzlhMTM4YmMxM2Y1M2UwNzFjODQ4NWQ4NzI2YWExOWQxZGQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc5uJfhAFqTQ1NzcyMDIxNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "427bd79a138bc13f53e071c8485d8726aa19d1dd", "author": {"user": null}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/427bd79a138bc13f53e071c8485d8726aa19d1dd", "committedDate": "2020-07-19T04:01:17Z", "message": "pbi connector"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "401a05360a74b165b372f274e1c01b61a5c06ebd", "author": {"user": null}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/401a05360a74b165b372f274e1c01b61a5c06ebd", "committedDate": "2020-07-19T04:21:22Z", "message": "update names"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "11856cdce473256a3048d967b447b43197181604", "author": {"user": null}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/11856cdce473256a3048d967b447b43197181604", "committedDate": "2020-07-20T02:42:45Z", "message": "- add mez file\n- add docs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e6932698c592fdc2d74d9d92e9a044bc01b979f6", "author": {"user": null}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/e6932698c592fdc2d74d9d92e9a044bc01b979f6", "committedDate": "2020-07-20T02:46:49Z", "message": "nit"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4158974559d9fc35e6ea0a610aaf0063ad0397fe", "author": {"user": null}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/4158974559d9fc35e6ea0a610aaf0063ad0397fe", "committedDate": "2020-07-20T02:49:26Z", "message": "nit"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "586793f0d70894c6042fd9177e83c88f24cf4164", "author": {"user": null}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/586793f0d70894c6042fd9177e83c88f24cf4164", "committedDate": "2020-07-20T03:13:33Z", "message": "image resize"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9cb48a4fffa2aa88b59917da2961cba7e4849580", "author": {"user": null}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/9cb48a4fffa2aa88b59917da2961cba7e4849580", "committedDate": "2020-07-20T03:17:21Z", "message": "resize image"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c234b8829b0f5b1864bfe500f2b9053c79c7b12d", "author": {"user": null}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/c234b8829b0f5b1864bfe500f2b9053c79c7b12d", "committedDate": "2020-07-20T03:32:00Z", "message": "remove extra lines"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0d0c0509eea739936f4ee4b81307d0566cb39dad", "author": {"user": null}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/0d0c0509eea739936f4ee4b81307d0566cb39dad", "committedDate": "2020-07-20T03:45:54Z", "message": "nit"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "50d4ccf583d527b263bd8465d29b80f32a9f0a62", "author": {"user": null}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/50d4ccf583d527b263bd8465d29b80f32a9f0a62", "committedDate": "2020-07-20T03:46:55Z", "message": "update mez file"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "023fb674a86c080f802c32fcd46f11c5bfeadba8", "author": {"user": null}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/023fb674a86c080f802c32fcd46f11c5bfeadba8", "committedDate": "2020-07-21T17:39:34Z", "message": "rename connector"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0b857c003716461562dbce6fa10df6090eeaad3d", "author": {"user": null}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/0b857c003716461562dbce6fa10df6090eeaad3d", "committedDate": "2020-07-21T17:40:37Z", "message": "rename mez file"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "06ae48656b35034cd62dd826569b08c9b075a3d9", "author": {"user": null}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/06ae48656b35034cd62dd826569b08c9b075a3d9", "committedDate": "2020-07-23T03:04:10Z", "message": "- add basic & aws auth\n- add unit test\n- add errors\n- enable direct query"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b2ff22274877393d4777bff958616d371ec1de32", "author": {"user": null}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/b2ff22274877393d4777bff958616d371ec1de32", "committedDate": "2020-07-23T03:19:22Z", "message": "Merge branch 'develop' of https://github.com/rupal-bq/sql into feature/odbc/pbi\n\n# Conflicts:\n#\tsql-odbc/.gitignore\n#\tsql-odbc/src/PowerBIConnector/OdfeSqlOdbcPBIConnector.mproj\n#\tsql-odbc/src/PowerBIConnector/OdfeSqlOdbcPBIConnector.pq\n#\tsql-odbc/src/PowerBIConnector/OdfeSqlOdbcPBIConnector.query.pq\n#\tsql-odbc/src/PowerBIConnector/bin/Release/OdfeSqlOdbcPBIConnector.mez"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3f6ff5d99d07e525874fde3a9ab6987dbe5bfadf", "author": {"user": null}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/3f6ff5d99d07e525874fde3a9ab6987dbe5bfadf", "committedDate": "2020-07-23T03:21:15Z", "message": "add connector"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ad73d915d13dce97ea855154d9428e67b09368a9", "author": {"user": null}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/ad73d915d13dce97ea855154d9428e67b09368a9", "committedDate": "2020-07-23T03:41:43Z", "message": "update doc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "91d5cbebad32016daa6445db98ad0fc938a0be65", "author": {"user": null}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/91d5cbebad32016daa6445db98ad0fc938a0be65", "committedDate": "2020-07-23T03:59:03Z", "message": "add ssl for auth"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ddc725bd3cfd70d3501ae325871eaab73b669fd3", "author": {"user": null}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/ddc725bd3cfd70d3501ae325871eaab73b669fd3", "committedDate": "2020-07-23T16:25:05Z", "message": "update docs for errors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b9463517addc5113cbc8bfc60ca7069b6a9e4b83", "author": {"user": null}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/b9463517addc5113cbc8bfc60ca7069b6a9e4b83", "committedDate": "2020-07-23T20:07:00Z", "message": "Merge branch 'develop' of https://github.com/rupal-bq/sql into feature/odbc/pbi"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2bd944c759017fb4c6666d08eae676d1e3a988ea", "author": {"user": null}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/2bd944c759017fb4c6666d08eae676d1e3a988ea", "committedDate": "2020-07-24T20:09:56Z", "message": "- remove sqlgetinfo & sqlcapabilities values from connector"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ed0afb91caaf7daa2e14c71f9ed8ee636969932b", "author": {"user": null}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/ed0afb91caaf7daa2e14c71f9ed8ee636969932b", "committedDate": "2020-07-24T21:20:35Z", "message": "adding EncryptedConnectionString"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "22dc963da1d58323df93640564c37102816d4aa6", "author": {"user": null}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/22dc963da1d58323df93640564c37102816d4aa6", "committedDate": "2020-07-28T04:49:07Z", "message": "Merge branch 'develop' of https://github.com/rupal-bq/sql into feature/odbc/pbi"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "82e9a728bfbb17876121a65e4c46d0018c4d8bc1", "author": {"user": null}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/82e9a728bfbb17876121a65e4c46d0018c4d8bc1", "committedDate": "2020-07-28T17:45:59Z", "message": "add data type for columns"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5022f1f01577b4d31fe2a8b57c4a4f06e571feb0", "author": {"user": null}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/5022f1f01577b4d31fe2a8b57c4a4f06e571feb0", "committedDate": "2020-07-28T19:36:07Z", "message": "add alternate column size"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f4c706876421ea82de028bf88e79ea42411e996e", "author": {"user": null}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/f4c706876421ea82de028bf88e79ea42411e996e", "committedDate": "2020-07-28T19:40:56Z", "message": "reverting changes in catalog test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a76c382c3ead0ef192ed15ba8c37bb32acd0e843", "author": {"user": null}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/a76c382c3ead0ef192ed15ba8c37bb32acd0e843", "committedDate": "2020-07-28T19:47:19Z", "message": "nit"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU2OTY3MDIw", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/627#pullrequestreview-456967020", "createdAt": "2020-07-28T20:01:55Z", "commit": {"oid": "a76c382c3ead0ef192ed15ba8c37bb32acd0e843"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQyMDowMTo1NVrOG4cpFg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQyMDowMTo1NVrOG4cpFg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTg0MjcxMA==", "bodyText": "Why is this?", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/627#discussion_r461842710", "createdAt": "2020-07-28T20:01:55Z", "author": {"login": "kylepbit"}, "path": "sql-odbc/src/IntegrationTests/ITODBCResults/test_odbc_results.cpp", "diffHunk": "@@ -936,7 +937,9 @@ TEST_F(TestSQLDescribeCol, SingleColumnMetadata) {\n     EXPECT_EQ(single_col, m_column_name);\n     EXPECT_EQ(single_col_name_length, m_column_name_length);\n     EXPECT_EQ(single_col_data_type, m_data_type);\n-    EXPECT_EQ(single_col_column_size, m_column_size);\n+    // Value changes according to pagination setup on server", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a76c382c3ead0ef192ed15ba8c37bb32acd0e843"}, "originalPosition": 15}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU2OTY3NDk2", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/627#pullrequestreview-456967496", "createdAt": "2020-07-28T20:02:37Z", "commit": {"oid": "a76c382c3ead0ef192ed15ba8c37bb32acd0e843"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQyMDowMjozOFrOG4cqhw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQyMDowMjozOFrOG4cqhw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTg0MzA3OQ==", "bodyText": "Should we just report the extra columns regardless?", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/627#discussion_r461843079", "createdAt": "2020-07-28T20:02:38Z", "author": {"login": "kylepbit"}, "path": "sql-odbc/src/odfesqlodbc/es_info.cpp", "diffHunk": "@@ -476,8 +492,28 @@ void SetTableTuples(QResultClass *res, const TableResultSet res_type,\n         // information for its Data Preview window.\n         std::string catalog(\"\");\n         bind_tbl[TABLES_CATALOG_NAME]->UpdateData((void *)catalog.c_str(), 0);\n-        for (size_t i = 0; i < binds.size(); i++)\n-            binds[i]->AssignData(&tuple[i]);\n+\n+        for (size_t i = 0; i < binds.size(); i++) {\n+            // Add tuples for SQLColumns\n+            if (binds.size() > COLUMNS_SQL_DATA_TYPE) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a76c382c3ead0ef192ed15ba8c37bb32acd0e843"}, "originalPosition": 32}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "debe0c5bce13bc52a69a6e1e05fdc7faa91d9a19", "author": {"user": null}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/debe0c5bce13bc52a69a6e1e05fdc7faa91d9a19", "committedDate": "2020-07-28T21:42:06Z", "message": "revert changes for column size validation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6add9da5949e1816b5174e13285d3ebb4f204a50", "author": {"user": null}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/6add9da5949e1816b5174e13285d3ebb4f204a50", "committedDate": "2020-07-28T21:50:34Z", "message": "Merge branch 'develop' of https://github.com/rupal-bq/sql into feature/odbc/pbi"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU3MDU5MjY2", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/627#pullrequestreview-457059266", "createdAt": "2020-07-28T22:00:11Z", "commit": {"oid": "6add9da5949e1816b5174e13285d3ebb4f204a50"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQyMjowMDoxMVrOG4g3BA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQyMzo0MDoyMlrOG4jdyQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTkxMTgxMg==", "bodyText": "Can we use SQL type contstants here instead? (eg. SQLWVARCHAR)", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/627#discussion_r461911812", "createdAt": "2020-07-28T22:00:11Z", "author": {"login": "jordanw-bq"}, "path": "sql-odbc/src/IntegrationTests/ITODBCCatalog/test_odbc_catalog.cpp", "diffHunk": "@@ -85,6 +85,9 @@ const std::vector< std::string > flights_data_type = {\n     \"float\",   \"keyword\", \"integer\", \"keyword\", \"keyword\", \"keyword\", \"date\",\n     \"keyword\", \"keyword\", \"boolean\", \"float\",   \"keyword\", \"keyword\", \"keyword\",\n     \"keyword\", \"keyword\", \"keyword\", \"keyword\"};\n+const std::vector< short > flights_sql_data_type = {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6add9da5949e1816b5174e13285d3ebb4f204a50"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTk1NDA2Ng==", "bodyText": "Already included on L22 (might need to expand GH code preview)", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/627#discussion_r461954066", "createdAt": "2020-07-28T23:39:04Z", "author": {"login": "jordanw-bq"}, "path": "sql-odbc/src/odfesqlodbc/es_parse_result.cpp", "diffHunk": "@@ -29,6 +29,7 @@\n #pragma clang diagnostic pop\n #endif  // __APPLE__\n #include \"statement.h\"\n+#include \"es_types.h\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6add9da5949e1816b5174e13285d3ebb4f204a50"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTk1NDUwNQ==", "bodyText": "Almost wondering if it would be worth it to split some of this logic up, now that we're handling special cases for SQLTables & SQLColumns", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/627#discussion_r461954505", "createdAt": "2020-07-28T23:40:22Z", "author": {"login": "jordanw-bq"}, "path": "sql-odbc/src/odfesqlodbc/es_info.cpp", "diffHunk": "@@ -476,8 +492,28 @@ void SetTableTuples(QResultClass *res, const TableResultSet res_type,\n         // information for its Data Preview window.\n         std::string catalog(\"\");\n         bind_tbl[TABLES_CATALOG_NAME]->UpdateData((void *)catalog.c_str(), 0);\n-        for (size_t i = 0; i < binds.size(); i++)\n-            binds[i]->AssignData(&tuple[i]);\n+\n+        for (size_t i = 0; i < binds.size(); i++) {\n+            // Add tuples for SQLColumns\n+            if (binds.size() > COLUMNS_SQL_DATA_TYPE) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTg0MzA3OQ=="}, "originalCommit": {"oid": "a76c382c3ead0ef192ed15ba8c37bb32acd0e843"}, "originalPosition": 32}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a80eee8edfbff508293818db621eb8dd7c704ad8", "author": {"user": null}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/a80eee8edfbff508293818db621eb8dd7c704ad8", "committedDate": "2020-07-29T01:20:24Z", "message": "address PR comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU3MTMzNjAx", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/627#pullrequestreview-457133601", "createdAt": "2020-07-29T01:25:39Z", "commit": {"oid": "a80eee8edfbff508293818db621eb8dd7c704ad8"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU3NzE4MjI1", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/627#pullrequestreview-457718225", "createdAt": "2020-07-29T17:03:17Z", "commit": {"oid": "a80eee8edfbff508293818db621eb8dd7c704ad8"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU3NzIwMjE3", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/627#pullrequestreview-457720217", "createdAt": "2020-07-29T17:05:46Z", "commit": {"oid": "a80eee8edfbff508293818db621eb8dd7c704ad8"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 603, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}