{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI3NjkwMDM0", "number": 856, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMVQwNzo0OTowOVrOE-_NUw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMVQwNzo0OTowOVrOE-_NUw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM0NDgyNzcxOnYy", "diffSide": "RIGHT", "path": "elasticsearch/src/main/java/com/amazon/opendistroforelasticsearch/sql/elasticsearch/planner/logical/rule/MergeSortAndIndexAgg.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMVQwNzo0OTowOVrOH8bv5w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxNjo1ODozNVrOH-m-iQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzEzMTIzOQ==", "bodyText": "Merge sort -- IndexAgg?", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/856#discussion_r533131239", "createdAt": "2020-12-01T07:49:09Z", "author": {"login": "chloe-zh"}, "path": "elasticsearch/src/main/java/com/amazon/opendistroforelasticsearch/sql/elasticsearch/planner/logical/rule/MergeSortAndIndexAgg.java", "diffHunk": "@@ -0,0 +1,94 @@\n+/*\n+ *\n+ *    Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ *    Licensed under the Apache License, Version 2.0 (the \"License\").\n+ *    You may not use this file except in compliance with the License.\n+ *    A copy of the License is located at\n+ *\n+ *        http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *    or in the \"license\" file accompanying this file. This file is distributed\n+ *    on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ *    express or implied. See the License for the specific language governing\n+ *    permissions and limitations under the License.\n+ *\n+ */\n+\n+package com.amazon.opendistroforelasticsearch.sql.elasticsearch.planner.logical.rule;\n+\n+import static com.amazon.opendistroforelasticsearch.sql.planner.optimizer.pattern.Patterns.source;\n+import static com.facebook.presto.matching.Pattern.typeOf;\n+\n+import com.amazon.opendistroforelasticsearch.sql.ast.tree.Sort;\n+import com.amazon.opendistroforelasticsearch.sql.elasticsearch.planner.logical.ElasticsearchLogicalIndexAgg;\n+import com.amazon.opendistroforelasticsearch.sql.expression.Expression;\n+import com.amazon.opendistroforelasticsearch.sql.expression.ReferenceExpression;\n+import com.amazon.opendistroforelasticsearch.sql.expression.aggregation.NamedAggregator;\n+import com.amazon.opendistroforelasticsearch.sql.planner.logical.LogicalPlan;\n+import com.amazon.opendistroforelasticsearch.sql.planner.logical.LogicalSort;\n+import com.amazon.opendistroforelasticsearch.sql.planner.optimizer.Rule;\n+import com.facebook.presto.matching.Capture;\n+import com.facebook.presto.matching.Captures;\n+import com.facebook.presto.matching.Pattern;\n+import java.util.Set;\n+import java.util.concurrent.atomic.AtomicReference;\n+import java.util.stream.Collectors;\n+import lombok.Getter;\n+import lombok.experimental.Accessors;\n+import org.apache.commons.lang3.tuple.Pair;\n+\n+/**\n+ * Merge Aggregation -- IndexAgg to IndexScanAggregation.\n+ */", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4d00a0baacaaf17ecc09e45be1e51d0a64de94e7"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTQxMjM2MQ==", "bodyText": "Done.", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/856#discussion_r535412361", "createdAt": "2020-12-03T16:58:35Z", "author": {"login": "penghuo"}, "path": "elasticsearch/src/main/java/com/amazon/opendistroforelasticsearch/sql/elasticsearch/planner/logical/rule/MergeSortAndIndexAgg.java", "diffHunk": "@@ -0,0 +1,94 @@\n+/*\n+ *\n+ *    Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ *    Licensed under the Apache License, Version 2.0 (the \"License\").\n+ *    You may not use this file except in compliance with the License.\n+ *    A copy of the License is located at\n+ *\n+ *        http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *    or in the \"license\" file accompanying this file. This file is distributed\n+ *    on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ *    express or implied. See the License for the specific language governing\n+ *    permissions and limitations under the License.\n+ *\n+ */\n+\n+package com.amazon.opendistroforelasticsearch.sql.elasticsearch.planner.logical.rule;\n+\n+import static com.amazon.opendistroforelasticsearch.sql.planner.optimizer.pattern.Patterns.source;\n+import static com.facebook.presto.matching.Pattern.typeOf;\n+\n+import com.amazon.opendistroforelasticsearch.sql.ast.tree.Sort;\n+import com.amazon.opendistroforelasticsearch.sql.elasticsearch.planner.logical.ElasticsearchLogicalIndexAgg;\n+import com.amazon.opendistroforelasticsearch.sql.expression.Expression;\n+import com.amazon.opendistroforelasticsearch.sql.expression.ReferenceExpression;\n+import com.amazon.opendistroforelasticsearch.sql.expression.aggregation.NamedAggregator;\n+import com.amazon.opendistroforelasticsearch.sql.planner.logical.LogicalPlan;\n+import com.amazon.opendistroforelasticsearch.sql.planner.logical.LogicalSort;\n+import com.amazon.opendistroforelasticsearch.sql.planner.optimizer.Rule;\n+import com.facebook.presto.matching.Capture;\n+import com.facebook.presto.matching.Captures;\n+import com.facebook.presto.matching.Pattern;\n+import java.util.Set;\n+import java.util.concurrent.atomic.AtomicReference;\n+import java.util.stream.Collectors;\n+import lombok.Getter;\n+import lombok.experimental.Accessors;\n+import org.apache.commons.lang3.tuple.Pair;\n+\n+/**\n+ * Merge Aggregation -- IndexAgg to IndexScanAggregation.\n+ */", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzEzMTIzOQ=="}, "originalCommit": {"oid": "4d00a0baacaaf17ecc09e45be1e51d0a64de94e7"}, "originalPosition": 43}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1928, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}