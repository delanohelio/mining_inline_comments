{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEwNDI5NzM5", "number": 446, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQwMDo1Mzo0NlrOD3b-xQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQwMDo1Mzo0NlrOD3b-xQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU5NDU2NzA5OnYy", "diffSide": "RIGHT", "path": "src/test/java/com/amazon/opendistroforelasticsearch/sql/unittest/planner/QueryPlannerTest.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQwMDo1Mzo0NlrOGNsV7g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQwMDo1ODo0M1rOGNsa9A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzAxMTE4Mg==", "bodyText": "Why are we stubbing getSettings() method - is it being used anywhere?", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/446#discussion_r417011182", "createdAt": "2020-04-29T00:53:46Z", "author": {"login": "abbashus"}, "path": "src/test/java/com/amazon/opendistroforelasticsearch/sql/unittest/planner/QueryPlannerTest.java", "diffHunk": "@@ -110,6 +114,12 @@ public static void initLogger() {\n     public void init() {\n         MockitoAnnotations.initMocks(this);\n \n+        SqlSettings settings = spy(new SqlSettings());\n+        // Force return empty list to avoid ClusterSettings be invoked which is a final class and hard to mock.\n+        // In this case, default value in Setting will be returned all the time.\n+        doReturn(emptyList()).when(settings).getSettings();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3bc9af4baba20ea84f573d911adbba043c6f60bc"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzAxMjQ2OA==", "bodyText": "It's used in setSettings() here. \n  \n    \n      sql/src/main/java/com/amazon/opendistroforelasticsearch/sql/esdomain/LocalClusterState.java\n    \n    \n         Line 125\n      in\n      7c57d72\n    \n    \n    \n    \n\n        \n          \n           for (Setting<?> setting : sqlSettings.getSettings()) {", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/446#discussion_r417012468", "createdAt": "2020-04-29T00:58:43Z", "author": {"login": "zhongnansu"}, "path": "src/test/java/com/amazon/opendistroforelasticsearch/sql/unittest/planner/QueryPlannerTest.java", "diffHunk": "@@ -110,6 +114,12 @@ public static void initLogger() {\n     public void init() {\n         MockitoAnnotations.initMocks(this);\n \n+        SqlSettings settings = spy(new SqlSettings());\n+        // Force return empty list to avoid ClusterSettings be invoked which is a final class and hard to mock.\n+        // In this case, default value in Setting will be returned all the time.\n+        doReturn(emptyList()).when(settings).getSettings();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzAxMTE4Mg=="}, "originalCommit": {"oid": "3bc9af4baba20ea84f573d911adbba043c6f60bc"}, "originalPosition": 33}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2058, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}