{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA4Nzk0NjQ1", "number": 440, "title": "[PPL] Implemeted full functionality of commands in phase0", "bodyText": "Issue #, if available:\nDescription of changes:\n\nThe PR #429 depicted the scope of the commands to support for this phase, but not all commands are having full functionality but only the basic syntax is implemented. Thus this PR implements the rest of the command functionalities.\nAdded unit tests for the commands and the related classes.\nImprove the testing coverage, set the coverage verification rate limit to 1.0.\n\nBy submitting this pull request, I confirm that my contribution is made under the terms of the Apache 2.0 license.", "createdAt": "2020-04-24T22:37:02Z", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/440", "merged": true, "mergeCommit": {"oid": "242ca1f8dbe333d91ed6dc008a1193b6977d6b5e"}, "closed": true, "closedAt": "2020-05-07T18:00:03Z", "author": {"login": "chloe-zh"}, "timelineItems": {"totalCount": 48, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcVC9RxAH2gAyNDA4Nzk0NjQ1OjhhNDRjZmMzZTEyNDZkM2YzOTAxMmFhNWU0NzZmNWU1NzE3YTAxYzQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcfA2NqgFqTQwNzY5MTcxNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "8a44cfc3e1246d3f39012aa5e476f5e5717a01c4", "author": {"user": {"login": "chloe-zh", "name": "Chloe"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/8a44cfc3e1246d3f39012aa5e476f5e5717a01c4", "committedDate": "2020-04-06T18:25:14Z", "message": "m"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "204bb818b31ba0e2726f2cfc9c7b3a27e4994515", "author": {"user": {"login": "chloe-zh", "name": "Chloe"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/204bb818b31ba0e2726f2cfc9c7b3a27e4994515", "committedDate": "2020-04-09T04:45:46Z", "message": "Merge branch 'feature/ppl' of github.com:opendistro-for-elasticsearch/sql into ppl-parser"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3bfdb2844147556cd37a51a325f1f599ec9b4ab5", "author": {"user": {"login": "chloe-zh", "name": "Chloe"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/3bfdb2844147556cd37a51a325f1f599ec9b4ab5", "committedDate": "2020-04-09T17:10:56Z", "message": "Added antlr files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c2f63c040031556f3ad154c09ae996c9b34b55ec", "author": {"user": {"login": "chloe-zh", "name": "Chloe"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/c2f63c040031556f3ad154c09ae996c9b34b55ec", "committedDate": "2020-04-10T01:05:24Z", "message": "Merge remote-tracking branch 'upstream/feature/ppl' into ppl-parser"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "084f380ec79e76c8665e780f40e921564ba33b8d", "author": {"user": {"login": "chloe-zh", "name": "Chloe"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/084f380ec79e76c8665e780f40e921564ba33b8d", "committedDate": "2020-04-12T00:40:23Z", "message": "Added wildcard"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8c45b24b366fb80b3aa67e5dd68ede0f3d765d83", "author": {"user": {"login": "chloe-zh", "name": "Chloe"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/8c45b24b366fb80b3aa67e5dd68ede0f3d765d83", "committedDate": "2020-04-14T04:31:04Z", "message": "Implemented parser for commands of simple syntax"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6b542eb5496b0034f8506a8b15e53071d56686ad", "author": {"user": {"login": "chloe-zh", "name": "Chloe"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/6b542eb5496b0034f8506a8b15e53071d56686ad", "committedDate": "2020-04-14T16:39:34Z", "message": "addressed comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "46bb1dc41b5154bd4274c2dc9b0c2b63b8582a24", "author": {"user": {"login": "chloe-zh", "name": "Chloe"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/46bb1dc41b5154bd4274c2dc9b0c2b63b8582a24", "committedDate": "2020-04-16T22:00:14Z", "message": "Enabled parsing nested fields and arrays in field"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "80b06294773f7013a2f51b72ebce3c71f54257f8", "author": {"user": {"login": "chloe-zh", "name": "Chloe"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/80b06294773f7013a2f51b72ebce3c71f54257f8", "committedDate": "2020-04-17T18:00:26Z", "message": "Added unit tests for nested fields"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ddf9c5a0dd4fc45dab4737cbd122396ddce87b6f", "author": {"user": {"login": "chloe-zh", "name": "Chloe"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/ddf9c5a0dd4fc45dab4737cbd122396ddce87b6f", "committedDate": "2020-04-17T21:30:08Z", "message": "Added Java doc for classes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "17a8503378d37e5ba5d76ef0a888aedd909d3ea4", "author": {"user": {"login": "chloe-zh", "name": "Chloe"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/17a8503378d37e5ba5d76ef0a888aedd909d3ea4", "committedDate": "2020-04-17T21:49:03Z", "message": "Replaced the imported parser with static methods in the parser"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "784df880868ef82a3062bbded3b28a5a3d8412f0", "author": {"user": {"login": "chloe-zh", "name": "Chloe"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/784df880868ef82a3062bbded3b28a5a3d8412f0", "committedDate": "2020-04-17T22:01:36Z", "message": "Addressed comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c251f030006ab69ee24a1aa8c7b1d905d2701703", "author": {"user": {"login": "chloe-zh", "name": "Chloe"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/c251f030006ab69ee24a1aa8c7b1d905d2701703", "committedDate": "2020-04-17T22:22:36Z", "message": "Addressed comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3a92f1169381a911bde9adb31a9e0aa28700be24", "author": {"user": {"login": "chloe-zh", "name": "Chloe"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/3a92f1169381a911bde9adb31a9e0aa28700be24", "committedDate": "2020-04-18T01:58:44Z", "message": "Addressed comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "412f6f05349a36433d8f9697b21591295de0a3ac", "author": {"user": {"login": "chloe-zh", "name": "Chloe"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/412f6f05349a36433d8f9697b21591295de0a3ac", "committedDate": "2020-04-20T18:03:35Z", "message": "changed LogicalPlan to UnresolvedPlan; added test for index name with dots; changed the funcName to String in Function expression"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5430902214ce490e7f4b21371ed9dd5ca903af05", "author": {"user": {"login": "chloe-zh", "name": "Chloe"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/5430902214ce490e7f4b21371ed9dd5ca903af05", "committedDate": "2020-04-20T20:01:15Z", "message": "Merge branch 'feature/ppl' of github.com:opendistro-for-elasticsearch/sql into ppl-parser"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ceced2d3e7a3f4597c764491080249c5fd81b686", "author": {"user": {"login": "chloe-zh", "name": "Chloe"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/ceced2d3e7a3f4597c764491080249c5fd81b686", "committedDate": "2020-04-20T21:19:04Z", "message": "Enabled the rest of comparison operations; modified related tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3ae148076b73717aae5fb3ddd225886442044302", "author": {"user": {"login": "chloe-zh", "name": "Chloe"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/3ae148076b73717aae5fb3ddd225886442044302", "committedDate": "2020-04-21T03:55:03Z", "message": "Added optional arguments in commands"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bd56129da5bede67cdaca9ee743c57e4304481bb", "author": {"user": {"login": "chloe-zh", "name": "Chloe"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/bd56129da5bede67cdaca9ee743c57e4304481bb", "committedDate": "2020-04-21T19:33:53Z", "message": "Reverted nest"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9489e4166b66a0ce8f3682bc195b314477a5d8a5", "author": {"user": {"login": "chloe-zh", "name": "Chloe"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/9489e4166b66a0ce8f3682bc195b314477a5d8a5", "committedDate": "2020-04-21T19:45:13Z", "message": "Removed constant and replaced it with literalValue in antlr parser"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a898546c411297b33e149ce4249ae7376a1db5ac", "author": {"user": {"login": "chloe-zh", "name": "Chloe"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/a898546c411297b33e149ce4249ae7376a1db5ac", "committedDate": "2020-04-22T06:22:37Z", "message": "Simplified the accept methods"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "daf4767ec7586c8892dd54580f3658058ff268ed", "author": {"user": {"login": "chloe-zh", "name": "Chloe"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/daf4767ec7586c8892dd54580f3658058ff268ed", "committedDate": "2020-04-22T19:14:05Z", "message": "Update"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "384eec6325fd698f673076e829fef61d30cf2323", "author": {"user": {"login": "chloe-zh", "name": "Chloe"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/384eec6325fd698f673076e829fef61d30cf2323", "committedDate": "2020-04-22T21:16:43Z", "message": "Merge branch 'ppl-parser' into parser\n\n# Conflicts:\n#\tppl/src/main/java/com/amazon/opendistroforelasticsearch/sql/ppl/node/AbstractNodeVisitor.java\n#\tppl/src/main/java/com/amazon/opendistroforelasticsearch/sql/ppl/parser/AstExpressionBuilder.java\n#\tppl/src/main/java/com/amazon/opendistroforelasticsearch/sql/ppl/plans/dsl/DSL.java\n#\tppl/src/main/java/com/amazon/opendistroforelasticsearch/sql/ppl/plans/logical/Aggregation.java\n#\tppl/src/main/java/com/amazon/opendistroforelasticsearch/sql/ppl/plans/logical/Project.java\n#\tppl/src/test/java/com/amazon/opendistroforelasticsearch/sql/ppl/parser/AstExpressionBuilderTest.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "acb157508ae78ee1fa08975d7bbbbfc36aa45576", "author": {"user": {"login": "chloe-zh", "name": "Chloe"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/acb157508ae78ee1fa08975d7bbbbfc36aa45576", "committedDate": "2020-04-23T08:44:41Z", "message": "Added builder pattern"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2cc689bbf0177d0cea7e6a90a9b45302e5edfdd5", "author": {"user": {"login": "chloe-zh", "name": "Chloe"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/2cc689bbf0177d0cea7e6a90a9b45302e5edfdd5", "committedDate": "2020-04-23T18:06:10Z", "message": "Rolled back to remove builder"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "42609bcc4ac80ae121a22115702e5622a823fe0a", "author": {"user": {"login": "chloe-zh", "name": "Chloe"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/42609bcc4ac80ae121a22115702e5622a823fe0a", "committedDate": "2020-04-23T19:31:49Z", "message": "update"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "092adbfbb4b647dffddacca21efa39d8ec601c33", "author": {"user": {"login": "chloe-zh", "name": "Chloe"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/092adbfbb4b647dffddacca21efa39d8ec601c33", "committedDate": "2020-04-23T19:33:08Z", "message": "Revert \"Added builder pattern\"\n\nThis reverts commit acb15750"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e8c2eff609a8f831ccc215bccd6271aecd059cd8", "author": {"user": {"login": "chloe-zh", "name": "Chloe"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/e8c2eff609a8f831ccc215bccd6271aecd059cd8", "committedDate": "2020-04-23T19:58:36Z", "message": "update"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0c78efa4c6617f6f94bb62ee3f98152989b33f41", "author": {"user": {"login": "chloe-zh", "name": "Chloe"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/0c78efa4c6617f6f94bb62ee3f98152989b33f41", "committedDate": "2020-04-23T20:33:48Z", "message": "Merge remote-tracking branch 'upstream/feature/ppl' into ppl-parser"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bdddc2cf16d6d853a35789b47cf764d9aec1c518", "author": {"user": {"login": "chloe-zh", "name": "Chloe"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/bdddc2cf16d6d853a35789b47cf764d9aec1c518", "committedDate": "2020-04-23T21:42:35Z", "message": "Merge remote-tracking branch 'upstream/feature/ppl' into parser\n\n# Conflicts:\n#\tppl/src/main/antlr/OpenDistroPPLParser.g4\n#\tppl/src/main/java/com/amazon/opendistroforelasticsearch/sql/ppl/node/AbstractNodeVisitor.java\n#\tppl/src/main/java/com/amazon/opendistroforelasticsearch/sql/ppl/parser/AstBuilder.java\n#\tppl/src/main/java/com/amazon/opendistroforelasticsearch/sql/ppl/parser/AstExpressionBuilder.java\n#\tppl/src/main/java/com/amazon/opendistroforelasticsearch/sql/ppl/plans/dsl/DSL.java\n#\tppl/src/main/java/com/amazon/opendistroforelasticsearch/sql/ppl/plans/logical/Aggregation.java\n#\tppl/src/main/java/com/amazon/opendistroforelasticsearch/sql/ppl/plans/logical/Filter.java\n#\tppl/src/main/java/com/amazon/opendistroforelasticsearch/sql/ppl/plans/logical/Project.java\n#\tppl/src/main/java/com/amazon/opendistroforelasticsearch/sql/ppl/plans/logical/Relation.java\n#\tppl/src/main/java/com/amazon/opendistroforelasticsearch/sql/ppl/plans/logical/UnresolvedPlan.java\n#\tppl/src/test/java/com/amazon/opendistroforelasticsearch/sql/ppl/parser/AstBuilderTest.java\n#\tppl/src/test/java/com/amazon/opendistroforelasticsearch/sql/ppl/parser/AstExpressionBuilderTest.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "09db3e57e9833bce2d2b64d46d45f7b53e13b7ad", "author": {"user": {"login": "chloe-zh", "name": "Chloe"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/09db3e57e9833bce2d2b64d46d45f7b53e13b7ad", "committedDate": "2020-04-23T22:20:47Z", "message": "fac"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "370c83d6de4c7f2b6e94f0d088db4a6f91cd5dec", "author": {"user": {"login": "chloe-zh", "name": "Chloe"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/370c83d6de4c7f2b6e94f0d088db4a6f91cd5dec", "committedDate": "2020-04-24T02:02:13Z", "message": "resolved conflicts & merged d4147a981ea0ef364c247fd4da92487dfe629ea1"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5698a1b37a4ba9b57ef42597a59a36d39adef640", "author": {"user": {"login": "chloe-zh", "name": "Chloe"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/5698a1b37a4ba9b57ef42597a59a36d39adef640", "committedDate": "2020-04-24T22:14:55Z", "message": "Added argument factory; refracted in tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d309aac122fcafe5efe2223f92deb2d10643a589", "author": {"user": {"login": "chloe-zh", "name": "Chloe"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/d309aac122fcafe5efe2223f92deb2d10643a589", "committedDate": "2020-04-27T18:28:03Z", "message": "Added sparkline aggregation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bfbb3f979612d6d0045a8442a9b1bb75facdd038", "author": {"user": {"login": "chloe-zh", "name": "Chloe"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/bfbb3f979612d6d0045a8442a9b1bb75facdd038", "committedDate": "2020-04-27T23:08:05Z", "message": "update"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "08ae59f0c7fe006e73ea37593c96ab6ec2f17fc6", "author": {"user": {"login": "chloe-zh", "name": "Chloe"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/08ae59f0c7fe006e73ea37593c96ab6ec2f17fc6", "committedDate": "2020-04-28T20:40:10Z", "message": "improved parser and argument factory test coverage"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2c3df826d42de99bd01aae8477f0c72ce541a0a3", "author": {"user": {"login": "chloe-zh", "name": "Chloe"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/2c3df826d42de99bd01aae8477f0c72ce541a0a3", "committedDate": "2020-04-28T21:47:14Z", "message": "improved parser and argument factory test coverage"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4241f5f1182baa6a04aaaf65d70217c7b2721a52", "author": {"user": {"login": "chloe-zh", "name": "Chloe"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/4241f5f1182baa6a04aaaf65d70217c7b2721a52", "committedDate": "2020-04-28T21:53:28Z", "message": "Added java doc for ArgumentFactory class"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "de40c88eafe22fadaa5d3495d947719f0ff3419b", "author": {"user": {"login": "chloe-zh", "name": "Chloe"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/de40c88eafe22fadaa5d3495d947719f0ff3419b", "committedDate": "2020-04-29T01:33:22Z", "message": "Added field with optional arguments; added tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "11ebadbbe2c0d3a68a66fd104817f810162e426e", "author": {"user": {"login": "chloe-zh", "name": "Chloe"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/11ebadbbe2c0d3a68a66fd104817f810162e426e", "committedDate": "2020-04-29T23:25:28Z", "message": "Added qualifiedname node as nested field"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f3a097ba145303a535f572c4cec6cb678439e90c", "author": {"user": {"login": "chloe-zh", "name": "Chloe"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/f3a097ba145303a535f572c4cec6cb678439e90c", "committedDate": "2020-05-02T22:29:34Z", "message": "Expression -> UnresolvedExpression; DSL -> AstDSL"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "72583c62c5db4322cde5bd8dc3390eb02734a577", "author": {"user": {"login": "chloe-zh", "name": "Chloe"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/72583c62c5db4322cde5bd8dc3390eb02734a577", "committedDate": "2020-05-02T22:58:38Z", "message": "Updated copyright 2019 -> 2020"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c3c1445258c9cff3684f5bd57dc0dd3e6634fde1", "author": {"user": {"login": "chloe-zh", "name": "Chloe"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/c3c1445258c9cff3684f5bd57dc0dd3e6634fde1", "committedDate": "2020-05-03T00:34:59Z", "message": "Replaced getMethod in Relation with string return type"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAyODg3NTM5", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/440#pullrequestreview-402887539", "createdAt": "2020-04-29T17:32:16Z", "commit": {"oid": "de40c88eafe22fadaa5d3495d947719f0ff3419b"}, "state": "COMMENTED", "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQxNzozMjoxNlrOGOJjJA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQxODozNjowMVrOGQNCGA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzQ4OTcwMA==", "bodyText": "could be this(funcName, field, emptyList());?", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/440#discussion_r417489700", "createdAt": "2020-04-29T17:32:16Z", "author": {"login": "dai-chen"}, "path": "core/src/main/java/com/amazon/opendistroforelasticsearch/sql/ast/expression/AggregateFunction.java", "diffHunk": "@@ -34,6 +34,13 @@\n public class AggregateFunction extends Expression {\n     private final String funcName;\n     private final Expression field;\n+    private final List<Expression> argList;\n+\n+    public AggregateFunction(String funcName, Expression field) {\n+        this.funcName = funcName;\n+        this.field = field;\n+        this.argList = null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "de40c88eafe22fadaa5d3495d947719f0ff3419b"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzQ5MzYxNQ==", "bodyText": "Should we add assertion in callback methods?", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/440#discussion_r417493615", "createdAt": "2020-04-29T17:38:46Z", "author": {"login": "dai-chen"}, "path": "ppl/src/test/java/com/amazon/opendistroforelasticsearch/sql/ppl/PPLServiceTest.java", "diffHunk": "@@ -15,19 +15,33 @@\n \n package com.amazon.opendistroforelasticsearch.sql.ppl;\n \n-import com.amazon.opendistroforelasticsearch.sql.ppl.antlr.PPLSyntaxParser;\n import com.amazon.opendistroforelasticsearch.sql.ppl.config.PPLServiceConfig;\n import com.amazon.opendistroforelasticsearch.sql.ppl.domain.PPLQueryRequest;\n import com.amazon.opendistroforelasticsearch.sql.ppl.domain.PPLQueryResponse;\n import org.junit.Test;\n import org.springframework.context.annotation.AnnotationConfigApplicationContext;\n \n public class PPLServiceTest {\n+    private AnnotationConfigApplicationContext context = new AnnotationConfigApplicationContext(\n+            PPLServiceConfig.class);\n+    private PPLService pplService = context.getBean(PPLService.class);\n     @Test\n     public void testExecuteShouldPass() {\n-        AnnotationConfigApplicationContext context = new AnnotationConfigApplicationContext(\n-                PPLServiceConfig.class);\n-        PPLService pplService = context.getBean(PPLService.class);\n+        pplService.execute(new PPLQueryRequest(\"search source=t a=1\", null), new ResponseListener<PPLQueryResponse>() {\n+            @Override\n+            public void onResponse(PPLQueryResponse pplQueryResponse) {\n+\n+            }\n+\n+            @Override\n+            public void onFailure(Exception e) {\n+\n+            }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "de40c88eafe22fadaa5d3495d947719f0ff3419b"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTU3MDg5OQ==", "bodyText": "return attrList?", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/440#discussion_r419570899", "createdAt": "2020-05-04T16:38:41Z", "author": {"login": "dai-chen"}, "path": "core/src/main/java/com/amazon/opendistroforelasticsearch/sql/ast/expression/AttributeList.java", "diffHunk": "@@ -29,12 +29,12 @@\n @ToString\n @EqualsAndHashCode(callSuper = false)\n @AllArgsConstructor\n-public class AttributeList extends Expression {\n+public class AttributeList extends UnresolvedExpression {\n     @Getter\n-    private List<Expression> attrList;\n+    private List<UnresolvedExpression> attrList;\n \n     @Override\n-    public List<Expression> getChild() {\n+    public List<UnresolvedExpression> getChild() {\n         return ImmutableList.of();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c3c1445258c9cff3684f5bd57dc0dd3e6634fde1"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTU3MTg4Mg==", "bodyText": "return fieldArgs?", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/440#discussion_r419571882", "createdAt": "2020-05-04T16:40:18Z", "author": {"login": "dai-chen"}, "path": "core/src/main/java/com/amazon/opendistroforelasticsearch/sql/ast/expression/Field.java", "diffHunk": "@@ -0,0 +1,57 @@\n+/*\n+ *   Copyright 2019 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ *   Licensed under the Apache License, Version 2.0 (the \"License\").\n+ *   You may not use this file except in compliance with the License.\n+ *   A copy of the License is located at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *   or in the \"license\" file accompanying this file. This file is distributed\n+ *   on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ *   express or implied. See the License for the specific language governing\n+ *   permissions and limitations under the License.\n+ */\n+\n+package com.amazon.opendistroforelasticsearch.sql.ast.expression;\n+\n+import com.amazon.opendistroforelasticsearch.sql.ast.AbstractNodeVisitor;\n+import com.google.common.collect.ImmutableList;\n+import java.util.List;\n+import lombok.AllArgsConstructor;\n+import lombok.EqualsAndHashCode;\n+import lombok.Getter;\n+import lombok.ToString;\n+\n+@Getter\n+@ToString\n+@EqualsAndHashCode(callSuper = false)\n+@AllArgsConstructor\n+public class Field extends UnresolvedExpression {\n+    private QualifiedName field;\n+    private List<UnresolvedExpression> fieldArgs;\n+\n+    public Field(QualifiedName field) {\n+        this.field = field;\n+        this.fieldArgs = null;\n+    }\n+\n+    public Field(String field) {\n+        this.field = new QualifiedName(field);\n+    }\n+\n+    public Field(String field, List<UnresolvedExpression> fieldArgs) {\n+        this.field = new QualifiedName(field);\n+        this.fieldArgs = fieldArgs;\n+    }\n+\n+    @Override\n+    public List<UnresolvedExpression> getChild() {\n+        return ImmutableList.of();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c3c1445258c9cff3684f5bd57dc0dd3e6634fde1"}, "originalPosition": 50}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTU3MzQxNQ==", "bodyText": "Please make them final if not optional and prefer emptyList over null.", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/440#discussion_r419573415", "createdAt": "2020-05-04T16:42:42Z", "author": {"login": "dai-chen"}, "path": "core/src/main/java/com/amazon/opendistroforelasticsearch/sql/ast/expression/Field.java", "diffHunk": "@@ -0,0 +1,57 @@\n+/*\n+ *   Copyright 2019 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ *   Licensed under the Apache License, Version 2.0 (the \"License\").\n+ *   You may not use this file except in compliance with the License.\n+ *   A copy of the License is located at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *   or in the \"license\" file accompanying this file. This file is distributed\n+ *   on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ *   express or implied. See the License for the specific language governing\n+ *   permissions and limitations under the License.\n+ */\n+\n+package com.amazon.opendistroforelasticsearch.sql.ast.expression;\n+\n+import com.amazon.opendistroforelasticsearch.sql.ast.AbstractNodeVisitor;\n+import com.google.common.collect.ImmutableList;\n+import java.util.List;\n+import lombok.AllArgsConstructor;\n+import lombok.EqualsAndHashCode;\n+import lombok.Getter;\n+import lombok.ToString;\n+\n+@Getter\n+@ToString\n+@EqualsAndHashCode(callSuper = false)\n+@AllArgsConstructor\n+public class Field extends UnresolvedExpression {\n+    private QualifiedName field;\n+    private List<UnresolvedExpression> fieldArgs;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c3c1445258c9cff3684f5bd57dc0dd3e6634fde1"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTY0MTE2Ng==", "bodyText": "Use util methods in AstDSL?", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/440#discussion_r419641166", "createdAt": "2020-05-04T18:31:12Z", "author": {"login": "dai-chen"}, "path": "ppl/src/main/java/com/amazon/opendistroforelasticsearch/sql/ppl/parser/AstExpressionBuilder.java", "diffHunk": "@@ -102,40 +103,53 @@ public Expression visitInExpr(InExprContext ctx) {\n                         .collect(Collectors.toList()));\n     }\n \n-    /** Boolean expression */\n+    /** Field expression */\n     @Override\n-    public Expression visitBooleanExpression(BooleanExpressionContext ctx) {\n-        return new Literal(ctx.booleanLiteral().getText(), DataType.BOOLEAN);\n+    public UnresolvedExpression visitFieldExpression(FieldExpressionContext ctx) {\n+        return new Field((QualifiedName) visit(ctx.qualifiedName()));\n     }\n \n-\n-    /** Field expression */\n     @Override\n-    public Expression visitFieldExpression(FieldExpressionContext ctx) {\n-        return new UnresolvedAttribute(ctx.getText());\n+    public UnresolvedExpression visitWcFieldExpression(WcFieldExpressionContext ctx) {\n+        return new Field((QualifiedName) visit(ctx.wcQualifiedName()));\n     }\n \n     @Override\n-    public Expression visitWcFieldExpression(WcFieldExpressionContext ctx) {\n-        return new UnresolvedAttribute(ctx.getText());\n+    public UnresolvedExpression visitSortField(SortFieldContext ctx) {\n+        return new Field(\n+                ctx.sortFieldExpression().fieldExpression().getText(),\n+                Arrays.asList(\n+                        ctx.MINUS() != null\n+                                ? new Argument(\"exclude\", new Literal(true, DataType.BOOLEAN))\n+                                : new Argument(\"exclude\", new Literal(false, DataType.BOOLEAN)),\n+                        ctx.sortFieldExpression().AUTO() != null\n+                                ? new Argument(\"type\", new Literal(\"auto\", DataType.STRING))\n+                                : ctx.sortFieldExpression().IP() != null\n+                                ? new Argument(\"type\", new Literal(\"ip\", DataType.STRING))\n+                                : ctx.sortFieldExpression().NUM() != null\n+                                ? new Argument(\"type\", new Literal(\"num\", DataType.STRING))\n+                                : ctx.sortFieldExpression().STR() != null\n+                                ? new Argument(\"type\", new Literal(\"str\", DataType.STRING))\n+                                : new Argument(\"type\", new Literal(null, DataType.NULL))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c3c1445258c9cff3684f5bd57dc0dd3e6634fde1"}, "originalPosition": 158}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTY0MzkyOA==", "bodyText": "Could tableName be only QualifiedName? Or it could some other UnresolvedExpression in some case?", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/440#discussion_r419643928", "createdAt": "2020-05-04T18:36:01Z", "author": {"login": "dai-chen"}, "path": "core/src/main/java/com/amazon/opendistroforelasticsearch/sql/ast/tree/Relation.java", "diffHunk": "@@ -16,22 +16,25 @@\n package com.amazon.opendistroforelasticsearch.sql.ast.tree;\n \n import com.amazon.opendistroforelasticsearch.sql.ast.AbstractNodeVisitor;\n+import com.amazon.opendistroforelasticsearch.sql.ast.expression.UnresolvedExpression;\n import com.google.common.collect.ImmutableList;\n import java.util.List;\n import lombok.EqualsAndHashCode;\n-import lombok.Getter;\n import lombok.RequiredArgsConstructor;\n import lombok.ToString;\n \n /**\n  * Logical plan node of Relation, the interface for building the searching sources\n  */\n-@Getter\n @ToString\n @EqualsAndHashCode(callSuper = false)\n @RequiredArgsConstructor\n public class Relation extends UnresolvedPlan {\n-    private final String tableName;\n+    private final UnresolvedExpression tableName;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c3c1445258c9cff3684f5bd57dc0dd3e6634fde1"}, "originalPosition": 21}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d2c13caafa700ec4c6e88b79673adb55b966424b", "author": {"user": {"login": "chloe-zh", "name": "Chloe"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/d2c13caafa700ec4c6e88b79673adb55b966424b", "committedDate": "2020-05-04T19:33:45Z", "message": "Addressed comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA3MDU3MjEz", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/440#pullrequestreview-407057213", "createdAt": "2020-05-06T23:35:23Z", "commit": {"oid": "d2c13caafa700ec4c6e88b79673adb55b966424b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d9ddd4cdec1c413bb26371d6426ffa8408e0e04f", "author": {"user": {"login": "chloe-zh", "name": "Chloe"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/d9ddd4cdec1c413bb26371d6426ffa8408e0e04f", "committedDate": "2020-05-07T17:34:01Z", "message": "Added assert in ppl service test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA3NjkxNzE2", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/440#pullrequestreview-407691716", "createdAt": "2020-05-07T17:36:57Z", "commit": {"oid": "d9ddd4cdec1c413bb26371d6426ffa8408e0e04f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 660, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}