{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc0Mzk0OTM2", "number": 716, "title": "Support date, time, timestamp types in JDBC", "bodyText": "Issue #, if available:\nDescription of changes:\nChanged mappings between es and types of date, time, timestamp.\nPreviously:\n\n\n\nES type from mapping\nto JDBC type\n\n\n\n\nDate\nTimestamp\n\n\n\n\n\n\nfrom JDBC type\nto ES type (schema)\n\n\n\n\nDate\nDate\n\n\nTimestamp\nDate\n\n\n\nCurrently:\n\n\n\nMapping in ES\nJDBC\nResulted schema\n\n\n\n\nDate\nTimestamp\nTimestamp\n\n\n\nDate\nDate\n\n\n\nTime\nTime\n\n\n\nFixed the dayofmonth function\n\nThe implementation of dayofmonth for ExprValue was incorrect, fixed it to the correct one.\nAllows the function with string type argument, and grants it as the date type to stay consistent with the other databases. For example, previously we only support dayofmonth(date('2020-08-27')) and return 27 as the result, but dayofmonth('2020-08-27') throws semantic exception; now we support both of these two inputs and return 27.\nAdded comparison test for dayofmonth function.\n\nBy submitting this pull request, I confirm that my contribution is made under the terms of the Apache 2.0 license.", "createdAt": "2020-08-27T01:50:12Z", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/716", "merged": true, "mergeCommit": {"oid": "ffc07feb18c5bb51daf49da6143cf8fd286b5f96"}, "closed": true, "closedAt": "2020-09-15T01:03:44Z", "author": {"login": "chloe-zh"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdC1EmygH2gAyNDc0Mzk0OTM2OjI0YzRiZGIyZGQwNTYzYmU4MjQyNmZkNjQ1YmUwNWRlOTI3NjIwOWM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdI8D6AAFqTQ4ODIyODUyNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "24c4bdb2dd0563be82426fd645be05de9276209c", "author": {"user": {"login": "chloe-zh", "name": "Chloe"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/24c4bdb2dd0563be82426fd645be05de9276209c", "committedDate": "2020-08-27T00:15:05Z", "message": "Support date, time, timestamp types in JDBC"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d3c0e78aeca8f19bf105bfa9b21181a31bc352da", "author": {"user": {"login": "chloe-zh", "name": "Chloe"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/d3c0e78aeca8f19bf105bfa9b21181a31bc352da", "committedDate": "2020-08-27T01:26:46Z", "message": "update"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "089694208bb97c66c9a3762b1f55a7629123a696", "author": {"user": {"login": "chloe-zh", "name": "Chloe"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/089694208bb97c66c9a3762b1f55a7629123a696", "committedDate": "2020-08-27T01:47:31Z", "message": "update"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fc7daae4544c0b64cb41493e2df183acff6c0c5c", "author": {"user": {"login": "chloe-zh", "name": "Chloe"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/fc7daae4544c0b64cb41493e2df183acff6c0c5c", "committedDate": "2020-08-27T17:52:51Z", "message": "update"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6db268f936c6e4948dfbb7673193c0efa65d7eb8", "author": {"user": {"login": "chloe-zh", "name": "Chloe"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/6db268f936c6e4948dfbb7673193c0efa65d7eb8", "committedDate": "2020-08-27T18:53:33Z", "message": "update"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc3MTg5NTYx", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/716#pullrequestreview-477189561", "createdAt": "2020-08-28T01:46:34Z", "commit": {"oid": "6db268f936c6e4948dfbb7673193c0efa65d7eb8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQwMTo0NjozNFrOHImxFg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQwMTo0NjozNFrOHImxFg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODc4NTgxNA==", "bodyText": "DATE to TIMESTAMP?", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/716#discussion_r478785814", "createdAt": "2020-08-28T01:46:34Z", "author": {"login": "penghuo"}, "path": "sql-jdbc/src/main/java/com/amazon/opendistroforelasticsearch/jdbc/types/ElasticsearchType.java", "diffHunk": "@@ -71,6 +73,8 @@\n     NESTED(JDBCType.STRUCT, null, 0, 0, false),\n     OBJECT(JDBCType.STRUCT, null, 0, 0, false),\n     DATE(JDBCType.TIMESTAMP, Timestamp.class, 24, 24, false),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6db268f936c6e4948dfbb7673193c0efa65d7eb8"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc3MTkwNDkz", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/716#pullrequestreview-477190493", "createdAt": "2020-08-28T01:49:48Z", "commit": {"oid": "6db268f936c6e4948dfbb7673193c0efa65d7eb8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQwMTo0OTo0OFrOHIm0PQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQwMTo0OTo0OFrOHIm0PQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODc4NjYyMQ==", "bodyText": "could you confirm this? dayofmonth doesn't accept DATE? e.g. dayofmonth(CURDATE()) should work.", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/716#discussion_r478786621", "createdAt": "2020-08-28T01:49:48Z", "author": {"login": "penghuo"}, "path": "core/src/main/java/com/amazon/opendistroforelasticsearch/sql/expression/datetime/DateTimeFunction.java", "diffHunk": "@@ -78,7 +78,8 @@ private FunctionResolver date() {\n   private FunctionResolver dayOfMonth() {\n     return define(DAYOFMONTH.getName(),\n         impl(nullMissingHandling(DateTimeFunction::exprDayOfMonth),\n-            INTEGER, DATE)\n+            INTEGER, DATE),\n+        impl(nullMissingHandling(DateTimeFunction::exprDayOfMonth), INTEGER, STRING)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6db268f936c6e4948dfbb7673193c0efa65d7eb8"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg4MTEzODEy", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/716#pullrequestreview-488113812", "createdAt": "2020-09-14T20:24:18Z", "commit": {"oid": "6db268f936c6e4948dfbb7673193c0efa65d7eb8"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg4MjI4NTI3", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/716#pullrequestreview-488228527", "createdAt": "2020-09-14T23:47:12Z", "commit": {"oid": "6db268f936c6e4948dfbb7673193c0efa65d7eb8"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 628, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}