{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMyMTQ2MDM2", "number": 887, "title": "Add basic PPL support to CLI for the purpose of doctest", "bodyText": "Issue #, if available:\n#922\nCurrently the doctest module dependes on sql-cli, however it's installed through a test release version on test.pypi, the source code of that version is not consistent with the current code base. This PR will migrate the code from developer's branch to the main repo.\nDescription of changes:\n\nAdd basic ppl support for the purpose of doctest module.\nAdd command option -l for query language, be default it uses sql, so it doesn't break the original user experience. Additionally, we add ppl as an option to run ppl commands.\n\nNote\nThis is not an official support for ppl in the cli, even though the core logic is added only for doctest.\nBy submitting this pull request, I confirm that my contribution is made under the terms of the Apache 2.0 license.", "createdAt": "2020-12-03T22:02:25Z", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/887", "merged": true, "mergeCommit": {"oid": "e0d72a2545ac868abbd93cbac344081b1c5a9b98"}, "closed": true, "closedAt": "2020-12-10T20:59:03Z", "author": {"login": "zhongnansu"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdipXnpAH2gAyNTMyMTQ2MDM2OjI5NTgzNTRmY2EzY2NlYTI4OTViNzc1YTQzNWMxYjRjYmVjMTM0OWQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdk438hAH2gAyNTMyMTQ2MDM2OjNkMzE1OGZiY2QzNmUwNDUwMDEyMjE2YzU3YzA4ZTU5NGMwODMxYTM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2958354fca3ccea2895b775a435c1b4cbec1349d", "author": {"user": {"login": "zhongnansu", "name": "Zhongnan Su"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/2958354fca3ccea2895b775a435c1b4cbec1349d", "committedDate": "2020-12-03T20:42:34Z", "message": "add ppl support"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4b81d03a59d7fc69fc28938d022819c8d90ba62f", "author": {"user": {"login": "zhongnansu", "name": "Zhongnan Su"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/4b81d03a59d7fc69fc28938d022819c8d90ba62f", "committedDate": "2020-12-03T20:47:42Z", "message": "update cli github action to use 7.10"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "68e246e3f249c5f8a13fab148f74502ae8fec214", "author": {"user": {"login": "zhongnansu", "name": "Zhongnan Su"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/68e246e3f249c5f8a13fab148f74502ae8fec214", "committedDate": "2020-12-03T20:52:22Z", "message": "update cli github action"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8ecfd9c307388ad6d06df62c5934d133ca6a68ea", "author": {"user": {"login": "zhongnansu", "name": "Zhongnan Su"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/8ecfd9c307388ad6d06df62c5934d133ca6a68ea", "committedDate": "2020-12-03T20:55:05Z", "message": "update"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0f4837f698fcb9266aca6a3347dcb04356a44829", "author": {"user": {"login": "zhongnansu", "name": "Zhongnan Su"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/0f4837f698fcb9266aca6a3347dcb04356a44829", "committedDate": "2020-12-03T21:10:14Z", "message": "update-2"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1482b2ac3282ec33626d0013ebfb21cd0de00fbf", "author": {"user": {"login": "zhongnansu", "name": "Zhongnan Su"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/1482b2ac3282ec33626d0013ebfb21cd0de00fbf", "committedDate": "2020-12-03T21:47:16Z", "message": "update cli dependency used in doctest"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ3Nzk1MjYw", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/887#pullrequestreview-547795260", "createdAt": "2020-12-09T02:47:20Z", "commit": {"oid": "1482b2ac3282ec33626d0013ebfb21cd0de00fbf"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQwMjo0NzoyMFrOIB_vQA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQwMjo0NzoyMFrOIB_vQA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODk2Mzc3Ng==", "bodyText": "7.10.0 & 1.12.0.0?", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/887#discussion_r538963776", "createdAt": "2020-12-09T02:47:20Z", "author": {"login": "chloe-zh"}, "path": ".github/workflows/sql-cli-test-and-build-workflow.yml", "diffHunk": "@@ -32,11 +32,11 @@ jobs:\n         run: |\n           sudo add-apt-repository ppa:openjdk-r/ppa\n           sudo apt update\n-          sudo apt install openjdk-11-jdk\n+          sudo apt install openjdk-13-jdk\n           sudo apt install unzip\n-          wget https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-oss-7.6.1-amd64.deb\n-          sudo dpkg -i elasticsearch-oss-7.6.1-amd64.deb\n-          sudo /usr/share/elasticsearch/bin/elasticsearch-plugin install https://d3g5vo6xdbdb9a.cloudfront.net/downloads/elasticsearch-plugins/opendistro-sql/opendistro_sql-1.6.0.0.zip\n+          wget https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-oss-7.9.1-amd64.deb\n+          sudo dpkg -i elasticsearch-oss-7.9.1-amd64.deb\n+          sudo /usr/share/elasticsearch/bin/elasticsearch-plugin install --batch https://d3g5vo6xdbdb9a.cloudfront.net/downloads/elasticsearch-plugins/opendistro-sql/opendistro_sql-1.11.0.0.zip", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1482b2ac3282ec33626d0013ebfb21cd0de00fbf"}, "originalPosition": 12}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1e7671347d6ec2adcbc7f1240ba87e7920105fda", "author": {"user": {"login": "zhongnansu", "name": "Zhongnan Su"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/1e7671347d6ec2adcbc7f1240ba87e7920105fda", "committedDate": "2020-12-09T04:06:55Z", "message": "update sql version to 1.12.0.0 in gh action"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ3ODI3NDkx", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/887#pullrequestreview-547827491", "createdAt": "2020-12-09T04:31:37Z", "commit": {"oid": "1e7671347d6ec2adcbc7f1240ba87e7920105fda"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ4NDUzNDc3", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/887#pullrequestreview-548453477", "createdAt": "2020-12-09T18:01:04Z", "commit": {"oid": "1e7671347d6ec2adcbc7f1240ba87e7920105fda"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3d3158fbcd36e0450012216c57c08e594c0831a3", "author": {"user": {"login": "zhongnansu", "name": "Zhongnan Su"}}, "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/3d3158fbcd36e0450012216c57c08e594c0831a3", "committedDate": "2020-12-10T19:54:18Z", "message": "update README"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 579, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}