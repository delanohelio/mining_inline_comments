{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY4MzEyODQy", "number": 1407, "title": "Owls 79377", "bodyText": "Modified Sample Script (samples/charts/util/setup.sh) to support Helm Version 2.x and 3.x", "createdAt": "2020-01-29T00:15:46Z", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1407", "merged": true, "mergeCommit": {"oid": "3b900e8bd5fc86beaf164703239d608766fa860e"}, "closed": true, "closedAt": "2020-02-07T16:37:52Z", "author": {"login": "anpanigr"}, "timelineItems": {"totalCount": 20, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb-4TBvAH2gAyMzY4MzEyODQyOjIxNmNmNjg2NTU3ZDEwNjg4M2FmMDVlOGY2ODgzZmRkYmVjMjUxYmQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcB_WMYAH2gAyMzY4MzEyODQyOjZiYTU2NGQzNzgyODRjZjQ2OTViOTdiM2FjMjc5MzIyOGQ5NjhjMWE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "216cf686557d106883af05e8f6883fddbec251bd", "author": {"user": null}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/216cf686557d106883af05e8f6883fddbec251bd", "committedDate": "2020-01-28T21:33:42Z", "message": "Modified setup.sh to work with Helm 2.x/3.x"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2d29cc4e079ed132ca67aa7b01f94de52404509a", "author": {"user": null}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/2d29cc4e079ed132ca67aa7b01f94de52404509a", "committedDate": "2020-01-29T00:07:42Z", "message": "Modified CopyRight Statement"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9b9bebab203f6bd15e3a47afd2f027987f1f2e20", "author": {"user": null}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/9b9bebab203f6bd15e3a47afd2f027987f1f2e20", "committedDate": "2020-01-29T00:09:48Z", "message": "Merge branch 'develop' of https://github.com/oracle/weblogic-kubernetes-operator into OWLS-79377"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUwMTAzODMz", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1407#pullrequestreview-350103833", "createdAt": "2020-01-29T13:29:09Z", "commit": {"oid": "9b9bebab203f6bd15e3a47afd2f027987f1f2e20"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxMzoyOTowOVrOFjIVVw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxMzozMDoxN1rOFjIXbA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjM4MTAxNQ==", "bodyText": "This is incorrect.  It should be ,, so \"2018, 2020\"", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1407#discussion_r372381015", "createdAt": "2020-01-29T13:29:09Z", "author": {"login": "rjeberhard"}, "path": "kubernetes/samples/charts/util/setup.sh", "diffHunk": "@@ -1,12 +1,36 @@\n #!/bin/bash\n-# Copyright (c) 2018, 2019, Oracle Corporation and/or its affiliates.  All rights reserved.\n+# Copyright (c) 2018,2019,2020 Oracle Corporation and/or its affiliates.  All rights reserved.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b9bebab203f6bd15e3a47afd2f027987f1f2e20"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjM4MTI0Nw==", "bodyText": "uninstalled", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1407#discussion_r372381247", "createdAt": "2020-01-29T13:29:40Z", "author": {"login": "rjeberhard"}, "path": "kubernetes/samples/charts/util/setup.sh", "diffHunk": "@@ -130,12 +154,12 @@ function deleteVoyager() {\n }\n \n function deleteTraefik() {\n-  if [ \"$(helm list | grep $TNAME |  wc -l)\" = 1 ]; then\n-    echo \"Delete Traefik operator.\" \n-    helm delete --purge $TNAME\n-    kubectl delete ns traefik\n+  if [ \"$(helm list ${t_list_args}| grep $TNAME |  wc -l)\" = 1 ]; then\n+    echo \"Uninstall Traefik operator.\" \n+    helm uninstall $TNAME ${t_uninstall_args}\n+    kubectl delete ns ${TSPACE}\n   else\n-    echo \"Traefik operator has already been deleted.\" \n+    echo \"Traefik operator has already been unistalled\" ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b9bebab203f6bd15e3a47afd2f027987f1f2e20"}, "originalPosition": 117}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjM4MTQ0Nw==", "bodyText": "Uninstalling?", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1407#discussion_r372381447", "createdAt": "2020-01-29T13:30:06Z", "author": {"login": "rjeberhard"}, "path": "kubernetes/samples/charts/util/setup.sh", "diffHunk": "@@ -130,12 +154,12 @@ function deleteVoyager() {\n }\n \n function deleteTraefik() {\n-  if [ \"$(helm list | grep $TNAME |  wc -l)\" = 1 ]; then\n-    echo \"Delete Traefik operator.\" \n-    helm delete --purge $TNAME\n-    kubectl delete ns traefik\n+  if [ \"$(helm list ${t_list_args}| grep $TNAME |  wc -l)\" = 1 ]; then\n+    echo \"Uninstall Traefik operator.\" ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b9bebab203f6bd15e3a47afd2f027987f1f2e20"}, "originalPosition": 112}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjM4MTU0OA==", "bodyText": "Uninstalling?", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1407#discussion_r372381548", "createdAt": "2020-01-29T13:30:17Z", "author": {"login": "rjeberhard"}, "path": "kubernetes/samples/charts/util/setup.sh", "diffHunk": "@@ -111,13 +135,13 @@ function purgeCRDs() {\n }\n \n function deleteVoyager() {\n-  if [ \"$(helm list | grep $VNAME |  wc -l)\" = 1 ]; then\n-    echo \"Delete Voyager Operator. \"\n-    helm delete --purge $VNAME \n-    kubectl delete ns voyager\n+  if [ \"$(helm list ${v_list_args} | grep $VNAME |  wc -l)\" = 1 ]; then\n+    echo \"Uninstall Voyager Operator. \"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b9bebab203f6bd15e3a47afd2f027987f1f2e20"}, "originalPosition": 93}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUwMTk1ODEx", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1407#pullrequestreview-350195811", "createdAt": "2020-01-29T15:28:38Z", "commit": {"oid": "9b9bebab203f6bd15e3a47afd2f027987f1f2e20"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUwMjIyODM0", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1407#pullrequestreview-350222834", "createdAt": "2020-01-29T16:00:29Z", "commit": {"oid": "9b9bebab203f6bd15e3a47afd2f027987f1f2e20"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxNjowMDozMFrOFjN7kA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxNjowMDozMFrOFjN7kA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjQ3MjcyMA==", "bodyText": "Reverse the logic here and check for V2 instead of V3 (more future proofing).", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1407#discussion_r372472720", "createdAt": "2020-01-29T16:00:30Z", "author": {"login": "tbarnes-us"}, "path": "kubernetes/samples/charts/util/setup.sh", "diffHunk": "@@ -1,12 +1,36 @@\n #!/bin/bash\n-# Copyright (c) 2018, 2019, Oracle Corporation and/or its affiliates.  All rights reserved.\n+# Copyright (c) 2018,2019,2020 Oracle Corporation and/or its affiliates.  All rights reserved.\n # Licensed under the Universal Permissive License v 1.0 as shown at https://oss.oracle.com/licenses/upl.\n \n #  This script is to create or delete Ingress controllers. We support two ingress controllers: traefik and voyager.\n \n MYDIR=\"$(dirname \"$(readlink -f \"$0\")\")\"\n VNAME=voyager-operator  # release name of Voyager\n TNAME=traefik-operator  # release name of Traefik\n+VSPACE=voyager # NameSpace for Voyager\n+TSPACE=traefik   # NameSpace for Traefik\n+\n+helm version --short | grep v3\n+[[ $? == 0 ]] && HELM_VERSION=V3\n+[[ $? == 1 ]] && HELM_VERSION=V2\n+\n+echo \"Detected Helm Version [$HELM_VERSION]\"\n+\n+if [ \"$HELM_VERSION\" == \"V3\" ]; then", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b9bebab203f6bd15e3a47afd2f027987f1f2e20"}, "originalPosition": 20}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUwMjI0NDgz", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1407#pullrequestreview-350224483", "createdAt": "2020-01-29T16:02:26Z", "commit": {"oid": "9b9bebab203f6bd15e3a47afd2f027987f1f2e20"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxNjowMjoyN1rOFjOAlw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxNjowMjoyN1rOFjOAlw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjQ3NDAwNw==", "bodyText": "This logic looks like it will return V2 if the helm version actually returns V4 or later.  Can you grep for v2 instead?  That will future proof this code (assuming V4 and V3 have the same syntax).", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1407#discussion_r372474007", "createdAt": "2020-01-29T16:02:27Z", "author": {"login": "tbarnes-us"}, "path": "kubernetes/samples/charts/util/setup.sh", "diffHunk": "@@ -1,12 +1,36 @@\n #!/bin/bash\n-# Copyright (c) 2018, 2019, Oracle Corporation and/or its affiliates.  All rights reserved.\n+# Copyright (c) 2018,2019,2020 Oracle Corporation and/or its affiliates.  All rights reserved.\n # Licensed under the Universal Permissive License v 1.0 as shown at https://oss.oracle.com/licenses/upl.\n \n #  This script is to create or delete Ingress controllers. We support two ingress controllers: traefik and voyager.\n \n MYDIR=\"$(dirname \"$(readlink -f \"$0\")\")\"\n VNAME=voyager-operator  # release name of Voyager\n TNAME=traefik-operator  # release name of Traefik\n+VSPACE=voyager # NameSpace for Voyager\n+TSPACE=traefik   # NameSpace for Traefik\n+\n+helm version --short | grep v3\n+[[ $? == 0 ]] && HELM_VERSION=V3\n+[[ $? == 1 ]] && HELM_VERSION=V2", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b9bebab203f6bd15e3a47afd2f027987f1f2e20"}, "originalPosition": 16}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9c81cb9eb80d6eda8f089df05a5cce4e39b27a00", "author": {"user": null}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/9c81cb9eb80d6eda8f089df05a5cce4e39b27a00", "committedDate": "2020-01-29T17:54:12Z", "message": "resolution to review comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUwMzI0MjIy", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1407#pullrequestreview-350324222", "createdAt": "2020-01-29T18:21:18Z", "commit": {"oid": "9c81cb9eb80d6eda8f089df05a5cce4e39b27a00"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxODoyMToxOVrOFjSt9g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxODoyNDo0M1rOFjS1Iw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjU1MTE1OA==", "bodyText": "fix copyright line please\n# Copyright (c) 2018, 2020, Oracle Corporation and/or its affiliates.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1407#discussion_r372551158", "createdAt": "2020-01-29T18:21:19Z", "author": {"login": "markxnelson"}, "path": "kubernetes/samples/charts/util/setup.sh", "diffHunk": "@@ -1,12 +1,36 @@\n #!/bin/bash\n-# Copyright (c) 2018, 2019, Oracle Corporation and/or its affiliates.  All rights reserved.\n+# Copyright (c) 2018,2020 Oracle Corporation and/or its affiliates.  All rights reserved.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c81cb9eb80d6eda8f089df05a5cce4e39b27a00"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjU1MTk0Mw==", "bodyText": "check specifically for the string you want instead of assuming that the lack of presence means it is the other version", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1407#discussion_r372551943", "createdAt": "2020-01-29T18:22:39Z", "author": {"login": "markxnelson"}, "path": "kubernetes/samples/charts/util/setup.sh", "diffHunk": "@@ -1,12 +1,36 @@\n #!/bin/bash\n-# Copyright (c) 2018, 2019, Oracle Corporation and/or its affiliates.  All rights reserved.\n+# Copyright (c) 2018,2020 Oracle Corporation and/or its affiliates.  All rights reserved.\n # Licensed under the Universal Permissive License v 1.0 as shown at https://oss.oracle.com/licenses/upl.\n \n #  This script is to create or delete Ingress controllers. We support two ingress controllers: traefik and voyager.\n \n MYDIR=\"$(dirname \"$(readlink -f \"$0\")\")\"\n VNAME=voyager-operator  # release name of Voyager\n TNAME=traefik-operator  # release name of Traefik\n+VSPACE=voyager # NameSpace for Voyager\n+TSPACE=traefik   # NameSpace for Traefik\n+\n+helm version --short | grep v2", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c81cb9eb80d6eda8f089df05a5cce4e39b27a00"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjU1MjE4NQ==", "bodyText": "this could also fail if the server version string has v2 or v3 in it.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1407#discussion_r372552185", "createdAt": "2020-01-29T18:23:08Z", "author": {"login": "markxnelson"}, "path": "kubernetes/samples/charts/util/setup.sh", "diffHunk": "@@ -1,12 +1,36 @@\n #!/bin/bash\n-# Copyright (c) 2018, 2019, Oracle Corporation and/or its affiliates.  All rights reserved.\n+# Copyright (c) 2018,2020 Oracle Corporation and/or its affiliates.  All rights reserved.\n # Licensed under the Universal Permissive License v 1.0 as shown at https://oss.oracle.com/licenses/upl.\n \n #  This script is to create or delete Ingress controllers. We support two ingress controllers: traefik and voyager.\n \n MYDIR=\"$(dirname \"$(readlink -f \"$0\")\")\"\n VNAME=voyager-operator  # release name of Voyager\n TNAME=traefik-operator  # release name of Traefik\n+VSPACE=voyager # NameSpace for Voyager\n+TSPACE=traefik   # NameSpace for Traefik\n+\n+helm version --short | grep v2", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjU1MTk0Mw=="}, "originalCommit": {"oid": "9c81cb9eb80d6eda8f089df05a5cce4e39b27a00"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjU1MjMxNA==", "bodyText": "add --client", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1407#discussion_r372552314", "createdAt": "2020-01-29T18:23:26Z", "author": {"login": "markxnelson"}, "path": "kubernetes/samples/charts/util/setup.sh", "diffHunk": "@@ -1,12 +1,36 @@\n #!/bin/bash\n-# Copyright (c) 2018, 2019, Oracle Corporation and/or its affiliates.  All rights reserved.\n+# Copyright (c) 2018,2020 Oracle Corporation and/or its affiliates.  All rights reserved.\n # Licensed under the Universal Permissive License v 1.0 as shown at https://oss.oracle.com/licenses/upl.\n \n #  This script is to create or delete Ingress controllers. We support two ingress controllers: traefik and voyager.\n \n MYDIR=\"$(dirname \"$(readlink -f \"$0\")\")\"\n VNAME=voyager-operator  # release name of Voyager\n TNAME=traefik-operator  # release name of Traefik\n+VSPACE=voyager # NameSpace for Voyager\n+TSPACE=traefik   # NameSpace for Traefik\n+\n+helm version --short | grep v2", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjU1MTk0Mw=="}, "originalCommit": {"oid": "9c81cb9eb80d6eda8f089df05a5cce4e39b27a00"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjU1MjcwOA==", "bodyText": "why --keep-history and not --purge here?", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1407#discussion_r372552708", "createdAt": "2020-01-29T18:24:06Z", "author": {"login": "markxnelson"}, "path": "kubernetes/samples/charts/util/setup.sh", "diffHunk": "@@ -1,12 +1,36 @@\n #!/bin/bash\n-# Copyright (c) 2018, 2019, Oracle Corporation and/or its affiliates.  All rights reserved.\n+# Copyright (c) 2018,2020 Oracle Corporation and/or its affiliates.  All rights reserved.\n # Licensed under the Universal Permissive License v 1.0 as shown at https://oss.oracle.com/licenses/upl.\n \n #  This script is to create or delete Ingress controllers. We support two ingress controllers: traefik and voyager.\n \n MYDIR=\"$(dirname \"$(readlink -f \"$0\")\")\"\n VNAME=voyager-operator  # release name of Voyager\n TNAME=traefik-operator  # release name of Traefik\n+VSPACE=voyager # NameSpace for Voyager\n+TSPACE=traefik   # NameSpace for Traefik\n+\n+helm version --short | grep v2\n+[[ $? == 0 ]] && HELM_VERSION=V2\n+[[ $? == 1 ]] && HELM_VERSION=V3\n+\n+echo \"Detected Helm Version [$HELM_VERSION]\"\n+\n+if [ \"$HELM_VERSION\" == \"V2\" ]; then\n+   v_list_args=\"\"\n+   t_list_args=\"\"\n+   v_helm_delete=\"helm delete --purge\"\n+   t_helm_delete=\"helm delete --purge\"\n+   v_helm_install=\"helm install appscode/voyager --name $VNAME  \"\n+   t_helm_install=\"helm install stable/traefik --name $TNAME \"\n+else\n+   v_list_args=\"--namespace $VSPACE \"\n+   t_list_args=\"--namespace $TSPACE \"\n+   v_helm_delete=\"helm delete --keep-history --namespace $VSPACE \"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c81cb9eb80d6eda8f089df05a5cce4e39b27a00"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjU1Mjg2MA==", "bodyText": "install -> installing", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1407#discussion_r372552860", "createdAt": "2020-01-29T18:24:25Z", "author": {"login": "markxnelson"}, "path": "kubernetes/samples/charts/util/setup.sh", "diffHunk": "@@ -21,11 +45,11 @@ function createVoyager() {\n   fi\n   echo\n \n-  if [ \"$(helm list | grep $VNAME |  wc -l)\" = 0 ]; then\n-    echo \"Ihstall voyager operator.\"\n+  if [ \"$(helm list ${v_list_args} | grep $VNAME |  wc -l)\" = 0 ]; then\n+    echo \"Install voyager operator.\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c81cb9eb80d6eda8f089df05a5cce4e39b27a00"}, "originalPosition": 45}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjU1Mjk5NQ==", "bodyText": "probably a good idea to make the voyager version a variable", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1407#discussion_r372552995", "createdAt": "2020-01-29T18:24:43Z", "author": {"login": "markxnelson"}, "path": "kubernetes/samples/charts/util/setup.sh", "diffHunk": "@@ -21,11 +45,11 @@ function createVoyager() {\n   fi\n   echo\n \n-  if [ \"$(helm list | grep $VNAME |  wc -l)\" = 0 ]; then\n-    echo \"Ihstall voyager operator.\"\n+  if [ \"$(helm list ${v_list_args} | grep $VNAME |  wc -l)\" = 0 ]; then\n+    echo \"Install voyager operator.\"\n     \n-    helm install appscode/voyager --name $VNAME --version 7.4.0 \\\n-      --namespace voyager \\\n+    ${v_helm_install} --version 7.4.0 \\", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c81cb9eb80d6eda8f089df05a5cce4e39b27a00"}, "originalPosition": 49}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ab4027ac07583d6666a511b82ac59ff7da2b717d", "author": {"user": null}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/ab4027ac07583d6666a511b82ac59ff7da2b717d", "committedDate": "2020-01-29T19:42:52Z", "message": "Addressed more review comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "960024e0464179ac7da44764d6b66b29363b6e07", "author": {"user": null}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/960024e0464179ac7da44764d6b66b29363b6e07", "committedDate": "2020-01-29T22:42:47Z", "message": "modified helm search command and add functionality to add NameSpace if does not exits"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7f5bbd3d4803199791150e81c358a84e90982db0", "author": {"user": null}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/7f5bbd3d4803199791150e81c358a84e90982db0", "committedDate": "2020-01-30T18:57:53Z", "message": "Modify the uninstall command for Helm 3.x"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b67f132ceeabdd94500633058388f22982cd0354", "author": {"user": null}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/b67f132ceeabdd94500633058388f22982cd0354", "committedDate": "2020-01-31T23:31:57Z", "message": "Added support for Custom Voyager Version"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUzOTcxNjUx", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1407#pullrequestreview-353971651", "createdAt": "2020-02-05T19:13:47Z", "commit": {"oid": "b67f132ceeabdd94500633058388f22982cd0354"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQxOToxMzo0N1rOFmD3Bw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQxOToxMzo0N1rOFmD3Bw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTQ1MzQ0Nw==", "bodyText": "this is still broken\nyou should explicitly check for both V2 and V3, not just check for one and assume it is the other if it fails", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1407#discussion_r375453447", "createdAt": "2020-02-05T19:13:47Z", "author": {"login": "markxnelson"}, "path": "kubernetes/samples/charts/util/setup.sh", "diffHunk": "@@ -1,18 +1,55 @@\n #!/bin/bash\n-# Copyright (c) 2018, 2019, Oracle Corporation and/or its affiliates.  All rights reserved.\n+# Copyright (c) 2018, 2020, Oracle Corporation and/or its affiliates\n # Licensed under the Universal Permissive License v 1.0 as shown at https://oss.oracle.com/licenses/upl.\n \n #  This script is to create or delete Ingress controllers. We support two ingress controllers: traefik and voyager.\n \n MYDIR=\"$(dirname \"$(readlink -f \"$0\")\")\"\n VNAME=voyager-operator  # release name of Voyager\n TNAME=traefik-operator  # release name of Traefik\n+VSPACE=voyager # NameSpace for Voyager\n+TSPACE=traefik   # NameSpace for Traefik\n+DefaultVoyagerVersion=7.4.0\n+\n+helm version --short --client | grep v2\n+[[ $? == 0 ]] && HELM_VERSION=V2", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b67f132ceeabdd94500633058388f22982cd0354"}, "originalPosition": 16}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d71db65dd932671263f3e5f452a382909d552770", "author": {"user": null}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/d71db65dd932671263f3e5f452a382909d552770", "committedDate": "2020-02-05T21:47:22Z", "message": "Explict Helm Version Check"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU0MTUzNDQ0", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1407#pullrequestreview-354153444", "createdAt": "2020-02-06T01:32:00Z", "commit": {"oid": "d71db65dd932671263f3e5f452a382909d552770"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNlQwMTozMjowMVrOFmMzxA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNlQwMTozMjowMVrOFmMzxA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTYwMDA2OA==", "bodyText": "I'm sorry, this is still broken.  What it is not v2 or v3?  what if it is v1? or v4? Your logic will apply the \"v3\" settings in any case that is not v2.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1407#discussion_r375600068", "createdAt": "2020-02-06T01:32:01Z", "author": {"login": "markxnelson"}, "path": "kubernetes/samples/charts/util/setup.sh", "diffHunk": "@@ -1,18 +1,55 @@\n #!/bin/bash\n-# Copyright (c) 2018, 2019, Oracle Corporation and/or its affiliates.  All rights reserved.\n+# Copyright (c) 2018, 2020, Oracle Corporation and/or its affiliates\n # Licensed under the Universal Permissive License v 1.0 as shown at https://oss.oracle.com/licenses/upl.\n \n #  This script is to create or delete Ingress controllers. We support two ingress controllers: traefik and voyager.\n \n MYDIR=\"$(dirname \"$(readlink -f \"$0\")\")\"\n VNAME=voyager-operator  # release name of Voyager\n TNAME=traefik-operator  # release name of Traefik\n+VSPACE=voyager # NameSpace for Voyager\n+TSPACE=traefik   # NameSpace for Traefik\n+DefaultVoyagerVersion=7.4.0\n+\n+helm version --short --client | grep v2\n+[[ $? == 0 ]] && HELM_VERSION=V2", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTQ1MzQ0Nw=="}, "originalCommit": {"oid": "b67f132ceeabdd94500633058388f22982cd0354"}, "originalPosition": 16}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5f117f2d0f1370005f2daafe98f938e8772d88a3", "author": {"user": null}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/5f117f2d0f1370005f2daafe98f938e8772d88a3", "committedDate": "2020-02-06T18:44:22Z", "message": "Explict Helm Version Check; Get the Voyager Doc Change from PR 1406"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU0ODQ5NTky", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1407#pullrequestreview-354849592", "createdAt": "2020-02-06T23:41:27Z", "commit": {"oid": "5f117f2d0f1370005f2daafe98f938e8772d88a3"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNlQyMzo0MToyN1rOFmuAZg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNlQyMzo0MToyN1rOFmuAZg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjE0Mzk3NA==", "bodyText": "Pani, you should update the text \"when using Helm 2\" -> \"when using Helm 2 or Helm 3\" as your updated to setup.sh works with Helm 2 or Helm 3.\nIt would also be fine to remove this additional text in whole if you prefer....\nThis text was added for PR#1406 since the script on master only works with Helm 2.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1407#discussion_r376143974", "createdAt": "2020-02-06T23:41:27Z", "author": {"login": "TheFrogPad"}, "path": "kubernetes/samples/charts/voyager/README.md", "diffHunk": "@@ -106,20 +128,26 @@ Then deploy the TLS Ingress.\n ```\n $ kubectl create -f samples/tls.yaml\n ```\n-Now you can access the two WLS domains with different hostnames using the HTTPS endpoint.\n+Now you can access the two WebLogic domains with different host names using the HTTPS endpoint.\n ```\n $ curl -k -H 'host: domain1.org' https://${HOSTNAME}:30305/testwebapp/\n $ curl -k -H 'host: domain2.org' https://${HOSTNAME}:30307/testwebapp/\n ```\n \n ## Uninstall the Voyager Operator\n After removing all the Voyager Ingress resources, uninstall the Voyager operator:\n+\n+Using Helm 3:\n+```\n+$ helm uninstall voyager-operator --namespace voyager\n+```\n+Using Helm 2:\n ```\n $ helm delete --purge voyager-operator\n ```\n \n ## Install and uninstall the Voyager operator with setup.sh\n-Alternatively, you can run the helper script `setup.sh`, under the `kubernetes/samples/charts/util` folder, to install and uninstall Voyager.\n+Alternatively, you can run the helper script `setup.sh` when using Helm 2, under the `kubernetes/samples/charts/util` folder, to install and uninstall Voyager.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5f117f2d0f1370005f2daafe98f938e8772d88a3"}, "originalPosition": 176}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU1MTUyODkx", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1407#pullrequestreview-355152891", "createdAt": "2020-02-07T13:26:51Z", "commit": {"oid": "5f117f2d0f1370005f2daafe98f938e8772d88a3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6ba564d378284cf4695b97b3ac2793228d968c1a", "author": {"user": {"login": "rjeberhard", "name": "Ryan Eberhard"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/6ba564d378284cf4695b97b3ac2793228d968c1a", "committedDate": "2020-02-07T13:28:16Z", "message": "Merge branch 'develop' into OWLS-79377"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 74, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}