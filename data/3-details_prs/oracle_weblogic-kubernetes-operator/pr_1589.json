{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA4MzQ4ODU5", "number": 1589, "title": "Adding extension class to build and push Operator image and more", "bodyText": "Changes -\nAdding extension class to build the Operator image and push the image to OCIR for Jenkins runs before all the tests start.\nCreate secret to pull the operator image and corresponding changes in Helm implementation to handle list/map value for imagePullSecrets.\nAdding assertions to\n\nCheck Operator Helm release is deployed\nCheck Docker image exists after MII image is created. Using workaround docker images | grep imagetag as docker images imagename:imagetag is not working only on Jenkins machine and the test fails.\n\nJenkins results - https://build.weblogick8s.org:8443/job/weblogic-kubernetes-operator-model-in-image-tests/368. All pass, except ItSimpleDomainValidation - Not sure why PV creation is failing, its not related to my changes.\nNote: Currently using \"0\" for NodePort, I see Xian has a better solution in PR#1573 to get the free port from node port range port numbers, will change the tests after her PR is merged.", "createdAt": "2020-04-24T06:04:22Z", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1589", "merged": true, "mergeCommit": {"oid": "2b99fafae7d6ad610a55ee4e809cca927cf9c917"}, "closed": true, "closedAt": "2020-04-24T16:01:03Z", "author": {"login": "vanajamukkara"}, "timelineItems": {"totalCount": 29, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcZsvv9AH2gAyNDA4MzQ4ODU5OjRjZGU2NTk2YjdhNGNkNTMwODlmMWVkZTA5YmNmYzMwZTJhODE3ZjU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABca6CexgH2gAyNDA4MzQ4ODU5OjA3ODI5MWU1Njc4MmE0ZDkxYjgwYmM1NDg4NzNmZGVhZDlkNTNmMDk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "4cde6596b7a4cd53089f1ede09bcfc30e2a817f5", "author": {"user": {"login": "vanajamukkara", "name": "Vanajakshi Mukkara"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/4cde6596b7a4cd53089f1ede09bcfc30e2a817f5", "committedDate": "2020-04-21T05:22:10Z", "message": "script to build and push operator image to ocir for jenkins to work"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4d4599ec7290f4b126cb42e4c74bb31fe3b3931a", "author": {"user": {"login": "vanajamukkara", "name": "Vanajakshi Mukkara"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/4d4599ec7290f4b126cb42e4c74bb31fe3b3931a", "committedDate": "2020-04-21T05:24:07Z", "message": "Revert \"script to build and push operator image to ocir for jenkins to work\"\n\nThis reverts commit 4cde6596b7a4cd53089f1ede09bcfc30e2a817f5."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5e1650bb3c281b2ad55f703ac71887eeb8c5431d", "author": {"user": {"login": "vanajamukkara", "name": "Vanajakshi Mukkara"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/5e1650bb3c281b2ad55f703ac71887eeb8c5431d", "committedDate": "2020-04-21T05:27:00Z", "message": "script to build and push operator image to ocir for jenkins to work"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "04440af825e4f8dd4350dd41585a8beefc83cb2a", "author": {"user": {"login": "rjeberhard", "name": "Ryan Eberhard"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/04440af825e4f8dd4350dd41585a8beefc83cb2a", "committedDate": "2020-04-22T21:03:50Z", "message": "Add try finally"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cea3fbc485d789b2cdda9e5b744dddbc0882c9fb", "author": {"user": {"login": "vanajamukkara", "name": "Vanajakshi Mukkara"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/cea3fbc485d789b2cdda9e5b744dddbc0882c9fb", "committedDate": "2020-04-22T23:46:51Z", "message": "moving constants to a interface"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "78586f48be87d13fab1ac7ebe61a224df5b0fe2e", "author": {"user": {"login": "vanajamukkara", "name": "Vanajakshi Mukkara"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/78586f48be87d13fab1ac7ebe61a224df5b0fe2e", "committedDate": "2020-04-22T23:47:02Z", "message": "Merge branch 'develop' of https://github.com/oracle/weblogic-kubernetes-operator into fix-new-mii-jenkins"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "71c670cbeb5a27970b4995b74b6caf4efb3ca8e0", "author": {"user": {"login": "vanajamukkara", "name": "Vanajakshi Mukkara"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/71c670cbeb5a27970b4995b74b6caf4efb3ca8e0", "committedDate": "2020-04-23T00:18:26Z", "message": "Adding imagebuilder"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e84257dd1938e2d88d3d88d1428842d95d8c0268", "author": {"user": {"login": "vanajamukkara", "name": "Vanajakshi Mukkara"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/e84257dd1938e2d88d3d88d1428842d95d8c0268", "committedDate": "2020-04-23T04:09:08Z", "message": "adding imagebuilder class"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f0d92bb5b66bb22155330d3b9b63678a7a15796b", "author": {"user": {"login": "rjeberhard", "name": "Ryan Eberhard"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/f0d92bb5b66bb22155330d3b9b63678a7a15796b", "committedDate": "2020-04-22T20:52:37Z", "message": "Synchronization for one-time initialization logic"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "df0be4949fedc113b07a2c7cfd6ce6606c3b9e33", "author": {"user": {"login": "vanajamukkara", "name": "Vanajakshi Mukkara"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/df0be4949fedc113b07a2c7cfd6ce6606c3b9e33", "committedDate": "2020-04-23T12:51:39Z", "message": "build and push operator image in extension"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fddc8a1ef90fe86a1d50deb1aa10fef905921963", "author": {"user": {"login": "vanajamukkara", "name": "Vanajakshi Mukkara"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/fddc8a1ef90fe86a1d50deb1aa10fef905921963", "committedDate": "2020-04-23T12:58:00Z", "message": "Resolve conflicts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f591a02bc95f85276d7cf2b70b47d0a9318928d0", "author": {"user": {"login": "vanajamukkara", "name": "Vanajakshi Mukkara"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/f591a02bc95f85276d7cf2b70b47d0a9318928d0", "committedDate": "2020-04-24T05:45:18Z", "message": "adding imagePullSecrets to helm install"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "642083951a11173d5f23915a5f3f2b7c25905d36", "author": {"user": {"login": "vanajamukkara", "name": "Vanajakshi Mukkara"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/642083951a11173d5f23915a5f3f2b7c25905d36", "committedDate": "2020-04-24T05:47:03Z", "message": "Merge branch 'develop' of https://github.com/oracle/weblogic-kubernetes-operator into fix-new-mii-jenkins"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "95f15f247dee3be11d53266d2c351ecdedad7078", "author": {"user": {"login": "vanajamukkara", "name": "Vanajakshi Mukkara"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/95f15f247dee3be11d53266d2c351ecdedad7078", "committedDate": "2020-04-24T05:52:11Z", "message": "fix command run"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5a35f497bcb2206d2c0250b8dd08a195a0db4b6b", "author": {"user": {"login": "vanajamukkara", "name": "Vanajakshi Mukkara"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/5a35f497bcb2206d2c0250b8dd08a195a0db4b6b", "committedDate": "2020-04-24T06:13:37Z", "message": "use BRANCH env var for JENKINS"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e4941a70713c35c21214606c3728c7f8984370d4", "author": {"user": {"login": "vanajamukkara", "name": "Vanajakshi Mukkara"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/e4941a70713c35c21214606c3728c7f8984370d4", "committedDate": "2020-04-24T06:24:12Z", "message": "fix image name for Jenkins"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8c7976ea492408cf94e5f110991d9ab875e310bf", "author": {"user": {"login": "vanajamukkara", "name": "Vanajakshi Mukkara"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/8c7976ea492408cf94e5f110991d9ab875e310bf", "committedDate": "2020-04-24T09:19:04Z", "message": "remove double REPO_NAME"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cc872bcc524ca33e991cec1ec84e0d95792f96c9", "author": {"user": {"login": "vanajamukkara", "name": "Vanajakshi Mukkara"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/cc872bcc524ca33e991cec1ec84e0d95792f96c9", "committedDate": "2020-04-24T09:55:34Z", "message": "remove double REPO_NAME"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a7d02dba6c196447db2238999b7aeb6356dd1a12", "author": {"user": {"login": "vanajamukkara", "name": "Vanajakshi Mukkara"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/a7d02dba6c196447db2238999b7aeb6356dd1a12", "committedDate": "2020-04-24T10:22:33Z", "message": "fix domain image name"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f17954c9409ba70105786754df69d5f2882727fc", "author": {"user": {"login": "vanajamukkara", "name": "Vanajakshi Mukkara"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/f17954c9409ba70105786754df69d5f2882727fc", "committedDate": "2020-04-24T10:46:54Z", "message": "fix domain image name"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e348b4fe3f18d53bbfa8d4a4ce66736657fcb06e", "author": {"user": {"login": "vanajamukkara", "name": "Vanajakshi Mukkara"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/e348b4fe3f18d53bbfa8d4a4ce66736657fcb06e", "committedDate": "2020-04-24T11:07:11Z", "message": "fix domain image name"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9e56146e8a1fce3c0ff4ec37baed67ee448c95b3", "author": {"user": {"login": "vanajamukkara", "name": "Vanajakshi Mukkara"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/9e56146e8a1fce3c0ff4ec37baed67ee448c95b3", "committedDate": "2020-04-24T12:20:58Z", "message": "checking operator helm release status"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk5OTE5NjE4", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1589#pullrequestreview-399919618", "createdAt": "2020-04-24T12:55:11Z", "commit": {"oid": "7b4a09f765d538795d550c9db956ca49b6f9bc67"}, "state": "APPROVED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxMjo1NToxMlrOGLWWTg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxMjo1OTo0MFrOGLWhNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDU1MzY3OA==", "bodyText": "please include the namespace in the message too", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1589#discussion_r414553678", "createdAt": "2020-04-24T12:55:12Z", "author": {"login": "markxnelson"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/ItMiiDomain.java", "diffHunk": "@@ -148,6 +146,39 @@ public static void initAll(@Namespaces(2) List<String> namespaces) {\n                 .name(serviceAccountName))));\n     logger.info(\"Created service account: {0}\", serviceAccountName);\n \n+    // get Operator image name\n+    String operatorImage = getOperatorImageName();\n+    assertFalse(operatorImage.isEmpty(), \"Operator image name can not be empty\");\n+    logger.info(\"Operator image name {0}\", operatorImage);\n+\n+    // Create docker registry secret in the operator namespace to pull the image from repository\n+    if (System.getenv(\"REPO_REGISTRY\") != null && System.getenv(\"REPO_USERNAME\") != null\n+        && System.getenv(\"REPO_PASSWORD\") != null && System.getenv(\"REPO_EMAIL\") != null) {\n+      repoRegistry = System.getenv(\"REPO_REGISTRY\");\n+      repoUserName = System.getenv(\"REPO_USERNAME\");\n+      repoPassword = System.getenv(\"REPO_PASSWORD\");\n+      repoEmail = System.getenv(\"REPO_EMAIL\");\n+    }\n+    logger.info(\"Creating docker registry secret in namespace {0}\", opNamespace);\n+    JsonObject dockerConfigJsonObject = createDockerConfigJson(\n+        repoUserName, repoPassword, repoEmail, repoRegistry);\n+    dockerConfigJson = dockerConfigJsonObject.toString();\n+\n+    // Create the V1Secret configuration\n+    V1Secret repoSecret = new V1Secret()\n+        .metadata(new V1ObjectMeta()\n+            .name(repoSecretName)\n+            .namespace(opNamespace))\n+        .type(\"kubernetes.io/dockerconfigjson\")\n+        .putDataItem(\".dockerconfigjson\", dockerConfigJson.getBytes());\n+\n+    boolean secretCreated = assertDoesNotThrow(() -> createSecret(repoSecret),\n+        String.format(\"createSecret failed for %s\", repoSecretName));\n+    assertTrue(secretCreated, String.format(\"createSecret failed while creating secret %s\", repoSecretName));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b4a09f765d538795d550c9db956ca49b6f9bc67"}, "originalPosition": 115}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDU1NDYwMQ==", "bodyText": "is this all duplicated? maybe refactor it?", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1589#discussion_r414554601", "createdAt": "2020-04-24T12:56:36Z", "author": {"login": "markxnelson"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/ItSimpleOperatorValidation.java", "diffHunk": "@@ -86,131 +77,135 @@ public void testInstallingOperator(@Namespaces(3) List<String> namespaces) {\n     domainNamespace2 = namespaces.get(2);\n \n     // Create a service account for the unique opNamespace\n-    final String serviceAccountName = opNamespace + \"-sa\";\n-    serviceAccount = new V1ServiceAccount()\n+    logger.info(\"Creating service account\");\n+    String serviceAccountName = opNamespace + \"-sa\";\n+    assertDoesNotThrow(() -> createServiceAccount(new V1ServiceAccount()\n         .metadata(\n             new V1ObjectMeta()\n                 .namespace(opNamespace)\n-                .name(serviceAccountName));\n-\n-    assertThatCode(\n-        () -> createServiceAccount(serviceAccount))\n-        .as(\"Test that createServiceAccount doesn not throw an exception\")\n-        .withFailMessage(\"createServiceAccount() threw an exception\")\n-        .doesNotThrowAnyException();\n-    logger.info(\"Created service account: \" + serviceAccountName);\n+                .name(serviceAccountName))));\n+    logger.info(\"Created service account: {0}\", serviceAccountName);\n+\n+    String image = getOperatorImageName();\n+    assertFalse(image.isEmpty(), \"Operator image name can not be empty\");\n+    logger.info(\"Operator image name {0}\", image);\n+\n+    // Create docker registry secret in the operator namespace to pull the image from repository\n+    String repoRegistry = \"dummy\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b4a09f765d538795d550c9db956ca49b6f9bc67"}, "originalPosition": 110}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDU1NTc0Mw==", "bodyText": "remove if not needed", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1589#discussion_r414555743", "createdAt": "2020-04-24T12:58:28Z", "author": {"login": "markxnelson"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/extensions/ImageBuilders.java", "diffHunk": "@@ -0,0 +1,89 @@\n+// Copyright (c) 2020, Oracle Corporation and/or its affiliates.\n+// Licensed under the Universal Permissive License v 1.0 as shown at https://oss.oracle.com/licenses/upl.\n+\n+package oracle.weblogic.kubernetes.extensions;\n+\n+import java.util.concurrent.CountDownLatch;\n+import java.util.concurrent.atomic.AtomicBoolean;\n+\n+import oracle.weblogic.kubernetes.actions.impl.Operator;\n+import org.junit.jupiter.api.extension.BeforeAllCallback;\n+import org.junit.jupiter.api.extension.ExtensionContext;\n+\n+import static oracle.weblogic.kubernetes.actions.TestActions.dockerLogin;\n+import static oracle.weblogic.kubernetes.actions.TestActions.dockerPush;\n+import static oracle.weblogic.kubernetes.extensions.LoggedTest.logger;\n+import static org.junit.jupiter.api.Assertions.assertFalse;\n+import static org.junit.jupiter.api.Assertions.assertTrue;\n+import static org.junit.jupiter.api.extension.ExtensionContext.Namespace.GLOBAL;\n+\n+//import static org.junit.jupiter.api.Assertions.assertTrue;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b4a09f765d538795d550c9db956ca49b6f9bc67"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDU1NjQ3MQ==", "bodyText": "very nice", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1589#discussion_r414556471", "createdAt": "2020-04-24T12:59:40Z", "author": {"login": "markxnelson"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/extensions/ImageBuilders.java", "diffHunk": "@@ -0,0 +1,89 @@\n+// Copyright (c) 2020, Oracle Corporation and/or its affiliates.\n+// Licensed under the Universal Permissive License v 1.0 as shown at https://oss.oracle.com/licenses/upl.\n+\n+package oracle.weblogic.kubernetes.extensions;\n+\n+import java.util.concurrent.CountDownLatch;\n+import java.util.concurrent.atomic.AtomicBoolean;\n+\n+import oracle.weblogic.kubernetes.actions.impl.Operator;\n+import org.junit.jupiter.api.extension.BeforeAllCallback;\n+import org.junit.jupiter.api.extension.ExtensionContext;\n+\n+import static oracle.weblogic.kubernetes.actions.TestActions.dockerLogin;\n+import static oracle.weblogic.kubernetes.actions.TestActions.dockerPush;\n+import static oracle.weblogic.kubernetes.extensions.LoggedTest.logger;\n+import static org.junit.jupiter.api.Assertions.assertFalse;\n+import static org.junit.jupiter.api.Assertions.assertTrue;\n+import static org.junit.jupiter.api.extension.ExtensionContext.Namespace.GLOBAL;\n+\n+//import static org.junit.jupiter.api.Assertions.assertTrue;\n+\n+/**\n+ * Class to build the required images for the tests.\n+ */\n+public class ImageBuilders implements BeforeAllCallback, ExtensionContext.Store.CloseableResource {\n+  private static final AtomicBoolean started = new AtomicBoolean(false);\n+  private static final CountDownLatch initializationLatch = new CountDownLatch(1);\n+\n+  @Override\n+  public void beforeAll(ExtensionContext context) {\n+    /* The pattern is that we have initialization code that we want to run once to completion", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b4a09f765d538795d550c9db956ca49b6f9bc67"}, "originalPosition": 31}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "662340f7988563e631f4736ebbc3ec41f06c00f7", "author": {"user": {"login": "vanajamukkara", "name": "Vanajakshi Mukkara"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/662340f7988563e631f4736ebbc3ec41f06c00f7", "committedDate": "2020-04-24T13:12:15Z", "message": "workaround for image check"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk5OTUxNzUx", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1589#pullrequestreview-399951751", "createdAt": "2020-04-24T13:35:49Z", "commit": {"oid": "7b4a09f765d538795d550c9db956ca49b6f9bc67"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxMzozNTo0OVrOGLYA2w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxMzozNTo0OVrOGLYA2w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDU4MDk1NQ==", "bodyText": "This is a little weird in that it doesn't take the value of any variable unless all are set.  You could check each value in line like this:\nrepoRegistry = Optional.ofNullable(System.getenv(\"REPO_REGISTRY\")).orElse(\"dummy\");", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1589#discussion_r414580955", "createdAt": "2020-04-24T13:35:49Z", "author": {"login": "rjeberhard"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/ItMiiDomain.java", "diffHunk": "@@ -148,6 +146,39 @@ public static void initAll(@Namespaces(2) List<String> namespaces) {\n                 .name(serviceAccountName))));\n     logger.info(\"Created service account: {0}\", serviceAccountName);\n \n+    // get Operator image name\n+    String operatorImage = getOperatorImageName();\n+    assertFalse(operatorImage.isEmpty(), \"Operator image name can not be empty\");\n+    logger.info(\"Operator image name {0}\", operatorImage);\n+\n+    // Create docker registry secret in the operator namespace to pull the image from repository\n+    if (System.getenv(\"REPO_REGISTRY\") != null && System.getenv(\"REPO_USERNAME\") != null\n+        && System.getenv(\"REPO_PASSWORD\") != null && System.getenv(\"REPO_EMAIL\") != null) {\n+      repoRegistry = System.getenv(\"REPO_REGISTRY\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b4a09f765d538795d550c9db956ca49b6f9bc67"}, "originalPosition": 95}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk5OTU2NDk1", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1589#pullrequestreview-399956495", "createdAt": "2020-04-24T13:41:27Z", "commit": {"oid": "7b4a09f765d538795d550c9db956ca49b6f9bc67"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxMzo0MToyN1rOGLYQlw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxMzo0MToyN1rOGLYQlw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDU4NDk4Mw==", "bodyText": "Can you Optional.ofNullable(...).orElse(...) pattern here too.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1589#discussion_r414584983", "createdAt": "2020-04-24T13:41:27Z", "author": {"login": "rjeberhard"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/impl/Operator.java", "diffHunk": "@@ -40,4 +52,53 @@ public static boolean uninstall(HelmParams params) {\n   public static boolean scaleDomain(String domainUid, String clusterName, int numOfServers) {\n     return true;\n   }\n+\n+  /**\n+   * Image Name for the Operator. Uses branch name for tag in local runs\n+   * and branch name, build id for tag in Jenkins runs.\n+   * @return image name\n+   */\n+  public static String getImageName() {\n+    String image = \"\";\n+    String imageName = System.getenv(\"IMAGE_NAME_OPERATOR\") != null", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b4a09f765d538795d550c9db956ca49b6f9bc67"}, "originalPosition": 35}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk5OTYwNzA2", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1589#pullrequestreview-399960706", "createdAt": "2020-04-24T13:46:32Z", "commit": {"oid": "7b4a09f765d538795d550c9db956ca49b6f9bc67"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7b4a09f765d538795d550c9db956ca49b6f9bc67", "author": {"user": {"login": "vanajamukkara", "name": "Vanajakshi Mukkara"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/7b4a09f765d538795d550c9db956ca49b6f9bc67", "committedDate": "2020-04-24T13:48:29Z", "message": "adding assertions for checking docker image and helm release status"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "078291e56782a4d91b80bc548873fdead9d53f09", "author": {"user": {"login": "vanajamukkara", "name": "Vanajakshi Mukkara"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/078291e56782a4d91b80bc548873fdead9d53f09", "committedDate": "2020-04-24T23:25:19Z", "message": "address review comments"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4686, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}