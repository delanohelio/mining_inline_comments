{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM2NzM5OTk1", "number": 1748, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQyMDoyNTo1N1rOEG5spg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQyMDoyNTo1N1rOEG5spg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc1NjcyMjMwOnYy", "diffSide": "RIGHT", "path": "operator/src/main/java/oracle/kubernetes/operator/Main.java", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQyMDoyNTo1N1rOGl_BWA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQyMjo1Nzo0NVrOGmCx-A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjQ4MzAzMg==", "bodyText": "Should we rename isNamespaceStopping field in Main to something else, such as isNamespaceStoppingMap to avoid having same name?", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1748#discussion_r442483032", "createdAt": "2020-06-18T20:25:57Z", "author": {"login": "alai8"}, "path": "operator/src/main/java/oracle/kubernetes/operator/Main.java", "diffHunk": "@@ -228,14 +228,23 @@ private static void completeBegin() {\n     }\n   }\n \n-  private static void stopNamespace(String ns, boolean remove) {\n-    processor.stopNamespace(ns);\n-    AtomicBoolean stopping =\n-        remove ? isNamespaceStopping.remove(ns) : isNamespaceStopping.get(ns);\n+  private static void stopNamespace(String ns, boolean inTargetNamespaceList) {\n+    AtomicBoolean isNamespaceStopping = isNamespaceStopping(ns);\n \n-    if (stopping != null) {\n-      stopping.set(true);\n+    // Remove if namespace not in targetNamespace list\n+    if (!inTargetNamespaceList) {\n+      Main.isNamespaceStopping.remove(ns);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "52a6abac8c813b557d125c4d5089616e1520c061"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjUwOTU1Ng==", "bodyText": "The name is really confusing. For example, we pass the keys from that map to the rest server:```\nstartRestServer(principal, isNamespaceStopping.keySet())\n\n\nwhen what we clearly mean is the list of all namespaces currently known. The problem is that it is a map of known namespace names to an atomic boolean which tells us if we are stopping that namespace, and there really isn't a good name for that. What that really suggests is that we ought to rethink the map itself, but that's a bit further off, I think.\n\nFor now, I would suggest dropping the \"is.\" The usual convention is to use the \"is\" prefix for methods returning booleans, but not for the corresponding fields.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1748#discussion_r442509556", "createdAt": "2020-06-18T21:21:28Z", "author": {"login": "russgold"}, "path": "operator/src/main/java/oracle/kubernetes/operator/Main.java", "diffHunk": "@@ -228,14 +228,23 @@ private static void completeBegin() {\n     }\n   }\n \n-  private static void stopNamespace(String ns, boolean remove) {\n-    processor.stopNamespace(ns);\n-    AtomicBoolean stopping =\n-        remove ? isNamespaceStopping.remove(ns) : isNamespaceStopping.get(ns);\n+  private static void stopNamespace(String ns, boolean inTargetNamespaceList) {\n+    AtomicBoolean isNamespaceStopping = isNamespaceStopping(ns);\n \n-    if (stopping != null) {\n-      stopping.set(true);\n+    // Remove if namespace not in targetNamespace list\n+    if (!inTargetNamespaceList) {\n+      Main.isNamespaceStopping.remove(ns);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjQ4MzAzMg=="}, "originalCommit": {"oid": "52a6abac8c813b557d125c4d5089616e1520c061"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjUyMzgwMw==", "bodyText": "Yes, changed field in Main to isNamespaceStoppingMap.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1748#discussion_r442523803", "createdAt": "2020-06-18T21:55:19Z", "author": {"login": "lennyphan"}, "path": "operator/src/main/java/oracle/kubernetes/operator/Main.java", "diffHunk": "@@ -228,14 +228,23 @@ private static void completeBegin() {\n     }\n   }\n \n-  private static void stopNamespace(String ns, boolean remove) {\n-    processor.stopNamespace(ns);\n-    AtomicBoolean stopping =\n-        remove ? isNamespaceStopping.remove(ns) : isNamespaceStopping.get(ns);\n+  private static void stopNamespace(String ns, boolean inTargetNamespaceList) {\n+    AtomicBoolean isNamespaceStopping = isNamespaceStopping(ns);\n \n-    if (stopping != null) {\n-      stopping.set(true);\n+    // Remove if namespace not in targetNamespace list\n+    if (!inTargetNamespaceList) {\n+      Main.isNamespaceStopping.remove(ns);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjQ4MzAzMg=="}, "originalCommit": {"oid": "52a6abac8c813b557d125c4d5089616e1520c061"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjU0NDYzMg==", "bodyText": "Dropped the 'is.' from the 'isNamespaceStoppingMap' field in Main and renamed to 'namespaceStoppingMap' as suggested by Russ.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1748#discussion_r442544632", "createdAt": "2020-06-18T22:57:45Z", "author": {"login": "lennyphan"}, "path": "operator/src/main/java/oracle/kubernetes/operator/Main.java", "diffHunk": "@@ -228,14 +228,23 @@ private static void completeBegin() {\n     }\n   }\n \n-  private static void stopNamespace(String ns, boolean remove) {\n-    processor.stopNamespace(ns);\n-    AtomicBoolean stopping =\n-        remove ? isNamespaceStopping.remove(ns) : isNamespaceStopping.get(ns);\n+  private static void stopNamespace(String ns, boolean inTargetNamespaceList) {\n+    AtomicBoolean isNamespaceStopping = isNamespaceStopping(ns);\n \n-    if (stopping != null) {\n-      stopping.set(true);\n+    // Remove if namespace not in targetNamespace list\n+    if (!inTargetNamespaceList) {\n+      Main.isNamespaceStopping.remove(ns);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjQ4MzAzMg=="}, "originalCommit": {"oid": "52a6abac8c813b557d125c4d5089616e1520c061"}, "originalPosition": 15}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4365, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}