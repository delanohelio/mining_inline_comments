{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE2ODI4NDU1", "number": 1642, "title": "Added more checks for LB pods status", "bodyText": "https://build.weblogick8s.org:8443/job/weblogic-kubernetes-operator-quicktest/1475/ - has failures not related to this change", "createdAt": "2020-05-12T16:14:30Z", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1642", "merged": true, "mergeCommit": {"oid": "ee454ed098a40af4e666be09bda6898e9ff3b64b"}, "closed": true, "closedAt": "2020-05-17T19:39:17Z", "author": {"login": "marinakog"}, "timelineItems": {"totalCount": 34, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcfp3A-AH2gAyNDE2ODI4NDU1OmM2OTg4MDU1YTEwNWZiMWY3ZTZjNjQxYzQ1ZTViNmNiNzlkYzM1Nzc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABciPpE6gH2gAyNDE2ODI4NDU1OjQ0ODQzZTI3ZTEyNGYzMGQzN2JmZTVmYzU1MGUxMTJjNjBkOWEzMmM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c6988055a105fb1f7e6c641c45e5b6cb79dc3577", "author": {"user": {"login": "marinakog", "name": "Marina Kogan"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/c6988055a105fb1f7e6c641c45e5b6cb79dc3577", "committedDate": "2020-05-09T17:23:56Z", "message": "added debug logs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ff48ba2377bd02c5e0f5a606526f75f938f4619a", "author": {"user": {"login": "marinakog", "name": "Marina Kogan"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/ff48ba2377bd02c5e0f5a606526f75f938f4619a", "committedDate": "2020-05-09T17:25:13Z", "message": "Merge branch 'develop' of https://github.com/oracle/weblogic-kubernetes-operator into lbtest"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c699a2d2ac20a2806e1c7578cb078dc748e9d1cb", "author": {"user": {"login": "marinakog", "name": "Marina Kogan"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/c699a2d2ac20a2806e1c7578cb078dc748e9d1cb", "committedDate": "2020-05-10T02:37:26Z", "message": "style"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f0f716a54261e3e22c97e187d476dd39d1560fb9", "author": {"user": {"login": "marinakog", "name": "Marina Kogan"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/f0f716a54261e3e22c97e187d476dd39d1560fb9", "committedDate": "2020-05-11T16:55:49Z", "message": "style1"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6b9bc07801e7fd0d09fecf1f10eaf58449a1fb8e", "author": {"user": {"login": "marinakog", "name": "Marina Kogan"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/6b9bc07801e7fd0d09fecf1f10eaf58449a1fb8e", "committedDate": "2020-05-11T19:45:55Z", "message": "added sync to update method"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "58ee82f540e3d2c61b9953d6dbc4cb4f32479397", "author": {"user": {"login": "marinakog", "name": "Marina Kogan"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/58ee82f540e3d2c61b9953d6dbc4cb4f32479397", "committedDate": "2020-05-11T22:55:13Z", "message": " added check for terminated state"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d935149bd3e5769387afa204f59141a105c2d807", "author": {"user": {"login": "marinakog", "name": "Marina Kogan"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/d935149bd3e5769387afa204f59141a105c2d807", "committedDate": "2020-05-11T23:22:26Z", "message": " added check for terminated state1"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "87a3a520cdcf41e78d423778929b4d0931613d01", "author": {"user": {"login": "marinakog", "name": "Marina Kogan"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/87a3a520cdcf41e78d423778929b4d0931613d01", "committedDate": "2020-05-12T02:47:05Z", "message": "corrected ingress check"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEwMjExMjYx", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1642#pullrequestreview-410211261", "createdAt": "2020-05-12T16:22:18Z", "commit": {"oid": "87a3a520cdcf41e78d423778929b4d0931613d01"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEwMjI2MDIy", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1642#pullrequestreview-410226022", "createdAt": "2020-05-12T16:39:24Z", "commit": {"oid": "87a3a520cdcf41e78d423778929b4d0931613d01"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQxNjozOToyNFrOGUPbtA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQxNjo1ODoyN1rOGUQNUQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzg3NzU1Ng==", "bodyText": "reliable way to check a pod is restarted is by comparing the pod creation timestamp that is captured before upgrade and pod creation timestamp after upgrade ...please change this logic", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1642#discussion_r423877556", "createdAt": "2020-05-12T16:39:24Z", "author": {"login": "vanajamukkara"}, "path": "integration-tests/src/test/java/oracle/kubernetes/operator/utils/LoadBalancer.java", "diffHunk": "@@ -150,10 +150,26 @@ private void upgradeTraefikNamespace() throws Exception {\n     LoggerHelper.getLocal().log(Level.INFO, \" upgradeTraefikNamespace() Running \" + cmd.toString());\n     ExecResult result = ExecCommand.exec(cmd.toString());\n     if (result.exitValue() != 0) {\n+      TestUtils.checkHelmChart(\"traefik-operator\",\"traefik\");\n       reportHelmInstallFailure(cmd.toString(), result);\n     }\n     String outputStr = result.stdout().trim();\n     LoggerHelper.getLocal().log(Level.INFO, \"Command returned \" + outputStr);\n+    int i = 0;\n+    //wait until pod is restarted after upgrade and check the status\n+    String traefikPod = TestUtils.getPodName(\" -l app=traefik \", \"traefik\");\n+    cmd = new StringBuffer();\n+    cmd.append(\"kubectl get pod -n traefik\");\n+    while (i < maxIterationsPod) {\n+      if (TestUtils.checkPodContains(cmd.toString(), \"Terminating\", traefikPod)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "87a3a520cdcf41e78d423778929b4d0931613d01"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzg4MjUzNw==", "bodyText": "have you verified that this method is not getting called by multiple tests at the same time in parallel runs after adding this?", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1642#discussion_r423882537", "createdAt": "2020-05-12T16:47:07Z", "author": {"login": "vanajamukkara"}, "path": "integration-tests/src/test/java/oracle/kubernetes/operator/utils/LoadBalancer.java", "diffHunk": "@@ -131,7 +131,7 @@ private void createTraefikIngressPerDomain() throws Exception {\n     createTraefikIngress();\n   }\n \n-  private void upgradeTraefikNamespace() throws Exception {\n+  private synchronized void upgradeTraefikNamespace() throws Exception {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "87a3a520cdcf41e78d423778929b4d0931613d01"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzg5MDI1Nw==", "bodyText": "Also check the status of the release after upgrade", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1642#discussion_r423890257", "createdAt": "2020-05-12T16:58:27Z", "author": {"login": "vanajamukkara"}, "path": "integration-tests/src/test/java/oracle/kubernetes/operator/utils/LoadBalancer.java", "diffHunk": "@@ -150,10 +150,26 @@ private void upgradeTraefikNamespace() throws Exception {\n     LoggerHelper.getLocal().log(Level.INFO, \" upgradeTraefikNamespace() Running \" + cmd.toString());\n     ExecResult result = ExecCommand.exec(cmd.toString());\n     if (result.exitValue() != 0) {\n+      TestUtils.checkHelmChart(\"traefik-operator\",\"traefik\");\n       reportHelmInstallFailure(cmd.toString(), result);\n     }\n     String outputStr = result.stdout().trim();\n     LoggerHelper.getLocal().log(Level.INFO, \"Command returned \" + outputStr);\n+    int i = 0;\n+    //wait until pod is restarted after upgrade and check the status\n+    String traefikPod = TestUtils.getPodName(\" -l app=traefik \", \"traefik\");\n+    cmd = new StringBuffer();\n+    cmd.append(\"kubectl get pod -n traefik\");\n+    while (i < maxIterationsPod) {\n+      if (TestUtils.checkPodContains(cmd.toString(), \"Terminating\", traefikPod)) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzg3NzU1Ng=="}, "originalCommit": {"oid": "87a3a520cdcf41e78d423778929b4d0931613d01"}, "originalPosition": 24}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dc923f78b094159f989270f8493378771906133e", "author": {"user": {"login": "marinakog", "name": "Marina Kogan"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/dc923f78b094159f989270f8493378771906133e", "committedDate": "2020-05-12T21:37:04Z", "message": "added timestamp check"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "107580b3f7eeb9710652b016ef3bd42cf8c6b1cb", "author": {"user": {"login": "marinakog", "name": "Marina Kogan"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/107580b3f7eeb9710652b016ef3bd42cf8c6b1cb", "committedDate": "2020-05-12T21:37:21Z", "message": "Merge branch 'develop' of https://github.com/oracle/weblogic-kubernetes-operator into lbtest"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "026ab57f999085eb840f1d1480d82c83a6d7607e", "author": {"user": {"login": "marinakog", "name": "Marina Kogan"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/026ab57f999085eb840f1d1480d82c83a6d7607e", "committedDate": "2020-05-13T01:25:35Z", "message": "style"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "94f464b4c5cf113e0c6d7c819c62ea2c51bdda20", "author": {"user": {"login": "marinakog", "name": "Marina Kogan"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/94f464b4c5cf113e0c6d7c819c62ea2c51bdda20", "committedDate": "2020-05-13T01:46:10Z", "message": "added check LB to domain"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6a2dccd29deb8ff9375807415b8aaeaea18df987", "author": {"user": {"login": "marinakog", "name": "Marina Kogan"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/6a2dccd29deb8ff9375807415b8aaeaea18df987", "committedDate": "2020-05-13T01:49:55Z", "message": "added extra info"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fdcf24d00a26a550b4ad31fcc8c95a4a907432ca", "author": {"user": {"login": "marinakog", "name": "Marina Kogan"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/fdcf24d00a26a550b4ad31fcc8c95a4a907432ca", "committedDate": "2020-05-13T04:01:50Z", "message": "fixed style"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9552d2c9c1afbfa51a09dc1ce2c794af6fcc7d66", "author": {"user": {"login": "marinakog", "name": "Marina Kogan"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/9552d2c9c1afbfa51a09dc1ce2c794af6fcc7d66", "committedDate": "2020-05-13T04:24:19Z", "message": "removed chek creationtime"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "466a57cc627ad418af9f2c63b65a7a8e4430a822", "author": {"user": {"login": "marinakog", "name": "Marina Kogan"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/466a57cc627ad418af9f2c63b65a7a8e4430a822", "committedDate": "2020-05-13T04:31:57Z", "message": "removed chek creationtime1"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6fe23d9a74492caff097c22a68f7b5fa8947520c", "author": {"user": {"login": "marinakog", "name": "Marina Kogan"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/6fe23d9a74492caff097c22a68f7b5fa8947520c", "committedDate": "2020-05-13T15:57:20Z", "message": "cleaned commented out code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a9ae3cf8c7b07ac629acbd1756a8bdce0cf33d56", "author": {"user": {"login": "marinakog", "name": "Marina Kogan"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/a9ae3cf8c7b07ac629acbd1756a8bdce0cf33d56", "committedDate": "2020-05-13T16:30:04Z", "message": "added get values"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExODYwODAy", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1642#pullrequestreview-411860802", "createdAt": "2020-05-14T14:27:03Z", "commit": {"oid": "a9ae3cf8c7b07ac629acbd1756a8bdce0cf33d56"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxNDoyNzowNFrOGVe7Nw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxNDo0ODowOFrOGVf5iA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTE3OTk1OQ==", "bodyText": "I checked with Ryan, he said traefik pod should not be getting restarted after upgrade. You can remove the check you have here for pod restart.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1642#discussion_r425179959", "createdAt": "2020-05-14T14:27:04Z", "author": {"login": "vanajamukkara"}, "path": "integration-tests/src/test/java/oracle/kubernetes/operator/utils/LoadBalancer.java", "diffHunk": "@@ -150,10 +150,26 @@ private void upgradeTraefikNamespace() throws Exception {\n     LoggerHelper.getLocal().log(Level.INFO, \" upgradeTraefikNamespace() Running \" + cmd.toString());\n     ExecResult result = ExecCommand.exec(cmd.toString());\n     if (result.exitValue() != 0) {\n+      TestUtils.checkHelmChart(\"traefik-operator\",\"traefik\");\n       reportHelmInstallFailure(cmd.toString(), result);\n     }\n     String outputStr = result.stdout().trim();\n     LoggerHelper.getLocal().log(Level.INFO, \"Command returned \" + outputStr);\n+    int i = 0;\n+    //wait until pod is restarted after upgrade and check the status\n+    String traefikPod = TestUtils.getPodName(\" -l app=traefik \", \"traefik\");\n+    cmd = new StringBuffer();\n+    cmd.append(\"kubectl get pod -n traefik\");\n+    while (i < maxIterationsPod) {\n+      if (TestUtils.checkPodContains(cmd.toString(), \"Terminating\", traefikPod)) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzg3NzU1Ng=="}, "originalCommit": {"oid": "87a3a520cdcf41e78d423778929b4d0931613d01"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTE5NDk5Mw==", "bodyText": "I think this is only for debugging..you can also check the ingress as well and do TestUtils.checkPodReadyAndRunning(traefikPod, \"traefik\") before helmcheck", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1642#discussion_r425194993", "createdAt": "2020-05-14T14:46:52Z", "author": {"login": "vanajamukkara"}, "path": "integration-tests/src/test/java/oracle/kubernetes/operator/utils/Domain.java", "diffHunk": "@@ -806,7 +806,9 @@ public void callWebAppAndVerifyLoadBalancing(String webappName, boolean verifyLo\n \n       LoggerHelper.getLocal().log(Level.INFO, \"Curl cmd with response code \" + curlCmdResCode);\n       LoggerHelper.getLocal().log(Level.INFO, \"Curl cmd \" + curlCmd);\n-\n+      //check helm status\n+      String lbName = getLoadBalancerName().toLowerCase();\n+      TestUtils.checkHelmChart(lbName + \"-operator\", lbName);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a9ae3cf8c7b07ac629acbd1756a8bdce0cf33d56"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTE5NTkxMg==", "bodyText": "you can remove this too", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1642#discussion_r425195912", "createdAt": "2020-05-14T14:48:08Z", "author": {"login": "vanajamukkara"}, "path": "integration-tests/src/test/java/oracle/kubernetes/operator/utils/LoadBalancer.java", "diffHunk": "@@ -291,8 +319,25 @@ private void upgradeVoyagerNamespace() throws Exception {\n     }\n \n     if (null == returnStr) {\n-      executeHelmCommand(cmd.toString());\n+      executeHelmCommand(cmd.toString(), \"voyager-operator\",\"voyager\");\n     }\n+    //check release status\n+    String helmCmd = \"helm status voyager-operator --namespace voyager\";\n+    TestUtils.checkAnyCmdInLoop(helmCmd, \"deployed\");\n+    i = 0;\n+    //wait until pod is restarted after upgrade and check the status", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a9ae3cf8c7b07ac629acbd1756a8bdce0cf33d56"}, "originalPosition": 113}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4cb4810c8749561106628ac611548e63136b5440", "author": {"user": {"login": "marinakog", "name": "Marina Kogan"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/4cb4810c8749561106628ac611548e63136b5440", "committedDate": "2020-05-14T16:53:08Z", "message": "merge"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "84c3388609388aea19a64308efa1ea3c2be94898", "author": {"user": {"login": "marinakog", "name": "Marina Kogan"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/84c3388609388aea19a64308efa1ea3c2be94898", "committedDate": "2020-05-14T18:10:33Z", "message": "added log collection"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d0aedbafb0e12a108a7844d2e1946b5c63679d41", "author": {"user": {"login": "marinakog", "name": "Marina Kogan"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/d0aedbafb0e12a108a7844d2e1946b5c63679d41", "committedDate": "2020-05-14T18:22:20Z", "message": "style"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6c9381018b628f7283b1a85af0848fc80c16451d", "author": {"user": {"login": "marinakog", "name": "Marina Kogan"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/6c9381018b628f7283b1a85af0848fc80c16451d", "committedDate": "2020-05-14T20:12:38Z", "message": "fixed typo"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2ac84c7b2ab33a2509d93bb5fc4fced790a619e2", "author": {"user": {"login": "marinakog", "name": "Marina Kogan"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/2ac84c7b2ab33a2509d93bb5fc4fced790a619e2", "committedDate": "2020-05-14T23:04:29Z", "message": "Merge branch 'develop' of https://github.com/oracle/weblogic-kubernetes-operator into lbtest"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fec238e8e61e11977a6c2d6502ca0acfc15f91d0", "author": {"user": {"login": "marinakog", "name": "Marina Kogan"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/fec238e8e61e11977a6c2d6502ca0acfc15f91d0", "committedDate": "2020-05-15T19:53:23Z", "message": "added more status collection"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1d6320ae795cb8f071bd2940b219d2ed28732fc8", "author": {"user": {"login": "marinakog", "name": "Marina Kogan"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/1d6320ae795cb8f071bd2940b219d2ed28732fc8", "committedDate": "2020-05-15T20:20:31Z", "message": "typo"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ac00c40ebe370fd86e8587c398a3e8d4ed9c3646", "author": {"user": {"login": "marinakog", "name": "Marina Kogan"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/ac00c40ebe370fd86e8587c398a3e8d4ed9c3646", "committedDate": "2020-05-15T20:31:23Z", "message": "typo1"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "add01fcc79af9ded5062ba84aad35b2a23609253", "author": {"user": {"login": "marinakog", "name": "Marina Kogan"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/add01fcc79af9ded5062ba84aad35b2a23609253", "committedDate": "2020-05-16T00:20:45Z", "message": "fixed logic for lb"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "67d46fd93eb5880e47cd90f0ba48fdd987f562f6", "author": {"user": {"login": "marinakog", "name": "Marina Kogan"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/67d46fd93eb5880e47cd90f0ba48fdd987f562f6", "committedDate": "2020-05-16T00:59:27Z", "message": "fixed style"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzMTIxNzk2", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1642#pullrequestreview-413121796", "createdAt": "2020-05-17T02:19:58Z", "commit": {"oid": "67d46fd93eb5880e47cd90f0ba48fdd987f562f6"}, "state": "APPROVED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xN1QwMjoxOTo1OVrOGWdwFg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xN1QwMjoyMTo0OVrOGWdwlQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjIwOTMwMg==", "bodyText": "it's an ingress controller, not a load balancer. just a note - no need to change it", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1642#discussion_r426209302", "createdAt": "2020-05-17T02:19:59Z", "author": {"login": "markxnelson"}, "path": "integration-tests/src/test/java/oracle/kubernetes/operator/utils/Domain.java", "diffHunk": "@@ -814,7 +814,8 @@ public void callWebAppAndVerifyLoadBalancing(String webappName, boolean verifyLo\n \n       LoggerHelper.getLocal().log(Level.INFO, \"Curl cmd with response code \" + curlCmdResCode);\n       LoggerHelper.getLocal().log(Level.INFO, \"Curl cmd \" + curlCmd);\n-\n+      //check helm status\n+      checkLoadBalancer();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "67d46fd93eb5880e47cd90f0ba48fdd987f562f6"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjIwOTM5MA==", "bodyText": "expr is a poor choice of name", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1642#discussion_r426209390", "createdAt": "2020-05-17T02:21:06Z", "author": {"login": "markxnelson"}, "path": "integration-tests/src/test/java/oracle/kubernetes/operator/utils/TestUtils.java", "diffHunk": "@@ -2181,4 +2210,107 @@ public static String getDeletionTimestamp(String namespace, String pod) throws E\n     ExecResult result = ExecCommand.exec(kcmd);\n     return result.stdout().trim();\n   }\n+\n+  /**\n+   * Check the expected status for provided helm chart.\n+   *\n+   * @param chartName  helm chart name\n+   * @param chartNS helm chart namespace\n+   * @param expr expected status", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "67d46fd93eb5880e47cd90f0ba48fdd987f562f6"}, "originalPosition": 69}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjIwOTQyOQ==", "bodyText": "you are not returning anything from this method, so \"retrieve info\" seems incorrect", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1642#discussion_r426209429", "createdAt": "2020-05-17T02:21:49Z", "author": {"login": "markxnelson"}, "path": "integration-tests/src/test/java/oracle/kubernetes/operator/utils/TestUtils.java", "diffHunk": "@@ -2181,4 +2210,107 @@ public static String getDeletionTimestamp(String namespace, String pod) throws E\n     ExecResult result = ExecCommand.exec(kcmd);\n     return result.stdout().trim();\n   }\n+\n+  /**\n+   * Check the expected status for provided helm chart.\n+   *\n+   * @param chartName  helm chart name\n+   * @param chartNS helm chart namespace\n+   * @param expr expected status\n+   * @throws Exception if expected status not found.\n+   */\n+  public static void checkHelmChartStatus(String chartName, String chartNS, String expr) throws Exception {\n+    String cmd = \"helm status \" + chartName + \" --namespace \" + chartNS;\n+    ExecResult result = ExecCommand.exec(cmd);\n+    checkCmdInLoop(cmd, expr, chartName);\n+  }\n+\n+  /**\n+   * Retrieve info for provided helm chart.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "67d46fd93eb5880e47cd90f0ba48fdd987f562f6"}, "originalPosition": 79}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6f28263d0516ce1da2adbf35c436cb2706dae49a", "author": {"user": {"login": "marinakog", "name": "Marina Kogan"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/6f28263d0516ce1da2adbf35c436cb2706dae49a", "committedDate": "2020-05-17T17:17:24Z", "message": "corrected var and method naming"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "44843e27e124f30d37bfe5fc550e112c60d9a32c", "author": {"user": {"login": "marinakog", "name": "Marina Kogan"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/44843e27e124f30d37bfe5fc550e112c60d9a32c", "committedDate": "2020-05-17T18:32:57Z", "message": "modified getpodname to return last created pod based on searchexp"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4780, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}