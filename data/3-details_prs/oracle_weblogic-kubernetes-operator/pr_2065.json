{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI0ODg0NjE4", "number": 2065, "title": "Update the Default Voyager version from 10.0.0 to 12.0.0 ", "bodyText": "As per Voyager Doc\nhttps://github.com/voyagermesh/voyager#supported-versions\nCurrently the GA version is 12.0.0  ( GA ) .  Need to update the sample utility script to make 12.0.0 as default.\nEnhanced the script to check the creation of  CRD  ingresses.voyager.appscode.com beside the voyager operator pod creation.\nI noticed that the integration test uses 12.0.0 thru the variable TestConstants.java.VOYAGER_CHART_VERSION = \"12.0.0\"", "createdAt": "2020-11-20T18:36:29Z", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2065", "merged": true, "mergeCommit": {"oid": "60a63d5802b1deab3281d83a3403d015e3d5e7bc"}, "closed": true, "closedAt": "2020-11-24T16:58:25Z", "author": {"login": "anpanigr"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdd6CwygH2gAyNTI0ODg0NjE4OjFiMzI5ZjVmYmQ1ZDhjN2JlYjkxNjBjMDUyM2IzY2RjZTM2MzI2NGU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdfYYBjgFqTUzNjY4MjU2MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "1b329f5fbd5d8c7beb9160c0523b3cdce363264e", "author": {"user": null}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/1b329f5fbd5d8c7beb9160c0523b3cdce363264e", "committedDate": "2020-11-19T03:18:33Z", "message": "Upgrade the default Voyager version to 12.0.0"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a6175fd8cbc08a34593e0442858066777a968d26", "author": {"user": null}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/a6175fd8cbc08a34593e0442858066777a968d26", "committedDate": "2020-11-20T01:42:11Z", "message": "updated the doc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d1079c16d4f7efd23c18e08eb81df201b1005745", "author": {"user": null}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/d1079c16d4f7efd23c18e08eb81df201b1005745", "committedDate": "2020-11-20T18:26:12Z", "message": "Merge branch 'develop' of https://github.com/oracle/weblogic-kubernetes-operator into lb-update"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM1NzQwOTAz", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2065#pullrequestreview-535740903", "createdAt": "2020-11-20T20:04:41Z", "commit": {"oid": "d1079c16d4f7efd23c18e08eb81df201b1005745"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM1NzY4Mjc0", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2065#pullrequestreview-535768274", "createdAt": "2020-11-20T20:52:47Z", "commit": {"oid": "d1079c16d4f7efd23c18e08eb81df201b1005745"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMFQyMDo1Mjo0N1rOH3gXWA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMFQyMDo1OTowMFrOH3giHQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzk2Mzk5Mg==", "bodyText": "This should be:\nif [ \"$(helm list --namespace $NSPACE| grep $NNAME |  wc -l)\" = 0 ]; then", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2065#discussion_r527963992", "createdAt": "2020-11-20T20:52:47Z", "author": {"login": "xiancao"}, "path": "kubernetes/samples/charts/util/setupLoadBalancer.sh", "diffHunk": "@@ -216,7 +245,8 @@ function createNginx() {\n \n   if [ \"$(helm list --namespace $NNAME | grep $NNAME |  wc -l)\" = 0 ]; then", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d1079c16d4f7efd23c18e08eb81df201b1005745"}, "originalPosition": 109}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzk2NDQyMQ==", "bodyText": "You can put these in one line", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2065#discussion_r527964421", "createdAt": "2020-11-20T20:53:48Z", "author": {"login": "xiancao"}, "path": "kubernetes/samples/charts/util/setupLoadBalancer.sh", "diffHunk": "@@ -228,7 +258,9 @@ function createNginx() {\n   count=0\n   tpod=$(kubectl get po -n ${NSPACE} --no-headers | awk '{print $1}')\n   while test $count -lt $max; do\n-    if test \"$(kubectl get po -n ${NSPACE} --no-headers | awk '{print $2}')\" = 1/1; then\n+    status=$(kubectl get po -n ${NSPACE} --no-headers 2> /dev/null \\\n+                | awk '{print $2}')", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d1079c16d4f7efd23c18e08eb81df201b1005745"}, "originalPosition": 123}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzk2NDc4MQ==", "bodyText": "typo here:\ninginx -> nginx", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2065#discussion_r527964781", "createdAt": "2020-11-20T20:54:37Z", "author": {"login": "xiancao"}, "path": "kubernetes/samples/charts/util/setupLoadBalancer.sh", "diffHunk": "@@ -264,7 +296,7 @@ function main() {\n     usage\n   fi\n   if [ \"$2\" != traefik ] && [ \"$2\" != voyager ] && [ \"$2\" != nginx ]; then\n-    echo \"[ERROR] The second  parameter MUST be either traefik or voyager or inginx \"\n+    echo \"[ERROR] The second parameter MUST be either traefik, voyager or inginx \"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d1079c16d4f7efd23c18e08eb81df201b1005745"}, "originalPosition": 133}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzk2NTA5NA==", "bodyText": "You can put these in one line", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2065#discussion_r527965094", "createdAt": "2020-11-20T20:55:14Z", "author": {"login": "xiancao"}, "path": "kubernetes/samples/charts/util/setupLoadBalancer.sh", "diffHunk": "@@ -71,17 +72,43 @@ function createVoyager() {\n   count=0\n   vpod=$(kubectl get po -n ${VSPACE} --no-headers | awk '{print $1}')\n   while test $count -lt $max; do\n-    if test \"$(kubectl get po -n ${VSPACE} --no-headers | awk '{print $2}')\" = 1/1; then\n+    status=$(kubectl get po -n ${VSPACE} --no-headers 2> /dev/null \\\n+                | awk '{print $2}')", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d1079c16d4f7efd23c18e08eb81df201b1005745"}, "originalPosition": 53}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzk2NTk0MQ==", "bodyText": "You can put these in one line", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2065#discussion_r527965941", "createdAt": "2020-11-20T20:57:08Z", "author": {"login": "xiancao"}, "path": "kubernetes/samples/charts/util/setupLoadBalancer.sh", "diffHunk": "@@ -71,17 +72,43 @@ function createVoyager() {\n   count=0\n   vpod=$(kubectl get po -n ${VSPACE} --no-headers | awk '{print $1}')\n   while test $count -lt $max; do\n-    if test \"$(kubectl get po -n ${VSPACE} --no-headers | awk '{print $2}')\" = 1/1; then\n+    status=$(kubectl get po -n ${VSPACE} --no-headers 2> /dev/null \\\n+                | awk '{print $2}')\n+    if [ ${status} == \"1/1\" ]; then\n       echo \"Voyager operator pod is running now.\"\n       kubectl get pod/${vpod} -n ${VSPACE}\n-      exit 0;\n+      break;\n     fi\n     count=`expr $count + 1`\n     sleep 2\n   done\n-  echo \"ERROR: Voyager operator pod failed to start.\"\n-  kubectl describe pod/${vpod}  -n ${VSPACE}\n-  exit 1\n+  if test $count -eq $max; then\n+    echo \"ERROR: Voyager operator pod failed to start.\"\n+    exit 1\n+  fi\n+  kubectl describe pod/${vpod} -n ${VSPACE}\n+  helm list -n ${VSPACE}\n+  \n+  max=20\n+  count=0\n+  crd=\"ingresses.voyager.appscode.com\"\n+  echo \"Checking availability of Custom Resource Definition [${crd}]\"\n+  while test $count -lt $max; do\n+   obj=$(kubectl get crd ${crd} -n ${VSPACE} \\\n+          --no-headers 2>/dev/null | awk '{print $1}')", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d1079c16d4f7efd23c18e08eb81df201b1005745"}, "originalPosition": 79}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzk2NjE1MA==", "bodyText": "you can put these in one line", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2065#discussion_r527966150", "createdAt": "2020-11-20T20:57:37Z", "author": {"login": "xiancao"}, "path": "kubernetes/samples/charts/util/setupLoadBalancer.sh", "diffHunk": "@@ -115,7 +142,9 @@ function createTraefik() {\n   count=0\n   tpod=$(kubectl get po -n ${TSPACE} --no-headers | awk '{print $1}')\n   while test $count -lt $max; do\n-    if test \"$(kubectl get po -n ${TSPACE} --no-headers | awk '{print $2}')\" = 1/1; then\n+    status=$(kubectl get po -n ${TSPACE} --no-headers 2> /dev/null \\\n+                | awk '{print $2}')", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d1079c16d4f7efd23c18e08eb81df201b1005745"}, "originalPosition": 102}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzk2Njc0OQ==", "bodyText": "change this to:\nkubectl exec -it $tpod -n ${NSPACE} -- /nginx-ingress-controller --version``", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2065#discussion_r527966749", "createdAt": "2020-11-20T20:59:00Z", "author": {"login": "xiancao"}, "path": "kubernetes/samples/charts/util/setupLoadBalancer.sh", "diffHunk": "@@ -228,7 +258,9 @@ function createNginx() {\n   count=0\n   tpod=$(kubectl get po -n ${NSPACE} --no-headers | awk '{print $1}')\n   while test $count -lt $max; do\n-    if test \"$(kubectl get po -n ${NSPACE} --no-headers | awk '{print $2}')\" = 1/1; then\n+    status=$(kubectl get po -n ${NSPACE} --no-headers 2> /dev/null \\\n+                | awk '{print $2}')\n+    if [ ${status} == \"1/1\" ]; then\n       echo \"Nginx operator pod is running now.\"\n       kubectl get pod/${tpod} -n ${NSPACE}\n       kubectl exec -it $tpod -n nginx -- /nginx-ingress-controller --version``", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d1079c16d4f7efd23c18e08eb81df201b1005745"}, "originalPosition": 127}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3dcca4d2de6424847c8bdfe48ed6f9187e912f8d", "author": {"user": null}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/3dcca4d2de6424847c8bdfe48ed6f9187e912f8d", "committedDate": "2020-11-23T15:17:26Z", "message": "Merge branch 'develop' of https://github.com/oracle/weblogic-kubernetes-operator into lb-update"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8814b385514b5f8d240e4f4afa1776aa44fd0531", "author": {"user": null}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/8814b385514b5f8d240e4f4afa1776aa44fd0531", "committedDate": "2020-11-23T16:25:37Z", "message": "address review comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "50bdea540a03d2ac7eda1f8a3635e9c27eb47f9a", "author": {"user": null}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/50bdea540a03d2ac7eda1f8a3635e9c27eb47f9a", "committedDate": "2020-11-23T17:09:51Z", "message": "More change to script"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM2NjgyNTYx", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2065#pullrequestreview-536682561", "createdAt": "2020-11-23T17:12:51Z", "commit": {"oid": "50bdea540a03d2ac7eda1f8a3635e9c27eb47f9a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3938, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}