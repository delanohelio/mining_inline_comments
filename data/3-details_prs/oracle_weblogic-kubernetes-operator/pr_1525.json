{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk3MzA1OTk4", "number": 1525, "title": "Missing secret dir fix", "bodyText": "This is a temporary work around for WDT returning 1 instead of 0,  when the model has only credential secrets but no other custom secret, in this case the operator will not mount the directory /weblogic-operator/config-overrides-secrets and WDT checks whether the directory exists and return 1 for warning if not there.", "createdAt": "2020-04-02T01:15:43Z", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1525", "merged": true, "mergeCommit": {"oid": "2723ab2208945cdf4cb8275c34d6996843bf1250"}, "closed": true, "closedAt": "2020-04-03T13:52:12Z", "author": {"login": "jshum2479"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcThWiwAH2gAyMzk3MzA1OTk4OmI5NTIxMjg0Mzk0MGEwYWJjM2NiNDE4NzliNWEzYTkzOTgwNDQzNGU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcTyO6TgFqTM4Njc2NDA4Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b95212843940a0abc3cb41879b5a3a939804434e", "author": {"user": null}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/b95212843940a0abc3cb41879b5a3a939804434e", "committedDate": "2020-04-02T00:42:08Z", "message": "Add temporary work around for WDT return non-zero rc if secret directory doesn't exist."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg2NDA1Njcw", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1525#pullrequestreview-386405670", "createdAt": "2020-04-02T13:06:52Z", "commit": {"oid": "b95212843940a0abc3cb41879b5a3a939804434e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg2NDY2MTA2", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1525#pullrequestreview-386466106", "createdAt": "2020-04-02T14:12:03Z", "commit": {"oid": "b95212843940a0abc3cb41879b5a3a939804434e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQxNDoxMjowNFrOF_tKwg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQxNDoxMjowNFrOF_tKwg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjM0NDY0Mg==", "bodyText": "Does it suppress the WARNING if you skip the export all-together?\nDoes this need to be a temporary work-around?  The  WARNING is distracting in the first place, even if WDT is fixed to return non-zero.   Maybe just remove the comment.\nIf answer to both is yes, the change is as sample as:\n[ ! -d ${WDT_MODEL_SECRETS_DIRS} ]  && unset WDT_MODEL_SECRETS_DIRS", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1525#discussion_r402344642", "createdAt": "2020-04-02T14:12:04Z", "author": {"login": "tbarnes-us"}, "path": "operator/src/main/resources/scripts/modelInImage.sh", "diffHunk": "@@ -53,6 +53,11 @@ RCU_PASSWORD_CHANGED=5\n SCRIPT_ERROR=255\n \n export WDT_MODEL_SECRETS_DIRS=\"/weblogic-operator/config-overrides-secrets\"\n+if [ ! -d ${WDT_MODEL_SECRETS_DIRS} ] ; then\n+  # Temporary work around for WDT to avoid non zero return code if the directory doesn't exist\n+  mkdir -p /tmp/nosuchdir\n+  export WDT_MODEL_SECRETS_DIRS=\"/tmp/nosuchdir\"\n+fi", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b95212843940a0abc3cb41879b5a3a939804434e"}, "originalPosition": 8}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg2NzEwODc2", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1525#pullrequestreview-386710876", "createdAt": "2020-04-02T18:58:31Z", "commit": {"oid": "b95212843940a0abc3cb41879b5a3a939804434e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8af2086f2de84fd1f5f6e043a3c26cd2c88d7832", "author": {"user": null}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/8af2086f2de84fd1f5f6e043a3c26cd2c88d7832", "committedDate": "2020-04-02T19:26:00Z", "message": "Change per WDT fix for no more default for custom secrets mount"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg2NzMwNTYz", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1525#pullrequestreview-386730563", "createdAt": "2020-04-02T19:27:08Z", "commit": {"oid": "8af2086f2de84fd1f5f6e043a3c26cd2c88d7832"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg2NzY0MDgy", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1525#pullrequestreview-386764082", "createdAt": "2020-04-02T20:20:39Z", "commit": {"oid": "8af2086f2de84fd1f5f6e043a3c26cd2c88d7832"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4956, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}