{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc5MjAxMzI0", "number": 1903, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QxNzoyNDo1M1rOEg_19g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQyMDo1NjozM1rOEh2x8w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAzMDM1ODk0OnYy", "diffSide": "RIGHT", "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/ItMiiUpdateDomainConfig.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QxNzoyNDo1M1rOHOFUIA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QxNzoyNDo1M1rOHOFUIA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDUyOTE4NA==", "bodyText": "We should check for non ZERO size of the log file or look for certain String on the Log file", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1903#discussion_r484529184", "createdAt": "2020-09-07T17:24:53Z", "author": {"login": "anpanigr"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/ItMiiUpdateDomainConfig.java", "diffHunk": "@@ -224,27 +266,41 @@ public static void initAll(@Namespaces(2) List<String> namespaces) {\n   @BeforeEach\n   public void beforeEach() {\n \n-    // check admin server pod is ready\n-    logger.info(\"Wait for admin server pod {0} to be ready in namespace {1}\",\n+    logger.info(\"Check admin service and pod {0} is created in namespace {1}\",\n         adminServerPodName, domainNamespace);\n-    checkPodReady(adminServerPodName, domainUid, domainNamespace);\n-    logger.info(\"Check admin service {0} is created in namespace {1}\",\n-        adminServerPodName, domainNamespace);\n-    checkServiceExists(adminServerPodName, domainNamespace);\n+    checkPodReadyAndServiceExists(adminServerPodName, domainUid, domainNamespace);\n \n-    // check managed server pods are ready\n+    // check managed server services and pods are ready\n     for (int i = 1; i <= replicaCount; i++) {\n-      logger.info(\"Wait for managed server pod {0} to be ready in namespace {1}\",\n-          managedServerPrefix + i, domainNamespace);\n-      checkPodReady(managedServerPrefix + i, domainUid, domainNamespace);\n+      logger.info(\"Wait for managed server services and pods are created in namespace {0}\",\n+          domainNamespace);\n+      checkPodReadyAndServiceExists(managedServerPrefix + i, domainUid, domainNamespace);\n     }\n+  }\n+\n+  /**\n+   * Check server logs are written on PV.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c9f154a632d2e008e9ecc47efbb17c407d64da88"}, "originalPosition": 181}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAzOTM1OTEyOnYy", "diffSide": "RIGHT", "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/ItMiiUpdateDomainConfig.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQyMDo1NjoxOVrOHPaBgA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQyMDo1NjoxOVrOHPaBgA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTkxNzA1Ng==", "bodyText": "add some indentation here to make the code easier to read.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1903#discussion_r485917056", "createdAt": "2020-09-09T20:56:19Z", "author": {"login": "xiancao"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/ItMiiUpdateDomainConfig.java", "diffHunk": "@@ -758,14 +811,23 @@ private static void createDomainResource(\n                             .name(adminSecretName)\n                             .namespace(domNamespace))\n                     .includeServerOutInPodLog(true)\n+                    .logHomeEnabled(Boolean.TRUE)\n+                    .logHome(\"/shared/logs\")\n                     .serverStartPolicy(\"IF_NEEDED\")\n                     .serverPod(new ServerPod()\n                             .addEnvItem(new V1EnvVar()\n                                     .name(\"JAVA_OPTIONS\")\n                                     .value(\"-Dweblogic.StdoutDebugEnabled=false\"))\n                             .addEnvItem(new V1EnvVar()\n                                     .name(\"USER_MEM_ARGS\")\n-                                    .value(\"-Djava.security.egd=file:/dev/./urandom \")))\n+                                    .value(\"-Djava.security.egd=file:/dev/./urandom \"))\n+                            .addVolumesItem(new V1Volume()\n+                            .name(pvName)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d114d18ae97de652d034cb311d55d7c4e9c4f94d"}, "originalPosition": 317}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAzOTM1OTg3OnYy", "diffSide": "RIGHT", "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/ItMiiUpdateDomainConfig.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQyMDo1NjozM1rOHPaCAQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQyMDo1NjozM1rOHPaCAQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTkxNzE4NQ==", "bodyText": "same here", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1903#discussion_r485917185", "createdAt": "2020-09-09T20:56:33Z", "author": {"login": "xiancao"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/ItMiiUpdateDomainConfig.java", "diffHunk": "@@ -758,14 +811,23 @@ private static void createDomainResource(\n                             .name(adminSecretName)\n                             .namespace(domNamespace))\n                     .includeServerOutInPodLog(true)\n+                    .logHomeEnabled(Boolean.TRUE)\n+                    .logHome(\"/shared/logs\")\n                     .serverStartPolicy(\"IF_NEEDED\")\n                     .serverPod(new ServerPod()\n                             .addEnvItem(new V1EnvVar()\n                                     .name(\"JAVA_OPTIONS\")\n                                     .value(\"-Dweblogic.StdoutDebugEnabled=false\"))\n                             .addEnvItem(new V1EnvVar()\n                                     .name(\"USER_MEM_ARGS\")\n-                                    .value(\"-Djava.security.egd=file:/dev/./urandom \")))\n+                                    .value(\"-Djava.security.egd=file:/dev/./urandom \"))\n+                            .addVolumesItem(new V1Volume()\n+                            .name(pvName)\n+                            .persistentVolumeClaim(new V1PersistentVolumeClaimVolumeSource()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d114d18ae97de652d034cb311d55d7c4e9c4f94d"}, "originalPosition": 318}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3935, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}