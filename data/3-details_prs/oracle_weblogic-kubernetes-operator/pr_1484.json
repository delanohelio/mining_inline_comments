{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkxNzgxNDc2", "number": 1484, "title": "OWLS-78058 Add logs/status for domain refs to non-existant WL clusters & servers", "bodyText": "If a domain resource references a non-existent WL cluster or server, then (a) log a warning in the operator, and (b) update the domain status with a similar warning.\n\n\nAdded \"Replicas Goal\" to cluster status which is the replicas specified in the domain spec for the cluster\n\n\nAdded \"desired state\" to server status which is the server state specified in the domain spec for the server\n\n\nCleaned up some unused code in wlsconfig package\n\n\nExample warning messages:\n{\"timestamp\":\"03-20-2020T22:49:17.183+0000\",\"thread\":23,\"fiber\":\"engine-operator-thread-5-fiber-5\",\"domainUID\":\"domain1\",\"level\":\"WARNING\",\"class\":\"oracle.kubernetes.operator.helpers.DomainValidationSteps$ValidateDomainTopologyStep\",\"method\":\"logAndAddWarning\",\"timeInMillis\":1584744557183,\"message\":\"Managed Server 'ghost-server' specified in the domain resource does not exist in the WebLogic domain\",\"exception\":\"\",\"code\":\"\",\"headers\":{},\"body\":\"\"}\nExample domain status:\nStatus:\nClusters:\nCluster Name:      cluster-1\nMaximum Replicas:  3\nReady Replicas:    1\nReplicas:          1\nReplicas Goal:     1    <--- new\nConditions:\nReason:  ServersReady\nStatus:  True\nType:    Available\nMessage:   Cluster 'ghost-cluster' specified in the domain resource does not exist in the WebLogic domain\nManaged Server 'ghost-server' specified in the domain resource does not exist in the WebLogic domain     <-- new\nReplicas:  1\nServers:\nCluster Name:   cluster-1\nDesired State:  RUNNING\nServer Name:    managed-server2\nState:          SHUTDOWN\nCluster Name:   cluster-1\nDesired State:  RUNNING         <--- new", "createdAt": "2020-03-20T23:41:42Z", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1484", "merged": true, "mergeCommit": {"oid": "d0f091be470ec84f54a9b39dc4279a33c372f698"}, "closed": true, "closedAt": "2020-03-23T17:17:29Z", "author": {"login": "alai8"}, "timelineItems": {"totalCount": 20, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcMvqXPgH2gAyMzkxNzgxNDc2OmM1YjMyMmZlZGViMjI1NTgwMDA4MzJmODZkNTdhMDJmYzMxNGUyMTQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcQhleMAFqTM3OTY0NDMxMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c5b322fedeb22558000832f86d57a02fc314e214", "author": {"user": {"login": "alai8", "name": "Anthony Lai"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/c5b322fedeb22558000832f86d57a02fc314e214", "committedDate": "2020-03-11T23:24:59Z", "message": "add replicaGoal to ClusterStatus, desiredState to ServerStatus, report of non-existent cluster or server specified in domain resource, remove unused code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0b40a6c22c87732d583cc79f1d49334ce36845cd", "author": {"user": {"login": "alai8", "name": "Anthony Lai"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/0b40a6c22c87732d583cc79f1d49334ce36845cd", "committedDate": "2020-03-13T17:19:39Z", "message": "Merge branch 'develop' into owls-78058"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "abe479cd5a95317f7067d02c0e4f5a9517b75bb6", "author": {"user": {"login": "alai8", "name": "Anthony Lai"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/abe479cd5a95317f7067d02c0e4f5a9517b75bb6", "committedDate": "2020-03-13T21:54:14Z", "message": "setting validation warnings to status message after various addCondition"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d772a608471adbbba37281df408870e6fcfa5230", "author": {"user": {"login": "alai8", "name": "Anthony Lai"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/d772a608471adbbba37281df408870e6fcfa5230", "committedDate": "2020-03-13T21:54:50Z", "message": "unit tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8bc9b6600c684712ed3999884db59cdba6f17af6", "author": {"user": {"login": "alai8", "name": "Anthony Lai"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/8bc9b6600c684712ed3999884db59cdba6f17af6", "committedDate": "2020-03-18T00:01:26Z", "message": "validate domain topology when domain has changed and introspect domain job is not needed"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6cbfa7f43215634ba6a06053c2f61a8e0a370d29", "author": {"user": {"login": "alai8", "name": "Anthony Lai"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/6cbfa7f43215634ba6a06053c2f61a8e0a370d29", "committedDate": "2020-03-18T00:35:17Z", "message": "refactor ValidDomainTopologySteps"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "edbf921cc0f1be9bfb96bc8b68e568d556f24d9f", "author": {"user": {"login": "alai8", "name": "Anthony Lai"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/edbf921cc0f1be9bfb96bc8b68e568d556f24d9f", "committedDate": "2020-03-18T00:36:36Z", "message": "display domain topology valiation warnings to domain status message"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dc77511653d0806a1c445ca3e3d04e209a630312", "author": {"user": {"login": "alai8", "name": "Anthony Lai"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/dc77511653d0806a1c445ca3e3d04e209a630312", "committedDate": "2020-03-18T00:40:39Z", "message": "Merge branch 'develop' into owls-78058\n\nConflicts:\n\tdocs/charts/index.yaml\n\tdocs/charts/weblogic-operator-2.6.0.tgz\n\tkubernetes/crd/domain-crd.yaml"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "75bd9f0b40fd68d855dc4c7f1b8ce408a7f97941", "author": {"user": {"login": "alai8", "name": "Anthony Lai"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/75bd9f0b40fd68d855dc4c7f1b8ce408a7f97941", "committedDate": "2020-03-18T00:51:18Z", "message": "merge conflict"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a9eddf9c1369f0eb97d68089a0cc1b27c8848a50", "author": {"user": {"login": "alai8", "name": "Anthony Lai"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/a9eddf9c1369f0eb97d68089a0cc1b27c8848a50", "committedDate": "2020-03-18T23:18:36Z", "message": "added more unit tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3ce31b0864c455e583382d721f61a247cd82d521", "author": {"user": {"login": "alai8", "name": "Anthony Lai"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/3ce31b0864c455e583382d721f61a247cd82d521", "committedDate": "2020-03-18T23:21:52Z", "message": "Merge branch 'develop' into owls-78058"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "18e64727d1747eb544533476b633e27af8954008", "author": {"user": {"login": "alai8", "name": "Anthony Lai"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/18e64727d1747eb544533476b633e27af8954008", "committedDate": "2020-03-20T17:52:54Z", "message": "add missing desiredState in copy constructor. desiredState should not be required"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc5MDcyOTQ0", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1484#pullrequestreview-379072944", "createdAt": "2020-03-23T00:13:27Z", "commit": {"oid": "18e64727d1747eb544533476b633e27af8954008"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QwMDoxMzoyOFrOF5z-GQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QwMDoxMzoyOFrOF5z-GQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjE2NDYzMw==", "bodyText": "maybe change \"WebLogic domain\" --> \"WebLogic domain home configuration\" in both logs to help disambiguate a little", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1484#discussion_r396164633", "createdAt": "2020-03-23T00:13:28Z", "author": {"login": "tbarnes-us"}, "path": "operator/src/main/resources/Operator.properties", "diffHunk": "@@ -182,6 +182,9 @@ WLSDO-0003=No volume mount contains path for log home ''{0}''\n WLSDO-0004=The mount path ''{0}'', in entry ''{1}'' of domain resource ''additionalVolumeMounts'', is not valid\n WLSDO-0005=Environment {0} {1}, specified under ''{2}'', {3} reserved for use by the operator\n WLSDO-0006=Bad namespace for weblogicCredentialsSecret: ''{0}''. If specified, must be same as domain namespace.\n+WLSDO-0007=Cluster ''{0}'' specified in the domain resource does not exist in the WebLogic domain\n+WLSDO-0008=Managed Server ''{0}'' specified in the domain resource does not exist in the WebLogic domain", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "18e64727d1747eb544533476b633e27af8954008"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc5MzQyNTE3", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1484#pullrequestreview-379342517", "createdAt": "2020-03-23T11:28:35Z", "commit": {"oid": "18e64727d1747eb544533476b633e27af8954008"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxMToyODozNVrOF6BSOA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxMToyODozNVrOF6BSOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjM4Mjc3Ng==", "bodyText": "Let's discuss the use of \"Required\" here.  I think it's okay because we are going to version 3.0.0, so there can be non-backward compatible changes. However, just having \"Required\" in the description doesn't make the field required.  If we want the field to be required in the schema, then tag the field with @nonnull.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1484#discussion_r396382776", "createdAt": "2020-03-23T11:28:35Z", "author": {"login": "rjeberhard"}, "path": "operator/src/main/java/oracle/kubernetes/weblogic/domain/model/ClusterStatus.java", "diffHunk": "@@ -38,6 +38,11 @@\n   @Range(minimum = 0)\n   private Integer maximumReplicas;\n \n+  /** The requested number of cluster members. Required. */\n+  @Description(\"The requested number of cluster members. Required.\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "18e64727d1747eb544533476b633e27af8954008"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a087e69d48d29fe83b0ffae6994e521f70cab66f", "author": {"user": {"login": "alai8", "name": "Anthony Lai"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/a087e69d48d29fe83b0ffae6994e521f70cab66f", "committedDate": "2020-03-23T16:03:26Z", "message": "Merge branch 'develop' into owls-78058-wip"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "126e65c532a44192a0efbd911910a9b8ba9b172c", "author": {"user": {"login": "alai8", "name": "Anthony Lai"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/126e65c532a44192a0efbd911910a9b8ba9b172c", "committedDate": "2020-03-23T16:23:17Z", "message": "clarify topology validation messages"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dacc45de3f184a132c96d2e633a488664303277f", "author": {"user": {"login": "alai8", "name": "Anthony Lai"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/dacc45de3f184a132c96d2e633a488664303277f", "committedDate": "2020-03-23T16:24:18Z", "message": "replicasGoal should not be required"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "144ac476db77b0ce4dc52c03b485e07ca538d08d", "author": {"user": {"login": "alai8", "name": "Anthony Lai"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/144ac476db77b0ce4dc52c03b485e07ca538d08d", "committedDate": "2020-03-23T16:32:20Z", "message": "remove weblogic-operator-2.6.0.tgz from branch"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d1f45b783d7b5951f84f14a2daf9a7f326312482", "author": {"user": {"login": "alai8", "name": "Anthony Lai"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/d1f45b783d7b5951f84f14a2daf9a7f326312482", "committedDate": "2020-03-23T17:06:49Z", "message": "updated description for replicasGoal"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc5NjQ0MzEz", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1484#pullrequestreview-379644313", "createdAt": "2020-03-23T17:16:40Z", "commit": {"oid": "d1f45b783d7b5951f84f14a2daf9a7f326312482"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4882, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}