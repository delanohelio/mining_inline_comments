{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYwMTEyMzM3", "number": 1382, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QxODo0ODoyOFrODWVgLw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QxODo0ODoyOFrODWVgLw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI0NzQ3NTY3OnYy", "diffSide": "RIGHT", "path": "operator/src/main/resources/scripts/startNodeManager.sh", "isResolved": true, "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QxODo0ODoyOFrOFbCZUQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQxNjo1NToxMVrOFbdWIQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mzg5NTEyMQ==", "bodyText": "It's my understanding that urandom isn't considered to be the most secure option for all situations, so we should provide a way to setup the NM without it.   Instead of appending urandom if it's missing, how about making the default for NODEMGR_MEM_ARGS \"-Xms64m -Xmx100m -Djava.security.egd=file:/dev/./urandom\"?  Plus updating the doc above to accordingly?", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1382#discussion_r363895121", "createdAt": "2020-01-07T18:48:28Z", "author": {"login": "tbarnes-us"}, "path": "operator/src/main/resources/scripts/startNodeManager.sh", "diffHunk": "@@ -299,6 +299,13 @@ if [ -z \"${NODEMGR_MEM_ARGS}\" ]; then\n   NODEMGR_MEM_ARGS=\"-Xms64m -Xmx100m\"\n fi\n \n+# If not already defined, set 'java.security.egd' option to /dev/urandom for\n+# Node Manager JVM for low entropy.  Speeds up boot process of Node Manager.\n+if [[ ! \"${NODEMGR_MEM_ARGS}\" =~ .*urandom* ]]\n+then\n+  NODEMGR_MEM_ARGS=\"${NODEMGR_MEM_ARGS} -Djava.security.egd=file:/dev/./urandom \"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "25936f6fe5923604db0ce44684a870448ca67bb9"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzkyNTI2OA==", "bodyText": "Instead of searching for 'urandom' specifically, should we search for 'java.security.egd' security property is specified and set to 'urandom' if the security property isn't set?", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1382#discussion_r363925268", "createdAt": "2020-01-07T20:00:13Z", "author": {"login": "lennyphan"}, "path": "operator/src/main/resources/scripts/startNodeManager.sh", "diffHunk": "@@ -299,6 +299,13 @@ if [ -z \"${NODEMGR_MEM_ARGS}\" ]; then\n   NODEMGR_MEM_ARGS=\"-Xms64m -Xmx100m\"\n fi\n \n+# If not already defined, set 'java.security.egd' option to /dev/urandom for\n+# Node Manager JVM for low entropy.  Speeds up boot process of Node Manager.\n+if [[ ! \"${NODEMGR_MEM_ARGS}\" =~ .*urandom* ]]\n+then\n+  NODEMGR_MEM_ARGS=\"${NODEMGR_MEM_ARGS} -Djava.security.egd=file:/dev/./urandom \"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mzg5NTEyMQ=="}, "originalCommit": {"oid": "25936f6fe5923604db0ce44684a870448ca67bb9"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzkyODY3MA==", "bodyText": "Why not simply remove the new if statement, and include urandom in the NODEMGR_MEM_ARGS default that's initialized at line 299?", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1382#discussion_r363928670", "createdAt": "2020-01-07T20:08:04Z", "author": {"login": "tbarnes-us"}, "path": "operator/src/main/resources/scripts/startNodeManager.sh", "diffHunk": "@@ -299,6 +299,13 @@ if [ -z \"${NODEMGR_MEM_ARGS}\" ]; then\n   NODEMGR_MEM_ARGS=\"-Xms64m -Xmx100m\"\n fi\n \n+# If not already defined, set 'java.security.egd' option to /dev/urandom for\n+# Node Manager JVM for low entropy.  Speeds up boot process of Node Manager.\n+if [[ ! \"${NODEMGR_MEM_ARGS}\" =~ .*urandom* ]]\n+then\n+  NODEMGR_MEM_ARGS=\"${NODEMGR_MEM_ARGS} -Djava.security.egd=file:/dev/./urandom \"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mzg5NTEyMQ=="}, "originalCommit": {"oid": "25936f6fe5923604db0ce44684a870448ca67bb9"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzkzMTg5OA==", "bodyText": "I was thinking about the case where NODEMGR_MEM_ARGS is specified but doesn't define 'java.security.egd'.  Thus, we would boot Node Manager without any security random generator specified.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1382#discussion_r363931898", "createdAt": "2020-01-07T20:16:47Z", "author": {"login": "lennyphan"}, "path": "operator/src/main/resources/scripts/startNodeManager.sh", "diffHunk": "@@ -299,6 +299,13 @@ if [ -z \"${NODEMGR_MEM_ARGS}\" ]; then\n   NODEMGR_MEM_ARGS=\"-Xms64m -Xmx100m\"\n fi\n \n+# If not already defined, set 'java.security.egd' option to /dev/urandom for\n+# Node Manager JVM for low entropy.  Speeds up boot process of Node Manager.\n+if [[ ! \"${NODEMGR_MEM_ARGS}\" =~ .*urandom* ]]\n+then\n+  NODEMGR_MEM_ARGS=\"${NODEMGR_MEM_ARGS} -Djava.security.egd=file:/dev/./urandom \"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mzg5NTEyMQ=="}, "originalCommit": {"oid": "25936f6fe5923604db0ce44684a870448ca67bb9"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzkzNTMyOQ==", "bodyText": "I think we don't need worry about that as long as we clearly document that customizing NODEMGR_MEM_ARGS implicitly remove's the NM's (often helpful) urandom. It becomes the admin's responsibility to specifically set it when they customize NM mem args.  This is very similar to the approach that we're already taking for the WLS command line arguments - you can see we document this just a few lines above in the same documentation.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1382#discussion_r363935329", "createdAt": "2020-01-07T20:25:52Z", "author": {"login": "tbarnes-us"}, "path": "operator/src/main/resources/scripts/startNodeManager.sh", "diffHunk": "@@ -299,6 +299,13 @@ if [ -z \"${NODEMGR_MEM_ARGS}\" ]; then\n   NODEMGR_MEM_ARGS=\"-Xms64m -Xmx100m\"\n fi\n \n+# If not already defined, set 'java.security.egd' option to /dev/urandom for\n+# Node Manager JVM for low entropy.  Speeds up boot process of Node Manager.\n+if [[ ! \"${NODEMGR_MEM_ARGS}\" =~ .*urandom* ]]\n+then\n+  NODEMGR_MEM_ARGS=\"${NODEMGR_MEM_ARGS} -Djava.security.egd=file:/dev/./urandom \"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mzg5NTEyMQ=="}, "originalCommit": {"oid": "25936f6fe5923604db0ce44684a870448ca67bb9"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzkzNzc4OA==", "bodyText": "Sounds good.  Thanks for the valuable feedback.  Will finish the changes and document.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1382#discussion_r363937788", "createdAt": "2020-01-07T20:32:26Z", "author": {"login": "lennyphan"}, "path": "operator/src/main/resources/scripts/startNodeManager.sh", "diffHunk": "@@ -299,6 +299,13 @@ if [ -z \"${NODEMGR_MEM_ARGS}\" ]; then\n   NODEMGR_MEM_ARGS=\"-Xms64m -Xmx100m\"\n fi\n \n+# If not already defined, set 'java.security.egd' option to /dev/urandom for\n+# Node Manager JVM for low entropy.  Speeds up boot process of Node Manager.\n+if [[ ! \"${NODEMGR_MEM_ARGS}\" =~ .*urandom* ]]\n+then\n+  NODEMGR_MEM_ARGS=\"${NODEMGR_MEM_ARGS} -Djava.security.egd=file:/dev/./urandom \"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mzg5NTEyMQ=="}, "originalCommit": {"oid": "25936f6fe5923604db0ce44684a870448ca67bb9"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDMzNjY3Mw==", "bodyText": "The changes look good to me.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1382#discussion_r364336673", "createdAt": "2020-01-08T16:55:11Z", "author": {"login": "tbarnes-us"}, "path": "operator/src/main/resources/scripts/startNodeManager.sh", "diffHunk": "@@ -299,6 +299,13 @@ if [ -z \"${NODEMGR_MEM_ARGS}\" ]; then\n   NODEMGR_MEM_ARGS=\"-Xms64m -Xmx100m\"\n fi\n \n+# If not already defined, set 'java.security.egd' option to /dev/urandom for\n+# Node Manager JVM for low entropy.  Speeds up boot process of Node Manager.\n+if [[ ! \"${NODEMGR_MEM_ARGS}\" =~ .*urandom* ]]\n+then\n+  NODEMGR_MEM_ARGS=\"${NODEMGR_MEM_ARGS} -Djava.security.egd=file:/dev/./urandom \"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mzg5NTEyMQ=="}, "originalCommit": {"oid": "25936f6fe5923604db0ce44684a870448ca67bb9"}, "originalPosition": 8}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4787, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}