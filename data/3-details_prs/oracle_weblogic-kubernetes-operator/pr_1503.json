{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk0NDA5NTU1", "number": 1503, "title": "OWLS-80522 Domain status ordering, OWLS-80144 Ordered rolling upgrade", "bodyText": "List domain status by admin server first, then alpha-num across non-clustered servers, then grouped by cluster alpha-numerically, then alpha-num within cluster, ie, server1, server2, ..., server10, server11... etc.\nPerform rolling upgrade of servers alpha-numerically within same cluster when restartVersion value is updated.", "createdAt": "2020-03-26T20:38:41Z", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1503", "merged": true, "mergeCommit": {"oid": "bcad5af70b44a179cdc2ce3dceb45ad0a677ffb0"}, "closed": true, "closedAt": "2020-03-28T17:49:24Z", "author": {"login": "alai8"}, "timelineItems": {"totalCount": 21, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcQk7rLAH2gAyMzk0NDA5NTU1OmRjMGU2ZTQ4ZjlhY2I3YmI2MDI4ZDQ2ZjVkMWQ4NTBiOWQxMzc3MGE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcR8UbsgFqTM4MzI3NzQwNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "dc0e6e48f9acb7bb6028d46f5d1d850b9d13770a", "author": {"user": {"login": "alai8", "name": "Anthony Lai"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/dc0e6e48f9acb7bb6028d46f5d1d850b9d13770a", "committedDate": "2020-03-23T21:10:38Z", "message": "Domain.getServers() should return servers in order"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "88a210afad28040901c70588f22fcceaa1807d53", "author": {"user": {"login": "alai8", "name": "Anthony Lai"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/88a210afad28040901c70588f22fcceaa1807d53", "committedDate": "2020-03-24T17:47:12Z", "message": "Merge branch 'develop' of https://github.com/oracle/weblogic-kubernetes-operator into develop"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e9a5ce9d9332205da800fe4302c05119dad6cab3", "author": {"user": {"login": "alai8", "name": "Anthony Lai"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/e9a5ce9d9332205da800fe4302c05119dad6cab3", "committedDate": "2020-03-24T19:21:32Z", "message": "ordered rolling upgrade"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4a25519fa7d8b153d9a2a1270cdeeb304aca0096", "author": {"user": {"login": "alai8", "name": "Anthony Lai"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/4a25519fa7d8b153d9a2a1270cdeeb304aca0096", "committedDate": "2020-03-25T16:43:30Z", "message": "Merge branch 'develop' of https://github.com/oracle/weblogic-kubernetes-operator into develop"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1785163a5332c836762855def3bbbbc174b96120", "author": {"user": {"login": "alai8", "name": "Anthony Lai"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/1785163a5332c836762855def3bbbbc174b96120", "committedDate": "2020-03-25T16:44:27Z", "message": "Merge branch 'develop' into owls-80522"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "95492386d80c783014633644093a765d8f1225f7", "author": {"user": {"login": "alai8", "name": "Anthony Lai"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/95492386d80c783014633644093a765d8f1225f7", "committedDate": "2020-03-25T17:13:34Z", "message": "minor test fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ad202fff4209fe47802458584589fd49e9df6811", "author": {"user": {"login": "alai8", "name": "Anthony Lai"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/ad202fff4209fe47802458584589fd49e9df6811", "committedDate": "2020-03-25T23:24:39Z", "message": "new RollingHelperTest"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1d28da93bc40b6949e258dde5892adab395a7661", "author": {"user": {"login": "alai8", "name": "Anthony Lai"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/1d28da93bc40b6949e258dde5892adab395a7661", "committedDate": "2020-03-26T20:58:24Z", "message": "Merge branch 'develop' into owls-80522"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgyNDQ1MzE2", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1503#pullrequestreview-382445316", "createdAt": "2020-03-26T21:48:31Z", "commit": {"oid": "1d28da93bc40b6949e258dde5892adab395a7661"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQyMTo0ODozMlrOF8bvGw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQyMTo0ODozMlrOF8bvGw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODkxMzMwNw==", "bodyText": "How about something more generous than 6 - like 20?  The numbers we're padding come from the customer and there's not much need to be stingy here.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1503#discussion_r398913307", "createdAt": "2020-03-26T21:48:32Z", "author": {"login": "tbarnes-us"}, "path": "operator/src/main/java/oracle/kubernetes/utils/OperatorUtils.java", "diffHunk": "@@ -19,4 +19,62 @@ public static String joinListGrammatically(final List<String> list) {\n             .concat(list.get(list.size() - 1))\n         : list.get(0);\n   }\n+\n+  /**\n+   * Compare the 'numero lexi sorting name' as defined in {@link #getSortingString(String)} of the\n+   * given 2 Strings.\n+   *\n+   * @param str1 First string for comparison\n+   * @param str2 Second string for comparison\n+   * @return a negative integer, zero, or a positive integer as the sorting name of str1 * is less\n+   *     than, equal to, or greater than the sorting name of str2.\n+   */\n+  public static int compareSortingStrings(String str1, String str2) {\n+    if (str1 == null || str2 == null) {\n+      if (str2 != null) {\n+        return -1;\n+      } else if (str1 != null) {\n+        return 1;\n+      }\n+      return 0;\n+    }\n+    return getSortingString(str1).compareTo(getSortingString(str2));\n+  }\n+\n+  /**\n+   * The 'numero lexi sorting name' is a munged version of a\n+   * string that 'zero fills' its numeric portions. This can\n+   * be used to ensure \"member2foo\" sorts before \"member12foo\"\n+   * as these would munge to \"member000002foo\" and \"member000012foo\".\n+   *\n+   * <p>Handles up to 6 digits... - otherwise it doesn't zero fill...\n+   */\n+  public static String getSortingString(String orig) {\n+    String ret = \"\";\n+    String word = \"\";\n+    char lastCh = 0;\n+    for (char ch : orig.toCharArray()) {\n+      if (word.length() != 0\n+          && Character.isDigit(ch) ^ Character.isDigit(lastCh)) {\n+        ret += getSortingWord(word);\n+        word = \"\";\n+      }\n+      word += ch;\n+      lastCh = ch;\n+    }\n+    ret += getSortingWord(word);\n+    return ret;\n+  }\n+\n+  private static String getSortingWord(String word) {\n+    if (word.length() == 0) {\n+      return word;\n+    }\n+    if (Character.isDigit(word.charAt(0))) {\n+      for (int i = word.length(); i < 6; i++) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1d28da93bc40b6949e258dde5892adab395a7661"}, "originalPosition": 56}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgyNDQ2MzU5", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1503#pullrequestreview-382446359", "createdAt": "2020-03-26T21:50:25Z", "commit": {"oid": "1d28da93bc40b6949e258dde5892adab395a7661"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "020e9314aeb07f0b9bbf6ef3f048a835459a568c", "author": {"user": {"login": "alai8", "name": "Anthony Lai"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/020e9314aeb07f0b9bbf6ef3f048a835459a568c", "committedDate": "2020-03-26T22:54:49Z", "message": "update getSortingString to handle up to 20 digits"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7c3d239103641a07507ecf9516cd7f952838a84a", "author": {"user": {"login": "alai8", "name": "Anthony Lai"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/7c3d239103641a07507ecf9516cd7f952838a84a", "committedDate": "2020-03-26T22:55:40Z", "message": "rolling upgrade clusters sorted by cluster names"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0d9aec022924f69a39d88cf71ee328f7f970805d", "author": {"user": {"login": "alai8", "name": "Anthony Lai"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/0d9aec022924f69a39d88cf71ee328f7f970805d", "committedDate": "2020-03-27T00:11:43Z", "message": "add isAdminServer to ServerStatus"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgzMDE5MDM0", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1503#pullrequestreview-383019034", "createdAt": "2020-03-27T16:33:14Z", "commit": {"oid": "1d28da93bc40b6949e258dde5892adab395a7661"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgzMDQ0Nzkw", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1503#pullrequestreview-383044790", "createdAt": "2020-03-27T17:04:55Z", "commit": {"oid": "1d28da93bc40b6949e258dde5892adab395a7661"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3c6967c72841e7ad39bec12f29dae159428ead22", "author": {"user": {"login": "alai8", "name": "Anthony Lai"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/3c6967c72841e7ad39bec12f29dae159428ead22", "committedDate": "2020-03-27T21:51:10Z", "message": "ServerStatus isAdminServer excluded from json schema"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7c08e916f8503619facd267f9578e8082af7fce1", "author": {"user": {"login": "alai8", "name": "Anthony Lai"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/7c08e916f8503619facd267f9578e8082af7fce1", "committedDate": "2020-03-27T21:51:53Z", "message": "ClusterStatus sorted by sorting name"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ef880558f4b560646f50bbb0ccc76f5a569af486", "author": {"user": {"login": "alai8", "name": "Anthony Lai"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/ef880558f4b560646f50bbb0ccc76f5a569af486", "committedDate": "2020-03-27T21:52:55Z", "message": "getClusters returning sorted clusters"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d50be42259413e51b35dfe694e5dc929c99bd62d", "author": {"user": {"login": "alai8", "name": "Anthony Lai"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/d50be42259413e51b35dfe694e5dc929c99bd62d", "committedDate": "2020-03-27T22:39:39Z", "message": "add unit tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b7947b7658428f6cb836186230f192e1f9c8ea90", "author": {"user": {"login": "alai8", "name": "Anthony Lai"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/b7947b7658428f6cb836186230f192e1f9c8ea90", "committedDate": "2020-03-27T22:40:32Z", "message": "handle null map"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgzMjc3NDA0", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1503#pullrequestreview-383277404", "createdAt": "2020-03-28T02:59:25Z", "commit": {"oid": "b7947b7658428f6cb836186230f192e1f9c8ea90"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4916, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}