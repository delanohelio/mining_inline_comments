{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEyNjExMjIy", "number": 2017, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQyMzoyMzo1OFrOEzhHIw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QyMDoyMToxN1rOE095kA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIyNDU1MzMxOnYy", "diffSide": "RIGHT", "path": "integration-tests/src/test/java/oracle/weblogic/kubernetes/extensions/IntegrationTestWatcher.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQyMzoyMzo1OFrOHqyGTg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQyMzoyMzo1OFrOHqyGTg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDYyMzA1NA==", "bodyText": "Hi Maggie, Instead of modifying the framework methods you can use conditional check to skip a test. You can use the following annotation.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2017#discussion_r514623054", "createdAt": "2020-10-29T23:23:58Z", "author": {"login": "sankarpn"}, "path": "integration-tests/src/test/java/oracle/weblogic/kubernetes/extensions/IntegrationTestWatcher.java", "diffHunk": "@@ -211,8 +211,15 @@ public void interceptTestMethod(Invocation<Void> invocation,\n   @Override\n   public void handleTestExecutionException(ExtensionContext context, Throwable throwable)\n       throws Throwable {\n-    printHeader(String.format(\"Test failed %s()\", methodName), \"!\");\n-    getLogger().severe(getStackTraceAsString(throwable));\n+    getLogger().info(\"Test Execution Exception is: \" + throwable.getMessage());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4fc09d7dd0234c9e1c23980bd2c6f76d230700ff"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIyNDU1NTkxOnYy", "diffSide": "RIGHT", "path": "integration-tests/src/test/java/oracle/weblogic/kubernetes/ItIntrospectVersion.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQyMzoyNDo0N1rOHqyHoQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQxNDozNzozOFrOHrR53g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDYyMzM5Mw==", "bodyText": "`  class WebLogicImageCondition implements ExecutionCondition {\n@Override\npublic ConditionEvaluationResult evaluateExecutionCondition(ExtensionContext context) {\n  if (WEBLOGIC_IMAGE_TAG.equals(WLS_UPDATE_IMAGE_TAG)) {\n    return ConditionEvaluationResult.\n        disabled(String.format(\"No latest image availbale to continue test. Skipping test!\"));\n  } else {\n    return ConditionEvaluationResult.\n        enabled(String.format(\"Updating image to '%s'. Continuing test!\", WLS_UPDATE_IMAGE_TAG));\n  }\n}\n\n}\n@retention(RetentionPolicy.RUNTIME)\n@ExtendWith(WebLogicImageCondition.class)\n@interface AssumeWebLogicImage {\n}`", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2017#discussion_r514623393", "createdAt": "2020-10-29T23:24:47Z", "author": {"login": "sankarpn"}, "path": "integration-tests/src/test/java/oracle/weblogic/kubernetes/ItIntrospectVersion.java", "diffHunk": "@@ -848,12 +850,15 @@ public void testCreateNewCluster() {\n    * To: \"image: container-registry.oracle.com/middleware/weblogic:14.1.1.0-11\"\n    * Verify all the pods are restarted and back to ready state\n    * Verify the admin server is accessible and cluster members are healthy\n+   * This test will be aborted if the image tag is: 14.1.1.0-11\n    */\n   @Order(5)\n   @Test\n   @DisplayName(\"Verify server pods are restarted by updating image name\")\n   public void testUpdateImageName() {\n-\n+    logger.info(\"In the testUpdateImageName() the image version is: \" + WEBLOGIC_IMAGE_TAG);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4fc09d7dd0234c9e1c23980bd2c6f76d230700ff"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDYyMzcwMQ==", "bodyText": "Then you can annotate the test method with @AssumeWebLogicImage", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2017#discussion_r514623701", "createdAt": "2020-10-29T23:25:39Z", "author": {"login": "sankarpn"}, "path": "integration-tests/src/test/java/oracle/weblogic/kubernetes/ItIntrospectVersion.java", "diffHunk": "@@ -848,12 +850,15 @@ public void testCreateNewCluster() {\n    * To: \"image: container-registry.oracle.com/middleware/weblogic:14.1.1.0-11\"\n    * Verify all the pods are restarted and back to ready state\n    * Verify the admin server is accessible and cluster members are healthy\n+   * This test will be aborted if the image tag is: 14.1.1.0-11\n    */\n   @Order(5)\n   @Test\n   @DisplayName(\"Verify server pods are restarted by updating image name\")\n   public void testUpdateImageName() {\n-\n+    logger.info(\"In the testUpdateImageName() the image version is: \" + WEBLOGIC_IMAGE_TAG);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDYyMzM5Mw=="}, "originalCommit": {"oid": "4fc09d7dd0234c9e1c23980bd2c6f76d230700ff"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTE0NDE1OA==", "bodyText": "@sankarpn Thanks for your input. Working on it.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2017#discussion_r515144158", "createdAt": "2020-10-30T14:37:38Z", "author": {"login": "maggiehe00"}, "path": "integration-tests/src/test/java/oracle/weblogic/kubernetes/ItIntrospectVersion.java", "diffHunk": "@@ -848,12 +850,15 @@ public void testCreateNewCluster() {\n    * To: \"image: container-registry.oracle.com/middleware/weblogic:14.1.1.0-11\"\n    * Verify all the pods are restarted and back to ready state\n    * Verify the admin server is accessible and cluster members are healthy\n+   * This test will be aborted if the image tag is: 14.1.1.0-11\n    */\n   @Order(5)\n   @Test\n   @DisplayName(\"Verify server pods are restarted by updating image name\")\n   public void testUpdateImageName() {\n-\n+    logger.info(\"In the testUpdateImageName() the image version is: \" + WEBLOGIC_IMAGE_TAG);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDYyMzM5Mw=="}, "originalCommit": {"oid": "4fc09d7dd0234c9e1c23980bd2c6f76d230700ff"}, "originalPosition": 27}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIzNDM1MDQxOnYy", "diffSide": "RIGHT", "path": "integration-tests/src/test/java/oracle/weblogic/kubernetes/annotations/AssumeWebLogicImage.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQxNjoyNzowM1rOHsL1nw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQxNjoyNzowM1rOHsL1nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjA5MzM0Mw==", "bodyText": "Hi Maggie, Since this is the only test using this annotation you can put these 2 methods directly in the test class. There is no need to add extra classes IMO.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2017#discussion_r516093343", "createdAt": "2020-11-02T16:27:03Z", "author": {"login": "sankarpn"}, "path": "integration-tests/src/test/java/oracle/weblogic/kubernetes/annotations/AssumeWebLogicImage.java", "diffHunk": "@@ -0,0 +1,20 @@\n+// Copyright (c) 2020, Oracle Corporation and/or its affiliates.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "81fa97dd09c71576cbc9e4181fd1a1325a678f96"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIzOTc1NTY4OnYy", "diffSide": "RIGHT", "path": "integration-tests/src/test/java/oracle/weblogic/kubernetes/ItIntrospectVersion.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QyMDoyMToxN1rOHs_G_A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNFQxNjo0MzoyOFrOHtgmFA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjkzMzM3Mg==", "bodyText": "Do we need this annotation? There is no annotation called \"assume-weblogic-image\" right?", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2017#discussion_r516933372", "createdAt": "2020-11-03T20:21:17Z", "author": {"login": "sankarpn"}, "path": "integration-tests/src/test/java/oracle/weblogic/kubernetes/ItIntrospectVersion.java", "diffHunk": "@@ -1014,4 +1025,40 @@ public void tearDownAll() {\n     }\n   }\n \n+  /**\n+  *  JUnit5 extension class to implement ExecutionCondition for the custom\n+  *  annotation @AssumeWebLogicImage.\n+  */\n+  private static class WebLogicImageCondition implements ExecutionCondition {\n+\n+    /**\n+     * Determine if the the test \"testUpdateImageName\" will be skipped based on WebLogic image tag.\n+     * Skip the test if the image tag is the latest one.\n+     *\n+     * @param context the current extension context\n+     * @return ConditionEvaluationResult disabled if the image tag is the latest one, enabled if the\n+     *         image tag is not the latest one\n+    */\n+    @Override\n+    public ConditionEvaluationResult evaluateExecutionCondition(ExtensionContext context) {\n+      if (WEBLOGIC_IMAGE_TAG.equals(WLS_LATEST_IMAGE_TAG)) {\n+        getLogger().info(\"WebLogic image tag is {0}. No latest image available to continue test. Skipping test\",\n+            WLS_LATEST_IMAGE_TAG);\n+        return ConditionEvaluationResult\n+            .disabled(String.format(\"No latest image available to continue test. Skipping test!\"));\n+      } else {\n+        getLogger().info(\"Updating image to {0}. Continuing test!\", WLS_UPDATE_IMAGE_TAG);\n+        return ConditionEvaluationResult\n+            .enabled(String.format(\"Updating image to {0}. Continuing test!\", WLS_UPDATE_IMAGE_TAG));\n+      }\n+    }\n+  }\n+\n+  @Target({ElementType.TYPE, ElementType.METHOD})\n+  @Retention(RetentionPolicy.RUNTIME)\n+  @Tag(\"assume-weblogic-image\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e483d73460aa533f3a4a3987691828a9ddd409ab"}, "originalPosition": 155}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzQyNTU0MQ==", "bodyText": "Right now there is no use for \"assume-weblogic-image\". But  it won't hurt to add Tag name in case we need it later for different test plans/test cases, just like @tag(\"integration\") or @tag(\"must-not-run-in-parallel\")", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2017#discussion_r517425541", "createdAt": "2020-11-04T15:25:58Z", "author": {"login": "maggiehe00"}, "path": "integration-tests/src/test/java/oracle/weblogic/kubernetes/ItIntrospectVersion.java", "diffHunk": "@@ -1014,4 +1025,40 @@ public void tearDownAll() {\n     }\n   }\n \n+  /**\n+  *  JUnit5 extension class to implement ExecutionCondition for the custom\n+  *  annotation @AssumeWebLogicImage.\n+  */\n+  private static class WebLogicImageCondition implements ExecutionCondition {\n+\n+    /**\n+     * Determine if the the test \"testUpdateImageName\" will be skipped based on WebLogic image tag.\n+     * Skip the test if the image tag is the latest one.\n+     *\n+     * @param context the current extension context\n+     * @return ConditionEvaluationResult disabled if the image tag is the latest one, enabled if the\n+     *         image tag is not the latest one\n+    */\n+    @Override\n+    public ConditionEvaluationResult evaluateExecutionCondition(ExtensionContext context) {\n+      if (WEBLOGIC_IMAGE_TAG.equals(WLS_LATEST_IMAGE_TAG)) {\n+        getLogger().info(\"WebLogic image tag is {0}. No latest image available to continue test. Skipping test\",\n+            WLS_LATEST_IMAGE_TAG);\n+        return ConditionEvaluationResult\n+            .disabled(String.format(\"No latest image available to continue test. Skipping test!\"));\n+      } else {\n+        getLogger().info(\"Updating image to {0}. Continuing test!\", WLS_UPDATE_IMAGE_TAG);\n+        return ConditionEvaluationResult\n+            .enabled(String.format(\"Updating image to {0}. Continuing test!\", WLS_UPDATE_IMAGE_TAG));\n+      }\n+    }\n+  }\n+\n+  @Target({ElementType.TYPE, ElementType.METHOD})\n+  @Retention(RetentionPolicy.RUNTIME)\n+  @Tag(\"assume-weblogic-image\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjkzMzM3Mg=="}, "originalCommit": {"oid": "e483d73460aa533f3a4a3987691828a9ddd409ab"}, "originalPosition": 155}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzQ4MjAwNA==", "bodyText": "ok alright.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2017#discussion_r517482004", "createdAt": "2020-11-04T16:43:28Z", "author": {"login": "sankarpn"}, "path": "integration-tests/src/test/java/oracle/weblogic/kubernetes/ItIntrospectVersion.java", "diffHunk": "@@ -1014,4 +1025,40 @@ public void tearDownAll() {\n     }\n   }\n \n+  /**\n+  *  JUnit5 extension class to implement ExecutionCondition for the custom\n+  *  annotation @AssumeWebLogicImage.\n+  */\n+  private static class WebLogicImageCondition implements ExecutionCondition {\n+\n+    /**\n+     * Determine if the the test \"testUpdateImageName\" will be skipped based on WebLogic image tag.\n+     * Skip the test if the image tag is the latest one.\n+     *\n+     * @param context the current extension context\n+     * @return ConditionEvaluationResult disabled if the image tag is the latest one, enabled if the\n+     *         image tag is not the latest one\n+    */\n+    @Override\n+    public ConditionEvaluationResult evaluateExecutionCondition(ExtensionContext context) {\n+      if (WEBLOGIC_IMAGE_TAG.equals(WLS_LATEST_IMAGE_TAG)) {\n+        getLogger().info(\"WebLogic image tag is {0}. No latest image available to continue test. Skipping test\",\n+            WLS_LATEST_IMAGE_TAG);\n+        return ConditionEvaluationResult\n+            .disabled(String.format(\"No latest image available to continue test. Skipping test!\"));\n+      } else {\n+        getLogger().info(\"Updating image to {0}. Continuing test!\", WLS_UPDATE_IMAGE_TAG);\n+        return ConditionEvaluationResult\n+            .enabled(String.format(\"Updating image to {0}. Continuing test!\", WLS_UPDATE_IMAGE_TAG));\n+      }\n+    }\n+  }\n+\n+  @Target({ElementType.TYPE, ElementType.METHOD})\n+  @Retention(RetentionPolicy.RUNTIME)\n+  @Tag(\"assume-weblogic-image\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjkzMzM3Mg=="}, "originalCommit": {"oid": "e483d73460aa533f3a4a3987691828a9ddd409ab"}, "originalPosition": 155}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3876, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}