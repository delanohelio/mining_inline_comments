{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA4NjI2MzA0", "number": 1592, "reviewThreads": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxNTo0ODo1OVrOD11vqA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMVQxNzozNDoyMlrOD4boyw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU3NzgxNjcyOnYy", "diffSide": "RIGHT", "path": "operator/src/main/resources/scripts/modelInImage.sh", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxNTo0ODo1OVrOGLeBwQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQyMTo0NzowMFrOGLqZaQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDY3OTQ4OQ==", "bodyText": "extension -> extensions", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1592#discussion_r414679489", "createdAt": "2020-04-24T15:48:59Z", "author": {"login": "tbarnes-us"}, "path": "operator/src/main/resources/scripts/modelInImage.sh", "diffHunk": "@@ -384,6 +387,55 @@ function checkDirNotExistsOrEmpty() {\n   trace \"Exiting checkDirNotExistsOrEmpty\"\n }\n \n+# limit the file extensions in the model directories\n+\n+function checkModelDirectoryExtensions() {\n+  trace \"Entering checkModelDirectoryExtensions\"\n+\n+  cd ${IMG_MODELS_HOME}\n+  counter=$(ls  -I  *.yaml -I *.zip -I *.properties | wc -l)\n+  if [ $counter -ne 0 ] ; then\n+        trace SEVERE \"Directory ${IMG_MODELS_HOME} contains files with unsupported extension. Extension must be\" \\", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f22b9b852d6cbbe5a08c7e2041a9bd71253e4091"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDY4MDk1Mw==", "bodyText": "Extension must be -> Expected extensions", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1592#discussion_r414680953", "createdAt": "2020-04-24T15:51:09Z", "author": {"login": "tbarnes-us"}, "path": "operator/src/main/resources/scripts/modelInImage.sh", "diffHunk": "@@ -384,6 +387,55 @@ function checkDirNotExistsOrEmpty() {\n   trace \"Exiting checkDirNotExistsOrEmpty\"\n }\n \n+# limit the file extensions in the model directories\n+\n+function checkModelDirectoryExtensions() {\n+  trace \"Entering checkModelDirectoryExtensions\"\n+\n+  cd ${IMG_MODELS_HOME}\n+  counter=$(ls  -I  *.yaml -I *.zip -I *.properties | wc -l)\n+  if [ $counter -ne 0 ] ; then\n+        trace SEVERE \"Directory ${IMG_MODELS_HOME} contains files with unsupported extension. Extension must be\" \\", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDY3OTQ4OQ=="}, "originalCommit": {"oid": "f22b9b852d6cbbe5a08c7e2041a9bd71253e4091"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDg4MjE1Mw==", "bodyText": "done", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1592#discussion_r414882153", "createdAt": "2020-04-24T21:47:00Z", "author": {"login": "jshum2479"}, "path": "operator/src/main/resources/scripts/modelInImage.sh", "diffHunk": "@@ -384,6 +387,55 @@ function checkDirNotExistsOrEmpty() {\n   trace \"Exiting checkDirNotExistsOrEmpty\"\n }\n \n+# limit the file extensions in the model directories\n+\n+function checkModelDirectoryExtensions() {\n+  trace \"Entering checkModelDirectoryExtensions\"\n+\n+  cd ${IMG_MODELS_HOME}\n+  counter=$(ls  -I  *.yaml -I *.zip -I *.properties | wc -l)\n+  if [ $counter -ne 0 ] ; then\n+        trace SEVERE \"Directory ${IMG_MODELS_HOME} contains files with unsupported extension. Extension must be\" \\", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDY3OTQ4OQ=="}, "originalCommit": {"oid": "f22b9b852d6cbbe5a08c7e2041a9bd71253e4091"}, "originalPosition": 31}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU3NzgyOTMyOnYy", "diffSide": "RIGHT", "path": "operator/src/main/resources/scripts/modelInImage.sh", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxNTo1MTo0NVrOGLeJOQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQyMTo0NzoxM1rOGLqZrg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDY4MTQwMQ==", "bodyText": "How about:\n\"Model files with unsupported extensions: '$(ls -I  *.yaml -I *.zip -I *.properties)'\"", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1592#discussion_r414681401", "createdAt": "2020-04-24T15:51:45Z", "author": {"login": "tbarnes-us"}, "path": "operator/src/main/resources/scripts/modelInImage.sh", "diffHunk": "@@ -384,6 +387,55 @@ function checkDirNotExistsOrEmpty() {\n   trace \"Exiting checkDirNotExistsOrEmpty\"\n }\n \n+# limit the file extensions in the model directories\n+\n+function checkModelDirectoryExtensions() {\n+  trace \"Entering checkModelDirectoryExtensions\"\n+\n+  cd ${IMG_MODELS_HOME}\n+  counter=$(ls  -I  *.yaml -I *.zip -I *.properties | wc -l)\n+  if [ $counter -ne 0 ] ; then\n+        trace SEVERE \"Directory ${IMG_MODELS_HOME} contains files with unsupported extension. Extension must be\" \\\n+          \".yaml, .properties, or .zip\"\n+        trace SEVERE $(ls -I  *.yaml -I *.zip -I *.properties)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f22b9b852d6cbbe5a08c7e2041a9bd71253e4091"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDg4MjIyMg==", "bodyText": "done", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1592#discussion_r414882222", "createdAt": "2020-04-24T21:47:13Z", "author": {"login": "jshum2479"}, "path": "operator/src/main/resources/scripts/modelInImage.sh", "diffHunk": "@@ -384,6 +387,55 @@ function checkDirNotExistsOrEmpty() {\n   trace \"Exiting checkDirNotExistsOrEmpty\"\n }\n \n+# limit the file extensions in the model directories\n+\n+function checkModelDirectoryExtensions() {\n+  trace \"Entering checkModelDirectoryExtensions\"\n+\n+  cd ${IMG_MODELS_HOME}\n+  counter=$(ls  -I  *.yaml -I *.zip -I *.properties | wc -l)\n+  if [ $counter -ne 0 ] ; then\n+        trace SEVERE \"Directory ${IMG_MODELS_HOME} contains files with unsupported extension. Extension must be\" \\\n+          \".yaml, .properties, or .zip\"\n+        trace SEVERE $(ls -I  *.yaml -I *.zip -I *.properties)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDY4MTQwMQ=="}, "originalCommit": {"oid": "f22b9b852d6cbbe5a08c7e2041a9bd71253e4091"}, "originalPosition": 33}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU3NzgzNDQ1OnYy", "diffSide": "RIGHT", "path": "operator/src/main/resources/scripts/modelInImage.sh", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxNTo1Mjo1MVrOGLeMXg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQyMTo0NzoyNVrOGLqZ_g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDY4MjIwNg==", "bodyText": "extension -> extensions\nExtension must be -> Expected extensions", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1592#discussion_r414682206", "createdAt": "2020-04-24T15:52:51Z", "author": {"login": "tbarnes-us"}, "path": "operator/src/main/resources/scripts/modelInImage.sh", "diffHunk": "@@ -384,6 +387,55 @@ function checkDirNotExistsOrEmpty() {\n   trace \"Exiting checkDirNotExistsOrEmpty\"\n }\n \n+# limit the file extensions in the model directories\n+\n+function checkModelDirectoryExtensions() {\n+  trace \"Entering checkModelDirectoryExtensions\"\n+\n+  cd ${IMG_MODELS_HOME}\n+  counter=$(ls  -I  *.yaml -I *.zip -I *.properties | wc -l)\n+  if [ $counter -ne 0 ] ; then\n+        trace SEVERE \"Directory ${IMG_MODELS_HOME} contains files with unsupported extension. Extension must be\" \\\n+          \".yaml, .properties, or .zip\"\n+        trace SEVERE $(ls -I  *.yaml -I *.zip -I *.properties)\n+        exitOrLoop\n+  fi\n+  if [ -d ${WDT_CONFIGMAP_ROOT} ] ; then\n+    cd ${WDT_CONFIGMAP_ROOT}\n+    counter=$(ls  -I  *.yaml -I *.properties | wc -l)\n+    if [ $counter -ne 0 ] ; then\n+          trace SEVERE \"Directory ${WDT_CONFIGMAP_ROOT} contains files with unsupported extension. Extension must be\" \\", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f22b9b852d6cbbe5a08c7e2041a9bd71253e4091"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDY4NzYzMQ==", "bodyText": "Directory > Model configmap directory", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1592#discussion_r414687631", "createdAt": "2020-04-24T16:00:36Z", "author": {"login": "tbarnes-us"}, "path": "operator/src/main/resources/scripts/modelInImage.sh", "diffHunk": "@@ -384,6 +387,55 @@ function checkDirNotExistsOrEmpty() {\n   trace \"Exiting checkDirNotExistsOrEmpty\"\n }\n \n+# limit the file extensions in the model directories\n+\n+function checkModelDirectoryExtensions() {\n+  trace \"Entering checkModelDirectoryExtensions\"\n+\n+  cd ${IMG_MODELS_HOME}\n+  counter=$(ls  -I  *.yaml -I *.zip -I *.properties | wc -l)\n+  if [ $counter -ne 0 ] ; then\n+        trace SEVERE \"Directory ${IMG_MODELS_HOME} contains files with unsupported extension. Extension must be\" \\\n+          \".yaml, .properties, or .zip\"\n+        trace SEVERE $(ls -I  *.yaml -I *.zip -I *.properties)\n+        exitOrLoop\n+  fi\n+  if [ -d ${WDT_CONFIGMAP_ROOT} ] ; then\n+    cd ${WDT_CONFIGMAP_ROOT}\n+    counter=$(ls  -I  *.yaml -I *.properties | wc -l)\n+    if [ $counter -ne 0 ] ; then\n+          trace SEVERE \"Directory ${WDT_CONFIGMAP_ROOT} contains files with unsupported extension. Extension must be\" \\", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDY4MjIwNg=="}, "originalCommit": {"oid": "f22b9b852d6cbbe5a08c7e2041a9bd71253e4091"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDg4MjMwMg==", "bodyText": "done", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1592#discussion_r414882302", "createdAt": "2020-04-24T21:47:25Z", "author": {"login": "jshum2479"}, "path": "operator/src/main/resources/scripts/modelInImage.sh", "diffHunk": "@@ -384,6 +387,55 @@ function checkDirNotExistsOrEmpty() {\n   trace \"Exiting checkDirNotExistsOrEmpty\"\n }\n \n+# limit the file extensions in the model directories\n+\n+function checkModelDirectoryExtensions() {\n+  trace \"Entering checkModelDirectoryExtensions\"\n+\n+  cd ${IMG_MODELS_HOME}\n+  counter=$(ls  -I  *.yaml -I *.zip -I *.properties | wc -l)\n+  if [ $counter -ne 0 ] ; then\n+        trace SEVERE \"Directory ${IMG_MODELS_HOME} contains files with unsupported extension. Extension must be\" \\\n+          \".yaml, .properties, or .zip\"\n+        trace SEVERE $(ls -I  *.yaml -I *.zip -I *.properties)\n+        exitOrLoop\n+  fi\n+  if [ -d ${WDT_CONFIGMAP_ROOT} ] ; then\n+    cd ${WDT_CONFIGMAP_ROOT}\n+    counter=$(ls  -I  *.yaml -I *.properties | wc -l)\n+    if [ $counter -ne 0 ] ; then\n+          trace SEVERE \"Directory ${WDT_CONFIGMAP_ROOT} contains files with unsupported extension. Extension must be\" \\", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDY4MjIwNg=="}, "originalCommit": {"oid": "f22b9b852d6cbbe5a08c7e2041a9bd71253e4091"}, "originalPosition": 40}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU3Nzg1NDk0OnYy", "diffSide": "RIGHT", "path": "operator/src/main/resources/scripts/modelInImage.sh", "isResolved": true, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxNTo1NzoyNlrOGLeY2Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMVQxODoyNjoyMFrOGPRw1Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDY4NTQwMQ==", "bodyText": "Just in case the version format changes, or there's some other bug, please provide an environment variable to bypass the check, and also print an informative message if the bypass is in effect.\nAnd add to each trace above.  \". To bypass this check, set environment variable 'WDT_BYPASS_WDT_VERSION_CHECK' to 'true'.\"", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1592#discussion_r414685401", "createdAt": "2020-04-24T15:57:26Z", "author": {"login": "tbarnes-us"}, "path": "operator/src/main/resources/scripts/modelInImage.sh", "diffHunk": "@@ -384,6 +387,55 @@ function checkDirNotExistsOrEmpty() {\n   trace \"Exiting checkDirNotExistsOrEmpty\"\n }\n \n+# limit the file extensions in the model directories\n+\n+function checkModelDirectoryExtensions() {\n+  trace \"Entering checkModelDirectoryExtensions\"\n+\n+  cd ${IMG_MODELS_HOME}\n+  counter=$(ls  -I  *.yaml -I *.zip -I *.properties | wc -l)\n+  if [ $counter -ne 0 ] ; then\n+        trace SEVERE \"Directory ${IMG_MODELS_HOME} contains files with unsupported extension. Extension must be\" \\\n+          \".yaml, .properties, or .zip\"\n+        trace SEVERE $(ls -I  *.yaml -I *.zip -I *.properties)\n+        exitOrLoop\n+  fi\n+  if [ -d ${WDT_CONFIGMAP_ROOT} ] ; then\n+    cd ${WDT_CONFIGMAP_ROOT}\n+    counter=$(ls  -I  *.yaml -I *.properties | wc -l)\n+    if [ $counter -ne 0 ] ; then\n+          trace SEVERE \"Directory ${WDT_CONFIGMAP_ROOT} contains files with unsupported extension. Extension must be\" \\\n+            \".yaml or .properties\"\n+          trace SEVERE $(ls -I  *.yaml -I *.properties)\n+          exitOrLoop\n+    fi\n+  fi\n+\n+  trace \"Exiting checkModelDirectoryExtensions\"\n+}\n+\n+# Check for WDT version\n+\n+function checkWDTVersion() {\n+  trace \"Entering checkWDTVersion\"\n+  unzip -c ${WDT_ROOT}/lib/weblogic-deploy-core.jar META-INF/MANIFEST.MF > /tmp/wdtversion.txt || exitOrLoop\n+  local wdt_version=\"$(grep \"Implementation-Version\" /tmp/wdtversion.txt | cut -f2 -d' ' | tr -d '\\r' )\" || exitOrLoop\n+  if  [ ! -z ${wdt_version} ]; then\n+    versionGE ${wdt_version} ${WDT_MINIMUM_VERSION}\n+    if [ $? != \"0\" ] ; then\n+      trace SEVERE \"Model in Image domain requires Weblogic Deploy Tool minimum version ${WDT_MINIMUM_VERSION}. \" \\\n+      \"The version in the image is ${wdt_version}, you need to update the Weblogic Deploy Tool version in the image.\"\n+      exitOrLoop\n+    fi\n+  else\n+    trace SEVERE \"Unknown Weblogic Deploy Tool version. Model in Image domain requires Weblogic Deploy Tool \" \\\n+      \"minimum version ${WDT_MINIMUM_VERSION}\"\n+    exitOrLoop\n+  fi", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f22b9b852d6cbbe5a08c7e2041a9bd71253e4091"}, "originalPosition": 67}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDg4MjM1NA==", "bodyText": "done", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1592#discussion_r414882354", "createdAt": "2020-04-24T21:47:35Z", "author": {"login": "jshum2479"}, "path": "operator/src/main/resources/scripts/modelInImage.sh", "diffHunk": "@@ -384,6 +387,55 @@ function checkDirNotExistsOrEmpty() {\n   trace \"Exiting checkDirNotExistsOrEmpty\"\n }\n \n+# limit the file extensions in the model directories\n+\n+function checkModelDirectoryExtensions() {\n+  trace \"Entering checkModelDirectoryExtensions\"\n+\n+  cd ${IMG_MODELS_HOME}\n+  counter=$(ls  -I  *.yaml -I *.zip -I *.properties | wc -l)\n+  if [ $counter -ne 0 ] ; then\n+        trace SEVERE \"Directory ${IMG_MODELS_HOME} contains files with unsupported extension. Extension must be\" \\\n+          \".yaml, .properties, or .zip\"\n+        trace SEVERE $(ls -I  *.yaml -I *.zip -I *.properties)\n+        exitOrLoop\n+  fi\n+  if [ -d ${WDT_CONFIGMAP_ROOT} ] ; then\n+    cd ${WDT_CONFIGMAP_ROOT}\n+    counter=$(ls  -I  *.yaml -I *.properties | wc -l)\n+    if [ $counter -ne 0 ] ; then\n+          trace SEVERE \"Directory ${WDT_CONFIGMAP_ROOT} contains files with unsupported extension. Extension must be\" \\\n+            \".yaml or .properties\"\n+          trace SEVERE $(ls -I  *.yaml -I *.properties)\n+          exitOrLoop\n+    fi\n+  fi\n+\n+  trace \"Exiting checkModelDirectoryExtensions\"\n+}\n+\n+# Check for WDT version\n+\n+function checkWDTVersion() {\n+  trace \"Entering checkWDTVersion\"\n+  unzip -c ${WDT_ROOT}/lib/weblogic-deploy-core.jar META-INF/MANIFEST.MF > /tmp/wdtversion.txt || exitOrLoop\n+  local wdt_version=\"$(grep \"Implementation-Version\" /tmp/wdtversion.txt | cut -f2 -d' ' | tr -d '\\r' )\" || exitOrLoop\n+  if  [ ! -z ${wdt_version} ]; then\n+    versionGE ${wdt_version} ${WDT_MINIMUM_VERSION}\n+    if [ $? != \"0\" ] ; then\n+      trace SEVERE \"Model in Image domain requires Weblogic Deploy Tool minimum version ${WDT_MINIMUM_VERSION}. \" \\\n+      \"The version in the image is ${wdt_version}, you need to update the Weblogic Deploy Tool version in the image.\"\n+      exitOrLoop\n+    fi\n+  else\n+    trace SEVERE \"Unknown Weblogic Deploy Tool version. Model in Image domain requires Weblogic Deploy Tool \" \\\n+      \"minimum version ${WDT_MINIMUM_VERSION}\"\n+    exitOrLoop\n+  fi", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDY4NTQwMQ=="}, "originalCommit": {"oid": "f22b9b852d6cbbe5a08c7e2041a9bd71253e4091"}, "originalPosition": 67}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODY0OTg2MA==", "bodyText": "I don't see the text I requested in the SEVERE.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1592#discussion_r418649860", "createdAt": "2020-05-01T17:36:19Z", "author": {"login": "tbarnes-us"}, "path": "operator/src/main/resources/scripts/modelInImage.sh", "diffHunk": "@@ -384,6 +387,55 @@ function checkDirNotExistsOrEmpty() {\n   trace \"Exiting checkDirNotExistsOrEmpty\"\n }\n \n+# limit the file extensions in the model directories\n+\n+function checkModelDirectoryExtensions() {\n+  trace \"Entering checkModelDirectoryExtensions\"\n+\n+  cd ${IMG_MODELS_HOME}\n+  counter=$(ls  -I  *.yaml -I *.zip -I *.properties | wc -l)\n+  if [ $counter -ne 0 ] ; then\n+        trace SEVERE \"Directory ${IMG_MODELS_HOME} contains files with unsupported extension. Extension must be\" \\\n+          \".yaml, .properties, or .zip\"\n+        trace SEVERE $(ls -I  *.yaml -I *.zip -I *.properties)\n+        exitOrLoop\n+  fi\n+  if [ -d ${WDT_CONFIGMAP_ROOT} ] ; then\n+    cd ${WDT_CONFIGMAP_ROOT}\n+    counter=$(ls  -I  *.yaml -I *.properties | wc -l)\n+    if [ $counter -ne 0 ] ; then\n+          trace SEVERE \"Directory ${WDT_CONFIGMAP_ROOT} contains files with unsupported extension. Extension must be\" \\\n+            \".yaml or .properties\"\n+          trace SEVERE $(ls -I  *.yaml -I *.properties)\n+          exitOrLoop\n+    fi\n+  fi\n+\n+  trace \"Exiting checkModelDirectoryExtensions\"\n+}\n+\n+# Check for WDT version\n+\n+function checkWDTVersion() {\n+  trace \"Entering checkWDTVersion\"\n+  unzip -c ${WDT_ROOT}/lib/weblogic-deploy-core.jar META-INF/MANIFEST.MF > /tmp/wdtversion.txt || exitOrLoop\n+  local wdt_version=\"$(grep \"Implementation-Version\" /tmp/wdtversion.txt | cut -f2 -d' ' | tr -d '\\r' )\" || exitOrLoop\n+  if  [ ! -z ${wdt_version} ]; then\n+    versionGE ${wdt_version} ${WDT_MINIMUM_VERSION}\n+    if [ $? != \"0\" ] ; then\n+      trace SEVERE \"Model in Image domain requires Weblogic Deploy Tool minimum version ${WDT_MINIMUM_VERSION}. \" \\\n+      \"The version in the image is ${wdt_version}, you need to update the Weblogic Deploy Tool version in the image.\"\n+      exitOrLoop\n+    fi\n+  else\n+    trace SEVERE \"Unknown Weblogic Deploy Tool version. Model in Image domain requires Weblogic Deploy Tool \" \\\n+      \"minimum version ${WDT_MINIMUM_VERSION}\"\n+    exitOrLoop\n+  fi", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDY4NTQwMQ=="}, "originalCommit": {"oid": "f22b9b852d6cbbe5a08c7e2041a9bd71253e4091"}, "originalPosition": 67}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODY2OTE0Mw==", "bodyText": "done", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1592#discussion_r418669143", "createdAt": "2020-05-01T18:18:12Z", "author": {"login": "jshum2479"}, "path": "operator/src/main/resources/scripts/modelInImage.sh", "diffHunk": "@@ -384,6 +387,55 @@ function checkDirNotExistsOrEmpty() {\n   trace \"Exiting checkDirNotExistsOrEmpty\"\n }\n \n+# limit the file extensions in the model directories\n+\n+function checkModelDirectoryExtensions() {\n+  trace \"Entering checkModelDirectoryExtensions\"\n+\n+  cd ${IMG_MODELS_HOME}\n+  counter=$(ls  -I  *.yaml -I *.zip -I *.properties | wc -l)\n+  if [ $counter -ne 0 ] ; then\n+        trace SEVERE \"Directory ${IMG_MODELS_HOME} contains files with unsupported extension. Extension must be\" \\\n+          \".yaml, .properties, or .zip\"\n+        trace SEVERE $(ls -I  *.yaml -I *.zip -I *.properties)\n+        exitOrLoop\n+  fi\n+  if [ -d ${WDT_CONFIGMAP_ROOT} ] ; then\n+    cd ${WDT_CONFIGMAP_ROOT}\n+    counter=$(ls  -I  *.yaml -I *.properties | wc -l)\n+    if [ $counter -ne 0 ] ; then\n+          trace SEVERE \"Directory ${WDT_CONFIGMAP_ROOT} contains files with unsupported extension. Extension must be\" \\\n+            \".yaml or .properties\"\n+          trace SEVERE $(ls -I  *.yaml -I *.properties)\n+          exitOrLoop\n+    fi\n+  fi\n+\n+  trace \"Exiting checkModelDirectoryExtensions\"\n+}\n+\n+# Check for WDT version\n+\n+function checkWDTVersion() {\n+  trace \"Entering checkWDTVersion\"\n+  unzip -c ${WDT_ROOT}/lib/weblogic-deploy-core.jar META-INF/MANIFEST.MF > /tmp/wdtversion.txt || exitOrLoop\n+  local wdt_version=\"$(grep \"Implementation-Version\" /tmp/wdtversion.txt | cut -f2 -d' ' | tr -d '\\r' )\" || exitOrLoop\n+  if  [ ! -z ${wdt_version} ]; then\n+    versionGE ${wdt_version} ${WDT_MINIMUM_VERSION}\n+    if [ $? != \"0\" ] ; then\n+      trace SEVERE \"Model in Image domain requires Weblogic Deploy Tool minimum version ${WDT_MINIMUM_VERSION}. \" \\\n+      \"The version in the image is ${wdt_version}, you need to update the Weblogic Deploy Tool version in the image.\"\n+      exitOrLoop\n+    fi\n+  else\n+    trace SEVERE \"Unknown Weblogic Deploy Tool version. Model in Image domain requires Weblogic Deploy Tool \" \\\n+      \"minimum version ${WDT_MINIMUM_VERSION}\"\n+    exitOrLoop\n+  fi", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDY4NTQwMQ=="}, "originalCommit": {"oid": "f22b9b852d6cbbe5a08c7e2041a9bd71253e4091"}, "originalPosition": 67}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODY3Mjg1Mw==", "bodyText": "thanks", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1592#discussion_r418672853", "createdAt": "2020-05-01T18:26:20Z", "author": {"login": "tbarnes-us"}, "path": "operator/src/main/resources/scripts/modelInImage.sh", "diffHunk": "@@ -384,6 +387,55 @@ function checkDirNotExistsOrEmpty() {\n   trace \"Exiting checkDirNotExistsOrEmpty\"\n }\n \n+# limit the file extensions in the model directories\n+\n+function checkModelDirectoryExtensions() {\n+  trace \"Entering checkModelDirectoryExtensions\"\n+\n+  cd ${IMG_MODELS_HOME}\n+  counter=$(ls  -I  *.yaml -I *.zip -I *.properties | wc -l)\n+  if [ $counter -ne 0 ] ; then\n+        trace SEVERE \"Directory ${IMG_MODELS_HOME} contains files with unsupported extension. Extension must be\" \\\n+          \".yaml, .properties, or .zip\"\n+        trace SEVERE $(ls -I  *.yaml -I *.zip -I *.properties)\n+        exitOrLoop\n+  fi\n+  if [ -d ${WDT_CONFIGMAP_ROOT} ] ; then\n+    cd ${WDT_CONFIGMAP_ROOT}\n+    counter=$(ls  -I  *.yaml -I *.properties | wc -l)\n+    if [ $counter -ne 0 ] ; then\n+          trace SEVERE \"Directory ${WDT_CONFIGMAP_ROOT} contains files with unsupported extension. Extension must be\" \\\n+            \".yaml or .properties\"\n+          trace SEVERE $(ls -I  *.yaml -I *.properties)\n+          exitOrLoop\n+    fi\n+  fi\n+\n+  trace \"Exiting checkModelDirectoryExtensions\"\n+}\n+\n+# Check for WDT version\n+\n+function checkWDTVersion() {\n+  trace \"Entering checkWDTVersion\"\n+  unzip -c ${WDT_ROOT}/lib/weblogic-deploy-core.jar META-INF/MANIFEST.MF > /tmp/wdtversion.txt || exitOrLoop\n+  local wdt_version=\"$(grep \"Implementation-Version\" /tmp/wdtversion.txt | cut -f2 -d' ' | tr -d '\\r' )\" || exitOrLoop\n+  if  [ ! -z ${wdt_version} ]; then\n+    versionGE ${wdt_version} ${WDT_MINIMUM_VERSION}\n+    if [ $? != \"0\" ] ; then\n+      trace SEVERE \"Model in Image domain requires Weblogic Deploy Tool minimum version ${WDT_MINIMUM_VERSION}. \" \\\n+      \"The version in the image is ${wdt_version}, you need to update the Weblogic Deploy Tool version in the image.\"\n+      exitOrLoop\n+    fi\n+  else\n+    trace SEVERE \"Unknown Weblogic Deploy Tool version. Model in Image domain requires Weblogic Deploy Tool \" \\\n+      \"minimum version ${WDT_MINIMUM_VERSION}\"\n+    exitOrLoop\n+  fi", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDY4NTQwMQ=="}, "originalCommit": {"oid": "f22b9b852d6cbbe5a08c7e2041a9bd71253e4091"}, "originalPosition": 67}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU3Nzg3MjczOnYy", "diffSide": "RIGHT", "path": "operator/src/main/resources/scripts/modelInImage.sh", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxNjowMToxNlrOGLejlg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQyMTo0Nzo0N1rOGLqamA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDY4ODE1MA==", "bodyText": "How about:\ntrace SEVERE \"Model configmap directory files with unsupported extensions: '$(ls -I  *.yaml -I *.properties)'.\"", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1592#discussion_r414688150", "createdAt": "2020-04-24T16:01:16Z", "author": {"login": "tbarnes-us"}, "path": "operator/src/main/resources/scripts/modelInImage.sh", "diffHunk": "@@ -384,6 +387,55 @@ function checkDirNotExistsOrEmpty() {\n   trace \"Exiting checkDirNotExistsOrEmpty\"\n }\n \n+# limit the file extensions in the model directories\n+\n+function checkModelDirectoryExtensions() {\n+  trace \"Entering checkModelDirectoryExtensions\"\n+\n+  cd ${IMG_MODELS_HOME}\n+  counter=$(ls  -I  *.yaml -I *.zip -I *.properties | wc -l)\n+  if [ $counter -ne 0 ] ; then\n+        trace SEVERE \"Directory ${IMG_MODELS_HOME} contains files with unsupported extension. Extension must be\" \\\n+          \".yaml, .properties, or .zip\"\n+        trace SEVERE $(ls -I  *.yaml -I *.zip -I *.properties)\n+        exitOrLoop\n+  fi\n+  if [ -d ${WDT_CONFIGMAP_ROOT} ] ; then\n+    cd ${WDT_CONFIGMAP_ROOT}\n+    counter=$(ls  -I  *.yaml -I *.properties | wc -l)\n+    if [ $counter -ne 0 ] ; then\n+          trace SEVERE \"Directory ${WDT_CONFIGMAP_ROOT} contains files with unsupported extension. Extension must be\" \\\n+            \".yaml or .properties\"\n+          trace SEVERE $(ls -I  *.yaml -I *.properties)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f22b9b852d6cbbe5a08c7e2041a9bd71253e4091"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDg4MjQ1Ng==", "bodyText": "done", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1592#discussion_r414882456", "createdAt": "2020-04-24T21:47:47Z", "author": {"login": "jshum2479"}, "path": "operator/src/main/resources/scripts/modelInImage.sh", "diffHunk": "@@ -384,6 +387,55 @@ function checkDirNotExistsOrEmpty() {\n   trace \"Exiting checkDirNotExistsOrEmpty\"\n }\n \n+# limit the file extensions in the model directories\n+\n+function checkModelDirectoryExtensions() {\n+  trace \"Entering checkModelDirectoryExtensions\"\n+\n+  cd ${IMG_MODELS_HOME}\n+  counter=$(ls  -I  *.yaml -I *.zip -I *.properties | wc -l)\n+  if [ $counter -ne 0 ] ; then\n+        trace SEVERE \"Directory ${IMG_MODELS_HOME} contains files with unsupported extension. Extension must be\" \\\n+          \".yaml, .properties, or .zip\"\n+        trace SEVERE $(ls -I  *.yaml -I *.zip -I *.properties)\n+        exitOrLoop\n+  fi\n+  if [ -d ${WDT_CONFIGMAP_ROOT} ] ; then\n+    cd ${WDT_CONFIGMAP_ROOT}\n+    counter=$(ls  -I  *.yaml -I *.properties | wc -l)\n+    if [ $counter -ne 0 ] ; then\n+          trace SEVERE \"Directory ${WDT_CONFIGMAP_ROOT} contains files with unsupported extension. Extension must be\" \\\n+            \".yaml or .properties\"\n+          trace SEVERE $(ls -I  *.yaml -I *.properties)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDY4ODE1MA=="}, "originalCommit": {"oid": "f22b9b852d6cbbe5a08c7e2041a9bd71253e4091"}, "originalPosition": 42}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU3ODczNjU2OnYy", "diffSide": "RIGHT", "path": "operator/src/main/resources/scripts/modelInImage.sh", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxOTo0MToyMVrOGLmibQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQyMTo0ODo0MFrOGLqcAg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDgxODkyNQ==", "bodyText": "spelling", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1592#discussion_r414818925", "createdAt": "2020-04-24T19:41:21Z", "author": {"login": "markxnelson"}, "path": "operator/src/main/resources/scripts/modelInImage.sh", "diffHunk": "@@ -384,6 +389,57 @@ function checkDirNotExistsOrEmpty() {\n   trace \"Exiting checkDirNotExistsOrEmpty\"\n }\n \n+# limit the file extensions in the model directories\n+\n+function checkModelDirectoryExtensions() {\n+  trace \"Entering checkModelDirectoryExtensions\"\n+\n+  cd ${IMG_MODELS_HOME}\n+  counter=$(ls  -I  \"*.yaml\" -I \"*.zip\" -I \"*.properties\" | wc -l)\n+  if [ $counter -ne 0 ] ; then\n+    trace SEVERE \"Model image directory ${IMG_MODELS_HOME} contains files with unsupported extensions. \" \\\n+      \"Expected extensions: .yaml, .properties, or .zip\"\n+    trace SEVERE \"Model image directory files with unsupported extensions: \" \\\n+      \"'$(ls -I \"*.yaml\" -I \"*.zip\" -I \"*.properties\")'\"\n+    exitOrLoop\n+  fi\n+  if [ -d ${WDT_CONFIGMAP_ROOT} ] ; then\n+    cd ${WDT_CONFIGMAP_ROOT}\n+    counter=$(ls  -I  \"*.yaml\" -I \"*.properties\" | wc -l)\n+    if [ $counter -ne 0 ] ; then\n+      trace SEVERE \"Model configmap directory ${WDT_CONFIGMAP_ROOT} contains files with unsupported extensions. \" \\\n+      \"Expected extensions: .yaml or .properties\"\n+      trace SEVERE \"Model configmap directory files with unsupported extensions: \" \\\n+        \"'$(ls -I \"*.yaml\" -I \"*.properties\")'\"\n+      exitOrLoop\n+    fi\n+  fi\n+\n+  trace \"Exiting checkModelDirectoryExtensions\"\n+}\n+\n+# Check for WDT version\n+\n+function checkWDTVersion() {\n+  trace \"Entering checkWDTVersion\"\n+  unzip -c ${WDT_ROOT}/lib/weblogic-deploy-core.jar META-INF/MANIFEST.MF > /tmp/wdtversion.txt || exitOrLoop\n+  local wdt_version=\"$(grep \"Implementation-Version\" /tmp/wdtversion.txt | cut -f2 -d' ' | tr -d '\\r' )\" || exitOrLoop\n+  if  [ ! -z ${wdt_version} ]; then\n+    versionGE ${wdt_version} ${WDT_MINIMUM_VERSION}\n+    if [ $? != \"0\" ] ; then\n+      trace SEVERE \"Model in Image domain requires Weblogic Deploy Tool minimum version ${WDT_MINIMUM_VERSION}. \" \\\n+      \"The version in the image is ${wdt_version}, you need to update the Weblogic Deploy Tool version in the image.\"\n+      exitOrLoop\n+    fi\n+  else\n+    trace SEVERE \"Unknown Weblogic Deploy Tool version. Model in Image domain requires Weblogic Deploy Tool \" \\", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1f9f944b67d4772ce698e578b19c304fc0615ab6"}, "originalPosition": 68}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDg4MjgxOA==", "bodyText": "rephrased the sentence", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1592#discussion_r414882818", "createdAt": "2020-04-24T21:48:40Z", "author": {"login": "jshum2479"}, "path": "operator/src/main/resources/scripts/modelInImage.sh", "diffHunk": "@@ -384,6 +389,57 @@ function checkDirNotExistsOrEmpty() {\n   trace \"Exiting checkDirNotExistsOrEmpty\"\n }\n \n+# limit the file extensions in the model directories\n+\n+function checkModelDirectoryExtensions() {\n+  trace \"Entering checkModelDirectoryExtensions\"\n+\n+  cd ${IMG_MODELS_HOME}\n+  counter=$(ls  -I  \"*.yaml\" -I \"*.zip\" -I \"*.properties\" | wc -l)\n+  if [ $counter -ne 0 ] ; then\n+    trace SEVERE \"Model image directory ${IMG_MODELS_HOME} contains files with unsupported extensions. \" \\\n+      \"Expected extensions: .yaml, .properties, or .zip\"\n+    trace SEVERE \"Model image directory files with unsupported extensions: \" \\\n+      \"'$(ls -I \"*.yaml\" -I \"*.zip\" -I \"*.properties\")'\"\n+    exitOrLoop\n+  fi\n+  if [ -d ${WDT_CONFIGMAP_ROOT} ] ; then\n+    cd ${WDT_CONFIGMAP_ROOT}\n+    counter=$(ls  -I  \"*.yaml\" -I \"*.properties\" | wc -l)\n+    if [ $counter -ne 0 ] ; then\n+      trace SEVERE \"Model configmap directory ${WDT_CONFIGMAP_ROOT} contains files with unsupported extensions. \" \\\n+      \"Expected extensions: .yaml or .properties\"\n+      trace SEVERE \"Model configmap directory files with unsupported extensions: \" \\\n+        \"'$(ls -I \"*.yaml\" -I \"*.properties\")'\"\n+      exitOrLoop\n+    fi\n+  fi\n+\n+  trace \"Exiting checkModelDirectoryExtensions\"\n+}\n+\n+# Check for WDT version\n+\n+function checkWDTVersion() {\n+  trace \"Entering checkWDTVersion\"\n+  unzip -c ${WDT_ROOT}/lib/weblogic-deploy-core.jar META-INF/MANIFEST.MF > /tmp/wdtversion.txt || exitOrLoop\n+  local wdt_version=\"$(grep \"Implementation-Version\" /tmp/wdtversion.txt | cut -f2 -d' ' | tr -d '\\r' )\" || exitOrLoop\n+  if  [ ! -z ${wdt_version} ]; then\n+    versionGE ${wdt_version} ${WDT_MINIMUM_VERSION}\n+    if [ $? != \"0\" ] ; then\n+      trace SEVERE \"Model in Image domain requires Weblogic Deploy Tool minimum version ${WDT_MINIMUM_VERSION}. \" \\\n+      \"The version in the image is ${wdt_version}, you need to update the Weblogic Deploy Tool version in the image.\"\n+      exitOrLoop\n+    fi\n+  else\n+    trace SEVERE \"Unknown Weblogic Deploy Tool version. Model in Image domain requires Weblogic Deploy Tool \" \\", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDgxODkyNQ=="}, "originalCommit": {"oid": "1f9f944b67d4772ce698e578b19c304fc0615ab6"}, "originalPosition": 68}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU3ODczNjk1OnYy", "diffSide": "RIGHT", "path": "operator/src/main/resources/scripts/modelInImage.sh", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxOTo0MToyN1rOGLmipg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQyMTo0ODo0OVrOGLqcVw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDgxODk4Mg==", "bodyText": "spelling", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1592#discussion_r414818982", "createdAt": "2020-04-24T19:41:27Z", "author": {"login": "markxnelson"}, "path": "operator/src/main/resources/scripts/modelInImage.sh", "diffHunk": "@@ -384,6 +389,57 @@ function checkDirNotExistsOrEmpty() {\n   trace \"Exiting checkDirNotExistsOrEmpty\"\n }\n \n+# limit the file extensions in the model directories\n+\n+function checkModelDirectoryExtensions() {\n+  trace \"Entering checkModelDirectoryExtensions\"\n+\n+  cd ${IMG_MODELS_HOME}\n+  counter=$(ls  -I  \"*.yaml\" -I \"*.zip\" -I \"*.properties\" | wc -l)\n+  if [ $counter -ne 0 ] ; then\n+    trace SEVERE \"Model image directory ${IMG_MODELS_HOME} contains files with unsupported extensions. \" \\\n+      \"Expected extensions: .yaml, .properties, or .zip\"\n+    trace SEVERE \"Model image directory files with unsupported extensions: \" \\\n+      \"'$(ls -I \"*.yaml\" -I \"*.zip\" -I \"*.properties\")'\"\n+    exitOrLoop\n+  fi\n+  if [ -d ${WDT_CONFIGMAP_ROOT} ] ; then\n+    cd ${WDT_CONFIGMAP_ROOT}\n+    counter=$(ls  -I  \"*.yaml\" -I \"*.properties\" | wc -l)\n+    if [ $counter -ne 0 ] ; then\n+      trace SEVERE \"Model configmap directory ${WDT_CONFIGMAP_ROOT} contains files with unsupported extensions. \" \\\n+      \"Expected extensions: .yaml or .properties\"\n+      trace SEVERE \"Model configmap directory files with unsupported extensions: \" \\\n+        \"'$(ls -I \"*.yaml\" -I \"*.properties\")'\"\n+      exitOrLoop\n+    fi\n+  fi\n+\n+  trace \"Exiting checkModelDirectoryExtensions\"\n+}\n+\n+# Check for WDT version\n+\n+function checkWDTVersion() {\n+  trace \"Entering checkWDTVersion\"\n+  unzip -c ${WDT_ROOT}/lib/weblogic-deploy-core.jar META-INF/MANIFEST.MF > /tmp/wdtversion.txt || exitOrLoop\n+  local wdt_version=\"$(grep \"Implementation-Version\" /tmp/wdtversion.txt | cut -f2 -d' ' | tr -d '\\r' )\" || exitOrLoop\n+  if  [ ! -z ${wdt_version} ]; then\n+    versionGE ${wdt_version} ${WDT_MINIMUM_VERSION}\n+    if [ $? != \"0\" ] ; then\n+      trace SEVERE \"Model in Image domain requires Weblogic Deploy Tool minimum version ${WDT_MINIMUM_VERSION}. \" \\\n+      \"The version in the image is ${wdt_version}, you need to update the Weblogic Deploy Tool version in the image.\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1f9f944b67d4772ce698e578b19c304fc0615ab6"}, "originalPosition": 64}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDg4MjkwMw==", "bodyText": "rephrased the sentence", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1592#discussion_r414882903", "createdAt": "2020-04-24T21:48:49Z", "author": {"login": "jshum2479"}, "path": "operator/src/main/resources/scripts/modelInImage.sh", "diffHunk": "@@ -384,6 +389,57 @@ function checkDirNotExistsOrEmpty() {\n   trace \"Exiting checkDirNotExistsOrEmpty\"\n }\n \n+# limit the file extensions in the model directories\n+\n+function checkModelDirectoryExtensions() {\n+  trace \"Entering checkModelDirectoryExtensions\"\n+\n+  cd ${IMG_MODELS_HOME}\n+  counter=$(ls  -I  \"*.yaml\" -I \"*.zip\" -I \"*.properties\" | wc -l)\n+  if [ $counter -ne 0 ] ; then\n+    trace SEVERE \"Model image directory ${IMG_MODELS_HOME} contains files with unsupported extensions. \" \\\n+      \"Expected extensions: .yaml, .properties, or .zip\"\n+    trace SEVERE \"Model image directory files with unsupported extensions: \" \\\n+      \"'$(ls -I \"*.yaml\" -I \"*.zip\" -I \"*.properties\")'\"\n+    exitOrLoop\n+  fi\n+  if [ -d ${WDT_CONFIGMAP_ROOT} ] ; then\n+    cd ${WDT_CONFIGMAP_ROOT}\n+    counter=$(ls  -I  \"*.yaml\" -I \"*.properties\" | wc -l)\n+    if [ $counter -ne 0 ] ; then\n+      trace SEVERE \"Model configmap directory ${WDT_CONFIGMAP_ROOT} contains files with unsupported extensions. \" \\\n+      \"Expected extensions: .yaml or .properties\"\n+      trace SEVERE \"Model configmap directory files with unsupported extensions: \" \\\n+        \"'$(ls -I \"*.yaml\" -I \"*.properties\")'\"\n+      exitOrLoop\n+    fi\n+  fi\n+\n+  trace \"Exiting checkModelDirectoryExtensions\"\n+}\n+\n+# Check for WDT version\n+\n+function checkWDTVersion() {\n+  trace \"Entering checkWDTVersion\"\n+  unzip -c ${WDT_ROOT}/lib/weblogic-deploy-core.jar META-INF/MANIFEST.MF > /tmp/wdtversion.txt || exitOrLoop\n+  local wdt_version=\"$(grep \"Implementation-Version\" /tmp/wdtversion.txt | cut -f2 -d' ' | tr -d '\\r' )\" || exitOrLoop\n+  if  [ ! -z ${wdt_version} ]; then\n+    versionGE ${wdt_version} ${WDT_MINIMUM_VERSION}\n+    if [ $? != \"0\" ] ; then\n+      trace SEVERE \"Model in Image domain requires Weblogic Deploy Tool minimum version ${WDT_MINIMUM_VERSION}. \" \\\n+      \"The version in the image is ${wdt_version}, you need to update the Weblogic Deploy Tool version in the image.\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDgxODk4Mg=="}, "originalCommit": {"oid": "1f9f944b67d4772ce698e578b19c304fc0615ab6"}, "originalPosition": 64}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU3ODczNzI0OnYy", "diffSide": "RIGHT", "path": "operator/src/main/resources/scripts/modelInImage.sh", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxOTo0MTozMlrOGLmi2Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQyMTo1MDoxN1rOGLqemQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDgxOTAzMw==", "bodyText": "spelling", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1592#discussion_r414819033", "createdAt": "2020-04-24T19:41:32Z", "author": {"login": "markxnelson"}, "path": "operator/src/main/resources/scripts/modelInImage.sh", "diffHunk": "@@ -384,6 +389,57 @@ function checkDirNotExistsOrEmpty() {\n   trace \"Exiting checkDirNotExistsOrEmpty\"\n }\n \n+# limit the file extensions in the model directories\n+\n+function checkModelDirectoryExtensions() {\n+  trace \"Entering checkModelDirectoryExtensions\"\n+\n+  cd ${IMG_MODELS_HOME}\n+  counter=$(ls  -I  \"*.yaml\" -I \"*.zip\" -I \"*.properties\" | wc -l)\n+  if [ $counter -ne 0 ] ; then\n+    trace SEVERE \"Model image directory ${IMG_MODELS_HOME} contains files with unsupported extensions. \" \\\n+      \"Expected extensions: .yaml, .properties, or .zip\"\n+    trace SEVERE \"Model image directory files with unsupported extensions: \" \\\n+      \"'$(ls -I \"*.yaml\" -I \"*.zip\" -I \"*.properties\")'\"\n+    exitOrLoop\n+  fi\n+  if [ -d ${WDT_CONFIGMAP_ROOT} ] ; then\n+    cd ${WDT_CONFIGMAP_ROOT}\n+    counter=$(ls  -I  \"*.yaml\" -I \"*.properties\" | wc -l)\n+    if [ $counter -ne 0 ] ; then\n+      trace SEVERE \"Model configmap directory ${WDT_CONFIGMAP_ROOT} contains files with unsupported extensions. \" \\\n+      \"Expected extensions: .yaml or .properties\"\n+      trace SEVERE \"Model configmap directory files with unsupported extensions: \" \\\n+        \"'$(ls -I \"*.yaml\" -I \"*.properties\")'\"\n+      exitOrLoop\n+    fi\n+  fi\n+\n+  trace \"Exiting checkModelDirectoryExtensions\"\n+}\n+\n+# Check for WDT version\n+\n+function checkWDTVersion() {\n+  trace \"Entering checkWDTVersion\"\n+  unzip -c ${WDT_ROOT}/lib/weblogic-deploy-core.jar META-INF/MANIFEST.MF > /tmp/wdtversion.txt || exitOrLoop\n+  local wdt_version=\"$(grep \"Implementation-Version\" /tmp/wdtversion.txt | cut -f2 -d' ' | tr -d '\\r' )\" || exitOrLoop\n+  if  [ ! -z ${wdt_version} ]; then\n+    versionGE ${wdt_version} ${WDT_MINIMUM_VERSION}\n+    if [ $? != \"0\" ] ; then\n+      trace SEVERE \"Model in Image domain requires Weblogic Deploy Tool minimum version ${WDT_MINIMUM_VERSION}. \" \\", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1f9f944b67d4772ce698e578b19c304fc0615ab6"}, "originalPosition": 63}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDg4MzQ4MQ==", "bodyText": "rephrased the sentence", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1592#discussion_r414883481", "createdAt": "2020-04-24T21:50:17Z", "author": {"login": "jshum2479"}, "path": "operator/src/main/resources/scripts/modelInImage.sh", "diffHunk": "@@ -384,6 +389,57 @@ function checkDirNotExistsOrEmpty() {\n   trace \"Exiting checkDirNotExistsOrEmpty\"\n }\n \n+# limit the file extensions in the model directories\n+\n+function checkModelDirectoryExtensions() {\n+  trace \"Entering checkModelDirectoryExtensions\"\n+\n+  cd ${IMG_MODELS_HOME}\n+  counter=$(ls  -I  \"*.yaml\" -I \"*.zip\" -I \"*.properties\" | wc -l)\n+  if [ $counter -ne 0 ] ; then\n+    trace SEVERE \"Model image directory ${IMG_MODELS_HOME} contains files with unsupported extensions. \" \\\n+      \"Expected extensions: .yaml, .properties, or .zip\"\n+    trace SEVERE \"Model image directory files with unsupported extensions: \" \\\n+      \"'$(ls -I \"*.yaml\" -I \"*.zip\" -I \"*.properties\")'\"\n+    exitOrLoop\n+  fi\n+  if [ -d ${WDT_CONFIGMAP_ROOT} ] ; then\n+    cd ${WDT_CONFIGMAP_ROOT}\n+    counter=$(ls  -I  \"*.yaml\" -I \"*.properties\" | wc -l)\n+    if [ $counter -ne 0 ] ; then\n+      trace SEVERE \"Model configmap directory ${WDT_CONFIGMAP_ROOT} contains files with unsupported extensions. \" \\\n+      \"Expected extensions: .yaml or .properties\"\n+      trace SEVERE \"Model configmap directory files with unsupported extensions: \" \\\n+        \"'$(ls -I \"*.yaml\" -I \"*.properties\")'\"\n+      exitOrLoop\n+    fi\n+  fi\n+\n+  trace \"Exiting checkModelDirectoryExtensions\"\n+}\n+\n+# Check for WDT version\n+\n+function checkWDTVersion() {\n+  trace \"Entering checkWDTVersion\"\n+  unzip -c ${WDT_ROOT}/lib/weblogic-deploy-core.jar META-INF/MANIFEST.MF > /tmp/wdtversion.txt || exitOrLoop\n+  local wdt_version=\"$(grep \"Implementation-Version\" /tmp/wdtversion.txt | cut -f2 -d' ' | tr -d '\\r' )\" || exitOrLoop\n+  if  [ ! -z ${wdt_version} ]; then\n+    versionGE ${wdt_version} ${WDT_MINIMUM_VERSION}\n+    if [ $? != \"0\" ] ; then\n+      trace SEVERE \"Model in Image domain requires Weblogic Deploy Tool minimum version ${WDT_MINIMUM_VERSION}. \" \\", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDgxOTAzMw=="}, "originalCommit": {"oid": "1f9f944b67d4772ce698e578b19c304fc0615ab6"}, "originalPosition": 63}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYwNDk5NjU5OnYy", "diffSide": "RIGHT", "path": "operator/src/main/resources/scripts/modelInImage.sh", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMVQxNzozNDoyMlrOGPQThA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMVQxODoyNDo0OVrOGPRt4w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODY0ODk2NA==", "bodyText": "Would it be OK to secretly allow a '.zip'?  A 'small' app could fit in the cm.  Or do we specifically want to disallow this?", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1592#discussion_r418648964", "createdAt": "2020-05-01T17:34:22Z", "author": {"login": "tbarnes-us"}, "path": "operator/src/main/resources/scripts/modelInImage.sh", "diffHunk": "@@ -384,6 +389,61 @@ function checkDirNotExistsOrEmpty() {\n   trace \"Exiting checkDirNotExistsOrEmpty\"\n }\n \n+# limit the file extensions in the model directories\n+\n+function checkModelDirectoryExtensions() {\n+  trace \"Entering checkModelDirectoryExtensions\"\n+\n+  cd ${IMG_MODELS_HOME}\n+  counter=$(ls  -I  \"*.yaml\" -I \"*.zip\" -I \"*.properties\" | wc -l)\n+  if [ $counter -ne 0 ] ; then\n+    trace SEVERE \"Model image directory ${IMG_MODELS_HOME} contains files with unsupported extensions. \" \\\n+      \"Expected extensions: .yaml, .properties, or .zip\"\n+    trace SEVERE \"Model image directory files with unsupported extensions: \" \\\n+      \"'$(ls -I \"*.yaml\" -I \"*.zip\" -I \"*.properties\")'\"\n+    exitOrLoop\n+  fi\n+  if [ -d ${WDT_CONFIGMAP_ROOT} ] ; then\n+    cd ${WDT_CONFIGMAP_ROOT}\n+    counter=$(ls  -I  \"*.yaml\" -I \"*.properties\" | wc -l)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2cf1ddafbbbde284b3606a573e528213ad8c5254"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODY2MTUyOA==", "bodyText": "Lets's disallow for now, There are quite a few places to change and it's hard to tell user to try it and if it doesn't fit do it other way.  This PR is for checking extension and WDT version, not dealing with features.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1592#discussion_r418661528", "createdAt": "2020-05-01T18:00:46Z", "author": {"login": "jshum2479"}, "path": "operator/src/main/resources/scripts/modelInImage.sh", "diffHunk": "@@ -384,6 +389,61 @@ function checkDirNotExistsOrEmpty() {\n   trace \"Exiting checkDirNotExistsOrEmpty\"\n }\n \n+# limit the file extensions in the model directories\n+\n+function checkModelDirectoryExtensions() {\n+  trace \"Entering checkModelDirectoryExtensions\"\n+\n+  cd ${IMG_MODELS_HOME}\n+  counter=$(ls  -I  \"*.yaml\" -I \"*.zip\" -I \"*.properties\" | wc -l)\n+  if [ $counter -ne 0 ] ; then\n+    trace SEVERE \"Model image directory ${IMG_MODELS_HOME} contains files with unsupported extensions. \" \\\n+      \"Expected extensions: .yaml, .properties, or .zip\"\n+    trace SEVERE \"Model image directory files with unsupported extensions: \" \\\n+      \"'$(ls -I \"*.yaml\" -I \"*.zip\" -I \"*.properties\")'\"\n+    exitOrLoop\n+  fi\n+  if [ -d ${WDT_CONFIGMAP_ROOT} ] ; then\n+    cd ${WDT_CONFIGMAP_ROOT}\n+    counter=$(ls  -I  \"*.yaml\" -I \"*.properties\" | wc -l)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODY0ODk2NA=="}, "originalCommit": {"oid": "2cf1ddafbbbde284b3606a573e528213ad8c5254"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODY3MjA5OQ==", "bodyText": "Sure. Thanks for considering it. Resolving.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1592#discussion_r418672099", "createdAt": "2020-05-01T18:24:49Z", "author": {"login": "tbarnes-us"}, "path": "operator/src/main/resources/scripts/modelInImage.sh", "diffHunk": "@@ -384,6 +389,61 @@ function checkDirNotExistsOrEmpty() {\n   trace \"Exiting checkDirNotExistsOrEmpty\"\n }\n \n+# limit the file extensions in the model directories\n+\n+function checkModelDirectoryExtensions() {\n+  trace \"Entering checkModelDirectoryExtensions\"\n+\n+  cd ${IMG_MODELS_HOME}\n+  counter=$(ls  -I  \"*.yaml\" -I \"*.zip\" -I \"*.properties\" | wc -l)\n+  if [ $counter -ne 0 ] ; then\n+    trace SEVERE \"Model image directory ${IMG_MODELS_HOME} contains files with unsupported extensions. \" \\\n+      \"Expected extensions: .yaml, .properties, or .zip\"\n+    trace SEVERE \"Model image directory files with unsupported extensions: \" \\\n+      \"'$(ls -I \"*.yaml\" -I \"*.zip\" -I \"*.properties\")'\"\n+    exitOrLoop\n+  fi\n+  if [ -d ${WDT_CONFIGMAP_ROOT} ] ; then\n+    cd ${WDT_CONFIGMAP_ROOT}\n+    counter=$(ls  -I  \"*.yaml\" -I \"*.properties\" | wc -l)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODY0ODk2NA=="}, "originalCommit": {"oid": "2cf1ddafbbbde284b3606a573e528213ad8c5254"}, "originalPosition": 41}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4471, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}