{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDgyMTEzMzQ3", "number": 1906, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQyMToxODoxMVrOEh3MGg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQyMToyMToyNlrOEh3QFw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAzOTQyNjgyOnYy", "diffSide": "RIGHT", "path": "src/integration-tests/model-in-image/mii-sample-wrapper/build-model-image.sh", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQyMToxODoxMVrOHPaqoA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQyMToxOToxMlrOHPasYw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTkyNzU4NA==", "bodyText": "I assume this needs to be conditional on the domain type?\nSo at line 75, add lines\nif [ \"$WDT_DOMAIN_TYPE\" = \"WLS\" ]; then\n  CHOWN_ROOT=\"--chown:root\"\nfi\n\nand modify line 113 so it looks like:\ndryrun:  ${CHOWN_ROOT:+${CHOWN_ROOT}}\n\nThe \":+\" syntax says 'do nothing if CHOWN_ROOT before the :+ is undefined, otherwise substitute the contents after :+.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1906#discussion_r485927584", "createdAt": "2020-09-09T21:18:11Z", "author": {"login": "tbarnes-us"}, "path": "src/integration-tests/model-in-image/mii-sample-wrapper/build-model-image.sh", "diffHunk": "@@ -109,17 +109,71 @@ dryrun:  ${MODEL_YAML_FILES:+--wdtModel ${MODEL_YAML_FILES}} \\\\\n dryrun:  ${MODEL_VARIABLE_FILES:+--wdtVariables ${MODEL_VARIABLE_FILES}} \\\\\n dryrun:  ${MODEL_ARCHIVE_FILES:+--wdtArchive ${MODEL_ARCHIVE_FILES}} \\\\\n dryrun:  --wdtModelOnly \\\\\n-dryrun:  --wdtDomainType ${WDT_DOMAIN_TYPE}\n+dryrun:  --wdtDomainType ${WDT_DOMAIN_TYPE} \\\\\n+dryrun:  --chown oracle:root", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3521dc3a8f7c80e887272bda5b17404a6d957880"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTkyODAzNQ==", "bodyText": "(This is much less code than cutting and pasting the entire dryrun)", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1906#discussion_r485928035", "createdAt": "2020-09-09T21:19:12Z", "author": {"login": "tbarnes-us"}, "path": "src/integration-tests/model-in-image/mii-sample-wrapper/build-model-image.sh", "diffHunk": "@@ -109,17 +109,71 @@ dryrun:  ${MODEL_YAML_FILES:+--wdtModel ${MODEL_YAML_FILES}} \\\\\n dryrun:  ${MODEL_VARIABLE_FILES:+--wdtVariables ${MODEL_VARIABLE_FILES}} \\\\\n dryrun:  ${MODEL_ARCHIVE_FILES:+--wdtArchive ${MODEL_ARCHIVE_FILES}} \\\\\n dryrun:  --wdtModelOnly \\\\\n-dryrun:  --wdtDomainType ${WDT_DOMAIN_TYPE}\n+dryrun:  --wdtDomainType ${WDT_DOMAIN_TYPE} \\\\\n+dryrun:  --chown oracle:root", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTkyNzU4NA=="}, "originalCommit": {"oid": "3521dc3a8f7c80e887272bda5b17404a6d957880"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAzOTQzNzAzOnYy", "diffSide": "RIGHT", "path": "src/integration-tests/model-in-image/mii-sample-wrapper/build-model-image.sh", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQyMToyMToyNlrOHPawaw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQyMTozMjowMVrOHPbC5Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTkyOTA2Nw==", "bodyText": "There's a more compact way to do this than have have two versions of dryrun - see earlier comment.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1906#discussion_r485929067", "createdAt": "2020-09-09T21:21:26Z", "author": {"login": "tbarnes-us"}, "path": "src/integration-tests/model-in-image/mii-sample-wrapper/build-model-image.sh", "diffHunk": "@@ -146,7 +200,12 @@ else\n \n   tmpfil=\"$WORKDIR/$(basename $0).$CURPID.$PPID.$SECONDS.$RANDOM.sh\"\n \n-  output_dryrun | grep \"^dryrun:\" | sed 's/^dryrun://' > $tmpfil\n+  if [ \"${WDT_DOMAIN_TYPE}\" = \"JRF\" ]; then\n+    output_dryrun_JRF | grep \"^dryrun:\" | sed 's/^dryrun://' > $tmpfil\n+  else\n+    output_dryrun | grep \"^dryrun:\" | sed 's/^dryrun://' > $tmpfil\n+  fi\n+#  output_dryrun | grep \"^dryrun:\" | sed 's/^dryrun://' > $tmpfil", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ac4808cf91540a1130f2a9fadd98d2f54778ce1d"}, "originalPosition": 85}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTkzMzc5Nw==", "bodyText": "I agree. Thanks. Making the change now.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1906#discussion_r485933797", "createdAt": "2020-09-09T21:32:01Z", "author": {"login": "bhavaniravichandran"}, "path": "src/integration-tests/model-in-image/mii-sample-wrapper/build-model-image.sh", "diffHunk": "@@ -146,7 +200,12 @@ else\n \n   tmpfil=\"$WORKDIR/$(basename $0).$CURPID.$PPID.$SECONDS.$RANDOM.sh\"\n \n-  output_dryrun | grep \"^dryrun:\" | sed 's/^dryrun://' > $tmpfil\n+  if [ \"${WDT_DOMAIN_TYPE}\" = \"JRF\" ]; then\n+    output_dryrun_JRF | grep \"^dryrun:\" | sed 's/^dryrun://' > $tmpfil\n+  else\n+    output_dryrun | grep \"^dryrun:\" | sed 's/^dryrun://' > $tmpfil\n+  fi\n+#  output_dryrun | grep \"^dryrun:\" | sed 's/^dryrun://' > $tmpfil", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTkyOTA2Nw=="}, "originalCommit": {"oid": "ac4808cf91540a1130f2a9fadd98d2f54778ce1d"}, "originalPosition": 85}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3941, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}