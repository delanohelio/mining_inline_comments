{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk1MDAzMjQy", "number": 1512, "title": "Install wit actions interface", "bodyText": "Add actions for installer and WebLogicImageTool operations. The review goal is to make sure that style and interface is okay. The full impl will be added once the interface/style is in agreement.", "createdAt": "2020-03-27T23:02:53Z", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1512", "merged": true, "mergeCommit": {"oid": "a2d417f46f60b83068c4238090164ee0ea61a403"}, "closed": true, "closedAt": "2020-03-30T17:59:03Z", "author": {"login": "doxiao"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcR4wZ8gH2gAyMzk1MDAzMjQyOjY1YWIzYzg4MGM2MmEyZmFkOGNkZjMxNTkwNmUwZGMxZjI1MDExNzc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcSyU0rgH2gAyMzk1MDAzMjQyOmFmMTg0ODFkOGQxOWQ2YWJhMDEwN2Y1NmNkNzQ5ZmY1Y2Y1MzlhNWI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "65ab3c880c62a2fad8cdf315906e0dc1f2501177", "author": {"user": {"login": "doxiao", "name": "Dongbo Xiao"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/65ab3c880c62a2fad8cdf315906e0dc1f2501177", "committedDate": "2020-03-27T22:50:21Z", "message": "Add actions for download and WIT\n\nSigned-off-by: doxiao <dongbo.xiao@oracle.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "366b647339557c3a9bbe35448ac6899e85964f8a", "author": {"user": {"login": "doxiao", "name": "Dongbo Xiao"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/366b647339557c3a9bbe35448ac6899e85964f8a", "committedDate": "2020-03-27T22:56:59Z", "message": "Minor fix\n\nSigned-off-by: doxiao <dongbo.xiao@oracle.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgzMjU0Mzkx", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1512#pullrequestreview-383254391", "createdAt": "2020-03-27T23:43:37Z", "commit": {"oid": "366b647339557c3a9bbe35448ac6899e85964f8a"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QyMzo0MzozN1rOF9Euqg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QyMzo0NDo0MVrOF9EvlA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTU4NDkzOA==", "bodyText": "this is just a nit pick, i prefer to put start a new line before every dot/period", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1512#discussion_r399584938", "createdAt": "2020-03-27T23:43:37Z", "author": {"login": "markxnelson"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/TestActions.java", "diffHunk": "@@ -38,6 +44,37 @@ public static String createUniqueNamespace() {\n         return Namespace.createUniqueNamespace();\n     }\n \n-    // etc...\n+    // ------------------------ Docker image  -------------------------\n+\n+    public static boolean createMIIImage(\n+        String baseImageName, \n+        String imageTag,\n+        List<String> modelFiles,\n+        List<String> modelVariableFiles,\n+        List<String> modelArchiveFiles,\n+        String wdtVersion,\n+        String domainType) {\n+  \n+    \treturn \n+            new WebLogicImageTool()\n+                .with(new WITParams()\n+                     .baseName(baseImageName).tag(imageTag).modelFiles(modelFiles)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "366b647339557c3a9bbe35448ac6899e85964f8a"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTU4NTE3Mg==", "bodyText": "this is ok for now, but i might ask to make it statics rather than passing around objects when i see you use this in  a test", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1512#discussion_r399585172", "createdAt": "2020-03-27T23:44:41Z", "author": {"login": "markxnelson"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/TestActions.java", "diffHunk": "@@ -38,6 +44,37 @@ public static String createUniqueNamespace() {\n         return Namespace.createUniqueNamespace();\n     }\n \n-    // etc...\n+    // ------------------------ Docker image  -------------------------\n+\n+    public static boolean createMIIImage(\n+        String baseImageName, \n+        String imageTag,\n+        List<String> modelFiles,\n+        List<String> modelVariableFiles,\n+        List<String> modelArchiveFiles,\n+        String wdtVersion,\n+        String domainType) {\n+  \n+    \treturn \n+            new WebLogicImageTool()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "366b647339557c3a9bbe35448ac6899e85964f8a"}, "originalPosition": 33}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgzMjc2OTY1", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1512#pullrequestreview-383276965", "createdAt": "2020-03-28T02:52:26Z", "commit": {"oid": "366b647339557c3a9bbe35448ac6899e85964f8a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOFQwMjo1MjoyNlrOF9GRRA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOFQwMjo1MjoyNlrOF9GRRA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTYxMDE4MA==", "bodyText": "IMO, ideally version/location would itself come from a global type - the net idea is that at the beginning of a suite, all such settings are defined once (and only once) and then passed around.  Like the 'packet' object in the operator code.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1512#discussion_r399610180", "createdAt": "2020-03-28T02:52:26Z", "author": {"login": "tbarnes-us"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/TestActions.java", "diffHunk": "@@ -38,6 +44,37 @@ public static String createUniqueNamespace() {\n         return Namespace.createUniqueNamespace();\n     }\n \n-    // etc...\n+    // ------------------------ Docker image  -------------------------\n+\n+    public static boolean createMIIImage(\n+        String baseImageName, \n+        String imageTag,\n+        List<String> modelFiles,\n+        List<String> modelVariableFiles,\n+        List<String> modelArchiveFiles,\n+        String wdtVersion,\n+        String domainType) {\n+  \n+    \treturn \n+            new WebLogicImageTool()\n+                .with(new WITParams()\n+                     .baseName(baseImageName).tag(imageTag).modelFiles(modelFiles)\n+                     .modelVariableFiles(modelVariableFiles).modelArchiveFiles(modelArchiveFiles)\n+                     .wdtVersion(wdtVersion).domainType(domainType)).updateImage();\n+    }\n+ \n+ \n+    // ------------------------ Installer  -------------------------\n+\n+    public static boolean verifyAndInstallWIT(String version, String location) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "366b647339557c3a9bbe35448ac6899e85964f8a"}, "originalPosition": 43}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "90813e4ad1ea2396a45bfa3f864d15217223225f", "author": {"user": {"login": "doxiao", "name": "Dongbo Xiao"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/90813e4ad1ea2396a45bfa3f864d15217223225f", "committedDate": "2020-03-30T03:26:03Z", "message": "Minor fix of the formating\n\nSigned-off-by: doxiao <dongbo.xiao@oracle.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8693494ab40a0d757e4fd6392f8c1dfe2962b545", "author": {"user": {"login": "doxiao", "name": "Dongbo Xiao"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/8693494ab40a0d757e4fd6392f8c1dfe2962b545", "committedDate": "2020-03-30T07:51:28Z", "message": "Address review comment\n\nSigned-off-by: doxiao <dongbo.xiao@oracle.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgzODc1MTMz", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1512#pullrequestreview-383875133", "createdAt": "2020-03-30T13:51:59Z", "commit": {"oid": "8693494ab40a0d757e4fd6392f8c1dfe2962b545"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQxMzo1MTo1OVrOF9qw8Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQxMzo1NDowMVrOF9q3Lg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDIwODExMw==", "bodyText": "if I understand correctly, you two are close.  But, I think Mark is suggesting an overloaded \"with()\" method where the argument decides the operation.  In this case \"with(WebLogicImageTool)\" finds the ImageTool with statement, and since the TestActions is a static import and all \"with()\" methods are static, it looks more like with(wit).createMIIImage().  I think you are mostly on the same page here, so approving.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1512#discussion_r400208113", "createdAt": "2020-03-30T13:51:59Z", "author": {"login": "ddsharpe"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/TestActions.java", "diffHunk": "@@ -38,6 +44,37 @@ public static String createUniqueNamespace() {\n         return Namespace.createUniqueNamespace();\n     }\n \n-    // etc...\n+    // ------------------------ Docker image  -------------------------\n+\n+    public static boolean createMIIImage(\n+        String baseImageName, \n+        String imageTag,\n+        List<String> modelFiles,\n+        List<String> modelVariableFiles,\n+        List<String> modelArchiveFiles,\n+        String wdtVersion,\n+        String domainType) {\n+  \n+    \treturn \n+            new WebLogicImageTool()", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTU4NTE3Mg=="}, "originalCommit": {"oid": "366b647339557c3a9bbe35448ac6899e85964f8a"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDIwOTcxMA==", "bodyText": "Let's put the prerequisite downloads in the Jenkins file.  I think it will be much easier to maintain.  And, if we switch to another environment like running in Docker containers with the software pre-positioned, the change is very minor.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1512#discussion_r400209710", "createdAt": "2020-03-30T13:54:01Z", "author": {"login": "ddsharpe"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/TestActions.java", "diffHunk": "@@ -38,6 +44,37 @@ public static String createUniqueNamespace() {\n         return Namespace.createUniqueNamespace();\n     }\n \n-    // etc...\n+    // ------------------------ Docker image  -------------------------\n+\n+    public static boolean createMIIImage(\n+        String baseImageName, \n+        String imageTag,\n+        List<String> modelFiles,\n+        List<String> modelVariableFiles,\n+        List<String> modelArchiveFiles,\n+        String wdtVersion,\n+        String domainType) {\n+  \n+    \treturn \n+            new WebLogicImageTool()\n+                .with(new WITParams()\n+                     .baseName(baseImageName).tag(imageTag).modelFiles(modelFiles)\n+                     .modelVariableFiles(modelVariableFiles).modelArchiveFiles(modelArchiveFiles)\n+                     .wdtVersion(wdtVersion).domainType(domainType)).updateImage();\n+    }\n+ \n+ \n+    // ------------------------ Installer  -------------------------\n+\n+    public static boolean verifyAndInstallWIT(String version, String location) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTYxMDE4MA=="}, "originalCommit": {"oid": "366b647339557c3a9bbe35448ac6899e85964f8a"}, "originalPosition": 43}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "af18481d8d19d6aba0107f56cd749ff5cf539a5b", "author": {"user": {"login": "doxiao", "name": "Dongbo Xiao"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/af18481d8d19d6aba0107f56cd749ff5cf539a5b", "committedDate": "2020-03-30T17:54:43Z", "message": "Merge branch 'mii-new-integration-tests' into install-wit-actions-interface"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4933, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}