{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE5NTMyMTU3", "number": 1659, "title": "Add check for unzip", "bodyText": "This add the unzip command check to the MII image,  the container-registry image already have unzip but there may be a version at one point where the unzip is missing.  unzip was not used until we added wdt version check.", "createdAt": "2020-05-18T14:16:39Z", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1659", "merged": true, "mergeCommit": {"oid": "6b2b886b5db29cea8ac5651ee0dc1abb6d7f78a3"}, "closed": true, "closedAt": "2020-05-20T15:07:05Z", "author": {"login": "jshum2479"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABchRWZdAH2gAyNDE5NTMyMTU3OmZlZDJjYjk1YzhhNDlhNTI3MDVjODQ0N2Q3N2JjY2U3NjAxZWZmZWQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcjKfioAFqTQxNTQzNTQ0MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "fed2cb95c8a49a52705c8447d77bcce7601effed", "author": {"user": null}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/fed2cb95c8a49a52705c8447d77bcce7601effed", "committedDate": "2020-05-14T17:58:26Z", "message": "Add check for unzip"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "edc548f89223143b3c58b5e69269693477e5128a", "author": {"user": null}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/edc548f89223143b3c58b5e69269693477e5128a", "committedDate": "2020-05-18T14:15:24Z", "message": "update wordings"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzNjczNDI3", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1659#pullrequestreview-413673427", "createdAt": "2020-05-18T14:55:12Z", "commit": {"oid": "edc548f89223143b3c58b5e69269693477e5128a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxNDo1NToxMlrOGW65Yw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxNDo1NToxMlrOGW65Yw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjY4NjgxOQ==", "bodyText": "LGTM.\nMinor nits for the SEVEREs:  I think it helps to put '' around each keywords like 'tar', 'gzip', 'unzip', and 'FromModel', and end sentences with a period '.'.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1659#discussion_r426686819", "createdAt": "2020-05-18T14:55:12Z", "author": {"login": "tbarnes-us"}, "path": "operator/src/main/resources/scripts/introspectDomain.sh", "diffHunk": "@@ -119,19 +119,23 @@ if [ ${DOMAIN_SOURCE_TYPE} == \"FromModel\" ]; then\n     trace \"Beginning Model In Image\"\n     command -v gzip\n     if [ $? -ne 0 ] ; then\n-      trace SEVERE \"gzip is missing - image must have gzip installed \" && exit 1\n+      trace SEVERE \"DomainSourceType is FromModel, gzip is missing in the image. Please use an image with gzip installed\" && exit 1\n     fi\n     command -v tar\n     if [ $? -ne 0 ] ; then\n-      trace SEVERE \"tar is missing - image must have tar installed \" && exit 1\n+      trace SEVERE \"DomainSourceType is FromModel, tar is missing in the image. Please use an image with tar installed\" && exit 1\n+    fi\n+    command -v unzip\n+    if [ $? -ne 0 ] ; then\n+      trace SEVERE \"DomainSourceType is FromModel, unzip is missing in the image. Please use an image with unzip installed\" && exit 1\n     fi\n     mkdir -p ${DOMAIN_HOME}\n     if [ $? -ne 0 ] ; then\n-      trace SEVERE \"cannot create domain home directory '${DOMAIN_HOME}'\" && exit 1\n+      trace SEVERE \"DomainSourceType is FromModel, cannot create domain home directory '${DOMAIN_HOME}'\" && exit 1", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "edc548f89223143b3c58b5e69269693477e5128a"}, "originalPosition": 19}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzNjc4NTIx", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1659#pullrequestreview-413678521", "createdAt": "2020-05-18T15:00:20Z", "commit": {"oid": "edc548f89223143b3c58b5e69269693477e5128a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxNTowMDoyMFrOGW7ItA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxNTowMDoyMFrOGW7ItA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjY5MDc0MA==", "bodyText": "Minor nit:  It'd be nice to put a test file in the domain home directory just to verify that it's  accessible - so we can  'fail fast' when hitting a directory access issue.\ntouch ${DOMAIN_HOME}/testaccess.tmp\nif [ $? -ne 0 ]; then\nyadayada Cannot write to domain home directory '${DOMAIN_HOME}' yadayayada\nexit 1\nfi\nrm -f ${DOMAIN_HOME}/testaccess.tmp", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1659#discussion_r426690740", "createdAt": "2020-05-18T15:00:20Z", "author": {"login": "tbarnes-us"}, "path": "operator/src/main/resources/scripts/introspectDomain.sh", "diffHunk": "@@ -119,19 +119,23 @@ if [ ${DOMAIN_SOURCE_TYPE} == \"FromModel\" ]; then\n     trace \"Beginning Model In Image\"\n     command -v gzip\n     if [ $? -ne 0 ] ; then\n-      trace SEVERE \"gzip is missing - image must have gzip installed \" && exit 1\n+      trace SEVERE \"DomainSourceType is FromModel, gzip is missing in the image. Please use an image with gzip installed\" && exit 1\n     fi\n     command -v tar\n     if [ $? -ne 0 ] ; then\n-      trace SEVERE \"tar is missing - image must have tar installed \" && exit 1\n+      trace SEVERE \"DomainSourceType is FromModel, tar is missing in the image. Please use an image with tar installed\" && exit 1\n+    fi\n+    command -v unzip\n+    if [ $? -ne 0 ] ; then\n+      trace SEVERE \"DomainSourceType is FromModel, unzip is missing in the image. Please use an image with unzip installed\" && exit 1\n     fi\n     mkdir -p ${DOMAIN_HOME}\n     if [ $? -ne 0 ] ; then\n-      trace SEVERE \"cannot create domain home directory '${DOMAIN_HOME}'\" && exit 1\n+      trace SEVERE \"DomainSourceType is FromModel, cannot create domain home directory '${DOMAIN_HOME}'\" && exit 1\n     fi", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "edc548f89223143b3c58b5e69269693477e5128a"}, "originalPosition": 20}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzNjc5NDE2", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1659#pullrequestreview-413679416", "createdAt": "2020-05-18T15:01:15Z", "commit": {"oid": "edc548f89223143b3c58b5e69269693477e5128a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "18d63354bc55cacbde30ed3b544c4c6275db78a4", "author": {"user": null}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/18d63354bc55cacbde30ed3b544c4c6275db78a4", "committedDate": "2020-05-18T20:09:50Z", "message": "minor fix"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzOTA2MTIx", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1659#pullrequestreview-413906121", "createdAt": "2020-05-18T20:11:27Z", "commit": {"oid": "18d63354bc55cacbde30ed3b544c4c6275db78a4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQyMDoxMToyN1rOGXF7yQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQyMDoxMToyN1rOGXF7yQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjg2NzY1Nw==", "bodyText": "Missing period.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1659#discussion_r426867657", "createdAt": "2020-05-18T20:11:27Z", "author": {"login": "tbarnes-us"}, "path": "operator/src/main/resources/scripts/introspectDomain.sh", "diffHunk": "@@ -119,20 +119,25 @@ if [ ${DOMAIN_SOURCE_TYPE} == \"FromModel\" ]; then\n     trace \"Beginning Model In Image\"\n     command -v gzip\n     if [ $? -ne 0 ] ; then\n-      trace SEVERE \"DomainSourceType is FromModel, gzip is missing in the image. Please use an image with gzip installed\" && exit 1\n+      trace SEVERE \"DomainSourceType is FromModel, 'gzip' is missing in the image. Please use an image with 'gzip' installed\" && exit 1\n     fi\n     command -v tar\n     if [ $? -ne 0 ] ; then\n-      trace SEVERE \"DomainSourceType is FromModel, tar is missing in the image. Please use an image with tar installed\" && exit 1\n+      trace SEVERE \"DomainSourceType is FromModel, 'tar' is missing in the image. Please use an image with 'tar' installed\" && exit 1\n     fi\n     command -v unzip\n     if [ $? -ne 0 ] ; then\n-      trace SEVERE \"DomainSourceType is FromModel, unzip is missing in the image. Please use an image with unzip installed\" && exit 1\n+      trace SEVERE \"DomainSourceType is FromModel, 'unzip' is missing in the image. Please use an image with 'unzip' installed\" && exit 1\n     fi\n     mkdir -p ${DOMAIN_HOME}\n     if [ $? -ne 0 ] ; then\n       trace SEVERE \"DomainSourceType is FromModel, cannot create domain home directory '${DOMAIN_HOME}'\" && exit 1\n     fi\n+    touch ${DOMAIN_HOME}/testaccess.tmp\n+    if [ $? -ne 0 ]; then\n+      trace SEVERE \"DomainSourceType is FromModel, cannot write to domain home directory '${DOMAIN_HOME}'\" && exit 1", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "18d63354bc55cacbde30ed3b544c4c6275db78a4"}, "originalPosition": 23}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzOTA2MjAw", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1659#pullrequestreview-413906200", "createdAt": "2020-05-18T20:11:35Z", "commit": {"oid": "18d63354bc55cacbde30ed3b544c4c6275db78a4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "05957c78aefa66c0364dad8b31f0f57c42f3fbf4", "author": {"user": {"login": "rjeberhard", "name": "Ryan Eberhard"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/05957c78aefa66c0364dad8b31f0f57c42f3fbf4", "committedDate": "2020-05-20T15:06:40Z", "message": "Update introspectDomain.sh"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE1NDM1NDQx", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1659#pullrequestreview-415435441", "createdAt": "2020-05-20T15:06:56Z", "commit": {"oid": "05957c78aefa66c0364dad8b31f0f57c42f3fbf4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4812, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}