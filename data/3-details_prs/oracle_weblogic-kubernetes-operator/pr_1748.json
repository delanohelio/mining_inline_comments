{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM2NzM5OTk1", "number": 1748, "title": "OWLS-80884: Removing a Domain namespace from Operator TargetNamespace should not shutdown the domain", "bodyText": "When a namespace is removed from 'domainNamespaces' list (Targetnamespaces), the operator will not shutdown domain resources if the namespace is active (running).  This is to allow customer's to upgrade the Operator without incurring downtime to the currently running domains in the active namespace.", "createdAt": "2020-06-18T20:14:49Z", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1748", "merged": true, "mergeCommit": {"oid": "1b8d2fda5bf5052616b282822aa98bb2d284ebb0"}, "closed": true, "closedAt": "2020-06-19T18:48:33Z", "author": {"login": "lennyphan"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcrPiHgAH2gAyNDM2NzM5OTk1OmU0YTU0NTFlY2M3YjQ4YzY0OWM2N2ZkMDkwMDQxMGVjOWRmYjJhMTM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcs3sJegFqTQzNDI4MTgwNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e4a5451ecc7b48c649c67fd0900410ec9dfb2a13", "author": {"user": {"login": "lennyphan", "name": "Lenny Phan"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/e4a5451ecc7b48c649c67fd0900410ec9dfb2a13", "committedDate": "2020-06-14T17:30:40Z", "message": "Verify all namespaces listed in 'isNameSpaceStopping' map to see if they're running"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "52a6abac8c813b557d125c4d5089616e1520c061", "author": {"user": {"login": "lennyphan", "name": "Lenny Phan"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/52a6abac8c813b557d125c4d5089616e1520c061", "committedDate": "2020-06-18T17:14:56Z", "message": "modify behavior so that Operator does not shudown domain resource when namespace removed from targetNamespace list"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMzNjIxNjIz", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1748#pullrequestreview-433621623", "createdAt": "2020-06-18T20:25:57Z", "commit": {"oid": "52a6abac8c813b557d125c4d5089616e1520c061"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQyMDoyNTo1N1rOGl_BWA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQyMDoyNTo1N1rOGl_BWA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjQ4MzAzMg==", "bodyText": "Should we rename isNamespaceStopping field in Main to something else, such as isNamespaceStoppingMap to avoid having same name?", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1748#discussion_r442483032", "createdAt": "2020-06-18T20:25:57Z", "author": {"login": "alai8"}, "path": "operator/src/main/java/oracle/kubernetes/operator/Main.java", "diffHunk": "@@ -228,14 +228,23 @@ private static void completeBegin() {\n     }\n   }\n \n-  private static void stopNamespace(String ns, boolean remove) {\n-    processor.stopNamespace(ns);\n-    AtomicBoolean stopping =\n-        remove ? isNamespaceStopping.remove(ns) : isNamespaceStopping.get(ns);\n+  private static void stopNamespace(String ns, boolean inTargetNamespaceList) {\n+    AtomicBoolean isNamespaceStopping = isNamespaceStopping(ns);\n \n-    if (stopping != null) {\n-      stopping.set(true);\n+    // Remove if namespace not in targetNamespace list\n+    if (!inTargetNamespaceList) {\n+      Main.isNamespaceStopping.remove(ns);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "52a6abac8c813b557d125c4d5089616e1520c061"}, "originalPosition": 15}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f9a5b1f1a75223155035c7cc5b5b47fd86369b8f", "author": {"user": {"login": "lennyphan", "name": "Lenny Phan"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/f9a5b1f1a75223155035c7cc5b5b47fd86369b8f", "committedDate": "2020-06-18T21:54:36Z", "message": "Rename isNamespaceStopping field in Main to isNamespaceStoppingMap"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c960b1505cb5568973bf960a7f0a75744561ff2c", "author": {"user": {"login": "lennyphan", "name": "Lenny Phan"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/c960b1505cb5568973bf960a7f0a75744561ff2c", "committedDate": "2020-06-18T22:06:33Z", "message": "Resolve conflict with latest develop changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ea63263289b2ed68f28c1a87785fe86095c04119", "author": {"user": {"login": "lennyphan", "name": "Lenny Phan"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/ea63263289b2ed68f28c1a87785fe86095c04119", "committedDate": "2020-06-18T22:53:04Z", "message": "Dropped the 'is.' from the 'isNamespaceStoppingMap' field in Main and rename to 'namespaceStoppingMap'"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMzNzAxODQ5", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1748#pullrequestreview-433701849", "createdAt": "2020-06-18T23:02:15Z", "commit": {"oid": "ea63263289b2ed68f28c1a87785fe86095c04119"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMzNzA3MjU1", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1748#pullrequestreview-433707255", "createdAt": "2020-06-18T23:18:07Z", "commit": {"oid": "ea63263289b2ed68f28c1a87785fe86095c04119"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMzNzA3NDQ3", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1748#pullrequestreview-433707447", "createdAt": "2020-06-18T23:18:40Z", "commit": {"oid": "ea63263289b2ed68f28c1a87785fe86095c04119"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM0MjgwMjA2", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1748#pullrequestreview-434280206", "createdAt": "2020-06-19T18:48:23Z", "commit": {"oid": "ea63263289b2ed68f28c1a87785fe86095c04119"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM0MjgxODA1", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1748#pullrequestreview-434281805", "createdAt": "2020-06-19T18:51:45Z", "commit": {"oid": "ea63263289b2ed68f28c1a87785fe86095c04119"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4562, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}