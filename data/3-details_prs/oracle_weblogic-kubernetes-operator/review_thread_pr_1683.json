{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI0MDM2MDc5", "number": 1683, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxODo1NDoyOVrOEAO5BA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxODo1ODoyM1rOEAO-YQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY4Njc5NDI4OnYy", "diffSide": "RIGHT", "path": "operator/src/main/java/oracle/kubernetes/operator/DomainProcessorImpl.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxODo1NDoyOVrOGbYulg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxODo1NDoyOVrOGbYulg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTM2OTg3OA==", "bodyText": "Consider using Optional.ofNullable(fiber.getLastIfSuspended()) rather than the separate get and if statement.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1683#discussion_r431369878", "createdAt": "2020-05-27T18:54:29Z", "author": {"login": "russgold"}, "path": "operator/src/main/java/oracle/kubernetes/operator/DomainProcessorImpl.java", "diffHunk": "@@ -219,6 +220,28 @@ public void stopNamespace(String ns) {\n     }\n   }\n \n+  /**\n+   * Report on currently suspended fibers. This is the first step toward diagnosing if we need special handling\n+   * to kill or kick these fibers.\n+   */\n+  public void reportSuspendedFibers() {\n+    if (LOGGER.isFineEnabled()) {\n+      BiConsumer<String, FiberGate> consumer =\n+          (namespace, gate) -> {\n+            gate.getCurrentFibers().forEach(\n+                (key, fiber) -> {\n+                  Step lastIfSuspended = fiber.getLastIfSuspended();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4d0fad225d0d4857d1bb14010fec423917abaaad"}, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY4NjgwODAxOnYy", "diffSide": "RIGHT", "path": "operator/src/main/java/oracle/kubernetes/operator/work/Fiber.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxODo1ODoyM1rOGbY3ew==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxODo1ODoyM1rOGbY3ew==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTM3MjE1NQ==", "bodyText": "The name is a bit unclear. Maybe getSuspendedStep would be clearer. Its semantics would be the same, as a fiber can have at most one suspended step.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1683#discussion_r431372155", "createdAt": "2020-05-27T18:58:23Z", "author": {"login": "russgold"}, "path": "operator/src/main/java/oracle/kubernetes/operator/work/Fiber.java", "diffHunk": "@@ -318,6 +319,22 @@ public boolean isDone() {\n     return status.get() == DONE;\n   }\n \n+  /**\n+   * The most recently invoked step if the fiber is currently suspended.\n+   * @return Last invoked step for suspended fiber.\n+   */\n+  public Step getLastIfSuspended() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4d0fad225d0d4857d1bb14010fec423917abaaad"}, "originalPosition": 52}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4262, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}