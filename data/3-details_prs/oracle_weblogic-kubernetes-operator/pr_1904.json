{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc5ODE1Mjc3", "number": 1904, "title": "fix build application not to assert exec false exit value", "bodyText": "Occasionally, exec into the pod where an application is built fails with a non-zero exit code. The application builds successfully and the app seems to exist for the test to continue. This exit code is returned by kubernetes client api, so temporarily commenting out the assertion that checks for exitvalue of 0.  Now, any It test that calls buildApplication() to build an app, has to check that the packaged app exists before proceeding with the test. Seems like all the existing tests do that now since the run in kind cluster passed yesterday -\nhttps://build.weblogick8s.org:8443/job/weblogic-kubernetes-operator-kind-new/1808/", "createdAt": "2020-09-04T15:40:47Z", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1904", "merged": true, "mergeCommit": {"oid": "74f648262063644ce9fac5e37e9ae99a8204a441"}, "closed": true, "closedAt": "2020-09-08T13:57:16Z", "author": {"login": "bhavaniravichandran"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdFX0uoAH2gAyNDc5ODE1Mjc3OmVkOTQyNGJiMjcwZTZmYjU4ZWVjZDE5OTIzN2Y3MzA1ZjU5Y2RiMGM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdFq3yKAFqTQ4MjkxMzAxOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "ed9424bb270e6fb58eecd199237f7305f59cdb0c", "author": {"user": null}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/ed9424bb270e6fb58eecd199237f7305f59cdb0c", "committedDate": "2020-09-03T21:52:16Z", "message": "fix build application not to assert exec false exit valuae"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgyNzc3MTU3", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1904#pullrequestreview-482777157", "createdAt": "2020-09-04T16:04:21Z", "commit": {"oid": "ed9424bb270e6fb58eecd199237f7305f59cdb0c"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQxNjowNDoyMVrOHNTpWg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQxNjowNToxOVrOHNTrRw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzcxNTQxOA==", "bodyText": "why can't the check be done in this method instead of changing all the calling It test classes?", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1904#discussion_r483715418", "createdAt": "2020-09-04T16:04:21Z", "author": {"login": "vanajamukkara"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/utils/BuildApplication.java", "diffHunk": "@@ -174,8 +175,14 @@ public static Path buildApplication(Path appSrcPath, Map<String, String> antPara\n       if (exec.stderr() != null) {\n         logger.info(\"Exec stderr {0}\", exec.stderr());\n       }\n-      assertEquals(0, exec.exitValue(), \"Exec into \" + webLogicPod.getMetadata().getName()\n-          + \" to build an application failed with exit value \" + exec.exitValue());\n+\n+      // Exec returns a non-zero return code intermittently even when the application builds\n+      // successfully. This seems to be an issue with io.kubernetes.client.Exec.java. So, Commenting\n+      // this assertion for now. it is now the responsibility of the It test class\n+      // to assert the application exists before continuing with the test.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ed9424bb270e6fb58eecd199237f7305f59cdb0c"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzcxNTkxMQ==", "bodyText": "doesn't the copy files/dir from pod fail if the build is not successful?", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1904#discussion_r483715911", "createdAt": "2020-09-04T16:05:19Z", "author": {"login": "vanajamukkara"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/utils/BuildApplication.java", "diffHunk": "@@ -174,8 +175,14 @@ public static Path buildApplication(Path appSrcPath, Map<String, String> antPara\n       if (exec.stderr() != null) {\n         logger.info(\"Exec stderr {0}\", exec.stderr());\n       }\n-      assertEquals(0, exec.exitValue(), \"Exec into \" + webLogicPod.getMetadata().getName()\n-          + \" to build an application failed with exit value \" + exec.exitValue());\n+\n+      // Exec returns a non-zero return code intermittently even when the application builds\n+      // successfully. This seems to be an issue with io.kubernetes.client.Exec.java. So, Commenting\n+      // this assertion for now. it is now the responsibility of the It test class\n+      // to assert the application exists before continuing with the test.\n+\n+      //assertEquals(0, exec.exitValue(), \"Exec into \" + webLogicPod.getMetadata().getName()\n+      //    + \" to build an application failed with exit value \" + exec.exitValue());\n \n       Kubernetes.copyDirectoryFromPod(webLogicPod,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ed9424bb270e6fb58eecd199237f7305f59cdb0c"}, "originalPosition": 34}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgyNzc4NTU3", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1904#pullrequestreview-482778557", "createdAt": "2020-09-04T16:06:32Z", "commit": {"oid": "ed9424bb270e6fb58eecd199237f7305f59cdb0c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0f48c92539bd0f9047584203c3382f8c7dedb185", "author": {"user": {"login": "sankarpn", "name": "Sankar Periyathambi Neelakandan"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/0f48c92539bd0f9047584203c3382f8c7dedb185", "committedDate": "2020-09-04T17:53:38Z", "message": "Asserting that file is available  after build"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgyOTEzMDE5", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1904#pullrequestreview-482913019", "createdAt": "2020-09-04T20:03:48Z", "commit": {"oid": "0f48c92539bd0f9047584203c3382f8c7dedb185"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4117, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}