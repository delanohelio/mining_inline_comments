{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc5MjAxMzI0", "number": 1903, "title": "Adding test to use PV for logHome in MII domain", "bodyText": "Jenkins results -\nhttps://build.weblogick8s.org:8443/job/weblogic-kubernetes-operator-kind-new/1812/\nhttps://build.weblogick8s.org:8443/job/weblogic-kubernetes-operator-kind-new/1842/ -- latest\nhttps://build.weblogick8s.org:8443/job/weblogic-kubernetes-operator-kind-new/1841/ -- latest, failing with known image permission issues same failures as on develop branch", "createdAt": "2020-09-04T02:29:55Z", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1903", "merged": true, "mergeCommit": {"oid": "19b55e8d83933baf88b707cbd576c8da7f002e00"}, "closed": true, "closedAt": "2020-09-10T16:27:46Z", "author": {"login": "vanajamukkara"}, "timelineItems": {"totalCount": 18, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdEthGigH2gAyNDc5MjAxMzI0Ojk1Njk0MWVjNzVlZWNlMGQ2NTg3Y2ViYzUxNDA1ZTExZTIyNzQ5MGQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdHS3k3AH2gAyNDc5MjAxMzI0OjRkZmY1Y2Y4MjQ2YjZlYWRjODc4MWFkM2EyYjY0ZmQzZGZmYTFkOWU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "956941ec75eece0d6587cebc51405e11e227490d", "author": {"user": {"login": "vanajamukkara", "name": "Vanajakshi Mukkara"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/956941ec75eece0d6587cebc51405e11e227490d", "committedDate": "2020-09-01T20:34:49Z", "message": "logs on PV"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9c0391b5bca17bda061238c6b323c62ac4be1d87", "author": {"user": {"login": "vanajamukkara", "name": "Vanajakshi Mukkara"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/9c0391b5bca17bda061238c6b323c62ac4be1d87", "committedDate": "2020-09-03T18:46:02Z", "message": "use PV for logs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "81fad563b65fd992159d92161d3b38e5509022ba", "author": {"user": {"login": "vanajamukkara", "name": "Vanajakshi Mukkara"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/81fad563b65fd992159d92161d3b38e5509022ba", "committedDate": "2020-09-03T19:17:19Z", "message": "Merge branch 'develop' of https://github.com/oracle/weblogic-kubernetes-operator into test_loghomeonpv"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "abf38a20f2edccb7ff114df5f1b8bbdc9cab4749", "author": {"user": {"login": "vanajamukkara", "name": "Vanajakshi Mukkara"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/abf38a20f2edccb7ff114df5f1b8bbdc9cab4749", "committedDate": "2020-09-03T19:20:17Z", "message": "Revert to develop branch code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ae5378de330ba4c3de5b90b55b9633264918c8cd", "author": {"user": {"login": "vanajamukkara", "name": "Vanajakshi Mukkara"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/ae5378de330ba4c3de5b90b55b9633264918c8cd", "committedDate": "2020-09-03T20:21:24Z", "message": "fix pv path"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "977f55241ce6c524ca7f66ba62a4c7dd15b71e0a", "author": {"user": {"login": "vanajamukkara", "name": "Vanajakshi Mukkara"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/977f55241ce6c524ca7f66ba62a4c7dd15b71e0a", "committedDate": "2020-09-03T20:51:38Z", "message": "code refactor"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d8e28793a1676bab8327b6cd0b10e1fb0bfdd369", "author": {"user": {"login": "vanajamukkara", "name": "Vanajakshi Mukkara"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/d8e28793a1676bab8327b6cd0b10e1fb0bfdd369", "committedDate": "2020-09-03T21:48:32Z", "message": "fixing path"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c9f154a632d2e008e9ecc47efbb17c407d64da88", "author": {"user": {"login": "vanajamukkara", "name": "Vanajakshi Mukkara"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/c9f154a632d2e008e9ecc47efbb17c407d64da88", "committedDate": "2020-09-04T02:28:07Z", "message": "fix comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgzNjczNDEy", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1903#pullrequestreview-483673412", "createdAt": "2020-09-07T17:24:53Z", "commit": {"oid": "c9f154a632d2e008e9ecc47efbb17c407d64da88"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QxNzoyNDo1M1rOHOFUIA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QxNzoyNDo1M1rOHOFUIA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDUyOTE4NA==", "bodyText": "We should check for non ZERO size of the log file or look for certain String on the Log file", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1903#discussion_r484529184", "createdAt": "2020-09-07T17:24:53Z", "author": {"login": "anpanigr"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/ItMiiUpdateDomainConfig.java", "diffHunk": "@@ -224,27 +266,41 @@ public static void initAll(@Namespaces(2) List<String> namespaces) {\n   @BeforeEach\n   public void beforeEach() {\n \n-    // check admin server pod is ready\n-    logger.info(\"Wait for admin server pod {0} to be ready in namespace {1}\",\n+    logger.info(\"Check admin service and pod {0} is created in namespace {1}\",\n         adminServerPodName, domainNamespace);\n-    checkPodReady(adminServerPodName, domainUid, domainNamespace);\n-    logger.info(\"Check admin service {0} is created in namespace {1}\",\n-        adminServerPodName, domainNamespace);\n-    checkServiceExists(adminServerPodName, domainNamespace);\n+    checkPodReadyAndServiceExists(adminServerPodName, domainUid, domainNamespace);\n \n-    // check managed server pods are ready\n+    // check managed server services and pods are ready\n     for (int i = 1; i <= replicaCount; i++) {\n-      logger.info(\"Wait for managed server pod {0} to be ready in namespace {1}\",\n-          managedServerPrefix + i, domainNamespace);\n-      checkPodReady(managedServerPrefix + i, domainUid, domainNamespace);\n+      logger.info(\"Wait for managed server services and pods are created in namespace {0}\",\n+          domainNamespace);\n+      checkPodReadyAndServiceExists(managedServerPrefix + i, domainUid, domainNamespace);\n     }\n+  }\n+\n+  /**\n+   * Check server logs are written on PV.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c9f154a632d2e008e9ecc47efbb17c407d64da88"}, "originalPosition": 181}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8f9c2769b409a578cd88370ac5e4793fa228b00e", "author": {"user": {"login": "vanajamukkara", "name": "Vanajakshi Mukkara"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/8f9c2769b409a578cd88370ac5e4793fa228b00e", "committedDate": "2020-09-09T16:12:45Z", "message": "look for string RUNNING in server log"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "47f4eece95b86f76660db16063d86ff7f4982946", "author": {"user": {"login": "vanajamukkara", "name": "Vanajakshi Mukkara"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/47f4eece95b86f76660db16063d86ff7f4982946", "committedDate": "2020-09-09T16:15:35Z", "message": "Merge branch 'develop' of https://github.com/oracle/weblogic-kubernetes-operator into test_loghomeonpv"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg1MjAxNzc1", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1903#pullrequestreview-485201775", "createdAt": "2020-09-09T16:36:45Z", "commit": {"oid": "47f4eece95b86f76660db16063d86ff7f4982946"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d114d18ae97de652d034cb311d55d7c4e9c4f94d", "author": {"user": {"login": "vanajamukkara", "name": "Vanajakshi Mukkara"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/d114d18ae97de652d034cb311d55d7c4e9c4f94d", "committedDate": "2020-09-09T17:50:00Z", "message": "modify success/failure criteria"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg1Mzk3Mzc2", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1903#pullrequestreview-485397376", "createdAt": "2020-09-09T20:56:19Z", "commit": {"oid": "d114d18ae97de652d034cb311d55d7c4e9c4f94d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQyMDo1NjoxOVrOHPaBgA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQyMDo1NjoxOVrOHPaBgA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTkxNzA1Ng==", "bodyText": "add some indentation here to make the code easier to read.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1903#discussion_r485917056", "createdAt": "2020-09-09T20:56:19Z", "author": {"login": "xiancao"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/ItMiiUpdateDomainConfig.java", "diffHunk": "@@ -758,14 +811,23 @@ private static void createDomainResource(\n                             .name(adminSecretName)\n                             .namespace(domNamespace))\n                     .includeServerOutInPodLog(true)\n+                    .logHomeEnabled(Boolean.TRUE)\n+                    .logHome(\"/shared/logs\")\n                     .serverStartPolicy(\"IF_NEEDED\")\n                     .serverPod(new ServerPod()\n                             .addEnvItem(new V1EnvVar()\n                                     .name(\"JAVA_OPTIONS\")\n                                     .value(\"-Dweblogic.StdoutDebugEnabled=false\"))\n                             .addEnvItem(new V1EnvVar()\n                                     .name(\"USER_MEM_ARGS\")\n-                                    .value(\"-Djava.security.egd=file:/dev/./urandom \")))\n+                                    .value(\"-Djava.security.egd=file:/dev/./urandom \"))\n+                            .addVolumesItem(new V1Volume()\n+                            .name(pvName)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d114d18ae97de652d034cb311d55d7c4e9c4f94d"}, "originalPosition": 317}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg1Mzk3NTM0", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1903#pullrequestreview-485397534", "createdAt": "2020-09-09T20:56:33Z", "commit": {"oid": "d114d18ae97de652d034cb311d55d7c4e9c4f94d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQyMDo1NjozM1rOHPaCAQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQyMDo1NjozM1rOHPaCAQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTkxNzE4NQ==", "bodyText": "same here", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1903#discussion_r485917185", "createdAt": "2020-09-09T20:56:33Z", "author": {"login": "xiancao"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/ItMiiUpdateDomainConfig.java", "diffHunk": "@@ -758,14 +811,23 @@ private static void createDomainResource(\n                             .name(adminSecretName)\n                             .namespace(domNamespace))\n                     .includeServerOutInPodLog(true)\n+                    .logHomeEnabled(Boolean.TRUE)\n+                    .logHome(\"/shared/logs\")\n                     .serverStartPolicy(\"IF_NEEDED\")\n                     .serverPod(new ServerPod()\n                             .addEnvItem(new V1EnvVar()\n                                     .name(\"JAVA_OPTIONS\")\n                                     .value(\"-Dweblogic.StdoutDebugEnabled=false\"))\n                             .addEnvItem(new V1EnvVar()\n                                     .name(\"USER_MEM_ARGS\")\n-                                    .value(\"-Djava.security.egd=file:/dev/./urandom \")))\n+                                    .value(\"-Djava.security.egd=file:/dev/./urandom \"))\n+                            .addVolumesItem(new V1Volume()\n+                            .name(pvName)\n+                            .persistentVolumeClaim(new V1PersistentVolumeClaimVolumeSource()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d114d18ae97de652d034cb311d55d7c4e9c4f94d"}, "originalPosition": 318}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg1Mzk4OTg0", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1903#pullrequestreview-485398984", "createdAt": "2020-09-09T20:58:48Z", "commit": {"oid": "d114d18ae97de652d034cb311d55d7c4e9c4f94d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "669cf0b00d7b45a887930ba6f9065957701af72b", "author": {"user": {"login": "vanajamukkara", "name": "Vanajakshi Mukkara"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/669cf0b00d7b45a887930ba6f9065957701af72b", "committedDate": "2020-09-09T21:10:45Z", "message": "fix indentation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4dff5cf8246b6eadc8781ad3a2b64fd3dffa1d9e", "author": {"user": {"login": "vanajamukkara", "name": "Vanajakshi Mukkara"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/4dff5cf8246b6eadc8781ad3a2b64fd3dffa1d9e", "committedDate": "2020-09-09T21:13:42Z", "message": "adding pipefail"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4114, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}