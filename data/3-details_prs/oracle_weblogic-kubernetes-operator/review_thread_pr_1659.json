{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE5NTMyMTU3", "number": 1659, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxNDo1NToxMlrOD9bjqw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQyMDoxMToyN1rOD9iZ4A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY1NzQxMjI3OnYy", "diffSide": "RIGHT", "path": "operator/src/main/resources/scripts/introspectDomain.sh", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxNDo1NToxMlrOGW65Yw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQyMDoxMzoxMVrOGXF-8g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjY4NjgxOQ==", "bodyText": "LGTM.\nMinor nits for the SEVEREs:  I think it helps to put '' around each keywords like 'tar', 'gzip', 'unzip', and 'FromModel', and end sentences with a period '.'.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1659#discussion_r426686819", "createdAt": "2020-05-18T14:55:12Z", "author": {"login": "tbarnes-us"}, "path": "operator/src/main/resources/scripts/introspectDomain.sh", "diffHunk": "@@ -119,19 +119,23 @@ if [ ${DOMAIN_SOURCE_TYPE} == \"FromModel\" ]; then\n     trace \"Beginning Model In Image\"\n     command -v gzip\n     if [ $? -ne 0 ] ; then\n-      trace SEVERE \"gzip is missing - image must have gzip installed \" && exit 1\n+      trace SEVERE \"DomainSourceType is FromModel, gzip is missing in the image. Please use an image with gzip installed\" && exit 1\n     fi\n     command -v tar\n     if [ $? -ne 0 ] ; then\n-      trace SEVERE \"tar is missing - image must have tar installed \" && exit 1\n+      trace SEVERE \"DomainSourceType is FromModel, tar is missing in the image. Please use an image with tar installed\" && exit 1\n+    fi\n+    command -v unzip\n+    if [ $? -ne 0 ] ; then\n+      trace SEVERE \"DomainSourceType is FromModel, unzip is missing in the image. Please use an image with unzip installed\" && exit 1\n     fi\n     mkdir -p ${DOMAIN_HOME}\n     if [ $? -ne 0 ] ; then\n-      trace SEVERE \"cannot create domain home directory '${DOMAIN_HOME}'\" && exit 1\n+      trace SEVERE \"DomainSourceType is FromModel, cannot create domain home directory '${DOMAIN_HOME}'\" && exit 1", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "edc548f89223143b3c58b5e69269693477e5128a"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjg0MzA0OQ==", "bodyText": "Let's make these edits and then I'll commit.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1659#discussion_r426843049", "createdAt": "2020-05-18T19:20:09Z", "author": {"login": "rjeberhard"}, "path": "operator/src/main/resources/scripts/introspectDomain.sh", "diffHunk": "@@ -119,19 +119,23 @@ if [ ${DOMAIN_SOURCE_TYPE} == \"FromModel\" ]; then\n     trace \"Beginning Model In Image\"\n     command -v gzip\n     if [ $? -ne 0 ] ; then\n-      trace SEVERE \"gzip is missing - image must have gzip installed \" && exit 1\n+      trace SEVERE \"DomainSourceType is FromModel, gzip is missing in the image. Please use an image with gzip installed\" && exit 1\n     fi\n     command -v tar\n     if [ $? -ne 0 ] ; then\n-      trace SEVERE \"tar is missing - image must have tar installed \" && exit 1\n+      trace SEVERE \"DomainSourceType is FromModel, tar is missing in the image. Please use an image with tar installed\" && exit 1\n+    fi\n+    command -v unzip\n+    if [ $? -ne 0 ] ; then\n+      trace SEVERE \"DomainSourceType is FromModel, unzip is missing in the image. Please use an image with unzip installed\" && exit 1\n     fi\n     mkdir -p ${DOMAIN_HOME}\n     if [ $? -ne 0 ] ; then\n-      trace SEVERE \"cannot create domain home directory '${DOMAIN_HOME}'\" && exit 1\n+      trace SEVERE \"DomainSourceType is FromModel, cannot create domain home directory '${DOMAIN_HOME}'\" && exit 1", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjY4NjgxOQ=="}, "originalCommit": {"oid": "edc548f89223143b3c58b5e69269693477e5128a"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjg2NzIwNQ==", "bodyText": "done", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1659#discussion_r426867205", "createdAt": "2020-05-18T20:10:24Z", "author": {"login": "jshum2479"}, "path": "operator/src/main/resources/scripts/introspectDomain.sh", "diffHunk": "@@ -119,19 +119,23 @@ if [ ${DOMAIN_SOURCE_TYPE} == \"FromModel\" ]; then\n     trace \"Beginning Model In Image\"\n     command -v gzip\n     if [ $? -ne 0 ] ; then\n-      trace SEVERE \"gzip is missing - image must have gzip installed \" && exit 1\n+      trace SEVERE \"DomainSourceType is FromModel, gzip is missing in the image. Please use an image with gzip installed\" && exit 1\n     fi\n     command -v tar\n     if [ $? -ne 0 ] ; then\n-      trace SEVERE \"tar is missing - image must have tar installed \" && exit 1\n+      trace SEVERE \"DomainSourceType is FromModel, tar is missing in the image. Please use an image with tar installed\" && exit 1\n+    fi\n+    command -v unzip\n+    if [ $? -ne 0 ] ; then\n+      trace SEVERE \"DomainSourceType is FromModel, unzip is missing in the image. Please use an image with unzip installed\" && exit 1\n     fi\n     mkdir -p ${DOMAIN_HOME}\n     if [ $? -ne 0 ] ; then\n-      trace SEVERE \"cannot create domain home directory '${DOMAIN_HOME}'\" && exit 1\n+      trace SEVERE \"DomainSourceType is FromModel, cannot create domain home directory '${DOMAIN_HOME}'\" && exit 1", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjY4NjgxOQ=="}, "originalCommit": {"oid": "edc548f89223143b3c58b5e69269693477e5128a"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjg2ODQ2Ng==", "bodyText": "Minor nits still buzzing around:  Still missing periods at end of each SEVERE sentence.  Would be nice to have quotes around FromModel too.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1659#discussion_r426868466", "createdAt": "2020-05-18T20:13:11Z", "author": {"login": "tbarnes-us"}, "path": "operator/src/main/resources/scripts/introspectDomain.sh", "diffHunk": "@@ -119,19 +119,23 @@ if [ ${DOMAIN_SOURCE_TYPE} == \"FromModel\" ]; then\n     trace \"Beginning Model In Image\"\n     command -v gzip\n     if [ $? -ne 0 ] ; then\n-      trace SEVERE \"gzip is missing - image must have gzip installed \" && exit 1\n+      trace SEVERE \"DomainSourceType is FromModel, gzip is missing in the image. Please use an image with gzip installed\" && exit 1\n     fi\n     command -v tar\n     if [ $? -ne 0 ] ; then\n-      trace SEVERE \"tar is missing - image must have tar installed \" && exit 1\n+      trace SEVERE \"DomainSourceType is FromModel, tar is missing in the image. Please use an image with tar installed\" && exit 1\n+    fi\n+    command -v unzip\n+    if [ $? -ne 0 ] ; then\n+      trace SEVERE \"DomainSourceType is FromModel, unzip is missing in the image. Please use an image with unzip installed\" && exit 1\n     fi\n     mkdir -p ${DOMAIN_HOME}\n     if [ $? -ne 0 ] ; then\n-      trace SEVERE \"cannot create domain home directory '${DOMAIN_HOME}'\" && exit 1\n+      trace SEVERE \"DomainSourceType is FromModel, cannot create domain home directory '${DOMAIN_HOME}'\" && exit 1", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjY4NjgxOQ=="}, "originalCommit": {"oid": "edc548f89223143b3c58b5e69269693477e5128a"}, "originalPosition": 19}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY1NzQzNzA4OnYy", "diffSide": "RIGHT", "path": "operator/src/main/resources/scripts/introspectDomain.sh", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxNTowMDoyMFrOGW7ItA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQyMDoxMDoxOFrOGXF53A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjY5MDc0MA==", "bodyText": "Minor nit:  It'd be nice to put a test file in the domain home directory just to verify that it's  accessible - so we can  'fail fast' when hitting a directory access issue.\ntouch ${DOMAIN_HOME}/testaccess.tmp\nif [ $? -ne 0 ]; then\nyadayada Cannot write to domain home directory '${DOMAIN_HOME}' yadayayada\nexit 1\nfi\nrm -f ${DOMAIN_HOME}/testaccess.tmp", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1659#discussion_r426690740", "createdAt": "2020-05-18T15:00:20Z", "author": {"login": "tbarnes-us"}, "path": "operator/src/main/resources/scripts/introspectDomain.sh", "diffHunk": "@@ -119,19 +119,23 @@ if [ ${DOMAIN_SOURCE_TYPE} == \"FromModel\" ]; then\n     trace \"Beginning Model In Image\"\n     command -v gzip\n     if [ $? -ne 0 ] ; then\n-      trace SEVERE \"gzip is missing - image must have gzip installed \" && exit 1\n+      trace SEVERE \"DomainSourceType is FromModel, gzip is missing in the image. Please use an image with gzip installed\" && exit 1\n     fi\n     command -v tar\n     if [ $? -ne 0 ] ; then\n-      trace SEVERE \"tar is missing - image must have tar installed \" && exit 1\n+      trace SEVERE \"DomainSourceType is FromModel, tar is missing in the image. Please use an image with tar installed\" && exit 1\n+    fi\n+    command -v unzip\n+    if [ $? -ne 0 ] ; then\n+      trace SEVERE \"DomainSourceType is FromModel, unzip is missing in the image. Please use an image with unzip installed\" && exit 1\n     fi\n     mkdir -p ${DOMAIN_HOME}\n     if [ $? -ne 0 ] ; then\n-      trace SEVERE \"cannot create domain home directory '${DOMAIN_HOME}'\" && exit 1\n+      trace SEVERE \"DomainSourceType is FromModel, cannot create domain home directory '${DOMAIN_HOME}'\" && exit 1\n     fi", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "edc548f89223143b3c58b5e69269693477e5128a"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjg2NzE2NA==", "bodyText": "done", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1659#discussion_r426867164", "createdAt": "2020-05-18T20:10:18Z", "author": {"login": "jshum2479"}, "path": "operator/src/main/resources/scripts/introspectDomain.sh", "diffHunk": "@@ -119,19 +119,23 @@ if [ ${DOMAIN_SOURCE_TYPE} == \"FromModel\" ]; then\n     trace \"Beginning Model In Image\"\n     command -v gzip\n     if [ $? -ne 0 ] ; then\n-      trace SEVERE \"gzip is missing - image must have gzip installed \" && exit 1\n+      trace SEVERE \"DomainSourceType is FromModel, gzip is missing in the image. Please use an image with gzip installed\" && exit 1\n     fi\n     command -v tar\n     if [ $? -ne 0 ] ; then\n-      trace SEVERE \"tar is missing - image must have tar installed \" && exit 1\n+      trace SEVERE \"DomainSourceType is FromModel, tar is missing in the image. Please use an image with tar installed\" && exit 1\n+    fi\n+    command -v unzip\n+    if [ $? -ne 0 ] ; then\n+      trace SEVERE \"DomainSourceType is FromModel, unzip is missing in the image. Please use an image with unzip installed\" && exit 1\n     fi\n     mkdir -p ${DOMAIN_HOME}\n     if [ $? -ne 0 ] ; then\n-      trace SEVERE \"cannot create domain home directory '${DOMAIN_HOME}'\" && exit 1\n+      trace SEVERE \"DomainSourceType is FromModel, cannot create domain home directory '${DOMAIN_HOME}'\" && exit 1\n     fi", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjY5MDc0MA=="}, "originalCommit": {"oid": "edc548f89223143b3c58b5e69269693477e5128a"}, "originalPosition": 20}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY1ODUzNDA4OnYy", "diffSide": "RIGHT", "path": "operator/src/main/resources/scripts/introspectDomain.sh", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQyMDoxMToyN1rOGXF7yQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQyMDoxMToyN1rOGXF7yQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjg2NzY1Nw==", "bodyText": "Missing period.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1659#discussion_r426867657", "createdAt": "2020-05-18T20:11:27Z", "author": {"login": "tbarnes-us"}, "path": "operator/src/main/resources/scripts/introspectDomain.sh", "diffHunk": "@@ -119,20 +119,25 @@ if [ ${DOMAIN_SOURCE_TYPE} == \"FromModel\" ]; then\n     trace \"Beginning Model In Image\"\n     command -v gzip\n     if [ $? -ne 0 ] ; then\n-      trace SEVERE \"DomainSourceType is FromModel, gzip is missing in the image. Please use an image with gzip installed\" && exit 1\n+      trace SEVERE \"DomainSourceType is FromModel, 'gzip' is missing in the image. Please use an image with 'gzip' installed\" && exit 1\n     fi\n     command -v tar\n     if [ $? -ne 0 ] ; then\n-      trace SEVERE \"DomainSourceType is FromModel, tar is missing in the image. Please use an image with tar installed\" && exit 1\n+      trace SEVERE \"DomainSourceType is FromModel, 'tar' is missing in the image. Please use an image with 'tar' installed\" && exit 1\n     fi\n     command -v unzip\n     if [ $? -ne 0 ] ; then\n-      trace SEVERE \"DomainSourceType is FromModel, unzip is missing in the image. Please use an image with unzip installed\" && exit 1\n+      trace SEVERE \"DomainSourceType is FromModel, 'unzip' is missing in the image. Please use an image with 'unzip' installed\" && exit 1\n     fi\n     mkdir -p ${DOMAIN_HOME}\n     if [ $? -ne 0 ] ; then\n       trace SEVERE \"DomainSourceType is FromModel, cannot create domain home directory '${DOMAIN_HOME}'\" && exit 1\n     fi\n+    touch ${DOMAIN_HOME}/testaccess.tmp\n+    if [ $? -ne 0 ]; then\n+      trace SEVERE \"DomainSourceType is FromModel, cannot write to domain home directory '${DOMAIN_HOME}'\" && exit 1", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "18d63354bc55cacbde30ed3b544c4c6275db78a4"}, "originalPosition": 23}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4572, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}