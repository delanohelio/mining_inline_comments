{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAxNjY2NzY3", "number": 1977, "title": "add tests for terminating SSL at LB to access console and servers", "bodyText": "Add tests for terminating SSL at LB to access console and servers, including NGINX, Voyager and Traefik.\nJenkins result:\nhttps://build.weblogick8s.org:8443/job/weblogic-kubernetes-operator-kind-new/2638/\nhttps://build.weblogick8s.org:8443/job/weblogic-kubernetes-operator-kind-new/2643/\nhttps://build.weblogick8s.org:8443/job/weblogic-kubernetes-operator-kind-new/2645/", "createdAt": "2020-10-12T15:56:48Z", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1977", "merged": true, "mergeCommit": {"oid": "b3a5ee91ee7a6dd4e1abfc870455078616d67058"}, "closed": true, "closedAt": "2020-10-23T17:29:07Z", "author": {"login": "xiancao"}, "timelineItems": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdQ8tO4AH2gAyNTAxNjY2NzY3OmZiYmM0ODVhOTUwYzMwMTMyYjhmNWJjMzJhN2UyYWMwNzEwNDMxMTU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdVZTvZAFqTUxNTgzMjg4OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "fbbc485a950c30132b8f5bc32a7e2ac071043115", "author": {"user": {"login": "xiancao", "name": "Xian Cao"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/fbbc485a950c30132b8f5bc32a7e2ac071043115", "committedDate": "2020-10-09T21:03:44Z", "message": "add tests for terminating ssl at LB to access console and servers"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA4NTMxNDQz", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1977#pullrequestreview-508531443", "createdAt": "2020-10-14T16:35:57Z", "commit": {"oid": "fbbc485a950c30132b8f5bc32a7e2ac071043115"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fd34709e44f57fc9f4a056353a332991c2432b32", "author": {"user": {"login": "xiancao", "name": "Xian Cao"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/fd34709e44f57fc9f4a056353a332991c2432b32", "committedDate": "2020-10-15T16:05:45Z", "message": "Merge branch 'develop' of https://github.com/oracle/weblogic-kubernetes-operator into xc-owls85070"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA5NTk1NjIw", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1977#pullrequestreview-509595620", "createdAt": "2020-10-15T17:09:47Z", "commit": {"oid": "fd34709e44f57fc9f4a056353a332991c2432b32"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQxNzowOTo0N1rOHiRzrQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQxNzowOTo0N1rOHiRzrQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTcwNTM4OQ==", "bodyText": "As we discussed, can u pass extra headers in curl command while accessing the console as follows ...\n-H \"WL-Proxy-Client-IP: 120.1.1.0\" -H \"WL-Proxy-SSL: false\"  and make sure that this header does not appear in  adminserver log.\nTo get this header info you need to add the following DebugFlag on server startup args\n-Dweblogic.http.isWLProxyHeadersAccessible=true -Dweblogic.debug.DebugHttp=true -Dweblogic.StdoutDebugEnabled=true", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1977#discussion_r505705389", "createdAt": "2020-10-15T17:09:47Z", "author": {"login": "anpanigr"}, "path": "integration-tests/src/test/java/oracle/weblogic/kubernetes/ItTwoDomainsLoadBalancers.java", "diffHunk": "@@ -1761,38 +1962,53 @@ private static void deployApplication(String namespace, String domainUid, String\n     assertEquals(\"202\", result.stdout(), \"Deployment didn't return HTTP status code 202\");\n   }\n \n-  private void verifyAdminServerAccess(String domainUid) {\n-    String consoleUrl = new StringBuffer()\n-        .append(\"http://\")\n-        .append(K8S_NODEPORT_HOST)\n+  private void verifyAdminServerAccess(boolean isTLS,\n+                                       int lbNodePort,\n+                                       boolean isHostRouting,\n+                                       String ingressHostName,\n+                                       String pathLocation) {\n+\n+    StringBuffer consoleUrl = new StringBuffer();\n+    if (isTLS) {\n+      consoleUrl.append(\"https://\");\n+    } else {\n+      consoleUrl.append(\"http://\");\n+    }\n+    consoleUrl.append(K8S_NODEPORT_HOST)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fd34709e44f57fc9f4a056353a332991c2432b32"}, "originalPosition": 271}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d8d70b5a6e9d7dc7499ee3a8f12b00348ca2873d", "author": {"user": {"login": "xiancao", "name": "Xian Cao"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/d8d70b5a6e9d7dc7499ee3a8f12b00348ca2873d", "committedDate": "2020-10-16T01:25:57Z", "message": "address Pani's comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9a201c61a3cb44dc817bec595f0af4df36c59d35", "author": {"user": {"login": "xiancao", "name": "Xian Cao"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/9a201c61a3cb44dc817bec595f0af4df36c59d35", "committedDate": "2020-10-16T01:26:16Z", "message": "Merge branch 'develop' of https://github.com/oracle/weblogic-kubernetes-operator into xc-owls85070"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "84b155f9ef3d07df15e773c487f27017cbd8b20d", "author": {"user": {"login": "xiancao", "name": "Xian Cao"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/84b155f9ef3d07df15e773c487f27017cbd8b20d", "committedDate": "2020-10-16T19:58:08Z", "message": "Merge branch 'develop' of https://github.com/oracle/weblogic-kubernetes-operator into xc-owls85070"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "48d644b6cbdbd23b61a6ec14d3b1bc70081450d7", "author": {"user": {"login": "xiancao", "name": "Xian Cao"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/48d644b6cbdbd23b61a6ec14d3b1bc70081450d7", "committedDate": "2020-10-16T21:41:00Z", "message": "fix traefik annotation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9265936bebbac5934a3402d4a2ecadc58f097ed4", "author": {"user": {"login": "xiancao", "name": "Xian Cao"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/9265936bebbac5934a3402d4a2ecadc58f097ed4", "committedDate": "2020-10-21T16:37:35Z", "message": "Merge branch 'develop' of https://github.com/oracle/weblogic-kubernetes-operator into xc-owls85070"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "790cb08ee8a8cbd45a330504481728e996e35232", "author": {"user": {"login": "xiancao", "name": "Xian Cao"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/790cb08ee8a8cbd45a330504481728e996e35232", "committedDate": "2020-10-21T20:44:04Z", "message": "Merge branch 'develop' of https://github.com/oracle/weblogic-kubernetes-operator into xc-owls85070"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4c3fba947db3609ca578ab27ca573dc8b88baa58", "author": {"user": {"login": "xiancao", "name": "Xian Cao"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/4c3fba947db3609ca578ab27ca573dc8b88baa58", "committedDate": "2020-10-22T21:38:07Z", "message": "add header in traefik ingress rules"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0339ee9a0fd6a479d87e4a517bbc485954627faf", "author": {"user": {"login": "xiancao", "name": "Xian Cao"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/0339ee9a0fd6a479d87e4a517bbc485954627faf", "committedDate": "2020-10-22T21:38:16Z", "message": "Merge branch 'develop' of https://github.com/oracle/weblogic-kubernetes-operator into xc-owls85070"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "73c76557424411362aece279b544feb45483d920", "author": {"user": {"login": "xiancao", "name": "Xian Cao"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/73c76557424411362aece279b544feb45483d920", "committedDate": "2020-10-22T21:41:53Z", "message": "cleanup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e2c7b5cbc945632941b71e6ecba5ced7b5e462f3", "author": {"user": {"login": "xiancao", "name": "Xian Cao"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/e2c7b5cbc945632941b71e6ecba5ced7b5e462f3", "committedDate": "2020-10-22T22:17:40Z", "message": "Merge branch 'develop' of https://github.com/oracle/weblogic-kubernetes-operator into xc-owls85070"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE1ODMyODg4", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1977#pullrequestreview-515832888", "createdAt": "2020-10-23T16:38:50Z", "commit": {"oid": "e2c7b5cbc945632941b71e6ecba5ced7b5e462f3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4230, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}