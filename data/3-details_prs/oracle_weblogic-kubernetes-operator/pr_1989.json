{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAzNDk0NzM5", "number": 1989, "title": "copy out scalingAction.log from admin pod when scaling cluster with WLDF", "bodyText": "When scaling cluster with WLDF, sometime we need to check scalingAction.log for the root cause of the failure. Copy it out to the ittestsresults directory.\nJenkins result:\nhttps://build.weblogick8s.org:8443/view/all/job/weblogic-kubernetes-operator-kind-new/2407/\nhttps://build.weblogick8s.org:8443/view/all/job/weblogic-kubernetes-operator-kind-new/2403/\nhttps://build.weblogick8s.org:8443/view/all/job/weblogic-kubernetes-operator-kind-new/2402/\nhttps://build.weblogick8s.org:8443/view/all/job/weblogic-kubernetes-operator-kind-new/2401/", "createdAt": "2020-10-14T16:26:23Z", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1989", "merged": true, "mergeCommit": {"oid": "820350b349d14c868bebb5ce50d6fe342e5b344b"}, "closed": true, "closedAt": "2020-10-15T14:03:02Z", "author": {"login": "xiancao"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdSQBDNAH2gAyNTAzNDk0NzM5OjdjNTQyOTc4ZDE3ZjhjYTEwODRmZGIyODRiZjFkYzY2ZWZmMWUzOGQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdSko0DAFqTUwODgwNDg1OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "7c542978d17f8ca1084fdb284bf1dc66eff1e38d", "author": {"user": {"login": "xiancao", "name": "Xian Cao"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/7c542978d17f8ca1084fdb284bf1dc66eff1e38d", "committedDate": "2020-10-13T22:07:30Z", "message": "copy scalingAction.sh from admin server pod"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "61317976f908e9e781b0a78e2ff756c48ca41aa3", "author": {"user": {"login": "xiancao", "name": "Xian Cao"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/61317976f908e9e781b0a78e2ff756c48ca41aa3", "committedDate": "2020-10-13T22:08:49Z", "message": "Merge branch 'develop' of https://github.com/oracle/weblogic-kubernetes-operator into xc-owls85322"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "91f7807250224bdd144d44bc26947a0fd5076e95", "author": {"user": {"login": "xiancao", "name": "Xian Cao"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/91f7807250224bdd144d44bc26947a0fd5076e95", "committedDate": "2020-10-13T22:24:24Z", "message": "add retry when copyfile from pod"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "faf00959684974a1c9c70f90505cd1f1be501cb4", "author": {"user": {"login": "xiancao", "name": "Xian Cao"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/faf00959684974a1c9c70f90505cd1f1be501cb4", "committedDate": "2020-10-14T00:00:02Z", "message": "cleanup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bcc79c7848da1b338075a07194dcc3d8c0fe5399", "author": {"user": {"login": "xiancao", "name": "Xian Cao"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/bcc79c7848da1b338075a07194dcc3d8c0fe5399", "committedDate": "2020-10-14T00:14:17Z", "message": "cleanup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "06783a01d1ef294db5a4d8c1bc5d2b0a7d1d6f3c", "author": {"user": {"login": "xiancao", "name": "Xian Cao"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/06783a01d1ef294db5a4d8c1bc5d2b0a7d1d6f3c", "committedDate": "2020-10-14T04:00:10Z", "message": "update javadoc"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA4NTMzNTUz", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1989#pullrequestreview-508533553", "createdAt": "2020-10-14T16:38:27Z", "commit": {"oid": "06783a01d1ef294db5a4d8c1bc5d2b0a7d1d6f3c"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "11de1a23b9225f7f18e7370579496784ca3686f8", "author": {"user": {"login": "xiancao", "name": "Xian Cao"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/11de1a23b9225f7f18e7370579496784ca3686f8", "committedDate": "2020-10-14T17:51:54Z", "message": "add copyFileFromPod to FileUtils"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA4NjM2MDQ3", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1989#pullrequestreview-508636047", "createdAt": "2020-10-14T18:52:15Z", "commit": {"oid": "11de1a23b9225f7f18e7370579496784ca3686f8"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA4NjQyNDg4", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1989#pullrequestreview-508642488", "createdAt": "2020-10-14T19:01:14Z", "commit": {"oid": "11de1a23b9225f7f18e7370579496784ca3686f8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxOTowMToxNFrOHhg-JA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxOTowMToxNFrOHhg-JA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDkwNTI1Mg==", "bodyText": "Even though copyFileFromPod() was moved to FileUtils, you just going to call it directly in Kubernetes or shouldn't this be changed to use FileUtils?", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1989#discussion_r504905252", "createdAt": "2020-10-14T19:01:14Z", "author": {"login": "lennyphan"}, "path": "integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/impl/Domain.java", "diffHunk": "@@ -684,4 +698,33 @@ private static boolean executeCommandOnPod(V1Pod pod,\n \n     return true;\n   }\n+\n+  /**\n+   * Copy a file from Kubernetes pod to local filesystem.\n+   * @param namespace namespace of the pod\n+   * @param pod name of the pod where the file is copied from\n+   * @param container name of the container\n+   * @param srcPath source file location on the pod\n+   * @param destPath destination file location in local filesystem\n+   * @return true if no exception thrown, false otherwise\n+   */\n+  private static boolean copyFileFromPod(String namespace,\n+                                         String pod,\n+                                         String container,\n+                                         String srcPath,\n+                                         Path destPath) {\n+    try {\n+      getLogger().info(\"Copy file {0} from pod {1} in namespace {2} to {3}\", srcPath, pod, namespace, destPath);\n+      Kubernetes.copyFileFromPod(namespace, pod, container, srcPath, destPath);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "11de1a23b9225f7f18e7370579496784ca3686f8"}, "originalPosition": 49}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4a74ff2eafcf805b658287551de226adbe28ae36", "author": {"user": {"login": "xiancao", "name": "Xian Cao"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/4a74ff2eafcf805b658287551de226adbe28ae36", "committedDate": "2020-10-14T21:58:11Z", "message": "address Lenny's comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA4ODA0ODU5", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1989#pullrequestreview-508804859", "createdAt": "2020-10-14T22:09:02Z", "commit": {"oid": "4a74ff2eafcf805b658287551de226adbe28ae36"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4243, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}