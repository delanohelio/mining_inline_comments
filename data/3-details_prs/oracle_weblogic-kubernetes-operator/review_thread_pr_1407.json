{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY4MzEyODQy", "number": 1407, "reviewThreads": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxMzoyOTowOVrODbkhsQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNlQyMzo0MToyN1rODd3j3g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMwMjM2NTkzOnYy", "diffSide": "RIGHT", "path": "kubernetes/samples/charts/util/setup.sh", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxMzoyOTowOVrOFjIVVw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxNzo1NTo1NFrOFjR9Iw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjM4MTAxNQ==", "bodyText": "This is incorrect.  It should be ,, so \"2018, 2020\"", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1407#discussion_r372381015", "createdAt": "2020-01-29T13:29:09Z", "author": {"login": "rjeberhard"}, "path": "kubernetes/samples/charts/util/setup.sh", "diffHunk": "@@ -1,12 +1,36 @@\n #!/bin/bash\n-# Copyright (c) 2018, 2019, Oracle Corporation and/or its affiliates.  All rights reserved.\n+# Copyright (c) 2018,2019,2020 Oracle Corporation and/or its affiliates.  All rights reserved.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b9bebab203f6bd15e3a47afd2f027987f1f2e20"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjUzODY1OQ==", "bodyText": "Resolved in latest update", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1407#discussion_r372538659", "createdAt": "2020-01-29T17:55:54Z", "author": {"login": "anpanigr"}, "path": "kubernetes/samples/charts/util/setup.sh", "diffHunk": "@@ -1,12 +1,36 @@\n #!/bin/bash\n-# Copyright (c) 2018, 2019, Oracle Corporation and/or its affiliates.  All rights reserved.\n+# Copyright (c) 2018,2019,2020 Oracle Corporation and/or its affiliates.  All rights reserved.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjM4MTAxNQ=="}, "originalCommit": {"oid": "9b9bebab203f6bd15e3a47afd2f027987f1f2e20"}, "originalPosition": 3}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMwMjM2NzQwOnYy", "diffSide": "RIGHT", "path": "kubernetes/samples/charts/util/setup.sh", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxMzoyOTo0MFrOFjIWPw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxNzo1OTo1N1rOFjSFDw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjM4MTI0Nw==", "bodyText": "uninstalled", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1407#discussion_r372381247", "createdAt": "2020-01-29T13:29:40Z", "author": {"login": "rjeberhard"}, "path": "kubernetes/samples/charts/util/setup.sh", "diffHunk": "@@ -130,12 +154,12 @@ function deleteVoyager() {\n }\n \n function deleteTraefik() {\n-  if [ \"$(helm list | grep $TNAME |  wc -l)\" = 1 ]; then\n-    echo \"Delete Traefik operator.\" \n-    helm delete --purge $TNAME\n-    kubectl delete ns traefik\n+  if [ \"$(helm list ${t_list_args}| grep $TNAME |  wc -l)\" = 1 ]; then\n+    echo \"Uninstall Traefik operator.\" \n+    helm uninstall $TNAME ${t_uninstall_args}\n+    kubectl delete ns ${TSPACE}\n   else\n-    echo \"Traefik operator has already been deleted.\" \n+    echo \"Traefik operator has already been unistalled\" ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b9bebab203f6bd15e3a47afd2f027987f1f2e20"}, "originalPosition": 117}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjU0MDY4Nw==", "bodyText": "Now using delete command instead of uninstall.  Uninstall does not work in 2.x version\n3.x -  helm delete --keep-history\n2.x -  helm delete --purge   ( purge not supported )", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1407#discussion_r372540687", "createdAt": "2020-01-29T17:59:57Z", "author": {"login": "anpanigr"}, "path": "kubernetes/samples/charts/util/setup.sh", "diffHunk": "@@ -130,12 +154,12 @@ function deleteVoyager() {\n }\n \n function deleteTraefik() {\n-  if [ \"$(helm list | grep $TNAME |  wc -l)\" = 1 ]; then\n-    echo \"Delete Traefik operator.\" \n-    helm delete --purge $TNAME\n-    kubectl delete ns traefik\n+  if [ \"$(helm list ${t_list_args}| grep $TNAME |  wc -l)\" = 1 ]; then\n+    echo \"Uninstall Traefik operator.\" \n+    helm uninstall $TNAME ${t_uninstall_args}\n+    kubectl delete ns ${TSPACE}\n   else\n-    echo \"Traefik operator has already been deleted.\" \n+    echo \"Traefik operator has already been unistalled\" ", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjM4MTI0Nw=="}, "originalCommit": {"oid": "9b9bebab203f6bd15e3a47afd2f027987f1f2e20"}, "originalPosition": 117}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMwMjM2ODUxOnYy", "diffSide": "RIGHT", "path": "kubernetes/samples/charts/util/setup.sh", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxMzozMDowNlrOFjIXBw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxODowMDowOFrOFjSFdg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjM4MTQ0Nw==", "bodyText": "Uninstalling?", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1407#discussion_r372381447", "createdAt": "2020-01-29T13:30:06Z", "author": {"login": "rjeberhard"}, "path": "kubernetes/samples/charts/util/setup.sh", "diffHunk": "@@ -130,12 +154,12 @@ function deleteVoyager() {\n }\n \n function deleteTraefik() {\n-  if [ \"$(helm list | grep $TNAME |  wc -l)\" = 1 ]; then\n-    echo \"Delete Traefik operator.\" \n-    helm delete --purge $TNAME\n-    kubectl delete ns traefik\n+  if [ \"$(helm list ${t_list_args}| grep $TNAME |  wc -l)\" = 1 ]; then\n+    echo \"Uninstall Traefik operator.\" ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b9bebab203f6bd15e3a47afd2f027987f1f2e20"}, "originalPosition": 112}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjU0MDc5MA==", "bodyText": "Resolved", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1407#discussion_r372540790", "createdAt": "2020-01-29T18:00:08Z", "author": {"login": "anpanigr"}, "path": "kubernetes/samples/charts/util/setup.sh", "diffHunk": "@@ -130,12 +154,12 @@ function deleteVoyager() {\n }\n \n function deleteTraefik() {\n-  if [ \"$(helm list | grep $TNAME |  wc -l)\" = 1 ]; then\n-    echo \"Delete Traefik operator.\" \n-    helm delete --purge $TNAME\n-    kubectl delete ns traefik\n+  if [ \"$(helm list ${t_list_args}| grep $TNAME |  wc -l)\" = 1 ]; then\n+    echo \"Uninstall Traefik operator.\" ", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjM4MTQ0Nw=="}, "originalCommit": {"oid": "9b9bebab203f6bd15e3a47afd2f027987f1f2e20"}, "originalPosition": 112}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMwMjM2OTE2OnYy", "diffSide": "RIGHT", "path": "kubernetes/samples/charts/util/setup.sh", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxMzozMDoxN1rOFjIXbA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxODowMDoxNlrOFjSFzQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjM4MTU0OA==", "bodyText": "Uninstalling?", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1407#discussion_r372381548", "createdAt": "2020-01-29T13:30:17Z", "author": {"login": "rjeberhard"}, "path": "kubernetes/samples/charts/util/setup.sh", "diffHunk": "@@ -111,13 +135,13 @@ function purgeCRDs() {\n }\n \n function deleteVoyager() {\n-  if [ \"$(helm list | grep $VNAME |  wc -l)\" = 1 ]; then\n-    echo \"Delete Voyager Operator. \"\n-    helm delete --purge $VNAME \n-    kubectl delete ns voyager\n+  if [ \"$(helm list ${v_list_args} | grep $VNAME |  wc -l)\" = 1 ]; then\n+    echo \"Uninstall Voyager Operator. \"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b9bebab203f6bd15e3a47afd2f027987f1f2e20"}, "originalPosition": 93}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjU0MDg3Nw==", "bodyText": "Resolved", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1407#discussion_r372540877", "createdAt": "2020-01-29T18:00:16Z", "author": {"login": "anpanigr"}, "path": "kubernetes/samples/charts/util/setup.sh", "diffHunk": "@@ -111,13 +135,13 @@ function purgeCRDs() {\n }\n \n function deleteVoyager() {\n-  if [ \"$(helm list | grep $VNAME |  wc -l)\" = 1 ]; then\n-    echo \"Delete Voyager Operator. \"\n-    helm delete --purge $VNAME \n-    kubectl delete ns voyager\n+  if [ \"$(helm list ${v_list_args} | grep $VNAME |  wc -l)\" = 1 ]; then\n+    echo \"Uninstall Voyager Operator. \"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjM4MTU0OA=="}, "originalCommit": {"oid": "9b9bebab203f6bd15e3a47afd2f027987f1f2e20"}, "originalPosition": 93}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMwMjk1MDQ1OnYy", "diffSide": "RIGHT", "path": "kubernetes/samples/charts/util/setup.sh", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxNjowMDozMFrOFjN7kA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxODowMToxNFrOFjSHqQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjQ3MjcyMA==", "bodyText": "Reverse the logic here and check for V2 instead of V3 (more future proofing).", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1407#discussion_r372472720", "createdAt": "2020-01-29T16:00:30Z", "author": {"login": "tbarnes-us"}, "path": "kubernetes/samples/charts/util/setup.sh", "diffHunk": "@@ -1,12 +1,36 @@\n #!/bin/bash\n-# Copyright (c) 2018, 2019, Oracle Corporation and/or its affiliates.  All rights reserved.\n+# Copyright (c) 2018,2019,2020 Oracle Corporation and/or its affiliates.  All rights reserved.\n # Licensed under the Universal Permissive License v 1.0 as shown at https://oss.oracle.com/licenses/upl.\n \n #  This script is to create or delete Ingress controllers. We support two ingress controllers: traefik and voyager.\n \n MYDIR=\"$(dirname \"$(readlink -f \"$0\")\")\"\n VNAME=voyager-operator  # release name of Voyager\n TNAME=traefik-operator  # release name of Traefik\n+VSPACE=voyager # NameSpace for Voyager\n+TSPACE=traefik   # NameSpace for Traefik\n+\n+helm version --short | grep v3\n+[[ $? == 0 ]] && HELM_VERSION=V3\n+[[ $? == 1 ]] && HELM_VERSION=V2\n+\n+echo \"Detected Helm Version [$HELM_VERSION]\"\n+\n+if [ \"$HELM_VERSION\" == \"V3\" ]; then", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b9bebab203f6bd15e3a47afd2f027987f1f2e20"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjU0MTM1Mw==", "bodyText": "Yes, I reversed the logic in recent commit", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1407#discussion_r372541353", "createdAt": "2020-01-29T18:01:14Z", "author": {"login": "anpanigr"}, "path": "kubernetes/samples/charts/util/setup.sh", "diffHunk": "@@ -1,12 +1,36 @@\n #!/bin/bash\n-# Copyright (c) 2018, 2019, Oracle Corporation and/or its affiliates.  All rights reserved.\n+# Copyright (c) 2018,2019,2020 Oracle Corporation and/or its affiliates.  All rights reserved.\n # Licensed under the Universal Permissive License v 1.0 as shown at https://oss.oracle.com/licenses/upl.\n \n #  This script is to create or delete Ingress controllers. We support two ingress controllers: traefik and voyager.\n \n MYDIR=\"$(dirname \"$(readlink -f \"$0\")\")\"\n VNAME=voyager-operator  # release name of Voyager\n TNAME=traefik-operator  # release name of Traefik\n+VSPACE=voyager # NameSpace for Voyager\n+TSPACE=traefik   # NameSpace for Traefik\n+\n+helm version --short | grep v3\n+[[ $? == 0 ]] && HELM_VERSION=V3\n+[[ $? == 1 ]] && HELM_VERSION=V2\n+\n+echo \"Detected Helm Version [$HELM_VERSION]\"\n+\n+if [ \"$HELM_VERSION\" == \"V3\" ]; then", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjQ3MjcyMA=="}, "originalCommit": {"oid": "9b9bebab203f6bd15e3a47afd2f027987f1f2e20"}, "originalPosition": 20}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMwMjk1ODcxOnYy", "diffSide": "RIGHT", "path": "kubernetes/samples/charts/util/setup.sh", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxNjowMjoyN1rOFjOAlw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxODowMToxN1rOFjSHyw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjQ3NDAwNw==", "bodyText": "This logic looks like it will return V2 if the helm version actually returns V4 or later.  Can you grep for v2 instead?  That will future proof this code (assuming V4 and V3 have the same syntax).", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1407#discussion_r372474007", "createdAt": "2020-01-29T16:02:27Z", "author": {"login": "tbarnes-us"}, "path": "kubernetes/samples/charts/util/setup.sh", "diffHunk": "@@ -1,12 +1,36 @@\n #!/bin/bash\n-# Copyright (c) 2018, 2019, Oracle Corporation and/or its affiliates.  All rights reserved.\n+# Copyright (c) 2018,2019,2020 Oracle Corporation and/or its affiliates.  All rights reserved.\n # Licensed under the Universal Permissive License v 1.0 as shown at https://oss.oracle.com/licenses/upl.\n \n #  This script is to create or delete Ingress controllers. We support two ingress controllers: traefik and voyager.\n \n MYDIR=\"$(dirname \"$(readlink -f \"$0\")\")\"\n VNAME=voyager-operator  # release name of Voyager\n TNAME=traefik-operator  # release name of Traefik\n+VSPACE=voyager # NameSpace for Voyager\n+TSPACE=traefik   # NameSpace for Traefik\n+\n+helm version --short | grep v3\n+[[ $? == 0 ]] && HELM_VERSION=V3\n+[[ $? == 1 ]] && HELM_VERSION=V2", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b9bebab203f6bd15e3a47afd2f027987f1f2e20"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjU0MTM4Nw==", "bodyText": "Yes, I reversed the logic in recent commit", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1407#discussion_r372541387", "createdAt": "2020-01-29T18:01:17Z", "author": {"login": "anpanigr"}, "path": "kubernetes/samples/charts/util/setup.sh", "diffHunk": "@@ -1,12 +1,36 @@\n #!/bin/bash\n-# Copyright (c) 2018, 2019, Oracle Corporation and/or its affiliates.  All rights reserved.\n+# Copyright (c) 2018,2019,2020 Oracle Corporation and/or its affiliates.  All rights reserved.\n # Licensed under the Universal Permissive License v 1.0 as shown at https://oss.oracle.com/licenses/upl.\n \n #  This script is to create or delete Ingress controllers. We support two ingress controllers: traefik and voyager.\n \n MYDIR=\"$(dirname \"$(readlink -f \"$0\")\")\"\n VNAME=voyager-operator  # release name of Voyager\n TNAME=traefik-operator  # release name of Traefik\n+VSPACE=voyager # NameSpace for Voyager\n+TSPACE=traefik   # NameSpace for Traefik\n+\n+helm version --short | grep v3\n+[[ $? == 0 ]] && HELM_VERSION=V3\n+[[ $? == 1 ]] && HELM_VERSION=V2", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjQ3NDAwNw=="}, "originalCommit": {"oid": "9b9bebab203f6bd15e3a47afd2f027987f1f2e20"}, "originalPosition": 16}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMwMzQzNjM3OnYy", "diffSide": "RIGHT", "path": "kubernetes/samples/charts/util/setup.sh", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxODoyMToxOVrOFjSt9g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxODoyMToxOVrOFjSt9g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjU1MTE1OA==", "bodyText": "fix copyright line please\n# Copyright (c) 2018, 2020, Oracle Corporation and/or its affiliates.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1407#discussion_r372551158", "createdAt": "2020-01-29T18:21:19Z", "author": {"login": "markxnelson"}, "path": "kubernetes/samples/charts/util/setup.sh", "diffHunk": "@@ -1,12 +1,36 @@\n #!/bin/bash\n-# Copyright (c) 2018, 2019, Oracle Corporation and/or its affiliates.  All rights reserved.\n+# Copyright (c) 2018,2020 Oracle Corporation and/or its affiliates.  All rights reserved.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c81cb9eb80d6eda8f089df05a5cce4e39b27a00"}, "originalPosition": 3}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMwMzQ0MTM5OnYy", "diffSide": "RIGHT", "path": "kubernetes/samples/charts/util/setup.sh", "isResolved": true, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxODoyMjozOVrOFjSxBw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxOToxMDo0NVrOFjUQ0A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjU1MTk0Mw==", "bodyText": "check specifically for the string you want instead of assuming that the lack of presence means it is the other version", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1407#discussion_r372551943", "createdAt": "2020-01-29T18:22:39Z", "author": {"login": "markxnelson"}, "path": "kubernetes/samples/charts/util/setup.sh", "diffHunk": "@@ -1,12 +1,36 @@\n #!/bin/bash\n-# Copyright (c) 2018, 2019, Oracle Corporation and/or its affiliates.  All rights reserved.\n+# Copyright (c) 2018,2020 Oracle Corporation and/or its affiliates.  All rights reserved.\n # Licensed under the Universal Permissive License v 1.0 as shown at https://oss.oracle.com/licenses/upl.\n \n #  This script is to create or delete Ingress controllers. We support two ingress controllers: traefik and voyager.\n \n MYDIR=\"$(dirname \"$(readlink -f \"$0\")\")\"\n VNAME=voyager-operator  # release name of Voyager\n TNAME=traefik-operator  # release name of Traefik\n+VSPACE=voyager # NameSpace for Voyager\n+TSPACE=traefik   # NameSpace for Traefik\n+\n+helm version --short | grep v2", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c81cb9eb80d6eda8f089df05a5cce4e39b27a00"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjU1MjE4NQ==", "bodyText": "this could also fail if the server version string has v2 or v3 in it.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1407#discussion_r372552185", "createdAt": "2020-01-29T18:23:08Z", "author": {"login": "markxnelson"}, "path": "kubernetes/samples/charts/util/setup.sh", "diffHunk": "@@ -1,12 +1,36 @@\n #!/bin/bash\n-# Copyright (c) 2018, 2019, Oracle Corporation and/or its affiliates.  All rights reserved.\n+# Copyright (c) 2018,2020 Oracle Corporation and/or its affiliates.  All rights reserved.\n # Licensed under the Universal Permissive License v 1.0 as shown at https://oss.oracle.com/licenses/upl.\n \n #  This script is to create or delete Ingress controllers. We support two ingress controllers: traefik and voyager.\n \n MYDIR=\"$(dirname \"$(readlink -f \"$0\")\")\"\n VNAME=voyager-operator  # release name of Voyager\n TNAME=traefik-operator  # release name of Traefik\n+VSPACE=voyager # NameSpace for Voyager\n+TSPACE=traefik   # NameSpace for Traefik\n+\n+helm version --short | grep v2", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjU1MTk0Mw=="}, "originalCommit": {"oid": "9c81cb9eb80d6eda8f089df05a5cce4e39b27a00"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjU1MjMxNA==", "bodyText": "add --client", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1407#discussion_r372552314", "createdAt": "2020-01-29T18:23:26Z", "author": {"login": "markxnelson"}, "path": "kubernetes/samples/charts/util/setup.sh", "diffHunk": "@@ -1,12 +1,36 @@\n #!/bin/bash\n-# Copyright (c) 2018, 2019, Oracle Corporation and/or its affiliates.  All rights reserved.\n+# Copyright (c) 2018,2020 Oracle Corporation and/or its affiliates.  All rights reserved.\n # Licensed under the Universal Permissive License v 1.0 as shown at https://oss.oracle.com/licenses/upl.\n \n #  This script is to create or delete Ingress controllers. We support two ingress controllers: traefik and voyager.\n \n MYDIR=\"$(dirname \"$(readlink -f \"$0\")\")\"\n VNAME=voyager-operator  # release name of Voyager\n TNAME=traefik-operator  # release name of Traefik\n+VSPACE=voyager # NameSpace for Voyager\n+TSPACE=traefik   # NameSpace for Traefik\n+\n+helm version --short | grep v2", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjU1MTk0Mw=="}, "originalCommit": {"oid": "9c81cb9eb80d6eda8f089df05a5cce4e39b27a00"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjU1ODI0Ng==", "bodyText": "@markxnelson\n\n\"check specifically for the string you want instead of assuming that the lack of presence means it is the other version\".\n\nThe code assumes v3 or later if v2 is not present so that future version updates beyond v3 don't necessarily break the code.   What do you advise?   Fail if it's not v2 or v3?", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1407#discussion_r372558246", "createdAt": "2020-01-29T18:35:10Z", "author": {"login": "tbarnes-us"}, "path": "kubernetes/samples/charts/util/setup.sh", "diffHunk": "@@ -1,12 +1,36 @@\n #!/bin/bash\n-# Copyright (c) 2018, 2019, Oracle Corporation and/or its affiliates.  All rights reserved.\n+# Copyright (c) 2018,2020 Oracle Corporation and/or its affiliates.  All rights reserved.\n # Licensed under the Universal Permissive License v 1.0 as shown at https://oss.oracle.com/licenses/upl.\n \n #  This script is to create or delete Ingress controllers. We support two ingress controllers: traefik and voyager.\n \n MYDIR=\"$(dirname \"$(readlink -f \"$0\")\")\"\n VNAME=voyager-operator  # release name of Voyager\n TNAME=traefik-operator  # release name of Traefik\n+VSPACE=voyager # NameSpace for Voyager\n+TSPACE=traefik   # NameSpace for Traefik\n+\n+helm version --short | grep v2", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjU1MTk0Mw=="}, "originalCommit": {"oid": "9c81cb9eb80d6eda8f089df05a5cce4e39b27a00"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjU3NjQ2NA==", "bodyText": "From V3 and above there is no tiller deployment.\n[2.x]  helm version --short --client\nClient: v2.16.1+gbbdfe5e\n[3.x]  helm version --short --client\nv3.0.2+g19e47ee\nI have added --client parameter to verify the client only version  as follows ...\nhelm version --short --client | grep v2", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1407#discussion_r372576464", "createdAt": "2020-01-29T19:10:45Z", "author": {"login": "anpanigr"}, "path": "kubernetes/samples/charts/util/setup.sh", "diffHunk": "@@ -1,12 +1,36 @@\n #!/bin/bash\n-# Copyright (c) 2018, 2019, Oracle Corporation and/or its affiliates.  All rights reserved.\n+# Copyright (c) 2018,2020 Oracle Corporation and/or its affiliates.  All rights reserved.\n # Licensed under the Universal Permissive License v 1.0 as shown at https://oss.oracle.com/licenses/upl.\n \n #  This script is to create or delete Ingress controllers. We support two ingress controllers: traefik and voyager.\n \n MYDIR=\"$(dirname \"$(readlink -f \"$0\")\")\"\n VNAME=voyager-operator  # release name of Voyager\n TNAME=traefik-operator  # release name of Traefik\n+VSPACE=voyager # NameSpace for Voyager\n+TSPACE=traefik   # NameSpace for Traefik\n+\n+helm version --short | grep v2", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjU1MTk0Mw=="}, "originalCommit": {"oid": "9c81cb9eb80d6eda8f089df05a5cce4e39b27a00"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMwMzQ0NjE4OnYy", "diffSide": "RIGHT", "path": "kubernetes/samples/charts/util/setup.sh", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxODoyNDowNlrOFjS0BA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxODo0MDowMFrOFjTTHg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjU1MjcwOA==", "bodyText": "why --keep-history and not --purge here?", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1407#discussion_r372552708", "createdAt": "2020-01-29T18:24:06Z", "author": {"login": "markxnelson"}, "path": "kubernetes/samples/charts/util/setup.sh", "diffHunk": "@@ -1,12 +1,36 @@\n #!/bin/bash\n-# Copyright (c) 2018, 2019, Oracle Corporation and/or its affiliates.  All rights reserved.\n+# Copyright (c) 2018,2020 Oracle Corporation and/or its affiliates.  All rights reserved.\n # Licensed under the Universal Permissive License v 1.0 as shown at https://oss.oracle.com/licenses/upl.\n \n #  This script is to create or delete Ingress controllers. We support two ingress controllers: traefik and voyager.\n \n MYDIR=\"$(dirname \"$(readlink -f \"$0\")\")\"\n VNAME=voyager-operator  # release name of Voyager\n TNAME=traefik-operator  # release name of Traefik\n+VSPACE=voyager # NameSpace for Voyager\n+TSPACE=traefik   # NameSpace for Traefik\n+\n+helm version --short | grep v2\n+[[ $? == 0 ]] && HELM_VERSION=V2\n+[[ $? == 1 ]] && HELM_VERSION=V3\n+\n+echo \"Detected Helm Version [$HELM_VERSION]\"\n+\n+if [ \"$HELM_VERSION\" == \"V2\" ]; then\n+   v_list_args=\"\"\n+   t_list_args=\"\"\n+   v_helm_delete=\"helm delete --purge\"\n+   t_helm_delete=\"helm delete --purge\"\n+   v_helm_install=\"helm install appscode/voyager --name $VNAME  \"\n+   t_helm_install=\"helm install stable/traefik --name $TNAME \"\n+else\n+   v_list_args=\"--namespace $VSPACE \"\n+   t_list_args=\"--namespace $TSPACE \"\n+   v_helm_delete=\"helm delete --keep-history --namespace $VSPACE \"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c81cb9eb80d6eda8f089df05a5cce4e39b27a00"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjU2MDY3MA==", "bodyText": "--purge is not supported in 3.x", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1407#discussion_r372560670", "createdAt": "2020-01-29T18:40:00Z", "author": {"login": "anpanigr"}, "path": "kubernetes/samples/charts/util/setup.sh", "diffHunk": "@@ -1,12 +1,36 @@\n #!/bin/bash\n-# Copyright (c) 2018, 2019, Oracle Corporation and/or its affiliates.  All rights reserved.\n+# Copyright (c) 2018,2020 Oracle Corporation and/or its affiliates.  All rights reserved.\n # Licensed under the Universal Permissive License v 1.0 as shown at https://oss.oracle.com/licenses/upl.\n \n #  This script is to create or delete Ingress controllers. We support two ingress controllers: traefik and voyager.\n \n MYDIR=\"$(dirname \"$(readlink -f \"$0\")\")\"\n VNAME=voyager-operator  # release name of Voyager\n TNAME=traefik-operator  # release name of Traefik\n+VSPACE=voyager # NameSpace for Voyager\n+TSPACE=traefik   # NameSpace for Traefik\n+\n+helm version --short | grep v2\n+[[ $? == 0 ]] && HELM_VERSION=V2\n+[[ $? == 1 ]] && HELM_VERSION=V3\n+\n+echo \"Detected Helm Version [$HELM_VERSION]\"\n+\n+if [ \"$HELM_VERSION\" == \"V2\" ]; then\n+   v_list_args=\"\"\n+   t_list_args=\"\"\n+   v_helm_delete=\"helm delete --purge\"\n+   t_helm_delete=\"helm delete --purge\"\n+   v_helm_install=\"helm install appscode/voyager --name $VNAME  \"\n+   t_helm_install=\"helm install stable/traefik --name $TNAME \"\n+else\n+   v_list_args=\"--namespace $VSPACE \"\n+   t_list_args=\"--namespace $TSPACE \"\n+   v_helm_delete=\"helm delete --keep-history --namespace $VSPACE \"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjU1MjcwOA=="}, "originalCommit": {"oid": "9c81cb9eb80d6eda8f089df05a5cce4e39b27a00"}, "originalPosition": 30}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMwMzQ0NzIxOnYy", "diffSide": "RIGHT", "path": "kubernetes/samples/charts/util/setup.sh", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxODoyNDoyNVrOFjS0nA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxODo1MDoxM1rOFjTnTQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjU1Mjg2MA==", "bodyText": "install -> installing", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1407#discussion_r372552860", "createdAt": "2020-01-29T18:24:25Z", "author": {"login": "markxnelson"}, "path": "kubernetes/samples/charts/util/setup.sh", "diffHunk": "@@ -21,11 +45,11 @@ function createVoyager() {\n   fi\n   echo\n \n-  if [ \"$(helm list | grep $VNAME |  wc -l)\" = 0 ]; then\n-    echo \"Ihstall voyager operator.\"\n+  if [ \"$(helm list ${v_list_args} | grep $VNAME |  wc -l)\" = 0 ]; then\n+    echo \"Install voyager operator.\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c81cb9eb80d6eda8f089df05a5cce4e39b27a00"}, "originalPosition": 45}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjU2NTgzNw==", "bodyText": "Done", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1407#discussion_r372565837", "createdAt": "2020-01-29T18:50:13Z", "author": {"login": "anpanigr"}, "path": "kubernetes/samples/charts/util/setup.sh", "diffHunk": "@@ -21,11 +45,11 @@ function createVoyager() {\n   fi\n   echo\n \n-  if [ \"$(helm list | grep $VNAME |  wc -l)\" = 0 ]; then\n-    echo \"Ihstall voyager operator.\"\n+  if [ \"$(helm list ${v_list_args} | grep $VNAME |  wc -l)\" = 0 ]; then\n+    echo \"Install voyager operator.\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjU1Mjg2MA=="}, "originalCommit": {"oid": "9c81cb9eb80d6eda8f089df05a5cce4e39b27a00"}, "originalPosition": 45}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMwMzQ0Nzk2OnYy", "diffSide": "RIGHT", "path": "kubernetes/samples/charts/util/setup.sh", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxODoyNDo0M1rOFjS1Iw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMVQyMzo0NzowMVrOFka1PQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjU1Mjk5NQ==", "bodyText": "probably a good idea to make the voyager version a variable", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1407#discussion_r372552995", "createdAt": "2020-01-29T18:24:43Z", "author": {"login": "markxnelson"}, "path": "kubernetes/samples/charts/util/setup.sh", "diffHunk": "@@ -21,11 +45,11 @@ function createVoyager() {\n   fi\n   echo\n \n-  if [ \"$(helm list | grep $VNAME |  wc -l)\" = 0 ]; then\n-    echo \"Ihstall voyager operator.\"\n+  if [ \"$(helm list ${v_list_args} | grep $VNAME |  wc -l)\" = 0 ]; then\n+    echo \"Install voyager operator.\"\n     \n-    helm install appscode/voyager --name $VNAME --version 7.4.0 \\\n-      --namespace voyager \\\n+    ${v_helm_install} --version 7.4.0 \\", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c81cb9eb80d6eda8f089df05a5cce4e39b27a00"}, "originalPosition": 49}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjU3MTI4NA==", "bodyText": "We are suggesting this as sample on development environment not on production.  Certification Matrix will grow if we verify each version of Voyager which is not in our control. We have already big matrix of K8s Version/Helm Version/Prometheous Version", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1407#discussion_r372571284", "createdAt": "2020-01-29T19:00:39Z", "author": {"login": "anpanigr"}, "path": "kubernetes/samples/charts/util/setup.sh", "diffHunk": "@@ -21,11 +45,11 @@ function createVoyager() {\n   fi\n   echo\n \n-  if [ \"$(helm list | grep $VNAME |  wc -l)\" = 0 ]; then\n-    echo \"Ihstall voyager operator.\"\n+  if [ \"$(helm list ${v_list_args} | grep $VNAME |  wc -l)\" = 0 ]; then\n+    echo \"Install voyager operator.\"\n     \n-    helm install appscode/voyager --name $VNAME --version 7.4.0 \\\n-      --namespace voyager \\\n+    ${v_helm_install} --version 7.4.0 \\", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjU1Mjk5NQ=="}, "originalCommit": {"oid": "9c81cb9eb80d6eda8f089df05a5cce4e39b27a00"}, "originalPosition": 49}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzczMjY2OQ==", "bodyText": "Provide a new Optional Positional Parameter to take Custom Voyager Version\ne.g.\n$ sh setup.sh\nDetected Helm Version [V3]\n[ERROR] Requires atleast 2 positional parameters\nusage: setup.sh create|delete traefik|voyager [voyager version]", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1407#discussion_r373732669", "createdAt": "2020-01-31T23:47:01Z", "author": {"login": "anpanigr"}, "path": "kubernetes/samples/charts/util/setup.sh", "diffHunk": "@@ -21,11 +45,11 @@ function createVoyager() {\n   fi\n   echo\n \n-  if [ \"$(helm list | grep $VNAME |  wc -l)\" = 0 ]; then\n-    echo \"Ihstall voyager operator.\"\n+  if [ \"$(helm list ${v_list_args} | grep $VNAME |  wc -l)\" = 0 ]; then\n+    echo \"Install voyager operator.\"\n     \n-    helm install appscode/voyager --name $VNAME --version 7.4.0 \\\n-      --namespace voyager \\\n+    ${v_helm_install} --version 7.4.0 \\", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjU1Mjk5NQ=="}, "originalCommit": {"oid": "9c81cb9eb80d6eda8f089df05a5cce4e39b27a00"}, "originalPosition": 49}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMyMjA2NTY0OnYy", "diffSide": "RIGHT", "path": "kubernetes/samples/charts/util/setup.sh", "isResolved": true, "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQxOToxMzo0N1rOFmD3Bw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNlQxNTozNDoyN1rOFmffAg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTQ1MzQ0Nw==", "bodyText": "this is still broken\nyou should explicitly check for both V2 and V3, not just check for one and assume it is the other if it fails", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1407#discussion_r375453447", "createdAt": "2020-02-05T19:13:47Z", "author": {"login": "markxnelson"}, "path": "kubernetes/samples/charts/util/setup.sh", "diffHunk": "@@ -1,18 +1,55 @@\n #!/bin/bash\n-# Copyright (c) 2018, 2019, Oracle Corporation and/or its affiliates.  All rights reserved.\n+# Copyright (c) 2018, 2020, Oracle Corporation and/or its affiliates\n # Licensed under the Universal Permissive License v 1.0 as shown at https://oss.oracle.com/licenses/upl.\n \n #  This script is to create or delete Ingress controllers. We support two ingress controllers: traefik and voyager.\n \n MYDIR=\"$(dirname \"$(readlink -f \"$0\")\")\"\n VNAME=voyager-operator  # release name of Voyager\n TNAME=traefik-operator  # release name of Traefik\n+VSPACE=voyager # NameSpace for Voyager\n+TSPACE=traefik   # NameSpace for Traefik\n+DefaultVoyagerVersion=7.4.0\n+\n+helm version --short --client | grep v2\n+[[ $? == 0 ]] && HELM_VERSION=V2", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b67f132ceeabdd94500633058388f22982cd0354"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTQ5NjQ5Mw==", "bodyText": "Here V3 represent any version  above v3 so that we do not have to change the script for future version ( v4,v5) provided the syntax of the helm command remains unchanged.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1407#discussion_r375496493", "createdAt": "2020-02-05T20:42:04Z", "author": {"login": "anpanigr"}, "path": "kubernetes/samples/charts/util/setup.sh", "diffHunk": "@@ -1,18 +1,55 @@\n #!/bin/bash\n-# Copyright (c) 2018, 2019, Oracle Corporation and/or its affiliates.  All rights reserved.\n+# Copyright (c) 2018, 2020, Oracle Corporation and/or its affiliates\n # Licensed under the Universal Permissive License v 1.0 as shown at https://oss.oracle.com/licenses/upl.\n \n #  This script is to create or delete Ingress controllers. We support two ingress controllers: traefik and voyager.\n \n MYDIR=\"$(dirname \"$(readlink -f \"$0\")\")\"\n VNAME=voyager-operator  # release name of Voyager\n TNAME=traefik-operator  # release name of Traefik\n+VSPACE=voyager # NameSpace for Voyager\n+TSPACE=traefik   # NameSpace for Traefik\n+DefaultVoyagerVersion=7.4.0\n+\n+helm version --short --client | grep v2\n+[[ $? == 0 ]] && HELM_VERSION=V2", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTQ1MzQ0Nw=="}, "originalCommit": {"oid": "b67f132ceeabdd94500633058388f22982cd0354"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTUyODUzMg==", "bodyText": "Updated the script with explicit  Helm Version check\n.....\nhelm version --short --client | grep v2\n[[ $? == 0 ]] && HELM_VERSION=V2\nhelm version --short --client | grep v3\n[[ $? == 0 ]] && HELM_VERSION=V3\n....", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1407#discussion_r375528532", "createdAt": "2020-02-05T21:51:37Z", "author": {"login": "anpanigr"}, "path": "kubernetes/samples/charts/util/setup.sh", "diffHunk": "@@ -1,18 +1,55 @@\n #!/bin/bash\n-# Copyright (c) 2018, 2019, Oracle Corporation and/or its affiliates.  All rights reserved.\n+# Copyright (c) 2018, 2020, Oracle Corporation and/or its affiliates\n # Licensed under the Universal Permissive License v 1.0 as shown at https://oss.oracle.com/licenses/upl.\n \n #  This script is to create or delete Ingress controllers. We support two ingress controllers: traefik and voyager.\n \n MYDIR=\"$(dirname \"$(readlink -f \"$0\")\")\"\n VNAME=voyager-operator  # release name of Voyager\n TNAME=traefik-operator  # release name of Traefik\n+VSPACE=voyager # NameSpace for Voyager\n+TSPACE=traefik   # NameSpace for Traefik\n+DefaultVoyagerVersion=7.4.0\n+\n+helm version --short --client | grep v2\n+[[ $? == 0 ]] && HELM_VERSION=V2", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTQ1MzQ0Nw=="}, "originalCommit": {"oid": "b67f132ceeabdd94500633058388f22982cd0354"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTYwMDA2OA==", "bodyText": "I'm sorry, this is still broken.  What it is not v2 or v3?  what if it is v1? or v4? Your logic will apply the \"v3\" settings in any case that is not v2.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1407#discussion_r375600068", "createdAt": "2020-02-06T01:32:01Z", "author": {"login": "markxnelson"}, "path": "kubernetes/samples/charts/util/setup.sh", "diffHunk": "@@ -1,18 +1,55 @@\n #!/bin/bash\n-# Copyright (c) 2018, 2019, Oracle Corporation and/or its affiliates.  All rights reserved.\n+# Copyright (c) 2018, 2020, Oracle Corporation and/or its affiliates\n # Licensed under the Universal Permissive License v 1.0 as shown at https://oss.oracle.com/licenses/upl.\n \n #  This script is to create or delete Ingress controllers. We support two ingress controllers: traefik and voyager.\n \n MYDIR=\"$(dirname \"$(readlink -f \"$0\")\")\"\n VNAME=voyager-operator  # release name of Voyager\n TNAME=traefik-operator  # release name of Traefik\n+VSPACE=voyager # NameSpace for Voyager\n+TSPACE=traefik   # NameSpace for Traefik\n+DefaultVoyagerVersion=7.4.0\n+\n+helm version --short --client | grep v2\n+[[ $? == 0 ]] && HELM_VERSION=V2", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTQ1MzQ0Nw=="}, "originalCommit": {"oid": "b67f132ceeabdd94500633058388f22982cd0354"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTYwNjM3OA==", "bodyText": "We are NOT supporting V1 and V4 is not available ( how to check )  We will add another condition when V4 is available and it has a different syntax.  If there is no syntax change in future version of Helm, the current logic for V3 will hold good.\nI am open to alternate logic/solution  if you do not agree with the current one.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1407#discussion_r375606378", "createdAt": "2020-02-06T01:59:20Z", "author": {"login": "anpanigr"}, "path": "kubernetes/samples/charts/util/setup.sh", "diffHunk": "@@ -1,18 +1,55 @@\n #!/bin/bash\n-# Copyright (c) 2018, 2019, Oracle Corporation and/or its affiliates.  All rights reserved.\n+# Copyright (c) 2018, 2020, Oracle Corporation and/or its affiliates\n # Licensed under the Universal Permissive License v 1.0 as shown at https://oss.oracle.com/licenses/upl.\n \n #  This script is to create or delete Ingress controllers. We support two ingress controllers: traefik and voyager.\n \n MYDIR=\"$(dirname \"$(readlink -f \"$0\")\")\"\n VNAME=voyager-operator  # release name of Voyager\n TNAME=traefik-operator  # release name of Traefik\n+VSPACE=voyager # NameSpace for Voyager\n+TSPACE=traefik   # NameSpace for Traefik\n+DefaultVoyagerVersion=7.4.0\n+\n+helm version --short --client | grep v2\n+[[ $? == 0 ]] && HELM_VERSION=V2", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTQ1MzQ0Nw=="}, "originalCommit": {"oid": "b67f132ceeabdd94500633058388f22982cd0354"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTkwNjA1MA==", "bodyText": "Sorry about that Mark - I'd advised Pani to 'future proof' by assuming anything that wasn't v2 was v3.  You've advised Pani that we should outright fail if we can't be certain we are v2 or v3.  I'm fine either way but lean towards the former.   (FWIW The reason I advised the former is that (A) I thought this matched the spirit we use throughout the operator. We don't tend to have explicit version checks for various other dependencies throughout and consequently just assume the current syntax/API is supported regardless of version.  This 'future' proofs in the sense that we'll continue to work as long as API doesn't change out from underneath us.  And (B) in particular with respect to detection 'v1' that's a nice to have IMO - we don't document support for or the expected behavior of v1.)", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1407#discussion_r375906050", "createdAt": "2020-02-06T15:34:27Z", "author": {"login": "tbarnes-us"}, "path": "kubernetes/samples/charts/util/setup.sh", "diffHunk": "@@ -1,18 +1,55 @@\n #!/bin/bash\n-# Copyright (c) 2018, 2019, Oracle Corporation and/or its affiliates.  All rights reserved.\n+# Copyright (c) 2018, 2020, Oracle Corporation and/or its affiliates\n # Licensed under the Universal Permissive License v 1.0 as shown at https://oss.oracle.com/licenses/upl.\n \n #  This script is to create or delete Ingress controllers. We support two ingress controllers: traefik and voyager.\n \n MYDIR=\"$(dirname \"$(readlink -f \"$0\")\")\"\n VNAME=voyager-operator  # release name of Voyager\n TNAME=traefik-operator  # release name of Traefik\n+VSPACE=voyager # NameSpace for Voyager\n+TSPACE=traefik   # NameSpace for Traefik\n+DefaultVoyagerVersion=7.4.0\n+\n+helm version --short --client | grep v2\n+[[ $? == 0 ]] && HELM_VERSION=V2", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTQ1MzQ0Nw=="}, "originalCommit": {"oid": "b67f132ceeabdd94500633058388f22982cd0354"}, "originalPosition": 16}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMyNjQ1NTk4OnYy", "diffSide": "RIGHT", "path": "kubernetes/samples/charts/voyager/README.md", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNlQyMzo0MToyN1rOFmuAZg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wN1QwMDoxMjo0MlrOFmujeA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjE0Mzk3NA==", "bodyText": "Pani, you should update the text \"when using Helm 2\" -> \"when using Helm 2 or Helm 3\" as your updated to setup.sh works with Helm 2 or Helm 3.\nIt would also be fine to remove this additional text in whole if you prefer....\nThis text was added for PR#1406 since the script on master only works with Helm 2.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1407#discussion_r376143974", "createdAt": "2020-02-06T23:41:27Z", "author": {"login": "TheFrogPad"}, "path": "kubernetes/samples/charts/voyager/README.md", "diffHunk": "@@ -106,20 +128,26 @@ Then deploy the TLS Ingress.\n ```\n $ kubectl create -f samples/tls.yaml\n ```\n-Now you can access the two WLS domains with different hostnames using the HTTPS endpoint.\n+Now you can access the two WebLogic domains with different host names using the HTTPS endpoint.\n ```\n $ curl -k -H 'host: domain1.org' https://${HOSTNAME}:30305/testwebapp/\n $ curl -k -H 'host: domain2.org' https://${HOSTNAME}:30307/testwebapp/\n ```\n \n ## Uninstall the Voyager Operator\n After removing all the Voyager Ingress resources, uninstall the Voyager operator:\n+\n+Using Helm 3:\n+```\n+$ helm uninstall voyager-operator --namespace voyager\n+```\n+Using Helm 2:\n ```\n $ helm delete --purge voyager-operator\n ```\n \n ## Install and uninstall the Voyager operator with setup.sh\n-Alternatively, you can run the helper script `setup.sh`, under the `kubernetes/samples/charts/util` folder, to install and uninstall Voyager.\n+Alternatively, you can run the helper script `setup.sh` when using Helm 2, under the `kubernetes/samples/charts/util` folder, to install and uninstall Voyager.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5f117f2d0f1370005f2daafe98f938e8772d88a3"}, "originalPosition": 176}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjE1Mjk1Mg==", "bodyText": "setup.sh automatically take care both Helm Version, so no need to mention about Helm Version specific usage.\nAdditionally  now setup.sh take an optional 3rd parameter to download  specific version of Voyager. Let me update the PR", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1407#discussion_r376152952", "createdAt": "2020-02-07T00:12:42Z", "author": {"login": "anpanigr"}, "path": "kubernetes/samples/charts/voyager/README.md", "diffHunk": "@@ -106,20 +128,26 @@ Then deploy the TLS Ingress.\n ```\n $ kubectl create -f samples/tls.yaml\n ```\n-Now you can access the two WLS domains with different hostnames using the HTTPS endpoint.\n+Now you can access the two WebLogic domains with different host names using the HTTPS endpoint.\n ```\n $ curl -k -H 'host: domain1.org' https://${HOSTNAME}:30305/testwebapp/\n $ curl -k -H 'host: domain2.org' https://${HOSTNAME}:30307/testwebapp/\n ```\n \n ## Uninstall the Voyager Operator\n After removing all the Voyager Ingress resources, uninstall the Voyager operator:\n+\n+Using Helm 3:\n+```\n+$ helm uninstall voyager-operator --namespace voyager\n+```\n+Using Helm 2:\n ```\n $ helm delete --purge voyager-operator\n ```\n \n ## Install and uninstall the Voyager operator with setup.sh\n-Alternatively, you can run the helper script `setup.sh`, under the `kubernetes/samples/charts/util` folder, to install and uninstall Voyager.\n+Alternatively, you can run the helper script `setup.sh` when using Helm 2, under the `kubernetes/samples/charts/util` folder, to install and uninstall Voyager.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjE0Mzk3NA=="}, "originalCommit": {"oid": "5f117f2d0f1370005f2daafe98f938e8772d88a3"}, "originalPosition": 176}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4816, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}