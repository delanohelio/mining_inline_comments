{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk2NDMxODUy", "number": 1964, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQyMDo0MjozNlrOEpn9jQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQyMDo1MToxNlrOEpoHBg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEyMDgxODA1OnYy", "diffSide": "RIGHT", "path": "integration-tests/src/test/java/oracle/weblogic/kubernetes/ItParameterizedDomain.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQyMDo0MjozNlrOHbaJ9g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQxODoyMjoyNlrOHb3Z1w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODUwMjEzNA==", "bodyText": "Move the description to javadoc section for the test method", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1964#discussion_r498502134", "createdAt": "2020-10-01T20:42:36Z", "author": {"login": "anpanigr"}, "path": "integration-tests/src/test/java/oracle/weblogic/kubernetes/ItParameterizedDomain.java", "diffHunk": "@@ -444,6 +450,172 @@ public void testLivenessProbe() {\n         .isTrue();\n   }\n \n+  @Test\n+  @DisplayName(\"Test dataHome override in a domain with domain in image type\")\n+  public void testDataHomeOverrideDomainInImage() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "87bbd9d5da8d9afa14685e14717c9b5934479a6c"}, "originalPosition": 75}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODk4MTMzNQ==", "bodyText": "fixed", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1964#discussion_r498981335", "createdAt": "2020-10-02T18:22:26Z", "author": {"login": "xiancao"}, "path": "integration-tests/src/test/java/oracle/weblogic/kubernetes/ItParameterizedDomain.java", "diffHunk": "@@ -444,6 +450,172 @@ public void testLivenessProbe() {\n         .isTrue();\n   }\n \n+  @Test\n+  @DisplayName(\"Test dataHome override in a domain with domain in image type\")\n+  public void testDataHomeOverrideDomainInImage() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODUwMjEzNA=="}, "originalCommit": {"oid": "87bbd9d5da8d9afa14685e14717c9b5934479a6c"}, "originalPosition": 75}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEyMDgyMTcxOnYy", "diffSide": "RIGHT", "path": "integration-tests/src/test/java/oracle/weblogic/kubernetes/ItParameterizedDomain.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQyMDo0NDowM1rOHbaMZw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQxODoyMjozM1rOHb3aEw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODUwMjc1OQ==", "bodyText": "File store and JMS server are targeted to the WebLogic cluster cluster-1", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1964#discussion_r498502759", "createdAt": "2020-10-01T20:44:03Z", "author": {"login": "anpanigr"}, "path": "integration-tests/src/test/java/oracle/weblogic/kubernetes/ItParameterizedDomain.java", "diffHunk": "@@ -444,6 +450,172 @@ public void testLivenessProbe() {\n         .isTrue();\n   }\n \n+  @Test\n+  @DisplayName(\"Test dataHome override in a domain with domain in image type\")\n+  public void testDataHomeOverrideDomainInImage() {\n+    // in this domain, set dataHome to /u01/oracle/mydata in domain custom resource\n+    // the domain contains JMS and File Store configuration\n+    // File store directory is set to /u01/oracle/customFileStore/ in the model file which should be overridden\n+    // by dataHome\n+    // File store and JMS server are target to cluster-1", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "87bbd9d5da8d9afa14685e14717c9b5934479a6c"}, "originalPosition": 80}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODk4MTM5NQ==", "bodyText": "fixed", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1964#discussion_r498981395", "createdAt": "2020-10-02T18:22:33Z", "author": {"login": "xiancao"}, "path": "integration-tests/src/test/java/oracle/weblogic/kubernetes/ItParameterizedDomain.java", "diffHunk": "@@ -444,6 +450,172 @@ public void testLivenessProbe() {\n         .isTrue();\n   }\n \n+  @Test\n+  @DisplayName(\"Test dataHome override in a domain with domain in image type\")\n+  public void testDataHomeOverrideDomainInImage() {\n+    // in this domain, set dataHome to /u01/oracle/mydata in domain custom resource\n+    // the domain contains JMS and File Store configuration\n+    // File store directory is set to /u01/oracle/customFileStore/ in the model file which should be overridden\n+    // by dataHome\n+    // File store and JMS server are target to cluster-1", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODUwMjc1OQ=="}, "originalCommit": {"oid": "87bbd9d5da8d9afa14685e14717c9b5934479a6c"}, "originalPosition": 80}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEyMDgzNTA3OnYy", "diffSide": "RIGHT", "path": "integration-tests/src/test/java/oracle/weblogic/kubernetes/ItParameterizedDomain.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQyMDo0ODo0NlrOHbaVDg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQxODoyMjo0MFrOHb3aTg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODUwNDk3NA==", "bodyText": "Move description to javadoc section\nProvide a complete sentence  [ in this domain, dataHome is not specified ]\ne.g. Create a Domain Resource with defined dataHome.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1964#discussion_r498504974", "createdAt": "2020-10-01T20:48:46Z", "author": {"login": "anpanigr"}, "path": "integration-tests/src/test/java/oracle/weblogic/kubernetes/ItParameterizedDomain.java", "diffHunk": "@@ -444,6 +450,172 @@ public void testLivenessProbe() {\n         .isTrue();\n   }\n \n+  @Test\n+  @DisplayName(\"Test dataHome override in a domain with domain in image type\")\n+  public void testDataHomeOverrideDomainInImage() {\n+    // in this domain, set dataHome to /u01/oracle/mydata in domain custom resource\n+    // the domain contains JMS and File Store configuration\n+    // File store directory is set to /u01/oracle/customFileStore/ in the model file which should be overridden\n+    // by dataHome\n+    // File store and JMS server are target to cluster-1\n+    // see resource/wdt-models/wdt-singlecluster-multiapps-usingprop-wls.yaml\n+    assertDomainNotNull(domainInImage);\n+    String domainUid = domainInImage.getSpec().getDomainUid();\n+    String domainNamespace = domainInImage.getMetadata().getNamespace();\n+\n+    // check in admin server pod, there is no data file for JMS server created\n+    String dataFileToCheck = DATA_HOME_OVERRIDE + \"/\" + domainUid + \"/FILESTORE-0000000.DAT\";\n+    String adminServerPodName = domainUid + \"-\" + ADMIN_SERVER_NAME_BASE;\n+    assertFalse(assertDoesNotThrow(\n+        () -> doesFileExistInPod(domainNamespace, adminServerPodName, dataFileToCheck),\n+        String.format(\"exception thrown when checking file %s exists in pod %s in namespace %s\",\n+            dataFileToCheck, adminServerPodName, domainNamespace)),\n+        String.format(\"%s exists in pod %s in namespace %s, expects not exist\",\n+            dataFileToCheck, adminServerPodName, domainNamespace));\n+\n+    // check in admin server pod, the default admin server data file moved to DATA_HOME_OVERRIDE\n+    String defaultAdminDataFile = DATA_HOME_OVERRIDE + \"/\" + domainUid + \"/_WLS_ADMIN-SERVER000000.DAT\";\n+    assertTrue(assertDoesNotThrow(() ->\n+        doesFileExistInPod(domainNamespace, adminServerPodName, defaultAdminDataFile),\n+        String.format(\"exception thrown when checking file %s exists in pod %s in namespace %s\",\n+            dataFileToCheck, adminServerPodName, domainNamespace)),\n+        String.format(\"can not find file %s in pod %s in namespace %s\",\n+            defaultAdminDataFile, adminServerPodName, domainNamespace));\n+\n+    // check in managed server pod, the custom data file for JMS and default managed server datafile are created\n+    // in DATA_HOME_OVERRIDE\n+    for (int i = 1; i <= replicaCount; i++) {\n+      String managedServerPodName = domainUid + \"-\" + MANAGED_SERVER_NAME_BASE + i;\n+      String customDataFile = DATA_HOME_OVERRIDE + \"/\" + domainUid + \"/FILESTORE-0@MANAGED-SERVER\" + i + \"000000.DAT\";\n+      assertTrue(assertDoesNotThrow(() ->\n+              doesFileExistInPod(domainNamespace, managedServerPodName, customDataFile),\n+          String.format(\"exception thrown when checking file %s exists in pod %s in namespace %s\",\n+              customDataFile, managedServerPodName, domainNamespace)),\n+          String.format(\"can not find file %s in pod %s in namespace %s\",\n+              customDataFile, managedServerPodName, domainNamespace));\n+\n+      String defaultMSDataFile = DATA_HOME_OVERRIDE + \"/\" + domainUid + \"/_WLS_MANAGED-SERVER\" + i + \"000000.DAT\";\n+      assertTrue(assertDoesNotThrow(() ->\n+              doesFileExistInPod(domainNamespace, managedServerPodName, defaultMSDataFile),\n+          String.format(\"exception thrown when checking file %s exists in pod %s in namespace %s\",\n+              defaultMSDataFile, managedServerPodName, domainNamespace)),\n+          String.format(\"can not find file %s in pod %s in namespace %s\",\n+              defaultMSDataFile, managedServerPodName, domainNamespace));\n+    }\n+  }\n+\n+  @Test\n+  @DisplayName(\"Test dataHome override in a domain with model in image type\")\n+  public void testDataHomeOverrideMiiDomain() {\n+    // in this domain, dataHome is not specified", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "87bbd9d5da8d9afa14685e14717c9b5934479a6c"}, "originalPosition": 130}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODk4MTQ1NA==", "bodyText": "fixed", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1964#discussion_r498981454", "createdAt": "2020-10-02T18:22:40Z", "author": {"login": "xiancao"}, "path": "integration-tests/src/test/java/oracle/weblogic/kubernetes/ItParameterizedDomain.java", "diffHunk": "@@ -444,6 +450,172 @@ public void testLivenessProbe() {\n         .isTrue();\n   }\n \n+  @Test\n+  @DisplayName(\"Test dataHome override in a domain with domain in image type\")\n+  public void testDataHomeOverrideDomainInImage() {\n+    // in this domain, set dataHome to /u01/oracle/mydata in domain custom resource\n+    // the domain contains JMS and File Store configuration\n+    // File store directory is set to /u01/oracle/customFileStore/ in the model file which should be overridden\n+    // by dataHome\n+    // File store and JMS server are target to cluster-1\n+    // see resource/wdt-models/wdt-singlecluster-multiapps-usingprop-wls.yaml\n+    assertDomainNotNull(domainInImage);\n+    String domainUid = domainInImage.getSpec().getDomainUid();\n+    String domainNamespace = domainInImage.getMetadata().getNamespace();\n+\n+    // check in admin server pod, there is no data file for JMS server created\n+    String dataFileToCheck = DATA_HOME_OVERRIDE + \"/\" + domainUid + \"/FILESTORE-0000000.DAT\";\n+    String adminServerPodName = domainUid + \"-\" + ADMIN_SERVER_NAME_BASE;\n+    assertFalse(assertDoesNotThrow(\n+        () -> doesFileExistInPod(domainNamespace, adminServerPodName, dataFileToCheck),\n+        String.format(\"exception thrown when checking file %s exists in pod %s in namespace %s\",\n+            dataFileToCheck, adminServerPodName, domainNamespace)),\n+        String.format(\"%s exists in pod %s in namespace %s, expects not exist\",\n+            dataFileToCheck, adminServerPodName, domainNamespace));\n+\n+    // check in admin server pod, the default admin server data file moved to DATA_HOME_OVERRIDE\n+    String defaultAdminDataFile = DATA_HOME_OVERRIDE + \"/\" + domainUid + \"/_WLS_ADMIN-SERVER000000.DAT\";\n+    assertTrue(assertDoesNotThrow(() ->\n+        doesFileExistInPod(domainNamespace, adminServerPodName, defaultAdminDataFile),\n+        String.format(\"exception thrown when checking file %s exists in pod %s in namespace %s\",\n+            dataFileToCheck, adminServerPodName, domainNamespace)),\n+        String.format(\"can not find file %s in pod %s in namespace %s\",\n+            defaultAdminDataFile, adminServerPodName, domainNamespace));\n+\n+    // check in managed server pod, the custom data file for JMS and default managed server datafile are created\n+    // in DATA_HOME_OVERRIDE\n+    for (int i = 1; i <= replicaCount; i++) {\n+      String managedServerPodName = domainUid + \"-\" + MANAGED_SERVER_NAME_BASE + i;\n+      String customDataFile = DATA_HOME_OVERRIDE + \"/\" + domainUid + \"/FILESTORE-0@MANAGED-SERVER\" + i + \"000000.DAT\";\n+      assertTrue(assertDoesNotThrow(() ->\n+              doesFileExistInPod(domainNamespace, managedServerPodName, customDataFile),\n+          String.format(\"exception thrown when checking file %s exists in pod %s in namespace %s\",\n+              customDataFile, managedServerPodName, domainNamespace)),\n+          String.format(\"can not find file %s in pod %s in namespace %s\",\n+              customDataFile, managedServerPodName, domainNamespace));\n+\n+      String defaultMSDataFile = DATA_HOME_OVERRIDE + \"/\" + domainUid + \"/_WLS_MANAGED-SERVER\" + i + \"000000.DAT\";\n+      assertTrue(assertDoesNotThrow(() ->\n+              doesFileExistInPod(domainNamespace, managedServerPodName, defaultMSDataFile),\n+          String.format(\"exception thrown when checking file %s exists in pod %s in namespace %s\",\n+              defaultMSDataFile, managedServerPodName, domainNamespace)),\n+          String.format(\"can not find file %s in pod %s in namespace %s\",\n+              defaultMSDataFile, managedServerPodName, domainNamespace));\n+    }\n+  }\n+\n+  @Test\n+  @DisplayName(\"Test dataHome override in a domain with model in image type\")\n+  public void testDataHomeOverrideMiiDomain() {\n+    // in this domain, dataHome is not specified", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODUwNDk3NA=="}, "originalCommit": {"oid": "87bbd9d5da8d9afa14685e14717c9b5934479a6c"}, "originalPosition": 130}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEyMDgzNzgyOnYy", "diffSide": "RIGHT", "path": "integration-tests/src/test/java/oracle/weblogic/kubernetes/ItParameterizedDomain.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQyMDo0OTo0M1rOHbaWyg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQxODoyMjo0NlrOHb3ahA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODUwNTQxOA==", "bodyText": "File store and JMS server are targeted to the admin server", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1964#discussion_r498505418", "createdAt": "2020-10-01T20:49:43Z", "author": {"login": "anpanigr"}, "path": "integration-tests/src/test/java/oracle/weblogic/kubernetes/ItParameterizedDomain.java", "diffHunk": "@@ -444,6 +450,172 @@ public void testLivenessProbe() {\n         .isTrue();\n   }\n \n+  @Test\n+  @DisplayName(\"Test dataHome override in a domain with domain in image type\")\n+  public void testDataHomeOverrideDomainInImage() {\n+    // in this domain, set dataHome to /u01/oracle/mydata in domain custom resource\n+    // the domain contains JMS and File Store configuration\n+    // File store directory is set to /u01/oracle/customFileStore/ in the model file which should be overridden\n+    // by dataHome\n+    // File store and JMS server are target to cluster-1\n+    // see resource/wdt-models/wdt-singlecluster-multiapps-usingprop-wls.yaml\n+    assertDomainNotNull(domainInImage);\n+    String domainUid = domainInImage.getSpec().getDomainUid();\n+    String domainNamespace = domainInImage.getMetadata().getNamespace();\n+\n+    // check in admin server pod, there is no data file for JMS server created\n+    String dataFileToCheck = DATA_HOME_OVERRIDE + \"/\" + domainUid + \"/FILESTORE-0000000.DAT\";\n+    String adminServerPodName = domainUid + \"-\" + ADMIN_SERVER_NAME_BASE;\n+    assertFalse(assertDoesNotThrow(\n+        () -> doesFileExistInPod(domainNamespace, adminServerPodName, dataFileToCheck),\n+        String.format(\"exception thrown when checking file %s exists in pod %s in namespace %s\",\n+            dataFileToCheck, adminServerPodName, domainNamespace)),\n+        String.format(\"%s exists in pod %s in namespace %s, expects not exist\",\n+            dataFileToCheck, adminServerPodName, domainNamespace));\n+\n+    // check in admin server pod, the default admin server data file moved to DATA_HOME_OVERRIDE\n+    String defaultAdminDataFile = DATA_HOME_OVERRIDE + \"/\" + domainUid + \"/_WLS_ADMIN-SERVER000000.DAT\";\n+    assertTrue(assertDoesNotThrow(() ->\n+        doesFileExistInPod(domainNamespace, adminServerPodName, defaultAdminDataFile),\n+        String.format(\"exception thrown when checking file %s exists in pod %s in namespace %s\",\n+            dataFileToCheck, adminServerPodName, domainNamespace)),\n+        String.format(\"can not find file %s in pod %s in namespace %s\",\n+            defaultAdminDataFile, adminServerPodName, domainNamespace));\n+\n+    // check in managed server pod, the custom data file for JMS and default managed server datafile are created\n+    // in DATA_HOME_OVERRIDE\n+    for (int i = 1; i <= replicaCount; i++) {\n+      String managedServerPodName = domainUid + \"-\" + MANAGED_SERVER_NAME_BASE + i;\n+      String customDataFile = DATA_HOME_OVERRIDE + \"/\" + domainUid + \"/FILESTORE-0@MANAGED-SERVER\" + i + \"000000.DAT\";\n+      assertTrue(assertDoesNotThrow(() ->\n+              doesFileExistInPod(domainNamespace, managedServerPodName, customDataFile),\n+          String.format(\"exception thrown when checking file %s exists in pod %s in namespace %s\",\n+              customDataFile, managedServerPodName, domainNamespace)),\n+          String.format(\"can not find file %s in pod %s in namespace %s\",\n+              customDataFile, managedServerPodName, domainNamespace));\n+\n+      String defaultMSDataFile = DATA_HOME_OVERRIDE + \"/\" + domainUid + \"/_WLS_MANAGED-SERVER\" + i + \"000000.DAT\";\n+      assertTrue(assertDoesNotThrow(() ->\n+              doesFileExistInPod(domainNamespace, managedServerPodName, defaultMSDataFile),\n+          String.format(\"exception thrown when checking file %s exists in pod %s in namespace %s\",\n+              defaultMSDataFile, managedServerPodName, domainNamespace)),\n+          String.format(\"can not find file %s in pod %s in namespace %s\",\n+              defaultMSDataFile, managedServerPodName, domainNamespace));\n+    }\n+  }\n+\n+  @Test\n+  @DisplayName(\"Test dataHome override in a domain with model in image type\")\n+  public void testDataHomeOverrideMiiDomain() {\n+    // in this domain, dataHome is not specified\n+    // the domain contains JMS and File Store configuration\n+    // File store directory is set to /u01/oracle/customFileStore/ in the model file which should not be overridden\n+    // by dataHome\n+    // File store and JMS server are target to admin server", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "87bbd9d5da8d9afa14685e14717c9b5934479a6c"}, "originalPosition": 134}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODk4MTUwOA==", "bodyText": "fixed", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1964#discussion_r498981508", "createdAt": "2020-10-02T18:22:46Z", "author": {"login": "xiancao"}, "path": "integration-tests/src/test/java/oracle/weblogic/kubernetes/ItParameterizedDomain.java", "diffHunk": "@@ -444,6 +450,172 @@ public void testLivenessProbe() {\n         .isTrue();\n   }\n \n+  @Test\n+  @DisplayName(\"Test dataHome override in a domain with domain in image type\")\n+  public void testDataHomeOverrideDomainInImage() {\n+    // in this domain, set dataHome to /u01/oracle/mydata in domain custom resource\n+    // the domain contains JMS and File Store configuration\n+    // File store directory is set to /u01/oracle/customFileStore/ in the model file which should be overridden\n+    // by dataHome\n+    // File store and JMS server are target to cluster-1\n+    // see resource/wdt-models/wdt-singlecluster-multiapps-usingprop-wls.yaml\n+    assertDomainNotNull(domainInImage);\n+    String domainUid = domainInImage.getSpec().getDomainUid();\n+    String domainNamespace = domainInImage.getMetadata().getNamespace();\n+\n+    // check in admin server pod, there is no data file for JMS server created\n+    String dataFileToCheck = DATA_HOME_OVERRIDE + \"/\" + domainUid + \"/FILESTORE-0000000.DAT\";\n+    String adminServerPodName = domainUid + \"-\" + ADMIN_SERVER_NAME_BASE;\n+    assertFalse(assertDoesNotThrow(\n+        () -> doesFileExistInPod(domainNamespace, adminServerPodName, dataFileToCheck),\n+        String.format(\"exception thrown when checking file %s exists in pod %s in namespace %s\",\n+            dataFileToCheck, adminServerPodName, domainNamespace)),\n+        String.format(\"%s exists in pod %s in namespace %s, expects not exist\",\n+            dataFileToCheck, adminServerPodName, domainNamespace));\n+\n+    // check in admin server pod, the default admin server data file moved to DATA_HOME_OVERRIDE\n+    String defaultAdminDataFile = DATA_HOME_OVERRIDE + \"/\" + domainUid + \"/_WLS_ADMIN-SERVER000000.DAT\";\n+    assertTrue(assertDoesNotThrow(() ->\n+        doesFileExistInPod(domainNamespace, adminServerPodName, defaultAdminDataFile),\n+        String.format(\"exception thrown when checking file %s exists in pod %s in namespace %s\",\n+            dataFileToCheck, adminServerPodName, domainNamespace)),\n+        String.format(\"can not find file %s in pod %s in namespace %s\",\n+            defaultAdminDataFile, adminServerPodName, domainNamespace));\n+\n+    // check in managed server pod, the custom data file for JMS and default managed server datafile are created\n+    // in DATA_HOME_OVERRIDE\n+    for (int i = 1; i <= replicaCount; i++) {\n+      String managedServerPodName = domainUid + \"-\" + MANAGED_SERVER_NAME_BASE + i;\n+      String customDataFile = DATA_HOME_OVERRIDE + \"/\" + domainUid + \"/FILESTORE-0@MANAGED-SERVER\" + i + \"000000.DAT\";\n+      assertTrue(assertDoesNotThrow(() ->\n+              doesFileExistInPod(domainNamespace, managedServerPodName, customDataFile),\n+          String.format(\"exception thrown when checking file %s exists in pod %s in namespace %s\",\n+              customDataFile, managedServerPodName, domainNamespace)),\n+          String.format(\"can not find file %s in pod %s in namespace %s\",\n+              customDataFile, managedServerPodName, domainNamespace));\n+\n+      String defaultMSDataFile = DATA_HOME_OVERRIDE + \"/\" + domainUid + \"/_WLS_MANAGED-SERVER\" + i + \"000000.DAT\";\n+      assertTrue(assertDoesNotThrow(() ->\n+              doesFileExistInPod(domainNamespace, managedServerPodName, defaultMSDataFile),\n+          String.format(\"exception thrown when checking file %s exists in pod %s in namespace %s\",\n+              defaultMSDataFile, managedServerPodName, domainNamespace)),\n+          String.format(\"can not find file %s in pod %s in namespace %s\",\n+              defaultMSDataFile, managedServerPodName, domainNamespace));\n+    }\n+  }\n+\n+  @Test\n+  @DisplayName(\"Test dataHome override in a domain with model in image type\")\n+  public void testDataHomeOverrideMiiDomain() {\n+    // in this domain, dataHome is not specified\n+    // the domain contains JMS and File Store configuration\n+    // File store directory is set to /u01/oracle/customFileStore/ in the model file which should not be overridden\n+    // by dataHome\n+    // File store and JMS server are target to admin server", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODUwNTQxOA=="}, "originalCommit": {"oid": "87bbd9d5da8d9afa14685e14717c9b5934479a6c"}, "originalPosition": 134}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEyMDg0MjMwOnYy", "diffSide": "RIGHT", "path": "integration-tests/src/test/java/oracle/weblogic/kubernetes/ItParameterizedDomain.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQyMDo1MToxNlrOHbaZtQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQxODoyMjo1NFrOHb3ayw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODUwNjE2NQ==", "bodyText": "Move the description to javadoc with complete sentences, as per comments on previous method", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1964#discussion_r498506165", "createdAt": "2020-10-01T20:51:16Z", "author": {"login": "anpanigr"}, "path": "integration-tests/src/test/java/oracle/weblogic/kubernetes/ItParameterizedDomain.java", "diffHunk": "@@ -444,6 +450,172 @@ public void testLivenessProbe() {\n         .isTrue();\n   }\n \n+  @Test\n+  @DisplayName(\"Test dataHome override in a domain with domain in image type\")\n+  public void testDataHomeOverrideDomainInImage() {\n+    // in this domain, set dataHome to /u01/oracle/mydata in domain custom resource\n+    // the domain contains JMS and File Store configuration\n+    // File store directory is set to /u01/oracle/customFileStore/ in the model file which should be overridden\n+    // by dataHome\n+    // File store and JMS server are target to cluster-1\n+    // see resource/wdt-models/wdt-singlecluster-multiapps-usingprop-wls.yaml\n+    assertDomainNotNull(domainInImage);\n+    String domainUid = domainInImage.getSpec().getDomainUid();\n+    String domainNamespace = domainInImage.getMetadata().getNamespace();\n+\n+    // check in admin server pod, there is no data file for JMS server created\n+    String dataFileToCheck = DATA_HOME_OVERRIDE + \"/\" + domainUid + \"/FILESTORE-0000000.DAT\";\n+    String adminServerPodName = domainUid + \"-\" + ADMIN_SERVER_NAME_BASE;\n+    assertFalse(assertDoesNotThrow(\n+        () -> doesFileExistInPod(domainNamespace, adminServerPodName, dataFileToCheck),\n+        String.format(\"exception thrown when checking file %s exists in pod %s in namespace %s\",\n+            dataFileToCheck, adminServerPodName, domainNamespace)),\n+        String.format(\"%s exists in pod %s in namespace %s, expects not exist\",\n+            dataFileToCheck, adminServerPodName, domainNamespace));\n+\n+    // check in admin server pod, the default admin server data file moved to DATA_HOME_OVERRIDE\n+    String defaultAdminDataFile = DATA_HOME_OVERRIDE + \"/\" + domainUid + \"/_WLS_ADMIN-SERVER000000.DAT\";\n+    assertTrue(assertDoesNotThrow(() ->\n+        doesFileExistInPod(domainNamespace, adminServerPodName, defaultAdminDataFile),\n+        String.format(\"exception thrown when checking file %s exists in pod %s in namespace %s\",\n+            dataFileToCheck, adminServerPodName, domainNamespace)),\n+        String.format(\"can not find file %s in pod %s in namespace %s\",\n+            defaultAdminDataFile, adminServerPodName, domainNamespace));\n+\n+    // check in managed server pod, the custom data file for JMS and default managed server datafile are created\n+    // in DATA_HOME_OVERRIDE\n+    for (int i = 1; i <= replicaCount; i++) {\n+      String managedServerPodName = domainUid + \"-\" + MANAGED_SERVER_NAME_BASE + i;\n+      String customDataFile = DATA_HOME_OVERRIDE + \"/\" + domainUid + \"/FILESTORE-0@MANAGED-SERVER\" + i + \"000000.DAT\";\n+      assertTrue(assertDoesNotThrow(() ->\n+              doesFileExistInPod(domainNamespace, managedServerPodName, customDataFile),\n+          String.format(\"exception thrown when checking file %s exists in pod %s in namespace %s\",\n+              customDataFile, managedServerPodName, domainNamespace)),\n+          String.format(\"can not find file %s in pod %s in namespace %s\",\n+              customDataFile, managedServerPodName, domainNamespace));\n+\n+      String defaultMSDataFile = DATA_HOME_OVERRIDE + \"/\" + domainUid + \"/_WLS_MANAGED-SERVER\" + i + \"000000.DAT\";\n+      assertTrue(assertDoesNotThrow(() ->\n+              doesFileExistInPod(domainNamespace, managedServerPodName, defaultMSDataFile),\n+          String.format(\"exception thrown when checking file %s exists in pod %s in namespace %s\",\n+              defaultMSDataFile, managedServerPodName, domainNamespace)),\n+          String.format(\"can not find file %s in pod %s in namespace %s\",\n+              defaultMSDataFile, managedServerPodName, domainNamespace));\n+    }\n+  }\n+\n+  @Test\n+  @DisplayName(\"Test dataHome override in a domain with model in image type\")\n+  public void testDataHomeOverrideMiiDomain() {\n+    // in this domain, dataHome is not specified\n+    // the domain contains JMS and File Store configuration\n+    // File store directory is set to /u01/oracle/customFileStore/ in the model file which should not be overridden\n+    // by dataHome\n+    // File store and JMS server are target to admin server\n+    // see resource/wdt-models/model-multiclusterdomain-sampleapp-wls.yaml\n+    assertDomainNotNull(miiDomain);\n+    String domainUid = miiDomain.getSpec().getDomainUid();\n+    String domainNamespace = miiDomain.getMetadata().getNamespace();\n+\n+    // check in admin server pod, there is a data file for JMS server created in /u01/oracle/customFileStore\n+    String dataFileToCheck = \"/u01/oracle/customFileStore/FILESTORE-0000000.DAT\";\n+    String adminServerPodName = domainUid + \"-\" + ADMIN_SERVER_NAME_BASE;\n+    assertTrue(assertDoesNotThrow(\n+        () -> doesFileExistInPod(domainNamespace, adminServerPodName, dataFileToCheck),\n+        String.format(\"exception thrown when checking file %s exists in pod %s in namespace %s\",\n+            dataFileToCheck, adminServerPodName, domainNamespace)),\n+        String.format(\"did not find file %s in pod %s in namespace %s\",\n+            dataFileToCheck, adminServerPodName, domainNamespace));\n+\n+    // check in admin server pod, the default admin server data file is in default data store\n+    String defaultAdminDataFile =\n+        \"/u01/domains/\" + domainUid + \"/servers/admin-server/data/store/default/_WLS_ADMIN-SERVER000000.DAT\";\n+    assertTrue(assertDoesNotThrow(() ->\n+            doesFileExistInPod(domainNamespace, adminServerPodName, defaultAdminDataFile),\n+        String.format(\"exception thrown when checking file %s exists in pod %s in namespace %s\",\n+            dataFileToCheck, adminServerPodName, domainNamespace)),\n+        String.format(\"did not find file %s in pod %s in namespace %s\",\n+            defaultAdminDataFile, adminServerPodName, domainNamespace));\n+\n+    // check in managed server pod, there is no custom data file for JMS is created\n+    for (int i = 1; i <= replicaCount; i++) {\n+      for (int j = 1; j <= NUMBER_OF_CLUSTERS_MIIDOMAIN; j++) {\n+        String managedServerPodName = domainUid + \"-cluster-\" + j + \"-\" + MANAGED_SERVER_NAME_BASE + i;\n+        String customDataFile = \"/u01/oracle/customFileStore/FILESTORE-0@MANAGED-SERVER\" + i + \"000000.DAT\";\n+        assertFalse(assertDoesNotThrow(() ->\n+                doesFileExistInPod(domainNamespace, managedServerPodName, customDataFile),\n+            String.format(\"exception thrown when checking file %s exists in pod %s in namespace %s\",\n+                customDataFile, managedServerPodName, domainNamespace)),\n+            String.format(\"found file %s in pod %s in namespace %s, expect not exist\",\n+                customDataFile, managedServerPodName, domainNamespace));\n+\n+        String defaultMSDataFile = \"/u01/domains/\" + domainUid + \"/servers/cluster-\" + j + \"-managed-server\" + i\n+            + \"/data/store/default/_WLS_CLUSTER-\" + j + \"-MANAGED-SERVER\" + i + \"000000.DAT\";\n+        assertTrue(assertDoesNotThrow(() ->\n+                doesFileExistInPod(domainNamespace, managedServerPodName, defaultMSDataFile),\n+            String.format(\"exception thrown when checking file %s exists in pod %s in namespace %s\",\n+                defaultMSDataFile, managedServerPodName, domainNamespace)),\n+            String.format(\"can not find file %s in pod %s in namespace %s\",\n+                defaultMSDataFile, managedServerPodName, domainNamespace));\n+      }\n+    }\n+  }\n+\n+  @Test\n+  @DisplayName(\"Test dataHome override in a domain with domain on PV type\")\n+  public void testDataHomeOverrideDomainOnPV() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "87bbd9d5da8d9afa14685e14717c9b5934479a6c"}, "originalPosition": 186}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODk4MTU3OQ==", "bodyText": "fixed", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1964#discussion_r498981579", "createdAt": "2020-10-02T18:22:54Z", "author": {"login": "xiancao"}, "path": "integration-tests/src/test/java/oracle/weblogic/kubernetes/ItParameterizedDomain.java", "diffHunk": "@@ -444,6 +450,172 @@ public void testLivenessProbe() {\n         .isTrue();\n   }\n \n+  @Test\n+  @DisplayName(\"Test dataHome override in a domain with domain in image type\")\n+  public void testDataHomeOverrideDomainInImage() {\n+    // in this domain, set dataHome to /u01/oracle/mydata in domain custom resource\n+    // the domain contains JMS and File Store configuration\n+    // File store directory is set to /u01/oracle/customFileStore/ in the model file which should be overridden\n+    // by dataHome\n+    // File store and JMS server are target to cluster-1\n+    // see resource/wdt-models/wdt-singlecluster-multiapps-usingprop-wls.yaml\n+    assertDomainNotNull(domainInImage);\n+    String domainUid = domainInImage.getSpec().getDomainUid();\n+    String domainNamespace = domainInImage.getMetadata().getNamespace();\n+\n+    // check in admin server pod, there is no data file for JMS server created\n+    String dataFileToCheck = DATA_HOME_OVERRIDE + \"/\" + domainUid + \"/FILESTORE-0000000.DAT\";\n+    String adminServerPodName = domainUid + \"-\" + ADMIN_SERVER_NAME_BASE;\n+    assertFalse(assertDoesNotThrow(\n+        () -> doesFileExistInPod(domainNamespace, adminServerPodName, dataFileToCheck),\n+        String.format(\"exception thrown when checking file %s exists in pod %s in namespace %s\",\n+            dataFileToCheck, adminServerPodName, domainNamespace)),\n+        String.format(\"%s exists in pod %s in namespace %s, expects not exist\",\n+            dataFileToCheck, adminServerPodName, domainNamespace));\n+\n+    // check in admin server pod, the default admin server data file moved to DATA_HOME_OVERRIDE\n+    String defaultAdminDataFile = DATA_HOME_OVERRIDE + \"/\" + domainUid + \"/_WLS_ADMIN-SERVER000000.DAT\";\n+    assertTrue(assertDoesNotThrow(() ->\n+        doesFileExistInPod(domainNamespace, adminServerPodName, defaultAdminDataFile),\n+        String.format(\"exception thrown when checking file %s exists in pod %s in namespace %s\",\n+            dataFileToCheck, adminServerPodName, domainNamespace)),\n+        String.format(\"can not find file %s in pod %s in namespace %s\",\n+            defaultAdminDataFile, adminServerPodName, domainNamespace));\n+\n+    // check in managed server pod, the custom data file for JMS and default managed server datafile are created\n+    // in DATA_HOME_OVERRIDE\n+    for (int i = 1; i <= replicaCount; i++) {\n+      String managedServerPodName = domainUid + \"-\" + MANAGED_SERVER_NAME_BASE + i;\n+      String customDataFile = DATA_HOME_OVERRIDE + \"/\" + domainUid + \"/FILESTORE-0@MANAGED-SERVER\" + i + \"000000.DAT\";\n+      assertTrue(assertDoesNotThrow(() ->\n+              doesFileExistInPod(domainNamespace, managedServerPodName, customDataFile),\n+          String.format(\"exception thrown when checking file %s exists in pod %s in namespace %s\",\n+              customDataFile, managedServerPodName, domainNamespace)),\n+          String.format(\"can not find file %s in pod %s in namespace %s\",\n+              customDataFile, managedServerPodName, domainNamespace));\n+\n+      String defaultMSDataFile = DATA_HOME_OVERRIDE + \"/\" + domainUid + \"/_WLS_MANAGED-SERVER\" + i + \"000000.DAT\";\n+      assertTrue(assertDoesNotThrow(() ->\n+              doesFileExistInPod(domainNamespace, managedServerPodName, defaultMSDataFile),\n+          String.format(\"exception thrown when checking file %s exists in pod %s in namespace %s\",\n+              defaultMSDataFile, managedServerPodName, domainNamespace)),\n+          String.format(\"can not find file %s in pod %s in namespace %s\",\n+              defaultMSDataFile, managedServerPodName, domainNamespace));\n+    }\n+  }\n+\n+  @Test\n+  @DisplayName(\"Test dataHome override in a domain with model in image type\")\n+  public void testDataHomeOverrideMiiDomain() {\n+    // in this domain, dataHome is not specified\n+    // the domain contains JMS and File Store configuration\n+    // File store directory is set to /u01/oracle/customFileStore/ in the model file which should not be overridden\n+    // by dataHome\n+    // File store and JMS server are target to admin server\n+    // see resource/wdt-models/model-multiclusterdomain-sampleapp-wls.yaml\n+    assertDomainNotNull(miiDomain);\n+    String domainUid = miiDomain.getSpec().getDomainUid();\n+    String domainNamespace = miiDomain.getMetadata().getNamespace();\n+\n+    // check in admin server pod, there is a data file for JMS server created in /u01/oracle/customFileStore\n+    String dataFileToCheck = \"/u01/oracle/customFileStore/FILESTORE-0000000.DAT\";\n+    String adminServerPodName = domainUid + \"-\" + ADMIN_SERVER_NAME_BASE;\n+    assertTrue(assertDoesNotThrow(\n+        () -> doesFileExistInPod(domainNamespace, adminServerPodName, dataFileToCheck),\n+        String.format(\"exception thrown when checking file %s exists in pod %s in namespace %s\",\n+            dataFileToCheck, adminServerPodName, domainNamespace)),\n+        String.format(\"did not find file %s in pod %s in namespace %s\",\n+            dataFileToCheck, adminServerPodName, domainNamespace));\n+\n+    // check in admin server pod, the default admin server data file is in default data store\n+    String defaultAdminDataFile =\n+        \"/u01/domains/\" + domainUid + \"/servers/admin-server/data/store/default/_WLS_ADMIN-SERVER000000.DAT\";\n+    assertTrue(assertDoesNotThrow(() ->\n+            doesFileExistInPod(domainNamespace, adminServerPodName, defaultAdminDataFile),\n+        String.format(\"exception thrown when checking file %s exists in pod %s in namespace %s\",\n+            dataFileToCheck, adminServerPodName, domainNamespace)),\n+        String.format(\"did not find file %s in pod %s in namespace %s\",\n+            defaultAdminDataFile, adminServerPodName, domainNamespace));\n+\n+    // check in managed server pod, there is no custom data file for JMS is created\n+    for (int i = 1; i <= replicaCount; i++) {\n+      for (int j = 1; j <= NUMBER_OF_CLUSTERS_MIIDOMAIN; j++) {\n+        String managedServerPodName = domainUid + \"-cluster-\" + j + \"-\" + MANAGED_SERVER_NAME_BASE + i;\n+        String customDataFile = \"/u01/oracle/customFileStore/FILESTORE-0@MANAGED-SERVER\" + i + \"000000.DAT\";\n+        assertFalse(assertDoesNotThrow(() ->\n+                doesFileExistInPod(domainNamespace, managedServerPodName, customDataFile),\n+            String.format(\"exception thrown when checking file %s exists in pod %s in namespace %s\",\n+                customDataFile, managedServerPodName, domainNamespace)),\n+            String.format(\"found file %s in pod %s in namespace %s, expect not exist\",\n+                customDataFile, managedServerPodName, domainNamespace));\n+\n+        String defaultMSDataFile = \"/u01/domains/\" + domainUid + \"/servers/cluster-\" + j + \"-managed-server\" + i\n+            + \"/data/store/default/_WLS_CLUSTER-\" + j + \"-MANAGED-SERVER\" + i + \"000000.DAT\";\n+        assertTrue(assertDoesNotThrow(() ->\n+                doesFileExistInPod(domainNamespace, managedServerPodName, defaultMSDataFile),\n+            String.format(\"exception thrown when checking file %s exists in pod %s in namespace %s\",\n+                defaultMSDataFile, managedServerPodName, domainNamespace)),\n+            String.format(\"can not find file %s in pod %s in namespace %s\",\n+                defaultMSDataFile, managedServerPodName, domainNamespace));\n+      }\n+    }\n+  }\n+\n+  @Test\n+  @DisplayName(\"Test dataHome override in a domain with domain on PV type\")\n+  public void testDataHomeOverrideDomainOnPV() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODUwNjE2NQ=="}, "originalCommit": {"oid": "87bbd9d5da8d9afa14685e14717c9b5934479a6c"}, "originalPosition": 186}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4034, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}