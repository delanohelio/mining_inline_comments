{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY5MDU0OTI2", "number": 1876, "title": "Owls 83538", "bodyText": "Rework the unit tests to reduce dependency on threads and I/O. In particular, this PR:\n\nchanges the test point for watchers from the watch wrapper in some tests and PseudoServer in others, to the creation of the Watch object itself, taking advantage of the addition of a Watchable interface in the client library,\ndisables starting threads during invocations of functions in Main,\nisolates creating the steps to check domains from the runnable that runs them in Main,\nsome miscellaneous cleanup in tests that had gotten a bit confused.\n\nThis is intended to improve reliability and repeatability of the unit tests, removing environmental dependencies (there are still some left to deal with in future PRs).\nThis was motivated by a bug filed by @xiancao and I don't want it merged until it's been shown definitely to fix the unit test failures she'd been seeing.", "createdAt": "2020-08-17T20:36:12Z", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1876", "merged": true, "mergeCommit": {"oid": "86d96b90e655bfb6c7e6172114ec54d1f7982fb3"}, "closed": true, "closedAt": "2020-08-18T23:09:42Z", "author": {"login": "russgold"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc_0l3YAH2gAyNDY5MDU0OTI2OmMwM2IwNjc4N2U3OWU3OGE4ZTI0ZjZhOTY3YzZhZWRhNmRmMjVlZjc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdAO9C3gFqTQ2OTg3OTE1Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c03b06787e79e78a8e24f6a967c6aeda6df25ef7", "author": {"user": {"login": "russgold", "name": "Russell Gold"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/c03b06787e79e78a8e24f6a967c6aeda6df25ef7", "committedDate": "2020-08-17T15:59:44Z", "message": "Eliminate http call from Watcher tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2113f2fd590a9e30637617cae15499c9c91a336a", "author": {"user": {"login": "russgold", "name": "Russell Gold"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/2113f2fd590a9e30637617cae15499c9c91a336a", "committedDate": "2020-08-17T20:09:57Z", "message": "cleanup, remove unit test thread dependencies"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY4ODYwMzU4", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1876#pullrequestreview-468860358", "createdAt": "2020-08-17T21:58:56Z", "commit": {"oid": "2113f2fd590a9e30637617cae15499c9c91a336a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "45807a8fe7479e2dd7a41905aaa2ca8f4d038cd8", "author": {"user": {"login": "rjeberhard", "name": "Ryan Eberhard"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/45807a8fe7479e2dd7a41905aaa2ca8f4d038cd8", "committedDate": "2020-08-17T22:00:40Z", "message": "Merge remote-tracking branch 'origin/develop' into owls-83538"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ea3df13765edc152d6acf239005178db53b6139f", "author": {"user": {"login": "rjeberhard", "name": "Ryan Eberhard"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/ea3df13765edc152d6acf239005178db53b6139f", "committedDate": "2020-08-17T22:05:49Z", "message": "Backout change to chart"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY5NDcwMzgy", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1876#pullrequestreview-469470382", "createdAt": "2020-08-18T13:45:22Z", "commit": {"oid": "ea3df13765edc152d6acf239005178db53b6139f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQxMzo0NToyMlrOHCVVBA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQxMzo0NToyMlrOHCVVBA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjIwODY0NA==", "bodyText": "Can we avoid catching and throwing NullPointerException here?", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1876#discussion_r472208644", "createdAt": "2020-08-18T13:45:22Z", "author": {"login": "doxiao"}, "path": "operator/src/main/java/oracle/kubernetes/operator/helpers/CrdHelper.java", "diffHunk": "@@ -158,10 +158,14 @@ boolean isOutdatedBetaCrd(\n \n     @Override\n     public NextAction apply(Packet packet) {\n-      if (context.version.isCrdV1Supported()) {\n-        return doNext(context.verifyCrd(getNext()), packet);\n-      } else {\n-        return doNext(context.verifyBetaCrd(getNext()), packet);\n+      try {\n+        if (context.version.isCrdV1Supported()) {\n+          return doNext(context.verifyCrd(getNext()), packet);\n+        } else {\n+          return doNext(context.verifyBetaCrd(getNext()), packet);\n+        }\n+      } catch (NullPointerException e) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ea3df13765edc152d6acf239005178db53b6139f"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b02c1cf2646b14c24e8cb821b85049f6d9abc642", "author": {"user": {"login": "russgold", "name": "Russell Gold"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/b02c1cf2646b14c24e8cb821b85049f6d9abc642", "committedDate": "2020-08-18T22:30:44Z", "message": "minor cleanup"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY5ODc5MTU2", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1876#pullrequestreview-469879156", "createdAt": "2020-08-18T22:42:35Z", "commit": {"oid": "b02c1cf2646b14c24e8cb821b85049f6d9abc642"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4396, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}