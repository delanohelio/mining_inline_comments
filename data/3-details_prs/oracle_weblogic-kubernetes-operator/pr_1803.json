{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ4NTQ1Mzkx", "number": 1803, "title": "MII Sample Testing: Add option to dynamically allocate Traefik nodeports ...", "bodyText": "\u2026 and change MII sample integration test to use this option.", "createdAt": "2020-07-13T22:57:11Z", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1803", "merged": true, "mergeCommit": {"oid": "916bc777567aa0536e18509dbfccfac1c0e6ede8"}, "closed": true, "closedAt": "2020-07-14T17:09:24Z", "author": {"login": "tbarnes-us"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc0pgzggH2gAyNDQ4NTQ1MzkxOjgxYjkyNDE1NGU1OWU5NDI4YzZiOWRjZGVjM2E1MjUwNjA2YjVkOGI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc042sVAFqTQ0ODI4MjU2NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "81b924154e59e9428c6b9dcdec3a5250606b5d8b", "author": {"user": {"login": "tbarnes-us", "name": "Tom Barnes"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/81b924154e59e9428c6b9dcdec3a5250606b5d8b", "committedDate": "2020-07-13T22:52:05Z", "message": "MII Sample Testing: Add MII sample stand-alone test option to dynamically allocate Traefik nodeports, and change MII sample integration test to use this option."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ3NzQzNDUy", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1803#pullrequestreview-447743452", "createdAt": "2020-07-14T02:36:55Z", "commit": {"oid": "81b924154e59e9428c6b9dcdec3a5250606b5d8b"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ3Nzc3NTAy", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1803#pullrequestreview-447777502", "createdAt": "2020-07-14T04:30:45Z", "commit": {"oid": "81b924154e59e9428c6b9dcdec3a5250606b5d8b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQwNDozMDo0NVrOGxDpLQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQwNDozMDo0NVrOGxDpLQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDA5MzEwMQ==", "bodyText": "Can you use the the script setup.sh  in samples/charts/utils directory to configure traefik.  The latest version of traefik  ( v 2.2.1) has different chart repository ( containous.github.io/traefik-helm-chart), The chart name is not stable/traefik but traefik/traefik.  I am working on a PR to upgrade the traefik version.  All these will be taken care by setup.sh, provided you use the command \"setup.sh create traefik\" in your script.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1803#discussion_r454093101", "createdAt": "2020-07-14T04:30:45Z", "author": {"login": "anpanigr"}, "path": "src/integration-tests/model-in-image/deploy-traefik.sh", "diffHunk": "@@ -49,32 +53,60 @@ set +e\n helm get values ${TRAEFIK_NAME} -n ${TRAEFIK_NAMESPACE} > $WORKDIR/test-out/traefik-values.cur 2>&1\n res=$?\n set -e\n-echo ${DOMAIN_NAMESPACE} >> $WORKDIR/test-out/traefik-values.cur\n+for evar in DOMAIN_NAMESPACE TRAEFIK_NAMESPACE TRAEFIK_NAME TRAEFIK_HTTP_NODEPORT TRAEFIK_HTTPS_NODEPORT; do\n+  echo \"${evar}=${!evar}\" >> $WORKDIR/test-out/traefik-values.cur\n+done\n if [ $res -eq 0 ] \\\n    && [ -e \"$WORKDIR/test-out/traefik-values.orig\" ] \\\n    && [ \"$(cat $WORKDIR/test-out/traefik-values.cur)\" = \"$(cat $WORKDIR/test-out/traefik-values.orig)\" ]; then\n   echo \"@@\"\n-  echo \"@@ Traefik already installed. Skipping uninstall/install.\"\n+  echo \"@@ Traefik already installed. Skipping uninstall/install. Current values:\"\n+  cat $WORKDIR/test-out/traefik-values.orig\n   echo \"@@\"\n else\n   set +e\n+  echo \"@@\"\n+  echo \"@@ Uninstalling old install (if any) using 'helm uninstall $TRAEFIK_NAME -n $TRAEFIK_NAMESPACE'\"\n+  echo \"@@\"\n   helm uninstall $TRAEFIK_NAME -n $TRAEFIK_NAMESPACE\n+  echo \"@@ Creating traefik namespace '$TRAEFIK_NAMESPACE' and domain namepace '$DOMAIN_NAMESPACE'\"\n   kubectl create namespace $TRAEFIK_NAMESPACE\n   kubectl create namespace $DOMAIN_NAMESPACE\n   set -e\n \n   cd ${SRCDIR}\n \n+  echo \"@@ Installing traefik\"\n+\n   # you only need to add the repo once, but we do it every time for simplicity\n   helm repo add stable https://kubernetes-charts.storage.googleapis.com/\n \n+  set -x\n+\n   helm install ${TRAEFIK_NAME} stable/traefik \\", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "81b924154e59e9428c6b9dcdec3a5250606b5d8b"}, "originalPosition": 52}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ4MjM3MzY2", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1803#pullrequestreview-448237366", "createdAt": "2020-07-14T15:50:00Z", "commit": {"oid": "81b924154e59e9428c6b9dcdec3a5250606b5d8b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ4MjgyNTY0", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1803#pullrequestreview-448282564", "createdAt": "2020-07-14T16:44:34Z", "commit": {"oid": "81b924154e59e9428c6b9dcdec3a5250606b5d8b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4284, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}