{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE4NzY3NzI4", "number": 2046, "title": "Update the startServer.sh copy functionality to only chmod owned files", "bodyText": "This is part of making restrictive SCC work on OpenShift. In addition to the specific change to startServer.sh to only chmod when permitted, I noticed that many of the integration tests were initializing PV's with chown oracle:oracle rather than with oracle:root. I've updated those references too.", "createdAt": "2020-11-10T21:14:07Z", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2046", "merged": true, "mergeCommit": {"oid": "9402a32961efb9c2c2f00a96f57c04591b757f2f"}, "closed": true, "closedAt": "2020-11-12T19:31:51Z", "author": {"login": "rjeberhard"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABda-x9cgH2gAyNTE4NzY3NzI4OjBiZjFlZmYyNDljZTc4NDZkZTFkZTBlNGQ3YzAwOTM4YTNhMmZiZWY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdb3sCOAFqTUyOTQyMzAxOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "0bf1eff249ce7846de1de0e4d7c00938a3a2fbef", "author": {"user": {"login": "rjeberhard", "name": "Ryan Eberhard"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/0bf1eff249ce7846de1de0e4d7c00938a3a2fbef", "committedDate": "2020-11-10T01:07:57Z", "message": "Remove unnecessary chmod 750"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "168cfccc4a7e36c0a83776b9f4763bf704f64d0f", "author": {"user": {"login": "rjeberhard", "name": "Ryan Eberhard"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/168cfccc4a7e36c0a83776b9f4763bf704f64d0f", "committedDate": "2020-11-10T11:56:17Z", "message": "Try only chmod'ing if file is created"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "380f41804f01b1d4d290582fb82ffa235558e930", "author": {"user": {"login": "rjeberhard", "name": "Ryan Eberhard"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/380f41804f01b1d4d290582fb82ffa235558e930", "committedDate": "2020-11-10T16:05:24Z", "message": "Update tests to use chown oracle:root"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8bbcba98bf5860cccff9d5f9f76d4c43a9d17013", "author": {"user": {"login": "rjeberhard", "name": "Ryan Eberhard"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/8bbcba98bf5860cccff9d5f9f76d4c43a9d17013", "committedDate": "2020-11-10T16:48:51Z", "message": "Switch to checking ownership before chmod"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "42cad7f35c449e967144b4f045fd04d5f5e4d005", "author": {"user": {"login": "rjeberhard", "name": "Ryan Eberhard"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/42cad7f35c449e967144b4f045fd04d5f5e4d005", "committedDate": "2020-11-10T17:02:33Z", "message": "Add diagnostics"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6677658e393df525beb7ac2090134271af41c36b", "author": {"user": {"login": "rjeberhard", "name": "Ryan Eberhard"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/6677658e393df525beb7ac2090134271af41c36b", "committedDate": "2020-11-10T20:55:32Z", "message": "Remove diagnostics"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6cbe0aedb61877dc650ac08c596bce8d9949b27c", "author": {"user": {"login": "rjeberhard", "name": "Ryan Eberhard"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/6cbe0aedb61877dc650ac08c596bce8d9949b27c", "committedDate": "2020-11-10T20:57:15Z", "message": "Merge remote-tracking branch 'origin/develop' into remove-chmod750"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI5MjQxNTg0", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2046#pullrequestreview-529241584", "createdAt": "2020-11-12T16:05:14Z", "commit": {"oid": "6cbe0aedb61877dc650ac08c596bce8d9949b27c"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI5MzE5NjE3", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2046#pullrequestreview-529319617", "createdAt": "2020-11-12T17:25:59Z", "commit": {"oid": "6cbe0aedb61877dc650ac08c596bce8d9949b27c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI5MzIyNzAx", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2046#pullrequestreview-529322701", "createdAt": "2020-11-12T17:29:34Z", "commit": {"oid": "6cbe0aedb61877dc650ac08c596bce8d9949b27c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQxNzoyOTozNFrOHyFx7Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQxNzoyOTozNFrOHyFx7Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjI4NTU0OQ==", "bodyText": "What file isn't owned?  Note that there is similar logic in the liveness probe script.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2046#discussion_r522285549", "createdAt": "2020-11-12T17:29:34Z", "author": {"login": "tbarnes-us"}, "path": "operator/src/main/resources/scripts/startServer.sh", "diffHunk": "@@ -34,15 +34,17 @@ function copyIfChanged() {\n     trace \"Copying '$1' to '$2'.\"\n     cp $1 $2\n     [ $? -ne 0 ] && trace SEVERE \"failed cp $1 $2\" && exitOrLoop\n-    chmod 750 $2 \n-    [ $? -ne 0 ] && trace SEVERE \"failed chmod 750 $2\" && exitOrLoop\n+    if [ -O \"$2\" ]; then\n+      chmod 770 $2\n+      [ $? -ne 0 ] && trace SEVERE \"failed chmod 770 $2\" && exitOrLoop\n+    fi", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6cbe0aedb61877dc650ac08c596bce8d9949b27c"}, "originalPosition": 9}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "372a3ad2ad5fdc802bed416fbedda1fc6f18f53a", "author": {"user": {"login": "rjeberhard", "name": "Ryan Eberhard"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/372a3ad2ad5fdc802bed416fbedda1fc6f18f53a", "committedDate": "2020-11-12T17:45:53Z", "message": "Adjust liveness probe too"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI5NDIzMDE4", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2046#pullrequestreview-529423018", "createdAt": "2020-11-12T19:26:04Z", "commit": {"oid": "372a3ad2ad5fdc802bed416fbedda1fc6f18f53a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3907, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}