{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg2NTQ4NTAz", "number": 1916, "title": "Support for persistentVolumeClaimName, support for both non privilege\u2026", "bodyText": "Hi @mriccell, @rjeberhard, @doxiao,\nOlder PR (#1840) got closed while rebase with latest develop branch which was far ahead with many commits, hence created a new one.\nThis PR has fix for Apache Webtier to run with non-root user and non-privileged port.\nMainly this is fixed to be in sync with the latest changes done to the Apache Webtier Docker images as part of PR - oracle/docker-images#1630.\nAlong with this below changes are also added so that it can be used in Cloud Setup where Kubernetes Cluster nodes are private and have restricted access:\n1. Persistent Volume Claim support instead of Host path as volume\n2. Support for both default privileged port (80) and non-privileged port (8080)\n3. Readme updates\n4. Image Pull Secrets (initial PR changes) that is needed to pull registry containing the apache webtier Docker image.", "createdAt": "2020-09-14T11:43:46Z", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1916", "merged": true, "mergeCommit": {"oid": "e4c97457cf46ec6565e63734be5e3ce169a58301"}, "closed": true, "closedAt": "2020-09-29T16:04:07Z", "author": {"login": "ashageetha"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdIxjVFAH2gAyNDg2NTQ4NTAzOjdhZDY1YzY3NTkxMGQ4NGFkZWZlNGFmNTAzMDFlMTA2ZjkwNDIyNTY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdNqbPWgFqTQ5ODY1MDExOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "7ad65c675910d84adefe4af50301e106f9042256", "author": {"user": {"login": "ashageetha", "name": "Ashageetha Rao"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/7ad65c675910d84adefe4af50301e106f9042256", "committedDate": "2020-09-14T11:32:34Z", "message": "Support for persistentVolumeClaimName, support for both non privileged port 8080 to listen and default priviledged port, imagePullSecrets and readme updates"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg4MDIwNDYw", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1916#pullrequestreview-488020460", "createdAt": "2020-09-14T18:06:36Z", "commit": {"oid": "7ad65c675910d84adefe4af50301e106f9042256"}, "state": "COMMENTED", "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxODowNjozNlrOHRgx_g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxODoyMDo1OFrOHRhReg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODEyNDkyNg==", "bodyText": "Apache helm chart -> Apache Helm chart", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1916#discussion_r488124926", "createdAt": "2020-09-14T18:06:36Z", "author": {"login": "rosemarymarano"}, "path": "kubernetes/samples/charts/apache-samples/README.md", "diffHunk": "@@ -1,8 +1,8 @@\n # Apache load balancer samples\n \n-The sample package contains two samples that use the [Apache helm chart](../apache-webtier/README.md). The samples use the Docker image for the Apache HTTP Server with the 12.2.1.3.0 Oracle WebLogic Server Proxy Plugin.  See the details in [Apache HTTP Server with Oracle WebLogic Server Proxy Plugin on Docker](https://github.com/oracle/docker-images/tree/master/OracleWebLogic/samples/12213-webtier-apache).\n+The sample package contains two samples that use the [Apache helm chart](../apache-webtier/README.md). The samples use the Docker image for the Apache HTTP Server with the 12.2.1.3.0 and 12.2.1.4.0 Oracle WebLogic Server Proxy Plugin.  See the details in [Apache HTTP Server with Oracle WebLogic Server Proxy Plugin on Docker](https://github.com/oracle/docker-images/tree/master/OracleWebLogic/samples/12213-webtier-apache).", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7ad65c675910d84adefe4af50301e106f9042256"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODEyNTE4Nw==", "bodyText": "in the above Docker image. -> in the Docker image.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1916#discussion_r488125187", "createdAt": "2020-09-14T18:07:05Z", "author": {"login": "rosemarymarano"}, "path": "kubernetes/samples/charts/apache-samples/README.md", "diffHunk": "@@ -1,8 +1,8 @@\n # Apache load balancer samples\n \n-The sample package contains two samples that use the [Apache helm chart](../apache-webtier/README.md). The samples use the Docker image for the Apache HTTP Server with the 12.2.1.3.0 Oracle WebLogic Server Proxy Plugin.  See the details in [Apache HTTP Server with Oracle WebLogic Server Proxy Plugin on Docker](https://github.com/oracle/docker-images/tree/master/OracleWebLogic/samples/12213-webtier-apache).\n+The sample package contains two samples that use the [Apache helm chart](../apache-webtier/README.md). The samples use the Docker image for the Apache HTTP Server with the 12.2.1.3.0 and 12.2.1.4.0 Oracle WebLogic Server Proxy Plugin.  See the details in [Apache HTTP Server with Oracle WebLogic Server Proxy Plugin on Docker](https://github.com/oracle/docker-images/tree/master/OracleWebLogic/samples/12213-webtier-apache).\n \n * [The default sample](default-sample/README.md) uses the built-in configuration in the above Docker image.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7ad65c675910d84adefe4af50301e106f9042256"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODEyOTIxNA==", "bodyText": "Create  PV / PVC -> Create  a PV / PVC\nthat can be used to place the custom_mod_wl_apache.conf -> not sure what you mean by this phrase, \"can be used to place\" -> do you mean, \"can be used to locate\" or \"can be used to store\"? Not sure which is correct, but \"can be used to place\" is not.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1916#discussion_r488129214", "createdAt": "2020-09-14T18:14:16Z", "author": {"login": "rosemarymarano"}, "path": "kubernetes/samples/charts/apache-samples/custom-sample/README.md", "diffHunk": "@@ -78,7 +78,7 @@ PathTrim /weblogic2\n </Location>\n ```\n \n-* Place the `custom_mod_wl_apache.conf` file in a local directory `<host-config-dir>` on the host machine.\n+* Create  PV / PVC (pv-claim-name) that can be used to place the `custom_mod_wl_apache.conf`.  Refer to the [Sample for creating a PV or PVC](/kubernetes/samples/scripts/create-weblogic-domain-pv-pvc/README.md).", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7ad65c675910d84adefe4af50301e106f9042256"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODEzMTA4MA==", "bodyText": "supported verions, -> (typo) supported versions (and no comma is needed)", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1916#discussion_r488131080", "createdAt": "2020-09-14T18:17:31Z", "author": {"login": "rosemarymarano"}, "path": "kubernetes/samples/charts/apache-webtier/README.md", "diffHunk": "@@ -2,7 +2,7 @@\n \n This Helm chart bootstraps an Apache HTTP Server deployment on a [Kubernetes](http://kubernetes.io) cluster using the [Helm](https://helm.sh) package manager.\n  \n-The chart depends on the Docker image for the Apache HTTP Server with the 12.2.1.3.0 Oracle WebLogic Server Proxy Plugin.  See the details in [Apache HTTP Server with Oracle WebLogic Server Proxy Plugin on Docker](https://github.com/oracle/docker-images/tree/master/OracleWebLogic/samples/12213-webtier-apache).\n+The chart depends on the Docker image for the Apache HTTP Server with Oracle WebLogic Server Proxy Plugin (supported verions, 12.2.1.3.0 and 12.2.1.4.0). See the details in [Apache HTTP Server with Oracle WebLogic Server Proxy Plugin on Docker](https://github.com/oracle/docker-images/tree/master/OracleWebLogic/samples/12213-webtier-apache).", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7ad65c675910d84adefe4af50301e106f9042256"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODEzMTMyMg==", "bodyText": "apache  -> Apache", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1916#discussion_r488131322", "createdAt": "2020-09-14T18:17:59Z", "author": {"login": "rosemarymarano"}, "path": "kubernetes/samples/charts/apache-webtier/README.md", "diffHunk": "@@ -37,7 +37,8 @@ The following table lists the configurable parameters of the Apache webtier char\n | -----------------------------------| ------------------------------------------------------------- | ----------------------|\n | `image`                            | Apache webtier Docker image                                   | `store/oracle/apache:12.2.1.3` |\n | `imagePullPolicy`                  | Image pull policy for the Apache webtier Docker image         | `IfNotPresent`        |\n-| `volumePath`                       | Docker volume path for the Apache webtier                     | ``                    |\n+| `imagePullSecrets`                 | Image pull Secrets required to access the registry containing the apache webtier Docker image| ``|", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7ad65c675910d84adefe4af50301e106f9042256"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODEzMjI4OQ==", "bodyText": "PriviledgedPort i.e port 80. -> PriviledgedPort, for example, port 80.\nYou need to have the flag -> Set the flag", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1916#discussion_r488132289", "createdAt": "2020-09-14T18:19:44Z", "author": {"login": "rosemarymarano"}, "path": "kubernetes/samples/charts/apache-webtier/README.md", "diffHunk": "@@ -63,11 +66,14 @@ installing the chart. For example:\n ```console\n $ helm install my-release --values values.yaml apache-webtier\n ```\n+## useNonPriviledgedPorts\n+By default, the chart will install the Apache webtier on PriviledgedPort i.e port 80. You need to have the flag `useNonPriviledgedPorts=true` to enable the Apache webtier to listen on port `8080`", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7ad65c675910d84adefe4af50301e106f9042256"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODEzMjk4Ng==", "bodyText": "You need to have the flag -> Set the flag", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1916#discussion_r488132986", "createdAt": "2020-09-14T18:20:58Z", "author": {"login": "rosemarymarano"}, "path": "kubernetes/samples/charts/apache-webtier/README.md", "diffHunk": "@@ -63,11 +66,14 @@ installing the chart. For example:\n ```console\n $ helm install my-release --values values.yaml apache-webtier\n ```\n+## useNonPriviledgedPorts\n+By default, the chart will install the Apache webtier on PriviledgedPort i.e port 80. You need to have the flag `useNonPriviledgedPorts=true` to enable the Apache webtier to listen on port `8080`\n+\n \n ## RBAC\n By default, the chart will install the recommended RBAC roles and role bindings.\n \n-You need to have the flag `--authorization-mode=RBAC` on the API server. See the following document for how to enable [RBAC](https://kubernetes.io/docs/admin/authorization/rbac/).\n+You need to have the flag `--authorization-mode=RBAC` on the API server. See the following document for how to enable [RBAC](https://kubernetes.io/docs/reference/access-authn-authz/rbac/).", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7ad65c675910d84adefe4af50301e106f9042256"}, "originalPosition": 46}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "efe141d15a9e51d875050ff4ee05a8524ff38944", "author": {"user": {"login": "ashageetha", "name": "Ashageetha Rao"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/efe141d15a9e51d875050ff4ee05a8524ff38944", "committedDate": "2020-09-22T18:22:54Z", "message": "Incorporated doc review comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzNzM3MDgw", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1916#pullrequestreview-493737080", "createdAt": "2020-09-22T18:28:49Z", "commit": {"oid": "efe141d15a9e51d875050ff4ee05a8524ff38944"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk4NjUwMTE4", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1916#pullrequestreview-498650118", "createdAt": "2020-09-29T16:04:01Z", "commit": {"oid": "efe141d15a9e51d875050ff4ee05a8524ff38944"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4143, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}