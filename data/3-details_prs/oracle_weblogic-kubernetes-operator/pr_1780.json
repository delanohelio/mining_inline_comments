{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQzMDQwOTY2", "number": 1780, "title": "Remove old situation configuration entries from the introspector map", "bodyText": "When an introspection result lacks Sit-Cfg entries that are in the old introspector config map, remove the old entries.\nAlso cleaned up some dead code.", "createdAt": "2020-07-01T22:56:47Z", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1780", "merged": true, "mergeCommit": {"oid": "dcb445b21b71a04690c226c67adb25f106c17515"}, "closed": true, "closedAt": "2020-07-02T18:22:30Z", "author": {"login": "russgold"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcwyBSBAH2gAyNDQzMDQwOTY2OmM4ZGU2NTE3OWQ4ZDYxYTkyNzU2YzhkODJhMzVmMDFjNDFmNDk5NDY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcxAg_EAFqTQ0MTc5Njc5Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c8de65179d8d61a92756c8d82a35f01c41f49946", "author": {"user": {"login": "russgold", "name": "Russell Gold"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/c8de65179d8d61a92756c8d82a35f01c41f49946", "committedDate": "2020-07-01T22:31:06Z", "message": "Remove old situation configuration entries from the introspector map"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aad4f5a882255a5ef270b53f8da78cffc8f38a34", "author": {"user": {"login": "russgold", "name": "Russell Gold"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/aad4f5a882255a5ef270b53f8da78cffc8f38a34", "committedDate": "2020-07-01T22:55:56Z", "message": "simplify implementation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQxMjYxOTc2", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1780#pullrequestreview-441261976", "createdAt": "2020-07-01T23:45:01Z", "commit": {"oid": "aad4f5a882255a5ef270b53f8da78cffc8f38a34"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQyMzo0NTowMVrOGr4wGw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQyMzo0NTowMVrOGr4wGw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODY3MTc3MQ==", "bodyText": "If we have an introspect job result that short circuited and therefore has no file entries that get parsed out, can we still get here?  If so, the existingMap will be stripped of its Sit-Cfg keys, and the update at line 308 looks it will consequently (improperly) remove all Cfg from the introspect cm.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1780#discussion_r448671771", "createdAt": "2020-07-01T23:45:01Z", "author": {"login": "tbarnes-us"}, "path": "operator/src/main/java/oracle/kubernetes/operator/helpers/ConfigMapHelper.java", "diffHunk": "@@ -284,10 +301,10 @@ boolean isCompatibleMap(V1ConfigMap existingMap) {\n       public NextAction onSuccess(Packet packet, CallResponse<V1ConfigMap> callResponse) {\n         DomainPresenceInfo.fromPacket(packet).map(DomainPresenceInfo::getDomain).map(Domain::getIntrospectVersion)\n               .ifPresent(value -> addLabel(INTROSPECTION_STATE_LABEL, value));\n-        V1ConfigMap existingMap = callResponse.getResult();\n+        V1ConfigMap existingMap = withPreservedData(callResponse.getResult());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aad4f5a882255a5ef270b53f8da78cffc8f38a34"}, "originalPosition": 40}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "57cfcd2d98624046c1f2335c13fe1053d1d68e11", "author": {"user": {"login": "russgold", "name": "Russell Gold"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/57cfcd2d98624046c1f2335c13fe1053d1d68e11", "committedDate": "2020-07-02T01:19:01Z", "message": "Don't remove transient entries on introspector short-circuit"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQxNzQzNjA0", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1780#pullrequestreview-441743604", "createdAt": "2020-07-02T14:39:20Z", "commit": {"oid": "57cfcd2d98624046c1f2335c13fe1053d1d68e11"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQxNzk2Nzky", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1780#pullrequestreview-441796792", "createdAt": "2020-07-02T15:24:24Z", "commit": {"oid": "57cfcd2d98624046c1f2335c13fe1053d1d68e11"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4634, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}