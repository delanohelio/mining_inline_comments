{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY0MTg4ODkx", "number": 1854, "title": "Retry failure fix", "bodyText": "This PR address the following issues\nhttps://jira.****/jira/browse/OWLS-83019\nDisable introspect job retry when MII JRF path fails creating a new schema\nhttps://jira.****/jira/browse/OWLS-82989\nFix permanent failure logic for introspector job\n(regression of 3.0/2.6 over older versions)\nhttps://jira.****/jira/browse/OWLS-82975\nNo errors reported in domain status when overrides file name is wrong, job retry indefinitely", "createdAt": "2020-08-06T18:17:02Z", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1854", "merged": true, "mergeCommit": {"oid": "8660662615722b9f49ce196d30c4f8dc2f59ad9d"}, "closed": true, "closedAt": "2020-09-17T15:05:13Z", "author": {"login": "jshum2479"}, "timelineItems": {"totalCount": 51, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcwvyu-AH2gAyNDY0MTg4ODkxOmI2ZjY4MGVkYTI2OWM1MjdhYTMzNDIyZjgxMjg5NjYzMDg5ODFiNmQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdJyYqsgH2gAyNDY0MTg4ODkxOjcwYzEzMmZlNTU4NjAyZTIyZmI0ZDM0OGM2M2M0NDUzZTZiYjBjMTg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b6f680eda269c527aa33422f8128966308981b6d", "author": {"user": null}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/b6f680eda269c527aa33422f8128966308981b6d", "committedDate": "2020-07-01T19:55:24Z", "message": "update from develop"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "83afa23a615028e986f2c43ce00e16487e981acb", "author": {"user": null}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/83afa23a615028e986f2c43ce00e16487e981acb", "committedDate": "2020-07-01T19:55:35Z", "message": "update from develop"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "14866ebad7cf05c33209951d4afea07d1763080a", "author": {"user": null}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/14866ebad7cf05c33209951d4afea07d1763080a", "committedDate": "2020-07-02T14:15:45Z", "message": "change log message"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "208324d6b5ead54d0d5eb3642f15527f943edec5", "author": {"user": null}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/208324d6b5ead54d0d5eb3642f15527f943edec5", "committedDate": "2020-07-05T00:58:46Z", "message": "Initial check in for JRF Fatal error fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a66911f809ac452fc83bc0b7fe77bba55f246f0d", "author": {"user": null}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/a66911f809ac452fc83bc0b7fe77bba55f246f0d", "committedDate": "2020-07-05T14:15:35Z", "message": "remove test for now"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dd006942ebae1c3be56b6c51a83354ca38c2f5e5", "author": {"user": null}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/dd006942ebae1c3be56b6c51a83354ca38c2f5e5", "committedDate": "2020-07-05T19:40:21Z", "message": "Fix logic"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8522acca008949f4173033e3f0eeca80c971db7d", "author": {"user": null}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/8522acca008949f4173033e3f0eeca80c971db7d", "committedDate": "2020-07-13T17:42:40Z", "message": "merge from develop"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1201c586b7fc25bc8b6d9919a8b78c5b9dac4b61", "author": {"user": null}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/1201c586b7fc25bc8b6d9919a8b78c5b9dac4b61", "committedDate": "2020-07-13T19:23:02Z", "message": "add info for create jrf domain and remove obsolete constants"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "80dd3c8e075c69a20251f14ed91f22e93502e1a4", "author": {"user": null}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/80dd3c8e075c69a20251f14ed91f22e93502e1a4", "committedDate": "2020-07-14T18:41:43Z", "message": "add comment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1f8dbead2e3dd2dcad9d6bd4cb12ee19dc6e070a", "author": {"user": null}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/1f8dbead2e3dd2dcad9d6bd4cb12ee19dc6e070a", "committedDate": "2020-07-14T19:15:55Z", "message": "relax retry and update comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9f40583add3ded2713769815c2b00af32ff8ca17", "author": {"user": null}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/9f40583add3ded2713769815c2b00af32ff8ca17", "committedDate": "2020-07-15T14:01:42Z", "message": "change comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "086a4d8fb8cdbe2fc5437f23d951cc22fca361ff", "author": {"user": null}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/086a4d8fb8cdbe2fc5437f23d951cc22fca361ff", "committedDate": "2020-07-17T17:11:47Z", "message": "change info text"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d710ac0aa43889eb170c04e9eebac8d38b7efe80", "author": {"user": null}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/d710ac0aa43889eb170c04e9eebac8d38b7efe80", "committedDate": "2020-07-17T17:51:14Z", "message": "minor text change"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d9f4e682d737c34040926fbad2cb931624e38e81", "author": {"user": null}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/d9f4e682d737c34040926fbad2cb931624e38e81", "committedDate": "2020-07-30T21:35:26Z", "message": "Add retry count to domain status and support retryCountMax"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "690dac56804555b5dd763b6384132ca906efb993", "author": {"user": null}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/690dac56804555b5dd763b6384132ca906efb993", "committedDate": "2020-08-04T13:09:53Z", "message": "Merge branch 'develop' into retry-failure-fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ee1e3181077e0c4b262ea48e029990c34f2ad211", "author": {"user": null}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/ee1e3181077e0c4b262ea48e029990c34f2ad211", "committedDate": "2020-08-04T19:05:13Z", "message": "Merge branch 'develop' into OWLS-83019-JRF-Introspect"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1628ae1d1f993a718a66b81f697622a93eff81ce", "author": {"user": null}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/1628ae1d1f993a718a66b81f697622a93eff81ce", "committedDate": "2020-08-04T19:50:46Z", "message": "Merge branch 'OWLS-83019-JRF-Introspect' into retry-failure-fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "affb71754efc1c891eaf168160fb0cf9ee3a571d", "author": {"user": null}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/affb71754efc1c891eaf168160fb0cf9ee3a571d", "committedDate": "2020-08-04T20:35:46Z", "message": "increment retry count only if there is an error message"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "27e4e00d4e67eb3834ed2ef524370d829bce5102", "author": {"user": null}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/27e4e00d4e67eb3834ed2ef524370d829bce5102", "committedDate": "2020-08-04T20:36:26Z", "message": "doc update"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "20c0c157b0f8f7063d639138a54494ee638b4c59", "author": {"user": null}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/20c0c157b0f8f7063d639138a54494ee638b4c59", "committedDate": "2020-08-06T13:16:53Z", "message": "Merge branch 'develop' into retry-failure-fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "04612f4ff77cbb2984b8dd176d009d3178d48386", "author": {"user": null}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/04612f4ff77cbb2984b8dd176d009d3178d48386", "committedDate": "2020-08-06T15:39:42Z", "message": "use existing error for increment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5fcfc9bf03159407fb8f8f82e541850dde03ba2a", "author": {"user": null}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/5fcfc9bf03159407fb8f8f82e541850dde03ba2a", "committedDate": "2020-08-06T18:00:41Z", "message": "Log message change"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY1OTA0MTQz", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1854#pullrequestreview-465904143", "createdAt": "2020-08-12T13:15:38Z", "commit": {"oid": "5fcfc9bf03159407fb8f8f82e541850dde03ba2a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQxMzoxNTozOFrOG_gxJA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQxMzoxNTozOFrOG_gxJA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTI1MDM0MA==", "bodyText": "This description isn't clear enough. Is this the number of attempts that have failed? What kind of failures does it include? When is it reset?", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1854#discussion_r469250340", "createdAt": "2020-08-12T13:15:38Z", "author": {"login": "rjeberhard"}, "path": "docs/domains/Domain.json", "diffHunk": "@@ -421,6 +421,11 @@\n             \"$ref\": \"#/definitions/ServerStatus\"\n           }\n         },\n+        \"retryCount\": {\n+          \"description\": \"Number of retries.\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5fcfc9bf03159407fb8f8f82e541850dde03ba2a"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY1OTA1NDk2", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1854#pullrequestreview-465905496", "createdAt": "2020-08-12T13:17:19Z", "commit": {"oid": "5fcfc9bf03159407fb8f8f82e541850dde03ba2a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQxMzoxNzoxOVrOG_g1MA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQxMzoxNzoxOVrOG_g1MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTI1MTM3Ng==", "bodyText": "Is there a way we can return a fatal error more clearly? It seems brittle to rely on a specific string like this.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1854#discussion_r469251376", "createdAt": "2020-08-12T13:17:19Z", "author": {"login": "rjeberhard"}, "path": "operator/src/main/java/oracle/kubernetes/operator/DomainProcessorImpl.java", "diffHunk": "@@ -630,10 +631,31 @@ public boolean wasInspectionRun() {\n \n     private boolean isShouldContinue() {\n       DomainPresenceInfo cachedInfo = getExistingDomainPresenceInfo(getNamespace(), getDomainUid());\n+      int currentRetryCount = Optional.ofNullable(liveInfo)\n+          .map(DomainPresenceInfo::getDomain)\n+          .map(Domain::getStatus)\n+          .map(DomainStatus::getRetryCount)\n+          .orElse(0);\n+\n+      String existingError = Optional.ofNullable(liveInfo)\n+          .map(DomainPresenceInfo::getDomain)\n+          .map(Domain::getStatus)\n+          .map(DomainStatus::getMessage)\n+          .orElse(null);\n+\n       if (cachedInfo == null || cachedInfo.getDomain() == null) {\n         return true;\n+      } else if (currentRetryCount > DomainPresence.getDomainPresenceFailureRetryMaxCount()) {\n+        LOGGER.fine(\"Stop introspection retry - exceeded configured domainPresenceFailureRetryMaxCount: \"\n+            + DomainPresence.getDomainPresenceFailureRetryMaxCount());\n+        return false;\n       } else if (isCachedInfoNewer(liveInfo, cachedInfo)) {\n         return false;  // we have already cached this\n+      } else if (existingError != null && existingError.startsWith(\"MII Fatal Error\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5fcfc9bf03159407fb8f8f82e541850dde03ba2a"}, "originalPosition": 32}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY1OTA4NjA1", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1854#pullrequestreview-465908605", "createdAt": "2020-08-12T13:20:57Z", "commit": {"oid": "5fcfc9bf03159407fb8f8f82e541850dde03ba2a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQxMzoyMDo1N1rOG_g-tQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQxMzoyMDo1N1rOG_g-tQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTI1MzgxMw==", "bodyText": "This PR is missing behavior that resets the retry count on introspectVersion or other changes.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1854#discussion_r469253813", "createdAt": "2020-08-12T13:20:57Z", "author": {"login": "rjeberhard"}, "path": "operator/src/main/java/oracle/kubernetes/operator/DomainProcessorImpl.java", "diffHunk": "@@ -630,10 +631,31 @@ public boolean wasInspectionRun() {\n \n     private boolean isShouldContinue() {\n       DomainPresenceInfo cachedInfo = getExistingDomainPresenceInfo(getNamespace(), getDomainUid());\n+      int currentRetryCount = Optional.ofNullable(liveInfo)\n+          .map(DomainPresenceInfo::getDomain)\n+          .map(Domain::getStatus)\n+          .map(DomainStatus::getRetryCount)\n+          .orElse(0);\n+\n+      String existingError = Optional.ofNullable(liveInfo)\n+          .map(DomainPresenceInfo::getDomain)\n+          .map(Domain::getStatus)\n+          .map(DomainStatus::getMessage)\n+          .orElse(null);\n+\n       if (cachedInfo == null || cachedInfo.getDomain() == null) {\n         return true;\n+      } else if (currentRetryCount > DomainPresence.getDomainPresenceFailureRetryMaxCount()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5fcfc9bf03159407fb8f8f82e541850dde03ba2a"}, "originalPosition": 26}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY1OTA5NTg5", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1854#pullrequestreview-465909589", "createdAt": "2020-08-12T13:22:01Z", "commit": {"oid": "5fcfc9bf03159407fb8f8f82e541850dde03ba2a"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY2MDE0MDI4", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1854#pullrequestreview-466014028", "createdAt": "2020-08-12T15:12:04Z", "commit": {"oid": "5fcfc9bf03159407fb8f8f82e541850dde03ba2a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQxNToxMjowNFrOG_l3dg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQxNToxMjowNFrOG_l3dg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTMzMzg3OA==", "bodyText": "Is it only introspection failures that cause a limited number of retries, or there other types of validation failures?  If so, then the wording is misleading.\nShould the text say 'domain.spec.retryCount' instead of 'domainPresenceFailureRetryMaxCount'?", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1854#discussion_r469333878", "createdAt": "2020-08-12T15:12:04Z", "author": {"login": "tbarnes-us"}, "path": "operator/src/main/java/oracle/kubernetes/operator/DomainProcessorImpl.java", "diffHunk": "@@ -630,10 +631,31 @@ public boolean wasInspectionRun() {\n \n     private boolean isShouldContinue() {\n       DomainPresenceInfo cachedInfo = getExistingDomainPresenceInfo(getNamespace(), getDomainUid());\n+      int currentRetryCount = Optional.ofNullable(liveInfo)\n+          .map(DomainPresenceInfo::getDomain)\n+          .map(Domain::getStatus)\n+          .map(DomainStatus::getRetryCount)\n+          .orElse(0);\n+\n+      String existingError = Optional.ofNullable(liveInfo)\n+          .map(DomainPresenceInfo::getDomain)\n+          .map(Domain::getStatus)\n+          .map(DomainStatus::getMessage)\n+          .orElse(null);\n+\n       if (cachedInfo == null || cachedInfo.getDomain() == null) {\n         return true;\n+      } else if (currentRetryCount > DomainPresence.getDomainPresenceFailureRetryMaxCount()) {\n+        LOGGER.fine(\"Stop introspection retry - exceeded configured domainPresenceFailureRetryMaxCount: \"\n+            + DomainPresence.getDomainPresenceFailureRetryMaxCount());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5fcfc9bf03159407fb8f8f82e541850dde03ba2a"}, "originalPosition": 28}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1e556114d6f8b3564ed1d67eb133dc3d671beaae", "author": {"user": null}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/1e556114d6f8b3564ed1d67eb133dc3d671beaae", "committedDate": "2020-08-13T18:05:49Z", "message": "rename retryCount to introspectJobFailureRetryCount"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d9a16a28a9d448d66876b5fd05734b807d0dc402", "author": {"user": null}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/d9a16a28a9d448d66876b5fd05734b807d0dc402", "committedDate": "2020-08-17T21:39:16Z", "message": "Add logging for retry counter"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "57de2eac27b69daccaa96dae84bfb39fd2ddc4f0", "author": {"user": null}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/57de2eac27b69daccaa96dae84bfb39fd2ddc4f0", "committedDate": "2020-08-17T23:27:37Z", "message": "Fix NPE in unit test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "71baf527f1c9cdcbaedea64e7c521d18eabb56cc", "author": {"user": null}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/71baf527f1c9cdcbaedea64e7c521d18eabb56cc", "committedDate": "2020-08-18T02:49:42Z", "message": "merge from develop"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "70202a2f2e3a10adc17971a1bac85227a9229bd3", "author": {"user": null}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/70202a2f2e3a10adc17971a1bac85227a9229bd3", "committedDate": "2020-08-18T03:46:11Z", "message": "Minor refactoring"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "599e20e2783abe1d3f3cd5884be6488e6a6ec616", "author": {"user": null}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/599e20e2783abe1d3f3cd5884be6488e6a6ec616", "committedDate": "2020-08-18T14:56:50Z", "message": "refactor code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "baaf912f7709c3ff0fbc8bc7c9b17703ced9a0ff", "author": {"user": null}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/baaf912f7709c3ff0fbc8bc7c9b17703ced9a0ff", "committedDate": "2020-08-18T18:21:53Z", "message": "update description of field"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b4eb89ebedc17dc99453620e8d1d2c798b49883b", "author": {"user": null}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/b4eb89ebedc17dc99453620e8d1d2c798b49883b", "committedDate": "2020-08-18T18:51:48Z", "message": "changing description texts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3bcb0ffba7fb693bb4bc401eed5a14f1ff364e12", "author": {"user": null}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/3bcb0ffba7fb693bb4bc401eed5a14f1ff364e12", "committedDate": "2020-08-18T18:52:10Z", "message": "missed files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ee62903f2407ba1c6a124780140f37014f9093c4", "author": {"user": null}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/ee62903f2407ba1c6a124780140f37014f9093c4", "committedDate": "2020-08-18T20:12:11Z", "message": "change \"MII Fatal Error\" to \"FatalIntrospectorError\""}}, {"__typename": "PullRequestCommit", "commit": {"oid": "73a7dd01d7945f23f8729709bc82912ab7de35b7", "author": {"user": null}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/73a7dd01d7945f23f8729709bc82912ab7de35b7", "committedDate": "2020-08-19T11:39:53Z", "message": "default failure retry count should be 0"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cd31afa4f4c0c8b995f2a80e10cf96471d03915c", "author": {"user": null}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/cd31afa4f4c0c8b995f2a80e10cf96471d03915c", "committedDate": "2020-08-19T18:22:02Z", "message": "change comparing failure retry count gte"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "24987da2dc2a8728e6d8dd610a621cc610c8d24e", "author": {"user": null}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/24987da2dc2a8728e6d8dd610a621cc610c8d24e", "committedDate": "2020-09-04T14:10:07Z", "message": "Merge branch 'develop' into retry-failure-fix"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgxOTk4Mjgy", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1854#pullrequestreview-481998282", "createdAt": "2020-09-03T16:13:28Z", "commit": {"oid": "cd31afa4f4c0c8b995f2a80e10cf96471d03915c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QxNjoxMzoyOFrOHMt7vw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QxNjoxMzoyOFrOHMt7vw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzA5NzUzNQ==", "bodyText": "(1) Rename to: IntrospectorJobFailureCount\n(2) Change text to:  \"The IntrospectorJobFailureCount is non-zero if introspector has failed.  Configure the maximum retry count using operator tuning parameter XXX.\"  (Look in our documentation to get the official name for 'operator tuning parameter'.)\n(3) Modify the documentation for operator tuning parameters if needed.  For example, remove documentation for the (ignored) interval setting.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1854#discussion_r483097535", "createdAt": "2020-09-03T16:13:28Z", "author": {"login": "tbarnes-us"}, "path": "operator/src/main/java/oracle/kubernetes/weblogic/domain/model/DomainStatus.java", "diffHunk": "@@ -276,6 +284,45 @@ public DomainStatus withReplicas(Integer replicas) {\n     return this;\n   }\n \n+  /**\n+   * The number of retries for an introspect job that fails.\n+   *\n+   * @return introspectJobFailureRetryCount\n+   */\n+  public Integer getIntrospectJobFailureRetryCount() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cd31afa4f4c0c8b995f2a80e10cf96471d03915c"}, "originalPosition": 31}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "92714964cc03b8c161536d0a28fc049d6974deba", "author": {"user": null}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/92714964cc03b8c161536d0a28fc049d6974deba", "committedDate": "2020-09-08T15:36:01Z", "message": "rename introspectJobFailureRetryCount field, reset counter if succcessful, and log before retry."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4420081246696db3de99a4eaea16f87bda3324ef", "author": {"user": null}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/4420081246696db3de99a4eaea16f87bda3324ef", "committedDate": "2020-09-08T23:56:31Z", "message": "Internationalize message and move logging to start of retry"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9394b89633d08666d701708eb41a1dcb5b860c70", "author": {"user": null}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/9394b89633d08666d701708eb41a1dcb5b860c70", "committedDate": "2020-09-09T08:48:49Z", "message": "update message"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg1MTE3MjIw", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1854#pullrequestreview-485117220", "createdAt": "2020-09-09T15:15:11Z", "commit": {"oid": "9394b89633d08666d701708eb41a1dcb5b860c70"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQxNToxNToxMVrOHPMXRQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQxNToxNToxMVrOHPMXRQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTY5MzI1Mw==", "bodyText": "(1) Suggested new text:  Retrying failed domain {0} introspect job, retry {1} of a maximum of {2}.\n(2) Can you add a new 'Retrying' INFO for the 'infinite' retry case?", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1854#discussion_r485693253", "createdAt": "2020-09-09T15:15:11Z", "author": {"login": "tbarnes-us"}, "path": "operator/src/main/resources/Operator.properties", "diffHunk": "@@ -205,7 +205,8 @@ WLSDO-0012=Managed Server ''{0}'' specified in the domain resource does not exis\n WLSDO-0013=Istio is enabled and the domain resource specified to expose channel {0} in the adminServices section. The channel name default, \\\n default-admin, default-secure are internal to the WebLogic Kubernetes Operator. Please create the network channel with a different name in the WebLogic Domain before \\\n exposing it.\n-WLSDO-0014=\"The introspect job had failed, retrying introspection job. Current failure count: {0}.\"\n+WLSDO-0014=\"The domain {0} introspect job failed, it will automatically retry in {1} seconds.\"\n+WLSDO-0015=\"Retrying failed domain {0} introspect job {1} of {2}.\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9394b89633d08666d701708eb41a1dcb5b860c70"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg1MTE5NjA3", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1854#pullrequestreview-485119607", "createdAt": "2020-09-09T15:17:37Z", "commit": {"oid": "9394b89633d08666d701708eb41a1dcb5b860c70"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQxNToxNzozN1rOHPMeaA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQxNToxNzozN1rOHPMeaA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTY5NTA4MA==", "bodyText": "Can you add \", current number of retries = {2}\" or \", total number of attempts = {2}\" (where the latter == retries + 1)?", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1854#discussion_r485695080", "createdAt": "2020-09-09T15:17:37Z", "author": {"login": "tbarnes-us"}, "path": "operator/src/main/resources/Operator.properties", "diffHunk": "@@ -205,7 +205,8 @@ WLSDO-0012=Managed Server ''{0}'' specified in the domain resource does not exis\n WLSDO-0013=Istio is enabled and the domain resource specified to expose channel {0} in the adminServices section. The channel name default, \\\n default-admin, default-secure are internal to the WebLogic Kubernetes Operator. Please create the network channel with a different name in the WebLogic Domain before \\\n exposing it.\n-WLSDO-0014=\"The introspect job had failed, retrying introspection job. Current failure count: {0}.\"\n+WLSDO-0014=\"The domain {0} introspect job failed, it will automatically retry in {1} seconds.\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9394b89633d08666d701708eb41a1dcb5b860c70"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2903e077c08b8fbb78d3c908d864bef85da69a1e", "author": {"user": null}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/2903e077c08b8fbb78d3c908d864bef85da69a1e", "committedDate": "2020-09-09T17:17:14Z", "message": "update message text"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2OTA5NjE0", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1854#pullrequestreview-486909614", "createdAt": "2020-09-11T15:30:13Z", "commit": {"oid": "2903e077c08b8fbb78d3c908d864bef85da69a1e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxNTozMDoxM1rOHQjoYQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxNTozMDoxM1rOHQjoYQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzEyMzA0MQ==", "bodyText": "The maximum doesn't always apply - so maybe the easiest thing to do is remove it?  Sorry if I suggested including it.  Or maybe change maximum --> \"potential maximum {2} (the retry limit does not apply to all types of failures).", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1854#discussion_r487123041", "createdAt": "2020-09-11T15:30:13Z", "author": {"login": "tbarnes-us"}, "path": "operator/src/main/resources/Operator.properties", "diffHunk": "@@ -205,6 +205,9 @@ WLSDO-0012=Managed Server ''{0}'' specified in the domain resource does not exis\n WLSDO-0013=Istio is enabled and the domain resource specified to expose channel {0} in the adminServices section. The channel name default, \\\n default-admin, default-secure are internal to the WebLogic Kubernetes Operator. Please create the network channel with a different name in the WebLogic Domain before \\\n exposing it.\n+WLSDO-0014=The domain {0} introspect job failed, it will automatically retry in {1} seconds. Current number of  \\\n+  retries = {2}\n+WLSDO-0015=\"Retrying failed domain {0} introspect job, retry {1} of a maximum {2}.\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2903e077c08b8fbb78d3c908d864bef85da69a1e"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg3MTYyOTM3", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1854#pullrequestreview-487162937", "createdAt": "2020-09-11T22:47:39Z", "commit": {"oid": "2903e077c08b8fbb78d3c908d864bef85da69a1e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkwNjkwOTY4", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1854#pullrequestreview-490690968", "createdAt": "2020-09-17T14:57:37Z", "commit": {"oid": "2903e077c08b8fbb78d3c908d864bef85da69a1e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "70c132fe558602e22fb4d348c63c4453e6bb0c18", "author": {"user": {"login": "rjeberhard", "name": "Ryan Eberhard"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/70c132fe558602e22fb4d348c63c4453e6bb0c18", "committedDate": "2020-09-17T15:04:45Z", "message": "Merge remote-tracking branch 'origin/develop' into retry-failure-fix"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4359, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}