{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk4MzEzMDg0", "number": 1534, "reviewThreads": {"totalCount": 28, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNFQwMTozNjowM1rODuo-QA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQxNzo0NjowNVrODvPOjA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwMjMyMzg0OnYy", "diffSide": "RIGHT", "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/ItWITValidation.java", "isResolved": false, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNFQwMTozNjowM1rOGAt8yQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQyMDozMzowMVrOGBozFA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzQwNjAyNQ==", "bodyText": "@ddsharpe is this a WDT thing, that it needs to be a forward slash, or should this be File.separator ?", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1534#discussion_r403406025", "createdAt": "2020-04-04T01:36:03Z", "author": {"login": "markxnelson"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/ItWITValidation.java", "diffHunk": "@@ -3,24 +3,45 @@\n \n package oracle.weblogic.kubernetes;\n \n+import java.util.Arrays;\n+import java.util.List;\n+\n import oracle.weblogic.kubernetes.actions.TestActions;\n+import oracle.weblogic.kubernetes.assertions.TestAssertions;\n import oracle.weblogic.kubernetes.extensions.LoggedTest;\n import org.junit.jupiter.api.DisplayName;\n import org.junit.jupiter.api.Test;\n \n+import static oracle.weblogic.kubernetes.actions.ActionConstants.MODEL_DIR;\n import static oracle.weblogic.kubernetes.actions.TestActions.withWITParams;\n import static org.junit.jupiter.api.Assertions.assertEquals;\n \n @DisplayName(\"Simple validation of basic WIT functions\")\n class ItWITValidation implements LoggedTest {\n+  private static final String WDT_MODEL_FILE = \"model1-wls.yaml\";\n+  private static final String IMAGE_NAME = \"test-mii-image-2\";\n+  private static final String IMAGE_TAG = \"v1\";\n+  \n   @Test\n   @DisplayName(\"Create a MII image\")\n   public void testCreatingMIIImage() {\n \n-    // create the MII image\n-    // TODO add model files and other contents to the image once we have those resources\n-    boolean success = TestActions.createMIIImage(withWITParams());\n+    logger.info(\"WDT model directory is \" + MODEL_DIR);\n+\n+    // build the model file list\n+    List<String> modelList = Arrays.asList(MODEL_DIR + \"/\" + WDT_MODEL_FILE);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "04301515cb86b18975f062fc4fbced6f5621f3c7"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzQ4MTI1NA==", "bodyText": "this should be File.separator.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1534#discussion_r403481254", "createdAt": "2020-04-04T15:17:06Z", "author": {"login": "doxiao"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/ItWITValidation.java", "diffHunk": "@@ -3,24 +3,45 @@\n \n package oracle.weblogic.kubernetes;\n \n+import java.util.Arrays;\n+import java.util.List;\n+\n import oracle.weblogic.kubernetes.actions.TestActions;\n+import oracle.weblogic.kubernetes.assertions.TestAssertions;\n import oracle.weblogic.kubernetes.extensions.LoggedTest;\n import org.junit.jupiter.api.DisplayName;\n import org.junit.jupiter.api.Test;\n \n+import static oracle.weblogic.kubernetes.actions.ActionConstants.MODEL_DIR;\n import static oracle.weblogic.kubernetes.actions.TestActions.withWITParams;\n import static org.junit.jupiter.api.Assertions.assertEquals;\n \n @DisplayName(\"Simple validation of basic WIT functions\")\n class ItWITValidation implements LoggedTest {\n+  private static final String WDT_MODEL_FILE = \"model1-wls.yaml\";\n+  private static final String IMAGE_NAME = \"test-mii-image-2\";\n+  private static final String IMAGE_TAG = \"v1\";\n+  \n   @Test\n   @DisplayName(\"Create a MII image\")\n   public void testCreatingMIIImage() {\n \n-    // create the MII image\n-    // TODO add model files and other contents to the image once we have those resources\n-    boolean success = TestActions.createMIIImage(withWITParams());\n+    logger.info(\"WDT model directory is \" + MODEL_DIR);\n+\n+    // build the model file list\n+    List<String> modelList = Arrays.asList(MODEL_DIR + \"/\" + WDT_MODEL_FILE);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzQwNjAyNQ=="}, "originalCommit": {"oid": "04301515cb86b18975f062fc4fbced6f5621f3c7"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDI0ODIzMw==", "bodyText": "Line 32 doesn't seem correct.  string concatenation (so one string), wrapped with Arrays.asList(), why?  If its just one model and not a list, wouldn't you prefer to use Collections.singletonList()?  And yes, this slash should be File.separator.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1534#discussion_r404248233", "createdAt": "2020-04-06T17:02:14Z", "author": {"login": "ddsharpe"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/ItWITValidation.java", "diffHunk": "@@ -3,24 +3,45 @@\n \n package oracle.weblogic.kubernetes;\n \n+import java.util.Arrays;\n+import java.util.List;\n+\n import oracle.weblogic.kubernetes.actions.TestActions;\n+import oracle.weblogic.kubernetes.assertions.TestAssertions;\n import oracle.weblogic.kubernetes.extensions.LoggedTest;\n import org.junit.jupiter.api.DisplayName;\n import org.junit.jupiter.api.Test;\n \n+import static oracle.weblogic.kubernetes.actions.ActionConstants.MODEL_DIR;\n import static oracle.weblogic.kubernetes.actions.TestActions.withWITParams;\n import static org.junit.jupiter.api.Assertions.assertEquals;\n \n @DisplayName(\"Simple validation of basic WIT functions\")\n class ItWITValidation implements LoggedTest {\n+  private static final String WDT_MODEL_FILE = \"model1-wls.yaml\";\n+  private static final String IMAGE_NAME = \"test-mii-image-2\";\n+  private static final String IMAGE_TAG = \"v1\";\n+  \n   @Test\n   @DisplayName(\"Create a MII image\")\n   public void testCreatingMIIImage() {\n \n-    // create the MII image\n-    // TODO add model files and other contents to the image once we have those resources\n-    boolean success = TestActions.createMIIImage(withWITParams());\n+    logger.info(\"WDT model directory is \" + MODEL_DIR);\n+\n+    // build the model file list\n+    List<String> modelList = Arrays.asList(MODEL_DIR + \"/\" + WDT_MODEL_FILE);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzQwNjAyNQ=="}, "originalCommit": {"oid": "04301515cb86b18975f062fc4fbced6f5621f3c7"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDI2OTY4OA==", "bodyText": "yes, right now, the test only has one model. but the code tries to show how to have one or more models in one image.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1534#discussion_r404269688", "createdAt": "2020-04-06T17:36:38Z", "author": {"login": "doxiao"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/ItWITValidation.java", "diffHunk": "@@ -3,24 +3,45 @@\n \n package oracle.weblogic.kubernetes;\n \n+import java.util.Arrays;\n+import java.util.List;\n+\n import oracle.weblogic.kubernetes.actions.TestActions;\n+import oracle.weblogic.kubernetes.assertions.TestAssertions;\n import oracle.weblogic.kubernetes.extensions.LoggedTest;\n import org.junit.jupiter.api.DisplayName;\n import org.junit.jupiter.api.Test;\n \n+import static oracle.weblogic.kubernetes.actions.ActionConstants.MODEL_DIR;\n import static oracle.weblogic.kubernetes.actions.TestActions.withWITParams;\n import static org.junit.jupiter.api.Assertions.assertEquals;\n \n @DisplayName(\"Simple validation of basic WIT functions\")\n class ItWITValidation implements LoggedTest {\n+  private static final String WDT_MODEL_FILE = \"model1-wls.yaml\";\n+  private static final String IMAGE_NAME = \"test-mii-image-2\";\n+  private static final String IMAGE_TAG = \"v1\";\n+  \n   @Test\n   @DisplayName(\"Create a MII image\")\n   public void testCreatingMIIImage() {\n \n-    // create the MII image\n-    // TODO add model files and other contents to the image once we have those resources\n-    boolean success = TestActions.createMIIImage(withWITParams());\n+    logger.info(\"WDT model directory is \" + MODEL_DIR);\n+\n+    // build the model file list\n+    List<String> modelList = Arrays.asList(MODEL_DIR + \"/\" + WDT_MODEL_FILE);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzQwNjAyNQ=="}, "originalCommit": {"oid": "04301515cb86b18975f062fc4fbced6f5621f3c7"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDM3MDE5Ng==", "bodyText": "changed to singletonList.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1534#discussion_r404370196", "createdAt": "2020-04-06T20:33:01Z", "author": {"login": "doxiao"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/ItWITValidation.java", "diffHunk": "@@ -3,24 +3,45 @@\n \n package oracle.weblogic.kubernetes;\n \n+import java.util.Arrays;\n+import java.util.List;\n+\n import oracle.weblogic.kubernetes.actions.TestActions;\n+import oracle.weblogic.kubernetes.assertions.TestAssertions;\n import oracle.weblogic.kubernetes.extensions.LoggedTest;\n import org.junit.jupiter.api.DisplayName;\n import org.junit.jupiter.api.Test;\n \n+import static oracle.weblogic.kubernetes.actions.ActionConstants.MODEL_DIR;\n import static oracle.weblogic.kubernetes.actions.TestActions.withWITParams;\n import static org.junit.jupiter.api.Assertions.assertEquals;\n \n @DisplayName(\"Simple validation of basic WIT functions\")\n class ItWITValidation implements LoggedTest {\n+  private static final String WDT_MODEL_FILE = \"model1-wls.yaml\";\n+  private static final String IMAGE_NAME = \"test-mii-image-2\";\n+  private static final String IMAGE_TAG = \"v1\";\n+  \n   @Test\n   @DisplayName(\"Create a MII image\")\n   public void testCreatingMIIImage() {\n \n-    // create the MII image\n-    // TODO add model files and other contents to the image once we have those resources\n-    boolean success = TestActions.createMIIImage(withWITParams());\n+    logger.info(\"WDT model directory is \" + MODEL_DIR);\n+\n+    // build the model file list\n+    List<String> modelList = Arrays.asList(MODEL_DIR + \"/\" + WDT_MODEL_FILE);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzQwNjAyNQ=="}, "originalCommit": {"oid": "04301515cb86b18975f062fc4fbced6f5621f3c7"}, "originalPosition": 33}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwMjMyNDM2OnYy", "diffSide": "RIGHT", "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/ItWITValidation.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNFQwMTozNjo0MlrOGAt9FQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQwMDo0Mzo1OVrOGBE6gg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzQwNjEwMQ==", "bodyText": "please static import TestActions so you can just say createMIIImage() instead of TestActions.createMIIImage()", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1534#discussion_r403406101", "createdAt": "2020-04-04T01:36:42Z", "author": {"login": "markxnelson"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/ItWITValidation.java", "diffHunk": "@@ -3,24 +3,45 @@\n \n package oracle.weblogic.kubernetes;\n \n+import java.util.Arrays;\n+import java.util.List;\n+\n import oracle.weblogic.kubernetes.actions.TestActions;\n+import oracle.weblogic.kubernetes.assertions.TestAssertions;\n import oracle.weblogic.kubernetes.extensions.LoggedTest;\n import org.junit.jupiter.api.DisplayName;\n import org.junit.jupiter.api.Test;\n \n+import static oracle.weblogic.kubernetes.actions.ActionConstants.MODEL_DIR;\n import static oracle.weblogic.kubernetes.actions.TestActions.withWITParams;\n import static org.junit.jupiter.api.Assertions.assertEquals;\n \n @DisplayName(\"Simple validation of basic WIT functions\")\n class ItWITValidation implements LoggedTest {\n+  private static final String WDT_MODEL_FILE = \"model1-wls.yaml\";\n+  private static final String IMAGE_NAME = \"test-mii-image-2\";\n+  private static final String IMAGE_TAG = \"v1\";\n+  \n   @Test\n   @DisplayName(\"Create a MII image\")\n   public void testCreatingMIIImage() {\n \n-    // create the MII image\n-    // TODO add model files and other contents to the image once we have those resources\n-    boolean success = TestActions.createMIIImage(withWITParams());\n+    logger.info(\"WDT model directory is \" + MODEL_DIR);\n+\n+    // build the model file list\n+    List<String> modelList = Arrays.asList(MODEL_DIR + \"/\" + WDT_MODEL_FILE);\n \n+    // build an image using WebLogic Image Tool\n+    boolean success = TestActions.createMIIImage(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "04301515cb86b18975f062fc4fbced6f5621f3c7"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc4MjI3NA==", "bodyText": "Done.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1534#discussion_r403782274", "createdAt": "2020-04-06T00:43:59Z", "author": {"login": "doxiao"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/ItWITValidation.java", "diffHunk": "@@ -3,24 +3,45 @@\n \n package oracle.weblogic.kubernetes;\n \n+import java.util.Arrays;\n+import java.util.List;\n+\n import oracle.weblogic.kubernetes.actions.TestActions;\n+import oracle.weblogic.kubernetes.assertions.TestAssertions;\n import oracle.weblogic.kubernetes.extensions.LoggedTest;\n import org.junit.jupiter.api.DisplayName;\n import org.junit.jupiter.api.Test;\n \n+import static oracle.weblogic.kubernetes.actions.ActionConstants.MODEL_DIR;\n import static oracle.weblogic.kubernetes.actions.TestActions.withWITParams;\n import static org.junit.jupiter.api.Assertions.assertEquals;\n \n @DisplayName(\"Simple validation of basic WIT functions\")\n class ItWITValidation implements LoggedTest {\n+  private static final String WDT_MODEL_FILE = \"model1-wls.yaml\";\n+  private static final String IMAGE_NAME = \"test-mii-image-2\";\n+  private static final String IMAGE_TAG = \"v1\";\n+  \n   @Test\n   @DisplayName(\"Create a MII image\")\n   public void testCreatingMIIImage() {\n \n-    // create the MII image\n-    // TODO add model files and other contents to the image once we have those resources\n-    boolean success = TestActions.createMIIImage(withWITParams());\n+    logger.info(\"WDT model directory is \" + MODEL_DIR);\n+\n+    // build the model file list\n+    List<String> modelList = Arrays.asList(MODEL_DIR + \"/\" + WDT_MODEL_FILE);\n \n+    // build an image using WebLogic Image Tool\n+    boolean success = TestActions.createMIIImage(", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzQwNjEwMQ=="}, "originalCommit": {"oid": "04301515cb86b18975f062fc4fbced6f5621f3c7"}, "originalPosition": 36}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwMjMyNTI0OnYy", "diffSide": "RIGHT", "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/ItWITValidation.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNFQwMTozNzoxOFrOGAt9eQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQwMDo0NDozOVrOGBE69g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzQwNjIwMQ==", "bodyText": "pleas static import so you don't need TestAssertions. here", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1534#discussion_r403406201", "createdAt": "2020-04-04T01:37:18Z", "author": {"login": "markxnelson"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/ItWITValidation.java", "diffHunk": "@@ -3,24 +3,45 @@\n \n package oracle.weblogic.kubernetes;\n \n+import java.util.Arrays;\n+import java.util.List;\n+\n import oracle.weblogic.kubernetes.actions.TestActions;\n+import oracle.weblogic.kubernetes.assertions.TestAssertions;\n import oracle.weblogic.kubernetes.extensions.LoggedTest;\n import org.junit.jupiter.api.DisplayName;\n import org.junit.jupiter.api.Test;\n \n+import static oracle.weblogic.kubernetes.actions.ActionConstants.MODEL_DIR;\n import static oracle.weblogic.kubernetes.actions.TestActions.withWITParams;\n import static org.junit.jupiter.api.Assertions.assertEquals;\n \n @DisplayName(\"Simple validation of basic WIT functions\")\n class ItWITValidation implements LoggedTest {\n+  private static final String WDT_MODEL_FILE = \"model1-wls.yaml\";\n+  private static final String IMAGE_NAME = \"test-mii-image-2\";\n+  private static final String IMAGE_TAG = \"v1\";\n+  \n   @Test\n   @DisplayName(\"Create a MII image\")\n   public void testCreatingMIIImage() {\n \n-    // create the MII image\n-    // TODO add model files and other contents to the image once we have those resources\n-    boolean success = TestActions.createMIIImage(withWITParams());\n+    logger.info(\"WDT model directory is \" + MODEL_DIR);\n+\n+    // build the model file list\n+    List<String> modelList = Arrays.asList(MODEL_DIR + \"/\" + WDT_MODEL_FILE);\n \n+    // build an image using WebLogic Image Tool\n+    boolean success = TestActions.createMIIImage(\n+        withWITParams()\n+            .modelImageName(IMAGE_NAME)\n+            .modelImageTag(IMAGE_TAG)\n+            .modelFiles(modelList)\n+            .wdtVersion(\"latest\")\n+            .redirect(false));\n+ \n     assertEquals(true, success, \"Failed to create the image using WebLogic Deploy Tool\");\n+    TestAssertions.imageExists(IMAGE_NAME, IMAGE_TAG);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "04301515cb86b18975f062fc4fbced6f5621f3c7"}, "originalPosition": 45}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzQwNjMwMQ==", "bodyText": "imageExists() could probably use a better name too - maybe assertImageExists", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1534#discussion_r403406301", "createdAt": "2020-04-04T01:37:59Z", "author": {"login": "markxnelson"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/ItWITValidation.java", "diffHunk": "@@ -3,24 +3,45 @@\n \n package oracle.weblogic.kubernetes;\n \n+import java.util.Arrays;\n+import java.util.List;\n+\n import oracle.weblogic.kubernetes.actions.TestActions;\n+import oracle.weblogic.kubernetes.assertions.TestAssertions;\n import oracle.weblogic.kubernetes.extensions.LoggedTest;\n import org.junit.jupiter.api.DisplayName;\n import org.junit.jupiter.api.Test;\n \n+import static oracle.weblogic.kubernetes.actions.ActionConstants.MODEL_DIR;\n import static oracle.weblogic.kubernetes.actions.TestActions.withWITParams;\n import static org.junit.jupiter.api.Assertions.assertEquals;\n \n @DisplayName(\"Simple validation of basic WIT functions\")\n class ItWITValidation implements LoggedTest {\n+  private static final String WDT_MODEL_FILE = \"model1-wls.yaml\";\n+  private static final String IMAGE_NAME = \"test-mii-image-2\";\n+  private static final String IMAGE_TAG = \"v1\";\n+  \n   @Test\n   @DisplayName(\"Create a MII image\")\n   public void testCreatingMIIImage() {\n \n-    // create the MII image\n-    // TODO add model files and other contents to the image once we have those resources\n-    boolean success = TestActions.createMIIImage(withWITParams());\n+    logger.info(\"WDT model directory is \" + MODEL_DIR);\n+\n+    // build the model file list\n+    List<String> modelList = Arrays.asList(MODEL_DIR + \"/\" + WDT_MODEL_FILE);\n \n+    // build an image using WebLogic Image Tool\n+    boolean success = TestActions.createMIIImage(\n+        withWITParams()\n+            .modelImageName(IMAGE_NAME)\n+            .modelImageTag(IMAGE_TAG)\n+            .modelFiles(modelList)\n+            .wdtVersion(\"latest\")\n+            .redirect(false));\n+ \n     assertEquals(true, success, \"Failed to create the image using WebLogic Deploy Tool\");\n+    TestAssertions.imageExists(IMAGE_NAME, IMAGE_TAG);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzQwNjIwMQ=="}, "originalCommit": {"oid": "04301515cb86b18975f062fc4fbced6f5621f3c7"}, "originalPosition": 45}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc4MjM5MA==", "bodyText": "Made the change to use static import and rename the method.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1534#discussion_r403782390", "createdAt": "2020-04-06T00:44:39Z", "author": {"login": "doxiao"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/ItWITValidation.java", "diffHunk": "@@ -3,24 +3,45 @@\n \n package oracle.weblogic.kubernetes;\n \n+import java.util.Arrays;\n+import java.util.List;\n+\n import oracle.weblogic.kubernetes.actions.TestActions;\n+import oracle.weblogic.kubernetes.assertions.TestAssertions;\n import oracle.weblogic.kubernetes.extensions.LoggedTest;\n import org.junit.jupiter.api.DisplayName;\n import org.junit.jupiter.api.Test;\n \n+import static oracle.weblogic.kubernetes.actions.ActionConstants.MODEL_DIR;\n import static oracle.weblogic.kubernetes.actions.TestActions.withWITParams;\n import static org.junit.jupiter.api.Assertions.assertEquals;\n \n @DisplayName(\"Simple validation of basic WIT functions\")\n class ItWITValidation implements LoggedTest {\n+  private static final String WDT_MODEL_FILE = \"model1-wls.yaml\";\n+  private static final String IMAGE_NAME = \"test-mii-image-2\";\n+  private static final String IMAGE_TAG = \"v1\";\n+  \n   @Test\n   @DisplayName(\"Create a MII image\")\n   public void testCreatingMIIImage() {\n \n-    // create the MII image\n-    // TODO add model files and other contents to the image once we have those resources\n-    boolean success = TestActions.createMIIImage(withWITParams());\n+    logger.info(\"WDT model directory is \" + MODEL_DIR);\n+\n+    // build the model file list\n+    List<String> modelList = Arrays.asList(MODEL_DIR + \"/\" + WDT_MODEL_FILE);\n \n+    // build an image using WebLogic Image Tool\n+    boolean success = TestActions.createMIIImage(\n+        withWITParams()\n+            .modelImageName(IMAGE_NAME)\n+            .modelImageTag(IMAGE_TAG)\n+            .modelFiles(modelList)\n+            .wdtVersion(\"latest\")\n+            .redirect(false));\n+ \n     assertEquals(true, success, \"Failed to create the image using WebLogic Deploy Tool\");\n+    TestAssertions.imageExists(IMAGE_NAME, IMAGE_TAG);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzQwNjIwMQ=="}, "originalCommit": {"oid": "04301515cb86b18975f062fc4fbced6f5621f3c7"}, "originalPosition": 45}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwMjMyNjM0OnYy", "diffSide": "RIGHT", "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/ActionConstants.java", "isResolved": true, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNFQwMTozODoxNVrOGAt99w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQxNzo0ODo0NVrOGBjHZQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzQwNjMyNw==", "bodyText": "needs a null check", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1534#discussion_r403406327", "createdAt": "2020-04-04T01:38:15Z", "author": {"login": "markxnelson"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/ActionConstants.java", "diffHunk": "@@ -0,0 +1,49 @@\n+// Copyright (c) 2020, Oracle Corporation and/or its affiliates.\n+// Licensed under the Universal Permissive License v 1.0 as shown at https://oss.oracle.com/licenses/upl.\n+\n+package oracle.weblogic.kubernetes.actions;\n+\n+public interface ActionConstants {\n+\n+  // Work directory for the integration test suite\n+  public static final String WORK_DIR \n+      = System.getProperty(\"java.io.tmpdir\") + \"/it-results\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "04301515cb86b18975f062fc4fbced6f5621f3c7"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzcxMzQyOA==", "bodyText": "I assumed this system property would never be null. I don't know what to do if it actually returns null.\nI am using this as a temporary solution for a to-be-added script that runs upfront to setup necessary environment for the integration test suite. That script would set the WORK_DIR to an appropriate directory according to the platform where the integration test runs. Once we have that script in place, we don't need this anymore.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1534#discussion_r403713428", "createdAt": "2020-04-05T14:59:28Z", "author": {"login": "doxiao"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/ActionConstants.java", "diffHunk": "@@ -0,0 +1,49 @@\n+// Copyright (c) 2020, Oracle Corporation and/or its affiliates.\n+// Licensed under the Universal Permissive License v 1.0 as shown at https://oss.oracle.com/licenses/upl.\n+\n+package oracle.weblogic.kubernetes.actions;\n+\n+public interface ActionConstants {\n+\n+  // Work directory for the integration test suite\n+  public static final String WORK_DIR \n+      = System.getProperty(\"java.io.tmpdir\") + \"/it-results\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzQwNjMyNw=="}, "originalCommit": {"oid": "04301515cb86b18975f062fc4fbced6f5621f3c7"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDI0OTg3OQ==", "bodyText": "I am okay without having a null check here.  If this fails, the build should fail.  Because this is in the test code, the NPE stacktrace is sufficient to debug it, in my opinion.  Shouldn't this \"/\" be File.separator also?", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1534#discussion_r404249879", "createdAt": "2020-04-06T17:04:43Z", "author": {"login": "ddsharpe"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/ActionConstants.java", "diffHunk": "@@ -0,0 +1,49 @@\n+// Copyright (c) 2020, Oracle Corporation and/or its affiliates.\n+// Licensed under the Universal Permissive License v 1.0 as shown at https://oss.oracle.com/licenses/upl.\n+\n+package oracle.weblogic.kubernetes.actions;\n+\n+public interface ActionConstants {\n+\n+  // Work directory for the integration test suite\n+  public static final String WORK_DIR \n+      = System.getProperty(\"java.io.tmpdir\") + \"/it-results\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzQwNjMyNw=="}, "originalCommit": {"oid": "04301515cb86b18975f062fc4fbced6f5621f3c7"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDI3MDQ3MQ==", "bodyText": "java.io.tmpdir is guaranteed to have a value by the System.getProperty javadoc.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1534#discussion_r404270471", "createdAt": "2020-04-06T17:37:51Z", "author": {"login": "rjeberhard"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/ActionConstants.java", "diffHunk": "@@ -0,0 +1,49 @@\n+// Copyright (c) 2020, Oracle Corporation and/or its affiliates.\n+// Licensed under the Universal Permissive License v 1.0 as shown at https://oss.oracle.com/licenses/upl.\n+\n+package oracle.weblogic.kubernetes.actions;\n+\n+public interface ActionConstants {\n+\n+  // Work directory for the integration test suite\n+  public static final String WORK_DIR \n+      = System.getProperty(\"java.io.tmpdir\") + \"/it-results\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzQwNjMyNw=="}, "originalCommit": {"oid": "04301515cb86b18975f062fc4fbced6f5621f3c7"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDI3NzA5Mw==", "bodyText": "ok - ignore me :)", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1534#discussion_r404277093", "createdAt": "2020-04-06T17:48:45Z", "author": {"login": "markxnelson"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/ActionConstants.java", "diffHunk": "@@ -0,0 +1,49 @@\n+// Copyright (c) 2020, Oracle Corporation and/or its affiliates.\n+// Licensed under the Universal Permissive License v 1.0 as shown at https://oss.oracle.com/licenses/upl.\n+\n+package oracle.weblogic.kubernetes.actions;\n+\n+public interface ActionConstants {\n+\n+  // Work directory for the integration test suite\n+  public static final String WORK_DIR \n+      = System.getProperty(\"java.io.tmpdir\") + \"/it-results\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzQwNjMyNw=="}, "originalCommit": {"oid": "04301515cb86b18975f062fc4fbced6f5621f3c7"}, "originalPosition": 10}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwMjMyNzA1OnYy", "diffSide": "RIGHT", "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/ActionConstants.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNFQwMTozODo1NlrOGAt-Rg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQwMDo0NDo1OFrOGBE7IQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzQwNjQwNg==", "bodyText": "typo - two slashes", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1534#discussion_r403406406", "createdAt": "2020-04-04T01:38:56Z", "author": {"login": "markxnelson"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/ActionConstants.java", "diffHunk": "@@ -0,0 +1,49 @@\n+// Copyright (c) 2020, Oracle Corporation and/or its affiliates.\n+// Licensed under the Universal Permissive License v 1.0 as shown at https://oss.oracle.com/licenses/upl.\n+\n+package oracle.weblogic.kubernetes.actions;\n+\n+public interface ActionConstants {\n+\n+  // Work directory for the integration test suite\n+  public static final String WORK_DIR \n+      = System.getProperty(\"java.io.tmpdir\") + \"/it-results\";\n+  // Directory for resources\n+  public static final String RESOURCE_DIR \n+      = System.getProperty(\"user.dir\") + \"/src/test/resources\"; \n+  // Directory for all WDT models\n+  public static final String MODEL_DIR = RESOURCE_DIR + \"/wdt-models\"; \n+  // Directory for download items\n+  public static final String DOWNLOAD_DIR = WORK_DIR + \"/download\";\n+  \n+  // ------------ WebLogicImageTool action constants -------------\n+  public static final String WLS = \"WLS\";\n+  public static final String JRF = \"JRF\";\n+  public static final String RJRF = \"RestrictedJRF\";\n+  public static final String WLS_BASE_IMAGE_NAME \n+      = \"container-registry.oracle.com/middleware/weblogic\";\n+  public static final String JRF_BASE_IMAGE_NAME \n+      = \"container-registry.oracle.com/middleware/fmw-infrastructure\";\n+  public static final String WLS_BASE_IMAGE_TAG = \"12.2.1.4\";\n+\n+  public static final String DEFAULT_MODEL_IMAGE_NAME = \"test-mii-image\";\n+  public static final String DEFAULT_MODEL_IMAGE_TAG  = \"v1\";\n+  \n+  // ------------ WebLogic Image Tool constants----------------------------\n+  public static final String WIT = \"WIT\";\n+  public static final String WDT = \"WDT\";\n+\n+  public static final String WIT_DOWNLOAD_URL \n+      = \"https://github.com//oracle/weblogic-image-tool\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "04301515cb86b18975f062fc4fbced6f5621f3c7"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc4MjQzMw==", "bodyText": "fixed", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1534#discussion_r403782433", "createdAt": "2020-04-06T00:44:58Z", "author": {"login": "doxiao"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/ActionConstants.java", "diffHunk": "@@ -0,0 +1,49 @@\n+// Copyright (c) 2020, Oracle Corporation and/or its affiliates.\n+// Licensed under the Universal Permissive License v 1.0 as shown at https://oss.oracle.com/licenses/upl.\n+\n+package oracle.weblogic.kubernetes.actions;\n+\n+public interface ActionConstants {\n+\n+  // Work directory for the integration test suite\n+  public static final String WORK_DIR \n+      = System.getProperty(\"java.io.tmpdir\") + \"/it-results\";\n+  // Directory for resources\n+  public static final String RESOURCE_DIR \n+      = System.getProperty(\"user.dir\") + \"/src/test/resources\"; \n+  // Directory for all WDT models\n+  public static final String MODEL_DIR = RESOURCE_DIR + \"/wdt-models\"; \n+  // Directory for download items\n+  public static final String DOWNLOAD_DIR = WORK_DIR + \"/download\";\n+  \n+  // ------------ WebLogicImageTool action constants -------------\n+  public static final String WLS = \"WLS\";\n+  public static final String JRF = \"JRF\";\n+  public static final String RJRF = \"RestrictedJRF\";\n+  public static final String WLS_BASE_IMAGE_NAME \n+      = \"container-registry.oracle.com/middleware/weblogic\";\n+  public static final String JRF_BASE_IMAGE_NAME \n+      = \"container-registry.oracle.com/middleware/fmw-infrastructure\";\n+  public static final String WLS_BASE_IMAGE_TAG = \"12.2.1.4\";\n+\n+  public static final String DEFAULT_MODEL_IMAGE_NAME = \"test-mii-image\";\n+  public static final String DEFAULT_MODEL_IMAGE_TAG  = \"v1\";\n+  \n+  // ------------ WebLogic Image Tool constants----------------------------\n+  public static final String WIT = \"WIT\";\n+  public static final String WDT = \"WDT\";\n+\n+  public static final String WIT_DOWNLOAD_URL \n+      = \"https://github.com//oracle/weblogic-image-tool\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzQwNjQwNg=="}, "originalCommit": {"oid": "04301515cb86b18975f062fc4fbced6f5621f3c7"}, "originalPosition": 37}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwMjMyNzI5OnYy", "diffSide": "RIGHT", "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/ActionConstants.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNFQwMTozOTowNlrOGAt-Xw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQwMDo0NzowMVrOGBE8Ew==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzQwNjQzMQ==", "bodyText": "typo", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1534#discussion_r403406431", "createdAt": "2020-04-04T01:39:06Z", "author": {"login": "markxnelson"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/ActionConstants.java", "diffHunk": "@@ -0,0 +1,49 @@\n+// Copyright (c) 2020, Oracle Corporation and/or its affiliates.\n+// Licensed under the Universal Permissive License v 1.0 as shown at https://oss.oracle.com/licenses/upl.\n+\n+package oracle.weblogic.kubernetes.actions;\n+\n+public interface ActionConstants {\n+\n+  // Work directory for the integration test suite\n+  public static final String WORK_DIR \n+      = System.getProperty(\"java.io.tmpdir\") + \"/it-results\";\n+  // Directory for resources\n+  public static final String RESOURCE_DIR \n+      = System.getProperty(\"user.dir\") + \"/src/test/resources\"; \n+  // Directory for all WDT models\n+  public static final String MODEL_DIR = RESOURCE_DIR + \"/wdt-models\"; \n+  // Directory for download items\n+  public static final String DOWNLOAD_DIR = WORK_DIR + \"/download\";\n+  \n+  // ------------ WebLogicImageTool action constants -------------\n+  public static final String WLS = \"WLS\";\n+  public static final String JRF = \"JRF\";\n+  public static final String RJRF = \"RestrictedJRF\";\n+  public static final String WLS_BASE_IMAGE_NAME \n+      = \"container-registry.oracle.com/middleware/weblogic\";\n+  public static final String JRF_BASE_IMAGE_NAME \n+      = \"container-registry.oracle.com/middleware/fmw-infrastructure\";\n+  public static final String WLS_BASE_IMAGE_TAG = \"12.2.1.4\";\n+\n+  public static final String DEFAULT_MODEL_IMAGE_NAME = \"test-mii-image\";\n+  public static final String DEFAULT_MODEL_IMAGE_TAG  = \"v1\";\n+  \n+  // ------------ WebLogic Image Tool constants----------------------------\n+  public static final String WIT = \"WIT\";\n+  public static final String WDT = \"WDT\";\n+\n+  public static final String WIT_DOWNLOAD_URL \n+      = \"https://github.com//oracle/weblogic-image-tool\";\n+  public static final String WIT_VERSION    = \"release-1.8.3\";\n+  public static final String WIT_FILE_NAME  = \"imagetool.zip\";\n+\n+  public static final String WDT_DOWNLOAD_URL \n+      = \"https://github.com//oracle/weblogic-deploy-tooling\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "04301515cb86b18975f062fc4fbced6f5621f3c7"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc4MjY3NQ==", "bodyText": "fixed", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1534#discussion_r403782675", "createdAt": "2020-04-06T00:47:01Z", "author": {"login": "doxiao"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/ActionConstants.java", "diffHunk": "@@ -0,0 +1,49 @@\n+// Copyright (c) 2020, Oracle Corporation and/or its affiliates.\n+// Licensed under the Universal Permissive License v 1.0 as shown at https://oss.oracle.com/licenses/upl.\n+\n+package oracle.weblogic.kubernetes.actions;\n+\n+public interface ActionConstants {\n+\n+  // Work directory for the integration test suite\n+  public static final String WORK_DIR \n+      = System.getProperty(\"java.io.tmpdir\") + \"/it-results\";\n+  // Directory for resources\n+  public static final String RESOURCE_DIR \n+      = System.getProperty(\"user.dir\") + \"/src/test/resources\"; \n+  // Directory for all WDT models\n+  public static final String MODEL_DIR = RESOURCE_DIR + \"/wdt-models\"; \n+  // Directory for download items\n+  public static final String DOWNLOAD_DIR = WORK_DIR + \"/download\";\n+  \n+  // ------------ WebLogicImageTool action constants -------------\n+  public static final String WLS = \"WLS\";\n+  public static final String JRF = \"JRF\";\n+  public static final String RJRF = \"RestrictedJRF\";\n+  public static final String WLS_BASE_IMAGE_NAME \n+      = \"container-registry.oracle.com/middleware/weblogic\";\n+  public static final String JRF_BASE_IMAGE_NAME \n+      = \"container-registry.oracle.com/middleware/fmw-infrastructure\";\n+  public static final String WLS_BASE_IMAGE_TAG = \"12.2.1.4\";\n+\n+  public static final String DEFAULT_MODEL_IMAGE_NAME = \"test-mii-image\";\n+  public static final String DEFAULT_MODEL_IMAGE_TAG  = \"v1\";\n+  \n+  // ------------ WebLogic Image Tool constants----------------------------\n+  public static final String WIT = \"WIT\";\n+  public static final String WDT = \"WDT\";\n+\n+  public static final String WIT_DOWNLOAD_URL \n+      = \"https://github.com//oracle/weblogic-image-tool\";\n+  public static final String WIT_VERSION    = \"release-1.8.3\";\n+  public static final String WIT_FILE_NAME  = \"imagetool.zip\";\n+\n+  public static final String WDT_DOWNLOAD_URL \n+      = \"https://github.com//oracle/weblogic-deploy-tooling\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzQwNjQzMQ=="}, "originalCommit": {"oid": "04301515cb86b18975f062fc4fbced6f5621f3c7"}, "originalPosition": 42}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwMjMyODkyOnYy", "diffSide": "RIGHT", "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/impl/primitive/InstallParams.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNFQwMTo0MToyOVrOGAt_OA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQxNzoxMjozOVrOGBhv6Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzQwNjY0OA==", "bodyText": "this is ok, but i had to stop and think to work out what you meant here.\ni know this is uglier:\nif (type == WIT) {\n  return WIT_VERSION;\n} else if (type == WDT) {\n  return WDT_VERSION;\n} else {\n // do something!!!\n}\n\nbut it is much easier to read and immediately understand what you meant, plus it is more explicit about what do to if type is not WIT or WDT ..", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1534#discussion_r403406648", "createdAt": "2020-04-04T01:41:29Z", "author": {"login": "markxnelson"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/impl/primitive/InstallParams.java", "diffHunk": "@@ -53,7 +51,7 @@ public InstallParams version(String version) {\n \n   public String version() {\n     if (version == null) {\n-      return WIT_TYPE.equals(type) ? DEFAULT_WIT_VERSION : DEFAULT_WDT_VERSION;\n+      return WIT.equals(type) ? WIT_VERSION : WDT_VERSION;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "04301515cb86b18975f062fc4fbced6f5621f3c7"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc3NzYyMg==", "bodyText": "Changed to\nreturn WIT.equals(type) ? WIT_FILE_NAME : WDT_FILE_NAME;", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1534#discussion_r403777622", "createdAt": "2020-04-06T00:09:14Z", "author": {"login": "doxiao"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/impl/primitive/InstallParams.java", "diffHunk": "@@ -53,7 +51,7 @@ public InstallParams version(String version) {\n \n   public String version() {\n     if (version == null) {\n-      return WIT_TYPE.equals(type) ? DEFAULT_WIT_VERSION : DEFAULT_WDT_VERSION;\n+      return WIT.equals(type) ? WIT_VERSION : WDT_VERSION;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzQwNjY0OA=="}, "originalCommit": {"oid": "04301515cb86b18975f062fc4fbced6f5621f3c7"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDI1NDY5Nw==", "bodyText": "Where there are this many \"if\" checks on type, it makes me think this should be two separate classes (that could extend the same base/interface).  It would also make it easier to read :)", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1534#discussion_r404254697", "createdAt": "2020-04-06T17:12:39Z", "author": {"login": "ddsharpe"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/impl/primitive/InstallParams.java", "diffHunk": "@@ -53,7 +51,7 @@ public InstallParams version(String version) {\n \n   public String version() {\n     if (version == null) {\n-      return WIT_TYPE.equals(type) ? DEFAULT_WIT_VERSION : DEFAULT_WDT_VERSION;\n+      return WIT.equals(type) ? WIT_VERSION : WDT_VERSION;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzQwNjY0OA=="}, "originalCommit": {"oid": "04301515cb86b18975f062fc4fbced6f5621f3c7"}, "originalPosition": 39}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwMjMzMDM3OnYy", "diffSide": "RIGHT", "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/impl/primitive/InstallWITCommon.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNFQwMTo0Mjo1N1rOGAt_7g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQwMDo0NzoxMlrOGBE8Iw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzQwNjgzMA==", "bodyText": "the code does not appear to create any directories?", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1534#discussion_r403406830", "createdAt": "2020-04-04T01:42:57Z", "author": {"login": "markxnelson"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/impl/primitive/InstallWITCommon.java", "diffHunk": "@@ -42,17 +36,17 @@ protected void checkDirectory(String dir) {\n   }\n \n   /**\n-   * Check if the required directoies exist.\n-   * Currently the directies will be created if missing. We may remove this function\n-   * once we have all required working directies pre-created.\n+   * Check if the required directories exist.\n+   * Currently the directories will be created if missing. We may remove this function", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "04301515cb86b18975f062fc4fbced6f5621f3c7"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc4MjY5MQ==", "bodyText": "fixed the javadoc", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1534#discussion_r403782691", "createdAt": "2020-04-06T00:47:12Z", "author": {"login": "doxiao"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/impl/primitive/InstallWITCommon.java", "diffHunk": "@@ -42,17 +36,17 @@ protected void checkDirectory(String dir) {\n   }\n \n   /**\n-   * Check if the required directoies exist.\n-   * Currently the directies will be created if missing. We may remove this function\n-   * once we have all required working directies pre-created.\n+   * Check if the required directories exist.\n+   * Currently the directories will be created if missing. We may remove this function", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzQwNjgzMA=="}, "originalCommit": {"oid": "04301515cb86b18975f062fc4fbced6f5621f3c7"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwMjMzMDY5OnYy", "diffSide": "RIGHT", "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/impl/primitive/InstallWITCommon.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNFQwMTo0MzoyMFrOGAuAFQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNVQxNTowMDoxNlrOGBAt8A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzQwNjg2OQ==", "bodyText": "do we need to check that it is a file, not a directory or something else?", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1534#discussion_r403406869", "createdAt": "2020-04-04T01:43:20Z", "author": {"login": "markxnelson"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/impl/primitive/InstallWITCommon.java", "diffHunk": "@@ -42,17 +36,17 @@ protected void checkDirectory(String dir) {\n   }\n \n   /**\n-   * Check if the required directoies exist.\n-   * Currently the directies will be created if missing. We may remove this function\n-   * once we have all required working directies pre-created.\n+   * Check if the required directories exist.\n+   * Currently the directories will be created if missing. We may remove this function\n+   * once we have all required working directories pre-created.\n    *\n    * @param dir the directory that needs to be checked\n    */\n   protected void checkFile(String fileName) throws FileNotFoundException {\n     File file = new File(fileName);\n     if (!file.exists()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "04301515cb86b18975f062fc4fbced6f5621f3c7"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzcxMzUyMA==", "bodyText": "good point. I need to check if it is indeed a file.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1534#discussion_r403713520", "createdAt": "2020-04-05T15:00:16Z", "author": {"login": "doxiao"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/impl/primitive/InstallWITCommon.java", "diffHunk": "@@ -42,17 +36,17 @@ protected void checkDirectory(String dir) {\n   }\n \n   /**\n-   * Check if the required directoies exist.\n-   * Currently the directies will be created if missing. We may remove this function\n-   * once we have all required working directies pre-created.\n+   * Check if the required directories exist.\n+   * Currently the directories will be created if missing. We may remove this function\n+   * once we have all required working directories pre-created.\n    *\n    * @param dir the directory that needs to be checked\n    */\n   protected void checkFile(String fileName) throws FileNotFoundException {\n     File file = new File(fileName);\n     if (!file.exists()) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzQwNjg2OQ=="}, "originalCommit": {"oid": "04301515cb86b18975f062fc4fbced6f5621f3c7"}, "originalPosition": 28}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwMjMzMDk3OnYy", "diffSide": "RIGHT", "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/impl/primitive/InstallWITCommon.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNFQwMTo0MzozMlrOGAuANw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQwMDo0NzozMFrOGBE8RA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzQwNjkwMw==", "bodyText": "\"was not found\"", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1534#discussion_r403406903", "createdAt": "2020-04-04T01:43:32Z", "author": {"login": "markxnelson"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/impl/primitive/InstallWITCommon.java", "diffHunk": "@@ -42,17 +36,17 @@ protected void checkDirectory(String dir) {\n   }\n \n   /**\n-   * Check if the required directoies exist.\n-   * Currently the directies will be created if missing. We may remove this function\n-   * once we have all required working directies pre-created.\n+   * Check if the required directories exist.\n+   * Currently the directories will be created if missing. We may remove this function\n+   * once we have all required working directories pre-created.\n    *\n    * @param dir the directory that needs to be checked\n    */\n   protected void checkFile(String fileName) throws FileNotFoundException {\n     File file = new File(fileName);\n     if (!file.exists()) {\n-      logger.warning(\"The expected file \\\" + fileName + \\\" not found.\");\n-      throw new FileNotFoundException(\"The expected file \\\" + fileName + \\\" not found.\");\n+      logger.warning(\"The expected file \" + fileName + \" not found.\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "04301515cb86b18975f062fc4fbced6f5621f3c7"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc4MjcyNA==", "bodyText": "fixed", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1534#discussion_r403782724", "createdAt": "2020-04-06T00:47:30Z", "author": {"login": "doxiao"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/impl/primitive/InstallWITCommon.java", "diffHunk": "@@ -42,17 +36,17 @@ protected void checkDirectory(String dir) {\n   }\n \n   /**\n-   * Check if the required directoies exist.\n-   * Currently the directies will be created if missing. We may remove this function\n-   * once we have all required working directies pre-created.\n+   * Check if the required directories exist.\n+   * Currently the directories will be created if missing. We may remove this function\n+   * once we have all required working directories pre-created.\n    *\n    * @param dir the directory that needs to be checked\n    */\n   protected void checkFile(String fileName) throws FileNotFoundException {\n     File file = new File(fileName);\n     if (!file.exists()) {\n-      logger.warning(\"The expected file \\\" + fileName + \\\" not found.\");\n-      throw new FileNotFoundException(\"The expected file \\\" + fileName + \\\" not found.\");\n+      logger.warning(\"The expected file \" + fileName + \" not found.\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzQwNjkwMw=="}, "originalCommit": {"oid": "04301515cb86b18975f062fc4fbced6f5621f3c7"}, "originalPosition": 31}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwMjMzMjE4OnYy", "diffSide": "RIGHT", "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/impl/primitive/Installer.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNFQwMTo0NDowOFrOGAuAvg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQwMDo1MDozMlrOGBE92A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzQwNzAzOA==", "bodyText": "i think we should try to avoid inheritance as much as possible", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1534#discussion_r403407038", "createdAt": "2020-04-04T01:44:08Z", "author": {"login": "markxnelson"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/impl/primitive/Installer.java", "diffHunk": "@@ -5,17 +5,19 @@\n \n import java.io.File;\n \n+import static oracle.weblogic.kubernetes.actions.ActionConstants.DOWNLOAD_DIR;\n+import static oracle.weblogic.kubernetes.actions.ActionConstants.IMAGE_TOOL;\n import static oracle.weblogic.kubernetes.extensions.LoggedTest.logger;\n \n+\n /**\n  *  Implementation of actions that download/install tools for the uses to use.\n  *  NOTE: This class is a temporary solution, and may go away once we eventually\n  *  install everything before the Java test starts to run.\n  */\n \n public class Installer extends InstallWITCommon {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "04301515cb86b18975f062fc4fbced6f5621f3c7"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc4MzEyOA==", "bodyText": "Got rid of the inheritance - InstallWITCommon class is removed, and the common methods are moved into FileUtils and a new action: Command and CommandParams. I am not very happy about the class name. Any suggestions?\nWe can also get rid of ActionImplCommon once Vanaj's code in PR#1535 is updated; it uses ActionImplCommon right now.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1534#discussion_r403783128", "createdAt": "2020-04-06T00:50:32Z", "author": {"login": "doxiao"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/impl/primitive/Installer.java", "diffHunk": "@@ -5,17 +5,19 @@\n \n import java.io.File;\n \n+import static oracle.weblogic.kubernetes.actions.ActionConstants.DOWNLOAD_DIR;\n+import static oracle.weblogic.kubernetes.actions.ActionConstants.IMAGE_TOOL;\n import static oracle.weblogic.kubernetes.extensions.LoggedTest.logger;\n \n+\n /**\n  *  Implementation of actions that download/install tools for the uses to use.\n  *  NOTE: This class is a temporary solution, and may go away once we eventually\n  *  install everything before the Java test starts to run.\n  */\n \n public class Installer extends InstallWITCommon {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzQwNzAzOA=="}, "originalCommit": {"oid": "04301515cb86b18975f062fc4fbced6f5621f3c7"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwMjMzMzQwOnYy", "diffSide": "RIGHT", "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/impl/primitive/Installer.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNFQwMTo0NjowM1rOGAuBbA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQwMDo1MDo0N1rOGBE9-Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzQwNzIxMg==", "bodyText": "i am not sure what this is meant to do.\nare you trying to say - if the file DOES exist, then unzip it?\nor if it DOES NOT exist, and you asked me to unzip, then unzip it?\nseems we could write this with code that is longer, but much clearer", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1534#discussion_r403407212", "createdAt": "2020-04-04T01:46:03Z", "author": {"login": "markxnelson"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/impl/primitive/Installer.java", "diffHunk": "@@ -35,25 +37,25 @@ public boolean download() {\n     boolean downloadResult = true;\n     boolean unzipResult = true;\n     if (params.verify()\n-        && new File(downloadDir, params.fileName()).exists()) {\n+        && new File(DOWNLOAD_DIR, params.fileName()).exists()) {\n       logger.info(\"File \" + params.fileName() + \" already exists.\");\n     } else {\n       checkDirectory(WORK_DIR);\n       downloadResult = executeAndVerify(buildDownloadCommand(), params.direct());\n     }\n-    if (!(new File(downloadDir + \"../imagetool/imagetool.sh\").exists()) \n+    if (!(new File(IMAGE_TOOL).exists()) ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "04301515cb86b18975f062fc4fbced6f5621f3c7"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzcxMzU4NA==", "bodyText": "This is try not to unzip it more than once.  I'll make it clearer.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1534#discussion_r403713584", "createdAt": "2020-04-05T15:00:45Z", "author": {"login": "doxiao"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/impl/primitive/Installer.java", "diffHunk": "@@ -35,25 +37,25 @@ public boolean download() {\n     boolean downloadResult = true;\n     boolean unzipResult = true;\n     if (params.verify()\n-        && new File(downloadDir, params.fileName()).exists()) {\n+        && new File(DOWNLOAD_DIR, params.fileName()).exists()) {\n       logger.info(\"File \" + params.fileName() + \" already exists.\");\n     } else {\n       checkDirectory(WORK_DIR);\n       downloadResult = executeAndVerify(buildDownloadCommand(), params.direct());\n     }\n-    if (!(new File(downloadDir + \"../imagetool/imagetool.sh\").exists()) \n+    if (!(new File(IMAGE_TOOL).exists()) ", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzQwNzIxMg=="}, "originalCommit": {"oid": "04301515cb86b18975f062fc4fbced6f5621f3c7"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc4MzE2MQ==", "bodyText": "Improved the code.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1534#discussion_r403783161", "createdAt": "2020-04-06T00:50:47Z", "author": {"login": "doxiao"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/impl/primitive/Installer.java", "diffHunk": "@@ -35,25 +37,25 @@ public boolean download() {\n     boolean downloadResult = true;\n     boolean unzipResult = true;\n     if (params.verify()\n-        && new File(downloadDir, params.fileName()).exists()) {\n+        && new File(DOWNLOAD_DIR, params.fileName()).exists()) {\n       logger.info(\"File \" + params.fileName() + \" already exists.\");\n     } else {\n       checkDirectory(WORK_DIR);\n       downloadResult = executeAndVerify(buildDownloadCommand(), params.direct());\n     }\n-    if (!(new File(downloadDir + \"../imagetool/imagetool.sh\").exists()) \n+    if (!(new File(IMAGE_TOOL).exists()) ", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzQwNzIxMg=="}, "originalCommit": {"oid": "04301515cb86b18975f062fc4fbced6f5621f3c7"}, "originalPosition": 34}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwMjMzMzg4OnYy", "diffSide": "RIGHT", "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/impl/primitive/Installer.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNFQwMTo0Njo0MlrOGAuBsg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQwMDo0Mjo1NVrOGBE5-Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzQwNzI4Mg==", "bodyText": "I think String.format() would make this easier to read", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1534#discussion_r403407282", "createdAt": "2020-04-04T01:46:42Z", "author": {"login": "markxnelson"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/impl/primitive/Installer.java", "diffHunk": "@@ -35,25 +37,25 @@ public boolean download() {\n     boolean downloadResult = true;\n     boolean unzipResult = true;\n     if (params.verify()\n-        && new File(downloadDir, params.fileName()).exists()) {\n+        && new File(DOWNLOAD_DIR, params.fileName()).exists()) {\n       logger.info(\"File \" + params.fileName() + \" already exists.\");\n     } else {\n       checkDirectory(WORK_DIR);\n       downloadResult = executeAndVerify(buildDownloadCommand(), params.direct());\n     }\n-    if (!(new File(downloadDir + \"../imagetool/imagetool.sh\").exists()) \n+    if (!(new File(IMAGE_TOOL).exists()) \n         && params.unzip()) {\n-      unzipResult = unzip(downloadDir, params.fileName(), downloadDir + \"/..\");\n+      unzipResult = unzip();\n     }\n     return downloadResult && unzipResult;\n   }\n \n-  private boolean unzip(String path, String fileName, String targetDir) {\n+  private boolean unzip() {\n     String command = ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "04301515cb86b18975f062fc4fbced6f5621f3c7"}, "originalPosition": 44}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc4MjEzNw==", "bodyText": "yes. Changed the code to use String.format().", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1534#discussion_r403782137", "createdAt": "2020-04-06T00:42:55Z", "author": {"login": "doxiao"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/impl/primitive/Installer.java", "diffHunk": "@@ -35,25 +37,25 @@ public boolean download() {\n     boolean downloadResult = true;\n     boolean unzipResult = true;\n     if (params.verify()\n-        && new File(downloadDir, params.fileName()).exists()) {\n+        && new File(DOWNLOAD_DIR, params.fileName()).exists()) {\n       logger.info(\"File \" + params.fileName() + \" already exists.\");\n     } else {\n       checkDirectory(WORK_DIR);\n       downloadResult = executeAndVerify(buildDownloadCommand(), params.direct());\n     }\n-    if (!(new File(downloadDir + \"../imagetool/imagetool.sh\").exists()) \n+    if (!(new File(IMAGE_TOOL).exists()) \n         && params.unzip()) {\n-      unzipResult = unzip(downloadDir, params.fileName(), downloadDir + \"/..\");\n+      unzipResult = unzip();\n     }\n     return downloadResult && unzipResult;\n   }\n \n-  private boolean unzip(String path, String fileName, String targetDir) {\n+  private boolean unzip() {\n     String command = ", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzQwNzI4Mg=="}, "originalCommit": {"oid": "04301515cb86b18975f062fc4fbced6f5621f3c7"}, "originalPosition": 44}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwMjMzNTAwOnYy", "diffSide": "RIGHT", "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/impl/primitive/Installer.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNFQwMTo0ODoxNVrOGAuCRQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQwMDo1MDo1NFrOGBE-Cg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzQwNzQyOQ==", "bodyText": "i think this whole method could be better written as\nString command = String.format(\"...\", a, b, c, d);\nreturn command;", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1534#discussion_r403407429", "createdAt": "2020-04-04T01:48:15Z", "author": {"login": "markxnelson"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/impl/primitive/Installer.java", "diffHunk": "@@ -67,6 +69,6 @@ private String buildDownloadCommand() {\n     \n     return \"curl -fL \" ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "04301515cb86b18975f062fc4fbced6f5621f3c7"}, "originalPosition": 57}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzcxMzcyNA==", "bodyText": "String.format does make it easier to read and less error-prone.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1534#discussion_r403713724", "createdAt": "2020-04-05T15:02:00Z", "author": {"login": "doxiao"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/impl/primitive/Installer.java", "diffHunk": "@@ -67,6 +69,6 @@ private String buildDownloadCommand() {\n     \n     return \"curl -fL \" ", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzQwNzQyOQ=="}, "originalCommit": {"oid": "04301515cb86b18975f062fc4fbced6f5621f3c7"}, "originalPosition": 57}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc4MzE3OA==", "bodyText": "done", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1534#discussion_r403783178", "createdAt": "2020-04-06T00:50:54Z", "author": {"login": "doxiao"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/impl/primitive/Installer.java", "diffHunk": "@@ -67,6 +69,6 @@ private String buildDownloadCommand() {\n     \n     return \"curl -fL \" ", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzQwNzQyOQ=="}, "originalCommit": {"oid": "04301515cb86b18975f062fc4fbced6f5621f3c7"}, "originalPosition": 57}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwMjMzNjM5OnYy", "diffSide": "RIGHT", "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/impl/primitive/WebLogicImageTool.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNFQwMTo0OToyOVrOGAuC8w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQwMDo0NToxNlrOGBE7Pg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzQwNzYwMw==", "bodyText": "didn't you literally just download it and check it was there a few lines ago?\ndo we need another check?", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1534#discussion_r403407603", "createdAt": "2020-04-04T01:49:29Z", "author": {"login": "markxnelson"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/impl/primitive/WebLogicImageTool.java", "diffHunk": "@@ -55,7 +59,21 @@ public boolean updateImage() {\n     } \n \n     try {\n+      // check if the WIT binary exists, throws FileNotFoundException if the file does not exist", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "04301515cb86b18975f062fc4fbced6f5621f3c7"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzcxMzczOQ==", "bodyText": "Although we have java code doing the download and unzip for now, the plan is to use a script to download all installers upfront before the Java test starts. We'll probably need this check then.  I could remove this check now,  and add it back when/if we get rid of the java Installer code.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1534#discussion_r403713739", "createdAt": "2020-04-05T15:02:13Z", "author": {"login": "doxiao"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/impl/primitive/WebLogicImageTool.java", "diffHunk": "@@ -55,7 +59,21 @@ public boolean updateImage() {\n     } \n \n     try {\n+      // check if the WIT binary exists, throws FileNotFoundException if the file does not exist", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzQwNzYwMw=="}, "originalCommit": {"oid": "04301515cb86b18975f062fc4fbced6f5621f3c7"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc4MjQ2Mg==", "bodyText": "removed the check", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1534#discussion_r403782462", "createdAt": "2020-04-06T00:45:16Z", "author": {"login": "doxiao"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/impl/primitive/WebLogicImageTool.java", "diffHunk": "@@ -55,7 +59,21 @@ public boolean updateImage() {\n     } \n \n     try {\n+      // check if the WIT binary exists, throws FileNotFoundException if the file does not exist", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzQwNzYwMw=="}, "originalCommit": {"oid": "04301515cb86b18975f062fc4fbced6f5621f3c7"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwMjMzNzQ1OnYy", "diffSide": "RIGHT", "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/impl/primitive/WebLogicImageTool.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNFQwMTo1MDozMVrOGAuDdA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQwMDo0NTo0OFrOGBE7iQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzQwNzczMg==", "bodyText": "much better to build the string first, then return it - easier to debug", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1534#discussion_r403407732", "createdAt": "2020-04-04T01:50:31Z", "author": {"login": "markxnelson"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/impl/primitive/WebLogicImageTool.java", "diffHunk": "@@ -124,4 +142,35 @@ private String buildList(List<String> list) {\n     }\n     return strList;\n   }\n+  \n+  /**\n+   * Add WDT installer to the WebLogic Image Tool cache\n+   * @return true if the command succeeds \n+   */\n+  public boolean addInstaller() throws FileNotFoundException {\n+    try {\n+      checkFile(WDT_ZIP_PATH);\n+    } catch (FileNotFoundException fnfe) {\n+      logger.warning(\"Failed to create an image due to Exception: \" + fnfe.getMessage());\n+      throw fnfe;\n+    }\n+    return executeAndVerify(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "04301515cb86b18975f062fc4fbced6f5621f3c7"}, "originalPosition": 67}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc4MjUzNw==", "bodyText": "Done", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1534#discussion_r403782537", "createdAt": "2020-04-06T00:45:48Z", "author": {"login": "doxiao"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/impl/primitive/WebLogicImageTool.java", "diffHunk": "@@ -124,4 +142,35 @@ private String buildList(List<String> list) {\n     }\n     return strList;\n   }\n+  \n+  /**\n+   * Add WDT installer to the WebLogic Image Tool cache\n+   * @return true if the command succeeds \n+   */\n+  public boolean addInstaller() throws FileNotFoundException {\n+    try {\n+      checkFile(WDT_ZIP_PATH);\n+    } catch (FileNotFoundException fnfe) {\n+      logger.warning(\"Failed to create an image due to Exception: \" + fnfe.getMessage());\n+      throw fnfe;\n+    }\n+    return executeAndVerify(", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzQwNzczMg=="}, "originalCommit": {"oid": "04301515cb86b18975f062fc4fbced6f5621f3c7"}, "originalPosition": 67}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwMjMzNzc1OnYy", "diffSide": "RIGHT", "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/impl/primitive/WebLogicImageTool.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNFQwMTo1MDo1OFrOGAuDoA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQwMDo0NTo1NlrOGBE7lQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzQwNzc3Ng==", "bodyText": "same", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1534#discussion_r403407776", "createdAt": "2020-04-04T01:50:58Z", "author": {"login": "markxnelson"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/impl/primitive/WebLogicImageTool.java", "diffHunk": "@@ -124,4 +142,35 @@ private String buildList(List<String> list) {\n     }\n     return strList;\n   }\n+  \n+  /**\n+   * Add WDT installer to the WebLogic Image Tool cache\n+   * @return true if the command succeeds \n+   */\n+  public boolean addInstaller() throws FileNotFoundException {\n+    try {\n+      checkFile(WDT_ZIP_PATH);\n+    } catch (FileNotFoundException fnfe) {\n+      logger.warning(\"Failed to create an image due to Exception: \" + fnfe.getMessage());\n+      throw fnfe;\n+    }\n+    return executeAndVerify(\n+        IMAGE_TOOL \n+        + \" cache addInstaller \"\n+        + \" --type wdt\"\n+        + \" --version \" + params.wdtVersion()\n+        + \" --path \" + WDT_ZIP_PATH);\n+  }\n+  \n+  /**\n+   * Delete the WDT installer cache entry from the WebLogic Image Tool\n+   * @return true if the command succeeds\n+   */\n+  public boolean deleteEntry() {\n+    return executeAndVerify(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "04301515cb86b18975f062fc4fbced6f5621f3c7"}, "originalPosition": 80}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc4MjU0OQ==", "bodyText": "done", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1534#discussion_r403782549", "createdAt": "2020-04-06T00:45:56Z", "author": {"login": "doxiao"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/impl/primitive/WebLogicImageTool.java", "diffHunk": "@@ -124,4 +142,35 @@ private String buildList(List<String> list) {\n     }\n     return strList;\n   }\n+  \n+  /**\n+   * Add WDT installer to the WebLogic Image Tool cache\n+   * @return true if the command succeeds \n+   */\n+  public boolean addInstaller() throws FileNotFoundException {\n+    try {\n+      checkFile(WDT_ZIP_PATH);\n+    } catch (FileNotFoundException fnfe) {\n+      logger.warning(\"Failed to create an image due to Exception: \" + fnfe.getMessage());\n+      throw fnfe;\n+    }\n+    return executeAndVerify(\n+        IMAGE_TOOL \n+        + \" cache addInstaller \"\n+        + \" --type wdt\"\n+        + \" --version \" + params.wdtVersion()\n+        + \" --path \" + WDT_ZIP_PATH);\n+  }\n+  \n+  /**\n+   * Delete the WDT installer cache entry from the WebLogic Image Tool\n+   * @return true if the command succeeds\n+   */\n+  public boolean deleteEntry() {\n+    return executeAndVerify(", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzQwNzc3Ng=="}, "originalCommit": {"oid": "04301515cb86b18975f062fc4fbced6f5621f3c7"}, "originalPosition": 80}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwMjMzODAzOnYy", "diffSide": "RIGHT", "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/assertions/TestAssertions.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNFQwMTo1MToyOFrOGAuDzA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQwMDo0NjoxMlrOGBE7qA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzQwNzgyMA==", "bodyText": "maybe call this doesDockerImageExist so it is clearer what it does", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1534#discussion_r403407820", "createdAt": "2020-04-04T01:51:28Z", "author": {"login": "markxnelson"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/assertions/TestAssertions.java", "diffHunk": "@@ -112,5 +113,15 @@ public static boolean adminT3ChannelAccessible(String domainUID, String namespac\n   public static boolean adminNodePortAccessible(String domainUID, String namespace) {\n     return Domain.adminNodePortAccessible(domainUID, namespace);\n   }\n+  \n+  /**\n+   * Check if a Docker image exists.\n+   * @param imageName - the name of the image to be checked\n+   * @param imageTag  - the tag of the image to be checked\n+   * @return true if the image does exist, false otherwise\n+   */\n+  public static boolean imageExists(String imageName, String imageTag) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "04301515cb86b18975f062fc4fbced6f5621f3c7"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc4MjU2OA==", "bodyText": "changed the method name.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1534#discussion_r403782568", "createdAt": "2020-04-06T00:46:12Z", "author": {"login": "doxiao"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/assertions/TestAssertions.java", "diffHunk": "@@ -112,5 +113,15 @@ public static boolean adminT3ChannelAccessible(String domainUID, String namespac\n   public static boolean adminNodePortAccessible(String domainUID, String namespace) {\n     return Domain.adminNodePortAccessible(domainUID, namespace);\n   }\n+  \n+  /**\n+   * Check if a Docker image exists.\n+   * @param imageName - the name of the image to be checked\n+   * @param imageTag  - the tag of the image to be checked\n+   * @return true if the image does exist, false otherwise\n+   */\n+  public static boolean imageExists(String imageName, String imageTag) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzQwNzgyMA=="}, "originalCommit": {"oid": "04301515cb86b18975f062fc4fbced6f5621f3c7"}, "originalPosition": 19}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwMjMzODc5OnYy", "diffSide": "RIGHT", "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/assertions/impl/WITAssertion.java", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNFQwMTo1MjoyMlrOGAuELg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQwMDo0NjozM1rOGBE7xg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzQwNzkxOA==", "bodyText": "imageTag is a variable right? not a string literal?", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1534#discussion_r403407918", "createdAt": "2020-04-04T01:52:22Z", "author": {"login": "markxnelson"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/assertions/impl/WITAssertion.java", "diffHunk": "@@ -0,0 +1,47 @@\n+// Copyright (c) 2020, Oracle Corporation and/or its affiliates.\n+// Licensed under the Universal Permissive License v 1.0 as shown at https://oss.oracle.com/licenses/upl.\n+\n+package oracle.weblogic.kubernetes.assertions.impl;\n+\n+import oracle.weblogic.kubernetes.utils.ExecCommand;\n+import oracle.weblogic.kubernetes.utils.ExecResult;\n+\n+import static oracle.weblogic.kubernetes.extensions.LoggedTest.logger;\n+\n+/**\n+ * Assertions for the results of WebLogic Image Tool operations\n+ */\n+\n+public class WITAssertion {\n+\n+  /**\n+   * Check if a Docker image exists.\n+   * @param imageName - the name of the image to be checked\n+   * @param imageTag  - the tag of the image to be checked\n+   * @return true if the image does exist, false otherwise\n+   */\n+  public static boolean imageExists(String imageName, String imageTag) {\n+    logger.info(\"Checking if image \" + imageName + \":\" + imageTag + \" exists.\");\n+    // verify the docker image is created\n+    try {\n+      ExecResult result = ExecCommand.exec(\n+          \"docker images | grep \" \n+          + imageName\n+          + \" | grep imageTag \"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "04301515cb86b18975f062fc4fbced6f5621f3c7"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzQwODAwNg==", "bodyText": "why not grep for imageName + \":\" + imageTag", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1534#discussion_r403408006", "createdAt": "2020-04-04T01:52:59Z", "author": {"login": "markxnelson"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/assertions/impl/WITAssertion.java", "diffHunk": "@@ -0,0 +1,47 @@\n+// Copyright (c) 2020, Oracle Corporation and/or its affiliates.\n+// Licensed under the Universal Permissive License v 1.0 as shown at https://oss.oracle.com/licenses/upl.\n+\n+package oracle.weblogic.kubernetes.assertions.impl;\n+\n+import oracle.weblogic.kubernetes.utils.ExecCommand;\n+import oracle.weblogic.kubernetes.utils.ExecResult;\n+\n+import static oracle.weblogic.kubernetes.extensions.LoggedTest.logger;\n+\n+/**\n+ * Assertions for the results of WebLogic Image Tool operations\n+ */\n+\n+public class WITAssertion {\n+\n+  /**\n+   * Check if a Docker image exists.\n+   * @param imageName - the name of the image to be checked\n+   * @param imageTag  - the tag of the image to be checked\n+   * @return true if the image does exist, false otherwise\n+   */\n+  public static boolean imageExists(String imageName, String imageTag) {\n+    logger.info(\"Checking if image \" + imageName + \":\" + imageTag + \" exists.\");\n+    // verify the docker image is created\n+    try {\n+      ExecResult result = ExecCommand.exec(\n+          \"docker images | grep \" \n+          + imageName\n+          + \" | grep imageTag \"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzQwNzkxOA=="}, "originalCommit": {"oid": "04301515cb86b18975f062fc4fbced6f5621f3c7"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzQwODE5MQ==", "bodyText": "or even better:\ndocker images -q imageName:imageTag which will return a single line with the image hash tag if it exists - no nothing if the image does not exist", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1534#discussion_r403408191", "createdAt": "2020-04-04T01:54:32Z", "author": {"login": "markxnelson"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/assertions/impl/WITAssertion.java", "diffHunk": "@@ -0,0 +1,47 @@\n+// Copyright (c) 2020, Oracle Corporation and/or its affiliates.\n+// Licensed under the Universal Permissive License v 1.0 as shown at https://oss.oracle.com/licenses/upl.\n+\n+package oracle.weblogic.kubernetes.assertions.impl;\n+\n+import oracle.weblogic.kubernetes.utils.ExecCommand;\n+import oracle.weblogic.kubernetes.utils.ExecResult;\n+\n+import static oracle.weblogic.kubernetes.extensions.LoggedTest.logger;\n+\n+/**\n+ * Assertions for the results of WebLogic Image Tool operations\n+ */\n+\n+public class WITAssertion {\n+\n+  /**\n+   * Check if a Docker image exists.\n+   * @param imageName - the name of the image to be checked\n+   * @param imageTag  - the tag of the image to be checked\n+   * @return true if the image does exist, false otherwise\n+   */\n+  public static boolean imageExists(String imageName, String imageTag) {\n+    logger.info(\"Checking if image \" + imageName + \":\" + imageTag + \" exists.\");\n+    // verify the docker image is created\n+    try {\n+      ExecResult result = ExecCommand.exec(\n+          \"docker images | grep \" \n+          + imageName\n+          + \" | grep imageTag \"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzQwNzkxOA=="}, "originalCommit": {"oid": "04301515cb86b18975f062fc4fbced6f5621f3c7"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc4MjU5OA==", "bodyText": "changed the code to use docker images -q imageName:imageTag.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1534#discussion_r403782598", "createdAt": "2020-04-06T00:46:33Z", "author": {"login": "doxiao"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/assertions/impl/WITAssertion.java", "diffHunk": "@@ -0,0 +1,47 @@\n+// Copyright (c) 2020, Oracle Corporation and/or its affiliates.\n+// Licensed under the Universal Permissive License v 1.0 as shown at https://oss.oracle.com/licenses/upl.\n+\n+package oracle.weblogic.kubernetes.assertions.impl;\n+\n+import oracle.weblogic.kubernetes.utils.ExecCommand;\n+import oracle.weblogic.kubernetes.utils.ExecResult;\n+\n+import static oracle.weblogic.kubernetes.extensions.LoggedTest.logger;\n+\n+/**\n+ * Assertions for the results of WebLogic Image Tool operations\n+ */\n+\n+public class WITAssertion {\n+\n+  /**\n+   * Check if a Docker image exists.\n+   * @param imageName - the name of the image to be checked\n+   * @param imageTag  - the tag of the image to be checked\n+   * @return true if the image does exist, false otherwise\n+   */\n+  public static boolean imageExists(String imageName, String imageTag) {\n+    logger.info(\"Checking if image \" + imageName + \":\" + imageTag + \" exists.\");\n+    // verify the docker image is created\n+    try {\n+      ExecResult result = ExecCommand.exec(\n+          \"docker images | grep \" \n+          + imageName\n+          + \" | grep imageTag \"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzQwNzkxOA=="}, "originalCommit": {"oid": "04301515cb86b18975f062fc4fbced6f5621f3c7"}, "originalPosition": 30}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwODQ0NTc4OnYy", "diffSide": "RIGHT", "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/ActionConstants.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQxNzowNzozOVrOGBhkEg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQyMzoxNDoyM1rOGBtSPg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDI1MTY2Ng==", "bodyText": "I am okay to leave this here for now, but I think it would be easier to manage these versions from a property in the maven pom.xml.  Like  release-1.8.3  in the pom.xml for this test module.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1534#discussion_r404251666", "createdAt": "2020-04-06T17:07:39Z", "author": {"login": "ddsharpe"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/ActionConstants.java", "diffHunk": "@@ -0,0 +1,49 @@\n+// Copyright (c) 2020, Oracle Corporation and/or its affiliates.\n+// Licensed under the Universal Permissive License v 1.0 as shown at https://oss.oracle.com/licenses/upl.\n+\n+package oracle.weblogic.kubernetes.actions;\n+\n+public interface ActionConstants {\n+\n+  // Work directory for the integration test suite\n+  public static final String WORK_DIR \n+      = System.getProperty(\"java.io.tmpdir\") + \"/it-results\";\n+  // Directory for resources\n+  public static final String RESOURCE_DIR \n+      = System.getProperty(\"user.dir\") + \"/src/test/resources\"; \n+  // Directory for all WDT models\n+  public static final String MODEL_DIR = RESOURCE_DIR + \"/wdt-models\"; \n+  // Directory for download items\n+  public static final String DOWNLOAD_DIR = WORK_DIR + \"/download\";\n+  \n+  // ------------ WebLogicImageTool action constants -------------\n+  public static final String WLS = \"WLS\";\n+  public static final String JRF = \"JRF\";\n+  public static final String RJRF = \"RestrictedJRF\";\n+  public static final String WLS_BASE_IMAGE_NAME \n+      = \"container-registry.oracle.com/middleware/weblogic\";\n+  public static final String JRF_BASE_IMAGE_NAME \n+      = \"container-registry.oracle.com/middleware/fmw-infrastructure\";\n+  public static final String WLS_BASE_IMAGE_TAG = \"12.2.1.4\";\n+\n+  public static final String DEFAULT_MODEL_IMAGE_NAME = \"test-mii-image\";\n+  public static final String DEFAULT_MODEL_IMAGE_TAG  = \"v1\";\n+  \n+  // ------------ WebLogic Image Tool constants----------------------------\n+  public static final String WIT = \"WIT\";\n+  public static final String WDT = \"WDT\";\n+\n+  public static final String WIT_DOWNLOAD_URL \n+      = \"https://github.com/oracle/weblogic-image-tool\";\n+  public static final String WIT_VERSION    = \"release-1.8.3\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6935b796b05337912ec05e3500bbe5a81320ee06"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDQ0MzcxMA==", "bodyText": "changed the code to get the version from pom.xml.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1534#discussion_r404443710", "createdAt": "2020-04-06T23:14:23Z", "author": {"login": "doxiao"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/ActionConstants.java", "diffHunk": "@@ -0,0 +1,49 @@\n+// Copyright (c) 2020, Oracle Corporation and/or its affiliates.\n+// Licensed under the Universal Permissive License v 1.0 as shown at https://oss.oracle.com/licenses/upl.\n+\n+package oracle.weblogic.kubernetes.actions;\n+\n+public interface ActionConstants {\n+\n+  // Work directory for the integration test suite\n+  public static final String WORK_DIR \n+      = System.getProperty(\"java.io.tmpdir\") + \"/it-results\";\n+  // Directory for resources\n+  public static final String RESOURCE_DIR \n+      = System.getProperty(\"user.dir\") + \"/src/test/resources\"; \n+  // Directory for all WDT models\n+  public static final String MODEL_DIR = RESOURCE_DIR + \"/wdt-models\"; \n+  // Directory for download items\n+  public static final String DOWNLOAD_DIR = WORK_DIR + \"/download\";\n+  \n+  // ------------ WebLogicImageTool action constants -------------\n+  public static final String WLS = \"WLS\";\n+  public static final String JRF = \"JRF\";\n+  public static final String RJRF = \"RestrictedJRF\";\n+  public static final String WLS_BASE_IMAGE_NAME \n+      = \"container-registry.oracle.com/middleware/weblogic\";\n+  public static final String JRF_BASE_IMAGE_NAME \n+      = \"container-registry.oracle.com/middleware/fmw-infrastructure\";\n+  public static final String WLS_BASE_IMAGE_TAG = \"12.2.1.4\";\n+\n+  public static final String DEFAULT_MODEL_IMAGE_NAME = \"test-mii-image\";\n+  public static final String DEFAULT_MODEL_IMAGE_TAG  = \"v1\";\n+  \n+  // ------------ WebLogic Image Tool constants----------------------------\n+  public static final String WIT = \"WIT\";\n+  public static final String WDT = \"WDT\";\n+\n+  public static final String WIT_DOWNLOAD_URL \n+      = \"https://github.com/oracle/weblogic-image-tool\";\n+  public static final String WIT_VERSION    = \"release-1.8.3\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDI1MTY2Ng=="}, "originalCommit": {"oid": "6935b796b05337912ec05e3500bbe5a81320ee06"}, "originalPosition": 38}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwODQ0Njk5OnYy", "diffSide": "RIGHT", "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/ActionConstants.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQxNzowNzo1NlrOGBhk1w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQyMzoxNDozMFrOGBtSbw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDI1MTg2Mw==", "bodyText": "same comment as wit version (above)", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1534#discussion_r404251863", "createdAt": "2020-04-06T17:07:56Z", "author": {"login": "ddsharpe"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/ActionConstants.java", "diffHunk": "@@ -0,0 +1,49 @@\n+// Copyright (c) 2020, Oracle Corporation and/or its affiliates.\n+// Licensed under the Universal Permissive License v 1.0 as shown at https://oss.oracle.com/licenses/upl.\n+\n+package oracle.weblogic.kubernetes.actions;\n+\n+public interface ActionConstants {\n+\n+  // Work directory for the integration test suite\n+  public static final String WORK_DIR \n+      = System.getProperty(\"java.io.tmpdir\") + \"/it-results\";\n+  // Directory for resources\n+  public static final String RESOURCE_DIR \n+      = System.getProperty(\"user.dir\") + \"/src/test/resources\"; \n+  // Directory for all WDT models\n+  public static final String MODEL_DIR = RESOURCE_DIR + \"/wdt-models\"; \n+  // Directory for download items\n+  public static final String DOWNLOAD_DIR = WORK_DIR + \"/download\";\n+  \n+  // ------------ WebLogicImageTool action constants -------------\n+  public static final String WLS = \"WLS\";\n+  public static final String JRF = \"JRF\";\n+  public static final String RJRF = \"RestrictedJRF\";\n+  public static final String WLS_BASE_IMAGE_NAME \n+      = \"container-registry.oracle.com/middleware/weblogic\";\n+  public static final String JRF_BASE_IMAGE_NAME \n+      = \"container-registry.oracle.com/middleware/fmw-infrastructure\";\n+  public static final String WLS_BASE_IMAGE_TAG = \"12.2.1.4\";\n+\n+  public static final String DEFAULT_MODEL_IMAGE_NAME = \"test-mii-image\";\n+  public static final String DEFAULT_MODEL_IMAGE_TAG  = \"v1\";\n+  \n+  // ------------ WebLogic Image Tool constants----------------------------\n+  public static final String WIT = \"WIT\";\n+  public static final String WDT = \"WDT\";\n+\n+  public static final String WIT_DOWNLOAD_URL \n+      = \"https://github.com/oracle/weblogic-image-tool\";\n+  public static final String WIT_VERSION    = \"release-1.8.3\";\n+  public static final String WIT_FILE_NAME  = \"imagetool.zip\";\n+\n+  public static final String WDT_DOWNLOAD_URL \n+      = \"https://github.com/oracle/weblogic-deploy-tooling\";\n+  public static final String WDT_VERSION    = \"weblogic-deploy-tooling-1.7.2\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6935b796b05337912ec05e3500bbe5a81320ee06"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDQ0Mzc1OQ==", "bodyText": "done", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1534#discussion_r404443759", "createdAt": "2020-04-06T23:14:30Z", "author": {"login": "doxiao"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/ActionConstants.java", "diffHunk": "@@ -0,0 +1,49 @@\n+// Copyright (c) 2020, Oracle Corporation and/or its affiliates.\n+// Licensed under the Universal Permissive License v 1.0 as shown at https://oss.oracle.com/licenses/upl.\n+\n+package oracle.weblogic.kubernetes.actions;\n+\n+public interface ActionConstants {\n+\n+  // Work directory for the integration test suite\n+  public static final String WORK_DIR \n+      = System.getProperty(\"java.io.tmpdir\") + \"/it-results\";\n+  // Directory for resources\n+  public static final String RESOURCE_DIR \n+      = System.getProperty(\"user.dir\") + \"/src/test/resources\"; \n+  // Directory for all WDT models\n+  public static final String MODEL_DIR = RESOURCE_DIR + \"/wdt-models\"; \n+  // Directory for download items\n+  public static final String DOWNLOAD_DIR = WORK_DIR + \"/download\";\n+  \n+  // ------------ WebLogicImageTool action constants -------------\n+  public static final String WLS = \"WLS\";\n+  public static final String JRF = \"JRF\";\n+  public static final String RJRF = \"RestrictedJRF\";\n+  public static final String WLS_BASE_IMAGE_NAME \n+      = \"container-registry.oracle.com/middleware/weblogic\";\n+  public static final String JRF_BASE_IMAGE_NAME \n+      = \"container-registry.oracle.com/middleware/fmw-infrastructure\";\n+  public static final String WLS_BASE_IMAGE_TAG = \"12.2.1.4\";\n+\n+  public static final String DEFAULT_MODEL_IMAGE_NAME = \"test-mii-image\";\n+  public static final String DEFAULT_MODEL_IMAGE_TAG  = \"v1\";\n+  \n+  // ------------ WebLogic Image Tool constants----------------------------\n+  public static final String WIT = \"WIT\";\n+  public static final String WDT = \"WDT\";\n+\n+  public static final String WIT_DOWNLOAD_URL \n+      = \"https://github.com/oracle/weblogic-image-tool\";\n+  public static final String WIT_VERSION    = \"release-1.8.3\";\n+  public static final String WIT_FILE_NAME  = \"imagetool.zip\";\n+\n+  public static final String WDT_DOWNLOAD_URL \n+      = \"https://github.com/oracle/weblogic-deploy-tooling\";\n+  public static final String WDT_VERSION    = \"weblogic-deploy-tooling-1.7.2\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDI1MTg2Mw=="}, "originalCommit": {"oid": "6935b796b05337912ec05e3500bbe5a81320ee06"}, "originalPosition": 43}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwODU2NTk2OnYy", "diffSide": "RIGHT", "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/impl/ActionImplCommon.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQxNzozOToyMlrOGBixTg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQxOToyNToxOFrOGBmi9g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDI3MTQzOA==", "bodyText": "Can you please remove commented out imports?", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1534#discussion_r404271438", "createdAt": "2020-04-06T17:39:22Z", "author": {"login": "rjeberhard"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/impl/ActionImplCommon.java", "diffHunk": "@@ -4,9 +4,8 @@\n package oracle.weblogic.kubernetes.actions.impl;\n \n // import java.io.BufferedReader;\n-\n-import java.io.IOException;\n // import java.io.InputStreamReader;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6935b796b05337912ec05e3500bbe5a81320ee06"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDI4NDA4NQ==", "bodyText": "The commented out imports are supposed to go with the commented out ProcessBuilder code below. I'll remove them together.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1534#discussion_r404284085", "createdAt": "2020-04-06T18:00:01Z", "author": {"login": "doxiao"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/impl/ActionImplCommon.java", "diffHunk": "@@ -4,9 +4,8 @@\n package oracle.weblogic.kubernetes.actions.impl;\n \n // import java.io.BufferedReader;\n-\n-import java.io.IOException;\n // import java.io.InputStreamReader;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDI3MTQzOA=="}, "originalCommit": {"oid": "6935b796b05337912ec05e3500bbe5a81320ee06"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDI4NjQzOA==", "bodyText": "Note that this whole class will be removed once other parts of the code sync up with this PR.  The methods here have been moved into Command action.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1534#discussion_r404286438", "createdAt": "2020-04-06T18:04:05Z", "author": {"login": "doxiao"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/impl/ActionImplCommon.java", "diffHunk": "@@ -4,9 +4,8 @@\n package oracle.weblogic.kubernetes.actions.impl;\n \n // import java.io.BufferedReader;\n-\n-import java.io.IOException;\n // import java.io.InputStreamReader;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDI3MTQzOA=="}, "originalCommit": {"oid": "6935b796b05337912ec05e3500bbe5a81320ee06"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDMzMzMwMg==", "bodyText": "done", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1534#discussion_r404333302", "createdAt": "2020-04-06T19:25:18Z", "author": {"login": "doxiao"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/impl/ActionImplCommon.java", "diffHunk": "@@ -4,9 +4,8 @@\n package oracle.weblogic.kubernetes.actions.impl;\n \n // import java.io.BufferedReader;\n-\n-import java.io.IOException;\n // import java.io.InputStreamReader;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDI3MTQzOA=="}, "originalCommit": {"oid": "6935b796b05337912ec05e3500bbe5a81320ee06"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwODU3Mjg5OnYy", "diffSide": "RIGHT", "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/impl/primitive/Installer.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQxNzo0MToyNFrOGBi17A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQyMDo0MDoyMlrOGBpDJQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDI3MjYyMA==", "bodyText": "Fluent style would have this method just be named params", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1534#discussion_r404272620", "createdAt": "2020-04-06T17:41:24Z", "author": {"login": "rjeberhard"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/impl/primitive/Installer.java", "diffHunk": "@@ -5,24 +5,42 @@\n \n import java.io.File;\n \n+import static oracle.weblogic.kubernetes.actions.ActionConstants.DOWNLOAD_DIR;\n+import static oracle.weblogic.kubernetes.actions.ActionConstants.IMAGE_TOOL;\n+import static oracle.weblogic.kubernetes.actions.ActionConstants.WORK_DIR;\n+import static oracle.weblogic.kubernetes.actions.impl.primitive.Command.defaultCommandParams;\n import static oracle.weblogic.kubernetes.extensions.LoggedTest.logger;\n+import static oracle.weblogic.kubernetes.utils.FileUtils.checkDirectory;\n+import static oracle.weblogic.kubernetes.utils.FileUtils.doesFileExist;\n+\n \n /**\n  *  Implementation of actions that download/install tools for the uses to use.\n  *  NOTE: This class is a temporary solution, and may go away once we eventually\n  *  install everything before the Java test starts to run.\n  */\n \n-public class Installer extends InstallWITCommon {\n-  // temporary dir, will fix this once we decide on the\n-  private static final String downloadDir = WORK_DIR + \"/download\";\n+public class Installer {\n+\n   private InstallParams params;\n+  \n+  /**\n+   * Set up the installer with default values\n+   * @return the installer instance \n+   */\n+  public static InstallParams defaultInstallParams() {\n+    return new InstallParams().defaults();\n+  }\n \n   /**\n    * Set up the installer with given parameters\n    * @return the installer instance \n    */\n-  public Installer with(InstallParams params) {\n+  public static Installer withParams(InstallParams params) {\n+    return new Installer().with(params);\n+  }\n+  \n+  private Installer with(InstallParams params) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6935b796b05337912ec05e3500bbe5a81320ee06"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDI5MjczOQ==", "bodyText": "I named it with() to indicate that this returns an Installer instance with some parameters. Name params() might give readers an impression that this returns a params instance. But I am new to fluent style and my understanding might be wrong.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1534#discussion_r404292739", "createdAt": "2020-04-06T18:14:59Z", "author": {"login": "doxiao"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/impl/primitive/Installer.java", "diffHunk": "@@ -5,24 +5,42 @@\n \n import java.io.File;\n \n+import static oracle.weblogic.kubernetes.actions.ActionConstants.DOWNLOAD_DIR;\n+import static oracle.weblogic.kubernetes.actions.ActionConstants.IMAGE_TOOL;\n+import static oracle.weblogic.kubernetes.actions.ActionConstants.WORK_DIR;\n+import static oracle.weblogic.kubernetes.actions.impl.primitive.Command.defaultCommandParams;\n import static oracle.weblogic.kubernetes.extensions.LoggedTest.logger;\n+import static oracle.weblogic.kubernetes.utils.FileUtils.checkDirectory;\n+import static oracle.weblogic.kubernetes.utils.FileUtils.doesFileExist;\n+\n \n /**\n  *  Implementation of actions that download/install tools for the uses to use.\n  *  NOTE: This class is a temporary solution, and may go away once we eventually\n  *  install everything before the Java test starts to run.\n  */\n \n-public class Installer extends InstallWITCommon {\n-  // temporary dir, will fix this once we decide on the\n-  private static final String downloadDir = WORK_DIR + \"/download\";\n+public class Installer {\n+\n   private InstallParams params;\n+  \n+  /**\n+   * Set up the installer with default values\n+   * @return the installer instance \n+   */\n+  public static InstallParams defaultInstallParams() {\n+    return new InstallParams().defaults();\n+  }\n \n   /**\n    * Set up the installer with given parameters\n    * @return the installer instance \n    */\n-  public Installer with(InstallParams params) {\n+  public static Installer withParams(InstallParams params) {\n+    return new Installer().with(params);\n+  }\n+  \n+  private Installer with(InstallParams params) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDI3MjYyMA=="}, "originalCommit": {"oid": "6935b796b05337912ec05e3500bbe5a81320ee06"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDM3NDMwOQ==", "bodyText": "I think you are right. Changed to params()", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1534#discussion_r404374309", "createdAt": "2020-04-06T20:40:22Z", "author": {"login": "doxiao"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/impl/primitive/Installer.java", "diffHunk": "@@ -5,24 +5,42 @@\n \n import java.io.File;\n \n+import static oracle.weblogic.kubernetes.actions.ActionConstants.DOWNLOAD_DIR;\n+import static oracle.weblogic.kubernetes.actions.ActionConstants.IMAGE_TOOL;\n+import static oracle.weblogic.kubernetes.actions.ActionConstants.WORK_DIR;\n+import static oracle.weblogic.kubernetes.actions.impl.primitive.Command.defaultCommandParams;\n import static oracle.weblogic.kubernetes.extensions.LoggedTest.logger;\n+import static oracle.weblogic.kubernetes.utils.FileUtils.checkDirectory;\n+import static oracle.weblogic.kubernetes.utils.FileUtils.doesFileExist;\n+\n \n /**\n  *  Implementation of actions that download/install tools for the uses to use.\n  *  NOTE: This class is a temporary solution, and may go away once we eventually\n  *  install everything before the Java test starts to run.\n  */\n \n-public class Installer extends InstallWITCommon {\n-  // temporary dir, will fix this once we decide on the\n-  private static final String downloadDir = WORK_DIR + \"/download\";\n+public class Installer {\n+\n   private InstallParams params;\n+  \n+  /**\n+   * Set up the installer with default values\n+   * @return the installer instance \n+   */\n+  public static InstallParams defaultInstallParams() {\n+    return new InstallParams().defaults();\n+  }\n \n   /**\n    * Set up the installer with given parameters\n    * @return the installer instance \n    */\n-  public Installer with(InstallParams params) {\n+  public static Installer withParams(InstallParams params) {\n+    return new Installer().with(params);\n+  }\n+  \n+  private Installer with(InstallParams params) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDI3MjYyMA=="}, "originalCommit": {"oid": "6935b796b05337912ec05e3500bbe5a81320ee06"}, "originalPosition": 43}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwODU3NjY5OnYy", "diffSide": "RIGHT", "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/impl/primitive/WebLogicImageTool.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQxNzo0MjozMFrOGBi4bA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQxODoyNToyNlrOGBkchg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDI3MzI2MA==", "bodyText": "Why warnings?  These should either be asserts that fail the test or they aren't important.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1534#discussion_r404273260", "createdAt": "2020-04-06T17:42:30Z", "author": {"login": "rjeberhard"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/impl/primitive/WebLogicImageTool.java", "diffHunk": "@@ -55,30 +65,45 @@ public boolean updateImage() {\n     } \n \n     try {\n-      checkFile(IMAGE_TOOL);\n+      // delete the old cache entry for the WDT installer\n+      if (!deleteEntry()) {\n+        logger.warning(\"Failed to delete cache entry in WebLogic Image Tool\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6935b796b05337912ec05e3500bbe5a81320ee06"}, "originalPosition": 50}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDI5ODg4Ng==", "bodyText": "This is part of test infra, not a test. The pattern we have been following is for the infra part to return success or not. The test code, such as ItWITValication, will then fail the test with assertions. But my understanding might be wrong here.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1534#discussion_r404298886", "createdAt": "2020-04-06T18:25:26Z", "author": {"login": "doxiao"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/impl/primitive/WebLogicImageTool.java", "diffHunk": "@@ -55,30 +65,45 @@ public boolean updateImage() {\n     } \n \n     try {\n-      checkFile(IMAGE_TOOL);\n+      // delete the old cache entry for the WDT installer\n+      if (!deleteEntry()) {\n+        logger.warning(\"Failed to delete cache entry in WebLogic Image Tool\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDI3MzI2MA=="}, "originalCommit": {"oid": "6935b796b05337912ec05e3500bbe5a81320ee06"}, "originalPosition": 50}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwODU4MDE5OnYy", "diffSide": "RIGHT", "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/impl/primitive/WebLogicImageTool.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQxNzo0MzoyMVrOGBi6gA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQxNzo0MzoyMVrOGBi6gA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDI3Mzc5Mg==", "bodyText": "Same.  If the file isn't found then this should fail the test.  I don't want to have to search the test logs for warnings to figure out why something later failed.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1534#discussion_r404273792", "createdAt": "2020-04-06T17:43:21Z", "author": {"login": "rjeberhard"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/actions/impl/primitive/WebLogicImageTool.java", "diffHunk": "@@ -124,4 +149,46 @@ private String buildList(List<String> list) {\n     }\n     return strList;\n   }\n+  \n+  /**\n+   * Add WDT installer to the WebLogic Image Tool cache\n+   * @return true if the command succeeds \n+   */\n+  public boolean addInstaller() throws FileNotFoundException {\n+    try {\n+      checkFile(WDT_ZIP_PATH);\n+    } catch (FileNotFoundException fnfe) {\n+      logger.warning(\"Failed to create an image due to Exception: \" + fnfe.getMessage());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6935b796b05337912ec05e3500bbe5a81320ee06"}, "originalPosition": 110}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwODU4MTg0OnYy", "diffSide": "RIGHT", "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/assertions/TestAssertions.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQxNzo0Mzo0NlrOGBi7kA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQxODoyOTozN1rOGBkmSw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDI3NDA2NA==", "bodyText": "Don't need dashes in javadoc.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1534#discussion_r404274064", "createdAt": "2020-04-06T17:43:46Z", "author": {"login": "rjeberhard"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/assertions/TestAssertions.java", "diffHunk": "@@ -152,5 +153,15 @@ public static boolean adminT3ChannelAccessible(String domainUID, String namespac\n   public static boolean adminNodePortAccessible(String domainUID, String namespace) {\n     return Domain.adminNodePortAccessible(domainUID, namespace);\n   }\n+  \n+  /**\n+   * Check if a Docker image exists.\n+   * @param imageName - the name of the image to be checked", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6935b796b05337912ec05e3500bbe5a81320ee06"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDMwMTM4Nw==", "bodyText": "fixed", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1534#discussion_r404301387", "createdAt": "2020-04-06T18:29:37Z", "author": {"login": "doxiao"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/assertions/TestAssertions.java", "diffHunk": "@@ -152,5 +153,15 @@ public static boolean adminT3ChannelAccessible(String domainUID, String namespac\n   public static boolean adminNodePortAccessible(String domainUID, String namespace) {\n     return Domain.adminNodePortAccessible(domainUID, namespace);\n   }\n+  \n+  /**\n+   * Check if a Docker image exists.\n+   * @param imageName - the name of the image to be checked", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDI3NDA2NA=="}, "originalCommit": {"oid": "6935b796b05337912ec05e3500bbe5a81320ee06"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwODU4NTkzOnYy", "diffSide": "RIGHT", "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/assertions/TestAssertions.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQxNzo0NDo0MVrOGBi9_A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQxODoyOTo0M1rOGBkmhQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDI3NDY4NA==", "bodyText": "Don't need \"assert\" in name.  This can just be doesDockerImageExist()", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1534#discussion_r404274684", "createdAt": "2020-04-06T17:44:41Z", "author": {"login": "rjeberhard"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/assertions/TestAssertions.java", "diffHunk": "@@ -152,5 +153,15 @@ public static boolean adminT3ChannelAccessible(String domainUID, String namespac\n   public static boolean adminNodePortAccessible(String domainUID, String namespace) {\n     return Domain.adminNodePortAccessible(domainUID, namespace);\n   }\n+  \n+  /**\n+   * Check if a Docker image exists.\n+   * @param imageName - the name of the image to be checked\n+   * @param imageTag  - the tag of the image to be checked\n+   * @return true if the image does exist, false otherwise\n+   */\n+  public static boolean assertDockerImageExists(String imageName, String imageTag) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6935b796b05337912ec05e3500bbe5a81320ee06"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDMwMTQ0NQ==", "bodyText": "fixed", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1534#discussion_r404301445", "createdAt": "2020-04-06T18:29:43Z", "author": {"login": "doxiao"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/assertions/TestAssertions.java", "diffHunk": "@@ -152,5 +153,15 @@ public static boolean adminT3ChannelAccessible(String domainUID, String namespac\n   public static boolean adminNodePortAccessible(String domainUID, String namespace) {\n     return Domain.adminNodePortAccessible(domainUID, namespace);\n   }\n+  \n+  /**\n+   * Check if a Docker image exists.\n+   * @param imageName - the name of the image to be checked\n+   * @param imageTag  - the tag of the image to be checked\n+   * @return true if the image does exist, false otherwise\n+   */\n+  public static boolean assertDockerImageExists(String imageName, String imageTag) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDI3NDY4NA=="}, "originalCommit": {"oid": "6935b796b05337912ec05e3500bbe5a81320ee06"}, "originalPosition": 19}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwODU5MTQ4OnYy", "diffSide": "RIGHT", "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/assertions/impl/WITAssertion.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQxNzo0NjowNVrOGBjBWw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQyMTo0NToyMFrOGBrFjw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDI3NTU0Nw==", "bodyText": "This loses the stack trace. @ddsharpe, do we have a pattern for this?  That should at least include using the variant of warning() that takes the exception and not just the message.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1534#discussion_r404275547", "createdAt": "2020-04-06T17:46:05Z", "author": {"login": "rjeberhard"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/assertions/impl/WITAssertion.java", "diffHunk": "@@ -0,0 +1,48 @@\n+// Copyright (c) 2020, Oracle Corporation and/or its affiliates.\n+// Licensed under the Universal Permissive License v 1.0 as shown at https://oss.oracle.com/licenses/upl.\n+\n+package oracle.weblogic.kubernetes.assertions.impl;\n+\n+import oracle.weblogic.kubernetes.utils.ExecCommand;\n+import oracle.weblogic.kubernetes.utils.ExecResult;\n+\n+import static oracle.weblogic.kubernetes.extensions.LoggedTest.logger;\n+\n+/**\n+ * Assertions for the results of WebLogic Image Tool operations\n+ */\n+\n+public class WITAssertion {\n+\n+  /**\n+   * Check if a Docker image exists.\n+   * @param imageName - the name of the image to be checked\n+   * @param imageTag  - the tag of the image to be checked\n+   * @return true if the image does exist, false otherwise\n+   */\n+  public static boolean doesImageExist(String imageName, String imageTag) {\n+    logger.info(\"Checking if image \" + imageName + \":\" + imageTag + \" exists.\");\n+    // verify the docker image is created\n+    try {\n+      ExecResult result = ExecCommand.exec(\n+          \"docker images -q \" \n+          + imageName\n+          + \":\"\n+          + imageTag\n+          + \"| wc -l\");\n+          \n+      if (Integer.parseInt(result.stdout().trim()) != 1) {\n+        return false;\n+      }\n+    } catch (Exception e) {\n+      logger.warning(\"Failed to check if Docker image \" \n+          + imageName \n+          + \":\" \n+          + imageTag\n+          + \"exists due to Exception: \" \n+          + e.getMessage());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6935b796b05337912ec05e3500bbe5a81320ee06"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDQwNzY5NQ==", "bodyText": "converted to an assertion.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1534#discussion_r404407695", "createdAt": "2020-04-06T21:45:20Z", "author": {"login": "doxiao"}, "path": "new-integration-tests/src/test/java/oracle/weblogic/kubernetes/assertions/impl/WITAssertion.java", "diffHunk": "@@ -0,0 +1,48 @@\n+// Copyright (c) 2020, Oracle Corporation and/or its affiliates.\n+// Licensed under the Universal Permissive License v 1.0 as shown at https://oss.oracle.com/licenses/upl.\n+\n+package oracle.weblogic.kubernetes.assertions.impl;\n+\n+import oracle.weblogic.kubernetes.utils.ExecCommand;\n+import oracle.weblogic.kubernetes.utils.ExecResult;\n+\n+import static oracle.weblogic.kubernetes.extensions.LoggedTest.logger;\n+\n+/**\n+ * Assertions for the results of WebLogic Image Tool operations\n+ */\n+\n+public class WITAssertion {\n+\n+  /**\n+   * Check if a Docker image exists.\n+   * @param imageName - the name of the image to be checked\n+   * @param imageTag  - the tag of the image to be checked\n+   * @return true if the image does exist, false otherwise\n+   */\n+  public static boolean doesImageExist(String imageName, String imageTag) {\n+    logger.info(\"Checking if image \" + imageName + \":\" + imageTag + \" exists.\");\n+    // verify the docker image is created\n+    try {\n+      ExecResult result = ExecCommand.exec(\n+          \"docker images -q \" \n+          + imageName\n+          + \":\"\n+          + imageTag\n+          + \"| wc -l\");\n+          \n+      if (Integer.parseInt(result.stdout().trim()) != 1) {\n+        return false;\n+      }\n+    } catch (Exception e) {\n+      logger.warning(\"Failed to check if Docker image \" \n+          + imageName \n+          + \":\" \n+          + imageTag\n+          + \"exists due to Exception: \" \n+          + e.getMessage());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDI3NTU0Nw=="}, "originalCommit": {"oid": "6935b796b05337912ec05e3500bbe5a81320ee06"}, "originalPosition": 43}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4731, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}