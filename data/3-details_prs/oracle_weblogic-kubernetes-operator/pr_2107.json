{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQxNDg3NjY2", "number": 2107, "title": "Adding test to add a cluster using dynamic update", "bodyText": "Add a cluster to domain using dynamic update.\nThe test fails intermittently - https://jira.****/jira/browse/OWLS-86584\nJenkins results -\nhttps://build.weblogick8s.org:8443/job/weblogic-kubernetes-operator-kind-new/3394/\nhttps://build.weblogick8s.org:8443/job/weblogic-kubernetes-operator-kind-new/3380/", "createdAt": "2020-12-16T22:55:12Z", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2107", "merged": true, "mergeCommit": {"oid": "00e37454d569b6a8842be40292901c3cc89c6be9"}, "closed": true, "closedAt": "2020-12-17T21:12:41Z", "author": {"login": "vanajamukkara"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdm0diYgH2gAyNTQxNDg3NjY2OmJlMDA2YTE5OGM4YjRlYzk1MjI0MDI0YTliYTZhZDc5MTdlYTE3OTg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdnJmPoAFqTU1NDk2NDcyOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "be006a198c8b4ec95224024a9ba6ad7917ea1798", "author": {"user": {"login": "vanajamukkara", "name": "Vanajakshi Mukkara"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/be006a198c8b4ec95224024a9ba6ad7917ea1798", "committedDate": "2020-12-16T19:53:41Z", "message": "adding new test for add cluster"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c5c230b18d7c03e870f95d37a6cb9154b2bf04c7", "author": {"user": {"login": "vanajamukkara", "name": "Vanajakshi Mukkara"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/c5c230b18d7c03e870f95d37a6cb9154b2bf04c7", "committedDate": "2020-12-16T22:41:02Z", "message": "fixing merge conflict"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5d2f88f2ec33fa2673e53f2b2955d8fd168b5f8b", "author": {"user": {"login": "vanajamukkara", "name": "Vanajakshi Mukkara"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/5d2f88f2ec33fa2673e53f2b2955d8fd168b5f8b", "committedDate": "2020-12-16T23:00:57Z", "message": "enable test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "067eb9ea540ef0aa7d247458176dbb2a00e3efea", "author": {"user": {"login": "vanajamukkara", "name": "Vanajakshi Mukkara"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/067eb9ea540ef0aa7d247458176dbb2a00e3efea", "committedDate": "2020-12-17T15:12:03Z", "message": "enable test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5886aace97c0e5d136f77d3ff4e24076a81524ff", "author": {"user": {"login": "vanajamukkara", "name": "Vanajakshi Mukkara"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/5886aace97c0e5d136f77d3ff4e24076a81524ff", "committedDate": "2020-12-17T18:02:15Z", "message": "disable the failing test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU0ODg1NjA0", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2107#pullrequestreview-554885604", "createdAt": "2020-12-17T18:42:09Z", "commit": {"oid": "5886aace97c0e5d136f77d3ff4e24076a81524ff"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QxODo0MjoxMFrOIIDj_A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QxODo0MjoxMFrOIIDj_A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTMxNzg4NA==", "bodyText": "Should the code in oracle.weblogic.kubernetes.actions.impl.Operator#patchReplicas() be updated to use this new method?", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2107#discussion_r545317884", "createdAt": "2020-12-17T18:42:10Z", "author": {"login": "alai8"}, "path": "integration-tests/src/test/java/oracle/weblogic/kubernetes/utils/CommonPatchTestUtils.java", "diffHunk": "@@ -198,4 +198,27 @@ public static boolean patchDomainResource(String domainUid, String domainNamespa\n     V1Patch patch = new V1Patch(new String(patchStr));\n     return patchDomainCustomResource(domainUid, domainNamespace, patch, V1Patch.PATCH_FORMAT_JSON_PATCH);\n   }\n+\n+  /**\n+   * Patch replicas at spec level.\n+   *\n+   * @param domainUid unique domain identifier\n+   * @param domainNamespace the Kubernetes namespace where the domain is\n+   * @param replicaCount the replica count to patch with\n+   * @return true if successful, false otherwise\n+   */\n+  public static boolean patchReplicaCountAtSpecLevel(String domainUid, String domainNamespace, int replicaCount) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5886aace97c0e5d136f77d3ff4e24076a81524ff"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU0ODg1OTM0", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2107#pullrequestreview-554885934", "createdAt": "2020-12-17T18:42:40Z", "commit": {"oid": "5886aace97c0e5d136f77d3ff4e24076a81524ff"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QxODo0Mjo0MFrOIIDlPQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QxODo0Mjo0MFrOIIDlPQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTMxODIwNQ==", "bodyText": "Consider using V1Patch.PATCH_FORMAT_JSON_PATCH constant", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2107#discussion_r545318205", "createdAt": "2020-12-17T18:42:40Z", "author": {"login": "alai8"}, "path": "integration-tests/src/test/java/oracle/weblogic/kubernetes/utils/CommonPatchTestUtils.java", "diffHunk": "@@ -198,4 +198,27 @@ public static boolean patchDomainResource(String domainUid, String domainNamespa\n     V1Patch patch = new V1Patch(new String(patchStr));\n     return patchDomainCustomResource(domainUid, domainNamespace, patch, V1Patch.PATCH_FORMAT_JSON_PATCH);\n   }\n+\n+  /**\n+   * Patch replicas at spec level.\n+   *\n+   * @param domainUid unique domain identifier\n+   * @param domainNamespace the Kubernetes namespace where the domain is\n+   * @param replicaCount the replica count to patch with\n+   * @return true if successful, false otherwise\n+   */\n+  public static boolean patchReplicaCountAtSpecLevel(String domainUid, String domainNamespace, int replicaCount) {\n+    LoggingFacade logger = getLogger();\n+    StringBuffer patchStr = new StringBuffer(\"[{\");\n+    patchStr.append(\" \\\"op\\\": \\\"replace\\\",\")\n+        .append(\" \\\"path\\\": \\\"/spec/replicas\\\",\")\n+        .append(\" \\\"value\\\": \")\n+        .append(replicaCount)\n+        .append(\" }]\");\n+    logger.info(\"Replicas patch string: {0}\", patchStr);\n+\n+    V1Patch patch = new V1Patch(new String(patchStr));\n+    return patchDomainCustomResource(domainUid, domainNamespace, patch, \"application/json-patch+json\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5886aace97c0e5d136f77d3ff4e24076a81524ff"}, "originalPosition": 24}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU0OTI5NDk4", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2107#pullrequestreview-554929498", "createdAt": "2020-12-17T19:41:07Z", "commit": {"oid": "5886aace97c0e5d136f77d3ff4e24076a81524ff"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3872b7265657a26de6a08d3ca1a2092b1037edde", "author": {"user": {"login": "vanajamukkara", "name": "Vanajakshi Mukkara"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/3872b7265657a26de6a08d3ca1a2092b1037edde", "committedDate": "2020-12-17T20:18:14Z", "message": "address review comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU0OTY0NzI5", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2107#pullrequestreview-554964729", "createdAt": "2020-12-17T20:31:13Z", "commit": {"oid": "3872b7265657a26de6a08d3ca1a2092b1037edde"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4002, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}