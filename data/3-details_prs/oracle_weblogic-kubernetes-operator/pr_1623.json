{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEzNjM1MjM2", "number": 1623, "title": "Updated versions of Grafana, Prometheus, added extra debugging", "bodyText": "Updated to newest versions of Helm Chart for Grafana and Prometheus ( it incomparable with current k8s and helm version, used in current external Jen run\nSplit some shell scripts and added extra debugging\nhttps://build.weblogick8s.org:8443/job/weblogic-kubernetes-operator-quicktest/1437/ - passed for MonExporter tests ( one test fail due generic connectivity issues)", "createdAt": "2020-05-05T16:51:39Z", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1623", "merged": true, "mergeCommit": {"oid": "be138dfc32f4618b4301f1b7bf57fbd781297e57"}, "closed": true, "closedAt": "2020-05-06T21:03:40Z", "author": {"login": "marinakog"}, "timelineItems": {"totalCount": 47, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABccgAf0AH2gAyNDEzNjM1MjM2OjNlYTc4NTQ0NjEzMjBiN2UzMTg3MDgyMGI2ZjZiYmExNWE0OGY0MTI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcetEpkgH2gAyNDEzNjM1MjM2OjU1MWRhOTQ5MWJiNTYwNGQ0MmMyODg2NjQxNmE4ODA5ZmYyODQ3OWY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "3ea7854461320b7e31870820b6f6bba15a48f412", "author": {"user": {"login": "marinakog", "name": "Marina Kogan"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/3ea7854461320b7e31870820b6f6bba15a48f412", "committedDate": "2020-04-29T22:13:28Z", "message": "added more debug info"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8cdd8014310979dbe0ab61d1252f6a6ce279dce5", "author": {"user": {"login": "marinakog", "name": "Marina Kogan"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/8cdd8014310979dbe0ab61d1252f6a6ce279dce5", "committedDate": "2020-04-30T00:31:44Z", "message": "added more debug info1"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f0d41cf5e99d478a020be1dcb37d8feae13dc6dc", "author": {"user": {"login": "marinakog", "name": "Marina Kogan"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/f0d41cf5e99d478a020be1dcb37d8feae13dc6dc", "committedDate": "2020-04-30T16:59:38Z", "message": " added debug to deploy app"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "040f8fa2f180a7d15c0db1426aa54a38d6c87c09", "author": {"user": {"login": "marinakog", "name": "Marina Kogan"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/040f8fa2f180a7d15c0db1426aa54a38d6c87c09", "committedDate": "2020-04-30T18:12:26Z", "message": "changed version prom"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7c292f89053d86690bb9c04e0f3ab57bf015bead", "author": {"user": {"login": "marinakog", "name": "Marina Kogan"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/7c292f89053d86690bb9c04e0f3ab57bf015bead", "committedDate": "2020-04-30T21:36:41Z", "message": " added debug"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fed6a51c0c256194ab4af9682caaaa0cb9c42ed1", "author": {"user": {"login": "marinakog", "name": "Marina Kogan"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/fed6a51c0c256194ab4af9682caaaa0cb9c42ed1", "committedDate": "2020-04-30T21:54:06Z", "message": "fixstyle"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9bbd10ffd756bbfcb0eb238394f9a9b5e388abc4", "author": {"user": {"login": "marinakog", "name": "Marina Kogan"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/9bbd10ffd756bbfcb0eb238394f9a9b5e388abc4", "committedDate": "2020-04-30T23:04:22Z", "message": "added sed"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "87c1829dbaee740c9600911c783df8f6b5e6b052", "author": {"user": {"login": "marinakog", "name": "Marina Kogan"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/87c1829dbaee740c9600911c783df8f6b5e6b052", "committedDate": "2020-04-30T23:40:11Z", "message": "fixed typo"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2e9671d71255c0559a8e89b38c5c22f622d85d16", "author": {"user": {"login": "marinakog", "name": "Marina Kogan"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/2e9671d71255c0559a8e89b38c5c22f622d85d16", "committedDate": "2020-05-01T00:10:04Z", "message": "fixed logic"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bba2e0c3b5f41b309d94a296d9b0fc763717ef78", "author": {"user": {"login": "marinakog", "name": "Marina Kogan"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/bba2e0c3b5f41b309d94a296d9b0fc763717ef78", "committedDate": "2020-05-01T00:14:01Z", "message": "added debug for grafana"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c100a14d876a5cf19b2b7d12012d8ed15e6ea284", "author": {"user": {"login": "marinakog", "name": "Marina Kogan"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/c100a14d876a5cf19b2b7d12012d8ed15e6ea284", "committedDate": "2020-05-01T00:50:51Z", "message": "fixed bash"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f6ac186faa1c3fe6d99d60e54887595fab90b1ba", "author": {"user": {"login": "marinakog", "name": "Marina Kogan"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/f6ac186faa1c3fe6d99d60e54887595fab90b1ba", "committedDate": "2020-05-01T01:36:22Z", "message": "fixed order"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "96e267e7fdc553056b1e6499948a3abf1af96d1b", "author": {"user": {"login": "marinakog", "name": "Marina Kogan"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/96e267e7fdc553056b1e6499948a3abf1af96d1b", "committedDate": "2020-05-01T02:05:44Z", "message": "separated scripts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7a11bb461b4cd2edee6b7289dec7326806637d3f", "author": {"user": {"login": "marinakog", "name": "Marina Kogan"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/7a11bb461b4cd2edee6b7289dec7326806637d3f", "committedDate": "2020-05-01T16:25:25Z", "message": "updated grafana ver"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a6dea01fcdb8ae9e6fd57c3cf199681770e255cd", "author": {"user": {"login": "marinakog", "name": "Marina Kogan"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/a6dea01fcdb8ae9e6fd57c3cf199681770e255cd", "committedDate": "2020-05-01T16:44:00Z", "message": "updated grafana ver1"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0b2b7c67b86966ca41d9f377bac2eaeedc8f9264", "author": {"user": {"login": "marinakog", "name": "Marina Kogan"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/0b2b7c67b86966ca41d9f377bac2eaeedc8f9264", "committedDate": "2020-05-01T16:44:12Z", "message": "Merge branch 'develop' of https://github.com/oracle/weblogic-kubernetes-operator into mondebug"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "310a4c4c07cdd23b80b353b61fc31a40b6e47c44", "author": {"user": {"login": "marinakog", "name": "Marina Kogan"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/310a4c4c07cdd23b80b353b61fc31a40b6e47c44", "committedDate": "2020-05-02T20:46:01Z", "message": "fixed redeploy"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bc98eff3ddf361a7a86ee2481910ff638f39a26c", "author": {"user": {"login": "marinakog", "name": "Marina Kogan"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/bc98eff3ddf361a7a86ee2481910ff638f39a26c", "committedDate": "2020-05-02T20:46:09Z", "message": "Merge branch 'develop' of https://github.com/oracle/weblogic-kubernetes-operator into mondebug"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d1d7ee99eb61113c17b9f986adbf6a89d6fe3a4b", "author": {"user": {"login": "marinakog", "name": "Marina Kogan"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/d1d7ee99eb61113c17b9f986adbf6a89d6fe3a4b", "committedDate": "2020-05-02T23:47:19Z", "message": "corrected scripts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "21ca726343d761c798871ebd65b644a1cf715707", "author": {"user": {"login": "marinakog", "name": "Marina Kogan"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/21ca726343d761c798871ebd65b644a1cf715707", "committedDate": "2020-05-03T00:03:28Z", "message": "added extra check"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "86bed8ae394e439518638c746b2f1543a990e129", "author": {"user": {"login": "marinakog", "name": "Marina Kogan"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/86bed8ae394e439518638c746b2f1543a990e129", "committedDate": "2020-05-03T15:17:07Z", "message": "added extra class just for Promdebug"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "559e4eae51a9a764ef341991bb9d7d21cc3c19c4", "author": {"user": {"login": "marinakog", "name": "Marina Kogan"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/559e4eae51a9a764ef341991bb9d7d21cc3c19c4", "committedDate": "2020-05-03T15:46:29Z", "message": "added more debug"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "95e2768c43431a9df47e5210e06e0f7a856c4e91", "author": {"user": {"login": "marinakog", "name": "Marina Kogan"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/95e2768c43431a9df47e5210e06e0f7a856c4e91", "committedDate": "2020-05-03T16:16:33Z", "message": "added more debug1"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "18df958f879849a301fa5c1268d0d82b7486c1fe", "author": {"user": {"login": "marinakog", "name": "Marina Kogan"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/18df958f879849a301fa5c1268d0d82b7486c1fe", "committedDate": "2020-05-03T16:36:16Z", "message": "fixed typo"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0cce76be75f9c2e5a4de98f490767c6988bbc0c3", "author": {"user": {"login": "marinakog", "name": "Marina Kogan"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/0cce76be75f9c2e5a4de98f490767c6988bbc0c3", "committedDate": "2020-05-03T16:41:55Z", "message": "TEMP cleanup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4651f48761af4ccf8de216a5e32cac2b87cf1151", "author": {"user": {"login": "marinakog", "name": "Marina Kogan"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/4651f48761af4ccf8de216a5e32cac2b87cf1151", "committedDate": "2020-05-03T16:50:04Z", "message": "removed TEMP"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "866eedd02e4c9e86747aa32e6ef5f6d1c05caef2", "author": {"user": {"login": "marinakog", "name": "Marina Kogan"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/866eedd02e4c9e86747aa32e6ef5f6d1c05caef2", "committedDate": "2020-05-03T16:57:43Z", "message": "fixed typo"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ecd06be7680052b4b6eff8c25e19826314b9f926", "author": {"user": {"login": "marinakog", "name": "Marina Kogan"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/ecd06be7680052b4b6eff8c25e19826314b9f926", "committedDate": "2020-05-03T17:04:18Z", "message": "delete debug"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d96346ea5b9967d1ba6d8b77e1d6ee7915115212", "author": {"user": {"login": "marinakog", "name": "Marina Kogan"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/d96346ea5b9967d1ba6d8b77e1d6ee7915115212", "committedDate": "2020-05-03T17:23:50Z", "message": "more debug"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e0a52d1205ade770625d8c3e82d4e7c61e3ba03e", "author": {"user": {"login": "marinakog", "name": "Marina Kogan"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/e0a52d1205ade770625d8c3e82d4e7c61e3ba03e", "committedDate": "2020-05-03T17:36:12Z", "message": "added view logs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "73e366d23a935ed216b6cb7d2ca81dcb3264c335", "author": {"user": {"login": "marinakog", "name": "Marina Kogan"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/73e366d23a935ed216b6cb7d2ca81dcb3264c335", "committedDate": "2020-05-03T19:56:48Z", "message": " deleted testfile"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "799aee289d10e9629cd38fd239aa179e2c004d51", "author": {"user": {"login": "marinakog", "name": "Marina Kogan"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/799aee289d10e9629cd38fd239aa179e2c004d51", "committedDate": "2020-05-04T16:33:24Z", "message": "added log collection"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fdf93c068de3503d937cd3ece06db28bb80fe433", "author": {"user": {"login": "marinakog", "name": "Marina Kogan"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/fdf93c068de3503d937cd3ece06db28bb80fe433", "committedDate": "2020-05-04T21:59:18Z", "message": "added more debug info"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0a431986e49205786c953609999e736ab3cdefbf", "author": {"user": {"login": "marinakog", "name": "Marina Kogan"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/0a431986e49205786c953609999e736ab3cdefbf", "committedDate": "2020-05-04T21:59:59Z", "message": "Merge branch 'develop' of https://github.com/oracle/weblogic-kubernetes-operator into mondebug"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "65e5632eda54167249a4b995aa204691b396294e", "author": {"user": {"login": "marinakog", "name": "Marina Kogan"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/65e5632eda54167249a4b995aa204691b396294e", "committedDate": "2020-05-05T16:45:36Z", "message": "deleted commented out blocks"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA1OTgxNjM5", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1623#pullrequestreview-405981639", "createdAt": "2020-05-05T16:59:16Z", "commit": {"oid": "65e5632eda54167249a4b995aa204691b396294e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQxNjo1OToxNlrOGQy5JQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQxNjo1OToxNlrOGQy5JQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDI2NDIyOQ==", "bodyText": "FULLTEST or QUICKTEST ?", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1623#discussion_r420264229", "createdAt": "2020-05-05T16:59:16Z", "author": {"login": "sankarpn"}, "path": "integration-tests/src/test/java/oracle/kubernetes/operator/ItMonitoringExporter.java", "diffHunk": "@@ -179,35 +173,35 @@ public void prepare() throws Exception {\n    */\n   @AfterAll\n   public static void staticUnPrepare() throws Exception {\n-    if (FULLTEST) {\n-      if (domain != null) {\n-        domain.destroy();\n-        TestUtils.deleteWeblogicDomainResources(domainNS1);\n-        if (BaseTest.SHARED_CLUSTER) {\n-\n-          String image = System.getenv(\"REPO_REGISTRY\")\n-              + \"/weblogick8s/\"\n-              + domainNS2\n-              + \"-image:\" + currentDateTime;\n-          String cmd = \"docker rmi -f \" + image;\n-          TestUtils.execOrAbortProcess(cmd, true);\n-        }\n-        String cmd = \"docker rmi -f \" + domainNS2 + \"-image:\" + currentDateTime;\n+    Assumptions.assumeTrue(QUICKTEST);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "65e5632eda54167249a4b995aa204691b396294e"}, "originalPosition": 179}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c7b589b1db902abe331f09326490a532e87fe3bb", "author": {"user": {"login": "marinakog", "name": "Marina Kogan"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/c7b589b1db902abe331f09326490a532e87fe3bb", "committedDate": "2020-05-05T17:04:19Z", "message": "fixed typo"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA2MDA2MDIy", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1623#pullrequestreview-406006022", "createdAt": "2020-05-05T17:30:46Z", "commit": {"oid": "c7b589b1db902abe331f09326490a532e87fe3bb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQxNzozMDo0N1rOGQ0Hrw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQxNzozMDo0N1rOGQ0Hrw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDI4NDMzNQ==", "bodyText": "If its a SHARED_CLUSTER both docker rmi -f commands get executed or line # 189 is supposed to be in a else block?", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1623#discussion_r420284335", "createdAt": "2020-05-05T17:30:47Z", "author": {"login": "sankarpn"}, "path": "integration-tests/src/test/java/oracle/kubernetes/operator/ItMonitoringExporter.java", "diffHunk": "@@ -179,35 +173,35 @@ public void prepare() throws Exception {\n    */\n   @AfterAll\n   public static void staticUnPrepare() throws Exception {\n-    if (FULLTEST) {\n-      if (domain != null) {\n-        domain.destroy();\n-        TestUtils.deleteWeblogicDomainResources(domainNS1);\n-        if (BaseTest.SHARED_CLUSTER) {\n-\n-          String image = System.getenv(\"REPO_REGISTRY\")\n-              + \"/weblogick8s/\"\n-              + domainNS2\n-              + \"-image:\" + currentDateTime;\n-          String cmd = \"docker rmi -f \" + image;\n-          TestUtils.execOrAbortProcess(cmd, true);\n-        }\n-        String cmd = \"docker rmi -f \" + domainNS2 + \"-image:\" + currentDateTime;\n+    Assumptions.assumeTrue(FULLTEST);\n+    if (domain != null) {\n+      domain.destroy();\n+      TestUtils.deleteWeblogicDomainResources(domainNS1);\n+      if (BaseTest.SHARED_CLUSTER) {\n+\n+        String image = System.getenv(\"REPO_REGISTRY\")\n+            + \"/weblogick8s/\"\n+            + domainNS2\n+            + \"-image:\" + currentDateTime;\n+        String cmd = \"docker rmi -f \" + image;\n         TestUtils.execOrAbortProcess(cmd, true);\n       }\n-      if (operator != null) {\n-        operator.destroy();\n-      }\n-      try {\n-        uninstallWebHookPrometheusGrafanaMySql();\n-      } catch (Exception ex) {\n-        LoggerHelper.getLocal().log(Level.INFO,\n-            \"Exception caught while uninstalling webhook/prometheus/Grafana/Mysql \" + ex.getMessage());\n-      }\n-\n-      tearDown(new Object() {}.getClass().getEnclosingClass().getSimpleName(), namespaceList.toString());\n-      LoggerHelper.getLocal().log(Level.INFO,\"SUCCESS\");\n+      String cmd = \"docker rmi -f \" + domainNS2 + \"-image:\" + currentDateTime;\n+      TestUtils.execOrAbortProcess(cmd, true);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c7b589b1db902abe331f09326490a532e87fe3bb"}, "originalPosition": 205}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA2MDEzMzg3", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1623#pullrequestreview-406013387", "createdAt": "2020-05-05T17:40:46Z", "commit": {"oid": "c7b589b1db902abe331f09326490a532e87fe3bb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQxNzo0MDo0N1rOGQ0fBQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQxNzo0MDo0N1rOGQ0fBQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDI5MDMwOQ==", "bodyText": "is the check is only for debugging purposes? or deploy needs to be aborted when cluster state is not in the expected state.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1623#discussion_r420290309", "createdAt": "2020-05-05T17:40:47Z", "author": {"login": "sankarpn"}, "path": "integration-tests/src/test/resources/deploywebapp.py", "diffHunk": "@@ -1,22 +1,12 @@\n # Copyright (c) 2018, 2020, Oracle Corporation and/or its affiliates.\n # Licensed under the Universal Permissive License v 1.0 as shown at https://oss.oracle.com/licenses/upl.\n-\n-import time as systime\n-\n connect(sys.argv[1],sys.argv[2],sys.argv[3])\n-deploy(sys.argv[4],sys.argv[5],sys.argv[6],upload='false',remote='false')\n-#systime.sleep(15)\n-\n-#cd ('AppDeployments')\n-#myapps=cmo.getAppDeployments()\n- \n-#for appName in myapps:\n-#       domainConfig()\n-#       cd ('/AppDeployments/'+appName.getName()+'/Targets')\n-#       mytargets = ls(returnMap='true')\n-#       domainRuntime()\n-#       cd('AppRuntimeStateRuntime')\n-#       cd('AppRuntimeStateRuntime')\n-#       for targetinst in mytargets:\n-#             curstate4=cmo.getCurrentState(appName.getName(),targetinst)\n-#             print '-----------', curstate4, '-----------', appName.getName()\n\\ No newline at end of file\n+appName=sys.argv[4]\n+appPath=sys.argv[5]\n+clusterName=sys.argv[6]\n+print 'Deploying application[%s] to the Cluster[%s] located @ [%s] ' %(appName,clusterName,appPath)\n+print 'Checking the server status on the Cluster[%s] ' %(clusterName)\n+domainRuntime()\n+state(clusterName,'Cluster')", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c7b589b1db902abe331f09326490a532e87fe3bb"}, "originalPosition": 30}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA2MDE1Mzc3", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1623#pullrequestreview-406015377", "createdAt": "2020-05-05T17:43:21Z", "commit": {"oid": "c7b589b1db902abe331f09326490a532e87fe3bb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQxNzo0MzoyMlrOGQ0lMg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQxNzo0MzoyMlrOGQ0lMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDI5MTg5MA==", "bodyText": "deploy works even when in domainRuntime? or you have to be in config tree. Just want to make sure.", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1623#discussion_r420291890", "createdAt": "2020-05-05T17:43:22Z", "author": {"login": "sankarpn"}, "path": "integration-tests/src/test/resources/deploywebapp.py", "diffHunk": "@@ -1,22 +1,12 @@\n # Copyright (c) 2018, 2020, Oracle Corporation and/or its affiliates.\n # Licensed under the Universal Permissive License v 1.0 as shown at https://oss.oracle.com/licenses/upl.\n-\n-import time as systime\n-\n connect(sys.argv[1],sys.argv[2],sys.argv[3])\n-deploy(sys.argv[4],sys.argv[5],sys.argv[6],upload='false',remote='false')\n-#systime.sleep(15)\n-\n-#cd ('AppDeployments')\n-#myapps=cmo.getAppDeployments()\n- \n-#for appName in myapps:\n-#       domainConfig()\n-#       cd ('/AppDeployments/'+appName.getName()+'/Targets')\n-#       mytargets = ls(returnMap='true')\n-#       domainRuntime()\n-#       cd('AppRuntimeStateRuntime')\n-#       cd('AppRuntimeStateRuntime')\n-#       for targetinst in mytargets:\n-#             curstate4=cmo.getCurrentState(appName.getName(),targetinst)\n-#             print '-----------', curstate4, '-----------', appName.getName()\n\\ No newline at end of file\n+appName=sys.argv[4]\n+appPath=sys.argv[5]\n+clusterName=sys.argv[6]\n+print 'Deploying application[%s] to the Cluster[%s] located @ [%s] ' %(appName,clusterName,appPath)\n+print 'Checking the server status on the Cluster[%s] ' %(clusterName)\n+domainRuntime()\n+state(clusterName,'Cluster')\n+#deploy(sys.argv[4],sys.argv[5],sys.argv[6],upload='false',remote='false')\n+deploy(appName=appName, path=appPath, targets=clusterName)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c7b589b1db902abe331f09326490a532e87fe3bb"}, "originalPosition": 32}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA2MDE3NzE4", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1623#pullrequestreview-406017718", "createdAt": "2020-05-05T17:46:32Z", "commit": {"oid": "c7b589b1db902abe331f09326490a532e87fe3bb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQxNzo0NjozMlrOGQ0siQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQxNzo0NjozMlrOGQ0siQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDI5Mzc2OQ==", "bodyText": "At this point you are sure that the grafana pod at least created ?", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1623#discussion_r420293769", "createdAt": "2020-05-05T17:46:32Z", "author": {"login": "sankarpn"}, "path": "integration-tests/src/test/resources/exporter/createGrafana.sh", "diffHunk": "@@ -5,23 +5,57 @@ monitoringExporterDir=$1\n resourceExporterDir=$2\n grafanaVersionArgs=$3\n monitoringExporterEndToEndDir=${monitoringExporterDir}/src/samples/kubernetes/end2end\n-\n+CHARTNS=monitortestns\n+CHARTNAME=grafana\n HELM_VERSION=$(helm version --short --client)\n \n+function checkPod() {\n+  max=20\n+  count=0\n+  echo \"Checking pods $CHARTNAME\"\n+  grafanapod=$(kubectl get po -n $CHARTNS | grep $CHARTNAME | awk '{print $1 }')", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c7b589b1db902abe331f09326490a532e87fe3bb"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA2MDcxNzg0", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1623#pullrequestreview-406071784", "createdAt": "2020-05-05T19:00:41Z", "commit": {"oid": "c7b589b1db902abe331f09326490a532e87fe3bb"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA2MDgzNTQz", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1623#pullrequestreview-406083543", "createdAt": "2020-05-05T19:17:49Z", "commit": {"oid": "c7b589b1db902abe331f09326490a532e87fe3bb"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA2MTAyOTY5", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1623#pullrequestreview-406102969", "createdAt": "2020-05-05T19:46:23Z", "commit": {"oid": "c7b589b1db902abe331f09326490a532e87fe3bb"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQxOTo0NjoyM1rOGQ48wg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQxOTo0ODozOVrOGQ5BQA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDM2MzQ1OA==", "bodyText": "if the exit value was not zero, you will never get to this line.\nif you need the result, you have to use ExecCommand.exec() instead", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1623#discussion_r420363458", "createdAt": "2020-05-05T19:46:23Z", "author": {"login": "markxnelson"}, "path": "integration-tests/src/test/java/oracle/kubernetes/operator/ItMonitoringExporter.java", "diffHunk": "@@ -260,12 +254,19 @@ private static void executeShelScript(String srcLoc, String destLoc, String file\n             + args\n             + \" | tee \"\n             + outLogFile;\n-    TestUtils.execOrAbortProcess(crdCmd, true);\n-    crdCmd = \" cat \" + destLoc + \"/\" + outLogFile;\n-    ExecResult result = ExecCommand.exec(crdCmd);\n-    assertFalse(\n-        result.stdout().contains(\"BUILD FAILURE\"), \"Shell script failed: \" + result.stdout());\n+    ExecResult result = TestUtils.execOrAbortProcess(crdCmd, true);\n+    if (result.exitValue() != 0) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c7b589b1db902abe331f09326490a532e87fe3bb"}, "originalPosition": 233}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDM2NDYwOA==", "bodyText": "@ddsharpe @rjeberhard do we need some kind of write() or something at the end of this script?  or at least a disconnect() or whatever??", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1623#discussion_r420364608", "createdAt": "2020-05-05T19:48:39Z", "author": {"login": "markxnelson"}, "path": "integration-tests/src/test/resources/deploywebapp.py", "diffHunk": "@@ -1,22 +1,12 @@\n # Copyright (c) 2018, 2020, Oracle Corporation and/or its affiliates.\n # Licensed under the Universal Permissive License v 1.0 as shown at https://oss.oracle.com/licenses/upl.\n-\n-import time as systime\n-\n connect(sys.argv[1],sys.argv[2],sys.argv[3])\n-deploy(sys.argv[4],sys.argv[5],sys.argv[6],upload='false',remote='false')\n-#systime.sleep(15)\n-\n-#cd ('AppDeployments')\n-#myapps=cmo.getAppDeployments()\n- \n-#for appName in myapps:\n-#       domainConfig()\n-#       cd ('/AppDeployments/'+appName.getName()+'/Targets')\n-#       mytargets = ls(returnMap='true')\n-#       domainRuntime()\n-#       cd('AppRuntimeStateRuntime')\n-#       cd('AppRuntimeStateRuntime')\n-#       for targetinst in mytargets:\n-#             curstate4=cmo.getCurrentState(appName.getName(),targetinst)\n-#             print '-----------', curstate4, '-----------', appName.getName()\n\\ No newline at end of file\n+appName=sys.argv[4]\n+appPath=sys.argv[5]\n+clusterName=sys.argv[6]\n+print 'Deploying application[%s] to the Cluster[%s] located @ [%s] ' %(appName,clusterName,appPath)\n+print 'Checking the server status on the Cluster[%s] ' %(clusterName)\n+domainRuntime()\n+state(clusterName,'Cluster')\n+#deploy(sys.argv[4],sys.argv[5],sys.argv[6],upload='false',remote='false')\n+deploy(appName=appName, path=appPath, targets=clusterName)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c7b589b1db902abe331f09326490a532e87fe3bb"}, "originalPosition": 32}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6908d1774f9d4ce313914c79dc7be9a4506d8249", "author": {"user": {"login": "marinakog", "name": "Marina Kogan"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/6908d1774f9d4ce313914c79dc7be9a4506d8249", "committedDate": "2020-05-06T18:07:46Z", "message": "Merge branch 'develop' of https://github.com/oracle/weblogic-kubernetes-operator into mondebug"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "db688775945384f0f15d1609ab6636bf1ef279ea", "author": {"user": {"login": "marinakog", "name": "Marina Kogan"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/db688775945384f0f15d1609ab6636bf1ef279ea", "committedDate": "2020-05-06T18:09:24Z", "message": "reverted deploywebapp.py to dev version, needed only for extra debugging"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "551da9491bb5604d42c28866416a8809ff28479f", "author": {"user": {"login": "marinakog", "name": "Marina Kogan"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/551da9491bb5604d42c28866416a8809ff28479f", "committedDate": "2020-05-06T18:34:37Z", "message": "replaced exec"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4747, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}