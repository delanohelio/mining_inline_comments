{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkyMDg1NTQ2", "number": 1488, "title": "Make cleanup script more orderly in its deletes.", "bodyText": "Various updates to cleanup script:\n\n\nAdditional tracing throughout\n\n\nAdded a 'dry run' mode. This is useful for debugging the script itself. If you pass '-dryrun' on the command line, then the script will proceed without deleting anything - it will just echo potential delete commands - plus it will reduce it's wait-for-pods timeouts (since we know the pods aren't going away).\n\n\nAdd timestamps to trace statements\n\n\nRemove its delete of tiller.\n\n\nRemove its direct delete of namespaces.\n\n\nAdd new deletes before attempting its 'usual' deletes:\n\nDelete domains and wait up to 60 seconds for their pods to go away (assumes operators will do this)\nDelete operator deployments\nDelete any leftover WLS and introspector pods and wait up to 60 seconds for them to go away\n\n\n\nModify the 'old' path a bit. Here's the 'old' path in order of occurrence:\n\nUninstall every helm install as before\nDelete by type-and-label is now updated to delete each type individually in a specific order, instead of all types in one command\nNote that the final catch-all 'generic' delete step is still random in ordering, but hopefully the new and ordered deletes above will mitigate issues with this...\nDelete hostpath directory as before", "createdAt": "2020-03-22T22:54:51Z", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1488", "merged": true, "mergeCommit": {"oid": "a3be1eda14b43efda22fb7af9b33b583dde1f9f7"}, "closed": true, "closedAt": "2020-03-23T15:27:06Z", "author": {"login": "tbarnes-us"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcQRoy8gH2gAyMzkyMDg1NTQ2OjUxZTNiYTliNmQwZmU2ZjU3MjYzMTFiNGFmYmIzY2QyNThlZTA0Zjk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcQgA0yAFqTM3OTUzOTQ0OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "51e3ba9b6d0fe6f5726311b4afbb3cd258ee04f9", "author": {"user": {"login": "tbarnes-us", "name": "Tom Barnes"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/51e3ba9b6d0fe6f5726311b4afbb3cd258ee04f9", "committedDate": "2020-03-22T22:41:49Z", "message": "Make cleanup script more orderly in its deletes."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b3387f6a6ee7c274a08ba963c05ba7469bee98cf", "author": {"user": {"login": "tbarnes-us", "name": "Tom Barnes"}}, "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/b3387f6a6ee7c274a08ba963c05ba7469bee98cf", "committedDate": "2020-03-22T23:15:03Z", "message": "Add timestamps."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc5NDM0MjIy", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1488#pullrequestreview-379434222", "createdAt": "2020-03-23T13:37:04Z", "commit": {"oid": "b3387f6a6ee7c274a08ba963c05ba7469bee98cf"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxMzozNzowNVrOF6FtSA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxMzozNzowNVrOF6FtSA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjQ1NTI0MA==", "bodyText": "Commenting so that we don't forget about this.  We need to see how else this flag is used.  If it really is all about deleting tiller than it was a strange name :)", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1488#discussion_r396455240", "createdAt": "2020-03-23T13:37:05Z", "author": {"login": "rjeberhard"}, "path": "src/integration-tests/bash/cleanup.sh", "diffHunk": "@@ -20,21 +20,34 @@\n #                   given lease on a failure.\n #\n #   SHARED_CLUSTER  Set this to true if you want cleanup to delete tiller\n+#                   TBD tiller delete is disabled ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b3387f6a6ee7c274a08ba963c05ba7469bee98cf"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc5NTM5NDQ5", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1488#pullrequestreview-379539449", "createdAt": "2020-03-23T15:26:44Z", "commit": {"oid": "b3387f6a6ee7c274a08ba963c05ba7469bee98cf"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4887, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}