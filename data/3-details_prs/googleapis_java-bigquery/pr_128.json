{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY3NjkxMzQy", "number": 128, "title": "feat: add debug statement to StandardTableDefinition", "bodyText": "Debugs b/148288889", "createdAt": "2020-01-27T20:36:28Z", "url": "https://github.com/googleapis/java-bigquery/pull/128", "merged": true, "mergeCommit": {"oid": "660ccf2922308ec4d27245f49818604cfdfc50c3"}, "closed": true, "closedAt": "2020-01-28T22:45:58Z", "author": {"login": "stephaniewang526"}, "timelineItems": {"totalCount": 17, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb-i305gH2gAyMzY3NjkxMzQyOjMyMjQ1YzdkZGM0Yzk3MzhmMDY0MTgwNDhlOTBmYjFjYWJiNTkyYWE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb-5U9dgFqTM0OTc1ODc5Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "32245c7ddc4c9738f06418048e90fb1cabb592aa", "author": {"user": {"login": "stephaniewang526", "name": "Stephanie Wang"}}, "url": "https://github.com/googleapis/java-bigquery/commit/32245c7ddc4c9738f06418048e90fb1cabb592aa", "committedDate": "2020-01-27T20:35:59Z", "message": "chore: add debug statement to StandardTableDefinition"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "683220e4e45fc89baaa622c9486fe456be956b56", "author": {"user": {"login": "stephaniewang526", "name": "Stephanie Wang"}}, "url": "https://github.com/googleapis/java-bigquery/commit/683220e4e45fc89baaa622c9486fe456be956b56", "committedDate": "2020-01-27T20:58:06Z", "message": "update to include cause"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4OTcwNTgw", "url": "https://github.com/googleapis/java-bigquery/pull/128#pullrequestreview-348970580", "createdAt": "2020-01-27T20:59:36Z", "commit": {"oid": "683220e4e45fc89baaa622c9486fe456be956b56"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QyMDo1OTozNlrOFiRSOA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QyMTowMDo0MFrOFiRUfQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTQ3OTA5Ng==", "bodyText": "Is this considered a breaking change? If not, let's be more specific with IllegalArgumentException, NullPointerException.", "url": "https://github.com/googleapis/java-bigquery/pull/128#discussion_r371479096", "createdAt": "2020-01-27T20:59:36Z", "author": {"login": "tswast"}, "path": "google-cloud-bigquery/src/main/java/com/google/cloud/bigquery/StandardTableDefinition.java", "diffHunk": "@@ -263,7 +263,7 @@ Table toPb() {\n   }\n \n   @SuppressWarnings(\"unchecked\")\n-  static StandardTableDefinition fromPb(Table tablePb) {\n+  static StandardTableDefinition fromPb(Table tablePb) throws Throwable {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "683220e4e45fc89baaa622c9486fe456be956b56"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTQ3OTY3Nw==", "bodyText": "Ditto. I'm concerned that this might be a breaking change. I guess it's okay since it's protected?\nLet's be more specific than \"Throwable\" and use IllegalArgumentException, NullPointerException.", "url": "https://github.com/googleapis/java-bigquery/pull/128#discussion_r371479677", "createdAt": "2020-01-27T21:00:40Z", "author": {"login": "tswast"}, "path": "google-cloud-bigquery/src/main/java/com/google/cloud/bigquery/TableDefinition.java", "diffHunk": "@@ -145,7 +146,7 @@ Table toPb() {\n   }\n \n   @SuppressWarnings(\"unchecked\")\n-  static <T extends TableDefinition> T fromPb(Table tablePb) {\n+  static <T extends TableDefinition> T fromPb(Table tablePb) throws IOException, Throwable {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "683220e4e45fc89baaa622c9486fe456be956b56"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7f18fb161bddb3bab26fc19ca90f8e146cbacac3", "author": {"user": {"login": "stephaniewang526", "name": "Stephanie Wang"}}, "url": "https://github.com/googleapis/java-bigquery/commit/7f18fb161bddb3bab26fc19ca90f8e146cbacac3", "committedDate": "2020-01-27T21:18:04Z", "message": "remove changes to method headers"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4OTg3NTIy", "url": "https://github.com/googleapis/java-bigquery/pull/128#pullrequestreview-348987522", "createdAt": "2020-01-27T21:28:46Z", "commit": {"oid": "7f18fb161bddb3bab26fc19ca90f8e146cbacac3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QyMToyODo0N1rOFiSFuw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QyMToyODo0N1rOFiSFuw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTQ5MjI4Mw==", "bodyText": "Are we expecting to get errors when constructing the exception?", "url": "https://github.com/googleapis/java-bigquery/pull/128#discussion_r371492283", "createdAt": "2020-01-27T21:28:47Z", "author": {"login": "tswast"}, "path": "google-cloud-bigquery/src/main/java/com/google/cloud/bigquery/StandardTableDefinition.java", "diffHunk": "@@ -272,7 +272,27 @@ static StandardTableDefinition fromPb(Table tablePb) {\n       builder.setStreamingBuffer(StreamingBuffer.fromPb(tablePb.getStreamingBuffer()));\n     }\n     if (tablePb.getTimePartitioning() != null) {\n-      builder.setTimePartitioning(TimePartitioning.fromPb(tablePb.getTimePartitioning()));\n+      try {\n+        builder.setTimePartitioning(TimePartitioning.fromPb(tablePb.getTimePartitioning()));\n+      } catch (IllegalArgumentException e) {\n+        throw new IllegalArgumentException(\n+            \"Got unexpected time partitioning \"\n+                + tablePb.getTimePartitioning()\n+                + \" in table \"\n+                + tablePb.getTableReference(),\n+            e);\n+      } catch (NullPointerException e) {\n+        try {\n+          throw new NullPointerException(\n+                  \"Got unexpected time partitioning \"\n+                      + tablePb.getTimePartitioning()\n+                      + \" in table \"\n+                      + tablePb.getTableReference())\n+              .initCause(e);\n+        } catch (Throwable throwable) {\n+          throwable.printStackTrace();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7f18fb161bddb3bab26fc19ca90f8e146cbacac3"}, "originalPosition": 23}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a1441c0f0999d4a048b07b34a3794b042cbc15fa", "author": {"user": {"login": "stephaniewang526", "name": "Stephanie Wang"}}, "url": "https://github.com/googleapis/java-bigquery/commit/a1441c0f0999d4a048b07b34a3794b042cbc15fa", "committedDate": "2020-01-27T21:53:04Z", "message": "update base on comment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c3aeac4b84a5a669b2c6b95fa4ec79abde3c451b", "author": {"user": {"login": "stephaniewang526", "name": "Stephanie Wang"}}, "url": "https://github.com/googleapis/java-bigquery/commit/c3aeac4b84a5a669b2c6b95fa4ec79abde3c451b", "committedDate": "2020-01-28T16:10:34Z", "message": "adding testcase"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5NTE0NDY5", "url": "https://github.com/googleapis/java-bigquery/pull/128#pullrequestreview-349514469", "createdAt": "2020-01-28T16:24:01Z", "commit": {"oid": "c3aeac4b84a5a669b2c6b95fa4ec79abde3c451b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQxNjoyNDowMVrOFirkrQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQxNjoyNDowMVrOFirkrQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTkwOTgwNQ==", "bodyText": "use try/catch and assert.fail()", "url": "https://github.com/googleapis/java-bigquery/pull/128#discussion_r371909805", "createdAt": "2020-01-28T16:24:01Z", "author": {"login": "pmakani"}, "path": "google-cloud-bigquery/src/test/java/com/google/cloud/bigquery/StandardTableDefinitionTest.java", "diffHunk": "@@ -118,6 +125,12 @@ public void testToAndFromPb() {\n         definition, TableDefinition.<StandardTableDefinition>fromPb(definition.toPb()));\n   }\n \n+  @Test(expected = IllegalArgumentException.class)\n+  public void testInvalidTableDef() {\n+    // not supposed to have this time partitioning type\n+    StandardTableDefinition.fromPb(INVALID_TABLE_DEFINITION.toPb());\n+  }\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c3aeac4b84a5a669b2c6b95fa4ec79abde3c451b"}, "originalPosition": 23}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0215d2c1416fee1cd9ce088f4e7899a6c70b24c0", "author": {"user": {"login": "stephaniewang526", "name": "Stephanie Wang"}}, "url": "https://github.com/googleapis/java-bigquery/commit/0215d2c1416fee1cd9ce088f4e7899a6c70b24c0", "committedDate": "2020-01-28T21:57:47Z", "message": "adding testcases"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5NzM0NzAy", "url": "https://github.com/googleapis/java-bigquery/pull/128#pullrequestreview-349734702", "createdAt": "2020-01-28T21:59:28Z", "commit": {"oid": "0215d2c1416fee1cd9ce088f4e7899a6c70b24c0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5NzQwODI5", "url": "https://github.com/googleapis/java-bigquery/pull/128#pullrequestreview-349740829", "createdAt": "2020-01-28T22:10:36Z", "commit": {"oid": "0215d2c1416fee1cd9ce088f4e7899a6c70b24c0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQyMjoxMDozN1rOFi2Zyg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQyMjoxMDozN1rOFi2Zyg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjA4NzI0Mg==", "bodyText": "Actually, can we output the whole timePartitioning pretty-printed to a string?", "url": "https://github.com/googleapis/java-bigquery/pull/128#discussion_r372087242", "createdAt": "2020-01-28T22:10:37Z", "author": {"login": "tswast"}, "path": "google-cloud-bigquery/src/main/java/com/google/cloud/bigquery/StandardTableDefinition.java", "diffHunk": "@@ -272,7 +272,31 @@ static StandardTableDefinition fromPb(Table tablePb) {\n       builder.setStreamingBuffer(StreamingBuffer.fromPb(tablePb.getStreamingBuffer()));\n     }\n     if (tablePb.getTimePartitioning() != null) {\n-      builder.setTimePartitioning(TimePartitioning.fromPb(tablePb.getTimePartitioning()));\n+      try {\n+        builder.setTimePartitioning(TimePartitioning.fromPb(tablePb.getTimePartitioning()));\n+      } catch (IllegalArgumentException e) {\n+        throw new IllegalArgumentException(\n+            \"Illegal Argument - Got unexpected time partitioning \"\n+                + tablePb.getTimePartitioning().getType()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0215d2c1416fee1cd9ce088f4e7899a6c70b24c0"}, "originalPosition": 10}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5NzQxMjQ5", "url": "https://github.com/googleapis/java-bigquery/pull/128#pullrequestreview-349741249", "createdAt": "2020-01-28T22:11:20Z", "commit": {"oid": "0215d2c1416fee1cd9ce088f4e7899a6c70b24c0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQyMjoxMToyMVrOFi2bCA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQyMjoxMToyMVrOFi2bCA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjA4NzU2MA==", "bodyText": "Same here. Let's call getTimePartitioning().toPrettyString()", "url": "https://github.com/googleapis/java-bigquery/pull/128#discussion_r372087560", "createdAt": "2020-01-28T22:11:21Z", "author": {"login": "tswast"}, "path": "google-cloud-bigquery/src/main/java/com/google/cloud/bigquery/StandardTableDefinition.java", "diffHunk": "@@ -272,7 +272,31 @@ static StandardTableDefinition fromPb(Table tablePb) {\n       builder.setStreamingBuffer(StreamingBuffer.fromPb(tablePb.getStreamingBuffer()));\n     }\n     if (tablePb.getTimePartitioning() != null) {\n-      builder.setTimePartitioning(TimePartitioning.fromPb(tablePb.getTimePartitioning()));\n+      try {\n+        builder.setTimePartitioning(TimePartitioning.fromPb(tablePb.getTimePartitioning()));\n+      } catch (IllegalArgumentException e) {\n+        throw new IllegalArgumentException(\n+            \"Illegal Argument - Got unexpected time partitioning \"\n+                + tablePb.getTimePartitioning().getType()\n+                + \" in project \"\n+                + tablePb.getTableReference().getProjectId()\n+                + \" in dataset \"\n+                + tablePb.getTableReference().getDatasetId()\n+                + \" in table \"\n+                + tablePb.getTableReference().getTableId(),\n+            e);\n+      } catch (NullPointerException e) {\n+        throw new NullPointerException(\n+            \"Null pointer - Got unexpected time partitioning \"\n+                + tablePb.getTimePartitioning().getType()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0215d2c1416fee1cd9ce088f4e7899a6c70b24c0"}, "originalPosition": 21}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b901f96e6ba047437651725df3b1613a9687d984", "author": {"user": {"login": "stephaniewang526", "name": "Stephanie Wang"}}, "url": "https://github.com/googleapis/java-bigquery/commit/b901f96e6ba047437651725df3b1613a9687d984", "committedDate": "2020-01-28T22:14:24Z", "message": "fix test dep build error\n\n[WARNING] Used undeclared dependencies found:\n[WARNING]    org.hamcrest:hamcrest-core:jar:1.3:test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b1f0c8cd01ed59ab8bd5e57ef56cd674319c420b", "author": {"user": {"login": "stephaniewang526", "name": "Stephanie Wang"}}, "url": "https://github.com/googleapis/java-bigquery/commit/b1f0c8cd01ed59ab8bd5e57ef56cd674319c420b", "committedDate": "2020-01-28T22:28:59Z", "message": "update to add more info"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5NzUxNDY5", "url": "https://github.com/googleapis/java-bigquery/pull/128#pullrequestreview-349751469", "createdAt": "2020-01-28T22:30:53Z", "commit": {"oid": "b1f0c8cd01ed59ab8bd5e57ef56cd674319c420b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5NzU1MjM4", "url": "https://github.com/googleapis/java-bigquery/pull/128#pullrequestreview-349755238", "createdAt": "2020-01-28T22:38:26Z", "commit": {"oid": "b1f0c8cd01ed59ab8bd5e57ef56cd674319c420b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5NzU4Nzkz", "url": "https://github.com/googleapis/java-bigquery/pull/128#pullrequestreview-349758793", "createdAt": "2020-01-28T22:45:43Z", "commit": {"oid": "b1f0c8cd01ed59ab8bd5e57ef56cd674319c420b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1294, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}