{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY2NjE0Nzgw", "number": 124, "title": "feat: new sample - Get Model", "bodyText": "Fixes b/148225513", "createdAt": "2020-01-23T23:23:00Z", "url": "https://github.com/googleapis/java-bigquery/pull/124", "merged": true, "mergeCommit": {"oid": "a03670b3ba19c7805712f09754435e422228abd6"}, "closed": true, "closedAt": "2020-01-27T20:32:57Z", "author": {"login": "stephaniewang526"}, "timelineItems": {"totalCount": 16, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb7RnidAH2gAyMzY2NjE0NzgwOmMwYWYxNTllZjVkODg4Yjk1NGM5NjI2YjM3MTM4N2U1OWFjMTlhY2I=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb-ixCVAFqTM0ODk1MzA0OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c0af159ef5d888b954c9626b371387e59ac19acb", "author": {"user": {"login": "stephaniewang526", "name": "Stephanie Wang"}}, "url": "https://github.com/googleapis/java-bigquery/commit/c0af159ef5d888b954c9626b371387e59ac19acb", "committedDate": "2020-01-17T16:48:02Z", "message": "feat: add new sample - Tables: Relax column query append"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4ff1f36e7a152edf949cd4b729b03349558558b2", "author": {"user": {"login": "stephaniewang526", "name": "Stephanie Wang"}}, "url": "https://github.com/googleapis/java-bigquery/commit/4ff1f36e7a152edf949cd4b729b03349558558b2", "committedDate": "2020-01-17T17:01:00Z", "message": "nit"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1797825105c9e7db0fd9d479e6956bfae04d83a7", "author": {"user": {"login": "stephaniewang526", "name": "Stephanie Wang"}}, "url": "https://github.com/googleapis/java-bigquery/commit/1797825105c9e7db0fd9d479e6956bfae04d83a7", "committedDate": "2020-01-21T18:17:53Z", "message": "update based on comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c49b78b50527918dcdb64fbf11feb5d0af91a7e7", "author": {"user": {"login": "stephaniewang526", "name": "Stephanie Wang"}}, "url": "https://github.com/googleapis/java-bigquery/commit/c49b78b50527918dcdb64fbf11feb5d0af91a7e7", "committedDate": "2020-01-22T16:50:45Z", "message": "update exception handling"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a1393e4b3244a3c5db9e6a361909ae6368e6be48", "author": {"user": {"login": "stephaniewang526", "name": "Stephanie Wang"}}, "url": "https://github.com/googleapis/java-bigquery/commit/a1393e4b3244a3c5db9e6a361909ae6368e6be48", "committedDate": "2020-01-23T17:18:30Z", "message": "refactor"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3d35c13d828c1c4b7d396b78df8bc5f37742ef1c", "author": {"user": {"login": "stephaniewang526", "name": "Stephanie Wang"}}, "url": "https://github.com/googleapis/java-bigquery/commit/3d35c13d828c1c4b7d396b78df8bc5f37742ef1c", "committedDate": "2020-01-23T19:26:16Z", "message": "update base on comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d5c035ecb4a9bce4c64b7cbc8ce405edd7d45fce", "author": {"user": {"login": "stephaniewang526", "name": "Stephanie Wang"}}, "url": "https://github.com/googleapis/java-bigquery/commit/d5c035ecb4a9bce4c64b7cbc8ce405edd7d45fce", "committedDate": "2020-01-23T19:52:02Z", "message": "code refactoring"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0c13ae926fc8793621d15fa52da5037c01d1aa4a", "author": {"user": {"login": "stephaniewang526", "name": "Stephanie Wang"}}, "url": "https://github.com/googleapis/java-bigquery/commit/0c13ae926fc8793621d15fa52da5037c01d1aa4a", "committedDate": "2020-01-23T20:41:09Z", "message": "fix build errors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b022684f2ad77ecb5db81a0371f72fe7926911d2", "author": {"user": {"login": "stephaniewang526", "name": "Stephanie Wang"}}, "url": "https://github.com/googleapis/java-bigquery/commit/b022684f2ad77ecb5db81a0371f72fe7926911d2", "committedDate": "2020-01-23T21:36:18Z", "message": "add debugging statements"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7d9118990f10af553733c209fd0855c898c91065", "author": {"user": {"login": "stephaniewang526", "name": "Stephanie Wang"}}, "url": "https://github.com/googleapis/java-bigquery/commit/7d9118990f10af553733c209fd0855c898c91065", "committedDate": "2020-01-23T21:43:54Z", "message": "remove unused exception"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3c0aab0f824fb9b73903dbac5ddd5108c45eeca8", "author": {"user": {"login": "stephaniewang526", "name": "Stephanie Wang"}}, "url": "https://github.com/googleapis/java-bigquery/commit/3c0aab0f824fb9b73903dbac5ddd5108c45eeca8", "committedDate": "2020-01-23T23:21:56Z", "message": "feat: new sample - Models: Get a model resource"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8fcb76dbf657633288ae0725d2320d5dfedb7276", "author": {"user": {"login": "stephaniewang526", "name": "Stephanie Wang"}}, "url": "https://github.com/googleapis/java-bigquery/commit/8fcb76dbf657633288ae0725d2320d5dfedb7276", "committedDate": "2020-01-23T23:22:11Z", "message": "feat: new sample - Models: Get a model resource"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4ODI3ODQw", "url": "https://github.com/googleapis/java-bigquery/pull/124#pullrequestreview-348827840", "createdAt": "2020-01-27T17:06:33Z", "commit": {"oid": "8fcb76dbf657633288ae0725d2320d5dfedb7276"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QxNzowNjozNFrOFiKbLA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QxNzoxMDoxOFrOFiKiig==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTM2NjcwMA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                      \"SELECT \" + \"word\\n\" + \"FROM \" + sourceTable + \"\\n\" + \"WHERE word like '%is%' \";\n          \n          \n            \n                      \"SELECT word FROM \" + sourceTable + \" WHERE word like '%is%' \";", "url": "https://github.com/googleapis/java-bigquery/pull/124#discussion_r371366700", "createdAt": "2020-01-27T17:06:34Z", "author": {"login": "kurtisvg"}, "path": "samples/src/main/java/com/example/bigquery/RelaxTableQuery.java", "diffHunk": "@@ -0,0 +1,100 @@\n+/*\n+ * Copyright 2020 Google LLC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.example.bigquery;\n+\n+// [START bigquery_relax_column_query_append]\n+import com.google.cloud.bigquery.BigQuery;\n+import com.google.cloud.bigquery.BigQueryException;\n+import com.google.cloud.bigquery.BigQueryOptions;\n+import com.google.cloud.bigquery.Job;\n+import com.google.cloud.bigquery.JobId;\n+import com.google.cloud.bigquery.JobInfo;\n+import com.google.cloud.bigquery.JobInfo.SchemaUpdateOption;\n+import com.google.cloud.bigquery.JobInfo.WriteDisposition;\n+import com.google.cloud.bigquery.QueryJobConfiguration;\n+import com.google.cloud.bigquery.TableId;\n+import com.google.cloud.bigquery.TableResult;\n+import com.google.common.collect.ImmutableList;\n+import java.util.UUID;\n+\n+public class RelaxTableQuery {\n+\n+  public static void runRelaxTableQuery() throws Exception {\n+    // TODO(developer): Replace these variables before running the sample.\n+    String projectId = \"MY_PROJECT_ID\";\n+    String datasetName = \"MY_DATASET_NAME\";\n+    String tableName = \"MY_TABLE_NAME\";\n+    relaxTableQuery(projectId, datasetName, tableName);\n+  }\n+\n+  // To relax all columns in a destination table when you append data to it during a query job\n+  public static void relaxTableQuery(String projectId, String datasetName, String tableName)\n+      throws Exception {\n+    try {\n+      // Initialize client that will be used to send requests. This client only needs to be created\n+      // once, and can be reused for multiple requests.\n+      BigQuery bigquery = BigQueryOptions.getDefaultInstance().getService();\n+\n+      TableId tableId = TableId.of(datasetName, tableName);\n+\n+      String sourceTable = \"`\" + projectId + \".\" + datasetName + \".\" + tableName + \"`\";\n+      String query =\n+          \"SELECT \" + \"word\\n\" + \"FROM \" + sourceTable + \"\\n\" + \"WHERE word like '%is%' \";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8fcb76dbf657633288ae0725d2320d5dfedb7276"}, "originalPosition": 56}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTM2ODU4Ng==", "bodyText": "This looks out of place - What does this mean?  Where is the retry happening? Is the jobId required - if so, would it be better to set a specific one?", "url": "https://github.com/googleapis/java-bigquery/pull/124#discussion_r371368586", "createdAt": "2020-01-27T17:10:18Z", "author": {"login": "kurtisvg"}, "path": "samples/src/main/java/com/example/bigquery/RelaxTableQuery.java", "diffHunk": "@@ -0,0 +1,100 @@\n+/*\n+ * Copyright 2020 Google LLC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.example.bigquery;\n+\n+// [START bigquery_relax_column_query_append]\n+import com.google.cloud.bigquery.BigQuery;\n+import com.google.cloud.bigquery.BigQueryException;\n+import com.google.cloud.bigquery.BigQueryOptions;\n+import com.google.cloud.bigquery.Job;\n+import com.google.cloud.bigquery.JobId;\n+import com.google.cloud.bigquery.JobInfo;\n+import com.google.cloud.bigquery.JobInfo.SchemaUpdateOption;\n+import com.google.cloud.bigquery.JobInfo.WriteDisposition;\n+import com.google.cloud.bigquery.QueryJobConfiguration;\n+import com.google.cloud.bigquery.TableId;\n+import com.google.cloud.bigquery.TableResult;\n+import com.google.common.collect.ImmutableList;\n+import java.util.UUID;\n+\n+public class RelaxTableQuery {\n+\n+  public static void runRelaxTableQuery() throws Exception {\n+    // TODO(developer): Replace these variables before running the sample.\n+    String projectId = \"MY_PROJECT_ID\";\n+    String datasetName = \"MY_DATASET_NAME\";\n+    String tableName = \"MY_TABLE_NAME\";\n+    relaxTableQuery(projectId, datasetName, tableName);\n+  }\n+\n+  // To relax all columns in a destination table when you append data to it during a query job\n+  public static void relaxTableQuery(String projectId, String datasetName, String tableName)\n+      throws Exception {\n+    try {\n+      // Initialize client that will be used to send requests. This client only needs to be created\n+      // once, and can be reused for multiple requests.\n+      BigQuery bigquery = BigQueryOptions.getDefaultInstance().getService();\n+\n+      TableId tableId = TableId.of(datasetName, tableName);\n+\n+      String sourceTable = \"`\" + projectId + \".\" + datasetName + \".\" + tableName + \"`\";\n+      String query =\n+          \"SELECT \" + \"word\\n\" + \"FROM \" + sourceTable + \"\\n\" + \"WHERE word like '%is%' \";\n+\n+      QueryJobConfiguration queryConfig =\n+          QueryJobConfiguration.newBuilder(query)\n+              // Use standard SQL syntax for queries.\n+              // See: https://cloud.google.com/bigquery/sql-reference/\n+              .setUseLegacySql(false)\n+              .setSchemaUpdateOptions(ImmutableList.of(SchemaUpdateOption.ALLOW_FIELD_RELAXATION))\n+              .setWriteDisposition(WriteDisposition.WRITE_APPEND)\n+              .setDestinationTable(tableId)\n+              .build();\n+\n+      // Create a job ID so that we can safely retry.\n+      JobId jobId = JobId.of(UUID.randomUUID().toString());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8fcb76dbf657633288ae0725d2320d5dfedb7276"}, "originalPosition": 69}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "27eec9e17771c45146a40f010b00348abf805b24", "author": {"user": {"login": "stephaniewang526", "name": "Stephanie Wang"}}, "url": "https://github.com/googleapis/java-bigquery/commit/27eec9e17771c45146a40f010b00348abf805b24", "committedDate": "2020-01-27T19:55:47Z", "message": "Merge branch 'master' into get-model\n\n# Conflicts:\n#\tsamples/src/main/java/com/example/bigquery/RelaxTableQuery.java\n#\tsamples/src/test/java/com/example/bigquery/RelaxTableQueryIT.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "181635c72743ab9dc503b9e65b5c79d91e8309a7", "author": {"user": {"login": "stephaniewang526", "name": "Stephanie Wang"}}, "url": "https://github.com/googleapis/java-bigquery/commit/181635c72743ab9dc503b9e65b5c79d91e8309a7", "committedDate": "2020-01-27T20:08:39Z", "message": "fix build error"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4OTUzMDQ4", "url": "https://github.com/googleapis/java-bigquery/pull/124#pullrequestreview-348953048", "createdAt": "2020-01-27T20:28:34Z", "commit": {"oid": "181635c72743ab9dc503b9e65b5c79d91e8309a7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1289, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}