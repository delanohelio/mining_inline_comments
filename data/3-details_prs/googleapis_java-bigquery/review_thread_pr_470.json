{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM3MDIyNDYw", "number": 470, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQxMzoyNzowMFrOEHHZqQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQxNToyMToxM1rOEHJxNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc1ODk2NzQ1OnYy", "diffSide": "RIGHT", "path": "samples/snippets/src/main/java/com/example/bigquery/CreateJob.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQxMzoyNzowMFrOGmUyMw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQxMzoyNzowMFrOGmUyMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjgzOTYwMw==", "bodyText": "please add description here", "url": "https://github.com/googleapis/java-bigquery/pull/470#discussion_r442839603", "createdAt": "2020-06-19T13:27:00Z", "author": {"login": "stephaniewang526"}, "path": "samples/snippets/src/main/java/com/example/bigquery/CreateJob.java", "diffHunk": "@@ -0,0 +1,70 @@\n+/*\n+ * Copyright 2020 Google LLC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.example.bigquery;\n+\n+// [START bigquery_create_job]\n+import com.google.cloud.bigquery.BigQuery;\n+import com.google.cloud.bigquery.BigQueryException;\n+import com.google.cloud.bigquery.BigQueryOptions;\n+import com.google.cloud.bigquery.Job;\n+import com.google.cloud.bigquery.JobId;\n+import com.google.cloud.bigquery.JobInfo;\n+import com.google.cloud.bigquery.QueryJobConfiguration;\n+import com.google.common.collect.ImmutableMap;\n+import java.util.UUID;\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "561bf382ce1d62044022553b7dc29070c2d07114"}, "originalPosition": 29}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc1ODk2OTk0OnYy", "diffSide": "RIGHT", "path": "samples/snippets/src/main/java/com/example/bigquery/CreateJob.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQxMzoyNzo0MlrOGmUzuQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQxMzoyNzo0MlrOGmUzuQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjgzOTk5Mw==", "bodyText": "i think we can just use the raw string like you commented out here so we don't have to create all these projectId, datasetName, tableName local vars", "url": "https://github.com/googleapis/java-bigquery/pull/470#discussion_r442839993", "createdAt": "2020-06-19T13:27:42Z", "author": {"login": "stephaniewang526"}, "path": "samples/snippets/src/main/java/com/example/bigquery/CreateJob.java", "diffHunk": "@@ -0,0 +1,70 @@\n+/*\n+ * Copyright 2020 Google LLC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.example.bigquery;\n+\n+// [START bigquery_create_job]\n+import com.google.cloud.bigquery.BigQuery;\n+import com.google.cloud.bigquery.BigQueryException;\n+import com.google.cloud.bigquery.BigQueryOptions;\n+import com.google.cloud.bigquery.Job;\n+import com.google.cloud.bigquery.JobId;\n+import com.google.cloud.bigquery.JobInfo;\n+import com.google.cloud.bigquery.QueryJobConfiguration;\n+import com.google.common.collect.ImmutableMap;\n+import java.util.UUID;\n+\n+public class CreateJob {\n+\n+  public static void runCreateJob() {\n+    // TODO(developer): Replace these variables before running the sample.\n+    String projectId = \"MY_PROJECT_ID\";\n+    String datasetName = \"MY_DATASET_NAME\";\n+    String tableName = \"MY_TABLE_NAME\";\n+    // i.e. SELECT country_name from `bigquery-public-data.utility_us.country_code_iso`\n+    String query =\n+        \"SELECT country_name from `\" + projectId + \".\" + datasetName + \".\" + tableName + \"`\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "561bf382ce1d62044022553b7dc29070c2d07114"}, "originalPosition": 39}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc1ODk3ODU4OnYy", "diffSide": "RIGHT", "path": "samples/snippets/src/main/java/com/example/bigquery/CreateJob.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQxMzozMDozMFrOGmU5aw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQxMzozMDozMFrOGmU5aw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mjg0MTQ1MQ==", "bodyText": "could you follow the job format similar to here \n  \n    \n      java-bigquery/samples/snippets/src/main/java/com/example/bigquery/LoadLocalFile.java\n    \n    \n         Line 70\n      in\n      0ffbac3\n    \n    \n    \n    \n\n        \n          \n           Job job = bigquery.getJob(jobId); \n        \n    \n  \n\n?", "url": "https://github.com/googleapis/java-bigquery/pull/470#discussion_r442841451", "createdAt": "2020-06-19T13:30:30Z", "author": {"login": "stephaniewang526"}, "path": "samples/snippets/src/main/java/com/example/bigquery/CreateJob.java", "diffHunk": "@@ -0,0 +1,70 @@\n+/*\n+ * Copyright 2020 Google LLC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.example.bigquery;\n+\n+// [START bigquery_create_job]\n+import com.google.cloud.bigquery.BigQuery;\n+import com.google.cloud.bigquery.BigQueryException;\n+import com.google.cloud.bigquery.BigQueryOptions;\n+import com.google.cloud.bigquery.Job;\n+import com.google.cloud.bigquery.JobId;\n+import com.google.cloud.bigquery.JobInfo;\n+import com.google.cloud.bigquery.QueryJobConfiguration;\n+import com.google.common.collect.ImmutableMap;\n+import java.util.UUID;\n+\n+public class CreateJob {\n+\n+  public static void runCreateJob() {\n+    // TODO(developer): Replace these variables before running the sample.\n+    String projectId = \"MY_PROJECT_ID\";\n+    String datasetName = \"MY_DATASET_NAME\";\n+    String tableName = \"MY_TABLE_NAME\";\n+    // i.e. SELECT country_name from `bigquery-public-data.utility_us.country_code_iso`\n+    String query =\n+        \"SELECT country_name from `\" + projectId + \".\" + datasetName + \".\" + tableName + \"`\";\n+    createJob(query);\n+  }\n+\n+  public static void createJob(String query) {\n+    try {\n+      // Initialize client that will be used to send requests. This client only needs to be created\n+      // once, and can be reused for multiple requests.\n+      BigQuery bigquery = BigQueryOptions.getDefaultInstance().getService();\n+\n+      // Specify a job configuration to set optional job resource properties.\n+      QueryJobConfiguration queryConfig =\n+          QueryJobConfiguration.newBuilder(query)\n+              .setLabels(ImmutableMap.of(\"example-label\", \"example-value\"))\n+              .build();\n+\n+      // The client libraries automatically generate a job ID.\n+      // Override the generated ID with either the job_id_prefix or job_id parameters.\n+      String jobId = \"code_sample_\" + UUID.randomUUID().toString().substring(0, 8);\n+      Job job = bigquery.create(JobInfo.of(JobId.of(jobId), queryConfig));\n+      job = job.waitFor();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "561bf382ce1d62044022553b7dc29070c2d07114"}, "originalPosition": 59}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc1OTM1NTQwOnYy", "diffSide": "RIGHT", "path": "samples/snippets/src/main/java/com/example/bigquery/CreateJob.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQxNToyMToxM1rOGmYk5A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQxNToyMToxM1rOGmYk5A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjkwMTczMg==", "bodyText": "i believe jobId is optional right? we don't need to create our own. So I think we can link user to the documentation that explains this.", "url": "https://github.com/googleapis/java-bigquery/pull/470#discussion_r442901732", "createdAt": "2020-06-19T15:21:13Z", "author": {"login": "stephaniewang526"}, "path": "samples/snippets/src/main/java/com/example/bigquery/CreateJob.java", "diffHunk": "@@ -52,17 +48,21 @@ public static void createJob(String query) {\n               .setLabels(ImmutableMap.of(\"example-label\", \"example-value\"))\n               .build();\n \n-      // The client libraries automatically generate a job ID.\n-      // Override the generated ID with either the job_id_prefix or job_id parameters.\n-      String jobId = \"code_sample_\" + UUID.randomUUID().toString().substring(0, 8);\n-      Job job = bigquery.create(JobInfo.of(JobId.of(jobId), queryConfig));\n-      job = job.waitFor();\n-      if (job.isDone()) {\n+      // The location and JobName must be specified; other fields can be auto-detected.\n+      String jobName = \"jobId_\" + UUID.randomUUID().toString();\n+      JobId jobId = JobId.newBuilder().setLocation(\"us\").setJob(jobName).build();\n+\n+      // Create a job with job ID\n+      bigquery.create(JobInfo.of(jobId, queryConfig));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0ed2c5b4d4a72350281133974f4417d761c672ca"}, "originalPosition": 34}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3476, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}