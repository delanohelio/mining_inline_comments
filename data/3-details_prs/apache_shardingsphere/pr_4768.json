{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg4NzI5NDA1", "number": 4768, "title": "add sql state and vendor code for this", "bodyText": "Fixes #4654", "createdAt": "2020-03-15T14:49:17Z", "url": "https://github.com/apache/shardingsphere/pull/4768", "merged": true, "mergeCommit": {"oid": "208b8192ebff30828602adcbccdca203e94cf84c"}, "closed": true, "closedAt": "2020-03-17T03:19:21Z", "author": {"login": "zjcnb"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcN6o0zgH2gAyMzg4NzI5NDA1OjRkZDdkYWU5NzAxM2Y5ODIyZTgzNGNmNjI4NTAzNmZkYTcyNzIyNDU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcOaAaKAFqTM3NTcxNTQ4Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "4dd7dae97013f9822e834cf6285036fda7272245", "author": {"user": null}, "url": "https://github.com/apache/shardingsphere/commit/4dd7dae97013f9822e834cf6285036fda7272245", "committedDate": "2020-03-15T14:46:11Z", "message": "add sql state and vendor code for this"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc0ODEzMjk1", "url": "https://github.com/apache/shardingsphere/pull/4768#pullrequestreview-374813295", "createdAt": "2020-03-15T16:22:10Z", "commit": {"oid": "4dd7dae97013f9822e834cf6285036fda7272245"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNVQxNjoyMjoxMFrOF2f2wg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNVQxNjoyMjoyOFrOF2f22g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjY4OTM0Ng==", "bodyText": "SQL_STATE is a common name, but the value is S1002, it is not a good variable name.", "url": "https://github.com/apache/shardingsphere/pull/4768#discussion_r392689346", "createdAt": "2020-03-15T16:22:10Z", "author": {"login": "terrymanu"}, "path": "sharding-jdbc/sharding-jdbc-core/src/main/java/org/apache/shardingsphere/shardingjdbc/jdbc/core/constant/SQLExceptionConstant.java", "diffHunk": "@@ -27,4 +27,8 @@\n public final class SQLExceptionConstant {\n     \n     public static final String SQL_STRING_NULL_OR_EMPTY = \"SQL String can not be NULL or empty.\";\n+    \n+    public static final String SQL_STATE = \"S1002\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4dd7dae97013f9822e834cf6285036fda7272245"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjY4OTM3MA==", "bodyText": "Same with SQL_STATE", "url": "https://github.com/apache/shardingsphere/pull/4768#discussion_r392689370", "createdAt": "2020-03-15T16:22:28Z", "author": {"login": "terrymanu"}, "path": "sharding-jdbc/sharding-jdbc-core/src/main/java/org/apache/shardingsphere/shardingjdbc/jdbc/core/constant/SQLExceptionConstant.java", "diffHunk": "@@ -27,4 +27,8 @@\n public final class SQLExceptionConstant {\n     \n     public static final String SQL_STRING_NULL_OR_EMPTY = \"SQL String can not be NULL or empty.\";\n+    \n+    public static final String SQL_STATE = \"S1002\";\n+    \n+    public static final int SQL_VENDOR_CODE = 0;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4dd7dae97013f9822e834cf6285036fda7272245"}, "originalPosition": 7}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6baba6fef3f2f0c9e0751bcd90be4a0afff7e941", "author": {"user": null}, "url": "https://github.com/apache/shardingsphere/commit/6baba6fef3f2f0c9e0751bcd90be4a0afff7e941", "committedDate": "2020-03-16T07:09:32Z", "message": "modify the variable name."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d38c8261a9e55a0b0753ccbae1e182d7a2f460b3", "author": {"user": null}, "url": "https://github.com/apache/shardingsphere/commit/d38c8261a9e55a0b0753ccbae1e182d7a2f460b3", "committedDate": "2020-03-16T07:10:11Z", "message": "Merge https://github.com/apache/incubator-shardingsphere into sql_state"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5f5a60a3da704c710b5fd63d2c2baa0d78d6a665", "author": {"user": null}, "url": "https://github.com/apache/shardingsphere/commit/5f5a60a3da704c710b5fd63d2c2baa0d78d6a665", "committedDate": "2020-03-16T08:33:32Z", "message": "update vendor code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "71a13292082cb90ea550f4030b95629b84246eee", "author": {"user": null}, "url": "https://github.com/apache/shardingsphere/commit/71a13292082cb90ea550f4030b95629b84246eee", "committedDate": "2020-03-16T08:40:18Z", "message": "Merge https://github.com/apache/incubator-shardingsphere into sql_state"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc1MjYwMTg5", "url": "https://github.com/apache/shardingsphere/pull/4768#pullrequestreview-375260189", "createdAt": "2020-03-16T14:17:20Z", "commit": {"oid": "71a13292082cb90ea550f4030b95629b84246eee"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQxNDoxNzoyMFrOF22MdQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQxNDoxODowM1rOF22PVA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzA1NTM0OQ==", "bodyText": "Please do not use abbreviation as variable name", "url": "https://github.com/apache/shardingsphere/pull/4768#discussion_r393055349", "createdAt": "2020-03-16T14:17:20Z", "author": {"login": "terrymanu"}, "path": "sharding-jdbc/sharding-jdbc-core/src/main/java/org/apache/shardingsphere/shardingjdbc/jdbc/core/constant/SQLExceptionConstant.java", "diffHunk": "@@ -27,4 +27,6 @@\n public final class SQLExceptionConstant {\n     \n     public static final String SQL_STRING_NULL_OR_EMPTY = \"SQL String can not be NULL or empty.\";\n+    \n+    public static final String OUT_OF_INDEX_SQL_STAT = \"S1002\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "71a13292082cb90ea550f4030b95629b84246eee"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzA1NjA4NA==", "bodyText": "Maybe we need to check string information \"Out of index of projection %s\" too", "url": "https://github.com/apache/shardingsphere/pull/4768#discussion_r393056084", "createdAt": "2020-03-16T14:18:03Z", "author": {"login": "terrymanu"}, "path": "sharding-jdbc/sharding-jdbc-core/src/main/java/org/apache/shardingsphere/shardingjdbc/jdbc/core/resultset/EncryptResultSetMetaData.java", "diffHunk": "@@ -89,8 +90,7 @@ public String getColumnName(final int column) throws SQLException {\n         if (sqlStatementContext instanceof SelectStatementContext) {\n             List<Projection> actualProjections = ((SelectStatementContext) sqlStatementContext).getProjectionsContext().getExpandProjections();\n             if (column > actualProjections.size()) {\n-                // TODO fill correct SQL state\n-                throw new SQLException(String.format(\"Out of index of projection %s\", column));\n+                throw new SQLException(String.format(\"Out of index of projection %s\", column), SQLExceptionConstant.OUT_OF_INDEX_SQL_STAT, 0);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "71a13292082cb90ea550f4030b95629b84246eee"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c56d4446724c684cb6a847a2596f6dc55a7fe143", "author": {"user": null}, "url": "https://github.com/apache/shardingsphere/commit/c56d4446724c684cb6a847a2596f6dc55a7fe143", "committedDate": "2020-03-16T15:48:05Z", "message": "modify the variable name and check reason"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cc7e5694353a92b70544bd7a725e20b35110827b", "author": {"user": null}, "url": "https://github.com/apache/shardingsphere/commit/cc7e5694353a92b70544bd7a725e20b35110827b", "committedDate": "2020-03-16T15:49:45Z", "message": "Merge https://github.com/apache/incubator-shardingsphere into sql_state"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc1NzE1NDg3", "url": "https://github.com/apache/shardingsphere/pull/4768#pullrequestreview-375715487", "createdAt": "2020-03-17T03:19:00Z", "commit": {"oid": "cc7e5694353a92b70544bd7a725e20b35110827b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3855, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}