{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDUwMDEwNjY3", "number": 6366, "title": "fix oracle bug which will occur when a database has multi users", "bodyText": "fix oracle bug which will occur when a database has multi users\nFixes #6362.   #6251\nChanges proposed in this pull request:\norg.apache.shardingsphere.sql.parser.binder.metadata.util.JdbcUtil\nchange from\nif (\"Oracle\".equals(databaseType)) { return null; }\nto\nif (\"Oracle\".equals(databaseType)) { return connection.getMetaData().getUserName().toUpperCase(); }", "createdAt": "2020-07-16T08:37:01Z", "url": "https://github.com/apache/shardingsphere/pull/6366", "merged": true, "mergeCommit": {"oid": "198fed53ee24f46aab3ad72bbe9e9bad005f3f3f"}, "closed": true, "closedAt": "2020-07-20T10:18:11Z", "author": {"login": "feiweihy"}, "timelineItems": {"totalCount": 33, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc1bC4RgH2gAyNDUwMDEwNjY3OjJiMTFlMDBiZmUyZTg2NDZkNGFhYTk0ZGM0MzhmYzg0OGZhMzBlYWM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc2u61GgFqTQ1MTQ3ODIyNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2b11e00bfe2e8646d4aaa94dc438fc848fa30eac", "author": {"user": {"login": "feiweihy", "name": null}}, "url": "https://github.com/apache/shardingsphere/commit/2b11e00bfe2e8646d4aaa94dc438fc848fa30eac", "committedDate": "2020-07-16T08:34:39Z", "message": "Update JdbcUtil.java\n\nfix oracle bug which will occur when a database has multi users"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bb8419e7fd8464575011afa778e19b922d4a3b29", "author": {"user": {"login": "feiweihy", "name": null}}, "url": "https://github.com/apache/shardingsphere/commit/bb8419e7fd8464575011afa778e19b922d4a3b29", "committedDate": "2020-07-16T10:34:14Z", "message": "Create SchemaMetaDataLoaderTest.java\n\nunittest for \"fix oracle bug which will occur when a database has multi users\""}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7e69ad8d734c46de79e7448cdda021ed751cc5e0", "author": {"user": {"login": "feiweihy", "name": null}}, "url": "https://github.com/apache/shardingsphere/commit/7e69ad8d734c46de79e7448cdda021ed751cc5e0", "committedDate": "2020-07-16T10:37:02Z", "message": "Update SchemaMetaDataLoaderTest.java"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwMzM1OTI0", "url": "https://github.com/apache/shardingsphere/pull/6366#pullrequestreview-450335924", "createdAt": "2020-07-17T02:33:46Z", "commit": {"oid": "7e69ad8d734c46de79e7448cdda021ed751cc5e0"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QwMjozMzo0NlrOGzDT4w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QwMjozMzo0NlrOGzDT4w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjE4NDgwMw==", "bodyText": "Hi, sout is suggested to remove.", "url": "https://github.com/apache/shardingsphere/pull/6366#discussion_r456184803", "createdAt": "2020-07-17T02:33:46Z", "author": {"login": "tristaZero"}, "path": "shardingsphere-sql-parser/shardingsphere-sql-parser-binder/src/test/java/org/apache/shardingsphere/sql/parser/binder/metadata/table/SchemaMetaDataLoaderTest.java", "diffHunk": "@@ -0,0 +1,108 @@\n+package org.apache.shardingsphere.sql.parser.binder.metadata.table;\n+\n+import org.apache.shardingsphere.sql.parser.binder.metadata.schema.SchemaMetaDataLoader;\n+import org.junit.Test;\n+\n+import javax.sql.DataSource;\n+import java.io.PrintWriter;\n+import java.sql.Connection;\n+import java.sql.DriverManager;\n+import java.sql.SQLException;\n+import java.sql.SQLFeatureNotSupportedException;\n+import java.util.LinkedList;\n+import java.util.logging.Logger;\n+\n+public final class SchemaMetaDataLoaderTest {\n+    private static int minIdleCount = 3;\n+    private static int maxIdleCount = 10;\n+    private static int currentIdleCount = 0;\n+    private static final LinkedList<Connection> connectionsPool = new LinkedList<Connection>();\n+\n+    @Test\n+    public void assertloadAllTableNamesForOracle() throws SQLException {\n+        System.out.println(\"Start...\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7e69ad8d734c46de79e7448cdda021ed751cc5e0"}, "originalPosition": 23}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "201d6145511404a416263333b2642da03fc4b6f4", "author": {"user": {"login": "feiweihy", "name": null}}, "url": "https://github.com/apache/shardingsphere/commit/201d6145511404a416263333b2642da03fc4b6f4", "committedDate": "2020-07-17T02:36:12Z", "message": "Update SchemaMetaDataLoaderTest.java\n\nremove sout"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwMzQwOTEz", "url": "https://github.com/apache/shardingsphere/pull/6366#pullrequestreview-450340913", "createdAt": "2020-07-17T02:52:34Z", "commit": {"oid": "7e69ad8d734c46de79e7448cdda021ed751cc5e0"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QwMjo1MjozNVrOGzDmhg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QwMzowNDo0N1rOGzDx-A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjE4OTU3NA==", "bodyText": "Hi ``\nMaybe we can consider something like the following statement. I mean, we had better avoid the comparison of the absolute characters, like \"Oracle\".\n\nconnection.getMetaData().getDatabaseProductName().equals(databaseType).\n\nIt is not hard, could you give it a change?", "url": "https://github.com/apache/shardingsphere/pull/6366#discussion_r456189574", "createdAt": "2020-07-17T02:52:35Z", "author": {"login": "tristaZero"}, "path": "shardingsphere-sql-parser/shardingsphere-sql-parser-binder/src/main/java/org/apache/shardingsphere/sql/parser/binder/metadata/util/JdbcUtil.java", "diffHunk": "@@ -36,7 +36,7 @@ public static String getSchema(final Connection connection, final String databas\n         String result = null;\n         try {\n             if (\"Oracle\".equals(databaseType)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7e69ad8d734c46de79e7448cdda021ed751cc5e0"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjE5MjUwNA==", "bodyText": "Hi, Please firstly look at the travis-ci test, which showed there is something wrong with your PR. I presume it is about check style here.\nBesides, I hope there is no Oracle database instance required for your unit test. Otherwise, It is supposed to be removed.\nI know those comments may frustrate you somehow, but what you did is entirely open to the whole community. I believe you also want to be a significant part of this community as well, don't you?\nIf you need any help, please contact me.  :-)\nBest,\nTrista\nI am sorry", "url": "https://github.com/apache/shardingsphere/pull/6366#discussion_r456192504", "createdAt": "2020-07-17T03:04:47Z", "author": {"login": "tristaZero"}, "path": "shardingsphere-sql-parser/shardingsphere-sql-parser-binder/src/test/java/org/apache/shardingsphere/sql/parser/binder/metadata/table/SchemaMetaDataLoaderTest.java", "diffHunk": "@@ -0,0 +1,108 @@\n+package org.apache.shardingsphere.sql.parser.binder.metadata.table;\n+\n+import org.apache.shardingsphere.sql.parser.binder.metadata.schema.SchemaMetaDataLoader;\n+import org.junit.Test;\n+\n+import javax.sql.DataSource;\n+import java.io.PrintWriter;\n+import java.sql.Connection;\n+import java.sql.DriverManager;\n+import java.sql.SQLException;\n+import java.sql.SQLFeatureNotSupportedException;\n+import java.util.LinkedList;\n+import java.util.logging.Logger;\n+\n+public final class SchemaMetaDataLoaderTest {\n+    private static int minIdleCount = 3;\n+    private static int maxIdleCount = 10;\n+    private static int currentIdleCount = 0;\n+    private static final LinkedList<Connection> connectionsPool = new LinkedList<Connection>();\n+\n+    @Test\n+    public void assertloadAllTableNamesForOracle() throws SQLException {\n+        System.out.println(\"Start...\");\n+        LiteDatasource dataSource = new LiteDatasource();\n+        SchemaMetaDataLoader.load(dataSource,5,\"Oracle\");\n+    }\n+\n+    class LiteDatasource implements DataSource{\n+        private String url = \"jdbc:oracle:thin:@192.168.1.1:1521/orcl\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7e69ad8d734c46de79e7448cdda021ed751cc5e0"}, "originalPosition": 29}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwMzU2NTYw", "url": "https://github.com/apache/shardingsphere/pull/6366#pullrequestreview-450356560", "createdAt": "2020-07-17T03:55:25Z", "commit": {"oid": "201d6145511404a416263333b2642da03fc4b6f4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QwMzo1NToyNVrOGzEfrA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QwMzo1NToyNVrOGzEfrA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjIwNDIwNA==", "bodyText": "What is the  jdbc driver ?", "url": "https://github.com/apache/shardingsphere/pull/6366#discussion_r456204204", "createdAt": "2020-07-17T03:55:25Z", "author": {"login": "yu199195"}, "path": "shardingsphere-sql-parser/shardingsphere-sql-parser-binder/src/test/java/org/apache/shardingsphere/sql/parser/binder/metadata/table/SchemaMetaDataLoaderTest.java", "diffHunk": "@@ -0,0 +1,107 @@\n+package org.apache.shardingsphere.sql.parser.binder.metadata.table;\n+\n+import org.apache.shardingsphere.sql.parser.binder.metadata.schema.SchemaMetaDataLoader;\n+import org.junit.Test;\n+\n+import javax.sql.DataSource;\n+import java.io.PrintWriter;\n+import java.sql.Connection;\n+import java.sql.DriverManager;\n+import java.sql.SQLException;\n+import java.sql.SQLFeatureNotSupportedException;\n+import java.util.LinkedList;\n+import java.util.logging.Logger;\n+\n+public final class SchemaMetaDataLoaderTest {\n+    private static int minIdleCount = 3;\n+    private static int maxIdleCount = 10;\n+    private static int currentIdleCount = 0;\n+    private static final LinkedList<Connection> connectionsPool = new LinkedList<Connection>();\n+\n+    @Test\n+    public void assertloadAllTableNamesForOracle() throws SQLException {\n+        LiteDatasource dataSource = new LiteDatasource();\n+        SchemaMetaDataLoader.load(dataSource,5,\"Oracle\");\n+    }\n+\n+    class LiteDatasource implements DataSource{\n+        private String url = \"jdbc:oracle:thin:@192.168.1.1:1521/orcl\";\n+        private String user = \"test\";\n+        private String password = \"111111\";\n+        public LiteDatasource(){\n+            try {\n+                for (int i = 0; i < SchemaMetaDataLoaderTest.maxIdleCount; i++) {\n+                    Class.forName(\"oracle.jdbc.OracleDriver\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "201d6145511404a416263333b2642da03fc4b6f4"}, "originalPosition": 34}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "84c0e4d4f62a0f9be20170c80630cd3d306a28a9", "author": {"user": {"login": "feiweihy", "name": null}}, "url": "https://github.com/apache/shardingsphere/commit/84c0e4d4f62a0f9be20170c80630cd3d306a28a9", "committedDate": "2020-07-18T11:39:34Z", "message": "Delete SchemaMetaDataLoaderTest.java\n\nci test can not pass for this unit test, remove it"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "776b36836b9d38ffd4c810f661bd6b32186acca9", "author": {"user": {"login": "feiweihy", "name": null}}, "url": "https://github.com/apache/shardingsphere/commit/776b36836b9d38ffd4c810f661bd6b32186acca9", "committedDate": "2020-07-20T02:04:06Z", "message": "Update JdbcUtil.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "21910b3fee42e259d27d1729ca0aed3e9282f657", "author": {"user": {"login": "feiweihy", "name": null}}, "url": "https://github.com/apache/shardingsphere/commit/21910b3fee42e259d27d1729ca0aed3e9282f657", "committedDate": "2020-07-20T02:05:51Z", "message": "Create SchemaMetaDataLoaderTest.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ee8f300f71a0b8a99bc845319883622af476bf6c", "author": {"user": {"login": "feiweihy", "name": null}}, "url": "https://github.com/apache/shardingsphere/commit/ee8f300f71a0b8a99bc845319883622af476bf6c", "committedDate": "2020-07-20T02:16:38Z", "message": "Update JdbcUtil.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7a72c6544f76224cbb347f4ebc82ca0c39ed9575", "author": {"user": {"login": "feiweihy", "name": null}}, "url": "https://github.com/apache/shardingsphere/commit/7a72c6544f76224cbb347f4ebc82ca0c39ed9575", "committedDate": "2020-07-20T02:22:05Z", "message": "Update JdbcUtil.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3714397c90000d1f1a1e93a6f64d97948816fa08", "author": {"user": {"login": "feiweihy", "name": null}}, "url": "https://github.com/apache/shardingsphere/commit/3714397c90000d1f1a1e93a6f64d97948816fa08", "committedDate": "2020-07-20T02:24:53Z", "message": "Update SchemaMetaDataLoaderTest.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a19d7987ef6bee8082b73fe77d2f58ba3a2d5f08", "author": {"user": {"login": "feiweihy", "name": null}}, "url": "https://github.com/apache/shardingsphere/commit/a19d7987ef6bee8082b73fe77d2f58ba3a2d5f08", "committedDate": "2020-07-20T02:39:13Z", "message": "Update SchemaMetaDataLoaderTest.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bb1195f4eae925db2c6bb360d637fcb42c363173", "author": {"user": {"login": "feiweihy", "name": null}}, "url": "https://github.com/apache/shardingsphere/commit/bb1195f4eae925db2c6bb360d637fcb42c363173", "committedDate": "2020-07-20T02:45:29Z", "message": "Update SchemaMetaDataLoaderTest.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9166f8ae2802a762547836a452a0f1f2b8fd86a4", "author": {"user": {"login": "feiweihy", "name": null}}, "url": "https://github.com/apache/shardingsphere/commit/9166f8ae2802a762547836a452a0f1f2b8fd86a4", "committedDate": "2020-07-20T02:49:15Z", "message": "Update SchemaMetaDataLoaderTest.java"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxMjY2NjM4", "url": "https://github.com/apache/shardingsphere/pull/6366#pullrequestreview-451266638", "createdAt": "2020-07-20T02:54:05Z", "commit": {"oid": "a19d7987ef6bee8082b73fe77d2f58ba3a2d5f08"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQwMjo1NDowNVrOGz1LEA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQwMjo1NDowNVrOGz1LEA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzAwMTc0NA==", "bodyText": "maybe \uff1a\n            if (null != metaData) {\n                return Optional.ofNullable(metaData.getUserName()).map(String::toUpperCase).orElse(null);\n            } else {\n                return null;\n            }", "url": "https://github.com/apache/shardingsphere/pull/6366#discussion_r457001744", "createdAt": "2020-07-20T02:54:05Z", "author": {"login": "yu199195"}, "path": "shardingsphere-sql-parser/shardingsphere-sql-parser-binder/src/main/java/org/apache/shardingsphere/sql/parser/binder/metadata/util/JdbcUtil.java", "diffHunk": "@@ -36,7 +37,12 @@ public static String getSchema(final Connection connection, final String databas\n         String result = null;\n         try {\n             if (\"Oracle\".equals(databaseType)) {\n-                return null;\n+                DatabaseMetaData metaData = connection.getMetaData();\n+                if (null != metaData) {\n+                    return metaData.getUserName() == null ? null : metaData.getUserName().toUpperCase();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a19d7987ef6bee8082b73fe77d2f58ba3a2d5f08"}, "originalPosition": 15}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f0b93df512adbc9d59683f08e7b196b204ed52aa", "author": {"user": {"login": "feiweihy", "name": null}}, "url": "https://github.com/apache/shardingsphere/commit/f0b93df512adbc9d59683f08e7b196b204ed52aa", "committedDate": "2020-07-20T03:03:20Z", "message": "Update SchemaMetaDataLoaderTest.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0237bd9b5361120d8ffe285d5439e484d046b9f8", "author": {"user": {"login": "feiweihy", "name": null}}, "url": "https://github.com/apache/shardingsphere/commit/0237bd9b5361120d8ffe285d5439e484d046b9f8", "committedDate": "2020-07-20T03:09:40Z", "message": "Update SchemaMetaDataLoaderTest.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "76059a5a4cb3f3ecf9c1192b16f6ad62b431da31", "author": {"user": {"login": "feiweihy", "name": null}}, "url": "https://github.com/apache/shardingsphere/commit/76059a5a4cb3f3ecf9c1192b16f6ad62b431da31", "committedDate": "2020-07-20T03:13:46Z", "message": "Update JdbcUtil.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "98ced7578b6b5ba97aac7e005241d4e762bb337b", "author": {"user": {"login": "feiweihy", "name": null}}, "url": "https://github.com/apache/shardingsphere/commit/98ced7578b6b5ba97aac7e005241d4e762bb337b", "committedDate": "2020-07-20T03:20:43Z", "message": "Update SchemaMetaDataLoaderTest.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3215aa57d44267557e374831d28c126109e9fe3a", "author": {"user": {"login": "feiweihy", "name": null}}, "url": "https://github.com/apache/shardingsphere/commit/3215aa57d44267557e374831d28c126109e9fe3a", "committedDate": "2020-07-20T03:22:46Z", "message": "Update SchemaMetaDataLoaderTest.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d987df84be78caaea5f45628b118be90580fcc51", "author": {"user": {"login": "feiweihy", "name": null}}, "url": "https://github.com/apache/shardingsphere/commit/d987df84be78caaea5f45628b118be90580fcc51", "committedDate": "2020-07-20T03:29:05Z", "message": "Update SchemaMetaDataLoaderTest.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7d727863ed1aac05f6330a22562a88717478159f", "author": {"user": {"login": "feiweihy", "name": null}}, "url": "https://github.com/apache/shardingsphere/commit/7d727863ed1aac05f6330a22562a88717478159f", "committedDate": "2020-07-20T03:30:52Z", "message": "Update SchemaMetaDataLoaderTest.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3a8867eb4c3828d859ac214b03d22bcf35993dac", "author": {"user": {"login": "feiweihy", "name": null}}, "url": "https://github.com/apache/shardingsphere/commit/3a8867eb4c3828d859ac214b03d22bcf35993dac", "committedDate": "2020-07-20T03:33:35Z", "message": "Update SchemaMetaDataLoaderTest.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d86125ca8abd43846fce59f5db5c3b6aed6e4dd3", "author": {"user": {"login": "feiweihy", "name": null}}, "url": "https://github.com/apache/shardingsphere/commit/d86125ca8abd43846fce59f5db5c3b6aed6e4dd3", "committedDate": "2020-07-20T03:36:02Z", "message": "Update JdbcUtil.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "174a5505fdcd4f2f953692231ad61ae58c6ed5d6", "author": {"user": {"login": "feiweihy", "name": null}}, "url": "https://github.com/apache/shardingsphere/commit/174a5505fdcd4f2f953692231ad61ae58c6ed5d6", "committedDate": "2020-07-20T04:02:41Z", "message": "Update SchemaMetaDataLoaderTest.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "de7d2a5afa19e7edd0ded520b092153eb5aa2be1", "author": {"user": {"login": "feiweihy", "name": null}}, "url": "https://github.com/apache/shardingsphere/commit/de7d2a5afa19e7edd0ded520b092153eb5aa2be1", "committedDate": "2020-07-20T04:13:06Z", "message": "Update SchemaMetaDataLoaderTest.java"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxMzE3NjY4", "url": "https://github.com/apache/shardingsphere/pull/6366#pullrequestreview-451317668", "createdAt": "2020-07-20T06:07:01Z", "commit": {"oid": "de7d2a5afa19e7edd0ded520b092153eb5aa2be1"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQwNjowNzowMVrOGz6GnQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQwNjowNzowMVrOGz6GnQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzA4MjUyNQ==", "bodyText": "Hi @feiweihy Now this PR looks great. Good job!\nHere is the last one to improve, please remove this redundant line.", "url": "https://github.com/apache/shardingsphere/pull/6366#discussion_r457082525", "createdAt": "2020-07-20T06:07:01Z", "author": {"login": "tristaZero"}, "path": "shardingsphere-sql-parser/shardingsphere-sql-parser-binder/src/test/java/org/apache/shardingsphere/sql/parser/binder/metadata/table/SchemaMetaDataLoaderTest.java", "diffHunk": "@@ -0,0 +1,70 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.apache.shardingsphere.sql.parser.binder.metadata.table;\n+\n+import org.apache.shardingsphere.sql.parser.binder.metadata.schema.SchemaMetaDataLoader;\n+import org.junit.Before;\n+import org.junit.Test;\n+import org.junit.runner.RunWith;\n+import org.mockito.Mock;\n+import org.mockito.junit.MockitoJUnitRunner;\n+\n+import javax.sql.DataSource;\n+import java.sql.Connection;\n+import java.sql.DatabaseMetaData;\n+import java.sql.ResultSet;\n+import java.sql.SQLException;\n+\n+import static org.mockito.Mockito.when;\n+\n+@RunWith(MockitoJUnitRunner.class)\n+public final class SchemaMetaDataLoaderTest {\n+    private static final String TEST_CATALOG = \"catalog\";\n+\n+    private static final String TABLE_TYPE = \"TABLE\";\n+\n+    private static final int MAX_CONNECTION_COUNT = 5;\n+\n+    private static final String DATABASE_TYPE_ORACLE = \"Oracle\";\n+\n+    @Mock\n+    private DataSource dataSource;\n+\n+    @Mock\n+    private Connection connection;\n+\n+    @Mock\n+    private DatabaseMetaData databaseMetaData;\n+\n+    @Mock\n+    private ResultSet tableExistResultSet;\n+\n+    @Before\n+    public void setUp() throws SQLException {\n+        when(dataSource.getConnection()).thenReturn(connection);\n+        when(connection.getCatalog()).thenReturn(TEST_CATALOG);\n+        when(connection.getMetaData()).thenReturn(databaseMetaData);\n+        when(databaseMetaData.getTables(TEST_CATALOG, null, null, new String[]{TABLE_TYPE})).thenReturn(tableExistResultSet);\n+    }\n+\n+    @Test\n+    public void assertLoadAllTableNamesForOracle() throws SQLException {\n+        SchemaMetaDataLoader.load(dataSource, MAX_CONNECTION_COUNT, DATABASE_TYPE_ORACLE);\n+    }\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "de7d2a5afa19e7edd0ded520b092153eb5aa2be1"}, "originalPosition": 69}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "21ee7c41da669e208ba72a5a2baa950006a3d2f0", "author": {"user": {"login": "feiweihy", "name": null}}, "url": "https://github.com/apache/shardingsphere/commit/21ee7c41da669e208ba72a5a2baa950006a3d2f0", "committedDate": "2020-07-20T06:15:15Z", "message": "Update SchemaMetaDataLoaderTest.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1f023a3cc63678da5b14561f5687a55bc2a9d01e", "author": {"user": {"login": "feiweihy", "name": null}}, "url": "https://github.com/apache/shardingsphere/commit/1f023a3cc63678da5b14561f5687a55bc2a9d01e", "committedDate": "2020-07-20T06:49:27Z", "message": "Update SchemaMetaDataLoaderTest.java"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxNDc3NTg3", "url": "https://github.com/apache/shardingsphere/pull/6366#pullrequestreview-451477587", "createdAt": "2020-07-20T10:16:51Z", "commit": {"oid": "1f023a3cc63678da5b14561f5687a55bc2a9d01e"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxNDc4MjI2", "url": "https://github.com/apache/shardingsphere/pull/6366#pullrequestreview-451478226", "createdAt": "2020-07-20T10:17:53Z", "commit": {"oid": "1f023a3cc63678da5b14561f5687a55bc2a9d01e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4844, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}