{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDUwNzQ1OTE5", "number": 6370, "title": "fix sql test ", "bodyText": "Changes proposed in this pull request:\n\nfix sql test case select_with_expression\nfix sql test case select_pagination_with_offset_fetch", "createdAt": "2020-07-17T04:04:31Z", "url": "https://github.com/apache/shardingsphere/pull/6370", "merged": true, "mergeCommit": {"oid": "417433e5ad89832ebb3744e9c8e34893fcc81987"}, "closed": true, "closedAt": "2020-07-23T06:03:43Z", "author": {"login": "jingshanglu"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc1rvFggH2gAyNDUwNzQ1OTE5OmVjYTk2MDM0MzQwMDU2Njc4YjcxOGIyYzY4M2QwNDYwYzJiNmY3NjQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc3pFHqgFqTQ1Mzg1MzUyMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "eca96034340056678b718b2c683d0460c2b6f764", "author": {"user": {"login": "jingshanglu", "name": "JingShang Lu"}}, "url": "https://github.com/apache/shardingsphere/commit/eca96034340056678b718b2c683d0460c2b6f764", "committedDate": "2020-07-17T04:01:25Z", "message": "fix sql test for select_with_expression and select_pagination_with_offset_fetch"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d10d8641a713e8a8a79ee035e256c355f95187fb", "author": {"user": {"login": "jingshanglu", "name": "JingShang Lu"}}, "url": "https://github.com/apache/shardingsphere/commit/d10d8641a713e8a8a79ee035e256c355f95187fb", "committedDate": "2020-07-17T06:09:32Z", "message": "fix"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxMDQ3OTUy", "url": "https://github.com/apache/shardingsphere/pull/6370#pullrequestreview-451047952", "createdAt": "2020-07-18T10:31:24Z", "commit": {"oid": "d10d8641a713e8a8a79ee035e256c355f95187fb"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xOFQxMDozMToyNFrOGznZDQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xOFQxMDozMToyNFrOGznZDQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njc3NTk0OQ==", "bodyText": "Do you think it is better to overwrite getStopIndex() of ExpressionProjectionSegment  with the stopIndex of itsaliasSegment,", "url": "https://github.com/apache/shardingsphere/pull/6370#discussion_r456775949", "createdAt": "2020-07-18T10:31:24Z", "author": {"login": "tristaZero"}, "path": "shardingsphere-sql-parser/shardingsphere-sql-parser-dialect/shardingsphere-sql-parser-mysql/src/main/java/org/apache/shardingsphere/sql/parser/mysql/visitor/impl/MySQLDMLVisitor.java", "diffHunk": "@@ -470,7 +470,8 @@ private ASTNode createProjection(final ProjectionContext ctx, final AliasSegment\n         }\n         if (projection instanceof CommonExpressionSegment) {\n             CommonExpressionSegment segment = (CommonExpressionSegment) projection;\n-            ExpressionProjectionSegment result = new ExpressionProjectionSegment(segment.getStartIndex(), segment.getStopIndex(), segment.getText());\n+            ExpressionProjectionSegment result = null == alias ? new ExpressionProjectionSegment(segment.getStartIndex(), segment.getStopIndex(), segment.getText())\n+                    : new ExpressionProjectionSegment(segment.getStartIndex(), alias.getStopIndex(), segment.getText());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d10d8641a713e8a8a79ee035e256c355f95187fb"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bd533d6fc9ce484568a64cd0e843788eb8344f3f", "author": {"user": {"login": "jingshanglu", "name": "JingShang Lu"}}, "url": "https://github.com/apache/shardingsphere/commit/bd533d6fc9ce484568a64cd0e843788eb8344f3f", "committedDate": "2020-07-22T02:24:42Z", "message": "fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fb34099c4700bc477a76f53a5df0684f5d812514", "author": {"user": {"login": "jingshanglu", "name": "JingShang Lu"}}, "url": "https://github.com/apache/shardingsphere/commit/fb34099c4700bc477a76f53a5df0684f5d812514", "committedDate": "2020-07-22T07:53:18Z", "message": "merge from upstream/master"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1ef2799710b8dbb67075e2e49c8878c937803b0f", "author": {"user": {"login": "jingshanglu", "name": "JingShang Lu"}}, "url": "https://github.com/apache/shardingsphere/commit/1ef2799710b8dbb67075e2e49c8878c937803b0f", "committedDate": "2020-07-22T08:17:42Z", "message": "fix"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUzMTQxNDUx", "url": "https://github.com/apache/shardingsphere/pull/6370#pullrequestreview-453141451", "createdAt": "2020-07-22T09:18:29Z", "commit": {"oid": "1ef2799710b8dbb67075e2e49c8878c937803b0f"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQwOToxODoyOVrOG1aDnw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQwOToxODoyOVrOG1aDnw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODY1NDYyMw==", "bodyText": "Do you think these codes can be removed?", "url": "https://github.com/apache/shardingsphere/pull/6370#discussion_r458654623", "createdAt": "2020-07-22T09:18:29Z", "author": {"login": "tristaZero"}, "path": "shardingsphere-sql-parser/shardingsphere-sql-parser-dialect/shardingsphere-sql-parser-postgresql/src/main/java/org/apache/shardingsphere/sql/parser/postgresql/visitor/PostgreSQLVisitor.java", "diffHunk": "@@ -262,14 +262,15 @@ private PredicateSegment createInSegment(final AExprContext ctx) {\n     \n     private Collection<ExpressionSegment> getExpressionSegments(final AExprContext ctx) {\n         Collection<ExpressionSegment> result = new LinkedList<>();\n-//        if (null != ctx.cExpr() && null != ctx.cExpr().select_with_parens()) {\n-//            Select_with_parensContext subquery = ctx.cExpr().select_with_parens();\n+//        TODO deal with sqlExpressions in PredicateInRightValue\n+//        if (null != ctx.cExpr() && null != ctx.cExpr().selectWithParens()) {\n+//            PostgreSQLStatementParser.SelectWithParensContext subquery = ctx.cExpr().selectWithParens();\n //            result.add(new SubqueryExpressionSegment(new SubquerySegment(subquery.getStart().getStartIndex(), subquery.getStop().getStopIndex(),\n-//                    (SelectStatement) visit(ctx.cExpr().select_with_parens()))));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ef2799710b8dbb67075e2e49c8878c937803b0f"}, "originalPosition": 10}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c98529fbc7cabcbfc0227b61fcf938101d9a5c90", "author": {"user": {"login": "jingshanglu", "name": "JingShang Lu"}}, "url": "https://github.com/apache/shardingsphere/commit/c98529fbc7cabcbfc0227b61fcf938101d9a5c90", "committedDate": "2020-07-22T10:19:33Z", "message": "simplify code"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUzODUzNTIw", "url": "https://github.com/apache/shardingsphere/pull/6370#pullrequestreview-453853520", "createdAt": "2020-07-23T06:03:37Z", "commit": {"oid": "c98529fbc7cabcbfc0227b61fcf938101d9a5c90"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4848, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}