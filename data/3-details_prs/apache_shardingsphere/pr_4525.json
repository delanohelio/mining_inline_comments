{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgxNzI0NTYw", "number": 4525, "title": "#4482 Correct the `DataTypeName` for PostgreSQL", "bodyText": "Fixes #4482.\nChanges proposed in this pull request:\n\nadd PostgreSQL dataType\n\nNote:\n\ndoublePrecision is support double precision . DATATYPE-FLOAT\nidentifier is support complex type ROWTYPES-DECLARING", "createdAt": "2020-02-29T03:58:24Z", "url": "https://github.com/apache/shardingsphere/pull/4525", "merged": true, "mergeCommit": {"oid": "f95a90bed5ced562e63db20d2036078f993c3a0e"}, "closed": true, "closedAt": "2020-03-01T05:57:31Z", "author": {"login": "yuzel"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcI8RacAH2gAyMzgxNzI0NTYwOjk1Nzc5ZDdjZmI2OTYyZGE5YWExNDM5ZmE5NTZmZGVkMzUzMDViOGI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcJSg_0AFqTM2NjgzNjcwMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "95779d7cfb6962da9aa1439fa956fded35305b8b", "author": {"user": null}, "url": "https://github.com/apache/shardingsphere/commit/95779d7cfb6962da9aa1439fa956fded35305b8b", "committedDate": "2020-02-29T03:50:48Z", "message": "#4482 Correct the `DataTypeName` for PostgreSQL"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "88f3a0c4beff6ad87cde300959e84fac9e4994b5", "author": {"user": null}, "url": "https://github.com/apache/shardingsphere/commit/88f3a0c4beff6ad87cde300959e84fac9e4994b5", "committedDate": "2020-02-29T04:38:47Z", "message": "merge master & resolve conflicts"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2Nzg5NzE0", "url": "https://github.com/apache/shardingsphere/pull/4525#pullrequestreview-366789714", "createdAt": "2020-02-29T10:07:35Z", "commit": {"oid": "88f3a0c4beff6ad87cde300959e84fac9e4994b5"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOVQxMDowNzozNVrOFwIohA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOVQxMDoyMDozMVrOFwIrQw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjAxNzQxMg==", "bodyText": "Here is a better way,\nif (null != doublePrecisionContext) {\n    return visit(ctx.doublePrecision());\n}\n\n@Override\npublic final ASTNode visitDoublePrecision(final DoublePrecisionContext ctx) {\n    return new KeywordValue(xxxx);\n}", "url": "https://github.com/apache/shardingsphere/pull/4525#discussion_r386017412", "createdAt": "2020-02-29T10:07:35Z", "author": {"login": "tristaZero"}, "path": "shardingsphere-sql-parser/shardingsphere-sql-parser-postgresql/src/main/java/org/apache/shardingsphere/sql/parser/visitor/PostgreSQLVisitor.java", "diffHunk": "@@ -460,6 +461,14 @@ public final ASTNode visitCaseExpression(final CaseExpressionContext ctx) {\n     \n     @Override\n     public final ASTNode visitDataTypeName(final DataTypeNameContext ctx) {\n+        DoublePrecisionContext doublePrecisionContext = ctx.doublePrecision();\n+        if (null != doublePrecisionContext) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "88f3a0c4beff6ad87cde300959e84fac9e4994b5"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjAxODExNQ==", "bodyText": "Why does doublePrecision not exist in PostgreSQLKeyword.g4 ?", "url": "https://github.com/apache/shardingsphere/pull/4525#discussion_r386018115", "createdAt": "2020-02-29T10:20:31Z", "author": {"login": "tristaZero"}, "path": "shardingsphere-sql-parser/shardingsphere-sql-parser-postgresql/src/main/antlr4/imports/postgresql/BaseRule.g4", "diffHunk": "@@ -303,7 +303,14 @@ dataType\n     ;\n \n dataTypeName\n-    : identifier\n+    : INT | SMALLINT | INTEGER | BIGINT | DECIMAL | NUMERIC | REAL | FLOAT | doublePrecision | SMALLSERIAL | SERIAL | BIGSERIAL\n+    | MONEY | VARCHAR | CHARACTER | CHAR | TEXT | NAME | BYTEA | TIMESTAMP | DATE | TIME | INTERVAL | BOOLEAN | ENUM | POINT\n+    | LINE | LSEG | BOX | PATH | POLYGON | CIRCLE | CIDR | INET | MACADDR | BIT | VARBIT | TSVECTOR | TSQUERY | UUID | XML\n+    | JSON | INTRANGE | NUMRANGE | TSRANGE | TSTZRANGE | DATERANGE | ARRAY | identifier\n+    ;\n+\n+doublePrecision", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "88f3a0c4beff6ad87cde300959e84fac9e4994b5"}, "originalPosition": 11}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8cab63415dd8ce8b424c59384b55172d4d4b37d7", "author": {"user": null}, "url": "https://github.com/apache/shardingsphere/commit/8cab63415dd8ce8b424c59384b55172d4d4b37d7", "committedDate": "2020-02-29T11:54:29Z", "message": "remove doublePrecision and add keyword DOUBLEPRECISION in PostgreSQLKeyword.g4"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2ODM2NzAx", "url": "https://github.com/apache/shardingsphere/pull/4525#pullrequestreview-366836701", "createdAt": "2020-03-01T05:45:44Z", "commit": {"oid": "8cab63415dd8ce8b424c59384b55172d4d4b37d7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3871, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}