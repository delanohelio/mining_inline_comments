{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAyNDU3MTU5", "number": 5158, "title": "delete predicateSegment from JoinSpecificationSegment", "bodyText": "ref #4885.\nChanges proposed in this pull request:\n\ndelete predicateSegment from JoinSpecificationSegment\nfix test case for Integration Test", "createdAt": "2020-04-13T03:44:22Z", "url": "https://github.com/apache/shardingsphere/pull/5158", "merged": true, "mergeCommit": {"oid": "04f2098ab39d35c3112e84e81337700abecdcea6"}, "closed": true, "closedAt": "2020-04-13T14:06:54Z", "author": {"login": "jingshanglu"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcXGfM1gH2gAyNDAyNDU3MTU5Ojg2NjI1NGExM2Q3ZDBiZTZkYTg0MTUzZDFmN2I5NTZjZjViYWQ4MDc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcXPc7lgFqTM5MjE2NTI5Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "866254a13d7d0be6da84153d1f7b956cf5bad807", "author": {"user": {"login": "jingshanglu", "name": "JingShang Lu"}}, "url": "https://github.com/apache/shardingsphere/commit/866254a13d7d0be6da84153d1f7b956cf5bad807", "committedDate": "2020-04-13T03:39:51Z", "message": "delete predicateSegment from JoinSpecificationSegment"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxOTY1NDQw", "url": "https://github.com/apache/shardingsphere/pull/5158#pullrequestreview-391965440", "createdAt": "2020-04-13T05:33:50Z", "commit": {"oid": "866254a13d7d0be6da84153d1f7b956cf5bad807"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xM1QwNTozMzo1MFrOGEdNYg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xM1QwNTozMzo1MFrOGEdNYg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzMyNjA1MA==", "bodyText": "Maybe you need a set to remove duplicated ones? Or do you have anyother solution?", "url": "https://github.com/apache/shardingsphere/pull/5158#discussion_r407326050", "createdAt": "2020-04-13T05:33:50Z", "author": {"login": "tristaZero"}, "path": "shardingsphere-sql-parser/shardingsphere-sql-parser-statement/src/main/java/org/apache/shardingsphere/sql/parser/sql/statement/dml/SelectStatement.java", "diffHunk": "@@ -107,9 +107,19 @@\n      */\n     public Collection<SimpleTableSegment> getSimpleTableSegments() {\n         Collection<SimpleTableSegment> result = new LinkedList<>();\n+        Collection<SimpleTableSegment> tmp = new LinkedList<>();\n         for (TableReferenceSegment each: tableReferences) {\n             result.addAll(each.getSimpleTableSegments());\n         }\n+        for (SimpleTableSegment each: result) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "866254a13d7d0be6da84153d1f7b956cf5bad807"}, "originalPosition": 8}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkyMDcwMjA3", "url": "https://github.com/apache/shardingsphere/pull/5158#pullrequestreview-392070207", "createdAt": "2020-04-13T10:24:48Z", "commit": {"oid": "866254a13d7d0be6da84153d1f7b956cf5bad807"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xM1QxMDoyNDo0OFrOGEiw0w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xM1QxMDoyNDo0OFrOGEiw0w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzQxNzA0Mw==", "bodyText": "Got, if you want to keep those codes, please\nRename tmp\nAdd blank space and rename each1 in for (SimpleTableSegment each1:result) \nOr Copy the deleted codes here since they have the same logic.\nprivate Collection<SimpleTableSegment> getTableSegments(final Collection<SimpleTableSegment> tableSegments, final JoinedTableContext joinedTable) {\n          Collection<SimpleTableSegment> result = new LinkedList<>();\n          for (SimpleTableSegment tableSegment : ((CollectionValue<SimpleTableSegment>) visit(joinedTable)).getValue()) {\n              if (isTable(tableSegment, tableSegments)) {\n                  result.add(tableSegment);\n              }\n          }\n          return result;\n      }\n \n      private boolean isTable(final SimpleTableSegment owner, final Collection<SimpleTableSegment> tableSegments) {\n          for (SimpleTableSegment each : tableSegments) {\n              if (owner.getTableName().getIdentifier().getValue().equals(each.getAlias().orElse(null))) {\n                  return false;\n             }\n         }\n         return true;\n     }", "url": "https://github.com/apache/shardingsphere/pull/5158#discussion_r407417043", "createdAt": "2020-04-13T10:24:48Z", "author": {"login": "tristaZero"}, "path": "shardingsphere-sql-parser/shardingsphere-sql-parser-statement/src/main/java/org/apache/shardingsphere/sql/parser/sql/statement/dml/SelectStatement.java", "diffHunk": "@@ -107,9 +107,19 @@\n      */\n     public Collection<SimpleTableSegment> getSimpleTableSegments() {\n         Collection<SimpleTableSegment> result = new LinkedList<>();\n+        Collection<SimpleTableSegment> tmp = new LinkedList<>();\n         for (TableReferenceSegment each: tableReferences) {\n             result.addAll(each.getSimpleTableSegments());\n         }\n+        for (SimpleTableSegment each: result) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzMyNjA1MA=="}, "originalCommit": {"oid": "866254a13d7d0be6da84153d1f7b956cf5bad807"}, "originalPosition": 8}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1b50e0fa9625a6282681ccebca812b418bd6b2e8", "author": {"user": {"login": "jingshanglu", "name": "JingShang Lu"}}, "url": "https://github.com/apache/shardingsphere/commit/1b50e0fa9625a6282681ccebca812b418bd6b2e8", "committedDate": "2020-04-13T11:05:04Z", "message": "fix"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkyMTAyMzQz", "url": "https://github.com/apache/shardingsphere/pull/5158#pullrequestreview-392102343", "createdAt": "2020-04-13T11:55:15Z", "commit": {"oid": "1b50e0fa9625a6282681ccebca812b418bd6b2e8"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xM1QxMTo1NToxNVrOGEkbHw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xM1QxMTo1NTozMVrOGEkbbw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzQ0NDI1NQ==", "bodyText": "TableReferenceSegment each : tableReferences", "url": "https://github.com/apache/shardingsphere/pull/5158#discussion_r407444255", "createdAt": "2020-04-13T11:55:15Z", "author": {"login": "tristaZero"}, "path": "shardingsphere-sql-parser/shardingsphere-sql-parser-statement/src/main/java/org/apache/shardingsphere/sql/parser/sql/statement/dml/SelectStatement.java", "diffHunk": "@@ -107,9 +107,25 @@\n      */\n     public Collection<SimpleTableSegment> getSimpleTableSegments() {\n         Collection<SimpleTableSegment> result = new LinkedList<>();\n+        Collection<SimpleTableSegment> tables = new LinkedList<>();\n         for (TableReferenceSegment each: tableReferences) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1b50e0fa9625a6282681ccebca812b418bd6b2e8"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzQ0NDMzNQ==", "bodyText": "TableReferenceSegment each : tableReferences", "url": "https://github.com/apache/shardingsphere/pull/5158#discussion_r407444335", "createdAt": "2020-04-13T11:55:31Z", "author": {"login": "tristaZero"}, "path": "shardingsphere-sql-parser/shardingsphere-sql-parser-statement/src/main/java/org/apache/shardingsphere/sql/parser/sql/statement/dml/SelectStatement.java", "diffHunk": "@@ -107,9 +107,25 @@\n      */\n     public Collection<SimpleTableSegment> getSimpleTableSegments() {\n         Collection<SimpleTableSegment> result = new LinkedList<>();\n+        Collection<SimpleTableSegment> tables = new LinkedList<>();\n         for (TableReferenceSegment each: tableReferences) {\n             result.addAll(each.getSimpleTableSegments());\n         }\n-        return result;\n+        for (SimpleTableSegment each: result) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1b50e0fa9625a6282681ccebca812b418bd6b2e8"}, "originalPosition": 9}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "26fe902a635c668f8e32850be41603b55151cc13", "author": {"user": {"login": "jingshanglu", "name": "JingShang Lu"}}, "url": "https://github.com/apache/shardingsphere/commit/26fe902a635c668f8e32850be41603b55151cc13", "committedDate": "2020-04-13T12:13:24Z", "message": "fix"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkyMTY1Mjky", "url": "https://github.com/apache/shardingsphere/pull/5158#pullrequestreview-392165292", "createdAt": "2020-04-13T14:06:31Z", "commit": {"oid": "26fe902a635c668f8e32850be41603b55151cc13"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3713, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}