{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY1MjI4OTc4", "number": 4065, "title": "Fix  #4062 to allow more than one proxy server running by start scripts with different config directories.", "bodyText": "Fixes #4062\nChanges proposed in this pull request:\n\nallow more than one proxy server running by start scripts with different config directories.\nrename jta.properties to transactions.properties and make users can use their own jta.properties overwrite the first one and avoid the conflict between log file configs.\npolish the two script start.sh/start.bat.", "createdAt": "2020-01-21T10:30:30Z", "url": "https://github.com/apache/shardingsphere/pull/4065", "merged": true, "mergeCommit": {"oid": "3dc1ac86b5e193a9de014bff3efdfa5be35efbdd"}, "closed": true, "closedAt": "2020-01-21T13:20:17Z", "author": {"login": "kimmking"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb8csSXAH2gAyMzY1MjI4OTc4OjJiNDI3MDA3OGM0N2E5MzBiMDU4ZWFmYmZiMjc3MzYxMjJkNWNiNDE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb8hCqxAFqTM0NTg2OTIxNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2b4270078c47a930b058eafbfb27736122d5cb41", "author": {"user": {"login": "kimmking", "name": "kimmking"}}, "url": "https://github.com/apache/shardingsphere/commit/2b4270078c47a930b058eafbfb27736122d5cb41", "committedDate": "2020-01-21T08:16:06Z", "message": "modify start-script to support proxy config path and jta config file"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e5dd08dbc1cb756fcb5c22c7ee257d232e524528", "author": {"user": {"login": "kimmking", "name": "kimmking"}}, "url": "https://github.com/apache/shardingsphere/commit/e5dd08dbc1cb756fcb5c22c7ee257d232e524528", "committedDate": "2020-01-21T08:29:56Z", "message": "add path param to support config path"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0170022c04725f6c93d3f826eaf559355b569fa7", "author": {"user": {"login": "kimmking", "name": "kimmking"}}, "url": "https://github.com/apache/shardingsphere/commit/0170022c04725f6c93d3f826eaf559355b569fa7", "committedDate": "2020-01-21T08:33:01Z", "message": "rename jta.properties to transactions.properties to fix #4602"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a8da2416c96ae7ced9281f24d76eb3c2821b6b74", "author": {"user": {"login": "kimmking", "name": "kimmking"}}, "url": "https://github.com/apache/shardingsphere/commit/a8da2416c96ae7ced9281f24d76eb3c2821b6b74", "committedDate": "2020-01-21T10:15:13Z", "message": "remove pid check in start.sh and add echo statement in start.bat"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ1NzgzODc4", "url": "https://github.com/apache/shardingsphere/pull/4065#pullrequestreview-345783878", "createdAt": "2020-01-21T10:45:57Z", "commit": {"oid": "85858ae8a05b49f17f445aa0538af16f97f82c53"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQxMDo0NTo1N1rOFf1oJQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQxMDo0NTo1N1rOFf1oJQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODkyODgwNQ==", "bodyText": "We should remove useless blank line.", "url": "https://github.com/apache/shardingsphere/pull/4065#discussion_r368928805", "createdAt": "2020-01-21T10:45:57Z", "author": {"login": "terrymanu"}, "path": "sharding-proxy/sharding-proxy-bootstrap/src/main/java/org/apache/shardingsphere/shardingproxy/Bootstrap.java", "diffHunk": "@@ -74,9 +76,12 @@\n      * @throws SQLException SQL exception\n      */\n     public static void main(final String[] args) throws IOException, SQLException {\n-        ShardingConfiguration shardingConfig = new ShardingConfigurationLoader().load();\n-        logRuleConfigurationMap(getRuleConfiguration(shardingConfig.getRuleConfigurationMap()).values());\n         int port = getPort(args);\n+        String path = getConfigPath(args);\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "85858ae8a05b49f17f445aa0538af16f97f82c53"}, "originalPosition": 17}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c67ec7ea12f99a39d587ebd84b8e73faa71b7f71", "author": {"user": {"login": "kimmking", "name": "kimmking"}}, "url": "https://github.com/apache/shardingsphere/commit/c67ec7ea12f99a39d587ebd84b8e73faa71b7f71", "committedDate": "2020-01-21T11:12:18Z", "message": "fix testcase for ShardingConfigurationLoaderTest and polish codes"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "85858ae8a05b49f17f445aa0538af16f97f82c53", "author": {"user": {"login": "kimmking", "name": "kimmking"}}, "url": "https://github.com/apache/shardingsphere/commit/85858ae8a05b49f17f445aa0538af16f97f82c53", "committedDate": "2020-01-21T10:33:50Z", "message": "fix testcase for ShardingConfigurationLoaderTest"}, "afterCommit": {"oid": "c67ec7ea12f99a39d587ebd84b8e73faa71b7f71", "author": {"user": {"login": "kimmking", "name": "kimmking"}}, "url": "https://github.com/apache/shardingsphere/commit/c67ec7ea12f99a39d587ebd84b8e73faa71b7f71", "committedDate": "2020-01-21T11:12:18Z", "message": "fix testcase for ShardingConfigurationLoaderTest and polish codes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ1ODQ4NTgx", "url": "https://github.com/apache/shardingsphere/pull/4065#pullrequestreview-345848581", "createdAt": "2020-01-21T12:44:57Z", "commit": {"oid": "c67ec7ea12f99a39d587ebd84b8e73faa71b7f71"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQxMjo0NDo1N1rOFf4rkQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQxMjo0NDo1N1rOFf4rkQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODk3ODgzMw==", "bodyText": "name of str maybe arg", "url": "https://github.com/apache/shardingsphere/pull/4065#discussion_r368978833", "createdAt": "2020-01-21T12:44:57Z", "author": {"login": "terrymanu"}, "path": "sharding-proxy/sharding-proxy-bootstrap/src/main/java/org/apache/shardingsphere/shardingproxy/Bootstrap.java", "diffHunk": "@@ -91,6 +93,18 @@ private static int getPort(final String[] args) {\n         Integer paredPort = Ints.tryParse(args[0]);\n         return paredPort == null ? DEFAULT_PORT : paredPort;\n     }\n+\n+    private static String getConfigPath(final String[] args) {\n+        if (args.length < 2) {\n+            return DEFAULT_CONFIG_PATH;\n+        }\n+        return paddingWithSlash(args[1]);\n+    }\n+\n+    private static String paddingWithSlash(final String str) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c67ec7ea12f99a39d587ebd84b8e73faa71b7f71"}, "originalPosition": 33}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4dc37ab0afe39d4b80194938acfc0354fbf82c9c", "author": {"user": {"login": "kimmking", "name": "kimmking"}}, "url": "https://github.com/apache/shardingsphere/commit/4dc37ab0afe39d4b80194938acfc0354fbf82c9c", "committedDate": "2020-01-21T13:15:43Z", "message": "rename a method parameter"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "44226a0de146f452272c9fba4c623e70b770e867", "author": {"user": {"login": "kimmking", "name": "kimmking"}}, "url": "https://github.com/apache/shardingsphere/commit/44226a0de146f452272c9fba4c623e70b770e867", "committedDate": "2020-01-21T13:11:56Z", "message": "rename a method parameter"}, "afterCommit": {"oid": "4dc37ab0afe39d4b80194938acfc0354fbf82c9c", "author": {"user": {"login": "kimmking", "name": "kimmking"}}, "url": "https://github.com/apache/shardingsphere/commit/4dc37ab0afe39d4b80194938acfc0354fbf82c9c", "committedDate": "2020-01-21T13:15:43Z", "message": "rename a method parameter"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ1ODY5MjE0", "url": "https://github.com/apache/shardingsphere/pull/4065#pullrequestreview-345869214", "createdAt": "2020-01-21T13:20:10Z", "commit": {"oid": "4dc37ab0afe39d4b80194938acfc0354fbf82c9c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4161, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}