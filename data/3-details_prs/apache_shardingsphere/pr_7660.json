{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk0NjkzMDcy", "number": 7660, "title": "Try to extract sharding columns from target config if it's available.", "bodyText": "Changes proposed in this pull request:\n\nTry to extract sharding columns from target config if it's available.\nFix NPE bug in DataSourceConfiguration.getDatabaseType().\nUpdate usage document.", "createdAt": "2020-09-29T09:30:45Z", "url": "https://github.com/apache/shardingsphere/pull/7660", "merged": true, "mergeCommit": {"oid": "fa84ba463e8c4b752149e7e379b3edf0fa9a1cb8"}, "closed": true, "closedAt": "2020-09-29T09:45:18Z", "author": {"login": "Lucas-307"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdNjtmSAH2gAyNDk0NjkzMDcyOjI2Y2U3NGYyY2U2YWE2NDI2NmVkOTJkMWNlMzMwMjIzODU3MmFlM2E=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdNlAbEAFqTQ5ODI5NTE5Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "26ce74f2ce6aa64266ed92d1ce3302238572ae3a", "author": {"user": null}, "url": "https://github.com/apache/shardingsphere/commit/26ce74f2ce6aa64266ed92d1ce3302238572ae3a", "committedDate": "2020-09-29T08:14:44Z", "message": "Update usage document."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ef767bd8c4706faf339fe9ec951502487088346b", "author": {"user": null}, "url": "https://github.com/apache/shardingsphere/commit/ef767bd8c4706faf339fe9ec951502487088346b", "committedDate": "2020-09-29T08:17:57Z", "message": "Try to extract sharding columns from target config if it's available."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "370122a1176f46e4d4942a8b81e39b2fa53329b9", "author": {"user": null}, "url": "https://github.com/apache/shardingsphere/commit/370122a1176f46e4d4942a8b81e39b2fa53329b9", "committedDate": "2020-09-29T08:56:14Z", "message": "Fix NPE bug in DataSourceConfiguration.getDatabaseType()."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3a796c0872b859e8685627ce2f881108f76f326f", "author": {"user": null}, "url": "https://github.com/apache/shardingsphere/commit/3a796c0872b859e8685627ce2f881108f76f326f", "committedDate": "2020-09-29T09:08:05Z", "message": "add @Override"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e1d533da7a547663bc36e0f1eaa5e837cec62d79", "author": {"user": null}, "url": "https://github.com/apache/shardingsphere/commit/e1d533da7a547663bc36e0f1eaa5e837cec62d79", "committedDate": "2020-09-29T09:26:56Z", "message": "add log"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk4MjkyMzg2", "url": "https://github.com/apache/shardingsphere/pull/7660#pullrequestreview-498292386", "createdAt": "2020-09-29T09:41:45Z", "commit": {"oid": "e1d533da7a547663bc36e0f1eaa5e837cec62d79"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQwOTo0MTo0NlrOHZk-2g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQwOTo0MTo0NlrOHZk-2g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjU4MjM2Mg==", "bodyText": "null == databaseType", "url": "https://github.com/apache/shardingsphere/pull/7660#discussion_r496582362", "createdAt": "2020-09-29T09:41:46Z", "author": {"login": "menghaoranss"}, "path": "shardingsphere-scaling/shardingsphere-scaling-core/src/main/java/org/apache/shardingsphere/scaling/core/config/ShardingSphereJDBCConfiguration.java", "diffHunk": "@@ -40,7 +40,15 @@\n     public ShardingSphereJDBCConfiguration(final String dataSource, final String rule) {\n         this.dataSource = dataSource;\n         this.rule = rule;\n-        Map<String, org.apache.shardingsphere.infra.config.datasource.DataSourceConfiguration> sourceDataSource = ConfigurationYamlConverter.loadDataSourceConfigurations(dataSource);\n-        this.databaseType = DatabaseTypes.getDatabaseTypeByURL(sourceDataSource.values().iterator().next().getProps().get(\"jdbcUrl\").toString());\n+        this.databaseType = getDatabaseType();\n+    }\n+    \n+    @Override\n+    public DatabaseType getDatabaseType() {\n+        if (databaseType == null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e1d533da7a547663bc36e0f1eaa5e837cec62d79"}, "originalPosition": 11}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b901480b9dd50b7288681d261fa1cf33eec4275a", "author": {"user": null}, "url": "https://github.com/apache/shardingsphere/commit/b901480b9dd50b7288681d261fa1cf33eec4275a", "committedDate": "2020-09-29T09:42:09Z", "message": "flip =="}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk4Mjk1MTk3", "url": "https://github.com/apache/shardingsphere/pull/7660#pullrequestreview-498295197", "createdAt": "2020-09-29T09:45:12Z", "commit": {"oid": "b901480b9dd50b7288681d261fa1cf33eec4275a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4011, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}