{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY3MDk2NzEx", "number": 6812, "title": "Some parser grammer about PostgreSQL DAL&DCL&DDL", "bodyText": "", "createdAt": "2020-08-13T01:42:48Z", "url": "https://github.com/apache/shardingsphere/pull/6812", "merged": true, "mergeCommit": {"oid": "9d472363278a6d2a054b106fe2fb73d87e83975b"}, "closed": true, "closedAt": "2020-08-14T05:06:32Z", "author": {"login": "happybyr"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc-LH9PAH2gAyNDY3MDk2NzExOjRhMzI2ZTQ5ZmE3YTNjMzI3YjAzOWU3YWNhMjljYjc1NDQ0YTQ2NWE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc-tcMzgFqTQ2NzMwOTMyNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "4a326e49fa7a3c327b039e7aca29cb75444a465a", "author": {"user": {"login": "happybyr", "name": "cao biao"}}, "url": "https://github.com/apache/shardingsphere/commit/4a326e49fa7a3c327b039e7aca29cb75444a465a", "committedDate": "2020-08-12T13:07:02Z", "message": "Some of PostgreSQL DAL&DCL"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "98800d893da1708cec65b31357c6ff2cda796374", "author": {"user": {"login": "happybyr", "name": "cao biao"}}, "url": "https://github.com/apache/shardingsphere/commit/98800d893da1708cec65b31357c6ff2cda796374", "committedDate": "2020-08-12T13:09:58Z", "message": "Merge remote-tracking branch 'apache/master'"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "85afa6a00ef577c363ab9a7c7dd2a9294d4cd28a", "author": {"user": {"login": "happybyr", "name": "cao biao"}}, "url": "https://github.com/apache/shardingsphere/commit/85afa6a00ef577c363ab9a7c7dd2a9294d4cd28a", "committedDate": "2020-08-13T01:40:54Z", "message": "Merge remote-tracking branch 'apache/master'"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aea573791908819d3762bd69b93ae2496c6f4079", "author": {"user": {"login": "happybyr", "name": "cao biao"}}, "url": "https://github.com/apache/shardingsphere/commit/aea573791908819d3762bd69b93ae2496c6f4079", "committedDate": "2020-08-13T11:13:08Z", "message": "review fix & add grammer"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY3MjU4OTUy", "url": "https://github.com/apache/shardingsphere/pull/6812#pullrequestreview-467258952", "createdAt": "2020-08-14T01:48:43Z", "commit": {"oid": "aea573791908819d3762bd69b93ae2496c6f4079"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xNFQwMTo0ODo0M1rOHAk6KQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xNFQwMTo1MToyOVrOHAk8hw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDM2Njc2MQ==", "bodyText": "Add a new line at end of file.", "url": "https://github.com/apache/shardingsphere/pull/6812#discussion_r470366761", "createdAt": "2020-08-14T01:48:43Z", "author": {"login": "jingshanglu"}, "path": "shardingsphere-sql-parser/shardingsphere-sql-parser-dialect/shardingsphere-sql-parser-postgresql/src/main/antlr4/imports/postgresql/BaseRule.g4", "diffHunk": "@@ -1639,3 +1639,114 @@ argClass\n funcArgsList\n     : funcArg (COMMA_ funcArg)*\n     ;\n+\n+nonReservedWordOrSconst\n+    : nonReservedWord\n+    | STRING_\n+    ;\n+\n+fileName\n+    : STRING_\n+    ;\n+\n+roleList\n+    : roleSpec (COMMA_ roleSpec)*\n+    ;\n+\n+setResetClause\n+    : SET setRest\n+    | variableResetStmt\n+    ;\n+\n+setRest\n+    : TRANSACTION transactionModeList\n+    | SESSION CHARACTERISTICS AS TRANSACTION transactionModeList\n+    | setRestMore\n+    ;\n+\n+transactionModeList\n+    : transactionModeItem ((COMMA_)? transactionModeItem)*\n+    ;\n+\n+transactionModeItem\n+    : ISOLATION LEVEL isoLevel\n+    | READ ONLY\n+    | READ WRITE\n+    | DEFERRABLE\n+    | NOT DEFERRABLE\n+    ;\n+\n+setRestMore\n+    : genericSet\n+    | varName FROM CURRENT\n+    | TIME ZONE zoneValue\n+    | CATALOG STRING_\n+    | SCHEMA STRING_\n+    | NAMES encoding?\n+    | ROLE nonReservedWord | STRING_\n+    | SESSION AUTHORIZATION nonReservedWord | STRING_\n+    | SESSION AUTHORIZATION DEFAULT\n+    | XML OPTION documentOrContent\n+    | TRANSACTION SNAPSHOT STRING_\n+    ;\n+\n+encoding\n+    : STRING_\n+    | DEFAULT\n+    ;\n+\n+genericSet\n+    : varName (EQ_|TO) (varList | DEFAULT)\n+    ;\n+\n+variableResetStmt\n+    : RESET resetRest\n+    ;\n+\n+resetRest\n+    : genericReset\n+    | TIME ZONE\n+    | TRANSACTION ISOLATION LEVEL\n+    | SESSION AUTHORIZATION\n+    ;\n+\n+genericReset\n+    : varName\n+    | ALL\n+    ;\n+\n+relationExprList\n+    : relationExpr (COMMA_ relationExpr)*\n+    ;\n+\n+relationExpr\n+    : qualifiedName\n+    | qualifiedName ASTERISK_\n+    | ONLY qualifiedName\n+    | ONLY LP_ qualifiedName RP_\n+    ;\n+\n+commonFuncOptItem\n+    : CALLED ON NULL INPUT\n+    | RETURNS NULL ON NULL INPUT\n+    | STRICT\n+    | IMMUTABLE\n+    | STABLE\n+    | VOLATILE\n+    | EXTERNAL SECURITY DEFINER\n+    | EXTERNAL SECURITY INVOKER\n+    | SECURITY DEFINER\n+    | SECURITY INVOKER\n+    | LEAKPROOF\n+    | NOT LEAKPROOF\n+    | COST numericOnly\n+    | ROWS numericOnly\n+    | SUPPORT anyName\n+    | functionSetResetClause\n+    | PARALLEL colId\n+    ;\n+\n+functionSetResetClause\n+    : SET setRestMore\n+    | variableResetStmt\n+    ;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aea573791908819d3762bd69b93ae2496c6f4079"}, "originalPosition": 132}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDM2NzM2Nw==", "bodyText": "keep original format.", "url": "https://github.com/apache/shardingsphere/pull/6812#discussion_r470367367", "createdAt": "2020-08-14T01:51:29Z", "author": {"login": "jingshanglu"}, "path": "shardingsphere-sql-parser/shardingsphere-sql-parser-dialect/shardingsphere-sql-parser-postgresql/src/main/antlr4/imports/postgresql/DDLStatement.g4", "diffHunk": "@@ -130,8 +130,8 @@ dropDatabase\n     : DROP DATABASE (IF EXISTS)? name\n     ;\n \n-createDatabaseSpecification_\n-    :  createdbOptName (EQ_)? (signedIconst | optBooleanOrString | DEFAULT)\n+ createDatabaseSpecification_", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aea573791908819d3762bd69b93ae2496c6f4079"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3ae7f89f8103df82f367bf8f1742ab3afd5b07c1", "author": {"user": {"login": "happybyr", "name": "cao biao"}}, "url": "https://github.com/apache/shardingsphere/commit/3ae7f89f8103df82f367bf8f1742ab3afd5b07c1", "committedDate": "2020-08-14T02:06:59Z", "message": "some DDL in PostgreSQL"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eda8735ca0511acc213ec05a86406b49485c222b", "author": {"user": {"login": "happybyr", "name": "cao biao"}}, "url": "https://github.com/apache/shardingsphere/commit/eda8735ca0511acc213ec05a86406b49485c222b", "committedDate": "2020-08-14T02:07:24Z", "message": "some DDL in PostgreSQL"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e08043489d7f76cac1f37ed7257ec0cb8acf6e73", "author": {"user": {"login": "happybyr", "name": "cao biao"}}, "url": "https://github.com/apache/shardingsphere/commit/e08043489d7f76cac1f37ed7257ec0cb8acf6e73", "committedDate": "2020-08-14T02:59:07Z", "message": "review fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cb40e83b2c85bf6abe2bf40f7f0fc1511c447a22", "author": {"user": {"login": "happybyr", "name": "cao biao"}}, "url": "https://github.com/apache/shardingsphere/commit/cb40e83b2c85bf6abe2bf40f7f0fc1511c447a22", "committedDate": "2020-08-14T03:21:37Z", "message": "review fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2662f2abd4518fe0086bd324cee1fb7baba4bbfc", "author": {"user": {"login": "happybyr", "name": "cao biao"}}, "url": "https://github.com/apache/shardingsphere/commit/2662f2abd4518fe0086bd324cee1fb7baba4bbfc", "committedDate": "2020-08-14T03:24:43Z", "message": "add new line"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2094bf77ae6c0a2d960737d72b8e12ba2e81f29b", "author": {"user": {"login": "happybyr", "name": "cao biao"}}, "url": "https://github.com/apache/shardingsphere/commit/2094bf77ae6c0a2d960737d72b8e12ba2e81f29b", "committedDate": "2020-08-14T03:36:01Z", "message": "review fix"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY3MjkxNDA4", "url": "https://github.com/apache/shardingsphere/pull/6812#pullrequestreview-467291408", "createdAt": "2020-08-14T03:55:47Z", "commit": {"oid": "2094bf77ae6c0a2d960737d72b8e12ba2e81f29b"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xNFQwMzo1NTo0N1rOHAmsWA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xNFQwMzo1NTo0N1rOHAmsWA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDM5NTk5Mg==", "bodyText": "change to\n @Override\n    public ASTNode visitCreateFunction(final CreateFunctionContext ctx) {\n        return new CreateFunctionStatement();\n    }\n\napply to others.", "url": "https://github.com/apache/shardingsphere/pull/6812#discussion_r470395992", "createdAt": "2020-08-14T03:55:47Z", "author": {"login": "jingshanglu"}, "path": "shardingsphere-sql-parser/shardingsphere-sql-parser-dialect/shardingsphere-sql-parser-postgresql/src/main/java/org/apache/shardingsphere/sql/parser/postgresql/visitor/impl/PostgreSQLDDLVisitor.java", "diffHunk": "@@ -280,4 +286,19 @@ public ASTNode visitTableNamesClause(final TableNamesClauseContext ctx) {\n         result.getValue().addAll(tableSegments);\n         return result;\n     }\n+    \n+    @Override\n+    public ASTNode visitAlterFunction(final AlterFunctionContext ctx) {\n+        return new AlterFunctionStatement();\n+    }\n+    \n+    @Override\n+    public ASTNode visitAlterProcedure(final AlterProcedureContext ctx) {\n+        return new AlterProcedureStatement();\n+    }\n+    \n+    @Override\n+    public ASTNode visitCreateFunction(final PostgreSQLStatementParser.CreateFunctionContext ctx) {\n+        return new CreateFunctionStatement();\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2094bf77ae6c0a2d960737d72b8e12ba2e81f29b"}, "originalPosition": 40}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1c3a83ca1002ef7d81715c628a1f113f1d514329", "author": {"user": {"login": "happybyr", "name": "cao biao"}}, "url": "https://github.com/apache/shardingsphere/commit/1c3a83ca1002ef7d81715c628a1f113f1d514329", "committedDate": "2020-08-14T04:15:33Z", "message": "fix import"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY3MzA5MzI3", "url": "https://github.com/apache/shardingsphere/pull/6812#pullrequestreview-467309327", "createdAt": "2020-08-14T05:05:55Z", "commit": {"oid": "1c3a83ca1002ef7d81715c628a1f113f1d514329"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4726, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}