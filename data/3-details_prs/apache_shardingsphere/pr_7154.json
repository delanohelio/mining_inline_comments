{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc1OTAxMjE0", "number": 7154, "title": "Add test case of StandardTransactionContexts", "bodyText": "Fixes #7148.\nChanges proposed in this pull request:\n\nAdd test case of StandardTransactionContexts", "createdAt": "2020-08-30T11:53:30Z", "url": "https://github.com/apache/shardingsphere/pull/7154", "merged": true, "mergeCommit": {"oid": "e324be58b85b0b924c0d527c6862897d128d54a7"}, "closed": true, "closedAt": "2020-08-31T08:05:55Z", "author": {"login": "xbkaishui"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdD82U1gH2gAyNDc1OTAxMjE0OjA3MmRiYWRmMmFjMzgxOGNkYmU2N2RmMzcwYmFkNDAzYTU1N2QwMzg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdEOIwXAFqTQ3ODQwMDc1Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "072dbadf2ac3818cdbe67df370bad403a557d038", "author": {"user": {"login": "xbkaishui", "name": null}}, "url": "https://github.com/apache/shardingsphere/commit/072dbadf2ac3818cdbe67df370bad403a557d038", "committedDate": "2020-08-30T11:52:39Z", "message": "add test case of StandardTransactionContexts"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc4MjExOTgw", "url": "https://github.com/apache/shardingsphere/pull/7154#pullrequestreview-478211980", "createdAt": "2020-08-30T15:20:12Z", "commit": {"oid": "072dbadf2ac3818cdbe67df370bad403a557d038"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMFQxNToyMDoxM1rOHJjmBA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMFQxNToyNDozMFrOHJjnyw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTc4MjQwNA==", "bodyText": "Please add final if the class is not design for extension", "url": "https://github.com/apache/shardingsphere/pull/7154#discussion_r479782404", "createdAt": "2020-08-30T15:20:13Z", "author": {"login": "terrymanu"}, "path": "shardingsphere-transaction/shardingsphere-transaction-core/src/test/java/org/apache/shardingsphere/transaction/context/impl/StandardTransactionContextsTest.java", "diffHunk": "@@ -0,0 +1,51 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.apache.shardingsphere.transaction.context.impl;\n+\n+import org.apache.shardingsphere.infra.database.DefaultSchema;\n+import org.apache.shardingsphere.transaction.ShardingTransactionManagerEngine;\n+import org.junit.Assert;\n+import org.junit.Test;\n+\n+import java.util.HashMap;\n+import java.util.Map;\n+\n+import static org.hamcrest.CoreMatchers.is;\n+\n+public class StandardTransactionContextsTest {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "072dbadf2ac3818cdbe67df370bad403a557d038"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTc4MjU3Nw==", "bodyText": "What's mean ofassertGetEnginesNull? Do you mean assertNewInstanceWithEmptyEngines?", "url": "https://github.com/apache/shardingsphere/pull/7154#discussion_r479782577", "createdAt": "2020-08-30T15:21:45Z", "author": {"login": "terrymanu"}, "path": "shardingsphere-transaction/shardingsphere-transaction-core/src/test/java/org/apache/shardingsphere/transaction/context/impl/StandardTransactionContextsTest.java", "diffHunk": "@@ -0,0 +1,51 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.apache.shardingsphere.transaction.context.impl;\n+\n+import org.apache.shardingsphere.infra.database.DefaultSchema;\n+import org.apache.shardingsphere.transaction.ShardingTransactionManagerEngine;\n+import org.junit.Assert;\n+import org.junit.Test;\n+\n+import java.util.HashMap;\n+import java.util.Map;\n+\n+import static org.hamcrest.CoreMatchers.is;\n+\n+public class StandardTransactionContextsTest {\n+    \n+    @Test\n+    public void assertGetEnginesNull() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "072dbadf2ac3818cdbe67df370bad403a557d038"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTc4MjYyMQ==", "bodyText": "Please use static import with Assert.assertTrue", "url": "https://github.com/apache/shardingsphere/pull/7154#discussion_r479782621", "createdAt": "2020-08-30T15:22:00Z", "author": {"login": "terrymanu"}, "path": "shardingsphere-transaction/shardingsphere-transaction-core/src/test/java/org/apache/shardingsphere/transaction/context/impl/StandardTransactionContextsTest.java", "diffHunk": "@@ -0,0 +1,51 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.apache.shardingsphere.transaction.context.impl;\n+\n+import org.apache.shardingsphere.infra.database.DefaultSchema;\n+import org.apache.shardingsphere.transaction.ShardingTransactionManagerEngine;\n+import org.junit.Assert;\n+import org.junit.Test;\n+\n+import java.util.HashMap;\n+import java.util.Map;\n+\n+import static org.hamcrest.CoreMatchers.is;\n+\n+public class StandardTransactionContextsTest {\n+    \n+    @Test\n+    public void assertGetEnginesNull() {\n+        StandardTransactionContexts standardTransactionContexts = new StandardTransactionContexts();\n+        Map<String, ShardingTransactionManagerEngine> engines = standardTransactionContexts.getEngines();\n+        Assert.assertTrue(engines.isEmpty());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "072dbadf2ac3818cdbe67df370bad403a557d038"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTc4MjY1Ng==", "bodyText": "Please use static import with Assert. assertNotNull", "url": "https://github.com/apache/shardingsphere/pull/7154#discussion_r479782656", "createdAt": "2020-08-30T15:22:32Z", "author": {"login": "terrymanu"}, "path": "shardingsphere-transaction/shardingsphere-transaction-core/src/test/java/org/apache/shardingsphere/transaction/context/impl/StandardTransactionContextsTest.java", "diffHunk": "@@ -0,0 +1,51 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.apache.shardingsphere.transaction.context.impl;\n+\n+import org.apache.shardingsphere.infra.database.DefaultSchema;\n+import org.apache.shardingsphere.transaction.ShardingTransactionManagerEngine;\n+import org.junit.Assert;\n+import org.junit.Test;\n+\n+import java.util.HashMap;\n+import java.util.Map;\n+\n+import static org.hamcrest.CoreMatchers.is;\n+\n+public class StandardTransactionContextsTest {\n+    \n+    @Test\n+    public void assertGetEnginesNull() {\n+        StandardTransactionContexts standardTransactionContexts = new StandardTransactionContexts();\n+        Map<String, ShardingTransactionManagerEngine> engines = standardTransactionContexts.getEngines();\n+        Assert.assertTrue(engines.isEmpty());\n+    }\n+    \n+    @Test\n+    public void assertGetEngines() {\n+        Map<String, ShardingTransactionManagerEngine> actualEngine = new HashMap<>();\n+        actualEngine.put(DefaultSchema.LOGIC_NAME, new ShardingTransactionManagerEngine());\n+        StandardTransactionContexts standardTransactionContexts = new StandardTransactionContexts(actualEngine);\n+        \n+        Map<String, ShardingTransactionManagerEngine> engines = standardTransactionContexts.getEngines();\n+        Assert.assertThat(engines.size(), is(1));\n+        Assert.assertThat(engines, is(actualEngine));\n+        ShardingTransactionManagerEngine defaultEngine = standardTransactionContexts.getDefaultTransactionManagerEngine();\n+        Assert.assertNotNull(defaultEngine);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "072dbadf2ac3818cdbe67df370bad403a557d038"}, "originalPosition": 49}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTc4MjY3Ng==", "bodyText": "Please use static import with Assert. assertThat", "url": "https://github.com/apache/shardingsphere/pull/7154#discussion_r479782676", "createdAt": "2020-08-30T15:22:51Z", "author": {"login": "terrymanu"}, "path": "shardingsphere-transaction/shardingsphere-transaction-core/src/test/java/org/apache/shardingsphere/transaction/context/impl/StandardTransactionContextsTest.java", "diffHunk": "@@ -0,0 +1,51 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.apache.shardingsphere.transaction.context.impl;\n+\n+import org.apache.shardingsphere.infra.database.DefaultSchema;\n+import org.apache.shardingsphere.transaction.ShardingTransactionManagerEngine;\n+import org.junit.Assert;\n+import org.junit.Test;\n+\n+import java.util.HashMap;\n+import java.util.Map;\n+\n+import static org.hamcrest.CoreMatchers.is;\n+\n+public class StandardTransactionContextsTest {\n+    \n+    @Test\n+    public void assertGetEnginesNull() {\n+        StandardTransactionContexts standardTransactionContexts = new StandardTransactionContexts();\n+        Map<String, ShardingTransactionManagerEngine> engines = standardTransactionContexts.getEngines();\n+        Assert.assertTrue(engines.isEmpty());\n+    }\n+    \n+    @Test\n+    public void assertGetEngines() {\n+        Map<String, ShardingTransactionManagerEngine> actualEngine = new HashMap<>();\n+        actualEngine.put(DefaultSchema.LOGIC_NAME, new ShardingTransactionManagerEngine());\n+        StandardTransactionContexts standardTransactionContexts = new StandardTransactionContexts(actualEngine);\n+        \n+        Map<String, ShardingTransactionManagerEngine> engines = standardTransactionContexts.getEngines();\n+        Assert.assertThat(engines.size(), is(1));\n+        Assert.assertThat(engines, is(actualEngine));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "072dbadf2ac3818cdbe67df370bad403a557d038"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTc4MjcwNg==", "bodyText": "Please remove useless empty line", "url": "https://github.com/apache/shardingsphere/pull/7154#discussion_r479782706", "createdAt": "2020-08-30T15:23:05Z", "author": {"login": "terrymanu"}, "path": "shardingsphere-transaction/shardingsphere-transaction-core/src/test/java/org/apache/shardingsphere/transaction/context/impl/StandardTransactionContextsTest.java", "diffHunk": "@@ -0,0 +1,51 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.apache.shardingsphere.transaction.context.impl;\n+\n+import org.apache.shardingsphere.infra.database.DefaultSchema;\n+import org.apache.shardingsphere.transaction.ShardingTransactionManagerEngine;\n+import org.junit.Assert;\n+import org.junit.Test;\n+\n+import java.util.HashMap;\n+import java.util.Map;\n+\n+import static org.hamcrest.CoreMatchers.is;\n+\n+public class StandardTransactionContextsTest {\n+    \n+    @Test\n+    public void assertGetEnginesNull() {\n+        StandardTransactionContexts standardTransactionContexts = new StandardTransactionContexts();\n+        Map<String, ShardingTransactionManagerEngine> engines = standardTransactionContexts.getEngines();\n+        Assert.assertTrue(engines.isEmpty());\n+    }\n+    \n+    @Test\n+    public void assertGetEngines() {\n+        Map<String, ShardingTransactionManagerEngine> actualEngine = new HashMap<>();\n+        actualEngine.put(DefaultSchema.LOGIC_NAME, new ShardingTransactionManagerEngine());\n+        StandardTransactionContexts standardTransactionContexts = new StandardTransactionContexts(actualEngine);\n+        ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "072dbadf2ac3818cdbe67df370bad403a557d038"}, "originalPosition": 44}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTc4Mjg1OQ==", "bodyText": "It seems we do not need to assert method getEngines which is for simple getter only.\nIt is necessary to assert method getDefaultTransactionManagerEngine", "url": "https://github.com/apache/shardingsphere/pull/7154#discussion_r479782859", "createdAt": "2020-08-30T15:24:30Z", "author": {"login": "terrymanu"}, "path": "shardingsphere-transaction/shardingsphere-transaction-core/src/test/java/org/apache/shardingsphere/transaction/context/impl/StandardTransactionContextsTest.java", "diffHunk": "@@ -0,0 +1,51 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.apache.shardingsphere.transaction.context.impl;\n+\n+import org.apache.shardingsphere.infra.database.DefaultSchema;\n+import org.apache.shardingsphere.transaction.ShardingTransactionManagerEngine;\n+import org.junit.Assert;\n+import org.junit.Test;\n+\n+import java.util.HashMap;\n+import java.util.Map;\n+\n+import static org.hamcrest.CoreMatchers.is;\n+\n+public class StandardTransactionContextsTest {\n+    \n+    @Test\n+    public void assertGetEnginesNull() {\n+        StandardTransactionContexts standardTransactionContexts = new StandardTransactionContexts();\n+        Map<String, ShardingTransactionManagerEngine> engines = standardTransactionContexts.getEngines();\n+        Assert.assertTrue(engines.isEmpty());\n+    }\n+    \n+    @Test\n+    public void assertGetEngines() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "072dbadf2ac3818cdbe67df370bad403a557d038"}, "originalPosition": 40}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d8a9e7124a0207ec31ba1640892dd1fc55994bf7", "author": {"user": {"login": "xbkaishui", "name": null}}, "url": "https://github.com/apache/shardingsphere/commit/d8a9e7124a0207ec31ba1640892dd1fc55994bf7", "committedDate": "2020-08-31T02:38:08Z", "message": "add close method test case"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc4NDAwNzU3", "url": "https://github.com/apache/shardingsphere/pull/7154#pullrequestreview-478400757", "createdAt": "2020-08-31T08:01:10Z", "commit": {"oid": "d8a9e7124a0207ec31ba1640892dd1fc55994bf7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4681, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}