{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDYxOTYzMTQ1", "number": 6584, "title": "fix sqlException.getCause isNull", "bodyText": "Fixes #6583.\nChanges proposed in this pull request:", "createdAt": "2020-08-03T06:04:21Z", "url": "https://github.com/apache/shardingsphere/pull/6584", "merged": true, "mergeCommit": {"oid": "bfebcac6482f4211ce1cc706205f0e3653c4d182"}, "closed": true, "closedAt": "2020-08-05T11:02:25Z", "author": {"login": "cmonkey"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc7LyH1gFqTQ1OTc2ODQ1Mg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc75JH1AFqTQ2MTU1NjIwOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU5NzY4NDUy", "url": "https://github.com/apache/shardingsphere/pull/6584#pullrequestreview-459768452", "createdAt": "2020-08-03T06:10:19Z", "commit": {"oid": "671d0bf7d20188fb14f52b42a38c7fbc33bad580"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QwNjoxMDoxOVrOG6tN-g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QwNjoxMDoxOVrOG6tN-g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDIxMTQ1MA==", "bodyText": "When null == sqlException.getSQLState() , null == sqlException.getCause() but cause.getMessage() could run well, right?", "url": "https://github.com/apache/shardingsphere/pull/6584#discussion_r464211450", "createdAt": "2020-08-03T06:10:19Z", "author": {"login": "tristaZero"}, "path": "shardingsphere-proxy/shardingsphere-proxy-frontend/shardingsphere-proxy-frontend-mysql/src/main/java/org/apache/shardingsphere/proxy/frontend/mysql/MySQLErrPacketFactory.java", "diffHunk": "@@ -47,7 +47,7 @@ public static MySQLErrPacket newInstance(final int sequenceId, final Exception c\n         if (cause instanceof SQLException) {\n             SQLException sqlException = (SQLException) cause;\n             return null != sqlException.getSQLState() ? new MySQLErrPacket(sequenceId, sqlException.getErrorCode(), sqlException.getSQLState(), sqlException.getMessage())\n-                : new MySQLErrPacket(sequenceId, MySQLServerErrorCode.ER_INTERNAL_ERROR, sqlException.getCause().getMessage());\n+                : new MySQLErrPacket(sequenceId, MySQLServerErrorCode.ER_INTERNAL_ERROR, cause.getMessage());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "671d0bf7d20188fb14f52b42a38c7fbc33bad580"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "671d0bf7d20188fb14f52b42a38c7fbc33bad580", "author": {"user": {"login": "cmonkey", "name": null}}, "url": "https://github.com/apache/shardingsphere/commit/671d0bf7d20188fb14f52b42a38c7fbc33bad580", "committedDate": "2020-08-03T06:01:59Z", "message": "fix sqlException.getCause isNull"}, "afterCommit": {"oid": "0aa0d419bb769f9f860b63fa84574dcde5a66dee", "author": {"user": {"login": "cmonkey", "name": null}}, "url": "https://github.com/apache/shardingsphere/commit/0aa0d419bb769f9f860b63fa84574dcde5a66dee", "committedDate": "2020-08-03T07:38:07Z", "message": "fix sqlException.getCause isNull"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU5ODQ2MjU0", "url": "https://github.com/apache/shardingsphere/pull/6584#pullrequestreview-459846254", "createdAt": "2020-08-03T08:36:42Z", "commit": {"oid": "0aa0d419bb769f9f860b63fa84574dcde5a66dee"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QwODozNjo0MlrOG6w4Ng==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QwODozNjo0MlrOG6w4Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDI3MTQxNA==", "bodyText": "Sorry, I did not catch you.\nWhich condition will make sqlException.getCause isNull ?", "url": "https://github.com/apache/shardingsphere/pull/6584#discussion_r464271414", "createdAt": "2020-08-03T08:36:42Z", "author": {"login": "tristaZero"}, "path": "shardingsphere-proxy/shardingsphere-proxy-frontend/shardingsphere-proxy-frontend-mysql/src/main/java/org/apache/shardingsphere/proxy/frontend/mysql/MySQLErrPacketFactory.java", "diffHunk": "@@ -47,7 +47,7 @@ public static MySQLErrPacket newInstance(final int sequenceId, final Exception c\n         if (cause instanceof SQLException) {\n             SQLException sqlException = (SQLException) cause;\n             return null != sqlException.getSQLState() ? new MySQLErrPacket(sequenceId, sqlException.getErrorCode(), sqlException.getSQLState(), sqlException.getMessage())\n-                : new MySQLErrPacket(sequenceId, MySQLServerErrorCode.ER_INTERNAL_ERROR, sqlException.getCause().getMessage());\n+                : new MySQLErrPacket(sequenceId, MySQLServerErrorCode.ER_INTERNAL_ERROR, cause.getMessage());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDIxMTQ1MA=="}, "originalCommit": {"oid": "671d0bf7d20188fb14f52b42a38c7fbc33bad580"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYwNTE5ODE4", "url": "https://github.com/apache/shardingsphere/pull/6584#pullrequestreview-460519818", "createdAt": "2020-08-04T06:08:28Z", "commit": {"oid": "0aa0d419bb769f9f860b63fa84574dcde5a66dee"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQwNjowODoyOFrOG7SYbA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQwNjowODoyOFrOG7SYbA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDgyMDMzMg==", "bodyText": "@cmonkey Sorry?\nOr what's the difference between sqlException.getCause().getMessage() and cause.getMessage()?", "url": "https://github.com/apache/shardingsphere/pull/6584#discussion_r464820332", "createdAt": "2020-08-04T06:08:28Z", "author": {"login": "tristaZero"}, "path": "shardingsphere-proxy/shardingsphere-proxy-frontend/shardingsphere-proxy-frontend-mysql/src/main/java/org/apache/shardingsphere/proxy/frontend/mysql/MySQLErrPacketFactory.java", "diffHunk": "@@ -47,7 +47,7 @@ public static MySQLErrPacket newInstance(final int sequenceId, final Exception c\n         if (cause instanceof SQLException) {\n             SQLException sqlException = (SQLException) cause;\n             return null != sqlException.getSQLState() ? new MySQLErrPacket(sequenceId, sqlException.getErrorCode(), sqlException.getSQLState(), sqlException.getMessage())\n-                : new MySQLErrPacket(sequenceId, MySQLServerErrorCode.ER_INTERNAL_ERROR, sqlException.getCause().getMessage());\n+                : new MySQLErrPacket(sequenceId, MySQLServerErrorCode.ER_INTERNAL_ERROR, cause.getMessage());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDIxMTQ1MA=="}, "originalCommit": {"oid": "671d0bf7d20188fb14f52b42a38c7fbc33bad580"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0aa0d419bb769f9f860b63fa84574dcde5a66dee", "author": {"user": {"login": "cmonkey", "name": null}}, "url": "https://github.com/apache/shardingsphere/commit/0aa0d419bb769f9f860b63fa84574dcde5a66dee", "committedDate": "2020-08-03T07:38:07Z", "message": "fix sqlException.getCause isNull"}, "afterCommit": {"oid": "570425002269f46f4e969b4ca3128445834ba0d4", "author": {"user": {"login": "cmonkey", "name": null}}, "url": "https://github.com/apache/shardingsphere/commit/570425002269f46f4e969b4ca3128445834ba0d4", "committedDate": "2020-08-04T07:03:15Z", "message": "fix sqlException.getCause isNull"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "570425002269f46f4e969b4ca3128445834ba0d4", "author": {"user": {"login": "cmonkey", "name": null}}, "url": "https://github.com/apache/shardingsphere/commit/570425002269f46f4e969b4ca3128445834ba0d4", "committedDate": "2020-08-04T07:03:15Z", "message": "fix sqlException.getCause isNull"}, "afterCommit": {"oid": "07976529d6b80d86b53238b2c056f85e96b1be40", "author": {"user": {"login": "cmonkey", "name": null}}, "url": "https://github.com/apache/shardingsphere/commit/07976529d6b80d86b53238b2c056f85e96b1be40", "committedDate": "2020-08-05T01:40:13Z", "message": "fix sqlException.getCause isNull"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6c3d771ffa762b37d2b4e9f2bcadc146a8efbae2", "author": {"user": {"login": "cmonkey", "name": null}}, "url": "https://github.com/apache/shardingsphere/commit/6c3d771ffa762b37d2b4e9f2bcadc146a8efbae2", "committedDate": "2020-08-05T07:08:14Z", "message": "fix sqlException.getCause isNull"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "07976529d6b80d86b53238b2c056f85e96b1be40", "author": {"user": {"login": "cmonkey", "name": null}}, "url": "https://github.com/apache/shardingsphere/commit/07976529d6b80d86b53238b2c056f85e96b1be40", "committedDate": "2020-08-05T01:40:13Z", "message": "fix sqlException.getCause isNull"}, "afterCommit": {"oid": "6c3d771ffa762b37d2b4e9f2bcadc146a8efbae2", "author": {"user": {"login": "cmonkey", "name": null}}, "url": "https://github.com/apache/shardingsphere/commit/6c3d771ffa762b37d2b4e9f2bcadc146a8efbae2", "committedDate": "2020-08-05T07:08:14Z", "message": "fix sqlException.getCause isNull"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYxNTU2MjA5", "url": "https://github.com/apache/shardingsphere/pull/6584#pullrequestreview-461556209", "createdAt": "2020-08-05T11:02:10Z", "commit": {"oid": "6c3d771ffa762b37d2b4e9f2bcadc146a8efbae2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4798, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}