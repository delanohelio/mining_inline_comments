{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDUwNzQ1OTE5", "number": 6370, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xOFQxMDozMToyNFrOEPv8Yw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQwOToxODoyOVrOEQ9oow==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg0OTQ5NjAzOnYy", "diffSide": "RIGHT", "path": "shardingsphere-sql-parser/shardingsphere-sql-parser-dialect/shardingsphere-sql-parser-mysql/src/main/java/org/apache/shardingsphere/sql/parser/mysql/visitor/impl/MySQLDMLVisitor.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xOFQxMDozMToyNFrOGznZDQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xOFQxMDozMToyNFrOGznZDQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njc3NTk0OQ==", "bodyText": "Do you think it is better to overwrite getStopIndex() of ExpressionProjectionSegment  with the stopIndex of itsaliasSegment,", "url": "https://github.com/apache/shardingsphere/pull/6370#discussion_r456775949", "createdAt": "2020-07-18T10:31:24Z", "author": {"login": "tristaZero"}, "path": "shardingsphere-sql-parser/shardingsphere-sql-parser-dialect/shardingsphere-sql-parser-mysql/src/main/java/org/apache/shardingsphere/sql/parser/mysql/visitor/impl/MySQLDMLVisitor.java", "diffHunk": "@@ -470,7 +470,8 @@ private ASTNode createProjection(final ProjectionContext ctx, final AliasSegment\n         }\n         if (projection instanceof CommonExpressionSegment) {\n             CommonExpressionSegment segment = (CommonExpressionSegment) projection;\n-            ExpressionProjectionSegment result = new ExpressionProjectionSegment(segment.getStartIndex(), segment.getStopIndex(), segment.getText());\n+            ExpressionProjectionSegment result = null == alias ? new ExpressionProjectionSegment(segment.getStartIndex(), segment.getStopIndex(), segment.getText())\n+                    : new ExpressionProjectionSegment(segment.getStartIndex(), alias.getStopIndex(), segment.getText());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d10d8641a713e8a8a79ee035e256c355f95187fb"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg2MjIyNDk5OnYy", "diffSide": "LEFT", "path": "shardingsphere-sql-parser/shardingsphere-sql-parser-dialect/shardingsphere-sql-parser-postgresql/src/main/java/org/apache/shardingsphere/sql/parser/postgresql/visitor/PostgreSQLVisitor.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQwOToxODoyOVrOG1aDnw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQwOToxODoyOVrOG1aDnw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODY1NDYyMw==", "bodyText": "Do you think these codes can be removed?", "url": "https://github.com/apache/shardingsphere/pull/6370#discussion_r458654623", "createdAt": "2020-07-22T09:18:29Z", "author": {"login": "tristaZero"}, "path": "shardingsphere-sql-parser/shardingsphere-sql-parser-dialect/shardingsphere-sql-parser-postgresql/src/main/java/org/apache/shardingsphere/sql/parser/postgresql/visitor/PostgreSQLVisitor.java", "diffHunk": "@@ -262,14 +262,15 @@ private PredicateSegment createInSegment(final AExprContext ctx) {\n     \n     private Collection<ExpressionSegment> getExpressionSegments(final AExprContext ctx) {\n         Collection<ExpressionSegment> result = new LinkedList<>();\n-//        if (null != ctx.cExpr() && null != ctx.cExpr().select_with_parens()) {\n-//            Select_with_parensContext subquery = ctx.cExpr().select_with_parens();\n+//        TODO deal with sqlExpressions in PredicateInRightValue\n+//        if (null != ctx.cExpr() && null != ctx.cExpr().selectWithParens()) {\n+//            PostgreSQLStatementParser.SelectWithParensContext subquery = ctx.cExpr().selectWithParens();\n //            result.add(new SubqueryExpressionSegment(new SubquerySegment(subquery.getStart().getStartIndex(), subquery.getStop().getStopIndex(),\n-//                    (SelectStatement) visit(ctx.cExpr().select_with_parens()))));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ef2799710b8dbb67075e2e49c8878c937803b0f"}, "originalPosition": 10}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 437, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}