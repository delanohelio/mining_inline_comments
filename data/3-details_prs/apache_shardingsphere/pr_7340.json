{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDgyNDY4Njk4", "number": 7340, "title": "Fix create table if not exists pre validation error", "bodyText": "Fixes #7323\nChanges proposed in this pull request:\n\nFix create table if not exists pre validation error. ignore validation when use this", "createdAt": "2020-09-09T03:47:54Z", "url": "https://github.com/apache/shardingsphere/pull/7340", "merged": true, "mergeCommit": {"oid": "361377ddee5a6b078a1a5eec8f73e86f84fe423e"}, "closed": true, "closedAt": "2020-09-10T09:47:28Z", "author": {"login": "xbkaishui"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdHD339gH2gAyNDgyNDY4Njk4OjNiYTc3YjNjMTQ2ZDc4MzNjMjgwY2U3ZGE0MTVhNTAwYWNkZjA4MTY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdHdotWgFqTQ4NTc2NDY4MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "3ba77b3c146d7833c280ce7da415a500acdf0816", "author": {"user": {"login": "xbkaishui", "name": null}}, "url": "https://github.com/apache/shardingsphere/commit/3ba77b3c146d7833c280ce7da415a500acdf0816", "committedDate": "2020-09-09T03:45:27Z", "message": "Fix create table if not exists pre validation error. ignore validation when use this"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f38ade6046c033e427790f31f349b94268473b76", "author": {"user": {"login": "xbkaishui", "name": null}}, "url": "https://github.com/apache/shardingsphere/commit/f38ade6046c033e427790f31f349b94268473b76", "committedDate": "2020-09-09T04:13:29Z", "message": "fix check style"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg0Njg0Mjcy", "url": "https://github.com/apache/shardingsphere/pull/7340#pullrequestreview-484684272", "createdAt": "2020-09-09T06:03:44Z", "commit": {"oid": "f38ade6046c033e427790f31f349b94268473b76"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQwNjowMzo0NFrOHO35sQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQwNjowNjoxNlrOHO39EQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTM1ODAwMQ==", "bodyText": "Do you think null != ctx.notExistClause_() is enough?", "url": "https://github.com/apache/shardingsphere/pull/7340#discussion_r485358001", "createdAt": "2020-09-09T06:03:44Z", "author": {"login": "tristaZero"}, "path": "shardingsphere-sql-parser/shardingsphere-sql-parser-dialect/shardingsphere-sql-parser-mysql/src/main/java/org/apache/shardingsphere/sql/parser/mysql/visitor/impl/MySQLDDLVisitor.java", "diffHunk": "@@ -166,7 +166,7 @@ public ASTNode visitRenameTableSpecification(final RenameTableSpecificationConte\n     @SuppressWarnings(\"unchecked\")\n     @Override\n     public ASTNode visitCreateTable(final CreateTableContext ctx) {\n-        CreateTableStatement result = new CreateTableStatement((SimpleTableSegment) visit(ctx.tableName()));\n+        CreateTableStatement result = new CreateTableStatement((SimpleTableSegment) visit(ctx.tableName()), null != ctx.notExistClause_().EXISTS());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f38ade6046c033e427790f31f349b94268473b76"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTM1ODg2NQ==", "bodyText": "PostgreSQL has the similar SQL as well.", "url": "https://github.com/apache/shardingsphere/pull/7340#discussion_r485358865", "createdAt": "2020-09-09T06:06:16Z", "author": {"login": "tristaZero"}, "path": "shardingsphere-sql-parser/shardingsphere-sql-parser-dialect/shardingsphere-sql-parser-postgresql/src/main/java/org/apache/shardingsphere/sql/parser/postgresql/visitor/impl/PostgreSQLDDLVisitor.java", "diffHunk": "@@ -96,7 +96,7 @@\n     @SuppressWarnings(\"unchecked\")\n     @Override\n     public ASTNode visitCreateTable(final CreateTableContext ctx) {\n-        CreateTableStatement result = new CreateTableStatement((SimpleTableSegment) visit(ctx.tableName()));\n+        CreateTableStatement result = new CreateTableStatement((SimpleTableSegment) visit(ctx.tableName()), false);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f38ade6046c033e427790f31f349b94268473b76"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ce071a15fab4a61315ea59a74236579b340d6140", "author": {"user": {"login": "xbkaishui", "name": null}}, "url": "https://github.com/apache/shardingsphere/commit/ce071a15fab4a61315ea59a74236579b340d6140", "committedDate": "2020-09-09T06:42:31Z", "message": "support pg create table not exists"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2ccda97436e47e6ff16c6803b355a6788cb4f74b", "author": {"user": {"login": "xbkaishui", "name": null}}, "url": "https://github.com/apache/shardingsphere/commit/2ccda97436e47e6ff16c6803b355a6788cb4f74b", "committedDate": "2020-09-09T06:48:43Z", "message": "merge master"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg0ODAwMjgz", "url": "https://github.com/apache/shardingsphere/pull/7340#pullrequestreview-484800283", "createdAt": "2020-09-09T08:56:19Z", "commit": {"oid": "2ccda97436e47e6ff16c6803b355a6788cb4f74b"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQwODo1NjoxOVrOHO9kBg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQwODo1NjoxOVrOHO9kBg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTQ1MDc1OA==", "bodyText": "Have you ever gave it a try? Since the following null != ctx.createDefinitionClause() uses the same method. Is there any difference?", "url": "https://github.com/apache/shardingsphere/pull/7340#discussion_r485450758", "createdAt": "2020-09-09T08:56:19Z", "author": {"login": "tristaZero"}, "path": "shardingsphere-sql-parser/shardingsphere-sql-parser-dialect/shardingsphere-sql-parser-mysql/src/main/java/org/apache/shardingsphere/sql/parser/mysql/visitor/impl/MySQLDDLVisitor.java", "diffHunk": "@@ -166,7 +166,7 @@ public ASTNode visitRenameTableSpecification(final RenameTableSpecificationConte\n     @SuppressWarnings(\"unchecked\")\n     @Override\n     public ASTNode visitCreateTable(final CreateTableContext ctx) {\n-        CreateTableStatement result = new CreateTableStatement((SimpleTableSegment) visit(ctx.tableName()));\n+        CreateTableStatement result = new CreateTableStatement((SimpleTableSegment) visit(ctx.tableName()), null != ctx.notExistClause_().EXISTS());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTM1ODAwMQ=="}, "originalCommit": {"oid": "f38ade6046c033e427790f31f349b94268473b76"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c8af6107880ccf6b332bf4b704de0e318230b46f", "author": {"user": {"login": "xbkaishui", "name": null}}, "url": "https://github.com/apache/shardingsphere/commit/c8af6107880ccf6b332bf4b704de0e318230b46f", "committedDate": "2020-09-10T03:50:49Z", "message": "Refactor, move ? from notExistClause_ and existClause_ to the position where they are used"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg1NzY0Njgx", "url": "https://github.com/apache/shardingsphere/pull/7340#pullrequestreview-485764681", "createdAt": "2020-09-10T09:46:25Z", "commit": {"oid": "c8af6107880ccf6b332bf4b704de0e318230b46f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4066, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}