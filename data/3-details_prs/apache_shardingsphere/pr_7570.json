{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkwOTQ2NjYw", "number": 7570, "title": "Optimize data consistency checker.", "bodyText": "Optimize data consistency checker.", "createdAt": "2020-09-22T13:37:49Z", "url": "https://github.com/apache/shardingsphere/pull/7570", "merged": true, "mergeCommit": {"oid": "ced0c780a6a9107db46d33f790e5cbc210efe942"}, "closed": true, "closedAt": "2020-09-24T07:58:33Z", "author": {"login": "Lucas-307"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdLX9ZkgH2gAyNDkwOTQ2NjYwOjI3YmU5YjA0MTFjYzU3ZGQ5NTMzOTYyNjg2MDkwMjk0ZmE3ZjEwZWY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdL8e1RgFqTQ5NTMxMTYxNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "27be9b0411cc57dd9533962686090294fa7f10ef", "author": {"user": null}, "url": "https://github.com/apache/shardingsphere/commit/27be9b0411cc57dd9533962686090294fa7f10ef", "committedDate": "2020-09-22T13:25:17Z", "message": "Optimize data consistency checker."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b3e2d59cc305d0bac62f47fe56a5a35bed8402c2", "author": {"user": null}, "url": "https://github.com/apache/shardingsphere/commit/b3e2d59cc305d0bac62f47fe56a5a35bed8402c2", "committedDate": "2020-09-22T13:50:46Z", "message": "Update javadoc."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c8887bc6bc9a0e9159aa145690638a352fef149f", "author": {"user": null}, "url": "https://github.com/apache/shardingsphere/commit/c8887bc6bc9a0e9159aa145690638a352fef149f", "committedDate": "2020-09-22T13:57:27Z", "message": "Update javadoc."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk0ODMyMjc5", "url": "https://github.com/apache/shardingsphere/pull/7570#pullrequestreview-494832279", "createdAt": "2020-09-23T16:19:22Z", "commit": {"oid": "c8887bc6bc9a0e9159aa145690638a352fef149f"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yM1QxNjoxOToyMlrOHW2c1g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yM1QxNjoyMDo0NlrOHW2gjw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzcyMjgzOA==", "bodyText": "Please do not name result if the method is void", "url": "https://github.com/apache/shardingsphere/pull/7570#discussion_r493722838", "createdAt": "2020-09-23T16:19:22Z", "author": {"login": "terrymanu"}, "path": "shardingsphere-scaling/shardingsphere-scaling-bootstrap/src/main/java/org/apache/shardingsphere/scaling/web/HttpServerHandler.java", "diffHunk": "@@ -122,8 +124,8 @@ private void stopJob(final ChannelHandlerContext context, final String requestBo\n     private void checkJob(final ChannelHandlerContext context, final String requestPath) {\n         int jobId = Integer.parseInt(requestPath.split(\"/\")[4]);\n         try {\n-            boolean success = SCALING_JOB_CONTROLLER.check(jobId);\n-            response(GSON.toJson(ResponseContentUtil.build(success)), context, HttpResponseStatus.OK);\n+            Map<String, DataConsistencyCheckResult> result = SCALING_JOB_CONTROLLER.check(jobId);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c8887bc6bc9a0e9159aa145690638a352fef149f"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzcyMzc5MQ==", "bodyText": "Can use RequiredArgsConstructor here", "url": "https://github.com/apache/shardingsphere/pull/7570#discussion_r493723791", "createdAt": "2020-09-23T16:20:46Z", "author": {"login": "terrymanu"}, "path": "shardingsphere-scaling/shardingsphere-scaling-core/src/main/java/org/apache/shardingsphere/scaling/core/datasource/DataSourceWrapper.java", "diffHunk": "@@ -17,11 +17,89 @@\n \n package org.apache.shardingsphere.scaling.core.datasource;\n \n+import lombok.AllArgsConstructor;\n+\n import javax.sql.DataSource;\n import java.io.Closeable;\n+import java.io.IOException;\n+import java.io.PrintWriter;\n+import java.sql.Connection;\n+import java.sql.SQLException;\n+import java.sql.SQLFeatureNotSupportedException;\n+import java.util.logging.Logger;\n \n /**\n  * Data source wrapper is for abstract standard jdbc and sharding jdbc.\n  */\n-public interface DataSourceWrapper extends DataSource, Closeable {\n+@AllArgsConstructor", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c8887bc6bc9a0e9159aa145690638a352fef149f"}, "originalPosition": 19}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d4cd5946f952b637de4d9ff88b5103cee967810a", "author": {"user": null}, "url": "https://github.com/apache/shardingsphere/commit/d4cd5946f952b637de4d9ff88b5103cee967810a", "committedDate": "2020-09-24T06:58:43Z", "message": "rename `result` and replace `AllArgsConstructor`"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk1MzExNjE3", "url": "https://github.com/apache/shardingsphere/pull/7570#pullrequestreview-495311617", "createdAt": "2020-09-24T07:58:23Z", "commit": {"oid": "d4cd5946f952b637de4d9ff88b5103cee967810a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3983, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}