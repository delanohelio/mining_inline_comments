{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkyODc4NDM5", "number": 7601, "title": "Support more java types for getObject", "bodyText": "Fixes #6209\nChanges proposed in this pull request:\n\nSupport getURL\nSupport getBigDecimal", "createdAt": "2020-09-25T07:02:03Z", "url": "https://github.com/apache/shardingsphere/pull/7601", "merged": true, "mergeCommit": {"oid": "8ecc928fe2e72edd8be9fb72e2deeced1d9ff29e"}, "closed": true, "closedAt": "2020-09-30T09:31:11Z", "author": {"login": "xbkaishui"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdLlwIsAH2gAyNDkyODc4NDM5OmRjY2I3ZTQ5MTQyY2Y4NWRiZTFjZGM0NjU1YzM5N2E4NjA0ZTU4ZmQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdN10wzgFqTQ5OTA5MDE1Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "dccb7e49142cf85dbe1cdc4655c397a8604e58fd", "author": {"user": {"login": "xbkaishui", "name": null}}, "url": "https://github.com/apache/shardingsphere/commit/dccb7e49142cf85dbe1cdc4655c397a8604e58fd", "committedDate": "2020-09-23T05:29:28Z", "message": "refactor change YamlRuleSchemaMetaData same with  RuleSchemaMetaData"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "539ba4095af1e26ff9433427f1846248909a7ec9", "author": {"user": {"login": "xbkaishui", "name": null}}, "url": "https://github.com/apache/shardingsphere/commit/539ba4095af1e26ff9433427f1846248909a7ec9", "committedDate": "2020-09-23T09:36:01Z", "message": "change for cr"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2a458b17a8a23cf8ce1c1231edecccd0fff64bc9", "author": {"user": {"login": "xbkaishui", "name": null}}, "url": "https://github.com/apache/shardingsphere/commit/2a458b17a8a23cf8ce1c1231edecccd0fff64bc9", "committedDate": "2020-09-24T00:09:50Z", "message": "add test of default constructor"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "948480d16c0f78e9557a0247ff51f3adaa39260f", "author": {"user": {"login": "xbkaishui", "name": null}}, "url": "https://github.com/apache/shardingsphere/commit/948480d16c0f78e9557a0247ff51f3adaa39260f", "committedDate": "2020-09-24T02:58:56Z", "message": "Merge branch 'master' into dev"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "290d10f89dea678a823cebd06db598f4469bbec9", "author": {"user": {"login": "xbkaishui", "name": null}}, "url": "https://github.com/apache/shardingsphere/commit/290d10f89dea678a823cebd06db598f4469bbec9", "committedDate": "2020-09-25T05:25:07Z", "message": "Merge branch 'master' into dev"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6ff762e366a792db7090d9c40826ff086f204503", "author": {"user": {"login": "xbkaishui", "name": null}}, "url": "https://github.com/apache/shardingsphere/commit/6ff762e366a792db7090d9c40826ff086f204503", "committedDate": "2020-09-25T06:56:22Z", "message": "Support url and bigdecimal data"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "58dd890467940edeeb3b6cf3410cd0d2095d3c1e", "author": {"user": {"login": "xbkaishui", "name": null}}, "url": "https://github.com/apache/shardingsphere/commit/58dd890467940edeeb3b6cf3410cd0d2095d3c1e", "committedDate": "2020-09-25T08:30:21Z", "message": "fix test fail"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk3MDUzODA0", "url": "https://github.com/apache/shardingsphere/pull/7601#pullrequestreview-497053804", "createdAt": "2020-09-27T05:54:46Z", "commit": {"oid": "58dd890467940edeeb3b6cf3410cd0d2095d3c1e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yN1QwNTo1NDo0NlrOHYk7yg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yN1QwNTo1NTo1N1rOHYk8NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTUzMzAwMg==", "bodyText": "add parameter to message", "url": "https://github.com/apache/shardingsphere/pull/7601#discussion_r495533002", "createdAt": "2020-09-27T05:54:46Z", "author": {"login": "kimmking"}, "path": "shardingsphere-jdbc/shardingsphere-jdbc-core/src/main/java/org/apache/shardingsphere/driver/jdbc/core/resultset/ResultSetUtil.java", "diffHunk": "@@ -77,6 +82,49 @@ public static Object convertValue(final Object value, final Class<?> convertType\n             return value;\n         }\n     }\n+    \n+    private static Object convertURL(final Object value) {\n+        String val = value.toString();\n+        try {\n+            return new URL(val);\n+        } catch (MalformedURLException mfe) {\n+            throw new ShardingSphereException(\"Unsupported Date type: URL\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "58dd890467940edeeb3b6cf3410cd0d2095d3c1e"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTUzMzAyNg==", "bodyText": "use ex", "url": "https://github.com/apache/shardingsphere/pull/7601#discussion_r495533026", "createdAt": "2020-09-27T05:54:54Z", "author": {"login": "kimmking"}, "path": "shardingsphere-jdbc/shardingsphere-jdbc-core/src/main/java/org/apache/shardingsphere/driver/jdbc/core/resultset/ResultSetUtil.java", "diffHunk": "@@ -77,6 +82,49 @@ public static Object convertValue(final Object value, final Class<?> convertType\n             return value;\n         }\n     }\n+    \n+    private static Object convertURL(final Object value) {\n+        String val = value.toString();\n+        try {\n+            return new URL(val);\n+        } catch (MalformedURLException mfe) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "58dd890467940edeeb3b6cf3410cd0d2095d3c1e"}, "originalPosition": 46}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTUzMzEwOQ==", "bodyText": "no need to round", "url": "https://github.com/apache/shardingsphere/pull/7601#discussion_r495533109", "createdAt": "2020-09-27T05:55:57Z", "author": {"login": "kimmking"}, "path": "shardingsphere-jdbc/shardingsphere-jdbc-core/src/main/java/org/apache/shardingsphere/driver/jdbc/core/resultset/ResultSetUtil.java", "diffHunk": "@@ -77,6 +82,49 @@ public static Object convertValue(final Object value, final Class<?> convertType\n             return value;\n         }\n     }\n+    \n+    private static Object convertURL(final Object value) {\n+        String val = value.toString();\n+        try {\n+            return new URL(val);\n+        } catch (MalformedURLException mfe) {\n+            throw new ShardingSphereException(\"Unsupported Date type: URL\");\n+        }\n+    }\n+    \n+    /**\n+     * Convert object to BigDecimal.\n+     *\n+     * @param value current db object\n+     * @param needScale need scale\n+     * @param scale scale size\n+     * @return big decimal\n+     */\n+    public static Object convertBigDecimalValue(final Object value, final boolean needScale, final int scale) {\n+        if (null == value) {\n+            return convertNullValue(BigDecimal.class);\n+        }\n+        if (value.getClass() == BigDecimal.class) {\n+            return adjustBigDecimalResult((BigDecimal) value, needScale, scale);\n+        }\n+        if (value instanceof Number || value instanceof String) {\n+            BigDecimal bigDecimal = new BigDecimal(value.toString());\n+            return adjustBigDecimalResult(bigDecimal, needScale, scale);\n+        }\n+        throw new ShardingSphereException(\"Unsupported Date type: BigDecimal value %s\", value);\n+    }\n+  \n+    private static BigDecimal adjustBigDecimalResult(final BigDecimal value, final boolean needScale, final int scale) {\n+        if (needScale) {\n+            try {\n+                return value.setScale(scale);\n+            } catch (ArithmeticException ex) {\n+                // try this if above fails", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "58dd890467940edeeb3b6cf3410cd0d2095d3c1e"}, "originalPosition": 78}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "89d16347aab43769f9db05fd0e1c78ff680bfdab", "author": {"user": {"login": "xbkaishui", "name": null}}, "url": "https://github.com/apache/shardingsphere/commit/89d16347aab43769f9db05fd0e1c78ff680bfdab", "committedDate": "2020-09-27T10:04:23Z", "message": "change as cr comment"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk4MzQyMjk3", "url": "https://github.com/apache/shardingsphere/pull/7601#pullrequestreview-498342297", "createdAt": "2020-09-29T10:48:21Z", "commit": {"oid": "89d16347aab43769f9db05fd0e1c78ff680bfdab"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQxMDo0ODoyMVrOHZnVgA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQxMDo0ODo1M1rOHZnWeg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjYyMDkyOA==", "bodyText": "remove comment", "url": "https://github.com/apache/shardingsphere/pull/7601#discussion_r496620928", "createdAt": "2020-09-29T10:48:21Z", "author": {"login": "tuohai666"}, "path": "shardingsphere-jdbc/shardingsphere-jdbc-core/src/main/java/org/apache/shardingsphere/driver/jdbc/core/resultset/ResultSetUtil.java", "diffHunk": "@@ -77,6 +82,49 @@ public static Object convertValue(final Object value, final Class<?> convertType\n             return value;\n         }\n     }\n+    \n+    private static Object convertURL(final Object value) {\n+        String val = value.toString();\n+        try {\n+            return new URL(val);\n+        } catch (MalformedURLException ex) {\n+            throw new ShardingSphereException(\"Unsupported Date type: URL value %s\", value);\n+        }\n+    }\n+    \n+    /**\n+     * Convert object to BigDecimal.\n+     *\n+     * @param value current db object\n+     * @param needScale need scale\n+     * @param scale scale size\n+     * @return big decimal\n+     */\n+    public static Object convertBigDecimalValue(final Object value, final boolean needScale, final int scale) {\n+        if (null == value) {\n+            return convertNullValue(BigDecimal.class);\n+        }\n+        if (value.getClass() == BigDecimal.class) {\n+            return adjustBigDecimalResult((BigDecimal) value, needScale, scale);\n+        }\n+        if (value instanceof Number || value instanceof String) {\n+            BigDecimal bigDecimal = new BigDecimal(value.toString());\n+            return adjustBigDecimalResult(bigDecimal, needScale, scale);\n+        }\n+        throw new ShardingSphereException(\"Unsupported Date type: BigDecimal value %s\", value);\n+    }\n+  \n+    private static BigDecimal adjustBigDecimalResult(final BigDecimal value, final boolean needScale, final int scale) {\n+        if (needScale) {\n+            try {\n+                return value.setScale(scale);\n+            } catch (ArithmeticException ex) {\n+                // try this if above fails", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "89d16347aab43769f9db05fd0e1c78ff680bfdab"}, "originalPosition": 78}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjYyMTE3OA==", "bodyText": "final", "url": "https://github.com/apache/shardingsphere/pull/7601#discussion_r496621178", "createdAt": "2020-09-29T10:48:53Z", "author": {"login": "tuohai666"}, "path": "shardingsphere-jdbc/shardingsphere-jdbc-core/src/main/java/org/apache/shardingsphere/driver/jdbc/core/resultset/ResultSetUtil.java", "diffHunk": "@@ -77,6 +82,49 @@ public static Object convertValue(final Object value, final Class<?> convertType\n             return value;\n         }\n     }\n+    \n+    private static Object convertURL(final Object value) {\n+        String val = value.toString();\n+        try {\n+            return new URL(val);\n+        } catch (MalformedURLException ex) {\n+            throw new ShardingSphereException(\"Unsupported Date type: URL value %s\", value);\n+        }\n+    }\n+    \n+    /**\n+     * Convert object to BigDecimal.\n+     *\n+     * @param value current db object\n+     * @param needScale need scale\n+     * @param scale scale size\n+     * @return big decimal\n+     */\n+    public static Object convertBigDecimalValue(final Object value, final boolean needScale, final int scale) {\n+        if (null == value) {\n+            return convertNullValue(BigDecimal.class);\n+        }\n+        if (value.getClass() == BigDecimal.class) {\n+            return adjustBigDecimalResult((BigDecimal) value, needScale, scale);\n+        }\n+        if (value instanceof Number || value instanceof String) {\n+            BigDecimal bigDecimal = new BigDecimal(value.toString());\n+            return adjustBigDecimalResult(bigDecimal, needScale, scale);\n+        }\n+        throw new ShardingSphereException(\"Unsupported Date type: BigDecimal value %s\", value);\n+    }\n+  \n+    private static BigDecimal adjustBigDecimalResult(final BigDecimal value, final boolean needScale, final int scale) {\n+        if (needScale) {\n+            try {\n+                return value.setScale(scale);\n+            } catch (ArithmeticException ex) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "89d16347aab43769f9db05fd0e1c78ff680bfdab"}, "originalPosition": 77}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "06d759618a631d54701ea4450155dce56f4ddcf2", "author": {"user": {"login": "xbkaishui", "name": null}}, "url": "https://github.com/apache/shardingsphere/commit/06d759618a631d54701ea4450155dce56f4ddcf2", "committedDate": "2020-09-29T15:04:03Z", "message": "change as suggestions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "90d04a39c4c305286c444fe6bec616c19e589d1a", "author": {"user": {"login": "xbkaishui", "name": null}}, "url": "https://github.com/apache/shardingsphere/commit/90d04a39c4c305286c444fe6bec616c19e589d1a", "committedDate": "2020-09-29T15:07:01Z", "message": "add final"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk5MDg4NTE1", "url": "https://github.com/apache/shardingsphere/pull/7601#pullrequestreview-499088515", "createdAt": "2020-09-30T05:12:09Z", "commit": {"oid": "90d04a39c4c305286c444fe6bec616c19e589d1a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk5MDkwMTUz", "url": "https://github.com/apache/shardingsphere/pull/7601#pullrequestreview-499090153", "createdAt": "2020-09-30T05:17:39Z", "commit": {"oid": "90d04a39c4c305286c444fe6bec616c19e589d1a"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQwNToxNzozOVrOHaNnug==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQwNToxNzozOVrOHaNnug==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzI0ODE4Ng==", "bodyText": "should be val instead of value.", "url": "https://github.com/apache/shardingsphere/pull/7601#discussion_r497248186", "createdAt": "2020-09-30T05:17:39Z", "author": {"login": "kimmking"}, "path": "shardingsphere-jdbc/shardingsphere-jdbc-core/src/main/java/org/apache/shardingsphere/driver/jdbc/core/resultset/ResultSetUtil.java", "diffHunk": "@@ -77,6 +82,48 @@ public static Object convertValue(final Object value, final Class<?> convertType\n             return value;\n         }\n     }\n+    \n+    private static Object convertURL(final Object value) {\n+        String val = value.toString();\n+        try {\n+            return new URL(val);\n+        } catch (final MalformedURLException ex) {\n+            throw new ShardingSphereException(\"Unsupported Date type: URL value %s\", value);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "90d04a39c4c305286c444fe6bec616c19e589d1a"}, "originalPosition": 47}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3999, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}