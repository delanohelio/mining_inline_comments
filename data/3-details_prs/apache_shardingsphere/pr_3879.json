{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzU5NDU5Nzk3", "number": 3879, "title": "fix proxy hang up while throwing a customize SQLException", "bodyText": "After proxy throw a customize SQLException, proxy will hang up with error packet since SQLSate is null", "createdAt": "2020-01-06T09:22:44Z", "url": "https://github.com/apache/shardingsphere/pull/3879", "merged": true, "mergeCommit": {"oid": "c69277e74fe66150f17bd729e7c32eceef32b30a"}, "closed": true, "closedAt": "2020-01-07T05:07:42Z", "author": {"login": "cherrylzhao"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb3olYmAH2gAyMzU5NDU5Nzk3Ojg4M2E1MTMyM2I1MDlmODI3Y2M1ZGQ2ZDE5MDNhYTFiMTk2YjFlZGU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb35mqdgFqTMzOTAzMjY4MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "883a51323b509f827cc5dd6d1903aa1b196b1ede", "author": {"user": {"login": "cherrylzhao", "name": "zhaojun"}}, "url": "https://github.com/apache/shardingsphere/commit/883a51323b509f827cc5dd6d1903aa1b196b1ede", "committedDate": "2020-01-06T09:17:48Z", "message": "fix proxy hang up while throwing a customize SQLException"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1d41ac4aeabd931bad47f1c0058080283075d5d0", "author": {"user": {"login": "cherrylzhao", "name": "zhaojun"}}, "url": "https://github.com/apache/shardingsphere/commit/1d41ac4aeabd931bad47f1c0058080283075d5d0", "committedDate": "2020-01-06T09:23:56Z", "message": "for checkstyle"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM4NjM5MTUy", "url": "https://github.com/apache/shardingsphere/pull/3879#pullrequestreview-338639152", "createdAt": "2020-01-06T13:24:47Z", "commit": {"oid": "1d41ac4aeabd931bad47f1c0058080283075d5d0"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wNlQxMzoyNDo0N1rOFadhXw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wNlQxMzoyNDo0N1rOFadhXw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzI5MDk3NQ==", "bodyText": "Please use a SQL State instead of empty string if we can find a suitable one.", "url": "https://github.com/apache/shardingsphere/pull/3879#discussion_r363290975", "createdAt": "2020-01-06T13:24:47Z", "author": {"login": "terrymanu"}, "path": "sharding-proxy/sharding-proxy-frontend/sharding-proxy-frontend-mysql/src/main/java/org/apache/shardingsphere/shardingproxy/frontend/mysql/MySQLErrPacketFactory.java", "diffHunk": "@@ -48,7 +48,7 @@\n     public static MySQLErrPacket newInstance(final int sequenceId, final Exception cause) {\n         if (cause instanceof SQLException) {\n             SQLException sqlException = (SQLException) cause;\n-            return new MySQLErrPacket(sequenceId, sqlException.getErrorCode(), sqlException.getSQLState(), sqlException.getMessage());\n+            return new MySQLErrPacket(sequenceId, sqlException.getErrorCode(), null != sqlException.getSQLState() ? sqlException.getSQLState() : \"\", sqlException.getMessage());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1d41ac4aeabd931bad47f1c0058080283075d5d0"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bb705ada6519c77579b21b84d97935e2edec4cf7", "author": {"user": {"login": "cherrylzhao", "name": "zhaojun"}}, "url": "https://github.com/apache/shardingsphere/commit/bb705ada6519c77579b21b84d97935e2edec4cf7", "committedDate": "2020-01-07T02:44:55Z", "message": "add MySQLServerErrorCode.ER_INTERNAL_ERROR"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM5MDA2Njc0", "url": "https://github.com/apache/shardingsphere/pull/3879#pullrequestreview-339006674", "createdAt": "2020-01-07T02:48:46Z", "commit": {"oid": "bb705ada6519c77579b21b84d97935e2edec4cf7"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM5MDMyNjgx", "url": "https://github.com/apache/shardingsphere/pull/3879#pullrequestreview-339032681", "createdAt": "2020-01-07T05:07:35Z", "commit": {"oid": "bb705ada6519c77579b21b84d97935e2edec4cf7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4218, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}