{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg5NjE5OTgz", "number": 4789, "title": "ref 4671", "bodyText": "ref #4671 .\nChanges proposed in this pull request:\n\nfix mysql ColumnDefinitionSegment,change type of dataType from String to DataTypeSegment", "createdAt": "2020-03-17T04:41:55Z", "url": "https://github.com/apache/shardingsphere/pull/4789", "merged": true, "mergeCommit": {"oid": "f8d4ad02d849c69f3d78b5f773aeb08cd5acb5ad"}, "closed": true, "closedAt": "2020-03-21T01:50:34Z", "author": {"login": "jingshanglu"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcObIy-AH2gAyMzg5NjE5OTgzOjg3NTJmNjc3ZjU1YjQ4ZmY1MTkwNTQ5MjMzMzFlODRjZDM4MWE5Yjc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcPrIvugFqTM3ODg4MTk5Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "8752f677f55b48ff519054923331e84cd381a9b7", "author": {"user": null}, "url": "https://github.com/apache/shardingsphere/commit/8752f677f55b48ff519054923331e84cd381a9b7", "committedDate": "2020-03-17T04:38:04Z", "message": "fix mysql ColumnDefinitionSegment,change type of dataType from String to DataTypeSegment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fca2919095f83d4b27461d5567a52ad873be4dfb", "author": {"user": null}, "url": "https://github.com/apache/shardingsphere/commit/fca2919095f83d4b27461d5567a52ad873be4dfb", "committedDate": "2020-03-18T15:14:01Z", "message": "Filter out some tests for h2"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8901cc8852ebba0b420da0813ec835e071fb9f7f", "author": {"user": null}, "url": "https://github.com/apache/shardingsphere/commit/8901cc8852ebba0b420da0813ec835e071fb9f7f", "committedDate": "2020-03-19T10:39:23Z", "message": " go back"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4MjE0MTMw", "url": "https://github.com/apache/shardingsphere/pull/4789#pullrequestreview-378214130", "createdAt": "2020-03-20T03:14:12Z", "commit": {"oid": "8901cc8852ebba0b420da0813ec835e071fb9f7f"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQwMzoxNDoxMlrOF5Gqgg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQwMzoyMzoxNlrOF5Gwog==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTQyMjMzOA==", "bodyText": "Please remove them.", "url": "https://github.com/apache/shardingsphere/pull/4789#discussion_r395422338", "createdAt": "2020-03-20T03:14:12Z", "author": {"login": "tristaZero"}, "path": "shardingsphere-sql-parser/shardingsphere-sql-parser-test/src/test/java/org/apache/shardingsphere/sql/parser/integrate/engine/SQLParserParameterizedTest.java", "diffHunk": "@@ -140,6 +140,9 @@ private static boolean isPlaceholderWithoutParameter(final Object[] sqlTestParam\n     \n     @Test\n     public void assertSupportedSQL() {\n+        if (\"select_sub_query_with_table\".equals(sqlCaseId)) {\n+            System.out.println(\"adfasf\");\n+        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8901cc8852ebba0b420da0813ec835e071fb9f7f"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTQyMjYyOA==", "bodyText": "Hi, why did you want to limit to those databases?", "url": "https://github.com/apache/shardingsphere/pull/4789#discussion_r395422628", "createdAt": "2020-03-20T03:16:06Z", "author": {"login": "tristaZero"}, "path": "sharding-sql-test/src/main/resources/sql/supported/ddl/truncate.xml", "diffHunk": "@@ -17,7 +17,7 @@\n   -->\n \n <sql-cases>\n-    <sql-case id=\"truncate_table\" value=\"TRUNCATE TABLE t_log\" />\n+    <sql-case id=\"truncate_table\" value=\"TRUNCATE TABLE t_log\" db-types=\"MySQL,Oracle,PostgreSQL\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8901cc8852ebba0b420da0813ec835e071fb9f7f"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTQyMzkwNg==", "bodyText": "Consider the samples of length may be (1) or (2, 1), I suggest the members of DataTypeLengthSegment  to be,\n private int startIndex;\n\n     private int stopIndex;\n\n     private int firstNumber;\n \n     private int secondNumber;\n\n     public Optional<int> getSecondNumber(){}", "url": "https://github.com/apache/shardingsphere/pull/4789#discussion_r395423906", "createdAt": "2020-03-20T03:23:16Z", "author": {"login": "tristaZero"}, "path": "shardingsphere-sql-parser/shardingsphere-sql-parser-statement/src/main/java/org/apache/shardingsphere/sql/parser/sql/segment/generic/DataTypeLengthSegment.java", "diffHunk": "@@ -0,0 +1,37 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.apache.shardingsphere.sql.parser.sql.segment.generic;\n+\n+import lombok.Getter;\n+import lombok.Setter;\n+import org.apache.shardingsphere.sql.parser.sql.segment.SQLSegment;\n+\n+import java.util.LinkedList;\n+\n+@Getter\n+@Setter\n+public final class DataTypeLengthSegment implements SQLSegment {\n+    \n+    private int startIndex;\n+    \n+    private int stopIndex;\n+    \n+    private int length;\n+    \n+    private LinkedList<Integer> lengthPair;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8901cc8852ebba0b420da0813ec835e071fb9f7f"}, "originalPosition": 36}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7ab581978b3583a63eb9c71c4fbf5e9093bef25a", "author": {"user": null}, "url": "https://github.com/apache/shardingsphere/commit/7ab581978b3583a63eb9c71c4fbf5e9093bef25a", "committedDate": "2020-03-20T06:30:41Z", "message": "fix"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4MzM3MzY2", "url": "https://github.com/apache/shardingsphere/pull/4789#pullrequestreview-378337366", "createdAt": "2020-03-20T09:37:21Z", "commit": {"oid": "7ab581978b3583a63eb9c71c4fbf5e9093bef25a"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQwOTozNzoyMlrOF5M4Yw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQwOTozNzoyMlrOF5M4Yw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTUyNDE5NQ==", "bodyText": "As I do not think firstNumber and secondNumber are proper names, i dug into many doc, and found firstNumber is supposed to be precision; On the other hand, secondNumber means scale[1]. Can you give them other expressive names?\n[1] https://dev.mysql.com/doc/refman/5.7/en/precision-math-decimal-characteristics.html", "url": "https://github.com/apache/shardingsphere/pull/4789#discussion_r395524195", "createdAt": "2020-03-20T09:37:22Z", "author": {"login": "tristaZero"}, "path": "shardingsphere-sql-parser/shardingsphere-sql-parser-statement/src/main/java/org/apache/shardingsphere/sql/parser/sql/segment/generic/DataTypeLengthSegment.java", "diffHunk": "@@ -0,0 +1,45 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.apache.shardingsphere.sql.parser.sql.segment.generic;\n+\n+import lombok.Getter;\n+import lombok.Setter;\n+import org.apache.shardingsphere.sql.parser.sql.segment.SQLSegment;\n+\n+import java.util.Optional;\n+\n+@Getter\n+@Setter\n+public final class DataTypeLengthSegment implements SQLSegment {\n+    \n+    private int startIndex;\n+    \n+    private int stopIndex;\n+    \n+    private int firstNumber;\n+    \n+    private int secondNumber;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7ab581978b3583a63eb9c71c4fbf5e9093bef25a"}, "originalPosition": 36}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a9abadb6bd3bece67e6c95bf8be23cfca3bc4dd0", "author": {"user": null}, "url": "https://github.com/apache/shardingsphere/commit/a9abadb6bd3bece67e6c95bf8be23cfca3bc4dd0", "committedDate": "2020-03-20T10:17:14Z", "message": "change attr name of DataTypeLength from firstNumber secondNumber to precision scale"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4Mzk5MDg2", "url": "https://github.com/apache/shardingsphere/pull/4789#pullrequestreview-378399086", "createdAt": "2020-03-20T11:17:30Z", "commit": {"oid": "a9abadb6bd3bece67e6c95bf8be23cfca3bc4dd0"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxMToxNzozMFrOF5PzFQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxMToxNzozMFrOF5PzFQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTU3MTk4OQ==", "bodyText": "Hi You should reverse those changes, for spaces is needed.", "url": "https://github.com/apache/shardingsphere/pull/4789#discussion_r395571989", "createdAt": "2020-03-20T11:17:30Z", "author": {"login": "tristaZero"}, "path": "sharding-sql-test/src/main/resources/sql/supported/ddl/create.xml", "diffHunk": "@@ -24,8 +24,8 @@\n     <sql-case id=\"create_global_temporary_table\" value=\"CREATE GLOBAL TEMPORARY TABLE t_temp_log(id int, status varchar(10))\" db-types=\"Oracle,PostgreSQL\" />\n     <sql-case id=\"create_local_temp_table\" value=\"CREATE LOCAL TEMP TABLE t_temp_log(id int, status varchar(10))\" db-types=\"PostgreSQL\" />\n     <sql-case id=\"create_unlogged_table\" value=\"CREATE UNLOGGED TABLE t_log(id int, status varchar(10))\" db-types=\"PostgreSQL\" />\n-    <sql-case id=\"create_index\" value=\"CREATE INDEX t_log_index ON t_log (id)\" />\n-    <sql-case id=\"create_unique_index\" value=\"CREATE UNIQUE INDEX t_log_index ON t_log (id)\" />\n+    <sql-case id=\"create_index\" value=\"CREATE INDEX t_log_index ON t_log (id)\"/>\n+    <sql-case id=\"create_unique_index\" value=\"CREATE UNIQUE INDEX t_log_index ON t_log (id)\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a9abadb6bd3bece67e6c95bf8be23cfca3bc4dd0"}, "originalPosition": 7}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b174bd7e840d27b35399ed99a623f6a2c37d2af0", "author": {"user": null}, "url": "https://github.com/apache/shardingsphere/commit/b174bd7e840d27b35399ed99a623f6a2c37d2af0", "committedDate": "2020-03-20T13:05:07Z", "message": "revert testcase"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "84b7d1d2ab6fc868330934ff026d4d29db50481d", "author": {"user": null}, "url": "https://github.com/apache/shardingsphere/commit/84b7d1d2ab6fc868330934ff026d4d29db50481d", "committedDate": "2020-03-20T13:07:54Z", "message": "revert testcase"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4ODgxOTky", "url": "https://github.com/apache/shardingsphere/pull/4789#pullrequestreview-378881992", "createdAt": "2020-03-21T01:50:25Z", "commit": {"oid": "84b7d1d2ab6fc868330934ff026d4d29db50481d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3782, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}