{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM2NDI5NTQy", "number": 8575, "title": "add doc for sql format", "bodyText": "", "createdAt": "2020-12-11T02:42:56Z", "url": "https://github.com/apache/shardingsphere/pull/8575", "merged": true, "mergeCommit": {"oid": "89fba4b93b6c7731f238ec331334fb156785e37e"}, "closed": true, "closedAt": "2020-12-15T03:14:49Z", "author": {"login": "jingshanglu"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdk-snGgH2gAyNTM2NDI5NTQyOmE2OGQ1ZTY1OTBmOTg3NGNhZmU0ZDJkNzVlNDVjNzk4MmViN2M1YmU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdmRkadgFqTU1MjA3MzY4OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "a68d5e6590f9874cafe4d2d75e45c7982eb7c5be", "author": {"user": {"login": "jingshanglu", "name": "JingShang Lu"}}, "url": "https://github.com/apache/shardingsphere/commit/a68d5e6590f9874cafe4d2d75e45c7982eb7c5be", "committedDate": "2020-12-11T02:41:21Z", "message": "add doc for sql format"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ5NzgxNjMy", "url": "https://github.com/apache/shardingsphere/pull/8575#pullrequestreview-549781632", "createdAt": "2020-12-11T03:45:00Z", "commit": {"oid": "a68d5e6590f9874cafe4d2d75e45c7982eb7c5be"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQwMzo0NTowMFrOIDn0HA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQwMzo0NTowMFrOIDn0HA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDY2ODk1Ng==", "bodyText": "Could you put these SQL cases and their formatted result into a table? For example, one row of a table contains one SQL column and its formatted output in another column. Therefore users can get a quick comparison, I guess.", "url": "https://github.com/apache/shardingsphere/pull/8575#discussion_r540668956", "createdAt": "2020-12-11T03:45:00Z", "author": {"login": "tristaZero"}, "path": "docs/document/content/features/sharding/principle/parse.cn.md", "diffHunk": "@@ -103,3 +103,108 @@ SQLVisitorEngine sqlVisitorEngine = new SQLVisitorEngine(databaseType, \"STATEMEN\n SQLStatement sqlStatement = sqlVisitorEngine.visit(tree);\n \n ```\n+\n+- SQL\u683c\u5f0f\u5316\n+\n+```\n+/**\n+ * databaseType type:String \u53ef\u80fd\u503c MySQL\n+ * useCache type:boolean \u662f\u5426\u4f7f\u7528\u7f13\u5b58\n+ * @return String\n+ */\n+ParseTree tree = new SQLParserEngine(databaseType).parse(sql, useCache); \n+SQLVisitorEngine sqlVisitorEngine = new SQLVisitorEngine(databaseType, \"FORMAT\");\n+String formatedSql = sqlVisitorEngine.visit(tree);\n+\n+//\u4f8b\u5b50\n+sql1 : select a+1 as b, name n from table1 join table2 where id=1 and name='lu';\n+sql2 : select id, name, age, sex, ss, yy from table1 where id=1;\n+sql3 : select id, name, age, count(*) as n, (select id, name, age, sex from table2 where id=2) as sid, yyyy from table1 where id=1;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a68d5e6590f9874cafe4d2d75e45c7982eb7c5be"}, "originalPosition": 20}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "37efbbb268d7677502267b091b9cd24bd6866161", "author": {"user": {"login": "jingshanglu", "name": "JingShang Lu"}}, "url": "https://github.com/apache/shardingsphere/commit/37efbbb268d7677502267b091b9cd24bd6866161", "committedDate": "2020-12-11T07:03:53Z", "message": "fix"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUyMDczNjg5", "url": "https://github.com/apache/shardingsphere/pull/8575#pullrequestreview-552073689", "createdAt": "2020-12-15T03:14:31Z", "commit": {"oid": "37efbbb268d7677502267b091b9cd24bd6866161"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4308, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}