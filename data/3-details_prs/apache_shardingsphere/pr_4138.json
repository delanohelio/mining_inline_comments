{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY5OTc1MDI3", "number": 4138, "title": "add drop_role and set_default_role antlr visitor for MySQL DCLStatement", "bodyText": "Changes proposed in this pull request:\n\nadd drop_role and set_default_role.xml\nadd setDefaultRole role in MySQLStatement.g4", "createdAt": "2020-02-02T05:44:06Z", "url": "https://github.com/apache/shardingsphere/pull/4138", "merged": true, "mergeCommit": {"oid": "bd13975664d913a6c9158c42d9d6f79b2426111e"}, "closed": true, "closedAt": "2020-02-04T05:36:03Z", "author": {"login": "beijing-penguin"}, "timelineItems": {"totalCount": 25, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb8s-WvgH2gAyMzY5OTc1MDI3OmFjYzQxZTI5MmJkMWRiNGMxNmRjZmRlMDQ1OTJkMDk0NTM2Nzc4MjY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcA6yjyAFqTM1MjczMzIwMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "acc41e292bd1db4c16dcfde04592d09453677826", "author": {"user": {"login": "beijing-penguin", "name": "beijing-penguin"}}, "url": "https://github.com/apache/shardingsphere/commit/acc41e292bd1db4c16dcfde04592d09453677826", "committedDate": "2020-01-22T03:14:19Z", "message": "Overload ExecutorEngine interface\nload() method add a serial parameter\nuse maxConnectionsSizePerQuery to control init load speed"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0aec2564e72664ac72ecdae78d251c10e389f403", "author": {"user": {"login": "beijing-penguin", "name": "beijing-penguin"}}, "url": "https://github.com/apache/shardingsphere/commit/0aec2564e72664ac72ecdae78d251c10e389f403", "committedDate": "2020-01-22T06:47:27Z", "message": "code error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "951cff1466443d175d884c05da7aed7152343fd4", "author": {"user": {"login": "beijing-penguin", "name": "beijing-penguin"}}, "url": "https://github.com/apache/shardingsphere/commit/951cff1466443d175d884c05da7aed7152343fd4", "committedDate": "2020-01-22T08:51:09Z", "message": "methods reuse\ncode clear up"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c9e68741b2081e895d99106b78b61402e438ea06", "author": {"user": {"login": "beijing-penguin", "name": "beijing-penguin"}}, "url": "https://github.com/apache/shardingsphere/commit/c9e68741b2081e895d99106b78b61402e438ea06", "committedDate": "2020-01-22T08:51:36Z", "message": "code clear up"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "16d7247a4202ddeaf30383a4e6127339710a6850", "author": {"user": {"login": "beijing-penguin", "name": "beijing-penguin"}}, "url": "https://github.com/apache/shardingsphere/commit/16d7247a4202ddeaf30383a4e6127339710a6850", "committedDate": "2020-01-23T13:35:41Z", "message": "remove no neccessary code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "34984f98abebcbb5609489e13a1c06024a44cc64", "author": {"user": {"login": "beijing-penguin", "name": "beijing-penguin"}}, "url": "https://github.com/apache/shardingsphere/commit/34984f98abebcbb5609489e13a1c06024a44cc64", "committedDate": "2020-01-27T05:43:51Z", "message": "Merge remote-tracking branch 'ss_remote/dev' into dev"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ed4fdb104d91eb15aedf17003c448f875063425b", "author": {"user": {"login": "beijing-penguin", "name": "beijing-penguin"}}, "url": "https://github.com/apache/shardingsphere/commit/ed4fdb104d91eb15aedf17003c448f875063425b", "committedDate": "2020-01-27T06:29:09Z", "message": "code style clean"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "52482679cf7febdb9b8bc18c35696ce68bb60813", "author": {"user": {"login": "beijing-penguin", "name": "beijing-penguin"}}, "url": "https://github.com/apache/shardingsphere/commit/52482679cf7febdb9b8bc18c35696ce68bb60813", "committedDate": "2020-01-27T06:42:25Z", "message": "code style clean"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "da78ff661b675f97b31d5f400095c4337340ef92", "author": {"user": {"login": "beijing-penguin", "name": "beijing-penguin"}}, "url": "https://github.com/apache/shardingsphere/commit/da78ff661b675f97b31d5f400095c4337340ef92", "committedDate": "2020-01-28T09:14:39Z", "message": "Merge remote-tracking branch 'ss_remote/dev' into dev\n\nConflicts:\n\tsharding-core/sharding-core-execute/src/main/java/org/apache/shardingsphere/sharding/execute/metadata/loader/ShardingTableMetaDataLoader.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "18ef12313869ad47906add8a1ad718360dfda3c5", "author": {"user": {"login": "beijing-penguin", "name": "beijing-penguin"}}, "url": "https://github.com/apache/shardingsphere/commit/18ef12313869ad47906add8a1ad718360dfda3c5", "committedDate": "2020-01-29T16:27:57Z", "message": "Merge remote-tracking branch 'ss_remote/dev' into dev"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6f8de4098f2c20dec1b2db88dbba4db996cb2cd9", "author": {"user": {"login": "beijing-penguin", "name": "beijing-penguin"}}, "url": "https://github.com/apache/shardingsphere/commit/6f8de4098f2c20dec1b2db88dbba4db996cb2cd9", "committedDate": "2020-01-31T07:51:58Z", "message": "Merge remote-tracking branch 'ss_remote/master' into dev"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "09dded5df6986e34bdeec44d8840080a845aa730", "author": {"user": {"login": "beijing-penguin", "name": "beijing-penguin"}}, "url": "https://github.com/apache/shardingsphere/commit/09dded5df6986e34bdeec44d8840080a845aa730", "committedDate": "2020-02-01T13:24:33Z", "message": "Merge branch 'ss_remote_master' into dev"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "54e23202e98258711c4ed00e48e1c2c9868aed1c", "author": {"user": {"login": "beijing-penguin", "name": "beijing-penguin"}}, "url": "https://github.com/apache/shardingsphere/commit/54e23202e98258711c4ed00e48e1c2c9868aed1c", "committedDate": "2020-02-02T05:32:05Z", "message": "add drop_role and set_default_role.\nupdate role file MySQLStatement."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b0b05b63cb97c985991fbd3c65aaeebc7bb8ef46", "author": {"user": {"login": "beijing-penguin", "name": "beijing-penguin"}}, "url": "https://github.com/apache/shardingsphere/commit/b0b05b63cb97c985991fbd3c65aaeebc7bb8ef46", "committedDate": "2020-02-02T05:37:30Z", "message": "Merge remote-tracking branch 'ss_remote/master' into dev\n\nConflicts:\n\tshardingsphere-sql-parser/shardingsphere-sql-parser-mysql/src/main/java/org/apache/shardingsphere/sql/parser/MySQLVisitor.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "74f223fe2b614edd4160907bf28fe20657b918a9", "author": {"user": {"login": "beijing-penguin", "name": "beijing-penguin"}}, "url": "https://github.com/apache/shardingsphere/commit/74f223fe2b614edd4160907bf28fe20657b918a9", "committedDate": "2020-02-02T05:42:05Z", "message": "file unix format change"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "df58a66628003e3c10a2d86506c8f78a1e4be5ca", "author": {"user": {"login": "beijing-penguin", "name": "beijing-penguin"}}, "url": "https://github.com/apache/shardingsphere/commit/df58a66628003e3c10a2d86506c8f78a1e4be5ca", "committedDate": "2020-02-02T05:44:33Z", "message": "code style clean"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b2e28ff44d4cc58f1135d3439f74b35accc85198", "author": {"user": {"login": "beijing-penguin", "name": "beijing-penguin"}}, "url": "https://github.com/apache/shardingsphere/commit/b2e28ff44d4cc58f1135d3439f74b35accc85198", "committedDate": "2020-02-02T06:47:44Z", "message": "code clean"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUxOTIzNzQ1", "url": "https://github.com/apache/shardingsphere/pull/4138#pullrequestreview-351923745", "createdAt": "2020-02-02T07:32:11Z", "commit": {"oid": "b2e28ff44d4cc58f1135d3439f74b35accc85198"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wMlQwNzozMjoxMlrOFkggEQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wMlQwNzozMzozMFrOFkggRQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzgyNTU1Mw==", "bodyText": "Is it necessary to add? I could find this one in META-INF/parsing-rule-definition/mysql/sql-statement-rule-definition.xml", "url": "https://github.com/apache/shardingsphere/pull/4138#discussion_r373825553", "createdAt": "2020-02-02T07:32:12Z", "author": {"login": "tristaZero"}, "path": "shardingsphere-sql-parser/shardingsphere-sql-parser-mysql/src/main/java/org/apache/shardingsphere/sql/parser/MySQLVisitor.java", "diffHunk": "@@ -249,7 +250,17 @@ public ASTNode visitShowLike(final ShowLikeContext ctx) {\n     public ASTNode visitCreateUser(final CreateUserContext ctx) {\n         return new DCLStatement();\n     }\n-\n+    \n+    @Override\n+    public ASTNode visitDropRole(DropRoleContext ctx) {\n+        return new DCLStatement();\n+    }\n+    \n+    @Override\n+    public ASTNode visitSetDefaultRole(SetDefaultRoleContext ctx) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b2e28ff44d4cc58f1135d3439f74b35accc85198"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzgyNTYwNQ==", "bodyText": "Which rule g4 file does it exist?", "url": "https://github.com/apache/shardingsphere/pull/4138#discussion_r373825605", "createdAt": "2020-02-02T07:33:30Z", "author": {"login": "tristaZero"}, "path": "shardingsphere-sql-parser/shardingsphere-sql-parser-mysql/src/main/antlr4/org/apache/shardingsphere/sql/parser/autogen/MySQLStatement.g4", "diffHunk": "@@ -45,6 +45,7 @@ execute\n     | renameUser\n     | createRole\n     | dropRole\n+    | setDefaultRole", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b2e28ff44d4cc58f1135d3439f74b35accc85198"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUxOTI0NjIz", "url": "https://github.com/apache/shardingsphere/pull/4138#pullrequestreview-351924623", "createdAt": "2020-02-02T07:52:04Z", "commit": {"oid": "b2e28ff44d4cc58f1135d3439f74b35accc85198"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wMlQwNzo1MjowNFrOFkgj5g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wMlQwNzo1MzozOVrOFkgkPQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzgyNjUzNA==", "bodyText": "Please don't use * for import. Check the code style.", "url": "https://github.com/apache/shardingsphere/pull/4138#discussion_r373826534", "createdAt": "2020-02-02T07:52:04Z", "author": {"login": "SteNicholas"}, "path": "shardingsphere-sql-parser/shardingsphere-sql-parser-mysql/src/main/java/org/apache/shardingsphere/sql/parser/MySQLVisitor.java", "diffHunk": "@@ -26,6 +26,7 @@\n import org.antlr.v4.runtime.tree.TerminalNode;\n import org.apache.shardingsphere.sql.parser.api.SQLVisitor;\n import org.apache.shardingsphere.sql.parser.autogen.MySQLStatementBaseVisitor;\n+import org.apache.shardingsphere.sql.parser.autogen.MySQLStatementParser.*;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b2e28ff44d4cc58f1135d3439f74b35accc85198"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzgyNjYwNw==", "bodyText": "Should this use drop-role not common\uff1f", "url": "https://github.com/apache/shardingsphere/pull/4138#discussion_r373826607", "createdAt": "2020-02-02T07:53:20Z", "author": {"login": "SteNicholas"}, "path": "shardingsphere-sql-parser/shardingsphere-sql-parser-test/src/test/resources/visitor/dcl/drop_role.xml", "diffHunk": "@@ -0,0 +1,23 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+  ~ Licensed to the Apache Software Foundation (ASF) under one or more\n+  ~ contributor license agreements.  See the NOTICE file distributed with\n+  ~ this work for additional information regarding copyright ownership.\n+  ~ The ASF licenses this file to You under the Apache License, Version 2.0\n+  ~ (the \"License\"); you may not use this file except in compliance with\n+  ~ the License.  You may obtain a copy of the License at\n+  ~\n+  ~     http://www.apache.org/licenses/LICENSE-2.0\n+  ~\n+  ~ Unless required by applicable law or agreed to in writing, software\n+  ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n+  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+  ~ See the License for the specific language governing permissions and\n+  ~ limitations under the License.\n+  -->\n+\n+<sql-parser-test-cases>\n+    <common sql-case-id=\"drop_role\" />", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b2e28ff44d4cc58f1135d3439f74b35accc85198"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzgyNjYyMQ==", "bodyText": "Similar to above.", "url": "https://github.com/apache/shardingsphere/pull/4138#discussion_r373826621", "createdAt": "2020-02-02T07:53:39Z", "author": {"login": "SteNicholas"}, "path": "shardingsphere-sql-parser/shardingsphere-sql-parser-test/src/test/resources/visitor/dcl/set_default_role.xml", "diffHunk": "@@ -0,0 +1,24 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+  ~ Licensed to the Apache Software Foundation (ASF) under one or more\n+  ~ contributor license agreements.  See the NOTICE file distributed with\n+  ~ this work for additional information regarding copyright ownership.\n+  ~ The ASF licenses this file to You under the Apache License, Version 2.0\n+  ~ (the \"License\"); you may not use this file except in compliance with\n+  ~ the License.  You may obtain a copy of the License at\n+  ~\n+  ~     http://www.apache.org/licenses/LICENSE-2.0\n+  ~\n+  ~ Unless required by applicable law or agreed to in writing, software\n+  ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n+  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+  ~ See the License for the specific language governing permissions and\n+  ~ limitations under the License.\n+  -->\n+\n+<sql-parser-test-cases>\n+    <common sql-case-id=\"set_none_role\" />", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b2e28ff44d4cc58f1135d3439f74b35accc85198"}, "originalPosition": 20}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7d609460bfeb6dbaf25b23c21bde411db1078f5f", "author": {"user": {"login": "beijing-penguin", "name": "beijing-penguin"}}, "url": "https://github.com/apache/shardingsphere/commit/7d609460bfeb6dbaf25b23c21bde411db1078f5f", "committedDate": "2020-02-02T08:13:13Z", "message": "package import * remove fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "daf814958a7046e5baf33d7bb3746afc82b34bb1", "author": {"user": {"login": "beijing-penguin", "name": "beijing-penguin"}}, "url": "https://github.com/apache/shardingsphere/commit/daf814958a7046e5baf33d7bb3746afc82b34bb1", "committedDate": "2020-02-02T08:35:39Z", "message": "file name use '-' replace '_'"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6d08402f5b86257a171e4617aeb6202c93ea65e5", "author": {"user": {"login": "beijing-penguin", "name": "beijing-penguin"}}, "url": "https://github.com/apache/shardingsphere/commit/6d08402f5b86257a171e4617aeb6202c93ea65e5", "committedDate": "2020-02-03T06:08:08Z", "message": "add setDefaultRole sql-statement-rule"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6a69a16955addba8761fa5a07a420a7ac9052bf8", "author": {"user": {"login": "beijing-penguin", "name": "beijing-penguin"}}, "url": "https://github.com/apache/shardingsphere/commit/6a69a16955addba8761fa5a07a420a7ac9052bf8", "committedDate": "2020-02-03T07:00:38Z", "message": "Merge remote-tracking branch 'ss_remote/master' into dev\n\nConflicts:\n\tshardingsphere-sql-parser/shardingsphere-sql-parser-mysql/src/main/java/org/apache/shardingsphere/sql/parser/MySQLVisitor.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c38114f0f2bd933731b5db1f393262745f203d04", "author": {"user": {"login": "beijing-penguin", "name": "beijing-penguin"}}, "url": "https://github.com/apache/shardingsphere/commit/c38114f0f2bd933731b5db1f393262745f203d04", "committedDate": "2020-02-03T12:03:38Z", "message": "adapt code style"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUyNzMzMjAy", "url": "https://github.com/apache/shardingsphere/pull/4138#pullrequestreview-352733202", "createdAt": "2020-02-04T05:35:48Z", "commit": {"oid": "c38114f0f2bd933731b5db1f393262745f203d04"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4179, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}