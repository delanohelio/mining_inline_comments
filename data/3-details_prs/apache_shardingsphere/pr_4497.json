{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgwNzExMjQ3", "number": 4497, "title": "update example orchestration to 5.x", "bodyText": "Fixes #4435 .", "createdAt": "2020-02-27T08:49:06Z", "url": "https://github.com/apache/shardingsphere/pull/4497", "merged": true, "mergeCommit": {"oid": "488284cdcaa2d7b3f1bcc2b644ed25f226174b18"}, "closed": true, "closedAt": "2020-03-01T09:18:17Z", "author": {"login": "geomonlin"}, "timelineItems": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcIZSvDAH2gAyMzgwNzExMjQ3OjI1YjJlNmVjNDJjNzM3MWU0ZDYxNDI2YmM0OGZmNmNiZjQyYmVhOGI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcJVjTXAFqTM2Njg0NTQzNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "25b2e6ec42c7371e4d61426bc48ff6cbf42bea8b", "author": {"user": {"login": "geomonlin", "name": "linzesi"}}, "url": "https://github.com/apache/shardingsphere/commit/25b2e6ec42c7371e4d61426bc48ff6cbf42bea8b", "committedDate": "2020-02-27T11:05:34Z", "message": "update example orchestration to 5.x"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6e0c13bcdbb1ded052036ff5fe04ff7ced710dce", "author": {"user": {"login": "geomonlin", "name": "linzesi"}}, "url": "https://github.com/apache/shardingsphere/commit/6e0c13bcdbb1ded052036ff5fe04ff7ced710dce", "committedDate": "2020-02-27T11:05:34Z", "message": "update example-sharding-jdbc orchestration to 5.x"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c300134b27b9a5297493f53db3583dedc4e8a20b", "author": {"user": {"login": "geomonlin", "name": "linzesi"}}, "url": "https://github.com/apache/shardingsphere/commit/c300134b27b9a5297493f53db3583dedc4e8a20b", "committedDate": "2020-02-27T13:38:55Z", "message": "Modify the reference path of the imported class"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "69c68e631b88a840a86070609aa17074eed863cd", "author": {"user": {"login": "geomonlin", "name": "linzesi"}}, "url": "https://github.com/apache/shardingsphere/commit/69c68e631b88a840a86070609aa17074eed863cd", "committedDate": "2020-02-27T08:10:24Z", "message": "update example-sharding-jdbc orchestration to 5.x"}, "afterCommit": {"oid": "c300134b27b9a5297493f53db3583dedc4e8a20b", "author": {"user": {"login": "geomonlin", "name": "linzesi"}}, "url": "https://github.com/apache/shardingsphere/commit/c300134b27b9a5297493f53db3583dedc4e8a20b", "committedDate": "2020-02-27T13:38:55Z", "message": "Modify the reference path of the imported class"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "33182177010bf245694c6f2bf0ec5b271f8fe5c9", "author": {"user": {"login": "geomonlin", "name": "linzesi"}}, "url": "https://github.com/apache/shardingsphere/commit/33182177010bf245694c6f2bf0ec5b271f8fe5c9", "committedDate": "2020-02-28T02:00:42Z", "message": "update pom&overwrite config"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "14be07d273d2a94e0a59675a4a81b98eeca9f397", "author": {"user": {"login": "geomonlin", "name": "linzesi"}}, "url": "https://github.com/apache/shardingsphere/commit/14be07d273d2a94e0a59675a4a81b98eeca9f397", "committedDate": "2020-02-28T01:41:58Z", "message": "update pom&overwrite config"}, "afterCommit": {"oid": "33182177010bf245694c6f2bf0ec5b271f8fe5c9", "author": {"user": {"login": "geomonlin", "name": "linzesi"}}, "url": "https://github.com/apache/shardingsphere/commit/33182177010bf245694c6f2bf0ec5b271f8fe5c9", "committedDate": "2020-02-28T02:00:42Z", "message": "update pom&overwrite config"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2MTE4ODg5", "url": "https://github.com/apache/shardingsphere/pull/4497#pullrequestreview-366118889", "createdAt": "2020-02-28T01:56:18Z", "commit": {"oid": "c300134b27b9a5297493f53db3583dedc4e8a20b"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQwMTo1NjoxOFrOFvnSlQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQwMjoxMzoxMFrOFvniJQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTQ3MTEyNQ==", "bodyText": "I understand nacos's namespace is namespace's id, not namespace's name.", "url": "https://github.com/apache/shardingsphere/pull/4497#discussion_r385471125", "createdAt": "2020-02-28T01:56:18Z", "author": {"login": "dongzl"}, "path": "examples/sharding-jdbc-example/orchestration-example/orchestration-raw-jdbc-example/src/main/resources/META-INF/nacos/cloud/encrypt.yaml", "diffHunk": "@@ -1,10 +1,18 @@\n orchestration:\n-  name: demo_yaml_ds_encrypt\n-  overwrite: false\n-  registry:\n-    type: nacos\n+  demo_naocs_yaml_ds_encrypt:\n+    orchestrationType: config_center\n+    instanceType: nacos\n     serverLists: localhost:8848\n-    namespace:\n+    namespace: orchestration-yaml-demo", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c300134b27b9a5297493f53db3583dedc4e8a20b"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTQ3MTUwNA==", "bodyText": "The same to above.", "url": "https://github.com/apache/shardingsphere/pull/4497#discussion_r385471504", "createdAt": "2020-02-28T01:58:02Z", "author": {"login": "dongzl"}, "path": "examples/sharding-jdbc-example/orchestration-example/orchestration-raw-jdbc-example/src/main/resources/META-INF/nacos/local/encrypt.yaml", "diffHunk": "@@ -1,13 +1,21 @@\n orchestration:\n-  name: demo_yaml_ds_encrypt\n-  overwrite: true\n-  registry:\n-    type: nacos\n+  demo_nacos_yaml_ds_encrypt:\n+    orchestrationType: config_center\n+    instanceType: nacos\n     serverLists: localhost:8848\n-    namespace:\n+    namespace: orchestration-yaml-demo", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c300134b27b9a5297493f53db3583dedc4e8a20b"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTQ3MjYyNw==", "bodyText": "There should be a blank line.", "url": "https://github.com/apache/shardingsphere/pull/4497#discussion_r385472627", "createdAt": "2020-02-28T02:02:43Z", "author": {"login": "dongzl"}, "path": "examples/sharding-jdbc-example/orchestration-example/orchestration-raw-jdbc-example/src/main/resources/META-INF/zookeeper/cloud/encrypt.yaml", "diffHunk": "@@ -1,7 +1,8 @@\n orchestration:\n-  name: demo_yaml_ds_encrypt\n-  overwrite: false\n-  registry:\n-    type: zookeeper\n+  demo_yaml_ds_encrypt:\n+    orchestrationType: config_center,registry_center\n+    instanceType: zookeeper\n     serverLists: localhost:2181\n     namespace: orchestration-yaml-demo\n+    props:\n+      overwrite: true", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c300134b27b9a5297493f53db3583dedc4e8a20b"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTQ3MzE0OQ==", "bodyText": "There should be a blank line.", "url": "https://github.com/apache/shardingsphere/pull/4497#discussion_r385473149", "createdAt": "2020-02-28T02:05:08Z", "author": {"login": "dongzl"}, "path": "examples/sharding-jdbc-example/orchestration-example/orchestration-spring-boot-example/src/main/resources/application-local-nacos-encrypt.properties", "diffHunk": "@@ -31,8 +31,14 @@ spring.shardingsphere.encrypt.tables.t_order.columns.status.encryptor=status_enc\n spring.shardingsphere.props.query.with.cipher.comlum=true\n spring.shardingsphere.props.sql.show=true\n \n-spring.shardingsphere.orchestration.name=demo_spring_boot_ds_encrypt\n-spring.shardingsphere.orchestration.overwrite=true\n-spring.shardingsphere.orchestration.registry.type=nacos\n-spring.shardingsphere.orchestration.registry.server-lists=localhost:8848\n-spring.shardingsphere.orchestration.registry.namespace=\n+spring.shardingsphere.orchestration.demo_spring_boot_ds_encrypt.orchestration-type=config_center\n+spring.shardingsphere.orchestration.demo_spring_boot_ds_encrypt.instance-type=nacos\n+spring.shardingsphere.orchestration.demo_spring_boot_ds_encrypt.server-lists=localhost:8848\n+spring.shardingsphere.orchestration.demo_spring_boot_ds_encrypt.namespace=\n+spring.shardingsphere.orchestration.demo_spring_boot_ds_encrypt.props.overwrite=true\n+\n+spring.shardingsphere.orchestration.demo1_spring_boot_ds_encrypt.orchestration-type=registry_center\n+spring.shardingsphere.orchestration.demo1_spring_boot_ds_encrypt.instance-type=zookeeper\n+spring.shardingsphere.orchestration.demo1_spring_boot_ds_encrypt.server-lists=localhost:2181\n+spring.shardingsphere.orchestration.demo1_spring_boot_ds_encrypt.namespace=orchestration-spring-boot-demo\n+spring.shardingsphere.orchestration.demo1_spring_boot_ds_encrypt.props.overwrite=true", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c300134b27b9a5297493f53db3583dedc4e8a20b"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTQ3MzI1NQ==", "bodyText": "The same to above.", "url": "https://github.com/apache/shardingsphere/pull/4497#discussion_r385473255", "createdAt": "2020-02-28T02:05:26Z", "author": {"login": "dongzl"}, "path": "examples/sharding-jdbc-example/orchestration-example/orchestration-spring-boot-example/src/main/resources/application-local-nacos-master-slave.properties", "diffHunk": "@@ -23,8 +23,14 @@ spring.shardingsphere.masterslave.name=ds_ms\n spring.shardingsphere.masterslave.master-data-source-name=ds_master\n spring.shardingsphere.masterslave.slave-data-source-names=ds_slave_0,ds_slave_1\n \n-spring.shardingsphere.orchestration.name=demo_spring_boot_ds_ms\n-spring.shardingsphere.orchestration.overwrite=true\n-spring.shardingsphere.orchestration.registry.type=nacos\n-spring.shardingsphere.orchestration.registry.server-lists=localhost:8848\n-spring.shardingsphere.orchestration.registry.namespace=\n+spring.shardingsphere.orchestration.demo_spring_boot_ds_ms.orchestration-type=config_center\n+spring.shardingsphere.orchestration.demo_spring_boot_ds_ms.instance-type=nacos\n+spring.shardingsphere.orchestration.demo_spring_boot_ds_ms.server-lists=localhost:8848\n+spring.shardingsphere.orchestration.demo_spring_boot_ds_ms.namespace=\n+spring.shardingsphere.orchestration.demo_spring_boot_ds_ms.props.overwrite=true\n+\n+spring.shardingsphere.orchestration.demo1_spring_boot_ds_ms.orchestration-type=registry_center\n+spring.shardingsphere.orchestration.demo1_spring_boot_ds_ms.instance-type=zookeeper\n+spring.shardingsphere.orchestration.demo1_spring_boot_ds_ms.server-lists=localhost:2181\n+spring.shardingsphere.orchestration.demo1_spring_boot_ds_ms.namespace=orchestration-spring-boot-demo\n+spring.shardingsphere.orchestration.demo1_spring_boot_ds_ms.props.overwrite=true", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c300134b27b9a5297493f53db3583dedc4e8a20b"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTQ3MzczOQ==", "bodyText": "There are redundant blank line.", "url": "https://github.com/apache/shardingsphere/pull/4497#discussion_r385473739", "createdAt": "2020-02-28T02:07:32Z", "author": {"login": "dongzl"}, "path": "examples/sharding-jdbc-example/orchestration-example/orchestration-spring-boot-example/src/main/resources/application-local-nacos-sharding-databases-tables.properties", "diffHunk": "@@ -35,8 +35,15 @@ spring.shardingsphere.sharding.tables.t_order_item.key-generator.column=order_it\n spring.shardingsphere.sharding.tables.t_order_item.key-generator.type=SNOWFLAKE\n spring.shardingsphere.sharding.tables.t_order_item.key-generator.props.worker.id=123\n \n-spring.shardingsphere.orchestration.name=demo_spring_boot_ds_sharding\n-spring.shardingsphere.orchestration.overwrite=true\n-spring.shardingsphere.orchestration.registry.type=nacos\n-spring.shardingsphere.orchestration.registry.server-lists=localhost:8848\n-spring.shardingsphere.orchestration.registry.namespace=\n+spring.shardingsphere.orchestration.demo_spring_boot_ds_sharding.orchestration-type=config_center\n+spring.shardingsphere.orchestration.demo_spring_boot_ds_sharding.instance-type=nacos\n+spring.shardingsphere.orchestration.demo_spring_boot_ds_sharding.server-lists=localhost:8848\n+spring.shardingsphere.orchestration.demo_spring_boot_ds_sharding.namespace=\n+spring.shardingsphere.orchestration.demo_spring_boot_ds_sharding.props.overwrite=true\n+\n+spring.shardingsphere.orchestration.demo1_spring_boot_ds_sharding.orchestration-type=registry_center\n+spring.shardingsphere.orchestration.demo1_spring_boot_ds_sharding.instance-type=zookeeper\n+spring.shardingsphere.orchestration.demo1_spring_boot_ds_sharding.server-lists=localhost:2181\n+spring.shardingsphere.orchestration.demo1_spring_boot_ds_sharding.namespace=orchestration-spring-boot-demo\n+spring.shardingsphere.orchestration.demo1_spring_boot_ds_sharding.props.overwrite=true\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c300134b27b9a5297493f53db3583dedc4e8a20b"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTQ3NTEwOQ==", "bodyText": "Why fix this type param?", "url": "https://github.com/apache/shardingsphere/pull/4497#discussion_r385475109", "createdAt": "2020-02-28T02:13:10Z", "author": {"login": "dongzl"}, "path": "examples/sharding-jdbc-example/orchestration-example/orchestration-spring-namespace-example/src/main/resources/META-INF/zookeeper/local/application-encrypt.xml", "diffHunk": "@@ -59,15 +59,15 @@\n             </encrypt:tables>\n             <encrypt:encryptors>\n                 <encrypt:encryptor id=\"name_encryptor\" type=\"AES\" props-ref=\"props\"/>\n-                <encrypt:encryptor id=\"pwd_encryptor\" type=\"assistedTest\" />", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c300134b27b9a5297493f53db3583dedc4e8a20b"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d69d30d012ee7ad13278cd912b0c385b22926163", "author": {"user": {"login": "geomonlin", "name": "linzesi"}}, "url": "https://github.com/apache/shardingsphere/commit/d69d30d012ee7ad13278cd912b0c385b22926163", "committedDate": "2020-02-28T09:56:59Z", "message": "update orchestration config"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2ODA0NDkz", "url": "https://github.com/apache/shardingsphere/pull/4497#pullrequestreview-366804493", "createdAt": "2020-02-29T15:44:54Z", "commit": {"oid": "d69d30d012ee7ad13278cd912b0c385b22926163"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOVQxNTo0NDo1NFrOFwJxsA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOVQxNjoxMTowNFrOFwJ4Sw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjAzNjE0NA==", "bodyText": "why remove namespace?", "url": "https://github.com/apache/shardingsphere/pull/4497#discussion_r386036144", "createdAt": "2020-02-29T15:44:54Z", "author": {"login": "kimmking"}, "path": "examples/sharding-jdbc-example/orchestration-example/orchestration-raw-jdbc-example/src/main/resources/META-INF/nacos/local/encrypt.yaml", "diffHunk": "@@ -3,7 +3,7 @@ orchestration:\n     orchestrationType: config_center\n     instanceType: nacos\n     serverLists: localhost:8848\n-    namespace: orchestration-yaml-demo", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d69d30d012ee7ad13278cd912b0c385b22926163"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjAzNjgxMw==", "bodyText": "why add a shardingtype swtich?", "url": "https://github.com/apache/shardingsphere/pull/4497#discussion_r386036813", "createdAt": "2020-02-29T15:55:32Z", "author": {"login": "kimmking"}, "path": "examples/sharding-jdbc-example/orchestration-example/orchestration-raw-jdbc-example/src/main/java/org/apache/shardingsphere/example/orchestration/raw/jdbc/config/RegistryCenterConfigurationUtil.java", "diffHunk": "@@ -31,20 +34,58 @@\n \n     private static final String NACOS_NAMESPACE = \"\";\n     \n-    public static RegistryCenterConfiguration getZooKeeperConfiguration() {\n-        RegistryCenterConfiguration result = new RegistryCenterConfiguration(\"zookeeper\");\n+    public static Map<String, InstanceConfiguration> getZooKeeperConfiguration(String overwrite, ShardingType shardingType) {\n+        Map<String, InstanceConfiguration> instanceConfigurationMap = new HashMap<String, InstanceConfiguration>();\n+        Properties properties = new Properties();\n+        properties.setProperty(\"overwrite\", overwrite);\n+        InstanceConfiguration result = new InstanceConfiguration(\"zookeeper\", properties);\n         result.setServerLists(ZOOKEEPER_CONNECTION_STRING);\n         result.setNamespace(NAMESPACE);\n-        return result;\n+        result.setOrchestrationType(\"registry_center,config_center\");\n+        switch (shardingType) {\n+            case SHARDING_DATABASES_AND_TABLES:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d69d30d012ee7ad13278cd912b0c385b22926163"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjAzNzgzNQ==", "bodyText": "the last blank is standard.\nshould be retrieved.", "url": "https://github.com/apache/shardingsphere/pull/4497#discussion_r386037835", "createdAt": "2020-02-29T16:11:04Z", "author": {"login": "kimmking"}, "path": "examples/sharding-jdbc-example/orchestration-example/orchestration-spring-namespace-example/src/main/resources/META-INF/zookeeper/local/application-master-slave.xml", "diffHunk": "@@ -15,44 +15,44 @@\n                         http://shardingsphere.apache.org/schema/shardingsphere/masterslave/master-slave.xsd\n                         http://shardingsphere.apache.org/schema/shardingsphere/orchestration\n                         http://shardingsphere.apache.org/schema/shardingsphere/orchestration/orchestration.xsd\">\n-    <import resource=\"classpath*:META-INF/zookeeper/registry-center.xml\" />\n-    <context:component-scan base-package=\"org.apache.shardingsphere.example.core.mybatis\" />\n+    <import resource=\"classpath*:META-INF/zookeeper/registry-center.xml\"/>\n+    <context:component-scan base-package=\"org.apache.shardingsphere.example.core.mybatis\"/>\n \n     <bean id=\"demo_ds_master\" class=\"com.zaxxer.hikari.HikariDataSource\" destroy-method=\"close\">\n         <property name=\"driverClassName\" value=\"com.mysql.jdbc.Driver\"/>\n         <property name=\"jdbcUrl\" value=\"jdbc:mysql://localhost:3306/demo_ds_master\"/>\n         <property name=\"username\" value=\"root\"/>\n         <property name=\"password\" value=\"\"/>\n     </bean>\n-    \n+\n     <bean id=\"demo_ds_slave_0\" class=\"com.zaxxer.hikari.HikariDataSource\" destroy-method=\"close\">\n         <property name=\"driverClassName\" value=\"com.mysql.jdbc.Driver\"/>\n         <property name=\"jdbcUrl\" value=\"jdbc:mysql://localhost:3306/demo_ds_slave_0\"/>\n         <property name=\"username\" value=\"root\"/>\n         <property name=\"password\" value=\"\"/>\n     </bean>\n-    \n+\n     <bean id=\"demo_ds_slave_1\" class=\"com.zaxxer.hikari.HikariDataSource\" destroy-method=\"close\">\n         <property name=\"driverClassName\" value=\"com.mysql.jdbc.Driver\"/>\n         <property name=\"jdbcUrl\" value=\"jdbc:mysql://localhost:3306/demo_ds_slave_1\"/>\n         <property name=\"username\" value=\"root\"/>\n         <property name=\"password\" value=\"\"/>\n     </bean>\n \n-    <master-slave:load-balance-algorithm id=\"randomStrategy\" type=\"RANDOM\" />", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d69d30d012ee7ad13278cd912b0c385b22926163"}, "originalPosition": 32}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2ODM0Njk3", "url": "https://github.com/apache/shardingsphere/pull/4497#pullrequestreview-366834697", "createdAt": "2020-03-01T04:35:32Z", "commit": {"oid": "d69d30d012ee7ad13278cd912b0c385b22926163"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMVQwNDozNTozMlrOFwMOYw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMVQwNDozNTozMlrOFwMOYw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjA3NjI1OQ==", "bodyText": "Diff dataSource name persist to different dataId.  As shown in the picture\uff1a", "url": "https://github.com/apache/shardingsphere/pull/4497#discussion_r386076259", "createdAt": "2020-03-01T04:35:32Z", "author": {"login": "geomonlin"}, "path": "examples/sharding-jdbc-example/orchestration-example/orchestration-raw-jdbc-example/src/main/java/org/apache/shardingsphere/example/orchestration/raw/jdbc/config/RegistryCenterConfigurationUtil.java", "diffHunk": "@@ -31,20 +34,58 @@\n \n     private static final String NACOS_NAMESPACE = \"\";\n     \n-    public static RegistryCenterConfiguration getZooKeeperConfiguration() {\n-        RegistryCenterConfiguration result = new RegistryCenterConfiguration(\"zookeeper\");\n+    public static Map<String, InstanceConfiguration> getZooKeeperConfiguration(String overwrite, ShardingType shardingType) {\n+        Map<String, InstanceConfiguration> instanceConfigurationMap = new HashMap<String, InstanceConfiguration>();\n+        Properties properties = new Properties();\n+        properties.setProperty(\"overwrite\", overwrite);\n+        InstanceConfiguration result = new InstanceConfiguration(\"zookeeper\", properties);\n         result.setServerLists(ZOOKEEPER_CONNECTION_STRING);\n         result.setNamespace(NAMESPACE);\n-        return result;\n+        result.setOrchestrationType(\"registry_center,config_center\");\n+        switch (shardingType) {\n+            case SHARDING_DATABASES_AND_TABLES:", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjAzNjgxMw=="}, "originalCommit": {"oid": "d69d30d012ee7ad13278cd912b0c385b22926163"}, "originalPosition": 29}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f991aa44b69cc31f5141aa552f5bc15084b38084", "author": {"user": {"login": "geomonlin", "name": "linzesi"}}, "url": "https://github.com/apache/shardingsphere/commit/f991aa44b69cc31f5141aa552f5bc15084b38084", "committedDate": "2020-03-01T05:41:57Z", "message": "update encrypt type and format"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ec6a0039a39a61b26c87cefddfb0670a504261fa", "author": {"user": {"login": "geomonlin", "name": "linzesi"}}, "url": "https://github.com/apache/shardingsphere/commit/ec6a0039a39a61b26c87cefddfb0670a504261fa", "committedDate": "2020-03-01T05:37:31Z", "message": "update format"}, "afterCommit": {"oid": "f991aa44b69cc31f5141aa552f5bc15084b38084", "author": {"user": {"login": "geomonlin", "name": "linzesi"}}, "url": "https://github.com/apache/shardingsphere/commit/f991aa44b69cc31f5141aa552f5bc15084b38084", "committedDate": "2020-03-01T05:41:57Z", "message": "update encrypt type and format"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eb54d3bdaf56590399f295b69096c46ec517aa22", "author": {"user": {"login": "geomonlin", "name": "linzesi"}}, "url": "https://github.com/apache/shardingsphere/commit/eb54d3bdaf56590399f295b69096c46ec517aa22", "committedDate": "2020-03-01T08:48:56Z", "message": "update pom name"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2ODQ0MjMy", "url": "https://github.com/apache/shardingsphere/pull/4497#pullrequestreview-366844232", "createdAt": "2020-03-01T08:56:00Z", "commit": {"oid": "eb54d3bdaf56590399f295b69096c46ec517aa22"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2ODQ1NDM3", "url": "https://github.com/apache/shardingsphere/pull/4497#pullrequestreview-366845437", "createdAt": "2020-03-01T09:17:58Z", "commit": {"oid": "eb54d3bdaf56590399f295b69096c46ec517aa22"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3863, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}