{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcwNzQyNzI2", "number": 6951, "title": "Scaling refactor", "bodyText": "Changes proposed in this pull request:\n\nrefactor the code whenever read the code need to change", "createdAt": "2020-08-20T08:07:26Z", "url": "https://github.com/apache/shardingsphere/pull/6951", "merged": true, "mergeCommit": {"oid": "b30bb15288ddd53b90f517c542c73032bd614506"}, "closed": true, "closedAt": "2020-08-21T09:48:45Z", "author": {"login": "taojintianxia"}, "timelineItems": {"totalCount": 21, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdAmxAEgH2gAyNDcwNzQyNzI2OmNjNmNiM2YzZTE3MmZjYmQxZjNiYTU4ZmI2YzhmMWNhMDkzM2M3ZmU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdBBrCCAFqTQ3MjM1NTgwNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "cc6cb3f3e172fcbd1f3ba58fb6c8f1ca0933c7fe", "author": {"user": null}, "url": "https://github.com/apache/shardingsphere/commit/cc6cb3f3e172fcbd1f3ba58fb6c8f1ca0933c7fe", "committedDate": "2020-08-20T02:27:09Z", "message": "Refactor: refactor the typecast"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0ba2de95b65c53ddf5ea4cfa2b253b63f805deae", "author": {"user": null}, "url": "https://github.com/apache/shardingsphere/commit/0ba2de95b65c53ddf5ea4cfa2b253b63f805deae", "committedDate": "2020-08-20T02:37:48Z", "message": "Remove: remove the rawtypes annotation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ff7041fd1ce68c34f6a6b3b1b7cb29676d735124", "author": {"user": null}, "url": "https://github.com/apache/shardingsphere/commit/ff7041fd1ce68c34f6a6b3b1b7cb29676d735124", "committedDate": "2020-08-20T02:45:29Z", "message": "Refactor: result will never be empty"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dfa19f8d5188bccc10886221a899609d707f64fc", "author": {"user": null}, "url": "https://github.com/apache/shardingsphere/commit/dfa19f8d5188bccc10886221a899609d707f64fc", "committedDate": "2020-08-20T08:05:07Z", "message": "Add: add test case for further refactor"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "21c82a9427fed0db76015c3da6bd94425f5fe5f7", "author": {"user": null}, "url": "https://github.com/apache/shardingsphere/commit/21c82a9427fed0db76015c3da6bd94425f5fe5f7", "committedDate": "2020-08-20T08:12:59Z", "message": "Refactor: refactor the variables name"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d5b6b8615de83063a256d1bd720514cf45c128e2", "author": {"user": null}, "url": "https://github.com/apache/shardingsphere/commit/d5b6b8615de83063a256d1bd720514cf45c128e2", "committedDate": "2020-08-20T10:17:42Z", "message": "Add: add equals method for different DatabaseType"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxNDc4MDQ2", "url": "https://github.com/apache/shardingsphere/pull/6951#pullrequestreview-471478046", "createdAt": "2020-08-20T10:48:10Z", "commit": {"oid": "d5b6b8615de83063a256d1bd720514cf45c128e2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxMDo0ODoxMVrOHD7F2Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxMDo0ODoxMVrOHD7F2Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Mzg3NTkyOQ==", "bodyText": "Please replace with @EqualsAndHashCode.", "url": "https://github.com/apache/shardingsphere/pull/6951#discussion_r473875929", "createdAt": "2020-08-20T10:48:11Z", "author": {"login": "Lucas-307"}, "path": "shardingsphere-infra/shardingsphere-infra-common/src/main/java/org/apache/shardingsphere/infra/database/type/dialect/H2DatabaseType.java", "diffHunk": "@@ -49,4 +49,12 @@ public H2DataSourceMetaData getDataSourceMetaData(final String url, final String\n     public DatabaseType getTrunkDatabaseType() {\n         return DatabaseTypes.getActualDatabaseType(\"MySQL\");\n     }\n+\n+    @Override\n+    public boolean equals(final Object obj) {\n+        if (!(obj instanceof DatabaseType)) {\n+            return false;\n+        }\n+        return getName().equals(((DatabaseType) obj).getName());\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d5b6b8615de83063a256d1bd720514cf45c128e2"}, "originalPosition": 11}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b02ba735ff98ed75aab977ce08a3c61e2bb1c6b9", "author": {"user": null}, "url": "https://github.com/apache/shardingsphere/commit/b02ba735ff98ed75aab977ce08a3c61e2bb1c6b9", "committedDate": "2020-08-20T10:57:36Z", "message": "Refactor: refactor the equals method to a better way"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8f9daf0f75d3364e694279f71d8b87f59915bdc6", "author": {"user": null}, "url": "https://github.com/apache/shardingsphere/commit/8f9daf0f75d3364e694279f71d8b87f59915bdc6", "committedDate": "2020-08-20T11:16:23Z", "message": "Refactor: add static modifier to DatabaseType implementations"}, "afterCommit": {"oid": "b02ba735ff98ed75aab977ce08a3c61e2bb1c6b9", "author": {"user": null}, "url": "https://github.com/apache/shardingsphere/commit/b02ba735ff98ed75aab977ce08a3c61e2bb1c6b9", "committedDate": "2020-08-20T10:57:36Z", "message": "Refactor: refactor the equals method to a better way"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcyMTA0OTAx", "url": "https://github.com/apache/shardingsphere/pull/6951#pullrequestreview-472104901", "createdAt": "2020-08-21T02:34:44Z", "commit": {"oid": "b02ba735ff98ed75aab977ce08a3c61e2bb1c6b9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcyMTA2Njc1", "url": "https://github.com/apache/shardingsphere/pull/6951#pullrequestreview-472106675", "createdAt": "2020-08-21T02:41:07Z", "commit": {"oid": "b02ba735ff98ed75aab977ce08a3c61e2bb1c6b9"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMVQwMjo0MTowOFrOHEZogw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMVQwMjo0MTowOFrOHEZogw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDM3NjMyMw==", "bodyText": "Please do not change original code if unnecessary.", "url": "https://github.com/apache/shardingsphere/pull/6951#discussion_r474376323", "createdAt": "2020-08-21T02:41:08Z", "author": {"login": "terrymanu"}, "path": "shardingsphere-infra/shardingsphere-infra-common/src/main/java/org/apache/shardingsphere/infra/database/type/dialect/H2DatabaseType.java", "diffHunk": "@@ -28,12 +30,11 @@\n /**\n  * Database type of H2.\n  */\n+@EqualsAndHashCode\n public final class H2DatabaseType implements BranchDatabaseType {\n     \n-    @Override\n-    public String getName() {\n-        return \"H2\";\n-    }\n+    @Getter\n+    private final String name = \"H2\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b02ba735ff98ed75aab977ce08a3c61e2bb1c6b9"}, "originalPosition": 21}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcyMTA3MDE4", "url": "https://github.com/apache/shardingsphere/pull/6951#pullrequestreview-472107018", "createdAt": "2020-08-21T02:42:18Z", "commit": {"oid": "b02ba735ff98ed75aab977ce08a3c61e2bb1c6b9"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMVQwMjo0MjoxOFrOHEZpiw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMVQwMjo0MjoxOFrOHEZpiw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDM3NjU4Nw==", "bodyText": "Please remove useless blank line", "url": "https://github.com/apache/shardingsphere/pull/6951#discussion_r474376587", "createdAt": "2020-08-21T02:42:18Z", "author": {"login": "terrymanu"}, "path": "shardingsphere-scaling/shardingsphere-scaling-core/src/test/java/org/apache/shardingsphere/scaling/core/config/JDBCDataSourceConfigurationTest.java", "diffHunk": "@@ -0,0 +1,52 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.apache.shardingsphere.scaling.core.config;\n+\n+import org.apache.shardingsphere.infra.database.type.dialect.H2DatabaseType;\n+import org.apache.shardingsphere.infra.database.type.dialect.MariaDBDatabaseType;\n+import org.junit.Test;\n+\n+import static org.hamcrest.CoreMatchers.is;\n+import static org.hamcrest.CoreMatchers.not;\n+import static org.junit.Assert.assertThat;\n+\n+public final class JDBCDataSourceConfigurationTest {\n+    \n+    @Test\n+    public void assertJDBCDataSourceConfigurationEquals() {\n+        JDBCDataSourceConfiguration sourceConfiguration = new JDBCDataSourceConfiguration(\"jdbc:mysql://127.0.0.1:3306/test2?serverTimezone=UTC&useSSL=false\", \"root\", \"root\");\n+        JDBCDataSourceConfiguration targetConfiguration = new JDBCDataSourceConfiguration(\"jdbc:mysql://127.0.0.1:3306/test2?serverTimezone=UTC&useSSL=false\", \"root\", \"root\");\n+        assertThat(sourceConfiguration, is(targetConfiguration));\n+        \n+        sourceConfiguration.setDatabaseType(new MariaDBDatabaseType());\n+        targetConfiguration.setDatabaseType(new MariaDBDatabaseType());\n+        assertThat(sourceConfiguration, is(targetConfiguration));\n+    }\n+    \n+    @Test\n+    public void assertJDBCDataSourceConfigurationNotEquals() {\n+        JDBCDataSourceConfiguration sourceConfiguration = new JDBCDataSourceConfiguration(\"jdbc:mysql://127.0.0.1:3306/test2?serverTimezone=UTC&useSSL=false\", \"sa\", \"root\");\n+        JDBCDataSourceConfiguration targetConfiguration = new JDBCDataSourceConfiguration(\"jdbc:mysql://127.0.0.1:3306/test2?serverTimezone=UTC&useSSL=false\", \"root\", \"root\");\n+        assertThat(sourceConfiguration, not(targetConfiguration));\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b02ba735ff98ed75aab977ce08a3c61e2bb1c6b9"}, "originalPosition": 46}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcyMTA5MTU3", "url": "https://github.com/apache/shardingsphere/pull/6951#pullrequestreview-472109157", "createdAt": "2020-08-21T02:49:58Z", "commit": {"oid": "b02ba735ff98ed75aab977ce08a3c61e2bb1c6b9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMVQwMjo0OTo1OFrOHEZxIQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMVQwMjo0OTo1OFrOHEZxIQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDM3ODUyOQ==", "bodyText": "maybe put @getter above class is better.", "url": "https://github.com/apache/shardingsphere/pull/6951#discussion_r474378529", "createdAt": "2020-08-21T02:49:58Z", "author": {"login": "Lucas-307"}, "path": "shardingsphere-infra/shardingsphere-infra-common/src/main/java/org/apache/shardingsphere/infra/database/type/dialect/H2DatabaseType.java", "diffHunk": "@@ -28,12 +30,11 @@\n /**\n  * Database type of H2.\n  */\n+@EqualsAndHashCode\n public final class H2DatabaseType implements BranchDatabaseType {\n     \n-    @Override\n-    public String getName() {\n-        return \"H2\";\n-    }\n+    @Getter", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b02ba735ff98ed75aab977ce08a3c61e2bb1c6b9"}, "originalPosition": 20}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "224b32af6c789fb31def51af973c99455927cf65", "author": {"user": null}, "url": "https://github.com/apache/shardingsphere/commit/224b32af6c789fb31def51af973c99455927cf65", "committedDate": "2020-08-21T04:54:41Z", "message": "Remove: remove useless blank line"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "403de6c3c6ac14e99aaf06b9b5ee7a21ef5083a4", "author": {"user": null}, "url": "https://github.com/apache/shardingsphere/commit/403de6c3c6ac14e99aaf06b9b5ee7a21ef5083a4", "committedDate": "2020-08-21T09:36:44Z", "message": "Refactor: rever the code to last change"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6fc5079abff06395ffdf9cf3183d4c34a4bdc970", "author": {"user": null}, "url": "https://github.com/apache/shardingsphere/commit/6fc5079abff06395ffdf9cf3183d4c34a4bdc970", "committedDate": "2020-08-21T09:38:20Z", "message": "Refactor: remove useless annotation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "afb1ef703e18d701b1b34f37f400384faac88ffe", "author": {"user": null}, "url": "https://github.com/apache/shardingsphere/commit/afb1ef703e18d701b1b34f37f400384faac88ffe", "committedDate": "2020-08-21T09:39:50Z", "message": "Refactor: roll back the annotation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bad85fcf3743f71bed7875f6ce3950952e30a1ab", "author": {"user": null}, "url": "https://github.com/apache/shardingsphere/commit/bad85fcf3743f71bed7875f6ce3950952e30a1ab", "committedDate": "2020-08-21T09:41:36Z", "message": "Refactor: update the corresponding test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e08994f8fe3e38aad64da3c05e98e627fc5813f1", "author": {"user": null}, "url": "https://github.com/apache/shardingsphere/commit/e08994f8fe3e38aad64da3c05e98e627fc5813f1", "committedDate": "2020-08-21T09:44:16Z", "message": "Remove: remove the uesless annotation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "31e4beb6dadfddf7aea3a44729da7381fe463c44", "author": {"user": null}, "url": "https://github.com/apache/shardingsphere/commit/31e4beb6dadfddf7aea3a44729da7381fe463c44", "committedDate": "2020-08-21T09:45:16Z", "message": "Add: add back the intention"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcyMzU1ODA3", "url": "https://github.com/apache/shardingsphere/pull/6951#pullrequestreview-472355807", "createdAt": "2020-08-21T09:48:04Z", "commit": {"oid": "31e4beb6dadfddf7aea3a44729da7381fe463c44"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4761, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}