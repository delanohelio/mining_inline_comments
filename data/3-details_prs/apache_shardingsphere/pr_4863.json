{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkxNDIyOTUy", "number": 4863, "title": "shadingRule lambda modify.", "bodyText": "I changed some of the methods in ShadingRule to a lambda expression for JDK8", "createdAt": "2020-03-20T09:08:59Z", "url": "https://github.com/apache/shardingsphere/pull/4863", "merged": true, "mergeCommit": {"oid": "5eef5b55b0a50bdcbece9b3967d5f8e3c015f102"}, "closed": true, "closedAt": "2020-03-21T03:06:22Z", "author": {"login": "yu199195"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcPcxTAAH2gAyMzkxNDIyOTUyOjVjYmNjOWZjMjEyZmRjMTYyYWM4NmQ4NzgyM2FhZWEwMmU5NGM3Yzk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcPsOEQAFqTM3ODg4NzA5MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "5cbcc9fc212fdc162ac86d87823aaea02e94c7c9", "author": {"user": {"login": "yu199195", "name": "xiaoyu"}}, "url": "https://github.com/apache/shardingsphere/commit/5cbcc9fc212fdc162ac86d87823aaea02e94c7c9", "committedDate": "2020-03-20T09:06:08Z", "message": "shadingRule lambda modify."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4MzQyMTMx", "url": "https://github.com/apache/shardingsphere/pull/4863#pullrequestreview-378342131", "createdAt": "2020-03-20T09:44:59Z", "commit": {"oid": "5cbcc9fc212fdc162ac86d87823aaea02e94c7c9"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQwOTo0NDo1OVrOF5NHEA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQwOTo0NjozNlrOF5NKPQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTUyNzk1Mg==", "bodyText": "with more blank in the front of this line.", "url": "https://github.com/apache/shardingsphere/pull/4863#discussion_r395527952", "createdAt": "2020-03-20T09:44:59Z", "author": {"login": "kimmking"}, "path": "sharding-core/sharding-core-common/src/main/java/org/apache/shardingsphere/core/rule/ShardingRule.java", "diffHunk": "@@ -85,36 +85,29 @@ public ShardingRule(final ShardingRuleConfiguration shardingRuleConfig, final Co\n     }\n     \n     private Collection<TableRule> createTableRules(final ShardingRuleConfiguration shardingRuleConfig) {\n-        Collection<TableRuleConfiguration> tableRuleConfigurations = shardingRuleConfig.getTableRuleConfigs();\n-        Collection<TableRule> result = new ArrayList<>(tableRuleConfigurations.size());\n-        for (TableRuleConfiguration each : tableRuleConfigurations) {\n-            result.add(new TableRule(each, shardingDataSourceNames, getDefaultGenerateKeyColumn(shardingRuleConfig)));\n-        }\n-        return result;\n+        return shardingRuleConfig.getTableRuleConfigs().stream()\n+        .map(each -> new TableRule(each, shardingDataSourceNames, getDefaultGenerateKeyColumn(shardingRuleConfig)))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5cbcc9fc212fdc162ac86d87823aaea02e94c7c9"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTUyODc2NQ==", "bodyText": "one line is better.", "url": "https://github.com/apache/shardingsphere/pull/4863#discussion_r395528765", "createdAt": "2020-03-20T09:46:36Z", "author": {"login": "kimmking"}, "path": "sharding-core/sharding-core-common/src/main/java/org/apache/shardingsphere/core/rule/ShardingRule.java", "diffHunk": "@@ -85,36 +85,29 @@ public ShardingRule(final ShardingRuleConfiguration shardingRuleConfig, final Co\n     }\n     \n     private Collection<TableRule> createTableRules(final ShardingRuleConfiguration shardingRuleConfig) {\n-        Collection<TableRuleConfiguration> tableRuleConfigurations = shardingRuleConfig.getTableRuleConfigs();\n-        Collection<TableRule> result = new ArrayList<>(tableRuleConfigurations.size());\n-        for (TableRuleConfiguration each : tableRuleConfigurations) {\n-            result.add(new TableRule(each, shardingDataSourceNames, getDefaultGenerateKeyColumn(shardingRuleConfig)));\n-        }\n-        return result;\n+        return shardingRuleConfig.getTableRuleConfigs().stream()\n+        .map(each -> new TableRule(each, shardingDataSourceNames, getDefaultGenerateKeyColumn(shardingRuleConfig)))\n+        .collect(Collectors.toList());\n     }\n     \n     private String getDefaultGenerateKeyColumn(final ShardingRuleConfiguration shardingRuleConfig) {\n-        return null == shardingRuleConfig.getDefaultKeyGeneratorConfig() ? null : shardingRuleConfig.getDefaultKeyGeneratorConfig().getColumn();\n+        return Optional.ofNullable(shardingRuleConfig.getDefaultKeyGeneratorConfig()).map(KeyGeneratorConfiguration::getColumn).orElse(null);\n     }\n     \n     private Collection<BindingTableRule> createBindingTableRules(final Collection<String> bindingTableGroups) {\n-        Collection<BindingTableRule> result = new ArrayList<>(bindingTableGroups.size());\n-        for (String each : bindingTableGroups) {\n-            result.add(createBindingTableRule(each));\n-        }\n-        return result;\n+        return bindingTableGroups.stream().map(this::createBindingTableRule).collect(Collectors.toList());\n     }\n     \n     private BindingTableRule createBindingTableRule(final String bindingTableGroup) {\n-        List<TableRule> tableRules = new LinkedList<>();\n-        for (String each : Splitter.on(\",\").trimResults().splitToList(bindingTableGroup)) {\n-            tableRules.add(getTableRule(each));\n-        }\n+        List<TableRule> tableRules = Splitter.on(\",\").trimResults()\n+                .splitToList(bindingTableGroup).stream()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5cbcc9fc212fdc162ac86d87823aaea02e94c7c9"}, "originalPosition": 51}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dc298ebf84b4cb1fd1b4578b6286594ec72b4700", "author": {"user": {"login": "yu199195", "name": "xiaoyu"}}, "url": "https://github.com/apache/shardingsphere/commit/dc298ebf84b4cb1fd1b4578b6286594ec72b4700", "committedDate": "2020-03-20T10:01:09Z", "message": "shadingRule lambda modify."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4NDcwNzIx", "url": "https://github.com/apache/shardingsphere/pull/4863#pullrequestreview-378470721", "createdAt": "2020-03-20T13:15:22Z", "commit": {"oid": "dc298ebf84b4cb1fd1b4578b6286594ec72b4700"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4ODg3MDkx", "url": "https://github.com/apache/shardingsphere/pull/4863#pullrequestreview-378887091", "createdAt": "2020-03-21T03:06:08Z", "commit": {"oid": "dc298ebf84b4cb1fd1b4578b6286594ec72b4700"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3801, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}