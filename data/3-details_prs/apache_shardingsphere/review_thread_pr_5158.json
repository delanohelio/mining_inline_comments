{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAyNDU3MTU5", "number": 5158, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xM1QwNTozMzo1MFrODxJS9g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xM1QxMTo1NTozMVrODxOFkg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUyODU5MTI2OnYy", "diffSide": "RIGHT", "path": "shardingsphere-sql-parser/shardingsphere-sql-parser-statement/src/main/java/org/apache/shardingsphere/sql/parser/sql/statement/dml/SelectStatement.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xM1QwNTozMzo1MFrOGEdNYg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xM1QxMDoyNDo0OFrOGEiw0w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzMyNjA1MA==", "bodyText": "Maybe you need a set to remove duplicated ones? Or do you have anyother solution?", "url": "https://github.com/apache/shardingsphere/pull/5158#discussion_r407326050", "createdAt": "2020-04-13T05:33:50Z", "author": {"login": "tristaZero"}, "path": "shardingsphere-sql-parser/shardingsphere-sql-parser-statement/src/main/java/org/apache/shardingsphere/sql/parser/sql/statement/dml/SelectStatement.java", "diffHunk": "@@ -107,9 +107,19 @@\n      */\n     public Collection<SimpleTableSegment> getSimpleTableSegments() {\n         Collection<SimpleTableSegment> result = new LinkedList<>();\n+        Collection<SimpleTableSegment> tmp = new LinkedList<>();\n         for (TableReferenceSegment each: tableReferences) {\n             result.addAll(each.getSimpleTableSegments());\n         }\n+        for (SimpleTableSegment each: result) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "866254a13d7d0be6da84153d1f7b956cf5bad807"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzMyOTAyMw==", "bodyText": "Not to remove duplicate elements, but to remove elements that just is alias. @tristaZero", "url": "https://github.com/apache/shardingsphere/pull/5158#discussion_r407329023", "createdAt": "2020-04-13T05:47:58Z", "author": {"login": "jingshanglu"}, "path": "shardingsphere-sql-parser/shardingsphere-sql-parser-statement/src/main/java/org/apache/shardingsphere/sql/parser/sql/statement/dml/SelectStatement.java", "diffHunk": "@@ -107,9 +107,19 @@\n      */\n     public Collection<SimpleTableSegment> getSimpleTableSegments() {\n         Collection<SimpleTableSegment> result = new LinkedList<>();\n+        Collection<SimpleTableSegment> tmp = new LinkedList<>();\n         for (TableReferenceSegment each: tableReferences) {\n             result.addAll(each.getSimpleTableSegments());\n         }\n+        for (SimpleTableSegment each: result) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzMyNjA1MA=="}, "originalCommit": {"oid": "866254a13d7d0be6da84153d1f7b956cf5bad807"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzQxNzA0Mw==", "bodyText": "Got, if you want to keep those codes, please\nRename tmp\nAdd blank space and rename each1 in for (SimpleTableSegment each1:result) \nOr Copy the deleted codes here since they have the same logic.\nprivate Collection<SimpleTableSegment> getTableSegments(final Collection<SimpleTableSegment> tableSegments, final JoinedTableContext joinedTable) {\n          Collection<SimpleTableSegment> result = new LinkedList<>();\n          for (SimpleTableSegment tableSegment : ((CollectionValue<SimpleTableSegment>) visit(joinedTable)).getValue()) {\n              if (isTable(tableSegment, tableSegments)) {\n                  result.add(tableSegment);\n              }\n          }\n          return result;\n      }\n \n      private boolean isTable(final SimpleTableSegment owner, final Collection<SimpleTableSegment> tableSegments) {\n          for (SimpleTableSegment each : tableSegments) {\n              if (owner.getTableName().getIdentifier().getValue().equals(each.getAlias().orElse(null))) {\n                  return false;\n             }\n         }\n         return true;\n     }", "url": "https://github.com/apache/shardingsphere/pull/5158#discussion_r407417043", "createdAt": "2020-04-13T10:24:48Z", "author": {"login": "tristaZero"}, "path": "shardingsphere-sql-parser/shardingsphere-sql-parser-statement/src/main/java/org/apache/shardingsphere/sql/parser/sql/statement/dml/SelectStatement.java", "diffHunk": "@@ -107,9 +107,19 @@\n      */\n     public Collection<SimpleTableSegment> getSimpleTableSegments() {\n         Collection<SimpleTableSegment> result = new LinkedList<>();\n+        Collection<SimpleTableSegment> tmp = new LinkedList<>();\n         for (TableReferenceSegment each: tableReferences) {\n             result.addAll(each.getSimpleTableSegments());\n         }\n+        for (SimpleTableSegment each: result) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzMyNjA1MA=="}, "originalCommit": {"oid": "866254a13d7d0be6da84153d1f7b956cf5bad807"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUyOTM3NTcxOnYy", "diffSide": "RIGHT", "path": "shardingsphere-sql-parser/shardingsphere-sql-parser-statement/src/main/java/org/apache/shardingsphere/sql/parser/sql/statement/dml/SelectStatement.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xM1QxMTo1NToxNVrOGEkbHw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xM1QxMTo1NToxNVrOGEkbHw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzQ0NDI1NQ==", "bodyText": "TableReferenceSegment each : tableReferences", "url": "https://github.com/apache/shardingsphere/pull/5158#discussion_r407444255", "createdAt": "2020-04-13T11:55:15Z", "author": {"login": "tristaZero"}, "path": "shardingsphere-sql-parser/shardingsphere-sql-parser-statement/src/main/java/org/apache/shardingsphere/sql/parser/sql/statement/dml/SelectStatement.java", "diffHunk": "@@ -107,9 +107,25 @@\n      */\n     public Collection<SimpleTableSegment> getSimpleTableSegments() {\n         Collection<SimpleTableSegment> result = new LinkedList<>();\n+        Collection<SimpleTableSegment> tables = new LinkedList<>();\n         for (TableReferenceSegment each: tableReferences) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1b50e0fa9625a6282681ccebca812b418bd6b2e8"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUyOTM3NjE4OnYy", "diffSide": "RIGHT", "path": "shardingsphere-sql-parser/shardingsphere-sql-parser-statement/src/main/java/org/apache/shardingsphere/sql/parser/sql/statement/dml/SelectStatement.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xM1QxMTo1NTozMVrOGEkbbw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xM1QxMjozODozOVrOGElR8g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzQ0NDMzNQ==", "bodyText": "TableReferenceSegment each : tableReferences", "url": "https://github.com/apache/shardingsphere/pull/5158#discussion_r407444335", "createdAt": "2020-04-13T11:55:31Z", "author": {"login": "tristaZero"}, "path": "shardingsphere-sql-parser/shardingsphere-sql-parser-statement/src/main/java/org/apache/shardingsphere/sql/parser/sql/statement/dml/SelectStatement.java", "diffHunk": "@@ -107,9 +107,25 @@\n      */\n     public Collection<SimpleTableSegment> getSimpleTableSegments() {\n         Collection<SimpleTableSegment> result = new LinkedList<>();\n+        Collection<SimpleTableSegment> tables = new LinkedList<>();\n         for (TableReferenceSegment each: tableReferences) {\n             result.addAll(each.getSimpleTableSegments());\n         }\n-        return result;\n+        for (SimpleTableSegment each: result) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1b50e0fa9625a6282681ccebca812b418bd6b2e8"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzQ1ODI5MA==", "bodyText": "ok. @tristaZero", "url": "https://github.com/apache/shardingsphere/pull/5158#discussion_r407458290", "createdAt": "2020-04-13T12:38:39Z", "author": {"login": "jingshanglu"}, "path": "shardingsphere-sql-parser/shardingsphere-sql-parser-statement/src/main/java/org/apache/shardingsphere/sql/parser/sql/statement/dml/SelectStatement.java", "diffHunk": "@@ -107,9 +107,25 @@\n      */\n     public Collection<SimpleTableSegment> getSimpleTableSegments() {\n         Collection<SimpleTableSegment> result = new LinkedList<>();\n+        Collection<SimpleTableSegment> tables = new LinkedList<>();\n         for (TableReferenceSegment each: tableReferences) {\n             result.addAll(each.getSimpleTableSegments());\n         }\n-        return result;\n+        for (SimpleTableSegment each: result) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzQ0NDMzNQ=="}, "originalCommit": {"oid": "1b50e0fa9625a6282681ccebca812b418bd6b2e8"}, "originalPosition": 9}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1078, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}