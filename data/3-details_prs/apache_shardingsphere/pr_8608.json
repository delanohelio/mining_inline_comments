{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM5MTU5NTM0", "number": 8608, "title": "Provide Jaeger as tracing plugin ", "bodyText": "", "createdAt": "2020-12-14T05:56:38Z", "url": "https://github.com/apache/shardingsphere/pull/8608", "merged": true, "mergeCommit": {"oid": "44adab00a8f3800715d57f1b65d1370b4064b1e7"}, "closed": true, "closedAt": "2020-12-14T09:26:27Z", "author": {"login": "dmsolr"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdl_Pp0gH2gAyNTM5MTU5NTM0OmU1MTRiM2NiODJkNDQzNTRlMWUxZGYwMmY2OWY0NzFiNzdhNDMxZjk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdmA6nhgFqTU1MTExMTQyMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e514b3cb82d44354e1e1df02f69f471b77a431f9", "author": {"user": {"login": "dmsolr", "name": "Daming"}}, "url": "https://github.com/apache/shardingsphere/commit/e514b3cb82d44354e1e1df02f69f471b77a431f9", "committedDate": "2020-12-14T05:53:33Z", "message": "provide jaeger plugin"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d00623c4c600efbc6cbddd872b473afc177b0c65", "author": {"user": {"login": "dmsolr", "name": "Daming"}}, "url": "https://github.com/apache/shardingsphere/commit/d00623c4c600efbc6cbddd872b473afc177b0c65", "committedDate": "2020-12-14T05:54:02Z", "message": "provide jaeger plugin"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f324b8ed59e99e2bb1101abdbe84d99cc8d3e147", "author": {"user": {"login": "dmsolr", "name": "Daming"}}, "url": "https://github.com/apache/shardingsphere/commit/f324b8ed59e99e2bb1101abdbe84d99cc8d3e147", "committedDate": "2020-12-14T06:19:15Z", "message": "fix checkstyle"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUxMDcwNzQ4", "url": "https://github.com/apache/shardingsphere/pull/8608#pullrequestreview-551070748", "createdAt": "2020-12-14T06:19:57Z", "commit": {"oid": "d00623c4c600efbc6cbddd872b473afc177b0c65"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQwNjoxOTo1N1rOIFBeGw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQwNjoyMTo0M1rOIFBgdw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjEzNzg4Mw==", "bodyText": "version maybe common define", "url": "https://github.com/apache/shardingsphere/pull/8608#discussion_r542137883", "createdAt": "2020-12-14T06:19:57Z", "author": {"login": "yu199195"}, "path": "shardingsphere-agent/shardingsphere-agent-plugins/shardingsphere-agent-plugin-tracers/shardingsphere-agent-tracer-jaeger/pom.xml", "diffHunk": "@@ -28,10 +28,38 @@\n     </parent>\n \n     <packaging>jar</packaging>\n-    <artifactId>shardingsphere-agent-tracer-sample</artifactId>\n+    <artifactId>shardingsphere-agent-tracer-jaeger</artifactId>\n \n     <properties>\n-        <entrypoint.class>org.apache.shardingsphere.agent.plugin.trace.SamplePluginDefinition</entrypoint.class>\n+        <entrypoint.class>org.apache.shardingsphere.agent.plugin.trace.JaegerPluginDefinition</entrypoint.class>\n     </properties>\n \n+    <dependencies>\n+        <dependency>\n+            <groupId>io.jaegertracing</groupId>\n+            <artifactId>jaeger-client</artifactId>\n+            <version>0.31.0</version>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d00623c4c600efbc6cbddd872b473afc177b0c65"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjEzNzk5NA==", "bodyText": "remove this empty line", "url": "https://github.com/apache/shardingsphere/pull/8608#discussion_r542137994", "createdAt": "2020-12-14T06:20:18Z", "author": {"login": "yu199195"}, "path": "shardingsphere-agent/shardingsphere-agent-core/src/main/java/org/apache/shardingsphere/agent/core/plugin/AgentPluginLoader.java", "diffHunk": "@@ -262,7 +268,7 @@ public PluginAdviceDefinition loadPluginAdviceDefine(final TypeDescription typeD\n      * To get or create instance of the advice class. Create new one and caching when it is not exist.\n      *\n      * @param classNameOfAdvice class name of advice\n-     * @param <T> advice type\n+     * @param <T>               advice type", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d00623c4c600efbc6cbddd872b473afc177b0c65"}, "originalPosition": 55}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjEzODIyNQ==", "bodyText": "have empty line  in the end", "url": "https://github.com/apache/shardingsphere/pull/8608#discussion_r542138225", "createdAt": "2020-12-14T06:21:03Z", "author": {"login": "yu199195"}, "path": "shardingsphere-agent/shardingsphere-agent-distribution/src/main/resources/conf/agent.yaml", "diffHunk": "@@ -21,3 +21,11 @@ metrics:\n   host: localhost\n   port: 8090\n \n+tracing:\n+  agentHost: localhost\n+  agentPort: 5775\n+  extra:\n+    JAEGER_SAMPLER_TYPE: const\n+    JAEGER_SAMPLER_PARAM: 1\n+    JAEGER_REPORTER_LOG_SPANS: true\n+    JAEGER_REPORTER_FLUSH_INTERVAL: 1", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d00623c4c600efbc6cbddd872b473afc177b0c65"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjEzODQ4Nw==", "bodyText": "have empyt line\uff0c maybe use string.joins()", "url": "https://github.com/apache/shardingsphere/pull/8608#discussion_r542138487", "createdAt": "2020-12-14T06:21:43Z", "author": {"login": "yu199195"}, "path": "shardingsphere-agent/shardingsphere-agent-plugins/shardingsphere-agent-plugin-tracers/shardingsphere-agent-tracer-jaeger/src/main/java/org/apache/shardingsphere/agent/plugin/trace/advice/CommandExecutorTaskAdvice.java", "diffHunk": "@@ -16,31 +16,44 @@\n  *\n  */\n \n-package org.apache.shardingsphere.agent.plugin.trace;\n+package org.apache.shardingsphere.agent.plugin.trace.advice;\n \n+import io.opentracing.Scope;\n+import io.opentracing.tag.Tags;\n+import io.opentracing.util.GlobalTracer;\n import org.apache.shardingsphere.agent.core.plugin.advice.MethodAroundAdvice;\n import org.apache.shardingsphere.agent.core.plugin.advice.MethodInvocationResult;\n import org.apache.shardingsphere.agent.core.plugin.advice.TargetObject;\n+import org.apache.shardingsphere.agent.plugin.trace.ShardingErrorSpan;\n+import org.apache.shardingsphere.agent.plugin.trace.constant.ShardingTags;\n+import org.apache.shardingsphere.infra.executor.kernel.model.ExecutorDataMap;\n \n import java.lang.reflect.Method;\n \n /**\n- * Advice sample.\n+ * Command executor task advice.\n  */\n-public class SampleAdvice implements MethodAroundAdvice {\n-\n+public class CommandExecutorTaskAdvice implements MethodAroundAdvice {\n+    private static final String OPERATION_NAME = \"/\" + ShardingTags.COMPONENT_NAME + \"/rootInvoke/\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d00623c4c600efbc6cbddd872b473afc177b0c65"}, "originalPosition": 26}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b14301765ddbad17c0305c6df035dcfd7d576945", "author": {"user": {"login": "dmsolr", "name": "Daming"}}, "url": "https://github.com/apache/shardingsphere/commit/b14301765ddbad17c0305c6df035dcfd7d576945", "committedDate": "2020-12-14T06:33:17Z", "message": "fix checkstyle"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "95e9dcb229a33f2d5a338135e1824b88c762dc81", "author": {"user": {"login": "dmsolr", "name": "Daming"}}, "url": "https://github.com/apache/shardingsphere/commit/95e9dcb229a33f2d5a338135e1824b88c762dc81", "committedDate": "2020-12-14T06:51:33Z", "message": "fix license missing"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6207cbbf79f33fcc0779ac8cb92e907bac1ade15", "author": {"user": {"login": "dmsolr", "name": "Daming"}}, "url": "https://github.com/apache/shardingsphere/commit/6207cbbf79f33fcc0779ac8cb92e907bac1ade15", "committedDate": "2020-12-14T07:30:10Z", "message": "revert"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "11e92255b69faec625d7209828a4a03dea319c30", "author": {"user": {"login": "dmsolr", "name": "Daming"}}, "url": "https://github.com/apache/shardingsphere/commit/11e92255b69faec625d7209828a4a03dea319c30", "committedDate": "2020-12-14T07:38:57Z", "message": "Update pom.xml"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUxMTExNDIw", "url": "https://github.com/apache/shardingsphere/pull/8608#pullrequestreview-551111420", "createdAt": "2020-12-14T07:50:23Z", "commit": {"oid": "11e92255b69faec625d7209828a4a03dea319c30"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4239, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}