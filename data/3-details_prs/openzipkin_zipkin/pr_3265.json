{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTExMjU1NjAz", "number": 3265, "title": "Republishes zipkin-builder only when on master, as a separate job", "bodyText": "This should help prevent build timeouts", "createdAt": "2020-10-28T03:38:43Z", "url": "https://github.com/openzipkin/zipkin/pull/3265", "merged": true, "mergeCommit": {"oid": "bfaa01fbfe51b4227eab20461e433862f40d856e"}, "closed": true, "closedAt": "2020-10-28T08:13:35Z", "author": {"login": "codefromthecrypt"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdW1IklAH2gAyNTExMjU1NjAzOjhkN2IwZDhmMzNkNDQ0M2M3OWFmODI1OTQzMWZhN2MzNjdkODc2ODk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdW4kpigH2gAyNTExMjU1NjAzOmM0ZDE1NzFiNWIzOThmM2EwYWU0NzQwZGU4ZWJkYjY3MjE5MmRlYmY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "8d7b0d8f33d4443c79af8259431fa7c367d87689", "author": {"user": null}, "url": "https://github.com/openzipkin/zipkin/commit/8d7b0d8f33d4443c79af8259431fa7c367d87689", "committedDate": "2020-10-28T03:37:54Z", "message": "Republishes zipkin-builder only when on master, as a separate job\n\nThis should help prevent build timeouts"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE4MzAyNTEy", "url": "https://github.com/openzipkin/zipkin/pull/3265#pullrequestreview-518302512", "createdAt": "2020-10-28T03:40:16Z", "commit": {"oid": "8d7b0d8f33d4443c79af8259431fa7c367d87689"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQwMzo0MDoxNlrOHpY4tw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQwMzo0MDoxNlrOHpY4tw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzE2MTM5OQ==", "bodyText": "note: this is currently lying as I've not removed them from the bottom of the yaml, yet. Just yeah..", "url": "https://github.com/openzipkin/zipkin/pull/3265#discussion_r513161399", "createdAt": "2020-10-28T03:40:16Z", "author": {"login": "codefromthecrypt"}, "path": ".travis.yml", "diffHunk": "@@ -21,33 +21,49 @@ services:\n   - docker\n \n before_install:\n-  # Use OS package to update JDK\n-  - OPENJDK_VERSION=11\n-  - sudo apt-get -y install openjdk-${OPENJDK_VERSION}-jdk\n-  - export JAVA_HOME=/usr/lib/jvm/java-${OPENJDK_VERSION}-openjdk-amd64/\n-  - ./mvnw -version\n+  - |\n+    # Use JDK 11, so we can release Java 6 bytecode\n+    OPENJDK_VERSION=11\n+    sudo apt-get -y install openjdk-${OPENJDK_VERSION}-jdk\n+    export JAVA_HOME=/usr/lib/jvm/java-${OPENJDK_VERSION}-openjdk-amd64/\n+    ./mvnw -version\n \n-  # Required for Elasticsearch 5 (See https://github.com/docker-library/docs/tree/master/elasticsearch#host-setup)\n-  - sudo sysctl -w vm.max_map_count=262144\n+    # Required for Elasticsearch 5 (See https://github.com/docker-library/docs/tree/master/elasticsearch#host-setup)\n+    sudo sysctl -w vm.max_map_count=262144\n \n-  # Quiet Maven invoker logs (Downloading... when running zipkin-server/src/it)\n-  - echo \"MAVEN_OPTS='-Dorg.slf4j.simpleLogger.log.org.apache.maven.cli.transfer.Slf4jMavenTransferListener=warn'\" > ~/.mavenrc\n+    # Quiet Maven invoker logs (Downloading... when running zipkin-server/src/it)\n+    echo \"MAVEN_OPTS='-Dorg.slf4j.simpleLogger.log.org.apache.maven.cli.transfer.Slf4jMavenTransferListener=warn'\" > ~/.mavenrc\n \n-  # Disable testcontainers checks\n-  - echo checks.disable=true > ~/.testcontainers.properties\n-  # Log in to Docker Hub for releasing the image\n-  - echo \"$GH_TOKEN\"| docker login ghcr.io -u \"$GH_USER\" --password-stdin\n-  # allocate commits to CI, not the owner of the deploy key\n-  - git config user.name \"zipkinci\"\n-  - git config user.email \"zipkinci+zipkin-dev@googlegroups.com\"\n-  # setup https authentication credentials, used by ./mvnw release:prepare\n-  - git config credential.helper \"store --file=.git/credentials\"\n-  - echo \"https://$GH_TOKEN:@github.com\" > .git/credentials\n+    # Disable testcontainers checks\n+    echo checks.disable=true > ~/.testcontainers.properties\n \n-# Override default travis to use the maven wrapper\n-# * Use the \"release\" profile as that ensures the core jar ends up JRE 1.6 compatible\n-install: ./mvnw install -DskipTests=true -Dlicense.skip=true -Dmaven.javadoc.skip=true -B -V -Prelease\n-script: ./travis/publish.sh\n+    # Credentials entered into https://travis-ci.org/github/openzipkin/${REPO}/settings are access", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8d7b0d8f33d4443c79af8259431fa7c367d87689"}, "originalPosition": 43}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE4MzAyNzE5", "url": "https://github.com/openzipkin/zipkin/pull/3265#pullrequestreview-518302719", "createdAt": "2020-10-28T03:40:58Z", "commit": {"oid": "8d7b0d8f33d4443c79af8259431fa7c367d87689"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQwMzo0MDo1OFrOHpY5hw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQwMzo0MDo1OFrOHpY5hw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzE2MTYwNw==", "bodyText": "this re-does the build (including downloading stuff from maven), which timed out the last master run", "url": "https://github.com/openzipkin/zipkin/pull/3265#discussion_r513161607", "createdAt": "2020-10-28T03:40:58Z", "author": {"login": "codefromthecrypt"}, "path": "travis/publish.sh", "diffHunk": "@@ -155,11 +155,6 @@ push_docker_master() {\n     docker tag \"${image}:master\" \"ghcr.io/${image}:master\"\n     docker push \"ghcr.io/${image}:master\"\n   done\n-\n-  echo Building zipkin-builder\n-  docker/build_image zipkin-builder latest", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8d7b0d8f33d4443c79af8259431fa7c367d87689"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE4MzA2Mjk0", "url": "https://github.com/openzipkin/zipkin/pull/3265#pullrequestreview-518306294", "createdAt": "2020-10-28T03:53:42Z", "commit": {"oid": "8d7b0d8f33d4443c79af8259431fa7c367d87689"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c34ecb3605f0296af5dead208558ccf1ea7ba8fd", "author": {"user": null}, "url": "https://github.com/openzipkin/zipkin/commit/c34ecb3605f0296af5dead208558ccf1ea7ba8fd", "committedDate": "2020-10-28T05:17:55Z", "message": "Switches to faster container"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "077a90a5d8742e222ca10c9fb8a41772c12b6f7f", "author": {"user": null}, "url": "https://github.com/openzipkin/zipkin/commit/077a90a5d8742e222ca10c9fb8a41772c12b6f7f", "committedDate": "2020-10-28T05:18:03Z", "message": "Fixes flake #3255"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1896675c9cde696ac6ffcba6128f51754dd3a392", "author": {"user": null}, "url": "https://github.com/openzipkin/zipkin/commit/1896675c9cde696ac6ffcba6128f51754dd3a392", "committedDate": "2020-10-28T06:15:49Z", "message": "test flex"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "25ea172bcbeff32a57dd026566f5d6e24160ec0a", "author": {"user": null}, "url": "https://github.com/openzipkin/zipkin/commit/25ea172bcbeff32a57dd026566f5d6e24160ec0a", "committedDate": "2020-10-28T06:29:55Z", "message": "hush version complaints"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2e118cb6fee948786e8ee23e674820be23289a4c", "author": {"user": null}, "url": "https://github.com/openzipkin/zipkin/commit/2e118cb6fee948786e8ee23e674820be23289a4c", "committedDate": "2020-10-28T06:49:01Z", "message": "hush and test flex"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e2129f1f5d2c759412c98cf15559dda1fe770a38", "author": {"user": null}, "url": "https://github.com/openzipkin/zipkin/commit/e2129f1f5d2c759412c98cf15559dda1fe770a38", "committedDate": "2020-10-28T06:53:00Z", "message": "Rolls back arm as docker tests fail to start"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c4d1571b5b398f3a0ae4740de8ebdb672192debf", "author": {"user": null}, "url": "https://github.com/openzipkin/zipkin/commit/c4d1571b5b398f3a0ae4740de8ebdb672192debf", "committedDate": "2020-10-28T07:38:17Z", "message": "skip consistently or don't skip"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1358, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}