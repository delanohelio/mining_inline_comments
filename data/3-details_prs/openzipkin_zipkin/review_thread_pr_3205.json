{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg0OTY2MzY0", "number": 3205, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxMjo1NDoxMlrOEiiCFA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxMjo1NzoxMlrOEiiGYw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA0NjQ0NjI4OnYy", "diffSide": "LEFT", "path": "zipkin-lens/src/components/DependenciesPage/DependenciesGraph.tsx", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxMjo1NDoxMlrOHQdo0A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQyMzozMzowMlrOHQwbuQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzAyNDg0OA==", "bodyText": "I think this code is alive.\nWithout this code the cursor does not change when hovering over the clear button.\n\nWith this code:", "url": "https://github.com/openzipkin/zipkin/pull/3205#discussion_r487024848", "createdAt": "2020-09-11T12:54:12Z", "author": {"login": "tacigar"}, "path": "zipkin-lens/src/components/DependenciesPage/DependenciesGraph.tsx", "diffHunk": "@@ -94,10 +94,6 @@ const reactSelectStyles = {\n     ...base,\n     cursor: 'pointer',\n   }),\n-  clearIndicator: (base: CSSProperties) => ({\n-    ...base,\n-    cursor: 'pointer',\n-  }),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "97a711a3de9f72a9067b232c31b91ee9432203af"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzMzMjc5Mw==", "bodyText": "intellij analysis is imperfect :) I will put a comment that this is \"not quite dead\"", "url": "https://github.com/openzipkin/zipkin/pull/3205#discussion_r487332793", "createdAt": "2020-09-11T23:33:02Z", "author": {"login": "codefromthecrypt"}, "path": "zipkin-lens/src/components/DependenciesPage/DependenciesGraph.tsx", "diffHunk": "@@ -94,10 +94,6 @@ const reactSelectStyles = {\n     ...base,\n     cursor: 'pointer',\n   }),\n-  clearIndicator: (base: CSSProperties) => ({\n-    ...base,\n-    cursor: 'pointer',\n-  }),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzAyNDg0OA=="}, "originalCommit": {"oid": "97a711a3de9f72a9067b232c31b91ee9432203af"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA0NjQ1NzMxOnYy", "diffSide": "LEFT", "path": "zipkin-lens/src/slices/remoteServicesSlice.ts", "isResolved": true, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxMjo1NzoxMlrOHQdvjQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQwNDozMzo0NVrOHRwLcg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzAyNjU3Mw==", "bodyText": "Thanks!\nIt looks like these codes can be removed as well :)\n\n  \n    \n      zipkin/zipkin-lens/src/slices/remoteServicesSlice.ts\n    \n    \n        Lines 55 to 59\n      in\n      5562dd5\n    \n    \n    \n    \n\n        \n          \n           clearRemoteServices: (state) => { \n        \n\n        \n          \n             state.isLoading = false; \n        \n\n        \n          \n             state.remoteServices = []; \n        \n\n        \n          \n             state.error = undefined; \n        \n\n        \n          \n           }, \n        \n    \n  \n\n\n\n  \n    \n      zipkin/zipkin-lens/src/slices/spansSlice.ts\n    \n    \n        Lines 55 to 59\n      in\n      5562dd5\n    \n    \n    \n    \n\n        \n          \n           clearSpans: (state) => { \n        \n\n        \n          \n             state.isLoading = false; \n        \n\n        \n          \n             state.spans = []; \n        \n\n        \n          \n             state.error = undefined; \n        \n\n        \n          \n           }, \n        \n    \n  \n\n\n\n  \n    \n      zipkin/zipkin-lens/src/slices/spansSlice.ts\n    \n    \n         Line 80\n      in\n      5562dd5\n    \n    \n    \n    \n\n        \n          \n           export const { clearSpans } = spansSlice.actions;", "url": "https://github.com/openzipkin/zipkin/pull/3205#discussion_r487026573", "createdAt": "2020-09-11T12:57:12Z", "author": {"login": "tacigar"}, "path": "zipkin-lens/src/slices/remoteServicesSlice.ts", "diffHunk": "@@ -77,6 +77,4 @@ const remoteServicesSlice = createSlice({\n   },\n });\n \n-export const { clearRemoteServices } = remoteServicesSlice.actions;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "97a711a3de9f72a9067b232c31b91ee9432203af"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzMzMjg1NQ==", "bodyText": "great", "url": "https://github.com/openzipkin/zipkin/pull/3205#discussion_r487332855", "createdAt": "2020-09-11T23:33:20Z", "author": {"login": "codefromthecrypt"}, "path": "zipkin-lens/src/slices/remoteServicesSlice.ts", "diffHunk": "@@ -77,6 +77,4 @@ const remoteServicesSlice = createSlice({\n   },\n });\n \n-export const { clearRemoteServices } = remoteServicesSlice.actions;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzAyNjU3Mw=="}, "originalCommit": {"oid": "97a711a3de9f72a9067b232c31b91ee9432203af"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzU5MTkzNA==", "bodyText": "I am curious on these.. why can I remove them? Maybe you can tell me for each below:\nservicesSlice, autocompleteKeys - only loaded ever once, so no need to clear\nautocompleteValues - currently no reducer; data is partitioned by 'autocompleteKey'\nremoteServices, spans - reducer to remove; data partitioned by 'service'\ndependencies - contains a clear reducer, the data is not really cache-able except what's defined in HTTP\nLater I would like to refactor based on this conversation. I would like to delete code, just I don't understand when we need a reducer to clear and not. cc @anuraaga", "url": "https://github.com/openzipkin/zipkin/pull/3205#discussion_r487591934", "createdAt": "2020-09-13T23:33:27Z", "author": {"login": "codefromthecrypt"}, "path": "zipkin-lens/src/slices/remoteServicesSlice.ts", "diffHunk": "@@ -77,6 +77,4 @@ const remoteServicesSlice = createSlice({\n   },\n });\n \n-export const { clearRemoteServices } = remoteServicesSlice.actions;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzAyNjU3Mw=="}, "originalCommit": {"oid": "97a711a3de9f72a9067b232c31b91ee9432203af"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODI4OTM3Nw==", "bodyText": "zipkin/zipkin-lens/src/components/DiscoverPage/SearchBar/SearchBar.tsx\n    \n    \n        Lines 138 to 149\n      in\n      5562dd5\n    \n    \n    \n    \n\n        \n          \n           useEffect(() => { \n        \n\n        \n          \n             const criterion = criteria.find( \n        \n\n        \n          \n               // eslint-disable-next-line no-shadow \n        \n\n        \n          \n               (criterion) => criterion.key === 'serviceName', \n        \n\n        \n          \n             ); \n        \n\n        \n          \n             const serviceName = criterion ? criterion.value : ''; \n        \n\n        \n          \n             if (serviceName !== prevServiceName.current) { \n        \n\n        \n          \n               prevServiceName.current = serviceName; \n        \n\n        \n          \n               loadSpans(serviceName); \n        \n\n        \n          \n               loadRemoteServices(serviceName); \n        \n\n        \n          \n             } \n        \n\n        \n          \n           }, [criteria, loadSpans, loadRemoteServices]); \n        \n    \n  \n\n\nAs soon as service criterion is changed, the spans and remoteServices fetching will begin, and the previous spans and remoteServices will be cleared.\nSo I think there is no need to explicitly clear them.", "url": "https://github.com/openzipkin/zipkin/pull/3205#discussion_r488289377", "createdAt": "2020-09-14T23:16:14Z", "author": {"login": "tacigar"}, "path": "zipkin-lens/src/slices/remoteServicesSlice.ts", "diffHunk": "@@ -77,6 +77,4 @@ const remoteServicesSlice = createSlice({\n   },\n });\n \n-export const { clearRemoteServices } = remoteServicesSlice.actions;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzAyNjU3Mw=="}, "originalCommit": {"oid": "97a711a3de9f72a9067b232c31b91ee9432203af"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODM3NzIwMg==", "bodyText": "thanks!", "url": "https://github.com/openzipkin/zipkin/pull/3205#discussion_r488377202", "createdAt": "2020-09-15T04:33:45Z", "author": {"login": "codefromthecrypt"}, "path": "zipkin-lens/src/slices/remoteServicesSlice.ts", "diffHunk": "@@ -77,6 +77,4 @@ const remoteServicesSlice = createSlice({\n   },\n });\n \n-export const { clearRemoteServices } = remoteServicesSlice.actions;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzAyNjU3Mw=="}, "originalCommit": {"oid": "97a711a3de9f72a9067b232c31b91ee9432203af"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1240, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}