{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg3MDY1NTM2", "number": 3026, "title": "Migrate lens build to create-react-app", "bodyText": "I originally was motivated to do this since the eslint command wasn't working on Windows and expected CRA to take care of it - but in the end it didn't include a lint command... But anyways, less configs to manage ourselves.\nSome noticable differences from the previous code\n\nTypescript is enabled. We can start migrating files to typescript now, which we've wanted to do file a while. There's still a bit more work (mostly enabling lint for typescript) but I'll follow up in another PR for that\nNo devDependencies. CRA seems to default to a style of only having a single dependencies block, which does make sense to me since this isn't a library, so there isn't really anything gained from separating dev and non-dev\nZipkin logo switched from SVG to PNG. I noticed the SVG was just a base64-encoded PNG\nImport from react-router-dom instead of react-router since it reexports everything in react-router. I think this is more idiomatic than depending on both packages\nSome of the test data was javascript inside a JSON file. I think we had some workarounds in the jest config to deal with this but it's better to just migrate them to being proper javascript modules\nSimilarly, JSON files need the .json extension when importing from tests, this is conventional and we had custom in our jest config to break from convention\nbrowserlist specified to reduce bundle size by reducing polyfills. Notably, IE, which is the primary need for most polyfills now adays, isn't supported. Not sure if this is a good idea I can re-include it if needed.", "createdAt": "2020-03-12T06:32:53Z", "url": "https://github.com/openzipkin/zipkin/pull/3026", "merged": true, "mergeCommit": {"oid": "5675268be04c351f513d94c471b9776198caf1d6"}, "closed": true, "closedAt": "2020-03-12T07:58:16Z", "author": {"login": "anuraaga"}, "timelineItems": {"totalCount": 16, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcMiFb6gH2gAyMzg3MDY1NTM2OjhhNTA1NDQ3Mzc2YzU1M2I0ZWFmOTQ3YTM5NzQzNWU3MzQ5MjkzZjE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcM2RiQAH2gAyMzg3MDY1NTM2OmYyZTJlNmVmZTZiYzNlM2Y5YmRjOGE1OTY0ZTdmNDVjNGI5MmNiZDE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "8a505447376c553b4eaf947a397435e7349293f1", "author": {"user": {"login": "anuraaga", "name": "Anuraag Agrawal"}}, "url": "https://github.com/openzipkin/zipkin/commit/8a505447376c553b4eaf947a397435e7349293f1", "committedDate": "2020-03-11T07:35:53Z", "message": "Migrate to create-react-app"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "79bcfe67f30fef2a02d3a6a9626a01f1013fe885", "author": {"user": {"login": "anuraaga", "name": "Anuraag Agrawal"}}, "url": "https://github.com/openzipkin/zipkin/commit/79bcfe67f30fef2a02d3a6a9626a01f1013fe885", "committedDate": "2020-03-11T08:25:22Z", "message": "Fix tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "67cd436af58705f60a081dcc9cc4d30aa8137451", "author": {"user": {"login": "anuraaga", "name": "Anuraag Agrawal"}}, "url": "https://github.com/openzipkin/zipkin/commit/67cd436af58705f60a081dcc9cc4d30aa8137451", "committedDate": "2020-03-11T10:15:27Z", "message": "More migration"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0844bbb1e8d94bab7e8b66504e45a9b28ff51079", "author": {"user": {"login": "anuraaga", "name": "Anuraag Agrawal"}}, "url": "https://github.com/openzipkin/zipkin/commit/0844bbb1e8d94bab7e8b66504e45a9b28ff51079", "committedDate": "2020-03-12T05:04:59Z", "message": "Fix line endings"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f17686be8409fc37599c1cda39fdf27cadc3f09e", "author": {"user": {"login": "anuraaga", "name": "Anuraag Agrawal"}}, "url": "https://github.com/openzipkin/zipkin/commit/f17686be8409fc37599c1cda39fdf27cadc3f09e", "committedDate": "2020-03-12T05:05:08Z", "message": "Merge branch 'master' of github.com:openzipkin/zipkin into create-react-app"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1ca619ec4bfa6a965dc526e88d70d29b9d370167", "author": {"user": {"login": "anuraaga", "name": "Anuraag Agrawal"}}, "url": "https://github.com/openzipkin/zipkin/commit/1ca619ec4bfa6a965dc526e88d70d29b9d370167", "committedDate": "2020-03-12T05:30:23Z", "message": "Finish"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ec1aed1207fff6897301b4d62520f50dac598ad8", "author": {"user": {"login": "anuraaga", "name": "Anuraag Agrawal"}}, "url": "https://github.com/openzipkin/zipkin/commit/ec1aed1207fff6897301b4d62520f50dac598ad8", "committedDate": "2020-03-12T05:32:34Z", "message": "Finish"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7a02cee70fa02d8e7e2b07a5e5bf176ef723f1dd", "author": {"user": {"login": "anuraaga", "name": "Anuraag Agrawal"}}, "url": "https://github.com/openzipkin/zipkin/commit/7a02cee70fa02d8e7e2b07a5e5bf176ef723f1dd", "committedDate": "2020-03-12T05:41:30Z", "message": "Commit"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4f6a24cd6b60a767ed0d3d3443343e0f32f51e27", "author": {"user": {"login": "anuraaga", "name": "Anuraag Agrawal"}}, "url": "https://github.com/openzipkin/zipkin/commit/4f6a24cd6b60a767ed0d3d3443343e0f32f51e27", "committedDate": "2020-03-12T06:20:59Z", "message": "Finish"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4d8c1954d37e6f6a66255bfa3a61f8026f7208c9", "author": {"user": {"login": "anuraaga", "name": "Anuraag Agrawal"}}, "url": "https://github.com/openzipkin/zipkin/commit/4d8c1954d37e6f6a66255bfa3a61f8026f7208c9", "committedDate": "2020-03-12T06:23:57Z", "message": "Cleanup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5ee9167bfa0cf8c72d2ef7acc373a1bcd783fe9d", "author": {"user": {"login": "anuraaga", "name": "Anuraag Agrawal"}}, "url": "https://github.com/openzipkin/zipkin/commit/5ee9167bfa0cf8c72d2ef7acc373a1bcd783fe9d", "committedDate": "2020-03-12T06:26:10Z", "message": "Readme"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzczMzA2MjA0", "url": "https://github.com/openzipkin/zipkin/pull/3026#pullrequestreview-373306204", "createdAt": "2020-03-12T06:34:20Z", "commit": {"oid": "5ee9167bfa0cf8c72d2ef7acc373a1bcd783fe9d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQwNjozNDoyMVrOF1SpUg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQwNjozNDoyMVrOF1SpUg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTQyNDMzOA==", "bodyText": "Typescript found a stupid bug :)", "url": "https://github.com/openzipkin/zipkin/pull/3026#discussion_r391424338", "createdAt": "2020-03-12T06:34:21Z", "author": {"login": "anuraaga"}, "path": "zipkin-lens/src/setupTests.ts", "diffHunk": "@@ -12,44 +12,42 @@\n  * the License.\n  */\n \n-/* eslint-disable import/no-extraneous-dependencies */\n+import '@testing-library/jest-dom/extend-expect';\n \n-import '@testing-library/jest-dom';\n+import Enzyme from 'enzyme';\n+import EnzymeAdapter from 'enzyme-adapter-react-16';\n import fetchMock from 'fetch-mock';\n \n import { UI_CONFIG } from './constants/api';\n \n-const Enzyme = require('enzyme');\n-const EnzymeAdapter = require('enzyme-adapter-react-16');\n-\n Enzyme.configure({ adapter: new EnzymeAdapter() });\n \n // Mock out UI Config fetch with an empty config as a baseline, tests can remock as needed.\n fetchMock.mock(UI_CONFIG, {});\n \n // Mock out browser refresh.\n-const location = { window };\n+const { location } = window;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5ee9167bfa0cf8c72d2ef7acc373a1bcd783fe9d"}, "originalPosition": 24}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzczMzA3ODU0", "url": "https://github.com/openzipkin/zipkin/pull/3026#pullrequestreview-373307854", "createdAt": "2020-03-12T06:39:21Z", "commit": {"oid": "5ee9167bfa0cf8c72d2ef7acc373a1bcd783fe9d"}, "state": "APPROVED", "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQwNjozOToyMVrOF1SupA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQwNjo0Mjo0NlrOF1SyRA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTQyNTcwMA==", "bodyText": "thanks this helps", "url": "https://github.com/openzipkin/zipkin/pull/3026#discussion_r391425700", "createdAt": "2020-03-12T06:39:21Z", "author": {"login": "codefromthecrypt"}, "path": ".gitattributes", "diffHunk": "@@ -13,5 +13,9 @@\n *.properties text=auto eol=lf\n \n *.js text=auto eol=lf\n+*.jsx text=auto eol=lf\n+*.ts text=auto eol=lf\n+*.tsx text=auto eol=lf\n+*.json text=auto eol=lf", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5ee9167bfa0cf8c72d2ef7acc373a1bcd783fe9d"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTQyNTk1MA==", "bodyText": "maybe revert this stuff?", "url": "https://github.com/openzipkin/zipkin/pull/3026#discussion_r391425950", "createdAt": "2020-03-12T06:40:16Z", "author": {"login": "codefromthecrypt"}, "path": "zipkin-lens/README.md", "diffHunk": "@@ -9,37 +9,33 @@ Here are a couple example screen shots:\n \n ## Quick start\n \n-Zipkin-lens required nodejs 10.2.0 to start. You could easily try Zipkin-lens at local using any zipkin deployment using below command:\n+This project was bootstrapped with [Create React App](https://github.com/facebook/create-react-app).", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5ee9167bfa0cf8c72d2ef7acc373a1bcd783fe9d"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTQyNjExMg==", "bodyText": "manual merge needed for some of the below", "url": "https://github.com/openzipkin/zipkin/pull/3026#discussion_r391426112", "createdAt": "2020-03-12T06:40:50Z", "author": {"login": "codefromthecrypt"}, "path": "zipkin-lens/package.json", "diffHunk": "@@ -1,111 +1,89 @@\n {\n   \"name\": \"zipkin-lens\",\n   \"version\": \"0.0.1\",\n-  \"description\": \"\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5ee9167bfa0cf8c72d2ef7acc373a1bcd783fe9d"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTQyNjI0OQ==", "bodyText": "whoah heh", "url": "https://github.com/openzipkin/zipkin/pull/3026#discussion_r391426249", "createdAt": "2020-03-12T06:41:20Z", "author": {"login": "codefromthecrypt"}, "path": "zipkin-lens/public/index.html", "diffHunk": "@@ -17,9 +17,11 @@\n <html>\n   <head>\n     <base href=\"/zipkin/\">\n-    <meta charset=\"utf-8\">\n+    <meta charset=\"utf-8\" />\n+    <link rel=\"icon\" href=\"%PUBLIC_URL%/favicon.ico\" />\n   </head>\n   <body>\n-    <div id=\"app\"></div>\n+    <noscript>You need to enable JavaScript to run this app.</noscript>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5ee9167bfa0cf8c72d2ef7acc373a1bcd783fe9d"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTQyNjQwNQ==", "bodyText": "needed?", "url": "https://github.com/openzipkin/zipkin/pull/3026#discussion_r391426405", "createdAt": "2020-03-12T06:41:50Z", "author": {"login": "codefromthecrypt"}, "path": "zipkin-lens/src/react-app-env.d.ts", "diffHunk": "@@ -11,4 +11,4 @@\n  * or implied. See the License for the specific language governing permissions and limitations under\n  * the License.\n  */\n-module.exports = 'mock-file';\n+// / <reference types=\"react-scripts\" />", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5ee9167bfa0cf8c72d2ef7acc373a1bcd783fe9d"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTQyNjQ0MA==", "bodyText": "indeed", "url": "https://github.com/openzipkin/zipkin/pull/3026#discussion_r391426440", "createdAt": "2020-03-12T06:41:59Z", "author": {"login": "codefromthecrypt"}, "path": "zipkin-lens/src/setupTests.ts", "diffHunk": "@@ -12,44 +12,42 @@\n  * the License.\n  */\n \n-/* eslint-disable import/no-extraneous-dependencies */\n+import '@testing-library/jest-dom/extend-expect';\n \n-import '@testing-library/jest-dom';\n+import Enzyme from 'enzyme';\n+import EnzymeAdapter from 'enzyme-adapter-react-16';\n import fetchMock from 'fetch-mock';\n \n import { UI_CONFIG } from './constants/api';\n \n-const Enzyme = require('enzyme');\n-const EnzymeAdapter = require('enzyme-adapter-react-16');\n-\n Enzyme.configure({ adapter: new EnzymeAdapter() });\n \n // Mock out UI Config fetch with an empty config as a baseline, tests can remock as needed.\n fetchMock.mock(UI_CONFIG, {});\n \n // Mock out browser refresh.\n-const location = { window };\n+const { location } = window;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTQyNDMzOA=="}, "originalCommit": {"oid": "5ee9167bfa0cf8c72d2ef7acc373a1bcd783fe9d"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTQyNjYyOA==", "bodyText": "cool I didn't know this way to use plain json as js!", "url": "https://github.com/openzipkin/zipkin/pull/3026#discussion_r391426628", "createdAt": "2020-03-12T06:42:46Z", "author": {"login": "codefromthecrypt"}, "path": "zipkin-lens/src/test/data/skew.js", "diffHunk": "@@ -0,0 +1,66 @@\n+/*\n+ * Copyright 2015-2020 The OpenZipkin Authors\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software distributed under the License\n+ * is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express\n+ * or implied. See the License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+export default [", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5ee9167bfa0cf8c72d2ef7acc373a1bcd783fe9d"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4c59b9fa0bf784acb767bfa8b441953c669c4f91", "author": {"user": {"login": "anuraaga", "name": "Anuraag Agrawal"}}, "url": "https://github.com/openzipkin/zipkin/commit/4c59b9fa0bf784acb767bfa8b441953c669c4f91", "committedDate": "2020-03-12T06:48:07Z", "message": "More docs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5f629251668c0dedc6c571a0b83bd92fa4a745f8", "author": {"user": {"login": "anuraaga", "name": "Anuraag Agrawal"}}, "url": "https://github.com/openzipkin/zipkin/commit/5f629251668c0dedc6c571a0b83bd92fa4a745f8", "committedDate": "2020-03-12T06:53:33Z", "message": "Restore README"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f2e2e6efe6bc3e3f9bdc8a5964e7f45c4b92cbd1", "author": {"user": {"login": "anuraaga", "name": "Anuraag Agrawal"}}, "url": "https://github.com/openzipkin/zipkin/commit/f2e2e6efe6bc3e3f9bdc8a5964e7f45c4b92cbd1", "committedDate": "2020-03-12T07:07:12Z", "message": "Restore README point about coverage too"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1626, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}