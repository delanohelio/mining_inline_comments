{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY1MDUxNDI3", "number": 3171, "title": "es early deprecation fail", "bodyText": "fixes #2220", "createdAt": "2020-08-08T16:51:22Z", "url": "https://github.com/openzipkin/zipkin/pull/3171", "merged": true, "mergeCommit": {"oid": "9af0dd83349f0bd2e1b60ad366b3362e917fa31a"}, "closed": true, "closedAt": "2020-10-14T07:58:09Z", "author": {"login": "jorgheymans"}, "timelineItems": {"totalCount": 23, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc4YbyjgH2gAyNDY1MDUxNDI3OjUxYThhNTM1NzhmNGM0NGQ3NDU4ZDhiNjgyOTM3Y2ZhNmZiY2ExMTE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdSKl8XAH2gAyNDY1MDUxNDI3OmZlMWE5ZGQ2MzIwNDU0OGQyOTA5YWQ0OGM1YWIyOGFmNjY0Y2U4YzE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "51a8a53578f4c44d7458d8b682937cfa6fbca111", "author": {"user": {"login": "jorgheymans", "name": "Jorg Heymans"}}, "url": "https://github.com/openzipkin/zipkin/commit/51a8a53578f4c44d7458d8b682937cfa6fbca111", "committedDate": "2020-07-25T13:13:55Z", "message": "add note about handling retention"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "af182b80ba2a5a05272c0897acbbe17fbf6187df", "author": {"user": {"login": "jorgheymans", "name": "Jorg Heymans"}}, "url": "https://github.com/openzipkin/zipkin/commit/af182b80ba2a5a05272c0897acbbe17fbf6187df", "committedDate": "2020-07-25T13:17:48Z", "message": "Merge pull request #2 from openzipkin/elastic-retention\n\nadd note about handling retention"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b9b8603bb2727c25f4792ffe84e012728115e5a0", "author": {"user": {"login": "jorgheymans", "name": "Jorg Heymans"}}, "url": "https://github.com/openzipkin/zipkin/commit/b9b8603bb2727c25f4792ffe84e012728115e5a0", "committedDate": "2020-07-29T10:01:59Z", "message": "Merge branch 'master' of https://github.com/jorgheymans/zipkin"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "13b5ee021dde3010dfec18bd21b3847f87e849e2", "author": {"user": {"login": "jorgheymans", "name": "Jorg Heymans"}}, "url": "https://github.com/openzipkin/zipkin/commit/13b5ee021dde3010dfec18bd21b3847f87e849e2", "committedDate": "2020-08-08T07:17:45Z", "message": "Merge branch 'master' of https://github.com/openzipkin/zipkin"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY1NTIyMTk5", "url": "https://github.com/openzipkin/zipkin/pull/3171#pullrequestreview-465522199", "createdAt": "2020-08-12T00:55:06Z", "commit": {"oid": "7a987888500e3557e78a25f652e83c5338693b89"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQwMDo1NTowNlrOG_OGiA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQwMDo1NTowNlrOG_OGiA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODk0NDUyMA==", "bodyText": "if this is about index templates, possibly we can make this a test instead. ex we don't have ITEnsureIndexTemplate like in cassandra ITEnsureSchema. My assumption is that this is independent of api calls and so only needs to run once, but it should run after we setup the templates. having it as a separate test file will make this part more explicit and close to what fails imho.", "url": "https://github.com/openzipkin/zipkin/pull/3171#discussion_r468944520", "createdAt": "2020-08-12T00:55:06Z", "author": {"login": "codefromthecrypt"}, "path": "zipkin-storage/elasticsearch/src/test/java/zipkin2/elasticsearch/integration/ElasticsearchStorageExtension.java", "diffHunk": "@@ -71,6 +87,7 @@\n \n     try {\n       tryToInitializeSession();\n+      checkForDeprecatedFeatures();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7a987888500e3557e78a25f652e83c5338693b89"}, "originalPosition": 49}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "674e82c2ffb569ed335a97deaa7f94ff9584bbc5", "author": {"user": {"login": "jorgheymans", "name": "Jorg Heymans"}}, "url": "https://github.com/openzipkin/zipkin/commit/674e82c2ffb569ed335a97deaa7f94ff9584bbc5", "committedDate": "2020-09-10T07:14:22Z", "message": "Merge branch 'master' of https://github.com/openzipkin/zipkin"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "66885b6a7a90b7ea5c30b76cf93499a288792105", "author": {"user": {"login": "jorgheymans", "name": "Jorg Heymans"}}, "url": "https://github.com/openzipkin/zipkin/commit/66885b6a7a90b7ea5c30b76cf93499a288792105", "committedDate": "2020-10-03T10:10:42Z", "message": "Merge branch 'master' of https://github.com/openzipkin/zipkin"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a3b8c187a68aee3ea5631b451c8314b54f274f7c", "author": {"user": {"login": "jorgheymans", "name": "Jorg Heymans"}}, "url": "https://github.com/openzipkin/zipkin/commit/a3b8c187a68aee3ea5631b451c8314b54f274f7c", "committedDate": "2020-10-04T08:38:32Z", "message": "fix imports"}, "afterCommit": {"oid": "85f2ad8d412222dcd059abf89d2c64f134a7d897", "author": {"user": {"login": "jorgheymans", "name": "Jorg Heymans"}}, "url": "https://github.com/openzipkin/zipkin/commit/85f2ad8d412222dcd059abf89d2c64f134a7d897", "committedDate": "2020-08-08T16:50:44Z", "message": "fail IT upon detection of ES 'Warning' header"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c3034309b9ab53d83f62f7d6d24cefbdf88f1fb9", "author": {"user": {"login": "jorgheymans", "name": "Jorg Heymans"}}, "url": "https://github.com/openzipkin/zipkin/commit/c3034309b9ab53d83f62f7d6d24cefbdf88f1fb9", "committedDate": "2020-10-04T11:22:05Z", "message": "add global and per-method deprecation check"}, "afterCommit": {"oid": "d8bf129942419454316a05f920156727a321f0cb", "author": {"user": {"login": "jorgheymans", "name": "Jorg Heymans"}}, "url": "https://github.com/openzipkin/zipkin/commit/d8bf129942419454316a05f920156727a321f0cb", "committedDate": "2020-10-04T11:24:32Z", "message": "add global and per-method deprecation check"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "17b7a6ef11d9fec1dbda9e05670d936409356dc2", "author": {"user": {"login": "jorgheymans", "name": "Jorg Heymans"}}, "url": "https://github.com/openzipkin/zipkin/commit/17b7a6ef11d9fec1dbda9e05670d936409356dc2", "committedDate": "2020-10-04T11:29:47Z", "message": "add global and per-method deprecation check"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d8bf129942419454316a05f920156727a321f0cb", "author": {"user": {"login": "jorgheymans", "name": "Jorg Heymans"}}, "url": "https://github.com/openzipkin/zipkin/commit/d8bf129942419454316a05f920156727a321f0cb", "committedDate": "2020-10-04T11:24:32Z", "message": "add global and per-method deprecation check"}, "afterCommit": {"oid": "17b7a6ef11d9fec1dbda9e05670d936409356dc2", "author": {"user": {"login": "jorgheymans", "name": "Jorg Heymans"}}, "url": "https://github.com/openzipkin/zipkin/commit/17b7a6ef11d9fec1dbda9e05670d936409356dc2", "committedDate": "2020-10-04T11:29:47Z", "message": "add global and per-method deprecation check"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cae88e49cd4a63c33f03bab468030f36361d84b0", "author": {"user": {"login": "jorgheymans", "name": "Jorg Heymans"}}, "url": "https://github.com/openzipkin/zipkin/commit/cae88e49cd4a63c33f03bab468030f36361d84b0", "committedDate": "2020-10-04T12:02:24Z", "message": "lowercase 'warning' as header  names in Armeria are always lowercase."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9eabd8dba5ceba4f2da981d2ef2ab3a66a740dad", "author": {"user": {"login": "jorgheymans", "name": "Jorg Heymans"}}, "url": "https://github.com/openzipkin/zipkin/commit/9eabd8dba5ceba4f2da981d2ef2ab3a66a740dad", "committedDate": "2020-10-04T14:59:50Z", "message": "cluster warnings should not fail tests, because they rely on the configuration of our docker images which is not representative for a site instance. Nevertheless log a big WARN message so it's visible."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "48679213fb3f1e4d6f11f9308a750efc4394b026", "author": {"user": {"login": "jorgheymans", "name": "Jorg Heymans"}}, "url": "https://github.com/openzipkin/zipkin/commit/48679213fb3f1e4d6f11f9308a750efc4394b026", "committedDate": "2020-10-11T17:56:24Z", "message": "- more warning fixes\n- exclude colon warning for ES 6"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "72bda5515d29446503cc6a369333f044ebda354a", "author": {"user": {"login": "jorgheymans", "name": "Jorg Heymans"}}, "url": "https://github.com/openzipkin/zipkin/commit/72bda5515d29446503cc6a369333f044ebda354a", "committedDate": "2020-10-12T19:04:22Z", "message": "factor out deprecation warnings that should be ignored"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA2ODUyOTUx", "url": "https://github.com/openzipkin/zipkin/pull/3171#pullrequestreview-506852951", "createdAt": "2020-10-12T19:05:35Z", "commit": {"oid": "72bda5515d29446503cc6a369333f044ebda354a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQxOTowNTozNlrOHgKDzg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQxOTowNTozNlrOHgKDzg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzQ4MTI5NA==", "bodyText": "because triggers a deprecation warning on ES6", "url": "https://github.com/openzipkin/zipkin/pull/3171#discussion_r503481294", "createdAt": "2020-10-12T19:05:36Z", "author": {"login": "jorgheymans"}, "path": "zipkin-storage/elasticsearch/src/main/java/zipkin2/elasticsearch/VersionSpecificTemplates.java", "diffHunk": "@@ -63,9 +63,7 @@ String indexProperties(float version) {\n       + \"    \\\"index.number_of_shards\\\": \" + indexShards + \",\\n\"\n       + \"    \\\"index.number_of_replicas\\\": \" + indexReplicas + \",\\n\"\n       + \"    \\\"index.requests.cache.enable\\\": true\";\n-    // There is no explicit documentation of index.mapper.dynamic being removed in v7, but it was.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "72bda5515d29446503cc6a369333f044ebda354a"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1cdcb81aa428e42d13e697ed8a39f32913ab321d", "author": {"user": null}, "url": "https://github.com/openzipkin/zipkin/commit/1cdcb81aa428e42d13e697ed8a39f32913ab321d", "committedDate": "2020-10-13T04:49:33Z", "message": "license"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA3MDY3MDk3", "url": "https://github.com/openzipkin/zipkin/pull/3171#pullrequestreview-507067097", "createdAt": "2020-10-13T04:51:08Z", "commit": {"oid": "1cdcb81aa428e42d13e697ed8a39f32913ab321d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fdfbca4b1dec47af3ccd1133cd7ad7add9d1c027", "author": {"user": null}, "url": "https://github.com/openzipkin/zipkin/commit/fdfbca4b1dec47af3ccd1133cd7ad7add9d1c027", "committedDate": "2020-10-13T08:55:25Z", "message": "license"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "08ac52fe896828c78ba31d618a766732e9a2e54c", "author": {"user": {"login": "jorgheymans", "name": "Jorg Heymans"}}, "url": "https://github.com/openzipkin/zipkin/commit/08ac52fe896828c78ba31d618a766732e9a2e54c", "committedDate": "2020-10-13T08:56:33Z", "message": "trigger travis"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4c223412d9c6dc9b14ceae9bb331f475ce08079a", "author": {"user": {"login": "jorgheymans", "name": "Jorg Heymans"}}, "url": "https://github.com/openzipkin/zipkin/commit/4c223412d9c6dc9b14ceae9bb331f475ce08079a", "committedDate": "2020-10-13T08:56:46Z", "message": "Merge branch 'es-early-deprecation-warning' of https://github.com/openzipkin/zipkin into es-early-deprecation-warning"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0f54eed60dbccfb3f931ba0a0bdcba6d9f525292", "author": {"user": {"login": "jorgheymans", "name": "Jorg Heymans"}}, "url": "https://github.com/openzipkin/zipkin/commit/0f54eed60dbccfb3f931ba0a0bdcba6d9f525292", "committedDate": "2020-10-13T14:59:53Z", "message": "trigger travis"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fe1a9dd63204548d2909ad48c5ab28af664ce8c1", "author": {"user": {"login": "jorgheymans", "name": "Jorg Heymans"}}, "url": "https://github.com/openzipkin/zipkin/commit/fe1a9dd63204548d2909ad48c5ab28af664ce8c1", "committedDate": "2020-10-13T15:48:22Z", "message": "import, and we get to kick travis again."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1498, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}