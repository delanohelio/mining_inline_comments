{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY1MjU2MjM3", "number": 3173, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQwMzozNzowM1rOEWpWJw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQxOToyMjoxNlrOEW7XTA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkyMTgxNTQzOnYy", "diffSide": "RIGHT", "path": "docker/collector/kafka/install.sh", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQwMzozNzowM1rOG-AlZw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQwMzozNzowM1rOG-AlZw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzY3NDQ3MQ==", "bodyText": "ack that we are tossing the builder image so this part doesn't matter", "url": "https://github.com/openzipkin/zipkin/pull/3173#discussion_r467674471", "createdAt": "2020-08-10T03:37:03Z", "author": {"login": "codefromthecrypt"}, "path": "docker/collector/kafka/install.sh", "diffHunk": "@@ -41,4 +41,10 @@ EOF\n \n mkdir /kafka/logs\n \n+echo \"*** Cleaning Up\"\n+apk del jq curl --purge", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "846c368e3483a63e581959cf02b138b14a5546db"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkyMTgxNTc3OnYy", "diffSide": "RIGHT", "path": "docker/collector/kafka/install.sh", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQwMzozNzoyMlrOG-Alkw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQwMzozNzoyMlrOG-Alkw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzY3NDUxNQ==", "bodyText": "deleting site-docs brought the size back to the same as 2.5+scala 12", "url": "https://github.com/openzipkin/zipkin/pull/3173#discussion_r467674515", "createdAt": "2020-08-10T03:37:22Z", "author": {"login": "codefromthecrypt"}, "path": "docker/collector/kafka/install.sh", "diffHunk": "@@ -41,4 +41,10 @@ EOF\n \n mkdir /kafka/logs\n \n+echo \"*** Cleaning Up\"\n+apk del jq curl --purge\n+# TODO: eventually cleanup irrelevant binaries from RocksDB\n+# https://issues.apache.org/jira/browse/KAFKA-10380\n+rm -rf kafka_$SCALA_VERSION-$KAFKA_VERSION site-docs bin/windows", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "846c368e3483a63e581959cf02b138b14a5546db"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkyMTgxNzYwOnYy", "diffSide": "RIGHT", "path": "docker/collector/kafka/install.sh", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQwMzozOTozMlrOG-AmoA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQxODo0NDo0NlrOG-a4vg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzY3NDc4NA==", "bodyText": "biggest single jar is the embedded RocksDB with several OS binaries inside: 15MB", "url": "https://github.com/openzipkin/zipkin/pull/3173#discussion_r467674784", "createdAt": "2020-08-10T03:39:32Z", "author": {"login": "codefromthecrypt"}, "path": "docker/collector/kafka/install.sh", "diffHunk": "@@ -41,4 +41,10 @@ EOF\n \n mkdir /kafka/logs\n \n+echo \"*** Cleaning Up\"\n+apk del jq curl --purge\n+# TODO: eventually cleanup irrelevant binaries from RocksDB\n+# https://issues.apache.org/jira/browse/KAFKA-10380", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "846c368e3483a63e581959cf02b138b14a5546db"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODEwNTQwNg==", "bodyText": "Good point, I don't think those binaries are required on the kafka package.", "url": "https://github.com/openzipkin/zipkin/pull/3173#discussion_r468105406", "createdAt": "2020-08-10T18:44:46Z", "author": {"login": "jeqo"}, "path": "docker/collector/kafka/install.sh", "diffHunk": "@@ -41,4 +41,10 @@ EOF\n \n mkdir /kafka/logs\n \n+echo \"*** Cleaning Up\"\n+apk del jq curl --purge\n+# TODO: eventually cleanup irrelevant binaries from RocksDB\n+# https://issues.apache.org/jira/browse/KAFKA-10380", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzY3NDc4NA=="}, "originalCommit": {"oid": "846c368e3483a63e581959cf02b138b14a5546db"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkyNDc2NzQ4OnYy", "diffSide": "RIGHT", "path": "zipkin-collector/kafka/pom.xml", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQxOToyMjoxNlrOG-cGCQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMVQwMjozMDowMVrOG-mMDA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODEyNTE5Mw==", "bodyText": "Thanks for the reminder. I will check if testcontainers + zipkin kafka image can be used here to remove this dependency; similar to https://github.com/openzipkin-contrib/zipkin-storage-kafka/pull/70z", "url": "https://github.com/openzipkin/zipkin/pull/3173#discussion_r468125193", "createdAt": "2020-08-10T19:22:16Z", "author": {"login": "jeqo"}, "path": "zipkin-collector/kafka/pom.xml", "diffHunk": "@@ -29,6 +29,7 @@\n   <properties>\n     <main.basedir>${project.basedir}/../..</main.basedir>\n     <!-- when changing this, a change to the version of kafka-junit is likely needed, too -->\n+    <!-- TODO: update to 2.6.0 once https://github.com/charithe/kafka-junit/issues/54 is complete -->", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "846c368e3483a63e581959cf02b138b14a5546db"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODI5MDU3Mg==", "bodyText": "yeah we can use our own \"last image\" so that the version bumping matches on things like our mysql tests.", "url": "https://github.com/openzipkin/zipkin/pull/3173#discussion_r468290572", "createdAt": "2020-08-11T02:30:01Z", "author": {"login": "codefromthecrypt"}, "path": "zipkin-collector/kafka/pom.xml", "diffHunk": "@@ -29,6 +29,7 @@\n   <properties>\n     <main.basedir>${project.basedir}/../..</main.basedir>\n     <!-- when changing this, a change to the version of kafka-junit is likely needed, too -->\n+    <!-- TODO: update to 2.6.0 once https://github.com/charithe/kafka-junit/issues/54 is complete -->", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODEyNTE5Mw=="}, "originalCommit": {"oid": "846c368e3483a63e581959cf02b138b14a5546db"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1199, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}