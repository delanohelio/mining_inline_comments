{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEyOTQxMzEz", "number": 3270, "title": "Publishes multi-architecture Docker images", "bodyText": "This runs tests with linux/amd64, but publishes linux/amd64,linux/arm64.\nFixes #3141", "createdAt": "2020-10-30T11:46:28Z", "url": "https://github.com/openzipkin/zipkin/pull/3270", "merged": true, "mergeCommit": {"oid": "f1d19f0038fe04267b11d0e87da583fe6c4205d9"}, "closed": true, "closedAt": "2020-10-30T13:46:05Z", "author": {"login": "codefromthecrypt"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdXlTF1AH2gAyNTEyOTQxMzEzOmIzMjUwMzcwM2NiNTk3MGQ5NDE3ZWU5Y2YwMmQ0ZjZhMGNlYzk5MTU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdXlrrEgH2gAyNTEyOTQxMzEzOmQzYWRkNmM1YjBiODQzMDg0ODU4N2FiMGM5NjVjOWFkMGYwYTIwNDA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b32503703cb5970d9417ee9cf02d4f6a0cec9915", "author": {"user": null}, "url": "https://github.com/openzipkin/zipkin/commit/b32503703cb5970d9417ee9cf02d4f6a0cec9915", "committedDate": "2020-10-30T11:44:50Z", "message": "Publishes multi-architecture Docker images\n\nThis runs tests with linux/amd64, but publishes linux/amd64,linux/arm64.\n\nFixes #3141"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIwNTk0NDg1", "url": "https://github.com/openzipkin/zipkin/pull/3270#pullrequestreview-520594485", "createdAt": "2020-10-30T11:48:04Z", "commit": {"oid": "b32503703cb5970d9417ee9cf02d4f6a0cec9915"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQxMTo0ODowNVrOHrLqvw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQxMTo0ODowNVrOHrLqvw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTA0MTk4Mw==", "bodyText": "@odidev when this PR merges, it should be ready to build on arm64. However, I don't know currently how to get the github action syntax to do a double-matrix (ex focal with amd64,arm64 against the docker image list)", "url": "https://github.com/openzipkin/zipkin/pull/3270#discussion_r515041983", "createdAt": "2020-10-30T11:48:05Z", "author": {"login": "codefromthecrypt"}, "path": ".github/workflows/docker-tests.yml", "diffHunk": "@@ -46,7 +46,7 @@ jobs:\n         with:\n           fetch-depth: 1\n       - name: Build Docker image openzipkin/${{ matrix.target }}:test\n-        run:  docker/build_image ${{ matrix.target }}\n+        run:  docker/build_image openzipkin/${{ matrix.target }}:test", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b32503703cb5970d9417ee9cf02d4f6a0cec9915"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIwNTk0OTg3", "url": "https://github.com/openzipkin/zipkin/pull/3270#pullrequestreview-520594987", "createdAt": "2020-10-30T11:48:51Z", "commit": {"oid": "b32503703cb5970d9417ee9cf02d4f6a0cec9915"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQxMTo0ODo1MVrOHrLsTw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQxMTo0ODo1MVrOHrLsTw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTA0MjM4Mw==", "bodyText": "this cost a long time to figure out", "url": "https://github.com/openzipkin/zipkin/pull/3270#discussion_r515042383", "createdAt": "2020-10-30T11:48:51Z", "author": {"login": "codefromthecrypt"}, "path": "docker/bin/install.sh", "diffHunk": "@@ -23,6 +23,10 @@ if [ \"$RELEASE_FROM_CONTEXT\" = \"true\" ]; then\n   cp /code/zipkin-slim.jar zipkin-slim.jar\n elif [ \"$RELEASE_VERSION\" = \"master\" ]; then\n   echo \"*** Building from source...\"\n+\n+  # Defensively avoid arm64+alpine problems with posix_spawn\n+  export MAVEN_OPTS=\"-Djdk.lang.Process.launchMechanism=vfork\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b32503703cb5970d9417ee9cf02d4f6a0cec9915"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8f50dc4f448ca8ff8076c3df3a734d14b64f200b", "author": {"user": null}, "url": "https://github.com/openzipkin/zipkin/commit/8f50dc4f448ca8ff8076c3df3a734d14b64f200b", "committedDate": "2020-10-30T12:08:37Z", "message": "drift"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d3add6c5b0b8430848587ab0c965c9ad0f0a2040", "author": {"user": null}, "url": "https://github.com/openzipkin/zipkin/commit/d3add6c5b0b8430848587ab0c965c9ad0f0a2040", "committedDate": "2020-10-30T12:11:41Z", "message": "more drift"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1365, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}