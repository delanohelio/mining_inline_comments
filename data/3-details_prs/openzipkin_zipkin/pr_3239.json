{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA0MzEzMTI2", "number": 3239, "title": "disallow trace requests", "bodyText": "fixes #2286 (but mainly an excuse to dabble in Armeria a bit)", "createdAt": "2020-10-15T19:01:03Z", "url": "https://github.com/openzipkin/zipkin/pull/3239", "merged": true, "mergeCommit": {"oid": "b80e7ab3cc7dea62f9d354b5cfb3050b24faa290"}, "closed": true, "closedAt": "2020-10-17T23:18:36Z", "author": {"login": "jorgheymans"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc4YbyjgH2gAyNTA0MzEzMTI2OjUxYThhNTM1NzhmNGM0NGQ3NDU4ZDhiNjgyOTM3Y2ZhNmZiY2ExMTE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdTejLFAH2gAyNTA0MzEzMTI2OmI1OTUyZjQyYzg5NDMzNzI4ZjQ4N2FhMGI0NGMzYWM1N2FmODZhODY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "51a8a53578f4c44d7458d8b682937cfa6fbca111", "author": {"user": {"login": "jorgheymans", "name": "Jorg Heymans"}}, "url": "https://github.com/openzipkin/zipkin/commit/51a8a53578f4c44d7458d8b682937cfa6fbca111", "committedDate": "2020-07-25T13:13:55Z", "message": "add note about handling retention"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "af182b80ba2a5a05272c0897acbbe17fbf6187df", "author": {"user": {"login": "jorgheymans", "name": "Jorg Heymans"}}, "url": "https://github.com/openzipkin/zipkin/commit/af182b80ba2a5a05272c0897acbbe17fbf6187df", "committedDate": "2020-07-25T13:17:48Z", "message": "Merge pull request #2 from openzipkin/elastic-retention\n\nadd note about handling retention"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b9b8603bb2727c25f4792ffe84e012728115e5a0", "author": {"user": {"login": "jorgheymans", "name": "Jorg Heymans"}}, "url": "https://github.com/openzipkin/zipkin/commit/b9b8603bb2727c25f4792ffe84e012728115e5a0", "committedDate": "2020-07-29T10:01:59Z", "message": "Merge branch 'master' of https://github.com/jorgheymans/zipkin"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "13b5ee021dde3010dfec18bd21b3847f87e849e2", "author": {"user": {"login": "jorgheymans", "name": "Jorg Heymans"}}, "url": "https://github.com/openzipkin/zipkin/commit/13b5ee021dde3010dfec18bd21b3847f87e849e2", "committedDate": "2020-08-08T07:17:45Z", "message": "Merge branch 'master' of https://github.com/openzipkin/zipkin"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "674e82c2ffb569ed335a97deaa7f94ff9584bbc5", "author": {"user": {"login": "jorgheymans", "name": "Jorg Heymans"}}, "url": "https://github.com/openzipkin/zipkin/commit/674e82c2ffb569ed335a97deaa7f94ff9584bbc5", "committedDate": "2020-09-10T07:14:22Z", "message": "Merge branch 'master' of https://github.com/openzipkin/zipkin"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "66885b6a7a90b7ea5c30b76cf93499a288792105", "author": {"user": {"login": "jorgheymans", "name": "Jorg Heymans"}}, "url": "https://github.com/openzipkin/zipkin/commit/66885b6a7a90b7ea5c30b76cf93499a288792105", "committedDate": "2020-10-03T10:10:42Z", "message": "Merge branch 'master' of https://github.com/openzipkin/zipkin"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7ad853d033919b6aa29763e6331bb0967286a246", "author": {"user": {"login": "jorgheymans", "name": "Jorg Heymans"}}, "url": "https://github.com/openzipkin/zipkin/commit/7ad853d033919b6aa29763e6331bb0967286a246", "committedDate": "2020-10-13T12:01:52Z", "message": "Merge branch 'master' of https://github.com/openzipkin/zipkin"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d26e57ec7bfb0ddb3ee1339d63d43bd8d1a2d8a9", "author": {"user": {"login": "jorgheymans", "name": "Jorg Heymans"}}, "url": "https://github.com/openzipkin/zipkin/commit/d26e57ec7bfb0ddb3ee1339d63d43bd8d1a2d8a9", "committedDate": "2020-10-15T11:51:02Z", "message": "Merge branch 'master' of https://github.com/openzipkin/zipkin"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4d031d59b42ce9d88145282c964806cb0ee11c17", "author": {"user": {"login": "jorgheymans", "name": "Jorg Heymans"}}, "url": "https://github.com/openzipkin/zipkin/commit/4d031d59b42ce9d88145282c964806cb0ee11c17", "committedDate": "2020-10-15T18:37:13Z", "message": "add @Trace annotated method with regexp matching anything"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "23b37654d8ed15b5038a8a48bf60d7c13802f89c", "author": {"user": {"login": "jorgheymans", "name": "Jorg Heymans"}}, "url": "https://github.com/openzipkin/zipkin/commit/23b37654d8ed15b5038a8a48bf60d7c13802f89c", "committedDate": "2020-10-15T18:58:32Z", "message": "add test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "52903c44c018353b9403c850c297a5689bd8cc87", "author": {"user": {"login": "jorgheymans", "name": "Jorg Heymans"}}, "url": "https://github.com/openzipkin/zipkin/commit/52903c44c018353b9403c850c297a5689bd8cc87", "committedDate": "2020-10-15T19:21:36Z", "message": "don't even need leading slash here"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA5Njk3MjU0", "url": "https://github.com/openzipkin/zipkin/pull/3239#pullrequestreview-509697254", "createdAt": "2020-10-15T19:23:14Z", "commit": {"oid": "52903c44c018353b9403c850c297a5689bd8cc87"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQxOToyMzoxNFrOHiWp6g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQxOToyMzoxNFrOHiWp6g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTc4NDgxMA==", "bodyText": "couldn't find a global toggle to disallow it, hence this workaround. @anuraaga does this please you ?", "url": "https://github.com/openzipkin/zipkin/pull/3239#discussion_r505784810", "createdAt": "2020-10-15T19:23:14Z", "author": {"login": "jorgheymans"}, "path": "zipkin-server/src/main/java/zipkin2/server/internal/ZipkinQueryApiV2.java", "diffHunk": "@@ -202,6 +204,12 @@ public AggregatedHttpResponse getAutocompleteValues(\n     return maybeCacheNames(values.size() > 3, values, ctx.alloc());\n   }\n \n+  @Trace(\"regex:^.*$\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "52903c44c018353b9403c850c297a5689bd8cc87"}, "originalPosition": 20}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b5952f42c89433728f487aa0b44c3ac57af86a86", "author": {"user": {"login": "jorgheymans", "name": "Jorg Heymans"}}, "url": "https://github.com/openzipkin/zipkin/commit/b5952f42c89433728f487aa0b44c3ac57af86a86", "committedDate": "2020-10-17T17:37:22Z", "message": "follow recommendation of Armeria devs on how to disallow TRACE requests"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1333, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}