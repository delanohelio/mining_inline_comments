{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA1NjI5NTc5", "number": 3069, "title": "Use state-controlled snackbar to allow easy error messages from async\u2026", "bodyText": "\u2026 clows.\nMigrates from notistack to our own controlled snackbar. To display errors from RPCs, which happen outside the scope of a component, it's simpler to use our normal redux actions for controlling the message instead of notistack.\n@tacigar Note, this introduces a new pattern I hinted at in the other PR of defining everything about the a state (action, reducer) in a component itself instead of globally, and uses the official redux-toolkit and createSlice for very low boilerplate with type-safety.\nI've also brought in RootState from your PR, but put it at /store instead of /types to follow the pattern of semantic separation. Let me know if you're ok with it.\nThis is to prepare for #3068", "createdAt": "2020-04-19T09:05:03Z", "url": "https://github.com/openzipkin/zipkin/pull/3069", "merged": true, "mergeCommit": {"oid": "b897c72d194f291a71806631047d1bd5ab13130e"}, "closed": true, "closedAt": "2020-04-20T06:12:35Z", "author": {"login": "anuraaga"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcZGvwfgH2gAyNDA1NjI5NTc5OjQ1YTJhNWJhOTQ2NDY0OTNiYjQ3Yjg4YmVjNGU1MzliYmQ5M2JhZmY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcZICQxAFqTM5NjAwMTYyNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "45a2a5ba94646493bb47b88bec4e539bbd93baff", "author": {"user": {"login": "anuraaga", "name": "Anuraag Agrawal"}}, "url": "https://github.com/openzipkin/zipkin/commit/45a2a5ba94646493bb47b88bec4e539bbd93baff", "committedDate": "2020-04-19T09:05:47Z", "message": "Use state-controlled snackbar to allow easy error messages from async clows."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "883402522b26ee2a73ca8db98f1dcee498978a4f", "author": {"user": {"login": "anuraaga", "name": "Anuraag Agrawal"}}, "url": "https://github.com/openzipkin/zipkin/commit/883402522b26ee2a73ca8db98f1dcee498978a4f", "committedDate": "2020-04-19T09:04:39Z", "message": "Use state-controlled snackbar to allow easy error messages from async clows."}, "afterCommit": {"oid": "45a2a5ba94646493bb47b88bec4e539bbd93baff", "author": {"user": {"login": "anuraaga", "name": "Anuraag Agrawal"}}, "url": "https://github.com/openzipkin/zipkin/commit/45a2a5ba94646493bb47b88bec4e539bbd93baff", "committedDate": "2020-04-19T09:05:47Z", "message": "Use state-controlled snackbar to allow easy error messages from async clows."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8f520733b3705f0c6ff94e66045dbe8f76795cf7", "author": {"user": {"login": "anuraaga", "name": "Anuraag Agrawal"}}, "url": "https://github.com/openzipkin/zipkin/commit/8f520733b3705f0c6ff94e66045dbe8f76795cf7", "committedDate": "2020-04-19T09:22:09Z", "message": "Export action creators individually like tutorial, maybe more idiomatic."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e99d63e590e321f33ec98af1b841acae7e7faa94", "author": {"user": {"login": "anuraaga", "name": "Anuraag Agrawal"}}, "url": "https://github.com/openzipkin/zipkin/commit/e99d63e590e321f33ec98af1b841acae7e7faa94", "committedDate": "2020-04-19T09:22:52Z", "message": "Rename callback to better match callback."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f6215130874f97b2f8ec390d799e8301253b583c", "author": {"user": {"login": "anuraaga", "name": "Anuraag Agrawal"}}, "url": "https://github.com/openzipkin/zipkin/commit/f6215130874f97b2f8ec390d799e8301253b583c", "committedDate": "2020-04-19T09:24:23Z", "message": "Don't export not-imported."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "87b3a35640c5fa9fa98376786424b3716efb776e", "author": {"user": {"login": "anuraaga", "name": "Anuraag Agrawal"}}, "url": "https://github.com/openzipkin/zipkin/commit/87b3a35640c5fa9fa98376786424b3716efb776e", "committedDate": "2020-04-19T09:44:59Z", "message": "Test and revert unintended"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2MDAxNjI2", "url": "https://github.com/openzipkin/zipkin/pull/3069#pullrequestreview-396001626", "createdAt": "2020-04-19T10:33:55Z", "commit": {"oid": "87b3a35640c5fa9fa98376786424b3716efb776e"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xOVQxMDozMzo1NVrOGH1vIg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xOVQxMDozNDo0NFrOGH1vsQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDg3MzYzNA==", "bodyText": "livin on the edge!", "url": "https://github.com/openzipkin/zipkin/pull/3069#discussion_r410873634", "createdAt": "2020-04-19T10:33:55Z", "author": {"login": "codefromthecrypt"}, "path": "zipkin-lens/package.json", "diffHunk": "@@ -20,8 +20,10 @@\n     \"@lingui/macro\": \"3.0.0-7\",\n     \"@lingui/react\": \"3.0.0-7\",\n     \"@material-ui/core\": \"^4.1.1\",\n+    \"@material-ui/lab\": \"^4.0.0-alpha.50\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "87b3a35640c5fa9fa98376786424b3716efb776e"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDg3Mzc3Nw==", "bodyText": "alphabetically ordering the routes, eh? :D", "url": "https://github.com/openzipkin/zipkin/pull/3069#discussion_r410873777", "createdAt": "2020-04-19T10:34:44Z", "author": {"login": "codefromthecrypt"}, "path": "zipkin-lens/src/components/App/App.jsx", "diffHunk": "@@ -33,41 +32,41 @@ import { i18n } from '../../util/locale';\n \n import { BASE_PATH } from '../../constants/api';\n \n+import AlertSnackbar from './AlertSnackbar';\n+\n const App = () => {\n   useDocumentTitle('Zipkin');\n   return (\n     <Suspense fallback={<CircularProgress />}>\n       <UiConfig>\n         <MuiPickersUtilsProvider utils={MomentUtils}>\n           <ThemeProvider theme={theme}>\n-            {/* Snackbar is used to provide popup alerts to the user */}\n-            <SnackbarProvider>\n-              <UiConfigConsumer>\n-                {(config) => (\n-                  <Provider store={configureStore(config)}>\n-                    <I18nProvider i18n={i18n}>\n-                      <BrowserRouter basename={BASE_PATH}>\n-                        <Layout>\n-                          <Route exact path=\"/\" component={DiscoverPage} />\n-                          {config.dependency.enabled && (\n-                            <Route\n-                              exact\n-                              path=\"/dependency\"\n-                              component={DependenciesPage}\n-                            />\n-                          )}\n+            <UiConfigConsumer>\n+              {(config) => (\n+                <Provider store={configureStore(config)}>\n+                  <AlertSnackbar />\n+                  <I18nProvider i18n={i18n}>\n+                    <BrowserRouter basename={BASE_PATH}>\n+                      <Layout>\n+                        <Route exact path=\"/\" component={DiscoverPage} />\n+                        {config.dependency.enabled && (\n                           <Route\n                             exact\n-                            path={['/traces/:traceId', '/traceViewer']}\n-                            component={TracePage}\n+                            path=\"/dependency\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "87b3a35640c5fa9fa98376786424b3716efb776e"}, "originalPosition": 50}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1657, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}