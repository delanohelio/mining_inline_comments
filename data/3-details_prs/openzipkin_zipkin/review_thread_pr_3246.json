{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA1NDM1MjI4", "number": 3246, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOFQwODozMjowNVrOEu5c5A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOFQwODozNDowMlrOEu5eSw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE3NjExMjM2OnYy", "diffSide": "RIGHT", "path": "docker/storage/cassandra/install.sh", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOFQwODozMjowNVrOHjjb2A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOFQwODozMjowNVrOHjjb2A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzA0Mjc3Ng==", "bodyText": "while this enables it, heh we still get server side warnings 'SASI indexes are experimental and are not recommended for production use.'", "url": "https://github.com/openzipkin/zipkin/pull/3246#discussion_r507042776", "createdAt": "2020-10-18T08:32:05Z", "author": {"login": "codefromthecrypt"}, "path": "docker/storage/cassandra/install.sh", "diffHunk": "@@ -26,7 +26,9 @@ wget -qO- $APACHE_MIRROR/cassandra/$CASSANDRA_VERSION/apache-cassandra-$CASSANDR\n   --strip=1\n \n # Merge in our custom configuration\n-sed -i '/enable_user_defined_functions: false/cenable_user_defined_functions: true' conf/cassandra.yaml\n+for feature in enable_user_defined_functions enable_sasi_indexes; do", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d615cd0a09c1f114af5a93e3906e77beb46a97b9"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE3NjExMzQ1OnYy", "diffSide": "RIGHT", "path": "zipkin-server/pom.xml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOFQwODozMjozNFrOHjjcoQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOFQwODozMjozNFrOHjjcoQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzA0Mjk3Nw==", "bodyText": "something else to upgrade now :)", "url": "https://github.com/openzipkin/zipkin/pull/3246#discussion_r507042977", "createdAt": "2020-10-18T08:32:34Z", "author": {"login": "codefromthecrypt"}, "path": "zipkin-server/pom.xml", "diffHunk": "@@ -248,12 +235,12 @@\n       <artifactId>brave-context-slf4j</artifactId>\n       <optional>true</optional>\n     </dependency>\n-    <dependency>\n-      <groupId>io.zipkin.brave.cassandra</groupId>\n-      <artifactId>brave-instrumentation-cassandra-driver</artifactId>\n-      <version>0.10.3</version>\n-      <optional>true</optional>\n-    </dependency>\n+<!--    <dependency>-->\n+<!--      <groupId>io.zipkin.brave.cassandra</groupId>-->", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d615cd0a09c1f114af5a93e3906e77beb46a97b9"}, "originalPosition": 53}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE3NjExNDcxOnYy", "diffSide": "RIGHT", "path": "zipkin-server/src/main/java/zipkin2/server/internal/cassandra3/ZipkinCassandra3StorageConfiguration.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOFQwODozMzoxN1rOHjjddw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOFQwODozMzoxN1rOHjjddw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzA0MzE5MQ==", "bodyText": "@jeqo this is the style you can use for kafka (not the commenting out :P)", "url": "https://github.com/openzipkin/zipkin/pull/3246#discussion_r507043191", "createdAt": "2020-10-18T08:33:17Z", "author": {"login": "codefromthecrypt"}, "path": "zipkin-server/src/main/java/zipkin2/server/internal/cassandra3/ZipkinCassandra3StorageConfiguration.java", "diffHunk": "@@ -84,11 +82,11 @@ StorageComponent storage(\n     }\n \n     @Override public Object postProcessAfterInitialization(Object bean, String beanName) {\n-      if (bean instanceof SessionFactory && beanFactory.containsBean(\"tracing\")) {\n-        SessionFactory delegate = (SessionFactory) bean;\n-        Tracing tracing = beanFactory.getBean(Tracing.class);\n-        return (SessionFactory) storage -> TracingSession.create(tracing, delegate.create(storage));\n-      }\n+      //if (bean instanceof SessionFactory && beanFactory.containsBean(\"tracing\")) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d615cd0a09c1f114af5a93e3906e77beb46a97b9"}, "originalPosition": 25}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE3NjExNTk1OnYy", "diffSide": "RIGHT", "path": "zipkin-storage/cassandra-v1/src/main/java/zipkin2/storage/cassandra/v1/CassandraUtil.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOFQwODozNDowMlrOHjjeOQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOFQwODozNDowMlrOHjjeOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzA0MzM4NQ==", "bodyText": "instant -> timestamp column", "url": "https://github.com/openzipkin/zipkin/pull/3246#discussion_r507043385", "createdAt": "2020-10-18T08:34:02Z", "author": {"login": "codefromthecrypt"}, "path": "zipkin-storage/cassandra-v1/src/main/java/zipkin2/storage/cassandra/v1/CassandraUtil.java", "diffHunk": "@@ -144,10 +146,10 @@ static ByteBuffer toByteBuffer(String string) {\n   }\n \n   @SuppressWarnings(\"JdkObsolete\")\n-  static List<Date> getDays(long endTs, @Nullable Long lookback) {\n-    List<Date> result = new ArrayList<>();\n+  static List<Instant> getDays(long endTs, @Nullable Long lookback) {\n+    List<Instant> result = new ArrayList<>();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d615cd0a09c1f114af5a93e3906e77beb46a97b9"}, "originalPosition": 22}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1054, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}