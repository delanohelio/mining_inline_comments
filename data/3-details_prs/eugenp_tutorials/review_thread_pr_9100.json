{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAyOTk5NTE1", "number": 9100, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QwMzoxMTozNlrOD1EZyg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QwMzoxMjo1NFrOD1Ea3g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU2OTczMjU4OnYy", "diffSide": "RIGHT", "path": "persistence-modules/spring-persistence-simple-2/src/main/java/com/baeldung/jdbc/EmployeeDAO.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QwMzoxMTozNlrOGKUnOQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QwMzoxMTozNlrOGKUnOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzQ3NjY2NQ==", "bodyText": "To improve readability, we could move the first parameter to the query method to its own line.", "url": "https://github.com/eugenp/tutorials/pull/9100#discussion_r413476665", "createdAt": "2020-04-23T03:11:36Z", "author": {"login": "KevinGilmore"}, "path": "persistence-modules/spring-persistence-simple-2/src/main/java/com/baeldung/jdbc/EmployeeDAO.java", "diffHunk": "@@ -1,21 +1,64 @@\n package com.baeldung.jdbc;\n \n+import java.util.ArrayList;\n+import java.util.Collections;\n+import java.util.List;\n+\n import javax.sql.DataSource;\n \n import org.springframework.jdbc.core.JdbcTemplate;\n+import org.springframework.jdbc.core.namedparam.MapSqlParameterSource;\n+import org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate;\n+import org.springframework.jdbc.core.namedparam.SqlParameterSource;\n import org.springframework.stereotype.Repository;\n \n @Repository\n public class EmployeeDAO {\n     private JdbcTemplate jdbcTemplate;\n+    private NamedParameterJdbcTemplate namedJdbcTemplate;\n \n     public void setDataSource(DataSource dataSource) {\n         jdbcTemplate = new JdbcTemplate(dataSource);\n+        namedJdbcTemplate = new NamedParameterJdbcTemplate(dataSource);\n     }\n \n     public int getCountOfEmployees() {\n         return jdbcTemplate.queryForObject(\"SELECT COUNT(*) FROM EMPLOYEE\", Integer.class);\n     }\n \n-   \n+    public List<Employee> getEmployeesFromIdListNamed(List<Integer> ids) {\n+        SqlParameterSource parameters = new MapSqlParameterSource(\"ids\", ids);\n+        List<Employee> employees = namedJdbcTemplate.query(\"SELECT * FROM EMPLOYEE WHERE id IN (:ids)\", \n+          parameters, \n+          (rs, rowNum) -> new Employee(rs.getInt(\"id\"), rs.getString(\"first_name\"), rs.getString(\"last_name\")));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1272006aa6a10491a0d6cd1a16845c674be2f11c"}, "originalPosition": 34}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU2OTczNTM0OnYy", "diffSide": "RIGHT", "path": "persistence-modules/spring-persistence-simple-2/src/main/java/com/baeldung/jdbc/EmployeeDAO.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QwMzoxMjo1NFrOGKUoqg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QwMzoxMjo1NFrOGKUoqg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzQ3NzAzNA==", "bodyText": "Same as above -- move the parameter containing the SQL statement to its own line.", "url": "https://github.com/eugenp/tutorials/pull/9100#discussion_r413477034", "createdAt": "2020-04-23T03:12:54Z", "author": {"login": "KevinGilmore"}, "path": "persistence-modules/spring-persistence-simple-2/src/main/java/com/baeldung/jdbc/EmployeeDAO.java", "diffHunk": "@@ -1,21 +1,64 @@\n package com.baeldung.jdbc;\n \n+import java.util.ArrayList;\n+import java.util.Collections;\n+import java.util.List;\n+\n import javax.sql.DataSource;\n \n import org.springframework.jdbc.core.JdbcTemplate;\n+import org.springframework.jdbc.core.namedparam.MapSqlParameterSource;\n+import org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate;\n+import org.springframework.jdbc.core.namedparam.SqlParameterSource;\n import org.springframework.stereotype.Repository;\n \n @Repository\n public class EmployeeDAO {\n     private JdbcTemplate jdbcTemplate;\n+    private NamedParameterJdbcTemplate namedJdbcTemplate;\n \n     public void setDataSource(DataSource dataSource) {\n         jdbcTemplate = new JdbcTemplate(dataSource);\n+        namedJdbcTemplate = new NamedParameterJdbcTemplate(dataSource);\n     }\n \n     public int getCountOfEmployees() {\n         return jdbcTemplate.queryForObject(\"SELECT COUNT(*) FROM EMPLOYEE\", Integer.class);\n     }\n \n-   \n+    public List<Employee> getEmployeesFromIdListNamed(List<Integer> ids) {\n+        SqlParameterSource parameters = new MapSqlParameterSource(\"ids\", ids);\n+        List<Employee> employees = namedJdbcTemplate.query(\"SELECT * FROM EMPLOYEE WHERE id IN (:ids)\", \n+          parameters, \n+          (rs, rowNum) -> new Employee(rs.getInt(\"id\"), rs.getString(\"first_name\"), rs.getString(\"last_name\")));\n+\n+        return employees;\n+    }\n+\n+    public List<Employee> getEmployeesFromIdList(List<Integer> ids) {\n+        String inSql = String.join(\",\", Collections.nCopies(ids.size(), \"?\"));\n+        List<Employee> employees = jdbcTemplate.query(String.format(\"SELECT * FROM EMPLOYEE WHERE id IN (%s)\", inSql), \n+          ids.toArray(), \n+          (rs, rowNum) -> new Employee(rs.getInt(\"id\"), rs.getString(\"first_name\"), rs.getString(\"last_name\")));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1272006aa6a10491a0d6cd1a16845c674be2f11c"}, "originalPosition": 43}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4036, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}