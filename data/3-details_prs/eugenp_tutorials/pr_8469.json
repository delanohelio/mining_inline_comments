{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzU4OTgxODc0", "number": 8469, "title": "[BAEL-3339] - Creates @CurrentSecurityContext example", "bodyText": "", "createdAt": "2020-01-03T13:04:10Z", "url": "https://github.com/eugenp/tutorials/pull/8469", "merged": true, "mergeCommit": {"oid": "2a91ba9a1fafa402a1feb213833a49fff94c2149"}, "closed": true, "closedAt": "2020-01-26T22:21:46Z", "author": {"login": "jesperancinha"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb2w7LJgH2gAyMzU4OTgxODc0OmNkOWI3ZjZjZmM5YWE2ZWM4NDVmYTQzMDNjYTRiM2E0NDkyMGYxZjg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb8ziN1gH2gAyMzU4OTgxODc0OmFlZjY3M2IyMGY1MmZlNDJkYzU2NDYyZWRlZDIyZmExODVhZWE3ZmM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "cd9b7f6cfc9aa6ec845fa4303ca4b3a44920f1f8", "author": {"user": {"login": "jesperancinha", "name": "Jo\u00e3o Filipe Sabino Esperancinha"}}, "url": "https://github.com/eugenp/tutorials/commit/cd9b7f6cfc9aa6ec845fa4303ca4b3a44920f1f8", "committedDate": "2020-01-03T16:26:55Z", "message": "[BAEL-3339] - Creates @CurrentSecurityContext example"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM4MzYxODA5", "url": "https://github.com/eugenp/tutorials/pull/8469#pullrequestreview-338361809", "createdAt": "2020-01-04T17:18:59Z", "commit": {"oid": "03e16a23d1dec782c448a217e5936ea1cf6f5f27"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wNFQxNzoxODo1OVrOFaOiVQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wNFQxNzoyMDoyMVrOFaOiiA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzA0NTQ2MQ==", "bodyText": "These fields would normally be private in a unit test.", "url": "https://github.com/eugenp/tutorials/pull/8469#discussion_r363045461", "createdAt": "2020-01-04T17:18:59Z", "author": {"login": "ashleyfrieze"}, "path": "spring-boot-security/src/test/java/com/baeldung/springbootsecurity/oauth2server/CustomConfigAuthorizationServerIntegrationTest.java", "diffHunk": "@@ -1,33 +1,68 @@\n package com.baeldung.springbootsecurity.oauth2server;\n \n+import org.apache.commons.io.IOUtils;\n+import org.junit.Before;\n import org.junit.Test;\n import org.junit.runner.RunWith;\n+import org.mockito.internal.util.io.IOUtil;\n import org.springframework.boot.test.context.SpringBootTest;\n+import org.springframework.boot.test.web.client.TestRestTemplate;\n+import org.springframework.boot.web.server.LocalServerPort;\n+import org.springframework.http.HttpMethod;\n+import org.springframework.http.ResponseEntity;\n+import org.springframework.http.client.ClientHttpRequest;\n+import org.springframework.http.client.ClientHttpResponse;\n import org.springframework.security.oauth2.client.OAuth2RestTemplate;\n import org.springframework.security.oauth2.client.resource.OAuth2AccessDeniedException;\n import org.springframework.security.oauth2.client.token.grant.client.ClientCredentialsResourceDetails;\n import org.springframework.security.oauth2.common.OAuth2AccessToken;\n import org.springframework.test.context.ActiveProfiles;\n import org.springframework.test.context.junit4.SpringRunner;\n+import org.springframework.web.client.RequestCallback;\n+import org.springframework.web.client.ResponseExtractor;\n+\n+import java.io.IOException;\n+import java.net.MalformedURLException;\n+import java.net.URL;\n+import java.nio.charset.Charset;\n \n import static java.util.Collections.singletonList;\n+import static org.junit.Assert.assertEquals;\n import static org.junit.Assert.assertNotNull;\n+import static org.junit.Assert.assertThat;\n import static org.springframework.boot.test.context.SpringBootTest.WebEnvironment.RANDOM_PORT;\n \n @RunWith(SpringRunner.class)\n @SpringBootTest(webEnvironment = RANDOM_PORT, classes = SpringBootAuthorizationServerApplication.class)\n @ActiveProfiles(\"authz\")\n public class CustomConfigAuthorizationServerIntegrationTest extends OAuth2IntegrationTestSupport {\n \n+    URL base;\n+\n+    @LocalServerPort\n+    int port;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "03e16a23d1dec782c448a217e5936ea1cf6f5f27"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzA0NTQ4Ng==", "bodyText": "Generally, it's a good idea to have throws Exception rather than a more specific one in the signature of test methods.", "url": "https://github.com/eugenp/tutorials/pull/8469#discussion_r363045486", "createdAt": "2020-01-04T17:19:31Z", "author": {"login": "ashleyfrieze"}, "path": "spring-boot-security/src/test/java/com/baeldung/springbootsecurity/oauth2server/CustomConfigAuthorizationServerIntegrationTest.java", "diffHunk": "@@ -1,33 +1,68 @@\n package com.baeldung.springbootsecurity.oauth2server;\n \n+import org.apache.commons.io.IOUtils;\n+import org.junit.Before;\n import org.junit.Test;\n import org.junit.runner.RunWith;\n+import org.mockito.internal.util.io.IOUtil;\n import org.springframework.boot.test.context.SpringBootTest;\n+import org.springframework.boot.test.web.client.TestRestTemplate;\n+import org.springframework.boot.web.server.LocalServerPort;\n+import org.springframework.http.HttpMethod;\n+import org.springframework.http.ResponseEntity;\n+import org.springframework.http.client.ClientHttpRequest;\n+import org.springframework.http.client.ClientHttpResponse;\n import org.springframework.security.oauth2.client.OAuth2RestTemplate;\n import org.springframework.security.oauth2.client.resource.OAuth2AccessDeniedException;\n import org.springframework.security.oauth2.client.token.grant.client.ClientCredentialsResourceDetails;\n import org.springframework.security.oauth2.common.OAuth2AccessToken;\n import org.springframework.test.context.ActiveProfiles;\n import org.springframework.test.context.junit4.SpringRunner;\n+import org.springframework.web.client.RequestCallback;\n+import org.springframework.web.client.ResponseExtractor;\n+\n+import java.io.IOException;\n+import java.net.MalformedURLException;\n+import java.net.URL;\n+import java.nio.charset.Charset;\n \n import static java.util.Collections.singletonList;\n+import static org.junit.Assert.assertEquals;\n import static org.junit.Assert.assertNotNull;\n+import static org.junit.Assert.assertThat;\n import static org.springframework.boot.test.context.SpringBootTest.WebEnvironment.RANDOM_PORT;\n \n @RunWith(SpringRunner.class)\n @SpringBootTest(webEnvironment = RANDOM_PORT, classes = SpringBootAuthorizationServerApplication.class)\n @ActiveProfiles(\"authz\")\n public class CustomConfigAuthorizationServerIntegrationTest extends OAuth2IntegrationTestSupport {\n \n+    URL base;\n+\n+    @LocalServerPort\n+    int port;\n+\n+    @Before\n+    public void setUp() throws MalformedURLException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "03e16a23d1dec782c448a217e5936ea1cf6f5f27"}, "originalPosition": 46}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzA0NTUwMA==", "bodyText": "Let's omit the use of final here. Let's also break out these additions as separate unit tests to illustrate them individually.", "url": "https://github.com/eugenp/tutorials/pull/8469#discussion_r363045500", "createdAt": "2020-01-04T17:20:03Z", "author": {"login": "ashleyfrieze"}, "path": "spring-boot-security/src/test/java/com/baeldung/springbootsecurity/oauth2server/CustomConfigAuthorizationServerIntegrationTest.java", "diffHunk": "@@ -1,33 +1,68 @@\n package com.baeldung.springbootsecurity.oauth2server;\n \n+import org.apache.commons.io.IOUtils;\n+import org.junit.Before;\n import org.junit.Test;\n import org.junit.runner.RunWith;\n+import org.mockito.internal.util.io.IOUtil;\n import org.springframework.boot.test.context.SpringBootTest;\n+import org.springframework.boot.test.web.client.TestRestTemplate;\n+import org.springframework.boot.web.server.LocalServerPort;\n+import org.springframework.http.HttpMethod;\n+import org.springframework.http.ResponseEntity;\n+import org.springframework.http.client.ClientHttpRequest;\n+import org.springframework.http.client.ClientHttpResponse;\n import org.springframework.security.oauth2.client.OAuth2RestTemplate;\n import org.springframework.security.oauth2.client.resource.OAuth2AccessDeniedException;\n import org.springframework.security.oauth2.client.token.grant.client.ClientCredentialsResourceDetails;\n import org.springframework.security.oauth2.common.OAuth2AccessToken;\n import org.springframework.test.context.ActiveProfiles;\n import org.springframework.test.context.junit4.SpringRunner;\n+import org.springframework.web.client.RequestCallback;\n+import org.springframework.web.client.ResponseExtractor;\n+\n+import java.io.IOException;\n+import java.net.MalformedURLException;\n+import java.net.URL;\n+import java.nio.charset.Charset;\n \n import static java.util.Collections.singletonList;\n+import static org.junit.Assert.assertEquals;\n import static org.junit.Assert.assertNotNull;\n+import static org.junit.Assert.assertThat;\n import static org.springframework.boot.test.context.SpringBootTest.WebEnvironment.RANDOM_PORT;\n \n @RunWith(SpringRunner.class)\n @SpringBootTest(webEnvironment = RANDOM_PORT, classes = SpringBootAuthorizationServerApplication.class)\n @ActiveProfiles(\"authz\")\n public class CustomConfigAuthorizationServerIntegrationTest extends OAuth2IntegrationTestSupport {\n \n+    URL base;\n+\n+    @LocalServerPort\n+    int port;\n+\n+    @Before\n+    public void setUp() throws MalformedURLException {\n+        base = new URL(\"http://localhost:\" + port);\n+    }\n+\n     @Test\n     public void givenOAuth2Context_whenAccessTokenIsRequested_ThenAccessTokenValueIsNotNull() {\n         ClientCredentialsResourceDetails resourceDetails = getClientCredentialsResourceDetails(\"baeldung\", singletonList(\"read\"));\n         OAuth2RestTemplate restTemplate = getOAuth2RestTemplate(resourceDetails);\n \n         OAuth2AccessToken accessToken = restTemplate.getAccessToken();\n \n-        assertNotNull(accessToken);\n+        final String authentication  = restTemplate.execute(base.toString() + \"/authentication\", HttpMethod.GET, clientHttpRequest -> {\n+        }, clientHttpResponse -> IOUtils.toString(clientHttpResponse.getBody(), Charset.defaultCharset()));\n \n+        final String principal  = restTemplate.execute(base.toString() + \"/principal\", HttpMethod.GET, clientHttpRequest -> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "03e16a23d1dec782c448a217e5936ea1cf6f5f27"}, "originalPosition": 61}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzA0NTUxMg==", "bodyText": "The assertions are in the wrong order. It's assertEquals(expected, actual)", "url": "https://github.com/eugenp/tutorials/pull/8469#discussion_r363045512", "createdAt": "2020-01-04T17:20:21Z", "author": {"login": "ashleyfrieze"}, "path": "spring-boot-security/src/test/java/com/baeldung/springbootsecurity/oauth2server/CustomConfigAuthorizationServerIntegrationTest.java", "diffHunk": "@@ -1,33 +1,68 @@\n package com.baeldung.springbootsecurity.oauth2server;\n \n+import org.apache.commons.io.IOUtils;\n+import org.junit.Before;\n import org.junit.Test;\n import org.junit.runner.RunWith;\n+import org.mockito.internal.util.io.IOUtil;\n import org.springframework.boot.test.context.SpringBootTest;\n+import org.springframework.boot.test.web.client.TestRestTemplate;\n+import org.springframework.boot.web.server.LocalServerPort;\n+import org.springframework.http.HttpMethod;\n+import org.springframework.http.ResponseEntity;\n+import org.springframework.http.client.ClientHttpRequest;\n+import org.springframework.http.client.ClientHttpResponse;\n import org.springframework.security.oauth2.client.OAuth2RestTemplate;\n import org.springframework.security.oauth2.client.resource.OAuth2AccessDeniedException;\n import org.springframework.security.oauth2.client.token.grant.client.ClientCredentialsResourceDetails;\n import org.springframework.security.oauth2.common.OAuth2AccessToken;\n import org.springframework.test.context.ActiveProfiles;\n import org.springframework.test.context.junit4.SpringRunner;\n+import org.springframework.web.client.RequestCallback;\n+import org.springframework.web.client.ResponseExtractor;\n+\n+import java.io.IOException;\n+import java.net.MalformedURLException;\n+import java.net.URL;\n+import java.nio.charset.Charset;\n \n import static java.util.Collections.singletonList;\n+import static org.junit.Assert.assertEquals;\n import static org.junit.Assert.assertNotNull;\n+import static org.junit.Assert.assertThat;\n import static org.springframework.boot.test.context.SpringBootTest.WebEnvironment.RANDOM_PORT;\n \n @RunWith(SpringRunner.class)\n @SpringBootTest(webEnvironment = RANDOM_PORT, classes = SpringBootAuthorizationServerApplication.class)\n @ActiveProfiles(\"authz\")\n public class CustomConfigAuthorizationServerIntegrationTest extends OAuth2IntegrationTestSupport {\n \n+    URL base;\n+\n+    @LocalServerPort\n+    int port;\n+\n+    @Before\n+    public void setUp() throws MalformedURLException {\n+        base = new URL(\"http://localhost:\" + port);\n+    }\n+\n     @Test\n     public void givenOAuth2Context_whenAccessTokenIsRequested_ThenAccessTokenValueIsNotNull() {\n         ClientCredentialsResourceDetails resourceDetails = getClientCredentialsResourceDetails(\"baeldung\", singletonList(\"read\"));\n         OAuth2RestTemplate restTemplate = getOAuth2RestTemplate(resourceDetails);\n \n         OAuth2AccessToken accessToken = restTemplate.getAccessToken();\n \n-        assertNotNull(accessToken);\n+        final String authentication  = restTemplate.execute(base.toString() + \"/authentication\", HttpMethod.GET, clientHttpRequest -> {\n+        }, clientHttpResponse -> IOUtils.toString(clientHttpResponse.getBody(), Charset.defaultCharset()));\n \n+        final String principal  = restTemplate.execute(base.toString() + \"/principal\", HttpMethod.GET, clientHttpRequest -> {\n+        }, clientHttpResponse -> IOUtils.toString(clientHttpResponse.getBody(), Charset.defaultCharset()));\n+\n+        assertNotNull(accessToken);\n+        assertEquals(authentication, \"baeldung\");\n+        assertEquals(principal, \"baeldung\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "03e16a23d1dec782c448a217e5936ea1cf6f5f27"}, "originalPosition": 66}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "23a12a521d198601bab61d6f7f0a8bd852bd9135", "author": {"user": {"login": "jesperancinha", "name": "Jo\u00e3o Filipe Sabino Esperancinha"}}, "url": "https://github.com/eugenp/tutorials/commit/23a12a521d198601bab61d6f7f0a8bd852bd9135", "committedDate": "2020-01-04T18:02:52Z", "message": "[BAEL-3339] - Adds principal example"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "876818da9b70c54a346a4018dbb97c471d481991", "author": {"user": {"login": "jesperancinha", "name": "Jo\u00e3o Filipe Sabino Esperancinha"}}, "url": "https://github.com/eugenp/tutorials/commit/876818da9b70c54a346a4018dbb97c471d481991", "committedDate": "2020-01-07T08:37:58Z", "message": "[BAEL-3339] - Code refactoring and improvements"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQyMDUyNTI1", "url": "https://github.com/eugenp/tutorials/pull/8469#pullrequestreview-342052525", "createdAt": "2020-01-13T18:36:43Z", "commit": {"oid": "2c6269c25baf3e8ce5b7a39522b14c119fca785b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QxODozNjo0M1rOFdAhYg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QxODozNjo0M1rOFdAhYg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTk2MTU3MA==", "bodyText": "This change should probably be reverted.", "url": "https://github.com/eugenp/tutorials/pull/8469#discussion_r365961570", "createdAt": "2020-01-13T18:36:43Z", "author": {"login": "ashleyfrieze"}, "path": "spring-boot-security/src/main/java/com/baeldung/springbootsecurity/oauth2server/config/AuthorizationServerConfig.java", "diffHunk": "@@ -25,20 +25,20 @@ public void configure(AuthorizationServerEndpointsConfigurer endpoints) throws E\n     @Override\n     public void configure(ClientDetailsServiceConfigurer clients) throws Exception {\n         clients\n-          .inMemory()\n-          .withClient(\"baeldung\")\n-          .secret(passwordEncoder().encode(\"baeldung\"))\n-          .authorizedGrantTypes(\"client_credentials\", \"password\", \"authorization_code\")\n-          .scopes(\"openid\", \"read\")\n-          .autoApprove(true)\n-          .and()\n-          .withClient(\"baeldung-admin\")\n-          .secret(passwordEncoder().encode(\"baeldung\"))\n-          .authorizedGrantTypes(\"authorization_code\", \"client_credentials\", \"refresh_token\")\n-          .scopes(\"read\", \"write\")\n-          .autoApprove(true);\n+                .inMemory()\n+                .withClient(\"baeldung\")\n+                .secret(passwordEncoder().encode(\"baeldung\"))\n+                .authorizedGrantTypes(\"client_credentials\", \"password\", \"authorization_code\")\n+                .scopes(\"openid\", \"read\")\n+                .autoApprove(true)\n+                .and()\n+                .withClient(\"baeldung-admin\")\n+                .secret(passwordEncoder().encode(\"baeldung\"))\n+                .authorizedGrantTypes(\"authorization_code\", \"client_credentials\", \"refresh_token\")\n+                .scopes(\"read\", \"write\")\n+                .autoApprove(true);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2c6269c25baf3e8ce5b7a39522b14c119fca785b"}, "originalPosition": 27}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8daaa944a9c04f3f21f7f94537e0343483d9a3f5", "author": {"user": {"login": "jesperancinha", "name": "Jo\u00e3o Filipe Sabino Esperancinha"}}, "url": "https://github.com/eugenp/tutorials/commit/8daaa944a9c04f3f21f7f94537e0343483d9a3f5", "committedDate": "2020-01-14T05:06:48Z", "message": "[BAEL-3339] - Code cleanup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eaa9d65c13dbbccd67e28094daf743b095e68c78", "author": {"user": {"login": "jesperancinha", "name": "Jo\u00e3o Filipe Sabino Esperancinha"}}, "url": "https://github.com/eugenp/tutorials/commit/eaa9d65c13dbbccd67e28094daf743b095e68c78", "committedDate": "2020-01-14T05:07:03Z", "message": "[BAEL-3339] - Authentication to return token details"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ2MjA3Njc0", "url": "https://github.com/eugenp/tutorials/pull/8469#pullrequestreview-346207674", "createdAt": "2020-01-21T21:35:15Z", "commit": {"oid": "eaa9d65c13dbbccd67e28094daf743b095e68c78"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQyMTozNToxNVrOFgJjUQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQyMTozNToxNVrOFgJjUQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTI1NTI0OQ==", "bodyText": "This is a do nothing callback... I would suggest that this way of expressing it is a bit harder to parse. If you did something like this:\nprivate static final RequestCallback DO_NOTHING_CALLBACK = request -> {};\nAnd then used it at the call site as DO_NOTHING_CALLBACK - I think it might be more self-documenting.", "url": "https://github.com/eugenp/tutorials/pull/8469#discussion_r369255249", "createdAt": "2020-01-21T21:35:15Z", "author": {"login": "ashleyfrieze"}, "path": "spring-boot-security/src/test/java/com/baeldung/springbootsecurity/oauth2server/OAuth2IntegrationTestSupport.java", "diffHunk": "@@ -31,4 +39,18 @@ protected OAuth2RestTemplate getOAuth2RestTemplate(final ClientCredentialsResour\n         restTemplate.setMessageConverters(singletonList(new MappingJackson2HttpMessageConverter()));\n         return restTemplate;\n     }\n+\n+    protected String executeGetRequest(OAuth2RestTemplate restTemplate, String path) {\n+        return restTemplate.execute(base.toString() + path, GET, getRequestCallback(), getStringResponseExtractor());\n+    }\n+\n+    protected RequestCallback getRequestCallback() {\n+        return clientHttpRequest -> {\n+        };\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eaa9d65c13dbbccd67e28094daf743b095e68c78"}, "originalPosition": 41}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ2MjA4NDA3", "url": "https://github.com/eugenp/tutorials/pull/8469#pullrequestreview-346208407", "createdAt": "2020-01-21T21:36:36Z", "commit": {"oid": "eaa9d65c13dbbccd67e28094daf743b095e68c78"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQyMTozNjozNlrOFgJlhg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQyMTozNjozNlrOFgJlhg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTI1NTgxNA==", "bodyText": "Similarly, you don't need to make a new lambda every time for this. You just want something like:\nprotected static final ResponseExtractor<String> EXTRACT_BODY_AS_STRING =  clientHttpResponse -> IOUtils.toString(clientHttpResponse.getBody(), Charset.defaultCharset());", "url": "https://github.com/eugenp/tutorials/pull/8469#discussion_r369255814", "createdAt": "2020-01-21T21:36:36Z", "author": {"login": "ashleyfrieze"}, "path": "spring-boot-security/src/test/java/com/baeldung/springbootsecurity/oauth2server/OAuth2IntegrationTestSupport.java", "diffHunk": "@@ -31,4 +39,18 @@ protected OAuth2RestTemplate getOAuth2RestTemplate(final ClientCredentialsResour\n         restTemplate.setMessageConverters(singletonList(new MappingJackson2HttpMessageConverter()));\n         return restTemplate;\n     }\n+\n+    protected String executeGetRequest(OAuth2RestTemplate restTemplate, String path) {\n+        return restTemplate.execute(base.toString() + path, GET, getRequestCallback(), getStringResponseExtractor());\n+    }\n+\n+    protected RequestCallback getRequestCallback() {\n+        return clientHttpRequest -> {\n+        };\n+    }\n+\n+    protected ResponseExtractor<String> getStringResponseExtractor() {\n+        return clientHttpResponse -> IOUtils.toString(clientHttpResponse.getBody(), Charset.defaultCharset());\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eaa9d65c13dbbccd67e28094daf743b095e68c78"}, "originalPosition": 45}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aef673b20f52fe42dc56462eded22fa185aea7fc", "author": {"user": {"login": "jesperancinha", "name": "Jo\u00e3o Filipe Sabino Esperancinha"}}, "url": "https://github.com/eugenp/tutorials/commit/aef673b20f52fe42dc56462eded22fa185aea7fc", "committedDate": "2020-01-22T10:52:55Z", "message": "[BAEL-3339] - Code cleanup"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4243, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}