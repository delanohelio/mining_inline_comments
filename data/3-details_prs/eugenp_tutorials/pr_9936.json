{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc1NTgyNDIx", "number": 9936, "title": "BAEL-4448: Added examples for setting TLS version in HttpClient", "bodyText": "(cherry picked from commit f4d40fc)", "createdAt": "2020-08-28T18:42:07Z", "url": "https://github.com/eugenp/tutorials/pull/9936", "merged": true, "mergeCommit": {"oid": "38f35c4030afac76b641406a6a78cfe8e1614f51"}, "closed": true, "closedAt": "2020-09-24T16:28:05Z", "author": {"login": "joe-boudreau"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdDZfZsAH2gAyNDc1NTgyNDIxOjRiZTFmZDQ0Njg0ZTM2NGU1NjUyMzQ5YTMxMDI2NmM5MTFjN2ZkNjI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdLKiZAgH2gAyNDc1NTgyNDIxOjRlMzhiM2E0ZjAwMzcwZWJmNTQ1MTUyYWFjMmJhYjE3YzRhYmZlMjk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "4be1fd44684e364e5652349a310266c911c7fd62", "author": {"user": null}, "url": "https://github.com/eugenp/tutorials/commit/4be1fd44684e364e5652349a310266c911c7fd62", "committedDate": "2020-08-28T18:40:56Z", "message": "[BAEL-4448] Added examples for setting TLS version in HttpClient\n\n(cherry picked from commit f4d40fc3f3140fd046ed957030e9a54582bd4a67)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1c10860a70ec5127ce8113faa0da01ace101af68", "author": {"user": null}, "url": "https://github.com/eugenp/tutorials/commit/1c10860a70ec5127ce8113faa0da01ace101af68", "committedDate": "2020-09-02T20:34:11Z", "message": "[BAEL-4448] Simplified the code for one example"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg3MTk1ODk5", "url": "https://github.com/eugenp/tutorials/pull/9936#pullrequestreview-487195899", "createdAt": "2020-09-12T02:31:37Z", "commit": {"oid": "1c10860a70ec5127ce8113faa0da01ace101af68"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMlQwMjozMTozN1rOHQx3kw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMlQwMjozMjozM1rOHQx34g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzM1NjMwNw==", "bodyText": "The file should be named as a .java file, and the package should be specific to the article, e.g. com.baeldung.tlsversion", "url": "https://github.com/eugenp/tutorials/pull/9936#discussion_r487356307", "createdAt": "2020-09-12T02:31:37Z", "author": {"login": "KevinGilmore"}, "path": "httpclient/src/main/java/com/baeldung/ClientTlsVersionExamples", "diffHunk": "@@ -0,0 +1,71 @@\n+package com.baeldung", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1c10860a70ec5127ce8113faa0da01ace101af68"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzM1NjM4Ng==", "bodyText": "these should indent only two spaces from where the code in line 19 begins", "url": "https://github.com/eugenp/tutorials/pull/9936#discussion_r487356386", "createdAt": "2020-09-12T02:32:33Z", "author": {"login": "KevinGilmore"}, "path": "httpclient/src/main/java/com/baeldung/ClientTlsVersionExamples", "diffHunk": "@@ -0,0 +1,71 @@\n+package com.baeldung\n+\n+import org.apache.http.HttpEntity;\n+import org.apache.http.client.methods.CloseableHttpResponse;\n+import org.apache.http.client.methods.HttpGet;\n+import org.apache.http.conn.ssl.SSLConnectionSocketFactory;\n+import org.apache.http.impl.client.CloseableHttpClient;\n+import org.apache.http.impl.client.HttpClients;\n+import org.apache.http.ssl.SSLContexts;\n+import org.apache.http.util.EntityUtils;\n+\n+import javax.net.ssl.SSLSocket;\n+import java.net.InetSocketAddress;\n+import java.net.SocketAddress;\n+\n+public class ClientTlsVersionExmaples{\n+\n+    public static CloseableHttpClient setViaSocketFactory(){\n+        SSLConnectionSocketFactory sslsf = new SSLConnectionSocketFactory(\n+                SSLContexts.createDefault(),\n+                new String[] {\"TLSv1.2\", \"TLSv1.3\"},\n+                null,\n+                SSLConnectionSocketFactory.getDefaultHostnameVerifier());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1c10860a70ec5127ce8113faa0da01ace101af68"}, "originalPosition": 23}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg3MTk2Nzg0", "url": "https://github.com/eugenp/tutorials/pull/9936#pullrequestreview-487196784", "createdAt": "2020-09-12T02:46:29Z", "commit": {"oid": "1c10860a70ec5127ce8113faa0da01ace101af68"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMlQwMjo0NjoyOVrOHQx8tA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMlQwMjo0NjoyOVrOHQx8tA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzM1NzYyMA==", "bodyText": "Do you really need a nested try-with-resources inside a try?", "url": "https://github.com/eugenp/tutorials/pull/9936#discussion_r487357620", "createdAt": "2020-09-12T02:46:29Z", "author": {"login": "KevinGilmore"}, "path": "httpclient/src/main/java/com/baeldung/ClientTlsVersionExamples", "diffHunk": "@@ -0,0 +1,71 @@\n+package com.baeldung\n+\n+import org.apache.http.HttpEntity;\n+import org.apache.http.client.methods.CloseableHttpResponse;\n+import org.apache.http.client.methods.HttpGet;\n+import org.apache.http.conn.ssl.SSLConnectionSocketFactory;\n+import org.apache.http.impl.client.CloseableHttpClient;\n+import org.apache.http.impl.client.HttpClients;\n+import org.apache.http.ssl.SSLContexts;\n+import org.apache.http.util.EntityUtils;\n+\n+import javax.net.ssl.SSLSocket;\n+import java.net.InetSocketAddress;\n+import java.net.SocketAddress;\n+\n+public class ClientTlsVersionExmaples{\n+\n+    public static CloseableHttpClient setViaSocketFactory(){\n+        SSLConnectionSocketFactory sslsf = new SSLConnectionSocketFactory(\n+                SSLContexts.createDefault(),\n+                new String[] {\"TLSv1.2\", \"TLSv1.3\"},\n+                null,\n+                SSLConnectionSocketFactory.getDefaultHostnameVerifier());\n+\n+        return HttpClients.custom().setSSLSocketFactory(sslsf).build();\n+    }\n+\n+    public static CloseableHttpClient setTlsVersionPerConnection() {\n+        SSLConnectionSocketFactory sslsf = new SSLConnectionSocketFactory(SSLContexts.createDefault()){\n+\n+            @Override\n+            protected void prepareSocket(SSLSocket socket) {\n+\n+                String hostname = socket.getInetAddress().getHostName();\n+                if (hostname.endsWith(\"internal.system.com\")){\n+                    socket.setEnabledProtocols(new String[] { \"TLSv1\", \"TLSv1.1\", \"TLSv1.2\", \"TLSv1.3\" });\n+                }\n+                else {\n+                    socket.setEnabledProtocols(new String[] {\"TLSv1.3\"});\n+                }\n+            }\n+        };\n+\n+        return HttpClients.custom().setSSLSocketFactory(sslsf).build();\n+    }\n+\n+    //To configure the TLS versions for the client, set the https.protocols system property during runtime.\n+    //For example: java -Dhttps.protocols=TLSv1.1,TLSv1.2,TLSv1.3 -jar webClient.jar\n+    public static CloseableHttpClient setViaSystemProperties(){\n+        return HttpClients.createSystem();\n+        //alternatively\n+        //return HttpClients.custom().useSystemProperties().build();\n+    }\n+\n+    public static void main(String[] args) throws Exception {\n+\n+        CloseableHttpClient httpClient = setTlsVersionPerConnection();\n+        //HttpClient httpClient = setViaSocketFactory();\n+        //HttpClient httpClient = setViaSystemProperties();\n+\n+        try {\n+            try (CloseableHttpResponse response = httpClient.execute(new HttpGet(\"https://httpbin.org/\"))) {\n+                HttpEntity entity = response.getEntity();\n+                EntityUtils.consume(entity);\n+            }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1c10860a70ec5127ce8113faa0da01ace101af68"}, "originalPosition": 65}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "42cdb9a395d2973afa484e0c74b1edbbb0ff88ff", "author": {"user": null}, "url": "https://github.com/eugenp/tutorials/commit/42cdb9a395d2973afa484e0c74b1edbbb0ff88ff", "committedDate": "2020-09-14T15:51:41Z", "message": "[BAEL-4448] Formatting fixes and moved to new package"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkyMTY4MDAw", "url": "https://github.com/eugenp/tutorials/pull/9936#pullrequestreview-492168000", "createdAt": "2020-09-20T02:47:18Z", "commit": {"oid": "42cdb9a395d2973afa484e0c74b1edbbb0ff88ff"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "14b6f1cc4cc660839c86aa8390168938ac748bc2", "author": {"user": null}, "url": "https://github.com/eugenp/tutorials/commit/14b6f1cc4cc660839c86aa8390168938ac748bc2", "committedDate": "2020-09-21T12:56:25Z", "message": "[BAEL-4448] Forgot an import and fixed class name typo"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4e38b3a4f00370ebf545152aac2bab17c4abfe29", "author": {"user": null}, "url": "https://github.com/eugenp/tutorials/commit/4e38b3a4f00370ebf545152aac2bab17c4abfe29", "committedDate": "2020-09-21T21:47:01Z", "message": "[BAEL-4448] Created second module for httpclient and moved article code"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4267, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}