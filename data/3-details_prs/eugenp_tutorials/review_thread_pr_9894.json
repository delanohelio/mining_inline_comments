{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY5NzE5ODcy", "number": 9894, "reviewThreads": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQwNDowNjoxM1rOEaS5ag==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQwNDowNzozMFrOEaS6mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk2MDA4MDQyOnYy", "diffSide": "RIGHT", "path": "quarkus/src/test/java/com/baeldung/quarkus/CustomLibraryResourceIntegrationTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQwNDowNjoxM1rOHDowtw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQwNDowNjoxM1rOHDowtw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzU3NTYwNw==", "bodyText": "Use 4-space indent per level", "url": "https://github.com/eugenp/tutorials/pull/9894#discussion_r473575607", "createdAt": "2020-08-20T04:06:13Z", "author": {"login": "KevinGilmore"}, "path": "quarkus/src/test/java/com/baeldung/quarkus/CustomLibraryResourceIntegrationTest.java", "diffHunk": "@@ -0,0 +1,28 @@\n+package com.baeldung.quarkus;\n+\n+import com.baeldung.quarkus.utils.CustomTestProfile;\n+import io.quarkus.test.junit.QuarkusTest;\n+import io.quarkus.test.junit.TestProfile;\n+import io.restassured.http.ContentType;\n+import org.junit.jupiter.api.Test;\n+\n+import static io.restassured.RestAssured.given;\n+import static org.hamcrest.CoreMatchers.is;\n+import static org.hamcrest.Matchers.hasItems;\n+\n+@QuarkusTest\n+@TestProfile(CustomTestProfile.class)\n+class CustomLibraryResourceIntegrationTest {\n+\n+    public static final String BOOKSTORE_ENDPOINT = \"/custom/library/book\";\n+\n+    @Test\n+    void testGetBookEndpoint() {\n+        given().contentType(ContentType.JSON)\n+               .when().get(BOOKSTORE_ENDPOINT)\n+               .then()\n+               .statusCode(200)\n+               .body(\"size()\", is(2))\n+               .body(\"title\", hasItems(\"Foundation\", \"Dune\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7cee3657cb61128db07b56d738284dfdf446f405"}, "originalPosition": 26}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk2MDA4MDg1OnYy", "diffSide": "RIGHT", "path": "quarkus/src/test/java/com/baeldung/quarkus/LibraryHttpEndpointIntegrationTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQwNDowNjoyM1rOHDow7A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQwNDowNjoyM1rOHDow7A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzU3NTY2MA==", "bodyText": "4-space indent", "url": "https://github.com/eugenp/tutorials/pull/9894#discussion_r473575660", "createdAt": "2020-08-20T04:06:23Z", "author": {"login": "KevinGilmore"}, "path": "quarkus/src/test/java/com/baeldung/quarkus/LibraryHttpEndpointIntegrationTest.java", "diffHunk": "@@ -0,0 +1,23 @@\n+package com.baeldung.quarkus;\n+\n+import io.quarkus.test.common.http.TestHTTPEndpoint;\n+import io.quarkus.test.junit.QuarkusTest;\n+import io.restassured.http.ContentType;\n+import org.junit.jupiter.api.Test;\n+\n+import static io.restassured.RestAssured.given;\n+\n+@QuarkusTest\n+@TestHTTPEndpoint(LibraryResource.class)\n+class LibraryHttpEndpointIntegrationTest {\n+\n+    @Test\n+    void testGetBookEndpoint() {\n+        given().contentType(ContentType.JSON)\n+               .when()\n+               .get(\"book\")\n+               .then()\n+               .statusCode(200);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7cee3657cb61128db07b56d738284dfdf446f405"}, "originalPosition": 20}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk2MDA4MTQ1OnYy", "diffSide": "RIGHT", "path": "quarkus/src/test/java/com/baeldung/quarkus/LibraryResourceInjectSpyIntegrationTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQwNDowNjozNlrOHDoxMA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQwNDowNjozNlrOHDoxMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzU3NTcyOA==", "bodyText": "4-space indent", "url": "https://github.com/eugenp/tutorials/pull/9894#discussion_r473575728", "createdAt": "2020-08-20T04:06:36Z", "author": {"login": "KevinGilmore"}, "path": "quarkus/src/test/java/com/baeldung/quarkus/LibraryResourceInjectSpyIntegrationTest.java", "diffHunk": "@@ -0,0 +1,28 @@\n+package com.baeldung.quarkus;\n+\n+import com.baeldung.quarkus.service.LibraryService;\n+import io.quarkus.test.junit.QuarkusTest;\n+import io.quarkus.test.junit.mockito.InjectSpy;\n+import io.restassured.http.ContentType;\n+import org.junit.jupiter.api.Test;\n+\n+import static io.restassured.RestAssured.given;\n+import static org.mockito.Mockito.verify;\n+\n+@QuarkusTest\n+class LibraryResourceInjectSpyIntegrationTest {\n+\n+    @InjectSpy\n+    LibraryService libraryService;\n+\n+    @Test\n+    void whenFindByAuthor_thenBookShouldBeFound() {\n+        given().contentType(ContentType.JSON).param(\"query\", \"Asimov\")\n+               .when().get(\"/library/book\")\n+               .then()\n+               .statusCode(200);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7cee3657cb61128db07b56d738284dfdf446f405"}, "originalPosition": 23}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk2MDA4MjA1OnYy", "diffSide": "RIGHT", "path": "quarkus/src/test/java/com/baeldung/quarkus/LibraryResourceIntegrationTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQwNDowNjo0NlrOHDoxdA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQwNDowNjo0NlrOHDoxdA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzU3NTc5Ng==", "bodyText": "4-space indent", "url": "https://github.com/eugenp/tutorials/pull/9894#discussion_r473575796", "createdAt": "2020-08-20T04:06:46Z", "author": {"login": "KevinGilmore"}, "path": "quarkus/src/test/java/com/baeldung/quarkus/LibraryResourceIntegrationTest.java", "diffHunk": "@@ -0,0 +1,33 @@\n+package com.baeldung.quarkus;\n+\n+import io.quarkus.test.common.http.TestHTTPEndpoint;\n+import io.quarkus.test.common.http.TestHTTPResource;\n+import io.quarkus.test.junit.QuarkusTest;\n+import io.restassured.http.ContentType;\n+import org.junit.jupiter.api.Test;\n+\n+import java.net.URL;\n+\n+import static io.restassured.RestAssured.given;\n+import static org.hamcrest.CoreMatchers.is;\n+import static org.hamcrest.Matchers.hasItem;\n+\n+@QuarkusTest\n+class LibraryResourceIntegrationTest {\n+\n+    @TestHTTPEndpoint(LibraryResource.class)\n+    @TestHTTPResource(\"book\")\n+    URL libraryEndpoint;\n+\n+    @Test\n+    void testGetBookEndpoint() {\n+        given().contentType(ContentType.JSON).param(\"query\", \"Dune\")\n+               .when().get(libraryEndpoint)\n+               .then()\n+               .statusCode(200)\n+               .body(\"size()\", is(1))\n+               .body(\"title\", hasItem(\"Dune\"))\n+               .body(\"author\", hasItem(\"Frank Herbert\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7cee3657cb61128db07b56d738284dfdf446f405"}, "originalPosition": 30}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk2MDA4Mjg2OnYy", "diffSide": "RIGHT", "path": "quarkus/src/test/java/com/baeldung/quarkus/service/LibraryServiceInjectMockUnitTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQwNDowNzowNFrOHDox2A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQwNDowNzowNFrOHDox2A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzU3NTg5Ng==", "bodyText": "4-space indent per level", "url": "https://github.com/eugenp/tutorials/pull/9894#discussion_r473575896", "createdAt": "2020-08-20T04:07:04Z", "author": {"login": "KevinGilmore"}, "path": "quarkus/src/test/java/com/baeldung/quarkus/service/LibraryServiceInjectMockUnitTest.java", "diffHunk": "@@ -0,0 +1,38 @@\n+package com.baeldung.quarkus.service;\n+\n+import com.baeldung.quarkus.model.Book;\n+import com.baeldung.quarkus.repository.BookRepository;\n+import io.quarkus.test.junit.QuarkusTest;\n+import io.quarkus.test.junit.mockito.InjectMock;\n+import org.junit.jupiter.api.BeforeEach;\n+import org.junit.jupiter.api.Test;\n+\n+import javax.inject.Inject;\n+import java.util.Arrays;\n+\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+import static org.mockito.Mockito.when;\n+\n+@QuarkusTest\n+class LibraryServiceInjectMockUnitTest {\n+\n+    @Inject\n+    LibraryService libraryService;\n+\n+    @InjectMock\n+    BookRepository bookRepository;\n+\n+    @BeforeEach\n+    void setUp() {\n+        when(bookRepository.findBy(\"Frank Herbert\"))\n+                .thenReturn(Arrays.stream(new Book[] {\n+                        new Book(\"Dune\", \"Frank Herbert\"),\n+                        new Book(\"Children of Dune\", \"Frank Herbert\")}));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7cee3657cb61128db07b56d738284dfdf446f405"}, "originalPosition": 30}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk2MDA4MzI0OnYy", "diffSide": "RIGHT", "path": "quarkus/src/test/java/com/baeldung/quarkus/service/LibraryServiceQuarkusMockUnitTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQwNDowNzoxN1rOHDoyFA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQwNDowNzoxN1rOHDoyFA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzU3NTk1Ng==", "bodyText": "4-space indent per level", "url": "https://github.com/eugenp/tutorials/pull/9894#discussion_r473575956", "createdAt": "2020-08-20T04:07:17Z", "author": {"login": "KevinGilmore"}, "path": "quarkus/src/test/java/com/baeldung/quarkus/service/LibraryServiceQuarkusMockUnitTest.java", "diffHunk": "@@ -0,0 +1,38 @@\n+package com.baeldung.quarkus.service;\n+\n+import com.baeldung.quarkus.model.Book;\n+import com.baeldung.quarkus.repository.BookRepository;\n+import com.baeldung.quarkus.utils.TestBookRepository;\n+import io.quarkus.test.junit.QuarkusMock;\n+import io.quarkus.test.junit.QuarkusTest;\n+import org.junit.jupiter.api.BeforeEach;\n+import org.junit.jupiter.api.Test;\n+import org.mockito.Mockito;\n+\n+import javax.inject.Inject;\n+import java.util.Arrays;\n+\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+\n+@QuarkusTest\n+class LibraryServiceQuarkusMockUnitTest {\n+\n+    @Inject\n+    LibraryService libraryService;\n+\n+    @BeforeEach\n+    void setUp() {\n+        BookRepository mock = Mockito.mock(TestBookRepository.class);\n+        Mockito.when(mock.findBy(\"Asimov\"))\n+                .thenReturn(Arrays.stream(new Book[] {\n+                        new Book(\"Foundation\", \"Isaac Asimov\"),\n+                        new Book(\"I Robot\", \"Isaac Asimov\")}));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7cee3657cb61128db07b56d738284dfdf446f405"}, "originalPosition": 29}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk2MDA4MzQ3OnYy", "diffSide": "RIGHT", "path": "quarkus/src/test/java/com/baeldung/quarkus/utils/TestBookRepository.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQwNDowNzozMFrOHDoyQw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQwNDowNzozMFrOHDoyQw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzU3NjAwMw==", "bodyText": "4-space indent", "url": "https://github.com/eugenp/tutorials/pull/9894#discussion_r473576003", "createdAt": "2020-08-20T04:07:30Z", "author": {"login": "KevinGilmore"}, "path": "quarkus/src/test/java/com/baeldung/quarkus/utils/TestBookRepository.java", "diffHunk": "@@ -0,0 +1,22 @@\n+package com.baeldung.quarkus.utils;\n+\n+import com.baeldung.quarkus.model.Book;\n+import com.baeldung.quarkus.repository.BookRepository;\n+\n+import javax.annotation.PostConstruct;\n+import javax.annotation.Priority;\n+import javax.enterprise.context.ApplicationScoped;\n+import javax.enterprise.inject.Alternative;\n+\n+@Priority(1)\n+@Alternative\n+@ApplicationScoped\n+public class TestBookRepository extends BookRepository {\n+\n+    @PostConstruct\n+    public void init() {\n+        persist(new Book(\"Dune\", \"Frank Herbert\"),\n+                new Book(\"Foundation\", \"Isaac Asimov\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7cee3657cb61128db07b56d738284dfdf446f405"}, "originalPosition": 19}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4266, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}