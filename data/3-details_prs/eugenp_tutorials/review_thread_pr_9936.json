{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc1NTgyNDIx", "number": 9936, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMlQwMjozMTozN1rOEivFZQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMlQwMjo0NjoyOVrOEivJoQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA0ODU4NDY5OnYy", "diffSide": "RIGHT", "path": "httpclient/src/main/java/com/baeldung/ClientTlsVersionExamples", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMlQwMjozMTozN1rOHQx3kw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxNTo1NzozNVrOHRb6SQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzM1NjMwNw==", "bodyText": "The file should be named as a .java file, and the package should be specific to the article, e.g. com.baeldung.tlsversion", "url": "https://github.com/eugenp/tutorials/pull/9936#discussion_r487356307", "createdAt": "2020-09-12T02:31:37Z", "author": {"login": "KevinGilmore"}, "path": "httpclient/src/main/java/com/baeldung/ClientTlsVersionExamples", "diffHunk": "@@ -0,0 +1,71 @@\n+package com.baeldung", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1c10860a70ec5127ce8113faa0da01ace101af68"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODA0NTEyOQ==", "bodyText": "Moved to com.baeldung.tlsversion", "url": "https://github.com/eugenp/tutorials/pull/9936#discussion_r488045129", "createdAt": "2020-09-14T15:57:35Z", "author": {"login": "joe-boudreau"}, "path": "httpclient/src/main/java/com/baeldung/ClientTlsVersionExamples", "diffHunk": "@@ -0,0 +1,71 @@\n+package com.baeldung", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzM1NjMwNw=="}, "originalCommit": {"oid": "1c10860a70ec5127ce8113faa0da01ace101af68"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA0ODU4NTMwOnYy", "diffSide": "RIGHT", "path": "httpclient/src/main/java/com/baeldung/ClientTlsVersionExamples", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMlQwMjozMjozM1rOHQx34g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxNTo1Nzo1MFrOHRb67w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzM1NjM4Ng==", "bodyText": "these should indent only two spaces from where the code in line 19 begins", "url": "https://github.com/eugenp/tutorials/pull/9936#discussion_r487356386", "createdAt": "2020-09-12T02:32:33Z", "author": {"login": "KevinGilmore"}, "path": "httpclient/src/main/java/com/baeldung/ClientTlsVersionExamples", "diffHunk": "@@ -0,0 +1,71 @@\n+package com.baeldung\n+\n+import org.apache.http.HttpEntity;\n+import org.apache.http.client.methods.CloseableHttpResponse;\n+import org.apache.http.client.methods.HttpGet;\n+import org.apache.http.conn.ssl.SSLConnectionSocketFactory;\n+import org.apache.http.impl.client.CloseableHttpClient;\n+import org.apache.http.impl.client.HttpClients;\n+import org.apache.http.ssl.SSLContexts;\n+import org.apache.http.util.EntityUtils;\n+\n+import javax.net.ssl.SSLSocket;\n+import java.net.InetSocketAddress;\n+import java.net.SocketAddress;\n+\n+public class ClientTlsVersionExmaples{\n+\n+    public static CloseableHttpClient setViaSocketFactory(){\n+        SSLConnectionSocketFactory sslsf = new SSLConnectionSocketFactory(\n+                SSLContexts.createDefault(),\n+                new String[] {\"TLSv1.2\", \"TLSv1.3\"},\n+                null,\n+                SSLConnectionSocketFactory.getDefaultHostnameVerifier());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1c10860a70ec5127ce8113faa0da01ace101af68"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODA0NTI5NQ==", "bodyText": "fixed throughout file", "url": "https://github.com/eugenp/tutorials/pull/9936#discussion_r488045295", "createdAt": "2020-09-14T15:57:50Z", "author": {"login": "joe-boudreau"}, "path": "httpclient/src/main/java/com/baeldung/ClientTlsVersionExamples", "diffHunk": "@@ -0,0 +1,71 @@\n+package com.baeldung\n+\n+import org.apache.http.HttpEntity;\n+import org.apache.http.client.methods.CloseableHttpResponse;\n+import org.apache.http.client.methods.HttpGet;\n+import org.apache.http.conn.ssl.SSLConnectionSocketFactory;\n+import org.apache.http.impl.client.CloseableHttpClient;\n+import org.apache.http.impl.client.HttpClients;\n+import org.apache.http.ssl.SSLContexts;\n+import org.apache.http.util.EntityUtils;\n+\n+import javax.net.ssl.SSLSocket;\n+import java.net.InetSocketAddress;\n+import java.net.SocketAddress;\n+\n+public class ClientTlsVersionExmaples{\n+\n+    public static CloseableHttpClient setViaSocketFactory(){\n+        SSLConnectionSocketFactory sslsf = new SSLConnectionSocketFactory(\n+                SSLContexts.createDefault(),\n+                new String[] {\"TLSv1.2\", \"TLSv1.3\"},\n+                null,\n+                SSLConnectionSocketFactory.getDefaultHostnameVerifier());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzM1NjM4Ng=="}, "originalCommit": {"oid": "1c10860a70ec5127ce8113faa0da01ace101af68"}, "originalPosition": 23}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA0ODU5NTUzOnYy", "diffSide": "RIGHT", "path": "httpclient/src/main/java/com/baeldung/ClientTlsVersionExamples", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMlQwMjo0NjoyOVrOHQx8tA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxNTo1OToyMFrOHRb-yw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzM1NzYyMA==", "bodyText": "Do you really need a nested try-with-resources inside a try?", "url": "https://github.com/eugenp/tutorials/pull/9936#discussion_r487357620", "createdAt": "2020-09-12T02:46:29Z", "author": {"login": "KevinGilmore"}, "path": "httpclient/src/main/java/com/baeldung/ClientTlsVersionExamples", "diffHunk": "@@ -0,0 +1,71 @@\n+package com.baeldung\n+\n+import org.apache.http.HttpEntity;\n+import org.apache.http.client.methods.CloseableHttpResponse;\n+import org.apache.http.client.methods.HttpGet;\n+import org.apache.http.conn.ssl.SSLConnectionSocketFactory;\n+import org.apache.http.impl.client.CloseableHttpClient;\n+import org.apache.http.impl.client.HttpClients;\n+import org.apache.http.ssl.SSLContexts;\n+import org.apache.http.util.EntityUtils;\n+\n+import javax.net.ssl.SSLSocket;\n+import java.net.InetSocketAddress;\n+import java.net.SocketAddress;\n+\n+public class ClientTlsVersionExmaples{\n+\n+    public static CloseableHttpClient setViaSocketFactory(){\n+        SSLConnectionSocketFactory sslsf = new SSLConnectionSocketFactory(\n+                SSLContexts.createDefault(),\n+                new String[] {\"TLSv1.2\", \"TLSv1.3\"},\n+                null,\n+                SSLConnectionSocketFactory.getDefaultHostnameVerifier());\n+\n+        return HttpClients.custom().setSSLSocketFactory(sslsf).build();\n+    }\n+\n+    public static CloseableHttpClient setTlsVersionPerConnection() {\n+        SSLConnectionSocketFactory sslsf = new SSLConnectionSocketFactory(SSLContexts.createDefault()){\n+\n+            @Override\n+            protected void prepareSocket(SSLSocket socket) {\n+\n+                String hostname = socket.getInetAddress().getHostName();\n+                if (hostname.endsWith(\"internal.system.com\")){\n+                    socket.setEnabledProtocols(new String[] { \"TLSv1\", \"TLSv1.1\", \"TLSv1.2\", \"TLSv1.3\" });\n+                }\n+                else {\n+                    socket.setEnabledProtocols(new String[] {\"TLSv1.3\"});\n+                }\n+            }\n+        };\n+\n+        return HttpClients.custom().setSSLSocketFactory(sslsf).build();\n+    }\n+\n+    //To configure the TLS versions for the client, set the https.protocols system property during runtime.\n+    //For example: java -Dhttps.protocols=TLSv1.1,TLSv1.2,TLSv1.3 -jar webClient.jar\n+    public static CloseableHttpClient setViaSystemProperties(){\n+        return HttpClients.createSystem();\n+        //alternatively\n+        //return HttpClients.custom().useSystemProperties().build();\n+    }\n+\n+    public static void main(String[] args) throws Exception {\n+\n+        CloseableHttpClient httpClient = setTlsVersionPerConnection();\n+        //HttpClient httpClient = setViaSocketFactory();\n+        //HttpClient httpClient = setViaSystemProperties();\n+\n+        try {\n+            try (CloseableHttpResponse response = httpClient.execute(new HttpGet(\"https://httpbin.org/\"))) {\n+                HttpEntity entity = response.getEntity();\n+                EntityUtils.consume(entity);\n+            }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1c10860a70ec5127ce8113faa0da01ace101af68"}, "originalPosition": 65}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODA0NjI4Mw==", "bodyText": "I did it so I could have the instantiation of the httpClient separated and I could show the two other ways of creating the client right beside it (but commented out). I changed it to a multi-line try-with-resources instead like you suggested", "url": "https://github.com/eugenp/tutorials/pull/9936#discussion_r488046283", "createdAt": "2020-09-14T15:59:20Z", "author": {"login": "joe-boudreau"}, "path": "httpclient/src/main/java/com/baeldung/ClientTlsVersionExamples", "diffHunk": "@@ -0,0 +1,71 @@\n+package com.baeldung\n+\n+import org.apache.http.HttpEntity;\n+import org.apache.http.client.methods.CloseableHttpResponse;\n+import org.apache.http.client.methods.HttpGet;\n+import org.apache.http.conn.ssl.SSLConnectionSocketFactory;\n+import org.apache.http.impl.client.CloseableHttpClient;\n+import org.apache.http.impl.client.HttpClients;\n+import org.apache.http.ssl.SSLContexts;\n+import org.apache.http.util.EntityUtils;\n+\n+import javax.net.ssl.SSLSocket;\n+import java.net.InetSocketAddress;\n+import java.net.SocketAddress;\n+\n+public class ClientTlsVersionExmaples{\n+\n+    public static CloseableHttpClient setViaSocketFactory(){\n+        SSLConnectionSocketFactory sslsf = new SSLConnectionSocketFactory(\n+                SSLContexts.createDefault(),\n+                new String[] {\"TLSv1.2\", \"TLSv1.3\"},\n+                null,\n+                SSLConnectionSocketFactory.getDefaultHostnameVerifier());\n+\n+        return HttpClients.custom().setSSLSocketFactory(sslsf).build();\n+    }\n+\n+    public static CloseableHttpClient setTlsVersionPerConnection() {\n+        SSLConnectionSocketFactory sslsf = new SSLConnectionSocketFactory(SSLContexts.createDefault()){\n+\n+            @Override\n+            protected void prepareSocket(SSLSocket socket) {\n+\n+                String hostname = socket.getInetAddress().getHostName();\n+                if (hostname.endsWith(\"internal.system.com\")){\n+                    socket.setEnabledProtocols(new String[] { \"TLSv1\", \"TLSv1.1\", \"TLSv1.2\", \"TLSv1.3\" });\n+                }\n+                else {\n+                    socket.setEnabledProtocols(new String[] {\"TLSv1.3\"});\n+                }\n+            }\n+        };\n+\n+        return HttpClients.custom().setSSLSocketFactory(sslsf).build();\n+    }\n+\n+    //To configure the TLS versions for the client, set the https.protocols system property during runtime.\n+    //For example: java -Dhttps.protocols=TLSv1.1,TLSv1.2,TLSv1.3 -jar webClient.jar\n+    public static CloseableHttpClient setViaSystemProperties(){\n+        return HttpClients.createSystem();\n+        //alternatively\n+        //return HttpClients.custom().useSystemProperties().build();\n+    }\n+\n+    public static void main(String[] args) throws Exception {\n+\n+        CloseableHttpClient httpClient = setTlsVersionPerConnection();\n+        //HttpClient httpClient = setViaSocketFactory();\n+        //HttpClient httpClient = setViaSystemProperties();\n+\n+        try {\n+            try (CloseableHttpResponse response = httpClient.execute(new HttpGet(\"https://httpbin.org/\"))) {\n+                HttpEntity entity = response.getEntity();\n+                EntityUtils.consume(entity);\n+            }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzM1NzYyMA=="}, "originalCommit": {"oid": "1c10860a70ec5127ce8113faa0da01ace101af68"}, "originalPosition": 65}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4218, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}