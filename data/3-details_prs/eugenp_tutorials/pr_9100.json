{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAyOTk5NTE1", "number": 9100, "title": "BAEL-3961 Using a list of values in a JDBCTemplate IN clause", "bodyText": "", "createdAt": "2020-04-14T06:45:41Z", "url": "https://github.com/eugenp/tutorials/pull/9100", "merged": true, "mergeCommit": {"oid": "0895535b927bff32787d90a3e2e793ab990c5c38"}, "closed": true, "closedAt": "2020-04-24T01:08:02Z", "author": {"login": "wugangca"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcXdtppgH2gAyNDAyOTk5NTE1OjhjMmIzMmRmOTE2OTI5MWU1NmIyODQwNzJiZWRiMDFlZjRkMTFkMDQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcaVSedAH2gAyNDAyOTk5NTE1OjA3YzI4NTE2MTA1ODYxMDgwZGZhNmVlMGVjYzRiZTQ2M2U0NTdiYzM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "8c2b32df9169291e56b284072bedb01ef4d11d04", "author": {"user": null}, "url": "https://github.com/eugenp/tutorials/commit/8c2b32df9169291e56b284072bedb01ef4d11d04", "committedDate": "2020-04-14T06:43:27Z", "message": "BAEL-3961 Using a list of values in a JDBCTemplate IN clause"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d40b549f280fcf38b69e0b433a0410eb9345d20d", "author": {"user": null}, "url": "https://github.com/eugenp/tutorials/commit/d40b549f280fcf38b69e0b433a0410eb9345d20d", "committedDate": "2020-04-15T01:23:11Z", "message": "BAEL-3961 Make the program more robust by only create the table when necessary and clean all data in the temp table."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1272006aa6a10491a0d6cd1a16845c674be2f11c", "author": {"user": null}, "url": "https://github.com/eugenp/tutorials/commit/1272006aa6a10491a0d6cd1a16845c674be2f11c", "committedDate": "2020-04-18T18:48:37Z", "message": "BAEL-3961 Remove address field of Employee class."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk4NzI5NDE5", "url": "https://github.com/eugenp/tutorials/pull/9100#pullrequestreview-398729419", "createdAt": "2020-04-23T03:11:36Z", "commit": {"oid": "1272006aa6a10491a0d6cd1a16845c674be2f11c"}, "state": "DISMISSED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QwMzoxMTozNlrOGKUnOQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QwMzoxMjo1NFrOGKUoqg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzQ3NjY2NQ==", "bodyText": "To improve readability, we could move the first parameter to the query method to its own line.", "url": "https://github.com/eugenp/tutorials/pull/9100#discussion_r413476665", "createdAt": "2020-04-23T03:11:36Z", "author": {"login": "KevinGilmore"}, "path": "persistence-modules/spring-persistence-simple-2/src/main/java/com/baeldung/jdbc/EmployeeDAO.java", "diffHunk": "@@ -1,21 +1,64 @@\n package com.baeldung.jdbc;\n \n+import java.util.ArrayList;\n+import java.util.Collections;\n+import java.util.List;\n+\n import javax.sql.DataSource;\n \n import org.springframework.jdbc.core.JdbcTemplate;\n+import org.springframework.jdbc.core.namedparam.MapSqlParameterSource;\n+import org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate;\n+import org.springframework.jdbc.core.namedparam.SqlParameterSource;\n import org.springframework.stereotype.Repository;\n \n @Repository\n public class EmployeeDAO {\n     private JdbcTemplate jdbcTemplate;\n+    private NamedParameterJdbcTemplate namedJdbcTemplate;\n \n     public void setDataSource(DataSource dataSource) {\n         jdbcTemplate = new JdbcTemplate(dataSource);\n+        namedJdbcTemplate = new NamedParameterJdbcTemplate(dataSource);\n     }\n \n     public int getCountOfEmployees() {\n         return jdbcTemplate.queryForObject(\"SELECT COUNT(*) FROM EMPLOYEE\", Integer.class);\n     }\n \n-   \n+    public List<Employee> getEmployeesFromIdListNamed(List<Integer> ids) {\n+        SqlParameterSource parameters = new MapSqlParameterSource(\"ids\", ids);\n+        List<Employee> employees = namedJdbcTemplate.query(\"SELECT * FROM EMPLOYEE WHERE id IN (:ids)\", \n+          parameters, \n+          (rs, rowNum) -> new Employee(rs.getInt(\"id\"), rs.getString(\"first_name\"), rs.getString(\"last_name\")));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1272006aa6a10491a0d6cd1a16845c674be2f11c"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzQ3NzAzNA==", "bodyText": "Same as above -- move the parameter containing the SQL statement to its own line.", "url": "https://github.com/eugenp/tutorials/pull/9100#discussion_r413477034", "createdAt": "2020-04-23T03:12:54Z", "author": {"login": "KevinGilmore"}, "path": "persistence-modules/spring-persistence-simple-2/src/main/java/com/baeldung/jdbc/EmployeeDAO.java", "diffHunk": "@@ -1,21 +1,64 @@\n package com.baeldung.jdbc;\n \n+import java.util.ArrayList;\n+import java.util.Collections;\n+import java.util.List;\n+\n import javax.sql.DataSource;\n \n import org.springframework.jdbc.core.JdbcTemplate;\n+import org.springframework.jdbc.core.namedparam.MapSqlParameterSource;\n+import org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate;\n+import org.springframework.jdbc.core.namedparam.SqlParameterSource;\n import org.springframework.stereotype.Repository;\n \n @Repository\n public class EmployeeDAO {\n     private JdbcTemplate jdbcTemplate;\n+    private NamedParameterJdbcTemplate namedJdbcTemplate;\n \n     public void setDataSource(DataSource dataSource) {\n         jdbcTemplate = new JdbcTemplate(dataSource);\n+        namedJdbcTemplate = new NamedParameterJdbcTemplate(dataSource);\n     }\n \n     public int getCountOfEmployees() {\n         return jdbcTemplate.queryForObject(\"SELECT COUNT(*) FROM EMPLOYEE\", Integer.class);\n     }\n \n-   \n+    public List<Employee> getEmployeesFromIdListNamed(List<Integer> ids) {\n+        SqlParameterSource parameters = new MapSqlParameterSource(\"ids\", ids);\n+        List<Employee> employees = namedJdbcTemplate.query(\"SELECT * FROM EMPLOYEE WHERE id IN (:ids)\", \n+          parameters, \n+          (rs, rowNum) -> new Employee(rs.getInt(\"id\"), rs.getString(\"first_name\"), rs.getString(\"last_name\")));\n+\n+        return employees;\n+    }\n+\n+    public List<Employee> getEmployeesFromIdList(List<Integer> ids) {\n+        String inSql = String.join(\",\", Collections.nCopies(ids.size(), \"?\"));\n+        List<Employee> employees = jdbcTemplate.query(String.format(\"SELECT * FROM EMPLOYEE WHERE id IN (%s)\", inSql), \n+          ids.toArray(), \n+          (rs, rowNum) -> new Employee(rs.getInt(\"id\"), rs.getString(\"first_name\"), rs.getString(\"last_name\")));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1272006aa6a10491a0d6cd1a16845c674be2f11c"}, "originalPosition": 43}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0e62b00c7f2a31e1ba1ba49665b1ec29fccba3c6", "author": {"user": null}, "url": "https://github.com/eugenp/tutorials/commit/0e62b00c7f2a31e1ba1ba49665b1ec29fccba3c6", "committedDate": "2020-04-23T04:15:54Z", "message": "BAEL-3961 move the sql string into a new line to improve readability."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "07c28516105861080dfa6ee0ecc4be463e457bc3", "author": {"user": null}, "url": "https://github.com/eugenp/tutorials/commit/07c28516105861080dfa6ee0ecc4be463e457bc3", "committedDate": "2020-04-23T04:36:18Z", "message": "BAEL-3961 move the sql string into a new line to improve readability."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4091, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}