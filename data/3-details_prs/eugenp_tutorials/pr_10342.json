{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQ1NTM1NTQ5", "number": 10342, "title": "Added changes to show transaction roll back", "bodyText": "", "createdAt": "2020-12-25T07:01:40Z", "url": "https://github.com/eugenp/tutorials/pull/10342", "merged": true, "mergeCommit": {"oid": "428c68585a83bd507eabc54c6b674cb77a1bb640"}, "closed": true, "closedAt": "2021-01-13T01:40:37Z", "author": {"login": "amitiw4u"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdpf4dDgH2gAyNTQ1NTM1NTQ5OjlmNzZhZmM0NDA0ZDQwMThmNDRhYmZkNzJjMmI1YTFhNjg4ZGQ2MzQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdtWeFeAFqTU2MjI5MTc5NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "9f76afc4404d4018f44abfd72c2b5a1a688dd634", "author": {"user": {"login": "ati083", "name": null}}, "url": "https://github.com/eugenp/tutorials/commit/9f76afc4404d4018f44abfd72c2b5a1a688dd634", "committedDate": "2020-12-25T03:36:51Z", "message": "Added changes to show transaction roll back"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "97ceb5bf4188a84f187495b6142c26f9f154c6cd", "author": {"user": {"login": "ati083", "name": null}}, "url": "https://github.com/eugenp/tutorials/commit/97ceb5bf4188a84f187495b6142c26f9f154c6cd", "committedDate": "2020-12-26T00:44:52Z", "message": "Removed unwanted method"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "54d5253dc28783e50105c37766912b1d7cf56a81", "author": {"user": {"login": "ati083", "name": null}}, "url": "https://github.com/eugenp/tutorials/commit/54d5253dc28783e50105c37766912b1d7cf56a81", "committedDate": "2021-01-04T03:35:55Z", "message": "BAEL-4624: Review comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "91c847610ea920c319fa8f30538a9e0a2e615465", "author": {"user": {"login": "ati083", "name": null}}, "url": "https://github.com/eugenp/tutorials/commit/91c847610ea920c319fa8f30538a9e0a2e615465", "committedDate": "2021-01-05T14:47:31Z", "message": "Added no roll back example"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYyMjkxNzk0", "url": "https://github.com/eugenp/tutorials/pull/10342#pullrequestreview-562291794", "createdAt": "2021-01-06T02:54:36Z", "commit": {"oid": "91c847610ea920c319fa8f30538a9e0a2e615465"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNlQwMjo1NDozNlrOIOv7iQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNlQwMjo1NDozNlrOIOv7iQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjMzNjI2NQ==", "bodyText": "Let's change the message to \"Throwing exception without rollback\"", "url": "https://github.com/eugenp/tutorials/pull/10342#discussion_r552336265", "createdAt": "2021-01-06T02:54:36Z", "author": {"login": "eric-martin"}, "path": "persistence-modules/spring-jpa-2/src/main/java/com/baeldung/spring/transaction/CourseService.java", "diffHunk": "@@ -0,0 +1,44 @@\n+package com.baeldung.spring.transaction;\n+\n+import java.sql.SQLException;\n+\n+import org.springframework.beans.factory.annotation.Autowired;\n+import org.springframework.dao.DataIntegrityViolationException;\n+import org.springframework.stereotype.Service;\n+import org.springframework.transaction.annotation.Transactional;\n+import org.springframework.transaction.interceptor.TransactionAspectSupport;\n+\n+@Service\n+public class CourseService {\n+    \n+    @Autowired\n+    private CourseDao courseDao;\n+    \n+    @Transactional\n+    public void createCourseDeclarativeWithRuntimeException(Course course) {\n+        courseDao.create(course);\n+        throw new DataIntegrityViolationException(\"Throwing exception for demoing Rollback!!!\");\n+    }\n+    \n+    @Transactional(rollbackFor = { SQLException.class })\n+    public void createCourseDeclarativeWithCheckedException(Course course) throws SQLException {\n+        courseDao.create(course);\n+        throw new SQLException(\"Throwing exception for demoing Rollback!!!\");\n+    }\n+    \n+    public void createCourseDefaultRatingProgramatic(Course course) {\n+        try {\n+            courseDao.create(course);\n+            throw new DataIntegrityViolationException(\"Throwing exception for demoing Rollback!!!\");\n+        } catch (Exception e) {\n+            TransactionAspectSupport.currentTransactionStatus().setRollbackOnly();\n+        }\n+    }\n+    \n+    @Transactional(noRollbackFor = { SQLException.class })\n+    public void createCourseDeclarativeWithNoRollBack(Course course) throws SQLException {\n+        courseDao.create(course);\n+        throw new SQLException(\"Throwing exception for demoing Rollback!!!\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "91c847610ea920c319fa8f30538a9e0a2e615465"}, "originalPosition": 41}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3844, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}