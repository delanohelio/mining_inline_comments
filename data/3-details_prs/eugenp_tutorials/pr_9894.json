{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY5NzE5ODcy", "number": 9894, "title": "[BAEL-4471] Quarkus Testing", "bodyText": "", "createdAt": "2020-08-18T20:12:43Z", "url": "https://github.com/eugenp/tutorials/pull/9894", "merged": true, "mergeCommit": {"oid": "a3ad3c4cb489e71bb723e70afdfdcebfc63dcf0b"}, "closed": true, "closedAt": "2020-08-29T15:35:02Z", "author": {"login": "adrian-maghear"}, "timelineItems": {"totalCount": 16, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdAMltUgH2gAyNDY5NzE5ODcyOjk2M2I5ZGZmZmQxZTI5MTY2MTM2NWYxYTBhOGVjZDI3MGY5YjA2ODY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdDrbbUgFqTQ3ODEzNTg2Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "963b9dfffd1e291661365f1a0a8ecd270f9b0686", "author": {"user": {"login": "adrian-maghear", "name": "Adrian Maghear"}}, "url": "https://github.com/eugenp/tutorials/commit/963b9dfffd1e291661365f1a0a8ecd270f9b0686", "committedDate": "2020-08-18T19:57:17Z", "message": "[BAEL-4471] initial commit\n\n[BAEL-4471] commit\n\n[BAEL-4471] commit\n\n[BAEL-4471] commit\n\n[BAEL-4471] commit"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d181d9503069d0deaf3c6e4a0925155f7b1821a3", "author": {"user": {"login": "adrian-maghear", "name": "Adrian Maghear"}}, "url": "https://github.com/eugenp/tutorials/commit/d181d9503069d0deaf3c6e4a0925155f7b1821a3", "committedDate": "2020-08-18T20:11:21Z", "message": "[BAEL-4471] cosmetic fixes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7cee3657cb61128db07b56d738284dfdf446f405", "author": {"user": {"login": "adrian-maghear", "name": "Adrian Maghear"}}, "url": "https://github.com/eugenp/tutorials/commit/7cee3657cb61128db07b56d738284dfdf446f405", "committedDate": "2020-08-18T21:25:20Z", "message": "[BAEL-4471] remove testcontainers"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxMTU5NjM1", "url": "https://github.com/eugenp/tutorials/pull/9894#pullrequestreview-471159635", "createdAt": "2020-08-20T04:06:13Z", "commit": {"oid": "7cee3657cb61128db07b56d738284dfdf446f405"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQwNDowNjoxM1rOHDowtw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQwNDowNzozMFrOHDoyQw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzU3NTYwNw==", "bodyText": "Use 4-space indent per level", "url": "https://github.com/eugenp/tutorials/pull/9894#discussion_r473575607", "createdAt": "2020-08-20T04:06:13Z", "author": {"login": "KevinGilmore"}, "path": "quarkus/src/test/java/com/baeldung/quarkus/CustomLibraryResourceIntegrationTest.java", "diffHunk": "@@ -0,0 +1,28 @@\n+package com.baeldung.quarkus;\n+\n+import com.baeldung.quarkus.utils.CustomTestProfile;\n+import io.quarkus.test.junit.QuarkusTest;\n+import io.quarkus.test.junit.TestProfile;\n+import io.restassured.http.ContentType;\n+import org.junit.jupiter.api.Test;\n+\n+import static io.restassured.RestAssured.given;\n+import static org.hamcrest.CoreMatchers.is;\n+import static org.hamcrest.Matchers.hasItems;\n+\n+@QuarkusTest\n+@TestProfile(CustomTestProfile.class)\n+class CustomLibraryResourceIntegrationTest {\n+\n+    public static final String BOOKSTORE_ENDPOINT = \"/custom/library/book\";\n+\n+    @Test\n+    void testGetBookEndpoint() {\n+        given().contentType(ContentType.JSON)\n+               .when().get(BOOKSTORE_ENDPOINT)\n+               .then()\n+               .statusCode(200)\n+               .body(\"size()\", is(2))\n+               .body(\"title\", hasItems(\"Foundation\", \"Dune\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7cee3657cb61128db07b56d738284dfdf446f405"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzU3NTY2MA==", "bodyText": "4-space indent", "url": "https://github.com/eugenp/tutorials/pull/9894#discussion_r473575660", "createdAt": "2020-08-20T04:06:23Z", "author": {"login": "KevinGilmore"}, "path": "quarkus/src/test/java/com/baeldung/quarkus/LibraryHttpEndpointIntegrationTest.java", "diffHunk": "@@ -0,0 +1,23 @@\n+package com.baeldung.quarkus;\n+\n+import io.quarkus.test.common.http.TestHTTPEndpoint;\n+import io.quarkus.test.junit.QuarkusTest;\n+import io.restassured.http.ContentType;\n+import org.junit.jupiter.api.Test;\n+\n+import static io.restassured.RestAssured.given;\n+\n+@QuarkusTest\n+@TestHTTPEndpoint(LibraryResource.class)\n+class LibraryHttpEndpointIntegrationTest {\n+\n+    @Test\n+    void testGetBookEndpoint() {\n+        given().contentType(ContentType.JSON)\n+               .when()\n+               .get(\"book\")\n+               .then()\n+               .statusCode(200);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7cee3657cb61128db07b56d738284dfdf446f405"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzU3NTcyOA==", "bodyText": "4-space indent", "url": "https://github.com/eugenp/tutorials/pull/9894#discussion_r473575728", "createdAt": "2020-08-20T04:06:36Z", "author": {"login": "KevinGilmore"}, "path": "quarkus/src/test/java/com/baeldung/quarkus/LibraryResourceInjectSpyIntegrationTest.java", "diffHunk": "@@ -0,0 +1,28 @@\n+package com.baeldung.quarkus;\n+\n+import com.baeldung.quarkus.service.LibraryService;\n+import io.quarkus.test.junit.QuarkusTest;\n+import io.quarkus.test.junit.mockito.InjectSpy;\n+import io.restassured.http.ContentType;\n+import org.junit.jupiter.api.Test;\n+\n+import static io.restassured.RestAssured.given;\n+import static org.mockito.Mockito.verify;\n+\n+@QuarkusTest\n+class LibraryResourceInjectSpyIntegrationTest {\n+\n+    @InjectSpy\n+    LibraryService libraryService;\n+\n+    @Test\n+    void whenFindByAuthor_thenBookShouldBeFound() {\n+        given().contentType(ContentType.JSON).param(\"query\", \"Asimov\")\n+               .when().get(\"/library/book\")\n+               .then()\n+               .statusCode(200);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7cee3657cb61128db07b56d738284dfdf446f405"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzU3NTc5Ng==", "bodyText": "4-space indent", "url": "https://github.com/eugenp/tutorials/pull/9894#discussion_r473575796", "createdAt": "2020-08-20T04:06:46Z", "author": {"login": "KevinGilmore"}, "path": "quarkus/src/test/java/com/baeldung/quarkus/LibraryResourceIntegrationTest.java", "diffHunk": "@@ -0,0 +1,33 @@\n+package com.baeldung.quarkus;\n+\n+import io.quarkus.test.common.http.TestHTTPEndpoint;\n+import io.quarkus.test.common.http.TestHTTPResource;\n+import io.quarkus.test.junit.QuarkusTest;\n+import io.restassured.http.ContentType;\n+import org.junit.jupiter.api.Test;\n+\n+import java.net.URL;\n+\n+import static io.restassured.RestAssured.given;\n+import static org.hamcrest.CoreMatchers.is;\n+import static org.hamcrest.Matchers.hasItem;\n+\n+@QuarkusTest\n+class LibraryResourceIntegrationTest {\n+\n+    @TestHTTPEndpoint(LibraryResource.class)\n+    @TestHTTPResource(\"book\")\n+    URL libraryEndpoint;\n+\n+    @Test\n+    void testGetBookEndpoint() {\n+        given().contentType(ContentType.JSON).param(\"query\", \"Dune\")\n+               .when().get(libraryEndpoint)\n+               .then()\n+               .statusCode(200)\n+               .body(\"size()\", is(1))\n+               .body(\"title\", hasItem(\"Dune\"))\n+               .body(\"author\", hasItem(\"Frank Herbert\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7cee3657cb61128db07b56d738284dfdf446f405"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzU3NTg5Ng==", "bodyText": "4-space indent per level", "url": "https://github.com/eugenp/tutorials/pull/9894#discussion_r473575896", "createdAt": "2020-08-20T04:07:04Z", "author": {"login": "KevinGilmore"}, "path": "quarkus/src/test/java/com/baeldung/quarkus/service/LibraryServiceInjectMockUnitTest.java", "diffHunk": "@@ -0,0 +1,38 @@\n+package com.baeldung.quarkus.service;\n+\n+import com.baeldung.quarkus.model.Book;\n+import com.baeldung.quarkus.repository.BookRepository;\n+import io.quarkus.test.junit.QuarkusTest;\n+import io.quarkus.test.junit.mockito.InjectMock;\n+import org.junit.jupiter.api.BeforeEach;\n+import org.junit.jupiter.api.Test;\n+\n+import javax.inject.Inject;\n+import java.util.Arrays;\n+\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+import static org.mockito.Mockito.when;\n+\n+@QuarkusTest\n+class LibraryServiceInjectMockUnitTest {\n+\n+    @Inject\n+    LibraryService libraryService;\n+\n+    @InjectMock\n+    BookRepository bookRepository;\n+\n+    @BeforeEach\n+    void setUp() {\n+        when(bookRepository.findBy(\"Frank Herbert\"))\n+                .thenReturn(Arrays.stream(new Book[] {\n+                        new Book(\"Dune\", \"Frank Herbert\"),\n+                        new Book(\"Children of Dune\", \"Frank Herbert\")}));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7cee3657cb61128db07b56d738284dfdf446f405"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzU3NTk1Ng==", "bodyText": "4-space indent per level", "url": "https://github.com/eugenp/tutorials/pull/9894#discussion_r473575956", "createdAt": "2020-08-20T04:07:17Z", "author": {"login": "KevinGilmore"}, "path": "quarkus/src/test/java/com/baeldung/quarkus/service/LibraryServiceQuarkusMockUnitTest.java", "diffHunk": "@@ -0,0 +1,38 @@\n+package com.baeldung.quarkus.service;\n+\n+import com.baeldung.quarkus.model.Book;\n+import com.baeldung.quarkus.repository.BookRepository;\n+import com.baeldung.quarkus.utils.TestBookRepository;\n+import io.quarkus.test.junit.QuarkusMock;\n+import io.quarkus.test.junit.QuarkusTest;\n+import org.junit.jupiter.api.BeforeEach;\n+import org.junit.jupiter.api.Test;\n+import org.mockito.Mockito;\n+\n+import javax.inject.Inject;\n+import java.util.Arrays;\n+\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+\n+@QuarkusTest\n+class LibraryServiceQuarkusMockUnitTest {\n+\n+    @Inject\n+    LibraryService libraryService;\n+\n+    @BeforeEach\n+    void setUp() {\n+        BookRepository mock = Mockito.mock(TestBookRepository.class);\n+        Mockito.when(mock.findBy(\"Asimov\"))\n+                .thenReturn(Arrays.stream(new Book[] {\n+                        new Book(\"Foundation\", \"Isaac Asimov\"),\n+                        new Book(\"I Robot\", \"Isaac Asimov\")}));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7cee3657cb61128db07b56d738284dfdf446f405"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzU3NjAwMw==", "bodyText": "4-space indent", "url": "https://github.com/eugenp/tutorials/pull/9894#discussion_r473576003", "createdAt": "2020-08-20T04:07:30Z", "author": {"login": "KevinGilmore"}, "path": "quarkus/src/test/java/com/baeldung/quarkus/utils/TestBookRepository.java", "diffHunk": "@@ -0,0 +1,22 @@\n+package com.baeldung.quarkus.utils;\n+\n+import com.baeldung.quarkus.model.Book;\n+import com.baeldung.quarkus.repository.BookRepository;\n+\n+import javax.annotation.PostConstruct;\n+import javax.annotation.Priority;\n+import javax.enterprise.context.ApplicationScoped;\n+import javax.enterprise.inject.Alternative;\n+\n+@Priority(1)\n+@Alternative\n+@ApplicationScoped\n+public class TestBookRepository extends BookRepository {\n+\n+    @PostConstruct\n+    public void init() {\n+        persist(new Book(\"Dune\", \"Frank Herbert\"),\n+                new Book(\"Foundation\", \"Isaac Asimov\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7cee3657cb61128db07b56d738284dfdf446f405"}, "originalPosition": 19}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1486cabd1125e55a906488a58f126de93df5f449", "author": {"user": {"login": "adrian-maghear", "name": "Adrian Maghear"}}, "url": "https://github.com/eugenp/tutorials/commit/1486cabd1125e55a906488a58f126de93df5f449", "committedDate": "2020-08-20T12:38:21Z", "message": "[BAEL-4471] PR comments fixes"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d6caedd34e3e333d987ebc273d788d10ad2447be", "author": {"user": {"login": "adrian-maghear", "name": "Adrian Maghear"}}, "url": "https://github.com/eugenp/tutorials/commit/d6caedd34e3e333d987ebc273d788d10ad2447be", "committedDate": "2020-08-20T12:36:06Z", "message": "[BAEL-4471] PR comments fixes"}, "afterCommit": {"oid": "1486cabd1125e55a906488a58f126de93df5f449", "author": {"user": {"login": "adrian-maghear", "name": "Adrian Maghear"}}, "url": "https://github.com/eugenp/tutorials/commit/1486cabd1125e55a906488a58f126de93df5f449", "committedDate": "2020-08-20T12:38:21Z", "message": "[BAEL-4471] PR comments fixes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b6f84a320cafec321b0eab8bc6fdbcc2691bb43c", "author": {"user": {"login": "adrian-maghear", "name": "Adrian Maghear"}}, "url": "https://github.com/eugenp/tutorials/commit/b6f84a320cafec321b0eab8bc6fdbcc2691bb43c", "committedDate": "2020-08-25T16:08:48Z", "message": "[BAEL-4471] PR comments fixes"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d448527f8a975c7f6aa713ada28dab80767984c6", "author": {"user": {"login": "adrian-maghear", "name": "Adrian Maghear"}}, "url": "https://github.com/eugenp/tutorials/commit/d448527f8a975c7f6aa713ada28dab80767984c6", "committedDate": "2020-08-25T15:59:16Z", "message": "[BAEL-4471] PR comments fixes"}, "afterCommit": {"oid": "b6f84a320cafec321b0eab8bc6fdbcc2691bb43c", "author": {"user": {"login": "adrian-maghear", "name": "Adrian Maghear"}}, "url": "https://github.com/eugenp/tutorials/commit/b6f84a320cafec321b0eab8bc6fdbcc2691bb43c", "committedDate": "2020-08-25T16:08:48Z", "message": "[BAEL-4471] PR comments fixes"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "eebd340c3aa23628d9db65ea717d0cd4319c8a22", "author": {"user": {"login": "adrian-maghear", "name": "Adrian Maghear"}}, "url": "https://github.com/eugenp/tutorials/commit/eebd340c3aa23628d9db65ea717d0cd4319c8a22", "committedDate": "2020-08-25T16:13:31Z", "message": "[BAEL-4471] assign random port while testing"}, "afterCommit": {"oid": "6691dc7235dc434ae7a480553b74d5dbfd493b6b", "author": {"user": {"login": "adrian-maghear", "name": "Adrian Maghear"}}, "url": "https://github.com/eugenp/tutorials/commit/6691dc7235dc434ae7a480553b74d5dbfd493b6b", "committedDate": "2020-08-25T16:30:04Z", "message": "[BAEL-4471] assign different port while testing"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6691dc7235dc434ae7a480553b74d5dbfd493b6b", "author": {"user": {"login": "adrian-maghear", "name": "Adrian Maghear"}}, "url": "https://github.com/eugenp/tutorials/commit/6691dc7235dc434ae7a480553b74d5dbfd493b6b", "committedDate": "2020-08-25T16:30:04Z", "message": "[BAEL-4471] assign different port while testing"}, "afterCommit": {"oid": "bfe2a7cfaa92c7ef370d47cf864bae681d36e765", "author": {"user": {"login": "adrian-maghear", "name": "Adrian Maghear"}}, "url": "https://github.com/eugenp/tutorials/commit/bfe2a7cfaa92c7ef370d47cf864bae681d36e765", "committedDate": "2020-08-25T16:41:46Z", "message": "[BAEL-4471] assign different port per profile while testing"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bfe2a7cfaa92c7ef370d47cf864bae681d36e765", "author": {"user": {"login": "adrian-maghear", "name": "Adrian Maghear"}}, "url": "https://github.com/eugenp/tutorials/commit/bfe2a7cfaa92c7ef370d47cf864bae681d36e765", "committedDate": "2020-08-25T16:41:46Z", "message": "[BAEL-4471] assign different port per profile while testing"}, "afterCommit": {"oid": "56801b64b6707a40a935d77060664f9501ae336a", "author": {"user": {"login": "adrian-maghear", "name": "Adrian Maghear"}}, "url": "https://github.com/eugenp/tutorials/commit/56801b64b6707a40a935d77060664f9501ae336a", "committedDate": "2020-08-25T17:21:50Z", "message": "[BAEL-4471] assign different port per profile while testing"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "56801b64b6707a40a935d77060664f9501ae336a", "author": {"user": {"login": "adrian-maghear", "name": "Adrian Maghear"}}, "url": "https://github.com/eugenp/tutorials/commit/56801b64b6707a40a935d77060664f9501ae336a", "committedDate": "2020-08-25T17:21:50Z", "message": "[BAEL-4471] assign different port per profile while testing"}, "afterCommit": {"oid": "6414d8b87024a3034fc60216aa8871e108beac2e", "author": {"user": {"login": "adrian-maghear", "name": "Adrian Maghear"}}, "url": "https://github.com/eugenp/tutorials/commit/6414d8b87024a3034fc60216aa8871e108beac2e", "committedDate": "2020-08-25T20:31:33Z", "message": "[BAEL-4471] assign different port per profile while testing"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d338c71812ee29b53375ee5eeeb9912434710bf0", "author": {"user": {"login": "adrian-maghear", "name": "Adrian Maghear"}}, "url": "https://github.com/eugenp/tutorials/commit/d338c71812ee29b53375ee5eeeb9912434710bf0", "committedDate": "2020-08-25T21:50:39Z", "message": "[BAEL-4471] assign different port per profile while testing"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6414d8b87024a3034fc60216aa8871e108beac2e", "author": {"user": {"login": "adrian-maghear", "name": "Adrian Maghear"}}, "url": "https://github.com/eugenp/tutorials/commit/6414d8b87024a3034fc60216aa8871e108beac2e", "committedDate": "2020-08-25T20:31:33Z", "message": "[BAEL-4471] assign different port per profile while testing"}, "afterCommit": {"oid": "d338c71812ee29b53375ee5eeeb9912434710bf0", "author": {"user": {"login": "adrian-maghear", "name": "Adrian Maghear"}}, "url": "https://github.com/eugenp/tutorials/commit/d338c71812ee29b53375ee5eeeb9912434710bf0", "committedDate": "2020-08-25T21:50:39Z", "message": "[BAEL-4471] assign different port per profile while testing"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cc69f0a8178de8777c6ea20455cea9bc06df4931", "author": {"user": {"login": "adrian-maghear", "name": "Adrian Maghear"}}, "url": "https://github.com/eugenp/tutorials/commit/cc69f0a8178de8777c6ea20455cea9bc06df4931", "committedDate": "2020-08-28T14:18:37Z", "message": "[BAEL-4471] rename unit to integration test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc4MTM1ODYy", "url": "https://github.com/eugenp/tutorials/pull/9894#pullrequestreview-478135862", "createdAt": "2020-08-29T15:34:53Z", "commit": {"oid": "cc69f0a8178de8777c6ea20455cea9bc06df4931"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4333, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}