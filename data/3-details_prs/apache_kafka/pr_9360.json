{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk2MTgzMjQw", "number": 9360, "title": "KAFKA-10557: Missing docs when describing topic configs including", "bodyText": "documentation\nAdded unit test\nCo-authored-by: Edoardo Comar ecomar@uk.ibm.com\nCo-authored-by: Mickael Maison mickael.maison@gmail.com\nCommitter Checklist (excluded from commit message)\n\n Verify design and implementation\n Verify test coverage and CI build status\n Verify documentation (including upgrade notes)", "createdAt": "2020-10-01T11:26:25Z", "url": "https://github.com/apache/kafka/pull/9360", "merged": true, "mergeCommit": {"oid": "3edb94eb231f33b42e3420541632b38fb349d9c2"}, "closed": true, "closedAt": "2020-10-02T09:09:11Z", "author": {"login": "edoardocomar"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdOPm_EAH2gAyNDk2MTgzMjQwOjQ5MmYzMWZjYzIxYjk5N2M0YzAwNTdhM2Q1YmE0YzkwZjkzMTEyZjk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdOTt_GAH2gAyNDk2MTgzMjQwOjBjMjg2MzViYWZlYzIyNGIwODdlNWY5OThkNDg3NTI3YzRjOGMwZjk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "492f31fcc21b997c4c0057a3d5ba4c90f93112f9", "author": {"user": {"login": "edoardocomar", "name": "Edoardo Comar"}}, "url": "https://github.com/apache/kafka/commit/492f31fcc21b997c4c0057a3d5ba4c90f93112f9", "committedDate": "2020-10-01T11:23:20Z", "message": "KAFKA-10557: Missing docs when describing topic configs including\ndocumentation\n\nCo-authored-by: Edoardo Comar <ecomar@uk.ibm.com>\nCo-authored-by: Mickael Maison <mickael.maison@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAwNDUzNDM4", "url": "https://github.com/apache/kafka/pull/9360#pullrequestreview-500453438", "createdAt": "2020-10-01T15:13:27Z", "commit": {"oid": "492f31fcc21b997c4c0057a3d5ba4c90f93112f9"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQxNToxMzoyN1rOHbPMfQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQxNToxMzo0NlrOHbPNZQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODMyMjU1Nw==", "bodyText": "nit: space before \"zk\" - why is broker id anyway :-) ?", "url": "https://github.com/apache/kafka/pull/9360#discussion_r498322557", "createdAt": "2020-10-01T15:13:27Z", "author": {"login": "rajinisivaram"}, "path": "core/src/test/scala/unit/kafka/server/AdminManagerTest.scala", "diffHunk": "@@ -80,4 +81,30 @@ class AdminManagerTest {\n     assertEquals(Errors.NONE.code, results.head.errorCode())\n     assertFalse(\"Should return configs\", results.head.configs().isEmpty)\n   }\n+\n+  @Test\n+  def testDescribeConfigsWithDocumentation(): Unit = {\n+    EasyMock.expect(zkClient.getEntityConfigs(ConfigType.Topic, topic)).andReturn(new java.util.Properties)\n+    EasyMock.expect(zkClient.getEntityConfigs(ConfigType.Broker, brokerId.toString)).andReturn(TestUtils.createBrokerConfig(brokerId,\"zk\"))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "492f31fcc21b997c4c0057a3d5ba4c90f93112f9"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODMyMjc4OQ==", "bodyText": "we could check documentation is not empty as well?", "url": "https://github.com/apache/kafka/pull/9360#discussion_r498322789", "createdAt": "2020-10-01T15:13:46Z", "author": {"login": "rajinisivaram"}, "path": "core/src/test/scala/unit/kafka/server/AdminManagerTest.scala", "diffHunk": "@@ -80,4 +81,30 @@ class AdminManagerTest {\n     assertEquals(Errors.NONE.code, results.head.errorCode())\n     assertFalse(\"Should return configs\", results.head.configs().isEmpty)\n   }\n+\n+  @Test\n+  def testDescribeConfigsWithDocumentation(): Unit = {\n+    EasyMock.expect(zkClient.getEntityConfigs(ConfigType.Topic, topic)).andReturn(new java.util.Properties)\n+    EasyMock.expect(zkClient.getEntityConfigs(ConfigType.Broker, brokerId.toString)).andReturn(TestUtils.createBrokerConfig(brokerId,\"zk\"))\n+    EasyMock.expect(metadataCache.contains(topic)).andReturn(true)\n+    EasyMock.replay(zkClient, metadataCache)\n+\n+    val adminManager = createAdminManager()\n+\n+    val resources = List(\n+      new DescribeConfigsRequestData.DescribeConfigsResource()\n+        .setResourceName(topic)\n+        .setResourceType(ConfigResource.Type.TOPIC.id),\n+      new DescribeConfigsRequestData.DescribeConfigsResource()\n+        .setResourceName(brokerId.toString)\n+        .setResourceType(ConfigResource.Type.BROKER.id))\n+\n+    val results: List[DescribeConfigsResponseData.DescribeConfigsResult] = adminManager.describeConfigs(resources, true, true)\n+    assertEquals(2, results.size)\n+    results.foreach(r => {\n+      assertEquals(Errors.NONE.code, r.errorCode)\n+      assertFalse(\"Should return configs\", r.configs.isEmpty)\n+      r.configs.forEach(c => assertNotNull(s\"Config ${c.name} should have documentation\", c.documentation))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "492f31fcc21b997c4c0057a3d5ba4c90f93112f9"}, "originalPosition": 35}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0c28635bafec224b087e5f998d487527c4c8c0f9", "author": {"user": {"login": "edoardocomar", "name": "Edoardo Comar"}}, "url": "https://github.com/apache/kafka/commit/0c28635bafec224b087e5f998d487527c4c8c0f9", "committedDate": "2020-10-01T16:10:36Z", "message": "addressed comments"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 734, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}