{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk0NTU2OTY2", "number": 9349, "title": "MINOR: add proper checks to KafkaConsumer.groupMetadata", "bodyText": "add following checks to KafkaConsumer.groupMetadata\n\nnull check of coordinator (replace NPE by InvalidGroupIdException which is same to other methods)\nconcurrent check (groupMetadata is not thread-safe so concurrent check is necessary)\n\nCommitter Checklist (excluded from commit message)\n\n Verify design and implementation\n Verify test coverage and CI build status\n Verify documentation (including upgrade notes)", "createdAt": "2020-09-29T05:05:45Z", "url": "https://github.com/apache/kafka/pull/9349", "merged": true, "mergeCommit": {"oid": "e0f215bbd3d1da21e97ad03c4375f4e7225b1a82"}, "closed": true, "closedAt": "2020-10-05T21:14:51Z", "author": {"login": "chia7712"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdOAN7HgFqTQ5OTY1NzU2Mg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdPqdMcAFqTUwMjQyNTQ0MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk5NjU3NTYy", "url": "https://github.com/apache/kafka/pull/9349#pullrequestreview-499657562", "createdAt": "2020-09-30T17:26:52Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQxNzoyNjo1MlrOHaoD8w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQxNzoyNjo1MlrOHaoD8w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzY4MTM5NQ==", "bodyText": "Another way to test this might be to use MockClient.enableBlockingUntilWakeup. That would let us block in Consumer.poll.", "url": "https://github.com/apache/kafka/pull/9349#discussion_r497681395", "createdAt": "2020-09-30T17:26:52Z", "author": {"login": "hachikuji"}, "path": "clients/src/test/java/org/apache/kafka/clients/consumer/KafkaConsumerTest.java", "diffHunk": "@@ -1994,6 +1995,24 @@ public void testGetGroupMetadata() {\n         assertEquals(groupInstanceId, groupMetadataAfterPoll.groupInstanceId());\n     }\n \n+    @Test\n+    public void testInvalidGroupMetadata() {\n+        Properties props = new Properties();\n+        props.setProperty(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, \"localhost:9999\");\n+        props.setProperty(ConsumerConfig.METRIC_REPORTER_CLASSES_CONFIG, MockMetricsReporter.class.getName());\n+        KafkaConsumer<String, String> consumer = new KafkaConsumer<>(\n+                props, new StringDeserializer(), new StringDeserializer());\n+\n+        // concurrent access is illegal\n+        consumer.currentThread.set(123);", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 21}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "031070aa8b99721f0c65050e8a05e4b05ea94733", "author": {"user": {"login": "chia7712", "name": "Chia-Ping Tsai"}}, "url": "https://github.com/apache/kafka/commit/031070aa8b99721f0c65050e8a05e4b05ea94733", "committedDate": "2020-10-01T10:51:32Z", "message": "MINOR: add proper checks to KafkaConsumer.groupMetadata"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "52fb914eda91dfdc1f52d1b6b4eeeef0f9f65741", "author": {"user": {"login": "chia7712", "name": "Chia-Ping Tsai"}}, "url": "https://github.com/apache/kafka/commit/52fb914eda91dfdc1f52d1b6b4eeeef0f9f65741", "committedDate": "2020-10-01T11:35:59Z", "message": "improve unit test"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "52fb914eda91dfdc1f52d1b6b4eeeef0f9f65741", "author": {"user": {"login": "chia7712", "name": "Chia-Ping Tsai"}}, "url": "https://github.com/apache/kafka/commit/52fb914eda91dfdc1f52d1b6b4eeeef0f9f65741", "committedDate": "2020-10-01T11:35:59Z", "message": "improve unit test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAyNDI1NDQx", "url": "https://github.com/apache/kafka/pull/9349#pullrequestreview-502425441", "createdAt": "2020-10-05T21:14:00Z", "commit": {"oid": "52fb914eda91dfdc1f52d1b6b4eeeef0f9f65741"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 707, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}