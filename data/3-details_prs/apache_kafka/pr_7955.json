{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYyNjAxNDY1", "number": 7955, "title": "KAFKA-9423: Refine layout of configuration options on website and make individual settings directly linkable", "bodyText": "Test strategy:\nBuilt the site and served from an Apache httpd docker container. Used w3c validator to ensure generated HTML is valid.\nCommitter Checklist (excluded from commit message)\n\n Verify design and implementation\n Verify test coverage and CI build status\n Verify documentation (including upgrade notes)", "createdAt": "2020-01-14T12:10:14Z", "url": "https://github.com/apache/kafka/pull/7955", "merged": true, "mergeCommit": {"oid": "3b1c61385be7fb31b75f1352248bc00fa52d4a44"}, "closed": true, "closedAt": "2020-02-10T18:05:18Z", "author": {"login": "soenkeliebau"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb6PymhgH2gAyMzYyNjAxNDY1OjliZmQwYzRiMWNjODU0NzE2ZjA1YjYwYTNhYmE0OTU2ZTNlZmQ3NmY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcC8V_JgFqTM1NTkwMDExOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "9bfd0c4b1cc854716f05b60a3aba4956e3efd76f", "author": {"user": {"login": "soenkeliebau", "name": "S\u00f6nke Liebau"}}, "url": "https://github.com/apache/kafka/commit/9bfd0c4b1cc854716f05b60a3aba4956e3efd76f", "committedDate": "2020-01-14T12:06:23Z", "message": "KAFKA-9423: Refine layout of configuration options on website and make individual settings directly linkable"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5761888d74e43873282c0f927259d98d2aff9aff", "author": {"user": {"login": "soenkeliebau", "name": "S\u00f6nke Liebau"}}, "url": "https://github.com/apache/kafka/commit/5761888d74e43873282c0f927259d98d2aff9aff", "committedDate": "2020-01-14T15:38:33Z", "message": "Fixed unit test that was broken by the changed output of toHtml()"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "77af2d2ca269775da3410852d41449313cfb1f31", "author": {"user": {"login": "soenkeliebau", "name": "S\u00f6nke Liebau"}}, "url": "https://github.com/apache/kafka/commit/77af2d2ca269775da3410852d41449313cfb1f31", "committedDate": "2020-01-21T15:33:02Z", "message": "Updated to reflect style discussions and cleaned up code a little."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ2MTcxMzI0", "url": "https://github.com/apache/kafka/pull/7955#pullrequestreview-346171324", "createdAt": "2020-01-21T20:31:48Z", "commit": {"oid": "77af2d2ca269775da3410852d41449313cfb1f31"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQyMDozMTo0OFrOFgH3Pg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQyMDozMzowMFrOFgH5UQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTIyNzU4Mg==", "bodyText": "We should move this CSS to the website CSS file instead of having it inline here. The CSS file is in kafka-site, see https://github.com/apache/kafka-site/blob/asf-site/css/styles.css#L266.", "url": "https://github.com/apache/kafka/pull/7955#discussion_r369227582", "createdAt": "2020-01-21T20:31:48Z", "author": {"login": "mimaison"}, "path": "clients/src/main/java/org/apache/kafka/common/config/ConfigDef.java", "diffHunk": "@@ -1453,19 +1453,20 @@ public String toHtml(Map<String, String> dynamicUpdateModes) {\n         List<ConfigKey> configs = sortedConfigs();\n         StringBuilder b = new StringBuilder();\n         b.append(\"<ul class=\\\"config-list\\\">\\n\");\n-\n         for (ConfigKey key : configs) {\n             if (key.internalConfig) {\n                 continue;\n             }\n-            b.append(\"<li>\");\n-            b.append(\"<b>\");\n-            b.append(key.name);\n-            b.append(\"</b>: \");\n-            b.append(key.documentation);\n-            b.append(\"<br/>\");\n-            // details\n-            b.append(\"<ul class=\\\"horizontal-list\\\">\");\n+            b.append(\"<li style=\\\"padding: 15 0 15 20; border-bottom: 1px solid black;\\\">\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "77af2d2ca269775da3410852d41449313cfb1f31"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTIyODExMw==", "bodyText": "Can we add line return after HTML block like tables, rows, list items so the generated HTML stays readable?", "url": "https://github.com/apache/kafka/pull/7955#discussion_r369228113", "createdAt": "2020-01-21T20:33:00Z", "author": {"login": "mimaison"}, "path": "clients/src/main/java/org/apache/kafka/common/config/ConfigDef.java", "diffHunk": "@@ -1474,17 +1475,20 @@ public String toHtml(Map<String, String> dynamicUpdateModes) {\n                 String updateMode = dynamicUpdateModes.get(key.name);\n                 if (updateMode == null)\n                     updateMode = \"read-only\";\n-                addConfigDetail(b, \"Update Mode\", updateMode);\n+                addConfigDetail(b, \"Update Mode:\", updateMode);\n             }\n-            b.append(\"</ul>\");\n-            b.append(\"</li>\\n\");\n+            b.append(\"</tbody></table>\");\n+            b.append(\"</li>\");\n         }\n         b.append(\"</ul>\\n\");\n         return b.toString();\n     }\n \n     private static void addConfigDetail(StringBuilder builder, String name, String value) {\n-        builder.append(\"<li><b>\" + name + \"</b>: \" + value + \"</li>\");\n+        builder.append(\"<tr style=\\\"background-color: transparent; padding: 0 0 0 0;\\\">\" +\n+                \"<th style=\\\"border-width: 0; background-color: transparent; text-align: right; padding: 0 0 0 0; \\\">\" + name + \":</th>\" +\n+                \"<td style=\\\"border-width: 0; background-color: transparent; text-align: left; padding: 0 0 0 10;\\\">\" + value + \"</td>\" +\n+                \"</tr>\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "77af2d2ca269775da3410852d41449313cfb1f31"}, "originalPosition": 51}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cfb27bf4f7bda333dc81759aac1506ae767215d7", "author": {"user": {"login": "soenkeliebau", "name": "S\u00f6nke Liebau"}}, "url": "https://github.com/apache/kafka/commit/cfb27bf4f7bda333dc81759aac1506ae767215d7", "committedDate": "2020-01-21T23:19:07Z", "message": "Moved style definitions to .css file in kafka-site repo."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU0MzUyMTg3", "url": "https://github.com/apache/kafka/pull/7955#pullrequestreview-354352187", "createdAt": "2020-02-06T10:41:18Z", "commit": {"oid": "cfb27bf4f7bda333dc81759aac1506ae767215d7"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNlQxMDo0MToxOFrOFmWlUQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNlQxMDo0MjowMFrOFmWmzw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTc2MDIwOQ==", "bodyText": "This makes stopbugs complain ... We should use %n in the format string instead of \\n", "url": "https://github.com/apache/kafka/pull/7955#discussion_r375760209", "createdAt": "2020-02-06T10:41:18Z", "author": {"login": "mimaison"}, "path": "clients/src/main/java/org/apache/kafka/common/config/ConfigDef.java", "diffHunk": "@@ -1453,19 +1453,20 @@ public String toHtml(Map<String, String> dynamicUpdateModes) {\n         List<ConfigKey> configs = sortedConfigs();\n         StringBuilder b = new StringBuilder();\n         b.append(\"<ul class=\\\"config-list\\\">\\n\");\n-\n         for (ConfigKey key : configs) {\n             if (key.internalConfig) {\n                 continue;\n             }\n-            b.append(\"<li>\");\n-            b.append(\"<b>\");\n-            b.append(key.name);\n-            b.append(\"</b>: \");\n-            b.append(key.documentation);\n-            b.append(\"<br/>\");\n-            // details\n-            b.append(\"<ul class=\\\"horizontal-list\\\">\");\n+            b.append(\"<li>\\n\");\n+            b.append(String.format(\"<h4>\" +\n+                    \"<a id=\\\"%1$s\\\" href=\\\"#%1$s\\\">%1$s</a>\" +\n+                    \"</h4>\\n\", key.name));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cfb27bf4f7bda333dc81759aac1506ae767215d7"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTc2MDU5MQ==", "bodyText": "No need for the extra :, addConfigDetail() already inserts it", "url": "https://github.com/apache/kafka/pull/7955#discussion_r375760591", "createdAt": "2020-02-06T10:42:00Z", "author": {"login": "mimaison"}, "path": "clients/src/main/java/org/apache/kafka/common/config/ConfigDef.java", "diffHunk": "@@ -1474,17 +1475,20 @@ public String toHtml(Map<String, String> dynamicUpdateModes) {\n                 String updateMode = dynamicUpdateModes.get(key.name);\n                 if (updateMode == null)\n                     updateMode = \"read-only\";\n-                addConfigDetail(b, \"Update Mode\", updateMode);\n+                addConfigDetail(b, \"Update Mode:\", updateMode);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cfb27bf4f7bda333dc81759aac1506ae767215d7"}, "originalPosition": 35}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1963b54cd979a8eb22556020d0242d194b50ee33", "author": {"user": {"login": "soenkeliebau", "name": "S\u00f6nke Liebau"}}, "url": "https://github.com/apache/kafka/commit/1963b54cd979a8eb22556020d0242d194b50ee33", "committedDate": "2020-02-10T08:57:14Z", "message": "Addressed comments from Michael."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU1OTAwMTE4", "url": "https://github.com/apache/kafka/pull/7955#pullrequestreview-355900118", "createdAt": "2020-02-10T12:32:15Z", "commit": {"oid": "1963b54cd979a8eb22556020d0242d194b50ee33"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1988, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}