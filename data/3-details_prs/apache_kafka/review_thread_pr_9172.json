{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY2OTYyNjI5", "number": 9172, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQyMjowNDoyMFrOEX0Lnw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQyMjowODoxMFrOEX0PgA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkzNDA3NjQ3OnYy", "diffSide": "RIGHT", "path": "connect/runtime/src/main/java/org/apache/kafka/connect/runtime/SourceConnectorConfig.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQyMjowNDoyMFrOG_0cKw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQyMjoxNjozMFrOG_0umw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTU3MjY1MQ==", "bodyText": "Super tiny nit: the wrapping even from the original was confusing, and maybe it's worth changing one more line and cleaning up the wrapping:\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        enrichedSourceConfig = new EnrichedSourceConnectorConfig(plugins,\n          \n          \n            \n                                enrich(defaultConfigDef, props,\n          \n          \n            \n                                defaultGroup), propsWithoutRegexForDefaultGroup);\n          \n          \n            \n                        enrichedSourceConfig = new EnrichedSourceConnectorConfig(plugins,\n          \n          \n            \n                                enrich(defaultConfigDef, props, defaultGroup), \n          \n          \n            \n                                propsWithoutRegexForDefaultGroup);\n          \n      \n    \n    \n  \n\nWDYT?", "url": "https://github.com/apache/kafka/pull/9172#discussion_r469572651", "createdAt": "2020-08-12T22:04:20Z", "author": {"login": "rhauch"}, "path": "connect/runtime/src/main/java/org/apache/kafka/connect/runtime/SourceConnectorConfig.java", "diffHunk": "@@ -129,7 +129,8 @@ public SourceConnectorConfig(Plugins plugins, Map<String, String> props, boolean\n             propsWithoutRegexForDefaultGroup.entrySet()\n                     .removeIf(e -> e.getKey().equals(DEFAULT_TOPIC_CREATION_PREFIX + INCLUDE_REGEX_CONFIG)\n                             || e.getKey().equals(DEFAULT_TOPIC_CREATION_PREFIX + EXCLUDE_REGEX_CONFIG));\n-            enrichedSourceConfig = new EnrichedSourceConnectorConfig(enrich(defaultConfigDef, props,\n+            enrichedSourceConfig = new EnrichedSourceConnectorConfig(plugins,\n+                    enrich(defaultConfigDef, props,\n                     defaultGroup), propsWithoutRegexForDefaultGroup);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5560bd4bb093449bb13b354fb35e192ee2d25f7e"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTU3NzM3MQ==", "bodyText": "Good catch. The break was added by accident there.", "url": "https://github.com/apache/kafka/pull/9172#discussion_r469577371", "createdAt": "2020-08-12T22:16:30Z", "author": {"login": "kkonstantine"}, "path": "connect/runtime/src/main/java/org/apache/kafka/connect/runtime/SourceConnectorConfig.java", "diffHunk": "@@ -129,7 +129,8 @@ public SourceConnectorConfig(Plugins plugins, Map<String, String> props, boolean\n             propsWithoutRegexForDefaultGroup.entrySet()\n                     .removeIf(e -> e.getKey().equals(DEFAULT_TOPIC_CREATION_PREFIX + INCLUDE_REGEX_CONFIG)\n                             || e.getKey().equals(DEFAULT_TOPIC_CREATION_PREFIX + EXCLUDE_REGEX_CONFIG));\n-            enrichedSourceConfig = new EnrichedSourceConnectorConfig(enrich(defaultConfigDef, props,\n+            enrichedSourceConfig = new EnrichedSourceConnectorConfig(plugins,\n+                    enrich(defaultConfigDef, props,\n                     defaultGroup), propsWithoutRegexForDefaultGroup);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTU3MjY1MQ=="}, "originalCommit": {"oid": "5560bd4bb093449bb13b354fb35e192ee2d25f7e"}, "originalPosition": 20}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkzNDA4NjQwOnYy", "diffSide": "RIGHT", "path": "connect/runtime/src/test/java/org/apache/kafka/connect/integration/TransformationIntegrationTest.java", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQyMjowODoxMFrOG_0h8g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xM1QxOTowNjowN1rOHAZvEg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTU3NDEzMA==", "bodyText": "Do we need another test here, or could we essentially replace the previous test with this one?\nEither way, the test that uses topic creation should probably have a comment (either in the method JavaDoc or in a line comment below) that explicitly mentions enabling topic creation. We don't want someone removing the topic creation configs at a later time.\nWDYT?", "url": "https://github.com/apache/kafka/pull/9172#discussion_r469574130", "createdAt": "2020-08-12T22:08:10Z", "author": {"login": "rhauch"}, "path": "connect/runtime/src/test/java/org/apache/kafka/connect/integration/TransformationIntegrationTest.java", "diffHunk": "@@ -318,4 +323,61 @@ public void testFilterOnHasHeaderKeyWithSourceConnector() throws Exception {\n         // delete connector\n         connect.deleteConnector(CONNECTOR_NAME);\n     }\n+\n+    /**\n+     * Test the {@link Filter} transformer with a\n+     * {@link HasHeaderKey} predicate on a source connector.\n+     */\n+    @Test\n+    public void testFilterOnHasHeaderKeyWithSourceConnectorAndTopicCreation() throws Exception {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5560bd4bb093449bb13b354fb35e192ee2d25f7e"}, "originalPosition": 50}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTU3ODE5NQ==", "bodyText": "Since we have a few other tests replacing should be fine.\nI'll add comments. But also, the test will fail if we don't create it (I removed the admin command) because we disable auto topic creation at the broker.", "url": "https://github.com/apache/kafka/pull/9172#discussion_r469578195", "createdAt": "2020-08-12T22:18:40Z", "author": {"login": "kkonstantine"}, "path": "connect/runtime/src/test/java/org/apache/kafka/connect/integration/TransformationIntegrationTest.java", "diffHunk": "@@ -318,4 +323,61 @@ public void testFilterOnHasHeaderKeyWithSourceConnector() throws Exception {\n         // delete connector\n         connect.deleteConnector(CONNECTOR_NAME);\n     }\n+\n+    /**\n+     * Test the {@link Filter} transformer with a\n+     * {@link HasHeaderKey} predicate on a source connector.\n+     */\n+    @Test\n+    public void testFilterOnHasHeaderKeyWithSourceConnectorAndTopicCreation() throws Exception {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTU3NDEzMA=="}, "originalCommit": {"oid": "5560bd4bb093449bb13b354fb35e192ee2d25f7e"}, "originalPosition": 50}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTU4Njc2NA==", "bodyText": "Sounds good. I just want to avoid someone trying to simplify the tests in the future without understanding that this test is verifying both features work together.", "url": "https://github.com/apache/kafka/pull/9172#discussion_r469586764", "createdAt": "2020-08-12T22:41:08Z", "author": {"login": "rhauch"}, "path": "connect/runtime/src/test/java/org/apache/kafka/connect/integration/TransformationIntegrationTest.java", "diffHunk": "@@ -318,4 +323,61 @@ public void testFilterOnHasHeaderKeyWithSourceConnector() throws Exception {\n         // delete connector\n         connect.deleteConnector(CONNECTOR_NAME);\n     }\n+\n+    /**\n+     * Test the {@link Filter} transformer with a\n+     * {@link HasHeaderKey} predicate on a source connector.\n+     */\n+    @Test\n+    public void testFilterOnHasHeaderKeyWithSourceConnectorAndTopicCreation() throws Exception {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTU3NDEzMA=="}, "originalCommit": {"oid": "5560bd4bb093449bb13b354fb35e192ee2d25f7e"}, "originalPosition": 50}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDE4MzY5OA==", "bodyText": "I added the logic to the previous test.\nAdded another unit test to test 2 groups with 2 transformations.", "url": "https://github.com/apache/kafka/pull/9172#discussion_r470183698", "createdAt": "2020-08-13T19:06:07Z", "author": {"login": "kkonstantine"}, "path": "connect/runtime/src/test/java/org/apache/kafka/connect/integration/TransformationIntegrationTest.java", "diffHunk": "@@ -318,4 +323,61 @@ public void testFilterOnHasHeaderKeyWithSourceConnector() throws Exception {\n         // delete connector\n         connect.deleteConnector(CONNECTOR_NAME);\n     }\n+\n+    /**\n+     * Test the {@link Filter} transformer with a\n+     * {@link HasHeaderKey} predicate on a source connector.\n+     */\n+    @Test\n+    public void testFilterOnHasHeaderKeyWithSourceConnectorAndTopicCreation() throws Exception {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTU3NDEzMA=="}, "originalCommit": {"oid": "5560bd4bb093449bb13b354fb35e192ee2d25f7e"}, "originalPosition": 50}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1910, "cost": 1, "resetAt": "2021-11-12T11:18:39Z"}}}