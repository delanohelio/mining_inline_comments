{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQxODg4MjY3", "number": 8954, "title": "MINOR; Move quota integration tests to using the new quota API.", "bodyText": "This PR refactors the various quota integration tests in the kafka.api package and migrates them to using the new quota API instead of writing the quota to ZK directly.\nCommitter Checklist (excluded from commit message)\n\n Verify design and implementation\n Verify test coverage and CI build status\n Verify documentation (including upgrade notes)", "createdAt": "2020-06-30T09:05:33Z", "url": "https://github.com/apache/kafka/pull/8954", "merged": true, "mergeCommit": {"oid": "b63fecb6930cd0546a938cebe91b9f506a5e47d5"}, "closed": true, "closedAt": "2020-07-21T14:48:38Z", "author": {"login": "dajac"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcwR2YfAH2gAyNDQxODg4MjY3OjgwZmNlNWY3NGZkMzcwZTZjMjQ2NTY0MWY5YjM2MzZlNmFmYTBlNzY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc2yDSNAH2gAyNDQxODg4MjY3Ojg0NDg2NDVkMjMzNDQ1ZjIzN2FjMzFjNTJiYjE5ODg3YzEyOTUxYTY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "80fce5f74fd370e6c2465641f9b3636e6afa0e76", "author": {"user": {"login": "dajac", "name": "David Jacot"}}, "url": "https://github.com/apache/kafka/commit/80fce5f74fd370e6c2465641f9b3636e6afa0e76", "committedDate": "2020-06-30T09:02:14Z", "message": "MINOR; Move quota integration tests to using the new quota API."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxNDk0NDc0", "url": "https://github.com/apache/kafka/pull/8954#pullrequestreview-451494474", "createdAt": "2020-07-20T10:43:59Z", "commit": {"oid": "80fce5f74fd370e6c2465641f9b3636e6afa0e76"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQxMDo0NDowMFrOG0FkEA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQxMDo0NDowMFrOG0FkEA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzI3MDI4OA==", "bodyText": "Maybe add a constant for the default entity and use Some(DefaultEntity) which would avoid the need for the comment that sounds like we are doing something we shouldn't be.", "url": "https://github.com/apache/kafka/pull/8954#discussion_r457270288", "createdAt": "2020-07-20T10:44:00Z", "author": {"login": "rajinisivaram"}, "path": "core/src/test/scala/integration/kafka/api/BaseQuotaTest.scala", "diffHunk": "@@ -335,12 +339,31 @@ abstract class QuotaTestClients(topic: String,\n       assertEquals(\"Should not have been throttled\", 0.0, metricValue(maxMetric), 0.0)\n   }\n \n-  def quotaProperties(producerQuota: Long, consumerQuota: Long, requestQuota: Double): Properties = {\n-    val props = new Properties()\n-    props.put(DynamicConfig.Client.ProducerByteRateOverrideProp, producerQuota.toString)\n-    props.put(DynamicConfig.Client.ConsumerByteRateOverrideProp, consumerQuota.toString)\n-    props.put(DynamicConfig.Client.RequestPercentageOverrideProp, requestQuota.toString)\n-    props\n+  // Default is set by using Some(null) for either or both user and clientId", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "80fce5f74fd370e6c2465641f9b3636e6afa0e76"}, "originalPosition": 45}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8448645d233445f237ac31c52bb19887c12951a6", "author": {"user": {"login": "dajac", "name": "David Jacot"}}, "url": "https://github.com/apache/kafka/commit/8448645d233445f237ac31c52bb19887c12951a6", "committedDate": "2020-07-20T13:56:50Z", "message": "address comments"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1410, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}