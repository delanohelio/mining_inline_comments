{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE1NzkzNzY5", "number": 8644, "title": "KAFKA-9313: Set `use_all_dns_ips` as the new default for `client.dns.lookup` (KIP-602)", "bodyText": "This applies to the producer, consumer, admin client, connect worker\nand inter broker communication.\nClientDnsLookup.DEFAULT has been deprecated and a warning\nwill be logged if it's explicitly set in a client config.\nCommitter Checklist (excluded from commit message)\n\n Verify design and implementation\n Verify test coverage and CI build status\n Verify documentation (including upgrade notes)", "createdAt": "2020-05-10T22:50:51Z", "url": "https://github.com/apache/kafka/pull/8644", "merged": true, "mergeCommit": {"oid": "50c30128909a6714c64518d84642e8c45478668a"}, "closed": true, "closedAt": "2020-06-04T13:21:53Z", "author": {"login": "badaiaqrandista"}, "timelineItems": {"totalCount": 30, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcgC1TAgH2gAyNDE1NzkzNzY5OjY2YTU1OTIyYjRlZWU0NTVkZjUwMzVmYjdkZDE4ZmZkOGYyMjU3ODI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcn8Z6QAFqTQyNDM1MDU4MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "66a55922b4eee455df5035fb7dd18ffd8f225782", "author": {"user": {"login": "badaiaqrandista", "name": "Badai Aqrandista"}}, "url": "https://github.com/apache/kafka/commit/66a55922b4eee455df5035fb7dd18ffd8f225782", "committedDate": "2020-05-10T22:29:41Z", "message": "Make use.all.dns.ips as the default behaviour fir client.dns.lookup configuration"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2c205b970f6deb5cb4f0edeb4a8b86fc5af01c07", "author": {"user": {"login": "badaiaqrandista", "name": "Badai Aqrandista"}}, "url": "https://github.com/apache/kafka/commit/2c205b970f6deb5cb4f0edeb4a8b86fc5af01c07", "committedDate": "2020-05-10T22:46:46Z", "message": "Added use_first_dns_ips option for client.dns.lookup configuration"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4Njk3MTQ3", "url": "https://github.com/apache/kafka/pull/8644#pullrequestreview-418697147", "createdAt": "2020-05-26T21:36:52Z", "commit": {"oid": "2c205b970f6deb5cb4f0edeb4a8b86fc5af01c07"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQyMTozNjo1MlrOGaxLUw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQyMTozNjo1MlrOGaxLUw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDcyMTg3NQ==", "bodyText": "In the KIP this field is called use_first_dns_ip, I think it was agreed in the discussion to remove the s", "url": "https://github.com/apache/kafka/pull/8644#discussion_r430721875", "createdAt": "2020-05-26T21:36:52Z", "author": {"login": "mimaison"}, "path": "clients/src/main/java/org/apache/kafka/clients/ClientDnsLookup.java", "diffHunk": "@@ -22,7 +22,8 @@\n \n     DEFAULT(\"default\"),\n     USE_ALL_DNS_IPS(\"use_all_dns_ips\"),\n-    RESOLVE_CANONICAL_BOOTSTRAP_SERVERS_ONLY(\"resolve_canonical_bootstrap_servers_only\");\n+    RESOLVE_CANONICAL_BOOTSTRAP_SERVERS_ONLY(\"resolve_canonical_bootstrap_servers_only\"),\n+    USE_FIRST_DNS_IPS(\"use_first_dns_ips\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2c205b970f6deb5cb4f0edeb4a8b86fc5af01c07"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1ef422b904f276d883ffc5dd331988e712391748", "author": {"user": {"login": "ijuma", "name": "Ismael Juma"}}, "url": "https://github.com/apache/kafka/commit/1ef422b904f276d883ffc5dd331988e712391748", "committedDate": "2020-05-28T04:13:18Z", "message": "use_first_dns_ips -> use_first_dns_ip"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "af17aa6c4c510bf6792b98e461ea493448639f50", "author": {"user": {"login": "ijuma", "name": "Ismael Juma"}}, "url": "https://github.com/apache/kafka/commit/af17aa6c4c510bf6792b98e461ea493448639f50", "committedDate": "2020-05-28T04:14:16Z", "message": "use_first_dns_ips -> use_first_dns_ip"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5NzY4NTE4", "url": "https://github.com/apache/kafka/pull/8644#pullrequestreview-419768518", "createdAt": "2020-05-28T04:27:20Z", "commit": {"oid": "af17aa6c4c510bf6792b98e461ea493448639f50"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQwNDoyNzoyMFrOGblNtw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQwNDoyNzoyMFrOGblNtw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTU3NDQ1NQ==", "bodyText": "@badaiaqrandista We should replace this if/else with a switch statement so that we are forced to handle every case. That makes it easier to avoid issues if we add new elements to the enum. Also, can we please add tests?", "url": "https://github.com/apache/kafka/pull/8644#discussion_r431574455", "createdAt": "2020-05-28T04:27:20Z", "author": {"login": "ijuma"}, "path": "clients/src/main/java/org/apache/kafka/clients/ClientUtils.java", "diffHunk": "@@ -108,10 +108,11 @@ public static ChannelBuilder createChannelBuilder(AbstractConfig config, Time ti\n \n     static List<InetAddress> resolve(String host, ClientDnsLookup clientDnsLookup) throws UnknownHostException {\n         InetAddress[] addresses = InetAddress.getAllByName(host);\n-        if (ClientDnsLookup.USE_ALL_DNS_IPS == clientDnsLookup) {\n-            return filterPreferredAddresses(addresses);\n-        } else {\n+        if (ClientDnsLookup.USE_FIRST_DNS_IP == clientDnsLookup) {\n             return Collections.singletonList(addresses[0]);\n+        } else {\n+            // ClientDnsLookup.USE_ALL_DNS_IPS == clientDnsLookup || ClientDnsLookup.DEFAULT == clientDnsLookup\n+            return filterPreferredAddresses(addresses);\n         }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "af17aa6c4c510bf6792b98e461ea493448639f50"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5NzcwNjAy", "url": "https://github.com/apache/kafka/pull/8644#pullrequestreview-419770602", "createdAt": "2020-05-28T04:35:02Z", "commit": {"oid": "af17aa6c4c510bf6792b98e461ea493448639f50"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQwNDozNTowMlrOGblUZA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQwNDozNTowMlrOGblUZA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTU3NjE2NA==", "bodyText": "We said this would be deprecated for removal in 3.0. Let's mention that in the documentation and add a warning if this is selected.", "url": "https://github.com/apache/kafka/pull/8644#discussion_r431576164", "createdAt": "2020-05-28T04:35:02Z", "author": {"login": "ijuma"}, "path": "clients/src/main/java/org/apache/kafka/clients/ClientDnsLookup.java", "diffHunk": "@@ -22,7 +22,8 @@\n \n     DEFAULT(\"default\"),\n     USE_ALL_DNS_IPS(\"use_all_dns_ips\"),\n-    RESOLVE_CANONICAL_BOOTSTRAP_SERVERS_ONLY(\"resolve_canonical_bootstrap_servers_only\");\n+    RESOLVE_CANONICAL_BOOTSTRAP_SERVERS_ONLY(\"resolve_canonical_bootstrap_servers_only\"),\n+    USE_FIRST_DNS_IP(\"use_first_dns_ip\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "af17aa6c4c510bf6792b98e461ea493448639f50"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bba054f9f07e9f7663695cfba356ab27d71655f0", "author": {"user": {"login": "badaiaqrandista", "name": "Badai Aqrandista"}}, "url": "https://github.com/apache/kafka/commit/bba054f9f07e9f7663695cfba356ab27d71655f0", "committedDate": "2020-05-28T16:32:53Z", "message": "Added test, modified configuration doc, apply suggestions in PR"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "723aea0f7f5181cc46e75d36a398308f6c54adde", "author": {"user": {"login": "badaiaqrandista", "name": "Badai Aqrandista"}}, "url": "https://github.com/apache/kafka/commit/723aea0f7f5181cc46e75d36a398308f6c54adde", "committedDate": "2020-05-28T16:34:46Z", "message": "Fixed conflict"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "482c578728ca62e335c3b5213aa8ae0f367e36b9", "author": {"user": {"login": "badaiaqrandista", "name": "Badai Aqrandista"}}, "url": "https://github.com/apache/kafka/commit/482c578728ca62e335c3b5213aa8ae0f367e36b9", "committedDate": "2020-05-29T02:17:56Z", "message": "Modified to remove 'use_first_dns_ip' and deprecate 'default' value"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e862f7a4c8e8d09abb7c55b30696296d7d5ad899", "author": {"user": {"login": "badaiaqrandista", "name": "Badai Aqrandista"}}, "url": "https://github.com/apache/kafka/commit/e862f7a4c8e8d09abb7c55b30696296d7d5ad899", "committedDate": "2020-05-29T02:18:32Z", "message": "Modified all references to ClientDnsLookup.DEFAULT to ClientDnsLookup.USE_ALL_DNS_IPS"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "620a61d2ce0a75aabbb5eb024dc21f15ecfcf3dc", "author": {"user": {"login": "badaiaqrandista", "name": "Badai Aqrandista"}}, "url": "https://github.com/apache/kafka/commit/620a61d2ce0a75aabbb5eb024dc21f15ecfcf3dc", "committedDate": "2020-05-29T03:53:18Z", "message": "Modified all references of ClientDnsLookup.DEFAULT to ClientDnsLookup.USE_ALL_DNS_IPS in all clients tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6c3163493c135f57ff1795881a0546e511d57971", "author": {"user": {"login": "badaiaqrandista", "name": "Badai Aqrandista"}}, "url": "https://github.com/apache/kafka/commit/6c3163493c135f57ff1795881a0546e511d57971", "committedDate": "2020-05-29T05:23:33Z", "message": "Fixed missing semicolon"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9f07b9d65c0c2267265b808aa1856fd2a986f6fd", "author": {"user": {"login": "badaiaqrandista", "name": "Badai Aqrandista"}}, "url": "https://github.com/apache/kafka/commit/9f07b9d65c0c2267265b808aa1856fd2a986f6fd", "committedDate": "2020-05-29T22:21:02Z", "message": "Modified all references of ClientDnsLookup.DEFAULT to ClientDnsLookup.USE_ALL_DNS_IPS in all clients tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2b39bd3855b68f039e3771dc0bc7eef6df19c44a", "author": {"user": {"login": "badaiaqrandista", "name": "Badai Aqrandista"}}, "url": "https://github.com/apache/kafka/commit/2b39bd3855b68f039e3771dc0bc7eef6df19c44a", "committedDate": "2020-05-29T22:21:02Z", "message": "Fixed missing semicolon"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fc2d33b4f48fe106608f311c3858068c434587a2", "author": {"user": {"login": "badaiaqrandista", "name": "Badai Aqrandista"}}, "url": "https://github.com/apache/kafka/commit/fc2d33b4f48fe106608f311c3858068c434587a2", "committedDate": "2020-05-29T22:23:03Z", "message": "Revert \"Modified all references of ClientDnsLookup.DEFAULT to ClientDnsLookup.USE_ALL_DNS_IPS in all clients tests\"\n\nThis reverts commit 9f07b9d65c0c2267265b808aa1856fd2a986f6fd."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6bc9c06393a0807d709bad81cfd137815fe16f19", "author": {"user": {"login": "badaiaqrandista", "name": "Badai Aqrandista"}}, "url": "https://github.com/apache/kafka/commit/6bc9c06393a0807d709bad81cfd137815fe16f19", "committedDate": "2020-05-29T22:23:26Z", "message": "Merge branch 'KIP-602_make-use_all_dns_ips-as-default' of https://github.com/badaiaqrandista/kafka into KIP-602_make-use_all_dns_ips-as-default"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d2a882d11496a414fbb2913ffb8876d5ec0be12e", "author": {"user": {"login": "badaiaqrandista", "name": "Badai Aqrandista"}}, "url": "https://github.com/apache/kafka/commit/d2a882d11496a414fbb2913ffb8876d5ec0be12e", "committedDate": "2020-05-29T22:28:01Z", "message": "Revert \"Modified all references of ClientDnsLookup.DEFAULT to ClientDnsLookup.USE_ALL_DNS_IPS in all clients tests\"\n\nThis reverts commit 9f07b9d65c0c2267265b808aa1856fd2a986f6fd."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxNDIzMjEw", "url": "https://github.com/apache/kafka/pull/8644#pullrequestreview-421423210", "createdAt": "2020-05-30T15:44:03Z", "commit": {"oid": "d2a882d11496a414fbb2913ffb8876d5ec0be12e"}, "state": "COMMENTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0zMFQxNTo0NDowM1rOGcz-sQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0zMFQxNTo1MDoyNlrOGc0AZQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjg2NDk0NQ==", "bodyText": "This will warn on every resolve. We should probably add the warning when we get the config value from ConsumerConfig, ProducerConfig and AdminClientConfig.", "url": "https://github.com/apache/kafka/pull/8644#discussion_r432864945", "createdAt": "2020-05-30T15:44:03Z", "author": {"login": "ijuma"}, "path": "clients/src/main/java/org/apache/kafka/clients/ClientUtils.java", "diffHunk": "@@ -108,10 +108,15 @@ public static ChannelBuilder createChannelBuilder(AbstractConfig config, Time ti\n \n     static List<InetAddress> resolve(String host, ClientDnsLookup clientDnsLookup) throws UnknownHostException {\n         InetAddress[] addresses = InetAddress.getAllByName(host);\n-        if (ClientDnsLookup.USE_ALL_DNS_IPS == clientDnsLookup) {\n-            return filterPreferredAddresses(addresses);\n-        } else {\n-            return Collections.singletonList(addresses[0]);\n+        switch (clientDnsLookup) {\n+            case DEFAULT:\n+                log.warn(\"Configuration 'client.dns.lookup' value 'default' is deprecated and will be removed in the future version.\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d2a882d11496a414fbb2913ffb8876d5ec0be12e"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjg2NDk4OQ==", "bodyText": "Can we remove the default since we handled all the cases?", "url": "https://github.com/apache/kafka/pull/8644#discussion_r432864989", "createdAt": "2020-05-30T15:44:55Z", "author": {"login": "ijuma"}, "path": "clients/src/main/java/org/apache/kafka/clients/ClientUtils.java", "diffHunk": "@@ -108,10 +108,11 @@ public static ChannelBuilder createChannelBuilder(AbstractConfig config, Time ti\n \n     static List<InetAddress> resolve(String host, ClientDnsLookup clientDnsLookup) throws UnknownHostException {\n         InetAddress[] addresses = InetAddress.getAllByName(host);\n-        if (ClientDnsLookup.USE_ALL_DNS_IPS == clientDnsLookup) {\n-            return filterPreferredAddresses(addresses);\n-        } else {\n+        if (ClientDnsLookup.USE_FIRST_DNS_IP == clientDnsLookup) {\n             return Collections.singletonList(addresses[0]);\n+        } else {\n+            // ClientDnsLookup.USE_ALL_DNS_IPS == clientDnsLookup || ClientDnsLookup.DEFAULT == clientDnsLookup\n+            return filterPreferredAddresses(addresses);\n         }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTU3NDQ1NQ=="}, "originalCommit": {"oid": "af17aa6c4c510bf6792b98e461ea493448639f50"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjg2NTIyOA==", "bodyText": "Can we clarify that resolve_canonical_bootstrap_servers_only applies to the boostrap urls only. For advertised servers, both use_all_dns_ips and resolve_canonical_bootstrap_servers behave the same.", "url": "https://github.com/apache/kafka/pull/8644#discussion_r432865228", "createdAt": "2020-05-30T15:48:06Z", "author": {"login": "ijuma"}, "path": "clients/src/main/java/org/apache/kafka/clients/CommonClientConfigs.java", "diffHunk": "@@ -42,9 +42,11 @@\n                                                        + \"servers (you may want more than one, though, in case a server is down).\";\n \n     public static final String CLIENT_DNS_LOOKUP_CONFIG = \"client.dns.lookup\";\n-    public static final String CLIENT_DNS_LOOKUP_DOC = \"Controls how the client uses DNS lookups. If set to <code>use_all_dns_ips</code> then, when the lookup returns multiple IP addresses for a hostname,\"\n-                                                       + \" they will all be attempted to connect to before failing the connection. Applies to both bootstrap and advertised servers.\"\n-                                                       + \" If the value is <code>resolve_canonical_bootstrap_servers_only</code> each entry will be resolved and expanded into a list of canonical names.\";\n+    public static final String CLIENT_DNS_LOOKUP_DOC = \"Controls how the client uses DNS lookups.\"\n+                                                       + \" If set to <code>use_all_dns_ips</code>, attempt to connect to all IP addresses returned by the lookup and use the first one that connects successfully.\"\n+                                                       + \" If set to <code>default</code>, connect to the first IP address returned by the lookup, even if the lookup returns multiple IP addresses.\"\n+                                                       + \" If set to <code>resolve_canonical_bootstrap_servers_only</code>, each entry will be resolved and expanded into a list of canonical names.\"\n+                                                       + \" Note that <code>default</code> is deprecated and will be removed in future release.\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d2a882d11496a414fbb2913ffb8876d5ec0be12e"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjg2NTI1Mg==", "bodyText": "Why do we need this change?", "url": "https://github.com/apache/kafka/pull/8644#discussion_r432865252", "createdAt": "2020-05-30T15:48:36Z", "author": {"login": "ijuma"}, "path": "clients/src/test/java/org/apache/kafka/clients/ClientUtilsTest.java", "diffHunk": "@@ -102,7 +102,7 @@ public void testResolveUnknownHostException() throws UnknownHostException {\n \n     @Test\n     public void testResolveDnsLookup() throws UnknownHostException {\n-        assertEquals(1, ClientUtils.resolve(\"localhost\", ClientDnsLookup.DEFAULT).size());\n+        assertEquals(1, ClientUtils.resolve(\"kafka.apache.org\", ClientDnsLookup.DEFAULT).size());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d2a882d11496a414fbb2913ffb8876d5ec0be12e"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjg2NTM4MQ==", "bodyText": "Can we add a test that passes RESOLVE_CANONICAL_BOOTSTRAP_SERVERS_ONLY showing that we now get multiple addresses instead of only the first one. That's one of the changes in this PR.", "url": "https://github.com/apache/kafka/pull/8644#discussion_r432865381", "createdAt": "2020-05-30T15:50:26Z", "author": {"login": "ijuma"}, "path": "clients/src/main/java/org/apache/kafka/clients/ClientUtils.java", "diffHunk": "@@ -108,10 +108,15 @@ public static ChannelBuilder createChannelBuilder(AbstractConfig config, Time ti\n \n     static List<InetAddress> resolve(String host, ClientDnsLookup clientDnsLookup) throws UnknownHostException {\n         InetAddress[] addresses = InetAddress.getAllByName(host);\n-        if (ClientDnsLookup.USE_ALL_DNS_IPS == clientDnsLookup) {\n-            return filterPreferredAddresses(addresses);\n-        } else {\n-            return Collections.singletonList(addresses[0]);\n+        switch (clientDnsLookup) {\n+            case DEFAULT:\n+                log.warn(\"Configuration 'client.dns.lookup' value 'default' is deprecated and will be removed in the future version.\");\n+                return Collections.singletonList(addresses[0]);\n+            case USE_ALL_DNS_IPS:\n+            case RESOLVE_CANONICAL_BOOTSTRAP_SERVERS_ONLY:\n+                return filterPreferredAddresses(addresses);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d2a882d11496a414fbb2913ffb8876d5ec0be12e"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "49972961968a6c55cc4c238e9d7aba758c9bfff4", "author": {"user": {"login": "badaiaqrandista", "name": "Badai Aqrandista"}}, "url": "https://github.com/apache/kafka/commit/49972961968a6c55cc4c238e9d7aba758c9bfff4", "committedDate": "2020-06-02T22:11:17Z", "message": "Moved deprecation warning to Config classes. Added test as per PR comment."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "44552780b0951d8403d6c39847da35b2606803d0", "author": {"user": {"login": "badaiaqrandista", "name": "Badai Aqrandista"}}, "url": "https://github.com/apache/kafka/commit/44552780b0951d8403d6c39847da35b2606803d0", "committedDate": "2020-06-02T22:26:03Z", "message": "Remove default case in ClientUtils#resolve and updated client.dns.lookup documentation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d6847af9a77f487c45f031c979191849592f758a", "author": {"user": {"login": "badaiaqrandista", "name": "Badai Aqrandista"}}, "url": "https://github.com/apache/kafka/commit/d6847af9a77f487c45f031c979191849592f758a", "committedDate": "2020-06-02T23:50:20Z", "message": "Fixed conflict in ConsumerConfig class after merging with trunk"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1deb3223daa3f8b79b166828a72b3ee8b552dea0", "author": {"user": {"login": "badaiaqrandista", "name": "Badai Aqrandista"}}, "url": "https://github.com/apache/kafka/commit/1deb3223daa3f8b79b166828a72b3ee8b552dea0", "committedDate": "2020-06-03T00:08:03Z", "message": "Modified upgrade.html about new behaviour of client.dns.lookup configuration"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "11277b29e23a3a128d04ae009b658963e00cc6e3", "author": {"user": {"login": "ijuma", "name": "Ismael Juma"}}, "url": "https://github.com/apache/kafka/commit/11277b29e23a3a128d04ae009b658963e00cc6e3", "committedDate": "2020-06-04T02:01:41Z", "message": "Merge remote-tracking branch 'apache-github/trunk' into KIP-602_make-use_all_dns_ips-as-default\n\n* apache-github/trunk:\n  KAFKA-9788; Use distinct names for transaction and group load time sensors (#8784)\n  KAFKA-9514; The protocol generator generated useless condition when a field is made nullable and flexible version is used (#8793)\n  MINOR: Update to Gradle 6.5 and tweak build jvm config (#8751)\n  MINOR: Upgrade spotbugs and spotbugsPlugin (#8790)\n  KAFKA-10089 The stale ssl engine factory is not closed after reconfigure (#8792)\n  KAFKA-10080; Fix race condition on txn completion which can cause duplicate appends (#8782)\n  KAFKA-10084: Fix EosTestDriver end offset (#8785)\n  KAFKA-10083: fix failed testReassignmentWithRandomSubscriptionsAndChanges tests (#8786)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "12fba36967687077979e23c3918b15cb1647f0fc", "author": {"user": {"login": "ijuma", "name": "Ismael Juma"}}, "url": "https://github.com/apache/kafka/commit/12fba36967687077979e23c3918b15cb1647f0fc", "committedDate": "2020-06-04T03:35:35Z", "message": "Various improvements"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI0MDgwNDQw", "url": "https://github.com/apache/kafka/pull/8644#pullrequestreview-424080440", "createdAt": "2020-06-04T03:40:44Z", "commit": {"oid": "12fba36967687077979e23c3918b15cb1647f0fc"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI0MTI2MTM0", "url": "https://github.com/apache/kafka/pull/8644#pullrequestreview-424126134", "createdAt": "2020-06-04T06:06:45Z", "commit": {"oid": "12fba36967687077979e23c3918b15cb1647f0fc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI0Mjc4Mzc4", "url": "https://github.com/apache/kafka/pull/8644#pullrequestreview-424278378", "createdAt": "2020-06-04T09:46:28Z", "commit": {"oid": "12fba36967687077979e23c3918b15cb1647f0fc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQwOTo0NjoyOFrOGe-IxQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQwOTo0NjoyOFrOGe-IxQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTEyODUxNw==", "bodyText": "We don't need to call toString()", "url": "https://github.com/apache/kafka/pull/8644#discussion_r435128517", "createdAt": "2020-06-04T09:46:28Z", "author": {"login": "mimaison"}, "path": "clients/src/main/java/org/apache/kafka/clients/CommonClientConfigs.java", "diffHunk": "@@ -167,4 +176,13 @@\n         }\n         return rval;\n     }\n+\n+    public static void warnIfDeprecatedDnsLookupValue(AbstractConfig config) {\n+        String clientDnsLookupValue = config.getString(CLIENT_DNS_LOOKUP_CONFIG);\n+        if (clientDnsLookupValue.equals(ClientDnsLookup.DEFAULT.toString()))\n+            log.warn(\"Configuration '{}' with value '{}' is deprecated and will be removed in \" +\n+                \"future version. Please use '{}' or another non-deprecated value.\",\n+                CLIENT_DNS_LOOKUP_CONFIG, ClientDnsLookup.DEFAULT.toString(),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "12fba36967687077979e23c3918b15cb1647f0fc"}, "originalPosition": 32}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "df0302628a9211c8e628e70e57a2788e4a92fa45", "author": {"user": {"login": "badaiaqrandista", "name": "Badai Aqrandista"}}, "url": "https://github.com/apache/kafka/commit/df0302628a9211c8e628e70e57a2788e4a92fa45", "committedDate": "2020-06-04T11:20:02Z", "message": "Remove toString()"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI0MzUwNTgw", "url": "https://github.com/apache/kafka/pull/8644#pullrequestreview-424350580", "createdAt": "2020-06-04T11:31:44Z", "commit": {"oid": "df0302628a9211c8e628e70e57a2788e4a92fa45"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 936, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}