{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg4MzIwNjcx", "number": 9295, "title": "MINOR: standardize rebalance related logging for easy discovery & debugging", "bodyText": "Some minor logging adjustments to standardize the grammar of rebalance related messages and make it easy to query the logs for quick debugging results", "createdAt": "2020-09-16T23:57:59Z", "url": "https://github.com/apache/kafka/pull/9295", "merged": true, "mergeCommit": {"oid": "bd462df20321ff5b75a7e3eae70634268582d90b"}, "closed": true, "closedAt": "2020-09-26T03:29:18Z", "author": {"login": "ableegoldman"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdKNUXGgH2gAyNDg4MzIwNjcxOmI5MTNjOTcyM2MyYjFkMGQ0NTQ3OTQ5MWYyYmMzNjg1N2ZkZTM0ZWM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdMd2NVgH2gAyNDg4MzIwNjcxOmNjZmMxOTUwYzIwM2VkMzFiMmRiYWUxZTBjOWYyZGE0NDhlZmVmYTk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b913c9723c2b1d0d45479491f2bc36857fde34ec", "author": {"user": {"login": "ableegoldman", "name": "A. Sophie Blee-Goldman"}}, "url": "https://github.com/apache/kafka/commit/b913c9723c2b1d0d45479491f2bc36857fde34ec", "committedDate": "2020-09-18T22:27:29Z", "message": "logging improvements/coordination"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d827a95392a8c408753e1e64607953558ce1293f", "author": {"user": {"login": "ableegoldman", "name": "A. Sophie Blee-Goldman"}}, "url": "https://github.com/apache/kafka/commit/d827a95392a8c408753e1e64607953558ce1293f", "committedDate": "2020-09-18T22:27:29Z", "message": "minor followup rebalance log rearrangement"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "d827a95392a8c408753e1e64607953558ce1293f", "author": {"user": {"login": "ableegoldman", "name": "A. Sophie Blee-Goldman"}}, "url": "https://github.com/apache/kafka/commit/d827a95392a8c408753e1e64607953558ce1293f", "committedDate": "2020-09-18T22:27:29Z", "message": "minor followup rebalance log rearrangement"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkyMTI4OTY4", "url": "https://github.com/apache/kafka/pull/9295#pullrequestreview-492128968", "createdAt": "2020-09-19T19:17:19Z", "commit": {"oid": "d827a95392a8c408753e1e64607953558ce1293f"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xOVQxOToxNzoxOVrOHUt2MQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xOVQxOToyMzoxOFrOHUt39g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTQ4NDcyMQ==", "bodyText": "Why promote it from debug to info while leaving others debug?", "url": "https://github.com/apache/kafka/pull/9295#discussion_r491484721", "createdAt": "2020-09-19T19:17:19Z", "author": {"login": "guozhangwang"}, "path": "clients/src/main/java/org/apache/kafka/clients/consumer/internals/AbstractCoordinator.java", "diffHunk": "@@ -598,11 +598,12 @@ public void handle(JoinGroupResponse joinResponse, RequestFuture<ByteBuffer> fut\n                     }\n                 }\n             } else if (error == Errors.COORDINATOR_LOAD_IN_PROGRESS) {\n-                log.debug(\"Attempt to join group rejected since coordinator {} is loading the group.\", coordinator());\n+                log.debug(\"JoinGroup failed: Coordinator {} is loading the group.\", coordinator());\n                 // backoff and retry\n                 future.raise(error);\n             } else if (error == Errors.UNKNOWN_MEMBER_ID) {\n-                log.debug(\"Attempt to join group failed due to unknown member id with {}.\", sentGeneration);\n+                log.info(\"JoinGroup failed: {} Need to re-join the group. Sent generation was {}\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d827a95392a8c408753e1e64607953558ce1293f"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTQ4NTE3NA==", "bodyText": "Ditto here, if we think we should pay attention to any errors excluding things like coordinator loading in progress let's just make them all info.", "url": "https://github.com/apache/kafka/pull/9295#discussion_r491485174", "createdAt": "2020-09-19T19:23:18Z", "author": {"login": "guozhangwang"}, "path": "clients/src/main/java/org/apache/kafka/clients/consumer/internals/AbstractCoordinator.java", "diffHunk": "@@ -769,24 +771,27 @@ public void handle(SyncGroupResponse syncResponse,\n                 if (error == Errors.GROUP_AUTHORIZATION_FAILED) {\n                     future.raise(GroupAuthorizationException.forGroupId(rebalanceConfig.groupId));\n                 } else if (error == Errors.REBALANCE_IN_PROGRESS) {\n-                    log.debug(\"SyncGroup failed because the group began another rebalance\");\n+                    log.info(\"SyncGroup failed: The group began another rebalance. Need to re-join the group. \" +\n+                                 \"Sent generation was {}\", sentGeneration);\n                     future.raise(error);\n                 } else if (error == Errors.FENCED_INSTANCE_ID) {\n                     // for sync-group request, even if the generation has changed we would not expect the instance id\n                     // gets fenced, and hence we always treat this as a fatal error\n-                    log.error(\"SyncGroup with {} failed because the group instance id {} has been fenced by another instance\",\n-                        sentGeneration, rebalanceConfig.groupInstanceId);\n+                    log.error(\"SyncGroup failed: The group instance id {} has been fenced by another instance. \" +\n+                        \"Sent generation was {}\", rebalanceConfig.groupInstanceId, sentGeneration);\n                     future.raise(error);\n                 } else if (error == Errors.UNKNOWN_MEMBER_ID\n                         || error == Errors.ILLEGAL_GENERATION) {\n-                    log.info(\"SyncGroup with {} failed: {}, would request re-join\", sentGeneration, error.message());\n+                    log.info(\"SyncGroup failed: {} Need to re-join the group. Sent generation was {}\",\n+                            error.message(), sentGeneration);\n                     if (generationUnchanged())\n                         resetGenerationOnResponseError(ApiKeys.SYNC_GROUP, error);\n \n                     future.raise(error);\n                 } else if (error == Errors.COORDINATOR_NOT_AVAILABLE\n                         || error == Errors.NOT_COORDINATOR) {\n-                    log.debug(\"SyncGroup failed: {}, marking coordinator unknown\", error.message());\n+                    log.debug(\"SyncGroup failed: {} Marking coordinator unknown. Sent generation was {}\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d827a95392a8c408753e1e64607953558ce1293f"}, "originalPosition": 99}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ccfc1950c203ed31b2dbae1e0c9f2da448efefa9", "author": {"user": {"login": "ableegoldman", "name": "A. Sophie Blee-Goldman"}}, "url": "https://github.com/apache/kafka/commit/ccfc1950c203ed31b2dbae1e0c9f2da448efefa9", "committedDate": "2020-09-25T22:50:47Z", "message": "bump all to info, standardize"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 631, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}