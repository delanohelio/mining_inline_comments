{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk2OTI1MDE0", "number": 8403, "title": "KAFKA-9797; Fix TestSecurityRollingUpgrade.test_enable_separate_interbroker_listener", "bodyText": "In order to perform non-disruptive update of inter-broker listener to a different security protocol, we need to first ensure that the listener is enabled on all brokers. Once the listener is available on all brokers, inter-broker listener can be updated using rolling update.\nCommitter Checklist (excluded from commit message)\n\n Verify design and implementation\n Verify test coverage and CI build status\n Verify documentation (including upgrade notes)", "createdAt": "2020-04-01T11:08:24Z", "url": "https://github.com/apache/kafka/pull/8403", "merged": true, "mergeCommit": {"oid": "8820055744b9de09de68b65216a46be4cf658712"}, "closed": true, "closedAt": "2020-04-15T12:04:12Z", "author": {"login": "rajinisivaram"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcTVjclAH2gAyMzk2OTI1MDE0OjRmMjIzZDc4NzU0M2NlYWFiM2Y4OGViZjNiNTRmZjJmOWM4NmM2ZWY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcX0SiTgFqTM5MzU4NjUwMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "4f223d787543ceaab3f88ebf3b54ff2f9c86c6ef", "author": {"user": {"login": "rajinisivaram", "name": "Rajini Sivaram"}}, "url": "https://github.com/apache/kafka/commit/4f223d787543ceaab3f88ebf3b54ff2f9c86c6ef", "committedDate": "2020-04-01T10:57:22Z", "message": "KAFKA-9797; Fix TestSecurityRollingUpgrade.test_enable_separate_interbroker_listener"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg1NTgxMTk4", "url": "https://github.com/apache/kafka/pull/8403#pullrequestreview-385581198", "createdAt": "2020-04-01T13:25:06Z", "commit": {"oid": "4f223d787543ceaab3f88ebf3b54ff2f9c86c6ef"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQxMzoyNTowNlrOF_Adig==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQxMzoyNTowNlrOF_Adig==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTYxMjE3MA==", "bodyText": "Can you elaborate why we added the two lines above?", "url": "https://github.com/apache/kafka/pull/8403#discussion_r401612170", "createdAt": "2020-04-01T13:25:06Z", "author": {"login": "ijuma"}, "path": "tests/kafkatest/tests/core/security_rolling_upgrade_test.py", "diffHunk": "@@ -96,10 +96,15 @@ def roll_in_sasl_mechanism(self, security_protocol, new_sasl_mechanism):\n         self.set_authorizer_and_bounce(security_protocol, security_protocol, KafkaService.SIMPLE_AUTHORIZER)\n \n     def add_separate_broker_listener(self, broker_security_protocol, broker_sasl_mechanism):\n+        # Enable the new internal listener on all brokers first\n+        self.kafka.open_port(self.kafka.INTERBROKER_LISTENER_NAME)\n+        self.kafka.port_mappings[self.kafka.INTERBROKER_LISTENER_NAME].security_protocol = broker_security_protocol\n+        self.kafka.client_sasl_mechanism = broker_sasl_mechanism", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4f223d787543ceaab3f88ebf3b54ff2f9c86c6ef"}, "originalPosition": 7}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkzNTg2NTAy", "url": "https://github.com/apache/kafka/pull/8403#pullrequestreview-393586502", "createdAt": "2020-04-15T09:01:39Z", "commit": {"oid": "4f223d787543ceaab3f88ebf3b54ff2f9c86c6ef"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 32, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}