{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM4NDk3MDI5", "number": 8914, "title": "MINOR: Do not swallow exception when collecting PIDs", "bodyText": "During Streams' system tests the PIDs of the Streams\nclients are collected. The method the collects the PIDs\nswallows any exception that might be thrown by the\nssh_capture() function. Swallowing any exceptions\nmight make the investigation of failures harder,\nbecause no information about what happened are recorded.\nCommitter Checklist (excluded from commit message)\n\n Verify design and implementation\n Verify test coverage and CI build status\n Verify documentation (including upgrade notes)", "createdAt": "2020-06-23T11:08:11Z", "url": "https://github.com/apache/kafka/pull/8914", "merged": true, "mergeCommit": {"oid": "f3a9ce4a69d17db7b8ba21134eb8118070176e48"}, "closed": true, "closedAt": "2020-06-30T17:18:24Z", "author": {"login": "cadonna"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcuDTfQAH2gAyNDM4NDk3MDI5OjY0NjExYjZmNTJmYzFiZjBiYWRhYWM2MDI3NTllYjQ3ZTk4NThlN2Q=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcu6s3jAFqTQzNzk5MTY0Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "64611b6f52fc1bf0badaac602759eb47e9858e7d", "author": {"user": {"login": "cadonna", "name": "Bruno Cadonna"}}, "url": "https://github.com/apache/kafka/commit/64611b6f52fc1bf0badaac602759eb47e9858e7d", "committedDate": "2020-06-23T10:57:36Z", "message": "MINOR: Do not swallow exception when collecting PIDs\n\nDuring Streams' system tests the PIDs of the Streams\nclients are collected. The method the collects the PIDs\nswallows any exception that might be thrown by the\n`ssh_capture()` function. Swallowing any exceptions\nmight make the investigation of failures harder,\nbecause no information about what happened are recorded."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2c318afd6877587671ccde3c61a9b77a2fc09aec", "author": {"user": {"login": "cadonna", "name": "Bruno Cadonna"}}, "url": "https://github.com/apache/kafka/commit/2c318afd6877587671ccde3c61a9b77a2fc09aec", "committedDate": "2020-06-25T11:53:04Z", "message": "Log exception on DEBUG level"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM3NDMwMzQy", "url": "https://github.com/apache/kafka/pull/8914#pullrequestreview-437430342", "createdAt": "2020-06-25T12:11:04Z", "commit": {"oid": "2c318afd6877587671ccde3c61a9b77a2fc09aec"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQxMjoxMTowNFrOGo3zrw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQxMjoxMTowNFrOGo3zrw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTUxMDU3NQ==", "bodyText": "I need to do this because otherwise the callback int will throw a cast exception when an error occurred in ssh_capture() that returned an error message.", "url": "https://github.com/apache/kafka/pull/8914#discussion_r445510575", "createdAt": "2020-06-25T12:11:04Z", "author": {"login": "cadonna"}, "path": "tests/kafkatest/services/streams.py", "diffHunk": "@@ -215,8 +216,11 @@ def node(self):\n \n     def pids(self, node):\n         try:\n-            return [pid for pid in node.account.ssh_capture(\"cat \" + self.PID_FILE, callback=int)]\n-        except:\n+            pids = [pid for pid in node.account.ssh_capture(\"cat \" + self.PID_FILE, callback=str)]\n+            return [int(pid) for pid in pids]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2c318afd6877587671ccde3c61a9b77a2fc09aec"}, "originalPosition": 15}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "911b7a2f0ab716750bd3875852e155e877b9c348", "author": {"user": {"login": "cadonna", "name": "Bruno Cadonna"}}, "url": "https://github.com/apache/kafka/commit/911b7a2f0ab716750bd3875852e155e877b9c348", "committedDate": "2020-06-25T12:11:51Z", "message": "Improve log message"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM3NDMyMzA5", "url": "https://github.com/apache/kafka/pull/8914#pullrequestreview-437432309", "createdAt": "2020-06-25T12:14:04Z", "commit": {"oid": "911b7a2f0ab716750bd3875852e155e877b9c348"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQxMjoxNDowNFrOGo35TQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQxMjoxNDowNFrOGo35TQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTUxMjAxMw==", "bodyText": "We just log the exception on debug level. I do not know how much this will help, but it is better than nothing.", "url": "https://github.com/apache/kafka/pull/8914#discussion_r445512013", "createdAt": "2020-06-25T12:14:04Z", "author": {"login": "cadonna"}, "path": "tests/kafkatest/services/streams.py", "diffHunk": "@@ -215,8 +216,10 @@ def node(self):\n \n     def pids(self, node):\n         try:\n-            return [pid for pid in node.account.ssh_capture(\"cat \" + self.PID_FILE, callback=int)]\n-        except:\n+            pids = [pid for pid in node.account.ssh_capture(\"cat \" + self.PID_FILE, callback=str)]\n+            return [int(pid) for pid in pids]\n+        except Exception, exception:\n+            self.logger.debug(str(exception))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "911b7a2f0ab716750bd3875852e155e877b9c348"}, "originalPosition": 17}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM3OTkxNjQ3", "url": "https://github.com/apache/kafka/pull/8914#pullrequestreview-437991647", "createdAt": "2020-06-26T03:30:06Z", "commit": {"oid": "911b7a2f0ab716750bd3875852e155e877b9c348"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 707, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}