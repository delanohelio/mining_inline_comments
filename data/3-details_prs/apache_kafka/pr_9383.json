{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk4NjY0NDY0", "number": 9383, "title": "KAFKA-10455: Ensure that probing rebalances always occur", "bodyText": "Add data to subscriptionUserData to make sure that it's different each time a consumer rejoins\nCommitter Checklist (excluded from commit message)\n\n Verify design and implementation\n Verify test coverage and CI build status\n Verify documentation (including upgrade notes)", "createdAt": "2020-10-06T16:00:29Z", "url": "https://github.com/apache/kafka/pull/9383", "merged": true, "mergeCommit": {"oid": "4d14d6a96c952a3e71a3b8e1c6d9c68e8dd4568b"}, "closed": true, "closedAt": "2020-10-19T18:29:36Z", "author": {"login": "lct45"}, "timelineItems": {"totalCount": 23, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdPpK8xAH2gAyNDk4NjY0NDY0OjllOTE5YzIzNTRmNjA1YjRiMGFiNjkyMWZlZDk3ZDRiOTcwYmUzYWI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdTIKxQAH2gAyNDk4NjY0NDY0OjM4MjEyNWEzZDcwOTU2OGY4ZDYyYWM3NjMwMGU3OTczMGU3YjY0ZDY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "9e919c2354f605b4b0ab6921fed97d4b970be3ab", "author": {"user": {"login": "lct45", "name": "leah"}}, "url": "https://github.com/apache/kafka/commit/9e919c2354f605b4b0ab6921fed97d4b970be3ab", "committedDate": "2020-10-05T19:44:10Z", "message": "Add check to ensure rebalancing"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fb994d83c10d93f53431e04ca462dcf1e61e26ac", "author": {"user": {"login": "lct45", "name": "leah"}}, "url": "https://github.com/apache/kafka/commit/fb994d83c10d93f53431e04ca462dcf1e61e26ac", "committedDate": "2020-10-06T15:35:25Z", "message": "testing udpates"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8fa4be81e42cf5614e045fbe8c1eeeddf394a00c", "author": {"user": {"login": "lct45", "name": "leah"}}, "url": "https://github.com/apache/kafka/commit/8fa4be81e42cf5614e045fbe8c1eeeddf394a00c", "committedDate": "2020-10-06T15:58:21Z", "message": "clean up"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1b2769f8fbd68a47e1d3a2f16d36f411d1f3b8b2", "author": {"user": {"login": "lct45", "name": "leah"}}, "url": "https://github.com/apache/kafka/commit/1b2769f8fbd68a47e1d3a2f16d36f411d1f3b8b2", "committedDate": "2020-10-07T15:33:25Z", "message": "small fixes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0f0133d5a0aa827eedba89178b29997a48d9028a", "author": {"user": {"login": "lct45", "name": "leah"}}, "url": "https://github.com/apache/kafka/commit/0f0133d5a0aa827eedba89178b29997a48d9028a", "committedDate": "2020-10-07T16:08:04Z", "message": "add testing"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cfadf9d74f856ccedccf03dedcbb6031ccaca54d", "author": {"user": {"login": "lct45", "name": "leah"}}, "url": "https://github.com/apache/kafka/commit/cfadf9d74f856ccedccf03dedcbb6031ccaca54d", "committedDate": "2020-10-07T16:25:48Z", "message": "clean up"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "52c6174a4b0c651cda7498feeb5d29347b00a910", "author": {"user": {"login": "lct45", "name": "leah"}}, "url": "https://github.com/apache/kafka/commit/52c6174a4b0c651cda7498feeb5d29347b00a910", "committedDate": "2020-10-07T18:25:17Z", "message": "Comment update"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA0MTU4Njcw", "url": "https://github.com/apache/kafka/pull/9383#pullrequestreview-504158670", "createdAt": "2020-10-07T18:30:08Z", "commit": {"oid": "52c6174a4b0c651cda7498feeb5d29347b00a910"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QxODozMDowOFrOHeAZFw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QxODozMDowOFrOHeAZFw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTIyNTc1MQ==", "bodyText": "This could be moved out to the assignorConfiguration class to match the other fields but the code is fairly straightforward so I left it here for now", "url": "https://github.com/apache/kafka/pull/9383#discussion_r501225751", "createdAt": "2020-10-07T18:30:08Z", "author": {"login": "lct45"}, "path": "streams/src/main/java/org/apache/kafka/streams/processor/internals/StreamsPartitionAssignor.java", "diffHunk": "@@ -212,6 +213,7 @@ public void configure(final Map<String, ?> configs) {\n         rebalanceProtocol = assignorConfiguration.rebalanceProtocol();\n         taskAssignorSupplier = assignorConfiguration::taskAssignor;\n         assignmentListener = assignorConfiguration.assignmentListener();\n+        uniqueField = usedSubscriptionMetadataVersion >= 8 ? new byte[1] : new byte[0];", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "52c6174a4b0c651cda7498feeb5d29347b00a910"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA0MjczMzEz", "url": "https://github.com/apache/kafka/pull/9383#pullrequestreview-504273313", "createdAt": "2020-10-07T21:15:48Z", "commit": {"oid": "52c6174a4b0c651cda7498feeb5d29347b00a910"}, "state": "COMMENTED", "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QyMToxNTo0OFrOHeF0MQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QyMTo0MToxM1rOHeGhzw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTMxNDYwOQ==", "bodyText": "Instead of hardcoded 8 all over, let's just define a constant for this similar to the MIN_VERSION_OFFSET_SUM_SUBSCRIPTION  in SubscriptionInfo", "url": "https://github.com/apache/kafka/pull/9383#discussion_r501314609", "createdAt": "2020-10-07T21:15:48Z", "author": {"login": "ableegoldman"}, "path": "streams/src/main/java/org/apache/kafka/streams/processor/internals/StreamsPartitionAssignor.java", "diffHunk": "@@ -234,15 +236,20 @@ public ByteBuffer subscriptionUserData(final Set<String> topics) {\n         // Adds the following information to subscription\n         // 1. Client UUID (a unique id assigned to an instance of KafkaStreams)\n         // 2. Map from task id to its overall lag\n+        // 3. Unique Field to ensure a rebalance when a thread rejoins by forcing the user data to be different\n \n         handleRebalanceStart(topics);\n+        if (usedSubscriptionMetadataVersion >= 8) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "52c6174a4b0c651cda7498feeb5d29347b00a910"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTMxNTU2OA==", "bodyText": "Sounds good. I think it's also fine to just initialize it to new byte[1] regardless of whether the version is high enough to actually need it or not. It's just a single byte, and simpler is better", "url": "https://github.com/apache/kafka/pull/9383#discussion_r501315568", "createdAt": "2020-10-07T21:17:52Z", "author": {"login": "ableegoldman"}, "path": "streams/src/main/java/org/apache/kafka/streams/processor/internals/StreamsPartitionAssignor.java", "diffHunk": "@@ -212,6 +213,7 @@ public void configure(final Map<String, ?> configs) {\n         rebalanceProtocol = assignorConfiguration.rebalanceProtocol();\n         taskAssignorSupplier = assignorConfiguration::taskAssignor;\n         assignmentListener = assignorConfiguration.assignmentListener();\n+        uniqueField = usedSubscriptionMetadataVersion >= 8 ? new byte[1] : new byte[0];", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTIyNTc1MQ=="}, "originalCommit": {"oid": "52c6174a4b0c651cda7498feeb5d29347b00a910"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTMxNjM5OA==", "bodyText": "Also, now that I think about it, the usedSubscriptionMetadataVersion will only ever be >= 8 at this point. It might be set to something lower at some point later on, but it has to be at least 8 when the assignor is just being created/configured", "url": "https://github.com/apache/kafka/pull/9383#discussion_r501316398", "createdAt": "2020-10-07T21:19:38Z", "author": {"login": "ableegoldman"}, "path": "streams/src/main/java/org/apache/kafka/streams/processor/internals/StreamsPartitionAssignor.java", "diffHunk": "@@ -212,6 +213,7 @@ public void configure(final Map<String, ?> configs) {\n         rebalanceProtocol = assignorConfiguration.rebalanceProtocol();\n         taskAssignorSupplier = assignorConfiguration::taskAssignor;\n         assignmentListener = assignorConfiguration.assignmentListener();\n+        uniqueField = usedSubscriptionMetadataVersion >= 8 ? new byte[1] : new byte[0];", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTIyNTc1MQ=="}, "originalCommit": {"oid": "52c6174a4b0c651cda7498feeb5d29347b00a910"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTMxNzgyMw==", "bodyText": "If you want, I think it's also fine to just always flip the byte and not even check against the used subscription version.", "url": "https://github.com/apache/kafka/pull/9383#discussion_r501317823", "createdAt": "2020-10-07T21:22:31Z", "author": {"login": "ableegoldman"}, "path": "streams/src/main/java/org/apache/kafka/streams/processor/internals/StreamsPartitionAssignor.java", "diffHunk": "@@ -234,15 +236,20 @@ public ByteBuffer subscriptionUserData(final Set<String> topics) {\n         // Adds the following information to subscription\n         // 1. Client UUID (a unique id assigned to an instance of KafkaStreams)\n         // 2. Map from task id to its overall lag\n+        // 3. Unique Field to ensure a rebalance when a thread rejoins by forcing the user data to be different\n \n         handleRebalanceStart(topics);\n+        if (usedSubscriptionMetadataVersion >= 8) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTMxNDYwOQ=="}, "originalCommit": {"oid": "52c6174a4b0c651cda7498feeb5d29347b00a910"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTMyMjMwMA==", "bodyText": "Can you add a test that verifies that it goes back and forth between the two expected values when you call partitionAssignor.subscriptionUserData multiples times (let's say 3) -- also maybe add a verification that the uniqueField has a length of just 1", "url": "https://github.com/apache/kafka/pull/9383#discussion_r501322300", "createdAt": "2020-10-07T21:32:31Z", "author": {"login": "ableegoldman"}, "path": "streams/src/test/java/org/apache/kafka/streams/processor/internals/StreamsPartitionAssignorTest.java", "diffHunk": "@@ -483,7 +485,7 @@ public void testEagerSubscription() {\n         Collections.sort(subscription.topics());\n         assertEquals(asList(\"topic1\", \"topic2\"), subscription.topics());\n \n-        final SubscriptionInfo info = getInfo(UUID_1, prevTasks, standbyTasks);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "52c6174a4b0c651cda7498feeb5d29347b00a910"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTMyMjg1MA==", "bodyText": "Can you add a test like this for the new version 8?", "url": "https://github.com/apache/kafka/pull/9383#discussion_r501322850", "createdAt": "2020-10-07T21:33:44Z", "author": {"login": "ableegoldman"}, "path": "streams/src/test/java/org/apache/kafka/streams/processor/internals/assignment/SubscriptionInfoTest.java", "diffHunk": "@@ -286,23 +296,23 @@ public void shouldEncodeAndDecodeSmallerLatestSupportedVersion() {\n         final int latestSupportedVersion = LATEST_SUPPORTED_VERSION - 1;\n \n         final SubscriptionInfo info =\n-            new SubscriptionInfo(usedVersion, latestSupportedVersion, UUID_1, \"localhost:80\", TASK_OFFSET_SUMS);\n+            new SubscriptionInfo(usedVersion, latestSupportedVersion, UUID_1, \"localhost:80\", TASK_OFFSET_SUMS, IGNORED_UNIQUE_FIELD);\n         final SubscriptionInfo expectedInfo =\n-            new SubscriptionInfo(usedVersion, latestSupportedVersion, UUID_1, \"localhost:80\", TASK_OFFSET_SUMS);\n+            new SubscriptionInfo(usedVersion, latestSupportedVersion, UUID_1, \"localhost:80\", TASK_OFFSET_SUMS, IGNORED_UNIQUE_FIELD);\n         assertEquals(expectedInfo, SubscriptionInfo.decode(info.encode()));\n     }\n \n     @Test\n     public void shouldEncodeAndDecodeVersion7() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "52c6174a4b0c651cda7498feeb5d29347b00a910"}, "originalPosition": 118}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTMyNjI4Nw==", "bodyText": "I think we should also add a test to make sure that if you pass in a uniqueField to the SubscriptionInfo but the usedVersion is less than 8, that it does not actually encode this field.", "url": "https://github.com/apache/kafka/pull/9383#discussion_r501326287", "createdAt": "2020-10-07T21:41:13Z", "author": {"login": "ableegoldman"}, "path": "streams/src/test/java/org/apache/kafka/streams/processor/internals/assignment/SubscriptionInfoTest.java", "diffHunk": "@@ -313,7 +323,8 @@ public void shouldReturnTaskOffsetSumsMapForDecodedSubscription() {\n             new SubscriptionInfo(MIN_VERSION_OFFSET_SUM_SUBSCRIPTION,\n                                  LATEST_SUPPORTED_VERSION, UUID_1,\n                                  \"localhost:80\",\n-                                 TASK_OFFSET_SUMS)\n+                                 TASK_OFFSET_SUMS,\n+                                 IGNORED_UNIQUE_FIELD)\n                 .encode());\n         assertThat(info.taskOffsetSums(), is(TASK_OFFSET_SUMS));\n     }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "52c6174a4b0c651cda7498feeb5d29347b00a910"}, "originalPosition": 142}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a1e964f7954c7c1ba5fec99a18a700566d5002d7", "author": {"user": {"login": "lct45", "name": "leah"}}, "url": "https://github.com/apache/kafka/commit/a1e964f7954c7c1ba5fec99a18a700566d5002d7", "committedDate": "2020-10-08T16:13:37Z", "message": "fix unique field"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA0OTg5MDYy", "url": "https://github.com/apache/kafka/pull/9383#pullrequestreview-504989062", "createdAt": "2020-10-08T17:04:00Z", "commit": {"oid": "a1e964f7954c7c1ba5fec99a18a700566d5002d7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxNzowNDowMFrOHeoD6w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxNzowNDowMFrOHeoD6w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTg3NTY5MQ==", "bodyText": "Can we add a comment here explaining why we set the thread count so high? I feel like we'll forget and be really confused when we stumble across this in the future.", "url": "https://github.com/apache/kafka/pull/9383#discussion_r501875691", "createdAt": "2020-10-08T17:04:00Z", "author": {"login": "ableegoldman"}, "path": "streams/src/test/java/org/apache/kafka/streams/integration/HighAvailabilityTaskAssignorIntegrationTest.java", "diffHunk": "@@ -286,7 +286,8 @@ private static Properties streamsProperties(final String appId,\n                 mkEntry(StreamsConfig.PROBING_REBALANCE_INTERVAL_MS_CONFIG, \"60000\"),\n                 mkEntry(StreamsConfig.InternalConfig.ASSIGNMENT_LISTENER, configuredAssignmentListener),\n                 mkEntry(StreamsConfig.COMMIT_INTERVAL_MS_CONFIG, \"100\"),\n-                mkEntry(StreamsConfig.InternalConfig.INTERNAL_TASK_ASSIGNOR_CLASS, HighAvailabilityTaskAssignor.class.getName())\n+                mkEntry(StreamsConfig.InternalConfig.INTERNAL_TASK_ASSIGNOR_CLASS, HighAvailabilityTaskAssignor.class.getName()),\n+                mkEntry(StreamsConfig.NUM_STREAM_THREADS_CONFIG, 40)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a1e964f7954c7c1ba5fec99a18a700566d5002d7"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA0OTkwMzA5", "url": "https://github.com/apache/kafka/pull/9383#pullrequestreview-504990309", "createdAt": "2020-10-08T17:05:37Z", "commit": {"oid": "a1e964f7954c7c1ba5fec99a18a700566d5002d7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxNzowNTozN1rOHeoHpg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxNzowNTozN1rOHeoHpg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTg3NjY0Ng==", "bodyText": "nit: let's use new byte[1] for this to make sure it's actually being ignored when it should be (since apparently it won't notice if you just pass in empty bytes for this field on a version < 8)", "url": "https://github.com/apache/kafka/pull/9383#discussion_r501876646", "createdAt": "2020-10-08T17:05:37Z", "author": {"login": "ableegoldman"}, "path": "streams/src/test/java/org/apache/kafka/streams/processor/internals/assignment/SubscriptionInfoTest.java", "diffHunk": "@@ -59,6 +60,7 @@\n     );\n \n     private final static String IGNORED_USER_ENDPOINT = \"ignoredUserEndpoint:80\";\n+    private static final byte[] IGNORED_UNIQUE_FIELD = Bytes.EMPTY;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a1e964f7954c7c1ba5fec99a18a700566d5002d7"}, "originalPosition": 12}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8dbb4998db8466dab6065b80c30c6758179eaf0e", "author": {"user": {"login": "lct45", "name": "leah"}}, "url": "https://github.com/apache/kafka/commit/8dbb4998db8466dab6065b80c30c6758179eaf0e", "committedDate": "2020-10-08T20:04:16Z", "message": "Testing updates"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1721a60b5e2c5d6be0a9b3ba3c4b622292c68ae5", "author": {"user": {"login": "lct45", "name": "leah"}}, "url": "https://github.com/apache/kafka/commit/1721a60b5e2c5d6be0a9b3ba3c4b622292c68ae5", "committedDate": "2020-10-09T18:51:16Z", "message": "Fixing tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA3NjQ0MDY3", "url": "https://github.com/apache/kafka/pull/9383#pullrequestreview-507644067", "createdAt": "2020-10-13T16:50:42Z", "commit": {"oid": "1721a60b5e2c5d6be0a9b3ba3c4b622292c68ae5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QxNjo1MDo0MlrOHgweQA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QxNjo1MDo0MlrOHgweQA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDExMDY1Ng==", "bodyText": "We should do the same thing that we do in StreamsPartitionAssignor here, ie a changing byte. This is supposed to be like the same exact thing but for a \"future version\" of the partition assignor, to test version probing and general compatibility.\nIt's a bit annoying that you have to just copy the same exact stuff but that's just how it is for now", "url": "https://github.com/apache/kafka/pull/9383#discussion_r504110656", "createdAt": "2020-10-13T16:50:42Z", "author": {"login": "ableegoldman"}, "path": "streams/src/test/java/org/apache/kafka/streams/tests/StreamsUpgradeTest.java", "diffHunk": "@@ -158,7 +159,8 @@ public ByteBuffer subscriptionUserData(final Set<String> topics) {\n                     LATEST_SUPPORTED_VERSION + 1,\n                     taskManager.processId(),\n                     userEndPoint(),\n-                    taskManager.getTaskOffsetSums()\n+                    taskManager.getTaskOffsetSums(),\n+                    Bytes.EMPTY", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1721a60b5e2c5d6be0a9b3ba3c4b622292c68ae5"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ed3b7fa44cd5bf836f0e60212f3ae9d31efb42a6", "author": {"user": {"login": "lct45", "name": "leah"}}, "url": "https://github.com/apache/kafka/commit/ed3b7fa44cd5bf836f0e60212f3ae9d31efb42a6", "committedDate": "2020-10-14T19:40:57Z", "message": "Testing fixes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f286933eed98c42b3dc4c73a278b1145750ad8ae", "author": {"user": {"login": "lct45", "name": "leah"}}, "url": "https://github.com/apache/kafka/commit/f286933eed98c42b3dc4c73a278b1145750ad8ae", "committedDate": "2020-10-14T23:18:02Z", "message": "minor tweaks"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "f286933eed98c42b3dc4c73a278b1145750ad8ae", "author": {"user": {"login": "lct45", "name": "leah"}}, "url": "https://github.com/apache/kafka/commit/f286933eed98c42b3dc4c73a278b1145750ad8ae", "committedDate": "2020-10-14T23:18:02Z", "message": "minor tweaks"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA4ODQyMjE1", "url": "https://github.com/apache/kafka/pull/9383#pullrequestreview-508842215", "createdAt": "2020-10-14T23:36:56Z", "commit": {"oid": "f286933eed98c42b3dc4c73a278b1145750ad8ae"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA4OTIxNDQ4", "url": "https://github.com/apache/kafka/pull/9383#pullrequestreview-508921448", "createdAt": "2020-10-15T04:02:53Z", "commit": {"oid": "f286933eed98c42b3dc4c73a278b1145750ad8ae"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "abb42de2a843fcaf8b1acb25bfbe408421ba221a", "author": {"user": {"login": "lct45", "name": "leah"}}, "url": "https://github.com/apache/kafka/commit/abb42de2a843fcaf8b1acb25bfbe408421ba221a", "committedDate": "2020-10-16T02:58:10Z", "message": "switching to real byte"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEwNTc1ODAy", "url": "https://github.com/apache/kafka/pull/9383#pullrequestreview-510575802", "createdAt": "2020-10-16T15:26:09Z", "commit": {"oid": "abb42de2a843fcaf8b1acb25bfbe408421ba221a"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQxNToyNjowOVrOHjE8Rg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQxNToyNjowOVrOHjE8Rg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjU0MzE3NA==", "bodyText": "we probably ought to delete the commented-out assertions.", "url": "https://github.com/apache/kafka/pull/9383#discussion_r506543174", "createdAt": "2020-10-16T15:26:09Z", "author": {"login": "vvcephei"}, "path": "streams/src/test/java/org/apache/kafka/streams/processor/internals/StreamsPartitionAssignorTest.java", "diffHunk": "@@ -2023,13 +2022,13 @@ public void testUniqueField() {\n         configureDefaultPartitionAssignor();\n         final Set<String> topics = mkSet(\"input\");\n \n-        assertEquals(1, partitionAssignor.uniqueField().length);\n-        assertEquals(0, partitionAssignor.uniqueField()[0]);\n+        //assertEquals(1, partitionAssignor.uniqueField().length);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "abb42de2a843fcaf8b1acb25bfbe408421ba221a"}, "originalPosition": 23}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "382125a3d709568f8d62ac76300e79730e7b64d6", "author": {"user": {"login": "lct45", "name": "leah"}}, "url": "https://github.com/apache/kafka/commit/382125a3d709568f8d62ac76300e79730e7b64d6", "committedDate": "2020-10-16T15:32:48Z", "message": "fix comments"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 456, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}