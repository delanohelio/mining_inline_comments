{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIyOTExODkx", "number": 9609, "title": "KAFKA-6687: restrict DSL to allow only Streams from the same source topics", "bodyText": "Followup to #9582\nWill leave the ability to create multiple KTables from the same source topic as followup work. Similarly, creating a KStream and a KTable from the same topic can be tackled later if need be", "createdAt": "2020-11-18T04:57:40Z", "url": "https://github.com/apache/kafka/pull/9609", "merged": true, "mergeCommit": {"oid": "dc55be2d92922dbee28d010bec464fcf0e90a350"}, "closed": true, "closedAt": "2020-12-01T19:26:17Z", "author": {"login": "ableegoldman"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABddm0SygH2gAyNTIyOTExODkxOjBiNTJjYzMwNzkzZmQxMmE3NmQ2MGE0MjE0YmRkZDI2ZmNjMzRlMWM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdf6W3AgFqTUzODI2OTA1Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "0b52cc30793fd12a76d60a4214bddd26fcc34e1c", "author": {"user": {"login": "ableegoldman", "name": "A. Sophie Blee-Goldman"}}, "url": "https://github.com/apache/kafka/commit/0b52cc30793fd12a76d60a4214bddd26fcc34e1c", "committedDate": "2020-11-18T04:54:33Z", "message": "refactor nodes, fix up tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM2MDEzMTk0", "url": "https://github.com/apache/kafka/pull/9609#pullrequestreview-536013194", "createdAt": "2020-11-21T22:28:59Z", "commit": {"oid": "0b52cc30793fd12a76d60a4214bddd26fcc34e1c"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMVQyMjoyODo1OVrOH3x2oQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMVQyMjoyOTozOVrOH3x27g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODI1MDUyOQ==", "bodyText": "nit: fix indention (same below in other constructor)", "url": "https://github.com/apache/kafka/pull/9609#discussion_r528250529", "createdAt": "2020-11-21T22:28:59Z", "author": {"login": "mjsax"}, "path": "streams/src/main/java/org/apache/kafka/streams/kstream/internals/graph/SourceGraphNode.java", "diffHunk": "@@ -0,0 +1,71 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements. See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License. You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.kafka.streams.kstream.internals.graph;\n+\n+import java.util.Collection;\n+import java.util.HashSet;\n+import java.util.Set;\n+import java.util.regex.Pattern;\n+import org.apache.kafka.common.serialization.Serde;\n+import org.apache.kafka.streams.kstream.internals.ConsumedInternal;\n+\n+abstract public class SourceGraphNode<K, V> extends StreamsGraphNode {\n+\n+    private Collection<String> topicNames;\n+    private Pattern topicPattern;\n+    private final ConsumedInternal<K, V> consumedInternal;\n+\n+    public SourceGraphNode(final String nodeName,\n+                            final Collection<String> topicNames,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0b52cc30793fd12a76d60a4214bddd26fcc34e1c"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODI1MDU3OQ==", "bodyText": "Can me make those field final?", "url": "https://github.com/apache/kafka/pull/9609#discussion_r528250579", "createdAt": "2020-11-21T22:29:33Z", "author": {"login": "mjsax"}, "path": "streams/src/main/java/org/apache/kafka/streams/kstream/internals/graph/SourceGraphNode.java", "diffHunk": "@@ -0,0 +1,71 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements. See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License. You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.kafka.streams.kstream.internals.graph;\n+\n+import java.util.Collection;\n+import java.util.HashSet;\n+import java.util.Set;\n+import java.util.regex.Pattern;\n+import org.apache.kafka.common.serialization.Serde;\n+import org.apache.kafka.streams.kstream.internals.ConsumedInternal;\n+\n+abstract public class SourceGraphNode<K, V> extends StreamsGraphNode {\n+\n+    private Collection<String> topicNames;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0b52cc30793fd12a76d60a4214bddd26fcc34e1c"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODI1MDYwNg==", "bodyText": "final?", "url": "https://github.com/apache/kafka/pull/9609#discussion_r528250606", "createdAt": "2020-11-21T22:29:39Z", "author": {"login": "mjsax"}, "path": "streams/src/main/java/org/apache/kafka/streams/kstream/internals/graph/SourceGraphNode.java", "diffHunk": "@@ -0,0 +1,71 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements. See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License. You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.kafka.streams.kstream.internals.graph;\n+\n+import java.util.Collection;\n+import java.util.HashSet;\n+import java.util.Set;\n+import java.util.regex.Pattern;\n+import org.apache.kafka.common.serialization.Serde;\n+import org.apache.kafka.streams.kstream.internals.ConsumedInternal;\n+\n+abstract public class SourceGraphNode<K, V> extends StreamsGraphNode {\n+\n+    private Collection<String> topicNames;\n+    private Pattern topicPattern;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0b52cc30793fd12a76d60a4214bddd26fcc34e1c"}, "originalPosition": 29}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM2NjU2MDk1", "url": "https://github.com/apache/kafka/pull/9609#pullrequestreview-536656095", "createdAt": "2020-11-23T16:43:16Z", "commit": {"oid": "0b52cc30793fd12a76d60a4214bddd26fcc34e1c"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxNjo0MzoxNlrOH4WLNg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxNjo0NTo0N1rOH4WSIQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODg0NTYyMg==", "bodyText": "Should we already demand a set of topics in the constructors of  SourceGraphNode() and its children?", "url": "https://github.com/apache/kafka/pull/9609#discussion_r528845622", "createdAt": "2020-11-23T16:43:16Z", "author": {"login": "cadonna"}, "path": "streams/src/main/java/org/apache/kafka/streams/kstream/internals/graph/SourceGraphNode.java", "diffHunk": "@@ -0,0 +1,71 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements. See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License. You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.kafka.streams.kstream.internals.graph;\n+\n+import java.util.Collection;\n+import java.util.HashSet;\n+import java.util.Set;\n+import java.util.regex.Pattern;\n+import org.apache.kafka.common.serialization.Serde;\n+import org.apache.kafka.streams.kstream.internals.ConsumedInternal;\n+\n+abstract public class SourceGraphNode<K, V> extends StreamsGraphNode {\n+\n+    private Collection<String> topicNames;\n+    private Pattern topicPattern;\n+    private final ConsumedInternal<K, V> consumedInternal;\n+\n+    public SourceGraphNode(final String nodeName,\n+                            final Collection<String> topicNames,\n+                            final ConsumedInternal<K, V> consumedInternal) {\n+        super(nodeName);\n+\n+        this.topicNames = topicNames;\n+        this.consumedInternal = consumedInternal;\n+    }\n+\n+    public SourceGraphNode(final String nodeName,\n+                            final Pattern topicPattern,\n+                            final ConsumedInternal<K, V> consumedInternal) {\n+\n+        super(nodeName);\n+\n+        this.topicPattern = topicPattern;\n+        this.consumedInternal = consumedInternal;\n+    }\n+\n+    public Set<String> topicNames() {\n+        return new HashSet<>(topicNames);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0b52cc30793fd12a76d60a4214bddd26fcc34e1c"}, "originalPosition": 52}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODg0NzM5Mw==", "bodyText": "Can we also rename StreamsGraphNode to GraphNode? The Streams prefix is a bit confusing, IMO, because StreamSourceNode and StreamsGraphNode seem really similar although they are quite different.", "url": "https://github.com/apache/kafka/pull/9609#discussion_r528847393", "createdAt": "2020-11-23T16:45:47Z", "author": {"login": "cadonna"}, "path": "streams/src/main/java/org/apache/kafka/streams/kstream/internals/graph/SourceGraphNode.java", "diffHunk": "@@ -0,0 +1,71 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements. See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License. You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.kafka.streams.kstream.internals.graph;\n+\n+import java.util.Collection;\n+import java.util.HashSet;\n+import java.util.Set;\n+import java.util.regex.Pattern;\n+import org.apache.kafka.common.serialization.Serde;\n+import org.apache.kafka.streams.kstream.internals.ConsumedInternal;\n+\n+abstract public class SourceGraphNode<K, V> extends StreamsGraphNode {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0b52cc30793fd12a76d60a4214bddd26fcc34e1c"}, "originalPosition": 26}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d4a31473b896337d7dca3b9012f892150cd37a9c", "author": {"user": {"login": "ableegoldman", "name": "A. Sophie Blee-Goldman"}}, "url": "https://github.com/apache/kafka/commit/d4a31473b896337d7dca3b9012f892150cd37a9c", "committedDate": "2020-11-24T22:56:32Z", "message": "review feedback"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "93518cd976bb9d35dc5ea92c5a2d2b98123dc0a0", "author": {"user": {"login": "ableegoldman", "name": "A. Sophie Blee-Goldman"}}, "url": "https://github.com/apache/kafka/commit/93518cd976bb9d35dc5ea92c5a2d2b98123dc0a0", "committedDate": "2020-11-24T22:57:33Z", "message": "rename StreamsGraphNode to GraphNode"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM4MDY4MzQz", "url": "https://github.com/apache/kafka/pull/9609#pullrequestreview-538068343", "createdAt": "2020-11-25T00:22:24Z", "commit": {"oid": "93518cd976bb9d35dc5ea92c5a2d2b98123dc0a0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQwMDoyMjoyNFrOH5eYSQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQwMDoyMjoyNFrOH5eYSQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDAyODYxNw==", "bodyText": "nit: indention", "url": "https://github.com/apache/kafka/pull/9609#discussion_r530028617", "createdAt": "2020-11-25T00:22:24Z", "author": {"login": "mjsax"}, "path": "streams/src/main/java/org/apache/kafka/streams/kstream/internals/CogroupedKStreamImpl.java", "diffHunk": "@@ -129,7 +129,7 @@\n             subTopologySourceNodes,\n             name,\n             aggregateBuilder,\n-            streamsGraphNode,\n+                                                         graphNode,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "93518cd976bb9d35dc5ea92c5a2d2b98123dc0a0"}, "originalPosition": 44}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM4MDcwNDg0", "url": "https://github.com/apache/kafka/pull/9609#pullrequestreview-538070484", "createdAt": "2020-11-25T00:28:32Z", "commit": {"oid": "93518cd976bb9d35dc5ea92c5a2d2b98123dc0a0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b1d995aff2eac1f9a689ff3bc091570d3b5e7d18", "author": {"user": {"login": "ableegoldman", "name": "A. Sophie Blee-Goldman"}}, "url": "https://github.com/apache/kafka/commit/b1d995aff2eac1f9a689ff3bc091570d3b5e7d18", "committedDate": "2020-11-25T01:51:34Z", "message": "fix indentation and Set-ify"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM4MjY5MDU3", "url": "https://github.com/apache/kafka/pull/9609#pullrequestreview-538269057", "createdAt": "2020-11-25T08:48:22Z", "commit": {"oid": "b1d995aff2eac1f9a689ff3bc091570d3b5e7d18"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2800, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}