{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIxMDY0NzU3", "number": 8701, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQwNzozODo1NlrOD-gSbA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yM1QxNDo0NDoyMlrOD_IxNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY2ODY3MzA4OnYy", "diffSide": "RIGHT", "path": "core/src/main/scala/kafka/log/Log.scala", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQwNzozODo1NlrOGYpRVg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxODowMDo1MFrOGY9Fxw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODQ5NTE5MA==", "bodyText": "How about LogStartOffsetIncrementCause ?", "url": "https://github.com/apache/kafka/pull/8701#discussion_r428495190", "createdAt": "2020-05-21T07:38:56Z", "author": {"login": "chia7712"}, "path": "core/src/main/scala/kafka/log/Log.scala", "diffHunk": "@@ -180,6 +180,17 @@ object RollParams {\n   }\n }\n \n+sealed trait LogStartIncrementCause", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b8a9021a3689f6b2fb1ae928640a633c899a7689"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODgxOTkxMQ==", "bodyText": "I knew someone was going to ask this \ud83d\ude42 . I guess I'll do it.", "url": "https://github.com/apache/kafka/pull/8701#discussion_r428819911", "createdAt": "2020-05-21T18:00:50Z", "author": {"login": "hachikuji"}, "path": "core/src/main/scala/kafka/log/Log.scala", "diffHunk": "@@ -180,6 +180,17 @@ object RollParams {\n   }\n }\n \n+sealed trait LogStartIncrementCause", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODQ5NTE5MA=="}, "originalCommit": {"oid": "b8a9021a3689f6b2fb1ae928640a633c899a7689"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY3NTMwMjUyOnYy", "diffSide": "RIGHT", "path": "core/src/main/scala/kafka/log/Log.scala", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yM1QxNDozODoyMlrOGZpv_Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yM1QxNDozODoyMlrOGZpv_Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTU1MTYxMw==", "bodyText": "Nit: LogStartOffsetIncrementReason?", "url": "https://github.com/apache/kafka/pull/8701#discussion_r429551613", "createdAt": "2020-05-23T14:38:22Z", "author": {"login": "ijuma"}, "path": "core/src/main/scala/kafka/log/Log.scala", "diffHunk": "@@ -180,6 +180,17 @@ object RollParams {\n   }\n }\n \n+sealed trait LogStartOffsetIncrementCause", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "788544da1e4dd5394d52428f28ffbda1f7c62732"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY3NTMwMzg5OnYy", "diffSide": "RIGHT", "path": "core/src/main/scala/kafka/log/Log.scala", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yM1QxNDo0MTowOFrOGZpwtg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yM1QxNDo0MTowOFrOGZpwtg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTU1MTc5OA==", "bodyText": "Maybe we should just say segment deletion? We can also delete segments during recovery and such. Could that not trigger this path?", "url": "https://github.com/apache/kafka/pull/8701#discussion_r429551798", "createdAt": "2020-05-23T14:41:08Z", "author": {"login": "ijuma"}, "path": "core/src/main/scala/kafka/log/Log.scala", "diffHunk": "@@ -180,6 +180,17 @@ object RollParams {\n   }\n }\n \n+sealed trait LogStartOffsetIncrementCause\n+case object ClientRecordDeletion extends LogStartOffsetIncrementCause {\n+  override def toString: String = \"client delete records request\"\n+}\n+case object LeaderOffsetIncremented extends LogStartOffsetIncrementCause {\n+  override def toString: String = \"leader offset increment\"\n+}\n+case object SegmentDeletion extends LogStartOffsetIncrementCause {\n+  override def toString: String = \"segment deletion to enforce retention\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "788544da1e4dd5394d52428f28ffbda1f7c62732"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY3NTMwNTQ5OnYy", "diffSide": "RIGHT", "path": "core/src/main/scala/kafka/log/Log.scala", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yM1QxNDo0NDoyMlrOGZpxkg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yM1QxNDo0NDoyMlrOGZpxkg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTU1MjAxOA==", "bodyText": "Nit: would due be better than after here?", "url": "https://github.com/apache/kafka/pull/8701#discussion_r429552018", "createdAt": "2020-05-23T14:44:22Z", "author": {"login": "ijuma"}, "path": "core/src/main/scala/kafka/log/Log.scala", "diffHunk": "@@ -1275,8 +1286,8 @@ class Log(@volatile private var _dir: File,\n       lock synchronized {\n         checkIfMemoryMappedBufferClosed()\n         if (newLogStartOffset > logStartOffset) {\n-          info(s\"Incrementing log start offset to $newLogStartOffset\")\n           updateLogStartOffset(newLogStartOffset)\n+          info(s\"Incremented log start offset to $newLogStartOffset after $cause\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "788544da1e4dd5394d52428f28ffbda1f7c62732"}, "originalPosition": 33}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2698, "cost": 1, "resetAt": "2021-11-12T11:18:39Z"}}}