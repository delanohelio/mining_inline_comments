{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYxNTkxMzI5", "number": 7931, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QwMDo1OTozMlrODXaCoA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QwMDo1OTozMlrODXaCoA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI1ODcwNDk2OnYy", "diffSide": "RIGHT", "path": "clients/src/main/java/org/apache/kafka/clients/NetworkClient.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QwMDo1OTozMlrOFcsB8w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QxNzowMTo1MlrOFc91Ow==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTYyNTg0Mw==", "bodyText": "Was this change triggered by a test failure?", "url": "https://github.com/apache/kafka/pull/7931#discussion_r365625843", "createdAt": "2020-01-13T00:59:32Z", "author": {"login": "ijuma"}, "path": "clients/src/main/java/org/apache/kafka/clients/NetworkClient.java", "diffHunk": "@@ -706,9 +708,13 @@ public Node leastLoadedNode(long now) {\n     }\n \n     public static AbstractResponse parseResponse(ByteBuffer responseBuffer, RequestHeader requestHeader) {\n-        Struct responseStruct = parseStructMaybeUpdateThrottleTimeMetrics(responseBuffer, requestHeader, null, 0);\n-        return AbstractResponse.parseResponse(requestHeader.apiKey(), responseStruct,\n-                requestHeader.apiVersion());\n+        try {\n+            Struct responseStruct = parseStructMaybeUpdateThrottleTimeMetrics(responseBuffer, requestHeader, null, 0);\n+            return AbstractResponse.parseResponse(requestHeader.apiKey(), responseStruct,\n+                    requestHeader.apiVersion());\n+        } catch (BufferUnderflowException e) {\n+            throw new SchemaException(\"Buffer underflow while parsing response for request with header \" + requestHeader, e);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7017336c3e8af90c97e0e9b0512d5721e40953c0"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTkxNzQ5OQ==", "bodyText": "Yes. The new schema causes a BufferUnderflowException when in the  REAUTH_RECEIVE_HANDSHAKE_OR_OTHER_RESPONSE state in SaslClientAuthenticator. This class expects to be able to catch parsing errors in order to change the handling.", "url": "https://github.com/apache/kafka/pull/7931#discussion_r365917499", "createdAt": "2020-01-13T17:01:52Z", "author": {"login": "hachikuji"}, "path": "clients/src/main/java/org/apache/kafka/clients/NetworkClient.java", "diffHunk": "@@ -706,9 +708,13 @@ public Node leastLoadedNode(long now) {\n     }\n \n     public static AbstractResponse parseResponse(ByteBuffer responseBuffer, RequestHeader requestHeader) {\n-        Struct responseStruct = parseStructMaybeUpdateThrottleTimeMetrics(responseBuffer, requestHeader, null, 0);\n-        return AbstractResponse.parseResponse(requestHeader.apiKey(), responseStruct,\n-                requestHeader.apiVersion());\n+        try {\n+            Struct responseStruct = parseStructMaybeUpdateThrottleTimeMetrics(responseBuffer, requestHeader, null, 0);\n+            return AbstractResponse.parseResponse(requestHeader.apiKey(), responseStruct,\n+                    requestHeader.apiVersion());\n+        } catch (BufferUnderflowException e) {\n+            throw new SchemaException(\"Buffer underflow while parsing response for request with header \" + requestHeader, e);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTYyNTg0Mw=="}, "originalCommit": {"oid": "7017336c3e8af90c97e0e9b0512d5721e40953c0"}, "originalPosition": 28}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4332, "cost": 1, "resetAt": "2021-11-12T11:18:39Z"}}}