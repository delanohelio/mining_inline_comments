{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE0ODk5NTEy", "number": 9552, "title": "KAFKA-10656: Log the feature flags received by the client", "bodyText": "Example log line:\n[2020-11-03 17:47:17,076] DEBUG Node 0 has finalizedFeaturesEpoch: 42, finalizedFeatures: [FinalizedFeatureKey(name='feature_1', maxVersionLevel=2, minVersionLevel=1), FinalizedFeatureKey(name='feature_2', maxVersionLevel=4, minVersionLevel=3)], supportedFeatures: [SupportedFeatureKey(name='feature_1', minVersion=1, maxVersion=2), SupportedFeatureKey(name='feature_2', minVersion=3, maxVersion=4)] (org.apache.kafka.clients.NetworkClient:926)", "createdAt": "2020-11-03T17:50:08Z", "url": "https://github.com/apache/kafka/pull/9552", "merged": true, "mergeCommit": {"oid": "61166051798ca6901462a29f09eed096810335f0"}, "closed": true, "closedAt": "2020-12-16T13:50:15Z", "author": {"login": "tombentley"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdmBuEfgFqTU1MTE0OTkwOA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdmW8DoAH2gAyNTE0ODk5NTEyOjU1NzRkNDQzMjdmNmExMzNmN2FiZWY0N2JlMWUyNWIyYTVkM2Q2NjE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUxMTQ5OTA4", "url": "https://github.com/apache/kafka/pull/9552#pullrequestreview-551149908", "createdAt": "2020-12-14T08:46:25Z", "commit": {"oid": "e67a04981657afb35f9f8c20ec29d2e82f154773"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQwODo0NjoyNVrOIFFnQw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQwODo0NjoyNVrOIFFnQw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjIwNTc2Mw==", "bodyText": "How about merging this message with new one?", "url": "https://github.com/apache/kafka/pull/9552#discussion_r542205763", "createdAt": "2020-12-14T08:46:25Z", "author": {"login": "chia7712"}, "path": "clients/src/main/java/org/apache/kafka/clients/NetworkClient.java", "diffHunk": "@@ -923,6 +923,10 @@ private void handleApiVersionsResponse(List<ClientResponse> responses,\n         apiVersions.update(node, nodeVersionInfo);\n         this.connectionStates.ready(node);\n         log.debug(\"Recorded API versions for node {}: {}\", node, nodeVersionInfo);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e67a04981657afb35f9f8c20ec29d2e82f154773"}, "originalPosition": 3}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "03acb61272a8f427190caf9efecadd2e6c11efee", "author": {"user": {"login": "tombentley", "name": "Tom Bentley"}}, "url": "https://github.com/apache/kafka/commit/03acb61272a8f427190caf9efecadd2e6c11efee", "committedDate": "2020-12-14T09:03:40Z", "message": "KAFKA-10656: Log the feature flags received by the client\n\nExample log line:\n\n[2020-11-03 17:47:17,076] DEBUG Node 0 has finalizedFeaturesEpoch: 42, finalizedFeatures: [FinalizedFeatureKey(name='feature_1', maxVersionLevel=2, minVersionLevel=1), FinalizedFeatureKey(name='feature_2', maxVersionLevel=4, minVersionLevel=3)], supportedFeatures: [SupportedFeatureKey(name='feature_1', minVersion=1, maxVersion=2), SupportedFeatureKey(name='feature_2', minVersion=3, maxVersion=4)] (org.apache.kafka.clients.NetworkClient:926)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5aeb87cf408232d3c14c750445b89899dbc65b05", "author": {"user": {"login": "tombentley", "name": "Tom Bentley"}}, "url": "https://github.com/apache/kafka/commit/5aeb87cf408232d3c14c750445b89899dbc65b05", "committedDate": "2020-12-14T09:15:05Z", "message": "Merge log lines"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3bac0e2fbd5c088965070042c176269f8367e760", "author": {"user": {"login": "tombentley", "name": "Tom Bentley"}}, "url": "https://github.com/apache/kafka/commit/3bac0e2fbd5c088965070042c176269f8367e760", "committedDate": "2020-12-14T09:02:48Z", "message": "Merge log lines"}, "afterCommit": {"oid": "5aeb87cf408232d3c14c750445b89899dbc65b05", "author": {"user": {"login": "tombentley", "name": "Tom Bentley"}}, "url": "https://github.com/apache/kafka/commit/5aeb87cf408232d3c14c750445b89899dbc65b05", "committedDate": "2020-12-14T09:15:05Z", "message": "Merge log lines"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUxMTg4OTg0", "url": "https://github.com/apache/kafka/pull/9552#pullrequestreview-551188984", "createdAt": "2020-12-14T09:34:30Z", "commit": {"oid": "5aeb87cf408232d3c14c750445b89899dbc65b05"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUyMDYzNjg1", "url": "https://github.com/apache/kafka/pull/9552#pullrequestreview-552063685", "createdAt": "2020-12-15T02:45:06Z", "commit": {"oid": "5aeb87cf408232d3c14c750445b89899dbc65b05"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQwMjo0NTowNlrOIF2S0w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQwMjo0NTowNlrOIF2S0w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzAwMzM0Nw==", "bodyText": "It is just a style issue. Could we merge line#921 and line#922?", "url": "https://github.com/apache/kafka/pull/9552#discussion_r543003347", "createdAt": "2020-12-15T02:45:06Z", "author": {"login": "chia7712"}, "path": "clients/src/main/java/org/apache/kafka/clients/NetworkClient.java", "diffHunk": "@@ -917,7 +917,10 @@ private void handleApiVersionsResponse(List<ClientResponse> responses,\n         NodeApiVersions nodeVersionInfo = new NodeApiVersions(apiVersionsResponse.data.apiKeys());\n         apiVersions.update(node, nodeVersionInfo);\n         this.connectionStates.ready(node);\n-        log.debug(\"Recorded API versions for node {}: {}\", node, nodeVersionInfo);\n+        log.debug(\"Node {} has finalized features epoch: {}, finalized features: {}, supported features: {}, API versions: {}.\",\n+                node,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5aeb87cf408232d3c14c750445b89899dbc65b05"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5574d44327f6a133f7abef47be1e25b2a5d3d661", "author": {"user": {"login": "tombentley", "name": "Tom Bentley"}}, "url": "https://github.com/apache/kafka/commit/5574d44327f6a133f7abef47be1e25b2a5d3d661", "committedDate": "2020-12-15T09:29:52Z", "message": "merge"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2675, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}