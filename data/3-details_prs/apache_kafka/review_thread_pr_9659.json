{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI4ODA1NDA2", "number": 9659, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yOFQwNTowMzoxNFrOE-K9Dg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yOFQwNTowNDo1MFrOE-K_kw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMzNjI2NjM4OnYy", "diffSide": "RIGHT", "path": "clients/src/main/java/org/apache/kafka/common/metrics/internals/MetricsUtils.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yOFQwNTowMzoxNFrOH7PJxQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yOVQwMToyOToxN1rOH7ehKg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTg3NjI5Mw==", "bodyText": "Could you set the initial capability?", "url": "https://github.com/apache/kafka/pull/9659#discussion_r531876293", "createdAt": "2020-11-28T05:03:14Z", "author": {"login": "chia7712"}, "path": "clients/src/main/java/org/apache/kafka/common/metrics/internals/MetricsUtils.java", "diffHunk": "@@ -43,4 +47,20 @@ public static double convert(long timeMs, TimeUnit unit) {\n                 throw new IllegalStateException(\"Unknown unit: \" + unit);\n         }\n     }\n+\n+    /**\n+     * Create a set of tags using the supplied key and value pairs. The order of the tags will be kept.\n+     *\n+     * @param keyValue the key and value pairs for the tags; must be an even number\n+     * @return the map of tags that can be supplied to the {@link Metrics} methods; never null\n+     */\n+    public static Map<String, String> getTags(String... keyValue) {\n+        if ((keyValue.length % 2) != 0)\n+            throw new IllegalArgumentException(\"keyValue needs to be specified in pairs\");\n+        Map<String, String> tags = new LinkedHashMap<>();", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjEyODA0Mg==", "bodyText": "Sure!", "url": "https://github.com/apache/kafka/pull/9659#discussion_r532128042", "createdAt": "2020-11-29T01:29:17Z", "author": {"login": "ArunParthiban-ST"}, "path": "clients/src/main/java/org/apache/kafka/common/metrics/internals/MetricsUtils.java", "diffHunk": "@@ -43,4 +47,20 @@ public static double convert(long timeMs, TimeUnit unit) {\n                 throw new IllegalStateException(\"Unknown unit: \" + unit);\n         }\n     }\n+\n+    /**\n+     * Create a set of tags using the supplied key and value pairs. The order of the tags will be kept.\n+     *\n+     * @param keyValue the key and value pairs for the tags; must be an even number\n+     * @return the map of tags that can be supplied to the {@link Metrics} methods; never null\n+     */\n+    public static Map<String, String> getTags(String... keyValue) {\n+        if ((keyValue.length % 2) != 0)\n+            throw new IllegalArgumentException(\"keyValue needs to be specified in pairs\");\n+        Map<String, String> tags = new LinkedHashMap<>();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTg3NjI5Mw=="}, "originalCommit": null, "originalPosition": 25}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMzNjI3MjgzOnYy", "diffSide": "RIGHT", "path": "clients/src/test/java/org/apache/kafka/common/metrics/internals/MetricsUtilsTest.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yOFQwNTowNDo1MFrOH7POMQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yOVQwMToyOTowNFrOH7ehCQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTg3NzQyNQ==", "bodyText": "Could you use assertThrows?", "url": "https://github.com/apache/kafka/pull/9659#discussion_r531877425", "createdAt": "2020-11-28T05:04:50Z", "author": {"login": "chia7712"}, "path": "clients/src/test/java/org/apache/kafka/common/metrics/internals/MetricsUtilsTest.java", "diffHunk": "@@ -0,0 +1,39 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements. See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License. You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.kafka.common.metrics.internals;\n+\n+import org.junit.Test;\n+\n+import java.util.Map;\n+\n+import static org.junit.Assert.assertEquals;\n+\n+public class MetricsUtilsTest {\n+\n+    @Test\n+    public void testCreatingTags() {\n+        Map<String, String> tags = MetricsUtils.getTags(\"k1\", \"v1\", \"k2\", \"v2\");\n+        assertEquals(\"v1\", tags.get(\"k1\"));\n+        assertEquals(\"v2\", tags.get(\"k2\"));\n+        assertEquals(2, tags.size());\n+    }\n+\n+    @Test(expected = IllegalArgumentException.class)\n+    public void testCreatingTagsWithOddNumberOfTags() {\n+        MetricsUtils.getTags(\"k1\", \"v1\", \"k2\", \"v2\", \"extra\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjEyODAwOQ==", "bodyText": "Done", "url": "https://github.com/apache/kafka/pull/9659#discussion_r532128009", "createdAt": "2020-11-29T01:29:04Z", "author": {"login": "ArunParthiban-ST"}, "path": "clients/src/test/java/org/apache/kafka/common/metrics/internals/MetricsUtilsTest.java", "diffHunk": "@@ -0,0 +1,39 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements. See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License. You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.kafka.common.metrics.internals;\n+\n+import org.junit.Test;\n+\n+import java.util.Map;\n+\n+import static org.junit.Assert.assertEquals;\n+\n+public class MetricsUtilsTest {\n+\n+    @Test\n+    public void testCreatingTags() {\n+        Map<String, String> tags = MetricsUtils.getTags(\"k1\", \"v1\", \"k2\", \"v2\");\n+        assertEquals(\"v1\", tags.get(\"k1\"));\n+        assertEquals(\"v2\", tags.get(\"k2\"));\n+        assertEquals(2, tags.size());\n+    }\n+\n+    @Test(expected = IllegalArgumentException.class)\n+    public void testCreatingTagsWithOddNumberOfTags() {\n+        MetricsUtils.getTags(\"k1\", \"v1\", \"k2\", \"v2\", \"extra\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTg3NzQyNQ=="}, "originalCommit": null, "originalPosition": 37}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3625, "cost": 1, "resetAt": "2021-11-12T11:18:39Z"}}}