{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE0NDc2Njg3", "number": 8629, "title": "MINOR: Log4j Improvements on Fetcher", "bodyText": "Committer Checklist (excluded from commit message)\n\n Verify design and implementation\n Verify test coverage and CI build status\n Verify documentation (including upgrade notes)", "createdAt": "2020-05-07T05:58:15Z", "url": "https://github.com/apache/kafka/pull/8629", "merged": true, "mergeCommit": {"oid": "71397adaff8fb4e9dd126c51cd38110cbd813936"}, "closed": true, "closedAt": "2020-05-07T19:03:44Z", "author": {"login": "guozhangwang"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABce2vPagH2gAyNDE0NDc2Njg3Ojg1OWUwM2MwZGIyZjlmNmY3MDk4ZThhMWJmY2E3Y2M0YWFkYjdmYTc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcfAk6PgFqTQwNzY3NzUxMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "859e03c0db2f9f6f7098e8a1bfca7cc4aadb7fa7", "author": {"user": {"login": "guozhangwang", "name": "Guozhang Wang"}}, "url": "https://github.com/apache/kafka/commit/859e03c0db2f9f6f7098e8a1bfca7cc4aadb7fa7", "committedDate": "2020-05-07T05:50:17Z", "message": "the fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "662364f34c93783cf9ef99377443c102b30afa7d", "author": {"user": {"login": "guozhangwang", "name": "Guozhang Wang"}}, "url": "https://github.com/apache/kafka/commit/662364f34c93783cf9ef99377443c102b30afa7d", "committedDate": "2020-05-07T15:56:02Z", "message": "revert"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA3NjE4ODQ3", "url": "https://github.com/apache/kafka/pull/8629#pullrequestreview-407618847", "createdAt": "2020-05-07T16:03:25Z", "commit": {"oid": "662364f34c93783cf9ef99377443c102b30afa7d"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QxNjowMzoyNVrOGSFmwQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QxNjo0MTowNlrOGSHFBg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTYxOTM5Mw==", "bodyText": "I assume this was unintentional.", "url": "https://github.com/apache/kafka/pull/8629#discussion_r421619393", "createdAt": "2020-05-07T16:03:25Z", "author": {"login": "hachikuji"}, "path": "clients/src/main/java/org/apache/kafka/clients/consumer/internals/Fetcher.java", "diffHunk": "@@ -260,7 +260,7 @@ public synchronized int sendFetches() {\n             }\n             RequestFuture<ClientResponse> future = client.send(fetchTarget, request);\n             // We add the node to the set of nodes with pending fetch requests before adding the\n-            // listener because the future may have been fulfilled on another thread (e.g. during a\n+            // listenerbecause the future may have been fulfilled on another thread (e.g. during a", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "662364f34c93783cf9ef99377443c102b30afa7d"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTY0MzUyNg==", "bodyText": "I feel logging all of the records even at TRACE level will be too much. For example, our system tests often have TRACE enabled. Huge single-line log messages are difficult to consume both visually and in systems like elastic.", "url": "https://github.com/apache/kafka/pull/8629#discussion_r421643526", "createdAt": "2020-05-07T16:41:06Z", "author": {"login": "hachikuji"}, "path": "clients/src/main/java/org/apache/kafka/clients/consumer/internals/Fetcher.java", "diffHunk": "@@ -676,13 +676,15 @@ private ListOffsetResult fetchOffsetsByTimes(Map<TopicPartition, Long> timestamp\n             if (completedFetch.nextFetchOffset == position.offset) {\n                 List<ConsumerRecord<K, V>> partRecords = completedFetch.fetchRecords(maxRecords);\n \n+                log.trace(\"Returning fetched records {} at offset {} for assigned partition {}\",\n+                        partRecords, position, completedFetch.partition);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "662364f34c93783cf9ef99377443c102b30afa7d"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eab85ef671c48ddd0aa4f2f1e4f5cfb81449b0f2", "author": {"user": {"login": "guozhangwang", "name": "Guozhang Wang"}}, "url": "https://github.com/apache/kafka/commit/eab85ef671c48ddd0aa4f2f1e4f5cfb81449b0f2", "committedDate": "2020-05-07T17:00:39Z", "message": "minor fixes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA3Njc3NTEy", "url": "https://github.com/apache/kafka/pull/8629#pullrequestreview-407677512", "createdAt": "2020-05-07T17:18:03Z", "commit": {"oid": "eab85ef671c48ddd0aa4f2f1e4f5cfb81449b0f2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1377, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}