{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc2NzUxNzUy", "number": 8133, "title": "MINOR: Fix gradle error writing test stdout", "bodyText": "Fix the following message we have been seeing in recent builds:\n\nERROR: Failed to write output for test org.apache.kafka.streams.integration\n.QueryableStateIntegrationTest.shouldBeAbleQueryStandbyStateDuringRebalance\njava.lang.NullPointerException: Cannot invoke method write() on null object\n\nCommitter Checklist (excluded from commit message)\n\n Verify design and implementation\n Verify test coverage and CI build status\n Verify documentation (including upgrade notes)", "createdAt": "2020-02-18T17:46:20Z", "url": "https://github.com/apache/kafka/pull/8133", "merged": true, "mergeCommit": {"oid": "7d6d386c4c3826c5b61d5066b10c12a6eafffe2c"}, "closed": true, "closedAt": "2020-02-26T17:10:02Z", "author": {"login": "vvcephei"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcFlkO5AH2gAyMzc2NzUxNzUyOjcwMGVkZDNhMDM0MjUwM2ZmZDdhMTQ1MzU1ZTQxZjc2Yjg4NjE5NWE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcH9jNQgFqTM2NDU5MTQyMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "700edd3a0342503ffd7a145355e41f76b886195a", "author": {"user": null}, "url": "https://github.com/apache/kafka/commit/700edd3a0342503ffd7a145355e41f76b886195a", "committedDate": "2020-02-18T17:41:46Z", "message": "MINOR: Fix gradle error writing test stdout\n\nFix the following message we have been seeing in recent builds:\n\n> ERROR: Failed to write output for test org.apache.kafka.streams.integration\n> .QueryableStateIntegrationTest.shouldBeAbleQueryStandbyStateDuringRebalance\n> java.lang.NullPointerException: Cannot invoke method write() on null object"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "11e4948d706181ef91f9834ce09f560e3988335f", "author": {"user": null}, "url": "https://github.com/apache/kafka/commit/11e4948d706181ef91f9834ce09f560e3988335f", "committedDate": "2020-02-18T17:54:33Z", "message": "update with a (probably better) strategy"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYyOTAyNTgx", "url": "https://github.com/apache/kafka/pull/8133#pullrequestreview-362902581", "createdAt": "2020-02-21T20:38:57Z", "commit": {"oid": "11e4948d706181ef91f9834ce09f560e3988335f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMVQyMDozODo1N1rOFtD7uQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMVQyMDozODo1N1rOFtD7uQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mjc5NDY4MQ==", "bodyText": "The problem with just ignoring here is that we don't really have an explanation for how this can happen. I forget the exact details of what the output was (other than note that it might be \"leftover\" from buggy test runner, and my immediate thought that some could also be from things like static initialization). If anything, we actually might want to log *more info. Aside from potential log size (and noise) I don't remember why I didn't include the toe.message in the exception handler logging below.\nHave we run with that modification to see if it's possible to tell what type of log output is getting lost? We could also change ERROR to WARNING. The main reason I wanted it at the scarier ERROR level was because it was unclear at the time just how frequent it would be, and so there was some indication in the log that some output from some test that was running before that one might have missing log data.\nWe also might not need the stack trace, which adds more noise. I think I included that so if we saw it consistently we could try to track down when this would commonly occur (e.g. if we could track it down to something like static initialization as the common cause).", "url": "https://github.com/apache/kafka/pull/8133#discussion_r382794681", "createdAt": "2020-02-21T20:38:57Z", "author": {"login": "ewencp"}, "path": "build.gradle", "diffHunk": "@@ -252,7 +252,7 @@ subprojects {\n       // code in the test (best guess is that it is tail output from last test). We won't have\n       // an output file for these, so simply ignore them. If they become critical for debugging,\n       // they can be seen with showStandardStreams.\n-      if (td.name == td.className) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "11e4948d706181ef91f9834ce09f560e3988335f"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f65bc5df51457ec36d90939d8a7cea6fa8cfc07e", "author": {"user": null}, "url": "https://github.com/apache/kafka/commit/f65bc5df51457ec36d90939d8a7cea6fa8cfc07e", "committedDate": "2020-02-25T20:11:28Z", "message": "add warning"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY0NDY0NzU4", "url": "https://github.com/apache/kafka/pull/8133#pullrequestreview-364464758", "createdAt": "2020-02-25T21:34:22Z", "commit": {"oid": "f65bc5df51457ec36d90939d8a7cea6fa8cfc07e"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQyMTozNDoyMlrOFuWA5Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQyMTozNDoyMlrOFuWA5Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDEzOTQ5Mw==", "bodyText": "Yeah, unfortunately iirc it previously looked like Gradle's implementation of this feature was just buggy so might not be completely fixable without figuring out what to fix upstream. I prefer more info as well, but since people already often have trouble finding the real source of issues in long logs, I am a bit hesitant to make them even more voluminous. I think current modification is reasonable tradeoff.", "url": "https://github.com/apache/kafka/pull/8133#discussion_r384139493", "createdAt": "2020-02-25T21:34:22Z", "author": {"login": "ewencp"}, "path": "build.gradle", "diffHunk": "@@ -252,7 +252,7 @@ subprojects {\n       // code in the test (best guess is that it is tail output from last test). We won't have\n       // an output file for these, so simply ignore them. If they become critical for debugging,\n       // they can be seen with showStandardStreams.\n-      if (td.name == td.className) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mjc5NDY4MQ=="}, "originalCommit": {"oid": "11e4948d706181ef91f9834ce09f560e3988335f"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "adb5e71a065148320ad09be18665d432dc507e9b", "author": {"user": null}, "url": "https://github.com/apache/kafka/commit/adb5e71a065148320ad09be18665d432dc507e9b", "committedDate": "2020-02-25T23:10:08Z", "message": "ignore known cause"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bc87c3339725fde732c6f261637ce87c948c679b", "author": {"user": null}, "url": "https://github.com/apache/kafka/commit/bc87c3339725fde732c6f261637ce87c948c679b", "committedDate": "2020-02-26T02:21:05Z", "message": "expect the unexpected"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY0NTkxNDIw", "url": "https://github.com/apache/kafka/pull/8133#pullrequestreview-364591420", "createdAt": "2020-02-26T02:46:13Z", "commit": {"oid": "bc87c3339725fde732c6f261637ce87c948c679b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1481, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}