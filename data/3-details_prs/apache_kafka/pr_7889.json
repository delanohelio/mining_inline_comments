{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzU4ODU0OTk3", "number": 7889, "title": "KAFKA-6614: configure internal topics with message.timestamp.type=CreateTime by default", "bodyText": "Explicitly set the message.timestamp.type to CreateTime for internal topics so that brokers using LogAppendTime won't overwrite the timestamps set by Streams. This default can still be overridden by users who do want to use LogAppendTime for internal topics.\nNote that this change will only take effect in apps that are new or have been reset, as we create topics with this configuration but don't alter the config for existing ones.", "createdAt": "2020-01-03T02:34:15Z", "url": "https://github.com/apache/kafka/pull/7889", "merged": true, "mergeCommit": {"oid": "1513c817d4437300865b06bde2ae33210ae05ff9"}, "closed": true, "closedAt": "2020-01-07T20:52:41Z", "author": {"login": "ableegoldman"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb2za24ABqjI5MjEwMTM1NjI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb34OWHgH2gAyMzU4ODU0OTk3OjBhMzYxNmIzZDNlZDZmZjgyYWI2YjdiMGJlYmI5Y2JjYTlmZDY1ODQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM4Mjg1MzEz", "url": "https://github.com/apache/kafka/pull/7889#pullrequestreview-338285313", "createdAt": "2020-01-03T21:35:37Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wM1QyMTozNTozOFrOFaJ3sQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wM1QyMTozNTozOFrOFaJ3sQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mjk2OTAwOQ==", "bodyText": "Btw: we should (as always) add tests... The test should verify that by default CreateTime is set and that a user can overwrite the config.", "url": "https://github.com/apache/kafka/pull/7889#discussion_r362969009", "createdAt": "2020-01-03T21:35:38Z", "author": {"login": "mjsax"}, "path": "streams/src/main/java/org/apache/kafka/streams/processor/internals/InternalTopicConfig.java", "diffHunk": "@@ -38,6 +39,7 @@\n \n         this.name = name;\n         this.topicConfigs = topicConfigs;\n+        this.topicConfigs.put(TopicConfig.MESSAGE_TIMESTAMP_TYPE_CONFIG, \"CreateTime\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 12}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b84e46aed97f8104f558fd2b8243af7e2003132b", "author": {"user": {"login": "ableegoldman", "name": "A. Sophie Blee-Goldman"}}, "url": "https://github.com/apache/kafka/commit/b84e46aed97f8104f558fd2b8243af7e2003132b", "committedDate": "2020-01-03T21:37:56Z", "message": "default to CreateTime for internal topics"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "b84e46aed97f8104f558fd2b8243af7e2003132b", "author": {"user": {"login": "ableegoldman", "name": "A. Sophie Blee-Goldman"}}, "url": "https://github.com/apache/kafka/commit/b84e46aed97f8104f558fd2b8243af7e2003132b", "committedDate": "2020-01-03T21:37:56Z", "message": "default to CreateTime for internal topics"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "de17aeef2bd943a239f334edbf93f59c7ea84f85", "author": {"user": {"login": "ableegoldman", "name": "A. Sophie Blee-Goldman"}}, "url": "https://github.com/apache/kafka/commit/de17aeef2bd943a239f334edbf93f59c7ea84f85", "committedDate": "2020-01-03T22:12:20Z", "message": "fix broken tests and add new ones"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a4964a6862cf780576aa1585c92a241283f84dba", "author": {"user": {"login": "ableegoldman", "name": "A. Sophie Blee-Goldman"}}, "url": "https://github.com/apache/kafka/commit/a4964a6862cf780576aa1585c92a241283f84dba", "committedDate": "2020-01-03T22:17:12Z", "message": "add overrides"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM4OTk4MjQy", "url": "https://github.com/apache/kafka/pull/7889#pullrequestreview-338998242", "createdAt": "2020-01-07T02:08:47Z", "commit": {"oid": "a4964a6862cf780576aa1585c92a241283f84dba"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QwMjowODo0N1rOFauQXw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QwMjowODo0N1rOFauQXw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzU2NTE1MQ==", "bodyText": "Seems we should test this for all 3 types of topics?", "url": "https://github.com/apache/kafka/pull/7889#discussion_r363565151", "createdAt": "2020-01-07T02:08:47Z", "author": {"login": "mjsax"}, "path": "streams/src/test/java/org/apache/kafka/streams/processor/internals/InternalTopicConfigTest.java", "diffHunk": "@@ -30,39 +30,65 @@\n \n     @Test(expected = NullPointerException.class)\n     public void shouldThrowIfNameIsNull() {\n-        new RepartitionTopicConfig(null, Collections.<String, String>emptyMap());\n+        new RepartitionTopicConfig(null, Collections.emptyMap());\n     }\n \n     @Test(expected = InvalidTopicException.class)\n     public void shouldThrowIfNameIsInvalid() {\n-        new RepartitionTopicConfig(\"foo bar baz\", Collections.<String, String>emptyMap());\n+        new RepartitionTopicConfig(\"foo bar baz\", Collections.emptyMap());\n+    }\n+\n+    @Test\n+    public void shouldSetCreateTimeByDefault() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a4964a6862cf780576aa1585c92a241283f84dba"}, "originalPosition": 15}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0a3616b3d3ed6ff82ab6b7b0bebb9cbca9fd6584", "author": {"user": {"login": "ableegoldman", "name": "A. Sophie Blee-Goldman"}}, "url": "https://github.com/apache/kafka/commit/0a3616b3d3ed6ff82ab6b7b0bebb9cbca9fd6584", "committedDate": "2020-01-07T03:31:07Z", "message": "add test for all internal topic types"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2167, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}