{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA2MjkzMjE0", "number": 8522, "title": "KAFKA-9868: Reduce transaction log partitions for embed broker", "bodyText": "This PR tries to fix the flaky EOSUncleanShutdownIntegrationTest.shouldWorkWithUncleanShutdownWipeOutStateStore by making the bootstrapping of the test to be less painful with fewer number of partitions of txn log.\nThe integration test time on local also reduced one second.\nCommitter Checklist (excluded from commit message)\n\n Verify design and implementation\n Verify test coverage and CI build status\n Verify documentation (including upgrade notes)", "createdAt": "2020-04-20T20:45:45Z", "url": "https://github.com/apache/kafka/pull/8522", "merged": true, "mergeCommit": {"oid": "60b912cd160992ea2d391e6d03fb8dc57b8e1d1c"}, "closed": true, "closedAt": "2020-04-21T02:50:43Z", "author": {"login": "abbccdda"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcZlVw_gH2gAyNDA2MjkzMjE0OjlhYzM0MjVmNjU3ZDM1Mjk4OWViMGNkODk5NGQ5YTM2ZmM4N2ZkZWE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcZmYVvAFqTM5Njg0MjE1Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "9ac3425f657d352989eb0cd8994d9a36fc87fdea", "author": {"user": {"login": "abbccdda", "name": "Boyang Chen"}}, "url": "https://github.com/apache/kafka/commit/9ac3425f657d352989eb0cd8994d9a36fc87fdea", "committedDate": "2020-04-20T20:44:27Z", "message": "Reduce txn log partitions for embed broker"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2Nzk5NDM4", "url": "https://github.com/apache/kafka/pull/8522#pullrequestreview-396799438", "createdAt": "2020-04-20T20:46:15Z", "commit": {"oid": "9ac3425f657d352989eb0cd8994d9a36fc87fdea"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQyMDo0NjoxNVrOGIm-NQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQyMDo0NjoxNVrOGIm-NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTY4MDMwOQ==", "bodyText": "This is the actual fix, other parts are just side cleanups.", "url": "https://github.com/apache/kafka/pull/8522#discussion_r411680309", "createdAt": "2020-04-20T20:46:15Z", "author": {"login": "abbccdda"}, "path": "streams/src/test/java/org/apache/kafka/streams/integration/utils/EmbeddedKafkaCluster.java", "diffHunk": "@@ -98,6 +98,7 @@ public void start() throws IOException, InterruptedException {\n         putIfAbsent(brokerConfig, KafkaConfig$.MODULE$.GroupInitialRebalanceDelayMsProp(), 0);\n         putIfAbsent(brokerConfig, KafkaConfig$.MODULE$.OffsetsTopicReplicationFactorProp(), (short) 1);\n         putIfAbsent(brokerConfig, KafkaConfig$.MODULE$.OffsetsTopicPartitionsProp(), 5);\n+        putIfAbsent(brokerConfig, KafkaConfig$.MODULE$.TransactionsTopicPartitionsProp(), 5);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9ac3425f657d352989eb0cd8994d9a36fc87fdea"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2ODQxMzc5", "url": "https://github.com/apache/kafka/pull/8522#pullrequestreview-396841379", "createdAt": "2020-04-20T21:55:44Z", "commit": {"oid": "9ac3425f657d352989eb0cd8994d9a36fc87fdea"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2ODQyMTU2", "url": "https://github.com/apache/kafka/pull/8522#pullrequestreview-396842156", "createdAt": "2020-04-20T21:57:09Z", "commit": {"oid": "9ac3425f657d352989eb0cd8994d9a36fc87fdea"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQyMTo1NzowOVrOGIpX3w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQyMTo1NzowOVrOGIpX3w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTcxOTY0Nw==", "bodyText": "If we would have written throws Exception from the beginning on, this change would not be necessary... (Just to back up my preferred coding stile to only use throws Exception in tests.)", "url": "https://github.com/apache/kafka/pull/8522#discussion_r411719647", "createdAt": "2020-04-20T21:57:09Z", "author": {"login": "mjsax"}, "path": "streams/src/test/java/org/apache/kafka/streams/integration/utils/EmbeddedKafkaCluster.java", "diffHunk": "@@ -84,7 +84,7 @@ public EmbeddedKafkaCluster(final int numBrokers,\n     /**\n      * Creates and starts a Kafka cluster.\n      */\n-    public void start() throws IOException, InterruptedException {\n+    public void start() throws IOException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9ac3425f657d352989eb0cd8994d9a36fc87fdea"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1605, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}