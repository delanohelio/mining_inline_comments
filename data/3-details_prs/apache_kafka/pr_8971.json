{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQyOTU1Mzkx", "number": 8971, "title": "MINOR: prune the metadata upgrade test matrix", "bodyText": "Most of the values in the metadata upgrade test matrix are just testing\nthe upgrade/downgrade path between two previous releases. This is\nunnecessary. We run the tests for all supported branches, so what we\nshould test is the up-/down-gradability of released versions with respect\nto the current branch.\nCommitter Checklist (excluded from commit message)\n\n Verify design and implementation\n Verify test coverage and CI build status\n Verify documentation (including upgrade notes)", "createdAt": "2020-07-01T19:55:58Z", "url": "https://github.com/apache/kafka/pull/8971", "merged": true, "mergeCommit": {"oid": "34f749db307c2886af82b31aec4c9a21588e097d"}, "closed": true, "closedAt": "2020-07-06T23:52:52Z", "author": {"login": "vvcephei"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcwukjEAH2gAyNDQyOTU1MzkxOjlkMWY2MzhmYWM2Y2VkYzllOTVjZTUyZDQ5MGE4MjNjYWNjMGVjNzI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcxYY1SgFqTQ0MjUzOTI2Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "9d1f638fac6cedc9e95ce52d490a823cacc0ec72", "author": {"user": null}, "url": "https://github.com/apache/kafka/commit/9d1f638fac6cedc9e95ce52d490a823cacc0ec72", "committedDate": "2020-07-01T18:30:00Z", "message": "MINOR: prune the metadata upgrade test matrix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cc267912abe5fe304e9d5e00e1964dc31fdeb244", "author": {"user": {"login": "vvcephei", "name": "John Roesler"}}, "url": "https://github.com/apache/kafka/commit/cc267912abe5fe304e9d5e00e1964dc31fdeb244", "committedDate": "2020-07-02T23:16:56Z", "message": "Merge branch 'trunk' into minor-prune-meta-upgrade-test-matrix"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyNTM5MjY3", "url": "https://github.com/apache/kafka/pull/8971#pullrequestreview-442539267", "createdAt": "2020-07-03T19:11:24Z", "commit": {"oid": "cc267912abe5fe304e9d5e00e1964dc31fdeb244"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QxOToxMToyNVrOGs2oMQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QxOToxMToyNVrOGs2oMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTY4NTU1Mw==", "bodyText": "I was originally thinking that streams_application_upgrade_test.py and streams_upgrade_test.py can be re-consolidated so that the latter would be for broker-clients compatibility (including rolling upgrade the brokers), and would for now be ignored. While the former would be used for upgrading / downgrading clients for different paths (one rolling bounce including version probing, two rolling bounces, full shutdown and restart). In that case, this test and the test_version_probing_upgrade below could be moved into the other file. WDYT?", "url": "https://github.com/apache/kafka/pull/8971#discussion_r449685553", "createdAt": "2020-07-03T19:11:25Z", "author": {"login": "guozhangwang"}, "path": "tests/kafkatest/tests/streams/streams_upgrade_test.py", "diffHunk": "@@ -189,9 +185,8 @@ def test_upgrade_downgrade_brokers(self, from_version, to_version):\n         processor.stop()\n         processor.node.account.ssh_capture(\"grep SMOKE-TEST-CLIENT-CLOSED %s\" % processor.STDOUT_FILE, allow_fail=False)\n \n-    @matrix(from_version=metadata_1_versions, to_version=backward_compatible_metadata_2_versions)\n-    @matrix(from_version=metadata_1_versions, to_version=metadata_3_or_higher_versions)\n-    @matrix(from_version=metadata_2_versions, to_version=metadata_3_or_higher_versions)\n+    @matrix(from_version=metadata_1_versions, to_version=[str(DEV_VERSION)])\n+    @matrix(from_version=metadata_2_versions, to_version=[str(DEV_VERSION)])", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cc267912abe5fe304e9d5e00e1964dc31fdeb244"}, "originalPosition": 19}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1136, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}