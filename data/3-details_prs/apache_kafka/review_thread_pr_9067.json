{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU1OTQxNzAy", "number": 9067, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNFQyMDo1Mjo1N1rOER9ntg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwODowNDoyOFrOESR1_A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg3MjcwODM4OnYy", "diffSide": "RIGHT", "path": "checkstyle/checkstyle.xml", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNFQyMDo1Mjo1N1rOG29cSA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNFQyMjo1OTo1OFrOG2_2Dg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDI4Mjk1Mg==", "bodyText": "Nice one!", "url": "https://github.com/apache/kafka/pull/9067#discussion_r460282952", "createdAt": "2020-07-24T20:52:57Z", "author": {"login": "mjsax"}, "path": "checkstyle/checkstyle.xml", "diffHunk": "@@ -103,6 +103,13 @@\n       <property name=\"ignoreComments\" value=\"true\"/>\n     </module>\n \n+    <module name=\"Regexp\">\n+      <property name=\"format\" value=\"System\\.exit\"/>\n+      <property name=\"illegalPattern\" value=\"true\"/>\n+      <property name=\"ignoreComments\" value=\"true\"/>\n+      <property name=\"message\" value=\"'System.exit': Should not directly call System.exit, but Exit.exit instead.\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDMyMjMxOA==", "bodyText": "Thank you for this!", "url": "https://github.com/apache/kafka/pull/9067#discussion_r460322318", "createdAt": "2020-07-24T22:59:58Z", "author": {"login": "lbradstreet"}, "path": "checkstyle/checkstyle.xml", "diffHunk": "@@ -103,6 +103,13 @@\n       <property name=\"ignoreComments\" value=\"true\"/>\n     </module>\n \n+    <module name=\"Regexp\">\n+      <property name=\"format\" value=\"System\\.exit\"/>\n+      <property name=\"illegalPattern\" value=\"true\"/>\n+      <property name=\"ignoreComments\" value=\"true\"/>\n+      <property name=\"message\" value=\"'System.exit': Should not directly call System.exit, but Exit.exit instead.\"/>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDI4Mjk1Mg=="}, "originalCommit": null, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg3NjAxNzc4OnYy", "diffSide": "RIGHT", "path": "checkstyle/suppressions.xml", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwODowMzoxN1rOG3XwjQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QxNToxMzo0MlrOG3nE3w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDcxNDEyNQ==", "bodyText": "It seems really brittle to have line numbers in the suppression. Could we:\n\nRemove the lines part.\nGive a name to the Regexp so that we only exclude the one related to System.exit (not sure if this is possible)", "url": "https://github.com/apache/kafka/pull/9067#discussion_r460714125", "createdAt": "2020-07-27T08:03:17Z", "author": {"login": "ijuma"}, "path": "checkstyle/suppressions.xml", "diffHunk": "@@ -17,8 +17,14 @@\n               files=\"(ApiMessageType).java|MessageDataGenerator.java\"/>\n     <suppress checks=\"MethodLength\"\n               files=\"MessageDataGenerator.java\"/>\n+    <suppress checks=\"Regexp\"\n+              files=\"MessageGenerator.java\"\n+              lines=\"285,288\"/>\n \n     <!-- Clients -->\n+    <suppress checks=\"Regexp\"\n+              files=\"Exit.java\"\n+              lines=\"43\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDk2NTA4Nw==", "bodyText": "I agree, @ijuma , but this is the best I could come up with. Apparently, it's not possible to give it a name, so the only alternative would be to suppress all Regexp checks for this file.", "url": "https://github.com/apache/kafka/pull/9067#discussion_r460965087", "createdAt": "2020-07-27T15:13:42Z", "author": {"login": "vvcephei"}, "path": "checkstyle/suppressions.xml", "diffHunk": "@@ -17,8 +17,14 @@\n               files=\"(ApiMessageType).java|MessageDataGenerator.java\"/>\n     <suppress checks=\"MethodLength\"\n               files=\"MessageDataGenerator.java\"/>\n+    <suppress checks=\"Regexp\"\n+              files=\"MessageGenerator.java\"\n+              lines=\"285,288\"/>\n \n     <!-- Clients -->\n+    <suppress checks=\"Regexp\"\n+              files=\"Exit.java\"\n+              lines=\"43\"/>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDcxNDEyNQ=="}, "originalCommit": null, "originalPosition": 11}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg3NjAyMDQ0OnYy", "diffSide": "RIGHT", "path": "streams/examples/src/main/java/org/apache/kafka/streams/examples/wordcount/WordCountTransformerDemo.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwODowNDowNlrOG3XyMw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QxNToxNjozOFrOG3nM6Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDcxNDU0Nw==", "bodyText": "I think it was intentional not to use an internal class in demos that others may copy.", "url": "https://github.com/apache/kafka/pull/9067#discussion_r460714547", "createdAt": "2020-07-27T08:04:06Z", "author": {"login": "ijuma"}, "path": "streams/examples/src/main/java/org/apache/kafka/streams/examples/wordcount/WordCountTransformerDemo.java", "diffHunk": "@@ -153,8 +154,8 @@ public void run() {\n             streams.start();\n             latch.await();\n         } catch (final Throwable e) {\n-            System.exit(1);\n+            Exit.exit(1);\n         }\n-        System.exit(0);\n+        Exit.exit(0);", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDk2NzE0NQ==", "bodyText": "Ok, I can back this change out of the demos. I'd taken an \"agricultural fire\" approach to this, since it seemed like the error was coming from a source I couldn't identify. Namely, the reported error is from the \"unitTest\" task, whereas the only test that would have called \"Sytem.exit\" I could find was in the JUnit IntegrationTest category.", "url": "https://github.com/apache/kafka/pull/9067#discussion_r460967145", "createdAt": "2020-07-27T15:16:38Z", "author": {"login": "vvcephei"}, "path": "streams/examples/src/main/java/org/apache/kafka/streams/examples/wordcount/WordCountTransformerDemo.java", "diffHunk": "@@ -153,8 +154,8 @@ public void run() {\n             streams.start();\n             latch.await();\n         } catch (final Throwable e) {\n-            System.exit(1);\n+            Exit.exit(1);\n         }\n-        System.exit(0);\n+        Exit.exit(0);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDcxNDU0Nw=="}, "originalCommit": null, "originalPosition": 16}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg3NjAyMTcyOnYy", "diffSide": "RIGHT", "path": "tools/src/main/java/org/apache/kafka/tools/VerifiableProducer.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwODowNDoyOFrOG3Xy6w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QxNToxNDowOVrOG3nGFQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDcxNDczMQ==", "bodyText": "Did you read the comment immediately above this line? Also applies to VerifiableConsumer.", "url": "https://github.com/apache/kafka/pull/9067#discussion_r460714731", "createdAt": "2020-07-27T08:04:28Z", "author": {"login": "ijuma"}, "path": "tools/src/main/java/org/apache/kafka/tools/VerifiableProducer.java", "diffHunk": "@@ -241,7 +240,7 @@ public static VerifiableProducer createFromArgs(ArgumentParser parser, String[]\n         } else {\n             parser.printHelp();\n             // Can't use `Exit.exit` here because it didn't exist until 0.11.0.0.\n-            System.exit(0);\n+            Exit.exit(0);", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDk2NTM5Nw==", "bodyText": "Haha, no I didn't. Sorry about that.", "url": "https://github.com/apache/kafka/pull/9067#discussion_r460965397", "createdAt": "2020-07-27T15:14:09Z", "author": {"login": "vvcephei"}, "path": "tools/src/main/java/org/apache/kafka/tools/VerifiableProducer.java", "diffHunk": "@@ -241,7 +240,7 @@ public static VerifiableProducer createFromArgs(ArgumentParser parser, String[]\n         } else {\n             parser.printHelp();\n             // Can't use `Exit.exit` here because it didn't exist until 0.11.0.0.\n-            System.exit(0);\n+            Exit.exit(0);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDcxNDczMQ=="}, "originalCommit": null, "originalPosition": 27}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2010, "cost": 1, "resetAt": "2021-11-12T11:18:39Z"}}}