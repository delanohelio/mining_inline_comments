{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMyMzQ0NDA2", "number": 8845, "title": "KAFKA-10126:Add a warning message for ConsumerPerformance", "bodyText": "ConsumerPerformance has not implemented options numThreadsOpt and numFetchersOpt as so far. This patch adds a warning message when used these options according to comments from https://issues.apache.org/jira/browse/KAFKA-10126 . Once these two options are implemented, this warning message should be removed.\nChange-Id: Iae34b11210a361373eda42274ebfc153b636a989\nSigned-off-by: Jiamei Xie jiamei.xie@arm.com\nMore detailed description of your change,\nif necessary. The PR title and PR message become\nthe squashed commit message, so use a separate\ncomment to ping reviewers.\nSummary of testing strategy (including rationale)\nfor the feature or bug fix. Unit and/or integration\ntests are expected for any behaviour change and\nsystem tests should be considered for larger changes.\nCommitter Checklist (excluded from commit message)\n\n Verify design and implementation\n Verify test coverage and CI build status\n Verify documentation (including upgrade notes)", "createdAt": "2020-06-10T09:57:30Z", "url": "https://github.com/apache/kafka/pull/8845", "merged": true, "mergeCommit": {"oid": "e70bc044481e98508a32f2f73f9f9bc89b0997eb"}, "closed": true, "closedAt": "2020-06-23T22:10:02Z", "author": {"login": "jiameixie"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcp2nSnAH2gAyNDMyMzQ0NDA2OjM3OGUzZWYxYWU1ZjgyMDlhOGI0ZmVmZjM5MWUxZGY2MzMwNTg5NDA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcrkyEnAFqTQzMDg4Mjc0NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "378e3ef1ae5f8209a8b4feff391e1df633058940", "author": {"user": {"login": "jiameixie", "name": null}}, "url": "https://github.com/apache/kafka/commit/378e3ef1ae5f8209a8b4feff391e1df633058940", "committedDate": "2020-06-10T09:54:46Z", "message": "KAFKA-10126:Warn unused ConsumerPerformance optons\n\nOption numThreadsOpt and numFetchersOpt are unused in ConsumerPerformance.\nAccording to comments from https://issues.apache.org/jira/browse/KAFKA-10126,\nadd a warning when invoking these options which should be recognized\n\nChange-Id: Iae34b11210a361373eda42274ebfc153b636a989\nSigned-off-by: Jiamei Xie <jiamei.xie@arm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI4MjQ1Mjgx", "url": "https://github.com/apache/kafka/pull/8845#pullrequestreview-428245281", "createdAt": "2020-06-10T16:46:18Z", "commit": {"oid": "378e3ef1ae5f8209a8b4feff391e1df633058940"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQxNjo0NjoxOFrOGh9trA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQxNjo0NjoxOFrOGh9trA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODI2NzMwOA==", "bodyText": "https://github.com/apache/kafka/blob/trunk/core/src/main/scala/kafka/tools/GetOffsetShell.scala#L55 had similar issue and we can follow its style. i.e DEPRECATED AND IGNORED:", "url": "https://github.com/apache/kafka/pull/8845#discussion_r438267308", "createdAt": "2020-06-10T16:46:18Z", "author": {"login": "chia7712"}, "path": "core/src/main/scala/kafka/tools/ConsumerPerformance.scala", "diffHunk": "@@ -232,12 +232,12 @@ object ConsumerPerformance extends LazyLogging {\n       .describedAs(\"size\")\n       .ofType(classOf[java.lang.Integer])\n       .defaultsTo(2 * 1024 * 1024)\n-    val numThreadsOpt = parser.accepts(\"threads\", \"Number of processing threads.\")\n+    val numThreadsOpt = parser.accepts(\"threads\", \"Number of processing threads. It has not been implemented.\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "378e3ef1ae5f8209a8b4feff391e1df633058940"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI4MzE0MjM1", "url": "https://github.com/apache/kafka/pull/8845#pullrequestreview-428314235", "createdAt": "2020-06-10T18:17:21Z", "commit": {"oid": "378e3ef1ae5f8209a8b4feff391e1df633058940"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQxODoxNzoyMlrOGiA-9A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQxODoxNzozMFrOGiA_TA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODMyMDg4NA==", "bodyText": "has not been implemented -> have been deprecated", "url": "https://github.com/apache/kafka/pull/8845#discussion_r438320884", "createdAt": "2020-06-10T18:17:22Z", "author": {"login": "abbccdda"}, "path": "core/src/main/scala/kafka/tools/ConsumerPerformance.scala", "diffHunk": "@@ -256,6 +256,10 @@ object ConsumerPerformance extends LazyLogging {\n       .defaultsTo(10000)\n \n     options = parser.parse(args: _*)\n+\n+    if(options.has(numThreadsOpt) || options.has(numFetchersOpt))\n+      println(\"WARNING: option threads and num-fetch-threads has not been implemented.\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "378e3ef1ae5f8209a8b4feff391e1df633058940"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODMyMDk3Mg==", "bodyText": "+1", "url": "https://github.com/apache/kafka/pull/8845#discussion_r438320972", "createdAt": "2020-06-10T18:17:30Z", "author": {"login": "abbccdda"}, "path": "core/src/main/scala/kafka/tools/ConsumerPerformance.scala", "diffHunk": "@@ -232,12 +232,12 @@ object ConsumerPerformance extends LazyLogging {\n       .describedAs(\"size\")\n       .ofType(classOf[java.lang.Integer])\n       .defaultsTo(2 * 1024 * 1024)\n-    val numThreadsOpt = parser.accepts(\"threads\", \"Number of processing threads.\")\n+    val numThreadsOpt = parser.accepts(\"threads\", \"Number of processing threads. It has not been implemented.\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODI2NzMwOA=="}, "originalCommit": {"oid": "378e3ef1ae5f8209a8b4feff391e1df633058940"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7711fa83c856a55b97efea40232ada34c0496f22", "author": {"user": {"login": "jiameixie", "name": null}}, "url": "https://github.com/apache/kafka/commit/7711fa83c856a55b97efea40232ada34c0496f22", "committedDate": "2020-06-11T01:59:10Z", "message": "KAFKA-10126:Add a warning message for ConsumerPerformance\n\nConsumerPerformance has not implemented options numThreadsOpt and numFetchersOpt as so far.\nThis patch adds a warning message when used these options according to comments from\nhttps://issues.apache.org/jira/browse/KAFKA-10126 . Once these two options are implemented,\nthis warning message should be removed.\n\nSigned-off-by: Jiamei Xie <jiamei.xie@arm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMwMjU5NTk0", "url": "https://github.com/apache/kafka/pull/8845#pullrequestreview-430259594", "createdAt": "2020-06-14T23:15:32Z", "commit": {"oid": "7711fa83c856a55b97efea40232ada34c0496f22"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNFQyMzoxNTozM1rOGjf_AA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNFQyMzoxNTozM1rOGjf_AA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTg3NzM3Ng==", "bodyText": "nit: add square brackets to the options, like:\n\"WARNING: option [threads] and [num-fetch-threads] have been deprecated and will be ignored by the test\"", "url": "https://github.com/apache/kafka/pull/8845#discussion_r439877376", "createdAt": "2020-06-14T23:15:33Z", "author": {"login": "abbccdda"}, "path": "core/src/main/scala/kafka/tools/ConsumerPerformance.scala", "diffHunk": "@@ -256,6 +256,10 @@ object ConsumerPerformance extends LazyLogging {\n       .defaultsTo(10000)\n \n     options = parser.parse(args: _*)\n+\n+    if(options.has(numThreadsOpt) || options.has(numFetchersOpt))\n+      println(\"WARNING: option threads and num-fetch-threads have been deprecated and ignored\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7711fa83c856a55b97efea40232ada34c0496f22"}, "originalPosition": 21}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0dcb06df7a41b9f82f1e4d197454755766bf7fe8", "author": {"user": {"login": "jiameixie", "name": null}}, "url": "https://github.com/apache/kafka/commit/0dcb06df7a41b9f82f1e4d197454755766bf7fe8", "committedDate": "2020-06-15T02:14:31Z", "message": "Change warning message\n\nSigned-off-by: Jiamei Xie <jiamei.xie@arm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMwNjc5NDgy", "url": "https://github.com/apache/kafka/pull/8845#pullrequestreview-430679482", "createdAt": "2020-06-15T14:08:44Z", "commit": {"oid": "0dcb06df7a41b9f82f1e4d197454755766bf7fe8"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMwODgyNzQ1", "url": "https://github.com/apache/kafka/pull/8845#pullrequestreview-430882745", "createdAt": "2020-06-15T18:16:06Z", "commit": {"oid": "0dcb06df7a41b9f82f1e4d197454755766bf7fe8"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 571, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}