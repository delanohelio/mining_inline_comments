{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU0ODQ1NTQw", "number": 9051, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQwNzoxMDoxOFrOEQ6wxA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxMDo0Mjo0OFrOEQ_ckQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg2MTc1NDI4OnYy", "diffSide": "RIGHT", "path": "core/src/test/scala/integration/kafka/server/DynamicBrokerReconfigurationTest.scala", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQwNzoxMDoxOFrOG1VjuQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QwNzowNjoxM1rOG1-hkQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODU4MDkyMQ==", "bodyText": "Shouldn't we also waitForConfigOnServer after the first alteration of the config?", "url": "https://github.com/apache/kafka/pull/9051#discussion_r458580921", "createdAt": "2020-07-22T07:10:18Z", "author": {"login": "dajac"}, "path": "core/src/test/scala/integration/kafka/server/DynamicBrokerReconfigurationTest.scala", "diffHunk": "@@ -775,6 +775,24 @@ class DynamicBrokerReconfigurationTest extends ZooKeeperTestHarness with SaslSet\n     verifyMarkPartitionsForTruncation()\n   }\n \n+  @Test\n+  def testDefaultValueRestoredAfterDeleteDynamicConfig(): Unit = {\n+    val newProps = new Properties\n+    newProps.put(KafkaConfig.LogRetentionTimeMillisProp, \"100000\")\n+    newProps.put(KafkaConfig.LogFlushIntervalMsProp, \"10000\")\n+    TestUtils.incrementalAlterConfigs(servers, adminClients.head, newProps, perBrokerConfig = false).all.get", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "88226a4d2989c7e23243a120a93d9f5f80d09760"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODYxMzk4MA==", "bodyText": "Thanks for the comments. We could add but not necessary since we care about the fact that the value for broker-default level should be overwritten by that for broker-level. Does it make sense?", "url": "https://github.com/apache/kafka/pull/9051#discussion_r458613980", "createdAt": "2020-07-22T08:11:00Z", "author": {"login": "huxihx"}, "path": "core/src/test/scala/integration/kafka/server/DynamicBrokerReconfigurationTest.scala", "diffHunk": "@@ -775,6 +775,24 @@ class DynamicBrokerReconfigurationTest extends ZooKeeperTestHarness with SaslSet\n     verifyMarkPartitionsForTruncation()\n   }\n \n+  @Test\n+  def testDefaultValueRestoredAfterDeleteDynamicConfig(): Unit = {\n+    val newProps = new Properties\n+    newProps.put(KafkaConfig.LogRetentionTimeMillisProp, \"100000\")\n+    newProps.put(KafkaConfig.LogFlushIntervalMsProp, \"10000\")\n+    TestUtils.incrementalAlterConfigs(servers, adminClients.head, newProps, perBrokerConfig = false).all.get", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODU4MDkyMQ=="}, "originalCommit": {"oid": "88226a4d2989c7e23243a120a93d9f5f80d09760"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTI1MjExMw==", "bodyText": "That makes sense, thanks.", "url": "https://github.com/apache/kafka/pull/9051#discussion_r459252113", "createdAt": "2020-07-23T07:06:13Z", "author": {"login": "dajac"}, "path": "core/src/test/scala/integration/kafka/server/DynamicBrokerReconfigurationTest.scala", "diffHunk": "@@ -775,6 +775,24 @@ class DynamicBrokerReconfigurationTest extends ZooKeeperTestHarness with SaslSet\n     verifyMarkPartitionsForTruncation()\n   }\n \n+  @Test\n+  def testDefaultValueRestoredAfterDeleteDynamicConfig(): Unit = {\n+    val newProps = new Properties\n+    newProps.put(KafkaConfig.LogRetentionTimeMillisProp, \"100000\")\n+    newProps.put(KafkaConfig.LogFlushIntervalMsProp, \"10000\")\n+    TestUtils.incrementalAlterConfigs(servers, adminClients.head, newProps, perBrokerConfig = false).all.get", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODU4MDkyMQ=="}, "originalCommit": {"oid": "88226a4d2989c7e23243a120a93d9f5f80d09760"}, "originalPosition": 9}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg2MjUyMTc3OnYy", "diffSide": "RIGHT", "path": "core/src/test/scala/integration/kafka/server/DynamicBrokerReconfigurationTest.scala", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxMDo0Mjo0OFrOG1c6WQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxMDo0Mjo0OFrOG1c6WQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODcwMTQwMQ==", "bodyText": "Can we move this into DynamicBrokerReconfigurationTest.testDefaultTopicConfig() and also verify that configs of existing topics have been updated? Or add a topic in this test to verify.", "url": "https://github.com/apache/kafka/pull/9051#discussion_r458701401", "createdAt": "2020-07-22T10:42:48Z", "author": {"login": "rajinisivaram"}, "path": "core/src/test/scala/integration/kafka/server/DynamicBrokerReconfigurationTest.scala", "diffHunk": "@@ -775,6 +775,24 @@ class DynamicBrokerReconfigurationTest extends ZooKeeperTestHarness with SaslSet\n     verifyMarkPartitionsForTruncation()\n   }\n \n+  @Test\n+  def testDefaultValueRestoredAfterDeleteDynamicConfig(): Unit = {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "88226a4d2989c7e23243a120a93d9f5f80d09760"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2296, "cost": 1, "resetAt": "2021-11-12T11:18:39Z"}}}