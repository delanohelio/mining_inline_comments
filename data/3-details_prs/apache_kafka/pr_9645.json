{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI1OTQ4NzQw", "number": 9645, "title": "MINOR: Update build and test dependencies", "bodyText": "The spotbugs upgrade means we can re-enable\nRCN_REDUNDANT_NULLCHECK_OF_NONNULL_VALUE and RCN_REDUNDANT_NULLCHECK_WOULD_HAVE_BEEN_A_NPE.\nThese uncovered one bug, one unnecessary null check and one\nfalse positive. Addressed them all, including a test for the bug.\n\ngradle (6.7.0 -> 6.7.1): minor fixes.\ngradle versions plugin (0.29.0 -> 0.36.0): minor fixes.\ngrgit (4.0.2 -> 4.1.0): a few small fixes and dependency bumps.\nowasp dependency checker plugin (5.3.2.1 -> 6.0.3): improved db\nschema, data and several fixes.\nscoverage plugin (4.0.2 -> 5.0.0): support Scala 2.13.\nshadow plugin (6.0.0 -> 6.1.0): require Java 8, support for Java 16.\nspotbugs plugin (4.4.4 -> 4.6.0): support SARIF reporting standard.\nspotbugs (4.0.6 -> 4.1.4): support for Java 16 and various fixes including\ntry with resources false positive.\nspotless plugin (5.1.0 -> 5.8.2): minor fixes.\ntest retry plugin (1.1.6 -> 1.1.9): newer gradle and java version compatibility\nfixes.\nmockito (3.5.7 -> 3.6.0): minor fixes.\npowermock (2.0.7 -> 2.0.9): minor fixes.\n\nRelease notes links:\n\nhttps://docs.gradle.org/6.7.1/release-notes.html\nhttps://github.com/spotbugs/spotbugs/blob/4.1.4/CHANGELOG.md\nhttps://github.com/scoverage/gradle-scoverage/releases/tag/5.0.0\nhttps://github.com/johnrengelman/shadow/releases/tag/6.1.0\nhttps://github.com/spotbugs/spotbugs-gradle-plugin/releases/tag/4.6.0\nhttps://github.com/spotbugs/spotbugs-gradle-plugin/releases/tag/4.6.0\nhttps://github.com/spotbugs/spotbugs-gradle-plugin/releases/tag/4.5.0\nhttps://github.com/ben-manes/gradle-versions-plugin/releases\nhttps://github.com/ajoberstar/grgit/releases/tag/4.1.0\nhttps://github.com/jeremylong/DependencyCheck/blob/main/RELEASE_NOTES.md#version-603-2020-11-03\nhttps://github.com/powermock/powermock/releases/tag/powermock-2.0.8\nhttps://github.com/powermock/powermock/releases/tag/powermock-2.0.9\nhttps://github.com/mockito/mockito/blob/v3.6.0/doc/release-notes/official.md\nhttps://github.com/gradle/test-retry-gradle-plugin/releases\nhttps://github.com/diffplug/spotless/blob/main/plugin-gradle/CHANGES.md\n\nCommitter Checklist (excluded from commit message)\n\n Verify design and implementation\n Verify test coverage and CI build status\n Verify documentation (including upgrade notes)", "createdAt": "2020-11-23T19:32:03Z", "url": "https://github.com/apache/kafka/pull/9645", "merged": true, "mergeCommit": {"oid": "a5986bd32df94465b6202db02a52580aec0f348d"}, "closed": true, "closedAt": "2020-11-24T14:20:06Z", "author": {"login": "ijuma"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdfXQz8AH2gAyNTI1OTQ4NzQwOjEyYmI4MTkxYWYzZWQ5MTBhN2NmZGI3OGIwNDZmN2QzODYyNWIyZjI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdficMHgH2gAyNTI1OTQ4NzQwOmQxODc3NTZjN2ZmN2Y4NDMwZWIyY2YxMGNlNzMxZjkwMTVkMmJmZDc=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "12bb8191af3ed910a7cfdb78b046f7d38625b2f2", "author": {"user": {"login": "ijuma", "name": "Ismael Juma"}}, "url": "https://github.com/apache/kafka/commit/12bb8191af3ed910a7cfdb78b046f7d38625b2f2", "committedDate": "2020-11-23T15:55:04Z", "message": "MINOR: Update build and test dependencies"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bdb712096d6dc72b6d75916bcfbff89e56c39cba", "author": {"user": {"login": "ijuma", "name": "Ismael Juma"}}, "url": "https://github.com/apache/kafka/commit/bdb712096d6dc72b6d75916bcfbff89e56c39cba", "committedDate": "2020-11-23T17:46:12Z", "message": "Fix bug in ScramMechanism.fromMechanismName where it didn't handle an unknown mechanism name correctly"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e35c45f684a0b6d3b0ecc1bfea22ff419db8d0d6", "author": {"user": {"login": "ijuma", "name": "Ismael Juma"}}, "url": "https://github.com/apache/kafka/commit/e35c45f684a0b6d3b0ecc1bfea22ff419db8d0d6", "committedDate": "2020-11-23T17:46:27Z", "message": "Remove redundant null check"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d5e611c7ae8e04ec7622a3e8ad9eaa312d40ba66", "author": {"user": {"login": "ijuma", "name": "Ismael Juma"}}, "url": "https://github.com/apache/kafka/commit/d5e611c7ae8e04ec7622a3e8ad9eaa312d40ba66", "committedDate": "2020-11-23T17:47:50Z", "message": "Upgrade to spotbugs 4.1.4 and adjust exclusion to be more specific"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "93157a949a441fad26d375c52643cf9464adbce2", "author": {"user": {"login": "ijuma", "name": "Ismael Juma"}}, "url": "https://github.com/apache/kafka/commit/93157a949a441fad26d375c52643cf9464adbce2", "committedDate": "2020-11-23T17:48:00Z", "message": "Introduce ScramMechanismTest"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM2Nzg0MTY4", "url": "https://github.com/apache/kafka/pull/9645#pullrequestreview-536784168", "createdAt": "2020-11-23T19:32:48Z", "commit": {"oid": "93157a949a441fad26d375c52643cf9464adbce2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxOTozMjo0OFrOH4cYMw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxOTozMjo0OFrOH4cYMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODk0NzI1MQ==", "bodyText": "cc @chia7712 since you changed related code recently.", "url": "https://github.com/apache/kafka/pull/9645#discussion_r528947251", "createdAt": "2020-11-23T19:32:48Z", "author": {"login": "ijuma"}, "path": "clients/src/main/java/org/apache/kafka/common/header/internals/RecordHeader.java", "diffHunk": "@@ -70,7 +70,7 @@ public boolean equals(Object o) {\n \n     @Override\n     public int hashCode() {\n-        int result = key() != null ? key().hashCode() : 0;\n+        int result = key().hashCode();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "93157a949a441fad26d375c52643cf9464adbce2"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM2Nzg0Nzc4", "url": "https://github.com/apache/kafka/pull/9645#pullrequestreview-536784778", "createdAt": "2020-11-23T19:33:42Z", "commit": {"oid": "93157a949a441fad26d375c52643cf9464adbce2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxOTozMzo0M1rOH4cZ-g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxOTozMzo0M1rOH4cZ-g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODk0NzcwNg==", "bodyText": "@rondagostino looks like the original implementation didn't achieve the goal. I added a test that failed without this change.", "url": "https://github.com/apache/kafka/pull/9645#discussion_r528947706", "createdAt": "2020-11-23T19:33:43Z", "author": {"login": "ijuma"}, "path": "clients/src/main/java/org/apache/kafka/clients/admin/ScramMechanism.java", "diffHunk": "@@ -49,8 +53,11 @@ public static ScramMechanism fromType(byte type) {\n      *     Salted Challenge Response Authentication Mechanism (SCRAM) SASL and GSS-API Mechanisms, Section 4</a>\n      */\n     public static ScramMechanism fromMechanismName(String mechanismName) {\n-        ScramMechanism retvalFoundMechanism = ScramMechanism.valueOf(mechanismName.replace('-', '_'));\n-        return retvalFoundMechanism != null ? retvalFoundMechanism : UNKNOWN;\n+        String normalizedMechanism = mechanismName.replace('-', '_');\n+        return Arrays.stream(VALUES)\n+            .filter(mechanism -> mechanism.name().equals(normalizedMechanism))\n+            .findFirst()\n+            .orElse(UNKNOWN);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "93157a949a441fad26d375c52643cf9464adbce2"}, "originalPosition": 36}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e25cdb0d0ecc90a4de991da5137291d378d9c1f5", "author": {"user": {"login": "ijuma", "name": "Ismael Juma"}}, "url": "https://github.com/apache/kafka/commit/e25cdb0d0ecc90a4de991da5137291d378d9c1f5", "committedDate": "2020-11-23T22:30:28Z", "message": "Fix checkstyle"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "773f64e9906dcd147afec4eec1c73b17836dacbc", "author": {"user": {"login": "ijuma", "name": "Ismael Juma"}}, "url": "https://github.com/apache/kafka/commit/773f64e9906dcd147afec4eec1c73b17836dacbc", "committedDate": "2020-11-24T03:33:35Z", "message": "Merge branch 'trunk' into build-test-dep-updates"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM3MDUzNDE4", "url": "https://github.com/apache/kafka/pull/9645#pullrequestreview-537053418", "createdAt": "2020-11-24T03:35:58Z", "commit": {"oid": "773f64e9906dcd147afec4eec1c73b17836dacbc"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQwMzozNTo1OFrOH4qm_g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQwMzozNTo1OFrOH4qm_g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTE4MDQxNA==", "bodyText": "Could we reuse mechanismName (https://github.com/apache/kafka/blob/trunk/clients/src/main/java/org/apache/kafka/clients/admin/ScramMechanism.java#L79) so we don't need this duplicate replacement.", "url": "https://github.com/apache/kafka/pull/9645#discussion_r529180414", "createdAt": "2020-11-24T03:35:58Z", "author": {"login": "chia7712"}, "path": "clients/src/main/java/org/apache/kafka/clients/admin/ScramMechanism.java", "diffHunk": "@@ -49,8 +53,11 @@ public static ScramMechanism fromType(byte type) {\n      *     Salted Challenge Response Authentication Mechanism (SCRAM) SASL and GSS-API Mechanisms, Section 4</a>\n      */\n     public static ScramMechanism fromMechanismName(String mechanismName) {\n-        ScramMechanism retvalFoundMechanism = ScramMechanism.valueOf(mechanismName.replace('-', '_'));\n-        return retvalFoundMechanism != null ? retvalFoundMechanism : UNKNOWN;\n+        String normalizedMechanism = mechanismName.replace('-', '_');", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "773f64e9906dcd147afec4eec1c73b17836dacbc"}, "originalPosition": 32}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d187756c7ff7f8430eb2cf10ce731f9015d2bfd7", "author": {"user": {"login": "ijuma", "name": "Ismael Juma"}}, "url": "https://github.com/apache/kafka/commit/d187756c7ff7f8430eb2cf10ce731f9015d2bfd7", "committedDate": "2020-11-24T04:56:27Z", "message": "Address review feedback"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2465, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}