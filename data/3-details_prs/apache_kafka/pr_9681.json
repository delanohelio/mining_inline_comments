{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMxODQ0Nzky", "number": 9681, "title": "MINOR: Fix flaky test shouldQueryOnlyActivePartitionStoresByDefault", "bodyText": "Committer Checklist (excluded from commit message)\n\n Verify design and implementation\n Verify test coverage and CI build status\n Verify documentation (including upgrade notes)", "createdAt": "2020-12-03T15:03:09Z", "url": "https://github.com/apache/kafka/pull/9681", "merged": true, "mergeCommit": {"oid": "7c68531a1f114e39f04532ed1c59619c25a143f3"}, "closed": true, "closedAt": "2020-12-03T21:59:32Z", "author": {"login": "cadonna"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdikfiAgH2gAyNTMxODQ0NzkyOjY0ZDViYTQyNmVjYjYwNDk3NGNiMDM1YmE1N2Y1ZGNmN2UxYzAwOWU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdiqdz1AFqTU0NDQ4Nzk2MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "64d5ba426ecb604974cb035ba57f5dcf7e1c009e", "author": {"user": {"login": "cadonna", "name": "Bruno Cadonna"}}, "url": "https://github.com/apache/kafka/commit/64d5ba426ecb604974cb035ba57f5dcf7e1c009e", "committedDate": "2020-12-03T15:01:41Z", "message": "MINOR: Fix flaky test shouldQueryOnlyActivePartitionStoresByDefault"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ0MDQ1ODg4", "url": "https://github.com/apache/kafka/pull/9681#pullrequestreview-544045888", "createdAt": "2020-12-03T15:04:34Z", "commit": {"oid": "64d5ba426ecb604974cb035ba57f5dcf7e1c009e"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxNTowNDozNFrOH-gyWw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxNTowNTowNFrOH-gz5Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTMxMDkzOQ==", "bodyText": "Last time we forgot to move this line into the try-catch-clause.", "url": "https://github.com/apache/kafka/pull/9681#discussion_r535310939", "createdAt": "2020-12-03T15:04:34Z", "author": {"login": "cadonna"}, "path": "streams/src/test/java/org/apache/kafka/streams/integration/StoreQueryIntegrationTest.java", "diffHunk": "@@ -136,13 +136,13 @@ public void shouldQueryOnlyActivePartitionStoresByDefault() throws Exception {\n \n             final boolean kafkaStreams1IsActive = (keyQueryMetadata.activeHost().port() % 2) == 1;\n \n-            // Assert that only active is able to query for a key by default\n-            assertThat(kafkaStreams1IsActive ? store1.get(key) : store2.get(key), is(notNullValue()));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "64d5ba426ecb604974cb035ba57f5dcf7e1c009e"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTMxMTMzMw==", "bodyText": "I thought this is easier readable.", "url": "https://github.com/apache/kafka/pull/9681#discussion_r535311333", "createdAt": "2020-12-03T15:05:04Z", "author": {"login": "cadonna"}, "path": "streams/src/test/java/org/apache/kafka/streams/integration/StoreQueryIntegrationTest.java", "diffHunk": "@@ -136,13 +136,13 @@ public void shouldQueryOnlyActivePartitionStoresByDefault() throws Exception {\n \n             final boolean kafkaStreams1IsActive = (keyQueryMetadata.activeHost().port() % 2) == 1;\n \n-            // Assert that only active is able to query for a key by default\n-            assertThat(kafkaStreams1IsActive ? store1.get(key) : store2.get(key), is(notNullValue()));\n             try {\n                 if (kafkaStreams1IsActive) {\n+                    assertThat(store1.get(key), is(notNullValue()));\n                     assertThat(store2.get(key), is(nullValue()));\n                 } else {\n                     assertThat(store1.get(key), is(nullValue()));\n+                    assertThat(store2.get(key), is(notNullValue()));\n                 }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "64d5ba426ecb604974cb035ba57f5dcf7e1c009e"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ0NDg3OTYx", "url": "https://github.com/apache/kafka/pull/9681#pullrequestreview-544487961", "createdAt": "2020-12-03T21:59:14Z", "commit": {"oid": "64d5ba426ecb604974cb035ba57f5dcf7e1c009e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2527, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}