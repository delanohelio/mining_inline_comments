{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI1MzcyMDUy", "number": 8759, "title": "KAFKA-10066: TestOutputTopic should pass record headers into deserializers", "bodyText": "Call for review @vvcephei", "createdAt": "2020-05-29T23:18:26Z", "url": "https://github.com/apache/kafka/pull/8759", "merged": true, "mergeCommit": {"oid": "6383a22fafdf09219145edaff8c3e0adf3455832"}, "closed": true, "closedAt": "2020-06-04T23:01:00Z", "author": {"login": "mjsax"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcmLiWogFqTQyMTM1NDU4NQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcnyNBGABqjM0MDQ0NDM1Njg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxMzU0NTg1", "url": "https://github.com/apache/kafka/pull/8759#pullrequestreview-421354585", "createdAt": "2020-05-30T00:01:41Z", "commit": null, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxNDU0OTQ4", "url": "https://github.com/apache/kafka/pull/8759#pullrequestreview-421454948", "createdAt": "2020-05-31T01:42:22Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0zMVQwMTo0MjoyMlrOGc2NRw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0zMVQwMTo0NjoyMVrOGc2N8g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjkwMTQ0Nw==", "bodyText": "DeSerializers -> Deserializers", "url": "https://github.com/apache/kafka/pull/8759#discussion_r432901447", "createdAt": "2020-05-31T01:42:22Z", "author": {"login": "abbccdda"}, "path": "streams/test-utils/src/test/java/org/apache/kafka/streams/TopologyTestDriverTest.java", "diffHunk": "@@ -711,6 +715,56 @@ public void shouldUseSourceSpecificDeserializers() {\n         assertThat(result2.getValue(), equalTo(source2Value));\n     }\n \n+    @Test\n+    public void shouldPassRecordHeadersIntoDeSerializers() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjkwMTYxOA==", "bodyText": "It seems like we are just verifying the headers are deserialized. Should we just use mock deserializers? Moreover, we could build a customized boolean deserializer which outputs true when the header is provided, or false otherwise.", "url": "https://github.com/apache/kafka/pull/8759#discussion_r432901618", "createdAt": "2020-05-31T01:46:21Z", "author": {"login": "abbccdda"}, "path": "streams/test-utils/src/test/java/org/apache/kafka/streams/TopologyTestDriverTest.java", "diffHunk": "@@ -711,6 +715,56 @@ public void shouldUseSourceSpecificDeserializers() {\n         assertThat(result2.getValue(), equalTo(source2Value));\n     }\n \n+    @Test\n+    public void shouldPassRecordHeadersIntoDeSerializers() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 27}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxNDY5Mjkw", "url": "https://github.com/apache/kafka/pull/8759#pullrequestreview-421469290", "createdAt": "2020-05-31T07:34:26Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0zMVQwNzozNDoyNlrOGc3Sqw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0zMVQwNzozNDoyNlrOGc3Sqw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjkxOTIxMQ==", "bodyText": "Nice finding!\nhttps://github.com/apache/kafka/blob/trunk/streams/test-utils/src/main/java/org/apache/kafka/streams/TopologyTestDriver.java#L805 has similar issue. Should we fix it as well?", "url": "https://github.com/apache/kafka/pull/8759#discussion_r432919211", "createdAt": "2020-05-31T07:34:26Z", "author": {"login": "chia7712"}, "path": "streams/test-utils/src/main/java/org/apache/kafka/streams/TopologyTestDriver.java", "diffHunk": "@@ -906,8 +906,8 @@ public void advanceWallClockTime(final Duration advance) {\n         if (record == null) {\n             throw new NoSuchElementException(\"Empty topic: \" + topic);\n         }\n-        final K key = keyDeserializer.deserialize(record.topic(), record.key());\n-        final V value = valueDeserializer.deserialize(record.topic(), record.value());\n+        final K key = keyDeserializer.deserialize(record.topic(), record.headers(), record.key());", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIzOTk4MDYx", "url": "https://github.com/apache/kafka/pull/8759#pullrequestreview-423998061", "createdAt": "2020-06-03T23:11:08Z", "commit": null, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c8ec9ea0e9ec25cf8b6dca3f0f70d16616ac3dd8", "author": {"user": {"login": "mjsax", "name": "Matthias J. Sax"}}, "url": "https://github.com/apache/kafka/commit/c8ec9ea0e9ec25cf8b6dca3f0f70d16616ac3dd8", "committedDate": "2020-06-03T23:25:28Z", "message": "KAFKA-10066: TestOutputTopic should pass record headers into\ndeserializers"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e58a0c440b5134b89e5819f101014eed770f23a3", "author": {"user": {"login": "mjsax", "name": "Matthias J. Sax"}}, "url": "https://github.com/apache/kafka/commit/e58a0c440b5134b89e5819f101014eed770f23a3", "committedDate": "2020-06-03T23:25:28Z", "message": "Unify test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2f2515c43d3b4c1f79bf2aefc66c307bc49c4968", "author": {"user": {"login": "mjsax", "name": "Matthias J. Sax"}}, "url": "https://github.com/apache/kafka/commit/2f2515c43d3b4c1f79bf2aefc66c307bc49c4968", "committedDate": "2020-06-03T23:25:28Z", "message": "foo"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ef08ac87f441f8defeb04773b74e963d2efdcd79", "author": {"user": {"login": "mjsax", "name": "Matthias J. Sax"}}, "url": "https://github.com/apache/kafka/commit/ef08ac87f441f8defeb04773b74e963d2efdcd79", "committedDate": "2020-06-03T23:25:28Z", "message": "Fix checkstyle"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6e3563fd71c4d46ac92d75078af447662f493178", "author": {"user": {"login": "mjsax", "name": "Matthias J. Sax"}}, "url": "https://github.com/apache/kafka/commit/6e3563fd71c4d46ac92d75078af447662f493178", "committedDate": "2020-06-03T23:25:28Z", "message": "Github comment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "32ec931acb26e0d51934da157ee131ee3c53f0e9", "author": {"user": {"login": "mjsax", "name": "Matthias J. Sax"}}, "url": "https://github.com/apache/kafka/commit/32ec931acb26e0d51934da157ee131ee3c53f0e9", "committedDate": "2020-06-03T23:25:28Z", "message": "Rename test"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "32ec931acb26e0d51934da157ee131ee3c53f0e9", "author": {"user": {"login": "mjsax", "name": "Matthias J. Sax"}}, "url": "https://github.com/apache/kafka/commit/32ec931acb26e0d51934da157ee131ee3c53f0e9", "committedDate": "2020-06-03T23:25:28Z", "message": "Rename test"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 787, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}