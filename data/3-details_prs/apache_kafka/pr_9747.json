{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM5NTQwMTYw", "number": 9747, "title": "KAFKA-10852: AlterIsr should not be throttled", "bodyText": "Set it as a cluster action and update the handler in KafkaApis. We keep the throttleTimeMs field\nsince we intend to enable throttling in the future (especially relevant when we switch to the\nbuilt-in quorum mode).\nCommitter Checklist (excluded from commit message)\n\n Verify design and implementation\n Verify test coverage and CI build status\n Verify documentation (including upgrade notes)", "createdAt": "2020-12-14T15:01:38Z", "url": "https://github.com/apache/kafka/pull/9747", "merged": true, "mergeCommit": {"oid": "5e5daf47ef0de74c0662063e975dd1f52993be7b"}, "closed": true, "closedAt": "2020-12-15T06:28:48Z", "author": {"login": "ijuma"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdmHFAvAH2gAyNTM5NTQwMTYwOjZjYWU5ZTc5MmYwNTA1ZTg2YzJiYWE3MmJmYTYwMzY1MTdlOTBmMzk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdmR2NIgH2gAyNTM5NTQwMTYwOmM0OGQwMjA4NWY2MWE1YmM0M2IzMDY5YTE4MTMyZDEyOWFlN2IwMjA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "6cae9e792f0505e86c2baa72bfa6036517e90f39", "author": {"user": {"login": "ijuma", "name": "Ismael Juma"}}, "url": "https://github.com/apache/kafka/commit/6cae9e792f0505e86c2baa72bfa6036517e90f39", "committedDate": "2020-12-14T15:01:10Z", "message": "KAFKA-10852: AlterIsr should be a cluster action\n\nThis ensures it won't get throttled."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUxNDUzOTI0", "url": "https://github.com/apache/kafka/pull/9747#pullrequestreview-551453924", "createdAt": "2020-12-14T15:02:28Z", "commit": {"oid": "6cae9e792f0505e86c2baa72bfa6036517e90f39"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxNTowMjoyOVrOIFUr9w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxNTowMjoyOVrOIFUr9w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjQ1MjcyNw==", "bodyText": "We have to decide whether we want to do this or remove the throttle time ms from AlterIsr before 2.7.0.", "url": "https://github.com/apache/kafka/pull/9747#discussion_r542452727", "createdAt": "2020-12-14T15:02:29Z", "author": {"login": "ijuma"}, "path": "clients/src/test/java/org/apache/kafka/common/protocol/ApiKeysTest.java", "diffHunk": "@@ -55,11 +61,14 @@ public void schemaVersionOutOfRange() {\n      */\n     @Test\n     public void testResponseThrottleTime() {\n-        List<ApiKeys> authenticationKeys = Arrays.asList(ApiKeys.SASL_HANDSHAKE, ApiKeys.SASL_AUTHENTICATE);\n+        Set<ApiKeys> authenticationKeys = EnumSet.of(ApiKeys.SASL_HANDSHAKE, ApiKeys.SASL_AUTHENTICATE);\n+        // Newer protocol apis include throttle time ms even for cluster actions\n+        Set<ApiKeys> clusterActionsWithThrottleTimeMs = EnumSet.of(ApiKeys.ALTER_ISR);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6cae9e792f0505e86c2baa72bfa6036517e90f39"}, "originalPosition": 34}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUxODYxMTU2", "url": "https://github.com/apache/kafka/pull/9747#pullrequestreview-551861156", "createdAt": "2020-12-14T20:20:55Z", "commit": {"oid": "6cae9e792f0505e86c2baa72bfa6036517e90f39"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "75343d95a12fc29c92af29915ed3a9d2beaf9b1b", "author": {"user": {"login": "ijuma", "name": "Ismael Juma"}}, "url": "https://github.com/apache/kafka/commit/75343d95a12fc29c92af29915ed3a9d2beaf9b1b", "committedDate": "2020-12-14T20:41:51Z", "message": "Don't throttle alter isr for now"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e49d24b0967700e2ed5bdf6432854726555a674d", "author": {"user": {"login": "ijuma", "name": "Ismael Juma"}}, "url": "https://github.com/apache/kafka/commit/e49d24b0967700e2ed5bdf6432854726555a674d", "committedDate": "2020-12-15T03:33:15Z", "message": "Fix failing test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c48d02085f61a5bc43b3069a18132d129ae7b020", "author": {"user": {"login": "ijuma", "name": "Ismael Juma"}}, "url": "https://github.com/apache/kafka/commit/c48d02085f61a5bc43b3069a18132d129ae7b020", "committedDate": "2020-12-15T03:33:57Z", "message": "Clean-ups"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2298, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}