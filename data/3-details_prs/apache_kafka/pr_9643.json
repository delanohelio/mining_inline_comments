{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI1ODIxNTEw", "number": 9643, "title": "MINOR: Upgrade to Scala 2.13.4", "bodyText": "Scala 2.13.4 restores default global ExecutionContext to 2.12 behavior\n(to fix a perf regression in some use cases) and improves pattern matching\n(especially exhaustiveness checking). Most of the changes are related\nto the latter as I have enabled the newly introduced -Xlint:strict-unsealed-patmat.\nMore details on the code changes:\n\nDon't swallow exception in ReassignPartitionsCommand.topicDescriptionFutureToState.\nRequestChannel.Response should be sealed.\nIntroduce sealed ClientQuotaManager.BaseUserEntity to avoid false positive\nexhaustiveness warning.\nHandle a number of cases where pattern matches were not exhaustive:\neither by marking them with @unchecked or by adding a catch-all clause.\nWorkaround scalac bug related to exhaustiveness warnings in ZooKeeperClient\nRemove warning suppression annotations related to the optimizer that are no\nlonger needed in ConsumerGroupCommand and AclAuthorizer.\nUse forKeyValue in AclAuthorizer.acls as the scala bug preventing us from\nusing it seems to be fixed.\nAlso update scalaCollectionCompat to 2.3.0, which includes minor improvements.\n\nFull release notes:\n\nhttps://github.com/scala/scala/releases/tag/v2.13.4\nhttps://github.com/scala/scala-collection-compat/releases/tag/v2.3.0\n\nCommitter Checklist (excluded from commit message)\n\n Verify design and implementation\n Verify test coverage and CI build status\n Verify documentation (including upgrade notes)", "createdAt": "2020-11-23T15:46:29Z", "url": "https://github.com/apache/kafka/pull/9643", "merged": true, "mergeCommit": {"oid": "cbf8ad277a515b9a3e42dc63658fb60e6e6146b6"}, "closed": true, "closedAt": "2020-11-24T18:28:54Z", "author": {"login": "ijuma"}, "timelineItems": {"totalCount": 18, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdfhpJhABqjQwMzA3MDM2NDg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdfqmkvABqjQwMzMwOTIzNDc=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM3MTIzNjQz", "url": "https://github.com/apache/kafka/pull/9643#pullrequestreview-537123643", "createdAt": "2020-11-24T06:59:06Z", "commit": null, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM3MjgyNzQx", "url": "https://github.com/apache/kafka/pull/9643#pullrequestreview-537282741", "createdAt": "2020-11-24T09:13:44Z", "commit": null, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQwOToxMzo0NFrOH4zeNg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQwOToxMzo0NFrOH4zeNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTMyNTYyMg==", "bodyText": "useless brackets", "url": "https://github.com/apache/kafka/pull/9643#discussion_r529325622", "createdAt": "2020-11-24T09:13:44Z", "author": {"login": "chia7712"}, "path": "core/src/main/scala/kafka/admin/ConsumerGroupCommand.scala", "diffHunk": "@@ -151,21 +149,22 @@ object ConsumerGroupCommand extends Logging {\n   private[admin] case class CsvUtils() {\n     val mapper = new CsvMapper with ScalaObjectMapper\n     mapper.registerModule(DefaultScalaModule)\n-    def readerFor[T <: CsvRecord: ClassTag] = {\n+    def readerFor[T <: CsvRecord : ClassTag] = {\n       val schema = getSchema[T]\n       val clazz = implicitly[ClassTag[T]].runtimeClass\n       mapper.readerFor(clazz).`with`(schema)\n     }\n-    def writerFor[T <: CsvRecord: ClassTag] = {\n+    def writerFor[T <: CsvRecord : ClassTag] = {\n       val schema = getSchema[T]\n       val clazz = implicitly[ClassTag[T]].runtimeClass\n       mapper.writerFor(clazz).`with`(schema)\n     }\n-    private def getSchema[T <: CsvRecord: ClassTag] = {\n+    private def getSchema[T <: CsvRecord : ClassTag] = {\n       val clazz = implicitly[ClassTag[T]].runtimeClass\n-      val fields = clazz match {\n-        case _ if classOf[CsvRecordWithGroup] == clazz => CsvRecordWithGroup.fields\n-        case _ if classOf[CsvRecordNoGroup]   == clazz => CsvRecordNoGroup.fields\n+      val fields = {", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 31}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4a10e5e020d37de82fd4074ac982ca7a73c1ed1b", "author": {"user": {"login": "ijuma", "name": "Ismael Juma"}}, "url": "https://github.com/apache/kafka/commit/4a10e5e020d37de82fd4074ac982ca7a73c1ed1b", "committedDate": "2020-11-24T14:21:44Z", "message": "MINOR: Update Scala to 2.13.4 and 2.12.13\n\nAlso:\n* Enable -Xlint:strict-unsealed-patmat for Scala 2.13.x.\n* Update scala-collection-compat to 2.3.0."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0d6d7aea7d6186f3655f98b5b70bddef968b3aaf", "author": {"user": {"login": "ijuma", "name": "Ismael Juma"}}, "url": "https://github.com/apache/kafka/commit/0d6d7aea7d6186f3655f98b5b70bddef968b3aaf", "committedDate": "2020-11-24T14:21:44Z", "message": "Remove error suppression annotations that are no longer needed"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "97f6a724d31d630ea73f85c7a0a81aea6aa04b97", "author": {"user": {"login": "ijuma", "name": "Ismael Juma"}}, "url": "https://github.com/apache/kafka/commit/97f6a724d31d630ea73f85c7a0a81aea6aa04b97", "committedDate": "2020-11-24T14:21:44Z", "message": "Update kafka-run-class"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c1f5371bc873b1b1229c5185510b5efae5c1a0bf", "author": {"user": {"login": "ijuma", "name": "Ismael Juma"}}, "url": "https://github.com/apache/kafka/commit/c1f5371bc873b1b1229c5185510b5efae5c1a0bf", "committedDate": "2020-11-24T14:21:44Z", "message": "Handle non exhaustive matches"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "47463cb35dd007ce2f9849b7347a6fa02801270c", "author": {"user": {"login": "ijuma", "name": "Ismael Juma"}}, "url": "https://github.com/apache/kafka/commit/47463cb35dd007ce2f9849b7347a6fa02801270c", "committedDate": "2020-11-24T14:21:44Z", "message": "Don't swallow exceptions in ReassignPartitionsCommand"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e0b249356901af1b6b86a9bdcd0fc69759d7d8dc", "author": {"user": {"login": "ijuma", "name": "Ismael Juma"}}, "url": "https://github.com/apache/kafka/commit/e0b249356901af1b6b86a9bdcd0fc69759d7d8dc", "committedDate": "2020-11-24T14:21:44Z", "message": "Add missing `sealed` modifier in RequestChannel.Response"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3eab2dfe3b5e46dc7f482c726bbe4f6da2606ad1", "author": {"user": {"login": "ijuma", "name": "Ismael Juma"}}, "url": "https://github.com/apache/kafka/commit/3eab2dfe3b5e46dc7f482c726bbe4f6da2606ad1", "committedDate": "2020-11-24T14:21:44Z", "message": "Introduce sealed ClientQuotaManager.BaseUserEntity to avoid false positive exhaustiveness warning"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f5cfb389faf4efb09db377077ee248ea45f09a96", "author": {"user": {"login": "ijuma", "name": "Ismael Juma"}}, "url": "https://github.com/apache/kafka/commit/f5cfb389faf4efb09db377077ee248ea45f09a96", "committedDate": "2020-11-24T14:21:44Z", "message": "More exhaustiveness handling fixes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d4272013f343de63c98e95ed31faa08a48b3dda5", "author": {"user": {"login": "ijuma", "name": "Ismael Juma"}}, "url": "https://github.com/apache/kafka/commit/d4272013f343de63c98e95ed31faa08a48b3dda5", "committedDate": "2020-11-24T14:21:44Z", "message": "Workaround scalac bug related to exhaustiveness warnings"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "601d257ef07ceda9182fcd2127b4d85f30a21cde", "author": {"user": {"login": "ijuma", "name": "Ismael Juma"}}, "url": "https://github.com/apache/kafka/commit/601d257ef07ceda9182fcd2127b4d85f30a21cde", "committedDate": "2020-11-24T14:21:44Z", "message": "Bump scala version in gradle.properties"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "773455fa88efeb8115eb748364cf2bbe493a793b", "author": {"user": {"login": "ijuma", "name": "Ismael Juma"}}, "url": "https://github.com/apache/kafka/commit/773455fa88efeb8115eb748364cf2bbe493a793b", "committedDate": "2020-11-24T14:21:44Z", "message": "Fix spotBugs error in Log"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "401c9b674926c19b6f3295f3ea61985002f69664", "author": {"user": {"login": "ijuma", "name": "Ismael Juma"}}, "url": "https://github.com/apache/kafka/commit/401c9b674926c19b6f3295f3ea61985002f69664", "committedDate": "2020-11-24T14:21:44Z", "message": "Fix test failures"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a3c80af930ba419c82d4eacbc1ae821cd1bdb2d6", "author": {"user": {"login": "ijuma", "name": "Ismael Juma"}}, "url": "https://github.com/apache/kafka/commit/a3c80af930ba419c82d4eacbc1ae821cd1bdb2d6", "committedDate": "2020-11-24T14:26:37Z", "message": "Revert Scala 2.12.13 change, it's not available yet"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7d125d127cb10bb415c27c4e754c4386ab754c4f", "author": {"user": {"login": "ijuma", "name": "Ismael Juma"}}, "url": "https://github.com/apache/kafka/commit/7d125d127cb10bb415c27c4e754c4386ab754c4f", "committedDate": "2020-11-24T14:26:48Z", "message": "Remove unnecessary braces"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "7d125d127cb10bb415c27c4e754c4386ab754c4f", "author": {"user": {"login": "ijuma", "name": "Ismael Juma"}}, "url": "https://github.com/apache/kafka/commit/7d125d127cb10bb415c27c4e754c4386ab754c4f", "committedDate": "2020-11-24T14:26:48Z", "message": "Remove unnecessary braces"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2461, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}