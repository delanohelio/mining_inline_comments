{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcyNzc4Mjk5", "number": 9215, "title": "KAFKA-10133: MM2 readme update on config", "bodyText": "Per https://issues.apache.org/jira/browse/KAFKA-10133, MM2 users sometimes confuse on specifying or overriding the default configurations at different levels: connector, MM2, producer/consumers. It may be great if we clarify how to correctly set those configs in README.md, in addition to the example config file.", "createdAt": "2020-08-24T21:34:14Z", "url": "https://github.com/apache/kafka/pull/9215", "merged": true, "mergeCommit": {"oid": "c6d135e21fbd5f112477288a79501e4343b7a8b5"}, "closed": true, "closedAt": "2020-09-04T17:26:24Z", "author": {"login": "ning2008wisc"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdCJoLhgBqjM2ODczMjg0MjY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdFolg1AFqTQ4MjgzMTIyNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc0MTMxODQ2", "url": "https://github.com/apache/kafka/pull/9215#pullrequestreview-474131846", "createdAt": "2020-08-25T04:47:58Z", "commit": null, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQwNDo0Nzo1OFrOHGHJnw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQwNDo0Nzo1OFrOHGHJnw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjE3MDY1NQ==", "bodyText": "I think you are referring to the default values of the Connect configuration properties -- maybe use \"default\" in this sentence to make that more clear.", "url": "https://github.com/apache/kafka/pull/9215#discussion_r476170655", "createdAt": "2020-08-25T04:47:58Z", "author": {"login": "ryannedolan"}, "path": "connect/mirror/README.md", "diffHunk": "@@ -141,7 +141,38 @@ nearby clusters.\n N.B. that the `--clusters` parameter is not technically required here. MM2 will work fine without it; however, throughput may suffer from \"producer lag\" between\n data centers, and you may incur unnecessary data transfer costs.\n \n-## Shared configuration\n+## Configuration\n+### General Kafka Connect Config\n+All Kafka Connect, Source Connector, Sink Connector configs, as defined in [Kafka official doc] (https://kafka.apache.org/documentation/#connectconfigs), can be \n+directly used in MM2 configuration without prefix in the configuration name. As the starting point, most of these configs may work well with the exception of `tasks.max`.", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 8}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc2NTc0ODQ2", "url": "https://github.com/apache/kafka/pull/9215#pullrequestreview-476574846", "createdAt": "2020-08-27T10:09:27Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QxMDowOToyN1rOHIJjNw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QxMzo0NTo1MFrOHIRGtQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODMwNzEyNw==", "bodyText": "We should mention this describes configuring MM2 in driver mode?", "url": "https://github.com/apache/kafka/pull/9215#discussion_r478307127", "createdAt": "2020-08-27T10:09:27Z", "author": {"login": "mimaison"}, "path": "connect/mirror/README.md", "diffHunk": "@@ -141,7 +141,38 @@ nearby clusters.\n N.B. that the `--clusters` parameter is not technically required here. MM2 will work fine without it; however, throughput may suffer from \"producer lag\" between\n data centers, and you may incur unnecessary data transfer costs.\n \n-## Shared configuration\n+## Configuration", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODQyNTAyMg==", "bodyText": "Can we also cover Admin here?", "url": "https://github.com/apache/kafka/pull/9215#discussion_r478425022", "createdAt": "2020-08-27T13:37:31Z", "author": {"login": "mimaison"}, "path": "connect/mirror/README.md", "diffHunk": "@@ -141,7 +141,38 @@ nearby clusters.\n N.B. that the `--clusters` parameter is not technically required here. MM2 will work fine without it; however, throughput may suffer from \"producer lag\" between\n data centers, and you may incur unnecessary data transfer costs.\n \n-## Shared configuration\n+## Configuration\n+### General Kafka Connect Config\n+All Kafka Connect, Source Connector, Sink Connector configs, as defined in [Kafka official doc] (https://kafka.apache.org/documentation/#connectconfigs), can be \n+directly used in MM2 configuration without prefix in the configuration name. As the starting point, most of these default configs may work well with the exception of `tasks.max`.\n+\n+In order to evenly distribute the workload across more than one MM2 instance, it is advised to set `tasks.max` at least to 2 or even larger depending on the hardware resources\n+and the total number partitions to be replicated.\n+\n+### Kafka Connect Config for a Specific Connector\n+If needed, Kafka Connect worker-level configs could be even specified \"per connector\", which needs to follow the format of `cluster_alias.config_name` in MM2 configuration. For example,\n+ \n+    backup.ssl.truststore.location = /usr/lib/jvm/zulu-8-amd64/jre/lib/security/cacerts // SSL cert location\n+    backup.security.protocol = SSL // if target cluster needs SSL to send message\n+    \n+### MM2 configs for a Specific Connector\n+MM2 itself has many configs to control how MM2 behaves. To override those default values, add the config name by the format of `source_cluster_alias->target_cluster_alias.config_name` in MM2 configuration. For example,\n+    \n+    backup->primary.enabled = false // set to false if one-way replication is desired\n+    primary->backup.topics.blacklist = topics_to_blacklist\n+    primary->backup.emit.heartbeats.enabled = false\n+    primary->backup.sync.group.offsets = true \n+\n+### Producer / Consumer Config used by MM2", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODQyNTQxNw==", "bodyText": "We can replace the 2nd MM2 by it", "url": "https://github.com/apache/kafka/pull/9215#discussion_r478425417", "createdAt": "2020-08-27T13:38:06Z", "author": {"login": "mimaison"}, "path": "connect/mirror/README.md", "diffHunk": "@@ -141,7 +141,38 @@ nearby clusters.\n N.B. that the `--clusters` parameter is not technically required here. MM2 will work fine without it; however, throughput may suffer from \"producer lag\" between\n data centers, and you may incur unnecessary data transfer costs.\n \n-## Shared configuration\n+## Configuration\n+### General Kafka Connect Config\n+All Kafka Connect, Source Connector, Sink Connector configs, as defined in [Kafka official doc] (https://kafka.apache.org/documentation/#connectconfigs), can be \n+directly used in MM2 configuration without prefix in the configuration name. As the starting point, most of these default configs may work well with the exception of `tasks.max`.\n+\n+In order to evenly distribute the workload across more than one MM2 instance, it is advised to set `tasks.max` at least to 2 or even larger depending on the hardware resources\n+and the total number partitions to be replicated.\n+\n+### Kafka Connect Config for a Specific Connector\n+If needed, Kafka Connect worker-level configs could be even specified \"per connector\", which needs to follow the format of `cluster_alias.config_name` in MM2 configuration. For example,\n+ \n+    backup.ssl.truststore.location = /usr/lib/jvm/zulu-8-amd64/jre/lib/security/cacerts // SSL cert location\n+    backup.security.protocol = SSL // if target cluster needs SSL to send message\n+    \n+### MM2 configs for a Specific Connector\n+MM2 itself has many configs to control how MM2 behaves. To override those default values, add the config name by the format of `source_cluster_alias->target_cluster_alias.config_name` in MM2 configuration. For example,", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODQzMDkwMQ==", "bodyText": "The link does not render correctly, remove the space between ] (", "url": "https://github.com/apache/kafka/pull/9215#discussion_r478430901", "createdAt": "2020-08-27T13:45:50Z", "author": {"login": "mimaison"}, "path": "connect/mirror/README.md", "diffHunk": "@@ -141,7 +141,38 @@ nearby clusters.\n N.B. that the `--clusters` parameter is not technically required here. MM2 will work fine without it; however, throughput may suffer from \"producer lag\" between\n data centers, and you may incur unnecessary data transfer costs.\n \n-## Shared configuration\n+## Configuration\n+### General Kafka Connect Config\n+All Kafka Connect, Source Connector, Sink Connector configs, as defined in [Kafka official doc] (https://kafka.apache.org/documentation/#connectconfigs), can be ", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 7}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgyNzU5MzA0", "url": "https://github.com/apache/kafka/pull/9215#pullrequestreview-482759304", "createdAt": "2020-09-04T15:37:51Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQxNTozNzo1MVrOHNSnvg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQxNTozNzo1MVrOHNSnvg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzY5ODYyMg==", "bodyText": "The link does not render, it's missing the opening [.\nAlso the correct link to the KIP is https://cwiki.apache.org/confluence/display/KAFKA/KIP-382%3A+MirrorMaker+2.0", "url": "https://github.com/apache/kafka/pull/9215#discussion_r483698622", "createdAt": "2020-09-04T15:37:51Z", "author": {"login": "mimaison"}, "path": "connect/mirror/README.md", "diffHunk": "@@ -141,7 +141,40 @@ nearby clusters.\n N.B. that the `--clusters` parameter is not technically required here. MM2 will work fine without it; however, throughput may suffer from \"producer lag\" between\n data centers, and you may incur unnecessary data transfer costs.\n \n-## Shared configuration\n+## Configuration\n+The following sections target for dedicated MM2 cluster. If running MM2 in a Connect cluster, please refer to KIP-382: MirrorMaker 2.0](https://cwiki.apache.org/confluence/display/KAFKA/KIP-382) for guidance.", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0cd9c9ec6bcd70ad00b62126a0caa409df2bfb19", "author": {"user": null}, "url": "https://github.com/apache/kafka/commit/0cd9c9ec6bcd70ad00b62126a0caa409df2bfb19", "committedDate": "2020-09-04T16:25:26Z", "message": "KAFKA-10133: MM2 readme update on config"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "0cd9c9ec6bcd70ad00b62126a0caa409df2bfb19", "author": {"user": null}, "url": "https://github.com/apache/kafka/commit/0cd9c9ec6bcd70ad00b62126a0caa409df2bfb19", "committedDate": "2020-09-04T16:25:26Z", "message": "KAFKA-10133: MM2 readme update on config"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgyODMxMjI0", "url": "https://github.com/apache/kafka/pull/9215#pullrequestreview-482831224", "createdAt": "2020-09-04T17:24:02Z", "commit": {"oid": "0cd9c9ec6bcd70ad00b62126a0caa409df2bfb19"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 804, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}