{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEyNTI4ODIx", "number": 9532, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQyMTozMTo0NFrOEzfZQQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQyMTozNDowN1rOEzfbyQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIyNDI3MjAxOnYy", "diffSide": "RIGHT", "path": "docs/upgrade.html", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQyMTozMTo0NFrOHqvfXQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQyMTozMTo0NFrOHqvfXQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDU4MDMxNw==", "bodyText": "Current 2.6 docs", "url": "https://github.com/apache/kafka/pull/9532#discussion_r514580317", "createdAt": "2020-10-29T21:31:44Z", "author": {"login": "bbejeck"}, "path": "docs/upgrade.html", "diffHunk": "@@ -93,8 +135,49 @@ <h5><a id=\"upgrade_270_notable\" href=\"#upgrade_270_notable\">Notable changes in 2\n         <a href=\"https://cwiki.apache.org/confluence/display/KAFKA/KIP-616%3A+Rename+implicit+Serdes+instances+in+kafka-streams-scala\">KIP-616</a>\n     </li>\n </ul>\n+<h4><a id=\"upgrade_2_6_0\" href=\"#upgrade_2_6_0\">Upgrading to 2.6.0 from any version 0.8.x through 2.5.x</a></h4>\n+\n+<p><b>If you are upgrading from a version prior to 2.1.x, please see the note below about the change to the schema used to store consumer offsets.\n+    Once you have changed the inter.broker.protocol.version to the latest version, it will not be possible to downgrade to a version prior to 2.1.</b></p>\n+\n+<p><b>For a rolling upgrade:</b></p>\n \n-<h5><a id=\"upgrade_260_notable\" href=\"#upgrade_260_notable\">Notable changes in 2.6.0</a></h5>\n+<ol>\n+    <li> Update server.properties on all brokers and add the following properties. CURRENT_KAFKA_VERSION refers to the version you\n+        are upgrading from. CURRENT_MESSAGE_FORMAT_VERSION refers to the message format version currently in use. If you have previously\n+        overridden the message format version, you should keep its current value. Alternatively, if you are upgrading from a version prior\n+        to 0.11.0.x, then CURRENT_MESSAGE_FORMAT_VERSION should be set to match CURRENT_KAFKA_VERSION.\n+        <ul>\n+            <li>inter.broker.protocol.version=CURRENT_KAFKA_VERSION (e.g., <code>2.5</code>, <code>2.4</code>, etc.)</li>\n+            <li>log.message.format.version=CURRENT_MESSAGE_FORMAT_VERSION  (See <a href=\"#upgrade_10_performance_impact\">potential performance impact\n+                following the upgrade</a> for the details on what this configuration does.)</li>\n+        </ul>\n+        If you are upgrading from version 0.11.0.x or above, and you have not overridden the message format, then you only need to override\n+        the inter-broker protocol version.\n+        <ul>\n+            <li>inter.broker.protocol.version=CURRENT_KAFKA_VERSION (e.g., <code>2.5</code>, <code>2.4</code>, etc.)</li>\n+        </ul>\n+    </li>\n+    <li> Upgrade the brokers one at a time: shut down the broker, update the code, and restart it. Once you have done so, the\n+        brokers will be running the latest version and you can verify that the cluster's behavior and performance meets expectations.\n+        It is still possible to downgrade at this point if there are any problems.\n+    </li>\n+    <li> Once the cluster's behavior and performance has been verified, bump the protocol version by editing\n+        <code>inter.broker.protocol.version</code> and setting it to <code>2.6</code>.\n+    </li>\n+    <li> Restart the brokers one by one for the new protocol version to take effect. Once the brokers begin using the latest\n+        protocol version, it will no longer be possible to downgrade the cluster to an older version.\n+    </li>\n+    <li> If you have overridden the message format version as instructed above, then you need to do one more rolling restart to\n+        upgrade it to its latest version. Once all (or most) consumers have been upgraded to 0.11.0 or later,\n+        change log.message.format.version to 2.6 on each broker and restart them one by one. Note that the older Scala clients,\n+        which are no longer maintained, do not support the message format introduced in 0.11, so to avoid conversion costs\n+        (or to take advantage of <a href=\"#upgrade_11_exactly_once_semantics\">exactly once semantics</a>),\n+        the newer Java clients must be used.\n+    </li>\n+</ol>\n+\n+<h5 class=\"anchor-heading\"><a id=\"upgrade_260_notable\" class=\"anchor-link\"></a><a href=\"#upgrade_260_notable\">Notable changes in 2.6.0</a></h5>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d73f7819d928143f23f3523b667735502f072475"}, "originalPosition": 96}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIyNDI3NDE3OnYy", "diffSide": "RIGHT", "path": "docs/upgrade.html", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQyMTozMjozMFrOHqvgrw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQyMTozMjozMFrOHqvgrw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDU4MDY1NQ==", "bodyText": "current 2.6 docs as well", "url": "https://github.com/apache/kafka/pull/9532#discussion_r514580655", "createdAt": "2020-10-29T21:32:30Z", "author": {"login": "bbejeck"}, "path": "docs/upgrade.html", "diffHunk": "@@ -114,17 +197,51 @@ <h5><a id=\"upgrade_260_notable\" href=\"#upgrade_260_notable\">Notable changes in 2\n         Fetch requests and other requests intended only for the leader or follower return NOT_LEADER_OR_FOLLOWER(6) instead of REPLICA_NOT_AVAILABLE(9)\n         if the broker is not a replica, ensuring that this transient error during reassignments is handled by all clients as a retriable exception.\n     </li>\n-    <li>There are several notable changes to the reassignment tool <code>kafka-reassign-partitions.sh</code>\n-        following the completion of\n-        <a href=\"https://cwiki.apache.org/confluence/display/KAFKA/KIP-455%3A+Create+an+Administrative+API+for+Replica+Reassignment\">KIP-455</a>.\n-        This tool now requires the <code>--additional</code> flag to be provided when changing the throttle of an\n-        active reassignment. Reassignment cancellation is now possible using the\n-        <code>--cancel</code> command. Finally, reassignment with <code>--zookeeper</code>\n-        has been deprecated in favor of <code>--bootstrap-server</code>. See the KIP for more detail.\n-    </li>\n </ul>\n \n-<h5><a id=\"upgrade_250_notable\" href=\"#upgrade_250_notable\">Notable changes in 2.5.0</a></h5>\n+<h4><a id=\"upgrade_2_5_0\" href=\"#upgrade_2_5_0\">Upgrading to 2.5.0 from any version 0.8.x through 2.4.x</a></h4>\n+\n+<p><b>If you are upgrading from a version prior to 2.1.x, please see the note below about the change to the schema used to store consumer offsets.\n+    Once you have changed the inter.broker.protocol.version to the latest version, it will not be possible to downgrade to a version prior to 2.1.</b></p>\n+\n+<p><b>For a rolling upgrade:</b></p>\n+\n+<ol>\n+    <li> Update server.properties on all brokers and add the following properties. CURRENT_KAFKA_VERSION refers to the version you\n+        are upgrading from. CURRENT_MESSAGE_FORMAT_VERSION refers to the message format version currently in use. If you have previously\n+        overridden the message format version, you should keep its current value. Alternatively, if you are upgrading from a version prior\n+        to 0.11.0.x, then CURRENT_MESSAGE_FORMAT_VERSION should be set to match CURRENT_KAFKA_VERSION.\n+        <ul>\n+            <li>inter.broker.protocol.version=CURRENT_KAFKA_VERSION (e.g., <code>2.4</code>, <code>2.3</code>, etc.)</li>\n+            <li>log.message.format.version=CURRENT_MESSAGE_FORMAT_VERSION  (See <a href=\"#upgrade_10_performance_impact\">potential performance impact\n+                following the upgrade</a> for the details on what this configuration does.)</li>\n+        </ul>\n+        If you are upgrading from version 0.11.0.x or above, and you have not overridden the message format, then you only need to override\n+        the inter-broker protocol version.\n+        <ul>\n+            <li>inter.broker.protocol.version=CURRENT_KAFKA_VERSION (e.g., <code>2.4</code>, <code>2.3</code>, etc.)</li>\n+        </ul>\n+    </li>\n+    <li> Upgrade the brokers one at a time: shut down the broker, update the code, and restart it. Once you have done so, the\n+        brokers will be running the latest version and you can verify that the cluster's behavior and performance meets expectations.\n+        It is still possible to downgrade at this point if there are any problems.\n+    </li>\n+    <li> Once the cluster's behavior and performance has been verified, bump the protocol version by editing\n+        <code>inter.broker.protocol.version</code> and setting it to <code>2.5</code>.\n+    </li>\n+    <li> Restart the brokers one by one for the new protocol version to take effect. Once the brokers begin using the latest\n+        protocol version, it will no longer be possible to downgrade the cluster to an older version.\n+    </li>\n+    <li> If you have overridden the message format version as instructed above, then you need to do one more rolling restart to\n+        upgrade it to its latest version. Once all (or most) consumers have been upgraded to 0.11.0 or later,\n+        change log.message.format.version to 2.5 on each broker and restart them one by one. Note that the older Scala clients,\n+        which are no longer maintained, do not support the message format introduced in 0.11, so to avoid conversion costs\n+        (or to take advantage of <a href=\"#upgrade_11_exactly_once_semantics\">exactly once semantics</a>),\n+        the newer Java clients must be used.\n+    </li>\n+</ol>\n+\n+<h5 class=\"anchor-heading\"><a id=\"upgrade_250_notable\" class=\"anchor-link\"></a><a href=\"#upgrade_250_notable\">Notable changes in 2.5.0</a></h5>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d73f7819d928143f23f3523b667735502f072475"}, "originalPosition": 157}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIyNDI3NjA2OnYy", "diffSide": "RIGHT", "path": "docs/upgrade.html", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQyMTozMzoxMVrOHqvh6g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQyMTozMzoxMVrOHqvh6g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDU4MDk3MA==", "bodyText": "This whole section is new, but should be standard instructions", "url": "https://github.com/apache/kafka/pull/9532#discussion_r514580970", "createdAt": "2020-10-29T21:33:11Z", "author": {"login": "bbejeck"}, "path": "docs/upgrade.html", "diffHunk": "@@ -21,6 +21,48 @@\n \n <h5><a id=\"upgrade_280_notable\" href=\"#upgrade_280_notable\">Notable changes in 2.8.0</a></h5>\n \n+<h4><a id=\"upgrade_2_7_0\" href=\"#upgrade_2_7_0\">Upgrading to 2.7.0 from any version 0.8.x through 2.6.x</a></h4>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d73f7819d928143f23f3523b667735502f072475"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIyNDI3NzI0OnYy", "diffSide": "RIGHT", "path": "docs/documentation.html", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQyMTozMzo0MVrOHqvitg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQyMTozMzo0MVrOHqvitg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDU4MTE3NA==", "bodyText": "Current 2.6 docs part of AK site update", "url": "https://github.com/apache/kafka/pull/9532#discussion_r514581174", "createdAt": "2020-10-29T21:33:41Z", "author": {"login": "bbejeck"}, "path": "docs/documentation.html", "diffHunk": "@@ -22,51 +22,56 @@\n \n \n <div class=\"content documentation documentation--current\">\n-\t<!--#include virtual=\"../includes/_nav.htm\" -->\n-\t<div class=\"right\">\n-\t\t<!--#include virtual=\"../includes/_docs_banner.htm\" -->\n+ <!--#include virtual=\"../includes/_nav.htm\" -->\n+  <div class=\"toc-handle-container\">\n+    <div class=\"toc-handle\">&lt;</div>\n+  </div>\n+  <div class=\"docs-nav\">\n+    <!--#include virtual=\"toc.html\" -->\n+  </div>\n+  <div class=\"right\">\n+    <!--//#include virtual=\"../includes/_docs_banner.htm\" -->\n+    \n     <h1>Documentation</h1>\n     <h3>Kafka 2.8 Documentation</h3>\n     Prior releases: <a href=\"/07/documentation.html\">0.7.x</a>, <a href=\"/08/documentation.html\">0.8.0</a>, <a href=\"/081/documentation.html\">0.8.1.X</a>, <a href=\"/082/documentation.html\">0.8.2.X</a>, <a href=\"/090/documentation.html\">0.9.0.X</a>, <a href=\"/0100/documentation.html\">0.10.0.X</a>, <a href=\"/0101/documentation.html\">0.10.1.X</a>, <a href=\"/0102/documentation.html\">0.10.2.X</a>, <a href=\"/0110/documentation.html\">0.11.0.X</a>, <a href=\"/10/documentation.html\">1.0.X</a>, <a href=\"/11/documentation.html\">1.1.X</a>, <a href=\"/20/documentation.html\">2.0.X</a>, <a href=\"/21/documentation.html\">2.1.X</a>, <a href=\"/22/documentation.html\">2.2.X</a>, <a href=\"/23/documentation.html\">2.3.X</a>, <a href=\"/24/documentation.html\">2.4.X</a>, <a href=\"/25/documentation.html\">2.5.X</a>, <a href=\"/26/documentation.html\">2.6.X</a>, <a href=\"/27/documentation.html\">2.7.X</a>.\n \n-    <!--#include virtual=\"toc.html\" -->\n-\n-    <h2><a id=\"gettingStarted\" href=\"#gettingStarted\">1. Getting Started</a></h2>\n-      <h3><a id=\"introduction\" href=\"#introduction\">1.1 Introduction</a></h3>\n+   <h2 class=\"anchor-heading\"><a id=\"gettingStarted\" class=\"anchor-link\"></a><a href=\"#gettingStarted\">1. Getting Started</a></h2>\n+      <h3 class=\"anchor-heading\"><a id=\"introduction\" class=\"anchor-link\"></a><a href=\"#introduction\">1.1 Introduction</a></h3>\n       <!--#include virtual=\"introduction.html\" -->\n-      <h3><a id=\"uses\" href=\"#uses\">1.2 Use Cases</a></h3>\n+      <h3 class=\"anchor-heading\"><a id=\"uses\" class=\"anchor-link\"></a><a href=\"#uses\">1.2 Use Cases</a></h3>\n       <!--#include virtual=\"uses.html\" -->\n-      <h3><a id=\"quickstart\" href=\"#quickstart\">1.3 Quick Start</a></h3>\n-      <!--#include virtual=\"quickstart.html\" -->\n-      <h3><a id=\"ecosystem\" href=\"#ecosystem\">1.4 Ecosystem</a></h3>\n+      <h3 class=\"anchor-heading\"><a id=\"quickstart\" class=\"anchor-link\"></a><a href=\"#quickstart\">1.3 Quick Start</a></h3>\n+      <!--#include virtual=\"quickstart-zookeeper.html\" -->\n+      <h3 class=\"anchor-heading\"><a id=\"ecosystem\" class=\"anchor-link\"></a><a href=\"#ecosystem\">1.4 Ecosystem</a></h3>\n       <!--#include virtual=\"ecosystem.html\" -->\n-      <h3><a id=\"upgrade\" href=\"#upgrade\">1.5 Upgrading From Previous Versions</a></h3>\n+      <h3 class=\"anchor-heading\"><a id=\"upgrade\" class=\"anchor-link\"></a><a href=\"#upgrade\">1.5 Upgrading From Previous Versions</a></h3>\n       <!--#include virtual=\"upgrade.html\" -->\n \n-    <h2><a id=\"api\" href=\"#api\">2. APIs</a></h2>\n+    <h2 class=\"anchor-heading\"><a id=\"api\" class=\"anchor-link\"></a><a href=\"#api\">2. APIs</a></h2>\n \n     <!--#include virtual=\"api.html\" -->\n \n-    <h2><a id=\"configuration\" href=\"#configuration\">3. Configuration</a></h2>\n+    <h2 class=\"anchor-heading\"><a id=\"configuration\" class=\"anchor-link\"></a><a href=\"#configuration\">3. Configuration</a></h2>\n \n     <!--#include virtual=\"configuration.html\" -->\n \n-    <h2><a id=\"design\" href=\"#design\">4. Design</a></h2>\n+    <h2 class=\"anchor-heading\"><a id=\"design\" class=\"anchor-link\"></a><a href=\"#design\">4. Design</a></h2>\n \n     <!--#include virtual=\"design.html\" -->\n \n-    <h2><a id=\"implementation\" href=\"#implementation\">5. Implementation</a></h2>\n+    <h2 class=\"anchor-heading\"><a id=\"implementation\" class=\"anchor-link\"></a><a href=\"#implementation\">5. Implementation</a></h2>\n \n     <!--#include virtual=\"implementation.html\" -->\n \n-    <h2><a id=\"operations\" href=\"#operations\">6. Operations</a></h2>\n+    <h2 class=\"anchor-heading\"><a id=\"operations\" class=\"anchor-link\"></a><a href=\"#operations\">6. Operations</a></h2>\n \n     <!--#include virtual=\"ops.html\" -->\n \n-    <h2><a id=\"security\" href=\"#security\">7. Security</a></h2>\n+    <h2 class=\"anchor-heading\"><a id=\"security\" class=\"anchor-link\"></a><a href=\"#security\">7. Security</a></h2>\n     <!--#include virtual=\"security.html\" -->\n \n-    <h2><a id=\"connect\" href=\"#connect\">8. Kafka Connect</a></h2>\n+    <h2 class=\"anchor-heading\"><a id=\"connect\" class=\"anchor-link\"></a><a href=\"#connect\">8. Kafka Connect</a></h2>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d73f7819d928143f23f3523b667735502f072475"}, "originalPosition": 72}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIyNDI3ODQ5OnYy", "diffSide": "RIGHT", "path": "docs/documentation.html", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQyMTozNDowN1rOHqvjlg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQyMTozNDowN1rOHqvjlg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDU4MTM5OA==", "bodyText": "Current docs, part of AK site upgrade", "url": "https://github.com/apache/kafka/pull/9532#discussion_r514581398", "createdAt": "2020-10-29T21:34:07Z", "author": {"login": "bbejeck"}, "path": "docs/documentation.html", "diffHunk": "@@ -22,51 +22,56 @@\n \n \n <div class=\"content documentation documentation--current\">\n-\t<!--#include virtual=\"../includes/_nav.htm\" -->\n-\t<div class=\"right\">\n-\t\t<!--#include virtual=\"../includes/_docs_banner.htm\" -->\n+ <!--#include virtual=\"../includes/_nav.htm\" -->\n+  <div class=\"toc-handle-container\">\n+    <div class=\"toc-handle\">&lt;</div>\n+  </div>\n+  <div class=\"docs-nav\">\n+    <!--#include virtual=\"toc.html\" -->\n+  </div>\n+  <div class=\"right\">\n+    <!--//#include virtual=\"../includes/_docs_banner.htm\" -->\n+    ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d73f7819d928143f23f3523b667735502f072475"}, "originalPosition": 16}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3759, "cost": 1, "resetAt": "2021-11-12T11:18:39Z"}}}