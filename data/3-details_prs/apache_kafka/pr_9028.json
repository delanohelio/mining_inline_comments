{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ5NTgzOTg4", "number": 9028, "title": "KAFKA-10035: Safer conversion of consumer timeout parameters", "bodyText": "In org.apache.kafka.streams.integration.AbstractResetIntegrationTest:\n\nCorrected types of consumer timeout params: STREAMS_CONSUMER_TIMEOUT  and CLEANUP_CONSUMER_TIMEOUT  from long to int\nType-safe conversion from int to String\n\nCommitter Checklist (excluded from commit message)\n\n Verify design and implementation\n Verify test coverage and CI build status\n Verify documentation (including upgrade notes)", "createdAt": "2020-07-15T16:09:43Z", "url": "https://github.com/apache/kafka/pull/9028", "merged": true, "mergeCommit": {"oid": "567d76c7f823aed44be6c82ab390760bdbad0387"}, "closed": true, "closedAt": "2020-08-21T19:35:35Z", "author": {"login": "serjchebotarev"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc1iHymgFqTQ1MDAxNzA5NA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc5GxzwAFqTQ1NjA2MTk5MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwMDE3MDk0", "url": "https://github.com/apache/kafka/pull/9028#pullrequestreview-450017094", "createdAt": "2020-07-16T16:29:20Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQxNjoyOToyMFrOGyy7TA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQxNjo0NzoyMVrOGyzmAA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTkxNjM2NA==", "bodyText": "Hah, this was pretty janky. Good catch", "url": "https://github.com/apache/kafka/pull/9028#discussion_r455916364", "createdAt": "2020-07-16T16:29:20Z", "author": {"login": "ableegoldman"}, "path": "streams/src/test/java/org/apache/kafka/streams/integration/AbstractResetIntegrationTest.java", "diffHunk": "@@ -151,7 +151,7 @@ private void prepareConfigs() {\n         streamsConfig.put(StreamsConfig.COMMIT_INTERVAL_MS_CONFIG, 100);\n         streamsConfig.put(ConsumerConfig.HEARTBEAT_INTERVAL_MS_CONFIG, 100);\n         streamsConfig.put(ConsumerConfig.AUTO_OFFSET_RESET_CONFIG, \"earliest\");\n-        streamsConfig.put(ConsumerConfig.SESSION_TIMEOUT_MS_CONFIG, \"\" + STREAMS_CONSUMER_TIMEOUT);", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTkyNzI5Ng==", "bodyText": "Why are none of these tests...actually tests? Can you also fix this, ie add @Test annotations to all the tests here?\nI think you can then simplify the two tests that extend this abstract test class (ResetIntegrationTest and ResetIntegrationWithSslTest) and just remove all the tests that just call super.testXXX -- they should automatically run all of the tests in this class", "url": "https://github.com/apache/kafka/pull/9028#discussion_r455927296", "createdAt": "2020-07-16T16:47:21Z", "author": {"login": "ableegoldman"}, "path": "streams/src/test/java/org/apache/kafka/streams/integration/AbstractResetIntegrationTest.java", "diffHunk": "@@ -265,7 +265,7 @@ public void shouldNotAllowToResetWhenIntermediateTopicAbsent() throws Exception\n     public void testResetWhenLongSessionTimeoutConfiguredWithForceOption() throws Exception {", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 48}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwMjQ0MTcz", "url": "https://github.com/apache/kafka/pull/9028#pullrequestreview-450244173", "createdAt": "2020-07-16T21:56:13Z", "commit": null, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQyMTo1NjoxNFrOGy-M6A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQyMTo1NjoxNFrOGy-M6A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjEwMTA5Ng==", "bodyText": "Thanks for looking into this! It definitely doesn't sound good that some of these tests don't pass with SSL. Maybe there's just some additional setup that's needed for these tests? \ud83e\udd14\nAnyways, we don't need to solve all that in this PR. We can revisit the issue once this is merged", "url": "https://github.com/apache/kafka/pull/9028#discussion_r456101096", "createdAt": "2020-07-16T21:56:14Z", "author": {"login": "ableegoldman"}, "path": "streams/src/test/java/org/apache/kafka/streams/integration/AbstractResetIntegrationTest.java", "diffHunk": "@@ -265,7 +265,7 @@ public void shouldNotAllowToResetWhenIntermediateTopicAbsent() throws Exception\n     public void testResetWhenLongSessionTimeoutConfiguredWithForceOption() throws Exception {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTkyNzI5Ng=="}, "originalCommit": null, "originalPosition": 48}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUyMDM1NDAz", "url": "https://github.com/apache/kafka/pull/9028#pullrequestreview-452035403", "createdAt": "2020-07-20T23:55:21Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQyMzo1NToyMlrOG0jNfw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQyMzo1NToyMlrOG0jNfw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzc1NjAzMQ==", "bodyText": "A new safeUniqueTestName method was added to IntegrationTestUtils recently, can we port this class over to using that instead of hard-coding a semi-descriptive suffix to the appId in each test?", "url": "https://github.com/apache/kafka/pull/9028#discussion_r457756031", "createdAt": "2020-07-20T23:55:22Z", "author": {"login": "ableegoldman"}, "path": "streams/src/test/java/org/apache/kafka/streams/integration/ResetIntegrationTest.java", "diffHunk": "@@ -68,52 +92,224 @@ public void after() throws Exception {\n     }\n \n     @Test\n-    public void testReprocessingFromScratchAfterResetWithoutIntermediateUserTopic() throws Exception {\n-        super.testReprocessingFromScratchAfterResetWithoutIntermediateUserTopic();\n+    public void shouldNotAllowToResetWhileStreamsIsRunning() {\n+        final String appID = getTestId() + \"-not-reset-during-runtime\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 73}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5f23dd5b2fb2ef9dc51f0dc80df1ac80c2d622c3", "author": {"user": null}, "url": "https://github.com/apache/kafka/commit/5f23dd5b2fb2ef9dc51f0dc80df1ac80c2d622c3", "committedDate": "2020-07-22T09:00:26Z", "message": "Safer conversion of consumer timeout params"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6b5c1b3bc7b3497fc6682283861aa4d9f15d7257", "author": {"user": null}, "url": "https://github.com/apache/kafka/commit/6b5c1b3bc7b3497fc6682283861aa4d9f15d7257", "committedDate": "2020-07-22T09:00:26Z", "message": "Move some of @Test annotations to base class"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2b83a7d7b8f47baa504a95e822adc222e8f0f1a3", "author": {"user": null}, "url": "https://github.com/apache/kafka/commit/2b83a7d7b8f47baa504a95e822adc222e8f0f1a3", "committedDate": "2020-07-22T09:00:26Z", "message": "Move parameterized test to base class"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dcca1af575d3992b92cefa07be3c0ee8ce68bb43", "author": {"user": null}, "url": "https://github.com/apache/kafka/commit/dcca1af575d3992b92cefa07be3c0ee8ce68bb43", "committedDate": "2020-07-22T09:01:37Z", "message": "Move non-SSL tests to derived class"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eca1b16200e8d089267ec3c9ec0120c3e96f23f3", "author": {"user": null}, "url": "https://github.com/apache/kafka/commit/eca1b16200e8d089267ec3c9ec0120c3e96f23f3", "committedDate": "2020-07-22T09:01:37Z", "message": "getTestId() instead of class variable\n\nAlso removed instance-level `appID` variable."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0e06f15bbeb5aea027d369795f7dbd0fc139b660", "author": {"user": null}, "url": "https://github.com/apache/kafka/commit/0e06f15bbeb5aea027d369795f7dbd0fc139b660", "committedDate": "2020-07-22T09:01:37Z", "message": "Use safeUniqueTestName() to generate test IDs"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "0e06f15bbeb5aea027d369795f7dbd0fc139b660", "author": {"user": null}, "url": "https://github.com/apache/kafka/commit/0e06f15bbeb5aea027d369795f7dbd0fc139b660", "committedDate": "2020-07-22T09:01:37Z", "message": "Use safeUniqueTestName() to generate test IDs"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU2MDYxOTkx", "url": "https://github.com/apache/kafka/pull/9028#pullrequestreview-456061991", "createdAt": "2020-07-27T19:13:37Z", "commit": {"oid": "0e06f15bbeb5aea027d369795f7dbd0fc139b660"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1304, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}