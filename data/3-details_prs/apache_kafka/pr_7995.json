{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY1NTk3MDIy", "number": 7995, "title": "KAFKA-9462: Correct exception message in DistributedHerder", "bodyText": "There are a few exception messages in DistributedHerder which were copied from other exception message.\nThis PR corrects the messages to reflect actual condition\nCommitter Checklist (excluded from commit message)\n\n Verify design and implementation\n Verify test coverage and CI build status\n Verify documentation (including upgrade notes)", "createdAt": "2020-01-22T00:10:55Z", "url": "https://github.com/apache/kafka/pull/7995", "merged": true, "mergeCommit": {"oid": "8e5faca963cdcb082c882a5e726327b36e9701f0"}, "closed": true, "closedAt": "2020-01-24T19:56:09Z", "author": {"login": "tedyu"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb9TbcggFqTM0NzY4NTY2NQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABb9kbTjgFqTM0ODE4Njg4Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ3Njg1NjY1", "url": "https://github.com/apache/kafka/pull/7995#pullrequestreview-347685665", "createdAt": "2020-01-23T23:58:13Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QyMzo1ODoxM1rOFhQdCA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQwMDowMToyM1rOFhQgBA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDQxNjkwNA==", "bodyText": "This change is a good suggestion.", "url": "https://github.com/apache/kafka/pull/7995#discussion_r370416904", "createdAt": "2020-01-23T23:58:13Z", "author": {"login": "rhauch"}, "path": "connect/runtime/src/main/java/org/apache/kafka/connect/runtime/distributed/DistributedHerder.java", "diffHunk": "@@ -699,7 +699,7 @@ public void deleteConnectorConfig(final String connName, final Callback<Created<\n                     public Void call() throws Exception {\n                         log.trace(\"Handling connector config request {}\", connName);\n                         if (!isLeader()) {\n-                            callback.onCompletion(new NotLeaderException(\"Only the leader can set connector configs.\", leaderUrl()), null);\n+                            callback.onCompletion(new NotLeaderException(\"Only the leader can delete connector configs.\", leaderUrl()), null);", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDQxNzYwMg==", "bodyText": "I think this change is actually less clear. Workers (members of the cluster) can be leaders, while connectors and tasks are assigned to workers. But connectors/tasks are not workers (members), so it's actually incorrect to say \"Cannot restart task since it [the task] is not a leader\".\nAbout the only improvement to the original message that adds value is to change \"member\" to \"worker\", though the value is debatable since we do sometimes use \"member\" in other log messages (including in this class!).", "url": "https://github.com/apache/kafka/pull/7995#discussion_r370417602", "createdAt": "2020-01-24T00:01:08Z", "author": {"login": "rhauch"}, "path": "connect/runtime/src/main/java/org/apache/kafka/connect/runtime/distributed/DistributedHerder.java", "diffHunk": "@@ -946,7 +946,7 @@ public Void call() throws Exception {\n                 } else if (isLeader()) {\n                     callback.onCompletion(new NotAssignedException(\"Cannot restart task since it is not assigned to this member\", member.ownerUrl(id)), null);\n                 } else {\n-                    callback.onCompletion(new NotLeaderException(\"Cannot restart task since it is not assigned to this member\", leaderUrl()), null);\n+                    callback.onCompletion(new NotLeaderException(\"Cannot restart task since it is not leader\", leaderUrl()), null);", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDQxNzY2OA==", "bodyText": "Same concern here about this change being less clear, as mentioned in my other comment.", "url": "https://github.com/apache/kafka/pull/7995#discussion_r370417668", "createdAt": "2020-01-24T00:01:23Z", "author": {"login": "rhauch"}, "path": "connect/runtime/src/main/java/org/apache/kafka/connect/runtime/distributed/DistributedHerder.java", "diffHunk": "@@ -908,7 +908,7 @@ public Void call() throws Exception {\n                 } else if (isLeader()) {\n                     callback.onCompletion(new NotAssignedException(\"Cannot restart connector since it is not assigned to this member\", member.ownerUrl(connName)), null);\n                 } else {\n-                    callback.onCompletion(new NotLeaderException(\"Cannot restart connector since it is not assigned to this member\", leaderUrl()), null);\n+                    callback.onCompletion(new NotLeaderException(\"Cannot restart connector since it is not leader\", leaderUrl()), null);", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "570109a9da76a1aa26d581f309e278c4d73d1cc0", "author": {"user": {"login": "yutedz", "name": null}}, "url": "https://github.com/apache/kafka/commit/570109a9da76a1aa26d581f309e278c4d73d1cc0", "committedDate": "2020-01-24T00:06:22Z", "message": "Correct exception message in DistributedHerder"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "570109a9da76a1aa26d581f309e278c4d73d1cc0", "author": {"user": {"login": "yutedz", "name": null}}, "url": "https://github.com/apache/kafka/commit/570109a9da76a1aa26d581f309e278c4d73d1cc0", "committedDate": "2020-01-24T00:06:22Z", "message": "Correct exception message in DistributedHerder"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4MTg2ODgy", "url": "https://github.com/apache/kafka/pull/7995#pullrequestreview-348186882", "createdAt": "2020-01-24T19:50:43Z", "commit": {"oid": "570109a9da76a1aa26d581f309e278c4d73d1cc0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2076, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}