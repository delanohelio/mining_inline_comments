{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQwMjk3NDgz", "number": 8931, "title": "MINOR: Update Scala to 2.13.3", "bodyText": "I had to fix several compiler errors due to deprecation of auto application of (). A related\nXlint config (-Xlint:nullary-override) is no longer valid in 2.13, so we now only enable it\nfor 2.12. The compiler flagged two new inliner warnings that required suppression and\nthe semantics of & in @nowarn annotations changed, requiring a small change in\none of the warning suppressions.\nI also removed the deprecation of a number of methods in KafkaZkClient as\nthey should not have been deprecated in the first place since KafkaZkClient is an\ninternal class and we still use these methods in the Controller and so on. This\nbecame visible because the Scala compiler now respects Java's @Deprecated\nannotation.\nFinally, I included a few minor clean-ups (eg using toBuffer instead toList) when fixing\nthe compilation warnings.\nNoteworthy bug fixes in Scala 2.13.3:\n\nFix 2.13-only bug in Java collection converters that caused some operations to perform an extra pass\nFix 2.13.2 performance regression in Vector: restore special cases for small operands in appendedAll and prependedAll\nIncrease laziness of #:: for LazyList\nFixes related to annotation parsing of @deprecated from Java sources in mixed compilation\n\nFull release notes:\nhttps://github.com/scala/scala/releases/tag/v2.13.3\nCommitter Checklist (excluded from commit message)\n\n Verify design and implementation\n Verify test coverage and CI build status\n Verify documentation (including upgrade notes)", "createdAt": "2020-06-25T22:58:25Z", "url": "https://github.com/apache/kafka/pull/8931", "merged": true, "mergeCommit": {"oid": "7f90a58b69cd0eb63ba122b41e6ef6195b0a5d98"}, "closed": true, "closedAt": "2020-06-26T17:19:05Z", "author": {"login": "ijuma"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcu2wZWAH2gAyNDQwMjk3NDgzOjJmOTI2YTM4MGVmZTNhNTgzNzkyOTlmODE4ODE5Mjg5OTRlMjc2MDg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcvCWzBAFqTQzODI1MTMwMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2f926a380efe3a58379299f81881928994e27608", "author": {"user": {"login": "ijuma", "name": "Ismael Juma"}}, "url": "https://github.com/apache/kafka/commit/2f926a380efe3a58379299f81881928994e27608", "committedDate": "2020-06-25T22:54:20Z", "message": "MINOR: Update Scala to 2.13.3"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5cd67f5d20af0cffb62f75c21ba2ee4136431f4c", "author": {"user": {"login": "ijuma", "name": "Ismael Juma"}}, "url": "https://github.com/apache/kafka/commit/5cd67f5d20af0cffb62f75c21ba2ee4136431f4c", "committedDate": "2020-06-26T02:45:17Z", "message": "Only enable Xlint:nullary-override for Scala 2.12"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bc0e1294880f39e726f68334e1e09c7c0fc06c0d", "author": {"user": {"login": "ijuma", "name": "Ismael Juma"}}, "url": "https://github.com/apache/kafka/commit/bc0e1294880f39e726f68334e1e09c7c0fc06c0d", "committedDate": "2020-06-26T02:46:13Z", "message": "Compilation fixes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ee86c0a8906920e3872720b567d1976d125830dc", "author": {"user": {"login": "ijuma", "name": "Ismael Juma"}}, "url": "https://github.com/apache/kafka/commit/ee86c0a8906920e3872720b567d1976d125830dc", "committedDate": "2020-06-26T03:38:51Z", "message": "More compiler error fixes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "261ab95d14bbc7d88b6d57f5ad291351eed91e0b", "author": {"user": {"login": "ijuma", "name": "Ismael Juma"}}, "url": "https://github.com/apache/kafka/commit/261ab95d14bbc7d88b6d57f5ad291351eed91e0b", "committedDate": "2020-06-26T03:40:54Z", "message": "More fixes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM4MjQzOTgz", "url": "https://github.com/apache/kafka/pull/8931#pullrequestreview-438243983", "createdAt": "2020-06-26T12:12:43Z", "commit": {"oid": "261ab95d14bbc7d88b6d57f5ad291351eed91e0b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQxMjoxMjo0M1rOGpelQg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQxMjoxMjo0M1rOGpelQg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjE0NTg1OA==", "bodyText": "This avoids the tuple creation.", "url": "https://github.com/apache/kafka/pull/8931#discussion_r446145858", "createdAt": "2020-06-26T12:12:43Z", "author": {"login": "ijuma"}, "path": "core/src/main/scala/kafka/security/authorizer/AclAuthorizer.scala", "diffHunk": "@@ -548,9 +550,9 @@ class AclAuthorizer extends Authorizer with Logging {\n \n   private def updateCache(resource: ResourcePattern, versionedAcls: VersionedAcls): Unit = {\n     if (versionedAcls.acls.nonEmpty) {\n-      aclCache = aclCache + (resource -> versionedAcls)\n+      aclCache = aclCache.updated(resource, versionedAcls)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "261ab95d14bbc7d88b6d57f5ad291351eed91e0b"}, "originalPosition": 41}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM4MjQ0Njg1", "url": "https://github.com/apache/kafka/pull/8931#pullrequestreview-438244685", "createdAt": "2020-06-26T12:14:02Z", "commit": {"oid": "261ab95d14bbc7d88b6d57f5ad291351eed91e0b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQxMjoxNDowMlrOGpencA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQxMjoxNDowMlrOGpencA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjE0NjQxNg==", "bodyText": "The behavior of & was changed so that both conditions have to evaluate to true for a warning to match the exclusion.", "url": "https://github.com/apache/kafka/pull/8931#discussion_r446146416", "createdAt": "2020-06-26T12:14:02Z", "author": {"login": "ijuma"}, "path": "core/src/main/scala/kafka/security/authorizer/AclAuthorizer.scala", "diffHunk": "@@ -367,7 +367,8 @@ class AclAuthorizer extends Authorizer with Logging {\n     } else false\n   }\n \n-  @nowarn(\"cat=deprecation&cat=optimizer\")\n+  @nowarn(\"cat=deprecation\")\n+  @nowarn(\"cat=optimizer\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "261ab95d14bbc7d88b6d57f5ad291351eed91e0b"}, "originalPosition": 15}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM4MjQ0OTcw", "url": "https://github.com/apache/kafka/pull/8931#pullrequestreview-438244970", "createdAt": "2020-06-26T12:14:33Z", "commit": {"oid": "261ab95d14bbc7d88b6d57f5ad291351eed91e0b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQxMjoxNDozM1rOGpeoUw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQxMjoxNDozM1rOGpeoUw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjE0NjY0Mw==", "bodyText": "New warning flagged by the compiler.", "url": "https://github.com/apache/kafka/pull/8931#discussion_r446146643", "createdAt": "2020-06-26T12:14:33Z", "author": {"login": "ijuma"}, "path": "core/src/main/scala/kafka/security/authorizer/AclAuthorizer.scala", "diffHunk": "@@ -538,6 +539,7 @@ class AclAuthorizer extends Authorizer with Logging {\n     }\n   }\n \n+  @nowarn(\"cat=optimizer\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "261ab95d14bbc7d88b6d57f5ad291351eed91e0b"}, "originalPosition": 32}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM4MjQ1MTEx", "url": "https://github.com/apache/kafka/pull/8931#pullrequestreview-438245111", "createdAt": "2020-06-26T12:14:50Z", "commit": {"oid": "261ab95d14bbc7d88b6d57f5ad291351eed91e0b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQxMjoxNDo1MVrOGpeotQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQxMjoxNDo1MVrOGpeotQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjE0Njc0MQ==", "bodyText": "New warning flagged by the compiler.", "url": "https://github.com/apache/kafka/pull/8931#discussion_r446146741", "createdAt": "2020-06-26T12:14:51Z", "author": {"login": "ijuma"}, "path": "core/src/main/scala/kafka/admin/ConsumerGroupCommand.scala", "diffHunk": "@@ -566,6 +568,7 @@ object ConsumerGroupCommand extends Logging {\n     /**\n       * Returns the state of the specified consumer group and partition assignment states\n       */\n+    @nowarn(\"cat=optimizer\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "261ab95d14bbc7d88b6d57f5ad291351eed91e0b"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM4MjQ1OTk3", "url": "https://github.com/apache/kafka/pull/8931#pullrequestreview-438245997", "createdAt": "2020-06-26T12:16:21Z", "commit": {"oid": "261ab95d14bbc7d88b6d57f5ad291351eed91e0b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQxMjoxNjoyMVrOGperbA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQxMjoxNjoyMVrOGperbA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjE0NzQzNg==", "bodyText": "toBuffer is more efficient than toList and sorted returns a copy anyway.", "url": "https://github.com/apache/kafka/pull/8931#discussion_r446147436", "createdAt": "2020-06-26T12:16:21Z", "author": {"login": "ijuma"}, "path": "core/src/main/scala/kafka/server/KafkaConfig.scala", "diffHunk": "@@ -1210,7 +1210,7 @@ object KafkaConfig {\n       .define(PasswordEncoderIterationsProp, INT, Defaults.PasswordEncoderIterations, atLeast(1024), LOW, PasswordEncoderIterationsDoc)\n   }\n \n-  def configNames() = configDef.names().asScala.toList.sorted\n+  def configNames: Seq[String] = configDef.names.asScala.toBuffer.sorted", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "261ab95d14bbc7d88b6d57f5ad291351eed91e0b"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM4MjQ2NTU0", "url": "https://github.com/apache/kafka/pull/8931#pullrequestreview-438246554", "createdAt": "2020-06-26T12:17:22Z", "commit": {"oid": "261ab95d14bbc7d88b6d57f5ad291351eed91e0b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQxMjoxNzoyMlrOGpetIg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQxMjoxNzoyMlrOGpetIg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjE0Nzg3NA==", "bodyText": "It doesn't make sense to deprecate a method in an internal class that is still needed by our code. Removed the deprecation of various KafkaZkClient classes. cc @stanislavkozlovski", "url": "https://github.com/apache/kafka/pull/8931#discussion_r446147874", "createdAt": "2020-06-26T12:17:22Z", "author": {"login": "ijuma"}, "path": "core/src/main/scala/kafka/zk/KafkaZkClient.scala", "diffHunk": "@@ -810,10 +810,8 @@ class KafkaZkClient private[zk] (zooKeeperClient: ZooKeeperClient, isSecure: Boo\n   /**\n    * Returns all reassignments.\n    * @return the reassignments for each partition.\n-   * @deprecated Use the PartitionReassignment Kafka API instead\n    */\n-  @Deprecated", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "261ab95d14bbc7d88b6d57f5ad291351eed91e0b"}, "originalPosition": 60}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM4MjUxMzAy", "url": "https://github.com/apache/kafka/pull/8931#pullrequestreview-438251302", "createdAt": "2020-06-26T12:25:14Z", "commit": {"oid": "261ab95d14bbc7d88b6d57f5ad291351eed91e0b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 744, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}