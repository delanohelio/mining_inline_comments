{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc3OTI2ODI3", "number": 8142, "reviewThreads": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQxOToxNzo0N1rODhpdAw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMVQyMTowOTo1MFrODiA10A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM2NjA4NzcxOnYy", "diffSide": "RIGHT", "path": "clients/src/main/java/org/apache/kafka/common/security/authenticator/SaslClientAuthenticator.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQxOToxNzo0N1rOFsf7qA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMVQyMToxOTozN1rOFtE6oQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjIwNDg0MA==", "bodyText": "Set the versions for both auth and handshake the same way.", "url": "https://github.com/apache/kafka/pull/8142#discussion_r382204840", "createdAt": "2020-02-20T19:17:47Z", "author": {"login": "lbradstreet"}, "path": "clients/src/main/java/org/apache/kafka/common/security/authenticator/SaslClientAuthenticator.java", "diffHunk": "@@ -213,13 +215,13 @@ public void authenticate() throws IOException {\n                 if (apiVersionsResponse == null)\n                     break;\n                 else {\n-                    saslAuthenticateVersion(apiVersionsResponse);\n+                    saslApiVersions(apiVersionsResponse);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8b3a7200a857a09377078fc2fceadbb9afb21c78"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjIxNTQwMg==", "bodyText": "nit: saslAuthenticateAndHandshakeVersions() is more intuitive to me (100% subjective, of course; I mention it only in case it didn't occur to you)", "url": "https://github.com/apache/kafka/pull/8142#discussion_r382215402", "createdAt": "2020-02-20T19:37:53Z", "author": {"login": "rondagostino"}, "path": "clients/src/main/java/org/apache/kafka/common/security/authenticator/SaslClientAuthenticator.java", "diffHunk": "@@ -213,13 +215,13 @@ public void authenticate() throws IOException {\n                 if (apiVersionsResponse == null)\n                     break;\n                 else {\n-                    saslAuthenticateVersion(apiVersionsResponse);\n+                    saslApiVersions(apiVersionsResponse);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjIwNDg0MA=="}, "originalCommit": {"oid": "8b3a7200a857a09377078fc2fceadbb9afb21c78"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjgxMDc4NQ==", "bodyText": "Done", "url": "https://github.com/apache/kafka/pull/8142#discussion_r382810785", "createdAt": "2020-02-21T21:19:37Z", "author": {"login": "lbradstreet"}, "path": "clients/src/main/java/org/apache/kafka/common/security/authenticator/SaslClientAuthenticator.java", "diffHunk": "@@ -213,13 +215,13 @@ public void authenticate() throws IOException {\n                 if (apiVersionsResponse == null)\n                     break;\n                 else {\n-                    saslAuthenticateVersion(apiVersionsResponse);\n+                    saslApiVersions(apiVersionsResponse);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjIwNDg0MA=="}, "originalCommit": {"oid": "8b3a7200a857a09377078fc2fceadbb9afb21c78"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM2NjA4ODY3OnYy", "diffSide": "RIGHT", "path": "clients/src/main/resources/common/message/SaslHandshakeRequest.json", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQxOToxODowNFrOFsf8Ng==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQxOToxODowNFrOFsf8Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjIwNDk4Mg==", "bodyText": "Rollback version with comment", "url": "https://github.com/apache/kafka/pull/8142#discussion_r382204982", "createdAt": "2020-02-20T19:18:04Z", "author": {"login": "lbradstreet"}, "path": "clients/src/main/resources/common/message/SaslHandshakeRequest.json", "diffHunk": "@@ -18,9 +18,9 @@\n   \"type\": \"request\",\n   \"name\": \"SaslHandshakeRequest\",\n   // Version 1 supports SASL_AUTHENTICATE.\n-  // Version 2 adds flexible version support\n-  \"validVersions\": \"0-2\",\n-  \"flexibleVersions\": \"2+\",\n+  // NOTE: Version cannot be easily bumped due to incorrect", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8b3a7200a857a09377078fc2fceadbb9afb21c78"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM2NjA5MTU1OnYy", "diffSide": "RIGHT", "path": "clients/src/test/java/org/apache/kafka/common/security/authenticator/SaslAuthenticatorTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQxOToxODo0NVrOFsf9yg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQxOToxODo0NVrOFsf9yg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjIwNTM4Ng==", "bodyText": "Rename as this only tested part of the version support.", "url": "https://github.com/apache/kafka/pull/8142#discussion_r382205386", "createdAt": "2020-02-20T19:18:45Z", "author": {"login": "lbradstreet"}, "path": "clients/src/test/java/org/apache/kafka/common/security/authenticator/SaslAuthenticatorTest.java", "diffHunk": "@@ -677,7 +677,7 @@ public void testUnauthenticatedApiVersionsRequestOverSslHandshakeVersion1() thro\n      * {@link SaslServerAuthenticator} of the server prior to client authentication.\n      */\n     @Test\n-    public void testApiVersionsRequestWithUnsupportedVersion() throws Exception {\n+    public void testApiVersionsRequestWithServerUnsupportedVersion() throws Exception {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8b3a7200a857a09377078fc2fceadbb9afb21c78"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM2NjA5MjE5OnYy", "diffSide": "RIGHT", "path": "clients/src/test/java/org/apache/kafka/common/security/authenticator/SaslAuthenticatorTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQxOToxODo1NlrOFsf-Jw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQxOToxODo1NlrOFsf-Jw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjIwNTQ3OQ==", "bodyText": "Block anyone from bumping the schema without realizing.", "url": "https://github.com/apache/kafka/pull/8142#discussion_r382205479", "createdAt": "2020-02-20T19:18:56Z", "author": {"login": "lbradstreet"}, "path": "clients/src/test/java/org/apache/kafka/common/security/authenticator/SaslAuthenticatorTest.java", "diffHunk": "@@ -748,6 +767,16 @@ public void testInvalidApiVersionsRequest() throws Exception {\n         authenticateUsingSaslPlainAndCheckConnection(node, handshakeVersion > 0);\n     }\n \n+\n+    @Test\n+    public void testForBrokenSaslHandshakeVersionBump() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8b3a7200a857a09377078fc2fceadbb9afb21c78"}, "originalPosition": 41}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM2NjIyMzM5OnYy", "diffSide": "RIGHT", "path": "clients/src/test/java/org/apache/kafka/common/security/authenticator/SaslAuthenticatorTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQxOTo1OToxNVrOFshPag==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQxOTo1OToxNVrOFshPag==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjIyNjI4Mg==", "bodyText": "It is not possible to easily bump SASL_HANDSHAKE schema without due to... (remove \"without\")", "url": "https://github.com/apache/kafka/pull/8142#discussion_r382226282", "createdAt": "2020-02-20T19:59:15Z", "author": {"login": "rondagostino"}, "path": "clients/src/test/java/org/apache/kafka/common/security/authenticator/SaslAuthenticatorTest.java", "diffHunk": "@@ -748,6 +767,16 @@ public void testInvalidApiVersionsRequest() throws Exception {\n         authenticateUsingSaslPlainAndCheckConnection(node, handshakeVersion > 0);\n     }\n \n+\n+    @Test\n+    public void testForBrokenSaslHandshakeVersionBump() {\n+        assertEquals(\"It is not possible to easily bump SASL_HANDSHAKE schema without \"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8b3a7200a857a09377078fc2fceadbb9afb21c78"}, "originalPosition": 42}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM2OTkxOTUyOnYy", "diffSide": "RIGHT", "path": "clients/src/main/resources/common/message/SaslHandshakeResponse.json", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMVQyMTowOTo1MFrOFtErzg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMVQyMToxMjoyMlrOFtEvmA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjgwNjk5MA==", "bodyText": "Can you specify the client versions with the incorrect negotiation?  2.4 and earlier, right?", "url": "https://github.com/apache/kafka/pull/8142#discussion_r382806990", "createdAt": "2020-02-21T21:09:50Z", "author": {"login": "cmccabe"}, "path": "clients/src/main/resources/common/message/SaslHandshakeResponse.json", "diffHunk": "@@ -18,9 +18,9 @@\n   \"type\": \"response\",\n   \"name\": \"SaslHandshakeResponse\",\n   // Version 1 is the same as version 0.\n-  // Version 2 adds flexible version support\n-  \"validVersions\": \"0-2\",\n-  \"flexibleVersions\": \"2+\",\n+  // NOTE: Version cannot be easily bumped due to incorrect\n+  // client negotiation. See https://issues.apache.org/jira/browse/KAFKA-9577", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "de7274f5673650db5aba20ce600ebb10e82cb04a"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjgwNzUxNw==", "bodyText": "That's right.", "url": "https://github.com/apache/kafka/pull/8142#discussion_r382807517", "createdAt": "2020-02-21T21:11:10Z", "author": {"login": "lbradstreet"}, "path": "clients/src/main/resources/common/message/SaslHandshakeResponse.json", "diffHunk": "@@ -18,9 +18,9 @@\n   \"type\": \"response\",\n   \"name\": \"SaslHandshakeResponse\",\n   // Version 1 is the same as version 0.\n-  // Version 2 adds flexible version support\n-  \"validVersions\": \"0-2\",\n-  \"flexibleVersions\": \"2+\",\n+  // NOTE: Version cannot be easily bumped due to incorrect\n+  // client negotiation. See https://issues.apache.org/jira/browse/KAFKA-9577", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjgwNjk5MA=="}, "originalCommit": {"oid": "de7274f5673650db5aba20ce600ebb10e82cb04a"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjgwNzk2MA==", "bodyText": "Updated.", "url": "https://github.com/apache/kafka/pull/8142#discussion_r382807960", "createdAt": "2020-02-21T21:12:22Z", "author": {"login": "lbradstreet"}, "path": "clients/src/main/resources/common/message/SaslHandshakeResponse.json", "diffHunk": "@@ -18,9 +18,9 @@\n   \"type\": \"response\",\n   \"name\": \"SaslHandshakeResponse\",\n   // Version 1 is the same as version 0.\n-  // Version 2 adds flexible version support\n-  \"validVersions\": \"0-2\",\n-  \"flexibleVersions\": \"2+\",\n+  // NOTE: Version cannot be easily bumped due to incorrect\n+  // client negotiation. See https://issues.apache.org/jira/browse/KAFKA-9577", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjgwNjk5MA=="}, "originalCommit": {"oid": "de7274f5673650db5aba20ce600ebb10e82cb04a"}, "originalPosition": 8}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4053, "cost": 1, "resetAt": "2021-11-12T11:18:39Z"}}}