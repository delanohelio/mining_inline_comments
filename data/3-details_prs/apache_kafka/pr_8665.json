{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE3NzY4MDM0", "number": 8665, "title": "KAFKA-9984 Should fail the subscription when pattern is empty", "bodyText": "Ticket: KAFKA-9984\nIt indicates a configuration error when consumer subscribes an empty pattern:\n\n[Consumer ...  ] Subscribed to pattern:  ''\n\n\nThe consumer.subscribe(pattern) call should fail with illegal argument for this case.", "createdAt": "2020-05-14T05:55:04Z", "url": "https://github.com/apache/kafka/pull/8665", "merged": true, "mergeCommit": {"oid": "f50bd5f80e33598e7fd70290f0c0e809443bc9a0"}, "closed": true, "closedAt": "2020-05-14T21:18:16Z", "author": {"login": "zhaohaidao"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABchG7ChAH2gAyNDE3NzY4MDM0OjYxZWRjZWMyZWE4NTUzYTVjNWUwYzBmZGNjYzEwMmEwMDNmMGJmYTI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABchMoUcgH2gAyNDE3NzY4MDM0OjQwMDRjNGJhODA0NjA3OTExYzg3NDJkNjliZTYyMDI4YjRmYThlMDE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "61edcec2ea8553a5c5e0c0fdccc102a003f0bfa2", "author": {"user": null}, "url": "https://github.com/apache/kafka/commit/61edcec2ea8553a5c5e0c0fdccc102a003f0bfa2", "committedDate": "2020-05-14T05:49:30Z", "message": "KAFKA-9984 Should fail the subscription when pattern is empty"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExNDg1NzQ1", "url": "https://github.com/apache/kafka/pull/8665#pullrequestreview-411485745", "createdAt": "2020-05-14T06:00:41Z", "commit": {"oid": "61edcec2ea8553a5c5e0c0fdccc102a003f0bfa2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExNjMwMzEz", "url": "https://github.com/apache/kafka/pull/8665#pullrequestreview-411630313", "createdAt": "2020-05-14T09:34:15Z", "commit": {"oid": "61edcec2ea8553a5c5e0c0fdccc102a003f0bfa2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQwOTozNDoxNVrOGVUDhQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQwOTozNDoxNVrOGVUDhQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTAwMTg2MQ==", "bodyText": "the condition is always false if you don't add brackets.\nthrow new IllegalArgumentException(\"Topic pattern to subscribe to cannot be \" + (pattern == null ? \"null\" : \"empty\"));", "url": "https://github.com/apache/kafka/pull/8665#discussion_r425001861", "createdAt": "2020-05-14T09:34:15Z", "author": {"login": "chia7712"}, "path": "clients/src/main/java/org/apache/kafka/clients/consumer/KafkaConsumer.java", "diffHunk": "@@ -1015,8 +1015,8 @@ public void subscribe(Collection<String> topics) {\n     @Override\n     public void subscribe(Pattern pattern, ConsumerRebalanceListener listener) {\n         maybeThrowInvalidGroupIdException();\n-        if (pattern == null)\n-            throw new IllegalArgumentException(\"Topic pattern to subscribe to cannot be null\");\n+        if (pattern == null || pattern.toString().equals(\"\"))\n+            throw new IllegalArgumentException(\"Topic pattern to subscribe to cannot be \" + pattern == null ? \"null\" : \"empty\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "61edcec2ea8553a5c5e0c0fdccc102a003f0bfa2"}, "originalPosition": 7}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4004c4ba804607911c8742d69be62028b4fa8e01", "author": {"user": null}, "url": "https://github.com/apache/kafka/commit/4004c4ba804607911c8742d69be62028b4fa8e01", "committedDate": "2020-05-14T12:28:29Z", "message": "Address comments"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 990, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}