{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgwNjU3MTIw", "number": 8181, "title": "KAFKA-9584 Headers ConcurrentModificationException", "bodyText": "Prevent exceptions when modifying headers from within punctuate by creating a new Headers before punctuate is performed.\nUnit test added\nThis contribution is my original work and I license it to the project under the project's open source license.\nCommitter Checklist (excluded from commit message)\n\n Verify design and implementation\n Verify test coverage and CI build status\n Verify documentation (including upgrade notes)", "createdAt": "2020-02-27T06:12:55Z", "url": "https://github.com/apache/kafka/pull/8181", "merged": true, "mergeCommit": {"oid": "340cd07bab7ea0f9caeb0cbf50987bbe38cf126f"}, "closed": true, "closedAt": "2020-09-28T19:56:37Z", "author": {"login": "MicahRam"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdLJHbuAFqTQ5Mjk0MjAyMQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdNZFxfgFqTQ5Nzg0NzMyMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkyOTQyMDIx", "url": "https://github.com/apache/kafka/pull/8181#pullrequestreview-492942021", "createdAt": "2020-09-21T20:07:40Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMVQyMDowNzo0MFrOHVgmnw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMVQyMDowNzo0MFrOHVgmnw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjMxNjMxOQ==", "bodyText": "This is fine, but note that the new consumer record here is just a roundabout way to create a ProcessorRecordContext. It'd probably be better to just directly instantiate the context we want.", "url": "https://github.com/apache/kafka/pull/8181#discussion_r492316319", "createdAt": "2020-09-21T20:07:40Z", "author": {"login": "vvcephei"}, "path": "streams/src/main/java/org/apache/kafka/streams/processor/internals/StreamTask.java", "diffHunk": "@@ -581,8 +580,8 @@ public void punctuate(final ProcessorNode node, final long timestamp, final Punc\n         if (processorContext.currentNode() != null) {\n             throw new IllegalStateException(format(\"%sCurrent node is not null\", logPrefix));\n         }\n-\n-        updateProcessorContext(new StampedRecord(DUMMY_RECORD, timestamp), node);\n+        \n+        updateProcessorContext(new StampedRecord(new ConsumerRecord<>(ProcessorContextImpl.NONEXIST_TOPIC, -1, -1L, null, null), timestamp), node);", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 15}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk1NjM5ODQw", "url": "https://github.com/apache/kafka/pull/8181#pullrequestreview-495639840", "createdAt": "2020-09-24T14:34:14Z", "commit": null, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "PullRequestCommit", "commit": {"oid": "2abe2abfbfe06dd793f300b2557b736ea6ef4638", "author": {"user": null}, "url": "https://github.com/apache/kafka/commit/2abe2abfbfe06dd793f300b2557b736ea6ef4638", "committedDate": "2020-09-26T02:17:30Z", "message": "KAFKA-9584 Headers ConcurrentModificationException"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "2abe2abfbfe06dd793f300b2557b736ea6ef4638", "author": {"user": null}, "url": "https://github.com/apache/kafka/commit/2abe2abfbfe06dd793f300b2557b736ea6ef4638", "committedDate": "2020-09-26T02:17:30Z", "message": "KAFKA-9584 Headers ConcurrentModificationException"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk3ODQ3MzIw", "url": "https://github.com/apache/kafka/pull/8181#pullrequestreview-497847320", "createdAt": "2020-09-28T19:52:11Z", "commit": {"oid": "2abe2abfbfe06dd793f300b2557b736ea6ef4638"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1601, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}