{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM4NDU1NjYy", "number": 9738, "title": "KAFKA-8744: Update Scala API to give names to processors", "bodyText": "As it's only API extension to match the java API with Named object with lots of duplication, I only tested the logic once.\n\nCommitter Checklist (excluded from commit message)\n\n Verify design and implementation\n Verify test coverage and CI build status\n Verify documentation (including upgrade notes)", "createdAt": "2020-12-12T20:35:02Z", "url": "https://github.com/apache/kafka/pull/9738", "merged": true, "mergeCommit": {"oid": "550d8b82609ed3771f15d908bcf00fade2d2511e"}, "closed": true, "closedAt": "2021-01-28T14:57:19Z", "author": {"login": "mdespriee"}, "timelineItems": {"totalCount": 20, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdyueF4gFqTU3NDU2NDc3NA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABd0Tu2cAFqTU3NzU5NTc2Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTc0NTY0Nzc0", "url": "https://github.com/apache/kafka/pull/9738#pullrequestreview-574564774", "createdAt": "2021-01-22T19:41:57Z", "commit": {"oid": "427dab27e68d29fac9fbda559dcaf04dc243ea89"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c2d7456dface66291e2872b479e67c99ba9cc665", "author": {"user": {"login": "mdespriee", "name": "mathieu"}}, "url": "https://github.com/apache/kafka/commit/c2d7456dface66291e2872b479e67c99ba9cc665", "committedDate": "2021-01-27T11:02:43Z", "message": "KStream API + test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cb17d15bca7e866d42de08363b0ca0f10e1d1414", "author": {"user": {"login": "mdespriee", "name": "mathieu"}}, "url": "https://github.com/apache/kafka/commit/cb17d15bca7e866d42de08363b0ca0f10e1d1414", "committedDate": "2021-01-27T11:02:44Z", "message": "KTable api\n\nKTable api"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3d060c30befe0fe3e8ebcbc2a39a2aa3c612e738", "author": {"user": {"login": "mdespriee", "name": "mathieu"}}, "url": "https://github.com/apache/kafka/commit/3d060c30befe0fe3e8ebcbc2a39a2aa3c612e738", "committedDate": "2021-01-27T11:02:44Z", "message": "CogroupedKStream api"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a6fafa6375123af0036858292b07ae69e891bc6d", "author": {"user": {"login": "mdespriee", "name": "mathieu"}}, "url": "https://github.com/apache/kafka/commit/a6fafa6375123af0036858292b07ae69e891bc6d", "committedDate": "2021-01-27T11:02:44Z", "message": "KGroupedStream api"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "61df345e2d281ad73d7ce6d0372131ec044220f3", "author": {"user": {"login": "mdespriee", "name": "mathieu"}}, "url": "https://github.com/apache/kafka/commit/61df345e2d281ad73d7ce6d0372131ec044220f3", "committedDate": "2021-01-27T11:02:44Z", "message": "KGroupedTable api"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f4b24b79f21e9e98112535de3ca2b72278fbd32e", "author": {"user": {"login": "mdespriee", "name": "mathieu"}}, "url": "https://github.com/apache/kafka/commit/f4b24b79f21e9e98112535de3ca2b72278fbd32e", "committedDate": "2021-01-27T11:02:44Z", "message": "SessionWindowedCogroupedKStream api"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5f982b8240897fcf447be6acc879de3e7713fdcc", "author": {"user": {"login": "mdespriee", "name": "mathieu"}}, "url": "https://github.com/apache/kafka/commit/5f982b8240897fcf447be6acc879de3e7713fdcc", "committedDate": "2021-01-27T11:02:44Z", "message": "SessionWindowedKStream api"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bd891d6b3ed6102951e49630997e33afeffe9d79", "author": {"user": {"login": "mdespriee", "name": "mathieu"}}, "url": "https://github.com/apache/kafka/commit/bd891d6b3ed6102951e49630997e33afeffe9d79", "committedDate": "2021-01-27T11:02:44Z", "message": "TimeWindowedKStream and TimeWindowedCogroupedKStream api"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c2fca391555b2fe1ccbdc2c42f85456f55bd0a1e", "author": {"user": {"login": "mdespriee", "name": "mathieu"}}, "url": "https://github.com/apache/kafka/commit/c2fca391555b2fe1ccbdc2c42f85456f55bd0a1e", "committedDate": "2021-01-27T11:02:44Z", "message": "code format"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "63a4583a017564be07c1098df29556e4272d6bf0", "author": {"user": {"login": "mdespriee", "name": "mathieu"}}, "url": "https://github.com/apache/kafka/commit/63a4583a017564be07c1098df29556e4272d6bf0", "committedDate": "2021-01-27T11:02:44Z", "message": "fix unwanted reformatting"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "30a6a1122564f73a72b7810eccb6bc45f9a20b2f", "author": {"user": {"login": "mdespriee", "name": "mathieu"}}, "url": "https://github.com/apache/kafka/commit/30a6a1122564f73a72b7810eccb6bc45f9a20b2f", "committedDate": "2021-01-27T11:02:44Z", "message": "stylecheck"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b7128ae8a96310ead6f655f5014dcf2746d1d944", "author": {"user": {"login": "mdespriee", "name": "mathieu"}}, "url": "https://github.com/apache/kafka/commit/b7128ae8a96310ead6f655f5014dcf2746d1d944", "committedDate": "2021-01-27T11:02:44Z", "message": "scala compat"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b1af0027a84ccb42f7786de45aacda03d9466491", "author": {"user": {"login": "mdespriee", "name": "mathieu"}}, "url": "https://github.com/apache/kafka/commit/b1af0027a84ccb42f7786de45aacda03d9466491", "committedDate": "2021-01-27T11:02:44Z", "message": "fix ci warning"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f84302904e0659c5b1f40bf09c00986d396c64dc", "author": {"user": {"login": "mdespriee", "name": "mathieu"}}, "url": "https://github.com/apache/kafka/commit/f84302904e0659c5b1f40bf09c00986d396c64dc", "committedDate": "2021-01-27T12:25:44Z", "message": "refactor KStream named join for API consistency"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b4d7fea312edabd90688e813296d33f9899ce7df", "author": {"user": {"login": "mdespriee", "name": "mathieu"}}, "url": "https://github.com/apache/kafka/commit/b4d7fea312edabd90688e813296d33f9899ce7df", "committedDate": "2021-01-27T12:25:44Z", "message": "additional tests"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "427dab27e68d29fac9fbda559dcaf04dc243ea89", "author": {"user": {"login": "mdespriee", "name": "mathieu"}}, "url": "https://github.com/apache/kafka/commit/427dab27e68d29fac9fbda559dcaf04dc243ea89", "committedDate": "2020-12-14T17:34:13Z", "message": "fix ci warning"}, "afterCommit": {"oid": "b4d7fea312edabd90688e813296d33f9899ce7df", "author": {"user": {"login": "mdespriee", "name": "mathieu"}}, "url": "https://github.com/apache/kafka/commit/b4d7fea312edabd90688e813296d33f9899ce7df", "committedDate": "2021-01-27T12:25:44Z", "message": "additional tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTc3NDE4NjI5", "url": "https://github.com/apache/kafka/pull/9738#pullrequestreview-577418629", "createdAt": "2021-01-27T14:53:06Z", "commit": {"oid": "b4d7fea312edabd90688e813296d33f9899ce7df"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0yN1QxNDo1MzowNlrOIbLhZw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0yN1QxNDo1MzowNlrOIbLhZw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NTM3MTIzOQ==", "bodyText": "shouldn't this line verify the countNode name?", "url": "https://github.com/apache/kafka/pull/9738#discussion_r565371239", "createdAt": "2021-01-27T14:53:06Z", "author": {"login": "bbejeck"}, "path": "streams/streams-scala/src/test/scala/org/apache/kafka/streams/scala/kstream/KTableTest.scala", "diffHunk": "@@ -391,4 +390,57 @@ class KTableTest extends FlatSpec with Matchers with TestDriver {\n \n     testDriver.close()\n   }\n+\n+  \"setting a name on a filter processor\" should \"pass the name to the topology\" in {\n+    val builder = new StreamsBuilder()\n+    val sourceTopic = \"source\"\n+    val sinkTopic = \"sink\"\n+\n+    val table = builder.stream[String, String](sourceTopic).groupBy((key, _) => key).count()\n+    table\n+      .filter((key, value) => key.equals(\"a\") && value == 1, Named.as(\"my-name\"))\n+      .toStream\n+      .to(sinkTopic)\n+\n+    import scala.jdk.CollectionConverters._\n+\n+    val filterNode = builder.build().describe().subtopologies().asScala.toList(1).nodes().asScala.toList(3)\n+    filterNode.name() shouldBe \"my-name\"\n+  }\n+\n+  \"setting a name on a count processor\" should \"pass the name to the topology\" in {\n+    val builder = new StreamsBuilder()\n+    val sourceTopic = \"source\"\n+    val sinkTopic = \"sink\"\n+\n+    val table = builder.stream[String, String](sourceTopic).groupBy((key, _) => key).count(Named.as(\"my-name\"))\n+    table.toStream.to(sinkTopic)\n+\n+    import scala.jdk.CollectionConverters._\n+\n+    val filterNode = builder.build().describe().subtopologies().asScala.toList(1).nodes().asScala.toList(1)\n+    filterNode.name() shouldBe \"my-name\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b4d7fea312edabd90688e813296d33f9899ce7df"}, "originalPosition": 43}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "71143f82d1a2cb26b9e9a998bfeaecc8c9e99003", "author": {"user": {"login": "mdespriee", "name": "mathieu"}}, "url": "https://github.com/apache/kafka/commit/71143f82d1a2cb26b9e9a998bfeaecc8c9e99003", "committedDate": "2021-01-27T17:27:07Z", "message": "fix bad copy-pasted name"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTc3NTk1NzYy", "url": "https://github.com/apache/kafka/pull/9738#pullrequestreview-577595762", "createdAt": "2021-01-27T17:40:40Z", "commit": {"oid": "71143f82d1a2cb26b9e9a998bfeaecc8c9e99003"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2269, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}