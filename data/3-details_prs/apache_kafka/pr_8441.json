{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAwNTM0OTM3", "number": 8441, "title": "KAFKA-9748: Extend Streams integration tests for EOS beta", "bodyText": "The original PR was only considering EosIntegrationTest. However, there are actually a few more integration test with eos-alpha enabled that we missed to update.\nCall for review @abbccdda @guozhangwang", "createdAt": "2020-04-07T22:33:25Z", "url": "https://github.com/apache/kafka/pull/8441", "merged": true, "mergeCommit": {"oid": "73ec7304b9e13cf4b9da05f215bd356a84efe0e7"}, "closed": true, "closedAt": "2020-04-09T17:57:11Z", "author": {"login": "mjsax"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcVbEbfAH2gAyNDAwNTM0OTM3OjZmMDE2MGEzMmY0OGY1ODQ2MmI5NzAxMDI1Y2RlMzg5ODMwODViOTI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcVr2llAFqTM5MDIwODY0NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "6f0160a32f48f58462b9701025cde38983085b92", "author": {"user": {"login": "mjsax", "name": "Matthias J. Sax"}}, "url": "https://github.com/apache/kafka/commit/6f0160a32f48f58462b9701025cde38983085b92", "committedDate": "2020-04-07T22:30:46Z", "message": "KAFKA-9748: Extend Streams integration tests for EOS beta"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg5NTM2ODky", "url": "https://github.com/apache/kafka/pull/8441#pullrequestreview-389536892", "createdAt": "2020-04-07T22:33:58Z", "commit": {"oid": "6f0160a32f48f58462b9701025cde38983085b92"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QyMjozMzo1OFrOGCYjbQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QyMjozMzo1OFrOGCYjbQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTE1MjYyMQ==", "bodyText": "We always set it to true -- removing unnecessary code.", "url": "https://github.com/apache/kafka/pull/8441#discussion_r405152621", "createdAt": "2020-04-07T22:33:58Z", "author": {"login": "mjsax"}, "path": "streams/src/test/java/org/apache/kafka/streams/integration/GlobalKTableEOSIntegrationTest.java", "diffHunk": "@@ -319,15 +334,9 @@ private void produceAbortedMessages() throws Exception {\n     }\n \n     private void produceInitialGlobalTableValues() throws Exception {\n-        produceInitialGlobalTableValues(true);\n-    }\n-\n-    private void produceInitialGlobalTableValues(final boolean enableTransactions) throws Exception {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6f0160a32f48f58462b9701025cde38983085b92"}, "originalPosition": 53}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg5NTM3MDc1", "url": "https://github.com/apache/kafka/pull/8441#pullrequestreview-389537075", "createdAt": "2020-04-07T22:34:23Z", "commit": {"oid": "6f0160a32f48f58462b9701025cde38983085b92"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QyMjozNDoyNFrOGCYkFQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QyMjozNDoyNFrOGCYkFQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTE1Mjc4OQ==", "bodyText": "Side cleanup", "url": "https://github.com/apache/kafka/pull/8441#discussion_r405152789", "createdAt": "2020-04-07T22:34:24Z", "author": {"login": "mjsax"}, "path": "streams/src/test/java/org/apache/kafka/streams/state/internals/StreamThreadStateStoreProviderTest.java", "diffHunk": "@@ -361,7 +360,7 @@ private StreamTask createStreamsTask(final StreamsConfig streamsConfig,\n         final ProcessorStateManager stateManager = new ProcessorStateManager(\n             taskId,\n             Task.TaskType.ACTIVE,\n-            EXACTLY_ONCE.equals(streamsConfig.getString(StreamsConfig.PROCESSING_GUARANTEE_CONFIG)),\n+            StreamThread.eosEnabled(streamsConfig),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6f0160a32f48f58462b9701025cde38983085b92"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg5NTM3NzUx", "url": "https://github.com/apache/kafka/pull/8441#pullrequestreview-389537751", "createdAt": "2020-04-07T22:36:00Z", "commit": {"oid": "6f0160a32f48f58462b9701025cde38983085b92"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QyMjozNjowMFrOGCYmew==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QyMjozNjowMFrOGCYmew==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTE1MzQwMw==", "bodyText": "General question: we record the same metric for all three processing modes. Why do you need to parametrize this test? \\cc @cadonna", "url": "https://github.com/apache/kafka/pull/8441#discussion_r405153403", "createdAt": "2020-04-07T22:36:00Z", "author": {"login": "mjsax"}, "path": "streams/src/test/java/org/apache/kafka/streams/integration/RocksDBMetricsIntegrationTest.java", "diffHunk": "@@ -101,8 +101,9 @@\n     @Parameters(name = \"{0}\")\n     public static Collection<Object[]> data() {\n         return Arrays.asList(new Object[][] {\n+            {StreamsConfig.AT_LEAST_ONCE},\n             {StreamsConfig.EXACTLY_ONCE},\n-            {StreamsConfig.AT_LEAST_ONCE}\n+            {StreamsConfig.EXACTLY_ONCE_BETA}\n         });", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6f0160a32f48f58462b9701025cde38983085b92"}, "originalPosition": 8}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg5NTY5ODYw", "url": "https://github.com/apache/kafka/pull/8441#pullrequestreview-389569860", "createdAt": "2020-04-08T00:01:38Z", "commit": {"oid": "6f0160a32f48f58462b9701025cde38983085b92"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQwMDowMTozOFrOGCaYzA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQwMDowMTozOFrOGCaYzA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTE4MjY2OA==", "bodyText": "Could we extract the test portion as a common function?", "url": "https://github.com/apache/kafka/pull/8441#discussion_r405182668", "createdAt": "2020-04-08T00:01:38Z", "author": {"login": "abbccdda"}, "path": "streams/src/test/java/org/apache/kafka/streams/integration/KTableSourceTopicRestartIntegrationTest.java", "diffHunk": "@@ -130,7 +130,7 @@ public void shouldRestoreAndProgressWhenTopicWrittenToDuringRestorationWithEosDi\n     }\n \n     @Test\n-    public void shouldRestoreAndProgressWhenTopicWrittenToDuringRestorationWithEosEnabled() throws Exception {\n+    public void shouldRestoreAndProgressWhenTopicWrittenToDuringRestorationWithEosAlphaEnabled() throws Exception {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6f0160a32f48f58462b9701025cde38983085b92"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5e17ffe63df338169dc7ce83f2b4719d59605a67", "author": {"user": {"login": "mjsax", "name": "Matthias J. Sax"}}, "url": "https://github.com/apache/kafka/commit/5e17ffe63df338169dc7ce83f2b4719d59605a67", "committedDate": "2020-04-08T05:54:41Z", "message": "Github comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkwMTU5MTE3", "url": "https://github.com/apache/kafka/pull/8441#pullrequestreview-390159117", "createdAt": "2020-04-08T16:56:30Z", "commit": {"oid": "5e17ffe63df338169dc7ce83f2b4719d59605a67"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkwMjA4NjQ0", "url": "https://github.com/apache/kafka/pull/8441#pullrequestreview-390208644", "createdAt": "2020-04-08T18:04:02Z", "commit": {"oid": "5e17ffe63df338169dc7ce83f2b4719d59605a67"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1402, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}