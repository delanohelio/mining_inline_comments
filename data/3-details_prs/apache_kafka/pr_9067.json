{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU1OTQxNzAy", "number": 9067, "title": "MINOR: Streams integration tests should not call exit", "bodyText": "Fixes this issue:\nExecution failed for task ':streams:unitTest'.\n> Process 'Gradle Test Executor 69' finished with non-zero exit value 134\n\nCommitter Checklist (excluded from commit message)\n\n Verify design and implementation\n Verify test coverage and CI build status\n Verify documentation (including upgrade notes)", "createdAt": "2020-07-23T20:43:31Z", "url": "https://github.com/apache/kafka/pull/9067", "merged": true, "mergeCommit": {"oid": "26a217c8e75b238bbba5f1799b7d91b5b4910123"}, "closed": true, "closedAt": "2020-08-05T20:52:51Z", "author": {"login": "vvcephei"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc4KbBAAFqTQ1NTE3OTE4Ng==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc8BihYgFqTQ2MjAxMjc4NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1MTc5MTg2", "url": "https://github.com/apache/kafka/pull/9067#pullrequestreview-455179186", "createdAt": "2020-07-24T20:52:57Z", "commit": null, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNFQyMDo1Mjo1N1rOG29cSA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNFQyMDo1Mjo1N1rOG29cSA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDI4Mjk1Mg==", "bodyText": "Nice one!", "url": "https://github.com/apache/kafka/pull/9067#discussion_r460282952", "createdAt": "2020-07-24T20:52:57Z", "author": {"login": "mjsax"}, "path": "checkstyle/checkstyle.xml", "diffHunk": "@@ -103,6 +103,13 @@\n       <property name=\"ignoreComments\" value=\"true\"/>\n     </module>\n \n+    <module name=\"Regexp\">\n+      <property name=\"format\" value=\"System\\.exit\"/>\n+      <property name=\"illegalPattern\" value=\"true\"/>\n+      <property name=\"ignoreComments\" value=\"true\"/>\n+      <property name=\"message\" value=\"'System.exit': Should not directly call System.exit, but Exit.exit instead.\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 8}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1NTU5MzE1", "url": "https://github.com/apache/kafka/pull/9067#pullrequestreview-455559315", "createdAt": "2020-07-27T08:03:17Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwODowMzoxN1rOG3XwjQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwODowMzoxN1rOG3XwjQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDcxNDEyNQ==", "bodyText": "It seems really brittle to have line numbers in the suppression. Could we:\n\nRemove the lines part.\nGive a name to the Regexp so that we only exclude the one related to System.exit (not sure if this is possible)", "url": "https://github.com/apache/kafka/pull/9067#discussion_r460714125", "createdAt": "2020-07-27T08:03:17Z", "author": {"login": "ijuma"}, "path": "checkstyle/suppressions.xml", "diffHunk": "@@ -17,8 +17,14 @@\n               files=\"(ApiMessageType).java|MessageDataGenerator.java\"/>\n     <suppress checks=\"MethodLength\"\n               files=\"MessageDataGenerator.java\"/>\n+    <suppress checks=\"Regexp\"\n+              files=\"MessageGenerator.java\"\n+              lines=\"285,288\"/>\n \n     <!-- Clients -->\n+    <suppress checks=\"Regexp\"\n+              files=\"Exit.java\"\n+              lines=\"43\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 11}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1NTU5ODg0", "url": "https://github.com/apache/kafka/pull/9067#pullrequestreview-455559884", "createdAt": "2020-07-27T08:04:06Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwODowNDowNlrOG3XyMw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwODowNDowNlrOG3XyMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDcxNDU0Nw==", "bodyText": "I think it was intentional not to use an internal class in demos that others may copy.", "url": "https://github.com/apache/kafka/pull/9067#discussion_r460714547", "createdAt": "2020-07-27T08:04:06Z", "author": {"login": "ijuma"}, "path": "streams/examples/src/main/java/org/apache/kafka/streams/examples/wordcount/WordCountTransformerDemo.java", "diffHunk": "@@ -153,8 +154,8 @@ public void run() {\n             streams.start();\n             latch.await();\n         } catch (final Throwable e) {\n-            System.exit(1);\n+            Exit.exit(1);\n         }\n-        System.exit(0);\n+        Exit.exit(0);", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 16}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1NTYwMTA1", "url": "https://github.com/apache/kafka/pull/9067#pullrequestreview-455560105", "createdAt": "2020-07-27T08:04:28Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwODowNDoyOFrOG3Xy6w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwODowNDoyOFrOG3Xy6w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDcxNDczMQ==", "bodyText": "Did you read the comment immediately above this line? Also applies to VerifiableConsumer.", "url": "https://github.com/apache/kafka/pull/9067#discussion_r460714731", "createdAt": "2020-07-27T08:04:28Z", "author": {"login": "ijuma"}, "path": "tools/src/main/java/org/apache/kafka/tools/VerifiableProducer.java", "diffHunk": "@@ -241,7 +240,7 @@ public static VerifiableProducer createFromArgs(ArgumentParser parser, String[]\n         } else {\n             parser.printHelp();\n             // Can't use `Exit.exit` here because it didn't exist until 0.11.0.0.\n-            System.exit(0);\n+            Exit.exit(0);", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 27}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYxMjMzNjI3", "url": "https://github.com/apache/kafka/pull/9067#pullrequestreview-461233627", "createdAt": "2020-08-04T23:02:53Z", "commit": null, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fc8b3f5b3c3212387e431a89dc4ab5a802cd1e76", "author": {"user": null}, "url": "https://github.com/apache/kafka/commit/fc8b3f5b3c3212387e431a89dc4ab5a802cd1e76", "committedDate": "2020-08-05T00:49:56Z", "message": "MINOR: Streams integration tests should not call exit"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6040882ac70726d6e8edc77462091e7f477fdda1", "author": {"user": null}, "url": "https://github.com/apache/kafka/commit/6040882ac70726d6e8edc77462091e7f477fdda1", "committedDate": "2020-08-05T00:49:56Z", "message": "replace all System.exit with Exit.exit"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b80077e7b43995eb81b467a7843137a010c51217", "author": {"user": null}, "url": "https://github.com/apache/kafka/commit/b80077e7b43995eb81b467a7843137a010c51217", "committedDate": "2020-08-05T00:49:56Z", "message": "forbid use of System.exit"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "68b2ee1bd78213c0927568169c7526604d02c3b7", "author": {"user": {"login": "mjsax", "name": "Matthias J. Sax"}}, "url": "https://github.com/apache/kafka/commit/68b2ee1bd78213c0927568169c7526604d02c3b7", "committedDate": "2020-08-05T00:49:56Z", "message": "Github comments:\n - revert using Exit.exit in VerifiableConsumer, VerifyableProducer,\n   Kafka Streams archtype project, and Kafka Streams examples\n - add corresponding checkstyle exceptions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "af1a951e6cbf5f6fa18e83ca1324786f630c0375", "author": {"user": {"login": "mjsax", "name": "Matthias J. Sax"}}, "url": "https://github.com/apache/kafka/commit/af1a951e6cbf5f6fa18e83ca1324786f630c0375", "committedDate": "2020-08-05T00:49:56Z", "message": "Add rule ID and suppress only single rule for whole files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ba4c016e1ec1d1046621a77e28e5715d9899740e", "author": {"user": {"login": "mjsax", "name": "Matthias J. Sax"}}, "url": "https://github.com/apache/kafka/commit/ba4c016e1ec1d1046621a77e28e5715d9899740e", "committedDate": "2020-08-05T00:51:06Z", "message": "Rebased and updated new 2.6 StreamsSmokeTest"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYyMDEyNzg1", "url": "https://github.com/apache/kafka/pull/9067#pullrequestreview-462012785", "createdAt": "2020-08-05T20:49:09Z", "commit": {"oid": "ba4c016e1ec1d1046621a77e28e5715d9899740e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 918, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}