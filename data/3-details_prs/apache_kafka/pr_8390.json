{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk1ODUyNjIw", "number": 8390, "title": "MINOR: Fix Scala 2.13 compiler warnings", "bodyText": "Once Scala 2.13.2 is officially released, I will submit a follow up PR\nthat enables -Xfatal-warnings with the necessary warning\nexclusions. Compiler warning exclusions were only introduced in 2.13.2\nand hence why we have to wait for that. I used a snapshot build to\ntest it in the meantime.\nChanges:\n\nRemove Deprecated annotation from internal request classes\nClass.newInstance is deprecated in favor of\nClass.getConstructor().newInstance\nReplace deprecated JavaConversions with CollectionConverters\nRemove unused kafka.cluster.Cluster\nDon't use Map and Set methods deprecated in 2.13:\n\ncollection.Map +, ++, -, --, mapValues, filterKeys, retain\ncollection.Set +, ++, -, --\n\n\nAdd scala-collection-compat dependency to streams-scala and\nupdate version to 2.1.4.\nReplace usages of deprecated Either.get and Either.right\nReplace usage of deprecated Integer(String) constructor\nimport scala.language.implicitConversions is not needed in Scala 2.13\nReplace usage of deprecated toIterator, Traversable, seq,\nreverseMap, hasDefiniteSize\nReplace usage of deprecated alterConfigs with incrementalAlterConfigs\nwhere possible\nFix implicit widening conversions from Long/Int to Double/Float\nAvoid implicit conversions to String\nEliminate usage of deprecated procedure syntax\nRemove printlnin LogValidatorTest instead of fixing the compiler\nwarning since tests should not println.\nEliminate implicit conversion from Array to Seq\nRemove unnecessary usage of 3 argument assertEquals\nReplace toStream with iterator\nDo not use deprecated SaslConfigs.DEFAULT_SASL_ENABLED_MECHANISMS\nReplace StringBuilder.newBuilder with new StringBuilder\nRename AclBuffers to AclSeqs and remove usage of filterKeys\nMore consistent usage of Set/Map in Controller classes: this also fixes\ndeprecated warnings with Scala 2.13\nAdd spotBugs exclusion for inliner artifact in KafkaApis with Scala 2.12.\n\nCommitter Checklist (excluded from commit message)\n\n Verify design and implementation\n Verify test coverage and CI build status\n Verify documentation (including upgrade notes)", "createdAt": "2020-03-30T19:31:01Z", "url": "https://github.com/apache/kafka/pull/8390", "merged": true, "mergeCommit": {"oid": "90bbeedf52f4b6a411e9630dd132583afa4cd428"}, "closed": true, "closedAt": "2020-04-01T13:20:49Z", "author": {"login": "ijuma"}, "timelineItems": {"totalCount": 30, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcS5Xz9gH2gAyMzk1ODUyNjIwOjNhNmIwMjY3MDFlODg5ODY0YTU0Njk2OTFkNTI5NjFlZmRmNjI5MTc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcTUiEAgFqTM4NTQyNjY5Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "3a6b026701e889864a5469691d52961efdf62917", "author": {"user": {"login": "ijuma", "name": "Ismael Juma"}}, "url": "https://github.com/apache/kafka/commit/3a6b026701e889864a5469691d52961efdf62917", "committedDate": "2020-03-31T02:07:19Z", "message": "Remove @Deprecated annotation from internal request classes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "82507c4d40c7bc8be5f00aa7af2fa49d4031d258", "author": {"user": {"login": "ijuma", "name": "Ismael Juma"}}, "url": "https://github.com/apache/kafka/commit/82507c4d40c7bc8be5f00aa7af2fa49d4031d258", "committedDate": "2020-03-31T02:07:19Z", "message": "Class.newInstance is deprecated in favor of Class.getConstructor().newInstance"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "84cafd0cbb76f2614b76e9a862772be8a55fb85a", "author": {"user": {"login": "ijuma", "name": "Ismael Juma"}}, "url": "https://github.com/apache/kafka/commit/84cafd0cbb76f2614b76e9a862772be8a55fb85a", "committedDate": "2020-03-31T02:08:38Z", "message": "Replace deprecated JavaConversions with CollectionConverters"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "63029927e9283947b0b6e98a2ce97a434ae3fd6b", "author": {"user": {"login": "ijuma", "name": "Ismael Juma"}}, "url": "https://github.com/apache/kafka/commit/63029927e9283947b0b6e98a2ce97a434ae3fd6b", "committedDate": "2020-03-31T02:08:38Z", "message": "Remove unused kafka.cluster.Cluster"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e079dc57399636964d06e94af2282ae1fe3ec7f7", "author": {"user": {"login": "ijuma", "name": "Ismael Juma"}}, "url": "https://github.com/apache/kafka/commit/e079dc57399636964d06e94af2282ae1fe3ec7f7", "committedDate": "2020-03-31T02:08:38Z", "message": "Don't use Map and Set methods deprecated in 2.13\n\n* collection.Map +, ++, -, --, mapValues, filterKeys, retain\n* collection.Set +, ++, -, --"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "31fa96e584b1a9785edebbefcc4be189caf62f39", "author": {"user": {"login": "ijuma", "name": "Ismael Juma"}}, "url": "https://github.com/apache/kafka/commit/31fa96e584b1a9785edebbefcc4be189caf62f39", "committedDate": "2020-03-31T02:08:38Z", "message": "Add scala-collection-compat dependency to streams-scala\n\nAnd update the versionn to 2.1.4."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "80b4eb518fed4dc3e0be1385c0724ec8201b582e", "author": {"user": {"login": "ijuma", "name": "Ismael Juma"}}, "url": "https://github.com/apache/kafka/commit/80b4eb518fed4dc3e0be1385c0724ec8201b582e", "committedDate": "2020-03-31T02:08:38Z", "message": "Replace usages of deprecated Either.get and Either.right"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f1824879e061f11bd6a603c0dd1640eeda9a12bb", "author": {"user": {"login": "ijuma", "name": "Ismael Juma"}}, "url": "https://github.com/apache/kafka/commit/f1824879e061f11bd6a603c0dd1640eeda9a12bb", "committedDate": "2020-03-31T02:08:38Z", "message": "Replace usage of deprecated Integer(String) constructor"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a99d0cc2b4bf90348bc236d9e7eb71142dcb27f3", "author": {"user": {"login": "ijuma", "name": "Ismael Juma"}}, "url": "https://github.com/apache/kafka/commit/a99d0cc2b4bf90348bc236d9e7eb71142dcb27f3", "committedDate": "2020-03-31T02:08:38Z", "message": "`import scala.language.implicitConversions` is not needed in Scala 2.13"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cc337a0aeda95a7e1b1015eeb66b520be087aece", "author": {"user": {"login": "ijuma", "name": "Ismael Juma"}}, "url": "https://github.com/apache/kafka/commit/cc337a0aeda95a7e1b1015eeb66b520be087aece", "committedDate": "2020-03-31T02:08:38Z", "message": "Replace usage of deprecated `toIterator`, `Traversable`, `seq`, `reverseMap`, `hasDefiniteSize`"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "PullRequestCommit", "commit": {"oid": "f12e50f317ce2af3b31766da994e46f6e8d07a8e", "author": {"user": {"login": "ijuma", "name": "Ismael Juma"}}, "url": "https://github.com/apache/kafka/commit/f12e50f317ce2af3b31766da994e46f6e8d07a8e", "committedDate": "2020-03-31T02:33:04Z", "message": "Replace usage of deprecated alterConfigs with incrementalAlterConfigs where possible"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f5d37c1a405480de215b2b46076219dce3556d41", "author": {"user": {"login": "ijuma", "name": "Ismael Juma"}}, "url": "https://github.com/apache/kafka/commit/f5d37c1a405480de215b2b46076219dce3556d41", "committedDate": "2020-03-31T02:33:04Z", "message": "Fix implicit widening conversions from Long/Int to Double/Float"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8101cccdd6d59c2f9bf74110b419eac4ceb36a16", "author": {"user": {"login": "ijuma", "name": "Ismael Juma"}}, "url": "https://github.com/apache/kafka/commit/8101cccdd6d59c2f9bf74110b419eac4ceb36a16", "committedDate": "2020-03-31T02:33:04Z", "message": "Avoid implicit conversions to String"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4d6d58cc0ea7b0efd2f02f6193092787d4479bd8", "author": {"user": {"login": "ijuma", "name": "Ismael Juma"}}, "url": "https://github.com/apache/kafka/commit/4d6d58cc0ea7b0efd2f02f6193092787d4479bd8", "committedDate": "2020-03-31T02:33:04Z", "message": "Eliminate usage of deprecated procedure syntax"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9573b83aa9a51968f4451562f2357821803f541e", "author": {"user": {"login": "ijuma", "name": "Ismael Juma"}}, "url": "https://github.com/apache/kafka/commit/9573b83aa9a51968f4451562f2357821803f541e", "committedDate": "2020-03-31T02:33:04Z", "message": "Remove test `println`"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f399ce168c04bfece9f78098746e1e9c28b3ca14", "author": {"user": {"login": "ijuma", "name": "Ismael Juma"}}, "url": "https://github.com/apache/kafka/commit/f399ce168c04bfece9f78098746e1e9c28b3ca14", "committedDate": "2020-03-31T02:33:04Z", "message": "Eliminate implicit conversion from Array to Seq"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5fb834df2311e3f985358f609ce705d646477eb1", "author": {"user": {"login": "ijuma", "name": "Ismael Juma"}}, "url": "https://github.com/apache/kafka/commit/5fb834df2311e3f985358f609ce705d646477eb1", "committedDate": "2020-03-31T02:33:04Z", "message": "Remove unnecessary usage of 3 argument assertEquals"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b5ef0eb5bfbda2aa415bca1489175130b4361b84", "author": {"user": {"login": "ijuma", "name": "Ismael Juma"}}, "url": "https://github.com/apache/kafka/commit/b5ef0eb5bfbda2aa415bca1489175130b4361b84", "committedDate": "2020-03-31T02:33:04Z", "message": "Replace `toStream` with `iterator`"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c572bbcbd09dc18eb9656126fbf17af38b03a88a", "author": {"user": {"login": "ijuma", "name": "Ismael Juma"}}, "url": "https://github.com/apache/kafka/commit/c572bbcbd09dc18eb9656126fbf17af38b03a88a", "committedDate": "2020-03-31T02:33:04Z", "message": "Do not use deprecated SaslConfigs.DEFAULT_SASL_ENABLED_MECHANISMS"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "057019a01f125a6a8ec06f0c98eb9b1080903cdb", "author": {"user": {"login": "ijuma", "name": "Ismael Juma"}}, "url": "https://github.com/apache/kafka/commit/057019a01f125a6a8ec06f0c98eb9b1080903cdb", "committedDate": "2020-03-31T02:33:04Z", "message": "Replace StringBuilder.newBuilder with new StringBuilder"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "70089fc632a951efdf0750e8aca5f1487c26af15", "author": {"user": {"login": "ijuma", "name": "Ismael Juma"}}, "url": "https://github.com/apache/kafka/commit/70089fc632a951efdf0750e8aca5f1487c26af15", "committedDate": "2020-03-31T02:33:04Z", "message": "Rename AclBuffers to AclSeqs and remove usage of `filterKeys`"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d0eaa966780c2237dcd6403ca41b6f632c07455a", "author": {"user": {"login": "ijuma", "name": "Ismael Juma"}}, "url": "https://github.com/apache/kafka/commit/d0eaa966780c2237dcd6403ca41b6f632c07455a", "committedDate": "2020-03-31T02:33:04Z", "message": "More consistent usage of Set/Map in Controller classes\n\nThis also fixes deprecated warnings with Scala 2.13."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "44012dfa1d3f84567bdc8976f5075591f775e5c7", "author": {"user": {"login": "ijuma", "name": "Ismael Juma"}}, "url": "https://github.com/apache/kafka/commit/44012dfa1d3f84567bdc8976f5075591f775e5c7", "committedDate": "2020-03-31T02:33:04Z", "message": "Add spotBugs exclusion due to Scala 2.12 inlining artifact"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "44012dfa1d3f84567bdc8976f5075591f775e5c7", "author": {"user": {"login": "ijuma", "name": "Ismael Juma"}}, "url": "https://github.com/apache/kafka/commit/44012dfa1d3f84567bdc8976f5075591f775e5c7", "committedDate": "2020-03-31T02:33:04Z", "message": "Add spotBugs exclusion due to Scala 2.12 inlining artifact"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f9566888f7a5d5887fe24204a5e7d99f558784aa", "author": {"user": {"login": "ijuma", "name": "Ismael Juma"}}, "url": "https://github.com/apache/kafka/commit/f9566888f7a5d5887fe24204a5e7d99f558784aa", "committedDate": "2020-03-31T06:13:04Z", "message": "Tweak implementation of `removeExpiredProducers`"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3624366fb119ef0408d13dbba8f1684f07f8cb4f", "author": {"user": {"login": "ijuma", "name": "Ismael Juma"}}, "url": "https://github.com/apache/kafka/commit/3624366fb119ef0408d13dbba8f1684f07f8cb4f", "committedDate": "2020-03-31T06:36:51Z", "message": "Fix ReassignPartitionsUnitTest test failures with Scala 2.12"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg0ODE0NDQ0", "url": "https://github.com/apache/kafka/pull/8390#pullrequestreview-384814444", "createdAt": "2020-03-31T14:52:22Z", "commit": {"oid": "3624366fb119ef0408d13dbba8f1684f07f8cb4f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQxNDo1MjoyM1rOF-ZvPw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQxNDo1MjoyM1rOF-ZvPw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDk3NzcyNw==", "bodyText": "Pardon me, I failed to catch the point of this change.", "url": "https://github.com/apache/kafka/pull/8390#discussion_r400977727", "createdAt": "2020-03-31T14:52:23Z", "author": {"login": "chia7712"}, "path": "core/src/main/scala/kafka/log/LogCleanerManager.scala", "diffHunk": "@@ -410,7 +410,7 @@ private[log] class LogCleanerManager(val logDirs: Seq[File],\n         if (checkpoint != null) {\n           val existing = checkpoint.read()\n           if (existing.getOrElse(topicPartition, 0L) > offset)\n-            checkpoint.write(existing + (topicPartition -> offset))\n+            checkpoint.write(mutable.Map() ++= existing += topicPartition -> offset)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3624366fb119ef0408d13dbba8f1684f07f8cb4f"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg0ODUzNjc3", "url": "https://github.com/apache/kafka/pull/8390#pullrequestreview-384853677", "createdAt": "2020-03-31T15:32:15Z", "commit": {"oid": "3624366fb119ef0408d13dbba8f1684f07f8cb4f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg1NDI2Njk2", "url": "https://github.com/apache/kafka/pull/8390#pullrequestreview-385426696", "createdAt": "2020-04-01T09:45:57Z", "commit": {"oid": "3624366fb119ef0408d13dbba8f1684f07f8cb4f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 6, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}