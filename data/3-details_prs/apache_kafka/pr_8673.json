{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE4NTQ4OTc4", "number": 8673, "title": "KAFKA-9992: EmbeddedKafkaCluster.deleteTopicAndWait not working with kafka_2.13", "bodyText": "Eliminating JavaConverters in EmbeddedKafkaCluster\nMore detailed description of your change,\nif necessary. The PR title and PR message become\nthe squashed commit message, so use a separate\ncomment to ping reviewers.\nSummary of testing strategy (including rationale)\nfor the feature or bug fix. Unit and/or integration\ntests are expected for any behaviour change and\nsystem tests should be considered for larger changes.\nCommitter Checklist (excluded from commit message)\n\n Verify design and implementation\n Verify test coverage and CI build status\n Verify documentation (including upgrade notes)", "createdAt": "2020-05-15T11:56:01Z", "url": "https://github.com/apache/kafka/pull/8673", "merged": true, "mergeCommit": {"oid": "c0fa36dde72e1045368ebd519349b57bb3c69332"}, "closed": true, "closedAt": "2020-05-19T18:38:36Z", "author": {"login": "akatona84"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABchqKZSgFqTQxMzAwNzU5Mw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABci13nCgFqTQxNDU0MzIyNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzMDA3NTkz", "url": "https://github.com/apache/kafka/pull/8673#pullrequestreview-413007593", "createdAt": "2020-05-15T22:50:47Z", "commit": null, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQyMjo1MDo0N1rOGWVzCg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQyMjo1MDo0N1rOGWVzCg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjA3ODk4Ng==", "bodyText": "It looks like we don\u2019t need to make a copy here anymore", "url": "https://github.com/apache/kafka/pull/8673#discussion_r426078986", "createdAt": "2020-05-15T22:50:47Z", "author": {"login": "vvcephei"}, "path": "streams/src/test/java/org/apache/kafka/streams/integration/utils/EmbeddedKafkaCluster.java", "diffHunk": "@@ -314,8 +321,7 @@ private TopicsDeletedCondition(final Collection<String> topics) {\n \n         @Override\n         public boolean conditionMet() {\n-            final Set<String> allTopics = new HashSet<>(JavaConverters.setAsJavaSetConverter(\n-                brokers[0].kafkaServer().zkClient().getAllTopicsInCluster(false)).asJava());\n+            final Set<String> allTopics = new HashSet<>(getAllTopics());", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 40}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzMDQ5ODk5", "url": "https://github.com/apache/kafka/pull/8673#pullrequestreview-413049899", "createdAt": "2020-05-16T05:36:45Z", "commit": null, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzMDYxMTAy", "url": "https://github.com/apache/kafka/pull/8673#pullrequestreview-413061102", "createdAt": "2020-05-16T08:59:28Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNlQwODo1OToyOFrOGWZNsA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNlQwOTowMDo0NlrOGWZOKQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjEzNDk2MA==", "bodyText": "getAllTopicsInCluster()\n\ngetAllTopicsInCluster(false)", "url": "https://github.com/apache/kafka/pull/8673#discussion_r426134960", "createdAt": "2020-05-16T08:59:28Z", "author": {"login": "chia7712"}, "path": "streams/src/test/java/org/apache/kafka/streams/integration/utils/EmbeddedKafkaCluster.java", "diffHunk": "@@ -297,6 +295,15 @@ public void deleteAllTopicsAndWait(final long timeoutMs) throws InterruptedExcep\n         }\n     }\n \n+    public Set<String> getAllTopics() {\n+        scala.collection.Iterator<String> topicsIterator = brokers[0].kafkaServer().zkClient().getAllTopicsInCluster().iterator();", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjEzNTA4MQ==", "bodyText": "getAllTopicsInCluster seems to be duplicate to this new method. Could we remove the former?", "url": "https://github.com/apache/kafka/pull/8673#discussion_r426135081", "createdAt": "2020-05-16T09:00:46Z", "author": {"login": "chia7712"}, "path": "streams/src/test/java/org/apache/kafka/streams/integration/utils/EmbeddedKafkaCluster.java", "diffHunk": "@@ -297,6 +295,15 @@ public void deleteAllTopicsAndWait(final long timeoutMs) throws InterruptedExcep\n         }\n     }\n \n+    public Set<String> getAllTopics() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 22}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7d16b46860aeed5b51aed04e0ada2c873d13793c", "author": {"user": {"login": "akatona84", "name": "Andras Katona"}}, "url": "https://github.com/apache/kafka/commit/7d16b46860aeed5b51aed04e0ada2c873d13793c", "committedDate": "2020-05-18T06:45:07Z", "message": "KAFKA-9992: EmbeddedKafkaCluster.deleteTopicAndWait not working with kafka_2.13\n\nEliminating JavaConverters in EmbeddedKafkaCluster\n\nChange-Id: I71d3daee20b4717a3eda602e3e310b431b23c55c"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "7d16b46860aeed5b51aed04e0ada2c873d13793c", "author": {"user": {"login": "akatona84", "name": "Andras Katona"}}, "url": "https://github.com/apache/kafka/commit/7d16b46860aeed5b51aed04e0ada2c873d13793c", "committedDate": "2020-05-18T06:45:07Z", "message": "KAFKA-9992: EmbeddedKafkaCluster.deleteTopicAndWait not working with kafka_2.13\n\nEliminating JavaConverters in EmbeddedKafkaCluster\n\nChange-Id: I71d3daee20b4717a3eda602e3e310b431b23c55c"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7f79752258ee0f1483ba87ae8385db02cf362aac", "author": {"user": {"login": "akatona84", "name": "Andras Katona"}}, "url": "https://github.com/apache/kafka/commit/7f79752258ee0f1483ba87ae8385db02cf362aac", "committedDate": "2020-05-18T09:55:17Z", "message": "checkstyle fix"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE0NTQyODUw", "url": "https://github.com/apache/kafka/pull/8673#pullrequestreview-414542850", "createdAt": "2020-05-19T15:04:48Z", "commit": {"oid": "7f79752258ee0f1483ba87ae8385db02cf362aac"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE0NTQzMjI2", "url": "https://github.com/apache/kafka/pull/8673#pullrequestreview-414543226", "createdAt": "2020-05-19T15:05:13Z", "commit": {"oid": "7f79752258ee0f1483ba87ae8385db02cf362aac"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1022, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}