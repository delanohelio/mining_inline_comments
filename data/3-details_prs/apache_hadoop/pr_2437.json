{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE1NzY0MDc0", "number": 2437, "title": "HDFS-15667. Audit log record the unexpected allowed result when delete", "bodyText": "https://issues.apache.org/jira/browse/HDFS-15667\n\n\n\nThe file disallow to be deleted, but record a allowed=true into auditlog, that is confusing me.", "createdAt": "2020-11-05T03:15:26Z", "url": "https://github.com/apache/hadoop/pull/2437", "merged": true, "mergeCommit": {"oid": "95c96605b30cc31839a04bd5d4061a2c89e4c09c"}, "closed": true, "closedAt": "2020-11-10T05:01:11Z", "author": {"login": "maobaolong"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdZZgJggH2gAyNTE1NzY0MDc0OmQ1YWUzZTU4ZGVlNmNhMDIzOWI1YTJjNTY2MmM3YWY5M2Y3M2EzODQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdaqdGkAFqTUyNTg3Mzg2OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d5ae3e58dee6ca0239b5a2c5662c7af93f73a384", "author": {"user": {"login": "maobaolong", "name": "maobaolong"}}, "url": "https://github.com/apache/hadoop/commit/d5ae3e58dee6ca0239b5a2c5662c7af93f73a384", "committedDate": "2020-11-05T03:08:05Z", "message": "HDFS-15667. Audit log record the unexpected allowed result when delete called"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1b8e85c5e3705a8b066ab142c5cdae25fc9c2843", "author": {"user": {"login": "maobaolong", "name": "maobaolong"}}, "url": "https://github.com/apache/hadoop/commit/1b8e85c5e3705a8b066ab142c5cdae25fc9c2843", "committedDate": "2020-11-05T07:22:54Z", "message": "Add a unit test."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "13f33bc30c75c66b48e007f3f1244222558e2edd", "author": {"user": {"login": "maobaolong", "name": "maobaolong"}}, "url": "https://github.com/apache/hadoop/commit/13f33bc30c75c66b48e007f3f1244222558e2edd", "committedDate": "2020-11-05T12:02:27Z", "message": "Remove extra space"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI0ODI5OTUx", "url": "https://github.com/apache/hadoop/pull/2437#pullrequestreview-524829951", "createdAt": "2020-11-06T03:15:51Z", "commit": {"oid": "13f33bc30c75c66b48e007f3f1244222558e2edd"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQwMzoxNTo1MVrOHueu7Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQwMzoxNTo1MVrOHueu7Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODUwMDA3Nw==", "bodyText": "As CI reports, it could be more simple here, assertFalse(result)?", "url": "https://github.com/apache/hadoop/pull/2437#discussion_r518500077", "createdAt": "2020-11-06T03:15:51Z", "author": {"login": "ferhui"}, "path": "hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/hdfs/server/namenode/TestAuditLoggerWithCommands.java", "diffHunk": "@@ -1205,6 +1205,18 @@ public void testGetDatanodeStorageReport() throws Exception {\n     }\n   }\n \n+  @Test\n+  public void testDeleteRoot() throws Exception {\n+    Path srcDir = new Path(\"/\");\n+    fileSys = DFSTestUtil.getFileSystemAs(user1, conf);\n+    boolean result = fileSys.delete(srcDir, true);\n+    fileSys.close();\n+    assertTrue(result == false);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "13f33bc30c75c66b48e007f3f1244222558e2edd"}, "originalPosition": 10}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a207c35f926268ebeac3a9e6db2d3ebe37254923", "author": {"user": {"login": "maobaolong", "name": "maobaolong"}}, "url": "https://github.com/apache/hadoop/commit/a207c35f926268ebeac3a9e6db2d3ebe37254923", "committedDate": "2020-11-06T06:15:08Z", "message": "Use assertFalse to make code simple"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4bcd0f95622bcf437ce5a7a8c4bf9191b5cd527a", "author": {"user": {"login": "maobaolong", "name": "maobaolong"}}, "url": "https://github.com/apache/hadoop/commit/4bcd0f95622bcf437ce5a7a8c4bf9191b5cd527a", "committedDate": "2020-11-06T06:15:35Z", "message": "Use assertFalse to make code simple"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI1ODczODY5", "url": "https://github.com/apache/hadoop/pull/2437#pullrequestreview-525873869", "createdAt": "2020-11-09T01:27:04Z", "commit": {"oid": "4bcd0f95622bcf437ce5a7a8c4bf9191b5cd527a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3534, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}