{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAxOTQwMjE1", "number": 1950, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxMjo0OToyM1rODztbng==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMVQwOTo1Mjo1MFrOD4VIaQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU1NTQ4MzE4OnYy", "diffSide": "RIGHT", "path": "hadoop-tools/hadoop-aws/src/test/java/org/apache/hadoop/fs/s3a/impl/ITestPartialRenamesDeletes.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxMjo0OToyM1rOGISzCg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQwNToxMTo1NlrOGNC2PA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTM0OTc3MA==", "bodyText": "not sure the expansion here is needed..,you know how imports are such a backporting troublespot.\nin fact, given there's no other diff to this class, I'm not sure this file needs changing at all", "url": "https://github.com/apache/hadoop/pull/1950#discussion_r411349770", "createdAt": "2020-04-20T12:49:23Z", "author": {"login": "steveloughran"}, "path": "hadoop-tools/hadoop-aws/src/test/java/org/apache/hadoop/fs/s3a/impl/ITestPartialRenamesDeletes.java", "diffHunk": "@@ -54,7 +54,12 @@\n import static org.apache.hadoop.fs.contract.ContractTestUtils.*;\n import static org.apache.hadoop.fs.s3a.Constants.*;\n import static org.apache.hadoop.fs.s3a.S3ATestUtils.MetricDiff;\n-import static org.apache.hadoop.fs.s3a.S3ATestUtils.*;\n+import static org.apache.hadoop.fs.s3a.S3ATestUtils.assume;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "18131caecc24a79c047ba0fd55395f054466ee90"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjMzMTMyNA==", "bodyText": "I got issue on getting test bucket name even if test.fs.s3a.name was defined in the test conf and othter itests worked.\njava.lang.NullPointerException: No test bucket\n\tat com.google.common.base.Preconditions.checkNotNull(Preconditions.java:895)\n\tat org.apache.hadoop.fs.s3a.S3ATestUtils.getTestBucketName(S3ATestUtils.java:739)\n\tat org.apache.hadoop.fs.s3a.impl.ITestPartialRenamesDeletes.createConfiguration(ITestPartialRenamesDeletes.java:326)\n\nI suspected the configuration reloading in S3ATestUtils as the cause. The change is leftover of trial-and-error. Since I can not reproduce the issue now, I will revert this part.", "url": "https://github.com/apache/hadoop/pull/1950#discussion_r416331324", "createdAt": "2020-04-28T05:11:56Z", "author": {"login": "iwasakims"}, "path": "hadoop-tools/hadoop-aws/src/test/java/org/apache/hadoop/fs/s3a/impl/ITestPartialRenamesDeletes.java", "diffHunk": "@@ -54,7 +54,12 @@\n import static org.apache.hadoop.fs.contract.ContractTestUtils.*;\n import static org.apache.hadoop.fs.s3a.Constants.*;\n import static org.apache.hadoop.fs.s3a.S3ATestUtils.MetricDiff;\n-import static org.apache.hadoop.fs.s3a.S3ATestUtils.*;\n+import static org.apache.hadoop.fs.s3a.S3ATestUtils.assume;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTM0OTc3MA=="}, "originalCommit": {"oid": "18131caecc24a79c047ba0fd55395f054466ee90"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU1NTQ5MTE1OnYy", "diffSide": "LEFT", "path": "hadoop-tools/hadoop-aws/src/test/java/org/apache/hadoop/fs/s3a/s3guard/ITestS3GuardToolLocal.java", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxMjo1MToxMlrOGIS3tw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMVQwOTo1MzoyOFrOGPGNiQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTM1MDk2Nw==", "bodyText": "why did you cut this assertion?", "url": "https://github.com/apache/hadoop/pull/1950#discussion_r411350967", "createdAt": "2020-04-20T12:51:12Z", "author": {"login": "steveloughran"}, "path": "hadoop-tools/hadoop-aws/src/test/java/org/apache/hadoop/fs/s3a/s3guard/ITestS3GuardToolLocal.java", "diffHunk": "@@ -97,7 +98,6 @@ public void testImportCommand() throws Exception {\n         .getListing().size());\n     assertEquals(\"Expected 2 items: empty directory and a parent directory\", 2,\n         ms.listChildren(parent).getListing().size());\n-    assertTrue(children.isAuthoritative());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "18131caecc24a79c047ba0fd55395f054466ee90"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjMzNjM3OQ==", "bodyText": "This looks wrong assertion. No -authoritative flag is given in the cmd.", "url": "https://github.com/apache/hadoop/pull/1950#discussion_r416336379", "createdAt": "2020-04-28T05:26:59Z", "author": {"login": "iwasakims"}, "path": "hadoop-tools/hadoop-aws/src/test/java/org/apache/hadoop/fs/s3a/s3guard/ITestS3GuardToolLocal.java", "diffHunk": "@@ -97,7 +98,6 @@ public void testImportCommand() throws Exception {\n         .getListing().size());\n     assertEquals(\"Expected 2 items: empty directory and a parent directory\", 2,\n         ms.listChildren(parent).getListing().size());\n-    assertTrue(children.isAuthoritative());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTM1MDk2Nw=="}, "originalCommit": {"oid": "18131caecc24a79c047ba0fd55395f054466ee90"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjM0MTAxMw==", "bodyText": "Actually I got assertion error when I ran the test with fs.s3a.metadatastore.impl=org.apache.hadoop.fs.s3a.s3guard.LocalMetadataStore.\n$ mvn verify -Ds3guard -Dtest=x -Dit.test=ITestS3GuardToolLocal\n...\n[ERROR] Tests run: 33, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 208.832 s <<< FAILURE! - in org.apache.hadoop.fs.s3a.s3guard.ITestS3GuardToolLocal\n[ERROR] testImportCommand(org.apache.hadoop.fs.s3a.s3guard.ITestS3GuardToolLocal)  Time elapsed: 15.872 s  <<< FAILURE!\njava.lang.AssertionError\n\tat org.apache.hadoop.fs.s3a.s3guard.ITestS3GuardToolLocal.testImportCommand(ITestS3GuardToolLocal.java:101)", "url": "https://github.com/apache/hadoop/pull/1950#discussion_r416341013", "createdAt": "2020-04-28T05:40:28Z", "author": {"login": "iwasakims"}, "path": "hadoop-tools/hadoop-aws/src/test/java/org/apache/hadoop/fs/s3a/s3guard/ITestS3GuardToolLocal.java", "diffHunk": "@@ -97,7 +98,6 @@ public void testImportCommand() throws Exception {\n         .getListing().size());\n     assertEquals(\"Expected 2 items: empty directory and a parent directory\", 2,\n         ms.listChildren(parent).getListing().size());\n-    assertTrue(children.isAuthoritative());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTM1MDk2Nw=="}, "originalCommit": {"oid": "18131caecc24a79c047ba0fd55395f054466ee90"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODQ4MzU5Mw==", "bodyText": "probably is wrong then :)", "url": "https://github.com/apache/hadoop/pull/1950#discussion_r418483593", "createdAt": "2020-05-01T09:53:28Z", "author": {"login": "steveloughran"}, "path": "hadoop-tools/hadoop-aws/src/test/java/org/apache/hadoop/fs/s3a/s3guard/ITestS3GuardToolLocal.java", "diffHunk": "@@ -97,7 +98,6 @@ public void testImportCommand() throws Exception {\n         .getListing().size());\n     assertEquals(\"Expected 2 items: empty directory and a parent directory\", 2,\n         ms.listChildren(parent).getListing().size());\n-    assertTrue(children.isAuthoritative());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTM1MDk2Nw=="}, "originalCommit": {"oid": "18131caecc24a79c047ba0fd55395f054466ee90"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU1NTUwMjExOnYy", "diffSide": "RIGHT", "path": "hadoop-tools/hadoop-aws/src/test/java/org/apache/hadoop/fs/s3a/s3guard/ITestS3GuardToolLocal.java", "isResolved": true, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxMjo1Mzo0NVrOGIS-OA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQyMzo1ODoyNlrOGUc_Qw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTM1MjYzMg==", "bodyText": "if this is triggering failures, I'm not seeing them -but then I do have fs.s3a.bucket.probe == 0....it's probably not triggering any bucket probe at all. For consistent failures here, the config we run with should have that option set to 2, \"use v2 probe on instantiation\".", "url": "https://github.com/apache/hadoop/pull/1950#discussion_r411352632", "createdAt": "2020-04-20T12:53:45Z", "author": {"login": "steveloughran"}, "path": "hadoop-tools/hadoop-aws/src/test/java/org/apache/hadoop/fs/s3a/s3guard/ITestS3GuardToolLocal.java", "diffHunk": "@@ -165,18 +165,19 @@ public void testImportNoFilesystem() throws Throwable {\n \n   @Test\n   public void testInfoBucketAndRegionNoFS() throws Throwable {\n-    intercept(FileNotFoundException.class,\n+    intercept(UnknownStoreException.class,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "18131caecc24a79c047ba0fd55395f054466ee90"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjM1NDYwNQ==", "bodyText": "v2 prove was used as a default value when I ran the test.\n  public static final int S3A_BUCKET_PROBE_DEFAULT = 2;\n\nThe reaseon you did not see this may be that the ITestS3GuardToolLocal was just skipped. You are using DynamoDBMetadataStore rather than LocalMetadataStore?", "url": "https://github.com/apache/hadoop/pull/1950#discussion_r416354605", "createdAt": "2020-04-28T06:15:21Z", "author": {"login": "iwasakims"}, "path": "hadoop-tools/hadoop-aws/src/test/java/org/apache/hadoop/fs/s3a/s3guard/ITestS3GuardToolLocal.java", "diffHunk": "@@ -165,18 +165,19 @@ public void testImportNoFilesystem() throws Throwable {\n \n   @Test\n   public void testInfoBucketAndRegionNoFS() throws Throwable {\n-    intercept(FileNotFoundException.class,\n+    intercept(UnknownStoreException.class,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTM1MjYzMg=="}, "originalCommit": {"oid": "18131caecc24a79c047ba0fd55395f054466ee90"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjQ2OTMyNg==", "bodyText": "yeah, generally", "url": "https://github.com/apache/hadoop/pull/1950#discussion_r416469326", "createdAt": "2020-04-28T09:31:14Z", "author": {"login": "steveloughran"}, "path": "hadoop-tools/hadoop-aws/src/test/java/org/apache/hadoop/fs/s3a/s3guard/ITestS3GuardToolLocal.java", "diffHunk": "@@ -165,18 +165,19 @@ public void testImportNoFilesystem() throws Throwable {\n \n   @Test\n   public void testInfoBucketAndRegionNoFS() throws Throwable {\n-    intercept(FileNotFoundException.class,\n+    intercept(UnknownStoreException.class,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTM1MjYzMg=="}, "originalCommit": {"oid": "18131caecc24a79c047ba0fd55395f054466ee90"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODQ4MzkzNg==", "bodyText": "we should probably unset bucket probe options too & switch to the default (2) value; avoid differences in init behaviour", "url": "https://github.com/apache/hadoop/pull/1950#discussion_r418483936", "createdAt": "2020-05-01T09:54:30Z", "author": {"login": "steveloughran"}, "path": "hadoop-tools/hadoop-aws/src/test/java/org/apache/hadoop/fs/s3a/s3guard/ITestS3GuardToolLocal.java", "diffHunk": "@@ -165,18 +165,19 @@ public void testImportNoFilesystem() throws Throwable {\n \n   @Test\n   public void testInfoBucketAndRegionNoFS() throws Throwable {\n-    intercept(FileNotFoundException.class,\n+    intercept(UnknownStoreException.class,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTM1MjYzMg=="}, "originalCommit": {"oid": "18131caecc24a79c047ba0fd55395f054466ee90"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDA5OTY1MQ==", "bodyText": "This was addressed in createConfiguration above.", "url": "https://github.com/apache/hadoop/pull/1950#discussion_r424099651", "createdAt": "2020-05-12T23:58:26Z", "author": {"login": "iwasakims"}, "path": "hadoop-tools/hadoop-aws/src/test/java/org/apache/hadoop/fs/s3a/s3guard/ITestS3GuardToolLocal.java", "diffHunk": "@@ -165,18 +165,19 @@ public void testImportNoFilesystem() throws Throwable {\n \n   @Test\n   public void testInfoBucketAndRegionNoFS() throws Throwable {\n-    intercept(FileNotFoundException.class,\n+    intercept(UnknownStoreException.class,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTM1MjYzMg=="}, "originalCommit": {"oid": "18131caecc24a79c047ba0fd55395f054466ee90"}, "originalPosition": 30}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU1NTUwODUyOnYy", "diffSide": "RIGHT", "path": "hadoop-tools/hadoop-aws/src/test/java/org/apache/hadoop/fs/s3a/s3guard/ITestS3GuardToolLocal.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxMjo1NTowOVrOGITB4g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQwNTo1NDozNVrOGNDwxw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTM1MzU3MA==", "bodyText": "if this is triggering bucket probe failures, it's not doing the -ve arg check. So here we should either switch to a probe option of 0, or just cut the test entirely. I'm almost going for the latter given the way people should be creating tables is with read = write =0 for on-demand use", "url": "https://github.com/apache/hadoop/pull/1950#discussion_r411353570", "createdAt": "2020-04-20T12:55:09Z", "author": {"login": "steveloughran"}, "path": "hadoop-tools/hadoop-aws/src/test/java/org/apache/hadoop/fs/s3a/s3guard/ITestS3GuardToolLocal.java", "diffHunk": "@@ -165,18 +165,19 @@ public void testImportNoFilesystem() throws Throwable {\n \n   @Test\n   public void testInfoBucketAndRegionNoFS() throws Throwable {\n-    intercept(FileNotFoundException.class,\n+    intercept(UnknownStoreException.class,\n         () -> run(BucketInfo.NAME, \"-meta\",\n             LOCAL_METADATA, \"-region\",\n             \"any-region\", S3A_THIS_BUCKET_DOES_NOT_EXIST));\n   }\n \n   @Test\n   public void testInitNegativeRead() throws Throwable {\n-    runToFailure(INVALID_ARGUMENT,\n-        Init.NAME, \"-meta\", LOCAL_METADATA, \"-region\",\n-        \"eu-west-1\",\n-        READ_FLAG, \"-10\");\n+    intercept(CommandFormat.UnknownOptionException.class,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "18131caecc24a79c047ba0fd55395f054466ee90"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjM0NjMxMQ==", "bodyText": "I agree to remove the test. The error caused by treating -10 as option rather than option's value since it startsWith(\"-\"). The read flag does not need to handle negative value.", "url": "https://github.com/apache/hadoop/pull/1950#discussion_r416346311", "createdAt": "2020-04-28T05:54:35Z", "author": {"login": "iwasakims"}, "path": "hadoop-tools/hadoop-aws/src/test/java/org/apache/hadoop/fs/s3a/s3guard/ITestS3GuardToolLocal.java", "diffHunk": "@@ -165,18 +165,19 @@ public void testImportNoFilesystem() throws Throwable {\n \n   @Test\n   public void testInfoBucketAndRegionNoFS() throws Throwable {\n-    intercept(FileNotFoundException.class,\n+    intercept(UnknownStoreException.class,\n         () -> run(BucketInfo.NAME, \"-meta\",\n             LOCAL_METADATA, \"-region\",\n             \"any-region\", S3A_THIS_BUCKET_DOES_NOT_EXIST));\n   }\n \n   @Test\n   public void testInitNegativeRead() throws Throwable {\n-    runToFailure(INVALID_ARGUMENT,\n-        Init.NAME, \"-meta\", LOCAL_METADATA, \"-region\",\n-        \"eu-west-1\",\n-        READ_FLAG, \"-10\");\n+    intercept(CommandFormat.UnknownOptionException.class,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTM1MzU3MA=="}, "originalCommit": {"oid": "18131caecc24a79c047ba0fd55395f054466ee90"}, "originalPosition": 42}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYwMzkzMDY1OnYy", "diffSide": "RIGHT", "path": "hadoop-tools/hadoop-aws/src/test/java/org/apache/hadoop/fs/s3a/s3guard/ITestS3GuardToolLocal.java", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMVQwOTo1Mjo1MFrOGPGM4g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QwMDowMDoyM1rOGRplMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODQ4MzQyNg==", "bodyText": "need to use the removeBaseAndBucketOverrides() code in S3ATestUtils to make sure that any per-bucket setting has turned it on. Look for other uses to see what to do", "url": "https://github.com/apache/hadoop/pull/1950#discussion_r418483426", "createdAt": "2020-05-01T09:52:50Z", "author": {"login": "steveloughran"}, "path": "hadoop-tools/hadoop-aws/src/test/java/org/apache/hadoop/fs/s3a/s3guard/ITestS3GuardToolLocal.java", "diffHunk": "@@ -57,13 +59,18 @@\n   private static final String[] ABORT_FORCE_OPTIONS = new String[] {\"-abort\",\n       \"-force\", \"-verbose\"};\n \n+  @Override\n+  protected Configuration createConfiguration() {\n+    Configuration conf = super.createConfiguration();\n+    conf.set(S3_METADATA_STORE_IMPL, S3GUARD_METASTORE_LOCAL);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "04479c24cc27ec543dfe48a4406d19f7c3643b8c"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODc4MTM5OQ==", "bodyText": "Thanks. I added code to reset fs.s3a.metadatastore.impl and fs.s3a.bucket.probe.", "url": "https://github.com/apache/hadoop/pull/1950#discussion_r418781399", "createdAt": "2020-05-01T23:45:49Z", "author": {"login": "iwasakims"}, "path": "hadoop-tools/hadoop-aws/src/test/java/org/apache/hadoop/fs/s3a/s3guard/ITestS3GuardToolLocal.java", "diffHunk": "@@ -57,13 +59,18 @@\n   private static final String[] ABORT_FORCE_OPTIONS = new String[] {\"-abort\",\n       \"-force\", \"-verbose\"};\n \n+  @Override\n+  protected Configuration createConfiguration() {\n+    Configuration conf = super.createConfiguration();\n+    conf.set(S3_METADATA_STORE_IMPL, S3GUARD_METASTORE_LOCAL);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODQ4MzQyNg=="}, "originalCommit": {"oid": "04479c24cc27ec543dfe48a4406d19f7c3643b8c"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDg4MjYzOQ==", "bodyText": "thanks. FWIW that removeBaseAndBucket call is varags; you can remove as many as you need in one go. Code is fine as as is though", "url": "https://github.com/apache/hadoop/pull/1950#discussion_r420882639", "createdAt": "2020-05-06T15:27:50Z", "author": {"login": "steveloughran"}, "path": "hadoop-tools/hadoop-aws/src/test/java/org/apache/hadoop/fs/s3a/s3guard/ITestS3GuardToolLocal.java", "diffHunk": "@@ -57,13 +59,18 @@\n   private static final String[] ABORT_FORCE_OPTIONS = new String[] {\"-abort\",\n       \"-force\", \"-verbose\"};\n \n+  @Override\n+  protected Configuration createConfiguration() {\n+    Configuration conf = super.createConfiguration();\n+    conf.set(S3_METADATA_STORE_IMPL, S3GUARD_METASTORE_LOCAL);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODQ4MzQyNg=="}, "originalCommit": {"oid": "04479c24cc27ec543dfe48a4406d19f7c3643b8c"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTE2MDI0MA==", "bodyText": "Sure. I removed the duplicate call.", "url": "https://github.com/apache/hadoop/pull/1950#discussion_r421160240", "createdAt": "2020-05-07T00:00:23Z", "author": {"login": "iwasakims"}, "path": "hadoop-tools/hadoop-aws/src/test/java/org/apache/hadoop/fs/s3a/s3guard/ITestS3GuardToolLocal.java", "diffHunk": "@@ -57,13 +59,18 @@\n   private static final String[] ABORT_FORCE_OPTIONS = new String[] {\"-abort\",\n       \"-force\", \"-verbose\"};\n \n+  @Override\n+  protected Configuration createConfiguration() {\n+    Configuration conf = super.createConfiguration();\n+    conf.set(S3_METADATA_STORE_IMPL, S3GUARD_METASTORE_LOCAL);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODQ4MzQyNg=="}, "originalCommit": {"oid": "04479c24cc27ec543dfe48a4406d19f7c3643b8c"}, "originalPosition": 35}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3657, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}