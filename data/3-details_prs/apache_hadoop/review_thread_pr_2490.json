{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI3MDc0NjQ4", "number": 2490, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0zMFQxNDoyMTowOFrOE-rN4A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0zMFQxNDoyMTowOFrOE-rN4A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM0MTU1MjMyOnYy", "diffSide": "RIGHT", "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/placement/CSMappingPlacementRule.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0zMFQxNDoyMTowOFrOH79PHg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMVQwODo0NDo1M1rOH8dmnA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjYzMTMyNg==", "bodyText": "Just to be sure the variable context is as consistent as possible, please add a\nvctx.putExtraDataset(\"groups\", groupsSet);\nbefore the return, empty set is a valid groups, at least it can be used by the matchers, not that it will ever match, but it's perhaps better than leaving it blank.\nAs for primary and secondary groups there is not much we can do.", "url": "https://github.com/apache/hadoop/pull/2490#discussion_r532631326", "createdAt": "2020-11-30T14:21:08Z", "author": {"login": "shuzirra"}, "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/placement/CSMappingPlacementRule.java", "diffHunk": "@@ -181,6 +181,10 @@ private void setupGroupsForVariableContext(VariableContext vctx, String user)\n       return;\n     }\n     Set<String> groupsSet = groups.getGroupsSet(user);\n+    if (groupsSet.isEmpty()) {\n+      LOG.warn(\"There are no groups for user {}\", user);\n+      return;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "323f265187bd290d98c92d753076460ed468bc44"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzE2MTYyOA==", "bodyText": "Added it. Thank you @shuzirra", "url": "https://github.com/apache/hadoop/pull/2490#discussion_r533161628", "createdAt": "2020-12-01T08:44:53Z", "author": {"login": "aajisaka"}, "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/placement/CSMappingPlacementRule.java", "diffHunk": "@@ -181,6 +181,10 @@ private void setupGroupsForVariableContext(VariableContext vctx, String user)\n       return;\n     }\n     Set<String> groupsSet = groups.getGroupsSet(user);\n+    if (groupsSet.isEmpty()) {\n+      LOG.warn(\"There are no groups for user {}\", user);\n+      return;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjYzMTMyNg=="}, "originalCommit": {"oid": "323f265187bd290d98c92d753076460ed468bc44"}, "originalPosition": 6}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3142, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}