{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg2MTA5MjA5", "number": 1889, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQxNjo1NTo1MlrODnKZ7A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQxNjo1NTo1MlrODnKZ7A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQyMzkxNTMyOnYy", "diffSide": "RIGHT", "path": "hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/util/FakeTimer.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQxNjo1NTo1MlrOF1ABBg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQwMjozMjo0NlrOF1PZzQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTExOTExMA==", "bodyText": "Can we leave the old behavior as it was and add a method to change the nowNanos so we only set it there?", "url": "https://github.com/apache/hadoop/pull/1889#discussion_r391119110", "createdAt": "2020-03-11T16:55:52Z", "author": {"login": "goiri"}, "path": "hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/util/FakeTimer.java", "diffHunk": "@@ -29,17 +29,19 @@\n @InterfaceAudience.Private\n @InterfaceStability.Unstable\n public class FakeTimer extends Timer {\n+  private long now;\n   private long nowNanos;\n \n   /** Constructs a FakeTimer with a non-zero value */\n   public FakeTimer() {\n     // Initialize with a non-trivial value.\n+    now = 1577836800000L; // 2020-01-01 00:00:00,000+0000", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "08499172e0be6dcbd60509d5ff0f55ebe64b23bf"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTM3MTIxMw==", "bodyText": "Thank you for the comment.\nActually, I think it's more real behavior than original one, because Timer.now() returns the time based on System.currentTimeMillis(), and Timer.monotonicNow() and Timer.monotonicNowNanos() return the time based on System.nanoTime(), which are different times.\nThis change is useful to verify the fix in this PR. Also, it doesn't break the existing tests.\nWhat do you think?", "url": "https://github.com/apache/hadoop/pull/1889#discussion_r391371213", "createdAt": "2020-03-12T02:32:46Z", "author": {"login": "brfrn169"}, "path": "hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/util/FakeTimer.java", "diffHunk": "@@ -29,17 +29,19 @@\n @InterfaceAudience.Private\n @InterfaceStability.Unstable\n public class FakeTimer extends Timer {\n+  private long now;\n   private long nowNanos;\n \n   /** Constructs a FakeTimer with a non-zero value */\n   public FakeTimer() {\n     // Initialize with a non-trivial value.\n+    now = 1577836800000L; // 2020-01-01 00:00:00,000+0000", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTExOTExMA=="}, "originalCommit": {"oid": "08499172e0be6dcbd60509d5ff0f55ebe64b23bf"}, "originalPosition": 10}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3618, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}