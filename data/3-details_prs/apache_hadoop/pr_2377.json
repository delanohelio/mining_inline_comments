{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAwOTMwMjE2", "number": 2377, "title": "HDFS-15624. fix the function of setting quota by storage type", "bodyText": "HDFS-15025 adds a new storage Type NVDIMM, changes the ordinal() of the enum of StorageType. And, setting the quota by storageType depends on the ordinal(), therefore, it may cause the setting of quota to be invalid after upgrade.\nThis fix the function of setting quota by storage type  bug in hadoop/trunk.", "createdAt": "2020-10-10T07:34:46Z", "url": "https://github.com/apache/hadoop/pull/2377", "merged": true, "mergeCommit": {"oid": "394b9f7a5c42ffa38bf7c3a44e7d50a4d19414f9"}, "closed": true, "closedAt": "2021-02-03T06:44:34Z", "author": {"login": "YaYun-Wang"}, "timelineItems": {"totalCount": 35, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdU9FhvAFqTUxNDQ0NTE4NQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdz3GpsgFqTU3NjEwOTUxNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE0NDQ1MTg1", "url": "https://github.com/apache/hadoop/pull/2377#pullrequestreview-514445185", "createdAt": "2020-10-22T07:45:59Z", "commit": {"oid": "efd1957e80b6dc22f54bb0df3fd61c10aa1eaa27"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE1Mzc2MDQ4", "url": "https://github.com/apache/hadoop/pull/2377#pullrequestreview-515376048", "createdAt": "2020-10-23T06:25:54Z", "commit": {"oid": "cb3bac5f4be587ed44588df0f8c4d7af65935dc1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QwNjoyNTo1NVrOHnARSA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QwNjoyNTo1NVrOHnARSA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDY2MDkzNg==", "bodyText": "Since there is no release after this feature is committed, No need to increase layout version twice for same feature.\nUsually one version increase is sufficient per release. But for clarity separate feature can be added.\nIn this case feature is only one. NVDIMM SUPPORT.", "url": "https://github.com/apache/hadoop/pull/2377#discussion_r510660936", "createdAt": "2020-10-23T06:25:55Z", "author": {"login": "vinayakumarb"}, "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/NameNodeLayoutVersion.java", "diffHunk": "@@ -89,7 +89,11 @@ public static boolean supports(final LayoutFeature f, final int lv) {\n     APPEND_NEW_BLOCK(-62, -61, \"Support appending to new block\"),\n     QUOTA_BY_STORAGE_TYPE(-63, -61, \"Support quota for specific storage types\"),\n     ERASURE_CODING(-64, -61, \"Support erasure coding\"),\n-    EXPANDED_STRING_TABLE(-65, -61, \"Support expanded string table in fsimage\");\n+    EXPANDED_STRING_TABLE(-65, -61, \"Support expanded string table in fsimage\"),\n+    BLOCK_STORAGE_POLICY_INCLUDING_ALL_NVDIMM(-66, -66, \"Support block \" +\n+        \"Storage policy including ALL_NVDIMM\"),\n+    QUOTA_BY_STORAGE_TYPE_INCLUDING_NVDIMM(-67, -66, \"Support quota for \" +\n+        \"specific storage types including NVDIMM\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cb3bac5f4be587ed44588df0f8c4d7af65935dc1"}, "originalPosition": 9}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE1Mzc3NjM0", "url": "https://github.com/apache/hadoop/pull/2377#pullrequestreview-515377634", "createdAt": "2020-10-23T06:29:28Z", "commit": {"oid": "cb3bac5f4be587ed44588df0f8c4d7af65935dc1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QwNjoyOToyOFrOHnAWVQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QwNjoyOToyOFrOHnAWVQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDY2MjIyOQ==", "bodyText": "Because of addition of new STORAGE TYPE,\nduring upgrade\ncalls from old clients, who doesnt have this storagetype, will experience failure.\nEspecially getQuotaUsage() call will experience failure. May be need to analyze more to avoid failures during upgrade.\nEven though upgrade is finalized, old clients should continue to work.", "url": "https://github.com/apache/hadoop/pull/2377#discussion_r510662229", "createdAt": "2020-10-23T06:29:28Z", "author": {"login": "vinayakumarb"}, "path": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/StorageType.java", "diffHunk": "@@ -33,13 +33,12 @@\n @InterfaceAudience.Public\n @InterfaceStability.Unstable\n public enum StorageType {\n-  // sorted by the speed of the storage types, from fast to slow\n   RAM_DISK(true, true),\n-  NVDIMM(false, true),\n   SSD(false, false),\n   DISK(false, false),\n   ARCHIVE(false, false),\n-  PROVIDED(false, false);\n+  PROVIDED(false, false),\n+  NVDIMM(false, true);\n ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cb3bac5f4be587ed44588df0f8c4d7af65935dc1"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE4MjgyMjUw", "url": "https://github.com/apache/hadoop/pull/2377#pullrequestreview-518282250", "createdAt": "2020-10-28T02:31:54Z", "commit": {"oid": "d5b5d0b1905ad9a1eb13d2fddf4b1657e3f9500e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQwMjozMTo1NFrOHpXxWg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQwMjozMTo1NFrOHpXxWg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzE0MzEzMA==", "bodyText": "Is there any reason to change the minCompatLV  to -66?", "url": "https://github.com/apache/hadoop/pull/2377#discussion_r513143130", "createdAt": "2020-10-28T02:31:54Z", "author": {"login": "vinayakumarb"}, "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/NameNodeLayoutVersion.java", "diffHunk": "@@ -89,7 +89,8 @@ public static boolean supports(final LayoutFeature f, final int lv) {\n     APPEND_NEW_BLOCK(-62, -61, \"Support appending to new block\"),\n     QUOTA_BY_STORAGE_TYPE(-63, -61, \"Support quota for specific storage types\"),\n     ERASURE_CODING(-64, -61, \"Support erasure coding\"),\n-    EXPANDED_STRING_TABLE(-65, -61, \"Support expanded string table in fsimage\");\n+    EXPANDED_STRING_TABLE(-65, -61, \"Support expanded string table in fsimage\"),\n+    NVDIMM_SUPPORT(-66, -66, \"Support NVDIMM storage type\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d5b5d0b1905ad9a1eb13d2fddf4b1657e3f9500e"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE5Mzc1MTEy", "url": "https://github.com/apache/hadoop/pull/2377#pullrequestreview-519375112", "createdAt": "2020-10-29T06:51:39Z", "commit": {"oid": "d5b5d0b1905ad9a1eb13d2fddf4b1657e3f9500e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQwNjo1MTozOVrOHqODFg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQwNzowMDowMVrOHqOU5w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDAzMjQwNg==", "bodyText": "This check should be done in case of setStoragePolicy also, if the storage policy is ALLNVDIMM", "url": "https://github.com/apache/hadoop/pull/2377#discussion_r514032406", "createdAt": "2020-10-29T06:51:39Z", "author": {"login": "ayushtkn"}, "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSNamesystem.java", "diffHunk": "@@ -3569,6 +3569,9 @@ void setQuota(String src, long nsQuota, long ssQuota, StorageType type)\n     if (type != null) {\n       requireEffectiveLayoutVersionForFeature(Feature.QUOTA_BY_STORAGE_TYPE);\n     }\n+    if (type == StorageType.NVDIMM) {\n+      requireEffectiveLayoutVersionForFeature(Feature.NVDIMM_SUPPORT);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d5b5d0b1905ad9a1eb13d2fddf4b1657e3f9500e"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDAzMzM2NA==", "bodyText": "Not very aware, but yes, if I am decoding the comment correct, This should be 66 both.", "url": "https://github.com/apache/hadoop/pull/2377#discussion_r514033364", "createdAt": "2020-10-29T06:53:34Z", "author": {"login": "ayushtkn"}, "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/NameNodeLayoutVersion.java", "diffHunk": "@@ -89,7 +89,8 @@ public static boolean supports(final LayoutFeature f, final int lv) {\n     APPEND_NEW_BLOCK(-62, -61, \"Support appending to new block\"),\n     QUOTA_BY_STORAGE_TYPE(-63, -61, \"Support quota for specific storage types\"),\n     ERASURE_CODING(-64, -61, \"Support erasure coding\"),\n-    EXPANDED_STRING_TABLE(-65, -61, \"Support expanded string table in fsimage\");\n+    EXPANDED_STRING_TABLE(-65, -61, \"Support expanded string table in fsimage\"),\n+    NVDIMM_SUPPORT(-66, -66, \"Support NVDIMM storage type\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzE0MzEzMA=="}, "originalCommit": {"oid": "d5b5d0b1905ad9a1eb13d2fddf4b1657e3f9500e"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDAzNjk2Nw==", "bodyText": "I am not sure but will getStoragePolicies also land up in something similar issue? Due to unavailability of storage type? The quota stuff shall be there for PROVIDED also but in case this backward incompatibility is there with Storage Policy too, Then we need to find out some way.\n@vinayakumarb do you have pointers or suggestions on this, how to tackle this?", "url": "https://github.com/apache/hadoop/pull/2377#discussion_r514036967", "createdAt": "2020-10-29T07:00:01Z", "author": {"login": "ayushtkn"}, "path": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/StorageType.java", "diffHunk": "@@ -33,13 +33,12 @@\n @InterfaceAudience.Public\n @InterfaceStability.Unstable\n public enum StorageType {\n-  // sorted by the speed of the storage types, from fast to slow\n   RAM_DISK(true, true),\n-  NVDIMM(false, true),\n   SSD(false, false),\n   DISK(false, false),\n   ARCHIVE(false, false),\n-  PROVIDED(false, false);\n+  PROVIDED(false, false),\n+  NVDIMM(false, true);\n ", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDY2MjIyOQ=="}, "originalCommit": {"oid": "cb3bac5f4be587ed44588df0f8c4d7af65935dc1"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE4MjgyNTYx", "url": "https://github.com/apache/hadoop/pull/2377#pullrequestreview-518282561", "createdAt": "2020-10-28T02:32:55Z", "commit": {"oid": "d5b5d0b1905ad9a1eb13d2fddf4b1657e3f9500e"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQwMjozMjo1NVrOHpXyVw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQwODoyMzo0MFrOHpenRA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzE0MzM4Mw==", "bodyText": "Similar check you need to add when user tries to use NVDIMM based storage policy..", "url": "https://github.com/apache/hadoop/pull/2377#discussion_r513143383", "createdAt": "2020-10-28T02:32:55Z", "author": {"login": "vinayakumarb"}, "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSNamesystem.java", "diffHunk": "@@ -3569,6 +3569,9 @@ void setQuota(String src, long nsQuota, long ssQuota, StorageType type)\n     if (type != null) {\n       requireEffectiveLayoutVersionForFeature(Feature.QUOTA_BY_STORAGE_TYPE);\n     }\n+    if (type == StorageType.NVDIMM) {\n+      requireEffectiveLayoutVersionForFeature(Feature.NVDIMM_SUPPORT);\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d5b5d0b1905ad9a1eb13d2fddf4b1657e3f9500e"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzI1NTIzNg==", "bodyText": "setQuota() check will only block during rollingupgrade. But once its finalized, still old clients experience failure.\nAnyway thats the current problem, even before this feature. Can be handled in a separate Jira.\nMore details about failure: 2.10.1 client asking quota usage from 3.3.0 namenode.\n$ bin/hdfs dfs -fs hdfs://namenode:8020/ -count -q -t -h /\ncount: Message missing required fields: usage.typeQuotaInfos.typeQuotaInfo[3].type\n\nAbove issue is coming, because 2.10.1 client doent know about PROVIDED StorageType.\nSimilar problem will occur for NVDIMM also from previous version clients.", "url": "https://github.com/apache/hadoop/pull/2377#discussion_r513255236", "createdAt": "2020-10-28T08:23:40Z", "author": {"login": "vinayakumarb"}, "path": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/StorageType.java", "diffHunk": "@@ -33,13 +33,12 @@\n @InterfaceAudience.Public\n @InterfaceStability.Unstable\n public enum StorageType {\n-  // sorted by the speed of the storage types, from fast to slow\n   RAM_DISK(true, true),\n-  NVDIMM(false, true),\n   SSD(false, false),\n   DISK(false, false),\n   ARCHIVE(false, false),\n-  PROVIDED(false, false);\n+  PROVIDED(false, false),\n+  NVDIMM(false, true);\n ", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDY2MjIyOQ=="}, "originalCommit": {"oid": "cb3bac5f4be587ed44588df0f8c4d7af65935dc1"}, "originalPosition": 13}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d5b5d0b1905ad9a1eb13d2fddf4b1657e3f9500e", "author": {"user": {"login": "kevinbrandon2020", "name": "xusu"}}, "url": "https://github.com/apache/hadoop/commit/d5b5d0b1905ad9a1eb13d2fddf4b1657e3f9500e", "committedDate": "2020-10-27T02:33:03Z", "message": "Adjust the Namenode's layout version and add new function judgment to the setQuota of the FDNamesystem class"}, "afterCommit": {"oid": "2321ba5fa2f7e7c4c5d8b6603a8677a4a94d0e22", "author": {"user": {"login": "huangtianhua", "name": "huangtianhua"}}, "url": "https://github.com/apache/hadoop/commit/2321ba5fa2f7e7c4c5d8b6603a8677a4a94d0e22", "committedDate": "2020-10-30T06:35:47Z", "message": "HDFS-15624 Fix NVDIMM storage issues\n\nThis changes:\n1. puts NVDIMM to the end of storage type enum\n   to make sure compatibility.\n2. adds check for setQuota() and setStoragePolicy()\n   to make sure the software layout version is\n   satisfied."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2321ba5fa2f7e7c4c5d8b6603a8677a4a94d0e22", "author": {"user": {"login": "huangtianhua", "name": "huangtianhua"}}, "url": "https://github.com/apache/hadoop/commit/2321ba5fa2f7e7c4c5d8b6603a8677a4a94d0e22", "committedDate": "2020-10-30T06:35:47Z", "message": "HDFS-15624 Fix NVDIMM storage issues\n\nThis changes:\n1. puts NVDIMM to the end of storage type enum\n   to make sure compatibility.\n2. adds check for setQuota() and setStoragePolicy()\n   to make sure the software layout version is\n   satisfied."}, "afterCommit": {"oid": "4d53da6ac3244adc819fd445ce17e413cc7aa2ce", "author": {"user": {"login": "huangtianhua", "name": "huangtianhua"}}, "url": "https://github.com/apache/hadoop/commit/4d53da6ac3244adc819fd445ce17e413cc7aa2ce", "committedDate": "2020-10-31T01:32:37Z", "message": "HDFS-15624 Fix NVDIMM storage issues\n\nThis changes:\n1. puts NVDIMM to the end of storage type enum\n   to make sure compatibility.\n2. adds check for setQuota() and setStoragePolicy()\n   to make sure the software layout version is\n   satisfied."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4d53da6ac3244adc819fd445ce17e413cc7aa2ce", "author": {"user": {"login": "huangtianhua", "name": "huangtianhua"}}, "url": "https://github.com/apache/hadoop/commit/4d53da6ac3244adc819fd445ce17e413cc7aa2ce", "committedDate": "2020-10-31T01:32:37Z", "message": "HDFS-15624 Fix NVDIMM storage issues\n\nThis changes:\n1. puts NVDIMM to the end of storage type enum\n   to make sure compatibility.\n2. adds check for setQuota() and setStoragePolicy()\n   to make sure the software layout version is\n   satisfied."}, "afterCommit": {"oid": "27c1ef5f423a06150ae6b4c32cd0f73ae18c75de", "author": {"user": {"login": "huangtianhua", "name": "huangtianhua"}}, "url": "https://github.com/apache/hadoop/commit/27c1ef5f423a06150ae6b4c32cd0f73ae18c75de", "committedDate": "2020-11-02T01:43:11Z", "message": "HDFS-15624 Fix NVDIMM storage issues\n\nThis changes:\n1. puts NVDIMM to the end of storage type enum\n   to make sure compatibility.\n2. adds check for setQuota() and setStoragePolicy()\n   to make sure the software layout version is\n   satisfied."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "27c1ef5f423a06150ae6b4c32cd0f73ae18c75de", "author": {"user": {"login": "huangtianhua", "name": "huangtianhua"}}, "url": "https://github.com/apache/hadoop/commit/27c1ef5f423a06150ae6b4c32cd0f73ae18c75de", "committedDate": "2020-11-02T01:43:11Z", "message": "HDFS-15624 Fix NVDIMM storage issues\n\nThis changes:\n1. puts NVDIMM to the end of storage type enum\n   to make sure compatibility.\n2. adds check for setQuota() and setStoragePolicy()\n   to make sure the software layout version is\n   satisfied."}, "afterCommit": {"oid": "5d676ee57aaef7d676f51ce5f17a47dfa5f98fd4", "author": {"user": {"login": "huangtianhua", "name": "huangtianhua"}}, "url": "https://github.com/apache/hadoop/commit/5d676ee57aaef7d676f51ce5f17a47dfa5f98fd4", "committedDate": "2020-11-03T01:25:43Z", "message": "HDFS-15624 Fix NVDIMM storage issues\n\nThis changes:\n1. puts NVDIMM to the end of storage type enum\n   to make sure compatibility.\n2. adds check for setQuota() and setStoragePolicy()\n   to make sure the software layout version is\n   satisfied."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7736e7d952d77e522390584412f067233c1d5771", "author": {"user": {"login": "YaYun-Wang", "name": null}}, "url": "https://github.com/apache/hadoop/commit/7736e7d952d77e522390584412f067233c1d5771", "committedDate": "2020-11-04T01:37:29Z", "message": "fix the function of setting quota by storage type"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3e62104c56b3e2a6fb121dd6257f1c674977b123", "author": {"user": {"login": "YaYun-Wang", "name": null}}, "url": "https://github.com/apache/hadoop/commit/3e62104c56b3e2a6fb121dd6257f1c674977b123", "committedDate": "2020-11-04T01:37:29Z", "message": "fix the function of setting quota by storage type"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0a731cd0ae808df6ace08e9a76bf6321539e7d0d", "author": {"user": {"login": "YaYun-Wang", "name": null}}, "url": "https://github.com/apache/hadoop/commit/0a731cd0ae808df6ace08e9a76bf6321539e7d0d", "committedDate": "2020-11-04T01:37:29Z", "message": "fix the function of setting quota by storage type"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fcc143dc4f72cff6d2598111f6214764e63254fb", "author": {"user": {"login": "YaYun-Wang", "name": null}}, "url": "https://github.com/apache/hadoop/commit/fcc143dc4f72cff6d2598111f6214764e63254fb", "committedDate": "2020-11-04T01:37:29Z", "message": "handle Namenode's layout version while upfrade or downgrade"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "113f0de08a1d44978910052c57da32481a03e03d", "author": {"user": {"login": "YaYun-Wang", "name": null}}, "url": "https://github.com/apache/hadoop/commit/113f0de08a1d44978910052c57da32481a03e03d", "committedDate": "2020-11-04T01:37:29Z", "message": "handle Namenode's layout version while upfrade or downgrade"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2d3bb85c4b0455c58f4b4e24402d93b2e2d4389d", "author": {"user": {"login": "YaYun-Wang", "name": null}}, "url": "https://github.com/apache/hadoop/commit/2d3bb85c4b0455c58f4b4e24402d93b2e2d4389d", "committedDate": "2020-11-04T01:37:29Z", "message": "modify the ancestorLV of new features"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "edfeec0b830b3af53a3f53a82f2c5dbbeddfe19c", "author": {"user": {"login": "YaYun-Wang", "name": null}}, "url": "https://github.com/apache/hadoop/commit/edfeec0b830b3af53a3f53a82f2c5dbbeddfe19c", "committedDate": "2020-11-04T01:37:30Z", "message": "just fix the bug of SetQuotaByStorageTypeOp"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d7db1b979e16756d5e40e30e0e50d929ead40496", "author": {"user": {"login": "YaYun-Wang", "name": null}}, "url": "https://github.com/apache/hadoop/commit/d7db1b979e16756d5e40e30e0e50d929ead40496", "committedDate": "2020-11-04T01:37:30Z", "message": "just fix the bug of SetQuotaByStorageTypeOp"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c65741abffdbc531d4be4c8c0bc25662bebba4fe", "author": {"user": {"login": "YaYun-Wang", "name": null}}, "url": "https://github.com/apache/hadoop/commit/c65741abffdbc531d4be4c8c0bc25662bebba4fe", "committedDate": "2020-11-04T01:37:30Z", "message": "just fix the bug of SetQuotaByStorageTypeOp"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5a99d1bfc82b6677c3a0b90285aee112d3985a62", "author": {"user": {"login": "YaYun-Wang", "name": null}}, "url": "https://github.com/apache/hadoop/commit/5a99d1bfc82b6677c3a0b90285aee112d3985a62", "committedDate": "2020-11-04T01:37:30Z", "message": "just fix the bug of SetQuotaByStorageTypeOp"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "175f33e934ee8f83c989e3c1bf2ccb0f4024319d", "author": {"user": {"login": "YaYun-Wang", "name": null}}, "url": "https://github.com/apache/hadoop/commit/175f33e934ee8f83c989e3c1bf2ccb0f4024319d", "committedDate": "2020-11-04T01:37:30Z", "message": "test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2ca24078e176e344951120abe5ec2d5956f26ec3", "author": {"user": {"login": "YaYun-Wang", "name": null}}, "url": "https://github.com/apache/hadoop/commit/2ca24078e176e344951120abe5ec2d5956f26ec3", "committedDate": "2020-11-04T01:37:30Z", "message": "add new feature again"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "847b8f76164cabc2630f28bd1f9b7a60c655fc5f", "author": {"user": {"login": "YaYun-Wang", "name": null}}, "url": "https://github.com/apache/hadoop/commit/847b8f76164cabc2630f28bd1f9b7a60c655fc5f", "committedDate": "2020-11-04T01:37:30Z", "message": "fix BLOCK_STORAGE_POLICY errors of support in FSEditLogOp"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "769a7c185bd633660ff9d525b7539cb20a18cad4", "author": {"user": {"login": "YaYun-Wang", "name": null}}, "url": "https://github.com/apache/hadoop/commit/769a7c185bd633660ff9d525b7539cb20a18cad4", "committedDate": "2020-11-04T01:37:30Z", "message": "delete extra whitespace"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "92af855f4d4939e0486a6cf7aa03eb063232b9df", "author": {"user": {"login": "kevinbrandon2020", "name": "xusu"}}, "url": "https://github.com/apache/hadoop/commit/92af855f4d4939e0486a6cf7aa03eb063232b9df", "committedDate": "2020-11-04T01:37:30Z", "message": "Adjust the Namenode's layout version and add new function judgment to the setQuota of the FDNamesystem class"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6ba960538e32dfe2eb28085a6769adcc552005bc", "author": {"user": {"login": "kevinbrandon2020", "name": "xusu"}}, "url": "https://github.com/apache/hadoop/commit/6ba960538e32dfe2eb28085a6769adcc552005bc", "committedDate": "2020-11-04T01:37:30Z", "message": "Adjust the Namenode's layout version and add new function judgment to the setQuota of the FDNamesystem class"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e3eadaa8a78858d2abbc2c13e92613d4948c1366", "author": {"user": {"login": "kevinbrandon2020", "name": "xusu"}}, "url": "https://github.com/apache/hadoop/commit/e3eadaa8a78858d2abbc2c13e92613d4948c1366", "committedDate": "2020-11-04T01:37:30Z", "message": "Adjust the Namenode's layout version and add new function judgment to the setQuota of the FDNamesystem class"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a88eb6c8131233546d6e0cdd6615ecd8b23fffaf", "author": {"user": {"login": "kevinbrandon2020", "name": "xusu"}}, "url": "https://github.com/apache/hadoop/commit/a88eb6c8131233546d6e0cdd6615ecd8b23fffaf", "committedDate": "2020-11-04T01:37:30Z", "message": "Adjust the Namenode's layout version and add new function judgment to the setQuota of the FDNamesystem class"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "56bcbbdabc89e4814447525e605b19e39c2cb854", "author": {"user": {"login": "huangtianhua", "name": "huangtianhua"}}, "url": "https://github.com/apache/hadoop/commit/56bcbbdabc89e4814447525e605b19e39c2cb854", "committedDate": "2020-11-04T01:37:30Z", "message": "HDFS-15624 Fix NVDIMM storage issues\n\nThis changes:\n1. puts NVDIMM to the end of storage type enum\n   to make sure compatibility.\n2. adds check for setQuota() and setStoragePolicy()\n   to make sure the software layout version is\n   satisfied."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5d676ee57aaef7d676f51ce5f17a47dfa5f98fd4", "author": {"user": {"login": "huangtianhua", "name": "huangtianhua"}}, "url": "https://github.com/apache/hadoop/commit/5d676ee57aaef7d676f51ce5f17a47dfa5f98fd4", "committedDate": "2020-11-03T01:25:43Z", "message": "HDFS-15624 Fix NVDIMM storage issues\n\nThis changes:\n1. puts NVDIMM to the end of storage type enum\n   to make sure compatibility.\n2. adds check for setQuota() and setStoragePolicy()\n   to make sure the software layout version is\n   satisfied."}, "afterCommit": {"oid": "56bcbbdabc89e4814447525e605b19e39c2cb854", "author": {"user": {"login": "huangtianhua", "name": "huangtianhua"}}, "url": "https://github.com/apache/hadoop/commit/56bcbbdabc89e4814447525e605b19e39c2cb854", "committedDate": "2020-11-04T01:37:30Z", "message": "HDFS-15624 Fix NVDIMM storage issues\n\nThis changes:\n1. puts NVDIMM to the end of storage type enum\n   to make sure compatibility.\n2. adds check for setQuota() and setStoragePolicy()\n   to make sure the software layout version is\n   satisfied."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "15f0386bb80ce5013578e1e441cf99682b9a0cb5", "author": {"user": {"login": "huangtianhua", "name": "huangtianhua"}}, "url": "https://github.com/apache/hadoop/commit/15f0386bb80ce5013578e1e441cf99682b9a0cb5", "committedDate": "2020-12-08T02:59:28Z", "message": "Merge branch 'trunk' into HDFS-15624"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYwMjY2NTAz", "url": "https://github.com/apache/hadoop/pull/2377#pullrequestreview-560266503", "createdAt": "2020-12-31T05:33:24Z", "commit": {"oid": "15f0386bb80ce5013578e1e441cf99682b9a0cb5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYwMjkyMjgy", "url": "https://github.com/apache/hadoop/pull/2377#pullrequestreview-560292282", "createdAt": "2020-12-31T08:27:00Z", "commit": {"oid": "15f0386bb80ce5013578e1e441cf99682b9a0cb5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTc2MDk5MTE0", "url": "https://github.com/apache/hadoop/pull/2377#pullrequestreview-576099114", "createdAt": "2021-01-26T08:03:41Z", "commit": {"oid": "15f0386bb80ce5013578e1e441cf99682b9a0cb5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTc2MTA5NTE2", "url": "https://github.com/apache/hadoop/pull/2377#pullrequestreview-576109516", "createdAt": "2021-01-26T08:19:25Z", "commit": {"oid": "15f0386bb80ce5013578e1e441cf99682b9a0cb5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3453, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}