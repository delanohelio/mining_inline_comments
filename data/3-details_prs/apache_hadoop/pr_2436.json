{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE1NjQ5OTcw", "number": 2436, "title": "HADOOP-17358. Improve excessive reloading of Configurations", "bodyText": "NOTICE\nPlease create an issue in ASF JIRA before opening a pull request,\nand you need to set the title of the pull request which starts with\nthe corresponding JIRA issue number. (e.g. HADOOP-XXXXX. Fix a typo in YYY.)\nFor more details, please see https://cwiki.apache.org/confluence/display/HADOOP/How+To+Contribute", "createdAt": "2020-11-04T21:28:23Z", "url": "https://github.com/apache/hadoop/pull/2436", "merged": true, "mergeCommit": {"oid": "71071e5c0fcaf73a3989000dbc60fa214a317da1"}, "closed": true, "closedAt": "2020-11-11T20:39:04Z", "author": {"login": "amahussein"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdZmoqegFqTUyNDU0NjkxMw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdbkHp4AFqTUyODUxNjU4MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI0NTQ2OTEz", "url": "https://github.com/apache/hadoop/pull/2436#pullrequestreview-524546913", "createdAt": "2020-11-05T18:26:08Z", "commit": {"oid": "cd816f3fd4fc2c3e16f219928d8d245c8123e602"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQxODoyNjowOFrOHuQsgQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQxODoyNjowOFrOHuQsgQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODI3MDA4MQ==", "bodyText": "I would really appreciate if you rewrite this so it doesn't use -1 as startIdx. A year from now I won't remember why we want to load from position -1.", "url": "https://github.com/apache/hadoop/pull/2436#discussion_r518270081", "createdAt": "2020-11-05T18:26:08Z", "author": {"login": "jojochuang"}, "path": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/conf/Configuration.java", "diffHunk": "@@ -2876,10 +2876,17 @@ public Reader getConfResourceAsReader(String name) {\n   protected synchronized Properties getProps() {\n     if (properties == null) {\n       properties = new Properties();\n+      loadProps(properties, -1);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cd816f3fd4fc2c3e16f219928d8d245c8123e602"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d6e55262424634531a5256e717e9b1e1d44ad2f8", "author": {"user": null}, "url": "https://github.com/apache/hadoop/commit/d6e55262424634531a5256e717e9b1e1d44ad2f8", "committedDate": "2020-11-05T19:19:36Z", "message": "HADOOP-17358. Improve excessive reloading of Configurations"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cd816f3fd4fc2c3e16f219928d8d245c8123e602", "author": {"user": null}, "url": "https://github.com/apache/hadoop/commit/cd816f3fd4fc2c3e16f219928d8d245c8123e602", "committedDate": "2020-11-04T21:27:06Z", "message": "HADOOP-17358. Improve excessive reloading of Configurations"}, "afterCommit": {"oid": "d6e55262424634531a5256e717e9b1e1d44ad2f8", "author": {"user": null}, "url": "https://github.com/apache/hadoop/commit/d6e55262424634531a5256e717e9b1e1d44ad2f8", "committedDate": "2020-11-05T19:19:36Z", "message": "HADOOP-17358. Improve excessive reloading of Configurations"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI3NDIyNTQ2", "url": "https://github.com/apache/hadoop/pull/2436#pullrequestreview-527422546", "createdAt": "2020-11-10T17:09:40Z", "commit": {"oid": "d6e55262424634531a5256e717e9b1e1d44ad2f8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQxNzowOTo0MFrOHwmtUg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQxNzowOTo0MFrOHwmtUg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDcyNzg5MA==", "bodyText": "(I thought I posted a comment here, but somehow it got lost in github comments)\nreturning this object isn't necessary, and obviously the callers don't use the return value.", "url": "https://github.com/apache/hadoop/pull/2436#discussion_r520727890", "createdAt": "2020-11-10T17:09:40Z", "author": {"login": "jojochuang"}, "path": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/conf/Configuration.java", "diffHunk": "@@ -2893,7 +2909,7 @@ protected synchronized Properties getProps() {\n         }\n       }\n     }\n-    return properties;\n+    return props;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d6e55262424634531a5256e717e9b1e1d44ad2f8"}, "originalPosition": 52}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d3087c2c1956f5eba6dc2cca26e4cfa93fa4b2d2", "author": {"user": null}, "url": "https://github.com/apache/hadoop/commit/d3087c2c1956f5eba6dc2cca26e4cfa93fa4b2d2", "committedDate": "2020-11-10T20:57:38Z", "message": "HADOOP-17358. address reviews"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI3Njk5NTM0", "url": "https://github.com/apache/hadoop/pull/2436#pullrequestreview-527699534", "createdAt": "2020-11-10T23:50:37Z", "commit": {"oid": "d3087c2c1956f5eba6dc2cca26e4cfa93fa4b2d2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQyMzo1MDozN1rOHw0HsA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQyMzo1MDozN1rOHw0HsA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDk0NzYzMg==", "bodyText": "Could you also remove this @return? I am +1 once this is updated.", "url": "https://github.com/apache/hadoop/pull/2436#discussion_r520947632", "createdAt": "2020-11-10T23:50:37Z", "author": {"login": "jojochuang"}, "path": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/conf/Configuration.java", "diffHunk": "@@ -2876,12 +2876,28 @@ public Reader getConfResourceAsReader(String name) {\n   protected synchronized Properties getProps() {\n     if (properties == null) {\n       properties = new Properties();\n-      Map<String, String[]> backup = updatingResource != null ?\n-          new ConcurrentHashMap<String, String[]>(updatingResource) : null;\n-      loadResources(properties, resources, quietmode);\n+      loadProps(properties, 0, true);\n+    }\n+    return properties;\n+  }\n \n+  /**\n+   * Loads the resource at a given index into the properties.\n+   * @param props the object containing the loaded properties.\n+   * @param startIdx the index where the new resource has been added.\n+   * @param fullReload flag whether we do complete reload of the conf instead\n+   *                   of just loading the new resource.\n+   * @return the properties loaded from the resource.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d3087c2c1956f5eba6dc2cca26e4cfa93fa4b2d2"}, "originalPosition": 32}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3b5256509a0894779d2b7b09f86aa64431538900", "author": {"user": null}, "url": "https://github.com/apache/hadoop/commit/3b5256509a0894779d2b7b09f86aa64431538900", "committedDate": "2020-11-10T23:54:55Z", "message": "HADOOP-1353. remove return from javadoc"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI4NTE2NTgx", "url": "https://github.com/apache/hadoop/pull/2436#pullrequestreview-528516581", "createdAt": "2020-11-11T20:38:08Z", "commit": {"oid": "3b5256509a0894779d2b7b09f86aa64431538900"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3530, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}