{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM4OTQyNTQx", "number": 2545, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQxMjo0NjowMFrOFHK2tw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMVQxNToyNjozM1rOFH1NkA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQzMDYyMTk5OnYy", "diffSide": "RIGHT", "path": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/io/Text.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQxMjo0NjowMFrOIIhg3w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQxMjo0NjowMFrOIIhg3w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTgwODYwNw==", "bodyText": "nit: can you add spaces either side of the  () ,e.g\nif (utf8.length == 0) {", "url": "https://github.com/apache/hadoop/pull/2545#discussion_r545808607", "createdAt": "2020-12-18T12:46:00Z", "author": {"login": "steveloughran"}, "path": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/io/Text.java", "diffHunk": "@@ -226,6 +226,12 @@ public void set(String string) {\n    * Set to a utf8 byte array.\n    */\n   public void set(byte[] utf8) {\n+    if(utf8.length == 0){", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fdda75c86c8913f01acf99848efc958a58a38379"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQzMDYyNjkxOnYy", "diffSide": "RIGHT", "path": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/io/Text.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQxMjo0NzozM1rOIIhj0w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQxMzoxMjowNlrOIIiUdg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTgwOTM2Mw==", "bodyText": "I think I'd prefer to cut the return here and just have an else clause for the normal set() operation.\nThis isn't so long and complex a piece of code that an early return makes sense; it can be easy to miss that it's there when reading the code.", "url": "https://github.com/apache/hadoop/pull/2545#discussion_r545809363", "createdAt": "2020-12-18T12:47:33Z", "author": {"login": "steveloughran"}, "path": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/io/Text.java", "diffHunk": "@@ -226,6 +226,12 @@ public void set(String string) {\n    * Set to a utf8 byte array.\n    */\n   public void set(byte[] utf8) {\n+    if(utf8.length == 0){\n+      bytes = EMPTY_BYTES;\n+      length = 0;\n+      textLength = -1;\n+      return;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fdda75c86c8913f01acf99848efc958a58a38379"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTgyMTgxNA==", "bodyText": "Thank you for your advice. I'll fix it", "url": "https://github.com/apache/hadoop/pull/2545#discussion_r545821814", "createdAt": "2020-12-18T13:12:06Z", "author": {"login": "dgzdot"}, "path": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/io/Text.java", "diffHunk": "@@ -226,6 +226,12 @@ public void set(String string) {\n    * Set to a utf8 byte array.\n    */\n   public void set(byte[] utf8) {\n+    if(utf8.length == 0){\n+      bytes = EMPTY_BYTES;\n+      length = 0;\n+      textLength = -1;\n+      return;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTgwOTM2Mw=="}, "originalCommit": {"oid": "fdda75c86c8913f01acf99848efc958a58a38379"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQzNzU2MTc2OnYy", "diffSide": "RIGHT", "path": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/io/Text.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMVQxNToyNjozM1rOIJcFPA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQwMjo1NzowNVrOIJsong==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Njc2ODE4OA==", "bodyText": "Please update JavaDocs to provide details on behaviors as written here.", "url": "https://github.com/apache/hadoop/pull/2545#discussion_r546768188", "createdAt": "2020-12-21T15:26:33Z", "author": {"login": "belugabehr"}, "path": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/io/Text.java", "diffHunk": "@@ -226,7 +226,13 @@ public void set(String string) {\n    * Set to a utf8 byte array.\n    */", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "11ebcf938850f3b601abadaf26a114add915a5d4"}, "originalPosition": 2}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzAzOTM5MA==", "bodyText": "OK, I would.", "url": "https://github.com/apache/hadoop/pull/2545#discussion_r547039390", "createdAt": "2020-12-22T02:57:05Z", "author": {"login": "dgzdot"}, "path": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/io/Text.java", "diffHunk": "@@ -226,7 +226,13 @@ public void set(String string) {\n    * Set to a utf8 byte array.\n    */", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Njc2ODE4OA=="}, "originalCommit": {"oid": "11ebcf938850f3b601abadaf26a114add915a5d4"}, "originalPosition": 2}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3185, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}