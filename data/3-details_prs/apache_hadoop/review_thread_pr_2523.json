{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMzMDQyODQw", "number": 2523, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QwNzowODoxMlrOFBoNXA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QwNzo0NjozNVrOFBo-cA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM3MjUxNjc2OnYy", "diffSide": "RIGHT", "path": "hadoop-hdfs-project/hadoop-hdfs-native-client/src/main/native/libhdfspp/CMakeLists.txt", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QwNzowODoxMlrOIAYq4w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QwNzo1MjozNlrOIAZ6Zw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzI3NTEwNw==", "bodyText": "In Apache Hadoop, the CMake version is >= 3.1. Therefore the code can be removed.\nhttps://issues.apache.org/jira/browse/HADOOP-14670", "url": "https://github.com/apache/hadoop/pull/2523#discussion_r537275107", "createdAt": "2020-12-07T07:08:12Z", "author": {"login": "aajisaka"}, "path": "hadoop-hdfs-project/hadoop-hdfs-native-client/src/main/native/libhdfspp/CMakeLists.txt", "diffHunk": "@@ -51,6 +54,38 @@ find_package(Threads)\n \n include(CheckCXXSourceCompiles)\n \n+# Download and build gtest\n+configure_file(CMakeLists-gtest.txt.in googletest-download/CMakeLists.txt)\n+execute_process(COMMAND ${CMAKE_COMMAND} -G \"${CMAKE_GENERATOR}\" .\n+  RESULT_VARIABLE result\n+  WORKING_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR}/googletest-download)\n+if(result)\n+  message(FATAL_ERROR \"CMake step for googletest failed: ${result}\")\n+endif()\n+execute_process(COMMAND ${CMAKE_COMMAND} --build .\n+  RESULT_VARIABLE result\n+  WORKING_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR}/googletest-download)\n+if(result)\n+  message(FATAL_ERROR \"Build step for googletest failed: ${result}\")\n+endif()\n+\n+# Prevent overriding the parent project's compiler/linker\n+# settings on Windows\n+set(gtest_force_shared_crt ON CACHE BOOL \"\" FORCE)\n+\n+# Add googletest directly to our build. This defines\n+# the gtest and gtest_main targets.\n+add_subdirectory(${CMAKE_CURRENT_BINARY_DIR}/googletest-src\n+                 ${CMAKE_CURRENT_BINARY_DIR}/googletest-build\n+                 EXCLUDE_FROM_ALL)\n+\n+# The gtest/gtest_main targets carry header search path\n+# dependencies automatically when using CMake 2.8.11 or\n+# later. Otherwise we have to add them here ourselves.\n+if (CMAKE_VERSION VERSION_LESS 2.8.11)\n+  include_directories(\"${gtest_SOURCE_DIR}/include\" \"${gmock_SOURCE_DIR}/include\")\n+endif()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5f701bc0e77ec3f20a507153e0ea05a6144b4cd8"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzI5NTQ2Mw==", "bodyText": "Done. Thanks.", "url": "https://github.com/apache/hadoop/pull/2523#discussion_r537295463", "createdAt": "2020-12-07T07:52:36Z", "author": {"login": "GauthamBanasandra"}, "path": "hadoop-hdfs-project/hadoop-hdfs-native-client/src/main/native/libhdfspp/CMakeLists.txt", "diffHunk": "@@ -51,6 +54,38 @@ find_package(Threads)\n \n include(CheckCXXSourceCompiles)\n \n+# Download and build gtest\n+configure_file(CMakeLists-gtest.txt.in googletest-download/CMakeLists.txt)\n+execute_process(COMMAND ${CMAKE_COMMAND} -G \"${CMAKE_GENERATOR}\" .\n+  RESULT_VARIABLE result\n+  WORKING_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR}/googletest-download)\n+if(result)\n+  message(FATAL_ERROR \"CMake step for googletest failed: ${result}\")\n+endif()\n+execute_process(COMMAND ${CMAKE_COMMAND} --build .\n+  RESULT_VARIABLE result\n+  WORKING_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR}/googletest-download)\n+if(result)\n+  message(FATAL_ERROR \"Build step for googletest failed: ${result}\")\n+endif()\n+\n+# Prevent overriding the parent project's compiler/linker\n+# settings on Windows\n+set(gtest_force_shared_crt ON CACHE BOOL \"\" FORCE)\n+\n+# Add googletest directly to our build. This defines\n+# the gtest and gtest_main targets.\n+add_subdirectory(${CMAKE_CURRENT_BINARY_DIR}/googletest-src\n+                 ${CMAKE_CURRENT_BINARY_DIR}/googletest-build\n+                 EXCLUDE_FROM_ALL)\n+\n+# The gtest/gtest_main targets carry header search path\n+# dependencies automatically when using CMake 2.8.11 or\n+# later. Otherwise we have to add them here ourselves.\n+if (CMAKE_VERSION VERSION_LESS 2.8.11)\n+  include_directories(\"${gtest_SOURCE_DIR}/include\" \"${gmock_SOURCE_DIR}/include\")\n+endif()", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzI3NTEwNw=="}, "originalCommit": {"oid": "5f701bc0e77ec3f20a507153e0ea05a6144b4cd8"}, "originalPosition": 41}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM3MjUxODA1OnYy", "diffSide": "RIGHT", "path": "hadoop-hdfs-project/hadoop-hdfs-native-client/src/main/native/libhdfspp/CMakeLists-gtest.txt.in", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QwNzowODo0M1rOIAYrlQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QwNzowODo0M1rOIAYrlQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzI3NTI4NQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            cmake_minimum_required(VERSION 2.8.2)\n          \n          \n            \n            cmake_minimum_required(VERSION 3.1 FATAL_ERROR)", "url": "https://github.com/apache/hadoop/pull/2523#discussion_r537275285", "createdAt": "2020-12-07T07:08:43Z", "author": {"login": "aajisaka"}, "path": "hadoop-hdfs-project/hadoop-hdfs-native-client/src/main/native/libhdfspp/CMakeLists-gtest.txt.in", "diffHunk": "@@ -16,6 +19,18 @@\n # limitations under the License.\n #\n \n-set(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} -Wno-missing-field-initializers -Wno-unused-const-variable\")\n-add_library(gmock_main_obj OBJECT gmock-gtest-all.cc gmock_main.cc)\n-add_library(gmock_main $<TARGET_OBJECTS:gmock_main_obj>)\n+cmake_minimum_required(VERSION 2.8.2)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5f701bc0e77ec3f20a507153e0ea05a6144b4cd8"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM3MjY0MTAyOnYy", "diffSide": "RIGHT", "path": "hadoop-hdfs-project/hadoop-hdfs-native-client/src/main/native/libhdfspp/CMakeLists-gtest.txt.in", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QwNzo0NjoxNVrOIAZtyw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QwNzo1Mjo1NVrOIAZ64w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzI5MjIzNQ==", "bodyText": "We don't have to add the header here because the header is already included in ./licenses/LICENSE-gtest.txt and ./licenses-binary/LICENSE-gtest.txt.", "url": "https://github.com/apache/hadoop/pull/2523#discussion_r537292235", "createdAt": "2020-12-07T07:46:15Z", "author": {"login": "aajisaka"}, "path": "hadoop-hdfs-project/hadoop-hdfs-native-client/src/main/native/libhdfspp/CMakeLists-gtest.txt.in", "diffHunk": "@@ -1,3 +1,6 @@\n+# Copyright 2008, Google Inc.\n+# All rights reserved.\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5f701bc0e77ec3f20a507153e0ea05a6144b4cd8"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzI5NTU4Nw==", "bodyText": "Done. Thanks.", "url": "https://github.com/apache/hadoop/pull/2523#discussion_r537295587", "createdAt": "2020-12-07T07:52:55Z", "author": {"login": "GauthamBanasandra"}, "path": "hadoop-hdfs-project/hadoop-hdfs-native-client/src/main/native/libhdfspp/CMakeLists-gtest.txt.in", "diffHunk": "@@ -1,3 +1,6 @@\n+# Copyright 2008, Google Inc.\n+# All rights reserved.\n+", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzI5MjIzNQ=="}, "originalCommit": {"oid": "5f701bc0e77ec3f20a507153e0ea05a6144b4cd8"}, "originalPosition": 3}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM3MjY0MjQwOnYy", "diffSide": "RIGHT", "path": "hadoop-hdfs-project/hadoop-hdfs-native-client/src/main/native/libhdfspp/CMakeLists.txt", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QwNzo0NjozNVrOIAZuhw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QwNzo1MzowNVrOIAZ7LA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzI5MjQyMw==", "bodyText": "Can be removed.", "url": "https://github.com/apache/hadoop/pull/2523#discussion_r537292423", "createdAt": "2020-12-07T07:46:35Z", "author": {"login": "aajisaka"}, "path": "hadoop-hdfs-project/hadoop-hdfs-native-client/src/main/native/libhdfspp/CMakeLists.txt", "diffHunk": "@@ -1,3 +1,6 @@\n+# Copyright 2008, Google Inc.\n+# All rights reserved.\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5f701bc0e77ec3f20a507153e0ea05a6144b4cd8"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzI5NTY2MA==", "bodyText": "Done. Thanks.", "url": "https://github.com/apache/hadoop/pull/2523#discussion_r537295660", "createdAt": "2020-12-07T07:53:05Z", "author": {"login": "GauthamBanasandra"}, "path": "hadoop-hdfs-project/hadoop-hdfs-native-client/src/main/native/libhdfspp/CMakeLists.txt", "diffHunk": "@@ -1,3 +1,6 @@\n+# Copyright 2008, Google Inc.\n+# All rights reserved.\n+", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzI5MjQyMw=="}, "originalCommit": {"oid": "5f701bc0e77ec3f20a507153e0ea05a6144b4cd8"}, "originalPosition": 3}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3175, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}