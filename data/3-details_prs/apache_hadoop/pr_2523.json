{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMzMDQyODQw", "number": 2523, "title": "HDFS-15712. Upgrade googletest to 1.10.0", "bodyText": "Upgrading the googletest library to\n1.10.0.\nRemoving the older, checked-in gmock\nfrom third_party.", "createdAt": "2020-12-05T16:41:38Z", "url": "https://github.com/apache/hadoop/pull/2523", "merged": true, "mergeCommit": {"oid": "4ffec79b7caf00c96ad5a03983fa45a22ea7ba9d"}, "closed": true, "closedAt": "2020-12-08T08:08:15Z", "author": {"login": "GauthamBanasandra"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdjPD5YgH2gAyNTMzMDQyODQwOjllZmJjMGVmMTcyZTEwNzFmMWE5YTY2ZWUwMzE5NGY3N2Q2MDI3NTE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdjw831gFqTU0NTkwNjAxOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "9efbc0ef172e1071f1a9a66ee03194f77d602751", "author": {"user": {"login": "GauthamBanasandra", "name": "Gautham B A"}}, "url": "https://github.com/apache/hadoop/commit/9efbc0ef172e1071f1a9a66ee03194f77d602751", "committedDate": "2020-12-05T16:37:25Z", "message": "HDFS-15712. Upgrade googletest to 1.10.0\n\n* Upgrading the googletest library to\n  1.10.0.\n* Removing the older, checked-in gmock\n  from third_party."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5f701bc0e77ec3f20a507153e0ea05a6144b4cd8", "author": {"user": {"login": "GauthamBanasandra", "name": "Gautham B A"}}, "url": "https://github.com/apache/hadoop/commit/5f701bc0e77ec3f20a507153e0ea05a6144b4cd8", "committedDate": "2020-12-06T03:31:41Z", "message": "Add Apache license\n\n* Added Apache license for\n  CMakeLists-gtest.txt.in."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0258e49328e58d05747a55a8a73e00de943c5433", "author": {"user": {"login": "GauthamBanasandra", "name": "Gautham B A"}}, "url": "https://github.com/apache/hadoop/commit/0258e49328e58d05747a55a8a73e00de943c5433", "committedDate": "2020-12-06T03:25:22Z", "message": "Add Apache license\n\n* Added Apache license for\n  CMakeLists-gtest.txt.in."}, "afterCommit": {"oid": "5f701bc0e77ec3f20a507153e0ea05a6144b4cd8", "author": {"user": {"login": "GauthamBanasandra", "name": "Gautham B A"}}, "url": "https://github.com/apache/hadoop/commit/5f701bc0e77ec3f20a507153e0ea05a6144b4cd8", "committedDate": "2020-12-06T03:31:41Z", "message": "Add Apache license\n\n* Added Apache license for\n  CMakeLists-gtest.txt.in."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ1ODc1Njcw", "url": "https://github.com/apache/hadoop/pull/2523#pullrequestreview-545875670", "createdAt": "2020-12-07T07:08:12Z", "commit": {"oid": "5f701bc0e77ec3f20a507153e0ea05a6144b4cd8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QwNzowODoxMlrOIAYq4w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QwNzowODoxMlrOIAYq4w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzI3NTEwNw==", "bodyText": "In Apache Hadoop, the CMake version is >= 3.1. Therefore the code can be removed.\nhttps://issues.apache.org/jira/browse/HADOOP-14670", "url": "https://github.com/apache/hadoop/pull/2523#discussion_r537275107", "createdAt": "2020-12-07T07:08:12Z", "author": {"login": "aajisaka"}, "path": "hadoop-hdfs-project/hadoop-hdfs-native-client/src/main/native/libhdfspp/CMakeLists.txt", "diffHunk": "@@ -51,6 +54,38 @@ find_package(Threads)\n \n include(CheckCXXSourceCompiles)\n \n+# Download and build gtest\n+configure_file(CMakeLists-gtest.txt.in googletest-download/CMakeLists.txt)\n+execute_process(COMMAND ${CMAKE_COMMAND} -G \"${CMAKE_GENERATOR}\" .\n+  RESULT_VARIABLE result\n+  WORKING_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR}/googletest-download)\n+if(result)\n+  message(FATAL_ERROR \"CMake step for googletest failed: ${result}\")\n+endif()\n+execute_process(COMMAND ${CMAKE_COMMAND} --build .\n+  RESULT_VARIABLE result\n+  WORKING_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR}/googletest-download)\n+if(result)\n+  message(FATAL_ERROR \"Build step for googletest failed: ${result}\")\n+endif()\n+\n+# Prevent overriding the parent project's compiler/linker\n+# settings on Windows\n+set(gtest_force_shared_crt ON CACHE BOOL \"\" FORCE)\n+\n+# Add googletest directly to our build. This defines\n+# the gtest and gtest_main targets.\n+add_subdirectory(${CMAKE_CURRENT_BINARY_DIR}/googletest-src\n+                 ${CMAKE_CURRENT_BINARY_DIR}/googletest-build\n+                 EXCLUDE_FROM_ALL)\n+\n+# The gtest/gtest_main targets carry header search path\n+# dependencies automatically when using CMake 2.8.11 or\n+# later. Otherwise we have to add them here ourselves.\n+if (CMAKE_VERSION VERSION_LESS 2.8.11)\n+  include_directories(\"${gtest_SOURCE_DIR}/include\" \"${gmock_SOURCE_DIR}/include\")\n+endif()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5f701bc0e77ec3f20a507153e0ea05a6144b4cd8"}, "originalPosition": 41}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ1ODc1ODk1", "url": "https://github.com/apache/hadoop/pull/2523#pullrequestreview-545875895", "createdAt": "2020-12-07T07:08:42Z", "commit": {"oid": "5f701bc0e77ec3f20a507153e0ea05a6144b4cd8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QwNzowODo0M1rOIAYrlQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QwNzowODo0M1rOIAYrlQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzI3NTI4NQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            cmake_minimum_required(VERSION 2.8.2)\n          \n          \n            \n            cmake_minimum_required(VERSION 3.1 FATAL_ERROR)", "url": "https://github.com/apache/hadoop/pull/2523#discussion_r537275285", "createdAt": "2020-12-07T07:08:43Z", "author": {"login": "aajisaka"}, "path": "hadoop-hdfs-project/hadoop-hdfs-native-client/src/main/native/libhdfspp/CMakeLists-gtest.txt.in", "diffHunk": "@@ -16,6 +19,18 @@\n # limitations under the License.\n #\n \n-set(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} -Wno-missing-field-initializers -Wno-unused-const-variable\")\n-add_library(gmock_main_obj OBJECT gmock-gtest-all.cc gmock_main.cc)\n-add_library(gmock_main $<TARGET_OBJECTS:gmock_main_obj>)\n+cmake_minimum_required(VERSION 2.8.2)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5f701bc0e77ec3f20a507153e0ea05a6144b4cd8"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "99e6e7d261a05de86903022e231c15b2f91eb8da", "author": {"user": {"login": "GauthamBanasandra", "name": "Gautham B A"}}, "url": "https://github.com/apache/hadoop/commit/99e6e7d261a05de86903022e231c15b2f91eb8da", "committedDate": "2020-12-07T07:45:53Z", "message": "Upgrade CMake version for gtest\r\n\r\n* Upgrading the CMake minimum\r\n   required version to 3.1 as that's\r\n   what's Hadoop's using.\n\nCo-authored-by: Akira Ajisaka <aajisaka@apache.org>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ1ODk0MDkw", "url": "https://github.com/apache/hadoop/pull/2523#pullrequestreview-545894090", "createdAt": "2020-12-07T07:46:15Z", "commit": {"oid": "5f701bc0e77ec3f20a507153e0ea05a6144b4cd8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QwNzo0NjoxNVrOIAZtyw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QwNzo0NjoxNVrOIAZtyw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzI5MjIzNQ==", "bodyText": "We don't have to add the header here because the header is already included in ./licenses/LICENSE-gtest.txt and ./licenses-binary/LICENSE-gtest.txt.", "url": "https://github.com/apache/hadoop/pull/2523#discussion_r537292235", "createdAt": "2020-12-07T07:46:15Z", "author": {"login": "aajisaka"}, "path": "hadoop-hdfs-project/hadoop-hdfs-native-client/src/main/native/libhdfspp/CMakeLists-gtest.txt.in", "diffHunk": "@@ -1,3 +1,6 @@\n+# Copyright 2008, Google Inc.\n+# All rights reserved.\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5f701bc0e77ec3f20a507153e0ea05a6144b4cd8"}, "originalPosition": 3}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ1ODk0Mjkw", "url": "https://github.com/apache/hadoop/pull/2523#pullrequestreview-545894290", "createdAt": "2020-12-07T07:46:35Z", "commit": {"oid": "5f701bc0e77ec3f20a507153e0ea05a6144b4cd8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QwNzo0NjozNVrOIAZuhw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QwNzo0NjozNVrOIAZuhw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzI5MjQyMw==", "bodyText": "Can be removed.", "url": "https://github.com/apache/hadoop/pull/2523#discussion_r537292423", "createdAt": "2020-12-07T07:46:35Z", "author": {"login": "aajisaka"}, "path": "hadoop-hdfs-project/hadoop-hdfs-native-client/src/main/native/libhdfspp/CMakeLists.txt", "diffHunk": "@@ -1,3 +1,6 @@\n+# Copyright 2008, Google Inc.\n+# All rights reserved.\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5f701bc0e77ec3f20a507153e0ea05a6144b4cd8"}, "originalPosition": 3}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "73d70b63e12f922e2c42eae76ece9b3823391aee", "author": {"user": {"login": "GauthamBanasandra", "name": "Gautham B A"}}, "url": "https://github.com/apache/hadoop/commit/73d70b63e12f922e2c42eae76ece9b3823391aee", "committedDate": "2020-12-07T07:48:21Z", "message": "Remove redundant license headers\n\n* Removing the redundant headers\n  for license as they've already\n  been attributed in\n  ./licenses/LICENSE-gtest.txt\n  and\n  ./licenses-binary/LICENSE-gtest.txt."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3b45e0a9feca54c8b740b980a2d2d69a831de3f3", "author": {"user": {"login": "GauthamBanasandra", "name": "Gautham B A"}}, "url": "https://github.com/apache/hadoop/commit/3b45e0a9feca54c8b740b980a2d2d69a831de3f3", "committedDate": "2020-12-07T07:51:04Z", "message": "Do not handle CMake 2.8 limitations\n\n* Removing CMake 2.8 related\n  workarounds as Hadoop currently\n  uses CMake 3.1."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ1OTA2MDE4", "url": "https://github.com/apache/hadoop/pull/2523#pullrequestreview-545906018", "createdAt": "2020-12-07T08:06:31Z", "commit": {"oid": "3b45e0a9feca54c8b740b980a2d2d69a831de3f3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3389, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}