{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM4OTQyNTQx", "number": 2545, "title": "HADOOP-17430. Add clear bytes logic for hadoop Text", "bodyText": "https://issues.apache.org/jira/browse/HADOOP-17430", "createdAt": "2020-12-13T12:21:45Z", "url": "https://github.com/apache/hadoop/pull/2545", "merged": true, "mergeCommit": {"oid": "b1abb10ea273b53896afbf766ea16a59138ce6e9"}, "closed": true, "closedAt": "2021-01-05T21:09:42Z", "author": {"login": "dgzdot"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdlwIPwgH2gAyNTM4OTQyNTQxOjU0NDc2NzEzZGRmYzI1ZDFhZmUxMTgwMDFiMjJkOTkxMTMwYThlMTQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdohdw5gH2gAyNTM4OTQyNTQxOmM1ZWUxNzgzZTZkZjI2MzE0OTJjNmY0MmQ5OGExMWVlMzIzMGEyOGQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "54476713ddfc25d1afe118001b22d991130a8e14", "author": {"user": null}, "url": "https://github.com/apache/hadoop/commit/54476713ddfc25d1afe118001b22d991130a8e14", "committedDate": "2020-12-13T12:16:53Z", "message": "HADOOP-17430. Add clear bytes logic for hadoop Text"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "071ecc04f54b3b9ed33f9853b22a2e80f3ab02c3", "author": {"user": null}, "url": "https://github.com/apache/hadoop/commit/071ecc04f54b3b9ed33f9853b22a2e80f3ab02c3", "committedDate": "2020-12-14T03:01:27Z", "message": "HADOOP-17430. Add clear bytes logic for hadoop Text"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fdda75c86c8913f01acf99848efc958a58a38379", "author": {"user": null}, "url": "https://github.com/apache/hadoop/commit/fdda75c86c8913f01acf99848efc958a58a38379", "committedDate": "2020-12-16T05:19:48Z", "message": "HADOOP-17430. Add clear bytes logic for hadoop Text"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU1NDU2MTQ3", "url": "https://github.com/apache/hadoop/pull/2545#pullrequestreview-555456147", "createdAt": "2020-12-18T12:45:59Z", "commit": {"oid": "fdda75c86c8913f01acf99848efc958a58a38379"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQxMjo0NjowMFrOIIhg3w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQxMjo0NzozM1rOIIhj0w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTgwODYwNw==", "bodyText": "nit: can you add spaces either side of the  () ,e.g\nif (utf8.length == 0) {", "url": "https://github.com/apache/hadoop/pull/2545#discussion_r545808607", "createdAt": "2020-12-18T12:46:00Z", "author": {"login": "steveloughran"}, "path": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/io/Text.java", "diffHunk": "@@ -226,6 +226,12 @@ public void set(String string) {\n    * Set to a utf8 byte array.\n    */\n   public void set(byte[] utf8) {\n+    if(utf8.length == 0){", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fdda75c86c8913f01acf99848efc958a58a38379"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTgwOTM2Mw==", "bodyText": "I think I'd prefer to cut the return here and just have an else clause for the normal set() operation.\nThis isn't so long and complex a piece of code that an early return makes sense; it can be easy to miss that it's there when reading the code.", "url": "https://github.com/apache/hadoop/pull/2545#discussion_r545809363", "createdAt": "2020-12-18T12:47:33Z", "author": {"login": "steveloughran"}, "path": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/io/Text.java", "diffHunk": "@@ -226,6 +226,12 @@ public void set(String string) {\n    * Set to a utf8 byte array.\n    */\n   public void set(byte[] utf8) {\n+    if(utf8.length == 0){\n+      bytes = EMPTY_BYTES;\n+      length = 0;\n+      textLength = -1;\n+      return;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fdda75c86c8913f01acf99848efc958a58a38379"}, "originalPosition": 8}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "11ebcf938850f3b601abadaf26a114add915a5d4", "author": {"user": null}, "url": "https://github.com/apache/hadoop/commit/11ebcf938850f3b601abadaf26a114add915a5d4", "committedDate": "2020-12-18T13:17:13Z", "message": "HADOOP-17430. Add clear bytes logic for hadoop Text"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU1NTI0MjY1", "url": "https://github.com/apache/hadoop/pull/2545#pullrequestreview-555524265", "createdAt": "2020-12-18T14:24:04Z", "commit": {"oid": "11ebcf938850f3b601abadaf26a114add915a5d4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU2NDYwNzY5", "url": "https://github.com/apache/hadoop/pull/2545#pullrequestreview-556460769", "createdAt": "2020-12-21T15:26:33Z", "commit": {"oid": "11ebcf938850f3b601abadaf26a114add915a5d4"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMVQxNToyNjozM1rOIJcFPA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMVQxNToyNjozM1rOIJcFPA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Njc2ODE4OA==", "bodyText": "Please update JavaDocs to provide details on behaviors as written here.", "url": "https://github.com/apache/hadoop/pull/2545#discussion_r546768188", "createdAt": "2020-12-21T15:26:33Z", "author": {"login": "belugabehr"}, "path": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/io/Text.java", "diffHunk": "@@ -226,7 +226,13 @@ public void set(String string) {\n    * Set to a utf8 byte array.\n    */", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "11ebcf938850f3b601abadaf26a114add915a5d4"}, "originalPosition": 2}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c5ee1783e6df2631492c6f42d98a11ee3230a28d", "author": {"user": null}, "url": "https://github.com/apache/hadoop/commit/c5ee1783e6df2631492c6f42d98a11ee3230a28d", "committedDate": "2020-12-22T02:53:35Z", "message": "HADOOP-17430. update JavaDocs to provide details on modified function"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3411, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}