{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDczMjc4NDY0", "number": 2245, "title": "HADOOP-17159. Make UGI support forceful relogin from keytab ignoring the last login time (branch-2.10)", "bodyText": "This is the PR for branch-2.10, backporting #2249", "createdAt": "2020-08-25T15:16:10Z", "url": "https://github.com/apache/hadoop/pull/2245", "merged": true, "mergeCommit": {"oid": "e645204733d152c33f9487a77ffe85c9a7d4675e"}, "closed": true, "closedAt": "2020-08-27T22:21:21Z", "author": {"login": "sguggilam"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdCYvtZgH2gAyNDczMjc4NDY0OmE1YzhjNjE2ZWQyMzMyYTJkMjUxMGY1MGNmMWU2NGEzNDdmMWZiYTg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdDGtUGAFqTQ3NzA2OTU5Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "a5c8c616ed2332a2d2510f50cf1e64a347f1fba8", "author": {"user": null}, "url": "https://github.com/apache/hadoop/commit/a5c8c616ed2332a2d2510f50cf1e64a347f1fba8", "committedDate": "2020-08-25T15:14:55Z", "message": "HADOOP-17159 Ability for forceful relogin in UserGroupInformation class"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "23654b10dd8ac71a1bd01c05b60f2b24011aaebe", "author": {"user": null}, "url": "https://github.com/apache/hadoop/commit/23654b10dd8ac71a1bd01c05b60f2b24011aaebe", "committedDate": "2020-08-25T18:36:41Z", "message": "Fix checkstyle warnings"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc2OTYxODI5", "url": "https://github.com/apache/hadoop/pull/2245#pullrequestreview-476961829", "createdAt": "2020-08-27T18:05:29Z", "commit": {"oid": "23654b10dd8ac71a1bd01c05b60f2b24011aaebe"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QxODowNTozMFrOHIbjiA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QxODowNTozMFrOHIbjiA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODYwMjEyMA==", "bodyText": "I'm thinking of the same problem of the same method signature when potential Hadoop 2 code calling reloginFromKeytab(false) upgrades to Hadoop 3. Because of the same method name and a bool parameter, users most likely will not notice the parameter value is for different meanings: in Hadoop 2 here, the bool parameter is for ignoreTimeElapsed where in Hadoop 3 it is actually for checkTGT.\nSo is it better to:\n\nMake this new API public synchronized void reloginFromKeytab(boolean ignoreTimeElapsed) private\nAND we also add the new API as in Hadoop 3: public void forceReloginFromKeytab().\n\nThat way, the application code which forces login will have the same code between Hadoop 2 and 3. And the other new API reloginFromKeytab(boolean) is private in UGI both in Hadoop 2 and 3.", "url": "https://github.com/apache/hadoop/pull/2245#discussion_r478602120", "createdAt": "2020-08-27T18:05:30Z", "author": {"login": "liuml07"}, "path": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/UserGroupInformation.java", "diffHunk": "@@ -1215,23 +1215,43 @@ private void fixKerberosTicketOrder() {\n    * Re-Login a user in from a keytab file. Loads a user identity from a keytab\n    * file and logs them in. They become the currently logged-in user. This\n    * method assumes that {@link #loginUserFromKeytab(String, String)} had\n-   * happened already.\n-   * The Subject field of this UserGroupInformation object is updated to have\n-   * the new credentials.\n+   * happened already. The Subject field of this UserGroupInformation object is\n+   * updated to have the new credentials.\n+   *\n    * @throws IOException\n    * @throws KerberosAuthException on a failure\n    */\n   @InterfaceAudience.Public\n   @InterfaceStability.Evolving\n   public synchronized void reloginFromKeytab() throws IOException {\n+    reloginFromKeytab(false);\n+  }\n+\n+  /**\n+   * Force re-Login a user in from a keytab file. Loads a user identity from a\n+   * keytab file and logs them in. They become the currently logged-in user.\n+   * This method assumes that {@link #loginUserFromKeytab(String, String)} had\n+   * happened already. The Subject field of this UserGroupInformation object is\n+   * updated to have the new credentials.\n+   *\n+   * @param ignoreTimeElapsed Force re-login irrespective of the time of last\n+   *                          login\n+   * @throws IOException\n+   * @throws KerberosAuthException on a failure\n+   */\n+  @InterfaceAudience.Public\n+  @InterfaceStability.Evolving\n+  public synchronized void reloginFromKeytab(boolean ignoreTimeElapsed)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "23654b10dd8ac71a1bd01c05b60f2b24011aaebe"}, "originalPosition": 33}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "40c83137f15e11c3ee394b7794b8e5bd80182cef", "author": {"user": null}, "url": "https://github.com/apache/hadoop/commit/40c83137f15e11c3ee394b7794b8e5bd80182cef", "committedDate": "2020-08-27T19:44:04Z", "message": "Add a new API forceRelogin"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc3MDY5NTk2", "url": "https://github.com/apache/hadoop/pull/2245#pullrequestreview-477069596", "createdAt": "2020-08-27T20:47:56Z", "commit": {"oid": "40c83137f15e11c3ee394b7794b8e5bd80182cef"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3950, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}