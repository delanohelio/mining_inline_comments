{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQzMzM1NjQ1", "number": 2568, "title": "YARN-10541. capture the performance metrics of ZKRMStateStore", "bodyText": "detail\nIn a production env, most yarn resourcemnagers are in ha mode and rely on zookeeper components. It is very necessary to capture the performance metrics of ZKRMStateStore.\nhttps://issues.apache.org/jira/browse/YARN-10541\ntest\nadd TestZKRMStateStore.testMetricsInited", "createdAt": "2020-12-21T08:46:25Z", "url": "https://github.com/apache/hadoop/pull/2568", "merged": true, "mergeCommit": {"oid": "fa4cf91b5750327ed67355c35f1ed0f10bb0100d"}, "closed": true, "closedAt": "2020-12-31T06:20:13Z", "author": {"login": "Neilxzn"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdoRTcnAH2gAyNTQzMzM1NjQ1OmM3MDQ0NDc2NjAzMGY2MzkzNjJmMDlhYmFlNjNiZTYyOTVhMWFiNDY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdrAq6XgFqTU1OTY4NzYzMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c70444766030f639362f09abae63be6295a1ab46", "author": {"user": {"login": "Neilxzn", "name": "Neil"}}, "url": "https://github.com/apache/hadoop/commit/c70444766030f639362f09abae63be6295a1ab46", "committedDate": "2020-12-21T08:03:50Z", "message": "add ZKRMStateStoreOpDurations & add testMetricsInited"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU2NTA3MDYy", "url": "https://github.com/apache/hadoop/pull/2568#pullrequestreview-556507062", "createdAt": "2020-12-21T16:31:35Z", "commit": {"oid": "c70444766030f639362f09abae63be6295a1ab46"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMVQxNjozMTozNVrOIJeUXg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMVQxNjozMTozNVrOIJeUXg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjgwNDgzMA==", "bodyText": "Not familiar with YARN code. The production code looks fine to me. The test code should add more coverage for each of the methods in ZKRMStateStoreOpDurations.", "url": "https://github.com/apache/hadoop/pull/2568#discussion_r546804830", "createdAt": "2020-12-21T16:31:35Z", "author": {"login": "jojochuang"}, "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/test/java/org/apache/hadoop/yarn/server/resourcemanager/recovery/TestZKRMStateStore.java", "diffHunk": "@@ -1567,4 +1568,16 @@ public void testAppSubmissionContextIsPrunedInFinalApplicationState()\n         Collections.emptyMap(), ctx.getApplicationSchedulingPropertiesMap());\n     store.close();\n   }\n+\n+  @Test", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c70444766030f639362f09abae63be6295a1ab46"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "252c94d90d703bb2bc8200584eee8a616f80e9bc", "author": {"user": {"login": "Neilxzn", "name": "Neil"}}, "url": "https://github.com/apache/hadoop/commit/252c94d90d703bb2bc8200584eee8a616f80e9bc", "committedDate": "2020-12-23T11:48:00Z", "message": "add more test in  testMetricsInited\n\nZKRMStateStoreOpDurations.addLoadStateCallDuration\nZKRMStateStoreOpDurations.addStoreApplicationStateCallDuration\nZKRMStateStoreOpDurations.addUpdateApplicationStateCallDuration\nZKRMStateStoreOpDurations.addRemoveApplicationStateCallDuration"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b4907897e7aca8acd2564ed4610ad4867fc3e82b", "author": {"user": {"login": "Neilxzn", "name": "Neil"}}, "url": "https://github.com/apache/hadoop/commit/b4907897e7aca8acd2564ed4610ad4867fc3e82b", "committedDate": "2020-12-24T03:07:55Z", "message": "fix some checkstyle"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU5Njg3NjMx", "url": "https://github.com/apache/hadoop/pull/2568#pullrequestreview-559687631", "createdAt": "2020-12-29T20:22:51Z", "commit": {"oid": "b4907897e7aca8acd2564ed4610ad4867fc3e82b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3240, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}