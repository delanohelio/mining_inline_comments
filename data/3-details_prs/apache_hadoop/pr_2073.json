{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM0MDM2MTQ4", "number": 2073, "title": "HADOOP-16998 WASB : NativeAzureFsOutputStream#close() throwing java.l\u2026", "bodyText": "\u2026ang.IllegalArgumentException instead of IOE which causes HBase RS to get aborted.", "createdAt": "2020-06-13T17:50:40Z", "url": "https://github.com/apache/hadoop/pull/2073", "merged": true, "mergeCommit": {"oid": "380e0f4506a818d6337271ae6d996927f70b601b"}, "closed": true, "closedAt": "2020-07-14T13:07:28Z", "author": {"login": "anoopsjohn"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcq7NH1AH2gAyNDM0MDM2MTQ4OjcxN2M4NzAyYmY3MDkwZjExOWM4MmJlMWIwNDYxYTZkZDhhNzAzODI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc01thVAFqTQ0ODA4NTgwMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "717c8702bf7090f119c82be1b0461a6dd8a70382", "author": {"user": {"login": "anoopsjohn", "name": "Anoop Sam John"}}, "url": "https://github.com/apache/hadoop/commit/717c8702bf7090f119c82be1b0461a6dd8a70382", "committedDate": "2020-06-13T17:49:38Z", "message": "HADOOP-16998 WASB : NativeAzureFsOutputStream#close() throwing java.lang.IllegalArgumentException instead of IOE which causes HBase RS to get aborted."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMxMTk3NjA0", "url": "https://github.com/apache/hadoop/pull/2073#pullrequestreview-431197604", "createdAt": "2020-06-16T06:35:32Z", "commit": {"oid": "717c8702bf7090f119c82be1b0461a6dd8a70382"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMxODQxODcw", "url": "https://github.com/apache/hadoop/pull/2073#pullrequestreview-431841870", "createdAt": "2020-06-16T19:51:46Z", "commit": {"oid": "717c8702bf7090f119c82be1b0461a6dd8a70382"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMyMTgyNzcw", "url": "https://github.com/apache/hadoop/pull/2073#pullrequestreview-432182770", "createdAt": "2020-06-17T08:39:34Z", "commit": {"oid": "717c8702bf7090f119c82be1b0461a6dd8a70382"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMyNDIwOTEx", "url": "https://github.com/apache/hadoop/pull/2073#pullrequestreview-432420911", "createdAt": "2020-06-17T13:49:31Z", "commit": {"oid": "717c8702bf7090f119c82be1b0461a6dd8a70382"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxMzo0OTozMVrOGlGrEg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxMzo1MDozMlrOGlGt8A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTU1OTgyNg==", "bodyText": "put in an import block just above the org.apache one. I know a lot of classes don't do that -but that is because the move from o.a.commons.logging to SLF4J was done with 'sed'", "url": "https://github.com/apache/hadoop/pull/2073#discussion_r441559826", "createdAt": "2020-06-17T13:49:31Z", "author": {"login": "steveloughran"}, "path": "hadoop-tools/hadoop-azure/src/main/java/org/apache/hadoop/fs/azure/SyncableDataOutputStream.java", "diffHunk": "@@ -24,6 +24,8 @@\n \n import org.apache.hadoop.fs.StreamCapabilities;\n import org.apache.hadoop.fs.Syncable;\n+import org.slf4j.Logger;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "717c8702bf7090f119c82be1b0461a6dd8a70382"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTU2MDM2MA==", "bodyText": "at bottom of imports, please", "url": "https://github.com/apache/hadoop/pull/2073#discussion_r441560360", "createdAt": "2020-06-17T13:50:13Z", "author": {"login": "steveloughran"}, "path": "hadoop-tools/hadoop-azure/src/test/java/org/apache/hadoop/fs/azure/TestSyncableDataOutputStream.java", "diffHunk": "@@ -0,0 +1,66 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.hadoop.fs.azure;\n+\n+import static org.junit.Assert.fail;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "717c8702bf7090f119c82be1b0461a6dd8a70382"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTU2MDU2MA==", "bodyText": "use LambdaTestUtils.intercept", "url": "https://github.com/apache/hadoop/pull/2073#discussion_r441560560", "createdAt": "2020-06-17T13:50:32Z", "author": {"login": "steveloughran"}, "path": "hadoop-tools/hadoop-azure/src/test/java/org/apache/hadoop/fs/azure/TestSyncableDataOutputStream.java", "diffHunk": "@@ -0,0 +1,66 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.hadoop.fs.azure;\n+\n+import static org.junit.Assert.fail;\n+\n+import java.io.IOException;\n+import java.io.OutputStream;\n+\n+import org.junit.Test;\n+\n+public class TestSyncableDataOutputStream {\n+\n+  @Test\n+  public void testCloseWhenFlushThrowingIOException() throws Exception {\n+    MockOutputStream out = new MockOutputStream();\n+    SyncableDataOutputStream sdos = new SyncableDataOutputStream(out);\n+    out.flushThrowIOE = true;\n+    try {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "717c8702bf7090f119c82be1b0461a6dd8a70382"}, "originalPosition": 34}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b0218799109f8a1ed6b1577e6b26b2896206fca3", "author": {"user": {"login": "anoopsjohn", "name": "Anoop Sam John"}}, "url": "https://github.com/apache/hadoop/commit/b0218799109f8a1ed6b1577e6b26b2896206fca3", "committedDate": "2020-06-21T05:40:47Z", "message": "HADOOP-16998 WASB : NativeAzureFsOutputStream#close() throwing java.lang.IllegalArgumentException instead of IOE which causes HBase RS to get aborted."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "570eca11f1e907be186364247a7bcee6ab7ed46f", "author": {"user": {"login": "anoopsjohn", "name": "Anoop Sam John"}}, "url": "https://github.com/apache/hadoop/commit/570eca11f1e907be186364247a7bcee6ab7ed46f", "committedDate": "2020-06-21T12:18:50Z", "message": "HADOOP-16998 WASB : NativeAzureFsOutputStream#close() throwing java.lang.IllegalArgumentException instead of IOE which causes HBase RS to get aborted."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM0ODk5MDU1", "url": "https://github.com/apache/hadoop/pull/2073#pullrequestreview-434899055", "createdAt": "2020-06-22T13:01:27Z", "commit": {"oid": "717c8702bf7090f119c82be1b0461a6dd8a70382"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQxMzowMToyOFrOGm_lUA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQxMzowMjo0MlrOGm_oJw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzU0MDgxNg==", "bodyText": "sorry, i meant \"org.slf4j to go into a block above the org.apache one\", below the java. one...its where we like  keep the non-apache, non-static imports", "url": "https://github.com/apache/hadoop/pull/2073#discussion_r443540816", "createdAt": "2020-06-22T13:01:28Z", "author": {"login": "steveloughran"}, "path": "hadoop-tools/hadoop-azure/src/main/java/org/apache/hadoop/fs/azure/SyncableDataOutputStream.java", "diffHunk": "@@ -24,6 +24,8 @@\n \n import org.apache.hadoop.fs.StreamCapabilities;\n import org.apache.hadoop.fs.Syncable;\n+import org.slf4j.Logger;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTU1OTgyNg=="}, "originalCommit": {"oid": "717c8702bf7090f119c82be1b0461a6dd8a70382"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzU0MTU0Mw==", "bodyText": "again, org.junit to a (new) \"non org.apache imports' block", "url": "https://github.com/apache/hadoop/pull/2073#discussion_r443541543", "createdAt": "2020-06-22T13:02:42Z", "author": {"login": "steveloughran"}, "path": "hadoop-tools/hadoop-azure/src/test/java/org/apache/hadoop/fs/azure/TestSyncableDataOutputStream.java", "diffHunk": "@@ -0,0 +1,67 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.hadoop.fs.azure;\n+\n+import java.io.IOException;\n+import java.io.OutputStream;\n+\n+import org.apache.hadoop.test.LambdaTestUtils;\n+import org.junit.Test;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "570eca11f1e907be186364247a7bcee6ab7ed46f"}, "originalPosition": 24}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fa29d02edcfb4db83956294825474ab5ae1d7aa8", "author": {"user": {"login": "anoopsjohn", "name": "Anoop Sam John"}}, "url": "https://github.com/apache/hadoop/commit/fa29d02edcfb4db83956294825474ab5ae1d7aa8", "committedDate": "2020-06-22T15:51:19Z", "message": "HADOOP-16998 WASB : NativeAzureFsOutputStream#close() throwing java.lang.IllegalArgumentException instead of IOE which causes HBase RS to get aborted."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM1NzgzNTUx", "url": "https://github.com/apache/hadoop/pull/2073#pullrequestreview-435783551", "createdAt": "2020-06-23T13:30:48Z", "commit": {"oid": "fa29d02edcfb4db83956294825474ab5ae1d7aa8"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QxMzozMDo0OFrOGnpVsQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QxMzozMDo0OFrOGnpVsQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDIyNDk0NQ==", "bodyText": "we are getting so close here. Now move this up to L28.", "url": "https://github.com/apache/hadoop/pull/2073#discussion_r444224945", "createdAt": "2020-06-23T13:30:48Z", "author": {"login": "steveloughran"}, "path": "hadoop-tools/hadoop-azure/src/main/java/org/apache/hadoop/fs/azure/SyncableDataOutputStream.java", "diffHunk": "@@ -22,12 +22,13 @@\n import java.io.IOException;\n import java.io.OutputStream;\n \n-import org.apache.hadoop.classification.InterfaceAudience;\n-import org.apache.hadoop.fs.StreamCapabilities;\n-import org.apache.hadoop.fs.Syncable;\n import org.slf4j.Logger;\n import org.slf4j.LoggerFactory;\n \n+import org.apache.hadoop.fs.StreamCapabilities;\n+import org.apache.hadoop.fs.Syncable;\n+import org.apache.hadoop.classification.InterfaceAudience;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fa29d02edcfb4db83956294825474ab5ae1d7aa8"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM4MzI1ODEy", "url": "https://github.com/apache/hadoop/pull/2073#pullrequestreview-438325812", "createdAt": "2020-06-26T14:07:21Z", "commit": {"oid": "fa29d02edcfb4db83956294825474ab5ae1d7aa8"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d72aa7e3e51b656c372c77476551c33ac72c83d3", "author": {"user": {"login": "anoopsjohn", "name": "Anoop Sam John"}}, "url": "https://github.com/apache/hadoop/commit/d72aa7e3e51b656c372c77476551c33ac72c83d3", "committedDate": "2020-07-07T05:20:27Z", "message": "HADOOP-16998 WASB : NativeAzureFsOutputStream#close() throwing java.lang.IllegalArgumentException instead of IOE which causes HBase RS to get aborted."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e0a8551a17dd552b46230a128bcd84eae6b00f7f", "author": {"user": {"login": "steveloughran", "name": "Steve Loughran"}}, "url": "https://github.com/apache/hadoop/commit/e0a8551a17dd552b46230a128bcd84eae6b00f7f", "committedDate": "2020-07-14T13:04:32Z", "message": "Update TestSyncableDataOutputStream.java\n\nswapped the final two import blocks"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ4MDg1ODAx", "url": "https://github.com/apache/hadoop/pull/2073#pullrequestreview-448085801", "createdAt": "2020-07-14T13:04:50Z", "commit": {"oid": "e0a8551a17dd552b46230a128bcd84eae6b00f7f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4019, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}