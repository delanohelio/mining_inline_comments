{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI3MDc0NjQ4", "number": 2490, "title": "YARN-10499. TestRouterWebServiceREST fails (#2490). Contributed by Akira Ajisaka", "bodyText": "JIRA: https://issues.apache.org/jira/browse/YARN-10499\nIn the test, the groupSet is empty and it.next() throws NoSuchElementException.\nIf the groupSet is empty, skip checking the set.", "createdAt": "2020-11-25T04:06:23Z", "url": "https://github.com/apache/hadoop/pull/2490", "merged": true, "mergeCommit": {"oid": "df7f1e5199eed917ff40618708e7641238684d24"}, "closed": true, "closedAt": "2020-12-16T16:26:15Z", "author": {"login": "aajisaka"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdf2BttAH2gAyNTI3MDc0NjQ4OjMyM2YyNjUxODdiZDI5MGQ5OGM5MmQ3NTMwNzY0NjBlZDQ2OGJjNDQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdh14d_gH2gAyNTI3MDc0NjQ4OjcwYmQyMDc5MDQwMjUxZjM3Y2QyMDg0NzgxY2E4ODkzNjY5NWJiNmM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "323f265187bd290d98c92d753076460ed468bc44", "author": {"user": {"login": "aajisaka", "name": "Akira Ajisaka"}}, "url": "https://github.com/apache/hadoop/commit/323f265187bd290d98c92d753076460ed468bc44", "committedDate": "2020-11-25T03:45:38Z", "message": "YARN-10499. TestRouterWebServicesREST fails."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3713be58061928484a8b679610a012d3ff23af0f", "author": {"user": {"login": "aajisaka", "name": "Akira Ajisaka"}}, "url": "https://github.com/apache/hadoop/commit/3713be58061928484a8b679610a012d3ff23af0f", "committedDate": "2020-11-25T04:02:48Z", "message": "Touch the test source to run the test in the precommit job"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bbe845fcfa99ba420d5c17536a6b2ad207fa69b4", "author": {"user": {"login": "aajisaka", "name": "Akira Ajisaka"}}, "url": "https://github.com/apache/hadoop/commit/bbe845fcfa99ba420d5c17536a6b2ad207fa69b4", "committedDate": "2020-11-30T04:39:59Z", "message": "Revert \"Touch the test source to run the test in the precommit job\"\n\nThis reverts commit 3713be58061928484a8b679610a012d3ff23af0f."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQwOTUxODAw", "url": "https://github.com/apache/hadoop/pull/2490#pullrequestreview-540951800", "createdAt": "2020-11-30T14:21:08Z", "commit": {"oid": "323f265187bd290d98c92d753076460ed468bc44"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0zMFQxNDoyMTowOFrOH79PHg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0zMFQxNDoyMTowOFrOH79PHg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjYzMTMyNg==", "bodyText": "Just to be sure the variable context is as consistent as possible, please add a\nvctx.putExtraDataset(\"groups\", groupsSet);\nbefore the return, empty set is a valid groups, at least it can be used by the matchers, not that it will ever match, but it's perhaps better than leaving it blank.\nAs for primary and secondary groups there is not much we can do.", "url": "https://github.com/apache/hadoop/pull/2490#discussion_r532631326", "createdAt": "2020-11-30T14:21:08Z", "author": {"login": "shuzirra"}, "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/placement/CSMappingPlacementRule.java", "diffHunk": "@@ -181,6 +181,10 @@ private void setupGroupsForVariableContext(VariableContext vctx, String user)\n       return;\n     }\n     Set<String> groupsSet = groups.getGroupsSet(user);\n+    if (groupsSet.isEmpty()) {\n+      LOG.warn(\"There are no groups for user {}\", user);\n+      return;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "323f265187bd290d98c92d753076460ed468bc44"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "70bd2079040251f37cd2084781ca88936695bb6c", "author": {"user": {"login": "aajisaka", "name": "Akira Ajisaka"}}, "url": "https://github.com/apache/hadoop/commit/70bd2079040251f37cd2084781ca88936695bb6c", "committedDate": "2020-12-01T08:43:23Z", "message": "Make sure the variable context to be consitent by adding an extra dataset"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3326, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}