{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ3NTY4NTk5", "number": 2132, "title": "HDFS-15464: ViewFsOverloadScheme should work when -fs option pointing to remote cluster without mount links", "bodyText": "https://issues.apache.org/jira/browse/HDFS-15464", "createdAt": "2020-07-10T17:56:30Z", "url": "https://github.com/apache/hadoop/pull/2132", "merged": true, "mergeCommit": {"oid": "3e700066394fb9f516e23537d8abb4661409cae1"}, "closed": true, "closedAt": "2020-07-12T06:50:05Z", "author": {"login": "umamaheswararao"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABczndV5AH2gAyNDQ3NTY4NTk5OmNlMmI3M2Q2MTcwYzVkNzZkZWIyZTM5YzUxMGIzOGFmZDdiZjgyMzQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc0GxzDAH2gAyNDQ3NTY4NTk5OjQ5ZWNiYjNhYTYxMTVhMGE4MmJjNTZlZDBlNjVmYjI3NGE5NjFjNTE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "ce2b73d6170c5d76deb2e39c510b38afd7bf8234", "author": {"user": {"login": "umamaheswararao", "name": "Uma Maheswara Rao G"}}, "url": "https://github.com/apache/hadoop/commit/ce2b73d6170c5d76deb2e39c510b38afd7bf8234", "committedDate": "2020-07-10T17:54:34Z", "message": "HDFS-15464: ViewFsOverloadScheme should work when -fs option pointing to remote cluster without mount links"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1e1dfd6142dcf265345c270bd1bf181003a36137", "author": {"user": {"login": "umamaheswararao", "name": "Uma Maheswara Rao G"}}, "url": "https://github.com/apache/hadoop/commit/1e1dfd6142dcf265345c270bd1bf181003a36137", "committedDate": "2020-07-11T00:34:52Z", "message": "Fixed test failures."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "38860cfe85a8a178d5ff86c0c119b54e6ac33de0", "author": {"user": {"login": "umamaheswararao", "name": "Uma Maheswara Rao G"}}, "url": "https://github.com/apache/hadoop/commit/38860cfe85a8a178d5ff86c0c119b54e6ac33de0", "committedDate": "2020-07-11T21:52:34Z", "message": "Moved test to TestViewFsOverloadSchemeListStatus.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c76ae4d0f6dec615300f113401e4fd3533960031", "author": {"user": {"login": "umamaheswararao", "name": "Uma Maheswara Rao G"}}, "url": "https://github.com/apache/hadoop/commit/c76ae4d0f6dec615300f113401e4fd3533960031", "committedDate": "2020-07-11T22:16:09Z", "message": "Added a log mesage in the case where no mount links detected."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ2ODQ0ODA5", "url": "https://github.com/apache/hadoop/pull/2132#pullrequestreview-446844809", "createdAt": "2020-07-12T04:21:41Z", "commit": {"oid": "c76ae4d0f6dec615300f113401e4fd3533960031"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMlQwNDoyMTo0MlrOGwRHEg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMlQwNDoyMTo0MlrOGwRHEg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzI2NTE3MA==", "bodyText": "nit:\nthere is a static import for assert.* above, you can avoid having Assert.", "url": "https://github.com/apache/hadoop/pull/2132#discussion_r453265170", "createdAt": "2020-07-12T04:21:42Z", "author": {"login": "ayushtkn"}, "path": "hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/fs/viewfs/TestViewFsOverloadSchemeListStatus.java", "diffHunk": "@@ -124,6 +126,24 @@ public void testListStatusACL() throws IOException, URISyntaxException {\n     }\n   }\n \n+  /**\n+   * Tests that ViewFSOverloadScheme should consider initialized fs as fallback\n+   * if there are no mount links configured.\n+   */\n+  @Test(timeout = 30000)\n+  public void testViewFSOverloadSchemeWithoutAnyMountLinks() throws Exception {\n+    try (FileSystem fs = FileSystem.get(TEST_DIR.toPath().toUri(), conf)) {\n+      ViewFileSystemOverloadScheme vfs = (ViewFileSystemOverloadScheme) fs;\n+      Assert.assertEquals(0, vfs.getMountPoints().length);\n+      Path testFallBack = new Path(\"test\", FILE_NAME);\n+      Assert.assertTrue(vfs.mkdirs(testFallBack));\n+      FileStatus[] status = vfs.listStatus(testFallBack.getParent());\n+      Assert.assertEquals(FILE_NAME, status[0].getPath().getName());\n+      Assert.assertEquals(testFallBack.getName(),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c76ae4d0f6dec615300f113401e4fd3533960031"}, "originalPosition": 80}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "49ecbb3aa6115a0a82bc56ed0e65fb274a961c51", "author": {"user": {"login": "umamaheswararao", "name": "Uma Maheswara Rao G"}}, "url": "https://github.com/apache/hadoop/commit/49ecbb3aa6115a0a82bc56ed0e65fb274a961c51", "committedDate": "2020-07-12T06:23:58Z", "message": "Nit change: Just removed Assert. and removed import"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4127, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}