{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM4MDU0Njc5", "number": 2089, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QxODowNzozNVrOELTskQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QxODowNzozNVrOELTskQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgwMjkyNDk3OnYy", "diffSide": "RIGHT", "path": "hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/metrics2/impl/TestMetricsSystemImpl.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QxODowNzozNVrOGs17Qw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNFQwNzozNjoxOVrOGs6hIg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTY3NDA1MQ==", "bodyText": "we're generally still 80 chars wide, I'm afraid...put the actual probe on a new line.\nnice to see some text for the assertion tnough -appreciated", "url": "https://github.com/apache/hadoop/pull/2089#discussion_r449674051", "createdAt": "2020-07-03T18:07:35Z", "author": {"login": "steveloughran"}, "path": "hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/metrics2/impl/TestMetricsSystemImpl.java", "diffHunk": "@@ -639,4 +639,23 @@ public Boolean get() {\n   private static String getPluginUrlsAsString() {\n     return \"file:metrics2-test-plugin.jar\";\n   }\n+\n+  @Test\n+  public void testMetricSystemRestart() {\n+    MetricsSystemImpl ms = new MetricsSystemImpl(\"msRestartTestSystem\");\n+    TestSink ts = new TestSink();\n+    String sinkName = \"restartTestSink\";\n+\n+    try {\n+      ms.start();\n+      ms.register(sinkName, \"\", ts);\n+      assertNotNull(\"an adapter should exist for each sink\", ms.getSinkAdapter(sinkName));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "572df34eccb834daf8acd71fb352df9289380392"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTc0OTI4Mg==", "bodyText": "Fixed it, please review (added more info to the message)", "url": "https://github.com/apache/hadoop/pull/2089#discussion_r449749282", "createdAt": "2020-07-04T07:36:19Z", "author": {"login": "mmpataki"}, "path": "hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/metrics2/impl/TestMetricsSystemImpl.java", "diffHunk": "@@ -639,4 +639,23 @@ public Boolean get() {\n   private static String getPluginUrlsAsString() {\n     return \"file:metrics2-test-plugin.jar\";\n   }\n+\n+  @Test\n+  public void testMetricSystemRestart() {\n+    MetricsSystemImpl ms = new MetricsSystemImpl(\"msRestartTestSystem\");\n+    TestSink ts = new TestSink();\n+    String sinkName = \"restartTestSink\";\n+\n+    try {\n+      ms.start();\n+      ms.register(sinkName, \"\", ts);\n+      assertNotNull(\"an adapter should exist for each sink\", ms.getSinkAdapter(sinkName));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTY3NDA1MQ=="}, "originalCommit": {"oid": "572df34eccb834daf8acd71fb352df9289380392"}, "originalPosition": 14}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3456, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}