{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYwOTI3MzEz", "number": 1801, "title": "HADOOP-16797. Add Dockerfile for ARM builds", "bodyText": "What does this change do?\nAdded a Dockerfile, which will be used by scripts during build and test in aarch64 platform.\nFollowing are the differences between x86 and aarch64 Dockerfile\n\n\nCMake 3.1.0 compilation from source as no binary package readily available for aarch64\nSkips installation of ghc package which does not have any package for aarch64 from repo.\nSkips installation of hadolint as no package is available for aarch64\nx86_64 specific packages were replaced with aarch64 specific packages.\nphantomjs is being installed from prebuilt package and made available in the system path to avoid failure during maven build.\n\nAdditional changes\n\nUpdated the dev-support/bin/createrelease and start-build-env.sh script to load platform specific docker files.\nUpdated dev-support/bin/createrelease to make use of gpg-agent for signing artifacts.\n\nTesting ?\n\nYes, Tested well!!\nVerified creation of release package using dev-support/bin/createrelease itself in aarch64 platform.", "createdAt": "2020-01-09T12:08:59Z", "url": "https://github.com/apache/hadoop/pull/1801", "merged": true, "mergeCommit": {"oid": "52b360a92865d2c7cbd113a82b45c6b5a191ce24"}, "closed": true, "closedAt": "2020-01-13T05:10:30Z", "author": {"login": "vinayakumarb"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb4n0B8gH2gAyMzYwOTI3MzEzOjk5NDY2MWNmNmIwOTlkY2QzNjdlNTU2OWE4Yzg0YTNiMDE3YzlhMmQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb5BhsNgFqTM0MTI5NDE4OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "994661cf6b099dcd367e5569a8c84a3b017c9a2d", "author": {"user": {"login": "vinayakumarb", "name": "Vinayakumar B"}}, "url": "https://github.com/apache/hadoop/commit/994661cf6b099dcd367e5569a8c84a3b017c9a2d", "committedDate": "2020-01-09T10:57:49Z", "message": "HADOOP-16797. Add Dockerfile for ARM builds"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQwNjc0Njk1", "url": "https://github.com/apache/hadoop/pull/1801#pullrequestreview-340674695", "createdAt": "2020-01-09T17:01:30Z", "commit": {"oid": "994661cf6b099dcd367e5569a8c84a3b017c9a2d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOVQxNzowMTozMFrOFb9A8g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOVQxNzowMTozMFrOFb9A8g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDg1NTUzOA==", "bodyText": "Does the X86 one works for ARM too?", "url": "https://github.com/apache/hadoop/pull/1801#discussion_r364855538", "createdAt": "2020-01-09T17:01:30Z", "author": {"login": "ayushtkn"}, "path": "dev-support/docker/Dockerfile_aarch64", "diffHunk": "@@ -0,0 +1,244 @@\n+# Licensed to the Apache Software Foundation (ASF) under one\n+# or more contributor license agreements.  See the NOTICE file\n+# distributed with this work for additional information\n+# regarding copyright ownership.  The ASF licenses this file\n+# to you under the Apache License, Version 2.0 (the\n+# \"License\"); you may not use this file except in compliance\n+# with the License.  You may obtain a copy of the License at\n+#\n+#     http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+\n+# Dockerfile for installing the necessary dependencies for building Hadoop.\n+# See BUILDING.txt.\n+\n+FROM ubuntu:xenial\n+\n+WORKDIR /root\n+\n+SHELL [\"/bin/bash\", \"-o\", \"pipefail\", \"-c\"]\n+\n+#####\n+# Disable suggests/recommends\n+#####\n+RUN echo APT::Install-Recommends \"0\"\\; > /etc/apt/apt.conf.d/10disableextras\n+RUN echo APT::Install-Suggests \"0\"\\; >>  /etc/apt/apt.conf.d/10disableextras\n+\n+ENV DEBIAN_FRONTEND noninteractive\n+ENV DEBCONF_TERSE true\n+\n+######\n+# Install common dependencies from packages. Versions here are either\n+# sufficient or irrelevant.\n+#\n+# WARNING: DO NOT PUT JAVA APPS HERE! Otherwise they will install default\n+# Ubuntu Java.  See Java section below!\n+######\n+# hadolint ignore=DL3008\n+RUN apt-get -q update \\\n+    && apt-get -q install -y --no-install-recommends \\\n+        apt-utils \\\n+        build-essential \\\n+        bzip2 \\\n+        clang \\\n+        curl \\\n+        doxygen \\\n+        fuse \\\n+        g++ \\\n+        gcc \\\n+        git \\\n+        gnupg-agent \\\n+        libbz2-dev \\\n+        libcurl4-openssl-dev \\\n+        libfuse-dev \\\n+        libprotobuf-dev \\\n+        libprotoc-dev \\\n+        libsasl2-dev \\\n+        libsnappy-dev \\\n+        libssl-dev \\\n+        libtool \\\n+        libzstd1-dev \\\n+        locales \\\n+        make \\\n+        pinentry-curses \\\n+        pkg-config \\\n+        python \\\n+        python2.7 \\\n+        python-pip \\\n+        python-pkg-resources \\\n+        python-setuptools \\\n+        python-wheel \\\n+        rsync \\\n+        software-properties-common \\\n+        snappy \\\n+        sudo \\\n+        valgrind \\\n+        zlib1g-dev \\\n+    && apt-get clean \\\n+    && rm -rf /var/lib/apt/lists/*\n+\n+\n+#######\n+# OpenJDK 8\n+#######\n+# hadolint ignore=DL3008\n+RUN apt-get -q update \\\n+    && apt-get -q install -y --no-install-recommends openjdk-8-jdk libbcprov-java \\\n+    && apt-get clean \\\n+    && rm -rf /var/lib/apt/lists/*\n+\n+\n+######\n+# Install cmake 3.1.0 (3.5.1 ships with Xenial)\n+# There is no cmake binary available for aarch64. Build from source.\n+######\n+RUN mkdir -p /opt/cmake/src \\\n+    && curl -L -s -S \\\n+      https://cmake.org/files/v3.1/cmake-3.1.0-1-src.tar.bz2 \\\n+      -o /opt/cmake/cmake-src.tar.bz2 \\\n+    && tar xvjf /opt/cmake/cmake-src.tar.bz2 -C /opt/cmake/src \\\n+    && cd /opt/cmake/src \\\n+    && tar xvjf cmake-3.1.0.tar.bz2 \\\n+    && cd cmake-3.1.0 && patch -p0 -i ../cmake-3.1.0-1.patch && mkdir .build && cd .build \\\n+    && ../bootstrap --parallel=2 \\\n+    && make -j2 && ./bin/cpack \\\n+    && tar xzf cmake-3.1.0-Linux-aarch64.tar.gz --strip-components 1 -C /opt/cmake \\\n+    && cd /opt/cmake && rm -rf /opt/cmake/src\n+ENV CMAKE_HOME /opt/cmake\n+ENV PATH \"${PATH}:/opt/cmake/bin\"\n+\n+######\n+# Install Google Protobuf 3.7.1 (2.6.0 ships with Xenial)\n+######\n+# hadolint ignore=DL3003\n+RUN mkdir -p /opt/protobuf-src \\\n+    && curl -L -s -S \\\n+      https://github.com/protocolbuffers/protobuf/releases/download/v3.7.1/protobuf-java-3.7.1.tar.gz \\\n+      -o /opt/protobuf.tar.gz \\\n+    && tar xzf /opt/protobuf.tar.gz --strip-components 1 -C /opt/protobuf-src \\\n+    && cd /opt/protobuf-src \\\n+    && ./configure --prefix=/opt/protobuf \\\n+    && make install \\\n+    && cd /root \\\n+    && rm -rf /opt/protobuf-src\n+ENV PROTOBUF_HOME /opt/protobuf\n+ENV PATH \"${PATH}:/opt/protobuf/bin\"\n+\n+######\n+# Install Apache Maven 3.3.9 (3.3.9 ships with Xenial)\n+######\n+# hadolint ignore=DL3008\n+RUN apt-get -q update \\\n+    && apt-get -q install -y --no-install-recommends maven \\\n+    && apt-get clean \\\n+    && rm -rf /var/lib/apt/lists/*\n+ENV MAVEN_HOME /usr\n+\n+######\n+# Install findbugs 3.0.1 (3.0.1 ships with Xenial)\n+# Ant is needed for findbugs\n+######\n+# hadolint ignore=DL3008\n+RUN apt-get -q update \\\n+    && apt-get -q install -y --no-install-recommends findbugs ant \\\n+    && apt-get clean \\\n+    && rm -rf /var/lib/apt/lists/*\n+ENV FINDBUGS_HOME /usr\n+\n+####\n+# Install shellcheck (0.4.6, the latest as of 2017-09-26)\n+####\n+# hadolint ignore=DL3008\n+RUN add-apt-repository -y ppa:hvr/ghc \\\n+    && apt-get -q update \\\n+    && apt-get -q install -y --no-install-recommends shellcheck \\\n+    && apt-get clean \\\n+    && rm -rf /var/lib/apt/lists/*\n+\n+####\n+# Install bats (0.4.0, the latest as of 2017-09-26, ships with Xenial)\n+####\n+# hadolint ignore=DL3008\n+RUN apt-get -q update \\\n+    && apt-get -q install -y --no-install-recommends bats \\\n+    && apt-get clean \\\n+    && rm -rf /var/lib/apt/lists/*\n+\n+####\n+# Install pylint at fixed version (2.0.0 removed python2 support)\n+# https://github.com/PyCQA/pylint/issues/2294\n+####\n+RUN pip2 install pylint==1.9.2\n+\n+####\n+# Install dateutil.parser\n+####\n+RUN pip2 install python-dateutil==2.7.3\n+\n+###\n+# Install node.js 8.17.0 for web UI framework (4.2.6 ships with Xenial)\n+###\n+RUN curl -L -s -S https://deb.nodesource.com/setup_8.x | bash - \\\n+    && apt-get install -y --no-install-recommends nodejs=8.17.0-1nodesource1 \\\n+    && apt-get clean \\\n+    && rm -rf /var/lib/apt/lists/* \\\n+    && npm install -g bower@1.8.8\n+\n+###\n+## Install Yarn 1.12.1 for web UI framework\n+####\n+RUN curl -s -S https://dl.yarnpkg.com/debian/pubkey.gpg | apt-key add - \\\n+    && echo 'deb https://dl.yarnpkg.com/debian/ stable main' > /etc/apt/sources.list.d/yarn.list \\\n+    && apt-get -q update \\\n+    && apt-get install -y --no-install-recommends yarn=1.21.1-1 \\\n+    && apt-get clean \\\n+    && rm -rf /var/lib/apt/lists/*\n+\n+###\n+# Install hadolint\n+####\n+#RUN curl -L -s -S \\\n+#        https://github.com/hadolint/hadolint/releases/download/v1.11.1/hadolint-Linux-x86_64 \\", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "994661cf6b099dcd367e5569a8c84a3b017c9a2d"}, "originalPosition": 206}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQwNjgzMjg1", "url": "https://github.com/apache/hadoop/pull/1801#pullrequestreview-340683285", "createdAt": "2020-01-09T17:15:13Z", "commit": {"oid": "994661cf6b099dcd367e5569a8c84a3b017c9a2d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOVQxNzoxNToxM1rOFb9asg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOVQxNzoxNToxM1rOFb9asg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDg2MjEzMA==", "bodyText": "Need not to mention ozone here.", "url": "https://github.com/apache/hadoop/pull/1801#discussion_r364862130", "createdAt": "2020-01-09T17:15:13Z", "author": {"login": "ayushtkn"}, "path": "dev-support/docker/Dockerfile_aarch64", "diffHunk": "@@ -0,0 +1,244 @@\n+# Licensed to the Apache Software Foundation (ASF) under one\n+# or more contributor license agreements.  See the NOTICE file\n+# distributed with this work for additional information\n+# regarding copyright ownership.  The ASF licenses this file\n+# to you under the Apache License, Version 2.0 (the\n+# \"License\"); you may not use this file except in compliance\n+# with the License.  You may obtain a copy of the License at\n+#\n+#     http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+\n+# Dockerfile for installing the necessary dependencies for building Hadoop.\n+# See BUILDING.txt.\n+\n+FROM ubuntu:xenial\n+\n+WORKDIR /root\n+\n+SHELL [\"/bin/bash\", \"-o\", \"pipefail\", \"-c\"]\n+\n+#####\n+# Disable suggests/recommends\n+#####\n+RUN echo APT::Install-Recommends \"0\"\\; > /etc/apt/apt.conf.d/10disableextras\n+RUN echo APT::Install-Suggests \"0\"\\; >>  /etc/apt/apt.conf.d/10disableextras\n+\n+ENV DEBIAN_FRONTEND noninteractive\n+ENV DEBCONF_TERSE true\n+\n+######\n+# Install common dependencies from packages. Versions here are either\n+# sufficient or irrelevant.\n+#\n+# WARNING: DO NOT PUT JAVA APPS HERE! Otherwise they will install default\n+# Ubuntu Java.  See Java section below!\n+######\n+# hadolint ignore=DL3008\n+RUN apt-get -q update \\\n+    && apt-get -q install -y --no-install-recommends \\\n+        apt-utils \\\n+        build-essential \\\n+        bzip2 \\\n+        clang \\\n+        curl \\\n+        doxygen \\\n+        fuse \\\n+        g++ \\\n+        gcc \\\n+        git \\\n+        gnupg-agent \\\n+        libbz2-dev \\\n+        libcurl4-openssl-dev \\\n+        libfuse-dev \\\n+        libprotobuf-dev \\\n+        libprotoc-dev \\\n+        libsasl2-dev \\\n+        libsnappy-dev \\\n+        libssl-dev \\\n+        libtool \\\n+        libzstd1-dev \\\n+        locales \\\n+        make \\\n+        pinentry-curses \\\n+        pkg-config \\\n+        python \\\n+        python2.7 \\\n+        python-pip \\\n+        python-pkg-resources \\\n+        python-setuptools \\\n+        python-wheel \\\n+        rsync \\\n+        software-properties-common \\\n+        snappy \\\n+        sudo \\\n+        valgrind \\\n+        zlib1g-dev \\\n+    && apt-get clean \\\n+    && rm -rf /var/lib/apt/lists/*\n+\n+\n+#######\n+# OpenJDK 8\n+#######\n+# hadolint ignore=DL3008\n+RUN apt-get -q update \\\n+    && apt-get -q install -y --no-install-recommends openjdk-8-jdk libbcprov-java \\\n+    && apt-get clean \\\n+    && rm -rf /var/lib/apt/lists/*\n+\n+\n+######\n+# Install cmake 3.1.0 (3.5.1 ships with Xenial)\n+# There is no cmake binary available for aarch64. Build from source.\n+######\n+RUN mkdir -p /opt/cmake/src \\\n+    && curl -L -s -S \\\n+      https://cmake.org/files/v3.1/cmake-3.1.0-1-src.tar.bz2 \\\n+      -o /opt/cmake/cmake-src.tar.bz2 \\\n+    && tar xvjf /opt/cmake/cmake-src.tar.bz2 -C /opt/cmake/src \\\n+    && cd /opt/cmake/src \\\n+    && tar xvjf cmake-3.1.0.tar.bz2 \\\n+    && cd cmake-3.1.0 && patch -p0 -i ../cmake-3.1.0-1.patch && mkdir .build && cd .build \\\n+    && ../bootstrap --parallel=2 \\\n+    && make -j2 && ./bin/cpack \\\n+    && tar xzf cmake-3.1.0-Linux-aarch64.tar.gz --strip-components 1 -C /opt/cmake \\\n+    && cd /opt/cmake && rm -rf /opt/cmake/src\n+ENV CMAKE_HOME /opt/cmake\n+ENV PATH \"${PATH}:/opt/cmake/bin\"\n+\n+######\n+# Install Google Protobuf 3.7.1 (2.6.0 ships with Xenial)\n+######\n+# hadolint ignore=DL3003\n+RUN mkdir -p /opt/protobuf-src \\\n+    && curl -L -s -S \\\n+      https://github.com/protocolbuffers/protobuf/releases/download/v3.7.1/protobuf-java-3.7.1.tar.gz \\\n+      -o /opt/protobuf.tar.gz \\\n+    && tar xzf /opt/protobuf.tar.gz --strip-components 1 -C /opt/protobuf-src \\\n+    && cd /opt/protobuf-src \\\n+    && ./configure --prefix=/opt/protobuf \\\n+    && make install \\\n+    && cd /root \\\n+    && rm -rf /opt/protobuf-src\n+ENV PROTOBUF_HOME /opt/protobuf\n+ENV PATH \"${PATH}:/opt/protobuf/bin\"\n+\n+######\n+# Install Apache Maven 3.3.9 (3.3.9 ships with Xenial)\n+######\n+# hadolint ignore=DL3008\n+RUN apt-get -q update \\\n+    && apt-get -q install -y --no-install-recommends maven \\\n+    && apt-get clean \\\n+    && rm -rf /var/lib/apt/lists/*\n+ENV MAVEN_HOME /usr\n+\n+######\n+# Install findbugs 3.0.1 (3.0.1 ships with Xenial)\n+# Ant is needed for findbugs\n+######\n+# hadolint ignore=DL3008\n+RUN apt-get -q update \\\n+    && apt-get -q install -y --no-install-recommends findbugs ant \\\n+    && apt-get clean \\\n+    && rm -rf /var/lib/apt/lists/*\n+ENV FINDBUGS_HOME /usr\n+\n+####\n+# Install shellcheck (0.4.6, the latest as of 2017-09-26)\n+####\n+# hadolint ignore=DL3008\n+RUN add-apt-repository -y ppa:hvr/ghc \\\n+    && apt-get -q update \\\n+    && apt-get -q install -y --no-install-recommends shellcheck \\\n+    && apt-get clean \\\n+    && rm -rf /var/lib/apt/lists/*\n+\n+####\n+# Install bats (0.4.0, the latest as of 2017-09-26, ships with Xenial)\n+####\n+# hadolint ignore=DL3008\n+RUN apt-get -q update \\\n+    && apt-get -q install -y --no-install-recommends bats \\\n+    && apt-get clean \\\n+    && rm -rf /var/lib/apt/lists/*\n+\n+####\n+# Install pylint at fixed version (2.0.0 removed python2 support)\n+# https://github.com/PyCQA/pylint/issues/2294\n+####\n+RUN pip2 install pylint==1.9.2\n+\n+####\n+# Install dateutil.parser\n+####\n+RUN pip2 install python-dateutil==2.7.3\n+\n+###\n+# Install node.js 8.17.0 for web UI framework (4.2.6 ships with Xenial)\n+###\n+RUN curl -L -s -S https://deb.nodesource.com/setup_8.x | bash - \\\n+    && apt-get install -y --no-install-recommends nodejs=8.17.0-1nodesource1 \\\n+    && apt-get clean \\\n+    && rm -rf /var/lib/apt/lists/* \\\n+    && npm install -g bower@1.8.8\n+\n+###\n+## Install Yarn 1.12.1 for web UI framework\n+####\n+RUN curl -s -S https://dl.yarnpkg.com/debian/pubkey.gpg | apt-key add - \\\n+    && echo 'deb https://dl.yarnpkg.com/debian/ stable main' > /etc/apt/sources.list.d/yarn.list \\\n+    && apt-get -q update \\\n+    && apt-get install -y --no-install-recommends yarn=1.21.1-1 \\\n+    && apt-get clean \\\n+    && rm -rf /var/lib/apt/lists/*\n+\n+###\n+# Install hadolint\n+####\n+#RUN curl -L -s -S \\\n+#        https://github.com/hadolint/hadolint/releases/download/v1.11.1/hadolint-Linux-x86_64 \\\n+#        -o /bin/hadolint \\\n+#   && chmod a+rx /bin/hadolint \\\n+#   && shasum -a 512 /bin/hadolint | \\\n+#        awk '$1!=\"734e37c1f6619cbbd86b9b249e69c9af8ee1ea87a2b1ff71dccda412e9dac35e63425225a95d71572091a3f0a11e9a04c2fc25d9e91b840530c26af32b9891ca\" {exit(1)}'\n+\n+###\n+# Install phantomjs built for aarch64\n+####\n+RUN mkdir -p /opt/phantomjs \\\n+  && curl -L -s -S \\\n+    https://github.com/liusheng/phantomjs/releases/download/2.1.1/phantomjs-2.1.1-linux-aarch64.tar.bz2 \\\n+   -o /opt/phantomjs/phantomjs-2.1.1-linux-aarch64.tar.bz2 \\\n+  && tar xvjf /opt/phantomjs/phantomjs-2.1.1-linux-aarch64.tar.bz2 --strip-components 1 -C /opt/phantomjs \\\n+  && cp /opt/phantomjs/bin/phantomjs /usr/bin/ \\\n+  && rm -rf /opt/phantomjs\n+\n+###\n+# Avoid out of memory errors in builds\n+###\n+ENV MAVEN_OPTS -Xms256m -Xmx1536m\n+\n+###\n+# Everything past this point is either not needed for testing or breaks Yetus.\n+# So tell Yetus not to read the rest of the file:\n+# YETUS CUT HERE\n+###\n+\n+# Hugo static website generator (for new hadoop site and Ozone docs)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "994661cf6b099dcd367e5569a8c84a3b017c9a2d"}, "originalPosition": 234}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQwOTY3ODg4", "url": "https://github.com/apache/hadoop/pull/1801#pullrequestreview-340967888", "createdAt": "2020-01-10T06:03:39Z", "commit": {"oid": "994661cf6b099dcd367e5569a8c84a3b017c9a2d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMFQwNjowMzozOVrOFcK89Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMFQwNjowMzozOVrOFcK89Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTA4Mzg5Mw==", "bodyText": "Can we use cmake 3.5.1 that Xenial ships?", "url": "https://github.com/apache/hadoop/pull/1801#discussion_r365083893", "createdAt": "2020-01-10T06:03:39Z", "author": {"login": "aajisaka"}, "path": "dev-support/docker/Dockerfile_aarch64", "diffHunk": "@@ -0,0 +1,244 @@\n+# Licensed to the Apache Software Foundation (ASF) under one\n+# or more contributor license agreements.  See the NOTICE file\n+# distributed with this work for additional information\n+# regarding copyright ownership.  The ASF licenses this file\n+# to you under the Apache License, Version 2.0 (the\n+# \"License\"); you may not use this file except in compliance\n+# with the License.  You may obtain a copy of the License at\n+#\n+#     http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+\n+# Dockerfile for installing the necessary dependencies for building Hadoop.\n+# See BUILDING.txt.\n+\n+FROM ubuntu:xenial\n+\n+WORKDIR /root\n+\n+SHELL [\"/bin/bash\", \"-o\", \"pipefail\", \"-c\"]\n+\n+#####\n+# Disable suggests/recommends\n+#####\n+RUN echo APT::Install-Recommends \"0\"\\; > /etc/apt/apt.conf.d/10disableextras\n+RUN echo APT::Install-Suggests \"0\"\\; >>  /etc/apt/apt.conf.d/10disableextras\n+\n+ENV DEBIAN_FRONTEND noninteractive\n+ENV DEBCONF_TERSE true\n+\n+######\n+# Install common dependencies from packages. Versions here are either\n+# sufficient or irrelevant.\n+#\n+# WARNING: DO NOT PUT JAVA APPS HERE! Otherwise they will install default\n+# Ubuntu Java.  See Java section below!\n+######\n+# hadolint ignore=DL3008\n+RUN apt-get -q update \\\n+    && apt-get -q install -y --no-install-recommends \\\n+        apt-utils \\\n+        build-essential \\\n+        bzip2 \\\n+        clang \\\n+        curl \\\n+        doxygen \\\n+        fuse \\\n+        g++ \\\n+        gcc \\\n+        git \\\n+        gnupg-agent \\\n+        libbz2-dev \\\n+        libcurl4-openssl-dev \\\n+        libfuse-dev \\\n+        libprotobuf-dev \\\n+        libprotoc-dev \\\n+        libsasl2-dev \\\n+        libsnappy-dev \\\n+        libssl-dev \\\n+        libtool \\\n+        libzstd1-dev \\\n+        locales \\\n+        make \\\n+        pinentry-curses \\\n+        pkg-config \\\n+        python \\\n+        python2.7 \\\n+        python-pip \\\n+        python-pkg-resources \\\n+        python-setuptools \\\n+        python-wheel \\\n+        rsync \\\n+        software-properties-common \\\n+        snappy \\\n+        sudo \\\n+        valgrind \\\n+        zlib1g-dev \\\n+    && apt-get clean \\\n+    && rm -rf /var/lib/apt/lists/*\n+\n+\n+#######\n+# OpenJDK 8\n+#######\n+# hadolint ignore=DL3008\n+RUN apt-get -q update \\\n+    && apt-get -q install -y --no-install-recommends openjdk-8-jdk libbcprov-java \\\n+    && apt-get clean \\\n+    && rm -rf /var/lib/apt/lists/*\n+\n+\n+######\n+# Install cmake 3.1.0 (3.5.1 ships with Xenial)\n+# There is no cmake binary available for aarch64. Build from source.\n+######\n+RUN mkdir -p /opt/cmake/src \\\n+    && curl -L -s -S \\\n+      https://cmake.org/files/v3.1/cmake-3.1.0-1-src.tar.bz2 \\\n+      -o /opt/cmake/cmake-src.tar.bz2 \\\n+    && tar xvjf /opt/cmake/cmake-src.tar.bz2 -C /opt/cmake/src \\\n+    && cd /opt/cmake/src \\\n+    && tar xvjf cmake-3.1.0.tar.bz2 \\\n+    && cd cmake-3.1.0 && patch -p0 -i ../cmake-3.1.0-1.patch && mkdir .build && cd .build \\\n+    && ../bootstrap --parallel=2 \\\n+    && make -j2 && ./bin/cpack \\\n+    && tar xzf cmake-3.1.0-Linux-aarch64.tar.gz --strip-components 1 -C /opt/cmake \\\n+    && cd /opt/cmake && rm -rf /opt/cmake/src\n+ENV CMAKE_HOME /opt/cmake\n+ENV PATH \"${PATH}:/opt/cmake/bin\"\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "994661cf6b099dcd367e5569a8c84a3b017c9a2d"}, "originalPosition": 114}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1e20e9c1c35511034caf91abdf7f47a93bfba90c", "author": {"user": {"login": "vinayakumarb", "name": "Vinayakumar B"}}, "url": "https://github.com/apache/hadoop/commit/1e20e9c1c35511034caf91abdf7f47a93bfba90c", "committedDate": "2020-01-10T08:23:52Z", "message": "HADOOP-16797. Add Dockerfile for ARM builds. Addendum"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "76741e5e297779594019d7289305ec8d3c98c71d", "author": {"user": {"login": "vinayakumarb", "name": "Vinayakumar B"}}, "url": "https://github.com/apache/hadoop/commit/76741e5e297779594019d7289305ec8d3c98c71d", "committedDate": "2020-01-10T07:13:31Z", "message": "HADOOP-16797. Add Dockerfile for ARM builds. Addendum"}, "afterCommit": {"oid": "1e20e9c1c35511034caf91abdf7f47a93bfba90c", "author": {"user": {"login": "vinayakumarb", "name": "Vinayakumar B"}}, "url": "https://github.com/apache/hadoop/commit/1e20e9c1c35511034caf91abdf7f47a93bfba90c", "committedDate": "2020-01-10T08:23:52Z", "message": "HADOOP-16797. Add Dockerfile for ARM builds. Addendum"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQxMjk0MTg4", "url": "https://github.com/apache/hadoop/pull/1801#pullrequestreview-341294188", "createdAt": "2020-01-10T16:55:19Z", "commit": {"oid": "1e20e9c1c35511034caf91abdf7f47a93bfba90c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4647, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}