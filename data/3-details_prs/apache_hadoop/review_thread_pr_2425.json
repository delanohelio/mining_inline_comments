{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEzMDcxMjY0", "number": 2425, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xM1QwMjoxNTozM1rOE4cNAQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxNzo0ODowMlrOE8VC9w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI3NjE3NzkzOnYy", "diffSide": "RIGHT", "path": "hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3a/tools/MarkerTool.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xM1QwMjoxNTozM1rOHyXB1g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQxMToyNzo1MFrOHz30ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjU2ODE1MA==", "bodyText": "nit: typo in \"greater\".", "url": "https://github.com/apache/hadoop/pull/2425#discussion_r522568150", "createdAt": "2020-11-13T02:15:33Z", "author": {"login": "mehakmeet"}, "path": "hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3a/tools/MarkerTool.java", "diffHunk": "@@ -513,6 +526,11 @@ private ScanResult scan(\n       final DirectoryPolicy filterPolicy)\n       throws IOException, ExitUtil.ExitException {\n \n+    // safety check: min and max are correctly ordered at this point.\n+    Preconditions.checkArgument(minMarkerCount <= maxMarkerCount,\n+        \"Min marker count of %d is greather than the max value of %d\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "003df8e130b541b4b6ce9ee7450b2b09d8a5b383"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDE1NDAxNA==", "bodyText": "well spotted", "url": "https://github.com/apache/hadoop/pull/2425#discussion_r524154014", "createdAt": "2020-11-16T11:27:50Z", "author": {"login": "steveloughran"}, "path": "hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3a/tools/MarkerTool.java", "diffHunk": "@@ -513,6 +526,11 @@ private ScanResult scan(\n       final DirectoryPolicy filterPolicy)\n       throws IOException, ExitUtil.ExitException {\n \n+    // safety check: min and max are correctly ordered at this point.\n+    Preconditions.checkArgument(minMarkerCount <= maxMarkerCount,\n+        \"Min marker count of %d is greather than the max value of %d\",", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjU2ODE1MA=="}, "originalCommit": {"oid": "003df8e130b541b4b6ce9ee7450b2b09d8a5b383"}, "originalPosition": 39}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI3NjYyOTQwOnYy", "diffSide": "RIGHT", "path": "hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3a/tools/MarkerTool.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xM1QwNDo1Nzo1NVrOHybhDg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxNzo0NzoyNlrOH4YvqQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjY0MTY3OA==", "bodyText": "nit: Is this check required again since we have already swapped above?", "url": "https://github.com/apache/hadoop/pull/2425#discussion_r522641678", "createdAt": "2020-11-13T04:57:55Z", "author": {"login": "mukund-thakur"}, "path": "hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3a/tools/MarkerTool.java", "diffHunk": "@@ -513,6 +526,11 @@ private ScanResult scan(\n       final DirectoryPolicy filterPolicy)\n       throws IOException, ExitUtil.ExitException {\n \n+    // safety check: min and max are correctly ordered at this point.\n+    Preconditions.checkArgument(minMarkerCount <= maxMarkerCount,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "003df8e130b541b4b6ce9ee7450b2b09d8a5b383"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTA5Mzg3Mg==", "bodyText": "no, but I'm just being extra paranoid", "url": "https://github.com/apache/hadoop/pull/2425#discussion_r525093872", "createdAt": "2020-11-17T11:47:57Z", "author": {"login": "steveloughran"}, "path": "hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3a/tools/MarkerTool.java", "diffHunk": "@@ -513,6 +526,11 @@ private ScanResult scan(\n       final DirectoryPolicy filterPolicy)\n       throws IOException, ExitUtil.ExitException {\n \n+    // safety check: min and max are correctly ordered at this point.\n+    Preconditions.checkArgument(minMarkerCount <= maxMarkerCount,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjY0MTY3OA=="}, "originalCommit": {"oid": "003df8e130b541b4b6ce9ee7450b2b09d8a5b383"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODg4NzcyMQ==", "bodyText": "it will harm nobody, we can leave this check here.", "url": "https://github.com/apache/hadoop/pull/2425#discussion_r528887721", "createdAt": "2020-11-23T17:47:26Z", "author": {"login": "bgaborg"}, "path": "hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3a/tools/MarkerTool.java", "diffHunk": "@@ -513,6 +526,11 @@ private ScanResult scan(\n       final DirectoryPolicy filterPolicy)\n       throws IOException, ExitUtil.ExitException {\n \n+    // safety check: min and max are correctly ordered at this point.\n+    Preconditions.checkArgument(minMarkerCount <= maxMarkerCount,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjY0MTY3OA=="}, "originalCommit": {"oid": "003df8e130b541b4b6ce9ee7450b2b09d8a5b383"}, "originalPosition": 38}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMxNjk0ODM5OnYy", "diffSide": "RIGHT", "path": "hadoop-tools/hadoop-aws/src/test/java/org/apache/hadoop/fs/s3a/tools/ITestMarkerTool.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxNzo0ODowMlrOH4Yw8w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QyMDo0OToxMFrOH4ezrg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODg4ODA1MQ==", "bodyText": "I wanted to ask for a test like this, but it's already here so LGTM.", "url": "https://github.com/apache/hadoop/pull/2425#discussion_r528888051", "createdAt": "2020-11-23T17:48:02Z", "author": {"login": "bgaborg"}, "path": "hadoop-tools/hadoop-aws/src/test/java/org/apache/hadoop/fs/s3a/tools/ITestMarkerTool.java", "diffHunk": "@@ -259,8 +259,25 @@ public void testRunAuditWithExpectedMarkers() throws Throwable {\n         AUDIT,\n         m(OPT_LIMIT), 0,\n         m(OPT_OUT), audit,\n-        m(OPT_MIN), expectedMarkersWithBaseDir,\n-        m(OPT_MAX), expectedMarkersWithBaseDir,\n+        m(OPT_MIN), expectedMarkersWithBaseDir - 1,\n+        m(OPT_MAX), expectedMarkersWithBaseDir + 1,\n+        createdPaths.base);\n+    expectMarkersInOutput(audit, expectedMarkersWithBaseDir);\n+  }\n+\n+  @Test\n+  public void testRunAuditWithExpectedMarkersSwappedMinMax() throws Throwable {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c32dae755bfd1953ef241b69421d158cc267b0d5"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODk4NzA1NA==", "bodyText": "wanted to make sure that anyone in QE wouldn't be upset with the fix :)", "url": "https://github.com/apache/hadoop/pull/2425#discussion_r528987054", "createdAt": "2020-11-23T20:49:10Z", "author": {"login": "steveloughran"}, "path": "hadoop-tools/hadoop-aws/src/test/java/org/apache/hadoop/fs/s3a/tools/ITestMarkerTool.java", "diffHunk": "@@ -259,8 +259,25 @@ public void testRunAuditWithExpectedMarkers() throws Throwable {\n         AUDIT,\n         m(OPT_LIMIT), 0,\n         m(OPT_OUT), audit,\n-        m(OPT_MIN), expectedMarkersWithBaseDir,\n-        m(OPT_MAX), expectedMarkersWithBaseDir,\n+        m(OPT_MIN), expectedMarkersWithBaseDir - 1,\n+        m(OPT_MAX), expectedMarkersWithBaseDir + 1,\n+        createdPaths.base);\n+    expectMarkersInOutput(audit, expectedMarkersWithBaseDir);\n+  }\n+\n+  @Test\n+  public void testRunAuditWithExpectedMarkersSwappedMinMax() throws Throwable {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODg4ODA1MQ=="}, "originalCommit": {"oid": "c32dae755bfd1953ef241b69421d158cc267b0d5"}, "originalPosition": 13}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3245, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}