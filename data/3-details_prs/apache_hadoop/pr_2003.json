{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE1MTkzMzE5", "number": 2003, "title": "HADOOP-16768. SnappyCompressor test cases wrongly assume that the compressed data is always smaller than the input data.", "bodyText": "JIRA: https://issues.apache.org/jira/browse/HADOOP-16768\nNote that perhaps there is the same issue in other compressors.\nI ran the tests in both CentOS 7 and Ubuntu 18.04.", "createdAt": "2020-05-08T11:43:46Z", "url": "https://github.com/apache/hadoop/pull/2003", "merged": true, "mergeCommit": {"oid": "328eae9a146b2dd9857a17a0db6fcddb1de23a0d"}, "closed": true, "closedAt": "2020-05-11T05:44:19Z", "author": {"login": "aajisaka"}, "timelineItems": {"totalCount": 22, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcfPHxcAH2gAyNDE1MTkzMzE5OjY4MTdmNjU5YjgxMjI0OWNjMDFhNDcwNDQ5NDkxOTZlZWJiODEyMDc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcgHamfgH2gAyNDE1MTkzMzE5OmZmNDdmNzc5YWM3ZTZkMmE5M2U4NDIwN2VjM2JmMTJiNjJlODgyMTk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "6817f659b812249cc01a47044949196eebb81207", "author": {"user": {"login": "aajisaka", "name": "Akira Ajisaka"}}, "url": "https://github.com/apache/hadoop/commit/6817f659b812249cc01a47044949196eebb81207", "committedDate": "2020-05-08T10:14:48Z", "message": "Increase size of direct buffer"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0e357a7a0a2d8e0a3bd62ac4605f51473a9b4009", "author": {"user": {"login": "aajisaka", "name": "Akira Ajisaka"}}, "url": "https://github.com/apache/hadoop/commit/0e357a7a0a2d8e0a3bd62ac4605f51473a9b4009", "committedDate": "2020-05-08T10:23:08Z", "message": "Add logging"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "44448e0ab77f0addb5779a3f713b111f3d6e691c", "author": {"user": {"login": "aajisaka", "name": "Akira Ajisaka"}}, "url": "https://github.com/apache/hadoop/commit/44448e0ab77f0addb5779a3f713b111f3d6e691c", "committedDate": "2020-05-08T10:35:41Z", "message": "Output compressed size"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e9cabdd159249b6c11ed75b6746dfb57ee319250", "author": {"user": {"login": "aajisaka", "name": "Akira Ajisaka"}}, "url": "https://github.com/apache/hadoop/commit/e9cabdd159249b6c11ed75b6746dfb57ee319250", "committedDate": "2020-05-08T10:51:09Z", "message": "Revert the change of buffer size."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d6df06e0c1300ac2a76c308c55fcef379587f162", "author": {"user": {"login": "aajisaka", "name": "Akira Ajisaka"}}, "url": "https://github.com/apache/hadoop/commit/d6df06e0c1300ac2a76c308c55fcef379587f162", "committedDate": "2020-05-08T11:01:11Z", "message": "More debug messages"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "34f86164dbeb32933fe40bee462364c073875c98", "author": {"user": {"login": "aajisaka", "name": "Akira Ajisaka"}}, "url": "https://github.com/apache/hadoop/commit/34f86164dbeb32933fe40bee462364c073875c98", "committedDate": "2020-05-08T11:10:35Z", "message": "Use compressed size as possible"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "918abd00fb8a0964ecc15df103ad3abc2992be17", "author": {"user": {"login": "aajisaka", "name": "Akira Ajisaka"}}, "url": "https://github.com/apache/hadoop/commit/918abd00fb8a0964ecc15df103ad3abc2992be17", "committedDate": "2020-05-08T11:14:35Z", "message": "Throw exception in test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2d7ea2d380026f236edc5666e22f94ede997033e", "author": {"user": {"login": "aajisaka", "name": "Akira Ajisaka"}}, "url": "https://github.com/apache/hadoop/commit/2d7ea2d380026f236edc5666e22f94ede997033e", "committedDate": "2020-05-08T11:22:12Z", "message": "Increase compressed buffer"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5fbbb51350afce00f2db4771ff3d201175b4ccd7", "author": {"user": {"login": "aajisaka", "name": "Akira Ajisaka"}}, "url": "https://github.com/apache/hadoop/commit/5fbbb51350afce00f2db4771ff3d201175b4ccd7", "committedDate": "2020-05-08T11:24:29Z", "message": "Tweak doc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "86233882c5cf2ac24ead3331c4ba1e53339f9e58", "author": {"user": {"login": "aajisaka", "name": "Akira Ajisaka"}}, "url": "https://github.com/apache/hadoop/commit/86233882c5cf2ac24ead3331c4ba1e53339f9e58", "committedDate": "2020-05-08T11:37:51Z", "message": "Remove unused import"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b188a47fffb46a01f8d17f299178af29028c7a67", "author": {"user": {"login": "aajisaka", "name": "Akira Ajisaka"}}, "url": "https://github.com/apache/hadoop/commit/b188a47fffb46a01f8d17f299178af29028c7a67", "committedDate": "2020-05-08T11:39:35Z", "message": "Use assertEquals instead of assertTrue"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dac152bb70a37d1c2517cf67c487fa52eb58f719", "author": {"user": {"login": "aajisaka", "name": "Akira Ajisaka"}}, "url": "https://github.com/apache/hadoop/commit/dac152bb70a37d1c2517cf67c487fa52eb58f719", "committedDate": "2020-05-08T17:11:18Z", "message": "Refactor test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d9f0d9fc3f69aba0b1063f35c24ccc16252d5963", "author": {"user": {"login": "aajisaka", "name": "Akira Ajisaka"}}, "url": "https://github.com/apache/hadoop/commit/d9f0d9fc3f69aba0b1063f35c24ccc16252d5963", "committedDate": "2020-05-08T17:15:01Z", "message": "Fix TestCompressorDecompressor"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6febbfa0618e9b3c09d0caf28d60d86c7a1a74fa", "author": {"user": {"login": "aajisaka", "name": "Akira Ajisaka"}}, "url": "https://github.com/apache/hadoop/commit/6febbfa0618e9b3c09d0caf28d60d86c7a1a74fa", "committedDate": "2020-05-09T17:20:16Z", "message": "Fix checkstyle warning"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA4NzQ4NjM1", "url": "https://github.com/apache/hadoop/pull/2003#pullrequestreview-408748635", "createdAt": "2020-05-10T14:08:23Z", "commit": {"oid": "6febbfa0618e9b3c09d0caf28d60d86c7a1a74fa"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMFQxNDowODoyNFrOGTEiLg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMFQxNDowODoyNFrOGTEiLg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjY1MDQxNA==", "bodyText": "Do we need this change? This could cause IndexOutOfBoundsException on consuming compressed data.", "url": "https://github.com/apache/hadoop/pull/2003#discussion_r422650414", "createdAt": "2020-05-10T14:08:24Z", "author": {"login": "iwasakims"}, "path": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/io/compress/snappy/SnappyCompressor.java", "diffHunk": "@@ -234,8 +234,6 @@ public int compress(byte[] b, int off, int len)\n       finished = true;\n     }\n \n-    // Get atmost 'len' bytes\n-    n = Math.min(n, len);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6febbfa0618e9b3c09d0caf28d60d86c7a1a74fa"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0650432f439a27579204d71fd8b680dad73236bb", "author": {"user": {"login": "aajisaka", "name": "Akira Ajisaka"}}, "url": "https://github.com/apache/hadoop/commit/0650432f439a27579204d71fd8b680dad73236bb", "committedDate": "2020-05-10T23:37:00Z", "message": "Limit the compressed data within the buffer size for each compress call."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4a7befba1514eb764aa88478119e0a2463f6767b", "author": {"user": {"login": "aajisaka", "name": "Akira Ajisaka"}}, "url": "https://github.com/apache/hadoop/commit/4a7befba1514eb764aa88478119e0a2463f6767b", "committedDate": "2020-05-11T00:22:42Z", "message": "Add a test case for small buffer."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b487be0fd407ab232bda91dc37de4cf6f9fb1c59", "author": {"user": {"login": "aajisaka", "name": "Akira Ajisaka"}}, "url": "https://github.com/apache/hadoop/commit/b487be0fd407ab232bda91dc37de4cf6f9fb1c59", "committedDate": "2020-05-11T00:26:51Z", "message": "Fix infinite-loop"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "175ddaa0800d5991a68da58b10f6a723ff082f01", "author": {"user": {"login": "aajisaka", "name": "Akira Ajisaka"}}, "url": "https://github.com/apache/hadoop/commit/175ddaa0800d5991a68da58b10f6a723ff082f01", "committedDate": "2020-05-11T00:29:36Z", "message": "Add assertion for the compressed data"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5ef9ba5907a22c2a8f267664438f4380e69be3af", "author": {"user": {"login": "aajisaka", "name": "Akira Ajisaka"}}, "url": "https://github.com/apache/hadoop/commit/5ef9ba5907a22c2a8f267664438f4380e69be3af", "committedDate": "2020-05-11T00:34:17Z", "message": "Tweak the doc"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA4ODM2OTQ1", "url": "https://github.com/apache/hadoop/pull/2003#pullrequestreview-408836945", "createdAt": "2020-05-11T03:24:54Z", "commit": {"oid": "5ef9ba5907a22c2a8f267664438f4380e69be3af"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ff47f779ac7e6d2a93e84207ec3bf12b62e88219", "author": {"user": {"login": "aajisaka", "name": "Akira Ajisaka"}}, "url": "https://github.com/apache/hadoop/commit/ff47f779ac7e6d2a93e84207ec3bf12b62e88219", "committedDate": "2020-05-11T03:50:03Z", "message": "Rename local variables to fix check style warnings"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4290, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}