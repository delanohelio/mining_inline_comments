{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkzNzQ4ODcz", "number": 2342, "title": "HADOOP-17288. Use shaded guava from thirdparty.", "bodyText": "https://issues.apache.org/jira/browse/HADOOP-17288", "createdAt": "2020-09-27T17:07:51Z", "url": "https://github.com/apache/hadoop/pull/2342", "merged": true, "mergeCommit": {"oid": "1e3a6efcef2924a7966c44ca63476c853956691d"}, "closed": true, "closedAt": "2020-10-17T06:31:19Z", "author": {"login": "ayushtkn"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdNVET9ABqjM4MTUwNTg4MDM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdTVAxpgBqjM4ODg5MDYxODA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "646f34e39b4b47e1458a29467fc844c6de16a0e8", "author": {"user": {"login": "ayushtkn", "name": "Ayush Saxena"}}, "url": "https://github.com/apache/hadoop/commit/646f34e39b4b47e1458a29467fc844c6de16a0e8", "committedDate": "2020-09-27T17:06:19Z", "message": "HADOOP-17288. Use shaded guava from thirdparty."}, "afterCommit": {"oid": "f1a960bb37127377c52bb7ecc8b25363e140f49f", "author": {"user": {"login": "ayushtkn", "name": "Ayush Saxena"}}, "url": "https://github.com/apache/hadoop/commit/f1a960bb37127377c52bb7ecc8b25363e140f49f", "committedDate": "2020-09-28T15:09:16Z", "message": "HADOOP-17288. Use shaded guava from thirdparty."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ddef702fdc0c5d07870263942493a1a6183f1480", "author": {"user": {"login": "ayushtkn", "name": "Ayush Saxena"}}, "url": "https://github.com/apache/hadoop/commit/ddef702fdc0c5d07870263942493a1a6183f1480", "committedDate": "2020-10-01T14:54:06Z", "message": "Change Guava to 11."}, "afterCommit": {"oid": "e9721616eb6d6a5784c9f3e0027d235bf02cc8cd", "author": {"user": {"login": "ayushtkn", "name": "Ayush Saxena"}}, "url": "https://github.com/apache/hadoop/commit/e9721616eb6d6a5784c9f3e0027d235bf02cc8cd", "committedDate": "2020-10-02T04:30:03Z", "message": "Change Guava to 11."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAyNzI2Nzg1", "url": "https://github.com/apache/hadoop/pull/2342#pullrequestreview-502726785", "createdAt": "2020-10-06T08:58:32Z", "commit": {"oid": "e9721616eb6d6a5784c9f3e0027d235bf02cc8cd"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQwODo1ODozMlrOHc8riQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQwODo1ODozMlrOHc8riQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDExNjM2MQ==", "bodyText": "Instead of replacing guava references along with protobuf references, create a separate replacer-execution in hadoop-project/pom.xml and enable by default for all projects.\n            <execution>\n              <id>replace-guava</id>\n              <phase>process-sources</phase>\n              <goals>\n                <goal>replace</goal>\n              </goals>\n              <configuration>\n                <skip>false</skip><!--This will run for all modules-->\n                <basedir>${basedir}</basedir>\n                <includes>\n                  <include>src/main/java/**/*.java</include>\n                  <include>src/test/java/**/*.java</include>\n                </includes>\n                <replacements>\n                  <replacement>\n                    <token>([^\\.])com.google.common</token>\n                    <value>$1${hadoop-thirdparty-shaded-guava-prefix}</value>\n                  </replacement>\n                </replacements>\n              </configuration>\n            </execution>\n\n\n\nExclude guava-replacement in hadoop-yarn-csi module. yarn-csi seems to have separate classpath, and it explicitly uses guava-20. This will not affect any downstreams.\n\n\nReplaces all dependencies on guava to hadoop-shaded-guava (except yarn-csi)\n\n\nIn hadoop-common/pom.xml, Keep both guava (11.0.2) and hadoop-shaded-guava as dependencies. Of course code should use shaded version of guava. version 11.0.2 is used in curator libs during runtime.", "url": "https://github.com/apache/hadoop/pull/2342#discussion_r500116361", "createdAt": "2020-10-06T08:58:32Z", "author": {"login": "vinayakumarb"}, "path": "hadoop-common-project/hadoop-auth/pom.xml", "diffHunk": "@@ -234,6 +235,24 @@\n           <excludeFilterFile>${basedir}/dev-support/findbugsExcludeFile.xml</excludeFilterFile>\n         </configuration>\n       </plugin>\n+      <plugin>\n+        <groupId>com.google.code.maven-replacer-plugin</groupId>\n+        <artifactId>replacer</artifactId>\n+        <executions>\n+          <execution>\n+            <id>replace-sources</id>\n+            <configuration>\n+              <skip>false</skip>\n+            </configuration>\n+          </execution>\n+          <execution>\n+            <id>replace-test-sources</id>\n+            <configuration>\n+              <skip>false</skip>\n+            </configuration>\n+          </execution>\n+        </executions>\n+      </plugin>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e9721616eb6d6a5784c9f3e0027d235bf02cc8cd"}, "originalPosition": 34}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e9721616eb6d6a5784c9f3e0027d235bf02cc8cd", "author": {"user": {"login": "ayushtkn", "name": "Ayush Saxena"}}, "url": "https://github.com/apache/hadoop/commit/e9721616eb6d6a5784c9f3e0027d235bf02cc8cd", "committedDate": "2020-10-02T04:30:03Z", "message": "Change Guava to 11."}, "afterCommit": {"oid": "1d7fe1849e63c5dd8c38e30ac40bfe2e3ec615c6", "author": {"user": {"login": "ayushtkn", "name": "Ayush Saxena"}}, "url": "https://github.com/apache/hadoop/commit/1d7fe1849e63c5dd8c38e30ac40bfe2e3ec615c6", "committedDate": "2020-10-08T03:36:36Z", "message": "HADOOP-17288. Use shaded guava from thirdparty."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1d7fe1849e63c5dd8c38e30ac40bfe2e3ec615c6", "author": {"user": {"login": "ayushtkn", "name": "Ayush Saxena"}}, "url": "https://github.com/apache/hadoop/commit/1d7fe1849e63c5dd8c38e30ac40bfe2e3ec615c6", "committedDate": "2020-10-08T03:36:36Z", "message": "HADOOP-17288. Use shaded guava from thirdparty."}, "afterCommit": {"oid": "0d9ff8469d54458e8152aefaedfdd723b786810c", "author": {"user": {"login": "ayushtkn", "name": "Ayush Saxena"}}, "url": "https://github.com/apache/hadoop/commit/0d9ff8469d54458e8152aefaedfdd723b786810c", "committedDate": "2020-10-10T09:58:56Z", "message": "HADOOP-17288. Use shaded guava from thirdparty."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0d9ff8469d54458e8152aefaedfdd723b786810c", "author": {"user": {"login": "ayushtkn", "name": "Ayush Saxena"}}, "url": "https://github.com/apache/hadoop/commit/0d9ff8469d54458e8152aefaedfdd723b786810c", "committedDate": "2020-10-10T09:58:56Z", "message": "HADOOP-17288. Use shaded guava from thirdparty."}, "afterCommit": {"oid": "2b584f58965e7ba035101bf5c31ee0675e6a1516", "author": {"user": {"login": "ayushtkn", "name": "Ayush Saxena"}}, "url": "https://github.com/apache/hadoop/commit/2b584f58965e7ba035101bf5c31ee0675e6a1516", "committedDate": "2020-10-11T14:13:51Z", "message": "HADOOP-17288. Use shaded guava from thirdparty."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA2NzcxNzMy", "url": "https://github.com/apache/hadoop/pull/2342#pullrequestreview-506771732", "createdAt": "2020-10-12T16:42:15Z", "commit": {"oid": "2b584f58965e7ba035101bf5c31ee0675e6a1516"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQxNjo0MjoxNVrOHgF8Dw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQxNjo0Mzo0NVrOHgF-5g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzQxMzc3NQ==", "bodyText": "This change intentional? How does it relate?", "url": "https://github.com/apache/hadoop/pull/2342#discussion_r503413775", "createdAt": "2020-10-12T16:42:15Z", "author": {"login": "saintstack"}, "path": "Jenkinsfile", "diffHunk": "@@ -23,7 +23,7 @@ pipeline {\n \n     options {\n         buildDiscarder(logRotator(numToKeepStr: '5'))\n-        timeout (time: 20, unit: 'HOURS')\n+        timeout (time: 30, unit: 'HOURS')", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2b584f58965e7ba035101bf5c31ee0675e6a1516"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzQxNDIyOQ==", "bodyText": "nit: no need of the compile scope since it default?", "url": "https://github.com/apache/hadoop/pull/2342#discussion_r503414229", "createdAt": "2020-10-12T16:43:15Z", "author": {"login": "saintstack"}, "path": "hadoop-common-project/hadoop-common/pom.xml", "diffHunk": "@@ -49,6 +49,12 @@\n       <artifactId>hadoop-annotations</artifactId>\n       <scope>compile</scope>\n     </dependency>\n+    <dependency>\n+      <groupId>org.apache.hadoop.thirdparty</groupId>\n+      <artifactId>hadoop-shaded-guava</artifactId>\n+      <scope>compile</scope>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2b584f58965e7ba035101bf5c31ee0675e6a1516"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzQxNDUwMg==", "bodyText": "Helpful comment.", "url": "https://github.com/apache/hadoop/pull/2342#discussion_r503414502", "createdAt": "2020-10-12T16:43:45Z", "author": {"login": "saintstack"}, "path": "hadoop-common-project/hadoop-common/pom.xml", "diffHunk": "@@ -49,6 +49,12 @@\n       <artifactId>hadoop-annotations</artifactId>\n       <scope>compile</scope>\n     </dependency>\n+    <dependency>\n+      <groupId>org.apache.hadoop.thirdparty</groupId>\n+      <artifactId>hadoop-shaded-guava</artifactId>\n+      <scope>compile</scope>\n+    </dependency>\n+    <!--Guava is required during runtime for curator-->", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2b584f58965e7ba035101bf5c31ee0675e6a1516"}, "originalPosition": 9}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA2NzgzOTg3", "url": "https://github.com/apache/hadoop/pull/2342#pullrequestreview-506783987", "createdAt": "2020-10-12T17:01:57Z", "commit": {"oid": "2b584f58965e7ba035101bf5c31ee0675e6a1516"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQxNzowMTo1OFrOHgGjsA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQxNzowMTo1OFrOHgGjsA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzQyMzkyMA==", "bodyText": "This intentional?", "url": "https://github.com/apache/hadoop/pull/2342#discussion_r503423920", "createdAt": "2020-10-12T17:01:58Z", "author": {"login": "saintstack"}, "path": "hadoop-project/pom.xml", "diffHunk": "@@ -2198,7 +2227,7 @@\n             <configuration>\n               <rules>\n                 <DependencyConvergence>\n-                  <uniqueVersions>true</uniqueVersions>\n+                  <uniqueVersions>false</uniqueVersions>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2b584f58965e7ba035101bf5c31ee0675e6a1516"}, "originalPosition": 59}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA3NTI1ODEw", "url": "https://github.com/apache/hadoop/pull/2342#pullrequestreview-507525810", "createdAt": "2020-10-13T14:54:08Z", "commit": {"oid": "2b584f58965e7ba035101bf5c31ee0675e6a1516"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA4MDczNzUw", "url": "https://github.com/apache/hadoop/pull/2342#pullrequestreview-508073750", "createdAt": "2020-10-14T07:40:51Z", "commit": {"oid": "2b584f58965e7ba035101bf5c31ee0675e6a1516"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3f0c38cc7cfcb112ed6950eebd0bd93ed7f1192e", "author": {"user": {"login": "ayushtkn", "name": "Ayush Saxena"}}, "url": "https://github.com/apache/hadoop/commit/3f0c38cc7cfcb112ed6950eebd0bd93ed7f1192e", "committedDate": "2020-10-17T05:59:44Z", "message": "HADOOP-17288. Use shaded guava from thirdparty."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2b584f58965e7ba035101bf5c31ee0675e6a1516", "author": {"user": {"login": "ayushtkn", "name": "Ayush Saxena"}}, "url": "https://github.com/apache/hadoop/commit/2b584f58965e7ba035101bf5c31ee0675e6a1516", "committedDate": "2020-10-11T14:13:51Z", "message": "HADOOP-17288. Use shaded guava from thirdparty."}, "afterCommit": {"oid": "3f0c38cc7cfcb112ed6950eebd0bd93ed7f1192e", "author": {"user": {"login": "ayushtkn", "name": "Ayush Saxena"}}, "url": "https://github.com/apache/hadoop/commit/3f0c38cc7cfcb112ed6950eebd0bd93ed7f1192e", "committedDate": "2020-10-17T05:59:44Z", "message": "HADOOP-17288. Use shaded guava from thirdparty."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3708, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}