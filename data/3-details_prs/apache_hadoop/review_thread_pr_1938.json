{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk4MTQwOTQw", "number": 1938, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QyMjoyMjoyNFrODunI-A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQxNjoyMDowN1rODvNH9w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwMjAyMzYwOnYy", "diffSide": "RIGHT", "path": "hadoop-tools/hadoop-azure/src/test/java/org/apache/hadoop/fs/azurebfs/services/TestAbfsClient.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QyMjoyMjoyNFrOGArZjw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QyMjoyMjoyNFrOGArZjw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzM2NDIzOQ==", "bodyText": "is this annotation needed?", "url": "https://github.com/apache/hadoop/pull/1938#discussion_r403364239", "createdAt": "2020-04-03T22:22:24Z", "author": {"login": "DadanielZ"}, "path": "hadoop-tools/hadoop-azure/src/test/java/org/apache/hadoop/fs/azurebfs/services/TestAbfsClient.java", "diffHunk": "@@ -18,80 +18,220 @@\n \n package org.apache.hadoop.fs.azurebfs.services;\n \n+import java.io.IOException;\n+import java.net.MalformedURLException;\n import java.net.URL;\n import java.util.regex.Pattern;\n \n-import org.apache.hadoop.fs.azurebfs.contracts.exceptions.AzureBlobFileSystemException;\n-import org.junit.Assert;\n+import org.assertj.core.api.Assertions;\n import org.junit.Test;\n+import org.junit.runner.RunWith;\n+import org.junit.runners.JUnit4;\n \n import org.apache.hadoop.fs.azurebfs.AbfsConfiguration;\n import org.apache.hadoop.fs.azurebfs.oauth2.AccessTokenProvider;\n import org.apache.hadoop.conf.Configuration;\n import org.apache.hadoop.fs.azurebfs.constants.ConfigurationKeys;\n import org.apache.hadoop.security.ssl.DelegatingSSLSocketFactory;\n-import org.apache.hadoop.util.VersionInfo;\n+\n+import static org.apache.hadoop.fs.azurebfs.constants.AbfsHttpConstants.APN_VERSION;\n+import static org.apache.hadoop.fs.azurebfs.constants.AbfsHttpConstants.CLIENT_VERSION;\n+import static org.apache.hadoop.fs.azurebfs.constants.AbfsHttpConstants.EMPTY_STRING;\n+import static org.apache.hadoop.fs.azurebfs.constants.AbfsHttpConstants.FORWARD_SLASH;\n+import static org.apache.hadoop.fs.azurebfs.constants.AbfsHttpConstants.JAVA_VERSION;\n+import static org.apache.hadoop.fs.azurebfs.constants.AbfsHttpConstants.OS_ARCH;\n+import static org.apache.hadoop.fs.azurebfs.constants.AbfsHttpConstants.OS_NAME;\n+import static org.apache.hadoop.fs.azurebfs.constants.AbfsHttpConstants.OS_VERSION;\n+import static org.apache.hadoop.fs.azurebfs.constants.AbfsHttpConstants.SEMICOLON;\n+import static org.apache.hadoop.fs.azurebfs.constants.AbfsHttpConstants.SINGLE_WHITE_SPACE;\n+import static org.apache.hadoop.fs.azurebfs.constants.ConfigurationKeys.FS_AZURE_CLUSTER_NAME;\n+import static org.apache.hadoop.fs.azurebfs.constants.ConfigurationKeys.FS_AZURE_CLUSTER_TYPE;\n \n /**\n  * Test useragent of abfs client.\n  *\n  */\n+@RunWith(JUnit4.class)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "acaea3b3ea4846296485e6166f3f8f889e5ed4af"}, "originalPosition": 40}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwODIyOTk0OnYy", "diffSide": "RIGHT", "path": "hadoop-tools/hadoop-azure/src/main/java/org/apache/hadoop/fs/azurebfs/services/AbfsClient.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQxNjoxNjowNFrOGBfeDQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QxODoxMjowOVrOGCQEHA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDIxNzM1Nw==", "bodyText": "if you pulled this out somewhere or made static you could have a unit test which would validate some of this", "url": "https://github.com/apache/hadoop/pull/1938#discussion_r404217357", "createdAt": "2020-04-06T16:16:04Z", "author": {"login": "steveloughran"}, "path": "hadoop-tools/hadoop-azure/src/main/java/org/apache/hadoop/fs/azurebfs/services/AbfsClient.java", "diffHunk": "@@ -679,32 +679,60 @@ public AuthType getAuthType() {\n \n   @VisibleForTesting\n   String initializeUserAgent(final AbfsConfiguration abfsConfiguration,\n-                             final String sslProviderName) {\n+      final String sslProviderName) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "322f778ac20dd3f1b84b66e1265ae1e32507b955"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTAxMzUzMg==", "bodyText": "There are test cases written to validate this as this method is package protected and with the @VisibleForTesting.", "url": "https://github.com/apache/hadoop/pull/1938#discussion_r405013532", "createdAt": "2020-04-07T18:12:09Z", "author": {"login": "bilaharith"}, "path": "hadoop-tools/hadoop-azure/src/main/java/org/apache/hadoop/fs/azurebfs/services/AbfsClient.java", "diffHunk": "@@ -679,32 +679,60 @@ public AuthType getAuthType() {\n \n   @VisibleForTesting\n   String initializeUserAgent(final AbfsConfiguration abfsConfiguration,\n-                             final String sslProviderName) {\n+      final String sslProviderName) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDIxNzM1Nw=="}, "originalCommit": {"oid": "322f778ac20dd3f1b84b66e1265ae1e32507b955"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwODI0Njk1OnYy", "diffSide": "RIGHT", "path": "hadoop-tools/hadoop-azure/src/main/java/org/apache/hadoop/fs/azurebfs/services/AbfsClient.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQxNjoyMDowN1rOGBfozQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QxODoxNDo0M1rOGCQJ9w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDIyMDEwOQ==", "bodyText": "can we have org.apache.hadoop.util.VersionInfo,getVersion() in there too? Lets people pin the blame on the logs", "url": "https://github.com/apache/hadoop/pull/1938#discussion_r404220109", "createdAt": "2020-04-06T16:20:07Z", "author": {"login": "steveloughran"}, "path": "hadoop-tools/hadoop-azure/src/main/java/org/apache/hadoop/fs/azurebfs/services/AbfsClient.java", "diffHunk": "@@ -679,32 +679,60 @@ public AuthType getAuthType() {\n \n   @VisibleForTesting\n   String initializeUserAgent(final AbfsConfiguration abfsConfiguration,\n-                             final String sslProviderName) {\n+      final String sslProviderName) {\n+\n     StringBuilder sb = new StringBuilder();\n-    sb.append(\"(JavaJRE \");\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "322f778ac20dd3f1b84b66e1265ae1e32507b955"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTAxNTAzMQ==", "bodyText": "CLIENT_VERSION includes org.apache.hadoop.util.VersionInfo,getVersion()", "url": "https://github.com/apache/hadoop/pull/1938#discussion_r405015031", "createdAt": "2020-04-07T18:14:43Z", "author": {"login": "bilaharith"}, "path": "hadoop-tools/hadoop-azure/src/main/java/org/apache/hadoop/fs/azurebfs/services/AbfsClient.java", "diffHunk": "@@ -679,32 +679,60 @@ public AuthType getAuthType() {\n \n   @VisibleForTesting\n   String initializeUserAgent(final AbfsConfiguration abfsConfiguration,\n-                             final String sslProviderName) {\n+      final String sslProviderName) {\n+\n     StringBuilder sb = new StringBuilder();\n-    sb.append(\"(JavaJRE \");\n+", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDIyMDEwOQ=="}, "originalCommit": {"oid": "322f778ac20dd3f1b84b66e1265ae1e32507b955"}, "originalPosition": 9}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3647, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}