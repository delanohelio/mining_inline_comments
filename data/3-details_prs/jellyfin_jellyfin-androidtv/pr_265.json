{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY0MzM5NjA5", "number": 265, "title": "Playing Next screen", "bodyText": "This PR removes the \"playing next\" dialog that is shown when the media you're watching is ending and adds a new screen that shows up after the media ended.\nIt looks like this:\n\n\nThe second one is slightly older, I think some small things like margins have changed\nAs you can see the thumbnail for the next playing item is shown with some information (title/description) on the right. On top of the \"box\" is a progress bar that will decrease. When it hits 0 it will play the next item.\nWhy\nI made it because I don't like things showing up on top of my video and this also reduces the mess of the video player code (less refactoring in the future!). I also think a screen like this helps the user to get a moment to get a quick snack or something.\nFuture changes\nIn the future I'd like to add a setting to control how long the \"next up\" screen will be shown (slightly depends on #260). If users want the old behavior we could show a smaller version on top of the video when the setting is set to a negative value. (-5 means \"5 seconds before video ends\" but +5 means \"show for 5 seconds after video ends\")\nThe feature is implemented in a modular way so it can by easily re-used if we change things in the video-player. This is also the reason it calls the API by itself to request item information.", "createdAt": "2020-01-17T22:12:39Z", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/265", "merged": true, "mergeCommit": {"oid": "d5f4e0e9adc8be2f8b099638d913a31e5da3e813"}, "closed": true, "closedAt": "2020-02-18T22:22:29Z", "author": {"login": "nielsvanvelzen"}, "timelineItems": {"totalCount": 32, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcCbCA3ABqjMwMjAxNzgyNjE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcFplITAFqTM2MDcxNzU0Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c10372ea481cb2952fe374eef242133ceacc7a67", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/c10372ea481cb2952fe374eef242133ceacc7a67", "committedDate": "2020-01-23T20:48:13Z", "message": "Fix text overflowing in large descriptions causing the layout to look weird"}, "afterCommit": {"oid": "0e3a42ccbf1e48cd07a7e8653c3b85c0969b0618", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/0e3a42ccbf1e48cd07a7e8653c3b85c0969b0618", "committedDate": "2020-02-08T21:38:49Z", "message": "Fix text overflowing in large descriptions causing the layout to look weird"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0e3a42ccbf1e48cd07a7e8653c3b85c0969b0618", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/0e3a42ccbf1e48cd07a7e8653c3b85c0969b0618", "committedDate": "2020-02-08T21:38:49Z", "message": "Fix text overflowing in large descriptions causing the layout to look weird"}, "afterCommit": {"oid": "9154bea85e1449438c0203c49d5490bd9ad5c058", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/9154bea85e1449438c0203c49d5490bd9ad5c058", "committedDate": "2020-02-13T09:50:10Z", "message": "Fix import"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9154bea85e1449438c0203c49d5490bd9ad5c058", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/9154bea85e1449438c0203c49d5490bd9ad5c058", "committedDate": "2020-02-13T09:50:10Z", "message": "Fix import"}, "afterCommit": {"oid": "3dba76e453614799b30054d4d6024c05ed110155", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/3dba76e453614799b30054d4d6024c05ed110155", "committedDate": "2020-02-13T15:32:23Z", "message": "Add setting to choose timeout"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3dba76e453614799b30054d4d6024c05ed110155", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/3dba76e453614799b30054d4d6024c05ed110155", "committedDate": "2020-02-13T15:32:23Z", "message": "Add setting to choose timeout"}, "afterCommit": {"oid": "7376501b9bd4137031251eabe1dcb9d7e238e8c9", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/7376501b9bd4137031251eabe1dcb9d7e238e8c9", "committedDate": "2020-02-13T18:04:49Z", "message": "Add setting to choose timeout"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5b4c54711e25b9ac70a5064fcd48064fd0e4fa31", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/5b4c54711e25b9ac70a5064fcd48064fd0e4fa31", "committedDate": "2020-02-16T11:43:53Z", "message": "Initial progress"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "35383f8478f326cefb73e95b18de5b0722929d56", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/35383f8478f326cefb73e95b18de5b0722929d56", "committedDate": "2020-02-16T11:43:54Z", "message": "Design update"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e16fae93bea68723081e9429440b0af1ba69400d", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/e16fae93bea68723081e9429440b0af1ba69400d", "committedDate": "2020-02-16T11:43:55Z", "message": "Start on actions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0f8cc87279afc5874b011174c9ce09fa8567bc59", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/0f8cc87279afc5874b011174c9ce09fa8567bc59", "committedDate": "2020-02-16T11:43:55Z", "message": "Rewrite without leanback"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "70db1529b8873956f20ca2005e53c2175dd9d64a", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/70db1529b8873956f20ca2005e53c2175dd9d64a", "committedDate": "2020-02-16T11:43:56Z", "message": "Move content loading to activity"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "374a9a5e574a9a53645bb824f77ad4ac81f2e19b", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/374a9a5e574a9a53645bb824f77ad4ac81f2e19b", "committedDate": "2020-02-16T11:43:57Z", "message": "Initial integration"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "677986912814ab6af3698e133fbb4306226f01f1", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/677986912814ab6af3698e133fbb4306226f01f1", "committedDate": "2020-02-16T11:43:58Z", "message": "Misc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "371d285e3968cd515af671725a54d1a61edc225f", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/371d285e3968cd515af671725a54d1a61edc225f", "committedDate": "2020-02-16T11:43:59Z", "message": "Fix up next not playing video"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "afdc48146ede53d2f6109c8563868703638f589d", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/afdc48146ede53d2f6109c8563868703638f589d", "committedDate": "2020-02-16T11:43:59Z", "message": "Fix hardcoded string"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bde415414d555146e570f304bbe6b8fd3294e57e", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/bde415414d555146e570f304bbe6b8fd3294e57e", "committedDate": "2020-02-16T11:43:59Z", "message": "Log close reason"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7baf50cf4d47739f91d6c75c51e32e808b998b45", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/7baf50cf4d47739f91d6c75c51e32e808b998b45", "committedDate": "2020-02-16T11:44:00Z", "message": "Fix text overflowing in large descriptions causing the layout to look weird"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5b20b49769e829f1b87b6154054196e9bac9eb34", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/5b20b49769e829f1b87b6154054196e9bac9eb34", "committedDate": "2020-02-16T11:44:01Z", "message": "Fix import"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0443d9e5531f966fdd434a026c979a0212d3087b", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/0443d9e5531f966fdd434a026c979a0212d3087b", "committedDate": "2020-02-16T11:44:26Z", "message": "Add setting to choose timeout"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "59a0fd9e6aa55ea07e9bf6f13ce08555a594fc65", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/59a0fd9e6aa55ea07e9bf6f13ce08555a594fc65", "committedDate": "2020-02-16T11:44:27Z", "message": "Convert to constraint layout"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3fd1f9e3e88620c1598fb9550e5ee23102eea9ca", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/3fd1f9e3e88620c1598fb9550e5ee23102eea9ca", "committedDate": "2020-02-16T11:44:28Z", "message": "Use buttons for a better user experience"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9c9986229a065d96869d83972be2257501b193dc", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/9c9986229a065d96869d83972be2257501b193dc", "committedDate": "2020-02-16T11:44:28Z", "message": "Rename from upnext, UpNext and up_next to NextUp and next_up"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "02f7bc0239a2eb17a8d4e2e8dce5c9f21596005c", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/02f7bc0239a2eb17a8d4e2e8dce5c9f21596005c", "committedDate": "2020-02-16T11:44:29Z", "message": "Start on custom button that can show progress"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "408548c5a2ee74be1b4eb6fa8695aa75cebe7dc7", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/408548c5a2ee74be1b4eb6fa8695aa75cebe7dc7", "committedDate": "2020-02-16T12:04:27Z", "message": "Finish progress bar in button"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "96d2f4788c7131d9de882e28d53b7be7b051eed7", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/96d2f4788c7131d9de882e28d53b7be7b051eed7", "committedDate": "2020-02-16T11:31:58Z", "message": "Start on custom button that can show progress"}, "afterCommit": {"oid": "408548c5a2ee74be1b4eb6fa8695aa75cebe7dc7", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/408548c5a2ee74be1b4eb6fa8695aa75cebe7dc7", "committedDate": "2020-02-16T12:04:27Z", "message": "Finish progress bar in button"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "badbd2d532a182ee07ba90a1f403107572c63dba", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/badbd2d532a182ee07ba90a1f403107572c63dba", "committedDate": "2020-02-16T12:08:59Z", "message": "Remove debug code"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU5NDAxNzg2", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/265#pullrequestreview-359401786", "createdAt": "2020-02-16T12:55:25Z", "commit": {"oid": "badbd2d532a182ee07ba90a1f403107572c63dba"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNlQxMjo1NToyNlrOFqTVaw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNlQxMzo1ODo0MVrOFqTlbw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkwMTI5MQ==", "bodyText": "Is that comment really correct?", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/265#discussion_r379901291", "createdAt": "2020-02-16T12:55:26Z", "author": {"login": "AndreasGB"}, "path": "app/src/main/java/org/jellyfin/androidtv/util/apiclient/ApiClientExtensions.kt", "diffHunk": "@@ -27,3 +29,12 @@ suspend fun ApiClient.getUserViews(): ItemsResult? = suspendCoroutine { continua\n \t\toverride fun onError(exception: Exception?) = continuation.resume(null)\n \t})\n }\n+/**\n+ * Adds a coroutine capable version of the \"getNextUpEpisodes\" function", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "badbd2d532a182ee07ba90a1f403107572c63dba"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkwMjE4MQ==", "bodyText": "I would remove the padding here to make it better to fit into other views, who then themselves can decide how to margin it", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/265#discussion_r379902181", "createdAt": "2020-02-16T13:09:13Z", "author": {"login": "AndreasGB"}, "path": "app/src/main/res/layout/fragment_next_up_buttons.xml", "diffHunk": "@@ -0,0 +1,46 @@\n+<?xml version=\"1.0\" encoding=\"utf-8\"?>\n+<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n+    xmlns:tools=\"http://schemas.android.com/tools\"\n+    android:layout_width=\"wrap_content\"\n+    android:layout_height=\"wrap_content\"\n+    android:orientation=\"horizontal\"\n+    android:padding=\"16dp\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "badbd2d532a182ee07ba90a1f403107572c63dba"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkwMjI2MQ==", "bodyText": "Would move this into the Overlay layout", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/265#discussion_r379902261", "createdAt": "2020-02-16T13:11:04Z", "author": {"login": "AndreasGB"}, "path": "app/src/main/res/layout/fragment_next_up.xml", "diffHunk": "@@ -0,0 +1,76 @@\n+<?xml version=\"1.0\" encoding=\"utf-8\"?>\n+<androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n+    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n+    xmlns:tools=\"http://schemas.android.com/tools\"\n+    android:layout_width=\"match_parent\"\n+    android:layout_height=\"match_parent\"\n+    tools:background=\"@drawable/moviebg\">\n+\n+    <!-- Overlay -->\n+    <androidx.constraintlayout.widget.ConstraintLayout\n+        android:id=\"@+id/content\"\n+        android:layout_width=\"match_parent\"\n+        android:layout_height=\"wrap_content\"\n+        android:background=\"@drawable/noise\"\n+        android:orientation=\"horizontal\"\n+        android:padding=\"16dp\"\n+        app:layout_constraintBottom_toBottomOf=\"parent\"\n+        app:layout_constraintEnd_toEndOf=\"parent\"\n+        app:layout_constraintStart_toStartOf=\"parent\">\n+\n+        <ImageView\n+            android:id=\"@+id/image\"\n+            style=\"@style/Widget.Leanback\"\n+            android:layout_width=\"wrap_content\"\n+            android:layout_height=\"175dp\"\n+            android:adjustViewBounds=\"true\"\n+            android:maxWidth=\"400dp\"\n+            app:layout_constraintStart_toStartOf=\"parent\"\n+            app:layout_constraintTop_toTopOf=\"parent\"\n+            app:layout_goneMarginEnd=\"0dp\"\n+            tools:src=\"@drawable/app_logo\" />\n+\n+        <TextView\n+            android:id=\"@+id/nextup\"\n+            style=\"@style/TextAppearance.Leanback.DetailsDescriptionTitle\"\n+            android:layout_width=\"0dp\"\n+            android:layout_height=\"wrap_content\"\n+            android:layout_marginStart=\"16dp\"\n+            android:text=\"@string/lbl_next_up\"\n+            app:layout_constraintEnd_toEndOf=\"parent\"\n+            app:layout_constraintStart_toEndOf=\"@id/image\"\n+            app:layout_constraintTop_toTopOf=\"parent\" />\n+\n+        <TextView\n+            android:id=\"@+id/title\"\n+            style=\"@style/TextAppearance.Leanback.DetailsDescriptionSubtitle\"\n+            android:layout_width=\"0dp\"\n+            android:layout_height=\"wrap_content\"\n+            android:layout_marginStart=\"16dp\"\n+            app:layout_constraintEnd_toEndOf=\"parent\"\n+            app:layout_constraintStart_toEndOf=\"@id/image\"\n+            app:layout_constraintTop_toBottomOf=\"@id/nextup\"\n+            tools:text=\"Episode title\" />\n+\n+        <TextView\n+            android:id=\"@+id/description\"\n+            style=\"@style/TextAppearance.Leanback.DetailsDescriptionBody\"\n+            android:layout_width=\"0dp\"\n+            android:layout_height=\"0dp\"\n+            android:layout_marginStart=\"16dp\"\n+            android:ellipsize=\"end\"\n+            android:maxLines=\"6\"\n+            app:layout_constraintBottom_toBottomOf=\"parent\"\n+            app:layout_constraintEnd_toEndOf=\"parent\"\n+            app:layout_constraintStart_toEndOf=\"@id/image\"\n+            app:layout_constraintTop_toBottomOf=\"@id/title\"\n+            tools:text=\"Episode description\" />\n+    </androidx.constraintlayout.widget.ConstraintLayout>\n+\n+    <org.jellyfin.androidtv.playback.nextup.NextUpButtons", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "badbd2d532a182ee07ba90a1f403107572c63dba"}, "originalPosition": 70}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkwMjI4Mg==", "bodyText": "Would set this to 4 to end above the NextUpButtons", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/265#discussion_r379902282", "createdAt": "2020-02-16T13:11:27Z", "author": {"login": "AndreasGB"}, "path": "app/src/main/res/layout/fragment_next_up.xml", "diffHunk": "@@ -0,0 +1,76 @@\n+<?xml version=\"1.0\" encoding=\"utf-8\"?>\n+<androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n+    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n+    xmlns:tools=\"http://schemas.android.com/tools\"\n+    android:layout_width=\"match_parent\"\n+    android:layout_height=\"match_parent\"\n+    tools:background=\"@drawable/moviebg\">\n+\n+    <!-- Overlay -->\n+    <androidx.constraintlayout.widget.ConstraintLayout\n+        android:id=\"@+id/content\"\n+        android:layout_width=\"match_parent\"\n+        android:layout_height=\"wrap_content\"\n+        android:background=\"@drawable/noise\"\n+        android:orientation=\"horizontal\"\n+        android:padding=\"16dp\"\n+        app:layout_constraintBottom_toBottomOf=\"parent\"\n+        app:layout_constraintEnd_toEndOf=\"parent\"\n+        app:layout_constraintStart_toStartOf=\"parent\">\n+\n+        <ImageView\n+            android:id=\"@+id/image\"\n+            style=\"@style/Widget.Leanback\"\n+            android:layout_width=\"wrap_content\"\n+            android:layout_height=\"175dp\"\n+            android:adjustViewBounds=\"true\"\n+            android:maxWidth=\"400dp\"\n+            app:layout_constraintStart_toStartOf=\"parent\"\n+            app:layout_constraintTop_toTopOf=\"parent\"\n+            app:layout_goneMarginEnd=\"0dp\"\n+            tools:src=\"@drawable/app_logo\" />\n+\n+        <TextView\n+            android:id=\"@+id/nextup\"\n+            style=\"@style/TextAppearance.Leanback.DetailsDescriptionTitle\"\n+            android:layout_width=\"0dp\"\n+            android:layout_height=\"wrap_content\"\n+            android:layout_marginStart=\"16dp\"\n+            android:text=\"@string/lbl_next_up\"\n+            app:layout_constraintEnd_toEndOf=\"parent\"\n+            app:layout_constraintStart_toEndOf=\"@id/image\"\n+            app:layout_constraintTop_toTopOf=\"parent\" />\n+\n+        <TextView\n+            android:id=\"@+id/title\"\n+            style=\"@style/TextAppearance.Leanback.DetailsDescriptionSubtitle\"\n+            android:layout_width=\"0dp\"\n+            android:layout_height=\"wrap_content\"\n+            android:layout_marginStart=\"16dp\"\n+            app:layout_constraintEnd_toEndOf=\"parent\"\n+            app:layout_constraintStart_toEndOf=\"@id/image\"\n+            app:layout_constraintTop_toBottomOf=\"@id/nextup\"\n+            tools:text=\"Episode title\" />\n+\n+        <TextView\n+            android:id=\"@+id/description\"\n+            style=\"@style/TextAppearance.Leanback.DetailsDescriptionBody\"\n+            android:layout_width=\"0dp\"\n+            android:layout_height=\"0dp\"\n+            android:layout_marginStart=\"16dp\"\n+            android:ellipsize=\"end\"\n+            android:maxLines=\"6\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "badbd2d532a182ee07ba90a1f403107572c63dba"}, "originalPosition": 62}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkwMjMwNw==", "bodyText": "app:layout_constraintBottom_toTopOf=\"@id/fragment_next_up_buttons\" to avoid underflowing the buttons with text", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/265#discussion_r379902307", "createdAt": "2020-02-16T13:11:52Z", "author": {"login": "AndreasGB"}, "path": "app/src/main/res/layout/fragment_next_up.xml", "diffHunk": "@@ -0,0 +1,76 @@\n+<?xml version=\"1.0\" encoding=\"utf-8\"?>\n+<androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n+    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n+    xmlns:tools=\"http://schemas.android.com/tools\"\n+    android:layout_width=\"match_parent\"\n+    android:layout_height=\"match_parent\"\n+    tools:background=\"@drawable/moviebg\">\n+\n+    <!-- Overlay -->\n+    <androidx.constraintlayout.widget.ConstraintLayout\n+        android:id=\"@+id/content\"\n+        android:layout_width=\"match_parent\"\n+        android:layout_height=\"wrap_content\"\n+        android:background=\"@drawable/noise\"\n+        android:orientation=\"horizontal\"\n+        android:padding=\"16dp\"\n+        app:layout_constraintBottom_toBottomOf=\"parent\"\n+        app:layout_constraintEnd_toEndOf=\"parent\"\n+        app:layout_constraintStart_toStartOf=\"parent\">\n+\n+        <ImageView\n+            android:id=\"@+id/image\"\n+            style=\"@style/Widget.Leanback\"\n+            android:layout_width=\"wrap_content\"\n+            android:layout_height=\"175dp\"\n+            android:adjustViewBounds=\"true\"\n+            android:maxWidth=\"400dp\"\n+            app:layout_constraintStart_toStartOf=\"parent\"\n+            app:layout_constraintTop_toTopOf=\"parent\"\n+            app:layout_goneMarginEnd=\"0dp\"\n+            tools:src=\"@drawable/app_logo\" />\n+\n+        <TextView\n+            android:id=\"@+id/nextup\"\n+            style=\"@style/TextAppearance.Leanback.DetailsDescriptionTitle\"\n+            android:layout_width=\"0dp\"\n+            android:layout_height=\"wrap_content\"\n+            android:layout_marginStart=\"16dp\"\n+            android:text=\"@string/lbl_next_up\"\n+            app:layout_constraintEnd_toEndOf=\"parent\"\n+            app:layout_constraintStart_toEndOf=\"@id/image\"\n+            app:layout_constraintTop_toTopOf=\"parent\" />\n+\n+        <TextView\n+            android:id=\"@+id/title\"\n+            style=\"@style/TextAppearance.Leanback.DetailsDescriptionSubtitle\"\n+            android:layout_width=\"0dp\"\n+            android:layout_height=\"wrap_content\"\n+            android:layout_marginStart=\"16dp\"\n+            app:layout_constraintEnd_toEndOf=\"parent\"\n+            app:layout_constraintStart_toEndOf=\"@id/image\"\n+            app:layout_constraintTop_toBottomOf=\"@id/nextup\"\n+            tools:text=\"Episode title\" />\n+\n+        <TextView\n+            android:id=\"@+id/description\"\n+            style=\"@style/TextAppearance.Leanback.DetailsDescriptionBody\"\n+            android:layout_width=\"0dp\"\n+            android:layout_height=\"0dp\"\n+            android:layout_marginStart=\"16dp\"\n+            android:ellipsize=\"end\"\n+            android:maxLines=\"6\"\n+            app:layout_constraintBottom_toBottomOf=\"parent\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "badbd2d532a182ee07ba90a1f403107572c63dba"}, "originalPosition": 63}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkwMzU2OA==", "bodyText": "Maybe log an error in the null case and finish()", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/265#discussion_r379903568", "createdAt": "2020-02-16T13:31:31Z", "author": {"login": "AndreasGB"}, "path": "app/src/main/java/org/jellyfin/androidtv/playback/nextup/NextUpActivity.kt", "diffHunk": "@@ -0,0 +1,65 @@\n+package org.jellyfin.androidtv.playback.nextup\n+\n+import android.os.Bundle\n+import android.util.Log\n+import androidx.fragment.app.FragmentActivity\n+import androidx.leanback.app.BackgroundManager\n+import com.squareup.picasso.Picasso\n+import kotlinx.coroutines.Dispatchers\n+import kotlinx.coroutines.GlobalScope\n+import kotlinx.coroutines.launch\n+import kotlinx.coroutines.withContext\n+import org.acra.ACRA.LOG_TAG\n+import org.jellyfin.androidtv.TvApp\n+import org.jellyfin.androidtv.util.apiclient.getItem\n+import org.jellyfin.apiclient.model.dto.ImageOptions\n+\n+class NextUpActivity : FragmentActivity() {\n+\tprivate lateinit var fragment: NextUpFragment\n+\n+\toverride fun onCreate(savedInstanceState: Bundle?) {\n+\t\tsuper.onCreate(savedInstanceState)\n+\n+\t\tval id = intent.getStringExtra(\"id\")\n+\t\tif (id == null) {\n+\t\t\tLog.e(LOG_TAG, \"No id found in bundle for NextUpActivity.\")\n+\t\t\tfinish()\n+\t\t}\n+\n+\t\t// Add background manager\n+\t\tBackgroundManager.getInstance(this).attach(window)\n+\n+\t\t// Load item info\n+\t\tGlobalScope.launch(Dispatchers.Main) {\n+\t\t\tval data = loadItemData(id) ?: return@launch", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "badbd2d532a182ee07ba90a1f403107572c63dba"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkwNDQ3Nw==", "bodyText": "This is not present in the current version of the overlay, I think this file is broken. This ProgressBar was removed in ed01855#diff-92d250046e8bf52735338f876b5b0009", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/265#discussion_r379904477", "createdAt": "2020-02-16T13:45:36Z", "author": {"login": "AndreasGB"}, "path": "app/src/main/res/layout/vlc_player_interface.xml", "diffHunk": "@@ -58,114 +58,170 @@\n \n     </FrameLayout>\n \n-    <include\n-        android:id=\"@+id/smNextUpPanel\"\n-        layout=\"@layout/small_upnext_panel\"\n-        android:layout_width=\"match_parent\"\n-        android:layout_height=\"75dp\"\n-        android:layout_gravity=\"bottom\" />\n+\n+    <ProgressBar", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "badbd2d532a182ee07ba90a1f403107572c63dba"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkwNDg4Ng==", "bodyText": "This is probably a little bit nit-picky, but do we actually need to set max on every tick?", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/265#discussion_r379904886", "createdAt": "2020-02-16T13:51:05Z", "author": {"login": "AndreasGB"}, "path": "app/src/main/java/org/jellyfin/androidtv/playback/nextup/NextUpButtons.kt", "diffHunk": "@@ -0,0 +1,66 @@\n+package org.jellyfin.androidtv.playback.nextup\n+\n+import android.content.Context\n+import android.os.CountDownTimer\n+import android.util.AttributeSet\n+import android.view.View\n+import android.widget.FrameLayout\n+import kotlinx.android.synthetic.main.fragment_next_up_buttons.view.*\n+import org.jellyfin.androidtv.R\n+import org.jellyfin.androidtv.TvApp\n+\n+class NextUpButtons(context: Context, attrs: AttributeSet? = null, defStyleAttr: Int = 0, defStyle: Int = 0) : FrameLayout(context, attrs, defStyleAttr, defStyle) {\n+\tconstructor(context: Context, attrs: AttributeSet) : this(context, attrs, 0, 0)\n+\n+\tprivate var countdownTimer: CountDownTimer? = null\n+\tprivate val view = View.inflate(context, R.layout.fragment_next_up_buttons, null)\n+\n+\tinit {\n+\t\taddView(view)\n+\t\tview.fragment_next_up_buttons_play_next.apply {\n+\t\t\t// Stop timer when unfocused\n+\t\t\tsetOnFocusChangeListener { _, focused -> if (!focused) stopTimer() }\n+\n+\t\t\t// Add initial focus\n+\t\t\trequestFocus()\n+\t\t}\n+\t}\n+\n+\tfun startTimer() {\n+\t\tval duration = TvApp.getApplication().userPreferences.nextUpTimeout.toLong()\n+\n+\t\t// Cancel current timer if one is already set\n+\t\tcountdownTimer?.cancel()\n+\n+\t\t// Create timer\n+\t\tcountdownTimer = object : CountDownTimer(duration, 1) {\n+\t\t\toverride fun onTick(millisUntilFinished: Long) {\n+\t\t\t\tfragment_next_up_buttons_play_next_progress.max = duration.toInt()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "badbd2d532a182ee07ba90a1f403107572c63dba"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkwNTM5MQ==", "bodyText": "We could also reset the progressbar here, looks a bit strange when it's hanging halfway there", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/265#discussion_r379905391", "createdAt": "2020-02-16T13:58:41Z", "author": {"login": "AndreasGB"}, "path": "app/src/main/java/org/jellyfin/androidtv/playback/nextup/NextUpButtons.kt", "diffHunk": "@@ -0,0 +1,66 @@\n+package org.jellyfin.androidtv.playback.nextup\n+\n+import android.content.Context\n+import android.os.CountDownTimer\n+import android.util.AttributeSet\n+import android.view.View\n+import android.widget.FrameLayout\n+import kotlinx.android.synthetic.main.fragment_next_up_buttons.view.*\n+import org.jellyfin.androidtv.R\n+import org.jellyfin.androidtv.TvApp\n+\n+class NextUpButtons(context: Context, attrs: AttributeSet? = null, defStyleAttr: Int = 0, defStyle: Int = 0) : FrameLayout(context, attrs, defStyleAttr, defStyle) {\n+\tconstructor(context: Context, attrs: AttributeSet) : this(context, attrs, 0, 0)\n+\n+\tprivate var countdownTimer: CountDownTimer? = null\n+\tprivate val view = View.inflate(context, R.layout.fragment_next_up_buttons, null)\n+\n+\tinit {\n+\t\taddView(view)\n+\t\tview.fragment_next_up_buttons_play_next.apply {\n+\t\t\t// Stop timer when unfocused\n+\t\t\tsetOnFocusChangeListener { _, focused -> if (!focused) stopTimer() }\n+\n+\t\t\t// Add initial focus\n+\t\t\trequestFocus()\n+\t\t}\n+\t}\n+\n+\tfun startTimer() {\n+\t\tval duration = TvApp.getApplication().userPreferences.nextUpTimeout.toLong()\n+\n+\t\t// Cancel current timer if one is already set\n+\t\tcountdownTimer?.cancel()\n+\n+\t\t// Create timer\n+\t\tcountdownTimer = object : CountDownTimer(duration, 1) {\n+\t\t\toverride fun onTick(millisUntilFinished: Long) {\n+\t\t\t\tfragment_next_up_buttons_play_next_progress.max = duration.toInt()\n+\t\t\t\tfragment_next_up_buttons_play_next_progress.progress = (duration - millisUntilFinished).toInt()\n+\t\t\t}\n+\n+\t\t\toverride fun onFinish() {\n+\t\t\t\t// Perform a click so the event handler will activate\n+\t\t\t\tview.fragment_next_up_buttons_play_next.performClick()\n+\t\t\t}\n+\t\t}.start()\n+\t}\n+\n+\tfun stopTimer() {\n+\t\tcountdownTimer?.cancel()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "badbd2d532a182ee07ba90a1f403107572c63dba"}, "originalPosition": 50}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c7bb1a9aaaa975f565b966f4f44a482313da3669", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/c7bb1a9aaaa975f565b966f4f44a482313da3669", "committedDate": "2020-02-16T14:33:31Z", "message": "Review changes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU5NDA4MDQ3", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/265#pullrequestreview-359408047", "createdAt": "2020-02-16T14:41:58Z", "commit": {"oid": "c7bb1a9aaaa975f565b966f4f44a482313da3669"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYwMDkzMzE2", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/265#pullrequestreview-360093316", "createdAt": "2020-02-18T06:24:24Z", "commit": {"oid": "c7bb1a9aaaa975f565b966f4f44a482313da3669"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQwNjoyNDoyNFrOFq2Qgg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQwNjoyNDoyNFrOFq2Qgg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDQ3MzQ3NA==", "bodyText": "Should we assign these color values to resources to allow for theming in the future?", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/265#discussion_r380473474", "createdAt": "2020-02-18T06:24:24Z", "author": {"login": "thornbill"}, "path": "app/src/main/res/drawable/button_default_highlight.xml", "diffHunk": "@@ -0,0 +1,6 @@\n+<?xml version=\"1.0\" encoding=\"utf-8\"?>\n+<shape xmlns:android=\"http://schemas.android.com/apk/res/android\"\n+    android:shape=\"rectangle\">\n+    <corners android:radius=\"3dp\" />\n+    <solid android:color=\"#E6CCCCCC\" />", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c7bb1a9aaaa975f565b966f4f44a482313da3669"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fb3d08baf03c31482b3b6cec5ece0299232ce1da", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/fb3d08baf03c31482b3b6cec5ece0299232ce1da", "committedDate": "2020-02-18T08:43:23Z", "message": "Move colors to colors.xml"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYwNjIzNzA4", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/265#pullrequestreview-360623708", "createdAt": "2020-02-18T19:46:58Z", "commit": {"oid": "fb3d08baf03c31482b3b6cec5ece0299232ce1da"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d412757272ad72ae4f0d727d97c6a5fdea3b4fd9", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/d412757272ad72ae4f0d727d97c6a5fdea3b4fd9", "committedDate": "2020-02-18T21:08:04Z", "message": "Increase padding to prevent overscan issues"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYwNzE3NTQ2", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/265#pullrequestreview-360717546", "createdAt": "2020-02-18T22:22:22Z", "commit": {"oid": "d412757272ad72ae4f0d727d97c6a5fdea3b4fd9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4355, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}