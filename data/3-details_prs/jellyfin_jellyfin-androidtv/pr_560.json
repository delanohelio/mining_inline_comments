{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg2MzE2ODEw", "number": 560, "title": "Add Koin for dependency injection", "bodyText": "Changes\nAdds Koin for dependency injection and migrates some global app state to using it instead of referencing TvApp.\nIssues\nN/A", "createdAt": "2020-09-14T04:23:56Z", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/560", "merged": true, "mergeCommit": {"oid": "d308991090d87d75fa233b91a7d62bb6c5e3223e"}, "closed": true, "closedAt": "2020-09-15T19:19:32Z", "author": {"login": "thornbill"}, "timelineItems": {"totalCount": 18, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdI0_pqgH2gAyNDg2MzE2ODEwOjAwY2UxNDJmZWFlODUwYWI3NzkwNmQxODIzMDIyMWU4Y2NhMDU5M2E=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdJM037AFqTQ4ODk5NzkxMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "00ce142feae850ab77906d18230221e8cca0593a", "author": {"user": {"login": "thornbill", "name": "Bill Thornton"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/00ce142feae850ab77906d18230221e8cca0593a", "committedDate": "2020-09-14T15:33:13Z", "message": "Add koin and use di for serializer"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "57ac78ae9089dbba781fc5a6d7444f9588b2792b", "author": {"user": {"login": "thornbill", "name": "Bill Thornton"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/57ac78ae9089dbba781fc5a6d7444f9588b2792b", "committedDate": "2020-09-14T15:33:14Z", "message": "Move Jellyfin instance to Koin"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "63948c5c22d7bba34a958e7d5b6fe539ad307aee", "author": {"user": {"login": "thornbill", "name": "Bill Thornton"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/63948c5c22d7bba34a958e7d5b6fe539ad307aee", "committedDate": "2020-09-14T15:39:17Z", "message": "Move apiclient instance to koin"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5576e86e0cca512ebb4ed68e4500187fb626b31c", "author": {"user": {"login": "thornbill", "name": "Bill Thornton"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/5576e86e0cca512ebb4ed68e4500187fb626b31c", "committedDate": "2020-09-14T15:40:25Z", "message": "Move preferences to koin"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "560f1e1394dd2d099a1bccb7fe7bbd0c4670780d", "author": {"user": {"login": "thornbill", "name": "Bill Thornton"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/560f1e1394dd2d099a1bccb7fe7bbd0c4670780d", "committedDate": "2020-09-14T15:44:48Z", "message": "Remove unused imports"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6925390599ff5aa6dc8447790a960a3e030762a9", "author": {"user": {"login": "thornbill", "name": "Bill Thornton"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/6925390599ff5aa6dc8447790a960a3e030762a9", "committedDate": "2020-09-14T15:44:49Z", "message": "Move playback manager to koin"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "637a17a76c4c2a995bccf342eedc71245d37ac70", "author": {"user": {"login": "thornbill", "name": "Bill Thornton"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/637a17a76c4c2a995bccf342eedc71245d37ac70", "committedDate": "2020-09-14T15:44:49Z", "message": "Remove unused imports"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "acdaa29b20aa3a3f423e4a935ee4d9faab9ec1d4", "author": {"user": {"login": "thornbill", "name": "Bill Thornton"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/acdaa29b20aa3a3f423e4a935ee4d9faab9ec1d4", "committedDate": "2020-09-14T15:44:49Z", "message": "Use lazy injection"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fc273d1663bb9af55e4150f20306ff3019c721e5", "author": {"user": {"login": "thornbill", "name": "Bill Thornton"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/fc273d1663bb9af55e4150f20306ff3019c721e5", "committedDate": "2020-09-14T15:45:37Z", "message": "Use lazy injection"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "795c88283dbfaf917cd34efd6703268ef4bc544f", "author": {"user": {"login": "thornbill", "name": "Bill Thornton"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/795c88283dbfaf917cd34efd6703268ef4bc544f", "committedDate": "2020-09-14T15:52:15Z", "message": "Remove unused imports"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4d702d278a435da67910a8fdbade7489546aa552", "author": {"user": {"login": "thornbill", "name": "Bill Thornton"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/4d702d278a435da67910a8fdbade7489546aa552", "committedDate": "2020-09-14T05:38:51Z", "message": "Use lazy injection"}, "afterCommit": {"oid": "795c88283dbfaf917cd34efd6703268ef4bc544f", "author": {"user": {"login": "thornbill", "name": "Bill Thornton"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/795c88283dbfaf917cd34efd6703268ef4bc544f", "committedDate": "2020-09-14T15:52:15Z", "message": "Remove unused imports"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "382c1b27fcb583c394b08eedc1baf4bcf7c547de", "author": {"user": {"login": "thornbill", "name": "Bill Thornton"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/382c1b27fcb583c394b08eedc1baf4bcf7c547de", "committedDate": "2020-09-14T17:57:03Z", "message": "Remove unused app instance"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8f6307ad06c460f46528282246e3885cf617c93f", "author": {"user": {"login": "thornbill", "name": "Bill Thornton"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/8f6307ad06c460f46528282246e3885cf617c93f", "committedDate": "2020-09-14T18:47:00Z", "message": "Fix function parameter alignment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "82ac4a136cdcbc52954d97dcc2ad02dc6f014769", "author": {"user": {"login": "thornbill", "name": "Bill Thornton"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/82ac4a136cdcbc52954d97dcc2ad02dc6f014769", "committedDate": "2020-09-14T18:52:53Z", "message": "Fix indentation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg4NzU5MjM0", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/560#pullrequestreview-488759234", "createdAt": "2020-09-15T14:42:26Z", "commit": {"oid": "82ac4a136cdcbc52954d97dcc2ad02dc6f014769"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQxNDo0MjoyNlrOHSFW-A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQxNDo0NzoxM1rOHSFmSw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODcyNDIxNg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            class ChannelManager: KoinComponent {\n          \n          \n            \n            class ChannelManager : KoinComponent {", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/560#discussion_r488724216", "createdAt": "2020-09-15T14:42:26Z", "author": {"login": "nielsvanvelzen"}, "path": "app/src/main/java/org/jellyfin/androidtv/integration/ChannelManager.kt", "diffHunk": "@@ -19,18 +23,21 @@ import org.jellyfin.androidtv.util.ImageUtils\n import org.jellyfin.androidtv.util.apiclient.getNextUpEpisodes\n import org.jellyfin.androidtv.util.apiclient.getUserViews\n import org.jellyfin.androidtv.util.dp\n+import org.jellyfin.apiclient.interaction.ApiClient\n import org.jellyfin.apiclient.model.drawing.ImageFormat\n import org.jellyfin.apiclient.model.dto.BaseItemDto\n import org.jellyfin.apiclient.model.dto.ImageOptions\n import org.jellyfin.apiclient.model.querying.ItemFields\n import org.jellyfin.apiclient.model.querying.NextUpQuery\n+import org.koin.core.KoinComponent\n+import org.koin.core.inject\n \n /**\n  * Manages channels on the android tv home screen\n  *\n  * More info: https://developer.android.com/training/tv/discovery/recommendations-channel\n  */\n-class ChannelManager {\n+class ChannelManager: KoinComponent {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "82ac4a136cdcbc52954d97dcc2ad02dc6f014769"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODcyODEzOQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            object ThemeManager: KoinComponent {\n          \n          \n            \n            object ThemeManager : KoinComponent {", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/560#discussion_r488728139", "createdAt": "2020-09-15T14:47:13Z", "author": {"login": "nielsvanvelzen"}, "path": "app/src/main/java/org/jellyfin/androidtv/ui/presentation/ThemeManager.kt", "diffHunk": "@@ -2,15 +2,16 @@ package org.jellyfin.androidtv.ui.presentation\n \n import android.app.Activity\n import org.jellyfin.androidtv.R\n-import org.jellyfin.androidtv.TvApp\n import org.jellyfin.androidtv.preference.UserPreferences\n import org.jellyfin.androidtv.preference.constant.AppTheme\n import org.jellyfin.androidtv.ui.preference.PreferencesActivity\n+import org.koin.core.KoinComponent\n+import org.koin.core.get\n import java.util.*\n \n-object ThemeManager {\n+object ThemeManager: KoinComponent {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "82ac4a136cdcbc52954d97dcc2ad02dc6f014769"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2b10c69bf9714297facb43b3391cdc4f554155b5", "author": {"user": {"login": "thornbill", "name": "Bill Thornton"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/2b10c69bf9714297facb43b3391cdc4f554155b5", "committedDate": "2020-09-15T18:53:39Z", "message": "Fix spacing for kotlin files\n\nCo-authored-by: Niels van Velzen <nielsvanvelzen@users.noreply.github.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg4OTc3NDc5", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/560#pullrequestreview-488977479", "createdAt": "2020-09-15T18:56:57Z", "commit": {"oid": "2b10c69bf9714297facb43b3391cdc4f554155b5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQxODo1Njo1N1rOHSP1xA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQxODo1Njo1N1rOHSP1xA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODg5NTk0MA==", "bodyText": "Codacy found an issue: LabeledExpression - [item] at /src/app/src/main/java/org/jellyfin/androidtv/ui/playback/nextup/NextUpActivity.kt:62:39", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/560#discussion_r488895940", "createdAt": "2020-09-15T18:56:57Z", "author": {"login": "jellyfin-bot"}, "path": "app/src/main/java/org/jellyfin/androidtv/ui/playback/nextup/NextUpActivity.kt", "diffHunk": "@@ -56,11 +59,11 @@ class NextUpActivity : FragmentActivity() {\n \t}\n \n \tprivate suspend fun loadItemData(id: String) = withContext(Dispatchers.IO) {\n-\t\tval item = TvApp.getApplication().apiClient.getItem(id) ?: return@withContext null\n+\t\tval item = apiClient.getItem(id) ?: return@withContext null", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2b10c69bf9714297facb43b3391cdc4f554155b5"}, "originalPosition": 24}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg4OTk3OTEz", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/560#pullrequestreview-488997913", "createdAt": "2020-09-15T19:19:10Z", "commit": {"oid": "2b10c69bf9714297facb43b3391cdc4f554155b5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4178, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}