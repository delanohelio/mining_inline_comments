{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE3MDA4MDU4", "number": 616, "title": "Re-add \"Ends at\" time to playback control overlay", "bodyText": "Changes\nAdd the \"Ends At: ####\" back to the control overlay\nIssues", "createdAt": "2020-11-06T22:24:17Z", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/616", "merged": true, "mergeCommit": {"oid": "3a4716afc9ff2d563a2508a7f0d5bb04710db90b"}, "closed": true, "closedAt": "2020-11-12T20:08:39Z", "author": {"login": "MrChip53"}, "timelineItems": {"totalCount": 18, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdaNmj2gH2gAyNTE3MDA4MDU4OmIxMGQ5MDc3M2RmZTc1YTNkNDk0MzBiYmJkNzllYWQzMTM0YTk0MmI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdb4NHaAFqTUyOTQ0OTYyOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b10d90773dfe75a3d49430bbbd79ead3134a942b", "author": {"user": {"login": "MrChip53", "name": "Chris Simoni"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/b10d90773dfe75a3d49430bbbd79ead3134a942b", "committedDate": "2020-11-07T15:50:09Z", "message": "Re-add \"Ends at\" time to playback control overlay"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8fb0b69bb83df910c1c63365ea08bc7e510d18b0", "author": {"user": {"login": "MrChip53", "name": "Chris Simoni"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/8fb0b69bb83df910c1c63365ea08bc7e510d18b0", "committedDate": "2020-11-06T22:23:36Z", "message": "Re-add \"Ends at\" time to playback control overlay"}, "afterCommit": {"oid": "b10d90773dfe75a3d49430bbbd79ead3134a942b", "author": {"user": {"login": "MrChip53", "name": "Chris Simoni"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/b10d90773dfe75a3d49430bbbd79ead3134a942b", "committedDate": "2020-11-07T15:50:09Z", "message": "Re-add \"Ends at\" time to playback control overlay"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8e5db7a1d194971eceb3793d5a970c8927db21bd", "author": {"user": {"login": "MrChip53", "name": "Chris Simoni"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/8e5db7a1d194971eceb3793d5a970c8927db21bd", "committedDate": "2020-11-07T16:13:06Z", "message": "Codacy"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9ff8654f43903330052a1135e77e3efeeaa7c100", "author": {"user": {"login": "MrChip53", "name": "Chris Simoni"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/9ff8654f43903330052a1135e77e3efeeaa7c100", "committedDate": "2020-11-07T19:43:46Z", "message": "Fix time displayed; moved TextView creation to onCreate; set default text of TextView to \"Loading...\""}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f8a964d53225e7669772303de4428c567f8c4d39", "author": {"user": {"login": "MrChip53", "name": "Chris Simoni"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/f8a964d53225e7669772303de4428c567f8c4d39", "committedDate": "2020-11-07T19:54:34Z", "message": "Add string entry for \"Ends at\"; Null checks on context"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI1Nzg4MzUx", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/616#pullrequestreview-525788351", "createdAt": "2020-11-08T09:06:19Z", "commit": {"oid": "f8a964d53225e7669772303de4428c567f8c4d39"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOFQwOTowNjoxOVrOHvP_Nw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOFQwOTowNjoxOVrOHvP_Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTMwNzA2Mw==", "bodyText": "Can we use playbackControlsTimeStyle here?\nhttps://cs.android.com/androidx/platform/frameworks/support/+/androidx-master-dev:leanback/leanback/src/main/res/layout/lb_playback_transport_controls_row.xml;l=113", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/616#discussion_r519307063", "createdAt": "2020-11-08T09:06:19Z", "author": {"login": "nielsvanvelzen"}, "path": "app/src/main/java/org/jellyfin/androidtv/ui/playback/overlay/CustomPlaybackTransportControlGlue.java", "diffHunk": "@@ -59,6 +70,67 @@\n         initActions(context);\n     }\n \n+    @Override\n+    protected PlaybackRowPresenter onCreateRowPresenter() {\n+        final AbstractDetailsDescriptionPresenter detailsPresenter =\n+                new AbstractDetailsDescriptionPresenter() {\n+                    @Override\n+                    protected void onBindDescription(ViewHolder\n+                                                             viewHolder, Object obj) {\n+                        PlaybackTransportControlGlue glue = (PlaybackTransportControlGlue) obj;\n+                        viewHolder.getTitle().setText(glue.getTitle());\n+                        viewHolder.getSubtitle().setText(glue.getSubtitle());\n+                    }\n+                };\n+\n+        PlaybackTransportRowPresenter rowPresenter = new PlaybackTransportRowPresenter() {\n+            @Override\n+            protected RowPresenter.ViewHolder createRowViewHolder(ViewGroup parent) {\n+                RowPresenter.ViewHolder vh = super.createRowViewHolder(parent);\n+                Context context = getContext();\n+\n+                if (context != null) {\n+                    mEndsText = new TextView(context);\n+                    mEndsText.setTextAppearance(context, R.style.PlaybackControlsText);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f8a964d53225e7669772303de4428c567f8c4d39"}, "originalPosition": 59}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e6d7a43e2cc7ee67c0fb8d341f90620f1ce9204b", "author": {"user": {"login": "MrChip53", "name": "Chris Simoni"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/e6d7a43e2cc7ee67c0fb8d341f90620f1ce9204b", "committedDate": "2020-11-08T22:14:50Z", "message": "Use leanback style and initialize mEndsText earlier with proper displayed text"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "307f7962cae6a98a8ef8b7345d2f565ef466116b", "author": {"user": {"login": "MrChip53", "name": "Chris Simoni"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/307f7962cae6a98a8ef8b7345d2f565ef466116b", "committedDate": "2020-11-08T22:20:59Z", "message": "Null check mEndsText before adding to playback controls"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "69094ffe4cb56a77e51f5902009520bdfbe74519", "author": {"user": {"login": "MrChip53", "name": "Chris Simoni"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/69094ffe4cb56a77e51f5902009520bdfbe74519", "committedDate": "2020-11-09T02:33:06Z", "message": "Move TextView initialization back to createRowViewHolder in CustomPlaybackTransportControlGlue.java"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI2Mzk2NzUz", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/616#pullrequestreview-526396753", "createdAt": "2020-11-09T15:53:56Z", "commit": {"oid": "69094ffe4cb56a77e51f5902009520bdfbe74519"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQxNTo1Mzo1NlrOHv1T_A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQxNTo1Nzo1OVrOHv1hQg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTkxODU4OA==", "bodyText": "I think the implementation of this method could be added to the existing updatePlayState method.", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/616#discussion_r519918588", "createdAt": "2020-11-09T15:53:56Z", "author": {"login": "nielsvanvelzen"}, "path": "app/src/main/java/org/jellyfin/androidtv/ui/playback/overlay/CustomPlaybackTransportControlGlue.java", "diffHunk": "@@ -197,6 +273,15 @@ public void onCustomActionClicked(Action action, View view) {\n         }\n     }\n \n+    public void setEndTime() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "69094ffe4cb56a77e51f5902009520bdfbe74519"}, "originalPosition": 135}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTkxOTc2Mg==", "bodyText": "These null checks are unnecessary", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/616#discussion_r519919762", "createdAt": "2020-11-09T15:55:05Z", "author": {"login": "nielsvanvelzen"}, "path": "app/src/main/java/org/jellyfin/androidtv/ui/playback/overlay/CustomPlaybackTransportControlGlue.java", "diffHunk": "@@ -197,6 +273,15 @@ public void onCustomActionClicked(Action action, View view) {\n         }\n     }\n \n+    public void setEndTime() {\n+        long msLeft = playerAdapter.getDuration() - playerAdapter.getCurrentPosition();\n+        Calendar ends = Calendar.getInstance();\n+        ends.setTimeInMillis(ends.getTimeInMillis() + msLeft);\n+        Context context = getContext();\n+        if (context != null && mEndsText != null)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "69094ffe4cb56a77e51f5902009520bdfbe74519"}, "originalPosition": 140}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTkyMDkxMg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                //Custom views\n          \n          \n            \n                // Injected views", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/616#discussion_r519920912", "createdAt": "2020-11-09T15:56:32Z", "author": {"login": "nielsvanvelzen"}, "path": "app/src/main/java/org/jellyfin/androidtv/ui/playback/overlay/CustomPlaybackTransportControlGlue.java", "diffHunk": "@@ -51,6 +62,9 @@\n     private ArrayObjectAdapter primaryActionsAdapter;\n     private ArrayObjectAdapter secondaryActionsAdapter;\n \n+    //Custom views", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "69094ffe4cb56a77e51f5902009520bdfbe74519"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTkyMTk4Ng==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            Context context = getContext();\n          \n          \n            \n                            Context context = parent.getContext();\n          \n      \n    \n    \n  \n\nThat one should always be not-null", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/616#discussion_r519921986", "createdAt": "2020-11-09T15:57:59Z", "author": {"login": "nielsvanvelzen"}, "path": "app/src/main/java/org/jellyfin/androidtv/ui/playback/overlay/CustomPlaybackTransportControlGlue.java", "diffHunk": "@@ -59,6 +73,68 @@\n         initActions(context);\n     }\n \n+    @Override\n+    protected PlaybackRowPresenter onCreateRowPresenter() {\n+        final AbstractDetailsDescriptionPresenter detailsPresenter =\n+                new AbstractDetailsDescriptionPresenter() {\n+                    @Override\n+                    protected void onBindDescription(ViewHolder\n+                                                             viewHolder, Object obj) {\n+                        PlaybackTransportControlGlue glue = (PlaybackTransportControlGlue) obj;\n+                        viewHolder.getTitle().setText(glue.getTitle());\n+                        viewHolder.getSubtitle().setText(glue.getSubtitle());\n+                    }\n+                };\n+\n+        PlaybackTransportRowPresenter rowPresenter = new PlaybackTransportRowPresenter() {\n+            @Override\n+            protected RowPresenter.ViewHolder createRowViewHolder(ViewGroup parent) {\n+                RowPresenter.ViewHolder vh = super.createRowViewHolder(parent);\n+                Context context = getContext();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "69094ffe4cb56a77e51f5902009520bdfbe74519"}, "originalPosition": 65}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "726632988cea6abd996beac771080523d2f55bf1", "author": {"user": {"login": "MrChip53", "name": "Chris Simoni"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/726632988cea6abd996beac771080523d2f55bf1", "committedDate": "2020-11-10T04:54:30Z", "message": "Address comments from review; change visibility accordingly in handler"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "361771836a62aabaec1d94d2c3e621f0bce80ef8", "author": {"user": {"login": "MrChip53", "name": "Chris Simoni"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/361771836a62aabaec1d94d2c3e621f0bce80ef8", "committedDate": "2020-11-10T05:00:21Z", "message": "Explicit scopes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5664e84f591434becb29fd5da976a0c43dc0fd79", "author": {"user": {"login": "MrChip53", "name": "Chris Simoni"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/5664e84f591434becb29fd5da976a0c43dc0fd79", "committedDate": "2020-11-11T04:21:30Z", "message": "Use leanback style and initialize mEndsText earlier with proper displayed text"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ec78e01e51aa4042e6c8c564024ae14ca033caba", "author": {"user": {"login": "MrChip53", "name": "Chris Simoni"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/ec78e01e51aa4042e6c8c564024ae14ca033caba", "committedDate": "2020-11-11T04:33:58Z", "message": "Remove refresh end time task when video is resumed"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI5MzUwMDU4", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/616#pullrequestreview-529350058", "createdAt": "2020-11-12T18:00:27Z", "commit": {"oid": "ec78e01e51aa4042e6c8c564024ae14ca033caba"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8791c2990024e7b51d394196d399916dc6119ea8", "author": {"user": {"login": "MrChip53", "name": "Chris Simoni"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/8791c2990024e7b51d394196d399916dc6119ea8", "committedDate": "2020-11-12T19:41:41Z", "message": "Fix strings.xml"}, "afterCommit": {"oid": "ec78e01e51aa4042e6c8c564024ae14ca033caba", "author": {"user": {"login": "MrChip53", "name": "Chris Simoni"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/ec78e01e51aa4042e6c8c564024ae14ca033caba", "committedDate": "2020-11-11T04:33:58Z", "message": "Remove refresh end time task when video is resumed"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4e770a45a31a33ea77c5ce29b2b984ae2cfeef58", "author": {"user": {"login": "MrChip53", "name": "Chris Simoni"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/4e770a45a31a33ea77c5ce29b2b984ae2cfeef58", "committedDate": "2020-11-12T19:56:45Z", "message": "Merge branch 'master' into ends-at-v2"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI5NDQ5NjI5", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/616#pullrequestreview-529449629", "createdAt": "2020-11-12T20:02:12Z", "commit": {"oid": "4e770a45a31a33ea77c5ce29b2b984ae2cfeef58"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4225, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}