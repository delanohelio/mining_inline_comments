{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU2NTU1MDI3", "number": 525, "title": "Fix crash upon loading resumable episodes without runtime field", "bodyText": "Changes\nWhen using STRM media files, and possibly in other contexts, episode files may be replaced, renamed or otherwise changed in a way that causes Jellyfin to delete stored ffprobe/mediainfo output. However, when this happens user resume data still remains for these episodes, and is sent by Jellyfin to clients normally. Therefore, clients must account for the RunTimeTicks field not being present in the JSON returned by https://jellyfin.sachk.com/Shows/NextUp even when the PlaybackPositionTicks field is present and non-zero.\nTo fix this, I added an extra conditional to ensure runTimeTicks is not null before its value is used to call setDurationMillis. This avoids the null pointer error, and seems to entirely resolve this crash.\nCrash log from current master\n2020-07-25 12:16:29.251 4806-4902/org.jellyfin.androidtv.debug E/ACRA: ACRA caught a NullPointerException for org.jellyfin.androidtv.debug\n    java.lang.NullPointerException: Attempt to invoke virtual method 'long java.lang.Long.longValue()' on a null object reference\n        at org.jellyfin.androidtv.channels.ChannelManager.getBaseItemAsWatchNextProgram(ChannelManager.kt:182)\n        at org.jellyfin.androidtv.channels.ChannelManager.access$getBaseItemAsWatchNextProgram(ChannelManager.kt:33)", "createdAt": "2020-07-25T02:47:09Z", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/525", "merged": true, "mergeCommit": {"oid": "b305a8573c07577f4f390bde30eb944e6387d843"}, "closed": true, "closedAt": "2020-07-26T22:37:41Z", "author": {"login": "sachk"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc4PSHKAH2gAyNDU2NTU1MDI3OjYwZTJkZjIxOWQ3ZmVjZjJiYjMyNzI3NmRiOTFkMTNlMTJhMTM1ZTM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc41GL7AFqTQ1NTQwMTE1MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "60e2df219d7fecf2bb327276db91d13e12a135e3", "author": {"user": {"login": "sachk", "name": null}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/60e2df219d7fecf2bb327276db91d13e12a135e3", "committedDate": "2020-07-25T02:34:12Z", "message": "Fix crash upon loading resumable episodes without runtime field"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1MzI1NTMy", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/525#pullrequestreview-455325532", "createdAt": "2020-07-26T01:42:27Z", "commit": {"oid": "60e2df219d7fecf2bb327276db91d13e12a135e3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNlQwMTo0MjoyN1rOG3Imjw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNlQwMTo0MjoyN1rOG3Imjw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDQ2NTgwNw==", "bodyText": "Should this still check for canResume?", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/525#discussion_r460465807", "createdAt": "2020-07-26T01:42:27Z", "author": {"login": "thornbill"}, "path": "app/src/main/java/org/jellyfin/androidtv/channels/ChannelManager.kt", "diffHunk": "@@ -179,6 +179,9 @@ class ChannelManager {\n \t\t\titem.canResume -> {\n \t\t\t\tsetWatchNextType(WatchNextPrograms.WATCH_NEXT_TYPE_CONTINUE)\n \t\t\t\tsetLastPlaybackPositionMillis((item.resumePositionTicks / TICKS_IN_MILLISECOND).toInt())\n+\t\t\t}\n+\t\t\t// Episode runtime has been determined\n+\t\t\titem.runTimeTicks != null -> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "60e2df219d7fecf2bb327276db91d13e12a135e3"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1NDAxMTUw", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/525#pullrequestreview-455401150", "createdAt": "2020-07-26T22:37:34Z", "commit": {"oid": "60e2df219d7fecf2bb327276db91d13e12a135e3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4163, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}