{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzU5MDc5NzUy", "number": 251, "title": "Player overlay redesign", "bodyText": "Addresses #146\nVIdeo Player overlay will be redesigned making it match the vanilla Android TV style.\nExisting features such as subtitles and audio track control should not be affected by this PR.", "createdAt": "2020-01-03T18:29:23Z", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/251", "merged": true, "mergeCommit": {"oid": "c954f9899d3f7826e5546f569e9d4edc941d7623"}, "closed": true, "closedAt": "2020-02-09T20:50:08Z", "author": {"login": "Florianisme"}, "timelineItems": {"totalCount": 47, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb2t2pBgH2gAyMzU5MDc5NzUyOmU0Y2M2NDIwMGVmN2ZjM2QxNGViZDE2NzhmODk3OTU4NmNkZDU3ZTU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcCuyJKAFqTM1NTYzMjI0NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e4cc64200ef7fc3d14ebd1678f8979586cdd57e5", "author": {"user": {"login": "Florianisme", "name": "Florian"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/e4cc64200ef7fc3d14ebd1678f8979586cdd57e5", "committedDate": "2020-01-03T12:52:15Z", "message": "Initial migration to Leanback PlaybackSupportFragment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b816dd77a07067c004bba9247c2ec82d43e5e302", "author": {"user": {"login": "Florianisme", "name": "Florian"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/b816dd77a07067c004bba9247c2ec82d43e5e302", "committedDate": "2020-01-03T17:48:29Z", "message": "Add state change listener, Add seeking"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8c78c82c3e742f79f92ccb8e79ed1176149fdd7b", "author": {"user": {"login": "Florianisme", "name": "Florian"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/8c78c82c3e742f79f92ccb8e79ed1176149fdd7b", "committedDate": "2020-01-03T18:28:31Z", "message": "Set play button states appropriately"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0c8e217f5d60c0bbd659fac873c39010e0ec1e3d", "author": {"user": {"login": "Florianisme", "name": "Florian"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/0c8e217f5d60c0bbd659fac873c39010e0ec1e3d", "committedDate": "2020-01-04T15:00:36Z", "message": "Add support for custom actions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "de7fab20b6afd8c660b874e7a392e9f96ea3af6e", "author": {"user": {"login": "Florianisme", "name": "Florian"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/de7fab20b6afd8c660b874e7a392e9f96ea3af6e", "committedDate": "2020-01-04T15:00:57Z", "message": "Move subtitle action to primary row"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "395064ea7113775d387492811083c0a5049bcfb2", "author": {"user": {"login": "Florianisme", "name": "Florian"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/395064ea7113775d387492811083c0a5049bcfb2", "committedDate": "2020-01-04T15:40:48Z", "message": "Add custom language select action"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b71f9db517087ac62b37dcf7082b1edc890f2e2c", "author": {"user": {"login": "Florianisme", "name": "Florian"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/b71f9db517087ac62b37dcf7082b1edc890f2e2c", "committedDate": "2020-01-04T16:07:50Z", "message": "Refactor structure"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "53eaa593c0806a11de378b5fc87ab17a6b1df3d9", "author": {"user": {"login": "Florianisme", "name": "Florian"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/53eaa593c0806a11de378b5fc87ab17a6b1df3d9", "committedDate": "2020-01-04T16:36:18Z", "message": "Add audio track switching from custom action"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d4988e9ab63c519a82a8d0a47f2ca6fdd0b87ae3", "author": {"user": {"login": "Florianisme", "name": "Florian"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/d4988e9ab63c519a82a8d0a47f2ca6fdd0b87ae3", "committedDate": "2020-01-04T20:51:44Z", "message": "Add functionality to custom closed captioning action"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "71deb4648630568bf2bd82473f27fa277b6ee259", "author": {"user": {"login": "Florianisme", "name": "Florian"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/71deb4648630568bf2bd82473f27fa277b6ee259", "committedDate": "2020-01-04T21:09:38Z", "message": "Add audio adjustment action"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "154ac9ea0a290f0b77976718fc948f54ab1746fb", "author": {"user": {"login": "Florianisme", "name": "Florian"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/154ac9ea0a290f0b77976718fc948f54ab1746fb", "committedDate": "2020-01-04T21:16:31Z", "message": "Add zoom adjustment action"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ee44ff57869a267f84397b6a0f9b1edc774248ae", "author": {"user": {"login": "Florianisme", "name": "Florian"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/ee44ff57869a267f84397b6a0f9b1edc774248ae", "committedDate": "2020-01-04T21:32:19Z", "message": "Cleanup and refactoring"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7450c63ed04105b8d02c6601b1cd8517cee418a8", "author": {"user": {"login": "Florianisme", "name": "Florian"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/7450c63ed04105b8d02c6601b1cd8517cee418a8", "committedDate": "2020-01-04T21:34:07Z", "message": "Cleanup and refactoring"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2ce52ab75575c9d729a9ae6ed01f48781b10e3d9", "author": {"user": {"login": "Florianisme", "name": "Florian"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/2ce52ab75575c9d729a9ae6ed01f48781b10e3d9", "committedDate": "2020-01-04T21:51:32Z", "message": "Add conditions to button visibility"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "650c144276266222d74337ee7ef6e75c9daf9923", "author": {"user": {"login": "Florianisme", "name": "Florian"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/650c144276266222d74337ee7ef6e75c9daf9923", "committedDate": "2020-01-04T21:54:32Z", "message": "Reverts accidental change"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1f4b19d92817ce2251d84e35e3a8b0385cf14c4b", "author": {"user": {"login": "Florianisme", "name": "Florian"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/1f4b19d92817ce2251d84e35e3a8b0385cf14c4b", "committedDate": "2020-01-05T11:30:03Z", "message": "Add previous live tv channel action"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f5f197100355075f1eab0d17009f4d642c1bfbea", "author": {"user": {"login": "Florianisme", "name": "Florian"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/f5f197100355075f1eab0d17009f4d642c1bfbea", "committedDate": "2020-01-05T18:42:42Z", "message": "Intercept key events and integrate quick channel switcher"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0b93a4b0b1a1e208589cd41e8b4815ae15d44ef2", "author": {"user": {"login": "Florianisme", "name": "Florian"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/0b93a4b0b1a1e208589cd41e8b4815ae15d44ef2", "committedDate": "2020-01-05T18:47:04Z", "message": "Add quick channel changer action"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a58e6845afd93e803eca3eb28fb841c99ac95877", "author": {"user": {"login": "Florianisme", "name": "Florian"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/a58e6845afd93e803eca3eb28fb841c99ac95877", "committedDate": "2020-01-05T18:55:03Z", "message": "Add guide action"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a8984b7218dce657b855071e3df1c25ce3648009", "author": {"user": {"login": "Florianisme", "name": "Florian"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/a8984b7218dce657b855071e3df1c25ce3648009", "committedDate": "2020-01-06T17:33:23Z", "message": "Add record action"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "12eb56672c029d59a8d237de07ce1cdca15ffa5b", "author": {"user": {"login": "Florianisme", "name": "Florian"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/12eb56672c029d59a8d237de07ce1cdca15ffa5b", "committedDate": "2020-01-06T17:40:07Z", "message": "Replace zoom icon with more matching aspect ratio icon"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f1f1d01568074fd1bc64a0d46bd58552174b9425", "author": {"user": {"login": "Florianisme", "name": "Florian"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/f1f1d01568074fd1bc64a0d46bd58552174b9425", "committedDate": "2020-01-06T19:56:15Z", "message": "Add temporary banner and description to overlay"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cd4118d9b7035a5da5b532a58fefebec119c51f6", "author": {"user": {"login": "Florianisme", "name": "Florian"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/cd4118d9b7035a5da5b532a58fefebec119c51f6", "committedDate": "2020-01-07T19:07:46Z", "message": "Remove Logo and full description for now"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ed01855a66309d1092b86a45e007aea0b2ff1422", "author": {"user": {"login": "Florianisme", "name": "Florian"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/ed01855a66309d1092b86a45e007aea0b2ff1422", "committedDate": "2020-01-08T17:38:15Z", "message": "Begin cleanup of old overlay"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1ff16bee98aee28fa9aa9e842720a1733f3dd94d", "author": {"user": {"login": "Florianisme", "name": "Florian"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/1ff16bee98aee28fa9aa9e842720a1733f3dd94d", "committedDate": "2020-01-10T13:12:01Z", "message": "Fix quick channel changer layout"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "37b64b350c6ba05db408eabdb9a82344e5f24340", "author": {"user": {"login": "Florianisme", "name": "Florian"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/37b64b350c6ba05db408eabdb9a82344e5f24340", "committedDate": "2020-01-10T13:28:51Z", "message": "Add chapter action"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2e199b6068b30bc61110eed4bf5c10e3d9a81f91", "author": {"user": {"login": "Florianisme", "name": "Florian"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/2e199b6068b30bc61110eed4bf5c10e3d9a81f91", "committedDate": "2020-01-10T13:56:02Z", "message": "Fix inconsistent fading of overlays"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2ada7b65a8f752781f0ad421caec99155128d9d2", "author": {"user": {"login": "Florianisme", "name": "Florian"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/2ada7b65a8f752781f0ad421caec99155128d9d2", "committedDate": "2020-01-10T14:26:04Z", "message": "Merge branch 'master' into player-overlay-redesign"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQxMzYzNjI1", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/251#pullrequestreview-341363625", "createdAt": "2020-01-10T19:06:49Z", "commit": {"oid": "2ada7b65a8f752781f0ad421caec99155128d9d2"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMFQxOTowNjo0OVrOFcdYbw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMFQxOToyNzoxNVrOFcd49Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTM4NTgzOQ==", "bodyText": "I think the createPopMenu function which accepts an Activity instance can be removed now", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/251#discussion_r365385839", "createdAt": "2020-01-10T19:06:49Z", "author": {"login": "nielsvanvelzen"}, "path": "app/src/main/java/org/jellyfin/androidtv/util/Utils.java", "diffHunk": "@@ -206,6 +206,10 @@ public static PopupMenu createPopupMenu(Activity activity, View view, int gravit\n         return new PopupMenu(activity, view, gravity);\n     }\n \n+    public static PopupMenu createPopupMenu(Context context, View view, int gravity) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2ada7b65a8f752781f0ad421caec99155128d9d2"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTM4NzM3OA==", "bodyText": "A lot of actions have the exact same code with only the name and icon changed. Wouldn't it be better to create an IconAction which accepts the icon as parameter in the constructor? This way you can re-use that class for all simple actions.\nMaybe even add it to the CustomAction class so you don't even need to extend it.", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/251#discussion_r365387378", "createdAt": "2020-01-10T19:10:41Z", "author": {"login": "nielsvanvelzen"}, "path": "app/src/main/java/org/jellyfin/androidtv/playback/overlay/actions/AdjustAudioDelayAction.java", "diffHunk": "@@ -0,0 +1,14 @@\n+package org.jellyfin.androidtv.playback.overlay.actions;\n+\n+import android.content.Context;\n+\n+import org.jellyfin.androidtv.R;\n+import org.jellyfin.androidtv.playback.overlay.CustomPlaybackTransportControlGlue;\n+\n+public class AdjustAudioDelayAction extends CustomAction {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2ada7b65a8f752781f0ad421caec99155128d9d2"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTM4NzkyNg==", "bodyText": "(addition to the previous suggestion for the action classes) adding a second icon parameter to the (to-be-made) constructor could trigger the active/inactive behavior. When the second icon is null it will always use the first one.", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/251#discussion_r365387926", "createdAt": "2020-01-10T19:12:10Z", "author": {"login": "nielsvanvelzen"}, "path": "app/src/main/java/org/jellyfin/androidtv/playback/overlay/actions/RecordAction.java", "diffHunk": "@@ -0,0 +1,23 @@\n+package org.jellyfin.androidtv.playback.overlay.actions;\n+\n+import android.content.Context;\n+import android.graphics.drawable.Drawable;\n+\n+import org.jellyfin.androidtv.R;\n+import org.jellyfin.androidtv.playback.overlay.CustomPlaybackTransportControlGlue;\n+\n+public class RecordAction extends CustomAction {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2ada7b65a8f752781f0ad421caec99155128d9d2"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTM4ODM4NA==", "bodyText": "I don't think I saw this constructor use in any other place. I'd suggest moving the super call to the other constructor.", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/251#discussion_r365388384", "createdAt": "2020-01-10T19:13:21Z", "author": {"login": "nielsvanvelzen"}, "path": "app/src/main/java/org/jellyfin/androidtv/playback/overlay/actions/CustomAction.java", "diffHunk": "@@ -0,0 +1,37 @@\n+package org.jellyfin.androidtv.playback.overlay.actions;\n+\n+\n+import android.content.Context;\n+import android.graphics.drawable.Drawable;\n+import android.view.View;\n+\n+import androidx.leanback.widget.PlaybackControlsRow;\n+\n+import org.jellyfin.androidtv.playback.overlay.CustomPlaybackTransportControlGlue;\n+\n+public abstract class CustomAction extends PlaybackControlsRow.MultiAction {\n+\n+    private Context context;\n+    private CustomPlaybackTransportControlGlue customPlaybackTransportControlGlue;\n+\n+    public CustomAction(Context context, CustomPlaybackTransportControlGlue customPlaybackTransportControlGlue) {\n+        this(0);\n+        this.context = context;\n+        this.customPlaybackTransportControlGlue = customPlaybackTransportControlGlue;\n+    }\n+\n+    private CustomAction(int id) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2ada7b65a8f752781f0ad421caec99155128d9d2"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTM5MTI1OA==", "bodyText": "I don't really like how this one class is responsible for all click handlers, I'd rather see them added to their respective action class.", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/251#discussion_r365391258", "createdAt": "2020-01-10T19:20:14Z", "author": {"login": "nielsvanvelzen"}, "path": "app/src/main/java/org/jellyfin/androidtv/playback/overlay/CustomActionClickedHandler.java", "diffHunk": "@@ -0,0 +1,147 @@\n+package org.jellyfin.androidtv.playback.overlay;\n+\n+import android.content.Context;\n+import android.view.Gravity;\n+import android.view.MenuItem;\n+import android.view.View;\n+import android.widget.PopupMenu;\n+\n+import org.jellyfin.androidtv.R;\n+import org.jellyfin.androidtv.TvApp;\n+import org.jellyfin.androidtv.livetv.TvManager;\n+import org.jellyfin.androidtv.model.compat.SubtitleStreamInfo;\n+import org.jellyfin.androidtv.playback.CustomPlaybackOverlayFragment;\n+import org.jellyfin.androidtv.playback.PlaybackController;\n+import org.jellyfin.androidtv.playback.VideoManager;\n+import org.jellyfin.androidtv.ui.AudioDelayPopup;\n+import org.jellyfin.androidtv.ui.ValueChangedListener;\n+import org.jellyfin.androidtv.util.Utils;\n+import org.jellyfin.apiclient.model.entities.MediaStream;\n+\n+import java.util.List;\n+\n+public class CustomActionClickedHandler {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2ada7b65a8f752781f0ad421caec99155128d9d2"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTM5MjkxOA==", "bodyText": "See my previous comment on the way these handlers are implemented. Would be better if you could just do action.onClicked(); or something like that", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/251#discussion_r365392918", "createdAt": "2020-01-10T19:24:09Z", "author": {"login": "nielsvanvelzen"}, "path": "app/src/main/java/org/jellyfin/androidtv/playback/overlay/CustomPlaybackTransportControlGlue.java", "diffHunk": "@@ -0,0 +1,239 @@\n+package org.jellyfin.androidtv.playback.overlay;\n+\n+import android.content.Context;\n+import android.view.View;\n+\n+import androidx.leanback.media.PlaybackTransportControlGlue;\n+import androidx.leanback.widget.Action;\n+import androidx.leanback.widget.ArrayObjectAdapter;\n+import androidx.leanback.widget.PlaybackControlsRow;\n+\n+import org.jellyfin.androidtv.playback.PlaybackController;\n+import org.jellyfin.androidtv.playback.overlay.actions.AdjustAudioDelayAction;\n+import org.jellyfin.androidtv.playback.overlay.actions.ChannelBarChannelAction;\n+import org.jellyfin.androidtv.playback.overlay.actions.ChapterAction;\n+import org.jellyfin.androidtv.playback.overlay.actions.ClosedCaptionsAction;\n+import org.jellyfin.androidtv.playback.overlay.actions.GuideAction;\n+import org.jellyfin.androidtv.playback.overlay.actions.PreviousLiveTvChannelAction;\n+import org.jellyfin.androidtv.playback.overlay.actions.RecordAction;\n+import org.jellyfin.androidtv.playback.overlay.actions.SelectAudioAction;\n+import org.jellyfin.androidtv.playback.overlay.actions.ZoomAction;\n+\n+public class CustomPlaybackTransportControlGlue extends PlaybackTransportControlGlue {\n+\n+    // Normal playback actions\n+    private PlaybackControlsRow.PlayPauseAction playPauseAction;\n+    private PlaybackControlsRow.RewindAction rewindAction;\n+    private PlaybackControlsRow.FastForwardAction fastForwardAction;\n+    private PlaybackControlsRow.SkipNextAction skipNextAction;\n+    private SelectAudioAction selectAudioAction;\n+    private ClosedCaptionsAction closedCaptionsAction;\n+    private AdjustAudioDelayAction adjustAudioDelayAction;\n+    private ZoomAction zoomAction;\n+    private ChapterAction chapterAction;\n+\n+    // TV actions\n+    private PreviousLiveTvChannelAction previousLiveTvChannelAction;\n+    private ChannelBarChannelAction channelBarChannelAction;\n+    private GuideAction guideAction;\n+    private RecordAction recordAction;\n+\n+    private final VideoPlayerAdapter playerAdapter;\n+    private final LeanbackOverlayFragment leanbackOverlayFragment;\n+    private final CustomActionClickedHandler customActionClickedHandler;\n+    private ArrayObjectAdapter primaryActionsAdapter;\n+    private ArrayObjectAdapter secondaryActionsAdapter;\n+\n+    CustomPlaybackTransportControlGlue(Context context, VideoPlayerAdapter playerAdapter, PlaybackController playbackController, LeanbackOverlayFragment leanbackOverlayFragment) {\n+        super(context, playerAdapter);\n+        this.playerAdapter = playerAdapter;\n+        this.leanbackOverlayFragment = leanbackOverlayFragment;\n+        customActionClickedHandler = new CustomActionClickedHandler(playbackController, leanbackOverlayFragment, context);\n+        initActions(context);\n+    }\n+\n+    private void initActions(Context context) {\n+        playPauseAction = new PlaybackControlsRow.PlayPauseAction(context);\n+        rewindAction = new PlaybackControlsRow.RewindAction(context);\n+        fastForwardAction = new PlaybackControlsRow.FastForwardAction(context);\n+        skipNextAction = new PlaybackControlsRow.SkipNextAction(context);\n+        selectAudioAction = new SelectAudioAction(context, this);\n+        closedCaptionsAction = new ClosedCaptionsAction(context, this);\n+        adjustAudioDelayAction = new AdjustAudioDelayAction(context, this);\n+        zoomAction = new ZoomAction(context, this);\n+        chapterAction = new ChapterAction(context, this);\n+\n+        previousLiveTvChannelAction = new PreviousLiveTvChannelAction(context, this);\n+        channelBarChannelAction = new ChannelBarChannelAction(context, this);\n+        guideAction = new GuideAction(context, this);\n+        recordAction = new RecordAction(context, this);\n+    }\n+\n+    @Override\n+    protected void onCreatePrimaryActions(ArrayObjectAdapter primaryActionsAdapter) {\n+        this.primaryActionsAdapter = primaryActionsAdapter;\n+\n+        primaryActionsAdapter.add(playPauseAction);\n+\n+        if (canSeek()) {\n+            primaryActionsAdapter.add(rewindAction);\n+            primaryActionsAdapter.add(fastForwardAction);\n+        }\n+\n+        if (hasSubs()) {\n+            primaryActionsAdapter.add(closedCaptionsAction);\n+        }\n+\n+        if (hasMultiAudio()) {\n+            primaryActionsAdapter.add(selectAudioAction);\n+        }\n+\n+        if (isLiveTv()) {\n+            primaryActionsAdapter.add(channelBarChannelAction);\n+            primaryActionsAdapter.add(guideAction);\n+        }\n+    }\n+\n+    @Override\n+    protected void onCreateSecondaryActions(ArrayObjectAdapter secondaryActionsAdapter) {\n+        this.secondaryActionsAdapter = secondaryActionsAdapter;\n+\n+        if (isLiveTv()) {\n+            secondaryActionsAdapter.add(previousLiveTvChannelAction);\n+            if (canRecordLiveTv()) {\n+                secondaryActionsAdapter.add(recordAction);\n+                recordingStateChanged();\n+            }\n+        }\n+\n+        if (hasNextItem()) {\n+            secondaryActionsAdapter.add(skipNextAction);\n+        }\n+\n+\n+        if (hasChapters()) {\n+            secondaryActionsAdapter.add(chapterAction);\n+        }\n+\n+        if (!isNativeMode()) {\n+            secondaryActionsAdapter.add(adjustAudioDelayAction);\n+        } else {\n+            secondaryActionsAdapter.add(zoomAction);\n+        }\n+    }\n+\n+    @Override\n+    public void onActionClicked(Action action) {\n+        if (action == playPauseAction) {\n+            if (playPauseAction.getIndex() == PlaybackControlsRow.PlayPauseAction.INDEX_PAUSE) {\n+                getPlayerAdapter().pause();\n+            } else if (playPauseAction.getIndex() == PlaybackControlsRow.PlayPauseAction.INDEX_PLAY) {\n+                getPlayerAdapter().play();\n+            }\n+            playPauseAction.nextIndex();\n+        } else if (action == rewindAction) {\n+            getPlayerAdapter().rewind();\n+        } else if (action == fastForwardAction) {\n+            getPlayerAdapter().fastForward();\n+        } else if (action == skipNextAction) {\n+            getPlayerAdapter().next();\n+        }\n+        notifyActionChanged(action);\n+    }\n+\n+    public void onCustomActionClicked(Action action, View view) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2ada7b65a8f752781f0ad421caec99155128d9d2"}, "originalPosition": 144}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTM5Mzc1NQ==", "bodyText": "I'm not really sure what this class does. Is it providing the possible \"seek positions\" to the player? And if so, does this mean that whatever I watch it can only seek to 30 positions? Which would mean that if I watched a movie of 30 hours I would skip one hour every time?", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/251#discussion_r365393755", "createdAt": "2020-01-10T19:26:13Z", "author": {"login": "nielsvanvelzen"}, "path": "app/src/main/java/org/jellyfin/androidtv/playback/overlay/CustomSeekProvider.java", "diffHunk": "@@ -0,0 +1,27 @@\n+package org.jellyfin.androidtv.playback.overlay;\n+\n+import androidx.leanback.widget.PlaybackSeekDataProvider;\n+\n+public class CustomSeekProvider extends PlaybackSeekDataProvider {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2ada7b65a8f752781f0ad421caec99155128d9d2"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTM5NDE2NQ==", "bodyText": "Typo in live", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/251#discussion_r365394165", "createdAt": "2020-01-10T19:27:15Z", "author": {"login": "nielsvanvelzen"}, "path": "app/src/main/java/org/jellyfin/androidtv/playback/overlay/VideoPlayerAdapter.java", "diffHunk": "@@ -0,0 +1,148 @@\n+package org.jellyfin.androidtv.playback.overlay;\n+\n+import androidx.leanback.media.PlayerAdapter;\n+\n+import org.jellyfin.androidtv.TvApp;\n+import org.jellyfin.androidtv.playback.CustomPlaybackOverlayFragment;\n+import org.jellyfin.androidtv.playback.PlaybackController;\n+import org.jellyfin.androidtv.util.DeviceUtils;\n+import org.jellyfin.androidtv.util.apiclient.StreamHelper;\n+import org.jellyfin.apiclient.model.dto.BaseItemDto;\n+import org.jellyfin.apiclient.model.dto.ChapterInfoDto;\n+\n+import java.util.List;\n+\n+public class VideoPlayerAdapter extends PlayerAdapter {\n+\n+    private final PlaybackController playbackController;\n+    private CustomPlaybackOverlayFragment customPlaybackOverlayFragment;\n+\n+    VideoPlayerAdapter(PlaybackController playbackController) {\n+        this.playbackController = playbackController;\n+    }\n+\n+    @Override\n+    public void play() {\n+        playbackController.play(playbackController.getCurrentPosition());\n+    }\n+\n+    @Override\n+    public void pause() {\n+        playbackController.pause();\n+    }\n+\n+    @Override\n+    public void rewind() {\n+        playbackController.skip(-30000);\n+        updateCurrentPosition();\n+    }\n+\n+    @Override\n+    public void fastForward() {\n+        playbackController.skip(30000);\n+        updateCurrentPosition();\n+    }\n+\n+    @Override\n+    public void seekTo(long positionInMs) {\n+        playbackController.seek(positionInMs);\n+        updateCurrentPosition();\n+    }\n+\n+    @Override\n+    public void next() {\n+        playbackController.next();\n+    }\n+\n+    @Override\n+    public long getDuration() {\n+        return getCurrentlyPlayingItem().getRunTimeTicks() != null ?\n+                getCurrentlyPlayingItem().getRunTimeTicks() / 10000 : -1;\n+    }\n+\n+    @Override\n+    public long getCurrentPosition() {\n+        return playbackController.getCurrentPosition();\n+    }\n+\n+    @Override\n+    public boolean isPlaying() {\n+        return playbackController.isPlaying();\n+    }\n+\n+    @Override\n+    public long getBufferedPosition() {\n+        return getDuration();\n+    }\n+\n+    void updateCurrentPosition() {\n+        getCallback().onCurrentPositionChanged(this);\n+    }\n+\n+    void updatePlayState() {\n+        getCallback().onPlayStateChanged(this);\n+    }\n+\n+    boolean hasSubs() {\n+        return StreamHelper.getSubtitleStreams(playbackController.getCurrentMediaSource()).size() > 0;\n+    }\n+\n+    boolean hasMultiAudio() {\n+        return StreamHelper.getAudioStreams(playbackController.getCurrentMediaSource()).size() > 1;\n+    }\n+\n+    boolean hasNextItem() {\n+        return playbackController.hasNextItem();\n+    }\n+\n+    boolean isNativeMode() {\n+        return playbackController.isNativeMode();\n+    }\n+\n+    boolean canSeek() {\n+        return !DeviceUtils.isFireTv() && playbackController.canSeek();\n+    }\n+\n+    boolean isLiveTv() {\n+        return playbackController.isLiveTv();\n+    }\n+\n+    void setMasterOverlayFragment(CustomPlaybackOverlayFragment customPlaybackOverlayFragment) {\n+        this.customPlaybackOverlayFragment = customPlaybackOverlayFragment;\n+    }\n+\n+    CustomPlaybackOverlayFragment getMasterOverlayFragment() {\n+        return customPlaybackOverlayFragment;\n+    }\n+\n+    boolean canRecordLieTv() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2ada7b65a8f752781f0ad421caec99155128d9d2"}, "originalPosition": 118}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5368e97333dee60a38916ab08796e07e7b47fc70", "author": {"user": {"login": "Florianisme", "name": "Florian"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/5368e97333dee60a38916ab08796e07e7b47fc70", "committedDate": "2020-01-10T22:57:16Z", "message": "Initial fix of requested changes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ0MTEzNjc4", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/251#pullrequestreview-344113678", "createdAt": "2020-01-16T18:11:27Z", "commit": {"oid": "5368e97333dee60a38916ab08796e07e7b47fc70"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "944960540a445c6c61f3d52c3796d21c271b14c2", "author": {"user": {"login": "Florianisme", "name": "Florian"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/944960540a445c6c61f3d52c3796d21c271b14c2", "committedDate": "2020-02-01T13:02:39Z", "message": "Fix crash when exiting playback view"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a11141afe7c4a373b111d87fdbe90cd195f1c752", "author": {"user": {"login": "Florianisme", "name": "Florian"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/a11141afe7c4a373b111d87fdbe90cd195f1c752", "committedDate": "2020-02-01T20:09:55Z", "message": "Set fixed seek duration of 30 seconds"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0bfe099638200fea15f705f908204f69de2f2366", "author": {"user": {"login": "Florianisme", "name": "Florian"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/0bfe099638200fea15f705f908204f69de2f2366", "committedDate": "2020-02-01T20:34:01Z", "message": "Extract click handling to each action class"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1a044394e810ca56b56f3f08fc3a14466c9d9343", "author": {"user": {"login": "Florianisme", "name": "Florian"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/1a044394e810ca56b56f3f08fc3a14466c9d9343", "committedDate": "2020-02-01T20:34:29Z", "message": "Fix crash when exiting playback view"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a232313d8bd4727b594b5765d83c0266dd6f26c0", "author": {"user": {"login": "Florianisme", "name": "Florian"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/a232313d8bd4727b594b5765d83c0266dd6f26c0", "committedDate": "2020-02-01T21:00:41Z", "message": "Prevent seeking in live tv mode"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2c2d18545c87f7024195872036b0c902ef573517", "author": {"user": {"login": "Florianisme", "name": "Florian"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/2c2d18545c87f7024195872036b0c902ef573517", "committedDate": "2020-02-01T21:46:33Z", "message": "Keep chapter selection focused when pressing left on first item"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUxOTMwNzUz", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/251#pullrequestreview-351930753", "createdAt": "2020-02-02T09:53:31Z", "commit": {"oid": "2c2d18545c87f7024195872036b0c902ef573517"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUxOTM4Mjk0", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/251#pullrequestreview-351938294", "createdAt": "2020-02-02T12:27:42Z", "commit": {"oid": "2c2d18545c87f7024195872036b0c902ef573517"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b8415e645851c4730eaf3f5c6d08fc1e71790ac6", "author": {"user": {"login": "Florianisme", "name": "Florian"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/b8415e645851c4730eaf3f5c6d08fc1e71790ac6", "committedDate": "2020-02-05T16:23:14Z", "message": "Merge remote-tracking branch 'upstream/master' into player-overlay-redesign"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f8fe612bdb2279244ec813f31106f30580f079b3", "author": {"user": {"login": "Florianisme", "name": "Florian"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/f8fe612bdb2279244ec813f31106f30580f079b3", "committedDate": "2020-02-05T16:44:30Z", "message": "Merge remote-tracking branch 'upstream/master' into player-overlay-redesign"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e83788b4905b6d32d4713e5c4de8918db9d5f73c", "author": {"user": {"login": "Florianisme", "name": "Florian"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/e83788b4905b6d32d4713e5c4de8918db9d5f73c", "committedDate": "2020-02-05T18:24:15Z", "message": "Fix play/pause out of sync error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c0b21764b0b2e7ccdb770cec0265df503728c9fd", "author": {"user": {"login": "Florianisme", "name": "Florian"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/c0b21764b0b2e7ccdb770cec0265df503728c9fd", "committedDate": "2020-02-05T18:37:33Z", "message": "Fix wrong last position when media player is closed and progress still reported"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0cc9430412f78c3e8a9fed46362a288771b58900", "author": {"user": {"login": "Florianisme", "name": "Florian"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/0cc9430412f78c3e8a9fed46362a288771b58900", "committedDate": "2020-02-07T19:30:35Z", "message": "Fix quick channel switcher not showing when pressing DPAD_DOWN"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "21a3e3395665c827500c7c31879c0dbcbefa893c", "author": {"user": {"login": "Florianisme", "name": "Florian"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/21a3e3395665c827500c7c31879c0dbcbefa893c", "committedDate": "2020-02-07T19:35:56Z", "message": "Merge remote-tracking branch 'upstream/master' into player-overlay-redesign\n\n# Conflicts:\n#\tapp/src/main/java/org/jellyfin/androidtv/playback/VideoManager.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b356904cb754079c1891b358fa2bd7221c713646", "author": {"user": {"login": "Florianisme", "name": "Florian"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/b356904cb754079c1891b358fa2bd7221c713646", "committedDate": "2020-02-09T20:43:04Z", "message": "Merge remote-tracking branch 'upstream/master' into player-overlay-redesign\n\n# Conflicts:\n#\tapp/src/main/java/org/jellyfin/androidtv/playback/CustomPlaybackOverlayFragment.java"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU1NjMyMjQ0", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/251#pullrequestreview-355632244", "createdAt": "2020-02-09T20:44:21Z", "commit": {"oid": "b356904cb754079c1891b358fa2bd7221c713646"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4350, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}