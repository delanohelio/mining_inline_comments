{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIxMjI5Nzgy", "number": 630, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QwMjo0MTowN1rOE504KQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQxODo1MjowMlrOFFwFgA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI5MDcwNjMzOnYy", "diffSide": "RIGHT", "path": "app/src/main/java/org/jellyfin/androidtv/ui/presentation/CardPresenter.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QwMjo0MTowN1rOH0iMVg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QwNjowMjoxNlrOH0lhNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDg0ODIxNA==", "bodyText": "Looks like you could use holder here instead of casting repeatedly \ud83d\ude09 .", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/630#discussion_r524848214", "createdAt": "2020-11-17T02:41:07Z", "author": {"login": "thornbill"}, "path": "app/src/main/java/org/jellyfin/androidtv/ui/presentation/CardPresenter.java", "diffHunk": "@@ -394,9 +398,17 @@ public void onBindViewHolder(Presenter.ViewHolder viewHolder, Object item) {\n             holder.mCardView.setPlayingIndicator(true);\n         } else {\n             holder.mCardView.setPlayingIndicator(false);\n-            Drawable badge = rowItem.getBadgeImage();\n-            if (badge != null) {\n-                ((ViewHolder) viewHolder).mCardView.setBadgeImage(badge);\n+\n+            if (get(UserPreferences.class).get(UserPreferences.Companion.getDefaultRatingProvider()) == RatingProvider.RATING_RT) {\n+                Drawable badge = rowItem.getBadgeImage();\n+                ((ViewHolder) viewHolder).mCardView.setRating(null);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "139a6ef59be59380b66ffc64807cd3ea1373d2f1"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDkwMjcxMQ==", "bodyText": "ah yes. it appears I started with some copy pasta and rolled with it \ud83e\udd26\u200d\u2642\ufe0f", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/630#discussion_r524902711", "createdAt": "2020-11-17T06:02:16Z", "author": {"login": "MrChip53"}, "path": "app/src/main/java/org/jellyfin/androidtv/ui/presentation/CardPresenter.java", "diffHunk": "@@ -394,9 +398,17 @@ public void onBindViewHolder(Presenter.ViewHolder viewHolder, Object item) {\n             holder.mCardView.setPlayingIndicator(true);\n         } else {\n             holder.mCardView.setPlayingIndicator(false);\n-            Drawable badge = rowItem.getBadgeImage();\n-            if (badge != null) {\n-                ((ViewHolder) viewHolder).mCardView.setBadgeImage(badge);\n+\n+            if (get(UserPreferences.class).get(UserPreferences.Companion.getDefaultRatingProvider()) == RatingProvider.RATING_RT) {\n+                Drawable badge = rowItem.getBadgeImage();\n+                ((ViewHolder) viewHolder).mCardView.setRating(null);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDg0ODIxNA=="}, "originalCommit": {"oid": "139a6ef59be59380b66ffc64807cd3ea1373d2f1"}, "originalPosition": 28}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQxNTcyMzExOnYy", "diffSide": "RIGHT", "path": "app/src/main/java/org/jellyfin/androidtv/preference/constant/RatingProvider.kt", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQxODo0NjowNlrOIGafjQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQxODo0NjowNlrOIGafjQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzU5NjQyOQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t * Sets default rating provider to Rotten tomatoes.\n          \n          \n            \n            \t * Sets default rating provider to tomatoes.", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/630#discussion_r543596429", "createdAt": "2020-12-15T18:46:06Z", "author": {"login": "nielsvanvelzen"}, "path": "app/src/main/java/org/jellyfin/androidtv/preference/constant/RatingProvider.kt", "diffHunk": "@@ -0,0 +1,18 @@\n+package org.jellyfin.androidtv.preference.constant\n+\n+import org.jellyfin.androidtv.R\n+import org.jellyfin.androidtv.ui.preference.dsl.EnumDisplayOptions\n+\n+enum class RatingProvider {\n+\t/**\n+\t * Sets default rating provider to Rotten tomatoes.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "373acc8958f6f267f6d4d2e59422936f1cf20dcb"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQxNTcyMzY0OnYy", "diffSide": "RIGHT", "path": "app/src/main/java/org/jellyfin/androidtv/preference/constant/RatingProvider.kt", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQxODo0NjoxNFrOIGaf3A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQxODo0NjoxNFrOIGaf3A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzU5NjUwOA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t * Sets the default rating provider to IMDb.\n          \n          \n            \n            \t * Sets the default rating provider to stars.", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/630#discussion_r543596508", "createdAt": "2020-12-15T18:46:14Z", "author": {"login": "nielsvanvelzen"}, "path": "app/src/main/java/org/jellyfin/androidtv/preference/constant/RatingProvider.kt", "diffHunk": "@@ -0,0 +1,18 @@\n+package org.jellyfin.androidtv.preference.constant\n+\n+import org.jellyfin.androidtv.R\n+import org.jellyfin.androidtv.ui.preference.dsl.EnumDisplayOptions\n+\n+enum class RatingProvider {\n+\t/**\n+\t * Sets default rating provider to Rotten tomatoes.\n+\t */\n+\t@EnumDisplayOptions(R.string.lbl_tomatoes)\n+\tRATING_TOMATOES,\n+\n+\t/**\n+\t * Sets the default rating provider to IMDb.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "373acc8958f6f267f6d4d2e59422936f1cf20dcb"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQxNTcyOTY2OnYy", "diffSide": "RIGHT", "path": "app/src/main/java/org/jellyfin/androidtv/ui/presentation/CardPresenter.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQxODo0NzoyNFrOIGajQg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQxODo0NzoyNFrOIGajQg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzU5NzM3OA==", "bodyText": "I think the code will be more readable if the result of the get(UserPreferences.class).get(UserPreferences.Companion.getDefaultRatingProvider()) part is moved to a variable before the if statement.", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/630#discussion_r543597378", "createdAt": "2020-12-15T18:47:24Z", "author": {"login": "nielsvanvelzen"}, "path": "app/src/main/java/org/jellyfin/androidtv/ui/presentation/CardPresenter.java", "diffHunk": "@@ -394,13 +398,21 @@ public void onBindViewHolder(Presenter.ViewHolder viewHolder, Object item) {\n             holder.mCardView.setPlayingIndicator(true);\n         } else {\n             holder.mCardView.setPlayingIndicator(false);\n-            Drawable badge = rowItem.getBadgeImage();\n-            if (badge != null) {\n-                ((ViewHolder) viewHolder).mCardView.setBadgeImage(badge);\n+\n+            if (get(UserPreferences.class).get(UserPreferences.Companion.getDefaultRatingProvider()) == RatingProvider.RATING_TOMATOES) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "373acc8958f6f267f6d4d2e59422936f1cf20dcb"}, "originalPosition": 26}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQxNTc1MDQwOnYy", "diffSide": "RIGHT", "path": "app/src/main/res/values/strings.xml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQxODo1MjowMlrOIGavXw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QwNDoyNzoxMlrOIHkJ3Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzYwMDQ3OQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                <string name=\"pref_default_rating\">Default Ratings Scale</string>\n          \n          \n            \n                <string name=\"pref_default_rating\">Default rating type</string>\n          \n      \n    \n    \n  \n\nCould apply this consistently in the code too", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/630#discussion_r543600479", "createdAt": "2020-12-15T18:52:02Z", "author": {"login": "nielsvanvelzen"}, "path": "app/src/main/res/values/strings.xml", "diffHunk": "@@ -418,4 +418,7 @@\n     <string name=\"lbl_manual_login\">Manual Login</string>\n     <string name=\"lbl_playback_control_ends\">Ends at %1$s</string>\n     <string name=\"watch_count_overflow\">99+</string>\n+    <string name=\"lbl_stars\">Stars</string>\n+    <string name=\"lbl_tomatoes\">Tomatoes</string>\n+    <string name=\"pref_default_rating\">Default Ratings Scale</string>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "373acc8958f6f267f6d4d2e59422936f1cf20dcb"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDgwMzI5Mw==", "bodyText": "Changed all references of \"RatingProvider\" or any variation of \"RatingProvider\" to \"RatingType\". I assume that is what you meant here. And the string ofc.", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/630#discussion_r544803293", "createdAt": "2020-12-17T04:27:12Z", "author": {"login": "MrChip53"}, "path": "app/src/main/res/values/strings.xml", "diffHunk": "@@ -418,4 +418,7 @@\n     <string name=\"lbl_manual_login\">Manual Login</string>\n     <string name=\"lbl_playback_control_ends\">Ends at %1$s</string>\n     <string name=\"watch_count_overflow\">99+</string>\n+    <string name=\"lbl_stars\">Stars</string>\n+    <string name=\"lbl_tomatoes\">Tomatoes</string>\n+    <string name=\"pref_default_rating\">Default Ratings Scale</string>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzYwMDQ3OQ=="}, "originalCommit": {"oid": "373acc8958f6f267f6d4d2e59422936f1cf20dcb"}, "originalPosition": 6}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 987, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}