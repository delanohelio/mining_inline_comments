{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc4NDYyNTQ1", "number": 358, "title": "Add default audio delay for libVLC", "bodyText": "libVLC audio always seems to be 300ms out of sync from the video. This adds a user preference to adjust that and sets -300 as the default.\nFixes #144", "createdAt": "2020-02-21T20:36:37Z", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/358", "merged": true, "mergeCommit": {"oid": "f6a22ed081480e09ebfd919fe3ad93c2d03d7d2b"}, "closed": true, "closedAt": "2020-02-23T08:39:11Z", "author": {"login": "thornbill"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcGlqYAAH2gAyMzc4NDYyNTQ1OjM1YTE1MGExYmJiODJmYWRhMzRhZDAzZGY0YzcxZjNkYjcxZDYwMmE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcHEzGLgFqTM2MzA3OTAwMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "35a150a1bbb82fada34ad03df4c71f3db71d602a", "author": {"user": {"login": "thornbill", "name": "Bill Thornton"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/35a150a1bbb82fada34ad03df4c71f3db71d602a", "committedDate": "2020-02-21T20:22:24Z", "message": "Add default audio delay for libVLC"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYyOTEwMjgz", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/358#pullrequestreview-362910283", "createdAt": "2020-02-21T20:53:51Z", "commit": {"oid": "35a150a1bbb82fada34ad03df4c71f3db71d602a"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMVQyMDo1Mzo1MVrOFtETXA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMVQyMTowMzoyMFrOFtEiEw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjgwMDczMg==", "bodyText": "Should probably note the value is defined in milliseconds", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/358#discussion_r382800732", "createdAt": "2020-02-21T20:53:51Z", "author": {"login": "nielsvanvelzen"}, "path": "app/src/main/java/org/jellyfin/androidtv/preferences/UserPreferences.kt", "diffHunk": "@@ -126,6 +126,11 @@ class UserPreferences(context: Context) : SharedPreferenceStore(PreferenceManage\n \t */\n \tvar ac3Enabled by booleanPreference(\"pref_bitstream_ac3\", true)\n \n+\t/**\n+\t * Default audio delay for libVLC", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "35a150a1bbb82fada34ad03df4c71f3db71d602a"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjgwMTU4Nw==", "bodyText": "I prefer it like this, although not necessary:\nfindPreference<EditLongPreference>(\"libvlc_audio_delay\")?.apply {\n\ttext = TvApp.getApplication().userPreferences.libVLCAudioDelay.toString()\n\tsummaryProvider = Preference.SummaryProvider<EditLongPreference> {\n\t\t\"${it.text} ms\"\n\t}\n}", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/358#discussion_r382801587", "createdAt": "2020-02-21T20:56:02Z", "author": {"login": "nielsvanvelzen"}, "path": "app/src/main/java/org/jellyfin/androidtv/preferences/ui/UserPreferencesFragment.kt", "diffHunk": "@@ -134,6 +134,12 @@ class UserPreferencesFragment : LeanbackSettingsFragmentCompat() {\n \t\t\tfindPreference<EditTextPreference>(\"version\")?.summaryProvider = Preference.SummaryProvider<EditTextPreference> {\n \t\t\t\tUtils.getVersionString()\n \t\t\t}\n+\n+\t\t\tval audioDelayPreference = findPreference<EditLongPreference>(\"libvlc_audio_delay\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "35a150a1bbb82fada34ad03df4c71f3db71d602a"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjgwNDQ5OQ==", "bodyText": "To make custom views work you need to pass 2 parameters to the super: the context and attributeset. The others are optional.\nContext will never be null so you can remove the question mark from that one.\nAn example for the extra constructors that should be added can be found in the Rating.kt or MultiBadgeImageCardView.kt from the details branch.", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/358#discussion_r382804499", "createdAt": "2020-02-21T21:03:20Z", "author": {"login": "nielsvanvelzen"}, "path": "app/src/main/java/org/jellyfin/androidtv/preferences/ui/EditLongPreference.kt", "diffHunk": "@@ -0,0 +1,25 @@\n+package org.jellyfin.androidtv.preferences.ui\n+\n+import android.content.Context\n+import android.util.AttributeSet\n+import androidx.preference.EditTextPreference\n+import androidx.preference.PreferenceViewHolder\n+\n+class EditLongPreference : EditTextPreference {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "35a150a1bbb82fada34ad03df4c71f3db71d602a"}, "originalPosition": 8}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2b6c105496259845b49ce1f355242d500bb84502", "author": {"user": {"login": "thornbill", "name": "Bill Thornton"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/2b6c105496259845b49ce1f355242d500bb84502", "committedDate": "2020-02-23T05:31:05Z", "message": "Fix code review feedback"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYzMDc5MDAx", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/358#pullrequestreview-363079001", "createdAt": "2020-02-23T08:38:59Z", "commit": {"oid": "2b6c105496259845b49ce1f355242d500bb84502"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4276, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}