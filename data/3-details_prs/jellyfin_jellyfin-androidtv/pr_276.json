{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY3MDY4NzYw", "number": 276, "title": "Introduce new Items Model", "bodyText": "This is my idea of how we could better handle different item types, currently there's only Episode implemented, but the others would be done similarly.", "createdAt": "2020-01-25T00:49:17Z", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/276", "merged": true, "mergeCommit": {"oid": "70bb9e7bad3d7cea986991cc7ca1ca2b9294d1f9"}, "closed": true, "closedAt": "2020-01-25T18:49:39Z", "author": {"login": "AndreasGB"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb9opT1AH2gAyMzY3MDY4NzYwOmI2OGY2MjcwOGJkNWMxMTdkYTU0OGIyZjkxYTY0NDJlMmU4MjY5Mjg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb94GAMgFqTM0ODMzOTQxNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b68f62708bd5c117da548b2f91a6442e2e826928", "author": {"user": {"login": "AndreasGB", "name": "Andreas"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/b68f62708bd5c117da548b2f91a6442e2e826928", "committedDate": "2020-01-25T00:45:38Z", "message": "Introduce new Items Model"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4MzI2MTkz", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/276#pullrequestreview-348326193", "createdAt": "2020-01-25T13:33:36Z", "commit": {"oid": "b68f62708bd5c117da548b2f91a6442e2e826928"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNVQxMzozMzozNlrOFhwAHQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNVQxMzozMzozNlrOFhwAHQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDkzMzc4OQ==", "bodyText": "I would prefer it like this, or is there a reason the visitor pattern would be better in this case?\nfragment = when(lifted) {\n\tis Episode -> EpisodeDetailsFragment(lifted)\n\telse -> TODO()\n}", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/276#discussion_r370933789", "createdAt": "2020-01-25T13:33:36Z", "author": {"login": "nielsvanvelzen"}, "path": "app/src/main/java/org/jellyfin/androidtv/details/DetailsActivity.kt", "diffHunk": "@@ -33,14 +29,13 @@ class DetailsActivity : FragmentActivity() {\n \n \t\tGlobalScope.launch(Dispatchers.Main) {\n \t\t\tval baseItem = getBaseItemDtoForID(id) ?: return@launch\n+\t\t\tval lifted = baseItem.liftToNewFormat()\n \n-\t\t\tfragment = when (baseItem.baseItemType!!) {\n-\t\t\t\tBaseItemType.Episode -> {\n-\t\t\t\t\tval episode = baseItem.asEpisode()\n-\t\t\t\t\tEpisodeDetailsFragment(episode)\n+\t\t\tlifted.acceptVisitor(object : IBaseItemVisitor {\n+\t\t\t\toverride fun visit(item: Episode) {\n+\t\t\t\t\tfragment = EpisodeDetailsFragment(item)\n \t\t\t\t}\n-\t\t\t\telse -> TODO()\n-\t\t\t}\n+\t\t\t})", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b68f62708bd5c117da548b2f91a6442e2e826928"}, "originalPosition": 39}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3bef4dc8ae389bf37359d49fd903c69d7fc4c26c", "author": {"user": {"login": "AndreasGB", "name": "Andreas"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/3bef4dc8ae389bf37359d49fd903c69d7fc4c26c", "committedDate": "2020-01-25T16:21:43Z", "message": "Refactor out PlayableItem"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2e7673b7dce68375e298eaf3fbdc222ef195ebae", "author": {"user": {"login": "AndreasGB", "name": "Andreas"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/2e7673b7dce68375e298eaf3fbdc222ef195ebae", "committedDate": "2020-01-25T18:39:18Z", "message": "Refactor item types to usage of sealed classes"}, "afterCommit": {"oid": "cff3d84e258141b5f268567a2b5eaded4e3971cc", "author": {"user": {"login": "AndreasGB", "name": "Andreas"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/cff3d84e258141b5f268567a2b5eaded4e3971cc", "committedDate": "2020-01-25T18:42:54Z", "message": "Refactor item types to usage of sealed classes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cff3d84e258141b5f268567a2b5eaded4e3971cc", "author": {"user": {"login": "AndreasGB", "name": "Andreas"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/cff3d84e258141b5f268567a2b5eaded4e3971cc", "committedDate": "2020-01-25T18:42:54Z", "message": "Refactor item types to usage of sealed classes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4MzM5NDE3", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/276#pullrequestreview-348339417", "createdAt": "2020-01-25T18:45:33Z", "commit": {"oid": "cff3d84e258141b5f268567a2b5eaded4e3971cc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4369, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}