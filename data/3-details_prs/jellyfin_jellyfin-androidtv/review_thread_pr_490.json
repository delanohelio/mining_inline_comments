{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI1NDY4Njk2", "number": 490, "reviewThreads": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0zMFQxNDoxMjoyOVrOEBHD6A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0zMVQxNTowNTo1MlrOEBL_Rg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY5NTk5NzIwOnYy", "diffSide": "RIGHT", "path": "app/src/main/java/org/jellyfin/androidtv/util/BackgroundManagerUtils.kt", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0zMFQxNDoxMjoyOVrOGcyvfQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0zMFQxNDoxMjoyOVrOGcyvfQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjg0NDY2OQ==", "bodyText": "We don't add \"created by\" comments to files. We only have them in some other files that were inherited from the old Emby code.", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/490#discussion_r432844669", "createdAt": "2020-05-30T14:12:29Z", "author": {"login": "nielsvanvelzen"}, "path": "app/src/main/java/org/jellyfin/androidtv/util/BackgroundManagerUtils.kt", "diffHunk": "@@ -0,0 +1,42 @@\n+package org.jellyfin.androidtv.util\n+\n+import android.app.Activity\n+import android.graphics.drawable.Drawable\n+import androidx.leanback.app.BackgroundManager\n+import com.bumptech.glide.Glide\n+import com.bumptech.glide.load.DataSource\n+import com.bumptech.glide.load.engine.GlideException\n+import com.bumptech.glide.load.resource.bitmap.BitmapTransformation\n+import com.bumptech.glide.load.resource.bitmap.CenterInside\n+import com.bumptech.glide.request.RequestListener\n+import com.bumptech.glide.request.target.Target\n+\n+/** Created by Oriol on 30/05/20. **/", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "76387cae8ed3cf5ef94c61586367333e9d90dde6"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY5NTk5NzgzOnYy", "diffSide": "RIGHT", "path": "app/src/main/java/org/jellyfin/androidtv/util/BackgroundManagerUtils.kt", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0zMFQxNDoxMzoyM1rOGcyv0g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0zMFQxNjoyMjozNlrOGc0JIQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjg0NDc1NA==", "bodyText": "This could be a context", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/490#discussion_r432844754", "createdAt": "2020-05-30T14:13:23Z", "author": {"login": "nielsvanvelzen"}, "path": "app/src/main/java/org/jellyfin/androidtv/util/BackgroundManagerUtils.kt", "diffHunk": "@@ -0,0 +1,42 @@\n+package org.jellyfin.androidtv.util\n+\n+import android.app.Activity\n+import android.graphics.drawable.Drawable\n+import androidx.leanback.app.BackgroundManager\n+import com.bumptech.glide.Glide\n+import com.bumptech.glide.load.DataSource\n+import com.bumptech.glide.load.engine.GlideException\n+import com.bumptech.glide.load.resource.bitmap.BitmapTransformation\n+import com.bumptech.glide.load.resource.bitmap.CenterInside\n+import com.bumptech.glide.request.RequestListener\n+import com.bumptech.glide.request.target.Target\n+\n+/** Created by Oriol on 30/05/20. **/\n+\n+fun BackgroundManager.drawable(\n+\tactivity: Activity,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "76387cae8ed3cf5ef94c61586367333e9d90dde6"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjg2NzYxNw==", "bodyText": "indeed, what a mistake", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/490#discussion_r432867617", "createdAt": "2020-05-30T16:22:36Z", "author": {"login": "tukilo"}, "path": "app/src/main/java/org/jellyfin/androidtv/util/BackgroundManagerUtils.kt", "diffHunk": "@@ -0,0 +1,42 @@\n+package org.jellyfin.androidtv.util\n+\n+import android.app.Activity\n+import android.graphics.drawable.Drawable\n+import androidx.leanback.app.BackgroundManager\n+import com.bumptech.glide.Glide\n+import com.bumptech.glide.load.DataSource\n+import com.bumptech.glide.load.engine.GlideException\n+import com.bumptech.glide.load.resource.bitmap.BitmapTransformation\n+import com.bumptech.glide.load.resource.bitmap.CenterInside\n+import com.bumptech.glide.request.RequestListener\n+import com.bumptech.glide.request.target.Target\n+\n+/** Created by Oriol on 30/05/20. **/\n+\n+fun BackgroundManager.drawable(\n+\tactivity: Activity,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjg0NDc1NA=="}, "originalCommit": {"oid": "76387cae8ed3cf5ef94c61586367333e9d90dde6"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY5NTk5ODkwOnYy", "diffSide": "RIGHT", "path": "app/src/main/java/org/jellyfin/androidtv/util/BackgroundManagerUtils.kt", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0zMFQxNDoxNTozNVrOGcywbw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0zMFQxNDoxNTozNVrOGcywbw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjg0NDkxMQ==", "bodyText": "We should return true here", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/490#discussion_r432844911", "createdAt": "2020-05-30T14:15:35Z", "author": {"login": "nielsvanvelzen"}, "path": "app/src/main/java/org/jellyfin/androidtv/util/BackgroundManagerUtils.kt", "diffHunk": "@@ -0,0 +1,42 @@\n+package org.jellyfin.androidtv.util\n+\n+import android.app.Activity\n+import android.graphics.drawable.Drawable\n+import androidx.leanback.app.BackgroundManager\n+import com.bumptech.glide.Glide\n+import com.bumptech.glide.load.DataSource\n+import com.bumptech.glide.load.engine.GlideException\n+import com.bumptech.glide.load.resource.bitmap.BitmapTransformation\n+import com.bumptech.glide.load.resource.bitmap.CenterInside\n+import com.bumptech.glide.request.RequestListener\n+import com.bumptech.glide.request.target.Target\n+\n+/** Created by Oriol on 30/05/20. **/\n+\n+fun BackgroundManager.drawable(\n+\tactivity: Activity,\n+\turl: String,\n+\tskipMemoryCache: Boolean = true,\n+\ttransformation: BitmapTransformation = CenterInside(),\n+\twidthPixels: Int,\n+\theightPixels: Int\n+) {\n+\n+\tGlide.with(activity)\n+\t\t.load(url)\n+\t\t.skipMemoryCache(skipMemoryCache)\n+\t\t.override(widthPixels, heightPixels)\n+\t\t.transform(transformation)\n+\t\t.listener(object : RequestListener<Drawable?> {\n+\t\t\toverride fun onLoadFailed(e: GlideException?, model: Any, target: Target<Drawable?>, isFirstResource: Boolean): Boolean {\n+\t\t\t\treturn false\n+\t\t\t}\n+\n+\t\t\toverride fun onResourceReady(resource: Drawable?, model: Any, target: Target<Drawable?>, dataSource: DataSource, isFirstResource: Boolean): Boolean {\n+\t\t\t\tdrawable = resource\n+\t\t\t\treturn false", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "76387cae8ed3cf5ef94c61586367333e9d90dde6"}, "originalPosition": 37}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY5NjIwMjI5OnYy", "diffSide": "RIGHT", "path": "app/src/main/java/org/jellyfin/androidtv/util/BackgroundManagerUtils.kt", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0zMFQxODoxOToxNVrOGc0pUA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0zMFQxODo1Mjo1OFrOGc0zZA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjg3NTg1Ng==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t.override(widthPixels, heightPixels)\n          \n          \n            \n            \t\t.override(widthPixels, heightPixels)\n          \n          \n            \n            \t\t.centerCrop()\n          \n      \n    \n    \n  \n\nWhen testing I noticed some backdrops getting stretched which did not happen before this PR. Adding the centerCrop function here fixed it.", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/490#discussion_r432875856", "createdAt": "2020-05-30T18:19:15Z", "author": {"login": "nielsvanvelzen"}, "path": "app/src/main/java/org/jellyfin/androidtv/util/BackgroundManagerUtils.kt", "diffHunk": "@@ -0,0 +1,36 @@\n+package org.jellyfin.androidtv.util\n+\n+import android.content.Context\n+import android.graphics.drawable.Drawable\n+import androidx.leanback.app.BackgroundManager\n+import com.bumptech.glide.Glide\n+import com.bumptech.glide.load.DataSource\n+import com.bumptech.glide.load.engine.GlideException\n+import com.bumptech.glide.request.RequestListener\n+import com.bumptech.glide.request.target.Target\n+import timber.log.Timber\n+\n+fun BackgroundManager.drawable(\n+\tcontext: Context,\n+\turl: String,\n+\twidthPixels: Int,\n+\theightPixels: Int\n+) {\n+\n+\tGlide.with(context)\n+\t\t.load(url)\n+\t\t.override(widthPixels, heightPixels)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f01b88996d7ddcfacaef28711af6a5b55ee4b77"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjg3ODQzNg==", "bodyText": "And it makes sense because I eliminated it without realizing", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/490#discussion_r432878436", "createdAt": "2020-05-30T18:52:58Z", "author": {"login": "tukilo"}, "path": "app/src/main/java/org/jellyfin/androidtv/util/BackgroundManagerUtils.kt", "diffHunk": "@@ -0,0 +1,36 @@\n+package org.jellyfin.androidtv.util\n+\n+import android.content.Context\n+import android.graphics.drawable.Drawable\n+import androidx.leanback.app.BackgroundManager\n+import com.bumptech.glide.Glide\n+import com.bumptech.glide.load.DataSource\n+import com.bumptech.glide.load.engine.GlideException\n+import com.bumptech.glide.request.RequestListener\n+import com.bumptech.glide.request.target.Target\n+import timber.log.Timber\n+\n+fun BackgroundManager.drawable(\n+\tcontext: Context,\n+\turl: String,\n+\twidthPixels: Int,\n+\theightPixels: Int\n+) {\n+\n+\tGlide.with(context)\n+\t\t.load(url)\n+\t\t.override(widthPixels, heightPixels)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjg3NTg1Ng=="}, "originalCommit": {"oid": "9f01b88996d7ddcfacaef28711af6a5b55ee4b77"}, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY5NjgwNDI1OnYy", "diffSide": "RIGHT", "path": "app/src/main/java/org/jellyfin/androidtv/util/BackgroundManagerUtils.kt", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0zMVQxNTowNToyOVrOGc5iLQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0zMVQxNTowNToyOVrOGc5iLQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjk1NTk0OQ==", "bodyText": "As this file only contains a single extension function I'd recommend renaming it to \"BackgroundManagerExtensions\" to stay consistent with the other file(s)", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/490#discussion_r432955949", "createdAt": "2020-05-31T15:05:29Z", "author": {"login": "nielsvanvelzen"}, "path": "app/src/main/java/org/jellyfin/androidtv/util/BackgroundManagerUtils.kt", "diffHunk": "@@ -0,0 +1,37 @@\n+package org.jellyfin.androidtv.util\n+\n+import android.content.Context\n+import android.graphics.drawable.Drawable\n+import androidx.leanback.app.BackgroundManager\n+import com.bumptech.glide.Glide\n+import com.bumptech.glide.load.DataSource\n+import com.bumptech.glide.load.engine.GlideException\n+import com.bumptech.glide.request.RequestListener\n+import com.bumptech.glide.request.target.Target\n+import timber.log.Timber\n+\n+fun BackgroundManager.drawable(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d21b97be9c204d2ef54d9b6a238be25217886499"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY5NjgwNDQ4OnYy", "diffSide": "RIGHT", "path": "app/src/main/java/org/jellyfin/androidtv/util/BackgroundManagerUtils.kt", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0zMVQxNTowNTo0MlrOGc5iSQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0zMVQxNTowNTo0MlrOGc5iSQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjk1NTk3Nw==", "bodyText": "Unnecessary whitespace", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/490#discussion_r432955977", "createdAt": "2020-05-31T15:05:42Z", "author": {"login": "nielsvanvelzen"}, "path": "app/src/main/java/org/jellyfin/androidtv/util/BackgroundManagerUtils.kt", "diffHunk": "@@ -0,0 +1,37 @@\n+package org.jellyfin.androidtv.util\n+\n+import android.content.Context\n+import android.graphics.drawable.Drawable\n+import androidx.leanback.app.BackgroundManager\n+import com.bumptech.glide.Glide\n+import com.bumptech.glide.load.DataSource\n+import com.bumptech.glide.load.engine.GlideException\n+import com.bumptech.glide.request.RequestListener\n+import com.bumptech.glide.request.target.Target\n+import timber.log.Timber\n+\n+fun BackgroundManager.drawable(\n+\tcontext: Context,\n+\turl: String,\n+\twidthPixels: Int,\n+\theightPixels: Int\n+) {\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d21b97be9c204d2ef54d9b6a238be25217886499"}, "originalPosition": 19}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY5NjgwNDU0OnYy", "diffSide": "RIGHT", "path": "app/src/main/java/org/jellyfin/androidtv/util/BackgroundManagerUtils.kt", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0zMVQxNTowNTo1MlrOGc5iUg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0zMVQxNTowNTo1MlrOGc5iUg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjk1NTk4Ng==", "bodyText": "Unnecessary whitespace", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/490#discussion_r432955986", "createdAt": "2020-05-31T15:05:52Z", "author": {"login": "nielsvanvelzen"}, "path": "app/src/main/java/org/jellyfin/androidtv/util/BackgroundManagerUtils.kt", "diffHunk": "@@ -0,0 +1,37 @@\n+package org.jellyfin.androidtv.util\n+\n+import android.content.Context\n+import android.graphics.drawable.Drawable\n+import androidx.leanback.app.BackgroundManager\n+import com.bumptech.glide.Glide\n+import com.bumptech.glide.load.DataSource\n+import com.bumptech.glide.load.engine.GlideException\n+import com.bumptech.glide.request.RequestListener\n+import com.bumptech.glide.request.target.Target\n+import timber.log.Timber\n+\n+fun BackgroundManager.drawable(\n+\tcontext: Context,\n+\turl: String,\n+\twidthPixels: Int,\n+\theightPixels: Int\n+) {\n+\n+\tGlide.with(context)\n+\t\t.load(url)\n+\t\t.override(widthPixels, heightPixels)\n+\t\t.centerCrop()\n+\t\t.listener(object : RequestListener<Drawable?> {\n+\t\t\toverride fun onLoadFailed(e: GlideException?, model: Any, target: Target<Drawable?>, isFirstResource: Boolean): Boolean {\n+\t\t\t\tTimber.e(e)\n+\t\t\t\treturn false\n+\t\t\t}\n+\n+\t\t\toverride fun onResourceReady(resource: Drawable?, model: Any, target: Target<Drawable?>, dataSource: DataSource, isFirstResource: Boolean): Boolean {\n+\t\t\t\tdrawable = resource\n+\t\t\t\treturn true\n+\t\t\t}\n+\t\t}).submit()\n+\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d21b97be9c204d2ef54d9b6a238be25217886499"}, "originalPosition": 36}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 912, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}