{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIwODc2OTAx", "number": 625, "title": "Fix some crashes when trying to play series", "bodyText": "Changes\n\nFix crash when using the \"Play all\" button\nFix crash when using the \"Play Next Up\" button\n\nBoth are \"patches\" to make it work, I suspect the underlying issue is a race condition or some other weird spaghetti monster. I've experienced both crashes quite a lot but only now found a way to fix it.\nIssues", "createdAt": "2020-11-13T22:11:23Z", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/625", "merged": true, "mergeCommit": {"oid": "97b9e841a45ee2f539ee27d6ce707a7fbf2eca64"}, "closed": true, "closedAt": "2020-11-16T15:24:56Z", "author": {"login": "nielsvanvelzen"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdcOjhTgH2gAyNTIwODc2OTAxOjMyNDFiZWVjMDM4NGI3ZWIxYzE2NjY5NDQ1NmExZTFlMGQxOWIxYzY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABddGoobgFqTUzMTQyNTc5Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "3241beec0384b7eb1c166694456a1e1e0d19b1c6", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/3241beec0384b7eb1c166694456a1e1e0d19b1c6", "committedDate": "2020-11-13T22:04:35Z", "message": "Fix issue where using the \"Play All\" button on series would crash the app"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e5c0acb0cd8763cf46ac1ff4bd2877b61e07c342", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/e5c0acb0cd8763cf46ac1ff4bd2877b61e07c342", "committedDate": "2020-11-13T22:09:12Z", "message": "Fix issue where using the \"Play Next Up\" button on series would crash the app"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMwNzY3NTI0", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/625#pullrequestreview-530767524", "createdAt": "2020-11-15T05:05:49Z", "commit": {"oid": "e5c0acb0cd8763cf46ac1ff4bd2877b61e07c342"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNVQwNTowNTo0OVrOHzco_Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNVQwNTowNTo0OVrOHzco_Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzcwODY2OQ==", "bodyText": "Brackets please \ud83d\ude4f", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/625#discussion_r523708669", "createdAt": "2020-11-15T05:05:49Z", "author": {"login": "thornbill"}, "path": "app/src/main/java/org/jellyfin/androidtv/ui/playback/PlaybackController.java", "diffHunk": "@@ -143,7 +144,17 @@ public void setPlaybackMethod(PlayMethod value) {\n     public BaseItemDto getCurrentlyPlayingItem() {\n         return mItems.size() > mCurrentIndex ? mItems.get(mCurrentIndex) : null;\n     }\n-    public MediaSourceInfo getCurrentMediaSource() { return mCurrentStreamInfo != null && mCurrentStreamInfo.getMediaSource() != null ? mCurrentStreamInfo.getMediaSource() : getCurrentlyPlayingItem().getMediaSources().get(0);}\n+\n+    public MediaSourceInfo getCurrentMediaSource() {\n+        if (mCurrentStreamInfo != null && mCurrentStreamInfo.getMediaSource() != null) {\n+            return mCurrentStreamInfo.getMediaSource();\n+        } else {\n+            ArrayList<MediaSourceInfo> mediaSources = getCurrentlyPlayingItem().getMediaSources();\n+            if (mediaSources == null || mediaSources.isEmpty()) return null;\n+            else return mediaSources.get(0);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e5c0acb0cd8763cf46ac1ff4bd2877b61e07c342"}, "originalPosition": 20}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aa2a1a52a4afd00ede31df788ce25b37b3a430a6", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/aa2a1a52a4afd00ede31df788ce25b37b3a430a6", "committedDate": "2020-11-15T09:10:46Z", "message": "Fix codestyle in PlaybackController getCurrentMediaSource"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMxNDI1Nzky", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/625#pullrequestreview-531425792", "createdAt": "2020-11-16T15:24:51Z", "commit": {"oid": "aa2a1a52a4afd00ede31df788ce25b37b3a430a6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4230, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}