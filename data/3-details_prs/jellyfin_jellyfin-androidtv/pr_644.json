{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI5MDg3OTkx", "number": 644, "title": "Add initial authentication storage", "bodyText": "Changes\n\nStore credentials\n\nUses Android's AccountManager to store access tokens and the ability to remove accounts from within the system settings\n\n\nDisplay all servers from: storage, server discovery, legacy credentials\nDisplay all users from: public user endpoint, storage, legacy credentials\nDisplay errors when adding a server/user (rough implementation)\nSign in\nBackup Jellyfin app settings and credentials (without access tokens)\n\nFuture pull requests\n\nCache & show profile pictures\nRemember last user\n\nTODO\n\n Remove accidently committed dev note files\n Squash all commits\n Rewrite legacy credential migration code\n Clean up all code\n\nIssues\nPart of #612\nDev notes\nThe AlertFragment uses callbacks passed via the constructor. This is not a good idea for 2 reasons\n\nFragment's should not have custom constructors per Android guidelines, this StackOverflow article explains it a bit.\nIn this case the callbacks came from another fragment which was unloaded at the time the callback executed. This caused issues were the viewmodel was unavailable and crashed the app.\n\nWe should aim for fragments that are not dependent on other fragments/activies. All UI should only interact via viewmodels with repositories/services/etc. and data should be passed via Bundles.\nOther\nI decided to use UUID everywhere since this is what the new apiclient does too. In order to make things work I added a few helper methods to convert string -> uuid that support the \"simple\" format (which doesn't use hyphens). Because those UUID's differ from the strings in the old credentials I needed to convert strings -> uuid -> string a bunch of times. This will all be solved when we remove the legacy credential support and upgrade to the new apiclient.\nI've also decided to use Kotlin's flow internally and convert it to Android's LiveData at the end of the pipeline because a flow is much easier to work with and provides a more rich API. I added a helper method for flows too to collect them to a LiveData<List<T>>.", "createdAt": "2020-11-29T10:24:15Z", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/644", "merged": true, "mergeCommit": {"oid": "d3fc28d8e5a55d99f2f63b6e34d49db587122d3f"}, "closed": true, "closedAt": "2020-12-30T22:28:03Z", "author": {"login": "nielsvanvelzen"}, "timelineItems": {"totalCount": 50, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdokY_UgFqTU1Njg0MzM5MA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdrXDWJgFqTU2MDIxODcwMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU2ODQzMzkw", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/644#pullrequestreview-556843390", "createdAt": "2020-12-22T06:18:05Z", "commit": {"oid": "dc8428b0bf05bfb7370bdf4c7a271b2251a37a45"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQwNjoxODowNVrOIJvt7g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQwNjoxODowNVrOIJvt7g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzA4OTkwMg==", "bodyText": "We should suppress these warnings.", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/644#discussion_r547089902", "createdAt": "2020-12-22T06:18:05Z", "author": {"login": "thornbill"}, "path": "app/src/main/java/org/jellyfin/androidtv/auth/AuthenticationRepository.kt", "diffHunk": "@@ -0,0 +1,138 @@\n+package org.jellyfin.androidtv.auth\n+\n+import kotlinx.coroutines.ExperimentalCoroutinesApi\n+import kotlinx.coroutines.flow.Flow\n+import kotlinx.coroutines.flow.emitAll\n+import kotlinx.coroutines.flow.flow\n+import org.jellyfin.androidtv.JellyfinApplication\n+import org.jellyfin.androidtv.auth.model.*\n+import org.jellyfin.androidtv.util.apiclient.callApi\n+import org.jellyfin.androidtv.util.toUUID\n+import org.jellyfin.apiclient.Jellyfin\n+import org.jellyfin.apiclient.interaction.ApiClient\n+import org.jellyfin.apiclient.interaction.device.IDevice\n+import org.jellyfin.apiclient.model.apiclient.ServerInfo\n+import org.jellyfin.apiclient.model.dto.UserDto\n+import org.jellyfin.apiclient.model.users.AuthenticationResult\n+import timber.log.Timber\n+import java.util.*\n+\n+class AuthenticationRepository(\n+\tprivate val application: JellyfinApplication,\n+\tprivate val jellyfin: Jellyfin,\n+\tprivate val apiClient: ApiClient,\n+\tprivate val device: IDevice,\n+\tprivate val accountManagerHelper: AccountManagerHelper,\n+\tprivate val authenticationStore: AuthenticationStore,\n+) {\n+\tfun getServers() = authenticationStore.getServers().map { (id, info) ->\n+\t\tServer(id, info.name, info.address, Date(info.lastUsed))\n+\t}\n+\n+\tfun getUsers(server: UUID): List<PrivateUser>? = authenticationStore.getUsers(server)?.mapNotNull { (userId, userInfo) ->\n+\t\taccountManagerHelper.getAccount(userId)?.let { authInfo ->\n+\t\t\tPrivateUser(userId, authInfo.server, userInfo.name, authInfo.accessToken)\n+\t\t}\n+\t}\n+\n+\tfun saveServer(id: UUID, name: String, address: String) {\n+\t\tval current = authenticationStore.getServer(id)\n+\n+\t\tif (current != null)\n+\t\t\tauthenticationStore.putServer(id, current.copy(name = name, address = address))\n+\t\telse\n+\t\t\tauthenticationStore.putServer(id, AuthenticationStoreServer(name, address))\n+\t}\n+\n+\t/**\n+\t * Set the active session to the information in [user] and [server].\n+\t * Connects to the server and requests the info of the currently authenticated user.\n+\t *\n+\t * @return Whether the user information can be retrieved\n+\t */\n+\tprivate suspend fun setActiveSession(user: User, server: Server): Boolean {\n+\t\tapiClient.SetAuthenticationInfo(user.accessToken, user.id.toString())\n+\t\tapiClient.EnableAutomaticNetworking(ServerInfo().apply {\n+\t\t\tid = server.id.toString()\n+\t\t\tname = server.name\n+\t\t\taddress = server.address\n+\t\t\tuserId = user.id.toString()\n+\t\t\taccessToken = user.accessToken\n+\t\t})\n+\n+\t\ttry {\n+\t\t\tval userDto = callApi<UserDto?> { callback -> apiClient.GetUserAsync(user.id.toString(), callback) }\n+\t\t\tif (userDto != null) {\n+\t\t\t\tapplication.currentUser = userDto\n+\t\t\t\treturn true\n+\t\t\t}\n+\t\t} catch (err: Exception) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dc8428b0bf05bfb7370bdf4c7a271b2251a37a45"}, "originalPosition": 69}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "63e599f0683e6043463f6a3ece18dccf11aff86e", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/63e599f0683e6043463f6a3ece18dccf11aff86e", "committedDate": "2020-12-22T21:33:02Z", "message": "Implement the Android AccountStore to save users"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "89b0dd577fd4a00554ffdf06312d276b07bfbe0d", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/89b0dd577fd4a00554ffdf06312d276b07bfbe0d", "committedDate": "2020-12-22T21:33:03Z", "message": "Initial authentication storage code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5a3dcfc4483842443f88ce56c0ae8f4e98763937", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/5a3dcfc4483842443f88ce56c0ae8f4e98763937", "committedDate": "2020-12-22T21:33:05Z", "message": "Integration test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c72895df5f0ef3f10601ea0c7fe05435d1f0670b", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/c72895df5f0ef3f10601ea0c7fe05435d1f0670b", "committedDate": "2020-12-22T21:33:06Z", "message": "extensions -> class"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "de661fe4d4022b7448a8c57b3a1dbe261564a901", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/de661fe4d4022b7448a8c57b3a1dbe261564a901", "committedDate": "2020-12-22T21:33:07Z", "message": "viewmodel progress"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8bd6bc82d90bfd60fc88684cf905036f3704ef37", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/8bd6bc82d90bfd60fc88684cf905036f3704ef37", "committedDate": "2020-12-22T21:33:09Z", "message": "use uuid"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "79e5151741f8f16f77591d9bdfe29cf8dbe3291c", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/79e5151741f8f16f77591d9bdfe29cf8dbe3291c", "committedDate": "2020-12-22T21:33:10Z", "message": "LiveData mess"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4836b8b27e69660e0707760f19452256749c9544", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/4836b8b27e69660e0707760f19452256749c9544", "committedDate": "2020-12-22T21:33:11Z", "message": "Restore saved servers"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "27add9f826ca80eb7089c56f54c58c02f0227bc9", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/27add9f826ca80eb7089c56f54c58c02f0227bc9", "committedDate": "2020-12-22T21:33:12Z", "message": "Add backups"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a4df38a10e27d4847a7b81984f98b6e4d68a3bad", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/a4df38a10e27d4847a7b81984f98b6e4d68a3bad", "committedDate": "2020-12-22T21:33:17Z", "message": "New flow based server and user retrieval"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4c52ae5e9c0ecb2fa5ae295828eef7fbd2ef692a", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/4c52ae5e9c0ecb2fa5ae295828eef7fbd2ef692a", "committedDate": "2020-12-22T21:33:23Z", "message": "Add other sources for servers and users and remove duplicates"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "07e20b3323c091bd8a12a1ca9a2255bea9568da2", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/07e20b3323c091bd8a12a1ca9a2255bea9568da2", "committedDate": "2020-12-22T21:33:28Z", "message": "Fix legacy credential uuid's"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b980aa9bd4c2e56bf8fb269142bcd536b2b45041", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/b980aa9bd4c2e56bf8fb269142bcd536b2b45041", "committedDate": "2020-12-22T21:33:31Z", "message": "Save server"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0beb56edc7bd004238a242e072faccbbe3ae7e4a", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/0beb56edc7bd004238a242e072faccbbe3ae7e4a", "committedDate": "2020-12-22T21:33:33Z", "message": "Initial signin support"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "80e6118bdd113adc706a7cd2d796af447e877411", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/80e6118bdd113adc706a7cd2d796af447e877411", "committedDate": "2020-12-22T21:33:34Z", "message": "Store user dto after signing in"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c4dea67647e3f8dcba408111f10b0bdc10b46513", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/c4dea67647e3f8dcba408111f10b0bdc10b46513", "committedDate": "2020-12-22T21:33:35Z", "message": "Allow login with server from legacy format"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "876d87631d9deb764d1c12a9496b55a839836b4c", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/876d87631d9deb764d1c12a9496b55a839836b4c", "committedDate": "2020-12-22T21:33:36Z", "message": "Fix legacy user not showing and duplicates not handled when UUID format was different"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aa32bf3f905922d5f70ab8828c77a2aa3eb03a9c", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/aa32bf3f905922d5f70ab8828c77a2aa3eb03a9c", "committedDate": "2020-12-22T21:33:37Z", "message": "Store imagetag instead of url"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5cbc249701ba772f5a8103603450b7fb735654b3", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/5cbc249701ba772f5a8103603450b7fb735654b3", "committedDate": "2020-12-22T21:33:38Z", "message": "Re-order manifest"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6e9454fd1a313cddf916c2b9573c3dfd5a4fb0f8", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/6e9454fd1a313cddf916c2b9573c3dfd5a4fb0f8", "committedDate": "2020-12-22T21:33:39Z", "message": "Optimize models"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d5baf94fe4f089789e4b92f3a7f8032717f8c044", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/d5baf94fe4f089789e4b92f3a7f8032717f8c044", "committedDate": "2020-12-22T21:33:40Z", "message": "Add getUser/getServer functions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fb7ec6837d7cbc66f474f09808d0ecddec617a50", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/fb7ec6837d7cbc66f474f09808d0ecddec617a50", "committedDate": "2020-12-22T21:33:41Z", "message": "More cleaning"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0abaff4b716f82c864ab00a33839942899b0e6a5", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/0abaff4b716f82c864ab00a33839942899b0e6a5", "committedDate": "2020-12-22T21:33:43Z", "message": "url -> address"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "26d8ceac802380d39ebbe229a7ca0ed201e8ab28", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/26d8ceac802380d39ebbe229a7ca0ed201e8ab28", "committedDate": "2020-12-22T21:33:44Z", "message": "Fix few crashes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7c27daeccc54cd21c77d7978f9a8345104b08103", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/7c27daeccc54cd21c77d7978f9a8345104b08103", "committedDate": "2020-12-22T21:33:45Z", "message": "Convert legacy credentials to new format on boot"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8002a6832532ae00b984dda725dda382f46b54ac", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/8002a6832532ae00b984dda725dda382f46b54ac", "committedDate": "2020-12-22T21:33:47Z", "message": "Remvoe profile picture (unused, can use id)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "77e2f7800c58f3b29b3a68462c06a091ba66dbd8", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/77e2f7800c58f3b29b3a68462c06a091ba66dbd8", "committedDate": "2020-12-22T21:33:48Z", "message": "Refactor User class"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7640ecd7315af5b3d374bae54764e497e550945a", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/7640ecd7315af5b3d374bae54764e497e550945a", "committedDate": "2020-12-22T21:33:49Z", "message": "Refactor Server class"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ef729fcf6b0d15c1ec6fbab35598a63c75fe463b", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/ef729fcf6b0d15c1ec6fbab35598a63c75fe463b", "committedDate": "2020-12-22T21:33:52Z", "message": "Clean ModelExtensions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "87ca3e3069a62ac7e3ebeb89c0f6a79b5de5096d", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/87ca3e3069a62ac7e3ebeb89c0f6a79b5de5096d", "committedDate": "2020-12-22T21:33:54Z", "message": "Refactor packages"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1117987f97d700d17b492b4820c92933d9271fa0", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/1117987f97d700d17b492b4820c92933d9271fa0", "committedDate": "2020-12-22T21:33:57Z", "message": "Add more error handling"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "371320b75d0e17712d37364b7ca9223437ceb6e6", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/371320b75d0e17712d37364b7ca9223437ceb6e6", "committedDate": "2020-12-22T21:33:57Z", "message": "-scratch.md"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cd1ad2e02d01e5ffa4df7c24d748d459759dabdc", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/cd1ad2e02d01e5ffa4df7c24d748d459759dabdc", "committedDate": "2020-12-22T21:33:59Z", "message": "Fix compile errors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "021ca1c955f14343968877e3136d7a6f6051cb8d", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/021ca1c955f14343968877e3136d7a6f6051cb8d", "committedDate": "2020-12-22T21:34:01Z", "message": "Catch bad token condition"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c6d1f3e8f180573de614a81f59173420a04dd305", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/c6d1f3e8f180573de614a81f59173420a04dd305", "committedDate": "2020-12-22T21:34:01Z", "message": "Fix tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e9a45fb85f67c3e9b5f29bd0c5da950226bad012", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/e9a45fb85f67c3e9b5f29bd0c5da950226bad012", "committedDate": "2020-12-22T21:34:04Z", "message": "Fix discovery crashing the app"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a8788556caf959bfc4d61edaf925a12675cfe49b", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/a8788556caf959bfc4d61edaf925a12675cfe49b", "committedDate": "2020-12-22T21:34:05Z", "message": "Fix server info missing in legacy apiclient"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "16021d12e7ac65bda52afef2cec469c721d63164", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/16021d12e7ac65bda52afef2cec469c721d63164", "committedDate": "2020-12-22T21:34:06Z", "message": "Skip login screen for passwordless public users"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "30241d582de41ed9bdaf942df1e9e9d6bf69fa8c", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/30241d582de41ed9bdaf942df1e9e9d6bf69fa8c", "committedDate": "2020-12-22T21:34:08Z", "message": "Rewrite server/user retrieval flow part 1/2"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5e4705d297a3c0bb6330e05a156dd97a31fe0ac6", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/5e4705d297a3c0bb6330e05a156dd97a31fe0ac6", "committedDate": "2020-12-22T21:34:09Z", "message": "Rewrite server/user retrieval flow part 2/2"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7afe640bd1c4a4477d4a775576713cb026bdab9c", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/7afe640bd1c4a4477d4a775576713cb026bdab9c", "committedDate": "2020-12-22T21:34:10Z", "message": "Fix authentication failing for discovered servers"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "13e736a300e3d5ec31de000f2fca919241e7017b", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/13e736a300e3d5ec31de000f2fca919241e7017b", "committedDate": "2020-12-22T21:34:10Z", "message": "Fix ModelExtensionsTest"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5a7a46b2b525c130612c09963d70dc1e01b34490", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/5a7a46b2b525c130612c09963d70dc1e01b34490", "committedDate": "2020-12-22T21:31:20Z", "message": "Resolve a bunch of linter warnings"}, "afterCommit": {"oid": "3e9e1105b9150478dbbb523ba06d7509a8f1d7b5", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/3e9e1105b9150478dbbb523ba06d7509a8f1d7b5", "committedDate": "2020-12-22T21:34:11Z", "message": "Resolve a bunch of linter warnings"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6733c998c35bebd4fc224dd2a5da1cfb92828cc2", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/6733c998c35bebd4fc224dd2a5da1cfb92828cc2", "committedDate": "2020-12-24T15:57:26Z", "message": "Resolve a bunch of linter warnings"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3e9e1105b9150478dbbb523ba06d7509a8f1d7b5", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/3e9e1105b9150478dbbb523ba06d7509a8f1d7b5", "committedDate": "2020-12-22T21:34:11Z", "message": "Resolve a bunch of linter warnings"}, "afterCommit": {"oid": "6733c998c35bebd4fc224dd2a5da1cfb92828cc2", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/6733c998c35bebd4fc224dd2a5da1cfb92828cc2", "committedDate": "2020-12-24T15:57:26Z", "message": "Resolve a bunch of linter warnings"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b2fa8327cbbc144696cf4ecf76ba87a61cfffd13", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/b2fa8327cbbc144696cf4ecf76ba87a61cfffd13", "committedDate": "2020-12-29T18:26:53Z", "message": "Fix login for users without a password prompting for a password\n\nWe now remember if a user has a password (using a boolean) in the offline data set. If a user fails to authenticate because a password was added it will prompt for a password. If it's the other way around the user can just proceed in the password-prompt with an empty password and the boolean will be updated for future logins."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYwMjA1NzUw", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/644#pullrequestreview-560205750", "createdAt": "2020-12-30T21:27:17Z", "commit": {"oid": "b2fa8327cbbc144696cf4ecf76ba87a61cfffd13"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "050fe767c94fb1b0796bec76e1166e9cfd39d094", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/050fe767c94fb1b0796bec76e1166e9cfd39d094", "committedDate": "2020-12-30T21:56:25Z", "message": "Merge branch 'master' into accountmanager\n\n# Conflicts:\n#\tapp/src/main/java/org/jellyfin/androidtv/JellyfinApplication.kt\n#\tapp/src/main/java/org/jellyfin/androidtv/TvApp.java\n#\tapp/src/main/java/org/jellyfin/androidtv/di/AppModule.kt\n#\tapp/src/main/java/org/jellyfin/androidtv/ui/home/HomeFragment.java\n#\tapp/src/main/java/org/jellyfin/androidtv/ui/preference/category/authentication.kt"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYwMjE4NzAy", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/644#pullrequestreview-560218702", "createdAt": "2020-12-30T22:27:27Z", "commit": {"oid": "050fe767c94fb1b0796bec76e1166e9cfd39d094"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4241, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}