{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY1MDE1NDAx", "number": 540, "title": "Upgrade to apiclient 0.7.0", "bodyText": "This PR upgrades the code to be compatible with the new apiclient. Most of the changes are simple except for the credential manager changes.\nRight now the login flow is dialog-only. No servers or credentials are stored anymore. Only if a automatic login was configured before this change will it work. I could spend a lot of time making that work but considering those things will be rewritten for the new auth flow @thornbill is working on that is scheduled for the next release I did not bother.\nEdit (2020-08-17): Because we've had some issues publishing the apiclient to jcenter this PR uses the jitpack version. When the publishing issues are resolved I will make a separate pull request.\nEdit (2020-08-19): Fortunately the issues were solved quickly and we can now pull the apiclient from jcenter! I also removed the maven repository because jcenter mirrors it.", "createdAt": "2020-08-08T10:32:10Z", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/540", "merged": true, "mergeCommit": {"oid": "6e7ad894fda9826dc1556229a049ad5225a96133"}, "closed": true, "closedAt": "2020-08-21T18:30:15Z", "author": {"login": "nielsvanvelzen"}, "timelineItems": {"totalCount": 17, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc82xs9AFqTQ2Mzc5NTUyMQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdBJI-5gFqTQ3MjcwMjc3NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYzNzk1NTIx", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/540#pullrequestreview-463795521", "createdAt": "2020-08-08T10:50:42Z", "commit": {"oid": "42965f91451cadfb7da061415f2637591f33dfe9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOFQxMDo1MDo0MlrOG9zDzQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOFQxMDo1MDo0MlrOG9zDzQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzQ1Mjg3Nw==", "bodyText": "Why bother keeping the logger if we're removing the credential management?", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/540#discussion_r467452877", "createdAt": "2020-08-08T10:50:42Z", "author": {"login": "dkanada"}, "path": "app/src/main/java/org/jellyfin/androidtv/TvApp.java", "diffHunk": "@@ -94,7 +100,14 @@ protected void attachBaseContext(Context base) {\n     public void onCreate() {\n         super.onCreate();\n         app = (TvApp) getApplicationContext();\n-        playbackManager = new PlaybackManager(new AndroidDevice(this), new AndroidLogger(\"PlaybackManager\"));\n+        JellyfinOptions.Builder options = new JellyfinOptions.Builder();\n+        JellyfinAndroidKt.android(options, this);\n+        options.setLogger(new AndroidLogger());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "42965f91451cadfb7da061415f2637591f33dfe9"}, "originalPosition": 52}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f73e882a334e3553ec4379f5eac3412eae8f9a9f", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/f73e882a334e3553ec4379f5eac3412eae8f9a9f", "committedDate": "2020-08-15T09:03:39Z", "message": "Update TvApp to use the new ApiClient constructors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bc1e84af1672e22b4b86e87609d149c507c6fc57", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/bc1e84af1672e22b4b86e87609d149c507c6fc57", "committedDate": "2020-08-15T09:03:45Z", "message": "Fix SerializerRepository"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "77fad41890a00d45b529ffdcc1db4c4b598ac5e5", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/77fad41890a00d45b529ffdcc1db4c4b598ac5e5", "committedDate": "2020-08-15T09:03:46Z", "message": "Fix logger calls and removal of loginApiClient"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "70c3144d6241245610f276014061c5aa84f929b0", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/70c3144d6241245610f276014061c5aa84f929b0", "committedDate": "2020-08-15T09:03:48Z", "message": "Initial connectionManager changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "171931cfedbe7b2774e5814971054d4936f20d1d", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/171931cfedbe7b2774e5814971054d4936f20d1d", "committedDate": "2020-08-15T09:03:48Z", "message": "Initialize apiclient in tvapp"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2e0200fb5690551b091a976302d0921a81818fdf", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/2e0200fb5690551b091a976302d0921a81818fdf", "committedDate": "2020-08-15T09:03:49Z", "message": "Fix latest compile errors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "16fcd41b333d97f91d0373e0c8c8f17ce2b5c471", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/16fcd41b333d97f91d0373e0c8c8f17ce2b5c471", "committedDate": "2020-08-15T09:07:10Z", "message": "Fix rebase issue"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "42965f91451cadfb7da061415f2637591f33dfe9", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/42965f91451cadfb7da061415f2637591f33dfe9", "committedDate": "2020-08-08T10:29:09Z", "message": "Fix latest compile errors"}, "afterCommit": {"oid": "16fcd41b333d97f91d0373e0c8c8f17ce2b5c471", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/16fcd41b333d97f91d0373e0c8c8f17ce2b5c471", "committedDate": "2020-08-15T09:07:10Z", "message": "Fix rebase issue"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "31bc12883be7c514563da237470764721b3ff4d3", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/31bc12883be7c514563da237470764721b3ff4d3", "committedDate": "2020-08-17T16:41:40Z", "message": "Update apiclient version to 0.7.0"}, "afterCommit": {"oid": "b120c2aee7811feca9d8373da8b4332300cab238", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/b120c2aee7811feca9d8373da8b4332300cab238", "committedDate": "2020-08-18T16:08:06Z", "message": "Use Bintray repository for apiclient and update version to 0.7.1"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bf823738a776bdae63ed443aba586572e6d7233a", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/bf823738a776bdae63ed443aba586572e6d7233a", "committedDate": "2020-08-19T09:28:50Z", "message": "Use jcenter repository for apiclient and update version to 0.7.2"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b120c2aee7811feca9d8373da8b4332300cab238", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/b120c2aee7811feca9d8373da8b4332300cab238", "committedDate": "2020-08-18T16:08:06Z", "message": "Use Bintray repository for apiclient and update version to 0.7.1"}, "afterCommit": {"oid": "bf823738a776bdae63ed443aba586572e6d7233a", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/bf823738a776bdae63ed443aba586572e6d7233a", "committedDate": "2020-08-19T09:28:50Z", "message": "Use jcenter repository for apiclient and update version to 0.7.2"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1d931e030e38e3d267a6356c02b5c8c143a7c2aa", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/1d931e030e38e3d267a6356c02b5c8c143a7c2aa", "committedDate": "2020-08-19T09:32:56Z", "message": "Remove videolan maven repository\n\nIt's linked to jcenter so we don't need it"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ac66ed98757ed155eed804b6ad8d6ca46ee73a3e", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/ac66ed98757ed155eed804b6ad8d6ca46ee73a3e", "committedDate": "2020-08-21T17:44:08Z", "message": "Fix application crash when playback starts\n\nBecause somehow the playback manager needs the id of the server it's connected to (although a null value doesn't matter...)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "92cbb912270c9a5317c1f99a24a461afd1e2cff6", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/92cbb912270c9a5317c1f99a24a461afd1e2cff6", "committedDate": "2020-08-21T17:45:13Z", "message": "Remove all \"remember server\" logic from StartupActivity for now\n\nIt's not working properly and needs to be rewritten, removing this code at least makes the app usable although each restart requires signin."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2c2ac5780dc7c835c4efef1d7b2a5b8d7a714ddd", "author": {"user": {"login": "nielsvanvelzen", "name": "Niels van Velzen"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/2c2ac5780dc7c835c4efef1d7b2a5b8d7a714ddd", "committedDate": "2020-08-21T17:52:41Z", "message": "Remove unused functions left over after removing server credential logic"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcyNzAyNzc0", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/540#pullrequestreview-472702774", "createdAt": "2020-08-21T18:30:07Z", "commit": {"oid": "2c2ac5780dc7c835c4efef1d7b2a5b8d7a714ddd"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4166, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}