{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk3MjUxNjgw", "number": 586, "title": "Fix unlabeled image buttons for accessibility", "bodyText": "Changes\n\n\nAdd setContentDescription to the buttons unlabeled: those to sort the movies/musics, those before the play/resume (put to favorite, mark the media viewed\u2026) and those in the playback overlay.\nAdd 3 strings to translate, lbl_pause, lbl_audio_track and lbl_subtitle_track, because I didn't find any string that would have matched.\n\nIssues\n\nFixes #418", "createdAt": "2020-10-03T10:12:04Z", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/586", "merged": true, "mergeCommit": {"oid": "092741f58dd2889949ce952a9c603a198a356005"}, "closed": true, "closedAt": "2020-10-23T08:20:49Z", "author": {"login": "jemlule"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdO3l9egH2gAyNDk3MjUxNjgwOmFlNjc2MGQyMGZkMDc3MjUwMzE2YjBiNzQwZDA3MmMxY2EyNThmZDk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdVSLRhgFqTUxNTQ0NDQ5Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "ae6760d20fd077250316b0b740d072c1ca258fd9", "author": {"user": {"login": "jemlule", "name": null}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/ae6760d20fd077250316b0b740d072c1ca258fd9", "committedDate": "2020-10-03T09:58:25Z", "message": "Label image buttons for accessibility"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAxNTczNTk5", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/586#pullrequestreview-501573599", "createdAt": "2020-10-03T20:53:58Z", "commit": {"oid": "ae6760d20fd077250316b0b740d072c1ca258fd9"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wM1QyMDo1Mzo1OFrOHcDmUw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wM1QyMDo1NjozOVrOHcDnAA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTE4MTEzOQ==", "bodyText": "findViewById is an expensive operation so it's better to assign the found view to a variable before using it to avoid finding a view multiple times. (same for the next 2)", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/586#discussion_r499181139", "createdAt": "2020-10-03T20:53:58Z", "author": {"login": "nielsvanvelzen"}, "path": "app/src/main/java/org/jellyfin/androidtv/ui/livetv/LiveTvGuideActivity.java", "diffHunk": "@@ -142,20 +142,23 @@ public void onClick(View v) {\n                 showFilterOptions();\n             }\n         });\n+        findViewById(R.id.filterButton).setContentDescription(getString(R.string.lbl_filters));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ae6760d20fd077250316b0b740d072c1ca258fd9"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTE4MTI2Nw==", "bodyText": "You need to add this somewhere around line 441", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/586#discussion_r499181267", "createdAt": "2020-10-03T20:55:48Z", "author": {"login": "nielsvanvelzen"}, "path": "app/src/main/java/org/jellyfin/androidtv/ui/playback/AudioNowPlayingActivity.java", "diffHunk": "@@ -235,8 +243,14 @@ public void onClick(View v) {\n         mPlayPauseButton.setOnClickListener(new View.OnClickListener() {\n             @Override\n             public void onClick(View v) {\n-                if (MediaManager.isPlayingAudio()) MediaManager.pauseAudio();\n-                else MediaManager.resumeAudio();\n+                if (MediaManager.isPlayingAudio()) {\n+                    MediaManager.pauseAudio();\n+                    mPlayPauseButton.setContentDescription(getString(R.string.lbl_play));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ae6760d20fd077250316b0b740d072c1ca258fd9"}, "originalPosition": 69}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTE4MTMxMg==", "bodyText": "Use context.getString()", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/586#discussion_r499181312", "createdAt": "2020-10-03T20:56:39Z", "author": {"login": "nielsvanvelzen"}, "path": "app/src/main/java/org/jellyfin/androidtv/ui/playback/overlay/CustomPlaybackTransportControlGlue.java", "diffHunk": "@@ -63,15 +65,24 @@ private void initActions(Context context) {\n         fastForwardAction = new PlaybackControlsRow.FastForwardAction(context);\n         skipNextAction = new PlaybackControlsRow.SkipNextAction(context);\n         selectAudioAction = new SelectAudioAction(context, this);\n+        selectAudioAction.setLabels(new String[]{TvApp.getApplication().getString(R.string.lbl_audio_track)});", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ae6760d20fd077250316b0b740d072c1ca258fd9"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c5b21c3478bffa8092edb906d9d2f3c6c71c5563", "author": {"user": {"login": "jemlule", "name": null}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/c5b21c3478bffa8092edb906d9d2f3c6c71c5563", "committedDate": "2020-10-04T12:09:00Z", "message": "Assign findViewById to a variable"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "420284414ee6eb027c5f06d67f938d8a8a6468e6", "author": {"user": {"login": "jemlule", "name": null}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/420284414ee6eb027c5f06d67f938d8a8a6468e6", "committedDate": "2020-10-04T12:09:00Z", "message": "Use context instead of TvApp.getApplication()"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ef4c8a7eed187d146271658a7bb022c60ca59b1b", "author": {"user": {"login": "jemlule", "name": null}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/ef4c8a7eed187d146271658a7bb022c60ca59b1b", "committedDate": "2020-10-04T12:09:00Z", "message": "Change PlayPauseButton label when updateButtons()"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1608fc8c8c8ae82e3277a31aa70403c674f1244d", "author": {"user": {"login": "jemlule", "name": null}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/1608fc8c8c8ae82e3277a31aa70403c674f1244d", "committedDate": "2020-10-04T10:17:44Z", "message": "Change PlayPauseButton label when updateButtons()"}, "afterCommit": {"oid": "ef4c8a7eed187d146271658a7bb022c60ca59b1b", "author": {"user": {"login": "jemlule", "name": null}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/ef4c8a7eed187d146271658a7bb022c60ca59b1b", "committedDate": "2020-10-04T12:09:00Z", "message": "Change PlayPauseButton label when updateButtons()"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA0MDMzNzAy", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/586#pullrequestreview-504033702", "createdAt": "2020-10-07T15:58:20Z", "commit": {"oid": "ef4c8a7eed187d146271658a7bb022c60ca59b1b"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QxNTo1ODoyMFrOHd6a4A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QxNTo1OTo0M1rOHd6e5w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTEyNzkwNA==", "bodyText": "You can add the property in the function like so:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    mFilterButton = findViewById(R.id.filterButton);\n          \n          \n            \n                    View mFilterButton = findViewById(R.id.filterButton);\n          \n      \n    \n    \n  \n\nAnd then remove the private View xx declarations.", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/586#discussion_r501127904", "createdAt": "2020-10-07T15:58:20Z", "author": {"login": "nielsvanvelzen"}, "path": "app/src/main/java/org/jellyfin/androidtv/ui/livetv/LiveTvGuideActivity.java", "diffHunk": "@@ -136,26 +139,32 @@ public void onCreate(Bundle savedInstanceState) {\n         mSpinner = findViewById(R.id.spinner);\n         mSpinner.setVisibility(View.VISIBLE);\n \n-        findViewById(R.id.filterButton).setOnClickListener(new View.OnClickListener() {\n+        mFilterButton = findViewById(R.id.filterButton);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ef4c8a7eed187d146271658a7bb022c60ca59b1b"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTEyODYyNQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            }\n          \n          \n            \n                            else {\n          \n          \n            \n                            } else {", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/586#discussion_r501128625", "createdAt": "2020-10-07T15:59:19Z", "author": {"login": "nielsvanvelzen"}, "path": "app/src/main/java/org/jellyfin/androidtv/ui/playback/AudioNowPlayingActivity.java", "diffHunk": "@@ -424,7 +438,14 @@ private void updateButtons(final boolean playing) {\n             @Override\n             public void run() {\n                 mPoster.setKeepScreenOn(playing);\n-                mPlayPauseButton.setState(!playing ? ImageButton.STATE_PRIMARY : ImageButton.STATE_SECONDARY);\n+                if (!playing) {\n+                    mPlayPauseButton.setState(ImageButton.STATE_PRIMARY);\n+                    mPlayPauseButton.setContentDescription(getString(R.string.lbl_play));\n+                }\n+                else {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ef4c8a7eed187d146271658a7bb022c60ca59b1b"}, "originalPosition": 87}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTEyODkzNQ==", "bodyText": "And you can now remove it from this line and line 252", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/586#discussion_r501128935", "createdAt": "2020-10-07T15:59:43Z", "author": {"login": "nielsvanvelzen"}, "path": "app/src/main/java/org/jellyfin/androidtv/ui/playback/AudioNowPlayingActivity.java", "diffHunk": "@@ -235,8 +243,14 @@ public void onClick(View v) {\n         mPlayPauseButton.setOnClickListener(new View.OnClickListener() {\n             @Override\n             public void onClick(View v) {\n-                if (MediaManager.isPlayingAudio()) MediaManager.pauseAudio();\n-                else MediaManager.resumeAudio();\n+                if (MediaManager.isPlayingAudio()) {\n+                    MediaManager.pauseAudio();\n+                    mPlayPauseButton.setContentDescription(getString(R.string.lbl_play));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTE4MTI2Nw=="}, "originalCommit": {"oid": "ae6760d20fd077250316b0b740d072c1ca258fd9"}, "originalPosition": 69}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2ada436e4d54e57eb14ad8600c58f3d549966bbc", "author": {"user": {"login": "jemlule", "name": null}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/2ada436e4d54e57eb14ad8600c58f3d549966bbc", "committedDate": "2020-10-19T16:34:29Z", "message": "Remove private declaration for buttons view"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b013c0fb652b66bf2f6758c59dd3f0c211b5ae62", "author": {"user": {"login": "jemlule", "name": null}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/b013c0fb652b66bf2f6758c59dd3f0c211b5ae62", "committedDate": "2020-10-19T16:39:26Z", "message": "Fix multiple declarations for content description"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTExOTYzMDgw", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/586#pullrequestreview-511963080", "createdAt": "2020-10-19T16:50:23Z", "commit": {"oid": "b013c0fb652b66bf2f6758c59dd3f0c211b5ae62"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxNjo1MDoyM1rOHkX8rQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxNjo1MDoyM1rOHkX8rQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzkwMzE0OQ==", "bodyText": "Codacy found an issue: Fields should be declared at the top of the class, before any method declarations, constructors, initializers or inner classes.", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/586#discussion_r507903149", "createdAt": "2020-10-19T16:50:23Z", "author": {"login": "jellyfin-bot"}, "path": "app/src/main/java/org/jellyfin/androidtv/ui/browsing/StdGridFragment.java", "diffHunk": "@@ -353,6 +353,9 @@ private void prepareBackgroundManager() {\n         getActivity().getWindowManager().getDefaultDisplay().getMetrics(mMetrics);\n     }\n \n+    protected ImageButton mSortButton;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b013c0fb652b66bf2f6758c59dd3f0c211b5ae62"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTExOTYzMDkw", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/586#pullrequestreview-511963090", "createdAt": "2020-10-19T16:50:24Z", "commit": {"oid": "b013c0fb652b66bf2f6758c59dd3f0c211b5ae62"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxNjo1MDoyNFrOHkX8tQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxNjo1MDoyNFrOHkX8tQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzkwMzE1Nw==", "bodyText": "Codacy found an issue: Fields should be declared at the top of the class, before any method declarations, constructors, initializers or inner classes.", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/586#discussion_r507903157", "createdAt": "2020-10-19T16:50:24Z", "author": {"login": "jellyfin-bot"}, "path": "app/src/main/java/org/jellyfin/androidtv/ui/browsing/StdGridFragment.java", "diffHunk": "@@ -353,6 +353,9 @@ private void prepareBackgroundManager() {\n         getActivity().getWindowManager().getDefaultDisplay().getMetrics(mMetrics);\n     }\n \n+    protected ImageButton mSortButton;\n+    protected ImageButton mSearchButton;\n+    protected ImageButton mSettingsButton;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b013c0fb652b66bf2f6758c59dd3f0c211b5ae62"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTExOTYzMDk4", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/586#pullrequestreview-511963098", "createdAt": "2020-10-19T16:50:24Z", "commit": {"oid": "b013c0fb652b66bf2f6758c59dd3f0c211b5ae62"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxNjo1MDoyNVrOHkX8uw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxNjo1MDoyNVrOHkX8uw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzkwMzE2Mw==", "bodyText": "Codacy found an issue: Fields should be declared at the top of the class, before any method declarations, constructors, initializers or inner classes.", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/586#discussion_r507903163", "createdAt": "2020-10-19T16:50:25Z", "author": {"login": "jellyfin-bot"}, "path": "app/src/main/java/org/jellyfin/androidtv/ui/browsing/StdGridFragment.java", "diffHunk": "@@ -353,6 +353,9 @@ private void prepareBackgroundManager() {\n         getActivity().getWindowManager().getDefaultDisplay().getMetrics(mMetrics);\n     }\n \n+    protected ImageButton mSortButton;\n+    protected ImageButton mSearchButton;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b013c0fb652b66bf2f6758c59dd3f0c211b5ae62"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE1NDQ0NDky", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/586#pullrequestreview-515444492", "createdAt": "2020-10-23T08:20:15Z", "commit": {"oid": "b013c0fb652b66bf2f6758c59dd3f0c211b5ae62"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4208, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}