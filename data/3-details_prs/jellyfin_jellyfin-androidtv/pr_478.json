{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIwMjMyMzY3", "number": 478, "title": "Fix fast forward/rewind not working on Fire Stick", "bodyText": "Changes\nThis adds in some new logic to intercept the fast forward and rewind\nkeys presses if the popup panel is not in view.\nIf the media playing is not live TV, it will skip forwards or backwards\nthe appropriate amount of seconds. It will show the overlay as expected]\nand then initiate the fadeout timer.\nThere is also a filter that has been added to only intercept the ACTION_DOWN of the keypress. Before, this would cause a fast forward/rewind to be done twice, effectively doubling the intended seek time.\nIssues\nFixes #351\nI would appreciate any testing on other Fire Sticks, this has only been tested on a Fire Stick 4K.", "createdAt": "2020-05-19T16:30:58Z", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/478", "merged": true, "mergeCommit": {"oid": "96b13e94b7f0953a0e208518082711349f6bb682"}, "closed": true, "closedAt": "2020-05-20T14:30:49Z", "author": {"login": "MrLemur"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABci2ysSgH2gAyNDIwMjMyMzY3OmQ2ZmViMDAwN2Q5ODZiYTM4YTYwN2JhNjRhMGMyZTBmNjU1ODg2OTI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcjJ-PxAFqTQxNTM5NzYzNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d6feb0007d986ba38a607ba64a0c2e0f65588692", "author": {"user": {"login": "MrLemur", "name": "Kassim"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/d6feb0007d986ba38a607ba64a0c2e0f65588692", "committedDate": "2020-05-19T16:09:45Z", "message": "Add new logic to playback overlay for ff/rewind\n\nThis adds in some nrew logic to intercept the fast forward and rewind\nkeys presses if the popup panel is not in view.\n\nIf the media playing is not live TV, it will skip forwards or backwards\nthe appropriate amount of seconds. It will show the overlay as expected]\nand then iniatite the fadeout timer."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8e10f4e375a155647db8ce1694a50426766dace5", "author": {"user": {"login": "MrLemur", "name": "Kassim"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/8e10f4e375a155647db8ce1694a50426766dace5", "committedDate": "2020-05-19T16:26:05Z", "message": "Add filter to only invoke once on key press"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE0NjQyMTM1", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/478#pullrequestreview-414642135", "createdAt": "2020-05-19T16:54:13Z", "commit": {"oid": "8e10f4e375a155647db8ce1694a50426766dace5"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxNjo1NDoxM1rOGXpsPA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxNjo1NzozMlrOGXp0qw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzQ1MzUwMA==", "bodyText": "The formatting inside this if statement is wrong. Please indent it or change the code to return false when the action is not ACTION_DOWN", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/478#discussion_r427453500", "createdAt": "2020-05-19T16:54:13Z", "author": {"login": "nielsvanvelzen"}, "path": "app/src/main/java/org/jellyfin/androidtv/playback/CustomPlaybackOverlayFragment.java", "diffHunk": "@@ -432,6 +432,7 @@ public void onItemClicked(Presenter.ViewHolder itemViewHolder, Object item,\n     private View.OnKeyListener keyListener = new View.OnKeyListener() {\n         @Override\n         public boolean onKey(View v, int keyCode, KeyEvent event) {\n+            if (event.getAction() == KeyEvent.ACTION_DOWN) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8e10f4e375a155647db8ce1694a50426766dace5"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzQ1NTY1OQ==", "bodyText": "I expect everything inside this statement to probably trigger twice on non-firetv devices", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/478#discussion_r427455659", "createdAt": "2020-05-19T16:57:32Z", "author": {"login": "nielsvanvelzen"}, "path": "app/src/main/java/org/jellyfin/androidtv/playback/CustomPlaybackOverlayFragment.java", "diffHunk": "@@ -501,6 +502,23 @@ public boolean onKey(View v, int keyCode, KeyEvent event) {\n                     }\n                 }\n \n+                // Control fast forward and rewind if overlay hidden and not showing live TV\n+                if (!mPlaybackController.isLiveTv()) {\n+                    if (keyCode == KeyEvent.KEYCODE_MEDIA_FAST_FORWARD || keyCode == KeyEvent.KEYCODE_BUTTON_R1 || keyCode ==KeyEvent.KEYCODE_BUTTON_R2) {\n+                        mPlaybackController.skip(30000);\n+                        if (!mIsVisible) show();\n+                        setFadingEnabled(true);\n+                        return true;\n+                    }\n+\n+                    if (keyCode == KeyEvent.KEYCODE_MEDIA_REWIND || keyCode == KeyEvent.KEYCODE_BUTTON_L1 || keyCode == KeyEvent.KEYCODE_BUTTON_L2) {\n+                        mPlaybackController.skip(-11000);\n+                        if (!mIsVisible) show();\n+                        setFadingEnabled(true);\n+                        return true;\n+                    }\n+                }\n+\n                 if (!mIsVisible) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8e10f4e375a155647db8ce1694a50426766dace5"}, "originalPosition": 29}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c65e22320edcde64b35b5236fe107ca92bb0b1cc", "author": {"user": {"login": "MrLemur", "name": "Kassim"}}, "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/c65e22320edcde64b35b5236fe107ca92bb0b1cc", "committedDate": "2020-05-19T17:25:11Z", "message": "Fix indext"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE0NzYyNjQz", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/478#pullrequestreview-414762643", "createdAt": "2020-05-19T19:35:59Z", "commit": {"oid": "c65e22320edcde64b35b5236fe107ca92bb0b1cc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE1Mzk3NjM0", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/478#pullrequestreview-415397634", "createdAt": "2020-05-20T14:30:34Z", "commit": {"oid": "c65e22320edcde64b35b5236fe107ca92bb0b1cc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4335, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}