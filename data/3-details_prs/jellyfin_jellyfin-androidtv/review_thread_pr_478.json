{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIwMjMyMzY3", "number": 478, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxNjo1NDoxM1rOD94vyg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxNjo1NzozMlrOD940-w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY2MjE5NDY2OnYy", "diffSide": "RIGHT", "path": "app/src/main/java/org/jellyfin/androidtv/playback/CustomPlaybackOverlayFragment.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxNjo1NDoxM1rOGXpsPA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxNzo1MTo0N1rOGXr7Fw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzQ1MzUwMA==", "bodyText": "The formatting inside this if statement is wrong. Please indent it or change the code to return false when the action is not ACTION_DOWN", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/478#discussion_r427453500", "createdAt": "2020-05-19T16:54:13Z", "author": {"login": "nielsvanvelzen"}, "path": "app/src/main/java/org/jellyfin/androidtv/playback/CustomPlaybackOverlayFragment.java", "diffHunk": "@@ -432,6 +432,7 @@ public void onItemClicked(Presenter.ViewHolder itemViewHolder, Object item,\n     private View.OnKeyListener keyListener = new View.OnKeyListener() {\n         @Override\n         public boolean onKey(View v, int keyCode, KeyEvent event) {\n+            if (event.getAction() == KeyEvent.ACTION_DOWN) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8e10f4e375a155647db8ce1694a50426766dace5"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzQ3NDUyMg==", "bodyText": "What are the current indent preferences for java files?", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/478#discussion_r427474522", "createdAt": "2020-05-19T17:27:54Z", "author": {"login": "MrLemur"}, "path": "app/src/main/java/org/jellyfin/androidtv/playback/CustomPlaybackOverlayFragment.java", "diffHunk": "@@ -432,6 +432,7 @@ public void onItemClicked(Presenter.ViewHolder itemViewHolder, Object item,\n     private View.OnKeyListener keyListener = new View.OnKeyListener() {\n         @Override\n         public boolean onKey(View v, int keyCode, KeyEvent event) {\n+            if (event.getAction() == KeyEvent.ACTION_DOWN) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzQ1MzUwMA=="}, "originalCommit": {"oid": "8e10f4e375a155647db8ce1694a50426766dace5"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzQ4NTA5Ng==", "bodyText": "It's 4 spaces currently", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/478#discussion_r427485096", "createdAt": "2020-05-19T17:44:15Z", "author": {"login": "nielsvanvelzen"}, "path": "app/src/main/java/org/jellyfin/androidtv/playback/CustomPlaybackOverlayFragment.java", "diffHunk": "@@ -432,6 +432,7 @@ public void onItemClicked(Presenter.ViewHolder itemViewHolder, Object item,\n     private View.OnKeyListener keyListener = new View.OnKeyListener() {\n         @Override\n         public boolean onKey(View v, int keyCode, KeyEvent event) {\n+            if (event.getAction() == KeyEvent.ACTION_DOWN) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzQ1MzUwMA=="}, "originalCommit": {"oid": "8e10f4e375a155647db8ce1694a50426766dace5"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzQ5MDA3MQ==", "bodyText": "Should be fixed with the most recent commit", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/478#discussion_r427490071", "createdAt": "2020-05-19T17:51:47Z", "author": {"login": "MrLemur"}, "path": "app/src/main/java/org/jellyfin/androidtv/playback/CustomPlaybackOverlayFragment.java", "diffHunk": "@@ -432,6 +432,7 @@ public void onItemClicked(Presenter.ViewHolder itemViewHolder, Object item,\n     private View.OnKeyListener keyListener = new View.OnKeyListener() {\n         @Override\n         public boolean onKey(View v, int keyCode, KeyEvent event) {\n+            if (event.getAction() == KeyEvent.ACTION_DOWN) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzQ1MzUwMA=="}, "originalCommit": {"oid": "8e10f4e375a155647db8ce1694a50426766dace5"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY2MjIwNzk1OnYy", "diffSide": "RIGHT", "path": "app/src/main/java/org/jellyfin/androidtv/playback/CustomPlaybackOverlayFragment.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxNjo1NzozMlrOGXp0qw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxOTozNDozOFrOGXvocw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzQ1NTY1OQ==", "bodyText": "I expect everything inside this statement to probably trigger twice on non-firetv devices", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/478#discussion_r427455659", "createdAt": "2020-05-19T16:57:32Z", "author": {"login": "nielsvanvelzen"}, "path": "app/src/main/java/org/jellyfin/androidtv/playback/CustomPlaybackOverlayFragment.java", "diffHunk": "@@ -501,6 +502,23 @@ public boolean onKey(View v, int keyCode, KeyEvent event) {\n                     }\n                 }\n \n+                // Control fast forward and rewind if overlay hidden and not showing live TV\n+                if (!mPlaybackController.isLiveTv()) {\n+                    if (keyCode == KeyEvent.KEYCODE_MEDIA_FAST_FORWARD || keyCode == KeyEvent.KEYCODE_BUTTON_R1 || keyCode ==KeyEvent.KEYCODE_BUTTON_R2) {\n+                        mPlaybackController.skip(30000);\n+                        if (!mIsVisible) show();\n+                        setFadingEnabled(true);\n+                        return true;\n+                    }\n+\n+                    if (keyCode == KeyEvent.KEYCODE_MEDIA_REWIND || keyCode == KeyEvent.KEYCODE_BUTTON_L1 || keyCode == KeyEvent.KEYCODE_BUTTON_L2) {\n+                        mPlaybackController.skip(-11000);\n+                        if (!mIsVisible) show();\n+                        setFadingEnabled(true);\n+                        return true;\n+                    }\n+                }\n+\n                 if (!mIsVisible) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8e10f4e375a155647db8ce1694a50426766dace5"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzQ3Nzg3Mg==", "bodyText": "Will be good to get a test to see, and if so I can add in the fire TV check.", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/478#discussion_r427477872", "createdAt": "2020-05-19T17:32:53Z", "author": {"login": "MrLemur"}, "path": "app/src/main/java/org/jellyfin/androidtv/playback/CustomPlaybackOverlayFragment.java", "diffHunk": "@@ -501,6 +502,23 @@ public boolean onKey(View v, int keyCode, KeyEvent event) {\n                     }\n                 }\n \n+                // Control fast forward and rewind if overlay hidden and not showing live TV\n+                if (!mPlaybackController.isLiveTv()) {\n+                    if (keyCode == KeyEvent.KEYCODE_MEDIA_FAST_FORWARD || keyCode == KeyEvent.KEYCODE_BUTTON_R1 || keyCode ==KeyEvent.KEYCODE_BUTTON_R2) {\n+                        mPlaybackController.skip(30000);\n+                        if (!mIsVisible) show();\n+                        setFadingEnabled(true);\n+                        return true;\n+                    }\n+\n+                    if (keyCode == KeyEvent.KEYCODE_MEDIA_REWIND || keyCode == KeyEvent.KEYCODE_BUTTON_L1 || keyCode == KeyEvent.KEYCODE_BUTTON_L2) {\n+                        mPlaybackController.skip(-11000);\n+                        if (!mIsVisible) show();\n+                        setFadingEnabled(true);\n+                        return true;\n+                    }\n+                }\n+\n                 if (!mIsVisible) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzQ1NTY1OQ=="}, "originalCommit": {"oid": "8e10f4e375a155647db8ce1694a50426766dace5"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzQ4Njc1MA==", "bodyText": "Testing in Android TV emulator in AVD has the expected behaviour using the emulated d-pad fast forward and rewind controls.", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/478#discussion_r427486750", "createdAt": "2020-05-19T17:46:46Z", "author": {"login": "MrLemur"}, "path": "app/src/main/java/org/jellyfin/androidtv/playback/CustomPlaybackOverlayFragment.java", "diffHunk": "@@ -501,6 +502,23 @@ public boolean onKey(View v, int keyCode, KeyEvent event) {\n                     }\n                 }\n \n+                // Control fast forward and rewind if overlay hidden and not showing live TV\n+                if (!mPlaybackController.isLiveTv()) {\n+                    if (keyCode == KeyEvent.KEYCODE_MEDIA_FAST_FORWARD || keyCode == KeyEvent.KEYCODE_BUTTON_R1 || keyCode ==KeyEvent.KEYCODE_BUTTON_R2) {\n+                        mPlaybackController.skip(30000);\n+                        if (!mIsVisible) show();\n+                        setFadingEnabled(true);\n+                        return true;\n+                    }\n+\n+                    if (keyCode == KeyEvent.KEYCODE_MEDIA_REWIND || keyCode == KeyEvent.KEYCODE_BUTTON_L1 || keyCode == KeyEvent.KEYCODE_BUTTON_L2) {\n+                        mPlaybackController.skip(-11000);\n+                        if (!mIsVisible) show();\n+                        setFadingEnabled(true);\n+                        return true;\n+                    }\n+                }\n+\n                 if (!mIsVisible) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzQ1NTY1OQ=="}, "originalCommit": {"oid": "8e10f4e375a155647db8ce1694a50426766dace5"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzU1MDgzNQ==", "bodyText": "I did some testing and it, indeed, works as expected! \ud83c\udf89", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/478#discussion_r427550835", "createdAt": "2020-05-19T19:34:38Z", "author": {"login": "nielsvanvelzen"}, "path": "app/src/main/java/org/jellyfin/androidtv/playback/CustomPlaybackOverlayFragment.java", "diffHunk": "@@ -501,6 +502,23 @@ public boolean onKey(View v, int keyCode, KeyEvent event) {\n                     }\n                 }\n \n+                // Control fast forward and rewind if overlay hidden and not showing live TV\n+                if (!mPlaybackController.isLiveTv()) {\n+                    if (keyCode == KeyEvent.KEYCODE_MEDIA_FAST_FORWARD || keyCode == KeyEvent.KEYCODE_BUTTON_R1 || keyCode ==KeyEvent.KEYCODE_BUTTON_R2) {\n+                        mPlaybackController.skip(30000);\n+                        if (!mIsVisible) show();\n+                        setFadingEnabled(true);\n+                        return true;\n+                    }\n+\n+                    if (keyCode == KeyEvent.KEYCODE_MEDIA_REWIND || keyCode == KeyEvent.KEYCODE_BUTTON_L1 || keyCode == KeyEvent.KEYCODE_BUTTON_L2) {\n+                        mPlaybackController.skip(-11000);\n+                        if (!mIsVisible) show();\n+                        setFadingEnabled(true);\n+                        return true;\n+                    }\n+                }\n+\n                 if (!mIsVisible) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzQ1NTY1OQ=="}, "originalCommit": {"oid": "8e10f4e375a155647db8ce1694a50426766dace5"}, "originalPosition": 29}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1089, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}