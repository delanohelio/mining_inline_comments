{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY0MzM5NjA5", "number": 265, "reviewThreads": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNlQxMjo1NToyNVrODgNiHQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQwNjoyNDoyNFrODgknUg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM1MTAyNzQ5OnYy", "diffSide": "RIGHT", "path": "app/src/main/java/org/jellyfin/androidtv/util/apiclient/ApiClientExtensions.kt", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNlQxMjo1NToyNlrOFqTVaw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNlQxNDowNDozOVrOFqTm1Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkwMTI5MQ==", "bodyText": "Is that comment really correct?", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/265#discussion_r379901291", "createdAt": "2020-02-16T12:55:26Z", "author": {"login": "AndreasGB"}, "path": "app/src/main/java/org/jellyfin/androidtv/util/apiclient/ApiClientExtensions.kt", "diffHunk": "@@ -27,3 +29,12 @@ suspend fun ApiClient.getUserViews(): ItemsResult? = suspendCoroutine { continua\n \t\toverride fun onError(exception: Exception?) = continuation.resume(null)\n \t})\n }\n+/**\n+ * Adds a coroutine capable version of the \"getNextUpEpisodes\" function", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "badbd2d532a182ee07ba90a1f403107572c63dba"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkwNTc0OQ==", "bodyText": "no it's not", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/265#discussion_r379905749", "createdAt": "2020-02-16T14:04:39Z", "author": {"login": "nielsvanvelzen"}, "path": "app/src/main/java/org/jellyfin/androidtv/util/apiclient/ApiClientExtensions.kt", "diffHunk": "@@ -27,3 +29,12 @@ suspend fun ApiClient.getUserViews(): ItemsResult? = suspendCoroutine { continua\n \t\toverride fun onError(exception: Exception?) = continuation.resume(null)\n \t})\n }\n+/**\n+ * Adds a coroutine capable version of the \"getNextUpEpisodes\" function", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkwMTI5MQ=="}, "originalCommit": {"oid": "badbd2d532a182ee07ba90a1f403107572c63dba"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM1MTAzNDIzOnYy", "diffSide": "RIGHT", "path": "app/src/main/res/layout/fragment_next_up_buttons.xml", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNlQxMzowOToxM1rOFqTY5Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNlQxMzowOToxM1rOFqTY5Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkwMjE4MQ==", "bodyText": "I would remove the padding here to make it better to fit into other views, who then themselves can decide how to margin it", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/265#discussion_r379902181", "createdAt": "2020-02-16T13:09:13Z", "author": {"login": "AndreasGB"}, "path": "app/src/main/res/layout/fragment_next_up_buttons.xml", "diffHunk": "@@ -0,0 +1,46 @@\n+<?xml version=\"1.0\" encoding=\"utf-8\"?>\n+<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n+    xmlns:tools=\"http://schemas.android.com/tools\"\n+    android:layout_width=\"wrap_content\"\n+    android:layout_height=\"wrap_content\"\n+    android:orientation=\"horizontal\"\n+    android:padding=\"16dp\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "badbd2d532a182ee07ba90a1f403107572c63dba"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM1MTAzNDgyOnYy", "diffSide": "RIGHT", "path": "app/src/main/res/layout/fragment_next_up.xml", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNlQxMzoxMTowNFrOFqTZNQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNlQxNDowODowM1rOFqTnnw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkwMjI2MQ==", "bodyText": "Would move this into the Overlay layout", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/265#discussion_r379902261", "createdAt": "2020-02-16T13:11:04Z", "author": {"login": "AndreasGB"}, "path": "app/src/main/res/layout/fragment_next_up.xml", "diffHunk": "@@ -0,0 +1,76 @@\n+<?xml version=\"1.0\" encoding=\"utf-8\"?>\n+<androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n+    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n+    xmlns:tools=\"http://schemas.android.com/tools\"\n+    android:layout_width=\"match_parent\"\n+    android:layout_height=\"match_parent\"\n+    tools:background=\"@drawable/moviebg\">\n+\n+    <!-- Overlay -->\n+    <androidx.constraintlayout.widget.ConstraintLayout\n+        android:id=\"@+id/content\"\n+        android:layout_width=\"match_parent\"\n+        android:layout_height=\"wrap_content\"\n+        android:background=\"@drawable/noise\"\n+        android:orientation=\"horizontal\"\n+        android:padding=\"16dp\"\n+        app:layout_constraintBottom_toBottomOf=\"parent\"\n+        app:layout_constraintEnd_toEndOf=\"parent\"\n+        app:layout_constraintStart_toStartOf=\"parent\">\n+\n+        <ImageView\n+            android:id=\"@+id/image\"\n+            style=\"@style/Widget.Leanback\"\n+            android:layout_width=\"wrap_content\"\n+            android:layout_height=\"175dp\"\n+            android:adjustViewBounds=\"true\"\n+            android:maxWidth=\"400dp\"\n+            app:layout_constraintStart_toStartOf=\"parent\"\n+            app:layout_constraintTop_toTopOf=\"parent\"\n+            app:layout_goneMarginEnd=\"0dp\"\n+            tools:src=\"@drawable/app_logo\" />\n+\n+        <TextView\n+            android:id=\"@+id/nextup\"\n+            style=\"@style/TextAppearance.Leanback.DetailsDescriptionTitle\"\n+            android:layout_width=\"0dp\"\n+            android:layout_height=\"wrap_content\"\n+            android:layout_marginStart=\"16dp\"\n+            android:text=\"@string/lbl_next_up\"\n+            app:layout_constraintEnd_toEndOf=\"parent\"\n+            app:layout_constraintStart_toEndOf=\"@id/image\"\n+            app:layout_constraintTop_toTopOf=\"parent\" />\n+\n+        <TextView\n+            android:id=\"@+id/title\"\n+            style=\"@style/TextAppearance.Leanback.DetailsDescriptionSubtitle\"\n+            android:layout_width=\"0dp\"\n+            android:layout_height=\"wrap_content\"\n+            android:layout_marginStart=\"16dp\"\n+            app:layout_constraintEnd_toEndOf=\"parent\"\n+            app:layout_constraintStart_toEndOf=\"@id/image\"\n+            app:layout_constraintTop_toBottomOf=\"@id/nextup\"\n+            tools:text=\"Episode title\" />\n+\n+        <TextView\n+            android:id=\"@+id/description\"\n+            style=\"@style/TextAppearance.Leanback.DetailsDescriptionBody\"\n+            android:layout_width=\"0dp\"\n+            android:layout_height=\"0dp\"\n+            android:layout_marginStart=\"16dp\"\n+            android:ellipsize=\"end\"\n+            android:maxLines=\"6\"\n+            app:layout_constraintBottom_toBottomOf=\"parent\"\n+            app:layout_constraintEnd_toEndOf=\"parent\"\n+            app:layout_constraintStart_toEndOf=\"@id/image\"\n+            app:layout_constraintTop_toBottomOf=\"@id/title\"\n+            tools:text=\"Episode description\" />\n+    </androidx.constraintlayout.widget.ConstraintLayout>\n+\n+    <org.jellyfin.androidtv.playback.nextup.NextUpButtons", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "badbd2d532a182ee07ba90a1f403107572c63dba"}, "originalPosition": 70}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkwNTk1MQ==", "bodyText": "This should be done at a later moment when we're supporting a negative timeout for the buttons. For now it's embedded in the fragment so the code is entirely separated.", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/265#discussion_r379905951", "createdAt": "2020-02-16T14:08:03Z", "author": {"login": "nielsvanvelzen"}, "path": "app/src/main/res/layout/fragment_next_up.xml", "diffHunk": "@@ -0,0 +1,76 @@\n+<?xml version=\"1.0\" encoding=\"utf-8\"?>\n+<androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n+    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n+    xmlns:tools=\"http://schemas.android.com/tools\"\n+    android:layout_width=\"match_parent\"\n+    android:layout_height=\"match_parent\"\n+    tools:background=\"@drawable/moviebg\">\n+\n+    <!-- Overlay -->\n+    <androidx.constraintlayout.widget.ConstraintLayout\n+        android:id=\"@+id/content\"\n+        android:layout_width=\"match_parent\"\n+        android:layout_height=\"wrap_content\"\n+        android:background=\"@drawable/noise\"\n+        android:orientation=\"horizontal\"\n+        android:padding=\"16dp\"\n+        app:layout_constraintBottom_toBottomOf=\"parent\"\n+        app:layout_constraintEnd_toEndOf=\"parent\"\n+        app:layout_constraintStart_toStartOf=\"parent\">\n+\n+        <ImageView\n+            android:id=\"@+id/image\"\n+            style=\"@style/Widget.Leanback\"\n+            android:layout_width=\"wrap_content\"\n+            android:layout_height=\"175dp\"\n+            android:adjustViewBounds=\"true\"\n+            android:maxWidth=\"400dp\"\n+            app:layout_constraintStart_toStartOf=\"parent\"\n+            app:layout_constraintTop_toTopOf=\"parent\"\n+            app:layout_goneMarginEnd=\"0dp\"\n+            tools:src=\"@drawable/app_logo\" />\n+\n+        <TextView\n+            android:id=\"@+id/nextup\"\n+            style=\"@style/TextAppearance.Leanback.DetailsDescriptionTitle\"\n+            android:layout_width=\"0dp\"\n+            android:layout_height=\"wrap_content\"\n+            android:layout_marginStart=\"16dp\"\n+            android:text=\"@string/lbl_next_up\"\n+            app:layout_constraintEnd_toEndOf=\"parent\"\n+            app:layout_constraintStart_toEndOf=\"@id/image\"\n+            app:layout_constraintTop_toTopOf=\"parent\" />\n+\n+        <TextView\n+            android:id=\"@+id/title\"\n+            style=\"@style/TextAppearance.Leanback.DetailsDescriptionSubtitle\"\n+            android:layout_width=\"0dp\"\n+            android:layout_height=\"wrap_content\"\n+            android:layout_marginStart=\"16dp\"\n+            app:layout_constraintEnd_toEndOf=\"parent\"\n+            app:layout_constraintStart_toEndOf=\"@id/image\"\n+            app:layout_constraintTop_toBottomOf=\"@id/nextup\"\n+            tools:text=\"Episode title\" />\n+\n+        <TextView\n+            android:id=\"@+id/description\"\n+            style=\"@style/TextAppearance.Leanback.DetailsDescriptionBody\"\n+            android:layout_width=\"0dp\"\n+            android:layout_height=\"0dp\"\n+            android:layout_marginStart=\"16dp\"\n+            android:ellipsize=\"end\"\n+            android:maxLines=\"6\"\n+            app:layout_constraintBottom_toBottomOf=\"parent\"\n+            app:layout_constraintEnd_toEndOf=\"parent\"\n+            app:layout_constraintStart_toEndOf=\"@id/image\"\n+            app:layout_constraintTop_toBottomOf=\"@id/title\"\n+            tools:text=\"Episode description\" />\n+    </androidx.constraintlayout.widget.ConstraintLayout>\n+\n+    <org.jellyfin.androidtv.playback.nextup.NextUpButtons", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkwMjI2MQ=="}, "originalCommit": {"oid": "badbd2d532a182ee07ba90a1f403107572c63dba"}, "originalPosition": 70}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM1MTAzNTAwOnYy", "diffSide": "RIGHT", "path": "app/src/main/res/layout/fragment_next_up.xml", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNlQxMzoxMToyN1rOFqTZSg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNlQxMzoxMToyN1rOFqTZSg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkwMjI4Mg==", "bodyText": "Would set this to 4 to end above the NextUpButtons", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/265#discussion_r379902282", "createdAt": "2020-02-16T13:11:27Z", "author": {"login": "AndreasGB"}, "path": "app/src/main/res/layout/fragment_next_up.xml", "diffHunk": "@@ -0,0 +1,76 @@\n+<?xml version=\"1.0\" encoding=\"utf-8\"?>\n+<androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n+    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n+    xmlns:tools=\"http://schemas.android.com/tools\"\n+    android:layout_width=\"match_parent\"\n+    android:layout_height=\"match_parent\"\n+    tools:background=\"@drawable/moviebg\">\n+\n+    <!-- Overlay -->\n+    <androidx.constraintlayout.widget.ConstraintLayout\n+        android:id=\"@+id/content\"\n+        android:layout_width=\"match_parent\"\n+        android:layout_height=\"wrap_content\"\n+        android:background=\"@drawable/noise\"\n+        android:orientation=\"horizontal\"\n+        android:padding=\"16dp\"\n+        app:layout_constraintBottom_toBottomOf=\"parent\"\n+        app:layout_constraintEnd_toEndOf=\"parent\"\n+        app:layout_constraintStart_toStartOf=\"parent\">\n+\n+        <ImageView\n+            android:id=\"@+id/image\"\n+            style=\"@style/Widget.Leanback\"\n+            android:layout_width=\"wrap_content\"\n+            android:layout_height=\"175dp\"\n+            android:adjustViewBounds=\"true\"\n+            android:maxWidth=\"400dp\"\n+            app:layout_constraintStart_toStartOf=\"parent\"\n+            app:layout_constraintTop_toTopOf=\"parent\"\n+            app:layout_goneMarginEnd=\"0dp\"\n+            tools:src=\"@drawable/app_logo\" />\n+\n+        <TextView\n+            android:id=\"@+id/nextup\"\n+            style=\"@style/TextAppearance.Leanback.DetailsDescriptionTitle\"\n+            android:layout_width=\"0dp\"\n+            android:layout_height=\"wrap_content\"\n+            android:layout_marginStart=\"16dp\"\n+            android:text=\"@string/lbl_next_up\"\n+            app:layout_constraintEnd_toEndOf=\"parent\"\n+            app:layout_constraintStart_toEndOf=\"@id/image\"\n+            app:layout_constraintTop_toTopOf=\"parent\" />\n+\n+        <TextView\n+            android:id=\"@+id/title\"\n+            style=\"@style/TextAppearance.Leanback.DetailsDescriptionSubtitle\"\n+            android:layout_width=\"0dp\"\n+            android:layout_height=\"wrap_content\"\n+            android:layout_marginStart=\"16dp\"\n+            app:layout_constraintEnd_toEndOf=\"parent\"\n+            app:layout_constraintStart_toEndOf=\"@id/image\"\n+            app:layout_constraintTop_toBottomOf=\"@id/nextup\"\n+            tools:text=\"Episode title\" />\n+\n+        <TextView\n+            android:id=\"@+id/description\"\n+            style=\"@style/TextAppearance.Leanback.DetailsDescriptionBody\"\n+            android:layout_width=\"0dp\"\n+            android:layout_height=\"0dp\"\n+            android:layout_marginStart=\"16dp\"\n+            android:ellipsize=\"end\"\n+            android:maxLines=\"6\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "badbd2d532a182ee07ba90a1f403107572c63dba"}, "originalPosition": 62}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM1MTAzNTIxOnYy", "diffSide": "RIGHT", "path": "app/src/main/res/layout/fragment_next_up.xml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNlQxMzoxMTo1MlrOFqTZYw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNlQxNDoxNzowN1rOFqTqAA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkwMjMwNw==", "bodyText": "app:layout_constraintBottom_toTopOf=\"@id/fragment_next_up_buttons\" to avoid underflowing the buttons with text", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/265#discussion_r379902307", "createdAt": "2020-02-16T13:11:52Z", "author": {"login": "AndreasGB"}, "path": "app/src/main/res/layout/fragment_next_up.xml", "diffHunk": "@@ -0,0 +1,76 @@\n+<?xml version=\"1.0\" encoding=\"utf-8\"?>\n+<androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n+    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n+    xmlns:tools=\"http://schemas.android.com/tools\"\n+    android:layout_width=\"match_parent\"\n+    android:layout_height=\"match_parent\"\n+    tools:background=\"@drawable/moviebg\">\n+\n+    <!-- Overlay -->\n+    <androidx.constraintlayout.widget.ConstraintLayout\n+        android:id=\"@+id/content\"\n+        android:layout_width=\"match_parent\"\n+        android:layout_height=\"wrap_content\"\n+        android:background=\"@drawable/noise\"\n+        android:orientation=\"horizontal\"\n+        android:padding=\"16dp\"\n+        app:layout_constraintBottom_toBottomOf=\"parent\"\n+        app:layout_constraintEnd_toEndOf=\"parent\"\n+        app:layout_constraintStart_toStartOf=\"parent\">\n+\n+        <ImageView\n+            android:id=\"@+id/image\"\n+            style=\"@style/Widget.Leanback\"\n+            android:layout_width=\"wrap_content\"\n+            android:layout_height=\"175dp\"\n+            android:adjustViewBounds=\"true\"\n+            android:maxWidth=\"400dp\"\n+            app:layout_constraintStart_toStartOf=\"parent\"\n+            app:layout_constraintTop_toTopOf=\"parent\"\n+            app:layout_goneMarginEnd=\"0dp\"\n+            tools:src=\"@drawable/app_logo\" />\n+\n+        <TextView\n+            android:id=\"@+id/nextup\"\n+            style=\"@style/TextAppearance.Leanback.DetailsDescriptionTitle\"\n+            android:layout_width=\"0dp\"\n+            android:layout_height=\"wrap_content\"\n+            android:layout_marginStart=\"16dp\"\n+            android:text=\"@string/lbl_next_up\"\n+            app:layout_constraintEnd_toEndOf=\"parent\"\n+            app:layout_constraintStart_toEndOf=\"@id/image\"\n+            app:layout_constraintTop_toTopOf=\"parent\" />\n+\n+        <TextView\n+            android:id=\"@+id/title\"\n+            style=\"@style/TextAppearance.Leanback.DetailsDescriptionSubtitle\"\n+            android:layout_width=\"0dp\"\n+            android:layout_height=\"wrap_content\"\n+            android:layout_marginStart=\"16dp\"\n+            app:layout_constraintEnd_toEndOf=\"parent\"\n+            app:layout_constraintStart_toEndOf=\"@id/image\"\n+            app:layout_constraintTop_toBottomOf=\"@id/nextup\"\n+            tools:text=\"Episode title\" />\n+\n+        <TextView\n+            android:id=\"@+id/description\"\n+            style=\"@style/TextAppearance.Leanback.DetailsDescriptionBody\"\n+            android:layout_width=\"0dp\"\n+            android:layout_height=\"0dp\"\n+            android:layout_marginStart=\"16dp\"\n+            android:ellipsize=\"end\"\n+            android:maxLines=\"6\"\n+            app:layout_constraintBottom_toBottomOf=\"parent\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "badbd2d532a182ee07ba90a1f403107572c63dba"}, "originalPosition": 63}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkwNjU2MA==", "bodyText": "Because the buttons are not defined in the same constraintlayout it's not possible. With the max lines set to 4 it should be good now though.", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/265#discussion_r379906560", "createdAt": "2020-02-16T14:17:07Z", "author": {"login": "nielsvanvelzen"}, "path": "app/src/main/res/layout/fragment_next_up.xml", "diffHunk": "@@ -0,0 +1,76 @@\n+<?xml version=\"1.0\" encoding=\"utf-8\"?>\n+<androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n+    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n+    xmlns:tools=\"http://schemas.android.com/tools\"\n+    android:layout_width=\"match_parent\"\n+    android:layout_height=\"match_parent\"\n+    tools:background=\"@drawable/moviebg\">\n+\n+    <!-- Overlay -->\n+    <androidx.constraintlayout.widget.ConstraintLayout\n+        android:id=\"@+id/content\"\n+        android:layout_width=\"match_parent\"\n+        android:layout_height=\"wrap_content\"\n+        android:background=\"@drawable/noise\"\n+        android:orientation=\"horizontal\"\n+        android:padding=\"16dp\"\n+        app:layout_constraintBottom_toBottomOf=\"parent\"\n+        app:layout_constraintEnd_toEndOf=\"parent\"\n+        app:layout_constraintStart_toStartOf=\"parent\">\n+\n+        <ImageView\n+            android:id=\"@+id/image\"\n+            style=\"@style/Widget.Leanback\"\n+            android:layout_width=\"wrap_content\"\n+            android:layout_height=\"175dp\"\n+            android:adjustViewBounds=\"true\"\n+            android:maxWidth=\"400dp\"\n+            app:layout_constraintStart_toStartOf=\"parent\"\n+            app:layout_constraintTop_toTopOf=\"parent\"\n+            app:layout_goneMarginEnd=\"0dp\"\n+            tools:src=\"@drawable/app_logo\" />\n+\n+        <TextView\n+            android:id=\"@+id/nextup\"\n+            style=\"@style/TextAppearance.Leanback.DetailsDescriptionTitle\"\n+            android:layout_width=\"0dp\"\n+            android:layout_height=\"wrap_content\"\n+            android:layout_marginStart=\"16dp\"\n+            android:text=\"@string/lbl_next_up\"\n+            app:layout_constraintEnd_toEndOf=\"parent\"\n+            app:layout_constraintStart_toEndOf=\"@id/image\"\n+            app:layout_constraintTop_toTopOf=\"parent\" />\n+\n+        <TextView\n+            android:id=\"@+id/title\"\n+            style=\"@style/TextAppearance.Leanback.DetailsDescriptionSubtitle\"\n+            android:layout_width=\"0dp\"\n+            android:layout_height=\"wrap_content\"\n+            android:layout_marginStart=\"16dp\"\n+            app:layout_constraintEnd_toEndOf=\"parent\"\n+            app:layout_constraintStart_toEndOf=\"@id/image\"\n+            app:layout_constraintTop_toBottomOf=\"@id/nextup\"\n+            tools:text=\"Episode title\" />\n+\n+        <TextView\n+            android:id=\"@+id/description\"\n+            style=\"@style/TextAppearance.Leanback.DetailsDescriptionBody\"\n+            android:layout_width=\"0dp\"\n+            android:layout_height=\"0dp\"\n+            android:layout_marginStart=\"16dp\"\n+            android:ellipsize=\"end\"\n+            android:maxLines=\"6\"\n+            app:layout_constraintBottom_toBottomOf=\"parent\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkwMjMwNw=="}, "originalCommit": {"oid": "badbd2d532a182ee07ba90a1f403107572c63dba"}, "originalPosition": 63}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM1MTA0NDI5OnYy", "diffSide": "RIGHT", "path": "app/src/main/java/org/jellyfin/androidtv/playback/nextup/NextUpActivity.kt", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNlQxMzozMTozMVrOFqTeUA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNlQxMzozMTozMVrOFqTeUA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkwMzU2OA==", "bodyText": "Maybe log an error in the null case and finish()", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/265#discussion_r379903568", "createdAt": "2020-02-16T13:31:31Z", "author": {"login": "AndreasGB"}, "path": "app/src/main/java/org/jellyfin/androidtv/playback/nextup/NextUpActivity.kt", "diffHunk": "@@ -0,0 +1,65 @@\n+package org.jellyfin.androidtv.playback.nextup\n+\n+import android.os.Bundle\n+import android.util.Log\n+import androidx.fragment.app.FragmentActivity\n+import androidx.leanback.app.BackgroundManager\n+import com.squareup.picasso.Picasso\n+import kotlinx.coroutines.Dispatchers\n+import kotlinx.coroutines.GlobalScope\n+import kotlinx.coroutines.launch\n+import kotlinx.coroutines.withContext\n+import org.acra.ACRA.LOG_TAG\n+import org.jellyfin.androidtv.TvApp\n+import org.jellyfin.androidtv.util.apiclient.getItem\n+import org.jellyfin.apiclient.model.dto.ImageOptions\n+\n+class NextUpActivity : FragmentActivity() {\n+\tprivate lateinit var fragment: NextUpFragment\n+\n+\toverride fun onCreate(savedInstanceState: Bundle?) {\n+\t\tsuper.onCreate(savedInstanceState)\n+\n+\t\tval id = intent.getStringExtra(\"id\")\n+\t\tif (id == null) {\n+\t\t\tLog.e(LOG_TAG, \"No id found in bundle for NextUpActivity.\")\n+\t\t\tfinish()\n+\t\t}\n+\n+\t\t// Add background manager\n+\t\tBackgroundManager.getInstance(this).attach(window)\n+\n+\t\t// Load item info\n+\t\tGlobalScope.launch(Dispatchers.Main) {\n+\t\t\tval data = loadItemData(id) ?: return@launch", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "badbd2d532a182ee07ba90a1f403107572c63dba"}, "originalPosition": 34}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM1MTA1MDc3OnYy", "diffSide": "RIGHT", "path": "app/src/main/res/layout/vlc_player_interface.xml", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNlQxMzo0NTozNlrOFqTh3Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNlQxMzo0NTozNlrOFqTh3Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkwNDQ3Nw==", "bodyText": "This is not present in the current version of the overlay, I think this file is broken. This ProgressBar was removed in ed01855#diff-92d250046e8bf52735338f876b5b0009", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/265#discussion_r379904477", "createdAt": "2020-02-16T13:45:36Z", "author": {"login": "AndreasGB"}, "path": "app/src/main/res/layout/vlc_player_interface.xml", "diffHunk": "@@ -58,114 +58,170 @@\n \n     </FrameLayout>\n \n-    <include\n-        android:id=\"@+id/smNextUpPanel\"\n-        layout=\"@layout/small_upnext_panel\"\n-        android:layout_width=\"match_parent\"\n-        android:layout_height=\"75dp\"\n-        android:layout_gravity=\"bottom\" />\n+\n+    <ProgressBar", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "badbd2d532a182ee07ba90a1f403107572c63dba"}, "originalPosition": 11}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM1MTA1Mzg1OnYy", "diffSide": "RIGHT", "path": "app/src/main/java/org/jellyfin/androidtv/playback/nextup/NextUpButtons.kt", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNlQxMzo1MTowNVrOFqTjdg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNlQxNDoxNTowM1rOFqTpdA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkwNDg4Ng==", "bodyText": "This is probably a little bit nit-picky, but do we actually need to set max on every tick?", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/265#discussion_r379904886", "createdAt": "2020-02-16T13:51:05Z", "author": {"login": "AndreasGB"}, "path": "app/src/main/java/org/jellyfin/androidtv/playback/nextup/NextUpButtons.kt", "diffHunk": "@@ -0,0 +1,66 @@\n+package org.jellyfin.androidtv.playback.nextup\n+\n+import android.content.Context\n+import android.os.CountDownTimer\n+import android.util.AttributeSet\n+import android.view.View\n+import android.widget.FrameLayout\n+import kotlinx.android.synthetic.main.fragment_next_up_buttons.view.*\n+import org.jellyfin.androidtv.R\n+import org.jellyfin.androidtv.TvApp\n+\n+class NextUpButtons(context: Context, attrs: AttributeSet? = null, defStyleAttr: Int = 0, defStyle: Int = 0) : FrameLayout(context, attrs, defStyleAttr, defStyle) {\n+\tconstructor(context: Context, attrs: AttributeSet) : this(context, attrs, 0, 0)\n+\n+\tprivate var countdownTimer: CountDownTimer? = null\n+\tprivate val view = View.inflate(context, R.layout.fragment_next_up_buttons, null)\n+\n+\tinit {\n+\t\taddView(view)\n+\t\tview.fragment_next_up_buttons_play_next.apply {\n+\t\t\t// Stop timer when unfocused\n+\t\t\tsetOnFocusChangeListener { _, focused -> if (!focused) stopTimer() }\n+\n+\t\t\t// Add initial focus\n+\t\t\trequestFocus()\n+\t\t}\n+\t}\n+\n+\tfun startTimer() {\n+\t\tval duration = TvApp.getApplication().userPreferences.nextUpTimeout.toLong()\n+\n+\t\t// Cancel current timer if one is already set\n+\t\tcountdownTimer?.cancel()\n+\n+\t\t// Create timer\n+\t\tcountdownTimer = object : CountDownTimer(duration, 1) {\n+\t\t\toverride fun onTick(millisUntilFinished: Long) {\n+\t\t\t\tfragment_next_up_buttons_play_next_progress.max = duration.toInt()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "badbd2d532a182ee07ba90a1f403107572c63dba"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkwNjQyMA==", "bodyText": "So it says \"every tick\" but it won't actually call it every tick. It only calls the onTick function when it is able to. It's entirely based on the system performance.", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/265#discussion_r379906420", "createdAt": "2020-02-16T14:15:03Z", "author": {"login": "nielsvanvelzen"}, "path": "app/src/main/java/org/jellyfin/androidtv/playback/nextup/NextUpButtons.kt", "diffHunk": "@@ -0,0 +1,66 @@\n+package org.jellyfin.androidtv.playback.nextup\n+\n+import android.content.Context\n+import android.os.CountDownTimer\n+import android.util.AttributeSet\n+import android.view.View\n+import android.widget.FrameLayout\n+import kotlinx.android.synthetic.main.fragment_next_up_buttons.view.*\n+import org.jellyfin.androidtv.R\n+import org.jellyfin.androidtv.TvApp\n+\n+class NextUpButtons(context: Context, attrs: AttributeSet? = null, defStyleAttr: Int = 0, defStyle: Int = 0) : FrameLayout(context, attrs, defStyleAttr, defStyle) {\n+\tconstructor(context: Context, attrs: AttributeSet) : this(context, attrs, 0, 0)\n+\n+\tprivate var countdownTimer: CountDownTimer? = null\n+\tprivate val view = View.inflate(context, R.layout.fragment_next_up_buttons, null)\n+\n+\tinit {\n+\t\taddView(view)\n+\t\tview.fragment_next_up_buttons_play_next.apply {\n+\t\t\t// Stop timer when unfocused\n+\t\t\tsetOnFocusChangeListener { _, focused -> if (!focused) stopTimer() }\n+\n+\t\t\t// Add initial focus\n+\t\t\trequestFocus()\n+\t\t}\n+\t}\n+\n+\tfun startTimer() {\n+\t\tval duration = TvApp.getApplication().userPreferences.nextUpTimeout.toLong()\n+\n+\t\t// Cancel current timer if one is already set\n+\t\tcountdownTimer?.cancel()\n+\n+\t\t// Create timer\n+\t\tcountdownTimer = object : CountDownTimer(duration, 1) {\n+\t\t\toverride fun onTick(millisUntilFinished: Long) {\n+\t\t\t\tfragment_next_up_buttons_play_next_progress.max = duration.toInt()", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkwNDg4Ng=="}, "originalCommit": {"oid": "badbd2d532a182ee07ba90a1f403107572c63dba"}, "originalPosition": 38}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM1MTA1NzU4OnYy", "diffSide": "RIGHT", "path": "app/src/main/java/org/jellyfin/androidtv/playback/nextup/NextUpButtons.kt", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNlQxMzo1ODo0MVrOFqTlbw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNlQxMzo1ODo0MVrOFqTlbw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkwNTM5MQ==", "bodyText": "We could also reset the progressbar here, looks a bit strange when it's hanging halfway there", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/265#discussion_r379905391", "createdAt": "2020-02-16T13:58:41Z", "author": {"login": "AndreasGB"}, "path": "app/src/main/java/org/jellyfin/androidtv/playback/nextup/NextUpButtons.kt", "diffHunk": "@@ -0,0 +1,66 @@\n+package org.jellyfin.androidtv.playback.nextup\n+\n+import android.content.Context\n+import android.os.CountDownTimer\n+import android.util.AttributeSet\n+import android.view.View\n+import android.widget.FrameLayout\n+import kotlinx.android.synthetic.main.fragment_next_up_buttons.view.*\n+import org.jellyfin.androidtv.R\n+import org.jellyfin.androidtv.TvApp\n+\n+class NextUpButtons(context: Context, attrs: AttributeSet? = null, defStyleAttr: Int = 0, defStyle: Int = 0) : FrameLayout(context, attrs, defStyleAttr, defStyle) {\n+\tconstructor(context: Context, attrs: AttributeSet) : this(context, attrs, 0, 0)\n+\n+\tprivate var countdownTimer: CountDownTimer? = null\n+\tprivate val view = View.inflate(context, R.layout.fragment_next_up_buttons, null)\n+\n+\tinit {\n+\t\taddView(view)\n+\t\tview.fragment_next_up_buttons_play_next.apply {\n+\t\t\t// Stop timer when unfocused\n+\t\t\tsetOnFocusChangeListener { _, focused -> if (!focused) stopTimer() }\n+\n+\t\t\t// Add initial focus\n+\t\t\trequestFocus()\n+\t\t}\n+\t}\n+\n+\tfun startTimer() {\n+\t\tval duration = TvApp.getApplication().userPreferences.nextUpTimeout.toLong()\n+\n+\t\t// Cancel current timer if one is already set\n+\t\tcountdownTimer?.cancel()\n+\n+\t\t// Create timer\n+\t\tcountdownTimer = object : CountDownTimer(duration, 1) {\n+\t\t\toverride fun onTick(millisUntilFinished: Long) {\n+\t\t\t\tfragment_next_up_buttons_play_next_progress.max = duration.toInt()\n+\t\t\t\tfragment_next_up_buttons_play_next_progress.progress = (duration - millisUntilFinished).toInt()\n+\t\t\t}\n+\n+\t\t\toverride fun onFinish() {\n+\t\t\t\t// Perform a click so the event handler will activate\n+\t\t\t\tview.fragment_next_up_buttons_play_next.performClick()\n+\t\t\t}\n+\t\t}.start()\n+\t}\n+\n+\tfun stopTimer() {\n+\t\tcountdownTimer?.cancel()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "badbd2d532a182ee07ba90a1f403107572c63dba"}, "originalPosition": 50}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM1NDgwOTE0OnYy", "diffSide": "RIGHT", "path": "app/src/main/res/drawable/button_default_highlight.xml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQwNjoyNDoyNFrOFq2Qgg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQwODoyODo1OVrOFq5FAg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDQ3MzQ3NA==", "bodyText": "Should we assign these color values to resources to allow for theming in the future?", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/265#discussion_r380473474", "createdAt": "2020-02-18T06:24:24Z", "author": {"login": "thornbill"}, "path": "app/src/main/res/drawable/button_default_highlight.xml", "diffHunk": "@@ -0,0 +1,6 @@\n+<?xml version=\"1.0\" encoding=\"utf-8\"?>\n+<shape xmlns:android=\"http://schemas.android.com/apk/res/android\"\n+    android:shape=\"rectangle\">\n+    <corners android:radius=\"3dp\" />\n+    <solid android:color=\"#E6CCCCCC\" />", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c7bb1a9aaaa975f565b966f4f44a482313da3669"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDUxOTY4Mg==", "bodyText": "Good idea, I will do that so we're 0.1% closer to a hotdog theme.", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/265#discussion_r380519682", "createdAt": "2020-02-18T08:28:59Z", "author": {"login": "nielsvanvelzen"}, "path": "app/src/main/res/drawable/button_default_highlight.xml", "diffHunk": "@@ -0,0 +1,6 @@\n+<?xml version=\"1.0\" encoding=\"utf-8\"?>\n+<shape xmlns:android=\"http://schemas.android.com/apk/res/android\"\n+    android:shape=\"rectangle\">\n+    <corners android:radius=\"3dp\" />\n+    <solid android:color=\"#E6CCCCCC\" />", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDQ3MzQ3NA=="}, "originalCommit": {"oid": "c7bb1a9aaaa975f565b966f4f44a482313da3669"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1109, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}