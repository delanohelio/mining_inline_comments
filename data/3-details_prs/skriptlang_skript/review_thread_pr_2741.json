{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzU4OTQ1NzI1", "number": 2741, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wM1QxODoyNDoyM1rODVuJ0Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQyMTowNTozNVrODWqzog==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI0MTAyODY1OnYy", "diffSide": "RIGHT", "path": "src/main/java/ch/njol/skript/effects/EffBan.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wM1QxODoyNDoyM1rOFaGUpQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wM1QxOTozMToxMFrOFaHpDg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjkxMDg4NQ==", "bodyText": "getSingle may be null, so it's not safe to call getMS right away", "url": "https://github.com/SkriptLang/Skript/pull/2741#discussion_r362910885", "createdAt": "2020-01-03T18:24:23Z", "author": {"login": "Pikachu920"}, "path": "src/main/java/ch/njol/skript/effects/EffBan.java", "diffHunk": "@@ -73,15 +76,17 @@\n \tpublic boolean init(final Expression<?>[] exprs, final int matchedPattern, final Kleenean isDelayed, final ParseResult parseResult) {\r\n \t\tplayers = exprs[0];\r\n \t\treason = exprs.length > 1 ? (Expression<String>) exprs[1] : null;\r\n+\t\texpires = exprs.length > 1 ? (Expression<Timespan>) exprs[2] : null;\r\n \t\tban = matchedPattern % 2 == 0;\r\n \t\tipBan = matchedPattern >= 2;\r\n \t\treturn true;\r\n \t}\r\n \t\r\n+\t@SuppressWarnings(\"null\")\r\n \t@Override\r\n \tprotected void execute(final Event e) {\r\n \t\tfinal String reason = this.reason != null ? this.reason.getSingle(e) : null; // don't check for null, just ignore an invalid reason\r\n-\t\tfinal Date expires = null;\r\n+\t\tfinal Date expires = this.expires != null ? new Date(System.currentTimeMillis() + this.expires.getSingle(e).getMilliSeconds()) : null;\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a5c65fd4cbc3b6fed03fa049820ba699fe73ffd0"}, "originalPosition": 60}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjkzMjQ5NA==", "bodyText": "Arg Skript ... I tell ya! haha! I was trying to keep this as neat and tidy as possible, but nope. Ill do a quick little fix for this, hope it doesn't get too messy.\nEDIT:\nFixed.", "url": "https://github.com/SkriptLang/Skript/pull/2741#discussion_r362932494", "createdAt": "2020-01-03T19:31:10Z", "author": {"login": "ShaneBeee"}, "path": "src/main/java/ch/njol/skript/effects/EffBan.java", "diffHunk": "@@ -73,15 +76,17 @@\n \tpublic boolean init(final Expression<?>[] exprs, final int matchedPattern, final Kleenean isDelayed, final ParseResult parseResult) {\r\n \t\tplayers = exprs[0];\r\n \t\treason = exprs.length > 1 ? (Expression<String>) exprs[1] : null;\r\n+\t\texpires = exprs.length > 1 ? (Expression<Timespan>) exprs[2] : null;\r\n \t\tban = matchedPattern % 2 == 0;\r\n \t\tipBan = matchedPattern >= 2;\r\n \t\treturn true;\r\n \t}\r\n \t\r\n+\t@SuppressWarnings(\"null\")\r\n \t@Override\r\n \tprotected void execute(final Event e) {\r\n \t\tfinal String reason = this.reason != null ? this.reason.getSingle(e) : null; // don't check for null, just ignore an invalid reason\r\n-\t\tfinal Date expires = null;\r\n+\t\tfinal Date expires = this.expires != null ? new Date(System.currentTimeMillis() + this.expires.getSingle(e).getMilliSeconds()) : null;\r", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjkxMDg4NQ=="}, "originalCommit": {"oid": "a5c65fd4cbc3b6fed03fa049820ba699fe73ffd0"}, "originalPosition": 60}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI1MDk2NjEwOnYy", "diffSide": "RIGHT", "path": "src/main/java/ch/njol/skript/effects/EffBan.java", "isResolved": false, "comments": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQyMTowNTozNVrOFbj0Rg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMFQyMjozMTowMlrOFchsJQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDQ0MjY5NA==", "bodyText": "is it really a good idea to permaban people if the timespan happened to be not set?", "url": "https://github.com/SkriptLang/Skript/pull/2741#discussion_r364442694", "createdAt": "2020-01-08T21:05:35Z", "author": {"login": "Pikachu920"}, "path": "src/main/java/ch/njol/skript/effects/EffBan.java", "diffHunk": "@@ -73,15 +76,18 @@\n \tpublic boolean init(final Expression<?>[] exprs, final int matchedPattern, final Kleenean isDelayed, final ParseResult parseResult) {\r\n \t\tplayers = exprs[0];\r\n \t\treason = exprs.length > 1 ? (Expression<String>) exprs[1] : null;\r\n+\t\texpires = exprs.length > 1 ? (Expression<Timespan>) exprs[2] : null;\r\n \t\tban = matchedPattern % 2 == 0;\r\n \t\tipBan = matchedPattern >= 2;\r\n \t\treturn true;\r\n \t}\r\n \t\r\n+\t@SuppressWarnings(\"null\")\r\n \t@Override\r\n \tprotected void execute(final Event e) {\r\n \t\tfinal String reason = this.reason != null ? this.reason.getSingle(e) : null; // don't check for null, just ignore an invalid reason\r\n-\t\tfinal Date expires = null;\r\n+\t\tTimespan ts = this.expires != null ? this.expires.getSingle(e) : null;\r\n+\t\tfinal Date expires = ts != null ? new Date(System.currentTimeMillis() + ts.getMilliSeconds()) : null;\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7545b4f071bf62eeb0af5f363a8ed3a66914132c"}, "originalPosition": 61}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDQ0NjAyMQ==", "bodyText": "I mean, in all fairness that is up to the Skripter to decide how they want to ban. If they don't choose a timespan then they know its going to be permanent.", "url": "https://github.com/SkriptLang/Skript/pull/2741#discussion_r364446021", "createdAt": "2020-01-08T21:14:08Z", "author": {"login": "ShaneBeee"}, "path": "src/main/java/ch/njol/skript/effects/EffBan.java", "diffHunk": "@@ -73,15 +76,18 @@\n \tpublic boolean init(final Expression<?>[] exprs, final int matchedPattern, final Kleenean isDelayed, final ParseResult parseResult) {\r\n \t\tplayers = exprs[0];\r\n \t\treason = exprs.length > 1 ? (Expression<String>) exprs[1] : null;\r\n+\t\texpires = exprs.length > 1 ? (Expression<Timespan>) exprs[2] : null;\r\n \t\tban = matchedPattern % 2 == 0;\r\n \t\tipBan = matchedPattern >= 2;\r\n \t\treturn true;\r\n \t}\r\n \t\r\n+\t@SuppressWarnings(\"null\")\r\n \t@Override\r\n \tprotected void execute(final Event e) {\r\n \t\tfinal String reason = this.reason != null ? this.reason.getSingle(e) : null; // don't check for null, just ignore an invalid reason\r\n-\t\tfinal Date expires = null;\r\n+\t\tTimespan ts = this.expires != null ? this.expires.getSingle(e) : null;\r\n+\t\tfinal Date expires = ts != null ? new Date(System.currentTimeMillis() + ts.getMilliSeconds()) : null;\r", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDQ0MjY5NA=="}, "originalCommit": {"oid": "7545b4f071bf62eeb0af5f363a8ed3a66914132c"}, "originalPosition": 61}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDQ1NTY2NQ==", "bodyText": "yeah but with this ban player for {_null var} is a permaban", "url": "https://github.com/SkriptLang/Skript/pull/2741#discussion_r364455665", "createdAt": "2020-01-08T21:38:09Z", "author": {"login": "Pikachu920"}, "path": "src/main/java/ch/njol/skript/effects/EffBan.java", "diffHunk": "@@ -73,15 +76,18 @@\n \tpublic boolean init(final Expression<?>[] exprs, final int matchedPattern, final Kleenean isDelayed, final ParseResult parseResult) {\r\n \t\tplayers = exprs[0];\r\n \t\treason = exprs.length > 1 ? (Expression<String>) exprs[1] : null;\r\n+\t\texpires = exprs.length > 1 ? (Expression<Timespan>) exprs[2] : null;\r\n \t\tban = matchedPattern % 2 == 0;\r\n \t\tipBan = matchedPattern >= 2;\r\n \t\treturn true;\r\n \t}\r\n \t\r\n+\t@SuppressWarnings(\"null\")\r\n \t@Override\r\n \tprotected void execute(final Event e) {\r\n \t\tfinal String reason = this.reason != null ? this.reason.getSingle(e) : null; // don't check for null, just ignore an invalid reason\r\n-\t\tfinal Date expires = null;\r\n+\t\tTimespan ts = this.expires != null ? this.expires.getSingle(e) : null;\r\n+\t\tfinal Date expires = ts != null ? new Date(System.currentTimeMillis() + ts.getMilliSeconds()) : null;\r", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDQ0MjY5NA=="}, "originalCommit": {"oid": "7545b4f071bf62eeb0af5f363a8ed3a66914132c"}, "originalPosition": 61}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDQ4MzA3MQ==", "bodyText": "Ah good point. Do you have a suggestion for a better way around this?", "url": "https://github.com/SkriptLang/Skript/pull/2741#discussion_r364483071", "createdAt": "2020-01-08T22:51:12Z", "author": {"login": "ShaneBeee"}, "path": "src/main/java/ch/njol/skript/effects/EffBan.java", "diffHunk": "@@ -73,15 +76,18 @@\n \tpublic boolean init(final Expression<?>[] exprs, final int matchedPattern, final Kleenean isDelayed, final ParseResult parseResult) {\r\n \t\tplayers = exprs[0];\r\n \t\treason = exprs.length > 1 ? (Expression<String>) exprs[1] : null;\r\n+\t\texpires = exprs.length > 1 ? (Expression<Timespan>) exprs[2] : null;\r\n \t\tban = matchedPattern % 2 == 0;\r\n \t\tipBan = matchedPattern >= 2;\r\n \t\treturn true;\r\n \t}\r\n \t\r\n+\t@SuppressWarnings(\"null\")\r\n \t@Override\r\n \tprotected void execute(final Event e) {\r\n \t\tfinal String reason = this.reason != null ? this.reason.getSingle(e) : null; // don't check for null, just ignore an invalid reason\r\n-\t\tfinal Date expires = null;\r\n+\t\tTimespan ts = this.expires != null ? this.expires.getSingle(e) : null;\r\n+\t\tfinal Date expires = ts != null ? new Date(System.currentTimeMillis() + ts.getMilliSeconds()) : null;\r", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDQ0MjY5NA=="}, "originalCommit": {"oid": "7545b4f071bf62eeb0af5f363a8ed3a66914132c"}, "originalPosition": 61}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDc3MTExMA==", "bodyText": "just return like other effects do? i feel like it's slightly better to not ban them rather than perma them but i'm not sure... at least it'd be consistent", "url": "https://github.com/SkriptLang/Skript/pull/2741#discussion_r364771110", "createdAt": "2020-01-09T14:35:54Z", "author": {"login": "Pikachu920"}, "path": "src/main/java/ch/njol/skript/effects/EffBan.java", "diffHunk": "@@ -73,15 +76,18 @@\n \tpublic boolean init(final Expression<?>[] exprs, final int matchedPattern, final Kleenean isDelayed, final ParseResult parseResult) {\r\n \t\tplayers = exprs[0];\r\n \t\treason = exprs.length > 1 ? (Expression<String>) exprs[1] : null;\r\n+\t\texpires = exprs.length > 1 ? (Expression<Timespan>) exprs[2] : null;\r\n \t\tban = matchedPattern % 2 == 0;\r\n \t\tipBan = matchedPattern >= 2;\r\n \t\treturn true;\r\n \t}\r\n \t\r\n+\t@SuppressWarnings(\"null\")\r\n \t@Override\r\n \tprotected void execute(final Event e) {\r\n \t\tfinal String reason = this.reason != null ? this.reason.getSingle(e) : null; // don't check for null, just ignore an invalid reason\r\n-\t\tfinal Date expires = null;\r\n+\t\tTimespan ts = this.expires != null ? this.expires.getSingle(e) : null;\r\n+\t\tfinal Date expires = ts != null ? new Date(System.currentTimeMillis() + ts.getMilliSeconds()) : null;\r", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDQ0MjY5NA=="}, "originalCommit": {"oid": "7545b4f071bf62eeb0af5f363a8ed3a66914132c"}, "originalPosition": 61}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDc3MTQxMw==", "bodyText": "alternatively we can implement dice using armor stands and force the banned players to roll them in order to determine how long they get banned for.\ni like that idea", "url": "https://github.com/SkriptLang/Skript/pull/2741#discussion_r364771413", "createdAt": "2020-01-09T14:36:27Z", "author": {"login": "Pikachu920"}, "path": "src/main/java/ch/njol/skript/effects/EffBan.java", "diffHunk": "@@ -73,15 +76,18 @@\n \tpublic boolean init(final Expression<?>[] exprs, final int matchedPattern, final Kleenean isDelayed, final ParseResult parseResult) {\r\n \t\tplayers = exprs[0];\r\n \t\treason = exprs.length > 1 ? (Expression<String>) exprs[1] : null;\r\n+\t\texpires = exprs.length > 1 ? (Expression<Timespan>) exprs[2] : null;\r\n \t\tban = matchedPattern % 2 == 0;\r\n \t\tipBan = matchedPattern >= 2;\r\n \t\treturn true;\r\n \t}\r\n \t\r\n+\t@SuppressWarnings(\"null\")\r\n \t@Override\r\n \tprotected void execute(final Event e) {\r\n \t\tfinal String reason = this.reason != null ? this.reason.getSingle(e) : null; // don't check for null, just ignore an invalid reason\r\n-\t\tfinal Date expires = null;\r\n+\t\tTimespan ts = this.expires != null ? this.expires.getSingle(e) : null;\r\n+\t\tfinal Date expires = ts != null ? new Date(System.currentTimeMillis() + ts.getMilliSeconds()) : null;\r", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDQ0MjY5NA=="}, "originalCommit": {"oid": "7545b4f071bf62eeb0af5f363a8ed3a66914132c"}, "originalPosition": 61}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDg2MDY5MA==", "bodyText": "alternatively we can implement dice using armor stands and force the banned players to roll them in order to determine how long they get banned for.\ni like that idea\n\nhahahahaha, OMG.\n\njust return like other effects do? i feel like it's slightly better to not ban them rather than perma them but i'm not sure... at least it'd be consistent\n\nsounds good. Ill start working on that.\nMy only fear here though is what if said var is null, and you THINK You are banning a player, then you aren't actually banning them. Do you think people will complain \"But I banned them and they aren't banned?!?\"\nMaybe send a console warning/error?", "url": "https://github.com/SkriptLang/Skript/pull/2741#discussion_r364860690", "createdAt": "2020-01-09T17:12:16Z", "author": {"login": "ShaneBeee"}, "path": "src/main/java/ch/njol/skript/effects/EffBan.java", "diffHunk": "@@ -73,15 +76,18 @@\n \tpublic boolean init(final Expression<?>[] exprs, final int matchedPattern, final Kleenean isDelayed, final ParseResult parseResult) {\r\n \t\tplayers = exprs[0];\r\n \t\treason = exprs.length > 1 ? (Expression<String>) exprs[1] : null;\r\n+\t\texpires = exprs.length > 1 ? (Expression<Timespan>) exprs[2] : null;\r\n \t\tban = matchedPattern % 2 == 0;\r\n \t\tipBan = matchedPattern >= 2;\r\n \t\treturn true;\r\n \t}\r\n \t\r\n+\t@SuppressWarnings(\"null\")\r\n \t@Override\r\n \tprotected void execute(final Event e) {\r\n \t\tfinal String reason = this.reason != null ? this.reason.getSingle(e) : null; // don't check for null, just ignore an invalid reason\r\n-\t\tfinal Date expires = null;\r\n+\t\tTimespan ts = this.expires != null ? this.expires.getSingle(e) : null;\r\n+\t\tfinal Date expires = ts != null ? new Date(System.currentTimeMillis() + ts.getMilliSeconds()) : null;\r", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDQ0MjY5NA=="}, "originalCommit": {"oid": "7545b4f071bf62eeb0af5f363a8ed3a66914132c"}, "originalPosition": 61}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTA2MDE0MA==", "bodyText": "Ok I added a check for the time span equaling null. Im also throwing a small error to the console to let them know they were not successfully banned.\nIm 50/50 on the error, due to the fact that many server owners/staff don't actually look at the console and this message may be useless.\nWhat is your input on that? If you think I should remove it, I can remove it.", "url": "https://github.com/SkriptLang/Skript/pull/2741#discussion_r365060140", "createdAt": "2020-01-10T03:31:15Z", "author": {"login": "ShaneBeee"}, "path": "src/main/java/ch/njol/skript/effects/EffBan.java", "diffHunk": "@@ -73,15 +76,18 @@\n \tpublic boolean init(final Expression<?>[] exprs, final int matchedPattern, final Kleenean isDelayed, final ParseResult parseResult) {\r\n \t\tplayers = exprs[0];\r\n \t\treason = exprs.length > 1 ? (Expression<String>) exprs[1] : null;\r\n+\t\texpires = exprs.length > 1 ? (Expression<Timespan>) exprs[2] : null;\r\n \t\tban = matchedPattern % 2 == 0;\r\n \t\tipBan = matchedPattern >= 2;\r\n \t\treturn true;\r\n \t}\r\n \t\r\n+\t@SuppressWarnings(\"null\")\r\n \t@Override\r\n \tprotected void execute(final Event e) {\r\n \t\tfinal String reason = this.reason != null ? this.reason.getSingle(e) : null; // don't check for null, just ignore an invalid reason\r\n-\t\tfinal Date expires = null;\r\n+\t\tTimespan ts = this.expires != null ? this.expires.getSingle(e) : null;\r\n+\t\tfinal Date expires = ts != null ? new Date(System.currentTimeMillis() + ts.getMilliSeconds()) : null;\r", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDQ0MjY5NA=="}, "originalCommit": {"oid": "7545b4f071bf62eeb0af5f363a8ed3a66914132c"}, "originalPosition": 61}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTQ1NDU3Nw==", "bodyText": "Generally, errors written to console are not very useful. We should instead update the documentation to indicate what happens if ban length is not given. That, or permaban the players; I assume that most server owners have some way for players to appeal bans.", "url": "https://github.com/SkriptLang/Skript/pull/2741#discussion_r365454577", "createdAt": "2020-01-10T22:24:31Z", "author": {"login": "bensku"}, "path": "src/main/java/ch/njol/skript/effects/EffBan.java", "diffHunk": "@@ -73,15 +76,18 @@\n \tpublic boolean init(final Expression<?>[] exprs, final int matchedPattern, final Kleenean isDelayed, final ParseResult parseResult) {\r\n \t\tplayers = exprs[0];\r\n \t\treason = exprs.length > 1 ? (Expression<String>) exprs[1] : null;\r\n+\t\texpires = exprs.length > 1 ? (Expression<Timespan>) exprs[2] : null;\r\n \t\tban = matchedPattern % 2 == 0;\r\n \t\tipBan = matchedPattern >= 2;\r\n \t\treturn true;\r\n \t}\r\n \t\r\n+\t@SuppressWarnings(\"null\")\r\n \t@Override\r\n \tprotected void execute(final Event e) {\r\n \t\tfinal String reason = this.reason != null ? this.reason.getSingle(e) : null; // don't check for null, just ignore an invalid reason\r\n-\t\tfinal Date expires = null;\r\n+\t\tTimespan ts = this.expires != null ? this.expires.getSingle(e) : null;\r\n+\t\tfinal Date expires = ts != null ? new Date(System.currentTimeMillis() + ts.getMilliSeconds()) : null;\r", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDQ0MjY5NA=="}, "originalCommit": {"oid": "7545b4f071bf62eeb0af5f363a8ed3a66914132c"}, "originalPosition": 61}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTQ1NTMwMA==", "bodyText": "Ok, I will definitely remove the message.\nIm more in favour of perma banning the player vs no ban at all, so I will revery back to that.", "url": "https://github.com/SkriptLang/Skript/pull/2741#discussion_r365455300", "createdAt": "2020-01-10T22:27:10Z", "author": {"login": "ShaneBeee"}, "path": "src/main/java/ch/njol/skript/effects/EffBan.java", "diffHunk": "@@ -73,15 +76,18 @@\n \tpublic boolean init(final Expression<?>[] exprs, final int matchedPattern, final Kleenean isDelayed, final ParseResult parseResult) {\r\n \t\tplayers = exprs[0];\r\n \t\treason = exprs.length > 1 ? (Expression<String>) exprs[1] : null;\r\n+\t\texpires = exprs.length > 1 ? (Expression<Timespan>) exprs[2] : null;\r\n \t\tban = matchedPattern % 2 == 0;\r\n \t\tipBan = matchedPattern >= 2;\r\n \t\treturn true;\r\n \t}\r\n \t\r\n+\t@SuppressWarnings(\"null\")\r\n \t@Override\r\n \tprotected void execute(final Event e) {\r\n \t\tfinal String reason = this.reason != null ? this.reason.getSingle(e) : null; // don't check for null, just ignore an invalid reason\r\n-\t\tfinal Date expires = null;\r\n+\t\tTimespan ts = this.expires != null ? this.expires.getSingle(e) : null;\r\n+\t\tfinal Date expires = ts != null ? new Date(System.currentTimeMillis() + ts.getMilliSeconds()) : null;\r", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDQ0MjY5NA=="}, "originalCommit": {"oid": "7545b4f071bf62eeb0af5f363a8ed3a66914132c"}, "originalPosition": 61}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTQ1NjQyMQ==", "bodyText": "Ok, I have applied said changes.", "url": "https://github.com/SkriptLang/Skript/pull/2741#discussion_r365456421", "createdAt": "2020-01-10T22:31:02Z", "author": {"login": "ShaneBeee"}, "path": "src/main/java/ch/njol/skript/effects/EffBan.java", "diffHunk": "@@ -73,15 +76,18 @@\n \tpublic boolean init(final Expression<?>[] exprs, final int matchedPattern, final Kleenean isDelayed, final ParseResult parseResult) {\r\n \t\tplayers = exprs[0];\r\n \t\treason = exprs.length > 1 ? (Expression<String>) exprs[1] : null;\r\n+\t\texpires = exprs.length > 1 ? (Expression<Timespan>) exprs[2] : null;\r\n \t\tban = matchedPattern % 2 == 0;\r\n \t\tipBan = matchedPattern >= 2;\r\n \t\treturn true;\r\n \t}\r\n \t\r\n+\t@SuppressWarnings(\"null\")\r\n \t@Override\r\n \tprotected void execute(final Event e) {\r\n \t\tfinal String reason = this.reason != null ? this.reason.getSingle(e) : null; // don't check for null, just ignore an invalid reason\r\n-\t\tfinal Date expires = null;\r\n+\t\tTimespan ts = this.expires != null ? this.expires.getSingle(e) : null;\r\n+\t\tfinal Date expires = ts != null ? new Date(System.currentTimeMillis() + ts.getMilliSeconds()) : null;\r", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDQ0MjY5NA=="}, "originalCommit": {"oid": "7545b4f071bf62eeb0af5f363a8ed3a66914132c"}, "originalPosition": 61}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1106, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}