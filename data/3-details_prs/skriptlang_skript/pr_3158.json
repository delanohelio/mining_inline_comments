{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDUxNDY2NDIy", "number": 3158, "title": "Create ExprFallenDistance.java", "bodyText": "Description\n\nYou can get an entity's fallen distance using ENTITY's fall(en|ed|) distance (using the Bukkit Entity.getFallDistance() and Entity.setFallDistance(Float) methods)\n\nTarget Minecraft Versions:    any \nRequirements:   none  \nRelated Issues:   none", "createdAt": "2020-07-17T21:08:05Z", "url": "https://github.com/SkriptLang/Skript/pull/3158", "merged": true, "mergeCommit": {"oid": "7b68e48d590f3ffe0ef929b13459eb2485351e2c"}, "closed": true, "closedAt": "2020-07-20T10:28:47Z", "author": {"login": "DeltaRays"}, "timelineItems": {"totalCount": 25, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc16Zn6gH2gAyNDUxNDY2NDIyOmZiMzI2MmQyNjUxODRmMDI2OTQ0NTRlNGM0ODMyNDJlMzA3MmZjOTM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc2vAmPgFqTQ1MTQ4MjI1NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "fb3262d265184f02694454e4c483242e3072fc93", "author": {"user": {"login": "DeltaRays", "name": "DeltaRays"}}, "url": "https://github.com/SkriptLang/Skript/commit/fb3262d265184f02694454e4c483242e3072fc93", "committedDate": "2020-07-17T21:06:33Z", "message": "Create ExprFallenDistance.java"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwOTY1MTM0", "url": "https://github.com/SkriptLang/Skript/pull/3158#pullrequestreview-450965134", "createdAt": "2020-07-17T21:23:53Z", "commit": {"oid": "fb3262d265184f02694454e4c483242e3072fc93"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QyMToyMzo1NFrOGzhlEQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QyMToyNTozNFrOGzhnRA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjY4MDcyMQ==", "bodyText": "Need some docs here", "url": "https://github.com/SkriptLang/Skript/pull/3158#discussion_r456680721", "createdAt": "2020-07-17T21:23:54Z", "author": {"login": "ShaneBeee"}, "path": "src/main/java/ch/njol/skript/expressions/ExprFallenDistance.java", "diffHunk": "@@ -0,0 +1,76 @@\n+/**\n+ *   This file is part of Skript.\n+ *\n+ *  Skript is free software: you can redistribute it and/or modify\n+ *  it under the terms of the GNU General Public License as published by\n+ *  the Free Software Foundation, either version 3 of the License, or\n+ *  (at your option) any later version.\n+ *\n+ *  Skript is distributed in the hope that it will be useful,\n+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ *  GNU General Public License for more details.\n+ *\n+ *  You should have received a copy of the GNU General Public License\n+ *  along with Skript.  If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ *\n+ * Copyright 2011-2017 Peter G\u00fcttinger and contributors\n+ */\n+package ch.njol.skript.expressions;\n+\n+import org.bukkit.entity.Entity;\n+import org.bukkit.event.Event;\n+import org.eclipse.jdt.annotation.Nullable;\n+\n+import ch.njol.skript.classes.Changer;\n+import ch.njol.skript.expressions.base.SimplePropertyExpression;\n+import ch.njol.util.coll.CollectionUtils;\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fb3262d265184f02694454e4c483242e3072fc93"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjY4MTAyMg==", "bodyText": "this should support multiple entities", "url": "https://github.com/SkriptLang/Skript/pull/3158#discussion_r456681022", "createdAt": "2020-07-17T21:24:47Z", "author": {"login": "ShaneBeee"}, "path": "src/main/java/ch/njol/skript/expressions/ExprFallenDistance.java", "diffHunk": "@@ -0,0 +1,76 @@\n+/**\n+ *   This file is part of Skript.\n+ *\n+ *  Skript is free software: you can redistribute it and/or modify\n+ *  it under the terms of the GNU General Public License as published by\n+ *  the Free Software Foundation, either version 3 of the License, or\n+ *  (at your option) any later version.\n+ *\n+ *  Skript is distributed in the hope that it will be useful,\n+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ *  GNU General Public License for more details.\n+ *\n+ *  You should have received a copy of the GNU General Public License\n+ *  along with Skript.  If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ *\n+ * Copyright 2011-2017 Peter G\u00fcttinger and contributors\n+ */\n+package ch.njol.skript.expressions;\n+\n+import org.bukkit.entity.Entity;\n+import org.bukkit.event.Event;\n+import org.eclipse.jdt.annotation.Nullable;\n+\n+import ch.njol.skript.classes.Changer;\n+import ch.njol.skript.expressions.base.SimplePropertyExpression;\n+import ch.njol.util.coll.CollectionUtils;\n+\n+public class ExprFallenDistance extends SimplePropertyExpression<Entity, Number> {\n+\tstatic {\n+\t\tregister(ExprFallenDistance.class, Number.class, \"fall(en|ed|) distance\", \"entity\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fb3262d265184f02694454e4c483242e3072fc93"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjY4MTI4NA==", "bodyText": "break should be on the next line", "url": "https://github.com/SkriptLang/Skript/pull/3158#discussion_r456681284", "createdAt": "2020-07-17T21:25:34Z", "author": {"login": "ShaneBeee"}, "path": "src/main/java/ch/njol/skript/expressions/ExprFallenDistance.java", "diffHunk": "@@ -0,0 +1,76 @@\n+/**\n+ *   This file is part of Skript.\n+ *\n+ *  Skript is free software: you can redistribute it and/or modify\n+ *  it under the terms of the GNU General Public License as published by\n+ *  the Free Software Foundation, either version 3 of the License, or\n+ *  (at your option) any later version.\n+ *\n+ *  Skript is distributed in the hope that it will be useful,\n+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ *  GNU General Public License for more details.\n+ *\n+ *  You should have received a copy of the GNU General Public License\n+ *  along with Skript.  If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ *\n+ * Copyright 2011-2017 Peter G\u00fcttinger and contributors\n+ */\n+package ch.njol.skript.expressions;\n+\n+import org.bukkit.entity.Entity;\n+import org.bukkit.event.Event;\n+import org.eclipse.jdt.annotation.Nullable;\n+\n+import ch.njol.skript.classes.Changer;\n+import ch.njol.skript.expressions.base.SimplePropertyExpression;\n+import ch.njol.util.coll.CollectionUtils;\n+\n+public class ExprFallenDistance extends SimplePropertyExpression<Entity, Number> {\n+\tstatic {\n+\t\tregister(ExprFallenDistance.class, Number.class, \"fall(en|ed|) distance\", \"entity\");\n+\t}\n+\t@Override\n+\tprotected String getPropertyName() {\n+\t\treturn \"fall(en|ed|) distance\";\n+\t}\n+\t\n+\t@Nullable\n+\t@Override\n+\tpublic Number convert(Entity entity) {\n+\t\treturn entity.getFallDistance();\n+\t}\n+\t\n+\t@Override\n+\tpublic Class<? extends Number> getReturnType() {\n+\t\treturn Number.class;\n+\t}\n+\t\n+\t@Override\n+\tpublic void change(Event e, @Nullable Object[] delta, Changer.ChangeMode mode) {\n+\t\tif(delta != null){\n+\t\t\tEntity entity = getExpr().getSingle(e);\n+\t\t\tif(entity == null) return;\n+\t\t\tFloat number = ((Number) delta[0]).floatValue();\n+\t\t\tswitch (mode){\n+\t\t\t\tcase ADD:\n+\t\t\t\t\tentity.setFallDistance(entity.getFallDistance()+number);\n+\t\t\t\t\tbreak;\n+\t\t\t\tcase SET:\n+\t\t\t\t\tentity.setFallDistance(number);break;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fb3262d265184f02694454e4c483242e3072fc93"}, "originalPosition": 61}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwOTcyMTkw", "url": "https://github.com/SkriptLang/Skript/pull/3158#pullrequestreview-450972190", "createdAt": "2020-07-17T21:43:45Z", "commit": {"oid": "fb3262d265184f02694454e4c483242e3072fc93"}, "state": "DISMISSED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QyMTo0Mzo0NVrOGzh9fg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QyMTo1MjoyN1rOGziH6w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjY4Njk3NA==", "bodyText": "The changer should also support multiple entities", "url": "https://github.com/SkriptLang/Skript/pull/3158#discussion_r456686974", "createdAt": "2020-07-17T21:43:45Z", "author": {"login": "FranKusmiruk"}, "path": "src/main/java/ch/njol/skript/expressions/ExprFallenDistance.java", "diffHunk": "@@ -0,0 +1,76 @@\n+/**\n+ *   This file is part of Skript.\n+ *\n+ *  Skript is free software: you can redistribute it and/or modify\n+ *  it under the terms of the GNU General Public License as published by\n+ *  the Free Software Foundation, either version 3 of the License, or\n+ *  (at your option) any later version.\n+ *\n+ *  Skript is distributed in the hope that it will be useful,\n+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ *  GNU General Public License for more details.\n+ *\n+ *  You should have received a copy of the GNU General Public License\n+ *  along with Skript.  If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ *\n+ * Copyright 2011-2017 Peter G\u00fcttinger and contributors\n+ */\n+package ch.njol.skript.expressions;\n+\n+import org.bukkit.entity.Entity;\n+import org.bukkit.event.Event;\n+import org.eclipse.jdt.annotation.Nullable;\n+\n+import ch.njol.skript.classes.Changer;\n+import ch.njol.skript.expressions.base.SimplePropertyExpression;\n+import ch.njol.util.coll.CollectionUtils;\n+\n+public class ExprFallenDistance extends SimplePropertyExpression<Entity, Number> {\n+\tstatic {\n+\t\tregister(ExprFallenDistance.class, Number.class, \"fall(en|ed|) distance\", \"entity\");\n+\t}\n+\t@Override\n+\tprotected String getPropertyName() {\n+\t\treturn \"fall(en|ed|) distance\";\n+\t}\n+\t\n+\t@Nullable\n+\t@Override\n+\tpublic Number convert(Entity entity) {\n+\t\treturn entity.getFallDistance();\n+\t}\n+\t\n+\t@Override\n+\tpublic Class<? extends Number> getReturnType() {\n+\t\treturn Number.class;\n+\t}\n+\t\n+\t@Override\n+\tpublic void change(Event e, @Nullable Object[] delta, Changer.ChangeMode mode) {\n+\t\tif(delta != null){\n+\t\t\tEntity entity = getExpr().getSingle(e);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fb3262d265184f02694454e4c483242e3072fc93"}, "originalPosition": 53}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjY4Nzg2Nw==", "bodyText": "As per the coding conventions file, the method order should be:\n(init) -> convert -> (acceptChange) -> (change) -> getReturnType -> getPropertyName\n\nAnd the Changer.ChangeMode class should be imported directly.", "url": "https://github.com/SkriptLang/Skript/pull/3158#discussion_r456687867", "createdAt": "2020-07-17T21:46:34Z", "author": {"login": "FranKusmiruk"}, "path": "src/main/java/ch/njol/skript/expressions/ExprFallenDistance.java", "diffHunk": "@@ -0,0 +1,76 @@\n+/**\n+ *   This file is part of Skript.\n+ *\n+ *  Skript is free software: you can redistribute it and/or modify\n+ *  it under the terms of the GNU General Public License as published by\n+ *  the Free Software Foundation, either version 3 of the License, or\n+ *  (at your option) any later version.\n+ *\n+ *  Skript is distributed in the hope that it will be useful,\n+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ *  GNU General Public License for more details.\n+ *\n+ *  You should have received a copy of the GNU General Public License\n+ *  along with Skript.  If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ *\n+ * Copyright 2011-2017 Peter G\u00fcttinger and contributors\n+ */\n+package ch.njol.skript.expressions;\n+\n+import org.bukkit.entity.Entity;\n+import org.bukkit.event.Event;\n+import org.eclipse.jdt.annotation.Nullable;\n+\n+import ch.njol.skript.classes.Changer;\n+import ch.njol.skript.expressions.base.SimplePropertyExpression;\n+import ch.njol.util.coll.CollectionUtils;\n+\n+public class ExprFallenDistance extends SimplePropertyExpression<Entity, Number> {\n+\tstatic {\n+\t\tregister(ExprFallenDistance.class, Number.class, \"fall(en|ed|) distance\", \"entity\");\n+\t}\n+\t@Override\n+\tprotected String getPropertyName() {\n+\t\treturn \"fall(en|ed|) distance\";\n+\t}\n+\t\n+\t@Nullable\n+\t@Override\n+\tpublic Number convert(Entity entity) {\n+\t\treturn entity.getFallDistance();\n+\t}\n+\t\n+\t@Override\n+\tpublic Class<? extends Number> getReturnType() {\n+\t\treturn Number.class;\n+\t}\n+\t\n+\t@Override\n+\tpublic void change(Event e, @Nullable Object[] delta, Changer.ChangeMode mode) {\n+\t\tif(delta != null){\n+\t\t\tEntity entity = getExpr().getSingle(e);\n+\t\t\tif(entity == null) return;\n+\t\t\tFloat number = ((Number) delta[0]).floatValue();\n+\t\t\tswitch (mode){\n+\t\t\t\tcase ADD:\n+\t\t\t\t\tentity.setFallDistance(entity.getFallDistance()+number);\n+\t\t\t\t\tbreak;\n+\t\t\t\tcase SET:\n+\t\t\t\t\tentity.setFallDistance(number);break;\n+\t\t\t\tcase REMOVE:\n+\t\t\t\t\tentity.setFallDistance(entity.getFallDistance()-number);\n+\t\t\t\t\tbreak;\n+\t\t\t\tdefault:\n+\t\t\t\t\tentity.setFallDistance(0);\n+\t\t\t}\n+\t\t}\n+\t}\n+\t\n+\t@Nullable\n+\t@Override\n+\tpublic Class<?>[] acceptChange(Changer.ChangeMode mode) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fb3262d265184f02694454e4c483242e3072fc93"}, "originalPosition": 73}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjY4ODMyNA==", "bodyText": "REMOVE_ALL should either not be supported in acceptChange or have the same behaviour as REMOVE, in this case, the former is preferred.\nAlso, is RESET behaviour correct here? DELETE is fine like this but resetting the fall distance definitely shouldn't behave like this. I don't believe you can \"reset\" the fall distance at all so it should just not be supported in acceptChange.", "url": "https://github.com/SkriptLang/Skript/pull/3158#discussion_r456688324", "createdAt": "2020-07-17T21:48:09Z", "author": {"login": "FranKusmiruk"}, "path": "src/main/java/ch/njol/skript/expressions/ExprFallenDistance.java", "diffHunk": "@@ -0,0 +1,76 @@\n+/**\n+ *   This file is part of Skript.\n+ *\n+ *  Skript is free software: you can redistribute it and/or modify\n+ *  it under the terms of the GNU General Public License as published by\n+ *  the Free Software Foundation, either version 3 of the License, or\n+ *  (at your option) any later version.\n+ *\n+ *  Skript is distributed in the hope that it will be useful,\n+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ *  GNU General Public License for more details.\n+ *\n+ *  You should have received a copy of the GNU General Public License\n+ *  along with Skript.  If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ *\n+ * Copyright 2011-2017 Peter G\u00fcttinger and contributors\n+ */\n+package ch.njol.skript.expressions;\n+\n+import org.bukkit.entity.Entity;\n+import org.bukkit.event.Event;\n+import org.eclipse.jdt.annotation.Nullable;\n+\n+import ch.njol.skript.classes.Changer;\n+import ch.njol.skript.expressions.base.SimplePropertyExpression;\n+import ch.njol.util.coll.CollectionUtils;\n+\n+public class ExprFallenDistance extends SimplePropertyExpression<Entity, Number> {\n+\tstatic {\n+\t\tregister(ExprFallenDistance.class, Number.class, \"fall(en|ed|) distance\", \"entity\");\n+\t}\n+\t@Override\n+\tprotected String getPropertyName() {\n+\t\treturn \"fall(en|ed|) distance\";\n+\t}\n+\t\n+\t@Nullable\n+\t@Override\n+\tpublic Number convert(Entity entity) {\n+\t\treturn entity.getFallDistance();\n+\t}\n+\t\n+\t@Override\n+\tpublic Class<? extends Number> getReturnType() {\n+\t\treturn Number.class;\n+\t}\n+\t\n+\t@Override\n+\tpublic void change(Event e, @Nullable Object[] delta, Changer.ChangeMode mode) {\n+\t\tif(delta != null){\n+\t\t\tEntity entity = getExpr().getSingle(e);\n+\t\t\tif(entity == null) return;\n+\t\t\tFloat number = ((Number) delta[0]).floatValue();\n+\t\t\tswitch (mode){\n+\t\t\t\tcase ADD:\n+\t\t\t\t\tentity.setFallDistance(entity.getFallDistance()+number);\n+\t\t\t\t\tbreak;\n+\t\t\t\tcase SET:\n+\t\t\t\t\tentity.setFallDistance(number);break;\n+\t\t\t\tcase REMOVE:\n+\t\t\t\t\tentity.setFallDistance(entity.getFallDistance()-number);\n+\t\t\t\t\tbreak;\n+\t\t\t\tdefault:\n+\t\t\t\t\tentity.setFallDistance(0);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fb3262d265184f02694454e4c483242e3072fc93"}, "originalPosition": 66}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjY4ODgzNQ==", "bodyText": "return should be on the next line.", "url": "https://github.com/SkriptLang/Skript/pull/3158#discussion_r456688835", "createdAt": "2020-07-17T21:49:49Z", "author": {"login": "FranKusmiruk"}, "path": "src/main/java/ch/njol/skript/expressions/ExprFallenDistance.java", "diffHunk": "@@ -0,0 +1,76 @@\n+/**\n+ *   This file is part of Skript.\n+ *\n+ *  Skript is free software: you can redistribute it and/or modify\n+ *  it under the terms of the GNU General Public License as published by\n+ *  the Free Software Foundation, either version 3 of the License, or\n+ *  (at your option) any later version.\n+ *\n+ *  Skript is distributed in the hope that it will be useful,\n+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ *  GNU General Public License for more details.\n+ *\n+ *  You should have received a copy of the GNU General Public License\n+ *  along with Skript.  If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ *\n+ * Copyright 2011-2017 Peter G\u00fcttinger and contributors\n+ */\n+package ch.njol.skript.expressions;\n+\n+import org.bukkit.entity.Entity;\n+import org.bukkit.event.Event;\n+import org.eclipse.jdt.annotation.Nullable;\n+\n+import ch.njol.skript.classes.Changer;\n+import ch.njol.skript.expressions.base.SimplePropertyExpression;\n+import ch.njol.util.coll.CollectionUtils;\n+\n+public class ExprFallenDistance extends SimplePropertyExpression<Entity, Number> {\n+\tstatic {\n+\t\tregister(ExprFallenDistance.class, Number.class, \"fall(en|ed|) distance\", \"entity\");\n+\t}\n+\t@Override\n+\tprotected String getPropertyName() {\n+\t\treturn \"fall(en|ed|) distance\";\n+\t}\n+\t\n+\t@Nullable\n+\t@Override\n+\tpublic Number convert(Entity entity) {\n+\t\treturn entity.getFallDistance();\n+\t}\n+\t\n+\t@Override\n+\tpublic Class<? extends Number> getReturnType() {\n+\t\treturn Number.class;\n+\t}\n+\t\n+\t@Override\n+\tpublic void change(Event e, @Nullable Object[] delta, Changer.ChangeMode mode) {\n+\t\tif(delta != null){\n+\t\t\tEntity entity = getExpr().getSingle(e);\n+\t\t\tif(entity == null) return;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fb3262d265184f02694454e4c483242e3072fc93"}, "originalPosition": 54}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjY4ODk2Mg==", "bodyText": "Missing space before starting brace", "url": "https://github.com/SkriptLang/Skript/pull/3158#discussion_r456688962", "createdAt": "2020-07-17T21:50:09Z", "author": {"login": "FranKusmiruk"}, "path": "src/main/java/ch/njol/skript/expressions/ExprFallenDistance.java", "diffHunk": "@@ -0,0 +1,76 @@\n+/**\n+ *   This file is part of Skript.\n+ *\n+ *  Skript is free software: you can redistribute it and/or modify\n+ *  it under the terms of the GNU General Public License as published by\n+ *  the Free Software Foundation, either version 3 of the License, or\n+ *  (at your option) any later version.\n+ *\n+ *  Skript is distributed in the hope that it will be useful,\n+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ *  GNU General Public License for more details.\n+ *\n+ *  You should have received a copy of the GNU General Public License\n+ *  along with Skript.  If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ *\n+ * Copyright 2011-2017 Peter G\u00fcttinger and contributors\n+ */\n+package ch.njol.skript.expressions;\n+\n+import org.bukkit.entity.Entity;\n+import org.bukkit.event.Event;\n+import org.eclipse.jdt.annotation.Nullable;\n+\n+import ch.njol.skript.classes.Changer;\n+import ch.njol.skript.expressions.base.SimplePropertyExpression;\n+import ch.njol.util.coll.CollectionUtils;\n+\n+public class ExprFallenDistance extends SimplePropertyExpression<Entity, Number> {\n+\tstatic {\n+\t\tregister(ExprFallenDistance.class, Number.class, \"fall(en|ed|) distance\", \"entity\");\n+\t}\n+\t@Override\n+\tprotected String getPropertyName() {\n+\t\treturn \"fall(en|ed|) distance\";\n+\t}\n+\t\n+\t@Nullable\n+\t@Override\n+\tpublic Number convert(Entity entity) {\n+\t\treturn entity.getFallDistance();\n+\t}\n+\t\n+\t@Override\n+\tpublic Class<? extends Number> getReturnType() {\n+\t\treturn Number.class;\n+\t}\n+\t\n+\t@Override\n+\tpublic void change(Event e, @Nullable Object[] delta, Changer.ChangeMode mode) {\n+\t\tif(delta != null){\n+\t\t\tEntity entity = getExpr().getSingle(e);\n+\t\t\tif(entity == null) return;\n+\t\t\tFloat number = ((Number) delta[0]).floatValue();\n+\t\t\tswitch (mode){", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fb3262d265184f02694454e4c483242e3072fc93"}, "originalPosition": 56}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjY4OTY0Mw==", "bodyText": "Instead of getting the fall distance on each case, just make a variable for it before the switch statement.", "url": "https://github.com/SkriptLang/Skript/pull/3158#discussion_r456689643", "createdAt": "2020-07-17T21:52:27Z", "author": {"login": "FranKusmiruk"}, "path": "src/main/java/ch/njol/skript/expressions/ExprFallenDistance.java", "diffHunk": "@@ -0,0 +1,76 @@\n+/**\n+ *   This file is part of Skript.\n+ *\n+ *  Skript is free software: you can redistribute it and/or modify\n+ *  it under the terms of the GNU General Public License as published by\n+ *  the Free Software Foundation, either version 3 of the License, or\n+ *  (at your option) any later version.\n+ *\n+ *  Skript is distributed in the hope that it will be useful,\n+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ *  GNU General Public License for more details.\n+ *\n+ *  You should have received a copy of the GNU General Public License\n+ *  along with Skript.  If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ *\n+ * Copyright 2011-2017 Peter G\u00fcttinger and contributors\n+ */\n+package ch.njol.skript.expressions;\n+\n+import org.bukkit.entity.Entity;\n+import org.bukkit.event.Event;\n+import org.eclipse.jdt.annotation.Nullable;\n+\n+import ch.njol.skript.classes.Changer;\n+import ch.njol.skript.expressions.base.SimplePropertyExpression;\n+import ch.njol.util.coll.CollectionUtils;\n+\n+public class ExprFallenDistance extends SimplePropertyExpression<Entity, Number> {\n+\tstatic {\n+\t\tregister(ExprFallenDistance.class, Number.class, \"fall(en|ed|) distance\", \"entity\");\n+\t}\n+\t@Override\n+\tprotected String getPropertyName() {\n+\t\treturn \"fall(en|ed|) distance\";\n+\t}\n+\t\n+\t@Nullable\n+\t@Override\n+\tpublic Number convert(Entity entity) {\n+\t\treturn entity.getFallDistance();\n+\t}\n+\t\n+\t@Override\n+\tpublic Class<? extends Number> getReturnType() {\n+\t\treturn Number.class;\n+\t}\n+\t\n+\t@Override\n+\tpublic void change(Event e, @Nullable Object[] delta, Changer.ChangeMode mode) {\n+\t\tif(delta != null){\n+\t\t\tEntity entity = getExpr().getSingle(e);\n+\t\t\tif(entity == null) return;\n+\t\t\tFloat number = ((Number) delta[0]).floatValue();\n+\t\t\tswitch (mode){\n+\t\t\t\tcase ADD:\n+\t\t\t\t\tentity.setFallDistance(entity.getFallDistance()+number);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fb3262d265184f02694454e4c483242e3072fc93"}, "originalPosition": 58}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bc9909f39d332c1c3d89d40655edeaeca9be92a7", "author": {"user": {"login": "DeltaRays", "name": "DeltaRays"}}, "url": "https://github.com/SkriptLang/Skript/commit/bc9909f39d332c1c3d89d40655edeaeca9be92a7", "committedDate": "2020-07-18T08:38:14Z", "message": "Merge branch 'master' into ExprFallenDistance"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e1094f7416598db9ee4c6d449141fa4e39fe86af", "author": {"user": {"login": "DeltaRays", "name": "DeltaRays"}}, "url": "https://github.com/SkriptLang/Skript/commit/e1094f7416598db9ee4c6d449141fa4e39fe86af", "committedDate": "2020-07-18T09:15:49Z", "message": "Updated ExprFallenDistance accordingly to the coding conventions, formatted the code, added support for setting multiple entities' fall distance"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxMDUyNDg1", "url": "https://github.com/SkriptLang/Skript/pull/3158#pullrequestreview-451052485", "createdAt": "2020-07-18T12:01:55Z", "commit": {"oid": "e1094f7416598db9ee4c6d449141fa4e39fe86af"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xOFQxMjowMTo1NVrOGzn1Vg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xOFQxMjowMTo1NVrOGzn1Vg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njc4MzE5MA==", "bodyText": "wouldn't reset make more sense here?", "url": "https://github.com/SkriptLang/Skript/pull/3158#discussion_r456783190", "createdAt": "2020-07-18T12:01:55Z", "author": {"login": "Pikachu920"}, "path": "src/main/java/ch/njol/skript/expressions/ExprFallenDistance.java", "diffHunk": "@@ -0,0 +1,96 @@\n+/**\n+ * This file is part of Skript.\n+ *\n+ * Skript is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Skript is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Skript.  If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ *\n+ * Copyright 2011-2017 Peter G\u00fcttinger and contributors\n+ */\n+package ch.njol.skript.expressions;\n+\n+import org.bukkit.entity.Entity;\n+import org.bukkit.event.Event;\n+import org.eclipse.jdt.annotation.Nullable;\n+\n+import ch.njol.skript.classes.Changer.ChangeMode;\n+import ch.njol.skript.doc.Description;\n+import ch.njol.skript.doc.Examples;\n+import ch.njol.skript.doc.Name;\n+import ch.njol.skript.doc.Since;\n+import ch.njol.skript.expressions.base.SimplePropertyExpression;\n+import ch.njol.util.coll.CollectionUtils;\n+\n+@Name(\"Fallen distance\")\n+@Description({\"The distance an entity has fallen for\"})\n+@Examples({\"set all entities' fallen distance to 10\",\n+\t\"on damage:\",\n+\t\"\\tsend \\\"%victim's fall distance%\\\" to victim\"})\n+@Since(\"INSERT VERSION\")\n+public class ExprFallenDistance extends SimplePropertyExpression<Entity, Number> {\n+\t\n+\tstatic {\n+\t\tregister(ExprFallenDistance.class, Number.class, \"fall(en|ed|) distance\", \"entities\");\n+\t}\n+\t\n+\t@Nullable\n+\t@Override\n+\tpublic Number convert(Entity entity) {\n+\t\treturn entity.getFallDistance();\n+\t}\n+\t\n+\t@Nullable\n+\t@Override\n+\tpublic Class<?>[] acceptChange(ChangeMode mode) {\n+\t\treturn (mode == ChangeMode.RESET || mode == ChangeMode.REMOVE_ALL) ? null : CollectionUtils.array(Number.class);\n+\t}\n+\t\n+\t@Override\n+\tpublic void change(Event e, @Nullable Object[] delta, ChangeMode mode) {\n+\t\tif (delta != null) {\n+\t\t\tEntity[] entities = getExpr().getArray(e);\n+\t\t\tif (entities.length < 1)\n+\t\t\t\treturn;\n+\t\t\tFloat number = ((Number) delta[0]).floatValue();\n+\t\t\tfor (Entity entity : entities) {\n+\t\t\t\t\n+\t\t\t\tFloat fallDistance = entity.getFallDistance();\n+\t\t\t\t\n+\t\t\t\tswitch (mode) {\n+\t\t\t\t\tcase ADD:\n+\t\t\t\t\t\tentity.setFallDistance(fallDistance + number);\n+\t\t\t\t\t\tbreak;\n+\t\t\t\t\tcase SET:\n+\t\t\t\t\t\tentity.setFallDistance(number);\n+\t\t\t\t\t\tbreak;\n+\t\t\t\t\tcase REMOVE:\n+\t\t\t\t\t\tentity.setFallDistance(fallDistance - number);\n+\t\t\t\t\t\tbreak;\n+\t\t\t\t\tcase DELETE:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e1094f7416598db9ee4c6d449141fa4e39fe86af"}, "originalPosition": 79}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxMDUyNTMz", "url": "https://github.com/SkriptLang/Skript/pull/3158#pullrequestreview-451052533", "createdAt": "2020-07-18T12:03:09Z", "commit": {"oid": "e1094f7416598db9ee4c6d449141fa4e39fe86af"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xOFQxMjowMzowOVrOGzn1qw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xOFQxMjowMzowOVrOGzn1qw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njc4MzI3NQ==", "bodyText": "delta will be null if the change mode is reset or delete, so this is preventing your delete change from doing anything", "url": "https://github.com/SkriptLang/Skript/pull/3158#discussion_r456783275", "createdAt": "2020-07-18T12:03:09Z", "author": {"login": "Pikachu920"}, "path": "src/main/java/ch/njol/skript/expressions/ExprFallenDistance.java", "diffHunk": "@@ -0,0 +1,96 @@\n+/**\n+ * This file is part of Skript.\n+ *\n+ * Skript is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Skript is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Skript.  If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ *\n+ * Copyright 2011-2017 Peter G\u00fcttinger and contributors\n+ */\n+package ch.njol.skript.expressions;\n+\n+import org.bukkit.entity.Entity;\n+import org.bukkit.event.Event;\n+import org.eclipse.jdt.annotation.Nullable;\n+\n+import ch.njol.skript.classes.Changer.ChangeMode;\n+import ch.njol.skript.doc.Description;\n+import ch.njol.skript.doc.Examples;\n+import ch.njol.skript.doc.Name;\n+import ch.njol.skript.doc.Since;\n+import ch.njol.skript.expressions.base.SimplePropertyExpression;\n+import ch.njol.util.coll.CollectionUtils;\n+\n+@Name(\"Fallen distance\")\n+@Description({\"The distance an entity has fallen for\"})\n+@Examples({\"set all entities' fallen distance to 10\",\n+\t\"on damage:\",\n+\t\"\\tsend \\\"%victim's fall distance%\\\" to victim\"})\n+@Since(\"INSERT VERSION\")\n+public class ExprFallenDistance extends SimplePropertyExpression<Entity, Number> {\n+\t\n+\tstatic {\n+\t\tregister(ExprFallenDistance.class, Number.class, \"fall(en|ed|) distance\", \"entities\");\n+\t}\n+\t\n+\t@Nullable\n+\t@Override\n+\tpublic Number convert(Entity entity) {\n+\t\treturn entity.getFallDistance();\n+\t}\n+\t\n+\t@Nullable\n+\t@Override\n+\tpublic Class<?>[] acceptChange(ChangeMode mode) {\n+\t\treturn (mode == ChangeMode.RESET || mode == ChangeMode.REMOVE_ALL) ? null : CollectionUtils.array(Number.class);\n+\t}\n+\t\n+\t@Override\n+\tpublic void change(Event e, @Nullable Object[] delta, ChangeMode mode) {\n+\t\tif (delta != null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e1094f7416598db9ee4c6d449141fa4e39fe86af"}, "originalPosition": 60}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxMDUyNTUy", "url": "https://github.com/SkriptLang/Skript/pull/3158#pullrequestreview-451052552", "createdAt": "2020-07-18T12:03:38Z", "commit": {"oid": "e1094f7416598db9ee4c6d449141fa4e39fe86af"}, "state": "DISMISSED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xOFQxMjowMzozOFrOGzn1zQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xOFQxMjowNTozOVrOGzn2YQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njc4MzMwOQ==", "bodyText": "falled distance isn't proper english", "url": "https://github.com/SkriptLang/Skript/pull/3158#discussion_r456783309", "createdAt": "2020-07-18T12:03:38Z", "author": {"login": "Pikachu920"}, "path": "src/main/java/ch/njol/skript/expressions/ExprFallenDistance.java", "diffHunk": "@@ -0,0 +1,96 @@\n+/**\n+ * This file is part of Skript.\n+ *\n+ * Skript is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Skript is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Skript.  If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ *\n+ * Copyright 2011-2017 Peter G\u00fcttinger and contributors\n+ */\n+package ch.njol.skript.expressions;\n+\n+import org.bukkit.entity.Entity;\n+import org.bukkit.event.Event;\n+import org.eclipse.jdt.annotation.Nullable;\n+\n+import ch.njol.skript.classes.Changer.ChangeMode;\n+import ch.njol.skript.doc.Description;\n+import ch.njol.skript.doc.Examples;\n+import ch.njol.skript.doc.Name;\n+import ch.njol.skript.doc.Since;\n+import ch.njol.skript.expressions.base.SimplePropertyExpression;\n+import ch.njol.util.coll.CollectionUtils;\n+\n+@Name(\"Fallen distance\")\n+@Description({\"The distance an entity has fallen for\"})\n+@Examples({\"set all entities' fallen distance to 10\",\n+\t\"on damage:\",\n+\t\"\\tsend \\\"%victim's fall distance%\\\" to victim\"})\n+@Since(\"INSERT VERSION\")\n+public class ExprFallenDistance extends SimplePropertyExpression<Entity, Number> {\n+\t\n+\tstatic {\n+\t\tregister(ExprFallenDistance.class, Number.class, \"fall(en|ed|) distance\", \"entities\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e1094f7416598db9ee4c6d449141fa4e39fe86af"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njc4MzQ1Nw==", "bodyText": "this would just be one of the syntax options", "url": "https://github.com/SkriptLang/Skript/pull/3158#discussion_r456783457", "createdAt": "2020-07-18T12:05:39Z", "author": {"login": "Pikachu920"}, "path": "src/main/java/ch/njol/skript/expressions/ExprFallenDistance.java", "diffHunk": "@@ -0,0 +1,96 @@\n+/**\n+ * This file is part of Skript.\n+ *\n+ * Skript is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Skript is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Skript.  If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ *\n+ * Copyright 2011-2017 Peter G\u00fcttinger and contributors\n+ */\n+package ch.njol.skript.expressions;\n+\n+import org.bukkit.entity.Entity;\n+import org.bukkit.event.Event;\n+import org.eclipse.jdt.annotation.Nullable;\n+\n+import ch.njol.skript.classes.Changer.ChangeMode;\n+import ch.njol.skript.doc.Description;\n+import ch.njol.skript.doc.Examples;\n+import ch.njol.skript.doc.Name;\n+import ch.njol.skript.doc.Since;\n+import ch.njol.skript.expressions.base.SimplePropertyExpression;\n+import ch.njol.util.coll.CollectionUtils;\n+\n+@Name(\"Fallen distance\")\n+@Description({\"The distance an entity has fallen for\"})\n+@Examples({\"set all entities' fallen distance to 10\",\n+\t\"on damage:\",\n+\t\"\\tsend \\\"%victim's fall distance%\\\" to victim\"})\n+@Since(\"INSERT VERSION\")\n+public class ExprFallenDistance extends SimplePropertyExpression<Entity, Number> {\n+\t\n+\tstatic {\n+\t\tregister(ExprFallenDistance.class, Number.class, \"fall(en|ed|) distance\", \"entities\");\n+\t}\n+\t\n+\t@Nullable\n+\t@Override\n+\tpublic Number convert(Entity entity) {\n+\t\treturn entity.getFallDistance();\n+\t}\n+\t\n+\t@Nullable\n+\t@Override\n+\tpublic Class<?>[] acceptChange(ChangeMode mode) {\n+\t\treturn (mode == ChangeMode.RESET || mode == ChangeMode.REMOVE_ALL) ? null : CollectionUtils.array(Number.class);\n+\t}\n+\t\n+\t@Override\n+\tpublic void change(Event e, @Nullable Object[] delta, ChangeMode mode) {\n+\t\tif (delta != null) {\n+\t\t\tEntity[] entities = getExpr().getArray(e);\n+\t\t\tif (entities.length < 1)\n+\t\t\t\treturn;\n+\t\t\tFloat number = ((Number) delta[0]).floatValue();\n+\t\t\tfor (Entity entity : entities) {\n+\t\t\t\t\n+\t\t\t\tFloat fallDistance = entity.getFallDistance();\n+\t\t\t\t\n+\t\t\t\tswitch (mode) {\n+\t\t\t\t\tcase ADD:\n+\t\t\t\t\t\tentity.setFallDistance(fallDistance + number);\n+\t\t\t\t\t\tbreak;\n+\t\t\t\t\tcase SET:\n+\t\t\t\t\t\tentity.setFallDistance(number);\n+\t\t\t\t\t\tbreak;\n+\t\t\t\t\tcase REMOVE:\n+\t\t\t\t\t\tentity.setFallDistance(fallDistance - number);\n+\t\t\t\t\t\tbreak;\n+\t\t\t\t\tcase DELETE:\n+\t\t\t\t\t\tentity.setFallDistance(0);\n+\t\t\t\t}\n+\t\t\t}\n+\t\t}\n+\t}\n+\t\n+\t@Override\n+\tpublic Class<? extends Number> getReturnType() {\n+\t\treturn Number.class;\n+\t}\n+\t\n+\t@Override\n+\tprotected String getPropertyName() {\n+\t\treturn \"fall(en|ed|) distance\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e1094f7416598db9ee4c6d449141fa4e39fe86af"}, "originalPosition": 93}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "676c3ac42da4b1be632e378d211b4a89825dd905", "author": {"user": {"login": "DeltaRays", "name": "DeltaRays"}}, "url": "https://github.com/SkriptLang/Skript/commit/676c3ac42da4b1be632e378d211b4a89825dd905", "committedDate": "2020-07-18T12:20:10Z", "message": "Update ExprFallenDistance.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "514e0128c75d97feeaaac23c88505b85b4645444", "author": {"user": {"login": "DeltaRays", "name": "DeltaRays"}}, "url": "https://github.com/SkriptLang/Skript/commit/514e0128c75d97feeaaac23c88505b85b4645444", "committedDate": "2020-07-18T12:24:47Z", "message": "Removed the DELETE case"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxMDgxNDE0", "url": "https://github.com/SkriptLang/Skript/pull/3158#pullrequestreview-451081414", "createdAt": "2020-07-18T20:45:29Z", "commit": {"oid": "514e0128c75d97feeaaac23c88505b85b4645444"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xOFQyMDo0NToyOVrOGzqd3A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xOFQyMDo0NToyOVrOGzqd3A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjgyNjMzMg==", "bodyText": "missing a space after the second || - if you're using intellij and it's git integration it might be worthwhile to enable the reformat code before commit option to catch small things like this", "url": "https://github.com/SkriptLang/Skript/pull/3158#discussion_r456826332", "createdAt": "2020-07-18T20:45:29Z", "author": {"login": "Pikachu920"}, "path": "src/main/java/ch/njol/skript/expressions/ExprFallenDistance.java", "diffHunk": "@@ -0,0 +1,96 @@\n+/**\n+ * This file is part of Skript.\n+ *\n+ * Skript is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Skript is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Skript.  If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ *\n+ * Copyright 2011-2017 Peter G\u00fcttinger and contributors\n+ */\n+package ch.njol.skript.expressions;\n+\n+import org.bukkit.entity.Entity;\n+import org.bukkit.event.Event;\n+import org.eclipse.jdt.annotation.Nullable;\n+\n+import ch.njol.skript.classes.Changer.ChangeMode;\n+import ch.njol.skript.doc.Description;\n+import ch.njol.skript.doc.Examples;\n+import ch.njol.skript.doc.Name;\n+import ch.njol.skript.doc.Since;\n+import ch.njol.skript.expressions.base.SimplePropertyExpression;\n+import ch.njol.util.coll.CollectionUtils;\n+\n+@Name(\"Fallen distance\")\n+@Description({\"The distance an entity has fallen for\"})\n+@Examples({\"set all entities' fallen distance to 10\",\n+\t\"on damage:\",\n+\t\"\\tsend \\\"%victim's fall distance%\\\" to victim\"})\n+@Since(\"INSERT VERSION\")\n+public class ExprFallenDistance extends SimplePropertyExpression<Entity, Number> {\n+\t\n+\tstatic {\n+\t\tregister(ExprFallenDistance.class, Number.class, \"[the] (fall[en]|fell[ed]) (distance|height)\", \"entities\");\n+\t}\n+\t\n+\t@Nullable\n+\t@Override\n+\tpublic Number convert(Entity entity) {\n+\t\treturn entity.getFallDistance();\n+\t}\n+\t\n+\t@Nullable\n+\t@Override\n+\tpublic Class<?>[] acceptChange(ChangeMode mode) {\n+\t\treturn (mode == ChangeMode.RESET || mode == ChangeMode.REMOVE_ALL ||mode == ChangeMode.DELETE) ? null : CollectionUtils.array(Number.class);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "514e0128c75d97feeaaac23c88505b85b4645444"}, "originalPosition": 55}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "badd11c25a73c850f2548bbe1dabd111fa5d19e3", "author": {"user": {"login": "DeltaRays", "name": "DeltaRays"}}, "url": "https://github.com/SkriptLang/Skript/commit/badd11c25a73c850f2548bbe1dabd111fa5d19e3", "committedDate": "2020-07-18T21:14:05Z", "message": "Update ExprFallenDistance.java"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxMTE5MDc5", "url": "https://github.com/SkriptLang/Skript/pull/3158#pullrequestreview-451119079", "createdAt": "2020-07-19T10:33:45Z", "commit": {"oid": "badd11c25a73c850f2548bbe1dabd111fa5d19e3"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xOVQxMDozMzo0NVrOGzucCg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xOVQxMDozNzo0M1rOGzuddQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njg5MTQwMg==", "bodyText": "In my opinion, the name here should just be \"Fall Distance\"\nI understand fallen is grammatically correct, but it just doesn't look right.", "url": "https://github.com/SkriptLang/Skript/pull/3158#discussion_r456891402", "createdAt": "2020-07-19T10:33:45Z", "author": {"login": "ShaneBeee"}, "path": "src/main/java/ch/njol/skript/expressions/ExprFallenDistance.java", "diffHunk": "@@ -0,0 +1,96 @@\n+/**\n+ * This file is part of Skript.\n+ *\n+ * Skript is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Skript is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Skript.  If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ *\n+ * Copyright 2011-2017 Peter G\u00fcttinger and contributors\n+ */\n+package ch.njol.skript.expressions;\n+\n+import org.bukkit.entity.Entity;\n+import org.bukkit.event.Event;\n+import org.eclipse.jdt.annotation.Nullable;\n+\n+import ch.njol.skript.classes.Changer.ChangeMode;\n+import ch.njol.skript.doc.Description;\n+import ch.njol.skript.doc.Examples;\n+import ch.njol.skript.doc.Name;\n+import ch.njol.skript.doc.Since;\n+import ch.njol.skript.expressions.base.SimplePropertyExpression;\n+import ch.njol.util.coll.CollectionUtils;\n+\n+@Name(\"Fallen distance\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "badd11c25a73c850f2548bbe1dabd111fa5d19e3"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njg5MTY0OA==", "bodyText": "\"felled\" typical refers to the past action of falling an object, ie: falling a tree (cutting it down/knocking it over)\nPersonally I feel like theres a few too many options here.\nIn my opinion it should just be \"fall\". The Bukkit method is getFallDistance, i really dont feel we need fell, felled, fallen.\nI cant really see someone typing set {_f} to fallen distance of player\nAgain, this is my opinion based on cleaning this up, but its open for discussion.", "url": "https://github.com/SkriptLang/Skript/pull/3158#discussion_r456891648", "createdAt": "2020-07-19T10:36:10Z", "author": {"login": "ShaneBeee"}, "path": "src/main/java/ch/njol/skript/expressions/ExprFallenDistance.java", "diffHunk": "@@ -0,0 +1,96 @@\n+/**\n+ * This file is part of Skript.\n+ *\n+ * Skript is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Skript is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Skript.  If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ *\n+ * Copyright 2011-2017 Peter G\u00fcttinger and contributors\n+ */\n+package ch.njol.skript.expressions;\n+\n+import org.bukkit.entity.Entity;\n+import org.bukkit.event.Event;\n+import org.eclipse.jdt.annotation.Nullable;\n+\n+import ch.njol.skript.classes.Changer.ChangeMode;\n+import ch.njol.skript.doc.Description;\n+import ch.njol.skript.doc.Examples;\n+import ch.njol.skript.doc.Name;\n+import ch.njol.skript.doc.Since;\n+import ch.njol.skript.expressions.base.SimplePropertyExpression;\n+import ch.njol.util.coll.CollectionUtils;\n+\n+@Name(\"Fallen distance\")\n+@Description({\"The distance an entity has fallen for\"})\n+@Examples({\"set all entities' fallen distance to 10\",\n+\t\"on damage:\",\n+\t\"\\tsend \\\"%victim's fall distance%\\\" to victim\"})\n+@Since(\"INSERT VERSION\")\n+public class ExprFallenDistance extends SimplePropertyExpression<Entity, Number> {\n+\t\n+\tstatic {\n+\t\tregister(ExprFallenDistance.class, Number.class, \"[the] (fall[en]|fell[ed]) (distance|height)\", \"entities\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "badd11c25a73c850f2548bbe1dabd111fa5d19e3"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njg5MTY5Nw==", "bodyText": "same as name of this expression, this should just be \"fall distance\"", "url": "https://github.com/SkriptLang/Skript/pull/3158#discussion_r456891697", "createdAt": "2020-07-19T10:36:39Z", "author": {"login": "ShaneBeee"}, "path": "src/main/java/ch/njol/skript/expressions/ExprFallenDistance.java", "diffHunk": "@@ -0,0 +1,96 @@\n+/**\n+ * This file is part of Skript.\n+ *\n+ * Skript is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Skript is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Skript.  If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ *\n+ * Copyright 2011-2017 Peter G\u00fcttinger and contributors\n+ */\n+package ch.njol.skript.expressions;\n+\n+import org.bukkit.entity.Entity;\n+import org.bukkit.event.Event;\n+import org.eclipse.jdt.annotation.Nullable;\n+\n+import ch.njol.skript.classes.Changer.ChangeMode;\n+import ch.njol.skript.doc.Description;\n+import ch.njol.skript.doc.Examples;\n+import ch.njol.skript.doc.Name;\n+import ch.njol.skript.doc.Since;\n+import ch.njol.skript.expressions.base.SimplePropertyExpression;\n+import ch.njol.util.coll.CollectionUtils;\n+\n+@Name(\"Fallen distance\")\n+@Description({\"The distance an entity has fallen for\"})\n+@Examples({\"set all entities' fallen distance to 10\",\n+\t\"on damage:\",\n+\t\"\\tsend \\\"%victim's fall distance%\\\" to victim\"})\n+@Since(\"INSERT VERSION\")\n+public class ExprFallenDistance extends SimplePropertyExpression<Entity, Number> {\n+\t\n+\tstatic {\n+\t\tregister(ExprFallenDistance.class, Number.class, \"[the] (fall[en]|fell[ed]) (distance|height)\", \"entities\");\n+\t}\n+\t\n+\t@Nullable\n+\t@Override\n+\tpublic Number convert(Entity entity) {\n+\t\treturn entity.getFallDistance();\n+\t}\n+\t\n+\t@Nullable\n+\t@Override\n+\tpublic Class<?>[] acceptChange(ChangeMode mode) {\n+\t\treturn (mode == ChangeMode.RESET || mode == ChangeMode.REMOVE_ALL || mode == ChangeMode.DELETE) ? null : CollectionUtils.array(Number.class);\n+\t}\n+\t\n+\t@Override\n+\tpublic void change(Event e, @Nullable Object[] delta, ChangeMode mode) {\n+\t\tif (delta != null) {\n+\t\t\tEntity[] entities = getExpr().getArray(e);\n+\t\t\tif (entities.length < 1)\n+\t\t\t\treturn;\n+\t\t\tFloat number = ((Number) delta[0]).floatValue();\n+\t\t\tfor (Entity entity : entities) {\n+\t\t\t\t\n+\t\t\t\tFloat fallDistance = entity.getFallDistance();\n+\t\t\t\t\n+\t\t\t\tswitch (mode) {\n+\t\t\t\t\tcase ADD:\n+\t\t\t\t\t\tentity.setFallDistance(fallDistance + number);\n+\t\t\t\t\t\tbreak;\n+\t\t\t\t\tcase SET:\n+\t\t\t\t\t\tentity.setFallDistance(number);\n+\t\t\t\t\t\tbreak;\n+\t\t\t\t\tcase REMOVE:\n+\t\t\t\t\t\tentity.setFallDistance(fallDistance - number);\n+\t\t\t\t\t\tbreak;\n+\t\t\t\t\tdefault:\n+\t\t\t\t\t\tassert false;\n+\t\t\t\t}\n+\t\t\t}\n+\t\t}\n+\t}\n+\t\n+\t@Override\n+\tpublic Class<? extends Number> getReturnType() {\n+\t\treturn Number.class;\n+\t}\n+\t\n+\t@Override\n+\tprotected String getPropertyName() {\n+\t\treturn \"fallen distance\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "badd11c25a73c850f2548bbe1dabd111fa5d19e3"}, "originalPosition": 93}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njg5MTc2NQ==", "bodyText": "For the sake of the Bukkit method being getFallDistance, this should probably be ExprFallDistance, to keep up with continuity.", "url": "https://github.com/SkriptLang/Skript/pull/3158#discussion_r456891765", "createdAt": "2020-07-19T10:37:43Z", "author": {"login": "ShaneBeee"}, "path": "src/main/java/ch/njol/skript/expressions/ExprFallenDistance.java", "diffHunk": "@@ -0,0 +1,96 @@\n+/**\n+ * This file is part of Skript.\n+ *\n+ * Skript is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Skript is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Skript.  If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ *\n+ * Copyright 2011-2017 Peter G\u00fcttinger and contributors\n+ */\n+package ch.njol.skript.expressions;\n+\n+import org.bukkit.entity.Entity;\n+import org.bukkit.event.Event;\n+import org.eclipse.jdt.annotation.Nullable;\n+\n+import ch.njol.skript.classes.Changer.ChangeMode;\n+import ch.njol.skript.doc.Description;\n+import ch.njol.skript.doc.Examples;\n+import ch.njol.skript.doc.Name;\n+import ch.njol.skript.doc.Since;\n+import ch.njol.skript.expressions.base.SimplePropertyExpression;\n+import ch.njol.util.coll.CollectionUtils;\n+\n+@Name(\"Fallen distance\")\n+@Description({\"The distance an entity has fallen for\"})\n+@Examples({\"set all entities' fallen distance to 10\",\n+\t\"on damage:\",\n+\t\"\\tsend \\\"%victim's fall distance%\\\" to victim\"})\n+@Since(\"INSERT VERSION\")\n+public class ExprFallenDistance extends SimplePropertyExpression<Entity, Number> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "badd11c25a73c850f2548bbe1dabd111fa5d19e3"}, "originalPosition": 40}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a715b26c3d233f30891081cb96eb10f1e77cfbdc", "author": {"user": {"login": "DeltaRays", "name": "DeltaRays"}}, "url": "https://github.com/SkriptLang/Skript/commit/a715b26c3d233f30891081cb96eb10f1e77cfbdc", "committedDate": "2020-07-19T12:31:00Z", "message": "Update ExprFallenDistance.java"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxNDU0Mjkw", "url": "https://github.com/SkriptLang/Skript/pull/3158#pullrequestreview-451454290", "createdAt": "2020-07-20T09:43:32Z", "commit": {"oid": "a715b26c3d233f30891081cb96eb10f1e77cfbdc"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQwOTo0MzozM1rOG0DEiw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQwOTo0NDozMFrOG0DHJg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzIyOTQ1MQ==", "bodyText": "To keep continuity, the \"d\" should be upper cased \"Fall Distance\"", "url": "https://github.com/SkriptLang/Skript/pull/3158#discussion_r457229451", "createdAt": "2020-07-20T09:43:33Z", "author": {"login": "ShaneBeee"}, "path": "src/main/java/ch/njol/skript/expressions/ExprFallenDistance.java", "diffHunk": "@@ -0,0 +1,96 @@\n+/**\n+ * This file is part of Skript.\n+ *\n+ * Skript is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Skript is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Skript.  If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ *\n+ * Copyright 2011-2017 Peter G\u00fcttinger and contributors\n+ */\n+package ch.njol.skript.expressions;\n+\n+import org.bukkit.entity.Entity;\n+import org.bukkit.event.Event;\n+import org.eclipse.jdt.annotation.Nullable;\n+\n+import ch.njol.skript.classes.Changer.ChangeMode;\n+import ch.njol.skript.doc.Description;\n+import ch.njol.skript.doc.Examples;\n+import ch.njol.skript.doc.Name;\n+import ch.njol.skript.doc.Since;\n+import ch.njol.skript.expressions.base.SimplePropertyExpression;\n+import ch.njol.util.coll.CollectionUtils;\n+\n+@Name(\"Fall distance\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a715b26c3d233f30891081cb96eb10f1e77cfbdc"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzIzMDExOA==", "bodyText": "I know this may seem silly/picky, but again to stick with continuity with the docs, this sentence should have a period at the end.", "url": "https://github.com/SkriptLang/Skript/pull/3158#discussion_r457230118", "createdAt": "2020-07-20T09:44:30Z", "author": {"login": "ShaneBeee"}, "path": "src/main/java/ch/njol/skript/expressions/ExprFallenDistance.java", "diffHunk": "@@ -0,0 +1,96 @@\n+/**\n+ * This file is part of Skript.\n+ *\n+ * Skript is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Skript is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Skript.  If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ *\n+ * Copyright 2011-2017 Peter G\u00fcttinger and contributors\n+ */\n+package ch.njol.skript.expressions;\n+\n+import org.bukkit.entity.Entity;\n+import org.bukkit.event.Event;\n+import org.eclipse.jdt.annotation.Nullable;\n+\n+import ch.njol.skript.classes.Changer.ChangeMode;\n+import ch.njol.skript.doc.Description;\n+import ch.njol.skript.doc.Examples;\n+import ch.njol.skript.doc.Name;\n+import ch.njol.skript.doc.Since;\n+import ch.njol.skript.expressions.base.SimplePropertyExpression;\n+import ch.njol.util.coll.CollectionUtils;\n+\n+@Name(\"Fall distance\")\n+@Description({\"The distance an entity has fallen for\"})", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a715b26c3d233f30891081cb96eb10f1e77cfbdc"}, "originalPosition": 35}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "53870be4963cc7323955189a281676fab5823422", "author": {"user": {"login": "DeltaRays", "name": "DeltaRays"}}, "url": "https://github.com/SkriptLang/Skript/commit/53870be4963cc7323955189a281676fab5823422", "committedDate": "2020-07-20T09:58:52Z", "message": "Merge branch 'master' into ExprFallenDistance"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "885151687805914f4a750aa8d798ce97bbd1ee02", "author": {"user": {"login": "DeltaRays", "name": "DeltaRays"}}, "url": "https://github.com/SkriptLang/Skript/commit/885151687805914f4a750aa8d798ce97bbd1ee02", "committedDate": "2020-07-20T10:03:23Z", "message": "Update ExprFallenDistance.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "89f0eda3b13d86ce417ea874f717993b7b5422d1", "author": {"user": {"login": "DeltaRays", "name": "DeltaRays"}}, "url": "https://github.com/SkriptLang/Skript/commit/89f0eda3b13d86ce417ea874f717993b7b5422d1", "committedDate": "2020-07-20T10:04:24Z", "message": "Merge branch 'ExprFallenDistance' of https://github.com/DeltaRays/Skript into ExprFallenDistance"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxNDczNTU0", "url": "https://github.com/SkriptLang/Skript/pull/3158#pullrequestreview-451473554", "createdAt": "2020-07-20T10:10:40Z", "commit": {"oid": "89f0eda3b13d86ce417ea874f717993b7b5422d1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQxMDoxMDo0MVrOG0EP_w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQxMDoxMDo0MVrOG0EP_w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzI0ODc2Nw==", "bodyText": "Class should be ExprFallDistance with the file being ExprFallDistance.java", "url": "https://github.com/SkriptLang/Skript/pull/3158#discussion_r457248767", "createdAt": "2020-07-20T10:10:41Z", "author": {"login": "Wealthyturtle"}, "path": "src/main/java/ch/njol/skript/expressions/ExprFallenDistance.java", "diffHunk": "@@ -0,0 +1,96 @@\n+/**\n+ * This file is part of Skript.\n+ *\n+ * Skript is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Skript is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Skript.  If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ *\n+ * Copyright 2011-2017 Peter G\u00fcttinger and contributors\n+ */\n+package ch.njol.skript.expressions;\n+\n+import org.bukkit.entity.Entity;\n+import org.bukkit.event.Event;\n+import org.eclipse.jdt.annotation.Nullable;\n+\n+import ch.njol.skript.classes.Changer.ChangeMode;\n+import ch.njol.skript.doc.Description;\n+import ch.njol.skript.doc.Examples;\n+import ch.njol.skript.doc.Name;\n+import ch.njol.skript.doc.Since;\n+import ch.njol.skript.expressions.base.SimplePropertyExpression;\n+import ch.njol.util.coll.CollectionUtils;\n+\n+@Name(\"Fall Distance\")\n+@Description({\"The distance an entity has fallen for\"})\n+@Examples({\"set all entities' fall distance to 10\",\n+\t\"on damage:\",\n+\t\"\\tsend \\\"%victim's fall distance%\\\" to victim\"})\n+@Since(\"INSERT VERSION\")\n+public class ExprFallenDistance extends SimplePropertyExpression<Entity, Number> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "89f0eda3b13d86ce417ea874f717993b7b5422d1"}, "originalPosition": 40}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxNDc0NDkz", "url": "https://github.com/SkriptLang/Skript/pull/3158#pullrequestreview-451474493", "createdAt": "2020-07-20T10:12:05Z", "commit": {"oid": "89f0eda3b13d86ce417ea874f717993b7b5422d1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQxMDoxMjowNVrOG0ETmQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQxMDoxMjowNVrOG0ETmQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzI0OTY4OQ==", "bodyText": "What happens if x is passed onto entity.setFallDistance(x) where x is negative? E.g. when the user gives a negative number, or they try and subtract too much from the entity's original fallDistance?", "url": "https://github.com/SkriptLang/Skript/pull/3158#discussion_r457249689", "createdAt": "2020-07-20T10:12:05Z", "author": {"login": "Wealthyturtle"}, "path": "src/main/java/ch/njol/skript/expressions/ExprFallenDistance.java", "diffHunk": "@@ -0,0 +1,96 @@\n+/**\n+ * This file is part of Skript.\n+ *\n+ * Skript is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Skript is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Skript.  If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ *\n+ * Copyright 2011-2017 Peter G\u00fcttinger and contributors\n+ */\n+package ch.njol.skript.expressions;\n+\n+import org.bukkit.entity.Entity;\n+import org.bukkit.event.Event;\n+import org.eclipse.jdt.annotation.Nullable;\n+\n+import ch.njol.skript.classes.Changer.ChangeMode;\n+import ch.njol.skript.doc.Description;\n+import ch.njol.skript.doc.Examples;\n+import ch.njol.skript.doc.Name;\n+import ch.njol.skript.doc.Since;\n+import ch.njol.skript.expressions.base.SimplePropertyExpression;\n+import ch.njol.util.coll.CollectionUtils;\n+\n+@Name(\"Fall Distance\")\n+@Description({\"The distance an entity has fallen for\"})\n+@Examples({\"set all entities' fall distance to 10\",\n+\t\"on damage:\",\n+\t\"\\tsend \\\"%victim's fall distance%\\\" to victim\"})\n+@Since(\"INSERT VERSION\")\n+public class ExprFallenDistance extends SimplePropertyExpression<Entity, Number> {\n+\t\n+\tstatic {\n+\t\tregister(ExprFallenDistance.class, Number.class, \"[the] fall[en] (distance|height)\", \"entities\");\n+\t}\n+\t\n+\t@Nullable\n+\t@Override\n+\tpublic Number convert(Entity entity) {\n+\t\treturn entity.getFallDistance();\n+\t}\n+\t\n+\t@Nullable\n+\t@Override\n+\tpublic Class<?>[] acceptChange(ChangeMode mode) {\n+\t\treturn (mode == ChangeMode.RESET || mode == ChangeMode.REMOVE_ALL || mode == ChangeMode.DELETE) ? null : CollectionUtils.array(Number.class);\n+\t}\n+\t\n+\t@Override\n+\tpublic void change(Event e, @Nullable Object[] delta, ChangeMode mode) {\n+\t\tif (delta != null) {\n+\t\t\tEntity[] entities = getExpr().getArray(e);\n+\t\t\tif (entities.length < 1)\n+\t\t\t\treturn;\n+\t\t\tFloat number = ((Number) delta[0]).floatValue();\n+\t\t\tfor (Entity entity : entities) {\n+\t\t\t\t\n+\t\t\t\tFloat fallDistance = entity.getFallDistance();\n+\t\t\t\t\n+\t\t\t\tswitch (mode) {\n+\t\t\t\t\tcase ADD:\n+\t\t\t\t\t\tentity.setFallDistance(fallDistance + number);\n+\t\t\t\t\t\tbreak;\n+\t\t\t\t\tcase SET:\n+\t\t\t\t\t\tentity.setFallDistance(number);\n+\t\t\t\t\t\tbreak;\n+\t\t\t\t\tcase REMOVE:\n+\t\t\t\t\t\tentity.setFallDistance(fallDistance - number);\n+\t\t\t\t\t\tbreak;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "89f0eda3b13d86ce417ea874f717993b7b5422d1"}, "originalPosition": 78}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "152172a5278ae3b7b0ec9d99c4de18435accf1b3", "author": {"user": {"login": "DeltaRays", "name": "DeltaRays"}}, "url": "https://github.com/SkriptLang/Skript/commit/152172a5278ae3b7b0ec9d99c4de18435accf1b3", "committedDate": "2020-07-20T10:14:36Z", "message": "Update ExprFallDistance.java"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxNDc5MTc4", "url": "https://github.com/SkriptLang/Skript/pull/3158#pullrequestreview-451479178", "createdAt": "2020-07-20T10:19:20Z", "commit": {"oid": "152172a5278ae3b7b0ec9d99c4de18435accf1b3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQxMDoxOToyMFrOG0EmXg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQxMDoxOToyMFrOG0EmXg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzI1NDQ5NA==", "bodyText": "Still missing a .", "url": "https://github.com/SkriptLang/Skript/pull/3158#discussion_r457254494", "createdAt": "2020-07-20T10:19:20Z", "author": {"login": "Wealthyturtle"}, "path": "src/main/java/ch/njol/skript/expressions/ExprFallDistance.java", "diffHunk": "@@ -0,0 +1,96 @@\n+/**\n+ * This file is part of Skript.\n+ *\n+ * Skript is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Skript is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Skript.  If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ *\n+ * Copyright 2011-2017 Peter G\u00fcttinger and contributors\n+ */\n+package ch.njol.skript.expressions;\n+\n+import org.bukkit.entity.Entity;\n+import org.bukkit.event.Event;\n+import org.eclipse.jdt.annotation.Nullable;\n+\n+import ch.njol.skript.classes.Changer.ChangeMode;\n+import ch.njol.skript.doc.Description;\n+import ch.njol.skript.doc.Examples;\n+import ch.njol.skript.doc.Name;\n+import ch.njol.skript.doc.Since;\n+import ch.njol.skript.expressions.base.SimplePropertyExpression;\n+import ch.njol.util.coll.CollectionUtils;\n+\n+@Name(\"Fall Distance\")\n+@Description({\"The distance an entity has fallen for\"})", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "152172a5278ae3b7b0ec9d99c4de18435accf1b3"}, "originalPosition": 35}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "98124627cba0d1f267a9f9f3501a150450a07dbf", "author": {"user": {"login": "DeltaRays", "name": "DeltaRays"}}, "url": "https://github.com/SkriptLang/Skript/commit/98124627cba0d1f267a9f9f3501a150450a07dbf", "committedDate": "2020-07-20T10:19:47Z", "message": "Update ExprFallDistance.java"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxNDgxNDI3", "url": "https://github.com/SkriptLang/Skript/pull/3158#pullrequestreview-451481427", "createdAt": "2020-07-20T10:22:52Z", "commit": {"oid": "98124627cba0d1f267a9f9f3501a150450a07dbf"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxNDgyMjU1", "url": "https://github.com/SkriptLang/Skript/pull/3158#pullrequestreview-451482255", "createdAt": "2020-07-20T10:24:11Z", "commit": {"oid": "98124627cba0d1f267a9f9f3501a150450a07dbf"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3050, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}