{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkyNzMxNTA1", "number": 3403, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQyMjozMToyMFrOEnPdMA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQwMTowMDoxM1rOEoT4nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA5NTgzMTUyOnYy", "diffSide": "RIGHT", "path": "src/main/java/ch/njol/skript/expressions/ExprRepairAmount.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQyMjozMToyMFrOHXuz3w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQyMjozMjoyMlrOHXu1Rg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDY0NjIzOQ==", "bodyText": "What do you think about changing this to something like \"Mending Repair Amount\"?\nIm only suggesting this, as \"Repair Amount\" is a bit vague and could easily confuse users, who might think this is for repairing in other scenarios", "url": "https://github.com/SkriptLang/Skript/pull/3403#discussion_r494646239", "createdAt": "2020-09-24T22:31:20Z", "author": {"login": "ShaneBeee"}, "path": "src/main/java/ch/njol/skript/expressions/ExprRepairAmount.java", "diffHunk": "@@ -0,0 +1,113 @@\n+/**\n+ *   This file is part of Skript.\n+ *\n+ *  Skript is free software: you can redistribute it and/or modify\n+ *  it under the terms of the GNU General Public License as published by\n+ *  the Free Software Foundation, either version 3 of the License, or\n+ *  (at your option) any later version.\n+ *\n+ *  Skript is distributed in the hope that it will be useful,\n+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ *  GNU General Public License for more details.\n+ *\n+ *  You should have received a copy of the GNU General Public License\n+ *  along with Skript.  If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ *\n+ * Copyright 2011-2017 Peter G\u00fcttinger and contributors\n+ */\n+package ch.njol.skript.expressions;\n+\n+import org.bukkit.event.Event;\n+import org.bukkit.event.player.PlayerItemMendEvent;\n+import org.eclipse.jdt.annotation.Nullable;\n+\n+import ch.njol.skript.ScriptLoader;\n+import ch.njol.skript.Skript;\n+import ch.njol.skript.classes.Changer.ChangeMode;\n+import ch.njol.skript.doc.Description;\n+import ch.njol.skript.doc.Examples;\n+import ch.njol.skript.doc.Name;\n+import ch.njol.skript.doc.Since;\n+import ch.njol.skript.lang.Expression;\n+import ch.njol.skript.lang.ExpressionType;\n+import ch.njol.skript.lang.SkriptParser.ParseResult;\n+import ch.njol.skript.lang.util.SimpleExpression;\n+import ch.njol.skript.log.ErrorQuality;\n+import ch.njol.util.Kleenean;\n+import ch.njol.util.coll.CollectionUtils;\n+\n+@Name(\"Repair Amount\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "33dc8a69e4e3e68029d9d8441e1fb6bc91ec6533"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDY0NjU5OA==", "bodyText": "Good idea! I'll make the change.", "url": "https://github.com/SkriptLang/Skript/pull/3403#discussion_r494646598", "createdAt": "2020-09-24T22:32:22Z", "author": {"login": "APickledWalrus"}, "path": "src/main/java/ch/njol/skript/expressions/ExprRepairAmount.java", "diffHunk": "@@ -0,0 +1,113 @@\n+/**\n+ *   This file is part of Skript.\n+ *\n+ *  Skript is free software: you can redistribute it and/or modify\n+ *  it under the terms of the GNU General Public License as published by\n+ *  the Free Software Foundation, either version 3 of the License, or\n+ *  (at your option) any later version.\n+ *\n+ *  Skript is distributed in the hope that it will be useful,\n+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ *  GNU General Public License for more details.\n+ *\n+ *  You should have received a copy of the GNU General Public License\n+ *  along with Skript.  If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ *\n+ * Copyright 2011-2017 Peter G\u00fcttinger and contributors\n+ */\n+package ch.njol.skript.expressions;\n+\n+import org.bukkit.event.Event;\n+import org.bukkit.event.player.PlayerItemMendEvent;\n+import org.eclipse.jdt.annotation.Nullable;\n+\n+import ch.njol.skript.ScriptLoader;\n+import ch.njol.skript.Skript;\n+import ch.njol.skript.classes.Changer.ChangeMode;\n+import ch.njol.skript.doc.Description;\n+import ch.njol.skript.doc.Examples;\n+import ch.njol.skript.doc.Name;\n+import ch.njol.skript.doc.Since;\n+import ch.njol.skript.lang.Expression;\n+import ch.njol.skript.lang.ExpressionType;\n+import ch.njol.skript.lang.SkriptParser.ParseResult;\n+import ch.njol.skript.lang.util.SimpleExpression;\n+import ch.njol.skript.log.ErrorQuality;\n+import ch.njol.util.Kleenean;\n+import ch.njol.util.coll.CollectionUtils;\n+\n+@Name(\"Repair Amount\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDY0NjIzOQ=="}, "originalCommit": {"oid": "33dc8a69e4e3e68029d9d8441e1fb6bc91ec6533"}, "originalPosition": 41}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA5NTgzMzIzOnYy", "diffSide": "RIGHT", "path": "src/main/java/ch/njol/skript/expressions/ExprRepairAmount.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQyMjozMjowN1rOHXu05g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQyMjozMjowN1rOHXu05g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDY0NjUwMg==", "bodyText": "You forgot breaks.", "url": "https://github.com/SkriptLang/Skript/pull/3403#discussion_r494646502", "createdAt": "2020-09-24T22:32:07Z", "author": {"login": "ShaneBeee"}, "path": "src/main/java/ch/njol/skript/expressions/ExprRepairAmount.java", "diffHunk": "@@ -0,0 +1,113 @@\n+/**\n+ *   This file is part of Skript.\n+ *\n+ *  Skript is free software: you can redistribute it and/or modify\n+ *  it under the terms of the GNU General Public License as published by\n+ *  the Free Software Foundation, either version 3 of the License, or\n+ *  (at your option) any later version.\n+ *\n+ *  Skript is distributed in the hope that it will be useful,\n+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ *  GNU General Public License for more details.\n+ *\n+ *  You should have received a copy of the GNU General Public License\n+ *  along with Skript.  If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ *\n+ * Copyright 2011-2017 Peter G\u00fcttinger and contributors\n+ */\n+package ch.njol.skript.expressions;\n+\n+import org.bukkit.event.Event;\n+import org.bukkit.event.player.PlayerItemMendEvent;\n+import org.eclipse.jdt.annotation.Nullable;\n+\n+import ch.njol.skript.ScriptLoader;\n+import ch.njol.skript.Skript;\n+import ch.njol.skript.classes.Changer.ChangeMode;\n+import ch.njol.skript.doc.Description;\n+import ch.njol.skript.doc.Examples;\n+import ch.njol.skript.doc.Name;\n+import ch.njol.skript.doc.Since;\n+import ch.njol.skript.lang.Expression;\n+import ch.njol.skript.lang.ExpressionType;\n+import ch.njol.skript.lang.SkriptParser.ParseResult;\n+import ch.njol.skript.lang.util.SimpleExpression;\n+import ch.njol.skript.log.ErrorQuality;\n+import ch.njol.util.Kleenean;\n+import ch.njol.util.coll.CollectionUtils;\n+\n+@Name(\"Repair Amount\")\n+@Description({\"The number of durability points an item is to be repaired in a mending event.\",\n+\t\t\t\" Modifying the repair amount will affect how much experience is given to the player after mending.\"})\n+@Examples({\"on item mend:\",\n+\t\t\"\\tset the repair amount to 100\"})\n+@Since(\"2.0\")\n+public class ExprRepairAmount extends SimpleExpression<Number> {\n+\n+\tstatic {\n+\t\tSkript.registerExpression(ExprRepairAmount.class, Number.class, ExpressionType.SIMPLE, \"[the] repair amount\");\n+\t}\n+\n+\t@Override\n+\tpublic boolean init(Expression<?>[] exprs, int matchedPattern, Kleenean isDelayed, ParseResult parseResult) {\n+\t\tif (!ScriptLoader.isCurrentEvent(PlayerItemMendEvent.class)) {\n+\t\t\tSkript.error(\"The 'repair amount' is only usable in item mend events\", ErrorQuality.SEMANTIC_ERROR);\n+\t\t\treturn false;\n+\t\t}\n+\t\treturn true;\n+\t}\n+\n+\t@Override\n+\tprotected Number[] get(final Event e) {\n+\t\treturn new Number[]{((PlayerItemMendEvent) e).getRepairAmount()};\n+\t}\n+\n+\t@Nullable\n+\t@Override\n+\tpublic Class<?>[] acceptChange(ChangeMode mode) {\n+\t\tswitch (mode) {\n+\t\t\tcase SET:\n+\t\t\tcase ADD:\n+\t\t\tcase REMOVE:\n+\t\t\t\treturn CollectionUtils.array(Number.class);\n+\t\t\tdefault:\n+\t\t\t\treturn null;\n+\t\t}\n+\t}\n+\n+\t@Override\n+\tpublic void change(Event event, @Nullable Object[] delta, ChangeMode mode) {\n+\t\tif (delta == null)\n+\t\t\treturn;\n+\t\tPlayerItemMendEvent e = (PlayerItemMendEvent) event;\n+\t\tint newLevel = ((Number) delta[0]).intValue();\n+\t\tswitch (mode) {\n+\t\t\tcase SET:\n+\t\t\t\te.setRepairAmount(newLevel);\n+\t\t\tcase ADD:\n+\t\t\t\te.setRepairAmount(e.getRepairAmount() + newLevel);\n+\t\t\tcase REMOVE:\n+\t\t\t\te.setRepairAmount(e.getRepairAmount() - newLevel);\n+\t\t\tdefault:\n+\t\t\t\tassert false;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "33dc8a69e4e3e68029d9d8441e1fb6bc91ec6533"}, "originalPosition": 94}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA5NTg1MTMxOnYy", "diffSide": "RIGHT", "path": "src/main/java/ch/njol/skript/expressions/ExprMendingRepairAmount.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQyMjozOTo0OFrOHXu_aQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQyMjo0OToxNFrOHXvLUg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDY0OTE5Mw==", "bodyText": "Dunno how I missed this, you going back in time? haha, as Im sure you know this should be \"INSERT VERSION\"", "url": "https://github.com/SkriptLang/Skript/pull/3403#discussion_r494649193", "createdAt": "2020-09-24T22:39:48Z", "author": {"login": "ShaneBeee"}, "path": "src/main/java/ch/njol/skript/expressions/ExprMendingRepairAmount.java", "diffHunk": "@@ -0,0 +1,116 @@\n+/**\n+ *   This file is part of Skript.\n+ *\n+ *  Skript is free software: you can redistribute it and/or modify\n+ *  it under the terms of the GNU General Public License as published by\n+ *  the Free Software Foundation, either version 3 of the License, or\n+ *  (at your option) any later version.\n+ *\n+ *  Skript is distributed in the hope that it will be useful,\n+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ *  GNU General Public License for more details.\n+ *\n+ *  You should have received a copy of the GNU General Public License\n+ *  along with Skript.  If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ *\n+ * Copyright 2011-2017 Peter G\u00fcttinger and contributors\n+ */\n+package ch.njol.skript.expressions;\n+\n+import org.bukkit.event.Event;\n+import org.bukkit.event.player.PlayerItemMendEvent;\n+import org.eclipse.jdt.annotation.Nullable;\n+\n+import ch.njol.skript.ScriptLoader;\n+import ch.njol.skript.Skript;\n+import ch.njol.skript.classes.Changer.ChangeMode;\n+import ch.njol.skript.doc.Description;\n+import ch.njol.skript.doc.Examples;\n+import ch.njol.skript.doc.Name;\n+import ch.njol.skript.doc.Since;\n+import ch.njol.skript.lang.Expression;\n+import ch.njol.skript.lang.ExpressionType;\n+import ch.njol.skript.lang.SkriptParser.ParseResult;\n+import ch.njol.skript.lang.util.SimpleExpression;\n+import ch.njol.skript.log.ErrorQuality;\n+import ch.njol.util.Kleenean;\n+import ch.njol.util.coll.CollectionUtils;\n+\n+@Name(\"Mending Repair Amount\")\n+@Description({\"The number of durability points an item is to be repaired in a mending event.\",\n+\t\t\t\" Modifying the repair amount will affect how much experience is given to the player after mending.\"})\n+@Examples({\"on item mend:\",\n+\t\t\"\\tset the mending repair amount to 100\"})\n+@Since(\"2.0\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "579239f1daa5089a226657128b829b439e939495"}, "originalPosition": 46}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDY1MjI0Mg==", "bodyText": "I always miss stuff \ud83d\ude14\nhaha", "url": "https://github.com/SkriptLang/Skript/pull/3403#discussion_r494652242", "createdAt": "2020-09-24T22:49:14Z", "author": {"login": "APickledWalrus"}, "path": "src/main/java/ch/njol/skript/expressions/ExprMendingRepairAmount.java", "diffHunk": "@@ -0,0 +1,116 @@\n+/**\n+ *   This file is part of Skript.\n+ *\n+ *  Skript is free software: you can redistribute it and/or modify\n+ *  it under the terms of the GNU General Public License as published by\n+ *  the Free Software Foundation, either version 3 of the License, or\n+ *  (at your option) any later version.\n+ *\n+ *  Skript is distributed in the hope that it will be useful,\n+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ *  GNU General Public License for more details.\n+ *\n+ *  You should have received a copy of the GNU General Public License\n+ *  along with Skript.  If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ *\n+ * Copyright 2011-2017 Peter G\u00fcttinger and contributors\n+ */\n+package ch.njol.skript.expressions;\n+\n+import org.bukkit.event.Event;\n+import org.bukkit.event.player.PlayerItemMendEvent;\n+import org.eclipse.jdt.annotation.Nullable;\n+\n+import ch.njol.skript.ScriptLoader;\n+import ch.njol.skript.Skript;\n+import ch.njol.skript.classes.Changer.ChangeMode;\n+import ch.njol.skript.doc.Description;\n+import ch.njol.skript.doc.Examples;\n+import ch.njol.skript.doc.Name;\n+import ch.njol.skript.doc.Since;\n+import ch.njol.skript.lang.Expression;\n+import ch.njol.skript.lang.ExpressionType;\n+import ch.njol.skript.lang.SkriptParser.ParseResult;\n+import ch.njol.skript.lang.util.SimpleExpression;\n+import ch.njol.skript.log.ErrorQuality;\n+import ch.njol.util.Kleenean;\n+import ch.njol.util.coll.CollectionUtils;\n+\n+@Name(\"Mending Repair Amount\")\n+@Description({\"The number of durability points an item is to be repaired in a mending event.\",\n+\t\t\t\" Modifying the repair amount will affect how much experience is given to the player after mending.\"})\n+@Examples({\"on item mend:\",\n+\t\t\"\\tset the mending repair amount to 100\"})\n+@Since(\"2.0\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDY0OTE5Mw=="}, "originalCommit": {"oid": "579239f1daa5089a226657128b829b439e939495"}, "originalPosition": 46}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEwNzA0MTk5OnYy", "diffSide": "RIGHT", "path": "src/main/java/ch/njol/skript/expressions/ExprMendingRepairAmount.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQwMDo1OTo0M1rOHZUrFw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQxNTozNzowNlrOHZzuLQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjMxNTE1OQ==", "bodyText": "Perhaps you could do\n\t\tswitch (mode) {\n\t\t\tcase SET:\n\t\t\t\tbreak;\n\t\t\tcase ADD:\n\t\t\t\tnewLevel += e.getRepairAmount();\n\t\t\t\tbreak;\n\t\t\tcase REMOVE:\n\t\t\t\tnewLevel -= e.getRepairAmount();\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tassert false;\n\t\t}\n\t\te.setRepairAmount(newLevel);", "url": "https://github.com/SkriptLang/Skript/pull/3403#discussion_r496315159", "createdAt": "2020-09-29T00:59:43Z", "author": {"login": "Wealthyturtle"}, "path": "src/main/java/ch/njol/skript/expressions/ExprMendingRepairAmount.java", "diffHunk": "@@ -0,0 +1,116 @@\n+/**\n+ *   This file is part of Skript.\n+ *\n+ *  Skript is free software: you can redistribute it and/or modify\n+ *  it under the terms of the GNU General Public License as published by\n+ *  the Free Software Foundation, either version 3 of the License, or\n+ *  (at your option) any later version.\n+ *\n+ *  Skript is distributed in the hope that it will be useful,\n+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ *  GNU General Public License for more details.\n+ *\n+ *  You should have received a copy of the GNU General Public License\n+ *  along with Skript.  If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ *\n+ * Copyright 2011-2017 Peter G\u00fcttinger and contributors\n+ */\n+package ch.njol.skript.expressions;\n+\n+import org.bukkit.event.Event;\n+import org.bukkit.event.player.PlayerItemMendEvent;\n+import org.eclipse.jdt.annotation.Nullable;\n+\n+import ch.njol.skript.ScriptLoader;\n+import ch.njol.skript.Skript;\n+import ch.njol.skript.classes.Changer.ChangeMode;\n+import ch.njol.skript.doc.Description;\n+import ch.njol.skript.doc.Examples;\n+import ch.njol.skript.doc.Name;\n+import ch.njol.skript.doc.Since;\n+import ch.njol.skript.lang.Expression;\n+import ch.njol.skript.lang.ExpressionType;\n+import ch.njol.skript.lang.SkriptParser.ParseResult;\n+import ch.njol.skript.lang.util.SimpleExpression;\n+import ch.njol.skript.log.ErrorQuality;\n+import ch.njol.util.Kleenean;\n+import ch.njol.util.coll.CollectionUtils;\n+\n+@Name(\"Mending Repair Amount\")\n+@Description({\"The number of durability points an item is to be repaired in a mending event.\",\n+\t\t\t\" Modifying the repair amount will affect how much experience is given to the player after mending.\"})\n+@Examples({\"on item mend:\",\n+\t\t\"\\tset the mending repair amount to 100\"})\n+@Since(\"INSERT VERSION\")\n+public class ExprMendingRepairAmount extends SimpleExpression<Number> {\n+\n+\tstatic {\n+\t\tSkript.registerExpression(ExprMendingRepairAmount.class, Number.class, ExpressionType.SIMPLE, \"[the] [mending] repair amount\");\n+\t}\n+\n+\t@Override\n+\tpublic boolean init(Expression<?>[] exprs, int matchedPattern, Kleenean isDelayed, ParseResult parseResult) {\n+\t\tif (!ScriptLoader.isCurrentEvent(PlayerItemMendEvent.class)) {\n+\t\t\tSkript.error(\"The 'mending repair amount' is only usable in item mend events\", ErrorQuality.SEMANTIC_ERROR);\n+\t\t\treturn false;\n+\t\t}\n+\t\treturn true;\n+\t}\n+\n+\t@Override\n+\tprotected Number[] get(final Event e) {\n+\t\treturn new Number[]{((PlayerItemMendEvent) e).getRepairAmount()};\n+\t}\n+\n+\t@Nullable\n+\t@Override\n+\tpublic Class<?>[] acceptChange(ChangeMode mode) {\n+\t\tswitch (mode) {\n+\t\t\tcase SET:\n+\t\t\tcase ADD:\n+\t\t\tcase REMOVE:\n+\t\t\t\treturn CollectionUtils.array(Number.class);\n+\t\t\tdefault:\n+\t\t\t\treturn null;\n+\t\t}\n+\t}\n+\n+\t@Override\n+\tpublic void change(Event event, @Nullable Object[] delta, ChangeMode mode) {\n+\t\tif (delta == null)\n+\t\t\treturn;\n+\t\tPlayerItemMendEvent e = (PlayerItemMendEvent) event;\n+\t\tint newLevel = ((Number) delta[0]).intValue();\n+\t\tswitch (mode) {\n+\t\t\tcase SET:\n+\t\t\t\te.setRepairAmount(newLevel);\n+\t\t\t\tbreak;\n+\t\t\tcase ADD:\n+\t\t\t\te.setRepairAmount(e.getRepairAmount() + newLevel);\n+\t\t\t\tbreak;\n+\t\t\tcase REMOVE:\n+\t\t\t\te.setRepairAmount(e.getRepairAmount() - newLevel);\n+\t\t\t\tbreak;\n+\t\t\tdefault:\n+\t\t\t\tassert false;\n+\t\t}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1677f2f6e4a37ab22e027a583258978b36eb4300"}, "originalPosition": 98}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjgyMzg1Mw==", "bodyText": "That would probably be better", "url": "https://github.com/SkriptLang/Skript/pull/3403#discussion_r496823853", "createdAt": "2020-09-29T15:37:06Z", "author": {"login": "APickledWalrus"}, "path": "src/main/java/ch/njol/skript/expressions/ExprMendingRepairAmount.java", "diffHunk": "@@ -0,0 +1,116 @@\n+/**\n+ *   This file is part of Skript.\n+ *\n+ *  Skript is free software: you can redistribute it and/or modify\n+ *  it under the terms of the GNU General Public License as published by\n+ *  the Free Software Foundation, either version 3 of the License, or\n+ *  (at your option) any later version.\n+ *\n+ *  Skript is distributed in the hope that it will be useful,\n+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ *  GNU General Public License for more details.\n+ *\n+ *  You should have received a copy of the GNU General Public License\n+ *  along with Skript.  If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ *\n+ * Copyright 2011-2017 Peter G\u00fcttinger and contributors\n+ */\n+package ch.njol.skript.expressions;\n+\n+import org.bukkit.event.Event;\n+import org.bukkit.event.player.PlayerItemMendEvent;\n+import org.eclipse.jdt.annotation.Nullable;\n+\n+import ch.njol.skript.ScriptLoader;\n+import ch.njol.skript.Skript;\n+import ch.njol.skript.classes.Changer.ChangeMode;\n+import ch.njol.skript.doc.Description;\n+import ch.njol.skript.doc.Examples;\n+import ch.njol.skript.doc.Name;\n+import ch.njol.skript.doc.Since;\n+import ch.njol.skript.lang.Expression;\n+import ch.njol.skript.lang.ExpressionType;\n+import ch.njol.skript.lang.SkriptParser.ParseResult;\n+import ch.njol.skript.lang.util.SimpleExpression;\n+import ch.njol.skript.log.ErrorQuality;\n+import ch.njol.util.Kleenean;\n+import ch.njol.util.coll.CollectionUtils;\n+\n+@Name(\"Mending Repair Amount\")\n+@Description({\"The number of durability points an item is to be repaired in a mending event.\",\n+\t\t\t\" Modifying the repair amount will affect how much experience is given to the player after mending.\"})\n+@Examples({\"on item mend:\",\n+\t\t\"\\tset the mending repair amount to 100\"})\n+@Since(\"INSERT VERSION\")\n+public class ExprMendingRepairAmount extends SimpleExpression<Number> {\n+\n+\tstatic {\n+\t\tSkript.registerExpression(ExprMendingRepairAmount.class, Number.class, ExpressionType.SIMPLE, \"[the] [mending] repair amount\");\n+\t}\n+\n+\t@Override\n+\tpublic boolean init(Expression<?>[] exprs, int matchedPattern, Kleenean isDelayed, ParseResult parseResult) {\n+\t\tif (!ScriptLoader.isCurrentEvent(PlayerItemMendEvent.class)) {\n+\t\t\tSkript.error(\"The 'mending repair amount' is only usable in item mend events\", ErrorQuality.SEMANTIC_ERROR);\n+\t\t\treturn false;\n+\t\t}\n+\t\treturn true;\n+\t}\n+\n+\t@Override\n+\tprotected Number[] get(final Event e) {\n+\t\treturn new Number[]{((PlayerItemMendEvent) e).getRepairAmount()};\n+\t}\n+\n+\t@Nullable\n+\t@Override\n+\tpublic Class<?>[] acceptChange(ChangeMode mode) {\n+\t\tswitch (mode) {\n+\t\t\tcase SET:\n+\t\t\tcase ADD:\n+\t\t\tcase REMOVE:\n+\t\t\t\treturn CollectionUtils.array(Number.class);\n+\t\t\tdefault:\n+\t\t\t\treturn null;\n+\t\t}\n+\t}\n+\n+\t@Override\n+\tpublic void change(Event event, @Nullable Object[] delta, ChangeMode mode) {\n+\t\tif (delta == null)\n+\t\t\treturn;\n+\t\tPlayerItemMendEvent e = (PlayerItemMendEvent) event;\n+\t\tint newLevel = ((Number) delta[0]).intValue();\n+\t\tswitch (mode) {\n+\t\t\tcase SET:\n+\t\t\t\te.setRepairAmount(newLevel);\n+\t\t\t\tbreak;\n+\t\t\tcase ADD:\n+\t\t\t\te.setRepairAmount(e.getRepairAmount() + newLevel);\n+\t\t\t\tbreak;\n+\t\t\tcase REMOVE:\n+\t\t\t\te.setRepairAmount(e.getRepairAmount() - newLevel);\n+\t\t\t\tbreak;\n+\t\t\tdefault:\n+\t\t\t\tassert false;\n+\t\t}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjMxNTE1OQ=="}, "originalCommit": {"oid": "1677f2f6e4a37ab22e027a583258978b36eb4300"}, "originalPosition": 98}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEwNzA0Mjg3OnYy", "diffSide": "RIGHT", "path": "src/main/java/ch/njol/skript/expressions/ExprMendingRepairAmount.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQwMTowMDoxM1rOHZUrmw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQxNTozNjozM1rOHZzr2Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjMxNTI5MQ==", "bodyText": "Might the RESET ChangeMode be applicable here?", "url": "https://github.com/SkriptLang/Skript/pull/3403#discussion_r496315291", "createdAt": "2020-09-29T01:00:13Z", "author": {"login": "Wealthyturtle"}, "path": "src/main/java/ch/njol/skript/expressions/ExprMendingRepairAmount.java", "diffHunk": "@@ -0,0 +1,116 @@\n+/**\n+ *   This file is part of Skript.\n+ *\n+ *  Skript is free software: you can redistribute it and/or modify\n+ *  it under the terms of the GNU General Public License as published by\n+ *  the Free Software Foundation, either version 3 of the License, or\n+ *  (at your option) any later version.\n+ *\n+ *  Skript is distributed in the hope that it will be useful,\n+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ *  GNU General Public License for more details.\n+ *\n+ *  You should have received a copy of the GNU General Public License\n+ *  along with Skript.  If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ *\n+ * Copyright 2011-2017 Peter G\u00fcttinger and contributors\n+ */\n+package ch.njol.skript.expressions;\n+\n+import org.bukkit.event.Event;\n+import org.bukkit.event.player.PlayerItemMendEvent;\n+import org.eclipse.jdt.annotation.Nullable;\n+\n+import ch.njol.skript.ScriptLoader;\n+import ch.njol.skript.Skript;\n+import ch.njol.skript.classes.Changer.ChangeMode;\n+import ch.njol.skript.doc.Description;\n+import ch.njol.skript.doc.Examples;\n+import ch.njol.skript.doc.Name;\n+import ch.njol.skript.doc.Since;\n+import ch.njol.skript.lang.Expression;\n+import ch.njol.skript.lang.ExpressionType;\n+import ch.njol.skript.lang.SkriptParser.ParseResult;\n+import ch.njol.skript.lang.util.SimpleExpression;\n+import ch.njol.skript.log.ErrorQuality;\n+import ch.njol.util.Kleenean;\n+import ch.njol.util.coll.CollectionUtils;\n+\n+@Name(\"Mending Repair Amount\")\n+@Description({\"The number of durability points an item is to be repaired in a mending event.\",\n+\t\t\t\" Modifying the repair amount will affect how much experience is given to the player after mending.\"})\n+@Examples({\"on item mend:\",\n+\t\t\"\\tset the mending repair amount to 100\"})\n+@Since(\"INSERT VERSION\")\n+public class ExprMendingRepairAmount extends SimpleExpression<Number> {\n+\n+\tstatic {\n+\t\tSkript.registerExpression(ExprMendingRepairAmount.class, Number.class, ExpressionType.SIMPLE, \"[the] [mending] repair amount\");\n+\t}\n+\n+\t@Override\n+\tpublic boolean init(Expression<?>[] exprs, int matchedPattern, Kleenean isDelayed, ParseResult parseResult) {\n+\t\tif (!ScriptLoader.isCurrentEvent(PlayerItemMendEvent.class)) {\n+\t\t\tSkript.error(\"The 'mending repair amount' is only usable in item mend events\", ErrorQuality.SEMANTIC_ERROR);\n+\t\t\treturn false;\n+\t\t}\n+\t\treturn true;\n+\t}\n+\n+\t@Override\n+\tprotected Number[] get(final Event e) {\n+\t\treturn new Number[]{((PlayerItemMendEvent) e).getRepairAmount()};\n+\t}\n+\n+\t@Nullable\n+\t@Override\n+\tpublic Class<?>[] acceptChange(ChangeMode mode) {\n+\t\tswitch (mode) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1677f2f6e4a37ab22e027a583258978b36eb4300"}, "originalPosition": 70}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjgyMzI1Nw==", "bodyText": "It might be possible if I get the ExperienceOrb actually. I'll have to test that out.", "url": "https://github.com/SkriptLang/Skript/pull/3403#discussion_r496823257", "createdAt": "2020-09-29T15:36:33Z", "author": {"login": "APickledWalrus"}, "path": "src/main/java/ch/njol/skript/expressions/ExprMendingRepairAmount.java", "diffHunk": "@@ -0,0 +1,116 @@\n+/**\n+ *   This file is part of Skript.\n+ *\n+ *  Skript is free software: you can redistribute it and/or modify\n+ *  it under the terms of the GNU General Public License as published by\n+ *  the Free Software Foundation, either version 3 of the License, or\n+ *  (at your option) any later version.\n+ *\n+ *  Skript is distributed in the hope that it will be useful,\n+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ *  GNU General Public License for more details.\n+ *\n+ *  You should have received a copy of the GNU General Public License\n+ *  along with Skript.  If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ *\n+ * Copyright 2011-2017 Peter G\u00fcttinger and contributors\n+ */\n+package ch.njol.skript.expressions;\n+\n+import org.bukkit.event.Event;\n+import org.bukkit.event.player.PlayerItemMendEvent;\n+import org.eclipse.jdt.annotation.Nullable;\n+\n+import ch.njol.skript.ScriptLoader;\n+import ch.njol.skript.Skript;\n+import ch.njol.skript.classes.Changer.ChangeMode;\n+import ch.njol.skript.doc.Description;\n+import ch.njol.skript.doc.Examples;\n+import ch.njol.skript.doc.Name;\n+import ch.njol.skript.doc.Since;\n+import ch.njol.skript.lang.Expression;\n+import ch.njol.skript.lang.ExpressionType;\n+import ch.njol.skript.lang.SkriptParser.ParseResult;\n+import ch.njol.skript.lang.util.SimpleExpression;\n+import ch.njol.skript.log.ErrorQuality;\n+import ch.njol.util.Kleenean;\n+import ch.njol.util.coll.CollectionUtils;\n+\n+@Name(\"Mending Repair Amount\")\n+@Description({\"The number of durability points an item is to be repaired in a mending event.\",\n+\t\t\t\" Modifying the repair amount will affect how much experience is given to the player after mending.\"})\n+@Examples({\"on item mend:\",\n+\t\t\"\\tset the mending repair amount to 100\"})\n+@Since(\"INSERT VERSION\")\n+public class ExprMendingRepairAmount extends SimpleExpression<Number> {\n+\n+\tstatic {\n+\t\tSkript.registerExpression(ExprMendingRepairAmount.class, Number.class, ExpressionType.SIMPLE, \"[the] [mending] repair amount\");\n+\t}\n+\n+\t@Override\n+\tpublic boolean init(Expression<?>[] exprs, int matchedPattern, Kleenean isDelayed, ParseResult parseResult) {\n+\t\tif (!ScriptLoader.isCurrentEvent(PlayerItemMendEvent.class)) {\n+\t\t\tSkript.error(\"The 'mending repair amount' is only usable in item mend events\", ErrorQuality.SEMANTIC_ERROR);\n+\t\t\treturn false;\n+\t\t}\n+\t\treturn true;\n+\t}\n+\n+\t@Override\n+\tprotected Number[] get(final Event e) {\n+\t\treturn new Number[]{((PlayerItemMendEvent) e).getRepairAmount()};\n+\t}\n+\n+\t@Nullable\n+\t@Override\n+\tpublic Class<?>[] acceptChange(ChangeMode mode) {\n+\t\tswitch (mode) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjMxNTI5MQ=="}, "originalCommit": {"oid": "1677f2f6e4a37ab22e027a583258978b36eb4300"}, "originalPosition": 70}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1021, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}