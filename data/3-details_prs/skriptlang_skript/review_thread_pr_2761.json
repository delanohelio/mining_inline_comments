{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYyMzQxMjQz", "number": 2761, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNVQxNDo1NjowMFrODYM4Jg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNVQxNDo1NjowMFrODYM4Jg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI2NzAzMzk4OnYy", "diffSide": "RIGHT", "path": "src/test/skript/tests/syntaxes/effects/EffHealth.sk", "isResolved": true, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNVQxNDo1NjowMFrOFd7Bbw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QxNToxMjoyNlrOFk0xBg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjkyMDA0Nw==", "bodyText": "Why does this change make tests pass? Is there a bug in test system or EffHealth?", "url": "https://github.com/SkriptLang/Skript/pull/2761#discussion_r366920047", "createdAt": "2020-01-15T14:56:00Z", "author": {"login": "bensku"}, "path": "src/test/skript/tests/syntaxes/effects/EffHealth.sk", "diffHunk": "@@ -8,12 +8,10 @@ test \"health effect\":\n \tspawn zombie at location(0, 64, 0, world \"world\")\n \tset {_m} to last spawned zombie\n \tassert health of {_m} is 10 with \"default zombie health failed\"\n-\tdamage {_m} by 2\n-\tassert health of {_m} is 8 with \"damage zombie ##1 failed\"\n \tdamage {_m} by 0.5", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ff6d907e3faeb6a06ec01ca064d871006a997c8b"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjkyNDc3OA==", "bodyText": "No, this even happens when using Skript + Skript-mirror. entity.damage(num) ... Damaging an entity in quick succession skips the 2nd damage when there is three. Im unsure why, but I would assume this is either a Spigot/CB or MC bugs/glitch.", "url": "https://github.com/SkriptLang/Skript/pull/2761#discussion_r366924778", "createdAt": "2020-01-15T15:04:10Z", "author": {"login": "ShaneBeee"}, "path": "src/test/skript/tests/syntaxes/effects/EffHealth.sk", "diffHunk": "@@ -8,12 +8,10 @@ test \"health effect\":\n \tspawn zombie at location(0, 64, 0, world \"world\")\n \tset {_m} to last spawned zombie\n \tassert health of {_m} is 10 with \"default zombie health failed\"\n-\tdamage {_m} by 2\n-\tassert health of {_m} is 8 with \"damage zombie ##1 failed\"\n \tdamage {_m} by 0.5", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjkyMDA0Nw=="}, "originalCommit": {"oid": "ff6d907e3faeb6a06ec01ca064d871006a997c8b"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Nzg3MTgyMQ==", "bodyText": "Call me crazy, but what if Skript fixed this issue by calling entity.damage() FOLLOWED BY setHealth()? That works because no extra damage will be applied, and:\n\nHealth is properly reported back to the user in Scripts & Java CI\nEntity will get the damaged visual effect\n\nEven though this may not strictly be a Skript issue, we can still workaround the issue to make sure that users aren't affected by the lack of entity damage visual effects or incorrect health being returned. Performance-wise, I don't think this would add much overhead either (correct me if I'm wrong here).", "url": "https://github.com/SkriptLang/Skript/pull/2761#discussion_r367871821", "createdAt": "2020-01-17T10:40:25Z", "author": {"login": "Wealthyturtle"}, "path": "src/test/skript/tests/syntaxes/effects/EffHealth.sk", "diffHunk": "@@ -8,12 +8,10 @@ test \"health effect\":\n \tspawn zombie at location(0, 64, 0, world \"world\")\n \tset {_m} to last spawned zombie\n \tassert health of {_m} is 10 with \"default zombie health failed\"\n-\tdamage {_m} by 2\n-\tassert health of {_m} is 8 with \"damage zombie ##1 failed\"\n \tdamage {_m} by 0.5", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjkyMDA0Nw=="}, "originalCommit": {"oid": "ff6d907e3faeb6a06ec01ca064d871006a997c8b"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDA4NDMyNA==", "bodyText": "Sorry for inactivity. Minecraft has invulnerability ticks after taking damage, probably affects Bukkit API too. This is not a bug, so the changing test makes sense.\n@Wealthyturtle We could explore this in later release for 2.5. I'm a bit wary of it due to potential differences in MC versions supported by us.", "url": "https://github.com/SkriptLang/Skript/pull/2761#discussion_r374084324", "createdAt": "2020-02-03T12:51:32Z", "author": {"login": "bensku"}, "path": "src/test/skript/tests/syntaxes/effects/EffHealth.sk", "diffHunk": "@@ -8,12 +8,10 @@ test \"health effect\":\n \tspawn zombie at location(0, 64, 0, world \"world\")\n \tset {_m} to last spawned zombie\n \tassert health of {_m} is 10 with \"default zombie health failed\"\n-\tdamage {_m} by 2\n-\tassert health of {_m} is 8 with \"damage zombie ##1 failed\"\n \tdamage {_m} by 0.5", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjkyMDA0Nw=="}, "originalCommit": {"oid": "ff6d907e3faeb6a06ec01ca064d871006a997c8b"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDE1NzU3NA==", "bodyText": "Alright, no problem.", "url": "https://github.com/SkriptLang/Skript/pull/2761#discussion_r374157574", "createdAt": "2020-02-03T15:12:26Z", "author": {"login": "Wealthyturtle"}, "path": "src/test/skript/tests/syntaxes/effects/EffHealth.sk", "diffHunk": "@@ -8,12 +8,10 @@ test \"health effect\":\n \tspawn zombie at location(0, 64, 0, world \"world\")\n \tset {_m} to last spawned zombie\n \tassert health of {_m} is 10 with \"default zombie health failed\"\n-\tdamage {_m} by 2\n-\tassert health of {_m} is 8 with \"damage zombie ##1 failed\"\n \tdamage {_m} by 0.5", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjkyMDA0Nw=="}, "originalCommit": {"oid": "ff6d907e3faeb6a06ec01ca064d871006a997c8b"}, "originalPosition": 6}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1114, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}