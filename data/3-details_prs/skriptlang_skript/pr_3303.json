{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY3MjkwNjAx", "number": 3303, "title": "ExprDurability - fix for 1.12.2 and below with block's data values", "bodyText": "Description\nThis PR aims to fix an issue with the data value expression where it would not work with blocks.\n\nTarget Minecraft Versions: 1.9.4 - 1.12.2\nRequirements: none\nRelated Issues: #2736", "createdAt": "2020-08-13T10:18:09Z", "url": "https://github.com/SkriptLang/Skript/pull/3303", "merged": true, "mergeCommit": {"oid": "5ddf977c44630ecc23af9cf230e39b8c91f6476f"}, "closed": true, "closedAt": "2020-08-19T08:10:27Z", "author": {"login": "ShaneBeee"}, "timelineItems": {"totalCount": 16, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc7NgC_gH2gAyNDY3MjkwNjAxOjA1YmU5MDY2ODZkMGY3NDJhM2ViNjU3MGRhNTY1YzkzNWE4YjRhMzc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdACCXpAH2gAyNDY3MjkwNjAxOmE4NmVlMjQ2ZDQ3MTJlNTEyOTgwZDhiMDZiNjA2Mjg3Y2IzZGRjNjY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "05be906686d0f742a3eb6570da565c935a8b4a37", "author": {"user": {"login": "ShaneBeee", "name": "Shane Bee"}}, "url": "https://github.com/SkriptLang/Skript/commit/05be906686d0f742a3eb6570da565c935a8b4a37", "committedDate": "2020-08-03T08:11:23Z", "message": "Introducing block state modification"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2ea350b47773ff6ebaf48bf6a3c44833778e7838", "author": {"user": {"login": "ShaneBeee", "name": "Shane Bee"}}, "url": "https://github.com/SkriptLang/Skript/commit/2ea350b47773ff6ebaf48bf6a3c44833778e7838", "committedDate": "2020-08-03T08:24:46Z", "message": "Revert \"Introducing block state modification\"\n\nThis reverts commit 05be9066"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "29a0869b3b6553fc1043066413d30c2ffe486916", "author": {"user": {"login": "ShaneBeee", "name": "Shane Bee"}}, "url": "https://github.com/SkriptLang/Skript/commit/29a0869b3b6553fc1043066413d30c2ffe486916", "committedDate": "2020-08-06T18:58:31Z", "message": "Merge branch 'master' of https://github.com/SkriptLang/Skript"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "23785c76083b6eca9c26a3c9cd0d7674def09aa8", "author": {"user": {"login": "ShaneBeee", "name": "Shane Bee"}}, "url": "https://github.com/SkriptLang/Skript/commit/23785c76083b6eca9c26a3c9cd0d7674def09aa8", "committedDate": "2020-08-06T20:48:52Z", "message": "Merge branch 'master' of https://github.com/SkriptLang/Skript"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e81e1b28e76c0bfcaeb6970bb0c9d6545d242294", "author": {"user": {"login": "ShaneBeee", "name": "Shane Bee"}}, "url": "https://github.com/SkriptLang/Skript/commit/e81e1b28e76c0bfcaeb6970bb0c9d6545d242294", "committedDate": "2020-08-09T02:19:46Z", "message": "Merge branch 'master' of https://github.com/SkriptLang/Skript"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "08d03bcea367a59149c785a9653c5c1e755e95da", "author": {"user": {"login": "ShaneBeee", "name": "Shane Bee"}}, "url": "https://github.com/SkriptLang/Skript/commit/08d03bcea367a59149c785a9653c5c1e755e95da", "committedDate": "2020-08-09T07:09:44Z", "message": "Merge branch 'master' of https://github.com/SkriptLang/Skript"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9001efcf33e39f290d5957351ff19e2ade694944", "author": {"user": {"login": "ShaneBeee", "name": "Shane Bee"}}, "url": "https://github.com/SkriptLang/Skript/commit/9001efcf33e39f290d5957351ff19e2ade694944", "committedDate": "2020-08-10T01:30:06Z", "message": "Merge branch 'master' of https://github.com/SkriptLang/Skript"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1695141b1a408522b1c061afb09f17b536f4a7ab", "author": {"user": {"login": "ShaneBeee", "name": "Shane Bee"}}, "url": "https://github.com/SkriptLang/Skript/commit/1695141b1a408522b1c061afb09f17b536f4a7ab", "committedDate": "2020-08-10T02:09:45Z", "message": "Merge branch 'master' of https://github.com/SkriptLang/Skript"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "80c69bdebdc09a0d83878f3b8de40b695981cabf", "author": {"user": {"login": "ShaneBeee", "name": "Shane Bee"}}, "url": "https://github.com/SkriptLang/Skript/commit/80c69bdebdc09a0d83878f3b8de40b695981cabf", "committedDate": "2020-08-11T03:58:37Z", "message": "Merge branch 'master' of https://github.com/SkriptLang/Skript"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a26eba6519fbb63a6cb82ef63d85f34910014c16", "author": {"user": {"login": "ShaneBeee", "name": "Shane Bee"}}, "url": "https://github.com/SkriptLang/Skript/commit/a26eba6519fbb63a6cb82ef63d85f34910014c16", "committedDate": "2020-08-11T10:40:47Z", "message": "Merge branch 'master' of https://github.com/SkriptLang/Skript"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7b238a75c58a1626fa23da2d177831e68a9ca606", "author": {"user": {"login": "ShaneBeee", "name": "Shane Bee"}}, "url": "https://github.com/SkriptLang/Skript/commit/7b238a75c58a1626fa23da2d177831e68a9ca606", "committedDate": "2020-08-13T10:11:59Z", "message": "ExprDurability - fix for 1.12.2 and below with setting a block's data value"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY3NTU2NDMx", "url": "https://github.com/SkriptLang/Skript/pull/3303#pullrequestreview-467556431", "createdAt": "2020-08-14T13:03:12Z", "commit": {"oid": "7b238a75c58a1626fa23da2d177831e68a9ca606"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xNFQxMzowMzoxMlrOHAzwCQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xNFQxMzowNDoxNFrOHAzx7Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDYwOTkyOQ==", "bodyText": "For this one, I think it's fine to do\nif (mode == ChangeMode.DELETE)\n\treturn CollectionUtils.array(Number.class);\nreturn null\n\nBecause the addition of future ChangeModes are not affected.", "url": "https://github.com/SkriptLang/Skript/pull/3303#discussion_r470609929", "createdAt": "2020-08-14T13:03:12Z", "author": {"login": "Wealthyturtle"}, "path": "src/main/java/ch/njol/skript/expressions/ExprDurability.java", "diffHunk": "@@ -73,45 +85,67 @@ public String getPropertyName() {\n \t@Override\n \t@Nullable\n \tpublic Class<?>[] acceptChange(final ChangeMode mode) {\n-\t\tif (mode == ChangeMode.REMOVE_ALL)\n-\t\t\treturn null;\n-\t\tif (Slot.class.isAssignableFrom(getExpr().getReturnType()) || getExpr().isSingle() && ChangerUtils.acceptsChange(getExpr(), ChangeMode.SET, ItemStack.class, ItemType.class))\n-\t\t\treturn CollectionUtils.array(Number.class);\n+\t\tswitch (mode) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b238a75c58a1626fa23da2d177831e68a9ca606"}, "originalPosition": 72}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDYxMDQxMw==", "bodyText": "Maybe we could replace this with number? Or that could be for a future PR, up to you :)", "url": "https://github.com/SkriptLang/Skript/pull/3303#discussion_r470610413", "createdAt": "2020-08-14T13:04:14Z", "author": {"login": "Wealthyturtle"}, "path": "src/main/java/ch/njol/skript/expressions/ExprDurability.java", "diffHunk": "@@ -37,27 +40,36 @@\n /**\n  * @author Peter G\u00fcttinger\n  */\n-@Name(\"Data Value\")\n-@Description({\"The data value of an item.\",\n-\t\t\"You usually don't need this expression as you can check and set items with aliases easily, \" +\n-\t\t\t\t\"but this expression can e.g. be used to \\\"add 1 to data of &lt;item&gt;\\\", e.g. for cycling through all wool colours.\"})\n-@Examples({\"add 1 to the data value of the clicked block\"})\n+@Name(\"Data/Damage Value\")\n+@Description({\"The data/damage value of an item/block. Data values of blocks are only supported on 1.12.2 and below.\",\n+\t\t\"You usually don't need this expression as you can check and set items with aliases easily, \",\n+\t\t\"but this expression can e.g. be used to \\\"add 1 to data of &lt;item&gt;\\\", e.g. for cycling through all wool colours.\"})\n+@Examples({\"set damage value of player's tool to 10\",\n+\t\t\"set data value of target block of player to 3\",\n+\t\t\"add 1 to the data value of the clicked block\",\n+\t\t\"reset data value of block at player\"})\n @Since(\"1.2\")\n public class ExprDurability extends SimplePropertyExpression<Object, Short> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b238a75c58a1626fa23da2d177831e68a9ca606"}, "originalPosition": 36}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "70b64b2262afe6b64dc7d6a27a918308972be3dc", "author": {"user": {"login": "ShaneBeee", "name": "Shane Bee"}}, "url": "https://github.com/SkriptLang/Skript/commit/70b64b2262afe6b64dc7d6a27a918308972be3dc", "committedDate": "2020-08-14T20:22:28Z", "message": "ExprDurability - change to use Number class rather than Short"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ff5db881b886cbc4670fa2223175d2189a55fb30", "author": {"user": {"login": "ShaneBeee", "name": "Shane Bee"}}, "url": "https://github.com/SkriptLang/Skript/commit/ff5db881b886cbc4670fa2223175d2189a55fb30", "committedDate": "2020-08-14T20:22:40Z", "message": "ExprDurability - add regression test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY4OTc2OTM5", "url": "https://github.com/SkriptLang/Skript/pull/3303#pullrequestreview-468976939", "createdAt": "2020-08-18T04:07:54Z", "commit": {"oid": "ff5db881b886cbc4670fa2223175d2189a55fb30"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a86ee246d4712e512980d8b06b606287cb3ddc66", "author": {"user": {"login": "ShaneBeee", "name": "Shane Bee"}}, "url": "https://github.com/SkriptLang/Skript/commit/a86ee246d4712e512980d8b06b606287cb3ddc66", "committedDate": "2020-08-18T07:39:38Z", "message": "Merge branch 'master' into fix/data-value-block"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2975, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}