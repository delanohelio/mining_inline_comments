{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI4ODEwNDc3", "number": 3577, "title": "EffMessage - add support for optional sender", "bodyText": "Description\nThis PR aims to add support for a sender in the message effect.\nMinecraft added a player ignore system in 1.16.4. Using the Player#sendMessage method in Bukkit, sends the message as a system message, thus not allowing players to ignore messages. This update will allow for that.\nI also updated the Paper dependency to 1.16.4 since the method including UUID (of sender) was recently added.\n\nTarget Minecraft Versions: 1.16.4+\nRequirements: none\nRelated Issues: none", "createdAt": "2020-11-27T23:14:37Z", "url": "https://github.com/SkriptLang/Skript/pull/3577", "merged": true, "mergeCommit": {"oid": "2097aebe5edb2314f4215a8ae9b333d73b5202d6"}, "closed": true, "closedAt": "2020-11-28T21:12:19Z", "author": {"login": "ShaneBeee"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdgvyRyAH2gAyNTI4ODEwNDc3OjM5NWM0M2Y2YWRmMWQ2ZGVjYjUwMGZlODAwMTdlMzU1NzEwYjExY2Y=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdhCuvcAH2gAyNTI4ODEwNDc3OmQwMWJjMTI4YTZjMWM2Zjk0ZmZiYWFkZTU3ODU5OTM0MzQxYmJjMDQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "395c43f6adf1d6decb500fe80017e355710b11cf", "author": {"user": {"login": "ShaneBeee", "name": "Shane Bee"}}, "url": "https://github.com/SkriptLang/Skript/commit/395c43f6adf1d6decb500fe80017e355710b11cf", "committedDate": "2020-11-27T23:03:16Z", "message": "build.gradle - update Paper version"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eff5c84698f38c62fcbc45a7f32d99935bdfdbb5", "author": {"user": {"login": "ShaneBeee", "name": "Shane Bee"}}, "url": "https://github.com/SkriptLang/Skript/commit/eff5c84698f38c62fcbc45a7f32d99935bdfdbb5", "committedDate": "2020-11-27T23:11:19Z", "message": "EffMessage - add support for optional sender\n- This allows the server to send a message as if a specific player sent it. Usefull with 1.16.4's new ignore player system."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "174d72825a6e1f34a7a39bb34f333f62b00e3bb6", "author": {"user": {"login": "ShaneBeee", "name": "Shane Bee"}}, "url": "https://github.com/SkriptLang/Skript/commit/174d72825a6e1f34a7a39bb34f333f62b00e3bb6", "committedDate": "2020-11-27T23:14:45Z", "message": "Merge branch 'dev-2.5' into feature/message-optional-sender"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1953e28eb8762d1a4febdfa5155c281b9a11bd86", "author": {"user": {"login": "ShaneBeee", "name": "Shane Bee"}}, "url": "https://github.com/SkriptLang/Skript/commit/1953e28eb8762d1a4febdfa5155c281b9a11bd86", "committedDate": "2020-11-27T23:42:13Z", "message": "EffMessage - add class check for CommandSender$Spigot (didnt exist in 1.9.4)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4bb39f620936c6e6b94a42f77fdf8942b4be1fd4", "author": {"user": {"login": "ShaneBeee", "name": "Shane Bee"}}, "url": "https://github.com/SkriptLang/Skript/commit/4bb39f620936c6e6b94a42f77fdf8942b4be1fd4", "committedDate": "2020-11-28T10:00:44Z", "message": "EffMessage - fix a booboo i made"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQwNDE2MDQ4", "url": "https://github.com/SkriptLang/Skript/pull/3577#pullrequestreview-540416048", "createdAt": "2020-11-28T20:32:03Z", "commit": {"oid": "4bb39f620936c6e6b94a42f77fdf8942b4be1fd4"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yOFQyMDozMjowM1rOH7dBTA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yOFQyMDozNDo1MFrOH7dCNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjEwMzUwMA==", "bodyText": "The chat blocking system doesn't work if you don't send it as a player, right? If so, maybe it'd be better to say something like: This allows the chat ignore system added in Minecraft 1.16.4 to block these messages\nUp for discussion :D", "url": "https://github.com/SkriptLang/Skript/pull/3577#discussion_r532103500", "createdAt": "2020-11-28T20:32:03Z", "author": {"login": "APickledWalrus"}, "path": "src/main/java/ch/njol/skript/effects/EffMessage.java", "diffHunk": "@@ -37,20 +40,34 @@\n import ch.njol.skript.util.chat.BungeeConverter;\n import ch.njol.skript.util.chat.ChatMessages;\n import ch.njol.util.Kleenean;\n+import net.md_5.bungee.api.chat.BaseComponent;\n+import net.md_5.bungee.api.chat.TextComponent;\n \n @Name(\"Message\")\n @Description({\"Sends a message to the given player. Only styles written\",\n-\t\t\"in given string or in <a href=expressions.html#ExprColoured>formatted expressions</a> will be parsed.\"})\n+\t\t\"in given string or in <a href=expressions.html#ExprColoured>formatted expressions</a> will be parsed.\",\n+\t\t\"Adding an optional sender allows the messages to be sent as if a specific player sent them.\",\n+\t\t\"This is useful with Minecraft 1.16.4's new chat ignore system.\"})", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4bb39f620936c6e6b94a42f77fdf8942b4be1fd4"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjEwMzczMw==", "bodyText": "I don't know if this really matters, but would it be better to just initialize the variable above?", "url": "https://github.com/SkriptLang/Skript/pull/3577#discussion_r532103733", "createdAt": "2020-11-28T20:34:50Z", "author": {"login": "APickledWalrus"}, "path": "src/main/java/ch/njol/skript/effects/EffMessage.java", "diffHunk": "@@ -37,20 +40,34 @@\n import ch.njol.skript.util.chat.BungeeConverter;\n import ch.njol.skript.util.chat.ChatMessages;\n import ch.njol.util.Kleenean;\n+import net.md_5.bungee.api.chat.BaseComponent;\n+import net.md_5.bungee.api.chat.TextComponent;\n \n @Name(\"Message\")\n @Description({\"Sends a message to the given player. Only styles written\",\n-\t\t\"in given string or in <a href=expressions.html#ExprColoured>formatted expressions</a> will be parsed.\"})\n+\t\t\"in given string or in <a href=expressions.html#ExprColoured>formatted expressions</a> will be parsed.\",\n+\t\t\"Adding an optional sender allows the messages to be sent as if a specific player sent them.\",\n+\t\t\"This is useful with Minecraft 1.16.4's new chat ignore system.\"})\n @Examples({\"message \\\"A wild %player% appeared!\\\"\",\n \t\t\"message \\\"This message is a distraction. Mwahaha!\\\"\",\n \t\t\"send \\\"Your kill streak is %{kill streak::%uuid of player%}%.\\\" to player\",\n \t\t\"if the targeted entity exists:\",\n-\t\t\"\tmessage \\\"You're currently looking at a %type of the targeted entity%!\\\"\"})\n-@Since(\"1.0, 2.2-dev26 (advanced features)\")\n+\t\t\"\\tmessage \\\"You're currently looking at a %type of the targeted entity%!\\\"\",\n+\t\t\"on chat:\",\n+\t\t\"\\tcancel event\",\n+\t\t\"\\tsend \\\"[%player%] >> %message%\\\" to all players from player\"})\n+@RequiredPlugins(\"Minecraft 1.16.4+ for optional sender\")\n+@Since(\"1.0, 2.2-dev26 (advanced features), INSERT VERSION (optional sender)\")\n public class EffMessage extends Effect {\n \t\n+\tprivate static final boolean SUPPORTS_SENDER;\n+\t\n \tstatic {\n-\t\tSkript.registerEffect(EffMessage.class, \"(message|send [message[s]]) %strings% [to %commandsenders%]\");\n+\t\tSUPPORTS_SENDER = Skript.classExists(\"org.bukkit.command.CommandSender$Spigot\") && Skript.methodExists(CommandSender.Spigot.class, \"sendMessage\", UUID.class, BaseComponent.class);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4bb39f620936c6e6b94a42f77fdf8942b4be1fd4"}, "originalPosition": 48}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "85116f2701e33dd6c0da20bd64d94bc00c0d2607", "author": {"user": {"login": "ShaneBeee", "name": "Shane Bee"}}, "url": "https://github.com/SkriptLang/Skript/commit/85116f2701e33dd6c0da20bd64d94bc00c0d2607", "committedDate": "2020-11-28T20:39:39Z", "message": "EffMessage - add better description"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQwNDE2NzE2", "url": "https://github.com/SkriptLang/Skript/pull/3577#pullrequestreview-540416716", "createdAt": "2020-11-28T20:45:26Z", "commit": {"oid": "85116f2701e33dd6c0da20bd64d94bc00c0d2607"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d01bc128a6c1c6f94ffbaade57859934341bbc04", "author": {"user": {"login": "ShaneBeee", "name": "Shane Bee"}}, "url": "https://github.com/SkriptLang/Skript/commit/d01bc128a6c1c6f94ffbaade57859934341bbc04", "committedDate": "2020-11-28T21:07:36Z", "message": "Merge branch 'dev-2.5' into feature/message-optional-sender"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2942, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}