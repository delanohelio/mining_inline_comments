{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkyNzMxNTA1", "number": 3403, "title": "Add Mending Event", "bodyText": "Description\nAdds full support for the PlayerItemMendEvent (event values and repair amount modification)\n\nTarget Minecraft Versions: 1.12.2+\nRequirements: None\nRelated Issues: #1385", "createdAt": "2020-09-24T22:28:52Z", "url": "https://github.com/SkriptLang/Skript/pull/3403", "merged": true, "mergeCommit": {"oid": "b1651d63e5fc32f49176040d6d1e3654f11248c2"}, "closed": true, "closedAt": "2020-10-04T23:15:24Z", "author": {"login": "APickledWalrus"}, "timelineItems": {"totalCount": 16, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdMISJHgH2gAyNDkyNzMxNTA1OjBkZDkxNDRkZjdhYTI5ZDlhOTlhMzVmNGMxZDVlNDM2MGEzMzA1YmQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdPXfzNgFqTUwMTY2NzUyNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "0dd9144df7aa29d9a99a35f4c1d5e4360a3305bd", "author": {"user": {"login": "APickledWalrus", "name": null}}, "url": "https://github.com/SkriptLang/Skript/commit/0dd9144df7aa29d9a99a35f4c1d5e4360a3305bd", "committedDate": "2020-09-24T21:43:23Z", "message": "Add Mending Event"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "33dc8a69e4e3e68029d9d8441e1fb6bc91ec6533", "author": {"user": {"login": "APickledWalrus", "name": null}}, "url": "https://github.com/SkriptLang/Skript/commit/33dc8a69e4e3e68029d9d8441e1fb6bc91ec6533", "committedDate": "2020-09-24T22:26:15Z", "message": "Small Modifcations\n\n- Changed event syntax\n- Reordered event value registration\n- Updated 'repair amount' docs"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk1OTk0NDEw", "url": "https://github.com/SkriptLang/Skript/pull/3403#pullrequestreview-495994410", "createdAt": "2020-09-24T22:31:20Z", "commit": {"oid": "33dc8a69e4e3e68029d9d8441e1fb6bc91ec6533"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQyMjozMToyMFrOHXuz3w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQyMjozMToyMFrOHXuz3w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDY0NjIzOQ==", "bodyText": "What do you think about changing this to something like \"Mending Repair Amount\"?\nIm only suggesting this, as \"Repair Amount\" is a bit vague and could easily confuse users, who might think this is for repairing in other scenarios", "url": "https://github.com/SkriptLang/Skript/pull/3403#discussion_r494646239", "createdAt": "2020-09-24T22:31:20Z", "author": {"login": "ShaneBeee"}, "path": "src/main/java/ch/njol/skript/expressions/ExprRepairAmount.java", "diffHunk": "@@ -0,0 +1,113 @@\n+/**\n+ *   This file is part of Skript.\n+ *\n+ *  Skript is free software: you can redistribute it and/or modify\n+ *  it under the terms of the GNU General Public License as published by\n+ *  the Free Software Foundation, either version 3 of the License, or\n+ *  (at your option) any later version.\n+ *\n+ *  Skript is distributed in the hope that it will be useful,\n+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ *  GNU General Public License for more details.\n+ *\n+ *  You should have received a copy of the GNU General Public License\n+ *  along with Skript.  If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ *\n+ * Copyright 2011-2017 Peter G\u00fcttinger and contributors\n+ */\n+package ch.njol.skript.expressions;\n+\n+import org.bukkit.event.Event;\n+import org.bukkit.event.player.PlayerItemMendEvent;\n+import org.eclipse.jdt.annotation.Nullable;\n+\n+import ch.njol.skript.ScriptLoader;\n+import ch.njol.skript.Skript;\n+import ch.njol.skript.classes.Changer.ChangeMode;\n+import ch.njol.skript.doc.Description;\n+import ch.njol.skript.doc.Examples;\n+import ch.njol.skript.doc.Name;\n+import ch.njol.skript.doc.Since;\n+import ch.njol.skript.lang.Expression;\n+import ch.njol.skript.lang.ExpressionType;\n+import ch.njol.skript.lang.SkriptParser.ParseResult;\n+import ch.njol.skript.lang.util.SimpleExpression;\n+import ch.njol.skript.log.ErrorQuality;\n+import ch.njol.util.Kleenean;\n+import ch.njol.util.coll.CollectionUtils;\n+\n+@Name(\"Repair Amount\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "33dc8a69e4e3e68029d9d8441e1fb6bc91ec6533"}, "originalPosition": 41}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk1OTk0NzE1", "url": "https://github.com/SkriptLang/Skript/pull/3403#pullrequestreview-495994715", "createdAt": "2020-09-24T22:32:07Z", "commit": {"oid": "33dc8a69e4e3e68029d9d8441e1fb6bc91ec6533"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQyMjozMjowN1rOHXu05g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQyMjozMjowN1rOHXu05g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDY0NjUwMg==", "bodyText": "You forgot breaks.", "url": "https://github.com/SkriptLang/Skript/pull/3403#discussion_r494646502", "createdAt": "2020-09-24T22:32:07Z", "author": {"login": "ShaneBeee"}, "path": "src/main/java/ch/njol/skript/expressions/ExprRepairAmount.java", "diffHunk": "@@ -0,0 +1,113 @@\n+/**\n+ *   This file is part of Skript.\n+ *\n+ *  Skript is free software: you can redistribute it and/or modify\n+ *  it under the terms of the GNU General Public License as published by\n+ *  the Free Software Foundation, either version 3 of the License, or\n+ *  (at your option) any later version.\n+ *\n+ *  Skript is distributed in the hope that it will be useful,\n+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ *  GNU General Public License for more details.\n+ *\n+ *  You should have received a copy of the GNU General Public License\n+ *  along with Skript.  If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ *\n+ * Copyright 2011-2017 Peter G\u00fcttinger and contributors\n+ */\n+package ch.njol.skript.expressions;\n+\n+import org.bukkit.event.Event;\n+import org.bukkit.event.player.PlayerItemMendEvent;\n+import org.eclipse.jdt.annotation.Nullable;\n+\n+import ch.njol.skript.ScriptLoader;\n+import ch.njol.skript.Skript;\n+import ch.njol.skript.classes.Changer.ChangeMode;\n+import ch.njol.skript.doc.Description;\n+import ch.njol.skript.doc.Examples;\n+import ch.njol.skript.doc.Name;\n+import ch.njol.skript.doc.Since;\n+import ch.njol.skript.lang.Expression;\n+import ch.njol.skript.lang.ExpressionType;\n+import ch.njol.skript.lang.SkriptParser.ParseResult;\n+import ch.njol.skript.lang.util.SimpleExpression;\n+import ch.njol.skript.log.ErrorQuality;\n+import ch.njol.util.Kleenean;\n+import ch.njol.util.coll.CollectionUtils;\n+\n+@Name(\"Repair Amount\")\n+@Description({\"The number of durability points an item is to be repaired in a mending event.\",\n+\t\t\t\" Modifying the repair amount will affect how much experience is given to the player after mending.\"})\n+@Examples({\"on item mend:\",\n+\t\t\"\\tset the repair amount to 100\"})\n+@Since(\"2.0\")\n+public class ExprRepairAmount extends SimpleExpression<Number> {\n+\n+\tstatic {\n+\t\tSkript.registerExpression(ExprRepairAmount.class, Number.class, ExpressionType.SIMPLE, \"[the] repair amount\");\n+\t}\n+\n+\t@Override\n+\tpublic boolean init(Expression<?>[] exprs, int matchedPattern, Kleenean isDelayed, ParseResult parseResult) {\n+\t\tif (!ScriptLoader.isCurrentEvent(PlayerItemMendEvent.class)) {\n+\t\t\tSkript.error(\"The 'repair amount' is only usable in item mend events\", ErrorQuality.SEMANTIC_ERROR);\n+\t\t\treturn false;\n+\t\t}\n+\t\treturn true;\n+\t}\n+\n+\t@Override\n+\tprotected Number[] get(final Event e) {\n+\t\treturn new Number[]{((PlayerItemMendEvent) e).getRepairAmount()};\n+\t}\n+\n+\t@Nullable\n+\t@Override\n+\tpublic Class<?>[] acceptChange(ChangeMode mode) {\n+\t\tswitch (mode) {\n+\t\t\tcase SET:\n+\t\t\tcase ADD:\n+\t\t\tcase REMOVE:\n+\t\t\t\treturn CollectionUtils.array(Number.class);\n+\t\t\tdefault:\n+\t\t\t\treturn null;\n+\t\t}\n+\t}\n+\n+\t@Override\n+\tpublic void change(Event event, @Nullable Object[] delta, ChangeMode mode) {\n+\t\tif (delta == null)\n+\t\t\treturn;\n+\t\tPlayerItemMendEvent e = (PlayerItemMendEvent) event;\n+\t\tint newLevel = ((Number) delta[0]).intValue();\n+\t\tswitch (mode) {\n+\t\t\tcase SET:\n+\t\t\t\te.setRepairAmount(newLevel);\n+\t\t\tcase ADD:\n+\t\t\t\te.setRepairAmount(e.getRepairAmount() + newLevel);\n+\t\t\tcase REMOVE:\n+\t\t\t\te.setRepairAmount(e.getRepairAmount() - newLevel);\n+\t\t\tdefault:\n+\t\t\t\tassert false;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "33dc8a69e4e3e68029d9d8441e1fb6bc91ec6533"}, "originalPosition": 94}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "579239f1daa5089a226657128b829b439e939495", "author": {"user": {"login": "APickledWalrus", "name": null}}, "url": "https://github.com/SkriptLang/Skript/commit/579239f1daa5089a226657128b829b439e939495", "committedDate": "2020-09-24T22:36:49Z", "message": "Rename and add breaks"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk1OTk3ODAy", "url": "https://github.com/SkriptLang/Skript/pull/3403#pullrequestreview-495997802", "createdAt": "2020-09-24T22:39:48Z", "commit": {"oid": "579239f1daa5089a226657128b829b439e939495"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQyMjozOTo0OFrOHXu_aQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQyMjozOTo0OFrOHXu_aQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDY0OTE5Mw==", "bodyText": "Dunno how I missed this, you going back in time? haha, as Im sure you know this should be \"INSERT VERSION\"", "url": "https://github.com/SkriptLang/Skript/pull/3403#discussion_r494649193", "createdAt": "2020-09-24T22:39:48Z", "author": {"login": "ShaneBeee"}, "path": "src/main/java/ch/njol/skript/expressions/ExprMendingRepairAmount.java", "diffHunk": "@@ -0,0 +1,116 @@\n+/**\n+ *   This file is part of Skript.\n+ *\n+ *  Skript is free software: you can redistribute it and/or modify\n+ *  it under the terms of the GNU General Public License as published by\n+ *  the Free Software Foundation, either version 3 of the License, or\n+ *  (at your option) any later version.\n+ *\n+ *  Skript is distributed in the hope that it will be useful,\n+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ *  GNU General Public License for more details.\n+ *\n+ *  You should have received a copy of the GNU General Public License\n+ *  along with Skript.  If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ *\n+ * Copyright 2011-2017 Peter G\u00fcttinger and contributors\n+ */\n+package ch.njol.skript.expressions;\n+\n+import org.bukkit.event.Event;\n+import org.bukkit.event.player.PlayerItemMendEvent;\n+import org.eclipse.jdt.annotation.Nullable;\n+\n+import ch.njol.skript.ScriptLoader;\n+import ch.njol.skript.Skript;\n+import ch.njol.skript.classes.Changer.ChangeMode;\n+import ch.njol.skript.doc.Description;\n+import ch.njol.skript.doc.Examples;\n+import ch.njol.skript.doc.Name;\n+import ch.njol.skript.doc.Since;\n+import ch.njol.skript.lang.Expression;\n+import ch.njol.skript.lang.ExpressionType;\n+import ch.njol.skript.lang.SkriptParser.ParseResult;\n+import ch.njol.skript.lang.util.SimpleExpression;\n+import ch.njol.skript.log.ErrorQuality;\n+import ch.njol.util.Kleenean;\n+import ch.njol.util.coll.CollectionUtils;\n+\n+@Name(\"Mending Repair Amount\")\n+@Description({\"The number of durability points an item is to be repaired in a mending event.\",\n+\t\t\t\" Modifying the repair amount will affect how much experience is given to the player after mending.\"})\n+@Examples({\"on item mend:\",\n+\t\t\"\\tset the mending repair amount to 100\"})\n+@Since(\"2.0\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "579239f1daa5089a226657128b829b439e939495"}, "originalPosition": 46}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1d0e10fbc2d7f161c5fced62290276778a905d50", "author": {"user": {"login": "APickledWalrus", "name": null}}, "url": "https://github.com/SkriptLang/Skript/commit/1d0e10fbc2d7f161c5fced62290276778a905d50", "committedDate": "2020-09-24T23:42:01Z", "message": "Fix Since Annotation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk2MDIwMjg2", "url": "https://github.com/SkriptLang/Skript/pull/3403#pullrequestreview-496020286", "createdAt": "2020-09-24T23:43:25Z", "commit": {"oid": "1d0e10fbc2d7f161c5fced62290276778a905d50"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1677f2f6e4a37ab22e027a583258978b36eb4300", "author": {"user": {"login": "APickledWalrus", "name": null}}, "url": "https://github.com/SkriptLang/Skript/commit/1677f2f6e4a37ab22e027a583258978b36eb4300", "committedDate": "2020-09-25T15:56:17Z", "message": "Merge branch 'dev-2.5' into feature/item-mend-event"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk3OTkyNzY2", "url": "https://github.com/SkriptLang/Skript/pull/3403#pullrequestreview-497992766", "createdAt": "2020-09-29T00:59:42Z", "commit": {"oid": "1677f2f6e4a37ab22e027a583258978b36eb4300"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQwMDo1OTo0M1rOHZUrFw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQwMTowMDoxM1rOHZUrmw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjMxNTE1OQ==", "bodyText": "Perhaps you could do\n\t\tswitch (mode) {\n\t\t\tcase SET:\n\t\t\t\tbreak;\n\t\t\tcase ADD:\n\t\t\t\tnewLevel += e.getRepairAmount();\n\t\t\t\tbreak;\n\t\t\tcase REMOVE:\n\t\t\t\tnewLevel -= e.getRepairAmount();\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tassert false;\n\t\t}\n\t\te.setRepairAmount(newLevel);", "url": "https://github.com/SkriptLang/Skript/pull/3403#discussion_r496315159", "createdAt": "2020-09-29T00:59:43Z", "author": {"login": "Wealthyturtle"}, "path": "src/main/java/ch/njol/skript/expressions/ExprMendingRepairAmount.java", "diffHunk": "@@ -0,0 +1,116 @@\n+/**\n+ *   This file is part of Skript.\n+ *\n+ *  Skript is free software: you can redistribute it and/or modify\n+ *  it under the terms of the GNU General Public License as published by\n+ *  the Free Software Foundation, either version 3 of the License, or\n+ *  (at your option) any later version.\n+ *\n+ *  Skript is distributed in the hope that it will be useful,\n+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ *  GNU General Public License for more details.\n+ *\n+ *  You should have received a copy of the GNU General Public License\n+ *  along with Skript.  If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ *\n+ * Copyright 2011-2017 Peter G\u00fcttinger and contributors\n+ */\n+package ch.njol.skript.expressions;\n+\n+import org.bukkit.event.Event;\n+import org.bukkit.event.player.PlayerItemMendEvent;\n+import org.eclipse.jdt.annotation.Nullable;\n+\n+import ch.njol.skript.ScriptLoader;\n+import ch.njol.skript.Skript;\n+import ch.njol.skript.classes.Changer.ChangeMode;\n+import ch.njol.skript.doc.Description;\n+import ch.njol.skript.doc.Examples;\n+import ch.njol.skript.doc.Name;\n+import ch.njol.skript.doc.Since;\n+import ch.njol.skript.lang.Expression;\n+import ch.njol.skript.lang.ExpressionType;\n+import ch.njol.skript.lang.SkriptParser.ParseResult;\n+import ch.njol.skript.lang.util.SimpleExpression;\n+import ch.njol.skript.log.ErrorQuality;\n+import ch.njol.util.Kleenean;\n+import ch.njol.util.coll.CollectionUtils;\n+\n+@Name(\"Mending Repair Amount\")\n+@Description({\"The number of durability points an item is to be repaired in a mending event.\",\n+\t\t\t\" Modifying the repair amount will affect how much experience is given to the player after mending.\"})\n+@Examples({\"on item mend:\",\n+\t\t\"\\tset the mending repair amount to 100\"})\n+@Since(\"INSERT VERSION\")\n+public class ExprMendingRepairAmount extends SimpleExpression<Number> {\n+\n+\tstatic {\n+\t\tSkript.registerExpression(ExprMendingRepairAmount.class, Number.class, ExpressionType.SIMPLE, \"[the] [mending] repair amount\");\n+\t}\n+\n+\t@Override\n+\tpublic boolean init(Expression<?>[] exprs, int matchedPattern, Kleenean isDelayed, ParseResult parseResult) {\n+\t\tif (!ScriptLoader.isCurrentEvent(PlayerItemMendEvent.class)) {\n+\t\t\tSkript.error(\"The 'mending repair amount' is only usable in item mend events\", ErrorQuality.SEMANTIC_ERROR);\n+\t\t\treturn false;\n+\t\t}\n+\t\treturn true;\n+\t}\n+\n+\t@Override\n+\tprotected Number[] get(final Event e) {\n+\t\treturn new Number[]{((PlayerItemMendEvent) e).getRepairAmount()};\n+\t}\n+\n+\t@Nullable\n+\t@Override\n+\tpublic Class<?>[] acceptChange(ChangeMode mode) {\n+\t\tswitch (mode) {\n+\t\t\tcase SET:\n+\t\t\tcase ADD:\n+\t\t\tcase REMOVE:\n+\t\t\t\treturn CollectionUtils.array(Number.class);\n+\t\t\tdefault:\n+\t\t\t\treturn null;\n+\t\t}\n+\t}\n+\n+\t@Override\n+\tpublic void change(Event event, @Nullable Object[] delta, ChangeMode mode) {\n+\t\tif (delta == null)\n+\t\t\treturn;\n+\t\tPlayerItemMendEvent e = (PlayerItemMendEvent) event;\n+\t\tint newLevel = ((Number) delta[0]).intValue();\n+\t\tswitch (mode) {\n+\t\t\tcase SET:\n+\t\t\t\te.setRepairAmount(newLevel);\n+\t\t\t\tbreak;\n+\t\t\tcase ADD:\n+\t\t\t\te.setRepairAmount(e.getRepairAmount() + newLevel);\n+\t\t\t\tbreak;\n+\t\t\tcase REMOVE:\n+\t\t\t\te.setRepairAmount(e.getRepairAmount() - newLevel);\n+\t\t\t\tbreak;\n+\t\t\tdefault:\n+\t\t\t\tassert false;\n+\t\t}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1677f2f6e4a37ab22e027a583258978b36eb4300"}, "originalPosition": 98}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjMxNTI5MQ==", "bodyText": "Might the RESET ChangeMode be applicable here?", "url": "https://github.com/SkriptLang/Skript/pull/3403#discussion_r496315291", "createdAt": "2020-09-29T01:00:13Z", "author": {"login": "Wealthyturtle"}, "path": "src/main/java/ch/njol/skript/expressions/ExprMendingRepairAmount.java", "diffHunk": "@@ -0,0 +1,116 @@\n+/**\n+ *   This file is part of Skript.\n+ *\n+ *  Skript is free software: you can redistribute it and/or modify\n+ *  it under the terms of the GNU General Public License as published by\n+ *  the Free Software Foundation, either version 3 of the License, or\n+ *  (at your option) any later version.\n+ *\n+ *  Skript is distributed in the hope that it will be useful,\n+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ *  GNU General Public License for more details.\n+ *\n+ *  You should have received a copy of the GNU General Public License\n+ *  along with Skript.  If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ *\n+ * Copyright 2011-2017 Peter G\u00fcttinger and contributors\n+ */\n+package ch.njol.skript.expressions;\n+\n+import org.bukkit.event.Event;\n+import org.bukkit.event.player.PlayerItemMendEvent;\n+import org.eclipse.jdt.annotation.Nullable;\n+\n+import ch.njol.skript.ScriptLoader;\n+import ch.njol.skript.Skript;\n+import ch.njol.skript.classes.Changer.ChangeMode;\n+import ch.njol.skript.doc.Description;\n+import ch.njol.skript.doc.Examples;\n+import ch.njol.skript.doc.Name;\n+import ch.njol.skript.doc.Since;\n+import ch.njol.skript.lang.Expression;\n+import ch.njol.skript.lang.ExpressionType;\n+import ch.njol.skript.lang.SkriptParser.ParseResult;\n+import ch.njol.skript.lang.util.SimpleExpression;\n+import ch.njol.skript.log.ErrorQuality;\n+import ch.njol.util.Kleenean;\n+import ch.njol.util.coll.CollectionUtils;\n+\n+@Name(\"Mending Repair Amount\")\n+@Description({\"The number of durability points an item is to be repaired in a mending event.\",\n+\t\t\t\" Modifying the repair amount will affect how much experience is given to the player after mending.\"})\n+@Examples({\"on item mend:\",\n+\t\t\"\\tset the mending repair amount to 100\"})\n+@Since(\"INSERT VERSION\")\n+public class ExprMendingRepairAmount extends SimpleExpression<Number> {\n+\n+\tstatic {\n+\t\tSkript.registerExpression(ExprMendingRepairAmount.class, Number.class, ExpressionType.SIMPLE, \"[the] [mending] repair amount\");\n+\t}\n+\n+\t@Override\n+\tpublic boolean init(Expression<?>[] exprs, int matchedPattern, Kleenean isDelayed, ParseResult parseResult) {\n+\t\tif (!ScriptLoader.isCurrentEvent(PlayerItemMendEvent.class)) {\n+\t\t\tSkript.error(\"The 'mending repair amount' is only usable in item mend events\", ErrorQuality.SEMANTIC_ERROR);\n+\t\t\treturn false;\n+\t\t}\n+\t\treturn true;\n+\t}\n+\n+\t@Override\n+\tprotected Number[] get(final Event e) {\n+\t\treturn new Number[]{((PlayerItemMendEvent) e).getRepairAmount()};\n+\t}\n+\n+\t@Nullable\n+\t@Override\n+\tpublic Class<?>[] acceptChange(ChangeMode mode) {\n+\t\tswitch (mode) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1677f2f6e4a37ab22e027a583258978b36eb4300"}, "originalPosition": 70}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "10dce5d66ff12eb656a68beb654120f36eb12ae0", "author": {"user": {"login": "APickledWalrus", "name": null}}, "url": "https://github.com/SkriptLang/Skript/commit/10dce5d66ff12eb656a68beb654120f36eb12ae0", "committedDate": "2020-10-03T15:02:39Z", "message": "RESET case"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAxNTg0Nzcx", "url": "https://github.com/SkriptLang/Skript/pull/3403#pullrequestreview-501584771", "createdAt": "2020-10-04T01:48:32Z", "commit": {"oid": "10dce5d66ff12eb656a68beb654120f36eb12ae0"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAxNjUyMzk5", "url": "https://github.com/SkriptLang/Skript/pull/3403#pullrequestreview-501652399", "createdAt": "2020-10-04T19:31:20Z", "commit": {"oid": "10dce5d66ff12eb656a68beb654120f36eb12ae0"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9d7a0253d594a6638f6c9cc36eeacfe1fce449f3", "author": {"user": {"login": "APickledWalrus", "name": null}}, "url": "https://github.com/SkriptLang/Skript/commit/9d7a0253d594a6638f6c9cc36eeacfe1fce449f3", "committedDate": "2020-10-04T22:54:02Z", "message": "Merge branch 'dev-2.5' into feature/item-mend-event"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "150580a708509e8e2965c84de926cde09e1ae139", "author": {"user": {"login": "APickledWalrus", "name": null}}, "url": "https://github.com/SkriptLang/Skript/commit/150580a708509e8e2965c84de926cde09e1ae139", "committedDate": "2020-10-04T23:07:51Z", "message": "Fix license header"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAxNjY3NTI0", "url": "https://github.com/SkriptLang/Skript/pull/3403#pullrequestreview-501667524", "createdAt": "2020-10-04T23:08:39Z", "commit": {"oid": "150580a708509e8e2965c84de926cde09e1ae139"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2992, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}