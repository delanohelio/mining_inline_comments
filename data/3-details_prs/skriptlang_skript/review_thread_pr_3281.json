{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY0Mjc2Nzk5", "number": 3281, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QwMDo0OToyOVrOEWChEA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOFQwMTozMjo0MFrOEWZt_g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkxNTQ1MzYwOnYy", "diffSide": "RIGHT", "path": "src/main/java/ch/njol/skript/util/slot/ItemFrameSlot.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QwMDo0OToyOVrOG9Iz_w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QwMDo1NTozN1rOG9I6AQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Njc2MDcwMw==", "bodyText": "Considering the behaviour of the item amount syntax, shouldn't this properly set the item's amount?", "url": "https://github.com/SkriptLang/Skript/pull/3281#discussion_r466760703", "createdAt": "2020-08-07T00:49:29Z", "author": {"login": "FranKusmiruk"}, "path": "src/main/java/ch/njol/skript/util/slot/ItemFrameSlot.java", "diffHunk": "@@ -48,6 +48,14 @@ public void setItem(@Nullable ItemStack item) {\n \t\tframe.setItem(item);\n \t}\n \t\n+\t@Override\n+\tpublic int getAmount() {\n+\t\treturn 1;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f0184696b1041a5667e353939200ee3b68b52908"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Njc2MjI0MQ==", "bodyText": "Item frames can only hold an item stack with size 1;", "url": "https://github.com/SkriptLang/Skript/pull/3281#discussion_r466762241", "createdAt": "2020-08-07T00:55:37Z", "author": {"login": "ShaneBeee"}, "path": "src/main/java/ch/njol/skript/util/slot/ItemFrameSlot.java", "diffHunk": "@@ -48,6 +48,14 @@ public void setItem(@Nullable ItemStack item) {\n \t\tframe.setItem(item);\n \t}\n \t\n+\t@Override\n+\tpublic int getAmount() {\n+\t\treturn 1;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Njc2MDcwMw=="}, "originalCommit": {"oid": "f0184696b1041a5667e353939200ee3b68b52908"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkxNTQ1NDAzOnYy", "diffSide": "RIGHT", "path": "src/main/java/ch/njol/skript/util/slot/EquipmentSlot.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QwMDo0OTo0NlrOG9I0Pg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QwMToxMDozNlrOG9JJRw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Njc2MDc2Ng==", "bodyText": "Is updating the inventory needed?", "url": "https://github.com/SkriptLang/Skript/pull/3281#discussion_r466760766", "createdAt": "2020-08-07T00:49:46Z", "author": {"login": "FranKusmiruk"}, "path": "src/main/java/ch/njol/skript/util/slot/EquipmentSlot.java", "diffHunk": "@@ -185,6 +185,21 @@ public void setItem(final @Nullable ItemStack item) {\n \t\t\tPlayerUtils.updateInventory((Player) e.getHolder());\n \t}\n \t\n+\t@Override\n+\tpublic int getAmount() {\n+\t\tItemStack item = slot.get(e);\n+\t\treturn item != null ? item.getAmount() : 0;\n+\t}\n+\t\n+\t@Override\n+\tpublic void setAmount(int amount) {\n+\t\tItemStack item = slot.get(e);\n+\t\tif (item != null)\n+\t\t\titem.setAmount(amount);\n+\t\tif (e.getHolder() instanceof Player)\n+\t\t\tPlayerUtils.updateInventory((Player) e.getHolder());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f0184696b1041a5667e353939200ee3b68b52908"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Njc2MjYyMg==", "bodyText": "I was going off of the setItem method, just made an assumption.\nI can test without. Will report back", "url": "https://github.com/SkriptLang/Skript/pull/3281#discussion_r466762622", "createdAt": "2020-08-07T00:57:12Z", "author": {"login": "ShaneBeee"}, "path": "src/main/java/ch/njol/skript/util/slot/EquipmentSlot.java", "diffHunk": "@@ -185,6 +185,21 @@ public void setItem(final @Nullable ItemStack item) {\n \t\t\tPlayerUtils.updateInventory((Player) e.getHolder());\n \t}\n \t\n+\t@Override\n+\tpublic int getAmount() {\n+\t\tItemStack item = slot.get(e);\n+\t\treturn item != null ? item.getAmount() : 0;\n+\t}\n+\t\n+\t@Override\n+\tpublic void setAmount(int amount) {\n+\t\tItemStack item = slot.get(e);\n+\t\tif (item != null)\n+\t\t\titem.setAmount(amount);\n+\t\tif (e.getHolder() instanceof Player)\n+\t\t\tPlayerUtils.updateInventory((Player) e.getHolder());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Njc2MDc2Ng=="}, "originalCommit": {"oid": "f0184696b1041a5667e353939200ee3b68b52908"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Njc2MzgyMg==", "bodyText": "Ok I removed it, tested, it works. So I will remove and push shortly!", "url": "https://github.com/SkriptLang/Skript/pull/3281#discussion_r466763822", "createdAt": "2020-08-07T01:01:56Z", "author": {"login": "ShaneBeee"}, "path": "src/main/java/ch/njol/skript/util/slot/EquipmentSlot.java", "diffHunk": "@@ -185,6 +185,21 @@ public void setItem(final @Nullable ItemStack item) {\n \t\t\tPlayerUtils.updateInventory((Player) e.getHolder());\n \t}\n \t\n+\t@Override\n+\tpublic int getAmount() {\n+\t\tItemStack item = slot.get(e);\n+\t\treturn item != null ? item.getAmount() : 0;\n+\t}\n+\t\n+\t@Override\n+\tpublic void setAmount(int amount) {\n+\t\tItemStack item = slot.get(e);\n+\t\tif (item != null)\n+\t\t\titem.setAmount(amount);\n+\t\tif (e.getHolder() instanceof Player)\n+\t\t\tPlayerUtils.updateInventory((Player) e.getHolder());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Njc2MDc2Ng=="}, "originalCommit": {"oid": "f0184696b1041a5667e353939200ee3b68b52908"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Njc2NjE1MQ==", "bodyText": "Pushed and ready to go!", "url": "https://github.com/SkriptLang/Skript/pull/3281#discussion_r466766151", "createdAt": "2020-08-07T01:10:36Z", "author": {"login": "ShaneBeee"}, "path": "src/main/java/ch/njol/skript/util/slot/EquipmentSlot.java", "diffHunk": "@@ -185,6 +185,21 @@ public void setItem(final @Nullable ItemStack item) {\n \t\t\tPlayerUtils.updateInventory((Player) e.getHolder());\n \t}\n \t\n+\t@Override\n+\tpublic int getAmount() {\n+\t\tItemStack item = slot.get(e);\n+\t\treturn item != null ? item.getAmount() : 0;\n+\t}\n+\t\n+\t@Override\n+\tpublic void setAmount(int amount) {\n+\t\tItemStack item = slot.get(e);\n+\t\tif (item != null)\n+\t\t\titem.setAmount(amount);\n+\t\tif (e.getHolder() instanceof Player)\n+\t\t\tPlayerUtils.updateInventory((Player) e.getHolder());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Njc2MDc2Ng=="}, "originalCommit": {"oid": "f0184696b1041a5667e353939200ee3b68b52908"}, "originalPosition": 16}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkxNTQ2MDQzOnYy", "diffSide": "RIGHT", "path": "src/main/java/ch/njol/skript/util/slot/DroppedItemSlot.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QwMDo1MzozOFrOG9I3_A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QwMTowMTozNlrOG9I_3w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Njc2MTcyNA==", "bodyText": "Does this actually set the amount of the ItemStack? Bukkit has this habit of passing a clone of the original object instead of the reference to keep immutability, kinda stupid but it's done practically everywhere so just making sure.", "url": "https://github.com/SkriptLang/Skript/pull/3281#discussion_r466761724", "createdAt": "2020-08-07T00:53:38Z", "author": {"login": "FranKusmiruk"}, "path": "src/main/java/ch/njol/skript/util/slot/DroppedItemSlot.java", "diffHunk": "@@ -48,7 +48,17 @@ public void setItem(@Nullable ItemStack item) {\n \t\tassert item != null;\n \t\tentity.setItemStack(item);\n \t}\n-\n+\t\n+\t@Override\n+\tpublic int getAmount() {\n+\t\treturn entity.getItemStack().getAmount();\n+\t}\n+\t\n+\t@Override\n+\tpublic void setAmount(int amount) {\n+\t\tentity.getItemStack().setAmount(amount);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f0184696b1041a5667e353939200ee3b68b52908"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Njc2Mjg1NQ==", "bodyText": "When I tested, it worked.", "url": "https://github.com/SkriptLang/Skript/pull/3281#discussion_r466762855", "createdAt": "2020-08-07T00:58:07Z", "author": {"login": "ShaneBeee"}, "path": "src/main/java/ch/njol/skript/util/slot/DroppedItemSlot.java", "diffHunk": "@@ -48,7 +48,17 @@ public void setItem(@Nullable ItemStack item) {\n \t\tassert item != null;\n \t\tentity.setItemStack(item);\n \t}\n-\n+\t\n+\t@Override\n+\tpublic int getAmount() {\n+\t\treturn entity.getItemStack().getAmount();\n+\t}\n+\t\n+\t@Override\n+\tpublic void setAmount(int amount) {\n+\t\tentity.getItemStack().setAmount(amount);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Njc2MTcyNA=="}, "originalCommit": {"oid": "f0184696b1041a5667e353939200ee3b68b52908"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Njc2MzE5Mg==", "bodyText": "If you so feel, I could get item stack, set amount, and set back the item stack, just for safety and the random event something changes in the future.", "url": "https://github.com/SkriptLang/Skript/pull/3281#discussion_r466763192", "createdAt": "2020-08-07T00:59:24Z", "author": {"login": "ShaneBeee"}, "path": "src/main/java/ch/njol/skript/util/slot/DroppedItemSlot.java", "diffHunk": "@@ -48,7 +48,17 @@ public void setItem(@Nullable ItemStack item) {\n \t\tassert item != null;\n \t\tentity.setItemStack(item);\n \t}\n-\n+\t\n+\t@Override\n+\tpublic int getAmount() {\n+\t\treturn entity.getItemStack().getAmount();\n+\t}\n+\t\n+\t@Override\n+\tpublic void setAmount(int amount) {\n+\t\tentity.getItemStack().setAmount(amount);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Njc2MTcyNA=="}, "originalCommit": {"oid": "f0184696b1041a5667e353939200ee3b68b52908"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Njc2Mzc0Mw==", "bodyText": "So Bukkit is actually passing the reference, it should be fine then, if they change this behaviour it's up to them at that point aynways so we can leave it this way.", "url": "https://github.com/SkriptLang/Skript/pull/3281#discussion_r466763743", "createdAt": "2020-08-07T01:01:36Z", "author": {"login": "FranKusmiruk"}, "path": "src/main/java/ch/njol/skript/util/slot/DroppedItemSlot.java", "diffHunk": "@@ -48,7 +48,17 @@ public void setItem(@Nullable ItemStack item) {\n \t\tassert item != null;\n \t\tentity.setItemStack(item);\n \t}\n-\n+\t\n+\t@Override\n+\tpublic int getAmount() {\n+\t\treturn entity.getItemStack().getAmount();\n+\t}\n+\t\n+\t@Override\n+\tpublic void setAmount(int amount) {\n+\t\tentity.getItemStack().setAmount(amount);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Njc2MTcyNA=="}, "originalCommit": {"oid": "f0184696b1041a5667e353939200ee3b68b52908"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkxOTI1NTAyOnYy", "diffSide": "RIGHT", "path": "src/main/java/ch/njol/skript/expressions/ExprItemAmount.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOFQwMTozMjo0MFrOG9sfAA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOFQwMjozNDo1OFrOG9s1xw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzM0NTE1Mg==", "bodyText": "Don't think we need an else here right? Actually you could probably just use a ternary for this", "url": "https://github.com/SkriptLang/Skript/pull/3281#discussion_r467345152", "createdAt": "2020-08-08T01:32:40Z", "author": {"login": "Wealthyturtle"}, "path": "src/main/java/ch/njol/skript/expressions/ExprItemAmount.java", "diffHunk": "@@ -57,8 +56,11 @@ protected String getPropertyName() {\n \t}\n \t\n \t@Override\n-\tpublic Number convert(final ItemType item) {\n-\t\treturn item.getAmount();\n+\tpublic Number convert(final Object item) {\n+    \tif (item instanceof ItemType)\n+    \t\treturn ((ItemType) item).getAmount();\n+    \telse", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2c8acb1f9ea1d382ce3a3d13c678f0b8936746c3"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzM1MDk4Mw==", "bodyText": "Changed \ud83d\udc4d", "url": "https://github.com/SkriptLang/Skript/pull/3281#discussion_r467350983", "createdAt": "2020-08-08T02:34:58Z", "author": {"login": "ShaneBeee"}, "path": "src/main/java/ch/njol/skript/expressions/ExprItemAmount.java", "diffHunk": "@@ -57,8 +56,11 @@ protected String getPropertyName() {\n \t}\n \t\n \t@Override\n-\tpublic Number convert(final ItemType item) {\n-\t\treturn item.getAmount();\n+\tpublic Number convert(final Object item) {\n+    \tif (item instanceof ItemType)\n+    \t\treturn ((ItemType) item).getAmount();\n+    \telse", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzM0NTE1Mg=="}, "originalCommit": {"oid": "2c8acb1f9ea1d382ce3a3d13c678f0b8936746c3"}, "originalPosition": 43}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 989, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}