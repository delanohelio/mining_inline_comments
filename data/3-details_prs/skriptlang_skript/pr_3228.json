{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU2Nzk2NjUw", "number": 3228, "title": "Created ExprDropsOfBlock to get the drops of a block", "bodyText": "The title says it all\nTarget Minecraft Versions: any\nRequirements: none \nRelated Issues: none", "createdAt": "2020-07-26T19:48:17Z", "url": "https://github.com/SkriptLang/Skript/pull/3228", "merged": true, "mergeCommit": {"oid": "7f4981f38730c1e83be910ee4043615864f2b000"}, "closed": true, "closedAt": "2020-10-06T22:37:03Z", "author": {"login": "DeltaRays"}, "timelineItems": {"totalCount": 30, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc4yeibgH2gAyNDU2Nzk2NjUwOjBlMzJiY2QxNjg1M2QxYjhiMDUyY2U4NmQwOTE4MDVmNzVlYmYzYzM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdQAO-lgFqTUwMzQwNzMxNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "0e32bcd16853d1b8b052ce86d091805f75ebf3c3", "author": {"user": {"login": "DeltaRays", "name": "DeltaRays"}}, "url": "https://github.com/SkriptLang/Skript/commit/0e32bcd16853d1b8b052ce86d091805f75ebf3c3", "committedDate": "2020-07-26T19:34:27Z", "message": "Created ExprDropsOfBlock to get the drops of a block"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "82dc6eee0c2799649ecd43184cd6a01a851e252e", "author": {"user": {"login": "DeltaRays", "name": "DeltaRays"}}, "url": "https://github.com/SkriptLang/Skript/commit/82dc6eee0c2799649ecd43184cd6a01a851e252e", "committedDate": "2020-07-26T19:45:05Z", "message": "Added SkriptDocs and a fall back in case people used 'as %entity%' when that didn't exist"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c6c4935076c83a0fd8cff5bd6ae0bd71ef5ea234", "author": {"user": {"login": "DeltaRays", "name": "DeltaRays"}}, "url": "https://github.com/SkriptLang/Skript/commit/c6c4935076c83a0fd8cff5bd6ae0bd71ef5ea234", "committedDate": "2020-07-26T19:47:41Z", "message": "Removed said fallback and added a check to see their version in the init method"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1Nzk4NDk0", "url": "https://github.com/SkriptLang/Skript/pull/3228#pullrequestreview-455798494", "createdAt": "2020-07-27T13:49:13Z", "commit": {"oid": "c6c4935076c83a0fd8cff5bd6ae0bd71ef5ea234"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QxMzo0OToxM1rOG3jSkw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QxMzo1MDozNVrOG3jWZw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDkwMzA1OQ==", "bodyText": "use ItemType, not ItemStack. Also, it should support multiple blocks", "url": "https://github.com/SkriptLang/Skript/pull/3228#discussion_r460903059", "createdAt": "2020-07-27T13:49:13Z", "author": {"login": "FranKusmiruk"}, "path": "src/main/java/ch/njol/skript/expressions/ExprDropsOfBlock.java", "diffHunk": "@@ -0,0 +1,106 @@\n+/**\n+ * This file is part of Skript.\n+ *\n+ * Skript is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Skript is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Skript.  If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ *\n+ * Copyright 2011-2017 Peter G\u00fcttinger and contributors\n+ */\n+package ch.njol.skript.expressions;\n+\n+import org.bukkit.block.Block;\n+import org.bukkit.entity.Entity;\n+import org.bukkit.event.Event;\n+import org.bukkit.inventory.ItemStack;\n+import org.eclipse.jdt.annotation.Nullable;\n+\n+import ch.njol.skript.Skript;\n+import ch.njol.skript.doc.Description;\n+import ch.njol.skript.doc.Examples;\n+import ch.njol.skript.doc.Name;\n+import ch.njol.skript.doc.Since;\n+import ch.njol.skript.lang.Expression;\n+import ch.njol.skript.lang.ExpressionType;\n+import ch.njol.skript.lang.SkriptParser.ParseResult;\n+import ch.njol.skript.lang.util.SimpleExpression;\n+import ch.njol.skript.log.ErrorQuality;\n+import ch.njol.util.Kleenean;\n+\n+@Name(\"Drops Of Block\")\n+@Description(\"A list of the items that will drop when a block is broken. Note that 'as %entity%' only works on minecraft 1.15+.\")\n+@Examples({\"on break of block:\",\n+\t\"\\tgive drops of block using player's tool to player\"})\n+@Since(\"INSERT VERSION\")\n+public class ExprDropsOfBlock extends SimpleExpression<ItemStack> {\n+\t\n+\tstatic {\n+\t\tSkript.registerExpression(ExprDropsOfBlock.class, ItemStack.class, ExpressionType.COMBINED, \"drops of %block% [(using|with) %-itemstack% [(1\u00a6as %-entity%)]]\", \"%block%'s drops [(using|with) %-itemstack% [(1\u00a6as %-entity%)]]\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c6c4935076c83a0fd8cff5bd6ae0bd71ef5ea234"}, "originalPosition": 48}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDkwNDAzOQ==", "bodyText": "We tend to directly not register the pattern in those cases, not sure if this is better though", "url": "https://github.com/SkriptLang/Skript/pull/3228#discussion_r460904039", "createdAt": "2020-07-27T13:50:35Z", "author": {"login": "FranKusmiruk"}, "path": "src/main/java/ch/njol/skript/expressions/ExprDropsOfBlock.java", "diffHunk": "@@ -0,0 +1,106 @@\n+/**\n+ * This file is part of Skript.\n+ *\n+ * Skript is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Skript is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Skript.  If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ *\n+ * Copyright 2011-2017 Peter G\u00fcttinger and contributors\n+ */\n+package ch.njol.skript.expressions;\n+\n+import org.bukkit.block.Block;\n+import org.bukkit.entity.Entity;\n+import org.bukkit.event.Event;\n+import org.bukkit.inventory.ItemStack;\n+import org.eclipse.jdt.annotation.Nullable;\n+\n+import ch.njol.skript.Skript;\n+import ch.njol.skript.doc.Description;\n+import ch.njol.skript.doc.Examples;\n+import ch.njol.skript.doc.Name;\n+import ch.njol.skript.doc.Since;\n+import ch.njol.skript.lang.Expression;\n+import ch.njol.skript.lang.ExpressionType;\n+import ch.njol.skript.lang.SkriptParser.ParseResult;\n+import ch.njol.skript.lang.util.SimpleExpression;\n+import ch.njol.skript.log.ErrorQuality;\n+import ch.njol.util.Kleenean;\n+\n+@Name(\"Drops Of Block\")\n+@Description(\"A list of the items that will drop when a block is broken. Note that 'as %entity%' only works on minecraft 1.15+.\")\n+@Examples({\"on break of block:\",\n+\t\"\\tgive drops of block using player's tool to player\"})\n+@Since(\"INSERT VERSION\")\n+public class ExprDropsOfBlock extends SimpleExpression<ItemStack> {\n+\t\n+\tstatic {\n+\t\tSkript.registerExpression(ExprDropsOfBlock.class, ItemStack.class, ExpressionType.COMBINED, \"drops of %block% [(using|with) %-itemstack% [(1\u00a6as %-entity%)]]\", \"%block%'s drops [(using|with) %-itemstack% [(1\u00a6as %-entity%)]]\");\n+\t}\n+\t\n+\t@SuppressWarnings(\"null\")\n+\tprivate Expression<Block> block;\n+\t@SuppressWarnings(\"null\")\n+\tprivate Expression<ItemStack> item;\n+\t@SuppressWarnings(\"null\")\n+\tprivate Expression<Entity> entity;\n+\t\n+\t@Override\n+\tpublic boolean init(Expression<?>[] exprs, int matchedPattern, Kleenean isDelayed, ParseResult parseResult) {\n+\t\tblock = (Expression<Block>) exprs[0];\n+\t\titem = (Expression<ItemStack>) exprs[1];\n+\t\tif (!Skript.methodExists(Block.class, \"getDrops\", ItemStack.class, Entity.class) && parseResult.mark == 1) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c6c4935076c83a0fd8cff5bd6ae0bd71ef5ea234"}, "originalPosition": 62}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d091d34260052e70e2914c7e9ccb3335419b10b8", "author": {"user": {"login": "DeltaRays", "name": "DeltaRays"}}, "url": "https://github.com/SkriptLang/Skript/commit/d091d34260052e70e2914c7e9ccb3335419b10b8", "committedDate": "2020-07-27T13:56:28Z", "message": "Merge branch 'master' into ExprDropsOfBlock"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "338c0d17f5a01770ba8a651c048a5c15f4748984", "author": {"user": {"login": "DeltaRays", "name": "DeltaRays"}}, "url": "https://github.com/SkriptLang/Skript/commit/338c0d17f5a01770ba8a651c048a5c15f4748984", "committedDate": "2020-07-27T16:17:18Z", "message": "Used ArrayList's instead of Arrays, updated everything to use itemtypes, and supported getting drops of multiple blocks"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4c1af7de9d1884b626465a7391f934e7fa8b2a94", "author": {"user": {"login": "DeltaRays", "name": "DeltaRays"}}, "url": "https://github.com/SkriptLang/Skript/commit/4c1af7de9d1884b626465a7391f934e7fa8b2a94", "committedDate": "2020-07-28T07:04:39Z", "message": "Merge branch 'master' into ExprDropsOfBlock"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU4Njk5Mjkx", "url": "https://github.com/SkriptLang/Skript/pull/3228#pullrequestreview-458699291", "createdAt": "2020-07-30T19:37:33Z", "commit": {"oid": "4c1af7de9d1884b626465a7391f934e7fa8b2a94"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxOTozNzozM1rOG5xGfA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxOTo0NjowMVrOG5xXHg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzIyNjQ5Mg==", "bodyText": "Can you put each pattern on it's own line?", "url": "https://github.com/SkriptLang/Skript/pull/3228#discussion_r463226492", "createdAt": "2020-07-30T19:37:33Z", "author": {"login": "APickledWalrus"}, "path": "src/main/java/ch/njol/skript/expressions/ExprDropsOfBlock.java", "diffHunk": "@@ -0,0 +1,130 @@\n+/**\n+ * This file is part of Skript.\n+ *\n+ * Skript is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Skript is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Skript.  If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ *\n+ * Copyright 2011-2017 Peter G\u00fcttinger and contributors\n+ */\n+package ch.njol.skript.expressions;\n+\n+import java.util.ArrayList;\n+\n+import org.bukkit.block.Block;\n+import org.bukkit.entity.Entity;\n+import org.bukkit.event.Event;\n+import org.bukkit.inventory.ItemStack;\n+import org.eclipse.jdt.annotation.Nullable;\n+\n+import ch.njol.skript.Skript;\n+import ch.njol.skript.aliases.ItemType;\n+import ch.njol.skript.doc.Description;\n+import ch.njol.skript.doc.Examples;\n+import ch.njol.skript.doc.Name;\n+import ch.njol.skript.doc.Since;\n+import ch.njol.skript.lang.Expression;\n+import ch.njol.skript.lang.ExpressionType;\n+import ch.njol.skript.lang.SkriptParser.ParseResult;\n+import ch.njol.skript.lang.util.SimpleExpression;\n+import ch.njol.skript.log.ErrorQuality;\n+import ch.njol.util.Kleenean;\n+\n+@Name(\"Drops Of Block\")\n+@Description(\"A list of the items that will drop when a block is broken. Note that 'as %entity%' only works on minecraft 1.15+.\")\n+@Examples({\"on break of block:\",\n+\t\"\\tgive drops of block using player's tool to player\"})\n+@Since(\"INSERT VERSION\")\n+public class ExprDropsOfBlock extends SimpleExpression<ItemType> {\n+\t\n+\tstatic {\n+\t\tSkript.registerExpression(ExprDropsOfBlock.class, ItemType.class, ExpressionType.COMBINED, \"drops of %blocks% [(using|with) %-itemtype% [(1\u00a6as %-entity%)]]\", \"%blocks%'s drops [(using|with) %-itemtype% [(1\u00a6as %-entity%)]]\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4c1af7de9d1884b626465a7391f934e7fa8b2a94"}, "originalPosition": 51}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzIyODQ4OA==", "bodyText": "The 'as %entity%' note would probably be better in the RequiredPlugins annotation", "url": "https://github.com/SkriptLang/Skript/pull/3228#discussion_r463228488", "createdAt": "2020-07-30T19:41:33Z", "author": {"login": "APickledWalrus"}, "path": "src/main/java/ch/njol/skript/expressions/ExprDropsOfBlock.java", "diffHunk": "@@ -0,0 +1,130 @@\n+/**\n+ * This file is part of Skript.\n+ *\n+ * Skript is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Skript is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Skript.  If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ *\n+ * Copyright 2011-2017 Peter G\u00fcttinger and contributors\n+ */\n+package ch.njol.skript.expressions;\n+\n+import java.util.ArrayList;\n+\n+import org.bukkit.block.Block;\n+import org.bukkit.entity.Entity;\n+import org.bukkit.event.Event;\n+import org.bukkit.inventory.ItemStack;\n+import org.eclipse.jdt.annotation.Nullable;\n+\n+import ch.njol.skript.Skript;\n+import ch.njol.skript.aliases.ItemType;\n+import ch.njol.skript.doc.Description;\n+import ch.njol.skript.doc.Examples;\n+import ch.njol.skript.doc.Name;\n+import ch.njol.skript.doc.Since;\n+import ch.njol.skript.lang.Expression;\n+import ch.njol.skript.lang.ExpressionType;\n+import ch.njol.skript.lang.SkriptParser.ParseResult;\n+import ch.njol.skript.lang.util.SimpleExpression;\n+import ch.njol.skript.log.ErrorQuality;\n+import ch.njol.util.Kleenean;\n+\n+@Name(\"Drops Of Block\")\n+@Description(\"A list of the items that will drop when a block is broken. Note that 'as %entity%' only works on minecraft 1.15+.\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4c1af7de9d1884b626465a7391f934e7fa8b2a94"}, "originalPosition": 44}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzIyODkxNg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\tSkript.error(\"'as %entity%' can only be used on minecraft 1.15+.\", ErrorQuality.SEMANTIC_ERROR);\n          \n          \n            \n            \t\t\tSkript.error(\"Getting the drops of a block as an entity is only possible on Minecraft 1.15+.\", ErrorQuality.SEMANTIC_ERROR);", "url": "https://github.com/SkriptLang/Skript/pull/3228#discussion_r463228916", "createdAt": "2020-07-30T19:42:24Z", "author": {"login": "APickledWalrus"}, "path": "src/main/java/ch/njol/skript/expressions/ExprDropsOfBlock.java", "diffHunk": "@@ -0,0 +1,130 @@\n+/**\n+ * This file is part of Skript.\n+ *\n+ * Skript is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Skript is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Skript.  If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ *\n+ * Copyright 2011-2017 Peter G\u00fcttinger and contributors\n+ */\n+package ch.njol.skript.expressions;\n+\n+import java.util.ArrayList;\n+\n+import org.bukkit.block.Block;\n+import org.bukkit.entity.Entity;\n+import org.bukkit.event.Event;\n+import org.bukkit.inventory.ItemStack;\n+import org.eclipse.jdt.annotation.Nullable;\n+\n+import ch.njol.skript.Skript;\n+import ch.njol.skript.aliases.ItemType;\n+import ch.njol.skript.doc.Description;\n+import ch.njol.skript.doc.Examples;\n+import ch.njol.skript.doc.Name;\n+import ch.njol.skript.doc.Since;\n+import ch.njol.skript.lang.Expression;\n+import ch.njol.skript.lang.ExpressionType;\n+import ch.njol.skript.lang.SkriptParser.ParseResult;\n+import ch.njol.skript.lang.util.SimpleExpression;\n+import ch.njol.skript.log.ErrorQuality;\n+import ch.njol.util.Kleenean;\n+\n+@Name(\"Drops Of Block\")\n+@Description(\"A list of the items that will drop when a block is broken. Note that 'as %entity%' only works on minecraft 1.15+.\")\n+@Examples({\"on break of block:\",\n+\t\"\\tgive drops of block using player's tool to player\"})\n+@Since(\"INSERT VERSION\")\n+public class ExprDropsOfBlock extends SimpleExpression<ItemType> {\n+\t\n+\tstatic {\n+\t\tSkript.registerExpression(ExprDropsOfBlock.class, ItemType.class, ExpressionType.COMBINED, \"drops of %blocks% [(using|with) %-itemtype% [(1\u00a6as %-entity%)]]\", \"%blocks%'s drops [(using|with) %-itemtype% [(1\u00a6as %-entity%)]]\");\n+\t}\n+\t\n+\t@SuppressWarnings(\"null\")\n+\tprivate Expression<Block> block;\n+\t@SuppressWarnings(\"null\")\n+\tprivate Expression<ItemType> item;\n+\t@SuppressWarnings(\"null\")\n+\tprivate Expression<Entity> entity;\n+\t\n+\t@Override\n+\tpublic boolean init(Expression<?>[] exprs, int matchedPattern, Kleenean isDelayed, ParseResult parseResult) {\n+\t\tblock = (Expression<Block>) exprs[0];\n+\t\titem = (Expression<ItemType>) exprs[1];\n+\t\tif (!Skript.methodExists(Block.class, \"getDrops\", ItemStack.class, Entity.class) && parseResult.mark == 1) {\n+\t\t\tSkript.error(\"'as %entity%' can only be used on minecraft 1.15+.\", ErrorQuality.SEMANTIC_ERROR);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4c1af7de9d1884b626465a7391f934e7fa8b2a94"}, "originalPosition": 66}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzIzMDc1MA==", "bodyText": "Could you add the using %itemtype% and as %entity% to this?", "url": "https://github.com/SkriptLang/Skript/pull/3228#discussion_r463230750", "createdAt": "2020-07-30T19:46:01Z", "author": {"login": "APickledWalrus"}, "path": "src/main/java/ch/njol/skript/expressions/ExprDropsOfBlock.java", "diffHunk": "@@ -0,0 +1,130 @@\n+/**\n+ * This file is part of Skript.\n+ *\n+ * Skript is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Skript is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Skript.  If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ *\n+ * Copyright 2011-2017 Peter G\u00fcttinger and contributors\n+ */\n+package ch.njol.skript.expressions;\n+\n+import java.util.ArrayList;\n+\n+import org.bukkit.block.Block;\n+import org.bukkit.entity.Entity;\n+import org.bukkit.event.Event;\n+import org.bukkit.inventory.ItemStack;\n+import org.eclipse.jdt.annotation.Nullable;\n+\n+import ch.njol.skript.Skript;\n+import ch.njol.skript.aliases.ItemType;\n+import ch.njol.skript.doc.Description;\n+import ch.njol.skript.doc.Examples;\n+import ch.njol.skript.doc.Name;\n+import ch.njol.skript.doc.Since;\n+import ch.njol.skript.lang.Expression;\n+import ch.njol.skript.lang.ExpressionType;\n+import ch.njol.skript.lang.SkriptParser.ParseResult;\n+import ch.njol.skript.lang.util.SimpleExpression;\n+import ch.njol.skript.log.ErrorQuality;\n+import ch.njol.util.Kleenean;\n+\n+@Name(\"Drops Of Block\")\n+@Description(\"A list of the items that will drop when a block is broken. Note that 'as %entity%' only works on minecraft 1.15+.\")\n+@Examples({\"on break of block:\",\n+\t\"\\tgive drops of block using player's tool to player\"})\n+@Since(\"INSERT VERSION\")\n+public class ExprDropsOfBlock extends SimpleExpression<ItemType> {\n+\t\n+\tstatic {\n+\t\tSkript.registerExpression(ExprDropsOfBlock.class, ItemType.class, ExpressionType.COMBINED, \"drops of %blocks% [(using|with) %-itemtype% [(1\u00a6as %-entity%)]]\", \"%blocks%'s drops [(using|with) %-itemtype% [(1\u00a6as %-entity%)]]\");\n+\t}\n+\t\n+\t@SuppressWarnings(\"null\")\n+\tprivate Expression<Block> block;\n+\t@SuppressWarnings(\"null\")\n+\tprivate Expression<ItemType> item;\n+\t@SuppressWarnings(\"null\")\n+\tprivate Expression<Entity> entity;\n+\t\n+\t@Override\n+\tpublic boolean init(Expression<?>[] exprs, int matchedPattern, Kleenean isDelayed, ParseResult parseResult) {\n+\t\tblock = (Expression<Block>) exprs[0];\n+\t\titem = (Expression<ItemType>) exprs[1];\n+\t\tif (!Skript.methodExists(Block.class, \"getDrops\", ItemStack.class, Entity.class) && parseResult.mark == 1) {\n+\t\t\tSkript.error(\"'as %entity%' can only be used on minecraft 1.15+.\", ErrorQuality.SEMANTIC_ERROR);\n+\t\t\treturn false;\n+\t\t}\n+\t\tentity = (Expression<Entity>) exprs[2];\n+\t\treturn true;\n+\t}\n+\t\n+\t@Nullable\n+\t@Override\n+\t@SuppressWarnings(\"null\")\n+\tprotected ItemType[] get(Event e) {\n+\t\t@Nullable\n+\t\tBlock[] blocks = this.block.getArray(e);\n+\t\tif (block != null) {\n+\t\t\tif (this.item == null) {\n+\t\t\t\tArrayList<ItemType> list = new ArrayList<>();\n+\t\t\t\tfor (Block block : blocks) {\n+\t\t\t\t\tItemStack[] drops = block.getDrops().toArray(new ItemStack[0]);\n+\t\t\t\t\tfor (ItemStack drop : drops) {\n+\t\t\t\t\t\tlist.add(new ItemType(drop));\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\t\t\t\treturn list.toArray(new ItemType[0]);\n+\t\t\t} else if (this.entity != null) {\n+\t\t\t\tItemType item = this.item.getSingle(e);\n+\t\t\t\tEntity entity = this.entity.getSingle(e);\n+\t\t\t\tArrayList<ItemType> list = new ArrayList<>();\n+\t\t\t\tfor (Block block : blocks) {\n+\t\t\t\t\tItemStack[] drops = block.getDrops(item.getRandom(), entity).toArray(new ItemStack[0]);\n+\t\t\t\t\tfor (ItemStack drop : drops) {\n+\t\t\t\t\t\tlist.add(new ItemType(drop));\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\t\t\t\treturn list.toArray(new ItemType[0]);\n+\t\t\t} else {\n+\t\t\t\tItemType item = this.item.getSingle(e);\n+\t\t\t\tArrayList<ItemType> list = new ArrayList<>();\n+\t\t\t\tfor (Block block : blocks) {\n+\t\t\t\t\tItemStack[] drops = block.getDrops(item.getRandom()).toArray(new ItemStack[0]);\n+\t\t\t\t\tfor (ItemStack drop : drops) {\n+\t\t\t\t\t\tlist.add(new ItemType(drop));\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\t\t\t\treturn list.toArray(new ItemType[0]);\n+\t\t\t}\n+\t\t}\n+\t\treturn null;\n+\t}\n+\t\n+\t@Override\n+\tpublic boolean isSingle() {\n+\t\treturn false;\n+\t}\n+\t\n+\t@Override\n+\tpublic Class<? extends ItemType> getReturnType() {\n+\t\treturn ItemType.class;\n+\t}\n+\t\n+\t@Override\n+\tpublic String toString(@Nullable Event e, boolean debug) {\n+\t\treturn \"drops of \" + block.toString(e, debug);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4c1af7de9d1884b626465a7391f934e7fa8b2a94"}, "originalPosition": 127}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "15e7f8ac0ff83456f626f7e7340f02ab471fb455", "author": {"user": {"login": "DeltaRays", "name": "DeltaRays"}}, "url": "https://github.com/SkriptLang/Skript/commit/15e7f8ac0ff83456f626f7e7340f02ab471fb455", "committedDate": "2020-07-30T22:12:21Z", "message": "Merge branch 'master' into ExprDropsOfBlock"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "787531a5ef758cf1b905d8a9a5d5eae9293dfb6f", "author": {"user": {"login": "DeltaRays", "name": "DeltaRays"}}, "url": "https://github.com/SkriptLang/Skript/commit/787531a5ef758cf1b905d8a9a5d5eae9293dfb6f", "committedDate": "2020-07-30T22:13:50Z", "message": "Fixed everything"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6d4926e43d754569cce9ac0fb1e85f4ca29c17e0", "author": {"user": {"login": "DeltaRays", "name": "DeltaRays"}}, "url": "https://github.com/SkriptLang/Skript/commit/6d4926e43d754569cce9ac0fb1e85f4ca29c17e0", "committedDate": "2020-07-30T22:14:04Z", "message": "Merge remote-tracking branch 'origin/ExprDropsOfBlock' into ExprDropsOfBlock"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d77bbe1b31103d9153ec117d52a79e567af59d8c", "author": {"user": {"login": "DeltaRays", "name": "DeltaRays"}}, "url": "https://github.com/SkriptLang/Skript/commit/d77bbe1b31103d9153ec117d52a79e567af59d8c", "committedDate": "2020-08-02T16:16:39Z", "message": "Merge branch 'master' into ExprDropsOfBlock"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "26050ee9b67cb3b814957f0df0ec501cdad56f0d", "author": {"user": {"login": "DeltaRays", "name": "DeltaRays"}}, "url": "https://github.com/SkriptLang/Skript/commit/26050ee9b67cb3b814957f0df0ec501cdad56f0d", "committedDate": "2020-09-08T18:18:08Z", "message": "Merge branch 'master' into ExprDropsOfBlock"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk3MDIxOTEw", "url": "https://github.com/SkriptLang/Skript/pull/3228#pullrequestreview-497021910", "createdAt": "2020-09-26T18:13:41Z", "commit": {"oid": "26050ee9b67cb3b814957f0df0ec501cdad56f0d"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNlQxODoxMzo0MlrOHYhyqA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNlQxODoxMzo0MlrOHYhyqA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTQ4MTUxMg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\t\"drops of %blocks% [(using|with) %-itemtype% [(1\u00a6as %-entity%)]]\",\n          \n          \n            \n            \t\t\t\"(all of the|all the|all) drops of %blocks% [(using|with) %-itemtype% [(1\u00a6as %-entity%)]]\",", "url": "https://github.com/SkriptLang/Skript/pull/3228#discussion_r495481512", "createdAt": "2020-09-26T18:13:42Z", "author": {"login": "APickledWalrus"}, "path": "src/main/java/ch/njol/skript/expressions/ExprDropsOfBlock.java", "diffHunk": "@@ -0,0 +1,134 @@\n+/**\n+ * This file is part of Skript.\n+ *\n+ * Skript is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Skript is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Skript.  If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ *\n+ * Copyright 2011-2017 Peter G\u00fcttinger and contributors\n+ */\n+package ch.njol.skript.expressions;\n+\n+import java.util.ArrayList;\n+\n+import org.bukkit.block.Block;\n+import org.bukkit.entity.Entity;\n+import org.bukkit.event.Event;\n+import org.bukkit.inventory.ItemStack;\n+import org.eclipse.jdt.annotation.Nullable;\n+\n+import ch.njol.skript.Skript;\n+import ch.njol.skript.aliases.ItemType;\n+import ch.njol.skript.doc.Description;\n+import ch.njol.skript.doc.Examples;\n+import ch.njol.skript.doc.Name;\n+import ch.njol.skript.doc.RequiredPlugins;\n+import ch.njol.skript.doc.Since;\n+import ch.njol.skript.lang.Expression;\n+import ch.njol.skript.lang.ExpressionType;\n+import ch.njol.skript.lang.SkriptParser.ParseResult;\n+import ch.njol.skript.lang.util.SimpleExpression;\n+import ch.njol.skript.log.ErrorQuality;\n+import ch.njol.util.Kleenean;\n+\n+@Name(\"Drops Of Block\")\n+@Description(\"A list of the items that will drop when a block is broken.\")\n+@RequiredPlugins(\"Minecraft 1.15+ ('as %entity%')\")\n+@Examples({\"on break of block:\",\n+\t\"\\tgive drops of block using player's tool to player\"})\n+@Since(\"INSERT VERSION\")\n+public class ExprDropsOfBlock extends SimpleExpression<ItemType> {\n+\t\n+\tstatic {\n+\t\tSkript.registerExpression(ExprDropsOfBlock.class, ItemType.class, ExpressionType.COMBINED,\n+\t\t\t\"drops of %blocks% [(using|with) %-itemtype% [(1\u00a6as %-entity%)]]\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "26050ee9b67cb3b814957f0df0ec501cdad56f0d"}, "originalPosition": 54}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "61be4cd52087c4ffff402f46308416e59310e081", "author": {"user": {"login": "DeltaRays", "name": "DeltaRays"}}, "url": "https://github.com/SkriptLang/Skript/commit/61be4cd52087c4ffff402f46308416e59310e081", "committedDate": "2020-09-26T18:31:44Z", "message": "Merge branch 'master' into ExprDropsOfBlock"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d547283e0566f6368b058e77632d8e70ad036c3b", "author": {"user": {"login": "DeltaRays", "name": "DeltaRays"}}, "url": "https://github.com/SkriptLang/Skript/commit/d547283e0566f6368b058e77632d8e70ad036c3b", "committedDate": "2020-09-26T18:51:36Z", "message": "Updated the pattern"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk3MDM1Njc1", "url": "https://github.com/SkriptLang/Skript/pull/3228#pullrequestreview-497035675", "createdAt": "2020-09-26T22:43:04Z", "commit": {"oid": "d547283e0566f6368b058e77632d8e70ad036c3b"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNlQyMjo0MzowNFrOHYjFeA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNlQyMjo0MzowNFrOHYjFeA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTUwMjcxMg==", "bodyText": "My suggestion was flawed - sorry about that!\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\t\"[(all|all [of] the)] drops of %blocks% [(using|with) %-itemtype% [(1\u00a6as %-entity%)]]\",\n          \n          \n            \n            \t\t\t\"[(all|the|all [of] the)] drops of %blocks% [(using|with) %-itemtype% [(1\u00a6as %-entity%)]]\",", "url": "https://github.com/SkriptLang/Skript/pull/3228#discussion_r495502712", "createdAt": "2020-09-26T22:43:04Z", "author": {"login": "APickledWalrus"}, "path": "src/main/java/ch/njol/skript/expressions/ExprDropsOfBlock.java", "diffHunk": "@@ -0,0 +1,134 @@\n+/**\n+ * This file is part of Skript.\n+ *\n+ * Skript is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Skript is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Skript.  If not, see <http://www.gnu.org/licenses/>.\n+ *\n+ *\n+ * Copyright 2011-2017 Peter G\u00fcttinger and contributors\n+ */\n+package ch.njol.skript.expressions;\n+\n+import java.util.ArrayList;\n+\n+import org.bukkit.block.Block;\n+import org.bukkit.entity.Entity;\n+import org.bukkit.event.Event;\n+import org.bukkit.inventory.ItemStack;\n+import org.eclipse.jdt.annotation.Nullable;\n+\n+import ch.njol.skript.Skript;\n+import ch.njol.skript.aliases.ItemType;\n+import ch.njol.skript.doc.Description;\n+import ch.njol.skript.doc.Examples;\n+import ch.njol.skript.doc.Name;\n+import ch.njol.skript.doc.RequiredPlugins;\n+import ch.njol.skript.doc.Since;\n+import ch.njol.skript.lang.Expression;\n+import ch.njol.skript.lang.ExpressionType;\n+import ch.njol.skript.lang.SkriptParser.ParseResult;\n+import ch.njol.skript.lang.util.SimpleExpression;\n+import ch.njol.skript.log.ErrorQuality;\n+import ch.njol.util.Kleenean;\n+\n+@Name(\"Drops Of Block\")\n+@Description(\"A list of the items that will drop when a block is broken.\")\n+@RequiredPlugins(\"Minecraft 1.15+ ('as %entity%')\")\n+@Examples({\"on break of block:\",\n+\t\"\\tgive drops of block using player's tool to player\"})\n+@Since(\"INSERT VERSION\")\n+public class ExprDropsOfBlock extends SimpleExpression<ItemType> {\n+\t\n+\tstatic {\n+\t\tSkript.registerExpression(ExprDropsOfBlock.class, ItemType.class, ExpressionType.COMBINED,\n+\t\t\t\"[(all|all [of] the)] drops of %blocks% [(using|with) %-itemtype% [(1\u00a6as %-entity%)]]\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d547283e0566f6368b058e77632d8e70ad036c3b"}, "originalPosition": 54}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6ec2e368cf5a914775b9cedbc023eeaa9b32786f", "author": {"user": {"login": "DeltaRays", "name": "DeltaRays"}}, "url": "https://github.com/SkriptLang/Skript/commit/6ec2e368cf5a914775b9cedbc023eeaa9b32786f", "committedDate": "2020-09-27T04:35:13Z", "message": "Update src/main/java/ch/njol/skript/expressions/ExprDropsOfBlock.java\n\nCo-authored-by: APickledWalrus <apickledwalrus@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk3MDk5MTE1", "url": "https://github.com/SkriptLang/Skript/pull/3228#pullrequestreview-497099115", "createdAt": "2020-09-27T18:02:07Z", "commit": {"oid": "6ec2e368cf5a914775b9cedbc023eeaa9b32786f"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0c9eb2e7b3f463a2d14ddcdf39122bc5deb7d744", "author": {"user": {"login": "DeltaRays", "name": "DeltaRays"}}, "url": "https://github.com/SkriptLang/Skript/commit/0c9eb2e7b3f463a2d14ddcdf39122bc5deb7d744", "committedDate": "2020-09-28T20:37:57Z", "message": "Quick fix from phone"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e2d24957289433db4a9355cd3afb6980251044ea", "author": {"user": {"login": "ShaneBeee", "name": "Shane Bee"}}, "url": "https://github.com/SkriptLang/Skript/commit/e2d24957289433db4a9355cd3afb6980251044ea", "committedDate": "2020-10-05T06:46:02Z", "message": "Merge branch 'master' into ExprDropsOfBlock"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bf50fbf74fa9151c406ed03853720cde97928289", "author": {"user": {"login": "DeltaRays", "name": "DeltaRays"}}, "url": "https://github.com/SkriptLang/Skript/commit/bf50fbf74fa9151c406ed03853720cde97928289", "committedDate": "2020-10-05T15:45:16Z", "message": "Merge branch 'master' into ExprDropsOfBlock"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f7fb63f1d175f7b03ce653ea570993d7ea6af746", "author": {"user": {"login": "DeltaRays", "name": "DeltaRays"}}, "url": "https://github.com/SkriptLang/Skript/commit/f7fb63f1d175f7b03ce653ea570993d7ea6af746", "committedDate": "2020-10-05T15:50:42Z", "message": "Updated license"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8b23778bc87bce6717ca821b57b65c06f863fa5e", "author": {"user": {"login": "DeltaRays", "name": "DeltaRays"}}, "url": "https://github.com/SkriptLang/Skript/commit/8b23778bc87bce6717ca821b57b65c06f863fa5e", "committedDate": "2020-10-05T15:51:56Z", "message": "Broken files commit"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "07db4fbf909fd903f6f1f5efc313046998c93331", "author": {"user": {"login": "DeltaRays", "name": "DeltaRays"}}, "url": "https://github.com/SkriptLang/Skript/commit/07db4fbf909fd903f6f1f5efc313046998c93331", "committedDate": "2020-10-05T15:52:10Z", "message": "Merge remote-tracking branch 'origin/ExprDropsOfBlock' into ExprDropsOfBlock"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "810cb890dbe774c3559b5e6ddebeb72b07455311", "author": {"user": {"login": "ShaneBeee", "name": "Shane Bee"}}, "url": "https://github.com/SkriptLang/Skript/commit/810cb890dbe774c3559b5e6ddebeb72b07455311", "committedDate": "2020-10-06T22:28:21Z", "message": "Merge branch 'master' into ExprDropsOfBlock"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "291039a93f726f6706a92e15130edc0ad5d56eb5", "author": {"user": {"login": "ShaneBeee", "name": "Shane Bee"}}, "url": "https://github.com/SkriptLang/Skript/commit/291039a93f726f6706a92e15130edc0ad5d56eb5", "committedDate": "2020-10-06T22:28:53Z", "message": "Merge branch 'dev-2.5' into ExprDropsOfBlock"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7173f87a6aa51d6aba8b3ff773475aad6fa2447f", "author": {"user": {"login": "ShaneBeee", "name": "Shane Bee"}}, "url": "https://github.com/SkriptLang/Skript/commit/7173f87a6aa51d6aba8b3ff773475aad6fa2447f", "committedDate": "2020-10-06T22:31:40Z", "message": "Merge branch 'dev-2.5' into ExprDropsOfBlock"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAzNDA2OTE1", "url": "https://github.com/SkriptLang/Skript/pull/3228#pullrequestreview-503406915", "createdAt": "2020-10-06T22:35:26Z", "commit": {"oid": "7173f87a6aa51d6aba8b3ff773475aad6fa2447f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAzNDA3MzE3", "url": "https://github.com/SkriptLang/Skript/pull/3228#pullrequestreview-503407317", "createdAt": "2020-10-06T22:36:23Z", "commit": {"oid": "7173f87a6aa51d6aba8b3ff773475aad6fa2447f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3105, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}