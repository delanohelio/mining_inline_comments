{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQ0MTYzNTU3", "number": 3183, "title": "Cache exception handling improvement", "bodyText": "This PR introduces cache exception handling in the EntityCache class and its subclasses.\nRelated Issue\nn/a\nDescription of the solution adopted\nCache errors are usually handled by the cache client (that implements the JCache interface). However, in some cases the exceptions are thrown by the cache client itself (e.g. a timeout exception). Since we are agnostic w.r.t. the underlying JCache implementation, we cannot catch precise exceptions. Thus, this PR introduces a way to treat such exceptions properly, in a conservative way w.r.t. the data, and to log them via the logger and the metrics.\nScreenshots\nn/a\nAny side note on the changes made\nn/a", "createdAt": "2020-12-22T14:37:45Z", "url": "https://github.com/eclipse/kapua/pull/3183", "merged": true, "mergeCommit": {"oid": "8b0622fd3bb399a03a7e3c57d7e2ca32ef507093"}, "closed": true, "closedAt": "2021-01-12T13:37:54Z", "author": {"login": "gbarbon"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdvJG_-AFqTU2NTUyNzc5OA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdvJlLnABqjQxOTE4MzY2ODA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY1NTI3Nzk4", "url": "https://github.com/eclipse/kapua/pull/3183#pullrequestreview-565527798", "createdAt": "2021-01-11T16:28:27Z", "commit": {"oid": "37973634af7da331625519218540cb0c7199bda0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xMVQxNjoyODoyN1rOIRdTAQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xMVQxNjoyODoyN1rOIRdTAQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NTE3NjcwNQ==", "bodyText": "please remove the space :)", "url": "https://github.com/eclipse/kapua/pull/3183#discussion_r555176705", "createdAt": "2021-01-11T16:28:27Z", "author": {"login": "riccardomodanese"}, "path": "commons/src/main/java/org/eclipse/kapua/commons/service/internal/cache/EntityCache.java", "diffHunk": "@@ -146,7 +176,7 @@ protected KapuaEntity checkResult(KapuaId scopeId, KapuaEntity entity) {\n      * This mimics the checks that are performed in the 'find' method of the {@link org.eclipse.kapua.commons.service.internal.ServiceDAO} class.\n      *\n      * @param scopeId a {@link KapuaId} representing the scopeId\n-     * @param entity the {@link KapuaListResult} entity to be checked\n+     * @param entity  the {@link KapuaListResult} entity to be checked", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "37973634af7da331625519218540cb0c7199bda0"}, "originalPosition": 114}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY1NTI3ODgw", "url": "https://github.com/eclipse/kapua/pull/3183#pullrequestreview-565527880", "createdAt": "2021-01-11T16:28:33Z", "commit": {"oid": "37973634af7da331625519218540cb0c7199bda0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xMVQxNjoyODozM1rOIRdTNw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xMVQxNjoyODozM1rOIRdTNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NTE3Njc1OQ==", "bodyText": "please remove the space :)", "url": "https://github.com/eclipse/kapua/pull/3183#discussion_r555176759", "createdAt": "2021-01-11T16:28:33Z", "author": {"login": "riccardomodanese"}, "path": "commons/src/main/java/org/eclipse/kapua/commons/service/internal/cache/EntityCache.java", "diffHunk": "@@ -122,7 +152,7 @@ public KapuaListResult removeList(KapuaId scopeId, Serializable id) {\n      * This mimics the checks that are performed in the 'find' method of the {@link org.eclipse.kapua.commons.service.internal.ServiceDAO} class.\n      *\n      * @param scopeId a {@link KapuaId} representing the scopeId\n-     * @param entity the {@link KapuaEntity} to be checked\n+     * @param entity  the {@link KapuaEntity} to be checked", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "37973634af7da331625519218540cb0c7199bda0"}, "originalPosition": 105}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY1NTMzNDQ1", "url": "https://github.com/eclipse/kapua/pull/3183#pullrequestreview-565533445", "createdAt": "2021-01-11T16:34:33Z", "commit": {"oid": "37973634af7da331625519218540cb0c7199bda0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY1NTMzODky", "url": "https://github.com/eclipse/kapua/pull/3183#pullrequestreview-565533892", "createdAt": "2021-01-11T16:35:03Z", "commit": {"oid": "37973634af7da331625519218540cb0c7199bda0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bda35323aaf23eefd010c8d78a57291e900e9c95", "author": {"user": {"login": "gbarbon", "name": "Gianluca Barbon"}}, "url": "https://github.com/eclipse/kapua/commit/bda35323aaf23eefd010c8d78a57291e900e9c95", "committedDate": "2021-01-11T17:01:06Z", "message": "Improved cache exception handling\n\nSigned-off-by: Gianluca Barbon <gianluca.barbon@eurotech.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "37973634af7da331625519218540cb0c7199bda0", "author": {"user": {"login": "gbarbon", "name": "Gianluca Barbon"}}, "url": "https://github.com/eclipse/kapua/commit/37973634af7da331625519218540cb0c7199bda0", "committedDate": "2020-12-22T14:29:11Z", "message": "Improved cache exception handling\n\nSigned-off-by: Gianluca Barbon <gianluca.barbon@eurotech.com>"}, "afterCommit": {"oid": "bda35323aaf23eefd010c8d78a57291e900e9c95", "author": {"user": {"login": "gbarbon", "name": "Gianluca Barbon"}}, "url": "https://github.com/eclipse/kapua/commit/bda35323aaf23eefd010c8d78a57291e900e9c95", "committedDate": "2021-01-11T17:01:06Z", "message": "Improved cache exception handling\n\nSigned-off-by: Gianluca Barbon <gianluca.barbon@eurotech.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 171, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}