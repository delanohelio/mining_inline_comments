{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkxMDc1NDUz", "number": 2903, "title": "RESTful HTTP return codes", "bodyText": "This PR changes the HTTP return codes of all the create methods to 201 Created and of all the delete methods (plus a few others where applicable) to 204 No Content\nRelated Issue\nNo related issue", "createdAt": "2020-03-19T15:36:23Z", "url": "https://github.com/eclipse/kapua/pull/2903", "merged": true, "mergeCommit": {"oid": "dbb7596c5c471bb7bfa3c6b5a0ff794cb09992c5"}, "closed": true, "closedAt": "2020-03-20T13:49:29Z", "author": {"login": "lorthirk"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcPKnDNgH2gAyMzkxMDc1NDUzOmRhZDc4YTgzNmIzMWEwMTk5YmE4Y2I0NGQyZjgyZDI4NmIwN2YxMWE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcPgzFDAFqTM3ODQ5NjU1NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "dad78a836b31a0199ba8cb44d2f82d286b07f11a", "author": {"user": {"login": "lorthirk", "name": "Claudio Mezzasalma"}}, "url": "https://github.com/eclipse/kapua/commit/dad78a836b31a0199ba8cb44d2f82d286b07f11a", "committedDate": "2020-03-19T11:56:39Z", "message": "Return 201 for Created and 204 for No Content\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d8a2962c47c40a2809defb427e97dad4b567d662", "author": {"user": {"login": "lorthirk", "name": "Claudio Mezzasalma"}}, "url": "https://github.com/eclipse/kapua/commit/d8a2962c47c40a2809defb427e97dad4b567d662", "committedDate": "2020-03-19T12:26:37Z", "message": "Throw KapuaException instead of Exception\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7fcaef2148895936d413c735f0842b52814fbaa1", "author": {"user": {"login": "lorthirk", "name": "Claudio Mezzasalma"}}, "url": "https://github.com/eclipse/kapua/commit/7fcaef2148895936d413c735f0842b52814fbaa1", "committedDate": "2020-03-19T12:36:31Z", "message": "Use base class for static references\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b55a00171dd5075ce3ecc7d9bb2ae791f76abeb8", "author": {"user": {"login": "lorthirk", "name": "Claudio Mezzasalma"}}, "url": "https://github.com/eclipse/kapua/commit/b55a00171dd5075ce3ecc7d9bb2ae791f76abeb8", "committedDate": "2020-03-19T14:57:38Z", "message": "Other Sonar fixes\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7846f60f8e40309f91b15f48ee3a8df722295015", "author": {"user": {"login": "lorthirk", "name": "Claudio Mezzasalma"}}, "url": "https://github.com/eclipse/kapua/commit/7846f60f8e40309f91b15f48ee3a8df722295015", "committedDate": "2020-03-19T15:43:56Z", "message": "Change return codes in OpenAPI spec\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4Mjk3MDcz", "url": "https://github.com/eclipse/kapua/pull/2903#pullrequestreview-378297073", "createdAt": "2020-03-20T08:27:53Z", "commit": {"oid": "7846f60f8e40309f91b15f48ee3a8df722295015"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQwODoyNzo1NFrOF5K7LA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQwODozMTozMlrOF5LBWA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTQ5MjE0MA==", "bodyText": "Use returnNoContent()", "url": "https://github.com/eclipse/kapua/pull/2903#discussion_r395492140", "createdAt": "2020-03-20T08:27:54Z", "author": {"login": "Coduz"}, "path": "rest-api/resources/src/main/java/org/eclipse/kapua/app/api/resources/v1/resources/DeviceManagementBundles.java", "diffHunk": "@@ -80,7 +81,7 @@ public Response start(\n             @PathParam(\"scopeId\") ScopeId scopeId,\n             @PathParam(\"deviceId\") EntityId deviceId,\n             @PathParam(\"bundleId\") String bundleId,\n-            @QueryParam(\"timeout\") Long timeout) throws Exception {\n+            @QueryParam(\"timeout\") Long timeout) throws KapuaException {\n         bundleService.start(scopeId, deviceId, bundleId, timeout);\n \n         return returnOk();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7846f60f8e40309f91b15f48ee3a8df722295015"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTQ5MjIxMA==", "bodyText": "Use returnNoContent()", "url": "https://github.com/eclipse/kapua/pull/2903#discussion_r395492210", "createdAt": "2020-03-20T08:28:03Z", "author": {"login": "Coduz"}, "path": "rest-api/resources/src/main/java/org/eclipse/kapua/app/api/resources/v1/resources/DeviceManagementBundles.java", "diffHunk": "@@ -105,7 +106,7 @@ public Response stop(\n             @PathParam(\"scopeId\") ScopeId scopeId,\n             @PathParam(\"deviceId\") EntityId deviceId,\n             @PathParam(\"bundleId\") String bundleId,\n-            @QueryParam(\"timeout\") Long timeout) throws Exception {\n+            @QueryParam(\"timeout\") Long timeout) throws KapuaException {\n         bundleService.stop(scopeId, deviceId, bundleId, timeout);\n \n         return returnOk();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7846f60f8e40309f91b15f48ee3a8df722295015"}, "originalPosition": 61}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTQ5MjU0MA==", "bodyText": "Use returnNoContent()\nAlso in updateComponent", "url": "https://github.com/eclipse/kapua/pull/2903#discussion_r395492540", "createdAt": "2020-03-20T08:28:44Z", "author": {"login": "Coduz"}, "path": "rest-api/resources/src/main/java/org/eclipse/kapua/app/api/resources/v1/resources/DeviceManagementConfigurations.java", "diffHunk": "@@ -81,7 +82,7 @@ public Response update(\n             @PathParam(\"scopeId\") ScopeId scopeId,\n             @PathParam(\"deviceId\") EntityId deviceId,\n             @QueryParam(\"timeout\") Long timeout,\n-            DeviceConfiguration deviceConfiguration) throws Exception {\n+            DeviceConfiguration deviceConfiguration) throws KapuaException {\n         configurationService.put(scopeId, deviceId, deviceConfiguration, timeout);\n \n         return returnOk();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7846f60f8e40309f91b15f48ee3a8df722295015"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTQ5MzUzMA==", "bodyText": "Use returnNoContent()", "url": "https://github.com/eclipse/kapua/pull/2903#discussion_r395493530", "createdAt": "2020-03-20T08:30:59Z", "author": {"login": "Coduz"}, "path": "rest-api/resources/src/main/java/org/eclipse/kapua/app/api/resources/v1/resources/DeviceManagementPackages.java", "diffHunk": "@@ -112,8 +119,10 @@ public Response uninstall(\n             @PathParam(\"scopeId\") ScopeId scopeId,\n             @PathParam(\"deviceId\") EntityId deviceId,\n             @QueryParam(\"timeout\") Long timeout,\n-            DevicePackageUninstallRequest packageUninstallRequest) throws Exception {\n-        packageService.uninstallExec(scopeId, deviceId, packageUninstallRequest, timeout);\n+            DevicePackageUninstallRequest packageUninstallRequest) throws KapuaException {\n+        DevicePackageUninstallOptions options = packageFactory.newDevicePackageUninstallOptions();\n+        options.setTimeout(timeout);\n+        packageService.uninstallExec(scopeId, deviceId, packageUninstallRequest, options);\n \n         return returnOk();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7846f60f8e40309f91b15f48ee3a8df722295015"}, "originalPosition": 86}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTQ5MzU3MQ==", "bodyText": "Use returnNoContent()", "url": "https://github.com/eclipse/kapua/pull/2903#discussion_r395493571", "createdAt": "2020-03-20T08:31:07Z", "author": {"login": "Coduz"}, "path": "rest-api/resources/src/main/java/org/eclipse/kapua/app/api/resources/v1/resources/DeviceManagementPackages.java", "diffHunk": "@@ -83,8 +88,10 @@ public Response download(\n             @PathParam(\"deviceId\") EntityId deviceId,\n             @QueryParam(\"timeout\") Long timeout,\n             DevicePackageDownloadRequest packageDownloadRequest)\n-            throws Exception {\n-        packageService.downloadExec(scopeId, deviceId, packageDownloadRequest, timeout);\n+            throws KapuaException {\n+        DevicePackageDownloadOptions options = packageFactory.newDevicePackageDownloadOptions();\n+        options.setTimeout(timeout);\n+        packageService.downloadExec(scopeId, deviceId, packageDownloadRequest, options);\n \n         return returnOk();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7846f60f8e40309f91b15f48ee3a8df722295015"}, "originalPosition": 64}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTQ5MzcyMA==", "bodyText": "Use returnNoContent()", "url": "https://github.com/eclipse/kapua/pull/2903#discussion_r395493720", "createdAt": "2020-03-20T08:31:32Z", "author": {"login": "Coduz"}, "path": "rest-api/resources/src/main/java/org/eclipse/kapua/app/api/resources/v1/resources/DeviceManagementSnapshots.java", "diffHunk": "@@ -83,7 +84,7 @@ public Response rollback(\n             @PathParam(\"scopeId\") ScopeId scopeId,\n             @PathParam(\"deviceId\") EntityId deviceId,\n             @PathParam(\"snapshotId\") String snapshotId,\n-            @QueryParam(\"timeout\") Long timeout) throws Exception {\n+            @QueryParam(\"timeout\") Long timeout) throws KapuaException {\n         snapshotService.rollback(scopeId, deviceId, snapshotId, timeout);\n \n         return returnOk();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7846f60f8e40309f91b15f48ee3a8df722295015"}, "originalPosition": 43}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "70f5b13ec9863ef21448194734764636a30b7696", "author": {"user": {"login": "lorthirk", "name": "Claudio Mezzasalma"}}, "url": "https://github.com/eclipse/kapua/commit/70f5b13ec9863ef21448194734764636a30b7696", "committedDate": "2020-03-20T09:50:21Z", "message": "More 201 and 204 returns\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>"}, "afterCommit": {"oid": "f36cd32c8749f9d2641945df5f53b672f191bf39", "author": {"user": {"login": "lorthirk", "name": "Claudio Mezzasalma"}}, "url": "https://github.com/eclipse/kapua/commit/f36cd32c8749f9d2641945df5f53b672f191bf39", "committedDate": "2020-03-20T09:51:44Z", "message": "More 201 and 204 returns\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f36cd32c8749f9d2641945df5f53b672f191bf39", "author": {"user": {"login": "lorthirk", "name": "Claudio Mezzasalma"}}, "url": "https://github.com/eclipse/kapua/commit/f36cd32c8749f9d2641945df5f53b672f191bf39", "committedDate": "2020-03-20T09:51:44Z", "message": "More 201 and 204 returns\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>"}, "afterCommit": {"oid": "70f5b13ec9863ef21448194734764636a30b7696", "author": {"user": {"login": "lorthirk", "name": "Claudio Mezzasalma"}}, "url": "https://github.com/eclipse/kapua/commit/70f5b13ec9863ef21448194734764636a30b7696", "committedDate": "2020-03-20T09:50:21Z", "message": "More 201 and 204 returns\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d2ec6f5d85c9140e31716812af03968c542d807e", "author": {"user": {"login": "lorthirk", "name": "Claudio Mezzasalma"}}, "url": "https://github.com/eclipse/kapua/commit/d2ec6f5d85c9140e31716812af03968c542d807e", "committedDate": "2020-03-20T10:34:21Z", "message": "More 201 and 204 returns\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "70f5b13ec9863ef21448194734764636a30b7696", "author": {"user": {"login": "lorthirk", "name": "Claudio Mezzasalma"}}, "url": "https://github.com/eclipse/kapua/commit/70f5b13ec9863ef21448194734764636a30b7696", "committedDate": "2020-03-20T09:50:21Z", "message": "More 201 and 204 returns\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>"}, "afterCommit": {"oid": "d2ec6f5d85c9140e31716812af03968c542d807e", "author": {"user": {"login": "lorthirk", "name": "Claudio Mezzasalma"}}, "url": "https://github.com/eclipse/kapua/commit/d2ec6f5d85c9140e31716812af03968c542d807e", "committedDate": "2020-03-20T10:34:21Z", "message": "More 201 and 204 returns\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4NDk2NTU0", "url": "https://github.com/eclipse/kapua/pull/2903#pullrequestreview-378496554", "createdAt": "2020-03-20T13:47:42Z", "commit": {"oid": "d2ec6f5d85c9140e31716812af03968c542d807e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 216, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}