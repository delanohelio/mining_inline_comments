{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE5MTI5NjMx", "number": 2981, "title": "Sort order parameter for data messages request", "bodyText": "The new parameter for /data/messages endpoint to control the sorting order of returned results.\nThis change improves REST API usage in case of iterating over messages.", "createdAt": "2020-05-17T15:29:11Z", "url": "https://github.com/eclipse/kapua/pull/2981", "merged": true, "mergeCommit": {"oid": "9018f14fdd74f6c6c49a4df093c7291af62de4c7"}, "closed": true, "closedAt": "2020-05-20T09:47:40Z", "author": {"login": "xshiart"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABciNLXKgBqjMzNDQ2NzMyNDU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABci2pUrgFqTQxNDU5NTM2NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fb61ec8d34ccf3b6d12d32e2a27fff48e216cd81", "author": {"user": {"login": "xshiart", "name": "Artem Shilin"}}, "url": "https://github.com/eclipse/kapua/commit/fb61ec8d34ccf3b6d12d32e2a27fff48e216cd81", "committedDate": "2020-05-17T15:25:36Z", "message": "Sort order parameter for data messages request"}, "afterCommit": {"oid": "8cfc59e61581582f733f25b3ea59b8c02647772e", "author": {"user": {"login": "xshiart", "name": "Artem Shilin"}}, "url": "https://github.com/eclipse/kapua/commit/8cfc59e61581582f733f25b3ea59b8c02647772e", "committedDate": "2020-05-17T15:40:23Z", "message": "Sort order parameter for data messages request\n\nSigned-off-by: Artem Shilin <xshiart@protonmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzNDc5NTY4", "url": "https://github.com/eclipse/kapua/pull/2981#pullrequestreview-413479568", "createdAt": "2020-05-18T10:48:07Z", "commit": {"oid": "8cfc59e61581582f733f25b3ea59b8c02647772e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxMDo0ODowOFrOGWxvAQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxMDo0ODowOFrOGWxvAQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjUzNjcwNQ==", "bodyText": "A few of things:\n\nInstead of a String, you could use the SortDirection type itself so it's automatically parsed, and invalid values are rejected earlier. Also, to have it case-insensitive, please implement the fromString() method in SortDirection. You can draw inspiration from #2891\nAlso, for coherence with #2891, I would rather name the parameter sortDir, and the default should be in uppercase\nThis is just a stylistic preference, but I'd like to keep offset and limit to end of the signature, so could you please move sortDir just below metricMax?", "url": "https://github.com/eclipse/kapua/pull/2981#discussion_r426536705", "createdAt": "2020-05-18T10:48:08Z", "author": {"login": "lorthirk"}, "path": "rest-api/resources/src/main/java/org/eclipse/kapua/app/api/resources/v1/resources/DataMessages.java", "diffHunk": "@@ -88,7 +93,8 @@\n             @QueryParam(\"metricMin\") String metricMinValue, //\n             @QueryParam(\"metricMax\") String metricMaxValue, //\n             @QueryParam(\"offset\") @DefaultValue(\"0\") int offset,//\n-            @QueryParam(\"limit\") @DefaultValue(\"50\") int limit) throws KapuaException {\n+            @QueryParam(\"limit\") @DefaultValue(\"50\") int limit,\n+            @QueryParam(\"order\") @DefaultValue(\"desc\") String order) throws KapuaException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8cfc59e61581582f733f25b3ea59b8c02647772e"}, "originalPosition": 45}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzNDgyMDU0", "url": "https://github.com/eclipse/kapua/pull/2981#pullrequestreview-413482054", "createdAt": "2020-05-18T10:51:58Z", "commit": {"oid": "8cfc59e61581582f733f25b3ea59b8c02647772e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxMDo1MTo1OVrOGWx2pw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxMDo1MTo1OVrOGWx2pw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjUzODY2Mw==", "bodyText": "Of course, here you should reflect all the changes from DataMessages.java", "url": "https://github.com/eclipse/kapua/pull/2981#discussion_r426538663", "createdAt": "2020-05-18T10:51:59Z", "author": {"login": "lorthirk"}, "path": "rest-api/resources/src/main/java/org/eclipse/kapua/app/api/resources/v1/resources/DataMessagesJson.java", "diffHunk": "@@ -91,7 +91,8 @@\n             @QueryParam(\"metricMin\") String metricMinValue,\n             @QueryParam(\"metricMax\") String metricMaxValue,\n             @QueryParam(\"offset\") @DefaultValue(\"0\") int offset,\n-            @QueryParam(\"limit\") @DefaultValue(\"50\") int limit) throws KapuaException {\n+            @QueryParam(\"limit\") @DefaultValue(\"50\") int limit,\n+            @QueryParam(\"order\") @DefaultValue(\"desc\") String order) throws KapuaException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8cfc59e61581582f733f25b3ea59b8c02647772e"}, "originalPosition": 6}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8cfc59e61581582f733f25b3ea59b8c02647772e", "author": {"user": {"login": "xshiart", "name": "Artem Shilin"}}, "url": "https://github.com/eclipse/kapua/commit/8cfc59e61581582f733f25b3ea59b8c02647772e", "committedDate": "2020-05-17T15:40:23Z", "message": "Sort order parameter for data messages request\n\nSigned-off-by: Artem Shilin <xshiart@protonmail.com>"}, "afterCommit": {"oid": "f8b245182a06dde43a5d5569a9ab7044a3fc1db2", "author": {"user": {"login": "xshiart", "name": "Artem Shilin"}}, "url": "https://github.com/eclipse/kapua/commit/f8b245182a06dde43a5d5569a9ab7044a3fc1db2", "committedDate": "2020-05-19T11:14:52Z", "message": "Sort order parameter for data messages request\n\nSigned-off-by: Artem Shilin <xshiart@protonmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE0MzgwNTAx", "url": "https://github.com/eclipse/kapua/pull/2981#pullrequestreview-414380501", "createdAt": "2020-05-19T12:11:06Z", "commit": {"oid": "f8b245182a06dde43a5d5569a9ab7044a3fc1db2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE0MzgxMzU5", "url": "https://github.com/eclipse/kapua/pull/2981#pullrequestreview-414381359", "createdAt": "2020-05-19T12:12:11Z", "commit": {"oid": "f8b245182a06dde43a5d5569a9ab7044a3fc1db2"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxMjoxMjoxMVrOGXdb_w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxMjoxMjoxMVrOGXdb_w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzI1MjczNQ==", "bodyText": "Aren't these ASC and DESC?", "url": "https://github.com/eclipse/kapua/pull/2981#discussion_r427252735", "createdAt": "2020-05-19T12:12:11Z", "author": {"login": "lorthirk"}, "path": "rest-api/resources/src/main/resources/openapi/dataMessage/dataMessage-scopeId.yaml", "diffHunk": "@@ -67,6 +67,15 @@ paths:\n           in: query\n           schema:\n             type: string\n+        - description: The sort direction. Can be ASCENDING, DESCENDING (default). Case-insensitive.\n+          name: sortDir\n+          in: query\n+          schema:\n+            type: string\n+            enum:\n+              - ASCENDING\n+              - DESCENDING\n+            default: DESCENDING", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f8b245182a06dde43a5d5569a9ab7044a3fc1db2"}, "originalPosition": 12}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f8b245182a06dde43a5d5569a9ab7044a3fc1db2", "author": {"user": {"login": "xshiart", "name": "Artem Shilin"}}, "url": "https://github.com/eclipse/kapua/commit/f8b245182a06dde43a5d5569a9ab7044a3fc1db2", "committedDate": "2020-05-19T11:14:52Z", "message": "Sort order parameter for data messages request\n\nSigned-off-by: Artem Shilin <xshiart@protonmail.com>"}, "afterCommit": {"oid": "754a68ce58eb651b0f5794651e3be36c25f93d3a", "author": {"user": {"login": "xshiart", "name": "Artem Shilin"}}, "url": "https://github.com/eclipse/kapua/commit/754a68ce58eb651b0f5794651e3be36c25f93d3a", "committedDate": "2020-05-19T12:38:20Z", "message": "Sort order parameter for data messages request\n\nSigned-off-by: Artem Shilin <xshiart@protonmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE0NDE2MzM1", "url": "https://github.com/eclipse/kapua/pull/2981#pullrequestreview-414416335", "createdAt": "2020-05-19T12:57:02Z", "commit": {"oid": "754a68ce58eb651b0f5794651e3be36c25f93d3a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE0NDMyMjA1", "url": "https://github.com/eclipse/kapua/pull/2981#pullrequestreview-414432205", "createdAt": "2020-05-19T13:15:23Z", "commit": {"oid": "754a68ce58eb651b0f5794651e3be36c25f93d3a"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxMzoxNToyM1rOGXf2lg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxMzoxNToyM1rOGXf2lg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzI5MjMxMA==", "bodyText": "Whoops... this slipped in as well. ASC and DESC here too. Just one to go!", "url": "https://github.com/eclipse/kapua/pull/2981#discussion_r427292310", "createdAt": "2020-05-19T13:15:23Z", "author": {"login": "lorthirk"}, "path": "rest-api/resources/src/main/resources/openapi/dataMessage/dataMessage-scopeId.yaml", "diffHunk": "@@ -67,6 +67,15 @@ paths:\n           in: query\n           schema:\n             type: string\n+        - description: The sort direction. Can be ASCENDING, DESCENDING (default). Case-insensitive.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "754a68ce58eb651b0f5794651e3be36c25f93d3a"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f0dada0fcaab0535db3af954a9f9dd57b9111ec9", "author": {"user": {"login": "xshiart", "name": "Artem Shilin"}}, "url": "https://github.com/eclipse/kapua/commit/f0dada0fcaab0535db3af954a9f9dd57b9111ec9", "committedDate": "2020-05-19T15:10:57Z", "message": "Sort order parameter for data messages request\n\nSigned-off-by: Artem Shilin <xshiart@protonmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "754a68ce58eb651b0f5794651e3be36c25f93d3a", "author": {"user": {"login": "xshiart", "name": "Artem Shilin"}}, "url": "https://github.com/eclipse/kapua/commit/754a68ce58eb651b0f5794651e3be36c25f93d3a", "committedDate": "2020-05-19T12:38:20Z", "message": "Sort order parameter for data messages request\n\nSigned-off-by: Artem Shilin <xshiart@protonmail.com>"}, "afterCommit": {"oid": "f0dada0fcaab0535db3af954a9f9dd57b9111ec9", "author": {"user": {"login": "xshiart", "name": "Artem Shilin"}}, "url": "https://github.com/eclipse/kapua/commit/f0dada0fcaab0535db3af954a9f9dd57b9111ec9", "committedDate": "2020-05-19T15:10:57Z", "message": "Sort order parameter for data messages request\n\nSigned-off-by: Artem Shilin <xshiart@protonmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE0NTk1MzY1", "url": "https://github.com/eclipse/kapua/pull/2981#pullrequestreview-414595365", "createdAt": "2020-05-19T15:59:31Z", "commit": {"oid": "f0dada0fcaab0535db3af954a9f9dd57b9111ec9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 177, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}