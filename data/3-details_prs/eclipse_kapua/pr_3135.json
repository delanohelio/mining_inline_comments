{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE4NTk0Nzkz", "number": 3135, "title": " Upgrade Elasticsearch version to 6.8.7", "bodyText": "This pull request is going to upgrade Elasticsearch to version 6.8.7.\nRelated Issue\nFixes #3133\nDescription of the solution adopted\nIn ES 6.x, the whole concept of Mapping Type has been removed. Since we used three different types (metrics, channels and clients) for the .scopeId index, that held all registry data, I had to split those types in three different indexes. So, instead of only one .scopeId index, now there will be three different .scopeId-client, .scopeId-channel and .scopeId-metric indexes. In order to upgrade an existing ES storage to the new format, read the paragraph below.\nAny side note on the changes made\nSince there's a few breaking changes between ES 5.x and 6.x, an index migration is needed in order to use data from a 5.x cluster. To perform such migration, a little application has been developed in the extras/es-migrator Maven module.\nRequested CQs\n\n lucene-grouping\n lucene-misc\n lucene-spatial\n lucene-suggest\n elasticsearch-jna", "createdAt": "2020-11-10T16:04:25Z", "url": "https://github.com/eclipse/kapua/pull/3135", "merged": true, "mergeCommit": {"oid": "c6efb64c60cef72bf07353ec641d2cf5ccaff501"}, "closed": true, "closedAt": "2020-11-27T13:32:46Z", "author": {"login": "lorthirk"}, "timelineItems": {"totalCount": 23, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdbP7ncgFqTUyNzYwMTI1Mg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdfX2QbABqjQwMjg1ODIyOTc=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI3NjAxMjUy", "url": "https://github.com/eclipse/kapua/pull/3135#pullrequestreview-527601252", "createdAt": "2020-11-10T20:57:52Z", "commit": {"oid": "2a6cc057bc3ccb5e9c7ed12b70452a44df0801eb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQyMDo1Nzo1MlrOHwvWEQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQyMDo1Nzo1MlrOHwvWEQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDg2OTM5Mw==", "bodyText": "Missing space between \"year\" and \"becasue\" in word \"yearbecause\".", "url": "https://github.com/eclipse/kapua/pull/3135#discussion_r520869393", "createdAt": "2020-11-10T20:57:52Z", "author": {"login": "LeoNerdoG"}, "path": "commons/src/main/java/org/eclipse/kapua/commons/util/KapuaDateUtils.java", "diffHunk": "@@ -29,7 +29,16 @@\n     private KapuaDateUtils() {\n     }\n \n-    public static final String ISO_DATE_PATTERN = \"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'\"; // example 24/01/2017T11:22:10.999Z\n+    /**\n+     * {@literal uuuu} is used instead of {@literal yyyy} for the yearbecause the latter is meant to be used together with the", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2a6cc057bc3ccb5e9c7ed12b70452a44df0801eb"}, "originalPosition": 6}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2a6cc057bc3ccb5e9c7ed12b70452a44df0801eb", "author": {"user": {"login": "lorthirk", "name": "Claudio Mezzasalma"}}, "url": "https://github.com/eclipse/kapua/commit/2a6cc057bc3ccb5e9c7ed12b70452a44df0801eb", "committedDate": "2020-11-10T16:02:17Z", "message": "Upgrade to Elasticsearch 6.8.7\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>"}, "afterCommit": {"oid": "45022f7356d5d234958cc2b3fe0afa2c5bb32787", "author": {"user": {"login": "lorthirk", "name": "Claudio Mezzasalma"}}, "url": "https://github.com/eclipse/kapua/commit/45022f7356d5d234958cc2b3fe0afa2c5bb32787", "committedDate": "2020-11-11T16:41:10Z", "message": "Upgrade to Elasticsearch 6.8.7\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "45022f7356d5d234958cc2b3fe0afa2c5bb32787", "author": {"user": {"login": "lorthirk", "name": "Claudio Mezzasalma"}}, "url": "https://github.com/eclipse/kapua/commit/45022f7356d5d234958cc2b3fe0afa2c5bb32787", "committedDate": "2020-11-11T16:41:10Z", "message": "Upgrade to Elasticsearch 6.8.7\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>"}, "afterCommit": {"oid": "1a93ec166278273e24034557ef7610a4194a777e", "author": {"user": {"login": "lorthirk", "name": "Claudio Mezzasalma"}}, "url": "https://github.com/eclipse/kapua/commit/1a93ec166278273e24034557ef7610a4194a777e", "committedDate": "2020-11-12T10:58:21Z", "message": "Upgrade to Elasticsearch 6.8.7\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1a93ec166278273e24034557ef7610a4194a777e", "author": {"user": {"login": "lorthirk", "name": "Claudio Mezzasalma"}}, "url": "https://github.com/eclipse/kapua/commit/1a93ec166278273e24034557ef7610a4194a777e", "committedDate": "2020-11-12T10:58:21Z", "message": "Upgrade to Elasticsearch 6.8.7\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>"}, "afterCommit": {"oid": "9f4200f06f75d7d5b4d6c417dfb9285140d0e03d", "author": {"user": {"login": "lorthirk", "name": "Claudio Mezzasalma"}}, "url": "https://github.com/eclipse/kapua/commit/9f4200f06f75d7d5b4d6c417dfb9285140d0e03d", "committedDate": "2020-11-12T14:59:30Z", "message": "Upgrade to Elasticsearch 6.8.7\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9f4200f06f75d7d5b4d6c417dfb9285140d0e03d", "author": {"user": {"login": "lorthirk", "name": "Claudio Mezzasalma"}}, "url": "https://github.com/eclipse/kapua/commit/9f4200f06f75d7d5b4d6c417dfb9285140d0e03d", "committedDate": "2020-11-12T14:59:30Z", "message": "Upgrade to Elasticsearch 6.8.7\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>"}, "afterCommit": {"oid": "5498febcb24ea4dc5810ee98e1ea49b798fbe6a5", "author": {"user": {"login": "lorthirk", "name": "Claudio Mezzasalma"}}, "url": "https://github.com/eclipse/kapua/commit/5498febcb24ea4dc5810ee98e1ea49b798fbe6a5", "committedDate": "2020-11-13T12:06:26Z", "message": "Upgrade to Elasticsearch 6.8.7\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5498febcb24ea4dc5810ee98e1ea49b798fbe6a5", "author": {"user": {"login": "lorthirk", "name": "Claudio Mezzasalma"}}, "url": "https://github.com/eclipse/kapua/commit/5498febcb24ea4dc5810ee98e1ea49b798fbe6a5", "committedDate": "2020-11-13T12:06:26Z", "message": "Upgrade to Elasticsearch 6.8.7\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>"}, "afterCommit": {"oid": "fe0f45604c94058c835705e4f57f6397f9050696", "author": {"user": {"login": "lorthirk", "name": "Claudio Mezzasalma"}}, "url": "https://github.com/eclipse/kapua/commit/fe0f45604c94058c835705e4f57f6397f9050696", "committedDate": "2020-11-16T15:33:03Z", "message": "Upgrade to Elasticsearch 6.8.7\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fe0f45604c94058c835705e4f57f6397f9050696", "author": {"user": {"login": "lorthirk", "name": "Claudio Mezzasalma"}}, "url": "https://github.com/eclipse/kapua/commit/fe0f45604c94058c835705e4f57f6397f9050696", "committedDate": "2020-11-16T15:33:03Z", "message": "Upgrade to Elasticsearch 6.8.7\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>"}, "afterCommit": {"oid": "d14faca9a0def520a164f2c4956248b19f2f499f", "author": {"user": {"login": "lorthirk", "name": "Claudio Mezzasalma"}}, "url": "https://github.com/eclipse/kapua/commit/d14faca9a0def520a164f2c4956248b19f2f499f", "committedDate": "2020-11-19T11:46:43Z", "message": "Upgrade to Elasticsearch 6.8.7\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d14faca9a0def520a164f2c4956248b19f2f499f", "author": {"user": {"login": "lorthirk", "name": "Claudio Mezzasalma"}}, "url": "https://github.com/eclipse/kapua/commit/d14faca9a0def520a164f2c4956248b19f2f499f", "committedDate": "2020-11-19T11:46:43Z", "message": "Upgrade to Elasticsearch 6.8.7\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>"}, "afterCommit": {"oid": "9d416ab523dd76a67568349862fb09e9bbfb4d09", "author": {"user": {"login": "lorthirk", "name": "Claudio Mezzasalma"}}, "url": "https://github.com/eclipse/kapua/commit/9d416ab523dd76a67568349862fb09e9bbfb4d09", "committedDate": "2020-11-19T13:09:37Z", "message": "Upgrade to Elasticsearch 6.8.7\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9d416ab523dd76a67568349862fb09e9bbfb4d09", "author": {"user": {"login": "lorthirk", "name": "Claudio Mezzasalma"}}, "url": "https://github.com/eclipse/kapua/commit/9d416ab523dd76a67568349862fb09e9bbfb4d09", "committedDate": "2020-11-19T13:09:37Z", "message": "Upgrade to Elasticsearch 6.8.7\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>"}, "afterCommit": {"oid": "7a1dd8f27f8c26937e26d37ee07199518be379cf", "author": {"user": {"login": "lorthirk", "name": "Claudio Mezzasalma"}}, "url": "https://github.com/eclipse/kapua/commit/7a1dd8f27f8c26937e26d37ee07199518be379cf", "committedDate": "2020-11-20T12:36:25Z", "message": "Upgrade to Elasticsearch 6.8.7\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b39bae4a288ec648d3604ee94e1e99fa21864f86", "author": {"user": {"login": "lorthirk", "name": "Claudio Mezzasalma"}}, "url": "https://github.com/eclipse/kapua/commit/b39bae4a288ec648d3604ee94e1e99fa21864f86", "committedDate": "2020-11-20T12:36:42Z", "message": "Split Elasticsearch channel, client and metric indexes\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9c2626f30400557226be5dd5a85ece1b45061582", "author": {"user": {"login": "lorthirk", "name": "Claudio Mezzasalma"}}, "url": "https://github.com/eclipse/kapua/commit/9c2626f30400557226be5dd5a85ece1b45061582", "committedDate": "2020-11-20T12:36:42Z", "message": "Remove _all\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "16448e33fb9510e93e5e971be045cc75a6def312", "author": {"user": {"login": "lorthirk", "name": "Claudio Mezzasalma"}}, "url": "https://github.com/eclipse/kapua/commit/16448e33fb9510e93e5e971be045cc75a6def312", "committedDate": "2020-11-20T12:36:42Z", "message": "Use Base64 Url Encoder for Datastore IDs\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2aa4fc7fdccad9960c84b6f5489c519cf911a98b", "author": {"user": {"login": "lorthirk", "name": "Claudio Mezzasalma"}}, "url": "https://github.com/eclipse/kapua/commit/2aa4fc7fdccad9960c84b6f5489c519cf911a98b", "committedDate": "2020-11-20T12:36:42Z", "message": "ElasticSearch Version update to 6.3.2\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "740b02fd8bf65588db944eef458d7568a6404ab1", "author": {"user": {"login": "lorthirk", "name": "Claudio Mezzasalma"}}, "url": "https://github.com/eclipse/kapua/commit/740b02fd8bf65588db944eef458d7568a6404ab1", "committedDate": "2020-11-20T12:36:42Z", "message": "Elasticsearch Type Removal\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4fabaeefd6a18d42d862b93b16621831842bdb5f", "author": {"user": {"login": "lorthirk", "name": "Claudio Mezzasalma"}}, "url": "https://github.com/eclipse/kapua/commit/4fabaeefd6a18d42d862b93b16621831842bdb5f", "committedDate": "2020-11-20T12:36:43Z", "message": "Upgrade Elasticsearch to 6.8.5\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bd1f17f622fc1905e7ed3e01d8d1604c496168cc", "author": {"user": {"login": "lorthirk", "name": "Claudio Mezzasalma"}}, "url": "https://github.com/eclipse/kapua/commit/bd1f17f622fc1905e7ed3e01d8d1604c496168cc", "committedDate": "2020-11-20T12:36:43Z", "message": "KapuaDateUtils format changes, new ES Date format\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7a1dd8f27f8c26937e26d37ee07199518be379cf", "author": {"user": {"login": "lorthirk", "name": "Claudio Mezzasalma"}}, "url": "https://github.com/eclipse/kapua/commit/7a1dd8f27f8c26937e26d37ee07199518be379cf", "committedDate": "2020-11-20T12:36:25Z", "message": "Upgrade to Elasticsearch 6.8.7\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>"}, "afterCommit": {"oid": "f87f33b2043b9a44f7a4475eeff880066c8022cb", "author": {"user": {"login": "lorthirk", "name": "Claudio Mezzasalma"}}, "url": "https://github.com/eclipse/kapua/commit/f87f33b2043b9a44f7a4475eeff880066c8022cb", "committedDate": "2020-11-20T12:36:43Z", "message": "Upgrade to Elasticsearch 6.8.7\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f87f33b2043b9a44f7a4475eeff880066c8022cb", "author": {"user": {"login": "lorthirk", "name": "Claudio Mezzasalma"}}, "url": "https://github.com/eclipse/kapua/commit/f87f33b2043b9a44f7a4475eeff880066c8022cb", "committedDate": "2020-11-20T12:36:43Z", "message": "Upgrade to Elasticsearch 6.8.7\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>"}, "afterCommit": {"oid": "1fce7a8e85d418b850a0973b109e7cb14c5c117c", "author": {"user": {"login": "lorthirk", "name": "Claudio Mezzasalma"}}, "url": "https://github.com/eclipse/kapua/commit/1fce7a8e85d418b850a0973b109e7cb14c5c117c", "committedDate": "2020-11-20T16:29:38Z", "message": "Upgrade to Elasticsearch 6.8.7\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1fce7a8e85d418b850a0973b109e7cb14c5c117c", "author": {"user": {"login": "lorthirk", "name": "Claudio Mezzasalma"}}, "url": "https://github.com/eclipse/kapua/commit/1fce7a8e85d418b850a0973b109e7cb14c5c117c", "committedDate": "2020-11-20T16:29:38Z", "message": "Upgrade to Elasticsearch 6.8.7\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>"}, "afterCommit": {"oid": "0c3b39a003d88ef8b972d1f3e1c6f79dfb783ad2", "author": {"user": {"login": "lorthirk", "name": "Claudio Mezzasalma"}}, "url": "https://github.com/eclipse/kapua/commit/0c3b39a003d88ef8b972d1f3e1c6f79dfb783ad2", "committedDate": "2020-11-23T08:39:59Z", "message": "Upgrade to Elasticsearch 6.8.7\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0c3b39a003d88ef8b972d1f3e1c6f79dfb783ad2", "author": {"user": {"login": "lorthirk", "name": "Claudio Mezzasalma"}}, "url": "https://github.com/eclipse/kapua/commit/0c3b39a003d88ef8b972d1f3e1c6f79dfb783ad2", "committedDate": "2020-11-23T08:39:59Z", "message": "Upgrade to Elasticsearch 6.8.7\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>"}, "afterCommit": {"oid": "a936781e649351b20fb1c3df15444db2bc04e296", "author": {"user": {"login": "lorthirk", "name": "Claudio Mezzasalma"}}, "url": "https://github.com/eclipse/kapua/commit/a936781e649351b20fb1c3df15444db2bc04e296", "committedDate": "2020-11-23T16:06:37Z", "message": "Upgrade to Elasticsearch 6.8.7\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7aa2176e09bff9e7a799a3bfc2b3a5f8ff6b570f", "author": {"user": {"login": "lorthirk", "name": "Claudio Mezzasalma"}}, "url": "https://github.com/eclipse/kapua/commit/7aa2176e09bff9e7a799a3bfc2b3a5f8ff6b570f", "committedDate": "2020-11-23T16:35:46Z", "message": "Elasticsearch 6 index migrator\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f926133b258432aa8e7d26976e58072fe1a24c73", "author": {"user": {"login": "lorthirk", "name": "Claudio Mezzasalma"}}, "url": "https://github.com/eclipse/kapua/commit/f926133b258432aa8e7d26976e58072fe1a24c73", "committedDate": "2020-11-23T16:35:50Z", "message": "Upgrade to Elasticsearch 6.8.7\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a936781e649351b20fb1c3df15444db2bc04e296", "author": {"user": {"login": "lorthirk", "name": "Claudio Mezzasalma"}}, "url": "https://github.com/eclipse/kapua/commit/a936781e649351b20fb1c3df15444db2bc04e296", "committedDate": "2020-11-23T16:06:37Z", "message": "Upgrade to Elasticsearch 6.8.7\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>"}, "afterCommit": {"oid": "f926133b258432aa8e7d26976e58072fe1a24c73", "author": {"user": {"login": "lorthirk", "name": "Claudio Mezzasalma"}}, "url": "https://github.com/eclipse/kapua/commit/f926133b258432aa8e7d26976e58072fe1a24c73", "committedDate": "2020-11-23T16:35:50Z", "message": "Upgrade to Elasticsearch 6.8.7\n\nSigned-off-by: Claudio Mezzasalma <claudio.mezzasalma@eurotech.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 168, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}