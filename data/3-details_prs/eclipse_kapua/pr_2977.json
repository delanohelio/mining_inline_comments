{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE4NTAxODg4", "number": 2977, "title": "Added JUnit tests for Commons package", "bodyText": "Signed-off-by: code-incubus nemanja.milutinovic@comtrade.com\nAdded JUnit tests for classes in a commons package:\n\nArgumentValidator.java\nKapuaFileUtils.java\nCommonsValidationRegexTest.java\n\nRelated Issue\nNone\nDescription of the solution adopted\n/\nScreenshots\n/\nAny side note on the changes made\n\nI put a comment at line 82 in class KapuaFileUtils.java below the \"FIXME\". We need to adjust the tests after the changes in this class.", "createdAt": "2020-05-15T10:14:27Z", "url": "https://github.com/eclipse/kapua/pull/2977", "merged": true, "mergeCommit": {"oid": "0631c2da544e2e78f06ab13a034e0799eea5f026"}, "closed": true, "closedAt": "2020-05-19T14:18:14Z", "author": {"login": "code-incubus"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcicuU5gFqTQxMzQyMjYzNQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcizIGngFqTQxNDM2ODEzMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzNDIyNjM1", "url": "https://github.com/eclipse/kapua/pull/2977#pullrequestreview-413422635", "createdAt": "2020-05-18T09:28:20Z", "commit": {"oid": "a166127978c73bae21374958cfe0ce149855c9c5"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQwOToyODoyMFrOGWu8kg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQwOTo0NjoxN1rOGWvnIg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjQ5MTAyNg==", "bodyText": "assertEquals has an overload method that accepts a message as a first argument. So fail invoked in the catch exception is not the correct usage of Assert stuff.\nPlease change this and also other similar usages.", "url": "https://github.com/eclipse/kapua/pull/2977#discussion_r426491026", "createdAt": "2020-05-18T09:28:20Z", "author": {"login": "Coduz"}, "path": "commons/src/test/java/org/eclipse/kapua/commons/util/KapuaFileUtilsTest.java", "diffHunk": "@@ -0,0 +1,92 @@\n+/*******************************************************************************\n+ * Copyright (c) 2020 Eurotech and/or its affiliates and others\n+ *\n+ * All rights reserved. This program and the accompanying materials\n+ * are made available under the terms of the Eclipse Public License v1.0\n+ * which accompanies this distribution, and is available at\n+ * http://www.eclipse.org/legal/epl-v10.html\n+ *\n+ * Contributors:\n+ *     Eurotech - initial API and implementation\n+ *******************************************************************************/\n+package org.eclipse.kapua.commons.util;\n+\n+import org.eclipse.kapua.qa.markers.junit.JUnitTests;\n+import org.junit.Assert;\n+import org.junit.Test;\n+import org.junit.experimental.categories.Category;\n+\n+import java.io.File;\n+import java.io.IOException;\n+import java.lang.reflect.Constructor;\n+import java.net.URL;\n+\n+@Category(JUnitTests.class)\n+public class KapuaFileUtilsTest extends Assert {\n+\n+    @Test\n+    public void constructorTest() throws Exception {\n+        Constructor<KapuaFileUtils> fileUtilsConstructor = KapuaFileUtils.class.getDeclaredConstructor();\n+        fileUtilsConstructor.setAccessible(true);\n+        fileUtilsConstructor.newInstance();\n+    }\n+\n+    @Test\n+    public void getAsUrlPositiveAndNegativeTest() throws Exception {\n+        String[] permittedFormats = new String[] {\"https://www.example3345.com/\", \"http://www.example.com:1080/docs/resource1.html\",\n+                \"https://www.example.com:1080/docs/resource2.html\", \"file:///c:/EXAMPLE/clock.example\"};\n+        String [] invalidFormats = new String [] {\"www.example.com:1080/docs/resource1.html\", \"/c:/WINDOWS/clock.example\",\n+                \"http://www.example.com:10800000000000/docs/resource1.html\", \"htp://www.example.com:1080/docs/resource1.html\"};\n+\n+        URL[] expectedUrl = new URL[] {new URL(\"https://www.example3345.com/\"), new URL(\"http://www.example.com:1080/docs/resource1.html\"),\n+                                       new URL(\"https://www.example.com:1080/docs/resource2.html\"), new URL(\"file:///c:/EXAMPLE/clock.example\")};\n+        for (int i = 0; i < permittedFormats.length; i++) {\n+            try {\n+                assertEquals(expectedUrl[i], KapuaFileUtils.getAsURL(permittedFormats[i]));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a166127978c73bae21374958cfe0ce149855c9c5"}, "originalPosition": 45}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjUwMTkyMg==", "bodyText": "If they are not intended to match please use assertNotEquals.\nIf KapuaFileUtils.getAsURL(...) is meant to throw an Exception catch the Exception and do asserts on the type of Exception expected.", "url": "https://github.com/eclipse/kapua/pull/2977#discussion_r426501922", "createdAt": "2020-05-18T09:46:17Z", "author": {"login": "Coduz"}, "path": "commons/src/test/java/org/eclipse/kapua/commons/util/KapuaFileUtilsTest.java", "diffHunk": "@@ -0,0 +1,92 @@\n+/*******************************************************************************\n+ * Copyright (c) 2020 Eurotech and/or its affiliates and others\n+ *\n+ * All rights reserved. This program and the accompanying materials\n+ * are made available under the terms of the Eclipse Public License v1.0\n+ * which accompanies this distribution, and is available at\n+ * http://www.eclipse.org/legal/epl-v10.html\n+ *\n+ * Contributors:\n+ *     Eurotech - initial API and implementation\n+ *******************************************************************************/\n+package org.eclipse.kapua.commons.util;\n+\n+import org.eclipse.kapua.qa.markers.junit.JUnitTests;\n+import org.junit.Assert;\n+import org.junit.Test;\n+import org.junit.experimental.categories.Category;\n+\n+import java.io.File;\n+import java.io.IOException;\n+import java.lang.reflect.Constructor;\n+import java.net.URL;\n+\n+@Category(JUnitTests.class)\n+public class KapuaFileUtilsTest extends Assert {\n+\n+    @Test\n+    public void constructorTest() throws Exception {\n+        Constructor<KapuaFileUtils> fileUtilsConstructor = KapuaFileUtils.class.getDeclaredConstructor();\n+        fileUtilsConstructor.setAccessible(true);\n+        fileUtilsConstructor.newInstance();\n+    }\n+\n+    @Test\n+    public void getAsUrlPositiveAndNegativeTest() throws Exception {\n+        String[] permittedFormats = new String[] {\"https://www.example3345.com/\", \"http://www.example.com:1080/docs/resource1.html\",\n+                \"https://www.example.com:1080/docs/resource2.html\", \"file:///c:/EXAMPLE/clock.example\"};\n+        String [] invalidFormats = new String [] {\"www.example.com:1080/docs/resource1.html\", \"/c:/WINDOWS/clock.example\",\n+                \"http://www.example.com:10800000000000/docs/resource1.html\", \"htp://www.example.com:1080/docs/resource1.html\"};\n+\n+        URL[] expectedUrl = new URL[] {new URL(\"https://www.example3345.com/\"), new URL(\"http://www.example.com:1080/docs/resource1.html\"),\n+                                       new URL(\"https://www.example.com:1080/docs/resource2.html\"), new URL(\"file:///c:/EXAMPLE/clock.example\")};\n+        for (int i = 0; i < permittedFormats.length; i++) {\n+            try {\n+                assertEquals(expectedUrl[i], KapuaFileUtils.getAsURL(permittedFormats[i]));\n+            } catch (Exception ex) {\n+                fail(\"Inappropriate http scheme.\");\n+            }\n+            try {\n+                assertEquals(invalidFormats[i], KapuaFileUtils.getAsURL(invalidFormats[i]));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a166127978c73bae21374958cfe0ce149855c9c5"}, "originalPosition": 50}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a166127978c73bae21374958cfe0ce149855c9c5", "author": {"user": null}, "url": "https://github.com/eclipse/kapua/commit/a166127978c73bae21374958cfe0ce149855c9c5", "committedDate": "2020-05-15T09:05:33Z", "message": "Added JUnit tests for Commons package\n\nSigned-off-by: code-incubus <nemanja.milutinovic@comtrade.com>"}, "afterCommit": {"oid": "4ea2536b4f6d043b14028868293d4515345b3bb9", "author": {"user": null}, "url": "https://github.com/eclipse/kapua/commit/4ea2536b4f6d043b14028868293d4515345b3bb9", "committedDate": "2020-05-19T06:07:58Z", "message": "Added JUnit tests for Commons package\n\nSigned-off-by: code-incubus <nemanja.milutinovic@comtrade.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE0MjQ4NTA3", "url": "https://github.com/eclipse/kapua/pull/2977#pullrequestreview-414248507", "createdAt": "2020-05-19T09:06:11Z", "commit": {"oid": "4ea2536b4f6d043b14028868293d4515345b3bb9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE0MjYxMjMw", "url": "https://github.com/eclipse/kapua/pull/2977#pullrequestreview-414261230", "createdAt": "2020-05-19T09:22:15Z", "commit": {"oid": "4ea2536b4f6d043b14028868293d4515345b3bb9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQwOToyMjoxNVrOGXXnWg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQwOToyMjoxNVrOGXXnWg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzE1NzMzOA==", "bodyText": "Which is the issue with this method?", "url": "https://github.com/eclipse/kapua/pull/2977#discussion_r427157338", "createdAt": "2020-05-19T09:22:15Z", "author": {"login": "Coduz"}, "path": "commons/src/main/java/org/eclipse/kapua/commons/util/KapuaFileUtils.java", "diffHunk": "@@ -79,6 +79,7 @@ public static File getAsFile(String filePath) throws KapuaSettingException {\n \n             if (hasHttpScheme(filePath)) {\n                 // FIXME:\n+                // After fixing this method, needs to adjust/fix the tests", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4ea2536b4f6d043b14028868293d4515345b3bb9"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c1c7b86d7f8a3b3416867d26c7d06add9d41f7fc", "author": {"user": null}, "url": "https://github.com/eclipse/kapua/commit/c1c7b86d7f8a3b3416867d26c7d06add9d41f7fc", "committedDate": "2020-05-19T10:32:26Z", "message": "Added JUnit test for Commons package\n\nSigned-off-by: code-incubus <nemanja.milutinovic@comtrade.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4ea2536b4f6d043b14028868293d4515345b3bb9", "author": {"user": null}, "url": "https://github.com/eclipse/kapua/commit/4ea2536b4f6d043b14028868293d4515345b3bb9", "committedDate": "2020-05-19T06:07:58Z", "message": "Added JUnit tests for Commons package\n\nSigned-off-by: code-incubus <nemanja.milutinovic@comtrade.com>"}, "afterCommit": {"oid": "c1c7b86d7f8a3b3416867d26c7d06add9d41f7fc", "author": {"user": null}, "url": "https://github.com/eclipse/kapua/commit/c1c7b86d7f8a3b3416867d26c7d06add9d41f7fc", "committedDate": "2020-05-19T10:32:26Z", "message": "Added JUnit test for Commons package\n\nSigned-off-by: code-incubus <nemanja.milutinovic@comtrade.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE0MzE1NzM3", "url": "https://github.com/eclipse/kapua/pull/2977#pullrequestreview-414315737", "createdAt": "2020-05-19T10:34:55Z", "commit": {"oid": "c1c7b86d7f8a3b3416867d26c7d06add9d41f7fc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE0MzY4MTMy", "url": "https://github.com/eclipse/kapua/pull/2977#pullrequestreview-414368132", "createdAt": "2020-05-19T11:53:31Z", "commit": {"oid": "c1c7b86d7f8a3b3416867d26c7d06add9d41f7fc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 173, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}