{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY2NTQ1ODc1", "number": 1236, "title": "Updated to use junit 5 parameterization", "bodyText": "", "createdAt": "2020-01-23T20:11:44Z", "url": "https://github.com/microsoft/mssql-jdbc/pull/1236", "merged": true, "mergeCommit": {"oid": "646816fe8738784289445eb0bbca8d9260ae2a32"}, "closed": true, "closedAt": "2020-01-31T00:36:22Z", "author": {"login": "lilgreenbird"}, "timelineItems": {"totalCount": 16, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb9P8toAH2gAyMzY2NTQ1ODc1OjE5NzA0NjdjZThjNWJjM2M3ODliNjM0MGE1MTM2NTQyZmJhMjRjYzc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb_kGGOAFqTM1MTIzNDAzMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "1970467ce8c5bc3c789b6340a5136542fba24cc7", "author": {"user": {"login": "lilgreenbird", "name": "lilgreenbird"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/1970467ce8c5bc3c789b6340a5136542fba24cc7", "committedDate": "2020-01-23T19:59:12Z", "message": "updated to use junit 5"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bd4781c1c9572e31657194aac4c4ede8702b383d", "author": {"user": {"login": "lilgreenbird", "name": "lilgreenbird"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/bd4781c1c9572e31657194aac4c4ede8702b383d", "committedDate": "2020-01-23T19:59:18Z", "message": "Merge remote-tracking branch 'upstream/dev' into aetestfix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "765eba262e66db58f4130bb4b796cb46d443cc25", "author": {"user": {"login": "lilgreenbird", "name": "lilgreenbird"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/765eba262e66db58f4130bb4b796cb46d443cc25", "committedDate": "2020-01-23T21:32:41Z", "message": "null check"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "709e01efb20747219324614d7cd90ab24825b271", "author": {"user": {"login": "lilgreenbird", "name": "lilgreenbird"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/709e01efb20747219324614d7cd90ab24825b271", "committedDate": "2020-01-23T23:33:39Z", "message": "fixed typo"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f552b119d67641073e892df6d0d134f0cde9baf4", "author": {"user": {"login": "lilgreenbird", "name": "lilgreenbird"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/f552b119d67641073e892df6d0d134f0cde9baf4", "committedDate": "2020-01-27T21:43:44Z", "message": "added connection string to error msg"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c56726e5994a8757de6892002ce350057dc2180c", "author": {"user": {"login": "lilgreenbird", "name": "lilgreenbird"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/c56726e5994a8757de6892002ce350057dc2180c", "committedDate": "2020-01-28T19:52:29Z", "message": "Merge remote-tracking branch 'upstream/dev' into aetestfix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f9572a3185c15545d51fd11a3102491c09b53ab0", "author": {"user": {"login": "lilgreenbird", "name": "lilgreenbird"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/f9572a3185c15545d51fd11a3102491c09b53ab0", "committedDate": "2020-01-28T23:43:47Z", "message": "add reqExternalSetup back to XA"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5053086e1170a867585da93fbaa8ba05c4a86f2f", "author": {"user": {"login": "lilgreenbird", "name": "lilgreenbird"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/5053086e1170a867585da93fbaa8ba05c4a86f2f", "committedDate": "2020-01-30T00:14:58Z", "message": "updated fail error string to only include enclave properties"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUwNTIwNzEy", "url": "https://github.com/microsoft/mssql-jdbc/pull/1236#pullrequestreview-350520712", "createdAt": "2020-01-30T00:40:17Z", "commit": {"oid": "5053086e1170a867585da93fbaa8ba05c4a86f2f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMFQwMDo0MDoxOFrOFjcRog==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMFQwMDo0MDoxOFrOFjcRog==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjcwNzc0Ng==", "bodyText": "whats the localhost check for?", "url": "https://github.com/microsoft/mssql-jdbc/pull/1236#discussion_r372707746", "createdAt": "2020-01-30T00:40:18Z", "author": {"login": "ulvii"}, "path": "src/test/java/com/microsoft/sqlserver/jdbc/AlwaysEncrypted/AESetup.java", "diffHunk": "@@ -169,33 +147,71 @@ public AESetup(String serverName, String url, String protocol) throws Exception\n             \"PlainDecimal decimal(30)\", \"PlainNumeric numeric(30)\"};\n \n     /**\n-     * Create connection, statement and generate path of resource file\n+     * This provides the arguments (serverName, enclaveAttestationUrl, enclaveAttestationProtocol) for the parameterized\n+     * tests using MethodSource parameters\n      * \n+     * @return\n      * @throws Exception\n      */\n-    @BeforeAll\n-    public static void setupAE() throws Exception {\n+    public static String[][] enclaveParams() throws Exception {\n+        setup();\n+\n+        String[][] param = new String[AbstractTest.enclaveServer.length][3];\n+\n+        for (int i = 0; i < enclaveServer.length; i++) {\n+            param[i][0] = enclaveServer[i];\n+            param[i][1] = null != enclaveAttestationUrl ? enclaveAttestationUrl[i] : null;\n+            param[i][2] = null != enclaveAttestationProtocol ? enclaveAttestationProtocol[i] : null;\n+        }\n+\n+        return param;\n+    }\n+\n+    /**\n+     * Get the AE connection string\n+     * \n+     * @param serverName\n+     * @param url\n+     * @param protocol\n+     */\n+    void setAEConnectionString(String serverName, String url, String protocol) {\n         // skip CI unix tests with localhost servers\n         if (!connectionString.substring(Constants.JDBC_PREFIX.length()).split(Constants.SEMI_COLON)[0]\n-                .contains(\"localhost\") && null != enclaveServer) {\n+                .contains(\"localhost\") && null != serverName) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5053086e1170a867585da93fbaa8ba05c4a86f2f"}, "originalPosition": 103}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e305a098c90939e8091478470c097209911e2164", "author": {"user": {"login": "lilgreenbird", "name": "lilgreenbird"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/e305a098c90939e8091478470c097209911e2164", "committedDate": "2020-01-30T01:30:21Z", "message": "added check for sql linux"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "92489bb8cf94c947eb078b34aa996f71dde29159", "author": {"user": {"login": "lilgreenbird", "name": "lilgreenbird"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/92489bb8cf94c947eb078b34aa996f71dde29159", "committedDate": "2020-01-30T01:46:46Z", "message": "updated linux check to be compat for all servers"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "74397d5315ecefd0fc5dbe84d7013058c75d15b2", "author": {"user": {"login": "lilgreenbird", "name": "lilgreenbird"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/74397d5315ecefd0fc5dbe84d7013058c75d15b2", "committedDate": "2020-01-30T20:47:42Z", "message": "add progress for multiple servers"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUxMTg1MzU3", "url": "https://github.com/microsoft/mssql-jdbc/pull/1236#pullrequestreview-351185357", "createdAt": "2020-01-30T22:25:19Z", "commit": {"oid": "74397d5315ecefd0fc5dbe84d7013058c75d15b2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUxMjI4OTM0", "url": "https://github.com/microsoft/mssql-jdbc/pull/1236#pullrequestreview-351228934", "createdAt": "2020-01-31T00:18:44Z", "commit": {"oid": "74397d5315ecefd0fc5dbe84d7013058c75d15b2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "59b73cff0458c771af4e39b3d856a4b310cc19c1", "author": {"user": {"login": "lilgreenbird", "name": "lilgreenbird"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/59b73cff0458c771af4e39b3d856a4b310cc19c1", "committedDate": "2020-01-31T00:18:44Z", "message": "Merge remote-tracking branch 'upstream/dev' into aetestfix"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUxMjM0MDMw", "url": "https://github.com/microsoft/mssql-jdbc/pull/1236#pullrequestreview-351234030", "createdAt": "2020-01-31T00:35:24Z", "commit": {"oid": "59b73cff0458c771af4e39b3d856a4b310cc19c1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2665, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}