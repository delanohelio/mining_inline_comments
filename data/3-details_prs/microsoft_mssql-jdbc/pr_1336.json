{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE4Mjc4ODIx", "number": 1336, "title": "Add delayLoadingLobs", "bodyText": "Adds a property delayLoadingLobs which will cause all LOB objects retrieved from the ResultSet to not be streamed.\nThe driver does this by setting a boolean on every LOB object when retrieved via a getter. This boolean is then used by the LOB object when users call stream getters.", "createdAt": "2020-05-14T22:32:27Z", "url": "https://github.com/microsoft/mssql-jdbc/pull/1336", "merged": true, "mergeCommit": {"oid": "54c67488d881f7075c4632967ec0d5a558138c69"}, "closed": true, "closedAt": "2020-05-26T20:30:03Z", "author": {"login": "rene-ye"}, "timelineItems": {"totalCount": 32, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcgR1HuAH2gAyNDE4Mjc4ODIxOjEzZmM2OWFiOTUxMGUyMWVmZDhiNjY1YWEwODFmMTgwZDg5MzdjNmM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABclKnJCgFqTQxODY1MDk4OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "13fc69ab9510e21efd8b665aa081f180d8937c6c", "author": {"user": {"login": "rene-ye", "name": "v-reye"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/13fc69ab9510e21efd8b665aa081f180d8937c6c", "committedDate": "2020-05-11T15:58:04Z", "message": "Add property"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e994670507d926480681311d3521cb0b3b6cf3ae", "author": {"user": {"login": "rene-ye", "name": "v-reye"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/e994670507d926480681311d3521cb0b3b6cf3ae", "committedDate": "2020-05-11T16:43:16Z", "message": "Add resource"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4c1e3ef067f058de02c97d52e4f5b14acd4f050b", "author": {"user": {"login": "rene-ye", "name": "v-reye"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/4c1e3ef067f058de02c97d52e4f5b14acd4f050b", "committedDate": "2020-05-12T16:29:15Z", "message": "Fix nullptr"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8708f10d1f3ec607ff9bafdbd77f718e7276cc24", "author": {"user": {"login": "rene-ye", "name": "v-reye"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/8708f10d1f3ec607ff9bafdbd77f718e7276cc24", "committedDate": "2020-05-21T21:30:58Z", "message": "change loadLargeObjects to delayLoadingLobs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8aaeff91bb311ea217237cbcfa64fc3489647b91", "author": {"user": {"login": "rene-ye", "name": "v-reye"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/8aaeff91bb311ea217237cbcfa64fc3489647b91", "committedDate": "2020-05-21T22:43:58Z", "message": "add tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7d26080f12acd1452f451ef5a2173f05585c4bcd", "author": {"user": {"login": "rene-ye", "name": "v-reye"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/7d26080f12acd1452f451ef5a2173f05585c4bcd", "committedDate": "2020-05-22T16:14:40Z", "message": "quick fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2493e8134480785ec3ba52c02fd37532023ee674", "author": {"user": {"login": "rene-ye", "name": "v-reye"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/2493e8134480785ec3ba52c02fd37532023ee674", "committedDate": "2020-05-22T17:24:27Z", "message": "Merge branch 'dev' of https://github.com/Microsoft/mssql-jdbc into blob\n\n# Conflicts:\n#\tsrc/main/java/com/microsoft/sqlserver/jdbc/ISQLServerDataSource.java\n#\tsrc/main/java/com/microsoft/sqlserver/jdbc/SQLServerConnection.java\n#\tsrc/main/java/com/microsoft/sqlserver/jdbc/SQLServerDriver.java"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3MTIzOTEz", "url": "https://github.com/microsoft/mssql-jdbc/pull/1336#pullrequestreview-417123913", "createdAt": "2020-05-22T18:55:17Z", "commit": {"oid": "2493e8134480785ec3ba52c02fd37532023ee674"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxODo1NToxN1rOGZg3NA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxODo1NToxN1rOGZg3NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTQwNjAwNA==", "bodyText": "instead of streaming them.", "url": "https://github.com/microsoft/mssql-jdbc/pull/1336#discussion_r429406004", "createdAt": "2020-05-22T18:55:17Z", "author": {"login": "peterbae"}, "path": "src/main/java/com/microsoft/sqlserver/jdbc/ISQLServerDataSource.java", "diffHunk": "@@ -992,6 +992,21 @@\n     void setClientKeyPassword(String password);\n \n     /**\n+     * Specifies the flag to load LOBs instead of stream them.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2493e8134480785ec3ba52c02fd37532023ee674"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3MTYwNzg3", "url": "https://github.com/microsoft/mssql-jdbc/pull/1336#pullrequestreview-417160787", "createdAt": "2020-05-22T20:09:22Z", "commit": {"oid": "2493e8134480785ec3ba52c02fd37532023ee674"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQyMDowOToyM1rOGZik9Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQyMDowOToyM1rOGZik9Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTQzNDEwMQ==", "bodyText": "Can you refactor this loadLob variable name to delayLoadingLobs to maintain consistency? It will make it easier to search for its usage in the future if we were to come back to this feature", "url": "https://github.com/microsoft/mssql-jdbc/pull/1336#discussion_r429434101", "createdAt": "2020-05-22T20:09:23Z", "author": {"login": "peterbae"}, "path": "src/main/java/com/microsoft/sqlserver/jdbc/SQLServerBlob.java", "diffHunk": "@@ -53,6 +53,12 @@\n \n     private final String traceID;\n \n+    private boolean loadLob = false;\n+\n+    void setStreaming(boolean b) {\n+        loadLob = b;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2493e8134480785ec3ba52c02fd37532023ee674"}, "originalPosition": 7}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3MTYzMzY2", "url": "https://github.com/microsoft/mssql-jdbc/pull/1336#pullrequestreview-417163366", "createdAt": "2020-05-22T20:15:34Z", "commit": {"oid": "2493e8134480785ec3ba52c02fd37532023ee674"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQyMDoxNTozNFrOGZisvg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQyMDoxNTozNFrOGZisvg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTQzNjA5NA==", "bodyText": "We usually put descriptions along with other descriptions, so to not mix errors and descriptions together. Can you move this description to where the other descriptions are?", "url": "https://github.com/microsoft/mssql-jdbc/pull/1336#discussion_r429436094", "createdAt": "2020-05-22T20:15:34Z", "author": {"login": "peterbae"}, "path": "src/main/java/com/microsoft/sqlserver/jdbc/SQLServerResource.java", "diffHunk": "@@ -643,5 +643,7 @@ static String getResource(String key) {\n             {\"R_pvkParseError\", \"Could not read Private Key from PVK, check the password provided.\"},\n             {\"R_pvkHeaderError\", \"Cannot parse the PVK, PVK file does not contain the correct header.\"},\n             {\"R_clientCertError\", \"Reading client certificate failed. Please verify the location of the certificate.\"},\n-            {\"R_unassignableError\", \"The class specified by the {0} property must be assignable to {1}.\"}};\n+            {\"R_unassignableError\", \"The class specified by the {0} property must be assignable to {1}.\"},\n+            {\"R_delayLoadingLobsPropertyDescription\",\n+            \"Boolean flag which indicates whether the driver will load LOB datatypes into memeory.\"}};", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2493e8134480785ec3ba52c02fd37532023ee674"}, "originalPosition": 7}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3MTY5NDc0", "url": "https://github.com/microsoft/mssql-jdbc/pull/1336#pullrequestreview-417169474", "createdAt": "2020-05-22T20:34:06Z", "commit": {"oid": "2493e8134480785ec3ba52c02fd37532023ee674"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQyMDozNDowNlrOGZi_uQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQyMDozNDowNlrOGZi_uQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTQ0MDk1Mw==", "bodyText": "Add DataSource getter/setter test cases.", "url": "https://github.com/microsoft/mssql-jdbc/pull/1336#discussion_r429440953", "createdAt": "2020-05-22T20:34:06Z", "author": {"login": "peterbae"}, "path": "src/test/java/com/microsoft/sqlserver/jdbc/unit/lobs/LobsTest.java", "diffHunk": "@@ -9,12 +9,16 @@\n import static org.junit.jupiter.api.Assertions.assertTrue;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2493e8134480785ec3ba52c02fd37532023ee674"}, "originalPosition": 1}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3MTk1MzM1", "url": "https://github.com/microsoft/mssql-jdbc/pull/1336#pullrequestreview-417195335", "createdAt": "2020-05-22T21:37:47Z", "commit": {"oid": "2493e8134480785ec3ba52c02fd37532023ee674"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQyMTozNzo0N1rOGZkTRA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQyMTozNzo0N1rOGZkTRA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTQ2MjM0MA==", "bodyText": "addOrOverrideProperty actually only appends the connection property at the end, so loadedString ends up having both delayLoadingLobs=true and delayedLoadingLobs=false in it. I tested to make sure that the test is working as intended (as in, loadedString should honor delayLoadingLobs=false), but you should be aware of this fyi.", "url": "https://github.com/microsoft/mssql-jdbc/pull/1336#discussion_r429462340", "createdAt": "2020-05-22T21:37:47Z", "author": {"login": "peterbae"}, "path": "src/test/java/com/microsoft/sqlserver/jdbc/unit/lobs/LobsTest.java", "diffHunk": "@@ -579,6 +583,221 @@ public void readMultipleBlobStreamsThenCloseRS() throws Exception {\n         }\n     }\n \n+    @Test\n+    @DisplayName(\"testBlobNotStreaming\")\n+    public void testBlobNotStreaming() throws SQLException, IOException {\n+        String types[] = {\"varbinary(max)\"};\n+        table = createTable(table, types, false);\n+\n+        int bufferSize = 10000;\n+        byte[] data = new byte[bufferSize];\n+        try (Connection conn = getConnection(); PreparedStatement pstmt = conn\n+                .prepareStatement(\"INSERT INTO \" + table.getEscapedTableName() + \"  VALUES(?,?)\")) {\n+            Blob b = conn.createBlob();\n+            Constants.RANDOM.nextBytes(data);\n+            b.setBytes(1, data);\n+            pstmt.setInt(1, 1);\n+            pstmt.setBlob(2, b);\n+            pstmt.executeUpdate();\n+        }\n+\n+        String streamString = TestUtils.addOrOverrideProperty(connectionString, \"delayLoadingLobs\", \"true\");\n+        String loadedString = TestUtils.addOrOverrideProperty(streamString, \"delayLoadingLobs\", \"false\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2493e8134480785ec3ba52c02fd37532023ee674"}, "originalPosition": 40}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3MTk1NTUy", "url": "https://github.com/microsoft/mssql-jdbc/pull/1336#pullrequestreview-417195552", "createdAt": "2020-05-22T21:38:25Z", "commit": {"oid": "2493e8134480785ec3ba52c02fd37532023ee674"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQyMTozODoyNVrOGZkT6w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQyMTozODoyNVrOGZkT6w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTQ2MjUwNw==", "bodyText": "This is a public method so it needs javadoc.", "url": "https://github.com/microsoft/mssql-jdbc/pull/1336#discussion_r429462507", "createdAt": "2020-05-22T21:38:25Z", "author": {"login": "peterbae"}, "path": "src/test/java/com/microsoft/sqlserver/jdbc/unit/lobs/LobsTest.java", "diffHunk": "@@ -579,6 +583,221 @@ public void readMultipleBlobStreamsThenCloseRS() throws Exception {\n         }\n     }\n \n+    @Test", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2493e8134480785ec3ba52c02fd37532023ee674"}, "originalPosition": 21}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3MjE0ODkz", "url": "https://github.com/microsoft/mssql-jdbc/pull/1336#pullrequestreview-417214893", "createdAt": "2020-05-22T22:40:01Z", "commit": {"oid": "2493e8134480785ec3ba52c02fd37532023ee674"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQyMjo0MDowMVrOGZlbng==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQyMjo0MDowMVrOGZlbng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTQ4MDg2Mg==", "bodyText": "I think you should add a case where you create a stream out of a ResultSet, close the resultset, then try to read from the stream. The tests below test that existing functionality is still supported, but doesn't verify the case that was intended to be fixed in this PR.", "url": "https://github.com/microsoft/mssql-jdbc/pull/1336#discussion_r429480862", "createdAt": "2020-05-22T22:40:01Z", "author": {"login": "peterbae"}, "path": "src/test/java/com/microsoft/sqlserver/jdbc/unit/lobs/LobsTest.java", "diffHunk": "@@ -9,12 +9,16 @@\n import static org.junit.jupiter.api.Assertions.assertTrue;\n \n import java.io.BufferedInputStream;\n+import java.io.BufferedReader;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2493e8134480785ec3ba52c02fd37532023ee674"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3MjE3MTAw", "url": "https://github.com/microsoft/mssql-jdbc/pull/1336#pullrequestreview-417217100", "createdAt": "2020-05-22T22:52:20Z", "commit": {"oid": "2493e8134480785ec3ba52c02fd37532023ee674"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQyMjo1MjoyMVrOGZlixA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQyMjo1MjoyMVrOGZlixA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTQ4MjY5Mg==", "bodyText": "I think a minor improvement here would be consolidate the two if statements that are on line 153 and 157 into one, then have a nested if statement that only checks for loadLob since the other two conditions are checked twice.", "url": "https://github.com/microsoft/mssql-jdbc/pull/1336#discussion_r429482692", "createdAt": "2020-05-22T22:52:21Z", "author": {"login": "peterbae"}, "path": "src/main/java/com/microsoft/sqlserver/jdbc/SQLServerBlob.java", "diffHunk": "@@ -143,6 +149,11 @@ private void checkClosed() throws SQLServerException {\n     @Override\n     public InputStream getBinaryStream() throws SQLException {\n         checkClosed();\n+        // If the LOB is currently streaming and the stream hasn't been read, read it.\n+        if (null == value && !activeStreams.isEmpty() && loadLob) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2493e8134480785ec3ba52c02fd37532023ee674"}, "originalPosition": 18}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b64fa12df91b3f0a36f90e8bf0656025e2c1b4d4", "author": {"user": {"login": "rene-ye", "name": "v-reye"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/b64fa12df91b3f0a36f90e8bf0656025e2c1b4d4", "committedDate": "2020-05-25T16:48:33Z", "message": "address comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3ODQ4OTA2", "url": "https://github.com/microsoft/mssql-jdbc/pull/1336#pullrequestreview-417848906", "createdAt": "2020-05-25T19:10:49Z", "commit": {"oid": "b64fa12df91b3f0a36f90e8bf0656025e2c1b4d4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQxOToxMDo0OVrOGaIOeg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQxOToxMDo0OVrOGaIOeg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDA1MDkzOA==", "bodyText": "Shouldn't this setter take in a boolean value, so that the user can go back and forth between setting this to true or false?  The comment also seems to suggest this setter should be able to provide that functionality.", "url": "https://github.com/microsoft/mssql-jdbc/pull/1336#discussion_r430050938", "createdAt": "2020-05-25T19:10:49Z", "author": {"login": "peterbae"}, "path": "src/main/java/com/microsoft/sqlserver/jdbc/SQLServerLob.java", "diffHunk": "@@ -21,4 +21,13 @@\n      * @throws SQLException\n      */\n     abstract void fillFromStream() throws SQLException;\n+\n+    protected boolean delayLoadingLob = true;\n+    /**\n+     * Provides functionality for the result set to set whether to load the LOB objects fully. Setting this property to\n+     * TRUE will cause LOBs to be loaded into memory. The default behavior is FALSE.\n+     */\n+    void setDelayLoadingLob() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b64fa12df91b3f0a36f90e8bf0656025e2c1b4d4"}, "originalPosition": 10}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3ODQ5MzE1", "url": "https://github.com/microsoft/mssql-jdbc/pull/1336#pullrequestreview-417849315", "createdAt": "2020-05-25T19:12:16Z", "commit": {"oid": "b64fa12df91b3f0a36f90e8bf0656025e2c1b4d4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQxOToxMjoxNlrOGaIPxw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQxOToxMjoxNlrOGaIPxw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDA1MTI3MQ==", "bodyText": "Remove this comma at the end", "url": "https://github.com/microsoft/mssql-jdbc/pull/1336#discussion_r430051271", "createdAt": "2020-05-25T19:12:16Z", "author": {"login": "peterbae"}, "path": "src/main/java/com/microsoft/sqlserver/jdbc/SQLServerResource.java", "diffHunk": "@@ -643,5 +645,5 @@ static String getResource(String key) {\n             {\"R_pvkParseError\", \"Could not read Private Key from PVK, check the password provided.\"},\n             {\"R_pvkHeaderError\", \"Cannot parse the PVK, PVK file does not contain the correct header.\"},\n             {\"R_clientCertError\", \"Reading client certificate failed. Please verify the location of the certificate.\"},\n-            {\"R_unassignableError\", \"The class specified by the {0} property must be assignable to {1}.\"}};\n+            {\"R_unassignableError\", \"The class specified by the {0} property must be assignable to {1}.\"},};", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b64fa12df91b3f0a36f90e8bf0656025e2c1b4d4"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3ODYzMzMy", "url": "https://github.com/microsoft/mssql-jdbc/pull/1336#pullrequestreview-417863332", "createdAt": "2020-05-25T20:11:05Z", "commit": {"oid": "b64fa12df91b3f0a36f90e8bf0656025e2c1b4d4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQyMDoxMTowNVrOGaI_0Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQyMDoxMTowNVrOGaI_0Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDA2MzU2OQ==", "bodyText": "I don't think this file is formatted, can you format it?", "url": "https://github.com/microsoft/mssql-jdbc/pull/1336#discussion_r430063569", "createdAt": "2020-05-25T20:11:05Z", "author": {"login": "peterbae"}, "path": "src/test/java/com/microsoft/sqlserver/jdbc/unit/lobs/LobsTest.java", "diffHunk": "@@ -9,12 +9,16 @@\n import static org.junit.jupiter.api.Assertions.assertTrue;\n \n import java.io.BufferedInputStream;\n+import java.io.BufferedReader;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b64fa12df91b3f0a36f90e8bf0656025e2c1b4d4"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5f1b0f7344a04e4670a408f1cfa1d79fe9c4194f", "author": {"user": {"login": "rene-ye", "name": "v-reye"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/5f1b0f7344a04e4670a408f1cfa1d79fe9c4194f", "committedDate": "2020-05-25T21:18:12Z", "message": "format"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3ODc5MDM2", "url": "https://github.com/microsoft/mssql-jdbc/pull/1336#pullrequestreview-417879036", "createdAt": "2020-05-25T21:21:39Z", "commit": {"oid": "5f1b0f7344a04e4670a408f1cfa1d79fe9c4194f"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3OTExNDg4", "url": "https://github.com/microsoft/mssql-jdbc/pull/1336#pullrequestreview-417911488", "createdAt": "2020-05-26T00:43:42Z", "commit": {"oid": "5f1b0f7344a04e4670a408f1cfa1d79fe9c4194f"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3OTIwOTY1", "url": "https://github.com/microsoft/mssql-jdbc/pull/1336#pullrequestreview-417920965", "createdAt": "2020-05-26T01:32:06Z", "commit": {"oid": "5f1b0f7344a04e4670a408f1cfa1d79fe9c4194f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQwMTozMjowNlrOGaMI0A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQwMTozMjowNlrOGaMI0A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDExNTAyNA==", "bodyText": "null check for activeStream, multiple places", "url": "https://github.com/microsoft/mssql-jdbc/pull/1336#discussion_r430115024", "createdAt": "2020-05-26T01:32:06Z", "author": {"login": "lilgreenbird"}, "path": "src/main/java/com/microsoft/sqlserver/jdbc/SQLServerBlob.java", "diffHunk": "@@ -143,6 +143,11 @@ private void checkClosed() throws SQLServerException {\n     @Override\n     public InputStream getBinaryStream() throws SQLException {\n         checkClosed();\n+        // If the LOB is currently streaming and the stream hasn't been read, read it.\n+        if (!delayLoadingLob && null == value && !activeStreams.isEmpty()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5f1b0f7344a04e4670a408f1cfa1d79fe9c4194f"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "89a6a48d319dcbdb20955562474fc39aef2a8c68", "author": {"user": {"login": "rene-ye", "name": "v-reye"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/89a6a48d319dcbdb20955562474fc39aef2a8c68", "committedDate": "2020-05-26T16:45:05Z", "message": "small test fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f79f76d67069b1cd2fd2742661992c4a6e44603b", "author": {"user": {"login": "rene-ye", "name": "v-reye"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/f79f76d67069b1cd2fd2742661992c4a6e44603b", "committedDate": "2020-05-26T16:45:44Z", "message": "Merge branch 'blob' of https://github.com/rene-ye/mssql-jdbc into blob"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4NTM0MTYz", "url": "https://github.com/microsoft/mssql-jdbc/pull/1336#pullrequestreview-418534163", "createdAt": "2020-05-26T17:46:41Z", "commit": {"oid": "f79f76d67069b1cd2fd2742661992c4a6e44603b"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4NTM4MTM5", "url": "https://github.com/microsoft/mssql-jdbc/pull/1336#pullrequestreview-418538139", "createdAt": "2020-05-26T17:52:06Z", "commit": {"oid": "f79f76d67069b1cd2fd2742661992c4a6e44603b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4NTM5ODA3", "url": "https://github.com/microsoft/mssql-jdbc/pull/1336#pullrequestreview-418539807", "createdAt": "2020-05-26T17:54:19Z", "commit": {"oid": "f79f76d67069b1cd2fd2742661992c4a6e44603b"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4f856a2a0e73ba0128fe8138197f52e0d557cba9", "author": {"user": {"login": "rene-ye", "name": "v-reye"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/4f856a2a0e73ba0128fe8138197f52e0d557cba9", "committedDate": "2020-05-26T17:56:51Z", "message": "Merge branch 'dev' of https://github.com/Microsoft/mssql-jdbc into blob\n\n# Conflicts:\n#\tsrc/main/java/com/microsoft/sqlserver/jdbc/SQLServerResource.java"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4NTYxODEx", "url": "https://github.com/microsoft/mssql-jdbc/pull/1336#pullrequestreview-418561811", "createdAt": "2020-05-26T18:22:10Z", "commit": {"oid": "4f856a2a0e73ba0128fe8138197f52e0d557cba9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4NjI3MjA4", "url": "https://github.com/microsoft/mssql-jdbc/pull/1336#pullrequestreview-418627208", "createdAt": "2020-05-26T19:47:21Z", "commit": {"oid": "4f856a2a0e73ba0128fe8138197f52e0d557cba9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4NjUwOTg5", "url": "https://github.com/microsoft/mssql-jdbc/pull/1336#pullrequestreview-418650989", "createdAt": "2020-05-26T20:23:05Z", "commit": {"oid": "4f856a2a0e73ba0128fe8138197f52e0d557cba9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2547, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}