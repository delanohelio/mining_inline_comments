{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA1MjI2ODUx", "number": 1317, "title": "Fix | Use a StringBuilder for 'result'", "bodyText": "Fixes issue #1304.", "createdAt": "2020-04-17T16:24:21Z", "url": "https://github.com/microsoft/mssql-jdbc/pull/1317", "merged": true, "mergeCommit": {"oid": "2323091b13cbe6f012bb47bf9a348eca8490b145"}, "closed": true, "closedAt": "2020-05-06T17:54:50Z", "author": {"login": "rene-ye"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcYjzqJAH2gAyNDA1MjI2ODUxOmNkZDUzZmZiMDI2OTc2NDFmYzc2OGYwNTE1ZTVlMDIwZDEyOWUzODQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcesfikgFqTQwNjg1MzAxMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "cdd53ffb02697641fc768f0515e5e020d129e384", "author": {"user": {"login": "rene-ye", "name": "v-reye"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/cdd53ffb02697641fc768f0515e5e020d129e384", "committedDate": "2020-04-17T16:23:22Z", "message": "change to stringbuilder"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f8e32471968abcd799ee5305179e845105bf4920", "author": {"user": {"login": "rene-ye", "name": "v-reye"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/f8e32471968abcd799ee5305179e845105bf4920", "committedDate": "2020-04-30T16:24:46Z", "message": "fix?"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0MzIzNzU2", "url": "https://github.com/microsoft/mssql-jdbc/pull/1317#pullrequestreview-404323756", "createdAt": "2020-05-01T18:31:01Z", "commit": {"oid": "f8e32471968abcd799ee5305179e845105bf4920"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMVQxODozMTowMVrOGPR5Rg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMVQxODozMTowMVrOGPR5Rg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODY3NTAxNA==", "bodyText": "Why are these else cases handled differently? I think these should also be replaced by result.append(ch);?", "url": "https://github.com/microsoft/mssql-jdbc/pull/1317#discussion_r418675014", "createdAt": "2020-05-01T18:31:01Z", "author": {"login": "peterbae"}, "path": "src/main/java/com/microsoft/sqlserver/jdbc/Util.java", "diffHunk": "@@ -370,7 +357,7 @@ else if (ch == ':')\n                         }\n                         // same state\n                     } else {\n-                        builder = new StringBuilder();\n+                        StringBuilder builder = new StringBuilder();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f8e32471968abcd799ee5305179e845105bf4920"}, "originalPosition": 113}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0MzI1Nzky", "url": "https://github.com/microsoft/mssql-jdbc/pull/1317#pullrequestreview-404325792", "createdAt": "2020-05-01T18:34:51Z", "commit": {"oid": "f8e32471968abcd799ee5305179e845105bf4920"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMVQxODozNDo1MVrOGPR_6w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMVQxODozNDo1MVrOGPR_6w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODY3NjcxNQ==", "bodyText": "Lines 477 and 484 will probably error out, because property variable is actually not defined here. You should declare property as a String every time, or move up the declaration of line 468 to somewhere above.", "url": "https://github.com/microsoft/mssql-jdbc/pull/1317#discussion_r418676715", "createdAt": "2020-05-01T18:34:51Z", "author": {"login": "peterbae"}, "path": "src/main/java/com/microsoft/sqlserver/jdbc/Util.java", "diffHunk": "@@ -478,27 +465,27 @@ else if (ch == ':')\n         // Exit\n         switch (state) {\n             case inServerName:\n-                result = result.trim();\n-                if (result.length() > 0) {\n+                String property = result.toString().trim();\n+                if (property.length() > 0) {\n                     if (logger.isLoggable(Level.FINE)) {\n-                        logger.fine(\"Property:serverName \" + \"Value:\" + result);\n+                        logger.fine(\"Property:serverName \" + \"Value:\" + property);\n                     }\n-                    p.put(SQLServerDriverStringProperty.SERVER_NAME.toString(), result);\n+                    p.put(SQLServerDriverStringProperty.SERVER_NAME.toString(), property);\n                 }\n                 break;\n             case inPort:\n-                result = result.trim();\n+                property = result.toString().trim();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f8e32471968abcd799ee5305179e845105bf4920"}, "originalPosition": 162}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0NDg2NjE3", "url": "https://github.com/microsoft/mssql-jdbc/pull/1317#pullrequestreview-404486617", "createdAt": "2020-05-02T01:11:36Z", "commit": {"oid": "f8e32471968abcd799ee5305179e845105bf4920"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMlQwMToxMTozNlrOGPaB2Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMlQwMToxMTozNlrOGPaB2Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODgwODI4MQ==", "bodyText": "Please add tests for the changes you are making.", "url": "https://github.com/microsoft/mssql-jdbc/pull/1317#discussion_r418808281", "createdAt": "2020-05-02T01:11:36Z", "author": {"login": "ulvii"}, "path": "src/main/java/com/microsoft/sqlserver/jdbc/Util.java", "diffHunk": "@@ -242,10 +242,9 @@ static void writeLong(long value, byte valueBytes[], int offset) {\n         Properties p = new Properties();\n         String tmpUrl = url;\n         String sPrefix = \"jdbc:sqlserver://\";\n-        String result = \"\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f8e32471968abcd799ee5305179e845105bf4920"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA1OTkzMDU5", "url": "https://github.com/microsoft/mssql-jdbc/pull/1317#pullrequestreview-405993059", "createdAt": "2020-05-05T17:14:09Z", "commit": {"oid": "f8e32471968abcd799ee5305179e845105bf4920"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA2ODQ5NTE4", "url": "https://github.com/microsoft/mssql-jdbc/pull/1317#pullrequestreview-406849518", "createdAt": "2020-05-06T17:49:45Z", "commit": {"oid": "f8e32471968abcd799ee5305179e845105bf4920"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA2ODUzMDEy", "url": "https://github.com/microsoft/mssql-jdbc/pull/1317#pullrequestreview-406853012", "createdAt": "2020-05-06T17:54:05Z", "commit": {"oid": "f8e32471968abcd799ee5305179e845105bf4920"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2524, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}