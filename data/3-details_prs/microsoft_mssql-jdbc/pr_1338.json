{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIwNTE5NTkz", "number": 1338, "title": "Feature | Added support for Data Classification v2", "bodyText": "", "createdAt": "2020-05-20T05:40:10Z", "url": "https://github.com/microsoft/mssql-jdbc/pull/1338", "merged": true, "mergeCommit": {"oid": "c9846285ec2f9368577101ecb117186844ef3437"}, "closed": true, "closedAt": "2020-06-24T17:27:49Z", "author": {"login": "lilgreenbird"}, "timelineItems": {"totalCount": 29, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcBa8qiAH2gAyNDIwNTE5NTkzOmM5N2I4NjNjOTUzODViZGNkMWFmYzg5N2VmMzljYmViYWY0OTU1Nzg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcuc8R_gFqTQzNjgyOTc2MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c97b863c95385bdcd1afc897ef39cbebaf495578", "author": {"user": {"login": "lilgreenbird", "name": "lilgreenbird"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/c97b863c95385bdcd1afc897ef39cbebaf495578", "committedDate": "2020-02-05T19:03:48Z", "message": "Fix AEv2 tests exclude for reqExternalSetup and cleanup (#1247)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "54b5a194e5d46552419c86e0d1f8c800f42d3de8", "author": {"user": {"login": "peterbae", "name": "Peter Bae"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/54b5a194e5d46552419c86e0d1f8c800f42d3de8", "committedDate": "2020-02-08T00:19:05Z", "message": "Fix | Add null check for getObject() with LocalTime and LocalDate (#1250)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "672b7d67caae75250c53f82a760e8d3880e62a37", "author": {"user": {"login": "lilgreenbird", "name": "lilgreenbird"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/672b7d67caae75250c53f82a760e8d3880e62a37", "committedDate": "2020-02-10T19:04:22Z", "message": "added all AKV tests to use reqExternalSetup tag so they will be skipped by default (#1254)\n\n* skip AKV test properly\r\n\r\n* removed enclave properties string to failed errors as enclave tests could be skipped"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3c3331b7b0ff1b27b1e80271bf9ffdc6aae7be79", "author": {"user": {"login": "lilgreenbird", "name": "lilgreenbird"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/3c3331b7b0ff1b27b1e80271bf9ffdc6aae7be79", "committedDate": "2020-03-25T06:21:47Z", "message": "Merge remote-tracking branch 'upstream/dev' into dev"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e2c5640370daa89c0d8c1559b5791e99656f78c8", "author": {"user": {"login": "lilgreenbird", "name": "lilgreenbird"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/e2c5640370daa89c0d8c1559b5791e99656f78c8", "committedDate": "2020-03-26T06:10:08Z", "message": "Merge remote-tracking branch 'upstream/dev' into dev"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aad696640378b75f3cb8cb24cc2fa299358db9ac", "author": {"user": {"login": "lilgreenbird", "name": "lilgreenbird"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/aad696640378b75f3cb8cb24cc2fa299358db9ac", "committedDate": "2020-03-28T03:18:02Z", "message": "Merge remote-tracking branch 'upstream/dev' into dev"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "92bf04c2787c3b2a704f641f50cb4a83193f1d6d", "author": {"user": {"login": "lilgreenbird", "name": "lilgreenbird"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/92bf04c2787c3b2a704f641f50cb4a83193f1d6d", "committedDate": "2020-03-31T01:58:20Z", "message": "Merge remote-tracking branch 'upstream/dev' into dev"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3ba5ab72008501e23f43dbcbcc333775320ddafa", "author": {"user": {"login": "lilgreenbird", "name": "lilgreenbird"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/3ba5ab72008501e23f43dbcbcc333775320ddafa", "committedDate": "2020-04-04T05:47:37Z", "message": "Merge remote-tracking branch 'upstream/dev' into dev"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d20823deffea162b2b17b079cc291f91269558aa", "author": {"user": {"login": "lilgreenbird", "name": "lilgreenbird"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/d20823deffea162b2b17b079cc291f91269558aa", "committedDate": "2020-04-07T00:45:05Z", "message": "Merge remote-tracking branch 'upstream/dev' into dev"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4cc959f7e76eedbf49e30e5b92de43c86d7eb803", "author": {"user": {"login": "lilgreenbird", "name": "lilgreenbird"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/4cc959f7e76eedbf49e30e5b92de43c86d7eb803", "committedDate": "2020-04-29T02:59:23Z", "message": "Merge remote-tracking branch 'upstream/dev' into dev"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7b301f8184b26da4d99b2feab8b2aea886c01cea", "author": {"user": {"login": "lilgreenbird", "name": "lilgreenbird"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/7b301f8184b26da4d99b2feab8b2aea886c01cea", "committedDate": "2020-04-30T06:36:21Z", "message": "Merge remote-tracking branch 'upstream/dev' into dev"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "56bcf139fe6acd87c41b3829b4f157c59bd9f873", "author": {"user": {"login": "lilgreenbird", "name": "lilgreenbird"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/56bcf139fe6acd87c41b3829b4f157c59bd9f873", "committedDate": "2020-05-07T22:26:03Z", "message": "Merge remote-tracking branch 'upstream/dev' into dev"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "744e0ca78e57bc6c0db98910a9066d5b583c6ba8", "author": {"user": {"login": "lilgreenbird", "name": "lilgreenbird"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/744e0ca78e57bc6c0db98910a9066d5b583c6ba8", "committedDate": "2020-05-12T22:47:18Z", "message": "Merge remote-tracking branch 'upstream/dev' into dev"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8479062ad4a3c0277255479095da7541def34ec5", "author": {"user": {"login": "lilgreenbird", "name": "lilgreenbird"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/8479062ad4a3c0277255479095da7541def34ec5", "committedDate": "2020-05-16T04:50:00Z", "message": "dataclassification v2"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8dbcca62db19332d875aafe1d5ed93f6d879ce4a", "author": {"user": {"login": "lilgreenbird", "name": "lilgreenbird"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/8dbcca62db19332d875aafe1d5ed93f6d879ce4a", "committedDate": "2020-05-18T21:08:06Z", "message": "fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c64011d1a46345b88fdc1dd9e21f2e7da2cbfe71", "author": {"user": {"login": "lilgreenbird", "name": "lilgreenbird"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/c64011d1a46345b88fdc1dd9e21f2e7da2cbfe71", "committedDate": "2020-05-19T00:57:57Z", "message": "Merge remote-tracking branch 'upstream/dev' into dataclass"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "234512b6f5e89a9d3aed1cfd56a12416e1408261", "author": {"user": {"login": "lilgreenbird", "name": "lilgreenbird"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/234512b6f5e89a9d3aed1cfd56a12416e1408261", "committedDate": "2020-05-19T02:31:35Z", "message": "fixed typo"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "621bc2e5c56e38b74828fedce4cf5589b82b6943", "author": {"user": {"login": "lilgreenbird", "name": "lilgreenbird"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/621bc2e5c56e38b74828fedce4cf5589b82b6943", "committedDate": "2020-05-20T19:51:07Z", "message": "comment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7712b19ecbeeba633f82e63bba846e42fb45857d", "author": {"user": {"login": "lilgreenbird", "name": "lilgreenbird"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/7712b19ecbeeba633f82e63bba846e42fb45857d", "committedDate": "2020-06-10T21:22:25Z", "message": "resolved conflicts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "05993532bab653f3d508adf38ecc0ad7f38bee23", "author": {"user": {"login": "lilgreenbird", "name": "lilgreenbird"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/05993532bab653f3d508adf38ecc0ad7f38bee23", "committedDate": "2020-06-10T21:24:03Z", "message": "Merge branch 'dataclass' of https://github.com/lilgreenbird/mssql-jdbc into dataclass"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMwMDY5ODE1", "url": "https://github.com/microsoft/mssql-jdbc/pull/1338#pullrequestreview-430069815", "createdAt": "2020-06-12T22:34:37Z", "commit": {"oid": "05993532bab653f3d508adf38ecc0ad7f38bee23"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQyMjozNDozN1rOGjTMmw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQyMjozNDozN1rOGjTMmw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTY2Nzg2Nw==", "bodyText": "I think Azure now has DataClassification support. Could you remov Azure tags from tests and check if they pass?", "url": "https://github.com/microsoft/mssql-jdbc/pull/1338#discussion_r439667867", "createdAt": "2020-06-12T22:34:37Z", "author": {"login": "ulvii"}, "path": "src/test/java/com/microsoft/sqlserver/jdbc/resultset/DataClassificationTest.java", "diffHunk": "@@ -10,13 +10,19 @@\n import java.sql.Statement;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "05993532bab653f3d508adf38ecc0ad7f38bee23"}, "originalPosition": 1}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMwMDg4MzQx", "url": "https://github.com/microsoft/mssql-jdbc/pull/1338#pullrequestreview-430088341", "createdAt": "2020-06-12T23:58:11Z", "commit": {"oid": "05993532bab653f3d508adf38ecc0ad7f38bee23"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQyMzo1ODoxMVrOGjUK3Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQyMzo1ODoxMVrOGjUK3Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTY4MzgwNQ==", "bodyText": "Make values() static array for better performance. See #1065 for reference.", "url": "https://github.com/microsoft/mssql-jdbc/pull/1338#discussion_r439683805", "createdAt": "2020-06-12T23:58:11Z", "author": {"login": "ulvii"}, "path": "src/main/java/com/microsoft/sqlserver/jdbc/SQLServerDriver.java", "diffHunk": "@@ -455,6 +455,35 @@ public String toString() {\n }\n \n \n+enum SensitivityRank {\n+    NOT_DEFINED(-1),\n+    NONE(0),\n+    LOW(10),\n+    MEDIUM(20),\n+    HIGH(30),\n+    CRITICAL(40);\n+\n+    private int rank;\n+\n+    private SensitivityRank(int rank) {\n+        this.rank = rank;\n+    }\n+\n+    public int getValue() {\n+        return rank;\n+    }\n+\n+    static boolean isValid(int rank) throws SQLServerException {\n+        for (SensitivityRank r : SensitivityRank.values()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "05993532bab653f3d508adf38ecc0ad7f38bee23"}, "originalPosition": 23}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMwMDkwNzg2", "url": "https://github.com/microsoft/mssql-jdbc/pull/1338#pullrequestreview-430090786", "createdAt": "2020-06-13T00:12:10Z", "commit": {"oid": "05993532bab653f3d508adf38ecc0ad7f38bee23"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xM1QwMDoxMjoxMFrOGjUTEg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xM1QwMDoxMjoxMFrOGjUTEg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTY4NTkwNg==", "bodyText": "If getServerSupportedDataClassificationVersion is 1, the driver will still read the rank. Don't we want to read rank only if the version is at least 2?", "url": "https://github.com/microsoft/mssql-jdbc/pull/1338#discussion_r439685906", "createdAt": "2020-06-13T00:12:10Z", "author": {"login": "ulvii"}, "path": "src/main/java/com/microsoft/sqlserver/jdbc/StreamColumns.java", "diffHunk": "@@ -259,55 +259,73 @@ private SensitivityClassification processDataClassification(TDSReader tdsReader)\n         SensitivityClassification sensitivityClassification = null;\n \n         // get the label count\n-        int numLabels = tdsReader.readUnsignedShort();\n-        List<Label> labels = new ArrayList<Label>(numLabels);\n+        int sensitivityLabelCount = tdsReader.readUnsignedShort();\n+        List<Label> sensitivityLabels = new ArrayList<Label>(sensitivityLabelCount);\n \n-        for (int i = 0; i < numLabels; i++) {\n-            labels.add(readSensitivityLabel(tdsReader));\n+        for (int i = 0; i < sensitivityLabelCount; i++) {\n+            sensitivityLabels.add(readSensitivityLabel(tdsReader));\n         }\n \n         // get the information type count\n-        int numInformationTypes = tdsReader.readUnsignedShort();\n+        int informationTypeCount = tdsReader.readUnsignedShort();\n \n-        List<InformationType> informationTypes = new ArrayList<InformationType>(numInformationTypes);\n-        for (int i = 0; i < numInformationTypes; i++) {\n+        List<InformationType> informationTypes = new ArrayList<InformationType>(informationTypeCount);\n+        for (int i = 0; i < informationTypeCount; i++) {\n             informationTypes.add(readSensitivityInformationType(tdsReader));\n         }\n \n+        int sensitivityRank = SensitivityRank.NOT_DEFINED.getValue();\n+        if (TDS.MAX_SUPPORTED_DATA_CLASSIFICATION_VERSION <= tdsReader.getServerSupportedDataClassificationVersion()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "05993532bab653f3d508adf38ecc0ad7f38bee23"}, "originalPosition": 27}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMwMDkxNjcz", "url": "https://github.com/microsoft/mssql-jdbc/pull/1338#pullrequestreview-430091673", "createdAt": "2020-06-13T00:17:40Z", "commit": {"oid": "05993532bab653f3d508adf38ecc0ad7f38bee23"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xM1QwMDoxNzo0MFrOGjUWAg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xM1QwMDoxNzo0MFrOGjUWAg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTY4NjY1OA==", "bodyText": "This is a breaking change! I suggest to create another constructor instead.", "url": "https://github.com/microsoft/mssql-jdbc/pull/1338#discussion_r439686658", "createdAt": "2020-06-13T00:17:40Z", "author": {"login": "ulvii"}, "path": "src/main/java/com/microsoft/sqlserver/jdbc/dataclassification/SensitivityProperty.java", "diffHunk": "@@ -19,10 +20,13 @@\n      *        Label as received from SQL Server for this SensitivityProperty\n      * @param informationType\n      *        InformationType as received from SQL Server for this SensitivityProperty\n+     * @param sensitivityRank\n+     *        sensitivity rank as received from SQL Server for this SensitivityProperty\n      */\n-    public SensitivityProperty(Label label, InformationType informationType) {\n+    public SensitivityProperty(Label label, InformationType informationType, int sensitivityRank) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "05993532bab653f3d508adf38ecc0ad7f38bee23"}, "originalPosition": 16}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "23da8c2cee27f728e343a138b227dd812f673998", "author": {"user": {"login": "lilgreenbird", "name": "lilgreenbird"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/23da8c2cee27f728e343a138b227dd812f673998", "committedDate": "2020-06-18T19:19:35Z", "message": "Merge remote-tracking branch 'upstream/dev' into dataclass"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6461154f8c4134ab3d821fa427cb4068847e94b2", "author": {"user": {"login": "lilgreenbird", "name": "lilgreenbird"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/6461154f8c4134ab3d821fa427cb4068847e94b2", "committedDate": "2020-06-18T20:01:54Z", "message": "review updates"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2MjMyODUw", "url": "https://github.com/microsoft/mssql-jdbc/pull/1338#pullrequestreview-436232850", "createdAt": "2020-06-23T23:46:19Z", "commit": {"oid": "6461154f8c4134ab3d821fa427cb4068847e94b2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2MzI2MTc5", "url": "https://github.com/microsoft/mssql-jdbc/pull/1338#pullrequestreview-436326179", "createdAt": "2020-06-24T05:05:21Z", "commit": {"oid": "6461154f8c4134ab3d821fa427cb4068847e94b2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2ODI5NzYx", "url": "https://github.com/microsoft/mssql-jdbc/pull/1338#pullrequestreview-436829761", "createdAt": "2020-06-24T16:49:47Z", "commit": {"oid": "6461154f8c4134ab3d821fa427cb4068847e94b2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2553, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}