{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEwMjQ5MTUx", "number": 1321, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQwNjoxNDoyNVrOD3fRbQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQwNjoxNDoyNVrOD3fRbQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU5NTEwNjM3OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/microsoft/sqlserver/jdbc/SQLServerVSMEnclaveProvider.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQwNjoxNDoyNVrOGNw_0w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQyMjoyODowMlrOGOTTyw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzA4NzQ0Mw==", "bodyText": "should we log a warning?", "url": "https://github.com/microsoft/mssql-jdbc/pull/1321#discussion_r417087443", "createdAt": "2020-04-29T06:14:25Z", "author": {"login": "lilgreenbird"}, "path": "src/main/java/com/microsoft/sqlserver/jdbc/SQLServerVSMEnclaveProvider.java", "diffHunk": "@@ -275,9 +276,10 @@ void validateCert(byte[] b) throws SQLServerException {\n                         .generateCertificates(new ByteArrayInputStream(b));\n                 for (X509Certificate cert : certs) {\n                     try {\n+                        cert.checkValidity();\n                         healthCert.verify(cert.getPublicKey());\n                         return;\n-                    } catch (SignatureException e) {\n+                    } catch (SignatureException | CertificateExpiredException e) {\n                         // Doesn't match, but continue looping through the rest of the certificates", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4f144fed1197baed87538c4f01b911978fbb1af3"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzYzNTE1Nw==", "bodyText": "I don't think it's necessary, up to the user to make sure their certificates haven't expired.", "url": "https://github.com/microsoft/mssql-jdbc/pull/1321#discussion_r417635157", "createdAt": "2020-04-29T21:53:44Z", "author": {"login": "rene-ye"}, "path": "src/main/java/com/microsoft/sqlserver/jdbc/SQLServerVSMEnclaveProvider.java", "diffHunk": "@@ -275,9 +276,10 @@ void validateCert(byte[] b) throws SQLServerException {\n                         .generateCertificates(new ByteArrayInputStream(b));\n                 for (X509Certificate cert : certs) {\n                     try {\n+                        cert.checkValidity();\n                         healthCert.verify(cert.getPublicKey());\n                         return;\n-                    } catch (SignatureException e) {\n+                    } catch (SignatureException | CertificateExpiredException e) {\n                         // Doesn't match, but continue looping through the rest of the certificates", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzA4NzQ0Mw=="}, "originalCommit": {"oid": "4f144fed1197baed87538c4f01b911978fbb1af3"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzY0OTYxMQ==", "bodyText": "I think would be helpful if someone complains that they do have the certificate why isn't it working. But, I don't feel strongly about it so ok.", "url": "https://github.com/microsoft/mssql-jdbc/pull/1321#discussion_r417649611", "createdAt": "2020-04-29T22:28:02Z", "author": {"login": "lilgreenbird"}, "path": "src/main/java/com/microsoft/sqlserver/jdbc/SQLServerVSMEnclaveProvider.java", "diffHunk": "@@ -275,9 +276,10 @@ void validateCert(byte[] b) throws SQLServerException {\n                         .generateCertificates(new ByteArrayInputStream(b));\n                 for (X509Certificate cert : certs) {\n                     try {\n+                        cert.checkValidity();\n                         healthCert.verify(cert.getPublicKey());\n                         return;\n-                    } catch (SignatureException e) {\n+                    } catch (SignatureException | CertificateExpiredException e) {\n                         // Doesn't match, but continue looping through the rest of the certificates", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzA4NzQ0Mw=="}, "originalCommit": {"oid": "4f144fed1197baed87538c4f01b911978fbb1af3"}, "originalPosition": 17}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1077, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}