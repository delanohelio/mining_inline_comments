{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY4MTc1MTQz", "number": 1409, "title": "added exception handler to catch failure in threads", "bodyText": "", "createdAt": "2020-08-14T20:43:14Z", "url": "https://github.com/microsoft/mssql-jdbc/pull/1409", "merged": true, "mergeCommit": {"oid": "7889f1e4435a5047e5bae4283c53cc041640c031"}, "closed": true, "closedAt": "2020-09-04T21:12:15Z", "author": {"login": "lilgreenbird"}, "timelineItems": {"totalCount": 41, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcBa8qiAH2gAyNDY4MTc1MTQzOmM5N2I4NjNjOTUzODViZGNkMWFmYzg5N2VmMzljYmViYWY0OTU1Nzg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdFr1sEgFqTQ4Mjk0MTA3OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c97b863c95385bdcd1afc897ef39cbebaf495578", "author": {"user": {"login": "lilgreenbird", "name": "lilgreenbird"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/c97b863c95385bdcd1afc897ef39cbebaf495578", "committedDate": "2020-02-05T19:03:48Z", "message": "Fix AEv2 tests exclude for reqExternalSetup and cleanup (#1247)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "54b5a194e5d46552419c86e0d1f8c800f42d3de8", "author": {"user": {"login": "peterbae", "name": "Peter Bae"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/54b5a194e5d46552419c86e0d1f8c800f42d3de8", "committedDate": "2020-02-08T00:19:05Z", "message": "Fix | Add null check for getObject() with LocalTime and LocalDate (#1250)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "672b7d67caae75250c53f82a760e8d3880e62a37", "author": {"user": {"login": "lilgreenbird", "name": "lilgreenbird"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/672b7d67caae75250c53f82a760e8d3880e62a37", "committedDate": "2020-02-10T19:04:22Z", "message": "added all AKV tests to use reqExternalSetup tag so they will be skipped by default (#1254)\n\n* skip AKV test properly\r\n\r\n* removed enclave properties string to failed errors as enclave tests could be skipped"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3c3331b7b0ff1b27b1e80271bf9ffdc6aae7be79", "author": {"user": {"login": "lilgreenbird", "name": "lilgreenbird"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/3c3331b7b0ff1b27b1e80271bf9ffdc6aae7be79", "committedDate": "2020-03-25T06:21:47Z", "message": "Merge remote-tracking branch 'upstream/dev' into dev"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e2c5640370daa89c0d8c1559b5791e99656f78c8", "author": {"user": {"login": "lilgreenbird", "name": "lilgreenbird"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/e2c5640370daa89c0d8c1559b5791e99656f78c8", "committedDate": "2020-03-26T06:10:08Z", "message": "Merge remote-tracking branch 'upstream/dev' into dev"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aad696640378b75f3cb8cb24cc2fa299358db9ac", "author": {"user": {"login": "lilgreenbird", "name": "lilgreenbird"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/aad696640378b75f3cb8cb24cc2fa299358db9ac", "committedDate": "2020-03-28T03:18:02Z", "message": "Merge remote-tracking branch 'upstream/dev' into dev"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "92bf04c2787c3b2a704f641f50cb4a83193f1d6d", "author": {"user": {"login": "lilgreenbird", "name": "lilgreenbird"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/92bf04c2787c3b2a704f641f50cb4a83193f1d6d", "committedDate": "2020-03-31T01:58:20Z", "message": "Merge remote-tracking branch 'upstream/dev' into dev"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3ba5ab72008501e23f43dbcbcc333775320ddafa", "author": {"user": {"login": "lilgreenbird", "name": "lilgreenbird"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/3ba5ab72008501e23f43dbcbcc333775320ddafa", "committedDate": "2020-04-04T05:47:37Z", "message": "Merge remote-tracking branch 'upstream/dev' into dev"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d20823deffea162b2b17b079cc291f91269558aa", "author": {"user": {"login": "lilgreenbird", "name": "lilgreenbird"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/d20823deffea162b2b17b079cc291f91269558aa", "committedDate": "2020-04-07T00:45:05Z", "message": "Merge remote-tracking branch 'upstream/dev' into dev"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4cc959f7e76eedbf49e30e5b92de43c86d7eb803", "author": {"user": {"login": "lilgreenbird", "name": "lilgreenbird"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/4cc959f7e76eedbf49e30e5b92de43c86d7eb803", "committedDate": "2020-04-29T02:59:23Z", "message": "Merge remote-tracking branch 'upstream/dev' into dev"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7b301f8184b26da4d99b2feab8b2aea886c01cea", "author": {"user": {"login": "lilgreenbird", "name": "lilgreenbird"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/7b301f8184b26da4d99b2feab8b2aea886c01cea", "committedDate": "2020-04-30T06:36:21Z", "message": "Merge remote-tracking branch 'upstream/dev' into dev"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "56bcf139fe6acd87c41b3829b4f157c59bd9f873", "author": {"user": {"login": "lilgreenbird", "name": "lilgreenbird"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/56bcf139fe6acd87c41b3829b4f157c59bd9f873", "committedDate": "2020-05-07T22:26:03Z", "message": "Merge remote-tracking branch 'upstream/dev' into dev"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "744e0ca78e57bc6c0db98910a9066d5b583c6ba8", "author": {"user": {"login": "lilgreenbird", "name": "lilgreenbird"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/744e0ca78e57bc6c0db98910a9066d5b583c6ba8", "committedDate": "2020-05-12T22:47:18Z", "message": "Merge remote-tracking branch 'upstream/dev' into dev"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "df8fd41ffa6005b18b0e328593faaeb495ce6547", "author": {"user": {"login": "lilgreenbird", "name": "lilgreenbird"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/df8fd41ffa6005b18b0e328593faaeb495ce6547", "committedDate": "2020-05-19T01:06:51Z", "message": "Merge remote-tracking branch 'upstream/dev' into dev"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "652e68b110828db6b172c1b02df6a06ab04c2b59", "author": {"user": {"login": "lilgreenbird", "name": "lilgreenbird"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/652e68b110828db6b172c1b02df6a06ab04c2b59", "committedDate": "2020-05-26T07:07:35Z", "message": "Merge remote-tracking branch 'upstream/dev' into dev"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "53736db944298004a4a383be14ae83370ffab717", "author": {"user": {"login": "lilgreenbird", "name": "lilgreenbird"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/53736db944298004a4a383be14ae83370ffab717", "committedDate": "2020-05-26T23:02:59Z", "message": "Merge remote-tracking branch 'upstream/dev' into dev"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9ba6a42285fcc046a0a68e110454b62d8f7f6657", "author": {"user": {"login": "lilgreenbird", "name": "lilgreenbird"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/9ba6a42285fcc046a0a68e110454b62d8f7f6657", "committedDate": "2020-06-02T06:50:57Z", "message": "Merge remote-tracking branch 'upstream/dev' into dev"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6d156f728a1253dd469da1c6896189762b00097b", "author": {"user": {"login": "lilgreenbird", "name": "lilgreenbird"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/6d156f728a1253dd469da1c6896189762b00097b", "committedDate": "2020-06-05T19:15:40Z", "message": "Merge remote-tracking branch 'upstream/dev' into dev"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e08ffe5f54050344920bc48d44dc8e04cd143866", "author": {"user": {"login": "lilgreenbird", "name": "lilgreenbird"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/e08ffe5f54050344920bc48d44dc8e04cd143866", "committedDate": "2020-06-10T21:34:05Z", "message": "Merge remote-tracking branch 'upstream/dev' into dev"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6b6cab266b655c48858187f56071aa3e4ba87054", "author": {"user": {"login": "lilgreenbird", "name": "lilgreenbird"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/6b6cab266b655c48858187f56071aa3e4ba87054", "committedDate": "2020-06-18T19:14:21Z", "message": "Merge remote-tracking branch 'upstream/dev' into dev"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c2025901e1c9e8b279f42279da2f25ffd6c4232a", "author": {"user": {"login": "lilgreenbird", "name": "lilgreenbird"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/c2025901e1c9e8b279f42279da2f25ffd6c4232a", "committedDate": "2020-06-24T18:58:46Z", "message": "Merge remote-tracking branch 'upstream/dev' into dev"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0515d4b0d51c3150b2149438f8b8a69be3dfc2bd", "author": {"user": {"login": "lilgreenbird", "name": "lilgreenbird"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/0515d4b0d51c3150b2149438f8b8a69be3dfc2bd", "committedDate": "2020-06-24T20:34:25Z", "message": "Merge remote-tracking branch 'upstream/dev' into dev"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2c63b5828becf3f737f4edf95593d98ada4e273a", "author": {"user": {"login": "lilgreenbird", "name": "lilgreenbird"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/2c63b5828becf3f737f4edf95593d98ada4e273a", "committedDate": "2020-06-25T06:36:46Z", "message": "Merge remote-tracking branch 'upstream/dev' into dev"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "78aa941fab02af4aef190c7da6141b1251a84b4b", "author": {"user": {"login": "lilgreenbird", "name": "lilgreenbird"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/78aa941fab02af4aef190c7da6141b1251a84b4b", "committedDate": "2020-07-02T18:43:21Z", "message": "Merge remote-tracking branch 'upstream/dev' into dev"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "90e99cd54a0cb4347f813d965ea38b0a9801e8b0", "author": {"user": {"login": "lilgreenbird", "name": "lilgreenbird"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/90e99cd54a0cb4347f813d965ea38b0a9801e8b0", "committedDate": "2020-07-02T20:57:03Z", "message": "Merge remote-tracking branch 'upstream/dev' into dev"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "da1004bb9862d31941e537e77bd0e2ded5edef96", "author": {"user": {"login": "lilgreenbird", "name": "lilgreenbird"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/da1004bb9862d31941e537e77bd0e2ded5edef96", "committedDate": "2020-07-06T22:39:35Z", "message": "Merge remote-tracking branch 'upstream/dev' into dev"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9ca12848377fad04ad8f8d2a29258ea8500f70d2", "author": {"user": {"login": "lilgreenbird", "name": "lilgreenbird"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/9ca12848377fad04ad8f8d2a29258ea8500f70d2", "committedDate": "2020-07-28T07:45:46Z", "message": "Merge remote-tracking branch 'upstream/dev' into dev"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c67d8edea9341b2b94a075ecbbc4768e313f0658", "author": {"user": {"login": "lilgreenbird", "name": "lilgreenbird"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/c67d8edea9341b2b94a075ecbbc4768e313f0658", "committedDate": "2020-08-01T00:41:25Z", "message": "Merge remote-tracking branch 'upstream/dev' into dev"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1d0a4adf7296966d52421ace5011fcc2fcc3147a", "author": {"user": {"login": "lilgreenbird", "name": "lilgreenbird"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/1d0a4adf7296966d52421ace5011fcc2fcc3147a", "committedDate": "2020-08-05T00:02:31Z", "message": "Merge remote-tracking branch 'upstream/dev' into dev"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "743023d4a5f5fcdc3450f2309a06f315f6d1738d", "author": {"user": {"login": "lilgreenbird", "name": "lilgreenbird"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/743023d4a5f5fcdc3450f2309a06f315f6d1738d", "committedDate": "2020-08-09T06:49:37Z", "message": "added exception handler"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f6fbeb962bde82d9d8551c1d29cdede948f658d4", "author": {"user": {"login": "lilgreenbird", "name": "lilgreenbird"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/f6fbeb962bde82d9d8551c1d29cdede948f658d4", "committedDate": "2020-08-14T20:46:59Z", "message": "removed debug line"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc4MDQ1OTE3", "url": "https://github.com/microsoft/mssql-jdbc/pull/1409#pullrequestreview-478045917", "createdAt": "2020-08-28T21:57:06Z", "commit": {"oid": "f6fbeb962bde82d9d8551c1d29cdede948f658d4"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc4NzUxMjY1", "url": "https://github.com/microsoft/mssql-jdbc/pull/1409#pullrequestreview-478751265", "createdAt": "2020-08-31T16:12:55Z", "commit": {"oid": "f6fbeb962bde82d9d8551c1d29cdede948f658d4"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc4NzkzNDc4", "url": "https://github.com/microsoft/mssql-jdbc/pull/1409#pullrequestreview-478793478", "createdAt": "2020-08-31T17:12:41Z", "commit": {"oid": "f6fbeb962bde82d9d8551c1d29cdede948f658d4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQxNzoxMjo0MVrOHKBWGg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQxNzoxMjo0MVrOHKBWGg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDI2OTg1MA==", "bodyText": "Can you explain why this is necessary, why can't we just handle the exceptions better inside the runnables catch clause.", "url": "https://github.com/microsoft/mssql-jdbc/pull/1409#discussion_r480269850", "createdAt": "2020-08-31T17:12:41Z", "author": {"login": "rene-ye"}, "path": "src/test/java/com/microsoft/sqlserver/jdbc/fedauth/PooledConnectionTest.java", "diffHunk": "@@ -37,6 +38,15 @@\n     static String charTable = TestUtils.escapeSingleQuotes(\r\n             AbstractSQLGenerator.escapeIdentifier(RandomUtil.getIdentifier(\"JDBC_PooledConnection\")));\r\n \r\n+    final AtomicReference<Throwable> throwableRef = new AtomicReference<Throwable>();\r\n+    Thread.UncaughtExceptionHandler handler = new Thread.UncaughtExceptionHandler() {\r\n+\r\n+        @Override\r\n+        public void uncaughtException(Thread t, Throwable e) {\r\n+            throwableRef.set(e);\r\n+        }\r\n+    };\r\n+\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f6fbeb962bde82d9d8551c1d29cdede948f658d4"}, "originalPosition": 20}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc4Nzk5MzI3", "url": "https://github.com/microsoft/mssql-jdbc/pull/1409#pullrequestreview-478799327", "createdAt": "2020-08-31T17:21:41Z", "commit": {"oid": "f6fbeb962bde82d9d8551c1d29cdede948f658d4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQxNzoyMTo0MlrOHKBnjQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQxNzoyMTo0MlrOHKBnjQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDI3NDMxNw==", "bodyText": "We've already changed r1/r2/r3 to runnables, this should be done with an ExecutorService instead. The runnables above should also not be duplicated, they don't have different contents. Suggested change:\nRunnable r = () -> {\n    try (Connection connection2 = pc.getConnection()) {\n        testUserName(connection2, azureUserName, authentication);\n    } catch (SQLException e) {\n        assertTrue(INVALID_EXCEPION_MSG + \": \" + e.getMessage(),\n                e.getMessage().contains(ERR_MSG_CONNECTION_CLOSED)\n                        || e.getMessage().contains(ERR_MSG_CONNECTION_IS_CLOSED)\n                        || e.getMessage().contains(ERR_MSG_HAS_CLOSED)\n                        || e.getMessage().contains(ERR_MSG_HAS_BEEN_CLOSED)\n                        || e.getMessage().contains(ERR_MSG_SOCKET_CLOSED));\n    } catch (Exception e) {\n        // do whatever error handling is meant to happen\n    }\n};\n\nExecutorService es = Executors.newFixedThreadPool(3);\nes.execute(r);\nes.execute(r);\nes.execute(r);\nes.shutdown();", "url": "https://github.com/microsoft/mssql-jdbc/pull/1409#discussion_r480274317", "createdAt": "2020-08-31T17:21:42Z", "author": {"login": "rene-ye"}, "path": "src/test/java/com/microsoft/sqlserver/jdbc/fedauth/PooledConnectionTest.java", "diffHunk": "@@ -200,17 +210,23 @@ private void testPooledConnectionMultiThread(long testingTimeInSeconds,\n             Random rand = new Random();\r\n             int numberOfThreadsForEachType = rand.nextInt(15) + 1; // 1 to 15\r\n             for (int i = 0; i < numberOfThreadsForEachType; i++) {\r\n-                new Thread(r1).start();\r\n-                new Thread(r2).start();\r\n-                new Thread(r3).start();\r\n-            }\r\n-\r\n-            // sleep in order to catch exception from other threads if tests fail.\r\n-            try {\r\n-                Thread.sleep(TimeUnit.SECONDS.toMillis(60));\r\n-\r\n-            } catch (InterruptedException e) {\r\n-                fail(e.getMessage());\r\n+                Thread t1 = new Thread(r1);\r\n+                Thread t2 = new Thread(r2);\r\n+                Thread t3 = new Thread(r3);\r\n+                t1.setUncaughtExceptionHandler(handler);\r\n+                t2.setUncaughtExceptionHandler(handler);\r\n+                t3.setUncaughtExceptionHandler(handler);\r\n+                t1.start();\r\n+                t2.start();\r\n+                t3.start();\r\n+                t1.join();\r\n+                t2.join();\r\n+                t3.join();\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f6fbeb962bde82d9d8551c1d29cdede948f658d4"}, "originalPosition": 50}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc4ODAxMDM4", "url": "https://github.com/microsoft/mssql-jdbc/pull/1409#pullrequestreview-478801038", "createdAt": "2020-08-31T17:24:19Z", "commit": {"oid": "f6fbeb962bde82d9d8551c1d29cdede948f658d4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQxNzoyNDoxOVrOHKBs1g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQxNzoyNDoxOVrOHKBs1g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDI3NTY3MA==", "bodyText": "Same idea here, there's no reason to have 3 separate runnables, or to run them with Thread objects.", "url": "https://github.com/microsoft/mssql-jdbc/pull/1409#discussion_r480275670", "createdAt": "2020-08-31T17:24:19Z", "author": {"login": "rene-ye"}, "path": "src/test/java/com/microsoft/sqlserver/jdbc/fedauth/PooledConnectionTest.java", "diffHunk": "@@ -262,16 +278,23 @@ public void testPooledConnectionWithAccessToken() throws SQLException {\n             Random rand = new Random();\r\n             int numberOfThreadsForEachType = rand.nextInt(15) + 1; // 1 to 15\r\n             for (int i = 0; i < numberOfThreadsForEachType; i++) {\r\n-                new Thread(r1).start();\r\n-                new Thread(r2).start();\r\n-                new Thread(r3).start();\r\n-            }\r\n-\r\n-            // sleep in order to catch exception from other threads if tests fail.\r\n-            try {\r\n-                Thread.sleep(TimeUnit.SECONDS.toMillis(60));\r\n-            } catch (InterruptedException e) {\r\n-                fail(e.getMessage());\r\n+                Thread t1 = new Thread(r1);\r\n+                Thread t2 = new Thread(r2);\r\n+                Thread t3 = new Thread(r3);\r\n+                t1.setUncaughtExceptionHandler(handler);\r\n+                t2.setUncaughtExceptionHandler(handler);\r\n+                t3.setUncaughtExceptionHandler(handler);\r\n+                t1.start();\r\n+                t2.start();\r\n+                t3.start();\r\n+                t1.join();\r\n+                t2.join();\r\n+                t3.join();\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f6fbeb962bde82d9d8551c1d29cdede948f658d4"}, "originalPosition": 84}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "28ca89e49aed2ca1ee058443a1903b39823029b7", "author": {"user": {"login": "lilgreenbird", "name": "lilgreenbird"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/28ca89e49aed2ca1ee058443a1903b39823029b7", "committedDate": "2020-08-31T19:05:09Z", "message": "Merge remote-tracking branch 'upstream/dev' into fixfedauth"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d7fb20069e6d8915c9fd2cef6853da59e28d3694", "author": {"user": {"login": "lilgreenbird", "name": "lilgreenbird"}}, "url": "https://github.com/microsoft/mssql-jdbc/commit/d7fb20069e6d8915c9fd2cef6853da59e28d3694", "committedDate": "2020-09-04T00:56:15Z", "message": "update"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgyODM4ODA1", "url": "https://github.com/microsoft/mssql-jdbc/pull/1409#pullrequestreview-482838805", "createdAt": "2020-09-04T17:37:19Z", "commit": {"oid": "d7fb20069e6d8915c9fd2cef6853da59e28d3694"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgyOTI0Mjky", "url": "https://github.com/microsoft/mssql-jdbc/pull/1409#pullrequestreview-482924292", "createdAt": "2020-09-04T20:29:54Z", "commit": {"oid": "d7fb20069e6d8915c9fd2cef6853da59e28d3694"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgyOTQxMDc5", "url": "https://github.com/microsoft/mssql-jdbc/pull/1409#pullrequestreview-482941079", "createdAt": "2020-09-04T21:11:25Z", "commit": {"oid": "d7fb20069e6d8915c9fd2cef6853da59e28d3694"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2615, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}