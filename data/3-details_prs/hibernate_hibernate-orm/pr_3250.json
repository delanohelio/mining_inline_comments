{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc3NDMxMTA1", "number": 3250, "title": "Wip/6.0 Port 'refresh' cascade testing case", "bodyText": "Part of https://trello.com/c/OVdBw7qD/27-verify-cascading\nOther types of cascade testing has been taken over by Andrea.\nFix a generic issue when loading entity by id providing existing entity (like in cascade refresh case).", "createdAt": "2020-02-19T22:32:46Z", "url": "https://github.com/hibernate/hibernate-orm/pull/3250", "merged": true, "mergeCommit": {"oid": "db50e046e2e2ad810ad1f82fb018253077cc64a0"}, "closed": true, "closedAt": "2020-03-18T13:17:42Z", "author": {"login": "NathanQingyangXu"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcF-VotgFqTM2MTQ4ODcyOA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcOOzy4ABqjMxMzMzODc1MzU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYxNDg4NzI4", "url": "https://github.com/hibernate/hibernate-orm/pull/3250#pullrequestreview-361488728", "createdAt": "2020-02-19T22:33:26Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQyMjozMzoyNlrOFr6I0w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQyMjozMzoyNlrOFr6I0w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTU4NTYxOQ==", "bodyText": "Fix a potential NPE issue above", "url": "https://github.com/hibernate/hibernate-orm/pull/3250#discussion_r381585619", "createdAt": "2020-02-19T22:33:26Z", "author": {"login": "NathanQingyangXu"}, "path": "hibernate-core/src/main/java/org/hibernate/loader/ast/internal/SingleIdEntityLoaderDynamicBatch.java", "diffHunk": "@@ -187,6 +182,14 @@ public T load(\n \t\t\tObject entityInstance,\n \t\t\tLockOptions lockOptions,\n \t\t\tSharedSessionContractImplementor session) {\n+\t\tinitializeSingleIdLoaderIfNeeded( session );\n \t\treturn singleIdLoader.load( pkValue, entityInstance, lockOptions, session );", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 26}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYxNDg5NjMw", "url": "https://github.com/hibernate/hibernate-orm/pull/3250#pullrequestreview-361489630", "createdAt": "2020-02-19T22:35:10Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQyMjozNToxMVrOFr6LsA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQyMjozNToxMVrOFr6LsA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTU4NjM1Mg==", "bodyText": "We seems to need the non-null id value here so the only usage of 'getEffectiveOptionalInstance()' in AbstractEntityInitilizer (see below) could work because of the id comparison precondition", "url": "https://github.com/hibernate/hibernate-orm/pull/3250#discussion_r381586352", "createdAt": "2020-02-19T22:35:11Z", "author": {"login": "NathanQingyangXu"}, "path": "hibernate-core/src/main/java/org/hibernate/sql/exec/internal/JdbcSelectExecutorStandardImpl.java", "diffHunk": "@@ -158,7 +158,7 @@ public String getEffectiveOptionalEntityName() {\n \n \t\t\t@Override\n \t\t\tpublic Object getEffectiveOptionalId() {\n-\t\t\t\treturn null;\n+\t\t\t\treturn executionContext.getEntityId();", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "PullRequestCommit", "commit": {"oid": "157d3c64e925b5afa4de77031fa57224b7819b32", "author": {"user": {"login": "NathanQingyangXu", "name": "Nathan Xu"}}, "url": "https://github.com/hibernate/hibernate-orm/commit/157d3c64e925b5afa4de77031fa57224b7819b32", "committedDate": "2020-03-16T14:15:32Z", "message": "revert back changes in 'org.hibernate.test.cascade'"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "157d3c64e925b5afa4de77031fa57224b7819b32", "author": {"user": {"login": "NathanQingyangXu", "name": "Nathan Xu"}}, "url": "https://github.com/hibernate/hibernate-orm/commit/157d3c64e925b5afa4de77031fa57224b7819b32", "committedDate": "2020-03-16T14:15:32Z", "message": "revert back changes in 'org.hibernate.test.cascade'"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3162, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}