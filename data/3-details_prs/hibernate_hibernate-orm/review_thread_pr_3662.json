{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI2NjY5NDQ2", "number": 3662, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0xNVQxNjoyMDoyMVrOFajsiw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0xNVQxNjoyMTo0NVrOFajugg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzYzMzkyMTM5OnYy", "diffSide": "RIGHT", "path": "hibernate-core/src/main/java/org/hibernate/query/internal/FetchBuilderJpa.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0xNVQxNjoyMDoyMVrOIlmvZw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0xOFQxMjo1MToxMlrOInmOpA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3NjMwMjk1MQ==", "bodyText": "Are these passed columns ever used here?", "url": "https://github.com/hibernate/hibernate-orm/pull/3662#discussion_r576302951", "createdAt": "2021-02-15T16:20:21Z", "author": {"login": "sebersole"}, "path": "hibernate-core/src/main/java/org/hibernate/query/internal/FetchBuilderJpa.java", "diffHunk": "@@ -6,31 +6,46 @@\n  */\n package org.hibernate.query.internal;\n \n+import java.util.List;\n import java.util.function.BiFunction;\n \n import org.hibernate.LockMode;\n import org.hibernate.engine.FetchTiming;\n-import org.hibernate.metamodel.mapping.ModelPart;\n import org.hibernate.query.NavigablePath;\n+import org.hibernate.query.results.DomainResultCreationStateImpl;\n import org.hibernate.query.results.FetchBuilder;\n+import org.hibernate.query.results.MissingSqlSelectionException;\n+import org.hibernate.query.results.PositionalSelectionsNotAllowedException;\n+import org.hibernate.query.results.SqlSelectionImpl;\n import org.hibernate.query.results.dynamic.DynamicFetchBuilderLegacy;\n+import org.hibernate.sql.ast.tree.from.TableGroup;\n+import org.hibernate.sql.ast.tree.from.TableReference;\n import org.hibernate.sql.results.graph.DomainResultCreationState;\n import org.hibernate.sql.results.graph.Fetch;\n import org.hibernate.sql.results.graph.FetchParent;\n import org.hibernate.sql.results.graph.Fetchable;\n import org.hibernate.sql.results.graph.FetchableContainer;\n import org.hibernate.sql.results.jdbc.spi.JdbcValuesMetadata;\n \n+import static org.hibernate.query.results.ResultsHelper.impl;\n+import static org.hibernate.query.results.ResultsHelper.jdbcPositionToValuesArrayPosition;\n+import static org.hibernate.sql.ast.spi.SqlExpressionResolver.createColumnReferenceKey;\n+\n /**\n  * @author Steve Ebersole\n  */\n public class FetchBuilderJpa implements FetchBuilder {\n \tprivate final NavigablePath navigablePath;\n \tprivate final String attributePath;\n+\tprivate final List<String> columnNames;\n \n-\tpublic FetchBuilderJpa(NavigablePath navigablePath, String attributePath) {\n+\tpublic FetchBuilderJpa(\n+\t\t\tNavigablePath navigablePath,\n+\t\t\tString attributePath,\n+\t\t\tList<String> columnNames) {\n \t\tthis.navigablePath = navigablePath;\n \t\tthis.attributePath = attributePath;\n+\t\tthis.columnNames = columnNames;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e900fdd72ca3971fe47f91708732d15eed7b409a"}, "originalPosition": 45}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3ODM5MTcxNg==", "bodyText": "Should I delete FetchBuilderJpa and FetchMementoJpa? They were only used by this code section https://github.com/hibernate/hibernate-orm/pull/3662/files#diff-ef7d256eac99c70fe4b496c2b04708b3dc6f71a99d333ac1aeb18c344ef16484L398 which I changed", "url": "https://github.com/hibernate/hibernate-orm/pull/3662#discussion_r578391716", "createdAt": "2021-02-18T12:51:12Z", "author": {"login": "beikov"}, "path": "hibernate-core/src/main/java/org/hibernate/query/internal/FetchBuilderJpa.java", "diffHunk": "@@ -6,31 +6,46 @@\n  */\n package org.hibernate.query.internal;\n \n+import java.util.List;\n import java.util.function.BiFunction;\n \n import org.hibernate.LockMode;\n import org.hibernate.engine.FetchTiming;\n-import org.hibernate.metamodel.mapping.ModelPart;\n import org.hibernate.query.NavigablePath;\n+import org.hibernate.query.results.DomainResultCreationStateImpl;\n import org.hibernate.query.results.FetchBuilder;\n+import org.hibernate.query.results.MissingSqlSelectionException;\n+import org.hibernate.query.results.PositionalSelectionsNotAllowedException;\n+import org.hibernate.query.results.SqlSelectionImpl;\n import org.hibernate.query.results.dynamic.DynamicFetchBuilderLegacy;\n+import org.hibernate.sql.ast.tree.from.TableGroup;\n+import org.hibernate.sql.ast.tree.from.TableReference;\n import org.hibernate.sql.results.graph.DomainResultCreationState;\n import org.hibernate.sql.results.graph.Fetch;\n import org.hibernate.sql.results.graph.FetchParent;\n import org.hibernate.sql.results.graph.Fetchable;\n import org.hibernate.sql.results.graph.FetchableContainer;\n import org.hibernate.sql.results.jdbc.spi.JdbcValuesMetadata;\n \n+import static org.hibernate.query.results.ResultsHelper.impl;\n+import static org.hibernate.query.results.ResultsHelper.jdbcPositionToValuesArrayPosition;\n+import static org.hibernate.sql.ast.spi.SqlExpressionResolver.createColumnReferenceKey;\n+\n /**\n  * @author Steve Ebersole\n  */\n public class FetchBuilderJpa implements FetchBuilder {\n \tprivate final NavigablePath navigablePath;\n \tprivate final String attributePath;\n+\tprivate final List<String> columnNames;\n \n-\tpublic FetchBuilderJpa(NavigablePath navigablePath, String attributePath) {\n+\tpublic FetchBuilderJpa(\n+\t\t\tNavigablePath navigablePath,\n+\t\t\tString attributePath,\n+\t\t\tList<String> columnNames) {\n \t\tthis.navigablePath = navigablePath;\n \t\tthis.attributePath = attributePath;\n+\t\tthis.columnNames = columnNames;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3NjMwMjk1MQ=="}, "originalCommit": {"oid": "e900fdd72ca3971fe47f91708732d15eed7b409a"}, "originalPosition": 45}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzYzMzkyNjQyOnYy", "diffSide": "RIGHT", "path": "hibernate-core/src/main/java/org/hibernate/query/internal/FetchMementoJpa.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0xNVQxNjoyMTo0NVrOIlmyfQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0xNVQxNjoyMTo0NVrOIlmyfQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3NjMwMzc0MQ==", "bodyText": "Here again, the only use of the passed columns is to pass them to FetchBuilderJpa which seems to never use them.", "url": "https://github.com/hibernate/hibernate-orm/pull/3662#discussion_r576303741", "createdAt": "2021-02-15T16:21:45Z", "author": {"login": "sebersole"}, "path": "hibernate-core/src/main/java/org/hibernate/query/internal/FetchMementoJpa.java", "diffHunk": "@@ -19,10 +20,12 @@\n \n \tprivate final NavigablePath fetchPath;\n \tprivate final String attributePath;\n+\tprivate final List<String> columnNames;\n \n-\tpublic FetchMementoJpa(NavigablePath fetchPath, String attributePath) {\n+\tpublic FetchMementoJpa(NavigablePath fetchPath, String attributePath, List<String> columnNames) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e900fdd72ca3971fe47f91708732d15eed7b409a"}, "originalPosition": 15}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4114, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}