{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ2ODM0ODE0", "number": 3457, "title": "HHH 13214 DML batch delete re-firing SQL from previous calls", "bodyText": "https://hibernate.atlassian.net/browse/HHH-13214\nthis is an alternative solution of #3348", "createdAt": "2020-07-09T12:40:56Z", "url": "https://github.com/hibernate/hibernate-orm/pull/3457", "merged": true, "mergeCommit": {"oid": "3fcd4a00a2f75ea8ce95839c3951459e5b9108dd"}, "closed": true, "closedAt": "2020-07-14T14:57:21Z", "author": {"login": "dreab8"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABczTzEmAFqTQ0NTg4ODU4NA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcz5gNBgBqjM1MzYzNTA5OTc=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ1ODg4NTg0", "url": "https://github.com/hibernate/hibernate-orm/pull/3457#pullrequestreview-445888584", "createdAt": "2020-07-09T19:00:11Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxOTowMDoxMlrOGvd9_g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxOTowMDoxMlrOGvd9_g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjQyNzI2Mg==", "bodyText": "Do we allow the returned value to be mutable? If not, returning Collections.emptyList() would be more efficient and less confusing. The same suggestion applies for the later empty collection returned. Minor compared to the issue solved in this PR.", "url": "https://github.com/hibernate/hibernate-orm/pull/3457#discussion_r452427262", "createdAt": "2020-07-09T19:00:12Z", "author": {"login": "NathanQingyangXu"}, "path": "hibernate-core/src/main/java/org/hibernate/hql/spi/id/inline/AbstractInlineIdsDeleteHandlerImpl.java", "diffHunk": "@@ -42,6 +43,9 @@ public AbstractInlineIdsDeleteHandlerImpl(\n \n \t@Override\n \tpublic String[] getSqlStatements() {\n+\t\tif ( deletes.isEmpty() ) {\n+\t\t\treturn new String[0];", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 22}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ1ODkxNzI2", "url": "https://github.com/hibernate/hibernate-orm/pull/3457#pullrequestreview-445891726", "createdAt": "2020-07-09T19:04:58Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxOTowNDo1OVrOGveHcg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxOTowNDo1OVrOGveHcg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjQyOTY4Mg==", "bodyText": "Is there possibility that deletes is null here? Then a NPE would be thrown.", "url": "https://github.com/hibernate/hibernate-orm/pull/3457#discussion_r452429682", "createdAt": "2020-07-09T19:04:59Z", "author": {"login": "NathanQingyangXu"}, "path": "hibernate-core/src/main/java/org/hibernate/hql/spi/id/inline/AbstractInlineIdsDeleteHandlerImpl.java", "diffHunk": "@@ -42,6 +43,9 @@ public AbstractInlineIdsDeleteHandlerImpl(\n \n \t@Override\n \tpublic String[] getSqlStatements() {\n+\t\tif ( deletes.isEmpty() ) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 21}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6f7ca34a30236d37f25492a9e448bd68640a7ea8", "author": {"user": null}, "url": "https://github.com/hibernate/hibernate-orm/commit/6f7ca34a30236d37f25492a9e448bd68640a7ea8", "committedDate": "2020-07-11T09:53:44Z", "message": "HHH-13214 Delete re-firing SQL from previous calls"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "PullRequestCommit", "commit": {"oid": "d54f93d3cdd1866fb89b2032daeccf94743fe6b9", "author": {"user": {"login": "dreab8", "name": "Andrea Boriero"}}, "url": "https://github.com/hibernate/hibernate-orm/commit/d54f93d3cdd1866fb89b2032daeccf94743fe6b9", "committedDate": "2020-07-11T14:55:43Z", "message": "HHH-13214 Delete re-firing SQL from previous calls"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "d54f93d3cdd1866fb89b2032daeccf94743fe6b9", "author": {"user": {"login": "dreab8", "name": "Andrea Boriero"}}, "url": "https://github.com/hibernate/hibernate-orm/commit/d54f93d3cdd1866fb89b2032daeccf94743fe6b9", "committedDate": "2020-07-11T14:55:43Z", "message": "HHH-13214 Delete re-firing SQL from previous calls"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2988, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}