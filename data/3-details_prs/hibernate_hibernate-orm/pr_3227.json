{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzcyNDU0MTYy", "number": 3227, "title": "HHH-13853 - Pass the merged Integration settings and Persistence Unit properties to buildBootstrapServiceRegistry", "bodyText": "https://hibernate.atlassian.net/browse/HHH-13853", "createdAt": "2020-02-07T14:58:30Z", "url": "https://github.com/hibernate/hibernate-orm/pull/3227", "merged": true, "mergeCommit": {"oid": "9084ce497ee45afec1451f8b0988942cf7976847"}, "closed": true, "closedAt": "2020-02-18T17:42:52Z", "author": {"login": "vladmihalcea"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcFgynUgFqTM2MDI4NjA0MA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcFlmiWgFqTM2MDU0MjQ5NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYwMjg2MDQw", "url": "https://github.com/hibernate/hibernate-orm/pull/3227#pullrequestreview-360286040", "createdAt": "2020-02-18T12:07:56Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQxMjowNzo1N1rOFq_7ig==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQxMjowNzo1N1rOFq_7ig==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDYzMTk0Ng==", "bodyText": "I do not think it is so simple as adding to a map the integrationSettings and then persistenceUnit.getProperties(), see MergedSettings creation at https://github.com/hibernate/hibernate-orm/pull/3227/files#diff-c1662f25d34183e3651ada18824bbd27R216", "url": "https://github.com/hibernate/hibernate-orm/pull/3227#discussion_r380631946", "createdAt": "2020-02-18T12:07:57Z", "author": {"login": "dreab8"}, "path": "hibernate-core/src/main/java/org/hibernate/jpa/boot/internal/EntityManagerFactoryBuilderImpl.java", "diffHunk": "@@ -196,8 +196,19 @@ private EntityManagerFactoryBuilderImpl(\n \t\t\tintegrationSettings = Collections.emptyMap();\n \t\t}\n \n+\t\tMap mergedIntegrationSettings = null;\n+\t\tProperties properties = persistenceUnit.getProperties();\n+\t\tif ( properties != null ) {\n+\t\t\tmergedIntegrationSettings = new HashMap( integrationSettings );\n+\t\t\tmergedIntegrationSettings.putAll( persistenceUnit.getProperties() );\n+\t\t}\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 10}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0ca1464ca52200ea49bc10ec2b3c4ab3575ef97c", "author": {"user": {"login": "vladmihalcea", "name": "Vlad Mihalcea"}}, "url": "https://github.com/hibernate/hibernate-orm/commit/0ca1464ca52200ea49bc10ec2b3c4ab3575ef97c", "committedDate": "2020-02-18T16:33:27Z", "message": "HHH-13853 - Pass the merged Integration settings and Persistence Unit properties to buildBootstrapServiceRegistry"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "0ca1464ca52200ea49bc10ec2b3c4ab3575ef97c", "author": {"user": {"login": "vladmihalcea", "name": "Vlad Mihalcea"}}, "url": "https://github.com/hibernate/hibernate-orm/commit/0ca1464ca52200ea49bc10ec2b3c4ab3575ef97c", "committedDate": "2020-02-18T16:33:27Z", "message": "HHH-13853 - Pass the merged Integration settings and Persistence Unit properties to buildBootstrapServiceRegistry"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYwNTQyNDk1", "url": "https://github.com/hibernate/hibernate-orm/pull/3227#pullrequestreview-360542495", "createdAt": "2020-02-18T17:44:17Z", "commit": {"oid": "0ca1464ca52200ea49bc10ec2b3c4ab3575ef97c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQxNzo0NDoxN1rOFrMI0A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQxNzo0NDoxN1rOFrMI0A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDgzMTk1Mg==", "bodyText": "I think at least we can reuse properties at the above statement to improve code readability a little bit.\nif (properties != null ) {\n    mergedIntegrationSettings = new HashMap( properties );\n    ... ...\n}", "url": "https://github.com/hibernate/hibernate-orm/pull/3227#discussion_r380831952", "createdAt": "2020-02-18T17:44:17Z", "author": {"login": "NathanQingyangXu"}, "path": "hibernate-core/src/main/java/org/hibernate/jpa/boot/internal/EntityManagerFactoryBuilderImpl.java", "diffHunk": "@@ -196,8 +196,19 @@ private EntityManagerFactoryBuilderImpl(\n \t\t\tintegrationSettings = Collections.emptyMap();\n \t\t}\n \n+\t\tMap mergedIntegrationSettings = null;\n+\t\tProperties properties = persistenceUnit.getProperties();\n+\t\tif ( properties != null ) {\n+\t\t\tmergedIntegrationSettings = new HashMap( persistenceUnit.getProperties() );", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0ca1464ca52200ea49bc10ec2b3c4ab3575ef97c"}, "originalPosition": 7}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3131, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}