{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY0MzM5MDIy", "number": 3493, "title": "wip/6.0 Reuse ArrayHelper's empty array constants to avoid unnecessary array creation", "bodyText": "We have the following empty array constants in org.hibernate.internal.util.collections.ArrayHelper:\n        public static final String[] EMPTY_STRING_ARRAY = {};\n\tpublic static final int[] EMPTY_INT_ARRAY = {};\n\tpublic static final boolean[] EMPTY_BOOLEAN_ARRAY = {};\n\tpublic static final Class[] EMPTY_CLASS_ARRAY = {};\n\tpublic static final Object[] EMPTY_OBJECT_ARRAY = {};\n\tpublic static final Type[] EMPTY_TYPE_ARRAY = {};\n\tpublic static final byte[] EMPTY_BYTE_ARRAY = {};\n\nThis PR aims to reuse these constant in lieu of empty array creation to both boost performance and decrease memory footprint. Given the array is empty, it seems the replacement is hassle-free (unlike Collections.emptyList() which is immutable and adding element triggers exception).\nAs per https://stackoverflow.com/questions/30132902/how-is-the-zero-length-array-represented-in-memory, 32 bytes will be allocated for an empty array.", "createdAt": "2020-08-07T01:24:33Z", "url": "https://github.com/hibernate/hibernate-orm/pull/3493", "merged": true, "mergeCommit": {"oid": "d5a6774cd2edb30fefc237d7046ed0249b0d1375"}, "closed": true, "closedAt": "2021-01-13T13:35:09Z", "author": {"login": "NathanQingyangXu"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc8aN_UgBqjM2MzE0MDQ3MDU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdvvwZ0gBqjQyMDEyMjE5MDY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": null}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "4fcec6845fb156b74c511f0968939501a96c1a0a", "author": {"user": {"login": "NathanQingyangXu", "name": "Nathan Xu"}}, "url": "https://github.com/hibernate/hibernate-orm/commit/4fcec6845fb156b74c511f0968939501a96c1a0a", "committedDate": "2020-08-19T22:14:20Z", "message": "reuse ArrayHelper's empty array constant to avoid object creation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4fcec6845fb156b74c511f0968939501a96c1a0a", "author": {"user": {"login": "NathanQingyangXu", "name": "Nathan Xu"}}, "url": "https://github.com/hibernate/hibernate-orm/commit/4fcec6845fb156b74c511f0968939501a96c1a0a", "committedDate": "2020-08-19T22:14:20Z", "message": "reuse ArrayHelper's empty array constant to avoid object creation"}, "afterCommit": {"oid": "273c819de3e93872e21e75e84f11c3961e9809d2", "author": {"user": {"login": "NathanQingyangXu", "name": "Nathan Xu"}}, "url": "https://github.com/hibernate/hibernate-orm/commit/273c819de3e93872e21e75e84f11c3961e9809d2", "committedDate": "2021-01-13T02:35:45Z", "message": "reuse ArrayHelper's empty array constant to avoid object creation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "273c819de3e93872e21e75e84f11c3961e9809d2", "author": {"user": {"login": "NathanQingyangXu", "name": "Nathan Xu"}}, "url": "https://github.com/hibernate/hibernate-orm/commit/273c819de3e93872e21e75e84f11c3961e9809d2", "committedDate": "2021-01-13T02:35:45Z", "message": "reuse ArrayHelper's empty array constant to avoid object creation"}, "afterCommit": {"oid": "43c42166cfca4464ad050faf53741db6d2b0a199", "author": {"user": {"login": "NathanQingyangXu", "name": "Nathan Xu"}}, "url": "https://github.com/hibernate/hibernate-orm/commit/43c42166cfca4464ad050faf53741db6d2b0a199", "committedDate": "2021-01-13T02:47:29Z", "message": "reuse ArrayHelper's empty array constant to avoid object creation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY3MDcwMTA5", "url": "https://github.com/hibernate/hibernate-orm/pull/3493#pullrequestreview-567070109", "createdAt": "2021-01-13T10:10:15Z", "commit": {"oid": "43c42166cfca4464ad050faf53741db6d2b0a199"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xM1QxMDoxMDoxNlrOISoSxA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xM1QxMDoxMDo0OVrOISoUDQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NjQwNTQ0NA==", "bodyText": "Revert please\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            import org.hibernate.internal.util.collections.ArrayHelper;", "url": "https://github.com/hibernate/hibernate-orm/pull/3493#discussion_r556405444", "createdAt": "2021-01-13T10:10:16Z", "author": {"login": "beikov"}, "path": "hibernate-core/src/main/java/org/hibernate/cfg/annotations/reflection/JPAOverriddenAnnotationReader.java", "diffHunk": "@@ -129,6 +129,7 @@\n import org.hibernate.internal.CoreLogging;\n import org.hibernate.internal.CoreMessageLogger;\n import org.hibernate.internal.util.StringHelper;\n+import org.hibernate.internal.util.collections.ArrayHelper;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "43c42166cfca4464ad050faf53741db6d2b0a199"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NjQwNTc3Mw==", "bodyText": "Revert please\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            import org.hibernate.internal.util.collections.ArrayHelper;", "url": "https://github.com/hibernate/hibernate-orm/pull/3493#discussion_r556405773", "createdAt": "2021-01-13T10:10:49Z", "author": {"login": "beikov"}, "path": "hibernate-core/src/main/java/org/hibernate/engine/spi/ActionQueue.java", "diffHunk": "@@ -45,6 +45,7 @@\n import org.hibernate.engine.internal.NonNullableTransientDependencies;\n import org.hibernate.internal.CoreLogging;\n import org.hibernate.internal.CoreMessageLogger;\n+import org.hibernate.internal.util.collections.ArrayHelper;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "43c42166cfca4464ad050faf53741db6d2b0a199"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4d74212db7f129c8bea56eb044f33d45a95a0e75", "author": {"user": {"login": "NathanQingyangXu", "name": "Nathan Xu"}}, "url": "https://github.com/hibernate/hibernate-orm/commit/4d74212db7f129c8bea56eb044f33d45a95a0e75", "committedDate": "2021-01-13T13:29:47Z", "message": "reuse ArrayHelper's empty array constant to avoid object creation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "43c42166cfca4464ad050faf53741db6d2b0a199", "author": {"user": {"login": "NathanQingyangXu", "name": "Nathan Xu"}}, "url": "https://github.com/hibernate/hibernate-orm/commit/43c42166cfca4464ad050faf53741db6d2b0a199", "committedDate": "2021-01-13T02:47:29Z", "message": "reuse ArrayHelper's empty array constant to avoid object creation"}, "afterCommit": {"oid": "4d74212db7f129c8bea56eb044f33d45a95a0e75", "author": {"user": {"login": "NathanQingyangXu", "name": "Nathan Xu"}}, "url": "https://github.com/hibernate/hibernate-orm/commit/4d74212db7f129c8bea56eb044f33d45a95a0e75", "committedDate": "2021-01-13T13:29:47Z", "message": "reuse ArrayHelper's empty array constant to avoid object creation"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2839, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}