{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk3NzY1MDUx", "number": 3581, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQxMjo1ODo1NlrOEqTm6g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQxMjo1ODo1NlrOEqTm6g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEyNzk2OTA2OnYy", "diffSide": "RIGHT", "path": "hibernate-core/src/main/java/org/hibernate/engine/spi/ActionQueue.java", "isResolved": false, "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQxMjo1ODo1NlrOHcb4Dw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQxMzo0MTo0OVrOHdHI9g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTU3ODg5NQ==", "bodyText": "I suppose this change should be replicated in Hibernate Reactive's ReactiveActionQueue.\nIs it just this one line, @NathanQingyangXu ?", "url": "https://github.com/hibernate/hibernate-orm/pull/3581#discussion_r499578895", "createdAt": "2020-10-05T12:58:56Z", "author": {"login": "gavinking"}, "path": "hibernate-core/src/main/java/org/hibernate/engine/spi/ActionQueue.java", "diffHunk": "@@ -1268,7 +1268,9 @@ private void addParentChildEntityNames(AbstractEntityInsertAction action, BatchI\n \t\t\t\tfor ( int i = 0; i < propertyValues.length; i++ ) {\n \t\t\t\t\tObject value = propertyValues[i];\n \t\t\t\t\tType type = propertyTypes[i];\n-\t\t\t\t\taddParentChildEntityNameByPropertyAndValue( action, batchIdentifier, type, value );\n+\t\t\t\t\tif ( value != null ) {\n+\t\t\t\t\t\taddParentChildEntityNameByPropertyAndValue( action, batchIdentifier, type, value );\n+\t\t\t\t\t}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e770b0b7d1ce57c1becdd9ede564f6b9a3bb7ade"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTU4MTA2Mg==", "bodyText": "it is", "url": "https://github.com/hibernate/hibernate-orm/pull/3581#discussion_r499581062", "createdAt": "2020-10-05T13:02:18Z", "author": {"login": "Sanne"}, "path": "hibernate-core/src/main/java/org/hibernate/engine/spi/ActionQueue.java", "diffHunk": "@@ -1268,7 +1268,9 @@ private void addParentChildEntityNames(AbstractEntityInsertAction action, BatchI\n \t\t\t\tfor ( int i = 0; i < propertyValues.length; i++ ) {\n \t\t\t\t\tObject value = propertyValues[i];\n \t\t\t\t\tType type = propertyTypes[i];\n-\t\t\t\t\taddParentChildEntityNameByPropertyAndValue( action, batchIdentifier, type, value );\n+\t\t\t\t\tif ( value != null ) {\n+\t\t\t\t\t\taddParentChildEntityNameByPropertyAndValue( action, batchIdentifier, type, value );\n+\t\t\t\t\t}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTU3ODg5NQ=="}, "originalCommit": {"oid": "e770b0b7d1ce57c1becdd9ede564f6b9a3bb7ade"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTY1ODMzNw==", "bodyText": "alright I will just copy it over then", "url": "https://github.com/hibernate/hibernate-orm/pull/3581#discussion_r499658337", "createdAt": "2020-10-05T14:51:25Z", "author": {"login": "gavinking"}, "path": "hibernate-core/src/main/java/org/hibernate/engine/spi/ActionQueue.java", "diffHunk": "@@ -1268,7 +1268,9 @@ private void addParentChildEntityNames(AbstractEntityInsertAction action, BatchI\n \t\t\t\tfor ( int i = 0; i < propertyValues.length; i++ ) {\n \t\t\t\t\tObject value = propertyValues[i];\n \t\t\t\t\tType type = propertyTypes[i];\n-\t\t\t\t\taddParentChildEntityNameByPropertyAndValue( action, batchIdentifier, type, value );\n+\t\t\t\t\tif ( value != null ) {\n+\t\t\t\t\t\taddParentChildEntityNameByPropertyAndValue( action, batchIdentifier, type, value );\n+\t\t\t\t\t}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTU3ODg5NQ=="}, "originalCommit": {"oid": "e770b0b7d1ce57c1becdd9ede564f6b9a3bb7ade"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTczNTg2MA==", "bodyText": "Ah, I failed to notice we should also remove the unnecessary nullness checking in addParentChildEntityNameByPropertyAndValue private method (which has been done in my original PR). It would hurt the code readability. IMHO, the ActionQueue has big room for improvement. I am gonna create another ticket and PR to include the above code change mentioned, together with many other minor issues.", "url": "https://github.com/hibernate/hibernate-orm/pull/3581#discussion_r499735860", "createdAt": "2020-10-05T16:47:32Z", "author": {"login": "NathanQingyangXu"}, "path": "hibernate-core/src/main/java/org/hibernate/engine/spi/ActionQueue.java", "diffHunk": "@@ -1268,7 +1268,9 @@ private void addParentChildEntityNames(AbstractEntityInsertAction action, BatchI\n \t\t\t\tfor ( int i = 0; i < propertyValues.length; i++ ) {\n \t\t\t\t\tObject value = propertyValues[i];\n \t\t\t\t\tType type = propertyTypes[i];\n-\t\t\t\t\taddParentChildEntityNameByPropertyAndValue( action, batchIdentifier, type, value );\n+\t\t\t\t\tif ( value != null ) {\n+\t\t\t\t\t\taddParentChildEntityNameByPropertyAndValue( action, batchIdentifier, type, value );\n+\t\t\t\t\t}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTU3ODg5NQ=="}, "originalCommit": {"oid": "e770b0b7d1ce57c1becdd9ede564f6b9a3bb7ade"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTc0MDc4Nw==", "bodyText": "I created a ticket here: https://hibernate.atlassian.net/browse/HHH-14248. Will work on it soon.", "url": "https://github.com/hibernate/hibernate-orm/pull/3581#discussion_r499740787", "createdAt": "2020-10-05T16:55:59Z", "author": {"login": "NathanQingyangXu"}, "path": "hibernate-core/src/main/java/org/hibernate/engine/spi/ActionQueue.java", "diffHunk": "@@ -1268,7 +1268,9 @@ private void addParentChildEntityNames(AbstractEntityInsertAction action, BatchI\n \t\t\t\tfor ( int i = 0; i < propertyValues.length; i++ ) {\n \t\t\t\t\tObject value = propertyValues[i];\n \t\t\t\t\tType type = propertyTypes[i];\n-\t\t\t\t\taddParentChildEntityNameByPropertyAndValue( action, batchIdentifier, type, value );\n+\t\t\t\t\tif ( value != null ) {\n+\t\t\t\t\t\taddParentChildEntityNameByPropertyAndValue( action, batchIdentifier, type, value );\n+\t\t\t\t\t}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTU3ODg5NQ=="}, "originalCommit": {"oid": "e770b0b7d1ce57c1becdd9ede564f6b9a3bb7ade"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDI4NzczNA==", "bodyText": "It is my fault. @Sanne 's code change is correct. Removing the nullness checking in addParentChildEntityNameByPropertyAndValue breaks FumTest for there is other entrance to the method bring null value in.", "url": "https://github.com/hibernate/hibernate-orm/pull/3581#discussion_r500287734", "createdAt": "2020-10-06T13:41:49Z", "author": {"login": "NathanQingyangXu"}, "path": "hibernate-core/src/main/java/org/hibernate/engine/spi/ActionQueue.java", "diffHunk": "@@ -1268,7 +1268,9 @@ private void addParentChildEntityNames(AbstractEntityInsertAction action, BatchI\n \t\t\t\tfor ( int i = 0; i < propertyValues.length; i++ ) {\n \t\t\t\t\tObject value = propertyValues[i];\n \t\t\t\t\tType type = propertyTypes[i];\n-\t\t\t\t\taddParentChildEntityNameByPropertyAndValue( action, batchIdentifier, type, value );\n+\t\t\t\t\tif ( value != null ) {\n+\t\t\t\t\t\taddParentChildEntityNameByPropertyAndValue( action, batchIdentifier, type, value );\n+\t\t\t\t\t}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTU3ODg5NQ=="}, "originalCommit": {"oid": "e770b0b7d1ce57c1becdd9ede564f6b9a3bb7ade"}, "originalPosition": 16}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4085, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}