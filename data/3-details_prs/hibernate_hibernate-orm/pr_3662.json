{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI2NjY5NDQ2", "number": 3662, "title": "Work on column alias resolving", "bodyText": "", "createdAt": "2020-11-24T18:15:59Z", "url": "https://github.com/hibernate/hibernate-orm/pull/3662", "merged": true, "mergeCommit": {"oid": "7bf5117a020650c16137e6634eeb352ccd89725c"}, "closed": true, "closedAt": "2021-02-23T18:29:52Z", "author": {"login": "beikov"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABd5ZdoxgBqjQzMjQ3MTk5ODc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABd866GpgBqjQzNjQ3Mzc5NTI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7d06547592c0a7b50ff91603541fb74a75b6f50d", "author": {"user": {"login": "beikov", "name": "Christian Beikov"}}, "url": "https://github.com/hibernate/hibernate-orm/commit/7d06547592c0a7b50ff91603541fb74a75b6f50d", "committedDate": "2020-11-24T18:15:25Z", "message": "Work on column alias resolving"}, "afterCommit": {"oid": "e900fdd72ca3971fe47f91708732d15eed7b409a", "author": {"user": {"login": "beikov", "name": "Christian Beikov"}}, "url": "https://github.com/hibernate/hibernate-orm/commit/e900fdd72ca3971fe47f91708732d15eed7b409a", "committedDate": "2021-02-12T13:10:47Z", "message": "Work on column alias resolving"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTkwNjE1NjM4", "url": "https://github.com/hibernate/hibernate-orm/pull/3662#pullrequestreview-590615638", "createdAt": "2021-02-15T16:20:21Z", "commit": {"oid": "e900fdd72ca3971fe47f91708732d15eed7b409a"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0xNVQxNjoyMDoyMVrOIlmvZw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0xNVQxNjoyMTo0NVrOIlmyfQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3NjMwMjk1MQ==", "bodyText": "Are these passed columns ever used here?", "url": "https://github.com/hibernate/hibernate-orm/pull/3662#discussion_r576302951", "createdAt": "2021-02-15T16:20:21Z", "author": {"login": "sebersole"}, "path": "hibernate-core/src/main/java/org/hibernate/query/internal/FetchBuilderJpa.java", "diffHunk": "@@ -6,31 +6,46 @@\n  */\n package org.hibernate.query.internal;\n \n+import java.util.List;\n import java.util.function.BiFunction;\n \n import org.hibernate.LockMode;\n import org.hibernate.engine.FetchTiming;\n-import org.hibernate.metamodel.mapping.ModelPart;\n import org.hibernate.query.NavigablePath;\n+import org.hibernate.query.results.DomainResultCreationStateImpl;\n import org.hibernate.query.results.FetchBuilder;\n+import org.hibernate.query.results.MissingSqlSelectionException;\n+import org.hibernate.query.results.PositionalSelectionsNotAllowedException;\n+import org.hibernate.query.results.SqlSelectionImpl;\n import org.hibernate.query.results.dynamic.DynamicFetchBuilderLegacy;\n+import org.hibernate.sql.ast.tree.from.TableGroup;\n+import org.hibernate.sql.ast.tree.from.TableReference;\n import org.hibernate.sql.results.graph.DomainResultCreationState;\n import org.hibernate.sql.results.graph.Fetch;\n import org.hibernate.sql.results.graph.FetchParent;\n import org.hibernate.sql.results.graph.Fetchable;\n import org.hibernate.sql.results.graph.FetchableContainer;\n import org.hibernate.sql.results.jdbc.spi.JdbcValuesMetadata;\n \n+import static org.hibernate.query.results.ResultsHelper.impl;\n+import static org.hibernate.query.results.ResultsHelper.jdbcPositionToValuesArrayPosition;\n+import static org.hibernate.sql.ast.spi.SqlExpressionResolver.createColumnReferenceKey;\n+\n /**\n  * @author Steve Ebersole\n  */\n public class FetchBuilderJpa implements FetchBuilder {\n \tprivate final NavigablePath navigablePath;\n \tprivate final String attributePath;\n+\tprivate final List<String> columnNames;\n \n-\tpublic FetchBuilderJpa(NavigablePath navigablePath, String attributePath) {\n+\tpublic FetchBuilderJpa(\n+\t\t\tNavigablePath navigablePath,\n+\t\t\tString attributePath,\n+\t\t\tList<String> columnNames) {\n \t\tthis.navigablePath = navigablePath;\n \t\tthis.attributePath = attributePath;\n+\t\tthis.columnNames = columnNames;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e900fdd72ca3971fe47f91708732d15eed7b409a"}, "originalPosition": 45}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3NjMwMzc0MQ==", "bodyText": "Here again, the only use of the passed columns is to pass them to FetchBuilderJpa which seems to never use them.", "url": "https://github.com/hibernate/hibernate-orm/pull/3662#discussion_r576303741", "createdAt": "2021-02-15T16:21:45Z", "author": {"login": "sebersole"}, "path": "hibernate-core/src/main/java/org/hibernate/query/internal/FetchMementoJpa.java", "diffHunk": "@@ -19,10 +20,12 @@\n \n \tprivate final NavigablePath fetchPath;\n \tprivate final String attributePath;\n+\tprivate final List<String> columnNames;\n \n-\tpublic FetchMementoJpa(NavigablePath fetchPath, String attributePath) {\n+\tpublic FetchMementoJpa(NavigablePath fetchPath, String attributePath, List<String> columnNames) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e900fdd72ca3971fe47f91708732d15eed7b409a"}, "originalPosition": 15}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e900fdd72ca3971fe47f91708732d15eed7b409a", "author": {"user": {"login": "beikov", "name": "Christian Beikov"}}, "url": "https://github.com/hibernate/hibernate-orm/commit/e900fdd72ca3971fe47f91708732d15eed7b409a", "committedDate": "2021-02-12T13:10:47Z", "message": "Work on column alias resolving"}, "afterCommit": {"oid": "17e9cd2821914047aca6ee20e85f53b277710264", "author": {"user": {"login": "beikov", "name": "Christian Beikov"}}, "url": "https://github.com/hibernate/hibernate-orm/commit/17e9cd2821914047aca6ee20e85f53b277710264", "committedDate": "2021-02-23T11:45:54Z", "message": "Work on column alias resolving"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "42964223589d7be9a004184c18c7e2681ec55485", "author": {"user": {"login": "beikov", "name": "Christian Beikov"}}, "url": "https://github.com/hibernate/hibernate-orm/commit/42964223589d7be9a004184c18c7e2681ec55485", "committedDate": "2021-02-23T11:50:31Z", "message": "Work on column alias resolving"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "17e9cd2821914047aca6ee20e85f53b277710264", "author": {"user": {"login": "beikov", "name": "Christian Beikov"}}, "url": "https://github.com/hibernate/hibernate-orm/commit/17e9cd2821914047aca6ee20e85f53b277710264", "committedDate": "2021-02-23T11:45:54Z", "message": "Work on column alias resolving"}, "afterCommit": {"oid": "42964223589d7be9a004184c18c7e2681ec55485", "author": {"user": {"login": "beikov", "name": "Christian Beikov"}}, "url": "https://github.com/hibernate/hibernate-orm/commit/42964223589d7be9a004184c18c7e2681ec55485", "committedDate": "2021-02-23T11:50:31Z", "message": "Work on column alias resolving"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2796, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}