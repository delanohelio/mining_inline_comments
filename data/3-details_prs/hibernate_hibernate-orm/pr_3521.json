{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDczMTUxNzc1", "number": 3521, "title": "on H2 1.4.200 and above use localtime/localtimestamp (H5)", "bodyText": "As suggested by @famod we need to use localtime instead of current_time because of changes in H2.\nIn particular the JDBC driver now refuses to convert TIME/TIMESTAMP WITH TIME ZONE to plain TIME/TIMESTAMP.\nDoes this look right @famod?", "createdAt": "2020-08-25T11:55:18Z", "url": "https://github.com/hibernate/hibernate-orm/pull/3521", "merged": true, "mergeCommit": {"oid": "179327cd403942ab1256d93467f2de56788750e1"}, "closed": true, "closedAt": "2021-04-22T10:18:37Z", "author": {"login": "gavinking"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdCaMizgBqjM2OTEwNTcxMzc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABeKaL1EgBqjQ1NTU3MDI4NzM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "75a66abf703608997d92735502b83024d0571068", "author": {"user": {"login": "gavinking", "name": "Gavin King"}}, "url": "https://github.com/hibernate/hibernate-orm/commit/75a66abf703608997d92735502b83024d0571068", "committedDate": "2020-08-25T16:55:11Z", "message": "on H2 1.4.200 and above use localtime/localtimestamp\n\nAs suggested by @famod we need to use localtime instead\nor current_time because of changes in H2.\n\nIn particular the JDBC driver now refuses to convert\nTIME/TIMESTAMP WITH TIME ZONE to plain TIME/TIMESTAMP."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc0NzEyNTg0", "url": "https://github.com/hibernate/hibernate-orm/pull/3521#pullrequestreview-474712584", "createdAt": "2020-08-25T17:42:38Z", "commit": {"oid": "75a66abf703608997d92735502b83024d0571068"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQxNzo0MjozOVrOHGjCFw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQxNzo0MjozOVrOHGjCFw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjYyNzQ3OQ==", "bodyText": "Shouldn't this (and the next line) be >=198 instead?\n#3412 (comment)\nMy sentence\n\nAs of 1.4.200 other functions also include the time zone and might fail as well but those changes might have been made after 1.4.198.\n\nmight have been a bit misleading. \"As of 1.4.200\" means that the current online documentation (which matches 1.4.200) is saying that even more functions include the time zone but I haven't checked whether those functions were added also in 198 or in 199 or 200.", "url": "https://github.com/hibernate/hibernate-orm/pull/3521#discussion_r476627479", "createdAt": "2020-08-25T17:42:39Z", "author": {"login": "famod"}, "path": "hibernate-core/src/main/java/org/hibernate/dialect/H2Dialect.java", "diffHunk": "@@ -210,8 +210,8 @@ public H2Dialect() {\n \t\tregisterFunction( \"curtime\", new NoArgSQLFunction( \"curtime\", StandardBasicTypes.TIME ) );\n \t\tregisterFunction( \"curtimestamp\", new NoArgSQLFunction( \"curtimestamp\", StandardBasicTypes.TIME ) );\n \t\tregisterFunction( \"current_date\", new NoArgSQLFunction( \"current_date\", StandardBasicTypes.DATE ) );\n-\t\tregisterFunction( \"current_time\", new NoArgSQLFunction( \"current_time\", StandardBasicTypes.TIME ) );\n-\t\tregisterFunction( \"current_timestamp\", new NoArgSQLFunction( \"current_timestamp\", StandardBasicTypes.TIMESTAMP ) );\n+\t\tregisterFunction( \"current_time\", new NoArgSQLFunction( buildId >= 200 ? \"localtime\" : \"current_time\", StandardBasicTypes.TIME ) );", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "75a66abf703608997d92735502b83024d0571068"}, "originalPosition": 6}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "75a66abf703608997d92735502b83024d0571068", "author": {"user": {"login": "gavinking", "name": "Gavin King"}}, "url": "https://github.com/hibernate/hibernate-orm/commit/75a66abf703608997d92735502b83024d0571068", "committedDate": "2020-08-25T16:55:11Z", "message": "on H2 1.4.200 and above use localtime/localtimestamp\n\nAs suggested by @famod we need to use localtime instead\nor current_time because of changes in H2.\n\nIn particular the JDBC driver now refuses to convert\nTIME/TIMESTAMP WITH TIME ZONE to plain TIME/TIMESTAMP."}, "afterCommit": {"oid": "1416323b87d90bfd53aebdc55795005976b9068c", "author": {"user": {"login": "gavinking", "name": "Gavin King"}}, "url": "https://github.com/hibernate/hibernate-orm/commit/1416323b87d90bfd53aebdc55795005976b9068c", "committedDate": "2021-04-06T09:36:13Z", "message": "on H2 1.4.200 and above use localtime/localtimestamp\n\nAs suggested by @famod we need to use localtime instead\nor current_time because of changes in H2.\n\nIn particular the JDBC driver now refuses to convert\nTIME/TIMESTAMP WITH TIME ZONE to plain TIME/TIMESTAMP."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b259980989f59a4488c91fa338605efbcf77c20e", "author": {"user": {"login": "gavinking", "name": "Gavin King"}}, "url": "https://github.com/hibernate/hibernate-orm/commit/b259980989f59a4488c91fa338605efbcf77c20e", "committedDate": "2021-04-06T09:37:50Z", "message": "[HHH-14031] on H2 1.4.200 and above use localtime/localtimestamp\n\nAs suggested by @famod we need to use localtime instead\nor current_time because of changes in H2.\n\nIn particular the JDBC driver now refuses to convert\nTIME/TIMESTAMP WITH TIME ZONE to plain TIME/TIMESTAMP."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1416323b87d90bfd53aebdc55795005976b9068c", "author": {"user": {"login": "gavinking", "name": "Gavin King"}}, "url": "https://github.com/hibernate/hibernate-orm/commit/1416323b87d90bfd53aebdc55795005976b9068c", "committedDate": "2021-04-06T09:36:13Z", "message": "on H2 1.4.200 and above use localtime/localtimestamp\n\nAs suggested by @famod we need to use localtime instead\nor current_time because of changes in H2.\n\nIn particular the JDBC driver now refuses to convert\nTIME/TIMESTAMP WITH TIME ZONE to plain TIME/TIMESTAMP."}, "afterCommit": {"oid": "b259980989f59a4488c91fa338605efbcf77c20e", "author": {"user": {"login": "gavinking", "name": "Gavin King"}}, "url": "https://github.com/hibernate/hibernate-orm/commit/b259980989f59a4488c91fa338605efbcf77c20e", "committedDate": "2021-04-06T09:37:50Z", "message": "[HHH-14031] on H2 1.4.200 and above use localtime/localtimestamp\n\nAs suggested by @famod we need to use localtime instead\nor current_time because of changes in H2.\n\nIn particular the JDBC driver now refuses to convert\nTIME/TIMESTAMP WITH TIME ZONE to plain TIME/TIMESTAMP."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2884, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}