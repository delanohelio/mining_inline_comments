{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk3NzY1MDUx", "number": 3581, "title": "HHH-14227 fix some ActionQueue insert ordering regression issues", "bodyText": "Replaces #3580 , just reorganized the changest a bit. All credit to @NathanQingyangXu\n\nhttps://hibernate.atlassian.net/browse/HHH-14227", "createdAt": "2020-10-05T10:51:16Z", "url": "https://github.com/hibernate/hibernate-orm/pull/3581", "merged": true, "mergeCommit": {"oid": "d045797aa7307247d0f964198206de55d063e3fa"}, "closed": true, "closedAt": "2020-10-05T12:40:09Z", "author": {"login": "Sanne"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdPhgNigH2gAyNDk3NzY1MDUxOjcwODA3MTdlZjYxNGE4ZDA5M2NlZDJlZGIzMzQyM2FhOWM2ZTYyMWE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdPjX8oAFqTUwMjAyODUzMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "7080717ef614a8d093ced2edb33423aa9c6e621a", "author": {"user": {"login": "NathanQingyangXu", "name": "Nathan Xu"}}, "url": "https://github.com/hibernate/hibernate-orm/commit/7080717ef614a8d093ced2edb33423aa9c6e621a", "committedDate": "2020-10-05T10:48:09Z", "message": "HHH-14227 Insert statements are not ordered with entities that use inheritance and reference a subclass"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "46de4d5dcd19487eb08a1d3a6cada49e1fc8247c", "author": {"user": {"login": "NathanQingyangXu", "name": "Nathan Xu"}}, "url": "https://github.com/hibernate/hibernate-orm/commit/46de4d5dcd19487eb08a1d3a6cada49e1fc8247c", "committedDate": "2020-10-05T10:48:25Z", "message": "HHH-14227 Some additional typos and message improvements"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e770b0b7d1ce57c1becdd9ede564f6b9a3bb7ade", "author": {"user": {"login": "NathanQingyangXu", "name": "Nathan Xu"}}, "url": "https://github.com/hibernate/hibernate-orm/commit/e770b0b7d1ce57c1becdd9ede564f6b9a3bb7ade", "committedDate": "2020-10-05T10:48:38Z", "message": "HHH-14227 Add some more tests to cover order of batched insert executions"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAxOTg1NjQ0", "url": "https://github.com/hibernate/hibernate-orm/pull/3581#pullrequestreview-501985644", "createdAt": "2020-10-05T12:03:57Z", "commit": {"oid": "e770b0b7d1ce57c1becdd9ede564f6b9a3bb7ade"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAyMDI4NTMz", "url": "https://github.com/hibernate/hibernate-orm/pull/3581#pullrequestreview-502028533", "createdAt": "2020-10-05T12:58:56Z", "commit": {"oid": "e770b0b7d1ce57c1becdd9ede564f6b9a3bb7ade"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQxMjo1ODo1NlrOHcb4Dw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQxMjo1ODo1NlrOHcb4Dw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTU3ODg5NQ==", "bodyText": "I suppose this change should be replicated in Hibernate Reactive's ReactiveActionQueue.\nIs it just this one line, @NathanQingyangXu ?", "url": "https://github.com/hibernate/hibernate-orm/pull/3581#discussion_r499578895", "createdAt": "2020-10-05T12:58:56Z", "author": {"login": "gavinking"}, "path": "hibernate-core/src/main/java/org/hibernate/engine/spi/ActionQueue.java", "diffHunk": "@@ -1268,7 +1268,9 @@ private void addParentChildEntityNames(AbstractEntityInsertAction action, BatchI\n \t\t\t\tfor ( int i = 0; i < propertyValues.length; i++ ) {\n \t\t\t\t\tObject value = propertyValues[i];\n \t\t\t\t\tType type = propertyTypes[i];\n-\t\t\t\t\taddParentChildEntityNameByPropertyAndValue( action, batchIdentifier, type, value );\n+\t\t\t\t\tif ( value != null ) {\n+\t\t\t\t\t\taddParentChildEntityNameByPropertyAndValue( action, batchIdentifier, type, value );\n+\t\t\t\t\t}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e770b0b7d1ce57c1becdd9ede564f6b9a3bb7ade"}, "originalPosition": 16}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2725, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}