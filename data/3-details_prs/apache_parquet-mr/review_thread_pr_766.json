{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgzNzA5NTY4", "number": 766, "reviewThreads": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQwOToxODoxM1rODlWBcg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOVQwOTo0Njo1MlrODmN6OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQwNDg0NzIyOnYy", "diffSide": "RIGHT", "path": "parquet-column/src/main/java/org/apache/parquet/example/data/simple/SimpleGroup.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQwOToxODoxM1rOFyLthA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQwOToxODoxM1rOFyLthA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODE2NDk5Ng==", "bodyText": "nit: Appending a char instead of a string with one char would perform a little bit better\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                          result.append(\"\\n\");\n          \n          \n            \n                          result.append('\\n');", "url": "https://github.com/apache/parquet-mr/pull/766#discussion_r388164996", "createdAt": "2020-03-05T09:18:13Z", "author": {"login": "gszadovszky"}, "path": "parquet-column/src/main/java/org/apache/parquet/example/data/simple/SimpleGroup.java", "diffHunk": "@@ -48,28 +48,30 @@ public String toString() {\n   }\n \n   public String toString(String indent) {\n-    String result = \"\";\n+    StringBuilder result = new StringBuilder();\n     int i = 0;\n     for (Type field : schema.getFields()) {\n       String name = field.getName();\n       List<Object> values = data[i];\n       ++i;\n-      if (values != null) {\n-        if (values.size() > 0) {\n+      if (values != null && !values.isEmpty()) {\n           for (Object value : values) {\n-            result += indent + name;\n+            result.append(indent);\n+            result.append(name);\n             if (value == null) {\n-              result += \": NULL\\n\";\n+              result.append(\": NULL\\n\");\n             } else if (value instanceof Group) {\n-              result += \"\\n\" + ((SimpleGroup)value).toString(indent+\"  \");\n+              result.append(\"\\n\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0b3a95c1cea10d3550c34965603fc75ec5bc9989"}, "originalPosition": 41}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQwNDg1NTM5OnYy", "diffSide": "RIGHT", "path": "parquet-column/src/main/java/org/apache/parquet/example/data/simple/SimpleGroup.java", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQwOToyMDozNFrOFyLyZg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQxMDoxOTowNVrOFyzytw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODE2NjI0Ng==", "bodyText": "As we are doing this change because of performance reasons I would create a private method in SimpleGroup that gets the StringBuilder object is it can append all the stuff into the same builder.", "url": "https://github.com/apache/parquet-mr/pull/766#discussion_r388166246", "createdAt": "2020-03-05T09:20:34Z", "author": {"login": "gszadovszky"}, "path": "parquet-column/src/main/java/org/apache/parquet/example/data/simple/SimpleGroup.java", "diffHunk": "@@ -48,28 +48,30 @@ public String toString() {\n   }\n \n   public String toString(String indent) {\n-    String result = \"\";\n+    StringBuilder result = new StringBuilder();\n     int i = 0;\n     for (Type field : schema.getFields()) {\n       String name = field.getName();\n       List<Object> values = data[i];\n       ++i;\n-      if (values != null) {\n-        if (values.size() > 0) {\n+      if (values != null && !values.isEmpty()) {\n           for (Object value : values) {\n-            result += indent + name;\n+            result.append(indent);\n+            result.append(name);\n             if (value == null) {\n-              result += \": NULL\\n\";\n+              result.append(\": NULL\\n\");\n             } else if (value instanceof Group) {\n-              result += \"\\n\" + ((SimpleGroup)value).toString(indent+\"  \");\n+              result.append(\"\\n\");\n+              result.append(((SimpleGroup)value).toString(indent+\"  \"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0b3a95c1cea10d3550c34965603fc75ec5bc9989"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODc3MDkxMg==", "bodyText": "Isn't it already using same StringBuilder?", "url": "https://github.com/apache/parquet-mr/pull/766#discussion_r388770912", "createdAt": "2020-03-06T08:33:20Z", "author": {"login": "koiralo"}, "path": "parquet-column/src/main/java/org/apache/parquet/example/data/simple/SimpleGroup.java", "diffHunk": "@@ -48,28 +48,30 @@ public String toString() {\n   }\n \n   public String toString(String indent) {\n-    String result = \"\";\n+    StringBuilder result = new StringBuilder();\n     int i = 0;\n     for (Type field : schema.getFields()) {\n       String name = field.getName();\n       List<Object> values = data[i];\n       ++i;\n-      if (values != null) {\n-        if (values.size() > 0) {\n+      if (values != null && !values.isEmpty()) {\n           for (Object value : values) {\n-            result += indent + name;\n+            result.append(indent);\n+            result.append(name);\n             if (value == null) {\n-              result += \": NULL\\n\";\n+              result.append(\": NULL\\n\");\n             } else if (value instanceof Group) {\n-              result += \"\\n\" + ((SimpleGroup)value).toString(indent+\"  \");\n+              result.append(\"\\n\");\n+              result.append(((SimpleGroup)value).toString(indent+\"  \"));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODE2NjI0Ng=="}, "originalCommit": {"oid": "0b3a95c1cea10d3550c34965603fc75ec5bc9989"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODc4MjAzOA==", "bodyText": "This method is recursive in case of the child is a Group. This method appends the string generated by this recursive invocation. So, if you have a deeply nested structure it would create a bunch of StringBuilder objects, generate String objects from them and appends them to the StringBuilder object created at the higher level.\nInstead, I would suggest passing the StringBuilder object created at the top level to the children's methods so you'll have only one builder and everything will be appended to it directly.", "url": "https://github.com/apache/parquet-mr/pull/766#discussion_r388782038", "createdAt": "2020-03-06T08:59:17Z", "author": {"login": "gszadovszky"}, "path": "parquet-column/src/main/java/org/apache/parquet/example/data/simple/SimpleGroup.java", "diffHunk": "@@ -48,28 +48,30 @@ public String toString() {\n   }\n \n   public String toString(String indent) {\n-    String result = \"\";\n+    StringBuilder result = new StringBuilder();\n     int i = 0;\n     for (Type field : schema.getFields()) {\n       String name = field.getName();\n       List<Object> values = data[i];\n       ++i;\n-      if (values != null) {\n-        if (values.size() > 0) {\n+      if (values != null && !values.isEmpty()) {\n           for (Object value : values) {\n-            result += indent + name;\n+            result.append(indent);\n+            result.append(name);\n             if (value == null) {\n-              result += \": NULL\\n\";\n+              result.append(\": NULL\\n\");\n             } else if (value instanceof Group) {\n-              result += \"\\n\" + ((SimpleGroup)value).toString(indent+\"  \");\n+              result.append(\"\\n\");\n+              result.append(((SimpleGroup)value).toString(indent+\"  \"));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODE2NjI0Ng=="}, "originalCommit": {"oid": "0b3a95c1cea10d3550c34965603fc75ec5bc9989"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODgyMTY4Nw==", "bodyText": "Thanks for detail explanation, I didn't take a detail look in recursive. I think changing a method signature and using StringBuilder should be enough.", "url": "https://github.com/apache/parquet-mr/pull/766#discussion_r388821687", "createdAt": "2020-03-06T10:19:05Z", "author": {"login": "koiralo"}, "path": "parquet-column/src/main/java/org/apache/parquet/example/data/simple/SimpleGroup.java", "diffHunk": "@@ -48,28 +48,30 @@ public String toString() {\n   }\n \n   public String toString(String indent) {\n-    String result = \"\";\n+    StringBuilder result = new StringBuilder();\n     int i = 0;\n     for (Type field : schema.getFields()) {\n       String name = field.getName();\n       List<Object> values = data[i];\n       ++i;\n-      if (values != null) {\n-        if (values.size() > 0) {\n+      if (values != null && !values.isEmpty()) {\n           for (Object value : values) {\n-            result += indent + name;\n+            result.append(indent);\n+            result.append(name);\n             if (value == null) {\n-              result += \": NULL\\n\";\n+              result.append(\": NULL\\n\");\n             } else if (value instanceof Group) {\n-              result += \"\\n\" + ((SimpleGroup)value).toString(indent+\"  \");\n+              result.append(\"\\n\");\n+              result.append(((SimpleGroup)value).toString(indent+\"  \"));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODE2NjI0Ng=="}, "originalCommit": {"oid": "0b3a95c1cea10d3550c34965603fc75ec5bc9989"}, "originalPosition": 42}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQwNDg3MDkzOnYy", "diffSide": "RIGHT", "path": "parquet-column/src/main/java/org/apache/parquet/io/MessageColumnIO.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQwOToyNDo1NlrOFyL7-g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQwOToyNDo1NlrOFyL7-g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODE2ODY5OA==", "bodyText": "You may create the builder with an exact capacity so it does not need to grow during appending values.\nAlso, you may count in the message itself and appending it instead of concatenating the indent to the message separately.", "url": "https://github.com/apache/parquet-mr/pull/766#discussion_r388168698", "createdAt": "2020-03-05T09:24:56Z", "author": {"login": "gszadovszky"}, "path": "parquet-column/src/main/java/org/apache/parquet/io/MessageColumnIO.java", "diffHunk": "@@ -276,11 +276,11 @@ private void printState() {\n \n     private void log(Object message, Object...parameters) {\n       if (DEBUG) {\n-        String indent = \"\";\n+        StringBuilder indent = new StringBuilder();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0b3a95c1cea10d3550c34965603fc75ec5bc9989"}, "originalPosition": 23}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQwNDg3ODc5OnYy", "diffSide": "RIGHT", "path": "parquet-column/src/test/java/org/apache/parquet/io/ExpectationValidatingConverter.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQwOToyNjo1M1rOFyMAgA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQwOToyNjo1M1rOFyMAgA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODE2OTg1Ng==", "bodyText": "nit: you may keep the chain pattern as append returns the builder object.\nDo not have a strong opinion on the current or the chained version.", "url": "https://github.com/apache/parquet-mr/pull/766#discussion_r388169856", "createdAt": "2020-03-05T09:26:53Z", "author": {"login": "gszadovszky"}, "path": "parquet-column/src/test/java/org/apache/parquet/io/ExpectationValidatingConverter.java", "diffHunk": "@@ -151,14 +151,16 @@ public Void getCurrentRecord() {\n   }\n \n   private String path(List<GroupType> path, Type type) {\n-    String pathString = \"\";\n+    StringBuilder pathString = new StringBuilder();\n     if (path.size() > 0) {\n       for (int i = 1; i < path.size(); i++) {\n-        pathString += path.get(i).getName() + \".\";\n+        pathString.append(path.get(i).getName());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0b3a95c1cea10d3550c34965603fc75ec5bc9989"}, "originalPosition": 27}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQwOTI0Njc0OnYy", "diffSide": "RIGHT", "path": "parquet-column/src/main/java/org/apache/parquet/example/data/simple/SimpleGroup.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQxMToyMjowMFrOFy1gog==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOVQwNzowNToxNlrOFzckFg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODg0OTgyNg==", "bodyText": "We shall not modify existing public methods as they are breaking changes. That's why I've mentioned creating a new private method that would be invoked by the existing ones.\nLet me put an example about the idea I wanted to describe:\npublic String toString(String indent) {\n  StringBuilder builder = new StringBuilder();\n  appendToString(builder, indent);\n  return builder.toString();\n}\n\nprivate void appendToString(StringBuilder builder, String indent) {\n  // ...\n        builder.append(indent).append(name);\n        if (value == null) {\n          builder.append(\": NULL\\N\");\n        } else if (value instanceof Group) {\n          builder.append('\\n');\n          ((SimpleGroup) value).appendToString(builder, indent + \"  \");\n        } else {\n          builder.append(\": \").append(value).append('\\n');\n  // ...\n}", "url": "https://github.com/apache/parquet-mr/pull/766#discussion_r388849826", "createdAt": "2020-03-06T11:22:00Z", "author": {"login": "gszadovszky"}, "path": "parquet-column/src/main/java/org/apache/parquet/example/data/simple/SimpleGroup.java", "diffHunk": "@@ -44,10 +44,10 @@ public SimpleGroup(GroupType schema) {\n \n   @Override\n   public String toString() {\n-    return toString(\"\");\n+    return toString(new StringBuilder()).toString();\n   }\n \n-  public String toString(String indent) {\n+  public StringBuilder toString(StringBuilder indent) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e3dce3e8e60d73067d2e9bf66bd45111229e185a"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTQ4OTY4Ng==", "bodyText": "Ok make sense. have done the required changes.", "url": "https://github.com/apache/parquet-mr/pull/766#discussion_r389489686", "createdAt": "2020-03-09T07:05:16Z", "author": {"login": "koiralo"}, "path": "parquet-column/src/main/java/org/apache/parquet/example/data/simple/SimpleGroup.java", "diffHunk": "@@ -44,10 +44,10 @@ public SimpleGroup(GroupType schema) {\n \n   @Override\n   public String toString() {\n-    return toString(\"\");\n+    return toString(new StringBuilder()).toString();\n   }\n \n-  public String toString(String indent) {\n+  public StringBuilder toString(StringBuilder indent) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODg0OTgyNg=="}, "originalCommit": {"oid": "e3dce3e8e60d73067d2e9bf66bd45111229e185a"}, "originalPosition": 9}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxMzk4ODM3OnYy", "diffSide": "RIGHT", "path": "parquet-column/src/main/java/org/apache/parquet/example/data/simple/SimpleGroup.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOVQwOTo0MjoxMFrOFzgSqg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOVQwOTo0MjoxMFrOFzgSqg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTU1MDc2Mg==", "bodyText": "nit:\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              private StringBuilder appendToString(StringBuilder builder, String indent){\n          \n          \n            \n            \n          \n          \n            \n              private StringBuilder appendToString(StringBuilder builder, String indent) {", "url": "https://github.com/apache/parquet-mr/pull/766#discussion_r389550762", "createdAt": "2020-03-09T09:42:10Z", "author": {"login": "gszadovszky"}, "path": "parquet-column/src/main/java/org/apache/parquet/example/data/simple/SimpleGroup.java", "diffHunk": "@@ -44,30 +44,34 @@ public SimpleGroup(GroupType schema) {\n \n   @Override\n   public String toString() {\n-    return toString(new StringBuilder()).toString();\n+    return toString(\"\");\n   }\n-\n-  public StringBuilder toString(StringBuilder indent) {\n-    StringBuilder result = new StringBuilder();\n+  private StringBuilder appendToString(StringBuilder builder, String indent){", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "64a47b46c0cd5cc7e4dd37ee1bbe6f93d3e9f40d"}, "originalPosition": 10}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxNDAwMTg5OnYy", "diffSide": "RIGHT", "path": "parquet-column/src/main/java/org/apache/parquet/example/data/simple/SimpleGroup.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOVQwOTo0NjoyMlrOFzga-g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOVQwOTo0NjoyMlrOFzga-g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTU1Mjg5MA==", "bodyText": "This is not correct this way. You are appending the builder to itself which would result mixed up output.\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        builder.append(\"\\n\").append(((SimpleGroup)value).appendToString(builder,indent+\"  \"));\n          \n          \n            \n                        builder.append('\\n');\n          \n          \n            \n                        ((SimpleGroup) value).appendToString(builder, indent + \"  \");", "url": "https://github.com/apache/parquet-mr/pull/766#discussion_r389552890", "createdAt": "2020-03-09T09:46:22Z", "author": {"login": "gszadovszky"}, "path": "parquet-column/src/main/java/org/apache/parquet/example/data/simple/SimpleGroup.java", "diffHunk": "@@ -44,30 +44,34 @@ public SimpleGroup(GroupType schema) {\n \n   @Override\n   public String toString() {\n-    return toString(new StringBuilder()).toString();\n+    return toString(\"\");\n   }\n-\n-  public StringBuilder toString(StringBuilder indent) {\n-    StringBuilder result = new StringBuilder();\n+  private StringBuilder appendToString(StringBuilder builder, String indent){\n     int i = 0;\n     for (Type field : schema.getFields()) {\n       String name = field.getName();\n       List<Object> values = data[i];\n       ++i;\n       if (values != null && !values.isEmpty()) {\n-          for (Object value : values) {\n-            result.append(indent).append(name);\n-            if (value == null) {\n-              result.append(\": NULL\\n\");\n-            } else if (value instanceof Group) {\n-              result.append(\"\\n\").append(((SimpleGroup)value).toString(indent.append(\"  \")));\n-            } else {\n-              result.append(\": \" ).append(value.toString()).append(\"\\n\");\n-            }\n+        for (Object value : values) {\n+          builder.append(indent).append(name);\n+          if (value == null) {\n+            builder.append(\": NULL\\n\");\n+          } else if (value instanceof Group) {\n+            builder.append(\"\\n\").append(((SimpleGroup)value).appendToString(builder,indent+\"  \"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "64a47b46c0cd5cc7e4dd37ee1bbe6f93d3e9f40d"}, "originalPosition": 31}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxNDAwMzc2OnYy", "diffSide": "RIGHT", "path": "parquet-column/src/main/java/org/apache/parquet/example/data/simple/SimpleGroup.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOVQwOTo0Njo1MlrOFzgcFg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOVQwOTo0Njo1MlrOFzgcFg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTU1MzE3NA==", "bodyText": "nit:\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        builder.append(\": \" ).append(value.toString()).append(\"\\n\");\n          \n          \n            \n                        builder.append(\": \").append(value.toString()).append('\\n');", "url": "https://github.com/apache/parquet-mr/pull/766#discussion_r389553174", "createdAt": "2020-03-09T09:46:52Z", "author": {"login": "gszadovszky"}, "path": "parquet-column/src/main/java/org/apache/parquet/example/data/simple/SimpleGroup.java", "diffHunk": "@@ -44,30 +44,34 @@ public SimpleGroup(GroupType schema) {\n \n   @Override\n   public String toString() {\n-    return toString(new StringBuilder()).toString();\n+    return toString(\"\");\n   }\n-\n-  public StringBuilder toString(StringBuilder indent) {\n-    StringBuilder result = new StringBuilder();\n+  private StringBuilder appendToString(StringBuilder builder, String indent){\n     int i = 0;\n     for (Type field : schema.getFields()) {\n       String name = field.getName();\n       List<Object> values = data[i];\n       ++i;\n       if (values != null && !values.isEmpty()) {\n-          for (Object value : values) {\n-            result.append(indent).append(name);\n-            if (value == null) {\n-              result.append(\": NULL\\n\");\n-            } else if (value instanceof Group) {\n-              result.append(\"\\n\").append(((SimpleGroup)value).toString(indent.append(\"  \")));\n-            } else {\n-              result.append(\": \" ).append(value.toString()).append(\"\\n\");\n-            }\n+        for (Object value : values) {\n+          builder.append(indent).append(name);\n+          if (value == null) {\n+            builder.append(\": NULL\\n\");\n+          } else if (value instanceof Group) {\n+            builder.append(\"\\n\").append(((SimpleGroup)value).appendToString(builder,indent+\"  \"));\n+          } else {\n+            builder.append(\": \" ).append(value.toString()).append(\"\\n\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "64a47b46c0cd5cc7e4dd37ee1bbe6f93d3e9f40d"}, "originalPosition": 33}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4734, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}