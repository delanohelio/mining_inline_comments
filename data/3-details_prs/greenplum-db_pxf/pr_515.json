{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM1MjQwODE0", "number": 515, "title": "Use Lombok for RequestContext", "bodyText": "Simplify RequestContext by using Lombok.\nRemove deprecated X-GP-DATA-FRAGMENT, use X-GP-FRAGMENT-INDEX instead.", "createdAt": "2020-12-09T14:59:33Z", "url": "https://github.com/greenplum-db/pxf/pull/515", "merged": true, "mergeCommit": {"oid": "c245347579cd810f7c13e8924cc00e6c823d6d24"}, "closed": true, "closedAt": "2020-12-09T19:17:30Z", "author": {"login": "frankgh"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdkgR8MAH2gAyNTM1MjQwODE0OjRlZmE4NGQ3YTcwYzViNDRjMzRjMDkyYzU3MTRjYjVlYTE2YTZjOWQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdkjJx0AH2gAyNTM1MjQwODE0OmIyMTg1ZjhhZjcxMGMyNTI4MWFlMTBlMTRkMTY5MWQ3N2Y3ZGU4Njg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "4efa84d7a70c5b44c34c092c5714cb5ea16a6c9d", "author": {"user": null}, "url": "https://github.com/greenplum-db/pxf/commit/4efa84d7a70c5b44c34c092c5714cb5ea16a6c9d", "committedDate": "2020-12-09T15:15:04Z", "message": "Use Lombok for RequestContext\n\n- Simplify RequestContext by using Lombok.\n- Remove deprecated X-GP-DATA-FRAGMENT, use X-GP-FRAGMENT-INDEX instead."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9d11a9a3b72af60ac77a9d83c950f346d58d911d", "author": {"user": null}, "url": "https://github.com/greenplum-db/pxf/commit/9d11a9a3b72af60ac77a9d83c950f346d58d911d", "committedDate": "2020-12-09T14:57:31Z", "message": "Use Lombok for RequestContext\n\n- Simplify RequestContext by using Lombok.\n- Remove deprecated X-GP-DATA-FRAGMENT, use X-GP-FRAGMENT-INDEX instead."}, "afterCommit": {"oid": "4efa84d7a70c5b44c34c092c5714cb5ea16a6c9d", "author": {"user": null}, "url": "https://github.com/greenplum-db/pxf/commit/4efa84d7a70c5b44c34c092c5714cb5ea16a6c9d", "committedDate": "2020-12-09T15:15:04Z", "message": "Use Lombok for RequestContext\n\n- Simplify RequestContext by using Lombok.\n- Remove deprecated X-GP-DATA-FRAGMENT, use X-GP-FRAGMENT-INDEX instead."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ4NDI2MDE3", "url": "https://github.com/greenplum-db/pxf/pull/515#pullrequestreview-548426017", "createdAt": "2020-12-09T17:31:07Z", "commit": {"oid": "4efa84d7a70c5b44c34c092c5714cb5ea16a6c9d"}, "state": "APPROVED", "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQxNzozMTowOFrOICgubQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQxNzo0ODoyN1rOIChkfQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTUwNDIzNw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                private String accessor;\n          \n          \n            \n                private String accessorClassName;\n          \n      \n    \n    \n  \n\nshould we do this and for other components as well (fragmented / resolver) ?", "url": "https://github.com/greenplum-db/pxf/pull/515#discussion_r539504237", "createdAt": "2020-12-09T17:31:08Z", "author": {"login": "denalex"}, "path": "server/pxf-api/src/main/java/org/greenplum/pxf/api/model/RequestContext.java", "diffHunk": "@@ -63,25 +68,101 @@ public void setRequestType(RequestType requestType) {\n     }\n \n     // ----- NAMED PROPERTIES -----\n+\n+    /**\n+     * The fully-qualified class name for the java class that was defined as\n+     * Accessor.\n+     */\n     private String accessor;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4efa84d7a70c5b44c34c092c5714cb5ea16a6c9d"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTUxNDAyOQ==", "bodyText": "nice, even though we technically do not need  @RequiredArgsConstructor that comes with it. Any way to suppress it ?", "url": "https://github.com/greenplum-db/pxf/pull/515#discussion_r539514029", "createdAt": "2020-12-09T17:42:32Z", "author": {"login": "denalex"}, "path": "server/pxf-api/src/main/java/org/greenplum/pxf/api/model/RequestContext.java", "diffHunk": "@@ -36,6 +40,7 @@\n  * Common configuration available to all PXF plugins. Represents input data\n  * coming from client applications, such as GPDB.\n  */\n+@Data", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4efa84d7a70c5b44c34c092c5714cb5ea16a6c9d"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTUxNDkyNA==", "bodyText": "so this was not used at all ? the write case would not have any fragments, default will change from -1 to 0, hopefully no existing logic impact ?", "url": "https://github.com/greenplum-db/pxf/pull/515#discussion_r539514924", "createdAt": "2020-12-09T17:43:52Z", "author": {"login": "denalex"}, "path": "server/pxf-api/src/main/java/org/greenplum/pxf/api/model/RequestContext.java", "diffHunk": "@@ -63,25 +68,101 @@ public void setRequestType(RequestType requestType) {\n     }\n \n     // ----- NAMED PROPERTIES -----\n+\n+    /**\n+     * The fully-qualified class name for the java class that was defined as\n+     * Accessor.\n+     */\n     private String accessor;\n+\n+    /**\n+     * The aggregate type, i.e - count, min, max, etc\n+     */\n     private EnumAggregationType aggType;\n+\n+    /**\n+     * The name of the server configuration for this request.\n+     */\n+    @Setter(AccessLevel.NONE)\n     private String config;\n+\n+    /**\n+     * The server configuration associated to the server that this request is\n+     * accessing\n+     */\n     private Configuration configuration;\n-    private int dataFragment = -1; /* should be deprecated */", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4efa84d7a70c5b44c34c092c5714cb5ea16a6c9d"}, "originalPosition": 48}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTUxNjIxMA==", "bodyText": "should this be transient to exclude from toString / hashcode methods ?", "url": "https://github.com/greenplum-db/pxf/pull/515#discussion_r539516210", "createdAt": "2020-12-09T17:45:47Z", "author": {"login": "denalex"}, "path": "server/pxf-api/src/main/java/org/greenplum/pxf/api/model/RequestContext.java", "diffHunk": "@@ -94,15 +175,46 @@ public void setRequestType(RequestType requestType) {\n      */\n     private int numAttrsProjected;\n \n+    /**\n+     * The plugin configuration\n+     */\n+    private PluginConf pluginConf;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4efa84d7a70c5b44c34c092c5714cb5ea16a6c9d"}, "originalPosition": 133}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTUxNjkzMg==", "bodyText": "why restrict getters ?", "url": "https://github.com/greenplum-db/pxf/pull/515#discussion_r539516932", "createdAt": "2020-12-09T17:46:45Z", "author": {"login": "denalex"}, "path": "server/pxf-api/src/main/java/org/greenplum/pxf/api/model/RequestContext.java", "diffHunk": "@@ -94,15 +175,46 @@ public void setRequestType(RequestType requestType) {\n      */\n     private int numAttrsProjected;\n \n+    /**\n+     * The plugin configuration\n+     */\n+    private PluginConf pluginConf;\n+\n+    /**\n+     * The server port providing the service.\n+     */\n+    private int port;\n+\n+    /**\n+     * The name of the profile associated to this request.\n+     */\n     private String profile;\n+\n+    /**\n+     * The scheme defined at the profile level\n+     */\n     private String profileScheme;\n \n-    // The protocol defined at the foreign data wrapper (FDW) level\n+    /**\n+     * The protocol defined at the foreign data wrapper (FDW) level\n+     */\n+    @Getter(AccessLevel.NONE)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4efa84d7a70c5b44c34c092c5714cb5ea16a6c9d"}, "originalPosition": 154}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTUxNzU1Mg==", "bodyText": "wow, what are these for ?", "url": "https://github.com/greenplum-db/pxf/pull/515#discussion_r539517552", "createdAt": "2020-12-09T17:47:39Z", "author": {"login": "denalex"}, "path": "server/pxf-api/src/main/java/org/greenplum/pxf/api/model/RequestContext.java", "diffHunk": "@@ -118,26 +230,62 @@ public void setRequestType(RequestType requestType) {\n      */\n     private ColumnDescriptor recordkeyColumn;\n \n+    /**\n+     * The contents of pxf_remote_service_login set in Greenplum. Should the\n+     * user set it to an empty string this function will return null.\n+     */\n     private String remoteLogin;\n+\n+    /**\n+     * The contents of pxf_remote_service_secret set in Greenplum. Should the\n+     * user set it to an empty string this function will return null.\n+     */", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4efa84d7a70c5b44c34c092c5714cb5ea16a6c9d"}, "originalPosition": 189}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTUxODA3Nw==", "bodyText": "still PXF_BASE, no ?", "url": "https://github.com/greenplum-db/pxf/pull/515#discussion_r539518077", "createdAt": "2020-12-09T17:48:27Z", "author": {"login": "denalex"}, "path": "server/pxf-api/src/main/java/org/greenplum/pxf/api/model/RequestContext.java", "diffHunk": "@@ -118,26 +230,62 @@ public void setRequestType(RequestType requestType) {\n      */\n     private ColumnDescriptor recordkeyColumn;\n \n+    /**\n+     * The contents of pxf_remote_service_login set in Greenplum. Should the\n+     * user set it to an empty string this function will return null.\n+     */\n     private String remoteLogin;\n+\n+    /**\n+     * The contents of pxf_remote_service_secret set in Greenplum. Should the\n+     * user set it to an empty string this function will return null.\n+     */\n     private String remoteSecret;\n-    private String resolver;\n+\n+    /**\n+     * The current segment ID in Greenplum.\n+     */\n     private int segmentId;\n+\n+    /**\n+     * The transaction ID for the current Greenplum query.\n+     */\n     private String transactionId;\n+\n     /**\n      * The name of the server to access. The name will be used to build\n-     * a path for the config files (i.e. $PXF_BASE/servers/$serverName/*.xml)\n+     * a path for the config files (i.e. $PXF_CONF/servers/$serverName/*.xml)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4efa84d7a70c5b44c34c092c5714cb5ea16a6c9d"}, "originalPosition": 206}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e4925e0e5864addc1709fa722764df20cb2b7f19", "author": {"user": null}, "url": "https://github.com/greenplum-db/pxf/commit/e4925e0e5864addc1709fa722764df20cb2b7f19", "committedDate": "2020-12-09T18:21:08Z", "message": "Address PR feedback"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b2185f8af710c25281ae10e14d1691d77f7de868", "author": {"user": null}, "url": "https://github.com/greenplum-db/pxf/commit/b2185f8af710c25281ae10e14d1691d77f7de868", "committedDate": "2020-12-09T18:35:52Z", "message": "Also apply ET change to FDW"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4791, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}