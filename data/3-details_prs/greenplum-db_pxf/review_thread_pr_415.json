{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU5MzA5NTAw", "number": 415, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQyMDo1NDo1OFrOET10pA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQyMDo1NzozMVrOET136A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg5MjQwMjI4OnYy", "diffSide": "RIGHT", "path": "server/pxf-hive/src/main/java/org/greenplum/pxf/plugins/hive/HiveClientWrapper.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQyMDo1NDo1OFrOG5zfIw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQyMDo1NDo1OFrOG5zfIw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzI2NTU3MQ==", "bodyText": "we do not know for sure that RuntimeException here would be caused only by the failure to instantiate HiveMetaStoreClientCompatibility1xx , it can happen for other reasons as well, I think we should adjust the error message and log it only if we're changing the actual exception that gets propagated.", "url": "https://github.com/greenplum-db/pxf/pull/415#discussion_r463265571", "createdAt": "2020-07-30T20:54:58Z", "author": {"login": "denalex"}, "path": "server/pxf-hive/src/main/java/org/greenplum/pxf/plugins/hive/HiveClientWrapper.java", "diffHunk": "@@ -420,9 +420,28 @@ static HiveClientFactory getInstance() {\n         }\n \n         IMetaStoreClient initHiveClient(HiveConf hiveConf) throws MetaException {\n-            return RetryingMetaStoreClient.getProxy(hiveConf, new Class[]{HiveConf.class, HiveMetaHookLoader.class, Boolean.class},\n-                    new Object[]{hiveConf, null, true}, null, HiveMetaStoreClientCompatibility1xx.class.getName()\n-            );\n+            try {\n+                return RetryingMetaStoreClient.getProxy(hiveConf, new Class[]{HiveConf.class, HiveMetaHookLoader.class, Boolean.class},\n+                        new Object[]{hiveConf, null, true}, null, HiveMetaStoreClientCompatibility1xx.class.getName()\n+                );\n+            } catch (RuntimeException ex) {\n+                LOG.warn(\"RuntimeException occurred while instantiating the HiveMetaStoreClientCompatibility1xx class\", ex);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6c77355f897a45dcd46f1a109f67a0533004790a"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg5MjQxMDY0OnYy", "diffSide": "RIGHT", "path": "server/pxf-hive/src/main/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClientCompatibility1xx.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQyMDo1NzozMVrOG5zkXQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQyMDo1NzozMVrOG5zkXQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzI2NjkwOQ==", "bodyText": "this is probably debug-level log entry as it will happen on every call for incompatible Hive versions", "url": "https://github.com/greenplum-db/pxf/pull/415#discussion_r463266909", "createdAt": "2020-07-30T20:57:31Z", "author": {"login": "denalex"}, "path": "server/pxf-hive/src/main/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClientCompatibility1xx.java", "diffHunk": "@@ -56,6 +57,9 @@ public Table getTable(String dbname, String name) throws TException {\n                     Table table = client.get_table(dbname, name);\n                     return new GetTableResult(table).getTable();\n                 }\n+            } catch (MetaException | NoSuchObjectException ex) {\n+                LOG.warn(\"Original exception not re-thrown\", e);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6c77355f897a45dcd46f1a109f67a0533004790a"}, "originalPosition": 22}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3419, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}