{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM2MDA2ODUw", "number": 386, "title": "docs - updates for rpm install, upgrade, related edits and file delet\u2026", "bodyText": "\u2026ions\nin this PR:\n\nadd a new pxf upgrade topic for upgrading a pxf installation with a pxf rpm.  (this installation may be an embedded pxf installation.  should also handle upgrade of pxf installed via rpm.)\nopen source book update to reference new pxf upgrade topic\nupdate the \"about pxf directories\" topic with new file\nremove greenplum upgrade and migration topics - they will stay in greenplum docs\nadd pxf [cluster] register command info\nadd a few notes that commands assume $PXF_INSTALL_DIR/bin has been added to path; could then remove $GPHOME/pxf/bin prefix from MANY pxf command examples\na few other misc edits\n\ndoc review site link:  http://docs-lisa-pxf-docset-rpm.cfapps.io/pxf/wip/release/index.html", "createdAt": "2020-06-17T17:54:37Z", "url": "https://github.com/greenplum-db/pxf/pull/386", "merged": true, "mergeCommit": {"oid": "67f043d2c527dd5c2f7ab13decfdae910f0b86c9"}, "closed": true, "closedAt": "2020-06-24T23:15:33Z", "author": {"login": "lisakowen"}, "timelineItems": {"totalCount": 16, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcsMMLpgH2gAyNDM2MDA2ODUwOjBlZjg1OGI5MjdiNDM1YzMwMTEzMjYzMDQ3MmE0YTM0OTY4YWNkNTA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcuiY1nAFqTQzNzA1OTU4Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "0ef858b927b435c301132630472a4a34968acd50", "author": {"user": {"login": "lisakowen", "name": "Lisa Owen"}}, "url": "https://github.com/greenplum-db/pxf/commit/0ef858b927b435c301132630472a4a34968acd50", "committedDate": "2020-06-17T16:10:55Z", "message": "docs - updates for rpm install, upgrade, related edits and file deletions"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMyNzkyNzUx", "url": "https://github.com/greenplum-db/pxf/pull/386#pullrequestreview-432792751", "createdAt": "2020-06-17T21:33:37Z", "commit": {"oid": "0ef858b927b435c301132630472a4a34968acd50"}, "state": "COMMENTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QyMTozMzozN1rOGlYMuQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QyMTo0MjoyN1rOGlYbvg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTg0Njk2OQ==", "bodyText": "copying of the extension files depends on whether $GPHOME/bin is in the $PATH. If $GPHOME/bin is not in the path, a warning will displayed but the operation will succeed. I'm not sure how to put this in the documentation not to making too confusing", "url": "https://github.com/greenplum-db/pxf/pull/386#discussion_r441846969", "createdAt": "2020-06-17T21:33:37Z", "author": {"login": "frankgh"}, "path": "docs/content/init_pxf.html.md.erb", "diffHunk": "@@ -47,7 +49,11 @@ Refer to [PXF User Configuration Directories](about_pxf_dir.html#usercfg) for a\n \n The PXF server runs on Java 8 or 11. You identify the PXF `$JAVA_HOME` and `$PXF_CONF` settings at PXF initialization time.\n \n-Initializing PXF creates the PXF Java web application, and generates PXF internal configuration files, setting default properties specific to your configuration.\n+Initializing PXF:\n+\n+- Copies PXF extension files from `$PXF_INSTALL_DIR/gpextable` to the Greenplum Database install directory `$GPHOME`.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0ef858b927b435c301132630472a4a34968acd50"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTg0NzMxNQ==", "bodyText": "maybe eventually we'll have instructions to install PXF outside of a greenplum cluster, and that would be easier?", "url": "https://github.com/greenplum-db/pxf/pull/386#discussion_r441847315", "createdAt": "2020-06-17T21:34:26Z", "author": {"login": "frankgh"}, "path": "docs/content/init_pxf.html.md.erb", "diffHunk": "@@ -47,7 +49,11 @@ Refer to [PXF User Configuration Directories](about_pxf_dir.html#usercfg) for a\n \n The PXF server runs on Java 8 or 11. You identify the PXF `$JAVA_HOME` and `$PXF_CONF` settings at PXF initialization time.\n \n-Initializing PXF creates the PXF Java web application, and generates PXF internal configuration files, setting default properties specific to your configuration.\n+Initializing PXF:\n+\n+- Copies PXF extension files from `$PXF_INSTALL_DIR/gpextable` to the Greenplum Database install directory `$GPHOME`.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTg0Njk2OQ=="}, "originalCommit": {"oid": "0ef858b927b435c301132630472a4a34968acd50"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTg0Nzc5NQ==", "bodyText": "Ensure $GPHOME/bin is in the $PATH for the PXF extension to be installed.", "url": "https://github.com/greenplum-db/pxf/pull/386#discussion_r441847795", "createdAt": "2020-06-17T21:35:29Z", "author": {"login": "frankgh"}, "path": "docs/content/init_pxf.html.md.erb", "diffHunk": "@@ -86,7 +92,7 @@ Perform the following procedure to initialize PXF on each segment host in your G\n 4. Run the `pxf cluster init` command to initialize the PXF service on the master, standby master, and on each segment host. For example, the following command specifies `/usr/local/greenplum-pxf` as the PXF user configuration directory for initialization:\n \n     ``` shell\n-    gpadmin@gpmaster$ PXF_CONF=/usr/local/greenplum-pxf $GPHOME/pxf/bin/pxf cluster init\n+    gpadmin@gpmaster$ PXF_CONF=/usr/local/greenplum-pxf pxf cluster init", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0ef858b927b435c301132630472a4a34968acd50"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTg0OTIxNA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            PXF does not remove the `$PXF_CONF` directory during a reset operation.\n          \n          \n            \n            PXF does not remove the `$PXF_CONF` directory during a reset operation nor does PXF removes the PXF extension files from the Greenplum Database installation .", "url": "https://github.com/greenplum-db/pxf/pull/386#discussion_r441849214", "createdAt": "2020-06-17T21:38:45Z", "author": {"login": "frankgh"}, "path": "docs/content/init_pxf.html.md.erb", "diffHunk": "@@ -96,11 +102,11 @@ Perform the following procedure to initialize PXF on each segment host in your G\n \n Should you need to, you can reset PXF to its uninitialized state. You might choose to reset PXF if you specified an incorrect `PXF_CONF` directory, or if you want to start the initialization procedure from scratch.\n \n-When you reset PXF, PXF prompts you to confirm the operation. If you confirm, PXF removes the following runtime files and directories (where `PXF_HOME=$GPHOME/pxf`):\n+When you reset PXF, PXF prompts you to confirm the operation. If you confirm, PXF removes the following runtime files and directories:\n \n-- `$PXF_HOME/conf/pxf-private.classpath`\n-- `$PXF_HOME/pxf-service`\n-- `$PXF_HOME/run`\n+- `$PXF_INSTALL_DIR/conf/pxf-private.classpath`\n+- `$PXF_INSTALL_DIR/pxf-service`\n+- `$PXF_INSTALL_DIR/run`\n \n PXF does not remove the `$PXF_CONF` directory during a reset operation.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0ef858b927b435c301132630472a4a34968acd50"}, "originalPosition": 60}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTg1MDgxNA==", "bodyText": "can you downgrade your PXF version with an older version of the RPM?", "url": "https://github.com/greenplum-db/pxf/pull/386#discussion_r441850814", "createdAt": "2020-06-17T21:42:27Z", "author": {"login": "frankgh"}, "path": "docs/content/upgrade_pxf_rpm.html.md.erb", "diffHunk": "@@ -1,36 +1,40 @@\n ---\n-title: Upgrading PXF in Greenplum 6.x\n+title: Upgrading PXF\n ---\n \n-If you are using PXF in your current Greenplum Database 6.x installation, you must upgrade the PXF service when you upgrade to a newer version of Greenplum Database 6.x.\n+If you have installed the PXF `.rpm` and have initialized, configured, and are using PXF in your current Greenplum Database 5.21.2+ or 6.x installation, you must perform some upgrade actions when you install a new version of PXF.\n \n-The PXF upgrade procedure describes how to upgrade PXF in your Greenplum Database installation. This procedure uses *PXF.from* to refer to your currently-installed PXF version and *PXF.to* to refer to the PXF version installed when you upgrade to the new version of Greenplum Database.\n-\n-The PXF upgrade procedure has two parts. You perform one procedure before, and one procedure after, you upgrade to a new version of Greenplum Database:\n+The PXF upgrade procedure has two parts. You perform one procedure before, and one procedure after, you install a new version to upgrade PXF:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0ef858b927b435c301132630472a4a34968acd50"}, "originalPosition": 12}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1358ddf7e2cd6ecb379f52b49086064500de37cc", "author": {"user": {"login": "lisakowen", "name": "Lisa Owen"}}, "url": "https://github.com/greenplum-db/pxf/commit/1358ddf7e2cd6ecb379f52b49086064500de37cc", "committedDate": "2020-06-17T22:19:49Z", "message": "enhance reset description per comment from francisco"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "72e9debd8488fe343b6639bda1512cc846264393", "author": {"user": {"login": "lisakowen", "name": "Lisa Owen"}}, "url": "https://github.com/greenplum-db/pxf/commit/72e9debd8488fe343b6639bda1512cc846264393", "committedDate": "2020-06-18T14:04:49Z", "message": "init - clarify when extension files are copied"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMzNDI1MTg3", "url": "https://github.com/greenplum-db/pxf/pull/386#pullrequestreview-433425187", "createdAt": "2020-06-18T15:55:58Z", "commit": {"oid": "72e9debd8488fe343b6639bda1512cc846264393"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQxNTo1NTo1OFrOGl10kw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQxNjowMDowNFrOGl1_ig==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjMzMjMwNw==", "bodyText": "To make these headers imperative and parallel, maybe do:  Complete Pre-Upgrade Actions and Upgrade PXF?", "url": "https://github.com/greenplum-db/pxf/pull/386#discussion_r442332307", "createdAt": "2020-06-18T15:55:58Z", "author": {"login": "dyozie"}, "path": "docs/content/upgrade_pxf_rpm.html.md.erb", "diffHunk": "@@ -1,36 +1,40 @@\n ---\n-title: Upgrading PXF in Greenplum 6.x\n+title: Upgrading PXF\n ---\n \n-If you are using PXF in your current Greenplum Database 6.x installation, you must upgrade the PXF service when you upgrade to a newer version of Greenplum Database 6.x.\n+If you have installed the PXF `.rpm` and have initialized, configured, and are using PXF in your current Greenplum Database 5.21.2+ or 6.x installation, you must perform some upgrade actions when you install a new version of PXF.\n \n-The PXF upgrade procedure describes how to upgrade PXF in your Greenplum Database installation. This procedure uses *PXF.from* to refer to your currently-installed PXF version and *PXF.to* to refer to the PXF version installed when you upgrade to the new version of Greenplum Database.\n-\n-The PXF upgrade procedure has two parts. You perform one procedure before, and one procedure after, you upgrade to a new version of Greenplum Database:\n+The PXF upgrade procedure has two parts. You perform one procedure before, and one procedure after, you install a new version to upgrade PXF:\n \n -   [Step 1: PXF Pre-Upgrade Actions](#pxfpre)\n--   Upgrade to a new Greenplum Database version\n--   [Step 2: Upgrading PXF](#pxfup)\n+-   Install the new version of PXF\n+-   [Step 2: Completing the PXF Upgrade](#pxfup)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "72e9debd8488fe343b6639bda1512cc846264393"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjMzMjY3Ng==", "bodyText": "Can probably remove \"For example\" here.", "url": "https://github.com/greenplum-db/pxf/pull/386#discussion_r442332676", "createdAt": "2020-06-18T15:56:33Z", "author": {"login": "dyozie"}, "path": "docs/content/upgrade_pxf_rpm.html.md.erb", "diffHunk": "@@ -1,36 +1,40 @@\n ---\n-title: Upgrading PXF in Greenplum 6.x\n+title: Upgrading PXF\n ---\n \n-If you are using PXF in your current Greenplum Database 6.x installation, you must upgrade the PXF service when you upgrade to a newer version of Greenplum Database 6.x.\n+If you have installed the PXF `.rpm` and have initialized, configured, and are using PXF in your current Greenplum Database 5.21.2+ or 6.x installation, you must perform some upgrade actions when you install a new version of PXF.\n \n-The PXF upgrade procedure describes how to upgrade PXF in your Greenplum Database installation. This procedure uses *PXF.from* to refer to your currently-installed PXF version and *PXF.to* to refer to the PXF version installed when you upgrade to the new version of Greenplum Database.\n-\n-The PXF upgrade procedure has two parts. You perform one procedure before, and one procedure after, you upgrade to a new version of Greenplum Database:\n+The PXF upgrade procedure has two parts. You perform one procedure before, and one procedure after, you install a new version to upgrade PXF:\n \n -   [Step 1: PXF Pre-Upgrade Actions](#pxfpre)\n--   Upgrade to a new Greenplum Database version\n--   [Step 2: Upgrading PXF](#pxfup)\n+-   Install the new version of PXF\n+-   [Step 2: Completing the PXF Upgrade](#pxfup)\n \n \n ## <a id=\"pxfpre\"></a>Step 1: PXF Pre-Upgrade Actions\n \n-Perform this procedure before you upgrade to a new version of Greenplum Database:\n+Perform this procedure before you upgrade to a new version of PXF:\n \n 1. Log in to the Greenplum Database master node. For example:\n \n     ``` shell\n     $ ssh gpadmin@<gpmaster>\n     ```\n \n+2. Identify and note the version of PXF currently running in your Greenplum cluster. For example:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "72e9debd8488fe343b6639bda1512cc846264393"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjMzMzgyNA==", "bodyText": "Actually, now that I read this procedure it really doesn't seem significant enough to break into pre-upgrade/upgrade sections.  I'd suggest just combining these into one procedure so as not to make it seem too complicated.", "url": "https://github.com/greenplum-db/pxf/pull/386#discussion_r442333824", "createdAt": "2020-06-18T15:58:15Z", "author": {"login": "dyozie"}, "path": "docs/content/upgrade_pxf_rpm.html.md.erb", "diffHunk": "@@ -1,36 +1,40 @@\n ---\n-title: Upgrading PXF in Greenplum 6.x\n+title: Upgrading PXF\n ---\n \n-If you are using PXF in your current Greenplum Database 6.x installation, you must upgrade the PXF service when you upgrade to a newer version of Greenplum Database 6.x.\n+If you have installed the PXF `.rpm` and have initialized, configured, and are using PXF in your current Greenplum Database 5.21.2+ or 6.x installation, you must perform some upgrade actions when you install a new version of PXF.\n \n-The PXF upgrade procedure describes how to upgrade PXF in your Greenplum Database installation. This procedure uses *PXF.from* to refer to your currently-installed PXF version and *PXF.to* to refer to the PXF version installed when you upgrade to the new version of Greenplum Database.\n-\n-The PXF upgrade procedure has two parts. You perform one procedure before, and one procedure after, you upgrade to a new version of Greenplum Database:\n+The PXF upgrade procedure has two parts. You perform one procedure before, and one procedure after, you install a new version to upgrade PXF:\n \n -   [Step 1: PXF Pre-Upgrade Actions](#pxfpre)\n--   Upgrade to a new Greenplum Database version\n--   [Step 2: Upgrading PXF](#pxfup)\n+-   Install the new version of PXF\n+-   [Step 2: Completing the PXF Upgrade](#pxfup)\n \n \n ## <a id=\"pxfpre\"></a>Step 1: PXF Pre-Upgrade Actions\n \n-Perform this procedure before you upgrade to a new version of Greenplum Database:\n+Perform this procedure before you upgrade to a new version of PXF:\n \n 1. Log in to the Greenplum Database master node. For example:\n \n     ``` shell\n     $ ssh gpadmin@<gpmaster>\n     ```\n \n+2. Identify and note the version of PXF currently running in your Greenplum cluster. For example:\n+\n+    ``` shell\n+    gpadmin@gpmaster$ pxf version\n+    ```\n+\n 2. Stop PXF on each segment host as described in [Stopping PXF](cfginitstart_pxf.html#stop_pxf).\n \n-3. Upgrade to the new version of Greenplum Database and then continue your PXF upgrade with [Step 2: Upgrading PXF](#pxfup).\n+3. Install the new version of PXF, identify and note the new PXF version number, and then continue your PXF upgrade with [Step 2: Completing the PXF Upgrade](#pxfup).", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "72e9debd8488fe343b6639bda1512cc846264393"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjMzNTExNA==", "bodyText": "This sentence also suggests to me that the pre-upgrade steps has already upgraded PXF.", "url": "https://github.com/greenplum-db/pxf/pull/386#discussion_r442335114", "createdAt": "2020-06-18T16:00:04Z", "author": {"login": "dyozie"}, "path": "docs/content/upgrade_pxf_rpm.html.md.erb", "diffHunk": "@@ -1,36 +1,40 @@\n ---\n-title: Upgrading PXF in Greenplum 6.x\n+title: Upgrading PXF\n ---\n \n-If you are using PXF in your current Greenplum Database 6.x installation, you must upgrade the PXF service when you upgrade to a newer version of Greenplum Database 6.x.\n+If you have installed the PXF `.rpm` and have initialized, configured, and are using PXF in your current Greenplum Database 5.21.2+ or 6.x installation, you must perform some upgrade actions when you install a new version of PXF.\n \n-The PXF upgrade procedure describes how to upgrade PXF in your Greenplum Database installation. This procedure uses *PXF.from* to refer to your currently-installed PXF version and *PXF.to* to refer to the PXF version installed when you upgrade to the new version of Greenplum Database.\n-\n-The PXF upgrade procedure has two parts. You perform one procedure before, and one procedure after, you upgrade to a new version of Greenplum Database:\n+The PXF upgrade procedure has two parts. You perform one procedure before, and one procedure after, you install a new version to upgrade PXF:\n \n -   [Step 1: PXF Pre-Upgrade Actions](#pxfpre)\n--   Upgrade to a new Greenplum Database version\n--   [Step 2: Upgrading PXF](#pxfup)\n+-   Install the new version of PXF\n+-   [Step 2: Completing the PXF Upgrade](#pxfup)\n \n \n ## <a id=\"pxfpre\"></a>Step 1: PXF Pre-Upgrade Actions\n \n-Perform this procedure before you upgrade to a new version of Greenplum Database:\n+Perform this procedure before you upgrade to a new version of PXF:\n \n 1. Log in to the Greenplum Database master node. For example:\n \n     ``` shell\n     $ ssh gpadmin@<gpmaster>\n     ```\n \n+2. Identify and note the version of PXF currently running in your Greenplum cluster. For example:\n+\n+    ``` shell\n+    gpadmin@gpmaster$ pxf version\n+    ```\n+\n 2. Stop PXF on each segment host as described in [Stopping PXF](cfginitstart_pxf.html#stop_pxf).\n \n-3. Upgrade to the new version of Greenplum Database and then continue your PXF upgrade with [Step 2: Upgrading PXF](#pxfup).\n+3. Install the new version of PXF, identify and note the new PXF version number, and then continue your PXF upgrade with [Step 2: Completing the PXF Upgrade](#pxfup).\n \n \n-## <a id=\"pxfup\"></a>Step 2: Upgrading PXF\n+## <a id=\"pxfup\"></a>Step 2: Completing the PXF Upgrade\n \n-After you upgrade to the new version of Greenplum Database, perform the following procedure to upgrade and configure the *PXF.to* software:\n+After you upgrade to the new version of PXF, perform the following procedure:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "72e9debd8488fe343b6639bda1512cc846264393"}, "originalPosition": 48}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM0MTUxMjE3", "url": "https://github.com/greenplum-db/pxf/pull/386#pullrequestreview-434151217", "createdAt": "2020-06-19T15:07:38Z", "commit": {"oid": "72e9debd8488fe343b6639bda1512cc846264393"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQxNTowNzozOVrOGmYI2A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQxNTowNzozOVrOGmYI2A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mjg5NDU1Mg==", "bodyText": "but wouldn't downgrading pxf via rpm just involve removing current pxf rpm, install new pxf rpm, init, ...? i.e. why would the user need to save anything? maybe i am missing something?\n\nIn my previous comment, I didn't mean for users to downgrade using an RPM, but rather what they would need to do to be able to restore their Greenplum + PXF installation after they have installed an RPM\n\nrelated: what do you think is the best way to determine if pxf.current was installed via rpm or is embedded? we can't necessarily go by existence of $GHOME/pxf. and the user can install the pxf rpm in a location other than the default (/usr/local/pxf-gpX), so i can't just check for the existence of that directory. i have been instructing the user to run \"pxf version\", but that is kind of nebulous, too - assumes they added their pxf bin/ directory to PATH.\n\nI guess two ways: 1. the pxf version approach which as you mention would require pxf to be on the $PATH. 2. Run some RPM query rpm -qi pxf-gp6 to determine if PXF was installed by RPM. This can bring some problems too, because even though you can have a PXF RPM installed, you can still be running the PXF version that was installed through a Greenplum installation.", "url": "https://github.com/greenplum-db/pxf/pull/386#discussion_r442894552", "createdAt": "2020-06-19T15:07:39Z", "author": {"login": "frankgh"}, "path": "docs/content/upgrade_pxf_rpm.html.md.erb", "diffHunk": "@@ -1,36 +1,40 @@\n ---\n-title: Upgrading PXF in Greenplum 6.x\n+title: Upgrading PXF\n ---\n \n-If you are using PXF in your current Greenplum Database 6.x installation, you must upgrade the PXF service when you upgrade to a newer version of Greenplum Database 6.x.\n+If you have installed the PXF `.rpm` and have initialized, configured, and are using PXF in your current Greenplum Database 5.21.2+ or 6.x installation, you must perform some upgrade actions when you install a new version of PXF.\n \n-The PXF upgrade procedure describes how to upgrade PXF in your Greenplum Database installation. This procedure uses *PXF.from* to refer to your currently-installed PXF version and *PXF.to* to refer to the PXF version installed when you upgrade to the new version of Greenplum Database.\n-\n-The PXF upgrade procedure has two parts. You perform one procedure before, and one procedure after, you upgrade to a new version of Greenplum Database:\n+The PXF upgrade procedure has two parts. You perform one procedure before, and one procedure after, you install a new version to upgrade PXF:", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTg1MDgxNA=="}, "originalCommit": {"oid": "0ef858b927b435c301132630472a4a34968acd50"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM1MDcyMDU3", "url": "https://github.com/greenplum-db/pxf/pull/386#pullrequestreview-435072057", "createdAt": "2020-06-22T16:07:52Z", "commit": {"oid": "72e9debd8488fe343b6639bda1512cc846264393"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQxNjowNzo1MlrOGnHe6A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQxNjoxMzo1MFrOGnHs8w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzY3MDI0OA==", "bodyText": "I've been thinking of this directory as PXF_HOME still. I guess that's never been a part of the docs? Maybe we should align the docs with what we have in our README.", "url": "https://github.com/greenplum-db/pxf/pull/386#discussion_r443670248", "createdAt": "2020-06-22T16:07:52Z", "author": {"login": "oliverralbertini"}, "path": "docs/content/about_pxf_dir.html.md.erb", "diffHunk": "@@ -2,24 +2,27 @@\n title: About the PXF Installation and Configuration Directories\n ---\n \n-PXF is installed on your master and segment nodes when you install Greenplum Database. \n+When you install the PXF `.rpm` package, PXF is installed to `/usr/local/pxf-gp<greenplum-major-version>`, or to a directory of your choosing. This documentation uses `$PXF_INSTALL_DIR` to refer to this directory.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "72e9debd8488fe343b6639bda1512cc846264393"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzY3Mjg4NQ==", "bodyText": "register also runs on the standby master.", "url": "https://github.com/greenplum-db/pxf/pull/386#discussion_r443672885", "createdAt": "2020-06-22T16:12:10Z", "author": {"login": "oliverralbertini"}, "path": "docs/content/cfginitstart_pxf.html.md.erb", "diffHunk": "@@ -27,9 +27,11 @@ PXF provides two management commands:\n - `pxf cluster` - manage all PXF service instances in the Greenplum Database cluster\n - `pxf` - manage the PXF service instance on a specific Greenplum Database host\n \n-The [`pxf cluster`](ref/pxf-cluster.html) command supports `init`, `start`, `restart`, `status`, `stop`, and `sync` subcommands. When you run a `pxf cluster` subcommand on the Greenplum Database master host, you perform the operation on all segment hosts in the Greenplum Database cluster. PXF also runs the `init` and `sync` commands on the standby master host.\n+The [`pxf cluster`](ref/pxf-cluster.html) command supports `init`, `reset`, `start`, `restart`, `status`, `stop`, `register`, and `sync` subcommands. When you run a `pxf cluster` subcommand on the Greenplum Database master host, you perform the operation on all segment hosts in the Greenplum Database cluster. PXF also runs the `init` and `sync` commands on the standby master host.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "72e9debd8488fe343b6639bda1512cc846264393"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzY3Mzg0Mw==", "bodyText": "I really like this way of specifying the commands.", "url": "https://github.com/greenplum-db/pxf/pull/386#discussion_r443673843", "createdAt": "2020-06-22T16:13:50Z", "author": {"login": "oliverralbertini"}, "path": "docs/content/cfginitstart_pxf.html.md.erb", "diffHunk": "@@ -78,10 +80,10 @@ Perform the following procedure to start PXF on each segment host in your Greenp\n     $ ssh gpadmin@<gpmaster>\n     ```\n \n-3. Run the `pxf cluster start` command to start PXF on each segment host. For example:\n+3. Run the `pxf cluster start` command to start PXF on each segment host:\n \n     ```shell\n-    gpadmin@gpmaster$ $GPHOME/pxf/bin/pxf cluster start\n+    gpadmin@gpmaster$ pxf cluster start", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "72e9debd8488fe343b6639bda1512cc846264393"}, "originalPosition": 34}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0ae3ced5505c36e8c426b1b916857b755faaf3cb", "author": {"user": {"login": "lisakowen", "name": "Lisa Owen"}}, "url": "https://github.com/greenplum-db/pxf/commit/0ae3ced5505c36e8c426b1b916857b755faaf3cb", "committedDate": "2020-06-22T20:50:53Z", "message": "some upgrade topic edits requested by david"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "80a748f05f49081064131ea6c0b118f8a7885851", "author": {"user": {"login": "lisakowen", "name": "Lisa Owen"}}, "url": "https://github.com/greenplum-db/pxf/commit/80a748f05f49081064131ea6c0b118f8a7885851", "committedDate": "2020-06-22T20:52:37Z", "message": "register is also run on the standby"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9fee62844f991040a0ebc8df73dcddf5cd40f4c3", "author": {"user": {"login": "lisakowen", "name": "Lisa Owen"}}, "url": "https://github.com/greenplum-db/pxf/commit/9fee62844f991040a0ebc8df73dcddf5cd40f4c3", "committedDate": "2020-06-22T21:15:09Z", "message": "add preupgrade step to backup embedded pxf"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4117a89d148e0dbd409868f409c99eaf6ca70d58", "author": {"user": {"login": "lisakowen", "name": "Lisa Owen"}}, "url": "https://github.com/greenplum-db/pxf/commit/4117a89d148e0dbd409868f409c99eaf6ca70d58", "committedDate": "2020-06-23T20:09:50Z", "message": "replace PXF_INSTALL_DIR with PXF_HOME"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8cd813bd3eee3e64741fe148429392a76663130f", "author": {"user": {"login": "lisakowen", "name": "Lisa Owen"}}, "url": "https://github.com/greenplum-db/pxf/commit/8cd813bd3eee3e64741fe148429392a76663130f", "committedDate": "2020-06-23T20:10:04Z", "message": "call pxf directly"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2NzY1MDQz", "url": "https://github.com/greenplum-db/pxf/pull/386#pullrequestreview-436765043", "createdAt": "2020-06-24T15:31:59Z", "commit": {"oid": "8cd813bd3eee3e64741fe148429392a76663130f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2NzY3NDY2", "url": "https://github.com/greenplum-db/pxf/pull/386#pullrequestreview-436767466", "createdAt": "2020-06-24T15:34:44Z", "commit": {"oid": "80a748f05f49081064131ea6c0b118f8a7885851"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQxNTozNDo0NFrOGoXwxg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQxNTozNDo0NFrOGoXwxg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDk4NTU0Mg==", "bodyText": "Typo introduced here:  registe", "url": "https://github.com/greenplum-db/pxf/pull/386#discussion_r444985542", "createdAt": "2020-06-24T15:34:44Z", "author": {"login": "dyozie"}, "path": "docs/content/cfginitstart_pxf.html.md.erb", "diffHunk": "@@ -27,7 +27,7 @@ PXF provides two management commands:\n - `pxf cluster` - manage all PXF service instances in the Greenplum Database cluster\n - `pxf` - manage the PXF service instance on a specific Greenplum Database host\n \n-The [`pxf cluster`](ref/pxf-cluster.html) command supports `init`, `reset`, `start`, `restart`, `status`, `stop`, `register`, and `sync` subcommands. When you run a `pxf cluster` subcommand on the Greenplum Database master host, you perform the operation on all segment hosts in the Greenplum Database cluster. PXF also runs the `init` and `sync` commands on the standby master host.\n+The [`pxf cluster`](ref/pxf-cluster.html) command supports `init`, `reset`, `start`, `restart`, `status`, `stop`, and `sync` subcommands. When you run a `pxf cluster` subcommand on the Greenplum Database master host, you perform the operation on all segment hosts in the Greenplum Database cluster. PXF also runs the `init`, `registe`, and `sync` commands on the standby master host.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "80a748f05f49081064131ea6c0b118f8a7885851"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4253a56224dd20c6f0745fd66b53a0436bb8debb", "author": {"user": {"login": "lisakowen", "name": "Lisa Owen"}}, "url": "https://github.com/greenplum-db/pxf/commit/4253a56224dd20c6f0745fd66b53a0436bb8debb", "committedDate": "2020-06-24T15:45:57Z", "message": "add missing r"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM3MDU5NTg2", "url": "https://github.com/greenplum-db/pxf/pull/386#pullrequestreview-437059586", "createdAt": "2020-06-24T22:52:53Z", "commit": {"oid": "4253a56224dd20c6f0745fd66b53a0436bb8debb"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQyMjo1Mjo1M1rOGolvrA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQyMjo1Mjo1M1rOGolvrA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTIxNDYzNg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            The [`pxf cluster`](ref/pxf-cluster.html) command supports `init`, `reset`, `start`, `restart`, `status`, `stop`, and `sync` subcommands. When you run a `pxf cluster` subcommand on the Greenplum Database master host, you perform the operation on all segment hosts in the Greenplum Database cluster. PXF also runs the `init`, `register`, and `sync` commands on the standby master host.\n          \n          \n            \n            The [`pxf cluster`](ref/pxf-cluster.html) command supports `init`, `reset`, `start`, `restart`, `status`, `stop`, `sync`, and `register` subcommands. When you run a `pxf cluster` subcommand on the Greenplum Database master host, you perform the operation on all segment hosts in the Greenplum Database cluster. PXF also runs the `init`, `register`, and `sync` commands on the standby master host.", "url": "https://github.com/greenplum-db/pxf/pull/386#discussion_r445214636", "createdAt": "2020-06-24T22:52:53Z", "author": {"login": "frankgh"}, "path": "docs/content/cfginitstart_pxf.html.md.erb", "diffHunk": "@@ -27,9 +27,11 @@ PXF provides two management commands:\n - `pxf cluster` - manage all PXF service instances in the Greenplum Database cluster\n - `pxf` - manage the PXF service instance on a specific Greenplum Database host\n \n-The [`pxf cluster`](ref/pxf-cluster.html) command supports `init`, `start`, `restart`, `status`, `stop`, and `sync` subcommands. When you run a `pxf cluster` subcommand on the Greenplum Database master host, you perform the operation on all segment hosts in the Greenplum Database cluster. PXF also runs the `init` and `sync` commands on the standby master host.\n+The [`pxf cluster`](ref/pxf-cluster.html) command supports `init`, `reset`, `start`, `restart`, `status`, `stop`, and `sync` subcommands. When you run a `pxf cluster` subcommand on the Greenplum Database master host, you perform the operation on all segment hosts in the Greenplum Database cluster. PXF also runs the `init`, `register`, and `sync` commands on the standby master host.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4253a56224dd20c6f0745fd66b53a0436bb8debb"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 91, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}