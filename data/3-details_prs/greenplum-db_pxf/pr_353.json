{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE0MzYzNTAz", "number": 353, "title": "introduced RPM targets", "bodyText": "", "createdAt": "2020-05-06T22:20:52Z", "url": "https://github.com/greenplum-db/pxf/pull/353", "merged": true, "mergeCommit": {"oid": "0da9795f84c682a827b047fdf9d9e8fcc62feb6a"}, "closed": true, "closedAt": "2020-05-09T00:56:33Z", "author": {"login": "denalex"}, "timelineItems": {"totalCount": 22, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABce_atOAFqTQwNzQ5NDMxNA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcfa0UqgH2gAyNDE0MzYzNTAzOmM1YzEzMGI1YjUwNjIzNTk3MzI3NWMzM2VlOGQ4MWJkYjMyYmRhNjA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA3NDk0MzE0", "url": "https://github.com/greenplum-db/pxf/pull/353#pullrequestreview-407494314", "createdAt": "2020-05-07T13:53:40Z", "commit": {"oid": "af1f4f4b1aa437c690f293377702c4a917db2afb"}, "state": "COMMENTED", "comments": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QxMzo1Mzo0MFrOGR_qew==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QxNTo1NDoxM1rOGSFNhg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTUyMjA0Mw==", "bodyText": "how about cleaning instead of doing a rm -rf build/stage?\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            stage:\n          \n          \n            \n            \trm -rf build/stage\n          \n          \n            \n            stage: clean", "url": "https://github.com/greenplum-db/pxf/pull/353#discussion_r421522043", "createdAt": "2020-05-07T13:53:40Z", "author": {"login": "frankgh"}, "path": "Makefile", "diffHunk": "@@ -37,6 +40,7 @@ install:\n \tmake -C server install\n \n stage:\n+\trm -rf build/stage", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "af1f4f4b1aa437c690f293377702c4a917db2afb"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTU5MDA4OQ==", "bodyText": "I think we deprecated the reference guide a long time ago no?", "url": "https://github.com/greenplum-db/pxf/pull/353#discussion_r421590089", "createdAt": "2020-05-07T15:22:38Z", "author": {"login": "frankgh"}, "path": "README.md", "diffHunk": "@@ -7,14 +7,19 @@\n Introduction\n ============\n \n-PXF is an extensible framework that allows a distributed database like GPDB to query external data files, whose metadata is not managed by the database.\n-PXF includes built-in connectors for accessing data that exists inside HDFS files, Hive tables, HBase tables and more.\n-Users can also create their own connectors to other data storages or processing engines.\n-To create these connectors using JAVA plugins, see the PXF API and Reference Guide onGPDB.\n+PXF is an extensible framework that allows a distributed database like Greenplum to query external data files, whose metadata is not managed by the database.\n+PXF includes built-in connectors for accessing data that exists inside HDFS files, Hive tables, HBase tables, JDBC-accessible databases and more.\n+Users can also create their own connectors to other data storage or processing engines.\n+To create these connectors using JAVA plugins, see the PXF API and Reference Guide on GPDB.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "af1f4f4b1aa437c690f293377702c4a917db2afb"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTU5NDYzMg==", "bodyText": "so maven is another dependency required to run automation, we install it in our docker images, maybe add it in this list also?", "url": "https://github.com/greenplum-db/pxf/pull/353#discussion_r421594632", "createdAt": "2020-05-07T15:28:34Z", "author": {"login": "frankgh"}, "path": "README.md", "diffHunk": "@@ -58,50 +63,53 @@ ln -s ~/<git_repos_root> ~/workspace\n \n To build PXF, you must have:\n \n-- JDK 1.8 to compile (PXF runs on Java 8 and Java 11)\n-- Go (1.9 or later)\n-- unzip\n-\n-Export your `JAVA_HOME`.\n-\n-```\n-export JAVA_HOME=<PATH_TO_YOUR_JAVA_HOME>\n-```\n-\n-To install Go on CentOS, `sudo yum install go`.\n-\n-For other platforms, see the [Go downloads page](https://golang.org/dl/).\n-\n-Make sure to export your `GOPATH` and add go to your `PATH`. For example:\n-\n-```\n-export GOPATH=$HOME/go\n-export PATH=$PATH:/usr/local/go/bin:$GOPATH/bin\n-```\n-\n-Once you have installed Go, you will need the `dep` and `ginkgo` tools, which install Go dependencies and run Go tests,\n-respectively. Assuming `go` is on your `PATH`, you can run:\n-\n-```\n-go get github.com/golang/dep/cmd/dep\n-go get github.com/onsi/ginkgo/ginkgo\n-```\n-\n-to install them.\n-\n-## How to Build\n-PXF uses gradle for build and has a wrapper makefile for abstraction\n+1. GCC compiler, `make` system, `unzip` package ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "af1f4f4b1aa437c690f293377702c4a917db2afb"}, "originalPosition": 81}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTU5NTUxMw==", "bodyText": "should we make the dev image public? since we already were doing that for the other image", "url": "https://github.com/greenplum-db/pxf/pull/353#discussion_r421595513", "createdAt": "2020-05-07T15:29:41Z", "author": {"login": "frankgh"}, "path": "README.md", "diffHunk": "@@ -124,30 +129,34 @@ cd ~/workspace\n tar xzf singlecluster-HDP.tar.gz\n ```\n \n-### GPDB\n-```\n-git clone https://github.com/greenplum-db/gpdb.git\n-```\n \n-You'll end up with a directory structure like this:\n+# Development With Docker\n+NOTE: Since the docker container will house all Single cluster Hadoop, Greenplum and PXF, we recommend that you have at least 4 cpus and 6GB memory allocated to Docker. These settings are available under docker preferences.\n \n-```\n-~\n-\u2514\u2500\u2500 workspace\n-    \u251c\u2500\u2500 pxf\n-    \u251c\u2500\u2500 singlecluster-HDP\n-    \u2514\u2500\u2500 gpdb\n-```\n+The following commands run the docker container and set up and switch to user gpadmin.\n \n-If you already have GPDB installed and running using the instructions shown in the [GPDB README](https://github.com/greenplum-db/gpdb), \n-you can ignore the `Setup GPDB` section below and simply follow the steps in  `Setup Hadoop` and `Setup PXF`\n+```bash\n+# Get the latest image\n+export GCR_PROJECT=<YOUR-GOOGLE_CONTAINER_REGISTRY-PROJECT-NAME>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "af1f4f4b1aa437c690f293377702c4a917db2afb"}, "originalPosition": 173}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTU5Njc1Nw==", "bodyText": "should we bake this into the container during docker build instead?", "url": "https://github.com/greenplum-db/pxf/pull/353#discussion_r421596757", "createdAt": "2020-05-07T15:31:31Z", "author": {"login": "frankgh"}, "path": "dev/bootstrap.bash", "diffHunk": "@@ -0,0 +1,68 @@\n+#!/bin/bash\n+\n+SCRIPT_DIR=\"$( cd \"$( dirname \"${BASH_SOURCE[0]}\" )\" && pwd )\"\n+\n+#mkdir -p /usr/local/greenplum-db\n+#chown -R gpadmin:gpadmin /usr/local/greenplum-db\n+\n+# setup limits for gpadmin\n+if [[ ! -f /etc/security/limits.d/gpadmin-limits.conf ]]; then\n+>/etc/security/limits.d/gpadmin-limits.conf cat <<-EOF", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "af1f4f4b1aa437c690f293377702c4a917db2afb"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTU5ODUwMQ==", "bodyText": "this doesn't look too good , too hacky no?", "url": "https://github.com/greenplum-db/pxf/pull/353#discussion_r421598501", "createdAt": "2020-05-07T15:34:06Z", "author": {"login": "frankgh"}, "path": "dev/bootstrap.bash", "diffHunk": "@@ -0,0 +1,68 @@\n+#!/bin/bash\n+\n+SCRIPT_DIR=\"$( cd \"$( dirname \"${BASH_SOURCE[0]}\" )\" && pwd )\"\n+\n+#mkdir -p /usr/local/greenplum-db\n+#chown -R gpadmin:gpadmin /usr/local/greenplum-db\n+\n+# setup limits for gpadmin\n+if [[ ! -f /etc/security/limits.d/gpadmin-limits.conf ]]; then\n+>/etc/security/limits.d/gpadmin-limits.conf cat <<-EOF\n+gpadmin soft core unlimited\n+gpadmin soft nproc 131072\n+gpadmin soft nofile 65536\n+EOF\n+fi\n+\n+# setup environment for gpadmin\n+>>/home/gpadmin/.bash_profile cat <<EOF\n+GPHOME=\\$(find /usr/local/ -name 'greenplum-db-*')\n+if [[ -f \\${GPHOME}/greenplum_path.sh ]]; then\n+    PYTHONHOME='' source \\${GPHOME}/greenplum_path.sh\n+fi\n+\n+export PS1=\"[\\u@\\h \\W]\\$ \"\n+export HADOOP_ROOT=~/workspace/singlecluster\n+export PXF_HOME=\\${GPHOME}/pxf\n+export PXF_CONF=~gpadmin/pxf\n+export PXF_JVM_OPTS=\"-Xmx512m -Xms256m\"\n+export GPHD_ROOT=~/workspace/singlecluster\n+#export BUILD_PARAMS=\"-x test\"\n+export LANG=en_US.UTF-8\n+export JAVA_HOME=/etc/alternatives/java_sdk\n+export SLAVES=1\n+export GOPATH=/opt/go\n+export PATH=~gpadmin/workspace/pxf/dev:\\${PXF_HOME}/bin:\\${GPHD_ROOT}/hadoop/bin:\\${GOPATH}/bin:/usr/local/go/bin:\\$PATH\n+export PGPORT=5432\n+EOF\n+\n+# install and init Greenplum as gpadmin user\n+su - gpadmin -c ${SCRIPT_DIR}/install_greenplum.bash\n+\n+# rename python distro shipped with Greenplum so that system python is used for Tinc tests\n+mv /usr/local/greenplum-db/ext/python/ /usr/local/greenplum-db/ext/python2", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "af1f4f4b1aa437c690f293377702c4a917db2afb"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTU5OTIxOA==", "bodyText": "this path assumes greenplum was installed from rpm, what if they build from source? should we use find instead of hardcoding the path?", "url": "https://github.com/greenplum-db/pxf/pull/353#discussion_r421599218", "createdAt": "2020-05-07T15:35:03Z", "author": {"login": "frankgh"}, "path": "dev/bootstrap.bash", "diffHunk": "@@ -0,0 +1,68 @@\n+#!/bin/bash\n+\n+SCRIPT_DIR=\"$( cd \"$( dirname \"${BASH_SOURCE[0]}\" )\" && pwd )\"\n+\n+#mkdir -p /usr/local/greenplum-db\n+#chown -R gpadmin:gpadmin /usr/local/greenplum-db\n+\n+# setup limits for gpadmin\n+if [[ ! -f /etc/security/limits.d/gpadmin-limits.conf ]]; then\n+>/etc/security/limits.d/gpadmin-limits.conf cat <<-EOF\n+gpadmin soft core unlimited\n+gpadmin soft nproc 131072\n+gpadmin soft nofile 65536\n+EOF\n+fi\n+\n+# setup environment for gpadmin\n+>>/home/gpadmin/.bash_profile cat <<EOF\n+GPHOME=\\$(find /usr/local/ -name 'greenplum-db-*')\n+if [[ -f \\${GPHOME}/greenplum_path.sh ]]; then\n+    PYTHONHOME='' source \\${GPHOME}/greenplum_path.sh\n+fi\n+\n+export PS1=\"[\\u@\\h \\W]\\$ \"\n+export HADOOP_ROOT=~/workspace/singlecluster\n+export PXF_HOME=\\${GPHOME}/pxf\n+export PXF_CONF=~gpadmin/pxf\n+export PXF_JVM_OPTS=\"-Xmx512m -Xms256m\"\n+export GPHD_ROOT=~/workspace/singlecluster\n+#export BUILD_PARAMS=\"-x test\"\n+export LANG=en_US.UTF-8\n+export JAVA_HOME=/etc/alternatives/java_sdk\n+export SLAVES=1\n+export GOPATH=/opt/go\n+export PATH=~gpadmin/workspace/pxf/dev:\\${PXF_HOME}/bin:\\${GPHD_ROOT}/hadoop/bin:\\${GOPATH}/bin:/usr/local/go/bin:\\$PATH\n+export PGPORT=5432\n+EOF\n+\n+# install and init Greenplum as gpadmin user\n+su - gpadmin -c ${SCRIPT_DIR}/install_greenplum.bash\n+\n+# rename python distro shipped with Greenplum so that system python is used for Tinc tests\n+mv /usr/local/greenplum-db/ext/python/ /usr/local/greenplum-db/ext/python2\n+\n+# remove existing PXF, if any, that could come pre-installed with Greenplum RPM\n+#source /usr/local/greenplum-db*/greenplum_path.sh\n+\n+GPH=/usr/local/greenplum-db", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "af1f4f4b1aa437c690f293377702c4a917db2afb"}, "originalPosition": 48}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTU5OTgwMw==", "bodyText": "any reason why indentation is different here from previous line?", "url": "https://github.com/greenplum-db/pxf/pull/353#discussion_r421599803", "createdAt": "2020-05-07T15:35:55Z", "author": {"login": "frankgh"}, "path": "dev/bootstrap.bash", "diffHunk": "@@ -0,0 +1,68 @@\n+#!/bin/bash\n+\n+SCRIPT_DIR=\"$( cd \"$( dirname \"${BASH_SOURCE[0]}\" )\" && pwd )\"\n+\n+#mkdir -p /usr/local/greenplum-db\n+#chown -R gpadmin:gpadmin /usr/local/greenplum-db\n+\n+# setup limits for gpadmin\n+if [[ ! -f /etc/security/limits.d/gpadmin-limits.conf ]]; then\n+>/etc/security/limits.d/gpadmin-limits.conf cat <<-EOF\n+gpadmin soft core unlimited\n+gpadmin soft nproc 131072\n+gpadmin soft nofile 65536\n+EOF\n+fi\n+\n+# setup environment for gpadmin\n+>>/home/gpadmin/.bash_profile cat <<EOF\n+GPHOME=\\$(find /usr/local/ -name 'greenplum-db-*')\n+if [[ -f \\${GPHOME}/greenplum_path.sh ]]; then\n+    PYTHONHOME='' source \\${GPHOME}/greenplum_path.sh\n+fi\n+\n+export PS1=\"[\\u@\\h \\W]\\$ \"\n+export HADOOP_ROOT=~/workspace/singlecluster\n+export PXF_HOME=\\${GPHOME}/pxf\n+export PXF_CONF=~gpadmin/pxf\n+export PXF_JVM_OPTS=\"-Xmx512m -Xms256m\"\n+export GPHD_ROOT=~/workspace/singlecluster\n+#export BUILD_PARAMS=\"-x test\"\n+export LANG=en_US.UTF-8\n+export JAVA_HOME=/etc/alternatives/java_sdk\n+export SLAVES=1\n+export GOPATH=/opt/go\n+export PATH=~gpadmin/workspace/pxf/dev:\\${PXF_HOME}/bin:\\${GPHD_ROOT}/hadoop/bin:\\${GOPATH}/bin:/usr/local/go/bin:\\$PATH\n+export PGPORT=5432\n+EOF\n+\n+# install and init Greenplum as gpadmin user\n+su - gpadmin -c ${SCRIPT_DIR}/install_greenplum.bash\n+\n+# rename python distro shipped with Greenplum so that system python is used for Tinc tests\n+mv /usr/local/greenplum-db/ext/python/ /usr/local/greenplum-db/ext/python2\n+\n+# remove existing PXF, if any, that could come pre-installed with Greenplum RPM\n+#source /usr/local/greenplum-db*/greenplum_path.sh\n+\n+GPH=/usr/local/greenplum-db\n+if [[ -d ${GPH}/pxf ]]; then\n+    rm -rf ${GPH}/pxf\n+    rm ${GPH}/lib/postgresql/pxf.so\n+\trm ${GPH}/share/postgresql/extension/pxf.control", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "af1f4f4b1aa437c690f293377702c4a917db2afb"}, "originalPosition": 52}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTYwMDY0Mg==", "bodyText": "can't we just copy this files from /singlecluster?", "url": "https://github.com/greenplum-db/pxf/pull/353#discussion_r421600642", "createdAt": "2020-05-07T15:37:02Z", "author": {"login": "frankgh"}, "path": "dev/init_hadoop.bash", "diffHunk": "@@ -0,0 +1,198 @@\n+#!/usr/bin/env bash\n+\n+>~/workspace/singlecluster/hadoop/etc/hadoop/core-site.xml cat <<EOF", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "af1f4f4b1aa437c690f293377702c4a917db2afb"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTYxMjkzNA==", "bodyText": "do we know why we need this?", "url": "https://github.com/greenplum-db/pxf/pull/353#discussion_r421612934", "createdAt": "2020-05-07T15:54:13Z", "author": {"login": "frankgh"}, "path": "package/pxf-gp6.spec", "diffHunk": "@@ -0,0 +1,48 @@\n+# Disable repacking of jars, since it takes forever\n+%define __jar_repack %{nil}\n+\n+# Disable automatic dependency processing both for requirements and provides\n+AutoReqProv: no\n+\n+Name: pxf-gp6\n+Version: %{pxf_version}\n+Release: %{pxf_release}%{?dist}\n+Summary: Greenplum PXF framework for external data access\n+License: %{license}\n+URL: https://github.com/greenplum-db/pxf\n+Vendor: %{vendor}\n+\n+Prefix: /usr/local/%{name}\n+\n+# .so file makes sense only when installing on Greenplum node, so inherit Greenplum's dependencies implicitly\n+# Java server can be installed on a new node, only bash is needed for management scripts\n+Requires: bash\n+\n+%if 0%{?rhel} == 7\n+Requires: openssl-libs", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "af1f4f4b1aa437c690f293377702c4a917db2afb"}, "originalPosition": 22}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3fdb8fd68677213916a90fac69ae6da7bc267d65", "author": {"user": {"login": "denalex", "name": "Alexander Denissov"}}, "url": "https://github.com/greenplum-db/pxf/commit/3fdb8fd68677213916a90fac69ae6da7bc267d65", "committedDate": "2020-05-07T21:42:14Z", "message": "install .so files during init, GO CLI changes, PR feedback"}, "afterCommit": {"oid": "e2937bda94e322a7eb7ec4d1687471418e2f1d7a", "author": {"user": {"login": "denalex", "name": "Alexander Denissov"}}, "url": "https://github.com/greenplum-db/pxf/commit/e2937bda94e322a7eb7ec4d1687471418e2f1d7a", "committedDate": "2020-05-07T21:56:17Z", "message": "install .so files during init, GO CLI changes, PR feedback"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA4MzkzNzE2", "url": "https://github.com/greenplum-db/pxf/pull/353#pullrequestreview-408393716", "createdAt": "2020-05-08T17:22:31Z", "commit": {"oid": "566781adcab88d86180103a2cfaa9e94a6dbe0bc"}, "state": "APPROVED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOFQxNzoyMjozMVrOGStLNQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOFQxNzozNDoyNFrOGStitA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjI2NzcwMQ==", "bodyText": "${INSTALL_COMPONENT_SCRIPT_DIR} should be quoted", "url": "https://github.com/greenplum-db/pxf/pull/353#discussion_r422267701", "createdAt": "2020-05-08T17:22:31Z", "author": {"login": "oliverralbertini"}, "path": "package/install_rpm", "diffHunk": "@@ -0,0 +1,19 @@\n+#!/usr/bin/env bash\n+\n+set -euo pipefail\n+\n+INSTALL_COMPONENT_SCRIPT_DIR=$( cd \"$( dirname \"${BASH_SOURCE[0]}\" )\" && pwd )\n+RPM_FILE=$(basename $(find ${INSTALL_COMPONENT_SCRIPT_DIR} -name '*.rpm'))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "566781adcab88d86180103a2cfaa9e94a6dbe0bc"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjI3MDQwOQ==", "bodyText": "I'd rather have something like\n(( $(id -u) == 0 )) || sudo_if_needed=sudo", "url": "https://github.com/greenplum-db/pxf/pull/353#discussion_r422270409", "createdAt": "2020-05-08T17:27:39Z", "author": {"login": "oliverralbertini"}, "path": "package/install_rpm", "diffHunk": "@@ -0,0 +1,19 @@\n+#!/usr/bin/env bash\n+\n+set -euo pipefail\n+\n+INSTALL_COMPONENT_SCRIPT_DIR=$( cd \"$( dirname \"${BASH_SOURCE[0]}\" )\" && pwd )\n+RPM_FILE=$(basename $(find ${INSTALL_COMPONENT_SCRIPT_DIR} -name '*.rpm'))\n+\n+echo \"Installing PXF RPM ${RPM_FILE} ...\"\n+\n+owner=$(whoami)\n+sudo_if_needed=''\n+if [[ \"${owner}\" != \"root\" ]]; then", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "566781adcab88d86180103a2cfaa9e94a6dbe0bc"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjI3MjAxMg==", "bodyText": "we recently found that 6 primary segs is probably overkill", "url": "https://github.com/greenplum-db/pxf/pull/353#discussion_r422272012", "createdAt": "2020-05-08T17:30:48Z", "author": {"login": "oliverralbertini"}, "path": "dev/init_greenplum.bash", "diffHunk": "@@ -0,0 +1,41 @@\n+#!/usr/bin/env bash\n+\n+set -euo pipefail\n+\n+GPHOME=${GPHOME:=/usr/local/greenplum-db}\n+PYTHONHOME='' source \"${GPHOME}/greenplum_path.sh\"\n+\n+# Create config and data dirs.\n+data_dirs=(~gpadmin/data{1..6}/primary)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "566781adcab88d86180103a2cfaa9e94a6dbe0bc"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjI3MzcxNg==", "bodyText": "whitespace issue", "url": "https://github.com/greenplum-db/pxf/pull/353#discussion_r422273716", "createdAt": "2020-05-08T17:34:24Z", "author": {"login": "oliverralbertini"}, "path": "Makefile", "diffHunk": "@@ -49,12 +53,50 @@ stage:\n \tcp -a cli/build/stage/* build/stage/$${PXF_PACKAGE_NAME} ;\\\n \tcp -a server/build/stage/* build/stage/$${PXF_PACKAGE_NAME} ;\\\n \techo $$(git rev-parse --verify HEAD) > build/stage/$${PXF_PACKAGE_NAME}/pxf/commit.sha ;\\\n-\tcp package/install_component build/stage/$${PXF_PACKAGE_NAME} ;\\\n+\tcp package/install_binary build/stage/$${PXF_PACKAGE_NAME}/install_component\n \n tar: stage\n+\trm -rf build/dist\n \tmkdir -p build/dist\n \ttar -czf build/dist/$(shell ls build/stage).tar.gz -C build/stage $(shell ls build/stage)\n \n+rpm:\n+\tmake -C external-table stage\n+\tmake -C cli/go/src/pxf-cli stage\n+\tmake -C server stage\n+\tset -e ;\\\n+\tGP_MAJOR_VERSION=$$(cat external-table/build/metadata/gp_major_version) ;\\\n+\tPXF_MAIN_VERSION=$${PXF_VERSION//-SNAPSHOT/} ;\\\n+\tif [[ $${PXF_VERSION} == *\"-SNAPSHOT\" ]]; then PXF_RELEASE=SNAPSHOT; else PXF_RELEASE=1; fi ;\\\n+\trm -rf build/rpmbuild ;\\\n+\tmkdir -p build/rpmbuild/{BUILD,RPMS,SOURCES,SPECS} ;\\\n+\tmkdir -p build/rpmbuild/SOURCES/gpextable ;\\\n+\tcp -a external-table/build/stage/* build/rpmbuild/SOURCES/gpextable ;\\\n+    cp -a cli/build/stage/pxf/* build/rpmbuild/SOURCES ;\\", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "566781adcab88d86180103a2cfaa9e94a6dbe0bc"}, "originalPosition": 46}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6422de2a89c6ecab90df8c073c0fd37e30f38e09", "author": {"user": {"login": "denalex", "name": "Alexander Denissov"}}, "url": "https://github.com/greenplum-db/pxf/commit/6422de2a89c6ecab90df8c073c0fd37e30f38e09", "committedDate": "2020-05-08T18:32:33Z", "message": "introduced RPM targets"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3e695e27826519d6bf867ef391897c095272b89c", "author": {"user": {"login": "denalex", "name": "Alexander Denissov"}}, "url": "https://github.com/greenplum-db/pxf/commit/3e695e27826519d6bf867ef391897c095272b89c", "committedDate": "2020-05-08T18:32:33Z", "message": "changed GO CLI to work with PXF_HOME"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "218869f480e1462629805b072fecf81426e6135c", "author": {"user": {"login": "denalex", "name": "Alexander Denissov"}}, "url": "https://github.com/greenplum-db/pxf/commit/218869f480e1462629805b072fecf81426e6135c", "committedDate": "2020-05-08T18:32:33Z", "message": "install .so files during init, GO CLI changes, PR feedback"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9337a2db91b8fa7bb7d4a392d6b4b8d633567b42", "author": {"user": {"login": "denalex", "name": "Alexander Denissov"}}, "url": "https://github.com/greenplum-db/pxf/commit/9337a2db91b8fa7bb7d4a392d6b4b8d633567b42", "committedDate": "2020-05-08T18:52:23Z", "message": "change pipeline to work with RPMs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ba15e153669d6d3de83e03c5e1d71583da479fe9", "author": {"user": {"login": "denalex", "name": "Alexander Denissov"}}, "url": "https://github.com/greenplum-db/pxf/commit/ba15e153669d6d3de83e03c5e1d71583da479fe9", "committedDate": "2020-05-08T18:52:23Z", "message": "fixed PWD in Makefile"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0eceadf55451bb9c3f14c83e8cfbd01c8ae47756", "author": {"user": {"login": "denalex", "name": "Alexander Denissov"}}, "url": "https://github.com/greenplum-db/pxf/commit/0eceadf55451bb9c3f14c83e8cfbd01c8ae47756", "committedDate": "2020-05-08T18:58:11Z", "message": "added GP_VER to pipelines"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f04dabad78efebf658b2684bbd0d24447aaed0fd", "author": {"user": {"login": "denalex", "name": "Alexander Denissov"}}, "url": "https://github.com/greenplum-db/pxf/commit/f04dabad78efebf658b2684bbd0d24447aaed0fd", "committedDate": "2020-05-08T18:58:11Z", "message": "change permissions to gpadmin"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4038c5620fe3307d652182061a036a4aec4413f4", "author": {"user": {"login": "denalex", "name": "Alexander Denissov"}}, "url": "https://github.com/greenplum-db/pxf/commit/4038c5620fe3307d652182061a036a4aec4413f4", "committedDate": "2020-05-08T18:58:11Z", "message": "fixed multinode setup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4ec42d8ad43c30dccc0a4a284c10d3dc606ad706", "author": {"user": {"login": "denalex", "name": "Alexander Denissov"}}, "url": "https://github.com/greenplum-db/pxf/commit/4ec42d8ad43c30dccc0a4a284c10d3dc606ad706", "committedDate": "2020-05-08T19:02:01Z", "message": "suspend passed requirement on Ubuntu tarball"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1b7182a424ac42e406094aaf62a1d4c379541db6", "author": {"user": {"login": "denalex", "name": "Alexander Denissov"}}, "url": "https://github.com/greenplum-db/pxf/commit/1b7182a424ac42e406094aaf62a1d4c379541db6", "committedDate": "2020-05-08T17:43:36Z", "message": "fixed multinode setup"}, "afterCommit": {"oid": "4ec42d8ad43c30dccc0a4a284c10d3dc606ad706", "author": {"user": {"login": "denalex", "name": "Alexander Denissov"}}, "url": "https://github.com/greenplum-db/pxf/commit/4ec42d8ad43c30dccc0a4a284c10d3dc606ad706", "committedDate": "2020-05-08T19:02:01Z", "message": "suspend passed requirement on Ubuntu tarball"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a0ab6f1cd0ab1ae39c9c1852b71a426e43588e56", "author": {"user": {"login": "denalex", "name": "Alexander Denissov"}}, "url": "https://github.com/greenplum-db/pxf/commit/a0ab6f1cd0ab1ae39c9c1852b71a426e43588e56", "committedDate": "2020-05-08T19:18:55Z", "message": "added GP_VER to setup pxf task"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c76a48a35fe25d0b2d3692a80d20de313d8fdae0", "author": {"user": {"login": "denalex", "name": "Alexander Denissov"}}, "url": "https://github.com/greenplum-db/pxf/commit/c76a48a35fe25d0b2d3692a80d20de313d8fdae0", "committedDate": "2020-05-08T20:09:18Z", "message": "update pxf_home in scripts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2c00a9819a3dcb94c7cb38387ff623fef4db13eb", "author": {"user": {"login": "denalex", "name": "Alexander Denissov"}}, "url": "https://github.com/greenplum-db/pxf/commit/2c00a9819a3dcb94c7cb38387ff623fef4db13eb", "committedDate": "2020-05-08T21:37:35Z", "message": "added GP5 RPM spec file"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b5e0f408071267a0f2242b894859cc2be2028080", "author": {"user": {"login": "denalex", "name": "Alexander Denissov"}}, "url": "https://github.com/greenplum-db/pxf/commit/b5e0f408071267a0f2242b894859cc2be2028080", "committedDate": "2020-05-08T22:09:22Z", "message": "point to dev CCP branch for now"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "887109a7d3276cd7efff88c6513f7c538bdec004", "author": {"user": {"login": "denalex", "name": "Alexander Denissov"}}, "url": "https://github.com/greenplum-db/pxf/commit/887109a7d3276cd7efff88c6513f7c538bdec004", "committedDate": "2020-05-08T22:40:44Z", "message": "use greenplum-db-devel as GPHOME on multinode"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "76f5e13288025dea0cb0f56c3cfe7e97749f0bc5", "author": {"user": {"login": "denalex", "name": "Alexander Denissov"}}, "url": "https://github.com/greenplum-db/pxf/commit/76f5e13288025dea0cb0f56c3cfe7e97749f0bc5", "committedDate": "2020-05-08T23:17:32Z", "message": "simplified concourse Makefile targets"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "32e3f222b5b955893c7386cc63d555d3781b1962", "author": {"user": {"login": "denalex", "name": "Alexander Denissov"}}, "url": "https://github.com/greenplum-db/pxf/commit/32e3f222b5b955893c7386cc63d555d3781b1962", "committedDate": "2020-05-08T23:25:11Z", "message": "PR feedback"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c9d1237db8a06a8ca9c98bb71927a15adc07b73b", "author": {"user": {"login": "denalex", "name": "Alexander Denissov"}}, "url": "https://github.com/greenplum-db/pxf/commit/c9d1237db8a06a8ca9c98bb71927a15adc07b73b", "committedDate": "2020-05-08T23:28:12Z", "message": "restore multi-node job to after testing gate"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c5c130b5b506235973275c33ee8d81bdb32bda60", "author": {"user": {"login": "denalex", "name": "Alexander Denissov"}}, "url": "https://github.com/greenplum-db/pxf/commit/c5c130b5b506235973275c33ee8d81bdb32bda60", "committedDate": "2020-05-08T23:52:25Z", "message": "set explicit GPHOME"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 52, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}