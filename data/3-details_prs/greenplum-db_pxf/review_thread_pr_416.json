{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDYzNDk5NzYw", "number": 416, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQwMjoxMToyNVrOEVo_ow==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQwMjoxMToyNVrOEVo_ow==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkxMTI3MjAzOnYy", "diffSide": "RIGHT", "path": "server/pxf-service/src/main/java/org/greenplum/pxf/service/BridgeInputBuilder.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQwMjoxMToyNVrOG8gvLQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMVQwMDo0MjoxM1rOG-kc9A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjEwNDEwOQ==", "bodyText": "being inside this if means external table was defined with FORMAT \"TEXT\" or \"CSV\", not that the actual profile will be:text, right ? Maybe coincidentally this is only used for :text profiles, but considering we were thinking of getting rid of gpdb_writable I think in the longer term we need to be more selective here and look at the actual profile or resolver to be used.", "url": "https://github.com/greenplum-db/pxf/pull/416#discussion_r466104109", "createdAt": "2020-08-06T02:11:25Z", "author": {"login": "denalex"}, "path": "server/pxf-service/src/main/java/org/greenplum/pxf/service/BridgeInputBuilder.java", "diffHunk": "@@ -45,9 +44,16 @@ public BridgeInputBuilder(RequestContext protocolData) {\n \n     public List<OneField> makeInput(DataInput inputStream) throws Exception {\n         if (protocolData.getOutputFormat() == OutputFormat.TEXT) {\n-            Text txt = new Text();\n-            txt.readFields(inputStream);\n-            return Collections.singletonList(new OneField(DataType.BYTEA.getOID(), txt.getBytes()));\n+            // Avoid copying the bytes from the inputStream directly. This", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5ae9d8261b698ecacf1f7339d0a3265fae3b50b5"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODI2MjEzMg==", "bodyText": "being inside this if means external table was defined with FORMAT \"TEXT\" or \"CSV\", not that the actual profile will be:text, right ?\n\nThat is correct\n\nMaybe coincidentally this is only used for :text profiles, but considering we were thinking of getting rid of gpdb_writable I think in the longer term we need to be more selective here and look at the actual profile or resolver to be used.\n\nThe last decision during the rewrite was to keep some binary format, because we did see a performance gain when doing binary vs text, even though we had in the past done some comparisons that indicated otherwise. And that was only for the read case, we still need to define what we'll do about the write case", "url": "https://github.com/greenplum-db/pxf/pull/416#discussion_r468262132", "createdAt": "2020-08-11T00:42:13Z", "author": {"login": "frankgh"}, "path": "server/pxf-service/src/main/java/org/greenplum/pxf/service/BridgeInputBuilder.java", "diffHunk": "@@ -45,9 +44,16 @@ public BridgeInputBuilder(RequestContext protocolData) {\n \n     public List<OneField> makeInput(DataInput inputStream) throws Exception {\n         if (protocolData.getOutputFormat() == OutputFormat.TEXT) {\n-            Text txt = new Text();\n-            txt.readFields(inputStream);\n-            return Collections.singletonList(new OneField(DataType.BYTEA.getOID(), txt.getBytes()));\n+            // Avoid copying the bytes from the inputStream directly. This", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjEwNDEwOQ=="}, "originalCommit": {"oid": "5ae9d8261b698ecacf1f7339d0a3265fae3b50b5"}, "originalPosition": 15}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3420, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}