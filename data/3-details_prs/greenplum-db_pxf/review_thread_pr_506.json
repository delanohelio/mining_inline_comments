{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI1MzgzMjg3", "number": 506, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxNjoyMDo0MVrOE8SxpQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxODoxNTowNVrOE8VrRg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMxNjU3NjM3OnYy", "diffSide": "RIGHT", "path": "Makefile", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxNjoyMDo0MVrOH4VLlQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxNjoyMDo0MVrOH4VLlQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODgyOTMzMw==", "bodyText": "Could you move $FDW_SUPPORT to before line 10? And then use it in the if-statement?", "url": "https://github.com/greenplum-db/pxf/pull/506#discussion_r528829333", "createdAt": "2020-11-23T16:20:41Z", "author": {"login": "bradfordb-vmware"}, "path": "Makefile", "diffHunk": "@@ -1,20 +1,34 @@\n include common.mk\n \n+PG_CONFIG = pg_config\n+\n PXF_VERSION ?= $(shell cat version)\n export PXF_VERSION\n \n+SOURCE_EXTENSION_DIR = external-table\n+TARGET_EXTENSION_DIR = gpextable\n+ifneq ($(shell $(PG_CONFIG) --version | egrep \"PostgreSQL 12\"),)\n+\tSOURCE_EXTENSION_DIR = fdw\n+\tTARGET_EXTENSION_DIR = fdw\n+endif\n+\n+FDW_SUPPORT = $(shell $(PG_CONFIG) --version | egrep \"PostgreSQL 12\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c03cedb5706bc333f8590f8991178d7ce8adfc1c"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMxNjk2NzY1OnYy", "diffSide": "LEFT", "path": "concourse/README.md", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxNzo1MjozMFrOH4Y8Jg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxODo1MzowNFrOH4bBmg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODg5MDkxOA==", "bodyText": "Do we also need to delete this pipeline config?", "url": "https://github.com/greenplum-db/pxf/pull/506#discussion_r528890918", "createdAt": "2020-11-23T17:52:30Z", "author": {"login": "bradfordb-vmware"}, "path": "concourse/README.md", "diffHunk": "@@ -103,27 +103,3 @@ fly -t ud set-pipeline \\\n     -v gpdb-branch=6X_STABLE -v pgport=6000 \\\n     -v pxf-tag=<YOUR-TAG> -p dev:longevity_<YOUR-TAG>_6X_STABLE\n ```\n-\n-# Deploy `pg_regress` pipeline\n-\n-This pipeline currently runs the smoke test group against the different clouds using `pg_regress` instead of automation.\n-It uses both external and foreign tables.\n-You can adjust the `folder-prefix`, `gpdb-git-branch`, `gpdb-git-remote`, `pxf-git-branch`, and `pxf-git-remote`.\n-For example, you may want to work off of a development branch for PXF or Greenplum.\n-\n-```shell\n-fly -t ud set-pipeline -p pg_regress \\\n-    -c ~/workspace/pxf/concourse/pipelines/pg_regress_pipeline.yml \\", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c03cedb5706bc333f8590f8991178d7ce8adfc1c"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODkyNTA4Mg==", "bodyText": "not yet, not all the tests have been migrated", "url": "https://github.com/greenplum-db/pxf/pull/506#discussion_r528925082", "createdAt": "2020-11-23T18:53:04Z", "author": {"login": "frankgh"}, "path": "concourse/README.md", "diffHunk": "@@ -103,27 +103,3 @@ fly -t ud set-pipeline \\\n     -v gpdb-branch=6X_STABLE -v pgport=6000 \\\n     -v pxf-tag=<YOUR-TAG> -p dev:longevity_<YOUR-TAG>_6X_STABLE\n ```\n-\n-# Deploy `pg_regress` pipeline\n-\n-This pipeline currently runs the smoke test group against the different clouds using `pg_regress` instead of automation.\n-It uses both external and foreign tables.\n-You can adjust the `folder-prefix`, `gpdb-git-branch`, `gpdb-git-remote`, `pxf-git-branch`, and `pxf-git-remote`.\n-For example, you may want to work off of a development branch for PXF or Greenplum.\n-\n-```shell\n-fly -t ud set-pipeline -p pg_regress \\\n-    -c ~/workspace/pxf/concourse/pipelines/pg_regress_pipeline.yml \\", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODg5MDkxOA=="}, "originalCommit": {"oid": "c03cedb5706bc333f8590f8991178d7ce8adfc1c"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMxNzA1MTU4OnYy", "diffSide": "RIGHT", "path": "concourse/scripts/build.bash", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxODoxNTowNVrOH4ZvJw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxODo1NTozM1rOH4bG9w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODkwMzk3NQ==", "bodyText": "Super pedantic nit: It is possible to have rpm installed on Ubuntu. If we are trying to detect the platform, we could use /etc/os-release:\nplatform=\"$(. /etc/os-release; echo \"${ID}\")\"\ncase $platform in\ncentos)\n  ...\n  ;;\nubuntu)\n  ...\n  ;;\n*)\n  echo \"Unsupported operating system ${TARGET_OS}. Exiting...\"\n  exit 1\n  ;;\nesac", "url": "https://github.com/greenplum-db/pxf/pull/506#discussion_r528903975", "createdAt": "2020-11-23T18:15:05Z", "author": {"login": "bradfordb-vmware"}, "path": "concourse/scripts/build.bash", "diffHunk": "@@ -14,17 +14,17 @@ GPHOME=/usr/local/greenplum-db-${GPDB_VERSION}\n function install_gpdb() {\n     local pkg_file\n     if command -v rpm; then\n-\t    pkg_file=$(find \"${GPDB_PKG_DIR}\" -name \"greenplum-db-${GPDB_VERSION}-rhel*-x86_64.rpm\")\n-\t    echo \"Installing RPM ${pkg_file}...\"\n-\t    rpm --quiet -ivh \"${pkg_file}\" >/dev/null\n+        pkg_file=$(find \"${GPDB_PKG_DIR}\" -name \"greenplum-db-${GPDB_VERSION}-rhel*-x86_64.rpm\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c03cedb5706bc333f8590f8991178d7ce8adfc1c"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODkyNjQ1NQ==", "bodyText": "I guess I just fixed indentation here, not sure if I want to mess with this code :) Maybe I'll just revert it", "url": "https://github.com/greenplum-db/pxf/pull/506#discussion_r528926455", "createdAt": "2020-11-23T18:55:33Z", "author": {"login": "frankgh"}, "path": "concourse/scripts/build.bash", "diffHunk": "@@ -14,17 +14,17 @@ GPHOME=/usr/local/greenplum-db-${GPDB_VERSION}\n function install_gpdb() {\n     local pkg_file\n     if command -v rpm; then\n-\t    pkg_file=$(find \"${GPDB_PKG_DIR}\" -name \"greenplum-db-${GPDB_VERSION}-rhel*-x86_64.rpm\")\n-\t    echo \"Installing RPM ${pkg_file}...\"\n-\t    rpm --quiet -ivh \"${pkg_file}\" >/dev/null\n+        pkg_file=$(find \"${GPDB_PKG_DIR}\" -name \"greenplum-db-${GPDB_VERSION}-rhel*-x86_64.rpm\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODkwMzk3NQ=="}, "originalCommit": {"oid": "c03cedb5706bc333f8590f8991178d7ce8adfc1c"}, "originalPosition": 7}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3366, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}