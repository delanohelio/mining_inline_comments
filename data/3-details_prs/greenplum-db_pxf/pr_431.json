{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc0OTU5MTM2", "number": 431, "title": "Add Make target for setting a dev version of the full build pipeline", "bodyText": "", "createdAt": "2020-08-27T21:23:19Z", "url": "https://github.com/greenplum-db/pxf/pull/431", "merged": true, "mergeCommit": {"oid": "a840709a616328e6e602c0c0a43c1113374565b8"}, "closed": true, "closedAt": "2020-09-02T00:26:22Z", "author": {"login": "bradfordb-vmware"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdDIDqdgFqTQ3NzEyMjU5Mg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdEw0OQgBqjM3MTczMjM5NTE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc3MTIyNTky", "url": "https://github.com/greenplum-db/pxf/pull/431#pullrequestreview-477122592", "createdAt": "2020-08-27T22:18:37Z", "commit": {"oid": "0da70606d0189653fc023955d57504eaea4070a8"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QyMjoxODozN1rOHIjKdw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QyMjoxOTozMlrOHIjLyw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODcyNjc3NQ==", "bodyText": "I guess we have a concourse/settings that is kind of equivalent to vars. Should we consolidate?", "url": "https://github.com/greenplum-db/pxf/pull/431#discussion_r478726775", "createdAt": "2020-08-27T22:18:37Z", "author": {"login": "frankgh"}, "path": "concourse/vars/build.dev.yml", "diffHunk": "@@ -0,0 +1,5 @@\n+pxf-git-remote-ssh-url: git@github.com:pivotal/gp-pxf-dev.git", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0da70606d0189653fc023955d57504eaea4070a8"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODcyNzExNQ==", "bodyText": "what's the difference between [ and (?", "url": "https://github.com/greenplum-db/pxf/pull/431#discussion_r478727115", "createdAt": "2020-08-27T22:19:32Z", "author": {"login": "frankgh"}, "path": "concourse/pipelines/templates/build_pipeline-tpl.yml", "diffHunk": "@@ -1565,10 +1568,10 @@ jobs:\n     image: google-cloud-sdk-slim-image\n     file: pxf_src/concourse/tasks/get_pxf_release_artifacts.yml\n     params:\n-      GCS_ODP_PATH: prod/ODP\n-      GCS_OSL_PATH: prod/OSL\n+      GCS_ODP_PATH: [[pxf_releases_bucket_prefix]]/ODP", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0da70606d0189653fc023955d57504eaea4070a8"}, "originalPosition": 75}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0da70606d0189653fc023955d57504eaea4070a8", "author": {"user": {"login": "ashuka24", "name": "Ashuka Xue"}}, "url": "https://github.com/greenplum-db/pxf/commit/0da70606d0189653fc023955d57504eaea4070a8", "committedDate": "2020-08-27T21:19:36Z", "message": "Add target for dev version of build and release pipeline\n\nCo-authored-by: Ashuka Xue <axue@vmware.com>\nCo-authored-by: Bradford D. Boyle <bradfordb@vmware.com>"}, "afterCommit": {"oid": "10f2f82a65a70695f9d844529c05f12060bdf855", "author": {"user": {"login": "ashuka24", "name": "Ashuka Xue"}}, "url": "https://github.com/greenplum-db/pxf/commit/10f2f82a65a70695f9d844529c05f12060bdf855", "committedDate": "2020-08-28T22:58:10Z", "message": "Add target for dev version of build and release pipeline\n\nCo-authored-by: Ashuka Xue <axue@vmware.com>\nCo-authored-by: Bradford D. Boyle <bradfordb@vmware.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c701bc516c3aa4c359e65607a2c610ead7c23f5d", "author": {"user": {"login": "ashuka24", "name": "Ashuka Xue"}}, "url": "https://github.com/greenplum-db/pxf/commit/c701bc516c3aa4c359e65607a2c610ead7c23f5d", "committedDate": "2020-08-28T23:05:16Z", "message": "fixup! Add target for dev version of build and release pipeline"}, "afterCommit": {"oid": "a55d02f97a5a9950b0372772c901e9c5cdca304f", "author": {"user": {"login": "ashuka24", "name": "Ashuka Xue"}}, "url": "https://github.com/greenplum-db/pxf/commit/a55d02f97a5a9950b0372772c901e9c5cdca304f", "committedDate": "2020-08-31T18:40:40Z", "message": "Add target for dev version of build and release pipeline\n\nCo-authored-by: Ashuka Xue <axue@vmware.com>\nCo-authored-by: Bradford D. Boyle <bradfordb@vmware.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgwMTI4NDM5", "url": "https://github.com/greenplum-db/pxf/pull/431#pullrequestreview-480128439", "createdAt": "2020-09-01T21:25:30Z", "commit": {"oid": "a55d02f97a5a9950b0372772c901e9c5cdca304f"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQyMToyNTozMFrOHLI0Yg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQyMToyNTozMFrOHLI0Yg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTQ0MDg2Ng==", "bodyText": "I thought at some point we talked about copying all secrets, even common GP CI ones into PXF secrets file. Not sure if this is still desired", "url": "https://github.com/greenplum-db/pxf/pull/431#discussion_r481440866", "createdAt": "2020-09-01T21:25:30Z", "author": {"login": "denalex"}, "path": "concourse/Makefile", "diffHunk": "@@ -46,28 +48,61 @@ set-build-pipeline:\n \t@PIPELINE_FILE=$$(mktemp) && \\\n \t$(TEMPLATE_CMD) --template build_pipeline-tpl.yml --vars \\\n \t\tbuild_deb=$(BUILD_DEB) \\\n+\t\temail_notification=$(EMAIL) \\\n \t\tslack_notification=$(SLACK) \\\n \t\tgit_branch=$(BRANCH) \\\n \t\tnum_gpdb5_versions=$(NUM_GPDB5_VERSIONS) \\\n-\t\tnum_gpdb6_versions=$(NUM_GPDB6_VERSIONS) >\"$${PIPELINE_FILE}\" && \\\n+\t\tnum_gpdb6_versions=$(NUM_GPDB6_VERSIONS) \\\n+\t\tpxf_build_bucket_prefix=prod \\\n+\t\tpxf_releases_bucket_prefix=prod >\"$${PIPELINE_FILE}\" && \\\n \t$(FLY_CMD) --target=$(CONCOURSE) \\\n \t\tset-pipeline \\\n \t\t--check-creds \\\n \t\t--pipeline=$(BUILD_PIPELINE_NAME) \\\n \t\t--config \"$${PIPELINE_FILE}\" \\\n-\t\t--load-vars-from=$(SECRETS_FILE) \\\n-\t\t--load-vars-from=$(HOME)/workspace/gp-continuous-integration/secrets/gpdb_common-ci-secrets.yml \\\n+\t\t--load-vars-from=$(SECRETS_HOME)/pxf-secrets.yml \\\n+\t\t--load-vars-from=$(SECRETS_HOME)/gpdb_common-ci-secrets.yml \\\n \t\t--load-vars-from=$(HOME)/workspace/pxf/concourse/settings/pxf-multinode-params.yml \\\n-\t\t--load-vars-from=$(HOME)/workspace/gp-continuous-integration/secrets/ccp_ci_secrets_ud.yml \\\n-\t\t--load-vars-from=$(HOME)/workspace/gp-continuous-integration/secrets/ccp_ci_secrets_ud_kerberos.yml \\\n+\t\t--load-vars-from=$(SECRETS_HOME)/ccp_ci_secrets_ud.yml \\\n+\t\t--load-vars-from=$(SECRETS_HOME)/ccp_ci_secrets_ud_kerberos.yml \\", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a55d02f97a5a9950b0372772c901e9c5cdca304f"}, "originalPosition": 43}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8b12f2c71ff87f612191e6c4967f8cb705569bc6", "author": {"user": {"login": "ashuka24", "name": "Ashuka Xue"}}, "url": "https://github.com/greenplum-db/pxf/commit/8b12f2c71ff87f612191e6c4967f8cb705569bc6", "committedDate": "2020-09-01T22:07:13Z", "message": "Remove separate CCP vars files from set-pipeline commands\n\nCo-authored-by: Ashuka Xue <axue@vmware.com>\nCo-authored-by: Bradford D. Boyle <bradfordb@vmware.com>"}, "afterCommit": {"oid": "80cdf41411a19bc8bd6c4b37c3acc74b9ff4c1ee", "author": {"user": {"login": "ashuka24", "name": "Ashuka Xue"}}, "url": "https://github.com/greenplum-db/pxf/commit/80cdf41411a19bc8bd6c4b37c3acc74b9ff4c1ee", "committedDate": "2020-09-01T22:20:39Z", "message": "Remove separate CCP vars files from set-pipeline commands\n\nCo-authored-by: Ashuka Xue <axue@vmware.com>\nCo-authored-by: Bradford D. Boyle <bradfordb@vmware.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "80cdf41411a19bc8bd6c4b37c3acc74b9ff4c1ee", "author": {"user": {"login": "ashuka24", "name": "Ashuka Xue"}}, "url": "https://github.com/greenplum-db/pxf/commit/80cdf41411a19bc8bd6c4b37c3acc74b9ff4c1ee", "committedDate": "2020-09-01T22:20:39Z", "message": "Remove separate CCP vars files from set-pipeline commands\n\nCo-authored-by: Ashuka Xue <axue@vmware.com>\nCo-authored-by: Bradford D. Boyle <bradfordb@vmware.com>"}, "afterCommit": {"oid": "0956f054e370b7d17932d6e24b905705cd7ac9db", "author": {"user": {"login": "ashuka24", "name": "Ashuka Xue"}}, "url": "https://github.com/greenplum-db/pxf/commit/0956f054e370b7d17932d6e24b905705cd7ac9db", "committedDate": "2020-09-01T23:56:16Z", "message": "Add target for dev version of build and release pipeline\n\nCo-authored-by: Ashuka Xue <axue@vmware.com>\nCo-authored-by: Bradford D. Boyle <bradfordb@vmware.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0956f054e370b7d17932d6e24b905705cd7ac9db", "author": {"user": {"login": "ashuka24", "name": "Ashuka Xue"}}, "url": "https://github.com/greenplum-db/pxf/commit/0956f054e370b7d17932d6e24b905705cd7ac9db", "committedDate": "2020-09-01T23:56:16Z", "message": "Add target for dev version of build and release pipeline\n\nCo-authored-by: Ashuka Xue <axue@vmware.com>\nCo-authored-by: Bradford D. Boyle <bradfordb@vmware.com>"}, "afterCommit": {"oid": "92f49c0d1b23cfbdade87561265088976256f354", "author": {"user": {"login": "ashuka24", "name": "Ashuka Xue"}}, "url": "https://github.com/greenplum-db/pxf/commit/92f49c0d1b23cfbdade87561265088976256f354", "committedDate": "2020-09-02T00:04:59Z", "message": "Add target for dev version of build and release pipeline\n\nThe `send-an-email` step and its associated resources are wrapped in a\ntemplate guard `email_notification`. The default when setting the build\npipeline is to include the email notification. It can be omitted by\nsetting `EMAIL=false` when running make.\n\nCo-authored-by: Ashuka Xue <axue@vmware.com>\nCo-authored-by: Bradford D. Boyle <bradfordb@vmware.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "92f49c0d1b23cfbdade87561265088976256f354", "author": {"user": {"login": "ashuka24", "name": "Ashuka Xue"}}, "url": "https://github.com/greenplum-db/pxf/commit/92f49c0d1b23cfbdade87561265088976256f354", "committedDate": "2020-09-02T00:04:59Z", "message": "Add target for dev version of build and release pipeline\n\nThe `send-an-email` step and its associated resources are wrapped in a\ntemplate guard `email_notification`. The default when setting the build\npipeline is to include the email notification. It can be omitted by\nsetting `EMAIL=false` when running make.\n\nCo-authored-by: Ashuka Xue <axue@vmware.com>\nCo-authored-by: Bradford D. Boyle <bradfordb@vmware.com>"}, "afterCommit": {"oid": "85fe56fc4bb441d3af3d969de9d2728976168f09", "author": {"user": {"login": "ashuka24", "name": "Ashuka Xue"}}, "url": "https://github.com/greenplum-db/pxf/commit/85fe56fc4bb441d3af3d969de9d2728976168f09", "committedDate": "2020-09-02T00:10:48Z", "message": "Add target for dev version of build and release pipeline\n\nThe `send-an-email` step and its associated resources are wrapped in a\ntemplate guard `email_notification`. The default when setting the build\npipeline is to include the email notification. It can be omitted by\nsetting `EMAIL=false` when running make.\n\nCo-authored-by: Ashuka Xue <axue@vmware.com>\nCo-authored-by: Bradford D. Boyle <bradfordb@vmware.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "988fce9fd440dc90f79b44b565fe6068ee63d96c", "author": {"user": {"login": "ashuka24", "name": "Ashuka Xue"}}, "url": "https://github.com/greenplum-db/pxf/commit/988fce9fd440dc90f79b44b565fe6068ee63d96c", "committedDate": "2020-09-02T00:25:09Z", "message": "Templatize bucket locations in pxf-build pipeline\n\nThis commit also removes separate CCP vars files from set-pipeline\ncommands and unused variable from set-pipeline for build and dev-build\n\nCo-authored-by: Ashuka Xue <axue@vmware.com>\nCo-authored-by: Bradford D. Boyle <bradfordb@vmware.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a840709a616328e6e602c0c0a43c1113374565b8", "author": {"user": {"login": "ashuka24", "name": "Ashuka Xue"}}, "url": "https://github.com/greenplum-db/pxf/commit/a840709a616328e6e602c0c0a43c1113374565b8", "committedDate": "2020-09-02T00:25:09Z", "message": "Add target for dev version of build and release pipeline\n\nThe `send-an-email` step and its associated resources are wrapped in a\ntemplate guard `email_notification`. The default when setting the build\npipeline is to include the email notification. It can be omitted by\nsetting `EMAIL=false` when running make.\n\nCo-authored-by: Ashuka Xue <axue@vmware.com>\nCo-authored-by: Bradford D. Boyle <bradfordb@vmware.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "85fe56fc4bb441d3af3d969de9d2728976168f09", "author": {"user": {"login": "ashuka24", "name": "Ashuka Xue"}}, "url": "https://github.com/greenplum-db/pxf/commit/85fe56fc4bb441d3af3d969de9d2728976168f09", "committedDate": "2020-09-02T00:10:48Z", "message": "Add target for dev version of build and release pipeline\n\nThe `send-an-email` step and its associated resources are wrapped in a\ntemplate guard `email_notification`. The default when setting the build\npipeline is to include the email notification. It can be omitted by\nsetting `EMAIL=false` when running make.\n\nCo-authored-by: Ashuka Xue <axue@vmware.com>\nCo-authored-by: Bradford D. Boyle <bradfordb@vmware.com>"}, "afterCommit": {"oid": "a840709a616328e6e602c0c0a43c1113374565b8", "author": {"user": {"login": "ashuka24", "name": "Ashuka Xue"}}, "url": "https://github.com/greenplum-db/pxf/commit/a840709a616328e6e602c0c0a43c1113374565b8", "committedDate": "2020-09-02T00:25:09Z", "message": "Add target for dev version of build and release pipeline\n\nThe `send-an-email` step and its associated resources are wrapped in a\ntemplate guard `email_notification`. The default when setting the build\npipeline is to include the email notification. It can be omitted by\nsetting `EMAIL=false` when running make.\n\nCo-authored-by: Ashuka Xue <axue@vmware.com>\nCo-authored-by: Bradford D. Boyle <bradfordb@vmware.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4863, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}