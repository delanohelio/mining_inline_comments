{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM0NTEwMjkw", "number": 513, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQxODoyMjoyMFrOFChf-g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQxODoyMjoyMFrOFChf-g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM4MTkwMzMwOnYy", "diffSide": "RIGHT", "path": "server/pxf-api/src/main/java/org/greenplum/pxf/api/model/BasePlugin.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQxODoyMjoyMFrOIBvGwA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQyMToyMDo1MlrOIB2tuA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODY5MTI2NA==", "bodyText": "will this almost always be 0 as we unlikely will reach 1tuple/ns speed and the variable is not float. Why not measure in tuples / ms units ?", "url": "https://github.com/greenplum-db/pxf/pull/513#discussion_r538691264", "createdAt": "2020-12-08T18:22:20Z", "author": {"login": "denalex"}, "path": "server/pxf-api/src/main/java/org/greenplum/pxf/api/model/BasePlugin.java", "diffHunk": "@@ -31,4 +33,27 @@ public void setRequestContext(RequestContext context) {\n     @Override\n     public void afterPropertiesSet() {\n     }\n+\n+    /**\n+     * When DEBUG mode is enabled, logs the total number of rows read, the\n+     * amount of time it took to read the file, and the average read speed\n+     * in nanoseconds\n+     *\n+     * @param totalRowsRead        the total number of rows read\n+     * @param totalReadTimeInNanos the total nanoseconds it took to read the file\n+     */\n+    protected void logReadStats(long totalRowsRead, long totalReadTimeInNanos) {\n+        if (LOG.isDebugEnabled()) {\n+            final long millis = TimeUnit.NANOSECONDS.toMillis(totalReadTimeInNanos);\n+            long tuplesPerNanos = totalReadTimeInNanos == 0 ? 0 : totalRowsRead / totalReadTimeInNanos;\n+            LOG.debug(\"{}-{}: Read TOTAL of {} rows from file {} on server {} in {} ms. Average speed: {} tuples/nanoseconds\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "497108ee0fc91b1d605d37bf89d86a2f44308d23"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODgxNTkyOA==", "bodyText": "sure, let me change that", "url": "https://github.com/greenplum-db/pxf/pull/513#discussion_r538815928", "createdAt": "2020-12-08T21:20:52Z", "author": {"login": "frankgh"}, "path": "server/pxf-api/src/main/java/org/greenplum/pxf/api/model/BasePlugin.java", "diffHunk": "@@ -31,4 +33,27 @@ public void setRequestContext(RequestContext context) {\n     @Override\n     public void afterPropertiesSet() {\n     }\n+\n+    /**\n+     * When DEBUG mode is enabled, logs the total number of rows read, the\n+     * amount of time it took to read the file, and the average read speed\n+     * in nanoseconds\n+     *\n+     * @param totalRowsRead        the total number of rows read\n+     * @param totalReadTimeInNanos the total nanoseconds it took to read the file\n+     */\n+    protected void logReadStats(long totalRowsRead, long totalReadTimeInNanos) {\n+        if (LOG.isDebugEnabled()) {\n+            final long millis = TimeUnit.NANOSECONDS.toMillis(totalReadTimeInNanos);\n+            long tuplesPerNanos = totalReadTimeInNanos == 0 ? 0 : totalRowsRead / totalReadTimeInNanos;\n+            LOG.debug(\"{}-{}: Read TOTAL of {} rows from file {} on server {} in {} ms. Average speed: {} tuples/nanoseconds\",", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODY5MTI2NA=="}, "originalCommit": {"oid": "497108ee0fc91b1d605d37bf89d86a2f44308d23"}, "originalPosition": 26}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3375, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}