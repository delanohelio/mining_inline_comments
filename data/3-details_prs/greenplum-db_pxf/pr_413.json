{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDUyMTY3MzIy", "number": 413, "title": "Singlecluster pipeline", "bodyText": "", "createdAt": "2020-07-18T22:02:52Z", "url": "https://github.com/greenplum-db/pxf/pull/413", "merged": true, "mergeCommit": {"oid": "c7ee7049d2915017209385bd556b54bc23887e9c"}, "closed": true, "closedAt": "2020-08-14T14:59:07Z", "author": {"login": "frankgh"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc2P1dxABqjM1NjE2OTI3MDc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc-dMfygBqjM2NTEzNzMzNzI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "576e07db1efd2977cb6a54c61371aa46a6b5f00a", "author": {"user": null}, "url": "https://github.com/greenplum-db/pxf/commit/576e07db1efd2977cb6a54c61371aa46a6b5f00a", "committedDate": "2020-07-18T22:01:52Z", "message": "Rename the pipeline filename and add deploy instructions"}, "afterCommit": {"oid": "bae1da5015661bbcb2a4efe5e815566ecfec38ce", "author": {"user": null}, "url": "https://github.com/greenplum-db/pxf/commit/bae1da5015661bbcb2a4efe5e815566ecfec38ce", "committedDate": "2020-07-18T22:04:48Z", "message": "Convert the docker images pipeline to the singlecluster pipeline"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bae1da5015661bbcb2a4efe5e815566ecfec38ce", "author": {"user": null}, "url": "https://github.com/greenplum-db/pxf/commit/bae1da5015661bbcb2a4efe5e815566ecfec38ce", "committedDate": "2020-07-18T22:04:48Z", "message": "Convert the docker images pipeline to the singlecluster pipeline"}, "afterCommit": {"oid": "4272a25a710db66b8abe3d584cb7749fed075ca3", "author": {"user": null}, "url": "https://github.com/greenplum-db/pxf/commit/4272a25a710db66b8abe3d584cb7749fed075ca3", "committedDate": "2020-07-18T22:05:56Z", "message": "Rename the pipeline filename and add deploy instructions"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUyODE3NDMy", "url": "https://github.com/greenplum-db/pxf/pull/413#pullrequestreview-452817432", "createdAt": "2020-07-21T20:48:25Z", "commit": {"oid": "4272a25a710db66b8abe3d584cb7749fed075ca3"}, "state": "COMMENTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQyMDo0ODoyNlrOG1JMpw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQyMDo1NToyMVrOG1JbBA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODM3ODQwNw==", "bodyText": "can we substitute this with a make command like in the sections above ?", "url": "https://github.com/greenplum-db/pxf/pull/413#discussion_r458378407", "createdAt": "2020-07-21T20:48:26Z", "author": {"login": "denalex"}, "path": "concourse/README.md", "diffHunk": "@@ -25,7 +25,20 @@ To deploy the certifcation pipeline (forward compatibility) for PXF, make sure P\n make -C \"${HOME}/workspace/pxf/concourse\" certification\n ```\n \n-# Deploy cloudbuild pipeline\n+# Deploy the singlecluster pipeline\n+\n+The singlecluster pipeline generates the singlecluster tarball for CDH, HDP2,\n+and HDP3. The generated tarballs are then published to an S3 and GCS bucket.\n+The produced tarballs can then be consumed in the pxf-build pipelines.\n+\n+```shell script\n+fly -t ud set-pipeline \\\n+    -c ~/workspace/pxf/concourse/pipelines/singlecluster-pipeline.yml \\\n+    -l ~/workspace/gp-continuous-integration/secrets/gpdb_common-ci-secrets.yml \\\n+    -v pxf-git-branch=master -p pxf-singlecluster\n+```", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4272a25a710db66b8abe3d584cb7749fed075ca3"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODM3OTA2OA==", "bodyText": "wonder if we want to use a newer driver ?", "url": "https://github.com/greenplum-db/pxf/pull/413#discussion_r458379068", "createdAt": "2020-07-21T20:49:42Z", "author": {"login": "denalex"}, "path": "concourse/pipelines/singlecluster-pipeline.yml", "diffHunk": "@@ -0,0 +1,190 @@\n+## ======================================================================\n+## RESOURCE TYPES\n+## ======================================================================\n+resource_types:\n+- name: google-cloud-storage\n+  type: docker-image\n+  source:\n+    repository: frodenas/gcs-resource\n+\n+## ======================================================================\n+## RESOURCES\n+## ======================================================================\n+resources:\n+  - name: hdp2_tars_tarball\n+    type: s3\n+    icon: s3\n+    source:\n+      access_key_id: {{bucket-access-key-id}}\n+      secret_access_key: {{bucket-secret-access-key}}\n+      bucket: {{pxf-aws-bucket-name}}\n+      region_name: {{aws-region}}\n+      versioned_file: hortonworks/HDP-2.5.3.0-centos6-tars-tarball.tar.gz\n+\n+  - name: hdp3_tars_tarball\n+    type: s3\n+    icon: s3\n+    source:\n+      access_key_id: {{bucket-access-key-id}}\n+      secret_access_key: {{bucket-secret-access-key}}\n+      bucket: {{pxf-aws-bucket-name}}\n+      region_name: {{aws-region}}\n+      versioned_file: hortonworks/HDP-3.1.4.0-centos7-tars-tarball.tar.gz\n+\n+  - name: cdh_tars_tarball\n+    type: s3\n+    icon: s3\n+    source:\n+      access_key_id: {{bucket-access-key-id}}\n+      secret_access_key: {{bucket-secret-access-key}}\n+      bucket: {{pxf-aws-bucket-name}}\n+      region_name: {{aws-region}}\n+      versioned_file: cloudera/CDH-5.12.2.tar.gz\n+\n+  - name: jdbc\n+    type: s3\n+    icon: s3\n+    source:\n+      access_key_id: {{bucket-access-key-id}}\n+      secret_access_key: {{bucket-secret-access-key}}\n+      bucket: {{pxf-aws-bucket-name}}\n+      region_name: {{aws-region}}\n+      versioned_file: jdbc/postgresql-jdbc-8.4.704.jar", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4272a25a710db66b8abe3d584cb7749fed075ca3"}, "originalPosition": 52}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODM4MDAzMQ==", "bodyText": "what's the point of noarch in the names in these jobs ?", "url": "https://github.com/greenplum-db/pxf/pull/413#discussion_r458380031", "createdAt": "2020-07-21T20:51:33Z", "author": {"login": "denalex"}, "path": "concourse/pipelines/singlecluster-pipeline.yml", "diffHunk": "@@ -0,0 +1,190 @@\n+## ======================================================================\n+## RESOURCE TYPES\n+## ======================================================================\n+resource_types:\n+- name: google-cloud-storage\n+  type: docker-image\n+  source:\n+    repository: frodenas/gcs-resource\n+\n+## ======================================================================\n+## RESOURCES\n+## ======================================================================\n+resources:\n+  - name: hdp2_tars_tarball\n+    type: s3\n+    icon: s3\n+    source:\n+      access_key_id: {{bucket-access-key-id}}\n+      secret_access_key: {{bucket-secret-access-key}}\n+      bucket: {{pxf-aws-bucket-name}}\n+      region_name: {{aws-region}}\n+      versioned_file: hortonworks/HDP-2.5.3.0-centos6-tars-tarball.tar.gz\n+\n+  - name: hdp3_tars_tarball\n+    type: s3\n+    icon: s3\n+    source:\n+      access_key_id: {{bucket-access-key-id}}\n+      secret_access_key: {{bucket-secret-access-key}}\n+      bucket: {{pxf-aws-bucket-name}}\n+      region_name: {{aws-region}}\n+      versioned_file: hortonworks/HDP-3.1.4.0-centos7-tars-tarball.tar.gz\n+\n+  - name: cdh_tars_tarball\n+    type: s3\n+    icon: s3\n+    source:\n+      access_key_id: {{bucket-access-key-id}}\n+      secret_access_key: {{bucket-secret-access-key}}\n+      bucket: {{pxf-aws-bucket-name}}\n+      region_name: {{aws-region}}\n+      versioned_file: cloudera/CDH-5.12.2.tar.gz\n+\n+  - name: jdbc\n+    type: s3\n+    icon: s3\n+    source:\n+      access_key_id: {{bucket-access-key-id}}\n+      secret_access_key: {{bucket-secret-access-key}}\n+      bucket: {{pxf-aws-bucket-name}}\n+      region_name: {{aws-region}}\n+      versioned_file: jdbc/postgresql-jdbc-8.4.704.jar\n+\n+  - name: singlecluster-HDP2\n+    type: s3\n+    icon: s3\n+    source:\n+      access_key_id: {{bucket-access-key-id}}\n+      secret_access_key: {{bucket-secret-access-key}}\n+      bucket: {{pxf-aws-bucket-name}}\n+      region_name: {{aws-region}}\n+      versioned_file: singlecluster/singlecluster-HDP2.tar.gz\n+\n+  - name: singlecluster-HDP2-gcs\n+    type: google-cloud-storage\n+    icon: google-drive\n+    source:\n+      bucket: {{pxf-build-resources-bucket-name}}\n+      json_key: {{data-gpdb-ud-google-json-key}}\n+      versioned_file: singlecluster/HDP2/singlecluster-HDP2.tar.gz\n+\n+  - name: singlecluster-HDP3\n+    type: s3\n+    icon: s3\n+    source:\n+      access_key_id: {{bucket-access-key-id}}\n+      secret_access_key: {{bucket-secret-access-key}}\n+      bucket: {{pxf-aws-bucket-name}}\n+      region_name: {{aws-region}}\n+      versioned_file: singlecluster/singlecluster-HDP3.tar.gz\n+\n+  - name: singlecluster-HDP3-gcs\n+    type: google-cloud-storage\n+    icon: google-drive\n+    source:\n+      bucket: {{pxf-build-resources-bucket-name}}\n+      json_key: {{data-gpdb-ud-google-json-key}}\n+      versioned_file: singlecluster/HDP3/singlecluster-HDP3.tar.gz\n+\n+  - name: singlecluster-CDH\n+    type: s3\n+    icon: s3\n+    source:\n+      access_key_id: {{bucket-access-key-id}}\n+      secret_access_key: {{bucket-secret-access-key}}\n+      bucket: {{pxf-aws-bucket-name}}\n+      region_name: {{aws-region}}\n+      versioned_file: singlecluster/singlecluster-CDH.tar.gz\n+\n+  - name: singlecluster-CDH-gcs\n+    type: google-cloud-storage\n+    icon: google-drive\n+    source:\n+      bucket: {{pxf-build-resources-bucket-name}}\n+      json_key: {{data-gpdb-ud-google-json-key}}\n+      versioned_file: singlecluster/CDH/singlecluster-CDH.tar.gz\n+\n+  - name: pxf_singlecluster\n+    type: git\n+    icon: git\n+    source:\n+      branch: {{pxf-git-branch}}\n+      uri: https://github.com/greenplum-db/pxf.git\n+      paths: [singlecluster/*]\n+\n+  - name: gpdb6-centos7\n+    type: registry-image\n+    icon: docker\n+    source:\n+      repository: pivotaldata/gpdb6-centos7-test\n+      tag: latest\n+\n+## ======================================================================\n+## JOBS\n+## ======================================================================\n+jobs:\n+  - name: singlecluster_noarch_cdh", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4272a25a710db66b8abe3d584cb7749fed075ca3"}, "originalPosition": 127}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODM4MTU1Nw==", "bodyText": "why do we still need them in S3 ?", "url": "https://github.com/greenplum-db/pxf/pull/413#discussion_r458381557", "createdAt": "2020-07-21T20:54:24Z", "author": {"login": "denalex"}, "path": "concourse/pipelines/singlecluster-pipeline.yml", "diffHunk": "@@ -0,0 +1,190 @@\n+## ======================================================================\n+## RESOURCE TYPES\n+## ======================================================================\n+resource_types:\n+- name: google-cloud-storage\n+  type: docker-image\n+  source:\n+    repository: frodenas/gcs-resource\n+\n+## ======================================================================\n+## RESOURCES\n+## ======================================================================\n+resources:\n+  - name: hdp2_tars_tarball\n+    type: s3\n+    icon: s3\n+    source:\n+      access_key_id: {{bucket-access-key-id}}\n+      secret_access_key: {{bucket-secret-access-key}}\n+      bucket: {{pxf-aws-bucket-name}}\n+      region_name: {{aws-region}}\n+      versioned_file: hortonworks/HDP-2.5.3.0-centos6-tars-tarball.tar.gz\n+\n+  - name: hdp3_tars_tarball\n+    type: s3\n+    icon: s3\n+    source:\n+      access_key_id: {{bucket-access-key-id}}\n+      secret_access_key: {{bucket-secret-access-key}}\n+      bucket: {{pxf-aws-bucket-name}}\n+      region_name: {{aws-region}}\n+      versioned_file: hortonworks/HDP-3.1.4.0-centos7-tars-tarball.tar.gz\n+\n+  - name: cdh_tars_tarball\n+    type: s3\n+    icon: s3\n+    source:\n+      access_key_id: {{bucket-access-key-id}}\n+      secret_access_key: {{bucket-secret-access-key}}\n+      bucket: {{pxf-aws-bucket-name}}\n+      region_name: {{aws-region}}\n+      versioned_file: cloudera/CDH-5.12.2.tar.gz\n+\n+  - name: jdbc\n+    type: s3\n+    icon: s3\n+    source:\n+      access_key_id: {{bucket-access-key-id}}\n+      secret_access_key: {{bucket-secret-access-key}}\n+      bucket: {{pxf-aws-bucket-name}}\n+      region_name: {{aws-region}}\n+      versioned_file: jdbc/postgresql-jdbc-8.4.704.jar\n+\n+  - name: singlecluster-HDP2\n+    type: s3\n+    icon: s3\n+    source:\n+      access_key_id: {{bucket-access-key-id}}\n+      secret_access_key: {{bucket-secret-access-key}}\n+      bucket: {{pxf-aws-bucket-name}}\n+      region_name: {{aws-region}}\n+      versioned_file: singlecluster/singlecluster-HDP2.tar.gz", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4272a25a710db66b8abe3d584cb7749fed075ca3"}, "originalPosition": 62}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODM4MjA4NA==", "bodyText": "we must have {{pxf-git-url}} defined somewhere", "url": "https://github.com/greenplum-db/pxf/pull/413#discussion_r458382084", "createdAt": "2020-07-21T20:55:21Z", "author": {"login": "denalex"}, "path": "concourse/pipelines/singlecluster-pipeline.yml", "diffHunk": "@@ -0,0 +1,190 @@\n+## ======================================================================\n+## RESOURCE TYPES\n+## ======================================================================\n+resource_types:\n+- name: google-cloud-storage\n+  type: docker-image\n+  source:\n+    repository: frodenas/gcs-resource\n+\n+## ======================================================================\n+## RESOURCES\n+## ======================================================================\n+resources:\n+  - name: hdp2_tars_tarball\n+    type: s3\n+    icon: s3\n+    source:\n+      access_key_id: {{bucket-access-key-id}}\n+      secret_access_key: {{bucket-secret-access-key}}\n+      bucket: {{pxf-aws-bucket-name}}\n+      region_name: {{aws-region}}\n+      versioned_file: hortonworks/HDP-2.5.3.0-centos6-tars-tarball.tar.gz\n+\n+  - name: hdp3_tars_tarball\n+    type: s3\n+    icon: s3\n+    source:\n+      access_key_id: {{bucket-access-key-id}}\n+      secret_access_key: {{bucket-secret-access-key}}\n+      bucket: {{pxf-aws-bucket-name}}\n+      region_name: {{aws-region}}\n+      versioned_file: hortonworks/HDP-3.1.4.0-centos7-tars-tarball.tar.gz\n+\n+  - name: cdh_tars_tarball\n+    type: s3\n+    icon: s3\n+    source:\n+      access_key_id: {{bucket-access-key-id}}\n+      secret_access_key: {{bucket-secret-access-key}}\n+      bucket: {{pxf-aws-bucket-name}}\n+      region_name: {{aws-region}}\n+      versioned_file: cloudera/CDH-5.12.2.tar.gz\n+\n+  - name: jdbc\n+    type: s3\n+    icon: s3\n+    source:\n+      access_key_id: {{bucket-access-key-id}}\n+      secret_access_key: {{bucket-secret-access-key}}\n+      bucket: {{pxf-aws-bucket-name}}\n+      region_name: {{aws-region}}\n+      versioned_file: jdbc/postgresql-jdbc-8.4.704.jar\n+\n+  - name: singlecluster-HDP2\n+    type: s3\n+    icon: s3\n+    source:\n+      access_key_id: {{bucket-access-key-id}}\n+      secret_access_key: {{bucket-secret-access-key}}\n+      bucket: {{pxf-aws-bucket-name}}\n+      region_name: {{aws-region}}\n+      versioned_file: singlecluster/singlecluster-HDP2.tar.gz\n+\n+  - name: singlecluster-HDP2-gcs\n+    type: google-cloud-storage\n+    icon: google-drive\n+    source:\n+      bucket: {{pxf-build-resources-bucket-name}}\n+      json_key: {{data-gpdb-ud-google-json-key}}\n+      versioned_file: singlecluster/HDP2/singlecluster-HDP2.tar.gz\n+\n+  - name: singlecluster-HDP3\n+    type: s3\n+    icon: s3\n+    source:\n+      access_key_id: {{bucket-access-key-id}}\n+      secret_access_key: {{bucket-secret-access-key}}\n+      bucket: {{pxf-aws-bucket-name}}\n+      region_name: {{aws-region}}\n+      versioned_file: singlecluster/singlecluster-HDP3.tar.gz\n+\n+  - name: singlecluster-HDP3-gcs\n+    type: google-cloud-storage\n+    icon: google-drive\n+    source:\n+      bucket: {{pxf-build-resources-bucket-name}}\n+      json_key: {{data-gpdb-ud-google-json-key}}\n+      versioned_file: singlecluster/HDP3/singlecluster-HDP3.tar.gz\n+\n+  - name: singlecluster-CDH\n+    type: s3\n+    icon: s3\n+    source:\n+      access_key_id: {{bucket-access-key-id}}\n+      secret_access_key: {{bucket-secret-access-key}}\n+      bucket: {{pxf-aws-bucket-name}}\n+      region_name: {{aws-region}}\n+      versioned_file: singlecluster/singlecluster-CDH.tar.gz\n+\n+  - name: singlecluster-CDH-gcs\n+    type: google-cloud-storage\n+    icon: google-drive\n+    source:\n+      bucket: {{pxf-build-resources-bucket-name}}\n+      json_key: {{data-gpdb-ud-google-json-key}}\n+      versioned_file: singlecluster/CDH/singlecluster-CDH.tar.gz\n+\n+  - name: pxf_singlecluster\n+    type: git\n+    icon: git\n+    source:\n+      branch: {{pxf-git-branch}}\n+      uri: https://github.com/greenplum-db/pxf.git", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4272a25a710db66b8abe3d584cb7749fed075ca3"}, "originalPosition": 113}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0781ac56b810577deb2c718e4130fc38ccc9a257", "author": {"user": null}, "url": "https://github.com/greenplum-db/pxf/commit/0781ac56b810577deb2c718e4130fc38ccc9a257", "committedDate": "2020-08-12T20:51:26Z", "message": "Convert the docker images pipeline to the singlecluster pipeline"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fcb668f567470d38d0d65259e603bc8626a9d1c0", "author": {"user": null}, "url": "https://github.com/greenplum-db/pxf/commit/fcb668f567470d38d0d65259e603bc8626a9d1c0", "committedDate": "2020-08-12T20:51:26Z", "message": "Rename the pipeline filename and add deploy instructions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2b16022144407ef9299135528e9650e9ae683e84", "author": {"user": null}, "url": "https://github.com/greenplum-db/pxf/commit/2b16022144407ef9299135528e9650e9ae683e84", "committedDate": "2020-08-12T21:02:19Z", "message": "address PR feedback"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4272a25a710db66b8abe3d584cb7749fed075ca3", "author": {"user": null}, "url": "https://github.com/greenplum-db/pxf/commit/4272a25a710db66b8abe3d584cb7749fed075ca3", "committedDate": "2020-07-18T22:05:56Z", "message": "Rename the pipeline filename and add deploy instructions"}, "afterCommit": {"oid": "2b16022144407ef9299135528e9650e9ae683e84", "author": {"user": null}, "url": "https://github.com/greenplum-db/pxf/commit/2b16022144407ef9299135528e9650e9ae683e84", "committedDate": "2020-08-12T21:02:19Z", "message": "address PR feedback"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4826, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}