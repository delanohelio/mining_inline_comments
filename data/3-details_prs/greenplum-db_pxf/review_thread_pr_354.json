{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE0NDAyNDc2", "number": 354, "reviewThreads": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QwMTo1NzozMlrOD6D4uw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QyMTowMTozNVrOD6a0MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYyMjA3Njc1OnYy", "diffSide": "RIGHT", "path": "automation/Makefile", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QwMTo1NzozMlrOGRrqqw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QxNzoxMjowOVrOGSIOig==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTE5NDQxMQ==", "bodyText": "is this correct?", "url": "https://github.com/greenplum-db/pxf/pull/354#discussion_r421194411", "createdAt": "2020-05-07T01:57:32Z", "author": {"login": "frankgh"}, "path": "automation/Makefile", "diffHunk": "@@ -87,13 +89,15 @@ all: test\n \n symlink_pxf_jars:\n \t@if [ -d \"$(PXF_HOME)/lib\" ]; then \\\n-\t\trm -rf $(PXF_HOME)/tmp && \\\n-\t\tmkdir -p $(PXF_HOME)/tmp && \\\n-\t\tcd $(PXF_HOME)/tmp && \\\n-\t\tfor X in $(PXF_HOME)/lib/pxf-*-[0-9]*.jar; do \\\n-\t\t\tln -sf $$X `echo \\`basename $$X\\` | sed -e 's/-[a-zA-Z0-9.]*.jar/.jar/'`; \\\n+\t\trm -rf $(PXF_TMP_LIB) && \\\n+\t\tmkdir -p $(PXF_TMP_LIB) && \\\n+\t\tfor jar in $(PXF_HOME)/lib/*; do \\\n+\t\t\t: \"$${jar##*/}\"; \\", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "19825beb5bb1e638eb49211d0b6ec9ded1740ce9"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTY2MjM0Ng==", "bodyText": "I'd use an explicit variable instead of anonymous one ${_} for clarity : file_name=\"$${jar##*/}\"", "url": "https://github.com/greenplum-db/pxf/pull/354#discussion_r421662346", "createdAt": "2020-05-07T17:12:09Z", "author": {"login": "denalex"}, "path": "automation/Makefile", "diffHunk": "@@ -87,13 +89,15 @@ all: test\n \n symlink_pxf_jars:\n \t@if [ -d \"$(PXF_HOME)/lib\" ]; then \\\n-\t\trm -rf $(PXF_HOME)/tmp && \\\n-\t\tmkdir -p $(PXF_HOME)/tmp && \\\n-\t\tcd $(PXF_HOME)/tmp && \\\n-\t\tfor X in $(PXF_HOME)/lib/pxf-*-[0-9]*.jar; do \\\n-\t\t\tln -sf $$X `echo \\`basename $$X\\` | sed -e 's/-[a-zA-Z0-9.]*.jar/.jar/'`; \\\n+\t\trm -rf $(PXF_TMP_LIB) && \\\n+\t\tmkdir -p $(PXF_TMP_LIB) && \\\n+\t\tfor jar in $(PXF_HOME)/lib/*; do \\\n+\t\t\t: \"$${jar##*/}\"; \\", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTE5NDQxMQ=="}, "originalCommit": {"oid": "19825beb5bb1e638eb49211d0b6ec9ded1740ce9"}, "originalPosition": 32}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYyMjA3NzMzOnYy", "diffSide": "RIGHT", "path": "automation/Makefile", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QwMTo1Nzo0OVrOGRrrAg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QxNzoyMDo0NVrOGSIiIQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTE5NDQ5OA==", "bodyText": "what is this if for?", "url": "https://github.com/greenplum-db/pxf/pull/354#discussion_r421194498", "createdAt": "2020-05-07T01:57:49Z", "author": {"login": "frankgh"}, "path": "automation/Makefile", "diffHunk": "@@ -87,13 +89,15 @@ all: test\n \n symlink_pxf_jars:\n \t@if [ -d \"$(PXF_HOME)/lib\" ]; then \\\n-\t\trm -rf $(PXF_HOME)/tmp && \\\n-\t\tmkdir -p $(PXF_HOME)/tmp && \\\n-\t\tcd $(PXF_HOME)/tmp && \\\n-\t\tfor X in $(PXF_HOME)/lib/pxf-*-[0-9]*.jar; do \\\n-\t\t\tln -sf $$X `echo \\`basename $$X\\` | sed -e 's/-[a-zA-Z0-9.]*.jar/.jar/'`; \\\n+\t\trm -rf $(PXF_TMP_LIB) && \\\n+\t\tmkdir -p $(PXF_TMP_LIB) && \\\n+\t\tfor jar in $(PXF_HOME)/lib/*; do \\\n+\t\t\t: \"$${jar##*/}\"; \\\n+\t\t\tif [[ $${_} =~ ^pxf-[A-Za-z0-9]+(-[0-9.]+).jar$$ ]]; then \\", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "19825beb5bb1e638eb49211d0b6ec9ded1740ce9"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTY2NzM2MQ==", "bodyText": "so this would match a pattern and capture the version (expression in () ) in BASH_REMATCH[1] ?", "url": "https://github.com/greenplum-db/pxf/pull/354#discussion_r421667361", "createdAt": "2020-05-07T17:20:45Z", "author": {"login": "denalex"}, "path": "automation/Makefile", "diffHunk": "@@ -87,13 +89,15 @@ all: test\n \n symlink_pxf_jars:\n \t@if [ -d \"$(PXF_HOME)/lib\" ]; then \\\n-\t\trm -rf $(PXF_HOME)/tmp && \\\n-\t\tmkdir -p $(PXF_HOME)/tmp && \\\n-\t\tcd $(PXF_HOME)/tmp && \\\n-\t\tfor X in $(PXF_HOME)/lib/pxf-*-[0-9]*.jar; do \\\n-\t\t\tln -sf $$X `echo \\`basename $$X\\` | sed -e 's/-[a-zA-Z0-9.]*.jar/.jar/'`; \\\n+\t\trm -rf $(PXF_TMP_LIB) && \\\n+\t\tmkdir -p $(PXF_TMP_LIB) && \\\n+\t\tfor jar in $(PXF_HOME)/lib/*; do \\\n+\t\t\t: \"$${jar##*/}\"; \\\n+\t\t\tif [[ $${_} =~ ^pxf-[A-Za-z0-9]+(-[0-9.]+).jar$$ ]]; then \\", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTE5NDQ5OA=="}, "originalCommit": {"oid": "19825beb5bb1e638eb49211d0b6ec9ded1740ce9"}, "originalPosition": 33}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYyMjA3ODc3OnYy", "diffSide": "RIGHT", "path": "automation/Makefile", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QwMTo1ODozOVrOGRrr0g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QwMTo1ODozOVrOGRrr0g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTE5NDcwNg==", "bodyText": "is this needed now?", "url": "https://github.com/greenplum-db/pxf/pull/354#discussion_r421194706", "createdAt": "2020-05-07T01:58:39Z", "author": {"login": "frankgh"}, "path": "automation/Makefile", "diffHunk": "@@ -5,8 +5,10 @@\n # make TEST=<class>#<method> ===> run specific <method> from <class>.class\n # make OFFLINE=true ===> run using only cache\n \n+SHELL := bash", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "19825beb5bb1e638eb49211d0b6ec9ded1740ce9"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYyNTAyMDM1OnYy", "diffSide": "RIGHT", "path": "automation/Makefile", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QxNzowOTo0OFrOGSIJXw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QxNzowOTo0OFrOGSIJXw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTY2MTAyMw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\tfor jar in $(PXF_HOME)/lib/*; do \\\n          \n          \n            \n            \t\tfor jar in $(PXF_HOME)/lib/pxf-*.jar; do \\", "url": "https://github.com/greenplum-db/pxf/pull/354#discussion_r421661023", "createdAt": "2020-05-07T17:09:48Z", "author": {"login": "denalex"}, "path": "automation/Makefile", "diffHunk": "@@ -87,13 +89,15 @@ all: test\n \n symlink_pxf_jars:\n \t@if [ -d \"$(PXF_HOME)/lib\" ]; then \\\n-\t\trm -rf $(PXF_HOME)/tmp && \\\n-\t\tmkdir -p $(PXF_HOME)/tmp && \\\n-\t\tcd $(PXF_HOME)/tmp && \\\n-\t\tfor X in $(PXF_HOME)/lib/pxf-*-[0-9]*.jar; do \\\n-\t\t\tln -sf $$X `echo \\`basename $$X\\` | sed -e 's/-[a-zA-Z0-9.]*.jar/.jar/'`; \\\n+\t\trm -rf $(PXF_TMP_LIB) && \\\n+\t\tmkdir -p $(PXF_TMP_LIB) && \\\n+\t\tfor jar in $(PXF_HOME)/lib/*; do \\", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "19825beb5bb1e638eb49211d0b6ec9ded1740ce9"}, "originalPosition": 31}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYyNTA2MjQzOnYy", "diffSide": "RIGHT", "path": "automation/Makefile", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QxNzoyMTo0N1rOGSIkbw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QxNzoyMTo0N1rOGSIkbw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTY2Nzk1MQ==", "bodyText": "if BASH_REMATCH[1] is version, then it needs to be cut out of the string. According to this logic, BASH_REMATCH[1] is actually the string without a version ??", "url": "https://github.com/greenplum-db/pxf/pull/354#discussion_r421667951", "createdAt": "2020-05-07T17:21:47Z", "author": {"login": "denalex"}, "path": "automation/Makefile", "diffHunk": "@@ -87,13 +89,15 @@ all: test\n \n symlink_pxf_jars:\n \t@if [ -d \"$(PXF_HOME)/lib\" ]; then \\\n-\t\trm -rf $(PXF_HOME)/tmp && \\\n-\t\tmkdir -p $(PXF_HOME)/tmp && \\\n-\t\tcd $(PXF_HOME)/tmp && \\\n-\t\tfor X in $(PXF_HOME)/lib/pxf-*-[0-9]*.jar; do \\\n-\t\t\tln -sf $$X `echo \\`basename $$X\\` | sed -e 's/-[a-zA-Z0-9.]*.jar/.jar/'`; \\\n+\t\trm -rf $(PXF_TMP_LIB) && \\\n+\t\tmkdir -p $(PXF_TMP_LIB) && \\\n+\t\tfor jar in $(PXF_HOME)/lib/*; do \\\n+\t\t\t: \"$${jar##*/}\"; \\\n+\t\t\tif [[ $${_} =~ ^pxf-[A-Za-z0-9]+(-[0-9.]+).jar$$ ]]; then \\\n+\t\t\t\tln -sf \"$${jar}\" \"$(PXF_TMP_LIB)/$${_/$${BASH_REMATCH[1]}/}\"; \\", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "19825beb5bb1e638eb49211d0b6ec9ded1740ce9"}, "originalPosition": 34}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYyNTgzMzQ0OnYy", "diffSide": "RIGHT", "path": "automation/Makefile", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QyMTowMTozNVrOGSQH7g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QyMTowMTozNVrOGSQH7g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTc5MTcyNg==", "bodyText": "line 110 needs a change as well !", "url": "https://github.com/greenplum-db/pxf/pull/354#discussion_r421791726", "createdAt": "2020-05-07T21:01:35Z", "author": {"login": "denalex"}, "path": "automation/Makefile", "diffHunk": "@@ -87,13 +89,17 @@ all: test\n \n symlink_pxf_jars:\n \t@if [ -d \"$(PXF_HOME)/lib\" ]; then \\\n-\t\trm -rf $(PXF_HOME)/tmp && \\\n-\t\tmkdir -p $(PXF_HOME)/tmp && \\\n-\t\tcd $(PXF_HOME)/tmp && \\\n-\t\tfor X in $(PXF_HOME)/lib/pxf-*-[0-9]*.jar; do \\\n-\t\t\tln -sf $$X `echo \\`basename $$X\\` | sed -e 's/-[a-zA-Z0-9.]*.jar/.jar/'`; \\\n+\t\trm -rf $(PXF_TMP_LIB) && \\\n+\t\tmkdir -p $(PXF_TMP_LIB) && \\\n+\t\tfor jar in $(PXF_HOME)/lib/pxf-*.jar; do \\\n+\t\t\tjar_name=\"$${jar##*/}\"; \\\n+\t\t\tif [[ $${jar_name} =~ ^pxf-[A-Za-z0-9]+(-[0-9.]+).jar$$ ]]; then \\\n+\t\t\t\tlink=$(PXF_TMP_LIB)/$${jar_name/$${BASH_REMATCH[1]}/}; \\\n+\t\t\t\techo \"creating link $${link} -> $${jar}\"; \\\n+\t\t\t\tln -sf \"$${jar}\" \"$${link}\"; \\\n+\t\t\tfi; \\\n \t\tdone; \\\n-\t\ttouch $(PXF_HOME)/tmp/pxf-extras.jar; \\\n+\t\ttouch $(PXF_TMP_LIB)/pxf-extras.jar; \\", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4f2217749b41977ca51675243baedafeb68e031a"}, "originalPosition": 40}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3648, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}