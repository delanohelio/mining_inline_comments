{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ4MjI5MDk2", "number": 316, "reviewThreads": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQwODo1NDoyN1rOEOKrSg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQxMDo1MjoxN1rOEONMlw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgzMjkwNDQyOnYy", "diffSide": "RIGHT", "path": ".github/workflows/proof-bin.yaml", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQwODo1NDoyN1rOGxKjGA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQwODo1NDoyN1rOGxKjGA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDIwNjIzMg==", "bodyText": "Run only on push to the master branch", "url": "https://github.com/artipie/artipie/pull/316#discussion_r454206232", "createdAt": "2020-07-14T08:54:27Z", "author": {"login": "Sammers21"}, "path": ".github/workflows/proof-bin.yaml", "diffHunk": "@@ -0,0 +1,26 @@\n+name: \"Proof::binary\"\n+\"on\": [push, pull_request]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f68fcc9f4b620c085e2c925d55d93b20e18c5cd3"}, "originalPosition": 2}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgzMjkwNjM2OnYy", "diffSide": "RIGHT", "path": ".github/workflows/proof-bin.yaml", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQwODo1NDo1NVrOGxKkTw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQwODo1NDo1NVrOGxKkTw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDIwNjU0Mw==", "bodyText": "Move this and subsequent line into a bash script", "url": "https://github.com/artipie/artipie/pull/316#discussion_r454206543", "createdAt": "2020-07-14T08:54:55Z", "author": {"login": "Sammers21"}, "path": ".github/workflows/proof-bin.yaml", "diffHunk": "@@ -0,0 +1,26 @@\n+name: \"Proof::binary\"\n+\"on\": [push, pull_request]\n+jobs:\n+  proof:\n+    runs-on: ubuntu-latest\n+    steps:\n+      - name: Check out the code\n+        uses: actions/checkout@v2\n+      - name: Build docker image\n+        run: |\n+          docker build . -t artipie\n+      - name: Start artipie with binary example configuration\n+        run: |\n+          cd examples/binary\n+          docker run -d -it -v $(pwd)/artipie.yaml:/etc/artipie.yml -v $(pwd):/var/artipie -p 8080:80 artipie", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f68fcc9f4b620c085e2c925d55d93b20e18c5cd3"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgzMzE5MTI1OnYy", "diffSide": "RIGHT", "path": ".github/workflows/proof-bin.yaml", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQxMDoxNDowOFrOGxNTGw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQxMDoxNDowOFrOGxNTGw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDI1MTI5MQ==", "bodyText": "@Sammers21 let's start only on push to master events", "url": "https://github.com/artipie/artipie/pull/316#discussion_r454251291", "createdAt": "2020-07-14T10:14:08Z", "author": {"login": "g4s8"}, "path": ".github/workflows/proof-bin.yaml", "diffHunk": "@@ -0,0 +1,16 @@\n+name: \"Proof::binary\"\n+\"on\": [push]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a24319f56b29efeb6bf01894bc7f4210f1e6fa0e"}, "originalPosition": 2}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgzMzI2MjgzOnYy", "diffSide": "RIGHT", "path": "examples/binary/run.sh", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQxMDozNTowNVrOGxN-Fw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQxMjowNzoxMFrOGxQvpQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDI2MjI5NQ==", "bodyText": "@Sammers21 do not see why we need to remove running Artipie container in the example", "url": "https://github.com/artipie/artipie/pull/316#discussion_r454262295", "createdAt": "2020-07-14T10:35:05Z", "author": {"login": "olegmoz"}, "path": "examples/binary/run.sh", "diffHunk": "@@ -0,0 +1,18 @@\n+set -x\n+set -e\n+# start artipie\n+docker run --name artipie -d -it -v $(pwd)/artipie.yaml:/etc/artipie.yml -v $(pwd):/var/artipie -p 8080:80 artipie/artipie:latest\n+# wait for container to be ready for the new connections\n+sleep 5\n+# create a file for subsequent publication\n+echo \"hello world\" > text.txt\n+# publish text.txt\n+curl --silent -X PUT --data-binary \"@text.txt\" http://localhost:8080/repo/text.txt\n+# download the file\n+STATUSCODE=$(curl --silent --output /dev/stderr --write-out \"%{http_code}\" -X GET http://localhost:8080/repo/text.txt)\n+# remove container\n+docker rm -f artipie", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fa611eb93663316c8f4b2c0d7e4631452d251ae9"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDI3MjY5NQ==", "bodyText": "@olegmoz, because the second attempt to run the example will fail, a user will be tempted to remove created container manually.", "url": "https://github.com/artipie/artipie/pull/316#discussion_r454272695", "createdAt": "2020-07-14T10:55:47Z", "author": {"login": "Sammers21"}, "path": "examples/binary/run.sh", "diffHunk": "@@ -0,0 +1,18 @@\n+set -x\n+set -e\n+# start artipie\n+docker run --name artipie -d -it -v $(pwd)/artipie.yaml:/etc/artipie.yml -v $(pwd):/var/artipie -p 8080:80 artipie/artipie:latest\n+# wait for container to be ready for the new connections\n+sleep 5\n+# create a file for subsequent publication\n+echo \"hello world\" > text.txt\n+# publish text.txt\n+curl --silent -X PUT --data-binary \"@text.txt\" http://localhost:8080/repo/text.txt\n+# download the file\n+STATUSCODE=$(curl --silent --output /dev/stderr --write-out \"%{http_code}\" -X GET http://localhost:8080/repo/text.txt)\n+# remove container\n+docker rm -f artipie", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDI2MjI5NQ=="}, "originalCommit": {"oid": "fa611eb93663316c8f4b2c0d7e4631452d251ae9"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDMwNzc0OQ==", "bodyText": "@Sammers21 I do not see that often in examples or documentations. Why do you think user will need to run it twice?", "url": "https://github.com/artipie/artipie/pull/316#discussion_r454307749", "createdAt": "2020-07-14T12:07:10Z", "author": {"login": "olegmoz"}, "path": "examples/binary/run.sh", "diffHunk": "@@ -0,0 +1,18 @@\n+set -x\n+set -e\n+# start artipie\n+docker run --name artipie -d -it -v $(pwd)/artipie.yaml:/etc/artipie.yml -v $(pwd):/var/artipie -p 8080:80 artipie/artipie:latest\n+# wait for container to be ready for the new connections\n+sleep 5\n+# create a file for subsequent publication\n+echo \"hello world\" > text.txt\n+# publish text.txt\n+curl --silent -X PUT --data-binary \"@text.txt\" http://localhost:8080/repo/text.txt\n+# download the file\n+STATUSCODE=$(curl --silent --output /dev/stderr --write-out \"%{http_code}\" -X GET http://localhost:8080/repo/text.txt)\n+# remove container\n+docker rm -f artipie", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDI2MjI5NQ=="}, "originalCommit": {"oid": "fa611eb93663316c8f4b2c0d7e4631452d251ae9"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgzMzI3Nzc0OnYy", "diffSide": "RIGHT", "path": "examples/binary/run.sh", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQxMDozOTo1OVrOGxOHdw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQxMDozOTo1OVrOGxOHdw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDI2NDY5NQ==", "bodyText": "@Sammers21 I'd suggest to improve code formatting:\n\nStart each comment with capital letter and end with a dot.\nPut an empty line before each block (before each comment), I believe it will be easier to read and see that comment is related no next line, not previous one.", "url": "https://github.com/artipie/artipie/pull/316#discussion_r454264695", "createdAt": "2020-07-14T10:39:59Z", "author": {"login": "olegmoz"}, "path": "examples/binary/run.sh", "diffHunk": "@@ -0,0 +1,18 @@\n+set -x\n+set -e\n+# start artipie\n+docker run --name artipie -d -it -v $(pwd)/artipie.yaml:/etc/artipie.yml -v $(pwd):/var/artipie -p 8080:80 artipie/artipie:latest\n+# wait for container to be ready for the new connections\n+sleep 5\n+# create a file for subsequent publication\n+echo \"hello world\" > text.txt\n+# publish text.txt\n+curl --silent -X PUT --data-binary \"@text.txt\" http://localhost:8080/repo/text.txt\n+# download the file\n+STATUSCODE=$(curl --silent --output /dev/stderr --write-out \"%{http_code}\" -X GET http://localhost:8080/repo/text.txt)\n+# remove container\n+docker rm -f artipie\n+# make sure status code is 200\n+if test $STATUSCODE -ne 200; then\n+  exit 1\n+fi", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fa611eb93663316c8f4b2c0d7e4631452d251ae9"}, "originalPosition": 18}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgzMzMwMTY4OnYy", "diffSide": "RIGHT", "path": "examples/binary/run.sh", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQxMDo0NzozN1rOGxOWbg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQxMDo0NzozN1rOGxOWbg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDI2ODUyNg==", "bodyText": "@Sammers21 there is a grammar error, the cannot be used with plurals", "url": "https://github.com/artipie/artipie/pull/316#discussion_r454268526", "createdAt": "2020-07-14T10:47:37Z", "author": {"login": "olegmoz"}, "path": "examples/binary/run.sh", "diffHunk": "@@ -0,0 +1,18 @@\n+set -x\n+set -e\n+# start artipie\n+docker run --name artipie -d -it -v $(pwd)/artipie.yaml:/etc/artipie.yml -v $(pwd):/var/artipie -p 8080:80 artipie/artipie:latest\n+# wait for container to be ready for the new connections", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fa611eb93663316c8f4b2c0d7e4631452d251ae9"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgzMzMxNzM1OnYy", "diffSide": "RIGHT", "path": "examples/binary/artipie.yaml", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQxMDo1MjoxN1rOGxOfqQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQxMjowMzo0MFrOGxQo3w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDI3MDg4OQ==", "bodyText": "@Sammers21 I'd suggest to remove not required params from example to make it simple. metrics are not required (the bug has been fixed), layout seems to be flat by default", "url": "https://github.com/artipie/artipie/pull/316#discussion_r454270889", "createdAt": "2020-07-14T10:52:17Z", "author": {"login": "olegmoz"}, "path": "examples/binary/artipie.yaml", "diffHunk": "@@ -0,0 +1,7 @@\n+meta:\n+  storage:\n+    type: fs\n+    path: /var/artipie/configs\n+  metrics:\n+    type: log\n+  layout: flat", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fa611eb93663316c8f4b2c0d7e4631452d251ae9"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDI5MDM4NQ==", "bodyText": "@olegmoz, Metrics have been removed. Layout can't be removed, because it would not work without it.", "url": "https://github.com/artipie/artipie/pull/316#discussion_r454290385", "createdAt": "2020-07-14T11:32:07Z", "author": {"login": "Sammers21"}, "path": "examples/binary/artipie.yaml", "diffHunk": "@@ -0,0 +1,7 @@\n+meta:\n+  storage:\n+    type: fs\n+    path: /var/artipie/configs\n+  metrics:\n+    type: log\n+  layout: flat", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDI3MDg4OQ=="}, "originalCommit": {"oid": "fa611eb93663316c8f4b2c0d7e4631452d251ae9"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDMwNjAxNQ==", "bodyText": "@Sammers21 that's sad, hope there is an issue about it", "url": "https://github.com/artipie/artipie/pull/316#discussion_r454306015", "createdAt": "2020-07-14T12:03:40Z", "author": {"login": "olegmoz"}, "path": "examples/binary/artipie.yaml", "diffHunk": "@@ -0,0 +1,7 @@\n+meta:\n+  storage:\n+    type: fs\n+    path: /var/artipie/configs\n+  metrics:\n+    type: log\n+  layout: flat", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDI3MDg4OQ=="}, "originalCommit": {"oid": "fa611eb93663316c8f4b2c0d7e4631452d251ae9"}, "originalPosition": 7}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2254, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}