{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ4NjkzMTI4", "number": 323, "title": "Migrate docker image to jdk with JEP 358", "bodyText": "In this PR:\n\ndocker container is based on JDK 14\nenabled JEP 358 with Helpful NullPointerExceptions\nintroduced variable JVM_OPTS variable, allowing users to pass various JVM flags for tuning\n\nCloses #322.", "createdAt": "2020-07-14T07:12:00Z", "url": "https://github.com/artipie/artipie/pull/323", "merged": true, "mergeCommit": {"oid": "8af3523294aaa931b70416bcfb772152c673a90c"}, "closed": true, "closedAt": "2020-07-15T10:07:32Z", "author": {"login": "Sammers21"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc0wl5jgH2gAyNDQ4NjkzMTI4OmI4ZWIzOGJkNTgwMDVjNTQ5YzhmYjZhNDRiNDZjNWRiNzZmNDNkZGI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc1Hl0rgFqTQ0ODgwMzQ0Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b8eb38bd58005c549c8fb6a44b46c5db76f43ddb", "author": {"user": {"login": "Sammers21", "name": "Pavel Drankov"}}, "url": "https://github.com/artipie/artipie/commit/b8eb38bd58005c549c8fb6a44b46c5db76f43ddb", "committedDate": "2020-07-14T07:06:59Z", "message": "#322 - migrate docker image to jdk with JEP 358"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2e1628344c118b9008c3d6a5fd7af97318302cbe", "author": {"user": {"login": "Sammers21", "name": "Pavel Drankov"}}, "url": "https://github.com/artipie/artipie/commit/2e1628344c118b9008c3d6a5fd7af97318302cbe", "committedDate": "2020-07-14T07:10:49Z", "message": "#322 - make ENTRYPOINT a one liner"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d2d6dc2b6ddbb6e32a796238d309f63d6500042c", "author": {"user": {"login": "Sammers21", "name": "Pavel Drankov"}}, "url": "https://github.com/artipie/artipie/commit/d2d6dc2b6ddbb6e32a796238d309f63d6500042c", "committedDate": "2020-07-14T07:22:00Z", "message": "#322 - use shell form for entrypoint"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ3ODU5ODE4", "url": "https://github.com/artipie/artipie/pull/323#pullrequestreview-447859818", "createdAt": "2020-07-14T07:34:59Z", "commit": {"oid": "d2d6dc2b6ddbb6e32a796238d309f63d6500042c"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQwNzozNDo1OVrOGxH1eA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQwNzozNDo1OVrOGxH1eA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDE2MTc4NA==", "bodyText": "@Sammers21 you've introduced env variable called JAVA_OPTS but uses JVM_OPTS", "url": "https://github.com/artipie/artipie/pull/323#discussion_r454161784", "createdAt": "2020-07-14T07:34:59Z", "author": {"login": "g4s8"}, "path": "Dockerfile", "diffHunk": "@@ -6,12 +6,13 @@ COPY src ./src\n RUN mvn versions:set -DnewVersion=${version} && \\\n   mvn package -P assembly\n \n-FROM adoptopenjdk/openjdk13:alpine-jre\n+FROM adoptopenjdk/openjdk14:alpine-jre\n+ENV JAVA_OPTS=\"\"\n LABEL description=\"Artipie binary repository managment tool\"\n LABEL maintainer=\"titantins@gmail.com\"\n LABEL maintainer=\"g4s8.public@gmail.com\"\n COPY --from=build_jar /jar/target/artipie-jar-with-dependencies.jar /usr/lib/artipie.jar\n COPY _config.yml /etc/artipie.yml\n EXPOSE 80\n-ENTRYPOINT [\"java\", \"-jar\", \"/usr/lib/artipie.jar\"]\n+ENTRYPOINT java $JVM_OPTS --enable-preview -XX:+ShowCodeDetailsInExceptionMessages -jar /usr/lib/artipie.jar", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d2d6dc2b6ddbb6e32a796238d309f63d6500042c"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "97909dda60336a6a642fe944070722fa58764ed5", "author": {"user": {"login": "Sammers21", "name": "Pavel Drankov"}}, "url": "https://github.com/artipie/artipie/commit/97909dda60336a6a642fe944070722fa58764ed5", "committedDate": "2020-07-14T07:54:51Z", "message": "#322 - remove entry and move everything to cmd"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ3ODc3ODkz", "url": "https://github.com/artipie/artipie/pull/323#pullrequestreview-447877893", "createdAt": "2020-07-14T08:01:27Z", "commit": {"oid": "97909dda60336a6a642fe944070722fa58764ed5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQwODowMToyOFrOGxIuDw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQwODowMToyOFrOGxIuDw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDE3NjI3MQ==", "bodyText": "I use shell form because there is no different way to pass JVM_OPTS.", "url": "https://github.com/artipie/artipie/pull/323#discussion_r454176271", "createdAt": "2020-07-14T08:01:28Z", "author": {"login": "Sammers21"}, "path": "Dockerfile", "diffHunk": "@@ -6,12 +6,12 @@ COPY src ./src\n RUN mvn versions:set -DnewVersion=${version} && \\\n   mvn package -P assembly\n \n-FROM adoptopenjdk/openjdk13:alpine-jre\n+FROM adoptopenjdk/openjdk14:alpine-jre\n+ENV JAVA_OPTS=\"\"\n LABEL description=\"Artipie binary repository managment tool\"\n LABEL maintainer=\"titantins@gmail.com\"\n LABEL maintainer=\"g4s8.public@gmail.com\"\n COPY --from=build_jar /jar/target/artipie-jar-with-dependencies.jar /usr/lib/artipie.jar\n COPY _config.yml /etc/artipie.yml\n EXPOSE 80\n-ENTRYPOINT [\"java\", \"-jar\", \"/usr/lib/artipie.jar\"]\n-CMD [\"--config-file=/etc/artipie.yml\", \"--port=80\"]\n+CMD java $JVM_OPTS --enable-preview -XX:+ShowCodeDetailsInExceptionMessages -jar /usr/lib/artipie.jar --config-file=/etc/artipie.yml --port=80", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "97909dda60336a6a642fe944070722fa58764ed5"}, "originalPosition": 15}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "305850e30d1a4e75555fa4f1773d6224e84ec758", "author": {"user": {"login": "Sammers21", "name": "Pavel Drankov"}}, "url": "https://github.com/artipie/artipie/commit/305850e30d1a4e75555fa4f1773d6224e84ec758", "committedDate": "2020-07-14T11:47:10Z", "message": "Merge branch 'master' into docker_jdk_14"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "53fc54b0f31e2a5e7c3c86b21207a58a233c925b", "author": {"user": {"login": "Sammers21", "name": "Pavel Drankov"}}, "url": "https://github.com/artipie/artipie/commit/53fc54b0f31e2a5e7c3c86b21207a58a233c925b", "committedDate": "2020-07-14T13:05:32Z", "message": "Merge branch 'master' into docker_jdk_14"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8ee88d3c1fd645e71abd10bc957c6f98ad655f98", "author": {"user": {"login": "Sammers21", "name": "Pavel Drankov"}}, "url": "https://github.com/artipie/artipie/commit/8ee88d3c1fd645e71abd10bc957c6f98ad655f98", "committedDate": "2020-07-15T07:05:45Z", "message": "#322 - fix typo"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3127c2b64e86ac2bc168c3b4f7ff7e0117ea835d", "author": {"user": {"login": "Sammers21", "name": "Pavel Drankov"}}, "url": "https://github.com/artipie/artipie/commit/3127c2b64e86ac2bc168c3b4f7ff7e0117ea835d", "committedDate": "2020-07-15T09:21:38Z", "message": "Merge branch 'master' into docker_jdk_14"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d8b01f0ba4a9e1cea83ae0581b1391c0fe34a8b6", "author": {"user": {"login": "g4s8", "name": "Kirill"}}, "url": "https://github.com/artipie/artipie/commit/d8b01f0ba4a9e1cea83ae0581b1391c0fe34a8b6", "committedDate": "2020-07-15T09:54:28Z", "message": "Merge branch 'master' into docker_jdk_14"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ4ODAzNDQ3", "url": "https://github.com/artipie/artipie/pull/323#pullrequestreview-448803447", "createdAt": "2020-07-15T09:54:43Z", "commit": {"oid": "3127c2b64e86ac2bc168c3b4f7ff7e0117ea835d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3046, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}