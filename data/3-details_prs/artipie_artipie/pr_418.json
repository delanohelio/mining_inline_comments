{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDYzMjkxNTM0", "number": 418, "title": "Rpm proof", "bodyText": "Related to #154", "createdAt": "2020-08-05T10:24:05Z", "url": "https://github.com/artipie/artipie/pull/418", "merged": true, "mergeCommit": {"oid": "6bbadb90b9d9410580a7238a1f2a05458ad9af3f"}, "closed": true, "closedAt": "2020-08-20T09:04:21Z", "author": {"login": "Sammers21"}, "timelineItems": {"totalCount": 19, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc74lLDAH2gAyNDYzMjkxNTM0OjI0MTkyMjM4ZTEwZTA0ZmFiMDY4NTIyYzVhNmVjYjE2OTNkMzIyZjA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdAsa5NAFqTQ3MTQwMDYxOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "24192238e10e04fab068522c5a6ecb1693d322f0", "author": {"user": {"login": "Sammers21", "name": "Pavel Drankov"}}, "url": "https://github.com/artipie/artipie/commit/24192238e10e04fab068522c5a6ecb1693d322f0", "committedDate": "2020-08-05T10:22:54Z", "message": "#154 - initial work on rpm proof"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8c39494e6b4dce10a361a1853fcdab86a0105723", "author": {"user": {"login": "Sammers21", "name": "Pavel Drankov"}}, "url": "https://github.com/artipie/artipie/commit/8c39494e6b4dce10a361a1853fcdab86a0105723", "committedDate": "2020-08-18T13:59:22Z", "message": "#154 - bump rpm version"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4233f85fac7d1ccc47ea796cf3a1c0b0854cf4d6", "author": {"user": {"login": "Sammers21", "name": "Pavel Drankov"}}, "url": "https://github.com/artipie/artipie/commit/4233f85fac7d1ccc47ea796cf3a1c0b0854cf4d6", "committedDate": "2020-08-18T14:56:08Z", "message": "#154 - complete rpm proof"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "602605e9d73b5f8ad4f0d12839232f613fa0f386", "author": {"user": {"login": "Sammers21", "name": "Pavel Drankov"}}, "url": "https://github.com/artipie/artipie/commit/602605e9d73b5f8ad4f0d12839232f613fa0f386", "committedDate": "2020-08-18T14:56:27Z", "message": "Merge branch 'master' into rpm_proof"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcwMjU2NjEy", "url": "https://github.com/artipie/artipie/pull/418#pullrequestreview-470256612", "createdAt": "2020-08-19T08:54:31Z", "commit": {"oid": "602605e9d73b5f8ad4f0d12839232f613fa0f386"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOVQwODo1NDozMlrOHC9x5w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOVQwODo1NDozMlrOHC9x5w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Mjg3MTM5OQ==", "bodyText": "@Sammers21 this line looks massive and difficult (time consuming) to read and understand. Maybe we could to split it into several steps?", "url": "https://github.com/artipie/artipie/pull/418#discussion_r472871399", "createdAt": "2020-08-19T08:54:32Z", "author": {"login": "olenagerasimova"}, "path": "examples/rpm/run.sh", "diffHunk": "@@ -0,0 +1,25 @@\n+set -x\n+set -e\n+\n+# Since we can't run yum on non-rpm based machines\n+# we will use a docker with yum package manager.\n+docker network create --driver bridge artipie-rpm-demo\n+\n+# Start Artipie.\n+docker run --network artipie-rpm-demo --rm --name artipie -d -it -v $(pwd)/artipie.yaml:/etc/artipie.yml -v $(pwd):/var/artipie -p 8080:80 artipie-local\n+\n+# Wait for container to be ready for new connections.\n+sleep 5\n+\n+# Post a wget package.\n+curl -i  -X PUT  --data-binary \"@wget-1.19.5-8.el8_1.1.x86_64.rpm\" http://localhost:8080/my-rpm/wget-1.19.5-8.el8_1.1.x86_64.rpm\n+\n+# Start centos container and install wget from artipie.\n+docker run --network artipie-rpm-demo --rm --name centos -it centos:8 \\\n+ /bin/bash -c \"yum install -y yum-utils ; yum-config-manager --add-repo http://artipie:80/my-rpm/; yum --skip-broken --disablerepo='*' --enablerepo='80_my-rpm_' install wget\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "602605e9d73b5f8ad4f0d12839232f613fa0f386"}, "originalPosition": 19}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "92fc2fe79f8375f537b727151a76ec8cd46cf663", "author": {"user": {"login": "Sammers21", "name": "Pavel Drankov"}}, "url": "https://github.com/artipie/artipie/commit/92fc2fe79f8375f537b727151a76ec8cd46cf663", "committedDate": "2020-08-19T13:26:07Z", "message": "#154 - readability improvements"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b71cd47cf9bb16918bbf5c3be04271d120aecde7", "author": {"user": {"login": "Sammers21", "name": "Pavel Drankov"}}, "url": "https://github.com/artipie/artipie/commit/b71cd47cf9bb16918bbf5c3be04271d120aecde7", "committedDate": "2020-08-19T13:26:33Z", "message": "Merge branch 'rpm_proof' of github.com:Sammers21/artipie into rpm_proof"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7a4bc705168525e79a4e2221b942cb3d5739de0f", "author": {"user": {"login": "Sammers21", "name": "Pavel Drankov"}}, "url": "https://github.com/artipie/artipie/commit/7a4bc705168525e79a4e2221b942cb3d5739de0f", "committedDate": "2020-08-19T13:30:27Z", "message": "#154 - enable rpm proof on pull request"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcwNDY1OTg2", "url": "https://github.com/artipie/artipie/pull/418#pullrequestreview-470465986", "createdAt": "2020-08-19T13:38:28Z", "commit": {"oid": "b71cd47cf9bb16918bbf5c3be04271d120aecde7"}, "state": "DISMISSED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOVQxMzozODoyOFrOHDH1Qw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOVQxMzozODoyOFrOHDH1Qw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzAzNjA5OQ==", "bodyText": "@Sammers21 this test will not fail if any step fails, please use /bin/bash -e -c \"commands1; command2\" to fail CMD on step failure", "url": "https://github.com/artipie/artipie/pull/418#discussion_r473036099", "createdAt": "2020-08-19T13:38:28Z", "author": {"login": "g4s8"}, "path": "examples/rpm/run.sh", "diffHunk": "@@ -16,7 +16,10 @@ curl -i  -X PUT  --data-binary \"@wget-1.19.5-8.el8_1.1.x86_64.rpm\" http://localh\n \n # Start centos container and install wget from artipie.\n docker run --network artipie-rpm-demo --rm --name centos -it centos:8 \\\n- /bin/bash -c \"yum install -y yum-utils ; yum-config-manager --add-repo http://artipie:80/my-rpm/; yum --skip-broken --disablerepo='*' --enablerepo='80_my-rpm_' install wget\"\n+ /bin/bash -c \"\\\n+  yum install -y yum-utils ; \\", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b71cd47cf9bb16918bbf5c3be04271d120aecde7"}, "originalPosition": 15}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "08908473c03bdf0b5fffc8a8cc2aafcc06c1019e", "author": {"user": {"login": "Sammers21", "name": "Pavel Drankov"}}, "url": "https://github.com/artipie/artipie/commit/08908473c03bdf0b5fffc8a8cc2aafcc06c1019e", "committedDate": "2020-08-19T13:40:32Z", "message": "#154 - add -e option"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcwNTMxNjEw", "url": "https://github.com/artipie/artipie/pull/418#pullrequestreview-470531610", "createdAt": "2020-08-19T14:44:31Z", "commit": {"oid": "08908473c03bdf0b5fffc8a8cc2aafcc06c1019e"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxMjkyODM3", "url": "https://github.com/artipie/artipie/pull/418#pullrequestreview-471292837", "createdAt": "2020-08-20T06:52:34Z", "commit": {"oid": "08908473c03bdf0b5fffc8a8cc2aafcc06c1019e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e6ee9ec78e0651bec5b1db9b0ad34d35e124333b", "author": {"user": {"login": "olegmoz", "name": "Oleg Mozzhechkov"}}, "url": "https://github.com/artipie/artipie/commit/e6ee9ec78e0651bec5b1db9b0ad34d35e124333b", "committedDate": "2020-08-20T06:52:42Z", "message": "Merge branch 'master' into rpm_proof"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxMjk2OTQy", "url": "https://github.com/artipie/artipie/pull/418#pullrequestreview-471296942", "createdAt": "2020-08-20T07:00:05Z", "commit": {"oid": "e6ee9ec78e0651bec5b1db9b0ad34d35e124333b"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dd27c875fa5b2640ac78d768b94652b7b9046f94", "author": {"user": {"login": "Sammers21", "name": "Pavel Drankov"}}, "url": "https://github.com/artipie/artipie/commit/dd27c875fa5b2640ac78d768b94652b7b9046f94", "committedDate": "2020-08-20T08:01:04Z", "message": "#154 - pdd ignore examples"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e19cb58022fc3ab48fe1883d3da984b1b0459111", "author": {"user": {"login": "Sammers21", "name": "Pavel Drankov"}}, "url": "https://github.com/artipie/artipie/commit/e19cb58022fc3ab48fe1883d3da984b1b0459111", "committedDate": "2020-08-20T08:01:56Z", "message": "Merge branch 'rpm_proof' of github.com:Sammers21/artipie into rpm_proof"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6b0e3abef1df0618813611a539bf71b60d60dfbe", "author": {"user": {"login": "olegmoz", "name": "Oleg Mozzhechkov"}}, "url": "https://github.com/artipie/artipie/commit/6b0e3abef1df0618813611a539bf71b60d60dfbe", "committedDate": "2020-08-20T08:31:48Z", "message": "Merge branch 'master' into rpm_proof"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f0c8a74928a6d14b84eca32b7ed76e12ea5ef865", "author": {"user": {"login": "Sammers21", "name": "Pavel Drankov"}}, "url": "https://github.com/artipie/artipie/commit/f0c8a74928a6d14b84eca32b7ed76e12ea5ef865", "committedDate": "2020-08-20T08:48:19Z", "message": "#154 - make centos start noninteractive"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxNDAwNjE5", "url": "https://github.com/artipie/artipie/pull/418#pullrequestreview-471400619", "createdAt": "2020-08-20T09:02:26Z", "commit": {"oid": "e19cb58022fc3ab48fe1883d3da984b1b0459111"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3094, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}