{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk2MDMyMDUx", "number": 648, "title": "#647 - document repo perms", "bodyText": "Part of #647\nAdded TOC and documented repo permissions. You can check md here", "createdAt": "2020-10-01T07:28:01Z", "url": "https://github.com/artipie/artipie/pull/648", "merged": true, "mergeCommit": {"oid": "912f2d432f903b6de1b4adc1184999f9b7ba0ffb"}, "closed": true, "closedAt": "2020-10-01T11:50:47Z", "author": {"login": "olenagerasimova"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdOMOYwgH2gAyNDk2MDMyMDUxOmVmYTIxNjhiMjlmZTBlOWJhMDdmMTQwYmNhNWIxZWNiNTgzN2I5MzA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdOQABmgFqTUwMDI2NjA5NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "efa2168b29fe0e9ba07f140bca5b1ecb5837b930", "author": {"user": {"login": "olenagerasimova", "name": "Alena"}}, "url": "https://github.com/artipie/artipie/commit/efa2168b29fe0e9ba07f140bca5b1ecb5837b930", "committedDate": "2020-10-01T07:26:45Z", "message": "#647 - document repo perms"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ae8faedbec7b1ba7bcb4baf79c09786c882814f9", "author": {"user": {"login": "olenagerasimova", "name": "Alena"}}, "url": "https://github.com/artipie/artipie/commit/ae8faedbec7b1ba7bcb4baf79c09786c882814f9", "committedDate": "2020-10-01T07:30:23Z", "message": "#647 - corrections"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAwMTgyMDMx", "url": "https://github.com/artipie/artipie/pull/648#pullrequestreview-500182031", "createdAt": "2020-10-01T09:47:59Z", "commit": {"oid": "ae8faedbec7b1ba7bcb4baf79c09786c882814f9"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQwOTo0Nzo1OVrOHbCyNg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQxMDowMDoyMFrOHbDPTw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODExOTIyMg==", "bodyText": "@olenagerasimova I think we need to drop this \"files repository also supports delete operation\" part. This is general description and I'd omit the detail about current support of operation in repository types. We will just forget this statement is in the documentation and never update it. I suggest we say that \"other specific permissions may be supported in certain repository types\", something like that. WDYT?", "url": "https://github.com/artipie/artipie/pull/648#discussion_r498119222", "createdAt": "2020-10-01T09:47:59Z", "author": {"login": "olegmoz"}, "path": "README.md", "diffHunk": "@@ -115,18 +123,33 @@ docker run -d -v /var/artipie:/var/artipie` -p 80:80 \\\n   artipie/artipie:latest\n ```\n \n-## Metrics\n-\n-You may enable some basic metrics collecting and periodic publishing to application log\n-by adding `metrics` to `meta` section of global configuration file `/etc/artipie.yml`:\n+## Repository permissions\n \n+Permissions for repository operations can be granted in the repo configuration file:\n ```yaml\n-meta:\n-  metrics:\n-    type: log # Metrics type, for now only `log` type is supported\n-    interval: 5 # Publishing interval in seconds, default value is 5\n+repo:\n+  ...\n+  permissions:\n+    jane:\n+      - read\n+      - write\n+    admin:\n+      - \"*\"\n+    /readers:\n+      - read\n ```\n \n+All repositories support `read` and `write` operations, files repository also supports `delete` operation.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ae8faedbec7b1ba7bcb4baf79c09786c882814f9"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODEyMDcxMg==", "bodyText": "@olenagerasimova I think we should tell that no permissions section means that everything is allowed for everyone. And maybe it means that adding permissions section means we add restrictions, not grant permissions.", "url": "https://github.com/artipie/artipie/pull/648#discussion_r498120712", "createdAt": "2020-10-01T09:50:34Z", "author": {"login": "olegmoz"}, "path": "README.md", "diffHunk": "@@ -115,18 +123,33 @@ docker run -d -v /var/artipie:/var/artipie` -p 80:80 \\\n   artipie/artipie:latest\n ```\n \n-## Metrics\n-\n-You may enable some basic metrics collecting and periodic publishing to application log\n-by adding `metrics` to `meta` section of global configuration file `/etc/artipie.yml`:\n+## Repository permissions\n \n+Permissions for repository operations can be granted in the repo configuration file:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ae8faedbec7b1ba7bcb4baf79c09786c882814f9"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODEyNjY3MQ==", "bodyText": "@olenagerasimova I think we need some adjustements to order of items according to importance of feature to users:\n\n\"Storage configuration\" should come first - it's most important part, every user will need to configure storage I believe.\nThen I'd put \"Repository permissions\" before \"Multitenancy\", because configuring permissions is usually required when there more then one team is working with Artipie or it is available to public users from outside of organization. \"Multitenancy\" is feature for even larger installations when there are even there are independent parties are using the same Artipie installation, such as central.artipie.com.\n\nSo the following order in my opinion will make more sense:\n\nStorage configuration\nRepository permissions\nMultitenancy\nMetrics\nArtipie REST API", "url": "https://github.com/artipie/artipie/pull/648#discussion_r498126671", "createdAt": "2020-10-01T10:00:20Z", "author": {"login": "olegmoz"}, "path": "README.md", "diffHunk": "@@ -71,6 +71,14 @@ We recommend you read the \"Architecture\" section in our\n [White Paper](https://github.com/artipie/white-paper) to fully\n understand how Artipie is designed.\n \n+## Contents\n+\n+- [Multitenancy](#multitenancy)\n+- [Repository permissions](#repository-permissions)\n+- [Storage configuration](#storage-configuration)\n+- [Metrics](#metrics)\n+- [Artipie REST API](#artipie-rest-api)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ae8faedbec7b1ba7bcb4baf79c09786c882814f9"}, "originalPosition": 10}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "598b2a2fc4039c75e52d271e008e81620e35ccbd", "author": {"user": {"login": "olenagerasimova", "name": "Alena"}}, "url": "https://github.com/artipie/artipie/commit/598b2a2fc4039c75e52d271e008e81620e35ccbd", "committedDate": "2020-10-01T11:27:58Z", "message": "#647 - CR"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "adc8143fc2a84f3c47d9f42933347cf5b70603f4", "author": {"user": {"login": "olenagerasimova", "name": "Alena"}}, "url": "https://github.com/artipie/artipie/commit/adc8143fc2a84f3c47d9f42933347cf5b70603f4", "committedDate": "2020-10-01T11:30:23Z", "message": "#647 - CR corrections"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAwMjY2MDk1", "url": "https://github.com/artipie/artipie/pull/648#pullrequestreview-500266095", "createdAt": "2020-10-01T11:50:41Z", "commit": {"oid": "adc8143fc2a84f3c47d9f42933347cf5b70603f4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3390, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}