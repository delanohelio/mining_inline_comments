{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIxOTg0OTc3", "number": 171, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQxMzo1NzowNFrOD_ZIHQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQxMzo1NzowNFrOD_ZIHQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY3Nzk4NTU3OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/artipie/YamlSettings.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQxMzo1NzowNFrOGaB_Lg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQxMzo1NzowNFrOGaB_Lg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTk0ODcxOA==", "bodyText": "@olenagerasimova I think if user creates configuration with file type credentials but doesn't specify path, we should not fall back to env credentials but throw an exception (return CompletableFuture.failedFuture()), because it's not a valid scenario, rather administrator mistake.", "url": "https://github.com/artipie/artipie/pull/171#discussion_r429948718", "createdAt": "2020-05-25T13:57:04Z", "author": {"login": "g4s8"}, "path": "src/main/java/com/artipie/YamlSettings.java", "diffHunk": "@@ -55,26 +71,61 @@ public Storage storage() throws IOException {\n         return new YamlStorageSettings(\n             Yaml.createYamlInput(this.content)\n                 .readYamlMapping()\n-                .yamlMapping(\"meta\")\n+                .yamlMapping(YamlSettings.META)\n                 .yamlMapping(\"storage\")\n         ).storage();\n     }\n \n     @Override\n     public CompletionStage<Authentication> auth() throws IOException {\n-        //@checkstyle MethodBodyCommentsCheck (12 lines)\n-        // @todo #146:30min Implement this method to obtain authentications: for now\n-        //  we have AuthFromEnv, which is available when `credentials.type` equals `env`, and\n-        //  AuthFromYaml, which is available when `credentials.type` equals\n-        //  `file` and `credentials.path` specified. New `credentials` section in main artipie\n-        //  config:\n-        //  credentials:\n-        //    # let's support `env` and `file` types for now\n-        //    type: file\n-        //    # file location, storage key, relative to `meta.storage.path`\n-        //    path: _credentials.yml\n-        //  For details check comments in #146.\n-        //  After implementing pass found authentications to slices.\n-        throw new NotImplementedException(\"Not yet implemented\");\n+        final YamlMapping cred = Yaml.createYamlInput(this.content)\n+            .readYamlMapping()\n+            .yamlMapping(YamlSettings.META)\n+            .yamlMapping(\"credentials\");\n+        final CompletionStage<Authentication> res;\n+        final String path = \"path\";\n+        if (cred != null && \"file\".equals(cred.string(\"type\")) && cred.string(path) != null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9420d9eeaf3e812b8953b13f1a1eeac040b022b4"}, "originalPosition": 68}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2402, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}