{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkwODExMTE4", "number": 619, "title": "#616 - Simplify user() method", "bodyText": "Closes #616\nSimplify user() method and get rid of nested if expressions. Also get rid of check(String, String) method and use check() with three params instead.", "createdAt": "2020-09-22T09:33:44Z", "url": "https://github.com/artipie/artipie/pull/619", "merged": true, "mergeCommit": {"oid": "a742335d3bd7dff466843b82ce8de082c640f550"}, "closed": true, "closedAt": "2020-09-24T17:26:46Z", "author": {"login": "genryxy"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdLUnjDAH2gAyNDkwODExMTE4OjUzZTY2NTQyYzMxMTg1Mjc4ZDRkODQxMzQ5NWFjNDA0YzRkYjJhNmE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdMEcP0AH2gAyNDkwODExMTE4OjJhMGIyMmJhN2Q1OTFlYTJhMjE2M2FiMzM1NGEzZWIzNmRhMTNhY2E=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "53e66542c31185278d4d8413495ac404c4db2a6a", "author": {"user": {"login": "genryxy", "name": "Alexander"}}, "url": "https://github.com/artipie/artipie/commit/53e66542c31185278d4d8413495ac404c4db2a6a", "committedDate": "2020-09-22T09:31:42Z", "message": "#616 - Simplify user() method"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk0Mzc5Njcz", "url": "https://github.com/artipie/artipie/pull/619#pullrequestreview-494379673", "createdAt": "2020-09-23T07:46:14Z", "commit": {"oid": "53e66542c31185278d4d8413495ac404c4db2a6a"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yM1QwNzo0NjoxNFrOHWasFA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yM1QwNzo0NjoxNFrOHWasFA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzI2Nzk4OA==", "bodyText": "@genryxy passing nullable type into check method does not seem elegant, and also method with name check does not suppose to extract password type... So, I'd suggest create separate method to obtain password type (simply extract this logic from check) and then call check method with known password type.", "url": "https://github.com/artipie/artipie/pull/619#discussion_r493267988", "createdAt": "2020-09-23T07:46:14Z", "author": {"login": "olenagerasimova"}, "path": "src/main/java/com/artipie/auth/AuthFromYaml.java", "diffHunk": "@@ -74,24 +68,13 @@ public AuthFromYaml(final YamlMapping cred) {\n     public Optional<Authentication.User> user(final String user, final String pass) {\n         final YamlMapping users = this.cred.yamlMapping(\"credentials\");\n         Optional<Authentication.User> res = Optional.empty();\n-        //@checkstyle NestedIfDepthCheck (10 lines)\n         if (users != null && users.yamlMapping(user) != null) {\n             final String stored = users.yamlMapping(user).string(\"pass\");\n-            if (stored != null) {\n-                final String type = users.yamlMapping(user).string(\"type\");\n-                if (type != null) {\n-                    if (check(stored, type, pass)) {\n-                        res = Optional.of(\n-                            new User(user, AuthFromYaml.groups(users.yamlMapping(user)))\n-                        );\n-                    }\n-                } else {\n-                    if (check(stored, pass)) {\n-                        res = Optional.of(\n-                            new User(user, AuthFromYaml.groups(users.yamlMapping(user)))\n-                        );\n-                    }\n-                }\n+            final String type = users.yamlMapping(user).string(\"type\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "53e66542c31185278d4d8413495ac404c4db2a6a"}, "originalPosition": 38}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fe497ed3cb0a85f1ffe1c5812746e0eebce89742", "author": {"user": {"login": "genryxy", "name": "Alexander"}}, "url": "https://github.com/artipie/artipie/commit/fe497ed3cb0a85f1ffe1c5812746e0eebce89742", "committedDate": "2020-09-24T11:44:28Z", "message": "#616 - Review fixes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1b551bc6edb81347d1076bbe7948b91e73939104", "author": {"user": {"login": "genryxy", "name": "Alexander"}}, "url": "https://github.com/artipie/artipie/commit/1b551bc6edb81347d1076bbe7948b91e73939104", "committedDate": "2020-09-24T11:45:55Z", "message": "Merge remote-tracking branch 'upstream/master' into 616-simplify-user"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk1Nzg0OTA4", "url": "https://github.com/artipie/artipie/pull/619#pullrequestreview-495784908", "createdAt": "2020-09-24T17:14:31Z", "commit": {"oid": "1b551bc6edb81347d1076bbe7948b91e73939104"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2a0b22ba7d591ea2a2163ab3354a3eb36da13aca", "author": {"user": {"login": "olenagerasimova", "name": "Alena"}}, "url": "https://github.com/artipie/artipie/commit/2a0b22ba7d591ea2a2163ab3354a3eb36da13aca", "committedDate": "2020-09-24T17:14:48Z", "message": "Merge branch 'master' into 616-simplify-user"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2990, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}