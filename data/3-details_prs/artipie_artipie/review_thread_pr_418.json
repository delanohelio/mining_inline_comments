{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDYzMjkxNTM0", "number": 418, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOVQwODo1NDozMlrOEZ4Zlw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOVQxMzozODoyOFrOEZ-3ww==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk1NTczOTExOnYy", "diffSide": "RIGHT", "path": "examples/rpm/run.sh", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOVQwODo1NDozMlrOHC9x5w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOVQwODo1NDozMlrOHC9x5w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Mjg3MTM5OQ==", "bodyText": "@Sammers21 this line looks massive and difficult (time consuming) to read and understand. Maybe we could to split it into several steps?", "url": "https://github.com/artipie/artipie/pull/418#discussion_r472871399", "createdAt": "2020-08-19T08:54:32Z", "author": {"login": "olenagerasimova"}, "path": "examples/rpm/run.sh", "diffHunk": "@@ -0,0 +1,25 @@\n+set -x\n+set -e\n+\n+# Since we can't run yum on non-rpm based machines\n+# we will use a docker with yum package manager.\n+docker network create --driver bridge artipie-rpm-demo\n+\n+# Start Artipie.\n+docker run --network artipie-rpm-demo --rm --name artipie -d -it -v $(pwd)/artipie.yaml:/etc/artipie.yml -v $(pwd):/var/artipie -p 8080:80 artipie-local\n+\n+# Wait for container to be ready for new connections.\n+sleep 5\n+\n+# Post a wget package.\n+curl -i  -X PUT  --data-binary \"@wget-1.19.5-8.el8_1.1.x86_64.rpm\" http://localhost:8080/my-rpm/wget-1.19.5-8.el8_1.1.x86_64.rpm\n+\n+# Start centos container and install wget from artipie.\n+docker run --network artipie-rpm-demo --rm --name centos -it centos:8 \\\n+ /bin/bash -c \"yum install -y yum-utils ; yum-config-manager --add-repo http://artipie:80/my-rpm/; yum --skip-broken --disablerepo='*' --enablerepo='80_my-rpm_' install wget\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "602605e9d73b5f8ad4f0d12839232f613fa0f386"}, "originalPosition": 19}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk1Njc5OTM5OnYy", "diffSide": "RIGHT", "path": "examples/rpm/run.sh", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOVQxMzozODoyOFrOHDH1Qw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOVQxMzozODoyOFrOHDH1Qw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzAzNjA5OQ==", "bodyText": "@Sammers21 this test will not fail if any step fails, please use /bin/bash -e -c \"commands1; command2\" to fail CMD on step failure", "url": "https://github.com/artipie/artipie/pull/418#discussion_r473036099", "createdAt": "2020-08-19T13:38:28Z", "author": {"login": "g4s8"}, "path": "examples/rpm/run.sh", "diffHunk": "@@ -16,7 +16,10 @@ curl -i  -X PUT  --data-binary \"@wget-1.19.5-8.el8_1.1.x86_64.rpm\" http://localh\n \n # Start centos container and install wget from artipie.\n docker run --network artipie-rpm-demo --rm --name centos -it centos:8 \\\n- /bin/bash -c \"yum install -y yum-utils ; yum-config-manager --add-repo http://artipie:80/my-rpm/; yum --skip-broken --disablerepo='*' --enablerepo='80_my-rpm_' install wget\"\n+ /bin/bash -c \"\\\n+  yum install -y yum-utils ; \\", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b71cd47cf9bb16918bbf5c3be04271d120aecde7"}, "originalPosition": 15}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2307, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}