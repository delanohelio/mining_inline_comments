{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc5NDQ3MzY3", "number": 549, "title": "#544 - Optional permissions in RepoConfig", "bodyText": "Part of #544\nImplementing global permissions support requires special handling of absence of permissions configured in repository. This requires to return Optional<Permissions> in RepoConfig.permissions() method. Logic for extracting permissions part from repo config moved from YamlPermissions to RepoConfig for that", "createdAt": "2020-09-04T08:37:17Z", "url": "https://github.com/artipie/artipie/pull/549", "merged": true, "mergeCommit": {"oid": "43f5b9a29fc179fd1f0968e05ac1c456e7b99fc6"}, "closed": true, "closedAt": "2020-09-09T10:48:38Z", "author": {"login": "olegmoz"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdFhHswABqjM3Mjg2NTQ3Mzg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdHJr9cAH2gAyNDc5NDQ3MzY3OmRlM2E2MTI1YzNmZDU3ZjQ2ZWNmNDU3ZmJkMTk0NWVlNTAyZjIxYmQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5d109221f7bebd2eaebb61cf5ef6c507499c77bc", "author": {"user": {"login": "olegmoz", "name": "Oleg Mozzhechkov"}}, "url": "https://github.com/artipie/artipie/commit/5d109221f7bebd2eaebb61cf5ef6c507499c77bc", "committedDate": "2020-09-04T08:34:52Z", "message": "#544 - Optional permissions in RepoConfig"}, "afterCommit": {"oid": "7d624f1d0d950c42e4851e35f24f96cf1018bbda", "author": {"user": {"login": "olegmoz", "name": "Oleg Mozzhechkov"}}, "url": "https://github.com/artipie/artipie/commit/7d624f1d0d950c42e4851e35f24f96cf1018bbda", "committedDate": "2020-09-04T08:41:40Z", "message": "#544 - Optional permissions in RepoConfig"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f827cc1cb3c51654fe8f911503fc175b91da8beb", "author": {"user": {"login": "olegmoz", "name": "Oleg Mozzhechkov"}}, "url": "https://github.com/artipie/artipie/commit/f827cc1cb3c51654fe8f911503fc175b91da8beb", "committedDate": "2020-09-04T08:48:23Z", "message": "#544 - Optional permissions in RepoConfig"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7d624f1d0d950c42e4851e35f24f96cf1018bbda", "author": {"user": {"login": "olegmoz", "name": "Oleg Mozzhechkov"}}, "url": "https://github.com/artipie/artipie/commit/7d624f1d0d950c42e4851e35f24f96cf1018bbda", "committedDate": "2020-09-04T08:41:40Z", "message": "#544 - Optional permissions in RepoConfig"}, "afterCommit": {"oid": "f827cc1cb3c51654fe8f911503fc175b91da8beb", "author": {"user": {"login": "olegmoz", "name": "Oleg Mozzhechkov"}}, "url": "https://github.com/artipie/artipie/commit/f827cc1cb3c51654fe8f911503fc175b91da8beb", "committedDate": "2020-09-04T08:48:23Z", "message": "#544 - Optional permissions in RepoConfig"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgzNTA1NjUy", "url": "https://github.com/artipie/artipie/pull/549#pullrequestreview-483505652", "createdAt": "2020-09-07T12:09:07Z", "commit": {"oid": "f827cc1cb3c51654fe8f911503fc175b91da8beb"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QxMjowOTowOFrOHN88rw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QxMjowOTowOFrOHN88rw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDM5MjExMQ==", "bodyText": "@olegmoz let's use TestResource from asto to obtain content from config file", "url": "https://github.com/artipie/artipie/pull/549#discussion_r484392111", "createdAt": "2020-09-07T12:09:08Z", "author": {"login": "olenagerasimova"}, "path": "src/test/java/com/artipie/RpPermissionsTest.java", "diffHunk": "@@ -101,4 +97,17 @@ void adminCanDoAnything() {\n         );\n     }\n \n+    /**\n+     * Permissions from repo-full-config.yml example file.\n+     *\n+     * @return Permissions parsed from file.\n+     */\n+    private YamlPermissions permissions() throws IOException {\n+        return new YamlPermissions(\n+            Yaml.createYamlInput(new File(\"src/test/resources/repo-full-config.yml\"))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f827cc1cb3c51654fe8f911503fc175b91da8beb"}, "originalPosition": 77}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ba0d5c762a04499a6b835ecfc515906fdba4d116", "author": {"user": {"login": "olegmoz", "name": "Oleg Mozzhechkov"}}, "url": "https://github.com/artipie/artipie/commit/ba0d5c762a04499a6b835ecfc515906fdba4d116", "committedDate": "2020-09-09T08:19:19Z", "message": "#544 - Changes by review"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg0ODY1NTQy", "url": "https://github.com/artipie/artipie/pull/549#pullrequestreview-484865542", "createdAt": "2020-09-09T10:18:23Z", "commit": {"oid": "ba0d5c762a04499a6b835ecfc515906fdba4d116"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "de3a6125c3fd57f46ecf457fbd1945ee502f21bd", "author": {"user": {"login": "olegmoz", "name": "Oleg Mozzhechkov"}}, "url": "https://github.com/artipie/artipie/commit/de3a6125c3fd57f46ecf457fbd1945ee502f21bd", "committedDate": "2020-09-09T10:31:52Z", "message": "Merge branch 'master' into 544-optional-permissions"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3536, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}