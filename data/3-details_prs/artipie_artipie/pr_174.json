{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIzMjc1ODgz", "number": 174, "title": "enable npm auth and fix path issue", "bodyText": "For #170", "createdAt": "2020-05-26T15:22:14Z", "url": "https://github.com/artipie/artipie/pull/174", "merged": true, "mergeCommit": {"oid": "3538ab068ce1cfd495ea1784033f45b777ff9531"}, "closed": true, "closedAt": "2020-05-27T10:17:38Z", "author": {"login": "brastak"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABclGS8SAH2gAyNDIzMjc1ODgzOjYyMTA2NTk4MTFjMzY0ZmVmNDlmODI2Y2RlMTI5OTI5MjA2YTZiNDA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABclWjFngFqTQxOTA1Mjk1Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "6210659811c364fef49f826cde129929206a6b40", "author": {"user": {"login": "brastak", "name": null}}, "url": "https://github.com/artipie/artipie/commit/6210659811c364fef49f826cde129929206a6b40", "committedDate": "2020-05-26T15:21:24Z", "message": "enable npm auth and fix path issue"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4ODg0NTE3", "url": "https://github.com/artipie/artipie/pull/174#pullrequestreview-418884517", "createdAt": "2020-05-27T06:16:17Z", "commit": {"oid": "6210659811c364fef49f826cde129929206a6b40"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QwNjoxNjoxN1rOGa605A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QwNjoxNzoyOFrOGa62ig==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDg3OTk3Mg==", "bodyText": "@brastak can we parse the path dynamically? It seems to be the same as repository name always, can we use it instead of config param?", "url": "https://github.com/artipie/artipie/pull/174#discussion_r430879972", "createdAt": "2020-05-27T06:16:17Z", "author": {"login": "g4s8"}, "path": "README.md", "diffHunk": "@@ -182,19 +182,16 @@ Try this `npm.yaml` file:\n ```yaml\n repo:\n   type: npm\n+  path: /npm", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6210659811c364fef49f826cde129929206a6b40"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDg4MDM5NA==", "bodyText": "@brastak why do we need both: storage and Npm(storage)? It seems we can pass only storage and construct Npm(storage) internally in NpmSlice, WDYT?", "url": "https://github.com/artipie/artipie/pull/174#discussion_r430880394", "createdAt": "2020-05-27T06:17:28Z", "author": {"login": "g4s8"}, "path": "src/main/java/com/artipie/SliceFromConfig.java", "diffHunk": "@@ -90,9 +91,16 @@ public SliceFromConfig(final RepoConfig config, final Vertx vertx,\n                         \"file\", config -> CompletableFuture.completedStage(new FilesSlice(storage, permissions, auth))\n                     ),\n                     new MapEntry<>(\n-                        \"npm\", config -> CompletableFuture.completedStage(\n-                        new NpmSlice(new Npm(storage), storage)\n-                    )\n+                        \"npm\", config -> config.path().thenCombine(\n+                            config.settings(),\n+                            (path, settings) -> new NpmSlice(\n+                                path,\n+                                new Npm(storage),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6210659811c364fef49f826cde129929206a6b40"}, "originalPosition": 19}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5MDUyOTU2", "url": "https://github.com/artipie/artipie/pull/174#pullrequestreview-419052956", "createdAt": "2020-05-27T10:17:31Z", "commit": {"oid": "6210659811c364fef49f826cde129929206a6b40"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3199, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}