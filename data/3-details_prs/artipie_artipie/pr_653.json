{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk2NzY5OTMy", "number": 653, "title": "#602 - push package NugetITCase", "bodyText": "Part of #602\nVerify that pushing package with enable authentication is working.", "createdAt": "2020-10-02T08:42:35Z", "url": "https://github.com/artipie/artipie/pull/653", "merged": true, "mergeCommit": {"oid": "2bc0e20a6c4eb71b1033cfe30667226e5567df46"}, "closed": true, "closedAt": "2020-10-02T11:04:18Z", "author": {"login": "genryxy"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdLT5FagH2gAyNDk2NzY5OTMyOjA2ZGZlOThkNzZkMGE4ZWYwNGIxNzA2YWRkODVjYzFiOTZjYTJlMjE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdOj7zBAFqTUwMTA0NDM0Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "06dfe98d76d0a8ef04b1706add85cc1b96ca2e21", "author": {"user": {"login": "genryxy", "name": "Alexander"}}, "url": "https://github.com/artipie/artipie/commit/06dfe98d76d0a8ef04b1706add85cc1b96ca2e21", "committedDate": "2020-09-22T08:40:57Z", "message": "#602 - Attempt to make IT for centos8"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2abe9b5cbee6f79954d994c24f319dfac63e6a75", "author": {"user": {"login": "genryxy", "name": "Alexander"}}, "url": "https://github.com/artipie/artipie/commit/2abe9b5cbee6f79954d994c24f319dfac63e6a75", "committedDate": "2020-09-25T08:27:38Z", "message": "#602 - Deleted unnecessary comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3f5318b04455218aed9038b2952eabe53e3f7152", "author": {"user": {"login": "genryxy", "name": "Alexander"}}, "url": "https://github.com/artipie/artipie/commit/3f5318b04455218aed9038b2952eabe53e3f7152", "committedDate": "2020-10-01T08:27:13Z", "message": "Merge remote-tracking branch 'upstream/master' into 602-nugetITCase"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2262d38cf5c65b5c901c11393000614228e4f474", "author": {"user": {"login": "genryxy", "name": "Alexander"}}, "url": "https://github.com/artipie/artipie/commit/2262d38cf5c65b5c901c11393000614228e4f474", "committedDate": "2020-10-02T08:38:12Z", "message": "#602 - Push package"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "788a0a1074f100bdd1101f5ff814b60d153df134", "author": {"user": {"login": "genryxy", "name": "Alexander"}}, "url": "https://github.com/artipie/artipie/commit/788a0a1074f100bdd1101f5ff814b60d153df134", "committedDate": "2020-10-02T08:38:54Z", "message": "Merge remote-tracking branch 'upstream/master' into 602-nugetITCase"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e0416b23ce8b9bce3862e096bf6924fe68dd7c94", "author": {"user": {"login": "genryxy", "name": "Alexander"}}, "url": "https://github.com/artipie/artipie/commit/e0416b23ce8b9bce3862e096bf6924fe68dd7c94", "committedDate": "2020-10-02T08:49:09Z", "message": "#602 - Exclude directory in .pdd"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAwOTYxNzA3", "url": "https://github.com/artipie/artipie/pull/653#pullrequestreview-500961707", "createdAt": "2020-10-02T08:48:05Z", "commit": {"oid": "788a0a1074f100bdd1101f5ff814b60d153df134"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQwODo0ODowNlrOHbl4mQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQwODo1MDowNVrOHbl8lg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODY5NDI5Nw==", "bodyText": "@genryxy this method does not return anything, but does an action: creates NuGet config file. It should be renamed to indicate that", "url": "https://github.com/artipie/artipie/pull/653#discussion_r498694297", "createdAt": "2020-10-02T08:48:06Z", "author": {"login": "olegmoz"}, "path": "src/test/java/com/artipie/nuget/NugetITCase.java", "diffHunk": "@@ -0,0 +1,158 @@\n+/*\n+ * The MIT License (MIT)\n+ *\n+ * Copyright (c) 2020 artipie.com\n+ *\n+ * Permission is hereby granted, free of charge, to any person obtaining a copy\n+ * of this software and associated documentation files (the \"Software\"), to deal\n+ * in the Software without restriction, including without limitation the rights\n+ * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n+ * copies of the Software, and to permit persons to whom the Software is\n+ * furnished to do so, subject to the following conditions:\n+ *\n+ * The above copyright notice and this permission notice shall be included\n+ * in all copies or substantial portions of the Software.\n+ *\n+ * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+ * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+ * FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE\n+ * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+ * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+ * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n+ * SOFTWARE.\n+ */\n+package com.artipie.nuget;\n+\n+import com.amihaiemil.eoyaml.Yaml;\n+import com.artipie.ArtipieServer;\n+import com.jcabi.log.Logger;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.util.UUID;\n+import org.hamcrest.MatcherAssert;\n+import org.hamcrest.core.StringContains;\n+import org.junit.jupiter.api.AfterEach;\n+import org.junit.jupiter.api.BeforeEach;\n+import org.junit.jupiter.api.Test;\n+import org.junit.jupiter.api.io.TempDir;\n+import org.testcontainers.Testcontainers;\n+import org.testcontainers.containers.GenericContainer;\n+\n+/**\n+ * Integration tests for Nuget repository.\n+ * @since 0.11\n+ */\n+@SuppressWarnings(\"PMD.AvoidDuplicateLiterals\")\n+final class NugetITCase {\n+\n+    /**\n+     * Temporary directory for all tests.\n+     * @checkstyle VisibilityModifierCheck (3 lines)\n+     */\n+    @TempDir\n+    Path tmp;\n+\n+    /**\n+     * Tested Artipie server.\n+     */\n+    private ArtipieServer server;\n+\n+    /**\n+     * Container.\n+     */\n+    private GenericContainer<?> cntn;\n+\n+    /**\n+     * Artipie server port.\n+     */\n+    private int port;\n+\n+    @BeforeEach\n+    void init() throws Exception {\n+        final String name = \"my-nuget\";\n+        this.server = new ArtipieServer(this.tmp, name, this.config());\n+        this.port = this.server.start();\n+        Testcontainers.exposeHostPorts(this.port);\n+        Files.write(\n+            this.tmp.resolve(String.format(\"repos/%s.yaml\", name)),\n+            this.config().getBytes()\n+        );\n+        this.nugetConfig();\n+        this.cntn = new GenericContainer<>(\"mcr.microsoft.com/dotnet/sdk:5.0\")\n+            .withCommand(\"tail\", \"-f\", \"/dev/null\")\n+            .withWorkingDirectory(\"/home/\")\n+            .withFileSystemBind(this.tmp.toString(), \"/home\");\n+        this.cntn.start();\n+    }\n+\n+    @AfterEach\n+    void tearDown() {\n+        this.server.stop();\n+        this.cntn.stop();\n+    }\n+\n+    @Test\n+    void shouldPushPackage() throws Exception {\n+        MatcherAssert.assertThat(\n+            this.pushPackage(),\n+            new StringContains(\"Your package was pushed.\")\n+        );\n+    }\n+\n+    private void nugetConfig() throws Exception {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "788a0a1074f100bdd1101f5ff814b60d153df134"}, "originalPosition": 102}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODY5NDkxMw==", "bodyText": "@genryxy @since tag value is off, it should be 0.12 now", "url": "https://github.com/artipie/artipie/pull/653#discussion_r498694913", "createdAt": "2020-10-02T08:49:18Z", "author": {"login": "olegmoz"}, "path": "src/test/java/com/artipie/nuget/NewtonJsonResource.java", "diffHunk": "@@ -0,0 +1,61 @@\n+/*\n+ * The MIT License (MIT)\n+ *\n+ * Copyright (c) 2020 artipie.com\n+ *\n+ * Permission is hereby granted, free of charge, to any person obtaining a copy\n+ * of this software and associated documentation files (the \"Software\"), to deal\n+ * in the Software without restriction, including without limitation the rights\n+ * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n+ * copies of the Software, and to permit persons to whom the Software is\n+ * furnished to do so, subject to the following conditions:\n+ *\n+ * The above copyright notice and this permission notice shall be included\n+ * in all copies or substantial portions of the Software.\n+ *\n+ * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+ * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+ * FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE\n+ * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+ * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+ * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n+ * SOFTWARE.\n+ */\n+package com.artipie.nuget;\n+\n+import com.google.common.io.ByteStreams;\n+import org.cactoos.io.ResourceOf;\n+\n+/**\n+ * Newton.Json package resource.\n+ *\n+ * @since 0.1", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "788a0a1074f100bdd1101f5ff814b60d153df134"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODY5NTMxOA==", "bodyText": "@genryxy  @since tag value is off, it should be 0.12 now", "url": "https://github.com/artipie/artipie/pull/653#discussion_r498695318", "createdAt": "2020-10-02T08:50:05Z", "author": {"login": "olegmoz"}, "path": "src/test/java/com/artipie/nuget/NugetITCase.java", "diffHunk": "@@ -0,0 +1,158 @@\n+/*\n+ * The MIT License (MIT)\n+ *\n+ * Copyright (c) 2020 artipie.com\n+ *\n+ * Permission is hereby granted, free of charge, to any person obtaining a copy\n+ * of this software and associated documentation files (the \"Software\"), to deal\n+ * in the Software without restriction, including without limitation the rights\n+ * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n+ * copies of the Software, and to permit persons to whom the Software is\n+ * furnished to do so, subject to the following conditions:\n+ *\n+ * The above copyright notice and this permission notice shall be included\n+ * in all copies or substantial portions of the Software.\n+ *\n+ * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+ * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+ * FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE\n+ * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+ * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+ * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n+ * SOFTWARE.\n+ */\n+package com.artipie.nuget;\n+\n+import com.amihaiemil.eoyaml.Yaml;\n+import com.artipie.ArtipieServer;\n+import com.jcabi.log.Logger;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.util.UUID;\n+import org.hamcrest.MatcherAssert;\n+import org.hamcrest.core.StringContains;\n+import org.junit.jupiter.api.AfterEach;\n+import org.junit.jupiter.api.BeforeEach;\n+import org.junit.jupiter.api.Test;\n+import org.junit.jupiter.api.io.TempDir;\n+import org.testcontainers.Testcontainers;\n+import org.testcontainers.containers.GenericContainer;\n+\n+/**\n+ * Integration tests for Nuget repository.\n+ * @since 0.11", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "788a0a1074f100bdd1101f5ff814b60d153df134"}, "originalPosition": 43}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c08b1a216f46a7f881eaedee65a7d1719be7c453", "author": {"user": {"login": "genryxy", "name": "Alexander"}}, "url": "https://github.com/artipie/artipie/commit/c08b1a216f46a7f881eaedee65a7d1719be7c453", "committedDate": "2020-10-02T08:52:58Z", "message": "#602 - Exclude directory"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eaa1d2ab5e388f51485d76e054373366bcb5ac75", "author": {"user": {"login": "genryxy", "name": "Alexander"}}, "url": "https://github.com/artipie/artipie/commit/eaa1d2ab5e388f51485d76e054373366bcb5ac75", "committedDate": "2020-10-02T08:57:26Z", "message": "#602 - Change version, rename method"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c9965cbc103706b8f7bc574b088253fa7933f749", "author": {"user": {"login": "genryxy", "name": "Alexander"}}, "url": "https://github.com/artipie/artipie/commit/c9965cbc103706b8f7bc574b088253fa7933f749", "committedDate": "2020-10-02T09:10:40Z", "message": "#602 - Enable on Linux and Mac"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAwOTkyMDE5", "url": "https://github.com/artipie/artipie/pull/653#pullrequestreview-500992019", "createdAt": "2020-10-02T09:34:33Z", "commit": {"oid": "c9965cbc103706b8f7bc574b088253fa7933f749"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQwOTozNDozM1rOHbnSQw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQwOTozNDozM1rOHbnSQw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODcxNzI1MQ==", "bodyText": "@genryxy probably you need to enable the test on windows only, not enable it unix-like systems", "url": "https://github.com/artipie/artipie/pull/653#discussion_r498717251", "createdAt": "2020-10-02T09:34:33Z", "author": {"login": "olegmoz"}, "path": "src/test/java/com/artipie/nuget/NugetITCase.java", "diffHunk": "@@ -43,6 +45,7 @@\n  * @since 0.12\n  */\n @SuppressWarnings(\"PMD.AvoidDuplicateLiterals\")\n+@EnabledOnOs({OS.LINUX, OS.MAC})", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c9965cbc103706b8f7bc574b088253fa7933f749"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAxMDQ0MzQy", "url": "https://github.com/artipie/artipie/pull/653#pullrequestreview-501044342", "createdAt": "2020-10-02T11:04:10Z", "commit": {"oid": "c9965cbc103706b8f7bc574b088253fa7933f749"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3395, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}