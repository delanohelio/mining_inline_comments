{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg0OTIzODQw", "number": 577, "title": "#499: \"flat\" set as default layout", "bodyText": "#499 Fixed and Reworked.", "createdAt": "2020-09-11T10:40:00Z", "url": "https://github.com/artipie/artipie/pull/577", "merged": true, "mergeCommit": {"oid": "5d2c404a9e70c0f18fb2f5878d422248731b63bf"}, "closed": true, "closedAt": "2020-09-16T13:07:57Z", "author": {"login": "IlyaMoskva"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdHy_XLAH2gAyNDg0OTIzODQwOmNkM2Q5MTg5ZmYyMTg2YjE4YjdkYmMyYjUwODI5YzAxMWI4Zjg4NTc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdJb8-6AH2gAyNDg0OTIzODQwOjg2ZGRkYTYxZTM3N2FiZjc1ZTRhODE0MjcyNTczZGU1MDFhNjZkYWM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "cd3d9189ff2186b18b7dbc2b50829c011b8f8857", "author": {"user": null}, "url": "https://github.com/artipie/artipie/commit/cd3d9189ff2186b18b7dbc2b50829c011b8f8857", "committedDate": "2020-09-11T10:39:10Z", "message": "Issue #499: \"flat\" set as default layout\n\n(cherry picked from commit b0e3eaf5300aaf8605d20b5277cf6bea5aed829e)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ef6408f49c1bb9d30d98386dc365cdbd55ed877c", "author": {"user": null}, "url": "https://github.com/artipie/artipie/commit/ef6408f49c1bb9d30d98386dc365cdbd55ed877c", "committedDate": "2020-09-14T08:37:19Z", "message": "Fix: Qulice"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg3NTQ5Mjg2", "url": "https://github.com/artipie/artipie/pull/577#pullrequestreview-487549286", "createdAt": "2020-09-14T08:53:07Z", "commit": {"oid": "ef6408f49c1bb9d30d98386dc365cdbd55ed877c"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQwODo1MzowOFrOHRKJUA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQwODo1NDo1MlrOHRKNgw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Nzc1NDA2NA==", "bodyText": "@IlyaMoskva do we really need to provide all that content to YamlSettings? I'd suggest to remove not required lines from the test to make it more focused and clear", "url": "https://github.com/artipie/artipie/pull/577#discussion_r487754064", "createdAt": "2020-09-14T08:53:08Z", "author": {"login": "olegmoz"}, "path": "src/test/java/com/artipie/YamlSettingsTest.java", "diffHunk": "@@ -46,12 +46,27 @@\n  *\n  * @since 0.1\n  * @checkstyle MethodNameCheck (500 lines)\n- * @todo #187:30min Add a test for layout structure, it can be either `flat` or `org`. If it's\n- *  omitted, it should treated as a `flat` layout. See RepoLayout javadocs for more details.\n  */\n-@SuppressWarnings(\"PMD.AvoidDuplicateLiterals\")\n+@SuppressWarnings({\"PMD.AvoidDuplicateLiterals\", \"PMD.TooManyMethods\"})\n class YamlSettingsTest {\n \n+    @Test\n+    public void shouldSetFlatAsDefaultLayout() throws Exception {\n+        final YamlSettings settings = new YamlSettings(\n+            String.join(\n+                \"\",\n+                \"meta:\\n\",\n+                \"  storage:\\n\",\n+                \"    type: s3\\n\",\n+                \"    path: /var/artipie/configs\\n\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ef6408f49c1bb9d30d98386dc365cdbd55ed877c"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Nzc1NTEzOQ==", "bodyText": "@IlyaMoskva using new IsEqual<>() here will be more in line with code style of the project, see https://github.com/artipie/artipie/blob/master/CONTRIBUTING.md#code-style", "url": "https://github.com/artipie/artipie/pull/577#discussion_r487755139", "createdAt": "2020-09-14T08:54:52Z", "author": {"login": "olegmoz"}, "path": "src/test/java/com/artipie/YamlSettingsTest.java", "diffHunk": "@@ -46,12 +46,27 @@\n  *\n  * @since 0.1\n  * @checkstyle MethodNameCheck (500 lines)\n- * @todo #187:30min Add a test for layout structure, it can be either `flat` or `org`. If it's\n- *  omitted, it should treated as a `flat` layout. See RepoLayout javadocs for more details.\n  */\n-@SuppressWarnings(\"PMD.AvoidDuplicateLiterals\")\n+@SuppressWarnings({\"PMD.AvoidDuplicateLiterals\", \"PMD.TooManyMethods\"})\n class YamlSettingsTest {\n \n+    @Test\n+    public void shouldSetFlatAsDefaultLayout() throws Exception {\n+        final YamlSettings settings = new YamlSettings(\n+            String.join(\n+                \"\",\n+                \"meta:\\n\",\n+                \"  storage:\\n\",\n+                \"    type: s3\\n\",\n+                \"    path: /var/artipie/configs\\n\"\n+            )\n+        );\n+        MatcherAssert.assertThat(\n+            settings.layout(),\n+            Matchers.is(\"flat\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ef6408f49c1bb9d30d98386dc365cdbd55ed877c"}, "originalPosition": 24}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "394b55b58f123a37728d91509d1efd8a8812b76c", "author": {"user": null}, "url": "https://github.com/artipie/artipie/commit/394b55b58f123a37728d91509d1efd8a8812b76c", "committedDate": "2020-09-14T15:50:23Z", "message": "Issue #499: Fix code style"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg4Mzc4Njg0", "url": "https://github.com/artipie/artipie/pull/577#pullrequestreview-488378684", "createdAt": "2020-09-15T06:58:40Z", "commit": {"oid": "394b55b58f123a37728d91509d1efd8a8812b76c"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQwNjo1ODo0MFrOHRzbsA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQwNjo1ODo0MFrOHRzbsA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODQzMDUxMg==", "bodyText": "@IlyaMoskva and is storage: part really needed? We do not access storage in this test and I believe the string could be simplified to just `\"meta:\\n\"", "url": "https://github.com/artipie/artipie/pull/577#discussion_r488430512", "createdAt": "2020-09-15T06:58:40Z", "author": {"login": "olegmoz"}, "path": "src/test/java/com/artipie/YamlSettingsTest.java", "diffHunk": "@@ -56,14 +57,12 @@ public void shouldSetFlatAsDefaultLayout() throws Exception {\n             String.join(\n                 \"\",\n                 \"meta:\\n\",\n-                \"  storage:\\n\",\n-                \"    type: s3\\n\",\n-                \"    path: /var/artipie/configs\\n\"\n+                \"  storage:\\n\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "394b55b58f123a37728d91509d1efd8a8812b76c"}, "originalPosition": 15}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg5NTk0OTA3", "url": "https://github.com/artipie/artipie/pull/577#pullrequestreview-489594907", "createdAt": "2020-09-16T12:56:31Z", "commit": {"oid": "394b55b58f123a37728d91509d1efd8a8812b76c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "86ddda61e377abf75e4a814272573de501a66dac", "author": {"user": {"login": "olegmoz", "name": "Oleg Mozzhechkov"}}, "url": "https://github.com/artipie/artipie/commit/86ddda61e377abf75e4a814272573de501a66dac", "committedDate": "2020-09-16T12:56:36Z", "message": "Merge branch 'master' into layout"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3558, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}