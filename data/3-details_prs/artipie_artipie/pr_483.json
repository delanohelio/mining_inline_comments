{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcxNTk1MTU1", "number": 483, "title": "php composer proof", "bodyText": "Related to #154", "createdAt": "2020-08-21T12:08:36Z", "url": "https://github.com/artipie/artipie/pull/483", "merged": true, "mergeCommit": {"oid": "071b1f14aa500dc0ae412379c777ed95ec7911e6"}, "closed": true, "closedAt": "2020-08-21T13:07:36Z", "author": {"login": "Sammers21"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdBDrLNAH2gAyNDcxNTk1MTU1OmY5OTk4MjBlM2EwMmEyOTEwMWY4ZWE3NzM3MWQxYWFmZjhkYmI4NjM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdBEcy_AH2gAyNDcxNTk1MTU1Ojc3MGI0NjkzMzMyMGI1ZTVlMGY3OTg5MWI2MGE5ODM2NTQzZjllNmU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "f999820e3a02a29101f8ea77371d1aaff8dbb863", "author": {"user": {"login": "Sammers21", "name": "Pavel Drankov"}}, "url": "https://github.com/artipie/artipie/commit/f999820e3a02a29101f8ea77371d1aaff8dbb863", "committedDate": "2020-08-21T12:08:02Z", "message": "#154 - php-composer proof"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "279e7e9bad6e51c5bf3ad0640742ec5004833366", "author": {"user": {"login": "Sammers21", "name": "Pavel Drankov"}}, "url": "https://github.com/artipie/artipie/commit/279e7e9bad6e51c5bf3ad0640742ec5004833366", "committedDate": "2020-08-21T12:09:20Z", "message": "#154 - enable php proof on pull request"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "47332db742eb4f223334760da17a05cf389af584", "author": {"user": {"login": "Sammers21", "name": "Pavel Drankov"}}, "url": "https://github.com/artipie/artipie/commit/47332db742eb4f223334760da17a05cf389af584", "committedDate": "2020-08-21T12:11:14Z", "message": "#154 - readability improvements"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d33837f60e52c857085044c215fc1dd8bc0b02ca", "author": {"user": {"login": "Sammers21", "name": "Pavel Drankov"}}, "url": "https://github.com/artipie/artipie/commit/d33837f60e52c857085044c215fc1dd8bc0b02ca", "committedDate": "2020-08-21T12:13:12Z", "message": "#154 - polishing"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcyNDQzMzUx", "url": "https://github.com/artipie/artipie/pull/483#pullrequestreview-472443351", "createdAt": "2020-08-21T12:23:15Z", "commit": {"oid": "d33837f60e52c857085044c215fc1dd8bc0b02ca"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMVQxMjoyMzoxNlrOHErG3g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMVQxMjoyNDoyNVrOHErJAA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDY2MjYyMg==", "bodyText": "@Sammers21 guess this command is to clean up after previous run? If so, would not it be better move it down to somewhere around docker stop artipie command", "url": "https://github.com/artipie/artipie/pull/483#discussion_r474662622", "createdAt": "2020-08-21T12:23:16Z", "author": {"login": "olegmoz"}, "path": "examples/php/run.sh", "diffHunk": "@@ -0,0 +1,35 @@\n+set -x\n+set -e\n+\n+# Start artipie.\n+docker run --rm --name artipie -d -it -v $(pwd)/artipie.yaml:/etc/artipie.yml -v $(pwd):/var/artipie -p 8080:80 artipie/artipie:latest\n+\n+# Wait for container to be ready for new connections.\n+sleep 5\n+\n+# Make a zip package and post it to artipie binary storage.\n+zip -r sample-for-deployment.zip sample-for-deployment\n+curl -i -X PUT --data-binary \"@sample-for-deployment.zip\" http://localhost:8080/bin/sample-for-deployment.zip\n+\n+# Post the package to php-composer-repository.\n+curl -i -X POST  http://localhost:8080/my-php \\\n+--request PUT \\\n+-H \"Expect:\" \\\n+-H 'Content-Type: application/json; charset=utf-8' \\\n+--data-binary @- << EOF\n+{\n+  \"name\": \"artipie/sample_composer_package\",\n+  \"version\": \"1.0\",\n+  \"dist\": {\n+    \"url\": \"http://localhost:8080/bin/sample-for-deployment.zip\",\n+    \"type\": \"zip\"\n+  }\n+}\n+EOF\n+\n+# Install the deployed package.\n+cd sample-consumer; rm -rf vendor/ composer.lock", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d33837f60e52c857085044c215fc1dd8bc0b02ca"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDY2MzE2OA==", "bodyText": "@Sammers21 are these headers required? I'd keep the example as simple and short as possible and removed everything that is not mandatory", "url": "https://github.com/artipie/artipie/pull/483#discussion_r474663168", "createdAt": "2020-08-21T12:24:25Z", "author": {"login": "olegmoz"}, "path": "examples/php/run.sh", "diffHunk": "@@ -0,0 +1,35 @@\n+set -x\n+set -e\n+\n+# Start artipie.\n+docker run --rm --name artipie -d -it -v $(pwd)/artipie.yaml:/etc/artipie.yml -v $(pwd):/var/artipie -p 8080:80 artipie/artipie:latest\n+\n+# Wait for container to be ready for new connections.\n+sleep 5\n+\n+# Make a zip package and post it to artipie binary storage.\n+zip -r sample-for-deployment.zip sample-for-deployment\n+curl -i -X PUT --data-binary \"@sample-for-deployment.zip\" http://localhost:8080/bin/sample-for-deployment.zip\n+\n+# Post the package to php-composer-repository.\n+curl -i -X POST  http://localhost:8080/my-php \\\n+--request PUT \\\n+-H \"Expect:\" \\\n+-H 'Content-Type: application/json; charset=utf-8' \\", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d33837f60e52c857085044c215fc1dd8bc0b02ca"}, "originalPosition": 18}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8b77c3586af163474019ecc18e1d6cf7cc34e306", "author": {"user": {"login": "Sammers21", "name": "Pavel Drankov"}}, "url": "https://github.com/artipie/artipie/commit/8b77c3586af163474019ecc18e1d6cf7cc34e306", "committedDate": "2020-08-21T12:30:14Z", "message": "#154 - remove non-mandatory headers"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcyNDY4MTU4", "url": "https://github.com/artipie/artipie/pull/483#pullrequestreview-472468158", "createdAt": "2020-08-21T13:02:06Z", "commit": {"oid": "8b77c3586af163474019ecc18e1d6cf7cc34e306"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "770b46933320b5e5e0f79891b60a9836543f9e6e", "author": {"user": {"login": "olegmoz", "name": "Oleg Mozzhechkov"}}, "url": "https://github.com/artipie/artipie/commit/770b46933320b5e5e0f79891b60a9836543f9e6e", "committedDate": "2020-08-21T13:02:14Z", "message": "Merge branch 'master' into php_proof"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3488, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}