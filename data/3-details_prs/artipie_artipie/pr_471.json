{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcwODA0NjI5", "number": 471, "title": "#465 - fix faulty test", "bodyText": "Closes #465\nReplace param of constructor / with null.", "createdAt": "2020-08-20T10:06:16Z", "url": "https://github.com/artipie/artipie/pull/471", "merged": true, "mergeCommit": {"oid": "527c38c4b69bc37b7a2aa2f7cef3bfb091d47b87"}, "closed": true, "closedAt": "2020-08-20T11:48:22Z", "author": {"login": "genryxy"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdAtGOpAH2gAyNDcwODA0NjI5OjJhNjA4ZTQyMDZkZjE2ZWRlZjgyMzYwMzdhMTMwMzU3YzZkMmZhYmQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdAuyrEgFqTQ3MTUxNDc2MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2a608e4206df16edef8236037a130357c6d2fabd", "author": {"user": {"login": "genryxy", "name": "Alexander"}}, "url": "https://github.com/artipie/artipie/commit/2a608e4206df16edef8236037a130357c6d2fabd", "committedDate": "2020-08-20T09:49:46Z", "message": "#465 - fix faulty test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "624362ba042dfbce7c40a9f52d575a1d35703c54", "author": {"user": {"login": "genryxy", "name": "Alexander"}}, "url": "https://github.com/artipie/artipie/commit/624362ba042dfbce7c40a9f52d575a1d35703c54", "committedDate": "2020-08-20T09:50:11Z", "message": "Merge remote-tracking branch 'upstream/master' into 465-fix-faulty-test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f2ca20d69f2c9f87e054897b4351171f230edb6e", "author": {"user": {"login": "genryxy", "name": "Alexander"}}, "url": "https://github.com/artipie/artipie/commit/f2ca20d69f2c9f87e054897b4351171f230edb6e", "committedDate": "2020-08-20T10:07:39Z", "message": "#465 - remove extra file"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a61dc24073534db452aa054eaef24b15f848fb87", "author": {"user": {"login": "genryxy", "name": "Alexander"}}, "url": "https://github.com/artipie/artipie/commit/a61dc24073534db452aa054eaef24b15f848fb87", "committedDate": "2020-08-20T10:10:43Z", "message": "#465 - fix qulice"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b321939ac7a295d1a859513f9909134f94276e46", "author": {"user": {"login": "genryxy", "name": "Alexander"}}, "url": "https://github.com/artipie/artipie/commit/b321939ac7a295d1a859513f9909134f94276e46", "committedDate": "2020-08-20T10:11:00Z", "message": "Merge branch '465-fix-faulty-test' of https://github.com/genryxy/artipie into 465-fix-faulty-test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxNDg4NTE4", "url": "https://github.com/artipie/artipie/pull/471#pullrequestreview-471488518", "createdAt": "2020-08-20T11:05:43Z", "commit": {"oid": "b321939ac7a295d1a859513f9909134f94276e46"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxMTowNTo0M1rOHD73HA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxMTowNTo0M1rOHD73HA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Mzg4ODU0MA==", "bodyText": "@genryxy that's a smart fix, but in Artipie project we are trying to avoid using null values.\nCould you please implement Storage interface with all methods throwing exception? It's going to be more verbose, but will make intent more obvious. Using shortcuts is what brought us the problem in the first place.", "url": "https://github.com/artipie/artipie/pull/471#discussion_r473888540", "createdAt": "2020-08-20T11:05:43Z", "author": {"login": "olegmoz"}, "path": "src/test/java/com/artipie/http/HealthSliceTest.java", "diffHunk": "@@ -66,7 +64,7 @@ void returnsOkForValidStorage() {\n     @Test\n     void returnsBadRequestForBrokenStorage() {\n         MatcherAssert.assertThat(\n-            new HealthSlice(new Settings.Fake(new FileStorage(Paths.get(\"/\")))),\n+            new HealthSlice(new Settings.Fake(new FileStorage(null))),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b321939ac7a295d1a859513f9909134f94276e46"}, "originalPosition": 21}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2a7585d61ac6c1399f19f08c6f5bf7514da3b68c", "author": {"user": {"login": "genryxy", "name": "Alexander"}}, "url": "https://github.com/artipie/artipie/commit/2a7585d61ac6c1399f19f08c6f5bf7514da3b68c", "committedDate": "2020-08-20T11:18:19Z", "message": "#465 - add FakeStorage implementation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxNTAxMDk4", "url": "https://github.com/artipie/artipie/pull/471#pullrequestreview-471501098", "createdAt": "2020-08-20T11:26:37Z", "commit": {"oid": "2a7585d61ac6c1399f19f08c6f5bf7514da3b68c"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxMToyNjozN1rOHD8fpQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxMToyNjozN1rOHD8fpQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Mzg5ODkxNw==", "bodyText": "@genryxy handling UncheckedIOException here is wrong. It covers only one special case, the FakeStorage you have introduced in this PR. You should catch Exception here, handling just IOException here was wrong.", "url": "https://github.com/artipie/artipie/pull/471#discussion_r473898917", "createdAt": "2020-08-20T11:26:37Z", "author": {"login": "olegmoz"}, "path": "src/main/java/com/artipie/http/HealthSlice.java", "diffHunk": "@@ -93,7 +94,7 @@ public Response response(final String line,\n                 new Key.From(\".system\", \"test\"),\n                 new Content.From(\"OK\".getBytes(StandardCharsets.US_ASCII))\n             ).thenApply(none -> true).exceptionally(ignore -> false);\n-        } catch (final IOException ignore) {\n+        } catch (final IOException | UncheckedIOException ignore) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2a7585d61ac6c1399f19f08c6f5bf7514da3b68c"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "75656f623dabd6f6ed8cb3526f9503a9a0af2cf8", "author": {"user": {"login": "genryxy", "name": "Alexander"}}, "url": "https://github.com/artipie/artipie/commit/75656f623dabd6f6ed8cb3526f9503a9a0af2cf8", "committedDate": "2020-08-20T11:37:29Z", "message": "#465 - Exception catch"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2b03696b8687704e9b90a649432b201fdaffabbf", "author": {"user": {"login": "genryxy", "name": "Alexander"}}, "url": "https://github.com/artipie/artipie/commit/2b03696b8687704e9b90a649432b201fdaffabbf", "committedDate": "2020-08-20T11:38:08Z", "message": "Merge branch 'master' into 465-fix-faulty-test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxNTE0NzYx", "url": "https://github.com/artipie/artipie/pull/471#pullrequestreview-471514761", "createdAt": "2020-08-20T11:48:13Z", "commit": {"oid": "2b03696b8687704e9b90a649432b201fdaffabbf"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3471, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}