{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk0MTI1NDk0", "number": 644, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQxMzo0NjozMFrOEoFl6Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQxMzo0NjozMFrOEoFl6Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEwNDcwMTIxOnYy", "diffSide": "RIGHT", "path": "src/main/java/com/artipie/api/artifactory/GetPermissionSlice.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQxMzo0NjozMFrOHY-exg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQxMzo0NjozMFrOHY-exg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTk1MTU1OA==", "bodyText": "@olenagerasimova I think we need to extract item.username().charAt(0) == '/' this predicate to a method or class and reuse it in both filter expressions here to avoid code duplication and make intent more clear", "url": "https://github.com/artipie/artipie/pull/644#discussion_r495951558", "createdAt": "2020-09-28T13:46:30Z", "author": {"login": "olegmoz"}, "path": "src/main/java/com/artipie/api/artifactory/GetPermissionSlice.java", "diffHunk": "@@ -111,7 +112,22 @@ private static JsonObject response(\n         return Json.createObjectBuilder()\n             .add(\"includesPattern\", includesPattern(patterns))\n             .add(\"repositories\", Json.createArrayBuilder().add(repo).build())\n-            .add(\"principals\", Json.createObjectBuilder().add(\"users\", users(permissions)))\n+            .add(\n+                \"principals\",\n+                Json.createObjectBuilder()\n+                    .add(\n+                        \"users\",\n+                        permissions(\n+                            permissions.stream().filter(item -> item.username().charAt(0) != '/')\n+                        )\n+                    )\n+                    .add(\n+                        \"groups\",\n+                        permissions(\n+                            permissions.stream().filter(item -> item.username().charAt(0) == '/')\n+                        )", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5da77e4b88f6f48af9a70f09f5b307074a7e5081"}, "originalPosition": 26}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2024, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}