{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE0NTgyNDkw", "number": 117, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QxOTozNDoxOFrOD6ZBWQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QxOTozNDoxOFrOD6ZBWQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYyNTUzOTQ1OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/artipie/Pie.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QxOTozNDoxOFrOGSNQcw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QxOTozNDoxOFrOGSNQcw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTc0NDc1NQ==", "bodyText": "@g4s8 can we test this scenario?", "url": "https://github.com/artipie/artipie/pull/117#discussion_r421744755", "createdAt": "2020-05-07T19:34:18Z", "author": {"login": "Vatavuk"}, "path": "src/main/java/com/artipie/Pie.java", "diffHunk": "@@ -83,15 +87,38 @@ public Response response(final String line, final Iterable<Map.Entry<String, Str\n         }\n         final String repo = parts[0];\n         Logger.debug(this, \"Slice repo=%s\", repo);\n+        final Key.From key = new Key.From(String.format(\"%s.yaml\", repo));\n         return new AsyncSlice(\n             CompletableFuture.supplyAsync(\n                 () -> new Unchecked<>(this.settings::storage).value()\n-            )\n-                .thenComposeAsync(\n-                    storage -> storage.value(new Key.From(String.format(\"%s.yaml\", repo)))\n+            ).thenCompose(\n+                storage -> storage.exists(key).thenApply(\n+                    exist -> {\n+                        final Slice slice;\n+                        if (exist) {\n+                            slice = new AsyncSlice(\n+                                storage.value(key).thenApply(\n+                                    content -> new SliceFromConfig(\n+                                        new RepoConfig(this.vertx, content),\n+                                        this.vertx.fileSystem()\n+                                    )\n+                                )\n+                            );\n+                        } else {\n+                            slice = new SliceSimple(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c9690ac32ab9dd2c71f07f6c721b94d6d7911d41"}, "originalPosition": 48}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2383, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}