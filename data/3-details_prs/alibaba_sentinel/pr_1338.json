{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg4MzE3MzE2", "number": 1338, "title": "Polish logging SPI related code and add general JUL adapter for Logger SPI", "bodyText": "Signed-off-by: Eric Zhao sczyh16@gmail.com\n\nDescribe what this PR does / why we need it\nPolish logging SPI related code and add general JUL adapter for Logger SPI.\nDoes this pull request fix one issue?\nRelated to #757\nDescribe how you did it\n\nMove the legacy JUL methods from LogBase to BaseJulLogger.\nAdd a JavaLoggingAdapter as the general JUL adapter for the Logger SPI, which makes it convenient to use (as the default logger).\nAdd LoggerSpiProvider to resolve Logger SPI.\nPolish the logback demo.\n\nDescribe how to verify it\nRun the test cases and demo.\nSpecial notes for reviews\nBe careful with circular class dependency and error handling in static block.", "createdAt": "2020-03-14T14:11:59Z", "url": "https://github.com/alibaba/Sentinel/pull/1338", "merged": true, "mergeCommit": {"oid": "624d19d4ce7b4032449a0735e8eb3a683d9507fc"}, "closed": true, "closedAt": "2020-03-16T02:00:47Z", "author": {"login": "sczyh30"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcNnDPUAFqTM3NDczNTgzMw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcNwHSXAFqTM3NDc2Njk5Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc0NzM1ODMz", "url": "https://github.com/alibaba/Sentinel/pull/1338#pullrequestreview-374735833", "createdAt": "2020-03-14T15:56:56Z", "commit": {"oid": "11eebccb3f310bf5ac76574644aac9c6db95b56b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNFQxNTo1Njo1NlrOF2aT1A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNFQxNTo1Njo1NlrOF2aT1A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjU5ODQ4NA==", "bodyText": "The name of final variables are not consistent with CommandCenterLog class, as they are in context of RecordLog, maybe the same as RecordLog's LOGGER_NAME\u3001DEFAULT_LOG_FILENAME is better? Seems DEFAULT_LOG_FILENAME can be LOG_FILENAME.", "url": "https://github.com/alibaba/Sentinel/pull/1338#discussion_r392598484", "createdAt": "2020-03-14T15:56:56Z", "author": {"login": "cdfive"}, "path": "sentinel-core/src/main/java/com/alibaba/csp/sentinel/log/RecordLog.java", "diffHunk": "@@ -15,80 +15,74 @@\n  */\n package com.alibaba.csp.sentinel.log;\n \n-import java.util.Iterator;\n-import java.util.ServiceLoader;\n+import com.alibaba.csp.sentinel.log.jul.JavaLoggingAdapter;\n \n-/***\n- * The basic logger for vital events.\n+/**\n+ * The basic biz logger of Sentinel.\n  *\n  * @author youji.zj\n+ * @author Eric Zhao\n  */\n-public class RecordLog extends LogBase {\n-    private static com.alibaba.csp.sentinel.log.Logger log = null;\n+public class RecordLog {\n+\n+    public static final String RECORD_LOGGER_NAME = \"sentinelRecordLogger\";\n+    public static final String DEFAULT_RECORD_LOG_FILENAME = \"sentinel-record.log\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "11eebccb3f310bf5ac76574644aac9c6db95b56b"}, "originalPosition": 21}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc0NzM2MTIw", "url": "https://github.com/alibaba/Sentinel/pull/1338#pullrequestreview-374736120", "createdAt": "2020-03-14T16:01:34Z", "commit": {"oid": "11eebccb3f310bf5ac76574644aac9c6db95b56b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNFQxNjowMTozNFrOF2aVIg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNFQxNjowMTozNFrOF2aVIg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjU5ODgxOA==", "bodyText": "The dependency seems not used in demo, is it redundant", "url": "https://github.com/alibaba/Sentinel/pull/1338#discussion_r392598818", "createdAt": "2020-03-14T16:01:34Z", "author": {"login": "cdfive"}, "path": "sentinel-demo/sentinel-demo-log-logback/pom.xml", "diffHunk": "@@ -12,12 +12,16 @@\n     <artifactId>sentinel-demo-log-logback</artifactId>\n \n     <dependencies>\n+        <dependency>\n+            <groupId>com.alibaba.csp</groupId>\n+            <artifactId>sentinel-transport-common</artifactId>\n+        </dependency>\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "11eebccb3f310bf5ac76574644aac9c6db95b56b"}, "originalPosition": 8}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "619117ee7ea86644ba967f12ae882b472085eaff", "author": {"user": {"login": "sczyh30", "name": "Eric Zhao"}}, "url": "https://github.com/alibaba/Sentinel/commit/619117ee7ea86644ba967f12ae882b472085eaff", "committedDate": "2020-03-15T01:47:22Z", "message": "Polish logging SPI related code and add general JUL adapter for Logger SPI\n\n* Move the legacy JUL methods from LogBase to BaseJulLogger.\n* Add a JavaLoggingAdapter as the general JUL adapter for the Logger SPI, which makes it convenient to use (as the default logger).\n* Add LoggerSpiProvider to resolve Logger SPI.\n* Polish the logback demo.\n\nSigned-off-by: Eric Zhao <sczyh16@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "11eebccb3f310bf5ac76574644aac9c6db95b56b", "author": {"user": {"login": "sczyh30", "name": "Eric Zhao"}}, "url": "https://github.com/alibaba/Sentinel/commit/11eebccb3f310bf5ac76574644aac9c6db95b56b", "committedDate": "2020-03-14T14:08:02Z", "message": "Polish logging SPI related code and add general JUL adapter for Logger SPI\n\n* Move the legacy JUL methods from LogBase to BaseJulLogger.\n* Add a JavaLoggingAdapter as the general JUL adapter for the Logger SPI, which makes it convenient to use (as the default logger).\n* Add LoggerSpiProvider to resolve Logger SPI.\n* Polish the logback demo.\n\nSigned-off-by: Eric Zhao <sczyh16@gmail.com>"}, "afterCommit": {"oid": "619117ee7ea86644ba967f12ae882b472085eaff", "author": {"user": {"login": "sczyh30", "name": "Eric Zhao"}}, "url": "https://github.com/alibaba/Sentinel/commit/619117ee7ea86644ba967f12ae882b472085eaff", "committedDate": "2020-03-15T01:47:22Z", "message": "Polish logging SPI related code and add general JUL adapter for Logger SPI\n\n* Move the legacy JUL methods from LogBase to BaseJulLogger.\n* Add a JavaLoggingAdapter as the general JUL adapter for the Logger SPI, which makes it convenient to use (as the default logger).\n* Add LoggerSpiProvider to resolve Logger SPI.\n* Polish the logback demo.\n\nSigned-off-by: Eric Zhao <sczyh16@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc0NzY2OTk3", "url": "https://github.com/alibaba/Sentinel/pull/1338#pullrequestreview-374766997", "createdAt": "2020-03-15T02:30:30Z", "commit": {"oid": "619117ee7ea86644ba967f12ae882b472085eaff"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4048, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}