{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg1NjkwMDEx", "number": 1328, "title": "Add \"web-context-unify\" configuration to support \"chain\" relation flow strategy in Spring webmvc adapter", "bodyText": "Describe what this PR does / why we need it\nAdd \"web-context-unify\" configuration in spring webmvc adaptor, the same as web servlet\nadaptor, to support \"chain\" relation flow strategy.\nDoes this pull request fix one issue?\nFixes #1314\nDescribe how you did it\nAdd a configuration webContextUnify in SentinelWebMvcConfig, default is true.\nAdd getContextName method in AbstractSentinelInterceptor, which use SENTINEL_SPRING_WEB_CONTEXT_NAME by default, and subclass can implement their own logic by overriding it.\nDescribe how to verify it\nChange config.setWebContextUnify(true); in demo to false and start the WebMvcDemoApplication and dashboard, visit different url and view in Resource Chainmenu.\nBesides, in local test, I add sentinel-annotation-aspectj in demo, add a service method marked with SentienlResource, the same method called by different url of controller, add \"chain\" relation flow rule to verify if it works.\nSpecial notes for reviews\nI found that the comment ofWEB_CONTEXT_UNIFY in CommonFilter seems inconsistent,\nand fix it.\nIn CommonFilter,  when webContextUnify is set to false, the context name is target, which is not with HTTP method prefix if httpMethodSpecify is true. In SentinelWebInterceptor, since we have a ancapsulated getResourceName method, so to reuse it, the context name is the same as resource name. Maybe it's better than CommonFilter. I'm not very sure and didn't modify CommonFilter, please review it.", "createdAt": "2020-03-09T16:31:43Z", "url": "https://github.com/alibaba/Sentinel/pull/1328", "merged": true, "mergeCommit": {"oid": "2c2f60cf58166f4e9510b4d9f03dfcf295e7f6b5"}, "closed": true, "closedAt": "2020-03-10T15:02:08Z", "author": {"login": "cdfive"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcL_leWAH2gAyMzg1NjkwMDExOjZhMzFjZGQ0NGNjOWMwZmVhMWJjNjdjZTc3OTAzMjdiYjQ0Y2M3ZTI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcMT1W3gFqTM3MjAzNDcwNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "6a31cdd44cc9c0fea1bc67ce7790327bb44cc7e2", "author": {"user": {"login": "cdfive", "name": null}}, "url": "https://github.com/alibaba/Sentinel/commit/6a31cdd44cc9c0fea1bc67ce7790327bb44cc7e2", "committedDate": "2020-03-09T15:24:12Z", "message": "Add \"web-context-unify\" configuration to support \"chain\" relation flow strategy in Spring webmvc adapter."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcxOTkwNzE2", "url": "https://github.com/alibaba/Sentinel/pull/1328#pullrequestreview-371990716", "createdAt": "2020-03-10T14:15:16Z", "commit": {"oid": "6a31cdd44cc9c0fea1bc67ce7790327bb44cc7e2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxNDoxNToxN1rOF0QtJA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxNDoxNToxN1rOF0QtJA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDM0Mzk3Mg==", "bodyText": "LGTM, so we could add @since 1.7.2 here :)", "url": "https://github.com/alibaba/Sentinel/pull/1328#discussion_r390343972", "createdAt": "2020-03-10T14:15:17Z", "author": {"login": "sczyh30"}, "path": "sentinel-adapter/sentinel-spring-webmvc-adapter/src/main/java/com/alibaba/csp/sentinel/adapter/spring/webmvc/config/SentinelWebMvcConfig.java", "diffHunk": "@@ -34,6 +34,11 @@\n      */\n     private boolean httpMethodSpecify;\n \n+    /**\n+     * Specify whether unify web context(i.e. use the default context name), and is true by default.\n+     */", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6a31cdd44cc9c0fea1bc67ce7790327bb44cc7e2"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7a4349ec72f4f87e5b92a16020f46cef249166a1", "author": {"user": {"login": "cdfive", "name": null}}, "url": "https://github.com/alibaba/Sentinel/commit/7a4349ec72f4f87e5b92a16020f46cef249166a1", "committedDate": "2020-03-10T14:47:14Z", "message": "Supply @since 1.7.2 and improve comment in demo"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcyMDM0NzA0", "url": "https://github.com/alibaba/Sentinel/pull/1328#pullrequestreview-372034704", "createdAt": "2020-03-10T14:59:39Z", "commit": {"oid": "7a4349ec72f4f87e5b92a16020f46cef249166a1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4041, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}