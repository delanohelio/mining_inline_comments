{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcxMzUwMDc2", "number": 1995, "reviewThreads": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQxODowNTo1OVrOEjtakA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQyMjoyOTo0MFrOEjzqlA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA1ODc5Njk2OnYy", "diffSide": "RIGHT", "path": "services/sts/src/main/java/software/amazon/awssdk/services/sts/auth/StsCredentialsProvider.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQxODowNTo1OVrOHSN7mg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQxOTowNzo0OVrOHSQRIQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODg2NDY2Ng==", "bodyText": "Small typo here in 'minutes'.", "url": "https://github.com/aws/aws-sdk-java-v2/pull/1995#discussion_r488864666", "createdAt": "2020-09-15T18:05:59Z", "author": {"login": "bmaizels"}, "path": "services/sts/src/main/java/software/amazon/awssdk/services/sts/auth/StsCredentialsProvider.java", "diffHunk": "@@ -127,6 +142,30 @@ public B asyncCredentialUpdateEnabled(Boolean asyncCredentialUpdateEnabled) {\n             return (B) this;\n         }\n \n+        /**\n+         * Configure the amount of time, relative to STS token expiration, that a new STS token should be fetched synchronously.\n+         *\n+         * <p>By default, this is 1 minute.</p>\n+         */\n+        @SuppressWarnings(\"unchecked\")\n+        public B staleTime(Duration staleTime) {\n+            this.staleTime = staleTime;\n+            return (B) this;\n+        }\n+\n+        /**\n+         * Configure the amount of time, relative to STS token expiration, that a new STS token should be fetched asynchronously.\n+         * The value only applies if asyncCredentialUpdateEnabled is enabled.\n+         *\n+         * <p>By default, this is 5 minuts.</p>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b6a51b3b2ce330b0eab1cc7745053978348832fe"}, "originalPosition": 84}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODkwMjk0NQ==", "bodyText": "Typo fixed and rebased to pick up changes to CHANGELOG.md", "url": "https://github.com/aws/aws-sdk-java-v2/pull/1995#discussion_r488902945", "createdAt": "2020-09-15T19:07:49Z", "author": {"login": "Helmsdown"}, "path": "services/sts/src/main/java/software/amazon/awssdk/services/sts/auth/StsCredentialsProvider.java", "diffHunk": "@@ -127,6 +142,30 @@ public B asyncCredentialUpdateEnabled(Boolean asyncCredentialUpdateEnabled) {\n             return (B) this;\n         }\n \n+        /**\n+         * Configure the amount of time, relative to STS token expiration, that a new STS token should be fetched synchronously.\n+         *\n+         * <p>By default, this is 1 minute.</p>\n+         */\n+        @SuppressWarnings(\"unchecked\")\n+        public B staleTime(Duration staleTime) {\n+            this.staleTime = staleTime;\n+            return (B) this;\n+        }\n+\n+        /**\n+         * Configure the amount of time, relative to STS token expiration, that a new STS token should be fetched asynchronously.\n+         * The value only applies if asyncCredentialUpdateEnabled is enabled.\n+         *\n+         * <p>By default, this is 5 minuts.</p>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODg2NDY2Ng=="}, "originalCommit": {"oid": "b6a51b3b2ce330b0eab1cc7745053978348832fe"}, "originalPosition": 84}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA1OTU1MDUwOnYy", "diffSide": "RIGHT", "path": "services/sts/src/main/java/software/amazon/awssdk/services/sts/auth/StsCredentialsProvider.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQyMToyODozMFrOHSVLng==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQyMTozODowM1rOHSVhdQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODk4MzQ1NA==", "bodyText": "Can we change this to: Configure the amount of time, relative to STS token expiration, that the cached credentials are considered stale and should no longer be used. All threads will block until the value is updated.", "url": "https://github.com/aws/aws-sdk-java-v2/pull/1995#discussion_r488983454", "createdAt": "2020-09-15T21:28:30Z", "author": {"login": "bmaizels"}, "path": "services/sts/src/main/java/software/amazon/awssdk/services/sts/auth/StsCredentialsProvider.java", "diffHunk": "@@ -127,6 +150,30 @@ public B asyncCredentialUpdateEnabled(Boolean asyncCredentialUpdateEnabled) {\n             return (B) this;\n         }\n \n+        /**\n+         * Configure the amount of time, relative to STS token expiration, that a new STS token should be fetched synchronously.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e1e851f999ec0ba8746eed49cdafc6eeec012201"}, "originalPosition": 85}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODk4OTA0NQ==", "bodyText": "Done", "url": "https://github.com/aws/aws-sdk-java-v2/pull/1995#discussion_r488989045", "createdAt": "2020-09-15T21:38:03Z", "author": {"login": "Helmsdown"}, "path": "services/sts/src/main/java/software/amazon/awssdk/services/sts/auth/StsCredentialsProvider.java", "diffHunk": "@@ -127,6 +150,30 @@ public B asyncCredentialUpdateEnabled(Boolean asyncCredentialUpdateEnabled) {\n             return (B) this;\n         }\n \n+        /**\n+         * Configure the amount of time, relative to STS token expiration, that a new STS token should be fetched synchronously.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODk4MzQ1NA=="}, "originalCommit": {"oid": "e1e851f999ec0ba8746eed49cdafc6eeec012201"}, "originalPosition": 85}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA1OTU3MDgzOnYy", "diffSide": "RIGHT", "path": "services/sts/src/main/java/software/amazon/awssdk/services/sts/auth/StsCredentialsProvider.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQyMTozNToxNVrOHSVXqA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQyMTozODowOVrOHSVh8Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODk4NjUzNg==", "bodyText": "Can we change this to: Configure the amount of time, relative to STS token expiration, that the cached credentials are considered close to stale and should be updated. See {@link #asyncCredentialUpdateEnabled}.", "url": "https://github.com/aws/aws-sdk-java-v2/pull/1995#discussion_r488986536", "createdAt": "2020-09-15T21:35:15Z", "author": {"login": "bmaizels"}, "path": "services/sts/src/main/java/software/amazon/awssdk/services/sts/auth/StsCredentialsProvider.java", "diffHunk": "@@ -127,6 +150,30 @@ public B asyncCredentialUpdateEnabled(Boolean asyncCredentialUpdateEnabled) {\n             return (B) this;\n         }\n \n+        /**\n+         * Configure the amount of time, relative to STS token expiration, that a new STS token should be fetched synchronously.\n+         *\n+         * <p>By default, this is 1 minute.</p>\n+         */\n+        @SuppressWarnings(\"unchecked\")\n+        public B staleTime(Duration staleTime) {\n+            this.staleTime = staleTime;\n+            return (B) this;\n+        }\n+\n+        /**\n+         * Configure the amount of time, relative to STS token expiration, that a new STS token should be fetched asynchronously.\n+         * The value only applies if asyncCredentialUpdateEnabled is enabled.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e1e851f999ec0ba8746eed49cdafc6eeec012201"}, "originalPosition": 97}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODk4OTE2OQ==", "bodyText": "Done", "url": "https://github.com/aws/aws-sdk-java-v2/pull/1995#discussion_r488989169", "createdAt": "2020-09-15T21:38:09Z", "author": {"login": "Helmsdown"}, "path": "services/sts/src/main/java/software/amazon/awssdk/services/sts/auth/StsCredentialsProvider.java", "diffHunk": "@@ -127,6 +150,30 @@ public B asyncCredentialUpdateEnabled(Boolean asyncCredentialUpdateEnabled) {\n             return (B) this;\n         }\n \n+        /**\n+         * Configure the amount of time, relative to STS token expiration, that a new STS token should be fetched synchronously.\n+         *\n+         * <p>By default, this is 1 minute.</p>\n+         */\n+        @SuppressWarnings(\"unchecked\")\n+        public B staleTime(Duration staleTime) {\n+            this.staleTime = staleTime;\n+            return (B) this;\n+        }\n+\n+        /**\n+         * Configure the amount of time, relative to STS token expiration, that a new STS token should be fetched asynchronously.\n+         * The value only applies if asyncCredentialUpdateEnabled is enabled.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODk4NjUzNg=="}, "originalCommit": {"oid": "e1e851f999ec0ba8746eed49cdafc6eeec012201"}, "originalPosition": 97}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA1OTYxNzA4OnYy", "diffSide": "RIGHT", "path": "services/sts/src/main/java/software/amazon/awssdk/services/sts/auth/StsCredentialsProvider.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQyMTo0NDoyMFrOHSV3CA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQyMTo1MzowMFrOHSWTyQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODk5NDU2OA==", "bodyText": "Can we add javadoc: The amount of time, relative to STS token expiration, that the cached credentials are considered stale and should no longer be used. All threads will block until the value is updated.", "url": "https://github.com/aws/aws-sdk-java-v2/pull/1995#discussion_r488994568", "createdAt": "2020-09-15T21:44:20Z", "author": {"login": "bmaizels"}, "path": "services/sts/src/main/java/software/amazon/awssdk/services/sts/auth/StsCredentialsProvider.java", "diffHunk": "@@ -83,6 +96,14 @@ public void close() {\n         sessionCache.close();\n     }\n \n+    public Duration staleTime() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d1ed98feacef6555680aad8374d34be42f7ec843"}, "originalPosition": 60}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTAwMTkyOQ==", "bodyText": "Done", "url": "https://github.com/aws/aws-sdk-java-v2/pull/1995#discussion_r489001929", "createdAt": "2020-09-15T21:53:00Z", "author": {"login": "Helmsdown"}, "path": "services/sts/src/main/java/software/amazon/awssdk/services/sts/auth/StsCredentialsProvider.java", "diffHunk": "@@ -83,6 +96,14 @@ public void close() {\n         sessionCache.close();\n     }\n \n+    public Duration staleTime() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODk5NDU2OA=="}, "originalCommit": {"oid": "d1ed98feacef6555680aad8374d34be42f7ec843"}, "originalPosition": 60}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA1OTYxOTE3OnYy", "diffSide": "RIGHT", "path": "services/sts/src/main/java/software/amazon/awssdk/services/sts/auth/StsCredentialsProvider.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQyMTo0NDo0NVrOHSV4Sw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQyMTo1MzowNVrOHSWUDw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODk5NDg5MQ==", "bodyText": "Can we add javadoc: The amount of time, relative to STS token expiration, that the cached credentials are considered close to stale and should be updated.", "url": "https://github.com/aws/aws-sdk-java-v2/pull/1995#discussion_r488994891", "createdAt": "2020-09-15T21:44:45Z", "author": {"login": "bmaizels"}, "path": "services/sts/src/main/java/software/amazon/awssdk/services/sts/auth/StsCredentialsProvider.java", "diffHunk": "@@ -83,6 +96,14 @@ public void close() {\n         sessionCache.close();\n     }\n \n+    public Duration staleTime() {\n+        return staleTime;\n+    }\n+\n+    public Duration prefetchTime() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d1ed98feacef6555680aad8374d34be42f7ec843"}, "originalPosition": 64}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTAwMTk5OQ==", "bodyText": "Done", "url": "https://github.com/aws/aws-sdk-java-v2/pull/1995#discussion_r489001999", "createdAt": "2020-09-15T21:53:05Z", "author": {"login": "Helmsdown"}, "path": "services/sts/src/main/java/software/amazon/awssdk/services/sts/auth/StsCredentialsProvider.java", "diffHunk": "@@ -83,6 +96,14 @@ public void close() {\n         sessionCache.close();\n     }\n \n+    public Duration staleTime() {\n+        return staleTime;\n+    }\n+\n+    public Duration prefetchTime() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODk5NDg5MQ=="}, "originalCommit": {"oid": "d1ed98feacef6555680aad8374d34be42f7ec843"}, "originalPosition": 64}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA1OTgxOTQ3OnYy", "diffSide": "RIGHT", "path": "services/sts/src/main/java/software/amazon/awssdk/services/sts/auth/StsCredentialsProvider.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQyMjoyOToxOVrOHSYE9w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQyMjozNjoyNVrOHSYaPg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTAzMDkwMw==", "bodyText": "Can we change this to : private static final Duration DEFAULT_STALE_TIME = Duration.ofMinutes(1);", "url": "https://github.com/aws/aws-sdk-java-v2/pull/1995#discussion_r489030903", "createdAt": "2020-09-15T22:29:19Z", "author": {"login": "bmaizels"}, "path": "services/sts/src/main/java/software/amazon/awssdk/services/sts/auth/StsCredentialsProvider.java", "diffHunk": "@@ -40,6 +42,10 @@\n @ThreadSafe\n @SdkInternalApi\n abstract class StsCredentialsProvider implements AwsCredentialsProvider, SdkAutoCloseable {\n+\n+    private static Duration DEFAULT_STALE_TIME = Duration.ofMinutes(1);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "720c5bc4af74224b706761983349147ed4a512b3"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTAzNjM1MA==", "bodyText": "No worries. In my head it was final. Pushed", "url": "https://github.com/aws/aws-sdk-java-v2/pull/1995#discussion_r489036350", "createdAt": "2020-09-15T22:36:25Z", "author": {"login": "Helmsdown"}, "path": "services/sts/src/main/java/software/amazon/awssdk/services/sts/auth/StsCredentialsProvider.java", "diffHunk": "@@ -40,6 +42,10 @@\n @ThreadSafe\n @SdkInternalApi\n abstract class StsCredentialsProvider implements AwsCredentialsProvider, SdkAutoCloseable {\n+\n+    private static Duration DEFAULT_STALE_TIME = Duration.ofMinutes(1);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTAzMDkwMw=="}, "originalCommit": {"oid": "720c5bc4af74224b706761983349147ed4a512b3"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA1OTgyMTAwOnYy", "diffSide": "RIGHT", "path": "services/sts/src/main/java/software/amazon/awssdk/services/sts/auth/StsCredentialsProvider.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQyMjoyOTo0MFrOHSYF6Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQyMjozNjozMlrOHSYajQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTAzMTE0NQ==", "bodyText": "Can we change this to: private static final Duration DEFAULT_PREFETCH_TIME = Duration.ofMinutes(5);", "url": "https://github.com/aws/aws-sdk-java-v2/pull/1995#discussion_r489031145", "createdAt": "2020-09-15T22:29:40Z", "author": {"login": "bmaizels"}, "path": "services/sts/src/main/java/software/amazon/awssdk/services/sts/auth/StsCredentialsProvider.java", "diffHunk": "@@ -40,6 +42,10 @@\n @ThreadSafe\n @SdkInternalApi\n abstract class StsCredentialsProvider implements AwsCredentialsProvider, SdkAutoCloseable {\n+\n+    private static Duration DEFAULT_STALE_TIME = Duration.ofMinutes(1);\n+    private static Duration DEFAULT_PREFETCH_TIME = Duration.ofMinutes(5);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "720c5bc4af74224b706761983349147ed4a512b3"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTAzNjQyOQ==", "bodyText": "Done", "url": "https://github.com/aws/aws-sdk-java-v2/pull/1995#discussion_r489036429", "createdAt": "2020-09-15T22:36:32Z", "author": {"login": "Helmsdown"}, "path": "services/sts/src/main/java/software/amazon/awssdk/services/sts/auth/StsCredentialsProvider.java", "diffHunk": "@@ -40,6 +42,10 @@\n @ThreadSafe\n @SdkInternalApi\n abstract class StsCredentialsProvider implements AwsCredentialsProvider, SdkAutoCloseable {\n+\n+    private static Duration DEFAULT_STALE_TIME = Duration.ofMinutes(1);\n+    private static Duration DEFAULT_PREFETCH_TIME = Duration.ofMinutes(5);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTAzMTE0NQ=="}, "originalCommit": {"oid": "720c5bc4af74224b706761983349147ed4a512b3"}, "originalPosition": 22}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3991, "cost": 1, "resetAt": "2021-11-12T11:18:39Z"}}}