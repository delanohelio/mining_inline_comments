{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEwOTM4MzAz", "number": 1798, "title": "Expose the extendedRequestId from SdkServiceException", "bodyText": "Description\nAdds a new extendedRequestId property to the SdkServiceException class and includes it in the contents of AwsServiceException messages.\nMotivation and Context\nCurrently the only way to access this information from the exception is via the headers supplied by the SdkHttpResponse in the exception's errorDetails.  However when the AWS client is automatically retrying and causing my Lambda function to timeout due to the added time it takes to retry, I have no way to access this information.  AWS support requires this information in order to deep dive issues for some services such as S3.\nTesting\nRan mvn clean install and the build succeeded.\nTypes of changes\n\n Bug fix (non-breaking change which fixes an issue)\n New feature (non-breaking change which adds functionality)\n\nChecklist\n\n I have read the CONTRIBUTING document\n Local run of mvn install succeeds\n My code follows the code style of this project\n My change requires a change to the Javadoc documentation\n I have updated the Javadoc documentation accordingly\n I have read the README document\n I have added tests to cover my changes\n All new and existing tests passed\n A short description of the change has been added to the CHANGELOG\n My change is to implement 1.11 parity feature and I have updated LaunchChangelog\n\nLicense\n\n I confirm that this pull request can be released under the Apache 2 license", "createdAt": "2020-04-29T20:33:58Z", "url": "https://github.com/aws/aws-sdk-java-v2/pull/1798", "merged": true, "mergeCommit": {"oid": "63af4dfb40c1ca372b9def6df8ee78dad0baa120"}, "closed": true, "closedAt": "2020-05-14T17:41:57Z", "author": {"login": "Sarev0k"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcg-rlrgFqTQxMTI2NDQxOQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABchAfKKgH2gAyNDEwOTM4MzAzOjZmYjgyODdhZDIxOTJjNWNkMWRlOGQwYzQ1OWMyY2RkOTJkNzdmNDk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExMjY0NDE5", "url": "https://github.com/aws/aws-sdk-java-v2/pull/1798#pullrequestreview-411264419", "createdAt": "2020-05-13T20:12:58Z", "commit": {"oid": "a62869263ce708e2607124875c10d2d8b883761e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QyMDoxMjo1OFrOGVB2dg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QyMDoxMjo1OFrOGVB2dg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDcwMzYwNg==", "bodyText": "I realize it's actually DRYer to do this here, but for consistency can we set the extendedRequestId the same way we set the requestId: when the exception is created? (And maybe just print null instead of not available)\nWe can add a getter for retrieving it (that sometimes returns null).", "url": "https://github.com/aws/aws-sdk-java-v2/pull/1798#discussion_r424703606", "createdAt": "2020-05-13T20:12:58Z", "author": {"login": "millems"}, "path": "core/aws-core/src/main/java/software/amazon/awssdk/awscore/exception/AwsServiceException.java", "diffHunk": "@@ -62,10 +62,13 @@ public AwsErrorDetails awsErrorDetails() {\n     @Override\n     public String getMessage() {\n         if (awsErrorDetails != null) {\n+            String extendedRequestId =\n+                awsErrorDetails().sdkHttpResponse().firstMatchingHeader(\"x-amz-id-2\").orElse(\"not available\");\n             return awsErrorDetails().errorMessage() +\n                     \" (Service: \" + awsErrorDetails().serviceName() +\n                     \", Status Code: \" + statusCode() +\n-                    \", Request ID: \" + requestId() + \")\";\n+                    \", Request ID: \" + requestId() +\n+                    \", Extended Request ID: \" + extendedRequestId + \")\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a62869263ce708e2607124875c10d2d8b883761e"}, "originalPosition": 11}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cc797f83018339104d9f45c9a79e327416e1fe61", "author": {"user": {"login": "Sarev0k", "name": "Will Erickson"}}, "url": "https://github.com/aws/aws-sdk-java-v2/commit/cc797f83018339104d9f45c9a79e327416e1fe61", "committedDate": "2020-05-13T21:09:17Z", "message": "Expose the extendedRequestId from SdkServiceException, so it can be provided to support to investigate issues"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExMzM5MzUw", "url": "https://github.com/aws/aws-sdk-java-v2/pull/1798#pullrequestreview-411339350", "createdAt": "2020-05-13T22:19:31Z", "commit": {"oid": "cc797f83018339104d9f45c9a79e327416e1fe61"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6fb8287ad2192c5cd1de8d0c459c2cdd92d77f49", "author": {"user": {"login": "millems", "name": "Matthew Miller"}}, "url": "https://github.com/aws/aws-sdk-java-v2/commit/6fb8287ad2192c5cd1de8d0c459c2cdd92d77f49", "committedDate": "2020-05-13T22:19:37Z", "message": "Merge branch 'master' into master"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2534, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}