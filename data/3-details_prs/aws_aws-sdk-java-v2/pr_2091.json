{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAzNjM4Nzgy", "number": 2091, "title": "Include event type in visitor name", "bodyText": "Description\nThis commit fixes event visitor method generation by including the event type\nin the visitor name. Note that event type here is actually the member name in\nthe encompassing eventstream structure, not the Java class of the event.\nFor example, in the example below, \"Foo\" is the event type.\n\"MyEventStream\": {\n   \"type\": \"structure\",\n   \"eventstream\": true,\n   \"members\": {\n       \"Foo\": {\n           \"shape\": \"Bar\"\n       }\n   }\n}\nTo ensure that this change is backwards compatible with existing services that\nhave event streams (Transcribe Streaming and Kinesis), we also include a\ncustomization to supress this behavior keep the method name as \"visit\".\nNote that by sheer luck, the existing consumer method setters, e.g.\nBuilder onSubscribeToShardEvent(Consumer<SubscribeToShardEvent>);\nare unaffected by this change. See an example here.\nThe previous generation scheme for these methods is \"on{Generation Java class\nname for event shape}\"; now it's \"on{event type}\".  However, both Transcribe and\nKinesis use the shape name as the member name (or vise versa?) in their current\niteration of their event streams.\nFor example, in Kinesis, SubscribeToShard's output stream is defined as\n\"SubscribeToShardEventStream\":{\n  \"type\":\"structure\",\n  \"required\":[\"SubscribeToShardEvent\"],\n  \"members\":{\n    \"SubscribeToShardEvent\":{\"shape\":\"SubscribeToShardEvent\"},\n\n    ...\n    },\n  \"eventstream\":true\n}\nMotivation and Context\n\n\nTesting\n\n\n\nScreenshots (if appropriate)\nTypes of changes\n\n\n Bug fix (non-breaking change which fixes an issue)\n New feature (non-breaking change which adds functionality)\n\nChecklist\n\n\n\n I have read the CONTRIBUTING document\n Local run of mvn install succeeds\n My code follows the code style of this project\n My change requires a change to the Javadoc documentation\n I have updated the Javadoc documentation accordingly\n I have read the README document\n I have added tests to cover my changes\n All new and existing tests passed\n A short description of the change has been added to the CHANGELOG\n My change is to implement 1.11 parity feature and I have updated LaunchChangelog\n\nLicense\n\n\n\n\n I confirm that this pull request can be released under the Apache 2 license", "createdAt": "2020-10-14T20:58:31Z", "url": "https://github.com/aws/aws-sdk-java-v2/pull/2091", "merged": true, "mergeCommit": {"oid": "ad6544c050f76f3db914ae99810c2ef0f576794a"}, "closed": true, "closedAt": "2020-10-15T22:47:56Z", "author": {"login": "dagnir"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdSijktAH2gAyNTAzNjM4NzgyOmJhZjJkODBlNzQ4NTM3N2Y0OGNhY2EyMzJiNDIwMzE5NDQ3NGM5MDk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdS5PXvgFqTUwOTg0MzM0Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "baf2d80e7485377f48caca232b4203194474c909", "author": {"user": {"login": "dagnir", "name": "Dongie Agnir"}}, "url": "https://github.com/aws/aws-sdk-java-v2/commit/baf2d80e7485377f48caca232b4203194474c909", "committedDate": "2020-10-14T19:43:30Z", "message": "Include event type in visitor name\n\nThis commit fixes event visitor method generation by including the *event type*\nin the visitor name. Note that event type here is actually the member name in\nthe encompassing eventstream structure, *not* the Java class of the event.\n\nFor example, in the example below, \"Foo\" is the event type.\n\n\"MyEventStream\": {\n   \"type\": \"structure\",\n   \"eventstream\": true,\n   \"members\": {\n       \"Foo\": {\n           \"shape\": \"Bar\"\n       }\n   }\n}\n\nTo ensure that this change is backwards compatible with existing services that\nhave event streams (Transcribe Streaming and Kinesis), we also include a\ncustomization to supress this behavior keep the method name as \"visit\".\n\nNote that by sheer luck, the existing consumer method setters, e.g.\n\nBuilder onSubscribeToShardEvent(Consumer<SubscribeToShardEvent>);\n\nare unaffected by this change. The previous generation scheme for these methods\nis \"on{Generation Java class name for event shape}\"; now it's \"on{event type}\".\nHowever, both Transcribe and Kinesis use the shape name as the member name (or\nvise versa?) in their current iteration of their event streams.\n\nFor example, in Kinesis, SubscribeToShard's output stream is defined as\n\n\"SubscribeToShardEventStream\":{\n  \"type\":\"structure\",\n  \"required\":[\"SubscribeToShardEvent\"],\n  \"members\":{\n    \"SubscribeToShardEvent\":{\"shape\":\"SubscribeToShardEvent\"},\n\n    ...\n    },\n  \"eventstream\":true\n}"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA4ODM5MjIx", "url": "https://github.com/aws/aws-sdk-java-v2/pull/2091#pullrequestreview-508839221", "createdAt": "2020-10-14T23:28:28Z", "commit": {"oid": "baf2d80e7485377f48caca232b4203194474c909"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQyMzoyODoyOVrOHhqvDQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQyMzoyODoyOVrOHhqvDQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTA2NTIyOQ==", "bodyText": "Should we add visitEventTwo and visitEventOne and deprecate visit?", "url": "https://github.com/aws/aws-sdk-java-v2/pull/2091#discussion_r505065229", "createdAt": "2020-10-14T23:28:29Z", "author": {"login": "zoewangg"}, "path": "codegen/src/test/resources/software/amazon/awssdk/codegen/poet/eventstream/test-visitor-builder.java", "diffHunk": "@@ -67,5 +91,16 @@ public void visit(EventOne event) {\n         public void visit(EventTwo event) {\n             onEventTwo.accept(event);\n         }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "baf2d80e7485377f48caca232b4203194474c909"}, "originalPosition": 55}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA5ODQzMzQy", "url": "https://github.com/aws/aws-sdk-java-v2/pull/2091#pullrequestreview-509843342", "createdAt": "2020-10-15T22:09:15Z", "commit": {"oid": "baf2d80e7485377f48caca232b4203194474c909"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2364, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}