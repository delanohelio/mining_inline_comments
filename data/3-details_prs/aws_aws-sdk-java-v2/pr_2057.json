{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkxMjAwMjkx", "number": 2057, "title": "Add a RdsUtilities with the ability to generate an IAM auth token", "bodyText": "Description\nAdd a new Rds Utilities class that can generate the auth token.\nV1 Parity feature\nMore info: https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/UsingWithRDS.IAMDBAuth.Connecting.AWSCLI.html\nUtilities pattern is used instead of Presigner due to this is a pseudo request. There does not exist a modeled API call so it does not make sense to make a presigner for it.\nMotivation and Context\nUpstream this code out of the AWS Toolkit for JetBrains\n#1157\nTesting\nNeed to write the tests\nScreenshots (if appropriate)\nTypes of changes\n\n\n Bug fix (non-breaking change which fixes an issue)\n New feature (non-breaking change which adds functionality)\n\nChecklist\n\n\n\n I have read the CONTRIBUTING document\n Local run of mvn install succeeds\n My code follows the code style of this project\n My change requires a change to the Javadoc documentation\n I have updated the Javadoc documentation accordingly\n I have read the README document\n I have added tests to cover my changes\n All new and existing tests passed\n A short description of the change has been added to the CHANGELOG\n My change is to implement 1.11 parity feature and I have updated LaunchChangelog\n\nLicense\n\n\n\n\n I confirm that this pull request can be released under the Apache 2 license", "createdAt": "2020-09-22T21:17:15Z", "url": "https://github.com/aws/aws-sdk-java-v2/pull/2057", "merged": true, "mergeCommit": {"oid": "caab8b95bc7f5a9bbd9b3d5ee979bb082873f42d"}, "closed": true, "closedAt": "2021-02-18T22:48:01Z", "author": {"login": "abrooksv"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdLfqcQgFqTQ5Mzg4NjA0Mw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABd7c5jFAFqTU5MzY5NDAzMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzODg2MDQz", "url": "https://github.com/aws/aws-sdk-java-v2/pull/2057#pullrequestreview-493886043", "createdAt": "2020-09-22T22:20:16Z", "commit": {"oid": "3c56269744cd8ef94a13c558bbf52ea923af6784"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQyMjoyMDoxNlrOHWOWig==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQyMjoyMDoxNlrOHWOWig==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzA2NTg2Ng==", "bodyText": "This probably needs a link to the doc where it states this must be 15 min", "url": "https://github.com/aws/aws-sdk-java-v2/pull/2057#discussion_r493065866", "createdAt": "2020-09-22T22:20:16Z", "author": {"login": "hunterwerlla"}, "path": "services/rds/src/main/java/software/amazon/awssdk/services/rds/RdsUtilities.java", "diffHunk": "@@ -0,0 +1,139 @@\n+/*\n+ * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package software.amazon.awssdk.services.rds;\n+\n+import java.time.Instant;\n+import java.time.temporal.ChronoUnit;\n+import java.util.function.Consumer;\n+import software.amazon.awssdk.annotations.Immutable;\n+import software.amazon.awssdk.annotations.SdkInternalApi;\n+import software.amazon.awssdk.annotations.SdkPublicApi;\n+import software.amazon.awssdk.auth.credentials.AwsCredentialsProvider;\n+import software.amazon.awssdk.auth.signer.Aws4Signer;\n+import software.amazon.awssdk.auth.signer.params.Aws4PresignerParams;\n+import software.amazon.awssdk.awscore.client.config.AwsClientOption;\n+import software.amazon.awssdk.core.client.config.SdkClientConfiguration;\n+import software.amazon.awssdk.http.SdkHttpFullRequest;\n+import software.amazon.awssdk.http.SdkHttpMethod;\n+import software.amazon.awssdk.regions.Region;\n+import software.amazon.awssdk.services.rds.model.GenerateAuthenticationTokenRequest;\n+import software.amazon.awssdk.utils.StringUtils;\n+\n+@Immutable\n+@SdkPublicApi\n+public final class RdsUtilities {\n+    private final SdkClientConfiguration clientConfiguration;\n+\n+    /**\n+     * SDK currently validates that region is present while constructing {@link RdsUtilities} object.\n+     * This can be relaxed in the future when more methods are added that don't use region.\n+     */\n+    private RdsUtilities(Builder builder) {\n+        this.clientConfiguration = builder.clientConfiguration;\n+    }\n+\n+    /**\n+     * Creates a builder for {@link RdsUtilities}.\n+     */\n+    public static Builder builder() {\n+        return new Builder();\n+    }\n+\n+    // Used by low-level client\n+    @SdkInternalApi\n+    static RdsUtilities create(SdkClientConfiguration clientConfiguration) {\n+        return RdsUtilities.builder().clientConfiguration(clientConfiguration).build();\n+    }\n+\n+    public String generateAuthenticationToken(Consumer<GenerateAuthenticationTokenRequest.Builder> getUrlRequest) {\n+        return generateAuthenticationToken(GenerateAuthenticationTokenRequest.builder().applyMutation(getUrlRequest).build());\n+    }\n+\n+    public String generateAuthenticationToken(GenerateAuthenticationTokenRequest request) {\n+        SdkHttpFullRequest httpRequest = SdkHttpFullRequest.builder()\n+                                            .method(SdkHttpMethod.GET)\n+                                            .protocol(\"https\")\n+                                            .host(request.hostname())\n+                                            .port(request.port())\n+                                            .encodedPath(\"/\")\n+                                            .putRawQueryParameter(\"DBUser\", request.userName())\n+                                            .putRawQueryParameter(\"Action\", \"connect\")\n+                                            .build();\n+\n+        Instant expirationTime = Instant.now().plus(15, ChronoUnit.MINUTES);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3c56269744cd8ef94a13c558bbf52ea923af6784"}, "originalPosition": 76}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI3NTIwODg4", "url": "https://github.com/aws/aws-sdk-java-v2/pull/2057#pullrequestreview-527520888", "createdAt": "2020-11-10T19:04:36Z", "commit": {"oid": "3c56269744cd8ef94a13c558bbf52ea923af6784"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQxOTowNDozNlrOHwrhmg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQxOToxMzozNFrOHwr0hw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDgwNjgxMA==", "bodyText": "We probably should validate hostname to make sure it's compliant. https://github.com/aws/aws-sdk-java-v2/blob/master/utils/src/main/java/software/amazon/awssdk/utils/HostnameValidator.java#L23", "url": "https://github.com/aws/aws-sdk-java-v2/pull/2057#discussion_r520806810", "createdAt": "2020-11-10T19:04:36Z", "author": {"login": "zoewangg"}, "path": "services/rds/src/main/java/software/amazon/awssdk/services/rds/model/GenerateAuthenticationTokenRequest.java", "diffHunk": "@@ -0,0 +1,140 @@\n+/*\n+ * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package software.amazon.awssdk.services.rds.model;\n+\n+import software.amazon.awssdk.annotations.NotThreadSafe;\n+import software.amazon.awssdk.annotations.SdkPublicApi;\n+import software.amazon.awssdk.auth.credentials.AwsCredentialsProvider;\n+import software.amazon.awssdk.regions.Region;\n+import software.amazon.awssdk.utils.Validate;\n+import software.amazon.awssdk.utils.builder.CopyableBuilder;\n+import software.amazon.awssdk.utils.builder.ToCopyableBuilder;\n+\n+/**\n+ * Request object to get an auth token for IAM database authentication.\n+ */\n+public final class GenerateAuthenticationTokenRequest implements ToCopyableBuilder<GenerateAuthenticationTokenRequest.Builder, GenerateAuthenticationTokenRequest> {\n+    private final String hostname;\n+    private final int port;\n+    private final String username;\n+    private final Region region;\n+    private final AwsCredentialsProvider credentialsProvider;\n+\n+    public GenerateAuthenticationTokenRequest(BuilderImpl builder) {\n+        this.hostname = Validate.notEmpty(builder.hostname, \"hostname\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3c56269744cd8ef94a13c558bbf52ea923af6784"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDgwODQyMg==", "bodyText": "SdkClientConfiguration is a protected API, so not sure if we want to use it here\nIt seems we only need region and credential provider here", "url": "https://github.com/aws/aws-sdk-java-v2/pull/2057#discussion_r520808422", "createdAt": "2020-11-10T19:07:36Z", "author": {"login": "zoewangg"}, "path": "services/rds/src/main/java/software/amazon/awssdk/services/rds/RdsUtilities.java", "diffHunk": "@@ -0,0 +1,139 @@\n+/*\n+ * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package software.amazon.awssdk.services.rds;\n+\n+import java.time.Instant;\n+import java.time.temporal.ChronoUnit;\n+import java.util.function.Consumer;\n+import software.amazon.awssdk.annotations.Immutable;\n+import software.amazon.awssdk.annotations.SdkInternalApi;\n+import software.amazon.awssdk.annotations.SdkPublicApi;\n+import software.amazon.awssdk.auth.credentials.AwsCredentialsProvider;\n+import software.amazon.awssdk.auth.signer.Aws4Signer;\n+import software.amazon.awssdk.auth.signer.params.Aws4PresignerParams;\n+import software.amazon.awssdk.awscore.client.config.AwsClientOption;\n+import software.amazon.awssdk.core.client.config.SdkClientConfiguration;\n+import software.amazon.awssdk.http.SdkHttpFullRequest;\n+import software.amazon.awssdk.http.SdkHttpMethod;\n+import software.amazon.awssdk.regions.Region;\n+import software.amazon.awssdk.services.rds.model.GenerateAuthenticationTokenRequest;\n+import software.amazon.awssdk.utils.StringUtils;\n+\n+@Immutable\n+@SdkPublicApi\n+public final class RdsUtilities {\n+    private final SdkClientConfiguration clientConfiguration;\n+\n+    /**\n+     * SDK currently validates that region is present while constructing {@link RdsUtilities} object.\n+     * This can be relaxed in the future when more methods are added that don't use region.\n+     */\n+    private RdsUtilities(Builder builder) {\n+        this.clientConfiguration = builder.clientConfiguration;\n+    }\n+\n+    /**\n+     * Creates a builder for {@link RdsUtilities}.\n+     */\n+    public static Builder builder() {\n+        return new Builder();\n+    }\n+\n+    // Used by low-level client\n+    @SdkInternalApi\n+    static RdsUtilities create(SdkClientConfiguration clientConfiguration) {\n+        return RdsUtilities.builder().clientConfiguration(clientConfiguration).build();\n+    }\n+\n+    public String generateAuthenticationToken(Consumer<GenerateAuthenticationTokenRequest.Builder> getUrlRequest) {\n+        return generateAuthenticationToken(GenerateAuthenticationTokenRequest.builder().applyMutation(getUrlRequest).build());\n+    }\n+\n+    public String generateAuthenticationToken(GenerateAuthenticationTokenRequest request) {\n+        SdkHttpFullRequest httpRequest = SdkHttpFullRequest.builder()\n+                                            .method(SdkHttpMethod.GET)\n+                                            .protocol(\"https\")\n+                                            .host(request.hostname())\n+                                            .port(request.port())\n+                                            .encodedPath(\"/\")\n+                                            .putRawQueryParameter(\"DBUser\", request.userName())\n+                                            .putRawQueryParameter(\"Action\", \"connect\")\n+                                            .build();\n+\n+        Instant expirationTime = Instant.now().plus(15, ChronoUnit.MINUTES);\n+        Aws4PresignerParams presignRequest = Aws4PresignerParams.builder()\n+                                                .expirationTime(expirationTime)\n+                                                .awsCredentials(resolveCredentials(request).resolveCredentials())\n+                                                .signingName(\"rds-db\")\n+                                                .signingRegion(resolveRegion(request))\n+                                                .build();\n+\n+        SdkHttpFullRequest fullRequest = Aws4Signer.create().presign(httpRequest, presignRequest);\n+        String signedUrl = fullRequest.getUri().toString();\n+\n+        // Format should be: <hostname>>:<port>>/?Action=connect&DBUser=<username>>&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Expi...\n+        // Note: This must be the real RDS hostname, not proxy or tunnels\n+        return StringUtils.replacePrefixIgnoreCase(signedUrl, \"https://\", \"\");\n+    }\n+\n+    private Region resolveRegion(GenerateAuthenticationTokenRequest request) {\n+        if (request.region() != null) {\n+            return request.region();\n+        }\n+\n+        if (this.clientConfiguration != null && this.clientConfiguration.option(AwsClientOption.AWS_REGION) != null) {\n+            return this.clientConfiguration.option(AwsClientOption.AWS_REGION);\n+        }\n+\n+        throw new IllegalArgumentException(\"Region should be provided either in GenerateAuthenticationTokenRequest object or \"\n+                                           + \"inherited from RdsClient#utilities\");\n+    }\n+\n+    private AwsCredentialsProvider resolveCredentials(GenerateAuthenticationTokenRequest request) {\n+        if (request.credentialsProvider() != null) {\n+            return request.credentialsProvider();\n+        }\n+\n+        if (this.clientConfiguration != null && this.clientConfiguration.option(AwsClientOption.CREDENTIALS_PROVIDER) != null) {\n+            return this.clientConfiguration.option(AwsClientOption.CREDENTIALS_PROVIDER);\n+        }\n+\n+        throw new IllegalArgumentException(\"CredentialProvider should be provided either in GenerateAuthenticationTokenRequest \"\n+                                           + \"object or inherited from RdsClient#utilities\");\n+    }\n+\n+    /**\n+     * Builder class to construct {@link RdsUtilities} object\n+     */\n+    public static final class Builder {\n+        private SdkClientConfiguration clientConfiguration;\n+\n+        private Builder() {\n+        }\n+\n+        private Builder clientConfiguration(SdkClientConfiguration clientConfiguration) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3c56269744cd8ef94a13c558bbf52ea923af6784"}, "originalPosition": 127}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDgxMTY1NQ==", "bodyText": "I understand the existing S3Utitlies doesn't have an interface, but seems a good idea to create one for new utility classes.", "url": "https://github.com/aws/aws-sdk-java-v2/pull/2057#discussion_r520811655", "createdAt": "2020-11-10T19:13:34Z", "author": {"login": "zoewangg"}, "path": "services/rds/src/main/java/software/amazon/awssdk/services/rds/RdsUtilities.java", "diffHunk": "@@ -0,0 +1,139 @@\n+/*\n+ * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package software.amazon.awssdk.services.rds;\n+\n+import java.time.Instant;\n+import java.time.temporal.ChronoUnit;\n+import java.util.function.Consumer;\n+import software.amazon.awssdk.annotations.Immutable;\n+import software.amazon.awssdk.annotations.SdkInternalApi;\n+import software.amazon.awssdk.annotations.SdkPublicApi;\n+import software.amazon.awssdk.auth.credentials.AwsCredentialsProvider;\n+import software.amazon.awssdk.auth.signer.Aws4Signer;\n+import software.amazon.awssdk.auth.signer.params.Aws4PresignerParams;\n+import software.amazon.awssdk.awscore.client.config.AwsClientOption;\n+import software.amazon.awssdk.core.client.config.SdkClientConfiguration;\n+import software.amazon.awssdk.http.SdkHttpFullRequest;\n+import software.amazon.awssdk.http.SdkHttpMethod;\n+import software.amazon.awssdk.regions.Region;\n+import software.amazon.awssdk.services.rds.model.GenerateAuthenticationTokenRequest;\n+import software.amazon.awssdk.utils.StringUtils;\n+\n+@Immutable\n+@SdkPublicApi\n+public final class RdsUtilities {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3c56269744cd8ef94a13c558bbf52ea923af6784"}, "originalPosition": 37}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3c56269744cd8ef94a13c558bbf52ea923af6784", "author": {"user": {"login": "abrooksv", "name": "Austin Brooks"}}, "url": "https://github.com/aws/aws-sdk-java-v2/commit/3c56269744cd8ef94a13c558bbf52ea923af6784", "committedDate": "2020-09-22T22:02:10Z", "message": "Checkstyle"}, "afterCommit": {"oid": "0bd2dbe2b355cf7c8856bc8b4eff40e7f67b3c83", "author": {"user": {"login": "abrooksv", "name": "Austin Brooks"}}, "url": "https://github.com/aws/aws-sdk-java-v2/commit/0bd2dbe2b355cf7c8856bc8b4eff40e7f67b3c83", "committedDate": "2021-01-05T00:51:48Z", "message": "Extract out interfaces, add JavaDoc, extend utilities codegen to support interface vs concrete"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYyMTk0NTEw", "url": "https://github.com/aws/aws-sdk-java-v2/pull/2057#pullrequestreview-562194510", "createdAt": "2021-01-05T22:51:09Z", "commit": {"oid": "58191334d6ed1a9be1a88ca6f6939ce5c1c2b3e6"}, "state": "COMMENTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNVQyMjo1MTowOVrOIOqcZw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNVQyMzowNTowNFrOIOqv9w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjI0NjM3NQ==", "bodyText": "Can we add javadocs for it?", "url": "https://github.com/aws/aws-sdk-java-v2/pull/2057#discussion_r552246375", "createdAt": "2021-01-05T22:51:09Z", "author": {"login": "zoewangg"}, "path": "services/rds/src/main/java/software/amazon/awssdk/services/rds/RdsUtilities.java", "diffHunk": "@@ -0,0 +1,66 @@\n+/*\n+ * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package software.amazon.awssdk.services.rds;\n+\n+import java.util.function.Consumer;\n+import software.amazon.awssdk.annotations.SdkPublicApi;\n+import software.amazon.awssdk.auth.credentials.AwsCredentialsProvider;\n+import software.amazon.awssdk.regions.Region;\n+import software.amazon.awssdk.services.rds.model.GenerateAuthenticationTokenRequest;\n+\n+@SdkPublicApi\n+public interface RdsUtilities {\n+    /**\n+     * Create a builder that can be used to configure and create a {@link RdsUtilities}.\n+     */\n+    static Builder builder() {\n+        return new DefaultRdsUtilities.DefaultBuilder();\n+    }\n+\n+    default String generateAuthenticationToken(Consumer<GenerateAuthenticationTokenRequest.Builder> getUrlRequest) {\n+        return generateAuthenticationToken(GenerateAuthenticationTokenRequest.builder().applyMutation(getUrlRequest).build());\n+    }\n+\n+    default String generateAuthenticationToken(GenerateAuthenticationTokenRequest request) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "58191334d6ed1a9be1a88ca6f6939ce5c1c2b3e6"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjI0Njc2Mg==", "bodyText": "Can we add javadocs? same as other public APIs", "url": "https://github.com/aws/aws-sdk-java-v2/pull/2057#discussion_r552246762", "createdAt": "2021-01-05T22:52:14Z", "author": {"login": "zoewangg"}, "path": "services/rds/src/main/java/software/amazon/awssdk/services/rds/model/GenerateAuthenticationTokenRequest.java", "diffHunk": "@@ -0,0 +1,173 @@\n+/*\n+ * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package software.amazon.awssdk.services.rds.model;\n+\n+import software.amazon.awssdk.annotations.NotThreadSafe;\n+import software.amazon.awssdk.annotations.SdkPublicApi;\n+import software.amazon.awssdk.auth.credentials.AwsCredentialsProvider;\n+import software.amazon.awssdk.regions.Region;\n+import software.amazon.awssdk.services.rds.RdsUtilities;\n+import software.amazon.awssdk.utils.HostnameValidator;\n+import software.amazon.awssdk.utils.Validate;\n+import software.amazon.awssdk.utils.builder.CopyableBuilder;\n+import software.amazon.awssdk.utils.builder.ToCopyableBuilder;\n+\n+/**\n+ * Request object to generate an auth token for IAM database authentication.\n+ */\n+@SdkPublicApi\n+public final class GenerateAuthenticationTokenRequest implements\n+        ToCopyableBuilder<GenerateAuthenticationTokenRequest.Builder, GenerateAuthenticationTokenRequest> {\n+    private final String hostname;\n+    private final int port;\n+    private final String username;\n+    private final Region region;\n+    private final AwsCredentialsProvider credentialsProvider;\n+\n+    public GenerateAuthenticationTokenRequest(BuilderImpl builder) {\n+        HostnameValidator.validateHostnameCompliant(builder.hostname, \"hostname\", \"GenerateAuthenticationTokenRequest\");\n+\n+        this.hostname = Validate.notEmpty(builder.hostname, \"hostname\");\n+        this.port = Validate.isPositive(builder.port, \"port\");\n+        this.username = Validate.notEmpty(builder.username, \"username\");\n+        this.region = builder.region;\n+        this.credentialsProvider = builder.credentialsProvider;\n+    }\n+\n+    public String hostname() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "58191334d6ed1a9be1a88ca6f6939ce5c1c2b3e6"}, "originalPosition": 50}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjI0NjkyOQ==", "bodyText": "username()?", "url": "https://github.com/aws/aws-sdk-java-v2/pull/2057#discussion_r552246929", "createdAt": "2021-01-05T22:52:46Z", "author": {"login": "zoewangg"}, "path": "services/rds/src/main/java/software/amazon/awssdk/services/rds/model/GenerateAuthenticationTokenRequest.java", "diffHunk": "@@ -0,0 +1,173 @@\n+/*\n+ * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package software.amazon.awssdk.services.rds.model;\n+\n+import software.amazon.awssdk.annotations.NotThreadSafe;\n+import software.amazon.awssdk.annotations.SdkPublicApi;\n+import software.amazon.awssdk.auth.credentials.AwsCredentialsProvider;\n+import software.amazon.awssdk.regions.Region;\n+import software.amazon.awssdk.services.rds.RdsUtilities;\n+import software.amazon.awssdk.utils.HostnameValidator;\n+import software.amazon.awssdk.utils.Validate;\n+import software.amazon.awssdk.utils.builder.CopyableBuilder;\n+import software.amazon.awssdk.utils.builder.ToCopyableBuilder;\n+\n+/**\n+ * Request object to generate an auth token for IAM database authentication.\n+ */\n+@SdkPublicApi\n+public final class GenerateAuthenticationTokenRequest implements\n+        ToCopyableBuilder<GenerateAuthenticationTokenRequest.Builder, GenerateAuthenticationTokenRequest> {\n+    private final String hostname;\n+    private final int port;\n+    private final String username;\n+    private final Region region;\n+    private final AwsCredentialsProvider credentialsProvider;\n+\n+    public GenerateAuthenticationTokenRequest(BuilderImpl builder) {\n+        HostnameValidator.validateHostnameCompliant(builder.hostname, \"hostname\", \"GenerateAuthenticationTokenRequest\");\n+\n+        this.hostname = Validate.notEmpty(builder.hostname, \"hostname\");\n+        this.port = Validate.isPositive(builder.port, \"port\");\n+        this.username = Validate.notEmpty(builder.username, \"username\");\n+        this.region = builder.region;\n+        this.credentialsProvider = builder.credentialsProvider;\n+    }\n+\n+    public String hostname() {\n+        return hostname;\n+    }\n+\n+    public int port() {\n+        return port;\n+    }\n+\n+    public String userName() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "58191334d6ed1a9be1a88ca6f6939ce5c1c2b3e6"}, "originalPosition": 58}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjI0OTg4Mw==", "bodyText": "nit, can we make it a constant and add a comment with the link there so that it's less of a magic number?", "url": "https://github.com/aws/aws-sdk-java-v2/pull/2057#discussion_r552249883", "createdAt": "2021-01-05T23:00:38Z", "author": {"login": "zoewangg"}, "path": "services/rds/src/main/java/software/amazon/awssdk/services/rds/DefaultRdsUtilities.java", "diffHunk": "@@ -0,0 +1,141 @@\n+/*\n+ * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package software.amazon.awssdk.services.rds;\n+\n+import java.time.Instant;\n+import java.time.temporal.ChronoUnit;\n+import software.amazon.awssdk.annotations.Immutable;\n+import software.amazon.awssdk.annotations.SdkInternalApi;\n+import software.amazon.awssdk.auth.credentials.AwsCredentialsProvider;\n+import software.amazon.awssdk.auth.signer.Aws4Signer;\n+import software.amazon.awssdk.auth.signer.params.Aws4PresignerParams;\n+import software.amazon.awssdk.awscore.client.config.AwsClientOption;\n+import software.amazon.awssdk.core.client.config.SdkClientConfiguration;\n+import software.amazon.awssdk.http.SdkHttpFullRequest;\n+import software.amazon.awssdk.http.SdkHttpMethod;\n+import software.amazon.awssdk.regions.Region;\n+import software.amazon.awssdk.services.rds.model.GenerateAuthenticationTokenRequest;\n+import software.amazon.awssdk.utils.StringUtils;\n+\n+@Immutable\n+@SdkInternalApi\n+final class DefaultRdsUtilities implements RdsUtilities {\n+    private final Region region;\n+    private final AwsCredentialsProvider credentialsProvider;\n+\n+    DefaultRdsUtilities(DefaultBuilder builder) {\n+        this.credentialsProvider = builder.credentialsProvider;\n+        this.region = builder.region;\n+    }\n+\n+    /**\n+     * Used by RDS low-level client's utilities() method\n+     */\n+    @SdkInternalApi\n+    static RdsUtilities create(SdkClientConfiguration clientConfiguration) {\n+        return new DefaultBuilder().clientConfiguration(clientConfiguration).build();\n+    }\n+\n+    @Override\n+    public String generateAuthenticationToken(GenerateAuthenticationTokenRequest request) {\n+        SdkHttpFullRequest httpRequest = SdkHttpFullRequest.builder()\n+                                            .method(SdkHttpMethod.GET)\n+                                            .protocol(\"https\")\n+                                            .host(request.hostname())\n+                                            .port(request.port())\n+                                            .encodedPath(\"/\")\n+                                            .putRawQueryParameter(\"DBUser\", request.userName())\n+                                            .putRawQueryParameter(\"Action\", \"connect\")\n+                                            .build();\n+\n+        Instant expirationTime = Instant.now().plus(15, ChronoUnit.MINUTES);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "58191334d6ed1a9be1a88ca6f6939ce5c1c2b3e6"}, "originalPosition": 64}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjI1MTM4Mw==", "bodyText": "Seems like we can reuse the signer.", "url": "https://github.com/aws/aws-sdk-java-v2/pull/2057#discussion_r552251383", "createdAt": "2021-01-05T23:05:04Z", "author": {"login": "zoewangg"}, "path": "services/rds/src/main/java/software/amazon/awssdk/services/rds/DefaultRdsUtilities.java", "diffHunk": "@@ -0,0 +1,141 @@\n+/*\n+ * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package software.amazon.awssdk.services.rds;\n+\n+import java.time.Instant;\n+import java.time.temporal.ChronoUnit;\n+import software.amazon.awssdk.annotations.Immutable;\n+import software.amazon.awssdk.annotations.SdkInternalApi;\n+import software.amazon.awssdk.auth.credentials.AwsCredentialsProvider;\n+import software.amazon.awssdk.auth.signer.Aws4Signer;\n+import software.amazon.awssdk.auth.signer.params.Aws4PresignerParams;\n+import software.amazon.awssdk.awscore.client.config.AwsClientOption;\n+import software.amazon.awssdk.core.client.config.SdkClientConfiguration;\n+import software.amazon.awssdk.http.SdkHttpFullRequest;\n+import software.amazon.awssdk.http.SdkHttpMethod;\n+import software.amazon.awssdk.regions.Region;\n+import software.amazon.awssdk.services.rds.model.GenerateAuthenticationTokenRequest;\n+import software.amazon.awssdk.utils.StringUtils;\n+\n+@Immutable\n+@SdkInternalApi\n+final class DefaultRdsUtilities implements RdsUtilities {\n+    private final Region region;\n+    private final AwsCredentialsProvider credentialsProvider;\n+\n+    DefaultRdsUtilities(DefaultBuilder builder) {\n+        this.credentialsProvider = builder.credentialsProvider;\n+        this.region = builder.region;\n+    }\n+\n+    /**\n+     * Used by RDS low-level client's utilities() method\n+     */\n+    @SdkInternalApi\n+    static RdsUtilities create(SdkClientConfiguration clientConfiguration) {\n+        return new DefaultBuilder().clientConfiguration(clientConfiguration).build();\n+    }\n+\n+    @Override\n+    public String generateAuthenticationToken(GenerateAuthenticationTokenRequest request) {\n+        SdkHttpFullRequest httpRequest = SdkHttpFullRequest.builder()\n+                                            .method(SdkHttpMethod.GET)\n+                                            .protocol(\"https\")\n+                                            .host(request.hostname())\n+                                            .port(request.port())\n+                                            .encodedPath(\"/\")\n+                                            .putRawQueryParameter(\"DBUser\", request.userName())\n+                                            .putRawQueryParameter(\"Action\", \"connect\")\n+                                            .build();\n+\n+        Instant expirationTime = Instant.now().plus(15, ChronoUnit.MINUTES);\n+        Aws4PresignerParams presignRequest = Aws4PresignerParams.builder()\n+                                                .expirationTime(expirationTime)\n+                                                .awsCredentials(resolveCredentials(request).resolveCredentials())\n+                                                .signingName(\"rds-db\")\n+                                                .signingRegion(resolveRegion(request))\n+                                                .build();\n+\n+        SdkHttpFullRequest fullRequest = Aws4Signer.create().presign(httpRequest, presignRequest);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "58191334d6ed1a9be1a88ca6f6939ce5c1c2b3e6"}, "originalPosition": 72}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "58191334d6ed1a9be1a88ca6f6939ce5c1c2b3e6", "author": {"user": {"login": "abrooksv", "name": "Austin Brooks"}}, "url": "https://github.com/aws/aws-sdk-java-v2/commit/58191334d6ed1a9be1a88ca6f6939ce5c1c2b3e6", "committedDate": "2021-01-05T02:13:52Z", "message": "Checkstyle"}, "afterCommit": {"oid": "05420271e4d7e9818abbba6bb3cc9f2499164aea", "author": {"user": {"login": "abrooksv", "name": "Austin Brooks"}}, "url": "https://github.com/aws/aws-sdk-java-v2/commit/05420271e4d7e9818abbba6bb3cc9f2499164aea", "committedDate": "2021-01-25T20:30:21Z", "message": "Add more JavaDoc and tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTc1ODM0Mzc0", "url": "https://github.com/aws/aws-sdk-java-v2/pull/2057#pullrequestreview-575834374", "createdAt": "2021-01-25T21:45:27Z", "commit": {"oid": "05420271e4d7e9818abbba6bb3cc9f2499164aea"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0yNVQyMTo0NToyN1rOIZ7xkg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0yNVQyMTo0NToyN1rOIZ7xkg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NDA2NDY1OA==", "bodyText": "Test data came from AWS CLI: https://github.com/aws/aws-cli/blob/master/tests/functional/rds/test_generate_db_auth_token.py#L50", "url": "https://github.com/aws/aws-sdk-java-v2/pull/2057#discussion_r564064658", "createdAt": "2021-01-25T21:45:27Z", "author": {"login": "abrooksv"}, "path": "services/rds/src/test/java/software/amazon/awssdk/services/rds/DefaultRdsUtilitiesTest.java", "diffHunk": "@@ -0,0 +1,128 @@\n+package software.amazon.awssdk.services.rds;\n+\n+import org.junit.Test;\n+import software.amazon.awssdk.auth.credentials.AwsBasicCredentials;\n+import software.amazon.awssdk.auth.credentials.AwsCredentialsProvider;\n+import software.amazon.awssdk.auth.credentials.StaticCredentialsProvider;\n+import software.amazon.awssdk.regions.Region;\n+\n+import java.time.Clock;\n+import java.time.ZoneId;\n+import java.time.ZonedDateTime;\n+import software.amazon.awssdk.services.rds.DefaultRdsUtilities.DefaultBuilder;\n+\n+import static org.assertj.core.api.AssertionsForClassTypes.assertThat;\n+import static org.assertj.core.api.AssertionsForClassTypes.assertThatThrownBy;\n+\n+public class DefaultRdsUtilitiesTest {\n+    private final ZoneId utcZone = ZoneId.of(\"UTC\").normalized();\n+    private final Clock fixedClock = Clock.fixed(ZonedDateTime.of(2016, 11, 7, 17, 39, 33, 0, utcZone).toInstant(), utcZone);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "05420271e4d7e9818abbba6bb3cc9f2499164aea"}, "originalPosition": 19}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7cedded6fa3872f4d43bdabd611a3df2e53ea494", "author": {"user": {"login": "abrooksv", "name": "Austin Brooks"}}, "url": "https://github.com/aws/aws-sdk-java-v2/commit/7cedded6fa3872f4d43bdabd611a3df2e53ea494", "committedDate": "2021-01-25T22:02:13Z", "message": "Add section to LaunchChangelog.md"}, "afterCommit": {"oid": "f178c96a68f94ec9978e96ba71332ccdf7dedf81", "author": {"user": {"login": "abrooksv", "name": "Austin Brooks"}}, "url": "https://github.com/aws/aws-sdk-java-v2/commit/f178c96a68f94ec9978e96ba71332ccdf7dedf81", "committedDate": "2021-01-25T22:03:44Z", "message": "Add section to LaunchChangelog.md"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f178c96a68f94ec9978e96ba71332ccdf7dedf81", "author": {"user": {"login": "abrooksv", "name": "Austin Brooks"}}, "url": "https://github.com/aws/aws-sdk-java-v2/commit/f178c96a68f94ec9978e96ba71332ccdf7dedf81", "committedDate": "2021-01-25T22:03:44Z", "message": "Add section to LaunchChangelog.md"}, "afterCommit": {"oid": "1ef3854da8e51f5c7362665003dad6bb84a67180", "author": {"user": {"login": "abrooksv", "name": "Austin Brooks"}}, "url": "https://github.com/aws/aws-sdk-java-v2/commit/1ef3854da8e51f5c7362665003dad6bb84a67180", "committedDate": "2021-01-25T22:05:47Z", "message": "Add section to LaunchChangelog.md"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTg1Nzc4MDgw", "url": "https://github.com/aws/aws-sdk-java-v2/pull/2057#pullrequestreview-585778080", "createdAt": "2021-02-08T18:04:19Z", "commit": {"oid": "1ef3854da8e51f5c7362665003dad6bb84a67180"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0wOFQxODowNDoxOVrOIhvzrw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0wOFQxODowNDoxOVrOIhvzrw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3MjI1NzE5OQ==", "bodyText": "Nit, should we move this option up since it's recommended", "url": "https://github.com/aws/aws-sdk-java-v2/pull/2057#discussion_r572257199", "createdAt": "2021-02-08T18:04:19Z", "author": {"login": "zoewangg"}, "path": "services/rds/src/main/java/software/amazon/awssdk/services/rds/RdsUtilities.java", "diffHunk": "@@ -0,0 +1,104 @@\n+/*\n+ * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package software.amazon.awssdk.services.rds;\n+\n+import java.util.function.Consumer;\n+import software.amazon.awssdk.annotations.SdkPublicApi;\n+import software.amazon.awssdk.auth.credentials.AwsCredentialsProvider;\n+import software.amazon.awssdk.regions.Region;\n+import software.amazon.awssdk.services.rds.model.GenerateAuthenticationTokenRequest;\n+\n+/**\n+ * Utilities for working with RDS. An instance of this class can be created by:\n+ * <p>\n+ * 1) Directly using the {@link #builder()} method.\n+ *\n+ * <pre>\n+ * RdsUtilities utilities = RdsUtilities.builder()\n+ *  .credentialsProvider(DefaultCredentialsProvider.create())\n+ *  .region(Region.US_WEST_2)\n+ *  .build()\n+ * </pre>\n+ * </p>\n+ *\n+ * <p>\n+ * 2) Using the low-level client {@link RdsClient#utilities()} (or {@link RdsAsyncClient#utilities()}} method. This is\n+ * recommended as SDK will use the same configuration from the {@link RdsClient} object to create the {@link RdsUtilities} object.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ef3854da8e51f5c7362665003dad6bb84a67180"}, "originalPosition": 39}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1ef3854da8e51f5c7362665003dad6bb84a67180", "author": {"user": {"login": "abrooksv", "name": "Austin Brooks"}}, "url": "https://github.com/aws/aws-sdk-java-v2/commit/1ef3854da8e51f5c7362665003dad6bb84a67180", "committedDate": "2021-01-25T22:05:47Z", "message": "Add section to LaunchChangelog.md"}, "afterCommit": {"oid": "4348a5d79d297be474f526f36bd3093b555c4b6b", "author": {"user": {"login": "abrooksv", "name": "Austin Brooks"}}, "url": "https://github.com/aws/aws-sdk-java-v2/commit/4348a5d79d297be474f526f36bd3093b555c4b6b", "committedDate": "2021-02-16T22:40:18Z", "message": "Add a RdsUtilities class with the ability to generate an IAM auth token"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTkxNjg5MjEz", "url": "https://github.com/aws/aws-sdk-java-v2/pull/2057#pullrequestreview-591689213", "createdAt": "2021-02-16T22:44:37Z", "commit": {"oid": "4348a5d79d297be474f526f36bd3093b555c4b6b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0c064a02e76f6588d4a7ef8558d2a9b88aa85c2a", "author": {"user": {"login": "abrooksv", "name": "Austin Brooks"}}, "url": "https://github.com/aws/aws-sdk-java-v2/commit/0c064a02e76f6588d4a7ef8558d2a9b88aa85c2a", "committedDate": "2021-02-18T21:45:43Z", "message": "Add a RdsUtilities class with the ability to generate an IAM auth token"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4348a5d79d297be474f526f36bd3093b555c4b6b", "author": {"user": {"login": "abrooksv", "name": "Austin Brooks"}}, "url": "https://github.com/aws/aws-sdk-java-v2/commit/4348a5d79d297be474f526f36bd3093b555c4b6b", "committedDate": "2021-02-16T22:40:18Z", "message": "Add a RdsUtilities class with the ability to generate an IAM auth token"}, "afterCommit": {"oid": "0c064a02e76f6588d4a7ef8558d2a9b88aa85c2a", "author": {"user": {"login": "abrooksv", "name": "Austin Brooks"}}, "url": "https://github.com/aws/aws-sdk-java-v2/commit/0c064a02e76f6588d4a7ef8558d2a9b88aa85c2a", "committedDate": "2021-02-18T21:45:43Z", "message": "Add a RdsUtilities class with the ability to generate an IAM auth token"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTkzNjk0MDMw", "url": "https://github.com/aws/aws-sdk-java-v2/pull/2057#pullrequestreview-593694030", "createdAt": "2021-02-18T22:18:58Z", "commit": {"oid": "0c064a02e76f6588d4a7ef8558d2a9b88aa85c2a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2475, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}