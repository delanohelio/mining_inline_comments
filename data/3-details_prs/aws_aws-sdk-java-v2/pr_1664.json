{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc5Mjg5MDQ5", "number": 1664, "title": "First iteration of the BeanTableSchema implementation of TableSchema", "bodyText": "Description\nImplementation of TableSchema that performs an introspective scan of an annotated bean class and creates a wrapped StaticTableSchema from it.\nRelates to #35\nMotivation and Context\nCustomers used to the DynamoDbMapper in the v1 SDK will be more familiar with this option.\nTesting\nTests are included.\nTypes of changes\n\n\n Bug fix (non-breaking change which fixes an issue)\n New feature (non-breaking change which adds functionality)\n\nChecklist\n\n\n\n I have read the CONTRIBUTING document\n Local run of mvn install succeeds\n My code follows the code style of this project\n My change requires a change to the Javadoc documentation\n I have updated the Javadoc documentation accordingly\n I have read the README document\n I have added tests to cover my changes\n All new and existing tests passed\n A short description of the change has been added to the CHANGELOG\n My change is to implement 1.11 parity feature and I have updated LaunchChangelog\n\nLicense\n\n\n\n\n I confirm that this pull request can be released under the Apache 2 license", "createdAt": "2020-02-24T23:46:19Z", "url": "https://github.com/aws/aws-sdk-java-v2/pull/1664", "merged": true, "mergeCommit": {"oid": "cc3f3efe16244979ba5ae1a58e1940c92340c3d6"}, "closed": true, "closedAt": "2020-02-25T23:30:49Z", "author": {"login": "bmaizels"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcHmgdeABqjMwNjc0NDE5Mjg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcH6eO0AH2gAyMzc5Mjg5MDQ5OmE1YTkwYzk2ZjJjN2E0ZTgzYTdhY2M1ZGJjMTUwNWU3NWUwNDE0NjE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "46851f0269316f99476beb347be99286b764408b", "author": {"user": {"login": "bmaizels", "name": "Benjamin Maizels"}}, "url": "https://github.com/aws/aws-sdk-java-v2/commit/46851f0269316f99476beb347be99286b764408b", "committedDate": "2020-02-24T23:42:56Z", "message": "First iteration of the BeanTableSchema implementation of TableSchema"}, "afterCommit": {"oid": "b7aba9eae85f8f16d8f3093f5ffa9de4cafd2e06", "author": {"user": {"login": "bmaizels", "name": "Benjamin Maizels"}}, "url": "https://github.com/aws/aws-sdk-java-v2/commit/b7aba9eae85f8f16d8f3093f5ffa9de4cafd2e06", "committedDate": "2020-02-24T23:54:42Z", "message": "First iteration of the BeanTableSchema implementation of TableSchema"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b7aba9eae85f8f16d8f3093f5ffa9de4cafd2e06", "author": {"user": {"login": "bmaizels", "name": "Benjamin Maizels"}}, "url": "https://github.com/aws/aws-sdk-java-v2/commit/b7aba9eae85f8f16d8f3093f5ffa9de4cafd2e06", "committedDate": "2020-02-24T23:54:42Z", "message": "First iteration of the BeanTableSchema implementation of TableSchema"}, "afterCommit": {"oid": "6c30acb2444f18bc1e1292a7561dd084ecf09925", "author": {"user": {"login": "bmaizels", "name": "Benjamin Maizels"}}, "url": "https://github.com/aws/aws-sdk-java-v2/commit/6c30acb2444f18bc1e1292a7561dd084ecf09925", "committedDate": "2020-02-24T23:56:12Z", "message": "First iteration of the BeanTableSchema implementation of TableSchema"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6c30acb2444f18bc1e1292a7561dd084ecf09925", "author": {"user": {"login": "bmaizels", "name": "Benjamin Maizels"}}, "url": "https://github.com/aws/aws-sdk-java-v2/commit/6c30acb2444f18bc1e1292a7561dd084ecf09925", "committedDate": "2020-02-24T23:56:12Z", "message": "First iteration of the BeanTableSchema implementation of TableSchema"}, "afterCommit": {"oid": "76c612bbfd38b5f30d0f131341902edb4abb1655", "author": {"user": {"login": "bmaizels", "name": "Benjamin Maizels"}}, "url": "https://github.com/aws/aws-sdk-java-v2/commit/76c612bbfd38b5f30d0f131341902edb4abb1655", "committedDate": "2020-02-24T23:57:14Z", "message": "First iteration of the BeanTableSchema implementation of TableSchema"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "76c612bbfd38b5f30d0f131341902edb4abb1655", "author": {"user": {"login": "bmaizels", "name": "Benjamin Maizels"}}, "url": "https://github.com/aws/aws-sdk-java-v2/commit/76c612bbfd38b5f30d0f131341902edb4abb1655", "committedDate": "2020-02-24T23:57:14Z", "message": "First iteration of the BeanTableSchema implementation of TableSchema"}, "afterCommit": {"oid": "b343c3e5d9303965bd146c0c8857dc4da751a2e4", "author": {"user": {"login": "bmaizels", "name": "Benjamin Maizels"}}, "url": "https://github.com/aws/aws-sdk-java-v2/commit/b343c3e5d9303965bd146c0c8857dc4da751a2e4", "committedDate": "2020-02-25T20:28:30Z", "message": "First iteration of the BeanTableSchema implementation of TableSchema"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY0NDc5NjQ1", "url": "https://github.com/aws/aws-sdk-java-v2/pull/1664#pullrequestreview-364479645", "createdAt": "2020-02-25T21:58:14Z", "commit": {"oid": "b343c3e5d9303965bd146c0c8857dc4da751a2e4"}, "state": "APPROVED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQyMjowNzo0MlrOFuXBtQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQyMjoyMjowNlrOFuXaww==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDE1NjA4NQ==", "bodyText": "Extra new line here", "url": "https://github.com/aws/aws-sdk-java-v2/pull/1664#discussion_r384156085", "createdAt": "2020-02-25T22:07:42Z", "author": {"login": "spfink"}, "path": "services-custom/dynamodb-enhanced/src/main/java/software/amazon/awssdk/extensions/dynamodb/mappingclient/beanmapper/annotations/BeanTableSchemaAttributeTag.java", "diffHunk": "@@ -0,0 +1,43 @@\n+/*\n+ * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package software.amazon.awssdk.extensions.dynamodb.mappingclient.beanmapper.annotations;\n+\n+import java.lang.annotation.ElementType;\n+import java.lang.annotation.Retention;\n+import java.lang.annotation.RetentionPolicy;\n+import java.lang.annotation.Target;\n+\n+import software.amazon.awssdk.annotations.SdkPublicApi;\n+import software.amazon.awssdk.extensions.dynamodb.mappingclient.staticmapper.AttributeTag;\n+\n+/**\n+ * This meta-annotation is not used directly in DynamoDb beans, it is used to annotate other annotations that are\n+ * used with DynamoDb beans. You should use this meta-annotation if you are creating new annotations for the\n+ * BeanTableSchema.\n+ *\n+ * Meta-annotation for BeanTableSchema annotations that are used to assign an {@link AttributeTag} to a property on the\n+ * bean. When an annotation that is annotated with this meta-annotation is found on a property being scanned by the\n+ * {@link software.amazon.awssdk.extensions.dynamodb.mappingclient.beanmapper.BeanTableSchema} then a static method\n+ * named 'attributeTagFor' will be invoked passing in a single argument which is the property annotation itself.\n+ */\n+@Target({ElementType.TYPE})\n+@Retention(RetentionPolicy.RUNTIME)\n+@SdkPublicApi\n+public @interface BeanTableSchemaAttributeTag {\n+    Class<?> value();\n+}\n+\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b343c3e5d9303965bd146c0c8857dc4da751a2e4"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDE2MDc2Nw==", "bodyText": "Extra new line here", "url": "https://github.com/aws/aws-sdk-java-v2/pull/1664#discussion_r384160767", "createdAt": "2020-02-25T22:18:20Z", "author": {"login": "spfink"}, "path": "services-custom/dynamodb-enhanced/src/main/java/software/amazon/awssdk/extensions/dynamodb/mappingclient/beanmapper/BeanConstructor.java", "diffHunk": "@@ -0,0 +1,41 @@\n+/*\n+ * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package software.amazon.awssdk.extensions.dynamodb.mappingclient.beanmapper;\n+\n+import java.lang.reflect.Constructor;\n+import java.util.function.Supplier;\n+\n+import software.amazon.awssdk.annotations.SdkInternalApi;\n+import software.amazon.awssdk.utils.Validate;\n+\n+@FunctionalInterface\n+@SdkInternalApi\n+@SuppressWarnings(\"unchecked\")\n+public interface BeanConstructor<BeanT> extends Supplier<BeanT> {\n+    static <BeanT> BeanConstructor<BeanT> create(Class<BeanT> beanClass, Constructor<BeanT> noArgsConstructor) {\n+        Validate.isTrue(noArgsConstructor.getParameterCount() == 0,\n+                        \"%s has no default constructor.\",\n+                        beanClass);\n+\n+        return LambdaToMethodBridgeBuilder.create(BeanConstructor.class)\n+                                          .lambdaMethodName(\"get\")\n+                                          .runtimeLambdaSignature(Object.class)\n+                                          .compileTimeLambdaSignature(beanClass)\n+                                          .targetMethod(noArgsConstructor)\n+                                          .build();\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b343c3e5d9303965bd146c0c8857dc4da751a2e4"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDE2MjEzNA==", "bodyText": "Add javadoc here?", "url": "https://github.com/aws/aws-sdk-java-v2/pull/1664#discussion_r384162134", "createdAt": "2020-02-25T22:21:19Z", "author": {"login": "spfink"}, "path": "services-custom/dynamodb-enhanced/src/main/java/software/amazon/awssdk/extensions/dynamodb/mappingclient/beanmapper/annotations/DynamoDbAttribute.java", "diffHunk": "@@ -0,0 +1,35 @@\n+/*\n+ * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package software.amazon.awssdk.extensions.dynamodb.mappingclient.beanmapper.annotations;\n+\n+import java.lang.annotation.ElementType;\n+import java.lang.annotation.Retention;\n+import java.lang.annotation.RetentionPolicy;\n+import java.lang.annotation.Target;\n+\n+import software.amazon.awssdk.annotations.SdkPublicApi;\n+\n+/**\n+ * Used to explicitly designate a field or getter or setter to participate as an attribute in the mapped database\n+ * object with a custom name. A string value must be specified to specify a different name for the attribute than the\n+ * mapper would automatically infer using a naming strategy.\n+ */\n+@Target({ElementType.METHOD})\n+@Retention(RetentionPolicy.RUNTIME)\n+@SdkPublicApi\n+public @interface DynamoDbAttribute {\n+    String value();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b343c3e5d9303965bd146c0c8857dc4da751a2e4"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDE2MjQ0NQ==", "bodyText": "Javadoc?", "url": "https://github.com/aws/aws-sdk-java-v2/pull/1664#discussion_r384162445", "createdAt": "2020-02-25T22:21:59Z", "author": {"login": "spfink"}, "path": "services-custom/dynamodb-enhanced/src/main/java/software/amazon/awssdk/extensions/dynamodb/mappingclient/beanmapper/annotations/DynamoDbSecondaryPartitionKey.java", "diffHunk": "@@ -0,0 +1,37 @@\n+/*\n+ * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package software.amazon.awssdk.extensions.dynamodb.mappingclient.beanmapper.annotations;\n+\n+import java.lang.annotation.ElementType;\n+import java.lang.annotation.Retention;\n+import java.lang.annotation.RetentionPolicy;\n+import java.lang.annotation.Target;\n+\n+import software.amazon.awssdk.annotations.SdkPublicApi;\n+import software.amazon.awssdk.extensions.dynamodb.mappingclient.beanmapper.BeanTableSchemaAttributeTags;\n+\n+/**\n+ * Denotes a partition key for a global secondary index. You must also specify at least one index name, although this\n+ * name is only referenced internally by the enhanced client to disambiguate the index and does not actually need to\n+ * match the real name of the index.\n+ */\n+@SdkPublicApi\n+@Target({ElementType.METHOD})\n+@Retention(RetentionPolicy.RUNTIME)\n+@BeanTableSchemaAttributeTag(BeanTableSchemaAttributeTags.class)\n+public @interface DynamoDbSecondaryPartitionKey {\n+    String[] indexNames();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b343c3e5d9303965bd146c0c8857dc4da751a2e4"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDE2MjQ5OQ==", "bodyText": "Javadoc?", "url": "https://github.com/aws/aws-sdk-java-v2/pull/1664#discussion_r384162499", "createdAt": "2020-02-25T22:22:06Z", "author": {"login": "spfink"}, "path": "services-custom/dynamodb-enhanced/src/main/java/software/amazon/awssdk/extensions/dynamodb/mappingclient/beanmapper/annotations/DynamoDbSecondarySortKey.java", "diffHunk": "@@ -0,0 +1,38 @@\n+/*\n+ * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package software.amazon.awssdk.extensions.dynamodb.mappingclient.beanmapper.annotations;\n+\n+import java.lang.annotation.ElementType;\n+import java.lang.annotation.Retention;\n+import java.lang.annotation.RetentionPolicy;\n+import java.lang.annotation.Target;\n+\n+import software.amazon.awssdk.annotations.SdkPublicApi;\n+import software.amazon.awssdk.extensions.dynamodb.mappingclient.beanmapper.BeanTableSchemaAttributeTags;\n+\n+/**\n+ * Denotes an optional sort key for a global or local secondary index. You must also specify the index name which in the\n+ * case of a global secondary index must match the index name supplied with the secondary partition key for the same\n+ * index. This name is only referenced internally by the enhanced client to disambiguate the index and does not actually\n+ * need to match the real name of the index.\n+ */\n+@SdkPublicApi\n+@Target({ElementType.METHOD})\n+@Retention(RetentionPolicy.RUNTIME)\n+@BeanTableSchemaAttributeTag(BeanTableSchemaAttributeTags.class)\n+public @interface DynamoDbSecondarySortKey {\n+    String[] indexNames();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b343c3e5d9303965bd146c0c8857dc4da751a2e4"}, "originalPosition": 37}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "585e35982bde9a6e48a346b6accd2ff681315f4c", "author": {"user": {"login": "bmaizels", "name": "Benjamin Maizels"}}, "url": "https://github.com/aws/aws-sdk-java-v2/commit/585e35982bde9a6e48a346b6accd2ff681315f4c", "committedDate": "2020-02-25T22:46:59Z", "message": "First iteration of the BeanTableSchema implementation of TableSchema"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b343c3e5d9303965bd146c0c8857dc4da751a2e4", "author": {"user": {"login": "bmaizels", "name": "Benjamin Maizels"}}, "url": "https://github.com/aws/aws-sdk-java-v2/commit/b343c3e5d9303965bd146c0c8857dc4da751a2e4", "committedDate": "2020-02-25T20:28:30Z", "message": "First iteration of the BeanTableSchema implementation of TableSchema"}, "afterCommit": {"oid": "585e35982bde9a6e48a346b6accd2ff681315f4c", "author": {"user": {"login": "bmaizels", "name": "Benjamin Maizels"}}, "url": "https://github.com/aws/aws-sdk-java-v2/commit/585e35982bde9a6e48a346b6accd2ff681315f4c", "committedDate": "2020-02-25T22:46:59Z", "message": "First iteration of the BeanTableSchema implementation of TableSchema"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a5a90c96f2c7a4e83a7acc5dbc1505e75e041461", "author": {"user": {"login": "bmaizels", "name": "Benjamin Maizels"}}, "url": "https://github.com/aws/aws-sdk-java-v2/commit/a5a90c96f2c7a4e83a7acc5dbc1505e75e041461", "committedDate": "2020-02-25T23:11:04Z", "message": "Merge branch 'master' into bmaizels/ddbmapper-beantableschema"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2686, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}