{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA0MzI0NjIz", "number": 2093, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxNjozMTozMlrOEvZsLw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxNjozNjowN1rOEvZzew==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE4MTM5NDM5OnYy", "diffSide": "RIGHT", "path": "services/s3/src/main/java/software/amazon/awssdk/services/s3/internal/endpoints/S3AccessPointEndpointResolver.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxNjozMTozMlrOHkXO0A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxNzozMDoxMFrOHkZdXQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzg5MTQwOA==", "bodyText": "Usually when we go to the trouble to do this (which we don't tend to for internal classes), there's also a private default constructor.", "url": "https://github.com/aws/aws-sdk-java-v2/pull/2093#discussion_r507891408", "createdAt": "2020-10-19T16:31:32Z", "author": {"login": "bmaizels"}, "path": "services/s3/src/main/java/software/amazon/awssdk/services/s3/internal/endpoints/S3AccessPointEndpointResolver.java", "diffHunk": "@@ -0,0 +1,209 @@\n+/*\n+ * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package software.amazon.awssdk.services.s3.internal.endpoints;\n+\n+import static software.amazon.awssdk.services.s3.internal.endpoints.S3EndpointUtils.isAccelerateEnabled;\n+import static software.amazon.awssdk.services.s3.internal.endpoints.S3EndpointUtils.isArnRegionEnabled;\n+import static software.amazon.awssdk.services.s3.internal.endpoints.S3EndpointUtils.isDualstackEnabled;\n+import static software.amazon.awssdk.services.s3.internal.endpoints.S3EndpointUtils.isFipsRegion;\n+import static software.amazon.awssdk.services.s3.internal.endpoints.S3EndpointUtils.isFipsRegionProvided;\n+import static software.amazon.awssdk.services.s3.internal.endpoints.S3EndpointUtils.isPathStyleAccessEnabled;\n+import static software.amazon.awssdk.services.s3.internal.endpoints.S3EndpointUtils.removeFipsIfNeeded;\n+\n+import java.net.URI;\n+import software.amazon.awssdk.annotations.SdkInternalApi;\n+import software.amazon.awssdk.arns.Arn;\n+import software.amazon.awssdk.http.SdkHttpRequest;\n+import software.amazon.awssdk.regions.PartitionMetadata;\n+import software.amazon.awssdk.regions.Region;\n+import software.amazon.awssdk.services.s3.S3Configuration;\n+import software.amazon.awssdk.services.s3.internal.ConfiguredS3SdkHttpRequest;\n+import software.amazon.awssdk.services.s3.internal.resource.S3AccessPointBuilder;\n+import software.amazon.awssdk.services.s3.internal.resource.S3AccessPointResource;\n+import software.amazon.awssdk.services.s3.internal.resource.S3ArnConverter;\n+import software.amazon.awssdk.services.s3.internal.resource.S3OutpostAccessPointBuilder;\n+import software.amazon.awssdk.services.s3.internal.resource.S3OutpostResource;\n+import software.amazon.awssdk.services.s3.internal.resource.S3Resource;\n+import software.amazon.awssdk.services.s3.internal.resource.S3ResourceType;\n+import software.amazon.awssdk.utils.Validate;\n+\n+/**\n+ * Returns a new configured HTTP request with a resolved access point endpoint and signing overrides.\n+ */\n+@SdkInternalApi\n+public final class S3AccessPointEndpointResolver implements S3EndpointResolver {\n+\n+    private static final String S3_OUTPOSTS_NAME = \"s3-outposts\";\n+\n+    public static S3AccessPointEndpointResolver create() {\n+        return new S3AccessPointEndpointResolver();\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fb8acf129a3d4280c1b8c3404bac9eec3ec84a9a"}, "originalPosition": 53}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzkyNzkwMQ==", "bodyText": "ok!", "url": "https://github.com/aws/aws-sdk-java-v2/pull/2093#discussion_r507927901", "createdAt": "2020-10-19T17:30:10Z", "author": {"login": "cenedhryn"}, "path": "services/s3/src/main/java/software/amazon/awssdk/services/s3/internal/endpoints/S3AccessPointEndpointResolver.java", "diffHunk": "@@ -0,0 +1,209 @@\n+/*\n+ * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package software.amazon.awssdk.services.s3.internal.endpoints;\n+\n+import static software.amazon.awssdk.services.s3.internal.endpoints.S3EndpointUtils.isAccelerateEnabled;\n+import static software.amazon.awssdk.services.s3.internal.endpoints.S3EndpointUtils.isArnRegionEnabled;\n+import static software.amazon.awssdk.services.s3.internal.endpoints.S3EndpointUtils.isDualstackEnabled;\n+import static software.amazon.awssdk.services.s3.internal.endpoints.S3EndpointUtils.isFipsRegion;\n+import static software.amazon.awssdk.services.s3.internal.endpoints.S3EndpointUtils.isFipsRegionProvided;\n+import static software.amazon.awssdk.services.s3.internal.endpoints.S3EndpointUtils.isPathStyleAccessEnabled;\n+import static software.amazon.awssdk.services.s3.internal.endpoints.S3EndpointUtils.removeFipsIfNeeded;\n+\n+import java.net.URI;\n+import software.amazon.awssdk.annotations.SdkInternalApi;\n+import software.amazon.awssdk.arns.Arn;\n+import software.amazon.awssdk.http.SdkHttpRequest;\n+import software.amazon.awssdk.regions.PartitionMetadata;\n+import software.amazon.awssdk.regions.Region;\n+import software.amazon.awssdk.services.s3.S3Configuration;\n+import software.amazon.awssdk.services.s3.internal.ConfiguredS3SdkHttpRequest;\n+import software.amazon.awssdk.services.s3.internal.resource.S3AccessPointBuilder;\n+import software.amazon.awssdk.services.s3.internal.resource.S3AccessPointResource;\n+import software.amazon.awssdk.services.s3.internal.resource.S3ArnConverter;\n+import software.amazon.awssdk.services.s3.internal.resource.S3OutpostAccessPointBuilder;\n+import software.amazon.awssdk.services.s3.internal.resource.S3OutpostResource;\n+import software.amazon.awssdk.services.s3.internal.resource.S3Resource;\n+import software.amazon.awssdk.services.s3.internal.resource.S3ResourceType;\n+import software.amazon.awssdk.utils.Validate;\n+\n+/**\n+ * Returns a new configured HTTP request with a resolved access point endpoint and signing overrides.\n+ */\n+@SdkInternalApi\n+public final class S3AccessPointEndpointResolver implements S3EndpointResolver {\n+\n+    private static final String S3_OUTPOSTS_NAME = \"s3-outposts\";\n+\n+    public static S3AccessPointEndpointResolver create() {\n+        return new S3AccessPointEndpointResolver();\n+    }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzg5MTQwOA=="}, "originalCommit": {"oid": "fb8acf129a3d4280c1b8c3404bac9eec3ec84a9a"}, "originalPosition": 53}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE4MTM5NzM0OnYy", "diffSide": "RIGHT", "path": "services/s3/src/main/java/software/amazon/awssdk/services/s3/internal/endpoints/S3BucketEndpointResolver.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxNjozMjoxNlrOHkXQjQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxNzozMDoxNlrOHkZdlQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzg5MTg1Mw==", "bodyText": "See previous comment about private default constructor.", "url": "https://github.com/aws/aws-sdk-java-v2/pull/2093#discussion_r507891853", "createdAt": "2020-10-19T16:32:16Z", "author": {"login": "bmaizels"}, "path": "services/s3/src/main/java/software/amazon/awssdk/services/s3/internal/endpoints/S3BucketEndpointResolver.java", "diffHunk": "@@ -0,0 +1,103 @@\n+/*\n+ * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package software.amazon.awssdk.services.s3.internal.endpoints;\n+\n+import static software.amazon.awssdk.services.s3.internal.endpoints.S3EndpointUtils.accelerateEndpoint;\n+import static software.amazon.awssdk.services.s3.internal.endpoints.S3EndpointUtils.dualstackEndpoint;\n+import static software.amazon.awssdk.services.s3.internal.endpoints.S3EndpointUtils.isAccelerateEnabled;\n+import static software.amazon.awssdk.services.s3.internal.endpoints.S3EndpointUtils.isAccelerateSupported;\n+import static software.amazon.awssdk.services.s3.internal.endpoints.S3EndpointUtils.isDualstackEnabled;\n+import static software.amazon.awssdk.services.s3.internal.endpoints.S3EndpointUtils.isPathStyleAccessEnabled;\n+import static software.amazon.awssdk.utils.FunctionalUtils.invokeSafely;\n+\n+import java.net.URI;\n+import software.amazon.awssdk.annotations.SdkInternalApi;\n+import software.amazon.awssdk.http.SdkHttpRequest;\n+import software.amazon.awssdk.regions.RegionMetadata;\n+import software.amazon.awssdk.services.s3.S3Configuration;\n+import software.amazon.awssdk.services.s3.internal.BucketUtils;\n+import software.amazon.awssdk.services.s3.internal.ConfiguredS3SdkHttpRequest;\n+\n+/**\n+ * Returns a new configured HTTP request with a resolved endpoint with either virtual addressing or path style access.\n+ * Supports accelerate and dual stack.\n+ */\n+@SdkInternalApi\n+public final class S3BucketEndpointResolver implements S3EndpointResolver {\n+\n+    public static S3BucketEndpointResolver create() {\n+        return new S3BucketEndpointResolver();\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fb8acf129a3d4280c1b8c3404bac9eec3ec84a9a"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzkyNzk1Nw==", "bodyText": "ok!", "url": "https://github.com/aws/aws-sdk-java-v2/pull/2093#discussion_r507927957", "createdAt": "2020-10-19T17:30:16Z", "author": {"login": "cenedhryn"}, "path": "services/s3/src/main/java/software/amazon/awssdk/services/s3/internal/endpoints/S3BucketEndpointResolver.java", "diffHunk": "@@ -0,0 +1,103 @@\n+/*\n+ * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package software.amazon.awssdk.services.s3.internal.endpoints;\n+\n+import static software.amazon.awssdk.services.s3.internal.endpoints.S3EndpointUtils.accelerateEndpoint;\n+import static software.amazon.awssdk.services.s3.internal.endpoints.S3EndpointUtils.dualstackEndpoint;\n+import static software.amazon.awssdk.services.s3.internal.endpoints.S3EndpointUtils.isAccelerateEnabled;\n+import static software.amazon.awssdk.services.s3.internal.endpoints.S3EndpointUtils.isAccelerateSupported;\n+import static software.amazon.awssdk.services.s3.internal.endpoints.S3EndpointUtils.isDualstackEnabled;\n+import static software.amazon.awssdk.services.s3.internal.endpoints.S3EndpointUtils.isPathStyleAccessEnabled;\n+import static software.amazon.awssdk.utils.FunctionalUtils.invokeSafely;\n+\n+import java.net.URI;\n+import software.amazon.awssdk.annotations.SdkInternalApi;\n+import software.amazon.awssdk.http.SdkHttpRequest;\n+import software.amazon.awssdk.regions.RegionMetadata;\n+import software.amazon.awssdk.services.s3.S3Configuration;\n+import software.amazon.awssdk.services.s3.internal.BucketUtils;\n+import software.amazon.awssdk.services.s3.internal.ConfiguredS3SdkHttpRequest;\n+\n+/**\n+ * Returns a new configured HTTP request with a resolved endpoint with either virtual addressing or path style access.\n+ * Supports accelerate and dual stack.\n+ */\n+@SdkInternalApi\n+public final class S3BucketEndpointResolver implements S3EndpointResolver {\n+\n+    public static S3BucketEndpointResolver create() {\n+        return new S3BucketEndpointResolver();\n+    }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzg5MTg1Mw=="}, "originalCommit": {"oid": "fb8acf129a3d4280c1b8c3404bac9eec3ec84a9a"}, "originalPosition": 43}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE4MTQwMjcxOnYy", "diffSide": "RIGHT", "path": "services/s3/src/main/java/software/amazon/awssdk/services/s3/internal/endpoints/S3EndpointResolverContext.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxNjozMzozMlrOHkXT0w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxODo1NjoxNlrOHkdRQQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzg5MjY5MQ==", "bodyText": "Since we're following the classic SDK pojo pattern here, we should also add a 'toBuilder()' method.", "url": "https://github.com/aws/aws-sdk-java-v2/pull/2093#discussion_r507892691", "createdAt": "2020-10-19T16:33:32Z", "author": {"login": "bmaizels"}, "path": "services/s3/src/main/java/software/amazon/awssdk/services/s3/internal/endpoints/S3EndpointResolverContext.java", "diffHunk": "@@ -0,0 +1,137 @@\n+/*\n+ * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package software.amazon.awssdk.services.s3.internal.endpoints;\n+\n+import java.util.Objects;\n+import software.amazon.awssdk.annotations.SdkInternalApi;\n+import software.amazon.awssdk.core.SdkRequest;\n+import software.amazon.awssdk.http.SdkHttpRequest;\n+import software.amazon.awssdk.regions.Region;\n+import software.amazon.awssdk.services.s3.S3Configuration;\n+\n+/**\n+ * Contains the information needed to resolve S3 endpoints.\n+ */\n+@SdkInternalApi\n+public final class S3EndpointResolverContext {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fb8acf129a3d4280c1b8c3404bac9eec3ec84a9a"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzkyOTE3OA==", "bodyText": "Yes. Good that you commented on this class, as I found two unused fields in the builder.", "url": "https://github.com/aws/aws-sdk-java-v2/pull/2093#discussion_r507929178", "createdAt": "2020-10-19T17:31:52Z", "author": {"login": "cenedhryn"}, "path": "services/s3/src/main/java/software/amazon/awssdk/services/s3/internal/endpoints/S3EndpointResolverContext.java", "diffHunk": "@@ -0,0 +1,137 @@\n+/*\n+ * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package software.amazon.awssdk.services.s3.internal.endpoints;\n+\n+import java.util.Objects;\n+import software.amazon.awssdk.annotations.SdkInternalApi;\n+import software.amazon.awssdk.core.SdkRequest;\n+import software.amazon.awssdk.http.SdkHttpRequest;\n+import software.amazon.awssdk.regions.Region;\n+import software.amazon.awssdk.services.s3.S3Configuration;\n+\n+/**\n+ * Contains the information needed to resolve S3 endpoints.\n+ */\n+@SdkInternalApi\n+public final class S3EndpointResolverContext {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzg5MjY5MQ=="}, "originalCommit": {"oid": "fb8acf129a3d4280c1b8c3404bac9eec3ec84a9a"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzk5MDMzNw==", "bodyText": "toBuilder needs a test too. Usually it's a fairly standard one where we just build() then toBuilder.build() and compare the 2nd object with the first.", "url": "https://github.com/aws/aws-sdk-java-v2/pull/2093#discussion_r507990337", "createdAt": "2020-10-19T18:56:16Z", "author": {"login": "bmaizels"}, "path": "services/s3/src/main/java/software/amazon/awssdk/services/s3/internal/endpoints/S3EndpointResolverContext.java", "diffHunk": "@@ -0,0 +1,137 @@\n+/*\n+ * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package software.amazon.awssdk.services.s3.internal.endpoints;\n+\n+import java.util.Objects;\n+import software.amazon.awssdk.annotations.SdkInternalApi;\n+import software.amazon.awssdk.core.SdkRequest;\n+import software.amazon.awssdk.http.SdkHttpRequest;\n+import software.amazon.awssdk.regions.Region;\n+import software.amazon.awssdk.services.s3.S3Configuration;\n+\n+/**\n+ * Contains the information needed to resolve S3 endpoints.\n+ */\n+@SdkInternalApi\n+public final class S3EndpointResolverContext {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzg5MjY5MQ=="}, "originalCommit": {"oid": "fb8acf129a3d4280c1b8c3404bac9eec3ec84a9a"}, "originalPosition": 29}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE4MTQxMzA3OnYy", "diffSide": "RIGHT", "path": "services/s3/src/main/java/software/amazon/awssdk/services/s3/internal/endpoints/S3EndpointResolverFactory.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxNjozNjowN1rOHkXaSA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxNzozNjoyMVrOHkZuZg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzg5NDM0NA==", "bodyText": "I'm wondering if it would be more readable just to say\nif (bucketName != null && isArn(bucketName) { \n    return ACCESS_POINT_ENDPOINT_RESOLVER; \n} \nreturn BUCKET_ENDPOINT RESOLVER;", "url": "https://github.com/aws/aws-sdk-java-v2/pull/2093#discussion_r507894344", "createdAt": "2020-10-19T16:36:07Z", "author": {"login": "bmaizels"}, "path": "services/s3/src/main/java/software/amazon/awssdk/services/s3/internal/endpoints/S3EndpointResolverFactory.java", "diffHunk": "@@ -0,0 +1,39 @@\n+/*\n+ * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package software.amazon.awssdk.services.s3.internal.endpoints;\n+\n+import java.util.Optional;\n+import software.amazon.awssdk.annotations.SdkInternalApi;\n+\n+/**\n+ * Get endpoint resolver.\n+ */\n+@SdkInternalApi\n+public final class S3EndpointResolverFactory {\n+\n+    private static final S3EndpointResolver ACCESS_POINT_ENDPOINT_RESOLVER = S3AccessPointEndpointResolver.create();\n+    private static final S3EndpointResolver BUCKET_ENDPOINT_RESOLVER = S3BucketEndpointResolver.create();\n+\n+    private S3EndpointResolverFactory() {\n+    }\n+\n+    public static S3EndpointResolver getEndpointResolver(String bucketName) {\n+        return Optional.ofNullable(bucketName)\n+                       .filter(S3EndpointUtils::isArn)\n+                       .map(arn -> ACCESS_POINT_ENDPOINT_RESOLVER)\n+                       .orElseGet(() -> BUCKET_ENDPOINT_RESOLVER);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fb8acf129a3d4280c1b8c3404bac9eec3ec84a9a"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzkzMjI2Mg==", "bodyText": "Oh come on! Stomp on my nice functional code, will you?", "url": "https://github.com/aws/aws-sdk-java-v2/pull/2093#discussion_r507932262", "createdAt": "2020-10-19T17:36:21Z", "author": {"login": "cenedhryn"}, "path": "services/s3/src/main/java/software/amazon/awssdk/services/s3/internal/endpoints/S3EndpointResolverFactory.java", "diffHunk": "@@ -0,0 +1,39 @@\n+/*\n+ * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package software.amazon.awssdk.services.s3.internal.endpoints;\n+\n+import java.util.Optional;\n+import software.amazon.awssdk.annotations.SdkInternalApi;\n+\n+/**\n+ * Get endpoint resolver.\n+ */\n+@SdkInternalApi\n+public final class S3EndpointResolverFactory {\n+\n+    private static final S3EndpointResolver ACCESS_POINT_ENDPOINT_RESOLVER = S3AccessPointEndpointResolver.create();\n+    private static final S3EndpointResolver BUCKET_ENDPOINT_RESOLVER = S3BucketEndpointResolver.create();\n+\n+    private S3EndpointResolverFactory() {\n+    }\n+\n+    public static S3EndpointResolver getEndpointResolver(String bucketName) {\n+        return Optional.ofNullable(bucketName)\n+                       .filter(S3EndpointUtils::isArn)\n+                       .map(arn -> ACCESS_POINT_ENDPOINT_RESOLVER)\n+                       .orElseGet(() -> BUCKET_ENDPOINT_RESOLVER);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzg5NDM0NA=="}, "originalCommit": {"oid": "fb8acf129a3d4280c1b8c3404bac9eec3ec84a9a"}, "originalPosition": 37}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3908, "cost": 1, "resetAt": "2021-11-12T11:18:39Z"}}}