{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY4MDQ1NDIx", "number": 727, "title": "Search the logs on the developer menu", "bodyText": "Issue #, if available: N/A\nDescription of changes: Adds the ability to search the logs displayed on the developer menu.\nLogs screen when all logs are displayed:\n\nLogs screen when there is a log that contains the search query:\n\nLogs screen when no logs contain the search query:\n\nBy submitting this pull request, I confirm that my contribution is made under the terms of the Apache 2.0 license.", "createdAt": "2020-08-14T15:24:50Z", "url": "https://github.com/aws-amplify/amplify-android/pull/727", "merged": true, "mergeCommit": {"oid": "8bc9a7bbb55ff4d6f2c5d2af11724a7ed2650760"}, "closed": true, "closedAt": "2020-08-18T17:42:18Z", "author": {"login": "eeatonaws"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc-S59TgH2gAyNDY4MDQ1NDIxOjA4OTdjNzExNDRhNjdlNTBkY2IyNzhjNjAwMTIxODU3M2I2YTdiN2Q=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdAKhoMgFqTQ2OTY3ODE2MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "0897c71144a67e50dcb278c6001218573b6a7b7d", "author": {"user": {"login": "eeatonaws", "name": "Erica Eaton"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/0897c71144a67e50dcb278c6001218573b6a7b7d", "committedDate": "2020-08-12T22:10:59Z", "message": "added search functionality to dev menu logs screen"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "769701585e63ba69d5ac82fc2e582c48e1e54b29", "author": {"user": {"login": "eeatonaws", "name": "Erica Eaton"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/769701585e63ba69d5ac82fc2e582c48e1e54b29", "committedDate": "2020-08-13T17:00:22Z", "message": "added animation for displaying logs search results"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c6518d701f0a553f7b2147163a5da8f922846016", "author": {"user": {"login": "eeatonaws", "name": "Erica Eaton"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/c6518d701f0a553f7b2147163a5da8f922846016", "committedDate": "2020-08-13T19:04:15Z", "message": "factored out search logs functionality into a method and hide soft input keyboard when searching logs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a92792df867dc1db38c371532ab53e218f6d9322", "author": {"user": {"login": "eeatonaws", "name": "Erica Eaton"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/a92792df867dc1db38c371532ab53e218f6d9322", "committedDate": "2020-08-14T15:18:14Z", "message": "removed code to hide soft keyboard when searching logs"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY3Nzg3NzI1", "url": "https://github.com/aws-amplify/amplify-android/pull/727#pullrequestreview-467787725", "createdAt": "2020-08-14T18:19:13Z", "commit": {"oid": "a92792df867dc1db38c371532ab53e218f6d9322"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xNFQxODoxOToxM1rOHA-alQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xNFQxODozMTo1OFrOHA_E7Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDc4NDY2MQ==", "bodyText": "Could you use a SearchView instead of an EditText here?  I believe it is basically just a wrapper around an EditText, but you get a lot of additional search functionality for free, like:\n\na search icon on the left side\na search button on the keyboard, which I believe is the more standard way for search to work, instead of having a button on the right side.\nIf your Android device has a hardware Search button, it'll actually work.", "url": "https://github.com/aws-amplify/amplify-android/pull/727#discussion_r470784661", "createdAt": "2020-08-14T18:19:13Z", "author": {"login": "richardmcclellan"}, "path": "core/src/main/java/com/amplifyframework/devmenu/DevMenuLogsFragment.java", "diffHunk": "@@ -39,10 +46,23 @@ public DevMenuLogsFragment() { }\n     public View onCreateView(LayoutInflater inflater, ViewGroup container,\n                              Bundle savedInstanceState) {\n         // Inflate the layout for this fragment\n-        View logsView = inflater.inflate(R.layout.dev_menu_fragment_logs, container, false);\n+        logsView = inflater.inflate(R.layout.dev_menu_fragment_logs, container, false);\n         // Display the logs (if any).\n-        TextView logsText = logsView.findViewById(R.id.logs_text);\n-        logsText.setText(DeveloperMenu.singletonInstance(getContext()).getLogs());\n+        developerMenu = DeveloperMenu.singletonInstance(getContext());\n+        logsText = logsView.findViewById(R.id.logs_text);\n+        logsText.setText(developerMenu.getLogs());\n+        // Search the logs when the search button is pressed.\n+        logsView.findViewById(R.id.search_logs_button).setOnClickListener(view -> searchLogs());\n         return logsView;\n     }\n+\n+    /**\n+     * Display the logs (if any) that contain the search query.\n+     */\n+    private void searchLogs() {\n+        EditText searchText = logsView.findViewById(R.id.search_logs_field);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a92792df867dc1db38c371532ab53e218f6d9322"}, "originalPosition": 44}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDc4Nzc4Nw==", "bodyText": "Interesting, I haven't seen this component before.  Is the purpose here just to add the fade animation when the text changes?", "url": "https://github.com/aws-amplify/amplify-android/pull/727#discussion_r470787787", "createdAt": "2020-08-14T18:22:53Z", "author": {"login": "richardmcclellan"}, "path": "core/src/main/res/layout/dev_menu_fragment_logs.xml", "diffHunk": "@@ -55,14 +58,24 @@\n             android:requiresFadingEdge=\"horizontal\"\n             android:fadingEdgeLength=\"70dp\">\n \n-            <TextView\n+            <TextSwitcher", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a92792df867dc1db38c371532ab53e218f6d9322"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDc5MTE1NA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    if (searchText == null || searchText.isEmpty()) {\n          \n          \n            \n                    if (Empty.check(searchText)) {", "url": "https://github.com/aws-amplify/amplify-android/pull/727#discussion_r470791154", "createdAt": "2020-08-14T18:26:51Z", "author": {"login": "richardmcclellan"}, "path": "core/src/main/java/com/amplifyframework/devmenu/DeveloperMenu.java", "diffHunk": "@@ -129,6 +129,32 @@ public String getLogs() {\n         }\n     }\n \n+    /**\n+     * Returns a String representation of the stored logs that contain the given\n+     * String, or all logs if the given String is null or the empty string.\n+     * @param searchText the text to search for in the logs\n+     * @return the stored logs as a String.\n+     */\n+    public String getFilteredLogs(String searchText) {\n+        if (searchText == null || searchText.isEmpty()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a92792df867dc1db38c371532ab53e218f6d9322"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDc5NTUwMQ==", "bodyText": "Instead of having an explicit button, could you just display results in real time, updating them each time a new character is entered in the search bar?    If you use a SearchView, you could implement this with the onQueryTextChanged() method in OnQueryTextListener.", "url": "https://github.com/aws-amplify/amplify-android/pull/727#discussion_r470795501", "createdAt": "2020-08-14T18:31:58Z", "author": {"login": "richardmcclellan"}, "path": "core/src/main/java/com/amplifyframework/devmenu/DevMenuLogsFragment.java", "diffHunk": "@@ -39,10 +46,23 @@ public DevMenuLogsFragment() { }\n     public View onCreateView(LayoutInflater inflater, ViewGroup container,\n                              Bundle savedInstanceState) {\n         // Inflate the layout for this fragment\n-        View logsView = inflater.inflate(R.layout.dev_menu_fragment_logs, container, false);\n+        logsView = inflater.inflate(R.layout.dev_menu_fragment_logs, container, false);\n         // Display the logs (if any).\n-        TextView logsText = logsView.findViewById(R.id.logs_text);\n-        logsText.setText(DeveloperMenu.singletonInstance(getContext()).getLogs());\n+        developerMenu = DeveloperMenu.singletonInstance(getContext());\n+        logsText = logsView.findViewById(R.id.logs_text);\n+        logsText.setText(developerMenu.getLogs());\n+        // Search the logs when the search button is pressed.\n+        logsView.findViewById(R.id.search_logs_button).setOnClickListener(view -> searchLogs());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a92792df867dc1db38c371532ab53e218f6d9322"}, "originalPosition": 36}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f4f9c6b62ac2ca270f4bbdc9b04e4ad6d989113f", "author": {"user": {"login": "eeatonaws", "name": "Erica Eaton"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/f4f9c6b62ac2ca270f4bbdc9b04e4ad6d989113f", "committedDate": "2020-08-17T16:40:33Z", "message": "replaced EditText with SearchView for searching logs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "67503bfd8518377733c73165033c8a96dab3665e", "author": {"user": {"login": "eeatonaws", "name": "Erica Eaton"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/67503bfd8518377733c73165033c8a96dab3665e", "committedDate": "2020-08-17T16:44:06Z", "message": "add newline at end of dev_menu_styles"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "171651e2030431e4f9ce02cc7fd05ee6b3f2b49f", "author": {"user": {"login": "eeatonaws", "name": "Erica Eaton"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/171651e2030431e4f9ce02cc7fd05ee6b3f2b49f", "committedDate": "2020-08-17T16:46:12Z", "message": "update comment for searching the logs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "264b9ebb9aefb822050a04ef15bf8a17a8e60230", "author": {"user": {"login": "eeatonaws", "name": "Erica Eaton"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/264b9ebb9aefb822050a04ef15bf8a17a8e60230", "committedDate": "2020-08-18T16:04:21Z", "message": "Merge branch 'DevMenu' into eeatonaws-dev-menu-search-logs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "035db3bbf77e1eaf7f648a48974da4feebe5f867", "author": {"user": {"login": "eeatonaws", "name": "Erica Eaton"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/035db3bbf77e1eaf7f648a48974da4feebe5f867", "committedDate": "2020-08-18T16:08:29Z", "message": "fixed import order in DeveloperMenu"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY5Njc4MTYx", "url": "https://github.com/aws-amplify/amplify-android/pull/727#pullrequestreview-469678161", "createdAt": "2020-08-18T17:33:01Z", "commit": {"oid": "035db3bbf77e1eaf7f648a48974da4feebe5f867"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1956, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}