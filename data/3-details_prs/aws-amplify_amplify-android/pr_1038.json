{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM1NDczMjYx", "number": 1038, "title": "chore: improve missing config error messages", "bodyText": "The Amplify documentation suggests to configure the library with this\ncall:\nAmplify.configure(applicationContext)\nWhen configured in this way, the library will attempt to load a file\nfrom the the user's application project. The file is expected to live at\napp/src/main/res/raw/amplifyconfiguration.json.\nIf this file is not present, the previous error message was not very\nhelpful. This commit updates the error message, to give the user a\ndirect call to action.\nThis PR also updates a few related resource loading messages, to make\ntheir error cases more clear.\nBy submitting this pull request, I confirm that my contribution is made under the terms of the Apache 2.0 license.", "createdAt": "2020-12-09T21:23:15Z", "url": "https://github.com/aws-amplify/amplify-android/pull/1038", "merged": true, "mergeCommit": {"oid": "092ce2ccbf8e913bf7e343f0f545d8df56be6dbb"}, "closed": true, "closedAt": "2020-12-09T21:51:12Z", "author": {"login": "jamesonwilliams"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdklhW_AH2gAyNTM1NDczMjYxOjY0OGFmMTA4YjY2ZDczZDNlZDRlYjg0YTY0MThjNWU1OWMyNjUzMTM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdkl77LgH2gAyNTM1NDczMjYxOjU0NjRmYWQ0MzdjYjBlNTM0MzY4Njc5NzgzODlmMzkwMWIzNDZlZjM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "648af108b66d73d3ed4eb84a6418c5e59c265313", "author": {"user": {"login": "jamesonwilliams", "name": "Jameson Williams"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/648af108b66d73d3ed4eb84a6418c5e59c265313", "committedDate": "2020-12-09T21:21:26Z", "message": "chore: improve missing config error messages\n\nThe Amplify documentation suggests to configure the library with this\ncall:\n```kotlin\nAmplify.configure(applicationContext)\n```\nWhen configured in this way, the library will attempt to load a file\nfrom the the user's application project. The file is expected to live at\n`app/src/main/res/raw/amplifyconfiguration.json`.\n\nIf this file is *not* present, the previous error message was not very\nhelpful. This commit updates the error message, to give the user a\ndirect call to action.\n\nThis PR also updates a few related resource loading mesasges, to make\ntheir error cases more clear."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ4NjIxMzkx", "url": "https://github.com/aws-amplify/amplify-android/pull/1038#pullrequestreview-548621391", "createdAt": "2020-12-09T21:23:56Z", "commit": {"oid": "648af108b66d73d3ed4eb84a6418c5e59c265313"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQyMToyMzo1NlrOICqIhg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQyMToyMzo1NlrOICqIhg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTY1ODM3NA==", "bodyText": "This is the same logic that was already in the builder(context), already.", "url": "https://github.com/aws-amplify/amplify-android/pull/1038#discussion_r539658374", "createdAt": "2020-12-09T21:23:56Z", "author": {"login": "jamesonwilliams"}, "path": "core/src/main/java/com/amplifyframework/core/AmplifyConfiguration.java", "diffHunk": "@@ -112,7 +112,7 @@ public static AmplifyConfiguration fromJson(@NonNull JSONObject json) throws Amp\n     @SuppressWarnings(\"WeakerAccess\")\n     @NonNull\n     public static AmplifyConfiguration fromConfigFile(@NonNull Context context) throws AmplifyException {\n-        return builder(context, Resources.getRawResourceId(context, DEFAULT_IDENTIFIER)).build();\n+        return builder(context).build();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "648af108b66d73d3ed4eb84a6418c5e59c265313"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ4NjMwMDQ3", "url": "https://github.com/aws-amplify/amplify-android/pull/1038#pullrequestreview-548630047", "createdAt": "2020-12-09T21:36:12Z", "commit": {"oid": "648af108b66d73d3ed4eb84a6418c5e59c265313"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQyMTozNjoxM1rOICqlvQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQyMTozNjoxM1rOICqlvQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTY2NTg1Mw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            \"If you are attempting to load a custom configuration file, please that it exists \" +\n          \n          \n            \n                            \"If you are attempting to load a custom configuration file, please ensure that it exists \" +", "url": "https://github.com/aws-amplify/amplify-android/pull/1038#discussion_r539665853", "createdAt": "2020-12-09T21:36:13Z", "author": {"login": "richardmcclellan"}, "path": "core/src/main/java/com/amplifyframework/core/AmplifyConfiguration.java", "diffHunk": "@@ -219,11 +228,18 @@ public static Builder builder(@NonNull Context context) throws AmplifyException\n      * @throws AmplifyException If there is a problem in the config file\n      */\n     @NonNull\n-    public static Builder builder(\n-            @NonNull Context context,\n-            @RawRes int configFileResourceId\n-    ) throws AmplifyException {\n-        return builder(Resources.readJsonResourceFromId(Objects.requireNonNull(context), configFileResourceId));\n+    public static Builder builder(@NonNull Context context, @RawRes int configFileResourceId)\n+            throws AmplifyException {\n+        Objects.requireNonNull(context);\n+        try {\n+            return builder(Resources.readJsonResourceFromId(context, configFileResourceId));\n+        } catch (Resources.ResourceLoadingException resourceLoadingException) {\n+            throw new AmplifyException(\n+                \"Failed to read JSON from resource = \" + configFileResourceId, resourceLoadingException,\n+                \"If you are attempting to load a custom configuration file, please that it exists \" +", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "648af108b66d73d3ed4eb84a6418c5e59c265313"}, "originalPosition": 44}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ4NjMzNDUy", "url": "https://github.com/aws-amplify/amplify-android/pull/1038#pullrequestreview-548633452", "createdAt": "2020-12-09T21:41:17Z", "commit": {"oid": "648af108b66d73d3ed4eb84a6418c5e59c265313"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5464fad437cb0e53436867978389f3901b346ef3", "author": {"user": {"login": "jamesonwilliams", "name": "Jameson Williams"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/5464fad437cb0e53436867978389f3901b346ef3", "committedDate": "2020-12-09T21:50:27Z", "message": "Update core/src/main/java/com/amplifyframework/core/AmplifyConfiguration.java\n\nCo-authored-by: Richard McClellan <ricmccle@amazon.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3356, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}