{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA4ODYxNTk1", "number": 400, "title": "Expose all GraphQL error properties (part 2)", "bodyText": "Addresses the last bits of feedback on #392, specifically:\n\nMoves GraphQLLocation, GraphQLPathSegment into same package as GraphQLResponse\nImplements custom deserialization of GraphQL error extension into HashMap to eliminate gson's LinkedTreeMap leaking to public interface.\nAdds toString implementations to error models\n\nBy submitting this pull request, I confirm that my contribution is made under the terms of the Apache 2.0 license.", "createdAt": "2020-04-25T06:51:15Z", "url": "https://github.com/aws-amplify/amplify-android/pull/400", "merged": true, "mergeCommit": {"oid": "bb8d55552513b4c25f0e5bada77f7ec8d5aeba5a"}, "closed": true, "closedAt": "2020-04-27T17:44:17Z", "author": {"login": "richardmcclellan"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcbAVqfAH2gAyNDA4ODYxNTk1Ojc2NTg0ZDc2MDI0N2FjMTA5OGU4ZGVkNGFjNDRlZDBjNzgzODg1NzM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcbyRIQABqjMyNzY3MDg2OTQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "76584d760247ac1098e8ded4ac44ed0c78388573", "author": {"user": {"login": "richardmcclellan", "name": "Richard McClellan"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/76584d760247ac1098e8ded4ac44ed0c78388573", "committedDate": "2020-04-25T06:45:42Z", "message": "Implemented custom serialization of GraphQL error extensions to eliminate gson leaking to public interface"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAwNDY5NjQy", "url": "https://github.com/aws-amplify/amplify-android/pull/400#pullrequestreview-400469642", "createdAt": "2020-04-26T07:28:37Z", "commit": {"oid": "76584d760247ac1098e8ded4ac44ed0c78388573"}, "state": "APPROVED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNlQwNzoyODozN1rOGMAUoQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNlQwNzozNToxN1rOGMAZTg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTI0MTM3Nw==", "bodyText": "Ordinarily the declaration is the bast Map<KeyType, ValType>, unless you are using some exotic property of a map that requires specification of which map type you need. For example, if you need ordering properties, you'd both instantiate and declared LinkedHashMap, since the type is important, you're no longer dealing in \"any old map.\" But here, I think you're just dealing with any old map.\nMost common pattern is like:\nstatic Map<Foo, Bar> createOne() {\n    Map<Foo, Bar> fooBar = new HashMap<>(); // This is the only place the special type is mentioned\n    fooBar.put(\"ham\", \"sandwich\");\n    return fooBar;\n}", "url": "https://github.com/aws-amplify/amplify-android/pull/400#discussion_r415241377", "createdAt": "2020-04-26T07:28:37Z", "author": {"login": "jamesonwilliams"}, "path": "aws-api/src/main/java/com/amplifyframework/api/aws/GsonErrorDeserializer.java", "diffHunk": "@@ -49,7 +50,7 @@\n         String message = null;\n         List<GraphQLLocation> locations = null;\n         List<GraphQLPathSegment> path = null;\n-        Map<String, Object> extensions = null;\n+        HashMap<String, Object> extensions = null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "76584d760247ac1098e8ded4ac44ed0c78388573"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTI0MTk2OQ==", "bodyText": "return Immutable.of(map)?", "url": "https://github.com/aws-amplify/amplify-android/pull/400#discussion_r415241969", "createdAt": "2020-04-26T07:31:41Z", "author": {"login": "jamesonwilliams"}, "path": "aws-api/src/main/java/com/amplifyframework/api/aws/GsonUtil.java", "diffHunk": "@@ -0,0 +1,75 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package com.amplifyframework.api.aws;\n+\n+import com.google.gson.JsonArray;\n+import com.google.gson.JsonElement;\n+import com.google.gson.JsonObject;\n+import com.google.gson.JsonPrimitive;\n+\n+import java.util.ArrayList;\n+import java.util.HashMap;\n+import java.util.List;\n+\n+final class GsonUtil {\n+\n+    private GsonUtil() {\n+        throw new UnsupportedOperationException(\"No instances allowed.\");\n+    }\n+\n+    static HashMap<String, Object> toMap(JsonObject object) {\n+        HashMap<String, Object> map = new HashMap<>();\n+        for (String key : object.keySet()) {\n+            JsonElement element = object.get(key);\n+            map.put(key, toObject(element));\n+        }\n+        return map;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "76584d760247ac1098e8ded4ac44ed0c78388573"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTI0MjAwMA==", "bodyText": "return Immutable.of(list)?", "url": "https://github.com/aws-amplify/amplify-android/pull/400#discussion_r415242000", "createdAt": "2020-04-26T07:31:49Z", "author": {"login": "jamesonwilliams"}, "path": "aws-api/src/main/java/com/amplifyframework/api/aws/GsonUtil.java", "diffHunk": "@@ -0,0 +1,75 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package com.amplifyframework.api.aws;\n+\n+import com.google.gson.JsonArray;\n+import com.google.gson.JsonElement;\n+import com.google.gson.JsonObject;\n+import com.google.gson.JsonPrimitive;\n+\n+import java.util.ArrayList;\n+import java.util.HashMap;\n+import java.util.List;\n+\n+final class GsonUtil {\n+\n+    private GsonUtil() {\n+        throw new UnsupportedOperationException(\"No instances allowed.\");\n+    }\n+\n+    static HashMap<String, Object> toMap(JsonObject object) {\n+        HashMap<String, Object> map = new HashMap<>();\n+        for (String key : object.keySet()) {\n+            JsonElement element = object.get(key);\n+            map.put(key, toObject(element));\n+        }\n+        return map;\n+    }\n+\n+    static List<Object> toList(JsonArray array) {\n+        List<Object> list = new ArrayList<>();\n+        for (int i = 0; i < array.size(); i++) {\n+            JsonElement element = array.get(i);\n+            list.add(toObject(element));\n+        }\n+        return list;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "76584d760247ac1098e8ded4ac44ed0c78388573"}, "originalPosition": 48}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTI0MjU3NA==", "bodyText": "There is the element.isJsonNull() -- not sure what the deal is with that... do we need to treat this case, or does the final return null handle it appropriately?", "url": "https://github.com/aws-amplify/amplify-android/pull/400#discussion_r415242574", "createdAt": "2020-04-26T07:35:17Z", "author": {"login": "jamesonwilliams"}, "path": "aws-api/src/main/java/com/amplifyframework/api/aws/GsonUtil.java", "diffHunk": "@@ -0,0 +1,75 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package com.amplifyframework.api.aws;\n+\n+import com.google.gson.JsonArray;\n+import com.google.gson.JsonElement;\n+import com.google.gson.JsonObject;\n+import com.google.gson.JsonPrimitive;\n+\n+import java.util.ArrayList;\n+import java.util.HashMap;\n+import java.util.List;\n+\n+final class GsonUtil {\n+\n+    private GsonUtil() {\n+        throw new UnsupportedOperationException(\"No instances allowed.\");\n+    }\n+\n+    static HashMap<String, Object> toMap(JsonObject object) {\n+        HashMap<String, Object> map = new HashMap<>();\n+        for (String key : object.keySet()) {\n+            JsonElement element = object.get(key);\n+            map.put(key, toObject(element));\n+        }\n+        return map;\n+    }\n+\n+    static List<Object> toList(JsonArray array) {\n+        List<Object> list = new ArrayList<>();\n+        for (int i = 0; i < array.size(); i++) {\n+            JsonElement element = array.get(i);\n+            list.add(toObject(element));\n+        }\n+        return list;\n+    }\n+\n+    private static Object toObject(JsonElement element) {\n+        if (element != null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "76584d760247ac1098e8ded4ac44ed0c78388573"}, "originalPosition": 52}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "08d49f12a45dfa8b28f44eaaf6562f79b222bb64", "author": {"user": {"login": "richardmcclellan", "name": "Richard McClellan"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/08d49f12a45dfa8b28f44eaaf6562f79b222bb64", "committedDate": "2020-04-27T16:55:31Z", "message": "Minor fixes"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "08d49f12a45dfa8b28f44eaaf6562f79b222bb64", "author": {"user": {"login": "richardmcclellan", "name": "Richard McClellan"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/08d49f12a45dfa8b28f44eaaf6562f79b222bb64", "committedDate": "2020-04-27T16:55:31Z", "message": "Minor fixes"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2731, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}