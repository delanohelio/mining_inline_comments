{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTExMjYzNjY3", "number": 938, "title": "Add Builder for AuthRule", "bodyText": "PR for Datastore module of Amplify Flutter\nProvides a public constructor for AuthRule.\nWhen transmitting ModelSchema from Dart to Android, we need to recreate the AuthRule object.  However the existing API only allows AuthRule objects to be created from the annotation object..", "createdAt": "2020-10-28T04:05:06Z", "url": "https://github.com/aws-amplify/amplify-android/pull/938", "merged": true, "mergeCommit": {"oid": "6e710c83503d4ce96ac45b0207d7f815d496d1ce"}, "closed": true, "closedAt": "2020-11-05T23:22:36Z", "author": {"login": "fjnoyp"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdW1foKgH2gAyNTExMjYzNjY3OjE5NWMwMTQ3YTlhM2Q1ZjRkNmEyMWE5NjFhOTJjN2M5YzlhNTUxOWQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdZq3uIgH2gAyNTExMjYzNjY3OjVhYmVjMjZmNjQ3YTE0YTEwNzc2MzcxY2E0Y2EyNTNlY2UyNTNlMGQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "195c0147a9a3d5f4d6a21a961a92c7c9c9a5519d", "author": {"user": {"login": "fjnoyp", "name": "Kyle "}}, "url": "https://github.com/aws-amplify/amplify-android/commit/195c0147a9a3d5f4d6a21a961a92c7c9c9a5519d", "committedDate": "2020-10-28T04:03:05Z", "message": "Add Builder for AuthRule"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE4MzEyNTQ3", "url": "https://github.com/aws-amplify/amplify-android/pull/938#pullrequestreview-518312547", "createdAt": "2020-10-28T04:16:43Z", "commit": {"oid": "195c0147a9a3d5f4d6a21a961a92c7c9c9a5519d"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "55b4fbc735818a76d85ca81a82d2335f125bc217", "author": {"user": {"login": "fjnoyp", "name": "Kyle "}}, "url": "https://github.com/aws-amplify/amplify-android/commit/55b4fbc735818a76d85ca81a82d2335f125bc217", "committedDate": "2020-11-05T23:17:30Z", "message": "PR Comments"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "55b4fbc735818a76d85ca81a82d2335f125bc217", "author": {"user": {"login": "fjnoyp", "name": "Kyle "}}, "url": "https://github.com/aws-amplify/amplify-android/commit/55b4fbc735818a76d85ca81a82d2335f125bc217", "committedDate": "2020-11-05T23:17:30Z", "message": "PR Comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI0NzQ5MDUz", "url": "https://github.com/aws-amplify/amplify-android/pull/938#pullrequestreview-524749053", "createdAt": "2020-11-05T23:21:09Z", "commit": {"oid": "55b4fbc735818a76d85ca81a82d2335f125bc217"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQyMzoyMTowOVrOHuacpg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQyMzoyMToyOVrOHuadGA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODQyOTg2Mg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    public AuthRule build() {\n          \n          \n            \n                    @NonNull\n          \n          \n            \n                    public AuthRule build() {", "url": "https://github.com/aws-amplify/amplify-android/pull/938#discussion_r518429862", "createdAt": "2020-11-05T23:21:09Z", "author": {"login": "jamesonwilliams"}, "path": "core/src/main/java/com/amplifyframework/core/model/AuthRule.java", "diffHunk": "@@ -161,4 +186,104 @@ public String toString() {\n                 \", operations=\" + operations + '\\'' +\n                 '}';\n     }\n+\n+    /**\n+     * Builder class for {@link AuthRule}.\n+     */\n+    public static final class Builder {\n+        private AuthStrategy authStrategy;\n+        private String ownerField;\n+        private String identityClaim;\n+        private String groupClaim;\n+        private List<String> groups;\n+        private String groupsField;\n+        private List<ModelOperation> operations = new ArrayList<>();\n+\n+        /**\n+         * Sets the auth strategy of this rule.\n+         * @param authStrategy AuthStrategy is the type of auth strategy to use.\n+         * @return the association model with given name\n+         */\n+        @NonNull\n+        public AuthRule.Builder authStrategy(@NonNull AuthStrategy authStrategy) {\n+            this.authStrategy = Objects.requireNonNull(authStrategy);\n+            return this;\n+        }\n+\n+        /**\n+         * Sets the owner field of this rule.\n+         * @param ownerField OwnerField is the owner authorization.\n+         * @return the association model with give target name\n+         */\n+        @NonNull\n+        public AuthRule.Builder ownerField(@NonNull String ownerField) {\n+            this.ownerField = Objects.requireNonNull(ownerField);\n+            return this;\n+        }\n+\n+        /**\n+         * Sets the identity claim of this rule.\n+         * @param identityClaim IdentityClaim specifies a custom claim.\n+         * @return the association model with given associated name\n+         */\n+        @NonNull\n+        public AuthRule.Builder identityClaim(@NonNull String identityClaim) {\n+            this.identityClaim = Objects.requireNonNull(identityClaim);\n+            return this;\n+        }\n+\n+        /**\n+         * Sets the group claim of this rule.\n+         * @param groupClaim GroupClaim specified a custom claim.\n+         * @return the association model with given associated type\n+         */\n+        @NonNull\n+        public AuthRule.Builder groupClaim(@NonNull String groupClaim) {\n+            this.groupClaim = Objects.requireNonNull(groupClaim);\n+            return this;\n+        }\n+        \n+        /**\n+         * Sets the groups this rule applies to.\n+         * @param groups Groups is static group authorization.\n+         * @return the association model with given associated type\n+         */\n+        @NonNull\n+        public AuthRule.Builder groups(@NonNull List<String> groups) {\n+            this.groups = Objects.requireNonNull(groups);\n+            return this;\n+        }\n+\n+        /**\n+         * Sets the groupsField of this rule.\n+         * @param groupsField GroupsField is for dynamic group authorization.\n+         * @return the association model with given associated type\n+         */\n+        @NonNull\n+        public AuthRule.Builder groupsField(@NonNull String groupsField) {\n+            this.groupsField = Objects.requireNonNull(groupsField);\n+            return this;\n+        }\n+\n+        /**\n+         * Sets the operations allowed for this rule.\n+         * @param operations Operations specifies which {@link ModelOperation}s are protected by this {@link AuthRule}.\n+         * @return the association model with given associated type\n+         */\n+        @NonNull\n+        public AuthRule.Builder operations(@NonNull List<ModelOperation> operations) {\n+            this.operations = Objects.requireNonNull(operations);\n+            return this;\n+        }\n+\n+        /**\n+         * Builds an immutable AuthRule instance using\n+         * builder object.\n+         * @return AuthRule instance\n+         */\n+        public AuthRule build() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "55b4fbc735818a76d85ca81a82d2335f125bc217"}, "originalPosition": 144}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODQyOTk3Ng==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public static AuthRule.Builder builder() {\n          \n          \n            \n                @NonNull\n          \n          \n            \n                public static AuthRule.Builder builder() {", "url": "https://github.com/aws-amplify/amplify-android/pull/938#discussion_r518429976", "createdAt": "2020-11-05T23:21:29Z", "author": {"login": "jamesonwilliams"}, "path": "core/src/main/java/com/amplifyframework/core/model/AuthRule.java", "diffHunk": "@@ -53,6 +56,28 @@ public AuthRule(com.amplifyframework.core.model.annotations.AuthRule authRule) {\n         this.operations = Arrays.asList(authRule.operations());\n     }\n \n+    /**\n+     * Construct the AuthRule object from the builder.\n+     * For internal use only.\n+     */\n+    private AuthRule(@NonNull AuthRule.Builder builder) {\n+        this.authStrategy = builder.authStrategy;\n+        this.ownerField = builder.ownerField;\n+        this.identityClaim = builder.identityClaim;\n+        this.groupClaim = builder.groupClaim;\n+        this.groups = builder.groups;\n+        this.groupsField = builder.groupsField;\n+        this.operations = builder.operations;\n+    }\n+\n+    /**\n+     * Return the builder object.\n+     * @return the builder object.\n+     */\n+    public static AuthRule.Builder builder() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "55b4fbc735818a76d85ca81a82d2335f125bc217"}, "originalPosition": 38}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f1878bff68fa01d7d8ea678d623629ed18297933", "author": {"user": {"login": "jamesonwilliams", "name": "Jameson Williams"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/f1878bff68fa01d7d8ea678d623629ed18297933", "committedDate": "2020-11-05T23:22:05Z", "message": "Update core/src/main/java/com/amplifyframework/core/model/AuthRule.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5abec26f647a14a10776371ca4ca253ece253e0d", "author": {"user": {"login": "jamesonwilliams", "name": "Jameson Williams"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/5abec26f647a14a10776371ca4ca253ece253e0d", "committedDate": "2020-11-05T23:22:13Z", "message": "Update core/src/main/java/com/amplifyframework/core/model/AuthRule.java"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1791, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}