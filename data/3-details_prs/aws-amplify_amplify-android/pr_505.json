{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIxNTU0MzE1", "number": 505, "title": "(feat) amplify-tools as a separate project", "bodyText": "Issue #, if available:\nDescription of changes:\nAdds the amplify-tools plugin as a separate project/dir in the amplify-android repo\nLocal publish can be tested by running ./gradlew publishToMavenLocal from the amplify-tools dir\nBumped to version 1.0.0\nIncludes the changes requested here: #452\nBy submitting this pull request, I confirm that my contribution is made under the terms of the Apache 2.0 license.", "createdAt": "2020-05-21T20:04:58Z", "url": "https://github.com/aws-amplify/amplify-android/pull/505", "merged": true, "mergeCommit": {"oid": "cde40368ee89c4fafe390ef6b5220ed198335e78"}, "closed": true, "closedAt": "2020-05-22T01:40:03Z", "author": {"login": "nikhname"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcjjTzEAH2gAyNDIxNTU0MzE1OmFkYmQ3NDBmOTA1M2FiYjk3MTZjZWM5MjAwNzc2YWM2MGE5NTc0MDk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcjnyV7gH2gAyNDIxNTU0MzE1OmIyNDYxNDFlN2Q5NmQwOTJmY2VkM2I3ZWQwMWMyZmI4ODY2ZWYzNDQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "adbd740f9053abb9716cec9200776ac60a957409", "author": {"user": {"login": "nikhname", "name": "Nikhil Lingireddy"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/adbd740f9053abb9716cec9200776ac60a957409", "committedDate": "2020-05-21T20:01:44Z", "message": "initial commit of amplify-tools as a separate project"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ba1fcb4458c53bf5e04f9d81f16fafb3c77eb4ab", "author": {"user": {"login": "nikhname", "name": "Nikhil Lingireddy"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/ba1fcb4458c53bf5e04f9d81f16fafb3c77eb4ab", "committedDate": "2020-05-21T21:09:57Z", "message": "remove app and .idea"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE2NTE3NTc5", "url": "https://github.com/aws-amplify/amplify-android/pull/505#pullrequestreview-416517579", "createdAt": "2020-05-21T21:49:26Z", "commit": {"oid": "ba1fcb4458c53bf5e04f9d81f16fafb3c77eb4ab"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQyMTo0OToyNlrOGZEILg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQyMTo1MTozMlrOGZELNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODkzNTIxNA==", "bodyText": "This is a subset of the main .gitignore, kill it?", "url": "https://github.com/aws-amplify/amplify-android/pull/505#discussion_r428935214", "createdAt": "2020-05-21T21:49:26Z", "author": {"login": "jpignata"}, "path": "amplify-tools/.gitignore", "diffHunk": "@@ -0,0 +1,9 @@\n+*.iml", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ba1fcb4458c53bf5e04f9d81f16fafb3c77eb4ab"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODkzNTQ0Mg==", "bodyText": "Sup with the \"-SNAPSHOT?\"", "url": "https://github.com/aws-amplify/amplify-android/pull/505#discussion_r428935442", "createdAt": "2020-05-21T21:50:03Z", "author": {"login": "jpignata"}, "path": "amplify-tools/amplify-tools-gradle-plugin/build.gradle", "diffHunk": "@@ -0,0 +1,41 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+apply plugin: 'groovy'\n+apply plugin: 'idea'\n+apply plugin: 'java-gradle-plugin'\n+apply plugin: 'maven-publish'\n+\n+apply from: rootProject.file('gradle-mvn-push.gradle')\n+\n+sourceSets.main.groovy.srcDirs = [\"src/main/groovy\"]\n+\n+dependencies {\n+    implementation 'androidx.appcompat:appcompat:1.1.0'\n+}\n+\n+publishing {\n+    publications {\n+        pluginPublication(MavenPublication) {\n+            from components.java\n+            groupId 'com.amplifyframework'\n+            artifactId 'amplify-tools-gradle-plugin'\n+            version VERSION_NAME + \"-SNAPSHOT\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ba1fcb4458c53bf5e04f9d81f16fafb3c77eb4ab"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODkzNTY2MQ==", "bodyText": "Lowercase t tools, please.", "url": "https://github.com/aws-amplify/amplify-android/pull/505#discussion_r428935661", "createdAt": "2020-05-21T21:50:35Z", "author": {"login": "jpignata"}, "path": "amplify-tools/amplify-tools-gradle-plugin/gradle.properties", "diffHunk": "@@ -0,0 +1,4 @@\n+POM_ARTIFACT_ID=amplify-tools-gradle-plugin\n+POM_NAME=Amplify Tools for Android - Gradle Plugin", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ba1fcb4458c53bf5e04f9d81f16fafb3c77eb4ab"}, "originalPosition": 2}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODkzNTczMw==", "bodyText": "Is this needed?", "url": "https://github.com/aws-amplify/amplify-android/pull/505#discussion_r428935733", "createdAt": "2020-05-21T21:50:47Z", "author": {"login": "jpignata"}, "path": "amplify-tools/amplify-tools-gradle-plugin/proguard-rules.pro", "diffHunk": "@@ -0,0 +1,21 @@\n+# Add project specific ProGuard rules here.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ba1fcb4458c53bf5e04f9d81f16fafb3c77eb4ab"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODkzNTk4OQ==", "bodyText": "What is this?", "url": "https://github.com/aws-amplify/amplify-android/pull/505#discussion_r428935989", "createdAt": "2020-05-21T21:51:32Z", "author": {"login": "jpignata"}, "path": "amplify-tools/gradle.properties", "diffHunk": "@@ -0,0 +1,36 @@\n+# Project-wide Gradle settings.\n+# IDE (e.g. Android Studio) users:\n+# Gradle settings configured through the IDE *will override*\n+# any settings specified in this file.\n+# For more details on how to configure your build environment visit\n+# http://www.gradle.org/docs/current/userguide/build_environment.html\n+# Specifies the JVM arguments used for the daemon process.\n+# The setting is particularly useful for tweaking memory settings.\n+org.gradle.jvmargs=-Xmx1536m\n+# When configured, Gradle will run in incubating parallel mode.\n+# This option should only be used with decoupled projects. More details, visit\n+# http://www.gradle.org/docs/current/userguide/multi_project_builds.html#sec:decoupled_projects\n+# org.gradle.parallel=true\n+# AndroidX package structure to make it clearer which packages are bundled with the\n+# Android operating system, and which are packaged with your app's APK\n+# https://developer.android.com/topic/libraries/support-library/androidx-rn\n+android.useAndroidX=true\n+# Automatically convert third-party libraries to use AndroidX\n+android.enableJetifier=true\n+\n+GROUP=com.amplifyframework\n+VERSION_NAME=1.0.0\n+AWS_CORE_SDK_VERSION=2.16.3", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ba1fcb4458c53bf5e04f9d81f16fafb3c77eb4ab"}, "originalPosition": 23}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE2NTIxOTQ2", "url": "https://github.com/aws-amplify/amplify-android/pull/505#pullrequestreview-416521946", "createdAt": "2020-05-21T21:57:52Z", "commit": {"oid": "ba1fcb4458c53bf5e04f9d81f16fafb3c77eb4ab"}, "state": "COMMENTED", "comments": {"totalCount": 16, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQyMTo1Nzo1M1rOGZEVtA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQyMjoxMzoyMVrOGZEsjw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODkzODY3Ng==", "bodyText": "Some discussion here -- https://stackoverflow.com/a/3307252/695787\nThe reasons Jakub provides to use multiple .gitignore don't apply to us, here, I don't think.\nSo I'd kill this.", "url": "https://github.com/aws-amplify/amplify-android/pull/505#discussion_r428938676", "createdAt": "2020-05-21T21:57:53Z", "author": {"login": "jamesonwilliams"}, "path": "amplify-tools/.gitignore", "diffHunk": "@@ -0,0 +1,9 @@\n+*.iml", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODkzNTIxNA=="}, "originalCommit": {"oid": "ba1fcb4458c53bf5e04f9d81f16fafb3c77eb4ab"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODkzOTAzOQ==", "bodyText": "The most trivial of nits: prefer single quotes?", "url": "https://github.com/aws-amplify/amplify-android/pull/505#discussion_r428939039", "createdAt": "2020-05-21T21:58:46Z", "author": {"login": "jamesonwilliams"}, "path": "amplify-tools/amplify-tools-gradle-plugin/build.gradle", "diffHunk": "@@ -0,0 +1,41 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+apply plugin: 'groovy'\n+apply plugin: 'idea'\n+apply plugin: 'java-gradle-plugin'\n+apply plugin: 'maven-publish'\n+\n+apply from: rootProject.file('gradle-mvn-push.gradle')\n+\n+sourceSets.main.groovy.srcDirs = [\"src/main/groovy\"]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ba1fcb4458c53bf5e04f9d81f16fafb3c77eb4ab"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODkzOTM3Nw==", "bodyText": "I doubt this is used. I think you could kill the whole block.", "url": "https://github.com/aws-amplify/amplify-android/pull/505#discussion_r428939377", "createdAt": "2020-05-21T21:59:42Z", "author": {"login": "jamesonwilliams"}, "path": "amplify-tools/amplify-tools-gradle-plugin/build.gradle", "diffHunk": "@@ -0,0 +1,41 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+apply plugin: 'groovy'\n+apply plugin: 'idea'\n+apply plugin: 'java-gradle-plugin'\n+apply plugin: 'maven-publish'\n+\n+apply from: rootProject.file('gradle-mvn-push.gradle')\n+\n+sourceSets.main.groovy.srcDirs = [\"src/main/groovy\"]\n+\n+dependencies {\n+    implementation 'androidx.appcompat:appcompat:1.1.0'\n+}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ba1fcb4458c53bf5e04f9d81f16fafb3c77eb4ab"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODkzOTkzMg==", "bodyText": "We have a default publishing rule available int configuration/publishing.gradle. If you import that file, at the top of this one, then you don't need a separate block, here.\nThe other modules use gradle.properties to define Maven publishing fields, and then include that central publishing script, which is a more elaborate version of this block, here.\n\nUpdate: oh, right, this is a separate project. Never-mind!", "url": "https://github.com/aws-amplify/amplify-android/pull/505#discussion_r428939932", "createdAt": "2020-05-21T22:00:54Z", "author": {"login": "jamesonwilliams"}, "path": "amplify-tools/amplify-tools-gradle-plugin/build.gradle", "diffHunk": "@@ -0,0 +1,41 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+apply plugin: 'groovy'\n+apply plugin: 'idea'\n+apply plugin: 'java-gradle-plugin'\n+apply plugin: 'maven-publish'\n+\n+apply from: rootProject.file('gradle-mvn-push.gradle')\n+\n+sourceSets.main.groovy.srcDirs = [\"src/main/groovy\"]\n+\n+dependencies {\n+    implementation 'androidx.appcompat:appcompat:1.1.0'\n+}\n+\n+publishing {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ba1fcb4458c53bf5e04f9d81f16fafb3c77eb4ab"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk0MDIwMA==", "bodyText": "Hm, Groovy, compatible with Java 1.7? Or does \"1.7\" mean version 51 byte code? Are these needed?", "url": "https://github.com/aws-amplify/amplify-android/pull/505#discussion_r428940200", "createdAt": "2020-05-21T22:01:38Z", "author": {"login": "jamesonwilliams"}, "path": "amplify-tools/amplify-tools-gradle-plugin/build.gradle", "diffHunk": "@@ -0,0 +1,41 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+apply plugin: 'groovy'\n+apply plugin: 'idea'\n+apply plugin: 'java-gradle-plugin'\n+apply plugin: 'maven-publish'\n+\n+apply from: rootProject.file('gradle-mvn-push.gradle')\n+\n+sourceSets.main.groovy.srcDirs = [\"src/main/groovy\"]\n+\n+dependencies {\n+    implementation 'androidx.appcompat:appcompat:1.1.0'\n+}\n+\n+publishing {\n+    publications {\n+        pluginPublication(MavenPublication) {\n+            from components.java\n+            groupId 'com.amplifyframework'\n+            artifactId 'amplify-tools-gradle-plugin'\n+            version VERSION_NAME + \"-SNAPSHOT\"\n+        }\n+    }\n+}\n+\n+sourceCompatibility = \"1.7\"\n+targetCompatibility = \"1.7\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ba1fcb4458c53bf5e04f9d81f16fafb3c77eb4ab"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk0MDcwMQ==", "bodyText": "Doubtful, for a plugin. Since the plugin will only be deployed to a developer's machine, and not a customer's mobile phone. If we succeed to integrate Proguard here, it will purely hamper our ability to debug the plugin, while providing no benefit.\nTLDR we can safely remove this file.", "url": "https://github.com/aws-amplify/amplify-android/pull/505#discussion_r428940701", "createdAt": "2020-05-21T22:02:55Z", "author": {"login": "jamesonwilliams"}, "path": "amplify-tools/amplify-tools-gradle-plugin/proguard-rules.pro", "diffHunk": "@@ -0,0 +1,21 @@\n+# Add project specific ProGuard rules here.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODkzNTczMw=="}, "originalCommit": {"oid": "ba1fcb4458c53bf5e04f9d81f16fafb3c77eb4ab"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk0MTE0OQ==", "bodyText": "This is a weird name for a groovy class. Does it match some other token, somewhere else? Is this intentional? I would expect this to be in Pascal case, like Plugin<Project> is. AmplifyToolsPlugin implements Plugin<Project>, something like that?", "url": "https://github.com/aws-amplify/amplify-android/pull/505#discussion_r428941149", "createdAt": "2020-05-21T22:04:01Z", "author": {"login": "jamesonwilliams"}, "path": "amplify-tools/amplify-tools-gradle-plugin/src/main/groovy/com/amplifyframework/tools/gradle/plugin/amplifytools.groovy", "diffHunk": "@@ -0,0 +1,246 @@\n+import org.gradle.api.Plugin\n+import org.gradle.api.Project\n+import org.apache.tools.ant.taskdefs.condition.Os\n+import groovy.json.JsonSlurper\n+import groovy.json.JsonOutput\n+\n+class amplifytools implements Plugin<Project> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ba1fcb4458c53bf5e04f9d81f16fafb3c77eb4ab"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk0MTg0NQ==", "bodyText": "You actually run npx, not node, later. So, it'd be better to check if npx is available.\nWhen I used this plugin, npx wasn't available.\nI do have node installed, but that's only part of the requirement.", "url": "https://github.com/aws-amplify/amplify-android/pull/505#discussion_r428941845", "createdAt": "2020-05-21T22:05:51Z", "author": {"login": "jamesonwilliams"}, "path": "amplify-tools/amplify-tools-gradle-plugin/src/main/groovy/com/amplifyframework/tools/gradle/plugin/amplifytools.groovy", "diffHunk": "@@ -0,0 +1,246 @@\n+import org.gradle.api.Plugin\n+import org.gradle.api.Project\n+import org.apache.tools.ant.taskdefs.condition.Os\n+import groovy.json.JsonSlurper\n+import groovy.json.JsonOutput\n+\n+class amplifytools implements Plugin<Project> {\n+    void apply(Project project) {\n+        def doesNodeExist = true\n+        def doesGradleConfigExist\n+\n+        // profile name can be changed in amplify-gradle-config\n+        def profile = 'default'\n+        def accessKeyId = null\n+        def secretAccessKey = null\n+        def region = null\n+        def envName = 'amplify'\n+        def syncEnabled = 'true'\n+\n+        project.task('verifyNode') {\n+            try {\n+                project.exec {\n+                    commandLine 'node', '-v'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ba1fcb4458c53bf5e04f9d81f16fafb3c77eb4ab"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk0MjI3NA==", "bodyText": "Nit: in all places, substitute if( with if (.", "url": "https://github.com/aws-amplify/amplify-android/pull/505#discussion_r428942274", "createdAt": "2020-05-21T22:07:00Z", "author": {"login": "jamesonwilliams"}, "path": "amplify-tools/amplify-tools-gradle-plugin/src/main/groovy/com/amplifyframework/tools/gradle/plugin/amplifytools.groovy", "diffHunk": "@@ -0,0 +1,246 @@\n+import org.gradle.api.Plugin\n+import org.gradle.api.Project\n+import org.apache.tools.ant.taskdefs.condition.Os\n+import groovy.json.JsonSlurper\n+import groovy.json.JsonOutput\n+\n+class amplifytools implements Plugin<Project> {\n+    void apply(Project project) {\n+        def doesNodeExist = true\n+        def doesGradleConfigExist\n+\n+        // profile name can be changed in amplify-gradle-config\n+        def profile = 'default'\n+        def accessKeyId = null\n+        def secretAccessKey = null\n+        def region = null\n+        def envName = 'amplify'\n+        def syncEnabled = 'true'\n+\n+        project.task('verifyNode') {\n+            try {\n+                project.exec {\n+                    commandLine 'node', '-v'\n+                    standardOutput = new ByteArrayOutputStream()\n+                }\n+            } catch (commandLineFailure) {\n+                doesNodeExist = false\n+                println(\"Node is not installed. Visit https://nodejs.org/en/download/ to install it\")\n+            }\n+        }\n+\n+        project.task('createAmplifyApp') {\n+            doesGradleConfigExist = project.file('amplify-gradle-config.json').isFile()\n+            if (doesNodeExist && !doesGradleConfigExist) {\n+                if(Os.isFamily(Os.FAMILY_WINDOWS)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ba1fcb4458c53bf5e04f9d81f16fafb3c77eb4ab"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk0Mjk5Nw==", "bodyText": "Kill this", "url": "https://github.com/aws-amplify/amplify-android/pull/505#discussion_r428942997", "createdAt": "2020-05-21T22:09:00Z", "author": {"login": "jamesonwilliams"}, "path": "amplify-tools/build.gradle", "diffHunk": "@@ -0,0 +1,27 @@\n+// Top-level build file where you can add configuration options common to all sub-projects/modules.\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ba1fcb4458c53bf5e04f9d81f16fafb3c77eb4ab"}, "originalPosition": 2}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk0MzA1NQ==", "bodyText": "Kill this", "url": "https://github.com/aws-amplify/amplify-android/pull/505#discussion_r428943055", "createdAt": "2020-05-21T22:09:09Z", "author": {"login": "jamesonwilliams"}, "path": "amplify-tools/build.gradle", "diffHunk": "@@ -0,0 +1,27 @@\n+// Top-level build file where you can add configuration options common to all sub-projects/modules.\n+\n+buildscript {\n+    repositories {\n+        google()\n+        jcenter()\n+        \n+    }\n+    dependencies {\n+        classpath 'com.android.tools.build:gradle:3.6.3'\n+        \n+        // NOTE: Do not place your application dependencies here; they belong\n+        // in the individual module build.gradle files", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ba1fcb4458c53bf5e04f9d81f16fafb3c77eb4ab"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk0MzE1NA==", "bodyText": "kill this empty line", "url": "https://github.com/aws-amplify/amplify-android/pull/505#discussion_r428943154", "createdAt": "2020-05-21T22:09:24Z", "author": {"login": "jamesonwilliams"}, "path": "amplify-tools/build.gradle", "diffHunk": "@@ -0,0 +1,27 @@\n+// Top-level build file where you can add configuration options common to all sub-projects/modules.\n+\n+buildscript {\n+    repositories {\n+        google()\n+        jcenter()\n+        \n+    }\n+    dependencies {\n+        classpath 'com.android.tools.build:gradle:3.6.3'\n+        \n+        // NOTE: Do not place your application dependencies here; they belong\n+        // in the individual module build.gradle files\n+    }\n+}\n+\n+allprojects {\n+    repositories {\n+        google()\n+        jcenter()\n+        ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ba1fcb4458c53bf5e04f9d81f16fafb3c77eb4ab"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk0NDAzOQ==", "bodyText": "It is a little troubling to watch a second copy of this script come into the git repository. Is this identically the same as the configuration/publishing.gradle in the main project?\nI don't think there's anything ~reasonable we can do to prevent it, unfortunately.\nWe can make sure that the files are identical in contents and name, thought.\nThis one at least has a different name.", "url": "https://github.com/aws-amplify/amplify-android/pull/505#discussion_r428944039", "createdAt": "2020-05-21T22:12:00Z", "author": {"login": "jamesonwilliams"}, "path": "amplify-tools/gradle-mvn-push.gradle", "diffHunk": "@@ -0,0 +1,233 @@\n+/*\n+ * Copyright 2013 Chris Banes", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ba1fcb4458c53bf5e04f9d81f16fafb3c77eb4ab"}, "originalPosition": 2}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk0NDI2Ng==", "bodyText": "Ah yea, it not only has a different file name -- but the contents of this script is different from configuration/publishing.gradle, too.", "url": "https://github.com/aws-amplify/amplify-android/pull/505#discussion_r428944266", "createdAt": "2020-05-21T22:12:37Z", "author": {"login": "jamesonwilliams"}, "path": "amplify-tools/gradle-mvn-push.gradle", "diffHunk": "@@ -0,0 +1,233 @@\n+/*\n+ * Copyright 2013 Chris Banes\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+apply plugin: 'maven'\n+apply plugin: 'signing'\n+\n+version = VERSION_NAME\n+group = GROUP\n+\n+def isReleaseBuild() {\n+    return VERSION_NAME.contains(\"SNAPSHOT\") == false\n+}\n+\n+def getReleaseRepositoryUrl() {\n+    return hasProperty('RELEASE_REPOSITORY_URL') ? RELEASE_REPOSITORY_URL :\n+            \"https://aws.oss.sonatype.org/service/local/staging/deploy/maven2/\"\n+}\n+\n+def getSnapshotRepositoryUrl() {\n+    return hasProperty('SNAPSHOT_REPOSITORY_URL') ? SNAPSHOT_REPOSITORY_URL :\n+            \"https://aws.oss.sonatype.org/content/repositories/snapshots/\"\n+}\n+\n+def getRepositoryUsername() {\n+    return hasProperty('SONATYPE_NEXUS_USERNAME') ? SONATYPE_NEXUS_USERNAME : \"\"\n+}\n+\n+def getRepositoryPassword() {\n+    return hasProperty('SONATYPE_NEXUS_PASSWORD') ? SONATYPE_NEXUS_PASSWORD : \"\"\n+}\n+\n+archivesBaseName = POM_ARTIFACT_ID\n+\n+afterEvaluate { project ->\n+    uploadArchives {\n+        repositories {\n+            if (project.hasProperty('SONATYPE_NEXUS_USERNAME')) {\n+                mavenDeployer {\n+                    beforeDeployment { MavenDeployment deployment -> signing.signPom(deployment) }\n+\n+                    pom.groupId = GROUP\n+                    pom.artifactId = POM_ARTIFACT_ID\n+                    pom.version = VERSION_NAME\n+\n+                    repository(url: getReleaseRepositoryUrl()) {\n+                        authentication(userName: getRepositoryUsername(), password: getRepositoryPassword())\n+                    }\n+                    snapshotRepository(url: getSnapshotRepositoryUrl()) {\n+                        authentication(userName: getRepositoryUsername(), password: getRepositoryPassword())\n+                    }\n+\n+                    pom.project {\n+                        name POM_NAME\n+                        packaging POM_PACKAGING\n+                        description POM_DESCRIPTION\n+                        url POM_URL\n+\n+                        scm {\n+                            url POM_SCM_URL\n+                            connection POM_SCM_CONNECTION\n+                            developerConnection POM_SCM_DEV_CONNECTION\n+                        }\n+\n+                        licenses {\n+                            license {\n+                                name POM_LICENCE_NAME\n+                                url POM_LICENCE_URL\n+                                distribution POM_LICENCE_DIST\n+                            }\n+                        }\n+\n+                        developers {\n+                            developer {\n+                                id POM_DEVELOPER_ID\n+                                organizationUrl POM_DEVELOPER_ORGANIZATION_URL\n+                                roles {\n+                                    role \"developer\"\n+                                }\n+                            }\n+                        }\n+                    }\n+                }\n+            } else {\n+                mavenInstaller {\n+                    pom.groupId = GROUP\n+                    pom.artifactId = POM_ARTIFACT_ID\n+                    pom.version = VERSION_NAME\n+                }\n+            }\n+        }\n+    }\n+\n+    signing {\n+        required { isReleaseBuild() && gradle.taskGraph.hasTask(\"uploadArchives\") }\n+        sign configurations.archives\n+    }\n+\n+    if (project.getPlugins().hasPlugin('com.android.application') ||\n+            project.getPlugins().hasPlugin('com.android.library')) {\n+        task install(type: Upload, dependsOn: assemble) {\n+            repositories.mavenInstaller {\n+                configuration = configurations.archives\n+\n+                pom.groupId = GROUP\n+                pom.artifactId = POM_ARTIFACT_ID\n+                pom.version = VERSION_NAME\n+\n+                pom.project {\n+                    name POM_NAME\n+                    packaging POM_PACKAGING\n+                    description POM_DESCRIPTION\n+                    url POM_URL\n+\n+                    scm {\n+                        url POM_SCM_URL\n+                        connection POM_SCM_CONNECTION\n+                        developerConnection POM_SCM_DEV_CONNECTION\n+                    }\n+\n+                    licenses {\n+                        license {\n+                            name POM_LICENCE_NAME\n+                            url POM_LICENCE_URL\n+                            distribution POM_LICENCE_DIST\n+                        }\n+                    }\n+\n+                    developers {\n+                        developer {\n+                            id POM_DEVELOPER_ID\n+                            organization POM_DEVELOPER_ORGANIZATION\n+                            organizationUrl POM_DEVELOPER_ORGANIZATION_URL\n+                        }\n+                    }\n+                }\n+            }\n+        }\n+\n+        task androidJavadocs(type: Javadoc) {\n+            source = android.sourceSets.main.java.source\n+            classpath += project.files(android.getBootClasspath().join(File.pathSeparator))\n+        }\n+\n+        task androidJavadocsJar(type: Jar, dependsOn: androidJavadocs) {\n+            classifier = 'javadoc'\n+            from androidJavadocs.destinationDir\n+        }\n+\n+        task androidSourcesJar(type: Jar) {\n+            classifier = 'sources'\n+            from android.sourceSets.main.java.source\n+        }\n+    } else {\n+        install {\n+            repositories.mavenInstaller {\n+                pom.groupId = GROUP\n+                pom.artifactId = POM_ARTIFACT_ID\n+                pom.version = VERSION_NAME\n+\n+                pom.project {\n+                    name POM_NAME\n+                    packaging POM_PACKAGING\n+                    description POM_DESCRIPTION\n+                    url POM_URL\n+\n+                    scm {\n+                        url POM_SCM_URL\n+                        connection POM_SCM_CONNECTION\n+                        developerConnection POM_SCM_DEV_CONNECTION\n+                    }\n+\n+                    licenses {\n+                        license {\n+                            name POM_LICENCE_NAME\n+                            url POM_LICENCE_URL\n+                            distribution POM_LICENCE_DIST\n+                        }\n+                    }\n+\n+                    developers {\n+                        developer {\n+                            id POM_DEVELOPER_ID\n+                            organization POM_DEVELOPER_ORGANIZATION\n+                            organizationUrl POM_DEVELOPER_ORGANIZATION_URL\n+                        }\n+                    }\n+                }\n+            }\n+        }\n+\n+        task sourcesJar(type: Jar, dependsOn: classes) {\n+            classifier = 'sources'\n+            from sourceSets.main.allSource\n+        }\n+\n+        task javadocJar(type: Jar, dependsOn: javadoc) {\n+            classifier = 'javadoc'\n+            from javadoc.destinationDir\n+        }\n+    }\n+\n+    if (JavaVersion.current().isJava8Compatible()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ba1fcb4458c53bf5e04f9d81f16fafb3c77eb4ab"}, "originalPosition": 215}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk0NDQ0NA==", "bodyText": "I don't think your plugin uses Android X. You can remove the lines about AndroidX and Jettifier.", "url": "https://github.com/aws-amplify/amplify-android/pull/505#discussion_r428944444", "createdAt": "2020-05-21T22:13:07Z", "author": {"login": "jamesonwilliams"}, "path": "amplify-tools/gradle.properties", "diffHunk": "@@ -0,0 +1,36 @@\n+# Project-wide Gradle settings.\n+# IDE (e.g. Android Studio) users:\n+# Gradle settings configured through the IDE *will override*\n+# any settings specified in this file.\n+# For more details on how to configure your build environment visit\n+# http://www.gradle.org/docs/current/userguide/build_environment.html\n+# Specifies the JVM arguments used for the daemon process.\n+# The setting is particularly useful for tweaking memory settings.\n+org.gradle.jvmargs=-Xmx1536m\n+# When configured, Gradle will run in incubating parallel mode.\n+# This option should only be used with decoupled projects. More details, visit\n+# http://www.gradle.org/docs/current/userguide/multi_project_builds.html#sec:decoupled_projects\n+# org.gradle.parallel=true\n+# AndroidX package structure to make it clearer which packages are bundled with the\n+# Android operating system, and which are packaged with your app's APK\n+# https://developer.android.com/topic/libraries/support-library/androidx-rn\n+android.useAndroidX=true", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ba1fcb4458c53bf5e04f9d81f16fafb3c77eb4ab"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk0NDUyNw==", "bodyText": "Update these so that they are correct and refer to the current state of the project in amplify-android.", "url": "https://github.com/aws-amplify/amplify-android/pull/505#discussion_r428944527", "createdAt": "2020-05-21T22:13:21Z", "author": {"login": "jamesonwilliams"}, "path": "amplify-tools/gradle.properties", "diffHunk": "@@ -0,0 +1,36 @@\n+# Project-wide Gradle settings.\n+# IDE (e.g. Android Studio) users:\n+# Gradle settings configured through the IDE *will override*\n+# any settings specified in this file.\n+# For more details on how to configure your build environment visit\n+# http://www.gradle.org/docs/current/userguide/build_environment.html\n+# Specifies the JVM arguments used for the daemon process.\n+# The setting is particularly useful for tweaking memory settings.\n+org.gradle.jvmargs=-Xmx1536m\n+# When configured, Gradle will run in incubating parallel mode.\n+# This option should only be used with decoupled projects. More details, visit\n+# http://www.gradle.org/docs/current/userguide/multi_project_builds.html#sec:decoupled_projects\n+# org.gradle.parallel=true\n+# AndroidX package structure to make it clearer which packages are bundled with the\n+# Android operating system, and which are packaged with your app's APK\n+# https://developer.android.com/topic/libraries/support-library/androidx-rn\n+android.useAndroidX=true\n+# Automatically convert third-party libraries to use AndroidX\n+android.enableJetifier=true\n+\n+GROUP=com.amplifyframework\n+VERSION_NAME=1.0.0\n+AWS_CORE_SDK_VERSION=2.16.3\n+\n+POM_URL=https://github.com/aws-amplify/amplify-cli/\n+POM_SCM_URL=https://github.com/aws-amplify/amplify-cli/\n+POM_SCM_CONNECTION=scm:git:git://github.com/aws-amplify/amplify-cli.git\n+POM_SCM_DEV_CONNECTION=scm:git:ssh://git@github.com/aws-amplify/amplify-cli.git", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ba1fcb4458c53bf5e04f9d81f16fafb3c77eb4ab"}, "originalPosition": 28}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4b1ac235b4124c5c1016e21888bb6f026e02284c", "author": {"user": {"login": "nikhname", "name": "Nikhil Lingireddy"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/4b1ac235b4124c5c1016e21888bb6f026e02284c", "committedDate": "2020-05-21T23:41:00Z", "message": "naming and formating"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "36cdd24ad29732a666541df6628c411b38ed3909", "author": {"user": {"login": "nikhname", "name": "Nikhil Lingireddy"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/36cdd24ad29732a666541df6628c411b38ed3909", "committedDate": "2020-05-21T23:53:12Z", "message": "removing files and formatting"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE2NTg4NjU1", "url": "https://github.com/aws-amplify/amplify-android/pull/505#pullrequestreview-416588655", "createdAt": "2020-05-22T01:11:39Z", "commit": {"oid": "36cdd24ad29732a666541df6628c411b38ed3909"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b246141e7d96d092fced3b7ed01c2fb8866ef344", "author": {"user": {"login": "nikhname", "name": "Nikhil Lingireddy"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/b246141e7d96d092fced3b7ed01c2fb8866ef344", "committedDate": "2020-05-22T01:14:43Z", "message": "using publishing.gradle"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2545, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}