{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ3MTQ1NzY2", "number": 633, "title": "feat(DataStore) add sorting", "bodyText": "Summary\n\nThis PR adds support for sorting on the DataStore.query API.\nAlso, currently customers can only query for pagination if they also provide a predicate.  This PR adds a new paginated method on the Where builder so that a customer can specify just pagination if desired (Where.paginated(Page.firstPage())).\n\nSample DX:\n        Amplify.DataStore.query(Todo.class,\n                Where\n                        .matches(Todo.NAME.beginsWith(\"foo\").and(Todo.DESCRIPTION.beginsWith(\"bar\")))\n                        .paginated(Page.firstPage())\n                        .sorted(Todo.NAME.ascending(), Todo.DESCRIPTION.descending(), Todo.ID.ascending()),\n                response -> { },\n                error -> { });\n\nBy submitting this pull request, I confirm that my contribution is made under the terms of the Apache 2.0 license.", "createdAt": "2020-07-09T23:37:58Z", "url": "https://github.com/aws-amplify/amplify-android/pull/633", "merged": true, "mergeCommit": {"oid": "7de77fe56dc79ab1c75a154821e3f1b04bb308d2"}, "closed": true, "closedAt": "2020-08-26T21:13:13Z", "author": {"login": "richardmcclellan"}, "timelineItems": {"totalCount": 20, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc3AULAgFqTQ0NjExODgzMA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdCyXkkgFqTQ3NTg1ODc4Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ2MTE4ODMw", "url": "https://github.com/aws-amplify/amplify-android/pull/633#pullrequestreview-446118830", "createdAt": "2020-07-10T04:47:14Z", "commit": {"oid": "40c45db42571a1ae5ee97c2480afab9df70fb5af"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMFQwNDo0NzoxNFrOGvpuFQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQwNTo1OTo1MFrOG0pQxQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjYxOTc5Nw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            \", sortInput=\" + sortBy +\n          \n          \n            \n                            \", sortBy=\" + sortBy +", "url": "https://github.com/aws-amplify/amplify-android/pull/633#discussion_r452619797", "createdAt": "2020-07-10T04:47:14Z", "author": {"login": "jamesonwilliams"}, "path": "core/src/main/java/com/amplifyframework/core/model/query/QueryOptions.java", "diffHunk": "@@ -102,6 +141,7 @@ public String toString() {\n         return \"QueryOptions{\" +\n                 \"queryPredicate=\" + queryPredicate +\n                 \", paginationInput=\" + paginationInput +\n+                \", sortInput=\" + sortBy +", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "40c45db42571a1ae5ee97c2480afab9df70fb5af"}, "originalPosition": 103}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzg1NTE3Mw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                /**\n          \n          \n            \n                 * Returns the {@code sortInput} property.\n          \n          \n            \n                 * @return the {@code sortInput} property.\n          \n          \n            \n                 */\n          \n          \n            \n                /**\n          \n          \n            \n                 * Returns the {@code sortBy} property.\n          \n          \n            \n                 * @return the {@code sortBy} property.\n          \n          \n            \n                 */", "url": "https://github.com/aws-amplify/amplify-android/pull/633#discussion_r457855173", "createdAt": "2020-07-21T05:59:50Z", "author": {"login": "jamesonwilliams"}, "path": "core/src/main/java/com/amplifyframework/core/model/query/QueryOptions.java", "diffHunk": "@@ -78,6 +107,15 @@ public QueryPaginationInput getPaginationInput() {\n         return paginationInput;\n     }\n \n+    /**\n+     * Returns the {@code sortInput} property.\n+     * @return the {@code sortInput} property.\n+     */", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "40c45db42571a1ae5ee97c2480afab9df70fb5af"}, "originalPosition": 74}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "056445018ba6ac89e575c931a71961c0ab6f063b", "author": {"user": {"login": "richardmcclellan", "name": "Richard McClellan"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/056445018ba6ac89e575c931a71961c0ab6f063b", "committedDate": "2020-08-18T21:44:15Z", "message": "feat(datastore) add sorting"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4e88cada73c3c231826bc249282bb3949f53c343", "author": {"user": {"login": "richardmcclellan", "name": "Richard McClellan"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/4e88cada73c3c231826bc249282bb3949f53c343", "committedDate": "2020-08-18T21:44:15Z", "message": "Update core/src/main/java/com/amplifyframework/core/model/query/QueryOptions.java\n\nCo-authored-by: Jameson Williams <jhwill@amazon.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ea84d0d7f8fc2b8c02b00b375e9005eba183f194", "author": {"user": {"login": "richardmcclellan", "name": "Richard McClellan"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/ea84d0d7f8fc2b8c02b00b375e9005eba183f194", "committedDate": "2020-08-18T21:44:15Z", "message": "Update core/src/main/java/com/amplifyframework/core/model/query/QueryOptions.java\n\nCo-authored-by: Jameson Williams <jhwill@amazon.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxMjUxNzg4", "url": "https://github.com/aws-amplify/amplify-android/pull/633#pullrequestreview-471251788", "createdAt": "2020-08-20T05:12:20Z", "commit": {"oid": "a642aaab6f6f172df6a038bec2ed0affacc6ea37"}, "state": "COMMENTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQwNToxMjoyMFrOHDqCag==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQwNToyNDoyOVrOHDqetA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzU5NjUyMg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            public class QuerySortBy {\n          \n          \n            \n            public final class QuerySortBy {", "url": "https://github.com/aws-amplify/amplify-android/pull/633#discussion_r473596522", "createdAt": "2020-08-20T05:12:20Z", "author": {"login": "jamesonwilliams"}, "path": "core/src/main/java/com/amplifyframework/core/model/query/QuerySortBy.java", "diffHunk": "@@ -0,0 +1,35 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package com.amplifyframework.core.model.query;\n+\n+/**\n+ * A simple data structure that holds sort information that can be applied queries.\n+ */\n+public class QuerySortBy {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a642aaab6f6f172df6a038bec2ed0affacc6ea37"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzU5Njg1OA==", "bodyText": "field accessors, equals, toString, hashCode, all that Jazz? (If only we could use Kotlin data classes, sigh.)", "url": "https://github.com/aws-amplify/amplify-android/pull/633#discussion_r473596858", "createdAt": "2020-08-20T05:12:55Z", "author": {"login": "jamesonwilliams"}, "path": "core/src/main/java/com/amplifyframework/core/model/query/QuerySortBy.java", "diffHunk": "@@ -0,0 +1,35 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package com.amplifyframework.core.model.query;\n+\n+/**\n+ * A simple data structure that holds sort information that can be applied queries.\n+ */\n+public class QuerySortBy {\n+    private final String field;\n+    private final QuerySortOrder sortOrder;\n+\n+    /**\n+     * Constructor for {@code QuerySortBy}.\n+     *\n+     * @param field name of field to sort by.\n+     * @param sortOrder order to sort by, either ASCENDING or DESCENDING.\n+     */\n+    public QuerySortBy(String field, QuerySortOrder sortOrder) {\n+        this.field = field;\n+        this.sortOrder = sortOrder;\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a642aaab6f6f172df6a038bec2ed0affacc6ea37"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzU5NzE0Nw==", "bodyText": "Probably room for rewording", "url": "https://github.com/aws-amplify/amplify-android/pull/633#discussion_r473597147", "createdAt": "2020-08-20T05:13:24Z", "author": {"login": "jamesonwilliams"}, "path": "core/src/main/java/com/amplifyframework/core/model/query/QuerySortBy.java", "diffHunk": "@@ -0,0 +1,35 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package com.amplifyframework.core.model.query;\n+\n+/**\n+ * A simple data structure that holds sort information that can be applied queries.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a642aaab6f6f172df6a038bec2ed0affacc6ea37"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzYwMzAzNg==", "bodyText": "The new sorted and matches change QueryOptions into a mutable class.\nOne ~easy solution would be to have these generate clones, that \"patch\" the field of interest.\ne.g.\n    public QueryOptions sorted(@NonNull final QuerySortBy... sortBy) {\n        return new QueryOptions(queryPredicate, paginationInput, Immutable.of(Arrays.asList(sortBy)));\n    }\nAlso, it would certainly be cool* if we could build up the list of QuerySortBy through subsequent appended calls:\nWhere.sorted(User.LAST_NAME.ascending())\n    .sorted(User.FIRST_NAME.ascending())\n    .sorted(User.CREATED_AT.descending())\nIf we were to support that, I guess the impl of this method would be more like:\n    public QueryOptions sorted(@NonNull final QuerySortBy... sortBy) {\n        List<QuerySortBy> augmentedList = new ArrayList<>(this.sortBy);\n        augmentedList.addAll(Immutable.of(sortBy));\n        return new QueryOptions(queryPredicate, paginationInput, Immutable.of(augmentedList));\n    }", "url": "https://github.com/aws-amplify/amplify-android/pull/633#discussion_r473603036", "createdAt": "2020-08-20T05:23:12Z", "author": {"login": "jamesonwilliams"}, "path": "core/src/main/java/com/amplifyframework/core/model/query/QueryOptions.java", "diffHunk": "@@ -60,6 +78,17 @@ public QueryOptions paginated(@NonNull final QueryPaginationInput paginationInpu\n         return this;\n     }\n \n+    /**\n+     * Updates the current options with a given {@code sortBy}.\n+     *\n+     * @param sortBy sorting information\n+     * @return current options with an updated {@code sortBy}.\n+     */\n+    public QueryOptions sorted(@NonNull final QuerySortBy... sortBy) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a642aaab6f6f172df6a038bec2ed0affacc6ea37"}, "originalPosition": 59}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzYwMzc2NA==", "bodyText": "Mostly same discussion on this one as sorted(...) I think, except without the list building crap. TLDR, See if you can return a new copy of QueryOptions instead of mutating this instance. This will keep the options object immutable.", "url": "https://github.com/aws-amplify/amplify-android/pull/633#discussion_r473603764", "createdAt": "2020-08-20T05:24:29Z", "author": {"login": "jamesonwilliams"}, "path": "core/src/main/java/com/amplifyframework/core/model/query/QueryOptions.java", "diffHunk": "@@ -22,28 +22,46 @@\n import com.amplifyframework.core.model.query.predicate.QueryPredicate;\n import com.amplifyframework.core.model.query.predicate.QueryPredicates;\n \n+import java.util.Arrays;\n+import java.util.List;\n+\n /**\n  * A data structure that provides a query construction mechanism that consolidates all query-related\n  * options (e.g. predicates, pagination, etc) and allows consumers to build queries in a fluent way.\n  */\n public final class QueryOptions {\n     private QueryPredicate queryPredicate;\n     private QueryPaginationInput paginationInput;\n+    private List<QuerySortBy> sortBy;\n \n     /**\n      * This class should be created using the factory methods such as {@link Where#matchesAll()}\n      * and {@link Where#matches(QueryPredicate)}.\n      */\n     QueryOptions(\n             @Nullable QueryPredicate queryPredicate,\n-            @Nullable QueryPaginationInput paginationInput\n+            @Nullable QueryPaginationInput paginationInput,\n+            @Nullable List<QuerySortBy> sortBy\n     ) {\n         this.queryPredicate = queryPredicate == null ? QueryPredicates.all() : queryPredicate;\n         this.paginationInput = paginationInput;\n+        this.sortBy = sortBy;\n     }\n \n     QueryOptions() {\n-        this(null, null);\n+        this(null, null, null);\n+    }\n+\n+    /**\n+     * Update the current options with a given {@code queryPredicate}.\n+     *\n+     * @param queryPredicate predicate.\n+     * @return current options with an updated {@code queryPredicate}.\n+     */\n+    @NonNull\n+    public QueryOptions matches(@NonNull final QueryPredicate queryPredicate) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a642aaab6f6f172df6a038bec2ed0affacc6ea37"}, "originalPosition": 43}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d6f61ccdd15b537d2aca3584f0b65026727e22cb", "author": {"user": {"login": "richardmcclellan", "name": "Richard McClellan"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/d6f61ccdd15b537d2aca3584f0b65026727e22cb", "committedDate": "2020-08-20T18:17:52Z", "message": "Add implementation for sorting"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a642aaab6f6f172df6a038bec2ed0affacc6ea37", "author": {"user": {"login": "richardmcclellan", "name": "Richard McClellan"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/a642aaab6f6f172df6a038bec2ed0affacc6ea37", "committedDate": "2020-07-21T16:26:28Z", "message": "Update core/src/main/java/com/amplifyframework/core/model/query/QueryOptions.java\n\nCo-authored-by: Jameson Williams <jhwill@amazon.com>"}, "afterCommit": {"oid": "d6f61ccdd15b537d2aca3584f0b65026727e22cb", "author": {"user": {"login": "richardmcclellan", "name": "Richard McClellan"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/d6f61ccdd15b537d2aca3584f0b65026727e22cb", "committedDate": "2020-08-20T18:17:52Z", "message": "Add implementation for sorting"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bb0a6894b03e9e4bd3434853bb5c9894149d5d20", "author": {"user": {"login": "richardmcclellan", "name": "Richard McClellan"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/bb0a6894b03e9e4bd3434853bb5c9894149d5d20", "committedDate": "2020-08-20T19:42:53Z", "message": "Address PR feedback"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6b48cce7e8fa7010f0984fd0d440b2e1ac62b3f0", "author": {"user": {"login": "richardmcclellan", "name": "Richard McClellan"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/6b48cce7e8fa7010f0984fd0d440b2e1ac62b3f0", "committedDate": "2020-08-20T20:56:55Z", "message": "Merge branch 'main' into rm/sort"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc1NzY2MDEz", "url": "https://github.com/aws-amplify/amplify-android/pull/633#pullrequestreview-475766013", "createdAt": "2020-08-26T18:52:17Z", "commit": {"oid": "6b48cce7e8fa7010f0984fd0d440b2e1ac62b3f0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQxODo1MjoxOFrOHHZPLA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQxODo1MjoxOFrOHHZPLA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzUxNTU2NA==", "bodyText": "Nit: Instead of \"columnName of the column\" it may be more clear to say \"name of the column\"", "url": "https://github.com/aws-amplify/amplify-android/pull/633#discussion_r477515564", "createdAt": "2020-08-26T18:52:18Z", "author": {"login": "eeatonaws"}, "path": "aws-datastore/src/main/java/com/amplifyframework/datastore/storage/sqlite/adapter/SQLiteTable.java", "diffHunk": "@@ -173,6 +175,22 @@ public String getPrimaryKeyColumnName() {\n         return Immutable.of(foreignKeys);\n     }\n \n+    /**\n+     * Returns the SQLiteColumn for the provided columnName.\n+     * @param columnName columnName of the column", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6b48cce7e8fa7010f0984fd0d440b2e1ac62b3f0"}, "originalPosition": 19}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc1NzY3MzU3", "url": "https://github.com/aws-amplify/amplify-android/pull/633#pullrequestreview-475767357", "createdAt": "2020-08-26T18:54:09Z", "commit": {"oid": "6b48cce7e8fa7010f0984fd0d440b2e1ac62b3f0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQxODo1NDowOVrOHHZTDA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQxODo1NDowOVrOHHZTDA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzUxNjU1Ng==", "bodyText": "Since the return value of this method will not be null, you could annotate this method with @NonNull.", "url": "https://github.com/aws-amplify/amplify-android/pull/633#discussion_r477516556", "createdAt": "2020-08-26T18:54:09Z", "author": {"login": "eeatonaws"}, "path": "aws-datastore/src/main/java/com/amplifyframework/datastore/storage/sqlite/SqlKeyword.java", "diffHunk": "@@ -203,6 +223,21 @@ public static SqlKeyword fromQueryPredicateGroup(@NonNull QueryPredicateGroup.Ty\n         return sqlKeyword;\n     }\n \n+    /**\n+     * Retrieve the SQL specific keyword for the query sort order type.\n+     * @param sortOrder the query sort order type\n+     * @return the SQL specific keyword\n+     */", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6b48cce7e8fa7010f0984fd0d440b2e1ac62b3f0"}, "originalPosition": 54}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc1ODE4NTYy", "url": "https://github.com/aws-amplify/amplify-android/pull/633#pullrequestreview-475818562", "createdAt": "2020-08-26T20:04:09Z", "commit": {"oid": "6b48cce7e8fa7010f0984fd0d440b2e1ac62b3f0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQyMDowNDowOVrOHHbyqQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQyMDowNDowOVrOHHbyqQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzU1NzQxNw==", "bodyText": "Should the first \"@\" in @{@link QueryField#ascending()} be removed?", "url": "https://github.com/aws-amplify/amplify-android/pull/633#discussion_r477557417", "createdAt": "2020-08-26T20:04:09Z", "author": {"login": "eeatonaws"}, "path": "core/src/main/java/com/amplifyframework/core/model/query/QuerySortBy.java", "diffHunk": "@@ -0,0 +1,92 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package com.amplifyframework.core.model.query;\n+\n+import androidx.annotation.NonNull;\n+import androidx.core.util.ObjectsCompat;\n+\n+import com.amplifyframework.core.Consumer;\n+import com.amplifyframework.core.model.query.predicate.QueryField;\n+import com.amplifyframework.datastore.DataStoreCategoryBehavior;\n+\n+import java.util.Objects;\n+\n+/**\n+ * A data structure representing a model field and an order to sort by (ascending or descending), used to specify the\n+ * order of results from {@link DataStoreCategoryBehavior#query(Class, QueryOptions, Consumer, Consumer)}.\n+ *\n+ * The preferred way to create a QuerySortBy is with the @{@link QueryField#ascending()} and", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6b48cce7e8fa7010f0984fd0d440b2e1ac62b3f0"}, "originalPosition": 31}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3a727dce0feb3679d9033ba71e511070eb8b1b90", "author": {"user": {"login": "richardmcclellan", "name": "Richard McClellan"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/3a727dce0feb3679d9033ba71e511070eb8b1b90", "committedDate": "2020-08-26T20:38:43Z", "message": "Make QueryOptions.sorted override the entire list of QuerySortBys instead of appending to the existing one"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a98e63b866f71d2119e51ea59f384f20ac279dce", "author": {"user": {"login": "richardmcclellan", "name": "Richard McClellan"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/a98e63b866f71d2119e51ea59f384f20ac279dce", "committedDate": "2020-08-26T20:42:40Z", "message": "PR feedback"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc1ODQ2NjM5", "url": "https://github.com/aws-amplify/amplify-android/pull/633#pullrequestreview-475846639", "createdAt": "2020-08-26T20:46:52Z", "commit": {"oid": "a98e63b866f71d2119e51ea59f384f20ac279dce"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQyMDo0Njo1MlrOHHdIuA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQyMDo0Njo1MlrOHHdIuA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzU3OTQ0OA==", "bodyText": "Nit: \"the\" is repeated twice in this comment (\"with the the given\")", "url": "https://github.com/aws-amplify/amplify-android/pull/633#discussion_r477579448", "createdAt": "2020-08-26T20:46:52Z", "author": {"login": "eeatonaws"}, "path": "core/src/main/java/com/amplifyframework/core/model/query/QueryOptions.java", "diffHunk": "@@ -56,8 +73,17 @@\n      */\n     @NonNull\n     public QueryOptions paginated(@NonNull final QueryPaginationInput paginationInput) {\n-        this.paginationInput = paginationInput;\n-        return this;\n+        return new QueryOptions(queryPredicate, paginationInput, sortBy);\n+    }\n+\n+    /**\n+     * Returns an immutable copy of the current query options with the the given {@code sortBy} arguments.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a98e63b866f71d2119e51ea59f384f20ac279dce"}, "originalPosition": 63}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc1ODQ3NDI0", "url": "https://github.com/aws-amplify/amplify-android/pull/633#pullrequestreview-475847424", "createdAt": "2020-08-26T20:48:07Z", "commit": {"oid": "a98e63b866f71d2119e51ea59f384f20ac279dce"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQyMDo0ODowN1rOHHdLEw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQyMDo0ODowN1rOHHdLEw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzU4MDA1MQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    return new QueryOptions(queryPredicate, paginationInput, Arrays.asList(querySortBy));\n          \n          \n            \n                    return new QueryOptions(queryPredicate, paginationInput, Arrays.asList(Objects.requireNonNull(querySortBy)));", "url": "https://github.com/aws-amplify/amplify-android/pull/633#discussion_r477580051", "createdAt": "2020-08-26T20:48:07Z", "author": {"login": "eeatonaws"}, "path": "core/src/main/java/com/amplifyframework/core/model/query/QueryOptions.java", "diffHunk": "@@ -56,8 +73,17 @@\n      */\n     @NonNull\n     public QueryOptions paginated(@NonNull final QueryPaginationInput paginationInput) {\n-        this.paginationInput = paginationInput;\n-        return this;\n+        return new QueryOptions(queryPredicate, paginationInput, sortBy);\n+    }\n+\n+    /**\n+     * Returns an immutable copy of the current query options with the the given {@code sortBy} arguments.\n+     *\n+     * @param querySortBy sorting information.\n+     * @return current options with an updated {@code sortBy}.\n+     */\n+    public QueryOptions sorted(@NonNull final QuerySortBy... querySortBy) {\n+        return new QueryOptions(queryPredicate, paginationInput, Arrays.asList(querySortBy));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a98e63b866f71d2119e51ea59f384f20ac279dce"}, "originalPosition": 69}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6f8568339f5098fc849e1c8e7c78c8ba7548d9b4", "author": {"user": {"login": "richardmcclellan", "name": "Richard McClellan"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/6f8568339f5098fc849e1c8e7c78c8ba7548d9b4", "committedDate": "2020-08-26T20:50:15Z", "message": "Remove extra the"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "702f52efddedb9a63a20005be9ebfe5f5b8db3d9", "author": {"user": {"login": "richardmcclellan", "name": "Richard McClellan"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/702f52efddedb9a63a20005be9ebfe5f5b8db3d9", "committedDate": "2020-08-26T20:51:13Z", "message": "Update core/src/main/java/com/amplifyframework/core/model/query/QueryOptions.java\n\nCo-authored-by: eeatonaws <67125657+eeatonaws@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d2b1211b01c5ea2ae5112763157f3cd4924e0718", "author": {"user": {"login": "richardmcclellan", "name": "Richard McClellan"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/d2b1211b01c5ea2ae5112763157f3cd4924e0718", "committedDate": "2020-08-26T20:54:05Z", "message": "More requireNotNull"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc1ODU4Nzg2", "url": "https://github.com/aws-amplify/amplify-android/pull/633#pullrequestreview-475858786", "createdAt": "2020-08-26T21:06:05Z", "commit": {"oid": "d2b1211b01c5ea2ae5112763157f3cd4924e0718"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1858, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}