{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ2OTUwMjg0", "number": 632, "title": "Develop screen navigation and header for dev menu", "bodyText": "Issue #, if available: N/A\nDescription of changes: Adds a header to each screen of the developer menu (that includes a back button), overrides the Android phone back button to allow navigation between developer menu screens, and navigates to a new view when a button on the main developer menu screen is pressed.\nMain developer menu view:\n\nEnvironment information view (the views displayed when the other three buttons are pressed look the same as this view, only with a different title):\n\nBy submitting this pull request, I confirm that my contribution is made under the terms of the Apache 2.0 license.", "createdAt": "2020-07-09T15:55:45Z", "url": "https://github.com/aws-amplify/amplify-android/pull/632", "merged": true, "mergeCommit": {"oid": "ac7c8ebf5e6f13f5e2fa0541996ae1a18a5ba846"}, "closed": true, "closedAt": "2020-07-15T21:15:19Z", "author": {"login": "eeatonaws"}, "timelineItems": {"totalCount": 54, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcueiuogH2gAyNDQ2OTUwMjg0OjI0MTZmM2JjZTc3N2E0Yjc5YTdlNWU5ODE2YmY5OThkZDFjNjAxZDM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc1Pi11AH2gAyNDQ2OTUwMjg0OmFhNWY3MmI3ZDVmZWFjODhkYjU3MzQ4NjIyN2U5ZDhmZDRiN2Y0NWU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2416f3bce777a4b79a7e5e9816bf998dd1c601d3", "author": {"user": {"login": "eeatonaws", "name": "Erica Eaton"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/2416f3bce777a4b79a7e5e9816bf998dd1c601d3", "committedDate": "2020-06-24T18:41:41Z", "message": "created activity to display dev menu from context and updated package name"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0fbba26fe8dcf30cc52c61b0465f7450caa27181", "author": {"user": {"login": "eeatonaws", "name": "Erica Eaton"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/0fbba26fe8dcf30cc52c61b0465f7450caa27181", "committedDate": "2020-06-24T23:49:57Z", "message": "start the developer menu activity and display developer menu on bottom of screen"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fe55183e7c1e640cce2d383d7048a9664c0bc4a1", "author": {"user": {"login": "eeatonaws", "name": "Erica Eaton"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/fe55183e7c1e640cce2d383d7048a9664c0bc4a1", "committedDate": "2020-06-26T15:04:40Z", "message": "changed styling of dev menu to overlay current view"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d5d1d3706b4580ff63d8bb1248969a5196db7a38", "author": {"user": {"login": "eeatonaws", "name": "Erica Eaton"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/d5d1d3706b4580ff63d8bb1248969a5196db7a38", "committedDate": "2020-06-26T15:10:02Z", "message": "Merge branch 'main' into eeatonaws-dev-menu"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3782d18333b185ece108abda0004066a45b7d474", "author": {"user": {"login": "eeatonaws", "name": "Erica Eaton"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/3782d18333b185ece108abda0004066a45b7d474", "committedDate": "2020-06-29T20:33:08Z", "message": "updated copyright year"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c7835d544c14244e76378be421f6efed13cb881b", "author": {"user": {"login": "eeatonaws", "name": "Erica Eaton"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/c7835d544c14244e76378be421f6efed13cb881b", "committedDate": "2020-06-29T22:12:54Z", "message": "Merge branch 'main' into eeatonaws-dev-menu"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "52b2dbce3cb491ea6ee6823e7e8e5cea6d8855cd", "author": {"user": {"login": "eeatonaws", "name": "Erica Eaton"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/52b2dbce3cb491ea6ee6823e7e8e5cea6d8855cd", "committedDate": "2020-06-30T16:44:27Z", "message": "only display dev menu if in debug mode"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f08434b9b85c84306bfe396e190946d43998e126", "author": {"user": {"login": "eeatonaws", "name": "Erica Eaton"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/f08434b9b85c84306bfe396e190946d43998e126", "committedDate": "2020-06-30T16:52:01Z", "message": "Merge branch 'DevMenu' into eeatonaws-dev-menu and fix merge conflict."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "71a07d475dee8b572fd77c031805f1649475322c", "author": {"user": {"login": "eeatonaws", "name": "Erica Eaton"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/71a07d475dee8b572fd77c031805f1649475322c", "committedDate": "2020-07-01T21:22:18Z", "message": "activate dev menu on device shake or keyboard shortcut"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "36481de3107cc22c71b57c0257b33ac63cfd1dd9", "author": {"user": {"login": "eeatonaws", "name": "Erica Eaton"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/36481de3107cc22c71b57c0257b33ac63cfd1dd9", "committedDate": "2020-07-01T22:14:19Z", "message": "Merge branch 'main' into eeatonaws-dev-menu"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ae96c687d4c01486acf0047a5362d6384513d27f", "author": {"user": {"login": "eeatonaws", "name": "Erica Eaton"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/ae96c687d4c01486acf0047a5362d6384513d27f", "committedDate": "2020-07-02T18:31:13Z", "message": "adjusted shake threshold"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "59f95d076adafdd81a4e5db3428fc9de81962044", "author": {"user": {"login": "eeatonaws", "name": "Erica Eaton"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/59f95d076adafdd81a4e5db3428fc9de81962044", "committedDate": "2020-07-02T18:36:44Z", "message": "Merge branch 'DevMenu' into eeatonaws-dev-menu"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e860ea2b7300e055bca4f7f63c49c133d31734c6", "author": {"user": {"login": "eeatonaws", "name": "Erica Eaton"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/e860ea2b7300e055bca4f7f63c49c133d31734c6", "committedDate": "2020-07-06T14:34:22Z", "message": "reordered fields in DeveloperMenuActivity"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "79bead5640b823697e44c5b5480093dd1b98da10", "author": {"user": {"login": "eeatonaws", "name": "Erica Eaton"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/79bead5640b823697e44c5b5480093dd1b98da10", "committedDate": "2020-07-06T19:00:05Z", "message": "factor shake detection logic out into separate class"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "533629c1b58b9d257f4f293f2d88732992bf5bab", "author": {"user": {"login": "eeatonaws", "name": "Erica Eaton"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/533629c1b58b9d257f4f293f2d88732992bf5bab", "committedDate": "2020-07-06T21:10:07Z", "message": "added buttons to dev menu and did basic styling"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7790dbc1043732c7eb0060dbe125b5918b1292b5", "author": {"user": {"login": "eeatonaws", "name": "Erica Eaton"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/7790dbc1043732c7eb0060dbe125b5918b1292b5", "committedDate": "2020-07-06T21:11:44Z", "message": "Merge branch 'DevMenu' into eeatonaws-dev-menu"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0e2118fd60e69e4186e452562260c5c3144dcd19", "author": {"user": {"login": "eeatonaws", "name": "Erica Eaton"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/0e2118fd60e69e4186e452562260c5c3144dcd19", "committedDate": "2020-07-06T22:03:31Z", "message": "changed XML IDs from camel case to lower snake case"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "920324b5be73e2a56d2b251957b2b4bacf3d24a1", "author": {"user": {"login": "eeatonaws", "name": "Erica Eaton"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/920324b5be73e2a56d2b251957b2b4bacf3d24a1", "committedDate": "2020-07-07T15:16:16Z", "message": "move SensorManager out of activity and into ShakeDetector"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e731a750599d61ab034a124c9617ecfc77eaec85", "author": {"user": {"login": "eeatonaws", "name": "Erica Eaton"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/e731a750599d61ab034a124c9617ecfc77eaec85", "committedDate": "2020-07-07T21:16:26Z", "message": "wrote unit tests for ShakeDetector"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ba110f5ac1e338a6870eca7357f02c8434180657", "author": {"user": {"login": "eeatonaws", "name": "Erica Eaton"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/ba110f5ac1e338a6870eca7357f02c8434180657", "committedDate": "2020-07-07T21:17:11Z", "message": "Merge branch 'DevMenu' into eeatonaws-dev-menu"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "12cdbe20dcbdde774cee97e23c3c6d3a047e1b6b", "author": {"user": {"login": "eeatonaws", "name": "Erica Eaton"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/12cdbe20dcbdde774cee97e23c3c6d3a047e1b6b", "committedDate": "2020-07-07T21:33:03Z", "message": "fixed lint errors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "480c6423a454de4753eaed33aa3bda3842e96b12", "author": {"user": {"login": "eeatonaws", "name": "Erica Eaton"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/480c6423a454de4753eaed33aa3bda3842e96b12", "committedDate": "2020-07-07T21:41:24Z", "message": "changed name of constants and throw RuntimeException if creating a thread fails"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f5c54c4cdf160fb77083c1bf33db3af68715efa6", "author": {"user": {"login": "eeatonaws", "name": "Erica Eaton"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/f5c54c4cdf160fb77083c1bf33db3af68715efa6", "committedDate": "2020-07-09T15:21:28Z", "message": "added header and navigation to dev menu"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "790e41fc727682b77d23d2c0d5ef31cc2dfbbe98", "author": {"user": {"login": "eeatonaws", "name": "Erica Eaton"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/790e41fc727682b77d23d2c0d5ef31cc2dfbbe98", "committedDate": "2020-07-09T15:43:10Z", "message": "changed action bar title for each view"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aa2a7af11b06517e45e134b4d46a6c325580a9db", "author": {"user": {"login": "eeatonaws", "name": "Erica Eaton"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/aa2a7af11b06517e45e134b4d46a6c325580a9db", "committedDate": "2020-07-09T15:45:02Z", "message": "Merge branch 'DevMenu' into eeatonaws-dev-menu"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4c7dc2692a5772aa2261c05278a43979206c61b3", "author": {"user": {"login": "eeatonaws", "name": "Erica Eaton"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/4c7dc2692a5772aa2261c05278a43979206c61b3", "committedDate": "2020-07-09T15:46:15Z", "message": "Merge branch 'main' into eeatonaws-dev-menu"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "32018a05a2240ea1aa119552ef3c8459177d2acb", "author": {"user": {"login": "eeatonaws", "name": "Erica Eaton"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/32018a05a2240ea1aa119552ef3c8459177d2acb", "committedDate": "2020-07-09T16:58:01Z", "message": "Merge branch 'DevMenu' into eeatonaws-dev-menu"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ1ODgxMjA3", "url": "https://github.com/aws-amplify/amplify-android/pull/632#pullrequestreview-445881207", "createdAt": "2020-07-09T18:49:24Z", "commit": {"oid": "32018a05a2240ea1aa119552ef3c8459177d2acb"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxODo0OToyNFrOGvdm-g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMFQwMDowODo1N1rOGvlxsg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjQyMTM3MA==", "bodyText": "Hmm, it would be best not to manage navigation on our own like this.  It may work for this iteration of the dev menu, but will quickly become unmaintainable when we want to add new sub pages, more levels of navigation, etc.\nIt'd be best to use the Android system back stack, and then you don't need to override onBackPressed().   Using Fragments are probably the best option for this.  A Fragment is essentially a view plus lifecycle methods and the ability to be added to the system back stack.  Have you considered this approach?", "url": "https://github.com/aws-amplify/amplify-android/pull/632#discussion_r452421370", "createdAt": "2020-07-09T18:49:24Z", "author": {"login": "richardmcclellan"}, "path": "core/src/main/java/com/amplifyframework/core/DeveloperMenuActivity.java", "diffHunk": "@@ -63,6 +100,17 @@ public boolean onKeyUp(int keyCode, KeyEvent event) {\n         }\n     }\n \n+    @Override", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "32018a05a2240ea1aa119552ef3c8459177d2acb"}, "originalPosition": 65}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjU1MDY4Mw==", "bodyText": "Is it possible to use a Toolbar here instead of the RelativeLayout with your own back button and title?  If so, then the back button visibility and functionality would be handled automatically.", "url": "https://github.com/aws-amplify/amplify-android/pull/632#discussion_r452550683", "createdAt": "2020-07-09T23:51:58Z", "author": {"login": "richardmcclellan"}, "path": "core/src/main/res/layout/activity_dev_menu.xml", "diffHunk": "@@ -25,46 +25,101 @@\n         android:layout_height=\"wrap_content\"\n         android:background=\"@android:color/background_light\"\n         android:orientation=\"vertical\"\n-        android:layout_alignParentBottom=\"true\"\n-        android:padding=\"15dp\">\n+        android:layout_alignParentBottom=\"true\">\n \n-        <TextView\n-            android:id=\"@+id/title_text_view\"\n+        <RelativeLayout", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "32018a05a2240ea1aa119552ef3c8459177d2acb"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjU1MzI1Mg==", "bodyText": "Rather than having all of these subpages all in one big xml layout, it'd be better for each one of them to have their own xml layout, which is inflated by the fragment.  If the subpages are similar, you could just have a single xml file that works for all subpages, and then after it is inflated, programmatically set properties specific to that subpage, like the title.", "url": "https://github.com/aws-amplify/amplify-android/pull/632#discussion_r452553252", "createdAt": "2020-07-10T00:01:34Z", "author": {"login": "richardmcclellan"}, "path": "core/src/main/res/layout/activity_dev_menu.xml", "diffHunk": "@@ -25,46 +25,101 @@\n         android:layout_height=\"wrap_content\"\n         android:background=\"@android:color/background_light\"\n         android:orientation=\"vertical\"\n-        android:layout_alignParentBottom=\"true\"\n-        android:padding=\"15dp\">\n+        android:layout_alignParentBottom=\"true\">\n \n-        <TextView\n-            android:id=\"@+id/title_text_view\"\n+        <RelativeLayout\n+            android:id=\"@+id/action_bar\"\n+            android:layout_width=\"match_parent\"\n+            android:layout_height=\"?android:attr/actionBarSize\"\n+            android:theme=\"@android:style/Widget.DeviceDefault.ActionBar.Solid\"\n+            android:layout_marginBottom=\"15dp\">\n+\n+            <ImageButton\n+                android:id=\"@+id/back_button\"\n+                android:layout_width=\"wrap_content\"\n+                android:layout_height=\"wrap_content\"\n+                android:background=\"@drawable/ic_baseline_arrow_back_24\"\n+                android:layout_marginStart=\"20dp\"\n+                android:layout_marginLeft=\"20dp\"\n+                android:layout_centerVertical=\"true\"\n+                android:contentDescription=\"@string/back_button\"\n+                android:visibility=\"gone\" />\n+\n+            <TextView\n+                android:id=\"@+id/title_text_view\"\n+                android:layout_width=\"match_parent\"\n+                android:layout_height=\"wrap_content\"\n+                android:text=\"@string/menu_title\"\n+                android:textColor=\"@android:color/white\"\n+                android:gravity=\"center\"\n+                android:background=\"@android:color/transparent\"\n+                android:textSize=\"17sp\" />\n+        </RelativeLayout>\n+\n+        <LinearLayout\n+            android:id=\"@+id/buttons\"\n             android:layout_width=\"match_parent\"\n             android:layout_height=\"wrap_content\"\n-            android:text=\"@string/menu_title\"\n-            android:textColor=\"@android:color/black\"\n-            android:background=\"@android:color/darker_gray\"\n-            android:gravity=\"center\"\n-            android:padding=\"10dp\"\n-            android:layout_marginBottom=\"20dp\" />\n-\n-        <Button\n-            android:id=\"@+id/env\"\n+            android:orientation=\"vertical\"\n+            android:paddingLeft=\"15dp\"\n+            android:paddingRight=\"15dp\"\n+            android:paddingBottom=\"15dp\">\n+\n+            <Button\n+                android:id=\"@+id/env_button\"\n+                android:layout_width=\"match_parent\"\n+                android:layout_height=\"wrap_content\"\n+                android:text=\"@string/env_button_title\"\n+                android:textAllCaps=\"false\" />\n+\n+            <Button\n+                android:id=\"@+id/device_button\"\n+                android:layout_width=\"match_parent\"\n+                android:layout_height=\"wrap_content\"\n+                android:text=\"@string/device_button_title\"\n+                android:textAllCaps=\"false\" />\n+\n+            <Button\n+                android:id=\"@+id/logs_button\"\n+                android:layout_width=\"match_parent\"\n+                android:layout_height=\"wrap_content\"\n+                android:text=\"@string/logs_button_title\"\n+                android:textAllCaps=\"false\" />\n+\n+            <Button\n+                android:id=\"@+id/file_issue_button\"\n+                android:layout_width=\"match_parent\"\n+                android:layout_height=\"wrap_content\"\n+                android:text=\"@string/file_issue_button_title\"\n+                android:textAllCaps=\"false\" />\n+        </LinearLayout>\n+\n+        <LinearLayout", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "32018a05a2240ea1aa119552ef3c8459177d2acb"}, "originalPosition": 86}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjU1NTE4Ng==", "bodyText": "I think you can remove android:layout_marginLeft since you've defined android:layout_marginStart.  start is better, since it allows support for RTL languages.\nActually, I'd suggest replacing Left with Start and Right with End everywhere in this file.", "url": "https://github.com/aws-amplify/amplify-android/pull/632#discussion_r452555186", "createdAt": "2020-07-10T00:08:57Z", "author": {"login": "richardmcclellan"}, "path": "core/src/main/res/layout/activity_dev_menu.xml", "diffHunk": "@@ -25,46 +25,101 @@\n         android:layout_height=\"wrap_content\"\n         android:background=\"@android:color/background_light\"\n         android:orientation=\"vertical\"\n-        android:layout_alignParentBottom=\"true\"\n-        android:padding=\"15dp\">\n+        android:layout_alignParentBottom=\"true\">\n \n-        <TextView\n-            android:id=\"@+id/title_text_view\"\n+        <RelativeLayout\n+            android:id=\"@+id/action_bar\"\n+            android:layout_width=\"match_parent\"\n+            android:layout_height=\"?android:attr/actionBarSize\"\n+            android:theme=\"@android:style/Widget.DeviceDefault.ActionBar.Solid\"\n+            android:layout_marginBottom=\"15dp\">\n+\n+            <ImageButton\n+                android:id=\"@+id/back_button\"\n+                android:layout_width=\"wrap_content\"\n+                android:layout_height=\"wrap_content\"\n+                android:background=\"@drawable/ic_baseline_arrow_back_24\"\n+                android:layout_marginStart=\"20dp\"\n+                android:layout_marginLeft=\"20dp\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "32018a05a2240ea1aa119552ef3c8459177d2acb"}, "originalPosition": 23}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ2MTE2NjU0", "url": "https://github.com/aws-amplify/amplify-android/pull/632#pullrequestreview-446116654", "createdAt": "2020-07-10T04:38:14Z", "commit": {"oid": "32018a05a2240ea1aa119552ef3c8459177d2acb"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMFQwNDozODoxNFrOGvpmrA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMFQwNDo0NDo0NlrOGvprxA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjYxNzkwMA==", "bodyText": "These individual views have a parent view, right? Can you set it GONE and VISIBLE, instead of doing it on all of the individual children?", "url": "https://github.com/aws-amplify/amplify-android/pull/632#discussion_r452617900", "createdAt": "2020-07-10T04:38:14Z", "author": {"login": "jamesonwilliams"}, "path": "core/src/main/java/com/amplifyframework/core/DeveloperMenuActivity.java", "diffHunk": "@@ -74,4 +122,30 @@ private void changeVisibility() {\n             devMenuLayout.setVisibility(View.VISIBLE);\n         }\n     }\n+\n+    /**\n+     * Hides the main developer menu view, displays the given View, and\n+     * changes the title text on the action bar.\n+     * @param newView View to display.\n+     * @param titleTextId ID of the string resource for the action bar title text.\n+     */\n+    private void leaveMainView(View newView, int titleTextId) {\n+        buttons.setVisibility(View.GONE);\n+        newView.setVisibility(View.VISIBLE);\n+        backButton.setVisibility(View.VISIBLE);\n+        titleText.setText(titleTextId);\n+    }\n+\n+    /**\n+     * Hide the current view and display the main developer menu view.\n+     */\n+    private void displayMainView() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "32018a05a2240ea1aa119552ef3c8459177d2acb"}, "originalPosition": 100}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjYxODA2OQ==", "bodyText": "Fragments are one approach. You can also look at the (~new-ish) Navigation component in Jet Pack.", "url": "https://github.com/aws-amplify/amplify-android/pull/632#discussion_r452618069", "createdAt": "2020-07-10T04:39:16Z", "author": {"login": "jamesonwilliams"}, "path": "core/src/main/java/com/amplifyframework/core/DeveloperMenuActivity.java", "diffHunk": "@@ -63,6 +100,17 @@ public boolean onKeyUp(int keyCode, KeyEvent event) {\n         }\n     }\n \n+    @Override", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjQyMTM3MA=="}, "originalCommit": {"oid": "32018a05a2240ea1aa119552ef3c8459177d2acb"}, "originalPosition": 65}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjYxODMwNA==", "bodyText": "It's a subtle point here, but the Activity ought to be about visual display. So I would phrase this as \"display\" and \"hide\" the main view, instead of the navigation-sounding (control) names you're using.", "url": "https://github.com/aws-amplify/amplify-android/pull/632#discussion_r452618304", "createdAt": "2020-07-10T04:40:28Z", "author": {"login": "jamesonwilliams"}, "path": "core/src/main/java/com/amplifyframework/core/DeveloperMenuActivity.java", "diffHunk": "@@ -74,4 +122,30 @@ private void changeVisibility() {\n             devMenuLayout.setVisibility(View.VISIBLE);\n         }\n     }\n+\n+    /**\n+     * Hides the main developer menu view, displays the given View, and\n+     * changes the title text on the action bar.\n+     * @param newView View to display.\n+     * @param titleTextId ID of the string resource for the action bar title text.\n+     */\n+    private void leaveMainView(View newView, int titleTextId) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "32018a05a2240ea1aa119552ef3c8459177d2acb"}, "originalPosition": 90}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjYxOTIwNA==", "bodyText": "It's best to avoid nesting of layout elements like this (see discussion.)\nThree isn't the end of the world. But checkout the ConstraintLayout and see if you could fit all of your individual items in it?", "url": "https://github.com/aws-amplify/amplify-android/pull/632#discussion_r452619204", "createdAt": "2020-07-10T04:44:46Z", "author": {"login": "jamesonwilliams"}, "path": "core/src/main/res/layout/activity_dev_menu.xml", "diffHunk": "@@ -25,46 +25,101 @@\n         android:layout_height=\"wrap_content\"\n         android:background=\"@android:color/background_light\"\n         android:orientation=\"vertical\"\n-        android:layout_alignParentBottom=\"true\"\n-        android:padding=\"15dp\">\n+        android:layout_alignParentBottom=\"true\">\n \n-        <TextView\n-            android:id=\"@+id/title_text_view\"\n+        <RelativeLayout\n+            android:id=\"@+id/action_bar\"\n+            android:layout_width=\"match_parent\"\n+            android:layout_height=\"?android:attr/actionBarSize\"\n+            android:theme=\"@android:style/Widget.DeviceDefault.ActionBar.Solid\"\n+            android:layout_marginBottom=\"15dp\">\n+\n+            <ImageButton\n+                android:id=\"@+id/back_button\"\n+                android:layout_width=\"wrap_content\"\n+                android:layout_height=\"wrap_content\"\n+                android:background=\"@drawable/ic_baseline_arrow_back_24\"\n+                android:layout_marginStart=\"20dp\"\n+                android:layout_marginLeft=\"20dp\"\n+                android:layout_centerVertical=\"true\"\n+                android:contentDescription=\"@string/back_button\"\n+                android:visibility=\"gone\" />\n+\n+            <TextView\n+                android:id=\"@+id/title_text_view\"\n+                android:layout_width=\"match_parent\"\n+                android:layout_height=\"wrap_content\"\n+                android:text=\"@string/menu_title\"\n+                android:textColor=\"@android:color/white\"\n+                android:gravity=\"center\"\n+                android:background=\"@android:color/transparent\"\n+                android:textSize=\"17sp\" />\n+        </RelativeLayout>\n+\n+        <LinearLayout\n+            android:id=\"@+id/buttons\"\n             android:layout_width=\"match_parent\"\n             android:layout_height=\"wrap_content\"\n-            android:text=\"@string/menu_title\"\n-            android:textColor=\"@android:color/black\"\n-            android:background=\"@android:color/darker_gray\"\n-            android:gravity=\"center\"\n-            android:padding=\"10dp\"\n-            android:layout_marginBottom=\"20dp\" />\n-\n-        <Button\n-            android:id=\"@+id/env\"\n+            android:orientation=\"vertical\"\n+            android:paddingLeft=\"15dp\"\n+            android:paddingRight=\"15dp\"\n+            android:paddingBottom=\"15dp\">\n+\n+            <Button\n+                android:id=\"@+id/env_button\"\n+                android:layout_width=\"match_parent\"\n+                android:layout_height=\"wrap_content\"\n+                android:text=\"@string/env_button_title\"\n+                android:textAllCaps=\"false\" />\n+\n+            <Button\n+                android:id=\"@+id/device_button\"\n+                android:layout_width=\"match_parent\"\n+                android:layout_height=\"wrap_content\"\n+                android:text=\"@string/device_button_title\"\n+                android:textAllCaps=\"false\" />\n+\n+            <Button\n+                android:id=\"@+id/logs_button\"\n+                android:layout_width=\"match_parent\"\n+                android:layout_height=\"wrap_content\"\n+                android:text=\"@string/logs_button_title\"\n+                android:textAllCaps=\"false\" />\n+\n+            <Button\n+                android:id=\"@+id/file_issue_button\"\n+                android:layout_width=\"match_parent\"\n+                android:layout_height=\"wrap_content\"\n+                android:text=\"@string/file_issue_button_title\"\n+                android:textAllCaps=\"false\" />\n+        </LinearLayout>\n+\n+        <LinearLayout\n+            android:id=\"@+id/env_layout\"\n             android:layout_width=\"match_parent\"\n             android:layout_height=\"wrap_content\"\n-            android:text=\"@string/env_button_title\"\n-            android:textAllCaps=\"false\" />\n+            android:orientation=\"vertical\"\n+            android:visibility=\"gone\" />\n \n-        <Button\n-            android:id=\"@+id/device\"\n+        <LinearLayout\n+            android:id=\"@+id/device_layout\"\n             android:layout_width=\"match_parent\"\n             android:layout_height=\"wrap_content\"\n-            android:text=\"@string/device_button_title\"\n-            android:textAllCaps=\"false\" />\n+            android:orientation=\"vertical\"\n+            android:visibility=\"gone\" />\n \n-        <Button\n-            android:id=\"@+id/logs\"\n+        <LinearLayout\n+            android:id=\"@+id/logs_layout\"\n             android:layout_width=\"match_parent\"\n             android:layout_height=\"wrap_content\"\n-            android:text=\"@string/logs_button_title\"\n-            android:textAllCaps=\"false\" />\n+            android:orientation=\"vertical\"\n+            android:visibility=\"gone\" />\n \n-        <Button\n-            android:id=\"@+id/file_issue\"\n+        <LinearLayout", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "32018a05a2240ea1aa119552ef3c8459177d2acb"}, "originalPosition": 119}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5325c28d39c81a5b489305b7b89bc00bbb72b14c", "author": {"user": {"login": "eeatonaws", "name": "Erica Eaton"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/5325c28d39c81a5b489305b7b89bc00bbb72b14c", "committedDate": "2020-07-10T22:50:45Z", "message": "use navigation and toolbar instead of nested layouts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3ee50053fd65a748fa63c35c416f7f1fd24bbb9b", "author": {"user": {"login": "eeatonaws", "name": "Erica Eaton"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/3ee50053fd65a748fa63c35c416f7f1fd24bbb9b", "committedDate": "2020-07-10T22:51:38Z", "message": "removed back arrow icon resource"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1730149e962c29552d116d1c6035a7dc23766e7a", "author": {"user": {"login": "eeatonaws", "name": "Erica Eaton"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/1730149e962c29552d116d1c6035a7dc23766e7a", "committedDate": "2020-07-10T22:54:44Z", "message": "move start of license comment to new line"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "46f119b17124e2013f07a46bb9b26c36ab247a1e", "author": {"user": {"login": "eeatonaws", "name": "Erica Eaton"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/46f119b17124e2013f07a46bb9b26c36ab247a1e", "committedDate": "2020-07-13T14:01:30Z", "message": "add copyright statement"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ2NzgxMzg1", "url": "https://github.com/aws-amplify/amplify-android/pull/632#pullrequestreview-446781385", "createdAt": "2020-07-11T06:00:50Z", "commit": {"oid": "1730149e962c29552d116d1c6035a7dc23766e7a"}, "state": "COMMENTED", "comments": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMVQwNjowMDo1MFrOGwKv6Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QxNzo1OToyNlrOGwzmgg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzE2MDkzNw==", "bodyText": "When adding dependencies, define each one in the project level build.gradle.  Then you can reference it core/build.gradle.  This makes it easier for us to periodically pull in latest versions of each dependency, since they all the version numbers are defined in one place.  It also ensures all of our modules are using the same version of any given dependency.", "url": "https://github.com/aws-amplify/amplify-android/pull/632#discussion_r453160937", "createdAt": "2020-07-11T06:00:50Z", "author": {"login": "richardmcclellan"}, "path": "core/build.gradle", "diffHunk": "@@ -18,8 +18,16 @@ apply from: rootProject.file(\"configuration/checkstyle.gradle\")\n apply from: rootProject.file(\"configuration/publishing.gradle\")\n \n dependencies {\n+    def nav_version = \"2.3.0\"\n+\n     implementation dependency.androidx.v4support\n     implementation dependency.androidx.annotation\n+    implementation \"androidx.navigation:navigation-fragment:$nav_version\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1730149e962c29552d116d1c6035a7dc23766e7a"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzE2MDk4NA==", "bodyText": "Maybe name this DevMenuDeviceFragment, since it's a Fragment now, not a View?  And same for all the other classes like this as well.", "url": "https://github.com/aws-amplify/amplify-android/pull/632#discussion_r453160984", "createdAt": "2020-07-11T06:01:40Z", "author": {"login": "richardmcclellan"}, "path": "core/src/main/java/com/amplifyframework/core/DevMenuDeviceView.java", "diffHunk": "@@ -0,0 +1,41 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package com.amplifyframework.core;\n+\n+import android.os.Bundle;\n+import android.view.LayoutInflater;\n+import android.view.View;\n+import android.view.ViewGroup;\n+import androidx.fragment.app.Fragment;\n+\n+/**\n+ * A {@link Fragment} subclass representing the view\n+ * to display the device information on the developer menu.\n+ */\n+public final class DevMenuDeviceView extends Fragment {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1730149e962c29552d116d1c6035a7dc23766e7a"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzE2MTU5OA==", "bodyText": "I think androidx.appcompat.widget.Toolbar already has a TextView in it, so you shouldn't need to add this one.  You can set the title in the layout xml with the app:title property, or programmatically with the setTitle(int res) method.", "url": "https://github.com/aws-amplify/amplify-android/pull/632#discussion_r453161598", "createdAt": "2020-07-11T06:10:03Z", "author": {"login": "richardmcclellan"}, "path": "core/src/main/res/layout/activity_dev_menu.xml", "diffHunk": "@@ -25,46 +27,40 @@\n         android:layout_height=\"wrap_content\"\n         android:background=\"@android:color/background_light\"\n         android:orientation=\"vertical\"\n-        android:layout_alignParentBottom=\"true\"\n-        android:padding=\"15dp\">\n+        android:layout_alignParentBottom=\"true\">\n \n-        <TextView\n-            android:id=\"@+id/title_text_view\"\n+        <androidx.appcompat.widget.Toolbar\n+            android:id=\"@+id/toolbar\"\n             android:layout_width=\"match_parent\"\n-            android:layout_height=\"wrap_content\"\n-            android:text=\"@string/menu_title\"\n-            android:textColor=\"@android:color/black\"\n-            android:background=\"@android:color/darker_gray\"\n-            android:gravity=\"center\"\n-            android:padding=\"10dp\"\n-            android:layout_marginBottom=\"20dp\" />\n+            android:layout_height=\"?android:attr/actionBarSize\"\n+            android:minHeight=\"?android:attr/actionBarSize\"\n+            android:layout_marginBottom=\"15dp\"\n+            android:theme=\"@android:style/Widget.DeviceDefault.ActionBar.Solid\"\n+            android:paddingStart=\"20dp\"\n+            android:paddingLeft=\"20dp\"\n+            android:paddingRight=\"0dp\"\n+            android:paddingEnd=\"0dp\">\n \n-        <Button\n-            android:id=\"@+id/env\"\n-            android:layout_width=\"match_parent\"\n-            android:layout_height=\"wrap_content\"\n-            android:text=\"@string/env_button_title\"\n-            android:textAllCaps=\"false\" />\n-\n-        <Button\n-            android:id=\"@+id/device\"\n-            android:layout_width=\"match_parent\"\n-            android:layout_height=\"wrap_content\"\n-            android:text=\"@string/device_button_title\"\n-            android:textAllCaps=\"false\" />\n-\n-        <Button\n-            android:id=\"@+id/logs\"\n-            android:layout_width=\"match_parent\"\n-            android:layout_height=\"wrap_content\"\n-            android:text=\"@string/logs_button_title\"\n-            android:textAllCaps=\"false\" />\n+            <TextView", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1730149e962c29552d116d1c6035a7dc23766e7a"}, "originalPosition": 58}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzgwNjQwMw==", "bodyText": "This is minor, but maybe name this main_fragment since it is not an android.view.View?  This suggestion applies to all other fragment identifiers as well in this file.", "url": "https://github.com/aws-amplify/amplify-android/pull/632#discussion_r453806403", "createdAt": "2020-07-13T17:19:15Z", "author": {"login": "richardmcclellan"}, "path": "core/src/main/res/navigation/dev_menu_nav_graph.xml", "diffHunk": "@@ -0,0 +1,72 @@\n+<?xml version=\"1.0\" encoding=\"utf-8\"?>\n+<!--\n+   Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+\n+   Licensed under the Apache License, Version 2.0 (the \"License\").\n+   You may not use this file except in compliance with the License.\n+   A copy of the License is located at\n+\n+    http://aws.amazon.com/apache2.0\n+\n+   or in the \"license\" file accompanying this file. This file is distributed\n+   on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+   express or implied. See the License for the specific language governing\n+   permissions and limitations under the License.\n+-->\n+\n+<navigation xmlns:android=\"http://schemas.android.com/apk/res/android\"\n+    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n+    xmlns:tools=\"http://schemas.android.com/tools\"\n+    android:id=\"@+id/dev_menu_nav_graph\"\n+    app:startDestination=\"@id/main_view\">\n+\n+    <fragment\n+        android:id=\"@+id/main_view\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "46f119b17124e2013f07a46bb9b26c36ab247a1e"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzgwODcwMg==", "bodyText": "I've actually never used JetPack Navigation before, but it looks very nice.  Question though - do you need to reference the layout here, as well as in the DevMenuDeviceView::onCreateView method?  Seems like you should only need one or the other?", "url": "https://github.com/aws-amplify/amplify-android/pull/632#discussion_r453808702", "createdAt": "2020-07-13T17:22:52Z", "author": {"login": "richardmcclellan"}, "path": "core/src/main/res/navigation/dev_menu_nav_graph.xml", "diffHunk": "@@ -0,0 +1,72 @@\n+<?xml version=\"1.0\" encoding=\"utf-8\"?>\n+<!--\n+   Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+\n+   Licensed under the Apache License, Version 2.0 (the \"License\").\n+   You may not use this file except in compliance with the License.\n+   A copy of the License is located at\n+\n+    http://aws.amazon.com/apache2.0\n+\n+   or in the \"license\" file accompanying this file. This file is distributed\n+   on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+   express or implied. See the License for the specific language governing\n+   permissions and limitations under the License.\n+-->\n+\n+<navigation xmlns:android=\"http://schemas.android.com/apk/res/android\"\n+    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n+    xmlns:tools=\"http://schemas.android.com/tools\"\n+    android:id=\"@+id/dev_menu_nav_graph\"\n+    app:startDestination=\"@id/main_view\">\n+\n+    <fragment\n+        android:id=\"@+id/main_view\"\n+        android:name=\"com.amplifyframework.core.DevMenuMainView\"\n+        tools:layout=\"@layout/fragment_main_view\" >\n+        <action\n+            android:id=\"@+id/show_file_issue_view\"\n+            app:destination=\"@id/file_issue_view\" />\n+        <action\n+            android:id=\"@+id/show_env_info_view\"\n+            app:destination=\"@id/environment_view\" />\n+        <action\n+            android:id=\"@+id/show_device_info_view\"\n+            app:destination=\"@id/device_view\" />\n+        <action\n+            android:id=\"@+id/show_logs_view\"\n+            app:destination=\"@id/logs_view\" />\n+    </fragment>\n+    <fragment\n+        android:id=\"@+id/environment_view\"\n+        android:name=\"com.amplifyframework.core.DevMenuEnvironmentView\"\n+        tools:layout=\"@layout/fragment_environment_view\" >\n+        <action\n+            android:id=\"@+id/env_view_to_main_view\"\n+            app:destination=\"@id/main_view\" />\n+    </fragment>\n+    <fragment\n+        android:id=\"@+id/device_view\"\n+        android:name=\"com.amplifyframework.core.DevMenuDeviceView\"\n+        tools:layout=\"@layout/fragment_device_view\" >", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "46f119b17124e2013f07a46bb9b26c36ab247a1e"}, "originalPosition": 51}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzgxMjI4NA==", "bodyText": "Is it still necessary to override onBackPressed?  When a user taps back while on the main menu, we probably want to finish() the DeveloperMenuActivity so it is removed from memory, rather than just setting visibility to View.GONE.  I'm thinking this will probably just happen automatically if you don't override onBackPressed.", "url": "https://github.com/aws-amplify/amplify-android/pull/632#discussion_r453812284", "createdAt": "2020-07-13T17:28:50Z", "author": {"login": "richardmcclellan"}, "path": "core/src/main/java/com/amplifyframework/core/DeveloperMenuActivity.java", "diffHunk": "@@ -63,6 +74,16 @@ public boolean onKeyUp(int keyCode, KeyEvent event) {\n         }\n     }\n \n+    @Override\n+    public void onBackPressed() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "46f119b17124e2013f07a46bb9b26c36ab247a1e"}, "originalPosition": 46}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzgxMzY5Mg==", "bodyText": "Setting textColor, textSize, and padding can probably be removed if you just use the built in title (app:title)", "url": "https://github.com/aws-amplify/amplify-android/pull/632#discussion_r453813692", "createdAt": "2020-07-13T17:31:09Z", "author": {"login": "richardmcclellan"}, "path": "core/src/main/res/layout/activity_dev_menu.xml", "diffHunk": "@@ -25,46 +27,40 @@\n         android:layout_height=\"wrap_content\"\n         android:background=\"@android:color/background_light\"\n         android:orientation=\"vertical\"\n-        android:layout_alignParentBottom=\"true\"\n-        android:padding=\"15dp\">\n+        android:layout_alignParentBottom=\"true\">\n \n-        <TextView\n-            android:id=\"@+id/title_text_view\"\n+        <androidx.appcompat.widget.Toolbar\n+            android:id=\"@+id/toolbar\"\n             android:layout_width=\"match_parent\"\n-            android:layout_height=\"wrap_content\"\n-            android:text=\"@string/menu_title\"\n-            android:textColor=\"@android:color/black\"\n-            android:background=\"@android:color/darker_gray\"\n-            android:gravity=\"center\"\n-            android:padding=\"10dp\"\n-            android:layout_marginBottom=\"20dp\" />\n+            android:layout_height=\"?android:attr/actionBarSize\"\n+            android:minHeight=\"?android:attr/actionBarSize\"\n+            android:layout_marginBottom=\"15dp\"\n+            android:theme=\"@android:style/Widget.DeviceDefault.ActionBar.Solid\"\n+            android:paddingStart=\"20dp\"\n+            android:paddingLeft=\"20dp\"\n+            android:paddingRight=\"0dp\"\n+            android:paddingEnd=\"0dp\">\n \n-        <Button\n-            android:id=\"@+id/env\"\n-            android:layout_width=\"match_parent\"\n-            android:layout_height=\"wrap_content\"\n-            android:text=\"@string/env_button_title\"\n-            android:textAllCaps=\"false\" />\n-\n-        <Button\n-            android:id=\"@+id/device\"\n-            android:layout_width=\"match_parent\"\n-            android:layout_height=\"wrap_content\"\n-            android:text=\"@string/device_button_title\"\n-            android:textAllCaps=\"false\" />\n-\n-        <Button\n-            android:id=\"@+id/logs\"\n-            android:layout_width=\"match_parent\"\n-            android:layout_height=\"wrap_content\"\n-            android:text=\"@string/logs_button_title\"\n-            android:textAllCaps=\"false\" />\n+            <TextView\n+                android:id=\"@+id/toolbar_title\"\n+                android:layout_width=\"wrap_content\"\n+                android:layout_height=\"wrap_content\"\n+                android:layout_gravity=\"center\"\n+                android:textColor=\"@android:color/white\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "46f119b17124e2013f07a46bb9b26c36ab247a1e"}, "originalPosition": 63}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzgxNzY1Ng==", "bodyText": "Maybe just call this method navigate?  It is hiding the main view, but that's not all - it is also taking the user to the new view.", "url": "https://github.com/aws-amplify/amplify-android/pull/632#discussion_r453817656", "createdAt": "2020-07-13T17:37:59Z", "author": {"login": "richardmcclellan"}, "path": "core/src/main/java/com/amplifyframework/core/DevMenuMainView.java", "diffHunk": "@@ -0,0 +1,72 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package com.amplifyframework.core;\n+\n+import android.os.Bundle;\n+import android.view.LayoutInflater;\n+import android.view.View;\n+import android.view.ViewGroup;\n+import android.widget.TextView;\n+import androidx.fragment.app.Fragment;\n+import androidx.navigation.Navigation;\n+\n+/**\n+ * A {@link Fragment} subclass representing the main view for\n+ * the developer menu.\n+ */\n+public final class DevMenuMainView extends Fragment {\n+    // Text displayed in the action bar.\n+    private TextView titleText;\n+\n+    /**\n+     * Required empty public constructor.\n+     */\n+    public DevMenuMainView() { }\n+\n+    @Override\n+    public View onCreateView(LayoutInflater inflater, ViewGroup container,\n+                             Bundle savedInstanceState) {\n+        // Inflate the layout for this fragment\n+        View mainView = inflater.inflate(R.layout.fragment_main_view, container, false);\n+\n+        titleText = getActivity().findViewById(R.id.toolbar_title);\n+        titleText.setText(R.string.menu_title);\n+\n+        // Set on-click listeners for each button on the main view of the developer menu.\n+        mainView.findViewById(R.id.env_button).setOnClickListener(view -> hideMainView(view,\n+                R.id.show_env_info_view, R.string.env_view_title));\n+        mainView.findViewById(R.id.device_button).setOnClickListener(view -> hideMainView(view,\n+                R.id.show_device_info_view, R.string.device_view_title));\n+        mainView.findViewById(R.id.logs_button).setOnClickListener(view -> hideMainView(view,\n+                R.id.show_logs_view, R.string.logs_view_title));\n+        mainView.findViewById(R.id.file_issue_button).setOnClickListener(view -> hideMainView(view,\n+                R.id.show_file_issue_view, R.string.file_issue_view_title));\n+\n+        return mainView;\n+    }\n+\n+    /**\n+     * Hides the main developer menu view, displays the view with the given\n+     * ID, and changes the title text on the action bar.\n+     * @param view View to navigate away from.\n+     * @param newViewId ID of the new view to display.\n+     * @param titleTextId ID of the string resource for the action bar title text.\n+     */\n+    private void hideMainView(View view, int newViewId, int titleTextId) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "46f119b17124e2013f07a46bb9b26c36ab247a1e"}, "originalPosition": 68}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzgyMTQwMQ==", "bodyText": "Is it necessary to define an <action> like this for each back navigation?  I would imagine these can be removed, since back navigation should be handled automatically by the back stack.", "url": "https://github.com/aws-amplify/amplify-android/pull/632#discussion_r453821401", "createdAt": "2020-07-13T17:44:33Z", "author": {"login": "richardmcclellan"}, "path": "core/src/main/res/navigation/dev_menu_nav_graph.xml", "diffHunk": "@@ -0,0 +1,72 @@\n+<?xml version=\"1.0\" encoding=\"utf-8\"?>\n+<!--\n+   Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+\n+   Licensed under the Apache License, Version 2.0 (the \"License\").\n+   You may not use this file except in compliance with the License.\n+   A copy of the License is located at\n+\n+    http://aws.amazon.com/apache2.0\n+\n+   or in the \"license\" file accompanying this file. This file is distributed\n+   on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+   express or implied. See the License for the specific language governing\n+   permissions and limitations under the License.\n+-->\n+\n+<navigation xmlns:android=\"http://schemas.android.com/apk/res/android\"\n+    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n+    xmlns:tools=\"http://schemas.android.com/tools\"\n+    android:id=\"@+id/dev_menu_nav_graph\"\n+    app:startDestination=\"@id/main_view\">\n+\n+    <fragment\n+        android:id=\"@+id/main_view\"\n+        android:name=\"com.amplifyframework.core.DevMenuMainView\"\n+        tools:layout=\"@layout/fragment_main_view\" >\n+        <action\n+            android:id=\"@+id/show_file_issue_view\"\n+            app:destination=\"@id/file_issue_view\" />\n+        <action\n+            android:id=\"@+id/show_env_info_view\"\n+            app:destination=\"@id/environment_view\" />\n+        <action\n+            android:id=\"@+id/show_device_info_view\"\n+            app:destination=\"@id/device_view\" />\n+        <action\n+            android:id=\"@+id/show_logs_view\"\n+            app:destination=\"@id/logs_view\" />\n+    </fragment>\n+    <fragment\n+        android:id=\"@+id/environment_view\"\n+        android:name=\"com.amplifyframework.core.DevMenuEnvironmentView\"\n+        tools:layout=\"@layout/fragment_environment_view\" >\n+        <action\n+            android:id=\"@+id/env_view_to_main_view\"\n+            app:destination=\"@id/main_view\" />\n+    </fragment>\n+    <fragment\n+        android:id=\"@+id/device_view\"\n+        android:name=\"com.amplifyframework.core.DevMenuDeviceView\"\n+        tools:layout=\"@layout/fragment_device_view\" >\n+        <action\n+            android:id=\"@+id/device_view_to_main_view\"\n+            app:destination=\"@id/main_view\" />\n+    </fragment>\n+    <fragment\n+        android:id=\"@+id/logs_view\"\n+        android:name=\"com.amplifyframework.core.DevMenuLogsView\"\n+        tools:layout=\"@layout/fragment_logs_view\" >\n+        <action\n+            android:id=\"@+id/logs_view_to_main_view\"\n+            app:destination=\"@id/main_view\" />\n+    </fragment>\n+    <fragment\n+        android:id=\"@+id/file_issue_view\"\n+        android:name=\"com.amplifyframework.core.DevMenuFileIssueView\"\n+        tools:layout=\"@layout/fragment_file_issue_view\" >\n+        <action", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "46f119b17124e2013f07a46bb9b26c36ab247a1e"}, "originalPosition": 68}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzgzMDI3NA==", "bodyText": "Instead of setting the title text here, it would probably be cleaner to do the following:\n\nIn the dev_menu_nav_graph.xml, set the label attribute on each <fragment> to the string resource id for the title.\nThen, according to the setupActionBarWithNavController documentation, the title will automatically be updated when you navigate between fragments.", "url": "https://github.com/aws-amplify/amplify-android/pull/632#discussion_r453830274", "createdAt": "2020-07-13T17:59:26Z", "author": {"login": "richardmcclellan"}, "path": "core/src/main/java/com/amplifyframework/core/DevMenuMainView.java", "diffHunk": "@@ -0,0 +1,72 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package com.amplifyframework.core;\n+\n+import android.os.Bundle;\n+import android.view.LayoutInflater;\n+import android.view.View;\n+import android.view.ViewGroup;\n+import android.widget.TextView;\n+import androidx.fragment.app.Fragment;\n+import androidx.navigation.Navigation;\n+\n+/**\n+ * A {@link Fragment} subclass representing the main view for\n+ * the developer menu.\n+ */\n+public final class DevMenuMainView extends Fragment {\n+    // Text displayed in the action bar.\n+    private TextView titleText;\n+\n+    /**\n+     * Required empty public constructor.\n+     */\n+    public DevMenuMainView() { }\n+\n+    @Override\n+    public View onCreateView(LayoutInflater inflater, ViewGroup container,\n+                             Bundle savedInstanceState) {\n+        // Inflate the layout for this fragment\n+        View mainView = inflater.inflate(R.layout.fragment_main_view, container, false);\n+\n+        titleText = getActivity().findViewById(R.id.toolbar_title);\n+        titleText.setText(R.string.menu_title);\n+\n+        // Set on-click listeners for each button on the main view of the developer menu.\n+        mainView.findViewById(R.id.env_button).setOnClickListener(view -> hideMainView(view,\n+                R.id.show_env_info_view, R.string.env_view_title));\n+        mainView.findViewById(R.id.device_button).setOnClickListener(view -> hideMainView(view,\n+                R.id.show_device_info_view, R.string.device_view_title));\n+        mainView.findViewById(R.id.logs_button).setOnClickListener(view -> hideMainView(view,\n+                R.id.show_logs_view, R.string.logs_view_title));\n+        mainView.findViewById(R.id.file_issue_button).setOnClickListener(view -> hideMainView(view,\n+                R.id.show_file_issue_view, R.string.file_issue_view_title));\n+\n+        return mainView;\n+    }\n+\n+    /**\n+     * Hides the main developer menu view, displays the view with the given\n+     * ID, and changes the title text on the action bar.\n+     * @param view View to navigate away from.\n+     * @param newViewId ID of the new view to display.\n+     * @param titleTextId ID of the string resource for the action bar title text.\n+     */\n+    private void hideMainView(View view, int newViewId, int titleTextId) {\n+        Navigation.findNavController(view).navigate(newViewId);\n+        titleText.setText(titleTextId);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "46f119b17124e2013f07a46bb9b26c36ab247a1e"}, "originalPosition": 70}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "780940bb283e19425374466bb9b76e52f939b3e0", "author": {"user": {"login": "eeatonaws", "name": "Erica Eaton"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/780940bb283e19425374466bb9b76e52f939b3e0", "committedDate": "2020-07-13T19:11:58Z", "message": "moved dependencies to project build.gradle and renamed files from view to fragment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0bb534db5498503a9763bf7029aec6d323a8a655", "author": {"user": {"login": "eeatonaws", "name": "Erica Eaton"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/0bb534db5498503a9763bf7029aec6d323a8a655", "committedDate": "2020-07-13T19:23:39Z", "message": "changed nav graph action names and removed unneeded actions"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ3NTUyMzc2", "url": "https://github.com/aws-amplify/amplify-android/pull/632#pullrequestreview-447552376", "createdAt": "2020-07-13T19:50:41Z", "commit": {"oid": "780940bb283e19425374466bb9b76e52f939b3e0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QxOTo1MDo0MVrOGw3asA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QxOTo1MDo0MVrOGw3asA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mzg5Mjc4NA==", "bodyText": "For no particular reason, none of the variables in this file have underscores, but to be consistent, I'd just call this navigationversion.  Also, it's probably best to move it right below awsSdkVersion, so that it's with the other dependencies.  These values here at the top (minSdkVersion, targetSdkVersion, etc), aren't related to dependencies.", "url": "https://github.com/aws-amplify/amplify-android/pull/632#discussion_r453892784", "createdAt": "2020-07-13T19:50:41Z", "author": {"login": "richardmcclellan"}, "path": "build.gradle", "diffHunk": "@@ -45,6 +45,7 @@ ext {\n     buildToolsVersion = \"29.0.2\"\n     compileSdkVersion = 29\n     minSdkVersion = 16\n+    nav_version = \"2.3.0\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "780940bb283e19425374466bb9b76e52f939b3e0"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ3NTgxNDEx", "url": "https://github.com/aws-amplify/amplify-android/pull/632#pullrequestreview-447581411", "createdAt": "2020-07-13T20:34:48Z", "commit": {"oid": "780940bb283e19425374466bb9b76e52f939b3e0"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QyMDozNDo0OFrOGw41hQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QyMDozNToxMFrOGw42aA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzkxNjAzNw==", "bodyText": "How about:\nnav: [\n    fragment: \"...\",\n    fragmentktx: \"...\",\n    ui: \"...\",\n    uiktx: \"...\",\n    dynamicfeatures: \"...\"\n]\n\nWhen you can then reference as androidx.nav.ui, etc.", "url": "https://github.com/aws-amplify/amplify-android/pull/632#discussion_r453916037", "createdAt": "2020-07-13T20:34:48Z", "author": {"login": "jamesonwilliams"}, "path": "build.gradle", "diffHunk": "@@ -57,6 +58,11 @@ ext {\n             annotation: 'androidx.annotation:annotation:1.1.0',\n             appcompat: 'androidx.appcompat:appcompat:1.1.0',\n             core: 'androidx.core:core:1.3.0',\n+            navfragment: \"androidx.navigation:navigation-fragment:$nav_version\",\n+            navfragmentktx: \"androidx.navigation:navigation-fragment-ktx:$nav_version\",\n+            navui: \"androidx.navigation:navigation-ui:$nav_version\",\n+            navuiktx: \"androidx.navigation:navigation-fragment-ktx:$nav_version\",\n+            navfeatfragment: \"androidx.navigation:navigation-dynamic-features-fragment:$nav_version\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "780940bb283e19425374466bb9b76e52f939b3e0"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzkxNjI2NA==", "bodyText": "This is included twice, once as navfragmentktx, and once as  navuiktx.", "url": "https://github.com/aws-amplify/amplify-android/pull/632#discussion_r453916264", "createdAt": "2020-07-13T20:35:10Z", "author": {"login": "jamesonwilliams"}, "path": "build.gradle", "diffHunk": "@@ -57,6 +58,11 @@ ext {\n             annotation: 'androidx.annotation:annotation:1.1.0',\n             appcompat: 'androidx.appcompat:appcompat:1.1.0',\n             core: 'androidx.core:core:1.3.0',\n+            navfragment: \"androidx.navigation:navigation-fragment:$nav_version\",\n+            navfragmentktx: \"androidx.navigation:navigation-fragment-ktx:$nav_version\",\n+            navui: \"androidx.navigation:navigation-ui:$nav_version\",\n+            navuiktx: \"androidx.navigation:navigation-fragment-ktx:$nav_version\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "780940bb283e19425374466bb9b76e52f939b3e0"}, "originalPosition": 15}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f27808542f5e805e5dd81f854750f98409f296a9", "author": {"user": {"login": "eeatonaws", "name": "Erica Eaton"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/f27808542f5e805e5dd81f854750f98409f296a9", "committedDate": "2020-07-13T20:49:20Z", "message": "remove centered title and reformat navigation dependencies"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ3NjE0OTk4", "url": "https://github.com/aws-amplify/amplify-android/pull/632#pullrequestreview-447614998", "createdAt": "2020-07-13T21:28:50Z", "commit": {"oid": "f27808542f5e805e5dd81f854750f98409f296a9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QyMToyODo1MFrOGw6jZg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QyMToyODo1MFrOGw6jZg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mzk0NDE2Ng==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                navigationversion = \"2.3.0\"\n          \n          \n            \n                navigationversion = '2.3.0'\n          \n      \n    \n    \n  \n\nSingle quotes, not double.", "url": "https://github.com/aws-amplify/amplify-android/pull/632#discussion_r453944166", "createdAt": "2020-07-13T21:28:50Z", "author": {"login": "richardmcclellan"}, "path": "build.gradle", "diffHunk": "@@ -45,10 +45,10 @@ ext {\n     buildToolsVersion = \"29.0.2\"\n     compileSdkVersion = 29\n     minSdkVersion = 16\n-    nav_version = \"2.3.0\"\n     targetSdkVersion = 29\n \n     awsSdkVersion = '2.16.12'\n+    navigationversion = \"2.3.0\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f27808542f5e805e5dd81f854750f98409f296a9"}, "originalPosition": 8}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ3NjE1MzI1", "url": "https://github.com/aws-amplify/amplify-android/pull/632#pullrequestreview-447615325", "createdAt": "2020-07-13T21:29:22Z", "commit": {"oid": "f27808542f5e805e5dd81f854750f98409f296a9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QyMToyOToyMlrOGw6kaA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QyMToyOToyMlrOGw6kaA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mzk0NDQyNA==", "bodyText": "Single quotes for all of these as well, not double quotes.", "url": "https://github.com/aws-amplify/amplify-android/pull/632#discussion_r453944424", "createdAt": "2020-07-13T21:29:22Z", "author": {"login": "richardmcclellan"}, "path": "build.gradle", "diffHunk": "@@ -58,11 +58,13 @@ ext {\n             annotation: 'androidx.annotation:annotation:1.1.0',\n             appcompat: 'androidx.appcompat:appcompat:1.1.0',\n             core: 'androidx.core:core:1.3.0',\n-            navfragment: \"androidx.navigation:navigation-fragment:$nav_version\",\n-            navfragmentktx: \"androidx.navigation:navigation-fragment-ktx:$nav_version\",\n-            navui: \"androidx.navigation:navigation-ui:$nav_version\",\n-            navuiktx: \"androidx.navigation:navigation-fragment-ktx:$nav_version\",\n-            navfeatfragment: \"androidx.navigation:navigation-dynamic-features-fragment:$nav_version\",\n+            nav: [\n+                    fragment: \"androidx.navigation:navigation-fragment:$navigationversion\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f27808542f5e805e5dd81f854750f98409f296a9"}, "originalPosition": 22}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "731e61ac53fabc8c25de305a4c4cd8b28257c8d6", "author": {"user": {"login": "eeatonaws", "name": "Erica Eaton"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/731e61ac53fabc8c25de305a4c4cd8b28257c8d6", "committedDate": "2020-07-13T21:39:06Z", "message": "changed double quotes for navigationversion to single quotes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ3Njg0NzA0", "url": "https://github.com/aws-amplify/amplify-android/pull/632#pullrequestreview-447684704", "createdAt": "2020-07-13T23:34:35Z", "commit": {"oid": "f27808542f5e805e5dd81f854750f98409f296a9"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QyMzozNDozNVrOGw-Y5Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QyMzozNTowMFrOGw-Z1Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDAwNzAxMw==", "bodyText": "minor: +4 spaces is the current indentation level in this file -- can you update before inclusion?", "url": "https://github.com/aws-amplify/amplify-android/pull/632#discussion_r454007013", "createdAt": "2020-07-13T23:34:35Z", "author": {"login": "jamesonwilliams"}, "path": "build.gradle", "diffHunk": "@@ -58,11 +58,13 @@ ext {\n             annotation: 'androidx.annotation:annotation:1.1.0',\n             appcompat: 'androidx.appcompat:appcompat:1.1.0',\n             core: 'androidx.core:core:1.3.0',\n-            navfragment: \"androidx.navigation:navigation-fragment:$nav_version\",\n-            navfragmentktx: \"androidx.navigation:navigation-fragment-ktx:$nav_version\",\n-            navui: \"androidx.navigation:navigation-ui:$nav_version\",\n-            navuiktx: \"androidx.navigation:navigation-fragment-ktx:$nav_version\",\n-            navfeatfragment: \"androidx.navigation:navigation-dynamic-features-fragment:$nav_version\",\n+            nav: [\n+                    fragment: \"androidx.navigation:navigation-fragment:$navigationversion\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f27808542f5e805e5dd81f854750f98409f296a9"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDAwNzI1Mw==", "bodyText": "uppercase V, no? navigationVersion?", "url": "https://github.com/aws-amplify/amplify-android/pull/632#discussion_r454007253", "createdAt": "2020-07-13T23:35:00Z", "author": {"login": "jamesonwilliams"}, "path": "build.gradle", "diffHunk": "@@ -45,10 +45,10 @@ ext {\n     buildToolsVersion = \"29.0.2\"\n     compileSdkVersion = 29\n     minSdkVersion = 16\n-    nav_version = \"2.3.0\"\n     targetSdkVersion = 29\n \n     awsSdkVersion = '2.16.12'\n+    navigationversion = \"2.3.0\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f27808542f5e805e5dd81f854750f98409f296a9"}, "originalPosition": 8}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "75893291140af7a4deb83409f3925dfa94df8039", "author": {"user": {"login": "eeatonaws", "name": "Erica Eaton"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/75893291140af7a4deb83409f3925dfa94df8039", "committedDate": "2020-07-14T14:17:07Z", "message": "changed navigation dependency spacing and version name"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a8a3893c4557541453de1cfe356ad906e6d58134", "author": {"user": {"login": "eeatonaws", "name": "Erica Eaton"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/a8a3893c4557541453de1cfe356ad906e6d58134", "committedDate": "2020-07-14T15:42:24Z", "message": "start and stop dev menu activity on device shake"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ4MzExODQ4", "url": "https://github.com/aws-amplify/amplify-android/pull/632#pullrequestreview-448311848", "createdAt": "2020-07-14T17:23:16Z", "commit": {"oid": "a8a3893c4557541453de1cfe356ad906e6d58134"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQxNzoyMzoxNlrOGxdo9Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQxODowMToxNlrOGxfF5g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDUxOTAyOQ==", "bodyText": "Hmm, instead of shaking to dismiss, could the user just tap the Back button to dismiss?   I imagine this would be a more intuitive UX, and the code would be simpler (no ShakeDetector stuff inside DeveloperMenuActivity).", "url": "https://github.com/aws-amplify/amplify-android/pull/632#discussion_r454519029", "createdAt": "2020-07-14T17:23:16Z", "author": {"login": "richardmcclellan"}, "path": "core/src/main/java/com/amplifyframework/core/DeveloperMenuActivity.java", "diffHunk": "@@ -29,27 +27,34 @@\n  * This is the activity to display the developer menu.\n  */\n public final class DeveloperMenuActivity extends FragmentActivity {\n+\n+    // Indicates whether this activity has started.\n+    private static boolean activityStarted;\n     // Parent layout for the developer menu.\n     private View devMenuLayout;\n     // Detect and handle shake events.\n     private ShakeDetector detector;\n-    // Manages app navigation.\n-    private NavController navController;\n \n     @Override\n     protected void onCreate(Bundle savedInstanceState) {\n         super.onCreate(savedInstanceState);\n         setContentView(R.layout.activity_dev_menu);\n         devMenuLayout = findViewById(R.id.dev_layout);\n         devMenuLayout.setFocusable(true);\n-        devMenuLayout.setVisibility(View.GONE);\n-        detector = new ShakeDetector(getApplicationContext(), this::changeVisibility);\n+        detector = new ShakeDetector(getApplicationContext(), this::finish);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a8a3893c4557541453de1cfe356ad906e6d58134"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDU0MjgyMg==", "bodyText": "Maintaining state in a static variable should generally be avoided because it can be accessed/modified from anywhere, and thus can lead to bugs and code that's hard to maintain.  Looks like you are referencing this in Amplify.configure to see whether DeveloperMenuActivity should be started.  Instead, I'd suggest this:\n\nWhen a shake is detected, stop listening for shakes, and then start DeveloperMenuActivity using the startActivityForResult() method (https://developer.android.com/training/basics/intents/result).\nThen, implement onActivityResult() to know when DeveloperMenuActivity is finished.  When it is finished, start listening for shakes again.", "url": "https://github.com/aws-amplify/amplify-android/pull/632#discussion_r454542822", "createdAt": "2020-07-14T18:01:16Z", "author": {"login": "richardmcclellan"}, "path": "core/src/main/java/com/amplifyframework/core/DeveloperMenuActivity.java", "diffHunk": "@@ -29,27 +27,34 @@\n  * This is the activity to display the developer menu.\n  */\n public final class DeveloperMenuActivity extends FragmentActivity {\n+\n+    // Indicates whether this activity has started.\n+    private static boolean activityStarted;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a8a3893c4557541453de1cfe356ad906e6d58134"}, "originalPosition": 18}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ4MzY1NzQ5", "url": "https://github.com/aws-amplify/amplify-android/pull/632#pullrequestreview-448365749", "createdAt": "2020-07-14T18:37:02Z", "commit": {"oid": "a8a3893c4557541453de1cfe356ad906e6d58134"}, "state": "APPROVED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQxODozNzowMlrOGxgXmA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQxODo0MzoxMlrOGxglPw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDU2MzczNg==", "bodyText": "In the interest of keeping the configure(...) method as lean as possible, can we state this block as:\nif (isDebuggableApplication()) {\n    enableDeveloperMenu();\n}\n\nAnd then put the details into helpers?", "url": "https://github.com/aws-amplify/amplify-android/pull/632#discussion_r454563736", "createdAt": "2020-07-14T18:37:02Z", "author": {"login": "jamesonwilliams"}, "path": "core/src/main/java/com/amplifyframework/core/Amplify.java", "diffHunk": "@@ -137,11 +137,16 @@ public static void configure(@NonNull final AmplifyConfiguration configuration,\n                 }\n             }\n             if ((context.getApplicationInfo().flags & ApplicationInfo.FLAG_DEBUGGABLE) != 0) {\n-                // Start activity for developer menu\n+                // Start activity for developer menu on device shake\n                 Intent mainIntent = new Intent(context, DeveloperMenuActivity.class);\n                 mainIntent.setAction(Intent.ACTION_MAIN);\n                 mainIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);\n-                context.startActivity(mainIntent);\n+                ShakeDetector shakeDetector = new ShakeDetector(context, () -> {\n+                    if (!DeveloperMenuActivity.isActivityStarted()) {\n+                        context.startActivity(mainIntent);\n+                    }\n+                });\n+                shakeDetector.startDetecting();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a8a3893c4557541453de1cfe356ad906e6d58134"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDU2NTEzMg==", "bodyText": "This template is repeated a few times.\nCan you make just one of these fragments, and give it a constructor which accepts:\npublic final class DevMenuLogsFragement extends Fragment {\n    @IdRes private final int layoutResourceId;\n\n    public DevMenuLogsFragment(@IdRes int layoutResourceId) {\n        this.layoutResourceId = layoutResourceId;\n    }\n    ...\n}\n\nUpdate: oh, duh. Nope. Your comment says the no-args constructor is required. Nevermind!", "url": "https://github.com/aws-amplify/amplify-android/pull/632#discussion_r454565132", "createdAt": "2020-07-14T18:39:34Z", "author": {"login": "jamesonwilliams"}, "path": "core/src/main/java/com/amplifyframework/core/DevMenuLogsFragment.java", "diffHunk": "@@ -0,0 +1,41 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package com.amplifyframework.core;\n+\n+import android.os.Bundle;\n+import android.view.LayoutInflater;\n+import android.view.View;\n+import android.view.ViewGroup;\n+import androidx.fragment.app.Fragment;\n+\n+/**\n+ * A {@link Fragment} subclass representing the view\n+ * to display the logs on the developer menu.\n+ */\n+public final class DevMenuLogsFragment extends Fragment {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a8a3893c4557541453de1cfe356ad906e6d58134"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDU2NzIzMQ==", "bodyText": "Hm, you now have two instances of the ShakeDetector, one in Amplify, and one in this Activity. Ideally, you could have one detector that broadcast to multiple listeners. Instead of the simple callback mechanism we are using right now, you could use Amplify.Hub instead. Then, just listen for a hub event in both locations -- from one detector instance.", "url": "https://github.com/aws-amplify/amplify-android/pull/632#discussion_r454567231", "createdAt": "2020-07-14T18:43:12Z", "author": {"login": "jamesonwilliams"}, "path": "core/src/main/java/com/amplifyframework/core/DeveloperMenuActivity.java", "diffHunk": "@@ -15,16 +15,22 @@\n \n package com.amplifyframework.core;\n \n-import android.app.Activity;\n import android.os.Bundle;\n-import android.view.KeyEvent;\n import android.view.View;\n+import androidx.fragment.app.FragmentActivity;\n+import androidx.navigation.NavController;\n+import androidx.navigation.Navigation;\n+import androidx.navigation.ui.AppBarConfiguration;\n+import androidx.navigation.ui.NavigationUI;\n \n /**\n  * This is the activity to display the developer menu.\n  */\n-public final class DeveloperMenuActivity extends Activity {\n-    // The parent layout for the developer menu.\n+public final class DeveloperMenuActivity extends FragmentActivity {\n+\n+    // Indicates whether this activity has started.\n+    private static boolean activityStarted;\n+    // Parent layout for the developer menu.\n     private View devMenuLayout;\n     // Detect and handle shake events.\n     private ShakeDetector detector;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a8a3893c4557541453de1cfe356ad906e6d58134"}, "originalPosition": 26}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d8cce289d0c89e38e340c4173a014f2653d2b03f", "author": {"user": {"login": "eeatonaws", "name": "Erica Eaton"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/d8cce289d0c89e38e340c4173a014f2653d2b03f", "committedDate": "2020-07-14T21:35:41Z", "message": "start and stop shake listener instead of having activityStarted field"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ4NDg4MTcy", "url": "https://github.com/aws-amplify/amplify-android/pull/632#pullrequestreview-448488172", "createdAt": "2020-07-14T21:43:40Z", "commit": {"oid": "d8cce289d0c89e38e340c4173a014f2653d2b03f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQyMTo0Mzo0MFrOGxmc-A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQyMTo0Mzo0MFrOGxmc-A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDY2MzQxNg==", "bodyText": "Just an idea -- feel free to ignore --\nInstead of using the boolean, you could encode this behavior in your callback:\nfinal class ShakeDetector {\n    private final ShakeDetector.Listener listener;\n\n    ShakeDetector(ShakeDetector.Listener listener) {\n        this.listener = listener;\n    }\n\n    // Change this\n    @FunctionalInterface\n    interface Listener {\n        void onShakeDetected(ShakeDetector source);\n    }\n}\nThen you'll have an instance to call stopDetecting() on, in your lambda:\nShakeDetector detector = new ShakeDetector(context, it -> {\n    context.startActivity(mainIntent);\n    it.stopDetecting();\n});\nWithout changing the listener, you could already do:\nfinal AtomicReference<ShakeDetector.Listener> listener = new AtomicReference<>();\nShakeDetector detector = new ShakeDetector(context, () -> {\n    context.startActivity(mainIntent);\n    listener.get().stopDetecting();\n});\n^ This would give you a final reference inside of your lambda. The AtomicReference thing is sort of a kludge that I try to avoid if I can, though.", "url": "https://github.com/aws-amplify/amplify-android/pull/632#discussion_r454663416", "createdAt": "2020-07-14T21:43:40Z", "author": {"login": "jamesonwilliams"}, "path": "core/src/main/java/com/amplifyframework/core/Amplify.java", "diffHunk": "@@ -179,6 +170,20 @@ private static void beginInitialization(@NonNull Category<? extends Plugin<?>> c\n         updatePluginRegistry(plugin, RegistryUpdateType.REMOVE);\n     }\n \n+    /**\n+     * Starts listening for a shake event and shows the developer menu on device shake.\n+     * @param context an Android Context\n+     */\n+    public static void enableDeveloperMenu(Context context) {\n+        // Start activity for developer menu on device shake\n+        Intent mainIntent = new Intent(context, DeveloperMenuActivity.class);\n+        mainIntent.setAction(Intent.ACTION_MAIN);\n+        mainIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);\n+        ShakeDetector shakeDetector = new ShakeDetector(context, () -> context.startActivity(mainIntent),\n+                true);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d8cce289d0c89e38e340c4173a014f2653d2b03f"}, "originalPosition": 34}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c85e091168cd6c399bfeb3e02fd00854a0a71626", "author": {"user": {"login": "eeatonaws", "name": "Erica Eaton"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/c85e091168cd6c399bfeb3e02fd00854a0a71626", "committedDate": "2020-07-14T22:24:52Z", "message": "make ShakeDetector.Listener a FunctionalInterface and remove ShakeDetector boolean field"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "84b7ed8ccac1ea95339bcf2f1a894c26b52e0462", "author": {"user": {"login": "eeatonaws", "name": "Erica Eaton"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/84b7ed8ccac1ea95339bcf2f1a894c26b52e0462", "committedDate": "2020-07-15T15:44:12Z", "message": "created dev menu manager to handle showing and hiding dev menu"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ5MjE4Mjk5", "url": "https://github.com/aws-amplify/amplify-android/pull/632#pullrequestreview-449218299", "createdAt": "2020-07-15T18:21:12Z", "commit": {"oid": "84b7ed8ccac1ea95339bcf2f1a894c26b52e0462"}, "state": "APPROVED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxODoyMToxMlrOGyKXsQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxODoyODoxOVrOGyKqHA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTI1MTg4OQ==", "bodyText": "The name setVisibility makes me think this method would take a Visibility enum parameter, (GONE, INVISIBLE, VISIBLE).\nMaybe setVisible?", "url": "https://github.com/aws-amplify/amplify-android/pull/632#discussion_r455251889", "createdAt": "2020-07-15T18:21:12Z", "author": {"login": "richardmcclellan"}, "path": "core/src/main/java/com/amplifyframework/core/DeveloperMenuManager.java", "diffHunk": "@@ -0,0 +1,100 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package com.amplifyframework.core;\n+\n+import android.content.Context;\n+import android.content.Intent;\n+\n+/**\n+ * Manage the display and shake detection behavior for the\n+ * developer menu.\n+ */\n+public final class DeveloperMenuManager implements ShakeDetector.Listener {\n+    // An instance of DeveloperMenuManager.\n+    private static DeveloperMenuManager sInstance = new DeveloperMenuManager();\n+    // Indicates whether the developer menu is visible.\n+    private boolean visible;\n+    // Listens for shake events.\n+    private ShakeDetector shakeDetector;\n+    // Action to take when the developer menu should be hidden.\n+    private HideAction hideAction;\n+\n+    /**\n+     * Constructs a new DeveloperMenuManager.\n+     */\n+    private DeveloperMenuManager() { }\n+\n+    /**\n+     * Returns an instance of DeveloperMenuManager.\n+     * @return a DeveloperMenuManager\n+     */\n+    public static DeveloperMenuManager sharedInstance() {\n+        return sInstance;\n+    }\n+\n+    /**\n+     * Start listening for a shake event.\n+     * @param context an Android Context\n+     */\n+    public void startListening(Context context) {\n+        shakeDetector = new ShakeDetector(context, this);\n+        shakeDetector.startDetecting();\n+    }\n+\n+    @Override\n+    public void onShakeDetected() {\n+        if (visible) {\n+            if (hideAction != null) {\n+                hideAction.hideDeveloperMenu();\n+            }\n+            visible = false;\n+        } else {\n+            Context context = shakeDetector.getContext();\n+            Intent mainIntent = new Intent(context, DeveloperMenuActivity.class);\n+            mainIntent.setAction(Intent.ACTION_MAIN);\n+            mainIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);\n+            context.startActivity(mainIntent);\n+            visible = true;\n+        }\n+    }\n+\n+    /**\n+     * Set the visibility of the developer menu.\n+     * @param visible boolean indicating whether the developer menu is visible.\n+     */\n+    public void setVisibility(boolean visible) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "84b7ed8ccac1ea95339bcf2f1a894c26b52e0462"}, "originalPosition": 78}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTI1NTI2Nw==", "bodyText": "It'd be better to lazily initialize this in sharedInstance() like this:\npublic static DeveloperMenuManager sharedInstance() {\n    if(sInstance == null) {\n        sInstance = new DeveloperMenuManager();\n    }\n    return sInstance;\n}", "url": "https://github.com/aws-amplify/amplify-android/pull/632#discussion_r455255267", "createdAt": "2020-07-15T18:25:55Z", "author": {"login": "richardmcclellan"}, "path": "core/src/main/java/com/amplifyframework/core/DeveloperMenuManager.java", "diffHunk": "@@ -0,0 +1,100 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package com.amplifyframework.core;\n+\n+import android.content.Context;\n+import android.content.Intent;\n+\n+/**\n+ * Manage the display and shake detection behavior for the\n+ * developer menu.\n+ */\n+public final class DeveloperMenuManager implements ShakeDetector.Listener {\n+    // An instance of DeveloperMenuManager.\n+    private static DeveloperMenuManager sInstance = new DeveloperMenuManager();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "84b7ed8ccac1ea95339bcf2f1a894c26b52e0462"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTI1NjYwNA==", "bodyText": "It'd probably be better for DeveloperMenuManager to just keep its own Context property, which gets set in startListening().  It isn't really the job of shakeDetector to be providing Context to others.", "url": "https://github.com/aws-amplify/amplify-android/pull/632#discussion_r455256604", "createdAt": "2020-07-15T18:28:19Z", "author": {"login": "richardmcclellan"}, "path": "core/src/main/java/com/amplifyframework/core/DeveloperMenuManager.java", "diffHunk": "@@ -0,0 +1,100 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package com.amplifyframework.core;\n+\n+import android.content.Context;\n+import android.content.Intent;\n+\n+/**\n+ * Manage the display and shake detection behavior for the\n+ * developer menu.\n+ */\n+public final class DeveloperMenuManager implements ShakeDetector.Listener {\n+    // An instance of DeveloperMenuManager.\n+    private static DeveloperMenuManager sInstance = new DeveloperMenuManager();\n+    // Indicates whether the developer menu is visible.\n+    private boolean visible;\n+    // Listens for shake events.\n+    private ShakeDetector shakeDetector;\n+    // Action to take when the developer menu should be hidden.\n+    private HideAction hideAction;\n+\n+    /**\n+     * Constructs a new DeveloperMenuManager.\n+     */\n+    private DeveloperMenuManager() { }\n+\n+    /**\n+     * Returns an instance of DeveloperMenuManager.\n+     * @return a DeveloperMenuManager\n+     */\n+    public static DeveloperMenuManager sharedInstance() {\n+        return sInstance;\n+    }\n+\n+    /**\n+     * Start listening for a shake event.\n+     * @param context an Android Context\n+     */\n+    public void startListening(Context context) {\n+        shakeDetector = new ShakeDetector(context, this);\n+        shakeDetector.startDetecting();\n+    }\n+\n+    @Override\n+    public void onShakeDetected() {\n+        if (visible) {\n+            if (hideAction != null) {\n+                hideAction.hideDeveloperMenu();\n+            }\n+            visible = false;\n+        } else {\n+            Context context = shakeDetector.getContext();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "84b7ed8ccac1ea95339bcf2f1a894c26b52e0462"}, "originalPosition": 65}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "05ba5b230af901b31fe5b6d09dc6f43d231af55b", "author": {"user": {"login": "eeatonaws", "name": "Erica Eaton"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/05ba5b230af901b31fe5b6d09dc6f43d231af55b", "committedDate": "2020-07-15T18:45:34Z", "message": "rename setVisibility method and do lazy initialization of DeveloperMenuManager instance"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aa5f72b7d5feac88db573486227e9d8fd4b7f45e", "author": {"user": {"login": "eeatonaws", "name": "Erica Eaton"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/aa5f72b7d5feac88db573486227e9d8fd4b7f45e", "committedDate": "2020-07-15T19:10:42Z", "message": "create context field in DeveloperMenuManager"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1855, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}