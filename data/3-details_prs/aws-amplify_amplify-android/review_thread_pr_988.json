{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI2MzE3ODkz", "number": 988, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQxNzo0MDowNVrOE82X2A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQxNzo0MDowNVrOE82X2A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMyMjQwODU2OnYy", "diffSide": "RIGHT", "path": "aws-datastore/src/main/java/com/amplifyframework/datastore/appsync/AppSyncRequestFactory.java", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQxNzo0MDowNVrOH5OAOQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQxODo1ODoyN1rOH5Q9ZQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTc2MDMxMw==", "bodyText": "What's the reasoning for moving this out of ModelSchema?    And why is the implementation of this method not identical to the similar method created in AppSyncGraphQLRequestFactory?\nUltimately, I think AppSyncRequestFactory (used for DataStore) and AppSyncGraphQLRequestFactory (used for API) should be combined, or at least have a common superclass maybe.", "url": "https://github.com/aws-amplify/amplify-android/pull/988#discussion_r529760313", "createdAt": "2020-11-24T17:40:05Z", "author": {"login": "richardmcclellan"}, "path": "aws-datastore/src/main/java/com/amplifyframework/datastore/appsync/AppSyncRequestFactory.java", "diffHunk": "@@ -315,4 +302,81 @@ private static Object appSyncOpValue(QueryOperator<?> qOp) throws DataStoreExcep\n                     amplifyException, \"Validate your model file.\");\n         }\n     }\n+\n+    private static Map<String, Object> getMapOfFieldNameAndValues(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4d1e13c271dbe598d6251eed74f83df114eeb4b4"}, "originalPosition": 103}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTc3MTgwNQ==", "bodyText": "Maybe have some of the common functionality could go in the aws-api-appsync package since it's used by both api and datastore?", "url": "https://github.com/aws-amplify/amplify-android/pull/988#discussion_r529771805", "createdAt": "2020-11-24T17:58:16Z", "author": {"login": "rjuliano"}, "path": "aws-datastore/src/main/java/com/amplifyframework/datastore/appsync/AppSyncRequestFactory.java", "diffHunk": "@@ -315,4 +302,81 @@ private static Object appSyncOpValue(QueryOperator<?> qOp) throws DataStoreExcep\n                     amplifyException, \"Validate your model file.\");\n         }\n     }\n+\n+    private static Map<String, Object> getMapOfFieldNameAndValues(", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTc2MDMxMw=="}, "originalCommit": {"oid": "4d1e13c271dbe598d6251eed74f83df114eeb4b4"}, "originalPosition": 103}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTgwMDkzNg==", "bodyText": "That doesn't have to be in this PR if you wanted to split it out.  But, go for it if you want!\nI was more interested in the reasoning for moving this method out of ModelSchema?", "url": "https://github.com/aws-amplify/amplify-android/pull/988#discussion_r529800936", "createdAt": "2020-11-24T18:45:10Z", "author": {"login": "richardmcclellan"}, "path": "aws-datastore/src/main/java/com/amplifyframework/datastore/appsync/AppSyncRequestFactory.java", "diffHunk": "@@ -315,4 +302,81 @@ private static Object appSyncOpValue(QueryOperator<?> qOp) throws DataStoreExcep\n                     amplifyException, \"Validate your model file.\");\n         }\n     }\n+\n+    private static Map<String, Object> getMapOfFieldNameAndValues(", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTc2MDMxMw=="}, "originalCommit": {"oid": "4d1e13c271dbe598d6251eed74f83df114eeb4b4"}, "originalPosition": 103}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTgwODc0MQ==", "bodyText": "The two request factories have little differences laced throughout - the response type, whether to include _version, the request options object, etc. \u2026 \ud83d\ude22\nLong term, I would like to see all of the AppSync-specific stuff go into aws-api-appsync; I still think that's a good direction.\nI had moved the request formation logic out of the ModelSchema since ModelSchema lives in core. I didn\u2019t want core doesn\u2019t know about SerializedModels. This getMapOfFieldNameAndValues(...) method really is about forming an outbound request, I think, not something having to do with the schema in-and-of-itself.", "url": "https://github.com/aws-amplify/amplify-android/pull/988#discussion_r529808741", "createdAt": "2020-11-24T18:58:27Z", "author": {"login": "jamesonwilliams"}, "path": "aws-datastore/src/main/java/com/amplifyframework/datastore/appsync/AppSyncRequestFactory.java", "diffHunk": "@@ -315,4 +302,81 @@ private static Object appSyncOpValue(QueryOperator<?> qOp) throws DataStoreExcep\n                     amplifyException, \"Validate your model file.\");\n         }\n     }\n+\n+    private static Map<String, Object> getMapOfFieldNameAndValues(", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTc2MDMxMw=="}, "originalCommit": {"oid": "4d1e13c271dbe598d6251eed74f83df114eeb4b4"}, "originalPosition": 103}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 813, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}