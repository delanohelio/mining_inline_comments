{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk0Mzg0NTc4", "number": 867, "title": "chore(api) remove JAVA_DATE since codegen does not generate java.lang.Date", "bodyText": "Follow up to #839.\n\nRemoves unused code in JavaFieldType and TypeConverter\nUpdates related tests so that our test models use Temporal.Date instead of java.lang.Date, since that is what codegen uses.\n\nBy submitting this pull request, I confirm that my contribution is made under the terms of the Apache 2.0 license.", "createdAt": "2020-09-28T20:31:01Z", "url": "https://github.com/aws-amplify/amplify-android/pull/867", "merged": true, "mergeCommit": {"oid": "6699348354feda0c9749b3c0155a51626ce6defd"}, "closed": true, "closedAt": "2020-10-02T18:49:31Z", "author": {"login": "richardmcclellan"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdNZSYIgH2gAyNDk0Mzg0NTc4OmU5OTc5MzNlNTQ1MGJiOWM2ZjdiYTQ5OTdlNTkyMDI2YTFlNjI1YzU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdOqkmhAFqTUwMTM3MDE0Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e997933e5450bb9c6f7ba4997e592026a1e625c5", "author": {"user": {"login": "richardmcclellan", "name": "Richard McClellan"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/e997933e5450bb9c6f7ba4997e592026a1e625c5", "committedDate": "2020-09-28T20:05:57Z", "message": "chore(api) remove JAVA_DATE since this is not a type that codegen will ever translate"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk3ODc2MzAx", "url": "https://github.com/aws-amplify/amplify-android/pull/867#pullrequestreview-497876301", "createdAt": "2020-09-28T20:36:03Z", "commit": {"oid": "e997933e5450bb9c6f7ba4997e592026a1e625c5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQyMDozNjowM1rOHZOrJQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQyMDozNjowM1rOHZOrJQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjIxNjg2OQ==", "bodyText": "This is a bit of a hack because I cannot reference Temporal.Date.class from here, since it is in the aws-api-appsync module, which I can't reference from core, so I have to get it using reflection.   A better solution for another day could be to move ModelSchema (and other related Model classes) from core to aws-api-appsync.\nPreviously, this test was only passing by coincidence - it was comparing java.lang.Date.class.getSimpleName() with the Temporal.Date.class.getSimpleName(), and it passed since they are equal.  Now that we are comparing the actual class, this test started failing (as it should), so this needs to be updated to actually reference the correct Class.", "url": "https://github.com/aws-amplify/amplify-android/pull/867#discussion_r496216869", "createdAt": "2020-09-28T20:36:03Z", "author": {"login": "richardmcclellan"}, "path": "core/src/test/java/com/amplifyframework/core/model/ModelSchemaTest.java", "diffHunk": "@@ -70,7 +70,7 @@ public void modelSchemaIsGeneratedForPersonModel() throws AmplifyException {\n         expectedFields.put(\"dob\", ModelField.builder()\n             .targetType(\"AWSDate\")\n             .name(\"dob\")\n-            .type(Date.class)\n+            .type(Class.forName(\"com.amplifyframework.core.model.temporal.Temporal$Date\"))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e997933e5450bb9c6f7ba4997e592026a1e625c5"}, "originalPosition": 25}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk3OTU3NzQ2", "url": "https://github.com/aws-amplify/amplify-android/pull/867#pullrequestreview-497957746", "createdAt": "2020-09-28T23:07:47Z", "commit": {"oid": "e997933e5450bb9c6f7ba4997e592026a1e625c5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQyMzowNzo0OFrOHZSweA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQyMzowNzo0OFrOHZSweA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjI4Mzc2OA==", "bodyText": "aws-api-appsync module, which I can't reference from core\n\nCertainly not from src code. But what about as a testImplementation?\nYou could also access it through the testutils module, perhaps -- an additional level of indirection?", "url": "https://github.com/aws-amplify/amplify-android/pull/867#discussion_r496283768", "createdAt": "2020-09-28T23:07:48Z", "author": {"login": "jamesonwilliams"}, "path": "core/src/test/java/com/amplifyframework/core/model/ModelSchemaTest.java", "diffHunk": "@@ -70,7 +70,7 @@ public void modelSchemaIsGeneratedForPersonModel() throws AmplifyException {\n         expectedFields.put(\"dob\", ModelField.builder()\n             .targetType(\"AWSDate\")\n             .name(\"dob\")\n-            .type(Date.class)\n+            .type(Class.forName(\"com.amplifyframework.core.model.temporal.Temporal$Date\"))", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjIxNjg2OQ=="}, "originalCommit": {"oid": "e997933e5450bb9c6f7ba4997e592026a1e625c5"}, "originalPosition": 25}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2ddb854b1f228aac7507af4f307825ee3b80b986", "author": {"user": {"login": "richardmcclellan", "name": "Richard McClellan"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/2ddb854b1f228aac7507af4f307825ee3b80b986", "committedDate": "2020-10-02T16:07:58Z", "message": "Avoid reflection by adding testImplementation dependency on aws-api-appsync"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "42e8b380ec35e0dcd0ad87c01a8e60e20012ae9e", "author": {"user": {"login": "richardmcclellan", "name": "Richard McClellan"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/42e8b380ec35e0dcd0ad87c01a8e60e20012ae9e", "committedDate": "2020-10-02T17:59:08Z", "message": "Merge branch 'main' into rm/remove-java-date"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAxMzM4MDIz", "url": "https://github.com/aws-amplify/amplify-android/pull/867#pullrequestreview-501338023", "createdAt": "2020-10-02T17:58:39Z", "commit": {"oid": "2ddb854b1f228aac7507af4f307825ee3b80b986"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQxNzo1ODozOVrOHb2n-g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQxNzo1ODozOVrOHb2n-g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODk2ODU3MA==", "bodyText": "The ClassNotFoundException has gone away now, too.", "url": "https://github.com/aws-amplify/amplify-android/pull/867#discussion_r498968570", "createdAt": "2020-10-02T17:58:39Z", "author": {"login": "jamesonwilliams"}, "path": "core/src/test/java/com/amplifyframework/core/model/ModelSchemaTest.java", "diffHunk": "@@ -45,9 +45,10 @@\n      * The factory {@link ModelSchema#fromModelClass(Class)} will produce\n      * an {@link ModelSchema} that meets our expectations for the {@link Person} model.\n      * @throws AmplifyException from model schema parsing\n+     * @throws ClassNotFoundException from Class.forName(\"com.amplifyframework.core.model.temporal.Temporal$Date\")\n      */\n     @Test\n-    public void modelSchemaIsGeneratedForPersonModel() throws AmplifyException {\n+    public void modelSchemaIsGeneratedForPersonModel() throws AmplifyException, ClassNotFoundException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2ddb854b1f228aac7507af4f307825ee3b80b986"}, "originalPosition": 24}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0b40fcbc03ec8d8df55af3e12fef4d0cc5932c93", "author": {"user": {"login": "richardmcclellan", "name": "Richard McClellan"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/0b40fcbc03ec8d8df55af3e12fef4d0cc5932c93", "committedDate": "2020-10-02T18:00:58Z", "message": "Remove ClassNotFoundException"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAxMzcwMTQy", "url": "https://github.com/aws-amplify/amplify-android/pull/867#pullrequestreview-501370142", "createdAt": "2020-10-02T18:48:10Z", "commit": {"oid": "0b40fcbc03ec8d8df55af3e12fef4d0cc5932c93"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1717, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}