{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU2NTI2Njk3", "number": 670, "reviewThreads": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNVQwNTo1Njo0OFrOESBdwA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQwNTowOToxM1rOEaTr-g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg3MzMzODI0OnYy", "diffSide": "LEFT", "path": "aws-datastore/src/main/java/com/amplifyframework/datastore/appsync/ModelMetadata.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNVQwNTo1Njo0OFrOG3Cwag==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQxODowOTo1NVrOG8U92Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDM3MDAyNg==", "bodyText": "Will this require the SQL table to be reprovisioned?", "url": "https://github.com/aws-amplify/amplify-android/pull/670#discussion_r460370026", "createdAt": "2020-07-25T05:56:48Z", "author": {"login": "jamesonwilliams"}, "path": "aws-datastore/src/main/java/com/amplifyframework/datastore/appsync/ModelMetadata.java", "diffHunk": "@@ -37,7 +38,7 @@\n     private final @ModelField(targetType = \"ID\", isRequired = true) String id;\n     private final @ModelField(targetType = \"Boolean\") Boolean _deleted;\n     private final @ModelField(targetType = \"Int\") Integer _version;\n-    private final @ModelField(targetType = \"AWSTimestamp\") Long _lastChangedAt;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "388d767fca15a1aeaa3593034185e2e7f0878d09"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTIzNDM5MA==", "bodyText": "^If so, will this be considered a breaking change?", "url": "https://github.com/aws-amplify/amplify-android/pull/670#discussion_r461234390", "createdAt": "2020-07-27T23:49:23Z", "author": {"login": "raphkim"}, "path": "aws-datastore/src/main/java/com/amplifyframework/datastore/appsync/ModelMetadata.java", "diffHunk": "@@ -37,7 +38,7 @@\n     private final @ModelField(targetType = \"ID\", isRequired = true) String id;\n     private final @ModelField(targetType = \"Boolean\") Boolean _deleted;\n     private final @ModelField(targetType = \"Int\") Integer _version;\n-    private final @ModelField(targetType = \"AWSTimestamp\") Long _lastChangedAt;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDM3MDAyNg=="}, "originalCommit": {"oid": "388d767fca15a1aeaa3593034185e2e7f0878d09"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTkxMTI1Nw==", "bodyText": "No, it will not require the SQL table to be reprovisioned, since it will still be stored as a Long either way.  That said, thanks for asking this question - I realized that the SQLiteModelFieldTypeConverter doesn't support AWSTimestamp yet, so I will add that.", "url": "https://github.com/aws-amplify/amplify-android/pull/670#discussion_r465911257", "createdAt": "2020-08-05T18:09:55Z", "author": {"login": "richardmcclellan"}, "path": "aws-datastore/src/main/java/com/amplifyframework/datastore/appsync/ModelMetadata.java", "diffHunk": "@@ -37,7 +38,7 @@\n     private final @ModelField(targetType = \"ID\", isRequired = true) String id;\n     private final @ModelField(targetType = \"Boolean\") Boolean _deleted;\n     private final @ModelField(targetType = \"Int\") Integer _version;\n-    private final @ModelField(targetType = \"AWSTimestamp\") Long _lastChangedAt;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDM3MDAyNg=="}, "originalCommit": {"oid": "388d767fca15a1aeaa3593034185e2e7f0878d09"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg3MzMzODYyOnYy", "diffSide": "RIGHT", "path": "aws-datastore/src/test/java/com/amplifyframework/datastore/appsync/AppSyncMocking.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNVQwNTo1Nzo0NFrOG3Cwlg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNVQxNTowODozOFrOG3FbIA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDM3MDA3MA==", "bodyText": "Why not your cool Temporal.now(), in all places, instead?", "url": "https://github.com/aws-amplify/amplify-android/pull/670#discussion_r460370070", "createdAt": "2020-07-25T05:57:44Z", "author": {"login": "jamesonwilliams"}, "path": "aws-datastore/src/test/java/com/amplifyframework/datastore/appsync/AppSyncMocking.java", "diffHunk": "@@ -101,7 +101,7 @@ public static CreateConfigurator onCreate(AppSync mock) {\n \n                 // Pass back a ModelWithMetadata. Model is the one provided.\n                 ModelMetadata metadata =\n-                    new ModelMetadata(capturedModel.getId(), false, 1, Time.now());\n+                    new ModelMetadata(capturedModel.getId(), false, 1, new Temporal.Timestamp());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "388d767fca15a1aeaa3593034185e2e7f0878d09"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDQxMzcyOA==", "bodyText": "Oops, missed this one!  Will change.", "url": "https://github.com/aws-amplify/amplify-android/pull/670#discussion_r460413728", "createdAt": "2020-07-25T15:08:38Z", "author": {"login": "richardmcclellan"}, "path": "aws-datastore/src/test/java/com/amplifyframework/datastore/appsync/AppSyncMocking.java", "diffHunk": "@@ -101,7 +101,7 @@ public static CreateConfigurator onCreate(AppSync mock) {\n \n                 // Pass back a ModelWithMetadata. Model is the one provided.\n                 ModelMetadata metadata =\n-                    new ModelMetadata(capturedModel.getId(), false, 1, Time.now());\n+                    new ModelMetadata(capturedModel.getId(), false, 1, new Temporal.Timestamp());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDM3MDA3MA=="}, "originalCommit": {"oid": "388d767fca15a1aeaa3593034185e2e7f0878d09"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg3MzMzODg0OnYy", "diffSide": "RIGHT", "path": "aws-datastore/src/test/java/com/amplifyframework/datastore/appsync/AppSyncResponseDeserializerTest.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNVQwNTo1ODoxMlrOG3CwtA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QxNjowODo0MFrOG6_lpQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDM3MDEwMA==", "bodyText": "You could make a Temporal.timestamp(long, TimeUnit) util, too, that might be cool.", "url": "https://github.com/aws-amplify/amplify-android/pull/670#discussion_r460370100", "createdAt": "2020-07-25T05:58:12Z", "author": {"login": "jamesonwilliams"}, "path": "aws-datastore/src/test/java/com/amplifyframework/datastore/appsync/AppSyncResponseDeserializerTest.java", "diffHunk": "@@ -61,7 +61,7 @@ public void awsDateTypesCanBeDeserialized() {\n                 .build();\n         Boolean deleted = false;\n         Integer version = 42;\n-        Long lastChangedAt = Long.valueOf(1594858827);\n+        Temporal.Timestamp lastChangedAt = new Temporal.Timestamp(1594858827, TimeUnit.SECONDS);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "388d767fca15a1aeaa3593034185e2e7f0878d09"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDUxMjQyMQ==", "bodyText": "Agreed, that would be nice.  Maybe in a subsequent PR.", "url": "https://github.com/aws-amplify/amplify-android/pull/670#discussion_r464512421", "createdAt": "2020-08-03T16:08:40Z", "author": {"login": "richardmcclellan"}, "path": "aws-datastore/src/test/java/com/amplifyframework/datastore/appsync/AppSyncResponseDeserializerTest.java", "diffHunk": "@@ -61,7 +61,7 @@ public void awsDateTypesCanBeDeserialized() {\n                 .build();\n         Boolean deleted = false;\n         Integer version = 42;\n-        Long lastChangedAt = Long.valueOf(1594858827);\n+        Temporal.Timestamp lastChangedAt = new Temporal.Timestamp(1594858827, TimeUnit.SECONDS);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDM3MDEwMA=="}, "originalCommit": {"oid": "388d767fca15a1aeaa3593034185e2e7f0878d09"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg3OTM1NjkzOnYy", "diffSide": "RIGHT", "path": "aws-api-appsync/src/main/java/com/amplifyframework/core/model/temporal/Temporal.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QyMzo0NDowNVrOG33aMQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QyMzo0NDowNVrOG33aMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTIzMjY4OQ==", "bodyText": "nice \ud83d\udc4d", "url": "https://github.com/aws-amplify/amplify-android/pull/670#discussion_r461232689", "createdAt": "2020-07-27T23:44:05Z", "author": {"login": "raphkim"}, "path": "aws-api-appsync/src/main/java/com/amplifyframework/core/model/temporal/Temporal.java", "diffHunk": "@@ -434,6 +434,14 @@ public Timestamp(@NonNull java.util.Date date) {\n             this(date.getTime(), TimeUnit.MILLISECONDS);\n         }\n \n+        /**\n+         * Returns a new Timestamp instance that represents the current system time.\n+         * @return a new Timestamp instance that represents the current system time.\n+         */\n+        public static Timestamp now() {\n+            return new Timestamp();\n+        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "388d767fca15a1aeaa3593034185e2e7f0878d09"}, "originalPosition": 10}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg3OTM2MjYwOnYy", "diffSide": "RIGHT", "path": "aws-datastore/src/main/java/com/amplifyframework/datastore/appsync/ModelMetadata.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QyMzo0Njo0NVrOG33dmA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QxNjowNzo1MFrOG6_j2A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTIzMzU2MA==", "bodyText": "Just making sure: this change is scoped only to model metadata right? Codegen won't be affected?", "url": "https://github.com/aws-amplify/amplify-android/pull/670#discussion_r461233560", "createdAt": "2020-07-27T23:46:45Z", "author": {"login": "raphkim"}, "path": "aws-datastore/src/main/java/com/amplifyframework/datastore/appsync/ModelMetadata.java", "diffHunk": "@@ -37,7 +38,7 @@\n     private final @ModelField(targetType = \"ID\", isRequired = true) String id;\n     private final @ModelField(targetType = \"Boolean\") Boolean _deleted;\n     private final @ModelField(targetType = \"Int\") Integer _version;\n-    private final @ModelField(targetType = \"AWSTimestamp\") Long _lastChangedAt;\n+    private final @ModelField(targetType = \"AWSTimestamp\") Temporal.Timestamp _lastChangedAt;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "388d767fca15a1aeaa3593034185e2e7f0878d09"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDUxMTk2MA==", "bodyText": "Correct, no impact on codegen.", "url": "https://github.com/aws-amplify/amplify-android/pull/670#discussion_r464511960", "createdAt": "2020-08-03T16:07:50Z", "author": {"login": "richardmcclellan"}, "path": "aws-datastore/src/main/java/com/amplifyframework/datastore/appsync/ModelMetadata.java", "diffHunk": "@@ -37,7 +38,7 @@\n     private final @ModelField(targetType = \"ID\", isRequired = true) String id;\n     private final @ModelField(targetType = \"Boolean\") Boolean _deleted;\n     private final @ModelField(targetType = \"Int\") Integer _version;\n-    private final @ModelField(targetType = \"AWSTimestamp\") Long _lastChangedAt;\n+    private final @ModelField(targetType = \"AWSTimestamp\") Temporal.Timestamp _lastChangedAt;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTIzMzU2MA=="}, "originalCommit": {"oid": "388d767fca15a1aeaa3593034185e2e7f0878d09"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk2MDIwOTg2OnYy", "diffSide": "RIGHT", "path": "aws-datastore/src/test/java/com/amplifyframework/datastore/appsync/TestModelWithMetadataInstances.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQwNTowOToxM1rOHDp7aA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQwNTowOToxM1rOHDp7aA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzU5NDcyOA==", "bodyText": "We could potentially create Temporal.Timestamp.seconds(123_123L) and Temporal.Timestamp.milliseconds(123_123_000L) utility factories?", "url": "https://github.com/aws-amplify/amplify-android/pull/670#discussion_r473594728", "createdAt": "2020-08-20T05:09:13Z", "author": {"login": "jamesonwilliams"}, "path": "aws-datastore/src/test/java/com/amplifyframework/datastore/appsync/TestModelWithMetadataInstances.java", "diffHunk": "@@ -53,12 +61,18 @@\n                 .rating(3)\n                 .id(\"83ceb757-c8c8-4b6a-bee0-a43afb53a73a\")\n                 .build(),\n-            new ModelMetadata(\"83ceb757-c8c8-4b6a-bee0-a43afb53a73a\", null, 5, 123123L)\n+            new ModelMetadata(\"83ceb757-c8c8-4b6a-bee0-a43afb53a73a\",\n+                    null,\n+                    5,\n+                    new Temporal.Timestamp(123123L, TimeUnit.SECONDS))\n         );\n     public static final ModelWithMetadata<Post> DELETED_DRUM_POST =\n         new ModelWithMetadata<>(\n             DRUM_POST.getModel(),\n-            new ModelMetadata(\"83ceb757-c8c8-4b6a-bee0-a43afb53a73a\", Boolean.TRUE, 5, 123123L)\n+            new ModelMetadata(\"83ceb757-c8c8-4b6a-bee0-a43afb53a73a\",\n+                    Boolean.TRUE,\n+                    5,\n+                    new Temporal.Timestamp(123123L, TimeUnit.SECONDS))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "48004f8bb6ce23e174c21b9ae6661749db042a70"}, "originalPosition": 57}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1124, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}