{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk0NDE2NTEz", "number": 333, "title": "Make plugin configuration nullable", "bodyText": "Issue #, if available:\nDescription of changes:\nMake plugin configuration nullable and force the implementation to null-check if it is required\nBy submitting this pull request, I confirm that my contribution is made under the terms of the Apache 2.0 license.", "createdAt": "2020-03-26T20:53:02Z", "url": "https://github.com/aws-amplify/amplify-android/pull/333", "merged": true, "mergeCommit": {"oid": "9e40e9a9099d66575918b575baa62a375eea66fd"}, "closed": true, "closedAt": "2020-03-27T05:43:40Z", "author": {"login": "raphkim"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcRicB7gH2gAyMzk0NDE2NTEzOjdmZWEyN2IxMmIxMjhkN2U2MDJlOTBmMzRjZGY4OWE3ZjgyMDE0Nzk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcRoOMXAFqTM4MjU2MDM5MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "7fea27b12b128d7e602e90f34cdf89a7f8201479", "author": {"user": {"login": "raphkim", "name": "Raphael Kim"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/7fea27b12b128d7e602e90f34cdf89a7f8201479", "committedDate": "2020-03-26T20:50:11Z", "message": "Make plugin configuration nullable"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgyNDI0NDIy", "url": "https://github.com/aws-amplify/amplify-android/pull/333#pullrequestreview-382424422", "createdAt": "2020-03-26T21:12:47Z", "commit": {"oid": "7fea27b12b128d7e602e90f34cdf89a7f8201479"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQyMToxMjo0N1rOF8ar0A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQyMToxNToyNFrOF8aw0w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODg5NjA4MA==", "bodyText": "Hm, I think this means the annotation should say @NonNull. If you throw an exception whenever you see a null param, it can't really be null.\n(In Java, any object can be null, but the annotation means what it ought to be, for the software to work as designed.)", "url": "https://github.com/aws-amplify/amplify-android/pull/333#discussion_r398896080", "createdAt": "2020-03-26T21:12:47Z", "author": {"login": "jamesonwilliams"}, "path": "aws-analytics-pinpoint/src/main/java/com/amplifyframework/analytics/pinpoint/AmazonPinpointAnalyticsPlugin.java", "diffHunk": "@@ -305,7 +305,17 @@ public String getPluginKey() {\n      * {@inheritDoc}\n      */\n     @Override\n-    public void configure(@NonNull JSONObject pluginConfiguration, @NonNull Context context) throws AnalyticsException {\n+    public void configure(\n+            @Nullable JSONObject pluginConfiguration,\n+            @NonNull Context context\n+    ) throws AnalyticsException {\n+        if (pluginConfiguration == null) {\n+            throw new AnalyticsException(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7fea27b12b128d7e602e90f34cdf89a7f8201479"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODg5NjgxOQ==", "bodyText": "Can you remove @Nullable from this? Or, possible write it like:\nvoid configure(/* maybe-@NonNull */ JSONObject pluginConfiguration ...)", "url": "https://github.com/aws-amplify/amplify-android/pull/333#discussion_r398896819", "createdAt": "2020-03-26T21:14:17Z", "author": {"login": "jamesonwilliams"}, "path": "core/src/main/java/com/amplifyframework/core/plugin/Plugin.java", "diffHunk": "@@ -54,14 +54,17 @@\n     String getPluginKey();\n \n     /**\n-     * Configure the plugin with customized configuration object.\n+     * Configure the plugin with customized configuration object. A\n+     * plugin may or may not require plugin configuration, so see\n+     * the documentation for details.\n+     *\n      * This hook provides a good opportunity to instantiate resources.\n      * Any long-lived initialization should take place in {@link #initialize(Context)}, instead.\n      * @param pluginConfiguration plugin-specific configuration data\n      * @param context An Android Context\n      * @throws AmplifyException an error is encountered during configuration.\n      */\n-    void configure(@NonNull JSONObject pluginConfiguration, @NonNull Context context) throws AmplifyException;\n+    void configure(@Nullable JSONObject pluginConfiguration, @NonNull Context context) throws AmplifyException;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7fea27b12b128d7e602e90f34cdf89a7f8201479"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODg5NzM2Mw==", "bodyText": "It isn't; passing a null value here will result in a StorageException. This should say @NonNull.", "url": "https://github.com/aws-amplify/amplify-android/pull/333#discussion_r398897363", "createdAt": "2020-03-26T21:15:24Z", "author": {"login": "jamesonwilliams"}, "path": "aws-storage-s3/src/main/java/com/amplifyframework/storage/s3/AWSS3StoragePlugin.java", "diffHunk": "@@ -107,7 +108,7 @@ public String getPluginKey() {\n \n     @Override\n     @SuppressWarnings(\"MagicNumber\") // TODO: Remove once default values are moved to configuration\n-    public void configure(@NonNull JSONObject pluginConfiguration, @NonNull Context context) throws StorageException {\n+    public void configure(@Nullable JSONObject pluginConfiguration, @NonNull Context context) throws StorageException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7fea27b12b128d7e602e90f34cdf89a7f8201479"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "29790c0fcdc4603c612291571f21304c023e470e", "author": {"user": {"login": "raphkim", "name": "Raphael Kim"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/29790c0fcdc4603c612291571f21304c023e470e", "committedDate": "2020-03-26T23:28:05Z", "message": "Remove annotation from plugin config"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "29790c0fcdc4603c612291571f21304c023e470e", "author": {"user": {"login": "raphkim", "name": "Raphael Kim"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/29790c0fcdc4603c612291571f21304c023e470e", "committedDate": "2020-03-26T23:28:05Z", "message": "Remove annotation from plugin config"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f429c6b8d57c0ec3a68fc165b3f96623fbd3c616", "author": {"user": {"login": "raphkim", "name": "Raphael Kim"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/f429c6b8d57c0ec3a68fc165b3f96623fbd3c616", "committedDate": "2020-03-26T23:37:24Z", "message": "Merge branch 'master' of https://github.com/aws-amplify/amplify-android into nullable-config"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgyNTYwMzkw", "url": "https://github.com/aws-amplify/amplify-android/pull/333#pullrequestreview-382560390", "createdAt": "2020-03-27T03:34:30Z", "commit": {"oid": "f429c6b8d57c0ec3a68fc165b3f96623fbd3c616"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2617, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}