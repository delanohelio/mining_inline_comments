{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE5MDIwNjUw", "number": 475, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNlQyMjoyNjowMVrOD9Hp5g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNlQyMjo1Njo1NFrOD9HvdA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY1NDE1MTQyOnYy", "diffSide": "RIGHT", "path": "aws-analytics-pinpoint/src/androidTest/java/com/amplifyframework/analytics/pinpoint/AnalyticsPinpointInstrumentedTest.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNlQyMjoyNjowMlrOGWc-Yg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xN1QwMTo0MToyOFrOGWdoQw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjE5NjU3OA==", "bodyText": "This drops the aws- prefix from the log slugs, which doesn't necessarily seem wrong to me, but did spark the thought that is there a reason for individual plugins to differentiate themselves? (say, for instance, you're using the aws-analytics-pinpoint plugin and the foo-analytics-bar plugin, for example.", "url": "https://github.com/aws-amplify/amplify-android/pull/475#discussion_r426196578", "createdAt": "2020-05-16T22:26:02Z", "author": {"login": "jpignata"}, "path": "aws-analytics-pinpoint/src/androidTest/java/com/amplifyframework/analytics/pinpoint/AnalyticsPinpointInstrumentedTest.java", "diffHunk": "@@ -50,11 +51,8 @@\n  * Validates the functionality of the {@link AmazonPinpointAnalyticsPlugin}.\n  */\n public class AnalyticsPinpointInstrumentedTest {\n+    private static final Logger LOG = Amplify.Logging.forCategory(CategoryType.ANALYTICS);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a9dbb667d82a6bc73a891435bbf3df23daba34a8"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjIwNzI5OQ==", "bodyText": "Yea, I'm not sold on it either. I'll update the PR to only include the default log level change.", "url": "https://github.com/aws-amplify/amplify-android/pull/475#discussion_r426207299", "createdAt": "2020-05-17T01:41:28Z", "author": {"login": "jamesonwilliams"}, "path": "aws-analytics-pinpoint/src/androidTest/java/com/amplifyframework/analytics/pinpoint/AnalyticsPinpointInstrumentedTest.java", "diffHunk": "@@ -50,11 +51,8 @@\n  * Validates the functionality of the {@link AmazonPinpointAnalyticsPlugin}.\n  */\n public class AnalyticsPinpointInstrumentedTest {\n+    private static final Logger LOG = Amplify.Logging.forCategory(CategoryType.ANALYTICS);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjE5NjU3OA=="}, "originalCommit": {"oid": "a9dbb667d82a6bc73a891435bbf3df23daba34a8"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY1NDE2MzMxOnYy", "diffSide": "RIGHT", "path": "aws-predictions-tensorflow/src/main/java/com/amplifyframework/predictions/tensorflow/service/TensorFlowPredictionsService.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNlQyMjo1MTozMFrOGWdEJg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xN1QwMTo0MTowOVrOGWdoOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjE5ODA1NA==", "bodyText": "This is an interesting one as there will be routinely two plugins -- aws-predictions and aws-predictions-tensorflow running concurrently.", "url": "https://github.com/aws-amplify/amplify-android/pull/475#discussion_r426198054", "createdAt": "2020-05-16T22:51:30Z", "author": {"login": "jpignata"}, "path": "aws-predictions-tensorflow/src/main/java/com/amplifyframework/predictions/tensorflow/service/TensorFlowPredictionsService.java", "diffHunk": "@@ -35,7 +36,7 @@\n  * pre-trained models to make predictions offline.\n  */\n public final class TensorFlowPredictionsService {\n-    private static final Logger LOG = Amplify.Logging.forNamespace(\"amplify:aws-predictions-tensorflow\");\n+    private static final Logger LOG = Amplify.Logging.forCategory(CategoryType.PREDICTIONS);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a9dbb667d82a6bc73a891435bbf3df23daba34a8"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjIwNzI4OQ==", "bodyText": "The original format here was both like ampilfy:plugin-name and amplify-category-name.\nUnfortunately, forPlugin(Plugin<?> plugin) turned out not to be a realistic option. It would mean we'd have to have the plugin instance available in order to call the logger.\nI don't love putting everything under the categroy slug, but at least its consistent.\nI'll redo this PR and just make it about the default log level, not about the slug stuff.", "url": "https://github.com/aws-amplify/amplify-android/pull/475#discussion_r426207289", "createdAt": "2020-05-17T01:41:09Z", "author": {"login": "jamesonwilliams"}, "path": "aws-predictions-tensorflow/src/main/java/com/amplifyframework/predictions/tensorflow/service/TensorFlowPredictionsService.java", "diffHunk": "@@ -35,7 +36,7 @@\n  * pre-trained models to make predictions offline.\n  */\n public final class TensorFlowPredictionsService {\n-    private static final Logger LOG = Amplify.Logging.forNamespace(\"amplify:aws-predictions-tensorflow\");\n+    private static final Logger LOG = Amplify.Logging.forCategory(CategoryType.PREDICTIONS);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjE5ODA1NA=="}, "originalCommit": {"oid": "a9dbb667d82a6bc73a891435bbf3df23daba34a8"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY1NDE2NTY0OnYy", "diffSide": "RIGHT", "path": "core/src/test/java/com/amplifyframework/logging/AndroidLoggingPluginTest.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNlQyMjo1Njo1NFrOGWdFPg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xN1QwMTozOTowMVrOGWdntg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjE5ODMzNA==", "bodyText": "Huh. I guess it stands to reason that DataStore would lowercase to data-store, but I hadn't seen it before.", "url": "https://github.com/aws-amplify/amplify-android/pull/475#discussion_r426198334", "createdAt": "2020-05-16T22:56:54Z", "author": {"login": "jpignata"}, "path": "core/src/test/java/com/amplifyframework/logging/AndroidLoggingPluginTest.java", "diffHunk": "@@ -129,6 +135,36 @@ public void noContentLoggedAtThresholdNone() {\n         assertTrue(systemLog.getLines().isEmpty());\n     }\n \n+    /**\n+     * The {@link AndroidLoggingPlugin#forCategory(CategoryType)} implementation contains\n+     * special rules to normalize a log slut from a category name. Validate these conversions.\n+     */\n+    @Test\n+    public void correctSlugGeneratedForCategories() {\n+        AndroidLoggingPlugin plugin = new AndroidLoggingPlugin();\n+\n+        final Map<CategoryType, String> actuals = new HashMap<>();\n+        for (CategoryType categoryType : CategoryType.values()) {\n+            String result = plugin.forCategory(categoryType).getNamespace();\n+            actuals.put(categoryType, result);\n+        }\n+        final Map<CategoryType, String> expected = new HashMap<>();\n+        expected.put(CategoryType.ANALYTICS, \"amplify:analytics\");\n+        expected.put(CategoryType.API, \"amplify:api\");\n+        expected.put(CategoryType.AUTH, \"amplify:auth\");\n+        expected.put(CategoryType.DATASTORE, \"amplify:data-store\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a9dbb667d82a6bc73a891435bbf3df23daba34a8"}, "originalPosition": 95}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjIwNzE1OA==", "bodyText": "Hm, yea, same. datastore looks more natural. I can probably just update the logic to print a string of lowercase letters without punctuation, that might work.", "url": "https://github.com/aws-amplify/amplify-android/pull/475#discussion_r426207158", "createdAt": "2020-05-17T01:39:01Z", "author": {"login": "jamesonwilliams"}, "path": "core/src/test/java/com/amplifyframework/logging/AndroidLoggingPluginTest.java", "diffHunk": "@@ -129,6 +135,36 @@ public void noContentLoggedAtThresholdNone() {\n         assertTrue(systemLog.getLines().isEmpty());\n     }\n \n+    /**\n+     * The {@link AndroidLoggingPlugin#forCategory(CategoryType)} implementation contains\n+     * special rules to normalize a log slut from a category name. Validate these conversions.\n+     */\n+    @Test\n+    public void correctSlugGeneratedForCategories() {\n+        AndroidLoggingPlugin plugin = new AndroidLoggingPlugin();\n+\n+        final Map<CategoryType, String> actuals = new HashMap<>();\n+        for (CategoryType categoryType : CategoryType.values()) {\n+            String result = plugin.forCategory(categoryType).getNamespace();\n+            actuals.put(categoryType, result);\n+        }\n+        final Map<CategoryType, String> expected = new HashMap<>();\n+        expected.put(CategoryType.ANALYTICS, \"amplify:analytics\");\n+        expected.put(CategoryType.API, \"amplify:api\");\n+        expected.put(CategoryType.AUTH, \"amplify:auth\");\n+        expected.put(CategoryType.DATASTORE, \"amplify:data-store\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjE5ODMzNA=="}, "originalCommit": {"oid": "a9dbb667d82a6bc73a891435bbf3df23daba34a8"}, "originalPosition": 95}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1251, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}