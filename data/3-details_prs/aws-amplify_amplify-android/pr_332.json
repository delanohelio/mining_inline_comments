{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk0MzM5NTYy", "number": 332, "title": "Temporarily ignore broken test", "bodyText": "Issue #, if available:\nDescription of changes:\nIgnore AWSDataStorePluginInstrumentedTest, which seems to break circleCI consistently at the moment. Re-enable upon fix.\nBy submitting this pull request, I confirm that my contribution is made under the terms of the Apache 2.0 license.", "createdAt": "2020-03-26T18:19:12Z", "url": "https://github.com/aws-amplify/amplify-android/pull/332", "merged": true, "mergeCommit": {"oid": "49c0960ab984388ce3e8dd6cb4c22384fac01f16"}, "closed": true, "closedAt": "2020-03-26T23:17:26Z", "author": {"login": "raphkim"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcRgQ-hAH2gAyMzk0MzM5NTYyOjdiMzVmZDNjZmE4ODdlOGJmYWJjZjIyNTBlZDNhMGIzODY0NjZlMGU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcRjMM8AFqTM4MjQ0MjA0Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "7b35fd3cfa887e8bfabcf2250ed3a0b386466e0e", "author": {"user": {"login": "raphkim", "name": "Raphael Kim"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/7b35fd3cfa887e8bfabcf2250ed3a0b386466e0e", "committedDate": "2020-03-26T18:18:18Z", "message": "Temporarily ignore broken test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "44a5a6767f404ab451b2b362df53fa81d140ba18", "author": {"user": {"login": "raphkim", "name": "Raphael Kim"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/44a5a6767f404ab451b2b362df53fa81d140ba18", "committedDate": "2020-03-26T18:22:45Z", "message": "Re-remove whitespace added by IDE"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "44a5a6767f404ab451b2b362df53fa81d140ba18", "author": {"user": {"login": "raphkim", "name": "Raphael Kim"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/44a5a6767f404ab451b2b362df53fa81d140ba18", "committedDate": "2020-03-26T18:22:45Z", "message": "Re-remove whitespace added by IDE"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgyMzAyOTk0", "url": "https://github.com/aws-amplify/amplify-android/pull/332#pullrequestreview-382302994", "createdAt": "2020-03-26T18:37:12Z", "commit": {"oid": "44a5a6767f404ab451b2b362df53fa81d140ba18"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQxODozNzoxMlrOF8VG2Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQxODozNzoxMlrOF8VG2Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODgwNDY5Nw==", "bodyText": "Can you move this to just the specific @Test that's failing? Having this at the class level will prevent some well-functioning tests from being exercised.", "url": "https://github.com/aws-amplify/amplify-android/pull/332#discussion_r398804697", "createdAt": "2020-03-26T18:37:12Z", "author": {"login": "jamesonwilliams"}, "path": "aws-datastore/src/androidTest/java/com/amplifyframework/datastore/AWSDataStorePluginInstrumentedTest.java", "diffHunk": "@@ -46,6 +47,7 @@\n  * which were defined by the schema in:\n  * testmodels/src/main/java/com/amplifyframework/testmodels/commentsblog/schema.graphql.\n  */\n+@Ignore(\"Currently does not pass.\") // TODO: fix the error; re-enable test", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "44a5a6767f404ab451b2b362df53fa81d140ba18"}, "originalPosition": 12}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ebe35fd35230816f0684c1d18e0bee6ddd088e11", "author": {"user": {"login": "raphkim", "name": "Raphael Kim"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/ebe35fd35230816f0684c1d18e0bee6ddd088e11", "committedDate": "2020-03-26T20:02:38Z", "message": "Increase timeout for circleCI"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6cedf9cd39defd1c544ffb189b87f2783b63a915", "author": {"user": {"login": "raphkim", "name": "Raphael Kim"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/6cedf9cd39defd1c544ffb189b87f2783b63a915", "committedDate": "2020-03-26T20:03:13Z", "message": "Merge branch 'master' of https://github.com/aws-amplify/amplify-android into ignore-test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "96b99079daca82b581cfc7cdb492c21195cc369e", "author": {"user": {"login": "raphkim", "name": "Raphael Kim"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/96b99079daca82b581cfc7cdb492c21195cc369e", "committedDate": "2020-03-26T20:59:27Z", "message": "Increase timeout again"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgyNDIyOTIz", "url": "https://github.com/aws-amplify/amplify-android/pull/332#pullrequestreview-382422923", "createdAt": "2020-03-26T21:10:23Z", "commit": {"oid": "96b99079daca82b581cfc7cdb492c21195cc369e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQyMToxMDoyM1rOF8anEg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQyMToxMDoyM1rOF8anEg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODg5NDg2Ng==", "bodyText": "I had tried changing this to TimeUnit.SECONDS.toMilliseconds(1) -- a full second -- and the test still failed in the same way. Unfortunately, I don't think this will solve the problem.", "url": "https://github.com/aws-amplify/amplify-android/pull/332#discussion_r398894866", "createdAt": "2020-03-26T21:10:23Z", "author": {"login": "jamesonwilliams"}, "path": "core/src/androidTest/java/com/amplifyframework/hub/HubInstrumentedTest.java", "diffHunk": "@@ -43,7 +43,7 @@\n  */\n public final class HubInstrumentedTest {\n     private static final Logger LOG = Amplify.Logging.forNamespace(\"amplify:core:test\");\n-    private static final long SUBSCRIPTION_RECEIVE_TIMEOUT_MS = 200;\n+    private static final long SUBSCRIPTION_RECEIVE_TIMEOUT_MS = 300;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "96b99079daca82b581cfc7cdb492c21195cc369e"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgyNDQyMDQ2", "url": "https://github.com/aws-amplify/amplify-android/pull/332#pullrequestreview-382442046", "createdAt": "2020-03-26T21:42:33Z", "commit": {"oid": "96b99079daca82b581cfc7cdb492c21195cc369e"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQyMTo0MjozM1rOF8bkOw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQyMTo0Mjo0M1rOF8bkfw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODkxMDUyMw==", "bodyText": "It  always passes at 200ms locally for me too.\nWhen I had it at 1,000ms, it continued to fail for me (most of the time) when I had a PR up for it.\nIt looked like - after 1000ms - only two of the messages were received, instead of 10.\nEven assuming that the publish/receive flows were all performed serially, 100ms would be a horridly long time to pass off an in-memory data structure.\nSo anyway, I think the problem is elsewhere. Probably around threads available to the test process in the test farm?\nSomething like that? Or perhaps a different test is polluting the state of the test environment, and it just happens to surface as an issue while this test runs?", "url": "https://github.com/aws-amplify/amplify-android/pull/332#discussion_r398910523", "createdAt": "2020-03-26T21:42:33Z", "author": {"login": "jamesonwilliams"}, "path": "core/src/androidTest/java/com/amplifyframework/hub/HubInstrumentedTest.java", "diffHunk": "@@ -43,7 +43,7 @@\n  */\n public final class HubInstrumentedTest {\n     private static final Logger LOG = Amplify.Logging.forNamespace(\"amplify:core:test\");\n-    private static final long SUBSCRIPTION_RECEIVE_TIMEOUT_MS = 200;\n+    private static final long SUBSCRIPTION_RECEIVE_TIMEOUT_MS = 300;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODg5NDg2Ng=="}, "originalCommit": {"oid": "96b99079daca82b581cfc7cdb492c21195cc369e"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODkxMDU5MQ==", "bodyText": "Hm, alright. We can come back to it.", "url": "https://github.com/aws-amplify/amplify-android/pull/332#discussion_r398910591", "createdAt": "2020-03-26T21:42:43Z", "author": {"login": "jamesonwilliams"}, "path": "aws-datastore/src/androidTest/java/com/amplifyframework/datastore/AWSDataStorePluginInstrumentedTest.java", "diffHunk": "@@ -46,6 +47,7 @@\n  * which were defined by the schema in:\n  * testmodels/src/main/java/com/amplifyframework/testmodels/commentsblog/schema.graphql.\n  */\n+@Ignore(\"Currently does not pass.\") // TODO: fix the error; re-enable test", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODgwNDY5Nw=="}, "originalCommit": {"oid": "44a5a6767f404ab451b2b362df53fa81d140ba18"}, "originalPosition": 12}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2614, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}