{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI2MzE3ODkz", "number": 988, "title": "fix: associated Flutter models can sync to cloud", "bodyText": "Version 1.6.3 of Amplify fixed an issue where associated/connected\nmodels failed to sync down from AppSync, when being used with\nFlutter-style ModelSchema.\nUnfortunately, 1.6.3 stopped short of supporting associated models when\nsyncing up to AppSync, from the client.\nThis current change expands the HybridCloudSyncInstrumentationTest, to\ndemonstrate successful sync up and down from AppSync.\nTo support this, request-forming logic is extracted from the\nModelSchema, and split across the AppSyncRequestFactory (for DataStore)\nand the AppSyncGraphQLRequestFactory (for API category). The DataStore\nflavor of the factory is expanded to properly build requests when\ndealing with associations in Flutter-style SerializedModels.\nBy submitting this pull request, I confirm that my contribution is made under the terms of the Apache 2.0 license.", "createdAt": "2020-11-24T08:55:24Z", "url": "https://github.com/aws-amplify/amplify-android/pull/988", "merged": true, "mergeCommit": {"oid": "da6df078ebd32bf292d640858e1fd7c949f9d5f1"}, "closed": true, "closedAt": "2020-11-24T19:06:59Z", "author": {"login": "jamesonwilliams"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdfl1v8gH2gAyNTI2MzE3ODkzOjRkMWUxM2MyNzFkYmU1OThkNjI1MWVlZDc0ZjgzZGYxMTRlZWI0YjQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdful5jgFqTUzNzgyMjAyNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "4d1e13c271dbe598d6251eed74f83df114eeb4b4", "author": {"user": {"login": "jamesonwilliams", "name": "Jameson Williams"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/4d1e13c271dbe598d6251eed74f83df114eeb4b4", "committedDate": "2020-11-24T08:54:05Z", "message": "fix: associated Flutter models can sync to cloud\n\nVersion 1.6.3 of Amplify fixed an issue where associated/connected\nmodels failed to sync down from AppSync, when being used with\nFlutter-style ModelSchema.\n\nUnfortunately, 1.6.3 stopped short of supporting associated models when\nsyncing *up* to AppSync, from the client.\n\nThis current change expands the HybridCloudSyncInstrumentationTest, to\ndemonstrate successful sync up and down from AppSync.\n\nTo support this, request-forming logic is extracted from the\nModelSchema, and split accross the AppSyncRequestFactory (for DataStore)\nand the AppSyncGraphQLRequestFactory (for API category). The DataStore\nflavor of the factory is expanded to properly build requests when\ndealing with associations in Flutter-style SerializedModels."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM3NzU2ODQ0", "url": "https://github.com/aws-amplify/amplify-android/pull/988#pullrequestreview-537756844", "createdAt": "2020-11-24T17:40:03Z", "commit": {"oid": "4d1e13c271dbe598d6251eed74f83df114eeb4b4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQxNzo0MDowNVrOH5OAOQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQxNzo0MDowNVrOH5OAOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTc2MDMxMw==", "bodyText": "What's the reasoning for moving this out of ModelSchema?    And why is the implementation of this method not identical to the similar method created in AppSyncGraphQLRequestFactory?\nUltimately, I think AppSyncRequestFactory (used for DataStore) and AppSyncGraphQLRequestFactory (used for API) should be combined, or at least have a common superclass maybe.", "url": "https://github.com/aws-amplify/amplify-android/pull/988#discussion_r529760313", "createdAt": "2020-11-24T17:40:05Z", "author": {"login": "richardmcclellan"}, "path": "aws-datastore/src/main/java/com/amplifyframework/datastore/appsync/AppSyncRequestFactory.java", "diffHunk": "@@ -315,4 +302,81 @@ private static Object appSyncOpValue(QueryOperator<?> qOp) throws DataStoreExcep\n                     amplifyException, \"Validate your model file.\");\n         }\n     }\n+\n+    private static Map<String, Object> getMapOfFieldNameAndValues(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4d1e13c271dbe598d6251eed74f83df114eeb4b4"}, "originalPosition": 103}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM3ODIwNTcy", "url": "https://github.com/aws-amplify/amplify-android/pull/988#pullrequestreview-537820572", "createdAt": "2020-11-24T19:03:52Z", "commit": {"oid": "4d1e13c271dbe598d6251eed74f83df114eeb4b4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM3ODIyMDI1", "url": "https://github.com/aws-amplify/amplify-android/pull/988#pullrequestreview-537822025", "createdAt": "2020-11-24T19:05:55Z", "commit": {"oid": "4d1e13c271dbe598d6251eed74f83df114eeb4b4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3327, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}