{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc5OTI2ODAx", "number": 281, "title": "[testutils] Add synchronous storage and mobile client to testutils", "bodyText": "Issue #, if available:\nDescription of changes:\n\nRe-organize module into packages to prevent overcrowding it\n\nAdded random package for generating random objects\nAdded sync package for synchronously executing Amplify commands\n\n\nAdded SynchronousMobileClient to assist in initialization and sign-in (authored by @jamesonwilliams )\nAdded SynchronousStorage to execute storage operations synchronously\n\nBy submitting this pull request, I confirm that my contribution is made under the terms of the Apache 2.0 license.", "createdAt": "2020-02-26T01:00:33Z", "url": "https://github.com/aws-amplify/amplify-android/pull/281", "merged": true, "mergeCommit": {"oid": "b86643b5f897c5021a1613488e0490e0d12c3588"}, "closed": true, "closedAt": "2020-02-29T00:35:16Z", "author": {"login": "raphkim"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcIN4U9AH2gAyMzc5OTI2ODAxOmZjYmM2NzMwNWI1Yjk3MTVkOGFhYThiYmVhYTQ1YjUzMGJiM2ZlMmM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcI5Z7RgFqTM2Njc1NjYxNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "fcbc67305b5b9715d8aaa8bbeaa45b530bb3fe2c", "author": {"user": {"login": "raphkim", "name": "Raphael Kim"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/fcbc67305b5b9715d8aaa8bbeaa45b530bb3fe2c", "committedDate": "2020-02-26T21:47:46Z", "message": "Re-organized testutils package to prevent overcrowding it"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "fcbc67305b5b9715d8aaa8bbeaa45b530bb3fe2c", "author": {"user": {"login": "raphkim", "name": "Raphael Kim"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/fcbc67305b5b9715d8aaa8bbeaa45b530bb3fe2c", "committedDate": "2020-02-26T21:47:46Z", "message": "Re-organized testutils package to prevent overcrowding it"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1170e27cbf21231b5cf0eaae243dd18521d7ebeb", "author": {"user": {"login": "raphkim", "name": "Raphael Kim"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/1170e27cbf21231b5cf0eaae243dd18521d7ebeb", "committedDate": "2020-02-26T22:21:52Z", "message": "Add synchronous mobile client and storage"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2MDk5NTA1", "url": "https://github.com/aws-amplify/amplify-android/pull/281#pullrequestreview-366099505", "createdAt": "2020-02-28T00:50:44Z", "commit": {"oid": "1170e27cbf21231b5cf0eaae243dd18521d7ebeb"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQwMDo1MDo0NFrOFvmPJA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQwMDo1MDo0NFrOFvmPJA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTQ1Mzg2MA==", "bodyText": "There is an existing class called TestMobileClient (I think) and this is supposed to be a rename and iteration on top of that existing file", "url": "https://github.com/aws-amplify/amplify-android/pull/281#discussion_r385453860", "createdAt": "2020-02-28T00:50:44Z", "author": {"login": "jamesonwilliams"}, "path": "testutils/src/main/java/com/amplifyframework/testutils/sync/SynchronousMobileClient.java", "diffHunk": "@@ -0,0 +1,223 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package com.amplifyframework.testutils.sync;\n+\n+import android.content.Context;\n+import androidx.annotation.NonNull;\n+import androidx.annotation.Nullable;\n+import androidx.test.core.app.ApplicationProvider;\n+\n+import com.amplifyframework.core.Consumer;\n+import com.amplifyframework.testutils.Await;\n+\n+import com.amazonaws.mobile.client.AWSMobileClient;\n+import com.amazonaws.mobile.client.Callback;\n+import com.amazonaws.mobile.client.UserStateDetails;\n+import com.amazonaws.mobile.client.results.SignInResult;\n+import com.amazonaws.mobile.config.AWSConfiguration;\n+\n+import java.util.Objects;\n+\n+/**\n+ * A wrapper around the {@link AWSMobileClient} which turns its asynchronous methods\n+ * into synchronous ones.\n+ */\n+@SuppressWarnings(\"unused\")\n+public final class SynchronousMobileClient {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1170e27cbf21231b5cf0eaae243dd18521d7ebeb"}, "originalPosition": 39}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ea5e60c1c47a6a4691bd9ff526a7b8bc5dbc0ab9", "author": {"user": {"login": "raphkim", "name": "Raphael Kim"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/ea5e60c1c47a6a4691bd9ff526a7b8bc5dbc0ab9", "committedDate": "2020-02-29T00:11:41Z", "message": "Replace old iteration"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2NzU2NDUx", "url": "https://github.com/aws-amplify/amplify-android/pull/281#pullrequestreview-366756451", "createdAt": "2020-02-29T00:29:32Z", "commit": {"oid": "ea5e60c1c47a6a4691bd9ff526a7b8bc5dbc0ab9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOVQwMDoyOTozMlrOFwGXNw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOVQwMDoyOTozMlrOFwGXNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTk4MDIxNQ==", "bodyText": "If you have a sync package, this should probably go there too, since that\u2019s what this util is all about", "url": "https://github.com/aws-amplify/amplify-android/pull/281#discussion_r385980215", "createdAt": "2020-02-29T00:29:32Z", "author": {"login": "jamesonwilliams"}, "path": "testutils/src/main/java/com/amplifyframework/testutils/sync/SynchronousDataStore.java", "diffHunk": "@@ -13,14 +13,15 @@\n  * permissions and limitations under the License.\n  */\n \n-package com.amplifyframework.testutils;\n+package com.amplifyframework.testutils.sync;\n \n import androidx.annotation.NonNull;\n \n import com.amplifyframework.core.Amplify;\n import com.amplifyframework.core.model.Model;\n import com.amplifyframework.datastore.DataStoreException;\n import com.amplifyframework.datastore.DataStoreItemChange;\n+import com.amplifyframework.testutils.Await;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ea5e60c1c47a6a4691bd9ff526a7b8bc5dbc0ab9"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2NzU2NjE2", "url": "https://github.com/aws-amplify/amplify-android/pull/281#pullrequestreview-366756616", "createdAt": "2020-02-29T00:30:23Z", "commit": {"oid": "ea5e60c1c47a6a4691bd9ff526a7b8bc5dbc0ab9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2848, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}