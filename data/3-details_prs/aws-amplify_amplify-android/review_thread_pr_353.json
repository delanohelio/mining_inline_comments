{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk5MTE5OTU5", "number": 353, "reviewThreads": {"totalCount": 18, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNVQxNToyNTozMFrODu40Lw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQwOTo1MTo1OVrODwVfXg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwNDkxOTUxOnYy", "diffSide": "RIGHT", "path": "aws-analytics-pinpoint/src/androidTest/java/com/amplifyframework/analytics/pinpoint/AnalyticsPinpointInstrumentedTest.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNVQxNToyNTozMFrOGBA7AA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQwMDo0NzozNlrOGBE8Sg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzcxNjg2NA==", "bodyText": "Stronger assertion possible:\nassertEquals(\"PropertyValue\", event1Attributes.getString(\"Property\"));", "url": "https://github.com/aws-amplify/amplify-android/pull/353#discussion_r403716864", "createdAt": "2020-04-05T15:25:30Z", "author": {"login": "jamesonwilliams"}, "path": "aws-analytics-pinpoint/src/androidTest/java/com/amplifyframework/analytics/pinpoint/AnalyticsPinpointInstrumentedTest.java", "diffHunk": "@@ -145,52 +166,66 @@ public void testAutoFlush() throws AnalyticsException {\n \n     /**\n      * Registers a global property and ensures that all recorded events have the global property.\n-     * @throws AnalyticsException Caused by incorrect usage of the Analytics API.\n+     *\n      * @throws JSONException Caused by unexpected event structure.\n      */\n     @Test\n-    public void testRegisterGlobalProperties() throws AnalyticsException, JSONException {\n-        // Register a global property\n-        registerGobalProperty();\n-\n-        BasicAnalyticsEvent event = new BasicAnalyticsEvent(\"Amplify-event\" + UUID.randomUUID().toString(),\n-                PinpointProperties.builder()\n-                        .add(\"Property\", \"PropertyValue\")\n-                        .build());\n+    public void testRegisterGlobalProperties() throws JSONException {\n+        // Arrange: Register global properties and create an event\n+        Amplify.Analytics.registerGlobalProperties(\n+                Properties.builder()\n+                        .add(\"GlobalProperty\", \"globalVal\")\n+                        .build()\n+        );\n+        BasicAnalyticsEvent event = BasicAnalyticsEvent.builder()\n+                .type(\"Amplify-event\" + UUID.randomUUID().toString())\n+                .addProperty(\"Property\", \"PropertyValue\")\n+                .build();\n+\n+        // Act: Record two events: the one created above and another just with a key\n         Amplify.Analytics.recordEvent(event);\n         Amplify.Analytics.recordEvent(\"amplify-test-event\");\n \n-        JSONObject eventAttributes =\n-                new JSONObject(analyticsClient.getAllEvents().get(0).get(\"attributes\").toString());\n-        JSONObject event2Attributes =\n-                new JSONObject(analyticsClient.getAllEvents().get(1).get(\"attributes\").toString());\n+        // Assert: Verify two event were recorded and global attributes are present on both\n+        List<JSONObject> events = analyticsClient.getAllEvents();\n+        assertEquals(2, events.size());\n+        JSONObject event1Attributes = (JSONObject) events.get(0).get(\"attributes\");\n+        JSONObject event2Attributes = (JSONObject) events.get(1).get(\"attributes\");\n \n-        assertEquals(2, analyticsClient.getAllEvents().size());\n-        assertTrue(eventAttributes.has(\"Property\"));\n-        assertTrue(eventAttributes.has(\"GlobalProperty\"));\n-        assertFalse(event2Attributes.has(\"Property\"));\n+        // Global properties are attached to all events\n+        assertTrue(event1Attributes.has(\"GlobalProperty\"));\n         assertTrue(event2Attributes.has(\"GlobalProperty\"));\n+\n+        // Local properties are only attached is passed explicitly as in event\n+        assertTrue(event1Attributes.has(\"Property\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 164}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc4MjczMA==", "bodyText": "\ud83d\udc4d", "url": "https://github.com/aws-amplify/amplify-android/pull/353#discussion_r403782730", "createdAt": "2020-04-06T00:47:36Z", "author": {"login": "jpignata"}, "path": "aws-analytics-pinpoint/src/androidTest/java/com/amplifyframework/analytics/pinpoint/AnalyticsPinpointInstrumentedTest.java", "diffHunk": "@@ -145,52 +166,66 @@ public void testAutoFlush() throws AnalyticsException {\n \n     /**\n      * Registers a global property and ensures that all recorded events have the global property.\n-     * @throws AnalyticsException Caused by incorrect usage of the Analytics API.\n+     *\n      * @throws JSONException Caused by unexpected event structure.\n      */\n     @Test\n-    public void testRegisterGlobalProperties() throws AnalyticsException, JSONException {\n-        // Register a global property\n-        registerGobalProperty();\n-\n-        BasicAnalyticsEvent event = new BasicAnalyticsEvent(\"Amplify-event\" + UUID.randomUUID().toString(),\n-                PinpointProperties.builder()\n-                        .add(\"Property\", \"PropertyValue\")\n-                        .build());\n+    public void testRegisterGlobalProperties() throws JSONException {\n+        // Arrange: Register global properties and create an event\n+        Amplify.Analytics.registerGlobalProperties(\n+                Properties.builder()\n+                        .add(\"GlobalProperty\", \"globalVal\")\n+                        .build()\n+        );\n+        BasicAnalyticsEvent event = BasicAnalyticsEvent.builder()\n+                .type(\"Amplify-event\" + UUID.randomUUID().toString())\n+                .addProperty(\"Property\", \"PropertyValue\")\n+                .build();\n+\n+        // Act: Record two events: the one created above and another just with a key\n         Amplify.Analytics.recordEvent(event);\n         Amplify.Analytics.recordEvent(\"amplify-test-event\");\n \n-        JSONObject eventAttributes =\n-                new JSONObject(analyticsClient.getAllEvents().get(0).get(\"attributes\").toString());\n-        JSONObject event2Attributes =\n-                new JSONObject(analyticsClient.getAllEvents().get(1).get(\"attributes\").toString());\n+        // Assert: Verify two event were recorded and global attributes are present on both\n+        List<JSONObject> events = analyticsClient.getAllEvents();\n+        assertEquals(2, events.size());\n+        JSONObject event1Attributes = (JSONObject) events.get(0).get(\"attributes\");\n+        JSONObject event2Attributes = (JSONObject) events.get(1).get(\"attributes\");\n \n-        assertEquals(2, analyticsClient.getAllEvents().size());\n-        assertTrue(eventAttributes.has(\"Property\"));\n-        assertTrue(eventAttributes.has(\"GlobalProperty\"));\n-        assertFalse(event2Attributes.has(\"Property\"));\n+        // Global properties are attached to all events\n+        assertTrue(event1Attributes.has(\"GlobalProperty\"));\n         assertTrue(event2Attributes.has(\"GlobalProperty\"));\n+\n+        // Local properties are only attached is passed explicitly as in event\n+        assertTrue(event1Attributes.has(\"Property\"));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzcxNjg2NA=="}, "originalCommit": null, "originalPosition": 164}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwNTM5NTIzOnYy", "diffSide": "RIGHT", "path": "core/src/main/java/com/amplifyframework/analytics/BasicAnalyticsEvent.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQwMDoxMDowNVrOGBEotg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQwMDo1Nzo0NFrOGBFB1A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc3NzcxOA==", "bodyText": "All of the methods in this builder can also be marked as @NonNull, I believe. (A human wouldn't benefit from the cue, on this file. But, a lint-ing program / Kotlin type interpreter, could.)\nFor the values that we pass into the builder - should we allow them to be null, or no? If no, we have a convention of using Objects.requireNonNull(...) to \"fail fast\" as soon as we see a bad user-provided value, at its first location of use.", "url": "https://github.com/aws-amplify/amplify-android/pull/353#discussion_r403777718", "createdAt": "2020-04-06T00:10:05Z", "author": {"login": "jamesonwilliams"}, "path": "core/src/main/java/com/amplifyframework/analytics/BasicAnalyticsEvent.java", "diffHunk": "@@ -15,31 +15,148 @@\n \n package com.amplifyframework.analytics;\n \n+import androidx.annotation.NonNull;\n+\n /**\n- * Represents event in its most general form and can have different properties.\n+ * BasicAnalyticsEvent is a custom analytics event that holds a type and a number of\n+ * {@link Properties}. This data object is used to indicate an event occurred such as a user taking\n+ * an action in your application.\n+ *\n+ * <pre>\n+ *     BasicAnalyticsEvent event = BasicAnalyticsEvent.builder()\n+ *          .type(\"LikedPost\")\n+ *          .addProperty(\"PostType\", \"UserImage\")\n+ *          .addProperty(\"LikedUserID\", 78219)\n+ *          .addProperty(\"FirstLike\", true)\n+ *          .build();\n+ * </pre>\n+ *\n+ * Once built, a BasicAnalyticsEvent can be submitted to an analytics plugin through\n+ * {@link AnalyticsCategory#recordEvent(AnalyticsEvent)}.\n  */\n public final class BasicAnalyticsEvent implements AnalyticsEvent {\n-    private final String name;\n+    private final String type;\n     private final Properties properties;\n \n-    /**\n-     * Construct a general analytics event.\n-     *\n-     * @param name name for the event.\n-     * @param properties event properties.\n-     */\n-    public BasicAnalyticsEvent(String name, Properties properties) {\n-        this.name = name;\n+    private BasicAnalyticsEvent(String type, Properties properties) {\n+        this.type = type;\n         this.properties = properties;\n     }\n \n+    /**\n+     * Returns the type of the event.\n+     *\n+     * @return The type of the event\n+     */\n     @Override\n-    public String getName() {\n-        return name;\n+    @NonNull\n+    public String getType() {\n+        return type;\n     }\n \n+    /**\n+     * Returns the {@link Properties} of the event.\n+     *\n+     * @return The {@link Properties} of the event\n+     */\n     @Override\n+    @NonNull\n     public Properties getProperties() {\n         return properties;\n     }\n+\n+    /**\n+     * Returns a new {@link Builder} to configure an instance of BasicAnalyticsEvent.\n+     *\n+     * @return a {@link Builder}\n+     */\n+    @NonNull\n+    public static Builder builder() {\n+        return new Builder();\n+    }\n+\n+    /**\n+     * Builder is used to create and configure an instance of {@link BasicAnalyticsEvent}. Its\n+     * methods return the Builder instance to allow for fluent method chaining. This Builder reuses\n+     * {@link Properties.Builder} to construct the properties to store in the event.\n+     *\n+     * @see Properties\n+     */\n+    public static final class Builder {", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 83}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc4NDE0OA==", "bodyText": "Ahh, yes, you are correct. Thanks! I'll get the hang of this eventually. Adding the fail-fast incantation where appropriate.", "url": "https://github.com/aws-amplify/amplify-android/pull/353#discussion_r403784148", "createdAt": "2020-04-06T00:57:44Z", "author": {"login": "jpignata"}, "path": "core/src/main/java/com/amplifyframework/analytics/BasicAnalyticsEvent.java", "diffHunk": "@@ -15,31 +15,148 @@\n \n package com.amplifyframework.analytics;\n \n+import androidx.annotation.NonNull;\n+\n /**\n- * Represents event in its most general form and can have different properties.\n+ * BasicAnalyticsEvent is a custom analytics event that holds a type and a number of\n+ * {@link Properties}. This data object is used to indicate an event occurred such as a user taking\n+ * an action in your application.\n+ *\n+ * <pre>\n+ *     BasicAnalyticsEvent event = BasicAnalyticsEvent.builder()\n+ *          .type(\"LikedPost\")\n+ *          .addProperty(\"PostType\", \"UserImage\")\n+ *          .addProperty(\"LikedUserID\", 78219)\n+ *          .addProperty(\"FirstLike\", true)\n+ *          .build();\n+ * </pre>\n+ *\n+ * Once built, a BasicAnalyticsEvent can be submitted to an analytics plugin through\n+ * {@link AnalyticsCategory#recordEvent(AnalyticsEvent)}.\n  */\n public final class BasicAnalyticsEvent implements AnalyticsEvent {\n-    private final String name;\n+    private final String type;\n     private final Properties properties;\n \n-    /**\n-     * Construct a general analytics event.\n-     *\n-     * @param name name for the event.\n-     * @param properties event properties.\n-     */\n-    public BasicAnalyticsEvent(String name, Properties properties) {\n-        this.name = name;\n+    private BasicAnalyticsEvent(String type, Properties properties) {\n+        this.type = type;\n         this.properties = properties;\n     }\n \n+    /**\n+     * Returns the type of the event.\n+     *\n+     * @return The type of the event\n+     */\n     @Override\n-    public String getName() {\n-        return name;\n+    @NonNull\n+    public String getType() {\n+        return type;\n     }\n \n+    /**\n+     * Returns the {@link Properties} of the event.\n+     *\n+     * @return The {@link Properties} of the event\n+     */\n     @Override\n+    @NonNull\n     public Properties getProperties() {\n         return properties;\n     }\n+\n+    /**\n+     * Returns a new {@link Builder} to configure an instance of BasicAnalyticsEvent.\n+     *\n+     * @return a {@link Builder}\n+     */\n+    @NonNull\n+    public static Builder builder() {\n+        return new Builder();\n+    }\n+\n+    /**\n+     * Builder is used to create and configure an instance of {@link BasicAnalyticsEvent}. Its\n+     * methods return the Builder instance to allow for fluent method chaining. This Builder reuses\n+     * {@link Properties.Builder} to construct the properties to store in the event.\n+     *\n+     * @see Properties\n+     */\n+    public static final class Builder {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc3NzcxOA=="}, "originalCommit": null, "originalPosition": 83}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwNTM5NzIyOnYy", "diffSide": "RIGHT", "path": "core/src/main/java/com/amplifyframework/analytics/BooleanProperty.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQwMDoxMjoyMlrOGBEp0A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQwMDoxMjoyMlrOGBEp0A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc3ODAwMA==", "bodyText": "Potentially, BooleanProperty(Objects.requireNonNull(value))  (Same for all of the arguments to various FooProperty factories.)", "url": "https://github.com/aws-amplify/amplify-android/pull/353#discussion_r403778000", "createdAt": "2020-04-06T00:12:22Z", "author": {"login": "jamesonwilliams"}, "path": "core/src/main/java/com/amplifyframework/analytics/BooleanProperty.java", "diffHunk": "@@ -0,0 +1,49 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package com.amplifyframework.analytics;\n+\n+import androidx.annotation.NonNull;\n+\n+/**\n+ * BooleanProperty wraps a Boolean value to store in {@link Properties}.\n+ */\n+public final class BooleanProperty implements Property<Boolean> {\n+    private final Boolean value;\n+\n+    private BooleanProperty(Boolean value) {\n+        this.value = value;\n+    }\n+\n+    /**\n+     * getValue returns the wrapped Boolean value stored in the property.\n+     *\n+     * @return The wrapped Boolean value\n+     */\n+    @Override\n+    public Boolean getValue() {\n+        return value;\n+    }\n+\n+    /**\n+     * Factory method to instantiate a {@link BooleanProperty} from a {@link Boolean} value.\n+     *\n+     * @param value a boolean value\n+     * @return an instance of {@link BooleanProperty}\n+     */\n+    public static BooleanProperty from(@NonNull Boolean value) {\n+        return new BooleanProperty(value);", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 47}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwNTM5OTA5OnYy", "diffSide": "RIGHT", "path": "core/src/main/java/com/amplifyframework/analytics/Properties.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQwMDoxMzo1M1rOGBEqsA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQwMDoxMzo1M1rOGBEqsA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc3ODIyNA==", "bodyText": "The docs you've added in this PR are first-class, @jpignata!", "url": "https://github.com/aws-amplify/amplify-android/pull/353#discussion_r403778224", "createdAt": "2020-04-06T00:13:53Z", "author": {"login": "jamesonwilliams"}, "path": "core/src/main/java/com/amplifyframework/analytics/Properties.java", "diffHunk": "@@ -15,34 +15,152 @@\n \n package com.amplifyframework.analytics;\n \n-import com.amplifyframework.util.Immutable;\n+import androidx.annotation.NonNull;\n \n import java.util.HashMap;\n+import java.util.Iterator;\n import java.util.Map;\n \n /**\n- * Wrapper for {@link Map} to restrict the types that may be passed in.\n+ * Properties provides key/value pairs to represent attributes of an {@link AnalyticsEvent}. While\n+ * different analytics services will have support for different datatypes, Properties provides a\n+ * baseline of support for String, Boolean, Double, and Integer. If one of these aren't available in\n+ * a given service, the plugin is expected to cast it to something supported. (e.g., convert Boolean", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 16}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwNTQwMDYyOnYy", "diffSide": "RIGHT", "path": "core/src/main/java/com/amplifyframework/analytics/Properties.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQwMDoxNToxN1rOGBErZQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQwMDoxNToxN1rOGBErZQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc3ODQwNQ==", "bodyText": "Would return primitive int, which can't be null, anyway.", "url": "https://github.com/aws-amplify/amplify-android/pull/353#discussion_r403778405", "createdAt": "2020-04-06T00:15:17Z", "author": {"login": "jamesonwilliams"}, "path": "core/src/main/java/com/amplifyframework/analytics/Properties.java", "diffHunk": "@@ -15,34 +15,152 @@\n \n package com.amplifyframework.analytics;\n \n-import com.amplifyframework.util.Immutable;\n+import androidx.annotation.NonNull;\n \n import java.util.HashMap;\n+import java.util.Iterator;\n import java.util.Map;\n \n /**\n- * Wrapper for {@link Map} to restrict the types that may be passed in.\n+ * Properties provides key/value pairs to represent attributes of an {@link AnalyticsEvent}. While\n+ * different analytics services will have support for different datatypes, Properties provides a\n+ * baseline of support for String, Boolean, Double, and Integer. If one of these aren't available in\n+ * a given service, the plugin is expected to cast it to something supported. (e.g., convert Boolean\n+ * true to the String \"true\")\n+ *\n+ * <pre>\n+ *     Properties properties = Properties.builder()\n+ *          .add(\"PostType\", \"UserImage\")\n+ *          .add(\"LikedUserID\", 78219)\n+ *          .add(\"FirstLike\", true)\n+ *          .build();\n+ * </pre>\n  */\n-public class Properties {\n+public final class Properties implements Iterable<Map.Entry<String, Property<?>>> {\n+    private final Map<String, Property<?>> properties;\n+\n+    private Properties(Map<String, Property<?>> properties) {\n+        this.properties = properties;\n+    }\n+\n+    /**\n+     * Iterator allows Properties to support foreach operations.\n+     *\n+     * <pre>\n+     *      for (Map.Entry&lt;String, Property&lt;?&gt;&gt; entry : properties) {\n+     *          String key = entry.getKey();\n+     *          Property&lt;?&gt; value = entry.getValue();\n+     *\n+     *          // Do something with key and value\n+     *      }\n+     * </pre>\n+     *\n+     * @return An {@link Iterator} of the underlying {@link Map#entrySet()} to enable foreach access\n+     */\n+    @Override\n+    @NonNull\n+    public Iterator<Map.Entry<String, Property<?>>> iterator() {\n+        return properties.entrySet().iterator();\n+    }\n+\n+    /**\n+     * size returns the number of properties.\n+     *\n+     * @return The number of properties\n+     */\n+    @NonNull\n+    public Integer size() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 61}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwNTQwMTg0OnYy", "diffSide": "RIGHT", "path": "core/src/main/java/com/amplifyframework/analytics/Properties.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQwMDoxNjozMlrOGBEsAg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQwMTozNDo0MlrOGBFYNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc3ODU2Mg==", "bodyText": "If I pass a non-existing property name, this would currently return null, but the flag says @NonNull. I think we need some logic like:\nProperty<?> property = properties.get(propertyName);\nif (property == null) {\n   // there was no match ... throw an exception?\n}\nreturn property;", "url": "https://github.com/aws-amplify/amplify-android/pull/353#discussion_r403778562", "createdAt": "2020-04-06T00:16:32Z", "author": {"login": "jamesonwilliams"}, "path": "core/src/main/java/com/amplifyframework/analytics/Properties.java", "diffHunk": "@@ -15,34 +15,152 @@\n \n package com.amplifyframework.analytics;\n \n-import com.amplifyframework.util.Immutable;\n+import androidx.annotation.NonNull;\n \n import java.util.HashMap;\n+import java.util.Iterator;\n import java.util.Map;\n \n /**\n- * Wrapper for {@link Map} to restrict the types that may be passed in.\n+ * Properties provides key/value pairs to represent attributes of an {@link AnalyticsEvent}. While\n+ * different analytics services will have support for different datatypes, Properties provides a\n+ * baseline of support for String, Boolean, Double, and Integer. If one of these aren't available in\n+ * a given service, the plugin is expected to cast it to something supported. (e.g., convert Boolean\n+ * true to the String \"true\")\n+ *\n+ * <pre>\n+ *     Properties properties = Properties.builder()\n+ *          .add(\"PostType\", \"UserImage\")\n+ *          .add(\"LikedUserID\", 78219)\n+ *          .add(\"FirstLike\", true)\n+ *          .build();\n+ * </pre>\n  */\n-public class Properties {\n+public final class Properties implements Iterable<Map.Entry<String, Property<?>>> {\n+    private final Map<String, Property<?>> properties;\n+\n+    private Properties(Map<String, Property<?>> properties) {\n+        this.properties = properties;\n+    }\n+\n+    /**\n+     * Iterator allows Properties to support foreach operations.\n+     *\n+     * <pre>\n+     *      for (Map.Entry&lt;String, Property&lt;?&gt;&gt; entry : properties) {\n+     *          String key = entry.getKey();\n+     *          Property&lt;?&gt; value = entry.getValue();\n+     *\n+     *          // Do something with key and value\n+     *      }\n+     * </pre>\n+     *\n+     * @return An {@link Iterator} of the underlying {@link Map#entrySet()} to enable foreach access\n+     */\n+    @Override\n+    @NonNull\n+    public Iterator<Map.Entry<String, Property<?>>> iterator() {\n+        return properties.entrySet().iterator();\n+    }\n+\n+    /**\n+     * size returns the number of properties.\n+     *\n+     * @return The number of properties\n+     */\n+    @NonNull\n+    public Integer size() {\n+        return properties.size();\n+    }\n \n     /**\n-     * Map to hold analytics properties.\n+     * get returns a specific {@link Property} by its name.\n+     *\n+     * @param propertyName The name of the property to retrieve\n+     * @return The corresponding {@link Property}\n      */\n-    @SuppressWarnings(\"VisibilityModifier\")\n-    protected final Map<String, Property<?>> properties;\n+    @NonNull\n+    public Property<?> get(@NonNull String propertyName) {\n+        return properties.get(propertyName);", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 76}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc4OTg3OA==", "bodyText": "I suppose we could also remove the @nonnull and embrace the null-ness as this method is mainly used for test purposes. I gave it a shot by raising NoSuchElementException.", "url": "https://github.com/aws-amplify/amplify-android/pull/353#discussion_r403789878", "createdAt": "2020-04-06T01:34:42Z", "author": {"login": "jpignata"}, "path": "core/src/main/java/com/amplifyframework/analytics/Properties.java", "diffHunk": "@@ -15,34 +15,152 @@\n \n package com.amplifyframework.analytics;\n \n-import com.amplifyframework.util.Immutable;\n+import androidx.annotation.NonNull;\n \n import java.util.HashMap;\n+import java.util.Iterator;\n import java.util.Map;\n \n /**\n- * Wrapper for {@link Map} to restrict the types that may be passed in.\n+ * Properties provides key/value pairs to represent attributes of an {@link AnalyticsEvent}. While\n+ * different analytics services will have support for different datatypes, Properties provides a\n+ * baseline of support for String, Boolean, Double, and Integer. If one of these aren't available in\n+ * a given service, the plugin is expected to cast it to something supported. (e.g., convert Boolean\n+ * true to the String \"true\")\n+ *\n+ * <pre>\n+ *     Properties properties = Properties.builder()\n+ *          .add(\"PostType\", \"UserImage\")\n+ *          .add(\"LikedUserID\", 78219)\n+ *          .add(\"FirstLike\", true)\n+ *          .build();\n+ * </pre>\n  */\n-public class Properties {\n+public final class Properties implements Iterable<Map.Entry<String, Property<?>>> {\n+    private final Map<String, Property<?>> properties;\n+\n+    private Properties(Map<String, Property<?>> properties) {\n+        this.properties = properties;\n+    }\n+\n+    /**\n+     * Iterator allows Properties to support foreach operations.\n+     *\n+     * <pre>\n+     *      for (Map.Entry&lt;String, Property&lt;?&gt;&gt; entry : properties) {\n+     *          String key = entry.getKey();\n+     *          Property&lt;?&gt; value = entry.getValue();\n+     *\n+     *          // Do something with key and value\n+     *      }\n+     * </pre>\n+     *\n+     * @return An {@link Iterator} of the underlying {@link Map#entrySet()} to enable foreach access\n+     */\n+    @Override\n+    @NonNull\n+    public Iterator<Map.Entry<String, Property<?>>> iterator() {\n+        return properties.entrySet().iterator();\n+    }\n+\n+    /**\n+     * size returns the number of properties.\n+     *\n+     * @return The number of properties\n+     */\n+    @NonNull\n+    public Integer size() {\n+        return properties.size();\n+    }\n \n     /**\n-     * Map to hold analytics properties.\n+     * get returns a specific {@link Property} by its name.\n+     *\n+     * @param propertyName The name of the property to retrieve\n+     * @return The corresponding {@link Property}\n      */\n-    @SuppressWarnings(\"VisibilityModifier\")\n-    protected final Map<String, Property<?>> properties;\n+    @NonNull\n+    public Property<?> get(@NonNull String propertyName) {\n+        return properties.get(propertyName);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc3ODU2Mg=="}, "originalCommit": null, "originalPosition": 76}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwNTQwNDUyOnYy", "diffSide": "RIGHT", "path": "core/src/main/java/com/amplifyframework/analytics/Properties.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQwMDoxODo1M1rOGBEtTA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQwMToxMTo1OVrOGBFJ5A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc3ODg5Mg==", "bodyText": "Hm, I forget. Since this is part of the core spec: Do we need an <T, P extends Property<T>> Builder add(String, P property) method on this builder, as well? That way the user has an extension point, if they're using a property other than the ones our plugin does? (That is, another plugin might only work with GizmoProperty values.)", "url": "https://github.com/aws-amplify/amplify-android/pull/353#discussion_r403778892", "createdAt": "2020-04-06T00:18:53Z", "author": {"login": "jamesonwilliams"}, "path": "core/src/main/java/com/amplifyframework/analytics/Properties.java", "diffHunk": "@@ -15,34 +15,152 @@\n \n package com.amplifyframework.analytics;\n \n-import com.amplifyframework.util.Immutable;\n+import androidx.annotation.NonNull;\n \n import java.util.HashMap;\n+import java.util.Iterator;\n import java.util.Map;\n \n /**\n- * Wrapper for {@link Map} to restrict the types that may be passed in.\n+ * Properties provides key/value pairs to represent attributes of an {@link AnalyticsEvent}. While\n+ * different analytics services will have support for different datatypes, Properties provides a\n+ * baseline of support for String, Boolean, Double, and Integer. If one of these aren't available in\n+ * a given service, the plugin is expected to cast it to something supported. (e.g., convert Boolean\n+ * true to the String \"true\")\n+ *\n+ * <pre>\n+ *     Properties properties = Properties.builder()\n+ *          .add(\"PostType\", \"UserImage\")\n+ *          .add(\"LikedUserID\", 78219)\n+ *          .add(\"FirstLike\", true)\n+ *          .build();\n+ * </pre>\n  */\n-public class Properties {\n+public final class Properties implements Iterable<Map.Entry<String, Property<?>>> {\n+    private final Map<String, Property<?>> properties;\n+\n+    private Properties(Map<String, Property<?>> properties) {\n+        this.properties = properties;\n+    }\n+\n+    /**\n+     * Iterator allows Properties to support foreach operations.\n+     *\n+     * <pre>\n+     *      for (Map.Entry&lt;String, Property&lt;?&gt;&gt; entry : properties) {\n+     *          String key = entry.getKey();\n+     *          Property&lt;?&gt; value = entry.getValue();\n+     *\n+     *          // Do something with key and value\n+     *      }\n+     * </pre>\n+     *\n+     * @return An {@link Iterator} of the underlying {@link Map#entrySet()} to enable foreach access\n+     */\n+    @Override\n+    @NonNull\n+    public Iterator<Map.Entry<String, Property<?>>> iterator() {\n+        return properties.entrySet().iterator();\n+    }\n+\n+    /**\n+     * size returns the number of properties.\n+     *\n+     * @return The number of properties\n+     */\n+    @NonNull\n+    public Integer size() {\n+        return properties.size();\n+    }\n \n     /**\n-     * Map to hold analytics properties.\n+     * get returns a specific {@link Property} by its name.\n+     *\n+     * @param propertyName The name of the property to retrieve\n+     * @return The corresponding {@link Property}\n      */\n-    @SuppressWarnings(\"VisibilityModifier\")\n-    protected final Map<String, Property<?>> properties;\n+    @NonNull\n+    public Property<?> get(@NonNull String propertyName) {\n+        return properties.get(propertyName);\n+    }\n \n     /**\n-     * Properties constructor that initializes the underlying map.\n+     * Returns a new {@link Builder} to configure an instance of Properties.\n+     *\n+     * @return a {@link Builder}\n      */\n-    public Properties() {\n-        properties = new HashMap<>();\n+    @NonNull\n+    public static Builder builder() {\n+        return new Builder();\n     }\n \n     /**\n-     * Returns the underlying property map.\n-     * @return underlying properties map\n+     * Builder is used to create and configure an instance of {@link Properties}. Its\n+     * methods return the Builder instance to allow for fluent method chaining.\n      */\n-    public final Map<String, Property<?>> get() {\n-        return Immutable.of(properties);\n+    public static final class Builder {", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 100}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc4NjIxMg==", "bodyText": "Thank you for noting this. I thought about this this morning a while and wasn't sure of the best way to present an extension point. Will grab you tomorrow to chat about it.", "url": "https://github.com/aws-amplify/amplify-android/pull/353#discussion_r403786212", "createdAt": "2020-04-06T01:11:59Z", "author": {"login": "jpignata"}, "path": "core/src/main/java/com/amplifyframework/analytics/Properties.java", "diffHunk": "@@ -15,34 +15,152 @@\n \n package com.amplifyframework.analytics;\n \n-import com.amplifyframework.util.Immutable;\n+import androidx.annotation.NonNull;\n \n import java.util.HashMap;\n+import java.util.Iterator;\n import java.util.Map;\n \n /**\n- * Wrapper for {@link Map} to restrict the types that may be passed in.\n+ * Properties provides key/value pairs to represent attributes of an {@link AnalyticsEvent}. While\n+ * different analytics services will have support for different datatypes, Properties provides a\n+ * baseline of support for String, Boolean, Double, and Integer. If one of these aren't available in\n+ * a given service, the plugin is expected to cast it to something supported. (e.g., convert Boolean\n+ * true to the String \"true\")\n+ *\n+ * <pre>\n+ *     Properties properties = Properties.builder()\n+ *          .add(\"PostType\", \"UserImage\")\n+ *          .add(\"LikedUserID\", 78219)\n+ *          .add(\"FirstLike\", true)\n+ *          .build();\n+ * </pre>\n  */\n-public class Properties {\n+public final class Properties implements Iterable<Map.Entry<String, Property<?>>> {\n+    private final Map<String, Property<?>> properties;\n+\n+    private Properties(Map<String, Property<?>> properties) {\n+        this.properties = properties;\n+    }\n+\n+    /**\n+     * Iterator allows Properties to support foreach operations.\n+     *\n+     * <pre>\n+     *      for (Map.Entry&lt;String, Property&lt;?&gt;&gt; entry : properties) {\n+     *          String key = entry.getKey();\n+     *          Property&lt;?&gt; value = entry.getValue();\n+     *\n+     *          // Do something with key and value\n+     *      }\n+     * </pre>\n+     *\n+     * @return An {@link Iterator} of the underlying {@link Map#entrySet()} to enable foreach access\n+     */\n+    @Override\n+    @NonNull\n+    public Iterator<Map.Entry<String, Property<?>>> iterator() {\n+        return properties.entrySet().iterator();\n+    }\n+\n+    /**\n+     * size returns the number of properties.\n+     *\n+     * @return The number of properties\n+     */\n+    @NonNull\n+    public Integer size() {\n+        return properties.size();\n+    }\n \n     /**\n-     * Map to hold analytics properties.\n+     * get returns a specific {@link Property} by its name.\n+     *\n+     * @param propertyName The name of the property to retrieve\n+     * @return The corresponding {@link Property}\n      */\n-    @SuppressWarnings(\"VisibilityModifier\")\n-    protected final Map<String, Property<?>> properties;\n+    @NonNull\n+    public Property<?> get(@NonNull String propertyName) {\n+        return properties.get(propertyName);\n+    }\n \n     /**\n-     * Properties constructor that initializes the underlying map.\n+     * Returns a new {@link Builder} to configure an instance of Properties.\n+     *\n+     * @return a {@link Builder}\n      */\n-    public Properties() {\n-        properties = new HashMap<>();\n+    @NonNull\n+    public static Builder builder() {\n+        return new Builder();\n     }\n \n     /**\n-     * Returns the underlying property map.\n-     * @return underlying properties map\n+     * Builder is used to create and configure an instance of {@link Properties}. Its\n+     * methods return the Builder instance to allow for fluent method chaining.\n      */\n-    public final Map<String, Property<?>> get() {\n-        return Immutable.of(properties);\n+    public static final class Builder {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc3ODg5Mg=="}, "originalCommit": null, "originalPosition": 100}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwNTQwNzY3OnYy", "diffSide": "RIGHT", "path": "core/src/main/java/com/amplifyframework/analytics/PropertyNames.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQwMDoyMjowOVrOGBEu5g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQwMDoyMjowOVrOGBEu5g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc3OTMwMg==", "bodyText": "The convention in the rest of the project is to declare the field using its type of least specificity (Liskov Principle); here, this would be just Set<String>.", "url": "https://github.com/aws-amplify/amplify-android/pull/353#discussion_r403779302", "createdAt": "2020-04-06T00:22:09Z", "author": {"login": "jamesonwilliams"}, "path": "core/src/main/java/com/amplifyframework/analytics/PropertyNames.java", "diffHunk": "@@ -0,0 +1,85 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package com.amplifyframework.analytics;\n+\n+import androidx.annotation.NonNull;\n+\n+import java.util.HashSet;\n+import java.util.Iterator;\n+\n+/**\n+ * PropertyNames holds the names of {@link Property} objects used in configuration calls.\n+ *\n+ * <pre>\n+ *     PropertyNames propertyNames = PropertyNames.of(\"Height\", \"HairColor\", \"StarSign\");\n+ * </pre>\n+ */\n+public final class PropertyNames implements Iterable<String> {\n+    private final HashSet<String> propertyNames;", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 31}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwNTQwODQ1OnYy", "diffSide": "RIGHT", "path": "core/src/main/java/com/amplifyframework/analytics/PropertyNames.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQwMDoyMjo0OVrOGBEvSQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQwMDoyMjo0OVrOGBEvSQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc3OTQwMQ==", "bodyText": "(Suggest to use primitive int for size methods.)", "url": "https://github.com/aws-amplify/amplify-android/pull/353#discussion_r403779401", "createdAt": "2020-04-06T00:22:49Z", "author": {"login": "jamesonwilliams"}, "path": "core/src/main/java/com/amplifyframework/analytics/PropertyNames.java", "diffHunk": "@@ -0,0 +1,85 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package com.amplifyframework.analytics;\n+\n+import androidx.annotation.NonNull;\n+\n+import java.util.HashSet;\n+import java.util.Iterator;\n+\n+/**\n+ * PropertyNames holds the names of {@link Property} objects used in configuration calls.\n+ *\n+ * <pre>\n+ *     PropertyNames propertyNames = PropertyNames.of(\"Height\", \"HairColor\", \"StarSign\");\n+ * </pre>\n+ */\n+public final class PropertyNames implements Iterable<String> {\n+    private final HashSet<String> propertyNames;\n+\n+    private PropertyNames() {\n+        propertyNames = new HashSet<>();\n+    }\n+\n+    /**\n+     * of is a static factory method that takes a variable number of String labels representing\n+     * property names and returns an instance of PropertyNames.\n+     *\n+     * @param names A variable number of String property names\n+     * @return An instance of PropertyNames\n+     */\n+    @NonNull\n+    public static PropertyNames of(@NonNull String... names) {\n+        PropertyNames propertyNames = new PropertyNames();\n+\n+        for (String name : names) {\n+            propertyNames.add(name);\n+        }\n+\n+        return propertyNames;\n+    }\n+\n+    /**\n+     * Iterator allows PropertyNames to support foreach operations.\n+     *\n+     * <pre>\n+     *      for (String propertyName : propertyNames) {\n+     *          // do something with PropertyName\n+     *      }\n+     * </pre>\n+     *\n+     * @return An {@link Iterator} to enable foreach access\n+     */\n+    @NonNull\n+    @Override\n+    public Iterator<String> iterator() {\n+        return propertyNames.iterator();\n+    }\n+\n+    /**\n+     * size returns the number of names contained in PropertyNames.\n+     *\n+     * @return The number of names contained\n+     */\n+    @NonNull\n+    public Integer size() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 78}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwNTQxMDY3OnYy", "diffSide": "RIGHT", "path": "core/src/test/java/com/amplifyframework/analytics/BasicAnalyticsEventTest.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQwMDoyNDozMFrOGBEwXA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQwMToyNzo0OVrOGBFT6w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc3OTY3Ng==", "bodyText": "Not part of this PR -- but just mentioning while I'm here --\nI've been meaning to do a PR that adds MagicNumber to the checkstyle-suppressions.xml when found under src/test or src/androidTest (these trees tend to have lots of abitrarily arranged data values.)", "url": "https://github.com/aws-amplify/amplify-android/pull/353#discussion_r403779676", "createdAt": "2020-04-06T00:24:30Z", "author": {"login": "jamesonwilliams"}, "path": "core/src/test/java/com/amplifyframework/analytics/BasicAnalyticsEventTest.java", "diffHunk": "@@ -0,0 +1,51 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package com.amplifyframework.analytics;\n+\n+import org.junit.Test;\n+\n+import static org.junit.Assert.assertEquals;\n+\n+public class BasicAnalyticsEventTest {\n+\n+    @Test\n+    @SuppressWarnings(\"MagicNumber\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc4ODc3OQ==", "bodyText": "In the spirit of the annotations slightly irking me, I've tackled that in a commit in this pull. If you'd rather, I can split it out.", "url": "https://github.com/aws-amplify/amplify-android/pull/353#discussion_r403788779", "createdAt": "2020-04-06T01:27:49Z", "author": {"login": "jpignata"}, "path": "core/src/test/java/com/amplifyframework/analytics/BasicAnalyticsEventTest.java", "diffHunk": "@@ -0,0 +1,51 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package com.amplifyframework.analytics;\n+\n+import org.junit.Test;\n+\n+import static org.junit.Assert.assertEquals;\n+\n+public class BasicAnalyticsEventTest {\n+\n+    @Test\n+    @SuppressWarnings(\"MagicNumber\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc3OTY3Ng=="}, "originalCommit": null, "originalPosition": 25}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwNTQxMzI1OnYy", "diffSide": "RIGHT", "path": "core/src/test/java/com/amplifyframework/analytics/PropertyNamesTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQwMDoyNzoyMFrOGBExwA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQwMDoyNzoyMFrOGBExwA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc4MDAzMg==", "bodyText": "(By the time you get this returning a primitive, I think the case will go away, and the assertEquals(int, int) would be automatically selected, instead of assertEquals(long, long), as it is now (or assertEquals(Object, Object), as it might have been without the primitive casting.)", "url": "https://github.com/aws-amplify/amplify-android/pull/353#discussion_r403780032", "createdAt": "2020-04-06T00:27:20Z", "author": {"login": "jamesonwilliams"}, "path": "core/src/test/java/com/amplifyframework/analytics/PropertyNamesTest.java", "diffHunk": "@@ -0,0 +1,48 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package com.amplifyframework.analytics;\n+\n+import org.junit.Test;\n+\n+import java.util.Arrays;\n+import java.util.HashSet;\n+import java.util.Set;\n+\n+import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertTrue;\n+\n+public class PropertyNamesTest {\n+\n+    @Test\n+    @SuppressWarnings(\"MagicNumber\")\n+    public void of() {\n+        // Arrange: Use the static factory method to create a PropertyNames instance\n+        Set<String> names = new HashSet<>(Arrays.asList(\"Height\", \"Weight\", \"StarSign\"));\n+\n+        PropertyNames propertyNames;\n+        propertyNames = PropertyNames.of(names.toArray(new String[names.size()]));\n+\n+        // Assert: Iterate through the items and remove each name from the set, then check all items\n+        // were removed after iteration\n+        assertEquals(3, (long) propertyNames.size());", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 40}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwNTgzNjU4OnYy", "diffSide": "RIGHT", "path": "core/src/main/java/com/amplifyframework/analytics/StringProperty.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQwNTo0MjozMlrOGBIgKA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQwNTo0MjozMlrOGBIgKA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzg0MTA2NA==", "bodyText": "nit: the JavaDoc is floating above the class with an empty line in between, should be \"snug\"", "url": "https://github.com/aws-amplify/amplify-android/pull/353#discussion_r403841064", "createdAt": "2020-04-06T05:42:32Z", "author": {"login": "jamesonwilliams"}, "path": "core/src/main/java/com/amplifyframework/analytics/StringProperty.java", "diffHunk": "@@ -13,31 +13,41 @@\n  * permissions and limitations under the License.\n  */\n \n-package com.amplifyframework.analytics.pinpoint;\n+package com.amplifyframework.analytics;\n \n-import com.amplifyframework.analytics.Property;\n+import androidx.annotation.NonNull;\n+\n+import java.util.Objects;\n \n /**\n- * Represent pinpoint attributes.\n+ * StringProperty wraps a String value to store in {@link Properties}.\n  */\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 16}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwNTg1NTc2OnYy", "diffSide": "RIGHT", "path": "core/src/test/java/com/amplifyframework/analytics/BooleanPropertyTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQwNTo1Mjo0MVrOGBIrFQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQwNTo1Mjo0MVrOGBIrFQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzg0Mzg2MQ==", "bodyText": "Skippiing boxing -\nassertEquals(Boolean.TRUE, trueProperty.getValue());\nassertEquals(Boolean.FALSE, falseProperty.getValue());", "url": "https://github.com/aws-amplify/amplify-android/pull/353#discussion_r403843861", "createdAt": "2020-04-06T05:52:41Z", "author": {"login": "jamesonwilliams"}, "path": "core/src/test/java/com/amplifyframework/analytics/BooleanPropertyTest.java", "diffHunk": "@@ -0,0 +1,34 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package com.amplifyframework.analytics;\n+\n+import org.junit.Test;\n+\n+import static org.junit.Assert.assertEquals;\n+\n+public class BooleanPropertyTest {\n+\n+    @Test\n+    public void fromReturnsBooleanPropertyWithPassedValue() {\n+        // Arrange: Create the properties\n+        BooleanProperty trueProperty = BooleanProperty.from(true);\n+        BooleanProperty falseProperty = BooleanProperty.from(false);\n+\n+        // Assert: Check that the wrapped values are what was passed in the static factory methods\n+        assertEquals(true, trueProperty.getValue());\n+        assertEquals(false, falseProperty.getValue());", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 32}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwNTg1OTE1OnYy", "diffSide": "RIGHT", "path": "core/src/test/java/com/amplifyframework/analytics/BasicAnalyticsEventTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQwNTo1NDozMFrOGBItEA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQwNTo1NDozMFrOGBItEA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzg0NDM2OA==", "bodyText": "Same nit-picking, being more careful about the boxing on the return types --\nassertEquals(4, properties.size());\nassertEquals(\"EDT\", timeZone);\nassertEquals(Boolean.FALSE, inGeoFence);\nassertEquals(Double.valueOf(98.36), loginDuration);\nassertEquals(Long.valueOf(2), profileCount);", "url": "https://github.com/aws-amplify/amplify-android/pull/353#discussion_r403844368", "createdAt": "2020-04-06T05:54:30Z", "author": {"login": "jamesonwilliams"}, "path": "core/src/test/java/com/amplifyframework/analytics/BasicAnalyticsEventTest.java", "diffHunk": "@@ -0,0 +1,50 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package com.amplifyframework.analytics;\n+\n+import org.junit.Test;\n+\n+import static org.junit.Assert.assertEquals;\n+\n+public class BasicAnalyticsEventTest {\n+\n+    @Test\n+    public void builderConfiguresCompleteBasicAnalyticsEvent() {\n+        // Arrange: Build a new BasicAnalyticsEvent\n+        BasicAnalyticsEvent analyticsEvent = BasicAnalyticsEvent.builder()\n+                .type(\"user.login\")\n+                .addProperty(\"TimeZone\", \"EDT\")\n+                .addProperty(\"inGeoFence\", false)\n+                .addProperty(\"LoginDuration\", 98.36)\n+                .addProperty(\"ProfileCount\", 2)\n+                .build();\n+\n+        // Assert: Verify the builder correctly constructed the BasicAnalyticsEvent\n+        assertEquals(\"user.login\", analyticsEvent.getType());\n+\n+        final Properties properties = analyticsEvent.getProperties();\n+        final String timeZone = ((StringProperty) properties.get(\"TimeZone\")).getValue();\n+        final Boolean inGeoFence = ((BooleanProperty) properties.get(\"inGeoFence\")).getValue();\n+        final Double loginDuration = ((DoubleProperty) properties.get(\"LoginDuration\")).getValue();\n+        final Integer profileCount = ((IntegerProperty) properties.get(\"ProfileCount\")).getValue();\n+\n+        assertEquals(4, (long) properties.size());\n+        assertEquals(\"EDT\", timeZone);\n+        assertEquals(false, inGeoFence);\n+        assertEquals(new Double(98.36), loginDuration);\n+        assertEquals(2, (long) profileCount);", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 48}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwNTg2Nzc1OnYy", "diffSide": "RIGHT", "path": "core/src/test/java/com/amplifyframework/analytics/IntegerPropertyTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQwNTo1ODo1MVrOGBIx9A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQwNTo1ODo1MVrOGBIx9A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzg0NTYyMA==", "bodyText": "assertEquals(Integer.valueOf(5040), property.getValue());\n\n^ A subtly different test, more direct against your return value, this will be equivalent to assertTrue(Integer.valueOf(5040).equals(property.getValue())", "url": "https://github.com/aws-amplify/amplify-android/pull/353#discussion_r403845620", "createdAt": "2020-04-06T05:58:51Z", "author": {"login": "jamesonwilliams"}, "path": "core/src/test/java/com/amplifyframework/analytics/IntegerPropertyTest.java", "diffHunk": "@@ -0,0 +1,32 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package com.amplifyframework.analytics;\n+\n+import org.junit.Test;\n+\n+import static org.junit.Assert.assertEquals;\n+\n+public class IntegerPropertyTest {\n+\n+    @Test\n+    public void fromReturnsIntegerPropertyWithPassedValue() {\n+        // Arrange: Create the property\n+        IntegerProperty property = IntegerProperty.from(5040);\n+\n+        // Assert: Check that the wrapped value is what was passed in the static factory method\n+        assertEquals(5040, (long) property.getValue());", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 30}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwNTg2OTg1OnYy", "diffSide": "RIGHT", "path": "core/src/test/java/com/amplifyframework/analytics/PropertiesTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQwNjowMDoxMFrOGBIzRA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQwNjowMDoxMFrOGBIzRA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzg0NTk1Ng==", "bodyText": "assertEquals(4, properties.size());\nassertEquals(\"EDT\", timeZone);\nassertEquals(Boolean.FALSE, inGeoFence);\nassertEquals(Double.valueOf(98.36), loginDuration);\nassertEquals(Integer.valueOf(2), profileCount);", "url": "https://github.com/aws-amplify/amplify-android/pull/353#discussion_r403845956", "createdAt": "2020-04-06T06:00:10Z", "author": {"login": "jamesonwilliams"}, "path": "core/src/test/java/com/amplifyframework/analytics/PropertiesTest.java", "diffHunk": "@@ -0,0 +1,60 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package com.amplifyframework.analytics;\n+\n+import org.junit.Test;\n+\n+import java.util.NoSuchElementException;\n+\n+import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertThrows;\n+\n+public class PropertiesTest {\n+\n+    @Test\n+    public void builderConfiguresCompleteProperties() {\n+        // Arrange: Build a new Properties object\n+        Properties properties = Properties.builder()\n+                .add(\"TimeZone\", \"EDT\")\n+                .add(\"inGeoFence\", false)\n+                .add(\"LoginDuration\", 98.36)\n+                .add(\"ProfileCount\", 2)\n+                .build();\n+\n+        // Assert: Verify the builder correctly constructed the Properties\n+        assertEquals(4, (long) properties.size());\n+\n+        final String timeZone = ((StringProperty) properties.get(\"TimeZone\")).getValue();\n+        final Boolean inGeoFence = ((BooleanProperty) properties.get(\"inGeoFence\")).getValue();\n+        final Double loginDuration = ((DoubleProperty) properties.get(\"LoginDuration\")).getValue();\n+        final Integer profileCount = ((IntegerProperty) properties.get(\"ProfileCount\")).getValue();\n+\n+        assertEquals(4, properties.size());\n+        assertEquals(\"EDT\", timeZone);\n+        assertEquals(false, inGeoFence);\n+        assertEquals(new Double(98.36), loginDuration);\n+        assertEquals(2, (long) profileCount);", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 49}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUxMzk0MTgwOnYy", "diffSide": "RIGHT", "path": "core/src/main/java/com/amplifyframework/analytics/Properties.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QyMToyNzoxNFrOGCWyIQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QyMToyNzoxNFrOGCWyIQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTEyMzYxNw==", "bodyText": "AnalyticsProperties? and each Property -> AnalyticsProperty?\n\nwould we benefit having a less genericly named \"Property\" class and builder, in case \"Property\" is used else where in the future?\nby having this, developer experience would be:\n\nAmplify.Analytics.registerGlobalProperties(\n    AnalyticsProperties.builder()\n        .add(\"Key1\", \"Value1\")\n        .add(\"Key2\", \"Value2\")\n        .build()\n);", "url": "https://github.com/aws-amplify/amplify-android/pull/353#discussion_r405123617", "createdAt": "2020-04-07T21:27:14Z", "author": {"login": "lawmicha"}, "path": "core/src/main/java/com/amplifyframework/analytics/Properties.java", "diffHunk": "@@ -15,34 +15,181 @@\n \n package com.amplifyframework.analytics;\n \n-import com.amplifyframework.util.Immutable;\n+import androidx.annotation.NonNull;\n \n import java.util.HashMap;\n+import java.util.Iterator;\n import java.util.Map;\n+import java.util.NoSuchElementException;\n+import java.util.Objects;\n \n /**\n- * Wrapper for {@link Map} to restrict the types that may be passed in.\n+ * Properties provides key/value pairs to represent attributes of an {@link AnalyticsEvent}. While\n+ * different analytics services will have support for different datatypes, Properties provides a\n+ * baseline of support for String, Boolean, Double, and Integer. If one of these aren't available in\n+ * a given service, the plugin is expected to cast it to something supported. (e.g., convert Boolean\n+ * true to the String \"true\")\n+ *\n+ * <pre>\n+ *     Properties properties = Properties.builder()\n+ *          .add(\"PostType\", \"UserImage\")\n+ *          .add(\"LikedUserID\", 78219)\n+ *          .add(\"FirstLike\", true)\n+ *          .build();\n+ * </pre>\n  */\n-public class Properties {\n+public final class Properties implements Iterable<Map.Entry<String, Property<?>>> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 30}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUyMDEwMzM0OnYy", "diffSide": "RIGHT", "path": "core/src/test/java/com/amplifyframework/analytics/AnalyticsPropertiesTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQwOTo1MTo1OVrOGDRuxw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQwOTo1MTo1OVrOGDRuxw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjA4OTQxNQ==", "bodyText": "nit: could be marked as a static final class", "url": "https://github.com/aws-amplify/amplify-android/pull/353#discussion_r406089415", "createdAt": "2020-04-09T09:51:59Z", "author": {"login": "jamesonwilliams"}, "path": "core/src/test/java/com/amplifyframework/analytics/AnalyticsPropertiesTest.java", "diffHunk": "@@ -0,0 +1,86 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package com.amplifyframework.analytics;\n+\n+import org.junit.Test;\n+\n+import java.util.Date;\n+import java.util.NoSuchElementException;\n+\n+import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertThrows;\n+\n+public class AnalyticsPropertiesTest {\n+    @Test\n+    public void builderConfiguresCompleteProperties() {\n+        // Arrange: Build a new AnalyticsProperties object\n+        AnalyticsProperties properties = AnalyticsProperties.builder()\n+                .add(\"TimeZone\", \"EDT\")\n+                .add(\"inGeoFence\", false)\n+                .add(\"LoginDuration\", 98.36)\n+                .add(\"ProfileCount\", 2)\n+                .build();\n+\n+        // Assert: Verify the builder correctly constructed the AnalyticsProperties\n+        assertEquals(4, properties.size());\n+\n+        final String timeZone = ((AnalyticsStringProperty) properties.get(\"TimeZone\")).getValue();\n+        final Boolean inGeoFence = ((AnalyticsBooleanProperty) properties.get(\"inGeoFence\")).getValue();\n+        final Double loginDuration = ((AnalyticsDoubleProperty) properties.get(\"LoginDuration\")).getValue();\n+        final Integer profileCount = ((AnalyticsIntegerProperty) properties.get(\"ProfileCount\")).getValue();\n+\n+        assertEquals(4, properties.size());\n+        assertEquals(\"EDT\", timeZone);\n+        assertEquals(Boolean.FALSE, inGeoFence);\n+        assertEquals(Double.valueOf(98.36), loginDuration);\n+        assertEquals(Integer.valueOf(2), profileCount);\n+    }\n+\n+    @Test\n+    public void builderCanAcceptTypesThatImplementAnalyticsPropertiesBehavior() {\n+        // Arrange: Build a FooProperty and pass it to an AnalyticsProperties Builder\n+        Date date = new Date();\n+        FooProperty property = new FooProperty(date);\n+        AnalyticsProperties properties = AnalyticsProperties.builder()\n+                .add(\"SignUpDate\", property)\n+                .build();\n+\n+        // Assert: Ensure we can retrieve the FooProperty value\n+        assertEquals(date, properties.get(\"SignUpDate\").getValue());\n+    }\n+\n+    @Test\n+    public void getRaisesNoSuchElementExceptionWhenPropertyNotFound() {\n+        AnalyticsProperties properties = AnalyticsProperties.builder().build();\n+\n+        assertThrows(NoSuchElementException.class, () -> {\n+            properties.get(\"key-that-doesnt-exist\");\n+        });\n+    }\n+\n+    class FooProperty implements AnalyticsPropertyBehavior<Date> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "23b6445b85b079c8517a5bd36eef900713a96fa0"}, "originalPosition": 74}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1400, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}