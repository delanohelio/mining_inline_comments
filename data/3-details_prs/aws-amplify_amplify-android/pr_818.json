{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg0MjI4OTg1", "number": 818, "title": "fix(API): Fixes owner auth subscribe with email/phone sign-in", "bodyText": "Addresses #749 by ensuring that we send the value of \"username\" for subscriptions in owner-based auth situations which AppSync is checking against from the Access token.\nBy submitting this pull request, I confirm that my contribution is made under the terms of the Apache 2.0 license.", "createdAt": "2020-09-10T19:07:51Z", "url": "https://github.com/aws-amplify/amplify-android/pull/818", "merged": true, "mergeCommit": {"oid": "e77bc99c78dc4d9151a78e6d4c17f977fcf45ac6"}, "closed": true, "closedAt": "2020-09-11T13:13:04Z", "author": {"login": "TrekSoft"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdHlot6AH2gAyNDg0MjI4OTg1OmUxY2QwMTU3NDM0M2MzZDBhNjFlMTljZGRlZDg5MDMwNzYwNGRhMGU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdH4RKUAFqTQ4Njk2NTMyMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e1cd01574343c3d0a61e19cdded890307604da0e", "author": {"user": {"login": "TrekSoft", "name": "David Daudelin"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/e1cd01574343c3d0a61e19cdded890307604da0e", "committedDate": "2020-09-10T19:05:40Z", "message": "fix(API): Fixes owner auth subscribe with email/phone sign-in"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2NzM1NDA0", "url": "https://github.com/aws-amplify/amplify-android/pull/818#pullrequestreview-486735404", "createdAt": "2020-09-11T11:47:30Z", "commit": {"oid": "e1cd01574343c3d0a61e19cdded890307604da0e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2OTY1MzIw", "url": "https://github.com/aws-amplify/amplify-android/pull/818#pullrequestreview-486965320", "createdAt": "2020-09-11T16:48:07Z", "commit": {"oid": "e1cd01574343c3d0a61e19cdded890307604da0e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxNjo0ODowN1rOHQmSQw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxNjo0ODowN1rOHQmSQw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzE2NjUzMQ==", "bodyText": "Is this a real token? Could you return RandomString.string() here? Or, could you put this string content into src/test/resources/api/auth-token.txt, and read it in here using the Resources.readAsString(...)?", "url": "https://github.com/aws-amplify/amplify-android/pull/818#discussion_r487166531", "createdAt": "2020-09-11T16:48:07Z", "author": {"login": "jamesonwilliams"}, "path": "aws-api/src/test/java/com/amplifyframework/api/aws/AWSApiPluginTest.java", "diffHunk": "@@ -100,7 +100,19 @@ public void setup() throws ApiException, IOException, JSONException {\n         webServer.start(8080);\n         baseUrl = webServer.url(\"/\");\n         authProvider = mock(CognitoUserPoolsAuthProvider.class);\n-        when(authProvider.getUsername()).thenReturn(\"johndoe\");\n+        // Returns a sample access token with the username value of \"Facebook_100003287976754\"\n+        when(authProvider.getLatestAuthToken()).thenReturn(\"eyJraWQiOiJnMmtYXC8rSXRmNFwvcmwyODhBSTNCMk9kNDVsdEU\" +\n+                        \"4ZUtIZmF0RkNRWEVDMmM9IiwiYWxnIjoiUlMyNTYifQ.eyJzdWIiOiI2YTRjZjMxMi01MWM5LTQyNjAtYjRhZC0wMDdj\" +\n+                        \"MDdkZDdmMzMiLCJjb2duaXRvOmdyb3VwcyI6WyJ1cy13ZXN0LTJfejVWM1ZQa1h5X0ZhY2Vib29rIiwiQWRtaW4iXSwi\" +\n+                        \"dG9rZW5fdXNlIjoiYWNjZXNzIiwic2NvcGUiOiJhd3MuY29nbml0by5zaWduaW4udXNlci5hZG1pbiBwaG9uZSBvcGVu\" +\n+                        \"aWQgcHJvZmlsZSBlbWFpbCIsImF1dGhfdGltZSI6MTU5OTY4MTk2MywiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRw\" +\n+                        \"LnVzLXdlc3QtMi5hbWF6b25hd3MuY29tXC91cy13ZXN0LTJfejVWM1ZQa1h5IiwiZXhwIjoxNTk5NzU3OTE3LCJpYXQi\" +\n+                        \"OjE1OTk3NTQzMTcsInZlcnNpb24iOjIsImp0aSI6ImQyNzYxMDg3LTliNmYtNDYzMS1iYWJjLTY0ZWQzM2UyNGQzMiIs\" +\n+                        \"ImNsaWVudF9pZCI6IjNjZDdjcGJ1N2huYzlka2xoMmZsamg3am0xIiwidXNlcm5hbWUiOiJGYWNlYm9va18xMDAwMDMy\" +\n+                        \"ODc5NzY3NTQifQ.gtINNiuOhAPG5Z-4KgT7Hppw9wYyoVF8lvFhGdAWPi0c3sQvGpTLlBlgh8NqaELai84fTOTsQT4sH\" +\n+                        \"YwP31ik58qrIp7QQ8IOU91mXy2i3-ygsIWGEetvNaMd5ICXhTWUxg7gpKxsJQbrtH88DkO3NxAQSpGoUzlkKzJILekNn\" +\n+                        \"H5wC5drUocg_1yHTYfwsG23QVsm-cHvNsxkzRzjS3Gr18x5jTuhflr24yOGl_fdRas8-kA5q_vMuKclnNuxCztNHOBGk\" +\n+                        \"h-sfTaOh6C-FstV2GOuwtEknlCQqLdJUVSMQO2M4hTScGPXOr2Gz9xTX9QY0D9eNL7806LYObm5nmRd7g\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e1cd01574343c3d0a61e19cdded890307604da0e"}, "originalPosition": 17}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1682, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}