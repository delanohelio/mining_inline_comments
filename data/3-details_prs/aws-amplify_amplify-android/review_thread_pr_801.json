{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc5OTU5Mjgy", "number": 801, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQxODozNTozN1rOEgfOaA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQxOTo1MDo1MlrOEggZGA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAyNTAxNDgwOnYy", "diffSide": "RIGHT", "path": "core/src/main/java/com/amplifyframework/util/FieldFinder.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQxODozNTozN1rOHNYIGg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMDowNTowN1rOHNaOPg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzc4ODgyNg==", "bodyText": "@saltonmassally, @richardmcclellan, @jamesonwilliams I know this wasn't flagged on the original PR but just wanted to double check we're good changing this public method name since it would be a breaking change if anyone was currently using it?", "url": "https://github.com/aws-amplify/amplify-android/pull/801#discussion_r483788826", "createdAt": "2020-09-04T18:35:37Z", "author": {"login": "TrekSoft"}, "path": "core/src/main/java/com/amplifyframework/util/FieldFinder.java", "diffHunk": "@@ -45,21 +46,40 @@ private FieldFinder() {\n      * @return set of fields\n      */\n     @NonNull\n-    public static List<Field> findFieldsIn(@NonNull Class<?> clazz) {\n+    public static List<Field> findModelFieldsIn(@NonNull Class<?> clazz) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "748ae601b757255f267a62b0bcbaa3bb49716ad7"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzgxNzM4OQ==", "bodyText": "No one should be using our FieldFinder; it's an internal utility in the context of the project.", "url": "https://github.com/aws-amplify/amplify-android/pull/801#discussion_r483817389", "createdAt": "2020-09-04T19:49:24Z", "author": {"login": "jamesonwilliams"}, "path": "core/src/main/java/com/amplifyframework/util/FieldFinder.java", "diffHunk": "@@ -45,21 +46,40 @@ private FieldFinder() {\n      * @return set of fields\n      */\n     @NonNull\n-    public static List<Field> findFieldsIn(@NonNull Class<?> clazz) {\n+    public static List<Field> findModelFieldsIn(@NonNull Class<?> clazz) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzc4ODgyNg=="}, "originalCommit": {"oid": "748ae601b757255f267a62b0bcbaa3bb49716ad7"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzgyMzE2Ng==", "bodyText": "@jamesonwilliams makes sense.  I just removed my commit entirely for now.", "url": "https://github.com/aws-amplify/amplify-android/pull/801#discussion_r483823166", "createdAt": "2020-09-04T20:05:07Z", "author": {"login": "richardmcclellan"}, "path": "core/src/main/java/com/amplifyframework/util/FieldFinder.java", "diffHunk": "@@ -45,21 +46,40 @@ private FieldFinder() {\n      * @return set of fields\n      */\n     @NonNull\n-    public static List<Field> findFieldsIn(@NonNull Class<?> clazz) {\n+    public static List<Field> findModelFieldsIn(@NonNull Class<?> clazz) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzc4ODgyNg=="}, "originalCommit": {"oid": "748ae601b757255f267a62b0bcbaa3bb49716ad7"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAyNTIwMzQ3OnYy", "diffSide": "RIGHT", "path": "core/src/main/java/com/amplifyframework/util/FieldFinder.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQxOTo0OTo1OFrOHNZ4bw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQxOTo0OTo1OFrOHNZ4bw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzgxNzU4Mw==", "bodyText": "Are these different?", "url": "https://github.com/aws-amplify/amplify-android/pull/801#discussion_r483817583", "createdAt": "2020-09-04T19:49:58Z", "author": {"login": "jamesonwilliams"}, "path": "core/src/main/java/com/amplifyframework/util/FieldFinder.java", "diffHunk": "@@ -39,44 +40,52 @@ private FieldFinder() {\n     }\n \n     /**\n-     * Get a set of all the fields of a class that are\n-     * annotated with {@link ModelField} annotation.\n+     * Get a set of all the fields of a class that are annotated with {@link ModelField} annotation.\n+     *\n+     * @deprecated Use {@link #findModelFieldsIn} instead.\n+     * @param clazz the Class object.\n+     * @return set of fields.\n+     */\n+    @NonNull\n+    @Deprecated\n+    public static List<Field> findFieldsIn(@NonNull Class<?> clazz) {\n+        return findModelFieldsIn(clazz);\n+    }\n+\n+    /**\n+     * Get a set of all the fields of a class that are annotated with {@link ModelField} annotation.\n      *\n      * @param clazz the Class object.\n      * @return set of fields\n      */\n     @NonNull\n     public static List<Field> findModelFieldsIn(@NonNull Class<?> clazz) {\n-        final List<Field> fields = new ArrayList<>();\n-        Class<?> fieldContainerClazz = clazz;\n-        while (fieldContainerClazz != null) {\n-            for (Field field : fieldContainerClazz.getDeclaredFields()) {\n-                if (field.isAnnotationPresent(ModelField.class)) {\n-                    fields.add(field);\n-                }\n-            }\n-            fieldContainerClazz = fieldContainerClazz.getSuperclass();\n-        }\n-        Collections.sort(fields, (o1, o2) -> o1.getName().compareTo(o2.getName()));\n-        return Immutable.of(fields);\n+        return findFieldsIn(clazz, field -> field.isAnnotationPresent(ModelField.class));\n     }\n \n     /**\n-     * Helper for finding all fields in a class without limiting limiting to {@link ModelField}.\n+     * Helper for finding all fields in a class without limiting to {@link ModelField}.\n      * @param clazz clazz the Class object.\n      * @return set of fields\n      */\n     @NonNull\n     public static List<Field> findAllFieldsIn(@NonNull Class<?> clazz) {\n+        return findFieldsIn(clazz, field -> true);\n+    }\n+\n+    @NonNull\n+    private static List<Field> findFieldsIn(@NonNull Class<?> clazz, Predicate<Field> predicate) {\n         final List<Field> fields = new ArrayList<>();\n         Class<?> fieldContainerClazz = clazz;\n         while (fieldContainerClazz != null) {\n             for (Field field : fieldContainerClazz.getDeclaredFields()) {\n-                fields.add(field);\n+                if(predicate.test(field)) {\n+                    fields.add(field);\n+                }\n             }\n             fieldContainerClazz = fieldContainerClazz.getSuperclass();\n         }\n-        Collections.sort(fields, Comparator.comparing(Field::getName));\n+        Collections.sort(fields, (o1, o2) -> o1.getName().compareTo(o2.getName()));", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 84}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAyNTIwNDAyOnYy", "diffSide": "RIGHT", "path": "core/src/main/java/com/amplifyframework/util/FieldFinder.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQxOTo1MDowN1rOHNZ4uA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQxOTo1MDowN1rOHNZ4uA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzgxNzY1Ng==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            if(predicate.test(field)) {\n          \n          \n            \n                            if (predicate.test(field)) {", "url": "https://github.com/aws-amplify/amplify-android/pull/801#discussion_r483817656", "createdAt": "2020-09-04T19:50:07Z", "author": {"login": "jamesonwilliams"}, "path": "core/src/main/java/com/amplifyframework/util/FieldFinder.java", "diffHunk": "@@ -39,44 +40,52 @@ private FieldFinder() {\n     }\n \n     /**\n-     * Get a set of all the fields of a class that are\n-     * annotated with {@link ModelField} annotation.\n+     * Get a set of all the fields of a class that are annotated with {@link ModelField} annotation.\n+     *\n+     * @deprecated Use {@link #findModelFieldsIn} instead.\n+     * @param clazz the Class object.\n+     * @return set of fields.\n+     */\n+    @NonNull\n+    @Deprecated\n+    public static List<Field> findFieldsIn(@NonNull Class<?> clazz) {\n+        return findModelFieldsIn(clazz);\n+    }\n+\n+    /**\n+     * Get a set of all the fields of a class that are annotated with {@link ModelField} annotation.\n      *\n      * @param clazz the Class object.\n      * @return set of fields\n      */\n     @NonNull\n     public static List<Field> findModelFieldsIn(@NonNull Class<?> clazz) {\n-        final List<Field> fields = new ArrayList<>();\n-        Class<?> fieldContainerClazz = clazz;\n-        while (fieldContainerClazz != null) {\n-            for (Field field : fieldContainerClazz.getDeclaredFields()) {\n-                if (field.isAnnotationPresent(ModelField.class)) {\n-                    fields.add(field);\n-                }\n-            }\n-            fieldContainerClazz = fieldContainerClazz.getSuperclass();\n-        }\n-        Collections.sort(fields, (o1, o2) -> o1.getName().compareTo(o2.getName()));\n-        return Immutable.of(fields);\n+        return findFieldsIn(clazz, field -> field.isAnnotationPresent(ModelField.class));\n     }\n \n     /**\n-     * Helper for finding all fields in a class without limiting limiting to {@link ModelField}.\n+     * Helper for finding all fields in a class without limiting to {@link ModelField}.\n      * @param clazz clazz the Class object.\n      * @return set of fields\n      */\n     @NonNull\n     public static List<Field> findAllFieldsIn(@NonNull Class<?> clazz) {\n+        return findFieldsIn(clazz, field -> true);\n+    }\n+\n+    @NonNull\n+    private static List<Field> findFieldsIn(@NonNull Class<?> clazz, Predicate<Field> predicate) {\n         final List<Field> fields = new ArrayList<>();\n         Class<?> fieldContainerClazz = clazz;\n         while (fieldContainerClazz != null) {\n             for (Field field : fieldContainerClazz.getDeclaredFields()) {\n-                fields.add(field);\n+                if(predicate.test(field)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 77}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAyNTIwNDkyOnYy", "diffSide": "RIGHT", "path": "core/src/main/java/com/amplifyframework/util/FieldFinder.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQxOTo1MDozMFrOHNZ5Ow==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQxOTo1MDozMFrOHNZ5Ow==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzgxNzc4Nw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change", "url": "https://github.com/aws-amplify/amplify-android/pull/801#discussion_r483817787", "createdAt": "2020-09-04T19:50:30Z", "author": {"login": "jamesonwilliams"}, "path": "core/src/main/java/com/amplifyframework/util/FieldFinder.java", "diffHunk": "@@ -17,15 +17,16 @@\n \n import androidx.annotation.NonNull;\n import androidx.annotation.Nullable;\n+import androidx.core.util.Predicate;\n \n import com.amplifyframework.core.model.annotations.ModelField;\n \n import java.lang.reflect.Field;\n import java.util.ArrayList;\n import java.util.Collections;\n-import java.util.Comparator;\n import java.util.List;\n \n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAyNTIwNjAwOnYy", "diffSide": "RIGHT", "path": "core/src/main/java/com/amplifyframework/util/FieldFinder.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQxOTo1MDo1M1rOHNZ5yw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQxOTo1MDo1M1rOHNZ5yw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzgxNzkzMQ==", "bodyText": "We have various functional interfaces like this defined in our own library, I think. Should we use AndroidX's? Or one of ours?", "url": "https://github.com/aws-amplify/amplify-android/pull/801#discussion_r483817931", "createdAt": "2020-09-04T19:50:53Z", "author": {"login": "jamesonwilliams"}, "path": "core/src/main/java/com/amplifyframework/util/FieldFinder.java", "diffHunk": "@@ -17,15 +17,16 @@\n \n import androidx.annotation.NonNull;\n import androidx.annotation.Nullable;\n+import androidx.core.util.Predicate;", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 913, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}