{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE5MDY1Njgy", "number": 479, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xN1QxMDo0NDozMFrOD9KAZQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xN1QxMDo0NTozNlrOD9KAvg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY1NDUzNjY5OnYy", "diffSide": "RIGHT", "path": "aws-datastore/src/main/java/com/amplifyframework/datastore/storage/sqlite/SQLiteStorageAdapter.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xN1QxMDo0NDozMFrOGWf-Vw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xN1QxMjo1MjozMFrOGWgufw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjI0NTcxOQ==", "bodyText": "Outside of the bounds of this PR, but we don't need to actually transit data from SQLite here. You could change \"*\" to \"1\" given all we are doing is checking the count of returned rows in the cursor.", "url": "https://github.com/aws-amplify/amplify-android/pull/479#discussion_r426245719", "createdAt": "2020-05-17T10:44:30Z", "author": {"login": "jpignata"}, "path": "aws-datastore/src/main/java/com/amplifyframework/datastore/storage/sqlite/SQLiteStorageAdapter.java", "diffHunk": "@@ -732,16 +732,11 @@ private boolean dataExistsInSQLiteTable(\n             @NonNull String columnName,\n             @NonNull String columnValue) {\n         // SELECT * FROM '{tableName}' WHERE {columnName} = '{columnValue}'\n-        final String queryString = new StringBuilder()\n-                .append(SqlKeyword.SELECT).append(SqlKeyword.DELIMITER)\n-                .append(\"*\").append(SqlKeyword.DELIMITER)\n-                .append(SqlKeyword.FROM).append(SqlKeyword.DELIMITER)\n-                .append(Quotes.wrapInSingle(tableName)).append(SqlKeyword.DELIMITER)\n-                .append(SqlKeyword.WHERE).append(SqlKeyword.DELIMITER)\n-                .append(columnName).append(SqlKeyword.DELIMITER)\n-                .append(SqlKeyword.EQUAL).append(SqlKeyword.DELIMITER)\n-                .append(Quotes.wrapInSingle(columnValue))\n-                .toString();\n+        final String queryString = \"\" +\n+            SqlKeyword.SELECT + SqlKeyword.DELIMITER + \"*\" + SqlKeyword.DELIMITER +", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d9209c669bc19810dec0ae27428268f3a36b907b"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjI1ODA0Nw==", "bodyText": "Aha! TIL https://stackoverflow.com/a/7171072/695787\nLet's do it in a separate PR", "url": "https://github.com/aws-amplify/amplify-android/pull/479#discussion_r426258047", "createdAt": "2020-05-17T12:52:30Z", "author": {"login": "jamesonwilliams"}, "path": "aws-datastore/src/main/java/com/amplifyframework/datastore/storage/sqlite/SQLiteStorageAdapter.java", "diffHunk": "@@ -732,16 +732,11 @@ private boolean dataExistsInSQLiteTable(\n             @NonNull String columnName,\n             @NonNull String columnValue) {\n         // SELECT * FROM '{tableName}' WHERE {columnName} = '{columnValue}'\n-        final String queryString = new StringBuilder()\n-                .append(SqlKeyword.SELECT).append(SqlKeyword.DELIMITER)\n-                .append(\"*\").append(SqlKeyword.DELIMITER)\n-                .append(SqlKeyword.FROM).append(SqlKeyword.DELIMITER)\n-                .append(Quotes.wrapInSingle(tableName)).append(SqlKeyword.DELIMITER)\n-                .append(SqlKeyword.WHERE).append(SqlKeyword.DELIMITER)\n-                .append(columnName).append(SqlKeyword.DELIMITER)\n-                .append(SqlKeyword.EQUAL).append(SqlKeyword.DELIMITER)\n-                .append(Quotes.wrapInSingle(columnValue))\n-                .toString();\n+        final String queryString = \"\" +\n+            SqlKeyword.SELECT + SqlKeyword.DELIMITER + \"*\" + SqlKeyword.DELIMITER +", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjI0NTcxOQ=="}, "originalCommit": {"oid": "d9209c669bc19810dec0ae27428268f3a36b907b"}, "originalPosition": 24}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY1NDUzNzU4OnYy", "diffSide": "LEFT", "path": "aws-datastore/src/main/java/com/amplifyframework/datastore/storage/sqlite/SQLiteStorageAdapter.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xN1QxMDo0NTozNlrOGWf-zw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xN1QxMjo1MTozMVrOGWguKQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjI0NTgzOQ==", "bodyText": "Unused?", "url": "https://github.com/aws-amplify/amplify-android/pull/479#discussion_r426245839", "createdAt": "2020-05-17T10:45:36Z", "author": {"login": "jpignata"}, "path": "aws-datastore/src/main/java/com/amplifyframework/datastore/storage/sqlite/SQLiteStorageAdapter.java", "diffHunk": "@@ -785,11 +774,6 @@ private Completable updateModels() {\n         return gson.getAdapter(itemClass).fromJson(modelInJsonFormat);\n     }\n \n-    @VisibleForTesting\n-    Cursor getQueryAllCursor(@NonNull String tableName) throws DataStoreException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d9209c669bc19810dec0ae27428268f3a36b907b"}, "originalPosition": 83}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjI1Nzk2MQ==", "bodyText": "'Twas, 'twas", "url": "https://github.com/aws-amplify/amplify-android/pull/479#discussion_r426257961", "createdAt": "2020-05-17T12:51:31Z", "author": {"login": "jamesonwilliams"}, "path": "aws-datastore/src/main/java/com/amplifyframework/datastore/storage/sqlite/SQLiteStorageAdapter.java", "diffHunk": "@@ -785,11 +774,6 @@ private Completable updateModels() {\n         return gson.getAdapter(itemClass).fromJson(modelInJsonFormat);\n     }\n \n-    @VisibleForTesting\n-    Cursor getQueryAllCursor(@NonNull String tableName) throws DataStoreException {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjI0NTgzOQ=="}, "originalCommit": {"oid": "d9209c669bc19810dec0ae27428268f3a36b907b"}, "originalPosition": 83}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1260, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}