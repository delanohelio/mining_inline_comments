{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk3Mzc3NTMy", "number": 340, "title": "[aws-datastore] Re-provision if system models change", "bodyText": "There was some exiting logic to blow away the SQL tables if the user's\nmodel structure changes (as informed by the version in the model\nprovider).\nHowever, no such logic existed for changes to the system models\nprovider.\nTo acommodate this, form a compound provider of both, and consider its\nversion, instead.\nBy submitting this pull request, I confirm that my contribution is made under the terms of the Apache 2.0 license.", "createdAt": "2020-04-02T06:15:12Z", "url": "https://github.com/aws-amplify/amplify-android/pull/340", "merged": true, "mergeCommit": {"oid": "8741acd94fc59b326c0ecd8e7323f2cf2f39a65f"}, "closed": true, "closedAt": "2020-04-02T22:22:26Z", "author": {"login": "jamesonwilliams"}, "timelineItems": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcTl-QiAH2gAyMzk3Mzc3NTMyOmY0OGM2OWQyOWE3NzA0MjhiNDc5MjVjN2MwNWE4MjQxMzFjMTRlYWI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcTzxQQAFqTM4NjgxMTM1Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "f48c69d29a770428b47925c7c05a824131c14eab", "author": {"user": {"login": "jamesonwilliams", "name": "Jameson Williams"}}, "url": "https://github.com/aws-amplify/amplify-android/commit/f48c69d29a770428b47925c7c05a824131c14eab", "committedDate": "2020-04-02T06:05:08Z", "message": "[aws-datastore] Reprovision if system models change\n\nThere was some exiting logic to blow away the SQL tables if the user's\nmodel structure changes (as informed by the version in the model\nprovider).\n\nHowever, no such logic existed for changes to the system models\nprovider.\n\nTo accomodate this, form a compound provider of both, and consider its\nversion, instead."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg2ODExMzU2", "url": "https://github.com/aws-amplify/amplify-android/pull/340#pullrequestreview-386811356", "createdAt": "2020-04-02T22:07:09Z", "commit": {"oid": "f48c69d29a770428b47925c7c05a824131c14eab"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQyMjowNzowOVrOF_-M9Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQyMjowNzowOVrOF_-M9Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjYyMzczMw==", "bodyText": "This is nice! LGTM", "url": "https://github.com/aws-amplify/amplify-android/pull/340#discussion_r402623733", "createdAt": "2020-04-02T22:07:09Z", "author": {"login": "raphkim"}, "path": "aws-datastore/src/main/java/com/amplifyframework/datastore/storage/sqlite/SQLiteStorageAdapter.java", "diffHunk": "@@ -141,8 +140,7 @@ private SQLiteStorageAdapter(\n             ModelProvider userModelsProvider,\n             ModelProvider systemModelsProvider) {\n         this.modelSchemaRegistry = modelSchemaRegistry;\n-        this.userModelsProvider = userModelsProvider;\n-        this.systemModelsProvider = systemModelsProvider;\n+        this.modelsProvider = CompoundModelProvider.of(userModelsProvider, systemModelsProvider);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f48c69d29a770428b47925c7c05a824131c14eab"}, "originalPosition": 27}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2636, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}