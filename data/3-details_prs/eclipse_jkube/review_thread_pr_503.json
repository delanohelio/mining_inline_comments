{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI4MDU1MzIx", "number": 503, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxMjozMzo0OVrOFAOC6Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxMjozNzo1OFrOFAOJsA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM1Nzc0NDQxOnYy", "diffSide": "RIGHT", "path": "jkube-kit/build/service/docker/src/main/java/org/eclipse/jkube/kit/build/service/docker/config/handler/property/PropertyConfigHandler.java", "isResolved": true, "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxMjozMzo0OVrOH-ZcdA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxNDo1ODowNVrOH-gaNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTE5MDY0NA==", "bodyText": "Why is implementation here different to that of DMP?\nhttps://github.com/fabric8io/docker-maven-plugin/blob/e7fefdaddd99294d5842ef8c5b16070ce230d29e/src/main/java/io/fabric8/maven/docker/config/handler/property/PropertyConfigHandler.java#L141", "url": "https://github.com/eclipse/jkube/pull/503#discussion_r535190644", "createdAt": "2020-12-03T12:33:49Z", "author": {"login": "manusa"}, "path": "jkube-kit/build/service/docker/src/main/java/org/eclipse/jkube/kit/build/service/docker/config/handler/property/PropertyConfigHandler.java", "diffHunk": "@@ -229,6 +232,7 @@ private BuildConfiguration extractBuildConfiguration(ImageConfiguration fromConf\n                 .cmd(extractArguments(valueProvider, CMD, valueOrNull(config, BuildConfiguration::getCmd)))\n                 .cleanup(valueProvider.getString(CLEANUP, valueOrNull(config, BuildConfiguration::getCleanup)))\n                 .nocache(valueProvider.getBoolean(NOCACHE, valueOrNull(config, BuildConfiguration::getNocache)))\n+                .cacheFrom(extractCacheFrom(valueProvider.getString(CACHEFROM, config == null ? null : (config.getCacheFrom() == null ? null : config.getCacheFrom().toString()))))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5e3571f4072f802fadc45508b6be9fdb28a363c7"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTE5MjgyNg==", "bodyText": "We're generating builders via lombok, I couldn't add a custom builder method like done in dmp: https://github.com/fabric8io/docker-maven-plugin/blob/e7fefdaddd99294d5842ef8c5b16070ce230d29e/src/main/java/io/fabric8/maven/docker/config/BuildImageConfiguration.java#L465", "url": "https://github.com/eclipse/jkube/pull/503#discussion_r535192826", "createdAt": "2020-12-03T12:37:18Z", "author": {"login": "rohanKanojia"}, "path": "jkube-kit/build/service/docker/src/main/java/org/eclipse/jkube/kit/build/service/docker/config/handler/property/PropertyConfigHandler.java", "diffHunk": "@@ -229,6 +232,7 @@ private BuildConfiguration extractBuildConfiguration(ImageConfiguration fromConf\n                 .cmd(extractArguments(valueProvider, CMD, valueOrNull(config, BuildConfiguration::getCmd)))\n                 .cleanup(valueProvider.getString(CLEANUP, valueOrNull(config, BuildConfiguration::getCleanup)))\n                 .nocache(valueProvider.getBoolean(NOCACHE, valueOrNull(config, BuildConfiguration::getNocache)))\n+                .cacheFrom(extractCacheFrom(valueProvider.getString(CACHEFROM, config == null ? null : (config.getCacheFrom() == null ? null : config.getCacheFrom().toString()))))", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTE5MDY0NA=="}, "originalCommit": {"oid": "5e3571f4072f802fadc45508b6be9fdb28a363c7"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTE5Mzc4OA==", "bodyText": "https://github.com/eclipse/jkube/pull/503/files#r535193232", "url": "https://github.com/eclipse/jkube/pull/503#discussion_r535193788", "createdAt": "2020-12-03T12:38:51Z", "author": {"login": "manusa"}, "path": "jkube-kit/build/service/docker/src/main/java/org/eclipse/jkube/kit/build/service/docker/config/handler/property/PropertyConfigHandler.java", "diffHunk": "@@ -229,6 +232,7 @@ private BuildConfiguration extractBuildConfiguration(ImageConfiguration fromConf\n                 .cmd(extractArguments(valueProvider, CMD, valueOrNull(config, BuildConfiguration::getCmd)))\n                 .cleanup(valueProvider.getString(CLEANUP, valueOrNull(config, BuildConfiguration::getCleanup)))\n                 .nocache(valueProvider.getBoolean(NOCACHE, valueOrNull(config, BuildConfiguration::getNocache)))\n+                .cacheFrom(extractCacheFrom(valueProvider.getString(CACHEFROM, config == null ? null : (config.getCacheFrom() == null ? null : config.getCacheFrom().toString()))))", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTE5MDY0NA=="}, "originalCommit": {"oid": "5e3571f4072f802fadc45508b6be9fdb28a363c7"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTE5NDIyOQ==", "bodyText": "Also, this class (IIRC) is completely useless right now", "url": "https://github.com/eclipse/jkube/pull/503#discussion_r535194229", "createdAt": "2020-12-03T12:39:32Z", "author": {"login": "manusa"}, "path": "jkube-kit/build/service/docker/src/main/java/org/eclipse/jkube/kit/build/service/docker/config/handler/property/PropertyConfigHandler.java", "diffHunk": "@@ -229,6 +232,7 @@ private BuildConfiguration extractBuildConfiguration(ImageConfiguration fromConf\n                 .cmd(extractArguments(valueProvider, CMD, valueOrNull(config, BuildConfiguration::getCmd)))\n                 .cleanup(valueProvider.getString(CLEANUP, valueOrNull(config, BuildConfiguration::getCleanup)))\n                 .nocache(valueProvider.getBoolean(NOCACHE, valueOrNull(config, BuildConfiguration::getNocache)))\n+                .cacheFrom(extractCacheFrom(valueProvider.getString(CACHEFROM, config == null ? null : (config.getCacheFrom() == null ? null : config.getCacheFrom().toString()))))", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTE5MDY0NA=="}, "originalCommit": {"oid": "5e3571f4072f802fadc45508b6be9fdb28a363c7"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTI5NjQ3OQ==", "bodyText": "Sorry, I don't understand this. Are you talking about PropertyConfigHandler?", "url": "https://github.com/eclipse/jkube/pull/503#discussion_r535296479", "createdAt": "2020-12-03T14:50:13Z", "author": {"login": "rohanKanojia"}, "path": "jkube-kit/build/service/docker/src/main/java/org/eclipse/jkube/kit/build/service/docker/config/handler/property/PropertyConfigHandler.java", "diffHunk": "@@ -229,6 +232,7 @@ private BuildConfiguration extractBuildConfiguration(ImageConfiguration fromConf\n                 .cmd(extractArguments(valueProvider, CMD, valueOrNull(config, BuildConfiguration::getCmd)))\n                 .cleanup(valueProvider.getString(CLEANUP, valueOrNull(config, BuildConfiguration::getCleanup)))\n                 .nocache(valueProvider.getBoolean(NOCACHE, valueOrNull(config, BuildConfiguration::getNocache)))\n+                .cacheFrom(extractCacheFrom(valueProvider.getString(CACHEFROM, config == null ? null : (config.getCacheFrom() == null ? null : config.getCacheFrom().toString()))))", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTE5MDY0NA=="}, "originalCommit": {"oid": "5e3571f4072f802fadc45508b6be9fdb28a363c7"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTMwNDc1OQ==", "bodyText": "Yes, I think we have another issue for that. But this class is mostly useless (IIRC). Just for you to keep in mind.", "url": "https://github.com/eclipse/jkube/pull/503#discussion_r535304759", "createdAt": "2020-12-03T14:58:05Z", "author": {"login": "manusa"}, "path": "jkube-kit/build/service/docker/src/main/java/org/eclipse/jkube/kit/build/service/docker/config/handler/property/PropertyConfigHandler.java", "diffHunk": "@@ -229,6 +232,7 @@ private BuildConfiguration extractBuildConfiguration(ImageConfiguration fromConf\n                 .cmd(extractArguments(valueProvider, CMD, valueOrNull(config, BuildConfiguration::getCmd)))\n                 .cleanup(valueProvider.getString(CLEANUP, valueOrNull(config, BuildConfiguration::getCleanup)))\n                 .nocache(valueProvider.getBoolean(NOCACHE, valueOrNull(config, BuildConfiguration::getNocache)))\n+                .cacheFrom(extractCacheFrom(valueProvider.getString(CACHEFROM, config == null ? null : (config.getCacheFrom() == null ? null : config.getCacheFrom().toString()))))", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTE5MDY0NA=="}, "originalCommit": {"oid": "5e3571f4072f802fadc45508b6be9fdb28a363c7"}, "originalPosition": 37}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM1Nzc2MTc2OnYy", "diffSide": "RIGHT", "path": "jkube-kit/config/image/src/main/java/org/eclipse/jkube/kit/config/image/build/BuildConfiguration.java", "isResolved": true, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxMjozNzo1OFrOH-ZmkA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxNjowNjo0NFrOH-kS4A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTE5MzIzMg==", "bodyText": "Given this is a list, to improve the builder, maybe we should make this a @Singular (You'll need to tune the name, because cacheFrom is already singular - not standard)", "url": "https://github.com/eclipse/jkube/pull/503#discussion_r535193232", "createdAt": "2020-12-03T12:37:58Z", "author": {"login": "manusa"}, "path": "jkube-kit/config/image/src/main/java/org/eclipse/jkube/kit/config/image/build/BuildConfiguration.java", "diffHunk": "@@ -228,6 +228,8 @@\n   @Setter(AccessLevel.PRIVATE)\n   private File dockerArchiveFile;\n \n+  private List<String> cacheFrom;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5e3571f4072f802fadc45508b6be9fdb28a363c7"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTI5MTQwMQ==", "bodyText": "Should I rename this to cacheFromList? In Docker REST API spec also has cachefrom name despite it being a JSON array:", "url": "https://github.com/eclipse/jkube/pull/503#discussion_r535291401", "createdAt": "2020-12-03T14:45:50Z", "author": {"login": "rohanKanojia"}, "path": "jkube-kit/config/image/src/main/java/org/eclipse/jkube/kit/config/image/build/BuildConfiguration.java", "diffHunk": "@@ -228,6 +228,8 @@\n   @Setter(AccessLevel.PRIVATE)\n   private File dockerArchiveFile;\n \n+  private List<String> cacheFrom;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTE5MzIzMg=="}, "originalCommit": {"oid": "5e3571f4072f802fadc45508b6be9fdb28a363c7"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTMwNzIwMA==", "bodyText": "No, you need to keep the name so it's compatible with the docs/mojo deserialization (I think).\nIf it's not necessary to keep the name, just rename to caheFroms with a final s. Lombok will generate methods cacheFrom to add entries to the list (in the builder). Also keep in mind that when adding the singular annotation this value will be initialized as an empty list, so whenever we are using the getter, we need to consider the possibility of the list being empty.", "url": "https://github.com/eclipse/jkube/pull/503#discussion_r535307200", "createdAt": "2020-12-03T15:00:09Z", "author": {"login": "manusa"}, "path": "jkube-kit/config/image/src/main/java/org/eclipse/jkube/kit/config/image/build/BuildConfiguration.java", "diffHunk": "@@ -228,6 +228,8 @@\n   @Setter(AccessLevel.PRIVATE)\n   private File dockerArchiveFile;\n \n+  private List<String> cacheFrom;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTE5MzIzMg=="}, "originalCommit": {"oid": "5e3571f4072f802fadc45508b6be9fdb28a363c7"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTM2MzA0MA==", "bodyText": "I think I can go ahead and rename the field to cacheFroms", "url": "https://github.com/eclipse/jkube/pull/503#discussion_r535363040", "createdAt": "2020-12-03T15:59:57Z", "author": {"login": "rohanKanojia"}, "path": "jkube-kit/config/image/src/main/java/org/eclipse/jkube/kit/config/image/build/BuildConfiguration.java", "diffHunk": "@@ -228,6 +228,8 @@\n   @Setter(AccessLevel.PRIVATE)\n   private File dockerArchiveFile;\n \n+  private List<String> cacheFrom;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTE5MzIzMg=="}, "originalCommit": {"oid": "5e3571f4072f802fadc45508b6be9fdb28a363c7"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTM2ODQxNg==", "bodyText": "I really think that this gets populated from the XML provided by <build> element. So probably renaming will break any configuration that uses it. Double check, but I'm afraid name must remain intact.\nYou can configure @Singular to use a different method name @Singular(\"addCacheFrom\") or @Singular(\"cacheFromEntry\") might work well.", "url": "https://github.com/eclipse/jkube/pull/503#discussion_r535368416", "createdAt": "2020-12-03T16:06:44Z", "author": {"login": "manusa"}, "path": "jkube-kit/config/image/src/main/java/org/eclipse/jkube/kit/config/image/build/BuildConfiguration.java", "diffHunk": "@@ -228,6 +228,8 @@\n   @Setter(AccessLevel.PRIVATE)\n   private File dockerArchiveFile;\n \n+  private List<String> cacheFrom;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTE5MzIzMg=="}, "originalCommit": {"oid": "5e3571f4072f802fadc45508b6be9fdb28a363c7"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1845, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}