{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ0MTIwMjQ5", "number": 278, "title": "fix: Properly define + document JKubeProjectAssembly behavior", "bodyText": "Description\n\nAssemblyFileSet supports wildcard includes and excludes\nAssemblyFileSet contains default file and directory modes\nRemoved no longer working descriptor and descriptorRef configs from AssemblyFileSet\nRemoved unsupported assembly .xml descriptors\nRemoved outdated documentation\nxml-config quickstart works as expected\nFixed ControllerEnricher to support xml configured names (just like replicas or image pull policy)\nUpdated Assembly related documentation\nUpdated ibm-javaee8-webprofile-liberty example\n\nType of change\n\n\n Bug fix (non-breaking change which fixes an issue)\n Feature (non-breaking change which adds functionality)\n Breaking change (fix or feature that would cause existing functionality to change\n Chore (non-breaking change which doesn't affect codebase;\ntest, version modification, documentation, etc.)\n\nChecklist\n\n I have read the contributing guidelines\n I signed-off my commit with a user that has signed the Eclipse Contributor Agreement\n I Added CHANGELOG entry\n I have implemented unit tests to cover my changes\n I have updated the documentation accordingly\n No new bugs, code smells, etc. in SonarCloud report\n I tested my code in Kubernetes\n I tested my code in OpenShift", "createdAt": "2020-07-03T15:55:02Z", "url": "https://github.com/eclipse/jkube/pull/278", "merged": true, "mergeCommit": {"oid": "cd475427f59c7df731e57b0516d4e8df0a0e9c3a"}, "closed": true, "closedAt": "2020-07-10T14:36:17Z", "author": {"login": "manusa"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcxV6ibgBqjM1MTE1NTI5MzA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABczjmNfABqjM1MzM4ODEyMjc=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2ff662df996a91ff0f2a2848764da9d510530307", "author": {"user": {"login": "manusa", "name": "Marc Nuri"}}, "url": "https://github.com/eclipse/jkube/commit/2ff662df996a91ff0f2a2848764da9d510530307", "committedDate": "2020-07-03T15:53:33Z", "message": "fix: Properly define + document JKubeProjectAssembly behavior\n\n- Removed unsupported assembly .xml descriptors\n- Removed outdated documentation\n- AssemblyFileSet supports wildcard includes and excludes\n- AssemblyFileSet contains default file and directory modes\n- xml-config quickstart works as expected\n- Fixed *Controller*Enricher to support xml configured names (just like replicas or image pull policy)\n\nSigned-off-by: Marc Nuri <marc@marcnuri.com>"}, "afterCommit": {"oid": "047bffae93f410c5017f930fa69c1f4eb7fcf222", "author": {"user": {"login": "manusa", "name": "Marc Nuri"}}, "url": "https://github.com/eclipse/jkube/commit/047bffae93f410c5017f930fa69c1f4eb7fcf222", "committedDate": "2020-07-03T16:03:49Z", "message": "WIP: TODO, fix documentation, check rest of examples\n\nSigned-off-by: Marc Nuri <marc@marcnuri.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "047bffae93f410c5017f930fa69c1f4eb7fcf222", "author": {"user": {"login": "manusa", "name": "Marc Nuri"}}, "url": "https://github.com/eclipse/jkube/commit/047bffae93f410c5017f930fa69c1f4eb7fcf222", "committedDate": "2020-07-03T16:03:49Z", "message": "WIP: TODO, fix documentation, check rest of examples\n\nSigned-off-by: Marc Nuri <marc@marcnuri.com>"}, "afterCommit": {"oid": "51332fc1b23556b00f18047b8878ec79277e9178", "author": {"user": {"login": "manusa", "name": "Marc Nuri"}}, "url": "https://github.com/eclipse/jkube/commit/51332fc1b23556b00f18047b8878ec79277e9178", "committedDate": "2020-07-06T13:49:49Z", "message": "fix: Properly define + document JKubeProjectAssembly behavior\n\n- AssemblyFileSet supports wildcard includes and excludes\n- AssemblyFileSet contains default file and directory modes\n- Removed no longer working descriptor and descriptorRef configs from AssemblyFileSet\n- Removed unsupported assembly .xml descriptors\n- Removed outdated documentation\n- xml-config quickstart works as expected\n- Fixed *Controller*Enricher to support xml configured names (just like replicas or image pull policy)\n- Updated Assembly related documentation\n- Updated ibm-javaee8-webprofile-liberty example\n\nSigned-off-by: Marc Nuri <marc@marcnuri.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "51332fc1b23556b00f18047b8878ec79277e9178", "author": {"user": {"login": "manusa", "name": "Marc Nuri"}}, "url": "https://github.com/eclipse/jkube/commit/51332fc1b23556b00f18047b8878ec79277e9178", "committedDate": "2020-07-06T13:49:49Z", "message": "fix: Properly define + document JKubeProjectAssembly behavior\n\n- AssemblyFileSet supports wildcard includes and excludes\n- AssemblyFileSet contains default file and directory modes\n- Removed no longer working descriptor and descriptorRef configs from AssemblyFileSet\n- Removed unsupported assembly .xml descriptors\n- Removed outdated documentation\n- xml-config quickstart works as expected\n- Fixed *Controller*Enricher to support xml configured names (just like replicas or image pull policy)\n- Updated Assembly related documentation\n- Updated ibm-javaee8-webprofile-liberty example\n\nSigned-off-by: Marc Nuri <marc@marcnuri.com>"}, "afterCommit": {"oid": "ef8de0095fbcc3bf96ba2bb2756dbdc35c246596", "author": {"user": {"login": "manusa", "name": "Marc Nuri"}}, "url": "https://github.com/eclipse/jkube/commit/ef8de0095fbcc3bf96ba2bb2756dbdc35c246596", "committedDate": "2020-07-06T15:10:09Z", "message": "fix: Properly define + document JKubeProjectAssembly behavior\n\n- AssemblyFileSet supports wildcard includes and excludes\n- AssemblyFileSet contains default file and directory modes\n- Removed no longer working descriptor and descriptorRef configs from AssemblyFileSet\n- Removed unsupported assembly .xml descriptors\n- Removed outdated documentation\n- xml-config quickstart works as expected\n- Fixed *Controller*Enricher to support xml configured names (just like replicas or image pull policy)\n- Updated Assembly related documentation\n- Updated ibm-javaee8-webprofile-liberty example\n\nSigned-off-by: Marc Nuri <marc@marcnuri.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ef8de0095fbcc3bf96ba2bb2756dbdc35c246596", "author": {"user": {"login": "manusa", "name": "Marc Nuri"}}, "url": "https://github.com/eclipse/jkube/commit/ef8de0095fbcc3bf96ba2bb2756dbdc35c246596", "committedDate": "2020-07-06T15:10:09Z", "message": "fix: Properly define + document JKubeProjectAssembly behavior\n\n- AssemblyFileSet supports wildcard includes and excludes\n- AssemblyFileSet contains default file and directory modes\n- Removed no longer working descriptor and descriptorRef configs from AssemblyFileSet\n- Removed unsupported assembly .xml descriptors\n- Removed outdated documentation\n- xml-config quickstart works as expected\n- Fixed *Controller*Enricher to support xml configured names (just like replicas or image pull policy)\n- Updated Assembly related documentation\n- Updated ibm-javaee8-webprofile-liberty example\n\nSigned-off-by: Marc Nuri <marc@marcnuri.com>"}, "afterCommit": {"oid": "4fb2b13b18cc9c5f26e102a85ec8ad756dd8c600", "author": {"user": {"login": "manusa", "name": "Marc Nuri"}}, "url": "https://github.com/eclipse/jkube/commit/4fb2b13b18cc9c5f26e102a85ec8ad756dd8c600", "committedDate": "2020-07-06T15:12:43Z", "message": "fix: Properly define + document JKubeProjectAssembly behavior\n\n- AssemblyFileSet supports wildcard includes and excludes\n- AssemblyFileSet contains default file and directory modes\n- Removed no longer working descriptor and descriptorRef configs from AssemblyFileSet\n- Removed unsupported assembly .xml descriptors\n- Removed outdated documentation\n- xml-config quickstart works as expected\n- Fixed *Controller*Enricher to support xml configured names (just like replicas or image pull policy)\n- Updated Assembly related documentation\n- Updated ibm-javaee8-webprofile-liberty example\n\nSigned-off-by: Marc Nuri <marc@marcnuri.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4fb2b13b18cc9c5f26e102a85ec8ad756dd8c600", "author": {"user": {"login": "manusa", "name": "Marc Nuri"}}, "url": "https://github.com/eclipse/jkube/commit/4fb2b13b18cc9c5f26e102a85ec8ad756dd8c600", "committedDate": "2020-07-06T15:12:43Z", "message": "fix: Properly define + document JKubeProjectAssembly behavior\n\n- AssemblyFileSet supports wildcard includes and excludes\n- AssemblyFileSet contains default file and directory modes\n- Removed no longer working descriptor and descriptorRef configs from AssemblyFileSet\n- Removed unsupported assembly .xml descriptors\n- Removed outdated documentation\n- xml-config quickstart works as expected\n- Fixed *Controller*Enricher to support xml configured names (just like replicas or image pull policy)\n- Updated Assembly related documentation\n- Updated ibm-javaee8-webprofile-liberty example\n\nSigned-off-by: Marc Nuri <marc@marcnuri.com>"}, "afterCommit": {"oid": "b1990afa96db340124e6f3d54ee18975acf6a5df", "author": {"user": {"login": "manusa", "name": "Marc Nuri"}}, "url": "https://github.com/eclipse/jkube/commit/b1990afa96db340124e6f3d54ee18975acf6a5df", "committedDate": "2020-07-06T15:30:43Z", "message": "fix: Properly define + document JKubeProjectAssembly behavior\n\n- AssemblyFileSet supports wildcard includes and excludes\n- AssemblyFileSet contains default file and directory modes\n- Removed no longer working descriptor and descriptorRef configs from AssemblyFileSet\n- Removed unsupported assembly .xml descriptors\n- Removed outdated documentation\n- xml-config quickstart works as expected\n- Fixed *Controller*Enricher to support xml configured names (just like replicas or image pull policy)\n- Updated Assembly related documentation\n- Updated ibm-javaee8-webprofile-liberty example\n\nSigned-off-by: Marc Nuri <marc@marcnuri.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b1990afa96db340124e6f3d54ee18975acf6a5df", "author": {"user": {"login": "manusa", "name": "Marc Nuri"}}, "url": "https://github.com/eclipse/jkube/commit/b1990afa96db340124e6f3d54ee18975acf6a5df", "committedDate": "2020-07-06T15:30:43Z", "message": "fix: Properly define + document JKubeProjectAssembly behavior\n\n- AssemblyFileSet supports wildcard includes and excludes\n- AssemblyFileSet contains default file and directory modes\n- Removed no longer working descriptor and descriptorRef configs from AssemblyFileSet\n- Removed unsupported assembly .xml descriptors\n- Removed outdated documentation\n- xml-config quickstart works as expected\n- Fixed *Controller*Enricher to support xml configured names (just like replicas or image pull policy)\n- Updated Assembly related documentation\n- Updated ibm-javaee8-webprofile-liberty example\n\nSigned-off-by: Marc Nuri <marc@marcnuri.com>"}, "afterCommit": {"oid": "71f6c1d0c1706b9e4f888078f620ceb75521e47b", "author": {"user": {"login": "manusa", "name": "Marc Nuri"}}, "url": "https://github.com/eclipse/jkube/commit/71f6c1d0c1706b9e4f888078f620ceb75521e47b", "committedDate": "2020-07-08T11:46:33Z", "message": "fix: Properly define + document JKubeProjectAssembly behavior\n\n- AssemblyFileSet supports wildcard includes and excludes\n- AssemblyFileSet contains default file and directory modes\n- Removed no longer working descriptor and descriptorRef configs from AssemblyFileSet\n- Removed unsupported assembly .xml descriptors\n- Removed outdated documentation\n- xml-config quickstart works as expected\n- Fixed *Controller*Enricher to support xml configured names (just like replicas or image pull policy)\n- Updated Assembly related documentation\n- Updated ibm-javaee8-webprofile-liberty example\n\nSigned-off-by: Marc Nuri <marc@marcnuri.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "71f6c1d0c1706b9e4f888078f620ceb75521e47b", "author": {"user": {"login": "manusa", "name": "Marc Nuri"}}, "url": "https://github.com/eclipse/jkube/commit/71f6c1d0c1706b9e4f888078f620ceb75521e47b", "committedDate": "2020-07-08T11:46:33Z", "message": "fix: Properly define + document JKubeProjectAssembly behavior\n\n- AssemblyFileSet supports wildcard includes and excludes\n- AssemblyFileSet contains default file and directory modes\n- Removed no longer working descriptor and descriptorRef configs from AssemblyFileSet\n- Removed unsupported assembly .xml descriptors\n- Removed outdated documentation\n- xml-config quickstart works as expected\n- Fixed *Controller*Enricher to support xml configured names (just like replicas or image pull policy)\n- Updated Assembly related documentation\n- Updated ibm-javaee8-webprofile-liberty example\n\nSigned-off-by: Marc Nuri <marc@marcnuri.com>"}, "afterCommit": {"oid": "0158f25a46284d5253860d671f27caa4b773e964", "author": {"user": {"login": "manusa", "name": "Marc Nuri"}}, "url": "https://github.com/eclipse/jkube/commit/0158f25a46284d5253860d671f27caa4b773e964", "committedDate": "2020-07-08T12:53:48Z", "message": "fix: Properly define + document JKubeProjectAssembly behavior\n\n- AssemblyFileSet supports wildcard includes and excludes\n- AssemblyFileSet contains default file and directory modes\n- Removed no longer working descriptor and descriptorRef configs from AssemblyFileSet\n- Removed unsupported assembly .xml descriptors\n- Removed outdated documentation\n- xml-config quickstart works as expected\n- Fixed *Controller*Enricher to support xml configured names (just like replicas or image pull policy)\n- Updated Assembly related documentation\n- Updated ibm-javaee8-webprofile-liberty example\n\nSigned-off-by: Marc Nuri <marc@marcnuri.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ2MTg5NDE3", "url": "https://github.com/eclipse/jkube/pull/278#pullrequestreview-446189417", "createdAt": "2020-07-10T07:43:20Z", "commit": {"oid": "0158f25a46284d5253860d671f27caa4b773e964"}, "state": "APPROVED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMFQwNzo0MzoyMFrOGvtRZw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMFQxMDoyMDoyOVrOGvyIZQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjY3Nzk5MQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            \" dependencies for you application to run.\");\n          \n          \n            \n                            \" dependencies for your application to run.\");", "url": "https://github.com/eclipse/jkube/pull/278#discussion_r452677991", "createdAt": "2020-07-10T07:43:20Z", "author": {"login": "rohanKanojia"}, "path": "jkube-kit/generator/java-exec/src/main/java/org/eclipse/jkube/generator/javaexec/JavaExecGenerator.java", "diffHunk": "@@ -173,21 +170,17 @@ protected AssemblyConfiguration createAssembly() {\n     }\n \n     protected void addAssembly(AssemblyConfiguration.AssemblyConfigurationBuilder builder) {\n-        String assemblyRef = getConfig(Config.assemblyRef);\n-        if (assemblyRef != null) {\n-            builder.descriptorRef(assemblyRef);\n-        } else {\n-            final List<AssemblyFileSet> fileSets = new ArrayList<>(addAdditionalFiles());\n-            if (isFatJar()) {\n-                FatJarDetector.Result fatJar = detectFatJar();\n-                if (fatJar != null) {\n-                    fileSets.add(getOutputDirectoryFileSet(fatJar, getProject()));\n-                }\n-            } else {\n-                builder.descriptorRef(\"artifact-with-dependencies\");\n+        final List<AssemblyFileSet> fileSets = new ArrayList<>(addAdditionalFiles());\n+        if (isFatJar()) {\n+            FatJarDetector.Result fatJar = detectFatJar();\n+            if (fatJar != null) {\n+                fileSets.add(getOutputDirectoryFileSet(fatJar, getProject()));\n             }\n-            builder.inline(Assembly.builder().fileSets(fileSets).build());\n+        } else {\n+            log.warn(\"No fat Jar detected, make sure your image assembly configuration contains all the required\" +\n+                \" dependencies for you application to run.\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0158f25a46284d5253860d671f27caa4b773e964"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mjc0ODU5Mg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            \" dependencies for you application to run.\");\n          \n          \n            \n                            \" dependencies for your application to run.\");", "url": "https://github.com/eclipse/jkube/pull/278#discussion_r452748592", "createdAt": "2020-07-10T10:01:07Z", "author": {"login": "rohanKanojia"}, "path": "jkube-kit/jkube-kit-openliberty/src/main/java/org/eclipse/jkube/openliberty/generator/OpenLibertyGenerator.java", "diffHunk": "@@ -70,26 +70,22 @@ public boolean isApplicable(List<ImageConfiguration> configs) {\n \n     @Override\n     protected void addAssembly(AssemblyConfiguration.AssemblyConfigurationBuilder builder) {\n-        String assemblyRef = getConfig(Config.assemblyRef);\n-        if (assemblyRef != null) {\n-            builder.descriptorRef(assemblyRef);\n-        } else {\n-            final List<AssemblyFileSet> fileSets = new ArrayList<>(addAdditionalFiles());\n-            if (isFatJar()) {\n-                FatJarDetector.Result fatJar = detectFatJar();\n-                JavaProject project = getProject();\n-                if (fatJar != null) {\n-                    AssemblyFileSet fileSet = getOutputDirectoryFileSet(fatJar, project);\n-                    if (LIBERTY_SELF_EXTRACTOR.equals(fatJar.getMainClass())) {\n-                        this.runnableJarName = fatJar.getArchiveFile().getName();\n-                    }\n-                    fileSets.add(fileSet);\n+        final List<AssemblyFileSet> fileSets = new ArrayList<>(addAdditionalFiles());\n+        if (isFatJar()) {\n+            FatJarDetector.Result fatJar = detectFatJar();\n+            JavaProject project = getProject();\n+            if (fatJar != null) {\n+                AssemblyFileSet fileSet = getOutputDirectoryFileSet(fatJar, project);\n+                if (LIBERTY_SELF_EXTRACTOR.equals(fatJar.getMainClass())) {\n+                    this.runnableJarName = fatJar.getArchiveFile().getName();\n                 }\n-            } else {\n-                builder.descriptorRef(\"artifact-with-dependencies\");\n+                fileSets.add(fileSet);\n             }\n-            builder.inline(Assembly.builder().fileSets(fileSets).build());\n+        } else {\n+            log.warn(\"No fat Jar detected, make sure your image assembly configuration contains all the required\" +\n+                \" dependencies for you application to run.\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0158f25a46284d5253860d671f27caa4b773e964"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mjc1MDY2OQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            a| User and/or group under which the files should be added. The user must already exist in the base image.\n          \n          \n            \n            | User and/or group under which the files should be added. The user must already exist in the base image.", "url": "https://github.com/eclipse/jkube/pull/278#discussion_r452750669", "createdAt": "2020-07-10T10:05:27Z", "author": {"login": "rohanKanojia"}, "path": "kubernetes-maven-plugin/doc/src/main/asciidoc/inc/build/_assembly.adoc", "diffHunk": "@@ -51,8 +55,8 @@ assembly configuration\n | *tarLongFileMode*\n | Sets the TarArchiver behaviour on file paths with more than 100 characters length. Valid values are: \"warn\"(default), \"fail\", \"truncate\", \"gnu\", \"posix\", \"posix_warn\" or \"omit\"\n \n-| [[config-image-build-assembly-user]] *user*\n-| User and/or group under which the files should be added. The user must already exist in the base image.\n+| *user*\n+a| User and/or group under which the files should be added. The user must already exist in the base image.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0158f25a46284d5253860d671f27caa4b773e964"}, "originalPosition": 52}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mjc1MTc4Mw==", "bodyText": "Is this by accident or does this preceding a has some purpose which I'm not aware of?", "url": "https://github.com/eclipse/jkube/pull/278#discussion_r452751783", "createdAt": "2020-07-10T10:07:47Z", "author": {"login": "rohanKanojia"}, "path": "kubernetes-maven-plugin/doc/src/main/asciidoc/inc/build/_assembly.adoc", "diffHunk": "@@ -64,140 +68,50 @@ For example, the image `jboss/wildfly` use a \"jboss\" user under which all comman\n \n In the event you do not need to include any artifacts with the image, you may safely omit this element from the configuration.\n \n-[[build-assembly-descriptor]]\n-==== Assembly Descriptor\n-\n-With using the `inline`, `descriptor` or `descriptorRef` option\n-it is possible to bring local files, artifacts and dependencies into\n-the running Docker container. A `descriptor` points to a file\n-describing the data to put into an image to build. It has the same\n-http://maven.apache.org/plugins/maven-assembly-plugin/assembly.html[format] as for creating assemblies with the\n-http://maven.apache.org/plugins/maven-assembly-plugin[maven-assembly-plugin] with following exceptions:\n-\n-* `<formats>` are ignored, the assembly will allways use a directory\n-when preparing the data container (i.e. the format is fixed to\n-`dir`)\n-* The `<id>` is ignored since only a single assembly descriptor is\n-used (no need to distinguish multiple descriptors)\n-\n-Also you can inline the assembly description with a `inline` description\n-directly into the pom file. Adding the proper namespace even allows for\n-IDE autocompletion. As an example, refer to the profile `inline` in\n-the `data-jolokia-demo` 's pom.xml.\n-\n-Alternatively `descriptorRef` can be used with the name of a\n-predefined assembly descriptor. The following symbolic names can be\n-used for `descriptorRef`:\n-\n-[[build-assembly-descriptor-refs]]\n-.Predefined Assembly Descriptors\n-[cols=\"1,3\"]\n+[[build-assembly-inline]]\n+==== Assembly - Inline\n+\n+Inlined assembly description with a format very similar to\n+https://maven.apache.org/plugins/maven-assembly-plugin/assembly.html[Maven Assembly Plugin].\n+\n+[cols=\"1,5\"]\n |===\n-| Assembly Reference | Description\n+| Element | Description\n \n-| *artifact-with-dependencies*\n-| Attaches project's artifact and all its dependencies. Also, when a `classpath` file exists in the target directory, this will be added to.\n+| *id*\n+| Unique ID for the assembly.\n \n-| *artifact*\n-| Attaches only the project's artifact but no dependencies.\n+| *files*\n+a| List of files for the assembly.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0158f25a46284d5253860d671f27caa4b773e964"}, "originalPosition": 107}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mjc1NTEzOQ==", "bodyText": "here too", "url": "https://github.com/eclipse/jkube/pull/278#discussion_r452755139", "createdAt": "2020-07-10T10:15:07Z", "author": {"login": "rohanKanojia"}, "path": "kubernetes-maven-plugin/doc/src/main/asciidoc/inc/build/_assembly.adoc", "diffHunk": "@@ -64,140 +68,50 @@ For example, the image `jboss/wildfly` use a \"jboss\" user under which all comman\n \n In the event you do not need to include any artifacts with the image, you may safely omit this element from the configuration.\n \n-[[build-assembly-descriptor]]\n-==== Assembly Descriptor\n-\n-With using the `inline`, `descriptor` or `descriptorRef` option\n-it is possible to bring local files, artifacts and dependencies into\n-the running Docker container. A `descriptor` points to a file\n-describing the data to put into an image to build. It has the same\n-http://maven.apache.org/plugins/maven-assembly-plugin/assembly.html[format] as for creating assemblies with the\n-http://maven.apache.org/plugins/maven-assembly-plugin[maven-assembly-plugin] with following exceptions:\n-\n-* `<formats>` are ignored, the assembly will allways use a directory\n-when preparing the data container (i.e. the format is fixed to\n-`dir`)\n-* The `<id>` is ignored since only a single assembly descriptor is\n-used (no need to distinguish multiple descriptors)\n-\n-Also you can inline the assembly description with a `inline` description\n-directly into the pom file. Adding the proper namespace even allows for\n-IDE autocompletion. As an example, refer to the profile `inline` in\n-the `data-jolokia-demo` 's pom.xml.\n-\n-Alternatively `descriptorRef` can be used with the name of a\n-predefined assembly descriptor. The following symbolic names can be\n-used for `descriptorRef`:\n-\n-[[build-assembly-descriptor-refs]]\n-.Predefined Assembly Descriptors\n-[cols=\"1,3\"]\n+[[build-assembly-inline]]\n+==== Assembly - Inline\n+\n+Inlined assembly description with a format very similar to\n+https://maven.apache.org/plugins/maven-assembly-plugin/assembly.html[Maven Assembly Plugin].\n+\n+[cols=\"1,5\"]\n |===\n-| Assembly Reference | Description\n+| Element | Description\n \n-| *artifact-with-dependencies*\n-| Attaches project's artifact and all its dependencies. Also, when a `classpath` file exists in the target directory, this will be added to.\n+| *id*\n+| Unique ID for the assembly.\n \n-| *artifact*\n-| Attaches only the project's artifact but no dependencies.\n+| *files*\n+a| List of files for the assembly.\n \n-| *project*\n-| Attaches the whole Maven project but with out the `target/` directory.\n+Each file has the following fields:\n+\n+* `source`: Absolute or relative path from the project's directory of the file to be included in the assembly.\n+* `outputDirectory`: Output directory relative to the root of the root directory of the assembly.\n+* `destName`: Destination filename in the outputDirectory.\n+* `fileMode`: Similar to a UNIX permission, sets the file mode of the file included.\n+\n+| *fileSets*\n+a| List of filesets for the Assembly.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0158f25a46284d5253860d671f27caa4b773e964"}, "originalPosition": 119}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mjc1NzYwNQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                      <!-- Standard d-m-p configuration which defines how images are build, i.e. how the docker.tar is created -->\n          \n          \n            \n                      <!-- Standard jkube/kmp configuration which defines how images are build, i.e. how the docker.tar is created -->", "url": "https://github.com/eclipse/jkube/pull/278#discussion_r452757605", "createdAt": "2020-07-10T10:20:29Z", "author": {"login": "rohanKanojia"}, "path": "quickstarts/maven/xml-config/pom.xml", "diffHunk": "@@ -135,167 +156,111 @@\n           <mainClass>org.apache.camel.cdi.Main</mainClass>\n         </configuration>\n       </plugin>\n+      <plugin>\n+        <groupId>org.eclipse.jkube</groupId>\n+        <artifactId>kubernetes-maven-plugin</artifactId>\n+        <version>${project.version}</version>\n+\n+        <configuration>\n+          <!-- Standard d-m-p configuration which defines how images are build, i.e. how the docker.tar is created -->", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0158f25a46284d5253860d671f27caa4b773e964"}, "originalPosition": 117}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0158f25a46284d5253860d671f27caa4b773e964", "author": {"user": {"login": "manusa", "name": "Marc Nuri"}}, "url": "https://github.com/eclipse/jkube/commit/0158f25a46284d5253860d671f27caa4b773e964", "committedDate": "2020-07-08T12:53:48Z", "message": "fix: Properly define + document JKubeProjectAssembly behavior\n\n- AssemblyFileSet supports wildcard includes and excludes\n- AssemblyFileSet contains default file and directory modes\n- Removed no longer working descriptor and descriptorRef configs from AssemblyFileSet\n- Removed unsupported assembly .xml descriptors\n- Removed outdated documentation\n- xml-config quickstart works as expected\n- Fixed *Controller*Enricher to support xml configured names (just like replicas or image pull policy)\n- Updated Assembly related documentation\n- Updated ibm-javaee8-webprofile-liberty example\n\nSigned-off-by: Marc Nuri <marc@marcnuri.com>"}, "afterCommit": {"oid": "498b54da91f570290b0b77c5aa3fa903235cccae", "author": {"user": {"login": "manusa", "name": "Marc Nuri"}}, "url": "https://github.com/eclipse/jkube/commit/498b54da91f570290b0b77c5aa3fa903235cccae", "committedDate": "2020-07-10T12:54:59Z", "message": "fix: Properly define + document JKubeProjectAssembly behavior\n\n- AssemblyFileSet supports wildcard includes and excludes\n- AssemblyFileSet contains default file and directory modes\n- Removed no longer working descriptor and descriptorRef configs from AssemblyFileSet\n- Removed unsupported assembly .xml descriptors\n- Removed outdated documentation\n- xml-config quickstart works as expected\n- Fixed *Controller*Enricher to support xml configured names (just like replicas or image pull policy)\n- Updated Assembly related documentation\n- Updated ibm-javaee8-webprofile-liberty example\n\nSigned-off-by: Marc Nuri <marc@marcnuri.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6457ea07bc5f762f9f46f48075affa27d643026b", "author": {"user": {"login": "manusa", "name": "Marc Nuri"}}, "url": "https://github.com/eclipse/jkube/commit/6457ea07bc5f762f9f46f48075affa27d643026b", "committedDate": "2020-07-10T13:24:17Z", "message": "fix: Properly define + document JKubeProjectAssembly behavior\n\n- AssemblyFileSet supports wildcard includes and excludes\n- AssemblyFileSet contains default file and directory modes\n- Removed no longer working descriptor and descriptorRef configs from AssemblyFileSet\n- Removed unsupported assembly .xml descriptors\n- Removed outdated documentation\n- xml-config quickstart works as expected\n- Fixed *Controller*Enricher to support xml configured names (just like replicas or image pull policy)\n- Updated Assembly related documentation\n- Updated ibm-javaee8-webprofile-liberty example\n\nSigned-off-by: Marc Nuri <marc@marcnuri.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "498b54da91f570290b0b77c5aa3fa903235cccae", "author": {"user": {"login": "manusa", "name": "Marc Nuri"}}, "url": "https://github.com/eclipse/jkube/commit/498b54da91f570290b0b77c5aa3fa903235cccae", "committedDate": "2020-07-10T12:54:59Z", "message": "fix: Properly define + document JKubeProjectAssembly behavior\n\n- AssemblyFileSet supports wildcard includes and excludes\n- AssemblyFileSet contains default file and directory modes\n- Removed no longer working descriptor and descriptorRef configs from AssemblyFileSet\n- Removed unsupported assembly .xml descriptors\n- Removed outdated documentation\n- xml-config quickstart works as expected\n- Fixed *Controller*Enricher to support xml configured names (just like replicas or image pull policy)\n- Updated Assembly related documentation\n- Updated ibm-javaee8-webprofile-liberty example\n\nSigned-off-by: Marc Nuri <marc@marcnuri.com>"}, "afterCommit": {"oid": "6457ea07bc5f762f9f46f48075affa27d643026b", "author": {"user": {"login": "manusa", "name": "Marc Nuri"}}, "url": "https://github.com/eclipse/jkube/commit/6457ea07bc5f762f9f46f48075affa27d643026b", "committedDate": "2020-07-10T13:24:17Z", "message": "fix: Properly define + document JKubeProjectAssembly behavior\n\n- AssemblyFileSet supports wildcard includes and excludes\n- AssemblyFileSet contains default file and directory modes\n- Removed no longer working descriptor and descriptorRef configs from AssemblyFileSet\n- Removed unsupported assembly .xml descriptors\n- Removed outdated documentation\n- xml-config quickstart works as expected\n- Fixed *Controller*Enricher to support xml configured names (just like replicas or image pull policy)\n- Updated Assembly related documentation\n- Updated ibm-javaee8-webprofile-liberty example\n\nSigned-off-by: Marc Nuri <marc@marcnuri.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 289, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}