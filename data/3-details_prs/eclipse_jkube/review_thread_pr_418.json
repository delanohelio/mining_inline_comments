{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk1NDM2NzYx", "number": 418, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQxNDoxNDo0MVrOEpDRHA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQxNDoxNDo1NVrOEpDRjg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzExNDgwNjA0OnYy", "diffSide": "RIGHT", "path": "quickstarts/kit/dynamic-docker-image-file-multi-layer/src/main/java/org/eclipse/jkube/quickstart/kit/docker/dynamic/DynamicDockerfileGenerator.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQxNDoxNDo0MVrOHafsNw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQxNDoxNDo0MVrOHafsNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzU0NDI0Nw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n               * Preassembles all files that should be includedin the Docker build.\n          \n          \n            \n               * Preassembles all files that should be included in the Docker build.", "url": "https://github.com/eclipse/jkube/pull/418#discussion_r497544247", "createdAt": "2020-09-30T14:14:41Z", "author": {"login": "rohanKanojia"}, "path": "quickstarts/kit/dynamic-docker-image-file-multi-layer/src/main/java/org/eclipse/jkube/quickstart/kit/docker/dynamic/DynamicDockerfileGenerator.java", "diffHunk": "@@ -0,0 +1,107 @@\n+/**\n+ * Copyright (c) 2019 Red Hat, Inc.\n+ * This program and the accompanying materials are made\n+ * available under the terms of the Eclipse Public License 2.0\n+ * which is available at:\n+ *\n+ *     https://www.eclipse.org/legal/epl-2.0/\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *\n+ * Contributors:\n+ *   Red Hat, Inc. - initial API and implementation\n+ */\n+package org.eclipse.jkube.quickstart.kit.docker.dynamic;\n+\n+import org.apache.commons.io.FileUtils;\n+import org.eclipse.jkube.kit.common.AssemblyConfiguration;\n+import org.eclipse.jkube.kit.common.KitLogger;\n+import org.eclipse.jkube.kit.config.image.ImageConfiguration;\n+import org.eclipse.jkube.kit.config.image.build.Arguments;\n+import org.eclipse.jkube.kit.config.image.build.BuildConfiguration;\n+import org.eclipse.jkube.kit.config.image.build.DockerFileBuilder;\n+\n+import java.io.File;\n+import java.io.IOException;\n+import java.nio.file.Path;\n+import java.util.Collections;\n+\n+public class DynamicDockerfileGenerator {\n+\n+  private static final String ASSEMBLY_DIRECTORY = \"preassembled-docker\";\n+\n+  private final KitLogger kitLogger;\n+  private final Path projectDir;\n+  private final String imageName;\n+\n+  public DynamicDockerfileGenerator(KitLogger kitLogger, Path projectDir, String imageName) {\n+    this.kitLogger = kitLogger;\n+    this.projectDir = projectDir;\n+    this.imageName = imageName;\n+  }\n+\n+  public ImageConfiguration generateImageConfiguration() throws IOException {\n+    final File context = assembleContext();\n+    generateDockerfile(context);\n+    BuildConfiguration buildConfiguration = initBuildConfiguration(context);\n+    return ImageConfiguration.builder()\n+        .name(imageName)\n+        .build(buildConfiguration)\n+        .build();\n+  }\n+\n+  /**\n+   * Preassembles all files that should be includedin the Docker build.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "57ab72fad66cb7359a2e940e24188914d96e8a20"}, "originalPosition": 54}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzExNDgwNzE4OnYy", "diffSide": "RIGHT", "path": "quickstarts/kit/dynamic-docker-image-file-multi-layer/src/main/java/org/eclipse/jkube/quickstart/kit/docker/dynamic/DynamicDockerfileGenerator.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQxNDoxNDo1NVrOHafs2w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQxNDoxNDo1NVrOHafs2w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzU0NDQxMQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n               * Customize this step to add any files you'd like to be part of you image.\n          \n          \n            \n               * Customize this step to add any files you'd like to be part of your image.", "url": "https://github.com/eclipse/jkube/pull/418#discussion_r497544411", "createdAt": "2020-09-30T14:14:55Z", "author": {"login": "rohanKanojia"}, "path": "quickstarts/kit/dynamic-docker-image-file-multi-layer/src/main/java/org/eclipse/jkube/quickstart/kit/docker/dynamic/DynamicDockerfileGenerator.java", "diffHunk": "@@ -0,0 +1,107 @@\n+/**\n+ * Copyright (c) 2019 Red Hat, Inc.\n+ * This program and the accompanying materials are made\n+ * available under the terms of the Eclipse Public License 2.0\n+ * which is available at:\n+ *\n+ *     https://www.eclipse.org/legal/epl-2.0/\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *\n+ * Contributors:\n+ *   Red Hat, Inc. - initial API and implementation\n+ */\n+package org.eclipse.jkube.quickstart.kit.docker.dynamic;\n+\n+import org.apache.commons.io.FileUtils;\n+import org.eclipse.jkube.kit.common.AssemblyConfiguration;\n+import org.eclipse.jkube.kit.common.KitLogger;\n+import org.eclipse.jkube.kit.config.image.ImageConfiguration;\n+import org.eclipse.jkube.kit.config.image.build.Arguments;\n+import org.eclipse.jkube.kit.config.image.build.BuildConfiguration;\n+import org.eclipse.jkube.kit.config.image.build.DockerFileBuilder;\n+\n+import java.io.File;\n+import java.io.IOException;\n+import java.nio.file.Path;\n+import java.util.Collections;\n+\n+public class DynamicDockerfileGenerator {\n+\n+  private static final String ASSEMBLY_DIRECTORY = \"preassembled-docker\";\n+\n+  private final KitLogger kitLogger;\n+  private final Path projectDir;\n+  private final String imageName;\n+\n+  public DynamicDockerfileGenerator(KitLogger kitLogger, Path projectDir, String imageName) {\n+    this.kitLogger = kitLogger;\n+    this.projectDir = projectDir;\n+    this.imageName = imageName;\n+  }\n+\n+  public ImageConfiguration generateImageConfiguration() throws IOException {\n+    final File context = assembleContext();\n+    generateDockerfile(context);\n+    BuildConfiguration buildConfiguration = initBuildConfiguration(context);\n+    return ImageConfiguration.builder()\n+        .name(imageName)\n+        .build(buildConfiguration)\n+        .build();\n+  }\n+\n+  /**\n+   * Preassembles all files that should be includedin the Docker build.\n+   *\n+   * Will create a temporary directory holding these files.\n+   *\n+   * Customize this step to add any files you'd like to be part of you image.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "57ab72fad66cb7359a2e940e24188914d96e8a20"}, "originalPosition": 58}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1911, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}