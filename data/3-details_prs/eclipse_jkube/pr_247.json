{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM1NjI4MTA3", "number": 247, "title": "Unit test for Openshifthelper", "bodyText": "Description\nIncrease coverage for OpenShiftHelper in scope of #207\n\nType of change\n\n\n Bug fix (non-breaking change which fixes an issue)\n Feature (non-breaking change which adds functionality)\n Breaking change (fix or feature that would cause existing functionality to change)\n\nChecklist\n\n I have read the contributing guidelines\n I signed-off my commit with a user that has signed the Eclipse Contributor Agreement\n I Added CHANGELOG entry\n I have implemented unit tests to cover my changes\n I have updated the documentation accordingly\n No new bugs, code smells, etc. in SonarCloud report\n I tested my code in Kubernetes\n I tested my code in OpenShift", "createdAt": "2020-06-17T06:18:23Z", "url": "https://github.com/eclipse/jkube/pull/247", "merged": true, "mergeCommit": {"oid": "48ccd83fc8ffd81e3d8716b4fa8b43177ae6755d"}, "closed": true, "closedAt": "2020-06-25T05:58:19Z", "author": {"login": "anandrkskd"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcsuDmfgBqjM0NjEzMjc3MzQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcuoAPkAFqTQzNzE4MjkyMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b2216d52728e65ec792ec21481b1a54d3d006dcd", "author": {"user": {"login": "anandrkskd", "name": "Anand Kumar Singh"}}, "url": "https://github.com/eclipse/jkube/commit/b2216d52728e65ec792ec21481b1a54d3d006dcd", "committedDate": "2020-06-17T04:45:27Z", "message": "UT added for OpenShifthelper\n\nSigned-off-by: anandrkskd <anandrkskd@gmail.com>"}, "afterCommit": {"oid": "88b2a0a503a17e9fca2d7baa3eabf83cff1cdb24", "author": {"user": {"login": "anandrkskd", "name": "Anand Kumar Singh"}}, "url": "https://github.com/eclipse/jkube/commit/88b2a0a503a17e9fca2d7baa3eabf83cff1cdb24", "committedDate": "2020-06-19T07:36:21Z", "message": "UT added for OpenShifthelper\n\nSigned-off-by: anandrkskd <anandrkskd@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "88b2a0a503a17e9fca2d7baa3eabf83cff1cdb24", "author": {"user": {"login": "anandrkskd", "name": "Anand Kumar Singh"}}, "url": "https://github.com/eclipse/jkube/commit/88b2a0a503a17e9fca2d7baa3eabf83cff1cdb24", "committedDate": "2020-06-19T07:36:21Z", "message": "UT added for OpenShifthelper\n\nSigned-off-by: anandrkskd <anandrkskd@gmail.com>"}, "afterCommit": {"oid": "9c322396ec8e6eb98c2583ade85c3008c930d83c", "author": {"user": {"login": "anandrkskd", "name": "Anand Kumar Singh"}}, "url": "https://github.com/eclipse/jkube/commit/9c322396ec8e6eb98c2583ade85c3008c930d83c", "committedDate": "2020-06-22T04:44:21Z", "message": "Unit test for openshifthelper\n\nSigned-off-by: anandrkskd <anandrkskd@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM0NjI0NjQ1", "url": "https://github.com/eclipse/jkube/pull/247#pullrequestreview-434624645", "createdAt": "2020-06-22T06:05:51Z", "commit": {"oid": "9c322396ec8e6eb98c2583ade85c3008c930d83c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQwNjowNTo1MVrOGmy8qQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQwNjowNTo1MVrOGmy8qQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzMzMzgwMQ==", "bodyText": "Remove dead code", "url": "https://github.com/eclipse/jkube/pull/247#discussion_r443333801", "createdAt": "2020-06-22T06:05:51Z", "author": {"login": "manusa"}, "path": "jkube-kit/common/src/test/java/org/eclipse/jkube/kit/common/util/OpenshiftHelperTest.java", "diffHunk": "@@ -0,0 +1,312 @@\n+/**\n+ * Copyright (c) 2019 Red Hat, Inc.\n+ * This program and the accompanying materials are made\n+ * available under the terms of the Eclipse Public License 2.0\n+ * which is available at:\n+ *\n+ *     https://www.eclipse.org/legal/epl-2.0/\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *\n+ * Contributors:\n+ *   Red Hat, Inc. - initial API and implementation\n+ */\n+package org.eclipse.jkube.kit.common.util;\n+\n+import io.fabric8.kubernetes.api.model.APIGroupListBuilder;\n+import io.fabric8.kubernetes.api.model.KubernetesList;\n+import io.fabric8.kubernetes.api.model.Pod;\n+import io.fabric8.kubernetes.api.model.PodBuilder;\n+import io.fabric8.kubernetes.client.KubernetesClient;\n+import io.fabric8.kubernetes.client.server.mock.KubernetesServer;\n+import io.fabric8.openshift.api.model.Template;\n+import io.fabric8.openshift.api.model.TemplateBuilder;\n+import io.fabric8.openshift.client.OpenShiftClient;\n+\n+import org.junit.Rule;\n+import org.junit.Test;\n+\n+import java.io.IOException;\n+import java.util.HashMap;\n+import java.util.Map;\n+\n+import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertFalse;\n+import static org.junit.Assert.assertNotEquals;\n+import static org.junit.Assert.assertNotNull;\n+import static org.junit.Assert.assertNull;\n+import static org.junit.Assert.assertTrue;\n+\n+public class OpenshiftHelperTest {\n+\n+    @Rule\n+    public KubernetesServer server = new KubernetesServer();\n+//    OpenShiftMockServer mockServer = new OpenShiftMockServer(false);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c322396ec8e6eb98c2583ade85c3008c930d83c"}, "originalPosition": 44}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9c322396ec8e6eb98c2583ade85c3008c930d83c", "author": {"user": {"login": "anandrkskd", "name": "Anand Kumar Singh"}}, "url": "https://github.com/eclipse/jkube/commit/9c322396ec8e6eb98c2583ade85c3008c930d83c", "committedDate": "2020-06-22T04:44:21Z", "message": "Unit test for openshifthelper\n\nSigned-off-by: anandrkskd <anandrkskd@gmail.com>"}, "afterCommit": {"oid": "01f0f3667120b21c8c1c5a9bd5562736102b4c4a", "author": {"user": {"login": "anandrkskd", "name": "Anand Kumar Singh"}}, "url": "https://github.com/eclipse/jkube/commit/01f0f3667120b21c8c1c5a9bd5562736102b4c4a", "committedDate": "2020-06-23T14:02:36Z", "message": "UT added for OpenshiftHelper\n\nSigned-off-by: anandrkskd <anandrkskd@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM1ODMyNDg3", "url": "https://github.com/eclipse/jkube/pull/247#pullrequestreview-435832487", "createdAt": "2020-06-23T14:20:15Z", "commit": {"oid": "01f0f3667120b21c8c1c5a9bd5562736102b4c4a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QxNDoyMDoxNVrOGnrkUQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QxNDoyMDoxNVrOGnrkUQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDI2MTQ1Nw==", "bodyText": "I don't think you need to specify version here since it's covered by <dependencyManagement>", "url": "https://github.com/eclipse/jkube/pull/247#discussion_r444261457", "createdAt": "2020-06-23T14:20:15Z", "author": {"login": "rohanKanojia"}, "path": "jkube-kit/common/pom.xml", "diffHunk": "@@ -135,6 +135,12 @@\n       <groupId>com.networknt</groupId>\n       <artifactId>json-schema-validator</artifactId>\n     </dependency>\n+      <dependency>\n+          <groupId>io.fabric8</groupId>\n+          <artifactId>kubernetes-server-mock</artifactId>\n+          <version>4.10.2</version>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "01f0f3667120b21c8c1c5a9bd5562736102b4c4a"}, "originalPosition": 7}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM1ODM1NzQy", "url": "https://github.com/eclipse/jkube/pull/247#pullrequestreview-435835742", "createdAt": "2020-06-23T14:23:31Z", "commit": {"oid": "01f0f3667120b21c8c1c5a9bd5562736102b4c4a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QxNDoyMzozMVrOGnrt7w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QxNDoyMzozMVrOGnrt7w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDI2MzkxOQ==", "bodyText": "I think you should be able to use mocked KubernetesClient here also.", "url": "https://github.com/eclipse/jkube/pull/247#discussion_r444263919", "createdAt": "2020-06-23T14:23:31Z", "author": {"login": "rohanKanojia"}, "path": "jkube-kit/common/src/test/java/org/eclipse/jkube/kit/common/util/OpenshiftHelperTest.java", "diffHunk": "@@ -0,0 +1,307 @@\n+/**\n+ * Copyright (c) 2019 Red Hat, Inc.\n+ * This program and the accompanying materials are made\n+ * available under the terms of the Eclipse Public License 2.0\n+ * which is available at:\n+ *\n+ *     https://www.eclipse.org/legal/epl-2.0/\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *\n+ * Contributors:\n+ *   Red Hat, Inc. - initial API and implementation\n+ */\n+package org.eclipse.jkube.kit.common.util;\n+\n+import io.fabric8.kubernetes.api.model.KubernetesList;\n+import io.fabric8.kubernetes.api.model.Pod;\n+import io.fabric8.kubernetes.api.model.PodBuilder;\n+import io.fabric8.kubernetes.client.KubernetesClient;\n+import io.fabric8.kubernetes.client.server.mock.KubernetesServer;\n+import io.fabric8.openshift.api.model.Template;\n+import io.fabric8.openshift.api.model.TemplateBuilder;\n+import io.fabric8.openshift.client.OpenShiftClient;\n+\n+import mockit.Expectations;\n+import mockit.Mocked;\n+import org.junit.Rule;\n+import org.junit.Test;\n+\n+import java.io.IOException;\n+import java.util.HashMap;\n+import java.util.Map;\n+\n+import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertFalse;\n+import static org.junit.Assert.assertNotEquals;\n+import static org.junit.Assert.assertNotNull;\n+import static org.junit.Assert.assertNull;\n+import static org.junit.Assert.assertTrue;\n+\n+public class OpenshiftHelperTest {\n+\n+    @Rule\n+    public KubernetesServer server = new KubernetesServer();\n+\n+    @Test\n+    public void testAsOpenShiftClientWithNoOpenShift() {\n+        // Given\n+        KubernetesClient client = server.getClient();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "01f0f3667120b21c8c1c5a9bd5562736102b4c4a"}, "originalPosition": 49}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "01f0f3667120b21c8c1c5a9bd5562736102b4c4a", "author": {"user": {"login": "anandrkskd", "name": "Anand Kumar Singh"}}, "url": "https://github.com/eclipse/jkube/commit/01f0f3667120b21c8c1c5a9bd5562736102b4c4a", "committedDate": "2020-06-23T14:02:36Z", "message": "UT added for OpenshiftHelper\n\nSigned-off-by: anandrkskd <anandrkskd@gmail.com>"}, "afterCommit": {"oid": "8195ce431f0aea88660ac94fafd09a38242fb9d1", "author": {"user": {"login": "anandrkskd", "name": "Anand Kumar Singh"}}, "url": "https://github.com/eclipse/jkube/commit/8195ce431f0aea88660ac94fafd09a38242fb9d1", "committedDate": "2020-06-24T09:04:12Z", "message": "Unit Test added for OpenshiftHelper\n\nSigned-off-by: anandrkskd <anandrkskd@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8195ce431f0aea88660ac94fafd09a38242fb9d1", "author": {"user": {"login": "anandrkskd", "name": "Anand Kumar Singh"}}, "url": "https://github.com/eclipse/jkube/commit/8195ce431f0aea88660ac94fafd09a38242fb9d1", "committedDate": "2020-06-24T09:04:12Z", "message": "Unit Test added for OpenshiftHelper\n\nSigned-off-by: anandrkskd <anandrkskd@gmail.com>"}, "afterCommit": {"oid": "ce33e64f0a1aed50ff9c7c40f4465bcd89611e43", "author": {"user": {"login": "anandrkskd", "name": "Anand Kumar Singh"}}, "url": "https://github.com/eclipse/jkube/commit/ce33e64f0a1aed50ff9c7c40f4465bcd89611e43", "committedDate": "2020-06-24T09:06:24Z", "message": "Unit Test added for OpenshiftHelper\n\nSigned-off-by: anandrkskd <anandrkskd@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ce33e64f0a1aed50ff9c7c40f4465bcd89611e43", "author": {"user": {"login": "anandrkskd", "name": "Anand Kumar Singh"}}, "url": "https://github.com/eclipse/jkube/commit/ce33e64f0a1aed50ff9c7c40f4465bcd89611e43", "committedDate": "2020-06-24T09:06:24Z", "message": "Unit Test added for OpenshiftHelper\n\nSigned-off-by: anandrkskd <anandrkskd@gmail.com>"}, "afterCommit": {"oid": "6521d312eacf10c032c3513634b58aa02c039109", "author": {"user": {"login": "anandrkskd", "name": "Anand Kumar Singh"}}, "url": "https://github.com/eclipse/jkube/commit/6521d312eacf10c032c3513634b58aa02c039109", "committedDate": "2020-06-24T10:24:40Z", "message": "Unit Test added for OpenshiftHelper\n\nSigned-off-by: anandrkskd <anandrkskd@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5b034f2cc6aa3bf69ecf182f7b12d74f61842fb6", "author": {"user": {"login": "anandrkskd", "name": "Anand Kumar Singh"}}, "url": "https://github.com/eclipse/jkube/commit/5b034f2cc6aa3bf69ecf182f7b12d74f61842fb6", "committedDate": "2020-06-24T10:55:48Z", "message": "Unit Test added for OpenshiftHelper\n\nSigned-off-by: anandrkskd <anandrkskd@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6521d312eacf10c032c3513634b58aa02c039109", "author": {"user": {"login": "anandrkskd", "name": "Anand Kumar Singh"}}, "url": "https://github.com/eclipse/jkube/commit/6521d312eacf10c032c3513634b58aa02c039109", "committedDate": "2020-06-24T10:24:40Z", "message": "Unit Test added for OpenshiftHelper\n\nSigned-off-by: anandrkskd <anandrkskd@gmail.com>"}, "afterCommit": {"oid": "5b034f2cc6aa3bf69ecf182f7b12d74f61842fb6", "author": {"user": {"login": "anandrkskd", "name": "Anand Kumar Singh"}}, "url": "https://github.com/eclipse/jkube/commit/5b034f2cc6aa3bf69ecf182f7b12d74f61842fb6", "committedDate": "2020-06-24T10:55:48Z", "message": "Unit Test added for OpenshiftHelper\n\nSigned-off-by: anandrkskd <anandrkskd@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2NTM5Mzcy", "url": "https://github.com/eclipse/jkube/pull/247#pullrequestreview-436539372", "createdAt": "2020-06-24T10:58:09Z", "commit": {"oid": "5b034f2cc6aa3bf69ecf182f7b12d74f61842fb6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM3MTgyOTIx", "url": "https://github.com/eclipse/jkube/pull/247#pullrequestreview-437182921", "createdAt": "2020-06-25T05:43:04Z", "commit": {"oid": "5b034f2cc6aa3bf69ecf182f7b12d74f61842fb6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 276, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}