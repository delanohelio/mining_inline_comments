{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk2MDI3ODkz", "number": 420, "title": "Fix #386: final fat jar is not updated in docker build directory", "bodyText": "Fix #386\nUpdated code in JKubeBuildTarArchiver to allow copying files when already existing.\nDescription\n\nType of change\n\n\n Bug fix (non-breaking change which fixes an issue)\n Feature (non-breaking change which adds functionality)\n Breaking change (fix or feature that would cause existing functionality to change\n Chore (non-breaking change which doesn't affect codebase;\ntest, version modification, documentation, etc.)\n\nChecklist\n\n I have read the contributing guidelines\n I signed-off my commit with a user that has signed the Eclipse Contributor Agreement\n I Added CHANGELOG entry\n I have implemented unit tests to cover my changes\n I have updated the documentation accordingly\n No new bugs, code smells, etc. in SonarCloud report\n I tested my code in Kubernetes\n I tested my code in OpenShift", "createdAt": "2020-10-01T07:21:37Z", "url": "https://github.com/eclipse/jkube/pull/420", "merged": true, "mergeCommit": {"oid": "6e6db13339a6ced555c0b38bba6871c88ecf1aa0"}, "closed": true, "closedAt": "2020-10-05T11:09:40Z", "author": {"login": "rohanKanojia"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdOMpOiABqjM4MjgwNTk3ODg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdPhzsnAFqTUwMTk0NzY4OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1e81503c4eda97d80a15648bbb8fad57e191637f", "author": {"user": {"login": "rohanKanojia", "name": "Rohan Kumar "}}, "url": "https://github.com/eclipse/jkube/commit/1e81503c4eda97d80a15648bbb8fad57e191637f", "committedDate": "2020-10-01T07:02:24Z", "message": "Fix #386: final fat jar is not updated in docker build directory\n\nUpdated code in JKubeBuildTarArchiver to allow copying files when already existing."}, "afterCommit": {"oid": "92ee802079ae0265d47992c20b0f475d86372bfc", "author": {"user": {"login": "rohanKanojia", "name": "Rohan Kumar "}}, "url": "https://github.com/eclipse/jkube/commit/92ee802079ae0265d47992c20b0f475d86372bfc", "committedDate": "2020-10-01T07:55:48Z", "message": "Fix #386: final fat jar is not updated in docker build directory\n\nUpdated code in JKubeBuildTarArchiver to allow copying files when already existing."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "92ee802079ae0265d47992c20b0f475d86372bfc", "author": {"user": {"login": "rohanKanojia", "name": "Rohan Kumar "}}, "url": "https://github.com/eclipse/jkube/commit/92ee802079ae0265d47992c20b0f475d86372bfc", "committedDate": "2020-10-01T07:55:48Z", "message": "Fix #386: final fat jar is not updated in docker build directory\n\nUpdated code in JKubeBuildTarArchiver to allow copying files when already existing."}, "afterCommit": {"oid": "f19f3ee47edfcd117f2862de171b6e1371e03095", "author": {"user": {"login": "rohanKanojia", "name": "Rohan Kumar "}}, "url": "https://github.com/eclipse/jkube/commit/f19f3ee47edfcd117f2862de171b6e1371e03095", "committedDate": "2020-10-01T07:56:41Z", "message": "Fix #386: final fat jar is not updated in docker build directory\n\nUpdated code in JKubeBuildTarArchiver to allow copying files when already existing."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f19f3ee47edfcd117f2862de171b6e1371e03095", "author": {"user": {"login": "rohanKanojia", "name": "Rohan Kumar "}}, "url": "https://github.com/eclipse/jkube/commit/f19f3ee47edfcd117f2862de171b6e1371e03095", "committedDate": "2020-10-01T07:56:41Z", "message": "Fix #386: final fat jar is not updated in docker build directory\n\nUpdated code in JKubeBuildTarArchiver to allow copying files when already existing."}, "afterCommit": {"oid": "9b3c062e589786296d7fa63cf93311ceb6582e17", "author": {"user": {"login": "rohanKanojia", "name": "Rohan Kumar "}}, "url": "https://github.com/eclipse/jkube/commit/9b3c062e589786296d7fa63cf93311ceb6582e17", "committedDate": "2020-10-01T09:16:42Z", "message": "Fix #386: final fat jar is not updated in docker build directory\n\nUpdated code in JKubeBuildTarArchiver to allow copying files when already existing."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAxNzc2OTk1", "url": "https://github.com/eclipse/jkube/pull/420#pullrequestreview-501776995", "createdAt": "2020-10-05T07:20:33Z", "commit": {"oid": "9b3c062e589786296d7fa63cf93311ceb6582e17"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQwNzoyMDozM1rOHcQOEw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQwNzoyMDozM1rOHcQOEw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTM4NzkyMw==", "bodyText": "I don't understand the purpose of this statement.\nIs this supposed to prevent copying a file to \"itself\"? if this is the case, is it possible to at least change to something like !srcFile.equals(targetFile) to make it more obvious?\nHowever, I'm still not sure how this belongs here. It should make more sense within the FileUtils#copyFile method.", "url": "https://github.com/eclipse/jkube/pull/420#discussion_r499387923", "createdAt": "2020-10-05T07:20:33Z", "author": {"login": "manusa"}, "path": "jkube-kit/build/api/src/main/java/org/eclipse/jkube/kit/build/api/assembly/JKubeBuildTarArchiver.java", "diffHunk": "@@ -81,4 +79,8 @@ public File createArchive(File inputDirectory, BuildDirs buildDirs, ArchiveCompr\n         return JKubeTarArchiver.createTarBall(outputFile, inputDirectory, fileListToAddInTarball, fileModeMap, compression);\n     }\n \n+    private boolean shouldCopyFileToAssemblyDir(File srcFile, File targetFile) throws IOException {\n+        return !srcFile.getCanonicalPath().equals(targetFile.getCanonicalPath());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b3c062e589786296d7fa63cf93311ceb6582e17"}, "originalPosition": 25}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3f9f519a6a8582919bc63c85ea9bf044c259242c", "author": {"user": {"login": "rohanKanojia", "name": "Rohan Kumar "}}, "url": "https://github.com/eclipse/jkube/commit/3f9f519a6a8582919bc63c85ea9bf044c259242c", "committedDate": "2020-10-05T08:57:54Z", "message": "Fix #386: final fat jar is not updated in docker build directory\n\nUpdated code in JKubeBuildTarArchiver to allow copying files when already existing."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9b3c062e589786296d7fa63cf93311ceb6582e17", "author": {"user": {"login": "rohanKanojia", "name": "Rohan Kumar "}}, "url": "https://github.com/eclipse/jkube/commit/9b3c062e589786296d7fa63cf93311ceb6582e17", "committedDate": "2020-10-01T09:16:42Z", "message": "Fix #386: final fat jar is not updated in docker build directory\n\nUpdated code in JKubeBuildTarArchiver to allow copying files when already existing."}, "afterCommit": {"oid": "3f9f519a6a8582919bc63c85ea9bf044c259242c", "author": {"user": {"login": "rohanKanojia", "name": "Rohan Kumar "}}, "url": "https://github.com/eclipse/jkube/commit/3f9f519a6a8582919bc63c85ea9bf044c259242c", "committedDate": "2020-10-05T08:57:54Z", "message": "Fix #386: final fat jar is not updated in docker build directory\n\nUpdated code in JKubeBuildTarArchiver to allow copying files when already existing."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAxOTQ3Njg5", "url": "https://github.com/eclipse/jkube/pull/420#pullrequestreview-501947689", "createdAt": "2020-10-05T11:09:26Z", "commit": {"oid": "3f9f519a6a8582919bc63c85ea9bf044c259242c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 256, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}