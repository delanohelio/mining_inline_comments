{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQ1NjQwOTk2", "number": 531, "title": "Fix: Refactor tests in `KeyStoreUtilTest` to avoid duplication (#472)", "bodyText": "Signed-off-by: Alejandro Mart\u00ednez alex1983bcn@gmail.com\nDescription\ncloses: #472\nType of change\n\n Bug fix (non-breaking change which fixes an issue)\n Feature (non-breaking change which adds functionality)\n Breaking change (fix or feature that would cause existing functionality to change\n Chore (non-breaking change which doesn't affect codebase;\ntest, version modification, documentation, etc.)\n\nChecklist\n\n I have read the contributing guidelines\n I signed-off my commit with a user that has signed the Eclipse Contributor Agreement\n I Added CHANGELOG entry\n I have implemented unit tests to cover my changes\n I have updated the documentation accordingly\n No new bugs, code smells, etc. in SonarCloud report\n I tested my code in Kubernetes\n I tested my code in OpenShift", "createdAt": "2020-12-25T23:56:06Z", "url": "https://github.com/eclipse/jkube/pull/531", "merged": true, "mergeCommit": {"oid": "00231212b0aa565c0629f894417b0c9210133f19"}, "closed": true, "closedAt": "2021-01-07T18:51:53Z", "author": {"login": "alexdeveng"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdpyzwfgBqjQxNDkzMzc2MzY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdt4uzdAFqTU2MzczNjM0Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1fcb5b5fddf5d729edfc91659471a1e096a485ae", "author": {"user": {"login": "alexdeveng", "name": "Alejandro Martinez"}}, "url": "https://github.com/eclipse/jkube/commit/1fcb5b5fddf5d729edfc91659471a1e096a485ae", "committedDate": "2020-12-25T23:42:19Z", "message": "Add parametrized tests to reduce duplication at key store util tests\n\nSigned-off-by: Alejandro Mart\u00ednez <alex1983bcn@gmail.com>"}, "afterCommit": {"oid": "1ba17c4cffb0f3c3fa2f5a54f1fa48ca8216cf13", "author": {"user": {"login": "alexdeveng", "name": "Alejandro Martinez"}}, "url": "https://github.com/eclipse/jkube/commit/1ba17c4cffb0f3c3fa2f5a54f1fa48ca8216cf13", "committedDate": "2020-12-26T01:39:34Z", "message": "Add parametrized tests to reduce duplication at key store util tests\n\nSigned-off-by: Alejandro Mart\u00ednez <alex1983bcn@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1ba17c4cffb0f3c3fa2f5a54f1fa48ca8216cf13", "author": {"user": {"login": "alexdeveng", "name": "Alejandro Martinez"}}, "url": "https://github.com/eclipse/jkube/commit/1ba17c4cffb0f3c3fa2f5a54f1fa48ca8216cf13", "committedDate": "2020-12-26T01:39:34Z", "message": "Add parametrized tests to reduce duplication at key store util tests\n\nSigned-off-by: Alejandro Mart\u00ednez <alex1983bcn@gmail.com>"}, "afterCommit": {"oid": "5091259921acd8eec7b2a5ef49ae2a334ea5771b", "author": {"user": {"login": "alexdeveng", "name": "Alejandro Martinez"}}, "url": "https://github.com/eclipse/jkube/commit/5091259921acd8eec7b2a5ef49ae2a334ea5771b", "committedDate": "2020-12-26T01:44:24Z", "message": "Add parametrized tests to reduce duplication at key store util tests\n\nSigned-off-by: Alejandro Mart\u00ednez <alex1983bcn@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5091259921acd8eec7b2a5ef49ae2a334ea5771b", "author": {"user": {"login": "alexdeveng", "name": "Alejandro Martinez"}}, "url": "https://github.com/eclipse/jkube/commit/5091259921acd8eec7b2a5ef49ae2a334ea5771b", "committedDate": "2020-12-26T01:44:24Z", "message": "Add parametrized tests to reduce duplication at key store util tests\n\nSigned-off-by: Alejandro Mart\u00ednez <alex1983bcn@gmail.com>"}, "afterCommit": {"oid": "8d2e8a57c86af8ab95c8a5bd5c4b28df4cfb9af4", "author": {"user": {"login": "alexdeveng", "name": "Alejandro Martinez"}}, "url": "https://github.com/eclipse/jkube/commit/8d2e8a57c86af8ab95c8a5bd5c4b28df4cfb9af4", "committedDate": "2020-12-26T01:47:18Z", "message": "Add parametrized tests to reduce duplication at key store util tests\n\nSigned-off-by: Alejandro Mart\u00ednez <alex1983bcn@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYwODIzNjc4", "url": "https://github.com/eclipse/jkube/pull/531#pullrequestreview-560823678", "createdAt": "2021-01-04T07:36:35Z", "commit": {"oid": "8d2e8a57c86af8ab95c8a5bd5c4b28df4cfb9af4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNFQwNzozNjozNVrOINn1LA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNFQwNzozNjozNVrOINn1LA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTE1NDk4OA==", "bodyText": "I think you are the author of this file :-) .", "url": "https://github.com/eclipse/jkube/pull/531#discussion_r551154988", "createdAt": "2021-01-04T07:36:35Z", "author": {"login": "rohanKanojia"}, "path": "jkube-kit/build/service/docker/src/test/java/org/eclipse/jkube/kit/build/service/docker/access/KeyStoreUtilLoadPrivateKeyTest.java", "diffHunk": "@@ -0,0 +1,60 @@\n+/**\n+ * Copyright (c) 2019 Red Hat, Inc.\n+ * This program and the accompanying materials are made\n+ * available under the terms of the Eclipse Public License 2.0\n+ * which is available at:\n+ *\n+ *     https://www.eclipse.org/legal/epl-2.0/\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *\n+ * Contributors:\n+ *   Red Hat, Inc. - initial API and implementation\n+ */\n+package org.eclipse.jkube.kit.build.service.docker.access;\n+\n+import java.io.FileNotFoundException;\n+import java.net.URL;\n+import java.security.PrivateKey;\n+\n+import org.junit.Test;\n+import org.junit.runner.RunWith;\n+import org.junit.runners.Parameterized;\n+\n+import static org.junit.Assert.assertNotNull;\n+\n+/**\n+ * @author Stas Sukhanov\n+ * @since 08.03.2017\n+ */", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8d2e8a57c86af8ab95c8a5bd5c4b28df4cfb9af4"}, "originalPosition": 29}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYwODIzODA2", "url": "https://github.com/eclipse/jkube/pull/531#pullrequestreview-560823806", "createdAt": "2021-01-04T07:36:54Z", "commit": {"oid": "8d2e8a57c86af8ab95c8a5bd5c4b28df4cfb9af4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6090fde37af51ec799b3a0a9035000da5c2c6269", "author": {"user": {"login": "alexdeveng", "name": "Alejandro Martinez"}}, "url": "https://github.com/eclipse/jkube/commit/6090fde37af51ec799b3a0a9035000da5c2c6269", "committedDate": "2021-01-05T16:42:00Z", "message": "Add parametrized tests to reduce duplication at key store util tests\n\nSigned-off-by: Alejandro Mart\u00ednez <alex1983bcn@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8d2e8a57c86af8ab95c8a5bd5c4b28df4cfb9af4", "author": {"user": {"login": "alexdeveng", "name": "Alejandro Martinez"}}, "url": "https://github.com/eclipse/jkube/commit/8d2e8a57c86af8ab95c8a5bd5c4b28df4cfb9af4", "committedDate": "2020-12-26T01:47:18Z", "message": "Add parametrized tests to reduce duplication at key store util tests\n\nSigned-off-by: Alejandro Mart\u00ednez <alex1983bcn@gmail.com>"}, "afterCommit": {"oid": "6090fde37af51ec799b3a0a9035000da5c2c6269", "author": {"user": {"login": "alexdeveng", "name": "Alejandro Martinez"}}, "url": "https://github.com/eclipse/jkube/commit/6090fde37af51ec799b3a0a9035000da5c2c6269", "committedDate": "2021-01-05T16:42:00Z", "message": "Add parametrized tests to reduce duplication at key store util tests\n\nSigned-off-by: Alejandro Mart\u00ednez <alex1983bcn@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8d2e8a57c86af8ab95c8a5bd5c4b28df4cfb9af4", "author": {"user": {"login": "alexdeveng", "name": "Alejandro Martinez"}}, "url": "https://github.com/eclipse/jkube/commit/8d2e8a57c86af8ab95c8a5bd5c4b28df4cfb9af4", "committedDate": "2020-12-26T01:47:18Z", "message": "Add parametrized tests to reduce duplication at key store util tests\n\nSigned-off-by: Alejandro Mart\u00ednez <alex1983bcn@gmail.com>"}, "afterCommit": {"oid": "6090fde37af51ec799b3a0a9035000da5c2c6269", "author": {"user": {"login": "alexdeveng", "name": "Alejandro Martinez"}}, "url": "https://github.com/eclipse/jkube/commit/6090fde37af51ec799b3a0a9035000da5c2c6269", "committedDate": "2021-01-05T16:42:00Z", "message": "Add parametrized tests to reduce duplication at key store util tests\n\nSigned-off-by: Alejandro Mart\u00ednez <alex1983bcn@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "22c20ba5914d2230cfde8201201bd8eb82d75fbd", "author": {"user": {"login": "alexdeveng", "name": "Alejandro Martinez"}}, "url": "https://github.com/eclipse/jkube/commit/22c20ba5914d2230cfde8201201bd8eb82d75fbd", "committedDate": "2021-01-06T00:32:10Z", "message": "Remove author and since from key store util load private key test\n\nSigned-off-by: Alejandro Mart\u00ednez <alex1983bcn@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYzMzY1OTg1", "url": "https://github.com/eclipse/jkube/pull/531#pullrequestreview-563365985", "createdAt": "2021-01-07T10:15:37Z", "commit": {"oid": "22c20ba5914d2230cfde8201201bd8eb82d75fbd"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wN1QxMDoxNTozN1rOIPmv6g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wN1QxMDoxNTozN1rOIPmv6g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MzIzNDQxMA==", "bodyText": "nit: Can we make the copy-pasted method in KeyStoreUtilTest static (package private) and reuse it?", "url": "https://github.com/eclipse/jkube/pull/531#discussion_r553234410", "createdAt": "2021-01-07T10:15:37Z", "author": {"login": "manusa"}, "path": "jkube-kit/build/service/docker/src/test/java/org/eclipse/jkube/kit/build/service/docker/access/KeyStoreUtilLoadPrivateKeyTest.java", "diffHunk": "@@ -0,0 +1,56 @@\n+/**\n+ * Copyright (c) 2019 Red Hat, Inc.\n+ * This program and the accompanying materials are made\n+ * available under the terms of the Eclipse Public License 2.0\n+ * which is available at:\n+ *\n+ *     https://www.eclipse.org/legal/epl-2.0/\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *\n+ * Contributors:\n+ *   Red Hat, Inc. - initial API and implementation\n+ */\n+package org.eclipse.jkube.kit.build.service.docker.access;\n+\n+import java.io.FileNotFoundException;\n+import java.net.URL;\n+import java.security.PrivateKey;\n+\n+import org.junit.Test;\n+import org.junit.runner.RunWith;\n+import org.junit.runners.Parameterized;\n+\n+import static org.junit.Assert.assertNotNull;\n+\n+@RunWith(Parameterized.class)\n+public class KeyStoreUtilLoadPrivateKeyTest {\n+\n+  @Parameterized.Parameter\n+  public String loadPrivateKeyTestName;\n+\n+  @Parameterized.Parameter(1)\n+  public String privateKeyFile;\n+\n+  @Parameterized.Parameters(name = \"{index}: {0}\")\n+  public static Object[][] data() {\n+    return new Object[][] {\n+        { \"loadPrivateKeyDefault\", \"keys/pkcs1.pem\" },\n+        { \"loadPrivateKeyPKCS8\", \"keys/pkcs8.pem\" },\n+        { \"loadPrivateKeyECDSA\", \"keys/ecdsa.pem\" }\n+    };\n+  }\n+\n+  @Test\n+  public void loadPrivateKey() throws Exception {\n+    PrivateKey privateKey = KeyStoreUtil.loadPrivateKey(getFile(privateKeyFile));\n+    assertNotNull(privateKey);\n+  }\n+\n+  private String getFile(String path) throws FileNotFoundException {\n+    URL fileURL = KeyStoreUtilTest.class.getResource(path);\n+    if (fileURL == null)\n+      throw new FileNotFoundException(\"Required private key : '\" + path + \"' not found it test resource directory\");\n+    return fileURL.getFile();\n+  }\n+}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "22c20ba5914d2230cfde8201201bd8eb82d75fbd"}, "originalPosition": 56}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "46e1f52c015a5c204f930309e54cb97b76cd378a", "author": {"user": {"login": "alexdeveng", "name": "Alejandro Martinez"}}, "url": "https://github.com/eclipse/jkube/commit/46e1f52c015a5c204f930309e54cb97b76cd378a", "committedDate": "2021-01-07T18:16:16Z", "message": "Reuse get file method for Key Store Util Tests\n\nSigned-off-by: Alejandro Mart\u00ednez <alex1983bcn@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYzNzM2MzQ2", "url": "https://github.com/eclipse/jkube/pull/531#pullrequestreview-563736346", "createdAt": "2021-01-07T18:49:38Z", "commit": {"oid": "46e1f52c015a5c204f930309e54cb97b76cd378a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 235, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}