{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU3NzYyNzA0", "number": 325, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQwNTozNTo1OFrOETGc7g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQwOTo0MTozMVrOETLVKA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg4NDY0MTEwOnYy", "diffSide": "RIGHT", "path": "jkube-kit/enricher/generic/src/test/java/org/eclipse/jkube/enricher/generic/MavenProjectEnricherTest.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQwNTozNTo1OFrOG4pPfg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQwOTowNjoyOFrOG4vhJw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjA0OTE1MA==", "bodyText": "This test belongs to a different Suite, please create ProjectLabelEnricherTest (remember to add license header, etc.).\nIt would be nice to have a test for a configured app label and a test for the default app label (by mocking artifactId)", "url": "https://github.com/eclipse/jkube/pull/325#discussion_r462049150", "createdAt": "2020-07-29T05:35:58Z", "author": {"login": "manusa"}, "path": "jkube-kit/enricher/generic/src/test/java/org/eclipse/jkube/enricher/generic/MavenProjectEnricherTest.java", "diffHunk": "@@ -79,6 +79,45 @@ public void testGeneratedResources() {\n         assertNull(selectors.get(\"version\"));\n         assertNull(selectors.get(\"project\"));\n     }\n+    \n+    @Test", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8a1eabf6c11e7842cb6e582bb4144c025caebb70"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjA4ODU4Mg==", "bodyText": "Sure. Makes sense.", "url": "https://github.com/eclipse/jkube/pull/325#discussion_r462088582", "createdAt": "2020-07-29T07:16:37Z", "author": {"login": "TueDissingWork"}, "path": "jkube-kit/enricher/generic/src/test/java/org/eclipse/jkube/enricher/generic/MavenProjectEnricherTest.java", "diffHunk": "@@ -79,6 +79,45 @@ public void testGeneratedResources() {\n         assertNull(selectors.get(\"version\"));\n         assertNull(selectors.get(\"project\"));\n     }\n+    \n+    @Test", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjA0OTE1MA=="}, "originalCommit": {"oid": "8a1eabf6c11e7842cb6e582bb4144c025caebb70"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjEzOTYyMQ==", "bodyText": "Should I also implment some validation on the APP field?\nIt doens't make sense with an empty string, and other patterns are likely also not supported by Kubernetes.", "url": "https://github.com/eclipse/jkube/pull/325#discussion_r462139621", "createdAt": "2020-07-29T08:46:27Z", "author": {"login": "TueDissingWork"}, "path": "jkube-kit/enricher/generic/src/test/java/org/eclipse/jkube/enricher/generic/MavenProjectEnricherTest.java", "diffHunk": "@@ -79,6 +79,45 @@ public void testGeneratedResources() {\n         assertNull(selectors.get(\"version\"));\n         assertNull(selectors.get(\"project\"));\n     }\n+    \n+    @Test", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjA0OTE1MA=="}, "originalCommit": {"oid": "8a1eabf6c11e7842cb6e582bb4144c025caebb70"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjE1MTk3NQ==", "bodyText": "I don't think it's necessary (if someone overrides this value is because they want to do so purposefully), but go ahead if you want.\nYou have a helper method in https://github.com/fabric8io/kubernetes-client/blob/25c09cd5d790e55407f999b73502344b2d5f6d49/kubernetes-client/src/main/java/io/fabric8/kubernetes/client/utils/KubernetesResourceUtil.java#L275\nwhich can be called once all labels are computed (i.e. createLabels > createAndValidateLabels)", "url": "https://github.com/eclipse/jkube/pull/325#discussion_r462151975", "createdAt": "2020-07-29T09:06:28Z", "author": {"login": "manusa"}, "path": "jkube-kit/enricher/generic/src/test/java/org/eclipse/jkube/enricher/generic/MavenProjectEnricherTest.java", "diffHunk": "@@ -79,6 +79,45 @@ public void testGeneratedResources() {\n         assertNull(selectors.get(\"version\"));\n         assertNull(selectors.get(\"project\"));\n     }\n+    \n+    @Test", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjA0OTE1MA=="}, "originalCommit": {"oid": "8a1eabf6c11e7842cb6e582bb4144c025caebb70"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg4NDY0Njg3OnYy", "diffSide": "RIGHT", "path": "jkube-kit/enricher/generic/src/main/java/org/eclipse/jkube/enricher/generic/ProjectLabelEnricher.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQwNTozOTowOVrOG4pS8w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQwNTozOTowOVrOG4pS8w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjA1MDAzNQ==", "bodyText": "I think this can be safely replaced by\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    \tString customAppName = Configs.asString(getConfig(Config.CUSTOM_APP_NAME));\n          \n          \n            \n                    \tif (customAppName != null && !customAppName.isEmpty()) {\n          \n          \n            \n                    \t\tret.put(\"app\", customAppName);\n          \n          \n            \n                    \t} else {\n          \n          \n            \n                            // default label is app\n          \n          \n            \n                            ret.put(\"app\", groupArtifactVersion.getArtifactId());\n          \n          \n            \n                    \t}\n          \n          \n            \n            /* ... */\n          \n          \n            \n            /* L58 */ CUSTOM_APP_NAME(\"customAppName\", null);\n          \n          \n            \n            /* ... */\n          \n          \n            \n                            ret.put(\"app\", getConfig(Config.CUSTOM_APP_NAME, groupArtifactVersion.getArtifactId());", "url": "https://github.com/eclipse/jkube/pull/325#discussion_r462050035", "createdAt": "2020-07-29T05:39:09Z", "author": {"login": "manusa"}, "path": "jkube-kit/enricher/generic/src/main/java/org/eclipse/jkube/enricher/generic/ProjectLabelEnricher.java", "diffHunk": "@@ -160,8 +161,13 @@ public void visit(ObjectMetaBuilder element) {\n         if (enableProjectLabel) {\n             ret.put(\"project\", groupArtifactVersion.getArtifactId());\n         } else {\n-            // default label is app\n-            ret.put(\"app\", groupArtifactVersion.getArtifactId());\n+        \tString customAppName = Configs.asString(getConfig(Config.CUSTOM_APP_NAME));\n+        \tif (customAppName != null && !customAppName.isEmpty()) {\n+        \t\tret.put(\"app\", customAppName);\n+        \t} else {\n+                // default label is app\n+                ret.put(\"app\", groupArtifactVersion.getArtifactId());\n+        \t}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8a1eabf6c11e7842cb6e582bb4144c025caebb70"}, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg4NDY1Mjg4OnYy", "diffSide": "RIGHT", "path": "jkube-kit/enricher/generic/src/main/java/org/eclipse/jkube/enricher/generic/ProjectLabelEnricher.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQwNTo0MTo1NVrOG4pWWg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQwNTo0MTo1NVrOG4pWWg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjA1MDkwNg==", "bodyText": "I think leaving the config value just as:\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                \tCUSTOM_APP_NAME(\"customAppName\", \"\");\n          \n          \n            \n                \tAPP(\"app\", \"\");\n          \n      \n    \n    \n  \n\nwould make more sense and is probably better aligned with most of the other enrichers (configuration key matched target property name)\njkube.enricher.jkube-project-label.app is also clearer than jkube.enricher.jkube-project-label.customAppName", "url": "https://github.com/eclipse/jkube/pull/325#discussion_r462050906", "createdAt": "2020-07-29T05:41:55Z", "author": {"login": "manusa"}, "path": "jkube-kit/enricher/generic/src/main/java/org/eclipse/jkube/enricher/generic/ProjectLabelEnricher.java", "diffHunk": "@@ -54,7 +54,8 @@\n \n     @AllArgsConstructor\n     private enum Config implements Configs.Config {\n-        USE_PROJECT_LABEL(\"useProjectLabel\", \"false\");\n+        USE_PROJECT_LABEL(\"useProjectLabel\", \"false\"),\n+    \tCUSTOM_APP_NAME(\"customAppName\", \"\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8a1eabf6c11e7842cb6e582bb4144c025caebb70"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg4NTQ0MDQwOnYy", "diffSide": "RIGHT", "path": "kubernetes-maven-plugin/doc/src/main/asciidoc/inc/enricher/_jkube_project_label.adoc", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQwOTo0MTozMVrOG4wyVw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQwOTo0MTozMVrOG4wyVw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjE3Mjc1OQ==", "bodyText": "can you change the doc as well from customAppName to App ?", "url": "https://github.com/eclipse/jkube/pull/325#discussion_r462172759", "createdAt": "2020-07-29T09:41:31Z", "author": {"login": "dev-gaur"}, "path": "kubernetes-maven-plugin/doc/src/main/asciidoc/inc/enricher/_jkube_project_label.adoc", "diffHunk": "@@ -16,7 +16,11 @@ been replaced by the `app` label in newer versions of the plugin.\n \n   Defaults to `false`.\n | `jkube.enricher.jkube-project-label.useProjectLabel`\n+| *customAppName*", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c905c12acf7bdc46c3d6ee46fd90b63993b48fe3"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1871, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}