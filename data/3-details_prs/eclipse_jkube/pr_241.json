{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMyODYyMzUz", "number": 241, "title": "refactor: Docker-file-simple quickstart", "bodyText": "Description\nRefactored docker-file-simple (zero-config-dockerfile)\n\nRenamed to make consistent with rest of docker-file examples\nRemoved unnecessary dependencies + tests to speed up build times (quickstarts CI job)\nAdded minimum configuration to expose a service\nMade application runnable\nStatic file is served from rest endpoint\n\nType of change\n\n\n Bug fix (non-breaking change which fixes an issue)\n Feature (non-breaking change which adds functionality)\n Breaking change (fix or feature that would cause existing functionality to change)\n\nChecklist\n\n I have read the contributing guidelines\n I signed-off my commit with a user that has signed the Eclipse Contributor Agreement\n I Added CHANGELOG entry\n I have implemented unit tests to cover my changes\n I have updated the documentation accordingly\n No new bugs, code smells, etc. in SonarCloud report\n I tested my code in Kubernetes\n I tested my code in OpenShift", "createdAt": "2020-06-11T06:13:33Z", "url": "https://github.com/eclipse/jkube/pull/241", "merged": true, "mergeCommit": {"oid": "02155e6f904d1552515e95ef3225076c673d0b65"}, "closed": true, "closedAt": "2020-06-11T07:21:11Z", "author": {"login": "manusa"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcqIMF6gFqTQyODYyMjUwNQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcqJA8ugFqTQyODY1MzI0Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI4NjIyNTA1", "url": "https://github.com/eclipse/jkube/pull/241#pullrequestreview-428622505", "createdAt": "2020-06-11T06:23:20Z", "commit": {"oid": "afb87640f447274713a39dc06deb51f8446bc135"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQwNjoyMzoyMVrOGiQAFA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQwNjoyMzoyMVrOGiQAFA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODU2NjkzMg==", "bodyText": "Should we add additional steps for adding Deployment and Service fragment for port configuration here?", "url": "https://github.com/eclipse/jkube/pull/241#discussion_r438566932", "createdAt": "2020-06-11T06:23:21Z", "author": {"login": "rohanKanojia"}, "path": "quickstarts/maven/docker-file-simple/README.md", "diffHunk": "@@ -0,0 +1,99 @@\n+# Eclipse JKube sample with simple Dockerfile mode\n+\n+You can build your Docker images with just providing one `Dockerfile` in your project root directory and Eclipse JKube\n+will pick it up for docker build. \n+For simple `Dockerfile` mode, your project's current directory is provided as docker context directory for build.\n+If you want to copy some files from your current directory(`target/zero-config-dockerfile.jar` in this case), you need\n+to prefix project directory contents with default assembly name(i.e `maven`). So your `Dockerfile` would look like this:\n+```\n+FROM openjdk:latest\n+COPY maven/target/docker-file-simple.jar /deployments/docker-file-simple.jar\n+COPY maven/static-dir-in-project-root/my-file.txt /tmp/my-file.txt\n+CMD [\"java\", \"-jar\", \"/deployments/docker-file-simple.jar\"]\n+```\n+\n+# Building Docker image\n+```\n+$ mvn k8s:build\n+[INFO] Scanning for projects...\n+[INFO] \n+[INFO] ----------------< org.eclipse.jkube:docker-file-simple >----------------\n+[INFO] Building Eclipse JKube :: Quickstarts :: Maven :: Dockerfile :: Simple 1.0.0-SNAPSHOT\n+[INFO] --------------------------------[ jar ]---------------------------------\n+[INFO] \n+[INFO] --- kubernetes-maven-plugin:1.0.0-SNAPSHOT:build (default-cli) @ docker-file-simple ---\n+[INFO] k8s: Running in Kubernetes mode\n+[INFO] k8s: Building Docker image in Kubernetes mode\n+[INFO] k8s: [jkube/docker-file-simple:latest]: Created docker-build.tar in 261 milliseconds\n+[INFO] k8s: [jkube/docker-file-simple:latest]: Built image sha256:52d46\n+[INFO] ------------------------------------------------------------------------\n+[INFO] BUILD SUCCESS\n+[INFO] ------------------------------------------------------------------------\n+[INFO] Total time:  2.977 s\n+[INFO] Finished at: 2020-06-11T07:59:44+02:00\n+[INFO] ------------------------------------------------------------------------\n+$ docker images | grep docker-file-simple\n+jkube/docker-file-simple                  1.0                         c8df6da232b3        8 seconds ago       516MB\n+```\n+\n+# Generating Kubernetes Manifests and Deploying to Kubernetes\n+```\n+$ mvn k8s:resource k8s:apply\n+[INFO] Scanning for projects...\n+[INFO] \n+[INFO] ----------------< org.eclipse.jkube:docker-file-simple >----------------\n+[INFO] Building Eclipse JKube :: Quickstarts :: Maven :: Dockerfile :: Simple 1.0.0-SNAPSHOT\n+[INFO] --------------------------------[ jar ]---------------------------------\n+[INFO] \n+[INFO] --- kubernetes-maven-plugin:1.0.0-SNAPSHOT:resource (default-cli) @ docker-file-simple ---\n+[INFO] k8s: jkube-controller: Adding a default Deployment\n+[INFO] k8s: jkube-service: Adding a default service 'docker-file-simple' with ports [8080]\n+[INFO] k8s: jkube-healthcheck-spring-boot: Adding readiness probe on port 8080, path='/actuator/health', scheme='HTTP', with initial delay 10 seconds\n+[INFO] k8s: jkube-healthcheck-spring-boot: Adding liveness probe on port 8080, path='/actuator/health', scheme='HTTP', with initial delay 180 seconds\n+[INFO] k8s: jkube-revision-history: Adding revision history limit to 2\n+[INFO] k8s: validating /home/user/00-MN/projects/forks/jkube/quickstarts/maven/docker-file-simple/target/classes/META-INF/jkube/kubernetes/docker-file-simple-deployment.yml resource\n+[INFO] k8s: validating /home/user/00-MN/projects/forks/jkube/quickstarts/maven/docker-file-simple/target/classes/META-INF/jkube/kubernetes/docker-file-simple-service.yml resource\n+[INFO] \n+[INFO] --- kubernetes-maven-plugin:1.0.0-SNAPSHOT:apply (default-cli) @ docker-file-simple ---\n+[INFO] k8s: Using Kubernetes at https://172.17.0.3:8443/ in namespace default with manifest /home/user/00-MN/projects/forks/jkube/quickstarts/maven/docker-file-simple/target/classes/META-INF/jkube/kubernetes.yml \n+[INFO] k8s: Using namespace: default\n+[INFO] k8s: Updating a Service from kubernetes.yml\n+[INFO] k8s: Updated Service: target/jkube/applyJson/default/service-docker-file-simple-1.json\n+[INFO] k8s: Updating Deployment from kubernetes.yml\n+[INFO] k8s: Updated Deployment: target/jkube/applyJson/default/deployment-docker-file-simple-2.json\n+[INFO] k8s: HINT: Use the command `kubectl get pods -w` to watch your pods start up\n+[INFO] ------------------------------------------------------------------------\n+[INFO] BUILD SUCCESS\n+[INFO] ------------------------------------------------------------------------\n+[INFO] Total time:  7.688 s\n+[INFO] Finished at: 2020-06-11T08:01:21+02:00\n+[INFO] ------------------------------------------------------------------------\n+$ kubectl get pods\n+NAME                                      READY   STATUS             RESTARTS   AGE\n+docker-file-simple-686cddc6b9-lvgtv       0/1     Running            0          84s\n+$ kubectl logs pod/zero-config-dockerfile-686cddc6b9-lvgtv", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "afb87640f447274713a39dc06deb51f8446bc135"}, "originalPosition": 74}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "da6b62815f365062fa40859c72ed23fdbd898f96", "author": {"user": {"login": "manusa", "name": "Marc Nuri"}}, "url": "https://github.com/eclipse/jkube/commit/da6b62815f365062fa40859c72ed23fdbd898f96", "committedDate": "2020-06-11T06:51:28Z", "message": "refactor: Docker-file-simple quickstart\n\n- Removed unnecessary dependencies + tests to speed up build times (quickstarts CI job)\n- Added minimum configuration to expose a service\n- Made application runnable\n- Static file is served from rest endpoint\n\nSigned-off-by: Marc Nuri <marc@marcnuri.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "afb87640f447274713a39dc06deb51f8446bc135", "author": {"user": {"login": "manusa", "name": "Marc Nuri"}}, "url": "https://github.com/eclipse/jkube/commit/afb87640f447274713a39dc06deb51f8446bc135", "committedDate": "2020-06-11T06:11:52Z", "message": "refactor: Docker-file-simple quickstart\n\n- Removed unnecessary dependencies + tests to speed up build times (quickstarts CI job)\n- Added minimum configuration to expose a service\n- Made application runnable\n- Static file is served from rest endpoint\n\nSigned-off-by: Marc Nuri <marc@marcnuri.com>"}, "afterCommit": {"oid": "da6b62815f365062fa40859c72ed23fdbd898f96", "author": {"user": {"login": "manusa", "name": "Marc Nuri"}}, "url": "https://github.com/eclipse/jkube/commit/da6b62815f365062fa40859c72ed23fdbd898f96", "committedDate": "2020-06-11T06:51:28Z", "message": "refactor: Docker-file-simple quickstart\n\n- Removed unnecessary dependencies + tests to speed up build times (quickstarts CI job)\n- Added minimum configuration to expose a service\n- Made application runnable\n- Static file is served from rest endpoint\n\nSigned-off-by: Marc Nuri <marc@marcnuri.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI4NjUzMjQz", "url": "https://github.com/eclipse/jkube/pull/241#pullrequestreview-428653243", "createdAt": "2020-06-11T07:21:05Z", "commit": {"oid": "da6b62815f365062fa40859c72ed23fdbd898f96"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 272, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}