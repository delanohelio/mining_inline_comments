{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY0NDMxNDYw", "number": 349, "title": "Fix #341 : ImageChangeTrigger now gets applied when resource fragments used", "bodyText": "Fix #341\nEarlier due to sidecar refactor, JKube wasn't able to find out\ndefault application container's name for which we need to add\nImageChange triggers during openshift S2I build when we were\nproviding resource fragments in which container name was absent.\nDescription\n\nType of change\n\n\n Bug fix (non-breaking change which fixes an issue)\n Feature (non-breaking change which adds functionality)\n Breaking change (fix or feature that would cause existing functionality to change\n Chore (non-breaking change which doesn't affect codebase;\ntest, version modification, documentation, etc.)\n\nChecklist\n\n I have read the contributing guidelines\n I signed-off my commit with a user that has signed the Eclipse Contributor Agreement\n I Added CHANGELOG entry\n I have implemented unit tests to cover my changes\n I have updated the documentation accordingly\n No new bugs, code smells, etc. in SonarCloud report\n I tested my code in Kubernetes\n I tested my code in OpenShift", "createdAt": "2020-08-07T07:00:20Z", "url": "https://github.com/eclipse/jkube/pull/349", "merged": true, "mergeCommit": {"oid": "fd86bc94355c6026e83d4a637139c6f1de9ebdfe"}, "closed": true, "closedAt": "2020-08-18T10:49:11Z", "author": {"login": "rohanKanojia"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc_wHaXgFqTQ2ODM1ODI4Mw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdAEvW7gFqTQ2OTIwNzU1NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY4MzU4Mjgz", "url": "https://github.com/eclipse/jkube/pull/349#pullrequestreview-468358283", "createdAt": "2020-08-17T10:46:51Z", "commit": {"oid": "5a2ac870e33e79e88027c0df03d9e3b247ff858a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY4NDM1MTYw", "url": "https://github.com/eclipse/jkube/pull/349#pullrequestreview-468435160", "createdAt": "2020-08-17T12:54:22Z", "commit": {"oid": "5a2ac870e33e79e88027c0df03d9e3b247ff858a"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QxMjo1NDoyMlrOHBngrw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QxMjo1NDoyMlrOHBngrw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTQ1Nzk2Nw==", "bodyText": "Do we always the guarantee that the 0th container is the app container? I think we should add a validation here to keep this logic robust.\nPlease correct me if I'm wrong.", "url": "https://github.com/eclipse/jkube/pull/349#discussion_r471457967", "createdAt": "2020-08-17T12:54:22Z", "author": {"login": "dev-gaur"}, "path": "jkube-kit/enricher/api/src/main/java/org/eclipse/jkube/kit/enricher/api/util/KubernetesResourceUtil.java", "diffHunk": "@@ -650,76 +650,115 @@ public static String mergePodSpec(PodSpecBuilder builder, PodSpec defaultPodSpec\n         int size = defaultContainers.size();\n         if (size > 0) {\n             if (containers == null || containers.isEmpty()) {\n+                defaultApplicationContainerName = defaultContainers.get(0).getName();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5a2ac870e33e79e88027c0df03d9e3b247ff858a"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ea226f1bab8b94fd47917217c7ac402f71fe1e95", "author": {"user": {"login": "rohanKanojia", "name": "Rohan Kumar "}}, "url": "https://github.com/eclipse/jkube/commit/ea226f1bab8b94fd47917217c7ac402f71fe1e95", "committedDate": "2020-08-18T09:00:22Z", "message": "Fix #341 : ImageChangeTrigger now gets applied when resource fragments used\n\nEarlier due to sidecar refactor, JKube wasn't able to find out\ndefault application container's name for which we need to add\nImageChange triggers during openshift S2I build when we were\nproviding resource fragments in which container name was absent."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5a2ac870e33e79e88027c0df03d9e3b247ff858a", "author": {"user": {"login": "rohanKanojia", "name": "Rohan Kumar "}}, "url": "https://github.com/eclipse/jkube/commit/5a2ac870e33e79e88027c0df03d9e3b247ff858a", "committedDate": "2020-08-07T06:59:58Z", "message": "Fix #341 : ImageChangeTrigger now gets applied when resource fragments used\n\nEarlier due to sidecar refactor, JKube wasn't able to find out\ndefault application container's name for which we need to add\nImageChange triggers during openshift S2I build when we were\nproviding resource fragments in which container name was absent."}, "afterCommit": {"oid": "ea226f1bab8b94fd47917217c7ac402f71fe1e95", "author": {"user": {"login": "rohanKanojia", "name": "Rohan Kumar "}}, "url": "https://github.com/eclipse/jkube/commit/ea226f1bab8b94fd47917217c7ac402f71fe1e95", "committedDate": "2020-08-18T09:00:22Z", "message": "Fix #341 : ImageChangeTrigger now gets applied when resource fragments used\n\nEarlier due to sidecar refactor, JKube wasn't able to find out\ndefault application container's name for which we need to add\nImageChange triggers during openshift S2I build when we were\nproviding resource fragments in which container name was absent."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY5MjA3NTU0", "url": "https://github.com/eclipse/jkube/pull/349#pullrequestreview-469207554", "createdAt": "2020-08-18T10:48:35Z", "commit": {"oid": "ea226f1bab8b94fd47917217c7ac402f71fe1e95"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 241, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}