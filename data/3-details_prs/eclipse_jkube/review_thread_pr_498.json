{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIyNTc4ODA3", "number": 498, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQwNjozODowMVrOE65Wsg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQwNjozODowMVrOE65Wsg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMwMTkyNTYyOnYy", "diffSide": "RIGHT", "path": "jkube-kit/config/service/src/main/java/org/eclipse/jkube/kit/config/service/kubernetes/KubernetesUndeployService.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQwNjozODowMVrOH2OrgA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQwNjo0NzoxNlrOH2O4sA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjYyNTY2NA==", "bodyText": "When did you get a NullPointerException for this case?", "url": "https://github.com/eclipse/jkube/pull/498#discussion_r526625664", "createdAt": "2020-11-19T06:38:01Z", "author": {"login": "manusa"}, "path": "jkube-kit/config/service/src/main/java/org/eclipse/jkube/kit/config/service/kubernetes/KubernetesUndeployService.java", "diffHunk": "@@ -108,7 +108,7 @@ private void undeployCustomResources(String namespace, File resourceDir, Resourc\n   // Visible for testing\n   String currentNamespace(List<HasMetadata> entities) {\n     for (HasMetadata entity : entities) {\n-      if (entity instanceof Namespace || entity instanceof Project) {\n+      if ((entity instanceof Namespace || entity instanceof Project) && entity.getMetadata() != null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "47f1f4e93f292ef6c56f8a8fcf035cdc14cea96d"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjYyNjYzMw==", "bodyText": "When I remove this I was getting NullPointerException due to this:\n\n  \n    \n      jkube/jkube-kit/config/service/src/test/java/org/eclipse/jkube/kit/config/service/kubernetes/KubernetesUndeployServiceTest.java\n    \n    \n         Line 93\n      in\n      d223411\n    \n    \n    \n    \n\n        \n          \n           result = new HashSet<>(Arrays.asList(new Project(), namespace, pod, service));", "url": "https://github.com/eclipse/jkube/pull/498#discussion_r526626633", "createdAt": "2020-11-19T06:40:43Z", "author": {"login": "rohanKanojia"}, "path": "jkube-kit/config/service/src/main/java/org/eclipse/jkube/kit/config/service/kubernetes/KubernetesUndeployService.java", "diffHunk": "@@ -108,7 +108,7 @@ private void undeployCustomResources(String namespace, File resourceDir, Resourc\n   // Visible for testing\n   String currentNamespace(List<HasMetadata> entities) {\n     for (HasMetadata entity : entities) {\n-      if (entity instanceof Namespace || entity instanceof Project) {\n+      if ((entity instanceof Namespace || entity instanceof Project) && entity.getMetadata() != null) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjYyNTY2NA=="}, "originalCommit": {"oid": "47f1f4e93f292ef6c56f8a8fcf035cdc14cea96d"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjYyOTA0MA==", "bodyText": "Ok, but that's because the Test is providing an invalid Project/Namespace.\nIn a real-world scenario, I understand that if this happens, we shouldn't ignore it. Unless I'm wrong, receiving a Namespace/Project lacking Metadata should be a flag of something going very wrong so maybe reporting as an Exception is something we want.\nWith the current approach, we're simply assuming there's no namespace.", "url": "https://github.com/eclipse/jkube/pull/498#discussion_r526629040", "createdAt": "2020-11-19T06:47:16Z", "author": {"login": "manusa"}, "path": "jkube-kit/config/service/src/main/java/org/eclipse/jkube/kit/config/service/kubernetes/KubernetesUndeployService.java", "diffHunk": "@@ -108,7 +108,7 @@ private void undeployCustomResources(String namespace, File resourceDir, Resourc\n   // Visible for testing\n   String currentNamespace(List<HasMetadata> entities) {\n     for (HasMetadata entity : entities) {\n-      if (entity instanceof Namespace || entity instanceof Project) {\n+      if ((entity instanceof Namespace || entity instanceof Project) && entity.getMetadata() != null) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjYyNTY2NA=="}, "originalCommit": {"oid": "47f1f4e93f292ef6c56f8a8fcf035cdc14cea96d"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1839, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}