{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDYwMjI5OTA1", "number": 8232, "title": "[opensprinkler] Add water level channel", "bodyText": "This PR adds the water level channel to the opensprinkler device. This channel is calculated based on weather data and influences how long the watering will last", "createdAt": "2020-07-31T15:05:57Z", "url": "https://github.com/openhab/openhab-addons/pull/8232", "merged": true, "mergeCommit": {"oid": "7bb279030daa84a617c22f0076a6ae26e98dc1d7"}, "closed": true, "closedAt": "2020-08-20T21:31:46Z", "author": {"login": "pail23"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc6BI8lAH2gAyNDYwMjI5OTA1OmFkZWFiMTFiY2YzMTEzOWRmMmRhNWQ0ZjI3ZDRlMWM1MGZjYmMyMjk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdA3IdLgFqTQ3MjAwMDI1NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "adeab11bcf31139df2da5d4f27d4e1c50fcbc229", "author": {"user": {"login": "pail23", "name": "Paul Frank"}}, "url": "https://github.com/openhab/openhab-addons/commit/adeab11bcf31139df2da5d4f27d4e1c50fcbc229", "committedDate": "2020-07-30T15:13:22Z", "message": "Added channel for the water level\n\nSigned-off-by: Paul Frank <pail@gmx.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4e934dd6c6cab6e40a6f3faf3d381794a4f6d88b", "author": {"user": {"login": "pail23", "name": "Paul Frank"}}, "url": "https://github.com/openhab/openhab-addons/commit/4e934dd6c6cab6e40a6f3faf3d381794a4f6d88b", "committedDate": "2020-07-31T14:57:54Z", "message": "Add documentation in README\n\nSigned-off-by: Paul Frank <pail@gmx.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d6ad349a85aabf7609a3dcd12dfc3076c475116b", "author": {"user": {"login": "pail23", "name": "Paul Frank"}}, "url": "https://github.com/openhab/openhab-addons/commit/d6ad349a85aabf7609a3dcd12dfc3076c475116b", "committedDate": "2020-07-31T15:13:34Z", "message": "Undo changes in .clathpass\n\nSigned-off-by: Paul Frank <pail@gmx.net>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY3NzU1MDM2", "url": "https://github.com/openhab/openhab-addons/pull/8232#pullrequestreview-467755036", "createdAt": "2020-08-14T17:40:07Z", "commit": {"oid": "d6ad349a85aabf7609a3dcd12dfc3076c475116b"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xNFQxNzo0MDowN1rOHA9KYQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xNFQxNzo0MDowN1rOHA9KYQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDc2NDEyOQ==", "bodyText": "Can you mention that it is percent?\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            | waterlevel      | Number                 | RO | This channel shows the current water level. The water level calculated    |\n          \n          \n            \n            | waterlevel      | Number:Dimensionless                 | RO | This channel shows the current water level. The water level calculated    |", "url": "https://github.com/openhab/openhab-addons/pull/8232#discussion_r470764129", "createdAt": "2020-08-14T17:40:07Z", "author": {"login": "fwolter"}, "path": "bundles/org.openhab.binding.opensprinkler/README.md", "diffHunk": "@@ -66,6 +66,8 @@ The following is supported by the `device` thing, but only when connected using\n | rainsensor      | Switch                 | RO | This channel indicates whether rain is detected by the device or not.     |\n | currentDraw     | Number:ElectricCurrent | RO | Shows the current draw of the device. If the device does not have sensors |\n |                 |                        |    | for this metric, the channel will not be available.                       |\n+| waterlevel      | Number                 | RO | This channel shows the current water level. The water level calculated    |", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d6ad349a85aabf7609a3dcd12dfc3076c475116b"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7c5c172a8a2318fa2481a03a0e3ff724d38d896b", "author": {"user": {"login": "pail23", "name": "Paul Frank"}}, "url": "https://github.com/openhab/openhab-addons/commit/7c5c172a8a2318fa2481a03a0e3ff724d38d896b", "committedDate": "2020-08-16T18:03:08Z", "message": "Update bundles/org.openhab.binding.opensprinkler/README.md\n\nCo-authored-by: Fabian Wolter <github@fabian-wolter.de>\nSigned-off-by: Paul Frank <pail@gmx.net>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY4MDk2MjQ2", "url": "https://github.com/openhab/openhab-addons/pull/8232#pullrequestreview-468096246", "createdAt": "2020-08-16T21:25:36Z", "commit": {"oid": "7c5c172a8a2318fa2481a03a0e3ff724d38d896b"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xNlQyMToyNTozN1rOHBVXMg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xNlQyMToyNzozNVrOHBVX3w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTE2MDYyNg==", "bodyText": "probably align with other cells :)", "url": "https://github.com/openhab/openhab-addons/pull/8232#discussion_r471160626", "createdAt": "2020-08-16T21:25:37Z", "author": {"login": "FlorianSW"}, "path": "bundles/org.openhab.binding.opensprinkler/README.md", "diffHunk": "@@ -66,6 +66,8 @@ The following is supported by the `device` thing, but only when connected using\n | rainsensor      | Switch                 | RO | This channel indicates whether rain is detected by the device or not.     |\n | currentDraw     | Number:ElectricCurrent | RO | Shows the current draw of the device. If the device does not have sensors |\n |                 |                        |    | for this metric, the channel will not be available.                       |\n+| waterlevel      | Number:Dimensionless                 | RO | This channel shows the current water level. The water level calculated    |", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7c5c172a8a2318fa2481a03a0e3ff724d38d896b"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTE2MDc5OQ==", "bodyText": "awesome for refactoring this as well :)", "url": "https://github.com/openhab/openhab-addons/pull/8232#discussion_r471160799", "createdAt": "2020-08-16T21:27:35Z", "author": {"login": "FlorianSW"}, "path": "bundles/org.openhab.binding.opensprinkler/src/main/java/org/openhab/binding/opensprinkler/internal/api/OpenSprinklerHttpApiV100.java", "diffHunk": "@@ -208,17 +215,10 @@ public int getNumberOfStations() throws CommunicationApiException {\n \n     @Override\n     public int getFirmwareVersion() throws CommunicationApiException {\n-        String returnContent;\n-\n-        try {\n-            returnContent = http.sendHttpGet(getBaseUrl() + CMD_OPTIONS_INFO, null);\n-        } catch (Exception exp) {\n-            throw new CommunicationApiException(\n-                    \"There was a problem in the HTTP communication with the OpenSprinkler API: \" + exp.getMessage());\n-        }\n \n         try {\n-            this.firmwareVersion = Parse.jsonInt(returnContent, JSON_OPTION_FIRMWARE_VERSION);\n+            JoResponse info = getOptions();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7c5c172a8a2318fa2481a03a0e3ff724d38d896b"}, "originalPosition": 58}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5d793f4d5d2238b63b32c6c63ef05da85e802d30", "author": {"user": {"login": "pail23", "name": "Paul Frank"}}, "url": "https://github.com/openhab/openhab-addons/commit/5d793f4d5d2238b63b32c6c63ef05da85e802d30", "committedDate": "2020-08-17T05:35:42Z", "message": "fixed aligment in the README\n\nSigned-off-by: Paul Frank <pail@gmx.net>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxNzczOTY5", "url": "https://github.com/openhab/openhab-addons/pull/8232#pullrequestreview-471773969", "createdAt": "2020-08-20T16:13:39Z", "commit": {"oid": "5d793f4d5d2238b63b32c6c63ef05da85e802d30"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxNjoxMzozOVrOHEJBvw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxNjoxNTowNFrOHEJFGA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDEwNDI1NQ==", "bodyText": "Can you mention, that this is percent?", "url": "https://github.com/openhab/openhab-addons/pull/8232#discussion_r474104255", "createdAt": "2020-08-20T16:13:39Z", "author": {"login": "fwolter"}, "path": "bundles/org.openhab.binding.opensprinkler/README.md", "diffHunk": "@@ -66,6 +66,8 @@ The following is supported by the `device` thing, but only when connected using\n | rainsensor      | Switch                 | RO | This channel indicates whether rain is detected by the device or not.     |\n | currentDraw     | Number:ElectricCurrent | RO | Shows the current draw of the device. If the device does not have sensors |\n |                 |                        |    | for this metric, the channel will not be available.                       |\n+| waterlevel      | Number:Dimensionless   | RO | This channel shows the current water level. The water level calculated    |\n+|                 |                        |    | based on the weather and influences the duration of the water programs.   |", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5d793f4d5d2238b63b32c6c63ef05da85e802d30"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDEwNDk0MA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t<description>The current water level</description>\n          \n          \n            \n            \t\t<description>The current water level in percent</description>", "url": "https://github.com/openhab/openhab-addons/pull/8232#discussion_r474104940", "createdAt": "2020-08-20T16:14:49Z", "author": {"login": "fwolter"}, "path": "bundles/org.openhab.binding.opensprinkler/src/main/resources/ESH-INF/thing/thing-types.xml", "diffHunk": "@@ -85,6 +86,14 @@\n \t\t<state readOnly=\"true\"/>\n \t</channel-type>\n \n+\n+\t<channel-type id=\"waterlevel\">\n+\t\t<item-type>Number:Dimensionless</item-type>\n+\t\t<label>Water level</label>\n+\t\t<description>The current water level</description>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5d793f4d5d2238b63b32c6c63ef05da85e802d30"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDEwNTExMg==", "bodyText": "Words in labels should be capitalized (except prepositions and so on). See https://www.openhab.org/docs/developer/bindings/thing-xml.html#formatting-labels-and-descriptions", "url": "https://github.com/openhab/openhab-addons/pull/8232#discussion_r474105112", "createdAt": "2020-08-20T16:15:04Z", "author": {"login": "fwolter"}, "path": "bundles/org.openhab.binding.opensprinkler/src/main/resources/ESH-INF/thing/thing-types.xml", "diffHunk": "@@ -85,6 +86,14 @@\n \t\t<state readOnly=\"true\"/>\n \t</channel-type>\n \n+\n+\t<channel-type id=\"waterlevel\">\n+\t\t<item-type>Number:Dimensionless</item-type>\n+\t\t<label>Water level</label>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5d793f4d5d2238b63b32c6c63ef05da85e802d30"}, "originalPosition": 17}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "28c23fe010afc35e2799d93a041d9f778bd1670d", "author": {"user": {"login": "pail23", "name": "Paul Frank"}}, "url": "https://github.com/openhab/openhab-addons/commit/28c23fe010afc35e2799d93a041d9f778bd1670d", "committedDate": "2020-08-20T19:09:09Z", "message": "mvn spotless:apply and some documentation changes\n\nSigned-off-by: Paul Frank <pail@gmx.net>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcyMDAwMjU0", "url": "https://github.com/openhab/openhab-addons/pull/8232#pullrequestreview-472000254", "createdAt": "2020-08-20T21:31:15Z", "commit": {"oid": "28c23fe010afc35e2799d93a041d9f778bd1670d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4929, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}