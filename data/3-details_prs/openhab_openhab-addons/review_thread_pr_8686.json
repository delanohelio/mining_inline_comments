{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk5NDE4NzU2", "number": 8686, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQyMjozOTozM1rOEr0IlQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQyMjozOTozM1rOEr0IlQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0Mzc4Mzg5OnYy", "diffSide": "RIGHT", "path": "bundles/org.openhab.binding.airvisualnode/src/main/resources/OH-INF/thing/thing-types.xml", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQyMjozOTozM1rOHeyxKg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMFQyMjoyMDozOFrOHfi0kg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjA1MTExNA==", "bodyText": "If such channels are only available in certain versions of the device, then you should either make a new thing type or remove these channels during handler initialization for devices that don't support it.\nBut another question I have is whether \"Pro version\" refers to the device model or the protocol used to communicate with the device. If it is only a protocol then why not enable it by default instead of making it configurable? Is there no way to identify which devices support this protocol automatically?", "url": "https://github.com/openhab/openhab-addons/pull/8686#discussion_r502051114", "createdAt": "2020-10-08T22:39:33Z", "author": {"login": "cpmeister"}, "path": "bundles/org.openhab.binding.airvisualnode/src/main/resources/OH-INF/thing/thing-types.xml", "diffHunk": "@@ -90,6 +97,20 @@\n \t\t<state readOnly=\"true\" pattern=\"%.1f %unit%\"/>\n \t</channel-type>\n \n+\t<channel-type id=\"Pm_10\">\n+\t\t<item-type>Number:Density</item-type>\n+\t\t<label>PM10</label>\n+\t\t<description>PM10 level, \u00b5g/m&#179;(Only in Pro version)</description>\n+\t\t<state readOnly=\"true\" pattern=\"%.1f %unit%\"/>\n+\t</channel-type>\n+\n+\t<channel-type id=\"Pm_01\">\n+\t\t<item-type>Number:Density</item-type>\n+\t\t<label>PM0.1</label>\n+\t\t<description>PM0.1 level, \u00b5g/m&#179;(Only in Pro version)</description>\n+\t\t<state readOnly=\"true\" pattern=\"%.1f %unit%\"/>\n+\t</channel-type>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f298119751fe05f8ba6ec7647bb8f51d2bcb5069"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjQ5OTk0OA==", "bodyText": "I can't recognize type before providing password and adding thing and can't remove unused channels:\nthing.getChannels().removeIf(channel -> channel.getLabel().equals(\"PM0.1\") || channel.getLabel().equals(\"PM10\"));\n\njava.lang.UnsupportedOperationException: null\n\tat java.util.Collections$UnmodifiableCollection.removeIf(Collections.java:1089) ~[?:?]\n\nBut I remove from config \"isProVersion\" and recognizing it by protocol: if \"measurements\" field in Json is array - then it will be Pro version.", "url": "https://github.com/openhab/openhab-addons/pull/8686#discussion_r502499948", "createdAt": "2020-10-09T15:13:50Z", "author": {"login": "ilveann"}, "path": "bundles/org.openhab.binding.airvisualnode/src/main/resources/OH-INF/thing/thing-types.xml", "diffHunk": "@@ -90,6 +97,20 @@\n \t\t<state readOnly=\"true\" pattern=\"%.1f %unit%\"/>\n \t</channel-type>\n \n+\t<channel-type id=\"Pm_10\">\n+\t\t<item-type>Number:Density</item-type>\n+\t\t<label>PM10</label>\n+\t\t<description>PM10 level, \u00b5g/m&#179;(Only in Pro version)</description>\n+\t\t<state readOnly=\"true\" pattern=\"%.1f %unit%\"/>\n+\t</channel-type>\n+\n+\t<channel-type id=\"Pm_01\">\n+\t\t<item-type>Number:Density</item-type>\n+\t\t<label>PM0.1</label>\n+\t\t<description>PM0.1 level, \u00b5g/m&#179;(Only in Pro version)</description>\n+\t\t<state readOnly=\"true\" pattern=\"%.1f %unit%\"/>\n+\t</channel-type>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjA1MTExNA=="}, "originalCommit": {"oid": "f298119751fe05f8ba6ec7647bb8f51d2bcb5069"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjgwNzczNQ==", "bodyText": "You have to modify channels by calling editThing, do your changes on the thing builder and then call updateThing.", "url": "https://github.com/openhab/openhab-addons/pull/8686#discussion_r502807735", "createdAt": "2020-10-10T16:31:38Z", "author": {"login": "cpmeister"}, "path": "bundles/org.openhab.binding.airvisualnode/src/main/resources/OH-INF/thing/thing-types.xml", "diffHunk": "@@ -90,6 +97,20 @@\n \t\t<state readOnly=\"true\" pattern=\"%.1f %unit%\"/>\n \t</channel-type>\n \n+\t<channel-type id=\"Pm_10\">\n+\t\t<item-type>Number:Density</item-type>\n+\t\t<label>PM10</label>\n+\t\t<description>PM10 level, \u00b5g/m&#179;(Only in Pro version)</description>\n+\t\t<state readOnly=\"true\" pattern=\"%.1f %unit%\"/>\n+\t</channel-type>\n+\n+\t<channel-type id=\"Pm_01\">\n+\t\t<item-type>Number:Density</item-type>\n+\t\t<label>PM0.1</label>\n+\t\t<description>PM0.1 level, \u00b5g/m&#179;(Only in Pro version)</description>\n+\t\t<state readOnly=\"true\" pattern=\"%.1f %unit%\"/>\n+\t</channel-type>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjA1MTExNA=="}, "originalCommit": {"oid": "f298119751fe05f8ba6ec7647bb8f51d2bcb5069"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjgzODQxOA==", "bodyText": "done", "url": "https://github.com/openhab/openhab-addons/pull/8686#discussion_r502838418", "createdAt": "2020-10-10T22:20:38Z", "author": {"login": "ilveann"}, "path": "bundles/org.openhab.binding.airvisualnode/src/main/resources/OH-INF/thing/thing-types.xml", "diffHunk": "@@ -90,6 +97,20 @@\n \t\t<state readOnly=\"true\" pattern=\"%.1f %unit%\"/>\n \t</channel-type>\n \n+\t<channel-type id=\"Pm_10\">\n+\t\t<item-type>Number:Density</item-type>\n+\t\t<label>PM10</label>\n+\t\t<description>PM10 level, \u00b5g/m&#179;(Only in Pro version)</description>\n+\t\t<state readOnly=\"true\" pattern=\"%.1f %unit%\"/>\n+\t</channel-type>\n+\n+\t<channel-type id=\"Pm_01\">\n+\t\t<item-type>Number:Density</item-type>\n+\t\t<label>PM0.1</label>\n+\t\t<description>PM0.1 level, \u00b5g/m&#179;(Only in Pro version)</description>\n+\t\t<state readOnly=\"true\" pattern=\"%.1f %unit%\"/>\n+\t</channel-type>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjA1MTExNA=="}, "originalCommit": {"oid": "f298119751fe05f8ba6ec7647bb8f51d2bcb5069"}, "originalPosition": 38}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4231, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}