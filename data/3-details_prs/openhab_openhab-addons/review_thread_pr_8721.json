{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAxMDIyNTIy", "number": 8721, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMVQwOTowODo1MlrOEsXLWQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMVQwOTowOToyNlrOEsXLmQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0OTUyNTM3OnYy", "diffSide": "RIGHT", "path": "bundles/org.openhab.binding.hue/src/main/java/org/openhab/binding/hue/internal/handler/sensors/PresenceHandler.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMVQwOTowODo1MlrOHfl3Eg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMVQwOTo0NjozOFrOHfmGLQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjg4ODIxMA==", "bodyText": "For other channels, I think you have to call the parent class (which handle few other channels).", "url": "https://github.com/openhab/openhab-addons/pull/8721#discussion_r502888210", "createdAt": "2020-10-11T09:08:52Z", "author": {"login": "lolodomo"}, "path": "bundles/org.openhab.binding.hue/src/main/java/org/openhab/binding/hue/internal/handler/sensors/PresenceHandler.java", "diffHunk": "@@ -39,10 +45,38 @@\n public class PresenceHandler extends HueSensorHandler {\n     public static final Set<ThingTypeUID> SUPPORTED_THING_TYPES = Collections.singleton(THING_TYPE_PRESENCE_SENSOR);\n \n+    private final Logger logger = LoggerFactory.getLogger(PresenceHandler.class);\n+\n     public PresenceHandler(Thing thing) {\n         super(thing);\n     }\n \n+    @Override\n+    public void handleCommand(String channel, Command command) {\n+        HueClient hueBridge = getHueClient();\n+        if (hueBridge == null) {\n+            logger.warn(\"hue bridge handler not found. Cannot handle command without bridge.\");\n+            return;\n+        }\n+\n+        final FullSensor sensor = lastFullSensor;\n+        if (sensor == null) {\n+            logger.debug(\"hue sensor not known on bridge. Cannot handle command.\");\n+            updateStatus(ThingStatus.OFFLINE, ThingStatusDetail.CONFIGURATION_ERROR,\n+                    \"@text/offline.conf-error-wrong-sensor-id\");\n+            return;\n+        }\n+\n+        SensorConfigUpdate configUpdate = new SensorConfigUpdate();\n+        switch (channel) {\n+            case CHANNEL_ENABLED:\n+                configUpdate.setOn(OnOffType.ON.equals(command));\n+                break;\n+        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e074c522568e341d3faa8db2660c81b036282352"}, "originalPosition": 49}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjg5MjA3Nw==", "bodyText": "On the first glance, yes, but currently the presence sensor only has read-only channels thus no command has to be handled except this one.", "url": "https://github.com/openhab/openhab-addons/pull/8721#discussion_r502892077", "createdAt": "2020-10-11T09:46:38Z", "author": {"login": "cweitkamp"}, "path": "bundles/org.openhab.binding.hue/src/main/java/org/openhab/binding/hue/internal/handler/sensors/PresenceHandler.java", "diffHunk": "@@ -39,10 +45,38 @@\n public class PresenceHandler extends HueSensorHandler {\n     public static final Set<ThingTypeUID> SUPPORTED_THING_TYPES = Collections.singleton(THING_TYPE_PRESENCE_SENSOR);\n \n+    private final Logger logger = LoggerFactory.getLogger(PresenceHandler.class);\n+\n     public PresenceHandler(Thing thing) {\n         super(thing);\n     }\n \n+    @Override\n+    public void handleCommand(String channel, Command command) {\n+        HueClient hueBridge = getHueClient();\n+        if (hueBridge == null) {\n+            logger.warn(\"hue bridge handler not found. Cannot handle command without bridge.\");\n+            return;\n+        }\n+\n+        final FullSensor sensor = lastFullSensor;\n+        if (sensor == null) {\n+            logger.debug(\"hue sensor not known on bridge. Cannot handle command.\");\n+            updateStatus(ThingStatus.OFFLINE, ThingStatusDetail.CONFIGURATION_ERROR,\n+                    \"@text/offline.conf-error-wrong-sensor-id\");\n+            return;\n+        }\n+\n+        SensorConfigUpdate configUpdate = new SensorConfigUpdate();\n+        switch (channel) {\n+            case CHANNEL_ENABLED:\n+                configUpdate.setOn(OnOffType.ON.equals(command));\n+                break;\n+        }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjg4ODIxMA=="}, "originalCommit": {"oid": "e074c522568e341d3faa8db2660c81b036282352"}, "originalPosition": 49}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0OTUyNjAxOnYy", "diffSide": "RIGHT", "path": "bundles/org.openhab.binding.hue/src/main/java/org/openhab/binding/hue/internal/handler/sensors/PresenceHandler.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMVQwOTowOToyNlrOHfl3Xw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMVQwOTowOToyNlrOHfl3Xw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjg4ODI4Nw==", "bodyText": "It should be moved in your switch case.", "url": "https://github.com/openhab/openhab-addons/pull/8721#discussion_r502888287", "createdAt": "2020-10-11T09:09:26Z", "author": {"login": "lolodomo"}, "path": "bundles/org.openhab.binding.hue/src/main/java/org/openhab/binding/hue/internal/handler/sensors/PresenceHandler.java", "diffHunk": "@@ -39,10 +45,38 @@\n public class PresenceHandler extends HueSensorHandler {\n     public static final Set<ThingTypeUID> SUPPORTED_THING_TYPES = Collections.singleton(THING_TYPE_PRESENCE_SENSOR);\n \n+    private final Logger logger = LoggerFactory.getLogger(PresenceHandler.class);\n+\n     public PresenceHandler(Thing thing) {\n         super(thing);\n     }\n \n+    @Override\n+    public void handleCommand(String channel, Command command) {\n+        HueClient hueBridge = getHueClient();\n+        if (hueBridge == null) {\n+            logger.warn(\"hue bridge handler not found. Cannot handle command without bridge.\");\n+            return;\n+        }\n+\n+        final FullSensor sensor = lastFullSensor;\n+        if (sensor == null) {\n+            logger.debug(\"hue sensor not known on bridge. Cannot handle command.\");\n+            updateStatus(ThingStatus.OFFLINE, ThingStatusDetail.CONFIGURATION_ERROR,\n+                    \"@text/offline.conf-error-wrong-sensor-id\");\n+            return;\n+        }\n+\n+        SensorConfigUpdate configUpdate = new SensorConfigUpdate();\n+        switch (channel) {\n+            case CHANNEL_ENABLED:\n+                configUpdate.setOn(OnOffType.ON.equals(command));\n+                break;\n+        }\n+\n+        hueBridge.updateSensorConfig(sensor, configUpdate);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e074c522568e341d3faa8db2660c81b036282352"}, "originalPosition": 51}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4249, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}