{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkwNDAyNjUx", "number": 8520, "title": "[velux] fix concurrency bugs, other minor issues, update readme.md (replaces #8493)", "bodyText": "This PR replaces #8493 which got lost in migration\nThe binding would not support multiple KLF bridges concurrently.\nThis PR fixes that problem and a few other minor bugs.\nAlso updated the ReadMe.md file.\nWork-in-Progress => needs review by (author) Guenther Schreiner!", "createdAt": "2020-09-21T15:58:53Z", "url": "https://github.com/openhab/openhab-addons/pull/8520", "merged": true, "mergeCommit": {"oid": "64a713e74acf6ea3bf6393f0722226284b71f0cd"}, "closed": true, "closedAt": "2020-09-28T16:27:47Z", "author": {"login": "andrewfg"}, "timelineItems": {"totalCount": 29, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdLH69MAFqTQ5Mjg4NTkwMA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdNWKZTgFqTQ5NzY5OTU0Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkyODg1OTAw", "url": "https://github.com/openhab/openhab-addons/pull/8520#pullrequestreview-492885900", "createdAt": "2020-09-21T18:44:07Z", "commit": {"oid": "45f64f498894425fba1e80c0a890e7bfc1299ad8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMVQxODo0NDowN1rOHVd3Tw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMVQxODo0NDowN1rOHVd3Tw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjI3MTQzOQ==", "bodyText": "Empty Command (used to send nothing and process an incoming message only).", "url": "https://github.com/openhab/openhab-addons/pull/8520#discussion_r492271439", "createdAt": "2020-09-21T18:44:07Z", "author": {"login": "gs4711"}, "path": "bundles/org.openhab.binding.velux/src/main/java/org/openhab/binding/velux/internal/things/VeluxKLFAPI.java", "diffHunk": "@@ -129,7 +129,7 @@ public String toString() {\n         UNDEFTYPE((short) -1, \"Unknown command.\"),\n         // Special item: Shutdown of the connection\n         GW_OPENHAB_CLOSE((short) -2, \"openHAB connection shutdown command.\"),\n-        // Special item: Shutdown of the connection\n+        // Special item: ???", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "45f64f498894425fba1e80c0a890e7bfc1299ad8"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkyODg1OTg3", "url": "https://github.com/openhab/openhab-addons/pull/8520#pullrequestreview-492885987", "createdAt": "2020-09-21T18:44:16Z", "commit": {"oid": "45f64f498894425fba1e80c0a890e7bfc1299ad8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMVQxODo0NDoxNlrOHVd3kQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMVQxODo0NDoxNlrOHVd3kQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjI3MTUwNQ==", "bodyText": "would suggest to replace the three questionmarks by a global constant.", "url": "https://github.com/openhab/openhab-addons/pull/8520#discussion_r492271505", "createdAt": "2020-09-21T18:44:16Z", "author": {"login": "gs4711"}, "path": "bundles/org.openhab.binding.velux/src/main/java/org/openhab/binding/velux/internal/handler/VeluxBindingHandler.java", "diffHunk": "@@ -82,9 +84,16 @@ public VeluxBindingHandler(Thing thing, final Localization localization) {\n      * @param channelUID for type {@link ChannelUID}.\n      * @return thingTypeUID of type {@link ThingTypeUID}.\n      */\n-    @SuppressWarnings(\"deprecation\")\n     private ThingTypeUID thingTypeUIDOf(ChannelUID channelUID) {\n-        return channelUID.getThingUID().getThingTypeUID();\n+        Channel chan = getThing().getChannel(channelUID);\n+        if (chan != null) {\n+            ChannelTypeUID type = chan.getChannelTypeUID();\n+            if (type != null) {\n+                return new ThingTypeUID(type.getBindingId(), type.getId());\n+            }\n+        }\n+        logger.warn(\"thingTypeUIDOf({}) failed.\", channelUID);\n+        return new ThingTypeUID(VeluxBindingConstants.BINDING_ID, \"???\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "45f64f498894425fba1e80c0a890e7bfc1299ad8"}, "originalPosition": 47}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkyODg3MTg3", "url": "https://github.com/openhab/openhab-addons/pull/8520#pullrequestreview-492887187", "createdAt": "2020-09-21T18:46:00Z", "commit": {"oid": "45f64f498894425fba1e80c0a890e7bfc1299ad8"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "78351338862c9a28cadb8bd2571f889184faf444", "author": {"user": {"login": "andrewfg", "name": "Andrew Fiddian-Green"}}, "url": "https://github.com/openhab/openhab-addons/commit/78351338862c9a28cadb8bd2571f889184faf444", "committedDate": "2020-09-25T14:04:49Z", "message": "[velux] #8493 update readme.md\n\nSigned-off-by: Andrew Fiddian-Green <software@whitebear.ch>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "47d763d39256f3824025577d36b5eb72b53c7c37", "author": {"user": {"login": "andrewfg", "name": "Andrew Fiddian-Green"}}, "url": "https://github.com/openhab/openhab-addons/commit/47d763d39256f3824025577d36b5eb72b53c7c37", "committedDate": "2020-09-25T14:05:21Z", "message": "[velux] #8493 fix concurrency bugs\n\nSigned-off-by: Andrew Fiddian-Green <software@whitebear.ch>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b6bf13edfb4434b49d78b91a83deb6424af54455", "author": {"user": {"login": "andrewfg", "name": "Andrew Fiddian-Green"}}, "url": "https://github.com/openhab/openhab-addons/commit/b6bf13edfb4434b49d78b91a83deb6424af54455", "committedDate": "2020-09-25T14:06:01Z", "message": "[velux] #8493 unsupported properties\n\nSigned-off-by: Andrew Fiddian-Green <software@whitebear.ch>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "db485b551d0a3d5760c9e7329e238c10fc469bfe", "author": {"user": {"login": "andrewfg", "name": "Andrew Fiddian-Green"}}, "url": "https://github.com/openhab/openhab-addons/commit/db485b551d0a3d5760c9e7329e238c10fc469bfe", "committedDate": "2020-09-25T14:06:02Z", "message": "[velux] #8493 flush buffer before write\n\nSigned-off-by: Andrew Fiddian-Green <software@whitebear.ch>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "daeaab9ff0a72163ec1098b3a579db34a1ddf8ba", "author": {"user": {"login": "andrewfg", "name": "Andrew Fiddian-Green"}}, "url": "https://github.com/openhab/openhab-addons/commit/daeaab9ff0a72163ec1098b3a579db34a1ddf8ba", "committedDate": "2020-09-25T14:06:02Z", "message": "[velux] #8493 corrected log message\n\nSigned-off-by: Andrew Fiddian-Green <software@whitebear.ch>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "97969526db674d46d576a8a49cf60575d58830c8", "author": {"user": {"login": "andrewfg", "name": "Andrew Fiddian-Green"}}, "url": "https://github.com/openhab/openhab-addons/commit/97969526db674d46d576a8a49cf60575d58830c8", "committedDate": "2020-09-25T14:06:02Z", "message": "[velux] spotless cosmetics\n\nSigned-off-by: Andrew Fiddian-Green <software@whitebear.ch>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "17bc8ae5c1e39bdcb850197be59efb0128b7b460", "author": {"user": {"login": "andrewfg", "name": "Andrew Fiddian-Green"}}, "url": "https://github.com/openhab/openhab-addons/commit/17bc8ae5c1e39bdcb850197be59efb0128b7b460", "committedDate": "2020-09-25T14:06:31Z", "message": "[velux] work around removed (previously deprecated) methods\n\nSigned-off-by: Andrew Fiddian-Green <software@whitebear.ch>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7b171823e178d92e18eb8a07bc964b7873ee663e", "author": {"user": {"login": "andrewfg", "name": "Andrew Fiddian-Green"}}, "url": "https://github.com/openhab/openhab-addons/commit/7b171823e178d92e18eb8a07bc964b7873ee663e", "committedDate": "2020-09-25T14:06:32Z", "message": "[velux] ESH => OH\n\nSigned-off-by: Andrew Fiddian-Green <software@whitebear.ch>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eaa8e04455a3d7720f77107797038095e9813a8c", "author": {"user": {"login": "andrewfg", "name": "Andrew Fiddian-Green"}}, "url": "https://github.com/openhab/openhab-addons/commit/eaa8e04455a3d7720f77107797038095e9813a8c", "committedDate": "2020-09-25T14:06:32Z", "message": "[velux] timeout documentation\n\nSigned-off-by: Andrew Fiddian-Green <software@whitebear.ch>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "01ce4070592ff4db18bafa5b8b9899e2b8906209", "author": {"user": {"login": "andrewfg", "name": "Andrew Fiddian-Green"}}, "url": "https://github.com/openhab/openhab-addons/commit/01ce4070592ff4db18bafa5b8b9899e2b8906209", "committedDate": "2020-09-25T14:06:33Z", "message": "[velux] adopted @gs4711 suggestions\n\nSigned-off-by: Andrew Fiddian-Green <software@whitebear.ch>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f9b608c8b4e3c3705e79e35fe2dc195b47233ac2", "author": {"user": {"login": "andrewfg", "name": "Andrew Fiddian-Green"}}, "url": "https://github.com/openhab/openhab-addons/commit/f9b608c8b4e3c3705e79e35fe2dc195b47233ac2", "committedDate": "2020-09-25T14:06:33Z", "message": "[velux] show ip address in communication logs\n\nSigned-off-by: Andrew Fiddian-Green <software@whitebear.ch>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8e820be13e335d0b775ac583baa131824da71aea", "author": {"user": {"login": "andrewfg", "name": "Andrew Fiddian-Green"}}, "url": "https://github.com/openhab/openhab-addons/commit/8e820be13e335d0b775ac583baa131824da71aea", "committedDate": "2020-09-25T14:06:33Z", "message": "[velux] show ip address in communication logs\n\nSigned-off-by: Andrew Fiddian-Green <software@whitebear.ch>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "844d7ca8e89acac5bb76b36cd32dac1ad80e55ff", "author": {"user": {"login": "andrewfg", "name": "Andrew Fiddian-Green"}}, "url": "https://github.com/openhab/openhab-addons/commit/844d7ca8e89acac5bb76b36cd32dac1ad80e55ff", "committedDate": "2020-09-25T14:06:53Z", "message": "[velux] show ip address in communication logs\n\nSigned-off-by: Andrew Fiddian-Green <software@whitebear.ch>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fc2e830f86df2fd91f8cdaa8a2403dbea1213006", "author": {"user": {"login": "andrewfg", "name": "Andrew Fiddian-Green"}}, "url": "https://github.com/openhab/openhab-addons/commit/fc2e830f86df2fd91f8cdaa8a2403dbea1213006", "committedDate": "2020-09-25T14:07:13Z", "message": "[velux] errors in prior commit\n\nSigned-off-by: Andrew Fiddian-Green <software@whitebear.ch>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "669c542ed9177170a838283ccd1ae9199bef9ebc", "author": {"user": {"login": "andrewfg", "name": "Andrew Fiddian-Green"}}, "url": "https://github.com/openhab/openhab-addons/commit/669c542ed9177170a838283ccd1ae9199bef9ebc", "committedDate": "2020-09-25T14:07:14Z", "message": "[velux] show command code in hex in logger\n\nSigned-off-by: Andrew Fiddian-Green <software@whitebear.ch>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "40079eb4ce4501855a9a1bb2e01bcd39d9d72f34", "author": {"user": {"login": "andrewfg", "name": "Andrew Fiddian-Green"}}, "url": "https://github.com/openhab/openhab-addons/commit/40079eb4ce4501855a9a1bb2e01bcd39d9d72f34", "committedDate": "2020-09-25T14:07:14Z", "message": "[velux] logging\n\nSigned-off-by: Andrew Fiddian-Green <software@whitebear.ch>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b9b37d51c67271e9a321a24320da11df78a085e8", "author": {"user": {"login": "andrewfg", "name": "Andrew Fiddian-Green"}}, "url": "https://github.com/openhab/openhab-addons/commit/b9b37d51c67271e9a321a24320da11df78a085e8", "committedDate": "2020-09-25T14:07:14Z", "message": "[velux] flush write queue to immediately raise exceptions\n\nSigned-off-by: Andrew Fiddian-Green <software@whitebear.ch>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d9bcf3dd9f9ed4b72334bff0725affe8466d61b9", "author": {"user": {"login": "andrewfg", "name": "Andrew Fiddian-Green"}}, "url": "https://github.com/openhab/openhab-addons/commit/d9bcf3dd9f9ed4b72334bff0725affe8466d61b9", "committedDate": "2020-09-25T14:07:30Z", "message": "[velux] add velux to build\n\nSigned-off-by: Andrew Fiddian-Green <software@whitebear.ch>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bd662f9db3b18494dab2e35d4ff4e22185ad6d42", "author": {"user": {"login": "andrewfg", "name": "Andrew Fiddian-Green"}}, "url": "https://github.com/openhab/openhab-addons/commit/bd662f9db3b18494dab2e35d4ff4e22185ad6d42", "committedDate": "2020-09-25T14:01:17Z", "message": "[velux] add velux to build\n\nSigned-off-by: Andrew Fiddian-Green <software@whitebear.ch>"}, "afterCommit": {"oid": "d9bcf3dd9f9ed4b72334bff0725affe8466d61b9", "author": {"user": {"login": "andrewfg", "name": "Andrew Fiddian-Green"}}, "url": "https://github.com/openhab/openhab-addons/commit/d9bcf3dd9f9ed4b72334bff0725affe8466d61b9", "committedDate": "2020-09-25T14:07:30Z", "message": "[velux] add velux to build\n\nSigned-off-by: Andrew Fiddian-Green <software@whitebear.ch>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5dc5757bf539f187b106d177c935101e60a8ee5c", "author": {"user": {"login": "andrewfg", "name": "Andrew Fiddian-Green"}}, "url": "https://github.com/openhab/openhab-addons/commit/5dc5757bf539f187b106d177c935101e60a8ee5c", "committedDate": "2020-09-25T14:31:24Z", "message": "[velux] add to reactor again\n\nSigned-off-by: Andrew Fiddian-Green <software@whitebear.ch>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk2NTU4OTEx", "url": "https://github.com/openhab/openhab-addons/pull/8520#pullrequestreview-496558911", "createdAt": "2020-09-25T16:09:34Z", "commit": {"oid": "5dc5757bf539f187b106d177c935101e60a8ee5c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNVQxNjowOTozNFrOHYJ63g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNVQxNjowOTozNFrOHYJ63g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTA5MDM5OA==", "bodyText": "Ah, much better ;-)", "url": "https://github.com/openhab/openhab-addons/pull/8520#discussion_r495090398", "createdAt": "2020-09-25T16:09:34Z", "author": {"login": "kaikreuzer"}, "path": "bundles/pom.xml", "diffHunk": "@@ -280,6 +280,7 @@\n     <module>org.openhab.binding.valloxmv</module>\n     <module>org.openhab.binding.vektiva</module>\n     <module>org.openhab.binding.velbus</module>\n+    <module>org.openhab.binding.velux</module>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5dc5757bf539f187b106d177c935101e60a8ee5c"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5f1291f45ffb2e2853ff243bd7c821cead0725c0", "author": {"user": {"login": "andrewfg", "name": "Andrew Fiddian-Green"}}, "url": "https://github.com/openhab/openhab-addons/commit/5f1291f45ffb2e2853ff243bd7c821cead0725c0", "committedDate": "2020-09-25T16:33:52Z", "message": "[velux] fix thingTypeUIDOf() for not yet existing channels\n\nSigned-off-by: Andrew Fiddian-Green <software@whitebear.ch>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b8433d30098446d904d5bed8414c8351d40badcb", "author": {"user": {"login": "andrewfg", "name": "Andrew Fiddian-Green"}}, "url": "https://github.com/openhab/openhab-addons/commit/b8433d30098446d904d5bed8414c8351d40badcb", "committedDate": "2020-09-26T12:50:56Z", "message": "[velux] improve I/O error handling\n\nSigned-off-by: Andrew Fiddian-Green <software@whitebear.ch>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2fafbd9b6cbe5cd407d5fdb12178419a88aea360", "author": {"user": {"login": "andrewfg", "name": "Andrew Fiddian-Green"}}, "url": "https://github.com/openhab/openhab-addons/commit/2fafbd9b6cbe5cd407d5fdb12178419a88aea360", "committedDate": "2020-09-26T17:04:19Z", "message": "[velux] image in read me\n\nSigned-off-by: Andrew Fiddian-Green <software@whitebear.ch>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "34ad7316e9b37b6b3ee9eac732f1b19cce945005", "author": {"user": {"login": "andrewfg", "name": "Andrew Fiddian-Green"}}, "url": "https://github.com/openhab/openhab-addons/commit/34ad7316e9b37b6b3ee9eac732f1b19cce945005", "committedDate": "2020-09-27T12:57:59Z", "message": "[velux] close connectivity even if (especially if) it is not ready\n\nSigned-off-by: Andrew Fiddian-Green <software@whitebear.ch>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk3Njk5NTQz", "url": "https://github.com/openhab/openhab-addons/pull/8520#pullrequestreview-497699543", "createdAt": "2020-09-28T16:27:31Z", "commit": {"oid": "34ad7316e9b37b6b3ee9eac732f1b19cce945005"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4619, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}