{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA5MzY0MTQ2", "number": 7486, "title": "[opengarage] Add Contact & RollerShutter types for additional flexibility", "bodyText": "[opengarage] Add Contact & Rollershutter handling\n\nPrevious implementation had a 'Switch' for the roller door status. Added a 'Contact' and 'Rollershutter' for additional flexibility - in particular for Google Assistant\n\nTested locally, I'll add a jar to the opengarage thread on the forums.", "createdAt": "2020-04-27T09:17:32Z", "url": "https://github.com/openhab/openhab-addons/pull/7486", "merged": true, "mergeCommit": {"oid": "7b5928e22b9015d6c926e9bd1142b3dae253e784"}, "closed": true, "closedAt": "2020-05-03T05:19:10Z", "author": {"login": "psmedley"}, "timelineItems": {"totalCount": 19, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcbrsF9gH2gAyNDA5MzY0MTQ2OjgyMTBiMTgyMDg5YzdlNzg3ZTRlZGIzMTQ1MmJiNDQ4MTBjYjNmYmU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcdjSyWgFqTQwNDU4MDgzMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "8210b182089c7e787e4edb31452bb44810cb3fbe", "author": {"user": {"login": "psmedley", "name": "Paul Smedley"}}, "url": "https://github.com/openhab/openhab-addons/commit/8210b182089c7e787e4edb31452bb44810cb3fbe", "committedDate": "2020-04-27T09:16:07Z", "message": "Add Contact & RollerShutter types for addition flexibility\n\nSigned-off-by: Paul Smedley <paul@smedley.id.au>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e9e55d910d4a04bbeeb52796863f437266e48785", "author": {"user": {"login": "psmedley", "name": "Paul Smedley"}}, "url": "https://github.com/openhab/openhab-addons/commit/e9e55d910d4a04bbeeb52796863f437266e48785", "committedDate": "2020-04-28T07:22:18Z", "message": "Merge branch '2.5.x' into opengaragetypes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAyMjMyOTk5", "url": "https://github.com/openhab/openhab-addons/pull/7486#pullrequestreview-402232999", "createdAt": "2020-04-28T21:41:01Z", "commit": {"oid": "e9e55d910d4a04bbeeb52796863f437266e48785"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQyMTo0MTowMVrOGNoDww==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQyMjowMzowM1rOGNorjA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjk0MDk5NQ==", "bodyText": "You should have kept the switch statement and allowed the logic to fall through", "url": "https://github.com/openhab/openhab-addons/pull/7486#discussion_r416940995", "createdAt": "2020-04-28T21:41:01Z", "author": {"login": "cpmeister"}, "path": "bundles/org.openhab.binding.opengarage/src/main/java/org/openhab/binding/opengarage/internal/OpenGarageHandler.java", "diffHunk": "@@ -57,20 +60,15 @@ public OpenGarageHandler(Thing thing) {\n     @Override\n     public void handleCommand(ChannelUID channelUID, Command command) {\n         try {\n-            logger.warn(\"Received command {} for thing '{}' on channel {}\", command, thing.getUID().getAsString(),\n-                    channelUID.getId());\n-            switch (channelUID.getId()) {\n-                case OpenGarageBindingConstants.CHANNEL_OG_STATUS:\n-                    if (command instanceof OnOffType) {\n-                        changeStatus(((OnOffType) command).equals(OnOffType.ON));\n-                        return;\n-                    }\n-                    break;\n-                default:\n+            if (channelUID.getId().equals(OpenGarageBindingConstants.CHANNEL_OG_STATUS) || channelUID.getId().equals(OpenGarageBindingConstants.CHANNEL_OG_STATUS_ROLLERSHUTTER)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e9e55d910d4a04bbeeb52796863f437266e48785"}, "originalPosition": 57}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjk0MTEyOQ==", "bodyText": "use a switch statement here", "url": "https://github.com/openhab/openhab-addons/pull/7486#discussion_r416941129", "createdAt": "2020-04-28T21:41:15Z", "author": {"login": "cpmeister"}, "path": "bundles/org.openhab.binding.opengarage/src/main/java/org/openhab/binding/opengarage/internal/OpenGarageWebTargets.java", "diffHunk": "@@ -43,17 +43,21 @@ public ControllerVariables getControllerVariables() throws OpenGarageCommunicati\n         return ControllerVariables.parse(response);\n     }\n \n-    public void setControllerVariables(boolean request) throws OpenGarageCommunicationException {\n+    public void setControllerVariables(String request) throws OpenGarageCommunicationException {\n         logger.debug(\"Received request: {}\", request);\n-        if (request) {\n-            logger.debug(\"Received request to open door\");\n-            String queryParams = \"&open=1\";\n-            invoke(changeControllerVariablesUri, queryParams);\n-        } else {\n-            logger.debug(\"Received request to close door\");\n-            String queryParams = \"&close=1\";\n-            invoke(changeControllerVariablesUri, queryParams);\n-        }\n+          if (request.equals(\"open\")) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e9e55d910d4a04bbeeb52796863f437266e48785"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjk0NzkwNg==", "bodyText": "Shouldn't you be checking against the StopMoveType here?", "url": "https://github.com/openhab/openhab-addons/pull/7486#discussion_r416947906", "createdAt": "2020-04-28T21:55:56Z", "author": {"login": "cpmeister"}, "path": "bundles/org.openhab.binding.opengarage/src/main/java/org/openhab/binding/opengarage/internal/OpenGarageHandler.java", "diffHunk": "@@ -57,20 +60,15 @@ public OpenGarageHandler(Thing thing) {\n     @Override\n     public void handleCommand(ChannelUID channelUID, Command command) {\n         try {\n-            logger.warn(\"Received command {} for thing '{}' on channel {}\", command, thing.getUID().getAsString(),\n-                    channelUID.getId());\n-            switch (channelUID.getId()) {\n-                case OpenGarageBindingConstants.CHANNEL_OG_STATUS:\n-                    if (command instanceof OnOffType) {\n-                        changeStatus(((OnOffType) command).equals(OnOffType.ON));\n-                        return;\n-                    }\n-                    break;\n-                default:\n+            if (channelUID.getId().equals(OpenGarageBindingConstants.CHANNEL_OG_STATUS) || channelUID.getId().equals(OpenGarageBindingConstants.CHANNEL_OG_STATUS_ROLLERSHUTTER)) {\n+                if (command.equals(OnOffType.ON) || command.equals(UpDownType.UP)) {\n+                    changeStatus(\"open\");\n+                } else if (command.equals(OnOffType.OFF) || command.equals(UpDownType.DOWN)) {\n+                    changeStatus(\"close\");\n+                } else if (command.equals(\"STOP\")) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e9e55d910d4a04bbeeb52796863f437266e48785"}, "originalPosition": 62}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjk1MTE4MA==", "bodyText": "Can you make these status values enums instead of strings?", "url": "https://github.com/openhab/openhab-addons/pull/7486#discussion_r416951180", "createdAt": "2020-04-28T22:03:03Z", "author": {"login": "cpmeister"}, "path": "bundles/org.openhab.binding.opengarage/src/main/java/org/openhab/binding/opengarage/internal/OpenGarageHandler.java", "diffHunk": "@@ -57,20 +60,15 @@ public OpenGarageHandler(Thing thing) {\n     @Override\n     public void handleCommand(ChannelUID channelUID, Command command) {\n         try {\n-            logger.warn(\"Received command {} for thing '{}' on channel {}\", command, thing.getUID().getAsString(),\n-                    channelUID.getId());\n-            switch (channelUID.getId()) {\n-                case OpenGarageBindingConstants.CHANNEL_OG_STATUS:\n-                    if (command instanceof OnOffType) {\n-                        changeStatus(((OnOffType) command).equals(OnOffType.ON));\n-                        return;\n-                    }\n-                    break;\n-                default:\n+            if (channelUID.getId().equals(OpenGarageBindingConstants.CHANNEL_OG_STATUS) || channelUID.getId().equals(OpenGarageBindingConstants.CHANNEL_OG_STATUS_ROLLERSHUTTER)) {\n+                if (command.equals(OnOffType.ON) || command.equals(UpDownType.UP)) {\n+                    changeStatus(\"open\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e9e55d910d4a04bbeeb52796863f437266e48785"}, "originalPosition": 59}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a74ebe957ccd4529beb857b11c346d69388e25ae", "author": {"user": {"login": "psmedley", "name": "Paul Smedley"}}, "url": "https://github.com/openhab/openhab-addons/commit/a74ebe957ccd4529beb857b11c346d69388e25ae", "committedDate": "2020-04-29T08:29:00Z", "message": "Fixes/tidyups\n\nSigned-off-by: Paul Smedley <paul@smedley.id.au>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAzOTAwODY5", "url": "https://github.com/openhab/openhab-addons/pull/7486#pullrequestreview-403900869", "createdAt": "2020-04-30T21:47:34Z", "commit": {"oid": "a74ebe957ccd4529beb857b11c346d69388e25ae"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQyMTo0NzozNVrOGO7fvQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQyMTo1Nzo1OVrOGO7xJQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODMwODAyOQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public void setControllerVariables(String request) throws OpenGarageCommunicationException {\n          \n          \n            \n                public void setControllerVariables(OpenGarageCommand request) throws OpenGarageCommunicationException {", "url": "https://github.com/openhab/openhab-addons/pull/7486#discussion_r418308029", "createdAt": "2020-04-30T21:47:35Z", "author": {"login": "cpmeister"}, "path": "bundles/org.openhab.binding.opengarage/src/main/java/org/openhab/binding/opengarage/internal/OpenGarageWebTargets.java", "diffHunk": "@@ -45,19 +46,17 @@ public ControllerVariables getControllerVariables() throws OpenGarageCommunicati\n \n     public void setControllerVariables(String request) throws OpenGarageCommunicationException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a74ebe957ccd4529beb857b11c346d69388e25ae"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODMwODY3OQ==", "bodyText": "Once the request is an enum, then you can do a switch statement on it like this:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    if (request.equals(OpenGarageCommand.OPEN.getValue())) {\n          \n          \n            \n                    switch(request){\n          \n          \n            \n                         case OPEN:\n          \n      \n    \n    \n  \n\nThis would eliminate the need for getValue on your enum.\nAnother approach that would utilize the getValue instead of using a switch statement would be to construct the queryParams directly.\nString queryParams = \"&\"+request.getValue()+\"=1\";", "url": "https://github.com/openhab/openhab-addons/pull/7486#discussion_r418308679", "createdAt": "2020-04-30T21:49:05Z", "author": {"login": "cpmeister"}, "path": "bundles/org.openhab.binding.opengarage/src/main/java/org/openhab/binding/opengarage/internal/OpenGarageWebTargets.java", "diffHunk": "@@ -45,19 +46,17 @@ public ControllerVariables getControllerVariables() throws OpenGarageCommunicati\n \n     public void setControllerVariables(String request) throws OpenGarageCommunicationException {\n         logger.debug(\"Received request: {}\", request);\n-          if (request.equals(\"open\")) {\n-              logger.debug(\"Received request to open door\");\n-              String queryParams = \"&open=1\";\n-              invoke(changeControllerVariablesUri, queryParams);\n-          } else if (request.equals(\"close\")) {\n-              logger.debug(\"Received request to close door\");\n-              String queryParams = \"&close=1\";\n-              invoke(changeControllerVariablesUri, queryParams);\n-          } else if (request.equals(\"click\")) {\n-              logger.debug(\"Received request to click remote button\");\n-              String queryParams = \"&click=1\";\n-              invoke(changeControllerVariablesUri, queryParams);\n-          }\n+        String queryParams = null;\n+        if (request.equals(OpenGarageCommand.OPEN.getValue())) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a74ebe957ccd4529beb857b11c346d69388e25ae"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODMwOTIyOQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                        changeStatus(OpenGarageCommand.OPEN.getValue());\n          \n          \n            \n                                        changeStatus(OpenGarageCommand.OPEN);", "url": "https://github.com/openhab/openhab-addons/pull/7486#discussion_r418309229", "createdAt": "2020-04-30T21:50:25Z", "author": {"login": "cpmeister"}, "path": "bundles/org.openhab.binding.opengarage/src/main/java/org/openhab/binding/opengarage/internal/OpenGarageHandler.java", "diffHunk": "@@ -60,14 +62,23 @@ public OpenGarageHandler(Thing thing) {\n     @Override\n     public void handleCommand(ChannelUID channelUID, Command command) {\n         try {\n-            if (channelUID.getId().equals(OpenGarageBindingConstants.CHANNEL_OG_STATUS) || channelUID.getId().equals(OpenGarageBindingConstants.CHANNEL_OG_STATUS_ROLLERSHUTTER)) {\n-                if (command.equals(OnOffType.ON) || command.equals(UpDownType.UP)) {\n-                    changeStatus(\"open\");\n-                } else if (command.equals(OnOffType.OFF) || command.equals(UpDownType.DOWN)) {\n-                    changeStatus(\"close\");\n-                } else if (command.equals(\"STOP\")) {\n-                    changeStatus(\"click\");\n-                } \n+                logger.warn(\"Received command {} for thing '{}' on channel {}\", command, thing.getUID().getAsString(),\n+                    channelUID.getId());\n+                switch (channelUID.getId()) {\n+                    case OpenGarageBindingConstants.CHANNEL_OG_STATUS:\n+                    case OpenGarageBindingConstants.CHANNEL_OG_STATUS_ROLLERSHUTTER:\n+                        if (command.equals(OnOffType.ON) || command.equals(UpDownType.UP)) {\n+                            changeStatus(OpenGarageCommand.OPEN.getValue());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a74ebe957ccd4529beb857b11c346d69388e25ae"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODMwOTMzMA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                        changeStatus(OpenGarageCommand.OPEN.getValue());\n          \n          \n            \n                                        changeStatus(OpenGarageCommand.OPEN);", "url": "https://github.com/openhab/openhab-addons/pull/7486#discussion_r418309330", "createdAt": "2020-04-30T21:50:40Z", "author": {"login": "cpmeister"}, "path": "bundles/org.openhab.binding.opengarage/src/main/java/org/openhab/binding/opengarage/internal/OpenGarageHandler.java", "diffHunk": "@@ -57,20 +62,24 @@ public OpenGarageHandler(Thing thing) {\n     @Override\n     public void handleCommand(ChannelUID channelUID, Command command) {\n         try {\n-            logger.warn(\"Received command {} for thing '{}' on channel {}\", command, thing.getUID().getAsString(),\n+                logger.warn(\"Received command {} for thing '{}' on channel {}\", command, thing.getUID().getAsString(),\n                     channelUID.getId());\n-            switch (channelUID.getId()) {\n-                case OpenGarageBindingConstants.CHANNEL_OG_STATUS:\n-                    if (command instanceof OnOffType) {\n-                        changeStatus(((OnOffType) command).equals(OnOffType.ON));\n-                        return;\n-                    }\n-                    break;\n-                default:\n+                switch (channelUID.getId()) {\n+                    case OpenGarageBindingConstants.CHANNEL_OG_STATUS:\n+                    case OpenGarageBindingConstants.CHANNEL_OG_STATUS_ROLLERSHUTTER:\n+                        if (command.equals(OnOffType.ON) || command.equals(UpDownType.UP)) {\n+                            changeStatus(OpenGarageCommand.OPEN.getValue());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a74ebe957ccd4529beb857b11c346d69388e25ae"}, "originalPosition": 64}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODMwOTM5MA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                        changeStatus(OpenGarageCommand.CLOSE.getValue());\n          \n          \n            \n                                        changeStatus(OpenGarageCommand.CLOSE);", "url": "https://github.com/openhab/openhab-addons/pull/7486#discussion_r418309390", "createdAt": "2020-04-30T21:50:50Z", "author": {"login": "cpmeister"}, "path": "bundles/org.openhab.binding.opengarage/src/main/java/org/openhab/binding/opengarage/internal/OpenGarageHandler.java", "diffHunk": "@@ -57,20 +62,24 @@ public OpenGarageHandler(Thing thing) {\n     @Override\n     public void handleCommand(ChannelUID channelUID, Command command) {\n         try {\n-            logger.warn(\"Received command {} for thing '{}' on channel {}\", command, thing.getUID().getAsString(),\n+                logger.warn(\"Received command {} for thing '{}' on channel {}\", command, thing.getUID().getAsString(),\n                     channelUID.getId());\n-            switch (channelUID.getId()) {\n-                case OpenGarageBindingConstants.CHANNEL_OG_STATUS:\n-                    if (command instanceof OnOffType) {\n-                        changeStatus(((OnOffType) command).equals(OnOffType.ON));\n-                        return;\n-                    }\n-                    break;\n-                default:\n+                switch (channelUID.getId()) {\n+                    case OpenGarageBindingConstants.CHANNEL_OG_STATUS:\n+                    case OpenGarageBindingConstants.CHANNEL_OG_STATUS_ROLLERSHUTTER:\n+                        if (command.equals(OnOffType.ON) || command.equals(UpDownType.UP)) {\n+                            changeStatus(OpenGarageCommand.OPEN.getValue());\n+                            return;\n+                        } else if (command.equals(OnOffType.OFF) || command.equals(UpDownType.DOWN)) {\n+                            changeStatus(OpenGarageCommand.CLOSE.getValue());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a74ebe957ccd4529beb857b11c346d69388e25ae"}, "originalPosition": 67}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODMxMTA4Mw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                        changeStatus(OpenGarageCommand.CLICK.getValue());\n          \n          \n            \n                                        changeStatus(OpenGarageCommand.CLICK);", "url": "https://github.com/openhab/openhab-addons/pull/7486#discussion_r418311083", "createdAt": "2020-04-30T21:54:36Z", "author": {"login": "cpmeister"}, "path": "bundles/org.openhab.binding.opengarage/src/main/java/org/openhab/binding/opengarage/internal/OpenGarageHandler.java", "diffHunk": "@@ -57,20 +62,24 @@ public OpenGarageHandler(Thing thing) {\n     @Override\n     public void handleCommand(ChannelUID channelUID, Command command) {\n         try {\n-            logger.warn(\"Received command {} for thing '{}' on channel {}\", command, thing.getUID().getAsString(),\n+                logger.warn(\"Received command {} for thing '{}' on channel {}\", command, thing.getUID().getAsString(),\n                     channelUID.getId());\n-            switch (channelUID.getId()) {\n-                case OpenGarageBindingConstants.CHANNEL_OG_STATUS:\n-                    if (command instanceof OnOffType) {\n-                        changeStatus(((OnOffType) command).equals(OnOffType.ON));\n-                        return;\n-                    }\n-                    break;\n-                default:\n+                switch (channelUID.getId()) {\n+                    case OpenGarageBindingConstants.CHANNEL_OG_STATUS:\n+                    case OpenGarageBindingConstants.CHANNEL_OG_STATUS_ROLLERSHUTTER:\n+                        if (command.equals(OnOffType.ON) || command.equals(UpDownType.UP)) {\n+                            changeStatus(OpenGarageCommand.OPEN.getValue());\n+                            return;\n+                        } else if (command.equals(OnOffType.OFF) || command.equals(UpDownType.DOWN)) {\n+                            changeStatus(OpenGarageCommand.CLOSE.getValue());\n+                            return;\n+                        } else if (command.equals(StopMoveType.STOP)) {\n+                            changeStatus(OpenGarageCommand.CLICK.getValue());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a74ebe957ccd4529beb857b11c346d69388e25ae"}, "originalPosition": 70}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODMxMjQ4NQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t<label>Rollershuter Status</label>\n          \n          \n            \n            \t\t<label>Rollershutter Status</label>", "url": "https://github.com/openhab/openhab-addons/pull/7486#discussion_r418312485", "createdAt": "2020-04-30T21:57:59Z", "author": {"login": "cpmeister"}, "path": "bundles/org.openhab.binding.opengarage/src/main/resources/ESH-INF/thing/thing-types.xml", "diffHunk": "@@ -48,7 +50,18 @@\n \t<channel-type id=\"opengarage-status\">\n \t\t<item-type>Switch</item-type>\n \t\t<label>Status</label>\n-\t\t<description>Status of the OG unit</description>\n+\t\t<description>On/Off Status of the OG unit</description>\n+\t</channel-type>\n+\t<channel-type id=\"opengarage-status-contact\">\n+\t\t<item-type>Contact</item-type>\n+\t\t<label>Contact Status</label>\n+\t\t<description>Contact Status of the OG unit</description>\n+\t\t<state readOnly=\"true\"/>\n+\t</channel-type>\n+\t<channel-type id=\"opengarage-status-rollershutter\">\n+\t\t<item-type>Rollershutter</item-type>\n+\t\t<label>Rollershuter Status</label>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a74ebe957ccd4529beb857b11c346d69388e25ae"}, "originalPosition": 30}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b6d0e70c7f80f8a7e34ca75e7ee0c162a5f6243d", "author": {"user": {"login": "psmedley", "name": "Paul Smedley"}}, "url": "https://github.com/openhab/openhab-addons/commit/b6d0e70c7f80f8a7e34ca75e7ee0c162a5f6243d", "committedDate": "2020-05-01T08:03:37Z", "message": "Support \"MOVE\" command\n\nSigned-off-by: Paul Smedley <paul@smedley.id.au>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a79330dc6461b9bc391d32c0953d00df4d1b486e", "author": {"user": {"login": "psmedley", "name": "Paul Smedley"}}, "url": "https://github.com/openhab/openhab-addons/commit/a79330dc6461b9bc391d32c0953d00df4d1b486e", "committedDate": "2020-05-01T08:51:21Z", "message": "Incorporate latest suggest fixes\n\nSigned-off-by: Paul Smedley <paul@smedley.id.au>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0Mzc4NzY1", "url": "https://github.com/openhab/openhab-addons/pull/7486#pullrequestreview-404378765", "createdAt": "2020-05-01T20:18:12Z", "commit": {"oid": "a79330dc6461b9bc391d32c0953d00df4d1b486e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMVQyMDoxODoxMlrOGPUnfQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMVQyMDoxODoxMlrOGPUnfQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODcxOTYxMw==", "bodyText": "You forgot to add break statements.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                          queryParams = \"&open=1\";\n          \n          \n            \n                        case CLOSE:\n          \n          \n            \n                          queryParams = \"&close=1\";\n          \n          \n            \n                        case CLICK:\n          \n          \n            \n                          queryParams = \"&click=1\";\n          \n          \n            \n                          queryParams = \"&open=1\";\n          \n          \n            \n                          break;\n          \n          \n            \n                        case CLOSE:\n          \n          \n            \n                          queryParams = \"&close=1\";\n          \n          \n            \n                          break;\n          \n          \n            \n                        case CLICK:\n          \n          \n            \n                          queryParams = \"&click=1\";\n          \n          \n            \n                          break;", "url": "https://github.com/openhab/openhab-addons/pull/7486#discussion_r418719613", "createdAt": "2020-05-01T20:18:12Z", "author": {"login": "cpmeister"}, "path": "bundles/org.openhab.binding.opengarage/src/main/java/org/openhab/binding/opengarage/internal/OpenGarageWebTargets.java", "diffHunk": "@@ -43,15 +44,18 @@ public ControllerVariables getControllerVariables() throws OpenGarageCommunicati\n         return ControllerVariables.parse(response);\n     }\n \n-    public void setControllerVariables(boolean request) throws OpenGarageCommunicationException {\n+    public void setControllerVariables(OpenGarageCommand request) throws OpenGarageCommunicationException {\n         logger.debug(\"Received request: {}\", request);\n-        if (request) {\n-            logger.debug(\"Received request to open door\");\n-            String queryParams = \"&open=1\";\n-            invoke(changeControllerVariablesUri, queryParams);\n-        } else {\n-            logger.debug(\"Received request to close door\");\n-            String queryParams = \"&close=1\";\n+        String queryParams = null;\n+        switch (request) {\n+            case OPEN:\n+              queryParams = \"&open=1\";\n+            case CLOSE:\n+              queryParams = \"&close=1\";\n+            case CLICK:\n+              queryParams = \"&click=1\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a79330dc6461b9bc391d32c0953d00df4d1b486e"}, "originalPosition": 29}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bba2b26c31d900a21381ecde44596e0acf798057", "author": {"user": {"login": "psmedley", "name": "Paul Smedley"}}, "url": "https://github.com/openhab/openhab-addons/commit/bba2b26c31d900a21381ecde44596e0acf798057", "committedDate": "2020-05-02T00:05:34Z", "message": "Fixes\n\nSigned-off-by: Paul Smedley <paul@smedley.id.au>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a3d2a72d6b253cafd68df5f45a9ebf3e69157966", "author": {"user": {"login": "psmedley", "name": "Paul Smedley"}}, "url": "https://github.com/openhab/openhab-addons/commit/a3d2a72d6b253cafd68df5f45a9ebf3e69157966", "committedDate": "2020-05-02T04:40:15Z", "message": "Add new thing status-switch to clearly identify item types, deprecate old status\n\nSigned-off-by: Paul Smedley <paul@smedley.id.au>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f9660008bc58494726fbc24063c203c6ff3723aa", "author": {"user": {"login": "psmedley", "name": "Paul Smedley"}}, "url": "https://github.com/openhab/openhab-addons/commit/f9660008bc58494726fbc24063c203c6ff3723aa", "committedDate": "2020-05-02T04:43:22Z", "message": "Fix type\n\nSigned-off-by: Paul Smedley <paul@smedley.id.au>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0NTAxMTUy", "url": "https://github.com/openhab/openhab-addons/pull/7486#pullrequestreview-404501152", "createdAt": "2020-05-02T05:07:28Z", "commit": {"oid": "f9660008bc58494726fbc24063c203c6ff3723aa"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "148e1df92e8bb703c5cbead573de7688b563cf87", "author": {"user": {"login": "psmedley", "name": "Paul Smedley"}}, "url": "https://github.com/openhab/openhab-addons/commit/148e1df92e8bb703c5cbead573de7688b563cf87", "committedDate": "2020-05-02T05:27:56Z", "message": "Fix error for detection of 'unknown' vehicle state\n\nSigned-off-by: Paul Smedley <paul@smedley.id.au>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0NTI5NjU4", "url": "https://github.com/openhab/openhab-addons/pull/7486#pullrequestreview-404529658", "createdAt": "2020-05-02T13:44:14Z", "commit": {"oid": "148e1df92e8bb703c5cbead573de7688b563cf87"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMlQxMzo0NDoxNFrOGPjVuw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMlQxMzo0NDoxNFrOGPjVuw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODk2MDgyNw==", "bodyText": "Please change to debug", "url": "https://github.com/openhab/openhab-addons/pull/7486#discussion_r418960827", "createdAt": "2020-05-02T13:44:14Z", "author": {"login": "digitaldan"}, "path": "bundles/org.openhab.binding.opengarage/src/main/java/org/openhab/binding/opengarage/internal/OpenGarageHandler.java", "diffHunk": "@@ -57,20 +62,25 @@ public OpenGarageHandler(Thing thing) {\n     @Override\n     public void handleCommand(ChannelUID channelUID, Command command) {\n         try {\n-            logger.warn(\"Received command {} for thing '{}' on channel {}\", command, thing.getUID().getAsString(),\n+                logger.warn(\"Received command {} for thing '{}' on channel {}\", command, thing.getUID().getAsString(),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "148e1df92e8bb703c5cbead573de7688b563cf87"}, "originalPosition": 50}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0NTI5OTg1", "url": "https://github.com/openhab/openhab-addons/pull/7486#pullrequestreview-404529985", "createdAt": "2020-05-02T13:49:24Z", "commit": {"oid": "148e1df92e8bb703c5cbead573de7688b563cf87"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMlQxMzo0OToyNVrOGPjXwA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMlQxMzo0OToyNVrOGPjXwA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODk2MTM0NA==", "bodyText": "This is a small nit, but do you need a switch statement at all? It only has one outcome.  i would think you could simply remove the switch statement and just jump straight to checking the command types.", "url": "https://github.com/openhab/openhab-addons/pull/7486#discussion_r418961344", "createdAt": "2020-05-02T13:49:25Z", "author": {"login": "digitaldan"}, "path": "bundles/org.openhab.binding.opengarage/src/main/java/org/openhab/binding/opengarage/internal/OpenGarageHandler.java", "diffHunk": "@@ -57,20 +62,25 @@ public OpenGarageHandler(Thing thing) {\n     @Override\n     public void handleCommand(ChannelUID channelUID, Command command) {\n         try {\n-            logger.warn(\"Received command {} for thing '{}' on channel {}\", command, thing.getUID().getAsString(),\n+                logger.warn(\"Received command {} for thing '{}' on channel {}\", command, thing.getUID().getAsString(),\n                     channelUID.getId());\n-            switch (channelUID.getId()) {\n-                case OpenGarageBindingConstants.CHANNEL_OG_STATUS:\n-                    if (command instanceof OnOffType) {\n-                        changeStatus(((OnOffType) command).equals(OnOffType.ON));\n-                        return;\n-                    }\n-                    break;\n-                default:\n+                switch (channelUID.getId()) {\n+                    case OpenGarageBindingConstants.CHANNEL_OG_STATUS:\n+                    case OpenGarageBindingConstants.CHANNEL_OG_STATUS_SWITCH:\n+                    case OpenGarageBindingConstants.CHANNEL_OG_STATUS_ROLLERSHUTTER:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "148e1df92e8bb703c5cbead573de7688b563cf87"}, "originalPosition": 63}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0NTMwOTUz", "url": "https://github.com/openhab/openhab-addons/pull/7486#pullrequestreview-404530953", "createdAt": "2020-05-02T14:03:16Z", "commit": {"oid": "148e1df92e8bb703c5cbead573de7688b563cf87"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMlQxNDowMzoxNlrOGPjdTg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMlQxNDowMzoxNlrOGPjdTg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODk2Mjc2Ng==", "bodyText": "small nit pick, would maybe  a switch statement be cleaner here?\nswitch(controllerVariables.door){\n    case 0:\n        updateState(OpenGarageBindingConstants.CHANNEL_OG_STATUS, OnOffType.OFF);\n        updateState(OpenGarageBindingConstants.CHANNEL_OG_STATUS_SWITCH, OnOffType.OFF);\n        updateState(OpenGarageBindingConstants.CHANNEL_OG_STATUS_ROLLERSHUTTER, UpDownType.DOWN);\n        updateState(OpenGarageBindingConstants.CHANNEL_OG_STATUS_CONTACT, OpenClosedType.CLOSED);\n        break;\n    case 1:\n        updateState(OpenGarageBindingConstants.CHANNEL_OG_STATUS, OnOffType.ON);\n        updateState(OpenGarageBindingConstants.CHANNEL_OG_STATUS_SWITCH, OnOffType.ON);\n        updateState(OpenGarageBindingConstants.CHANNEL_OG_STATUS_ROLLERSHUTTER, UpDownType.UP);\n        updateState(OpenGarageBindingConstants.CHANNEL_OG_STATUS_CONTACT, OpenClosedType.OPEN);\n        break;\n    default:\n        logger.warn(\"Received unknown door value: {}\", controllerVariables.door);\n}\nAnd of course the same for the vehicle state below.", "url": "https://github.com/openhab/openhab-addons/pull/7486#discussion_r418962766", "createdAt": "2020-05-02T14:03:16Z", "author": {"login": "digitaldan"}, "path": "bundles/org.openhab.binding.opengarage/src/main/java/org/openhab/binding/opengarage/internal/OpenGarageHandler.java", "diffHunk": "@@ -133,20 +143,26 @@ private void pollStatus() throws IOException {\n                     new QuantityType<>(controllerVariables.dist, MetricPrefix.CENTI(SIUnits.METRE)));\n             if (controllerVariables.door == 0) {\n                 updateState(OpenGarageBindingConstants.CHANNEL_OG_STATUS, OnOffType.OFF);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "148e1df92e8bb703c5cbead573de7688b563cf87"}, "originalPosition": 86}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a9ff9d4642c7cc06e03582d384f1e1d24b2f773e", "author": {"user": {"login": "psmedley", "name": "Paul Smedley"}}, "url": "https://github.com/openhab/openhab-addons/commit/a9ff9d4642c7cc06e03582d384f1e1d24b2f773e", "committedDate": "2020-05-02T22:47:25Z", "message": "Logging tweak\n\nSigned-off-by: Paul Smedley <paul@smedley.id.au>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0086b5bc2894f0dc9cd0173898d1bda196f337eb", "author": {"user": {"login": "psmedley", "name": "Paul Smedley"}}, "url": "https://github.com/openhab/openhab-addons/commit/0086b5bc2894f0dc9cd0173898d1bda196f337eb", "committedDate": "2020-05-02T23:02:02Z", "message": "Further improvements\n\nSigned-off-by: Paul Smedley <paul@smedley.id.au>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0NTgwODMz", "url": "https://github.com/openhab/openhab-addons/pull/7486#pullrequestreview-404580833", "createdAt": "2020-05-03T04:37:05Z", "commit": {"oid": "0086b5bc2894f0dc9cd0173898d1bda196f337eb"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 917, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}