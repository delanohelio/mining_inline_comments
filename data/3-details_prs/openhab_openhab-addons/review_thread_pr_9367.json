{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM4OTgxNTI0", "number": 9367, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QxODoxNjowMlrOFG1zIg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQyMDozNjozN1rOFHVrmQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQyNzE3MjE4OnYy", "diffSide": "RIGHT", "path": "bundles/org.openhab.binding.hue/src/main/java/org/openhab/binding/hue/internal/discovery/HueBridgeDiscoveryParticipant.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QxODoxNjowMlrOIICiXw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQwODoxMTozNVrOIIXEpg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTMwMTA4Nw==", "bodyText": "Is it possible that serial number is null here?", "url": "https://github.com/openhab/openhab-addons/pull/9367#discussion_r545301087", "createdAt": "2020-12-17T18:16:02Z", "author": {"login": "cpmeister"}, "path": "bundles/org.openhab.binding.hue/src/main/java/org/openhab/binding/hue/internal/discovery/HueBridgeDiscoveryParticipant.java", "diffHunk": "@@ -57,7 +57,7 @@\n             properties.put(HOST, device.getDetails().getBaseURL().getHost());\n             properties.put(PORT, device.getDetails().getBaseURL().getPort());\n             properties.put(PROTOCOL, device.getDetails().getBaseURL().getProtocol());\n-            properties.put(PROPERTY_SERIAL_NUMBER, device.getDetails().getSerialNumber());\n+            properties.put(PROPERTY_SERIAL_NUMBER, device.getDetails().getSerialNumber().toLowerCase());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f55189036f8a14199c6d1e5a26ec5f54e118fa93"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTMxMzUzNg==", "bodyText": "Probably not in practice but it would be safer to check. I will fix that.", "url": "https://github.com/openhab/openhab-addons/pull/9367#discussion_r545313536", "createdAt": "2020-12-17T18:35:29Z", "author": {"login": "lolodomo"}, "path": "bundles/org.openhab.binding.hue/src/main/java/org/openhab/binding/hue/internal/discovery/HueBridgeDiscoveryParticipant.java", "diffHunk": "@@ -57,7 +57,7 @@\n             properties.put(HOST, device.getDetails().getBaseURL().getHost());\n             properties.put(PORT, device.getDetails().getBaseURL().getPort());\n             properties.put(PROTOCOL, device.getDetails().getBaseURL().getProtocol());\n-            properties.put(PROPERTY_SERIAL_NUMBER, device.getDetails().getSerialNumber());\n+            properties.put(PROPERTY_SERIAL_NUMBER, device.getDetails().getSerialNumber().toLowerCase());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTMwMTA4Nw=="}, "originalCommit": {"oid": "f55189036f8a14199c6d1e5a26ec5f54e118fa93"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTYzNzU0Mg==", "bodyText": "Done", "url": "https://github.com/openhab/openhab-addons/pull/9367#discussion_r545637542", "createdAt": "2020-12-18T08:11:35Z", "author": {"login": "lolodomo"}, "path": "bundles/org.openhab.binding.hue/src/main/java/org/openhab/binding/hue/internal/discovery/HueBridgeDiscoveryParticipant.java", "diffHunk": "@@ -57,7 +57,7 @@\n             properties.put(HOST, device.getDetails().getBaseURL().getHost());\n             properties.put(PORT, device.getDetails().getBaseURL().getPort());\n             properties.put(PROTOCOL, device.getDetails().getBaseURL().getProtocol());\n-            properties.put(PROPERTY_SERIAL_NUMBER, device.getDetails().getSerialNumber());\n+            properties.put(PROPERTY_SERIAL_NUMBER, device.getDetails().getSerialNumber().toLowerCase());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTMwMTA4Nw=="}, "originalCommit": {"oid": "f55189036f8a14199c6d1e5a26ec5f54e118fa93"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQzMjM5NTc3OnYy", "diffSide": "RIGHT", "path": "bundles/org.openhab.binding.hue/src/main/java/org/openhab/binding/hue/internal/discovery/HueBridgeDiscoveryParticipant.java", "isResolved": false, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQyMDozNjozN1rOIIx_PQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQyMToxMDowN1rOIIy0dQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjA3ODUyNQ==", "bodyText": "Why shouldn't host, port and protocol be set, just because no serial number is available?", "url": "https://github.com/openhab/openhab-addons/pull/9367#discussion_r546078525", "createdAt": "2020-12-18T20:36:37Z", "author": {"login": "kaikreuzer"}, "path": "bundles/org.openhab.binding.hue/src/main/java/org/openhab/binding/hue/internal/discovery/HueBridgeDiscoveryParticipant.java", "diffHunk": "@@ -51,13 +51,14 @@\n \n     @Override\n     public @Nullable DiscoveryResult createResult(RemoteDevice device) {\n+        String serialNumber = device.getDetails().getSerialNumber();\n         ThingUID uid = getThingUID(device);\n-        if (uid != null) {\n+        if (uid != null && serialNumber != null && !serialNumber.isBlank()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f967286231155514aac11761864f3191284e6f93"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjA4MzkwMA==", "bodyText": "Because the serial number is required to build the thing UID and is the representation property of the thinj.", "url": "https://github.com/openhab/openhab-addons/pull/9367#discussion_r546083900", "createdAt": "2020-12-18T20:49:39Z", "author": {"login": "lolodomo"}, "path": "bundles/org.openhab.binding.hue/src/main/java/org/openhab/binding/hue/internal/discovery/HueBridgeDiscoveryParticipant.java", "diffHunk": "@@ -51,13 +51,14 @@\n \n     @Override\n     public @Nullable DiscoveryResult createResult(RemoteDevice device) {\n+        String serialNumber = device.getDetails().getSerialNumber();\n         ThingUID uid = getThingUID(device);\n-        if (uid != null) {\n+        if (uid != null && serialNumber != null && !serialNumber.isBlank()) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjA3ODUyNQ=="}, "originalCommit": {"oid": "f967286231155514aac11761864f3191284e6f93"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjA4NTAyOQ==", "bodyText": "That is an assumption on how getThingUID, but that could potentially change at any time in future. Imho such implicit assumptions that are based on a current implementation should not be made.", "url": "https://github.com/openhab/openhab-addons/pull/9367#discussion_r546085029", "createdAt": "2020-12-18T20:52:28Z", "author": {"login": "kaikreuzer"}, "path": "bundles/org.openhab.binding.hue/src/main/java/org/openhab/binding/hue/internal/discovery/HueBridgeDiscoveryParticipant.java", "diffHunk": "@@ -51,13 +51,14 @@\n \n     @Override\n     public @Nullable DiscoveryResult createResult(RemoteDevice device) {\n+        String serialNumber = device.getDetails().getSerialNumber();\n         ThingUID uid = getThingUID(device);\n-        if (uid != null) {\n+        if (uid != null && serialNumber != null && !serialNumber.isBlank()) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjA3ODUyNQ=="}, "originalCommit": {"oid": "f967286231155514aac11761864f3191284e6f93"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjA4ODEzMA==", "bodyText": "Ok, I will change.", "url": "https://github.com/openhab/openhab-addons/pull/9367#discussion_r546088130", "createdAt": "2020-12-18T20:59:58Z", "author": {"login": "lolodomo"}, "path": "bundles/org.openhab.binding.hue/src/main/java/org/openhab/binding/hue/internal/discovery/HueBridgeDiscoveryParticipant.java", "diffHunk": "@@ -51,13 +51,14 @@\n \n     @Override\n     public @Nullable DiscoveryResult createResult(RemoteDevice device) {\n+        String serialNumber = device.getDetails().getSerialNumber();\n         ThingUID uid = getThingUID(device);\n-        if (uid != null) {\n+        if (uid != null && serialNumber != null && !serialNumber.isBlank()) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjA3ODUyNQ=="}, "originalCommit": {"oid": "f967286231155514aac11761864f3191284e6f93"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjA5MjE0OQ==", "bodyText": "Done", "url": "https://github.com/openhab/openhab-addons/pull/9367#discussion_r546092149", "createdAt": "2020-12-18T21:10:07Z", "author": {"login": "lolodomo"}, "path": "bundles/org.openhab.binding.hue/src/main/java/org/openhab/binding/hue/internal/discovery/HueBridgeDiscoveryParticipant.java", "diffHunk": "@@ -51,13 +51,14 @@\n \n     @Override\n     public @Nullable DiscoveryResult createResult(RemoteDevice device) {\n+        String serialNumber = device.getDetails().getSerialNumber();\n         ThingUID uid = getThingUID(device);\n-        if (uid != null) {\n+        if (uid != null && serialNumber != null && !serialNumber.isBlank()) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjA3ODUyNQ=="}, "originalCommit": {"oid": "f967286231155514aac11761864f3191284e6f93"}, "originalPosition": 7}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3652, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}