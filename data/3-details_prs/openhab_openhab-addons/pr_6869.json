{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY0NDc4Mzg4", "number": 6869, "title": "[icloud] Fix JSON parsing and minor bugfixes", "bodyText": "Fixes #6801\nThe binding never checked if the returned value is a correct JSON Object or not, maybe at earlier times, always a JSON Object got returned.\nNow, sometimes (maybe something changed in the API, I didn't find any source for this) an HTML object is returned, indicating that the service is unavailable.\nThis caused an exception in the binding and stopped updating the device info.\n(I have seen this problem earlier, but it happened very rarely, only once in a few months. Now it happens after a few hour or even less).\nI don't think this has to do anything with rules. This will happen even if you don't use any rule involving iCloud items.\nI have tested this version, now it will log the error and also update the Thing state to OFFLINE, but the next update cycle will (hopefully) succeed and it will not interrupt these Threads.\nAlso fixed a typo in the feature.xml.\nFurther reading:\nhttps://community.openhab.org/t/icloud-binding-crashing-2-5/89922", "createdAt": "2020-01-19T00:01:15Z", "url": "https://github.com/openhab/openhab-addons/pull/6869", "merged": true, "mergeCommit": {"oid": "39fa8e47e1034562af3d72c297d60b8dd38dfbf4"}, "closed": true, "closedAt": "2020-01-23T17:00:14Z", "author": {"login": "radokristof"}, "timelineItems": {"totalCount": 24, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb70MQtgFqTM0NDk4NzI5NQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABb88ETDgFqTM0Njg5MjAxNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ0OTg3Mjk1", "url": "https://github.com/openhab/openhab-addons/pull/6869#pullrequestreview-344987295", "createdAt": "2020-01-19T09:03:48Z", "commit": {"oid": "e590a8898368dc01687d6d771f9b461aaeae7171"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xOVQwOTowMzo0OFrOFfN3Vw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xOVQwOTowMzo0OFrOFfN3Vw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODI3NzMzNQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            updateStatus(ThingStatus.OFFLINE, ThingStatusDetail.COMMUNICATION_ERROR, \"Response = \" + json);\n          \n          \n            \n                            updateStatus(ThingStatus.OFFLINE, ThingStatusDetail.COMMUNICATION_ERROR, \"iCloud response invalid: \" + e.getMessage());\n          \n      \n    \n    \n  \n\nAnd remove the logger. Thing status changes are logged anyway", "url": "https://github.com/openhab/openhab-addons/pull/6869#discussion_r368277335", "createdAt": "2020-01-19T09:03:48Z", "author": {"login": "J-N-K"}, "path": "bundles/org.openhab.binding.icloud/src/main/java/org/openhab/binding/icloud/internal/handler/ICloudAccountBridgeHandler.java", "diffHunk": "@@ -161,9 +162,9 @@ public void refreshData() {\n                 }\n \n                 logger.debug(\"iCloud bridge data refresh complete.\");\n-            } catch (NumberFormatException e) {\n-                logger.warn(\"iCloud returned an incorrect account status code : '{}'\",\n-                        iCloudData.getICloudAccountStatusCode());\n+            } catch (NumberFormatException | JsonSyntaxException e) {\n+                updateStatus(ThingStatus.OFFLINE, ThingStatusDetail.COMMUNICATION_ERROR, \"Response = \" + json);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e590a8898368dc01687d6d771f9b461aaeae7171"}, "originalPosition": 35}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "359c97a7dc9638240fbb15b1a0a96d8129467083", "author": {"user": {"login": "radokristof", "name": "Kristof Rado"}}, "url": "https://github.com/openhab/openhab-addons/commit/359c97a7dc9638240fbb15b1a0a96d8129467083", "committedDate": "2020-01-19T14:54:57Z", "message": "Fix iCloud JSON parsing\n\nSigned-off-by: Kristof Rado <rado.krisi@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "30242d449f25c382eda4927b01e28a9e6cc12767", "author": {"user": {"login": "radokristof", "name": "Kristof Rado"}}, "url": "https://github.com/openhab/openhab-addons/commit/30242d449f25c382eda4927b01e28a9e6cc12767", "committedDate": "2020-01-19T14:54:57Z", "message": "Added NonNullByDefault annotations\n\nSigned-off-by: Kristof Rado <rado.krisi@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "74257a214608306c0d28983861740b77674606f5", "author": {"user": {"login": "radokristof", "name": "Kristof Rado"}}, "url": "https://github.com/openhab/openhab-addons/commit/74257a214608306c0d28983861740b77674606f5", "committedDate": "2020-01-19T14:54:58Z", "message": "Removed logger\n\nSigned-off-by: Kristof Rado <rado.krisi@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4c85c99d42c41b2b5ceabbdf84b5ffa5ec577984", "author": {"user": {"login": "radokristof", "name": "Kristof Rado"}}, "url": "https://github.com/openhab/openhab-addons/commit/4c85c99d42c41b2b5ceabbdf84b5ffa5ec577984", "committedDate": "2020-01-19T14:54:58Z", "message": "Update README.md\n\nSigned-off-by: Kristof Rado <rado.krisi@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ1MDA4Nzgz", "url": "https://github.com/openhab/openhab-addons/pull/6869#pullrequestreview-345008783", "createdAt": "2020-01-19T15:23:58Z", "commit": {"oid": "4c85c99d42c41b2b5ceabbdf84b5ffa5ec577984"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xOVQxNToyMzo1OVrOFfPXcA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xOVQxNToyNzowOVrOFfPYKg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODMwMTkzNg==", "bodyText": "If there is a default, add it here (BTW: is it really needed that this is Integer instead of int?)\npublic Integer refreshTimeInMinutes = 5;\n\nelse annotate the with @Nullable:\npublic @Nullable String appleId;", "url": "https://github.com/openhab/openhab-addons/pull/6869#discussion_r368301936", "createdAt": "2020-01-19T15:23:59Z", "author": {"login": "J-N-K"}, "path": "bundles/org.openhab.binding.icloud/src/main/java/org/openhab/binding/icloud/internal/configuration/ICloudAccountThingConfiguration.java", "diffHunk": "@@ -12,12 +12,15 @@\n  */\n package org.openhab.binding.icloud.internal.configuration;\n \n+import org.eclipse.jdt.annotation.NonNullByDefault;\n+\n /**\n  * Represents the configuration of an iCloud Account Thing.\n  *\n  * @author Patrik Gfeller - Initial Contribution\n  *\n  */\n+@NonNullByDefault\n public class ICloudAccountThingConfiguration {\n     public String appleId;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4c85c99d42c41b2b5ceabbdf84b5ffa5ec577984"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODMwMjEyMg==", "bodyText": "I think adding @NonNullByDefault to DTO classes is not necessary and avoids your problems.", "url": "https://github.com/openhab/openhab-addons/pull/6869#discussion_r368302122", "createdAt": "2020-01-19T15:27:09Z", "author": {"login": "J-N-K"}, "path": "bundles/org.openhab.binding.icloud/src/main/java/org/openhab/binding/icloud/internal/json/response/ICloudAccountDataResponse.java", "diffHunk": "@@ -15,13 +15,15 @@\n import java.util.List;\n \n import com.google.gson.annotations.SerializedName;\n+import org.eclipse.jdt.annotation.NonNullByDefault;\n \n /**\n  * Serializable class to parse the device information json response\n  * received from the Apple server.\n  *\n  * @author Patrik Gfeller - Initial Contribution\n  */\n+@NonNullByDefault", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4c85c99d42c41b2b5ceabbdf84b5ffa5ec577984"}, "originalPosition": 12}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bbdbbe70be94907be7595f0a90fe2d2d030b1867", "author": {"user": {"login": "radokristof", "name": "Kristof Rado"}}, "url": "https://github.com/openhab/openhab-addons/commit/bbdbbe70be94907be7595f0a90fe2d2d030b1867", "committedDate": "2020-01-19T15:47:38Z", "message": "Fixed NonNull annotations\n\nSigned-off-by: Kristof Rado <rado.krisi@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ1MDEwMjU2", "url": "https://github.com/openhab/openhab-addons/pull/6869#pullrequestreview-345010256", "createdAt": "2020-01-19T15:51:11Z", "commit": {"oid": "eebf04c832b8f185e9b7ac718970a6c55c0dd801"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xOVQxNTo1MToxMVrOFfPeVg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xOVQxNTo1MToxMVrOFfPeVg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODMwMzcwMg==", "bodyText": "That won\u2018t work. Either provide a default and use int or @nullable and Integer.", "url": "https://github.com/openhab/openhab-addons/pull/6869#discussion_r368303702", "createdAt": "2020-01-19T15:51:11Z", "author": {"login": "J-N-K"}, "path": "bundles/org.openhab.binding.icloud/src/main/java/org/openhab/binding/icloud/internal/configuration/ICloudAccountThingConfiguration.java", "diffHunk": "@@ -22,7 +23,7 @@\n  */\n @NonNullByDefault\n public class ICloudAccountThingConfiguration {\n-    public String appleId;\n-    public String password;\n-    public Integer refreshTimeInMinutes;\n+    public @Nullable String appleId;\n+    public @Nullable String password;\n+    public @Nullable int refreshTimeInMinutes;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eebf04c832b8f185e9b7ac718970a6c55c0dd801"}, "originalPosition": 17}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d1450b8319ddeece4b6aabe6fde2839e5af1f448", "author": {"user": {"login": "radokristof", "name": "Kristof Rado"}}, "url": "https://github.com/openhab/openhab-addons/commit/d1450b8319ddeece4b6aabe6fde2839e5af1f448", "committedDate": "2020-01-19T16:04:01Z", "message": "Fix annotation errors\n\nSigned-off-by: Kristof Rado <rado.krisi@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9918814e5c10c76ba2edce1b63491718994e7a4a", "author": {"user": {"login": "radokristof", "name": "Kristof Rado"}}, "url": "https://github.com/openhab/openhab-addons/commit/9918814e5c10c76ba2edce1b63491718994e7a4a", "committedDate": "2020-01-19T18:16:25Z", "message": "Fixed NonNull annotations\n\nSigned-off-by: Kristof Rado <rado.krisi@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4a7df7d6f8eff15e2fb96ac9963b7c7cc9dcc8a7", "author": {"user": {"login": "radokristof", "name": "Kristof Rado"}}, "url": "https://github.com/openhab/openhab-addons/commit/4a7df7d6f8eff15e2fb96ac9963b7c7cc9dcc8a7", "committedDate": "2020-01-19T18:16:25Z", "message": "More annotation fix\n\nSigned-off-by: Kristof Rado <rado.krisi@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3aa5e97e1dca16d21d73e3cb84f0c55a20342360", "author": {"user": {"login": "radokristof", "name": "Kristof Rado"}}, "url": "https://github.com/openhab/openhab-addons/commit/3aa5e97e1dca16d21d73e3cb84f0c55a20342360", "committedDate": "2020-01-19T18:17:34Z", "message": "More annotation fix\n\nSigned-off-by: Kristof Rado <rado.krisi@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "73895a7c2a5e945da21afb376e1c5cc5d3eed5b2", "author": {"user": {"login": "radokristof", "name": "Kristof Rado"}}, "url": "https://github.com/openhab/openhab-addons/commit/73895a7c2a5e945da21afb376e1c5cc5d3eed5b2", "committedDate": "2020-01-19T18:17:40Z", "message": "Fix Travis build\n\nSigned-off-by: Kristof Rado <rado.krisi@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7bdc612c1f9e80f57c8c93a038a627f9d03d730a", "author": {"user": {"login": "radokristof", "name": "Kristof Rado"}}, "url": "https://github.com/openhab/openhab-addons/commit/7bdc612c1f9e80f57c8c93a038a627f9d03d730a", "committedDate": "2020-01-19T18:25:20Z", "message": "spotless apply\n\nSigned-off-by: Kristof Rado <rado.krisi@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e6b20b1c0718348069ea6b2f2e44029500f5f136", "author": {"user": {"login": "radokristof", "name": "Kristof Rado"}}, "url": "https://github.com/openhab/openhab-addons/commit/e6b20b1c0718348069ea6b2f2e44029500f5f136", "committedDate": "2020-01-19T19:16:36Z", "message": "Missing commit\n\nSigned-off-by: Kristof Rado <rado.krisi@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2b46068bc8a3277c52abd9a4885ca5e428d646f0", "author": {"user": {"login": "radokristof", "name": "Kristof Rado"}}, "url": "https://github.com/openhab/openhab-addons/commit/2b46068bc8a3277c52abd9a4885ca5e428d646f0", "committedDate": "2020-01-21T11:52:22Z", "message": "Update fmipmobile cert\n\nSigned-off-by: Kristof Rado <rado.krisi@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ2NDYxODA5", "url": "https://github.com/openhab/openhab-addons/pull/6869#pullrequestreview-346461809", "createdAt": "2020-01-22T09:54:53Z", "commit": {"oid": "2b46068bc8a3277c52abd9a4885ca5e428d646f0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "feb7bad14757d5a0a17e29ca7f5e55e11b3791d6", "author": {"user": {"login": "radokristof", "name": "Kristof Rado"}}, "url": "https://github.com/openhab/openhab-addons/commit/feb7bad14757d5a0a17e29ca7f5e55e11b3791d6", "committedDate": "2020-01-22T18:25:05Z", "message": "Fix feature line format\n\nSigned-off-by: Kristof Rado <rado.krisi@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ2ODEwODQ5", "url": "https://github.com/openhab/openhab-addons/pull/6869#pullrequestreview-346810849", "createdAt": "2020-01-22T18:35:20Z", "commit": {"oid": "feb7bad14757d5a0a17e29ca7f5e55e11b3791d6"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMlQxODozNToyMFrOFgmpDQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMlQxODo0NzoyOFrOFgnATA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTczMTg1Mw==", "bodyText": "It doesn't make sense to provide any of these as null, right? You should make a null-check before instantiating ICloudConnection (found it in startHandler, if any of the required credentials is null, set the thing to OFFLINE/CONFIGURATION_ERROR with a message stating what is wrong)", "url": "https://github.com/openhab/openhab-addons/pull/6869#discussion_r369731853", "createdAt": "2020-01-22T18:35:20Z", "author": {"login": "J-N-K"}, "path": "bundles/org.openhab.binding.icloud/src/main/java/org/openhab/binding/icloud/internal/ICloudConnection.java", "diffHunk": "@@ -50,7 +53,7 @@\n     private final String iCloudDataRequestURL;\n     private final String iCloudFindMyDeviceURL;\n \n-    public ICloudConnection(String appleId, String password) throws URISyntaxException {\n+    public ICloudConnection(@Nullable String appleId, @Nullable String password) throws URISyntaxException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "feb7bad14757d5a0a17e29ca7f5e55e11b3791d6"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTczMjU0MA==", "bodyText": "same here. calling findMyDevice with a id == null doesn't make sense.", "url": "https://github.com/openhab/openhab-addons/pull/6869#discussion_r369732540", "createdAt": "2020-01-22T18:36:43Z", "author": {"login": "J-N-K"}, "path": "bundles/org.openhab.binding.icloud/src/main/java/org/openhab/binding/icloud/internal/ICloudConnection.java", "diffHunk": "@@ -61,7 +64,7 @@ public ICloudConnection(String appleId, String password) throws URISyntaxExcepti\n      *\n      * @throws IOException\n      */\n-    public void findMyDevice(String id) throws IOException {\n+    public void findMyDevice(@Nullable String id) throws IOException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "feb7bad14757d5a0a17e29ca7f5e55e11b3791d6"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTczNTM2OA==", "bodyText": "see above. if deviceId is null, it doesn't make sense to call findmydevice", "url": "https://github.com/openhab/openhab-addons/pull/6869#discussion_r369735368", "createdAt": "2020-01-22T18:42:19Z", "author": {"login": "J-N-K"}, "path": "bundles/org.openhab.binding.icloud/src/main/java/org/openhab/binding/icloud/internal/handler/ICloudAccountBridgeHandler.java", "diffHunk": "@@ -110,7 +117,7 @@ public void dispose() {\n         super.dispose();\n     }\n \n-    public void findMyDevice(String deviceId) throws IOException {\n+    public void findMyDevice(@Nullable String deviceId) throws IOException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "feb7bad14757d5a0a17e29ca7f5e55e11b3791d6"}, "originalPosition": 62}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTczNTc3OA==", "bodyText": "since connection is @Nullable, please add a null-check here", "url": "https://github.com/openhab/openhab-addons/pull/6869#discussion_r369735778", "createdAt": "2020-01-22T18:43:11Z", "author": {"login": "J-N-K"}, "path": "bundles/org.openhab.binding.icloud/src/main/java/org/openhab/binding/icloud/internal/handler/ICloudAccountBridgeHandler.java", "diffHunk": "@@ -110,7 +117,7 @@ public void dispose() {\n         super.dispose();\n     }\n \n-    public void findMyDevice(String deviceId) throws IOException {\n+    public void findMyDevice(@Nullable String deviceId) throws IOException {\n         connection.findMyDevice(deviceId);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "feb7bad14757d5a0a17e29ca7f5e55e11b3791d6"}, "originalPosition": 63}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTczNzEzNg==", "bodyText": "see above.", "url": "https://github.com/openhab/openhab-addons/pull/6869#discussion_r369737136", "createdAt": "2020-01-22T18:45:59Z", "author": {"login": "J-N-K"}, "path": "bundles/org.openhab.binding.icloud/src/main/java/org/openhab/binding/icloud/internal/json/request/ICloudFindMyDeviceRequest.java", "diffHunk": "@@ -14,19 +14,24 @@\n \n import static org.openhab.binding.icloud.internal.ICloudBindingConstants.FIND_MY_DEVICE_REQUEST_SUBJECT;\n \n+import org.eclipse.jdt.annotation.NonNullByDefault;\n+import org.eclipse.jdt.annotation.Nullable;\n+\n import com.google.gson.annotations.SerializedName;\n \n /**\n  * Serializable class to create a \"Find My Device\" json request string.\n  *\n  * @author Patrik Gfeller - Initial Contribution\n  */\n+@NonNullByDefault\n public class ICloudFindMyDeviceRequest {\n     @SerializedName(\"device\")\n+    @Nullable\n     String deviceId;\n     final String subject = FIND_MY_DEVICE_REQUEST_SUBJECT;\n \n-    public ICloudFindMyDeviceRequest(String id) {\n+    public ICloudFindMyDeviceRequest(@Nullable String id) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "feb7bad14757d5a0a17e29ca7f5e55e11b3791d6"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTczNzgwNA==", "bodyText": "not sure here (didn't check the whole code): is there any useful case where key == null is possible? if not, check for null where this is instantiated.", "url": "https://github.com/openhab/openhab-addons/pull/6869#discussion_r369737804", "createdAt": "2020-01-22T18:47:28Z", "author": {"login": "J-N-K"}, "path": "bundles/org.openhab.binding.icloud/src/main/java/org/openhab/binding/icloud/internal/utilities/ICloudTextTranslator.java", "diffHunk": "@@ -35,12 +36,12 @@ public ICloudTextTranslator(Bundle bundle, TranslationProvider i18nProvider, Loc\n         this.localeProvider = localeProvider;\n     }\n \n-    public String getText(String key, Object... arguments) {\n+    public String getText(@Nullable String key, Object... arguments) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "feb7bad14757d5a0a17e29ca7f5e55e11b3791d6"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "254c357d3b05297b048a6bdbbbafa3f5889c3187", "author": {"user": {"login": "radokristof", "name": "Kristof Rado"}}, "url": "https://github.com/openhab/openhab-addons/commit/254c357d3b05297b048a6bdbbbafa3f5889c3187", "committedDate": "2020-01-22T19:21:57Z", "message": "Changes based on review\n\nSigned-off-by: Kristof Rado <rado.krisi@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ2ODQxNzQ2", "url": "https://github.com/openhab/openhab-addons/pull/6869#pullrequestreview-346841746", "createdAt": "2020-01-22T19:24:30Z", "commit": {"oid": "254c357d3b05297b048a6bdbbbafa3f5889c3187"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ2ODY0NjEy", "url": "https://github.com/openhab/openhab-addons/pull/6869#pullrequestreview-346864612", "createdAt": "2020-01-22T20:01:07Z", "commit": {"oid": "254c357d3b05297b048a6bdbbbafa3f5889c3187"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMlQyMDowMTowN1rOFgpN4Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMlQyMDowMjo0OVrOFgpQxA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTc3NDA0OQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        if(config.appleId != null || config.password != null) {\n          \n          \n            \n                        final String appleId = config.appleId;\n          \n          \n            \n                        final String password = config.password;\n          \n          \n            \n                        if(appleId != null || password != null) {\n          \n          \n            \n                            connection = new ICloudConnection(appleId, password);", "url": "https://github.com/openhab/openhab-addons/pull/6869#discussion_r369774049", "createdAt": "2020-01-22T20:01:07Z", "author": {"login": "J-N-K"}, "path": "bundles/org.openhab.binding.icloud/src/main/java/org/openhab/binding/icloud/internal/handler/ICloudAccountBridgeHandler.java", "diffHunk": "@@ -125,10 +135,14 @@ public void unregisterListener(ICloudDeviceInformationListener listener) {\n     private void startHandler() {\n         try {\n             logger.debug(\"iCloud bridge starting handler ...\");\n-            config = getConfigAs(ICloudAccountThingConfiguration.class);\n-\n-            connection = new ICloudConnection(config.appleId, config.password);\n-\n+            ICloudAccountThingConfiguration config = getConfigAs(ICloudAccountThingConfiguration.class);\n+            if(config.appleId != null || config.password != null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "254c357d3b05297b048a6bdbbbafa3f5889c3187"}, "originalPosition": 76}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTc3NDc4OA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                if(deviceId == null) {\n          \n          \n            \n                                final String deviceId = this.deviceId;\n          \n          \n            \n                                if (deviceId == null) {", "url": "https://github.com/openhab/openhab-addons/pull/6869#discussion_r369774788", "createdAt": "2020-01-22T20:02:49Z", "author": {"login": "J-N-K"}, "path": "bundles/org.openhab.binding.icloud/src/main/java/org/openhab/binding/icloud/internal/handler/ICloudDeviceHandler.java", "diffHunk": "@@ -127,6 +127,10 @@ public void handleCommand(ChannelUID channelUID, Command command) {\n         if (channelId.equals(FIND_MY_PHONE)) {\n             if (command == OnOffType.ON) {\n                 try {\n+                    if(deviceId == null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "254c357d3b05297b048a6bdbbbafa3f5889c3187"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "61e57347bad1b79a943f8702fbfb9d03b013683b", "author": {"user": {"login": "radokristof", "name": "Kristof Rado"}}, "url": "https://github.com/openhab/openhab-addons/commit/61e57347bad1b79a943f8702fbfb9d03b013683b", "committedDate": "2020-01-22T20:38:36Z", "message": "Fix Travis tests\n\nSigned-off-by: Kristof Rado <rado.krisi@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ2ODkyMDE1", "url": "https://github.com/openhab/openhab-addons/pull/6869#pullrequestreview-346892015", "createdAt": "2020-01-22T20:49:23Z", "commit": {"oid": "61e57347bad1b79a943f8702fbfb9d03b013683b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1680, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}