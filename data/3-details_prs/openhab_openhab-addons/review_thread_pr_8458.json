{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg1NDYzMjg3", "number": 8458, "reviewThreads": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMlQwOToxOToxMlrOEiwxwg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxMToxNTo0NlrOEjE75g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA0ODg2MjEwOnYy", "diffSide": "RIGHT", "path": "bundles/org.openhab.binding.max/src/main/java/org/openhab/binding/max/internal/MaxConsoleCommandExtension.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMlQwOToxOToxMlrOHQz45w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMlQxNTowNzozNVrOHQ1quw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzM4OTQxNQ==", "bodyText": "What about using constructor injection for this service implementation and omit @Nullable at all but make it final?", "url": "https://github.com/openhab/openhab-addons/pull/8458#discussion_r487389415", "createdAt": "2020-09-12T09:19:12Z", "author": {"login": "cweitkamp"}, "path": "bundles/org.openhab.binding.max/src/main/java/org/openhab/binding/max/internal/MaxConsoleCommandExtension.java", "diffHunk": "@@ -37,12 +38,13 @@\n  * @author Marcel Verpaalen - Initial contribution\n  */\n @Component(service = ConsoleCommandExtension.class)\n+@NonNullByDefault\n public class MaxConsoleCommandExtension extends AbstractConsoleCommandExtension {\n \n     private static final String SUBCMD_BACKUP = \"backup\";\n     private static final String SUBCMD_REBOOT = \"reboot\";\n \n-    private ThingRegistry thingRegistry;\n+    private @Nullable ThingRegistry thingRegistry;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aad8caf30b9eac07ebd33dc34f4f42ba5ca6f679"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzQxODU1NQ==", "bodyText": "yes, that would be an improvement.\nDone", "url": "https://github.com/openhab/openhab-addons/pull/8458#discussion_r487418555", "createdAt": "2020-09-12T15:07:35Z", "author": {"login": "marcelrv"}, "path": "bundles/org.openhab.binding.max/src/main/java/org/openhab/binding/max/internal/MaxConsoleCommandExtension.java", "diffHunk": "@@ -37,12 +38,13 @@\n  * @author Marcel Verpaalen - Initial contribution\n  */\n @Component(service = ConsoleCommandExtension.class)\n+@NonNullByDefault\n public class MaxConsoleCommandExtension extends AbstractConsoleCommandExtension {\n \n     private static final String SUBCMD_BACKUP = \"backup\";\n     private static final String SUBCMD_REBOOT = \"reboot\";\n \n-    private ThingRegistry thingRegistry;\n+    private @Nullable ThingRegistry thingRegistry;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzM4OTQxNQ=="}, "originalCommit": {"oid": "aad8caf30b9eac07ebd33dc34f4f42ba5ca6f679"}, "originalPosition": 25}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA0OTkzMDAzOnYy", "diffSide": "RIGHT", "path": "bundles/org.openhab.binding.max/src/main/java/org/openhab/binding/max/internal/message/CMessage.java", "isResolved": false, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xM1QxMToxNTo1M1rOHQ7oaw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxMToxNzowNVrOHRPFyQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzUxNjI2Nw==", "bodyText": "Can you please check for usage of org.apache.commons.net.util.Base64 in the tests too?", "url": "https://github.com/openhab/openhab-addons/pull/8458#discussion_r487516267", "createdAt": "2020-09-13T11:15:53Z", "author": {"login": "cweitkamp"}, "path": "bundles/org.openhab.binding.max/src/main/java/org/openhab/binding/max/internal/message/CMessage.java", "diffHunk": "@@ -26,6 +26,7 @@\n \n import org.apache.commons.lang.StringUtils;\n import org.apache.commons.net.util.Base64;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9ec84d654dbbe73734d6fe7cc82cd398e36c4ce8"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzUyNDQ3MA==", "bodyText": "This is because my note: decodebase64 still pending as output results differ from util.base64 (apache decoder is more lenient)\nSpend all ready quite some time on this, but I have not yet found a way to have regular decoder accept all strings.\nHence this pr only has the encoding instances replaced.", "url": "https://github.com/openhab/openhab-addons/pull/8458#discussion_r487524470", "createdAt": "2020-09-13T12:36:49Z", "author": {"login": "marcelrv"}, "path": "bundles/org.openhab.binding.max/src/main/java/org/openhab/binding/max/internal/message/CMessage.java", "diffHunk": "@@ -26,6 +26,7 @@\n \n import org.apache.commons.lang.StringUtils;\n import org.apache.commons.net.util.Base64;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzUxNjI2Nw=="}, "originalCommit": {"oid": "9ec84d654dbbe73734d6fe7cc82cd398e36c4ce8"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzUyNTI2OA==", "bodyText": "Note.. I have also read into thre RFC for base64. The RFC is bit ' sloppy' wrt how the ending is defined. The language is ' may add ' some specific ending.\nseems the decoding in java.util.base64 implementation is not allowing this specific ending, implementing it in a strict way and gives an error.", "url": "https://github.com/openhab/openhab-addons/pull/8458#discussion_r487525268", "createdAt": "2020-09-13T12:44:44Z", "author": {"login": "marcelrv"}, "path": "bundles/org.openhab.binding.max/src/main/java/org/openhab/binding/max/internal/message/CMessage.java", "diffHunk": "@@ -26,6 +26,7 @@\n \n import org.apache.commons.lang.StringUtils;\n import org.apache.commons.net.util.Base64;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzUxNjI2Nw=="}, "originalCommit": {"oid": "9ec84d654dbbe73734d6fe7cc82cd398e36c4ce8"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzU3MDI2Mw==", "bodyText": "darn... wasted 2 evenings trying to understand the differences in the implementation, to now find out the testcode in TCommandTest.java was having a bug.", "url": "https://github.com/openhab/openhab-addons/pull/8458#discussion_r487570263", "createdAt": "2020-09-13T19:53:35Z", "author": {"login": "marcelrv"}, "path": "bundles/org.openhab.binding.max/src/main/java/org/openhab/binding/max/internal/message/CMessage.java", "diffHunk": "@@ -26,6 +26,7 @@\n \n import org.apache.commons.lang.StringUtils;\n import org.apache.commons.net.util.Base64;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzUxNjI2Nw=="}, "originalCommit": {"oid": "9ec84d654dbbe73734d6fe7cc82cd398e36c4ce8"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzgzNTA4MQ==", "bodyText": "I am glad you found the bug and with it a solution for org.apache.commons replacement.", "url": "https://github.com/openhab/openhab-addons/pull/8458#discussion_r487835081", "createdAt": "2020-09-14T11:17:05Z", "author": {"login": "cweitkamp"}, "path": "bundles/org.openhab.binding.max/src/main/java/org/openhab/binding/max/internal/message/CMessage.java", "diffHunk": "@@ -26,6 +26,7 @@\n \n import org.apache.commons.lang.StringUtils;\n import org.apache.commons.net.util.Base64;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzUxNjI2Nw=="}, "originalCommit": {"oid": "9ec84d654dbbe73734d6fe7cc82cd398e36c4ce8"}, "originalPosition": 3}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA0OTkzMDIwOnYy", "diffSide": "RIGHT", "path": "bundles/org.openhab.binding.max/src/main/java/org/openhab/binding/max/internal/message/LMessage.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xM1QxMToxNjoxNFrOHQ7ohA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xM1QxMToxNjoxNFrOHQ7ohA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzUxNjI5Mg==", "bodyText": "see above", "url": "https://github.com/openhab/openhab-addons/pull/8458#discussion_r487516292", "createdAt": "2020-09-13T11:16:14Z", "author": {"login": "cweitkamp"}, "path": "bundles/org.openhab.binding.max/src/main/java/org/openhab/binding/max/internal/message/LMessage.java", "diffHunk": "@@ -18,6 +18,7 @@\n import java.util.List;\n \n import org.apache.commons.net.util.Base64;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9ec84d654dbbe73734d6fe7cc82cd398e36c4ce8"}, "originalPosition": 3}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA0OTkzMDQ1OnYy", "diffSide": "RIGHT", "path": "bundles/org.openhab.binding.max/src/main/java/org/openhab/binding/max/internal/message/MMessage.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xM1QxMToxNjozNVrOHQ7opA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xM1QxMToxNjozNVrOHQ7opA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzUxNjMyNA==", "bodyText": "see above", "url": "https://github.com/openhab/openhab-addons/pull/8458#discussion_r487516324", "createdAt": "2020-09-13T11:16:35Z", "author": {"login": "cweitkamp"}, "path": "bundles/org.openhab.binding.max/src/main/java/org/openhab/binding/max/internal/message/MMessage.java", "diffHunk": "@@ -17,6 +17,7 @@\n import java.util.List;\n \n import org.apache.commons.net.util.Base64;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9ec84d654dbbe73734d6fe7cc82cd398e36c4ce8"}, "originalPosition": 3}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA0OTkzMDcyOnYy", "diffSide": "RIGHT", "path": "bundles/org.openhab.binding.max/src/main/java/org/openhab/binding/max/internal/message/NMessage.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xM1QxMToxNjo0N1rOHQ7oxA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xM1QxMToxNjo0N1rOHQ7oxA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzUxNjM1Ng==", "bodyText": "see above", "url": "https://github.com/openhab/openhab-addons/pull/8458#discussion_r487516356", "createdAt": "2020-09-13T11:16:47Z", "author": {"login": "cweitkamp"}, "path": "bundles/org.openhab.binding.max/src/main/java/org/openhab/binding/max/internal/message/NMessage.java", "diffHunk": "@@ -15,6 +15,8 @@\n import java.nio.charset.StandardCharsets;\n \n import org.apache.commons.net.util.Base64;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9ec84d654dbbe73734d6fe7cc82cd398e36c4ce8"}, "originalPosition": 3}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA0OTkzMDkwOnYy", "diffSide": "RIGHT", "path": "bundles/org.openhab.binding.max/src/test/java/org/openhab/binding/max/internal/command/SCommandTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xM1QxMToxNjo1N1rOHQ7o2g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xM1QxMToxNjo1N1rOHQ7o2g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzUxNjM3OA==", "bodyText": "see above", "url": "https://github.com/openhab/openhab-addons/pull/8458#discussion_r487516378", "createdAt": "2020-09-13T11:16:57Z", "author": {"login": "cweitkamp"}, "path": "bundles/org.openhab.binding.max/src/test/java/org/openhab/binding/max/internal/command/SCommandTest.java", "diffHunk": "@@ -15,6 +15,7 @@\n import static org.junit.Assert.assertEquals;\n \n import org.apache.commons.net.util.Base64;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9ec84d654dbbe73734d6fe7cc82cd398e36c4ce8"}, "originalPosition": 3}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA0OTkzMDk1OnYy", "diffSide": "RIGHT", "path": "bundles/org.openhab.binding.max/src/test/java/org/openhab/binding/max/internal/command/TCommandTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xM1QxMToxNzowNFrOHQ7o3w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xM1QxMToxNzowNFrOHQ7o3w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzUxNjM4Mw==", "bodyText": "see above", "url": "https://github.com/openhab/openhab-addons/pull/8458#discussion_r487516383", "createdAt": "2020-09-13T11:17:04Z", "author": {"login": "cweitkamp"}, "path": "bundles/org.openhab.binding.max/src/test/java/org/openhab/binding/max/internal/command/TCommandTest.java", "diffHunk": "@@ -15,6 +15,7 @@\n import static org.junit.Assert.assertEquals;\n \n import org.apache.commons.net.util.Base64;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9ec84d654dbbe73734d6fe7cc82cd398e36c4ce8"}, "originalPosition": 3}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA1MjE2NDg2OnYy", "diffSide": "RIGHT", "path": "bundles/org.openhab.binding.max/src/main/java/org/openhab/binding/max/internal/message/LMessage.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxMToxNTo0NlrOHRPDYw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQyMTo0NToyN1rOHRnq-Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzgzNDQ2Nw==", "bodyText": "Do we have to trim here too? Similar to line 45?", "url": "https://github.com/openhab/openhab-addons/pull/8458#discussion_r487834467", "createdAt": "2020-09-14T11:15:46Z", "author": {"login": "cweitkamp"}, "path": "bundles/org.openhab.binding.max/src/main/java/org/openhab/binding/max/internal/message/LMessage.java", "diffHunk": "@@ -55,7 +58,7 @@ public LMessage(String raw) {\n     }\n \n     public Collection<? extends Device> updateDevices(List<Device> devices, List<DeviceConfiguration> configurations) {\n-        byte[] decodedRawMessage = Base64.decodeBase64(getPayload().getBytes(StandardCharsets.UTF_8));\n+        byte[] decodedRawMessage = Base64.getDecoder().decode(getPayload().getBytes(StandardCharsets.UTF_8));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d05e7c37b32a670529329c5f922a1e88dbc7bd3c"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODIzNzgxNw==", "bodyText": "it worked in my testing, but for safety I'll add it anyway.", "url": "https://github.com/openhab/openhab-addons/pull/8458#discussion_r488237817", "createdAt": "2020-09-14T21:45:27Z", "author": {"login": "marcelrv"}, "path": "bundles/org.openhab.binding.max/src/main/java/org/openhab/binding/max/internal/message/LMessage.java", "diffHunk": "@@ -55,7 +58,7 @@ public LMessage(String raw) {\n     }\n \n     public Collection<? extends Device> updateDevices(List<Device> devices, List<DeviceConfiguration> configurations) {\n-        byte[] decodedRawMessage = Base64.decodeBase64(getPayload().getBytes(StandardCharsets.UTF_8));\n+        byte[] decodedRawMessage = Base64.getDecoder().decode(getPayload().getBytes(StandardCharsets.UTF_8));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzgzNDQ2Nw=="}, "originalCommit": {"oid": "d05e7c37b32a670529329c5f922a1e88dbc7bd3c"}, "originalPosition": 36}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4485, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}