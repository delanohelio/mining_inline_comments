{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMzMDIyMDky", "number": 9245, "title": "[velux] fix bugs with Somfy devices, and switch devices", "bodyText": "Note: these changes have already been tested with @gs4711\nThe following issues have been resolved..\n1. Some Somfy devices do not return a serial number\nThe binding identifies devices in the bridge by means of a unique id. Normally this is the serial number, but in the case of binding v1 devices or Somfy devices without a serial number, the binding would fall back to use the clear text name. However the fall back unique id code was not consistent across different device configurations / versions.\nThis issue has been fixed.\n2. For switch devices, the read and write command values were not consistent\nWhen commanding the status of a switch, the OpenHAB values ON resp. OFF would be sent as 100% resp. 0% respectively; but when reading the status the values 100% resp. 0% would be mapped inversely to OFF and ON.\nThis issue has been fixed.\n3. Changes to ReadMe file\nThe ReadMe file has been updated to correct minor errors and improve clarity.", "createdAt": "2020-12-05T14:04:20Z", "url": "https://github.com/openhab/openhab-addons/pull/9245", "merged": true, "mergeCommit": {"oid": "ce5d5ca61d922ff306acb13129025389b733a6ae"}, "closed": true, "closedAt": "2020-12-08T17:20:15Z", "author": {"login": "andrewfg"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdi6czggH2gAyNTMzMDIyMDkyOjYxNDkwMGM5ZTg2ZDliNjAzOGVjMWZiNGE5ODYzNTJmMzE0MWM3MDM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdkNdgNAFqTU0NzQ1NTIyMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "614900c9e86d9b6038ec1fb4a986352f3141c703", "author": {"user": {"login": "andrewfg", "name": "Andrew Fiddian-Green"}}, "url": "https://github.com/openhab/openhab-addons/commit/614900c9e86d9b6038ec1fb4a986352f3141c703", "committedDate": "2020-12-04T16:36:37Z", "message": "[velux] add data type to config params in readme\n\nSigned-off-by: Andrew Fiddian-Green <software@whitebear.ch>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5787cc6b6cf00f6358aaf6d3a4aec0b3054464bc", "author": {"user": {"login": "andrewfg", "name": "Andrew Fiddian-Green"}}, "url": "https://github.com/openhab/openhab-addons/commit/5787cc6b6cf00f6358aaf6d3a4aec0b3054464bc", "committedDate": "2020-12-04T16:39:20Z", "message": "[velux] eliminate mvn warning\n\nSigned-off-by: Andrew Fiddian-Green <software@whitebear.ch>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3532f4ee15a64506be131567e067b1ed29923b7c", "author": {"user": {"login": "andrewfg", "name": "Andrew Fiddian-Green"}}, "url": "https://github.com/openhab/openhab-addons/commit/3532f4ee15a64506be131567e067b1ed29923b7c", "committedDate": "2020-12-04T17:34:15Z", "message": "[velux] fix Somfy bugs: uniqueindex = serial number or name\n\nSigned-off-by: Andrew Fiddian-Green <software@whitebear.ch>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "96ccbb82e34ff1e4a79f4b63a60aee0565a11966", "author": {"user": {"login": "andrewfg", "name": "Andrew Fiddian-Green"}}, "url": "https://github.com/openhab/openhab-addons/commit/96ccbb82e34ff1e4a79f4b63a60aee0565a11966", "committedDate": "2020-12-04T18:54:00Z", "message": "[velux] fix inconsistent switch state logic\n\nSigned-off-by: Andrew Fiddian-Green <software@whitebear.ch>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4668b4ed1fa6896c879bb3849c115be0eabe7d38", "author": {"user": {"login": "andrewfg", "name": "Andrew Fiddian-Green"}}, "url": "https://github.com/openhab/openhab-addons/commit/4668b4ed1fa6896c879bb3849c115be0eabe7d38", "committedDate": "2020-12-05T13:42:02Z", "message": "[velux] cosmetics on BRIDGE_THING_TYPE_UID\n\nSigned-off-by: Andrew Fiddian-Green <software@whitebear.ch>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ2NTExMjQ1", "url": "https://github.com/openhab/openhab-addons/pull/9245#pullrequestreview-546511245", "createdAt": "2020-12-07T20:30:24Z", "commit": {"oid": "4668b4ed1fa6896c879bb3849c115be0eabe7d38"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QyMDozMDoyNFrOIA5Yjw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QyMDozMDoyNFrOIA5Yjw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzgxMTA4Nw==", "bodyText": "typeId isn't included here anymore?", "url": "https://github.com/openhab/openhab-addons/pull/9245#discussion_r537811087", "createdAt": "2020-12-07T20:30:24Z", "author": {"login": "cpmeister"}, "path": "bundles/org.openhab.binding.velux/src/main/java/org/openhab/binding/velux/internal/things/VeluxProduct.java", "diffHunk": "@@ -217,7 +217,10 @@ public String toString() {\n     // Class helper methods\n \n     public String getProductUniqueIndex() {\n-        return this.name.toString().concat(\"#\").concat(this.typeId.toString());\n+        if (!v2 || serialNumber.startsWith(VeluxProductSerialNo.UNKNOWN)) {\n+            return name.toString();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4668b4ed1fa6896c879bb3849c115be0eabe7d38"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ3NDU1MjIx", "url": "https://github.com/openhab/openhab-addons/pull/9245#pullrequestreview-547455221", "createdAt": "2020-12-08T17:19:30Z", "commit": {"oid": "4668b4ed1fa6896c879bb3849c115be0eabe7d38"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4019, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}