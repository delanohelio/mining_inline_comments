{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIwNTk4MjI1", "number": 9017, "title": "[miio] add support for lumi.curtain.hagl05 Xiaomi youpin Curtain Controller (Wi-Fi)", "bodyText": "Signed-off-by: Marcel Verpaalen marcel@verpaalen.com", "createdAt": "2020-11-13T14:00:58Z", "url": "https://github.com/openhab/openhab-addons/pull/9017", "merged": true, "mergeCommit": {"oid": "1e5aaf948c73964daabbd9b8f9f9db0ff0c7ffb8"}, "closed": true, "closedAt": "2020-11-16T01:19:01Z", "author": {"login": "marcelrv"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdcHnw6gH2gAyNTIwNTk4MjI1OmNjMTRmMmRjZjFiOWNlYjQwYTc5NGIwNmQ3YjViMGRmZTQ5MDIyZTI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdc4QqgAFqTUzMDg0MzQ2NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "cc14f2dcf1b9ceb40a794b06d7b5b0dfe49022e2", "author": {"user": {"login": "marcelrv", "name": "Marcel"}}, "url": "https://github.com/openhab/openhab-addons/commit/cc14f2dcf1b9ceb40a794b06d7b5b0dfe49022e2", "committedDate": "2020-11-13T13:59:53Z", "message": "[miio] add support for lumi.curtain.hagl05\n\nSigned-off-by: Marcel Verpaalen <marcel@verpaalen.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "df4e87235cdf6430cd0d5c035ee27d9d370925f3", "author": {"user": {"login": "marcelrv", "name": "Marcel"}}, "url": "https://github.com/openhab/openhab-addons/commit/df4e87235cdf6430cd0d5c035ee27d9d370925f3", "committedDate": "2020-11-13T14:07:39Z", "message": "[miio] improve channel description\n\nSigned-off-by: Marcel Verpaalen <marcel@verpaalen.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMwNDY4MDYx", "url": "https://github.com/openhab/openhab-addons/pull/9017#pullrequestreview-530468061", "createdAt": "2020-11-13T22:57:02Z", "commit": {"oid": "df4e87235cdf6430cd0d5c035ee27d9d370925f3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xM1QyMjo1NzowMlrOHzCKzw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xM1QyMjo1NzowMlrOHzCKzw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzI3NDk1OQ==", "bodyText": "How do you know what type of unit is getting returned from the device? Does the device send a string that you parse that has the unit?", "url": "https://github.com/openhab/openhab-addons/pull/9017#discussion_r523274959", "createdAt": "2020-11-13T22:57:02Z", "author": {"login": "cpmeister"}, "path": "bundles/org.openhab.binding.miio/src/main/resources/database/lumi.curtain.hagl05-miot.json", "diffHunk": "@@ -0,0 +1,136 @@\n+{\n+\t\"deviceMapping\": {\n+\t\t\"id\": [\n+\t\t\t\"lumi.curtain.hagl05\"\n+\t\t],\n+\t\t\"propertyMethod\": \"get_properties\",\n+\t\t\"maxProperties\": 1,\n+\t\t\"channels\": [\n+\t\t\t{\n+\t\t\t\t\"property\": \"fault\",\n+\t\t\t\t\"siid\": 2,\n+\t\t\t\t\"piid\": 1,\n+\t\t\t\t\"friendlyName\": \"Curtain Fault\",\n+\t\t\t\t\"channel\": \"Fault\",\n+\t\t\t\t\"channelType\": \"miot_uint8\",\n+\t\t\t\t\"type\": \"Number\",\n+\t\t\t\t\"refresh\": true,\n+\t\t\t\t\"actions\": []\n+\t\t\t},\n+\t\t\t{\n+\t\t\t\t\"property\": \"current-position\",\n+\t\t\t\t\"siid\": 2,\n+\t\t\t\t\"piid\": 3,\n+\t\t\t\t\"friendlyName\": \"Curtain Position\",\n+\t\t\t\t\"channel\": \"CurrentPosition\",\n+\t\t\t\t\"channelType\": \"miot_uint8\",\n+\t\t\t\t\"type\": \"Number\",\n+\t\t\t\t\"refresh\": true,\n+\t\t\t\t\"actions\": []\n+\t\t\t},\n+\t\t\t{\n+\t\t\t\t\"property\": \"status\",\n+\t\t\t\t\"siid\": 2,\n+\t\t\t\t\"piid\": 6,\n+\t\t\t\t\"friendlyName\": \"Curtain Status\",\n+\t\t\t\t\"channel\": \"Status\",\n+\t\t\t\t\"channelType\": \"miot_uint8\",\n+\t\t\t\t\"type\": \"Number\",\n+\t\t\t\t\"refresh\": true,\n+\t\t\t\t\"actions\": []\n+\t\t\t},\n+\t\t\t{\n+\t\t\t\t\"property\": \"target-position\",\n+\t\t\t\t\"siid\": 2,\n+\t\t\t\t\"piid\": 7,\n+\t\t\t\t\"friendlyName\": \"Curtain Target Position\",\n+\t\t\t\t\"channel\": \"TargetPosition\",\n+\t\t\t\t\"channelType\": \"miot_uint8\",\n+\t\t\t\t\"type\": \"Number\",\n+\t\t\t\t\"refresh\": true,\n+\t\t\t\t\"actions\": [\n+\t\t\t\t\t{\n+\t\t\t\t\t\t\"command\": \"set_properties\",\n+\t\t\t\t\t\t\"parameterType\": \"NUMBER\"\n+\t\t\t\t\t}\n+\t\t\t\t]\n+\t\t\t},\n+\t\t\t{\n+\t\t\t\t\"property\": \"manual-enabled\",\n+\t\t\t\t\"siid\": 4,\n+\t\t\t\t\"piid\": 1,\n+\t\t\t\t\"friendlyName\": \"Curtain_cfg - Manual Enabled\",\n+\t\t\t\t\"channel\": \"ManualEnabled\",\n+\t\t\t\t\"channelType\": \"miot_int32\",\n+\t\t\t\t\"type\": \"Number\",\n+\t\t\t\t\"refresh\": true,\n+\t\t\t\t\"actions\": [\n+\t\t\t\t\t{\n+\t\t\t\t\t\t\"command\": \"set_properties\",\n+\t\t\t\t\t\t\"parameterType\": \"NUMBER\"\n+\t\t\t\t\t}\n+\t\t\t\t]\n+\t\t\t},\n+\t\t\t{\n+\t\t\t\t\"property\": \"polarity\",\n+\t\t\t\t\"siid\": 4,\n+\t\t\t\t\"piid\": 2,\n+\t\t\t\t\"friendlyName\": \"Curtain_cfg - Polarity\",\n+\t\t\t\t\"channel\": \"Polarity\",\n+\t\t\t\t\"channelType\": \"miot_int32\",\n+\t\t\t\t\"type\": \"Number\",\n+\t\t\t\t\"refresh\": true,\n+\t\t\t\t\"actions\": [\n+\t\t\t\t\t{\n+\t\t\t\t\t\t\"command\": \"set_properties\",\n+\t\t\t\t\t\t\"parameterType\": \"NUMBER\"\n+\t\t\t\t\t}\n+\t\t\t\t]\n+\t\t\t},\n+\t\t\t{\n+\t\t\t\t\"property\": \"pos-limit\",\n+\t\t\t\t\"siid\": 4,\n+\t\t\t\t\"piid\": 3,\n+\t\t\t\t\"friendlyName\": \"Curtain_cfg - Position Limit\",\n+\t\t\t\t\"channel\": \"PosLimit\",\n+\t\t\t\t\"channelType\": \"miot_int32\",\n+\t\t\t\t\"type\": \"Number\",\n+\t\t\t\t\"refresh\": true,\n+\t\t\t\t\"actions\": [\n+\t\t\t\t\t{\n+\t\t\t\t\t\t\"command\": \"set_properties\",\n+\t\t\t\t\t\t\"parameterType\": \"NUMBER\"\n+\t\t\t\t\t}\n+\t\t\t\t]\n+\t\t\t},\n+\t\t\t{\n+\t\t\t\t\"property\": \"en-night-tip-light\",\n+\t\t\t\t\"siid\": 4,\n+\t\t\t\t\"piid\": 4,\n+\t\t\t\t\"friendlyName\": \"Set night tip light\",\n+\t\t\t\t\"channel\": \"EnNightTipLight\",\n+\t\t\t\t\"channelType\": \"miot_int32\",\n+\t\t\t\t\"type\": \"Switch\",\n+\t\t\t\t\"refresh\": true,\n+\t\t\t\t\"actions\": [\n+\t\t\t\t\t{\n+\t\t\t\t\t\t\"command\": \"set_properties\",\n+\t\t\t\t\t\t\"parameterType\": \"NUMBER\"\n+\t\t\t\t\t}\n+\t\t\t\t]\n+\t\t\t},\n+\t\t\t{\n+\t\t\t\t\"property\": \"run-time\",\n+\t\t\t\t\"siid\": 4,\n+\t\t\t\t\"piid\": 5,\n+\t\t\t\t\"friendlyName\": \"Curtain_cfg - Runtime\",\n+\t\t\t\t\"channel\": \"RunTime\",\n+\t\t\t\t\"channelType\": \"miot_int32\",\n+\t\t\t\t\"type\": \"Number:Time\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "df4e87235cdf6430cd0d5c035ee27d9d370925f3"}, "originalPosition": 129}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1f0fb2c20229ab6b7bc5b3b825012216976e35e1", "author": {"user": {"login": "marcelrv", "name": "Marcel"}}, "url": "https://github.com/openhab/openhab-addons/commit/1f0fb2c20229ab6b7bc5b3b825012216976e35e1", "committedDate": "2020-11-15T14:38:58Z", "message": "[miio] improved mapping for curtain hagl05\n\nSigned-off-by: Marcel Verpaalen <marcel@verpaalen.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMwODMwNjk3", "url": "https://github.com/openhab/openhab-addons/pull/9017#pullrequestreview-530830697", "createdAt": "2020-11-15T20:10:03Z", "commit": {"oid": "1f0fb2c20229ab6b7bc5b3b825012216976e35e1"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNVQyMDoxMDowNFrOHzipUw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNVQyMDoxMDowNFrOHzipUw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzgwNzA1OQ==", "bodyText": "Looks like you need to double check the channel types names you are using. I'm sure that others need to be fixed as well.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\t\t\"channelType\": \"LumiCurtainHagl05status\",\n          \n          \n            \n            \t\t\t\t\"channelType\": \"LumiCurtainHagl05_status\",", "url": "https://github.com/openhab/openhab-addons/pull/9017#discussion_r523807059", "createdAt": "2020-11-15T20:10:04Z", "author": {"login": "cpmeister"}, "path": "bundles/org.openhab.binding.miio/src/main/resources/database/lumi.curtain.hagl05-miot.json", "diffHunk": "@@ -0,0 +1,202 @@\n+{\n+\t\"deviceMapping\": {\n+\t\t\"id\": [\n+\t\t\t\"lumi.curtain.hagl05\"\n+\t\t],\n+\t\t\"propertyMethod\": \"get_properties\",\n+\t\t\"maxProperties\": 1,\n+\t\t\"channels\": [\n+\t\t\t{\n+\t\t\t\t\"property\": \"fault\",\n+\t\t\t\t\"siid\": 2,\n+\t\t\t\t\"piid\": 1,\n+\t\t\t\t\"friendlyName\": \"Curtain - Device Fault\",\n+\t\t\t\t\"channel\": \"fault\",\n+\t\t\t\t\"channelType\": \"LumiCurtainHagl05fault\",\n+\t\t\t\t\"type\": \"Number\",\n+\t\t\t\t\"refresh\": true,\n+\t\t\t\t\"actions\": [],\n+\t\t\t\t\"value-list\": [\n+\t\t\t\t\t{\n+\t\t\t\t\t\t\"value\": 0,\n+\t\t\t\t\t\t\"description\": \"No faults\"\n+\t\t\t\t\t}\n+\t\t\t\t],\n+\t\t\t\t\"readmeComment\": \"Value mapping [0\\u003d\\\"No faults\\\"]\"\n+\t\t\t},\n+\t\t\t{\n+\t\t\t\t\"property\": \"current-position\",\n+\t\t\t\t\"siid\": 2,\n+\t\t\t\t\"piid\": 3,\n+\t\t\t\t\"friendlyName\": \"Curtain - Current Position\",\n+\t\t\t\t\"channel\": \"current-position\",\n+\t\t\t\t\"channelType\": \"miot_uint8\",\n+\t\t\t\t\"type\": \"Number\",\n+\t\t\t\t\"refresh\": true,\n+\t\t\t\t\"actions\": []\n+\t\t\t},\n+\t\t\t{\n+\t\t\t\t\"property\": \"status\",\n+\t\t\t\t\"siid\": 2,\n+\t\t\t\t\"piid\": 6,\n+\t\t\t\t\"friendlyName\": \"Curtain - Status\",\n+\t\t\t\t\"channel\": \"status\",\n+\t\t\t\t\"channelType\": \"LumiCurtainHagl05status\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1f0fb2c20229ab6b7bc5b3b825012216976e35e1"}, "originalPosition": 44}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "90a8aa052d6477ab4c36ea122bd7312a72414e43", "author": {"user": {"login": "marcelrv", "name": "Marcel"}}, "url": "https://github.com/openhab/openhab-addons/commit/90a8aa052d6477ab4c36ea122bd7312a72414e43", "committedDate": "2020-11-15T21:59:25Z", "message": "[miio] fix channelTypes\n\nSigned-off-by: Marcel Verpaalen <marcel@verpaalen.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMwODQzNDY0", "url": "https://github.com/openhab/openhab-addons/pull/9017#pullrequestreview-530843464", "createdAt": "2020-11-15T22:40:00Z", "commit": {"oid": "90a8aa052d6477ab4c36ea122bd7312a72414e43"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4073, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}