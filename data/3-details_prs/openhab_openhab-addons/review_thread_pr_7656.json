{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE4OTgxNzI1", "number": 7656, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNlQxOTo1MTowNlrOD9HHtg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQxNzowMToxN1rOEcqoQw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY1NDA2MzkwOnYy", "diffSide": "RIGHT", "path": "bundles/org.openhab.binding.mqtt.homeassistant/src/main/java/org/openhab/binding/mqtt/homeassistant/internal/ComponentSensor.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNlQxOTo1MTowNlrOGWcSEw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xN1QxNDo0OTozMVrOGWhdLA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjE4NTIzNQ==", "bodyText": "Why do you explicitly create the String[]? The asList method has varags paramters", "url": "https://github.com/openhab/openhab-addons/pull/7656#discussion_r426185235", "createdAt": "2020-05-16T19:51:06Z", "author": {"login": "jochen314"}, "path": "bundles/org.openhab.binding.mqtt.homeassistant/src/main/java/org/openhab/binding/mqtt/homeassistant/internal/ComponentSensor.java", "diffHunk": "@@ -27,6 +30,7 @@\n @NonNullByDefault\n public class ComponentSensor extends AbstractComponent<ComponentSensor.ChannelConfiguration> {\n     public static final String sensorChannelID = \"sensor\"; // Randomly chosen channel \"ID\"\n+    private static final List<String> triggerObjectIDs = Arrays.asList(new String[] { \"click\", \"action\" });", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "41ad015ad0e61eb6ecb9f66f592b753bd4ff8f5d"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjI2OTk5Ng==", "bodyText": "Sorry, I wasn't sure about what type of arguments the asList function would accept, so I looked up an example on the Internet. I will change it, thanks \ud83d\udc4d\nEDIT: I will delete this line, so it doesn't matter.", "url": "https://github.com/openhab/openhab-addons/pull/7656#discussion_r426269996", "createdAt": "2020-05-17T14:49:31Z", "author": {"login": "bodiroga"}, "path": "bundles/org.openhab.binding.mqtt.homeassistant/src/main/java/org/openhab/binding/mqtt/homeassistant/internal/ComponentSensor.java", "diffHunk": "@@ -27,6 +30,7 @@\n @NonNullByDefault\n public class ComponentSensor extends AbstractComponent<ComponentSensor.ChannelConfiguration> {\n     public static final String sensorChannelID = \"sensor\"; // Randomly chosen channel \"ID\"\n+    private static final List<String> triggerObjectIDs = Arrays.asList(new String[] { \"click\", \"action\" });", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjE4NTIzNQ=="}, "originalCommit": {"oid": "41ad015ad0e61eb6ecb9f66f592b753bd4ff8f5d"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY1NDA2Mzk0OnYy", "diffSide": "RIGHT", "path": "bundles/org.openhab.binding.mqtt.homeassistant/src/main/java/org/openhab/binding/mqtt/homeassistant/internal/ComponentSensor.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNlQxOTo1MToxMFrOGWcSGQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNlQyMjowMjo1MFrOG3Pfvw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjE4NTI0MQ==", "bodyText": "This is the part I am not happy with.\nThe check against 2 explicit values is not future save. I see many people wanting to have different values in the list also to make their device work.", "url": "https://github.com/openhab/openhab-addons/pull/7656#discussion_r426185241", "createdAt": "2020-05-16T19:51:10Z", "author": {"login": "jochen314"}, "path": "bundles/org.openhab.binding.mqtt.homeassistant/src/main/java/org/openhab/binding/mqtt/homeassistant/internal/ComponentSensor.java", "diffHunk": "@@ -61,8 +65,12 @@ public ComponentSensor(CFactory.ComponentConfiguration componentConfiguration) {\n             value = new TextValue();\n         }\n \n+        String objectId = componentConfiguration.getHaID().objectID;\n+\n+        boolean trigger = triggerObjectIDs.contains(objectId);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "41ad015ad0e61eb6ecb9f66f592b753bd4ff8f5d"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjI3MDEzMA==", "bodyText": "Oh, sorry, I think that I finally understood your concern regarding the 'action' and 'click' objectIDs topic \ud83e\udd26  I was thinking all the time that those were universal HA objects used to send event information, but know I see that they are Zigbee2Mqtt specific. I'm so sorry for the confusion \ud83d\ude07\nOk, would you accept changing the logic to detect if the icon name starts with \"mdi:gesture\" or \"mdi:toogle? That is one of your proposals in #6878 and seems to fit fine with Zigbee2Mqtt, so I would be happy to implement it \ud83d\udc4d", "url": "https://github.com/openhab/openhab-addons/pull/7656#discussion_r426270130", "createdAt": "2020-05-17T14:50:34Z", "author": {"login": "bodiroga"}, "path": "bundles/org.openhab.binding.mqtt.homeassistant/src/main/java/org/openhab/binding/mqtt/homeassistant/internal/ComponentSensor.java", "diffHunk": "@@ -61,8 +65,12 @@ public ComponentSensor(CFactory.ComponentConfiguration componentConfiguration) {\n             value = new TextValue();\n         }\n \n+        String objectId = componentConfiguration.getHaID().objectID;\n+\n+        boolean trigger = triggerObjectIDs.contains(objectId);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjE4NTI0MQ=="}, "originalCommit": {"oid": "41ad015ad0e61eb6ecb9f66f592b753bd4ff8f5d"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDU3ODc1MQ==", "bodyText": "@jochen314 Can you comment on this?", "url": "https://github.com/openhab/openhab-addons/pull/7656#discussion_r460578751", "createdAt": "2020-07-26T22:02:50Z", "author": {"login": "fwolter"}, "path": "bundles/org.openhab.binding.mqtt.homeassistant/src/main/java/org/openhab/binding/mqtt/homeassistant/internal/ComponentSensor.java", "diffHunk": "@@ -61,8 +65,12 @@ public ComponentSensor(CFactory.ComponentConfiguration componentConfiguration) {\n             value = new TextValue();\n         }\n \n+        String objectId = componentConfiguration.getHaID().objectID;\n+\n+        boolean trigger = triggerObjectIDs.contains(objectId);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjE4NTI0MQ=="}, "originalCommit": {"oid": "41ad015ad0e61eb6ecb9f66f592b753bd4ff8f5d"}, "originalPosition": 24}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk4NDk0MDE5OnYy", "diffSide": "RIGHT", "path": "bundles/org.openhab.binding.mqtt.homeassistant/src/main/java/org/openhab/binding/mqtt/homeassistant/internal/ComponentSensor.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQxNzowMToxN1rOHHVXgQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QxOTowMjoxOFrOHIdafA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzQ1MjE2MQ==", "bodyText": "How about:\nPattern triggerIcons = Pattern.compile(\"^mdi:(toggle|gesture).*$\");\n\nand then\nboolean trigger = triggerIcons.matcher(icon).matches();", "url": "https://github.com/openhab/openhab-addons/pull/7656#discussion_r477452161", "createdAt": "2020-08-26T17:01:17Z", "author": {"login": "jochen314"}, "path": "bundles/org.openhab.binding.mqtt.homeassistant/src/main/java/org/openhab/binding/mqtt/homeassistant/internal/ComponentSensor.java", "diffHunk": "@@ -27,6 +30,7 @@\n @NonNullByDefault\n public class ComponentSensor extends AbstractComponent<ComponentSensor.ChannelConfiguration> {\n     public static final String sensorChannelID = \"sensor\"; // Randomly chosen channel \"ID\"\n+    private static final List<String> triggerIcons = Arrays.asList(\"mdi:toggle\", \"mdi:gesture\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0fb15d53ee1ac27b659c816c0c9cceea0323a35e"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODYzMjU3Mg==", "bodyText": "Thanks @jochen314 for your feedback! Changes done! \ud83d\ude09", "url": "https://github.com/openhab/openhab-addons/pull/7656#discussion_r478632572", "createdAt": "2020-08-27T19:02:18Z", "author": {"login": "bodiroga"}, "path": "bundles/org.openhab.binding.mqtt.homeassistant/src/main/java/org/openhab/binding/mqtt/homeassistant/internal/ComponentSensor.java", "diffHunk": "@@ -27,6 +30,7 @@\n @NonNullByDefault\n public class ComponentSensor extends AbstractComponent<ComponentSensor.ChannelConfiguration> {\n     public static final String sensorChannelID = \"sensor\"; // Randomly chosen channel \"ID\"\n+    private static final List<String> triggerIcons = Arrays.asList(\"mdi:toggle\", \"mdi:gesture\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzQ1MjE2MQ=="}, "originalCommit": {"oid": "0fb15d53ee1ac27b659c816c0c9cceea0323a35e"}, "originalPosition": 14}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 28, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}