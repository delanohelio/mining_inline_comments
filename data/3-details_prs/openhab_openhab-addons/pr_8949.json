{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE0NTgzMjMz", "number": 8949, "title": "[infrastructure] move infered nullness warnings to error and update EEA", "bodyText": "Follow-Up to #8848\nAlso updates EEA to 2.2.0 and fixes resulting errors.\nSigned-off-by: Jan N. Klug jan.n.klug@rub.de", "createdAt": "2020-11-03T08:56:34Z", "url": "https://github.com/openhab/openhab-addons/pull/8949", "merged": true, "mergeCommit": {"oid": "ba4c96d99dc4c801f0ec19023f242ccf6ab816d1"}, "closed": true, "closedAt": "2020-11-12T20:07:12Z", "author": {"login": "J-N-K"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdY_0QhgFqTUyMjg3NzczMw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdb4RetAFqTUyOTQ1MjkwMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIyODc3NzMz", "url": "https://github.com/openhab/openhab-addons/pull/8949#pullrequestreview-522877733", "createdAt": "2020-11-03T21:12:31Z", "commit": {"oid": "920197757099f440f1f3569e5cf28821f4502203"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QyMToxMjozMVrOHtAohQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QyMToxMjozMVrOHtAohQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjk1ODM0MQ==", "bodyText": "@wborn, do you think that having +inheritNullAnnot in -err AND -warn is correct? I would assume that it should be added only in one place.", "url": "https://github.com/openhab/openhab-addons/pull/8949#discussion_r516958341", "createdAt": "2020-11-03T21:12:31Z", "author": {"login": "J-N-K"}, "path": "pom.xml", "diffHunk": "@@ -289,8 +289,8 @@ Import-Package: \\\\\n               <classpath>${project.build.directory}/dependency</classpath>\n             </compilerArguments>\n             <compilerArgs>\n-              <arg>-err:+nullAnnot(org.eclipse.jdt.annotation.Nullable|org.eclipse.jdt.annotation.NonNull|org.eclipse.jdt.annotation.NonNullByDefault),+inheritNullAnnot,-nullUncheckedConversion</arg>\n-              <arg>-warn:+null,+inheritNullAnnot,+nullAnnotConflict,-nullUncheckedConversion,+nullAnnotRedundant,+nullDereference</arg>\n+              <arg>-err:+nullAnnot(org.eclipse.jdt.annotation.Nullable|org.eclipse.jdt.annotation.NonNull|org.eclipse.jdt.annotation.NonNullByDefault),+inheritNullAnnot,+nullAnnotConflict,-nullUncheckedConversion</arg>\n+              <arg>-warn:+null,+inheritNullAnnot,-nullUncheckedConversion,+nullAnnotRedundant,+nullDereference</arg>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "920197757099f440f1f3569e5cf28821f4502203"}, "originalPosition": 7}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIzNzExNTc1", "url": "https://github.com/openhab/openhab-addons/pull/8949#pullrequestreview-523711575", "createdAt": "2020-11-04T20:29:42Z", "commit": {"oid": "a02fe901828e0deb824feca2b1cb12490ee26d46"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNFQyMDoyOTo0MlrOHtoliw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNFQyMDo0MDoyMVrOHto6jg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzYxMjkzOQ==", "bodyText": "What was wrong with this code that required this change?", "url": "https://github.com/openhab/openhab-addons/pull/8949#discussion_r517612939", "createdAt": "2020-11-04T20:29:42Z", "author": {"login": "cpmeister"}, "path": "bundles/org.openhab.binding.dsmr/src/main/java/org/openhab/binding/dsmr/internal/discovery/DSMRMeterDiscoveryService.java", "diffHunk": "@@ -148,8 +144,9 @@ private void validateConfiguredMeters(List<Thing> things, Set<DSMRMeterType> con\n                 .filter(DSMRMeterHandler.class::isInstance)\n                 .map(DSMRMeterHandler.class::cast)\n                 .map(h -> h == null ? null : h.getMeterDescriptor())\n-                .map(d -> d == null ? null : d.getMeterType())\n-                .filter(Objects::nonNull)\n+                .map(d -> Optional.ofNullable(d == null ? null : d.getMeterType()))\n+                .filter(Optional::isPresent)\n+                .map(Optional::get)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a02fe901828e0deb824feca2b1cb12490ee26d46"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzYxNTA5Nw==", "bodyText": "I'd prefer to have the null checker disabled on testing classes than be required to add unnecessary checks like this in the test code.\n@wborn Can we just disable the null checker for test classes?", "url": "https://github.com/openhab/openhab-addons/pull/8949#discussion_r517615097", "createdAt": "2020-11-04T20:33:46Z", "author": {"login": "cpmeister"}, "path": "bundles/org.openhab.binding.foobot/src/test/java/org/openhab/binding/foobot/internal/handler/FoobotDeviceHandlerTest.java", "diffHunk": "@@ -53,6 +54,7 @@ public void testSensorDataToState() throws IOException, FoobotApiException {\n         final FoobotJsonData sensorData = connector.getSensorData(\"1234\");\n \n         assertNotNull(sensorData, \"No sensor data read\");\n+        Objects.requireNonNull(sensorData);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a02fe901828e0deb824feca2b1cb12490ee26d46"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzYxODMxOA==", "bodyText": "I'd try to avoid inline variable assignment if possible.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    String dimmerMax;\n          \n          \n            \n                    if (conf.getFeature().contains(\"dimmer\") && (dimmerMax = params.get(\"dimmermax\")) != null) {\n          \n          \n            \n                    String dimmerMax = params.get(\"dimmermax\");\n          \n          \n            \n                    if (conf.getFeature().contains(\"dimmer\") && dimmerMax != null) {", "url": "https://github.com/openhab/openhab-addons/pull/8949#discussion_r517618318", "createdAt": "2020-11-04T20:40:21Z", "author": {"login": "cpmeister"}, "path": "bundles/org.openhab.binding.insteon/src/main/java/org/openhab/binding/insteon/internal/device/CommandHandler.java", "diffHunk": "@@ -114,9 +114,9 @@ protected String nm() {\n \n     protected int getMaxLightLevel(InsteonChannelConfiguration conf, int defaultLevel) {\n         Map<String, @Nullable String> params = conf.getParameters();\n-        if (conf.getFeature().contains(\"dimmer\") && params.containsKey(\"dimmermax\")) {\n+        String dimmerMax;\n+        if (conf.getFeature().contains(\"dimmer\") && (dimmerMax = params.get(\"dimmermax\")) != null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a02fe901828e0deb824feca2b1cb12490ee26d46"}, "originalPosition": 6}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a02fe901828e0deb824feca2b1cb12490ee26d46", "author": {"user": {"login": "J-N-K", "name": null}}, "url": "https://github.com/openhab/openhab-addons/commit/a02fe901828e0deb824feca2b1cb12490ee26d46", "committedDate": "2020-11-04T11:30:06Z", "message": "part 3\n\nSigned-off-by: Jan N. Klug <jan.n.klug@rub.de>"}, "afterCommit": {"oid": "1fcf0fc1ad242e9776f41ed94cad994b4595ac17", "author": {"user": {"login": "J-N-K", "name": null}}, "url": "https://github.com/openhab/openhab-addons/commit/1fcf0fc1ad242e9776f41ed94cad994b4595ac17", "committedDate": "2020-11-04T21:19:29Z", "message": "fixes\n\nSigned-off-by: Jan N. Klug <jan.n.klug@rub.de>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1fcf0fc1ad242e9776f41ed94cad994b4595ac17", "author": {"user": {"login": "J-N-K", "name": null}}, "url": "https://github.com/openhab/openhab-addons/commit/1fcf0fc1ad242e9776f41ed94cad994b4595ac17", "committedDate": "2020-11-04T21:19:29Z", "message": "fixes\n\nSigned-off-by: Jan N. Klug <jan.n.klug@rub.de>"}, "afterCommit": {"oid": "2a91a73293998756727badc31d6b85ee9eeab40d", "author": {"user": {"login": "J-N-K", "name": null}}, "url": "https://github.com/openhab/openhab-addons/commit/2a91a73293998756727badc31d6b85ee9eeab40d", "committedDate": "2020-11-05T08:10:59Z", "message": "inferNullAnnot as error instead of warning\n\nSigned-off-by: Jan N. Klug <jan.n.klug@rub.de>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2a91a73293998756727badc31d6b85ee9eeab40d", "author": {"user": {"login": "J-N-K", "name": null}}, "url": "https://github.com/openhab/openhab-addons/commit/2a91a73293998756727badc31d6b85ee9eeab40d", "committedDate": "2020-11-05T08:10:59Z", "message": "inferNullAnnot as error instead of warning\n\nSigned-off-by: Jan N. Klug <jan.n.klug@rub.de>"}, "afterCommit": {"oid": "fe99c4f7d12b1896795aedea6535b89e2a5fd5af", "author": {"user": {"login": "J-N-K", "name": null}}, "url": "https://github.com/openhab/openhab-addons/commit/fe99c4f7d12b1896795aedea6535b89e2a5fd5af", "committedDate": "2020-11-07T20:11:48Z", "message": "part 1\n\nSigned-off-by: Jan N. Klug <jan.n.klug@rub.de>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "da44bb36927a46f06716ea9d7bb53b2459ba1fd5", "author": {"user": {"login": "J-N-K", "name": null}}, "url": "https://github.com/openhab/openhab-addons/commit/da44bb36927a46f06716ea9d7bb53b2459ba1fd5", "committedDate": "2020-11-08T12:49:28Z", "message": "final\n\nSigned-off-by: Jan N. Klug <jan.n.klug@rub.de>"}, "afterCommit": {"oid": "b4cd27d8b5dfc02784701c7c0ecb973e0333a5c9", "author": {"user": {"login": "J-N-K", "name": null}}, "url": "https://github.com/openhab/openhab-addons/commit/b4cd27d8b5dfc02784701c7c0ecb973e0333a5c9", "committedDate": "2020-11-09T18:27:25Z", "message": "final fixes"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b4cd27d8b5dfc02784701c7c0ecb973e0333a5c9", "author": {"user": {"login": "J-N-K", "name": null}}, "url": "https://github.com/openhab/openhab-addons/commit/b4cd27d8b5dfc02784701c7c0ecb973e0333a5c9", "committedDate": "2020-11-09T18:27:25Z", "message": "final fixes"}, "afterCommit": {"oid": "417b10f58075a3180b2e43cc52a978343cd3e432", "author": {"user": {"login": "J-N-K", "name": null}}, "url": "https://github.com/openhab/openhab-addons/commit/417b10f58075a3180b2e43cc52a978343cd3e432", "committedDate": "2020-11-09T18:47:37Z", "message": "inferNullAnnot as error instead of warning\n\nSigned-off-by: Jan N. Klug <jan.n.klug@rub.de>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f401015c197c96a1ce4c5dfb4e68cdd66fbb1daa", "author": {"user": {"login": "J-N-K", "name": null}}, "url": "https://github.com/openhab/openhab-addons/commit/f401015c197c96a1ce4c5dfb4e68cdd66fbb1daa", "committedDate": "2020-11-12T11:24:22Z", "message": "inferNullAnnot as error instead of warning\n\nSigned-off-by: Jan N. Klug <jan.n.klug@rub.de>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8d19e530c5a0594becc5be2e89e0c7dd68443164", "author": {"user": {"login": "J-N-K", "name": null}}, "url": "https://github.com/openhab/openhab-addons/commit/8d19e530c5a0594becc5be2e89e0c7dd68443164", "committedDate": "2020-11-12T11:24:23Z", "message": "fix after rebase\n\nSigned-off-by: Jan N. Klug <jan.n.klug@rub.de>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "62d45baceb8c5f5ad63c75afed9079f3eaddc318", "author": {"user": {"login": "J-N-K", "name": null}}, "url": "https://github.com/openhab/openhab-addons/commit/62d45baceb8c5f5ad63c75afed9079f3eaddc318", "committedDate": "2020-11-09T19:22:31Z", "message": "fix after rebase\n\nSigned-off-by: Jan N. Klug <jan.n.klug@rub.de>"}, "afterCommit": {"oid": "8d19e530c5a0594becc5be2e89e0c7dd68443164", "author": {"user": {"login": "J-N-K", "name": null}}, "url": "https://github.com/openhab/openhab-addons/commit/8d19e530c5a0594becc5be2e89e0c7dd68443164", "committedDate": "2020-11-12T11:24:23Z", "message": "fix after rebase\n\nSigned-off-by: Jan N. Klug <jan.n.klug@rub.de>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e60fe4c36cc6a34e683bb215c382d2cc448d12a0", "author": {"user": {"login": "J-N-K", "name": null}}, "url": "https://github.com/openhab/openhab-addons/commit/e60fe4c36cc6a34e683bb215c382d2cc448d12a0", "committedDate": "2020-11-12T14:32:26Z", "message": "fix\n\nSigned-off-by: Jan N. Klug <jan.n.klug@rub.de>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI5NDUyOTAx", "url": "https://github.com/openhab/openhab-addons/pull/8949#pullrequestreview-529452901", "createdAt": "2020-11-12T20:06:58Z", "commit": {"oid": "e60fe4c36cc6a34e683bb215c382d2cc448d12a0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4250, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}