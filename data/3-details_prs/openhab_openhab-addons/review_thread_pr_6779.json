{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzU5NjAxNjA2", "number": 6779, "reviewThreads": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOVQxMToxNDoxNlrODW0TJQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMFQyMDo0MDowOFrODXRBsw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI1MjUyMTMzOnYy", "diffSide": "RIGHT", "path": "bundles/org.openhab.binding.miio/src/main/resources/ESH-INF/thing/vacuumThing.xml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOVQxMToxNDoxNlrOFbyiSw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOVQxMTozMTowOFrOFby8gA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDY4Mzg1MQ==", "bodyText": "I think the label should also be Error Code to avoid duplicated label with different values", "url": "https://github.com/openhab/openhab-addons/pull/6779#discussion_r364683851", "createdAt": "2020-01-09T11:14:16Z", "author": {"login": "marcelrv"}, "path": "bundles/org.openhab.binding.miio/src/main/resources/ESH-INF/thing/vacuumThing.xml", "diffHunk": "@@ -106,11 +108,16 @@\n \t\t<item-type>Switch</item-type>\n \t\t<label>Do Not Disturb</label>\n \t</channel-type>\n-\t<channel-type id=\"error_code\">\n+\t<channel-type id=\"error\">\n \t\t<item-type>String</item-type>\n \t\t<label>Error</label>\n \t\t<state readOnly=\"true\" />\n \t</channel-type>\n+\t<channel-type id=\"error_code\">\n+\t\t<item-type>Number</item-type>\n+\t\t<label>Error</label>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3d3220526848af89cd79c1fa02adf5616ce2690e"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDY5MDU2MA==", "bodyText": "You're right, that absolutely makes sense.", "url": "https://github.com/openhab/openhab-addons/pull/6779#discussion_r364690560", "createdAt": "2020-01-09T11:31:08Z", "author": {"login": "Markkuuss"}, "path": "bundles/org.openhab.binding.miio/src/main/resources/ESH-INF/thing/vacuumThing.xml", "diffHunk": "@@ -106,11 +108,16 @@\n \t\t<item-type>Switch</item-type>\n \t\t<label>Do Not Disturb</label>\n \t</channel-type>\n-\t<channel-type id=\"error_code\">\n+\t<channel-type id=\"error\">\n \t\t<item-type>String</item-type>\n \t\t<label>Error</label>\n \t\t<state readOnly=\"true\" />\n \t</channel-type>\n+\t<channel-type id=\"error_code\">\n+\t\t<item-type>Number</item-type>\n+\t\t<label>Error</label>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDY4Mzg1MQ=="}, "originalCommit": {"oid": "3d3220526848af89cd79c1fa02adf5616ce2690e"}, "originalPosition": 27}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI1MjUyMjQ0OnYy", "diffSide": "RIGHT", "path": "bundles/org.openhab.binding.miio/src/main/resources/ESH-INF/thing/vacuumThing.xml", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOVQxMToxNDo0NVrOFbyi7w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOVQxMToxNDo0NVrOFbyi7w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDY4NDAxNQ==", "bodyText": "Same here, please prevent the same label for 2 different channels", "url": "https://github.com/openhab/openhab-addons/pull/6779#discussion_r364684015", "createdAt": "2020-01-09T11:14:45Z", "author": {"login": "marcelrv"}, "path": "bundles/org.openhab.binding.miio/src/main/resources/ESH-INF/thing/vacuumThing.xml", "diffHunk": "@@ -137,6 +144,11 @@\n \t\t<label>State</label>\n \t\t<state readOnly=\"true\" />\n \t</channel-type>\n+\t<channel-type id=\"state_code\">\n+\t\t<item-type>Number</item-type>\n+\t\t<label>State</label>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3d3220526848af89cd79c1fa02adf5616ce2690e"}, "originalPosition": 39}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI1MjYwODU0OnYy", "diffSide": "RIGHT", "path": "bundles/org.openhab.binding.miio/src/main/java/org/openhab/binding/miio/internal/handler/MiIoVacuumHandler.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOVQxMTo0NTozNlrOFbzT0g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOVQxMTo0NTozNlrOFbzT0g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDY5NjUzMA==", "bodyText": "Sorry for catching this not in the earlier review, but the codechecker also complaints that this is not camelcase\nShould be changed to errorCode", "url": "https://github.com/openhab/openhab-addons/pull/6779#discussion_r364696530", "createdAt": "2020-01-09T11:45:36Z", "author": {"login": "marcelrv"}, "path": "bundles/org.openhab.binding.miio/src/main/java/org/openhab/binding/miio/internal/handler/MiIoVacuumHandler.java", "diffHunk": "@@ -131,8 +131,9 @@ private boolean updateVacuumStatus(JsonObject statusData) {\n         updateState(CHANNEL_CLEAN_TIME,\n                 new DecimalType(TimeUnit.SECONDS.toMinutes(statusData.get(\"clean_time\").getAsLong())));\n         updateState(CHANNEL_DND_ENABLED, new DecimalType(statusData.get(\"dnd_enabled\").getAsBigDecimal()));\n-        updateState(CHANNEL_ERROR_CODE,\n-                new StringType(VacuumErrorType.getType(statusData.get(\"error_code\").getAsInt()).getDescription()));\n+        VacuumErrorType error_code = VacuumErrorType.getType(statusData.get(\"error_code\").getAsInt());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1bc03762cc6f50fe9c6a6ad523d0a5e52958f911"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI1NzIxODc4OnYy", "diffSide": "RIGHT", "path": "bundles/org.openhab.binding.miio/src/main/java/org/openhab/binding/miio/internal/handler/MiIoVacuumHandler.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMFQyMDozNTo0MVrOFcfdlQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMVQxMjo1MjowMlrOFcljfw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTQxOTkyNQ==", "bodyText": "What is the benefit of writing this in two lines instead of one?", "url": "https://github.com/openhab/openhab-addons/pull/6779#discussion_r365419925", "createdAt": "2020-01-10T20:35:41Z", "author": {"login": "J-N-K"}, "path": "bundles/org.openhab.binding.miio/src/main/java/org/openhab/binding/miio/internal/handler/MiIoVacuumHandler.java", "diffHunk": "@@ -131,16 +131,18 @@ private boolean updateVacuumStatus(JsonObject statusData) {\n         updateState(CHANNEL_CLEAN_TIME,\n                 new DecimalType(TimeUnit.SECONDS.toMinutes(statusData.get(\"clean_time\").getAsLong())));\n         updateState(CHANNEL_DND_ENABLED, new DecimalType(statusData.get(\"dnd_enabled\").getAsBigDecimal()));\n-        updateState(CHANNEL_ERROR_CODE,\n-                new StringType(VacuumErrorType.getType(statusData.get(\"error_code\").getAsInt()).getDescription()));\n+        VacuumErrorType errorCode = VacuumErrorType.getType(statusData.get(\"error_code\").getAsInt());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "642dec1368322e0ab8d8ee2f0b86fd995bc61b25"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTUxOTc0Mw==", "bodyText": "This has no real advantage. I had only taken it from the original code to make it consistent.", "url": "https://github.com/openhab/openhab-addons/pull/6779#discussion_r365519743", "createdAt": "2020-01-11T12:52:02Z", "author": {"login": "Markkuuss"}, "path": "bundles/org.openhab.binding.miio/src/main/java/org/openhab/binding/miio/internal/handler/MiIoVacuumHandler.java", "diffHunk": "@@ -131,16 +131,18 @@ private boolean updateVacuumStatus(JsonObject statusData) {\n         updateState(CHANNEL_CLEAN_TIME,\n                 new DecimalType(TimeUnit.SECONDS.toMinutes(statusData.get(\"clean_time\").getAsLong())));\n         updateState(CHANNEL_DND_ENABLED, new DecimalType(statusData.get(\"dnd_enabled\").getAsBigDecimal()));\n-        updateState(CHANNEL_ERROR_CODE,\n-                new StringType(VacuumErrorType.getType(statusData.get(\"error_code\").getAsInt()).getDescription()));\n+        VacuumErrorType errorCode = VacuumErrorType.getType(statusData.get(\"error_code\").getAsInt());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTQxOTkyNQ=="}, "originalCommit": {"oid": "642dec1368322e0ab8d8ee2f0b86fd995bc61b25"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI1NzIxOTg5OnYy", "diffSide": "RIGHT", "path": "bundles/org.openhab.binding.miio/src/main/java/org/openhab/binding/miio/internal/handler/MiIoVacuumHandler.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMFQyMDozNjoxMlrOFcfeXQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMVQxMjo1MToxNFrOFcljVA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTQyMDEyNQ==", "bodyText": "Same here: why is thsi a local variable (and other states are not)?", "url": "https://github.com/openhab/openhab-addons/pull/6779#discussion_r365420125", "createdAt": "2020-01-10T20:36:12Z", "author": {"login": "J-N-K"}, "path": "bundles/org.openhab.binding.miio/src/main/java/org/openhab/binding/miio/internal/handler/MiIoVacuumHandler.java", "diffHunk": "@@ -131,16 +131,18 @@ private boolean updateVacuumStatus(JsonObject statusData) {\n         updateState(CHANNEL_CLEAN_TIME,\n                 new DecimalType(TimeUnit.SECONDS.toMinutes(statusData.get(\"clean_time\").getAsLong())));\n         updateState(CHANNEL_DND_ENABLED, new DecimalType(statusData.get(\"dnd_enabled\").getAsBigDecimal()));\n-        updateState(CHANNEL_ERROR_CODE,\n-                new StringType(VacuumErrorType.getType(statusData.get(\"error_code\").getAsInt()).getDescription()));\n+        VacuumErrorType errorCode = VacuumErrorType.getType(statusData.get(\"error_code\").getAsInt());\n+        updateState(CHANNEL_ERROR, new StringType(errorCode.getDescription()));\n+        updateState(CHANNEL_ERROR_CODE, new DecimalType(statusData.get(\"error_code\").getAsInt()));\n         int fanLevel = statusData.get(\"fan_power\").getAsInt();\n-        FanModeType fanpower = FanModeType.getType(fanLevel);\n+        FanModeType fanPower = FanModeType.getType(fanLevel);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "642dec1368322e0ab8d8ee2f0b86fd995bc61b25"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTUxOTcwMA==", "bodyText": "You are right, this makes no sense, I just made a small camel case changes. I just took it from the original code.", "url": "https://github.com/openhab/openhab-addons/pull/6779#discussion_r365519700", "createdAt": "2020-01-11T12:51:14Z", "author": {"login": "Markkuuss"}, "path": "bundles/org.openhab.binding.miio/src/main/java/org/openhab/binding/miio/internal/handler/MiIoVacuumHandler.java", "diffHunk": "@@ -131,16 +131,18 @@ private boolean updateVacuumStatus(JsonObject statusData) {\n         updateState(CHANNEL_CLEAN_TIME,\n                 new DecimalType(TimeUnit.SECONDS.toMinutes(statusData.get(\"clean_time\").getAsLong())));\n         updateState(CHANNEL_DND_ENABLED, new DecimalType(statusData.get(\"dnd_enabled\").getAsBigDecimal()));\n-        updateState(CHANNEL_ERROR_CODE,\n-                new StringType(VacuumErrorType.getType(statusData.get(\"error_code\").getAsInt()).getDescription()));\n+        VacuumErrorType errorCode = VacuumErrorType.getType(statusData.get(\"error_code\").getAsInt());\n+        updateState(CHANNEL_ERROR, new StringType(errorCode.getDescription()));\n+        updateState(CHANNEL_ERROR_CODE, new DecimalType(statusData.get(\"error_code\").getAsInt()));\n         int fanLevel = statusData.get(\"fan_power\").getAsInt();\n-        FanModeType fanpower = FanModeType.getType(fanLevel);\n+        FanModeType fanPower = FanModeType.getType(fanLevel);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTQyMDEyNQ=="}, "originalCommit": {"oid": "642dec1368322e0ab8d8ee2f0b86fd995bc61b25"}, "originalPosition": 11}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI1NzIyODAzOnYy", "diffSide": "RIGHT", "path": "bundles/org.openhab.binding.miio/src/main/resources/ESH-INF/thing/vacuumThing.xml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMFQyMDo0MDowOFrOFcfjjA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMVQxMjo0OTo0NFrOFcljHw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTQyMTQ1Mg==", "bodyText": "When has the vacuumThing been introduced? If it is already present in 2.5.0 this is a breaking change.  In any case, documentations needs to be updated.", "url": "https://github.com/openhab/openhab-addons/pull/6779#discussion_r365421452", "createdAt": "2020-01-10T20:40:08Z", "author": {"login": "J-N-K"}, "path": "bundles/org.openhab.binding.miio/src/main/resources/ESH-INF/thing/vacuumThing.xml", "diffHunk": "@@ -106,11 +108,16 @@\n \t\t<item-type>Switch</item-type>\n \t\t<label>Do Not Disturb</label>\n \t</channel-type>\n-\t<channel-type id=\"error_code\">\n+\t<channel-type id=\"error\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "642dec1368322e0ab8d8ee2f0b86fd995bc61b25"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTUxOTY0Nw==", "bodyText": "That's right, it should be avoided. I'm going to rename it back as originally and give the new channel a different name, even though the name error_code for the String Channel was chosen a little unfortunately in the past.", "url": "https://github.com/openhab/openhab-addons/pull/6779#discussion_r365519647", "createdAt": "2020-01-11T12:49:44Z", "author": {"login": "Markkuuss"}, "path": "bundles/org.openhab.binding.miio/src/main/resources/ESH-INF/thing/vacuumThing.xml", "diffHunk": "@@ -106,11 +108,16 @@\n \t\t<item-type>Switch</item-type>\n \t\t<label>Do Not Disturb</label>\n \t</channel-type>\n-\t<channel-type id=\"error_code\">\n+\t<channel-type id=\"error\">", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTQyMTQ1Mg=="}, "originalCommit": {"oid": "642dec1368322e0ab8d8ee2f0b86fd995bc61b25"}, "originalPosition": 20}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1027, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}