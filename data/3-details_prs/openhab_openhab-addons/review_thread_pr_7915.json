{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM0MDE4OTA2", "number": 7915, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xM1QxOTozMToyN1rOEFRYgg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xM1QxOTozNTowOFrOEFRZKA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjczOTYzMTM4OnYy", "diffSide": "RIGHT", "path": "bundles/org.openhab.binding.somfytahoma/src/main/java/org/openhab/binding/somfytahoma/internal/handler/SomfyTahomaSilentRollerShutterHandler.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xM1QxOTozMToyN1rOGjZBbg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xM1QyMDo1NTo0N1rOGjZWCw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc2MzMxMA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            default:\n          \n          \n            \n                                if (CONTROL_SILENT.equals(channelUID.getId()) && (COMMAND_UP.equals(cmd) || COMMAND_DOWN.equals(cmd))) {\n          \n          \n            \n                                    // move the roller shutter to the specific position at low speed\n          \n          \n            \n                                    String param = \"[\" + (COMMAND_UP.equals(cmd) ? 0 : 100) + \", \\\"lowspeed\\\"]\";\n          \n          \n            \n                                    sendCommand(COMMAND_SET_CLOSURESPEED, param);\n          \n          \n            \n                                } else {\n          \n          \n            \n                                    sendCommand(cmd);\n          \n          \n            \n                                }\n          \n          \n            \n                            case COMMAND_UP:\n          \n          \n            \n                            case COMMAND_DOWN:\n          \n          \n            \n                                if (CONTROL_SILENT.equals(channelUID.getId())) {\n          \n          \n            \n                                    // move the roller shutter to the specific position at low speed\n          \n          \n            \n                                    String param = \"[\" + (COMMAND_UP.equals(cmd) ? 0 : 100) + \", \\\"lowspeed\\\"]\";\n          \n          \n            \n                                    sendCommand(COMMAND_SET_CLOSURESPEED, param);\n          \n          \n            \n                                    break;\n          \n          \n            \n                                }\n          \n          \n            \n                                //fall through\n          \n          \n            \n                            default:\n          \n          \n            \n                                sendCommand(cmd);", "url": "https://github.com/openhab/openhab-addons/pull/7915#discussion_r439763310", "createdAt": "2020-06-13T19:31:27Z", "author": {"login": "cpmeister"}, "path": "bundles/org.openhab.binding.somfytahoma/src/main/java/org/openhab/binding/somfytahoma/internal/handler/SomfyTahomaSilentRollerShutterHandler.java", "diffHunk": "@@ -45,25 +45,37 @@ public void handleCommand(ChannelUID channelUID, Command command) {\n             return;\n         } else {\n             String cmd = getTahomaCommand(command.toString());\n-            if (COMMAND_MY.equals(cmd)) {\n-                sendCommand(COMMAND_MY);\n-            } else if (COMMAND_STOP.equals(cmd)) {\n-                String executionId = getCurrentExecutions();\n-                if (executionId != null) {\n-                    // Check if the roller shutter is moving and STOP is sent => STOP it\n-                    cancelExecution(executionId);\n-                } else {\n+            switch (cmd) {\n+                case COMMAND_MY:\n                     sendCommand(COMMAND_MY);\n-                }\n-            } else {\n-                if (CONTROL_SILENT.equals(channelUID.getId()) && COMMAND_SET_CLOSURE.equals(cmd)) {\n-                    // move the roller shutter to the specific position at low speed\n-                    String param = \"[\" + command.toString() + \", \\\"lowspeed\\\"]\";\n-                    sendCommand(COMMAND_SET_CLOSURESPEED, param);\n-                } else {\n-                    String param = COMMAND_SET_CLOSURE.equals(cmd) ? \"[\" + toInteger(command) + \"]\" : \"[]\";\n-                    sendCommand(cmd, param);\n-                }\n+                    break;\n+                case COMMAND_STOP:\n+                    String executionId = getCurrentExecutions();\n+                    if (executionId != null) {\n+                        // Check if the roller shutter is moving and STOP is sent => STOP it\n+                        cancelExecution(executionId);\n+                    } else {\n+                        sendCommand(COMMAND_MY);\n+                    }\n+                    break;\n+                case COMMAND_SET_CLOSURE:\n+                    if (CONTROL_SILENT.equals(channelUID.getId())) {\n+                        // move the roller shutter to the specific position at low speed\n+                        String param = \"[\" + toInteger(command) + \", \\\"lowspeed\\\"]\";\n+                        sendCommand(COMMAND_SET_CLOSURESPEED, param);\n+                    } else {\n+                        String param = \"[\" + toInteger(command) + \"]\";\n+                        sendCommand(cmd, param);\n+                    }\n+                    break;\n+                default:\n+                    if (CONTROL_SILENT.equals(channelUID.getId()) && (COMMAND_UP.equals(cmd) || COMMAND_DOWN.equals(cmd))) {\n+                        // move the roller shutter to the specific position at low speed\n+                        String param = \"[\" + (COMMAND_UP.equals(cmd) ? 0 : 100) + \", \\\"lowspeed\\\"]\";\n+                        sendCommand(COMMAND_SET_CLOSURESPEED, param);\n+                    } else {\n+                        sendCommand(cmd);\n+                    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fdda2ad84c4a166124216bce3fce0b8d54210a74"}, "originalPosition": 52}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc2ODU4Nw==", "bodyText": "Great suggestion. thanks", "url": "https://github.com/openhab/openhab-addons/pull/7915#discussion_r439768587", "createdAt": "2020-06-13T20:55:47Z", "author": {"login": "octa22"}, "path": "bundles/org.openhab.binding.somfytahoma/src/main/java/org/openhab/binding/somfytahoma/internal/handler/SomfyTahomaSilentRollerShutterHandler.java", "diffHunk": "@@ -45,25 +45,37 @@ public void handleCommand(ChannelUID channelUID, Command command) {\n             return;\n         } else {\n             String cmd = getTahomaCommand(command.toString());\n-            if (COMMAND_MY.equals(cmd)) {\n-                sendCommand(COMMAND_MY);\n-            } else if (COMMAND_STOP.equals(cmd)) {\n-                String executionId = getCurrentExecutions();\n-                if (executionId != null) {\n-                    // Check if the roller shutter is moving and STOP is sent => STOP it\n-                    cancelExecution(executionId);\n-                } else {\n+            switch (cmd) {\n+                case COMMAND_MY:\n                     sendCommand(COMMAND_MY);\n-                }\n-            } else {\n-                if (CONTROL_SILENT.equals(channelUID.getId()) && COMMAND_SET_CLOSURE.equals(cmd)) {\n-                    // move the roller shutter to the specific position at low speed\n-                    String param = \"[\" + command.toString() + \", \\\"lowspeed\\\"]\";\n-                    sendCommand(COMMAND_SET_CLOSURESPEED, param);\n-                } else {\n-                    String param = COMMAND_SET_CLOSURE.equals(cmd) ? \"[\" + toInteger(command) + \"]\" : \"[]\";\n-                    sendCommand(cmd, param);\n-                }\n+                    break;\n+                case COMMAND_STOP:\n+                    String executionId = getCurrentExecutions();\n+                    if (executionId != null) {\n+                        // Check if the roller shutter is moving and STOP is sent => STOP it\n+                        cancelExecution(executionId);\n+                    } else {\n+                        sendCommand(COMMAND_MY);\n+                    }\n+                    break;\n+                case COMMAND_SET_CLOSURE:\n+                    if (CONTROL_SILENT.equals(channelUID.getId())) {\n+                        // move the roller shutter to the specific position at low speed\n+                        String param = \"[\" + toInteger(command) + \", \\\"lowspeed\\\"]\";\n+                        sendCommand(COMMAND_SET_CLOSURESPEED, param);\n+                    } else {\n+                        String param = \"[\" + toInteger(command) + \"]\";\n+                        sendCommand(cmd, param);\n+                    }\n+                    break;\n+                default:\n+                    if (CONTROL_SILENT.equals(channelUID.getId()) && (COMMAND_UP.equals(cmd) || COMMAND_DOWN.equals(cmd))) {\n+                        // move the roller shutter to the specific position at low speed\n+                        String param = \"[\" + (COMMAND_UP.equals(cmd) ? 0 : 100) + \", \\\"lowspeed\\\"]\";\n+                        sendCommand(COMMAND_SET_CLOSURESPEED, param);\n+                    } else {\n+                        sendCommand(cmd);\n+                    }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc2MzMxMA=="}, "originalCommit": {"oid": "fdda2ad84c4a166124216bce3fce0b8d54210a74"}, "originalPosition": 52}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjczOTYzMzA0OnYy", "diffSide": "RIGHT", "path": "bundles/org.openhab.binding.somfytahoma/src/main/java/org/openhab/binding/somfytahoma/internal/handler/SomfyTahomaSilentRollerShutterHandler.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xM1QxOTozNTowOFrOGjZCTA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xM1QyMDo1NjowMFrOGjZWGA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc2MzUzMg==", "bodyText": "You can do similar fall through shenanigans here as well by moving the COMMAND_MY case around.\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            case COMMAND_STOP:\n          \n          \n            \n                                String executionId = getCurrentExecutions();\n          \n          \n            \n                                if (executionId != null) {\n          \n          \n            \n                                    // Check if the roller shutter is moving and STOP is sent => STOP it\n          \n          \n            \n                                    cancelExecution(executionId);\n          \n          \n            \n                                } else {\n          \n          \n            \n                                    sendCommand(COMMAND_MY);\n          \n          \n            \n                                }\n          \n          \n            \n                                break;\n          \n          \n            \n                            case COMMAND_STOP:\n          \n          \n            \n                                String executionId = getCurrentExecutions();\n          \n          \n            \n                                if (executionId != null) {\n          \n          \n            \n                                    // Check if the roller shutter is moving and STOP is sent => STOP it\n          \n          \n            \n                                    cancelExecution(executionId);\n          \n          \n            \n                                    break;\n          \n          \n            \n                                }\n          \n          \n            \n                                //fall through\n          \n          \n            \n                            case COMMAND_MY:\n          \n          \n            \n                                sendCommand(COMMAND_MY);\n          \n          \n            \n                                break;", "url": "https://github.com/openhab/openhab-addons/pull/7915#discussion_r439763532", "createdAt": "2020-06-13T19:35:08Z", "author": {"login": "cpmeister"}, "path": "bundles/org.openhab.binding.somfytahoma/src/main/java/org/openhab/binding/somfytahoma/internal/handler/SomfyTahomaSilentRollerShutterHandler.java", "diffHunk": "@@ -45,25 +45,37 @@ public void handleCommand(ChannelUID channelUID, Command command) {\n             return;\n         } else {\n             String cmd = getTahomaCommand(command.toString());\n-            if (COMMAND_MY.equals(cmd)) {\n-                sendCommand(COMMAND_MY);\n-            } else if (COMMAND_STOP.equals(cmd)) {\n-                String executionId = getCurrentExecutions();\n-                if (executionId != null) {\n-                    // Check if the roller shutter is moving and STOP is sent => STOP it\n-                    cancelExecution(executionId);\n-                } else {\n+            switch (cmd) {\n+                case COMMAND_MY:\n                     sendCommand(COMMAND_MY);\n-                }\n-            } else {\n-                if (CONTROL_SILENT.equals(channelUID.getId()) && COMMAND_SET_CLOSURE.equals(cmd)) {\n-                    // move the roller shutter to the specific position at low speed\n-                    String param = \"[\" + command.toString() + \", \\\"lowspeed\\\"]\";\n-                    sendCommand(COMMAND_SET_CLOSURESPEED, param);\n-                } else {\n-                    String param = COMMAND_SET_CLOSURE.equals(cmd) ? \"[\" + toInteger(command) + \"]\" : \"[]\";\n-                    sendCommand(cmd, param);\n-                }\n+                    break;\n+                case COMMAND_STOP:\n+                    String executionId = getCurrentExecutions();\n+                    if (executionId != null) {\n+                        // Check if the roller shutter is moving and STOP is sent => STOP it\n+                        cancelExecution(executionId);\n+                    } else {\n+                        sendCommand(COMMAND_MY);\n+                    }\n+                    break;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fdda2ad84c4a166124216bce3fce0b8d54210a74"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc2ODYwMA==", "bodyText": "Great suggestion. thanks", "url": "https://github.com/openhab/openhab-addons/pull/7915#discussion_r439768600", "createdAt": "2020-06-13T20:56:00Z", "author": {"login": "octa22"}, "path": "bundles/org.openhab.binding.somfytahoma/src/main/java/org/openhab/binding/somfytahoma/internal/handler/SomfyTahomaSilentRollerShutterHandler.java", "diffHunk": "@@ -45,25 +45,37 @@ public void handleCommand(ChannelUID channelUID, Command command) {\n             return;\n         } else {\n             String cmd = getTahomaCommand(command.toString());\n-            if (COMMAND_MY.equals(cmd)) {\n-                sendCommand(COMMAND_MY);\n-            } else if (COMMAND_STOP.equals(cmd)) {\n-                String executionId = getCurrentExecutions();\n-                if (executionId != null) {\n-                    // Check if the roller shutter is moving and STOP is sent => STOP it\n-                    cancelExecution(executionId);\n-                } else {\n+            switch (cmd) {\n+                case COMMAND_MY:\n                     sendCommand(COMMAND_MY);\n-                }\n-            } else {\n-                if (CONTROL_SILENT.equals(channelUID.getId()) && COMMAND_SET_CLOSURE.equals(cmd)) {\n-                    // move the roller shutter to the specific position at low speed\n-                    String param = \"[\" + command.toString() + \", \\\"lowspeed\\\"]\";\n-                    sendCommand(COMMAND_SET_CLOSURESPEED, param);\n-                } else {\n-                    String param = COMMAND_SET_CLOSURE.equals(cmd) ? \"[\" + toInteger(command) + \"]\" : \"[]\";\n-                    sendCommand(cmd, param);\n-                }\n+                    break;\n+                case COMMAND_STOP:\n+                    String executionId = getCurrentExecutions();\n+                    if (executionId != null) {\n+                        // Check if the roller shutter is moving and STOP is sent => STOP it\n+                        cancelExecution(executionId);\n+                    } else {\n+                        sendCommand(COMMAND_MY);\n+                    }\n+                    break;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc2MzUzMg=="}, "originalCommit": {"oid": "fdda2ad84c4a166124216bce3fce0b8d54210a74"}, "originalPosition": 34}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4800, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}