{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMwNTU5ODc5", "number": 9194, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQxNzoyODowOVrOE_uq3Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQxNzoyODowOVrOE_uq3Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM1MjYwMzgxOnYy", "diffSide": "RIGHT", "path": "bundles/org.openhab.binding.digitalstrom/src/main/java/org/openhab/binding/digitalstrom/internal/discovery/DiscoveryServiceManager.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQxNzoyODowOVrOH9mG3Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQxODo0NzoxNlrOH9pQNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDM0OTUzMw==", "bodyText": "The error logging level should be reserved for issues catastrophic enough to threaten the operation of openHab itself. An error in a binding shouldn't qualify for this. Please read the openHab coding guidelines for expected use of logging in bindings.\nI suggest logging warn instead. Also please try to catch specific exceptions or at the very least RuntimeException. In addition, you should always log the exception or at the very least the exception message to make debugging easier.\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    } catch (Exception ex) {\n          \n          \n            \n                        logger.error(\"Unable to add devices {}\", device);\n          \n          \n            \n                    } catch (RuntimeException ex) {\n          \n          \n            \n                        logger.warn(\"Unable to add devices {}: {}\", device, ex.getMessage());", "url": "https://github.com/openhab/openhab-addons/pull/9194#discussion_r534349533", "createdAt": "2020-12-02T17:28:09Z", "author": {"login": "cpmeister"}, "path": "bundles/org.openhab.binding.digitalstrom/src/main/java/org/openhab/binding/digitalstrom/internal/discovery/DiscoveryServiceManager.java", "diffHunk": "@@ -194,20 +198,25 @@ public void onDeviceRemoved(GeneralDeviceInformation device) {\n \n     @Override\n     public void onDeviceAdded(GeneralDeviceInformation device) {\n-        if (device instanceof Device) {\n-            String id = ((Device) device).getHWinfo().substring(0, 2);\n-            if (((Device) device).isSensorDevice()) {\n-                id = ((Device) device).getHWinfo();\n-            }\n-            if (discoveryServices.get(id) != null) {\n-                ((DeviceDiscoveryService) discoveryServices.get(id)).onDeviceAdded(device);\n+        try {\n+            if (device instanceof Device) {\n+                String id = ((Device) device).getHWinfo().substring(0, 2);\n+                if (((Device) device).isSensorDevice()) {\n+                    id = ((Device) device).getHWinfo();\n+                }\n+                if (discoveryServices.get(id) != null) {\n+                    ((DeviceDiscoveryService) discoveryServices.get(id)).onDeviceAdded(device);\n+                }\n             }\n-        }\n-        if (device instanceof Circuit) {\n-            if (discoveryServices.get(DsDeviceThingTypeProvider.SupportedThingTypes.circuit.toString()) != null) {\n-                ((DeviceDiscoveryService) discoveryServices\n-                        .get(DsDeviceThingTypeProvider.SupportedThingTypes.circuit.toString())).onDeviceAdded(device);\n+            if (device instanceof Circuit) {\n+                if (discoveryServices.get(DsDeviceThingTypeProvider.SupportedThingTypes.circuit.toString()) != null) {\n+                    ((DeviceDiscoveryService) discoveryServices\n+                            .get(DsDeviceThingTypeProvider.SupportedThingTypes.circuit.toString()))\n+                                    .onDeviceAdded(device);\n+                }\n             }\n+        } catch (Exception ex) {\n+            logger.error(\"Unable to add devices {}\", device);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "82b31b205b6686668806e517199aaf4795c4fd54"}, "originalPosition": 52}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDQwMTA3Ng==", "bodyText": "I guess I wrote this a bit too fast and forgot to forward the exception.\nAgree for le level. No problem for me. I will put the complete stacktrace instead of just the message if it's ok for you ?", "url": "https://github.com/openhab/openhab-addons/pull/9194#discussion_r534401076", "createdAt": "2020-12-02T18:47:16Z", "author": {"login": "gaetancollaud"}, "path": "bundles/org.openhab.binding.digitalstrom/src/main/java/org/openhab/binding/digitalstrom/internal/discovery/DiscoveryServiceManager.java", "diffHunk": "@@ -194,20 +198,25 @@ public void onDeviceRemoved(GeneralDeviceInformation device) {\n \n     @Override\n     public void onDeviceAdded(GeneralDeviceInformation device) {\n-        if (device instanceof Device) {\n-            String id = ((Device) device).getHWinfo().substring(0, 2);\n-            if (((Device) device).isSensorDevice()) {\n-                id = ((Device) device).getHWinfo();\n-            }\n-            if (discoveryServices.get(id) != null) {\n-                ((DeviceDiscoveryService) discoveryServices.get(id)).onDeviceAdded(device);\n+        try {\n+            if (device instanceof Device) {\n+                String id = ((Device) device).getHWinfo().substring(0, 2);\n+                if (((Device) device).isSensorDevice()) {\n+                    id = ((Device) device).getHWinfo();\n+                }\n+                if (discoveryServices.get(id) != null) {\n+                    ((DeviceDiscoveryService) discoveryServices.get(id)).onDeviceAdded(device);\n+                }\n             }\n-        }\n-        if (device instanceof Circuit) {\n-            if (discoveryServices.get(DsDeviceThingTypeProvider.SupportedThingTypes.circuit.toString()) != null) {\n-                ((DeviceDiscoveryService) discoveryServices\n-                        .get(DsDeviceThingTypeProvider.SupportedThingTypes.circuit.toString())).onDeviceAdded(device);\n+            if (device instanceof Circuit) {\n+                if (discoveryServices.get(DsDeviceThingTypeProvider.SupportedThingTypes.circuit.toString()) != null) {\n+                    ((DeviceDiscoveryService) discoveryServices\n+                            .get(DsDeviceThingTypeProvider.SupportedThingTypes.circuit.toString()))\n+                                    .onDeviceAdded(device);\n+                }\n             }\n+        } catch (Exception ex) {\n+            logger.error(\"Unable to add devices {}\", device);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDM0OTUzMw=="}, "originalCommit": {"oid": "82b31b205b6686668806e517199aaf4795c4fd54"}, "originalPosition": 52}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3799, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}