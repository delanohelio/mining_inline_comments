{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM4MjA4ODE4", "number": 7986, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QxOTo1MDowMFrOEIHH7w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QxOTo1MDoyM1rOEIHIXQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc2OTQwNzgzOnYy", "diffSide": "RIGHT", "path": "bundles/org.openhab.io.homekit/src/main/java/org/openhab/io/homekit/internal/accessories/HomekitSecuritySystemImpl.java", "isResolved": true, "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QxOTo1MDowMFrOGn4KrQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQxOTo0MTo1NFrOGogfCw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDQ2Nzg4NQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                private final Map<CurrentSecuritySystemStateEnum, String> currentStateMapping = new EnumMap(\n          \n          \n            \n                private final Map<CurrentSecuritySystemStateEnum, String> currentStateMapping = new EnumMap<>(", "url": "https://github.com/openhab/openhab-addons/pull/7986#discussion_r444467885", "createdAt": "2020-06-23T19:50:00Z", "author": {"login": "cpmeister"}, "path": "bundles/org.openhab.io.homekit/src/main/java/org/openhab/io/homekit/internal/accessories/HomekitSecuritySystemImpl.java", "diffHunk": "@@ -43,123 +47,76 @@\n  */\n public class HomekitSecuritySystemImpl extends AbstractHomekitAccessoryImpl implements SecuritySystemAccessory {\n     private final Logger logger = LoggerFactory.getLogger(HomekitSecuritySystemImpl.class);\n+    private final Map<CurrentSecuritySystemStateEnum, String> currentStateMapping = new EnumMap(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f2e8e62e1816cac38e0f807fec2c3208915e07c8"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDQ5MjkxOQ==", "bodyText": "i get\n'<>' cannot be used with anonymous classes\nshould keep it as it is or change to\n private final Map<TargetSecuritySystemStateEnum, String> targetStateMapping = new EnumMap<TargetSecuritySystemStateEnum, String>(\n?", "url": "https://github.com/openhab/openhab-addons/pull/7986#discussion_r444492919", "createdAt": "2020-06-23T20:39:16Z", "author": {"login": "yfre"}, "path": "bundles/org.openhab.io.homekit/src/main/java/org/openhab/io/homekit/internal/accessories/HomekitSecuritySystemImpl.java", "diffHunk": "@@ -43,123 +47,76 @@\n  */\n public class HomekitSecuritySystemImpl extends AbstractHomekitAccessoryImpl implements SecuritySystemAccessory {\n     private final Logger logger = LoggerFactory.getLogger(HomekitSecuritySystemImpl.class);\n+    private final Map<CurrentSecuritySystemStateEnum, String> currentStateMapping = new EnumMap(", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDQ2Nzg4NQ=="}, "originalCommit": {"oid": "f2e8e62e1816cac38e0f807fec2c3208915e07c8"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDUyNTM1MA==", "bodyText": "Honestly, creating an anonymous subclass of EnumMap for the sole purpose of populating initial values is something I frown upon because it mixes up class implementation with class usage which should generally be two separate concerns when coding. The error you are seeing is one such side-effect of that mixing up.\nBut in order to not force even more changes right now I suggest to just change it to private final Map<TargetSecuritySystemStateEnum, String> targetStateMapping = new EnumMap<TargetSecuritySystemStateEnum, String>(", "url": "https://github.com/openhab/openhab-addons/pull/7986#discussion_r444525350", "createdAt": "2020-06-23T21:42:28Z", "author": {"login": "cpmeister"}, "path": "bundles/org.openhab.io.homekit/src/main/java/org/openhab/io/homekit/internal/accessories/HomekitSecuritySystemImpl.java", "diffHunk": "@@ -43,123 +47,76 @@\n  */\n public class HomekitSecuritySystemImpl extends AbstractHomekitAccessoryImpl implements SecuritySystemAccessory {\n     private final Logger logger = LoggerFactory.getLogger(HomekitSecuritySystemImpl.class);\n+    private final Map<CurrentSecuritySystemStateEnum, String> currentStateMapping = new EnumMap(", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDQ2Nzg4NQ=="}, "originalCommit": {"oid": "f2e8e62e1816cac38e0f807fec2c3208915e07c8"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDcxNjIwMA==", "bodyText": "i will change as you suggested.\nbut how you would do it without anonymous subclass? with a dedicate classes, e.g. SecurityCurrentStateMapping? or something else? originally i was thinking about kind of xml based configuration, it was too complex and too error-prone at the end.", "url": "https://github.com/openhab/openhab-addons/pull/7986#discussion_r444716200", "createdAt": "2020-06-24T08:03:33Z", "author": {"login": "yfre"}, "path": "bundles/org.openhab.io.homekit/src/main/java/org/openhab/io/homekit/internal/accessories/HomekitSecuritySystemImpl.java", "diffHunk": "@@ -43,123 +47,76 @@\n  */\n public class HomekitSecuritySystemImpl extends AbstractHomekitAccessoryImpl implements SecuritySystemAccessory {\n     private final Logger logger = LoggerFactory.getLogger(HomekitSecuritySystemImpl.class);\n+    private final Map<CurrentSecuritySystemStateEnum, String> currentStateMapping = new EnumMap(", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDQ2Nzg4NQ=="}, "originalCommit": {"oid": "f2e8e62e1816cac38e0f807fec2c3208915e07c8"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTA4NDMyOQ==", "bodyText": "You would typically populate the map in the HomeSecuritySystemImpl constructor, or you could (although I don't really recommend it either since it is kinda unorthodox) just put the population logic in a raw statement block {...} right below your field declaration. It is like static initialization but you just remove the static keyword.", "url": "https://github.com/openhab/openhab-addons/pull/7986#discussion_r445084329", "createdAt": "2020-06-24T18:19:01Z", "author": {"login": "cpmeister"}, "path": "bundles/org.openhab.io.homekit/src/main/java/org/openhab/io/homekit/internal/accessories/HomekitSecuritySystemImpl.java", "diffHunk": "@@ -43,123 +47,76 @@\n  */\n public class HomekitSecuritySystemImpl extends AbstractHomekitAccessoryImpl implements SecuritySystemAccessory {\n     private final Logger logger = LoggerFactory.getLogger(HomekitSecuritySystemImpl.class);\n+    private final Map<CurrentSecuritySystemStateEnum, String> currentStateMapping = new EnumMap(", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDQ2Nzg4NQ=="}, "originalCommit": {"oid": "f2e8e62e1816cac38e0f807fec2c3208915e07c8"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTEyODQ1OQ==", "bodyText": "ok.  understood. i will keep it as it is for now. we consider to change it all places at once to constructor based init in a later PR", "url": "https://github.com/openhab/openhab-addons/pull/7986#discussion_r445128459", "createdAt": "2020-06-24T19:41:54Z", "author": {"login": "yfre"}, "path": "bundles/org.openhab.io.homekit/src/main/java/org/openhab/io/homekit/internal/accessories/HomekitSecuritySystemImpl.java", "diffHunk": "@@ -43,123 +47,76 @@\n  */\n public class HomekitSecuritySystemImpl extends AbstractHomekitAccessoryImpl implements SecuritySystemAccessory {\n     private final Logger logger = LoggerFactory.getLogger(HomekitSecuritySystemImpl.class);\n+    private final Map<CurrentSecuritySystemStateEnum, String> currentStateMapping = new EnumMap(", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDQ2Nzg4NQ=="}, "originalCommit": {"oid": "f2e8e62e1816cac38e0f807fec2c3208915e07c8"}, "originalPosition": 24}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc2OTQwODM4OnYy", "diffSide": "RIGHT", "path": "bundles/org.openhab.io.homekit/src/main/java/org/openhab/io/homekit/internal/accessories/HomekitSecuritySystemImpl.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QxOTo1MDoxMVrOGn4LCg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QxOTo1MDoxMVrOGn4LCg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDQ2Nzk3OA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                private final Map<TargetSecuritySystemStateEnum, String> targetStateMapping = new EnumMap(\n          \n          \n            \n                private final Map<TargetSecuritySystemStateEnum, String> targetStateMapping = new EnumMap<>(", "url": "https://github.com/openhab/openhab-addons/pull/7986#discussion_r444467978", "createdAt": "2020-06-23T19:50:11Z", "author": {"login": "cpmeister"}, "path": "bundles/org.openhab.io.homekit/src/main/java/org/openhab/io/homekit/internal/accessories/HomekitSecuritySystemImpl.java", "diffHunk": "@@ -43,123 +47,76 @@\n  */\n public class HomekitSecuritySystemImpl extends AbstractHomekitAccessoryImpl implements SecuritySystemAccessory {\n     private final Logger logger = LoggerFactory.getLogger(HomekitSecuritySystemImpl.class);\n+    private final Map<CurrentSecuritySystemStateEnum, String> currentStateMapping = new EnumMap(\n+            CurrentSecuritySystemStateEnum.class) {\n+        {\n+            put(CurrentSecuritySystemStateEnum.DISARMED, \"DISARMED\");\n+            put(CurrentSecuritySystemStateEnum.AWAY_ARM, \"AWAY_ARM\");\n+            put(CurrentSecuritySystemStateEnum.STAY_ARM, \"STAY_ARM\");\n+            put(CurrentSecuritySystemStateEnum.NIGHT_ARM, \"NIGHT_ARM\");\n+            put(CurrentSecuritySystemStateEnum.TRIGGERED, \"TRIGGERED\");\n+\n+        }\n+    };\n+    private final Map<TargetSecuritySystemStateEnum, String> targetStateMapping = new EnumMap(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f2e8e62e1816cac38e0f807fec2c3208915e07c8"}, "originalPosition": 35}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc2OTQwODkzOnYy", "diffSide": "RIGHT", "path": "bundles/org.openhab.io.homekit/src/main/java/org/openhab/io/homekit/internal/accessories/HomekitSecuritySystemImpl.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QxOTo1MDoyM1rOGn4Ldg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QxOTo1MDoyM1rOGn4Ldg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDQ2ODA4Ng==", "bodyText": "remove this blank line", "url": "https://github.com/openhab/openhab-addons/pull/7986#discussion_r444468086", "createdAt": "2020-06-23T19:50:23Z", "author": {"login": "cpmeister"}, "path": "bundles/org.openhab.io.homekit/src/main/java/org/openhab/io/homekit/internal/accessories/HomekitSecuritySystemImpl.java", "diffHunk": "@@ -43,123 +47,76 @@\n  */\n public class HomekitSecuritySystemImpl extends AbstractHomekitAccessoryImpl implements SecuritySystemAccessory {\n     private final Logger logger = LoggerFactory.getLogger(HomekitSecuritySystemImpl.class);\n+    private final Map<CurrentSecuritySystemStateEnum, String> currentStateMapping = new EnumMap(\n+            CurrentSecuritySystemStateEnum.class) {\n+        {\n+            put(CurrentSecuritySystemStateEnum.DISARMED, \"DISARMED\");\n+            put(CurrentSecuritySystemStateEnum.AWAY_ARM, \"AWAY_ARM\");\n+            put(CurrentSecuritySystemStateEnum.STAY_ARM, \"STAY_ARM\");\n+            put(CurrentSecuritySystemStateEnum.NIGHT_ARM, \"NIGHT_ARM\");\n+            put(CurrentSecuritySystemStateEnum.TRIGGERED, \"TRIGGERED\");\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f2e8e62e1816cac38e0f807fec2c3208915e07c8"}, "originalPosition": 32}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4844, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}