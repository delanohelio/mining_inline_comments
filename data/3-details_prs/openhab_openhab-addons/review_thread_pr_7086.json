{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgyMDcxMTU4", "number": 7086, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QxMjo1OToxMFrODko8cg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QxMzowNDoyMVrODkpDag==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM5NzQ2MTYyOnYy", "diffSide": "RIGHT", "path": "bundles/org.openhab.binding.satel/src/main/java/org/openhab/binding/satel/internal/command/SatelCommandBase.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QxMjo1OToxMFrOFxEu5w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QxOTo0MjowMFrOFxT53Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzAwMjA4Nw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                protected void handleResponseInternal(final EventDispatcher eventDispatcher) {\n          \n          \n            \n                protected abtract void handleResponseInternal(final EventDispatcher eventDispatcher);\n          \n      \n    \n    \n  \n\nThis makes sure that sub-classes implement it.", "url": "https://github.com/openhab/openhab-addons/pull/7086#discussion_r387002087", "createdAt": "2020-03-03T12:59:10Z", "author": {"login": "J-N-K"}, "path": "bundles/org.openhab.binding.satel/src/main/java/org/openhab/binding/satel/internal/command/SatelCommandBase.java", "diffHunk": "@@ -115,6 +125,14 @@ protected SatelMessage getResponse() {\n      */\n     protected abstract boolean isResponseValid(SatelMessage response);\n \n+    /**\n+     * Overriden in subclasses allows to execute action specific to given command (i.e. dispatch an event).\n+     *\n+     * @param eventDispatcher event dispatcher\n+     */\n+    protected void handleResponseInternal(final EventDispatcher eventDispatcher) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "83b0f17a71cf7404056103d2ed561f6200590eee"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzI0NjQ5Mg==", "bodyText": "This is on purpose. Not all subclasses need to override this method, so it is empty by default.", "url": "https://github.com/openhab/openhab-addons/pull/7086#discussion_r387246492", "createdAt": "2020-03-03T19:34:04Z", "author": {"login": "druciak"}, "path": "bundles/org.openhab.binding.satel/src/main/java/org/openhab/binding/satel/internal/command/SatelCommandBase.java", "diffHunk": "@@ -115,6 +125,14 @@ protected SatelMessage getResponse() {\n      */\n     protected abstract boolean isResponseValid(SatelMessage response);\n \n+    /**\n+     * Overriden in subclasses allows to execute action specific to given command (i.e. dispatch an event).\n+     *\n+     * @param eventDispatcher event dispatcher\n+     */\n+    protected void handleResponseInternal(final EventDispatcher eventDispatcher) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzAwMjA4Nw=="}, "originalCommit": {"oid": "83b0f17a71cf7404056103d2ed561f6200590eee"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzI1MDY1Mw==", "bodyText": "I guess that\u2018s a personal style question. I prefer \u201edeliberately implement to do nothing in subclass\u201c over \u201eaccidentally forget to implement doing something\u201c. But ok with me.", "url": "https://github.com/openhab/openhab-addons/pull/7086#discussion_r387250653", "createdAt": "2020-03-03T19:42:00Z", "author": {"login": "J-N-K"}, "path": "bundles/org.openhab.binding.satel/src/main/java/org/openhab/binding/satel/internal/command/SatelCommandBase.java", "diffHunk": "@@ -115,6 +125,14 @@ protected SatelMessage getResponse() {\n      */\n     protected abstract boolean isResponseValid(SatelMessage response);\n \n+    /**\n+     * Overriden in subclasses allows to execute action specific to given command (i.e. dispatch an event).\n+     *\n+     * @param eventDispatcher event dispatcher\n+     */\n+    protected void handleResponseInternal(final EventDispatcher eventDispatcher) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzAwMjA4Nw=="}, "originalCommit": {"oid": "83b0f17a71cf7404056103d2ed561f6200590eee"}, "originalPosition": 37}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM5NzQ3NDQwOnYy", "diffSide": "RIGHT", "path": "bundles/org.openhab.binding.satel/src/main/java/org/openhab/binding/satel/internal/event/EventDispatcher.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QxMzowMjo1NlrOFxE2lg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QxMzowMjo1NlrOFxE2lg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzAwNDA1NA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        logger.error(\"Missing event handler for event {}. Event discarded.\", event.getClass().getName());\n          \n          \n            \n                        logger.warn(\"Missing event handler for event {}. Event discarded.\", event.getClass().getName());", "url": "https://github.com/openhab/openhab-addons/pull/7086#discussion_r387004054", "createdAt": "2020-03-03T13:02:56Z", "author": {"login": "J-N-K"}, "path": "bundles/org.openhab.binding.satel/src/main/java/org/openhab/binding/satel/internal/event/EventDispatcher.java", "diffHunk": "@@ -56,10 +67,19 @@ public void removeEventListener(SatelEventListener eventListener) {\n      * @param event the event to distribute.\n      */\n     public void dispatchEvent(SatelEvent event) {\n-        logger.debug(\"Distributing event: {}\", event);\n-        for (SatelEventListener listener : eventListeners) {\n-            logger.trace(\"Distributing to {}\", listener);\n-            listener.incomingEvent(event);\n+        final Method m = eventHandlers.get(event.getClass());\n+        if (m == null) {\n+            logger.error(\"Missing event handler for event {}. Event discarded.\", event.getClass().getName());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "83b0f17a71cf7404056103d2ed561f6200590eee"}, "originalPosition": 39}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM5NzQ3NTIzOnYy", "diffSide": "RIGHT", "path": "bundles/org.openhab.binding.satel/src/main/java/org/openhab/binding/satel/internal/event/EventDispatcher.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QxMzowMzoxM1rOFxE3Iw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QxMzowMzoxM1rOFxE3Iw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzAwNDE5NQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                logger.error(\"Unable to distribute {} to {}\", event.getClass().getName(), listener, e);\n          \n          \n            \n                                logger.warn(\"Unable to distribute {} to {}\", event.getClass().getName(), listener, e);", "url": "https://github.com/openhab/openhab-addons/pull/7086#discussion_r387004195", "createdAt": "2020-03-03T13:03:13Z", "author": {"login": "J-N-K"}, "path": "bundles/org.openhab.binding.satel/src/main/java/org/openhab/binding/satel/internal/event/EventDispatcher.java", "diffHunk": "@@ -56,10 +67,19 @@ public void removeEventListener(SatelEventListener eventListener) {\n      * @param event the event to distribute.\n      */\n     public void dispatchEvent(SatelEvent event) {\n-        logger.debug(\"Distributing event: {}\", event);\n-        for (SatelEventListener listener : eventListeners) {\n-            logger.trace(\"Distributing to {}\", listener);\n-            listener.incomingEvent(event);\n+        final Method m = eventHandlers.get(event.getClass());\n+        if (m == null) {\n+            logger.error(\"Missing event handler for event {}. Event discarded.\", event.getClass().getName());\n+        } else {\n+            logger.debug(\"Distributing event: {}\", event);\n+            for (SatelEventListener listener : eventListeners) {\n+                logger.trace(\"Distributing to {}\", listener);\n+                try {\n+                    m.invoke(listener, event);\n+                } catch (ReflectiveOperationException e) {\n+                    logger.error(\"Unable to distribute {} to {}\", event.getClass().getName(), listener, e);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "83b0f17a71cf7404056103d2ed561f6200590eee"}, "originalPosition": 47}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM5NzQ3OTQ2OnYy", "diffSide": "RIGHT", "path": "bundles/org.openhab.binding.satel/src/main/java/org/openhab/binding/satel/internal/event/EventDispatcher.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QxMzowNDoyMVrOFxE5gQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QxMzowNDoyMVrOFxE5gQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzAwNDgwMQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        for (SatelEventListener listener : eventListeners) {\n          \n          \n            \n                       eventListeners.forEach(listener -> {", "url": "https://github.com/openhab/openhab-addons/pull/7086#discussion_r387004801", "createdAt": "2020-03-03T13:04:21Z", "author": {"login": "J-N-K"}, "path": "bundles/org.openhab.binding.satel/src/main/java/org/openhab/binding/satel/internal/event/EventDispatcher.java", "diffHunk": "@@ -56,10 +67,19 @@ public void removeEventListener(SatelEventListener eventListener) {\n      * @param event the event to distribute.\n      */\n     public void dispatchEvent(SatelEvent event) {\n-        logger.debug(\"Distributing event: {}\", event);\n-        for (SatelEventListener listener : eventListeners) {\n-            logger.trace(\"Distributing to {}\", listener);\n-            listener.incomingEvent(event);\n+        final Method m = eventHandlers.get(event.getClass());\n+        if (m == null) {\n+            logger.error(\"Missing event handler for event {}. Event discarded.\", event.getClass().getName());\n+        } else {\n+            logger.debug(\"Distributing event: {}\", event);\n+            for (SatelEventListener listener : eventListeners) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "83b0f17a71cf7404056103d2ed561f6200590eee"}, "originalPosition": 42}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 618, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}