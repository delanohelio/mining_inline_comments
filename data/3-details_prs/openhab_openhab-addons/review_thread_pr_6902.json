{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY3MTM3NTA4", "number": 6902, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNVQyMzozNDoxMVrODasSPA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOVQyMjozNzoxN1rODmfHEg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI5MzE1MTMyOnYy", "diffSide": "RIGHT", "path": "bundles/org.openhab.binding.mqtt.generic/src/main/resources/ESH-INF/config/number-channel-config.xml", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNVQyMzozNDoxMVrOFhxwvQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNlQxNjo1NTo1NFrOFh05vg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDk2MjYyMQ==", "bodyText": "I'm not sure if it make sense to treat a number channel as a trigger channel, because usually the number represent a state. Can you think about a use case in which a number doesn't reflect a state?", "url": "https://github.com/openhab/openhab-addons/pull/6902#discussion_r370962621", "createdAt": "2020-01-25T23:34:11Z", "author": {"login": "bodiroga"}, "path": "bundles/org.openhab.binding.mqtt.generic/src/main/resources/ESH-INF/config/number-channel-config.xml", "diffHunk": "@@ -102,5 +102,11 @@\n \t\t\t\tconverting incoming values (like from '\u00b0F' to '\u00b0C'). Examples: \"\u00b0C\", \"\u00b0F\"</description>\n \t\t\t<advanced>true</advanced>\n \t\t</parameter>\n+\t\t<parameter name=\"trigger\" type=\"boolean\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "472b60e2b1efab40d3a98f75dcebc0d2dd6906a7"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTAxNDA3OA==", "bodyText": "You are right.\nAfter thinking about it again, I made the trigger an own channel type.", "url": "https://github.com/openhab/openhab-addons/pull/6902#discussion_r371014078", "createdAt": "2020-01-26T16:55:54Z", "author": {"login": "jochen314"}, "path": "bundles/org.openhab.binding.mqtt.generic/src/main/resources/ESH-INF/config/number-channel-config.xml", "diffHunk": "@@ -102,5 +102,11 @@\n \t\t\t\tconverting incoming values (like from '\u00b0F' to '\u00b0C'). Examples: \"\u00b0C\", \"\u00b0F\"</description>\n \t\t\t<advanced>true</advanced>\n \t\t</parameter>\n+\t\t<parameter name=\"trigger\" type=\"boolean\">", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDk2MjYyMQ=="}, "originalCommit": {"oid": "472b60e2b1efab40d3a98f75dcebc0d2dd6906a7"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI5NzczODgxOnYy", "diffSide": "RIGHT", "path": "bundles/org.openhab.binding.mqtt.generic/src/main/resources/ESH-INF/config/trigger-channel-config.xml", "isResolved": false, "comments": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQwODowODo0NVrOFib-_w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wN1QyMTo0NTozNlrOFzR3mA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTY1NDM5OQ==", "bodyText": "A transformation doesn't make sense for a trigger", "url": "https://github.com/openhab/openhab-addons/pull/6902#discussion_r371654399", "createdAt": "2020-01-28T08:08:45Z", "author": {"login": "davidgraeff"}, "path": "bundles/org.openhab.binding.mqtt.generic/src/main/resources/ESH-INF/config/trigger-channel-config.xml", "diffHunk": "@@ -0,0 +1,31 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<config-description:config-descriptions\n+\txmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+\txmlns:config-description=\"https://openhab.org/schemas/config-description/v1.0.0\"\n+\txsi:schemaLocation=\"https://openhab.org/schemas/config-description/v1.0.0 https://openhab.org/schemas/config-description-1.0.0.xsd\">\n+\n+\t<config-description uri=\"thing-type:mqtt:trigger_channel\">\n+\t\t<parameter-group name=\"transformations\">\n+\t\t\t<label>Transform Values</label>\n+\t\t\t<description>These configuration parameters allow you to alter a value before it is published to MQTT or before a\n+\t\t\t\treceived value is used in the trigger.</description>\n+\t\t\t<advanced>true</advanced>\n+\t\t</parameter-group>\n+\n+\t\t<parameter name=\"stateTopic\" type=\"text\" required=\"true\">\n+\t\t\t<label>MQTT Trigger Topic</label>\n+\t\t\t<description>An MQTT topic that this thing will subscribe to, to receive the trigger</description>\n+\t\t</parameter>\n+\t\t<parameter name=\"transformationPattern\" type=\"text\" groupName=\"transformations\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "125b8ff4ee22c02fb06f447059f8ce9db0ac72a9"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjAyNTUyNQ==", "bodyText": "Why not?\nThe incoming transformations are apply before trigger is executed.\nSo one might want to map the incomming values of filter them using REGEX.", "url": "https://github.com/openhab/openhab-addons/pull/6902#discussion_r372025525", "createdAt": "2020-01-28T20:00:09Z", "author": {"login": "jochen314"}, "path": "bundles/org.openhab.binding.mqtt.generic/src/main/resources/ESH-INF/config/trigger-channel-config.xml", "diffHunk": "@@ -0,0 +1,31 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<config-description:config-descriptions\n+\txmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+\txmlns:config-description=\"https://openhab.org/schemas/config-description/v1.0.0\"\n+\txsi:schemaLocation=\"https://openhab.org/schemas/config-description/v1.0.0 https://openhab.org/schemas/config-description-1.0.0.xsd\">\n+\n+\t<config-description uri=\"thing-type:mqtt:trigger_channel\">\n+\t\t<parameter-group name=\"transformations\">\n+\t\t\t<label>Transform Values</label>\n+\t\t\t<description>These configuration parameters allow you to alter a value before it is published to MQTT or before a\n+\t\t\t\treceived value is used in the trigger.</description>\n+\t\t\t<advanced>true</advanced>\n+\t\t</parameter-group>\n+\n+\t\t<parameter name=\"stateTopic\" type=\"text\" required=\"true\">\n+\t\t\t<label>MQTT Trigger Topic</label>\n+\t\t\t<description>An MQTT topic that this thing will subscribe to, to receive the trigger</description>\n+\t\t</parameter>\n+\t\t<parameter name=\"transformationPattern\" type=\"text\" groupName=\"transformations\">", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTY1NDM5OQ=="}, "originalCommit": {"oid": "125b8ff4ee22c02fb06f447059f8ce9db0ac72a9"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzE5MDQyMA==", "bodyText": "Triggers don't have a value, there should only be a discrete set of trigger events. Using JSON and transforming it both seems very wrong here.", "url": "https://github.com/openhab/openhab-addons/pull/6902#discussion_r373190420", "createdAt": "2020-01-30T20:59:14Z", "author": {"login": "kaikreuzer"}, "path": "bundles/org.openhab.binding.mqtt.generic/src/main/resources/ESH-INF/config/trigger-channel-config.xml", "diffHunk": "@@ -0,0 +1,31 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<config-description:config-descriptions\n+\txmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+\txmlns:config-description=\"https://openhab.org/schemas/config-description/v1.0.0\"\n+\txsi:schemaLocation=\"https://openhab.org/schemas/config-description/v1.0.0 https://openhab.org/schemas/config-description-1.0.0.xsd\">\n+\n+\t<config-description uri=\"thing-type:mqtt:trigger_channel\">\n+\t\t<parameter-group name=\"transformations\">\n+\t\t\t<label>Transform Values</label>\n+\t\t\t<description>These configuration parameters allow you to alter a value before it is published to MQTT or before a\n+\t\t\t\treceived value is used in the trigger.</description>\n+\t\t\t<advanced>true</advanced>\n+\t\t</parameter-group>\n+\n+\t\t<parameter name=\"stateTopic\" type=\"text\" required=\"true\">\n+\t\t\t<label>MQTT Trigger Topic</label>\n+\t\t\t<description>An MQTT topic that this thing will subscribe to, to receive the trigger</description>\n+\t\t</parameter>\n+\t\t<parameter name=\"transformationPattern\" type=\"text\" groupName=\"transformations\">", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTY1NDM5OQ=="}, "originalCommit": {"oid": "125b8ff4ee22c02fb06f447059f8ce9db0ac72a9"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzIxMTk3MQ==", "bodyText": "Well, the idea would be, that the device sends different values for the different events of the trigger.\nAnd then it might very well be good to be able to MAP the values sent by the device to more 'standard' ones used be your rules.", "url": "https://github.com/openhab/openhab-addons/pull/6902#discussion_r373211971", "createdAt": "2020-01-30T21:49:35Z", "author": {"login": "jochen314"}, "path": "bundles/org.openhab.binding.mqtt.generic/src/main/resources/ESH-INF/config/trigger-channel-config.xml", "diffHunk": "@@ -0,0 +1,31 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<config-description:config-descriptions\n+\txmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+\txmlns:config-description=\"https://openhab.org/schemas/config-description/v1.0.0\"\n+\txsi:schemaLocation=\"https://openhab.org/schemas/config-description/v1.0.0 https://openhab.org/schemas/config-description-1.0.0.xsd\">\n+\n+\t<config-description uri=\"thing-type:mqtt:trigger_channel\">\n+\t\t<parameter-group name=\"transformations\">\n+\t\t\t<label>Transform Values</label>\n+\t\t\t<description>These configuration parameters allow you to alter a value before it is published to MQTT or before a\n+\t\t\t\treceived value is used in the trigger.</description>\n+\t\t\t<advanced>true</advanced>\n+\t\t</parameter-group>\n+\n+\t\t<parameter name=\"stateTopic\" type=\"text\" required=\"true\">\n+\t\t\t<label>MQTT Trigger Topic</label>\n+\t\t\t<description>An MQTT topic that this thing will subscribe to, to receive the trigger</description>\n+\t\t</parameter>\n+\t\t<parameter name=\"transformationPattern\" type=\"text\" groupName=\"transformations\">", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTY1NDM5OQ=="}, "originalCommit": {"oid": "125b8ff4ee22c02fb06f447059f8ce9db0ac72a9"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Njc4NDMwMA==", "bodyText": "I tend to agree with @davidgraeff and @kaikreuzer. The idea of the payload is IMO is not to transport information recevived from the device but to present pre-defined values to the receiver.\nE.g. an alarm system could send ARMED or DISARMED as payload, so a notification can be send. for MQTT it would be more \"a value has been received\". If you are interested in the value itself, a state channel with changed in the rules should be used.", "url": "https://github.com/openhab/openhab-addons/pull/6902#discussion_r376784300", "createdAt": "2020-02-09T13:33:21Z", "author": {"login": "J-N-K"}, "path": "bundles/org.openhab.binding.mqtt.generic/src/main/resources/ESH-INF/config/trigger-channel-config.xml", "diffHunk": "@@ -0,0 +1,31 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<config-description:config-descriptions\n+\txmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+\txmlns:config-description=\"https://openhab.org/schemas/config-description/v1.0.0\"\n+\txsi:schemaLocation=\"https://openhab.org/schemas/config-description/v1.0.0 https://openhab.org/schemas/config-description-1.0.0.xsd\">\n+\n+\t<config-description uri=\"thing-type:mqtt:trigger_channel\">\n+\t\t<parameter-group name=\"transformations\">\n+\t\t\t<label>Transform Values</label>\n+\t\t\t<description>These configuration parameters allow you to alter a value before it is published to MQTT or before a\n+\t\t\t\treceived value is used in the trigger.</description>\n+\t\t\t<advanced>true</advanced>\n+\t\t</parameter-group>\n+\n+\t\t<parameter name=\"stateTopic\" type=\"text\" required=\"true\">\n+\t\t\t<label>MQTT Trigger Topic</label>\n+\t\t\t<description>An MQTT topic that this thing will subscribe to, to receive the trigger</description>\n+\t\t</parameter>\n+\t\t<parameter name=\"transformationPattern\" type=\"text\" groupName=\"transformations\">", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTY1NDM5OQ=="}, "originalCommit": {"oid": "125b8ff4ee22c02fb06f447059f8ce9db0ac72a9"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Njc4NTk4OQ==", "bodyText": "Just so I understand you right:\nIf a device sends the value fired on different topics (e.g. ../trigger/armed or ../trigger/disarmed) then it would be ok to map it to an OH trigger.\nIf the device sends different values (e.g. armed, disarmed) on a single topic ../trigger then it is not ok to handle this as an OH trigger.\nThat does not resonate with me.\nAnd how is reaching out to zigbee and convinces them that they are doing it in a bad way ;-)", "url": "https://github.com/openhab/openhab-addons/pull/6902#discussion_r376785989", "createdAt": "2020-02-09T13:55:38Z", "author": {"login": "jochen314"}, "path": "bundles/org.openhab.binding.mqtt.generic/src/main/resources/ESH-INF/config/trigger-channel-config.xml", "diffHunk": "@@ -0,0 +1,31 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<config-description:config-descriptions\n+\txmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+\txmlns:config-description=\"https://openhab.org/schemas/config-description/v1.0.0\"\n+\txsi:schemaLocation=\"https://openhab.org/schemas/config-description/v1.0.0 https://openhab.org/schemas/config-description-1.0.0.xsd\">\n+\n+\t<config-description uri=\"thing-type:mqtt:trigger_channel\">\n+\t\t<parameter-group name=\"transformations\">\n+\t\t\t<label>Transform Values</label>\n+\t\t\t<description>These configuration parameters allow you to alter a value before it is published to MQTT or before a\n+\t\t\t\treceived value is used in the trigger.</description>\n+\t\t\t<advanced>true</advanced>\n+\t\t</parameter-group>\n+\n+\t\t<parameter name=\"stateTopic\" type=\"text\" required=\"true\">\n+\t\t\t<label>MQTT Trigger Topic</label>\n+\t\t\t<description>An MQTT topic that this thing will subscribe to, to receive the trigger</description>\n+\t\t</parameter>\n+\t\t<parameter name=\"transformationPattern\" type=\"text\" groupName=\"transformations\">", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTY1NDM5OQ=="}, "originalCommit": {"oid": "125b8ff4ee22c02fb06f447059f8ce9db0ac72a9"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDgxMTg2Mw==", "bodyText": "I think the difference is: are these values pre-defined by the binding (like armed, disarmed in the case of the alarm system) or arbitrary values (like a temperature)?", "url": "https://github.com/openhab/openhab-addons/pull/6902#discussion_r380811863", "createdAt": "2020-02-18T17:08:28Z", "author": {"login": "J-N-K"}, "path": "bundles/org.openhab.binding.mqtt.generic/src/main/resources/ESH-INF/config/trigger-channel-config.xml", "diffHunk": "@@ -0,0 +1,31 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<config-description:config-descriptions\n+\txmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+\txmlns:config-description=\"https://openhab.org/schemas/config-description/v1.0.0\"\n+\txsi:schemaLocation=\"https://openhab.org/schemas/config-description/v1.0.0 https://openhab.org/schemas/config-description-1.0.0.xsd\">\n+\n+\t<config-description uri=\"thing-type:mqtt:trigger_channel\">\n+\t\t<parameter-group name=\"transformations\">\n+\t\t\t<label>Transform Values</label>\n+\t\t\t<description>These configuration parameters allow you to alter a value before it is published to MQTT or before a\n+\t\t\t\treceived value is used in the trigger.</description>\n+\t\t\t<advanced>true</advanced>\n+\t\t</parameter-group>\n+\n+\t\t<parameter name=\"stateTopic\" type=\"text\" required=\"true\">\n+\t\t\t<label>MQTT Trigger Topic</label>\n+\t\t\t<description>An MQTT topic that this thing will subscribe to, to receive the trigger</description>\n+\t\t</parameter>\n+\t\t<parameter name=\"transformationPattern\" type=\"text\" groupName=\"transformations\">", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTY1NDM5OQ=="}, "originalCommit": {"oid": "125b8ff4ee22c02fb06f447059f8ce9db0ac72a9"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDkyNzU4OA==", "bodyText": "Yes, but this here would be the place to do the pre-defining, right?\nThen we should require a list of text values, which define the trigger options.\nAnd we would need to check for any of the defined values before we activate the trigger.\nBTW, this is also not done for the triggers created currently by homie. There we use just any property, which is sent as not retained to create a trigger.", "url": "https://github.com/openhab/openhab-addons/pull/6902#discussion_r380927588", "createdAt": "2020-02-18T20:51:53Z", "author": {"login": "jochen314"}, "path": "bundles/org.openhab.binding.mqtt.generic/src/main/resources/ESH-INF/config/trigger-channel-config.xml", "diffHunk": "@@ -0,0 +1,31 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<config-description:config-descriptions\n+\txmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+\txmlns:config-description=\"https://openhab.org/schemas/config-description/v1.0.0\"\n+\txsi:schemaLocation=\"https://openhab.org/schemas/config-description/v1.0.0 https://openhab.org/schemas/config-description-1.0.0.xsd\">\n+\n+\t<config-description uri=\"thing-type:mqtt:trigger_channel\">\n+\t\t<parameter-group name=\"transformations\">\n+\t\t\t<label>Transform Values</label>\n+\t\t\t<description>These configuration parameters allow you to alter a value before it is published to MQTT or before a\n+\t\t\t\treceived value is used in the trigger.</description>\n+\t\t\t<advanced>true</advanced>\n+\t\t</parameter-group>\n+\n+\t\t<parameter name=\"stateTopic\" type=\"text\" required=\"true\">\n+\t\t\t<label>MQTT Trigger Topic</label>\n+\t\t\t<description>An MQTT topic that this thing will subscribe to, to receive the trigger</description>\n+\t\t</parameter>\n+\t\t<parameter name=\"transformationPattern\" type=\"text\" groupName=\"transformations\">", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTY1NDM5OQ=="}, "originalCommit": {"oid": "125b8ff4ee22c02fb06f447059f8ce9db0ac72a9"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjAzMzk1OA==", "bodyText": "So you say the transformation should be used to reduce the number of values (e.g. 0-10 = LOW, 11-15 = OK, 16-= HIGH)? That makes sense. @kaikreuzer, WDYT?", "url": "https://github.com/openhab/openhab-addons/pull/6902#discussion_r386033958", "createdAt": "2020-02-29T15:06:45Z", "author": {"login": "J-N-K"}, "path": "bundles/org.openhab.binding.mqtt.generic/src/main/resources/ESH-INF/config/trigger-channel-config.xml", "diffHunk": "@@ -0,0 +1,31 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<config-description:config-descriptions\n+\txmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+\txmlns:config-description=\"https://openhab.org/schemas/config-description/v1.0.0\"\n+\txsi:schemaLocation=\"https://openhab.org/schemas/config-description/v1.0.0 https://openhab.org/schemas/config-description-1.0.0.xsd\">\n+\n+\t<config-description uri=\"thing-type:mqtt:trigger_channel\">\n+\t\t<parameter-group name=\"transformations\">\n+\t\t\t<label>Transform Values</label>\n+\t\t\t<description>These configuration parameters allow you to alter a value before it is published to MQTT or before a\n+\t\t\t\treceived value is used in the trigger.</description>\n+\t\t\t<advanced>true</advanced>\n+\t\t</parameter-group>\n+\n+\t\t<parameter name=\"stateTopic\" type=\"text\" required=\"true\">\n+\t\t\t<label>MQTT Trigger Topic</label>\n+\t\t\t<description>An MQTT topic that this thing will subscribe to, to receive the trigger</description>\n+\t\t</parameter>\n+\t\t<parameter name=\"transformationPattern\" type=\"text\" groupName=\"transformations\">", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTY1NDM5OQ=="}, "originalCommit": {"oid": "125b8ff4ee22c02fb06f447059f8ce9db0ac72a9"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjEyODI1OQ==", "bodyText": "I could also be used to map different devices to the same events.\nLike one device sends the string 'clicked' while the other sends 'pushed'.\nThe rules listening for the triggers could then be independent of the these differences.\nI do not think about numbers here, but strings.", "url": "https://github.com/openhab/openhab-addons/pull/6902#discussion_r386128259", "createdAt": "2020-03-01T18:11:06Z", "author": {"login": "jochen314"}, "path": "bundles/org.openhab.binding.mqtt.generic/src/main/resources/ESH-INF/config/trigger-channel-config.xml", "diffHunk": "@@ -0,0 +1,31 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<config-description:config-descriptions\n+\txmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+\txmlns:config-description=\"https://openhab.org/schemas/config-description/v1.0.0\"\n+\txsi:schemaLocation=\"https://openhab.org/schemas/config-description/v1.0.0 https://openhab.org/schemas/config-description-1.0.0.xsd\">\n+\n+\t<config-description uri=\"thing-type:mqtt:trigger_channel\">\n+\t\t<parameter-group name=\"transformations\">\n+\t\t\t<label>Transform Values</label>\n+\t\t\t<description>These configuration parameters allow you to alter a value before it is published to MQTT or before a\n+\t\t\t\treceived value is used in the trigger.</description>\n+\t\t\t<advanced>true</advanced>\n+\t\t</parameter-group>\n+\n+\t\t<parameter name=\"stateTopic\" type=\"text\" required=\"true\">\n+\t\t\t<label>MQTT Trigger Topic</label>\n+\t\t\t<description>An MQTT topic that this thing will subscribe to, to receive the trigger</description>\n+\t\t</parameter>\n+\t\t<parameter name=\"transformationPattern\" type=\"text\" groupName=\"transformations\">", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTY1NDM5OQ=="}, "originalCommit": {"oid": "125b8ff4ee22c02fb06f447059f8ce9db0ac72a9"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTMxMDQxNA==", "bodyText": "Both examples like armed/disarmed and ranges of temperatures are actually states, so what isn't clear to me is why this isn't a state channel then? Triggers are only meant for the situations, where something like a button press occurs, which does not have any state. Triggers must not be misused for state change events.", "url": "https://github.com/openhab/openhab-addons/pull/6902#discussion_r389310414", "createdAt": "2020-03-07T20:36:39Z", "author": {"login": "kaikreuzer"}, "path": "bundles/org.openhab.binding.mqtt.generic/src/main/resources/ESH-INF/config/trigger-channel-config.xml", "diffHunk": "@@ -0,0 +1,31 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<config-description:config-descriptions\n+\txmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+\txmlns:config-description=\"https://openhab.org/schemas/config-description/v1.0.0\"\n+\txsi:schemaLocation=\"https://openhab.org/schemas/config-description/v1.0.0 https://openhab.org/schemas/config-description-1.0.0.xsd\">\n+\n+\t<config-description uri=\"thing-type:mqtt:trigger_channel\">\n+\t\t<parameter-group name=\"transformations\">\n+\t\t\t<label>Transform Values</label>\n+\t\t\t<description>These configuration parameters allow you to alter a value before it is published to MQTT or before a\n+\t\t\t\treceived value is used in the trigger.</description>\n+\t\t\t<advanced>true</advanced>\n+\t\t</parameter-group>\n+\n+\t\t<parameter name=\"stateTopic\" type=\"text\" required=\"true\">\n+\t\t\t<label>MQTT Trigger Topic</label>\n+\t\t\t<description>An MQTT topic that this thing will subscribe to, to receive the trigger</description>\n+\t\t</parameter>\n+\t\t<parameter name=\"transformationPattern\" type=\"text\" groupName=\"transformations\">", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTY1NDM5OQ=="}, "originalCommit": {"oid": "125b8ff4ee22c02fb06f447059f8ce9db0ac72a9"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTMxMjE3NQ==", "bodyText": "Please help me understand this!\n/**\n* System wide trigger {@link ChannelType} which triggers \"SHORT_PRESSED\", \"DOUBLE_PRESSED\" and \"LONG_PRESSED\"\n* events.\n*/\npublic static final ChannelType SYSTEM_BUTTON = ChannelTypeBuilder\n.trigger(new ChannelTypeUID(BINDING_ID, \"button\"), \"Button\")\n.withEventDescription(\nnew EventDescription(Arrays.asList(new EventOption(CommonTriggerEvents.SHORT_PRESSED, null),\nnew EventOption(CommonTriggerEvents.DOUBLE_PRESSED, null),\nnew EventOption(CommonTriggerEvents.LONG_PRESSED, null))))\n.build();\nA trigger take event options.\nThere is a trigger for the butten and the events are 'pressed', 'double pressed', and 'long pressed'.\nSo it does make sense for the mqtt trigger to use the value sent by the device as the event option, right?\nNow, why shouldn't we be able to map the values sent by differnt devices to common values?\nSuppose device one sends '0' for a click, '2' for a double click and '3' for a long press.\nSuppose another device sending 'click' for a click and 'hold' for a long press.\nWith a transformation we are able to map the event options of the different devices to common values, Then all the downstream components can handle the triggers without knowning different devices.", "url": "https://github.com/openhab/openhab-addons/pull/6902#discussion_r389312175", "createdAt": "2020-03-07T21:06:32Z", "author": {"login": "jochen314"}, "path": "bundles/org.openhab.binding.mqtt.generic/src/main/resources/ESH-INF/config/trigger-channel-config.xml", "diffHunk": "@@ -0,0 +1,31 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<config-description:config-descriptions\n+\txmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+\txmlns:config-description=\"https://openhab.org/schemas/config-description/v1.0.0\"\n+\txsi:schemaLocation=\"https://openhab.org/schemas/config-description/v1.0.0 https://openhab.org/schemas/config-description-1.0.0.xsd\">\n+\n+\t<config-description uri=\"thing-type:mqtt:trigger_channel\">\n+\t\t<parameter-group name=\"transformations\">\n+\t\t\t<label>Transform Values</label>\n+\t\t\t<description>These configuration parameters allow you to alter a value before it is published to MQTT or before a\n+\t\t\t\treceived value is used in the trigger.</description>\n+\t\t\t<advanced>true</advanced>\n+\t\t</parameter-group>\n+\n+\t\t<parameter name=\"stateTopic\" type=\"text\" required=\"true\">\n+\t\t\t<label>MQTT Trigger Topic</label>\n+\t\t\t<description>An MQTT topic that this thing will subscribe to, to receive the trigger</description>\n+\t\t</parameter>\n+\t\t<parameter name=\"transformationPattern\" type=\"text\" groupName=\"transformations\">", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTY1NDM5OQ=="}, "originalCommit": {"oid": "125b8ff4ee22c02fb06f447059f8ce9db0ac72a9"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTMxNDA0Mg==", "bodyText": "Yes, if we are talking about push buttons that are integrated via MQTT, triggers are fine. What I was saying above was that all arguments were done with examples that do NOT fit to a trigger. Likewise the example given in the code, which would clearly be better modelled as a state channel instead of a trigger.\nFurthermore, this parameter has \"state\" in its name, which hints at a state channel.", "url": "https://github.com/openhab/openhab-addons/pull/6902#discussion_r389314042", "createdAt": "2020-03-07T21:38:13Z", "author": {"login": "kaikreuzer"}, "path": "bundles/org.openhab.binding.mqtt.generic/src/main/resources/ESH-INF/config/trigger-channel-config.xml", "diffHunk": "@@ -0,0 +1,31 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<config-description:config-descriptions\n+\txmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+\txmlns:config-description=\"https://openhab.org/schemas/config-description/v1.0.0\"\n+\txsi:schemaLocation=\"https://openhab.org/schemas/config-description/v1.0.0 https://openhab.org/schemas/config-description-1.0.0.xsd\">\n+\n+\t<config-description uri=\"thing-type:mqtt:trigger_channel\">\n+\t\t<parameter-group name=\"transformations\">\n+\t\t\t<label>Transform Values</label>\n+\t\t\t<description>These configuration parameters allow you to alter a value before it is published to MQTT or before a\n+\t\t\t\treceived value is used in the trigger.</description>\n+\t\t\t<advanced>true</advanced>\n+\t\t</parameter-group>\n+\n+\t\t<parameter name=\"stateTopic\" type=\"text\" required=\"true\">\n+\t\t\t<label>MQTT Trigger Topic</label>\n+\t\t\t<description>An MQTT topic that this thing will subscribe to, to receive the trigger</description>\n+\t\t</parameter>\n+\t\t<parameter name=\"transformationPattern\" type=\"text\" groupName=\"transformations\">", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTY1NDM5OQ=="}, "originalCommit": {"oid": "125b8ff4ee22c02fb06f447059f8ce9db0ac72a9"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTMxNDQ1Ng==", "bodyText": "So its is the description...\nToo much copy and paste....", "url": "https://github.com/openhab/openhab-addons/pull/6902#discussion_r389314456", "createdAt": "2020-03-07T21:45:36Z", "author": {"login": "jochen314"}, "path": "bundles/org.openhab.binding.mqtt.generic/src/main/resources/ESH-INF/config/trigger-channel-config.xml", "diffHunk": "@@ -0,0 +1,31 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<config-description:config-descriptions\n+\txmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+\txmlns:config-description=\"https://openhab.org/schemas/config-description/v1.0.0\"\n+\txsi:schemaLocation=\"https://openhab.org/schemas/config-description/v1.0.0 https://openhab.org/schemas/config-description-1.0.0.xsd\">\n+\n+\t<config-description uri=\"thing-type:mqtt:trigger_channel\">\n+\t\t<parameter-group name=\"transformations\">\n+\t\t\t<label>Transform Values</label>\n+\t\t\t<description>These configuration parameters allow you to alter a value before it is published to MQTT or before a\n+\t\t\t\treceived value is used in the trigger.</description>\n+\t\t\t<advanced>true</advanced>\n+\t\t</parameter-group>\n+\n+\t\t<parameter name=\"stateTopic\" type=\"text\" required=\"true\">\n+\t\t\t<label>MQTT Trigger Topic</label>\n+\t\t\t<description>An MQTT topic that this thing will subscribe to, to receive the trigger</description>\n+\t\t</parameter>\n+\t\t<parameter name=\"transformationPattern\" type=\"text\" groupName=\"transformations\">", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTY1NDM5OQ=="}, "originalCommit": {"oid": "125b8ff4ee22c02fb06f447059f8ce9db0ac72a9"}, "originalPosition": 19}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxMjI4NDczOnYy", "diffSide": "RIGHT", "path": "bundles/org.openhab.binding.mqtt.generic/src/main/resources/ESH-INF/config/trigger-channel-config.xml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wN1QyMTozOTo0NVrOFzR2Sw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wN1QyMTozOTo0NVrOFzR2Sw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTMxNDEyMw==", "bodyText": "\"before it is published to MQTT\"? A trigger channel cannot be used to send any information outwards - I guess this statement should be removed.", "url": "https://github.com/openhab/openhab-addons/pull/6902#discussion_r389314123", "createdAt": "2020-03-07T21:39:45Z", "author": {"login": "kaikreuzer"}, "path": "bundles/org.openhab.binding.mqtt.generic/src/main/resources/ESH-INF/config/trigger-channel-config.xml", "diffHunk": "@@ -0,0 +1,31 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<config-description:config-descriptions\n+\txmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+\txmlns:config-description=\"https://openhab.org/schemas/config-description/v1.0.0\"\n+\txsi:schemaLocation=\"https://openhab.org/schemas/config-description/v1.0.0 https://openhab.org/schemas/config-description-1.0.0.xsd\">\n+\n+\t<config-description uri=\"thing-type:mqtt:trigger_channel\">\n+\t\t<parameter-group name=\"transformations\">\n+\t\t\t<label>Transform Values</label>\n+\t\t\t<description>These configuration parameters allow you to alter a value before it is published to MQTT or before a", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "125b8ff4ee22c02fb06f447059f8ce9db0ac72a9"}, "originalPosition": 10}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxMjI5MDMxOnYy", "diffSide": "RIGHT", "path": "bundles/org.openhab.binding.mqtt.generic/src/main/resources/ESH-INF/config/trigger-channel-config.xml", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wN1QyMTo1MTo1OVrOFzR5Ag==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wN1QyMTo1MzozMFrOFzR5RQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTMxNDgxOA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\tfor example, the MAP transformation \n          \n          \n            \n            \t\t\te.g. the MAP transformation.", "url": "https://github.com/openhab/openhab-addons/pull/6902#discussion_r389314818", "createdAt": "2020-03-07T21:51:59Z", "author": {"login": "kaikreuzer"}, "path": "bundles/org.openhab.binding.mqtt.generic/src/main/resources/ESH-INF/config/trigger-channel-config.xml", "diffHunk": "@@ -20,9 +19,9 @@\n \t\t\t<label>Incoming Value Transformations</label>\n \t\t\t<description><![CDATA[\n \t\t\tApplies transformations to an incoming MQTT topic value.\n-\t\t\tA transformation example for a received JSON would be \"JSONPATH:$.device.status.temperature\" for\n-\t\t\ta json {device: {status: { temperature: 23.2 }}}.\n-\n+\t\t\tThis can be used to map the events sent by the device to common values for all devices using,\n+\t\t\tfor example, the MAP transformation ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e0bb81498abe4f59c7aea5aa5298638cd7fbff28"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTMxNDg4NQ==", "bodyText": "Sorry, had just deleted my first suggestion and replaced it while you were merging it \ud83d\ude1f. Never mind, all fine now, thanks.", "url": "https://github.com/openhab/openhab-addons/pull/6902#discussion_r389314885", "createdAt": "2020-03-07T21:53:30Z", "author": {"login": "kaikreuzer"}, "path": "bundles/org.openhab.binding.mqtt.generic/src/main/resources/ESH-INF/config/trigger-channel-config.xml", "diffHunk": "@@ -20,9 +19,9 @@\n \t\t\t<label>Incoming Value Transformations</label>\n \t\t\t<description><![CDATA[\n \t\t\tApplies transformations to an incoming MQTT topic value.\n-\t\t\tA transformation example for a received JSON would be \"JSONPATH:$.device.status.temperature\" for\n-\t\t\ta json {device: {status: { temperature: 23.2 }}}.\n-\n+\t\t\tThis can be used to map the events sent by the device to common values for all devices using,\n+\t\t\tfor example, the MAP transformation ", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTMxNDgxOA=="}, "originalCommit": {"oid": "e0bb81498abe4f59c7aea5aa5298638cd7fbff28"}, "originalPosition": 18}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxNjgyMTk0OnYy", "diffSide": "RIGHT", "path": "bundles/org.openhab.binding.mqtt.generic/src/main/java/org/openhab/binding/mqtt/generic/values/ValueFactory.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOVQyMjozNzoxN1rOFz7rzA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQyMjowNTo0NVrOF0iq9A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTk5OTU2NA==", "bodyText": "Is this really the best place to be changing the config?", "url": "https://github.com/openhab/openhab-addons/pull/6902#discussion_r389999564", "createdAt": "2020-03-09T22:37:17Z", "author": {"login": "cpmeister"}, "path": "bundles/org.openhab.binding.mqtt.generic/src/main/java/org/openhab/binding/mqtt/generic/values/ValueFactory.java", "diffHunk": "@@ -67,6 +67,10 @@ public static Value createValueState(ChannelConfig config, String channelTypeID)\n             case MqttBindingConstants.ROLLERSHUTTER:\n                 value = new RollershutterValue(config.on, config.off, config.stop);\n                 break;\n+            case MqttBindingConstants.TRIGGER:\n+                config.trigger = true;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e113b342cfdd2d41b03b594fde5b97299eaa132d"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDYzODMyNA==", "bodyText": "I am not sure. Do you have a better idea?\nCan we define a hidden constant in the config.xml?", "url": "https://github.com/openhab/openhab-addons/pull/6902#discussion_r390638324", "createdAt": "2020-03-10T22:05:45Z", "author": {"login": "jochen314"}, "path": "bundles/org.openhab.binding.mqtt.generic/src/main/java/org/openhab/binding/mqtt/generic/values/ValueFactory.java", "diffHunk": "@@ -67,6 +67,10 @@ public static Value createValueState(ChannelConfig config, String channelTypeID)\n             case MqttBindingConstants.ROLLERSHUTTER:\n                 value = new RollershutterValue(config.on, config.off, config.stop);\n                 break;\n+            case MqttBindingConstants.TRIGGER:\n+                config.trigger = true;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTk5OTU2NA=="}, "originalCommit": {"oid": "e113b342cfdd2d41b03b594fde5b97299eaa132d"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1124, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}