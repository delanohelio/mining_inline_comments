{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc5MjY3MjI4", "number": 8393, "title": "[radiothermostat] Added Absolute Setpoint Mode", "bodyText": "When controlled remotely Radio Thermostat's can function in 2 modes.  In temporary mode setpoint changes will be temporary; with the thermostat returning to run its program after a period of time.  In absolute mode setpoint changes are permanent.  The thermostat will maintain the given setpoint temperature until it is changed, completely ignoring the program.  With OpenHab controlling the thermostat it is often not desirable to have the thermostat run its own program.  Adding the absolute setpoint mode allows users to control the thermostat setpoint entirely through OpenHab.", "createdAt": "2020-09-04T04:20:31Z", "url": "https://github.com/openhab/openhab-addons/pull/8393", "merged": true, "mergeCommit": {"oid": "811d329a590f314c9654fafb5758d5ce839e1b88"}, "closed": true, "closedAt": "2020-09-09T14:08:56Z", "author": {"login": "silverfunk"}, "timelineItems": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdFdlMqAH2gAyNDc5MjY3MjI4OmVkZDIyMmYwZWUwZjZjOGNmNjVjMTExYzI2MTQ2MjY4NGI1NzI3Nzg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdHGQhfgFqTQ4NDY5NzU3Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "edd222f0ee0f6c8cf65c111c261462684b572778", "author": {"user": {"login": "silverfunk", "name": null}}, "url": "https://github.com/openhab/openhab-addons/commit/edd222f0ee0f6c8cf65c111c261462684b572778", "committedDate": "2020-09-04T04:34:44Z", "message": "Added absolute control mode to the Radio Thermostat binding.\n\nSigned-off-by: Ted Jordan <silverfunk@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "13475ea8dd4533ab9a871a74ea24351c6fbbb750", "author": {"user": {"login": "silverfunk", "name": null}}, "url": "https://github.com/openhab/openhab-addons/commit/13475ea8dd4533ab9a871a74ea24351c6fbbb750", "committedDate": "2020-09-04T04:34:44Z", "message": "Explained the absolute parameter is optional.\n\nSigned-off-by: Ted Jordan <silverfunk@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgyODUwMzQ2", "url": "https://github.com/openhab/openhab-addons/pull/8393#pullrequestreview-482850346", "createdAt": "2020-09-04T17:58:23Z", "commit": {"oid": "13475ea8dd4533ab9a871a74ea24351c6fbbb750"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQxNzo1ODoyNFrOHNXLZg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQxNzo1ODoyNFrOHNXLZg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzc3MzI4Ng==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\t\t<label>Run in absolute setpoint mode</label>\n          \n          \n            \n            \t\t\t\t<label>Run in Absolute Setpoint Mode</label>", "url": "https://github.com/openhab/openhab-addons/pull/8393#discussion_r483773286", "createdAt": "2020-09-04T17:58:24Z", "author": {"login": "cpmeister"}, "path": "bundles/org.openhab.binding.radiothermostat/src/main/resources/ESH-INF/thing/thing-types.xml", "diffHunk": "@@ -58,6 +58,11 @@\n \t\t\t\t<description>Optional Flag to Disable the Retrieval of Run-time Data from the Thermostat</description>\n \t\t\t\t<default>false</default>\n \t\t\t</parameter>\n+\t\t\t<parameter name=\"absolute\" type=\"boolean\">\n+\t\t\t\t<label>Run in absolute setpoint mode</label>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "13475ea8dd4533ab9a871a74ea24351c6fbbb750"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgzNzUwMzgx", "url": "https://github.com/openhab/openhab-addons/pull/8393#pullrequestreview-483750381", "createdAt": "2020-09-08T01:56:34Z", "commit": {"oid": "13475ea8dd4533ab9a871a74ea24351c6fbbb750"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQwMTo1NjozNFrOHOKOzQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQwMTo1NjozNFrOHOKOzQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDYwOTc0MQ==", "bodyText": "spelling: 'permanent'", "url": "https://github.com/openhab/openhab-addons/pull/8393#discussion_r484609741", "createdAt": "2020-09-08T01:56:34Z", "author": {"login": "mlobstein"}, "path": "bundles/org.openhab.binding.radiothermostat/README.md", "diffHunk": "@@ -32,13 +32,14 @@ The binding has no configuration options, all configuration is done at Thing lev\n \n The thing has a few configuration parameters:\n \n-|    Parameter    | Description                                                                                               |\n-|-----------------|-----------------------------------------------------------------------------------------------------------|\n-| hostName        | The host name or IP address of the thermostat. Mandatory.                                                 |\n-| refresh         | Overrides the refresh interval of the thermostat data. Optional, the default is 2 minutes.                |\n-| logRefresh      | Overrides the refresh interval of the run-time logs & humidity data. Optional, the default is 10 minutes. |\n-| isCT80          | Flag to enable additional features only available on the CT80 thermostat. Optional, the default is false. |\n-| disableLogs     | Disable retrieval of run-time logs from the thermostat. Optional, the default is false.                   |\n+|    Parameter    | Description                                                                                                                                                                                                                                                                              |\n+|-----------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n+| hostName        | The host name or IP address of the thermostat. Mandatory.                                                                                                                                                                                                                                |\n+| refresh         | Overrides the refresh interval of the thermostat data. Optional, the default is 2 minutes.                                                                                                                                                                                               |\n+| logRefresh      | Overrides the refresh interval of the run-time logs & humidity data. Optional, the default is 10 minutes.                                                                                                                                                                                |\n+| isCT80          | Flag to enable additional features only available on the CT80 thermostat. Optional, the default is false.                                                                                                                                                                                |\n+| disableLogs     | Disable retrieval of run-time logs from the thermostat. Optional, the default is false.                                                                                                                                                                                                  |\n+| absolute        | Controls temporary or absolute mode. When false setpoint changes are temporary; the thermostat will return to its program after a time. When true setpoint changes are perminant; the thermostat will ignore its program maintaining the given setpoint. Optional, the default is false. |", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "13475ea8dd4533ab9a871a74ea24351c6fbbb750"}, "originalPosition": 18}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ed64593863d0fa8a86831c4c184566757a644d9c", "author": {"user": {"login": "silverfunk", "name": null}}, "url": "https://github.com/openhab/openhab-addons/commit/ed64593863d0fa8a86831c4c184566757a644d9c", "committedDate": "2020-09-08T02:41:02Z", "message": "Update bundles/org.openhab.binding.radiothermostat/src/main/resources/ESH-INF/thing/thing-types.xml\n\nCo-authored-by: cpmeister <mistercpp2000@gmail.com>\nSigned-off-by: Ted Jordan <silverfunk@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a6c91b2b5bedae5e1b6ef0405e30ebcbee9e10e4", "author": {"user": {"login": "silverfunk", "name": null}}, "url": "https://github.com/openhab/openhab-addons/commit/a6c91b2b5bedae5e1b6ef0405e30ebcbee9e10e4", "committedDate": "2020-09-08T02:46:33Z", "message": "Fixed the spelling of permanent.\nCo-authored-by: mlobstein\nSigned-off-by: Ted Jordan <silverfunk@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg0MTE3MzU3", "url": "https://github.com/openhab/openhab-addons/pull/8393#pullrequestreview-484117357", "createdAt": "2020-09-08T13:12:15Z", "commit": {"oid": "a6c91b2b5bedae5e1b6ef0405e30ebcbee9e10e4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQxMzoxMjoxNVrOHOcKGw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQxMzoxMjoxNVrOHOcKGw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDkwMzQ1MQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\t<parameter name=\"absolute\" type=\"boolean\">\n          \n          \n            \n            \t\t\t\t<label>Run in Absolute Setpoint Mode</label>\n          \n          \n            \n            \t\t\t\t<description>Optional Flag to run in absolute or temporary setpoint mode</description>\n          \n          \n            \n            \t\t\t\t<default>false</default>\n          \n          \n            \n            \t\t\t</parameter>\n          \n          \n            \n            \t\t\t<parameter name=\"setpointMode\" type=\"text\">\n          \n          \n            \n            \t\t\t\t<label>Setpoint Mode</label>\n          \n          \n            \n            \t\t\t\t<description>Run in absolute or temporary setpoint mode</description>\n          \n          \n            \n            \t\t\t\t<default>temporary</default>\n          \n          \n            \n            \t\t\t\t<options>\n          \n          \n            \n            \t\t\t\t    <option value=\"absolute\">Absolute</option>\n          \n          \n            \n            \t\t\t\t    <option value=\"temporary\">Temporary</option>\n          \n          \n            \n            \t\t\t\t</options>\n          \n          \n            \n            \t\t\t</parameter>", "url": "https://github.com/openhab/openhab-addons/pull/8393#discussion_r484903451", "createdAt": "2020-09-08T13:12:15Z", "author": {"login": "Hilbrand"}, "path": "bundles/org.openhab.binding.radiothermostat/src/main/resources/ESH-INF/thing/thing-types.xml", "diffHunk": "@@ -58,6 +58,11 @@\n \t\t\t\t<description>Optional Flag to Disable the Retrieval of Run-time Data from the Thermostat</description>\n \t\t\t\t<default>false</default>\n \t\t\t</parameter>\n+\t\t\t<parameter name=\"absolute\" type=\"boolean\">\n+\t\t\t\t<label>Run in Absolute Setpoint Mode</label>\n+\t\t\t\t<description>Optional Flag to run in absolute or temporary setpoint mode</description>\n+\t\t\t\t<default>false</default>\n+\t\t\t</parameter>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a6c91b2b5bedae5e1b6ef0405e30ebcbee9e10e4"}, "originalPosition": 8}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "507140fe848b57c9206c2cf6d2a28eb968135657", "author": {"user": {"login": "silverfunk", "name": null}}, "url": "https://github.com/openhab/openhab-addons/commit/507140fe848b57c9206c2cf6d2a28eb968135657", "committedDate": "2020-09-09T02:00:09Z", "message": "Refactored code to removed suppressed warnings.\nChanged the absolute parameter to setpointMode.\n\nSigned-off-by: silverfunk <silverfunk@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d15ea1b5db280a26719c0d5a237c9ab7cf6ebf7e", "author": {"user": {"login": "silverfunk", "name": null}}, "url": "https://github.com/openhab/openhab-addons/commit/d15ea1b5db280a26719c0d5a237c9ab7cf6ebf7e", "committedDate": "2020-09-09T02:16:34Z", "message": "Fixed a few code style errors.\n\nSigned-off-by: silverfunk <silverfunk@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg0NjE0NzI4", "url": "https://github.com/openhab/openhab-addons/pull/8393#pullrequestreview-484614728", "createdAt": "2020-09-09T02:13:53Z", "commit": {"oid": "507140fe848b57c9206c2cf6d2a28eb968135657"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQwMjoxMzo1M1rOHO0Jqg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQwMjoxMzo1M1rOHO0Jqg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTI5NjU1NA==", "bodyText": "Should probably be hostName.equals(\"\"), sorry about that.", "url": "https://github.com/openhab/openhab-addons/pull/8393#discussion_r485296554", "createdAt": "2020-09-09T02:13:53Z", "author": {"login": "mlobstein"}, "path": "bundles/org.openhab.binding.radiothermostat/src/main/java/org/openhab/binding/radiothermostat/internal/handler/RadioThermostatHandler.java", "diffHunk": "@@ -87,37 +86,66 @@\n     private @Nullable ScheduledFuture<?> refreshJob;\n     private @Nullable ScheduledFuture<?> logRefreshJob;\n \n-    private @Nullable RadioThermostatConfiguration config;\n+    private int refreshPeriod = DEFAULT_REFRESH_PERIOD;\n+    private int logRefreshPeriod = DEFAULT_LOG_REFRESH_PERIOD;\n+    private boolean isCT80 = false;\n+    private boolean disableLogs = false;\n+    private String setpointCmdKeyPrefix = \"t_\";\n \n-    public RadioThermostatHandler(Thing thing,\n-            @Nullable RadioThermostatStateDescriptionProvider stateDescriptionProvider, HttpClient httpClient) {\n+    public RadioThermostatHandler(Thing thing, RadioThermostatStateDescriptionProvider stateDescriptionProvider,\n+            HttpClient httpClient) {\n         super(thing);\n         this.stateDescriptionProvider = stateDescriptionProvider;\n         gson = new Gson();\n         connector = new RadioThermostatConnector(httpClient);\n     }\n \n-    @SuppressWarnings(\"null\")\n     @Override\n     public void initialize() {\n         logger.debug(\"Initializing RadioThermostat handler.\");\n-        this.config = getConfigAs(RadioThermostatConfiguration.class);\n-        connector.setThermostatHostName(config.hostName);\n+        RadioThermostatConfiguration config = getConfigAs(RadioThermostatConfiguration.class);\n+\n+        final String hostName = config.hostName;\n+        final Integer refresh = config.refresh;\n+        final Integer logRefresh = config.logRefresh;\n+        this.isCT80 = config.isCT80;\n+        this.disableLogs = config.disableLogs;\n+\n+        if (hostName == null || hostName == \"\") {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "507140fe848b57c9206c2cf6d2a28eb968135657"}, "originalPosition": 45}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg0NjE2Mjk5", "url": "https://github.com/openhab/openhab-addons/pull/8393#pullrequestreview-484616299", "createdAt": "2020-09-09T02:19:12Z", "commit": {"oid": "d15ea1b5db280a26719c0d5a237c9ab7cf6ebf7e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQwMjoxOToxMlrOHO0OzQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQwMjoxOToxMlrOHO0OzQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTI5Nzg2OQ==", "bodyText": "nice", "url": "https://github.com/openhab/openhab-addons/pull/8393#discussion_r485297869", "createdAt": "2020-09-09T02:19:12Z", "author": {"login": "mlobstein"}, "path": "bundles/org.openhab.binding.radiothermostat/src/main/java/org/openhab/binding/radiothermostat/internal/handler/RadioThermostatHandler.java", "diffHunk": "@@ -248,10 +278,10 @@ public void handleCommand(ChannelUID channelUID, Command command) {\n                 case SET_POINT:\n                     String cmdKey = null;\n                     if (rthermData.getThermostatData().getMode() == 1) {\n-                        cmdKey = \"t_heat\";\n+                        cmdKey = this.setpointCmdKeyPrefix + \"heat\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d15ea1b5db280a26719c0d5a237c9ab7cf6ebf7e"}, "originalPosition": 162}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "802d7fbafdc069072a9af2f37d6daf75b70b7792", "author": {"user": {"login": "silverfunk", "name": null}}, "url": "https://github.com/openhab/openhab-addons/commit/802d7fbafdc069072a9af2f37d6daf75b70b7792", "committedDate": "2020-09-09T03:20:11Z", "message": "Changed a string comparison to use the equals() method.\n\nSigned-off-by: silverfunk <silverfunk@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9f91747870e7d0b66bd5e82540632cf229e0733f", "author": {"user": {"login": "silverfunk", "name": null}}, "url": "https://github.com/openhab/openhab-addons/commit/9f91747870e7d0b66bd5e82540632cf229e0733f", "committedDate": "2020-09-09T03:32:16Z", "message": "Forgot to leave the check for null in place.\n\nSigned-off-by: silverfunk <silverfunk@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg0NjczNDMy", "url": "https://github.com/openhab/openhab-addons/pull/8393#pullrequestreview-484673432", "createdAt": "2020-09-09T05:35:48Z", "commit": {"oid": "9f91747870e7d0b66bd5e82540632cf229e0733f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg0Njk3NTc3", "url": "https://github.com/openhab/openhab-addons/pull/8393#pullrequestreview-484697577", "createdAt": "2020-09-09T06:32:11Z", "commit": {"oid": "9f91747870e7d0b66bd5e82540632cf229e0733f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4796, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}