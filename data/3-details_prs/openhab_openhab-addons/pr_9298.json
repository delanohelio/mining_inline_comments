{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM0NjQ0NDA0", "number": 9298, "title": "[deconz] improve websocket connection process", "bodyText": "Related to #9264 (hopefully fixes it)\nIn rare situations (when the connection was not established before the thing was updated) it could happen that the websocket connection tried to re-connect even though it should not.", "createdAt": "2020-12-08T18:36:31Z", "url": "https://github.com/openhab/openhab-addons/pull/9298", "merged": true, "mergeCommit": {"oid": "654db27939bccc7f12a5000ab20bef417ee1f05c"}, "closed": true, "closedAt": "2020-12-09T22:04:41Z", "author": {"login": "J-N-K"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdkOlmdgH2gAyNTM0NjQ0NDA0Ojg2ZGQzMmQ4OTVhNDcyZTI2MmQ3ODZhM2EzZDVkMzQxMDU0ZGUwNzc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdkkQlEAFqTU0ODU1NDQxNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "86dd32d895a472e262d786a3a3d5d341054de077", "author": {"user": {"login": "J-N-K", "name": null}}, "url": "https://github.com/openhab/openhab-addons/commit/86dd32d895a472e262d786a3a3d5d341054de077", "committedDate": "2020-12-08T18:38:15Z", "message": "improve websocket connection\n\nSigned-off-by: Jan N. Klug <jan.n.klug@rub.de>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "09efc3c17f6b2b7164ff24ed63efbdb59b273395", "author": {"user": {"login": "J-N-K", "name": null}}, "url": "https://github.com/openhab/openhab-addons/commit/09efc3c17f6b2b7164ff24ed63efbdb59b273395", "committedDate": "2020-12-08T11:19:36Z", "message": "improve websocket connection"}, "afterCommit": {"oid": "86dd32d895a472e262d786a3a3d5d341054de077", "author": {"user": {"login": "J-N-K", "name": null}}, "url": "https://github.com/openhab/openhab-addons/commit/86dd32d895a472e262d786a3a3d5d341054de077", "committedDate": "2020-12-08T18:38:15Z", "message": "improve websocket connection\n\nSigned-off-by: Jan N. Klug <jan.n.klug@rub.de>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4eed74b714acab25aaa2faa892337b37031acfd0", "author": {"user": {"login": "J-N-K", "name": null}}, "url": "https://github.com/openhab/openhab-addons/commit/4eed74b714acab25aaa2faa892337b37031acfd0", "committedDate": "2020-12-08T20:30:31Z", "message": "improvement\n\nSigned-off-by: Jan N. Klug <jan.n.klug@rub.de>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ3NzQyODUx", "url": "https://github.com/openhab/openhab-addons/pull/9298#pullrequestreview-547742851", "createdAt": "2020-12-09T00:23:57Z", "commit": {"oid": "86dd32d895a472e262d786a3a3d5d341054de077"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQwMDoyMzo1OFrOIB8dFw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQwMDoyMzo1OFrOIB8dFw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODkwOTk3NQ==", "bodyText": "Just a minor suggestion.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                private ConnectionState connected = ConnectionState.DISCONNECTED;\n          \n          \n            \n                private ConnectionState connectionState = ConnectionState.DISCONNECTED;", "url": "https://github.com/openhab/openhab-addons/pull/9298#discussion_r538909975", "createdAt": "2020-12-09T00:23:58Z", "author": {"login": "cpmeister"}, "path": "bundles/org.openhab.binding.deconz/src/main/java/org/openhab/binding/deconz/internal/netutils/WebSocketConnection.java", "diffHunk": "@@ -51,29 +52,33 @@\n     private final Logger logger = LoggerFactory.getLogger(WebSocketConnection.class);\n \n     private final WebSocketClient client;\n+    private final String socketName;\n+    private final Gson gson;\n+\n     private final WebSocketConnectionListener connectionListener;\n     private final Map<Map.Entry<ResourceType, String>, WebSocketMessageListener> listeners = new ConcurrentHashMap<>();\n \n-    private final Gson gson;\n-    private boolean connected = false;\n+    private ConnectionState connected = ConnectionState.DISCONNECTED;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "86dd32d895a472e262d786a3a3d5d341054de077"}, "originalPosition": 20}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b8fb58ef36b50702ba251a170cc89eb65b5dd271", "author": {"user": {"login": "J-N-K", "name": null}}, "url": "https://github.com/openhab/openhab-addons/commit/b8fb58ef36b50702ba251a170cc89eb65b5dd271", "committedDate": "2020-12-09T15:23:20Z", "message": "address review comment\n\nSigned-off-by: Jan N. Klug <jan.n.klug@rub.de>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ4NTU0NDE1", "url": "https://github.com/openhab/openhab-addons/pull/9298#pullrequestreview-548554415", "createdAt": "2020-12-09T19:53:12Z", "commit": {"oid": "b8fb58ef36b50702ba251a170cc89eb65b5dd271"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3691, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}