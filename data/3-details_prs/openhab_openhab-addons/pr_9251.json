{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMzMTA5OTYx", "number": 9251, "title": "[telegram] Add event channels and Answer overload", "bodyText": "This adds 4 event trigger channels that fire when messages or query callbacks are received, presenting the entire message as the payload for easier use in rules.\n\nmessageEvent provides simplified message properties\nmessageRawEvent provides the entire message object from the Telegram library\ncallbackEvent provides simplified callback query properties\ncallbackRawEvent provides the entire callback query object from the Telegram library\n\nAdditionally, a new overload to the sendTelegramAnswer action was added that allows you to provide the callbackId and messageId that would normally be retrieved by a lookup in the handler. This can be used to answer queries that were sent before openHAB restarted by saving the callbackId and messageId outside the binding, or to answer queries directly instead of via replyId. callbackId and messageId are provided in both callback events.\nI have tested all changes locally using rules.\nThis is my first time building anything Java and there is one thing that was/is not working in the build that I was not able to figure out. Both OH-INF/binding/binding.xml and OH-INF/thing/thing-types.xml are empty in the built JARs, regardless of which build process I run. Is this normal for local builds? I will be checking the automated build to see if the results are the same. Any insight would be much appreciated.\n\nAnother question I had is about how many things should go into one PR. I am working on other changes that will add a new action and modify the return values for actions to provide data that the new action would use. It won't be a breaking change, as the return values will still be falsy if the action failed and true-ish if it succeeds. Seems the concept of falsy doesn't exist in a strictly typed language like Java, so changing the return type of the actions with be a breaking change.\nShould I include those commits in this PR for consiceness, or make a separate PR for them?", "createdAt": "2020-12-05T23:34:09Z", "url": "https://github.com/openhab/openhab-addons/pull/9251", "merged": true, "mergeCommit": {"oid": "51cb1aabd509c48dd65d1523b8c393cb6b3600bc"}, "closed": true, "closedAt": "2021-09-18T13:08:00Z", "author": {"login": "CrazyIvan359"}, "timelineItems": {"totalCount": 39, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdjUsCNgH2gAyNTMzMTA5OTYxOjdkMWQ0NzI3Nzc5ODJhYzZmODYyZjFlOWE4OTEyNWJmZjI5YWJlMDY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABe_kElAAFqTc1ODA2MTA5MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "7d1d472777982ac6f862f1e9a89125bff29abe06", "author": {"user": {"login": "CrazyIvan359", "name": "Michael Murton"}}, "url": "https://github.com/openhab/openhab-addons/commit/7d1d472777982ac6f862f1e9a89125bff29abe06", "committedDate": "2020-12-05T23:10:47Z", "message": "Add event channels and Answer overload\n\nSigned-off-by: Michael Murton <6764025+CrazyIvan359@users.noreply.github.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ2NDk4ODUw", "url": "https://github.com/openhab/openhab-addons/pull/9251#pullrequestreview-546498850", "createdAt": "2020-12-07T20:12:52Z", "commit": {"oid": "7d1d472777982ac6f862f1e9a89125bff29abe06"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QyMDoxMjo1MlrOIA4uBA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QyMDoxNTo0MlrOIA40RQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzgwMDE5Ng==", "bodyText": "Please cache callbackQuery.data().split(\" \", 2) to a local variable so it isn't called twice.", "url": "https://github.com/openhab/openhab-addons/pull/9251#discussion_r537800196", "createdAt": "2020-12-07T20:12:52Z", "author": {"login": "cpmeister"}, "path": "bundles/org.openhab.binding.telegram/src/main/java/org/openhab/binding/telegram/internal/TelegramHandler.java", "diffHunk": "@@ -300,28 +404,44 @@ private int handleUpdates(List<Update> updates) {\n                 }\n \n                 // process metadata\n-                lastMessageDate = message.date();\n-                lastMessageFirstName = message.from().firstName();\n-                lastMessageLastName = message.from().lastName();\n-                lastMessageUsername = message.from().username();\n-            } else if (update.callbackQuery() != null && update.callbackQuery().message() != null\n-                    && update.callbackQuery().message().text() != null) {\n-                String[] callbackData = update.callbackQuery().data().split(\" \", 2);\n+                if (lastMessageURL != null || lastMessageText != null) {\n+                    lastMessageDate = message.date();\n+                    lastMessageFirstName = message.from().firstName();\n+                    lastMessageLastName = message.from().lastName();\n+                    lastMessageUsername = message.from().username();\n+                }\n+            } else if (callbackQuery != null && callbackQuery.message() != null\n+                    && callbackQuery.message().text() != null) {\n+                String[] callbackData = callbackQuery.data().split(\" \", 2);\n \n                 if (callbackData.length == 2) {\n                     replyId = callbackData[0];\n                     lastMessageText = callbackData[1];\n-                    lastMessageDate = update.callbackQuery().message().date();\n-                    lastMessageFirstName = update.callbackQuery().from().firstName();\n-                    lastMessageLastName = update.callbackQuery().from().lastName();\n-                    lastMessageUsername = update.callbackQuery().from().username();\n-                    chatId = update.callbackQuery().message().chat().id();\n-                    replyIdToCallbackId.put(new ReplyKey(chatId, replyId), update.callbackQuery().id());\n-                    logger.debug(\"Received callbackId {} for chatId {} and replyId {}\", update.callbackQuery().id(),\n-                            chatId, replyId);\n+                    lastMessageDate = callbackQuery.message().date();\n+                    lastMessageFirstName = callbackQuery.from().firstName();\n+                    lastMessageLastName = callbackQuery.from().lastName();\n+                    lastMessageUsername = callbackQuery.from().username();\n+                    chatId = callbackQuery.message().chat().id();\n+                    replyIdToCallbackId.put(new ReplyKey(chatId, replyId), callbackQuery.id());\n+\n+                    // build and publish callbackEvent trigger channel payload\n+                    JsonObject callbackRaw = json.parse(gson.toJson(callbackQuery)).getAsJsonObject();\n+                    JsonObject callbackPayload = new JsonObject();\n+                    callbackPayload.addProperty(\"message_id\", callbackQuery.message().messageId());\n+                    callbackPayload.addProperty(\"from\", String.join(\" \",\n+                            new String[] { callbackQuery.from().firstName(), callbackQuery.from().lastName() }));\n+                    callbackPayload.addProperty(\"chat_id\", callbackQuery.message().chat().id());\n+                    callbackPayload.addProperty(\"callback_id\", callbackQuery.id());\n+                    callbackPayload.addProperty(\"reply_id\", callbackQuery.data().split(\" \", 2)[0]);\n+                    callbackPayload.addProperty(\"text\", callbackQuery.data().split(\" \", 2)[1]);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7d1d472777982ac6f862f1e9a89125bff29abe06"}, "originalPosition": 190}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzgwMTc5Nw==", "bodyText": "Similar code is used in several places. Please refactor this into a function and call that instead.", "url": "https://github.com/openhab/openhab-addons/pull/9251#discussion_r537801797", "createdAt": "2020-12-07T20:15:42Z", "author": {"login": "cpmeister"}, "path": "bundles/org.openhab.binding.telegram/src/main/java/org/openhab/binding/telegram/internal/TelegramHandler.java", "diffHunk": "@@ -278,6 +289,99 @@ private int handleUpdates(List<Update> updates) {\n                     // chat\n                 }\n \n+                // build and publish messageEvent trigger channel payload\n+                JsonObject messageRaw = json.parse(gson.toJson(message)).getAsJsonObject();\n+                JsonObject messagePayload = new JsonObject();\n+                messagePayload.addProperty(\"message_id\", message.messageId());\n+                messagePayload.addProperty(\"from\",\n+                        String.join(\" \", new String[] { message.from().firstName(), message.from().lastName() }));\n+                messagePayload.addProperty(\"chat_id\", message.chat().id());\n+                if (messageRaw.has(\"text\")) {\n+                    messagePayload.addProperty(\"text\", message.text());\n+                }\n+                if (messageRaw.has(\"animation\")) {\n+                    JsonObject animationPayload = messageRaw.getAsJsonObject(\"animation\");\n+                    String animationURL = getFullDownloadUrl(\n+                            animationPayload.getAsJsonPrimitive(\"file_id\").getAsString());\n+                    animationPayload.addProperty(\"file_url\", animationURL);\n+                    messagePayload.addProperty(\"animation_url\", animationURL);\n+                    if (animationPayload.has(\"thumb\")) {\n+                        animationPayload.getAsJsonObject(\"thumb\").addProperty(\"file_url\", getFullDownloadUrl(\n+                                animationPayload.getAsJsonObject(\"thumb\").getAsJsonPrimitive(\"file_id\").getAsString()));\n+                    }\n+                }\n+                if (messageRaw.has(\"audio\")) {\n+                    JsonObject audioPayload = messageRaw.getAsJsonObject(\"audio\");\n+                    String audioURL = getFullDownloadUrl(audioPayload.getAsJsonPrimitive(\"file_id\").getAsString());\n+                    audioPayload.addProperty(\"file_url\", audioURL);\n+                    messagePayload.addProperty(\"audio_url\", audioURL);\n+                    if (audioPayload.has(\"thumb\")) {\n+                        audioPayload.getAsJsonObject(\"thumb\").addProperty(\"file_url\", getFullDownloadUrl(\n+                                audioPayload.getAsJsonObject(\"thumb\").getAsJsonPrimitive(\"file_id\").getAsString()));\n+                    }\n+                }\n+                if (messageRaw.has(\"document\")) {\n+                    JsonObject documentPayload = messageRaw.getAsJsonObject(\"document\");\n+                    String documentURL = getFullDownloadUrl(\n+                            documentPayload.getAsJsonPrimitive(\"file_id\").getAsString());\n+                    documentPayload.addProperty(\"file_url\", documentURL);\n+                    messagePayload.addProperty(\"document_url\", documentURL);\n+                    if (documentPayload.has(\"thumb\")) {\n+                        documentPayload.getAsJsonObject(\"thumb\").addProperty(\"file_url\", getFullDownloadUrl(\n+                                documentPayload.getAsJsonObject(\"thumb\").getAsJsonPrimitive(\"file_id\").getAsString()));\n+                    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7d1d472777982ac6f862f1e9a89125bff29abe06"}, "originalPosition": 86}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7fe68eb54b09bc6a88bc1fd434b335a63ac1ae82", "author": {"user": {"login": "CrazyIvan359", "name": "Michael Murton"}}, "url": "https://github.com/openhab/openhab-addons/commit/7fe68eb54b09bc6a88bc1fd434b335a63ac1ae82", "committedDate": "2020-12-09T03:46:26Z", "message": "requested changes\n\nSigned-off-by: Michael Murton <6764025+CrazyIvan359@users.noreply.github.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ4NjQyOTIx", "url": "https://github.com/openhab/openhab-addons/pull/9251#pullrequestreview-548642921", "createdAt": "2020-12-09T21:55:05Z", "commit": {"oid": "7fe68eb54b09bc6a88bc1fd434b335a63ac1ae82"}, "state": "DISMISSED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQyMTo1NTowNVrOICrSOA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQyMTo1OToyM1rOICrcIg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTY3NzI0MA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                callbackPayload.addProperty(\"reply_id\", callbackData[0]);\n          \n          \n            \n                                callbackPayload.addProperty(\"text\", callbackData[1]);\n          \n          \n            \n                                callbackPayload.addProperty(\"reply_id\", replyId);\n          \n          \n            \n                                callbackPayload.addProperty(\"text\", lastMessageText);", "url": "https://github.com/openhab/openhab-addons/pull/9251#discussion_r539677240", "createdAt": "2020-12-09T21:55:05Z", "author": {"login": "cpmeister"}, "path": "bundles/org.openhab.binding.telegram/src/main/java/org/openhab/binding/telegram/internal/TelegramHandler.java", "diffHunk": "@@ -300,28 +374,44 @@ private int handleUpdates(List<Update> updates) {\n                 }\n \n                 // process metadata\n-                lastMessageDate = message.date();\n-                lastMessageFirstName = message.from().firstName();\n-                lastMessageLastName = message.from().lastName();\n-                lastMessageUsername = message.from().username();\n-            } else if (update.callbackQuery() != null && update.callbackQuery().message() != null\n-                    && update.callbackQuery().message().text() != null) {\n-                String[] callbackData = update.callbackQuery().data().split(\" \", 2);\n+                if (lastMessageURL != null || lastMessageText != null) {\n+                    lastMessageDate = message.date();\n+                    lastMessageFirstName = message.from().firstName();\n+                    lastMessageLastName = message.from().lastName();\n+                    lastMessageUsername = message.from().username();\n+                }\n+            } else if (callbackQuery != null && callbackQuery.message() != null\n+                    && callbackQuery.message().text() != null) {\n+                String[] callbackData = callbackQuery.data().split(\" \", 2);\n \n                 if (callbackData.length == 2) {\n                     replyId = callbackData[0];\n                     lastMessageText = callbackData[1];\n-                    lastMessageDate = update.callbackQuery().message().date();\n-                    lastMessageFirstName = update.callbackQuery().from().firstName();\n-                    lastMessageLastName = update.callbackQuery().from().lastName();\n-                    lastMessageUsername = update.callbackQuery().from().username();\n-                    chatId = update.callbackQuery().message().chat().id();\n-                    replyIdToCallbackId.put(new ReplyKey(chatId, replyId), update.callbackQuery().id());\n-                    logger.debug(\"Received callbackId {} for chatId {} and replyId {}\", update.callbackQuery().id(),\n-                            chatId, replyId);\n+                    lastMessageDate = callbackQuery.message().date();\n+                    lastMessageFirstName = callbackQuery.from().firstName();\n+                    lastMessageLastName = callbackQuery.from().lastName();\n+                    lastMessageUsername = callbackQuery.from().username();\n+                    chatId = callbackQuery.message().chat().id();\n+                    replyIdToCallbackId.put(new ReplyKey(chatId, replyId), callbackQuery.id());\n+\n+                    // build and publish callbackEvent trigger channel payload\n+                    JsonObject callbackRaw = json.parse(gson.toJson(callbackQuery)).getAsJsonObject();\n+                    JsonObject callbackPayload = new JsonObject();\n+                    callbackPayload.addProperty(\"message_id\", callbackQuery.message().messageId());\n+                    callbackPayload.addProperty(\"from\", String.join(\" \",\n+                            new String[] { callbackQuery.from().firstName(), callbackQuery.from().lastName() }));\n+                    callbackPayload.addProperty(\"chat_id\", callbackQuery.message().chat().id());\n+                    callbackPayload.addProperty(\"callback_id\", callbackQuery.id());\n+                    callbackPayload.addProperty(\"reply_id\", callbackData[0]);\n+                    callbackPayload.addProperty(\"text\", callbackData[1]);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7fe68eb54b09bc6a88bc1fd434b335a63ac1ae82"}, "originalPosition": 167}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTY3ODU1OA==", "bodyText": "Try to use existing variables if possible.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                callbackPayload.addProperty(\"from\", String.join(\" \",\n          \n          \n            \n                                        new String[] { callbackQuery.from().firstName(), callbackQuery.from().lastName() }));\n          \n          \n            \n                                callbackPayload.addProperty(\"from\", lastMessageFirstName + \" \" + lastMessageLastName);", "url": "https://github.com/openhab/openhab-addons/pull/9251#discussion_r539678558", "createdAt": "2020-12-09T21:57:22Z", "author": {"login": "cpmeister"}, "path": "bundles/org.openhab.binding.telegram/src/main/java/org/openhab/binding/telegram/internal/TelegramHandler.java", "diffHunk": "@@ -300,28 +374,44 @@ private int handleUpdates(List<Update> updates) {\n                 }\n \n                 // process metadata\n-                lastMessageDate = message.date();\n-                lastMessageFirstName = message.from().firstName();\n-                lastMessageLastName = message.from().lastName();\n-                lastMessageUsername = message.from().username();\n-            } else if (update.callbackQuery() != null && update.callbackQuery().message() != null\n-                    && update.callbackQuery().message().text() != null) {\n-                String[] callbackData = update.callbackQuery().data().split(\" \", 2);\n+                if (lastMessageURL != null || lastMessageText != null) {\n+                    lastMessageDate = message.date();\n+                    lastMessageFirstName = message.from().firstName();\n+                    lastMessageLastName = message.from().lastName();\n+                    lastMessageUsername = message.from().username();\n+                }\n+            } else if (callbackQuery != null && callbackQuery.message() != null\n+                    && callbackQuery.message().text() != null) {\n+                String[] callbackData = callbackQuery.data().split(\" \", 2);\n \n                 if (callbackData.length == 2) {\n                     replyId = callbackData[0];\n                     lastMessageText = callbackData[1];\n-                    lastMessageDate = update.callbackQuery().message().date();\n-                    lastMessageFirstName = update.callbackQuery().from().firstName();\n-                    lastMessageLastName = update.callbackQuery().from().lastName();\n-                    lastMessageUsername = update.callbackQuery().from().username();\n-                    chatId = update.callbackQuery().message().chat().id();\n-                    replyIdToCallbackId.put(new ReplyKey(chatId, replyId), update.callbackQuery().id());\n-                    logger.debug(\"Received callbackId {} for chatId {} and replyId {}\", update.callbackQuery().id(),\n-                            chatId, replyId);\n+                    lastMessageDate = callbackQuery.message().date();\n+                    lastMessageFirstName = callbackQuery.from().firstName();\n+                    lastMessageLastName = callbackQuery.from().lastName();\n+                    lastMessageUsername = callbackQuery.from().username();\n+                    chatId = callbackQuery.message().chat().id();\n+                    replyIdToCallbackId.put(new ReplyKey(chatId, replyId), callbackQuery.id());\n+\n+                    // build and publish callbackEvent trigger channel payload\n+                    JsonObject callbackRaw = json.parse(gson.toJson(callbackQuery)).getAsJsonObject();\n+                    JsonObject callbackPayload = new JsonObject();\n+                    callbackPayload.addProperty(\"message_id\", callbackQuery.message().messageId());\n+                    callbackPayload.addProperty(\"from\", String.join(\" \",\n+                            new String[] { callbackQuery.from().firstName(), callbackQuery.from().lastName() }));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7fe68eb54b09bc6a88bc1fd434b335a63ac1ae82"}, "originalPosition": 163}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTY3OTc3OA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                callbackPayload.addProperty(\"chat_id\", callbackQuery.message().chat().id());\n          \n          \n            \n                                callbackPayload.addProperty(\"chat_id\", chatId);", "url": "https://github.com/openhab/openhab-addons/pull/9251#discussion_r539679778", "createdAt": "2020-12-09T21:59:23Z", "author": {"login": "cpmeister"}, "path": "bundles/org.openhab.binding.telegram/src/main/java/org/openhab/binding/telegram/internal/TelegramHandler.java", "diffHunk": "@@ -300,28 +374,44 @@ private int handleUpdates(List<Update> updates) {\n                 }\n \n                 // process metadata\n-                lastMessageDate = message.date();\n-                lastMessageFirstName = message.from().firstName();\n-                lastMessageLastName = message.from().lastName();\n-                lastMessageUsername = message.from().username();\n-            } else if (update.callbackQuery() != null && update.callbackQuery().message() != null\n-                    && update.callbackQuery().message().text() != null) {\n-                String[] callbackData = update.callbackQuery().data().split(\" \", 2);\n+                if (lastMessageURL != null || lastMessageText != null) {\n+                    lastMessageDate = message.date();\n+                    lastMessageFirstName = message.from().firstName();\n+                    lastMessageLastName = message.from().lastName();\n+                    lastMessageUsername = message.from().username();\n+                }\n+            } else if (callbackQuery != null && callbackQuery.message() != null\n+                    && callbackQuery.message().text() != null) {\n+                String[] callbackData = callbackQuery.data().split(\" \", 2);\n \n                 if (callbackData.length == 2) {\n                     replyId = callbackData[0];\n                     lastMessageText = callbackData[1];\n-                    lastMessageDate = update.callbackQuery().message().date();\n-                    lastMessageFirstName = update.callbackQuery().from().firstName();\n-                    lastMessageLastName = update.callbackQuery().from().lastName();\n-                    lastMessageUsername = update.callbackQuery().from().username();\n-                    chatId = update.callbackQuery().message().chat().id();\n-                    replyIdToCallbackId.put(new ReplyKey(chatId, replyId), update.callbackQuery().id());\n-                    logger.debug(\"Received callbackId {} for chatId {} and replyId {}\", update.callbackQuery().id(),\n-                            chatId, replyId);\n+                    lastMessageDate = callbackQuery.message().date();\n+                    lastMessageFirstName = callbackQuery.from().firstName();\n+                    lastMessageLastName = callbackQuery.from().lastName();\n+                    lastMessageUsername = callbackQuery.from().username();\n+                    chatId = callbackQuery.message().chat().id();\n+                    replyIdToCallbackId.put(new ReplyKey(chatId, replyId), callbackQuery.id());\n+\n+                    // build and publish callbackEvent trigger channel payload\n+                    JsonObject callbackRaw = json.parse(gson.toJson(callbackQuery)).getAsJsonObject();\n+                    JsonObject callbackPayload = new JsonObject();\n+                    callbackPayload.addProperty(\"message_id\", callbackQuery.message().messageId());\n+                    callbackPayload.addProperty(\"from\", String.join(\" \",\n+                            new String[] { callbackQuery.from().firstName(), callbackQuery.from().lastName() }));\n+                    callbackPayload.addProperty(\"chat_id\", callbackQuery.message().chat().id());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7fe68eb54b09bc6a88bc1fd434b335a63ac1ae82"}, "originalPosition": 164}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NzIwMDQ0OTA1", "url": "https://github.com/openhab/openhab-addons/pull/9251#pullrequestreview-720044905", "createdAt": "2021-08-02T10:16:26Z", "commit": {"oid": "7fe68eb54b09bc6a88bc1fd434b335a63ac1ae82"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wOC0wMlQxMDoxNjoyNlrOKJTy1w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wOC0wMlQxMDoyNToxOVrOKJUI1A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4MDg1MDEzNQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    triggerChannel(new ChannelUID(getThing().getUID(), channelName), payload);\n          \n          \n            \n                    triggerChannel(channelName, payload);", "url": "https://github.com/openhab/openhab-addons/pull/9251#discussion_r680850135", "createdAt": "2021-08-02T10:16:26Z", "author": {"login": "kaikreuzer"}, "path": "bundles/org.openhab.binding.telegram/src/main/java/org/openhab/binding/telegram/internal/TelegramHandler.java", "diffHunk": "@@ -376,6 +466,10 @@ public void updateChannel(String channelName, State state) {\n         updateState(new ChannelUID(getThing().getUID(), channelName), state);\n     }\n \n+    public void triggerEvent(String channelName, String payload) {\n+        triggerChannel(new ChannelUID(getThing().getUID(), channelName), payload);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7fe68eb54b09bc6a88bc1fd434b335a63ac1ae82"}, "originalPosition": 185}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4MDg1NTA4Nw==", "bodyText": "I would suggest to mark all 4 new channel types as advanced, since trigger channels aren't normally meant to carry data structures in JSON. For the use case at hand I understand that this is helpful, though, so I'm fine with it.", "url": "https://github.com/openhab/openhab-addons/pull/9251#discussion_r680855087", "createdAt": "2021-08-02T10:24:11Z", "author": {"login": "kaikreuzer"}, "path": "bundles/org.openhab.binding.telegram/src/main/resources/OH-INF/thing/thing-types.xml", "diffHunk": "@@ -114,4 +118,64 @@\n \t\t<state readOnly=\"true\"/>\n \t</channel-type>\n \n+\t<channel-type id=\"messageEvent\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7fe68eb54b09bc6a88bc1fd434b335a63ac1ae82"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4MDg1NTMzMA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t<label>Message Received Event</label>\n          \n          \n            \n            \t\t<label>Message Received</label>", "url": "https://github.com/openhab/openhab-addons/pull/9251#discussion_r680855330", "createdAt": "2021-08-02T10:24:35Z", "author": {"login": "kaikreuzer"}, "path": "bundles/org.openhab.binding.telegram/src/main/resources/OH-INF/thing/thing-types.xml", "diffHunk": "@@ -114,4 +118,64 @@\n \t\t<state readOnly=\"true\"/>\n \t</channel-type>\n \n+\t<channel-type id=\"messageEvent\">\n+\t\t<kind>trigger</kind>\n+\t\t<label>Message Received Event</label>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7fe68eb54b09bc6a88bc1fd434b335a63ac1ae82"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4MDg1NTQ0OQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t<label>Message Received Event</label>\n          \n          \n            \n            \t\t<label>Raw Message Received</label>", "url": "https://github.com/openhab/openhab-addons/pull/9251#discussion_r680855449", "createdAt": "2021-08-02T10:24:48Z", "author": {"login": "kaikreuzer"}, "path": "bundles/org.openhab.binding.telegram/src/main/resources/OH-INF/thing/thing-types.xml", "diffHunk": "@@ -114,4 +118,64 @@\n \t\t<state readOnly=\"true\"/>\n \t</channel-type>\n \n+\t<channel-type id=\"messageEvent\">\n+\t\t<kind>trigger</kind>\n+\t\t<label>Message Received Event</label>\n+\t\t<description>\n+\t\t\t<![CDATA[\n+\t\t\tMessage encoded as JSON.<br />\n+\t\t\tEvent payload could contain the following, but `null` values will not be present:\n+\t\t\t<ul>\n+\t\t\t\t<li>Long `message_id` - Unique message ID in this chat</li>\n+\t\t\t\t<li>String `from` - First and/or last name of sender</li>\n+\t\t\t\t<li>Long `chat_id` - Unique chat ID</li>\n+\t\t\t\t<li>String `text` - Message text</li>\n+\t\t\t\t<li>String `animation_url` - URL to download animation from</li>\n+\t\t\t\t<li>String `audio_url` - URL to download audio from</li>\n+\t\t\t\t<li>String `document_url` - URL to download file from</li>\n+\t\t\t\t<li>Array `photo_url` - Array of URLs to download photos from</li>\n+\t\t\t\t<li>String `sticker_url` - URL to download sticker from</li>\n+\t\t\t\t<li>String `video_url` - URL to download video from</li>\n+\t\t\t\t<li>String `video_note_url` - URL to download video note from</li>\n+\t\t\t\t<li>String `voice_url` - URL to download voice clip from</li>\n+\t\t\t</ul>\n+\t\t\t]]>\n+\t\t</description>\n+\t\t<event></event>\n+\t</channel-type>\n+\n+\t<channel-type id=\"messageRawEvent\">\n+\t\t<kind>trigger</kind>\n+\t\t<label>Message Received Event</label>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7fe68eb54b09bc6a88bc1fd434b335a63ac1ae82"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4MDg1NTU0OQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t<label>Query Callback Received Event</label>\n          \n          \n            \n            \t\t<label>Query Callback Received</label>", "url": "https://github.com/openhab/openhab-addons/pull/9251#discussion_r680855549", "createdAt": "2021-08-02T10:24:59Z", "author": {"login": "kaikreuzer"}, "path": "bundles/org.openhab.binding.telegram/src/main/resources/OH-INF/thing/thing-types.xml", "diffHunk": "@@ -114,4 +118,64 @@\n \t\t<state readOnly=\"true\"/>\n \t</channel-type>\n \n+\t<channel-type id=\"messageEvent\">\n+\t\t<kind>trigger</kind>\n+\t\t<label>Message Received Event</label>\n+\t\t<description>\n+\t\t\t<![CDATA[\n+\t\t\tMessage encoded as JSON.<br />\n+\t\t\tEvent payload could contain the following, but `null` values will not be present:\n+\t\t\t<ul>\n+\t\t\t\t<li>Long `message_id` - Unique message ID in this chat</li>\n+\t\t\t\t<li>String `from` - First and/or last name of sender</li>\n+\t\t\t\t<li>Long `chat_id` - Unique chat ID</li>\n+\t\t\t\t<li>String `text` - Message text</li>\n+\t\t\t\t<li>String `animation_url` - URL to download animation from</li>\n+\t\t\t\t<li>String `audio_url` - URL to download audio from</li>\n+\t\t\t\t<li>String `document_url` - URL to download file from</li>\n+\t\t\t\t<li>Array `photo_url` - Array of URLs to download photos from</li>\n+\t\t\t\t<li>String `sticker_url` - URL to download sticker from</li>\n+\t\t\t\t<li>String `video_url` - URL to download video from</li>\n+\t\t\t\t<li>String `video_note_url` - URL to download video note from</li>\n+\t\t\t\t<li>String `voice_url` - URL to download voice clip from</li>\n+\t\t\t</ul>\n+\t\t\t]]>\n+\t\t</description>\n+\t\t<event></event>\n+\t</channel-type>\n+\n+\t<channel-type id=\"messageRawEvent\">\n+\t\t<kind>trigger</kind>\n+\t\t<label>Message Received Event</label>\n+\t\t<description>Raw Message from the Telegram library as JSON.</description>\n+\t\t<event></event>\n+\t</channel-type>\n+\n+\t<channel-type id=\"callbackEvent\">\n+\t\t<kind>trigger</kind>\n+\t\t<label>Query Callback Received Event</label>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7fe68eb54b09bc6a88bc1fd434b335a63ac1ae82"}, "originalPosition": 50}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4MDg1NTc2NA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t<label>Callback Query Received Event</label>\n          \n          \n            \n            \t\t<label>Raw Callback Query Received</label>", "url": "https://github.com/openhab/openhab-addons/pull/9251#discussion_r680855764", "createdAt": "2021-08-02T10:25:19Z", "author": {"login": "kaikreuzer"}, "path": "bundles/org.openhab.binding.telegram/src/main/resources/OH-INF/thing/thing-types.xml", "diffHunk": "@@ -114,4 +118,64 @@\n \t\t<state readOnly=\"true\"/>\n \t</channel-type>\n \n+\t<channel-type id=\"messageEvent\">\n+\t\t<kind>trigger</kind>\n+\t\t<label>Message Received Event</label>\n+\t\t<description>\n+\t\t\t<![CDATA[\n+\t\t\tMessage encoded as JSON.<br />\n+\t\t\tEvent payload could contain the following, but `null` values will not be present:\n+\t\t\t<ul>\n+\t\t\t\t<li>Long `message_id` - Unique message ID in this chat</li>\n+\t\t\t\t<li>String `from` - First and/or last name of sender</li>\n+\t\t\t\t<li>Long `chat_id` - Unique chat ID</li>\n+\t\t\t\t<li>String `text` - Message text</li>\n+\t\t\t\t<li>String `animation_url` - URL to download animation from</li>\n+\t\t\t\t<li>String `audio_url` - URL to download audio from</li>\n+\t\t\t\t<li>String `document_url` - URL to download file from</li>\n+\t\t\t\t<li>Array `photo_url` - Array of URLs to download photos from</li>\n+\t\t\t\t<li>String `sticker_url` - URL to download sticker from</li>\n+\t\t\t\t<li>String `video_url` - URL to download video from</li>\n+\t\t\t\t<li>String `video_note_url` - URL to download video note from</li>\n+\t\t\t\t<li>String `voice_url` - URL to download voice clip from</li>\n+\t\t\t</ul>\n+\t\t\t]]>\n+\t\t</description>\n+\t\t<event></event>\n+\t</channel-type>\n+\n+\t<channel-type id=\"messageRawEvent\">\n+\t\t<kind>trigger</kind>\n+\t\t<label>Message Received Event</label>\n+\t\t<description>Raw Message from the Telegram library as JSON.</description>\n+\t\t<event></event>\n+\t</channel-type>\n+\n+\t<channel-type id=\"callbackEvent\">\n+\t\t<kind>trigger</kind>\n+\t\t<label>Query Callback Received Event</label>\n+\t\t<description>\n+\t\t\t<![CDATA[\n+\t\t\tCallback Query response encoded as JSON.<br />\n+\t\t\tEvent payload could contain the following, but `null` values will not be present:\n+\t\t\t<ul>\n+\t\t\t\t<li>Long `message_id` - Unique message ID of the original Query message</li>\n+\t\t\t\t<li>String `from` - First and/or last name of sender</li>\n+\t\t\t\t<li>Long `chat_id` - Unique chat ID</li>\n+\t\t\t\t<li>String `callback_id` - Unique callback ID to send receipt confirmation to</li>\n+\t\t\t\t<li>String `reply_id` - Plain text name of original Query</li>\n+\t\t\t\t<li>String `text` - Selected response text from options give in original Query</li>\n+\t\t\t</ul>\n+\t\t\t]]>\n+\t\t</description>\n+\t\t<event></event>\n+\t</channel-type>\n+\n+\t<channel-type id=\"callbackRawEvent\">\n+\t\t<kind>trigger</kind>\n+\t\t<label>Callback Query Received Event</label>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7fe68eb54b09bc6a88bc1fd434b335a63ac1ae82"}, "originalPosition": 70}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NzMyNzgyODY0", "url": "https://github.com/openhab/openhab-addons/pull/9251#pullrequestreview-732782864", "createdAt": "2021-08-18T12:12:21Z", "commit": {"oid": "7fe68eb54b09bc6a88bc1fd434b335a63ac1ae82"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wOC0xOFQxMjoxMjoyMlrOKTKFIg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wOC0xOFQxMjoxMjoyMlrOKTKFIg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY5MTE3NjczOA==", "bodyText": "Does this create a breaking change?", "url": "https://github.com/openhab/openhab-addons/pull/9251#discussion_r691176738", "createdAt": "2021-08-18T12:12:22Z", "author": {"login": "Skinah"}, "path": "bundles/org.openhab.binding.telegram/src/main/java/org/openhab/binding/telegram/internal/action/TelegramActions.java", "diffHunk": "@@ -108,34 +108,30 @@ public String toString() {\n \n     @RuleAction(label = \"send an answer\", description = \"Send a Telegram answer using the Telegram API.\")\n     public boolean sendTelegramAnswer(@ActionInput(name = \"chatId\") @Nullable Long chatId,\n-            @ActionInput(name = \"replyId\") @Nullable String replyId,\n+            @ActionInput(name = \"callbackId\") @Nullable String callbackId,\n+            @ActionInput(name = \"messageId\") @Nullable Long messageId,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7fe68eb54b09bc6a88bc1fd434b335a63ac1ae82"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dca4e540f96d3e9fc93aaf957f8cb0c3c0ddc6b7", "author": {"user": {"login": "Skinah", "name": "Matthew Skinner"}}, "url": "https://github.com/openhab/openhab-addons/commit/dca4e540f96d3e9fc93aaf957f8cb0c3c0ddc6b7", "committedDate": "2021-09-06T07:53:04Z", "message": "Merge branch 'main' into telegram-updates"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a4d878d8b0bf9c60b2d8ae31704d7c0a29a947e4", "author": {"user": {"login": "Skinah", "name": "Matthew Skinner"}}, "url": "https://github.com/openhab/openhab-addons/commit/a4d878d8b0bf9c60b2d8ae31704d7c0a29a947e4", "committedDate": "2021-09-12T01:05:34Z", "message": "Merge branch 'main' into telegram-updates"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f97a1fa4e790bb0d02bba20a6be103ffc89e735d", "author": {"user": {"login": "Skinah", "name": "Matthew Skinner"}}, "url": "https://github.com/openhab/openhab-addons/commit/f97a1fa4e790bb0d02bba20a6be103ffc89e735d", "committedDate": "2021-09-12T01:07:28Z", "message": "Update bundles/org.openhab.binding.telegram/src/main/resources/OH-INF/thing/thing-types.xml\r\n\r\nSigned-off-by: Matthew Skinner <matt@pcmus.com>\n\nCo-authored-by: Kai Kreuzer <kai@openhab.org>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e91301ec105f86ed34664047cd6c9e15870e2381", "author": {"user": {"login": "Skinah", "name": "Matthew Skinner"}}, "url": "https://github.com/openhab/openhab-addons/commit/e91301ec105f86ed34664047cd6c9e15870e2381", "committedDate": "2021-09-12T01:07:52Z", "message": "Update bundles/org.openhab.binding.telegram/src/main/resources/OH-INF/thing/thing-types.xml\r\n\r\nSigned-off-by: Matthew Skinner <matt@pcmus.com>\n\nCo-authored-by: Kai Kreuzer <kai@openhab.org>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "439ae53a20ff57fca024eae2fcbf6fc7f3736712", "author": {"user": {"login": "Skinah", "name": "Matthew Skinner"}}, "url": "https://github.com/openhab/openhab-addons/commit/439ae53a20ff57fca024eae2fcbf6fc7f3736712", "committedDate": "2021-09-12T01:08:08Z", "message": "Update bundles/org.openhab.binding.telegram/src/main/resources/OH-INF/thing/thing-types.xml\r\n\r\nSigned-off-by: Matthew Skinner <matt@pcmus.com>\n\nCo-authored-by: Kai Kreuzer <kai@openhab.org>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6e4127bfb7cfdc118f5ea42bf30523e8697881a6", "author": {"user": {"login": "Skinah", "name": "Matthew Skinner"}}, "url": "https://github.com/openhab/openhab-addons/commit/6e4127bfb7cfdc118f5ea42bf30523e8697881a6", "committedDate": "2021-09-12T01:08:22Z", "message": "Update bundles/org.openhab.binding.telegram/src/main/resources/OH-INF/thing/thing-types.xml\r\n\r\nSigned-off-by: Matthew Skinner <matt@pcmus.com>\n\nCo-authored-by: Kai Kreuzer <kai@openhab.org>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ddd9909a7e8627545e5203dcb872d44d70c24d08", "author": {"user": {"login": "Skinah", "name": "Matthew Skinner"}}, "url": "https://github.com/openhab/openhab-addons/commit/ddd9909a7e8627545e5203dcb872d44d70c24d08", "committedDate": "2021-09-12T01:09:38Z", "message": "Update bundles/org.openhab.binding.telegram/src/main/java/org/openhab/binding/telegram/internal/TelegramHandler.java\r\n\r\nSigned-off-by: Matthew Skinner <matt@pcmus.com>\n\nCo-authored-by: Kai Kreuzer <kai@openhab.org>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "08947d3ac7b232670c28d81079aadb171b1e73ad", "author": {"user": {"login": "Skinah", "name": "Matthew Skinner"}}, "url": "https://github.com/openhab/openhab-addons/commit/08947d3ac7b232670c28d81079aadb171b1e73ad", "committedDate": "2021-09-12T01:10:21Z", "message": "Update bundles/org.openhab.binding.telegram/src/main/java/org/openhab/binding/telegram/internal/TelegramHandler.java\r\n\r\nSigned-off-by: Matthew Skinner <matt@pcmus.com>\n\nCo-authored-by: Connor Petty <mistercpp2000@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NzUyMDU5NDY2", "url": "https://github.com/openhab/openhab-addons/pull/9251#pullrequestreview-752059466", "createdAt": "2021-09-12T01:16:53Z", "commit": {"oid": "08947d3ac7b232670c28d81079aadb171b1e73ad"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wOS0xMlQwMToxNjo1M1rOKh_Ewg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wOS0xMlQwMToxNjo1M1rOKh_Ewg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDcwNjcyNTA1OA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t<channel-type id=\"callbackRawEvent\">\n          \n          \n            \n            \t<channel-type id=\"callbackRawEvent\" advanced=\"true\">", "url": "https://github.com/openhab/openhab-addons/pull/9251#discussion_r706725058", "createdAt": "2021-09-12T01:16:53Z", "author": {"login": "Skinah"}, "path": "bundles/org.openhab.binding.telegram/src/main/resources/OH-INF/thing/thing-types.xml", "diffHunk": "@@ -114,4 +118,64 @@\n \t\t<state readOnly=\"true\"/>\n \t</channel-type>\n \n+\t<channel-type id=\"messageEvent\">\n+\t\t<kind>trigger</kind>\n+\t\t<label>Message Received</label>\n+\t\t<description>\n+\t\t\t<![CDATA[\n+\t\t\tMessage encoded as JSON.<br />\n+\t\t\tEvent payload could contain the following, but `null` values will not be present:\n+\t\t\t<ul>\n+\t\t\t\t<li>Long `message_id` - Unique message ID in this chat</li>\n+\t\t\t\t<li>String `from` - First and/or last name of sender</li>\n+\t\t\t\t<li>Long `chat_id` - Unique chat ID</li>\n+\t\t\t\t<li>String `text` - Message text</li>\n+\t\t\t\t<li>String `animation_url` - URL to download animation from</li>\n+\t\t\t\t<li>String `audio_url` - URL to download audio from</li>\n+\t\t\t\t<li>String `document_url` - URL to download file from</li>\n+\t\t\t\t<li>Array `photo_url` - Array of URLs to download photos from</li>\n+\t\t\t\t<li>String `sticker_url` - URL to download sticker from</li>\n+\t\t\t\t<li>String `video_url` - URL to download video from</li>\n+\t\t\t\t<li>String `video_note_url` - URL to download video note from</li>\n+\t\t\t\t<li>String `voice_url` - URL to download voice clip from</li>\n+\t\t\t</ul>\n+\t\t\t]]>\n+\t\t</description>\n+\t\t<event></event>\n+\t</channel-type>\n+\n+\t<channel-type id=\"messageRawEvent\">\n+\t\t<kind>trigger</kind>\n+\t\t<label>Raw Message Received</label>\n+\t\t<description>Raw Message from the Telegram library as JSON.</description>\n+\t\t<event></event>\n+\t</channel-type>\n+\n+\t<channel-type id=\"callbackEvent\">\n+\t\t<kind>trigger</kind>\n+\t\t<label>Query Callback Received</label>\n+\t\t<description>\n+\t\t\t<![CDATA[\n+\t\t\tCallback Query response encoded as JSON.<br />\n+\t\t\tEvent payload could contain the following, but `null` values will not be present:\n+\t\t\t<ul>\n+\t\t\t\t<li>Long `message_id` - Unique message ID of the original Query message</li>\n+\t\t\t\t<li>String `from` - First and/or last name of sender</li>\n+\t\t\t\t<li>Long `chat_id` - Unique chat ID</li>\n+\t\t\t\t<li>String `callback_id` - Unique callback ID to send receipt confirmation to</li>\n+\t\t\t\t<li>String `reply_id` - Plain text name of original Query</li>\n+\t\t\t\t<li>String `text` - Selected response text from options give in original Query</li>\n+\t\t\t</ul>\n+\t\t\t]]>\n+\t\t</description>\n+\t\t<event></event>\n+\t</channel-type>\n+\n+\t<channel-type id=\"callbackRawEvent\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "08947d3ac7b232670c28d81079aadb171b1e73ad"}, "originalPosition": 68}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NzUyMDU5NDgy", "url": "https://github.com/openhab/openhab-addons/pull/9251#pullrequestreview-752059482", "createdAt": "2021-09-12T01:17:17Z", "commit": {"oid": "08947d3ac7b232670c28d81079aadb171b1e73ad"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wOS0xMlQwMToxNzoxN1rOKh_E4g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wOS0xMlQwMToxNzoxN1rOKh_E4g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDcwNjcyNTA5MA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t<channel-type id=\"callbackEvent\">\n          \n          \n            \n            \t<channel-type id=\"callbackEvent\" advanced=\"true\">", "url": "https://github.com/openhab/openhab-addons/pull/9251#discussion_r706725090", "createdAt": "2021-09-12T01:17:17Z", "author": {"login": "Skinah"}, "path": "bundles/org.openhab.binding.telegram/src/main/resources/OH-INF/thing/thing-types.xml", "diffHunk": "@@ -114,4 +118,64 @@\n \t\t<state readOnly=\"true\"/>\n \t</channel-type>\n \n+\t<channel-type id=\"messageEvent\">\n+\t\t<kind>trigger</kind>\n+\t\t<label>Message Received</label>\n+\t\t<description>\n+\t\t\t<![CDATA[\n+\t\t\tMessage encoded as JSON.<br />\n+\t\t\tEvent payload could contain the following, but `null` values will not be present:\n+\t\t\t<ul>\n+\t\t\t\t<li>Long `message_id` - Unique message ID in this chat</li>\n+\t\t\t\t<li>String `from` - First and/or last name of sender</li>\n+\t\t\t\t<li>Long `chat_id` - Unique chat ID</li>\n+\t\t\t\t<li>String `text` - Message text</li>\n+\t\t\t\t<li>String `animation_url` - URL to download animation from</li>\n+\t\t\t\t<li>String `audio_url` - URL to download audio from</li>\n+\t\t\t\t<li>String `document_url` - URL to download file from</li>\n+\t\t\t\t<li>Array `photo_url` - Array of URLs to download photos from</li>\n+\t\t\t\t<li>String `sticker_url` - URL to download sticker from</li>\n+\t\t\t\t<li>String `video_url` - URL to download video from</li>\n+\t\t\t\t<li>String `video_note_url` - URL to download video note from</li>\n+\t\t\t\t<li>String `voice_url` - URL to download voice clip from</li>\n+\t\t\t</ul>\n+\t\t\t]]>\n+\t\t</description>\n+\t\t<event></event>\n+\t</channel-type>\n+\n+\t<channel-type id=\"messageRawEvent\">\n+\t\t<kind>trigger</kind>\n+\t\t<label>Raw Message Received</label>\n+\t\t<description>Raw Message from the Telegram library as JSON.</description>\n+\t\t<event></event>\n+\t</channel-type>\n+\n+\t<channel-type id=\"callbackEvent\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "08947d3ac7b232670c28d81079aadb171b1e73ad"}, "originalPosition": 48}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NzUyMDU5NDk4", "url": "https://github.com/openhab/openhab-addons/pull/9251#pullrequestreview-752059498", "createdAt": "2021-09-12T01:17:35Z", "commit": {"oid": "08947d3ac7b232670c28d81079aadb171b1e73ad"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wOS0xMlQwMToxNzozNVrOKh_E9g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wOS0xMlQwMToxNzozNVrOKh_E9g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDcwNjcyNTExMA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t<channel-type id=\"messageRawEvent\">\n          \n          \n            \n            \t<channel-type id=\"messageRawEvent\" advanced=\"true\">", "url": "https://github.com/openhab/openhab-addons/pull/9251#discussion_r706725110", "createdAt": "2021-09-12T01:17:35Z", "author": {"login": "Skinah"}, "path": "bundles/org.openhab.binding.telegram/src/main/resources/OH-INF/thing/thing-types.xml", "diffHunk": "@@ -114,4 +118,64 @@\n \t\t<state readOnly=\"true\"/>\n \t</channel-type>\n \n+\t<channel-type id=\"messageEvent\">\n+\t\t<kind>trigger</kind>\n+\t\t<label>Message Received</label>\n+\t\t<description>\n+\t\t\t<![CDATA[\n+\t\t\tMessage encoded as JSON.<br />\n+\t\t\tEvent payload could contain the following, but `null` values will not be present:\n+\t\t\t<ul>\n+\t\t\t\t<li>Long `message_id` - Unique message ID in this chat</li>\n+\t\t\t\t<li>String `from` - First and/or last name of sender</li>\n+\t\t\t\t<li>Long `chat_id` - Unique chat ID</li>\n+\t\t\t\t<li>String `text` - Message text</li>\n+\t\t\t\t<li>String `animation_url` - URL to download animation from</li>\n+\t\t\t\t<li>String `audio_url` - URL to download audio from</li>\n+\t\t\t\t<li>String `document_url` - URL to download file from</li>\n+\t\t\t\t<li>Array `photo_url` - Array of URLs to download photos from</li>\n+\t\t\t\t<li>String `sticker_url` - URL to download sticker from</li>\n+\t\t\t\t<li>String `video_url` - URL to download video from</li>\n+\t\t\t\t<li>String `video_note_url` - URL to download video note from</li>\n+\t\t\t\t<li>String `voice_url` - URL to download voice clip from</li>\n+\t\t\t</ul>\n+\t\t\t]]>\n+\t\t</description>\n+\t\t<event></event>\n+\t</channel-type>\n+\n+\t<channel-type id=\"messageRawEvent\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "08947d3ac7b232670c28d81079aadb171b1e73ad"}, "originalPosition": 41}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NzUyMDU5NTEw", "url": "https://github.com/openhab/openhab-addons/pull/9251#pullrequestreview-752059510", "createdAt": "2021-09-12T01:17:54Z", "commit": {"oid": "08947d3ac7b232670c28d81079aadb171b1e73ad"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wOS0xMlQwMToxNzo1NFrOKh_FIg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wOS0xMlQwMToxNzo1NFrOKh_FIg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDcwNjcyNTE1NA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t<channel-type id=\"messageEvent\">\n          \n          \n            \n            \t<channel-type id=\"messageEvent\" advanced=\"true\">", "url": "https://github.com/openhab/openhab-addons/pull/9251#discussion_r706725154", "createdAt": "2021-09-12T01:17:54Z", "author": {"login": "Skinah"}, "path": "bundles/org.openhab.binding.telegram/src/main/resources/OH-INF/thing/thing-types.xml", "diffHunk": "@@ -114,4 +118,64 @@\n \t\t<state readOnly=\"true\"/>\n \t</channel-type>\n \n+\t<channel-type id=\"messageEvent\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "08947d3ac7b232670c28d81079aadb171b1e73ad"}, "originalPosition": 15}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a449706a1ef02eba407eabbbdfb061061efa0304", "author": {"user": {"login": "Skinah", "name": "Matthew Skinner"}}, "url": "https://github.com/openhab/openhab-addons/commit/a449706a1ef02eba407eabbbdfb061061efa0304", "committedDate": "2021-09-12T01:18:21Z", "message": "Update bundles/org.openhab.binding.telegram/src/main/resources/OH-INF/thing/thing-types.xml\r\n\r\nSigned-off-by: Matthew Skinner <matt@pcmus.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6354ea856cfc06813344558a90ffd019f10df61e", "author": {"user": {"login": "Skinah", "name": "Matthew Skinner"}}, "url": "https://github.com/openhab/openhab-addons/commit/6354ea856cfc06813344558a90ffd019f10df61e", "committedDate": "2021-09-12T01:18:41Z", "message": "Update bundles/org.openhab.binding.telegram/src/main/resources/OH-INF/thing/thing-types.xml\r\n\r\nSigned-off-by: Matthew Skinner <matt@pcmus.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c64a27b0f3f990348eecd464343ba0dc00276de5", "author": {"user": {"login": "Skinah", "name": "Matthew Skinner"}}, "url": "https://github.com/openhab/openhab-addons/commit/c64a27b0f3f990348eecd464343ba0dc00276de5", "committedDate": "2021-09-12T01:18:50Z", "message": "Update bundles/org.openhab.binding.telegram/src/main/resources/OH-INF/thing/thing-types.xml\r\n\r\nSigned-off-by: Matthew Skinner <matt@pcmus.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fce6472c6ada4a8f36ad8788dfd775cbb0bff722", "author": {"user": {"login": "Skinah", "name": "Matthew Skinner"}}, "url": "https://github.com/openhab/openhab-addons/commit/fce6472c6ada4a8f36ad8788dfd775cbb0bff722", "committedDate": "2021-09-12T01:19:01Z", "message": "Update bundles/org.openhab.binding.telegram/src/main/resources/OH-INF/thing/thing-types.xml\r\n\r\nSigned-off-by: Matthew Skinner <matt@pcmus.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f82646683e8e14e5917a770c408f4b9508ece8f3", "author": {"user": {"login": "Skinah", "name": "Matthew Skinner"}}, "url": "https://github.com/openhab/openhab-addons/commit/f82646683e8e14e5917a770c408f4b9508ece8f3", "committedDate": "2021-09-12T02:36:18Z", "message": "Fix merge conflict issues.\n\n\nSigned-off-by: Matthew Skinner <matt@pcmus.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1b91514b6b4cdf0dab7179f3a25e6f7430759485", "author": {"user": {"login": "CrazyIvan359", "name": "Michael Murton"}}, "url": "https://github.com/openhab/openhab-addons/commit/1b91514b6b4cdf0dab7179f3a25e6f7430759485", "committedDate": "2021-09-12T07:45:33Z", "message": "Add event channels and Answer overload\n\nSigned-off-by: Michael Murton <6764025+CrazyIvan359@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a1ec5f546d09197666eb2925d08572404cd4123b", "author": {"user": {"login": "CrazyIvan359", "name": "Michael Murton"}}, "url": "https://github.com/openhab/openhab-addons/commit/a1ec5f546d09197666eb2925d08572404cd4123b", "committedDate": "2021-09-12T07:45:34Z", "message": "requested changes\n\nSigned-off-by: Michael Murton <6764025+CrazyIvan359@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d948b207a96f68c2bb7fb56847e430eb582a975d", "author": {"user": {"login": "Skinah", "name": "Matthew Skinner"}}, "url": "https://github.com/openhab/openhab-addons/commit/d948b207a96f68c2bb7fb56847e430eb582a975d", "committedDate": "2021-09-12T07:45:34Z", "message": "Update bundles/org.openhab.binding.telegram/src/main/resources/OH-INF/thing/thing-types.xml\r\n\r\nSigned-off-by: Matthew Skinner <matt@pcmus.com>\n\nCo-authored-by: Kai Kreuzer <kai@openhab.org>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "af0313a8cde2668cfc2e0a650d6997002470a8e7", "author": {"user": {"login": "Skinah", "name": "Matthew Skinner"}}, "url": "https://github.com/openhab/openhab-addons/commit/af0313a8cde2668cfc2e0a650d6997002470a8e7", "committedDate": "2021-09-12T07:45:34Z", "message": "Update bundles/org.openhab.binding.telegram/src/main/resources/OH-INF/thing/thing-types.xml\r\n\r\nSigned-off-by: Matthew Skinner <matt@pcmus.com>\n\nCo-authored-by: Kai Kreuzer <kai@openhab.org>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "df2a26b6079743bf996bdefecb7eea7d5e9bc36c", "author": {"user": {"login": "Skinah", "name": "Matthew Skinner"}}, "url": "https://github.com/openhab/openhab-addons/commit/df2a26b6079743bf996bdefecb7eea7d5e9bc36c", "committedDate": "2021-09-12T07:45:34Z", "message": "Update bundles/org.openhab.binding.telegram/src/main/resources/OH-INF/thing/thing-types.xml\r\n\r\nSigned-off-by: Matthew Skinner <matt@pcmus.com>\n\nCo-authored-by: Kai Kreuzer <kai@openhab.org>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6aa24d02e96af7e578b5bdd57f6894249156e237", "author": {"user": {"login": "Skinah", "name": "Matthew Skinner"}}, "url": "https://github.com/openhab/openhab-addons/commit/6aa24d02e96af7e578b5bdd57f6894249156e237", "committedDate": "2021-09-12T07:45:34Z", "message": "Update bundles/org.openhab.binding.telegram/src/main/resources/OH-INF/thing/thing-types.xml\r\n\r\nSigned-off-by: Matthew Skinner <matt@pcmus.com>\n\nCo-authored-by: Kai Kreuzer <kai@openhab.org>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8d3ca16e5fef3e6923d49e2d6e8955f313a2e44b", "author": {"user": {"login": "Skinah", "name": "Matthew Skinner"}}, "url": "https://github.com/openhab/openhab-addons/commit/8d3ca16e5fef3e6923d49e2d6e8955f313a2e44b", "committedDate": "2021-09-12T07:45:34Z", "message": "Update bundles/org.openhab.binding.telegram/src/main/java/org/openhab/binding/telegram/internal/TelegramHandler.java\r\n\r\nSigned-off-by: Matthew Skinner <matt@pcmus.com>\n\nCo-authored-by: Kai Kreuzer <kai@openhab.org>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "294b23fa19975ed4dcffa7431a0033e31480b3ce", "author": {"user": {"login": "Skinah", "name": "Matthew Skinner"}}, "url": "https://github.com/openhab/openhab-addons/commit/294b23fa19975ed4dcffa7431a0033e31480b3ce", "committedDate": "2021-09-12T07:45:34Z", "message": "Update bundles/org.openhab.binding.telegram/src/main/java/org/openhab/binding/telegram/internal/TelegramHandler.java\r\n\r\nSigned-off-by: Matthew Skinner <matt@pcmus.com>\n\nCo-authored-by: Connor Petty <mistercpp2000@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a72ee7e7096f5487fbcff439b3f4ce5eb080f6a4", "author": {"user": {"login": "Skinah", "name": "Matthew Skinner"}}, "url": "https://github.com/openhab/openhab-addons/commit/a72ee7e7096f5487fbcff439b3f4ce5eb080f6a4", "committedDate": "2021-09-12T07:45:34Z", "message": "Update bundles/org.openhab.binding.telegram/src/main/resources/OH-INF/thing/thing-types.xml\r\n\r\nSigned-off-by: Matthew Skinner <matt@pcmus.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9333d48db792b6c0791aba6b62a865601c13ccc1", "author": {"user": {"login": "Skinah", "name": "Matthew Skinner"}}, "url": "https://github.com/openhab/openhab-addons/commit/9333d48db792b6c0791aba6b62a865601c13ccc1", "committedDate": "2021-09-12T07:45:34Z", "message": "Update bundles/org.openhab.binding.telegram/src/main/resources/OH-INF/thing/thing-types.xml\r\n\r\nSigned-off-by: Matthew Skinner <matt@pcmus.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0ac958bae28a752c213fd4c06fa1e498b9862f34", "author": {"user": {"login": "Skinah", "name": "Matthew Skinner"}}, "url": "https://github.com/openhab/openhab-addons/commit/0ac958bae28a752c213fd4c06fa1e498b9862f34", "committedDate": "2021-09-12T07:45:34Z", "message": "Update bundles/org.openhab.binding.telegram/src/main/resources/OH-INF/thing/thing-types.xml\r\n\r\nSigned-off-by: Matthew Skinner <matt@pcmus.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "661ea70974faf1559b6bb58eb621a71b687aedcc", "author": {"user": {"login": "Skinah", "name": "Matthew Skinner"}}, "url": "https://github.com/openhab/openhab-addons/commit/661ea70974faf1559b6bb58eb621a71b687aedcc", "committedDate": "2021-09-12T07:45:34Z", "message": "Update bundles/org.openhab.binding.telegram/src/main/resources/OH-INF/thing/thing-types.xml\r\n\r\nSigned-off-by: Matthew Skinner <matt@pcmus.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "016bec1deea51b7496c76ef4901acdb79ae58fc2", "author": {"user": {"login": "Skinah", "name": "Matthew Skinner"}}, "url": "https://github.com/openhab/openhab-addons/commit/016bec1deea51b7496c76ef4901acdb79ae58fc2", "committedDate": "2021-09-12T08:07:54Z", "message": "Remove deprecated methods used.\n\n\nSigned-off-by: Matthew Skinner <matt@pcmus.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5b32b665188e0b2b9b831709b9a48588c95e0339", "author": {"user": {"login": "Skinah", "name": "Matthew Skinner"}}, "url": "https://github.com/openhab/openhab-addons/commit/5b32b665188e0b2b9b831709b9a48588c95e0339", "committedDate": "2021-09-12T08:12:06Z", "message": "Fix conflicts\n\nSigned-off-by: Matthew Skinner <matt@pcmus.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f4d00c716720694358543ad6d18d8f74cd4068c6", "author": {"user": {"login": "Skinah", "name": "Matthew Skinner"}}, "url": "https://github.com/openhab/openhab-addons/commit/f4d00c716720694358543ad6d18d8f74cd4068c6", "committedDate": "2021-09-12T08:34:05Z", "message": "remove redundant @NonNullByDefault\n\n\nSigned-off-by: Matthew Skinner <matt@pcmus.com>"}}, {"__typename": "PullRequestReview", "id": "PRR_kwDOAS1o684tLxgj", "url": "https://github.com/openhab/openhab-addons/pull/9251#pullrequestreview-758061091", "createdAt": "2021-09-18T13:07:12Z", "commit": {"oid": "f4d00c716720694358543ad6d18d8f74cd4068c6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4036, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}