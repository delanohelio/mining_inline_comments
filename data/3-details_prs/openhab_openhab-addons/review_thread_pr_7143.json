{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg2MzEwMTY4", "number": 7143, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxOTo0MDo1N1rODm1C7g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxOTo1MjoyN1rODm1RMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQyMDQxNTgyOnYy", "diffSide": "RIGHT", "path": "bundles/org.openhab.binding.goecharger/src/main/java/org/openhab/binding/goecharger/internal/handler/GoEChargerHandler.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxOTo0MDo1N1rOF0ePrA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQwNTo0MTo1MVrOF0p1XQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDU2NTgwNA==", "bodyText": "You can now save contentResponse.getContentAsString() to a variable and also use it in the log statement above. Since the content string is now used anyways, it also makes sense to unconditionally log it without if (logger.isDebugEnabled()) { since it won't have an additional impact on performance.", "url": "https://github.com/openhab/openhab-addons/pull/7143#discussion_r390565804", "createdAt": "2020-03-10T19:40:57Z", "author": {"login": "wborn"}, "path": "bundles/org.openhab.binding.goecharger/src/main/java/org/openhab/binding/goecharger/internal/handler/GoEChargerHandler.java", "diffHunk": "@@ -287,7 +301,9 @@ private void sendData(String key, String value) {\n             if (logger.isDebugEnabled()) {\n                 logger.debug(\"Response: {}\", contentResponse.getContentAsString());\n             }\n-            updateStatus(ThingStatus.ONLINE, ThingStatusDetail.NONE);\n+            GoEStatusResponseDTO result = gson.fromJson(contentResponse.getContentAsString(),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7098bb95bead9d024ce587d90788f5c0c2e7ff2a"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDc1NTY3Nw==", "bodyText": "fixed it for both get and post", "url": "https://github.com/openhab/openhab-addons/pull/7143#discussion_r390755677", "createdAt": "2020-03-11T05:41:51Z", "author": {"login": "SamuelBrucksch"}, "path": "bundles/org.openhab.binding.goecharger/src/main/java/org/openhab/binding/goecharger/internal/handler/GoEChargerHandler.java", "diffHunk": "@@ -287,7 +301,9 @@ private void sendData(String key, String value) {\n             if (logger.isDebugEnabled()) {\n                 logger.debug(\"Response: {}\", contentResponse.getContentAsString());\n             }\n-            updateStatus(ThingStatus.ONLINE, ThingStatusDetail.NONE);\n+            GoEStatusResponseDTO result = gson.fromJson(contentResponse.getContentAsString(),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDU2NTgwNA=="}, "originalCommit": {"oid": "7098bb95bead9d024ce587d90788f5c0c2e7ff2a"}, "originalPosition": 28}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQyMDQ1MjM0OnYy", "diffSide": "RIGHT", "path": "bundles/org.openhab.binding.goecharger/src/main/java/org/openhab/binding/goecharger/internal/handler/GoEChargerHandler.java", "isResolved": false, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxOTo1MjoyN1rOF0emug==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQxODoxNzozOVrOF1DPtA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDU3MTcwNg==", "bodyText": "I would make sure to either log the exception or include the exception message as part of the status details.\nThere is a big difference between a device not responding and the device returning erroneous data. It is beneficial for the user to know which one it is.\nAlso make sure to catch JsonSyntaxException!\nThis also applies to thegetGoEData() below.", "url": "https://github.com/openhab/openhab-addons/pull/7143#discussion_r390571706", "createdAt": "2020-03-10T19:52:27Z", "author": {"login": "cpmeister"}, "path": "bundles/org.openhab.binding.goecharger/src/main/java/org/openhab/binding/goecharger/internal/handler/GoEChargerHandler.java", "diffHunk": "@@ -287,7 +301,9 @@ private void sendData(String key, String value) {\n             if (logger.isDebugEnabled()) {\n                 logger.debug(\"Response: {}\", contentResponse.getContentAsString());\n             }\n-            updateStatus(ThingStatus.ONLINE, ThingStatusDetail.NONE);\n+            GoEStatusResponseDTO result = gson.fromJson(contentResponse.getContentAsString(),\n+                    GoEStatusResponseDTO.class);\n+            updateChannelsAndStatus(result);\n         } catch (InterruptedException | TimeoutException | ExecutionException e) {\n             updateStatus(ThingStatus.OFFLINE, ThingStatusDetail.OFFLINE.COMMUNICATION_ERROR,\n                     \"No response received on command\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7098bb95bead9d024ce587d90788f5c0c2e7ff2a"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDc1NDM3OA==", "bodyText": "So how detailed should the messages of the thing status update be? I guess a complete exception stacktrace is too much, but the message itself should be ok?", "url": "https://github.com/openhab/openhab-addons/pull/7143#discussion_r390754378", "createdAt": "2020-03-11T05:36:00Z", "author": {"login": "SamuelBrucksch"}, "path": "bundles/org.openhab.binding.goecharger/src/main/java/org/openhab/binding/goecharger/internal/handler/GoEChargerHandler.java", "diffHunk": "@@ -287,7 +301,9 @@ private void sendData(String key, String value) {\n             if (logger.isDebugEnabled()) {\n                 logger.debug(\"Response: {}\", contentResponse.getContentAsString());\n             }\n-            updateStatus(ThingStatus.ONLINE, ThingStatusDetail.NONE);\n+            GoEStatusResponseDTO result = gson.fromJson(contentResponse.getContentAsString(),\n+                    GoEStatusResponseDTO.class);\n+            updateChannelsAndStatus(result);\n         } catch (InterruptedException | TimeoutException | ExecutionException e) {\n             updateStatus(ThingStatus.OFFLINE, ThingStatusDetail.OFFLINE.COMMUNICATION_ERROR,\n                     \"No response received on command\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDU3MTcwNg=="}, "originalCommit": {"oid": "7098bb95bead9d024ce587d90788f5c0c2e7ff2a"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDc1NTc5Mw==", "bodyText": "Using just the message is perfectly fine.", "url": "https://github.com/openhab/openhab-addons/pull/7143#discussion_r390755793", "createdAt": "2020-03-11T05:42:27Z", "author": {"login": "cpmeister"}, "path": "bundles/org.openhab.binding.goecharger/src/main/java/org/openhab/binding/goecharger/internal/handler/GoEChargerHandler.java", "diffHunk": "@@ -287,7 +301,9 @@ private void sendData(String key, String value) {\n             if (logger.isDebugEnabled()) {\n                 logger.debug(\"Response: {}\", contentResponse.getContentAsString());\n             }\n-            updateStatus(ThingStatus.ONLINE, ThingStatusDetail.NONE);\n+            GoEStatusResponseDTO result = gson.fromJson(contentResponse.getContentAsString(),\n+                    GoEStatusResponseDTO.class);\n+            updateChannelsAndStatus(result);\n         } catch (InterruptedException | TimeoutException | ExecutionException e) {\n             updateStatus(ThingStatus.OFFLINE, ThingStatusDetail.OFFLINE.COMMUNICATION_ERROR,\n                     \"No response received on command\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDU3MTcwNg=="}, "originalCommit": {"oid": "7098bb95bead9d024ce587d90788f5c0c2e7ff2a"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDgyMDQyNw==", "bodyText": "So i guess i can just use\ncatch (Exception e) {\n  updateStatus(ThingStatus.OFFLINE, ThingStatusDetail.OFFLINE.COMMUNICATION_ERROR,\n                    e.getMessage());\n}\n\nThat also includes json exceptions then", "url": "https://github.com/openhab/openhab-addons/pull/7143#discussion_r390820427", "createdAt": "2020-03-11T08:51:30Z", "author": {"login": "SamuelBrucksch"}, "path": "bundles/org.openhab.binding.goecharger/src/main/java/org/openhab/binding/goecharger/internal/handler/GoEChargerHandler.java", "diffHunk": "@@ -287,7 +301,9 @@ private void sendData(String key, String value) {\n             if (logger.isDebugEnabled()) {\n                 logger.debug(\"Response: {}\", contentResponse.getContentAsString());\n             }\n-            updateStatus(ThingStatus.ONLINE, ThingStatusDetail.NONE);\n+            GoEStatusResponseDTO result = gson.fromJson(contentResponse.getContentAsString(),\n+                    GoEStatusResponseDTO.class);\n+            updateChannelsAndStatus(result);\n         } catch (InterruptedException | TimeoutException | ExecutionException e) {\n             updateStatus(ThingStatus.OFFLINE, ThingStatusDetail.OFFLINE.COMMUNICATION_ERROR,\n                     \"No response received on command\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDU3MTcwNg=="}, "originalCommit": {"oid": "7098bb95bead9d024ce587d90788f5c0c2e7ff2a"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTE3MjAyMA==", "bodyText": "Nope. Never catch Exception. But you can catch several exceptions in one catch-clause, e.g.\ntry {\n    ....\n} catch (IOException | JsonException | WhateverException e) {\n    do your exception handling here\n}", "url": "https://github.com/openhab/openhab-addons/pull/7143#discussion_r391172020", "createdAt": "2020-03-11T18:17:39Z", "author": {"login": "J-N-K"}, "path": "bundles/org.openhab.binding.goecharger/src/main/java/org/openhab/binding/goecharger/internal/handler/GoEChargerHandler.java", "diffHunk": "@@ -287,7 +301,9 @@ private void sendData(String key, String value) {\n             if (logger.isDebugEnabled()) {\n                 logger.debug(\"Response: {}\", contentResponse.getContentAsString());\n             }\n-            updateStatus(ThingStatus.ONLINE, ThingStatusDetail.NONE);\n+            GoEStatusResponseDTO result = gson.fromJson(contentResponse.getContentAsString(),\n+                    GoEStatusResponseDTO.class);\n+            updateChannelsAndStatus(result);\n         } catch (InterruptedException | TimeoutException | ExecutionException e) {\n             updateStatus(ThingStatus.OFFLINE, ThingStatusDetail.OFFLINE.COMMUNICATION_ERROR,\n                     \"No response received on command\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDU3MTcwNg=="}, "originalCommit": {"oid": "7098bb95bead9d024ce587d90788f5c0c2e7ff2a"}, "originalPosition": 33}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 681, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}