{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkyNjUzMDQy", "number": 8574, "title": "[kostalinverter] Add Second Generation (Piko10-20) type inverters", "bodyText": "Binding redesigned 20200924 by \u00d6rjan Backsell\nSigned-off-by: basse04 orjan.backsell@gmail.com\nAlso-by: Christian Schneider <>\nAlso-by: Ren\u00e9 Stakemeier <>\nAlso-by: Christoph Weitkamp <>\nThis is the upgraded version of Kostal Inverter extended with functionality for the Inverter type of Second generation PIKO 10-20\n[kostalinverter] regarded oH3.\nThis is the upgraded version of [kostalinverter] extended with functionality for Kostal  Piko 10-20 (Second Generation) inverters.\nThis PR is a replacement of #7796 which was closed due to the switch from 2.5.x to 3.0.\nBR Basse", "createdAt": "2020-09-24T19:24:46Z", "url": "https://github.com/openhab/openhab-addons/pull/8574", "merged": true, "mergeCommit": {"oid": "9498590edb98799bfb7debe87c867c46e2b47da9"}, "closed": true, "closedAt": "2021-02-04T22:17:05Z", "author": {"login": "basse04"}, "timelineItems": {"totalCount": 41, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdQOPDOAFqTUwMzkwOTM0Ng==", "endCursor": "Y3Vyc29yOnYyOpPPAAABd28eTegFqTU4Mzg2MTE3MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAzOTA5MzQ2", "url": "https://github.com/openhab/openhab-addons/pull/8574#pullrequestreview-503909346", "createdAt": "2020-10-07T13:58:42Z", "commit": {"oid": "b246c14fc937cf5a260588d0d6505c65433607e2"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 17, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QxMzo1ODo0MlrOHd0wUA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QxNDo1MDozOFrOHd3Rwg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTAzNTA4OA==", "bodyText": "The empty lines prevent the table from being rendered correctly.", "url": "https://github.com/openhab/openhab-addons/pull/8574#discussion_r501035088", "createdAt": "2020-10-07T13:58:42Z", "author": {"login": "fwolter"}, "path": "bundles/org.openhab.binding.kostalinverter/README.md", "diffHunk": "@@ -59,6 +66,76 @@ None\n -   l3Voltage\n -   l3Power\n \n+\n+### Second generation devices (PIKO 10-20, PIKO NEW GENERATION)\n+\n+| Channel Type ID           | Item Type                 | Description\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b246c14fc937cf5a260588d0d6505c65433607e2"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTAzNjU5Ng==", "bodyText": "This don't need to be a QuantityType. Can you document the available values?\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            | operatingStatus           | Number:Dimensionless        \n          \n          \n            \n            | operatingStatus           | Number", "url": "https://github.com/openhab/openhab-addons/pull/8574#discussion_r501036596", "createdAt": "2020-10-07T14:00:27Z", "author": {"login": "fwolter"}, "path": "bundles/org.openhab.binding.kostalinverter/README.md", "diffHunk": "@@ -59,6 +66,76 @@ None\n -   l3Voltage\n -   l3Power\n \n+\n+### Second generation devices (PIKO 10-20, PIKO NEW GENERATION)\n+\n+| Channel Type ID           | Item Type                 | Description\n+\n+| gridOutputPower           | Number:Power              | WATT\n+| yieldDay                  | Number:Energy             | WATT_HOUR\n+| yieldTotal                | Number:Energy             | WATT_HOUR\n+| operatingStatus           | Number:Dimensionless        ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b246c14fc937cf5a260588d0d6505c65433607e2"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTAzNzQ0Nw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            The following Channels are changeable\n          \n          \n            \n            The following Channels are writeable", "url": "https://github.com/openhab/openhab-addons/pull/8574#discussion_r501037447", "createdAt": "2020-10-07T14:01:36Z", "author": {"login": "fwolter"}, "path": "bundles/org.openhab.binding.kostalinverter/README.md", "diffHunk": "@@ -59,6 +66,76 @@ None\n -   l3Voltage\n -   l3Power\n \n+\n+### Second generation devices (PIKO 10-20, PIKO NEW GENERATION)\n+\n+| Channel Type ID           | Item Type                 | Description\n+\n+| gridOutputPower           | Number:Power              | WATT\n+| yieldDay                  | Number:Energy             | WATT_HOUR\n+| yieldTotal                | Number:Energy             | WATT_HOUR\n+| operatingStatus           | Number:Dimensionless        \n+| gridVoltageL1             | Number:ElectricPotential  | VOLT\n+| gridCurrentL1             | Number:ElectricCurrent    | AMPERE\n+| gridPowerL1               | Number:Power              | WATT\n+| gridVoltageL2             | Number:ElectricPotential  | VOLT\n+| gridCurrentL2             | Number:ElectricCurrent    | AMPERE\n+| gridPowerL2               | Number:Power              | WATT\n+| gridVoltageL3             | Number:ElectricPotential  | VOLT\n+| gridCurrentL3             | Number:ElectricCurrent    | AMPERE\n+| gridPowerL3               | Number:Power              | WATT\n+| dcPowerPV                 | Number:Power              | WATT\n+| dc1Voltage                | Number:ElectricPotential  | VOLT\n+| dc1Current                | Number:ElectricCurrent    | AMPERE\n+| dc1Power                  | Number:Power              | WATT\n+| dc2Voltage                | Number:ElectricPotential  | VOLT\n+| dc2Current                | Number:ElectricCurrent    | AMPERE\n+| dc2Power                  | Number:Power              | WATT\n+| dc3Voltage                | Number:ElectricPotential  | VOLT\n+| dc3Current                | Number:ElectricCurrent    | AMPERE\n+| dc3Power                  | Number:Power              | WATT\n+\n+| aktHomeConsumptionSolar   | Number:Power              | WATT\n+| aktHomeConsumptionBat     | Number:Power              | WATT\n+| aktHomeConsumptionGrid    | Number:Power              | WATT_HOUR\n+| phaseSelHomeConsumpL1     | Number:Power              | WATT\n+| phaseSelHomeConsumpL2     | Number:Power              | WATT\n+| phaseSelHomeConsumpL3     | Number:Power              | WATT\n+| gridFreq                  | Number:Frequency          | HERTZ\n+| gridCosPhi                | Number:Angle              | DEGREE_ANGLE\n+| homeConsumptionDay        | Number:Energy             | WATT_HOUR\n+| ownConsumptionDay         | Number:Energy             | WATT_HOUR\n+| ownConsRateDay            | Number:Dimensionless      | PERCENT\n+| autonomyDegreeDay         | Number:Dimensionless      | PERCENT\n+| homeConsumptionTotal      | Number:Energy             | WATT_HOUR\n+| ownConsumptionTotal       | Number:Energy             | WATT_HOUR\n+| totalOperatingTime        | Number:Time               | HOUR\n+| current                   | Number:ElectricCurrent    | AMPERE\n+| currentDir                | Number:ElectricCurrent    | AMPERE\n+| chargeCycles              | Number:Dimensionless        \n+| batteryTemperature        | Number:Temperature        | CELCIUS\n+| loginterval               | Number:Time               | MINUTE\n+| s0InPulseCnt              | Number:Dimensionless        \n+| ownConsRateTotal          | Number:Dimensionless      | PERCENT\n+| autonomyDegreeTotal       | Number:Dimensionless      | PERCENT\n+| batteryVoltage            | Number:ElectricPotential  | VOLT\n+| batStateOfCharge          | Number:Dimensionless      | PERCENT\n+\n+The following Channels are changeable", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b246c14fc937cf5a260588d0d6505c65433607e2"}, "originalPosition": 81}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTAzODI4OA==", "bodyText": "Can you add descriptions, what these Channels represent?", "url": "https://github.com/openhab/openhab-addons/pull/8574#discussion_r501038288", "createdAt": "2020-10-07T14:02:37Z", "author": {"login": "fwolter"}, "path": "bundles/org.openhab.binding.kostalinverter/README.md", "diffHunk": "@@ -59,6 +66,76 @@ None\n -   l3Voltage\n -   l3Power\n \n+\n+### Second generation devices (PIKO 10-20, PIKO NEW GENERATION)\n+\n+| Channel Type ID           | Item Type                 | Description", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b246c14fc937cf5a260588d0d6505c65433607e2"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTAzOTQ3NQ==", "bodyText": "I think QuantityType doesn't make sense here either.", "url": "https://github.com/openhab/openhab-addons/pull/8574#discussion_r501039475", "createdAt": "2020-10-07T14:04:07Z", "author": {"login": "fwolter"}, "path": "bundles/org.openhab.binding.kostalinverter/README.md", "diffHunk": "@@ -59,6 +66,76 @@ None\n -   l3Voltage\n -   l3Power\n \n+\n+### Second generation devices (PIKO 10-20, PIKO NEW GENERATION)\n+\n+| Channel Type ID           | Item Type                 | Description\n+\n+| gridOutputPower           | Number:Power              | WATT\n+| yieldDay                  | Number:Energy             | WATT_HOUR\n+| yieldTotal                | Number:Energy             | WATT_HOUR\n+| operatingStatus           | Number:Dimensionless        \n+| gridVoltageL1             | Number:ElectricPotential  | VOLT\n+| gridCurrentL1             | Number:ElectricCurrent    | AMPERE\n+| gridPowerL1               | Number:Power              | WATT\n+| gridVoltageL2             | Number:ElectricPotential  | VOLT\n+| gridCurrentL2             | Number:ElectricCurrent    | AMPERE\n+| gridPowerL2               | Number:Power              | WATT\n+| gridVoltageL3             | Number:ElectricPotential  | VOLT\n+| gridCurrentL3             | Number:ElectricCurrent    | AMPERE\n+| gridPowerL3               | Number:Power              | WATT\n+| dcPowerPV                 | Number:Power              | WATT\n+| dc1Voltage                | Number:ElectricPotential  | VOLT\n+| dc1Current                | Number:ElectricCurrent    | AMPERE\n+| dc1Power                  | Number:Power              | WATT\n+| dc2Voltage                | Number:ElectricPotential  | VOLT\n+| dc2Current                | Number:ElectricCurrent    | AMPERE\n+| dc2Power                  | Number:Power              | WATT\n+| dc3Voltage                | Number:ElectricPotential  | VOLT\n+| dc3Current                | Number:ElectricCurrent    | AMPERE\n+| dc3Power                  | Number:Power              | WATT\n+\n+| aktHomeConsumptionSolar   | Number:Power              | WATT\n+| aktHomeConsumptionBat     | Number:Power              | WATT\n+| aktHomeConsumptionGrid    | Number:Power              | WATT_HOUR\n+| phaseSelHomeConsumpL1     | Number:Power              | WATT\n+| phaseSelHomeConsumpL2     | Number:Power              | WATT\n+| phaseSelHomeConsumpL3     | Number:Power              | WATT\n+| gridFreq                  | Number:Frequency          | HERTZ\n+| gridCosPhi                | Number:Angle              | DEGREE_ANGLE\n+| homeConsumptionDay        | Number:Energy             | WATT_HOUR\n+| ownConsumptionDay         | Number:Energy             | WATT_HOUR\n+| ownConsRateDay            | Number:Dimensionless      | PERCENT\n+| autonomyDegreeDay         | Number:Dimensionless      | PERCENT\n+| homeConsumptionTotal      | Number:Energy             | WATT_HOUR\n+| ownConsumptionTotal       | Number:Energy             | WATT_HOUR\n+| totalOperatingTime        | Number:Time               | HOUR\n+| current                   | Number:ElectricCurrent    | AMPERE\n+| currentDir                | Number:ElectricCurrent    | AMPERE\n+| chargeCycles              | Number:Dimensionless        ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b246c14fc937cf5a260588d0d6505c65433607e2"}, "originalPosition": 72}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTA1NDE2Mw==", "bodyText": "There's also a ONE unit. Same for the S0 counter.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            SecondGenerationBindingConstants.CHANNEL_CHARGECYCLES, \"td\", 124, SmartHomeUnits.PERCENT, \"33556228\"));\n          \n          \n            \n                    channelConfigurationExt.add(new SecondGenerationChannelConfiguration(\n          \n          \n            \n                            SecondGenerationBindingConstants.CHANNEL_CHARGECYCLES, \"td\", 124, SmartHomeUnits.ONE, \"33556228\"));\n          \n          \n            \n                    channelConfigurationExt.add(new SecondGenerationChannelConfiguration(", "url": "https://github.com/openhab/openhab-addons/pull/8574#discussion_r501054163", "createdAt": "2020-10-07T14:22:50Z", "author": {"login": "fwolter"}, "path": "bundles/org.openhab.binding.kostalinverter/src/main/java/org/openhab/binding/internal/kostal/inverter/secondgeneration/SecondGenerationChannelConfiguration.java", "diffHunk": "@@ -0,0 +1,188 @@\n+/**\n+ * Copyright (c) 2010-2020 Contributors to the openHAB project\n+ *\n+ * See the NOTICE file(s) distributed with this work for additional\n+ * information.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+package org.openhab.binding.internal.kostal.inverter.secondgeneration;\n+\n+import java.util.ArrayList;\n+import java.util.List;\n+\n+import javax.measure.Unit;\n+\n+import org.eclipse.jdt.annotation.NonNullByDefault;\n+import org.openhab.core.library.unit.SIUnits;\n+import org.openhab.core.library.unit.SmartHomeUnits;\n+\n+/**\n+ * The {@link SecondGenerationChannelConfiguration} class defines methods, which set up channel configuration,\n+ * used in the second generation part of the binding.\n+ *\n+ *\n+ * @author Christian Schneider - Initial contribution\n+ * @author Christoph Weitkamp - Incorporated new QuantityType (Units of Measurement)\n+ * @author \u00d6rjan Backsell - Added methods for channel configuration (Piko1020, Piko New Generation)\n+ */\n+\n+@NonNullByDefault\n+public class SecondGenerationChannelConfiguration {\n+    public String id;\n+    public String tag;\n+    public int num;\n+    public Unit<?> unit;\n+    public String dxsEntries;\n+\n+    public SecondGenerationChannelConfiguration(String id, String tag, int num, Unit<?> unit, String dxsEntries) {\n+        this.id = id;\n+        this.tag = tag;\n+        this.num = num;\n+        this.unit = unit;\n+        this.dxsEntries = dxsEntries;\n+    }\n+\n+    public static List<SecondGenerationChannelConfiguration> getChannelConfiguration() {\n+        final List<SecondGenerationChannelConfiguration> channelConfiguration = new ArrayList<>();\n+\n+        channelConfiguration.add(new SecondGenerationChannelConfiguration(\n+                SecondGenerationBindingConstants.CHANNEL_GRIDOUTPUTPOWER, \"td\", 4, SmartHomeUnits.WATT, \"67109120\"));\n+        channelConfiguration.add(new SecondGenerationChannelConfiguration(\n+                SecondGenerationBindingConstants.CHANNEL_YIELD_DAY, \"td\", 7, SmartHomeUnits.WATT_HOUR, \"251658754\"));\n+        channelConfiguration\n+                .add(new SecondGenerationChannelConfiguration(SecondGenerationBindingConstants.CHANNEL_YIELD_TOTAL,\n+                        \"td\", 10, SmartHomeUnits.KILOWATT_HOUR, \"251658753\"));\n+        channelConfiguration\n+                .add(new SecondGenerationChannelConfiguration(SecondGenerationBindingConstants.CHANNEL_OPERATING_STATUS,\n+                        \"td\", 13, SmartHomeUnits.PERCENT, \"16780032\"));\n+        channelConfiguration.add(new SecondGenerationChannelConfiguration(\n+                SecondGenerationBindingConstants.CHANNEL_GRIDVOLTAGEL1, \"td\", 16, SmartHomeUnits.VOLT, \"67109378\"));\n+        channelConfiguration.add(new SecondGenerationChannelConfiguration(\n+                SecondGenerationBindingConstants.CHANNEL_GRIDCURRENTL1, \"td\", 19, SmartHomeUnits.AMPERE, \"67109377\"));\n+        channelConfiguration.add(new SecondGenerationChannelConfiguration(\n+                SecondGenerationBindingConstants.CHANNEL_GRIDPOWERL1, \"td\", 22, SmartHomeUnits.WATT, \"67109377\"));\n+        channelConfiguration.add(new SecondGenerationChannelConfiguration(\n+                SecondGenerationBindingConstants.CHANNEL_GRIDVOLTAGEL2, \"td\", 25, SmartHomeUnits.VOLT, \"67109634\"));\n+        channelConfiguration.add(new SecondGenerationChannelConfiguration(\n+                SecondGenerationBindingConstants.CHANNEL_GRIDCURRENTL2, \"td\", 28, SmartHomeUnits.AMPERE, \"67109633\"));\n+        channelConfiguration.add(new SecondGenerationChannelConfiguration(\n+                SecondGenerationBindingConstants.CHANNEL_GRIDPOWERL2, \"td\", 31, SmartHomeUnits.WATT, \"67109635\"));\n+        channelConfiguration.add(new SecondGenerationChannelConfiguration(\n+                SecondGenerationBindingConstants.CHANNEL_GRIDVOLTAGEL3, \"td\", 34, SmartHomeUnits.VOLT, \"67109890\"));\n+        channelConfiguration.add(new SecondGenerationChannelConfiguration(\n+                SecondGenerationBindingConstants.CHANNEL_GRIDCURRENTL3, \"td\", 37, SmartHomeUnits.AMPERE, \"67109889\"));\n+        channelConfiguration.add(new SecondGenerationChannelConfiguration(\n+                SecondGenerationBindingConstants.CHANNEL_GRIDPOWERL3, \"td\", 40, SmartHomeUnits.WATT, \"67109891\"));\n+        channelConfiguration.add(new SecondGenerationChannelConfiguration(\n+                SecondGenerationBindingConstants.CHANNEL_DCPOWERPV, \"td\", 43, SmartHomeUnits.WATT, \"33556736\"));\n+        channelConfiguration.add(new SecondGenerationChannelConfiguration(\n+                SecondGenerationBindingConstants.CHANNEL_DC1VOLTAGE, \"td\", 46, SmartHomeUnits.VOLT, \"33555202\"));\n+        channelConfiguration.add(new SecondGenerationChannelConfiguration(\n+                SecondGenerationBindingConstants.CHANNEL_DC1CURRENT, \"td\", 49, SmartHomeUnits.AMPERE, \"33555201\"));\n+        channelConfiguration.add(new SecondGenerationChannelConfiguration(\n+                SecondGenerationBindingConstants.CHANNEL_DC1POWER, \"td\", 52, SmartHomeUnits.WATT, \"33555203\"));\n+        channelConfiguration.add(new SecondGenerationChannelConfiguration(\n+                SecondGenerationBindingConstants.CHANNEL_DC2VOLTAGE, \"td\", 55, SmartHomeUnits.VOLT, \"33555458\"));\n+        channelConfiguration.add(new SecondGenerationChannelConfiguration(\n+                SecondGenerationBindingConstants.CHANNEL_DC2CURRENT, \"td\", 58, SmartHomeUnits.AMPERE, \"33555457\"));\n+        channelConfiguration.add(new SecondGenerationChannelConfiguration(\n+                SecondGenerationBindingConstants.CHANNEL_DC2POWER, \"td\", 61, SmartHomeUnits.WATT, \"33555459\"));\n+        channelConfiguration.add(new SecondGenerationChannelConfiguration(\n+                SecondGenerationBindingConstants.CHANNEL_DC3VOLTAGE, \"td\", 64, SmartHomeUnits.VOLT, \"33555714\"));\n+        channelConfiguration.add(new SecondGenerationChannelConfiguration(\n+                SecondGenerationBindingConstants.CHANNEL_DC3CURRENT, \"td\", 67, SmartHomeUnits.AMPERE, \"33555713\"));\n+        channelConfiguration.add(new SecondGenerationChannelConfiguration(\n+                SecondGenerationBindingConstants.CHANNEL_DC3POWER, \"td\", 70, SmartHomeUnits.WATT, \"33555715\"));\n+\n+        return channelConfiguration;\n+    }\n+\n+    public static List<SecondGenerationChannelConfiguration> getChannelConfigurationExt() {\n+        final List<SecondGenerationChannelConfiguration> channelConfigurationExt = new ArrayList<>();\n+\n+        channelConfigurationExt.add(new SecondGenerationChannelConfiguration(\n+                SecondGenerationBindingConstants.CHANNEL_AKTHOMECONSUMTIONSOLAR, \"td\", 73, SmartHomeUnits.WATT,\n+                \"83886336\"));\n+        channelConfigurationExt.add(\n+                new SecondGenerationChannelConfiguration(SecondGenerationBindingConstants.CHANNEL_AKTHOMECONSUMPTIONBAT,\n+                        \"td\", 76, SmartHomeUnits.WATT, \"83886592\"));\n+        channelConfigurationExt.add(\n+                new SecondGenerationChannelConfiguration(SecondGenerationBindingConstants.CHANNEL_AKTHOMECONSUMPTIONBAT,\n+                        \"td\", 79, SmartHomeUnits.WATT_HOUR, \"83886848\"));\n+        channelConfigurationExt.add(\n+                new SecondGenerationChannelConfiguration(SecondGenerationBindingConstants.CHANNEL_PHASESELHOMECONSUMPL1,\n+                        \"td\", 82, SmartHomeUnits.WATT, \"83887106\"));\n+        channelConfigurationExt.add(\n+                new SecondGenerationChannelConfiguration(SecondGenerationBindingConstants.CHANNEL_PHASESELHOMECONSUMPL2,\n+                        \"td\", 85, SmartHomeUnits.WATT, \"83887362\"));\n+        channelConfigurationExt.add(\n+                new SecondGenerationChannelConfiguration(SecondGenerationBindingConstants.CHANNEL_PHASESELHOMECONSUMPL3,\n+                        \"td\", 88, SmartHomeUnits.WATT, \"83887618\"));\n+        channelConfigurationExt.add(new SecondGenerationChannelConfiguration(\n+                SecondGenerationBindingConstants.CHANNEL_GRIDFREQ, \"td\", 91, SmartHomeUnits.HERTZ, \"67110400\"));\n+        channelConfigurationExt\n+                .add(new SecondGenerationChannelConfiguration(SecondGenerationBindingConstants.CHANNEL_GRIDCOSPHI, \"td\",\n+                        94, SmartHomeUnits.DEGREE_ANGLE, \"67110656\"));\n+        channelConfigurationExt.add(\n+                new SecondGenerationChannelConfiguration(SecondGenerationBindingConstants.CHANNEL_HOMECONSUMPTION_DAY,\n+                        \"td\", 97, SmartHomeUnits.WATT_HOUR, \"251659010\"));\n+        channelConfigurationExt.add(\n+                new SecondGenerationChannelConfiguration(SecondGenerationBindingConstants.CHANNEL_OWNCONSUMPTION_DAY,\n+                        \"td\", 100, SmartHomeUnits.WATT_HOUR, \"251659266\"));\n+        channelConfigurationExt\n+                .add(new SecondGenerationChannelConfiguration(SecondGenerationBindingConstants.CHANNEL_OWNCONSRATE_DAY,\n+                        \"td\", 103, SmartHomeUnits.PERCENT, \"251659278\"));\n+        channelConfigurationExt.add(\n+                new SecondGenerationChannelConfiguration(SecondGenerationBindingConstants.CHANNEL_AUTONOMYDEGREE_DAY,\n+                        \"td\", 106, SmartHomeUnits.PERCENT, \"251659279\"));\n+        channelConfigurationExt.add(\n+                new SecondGenerationChannelConfiguration(SecondGenerationBindingConstants.CHANNEL_HOMECONSUMPTION_TOTAL,\n+                        \"td\", 109, SmartHomeUnits.WATT_HOUR, \"251659009\"));\n+        channelConfigurationExt.add(\n+                new SecondGenerationChannelConfiguration(SecondGenerationBindingConstants.CHANNEL_OWNCONSUMPTION_TOTAL,\n+                        \"td\", 112, SmartHomeUnits.WATT_HOUR, \"251659265\"));\n+        channelConfigurationExt.add(\n+                new SecondGenerationChannelConfiguration(SecondGenerationBindingConstants.CHANNEL_TOTALOPERATINGTIME,\n+                        \"td\", 115, SmartHomeUnits.HOUR, \"251658496\"));\n+        channelConfigurationExt.add(new SecondGenerationChannelConfiguration(\n+                SecondGenerationBindingConstants.CHANNEL_CURRENT, \"td\", 118, SmartHomeUnits.AMPERE, \"33556238\"));\n+        channelConfigurationExt.add(new SecondGenerationChannelConfiguration(\n+                SecondGenerationBindingConstants.CHANNEL_CURRENTDIR, \"td\", 121, SmartHomeUnits.AMPERE, \"33556230\"));\n+        channelConfigurationExt.add(new SecondGenerationChannelConfiguration(\n+                SecondGenerationBindingConstants.CHANNEL_CHARGECYCLES, \"td\", 124, SmartHomeUnits.PERCENT, \"33556228\"));\n+        channelConfigurationExt.add(new SecondGenerationChannelConfiguration(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b246c14fc937cf5a260588d0d6505c65433607e2"}, "originalPosition": 158}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTA1ODAxNg==", "bodyText": "This could be moved to the handler or the constants class. Also, it's good practice to append the unit to the field name e.g. TIMEOUT_SEC.", "url": "https://github.com/openhab/openhab-addons/pull/8574#discussion_r501058016", "createdAt": "2020-10-07T14:27:37Z", "author": {"login": "fwolter"}, "path": "bundles/org.openhab.binding.kostalinverter/src/main/java/org/openhab/binding/internal/kostal/inverter/secondgeneration/SecondGenerationConfiguration.java", "diffHunk": "@@ -0,0 +1,35 @@\n+/**\n+ * Copyright (c) 2010-2020 Contributors to the openHAB project\n+ *\n+ * See the NOTICE file(s) distributed with this work for additional\n+ * information.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+\n+package org.openhab.binding.internal.kostal.inverter.secondgeneration;\n+\n+import org.eclipse.jdt.annotation.NonNullByDefault;\n+\n+/**\n+ * The {@link SecondGenerationConfiguration} class contains fields mapping thing configuration parameters,\n+ * used in the second generation part of the binding.\n+ *\n+ * @author \u00d6rjan Backsell - Initial contribution Piko1020, Piko New Generation\n+ *\n+ */\n+@NonNullByDefault\n+public class SecondGenerationConfiguration {\n+\n+    public static final long REFRESHINTERVAL = 60;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b246c14fc937cf5a260588d0d6505c65433607e2"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTA1ODEyMA==", "bodyText": "Can this be String?", "url": "https://github.com/openhab/openhab-addons/pull/8574#discussion_r501058120", "createdAt": "2020-10-07T14:27:44Z", "author": {"login": "fwolter"}, "path": "bundles/org.openhab.binding.kostalinverter/src/main/java/org/openhab/binding/internal/kostal/inverter/secondgeneration/SecondGenerationConfiguration.java", "diffHunk": "@@ -0,0 +1,35 @@\n+/**\n+ * Copyright (c) 2010-2020 Contributors to the openHAB project\n+ *\n+ * See the NOTICE file(s) distributed with this work for additional\n+ * information.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+\n+package org.openhab.binding.internal.kostal.inverter.secondgeneration;\n+\n+import org.eclipse.jdt.annotation.NonNullByDefault;\n+\n+/**\n+ * The {@link SecondGenerationConfiguration} class contains fields mapping thing configuration parameters,\n+ * used in the second generation part of the binding.\n+ *\n+ * @author \u00d6rjan Backsell - Initial contribution Piko1020, Piko New Generation\n+ *\n+ */\n+@NonNullByDefault\n+public class SecondGenerationConfiguration {\n+\n+    public static final long REFRESHINTERVAL = 60;\n+\n+    public Object url = \"\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b246c14fc937cf5a260588d0d6505c65433607e2"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTA2MzIwMQ==", "bodyText": "These could be merged to a single if. Can you handle the REFRESH command? You could use ExpiringCache to reduce the invocations of refresh(), as REFRESH is triggered for each Channel.", "url": "https://github.com/openhab/openhab-addons/pull/8574#discussion_r501063201", "createdAt": "2020-10-07T14:34:10Z", "author": {"login": "fwolter"}, "path": "bundles/org.openhab.binding.kostalinverter/src/main/java/org/openhab/binding/internal/kostal/inverter/secondgeneration/SecondGenerationHandler.java", "diffHunk": "@@ -0,0 +1,354 @@\n+/**\n+ * Copyright (c) 2010-2020 Contributors to the openHAB project\n+ *\n+ * See the NOTICE file(s) distributed with this work for additional\n+ * information.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+\n+package org.openhab.binding.internal.kostal.inverter.secondgeneration;\n+\n+import java.io.BufferedReader;\n+import java.io.IOException;\n+import java.io.InputStreamReader;\n+import java.math.BigDecimal;\n+import java.net.URL;\n+import java.net.URLConnection;\n+import java.nio.charset.Charset;\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.concurrent.TimeUnit;\n+\n+import javax.measure.Unit;\n+\n+import org.eclipse.jdt.annotation.NonNullByDefault;\n+import org.eclipse.jdt.annotation.Nullable;\n+import org.eclipse.jetty.client.HttpClient;\n+import org.openhab.core.library.types.OnOffType;\n+import org.openhab.core.library.types.QuantityType;\n+import org.openhab.core.library.types.StringType;\n+import org.openhab.core.thing.Channel;\n+import org.openhab.core.thing.ChannelUID;\n+import org.openhab.core.thing.Thing;\n+import org.openhab.core.thing.ThingStatus;\n+import org.openhab.core.thing.ThingStatusDetail;\n+import org.openhab.core.thing.binding.BaseThingHandler;\n+import org.openhab.core.types.Command;\n+import org.openhab.core.types.RefreshType;\n+import org.openhab.core.types.State;\n+import org.openhab.core.types.UnDefType;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import com.google.gson.Gson;\n+import com.google.gson.GsonBuilder;\n+\n+/**\n+ * The {@link SecondGenerationHandler} is responsible for handling commands, which are\n+ * sent to one of the channels, and initiation and refreshing regarded to second generation part of the binding.\n+ *\n+ *\n+ * @author Christian Schneider - Initial contribution\n+ * @author Christoph Weitkamp - Incorporated new QuantityType (Units of Measurement)\n+ * @author \u00d6rjan Backsell - Redesigned regarding Piko1020, Piko New Generation\n+ */\n+\n+@NonNullByDefault\n+public class SecondGenerationHandler extends BaseThingHandler {\n+\n+    private final Logger logger = LoggerFactory.getLogger(SecondGenerationHandler.class);\n+\n+    private final HttpClient httpClient;\n+\n+    private List<SecondGenerationChannelConfiguration> channelConfigs = new ArrayList<>();\n+    private List<SecondGenerationChannelConfiguration> channelConfigsExt = new ArrayList<>();\n+    private List<SecondGenerationChannelConfiguration> channelConfigsExtExt = new ArrayList<>();\n+\n+    public SecondGenerationHandler(Thing thing, HttpClient httpClient) {\n+        super(thing);\n+        this.httpClient = httpClient;\n+    }\n+\n+    @Override\n+    public void handleCommand(ChannelUID channelUID, Command command) {\n+\n+        if (command instanceof RefreshType) {\n+            logger.debug(\"Handle command for {} on channel {}: {}\", thing.getUID(), channelUID, command);\n+        }\n+\n+        if (command == RefreshType.REFRESH) {\n+            return;\n+        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b246c14fc937cf5a260588d0d6505c65433607e2"}, "originalPosition": 86}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTA2NDQ1OQ==", "bodyText": "What type of exception do you expect here? Can you specify the concrete type?", "url": "https://github.com/openhab/openhab-addons/pull/8574#discussion_r501064459", "createdAt": "2020-10-07T14:35:39Z", "author": {"login": "fwolter"}, "path": "bundles/org.openhab.binding.kostalinverter/src/main/java/org/openhab/binding/internal/kostal/inverter/secondgeneration/SecondGenerationHandler.java", "diffHunk": "@@ -0,0 +1,354 @@\n+/**\n+ * Copyright (c) 2010-2020 Contributors to the openHAB project\n+ *\n+ * See the NOTICE file(s) distributed with this work for additional\n+ * information.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+\n+package org.openhab.binding.internal.kostal.inverter.secondgeneration;\n+\n+import java.io.BufferedReader;\n+import java.io.IOException;\n+import java.io.InputStreamReader;\n+import java.math.BigDecimal;\n+import java.net.URL;\n+import java.net.URLConnection;\n+import java.nio.charset.Charset;\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.concurrent.TimeUnit;\n+\n+import javax.measure.Unit;\n+\n+import org.eclipse.jdt.annotation.NonNullByDefault;\n+import org.eclipse.jdt.annotation.Nullable;\n+import org.eclipse.jetty.client.HttpClient;\n+import org.openhab.core.library.types.OnOffType;\n+import org.openhab.core.library.types.QuantityType;\n+import org.openhab.core.library.types.StringType;\n+import org.openhab.core.thing.Channel;\n+import org.openhab.core.thing.ChannelUID;\n+import org.openhab.core.thing.Thing;\n+import org.openhab.core.thing.ThingStatus;\n+import org.openhab.core.thing.ThingStatusDetail;\n+import org.openhab.core.thing.binding.BaseThingHandler;\n+import org.openhab.core.types.Command;\n+import org.openhab.core.types.RefreshType;\n+import org.openhab.core.types.State;\n+import org.openhab.core.types.UnDefType;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import com.google.gson.Gson;\n+import com.google.gson.GsonBuilder;\n+\n+/**\n+ * The {@link SecondGenerationHandler} is responsible for handling commands, which are\n+ * sent to one of the channels, and initiation and refreshing regarded to second generation part of the binding.\n+ *\n+ *\n+ * @author Christian Schneider - Initial contribution\n+ * @author Christoph Weitkamp - Incorporated new QuantityType (Units of Measurement)\n+ * @author \u00d6rjan Backsell - Redesigned regarding Piko1020, Piko New Generation\n+ */\n+\n+@NonNullByDefault\n+public class SecondGenerationHandler extends BaseThingHandler {\n+\n+    private final Logger logger = LoggerFactory.getLogger(SecondGenerationHandler.class);\n+\n+    private final HttpClient httpClient;\n+\n+    private List<SecondGenerationChannelConfiguration> channelConfigs = new ArrayList<>();\n+    private List<SecondGenerationChannelConfiguration> channelConfigsExt = new ArrayList<>();\n+    private List<SecondGenerationChannelConfiguration> channelConfigsExtExt = new ArrayList<>();\n+\n+    public SecondGenerationHandler(Thing thing, HttpClient httpClient) {\n+        super(thing);\n+        this.httpClient = httpClient;\n+    }\n+\n+    @Override\n+    public void handleCommand(ChannelUID channelUID, Command command) {\n+\n+        if (command instanceof RefreshType) {\n+            logger.debug(\"Handle command for {} on channel {}: {}\", thing.getUID(), channelUID, command);\n+        }\n+\n+        if (command == RefreshType.REFRESH) {\n+            return;\n+        }\n+\n+        final @Nullable SecondGenerationConfiguration handleCommandConfig;\n+        handleCommandConfig = getConfigAs(SecondGenerationConfiguration.class);\n+\n+        String url = handleCommandConfig.url.toString();\n+        String username = handleCommandConfig.username;\n+        String password = handleCommandConfig.password;\n+        String valueConfiguration = \"\";\n+        String dxsEntriesConf = \"\";\n+\n+        switch (channelUID.getId()) {\n+            case SecondGenerationBindingConstants.CHANNEL_CHARGETIMEEND:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556236\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_BATTERYTYPE:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556252\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_BATTERYUSAGECONSUMPTION:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556249\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_BATTERYUSAGESTRATEGY:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"83888896\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_SMARTBATTERYCONTROL:\n+                valueConfiguration = \"\";\n+                if (command == OnOffType.ON) {\n+                    valueConfiguration = \"True\";\n+                }\n+                if (command == OnOffType.OFF) {\n+                    valueConfiguration = \"False\";\n+                }\n+                dxsEntriesConf = \"33556484\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_SMARTBATTERYCONTROL_TEXT:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556484\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_BATTERYCHARGETIMEFROM:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556239\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_BATTERYCHARGETIMETO:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556240\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_MAXDEPTHOFDISCHARGE:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556247\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_SHADOWMANAGEMENT:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556483\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_EXTERNALMODULECONTROL:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556482\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_INVERTERNAME:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"16777984\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+        }\n+    }\n+\n+    @Override\n+    public void initialize() {\n+        channelConfigs = SecondGenerationChannelConfiguration.getChannelConfiguration();\n+        channelConfigsExt = SecondGenerationChannelConfiguration.getChannelConfigurationExt();\n+        channelConfigsExtExt = SecondGenerationChannelConfiguration.getChannelConfigurationExtExt();\n+\n+        updateStatus(ThingStatus.UNKNOWN);\n+\n+        scheduler.scheduleWithFixedDelay(() -> {\n+            try {\n+                updateStatus(ThingStatus.ONLINE);\n+                refresh();\n+            } catch (RuntimeException scheduleWithFixedDelayException) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b246c14fc937cf5a260588d0d6505c65433607e2"}, "originalPosition": 191}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTA2NTYyMg==", "bodyText": "Better set the Thing to ONLINE after the communication has succeeded. This avoids flickering of the state.", "url": "https://github.com/openhab/openhab-addons/pull/8574#discussion_r501065622", "createdAt": "2020-10-07T14:37:06Z", "author": {"login": "fwolter"}, "path": "bundles/org.openhab.binding.kostalinverter/src/main/java/org/openhab/binding/internal/kostal/inverter/secondgeneration/SecondGenerationHandler.java", "diffHunk": "@@ -0,0 +1,354 @@\n+/**\n+ * Copyright (c) 2010-2020 Contributors to the openHAB project\n+ *\n+ * See the NOTICE file(s) distributed with this work for additional\n+ * information.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+\n+package org.openhab.binding.internal.kostal.inverter.secondgeneration;\n+\n+import java.io.BufferedReader;\n+import java.io.IOException;\n+import java.io.InputStreamReader;\n+import java.math.BigDecimal;\n+import java.net.URL;\n+import java.net.URLConnection;\n+import java.nio.charset.Charset;\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.concurrent.TimeUnit;\n+\n+import javax.measure.Unit;\n+\n+import org.eclipse.jdt.annotation.NonNullByDefault;\n+import org.eclipse.jdt.annotation.Nullable;\n+import org.eclipse.jetty.client.HttpClient;\n+import org.openhab.core.library.types.OnOffType;\n+import org.openhab.core.library.types.QuantityType;\n+import org.openhab.core.library.types.StringType;\n+import org.openhab.core.thing.Channel;\n+import org.openhab.core.thing.ChannelUID;\n+import org.openhab.core.thing.Thing;\n+import org.openhab.core.thing.ThingStatus;\n+import org.openhab.core.thing.ThingStatusDetail;\n+import org.openhab.core.thing.binding.BaseThingHandler;\n+import org.openhab.core.types.Command;\n+import org.openhab.core.types.RefreshType;\n+import org.openhab.core.types.State;\n+import org.openhab.core.types.UnDefType;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import com.google.gson.Gson;\n+import com.google.gson.GsonBuilder;\n+\n+/**\n+ * The {@link SecondGenerationHandler} is responsible for handling commands, which are\n+ * sent to one of the channels, and initiation and refreshing regarded to second generation part of the binding.\n+ *\n+ *\n+ * @author Christian Schneider - Initial contribution\n+ * @author Christoph Weitkamp - Incorporated new QuantityType (Units of Measurement)\n+ * @author \u00d6rjan Backsell - Redesigned regarding Piko1020, Piko New Generation\n+ */\n+\n+@NonNullByDefault\n+public class SecondGenerationHandler extends BaseThingHandler {\n+\n+    private final Logger logger = LoggerFactory.getLogger(SecondGenerationHandler.class);\n+\n+    private final HttpClient httpClient;\n+\n+    private List<SecondGenerationChannelConfiguration> channelConfigs = new ArrayList<>();\n+    private List<SecondGenerationChannelConfiguration> channelConfigsExt = new ArrayList<>();\n+    private List<SecondGenerationChannelConfiguration> channelConfigsExtExt = new ArrayList<>();\n+\n+    public SecondGenerationHandler(Thing thing, HttpClient httpClient) {\n+        super(thing);\n+        this.httpClient = httpClient;\n+    }\n+\n+    @Override\n+    public void handleCommand(ChannelUID channelUID, Command command) {\n+\n+        if (command instanceof RefreshType) {\n+            logger.debug(\"Handle command for {} on channel {}: {}\", thing.getUID(), channelUID, command);\n+        }\n+\n+        if (command == RefreshType.REFRESH) {\n+            return;\n+        }\n+\n+        final @Nullable SecondGenerationConfiguration handleCommandConfig;\n+        handleCommandConfig = getConfigAs(SecondGenerationConfiguration.class);\n+\n+        String url = handleCommandConfig.url.toString();\n+        String username = handleCommandConfig.username;\n+        String password = handleCommandConfig.password;\n+        String valueConfiguration = \"\";\n+        String dxsEntriesConf = \"\";\n+\n+        switch (channelUID.getId()) {\n+            case SecondGenerationBindingConstants.CHANNEL_CHARGETIMEEND:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556236\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_BATTERYTYPE:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556252\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_BATTERYUSAGECONSUMPTION:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556249\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_BATTERYUSAGESTRATEGY:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"83888896\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_SMARTBATTERYCONTROL:\n+                valueConfiguration = \"\";\n+                if (command == OnOffType.ON) {\n+                    valueConfiguration = \"True\";\n+                }\n+                if (command == OnOffType.OFF) {\n+                    valueConfiguration = \"False\";\n+                }\n+                dxsEntriesConf = \"33556484\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_SMARTBATTERYCONTROL_TEXT:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556484\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_BATTERYCHARGETIMEFROM:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556239\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_BATTERYCHARGETIMETO:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556240\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_MAXDEPTHOFDISCHARGE:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556247\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_SHADOWMANAGEMENT:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556483\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_EXTERNALMODULECONTROL:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556482\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_INVERTERNAME:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"16777984\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+        }\n+    }\n+\n+    @Override\n+    public void initialize() {\n+        channelConfigs = SecondGenerationChannelConfiguration.getChannelConfiguration();\n+        channelConfigsExt = SecondGenerationChannelConfiguration.getChannelConfigurationExt();\n+        channelConfigsExtExt = SecondGenerationChannelConfiguration.getChannelConfigurationExtExt();\n+\n+        updateStatus(ThingStatus.UNKNOWN);\n+\n+        scheduler.scheduleWithFixedDelay(() -> {\n+            try {\n+                updateStatus(ThingStatus.ONLINE);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b246c14fc937cf5a260588d0d6505c65433607e2"}, "originalPosition": 189}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTA2ODAwMg==", "bodyText": "DTOs don't need to be annotated. You could append DTO to the class name to avoid the checkstyle warning. Then, you can also remove @SuppressWarnings of refresh() in the handler.", "url": "https://github.com/openhab/openhab-addons/pull/8574#discussion_r501068002", "createdAt": "2020-10-07T14:40:06Z", "author": {"login": "fwolter"}, "path": "bundles/org.openhab.binding.kostalinverter/src/main/java/org/openhab/binding/internal/kostal/inverter/secondgeneration/SecondGenerationDxsEntriesContainer.java", "diffHunk": "@@ -0,0 +1,30 @@\n+/**\n+ * Copyright (c) 2010-2020 Contributors to the openHAB project\n+ *\n+ * See the NOTICE file(s) distributed with this work for additional\n+ * information.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+package org.openhab.binding.internal.kostal.inverter.secondgeneration;\n+\n+import java.util.List;\n+\n+import org.eclipse.jdt.annotation.NonNullByDefault;\n+import org.eclipse.jdt.annotation.Nullable;\n+\n+/**\n+ * The {@link SecondGenerationDxsEntriesContainer} class defines an Container, which is\n+ * used in the second generation part of the binding.\n+ *\n+ * @author \u00d6rjan Backsell - Initial contribution Piko1020, Piko New Generation\n+ */\n+\n+@NonNullByDefault", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b246c14fc937cf5a260588d0d6505c65433607e2"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTA2OTA5MA==", "bodyText": "You should specify the concrete exception you want to catch, since catching Exception catches also all runtime exceptions.", "url": "https://github.com/openhab/openhab-addons/pull/8574#discussion_r501069090", "createdAt": "2020-10-07T14:41:33Z", "author": {"login": "fwolter"}, "path": "bundles/org.openhab.binding.kostalinverter/src/main/java/org/openhab/binding/internal/kostal/inverter/secondgeneration/SecondGenerationHandler.java", "diffHunk": "@@ -0,0 +1,354 @@\n+/**\n+ * Copyright (c) 2010-2020 Contributors to the openHAB project\n+ *\n+ * See the NOTICE file(s) distributed with this work for additional\n+ * information.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+\n+package org.openhab.binding.internal.kostal.inverter.secondgeneration;\n+\n+import java.io.BufferedReader;\n+import java.io.IOException;\n+import java.io.InputStreamReader;\n+import java.math.BigDecimal;\n+import java.net.URL;\n+import java.net.URLConnection;\n+import java.nio.charset.Charset;\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.concurrent.TimeUnit;\n+\n+import javax.measure.Unit;\n+\n+import org.eclipse.jdt.annotation.NonNullByDefault;\n+import org.eclipse.jdt.annotation.Nullable;\n+import org.eclipse.jetty.client.HttpClient;\n+import org.openhab.core.library.types.OnOffType;\n+import org.openhab.core.library.types.QuantityType;\n+import org.openhab.core.library.types.StringType;\n+import org.openhab.core.thing.Channel;\n+import org.openhab.core.thing.ChannelUID;\n+import org.openhab.core.thing.Thing;\n+import org.openhab.core.thing.ThingStatus;\n+import org.openhab.core.thing.ThingStatusDetail;\n+import org.openhab.core.thing.binding.BaseThingHandler;\n+import org.openhab.core.types.Command;\n+import org.openhab.core.types.RefreshType;\n+import org.openhab.core.types.State;\n+import org.openhab.core.types.UnDefType;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import com.google.gson.Gson;\n+import com.google.gson.GsonBuilder;\n+\n+/**\n+ * The {@link SecondGenerationHandler} is responsible for handling commands, which are\n+ * sent to one of the channels, and initiation and refreshing regarded to second generation part of the binding.\n+ *\n+ *\n+ * @author Christian Schneider - Initial contribution\n+ * @author Christoph Weitkamp - Incorporated new QuantityType (Units of Measurement)\n+ * @author \u00d6rjan Backsell - Redesigned regarding Piko1020, Piko New Generation\n+ */\n+\n+@NonNullByDefault\n+public class SecondGenerationHandler extends BaseThingHandler {\n+\n+    private final Logger logger = LoggerFactory.getLogger(SecondGenerationHandler.class);\n+\n+    private final HttpClient httpClient;\n+\n+    private List<SecondGenerationChannelConfiguration> channelConfigs = new ArrayList<>();\n+    private List<SecondGenerationChannelConfiguration> channelConfigsExt = new ArrayList<>();\n+    private List<SecondGenerationChannelConfiguration> channelConfigsExtExt = new ArrayList<>();\n+\n+    public SecondGenerationHandler(Thing thing, HttpClient httpClient) {\n+        super(thing);\n+        this.httpClient = httpClient;\n+    }\n+\n+    @Override\n+    public void handleCommand(ChannelUID channelUID, Command command) {\n+\n+        if (command instanceof RefreshType) {\n+            logger.debug(\"Handle command for {} on channel {}: {}\", thing.getUID(), channelUID, command);\n+        }\n+\n+        if (command == RefreshType.REFRESH) {\n+            return;\n+        }\n+\n+        final @Nullable SecondGenerationConfiguration handleCommandConfig;\n+        handleCommandConfig = getConfigAs(SecondGenerationConfiguration.class);\n+\n+        String url = handleCommandConfig.url.toString();\n+        String username = handleCommandConfig.username;\n+        String password = handleCommandConfig.password;\n+        String valueConfiguration = \"\";\n+        String dxsEntriesConf = \"\";\n+\n+        switch (channelUID.getId()) {\n+            case SecondGenerationBindingConstants.CHANNEL_CHARGETIMEEND:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556236\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_BATTERYTYPE:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556252\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_BATTERYUSAGECONSUMPTION:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556249\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_BATTERYUSAGESTRATEGY:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"83888896\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_SMARTBATTERYCONTROL:\n+                valueConfiguration = \"\";\n+                if (command == OnOffType.ON) {\n+                    valueConfiguration = \"True\";\n+                }\n+                if (command == OnOffType.OFF) {\n+                    valueConfiguration = \"False\";\n+                }\n+                dxsEntriesConf = \"33556484\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_SMARTBATTERYCONTROL_TEXT:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556484\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_BATTERYCHARGETIMEFROM:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556239\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_BATTERYCHARGETIMETO:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556240\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_MAXDEPTHOFDISCHARGE:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556247\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_SHADOWMANAGEMENT:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556483\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_EXTERNALMODULECONTROL:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556482\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_INVERTERNAME:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"16777984\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+        }\n+    }\n+\n+    @Override\n+    public void initialize() {\n+        channelConfigs = SecondGenerationChannelConfiguration.getChannelConfiguration();\n+        channelConfigsExt = SecondGenerationChannelConfiguration.getChannelConfigurationExt();\n+        channelConfigsExtExt = SecondGenerationChannelConfiguration.getChannelConfigurationExtExt();\n+\n+        updateStatus(ThingStatus.UNKNOWN);\n+\n+        scheduler.scheduleWithFixedDelay(() -> {\n+            try {\n+                updateStatus(ThingStatus.ONLINE);\n+                refresh();\n+            } catch (RuntimeException scheduleWithFixedDelayException) {\n+                updateStatus(ThingStatus.OFFLINE, ThingStatusDetail.COMMUNICATION_ERROR,\n+                        scheduleWithFixedDelayException.getClass().getName() + \":\"\n+                                + scheduleWithFixedDelayException.getMessage());\n+                logger.debug(\"Error refreshing source = {}: {}\", getThing().getUID(),\n+                        scheduleWithFixedDelayException.getMessage());\n+            }\n+        }, 0, SecondGenerationConfiguration.REFRESHINTERVAL, TimeUnit.SECONDS);\n+    }\n+\n+    @SuppressWarnings(\"null\")\n+    private void refresh() {\n+        final @Nullable SecondGenerationConfiguration refreshConfig;\n+        refreshConfig = getConfigAs(SecondGenerationConfiguration.class);\n+        String dxsEntriesCall = refreshConfig.url.toString() + \"/api/dxs.json?dxsEntries=\"\n+                + channelConfigs.get(0).dxsEntries;\n+        String dxsEntriesCallExt = refreshConfig.url.toString() + \"/api/dxs.json?dxsEntries=\"\n+                + channelConfigsExt.get(0).dxsEntries;\n+\n+        for (int i = 1; i < channelConfigs.size(); i++) {\n+            dxsEntriesCall += (\"&dxsEntries=\" + channelConfigs.get(i).dxsEntries);\n+            dxsEntriesCallExt += (\"&dxsEntries=\" + channelConfigsExt.get(i).dxsEntries);\n+        }\n+\n+        String jsonDxsEntriesResponse = callURL(dxsEntriesCall);\n+        String jsonDxsEntriesResponseExt = callURL(dxsEntriesCallExt);\n+        String jsonDxsEntriesResponseExtExt = callURL(refreshConfig.url.toString() + \"/api/dxs.json?dxsEntries=\"\n+                + channelConfigsExt.get(0).dxsEntries + \"&dxsEntries=\" + channelConfigsExt.get(1).dxsEntries\n+                + \"&dxsEntries=\" + channelConfigsExt.get(2).dxsEntries);\n+\n+        // Get Gson object\n+        Gson gson = new GsonBuilder().setPrettyPrinting().create();\n+\n+        // Parse result\n+        SecondGenerationDxsEntriesContainer dxsEntriesContainer = gson.fromJson(jsonDxsEntriesResponse,\n+                SecondGenerationDxsEntriesContainer.class);\n+        SecondGenerationDxsEntriesContainer dxsEntriesContainerExt = gson.fromJson(jsonDxsEntriesResponseExt,\n+                SecondGenerationDxsEntriesContainer.class);\n+        SecondGenerationDxsEntriesContainer dxsEntriesContainerExtExt = gson.fromJson(jsonDxsEntriesResponseExtExt,\n+                SecondGenerationDxsEntriesContainer.class);\n+\n+        // Create channel-posts array's\n+        String[] channelPosts = new String[23];\n+        String[] channelPostsExt = new String[23];\n+        String[] channelPostsExtExt = new String[3];\n+\n+        // Fill channelPosts with each item value\n+        int channelPostsCounter = 0;\n+        for (SecondGenerationDxsEntries dxsentries : dxsEntriesContainer.dxsEntries) {\n+            channelPosts[channelPostsCounter] = dxsentries.getName();\n+            channelPostsCounter++;\n+        }\n+\n+        // Fill channelPostsExt with each item value\n+        int channelPostsCounterExt = 0;\n+        for (SecondGenerationDxsEntries dxsentriesExt : dxsEntriesContainerExt.dxsEntries) {\n+            channelPostsExt[channelPostsCounterExt] = dxsentriesExt.getName();\n+            channelPostsCounterExt++;\n+        }\n+\n+        // Fill channelPostsExtExt with each item value\n+        int channelPostsCounterExtExt = 0;\n+        for (SecondGenerationDxsEntries dxsentriesExtExt : dxsEntriesContainerExtExt.dxsEntries) {\n+            channelPostsExtExt[channelPostsCounterExtExt] = dxsentriesExtExt.getName();\n+            channelPostsCounterExtExt++;\n+        }\n+\n+        // Create and update actual values for each channelPost\n+        int channelValuesCounter = 0;\n+\n+        for (SecondGenerationChannelConfiguration cConfig : channelConfigs) {\n+            Channel channel = getThing().getChannel(cConfig.id);\n+            State state = getState(channelPosts[channelValuesCounter], cConfig.unit);\n+\n+            // Update the channel\n+            if (state != null) {\n+                updateState(channel.getUID().getId(), state);\n+                channelValuesCounter++;\n+            }\n+        }\n+\n+        // Create and update actual values for each channelPostExt\n+        int channelValuesCounterExt = 0;\n+        for (SecondGenerationChannelConfiguration cConfig : channelConfigsExt) {\n+            Channel channel = getThing().getChannel(cConfig.id);\n+            State state = getState(channelPostsExt[channelValuesCounterExt], cConfig.unit);\n+\n+            // Update the channel\n+            if (state != null) {\n+                updateState(channel.getUID().getId(), state);\n+                channelValuesCounterExt++;\n+            }\n+        }\n+\n+        // Create and update actual values for each channelPostExtExt\n+        int channelValuesCounterExtExt = 0;\n+        for (SecondGenerationChannelConfiguration cConfig : channelConfigsExtExt) {\n+            Channel channel = getThing().getChannel(cConfig.id);\n+            State state = getState(channelPostsExtExt[channelValuesCounterExtExt], cConfig.unit);\n+\n+            // Update the channel\n+            if (state != null) {\n+                updateState(channel.getUID().getId(), state);\n+                channelValuesCounterExtExt++;\n+            }\n+        }\n+    }\n+\n+    // Helper method to handleCommand method\n+    public final void preSetExecuteConfigurationChanges(HttpClient httpClient, String url, String username,\n+            String password, String dxsEntriesConf, String valueConfiguration) {\n+        try {\n+            SecondGenerationConfigurationHandler.executeConfigurationChanges(httpClient, url, username, password,\n+                    dxsEntriesConf, valueConfiguration);\n+        } catch (Exception handleCommandException) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b246c14fc937cf5a260588d0d6505c65433607e2"}, "originalPosition": 305}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTA3MDI4OQ==", "bodyText": "Is there a reason why you don't use the httpClient?", "url": "https://github.com/openhab/openhab-addons/pull/8574#discussion_r501070289", "createdAt": "2020-10-07T14:43:02Z", "author": {"login": "fwolter"}, "path": "bundles/org.openhab.binding.kostalinverter/src/main/java/org/openhab/binding/internal/kostal/inverter/secondgeneration/SecondGenerationHandler.java", "diffHunk": "@@ -0,0 +1,354 @@\n+/**\n+ * Copyright (c) 2010-2020 Contributors to the openHAB project\n+ *\n+ * See the NOTICE file(s) distributed with this work for additional\n+ * information.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+\n+package org.openhab.binding.internal.kostal.inverter.secondgeneration;\n+\n+import java.io.BufferedReader;\n+import java.io.IOException;\n+import java.io.InputStreamReader;\n+import java.math.BigDecimal;\n+import java.net.URL;\n+import java.net.URLConnection;\n+import java.nio.charset.Charset;\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.concurrent.TimeUnit;\n+\n+import javax.measure.Unit;\n+\n+import org.eclipse.jdt.annotation.NonNullByDefault;\n+import org.eclipse.jdt.annotation.Nullable;\n+import org.eclipse.jetty.client.HttpClient;\n+import org.openhab.core.library.types.OnOffType;\n+import org.openhab.core.library.types.QuantityType;\n+import org.openhab.core.library.types.StringType;\n+import org.openhab.core.thing.Channel;\n+import org.openhab.core.thing.ChannelUID;\n+import org.openhab.core.thing.Thing;\n+import org.openhab.core.thing.ThingStatus;\n+import org.openhab.core.thing.ThingStatusDetail;\n+import org.openhab.core.thing.binding.BaseThingHandler;\n+import org.openhab.core.types.Command;\n+import org.openhab.core.types.RefreshType;\n+import org.openhab.core.types.State;\n+import org.openhab.core.types.UnDefType;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import com.google.gson.Gson;\n+import com.google.gson.GsonBuilder;\n+\n+/**\n+ * The {@link SecondGenerationHandler} is responsible for handling commands, which are\n+ * sent to one of the channels, and initiation and refreshing regarded to second generation part of the binding.\n+ *\n+ *\n+ * @author Christian Schneider - Initial contribution\n+ * @author Christoph Weitkamp - Incorporated new QuantityType (Units of Measurement)\n+ * @author \u00d6rjan Backsell - Redesigned regarding Piko1020, Piko New Generation\n+ */\n+\n+@NonNullByDefault\n+public class SecondGenerationHandler extends BaseThingHandler {\n+\n+    private final Logger logger = LoggerFactory.getLogger(SecondGenerationHandler.class);\n+\n+    private final HttpClient httpClient;\n+\n+    private List<SecondGenerationChannelConfiguration> channelConfigs = new ArrayList<>();\n+    private List<SecondGenerationChannelConfiguration> channelConfigsExt = new ArrayList<>();\n+    private List<SecondGenerationChannelConfiguration> channelConfigsExtExt = new ArrayList<>();\n+\n+    public SecondGenerationHandler(Thing thing, HttpClient httpClient) {\n+        super(thing);\n+        this.httpClient = httpClient;\n+    }\n+\n+    @Override\n+    public void handleCommand(ChannelUID channelUID, Command command) {\n+\n+        if (command instanceof RefreshType) {\n+            logger.debug(\"Handle command for {} on channel {}: {}\", thing.getUID(), channelUID, command);\n+        }\n+\n+        if (command == RefreshType.REFRESH) {\n+            return;\n+        }\n+\n+        final @Nullable SecondGenerationConfiguration handleCommandConfig;\n+        handleCommandConfig = getConfigAs(SecondGenerationConfiguration.class);\n+\n+        String url = handleCommandConfig.url.toString();\n+        String username = handleCommandConfig.username;\n+        String password = handleCommandConfig.password;\n+        String valueConfiguration = \"\";\n+        String dxsEntriesConf = \"\";\n+\n+        switch (channelUID.getId()) {\n+            case SecondGenerationBindingConstants.CHANNEL_CHARGETIMEEND:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556236\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_BATTERYTYPE:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556252\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_BATTERYUSAGECONSUMPTION:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556249\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_BATTERYUSAGESTRATEGY:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"83888896\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_SMARTBATTERYCONTROL:\n+                valueConfiguration = \"\";\n+                if (command == OnOffType.ON) {\n+                    valueConfiguration = \"True\";\n+                }\n+                if (command == OnOffType.OFF) {\n+                    valueConfiguration = \"False\";\n+                }\n+                dxsEntriesConf = \"33556484\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_SMARTBATTERYCONTROL_TEXT:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556484\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_BATTERYCHARGETIMEFROM:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556239\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_BATTERYCHARGETIMETO:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556240\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_MAXDEPTHOFDISCHARGE:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556247\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_SHADOWMANAGEMENT:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556483\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_EXTERNALMODULECONTROL:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556482\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_INVERTERNAME:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"16777984\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+        }\n+    }\n+\n+    @Override\n+    public void initialize() {\n+        channelConfigs = SecondGenerationChannelConfiguration.getChannelConfiguration();\n+        channelConfigsExt = SecondGenerationChannelConfiguration.getChannelConfigurationExt();\n+        channelConfigsExtExt = SecondGenerationChannelConfiguration.getChannelConfigurationExtExt();\n+\n+        updateStatus(ThingStatus.UNKNOWN);\n+\n+        scheduler.scheduleWithFixedDelay(() -> {\n+            try {\n+                updateStatus(ThingStatus.ONLINE);\n+                refresh();\n+            } catch (RuntimeException scheduleWithFixedDelayException) {\n+                updateStatus(ThingStatus.OFFLINE, ThingStatusDetail.COMMUNICATION_ERROR,\n+                        scheduleWithFixedDelayException.getClass().getName() + \":\"\n+                                + scheduleWithFixedDelayException.getMessage());\n+                logger.debug(\"Error refreshing source = {}: {}\", getThing().getUID(),\n+                        scheduleWithFixedDelayException.getMessage());\n+            }\n+        }, 0, SecondGenerationConfiguration.REFRESHINTERVAL, TimeUnit.SECONDS);\n+    }\n+\n+    @SuppressWarnings(\"null\")\n+    private void refresh() {\n+        final @Nullable SecondGenerationConfiguration refreshConfig;\n+        refreshConfig = getConfigAs(SecondGenerationConfiguration.class);\n+        String dxsEntriesCall = refreshConfig.url.toString() + \"/api/dxs.json?dxsEntries=\"\n+                + channelConfigs.get(0).dxsEntries;\n+        String dxsEntriesCallExt = refreshConfig.url.toString() + \"/api/dxs.json?dxsEntries=\"\n+                + channelConfigsExt.get(0).dxsEntries;\n+\n+        for (int i = 1; i < channelConfigs.size(); i++) {\n+            dxsEntriesCall += (\"&dxsEntries=\" + channelConfigs.get(i).dxsEntries);\n+            dxsEntriesCallExt += (\"&dxsEntries=\" + channelConfigsExt.get(i).dxsEntries);\n+        }\n+\n+        String jsonDxsEntriesResponse = callURL(dxsEntriesCall);\n+        String jsonDxsEntriesResponseExt = callURL(dxsEntriesCallExt);\n+        String jsonDxsEntriesResponseExtExt = callURL(refreshConfig.url.toString() + \"/api/dxs.json?dxsEntries=\"\n+                + channelConfigsExt.get(0).dxsEntries + \"&dxsEntries=\" + channelConfigsExt.get(1).dxsEntries\n+                + \"&dxsEntries=\" + channelConfigsExt.get(2).dxsEntries);\n+\n+        // Get Gson object\n+        Gson gson = new GsonBuilder().setPrettyPrinting().create();\n+\n+        // Parse result\n+        SecondGenerationDxsEntriesContainer dxsEntriesContainer = gson.fromJson(jsonDxsEntriesResponse,\n+                SecondGenerationDxsEntriesContainer.class);\n+        SecondGenerationDxsEntriesContainer dxsEntriesContainerExt = gson.fromJson(jsonDxsEntriesResponseExt,\n+                SecondGenerationDxsEntriesContainer.class);\n+        SecondGenerationDxsEntriesContainer dxsEntriesContainerExtExt = gson.fromJson(jsonDxsEntriesResponseExtExt,\n+                SecondGenerationDxsEntriesContainer.class);\n+\n+        // Create channel-posts array's\n+        String[] channelPosts = new String[23];\n+        String[] channelPostsExt = new String[23];\n+        String[] channelPostsExtExt = new String[3];\n+\n+        // Fill channelPosts with each item value\n+        int channelPostsCounter = 0;\n+        for (SecondGenerationDxsEntries dxsentries : dxsEntriesContainer.dxsEntries) {\n+            channelPosts[channelPostsCounter] = dxsentries.getName();\n+            channelPostsCounter++;\n+        }\n+\n+        // Fill channelPostsExt with each item value\n+        int channelPostsCounterExt = 0;\n+        for (SecondGenerationDxsEntries dxsentriesExt : dxsEntriesContainerExt.dxsEntries) {\n+            channelPostsExt[channelPostsCounterExt] = dxsentriesExt.getName();\n+            channelPostsCounterExt++;\n+        }\n+\n+        // Fill channelPostsExtExt with each item value\n+        int channelPostsCounterExtExt = 0;\n+        for (SecondGenerationDxsEntries dxsentriesExtExt : dxsEntriesContainerExtExt.dxsEntries) {\n+            channelPostsExtExt[channelPostsCounterExtExt] = dxsentriesExtExt.getName();\n+            channelPostsCounterExtExt++;\n+        }\n+\n+        // Create and update actual values for each channelPost\n+        int channelValuesCounter = 0;\n+\n+        for (SecondGenerationChannelConfiguration cConfig : channelConfigs) {\n+            Channel channel = getThing().getChannel(cConfig.id);\n+            State state = getState(channelPosts[channelValuesCounter], cConfig.unit);\n+\n+            // Update the channel\n+            if (state != null) {\n+                updateState(channel.getUID().getId(), state);\n+                channelValuesCounter++;\n+            }\n+        }\n+\n+        // Create and update actual values for each channelPostExt\n+        int channelValuesCounterExt = 0;\n+        for (SecondGenerationChannelConfiguration cConfig : channelConfigsExt) {\n+            Channel channel = getThing().getChannel(cConfig.id);\n+            State state = getState(channelPostsExt[channelValuesCounterExt], cConfig.unit);\n+\n+            // Update the channel\n+            if (state != null) {\n+                updateState(channel.getUID().getId(), state);\n+                channelValuesCounterExt++;\n+            }\n+        }\n+\n+        // Create and update actual values for each channelPostExtExt\n+        int channelValuesCounterExtExt = 0;\n+        for (SecondGenerationChannelConfiguration cConfig : channelConfigsExtExt) {\n+            Channel channel = getThing().getChannel(cConfig.id);\n+            State state = getState(channelPostsExtExt[channelValuesCounterExtExt], cConfig.unit);\n+\n+            // Update the channel\n+            if (state != null) {\n+                updateState(channel.getUID().getId(), state);\n+                channelValuesCounterExtExt++;\n+            }\n+        }\n+    }\n+\n+    // Helper method to handleCommand method\n+    public final void preSetExecuteConfigurationChanges(HttpClient httpClient, String url, String username,\n+            String password, String dxsEntriesConf, String valueConfiguration) {\n+        try {\n+            SecondGenerationConfigurationHandler.executeConfigurationChanges(httpClient, url, username, password,\n+                    dxsEntriesConf, valueConfiguration);\n+        } catch (Exception handleCommandException) {\n+            logger.debug(\"Handle command for {} on channel {}: {}: {}: {}: {}\", thing.getUID(), httpClient, url,\n+                    dxsEntriesConf, valueConfiguration, handleCommandException.getMessage());\n+        }\n+    }\n+\n+    public final String callURL(String myURL) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b246c14fc937cf5a260588d0d6505c65433607e2"}, "originalPosition": 311}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTA3MDg1Ng==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\t<label> Inverter Url</label>\n          \n          \n            \n            \t\t\t<label>Inverter URL</label>", "url": "https://github.com/openhab/openhab-addons/pull/8574#discussion_r501070856", "createdAt": "2020-10-07T14:43:48Z", "author": {"login": "fwolter"}, "path": "bundles/org.openhab.binding.kostalinverter/src/main/resources/OH-INF/config/SecondGeneration.xml", "diffHunk": "@@ -0,0 +1,27 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<config-description:config-descriptions\n+\txmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+\txmlns:config-description=\"https://openhab.org/schemas/config-description/v1.0.0\"\n+\txsi:schemaLocation=\"https://openhab.org/schemas/config-description/v1.0.0 https://openhab.org/schemas/config-description-1.0.0.xsd\">\n+\t<config-description uri=\"thing-type:kostalpiko1020_config\">\n+\t\t<parameter name=\"url\" type=\"text\" required=\"true\">\n+\t\t\t<label> Inverter Url</label>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b246c14fc937cf5a260588d0d6505c65433607e2"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTA3MjI5OQ==", "bodyText": "The binding name don't need to be included in the Thing Type ID.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t<thing-type id=\"kostalinverterpiko1020\">\n          \n          \n            \n            \t<thing-type id=\"piko1020\">", "url": "https://github.com/openhab/openhab-addons/pull/8574#discussion_r501072299", "createdAt": "2020-10-07T14:45:31Z", "author": {"login": "fwolter"}, "path": "bundles/org.openhab.binding.kostalinverter/src/main/resources/OH-INF/thing/PIKO1020.xml", "diffHunk": "@@ -0,0 +1,81 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<thing:thing-descriptions bindingId=\"kostalinverter\"\n+\txmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+\txmlns:thing=\"https://openhab.org/schemas/thing-description/v1.0.0\"\n+\txsi:schemaLocation=\"https://openhab.org/schemas/thing-description/v1.0.0 https://openhab.org/schemas/thing-description-1.0.0.xsd\">\n+\t<thing-type id=\"kostalinverterpiko1020\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b246c14fc937cf5a260588d0d6505c65433607e2"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTA3NjQxOA==", "bodyText": "Some of these Channel typeIds doesn't match with those in Channels.xml.", "url": "https://github.com/openhab/openhab-addons/pull/8574#discussion_r501076418", "createdAt": "2020-10-07T14:50:38Z", "author": {"login": "fwolter"}, "path": "bundles/org.openhab.binding.kostalinverter/src/main/resources/OH-INF/thing/PIKO1020.xml", "diffHunk": "@@ -0,0 +1,81 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<thing:thing-descriptions bindingId=\"kostalinverter\"\n+\txmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+\txmlns:thing=\"https://openhab.org/schemas/thing-description/v1.0.0\"\n+\txsi:schemaLocation=\"https://openhab.org/schemas/thing-description/v1.0.0 https://openhab.org/schemas/thing-description-1.0.0.xsd\">\n+\t<thing-type id=\"kostalinverterpiko1020\">\n+\t\t<label>KOSTAL PIKO 10-20</label>\n+\t\t<description>Thing for the KOSTAL PIKO 10-20</description>\n+\t\t<category>Inverter</category>\n+\t\t<channels>\n+\t\t\t<channel typeId=\"device-local-grid-output-power\" id=\"gridOutputPower\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b246c14fc937cf5a260588d0d6505c65433607e2"}, "originalPosition": 11}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA1MDYwODk2", "url": "https://github.com/openhab/openhab-addons/pull/8574#pullrequestreview-505060896", "createdAt": "2020-10-08T18:35:17Z", "commit": {"oid": "a23cb96524f25000440822cab4ca9f2b22523662"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxODozNToxN1rOHerhUQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxODo1NjoyOVrOHesQYw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTkzMjM2OQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    <item-type>String </item-type>\n          \n          \n            \n                    <item-type>String</item-type>", "url": "https://github.com/openhab/openhab-addons/pull/8574#discussion_r501932369", "createdAt": "2020-10-08T18:35:17Z", "author": {"login": "cpmeister"}, "path": "bundles/org.openhab.binding.kostalinverter/src/main/resources/OH-INF/thing/Channels.xml", "diffHunk": "@@ -484,4 +484,431 @@\n \t\t<category>Energy</category>\n \t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n \t</channel-type>\n+\t<channel-type id=\"device-local-grid-output-power\">\n+        <item-type>Number:Power</item-type>\n+        <label>Grid Output Power</label>\n+        <description>Current output power to the grid</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"statistic-yield-day-second-gen\">\n+        <item-type>Number:Power</item-type>\n+        <label>Yield Day</label>\n+        <description>Total produced power today</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"statistic-yield-total-second-gen\">\n+        <item-type>Number:Energy</item-type>\n+        <label>Yield Total</label>\n+        <description>Total produced power</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-operating-status\">\n+        <item-type>String </item-type>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a23cb96524f25000440822cab4ca9f2b22523662"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTkzMjYxNw==", "bodyText": "String types don't require a pattern.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    <state readOnly=\"true\" pattern=\"%.0f %unit%\" />\n          \n          \n            \n                    <state readOnly=\"true\" />", "url": "https://github.com/openhab/openhab-addons/pull/8574#discussion_r501932617", "createdAt": "2020-10-08T18:35:45Z", "author": {"login": "cpmeister"}, "path": "bundles/org.openhab.binding.kostalinverter/src/main/resources/OH-INF/thing/Channels.xml", "diffHunk": "@@ -484,4 +484,431 @@\n \t\t<category>Energy</category>\n \t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n \t</channel-type>\n+\t<channel-type id=\"device-local-grid-output-power\">\n+        <item-type>Number:Power</item-type>\n+        <label>Grid Output Power</label>\n+        <description>Current output power to the grid</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"statistic-yield-day-second-gen\">\n+        <item-type>Number:Power</item-type>\n+        <label>Yield Day</label>\n+        <description>Total produced power today</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"statistic-yield-total-second-gen\">\n+        <item-type>Number:Energy</item-type>\n+        <label>Yield Total</label>\n+        <description>Total produced power</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-operating-status\">\n+        <item-type>String </item-type>\n+        <label>Status</label>\n+        <description>Current operating status</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.0f %unit%\" />", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a23cb96524f25000440822cab4ca9f2b22523662"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTkzMzMyMg==", "bodyText": "Is a counter supposed to be a String type? If it is supposed to be a String type then you should remove the pattern from the state.", "url": "https://github.com/openhab/openhab-addons/pull/8574#discussion_r501933322", "createdAt": "2020-10-08T18:37:00Z", "author": {"login": "cpmeister"}, "path": "bundles/org.openhab.binding.kostalinverter/src/main/resources/OH-INF/thing/Channels.xml", "diffHunk": "@@ -484,4 +484,431 @@\n \t\t<category>Energy</category>\n \t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n \t</channel-type>\n+\t<channel-type id=\"device-local-grid-output-power\">\n+        <item-type>Number:Power</item-type>\n+        <label>Grid Output Power</label>\n+        <description>Current output power to the grid</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"statistic-yield-day-second-gen\">\n+        <item-type>Number:Power</item-type>\n+        <label>Yield Day</label>\n+        <description>Total produced power today</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"statistic-yield-total-second-gen\">\n+        <item-type>Number:Energy</item-type>\n+        <label>Yield Total</label>\n+        <description>Total produced power</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-operating-status\">\n+        <item-type>String </item-type>\n+        <label>Status</label>\n+        <description>Current operating status</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-grid-voltage-l1\">\n+        <item-type>Number:ElectricPotential</item-type>\n+        <label>Grid Voltage L1</label>\n+        <description>Current output voltage to the grid, L1</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-grid-current-l1\">\n+        <item-type>Number:ElectricCurrent</item-type>\n+        <label>Grid Current L1</label>\n+        <description>Current output current to the grid, L1</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f  %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-grid-power-l1\">\n+        <item-type>Number:Power</item-type>\n+        <label>Grid Power L1</label>\n+        <description>Current output power to the grid, L1</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-grid-voltage-l2\">\n+        <item-type>Number:ElectricPotential</item-type>\n+        <label>Grid Voltage L2</label>\n+        <description>Current output voltage to the grid, L2</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-grid-current-l2\">\n+        <item-type>Number:ElectricCurrent</item-type>\n+        <label>Grid Current L2</label>\n+        <description>Current output current to the grid, L2</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-grid-power-l2\">\n+        <item-type>Number:Power</item-type>\n+        <label>Grid Power L2</label>\n+        <description>Current output power to the grid, L2</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-grid-voltage-l3\">\n+        <item-type>Number:ElectricPotential</item-type>\n+        <label>Grid Voltage L3</label>\n+        <description>Current output voltage to the grid, L3</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-grid-current-l3\">\n+        <item-type>Number:ElectricCurrent</item-type>\n+        <label>Grid Current L3</label>\n+        <description>Current output current to the grid, L3</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-grid-power-l3\">\n+        <item-type>Number:Power</item-type>\n+        <label>Grid Power L3</label>\n+        <description>Current output power to the grid, L3</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-dc-power-pv\">\n+        <item-type>Number:Power</item-type>\n+        <label>Dc Power PV</label>\n+        <description>Current power from all solar panels</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-dc1-voltage\">\n+        <item-type>Number:ElectricPotential</item-type>\n+        <label>Dc1 Voltage</label>\n+        <description>Current voltage from solar panels, Dc1</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-dc1-current\">\n+        <item-type>Number:ElectricCurrent</item-type>\n+        <label>Dc1 Current</label>\n+        <description>Current current from solar panels, Dc1</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-dc1-power\">\n+        <item-type>Number:Power</item-type>\n+        <label>Dc1 Power</label>\n+        <description>Current power from solar panels, Dc1</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-dc2-voltage\">\n+        <item-type>Number:ElectricPotential</item-type>\n+        <label>Dc2 Voltage</label>\n+        <description>Current voltage from solar panels, Dc2</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-dc2-current\">\n+        <item-type>Number:ElectricCurrent</item-type>\n+        <label>Dc2 Current</label>\n+        <description>Current current from solar panels, Dc2</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-dc2-power\">\n+        <item-type>Number:Power</item-type>\n+        <label>Dc2 Power</label>\n+        <description>Current power from solar panels, Dc2</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-dc3-voltage\">\n+        <item-type>Number:ElectricPotential</item-type>\n+        <label>Dc3 Voltage</label>\n+        <description>Current voltage from solar panels, Dc3</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-dc3-current\">\n+        <item-type>Number:ElectricCurrent</item-type>\n+        <label>Dc3 Current</label>\n+        <description>Current current from solar panels, Dc3</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-dc3-power\">\n+        <item-type>Number:Power</item-type>\n+        <label>Dc3 Power</label>\n+        <description>Current power from solar panels, Dc3</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-akt-home-consumption-solar\">\n+        <item-type>Number:Power</item-type>\n+        <label>Actual Home Consumption Solar</label>\n+        <description>Current consumption from solar panels</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-akt-home-consumption-bat\">\n+        <item-type>Number:Power</item-type>\n+        <label>Actual Home Consumption Battery</label>\n+        <description>Current consumption from battery</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-akt-home-consumption-grid\">\n+        <item-type>Number:Energy</item-type>\n+        <label>Actual Home Consumption Grid</label>\n+        <description>Current consumption from grid</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-phase-sel-home-consump-l1\">\n+        <item-type>Number:Power</item-type>\n+        <label>Home Consumption L1</label>\n+        <description>Current consumption, L1</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-phase-sel-home-consump-l2\">\n+        <item-type>Number:Power</item-type>\n+        <label>Home Consumption L2</label>\n+        <description>Current consumption, L2</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-phase-sel-home-consump-l3\">\n+        <item-type>Number:Power</item-type>\n+        <label>Home Consumption L3</label>\n+        <description>Current consumption, L3</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-grid-freq\">\n+        <item-type>Number:Frequency</item-type>\n+        <label>Grid Freq</label>\n+        <description>Current frequency on grid</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-grid-cos-phi\">\n+        <item-type>Number:Angle</item-type>\n+        <label>Grid Cos Phi</label>\n+        <description>Current power factor on grid</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"statistic-home-consumption-day\">\n+        <item-type>Number:Energy</item-type>\n+        <label>Home Consumption Day</label>\n+        <description>Total home consumption today</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"statistic-own-consumption-day\">\n+        <item-type>Number:Energy</item-type>\n+        <label>Own Consumption Day</label>\n+        <description>Total own consumption today</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"statistic-own-cons-rate-day\">\n+        <item-type>Number:Dimensionless</item-type>\n+        <label>Own Cons Rate Day</label>\n+        <description>Total own consumption rate today</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"statistic-autonomy-degree-day\">\n+        <item-type>Number:Dimensionless</item-type>\n+        <label>Autonomy Degree Day</label>\n+        <description>Total autonomy degree day</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"statistic-home-consumption-total\">\n+        <item-type>Number:Energy</item-type>\n+        <label>Home Consumption Total</label>\n+        <description>Total home consumption</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"statistic-own-consumption-total\">\n+        <item-type>Number:Energy</item-type>\n+        <label>Own Consumption Total</label>\n+        <description>Total own consumption</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"statistic-total-operating-time\">\n+        <item-type>Number:Time</item-type>\n+        <label>Total Operating Time</label>\n+        <description>Total operating time</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-current\">\n+        <item-type>Number:ElectricCurrent</item-type>\n+        <label>Current</label>\n+        <description>Current</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-current-dir\">\n+        <item-type>Number:ElectricCurrent</item-type>\n+        <label>Current Dir</label>\n+        <description>Current dir</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-charge-cycles\">\n+        <item-type>String</item-type>\n+        <label>Charge Cycles</label>\n+        <description>Total number of charge cycles</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-battery-temperature\">\n+        <item-type>Number:Temperature</item-type>\n+        <label>Battery Temperature</label>\n+        <description>Current battery temperature</description>\n+        <category>Temperature</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-loginterval\">\n+        <item-type>Number:Time</item-type>\n+        <label>Log Interval</label>\n+        <description>Set value for loginterval</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-s0-inpulse-cnt\">\n+        <item-type>String</item-type>\n+        <label>S0 Input Pulses Counter</label>\n+        <description>S0-pulse counter</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.0f %unit%\" />", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a23cb96524f25000440822cab4ca9f2b22523662"}, "originalPosition": 310}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTkzMzkwMA==", "bodyText": "No units? Also why is the category String?", "url": "https://github.com/openhab/openhab-addons/pull/8574#discussion_r501933900", "createdAt": "2020-10-08T18:37:57Z", "author": {"login": "cpmeister"}, "path": "bundles/org.openhab.binding.kostalinverter/src/main/resources/OH-INF/thing/Channels.xml", "diffHunk": "@@ -484,4 +484,431 @@\n \t\t<category>Energy</category>\n \t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n \t</channel-type>\n+\t<channel-type id=\"device-local-grid-output-power\">\n+        <item-type>Number:Power</item-type>\n+        <label>Grid Output Power</label>\n+        <description>Current output power to the grid</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"statistic-yield-day-second-gen\">\n+        <item-type>Number:Power</item-type>\n+        <label>Yield Day</label>\n+        <description>Total produced power today</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"statistic-yield-total-second-gen\">\n+        <item-type>Number:Energy</item-type>\n+        <label>Yield Total</label>\n+        <description>Total produced power</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-operating-status\">\n+        <item-type>String </item-type>\n+        <label>Status</label>\n+        <description>Current operating status</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-grid-voltage-l1\">\n+        <item-type>Number:ElectricPotential</item-type>\n+        <label>Grid Voltage L1</label>\n+        <description>Current output voltage to the grid, L1</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-grid-current-l1\">\n+        <item-type>Number:ElectricCurrent</item-type>\n+        <label>Grid Current L1</label>\n+        <description>Current output current to the grid, L1</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f  %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-grid-power-l1\">\n+        <item-type>Number:Power</item-type>\n+        <label>Grid Power L1</label>\n+        <description>Current output power to the grid, L1</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-grid-voltage-l2\">\n+        <item-type>Number:ElectricPotential</item-type>\n+        <label>Grid Voltage L2</label>\n+        <description>Current output voltage to the grid, L2</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-grid-current-l2\">\n+        <item-type>Number:ElectricCurrent</item-type>\n+        <label>Grid Current L2</label>\n+        <description>Current output current to the grid, L2</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-grid-power-l2\">\n+        <item-type>Number:Power</item-type>\n+        <label>Grid Power L2</label>\n+        <description>Current output power to the grid, L2</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-grid-voltage-l3\">\n+        <item-type>Number:ElectricPotential</item-type>\n+        <label>Grid Voltage L3</label>\n+        <description>Current output voltage to the grid, L3</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-grid-current-l3\">\n+        <item-type>Number:ElectricCurrent</item-type>\n+        <label>Grid Current L3</label>\n+        <description>Current output current to the grid, L3</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-grid-power-l3\">\n+        <item-type>Number:Power</item-type>\n+        <label>Grid Power L3</label>\n+        <description>Current output power to the grid, L3</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-dc-power-pv\">\n+        <item-type>Number:Power</item-type>\n+        <label>Dc Power PV</label>\n+        <description>Current power from all solar panels</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-dc1-voltage\">\n+        <item-type>Number:ElectricPotential</item-type>\n+        <label>Dc1 Voltage</label>\n+        <description>Current voltage from solar panels, Dc1</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-dc1-current\">\n+        <item-type>Number:ElectricCurrent</item-type>\n+        <label>Dc1 Current</label>\n+        <description>Current current from solar panels, Dc1</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-dc1-power\">\n+        <item-type>Number:Power</item-type>\n+        <label>Dc1 Power</label>\n+        <description>Current power from solar panels, Dc1</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-dc2-voltage\">\n+        <item-type>Number:ElectricPotential</item-type>\n+        <label>Dc2 Voltage</label>\n+        <description>Current voltage from solar panels, Dc2</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-dc2-current\">\n+        <item-type>Number:ElectricCurrent</item-type>\n+        <label>Dc2 Current</label>\n+        <description>Current current from solar panels, Dc2</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-dc2-power\">\n+        <item-type>Number:Power</item-type>\n+        <label>Dc2 Power</label>\n+        <description>Current power from solar panels, Dc2</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-dc3-voltage\">\n+        <item-type>Number:ElectricPotential</item-type>\n+        <label>Dc3 Voltage</label>\n+        <description>Current voltage from solar panels, Dc3</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-dc3-current\">\n+        <item-type>Number:ElectricCurrent</item-type>\n+        <label>Dc3 Current</label>\n+        <description>Current current from solar panels, Dc3</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-dc3-power\">\n+        <item-type>Number:Power</item-type>\n+        <label>Dc3 Power</label>\n+        <description>Current power from solar panels, Dc3</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-akt-home-consumption-solar\">\n+        <item-type>Number:Power</item-type>\n+        <label>Actual Home Consumption Solar</label>\n+        <description>Current consumption from solar panels</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-akt-home-consumption-bat\">\n+        <item-type>Number:Power</item-type>\n+        <label>Actual Home Consumption Battery</label>\n+        <description>Current consumption from battery</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-akt-home-consumption-grid\">\n+        <item-type>Number:Energy</item-type>\n+        <label>Actual Home Consumption Grid</label>\n+        <description>Current consumption from grid</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-phase-sel-home-consump-l1\">\n+        <item-type>Number:Power</item-type>\n+        <label>Home Consumption L1</label>\n+        <description>Current consumption, L1</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-phase-sel-home-consump-l2\">\n+        <item-type>Number:Power</item-type>\n+        <label>Home Consumption L2</label>\n+        <description>Current consumption, L2</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-phase-sel-home-consump-l3\">\n+        <item-type>Number:Power</item-type>\n+        <label>Home Consumption L3</label>\n+        <description>Current consumption, L3</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-grid-freq\">\n+        <item-type>Number:Frequency</item-type>\n+        <label>Grid Freq</label>\n+        <description>Current frequency on grid</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-grid-cos-phi\">\n+        <item-type>Number:Angle</item-type>\n+        <label>Grid Cos Phi</label>\n+        <description>Current power factor on grid</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"statistic-home-consumption-day\">\n+        <item-type>Number:Energy</item-type>\n+        <label>Home Consumption Day</label>\n+        <description>Total home consumption today</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"statistic-own-consumption-day\">\n+        <item-type>Number:Energy</item-type>\n+        <label>Own Consumption Day</label>\n+        <description>Total own consumption today</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"statistic-own-cons-rate-day\">\n+        <item-type>Number:Dimensionless</item-type>\n+        <label>Own Cons Rate Day</label>\n+        <description>Total own consumption rate today</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"statistic-autonomy-degree-day\">\n+        <item-type>Number:Dimensionless</item-type>\n+        <label>Autonomy Degree Day</label>\n+        <description>Total autonomy degree day</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"statistic-home-consumption-total\">\n+        <item-type>Number:Energy</item-type>\n+        <label>Home Consumption Total</label>\n+        <description>Total home consumption</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"statistic-own-consumption-total\">\n+        <item-type>Number:Energy</item-type>\n+        <label>Own Consumption Total</label>\n+        <description>Total own consumption</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"statistic-total-operating-time\">\n+        <item-type>Number:Time</item-type>\n+        <label>Total Operating Time</label>\n+        <description>Total operating time</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-current\">\n+        <item-type>Number:ElectricCurrent</item-type>\n+        <label>Current</label>\n+        <description>Current</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-current-dir\">\n+        <item-type>Number:ElectricCurrent</item-type>\n+        <label>Current Dir</label>\n+        <description>Current dir</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-charge-cycles\">\n+        <item-type>String</item-type>\n+        <label>Charge Cycles</label>\n+        <description>Total number of charge cycles</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-battery-temperature\">\n+        <item-type>Number:Temperature</item-type>\n+        <label>Battery Temperature</label>\n+        <description>Current battery temperature</description>\n+        <category>Temperature</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-loginterval\">\n+        <item-type>Number:Time</item-type>\n+        <label>Log Interval</label>\n+        <description>Set value for loginterval</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-s0-inpulse-cnt\">\n+        <item-type>String</item-type>\n+        <label>S0 Input Pulses Counter</label>\n+        <description>S0-pulse counter</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"statistic-own-cons-rate-total\">\n+        <item-type>Number:Dimensionless</item-type>\n+        <label>Own Cons Rate Total</label>\n+        <description>Total own comsumption rate</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"statistic-autonomy-degree-total\">\n+        <item-type>Number:Dimensionless</item-type>\n+        <label>Autonomy Degree Total</label>\n+        <description>Total autonomy degree</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-battery-voltage-second-gen\">\n+        <item-type>Number:ElectricalPotential</item-type>\n+        <label>Battery Voltage</label>\n+        <description>Current battery voltage</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-bat-state-of-charge\">\n+        <item-type>Number:Dimensionless</item-type>\n+        <label>Bat State Of Charge</label>\n+        <description>Current battery charge state</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\"  pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-self-consumption\">\n+        <item-type>Number:Power</item-type>\n+        <label>Self Consumption</label>\n+        <description>Current self consumption</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-charge-time-end\">\n+        <item-type>Number:Time</item-type>\n+        <label>Charge Time End</label>\n+        <description>Set charge time end</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\"/>\n+    </channel-type>\n+    <channel-type id=\"device-local-battery-type\">\n+        <item-type>String</item-type>\n+        <label>Battery Type</label>\n+        <description>Set battery type</description>\n+        <category>String</category>\n+        <state readOnly=\"true\"/>\n+    </channel-type>\n+     <channel-type id=\"device-local-battery-usage-consumption\">\n+        <item-type>String</item-type>\n+        <label>Battery usage Consumption</label>\n+        <description>Set battery usage consumption</description>\n+        <category>String</category>\n+        <state readOnly=\"true\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a23cb96524f25000440822cab4ca9f2b22523662"}, "originalPosition": 366}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTkzNDA1Nw==", "bodyText": "Why category String?", "url": "https://github.com/openhab/openhab-addons/pull/8574#discussion_r501934057", "createdAt": "2020-10-08T18:38:14Z", "author": {"login": "cpmeister"}, "path": "bundles/org.openhab.binding.kostalinverter/src/main/resources/OH-INF/thing/Channels.xml", "diffHunk": "@@ -484,4 +484,431 @@\n \t\t<category>Energy</category>\n \t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n \t</channel-type>\n+\t<channel-type id=\"device-local-grid-output-power\">\n+        <item-type>Number:Power</item-type>\n+        <label>Grid Output Power</label>\n+        <description>Current output power to the grid</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"statistic-yield-day-second-gen\">\n+        <item-type>Number:Power</item-type>\n+        <label>Yield Day</label>\n+        <description>Total produced power today</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"statistic-yield-total-second-gen\">\n+        <item-type>Number:Energy</item-type>\n+        <label>Yield Total</label>\n+        <description>Total produced power</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-operating-status\">\n+        <item-type>String </item-type>\n+        <label>Status</label>\n+        <description>Current operating status</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-grid-voltage-l1\">\n+        <item-type>Number:ElectricPotential</item-type>\n+        <label>Grid Voltage L1</label>\n+        <description>Current output voltage to the grid, L1</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-grid-current-l1\">\n+        <item-type>Number:ElectricCurrent</item-type>\n+        <label>Grid Current L1</label>\n+        <description>Current output current to the grid, L1</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f  %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-grid-power-l1\">\n+        <item-type>Number:Power</item-type>\n+        <label>Grid Power L1</label>\n+        <description>Current output power to the grid, L1</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-grid-voltage-l2\">\n+        <item-type>Number:ElectricPotential</item-type>\n+        <label>Grid Voltage L2</label>\n+        <description>Current output voltage to the grid, L2</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-grid-current-l2\">\n+        <item-type>Number:ElectricCurrent</item-type>\n+        <label>Grid Current L2</label>\n+        <description>Current output current to the grid, L2</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-grid-power-l2\">\n+        <item-type>Number:Power</item-type>\n+        <label>Grid Power L2</label>\n+        <description>Current output power to the grid, L2</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-grid-voltage-l3\">\n+        <item-type>Number:ElectricPotential</item-type>\n+        <label>Grid Voltage L3</label>\n+        <description>Current output voltage to the grid, L3</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-grid-current-l3\">\n+        <item-type>Number:ElectricCurrent</item-type>\n+        <label>Grid Current L3</label>\n+        <description>Current output current to the grid, L3</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-grid-power-l3\">\n+        <item-type>Number:Power</item-type>\n+        <label>Grid Power L3</label>\n+        <description>Current output power to the grid, L3</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-dc-power-pv\">\n+        <item-type>Number:Power</item-type>\n+        <label>Dc Power PV</label>\n+        <description>Current power from all solar panels</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-dc1-voltage\">\n+        <item-type>Number:ElectricPotential</item-type>\n+        <label>Dc1 Voltage</label>\n+        <description>Current voltage from solar panels, Dc1</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-dc1-current\">\n+        <item-type>Number:ElectricCurrent</item-type>\n+        <label>Dc1 Current</label>\n+        <description>Current current from solar panels, Dc1</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-dc1-power\">\n+        <item-type>Number:Power</item-type>\n+        <label>Dc1 Power</label>\n+        <description>Current power from solar panels, Dc1</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-dc2-voltage\">\n+        <item-type>Number:ElectricPotential</item-type>\n+        <label>Dc2 Voltage</label>\n+        <description>Current voltage from solar panels, Dc2</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-dc2-current\">\n+        <item-type>Number:ElectricCurrent</item-type>\n+        <label>Dc2 Current</label>\n+        <description>Current current from solar panels, Dc2</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-dc2-power\">\n+        <item-type>Number:Power</item-type>\n+        <label>Dc2 Power</label>\n+        <description>Current power from solar panels, Dc2</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-dc3-voltage\">\n+        <item-type>Number:ElectricPotential</item-type>\n+        <label>Dc3 Voltage</label>\n+        <description>Current voltage from solar panels, Dc3</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-dc3-current\">\n+        <item-type>Number:ElectricCurrent</item-type>\n+        <label>Dc3 Current</label>\n+        <description>Current current from solar panels, Dc3</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-dc3-power\">\n+        <item-type>Number:Power</item-type>\n+        <label>Dc3 Power</label>\n+        <description>Current power from solar panels, Dc3</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-akt-home-consumption-solar\">\n+        <item-type>Number:Power</item-type>\n+        <label>Actual Home Consumption Solar</label>\n+        <description>Current consumption from solar panels</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-akt-home-consumption-bat\">\n+        <item-type>Number:Power</item-type>\n+        <label>Actual Home Consumption Battery</label>\n+        <description>Current consumption from battery</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-akt-home-consumption-grid\">\n+        <item-type>Number:Energy</item-type>\n+        <label>Actual Home Consumption Grid</label>\n+        <description>Current consumption from grid</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-phase-sel-home-consump-l1\">\n+        <item-type>Number:Power</item-type>\n+        <label>Home Consumption L1</label>\n+        <description>Current consumption, L1</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-phase-sel-home-consump-l2\">\n+        <item-type>Number:Power</item-type>\n+        <label>Home Consumption L2</label>\n+        <description>Current consumption, L2</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-phase-sel-home-consump-l3\">\n+        <item-type>Number:Power</item-type>\n+        <label>Home Consumption L3</label>\n+        <description>Current consumption, L3</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-grid-freq\">\n+        <item-type>Number:Frequency</item-type>\n+        <label>Grid Freq</label>\n+        <description>Current frequency on grid</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-grid-cos-phi\">\n+        <item-type>Number:Angle</item-type>\n+        <label>Grid Cos Phi</label>\n+        <description>Current power factor on grid</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"statistic-home-consumption-day\">\n+        <item-type>Number:Energy</item-type>\n+        <label>Home Consumption Day</label>\n+        <description>Total home consumption today</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"statistic-own-consumption-day\">\n+        <item-type>Number:Energy</item-type>\n+        <label>Own Consumption Day</label>\n+        <description>Total own consumption today</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"statistic-own-cons-rate-day\">\n+        <item-type>Number:Dimensionless</item-type>\n+        <label>Own Cons Rate Day</label>\n+        <description>Total own consumption rate today</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"statistic-autonomy-degree-day\">\n+        <item-type>Number:Dimensionless</item-type>\n+        <label>Autonomy Degree Day</label>\n+        <description>Total autonomy degree day</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"statistic-home-consumption-total\">\n+        <item-type>Number:Energy</item-type>\n+        <label>Home Consumption Total</label>\n+        <description>Total home consumption</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"statistic-own-consumption-total\">\n+        <item-type>Number:Energy</item-type>\n+        <label>Own Consumption Total</label>\n+        <description>Total own consumption</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"statistic-total-operating-time\">\n+        <item-type>Number:Time</item-type>\n+        <label>Total Operating Time</label>\n+        <description>Total operating time</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-current\">\n+        <item-type>Number:ElectricCurrent</item-type>\n+        <label>Current</label>\n+        <description>Current</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-current-dir\">\n+        <item-type>Number:ElectricCurrent</item-type>\n+        <label>Current Dir</label>\n+        <description>Current dir</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-charge-cycles\">\n+        <item-type>String</item-type>\n+        <label>Charge Cycles</label>\n+        <description>Total number of charge cycles</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-battery-temperature\">\n+        <item-type>Number:Temperature</item-type>\n+        <label>Battery Temperature</label>\n+        <description>Current battery temperature</description>\n+        <category>Temperature</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-loginterval\">\n+        <item-type>Number:Time</item-type>\n+        <label>Log Interval</label>\n+        <description>Set value for loginterval</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-s0-inpulse-cnt\">\n+        <item-type>String</item-type>\n+        <label>S0 Input Pulses Counter</label>\n+        <description>S0-pulse counter</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"statistic-own-cons-rate-total\">\n+        <item-type>Number:Dimensionless</item-type>\n+        <label>Own Cons Rate Total</label>\n+        <description>Total own comsumption rate</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"statistic-autonomy-degree-total\">\n+        <item-type>Number:Dimensionless</item-type>\n+        <label>Autonomy Degree Total</label>\n+        <description>Total autonomy degree</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-battery-voltage-second-gen\">\n+        <item-type>Number:ElectricalPotential</item-type>\n+        <label>Battery Voltage</label>\n+        <description>Current battery voltage</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-bat-state-of-charge\">\n+        <item-type>Number:Dimensionless</item-type>\n+        <label>Bat State Of Charge</label>\n+        <description>Current battery charge state</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\"  pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-self-consumption\">\n+        <item-type>Number:Power</item-type>\n+        <label>Self Consumption</label>\n+        <description>Current self consumption</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-charge-time-end\">\n+        <item-type>Number:Time</item-type>\n+        <label>Charge Time End</label>\n+        <description>Set charge time end</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\"/>\n+    </channel-type>\n+    <channel-type id=\"device-local-battery-type\">\n+        <item-type>String</item-type>\n+        <label>Battery Type</label>\n+        <description>Set battery type</description>\n+        <category>String</category>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a23cb96524f25000440822cab4ca9f2b22523662"}, "originalPosition": 358}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTkzNDYyNA==", "bodyText": "I don't think this is a valid category", "url": "https://github.com/openhab/openhab-addons/pull/8574#discussion_r501934624", "createdAt": "2020-10-08T18:39:16Z", "author": {"login": "cpmeister"}, "path": "bundles/org.openhab.binding.kostalinverter/src/main/resources/OH-INF/thing/Channels.xml", "diffHunk": "@@ -484,4 +484,431 @@\n \t\t<category>Energy</category>\n \t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n \t</channel-type>\n+\t<channel-type id=\"device-local-grid-output-power\">\n+        <item-type>Number:Power</item-type>\n+        <label>Grid Output Power</label>\n+        <description>Current output power to the grid</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"statistic-yield-day-second-gen\">\n+        <item-type>Number:Power</item-type>\n+        <label>Yield Day</label>\n+        <description>Total produced power today</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"statistic-yield-total-second-gen\">\n+        <item-type>Number:Energy</item-type>\n+        <label>Yield Total</label>\n+        <description>Total produced power</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-operating-status\">\n+        <item-type>String </item-type>\n+        <label>Status</label>\n+        <description>Current operating status</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-grid-voltage-l1\">\n+        <item-type>Number:ElectricPotential</item-type>\n+        <label>Grid Voltage L1</label>\n+        <description>Current output voltage to the grid, L1</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-grid-current-l1\">\n+        <item-type>Number:ElectricCurrent</item-type>\n+        <label>Grid Current L1</label>\n+        <description>Current output current to the grid, L1</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f  %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-grid-power-l1\">\n+        <item-type>Number:Power</item-type>\n+        <label>Grid Power L1</label>\n+        <description>Current output power to the grid, L1</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-grid-voltage-l2\">\n+        <item-type>Number:ElectricPotential</item-type>\n+        <label>Grid Voltage L2</label>\n+        <description>Current output voltage to the grid, L2</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-grid-current-l2\">\n+        <item-type>Number:ElectricCurrent</item-type>\n+        <label>Grid Current L2</label>\n+        <description>Current output current to the grid, L2</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-grid-power-l2\">\n+        <item-type>Number:Power</item-type>\n+        <label>Grid Power L2</label>\n+        <description>Current output power to the grid, L2</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-grid-voltage-l3\">\n+        <item-type>Number:ElectricPotential</item-type>\n+        <label>Grid Voltage L3</label>\n+        <description>Current output voltage to the grid, L3</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-grid-current-l3\">\n+        <item-type>Number:ElectricCurrent</item-type>\n+        <label>Grid Current L3</label>\n+        <description>Current output current to the grid, L3</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-grid-power-l3\">\n+        <item-type>Number:Power</item-type>\n+        <label>Grid Power L3</label>\n+        <description>Current output power to the grid, L3</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-dc-power-pv\">\n+        <item-type>Number:Power</item-type>\n+        <label>Dc Power PV</label>\n+        <description>Current power from all solar panels</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-dc1-voltage\">\n+        <item-type>Number:ElectricPotential</item-type>\n+        <label>Dc1 Voltage</label>\n+        <description>Current voltage from solar panels, Dc1</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-dc1-current\">\n+        <item-type>Number:ElectricCurrent</item-type>\n+        <label>Dc1 Current</label>\n+        <description>Current current from solar panels, Dc1</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-dc1-power\">\n+        <item-type>Number:Power</item-type>\n+        <label>Dc1 Power</label>\n+        <description>Current power from solar panels, Dc1</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-dc2-voltage\">\n+        <item-type>Number:ElectricPotential</item-type>\n+        <label>Dc2 Voltage</label>\n+        <description>Current voltage from solar panels, Dc2</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-dc2-current\">\n+        <item-type>Number:ElectricCurrent</item-type>\n+        <label>Dc2 Current</label>\n+        <description>Current current from solar panels, Dc2</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-dc2-power\">\n+        <item-type>Number:Power</item-type>\n+        <label>Dc2 Power</label>\n+        <description>Current power from solar panels, Dc2</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-dc3-voltage\">\n+        <item-type>Number:ElectricPotential</item-type>\n+        <label>Dc3 Voltage</label>\n+        <description>Current voltage from solar panels, Dc3</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-dc3-current\">\n+        <item-type>Number:ElectricCurrent</item-type>\n+        <label>Dc3 Current</label>\n+        <description>Current current from solar panels, Dc3</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-dc3-power\">\n+        <item-type>Number:Power</item-type>\n+        <label>Dc3 Power</label>\n+        <description>Current power from solar panels, Dc3</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-akt-home-consumption-solar\">\n+        <item-type>Number:Power</item-type>\n+        <label>Actual Home Consumption Solar</label>\n+        <description>Current consumption from solar panels</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-akt-home-consumption-bat\">\n+        <item-type>Number:Power</item-type>\n+        <label>Actual Home Consumption Battery</label>\n+        <description>Current consumption from battery</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-akt-home-consumption-grid\">\n+        <item-type>Number:Energy</item-type>\n+        <label>Actual Home Consumption Grid</label>\n+        <description>Current consumption from grid</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-phase-sel-home-consump-l1\">\n+        <item-type>Number:Power</item-type>\n+        <label>Home Consumption L1</label>\n+        <description>Current consumption, L1</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-phase-sel-home-consump-l2\">\n+        <item-type>Number:Power</item-type>\n+        <label>Home Consumption L2</label>\n+        <description>Current consumption, L2</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-phase-sel-home-consump-l3\">\n+        <item-type>Number:Power</item-type>\n+        <label>Home Consumption L3</label>\n+        <description>Current consumption, L3</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-grid-freq\">\n+        <item-type>Number:Frequency</item-type>\n+        <label>Grid Freq</label>\n+        <description>Current frequency on grid</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-grid-cos-phi\">\n+        <item-type>Number:Angle</item-type>\n+        <label>Grid Cos Phi</label>\n+        <description>Current power factor on grid</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"statistic-home-consumption-day\">\n+        <item-type>Number:Energy</item-type>\n+        <label>Home Consumption Day</label>\n+        <description>Total home consumption today</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"statistic-own-consumption-day\">\n+        <item-type>Number:Energy</item-type>\n+        <label>Own Consumption Day</label>\n+        <description>Total own consumption today</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"statistic-own-cons-rate-day\">\n+        <item-type>Number:Dimensionless</item-type>\n+        <label>Own Cons Rate Day</label>\n+        <description>Total own consumption rate today</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"statistic-autonomy-degree-day\">\n+        <item-type>Number:Dimensionless</item-type>\n+        <label>Autonomy Degree Day</label>\n+        <description>Total autonomy degree day</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"statistic-home-consumption-total\">\n+        <item-type>Number:Energy</item-type>\n+        <label>Home Consumption Total</label>\n+        <description>Total home consumption</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"statistic-own-consumption-total\">\n+        <item-type>Number:Energy</item-type>\n+        <label>Own Consumption Total</label>\n+        <description>Total own consumption</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"statistic-total-operating-time\">\n+        <item-type>Number:Time</item-type>\n+        <label>Total Operating Time</label>\n+        <description>Total operating time</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-current\">\n+        <item-type>Number:ElectricCurrent</item-type>\n+        <label>Current</label>\n+        <description>Current</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-current-dir\">\n+        <item-type>Number:ElectricCurrent</item-type>\n+        <label>Current Dir</label>\n+        <description>Current dir</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-charge-cycles\">\n+        <item-type>String</item-type>\n+        <label>Charge Cycles</label>\n+        <description>Total number of charge cycles</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-battery-temperature\">\n+        <item-type>Number:Temperature</item-type>\n+        <label>Battery Temperature</label>\n+        <description>Current battery temperature</description>\n+        <category>Temperature</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-loginterval\">\n+        <item-type>Number:Time</item-type>\n+        <label>Log Interval</label>\n+        <description>Set value for loginterval</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-s0-inpulse-cnt\">\n+        <item-type>String</item-type>\n+        <label>S0 Input Pulses Counter</label>\n+        <description>S0-pulse counter</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"statistic-own-cons-rate-total\">\n+        <item-type>Number:Dimensionless</item-type>\n+        <label>Own Cons Rate Total</label>\n+        <description>Total own comsumption rate</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"statistic-autonomy-degree-total\">\n+        <item-type>Number:Dimensionless</item-type>\n+        <label>Autonomy Degree Total</label>\n+        <description>Total autonomy degree</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-battery-voltage-second-gen\">\n+        <item-type>Number:ElectricalPotential</item-type>\n+        <label>Battery Voltage</label>\n+        <description>Current battery voltage</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-bat-state-of-charge\">\n+        <item-type>Number:Dimensionless</item-type>\n+        <label>Bat State Of Charge</label>\n+        <description>Current battery charge state</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\"  pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-self-consumption\">\n+        <item-type>Number:Power</item-type>\n+        <label>Self Consumption</label>\n+        <description>Current self consumption</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-charge-time-end\">\n+        <item-type>Number:Time</item-type>\n+        <label>Charge Time End</label>\n+        <description>Set charge time end</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\"/>\n+    </channel-type>\n+    <channel-type id=\"device-local-battery-type\">\n+        <item-type>String</item-type>\n+        <label>Battery Type</label>\n+        <description>Set battery type</description>\n+        <category>String</category>\n+        <state readOnly=\"true\"/>\n+    </channel-type>\n+     <channel-type id=\"device-local-battery-usage-consumption\">\n+        <item-type>String</item-type>\n+        <label>Battery usage Consumption</label>\n+        <description>Set battery usage consumption</description>\n+        <category>String</category>\n+        <state readOnly=\"true\"/>\n+    </channel-type>\n+     <channel-type id=\"device-local-battery-usage-strategy\">\n+        <item-type>String</item-type>\n+        <label>Battery Usage Strategy</label>\n+        <description>Set battery usage strategy</description>\n+        <category>String</category>\n+        <state readOnly=\"true\"/>\n+    </channel-type>\n+    <channel-type id=\"device-local-smart-battery-control\">\n+        <item-type>Switch</item-type>\n+        <label>Smart Battery Control</label>\n+        <description>Set smart battery control</description>\n+        <category>Switch</category>\n+        <state readOnly=\"true\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-smart-battery-control-text\">\n+        <item-type>String</item-type>\n+        <label>Smart Battery Control Text</label>\n+        <description>Set smart battery control text</description>\n+        <category>String</category>\n+        <state readOnly=\"true\" />\n+    </channel-type>\n+     <channel-type id=\"device-local-battery-charge-time-from\">\n+        <item-type>Number:Time</item-type>\n+        <label>Battery Charge Time From</label>\n+        <description>Set battery charge time from</description>\n+        <category>Number:Time</category>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a23cb96524f25000440822cab4ca9f2b22523662"}, "originalPosition": 393}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTkzNDg5NA==", "bodyText": "Maybe you can provide a better description as to what these numbers are supposed to mean?", "url": "https://github.com/openhab/openhab-addons/pull/8574#discussion_r501934894", "createdAt": "2020-10-08T18:39:47Z", "author": {"login": "cpmeister"}, "path": "bundles/org.openhab.binding.kostalinverter/src/main/resources/OH-INF/thing/Channels.xml", "diffHunk": "@@ -484,4 +484,431 @@\n \t\t<category>Energy</category>\n \t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n \t</channel-type>\n+\t<channel-type id=\"device-local-grid-output-power\">\n+        <item-type>Number:Power</item-type>\n+        <label>Grid Output Power</label>\n+        <description>Current output power to the grid</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"statistic-yield-day-second-gen\">\n+        <item-type>Number:Power</item-type>\n+        <label>Yield Day</label>\n+        <description>Total produced power today</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"statistic-yield-total-second-gen\">\n+        <item-type>Number:Energy</item-type>\n+        <label>Yield Total</label>\n+        <description>Total produced power</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-operating-status\">\n+        <item-type>String </item-type>\n+        <label>Status</label>\n+        <description>Current operating status</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-grid-voltage-l1\">\n+        <item-type>Number:ElectricPotential</item-type>\n+        <label>Grid Voltage L1</label>\n+        <description>Current output voltage to the grid, L1</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-grid-current-l1\">\n+        <item-type>Number:ElectricCurrent</item-type>\n+        <label>Grid Current L1</label>\n+        <description>Current output current to the grid, L1</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f  %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-grid-power-l1\">\n+        <item-type>Number:Power</item-type>\n+        <label>Grid Power L1</label>\n+        <description>Current output power to the grid, L1</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-grid-voltage-l2\">\n+        <item-type>Number:ElectricPotential</item-type>\n+        <label>Grid Voltage L2</label>\n+        <description>Current output voltage to the grid, L2</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-grid-current-l2\">\n+        <item-type>Number:ElectricCurrent</item-type>\n+        <label>Grid Current L2</label>\n+        <description>Current output current to the grid, L2</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-grid-power-l2\">\n+        <item-type>Number:Power</item-type>\n+        <label>Grid Power L2</label>\n+        <description>Current output power to the grid, L2</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-grid-voltage-l3\">\n+        <item-type>Number:ElectricPotential</item-type>\n+        <label>Grid Voltage L3</label>\n+        <description>Current output voltage to the grid, L3</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-grid-current-l3\">\n+        <item-type>Number:ElectricCurrent</item-type>\n+        <label>Grid Current L3</label>\n+        <description>Current output current to the grid, L3</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-grid-power-l3\">\n+        <item-type>Number:Power</item-type>\n+        <label>Grid Power L3</label>\n+        <description>Current output power to the grid, L3</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-dc-power-pv\">\n+        <item-type>Number:Power</item-type>\n+        <label>Dc Power PV</label>\n+        <description>Current power from all solar panels</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-dc1-voltage\">\n+        <item-type>Number:ElectricPotential</item-type>\n+        <label>Dc1 Voltage</label>\n+        <description>Current voltage from solar panels, Dc1</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-dc1-current\">\n+        <item-type>Number:ElectricCurrent</item-type>\n+        <label>Dc1 Current</label>\n+        <description>Current current from solar panels, Dc1</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-dc1-power\">\n+        <item-type>Number:Power</item-type>\n+        <label>Dc1 Power</label>\n+        <description>Current power from solar panels, Dc1</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-dc2-voltage\">\n+        <item-type>Number:ElectricPotential</item-type>\n+        <label>Dc2 Voltage</label>\n+        <description>Current voltage from solar panels, Dc2</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-dc2-current\">\n+        <item-type>Number:ElectricCurrent</item-type>\n+        <label>Dc2 Current</label>\n+        <description>Current current from solar panels, Dc2</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-dc2-power\">\n+        <item-type>Number:Power</item-type>\n+        <label>Dc2 Power</label>\n+        <description>Current power from solar panels, Dc2</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-dc3-voltage\">\n+        <item-type>Number:ElectricPotential</item-type>\n+        <label>Dc3 Voltage</label>\n+        <description>Current voltage from solar panels, Dc3</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-dc3-current\">\n+        <item-type>Number:ElectricCurrent</item-type>\n+        <label>Dc3 Current</label>\n+        <description>Current current from solar panels, Dc3</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-dc3-power\">\n+        <item-type>Number:Power</item-type>\n+        <label>Dc3 Power</label>\n+        <description>Current power from solar panels, Dc3</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-akt-home-consumption-solar\">\n+        <item-type>Number:Power</item-type>\n+        <label>Actual Home Consumption Solar</label>\n+        <description>Current consumption from solar panels</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-akt-home-consumption-bat\">\n+        <item-type>Number:Power</item-type>\n+        <label>Actual Home Consumption Battery</label>\n+        <description>Current consumption from battery</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-akt-home-consumption-grid\">\n+        <item-type>Number:Energy</item-type>\n+        <label>Actual Home Consumption Grid</label>\n+        <description>Current consumption from grid</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-phase-sel-home-consump-l1\">\n+        <item-type>Number:Power</item-type>\n+        <label>Home Consumption L1</label>\n+        <description>Current consumption, L1</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-phase-sel-home-consump-l2\">\n+        <item-type>Number:Power</item-type>\n+        <label>Home Consumption L2</label>\n+        <description>Current consumption, L2</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-phase-sel-home-consump-l3\">\n+        <item-type>Number:Power</item-type>\n+        <label>Home Consumption L3</label>\n+        <description>Current consumption, L3</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-grid-freq\">\n+        <item-type>Number:Frequency</item-type>\n+        <label>Grid Freq</label>\n+        <description>Current frequency on grid</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-grid-cos-phi\">\n+        <item-type>Number:Angle</item-type>\n+        <label>Grid Cos Phi</label>\n+        <description>Current power factor on grid</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"statistic-home-consumption-day\">\n+        <item-type>Number:Energy</item-type>\n+        <label>Home Consumption Day</label>\n+        <description>Total home consumption today</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"statistic-own-consumption-day\">\n+        <item-type>Number:Energy</item-type>\n+        <label>Own Consumption Day</label>\n+        <description>Total own consumption today</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"statistic-own-cons-rate-day\">\n+        <item-type>Number:Dimensionless</item-type>\n+        <label>Own Cons Rate Day</label>\n+        <description>Total own consumption rate today</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"statistic-autonomy-degree-day\">\n+        <item-type>Number:Dimensionless</item-type>\n+        <label>Autonomy Degree Day</label>\n+        <description>Total autonomy degree day</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"statistic-home-consumption-total\">\n+        <item-type>Number:Energy</item-type>\n+        <label>Home Consumption Total</label>\n+        <description>Total home consumption</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"statistic-own-consumption-total\">\n+        <item-type>Number:Energy</item-type>\n+        <label>Own Consumption Total</label>\n+        <description>Total own consumption</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"statistic-total-operating-time\">\n+        <item-type>Number:Time</item-type>\n+        <label>Total Operating Time</label>\n+        <description>Total operating time</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-current\">\n+        <item-type>Number:ElectricCurrent</item-type>\n+        <label>Current</label>\n+        <description>Current</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-current-dir\">\n+        <item-type>Number:ElectricCurrent</item-type>\n+        <label>Current Dir</label>\n+        <description>Current dir</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-charge-cycles\">\n+        <item-type>String</item-type>\n+        <label>Charge Cycles</label>\n+        <description>Total number of charge cycles</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-battery-temperature\">\n+        <item-type>Number:Temperature</item-type>\n+        <label>Battery Temperature</label>\n+        <description>Current battery temperature</description>\n+        <category>Temperature</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-loginterval\">\n+        <item-type>Number:Time</item-type>\n+        <label>Log Interval</label>\n+        <description>Set value for loginterval</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-s0-inpulse-cnt\">\n+        <item-type>String</item-type>\n+        <label>S0 Input Pulses Counter</label>\n+        <description>S0-pulse counter</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"statistic-own-cons-rate-total\">\n+        <item-type>Number:Dimensionless</item-type>\n+        <label>Own Cons Rate Total</label>\n+        <description>Total own comsumption rate</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"statistic-autonomy-degree-total\">\n+        <item-type>Number:Dimensionless</item-type>\n+        <label>Autonomy Degree Total</label>\n+        <description>Total autonomy degree</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-battery-voltage-second-gen\">\n+        <item-type>Number:ElectricalPotential</item-type>\n+        <label>Battery Voltage</label>\n+        <description>Current battery voltage</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-bat-state-of-charge\">\n+        <item-type>Number:Dimensionless</item-type>\n+        <label>Bat State Of Charge</label>\n+        <description>Current battery charge state</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\"  pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-self-consumption\">\n+        <item-type>Number:Power</item-type>\n+        <label>Self Consumption</label>\n+        <description>Current self consumption</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-charge-time-end\">\n+        <item-type>Number:Time</item-type>\n+        <label>Charge Time End</label>\n+        <description>Set charge time end</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\"/>\n+    </channel-type>\n+    <channel-type id=\"device-local-battery-type\">\n+        <item-type>String</item-type>\n+        <label>Battery Type</label>\n+        <description>Set battery type</description>\n+        <category>String</category>\n+        <state readOnly=\"true\"/>\n+    </channel-type>\n+     <channel-type id=\"device-local-battery-usage-consumption\">\n+        <item-type>String</item-type>\n+        <label>Battery usage Consumption</label>\n+        <description>Set battery usage consumption</description>\n+        <category>String</category>\n+        <state readOnly=\"true\"/>\n+    </channel-type>\n+     <channel-type id=\"device-local-battery-usage-strategy\">\n+        <item-type>String</item-type>\n+        <label>Battery Usage Strategy</label>\n+        <description>Set battery usage strategy</description>\n+        <category>String</category>\n+        <state readOnly=\"true\"/>\n+    </channel-type>\n+    <channel-type id=\"device-local-smart-battery-control\">\n+        <item-type>Switch</item-type>\n+        <label>Smart Battery Control</label>\n+        <description>Set smart battery control</description>\n+        <category>Switch</category>\n+        <state readOnly=\"true\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-smart-battery-control-text\">\n+        <item-type>String</item-type>\n+        <label>Smart Battery Control Text</label>\n+        <description>Set smart battery control text</description>\n+        <category>String</category>\n+        <state readOnly=\"true\" />\n+    </channel-type>\n+     <channel-type id=\"device-local-battery-charge-time-from\">\n+        <item-type>Number:Time</item-type>\n+        <label>Battery Charge Time From</label>\n+        <description>Set battery charge time from</description>\n+        <category>Number:Time</category>\n+        <state readOnly=\"true\"/>\n+    </channel-type>\n+     <channel-type id=\"device-local-battery-charge-time-to\">\n+        <item-type>Number:Time</item-type>\n+        <label>Battery Charge Time To</label>\n+        <description>Set battery charge time to</description>\n+        <category>String</category>\n+        <state readOnly=\"true\"/>\n+    </channel-type>\n+     <channel-type id=\"device-local-max-depth-of-discharge\">\n+        <item-type>String</item-type>\n+        <label>Max Depth Of Discharge</label>\n+        <description>Set max depth of discharge</description>\n+        <category>String</category>\n+        <state readOnly=\"true\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-shadow-management\">\n+        <item-type>Number</item-type>\n+        <label>Shadow Management</label>\n+        <description>Set shadow management</description>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a23cb96524f25000440822cab4ca9f2b22523662"}, "originalPosition": 413}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTkzNTQ2OQ==", "bodyText": "Please check the other categories you have specified to make sure that they are what you want.", "url": "https://github.com/openhab/openhab-addons/pull/8574#discussion_r501935469", "createdAt": "2020-10-08T18:40:44Z", "author": {"login": "cpmeister"}, "path": "bundles/org.openhab.binding.kostalinverter/src/main/resources/OH-INF/thing/Channels.xml", "diffHunk": "@@ -484,4 +484,431 @@\n \t\t<category>Energy</category>\n \t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n \t</channel-type>\n+\t<channel-type id=\"device-local-grid-output-power\">\n+        <item-type>Number:Power</item-type>\n+        <label>Grid Output Power</label>\n+        <description>Current output power to the grid</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"statistic-yield-day-second-gen\">\n+        <item-type>Number:Power</item-type>\n+        <label>Yield Day</label>\n+        <description>Total produced power today</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"statistic-yield-total-second-gen\">\n+        <item-type>Number:Energy</item-type>\n+        <label>Yield Total</label>\n+        <description>Total produced power</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-operating-status\">\n+        <item-type>String </item-type>\n+        <label>Status</label>\n+        <description>Current operating status</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-grid-voltage-l1\">\n+        <item-type>Number:ElectricPotential</item-type>\n+        <label>Grid Voltage L1</label>\n+        <description>Current output voltage to the grid, L1</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-grid-current-l1\">\n+        <item-type>Number:ElectricCurrent</item-type>\n+        <label>Grid Current L1</label>\n+        <description>Current output current to the grid, L1</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f  %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-grid-power-l1\">\n+        <item-type>Number:Power</item-type>\n+        <label>Grid Power L1</label>\n+        <description>Current output power to the grid, L1</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-grid-voltage-l2\">\n+        <item-type>Number:ElectricPotential</item-type>\n+        <label>Grid Voltage L2</label>\n+        <description>Current output voltage to the grid, L2</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-grid-current-l2\">\n+        <item-type>Number:ElectricCurrent</item-type>\n+        <label>Grid Current L2</label>\n+        <description>Current output current to the grid, L2</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-grid-power-l2\">\n+        <item-type>Number:Power</item-type>\n+        <label>Grid Power L2</label>\n+        <description>Current output power to the grid, L2</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-grid-voltage-l3\">\n+        <item-type>Number:ElectricPotential</item-type>\n+        <label>Grid Voltage L3</label>\n+        <description>Current output voltage to the grid, L3</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-grid-current-l3\">\n+        <item-type>Number:ElectricCurrent</item-type>\n+        <label>Grid Current L3</label>\n+        <description>Current output current to the grid, L3</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-grid-power-l3\">\n+        <item-type>Number:Power</item-type>\n+        <label>Grid Power L3</label>\n+        <description>Current output power to the grid, L3</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-dc-power-pv\">\n+        <item-type>Number:Power</item-type>\n+        <label>Dc Power PV</label>\n+        <description>Current power from all solar panels</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-dc1-voltage\">\n+        <item-type>Number:ElectricPotential</item-type>\n+        <label>Dc1 Voltage</label>\n+        <description>Current voltage from solar panels, Dc1</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-dc1-current\">\n+        <item-type>Number:ElectricCurrent</item-type>\n+        <label>Dc1 Current</label>\n+        <description>Current current from solar panels, Dc1</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-dc1-power\">\n+        <item-type>Number:Power</item-type>\n+        <label>Dc1 Power</label>\n+        <description>Current power from solar panels, Dc1</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-dc2-voltage\">\n+        <item-type>Number:ElectricPotential</item-type>\n+        <label>Dc2 Voltage</label>\n+        <description>Current voltage from solar panels, Dc2</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-dc2-current\">\n+        <item-type>Number:ElectricCurrent</item-type>\n+        <label>Dc2 Current</label>\n+        <description>Current current from solar panels, Dc2</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-dc2-power\">\n+        <item-type>Number:Power</item-type>\n+        <label>Dc2 Power</label>\n+        <description>Current power from solar panels, Dc2</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-dc3-voltage\">\n+        <item-type>Number:ElectricPotential</item-type>\n+        <label>Dc3 Voltage</label>\n+        <description>Current voltage from solar panels, Dc3</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-dc3-current\">\n+        <item-type>Number:ElectricCurrent</item-type>\n+        <label>Dc3 Current</label>\n+        <description>Current current from solar panels, Dc3</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-dc3-power\">\n+        <item-type>Number:Power</item-type>\n+        <label>Dc3 Power</label>\n+        <description>Current power from solar panels, Dc3</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-akt-home-consumption-solar\">\n+        <item-type>Number:Power</item-type>\n+        <label>Actual Home Consumption Solar</label>\n+        <description>Current consumption from solar panels</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-akt-home-consumption-bat\">\n+        <item-type>Number:Power</item-type>\n+        <label>Actual Home Consumption Battery</label>\n+        <description>Current consumption from battery</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-akt-home-consumption-grid\">\n+        <item-type>Number:Energy</item-type>\n+        <label>Actual Home Consumption Grid</label>\n+        <description>Current consumption from grid</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-phase-sel-home-consump-l1\">\n+        <item-type>Number:Power</item-type>\n+        <label>Home Consumption L1</label>\n+        <description>Current consumption, L1</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-phase-sel-home-consump-l2\">\n+        <item-type>Number:Power</item-type>\n+        <label>Home Consumption L2</label>\n+        <description>Current consumption, L2</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-phase-sel-home-consump-l3\">\n+        <item-type>Number:Power</item-type>\n+        <label>Home Consumption L3</label>\n+        <description>Current consumption, L3</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-grid-freq\">\n+        <item-type>Number:Frequency</item-type>\n+        <label>Grid Freq</label>\n+        <description>Current frequency on grid</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-grid-cos-phi\">\n+        <item-type>Number:Angle</item-type>\n+        <label>Grid Cos Phi</label>\n+        <description>Current power factor on grid</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"statistic-home-consumption-day\">\n+        <item-type>Number:Energy</item-type>\n+        <label>Home Consumption Day</label>\n+        <description>Total home consumption today</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"statistic-own-consumption-day\">\n+        <item-type>Number:Energy</item-type>\n+        <label>Own Consumption Day</label>\n+        <description>Total own consumption today</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"statistic-own-cons-rate-day\">\n+        <item-type>Number:Dimensionless</item-type>\n+        <label>Own Cons Rate Day</label>\n+        <description>Total own consumption rate today</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"statistic-autonomy-degree-day\">\n+        <item-type>Number:Dimensionless</item-type>\n+        <label>Autonomy Degree Day</label>\n+        <description>Total autonomy degree day</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"statistic-home-consumption-total\">\n+        <item-type>Number:Energy</item-type>\n+        <label>Home Consumption Total</label>\n+        <description>Total home consumption</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"statistic-own-consumption-total\">\n+        <item-type>Number:Energy</item-type>\n+        <label>Own Consumption Total</label>\n+        <description>Total own consumption</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"statistic-total-operating-time\">\n+        <item-type>Number:Time</item-type>\n+        <label>Total Operating Time</label>\n+        <description>Total operating time</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-current\">\n+        <item-type>Number:ElectricCurrent</item-type>\n+        <label>Current</label>\n+        <description>Current</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-current-dir\">\n+        <item-type>Number:ElectricCurrent</item-type>\n+        <label>Current Dir</label>\n+        <description>Current dir</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-charge-cycles\">\n+        <item-type>String</item-type>\n+        <label>Charge Cycles</label>\n+        <description>Total number of charge cycles</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-battery-temperature\">\n+        <item-type>Number:Temperature</item-type>\n+        <label>Battery Temperature</label>\n+        <description>Current battery temperature</description>\n+        <category>Temperature</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-loginterval\">\n+        <item-type>Number:Time</item-type>\n+        <label>Log Interval</label>\n+        <description>Set value for loginterval</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-s0-inpulse-cnt\">\n+        <item-type>String</item-type>\n+        <label>S0 Input Pulses Counter</label>\n+        <description>S0-pulse counter</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"statistic-own-cons-rate-total\">\n+        <item-type>Number:Dimensionless</item-type>\n+        <label>Own Cons Rate Total</label>\n+        <description>Total own comsumption rate</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"statistic-autonomy-degree-total\">\n+        <item-type>Number:Dimensionless</item-type>\n+        <label>Autonomy Degree Total</label>\n+        <description>Total autonomy degree</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-battery-voltage-second-gen\">\n+        <item-type>Number:ElectricalPotential</item-type>\n+        <label>Battery Voltage</label>\n+        <description>Current battery voltage</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-bat-state-of-charge\">\n+        <item-type>Number:Dimensionless</item-type>\n+        <label>Bat State Of Charge</label>\n+        <description>Current battery charge state</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\"  pattern=\"%.0f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-self-consumption\">\n+        <item-type>Number:Power</item-type>\n+        <label>Self Consumption</label>\n+        <description>Current self consumption</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\" pattern=\"%.2f %unit%\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-charge-time-end\">\n+        <item-type>Number:Time</item-type>\n+        <label>Charge Time End</label>\n+        <description>Set charge time end</description>\n+        <category>Energy</category>\n+        <state readOnly=\"true\"/>\n+    </channel-type>\n+    <channel-type id=\"device-local-battery-type\">\n+        <item-type>String</item-type>\n+        <label>Battery Type</label>\n+        <description>Set battery type</description>\n+        <category>String</category>\n+        <state readOnly=\"true\"/>\n+    </channel-type>\n+     <channel-type id=\"device-local-battery-usage-consumption\">\n+        <item-type>String</item-type>\n+        <label>Battery usage Consumption</label>\n+        <description>Set battery usage consumption</description>\n+        <category>String</category>\n+        <state readOnly=\"true\"/>\n+    </channel-type>\n+     <channel-type id=\"device-local-battery-usage-strategy\">\n+        <item-type>String</item-type>\n+        <label>Battery Usage Strategy</label>\n+        <description>Set battery usage strategy</description>\n+        <category>String</category>\n+        <state readOnly=\"true\"/>\n+    </channel-type>\n+    <channel-type id=\"device-local-smart-battery-control\">\n+        <item-type>Switch</item-type>\n+        <label>Smart Battery Control</label>\n+        <description>Set smart battery control</description>\n+        <category>Switch</category>\n+        <state readOnly=\"true\" />\n+    </channel-type>\n+    <channel-type id=\"device-local-smart-battery-control-text\">\n+        <item-type>String</item-type>\n+        <label>Smart Battery Control Text</label>\n+        <description>Set smart battery control text</description>\n+        <category>String</category>\n+        <state readOnly=\"true\" />\n+    </channel-type>\n+     <channel-type id=\"device-local-battery-charge-time-from\">\n+        <item-type>Number:Time</item-type>\n+        <label>Battery Charge Time From</label>\n+        <description>Set battery charge time from</description>\n+        <category>Number:Time</category>\n+        <state readOnly=\"true\"/>\n+    </channel-type>\n+     <channel-type id=\"device-local-battery-charge-time-to\">\n+        <item-type>Number:Time</item-type>\n+        <label>Battery Charge Time To</label>\n+        <description>Set battery charge time to</description>\n+        <category>String</category>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a23cb96524f25000440822cab4ca9f2b22523662"}, "originalPosition": 400}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTkzOTIxMw==", "bodyText": "Please save the Future returned here in a field then cancel it when this handler is disposed.", "url": "https://github.com/openhab/openhab-addons/pull/8574#discussion_r501939213", "createdAt": "2020-10-08T18:47:24Z", "author": {"login": "cpmeister"}, "path": "bundles/org.openhab.binding.kostalinverter/src/main/java/org/openhab/binding/internal/kostal/inverter/secondgeneration/SecondGenerationHandler.java", "diffHunk": "@@ -0,0 +1,354 @@\n+/**\n+ * Copyright (c) 2010-2020 Contributors to the openHAB project\n+ *\n+ * See the NOTICE file(s) distributed with this work for additional\n+ * information.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+\n+package org.openhab.binding.internal.kostal.inverter.secondgeneration;\n+\n+import java.io.BufferedReader;\n+import java.io.IOException;\n+import java.io.InputStreamReader;\n+import java.math.BigDecimal;\n+import java.net.URL;\n+import java.net.URLConnection;\n+import java.nio.charset.Charset;\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.concurrent.TimeUnit;\n+\n+import javax.measure.Unit;\n+\n+import org.eclipse.jdt.annotation.NonNullByDefault;\n+import org.eclipse.jdt.annotation.Nullable;\n+import org.eclipse.jetty.client.HttpClient;\n+import org.openhab.core.library.types.OnOffType;\n+import org.openhab.core.library.types.QuantityType;\n+import org.openhab.core.library.types.StringType;\n+import org.openhab.core.thing.Channel;\n+import org.openhab.core.thing.ChannelUID;\n+import org.openhab.core.thing.Thing;\n+import org.openhab.core.thing.ThingStatus;\n+import org.openhab.core.thing.ThingStatusDetail;\n+import org.openhab.core.thing.binding.BaseThingHandler;\n+import org.openhab.core.types.Command;\n+import org.openhab.core.types.RefreshType;\n+import org.openhab.core.types.State;\n+import org.openhab.core.types.UnDefType;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import com.google.gson.Gson;\n+import com.google.gson.GsonBuilder;\n+\n+/**\n+ * The {@link SecondGenerationHandler} is responsible for handling commands, which are\n+ * sent to one of the channels, and initiation and refreshing regarded to second generation part of the binding.\n+ *\n+ *\n+ * @author Christian Schneider - Initial contribution\n+ * @author Christoph Weitkamp - Incorporated new QuantityType (Units of Measurement)\n+ * @author \u00d6rjan Backsell - Redesigned regarding Piko1020, Piko New Generation\n+ */\n+\n+@NonNullByDefault\n+public class SecondGenerationHandler extends BaseThingHandler {\n+\n+    private final Logger logger = LoggerFactory.getLogger(SecondGenerationHandler.class);\n+\n+    private final HttpClient httpClient;\n+\n+    private List<SecondGenerationChannelConfiguration> channelConfigs = new ArrayList<>();\n+    private List<SecondGenerationChannelConfiguration> channelConfigsExt = new ArrayList<>();\n+    private List<SecondGenerationChannelConfiguration> channelConfigsExtExt = new ArrayList<>();\n+\n+    public SecondGenerationHandler(Thing thing, HttpClient httpClient) {\n+        super(thing);\n+        this.httpClient = httpClient;\n+    }\n+\n+    @Override\n+    public void handleCommand(ChannelUID channelUID, Command command) {\n+\n+        if (command instanceof RefreshType) {\n+            logger.debug(\"Handle command for {} on channel {}: {}\", thing.getUID(), channelUID, command);\n+        }\n+\n+        if (command == RefreshType.REFRESH) {\n+            return;\n+        }\n+\n+        final @Nullable SecondGenerationBindingConstants handleCommandConfig;\n+        handleCommandConfig = getConfigAs(SecondGenerationBindingConstants.class);\n+\n+        String url = handleCommandConfig.url.toString();\n+        String username = handleCommandConfig.username;\n+        String password = handleCommandConfig.password;\n+        String valueConfiguration = \"\";\n+        String dxsEntriesConf = \"\";\n+\n+        switch (channelUID.getId()) {\n+            case SecondGenerationBindingConstants.CHANNEL_CHARGETIMEEND:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556236\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_BATTERYTYPE:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556252\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_BATTERYUSAGECONSUMPTION:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556249\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_BATTERYUSAGESTRATEGY:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"83888896\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_SMARTBATTERYCONTROL:\n+                valueConfiguration = \"\";\n+                if (command == OnOffType.ON) {\n+                    valueConfiguration = \"True\";\n+                }\n+                if (command == OnOffType.OFF) {\n+                    valueConfiguration = \"False\";\n+                }\n+                dxsEntriesConf = \"33556484\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_SMARTBATTERYCONTROL_TEXT:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556484\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_BATTERYCHARGETIMEFROM:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556239\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_BATTERYCHARGETIMETO:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556240\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_MAXDEPTHOFDISCHARGE:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556247\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_SHADOWMANAGEMENT:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556483\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_EXTERNALMODULECONTROL:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556482\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_INVERTERNAME:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"16777984\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+        }\n+    }\n+\n+    @Override\n+    public void initialize() {\n+        channelConfigs = SecondGenerationChannelConfiguration.getChannelConfiguration();\n+        channelConfigsExt = SecondGenerationChannelConfiguration.getChannelConfigurationExt();\n+        channelConfigsExtExt = SecondGenerationChannelConfiguration.getChannelConfigurationExtExt();\n+\n+        updateStatus(ThingStatus.UNKNOWN);\n+\n+        scheduler.scheduleWithFixedDelay(() -> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a23cb96524f25000440822cab4ca9f2b22523662"}, "originalPosition": 187}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTkzOTY1NQ==", "bodyText": "Please save this gson object in a static final field so that you can reuse it.", "url": "https://github.com/openhab/openhab-addons/pull/8574#discussion_r501939655", "createdAt": "2020-10-08T18:48:15Z", "author": {"login": "cpmeister"}, "path": "bundles/org.openhab.binding.kostalinverter/src/main/java/org/openhab/binding/internal/kostal/inverter/secondgeneration/SecondGenerationHandler.java", "diffHunk": "@@ -0,0 +1,354 @@\n+/**\n+ * Copyright (c) 2010-2020 Contributors to the openHAB project\n+ *\n+ * See the NOTICE file(s) distributed with this work for additional\n+ * information.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+\n+package org.openhab.binding.internal.kostal.inverter.secondgeneration;\n+\n+import java.io.BufferedReader;\n+import java.io.IOException;\n+import java.io.InputStreamReader;\n+import java.math.BigDecimal;\n+import java.net.URL;\n+import java.net.URLConnection;\n+import java.nio.charset.Charset;\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.concurrent.TimeUnit;\n+\n+import javax.measure.Unit;\n+\n+import org.eclipse.jdt.annotation.NonNullByDefault;\n+import org.eclipse.jdt.annotation.Nullable;\n+import org.eclipse.jetty.client.HttpClient;\n+import org.openhab.core.library.types.OnOffType;\n+import org.openhab.core.library.types.QuantityType;\n+import org.openhab.core.library.types.StringType;\n+import org.openhab.core.thing.Channel;\n+import org.openhab.core.thing.ChannelUID;\n+import org.openhab.core.thing.Thing;\n+import org.openhab.core.thing.ThingStatus;\n+import org.openhab.core.thing.ThingStatusDetail;\n+import org.openhab.core.thing.binding.BaseThingHandler;\n+import org.openhab.core.types.Command;\n+import org.openhab.core.types.RefreshType;\n+import org.openhab.core.types.State;\n+import org.openhab.core.types.UnDefType;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import com.google.gson.Gson;\n+import com.google.gson.GsonBuilder;\n+\n+/**\n+ * The {@link SecondGenerationHandler} is responsible for handling commands, which are\n+ * sent to one of the channels, and initiation and refreshing regarded to second generation part of the binding.\n+ *\n+ *\n+ * @author Christian Schneider - Initial contribution\n+ * @author Christoph Weitkamp - Incorporated new QuantityType (Units of Measurement)\n+ * @author \u00d6rjan Backsell - Redesigned regarding Piko1020, Piko New Generation\n+ */\n+\n+@NonNullByDefault\n+public class SecondGenerationHandler extends BaseThingHandler {\n+\n+    private final Logger logger = LoggerFactory.getLogger(SecondGenerationHandler.class);\n+\n+    private final HttpClient httpClient;\n+\n+    private List<SecondGenerationChannelConfiguration> channelConfigs = new ArrayList<>();\n+    private List<SecondGenerationChannelConfiguration> channelConfigsExt = new ArrayList<>();\n+    private List<SecondGenerationChannelConfiguration> channelConfigsExtExt = new ArrayList<>();\n+\n+    public SecondGenerationHandler(Thing thing, HttpClient httpClient) {\n+        super(thing);\n+        this.httpClient = httpClient;\n+    }\n+\n+    @Override\n+    public void handleCommand(ChannelUID channelUID, Command command) {\n+\n+        if (command instanceof RefreshType) {\n+            logger.debug(\"Handle command for {} on channel {}: {}\", thing.getUID(), channelUID, command);\n+        }\n+\n+        if (command == RefreshType.REFRESH) {\n+            return;\n+        }\n+\n+        final @Nullable SecondGenerationBindingConstants handleCommandConfig;\n+        handleCommandConfig = getConfigAs(SecondGenerationBindingConstants.class);\n+\n+        String url = handleCommandConfig.url.toString();\n+        String username = handleCommandConfig.username;\n+        String password = handleCommandConfig.password;\n+        String valueConfiguration = \"\";\n+        String dxsEntriesConf = \"\";\n+\n+        switch (channelUID.getId()) {\n+            case SecondGenerationBindingConstants.CHANNEL_CHARGETIMEEND:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556236\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_BATTERYTYPE:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556252\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_BATTERYUSAGECONSUMPTION:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556249\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_BATTERYUSAGESTRATEGY:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"83888896\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_SMARTBATTERYCONTROL:\n+                valueConfiguration = \"\";\n+                if (command == OnOffType.ON) {\n+                    valueConfiguration = \"True\";\n+                }\n+                if (command == OnOffType.OFF) {\n+                    valueConfiguration = \"False\";\n+                }\n+                dxsEntriesConf = \"33556484\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_SMARTBATTERYCONTROL_TEXT:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556484\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_BATTERYCHARGETIMEFROM:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556239\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_BATTERYCHARGETIMETO:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556240\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_MAXDEPTHOFDISCHARGE:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556247\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_SHADOWMANAGEMENT:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556483\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_EXTERNALMODULECONTROL:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556482\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_INVERTERNAME:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"16777984\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+        }\n+    }\n+\n+    @Override\n+    public void initialize() {\n+        channelConfigs = SecondGenerationChannelConfiguration.getChannelConfiguration();\n+        channelConfigsExt = SecondGenerationChannelConfiguration.getChannelConfigurationExt();\n+        channelConfigsExtExt = SecondGenerationChannelConfiguration.getChannelConfigurationExtExt();\n+\n+        updateStatus(ThingStatus.UNKNOWN);\n+\n+        scheduler.scheduleWithFixedDelay(() -> {\n+            try {\n+                updateStatus(ThingStatus.ONLINE);\n+                refresh();\n+            } catch (RuntimeException scheduleWithFixedDelayException) {\n+                updateStatus(ThingStatus.OFFLINE, ThingStatusDetail.COMMUNICATION_ERROR,\n+                        scheduleWithFixedDelayException.getClass().getName() + \":\"\n+                                + scheduleWithFixedDelayException.getMessage());\n+                logger.debug(\"Error refreshing source = {}: {}\", getThing().getUID(),\n+                        scheduleWithFixedDelayException.getMessage());\n+            }\n+        }, 0, SecondGenerationBindingConstants.REFRESHINTERVAL_SEC, TimeUnit.SECONDS);\n+    }\n+\n+    @SuppressWarnings(\"null\")\n+    private void refresh() {\n+        final @Nullable SecondGenerationBindingConstants refreshConfig;\n+        refreshConfig = getConfigAs(SecondGenerationBindingConstants.class);\n+        String dxsEntriesCall = refreshConfig.url.toString() + \"/api/dxs.json?dxsEntries=\"\n+                + channelConfigs.get(0).dxsEntries;\n+        String dxsEntriesCallExt = refreshConfig.url.toString() + \"/api/dxs.json?dxsEntries=\"\n+                + channelConfigsExt.get(0).dxsEntries;\n+\n+        for (int i = 1; i < channelConfigs.size(); i++) {\n+            dxsEntriesCall += (\"&dxsEntries=\" + channelConfigs.get(i).dxsEntries);\n+            dxsEntriesCallExt += (\"&dxsEntries=\" + channelConfigsExt.get(i).dxsEntries);\n+        }\n+\n+        String jsonDxsEntriesResponse = callURL(dxsEntriesCall);\n+        String jsonDxsEntriesResponseExt = callURL(dxsEntriesCallExt);\n+        String jsonDxsEntriesResponseExtExt = callURL(refreshConfig.url.toString() + \"/api/dxs.json?dxsEntries=\"\n+                + channelConfigsExt.get(0).dxsEntries + \"&dxsEntries=\" + channelConfigsExt.get(1).dxsEntries\n+                + \"&dxsEntries=\" + channelConfigsExt.get(2).dxsEntries);\n+\n+        // Get Gson object\n+        Gson gson = new GsonBuilder().setPrettyPrinting().create();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a23cb96524f25000440822cab4ca9f2b22523662"}, "originalPosition": 222}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTk0NDQxOQ==", "bodyText": "Why aren't these just concatenated into a single String[]?", "url": "https://github.com/openhab/openhab-addons/pull/8574#discussion_r501944419", "createdAt": "2020-10-08T18:56:29Z", "author": {"login": "cpmeister"}, "path": "bundles/org.openhab.binding.kostalinverter/src/main/java/org/openhab/binding/internal/kostal/inverter/secondgeneration/SecondGenerationHandler.java", "diffHunk": "@@ -0,0 +1,354 @@\n+/**\n+ * Copyright (c) 2010-2020 Contributors to the openHAB project\n+ *\n+ * See the NOTICE file(s) distributed with this work for additional\n+ * information.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+\n+package org.openhab.binding.internal.kostal.inverter.secondgeneration;\n+\n+import java.io.BufferedReader;\n+import java.io.IOException;\n+import java.io.InputStreamReader;\n+import java.math.BigDecimal;\n+import java.net.URL;\n+import java.net.URLConnection;\n+import java.nio.charset.Charset;\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.concurrent.TimeUnit;\n+\n+import javax.measure.Unit;\n+\n+import org.eclipse.jdt.annotation.NonNullByDefault;\n+import org.eclipse.jdt.annotation.Nullable;\n+import org.eclipse.jetty.client.HttpClient;\n+import org.openhab.core.library.types.OnOffType;\n+import org.openhab.core.library.types.QuantityType;\n+import org.openhab.core.library.types.StringType;\n+import org.openhab.core.thing.Channel;\n+import org.openhab.core.thing.ChannelUID;\n+import org.openhab.core.thing.Thing;\n+import org.openhab.core.thing.ThingStatus;\n+import org.openhab.core.thing.ThingStatusDetail;\n+import org.openhab.core.thing.binding.BaseThingHandler;\n+import org.openhab.core.types.Command;\n+import org.openhab.core.types.RefreshType;\n+import org.openhab.core.types.State;\n+import org.openhab.core.types.UnDefType;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import com.google.gson.Gson;\n+import com.google.gson.GsonBuilder;\n+\n+/**\n+ * The {@link SecondGenerationHandler} is responsible for handling commands, which are\n+ * sent to one of the channels, and initiation and refreshing regarded to second generation part of the binding.\n+ *\n+ *\n+ * @author Christian Schneider - Initial contribution\n+ * @author Christoph Weitkamp - Incorporated new QuantityType (Units of Measurement)\n+ * @author \u00d6rjan Backsell - Redesigned regarding Piko1020, Piko New Generation\n+ */\n+\n+@NonNullByDefault\n+public class SecondGenerationHandler extends BaseThingHandler {\n+\n+    private final Logger logger = LoggerFactory.getLogger(SecondGenerationHandler.class);\n+\n+    private final HttpClient httpClient;\n+\n+    private List<SecondGenerationChannelConfiguration> channelConfigs = new ArrayList<>();\n+    private List<SecondGenerationChannelConfiguration> channelConfigsExt = new ArrayList<>();\n+    private List<SecondGenerationChannelConfiguration> channelConfigsExtExt = new ArrayList<>();\n+\n+    public SecondGenerationHandler(Thing thing, HttpClient httpClient) {\n+        super(thing);\n+        this.httpClient = httpClient;\n+    }\n+\n+    @Override\n+    public void handleCommand(ChannelUID channelUID, Command command) {\n+\n+        if (command instanceof RefreshType) {\n+            logger.debug(\"Handle command for {} on channel {}: {}\", thing.getUID(), channelUID, command);\n+        }\n+\n+        if (command == RefreshType.REFRESH) {\n+            return;\n+        }\n+\n+        final @Nullable SecondGenerationBindingConstants handleCommandConfig;\n+        handleCommandConfig = getConfigAs(SecondGenerationBindingConstants.class);\n+\n+        String url = handleCommandConfig.url.toString();\n+        String username = handleCommandConfig.username;\n+        String password = handleCommandConfig.password;\n+        String valueConfiguration = \"\";\n+        String dxsEntriesConf = \"\";\n+\n+        switch (channelUID.getId()) {\n+            case SecondGenerationBindingConstants.CHANNEL_CHARGETIMEEND:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556236\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_BATTERYTYPE:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556252\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_BATTERYUSAGECONSUMPTION:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556249\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_BATTERYUSAGESTRATEGY:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"83888896\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_SMARTBATTERYCONTROL:\n+                valueConfiguration = \"\";\n+                if (command == OnOffType.ON) {\n+                    valueConfiguration = \"True\";\n+                }\n+                if (command == OnOffType.OFF) {\n+                    valueConfiguration = \"False\";\n+                }\n+                dxsEntriesConf = \"33556484\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_SMARTBATTERYCONTROL_TEXT:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556484\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_BATTERYCHARGETIMEFROM:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556239\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_BATTERYCHARGETIMETO:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556240\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_MAXDEPTHOFDISCHARGE:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556247\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_SHADOWMANAGEMENT:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556483\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_EXTERNALMODULECONTROL:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556482\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_INVERTERNAME:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"16777984\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+        }\n+    }\n+\n+    @Override\n+    public void initialize() {\n+        channelConfigs = SecondGenerationChannelConfiguration.getChannelConfiguration();\n+        channelConfigsExt = SecondGenerationChannelConfiguration.getChannelConfigurationExt();\n+        channelConfigsExtExt = SecondGenerationChannelConfiguration.getChannelConfigurationExtExt();\n+\n+        updateStatus(ThingStatus.UNKNOWN);\n+\n+        scheduler.scheduleWithFixedDelay(() -> {\n+            try {\n+                updateStatus(ThingStatus.ONLINE);\n+                refresh();\n+            } catch (RuntimeException scheduleWithFixedDelayException) {\n+                updateStatus(ThingStatus.OFFLINE, ThingStatusDetail.COMMUNICATION_ERROR,\n+                        scheduleWithFixedDelayException.getClass().getName() + \":\"\n+                                + scheduleWithFixedDelayException.getMessage());\n+                logger.debug(\"Error refreshing source = {}: {}\", getThing().getUID(),\n+                        scheduleWithFixedDelayException.getMessage());\n+            }\n+        }, 0, SecondGenerationBindingConstants.REFRESHINTERVAL_SEC, TimeUnit.SECONDS);\n+    }\n+\n+    @SuppressWarnings(\"null\")\n+    private void refresh() {\n+        final @Nullable SecondGenerationBindingConstants refreshConfig;\n+        refreshConfig = getConfigAs(SecondGenerationBindingConstants.class);\n+        String dxsEntriesCall = refreshConfig.url.toString() + \"/api/dxs.json?dxsEntries=\"\n+                + channelConfigs.get(0).dxsEntries;\n+        String dxsEntriesCallExt = refreshConfig.url.toString() + \"/api/dxs.json?dxsEntries=\"\n+                + channelConfigsExt.get(0).dxsEntries;\n+\n+        for (int i = 1; i < channelConfigs.size(); i++) {\n+            dxsEntriesCall += (\"&dxsEntries=\" + channelConfigs.get(i).dxsEntries);\n+            dxsEntriesCallExt += (\"&dxsEntries=\" + channelConfigsExt.get(i).dxsEntries);\n+        }\n+\n+        String jsonDxsEntriesResponse = callURL(dxsEntriesCall);\n+        String jsonDxsEntriesResponseExt = callURL(dxsEntriesCallExt);\n+        String jsonDxsEntriesResponseExtExt = callURL(refreshConfig.url.toString() + \"/api/dxs.json?dxsEntries=\"\n+                + channelConfigsExt.get(0).dxsEntries + \"&dxsEntries=\" + channelConfigsExt.get(1).dxsEntries\n+                + \"&dxsEntries=\" + channelConfigsExt.get(2).dxsEntries);\n+\n+        // Get Gson object\n+        Gson gson = new GsonBuilder().setPrettyPrinting().create();\n+\n+        // Parse result\n+        SecondGenerationDxsEntriesContainer dxsEntriesContainer = gson.fromJson(jsonDxsEntriesResponse,\n+                SecondGenerationDxsEntriesContainer.class);\n+        SecondGenerationDxsEntriesContainer dxsEntriesContainerExt = gson.fromJson(jsonDxsEntriesResponseExt,\n+                SecondGenerationDxsEntriesContainer.class);\n+        SecondGenerationDxsEntriesContainer dxsEntriesContainerExtExt = gson.fromJson(jsonDxsEntriesResponseExtExt,\n+                SecondGenerationDxsEntriesContainer.class);\n+\n+        // Create channel-posts array's\n+        String[] channelPosts = new String[23];\n+        String[] channelPostsExt = new String[23];\n+        String[] channelPostsExtExt = new String[3];\n+\n+        // Fill channelPosts with each item value\n+        int channelPostsCounter = 0;\n+        for (SecondGenerationDxsEntries dxsentries : dxsEntriesContainer.dxsEntries) {\n+            channelPosts[channelPostsCounter] = dxsentries.getName();\n+            channelPostsCounter++;\n+        }\n+\n+        // Fill channelPostsExt with each item value\n+        int channelPostsCounterExt = 0;\n+        for (SecondGenerationDxsEntries dxsentriesExt : dxsEntriesContainerExt.dxsEntries) {\n+            channelPostsExt[channelPostsCounterExt] = dxsentriesExt.getName();\n+            channelPostsCounterExt++;\n+        }\n+\n+        // Fill channelPostsExtExt with each item value\n+        int channelPostsCounterExtExt = 0;\n+        for (SecondGenerationDxsEntries dxsentriesExtExt : dxsEntriesContainerExtExt.dxsEntries) {\n+            channelPostsExtExt[channelPostsCounterExtExt] = dxsentriesExtExt.getName();\n+            channelPostsCounterExtExt++;\n+        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a23cb96524f25000440822cab4ca9f2b22523662"}, "originalPosition": 256}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI1MjE1MDI2", "url": "https://github.com/openhab/openhab-addons/pull/8574#pullrequestreview-525215026", "createdAt": "2020-11-06T14:41:58Z", "commit": {"oid": "0e4193840d7464142150f71ebfedb6e446022072"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 18, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQxNDo0MTo1OFrOHuwsMA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQxNToxMDoxMVrOHux0Wg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODc5NDI4OA==", "bodyText": "Same for below.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            | operatingStatus           | Number:One             | Current operating status, 0 = Standby, 3 = WO-IDLE                       |          R          |                        \n          \n          \n            \n            | operatingStatus           | Number:Dimensionless             | Current operating status, 0 = Standby, 3 = WO-IDLE                       |          R          |", "url": "https://github.com/openhab/openhab-addons/pull/8574#discussion_r518794288", "createdAt": "2020-11-06T14:41:58Z", "author": {"login": "fwolter"}, "path": "bundles/org.openhab.binding.kostalinverter/README.md", "diffHunk": "@@ -59,6 +65,77 @@ None\n -   l3Voltage\n -   l3Power\n \n+### Second generation devices (PIKO 10-20, PIKO NEW GENERATION)\n+\n+| Channel Type ID           | Item Type                 | Description                                                 |  Read Write  |\n+|-------------------------------|---------------------------|-------------------------------------------------------|-----------------|    \n+| gridOutputPower          | Number:Power         | Current output power to the grid                |         R          |              \n+| yieldDay                      | Number:Energy        | Total produced power today                       |          R          |                \n+| yieldTotal                    | Number:Energy         | Total produced power                           |             R           |                      \n+| operatingStatus           | Number:One             | Current operating status, 0 = Standby, 3 = WO-IDLE                       |          R          |                        ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0e4193840d7464142150f71ebfedb6e446022072"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODc5NTgwNA==", "bodyText": "You could make this Number:Time. Same for below.", "url": "https://github.com/openhab/openhab-addons/pull/8574#discussion_r518795804", "createdAt": "2020-11-06T14:44:22Z", "author": {"login": "fwolter"}, "path": "bundles/org.openhab.binding.kostalinverter/README.md", "diffHunk": "@@ -59,6 +65,77 @@ None\n -   l3Voltage\n -   l3Power\n \n+### Second generation devices (PIKO 10-20, PIKO NEW GENERATION)\n+\n+| Channel Type ID           | Item Type                 | Description                                                 |  Read Write  |\n+|-------------------------------|---------------------------|-------------------------------------------------------|-----------------|    \n+| gridOutputPower          | Number:Power         | Current output power to the grid                |         R          |              \n+| yieldDay                      | Number:Energy        | Total produced power today                       |          R          |                \n+| yieldTotal                    | Number:Energy         | Total produced power                           |             R           |                      \n+| operatingStatus           | Number:One             | Current operating status, 0 = Standby, 3 = WO-IDLE                       |          R          |                        \n+| gridVoltageL1             | Number:ElectricPotential  | Current output voltage to the grid, L1 |    R         |\n+| gridCurrentL1             | Number:ElectricCurrent    | Current output current to the grid, L1  |    R    |\n+| gridPowerL1               | Number:Power              | Current output power to the grid, L1  |    R    |\n+| gridVoltageL2             | Number:ElectricPotential  | Current output voltage to the grid, L2  |    R    |\n+| gridCurrentL2             | Number:ElectricCurrent    | Current output current to the grid, L2  |    R    |\n+| gridPowerL2               | Number:Power              | Current output power to the grid, L2  |    R    |\n+| gridVoltageL3             | Number:ElectricPotential  | Current output voltage to the grid, L3  |    R    |\n+| gridCurrentL3             | Number:ElectricCurrent    | Current output current to the grid, L3  |    R    |\n+| gridPowerL3               | Number:Power              | Current output power to the grid, L3  |    R    |\n+| dcPowerPV                 | Number:Power              | Current power from all solar panels  |    R    |\n+| dc1Voltage                | Number:ElectricPotential  | Current voltage from solar panels, Dc1  |    R    |\n+| dc1Current                | Number:ElectricCurrent    | Current current from solar panels, Dc1  |    R    |\n+| dc1Power                  | Number:Power              | Current power from solar panels, Dc1  |    R    |\n+| dc2Voltage                | Number:ElectricPotential  | Current voltage from solar panels, Dc2  |    R    |\n+| dc2Current                | Number:ElectricCurrent    | Current current from solar panels, Dc2  |    R    |\n+| dc2Power                  | Number:Power              | Current power from solar panels, Dc2  |    R    |\n+| dc3Voltage                | Number:ElectricPotential  | Current voltage from solar panels, Dc3  |    R    |\n+| dc3Current                | Number:ElectricCurrent    | Current current from solar panels, Dc3  |    R    |\n+| dc3Power                  | Number:Power              | Current power from solar panels, Dc3  |    R    |\n+| aktHomeConsumptionSolar   | Number:Power              | Current consumption from solar panels  |    R    |\n+| aktHomeConsumptionBat     | Number:Power              | Current consumption from battery  |    R    |\n+| aktHomeConsumptionGrid    | Number:Power              | Current consumption from grid  |    R    |\n+| phaseSelHomeConsumpL1     | Number:Power              | Current consumption, L1  |    R    |\n+| phaseSelHomeConsumpL2     | Number:Power              | Current consumption, L2  |    R    |\n+| phaseSelHomeConsumpL3     | Number:Power              | Current consumption, L3  |    R    |\n+| gridFreq                  | Number:Frequency          | Current frequency on grid  |    R    |\n+| gridCosPhi                | Number:Angle              | Current power factor on grid  |    R    |\n+| homeConsumptionDay        | Number:Energy             | Total home consumption today  |    R    |\n+| ownConsumptionDay         | Number:Energy             | Total own consumption today  |    R    |\n+| ownConsRateDay            | Number:Dimensionless      | Total own consumption rate today  |    R    |\n+| autonomyDegreeDay         | Number:Dimensionless      | Total autonomy degree day  |    R    |\n+| homeConsumptionTotal      | Number:Energy             | Total home consumption  |    R    |\n+| ownConsumptionTotal       | Number:Energy             | Total own consumption  |    R    |\n+| totalOperatingTime        | Number:Time               | Total operating time  |    R    |\n+| current                   | Number:ElectricCurrent    | Current  |    R    |\n+| currentDir                | Number:ElectricCurrent    | Current dir  |    R    |\n+| chargeCycles              | Number:One                | Total number of charge cycles  |    R    |       \n+| batteryTemperature        | Number:Temperature        | Current battery temperature  |    R    |\n+| loginterval               | Number:Time               | Set value for loginterval  |    R    |\n+| s0InPulseCnt              | String                    | S0-pulse counter  |    R    | \n+| ownConsRateTotal          | Number:Dimensionless      | Total own comsumption rate  |    R    |\n+| autonomyDegreeTotal       | Number:Dimensionless      | Total autonomy degree  |    R    |\n+| batteryVoltage            | Number:ElectricPotential  | Current battery voltage  |    R    |\n+| batStateOfCharge          | Number:Dimensionless      | Current battery charge state  |    R    |\n+| selfConsumption           | Number:Power              | Current self consumption  |    R    |\n+\n+The following Channels are writeable\n+\n+| Channel Type ID           | Item Type                 | Description                                                 |  Read Write  |\n+|-------------------------------|---------------------------|-------------------------------------------------------|-----------------|    \n+| chargeTimeEnd             | String          | Set charge time end, Value = 00:00  |    W    |", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0e4193840d7464142150f71ebfedb6e446022072"}, "originalPosition": 83}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODc5NjQ4OQ==", "bodyText": "If this is percent, you could make it also QuantityType.", "url": "https://github.com/openhab/openhab-addons/pull/8574#discussion_r518796489", "createdAt": "2020-11-06T14:45:23Z", "author": {"login": "fwolter"}, "path": "bundles/org.openhab.binding.kostalinverter/README.md", "diffHunk": "@@ -59,6 +65,77 @@ None\n -   l3Voltage\n -   l3Power\n \n+### Second generation devices (PIKO 10-20, PIKO NEW GENERATION)\n+\n+| Channel Type ID           | Item Type                 | Description                                                 |  Read Write  |\n+|-------------------------------|---------------------------|-------------------------------------------------------|-----------------|    \n+| gridOutputPower          | Number:Power         | Current output power to the grid                |         R          |              \n+| yieldDay                      | Number:Energy        | Total produced power today                       |          R          |                \n+| yieldTotal                    | Number:Energy         | Total produced power                           |             R           |                      \n+| operatingStatus           | Number:One             | Current operating status, 0 = Standby, 3 = WO-IDLE                       |          R          |                        \n+| gridVoltageL1             | Number:ElectricPotential  | Current output voltage to the grid, L1 |    R         |\n+| gridCurrentL1             | Number:ElectricCurrent    | Current output current to the grid, L1  |    R    |\n+| gridPowerL1               | Number:Power              | Current output power to the grid, L1  |    R    |\n+| gridVoltageL2             | Number:ElectricPotential  | Current output voltage to the grid, L2  |    R    |\n+| gridCurrentL2             | Number:ElectricCurrent    | Current output current to the grid, L2  |    R    |\n+| gridPowerL2               | Number:Power              | Current output power to the grid, L2  |    R    |\n+| gridVoltageL3             | Number:ElectricPotential  | Current output voltage to the grid, L3  |    R    |\n+| gridCurrentL3             | Number:ElectricCurrent    | Current output current to the grid, L3  |    R    |\n+| gridPowerL3               | Number:Power              | Current output power to the grid, L3  |    R    |\n+| dcPowerPV                 | Number:Power              | Current power from all solar panels  |    R    |\n+| dc1Voltage                | Number:ElectricPotential  | Current voltage from solar panels, Dc1  |    R    |\n+| dc1Current                | Number:ElectricCurrent    | Current current from solar panels, Dc1  |    R    |\n+| dc1Power                  | Number:Power              | Current power from solar panels, Dc1  |    R    |\n+| dc2Voltage                | Number:ElectricPotential  | Current voltage from solar panels, Dc2  |    R    |\n+| dc2Current                | Number:ElectricCurrent    | Current current from solar panels, Dc2  |    R    |\n+| dc2Power                  | Number:Power              | Current power from solar panels, Dc2  |    R    |\n+| dc3Voltage                | Number:ElectricPotential  | Current voltage from solar panels, Dc3  |    R    |\n+| dc3Current                | Number:ElectricCurrent    | Current current from solar panels, Dc3  |    R    |\n+| dc3Power                  | Number:Power              | Current power from solar panels, Dc3  |    R    |\n+| aktHomeConsumptionSolar   | Number:Power              | Current consumption from solar panels  |    R    |\n+| aktHomeConsumptionBat     | Number:Power              | Current consumption from battery  |    R    |\n+| aktHomeConsumptionGrid    | Number:Power              | Current consumption from grid  |    R    |\n+| phaseSelHomeConsumpL1     | Number:Power              | Current consumption, L1  |    R    |\n+| phaseSelHomeConsumpL2     | Number:Power              | Current consumption, L2  |    R    |\n+| phaseSelHomeConsumpL3     | Number:Power              | Current consumption, L3  |    R    |\n+| gridFreq                  | Number:Frequency          | Current frequency on grid  |    R    |\n+| gridCosPhi                | Number:Angle              | Current power factor on grid  |    R    |\n+| homeConsumptionDay        | Number:Energy             | Total home consumption today  |    R    |\n+| ownConsumptionDay         | Number:Energy             | Total own consumption today  |    R    |\n+| ownConsRateDay            | Number:Dimensionless      | Total own consumption rate today  |    R    |\n+| autonomyDegreeDay         | Number:Dimensionless      | Total autonomy degree day  |    R    |\n+| homeConsumptionTotal      | Number:Energy             | Total home consumption  |    R    |\n+| ownConsumptionTotal       | Number:Energy             | Total own consumption  |    R    |\n+| totalOperatingTime        | Number:Time               | Total operating time  |    R    |\n+| current                   | Number:ElectricCurrent    | Current  |    R    |\n+| currentDir                | Number:ElectricCurrent    | Current dir  |    R    |\n+| chargeCycles              | Number:One                | Total number of charge cycles  |    R    |       \n+| batteryTemperature        | Number:Temperature        | Current battery temperature  |    R    |\n+| loginterval               | Number:Time               | Set value for loginterval  |    R    |\n+| s0InPulseCnt              | String                    | S0-pulse counter  |    R    | \n+| ownConsRateTotal          | Number:Dimensionless      | Total own comsumption rate  |    R    |\n+| autonomyDegreeTotal       | Number:Dimensionless      | Total autonomy degree  |    R    |\n+| batteryVoltage            | Number:ElectricPotential  | Current battery voltage  |    R    |\n+| batStateOfCharge          | Number:Dimensionless      | Current battery charge state  |    R    |\n+| selfConsumption           | Number:Power              | Current self consumption  |    R    |\n+\n+The following Channels are writeable\n+\n+| Channel Type ID           | Item Type                 | Description                                                 |  Read Write  |\n+|-------------------------------|---------------------------|-------------------------------------------------------|-----------------|    \n+| chargeTimeEnd             | String          | Set charge time end, Value = 00:00  |    W    |\n+| batteryType               | String          | Set battery type, Value = 1 = None, Value = 2 = PIKO Battery Li, Value = 3 = BYD B-Box HV  |   W    |\n+| batteryUsageConsumption   | String          | Set battery usage consumption, Value = 100  |    W    |", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0e4193840d7464142150f71ebfedb6e446022072"}, "originalPosition": 85}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODc5NzAzNQ==", "bodyText": "What's the purpose of the second Channel?", "url": "https://github.com/openhab/openhab-addons/pull/8574#discussion_r518797035", "createdAt": "2020-11-06T14:46:15Z", "author": {"login": "fwolter"}, "path": "bundles/org.openhab.binding.kostalinverter/README.md", "diffHunk": "@@ -59,6 +65,77 @@ None\n -   l3Voltage\n -   l3Power\n \n+### Second generation devices (PIKO 10-20, PIKO NEW GENERATION)\n+\n+| Channel Type ID           | Item Type                 | Description                                                 |  Read Write  |\n+|-------------------------------|---------------------------|-------------------------------------------------------|-----------------|    \n+| gridOutputPower          | Number:Power         | Current output power to the grid                |         R          |              \n+| yieldDay                      | Number:Energy        | Total produced power today                       |          R          |                \n+| yieldTotal                    | Number:Energy         | Total produced power                           |             R           |                      \n+| operatingStatus           | Number:One             | Current operating status, 0 = Standby, 3 = WO-IDLE                       |          R          |                        \n+| gridVoltageL1             | Number:ElectricPotential  | Current output voltage to the grid, L1 |    R         |\n+| gridCurrentL1             | Number:ElectricCurrent    | Current output current to the grid, L1  |    R    |\n+| gridPowerL1               | Number:Power              | Current output power to the grid, L1  |    R    |\n+| gridVoltageL2             | Number:ElectricPotential  | Current output voltage to the grid, L2  |    R    |\n+| gridCurrentL2             | Number:ElectricCurrent    | Current output current to the grid, L2  |    R    |\n+| gridPowerL2               | Number:Power              | Current output power to the grid, L2  |    R    |\n+| gridVoltageL3             | Number:ElectricPotential  | Current output voltage to the grid, L3  |    R    |\n+| gridCurrentL3             | Number:ElectricCurrent    | Current output current to the grid, L3  |    R    |\n+| gridPowerL3               | Number:Power              | Current output power to the grid, L3  |    R    |\n+| dcPowerPV                 | Number:Power              | Current power from all solar panels  |    R    |\n+| dc1Voltage                | Number:ElectricPotential  | Current voltage from solar panels, Dc1  |    R    |\n+| dc1Current                | Number:ElectricCurrent    | Current current from solar panels, Dc1  |    R    |\n+| dc1Power                  | Number:Power              | Current power from solar panels, Dc1  |    R    |\n+| dc2Voltage                | Number:ElectricPotential  | Current voltage from solar panels, Dc2  |    R    |\n+| dc2Current                | Number:ElectricCurrent    | Current current from solar panels, Dc2  |    R    |\n+| dc2Power                  | Number:Power              | Current power from solar panels, Dc2  |    R    |\n+| dc3Voltage                | Number:ElectricPotential  | Current voltage from solar panels, Dc3  |    R    |\n+| dc3Current                | Number:ElectricCurrent    | Current current from solar panels, Dc3  |    R    |\n+| dc3Power                  | Number:Power              | Current power from solar panels, Dc3  |    R    |\n+| aktHomeConsumptionSolar   | Number:Power              | Current consumption from solar panels  |    R    |\n+| aktHomeConsumptionBat     | Number:Power              | Current consumption from battery  |    R    |\n+| aktHomeConsumptionGrid    | Number:Power              | Current consumption from grid  |    R    |\n+| phaseSelHomeConsumpL1     | Number:Power              | Current consumption, L1  |    R    |\n+| phaseSelHomeConsumpL2     | Number:Power              | Current consumption, L2  |    R    |\n+| phaseSelHomeConsumpL3     | Number:Power              | Current consumption, L3  |    R    |\n+| gridFreq                  | Number:Frequency          | Current frequency on grid  |    R    |\n+| gridCosPhi                | Number:Angle              | Current power factor on grid  |    R    |\n+| homeConsumptionDay        | Number:Energy             | Total home consumption today  |    R    |\n+| ownConsumptionDay         | Number:Energy             | Total own consumption today  |    R    |\n+| ownConsRateDay            | Number:Dimensionless      | Total own consumption rate today  |    R    |\n+| autonomyDegreeDay         | Number:Dimensionless      | Total autonomy degree day  |    R    |\n+| homeConsumptionTotal      | Number:Energy             | Total home consumption  |    R    |\n+| ownConsumptionTotal       | Number:Energy             | Total own consumption  |    R    |\n+| totalOperatingTime        | Number:Time               | Total operating time  |    R    |\n+| current                   | Number:ElectricCurrent    | Current  |    R    |\n+| currentDir                | Number:ElectricCurrent    | Current dir  |    R    |\n+| chargeCycles              | Number:One                | Total number of charge cycles  |    R    |       \n+| batteryTemperature        | Number:Temperature        | Current battery temperature  |    R    |\n+| loginterval               | Number:Time               | Set value for loginterval  |    R    |\n+| s0InPulseCnt              | String                    | S0-pulse counter  |    R    | \n+| ownConsRateTotal          | Number:Dimensionless      | Total own comsumption rate  |    R    |\n+| autonomyDegreeTotal       | Number:Dimensionless      | Total autonomy degree  |    R    |\n+| batteryVoltage            | Number:ElectricPotential  | Current battery voltage  |    R    |\n+| batStateOfCharge          | Number:Dimensionless      | Current battery charge state  |    R    |\n+| selfConsumption           | Number:Power              | Current self consumption  |    R    |\n+\n+The following Channels are writeable\n+\n+| Channel Type ID           | Item Type                 | Description                                                 |  Read Write  |\n+|-------------------------------|---------------------------|-------------------------------------------------------|-----------------|    \n+| chargeTimeEnd             | String          | Set charge time end, Value = 00:00  |    W    |\n+| batteryType               | String          | Set battery type, Value = 1 = None, Value = 2 = PIKO Battery Li, Value = 3 = BYD B-Box HV  |   W    |\n+| batteryUsageConsumption   | String          | Set battery usage consumption, Value = 100  |    W    |\n+| batteryUsageStrategy      | String          | Set battery usage strategy, Value = 1 = Automatic, Value = 2 = Automatic economical  |    W    |             \n+| smartBatteryControl       | Switch          | Set smart battery control, Value = False / True  |    W    |\n+| smartBatteryControlText   | String          | Set smart battery control text, Value = False / True  |    W    |", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0e4193840d7464142150f71ebfedb6e446022072"}, "originalPosition": 88}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODc5ODkwNg==", "bodyText": "The parameter name is a bit misleading. You could make it hostname to make it clearer.", "url": "https://github.com/openhab/openhab-addons/pull/8574#discussion_r518798906", "createdAt": "2020-11-06T14:49:10Z", "author": {"login": "fwolter"}, "path": "bundles/org.openhab.binding.kostalinverter/README.md", "diffHunk": "@@ -148,6 +225,27 @@ If the thing goes online then the connection to the web interface is successful.\n In case it is offline you should see an error message.\n You optionally can define a `userName` and a `password` parameter if the access to the webinterface is protected and a desired `refreshInterval` (the time interval between updates, default 60 seconds).\n \n+\n+### Second generation devices (PIKO 10-20, PIKO NEW GENERATION)\n+\n+Second generation inverters require 4 mandatory parameters:\n+\n+| Parameter                | Description                                            | Type    |  Unit   | Default value | Example value |\n+|--------------------------|--------------------------------------------------------|---------|---------|---------------|---------------|\n+| url                      | Host name or IP address of your device                 | Text    | ---     | ---           | 192.168.0.2   |", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0e4193840d7464142150f71ebfedb6e446022072"}, "originalPosition": 110}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODgwMDg4NQ==", "bodyText": "Can you specify the encoding you expect? E.g. StandardCharsets.UTF_8", "url": "https://github.com/openhab/openhab-addons/pull/8574#discussion_r518800885", "createdAt": "2020-11-06T14:52:07Z", "author": {"login": "fwolter"}, "path": "bundles/org.openhab.binding.kostalinverter/src/main/java/org/openhab/binding/internal/kostal/inverter/secondgeneration/SecondGenerationConfigurationHandler.java", "diffHunk": "@@ -0,0 +1,147 @@\n+/**\n+ * Copyright (c) 2010-2020 Contributors to the openHAB project\n+ *\n+ * See the NOTICE file(s) distributed with this work for additional\n+ * information.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+\n+package org.openhab.binding.internal.kostal.inverter.secondgeneration;\n+\n+import java.nio.charset.StandardCharsets;\n+import java.security.MessageDigest;\n+import java.security.NoSuchAlgorithmException;\n+import java.util.Base64;\n+import java.util.concurrent.ExecutionException;\n+import java.util.concurrent.TimeoutException;\n+\n+import org.eclipse.jdt.annotation.NonNullByDefault;\n+import org.eclipse.jetty.client.HttpClient;\n+import org.eclipse.jetty.client.api.ContentResponse;\n+import org.eclipse.jetty.client.api.Request;\n+import org.eclipse.jetty.client.util.StringContentProvider;\n+import org.eclipse.jetty.http.HttpHeader;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import com.google.gson.JsonArray;\n+import com.google.gson.JsonIOException;\n+import com.google.gson.JsonObject;\n+import com.google.gson.JsonParser;\n+\n+/**\n+ * The {@link SecondGenerationConfigurationHandler} is responsible for configuration changes,\n+ * regarded to second generation part of the binding.\n+ *\n+ * @author \u00d6rjan Backsell - Initial contribution Piko1020, Piko New Generation\n+ */\n+@NonNullByDefault\n+public class SecondGenerationConfigurationHandler {\n+\n+    public static void executeConfigurationChanges(HttpClient httpClient, String url, String username, String password,\n+            String dxsId, String value)\n+            throws InterruptedException, ExecutionException, TimeoutException, NoSuchAlgorithmException {\n+        String urlLogin = url + \"/api/login.json?\";\n+        String salt = \"\";\n+        String sessionId = \"\";\n+\n+        Logger logger = LoggerFactory.getLogger(SecondGenerationConfigurationHandler.class);\n+\n+        String getAuthenticateResponse = httpClient.GET(urlLogin).getContentAsString();\n+\n+        try {\n+            JsonObject getAuthenticateResponseJsonObject = (JsonObject) new JsonParser()\n+                    .parse(transformJsonResponse(getAuthenticateResponse));\n+\n+            sessionId = extractSessionId(getAuthenticateResponseJsonObject);\n+\n+            JsonObject authenticateJsonObject = new JsonParser().parse(getAuthenticateResponse.toString())\n+                    .getAsJsonObject();\n+            salt = authenticateJsonObject.get(\"salt\").getAsString();\n+\n+            String saltedPassword = new StringBuilder(password).append(salt).toString();\n+            MessageDigest mDigest = MessageDigest.getInstance(\"SHA1\");\n+\n+            byte[] mDigestedPassword = mDigest.digest(saltedPassword.getBytes(StandardCharsets.UTF_8));\n+            StringBuilder loginPostStringBuilder = new StringBuilder();\n+            for (int i = 0; i < mDigestedPassword.length; i++) {\n+                loginPostStringBuilder.append(Integer.toString((mDigestedPassword[i] & 0xff) + 0x100, 16).substring(1));\n+            }\n+            String saltedmDigestedPwd = Base64.getEncoder().encodeToString(mDigest.digest(saltedPassword.getBytes()));\n+\n+            String loginPostJsonData = \"{\\\"mode\\\":1,\\\"userId\\\":\\\"\" + username + \"\\\",\\\"pwh\\\":\\\"\" + saltedmDigestedPwd\n+                    + \"\\\"}\";\n+\n+            Request loginPostJsonResponse = httpClient.POST(urlLogin + \"?sessionId=\" + sessionId);\n+            loginPostJsonResponse.header(HttpHeader.CONTENT_TYPE, \"application/json\");\n+            loginPostJsonResponse.content(new StringContentProvider(loginPostJsonData));\n+            ContentResponse loginPostJsonDataContentResponse = loginPostJsonResponse.send();\n+\n+            String loginPostResponse = new String(loginPostJsonDataContentResponse.getContent());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0e4193840d7464142150f71ebfedb6e446022072"}, "originalPosition": 85}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODgwMTYwNg==", "bodyText": "InterruptedException and ExecutionException are never thrown here.", "url": "https://github.com/openhab/openhab-addons/pull/8574#discussion_r518801606", "createdAt": "2020-11-06T14:53:10Z", "author": {"login": "fwolter"}, "path": "bundles/org.openhab.binding.kostalinverter/src/main/java/org/openhab/binding/internal/kostal/inverter/secondgeneration/SecondGenerationConfigurationHandler.java", "diffHunk": "@@ -0,0 +1,147 @@\n+/**\n+ * Copyright (c) 2010-2020 Contributors to the openHAB project\n+ *\n+ * See the NOTICE file(s) distributed with this work for additional\n+ * information.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+\n+package org.openhab.binding.internal.kostal.inverter.secondgeneration;\n+\n+import java.nio.charset.StandardCharsets;\n+import java.security.MessageDigest;\n+import java.security.NoSuchAlgorithmException;\n+import java.util.Base64;\n+import java.util.concurrent.ExecutionException;\n+import java.util.concurrent.TimeoutException;\n+\n+import org.eclipse.jdt.annotation.NonNullByDefault;\n+import org.eclipse.jetty.client.HttpClient;\n+import org.eclipse.jetty.client.api.ContentResponse;\n+import org.eclipse.jetty.client.api.Request;\n+import org.eclipse.jetty.client.util.StringContentProvider;\n+import org.eclipse.jetty.http.HttpHeader;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import com.google.gson.JsonArray;\n+import com.google.gson.JsonIOException;\n+import com.google.gson.JsonObject;\n+import com.google.gson.JsonParser;\n+\n+/**\n+ * The {@link SecondGenerationConfigurationHandler} is responsible for configuration changes,\n+ * regarded to second generation part of the binding.\n+ *\n+ * @author \u00d6rjan Backsell - Initial contribution Piko1020, Piko New Generation\n+ */\n+@NonNullByDefault\n+public class SecondGenerationConfigurationHandler {\n+\n+    public static void executeConfigurationChanges(HttpClient httpClient, String url, String username, String password,\n+            String dxsId, String value)\n+            throws InterruptedException, ExecutionException, TimeoutException, NoSuchAlgorithmException {\n+        String urlLogin = url + \"/api/login.json?\";\n+        String salt = \"\";\n+        String sessionId = \"\";\n+\n+        Logger logger = LoggerFactory.getLogger(SecondGenerationConfigurationHandler.class);\n+\n+        String getAuthenticateResponse = httpClient.GET(urlLogin).getContentAsString();\n+\n+        try {\n+            JsonObject getAuthenticateResponseJsonObject = (JsonObject) new JsonParser()\n+                    .parse(transformJsonResponse(getAuthenticateResponse));\n+\n+            sessionId = extractSessionId(getAuthenticateResponseJsonObject);\n+\n+            JsonObject authenticateJsonObject = new JsonParser().parse(getAuthenticateResponse.toString())\n+                    .getAsJsonObject();\n+            salt = authenticateJsonObject.get(\"salt\").getAsString();\n+\n+            String saltedPassword = new StringBuilder(password).append(salt).toString();\n+            MessageDigest mDigest = MessageDigest.getInstance(\"SHA1\");\n+\n+            byte[] mDigestedPassword = mDigest.digest(saltedPassword.getBytes(StandardCharsets.UTF_8));\n+            StringBuilder loginPostStringBuilder = new StringBuilder();\n+            for (int i = 0; i < mDigestedPassword.length; i++) {\n+                loginPostStringBuilder.append(Integer.toString((mDigestedPassword[i] & 0xff) + 0x100, 16).substring(1));\n+            }\n+            String saltedmDigestedPwd = Base64.getEncoder().encodeToString(mDigest.digest(saltedPassword.getBytes()));\n+\n+            String loginPostJsonData = \"{\\\"mode\\\":1,\\\"userId\\\":\\\"\" + username + \"\\\",\\\"pwh\\\":\\\"\" + saltedmDigestedPwd\n+                    + \"\\\"}\";\n+\n+            Request loginPostJsonResponse = httpClient.POST(urlLogin + \"?sessionId=\" + sessionId);\n+            loginPostJsonResponse.header(HttpHeader.CONTENT_TYPE, \"application/json\");\n+            loginPostJsonResponse.content(new StringContentProvider(loginPostJsonData));\n+            ContentResponse loginPostJsonDataContentResponse = loginPostJsonResponse.send();\n+\n+            String loginPostResponse = new String(loginPostJsonDataContentResponse.getContent());\n+\n+            JsonObject loginPostJsonObject = (JsonObject) new JsonParser()\n+                    .parse(transformJsonResponse(loginPostResponse));\n+\n+            sessionId = extractSessionId(loginPostJsonObject);\n+\n+            // Part to sending data to Inverter\n+            String postJsonData = \"\";\n+\n+            if (dxsId.contentEquals(\"16777984\")) {\n+                // Works with inverterName, name will be changed, due to \"\" around value\n+                postJsonData = \"{\\\"dxsEntries\\\":[{\\\"dxsId\\\":\" + dxsId + \",\\\"value\\\":\\\"\" + value + \"\\\"}]}\";\n+            } else {\n+                // Works not with inverterName, name will not be changed, due to \"\" around value, but the other\n+                // configuration options will be changed.\n+                postJsonData = \"{\\\"dxsEntries\\\":[{\\\"dxsId\\\":\" + dxsId + \",\\\"value\\\":\" + value + \"}]}\";\n+            }\n+\n+            Request postJsonDataRequest = httpClient.POST(url + \"/api/dxs.json?sessionId=\" + sessionId);\n+            postJsonDataRequest.header(HttpHeader.CONTENT_TYPE, \"application/json\");\n+            postJsonDataRequest.content(new StringContentProvider(postJsonData));\n+\n+            ContentResponse postJsonDataContentResponse = postJsonDataRequest.send();\n+            String postResponse = new String(postJsonDataContentResponse.getContent());\n+\n+            JsonObject postJsonObject = (JsonObject) new JsonParser().parse(transformJsonResponse(postResponse));\n+            sessionId = extractSessionId(postJsonObject);\n+        } catch (JsonIOException getAuthenticateResponseException) {\n+            logger.debug(\"Could not read the response: {}\", getAuthenticateResponseException.getMessage());\n+        }\n+    }\n+\n+    static String transformJsonResponse(String jsonResponse) {\n+        // Method transformJsonResponse converts response,due to missing [] in JSON getAuthenticateResponse.\n+\n+        int sessionStartPosition = jsonResponse.indexOf(\"session\");\n+        StringBuilder transformStringBuilder = new StringBuilder();\n+\n+        transformStringBuilder.append(jsonResponse);\n+\n+        transformStringBuilder.insert(sessionStartPosition + 9, '[');\n+        int codeStartPosition = jsonResponse.indexOf(\"roleId\");\n+        transformStringBuilder.insert(codeStartPosition + 11, ']');\n+\n+        String transformJsonObject = transformStringBuilder.toString();\n+\n+        return transformJsonObject;\n+    }\n+\n+    static String extractSessionId(JsonObject extractJsonObject)\n+            throws InterruptedException, ExecutionException, TimeoutException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0e4193840d7464142150f71ebfedb6e446022072"}, "originalPosition": 136}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODgwMjY3NA==", "bodyText": "As getConfigAs() is an expensive operation, it's better to call it once in initialize().", "url": "https://github.com/openhab/openhab-addons/pull/8574#discussion_r518802674", "createdAt": "2020-11-06T14:54:45Z", "author": {"login": "fwolter"}, "path": "bundles/org.openhab.binding.kostalinverter/src/main/java/org/openhab/binding/internal/kostal/inverter/secondgeneration/SecondGenerationHandler.java", "diffHunk": "@@ -0,0 +1,303 @@\n+/**\n+ * Copyright (c) 2010-2020 Contributors to the openHAB project\n+ *\n+ * See the NOTICE file(s) distributed with this work for additional\n+ * information.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+\n+package org.openhab.binding.internal.kostal.inverter.secondgeneration;\n+\n+import java.math.BigDecimal;\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.concurrent.ExecutionException;\n+import java.util.concurrent.ScheduledFuture;\n+import java.util.concurrent.TimeUnit;\n+import java.util.concurrent.TimeoutException;\n+\n+import javax.measure.Unit;\n+\n+import org.eclipse.jdt.annotation.NonNullByDefault;\n+import org.eclipse.jdt.annotation.Nullable;\n+import org.eclipse.jetty.client.HttpClient;\n+import org.openhab.core.library.types.OnOffType;\n+import org.openhab.core.library.types.QuantityType;\n+import org.openhab.core.library.types.StringType;\n+import org.openhab.core.thing.Channel;\n+import org.openhab.core.thing.ChannelUID;\n+import org.openhab.core.thing.Thing;\n+import org.openhab.core.thing.ThingStatus;\n+import org.openhab.core.thing.ThingStatusDetail;\n+import org.openhab.core.thing.binding.BaseThingHandler;\n+import org.openhab.core.types.Command;\n+import org.openhab.core.types.State;\n+import org.openhab.core.types.UnDefType;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import com.google.gson.Gson;\n+import com.google.gson.GsonBuilder;\n+\n+/**\n+ * The {@link SecondGenerationHandler} is responsible for handling commands, which are\n+ * sent to one of the channels, and initiation and refreshing regarded to second generation part of the binding.\n+ *\n+ *\n+ * @author Christian Schneider - Initial contribution\n+ * @author Christoph Weitkamp - Incorporated new QuantityType (Units of Measurement)\n+ * @author \u00d6rjan Backsell - Redesigned regarding Piko1020, Piko New Generation\n+ */\n+@NonNullByDefault\n+public class SecondGenerationHandler extends BaseThingHandler {\n+\n+    private final Logger logger = LoggerFactory.getLogger(SecondGenerationHandler.class);\n+\n+    private @Nullable ScheduledFuture<?> secondGenerationPoller;\n+\n+    private final HttpClient httpClient;\n+\n+    private List<SecondGenerationChannelConfiguration> channelConfigs = new ArrayList<>();\n+    private List<SecondGenerationChannelConfiguration> channelConfigsExt = new ArrayList<>();\n+    private List<SecondGenerationChannelConfiguration> channelConfigsExtExt = new ArrayList<>();\n+\n+    public SecondGenerationHandler(Thing thing, HttpClient httpClient) {\n+        super(thing);\n+        this.httpClient = httpClient;\n+    }\n+\n+    @Override\n+    public void handleCommand(ChannelUID channelUID, Command command) {\n+        final @Nullable SecondGenerationBindingConstants handleCommandConfig;\n+        handleCommandConfig = getConfigAs(SecondGenerationBindingConstants.class);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0e4193840d7464142150f71ebfedb6e446022072"}, "originalPosition": 77}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODgwNDE4MQ==", "bodyText": "Classes used with getConfigAs() should only contain the fields existing in the XML file. You could move these fields to a dedicated class.", "url": "https://github.com/openhab/openhab-addons/pull/8574#discussion_r518804181", "createdAt": "2020-11-06T14:57:04Z", "author": {"login": "fwolter"}, "path": "bundles/org.openhab.binding.kostalinverter/src/main/java/org/openhab/binding/internal/kostal/inverter/secondgeneration/SecondGenerationBindingConstants.java", "diffHunk": "@@ -0,0 +1,108 @@\n+/**\n+ * Copyright (c) 2010-2020 Contributors to the openHAB project\n+ *\n+ * See the NOTICE file(s) distributed with this work for additional\n+ * information.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+\n+package org.openhab.binding.internal.kostal.inverter.secondgeneration;\n+\n+import org.eclipse.jdt.annotation.NonNullByDefault;\n+import org.openhab.core.thing.ThingTypeUID;\n+\n+/**\n+ * The {@link SecondGenerationBindingConstants} class defines channel constants, which are\n+ * used in the second generation part of the binding.\n+ *\n+ * @author \u00d6rjan Backsell - Initial contribution Piko1020, Piko New Generation\n+ */\n+\n+@NonNullByDefault\n+public class SecondGenerationBindingConstants {\n+\n+    private static final String BINDING_ID = \"kostalinverter\";\n+\n+    public static final long REFRESHINTERVAL_SEC = 60;\n+\n+    public String url = \"\";\n+    public String username = \"\";\n+    public String password = \"\";\n+    public String dxsIdConf = \"\";\n+    public String valueConf = \"\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0e4193840d7464142150f71ebfedb6e446022072"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODgwNTA5OQ==", "bodyText": "Can you comment on this?", "url": "https://github.com/openhab/openhab-addons/pull/8574#discussion_r518805099", "createdAt": "2020-11-06T14:58:29Z", "author": {"login": "fwolter"}, "path": "bundles/org.openhab.binding.kostalinverter/src/main/java/org/openhab/binding/internal/kostal/inverter/secondgeneration/SecondGenerationHandler.java", "diffHunk": "@@ -0,0 +1,354 @@\n+/**\n+ * Copyright (c) 2010-2020 Contributors to the openHAB project\n+ *\n+ * See the NOTICE file(s) distributed with this work for additional\n+ * information.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+\n+package org.openhab.binding.internal.kostal.inverter.secondgeneration;\n+\n+import java.io.BufferedReader;\n+import java.io.IOException;\n+import java.io.InputStreamReader;\n+import java.math.BigDecimal;\n+import java.net.URL;\n+import java.net.URLConnection;\n+import java.nio.charset.Charset;\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.concurrent.TimeUnit;\n+\n+import javax.measure.Unit;\n+\n+import org.eclipse.jdt.annotation.NonNullByDefault;\n+import org.eclipse.jdt.annotation.Nullable;\n+import org.eclipse.jetty.client.HttpClient;\n+import org.openhab.core.library.types.OnOffType;\n+import org.openhab.core.library.types.QuantityType;\n+import org.openhab.core.library.types.StringType;\n+import org.openhab.core.thing.Channel;\n+import org.openhab.core.thing.ChannelUID;\n+import org.openhab.core.thing.Thing;\n+import org.openhab.core.thing.ThingStatus;\n+import org.openhab.core.thing.ThingStatusDetail;\n+import org.openhab.core.thing.binding.BaseThingHandler;\n+import org.openhab.core.types.Command;\n+import org.openhab.core.types.RefreshType;\n+import org.openhab.core.types.State;\n+import org.openhab.core.types.UnDefType;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import com.google.gson.Gson;\n+import com.google.gson.GsonBuilder;\n+\n+/**\n+ * The {@link SecondGenerationHandler} is responsible for handling commands, which are\n+ * sent to one of the channels, and initiation and refreshing regarded to second generation part of the binding.\n+ *\n+ *\n+ * @author Christian Schneider - Initial contribution\n+ * @author Christoph Weitkamp - Incorporated new QuantityType (Units of Measurement)\n+ * @author \u00d6rjan Backsell - Redesigned regarding Piko1020, Piko New Generation\n+ */\n+\n+@NonNullByDefault\n+public class SecondGenerationHandler extends BaseThingHandler {\n+\n+    private final Logger logger = LoggerFactory.getLogger(SecondGenerationHandler.class);\n+\n+    private final HttpClient httpClient;\n+\n+    private List<SecondGenerationChannelConfiguration> channelConfigs = new ArrayList<>();\n+    private List<SecondGenerationChannelConfiguration> channelConfigsExt = new ArrayList<>();\n+    private List<SecondGenerationChannelConfiguration> channelConfigsExtExt = new ArrayList<>();\n+\n+    public SecondGenerationHandler(Thing thing, HttpClient httpClient) {\n+        super(thing);\n+        this.httpClient = httpClient;\n+    }\n+\n+    @Override\n+    public void handleCommand(ChannelUID channelUID, Command command) {\n+\n+        if (command instanceof RefreshType) {\n+            logger.debug(\"Handle command for {} on channel {}: {}\", thing.getUID(), channelUID, command);\n+        }\n+\n+        if (command == RefreshType.REFRESH) {\n+            return;\n+        }\n+\n+        final @Nullable SecondGenerationConfiguration handleCommandConfig;\n+        handleCommandConfig = getConfigAs(SecondGenerationConfiguration.class);\n+\n+        String url = handleCommandConfig.url.toString();\n+        String username = handleCommandConfig.username;\n+        String password = handleCommandConfig.password;\n+        String valueConfiguration = \"\";\n+        String dxsEntriesConf = \"\";\n+\n+        switch (channelUID.getId()) {\n+            case SecondGenerationBindingConstants.CHANNEL_CHARGETIMEEND:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556236\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_BATTERYTYPE:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556252\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_BATTERYUSAGECONSUMPTION:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556249\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_BATTERYUSAGESTRATEGY:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"83888896\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_SMARTBATTERYCONTROL:\n+                valueConfiguration = \"\";\n+                if (command == OnOffType.ON) {\n+                    valueConfiguration = \"True\";\n+                }\n+                if (command == OnOffType.OFF) {\n+                    valueConfiguration = \"False\";\n+                }\n+                dxsEntriesConf = \"33556484\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_SMARTBATTERYCONTROL_TEXT:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556484\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_BATTERYCHARGETIMEFROM:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556239\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_BATTERYCHARGETIMETO:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556240\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_MAXDEPTHOFDISCHARGE:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556247\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_SHADOWMANAGEMENT:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556483\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_EXTERNALMODULECONTROL:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556482\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_INVERTERNAME:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"16777984\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+        }\n+    }\n+\n+    @Override\n+    public void initialize() {\n+        channelConfigs = SecondGenerationChannelConfiguration.getChannelConfiguration();\n+        channelConfigsExt = SecondGenerationChannelConfiguration.getChannelConfigurationExt();\n+        channelConfigsExtExt = SecondGenerationChannelConfiguration.getChannelConfigurationExtExt();\n+\n+        updateStatus(ThingStatus.UNKNOWN);\n+\n+        scheduler.scheduleWithFixedDelay(() -> {\n+            try {\n+                updateStatus(ThingStatus.ONLINE);\n+                refresh();\n+            } catch (RuntimeException scheduleWithFixedDelayException) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTA2NDQ1OQ=="}, "originalCommit": {"oid": "b246c14fc937cf5a260588d0d6505c65433607e2"}, "originalPosition": 191}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODgwNTQ5OQ==", "bodyText": "No harm in canceling a task that is already cancelled.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    if (secondGenerationLocalPoller != null && !secondGenerationLocalPoller.isCancelled()) {\n          \n          \n            \n                    if (secondGenerationLocalPoller != null) {", "url": "https://github.com/openhab/openhab-addons/pull/8574#discussion_r518805499", "createdAt": "2020-11-06T14:59:05Z", "author": {"login": "fwolter"}, "path": "bundles/org.openhab.binding.kostalinverter/src/main/java/org/openhab/binding/internal/kostal/inverter/secondgeneration/SecondGenerationHandler.java", "diffHunk": "@@ -0,0 +1,303 @@\n+/**\n+ * Copyright (c) 2010-2020 Contributors to the openHAB project\n+ *\n+ * See the NOTICE file(s) distributed with this work for additional\n+ * information.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+\n+package org.openhab.binding.internal.kostal.inverter.secondgeneration;\n+\n+import java.math.BigDecimal;\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.concurrent.ExecutionException;\n+import java.util.concurrent.ScheduledFuture;\n+import java.util.concurrent.TimeUnit;\n+import java.util.concurrent.TimeoutException;\n+\n+import javax.measure.Unit;\n+\n+import org.eclipse.jdt.annotation.NonNullByDefault;\n+import org.eclipse.jdt.annotation.Nullable;\n+import org.eclipse.jetty.client.HttpClient;\n+import org.openhab.core.library.types.OnOffType;\n+import org.openhab.core.library.types.QuantityType;\n+import org.openhab.core.library.types.StringType;\n+import org.openhab.core.thing.Channel;\n+import org.openhab.core.thing.ChannelUID;\n+import org.openhab.core.thing.Thing;\n+import org.openhab.core.thing.ThingStatus;\n+import org.openhab.core.thing.ThingStatusDetail;\n+import org.openhab.core.thing.binding.BaseThingHandler;\n+import org.openhab.core.types.Command;\n+import org.openhab.core.types.State;\n+import org.openhab.core.types.UnDefType;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import com.google.gson.Gson;\n+import com.google.gson.GsonBuilder;\n+\n+/**\n+ * The {@link SecondGenerationHandler} is responsible for handling commands, which are\n+ * sent to one of the channels, and initiation and refreshing regarded to second generation part of the binding.\n+ *\n+ *\n+ * @author Christian Schneider - Initial contribution\n+ * @author Christoph Weitkamp - Incorporated new QuantityType (Units of Measurement)\n+ * @author \u00d6rjan Backsell - Redesigned regarding Piko1020, Piko New Generation\n+ */\n+@NonNullByDefault\n+public class SecondGenerationHandler extends BaseThingHandler {\n+\n+    private final Logger logger = LoggerFactory.getLogger(SecondGenerationHandler.class);\n+\n+    private @Nullable ScheduledFuture<?> secondGenerationPoller;\n+\n+    private final HttpClient httpClient;\n+\n+    private List<SecondGenerationChannelConfiguration> channelConfigs = new ArrayList<>();\n+    private List<SecondGenerationChannelConfiguration> channelConfigsExt = new ArrayList<>();\n+    private List<SecondGenerationChannelConfiguration> channelConfigsExtExt = new ArrayList<>();\n+\n+    public SecondGenerationHandler(Thing thing, HttpClient httpClient) {\n+        super(thing);\n+        this.httpClient = httpClient;\n+    }\n+\n+    @Override\n+    public void handleCommand(ChannelUID channelUID, Command command) {\n+        final @Nullable SecondGenerationBindingConstants handleCommandConfig;\n+        handleCommandConfig = getConfigAs(SecondGenerationBindingConstants.class);\n+\n+        String url = handleCommandConfig.url.toString();\n+        String username = handleCommandConfig.username;\n+        String password = handleCommandConfig.password;\n+        String valueConfiguration = \"\";\n+        String dxsEntriesConf = \"\";\n+\n+        switch (channelUID.getId()) {\n+            case SecondGenerationBindingConstants.CHANNEL_CHARGETIMEEND:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556236\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_BATTERYTYPE:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556252\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_BATTERYUSAGECONSUMPTION:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556249\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_BATTERYUSAGESTRATEGY:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"83888896\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_SMARTBATTERYCONTROL:\n+                valueConfiguration = \"\";\n+                if (command == OnOffType.ON) {\n+                    valueConfiguration = \"True\";\n+                }\n+                if (command == OnOffType.OFF) {\n+                    valueConfiguration = \"False\";\n+                }\n+                dxsEntriesConf = \"33556484\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_SMARTBATTERYCONTROL_TEXT:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556484\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_BATTERYCHARGETIMEFROM:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556239\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_BATTERYCHARGETIMETO:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556240\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_MAXDEPTHOFDISCHARGE:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556247\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_SHADOWMANAGEMENT:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556483\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_EXTERNALMODULECONTROL:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556482\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_INVERTERNAME:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"16777984\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+        }\n+    }\n+\n+    @Override\n+    public void initialize() {\n+        channelConfigs = SecondGenerationChannelConfiguration.getChannelConfiguration();\n+        channelConfigsExt = SecondGenerationChannelConfiguration.getChannelConfigurationExt();\n+        channelConfigsExtExt = SecondGenerationChannelConfiguration.getChannelConfigurationExtExt();\n+\n+        updateStatus(ThingStatus.UNKNOWN);\n+\n+        secondGenerationPoller = scheduler.scheduleWithFixedDelay(() -> {\n+\n+            try {\n+                refresh();\n+                updateStatus(ThingStatus.ONLINE);\n+            } catch (RuntimeException scheduleWithFixedDelayException) {\n+                updateStatus(ThingStatus.OFFLINE, ThingStatusDetail.COMMUNICATION_ERROR,\n+                        scheduleWithFixedDelayException.getClass().getName() + \":\"\n+                                + scheduleWithFixedDelayException.getMessage());\n+                logger.debug(\"Error when connecting to inverter, {}: {}\", getThing().getUID(),\n+                        scheduleWithFixedDelayException.getMessage());\n+            } catch (InterruptedException e) {\n+                logger.debug(\"Communication with inverter interrupted, exception {}\", e.getMessage());\n+            } catch (ExecutionException e) {\n+                logger.debug(\"Communication with inverter failed, exception {}\", e.getMessage());\n+            } catch (TimeoutException e) {\n+                logger.debug(\"Communication with inverter timed out, exception {}\", e.getMessage());\n+            }\n+        }, 0, SecondGenerationBindingConstants.REFRESHINTERVAL_SEC, TimeUnit.SECONDS);\n+    }\n+\n+    @Override\n+    public void dispose() {\n+        final ScheduledFuture<?> secondGenerationLocalPoller = secondGenerationPoller;\n+\n+        if (secondGenerationLocalPoller != null && !secondGenerationLocalPoller.isCancelled()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0e4193840d7464142150f71ebfedb6e446022072"}, "originalPosition": 200}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODgwNjU3MA==", "bodyText": "See above. Call in initialize().", "url": "https://github.com/openhab/openhab-addons/pull/8574#discussion_r518806570", "createdAt": "2020-11-06T15:00:39Z", "author": {"login": "fwolter"}, "path": "bundles/org.openhab.binding.kostalinverter/src/main/java/org/openhab/binding/internal/kostal/inverter/secondgeneration/SecondGenerationHandler.java", "diffHunk": "@@ -0,0 +1,303 @@\n+/**\n+ * Copyright (c) 2010-2020 Contributors to the openHAB project\n+ *\n+ * See the NOTICE file(s) distributed with this work for additional\n+ * information.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+\n+package org.openhab.binding.internal.kostal.inverter.secondgeneration;\n+\n+import java.math.BigDecimal;\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.concurrent.ExecutionException;\n+import java.util.concurrent.ScheduledFuture;\n+import java.util.concurrent.TimeUnit;\n+import java.util.concurrent.TimeoutException;\n+\n+import javax.measure.Unit;\n+\n+import org.eclipse.jdt.annotation.NonNullByDefault;\n+import org.eclipse.jdt.annotation.Nullable;\n+import org.eclipse.jetty.client.HttpClient;\n+import org.openhab.core.library.types.OnOffType;\n+import org.openhab.core.library.types.QuantityType;\n+import org.openhab.core.library.types.StringType;\n+import org.openhab.core.thing.Channel;\n+import org.openhab.core.thing.ChannelUID;\n+import org.openhab.core.thing.Thing;\n+import org.openhab.core.thing.ThingStatus;\n+import org.openhab.core.thing.ThingStatusDetail;\n+import org.openhab.core.thing.binding.BaseThingHandler;\n+import org.openhab.core.types.Command;\n+import org.openhab.core.types.State;\n+import org.openhab.core.types.UnDefType;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import com.google.gson.Gson;\n+import com.google.gson.GsonBuilder;\n+\n+/**\n+ * The {@link SecondGenerationHandler} is responsible for handling commands, which are\n+ * sent to one of the channels, and initiation and refreshing regarded to second generation part of the binding.\n+ *\n+ *\n+ * @author Christian Schneider - Initial contribution\n+ * @author Christoph Weitkamp - Incorporated new QuantityType (Units of Measurement)\n+ * @author \u00d6rjan Backsell - Redesigned regarding Piko1020, Piko New Generation\n+ */\n+@NonNullByDefault\n+public class SecondGenerationHandler extends BaseThingHandler {\n+\n+    private final Logger logger = LoggerFactory.getLogger(SecondGenerationHandler.class);\n+\n+    private @Nullable ScheduledFuture<?> secondGenerationPoller;\n+\n+    private final HttpClient httpClient;\n+\n+    private List<SecondGenerationChannelConfiguration> channelConfigs = new ArrayList<>();\n+    private List<SecondGenerationChannelConfiguration> channelConfigsExt = new ArrayList<>();\n+    private List<SecondGenerationChannelConfiguration> channelConfigsExtExt = new ArrayList<>();\n+\n+    public SecondGenerationHandler(Thing thing, HttpClient httpClient) {\n+        super(thing);\n+        this.httpClient = httpClient;\n+    }\n+\n+    @Override\n+    public void handleCommand(ChannelUID channelUID, Command command) {\n+        final @Nullable SecondGenerationBindingConstants handleCommandConfig;\n+        handleCommandConfig = getConfigAs(SecondGenerationBindingConstants.class);\n+\n+        String url = handleCommandConfig.url.toString();\n+        String username = handleCommandConfig.username;\n+        String password = handleCommandConfig.password;\n+        String valueConfiguration = \"\";\n+        String dxsEntriesConf = \"\";\n+\n+        switch (channelUID.getId()) {\n+            case SecondGenerationBindingConstants.CHANNEL_CHARGETIMEEND:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556236\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_BATTERYTYPE:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556252\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_BATTERYUSAGECONSUMPTION:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556249\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_BATTERYUSAGESTRATEGY:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"83888896\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_SMARTBATTERYCONTROL:\n+                valueConfiguration = \"\";\n+                if (command == OnOffType.ON) {\n+                    valueConfiguration = \"True\";\n+                }\n+                if (command == OnOffType.OFF) {\n+                    valueConfiguration = \"False\";\n+                }\n+                dxsEntriesConf = \"33556484\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_SMARTBATTERYCONTROL_TEXT:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556484\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_BATTERYCHARGETIMEFROM:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556239\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_BATTERYCHARGETIMETO:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556240\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_MAXDEPTHOFDISCHARGE:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556247\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_SHADOWMANAGEMENT:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556483\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_EXTERNALMODULECONTROL:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556482\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_INVERTERNAME:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"16777984\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+        }\n+    }\n+\n+    @Override\n+    public void initialize() {\n+        channelConfigs = SecondGenerationChannelConfiguration.getChannelConfiguration();\n+        channelConfigsExt = SecondGenerationChannelConfiguration.getChannelConfigurationExt();\n+        channelConfigsExtExt = SecondGenerationChannelConfiguration.getChannelConfigurationExtExt();\n+\n+        updateStatus(ThingStatus.UNKNOWN);\n+\n+        secondGenerationPoller = scheduler.scheduleWithFixedDelay(() -> {\n+\n+            try {\n+                refresh();\n+                updateStatus(ThingStatus.ONLINE);\n+            } catch (RuntimeException scheduleWithFixedDelayException) {\n+                updateStatus(ThingStatus.OFFLINE, ThingStatusDetail.COMMUNICATION_ERROR,\n+                        scheduleWithFixedDelayException.getClass().getName() + \":\"\n+                                + scheduleWithFixedDelayException.getMessage());\n+                logger.debug(\"Error when connecting to inverter, {}: {}\", getThing().getUID(),\n+                        scheduleWithFixedDelayException.getMessage());\n+            } catch (InterruptedException e) {\n+                logger.debug(\"Communication with inverter interrupted, exception {}\", e.getMessage());\n+            } catch (ExecutionException e) {\n+                logger.debug(\"Communication with inverter failed, exception {}\", e.getMessage());\n+            } catch (TimeoutException e) {\n+                logger.debug(\"Communication with inverter timed out, exception {}\", e.getMessage());\n+            }\n+        }, 0, SecondGenerationBindingConstants.REFRESHINTERVAL_SEC, TimeUnit.SECONDS);\n+    }\n+\n+    @Override\n+    public void dispose() {\n+        final ScheduledFuture<?> secondGenerationLocalPoller = secondGenerationPoller;\n+\n+        if (secondGenerationLocalPoller != null && !secondGenerationLocalPoller.isCancelled()) {\n+            secondGenerationLocalPoller.cancel(true);\n+            secondGenerationPoller = null;\n+        }\n+    }\n+\n+    @SuppressWarnings(\"null\")\n+    private void refresh() throws InterruptedException, ExecutionException, TimeoutException {\n+        final @Nullable SecondGenerationBindingConstants refreshConfig;\n+        refreshConfig = getConfigAs(SecondGenerationBindingConstants.class);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0e4193840d7464142150f71ebfedb6e446022072"}, "originalPosition": 209}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODgwNjgwMg==", "bodyText": "You could make this a field to make it initialize once to save resources.", "url": "https://github.com/openhab/openhab-addons/pull/8574#discussion_r518806802", "createdAt": "2020-11-06T15:01:03Z", "author": {"login": "fwolter"}, "path": "bundles/org.openhab.binding.kostalinverter/src/main/java/org/openhab/binding/internal/kostal/inverter/secondgeneration/SecondGenerationHandler.java", "diffHunk": "@@ -0,0 +1,303 @@\n+/**\n+ * Copyright (c) 2010-2020 Contributors to the openHAB project\n+ *\n+ * See the NOTICE file(s) distributed with this work for additional\n+ * information.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+\n+package org.openhab.binding.internal.kostal.inverter.secondgeneration;\n+\n+import java.math.BigDecimal;\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.concurrent.ExecutionException;\n+import java.util.concurrent.ScheduledFuture;\n+import java.util.concurrent.TimeUnit;\n+import java.util.concurrent.TimeoutException;\n+\n+import javax.measure.Unit;\n+\n+import org.eclipse.jdt.annotation.NonNullByDefault;\n+import org.eclipse.jdt.annotation.Nullable;\n+import org.eclipse.jetty.client.HttpClient;\n+import org.openhab.core.library.types.OnOffType;\n+import org.openhab.core.library.types.QuantityType;\n+import org.openhab.core.library.types.StringType;\n+import org.openhab.core.thing.Channel;\n+import org.openhab.core.thing.ChannelUID;\n+import org.openhab.core.thing.Thing;\n+import org.openhab.core.thing.ThingStatus;\n+import org.openhab.core.thing.ThingStatusDetail;\n+import org.openhab.core.thing.binding.BaseThingHandler;\n+import org.openhab.core.types.Command;\n+import org.openhab.core.types.State;\n+import org.openhab.core.types.UnDefType;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import com.google.gson.Gson;\n+import com.google.gson.GsonBuilder;\n+\n+/**\n+ * The {@link SecondGenerationHandler} is responsible for handling commands, which are\n+ * sent to one of the channels, and initiation and refreshing regarded to second generation part of the binding.\n+ *\n+ *\n+ * @author Christian Schneider - Initial contribution\n+ * @author Christoph Weitkamp - Incorporated new QuantityType (Units of Measurement)\n+ * @author \u00d6rjan Backsell - Redesigned regarding Piko1020, Piko New Generation\n+ */\n+@NonNullByDefault\n+public class SecondGenerationHandler extends BaseThingHandler {\n+\n+    private final Logger logger = LoggerFactory.getLogger(SecondGenerationHandler.class);\n+\n+    private @Nullable ScheduledFuture<?> secondGenerationPoller;\n+\n+    private final HttpClient httpClient;\n+\n+    private List<SecondGenerationChannelConfiguration> channelConfigs = new ArrayList<>();\n+    private List<SecondGenerationChannelConfiguration> channelConfigsExt = new ArrayList<>();\n+    private List<SecondGenerationChannelConfiguration> channelConfigsExtExt = new ArrayList<>();\n+\n+    public SecondGenerationHandler(Thing thing, HttpClient httpClient) {\n+        super(thing);\n+        this.httpClient = httpClient;\n+    }\n+\n+    @Override\n+    public void handleCommand(ChannelUID channelUID, Command command) {\n+        final @Nullable SecondGenerationBindingConstants handleCommandConfig;\n+        handleCommandConfig = getConfigAs(SecondGenerationBindingConstants.class);\n+\n+        String url = handleCommandConfig.url.toString();\n+        String username = handleCommandConfig.username;\n+        String password = handleCommandConfig.password;\n+        String valueConfiguration = \"\";\n+        String dxsEntriesConf = \"\";\n+\n+        switch (channelUID.getId()) {\n+            case SecondGenerationBindingConstants.CHANNEL_CHARGETIMEEND:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556236\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_BATTERYTYPE:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556252\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_BATTERYUSAGECONSUMPTION:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556249\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_BATTERYUSAGESTRATEGY:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"83888896\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_SMARTBATTERYCONTROL:\n+                valueConfiguration = \"\";\n+                if (command == OnOffType.ON) {\n+                    valueConfiguration = \"True\";\n+                }\n+                if (command == OnOffType.OFF) {\n+                    valueConfiguration = \"False\";\n+                }\n+                dxsEntriesConf = \"33556484\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_SMARTBATTERYCONTROL_TEXT:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556484\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_BATTERYCHARGETIMEFROM:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556239\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_BATTERYCHARGETIMETO:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556240\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_MAXDEPTHOFDISCHARGE:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556247\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_SHADOWMANAGEMENT:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556483\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_EXTERNALMODULECONTROL:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556482\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_INVERTERNAME:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"16777984\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+        }\n+    }\n+\n+    @Override\n+    public void initialize() {\n+        channelConfigs = SecondGenerationChannelConfiguration.getChannelConfiguration();\n+        channelConfigsExt = SecondGenerationChannelConfiguration.getChannelConfigurationExt();\n+        channelConfigsExtExt = SecondGenerationChannelConfiguration.getChannelConfigurationExtExt();\n+\n+        updateStatus(ThingStatus.UNKNOWN);\n+\n+        secondGenerationPoller = scheduler.scheduleWithFixedDelay(() -> {\n+\n+            try {\n+                refresh();\n+                updateStatus(ThingStatus.ONLINE);\n+            } catch (RuntimeException scheduleWithFixedDelayException) {\n+                updateStatus(ThingStatus.OFFLINE, ThingStatusDetail.COMMUNICATION_ERROR,\n+                        scheduleWithFixedDelayException.getClass().getName() + \":\"\n+                                + scheduleWithFixedDelayException.getMessage());\n+                logger.debug(\"Error when connecting to inverter, {}: {}\", getThing().getUID(),\n+                        scheduleWithFixedDelayException.getMessage());\n+            } catch (InterruptedException e) {\n+                logger.debug(\"Communication with inverter interrupted, exception {}\", e.getMessage());\n+            } catch (ExecutionException e) {\n+                logger.debug(\"Communication with inverter failed, exception {}\", e.getMessage());\n+            } catch (TimeoutException e) {\n+                logger.debug(\"Communication with inverter timed out, exception {}\", e.getMessage());\n+            }\n+        }, 0, SecondGenerationBindingConstants.REFRESHINTERVAL_SEC, TimeUnit.SECONDS);\n+    }\n+\n+    @Override\n+    public void dispose() {\n+        final ScheduledFuture<?> secondGenerationLocalPoller = secondGenerationPoller;\n+\n+        if (secondGenerationLocalPoller != null && !secondGenerationLocalPoller.isCancelled()) {\n+            secondGenerationLocalPoller.cancel(true);\n+            secondGenerationPoller = null;\n+        }\n+    }\n+\n+    @SuppressWarnings(\"null\")\n+    private void refresh() throws InterruptedException, ExecutionException, TimeoutException {\n+        final @Nullable SecondGenerationBindingConstants refreshConfig;\n+        refreshConfig = getConfigAs(SecondGenerationBindingConstants.class);\n+\n+        String dxsEntriesCall = refreshConfig.url.toString() + \"/api/dxs.json?dxsEntries=\"\n+                + channelConfigs.get(0).dxsEntries;\n+        String dxsEntriesCallExt = refreshConfig.url.toString() + \"/api/dxs.json?dxsEntries=\"\n+                + channelConfigsExt.get(0).dxsEntries;\n+\n+        for (int i = 1; i < channelConfigs.size(); i++) {\n+            dxsEntriesCall += (\"&dxsEntries=\" + channelConfigs.get(i).dxsEntries);\n+            dxsEntriesCallExt += (\"&dxsEntries=\" + channelConfigsExt.get(i).dxsEntries);\n+        }\n+\n+        String jsonDxsEntriesResponse = callURL(dxsEntriesCall);\n+        String jsonDxsEntriesResponseExt = callURL(dxsEntriesCallExt);\n+        String jsonDxsEntriesResponseExtExt = callURL(refreshConfig.url.toString() + \"/api/dxs.json?dxsEntries=\"\n+                + channelConfigsExtExt.get(0).dxsEntries + \"&dxsEntries=\" + channelConfigsExtExt.get(1).dxsEntries\n+                + \"&dxsEntries=\" + channelConfigsExtExt.get(2).dxsEntries);\n+\n+        // Get Gson object\n+        final Gson gson = new GsonBuilder().setPrettyPrinting().create();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0e4193840d7464142150f71ebfedb6e446022072"}, "originalPosition": 228}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODgwNzUxOA==", "bodyText": "Can you comment on this?", "url": "https://github.com/openhab/openhab-addons/pull/8574#discussion_r518807518", "createdAt": "2020-11-06T15:02:09Z", "author": {"login": "fwolter"}, "path": "bundles/org.openhab.binding.kostalinverter/src/main/java/org/openhab/binding/internal/kostal/inverter/secondgeneration/SecondGenerationHandler.java", "diffHunk": "@@ -0,0 +1,354 @@\n+/**\n+ * Copyright (c) 2010-2020 Contributors to the openHAB project\n+ *\n+ * See the NOTICE file(s) distributed with this work for additional\n+ * information.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+\n+package org.openhab.binding.internal.kostal.inverter.secondgeneration;\n+\n+import java.io.BufferedReader;\n+import java.io.IOException;\n+import java.io.InputStreamReader;\n+import java.math.BigDecimal;\n+import java.net.URL;\n+import java.net.URLConnection;\n+import java.nio.charset.Charset;\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.concurrent.TimeUnit;\n+\n+import javax.measure.Unit;\n+\n+import org.eclipse.jdt.annotation.NonNullByDefault;\n+import org.eclipse.jdt.annotation.Nullable;\n+import org.eclipse.jetty.client.HttpClient;\n+import org.openhab.core.library.types.OnOffType;\n+import org.openhab.core.library.types.QuantityType;\n+import org.openhab.core.library.types.StringType;\n+import org.openhab.core.thing.Channel;\n+import org.openhab.core.thing.ChannelUID;\n+import org.openhab.core.thing.Thing;\n+import org.openhab.core.thing.ThingStatus;\n+import org.openhab.core.thing.ThingStatusDetail;\n+import org.openhab.core.thing.binding.BaseThingHandler;\n+import org.openhab.core.types.Command;\n+import org.openhab.core.types.RefreshType;\n+import org.openhab.core.types.State;\n+import org.openhab.core.types.UnDefType;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import com.google.gson.Gson;\n+import com.google.gson.GsonBuilder;\n+\n+/**\n+ * The {@link SecondGenerationHandler} is responsible for handling commands, which are\n+ * sent to one of the channels, and initiation and refreshing regarded to second generation part of the binding.\n+ *\n+ *\n+ * @author Christian Schneider - Initial contribution\n+ * @author Christoph Weitkamp - Incorporated new QuantityType (Units of Measurement)\n+ * @author \u00d6rjan Backsell - Redesigned regarding Piko1020, Piko New Generation\n+ */\n+\n+@NonNullByDefault\n+public class SecondGenerationHandler extends BaseThingHandler {\n+\n+    private final Logger logger = LoggerFactory.getLogger(SecondGenerationHandler.class);\n+\n+    private final HttpClient httpClient;\n+\n+    private List<SecondGenerationChannelConfiguration> channelConfigs = new ArrayList<>();\n+    private List<SecondGenerationChannelConfiguration> channelConfigsExt = new ArrayList<>();\n+    private List<SecondGenerationChannelConfiguration> channelConfigsExtExt = new ArrayList<>();\n+\n+    public SecondGenerationHandler(Thing thing, HttpClient httpClient) {\n+        super(thing);\n+        this.httpClient = httpClient;\n+    }\n+\n+    @Override\n+    public void handleCommand(ChannelUID channelUID, Command command) {\n+\n+        if (command instanceof RefreshType) {\n+            logger.debug(\"Handle command for {} on channel {}: {}\", thing.getUID(), channelUID, command);\n+        }\n+\n+        if (command == RefreshType.REFRESH) {\n+            return;\n+        }\n+\n+        final @Nullable SecondGenerationConfiguration handleCommandConfig;\n+        handleCommandConfig = getConfigAs(SecondGenerationConfiguration.class);\n+\n+        String url = handleCommandConfig.url.toString();\n+        String username = handleCommandConfig.username;\n+        String password = handleCommandConfig.password;\n+        String valueConfiguration = \"\";\n+        String dxsEntriesConf = \"\";\n+\n+        switch (channelUID.getId()) {\n+            case SecondGenerationBindingConstants.CHANNEL_CHARGETIMEEND:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556236\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_BATTERYTYPE:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556252\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_BATTERYUSAGECONSUMPTION:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556249\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_BATTERYUSAGESTRATEGY:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"83888896\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_SMARTBATTERYCONTROL:\n+                valueConfiguration = \"\";\n+                if (command == OnOffType.ON) {\n+                    valueConfiguration = \"True\";\n+                }\n+                if (command == OnOffType.OFF) {\n+                    valueConfiguration = \"False\";\n+                }\n+                dxsEntriesConf = \"33556484\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_SMARTBATTERYCONTROL_TEXT:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556484\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_BATTERYCHARGETIMEFROM:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556239\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_BATTERYCHARGETIMETO:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556240\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_MAXDEPTHOFDISCHARGE:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556247\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_SHADOWMANAGEMENT:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556483\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_EXTERNALMODULECONTROL:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"33556482\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+            case SecondGenerationBindingConstants.CHANNEL_INVERTERNAME:\n+                valueConfiguration = command.toString();\n+                dxsEntriesConf = \"16777984\";\n+                preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                        valueConfiguration);\n+                break;\n+        }\n+    }\n+\n+    @Override\n+    public void initialize() {\n+        channelConfigs = SecondGenerationChannelConfiguration.getChannelConfiguration();\n+        channelConfigsExt = SecondGenerationChannelConfiguration.getChannelConfigurationExt();\n+        channelConfigsExtExt = SecondGenerationChannelConfiguration.getChannelConfigurationExtExt();\n+\n+        updateStatus(ThingStatus.UNKNOWN);\n+\n+        scheduler.scheduleWithFixedDelay(() -> {\n+            try {\n+                updateStatus(ThingStatus.ONLINE);\n+                refresh();\n+            } catch (RuntimeException scheduleWithFixedDelayException) {\n+                updateStatus(ThingStatus.OFFLINE, ThingStatusDetail.COMMUNICATION_ERROR,\n+                        scheduleWithFixedDelayException.getClass().getName() + \":\"\n+                                + scheduleWithFixedDelayException.getMessage());\n+                logger.debug(\"Error refreshing source = {}: {}\", getThing().getUID(),\n+                        scheduleWithFixedDelayException.getMessage());\n+            }\n+        }, 0, SecondGenerationConfiguration.REFRESHINTERVAL, TimeUnit.SECONDS);\n+    }\n+\n+    @SuppressWarnings(\"null\")\n+    private void refresh() {\n+        final @Nullable SecondGenerationConfiguration refreshConfig;\n+        refreshConfig = getConfigAs(SecondGenerationConfiguration.class);\n+        String dxsEntriesCall = refreshConfig.url.toString() + \"/api/dxs.json?dxsEntries=\"\n+                + channelConfigs.get(0).dxsEntries;\n+        String dxsEntriesCallExt = refreshConfig.url.toString() + \"/api/dxs.json?dxsEntries=\"\n+                + channelConfigsExt.get(0).dxsEntries;\n+\n+        for (int i = 1; i < channelConfigs.size(); i++) {\n+            dxsEntriesCall += (\"&dxsEntries=\" + channelConfigs.get(i).dxsEntries);\n+            dxsEntriesCallExt += (\"&dxsEntries=\" + channelConfigsExt.get(i).dxsEntries);\n+        }\n+\n+        String jsonDxsEntriesResponse = callURL(dxsEntriesCall);\n+        String jsonDxsEntriesResponseExt = callURL(dxsEntriesCallExt);\n+        String jsonDxsEntriesResponseExtExt = callURL(refreshConfig.url.toString() + \"/api/dxs.json?dxsEntries=\"\n+                + channelConfigsExt.get(0).dxsEntries + \"&dxsEntries=\" + channelConfigsExt.get(1).dxsEntries\n+                + \"&dxsEntries=\" + channelConfigsExt.get(2).dxsEntries);\n+\n+        // Get Gson object\n+        Gson gson = new GsonBuilder().setPrettyPrinting().create();\n+\n+        // Parse result\n+        SecondGenerationDxsEntriesContainer dxsEntriesContainer = gson.fromJson(jsonDxsEntriesResponse,\n+                SecondGenerationDxsEntriesContainer.class);\n+        SecondGenerationDxsEntriesContainer dxsEntriesContainerExt = gson.fromJson(jsonDxsEntriesResponseExt,\n+                SecondGenerationDxsEntriesContainer.class);\n+        SecondGenerationDxsEntriesContainer dxsEntriesContainerExtExt = gson.fromJson(jsonDxsEntriesResponseExtExt,\n+                SecondGenerationDxsEntriesContainer.class);\n+\n+        // Create channel-posts array's\n+        String[] channelPosts = new String[23];\n+        String[] channelPostsExt = new String[23];\n+        String[] channelPostsExtExt = new String[3];\n+\n+        // Fill channelPosts with each item value\n+        int channelPostsCounter = 0;\n+        for (SecondGenerationDxsEntries dxsentries : dxsEntriesContainer.dxsEntries) {\n+            channelPosts[channelPostsCounter] = dxsentries.getName();\n+            channelPostsCounter++;\n+        }\n+\n+        // Fill channelPostsExt with each item value\n+        int channelPostsCounterExt = 0;\n+        for (SecondGenerationDxsEntries dxsentriesExt : dxsEntriesContainerExt.dxsEntries) {\n+            channelPostsExt[channelPostsCounterExt] = dxsentriesExt.getName();\n+            channelPostsCounterExt++;\n+        }\n+\n+        // Fill channelPostsExtExt with each item value\n+        int channelPostsCounterExtExt = 0;\n+        for (SecondGenerationDxsEntries dxsentriesExtExt : dxsEntriesContainerExtExt.dxsEntries) {\n+            channelPostsExtExt[channelPostsCounterExtExt] = dxsentriesExtExt.getName();\n+            channelPostsCounterExtExt++;\n+        }\n+\n+        // Create and update actual values for each channelPost\n+        int channelValuesCounter = 0;\n+\n+        for (SecondGenerationChannelConfiguration cConfig : channelConfigs) {\n+            Channel channel = getThing().getChannel(cConfig.id);\n+            State state = getState(channelPosts[channelValuesCounter], cConfig.unit);\n+\n+            // Update the channel\n+            if (state != null) {\n+                updateState(channel.getUID().getId(), state);\n+                channelValuesCounter++;\n+            }\n+        }\n+\n+        // Create and update actual values for each channelPostExt\n+        int channelValuesCounterExt = 0;\n+        for (SecondGenerationChannelConfiguration cConfig : channelConfigsExt) {\n+            Channel channel = getThing().getChannel(cConfig.id);\n+            State state = getState(channelPostsExt[channelValuesCounterExt], cConfig.unit);\n+\n+            // Update the channel\n+            if (state != null) {\n+                updateState(channel.getUID().getId(), state);\n+                channelValuesCounterExt++;\n+            }\n+        }\n+\n+        // Create and update actual values for each channelPostExtExt\n+        int channelValuesCounterExtExt = 0;\n+        for (SecondGenerationChannelConfiguration cConfig : channelConfigsExtExt) {\n+            Channel channel = getThing().getChannel(cConfig.id);\n+            State state = getState(channelPostsExtExt[channelValuesCounterExtExt], cConfig.unit);\n+\n+            // Update the channel\n+            if (state != null) {\n+                updateState(channel.getUID().getId(), state);\n+                channelValuesCounterExtExt++;\n+            }\n+        }\n+    }\n+\n+    // Helper method to handleCommand method\n+    public final void preSetExecuteConfigurationChanges(HttpClient httpClient, String url, String username,\n+            String password, String dxsEntriesConf, String valueConfiguration) {\n+        try {\n+            SecondGenerationConfigurationHandler.executeConfigurationChanges(httpClient, url, username, password,\n+                    dxsEntriesConf, valueConfiguration);\n+        } catch (Exception handleCommandException) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTA2OTA5MA=="}, "originalCommit": {"oid": "b246c14fc937cf5a260588d0d6505c65433607e2"}, "originalPosition": 305}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODgwODMwNg==", "bodyText": "The readme states the parameter is not an URL but a network address.", "url": "https://github.com/openhab/openhab-addons/pull/8574#discussion_r518808306", "createdAt": "2020-11-06T15:03:25Z", "author": {"login": "fwolter"}, "path": "bundles/org.openhab.binding.kostalinverter/src/main/resources/OH-INF/config/SecondGeneration.xml", "diffHunk": "@@ -0,0 +1,27 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<config-description:config-descriptions\n+\txmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+\txmlns:config-description=\"https://openhab.org/schemas/config-description/v1.0.0\"\n+\txsi:schemaLocation=\"https://openhab.org/schemas/config-description/v1.0.0 https://openhab.org/schemas/config-description-1.0.0.xsd\">\n+\t<config-description uri=\"thing-type:kostalpiko1020_config\">\n+\t\t<parameter name=\"url\" type=\"text\" required=\"true\">\n+\t\t\t<label> Inverter URL</label>\n+\t\t\t<description>URL to inverter.</description>\n+\t\t\t<context>url</context>\n+\t\t</parameter>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0e4193840d7464142150f71ebfedb6e446022072"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODgwOTcxMw==", "bodyText": "This should be required=\"true\", as if the user doesn't specify it in textual configuration, it will be 0.", "url": "https://github.com/openhab/openhab-addons/pull/8574#discussion_r518809713", "createdAt": "2020-11-06T15:05:35Z", "author": {"login": "fwolter"}, "path": "bundles/org.openhab.binding.kostalinverter/src/main/resources/OH-INF/config/SecondGeneration.xml", "diffHunk": "@@ -0,0 +1,27 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<config-description:config-descriptions\n+\txmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+\txmlns:config-description=\"https://openhab.org/schemas/config-description/v1.0.0\"\n+\txsi:schemaLocation=\"https://openhab.org/schemas/config-description/v1.0.0 https://openhab.org/schemas/config-description-1.0.0.xsd\">\n+\t<config-description uri=\"thing-type:kostalpiko1020_config\">\n+\t\t<parameter name=\"url\" type=\"text\" required=\"true\">\n+\t\t\t<label> Inverter URL</label>\n+\t\t\t<description>URL to inverter.</description>\n+\t\t\t<context>url</context>\n+\t\t</parameter>\n+\t\t<parameter name=\"username\" type=\"text\" required=\"false\">\n+\t\t\t<label>Username</label>\n+\t\t\t<description>The username for the inverter.</description>\n+\t\t</parameter>\n+\t\t<parameter name=\"password\" type=\"text\" required=\"false\">\n+\t\t\t<label>Password</label>\n+\t\t\t<description>The password for the inverter.</description>\n+\t\t\t<context>password</context>\n+\t\t</parameter>\n+\t\t<parameter name=\"refreshInterval\" type=\"integer\" min=\"1\" unit=\"s\" required=\"false\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0e4193840d7464142150f71ebfedb6e446022072"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODgxMDUyMg==", "bodyText": "Same for below.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t<label>Dc Power PV</label>\n          \n          \n            \n            \t\t<label>DC Power PV</label>", "url": "https://github.com/openhab/openhab-addons/pull/8574#discussion_r518810522", "createdAt": "2020-11-06T15:06:48Z", "author": {"login": "fwolter"}, "path": "bundles/org.openhab.binding.kostalinverter/src/main/resources/OH-INF/thing/Channels.xml", "diffHunk": "@@ -484,4 +484,431 @@\n \t\t<category>Energy</category>\n \t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n \t</channel-type>\n+\t<channel-type id=\"device-local-grid-output-power\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>Grid Output Power</label>\n+\t\t<description>Current output power to the grid</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"statistic-yield-day-second-gen\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>Yield Day</label>\n+\t\t<description>Total produced power today</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"statistic-yield-total-second-gen\">\n+\t\t<item-type>Number:Energy</item-type>\n+\t\t<label>Yield Total</label>\n+\t\t<description>Total produced power</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-operating-status\">\n+\t\t<item-type>String</item-type>\n+\t\t<label>Status</label>\n+\t\t<description>Current operating status</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-grid-voltage-l1\">\n+\t\t<item-type>Number:ElectricPotential</item-type>\n+\t\t<label>Grid Voltage L1</label>\n+\t\t<description>Current output voltage to the grid, L1</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-grid-current-l1\">\n+\t\t<item-type>Number:ElectricCurrent</item-type>\n+\t\t<label>Grid Current L1</label>\n+\t\t<description>Current output current to the grid, L1</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f  %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-grid-power-l1\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>Grid Power L1</label>\n+\t\t<description>Current output power to the grid, L1</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-grid-voltage-l2\">\n+\t\t<item-type>Number:ElectricPotential</item-type>\n+\t\t<label>Grid Voltage L2</label>\n+\t\t<description>Current output voltage to the grid, L2</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-grid-current-l2\">\n+\t\t<item-type>Number:ElectricCurrent</item-type>\n+\t\t<label>Grid Current L2</label>\n+\t\t<description>Current output current to the grid, L2</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-grid-power-l2\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>Grid Power L2</label>\n+\t\t<description>Current output power to the grid, L2</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-grid-voltage-l3\">\n+\t\t<item-type>Number:ElectricPotential</item-type>\n+\t\t<label>Grid Voltage L3</label>\n+\t\t<description>Current output voltage to the grid, L3</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-grid-current-l3\">\n+\t\t<item-type>Number:ElectricCurrent</item-type>\n+\t\t<label>Grid Current L3</label>\n+\t\t<description>Current output current to the grid, L3</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-grid-power-l3\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>Grid Power L3</label>\n+\t\t<description>Current output power to the grid, L3</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-dc-power-pv\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>Dc Power PV</label>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0e4193840d7464142150f71ebfedb6e446022072"}, "originalPosition": 97}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODgxMjc2Mg==", "bodyText": "According the readme, this and the following Channels are writeable. Should this be false?", "url": "https://github.com/openhab/openhab-addons/pull/8574#discussion_r518812762", "createdAt": "2020-11-06T15:10:11Z", "author": {"login": "fwolter"}, "path": "bundles/org.openhab.binding.kostalinverter/src/main/resources/OH-INF/thing/Channels.xml", "diffHunk": "@@ -484,4 +484,431 @@\n \t\t<category>Energy</category>\n \t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n \t</channel-type>\n+\t<channel-type id=\"device-local-grid-output-power\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>Grid Output Power</label>\n+\t\t<description>Current output power to the grid</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"statistic-yield-day-second-gen\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>Yield Day</label>\n+\t\t<description>Total produced power today</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"statistic-yield-total-second-gen\">\n+\t\t<item-type>Number:Energy</item-type>\n+\t\t<label>Yield Total</label>\n+\t\t<description>Total produced power</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-operating-status\">\n+\t\t<item-type>String</item-type>\n+\t\t<label>Status</label>\n+\t\t<description>Current operating status</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-grid-voltage-l1\">\n+\t\t<item-type>Number:ElectricPotential</item-type>\n+\t\t<label>Grid Voltage L1</label>\n+\t\t<description>Current output voltage to the grid, L1</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-grid-current-l1\">\n+\t\t<item-type>Number:ElectricCurrent</item-type>\n+\t\t<label>Grid Current L1</label>\n+\t\t<description>Current output current to the grid, L1</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f  %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-grid-power-l1\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>Grid Power L1</label>\n+\t\t<description>Current output power to the grid, L1</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-grid-voltage-l2\">\n+\t\t<item-type>Number:ElectricPotential</item-type>\n+\t\t<label>Grid Voltage L2</label>\n+\t\t<description>Current output voltage to the grid, L2</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-grid-current-l2\">\n+\t\t<item-type>Number:ElectricCurrent</item-type>\n+\t\t<label>Grid Current L2</label>\n+\t\t<description>Current output current to the grid, L2</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-grid-power-l2\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>Grid Power L2</label>\n+\t\t<description>Current output power to the grid, L2</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-grid-voltage-l3\">\n+\t\t<item-type>Number:ElectricPotential</item-type>\n+\t\t<label>Grid Voltage L3</label>\n+\t\t<description>Current output voltage to the grid, L3</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-grid-current-l3\">\n+\t\t<item-type>Number:ElectricCurrent</item-type>\n+\t\t<label>Grid Current L3</label>\n+\t\t<description>Current output current to the grid, L3</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-grid-power-l3\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>Grid Power L3</label>\n+\t\t<description>Current output power to the grid, L3</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-dc-power-pv\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>Dc Power PV</label>\n+\t\t<description>Current power from all solar panels</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-dc1-voltage\">\n+\t\t<item-type>Number:ElectricPotential</item-type>\n+\t\t<label>Dc1 Voltage</label>\n+\t\t<description>Current voltage from solar panels, Dc1</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-dc1-current\">\n+\t\t<item-type>Number:ElectricCurrent</item-type>\n+\t\t<label>Dc1 Current</label>\n+\t\t<description>Current current from solar panels, Dc1</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-dc1-power\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>Dc1 Power</label>\n+\t\t<description>Current power from solar panels, Dc1</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-dc2-voltage\">\n+\t\t<item-type>Number:ElectricPotential</item-type>\n+\t\t<label>Dc2 Voltage</label>\n+\t\t<description>Current voltage from solar panels, Dc2</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-dc2-current\">\n+\t\t<item-type>Number:ElectricCurrent</item-type>\n+\t\t<label>Dc2 Current</label>\n+\t\t<description>Current current from solar panels, Dc2</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-dc2-power\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>Dc2 Power</label>\n+\t\t<description>Current power from solar panels, Dc2</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-dc3-voltage\">\n+\t\t<item-type>Number:ElectricPotential</item-type>\n+\t\t<label>Dc3 Voltage</label>\n+\t\t<description>Current voltage from solar panels, Dc3</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-dc3-current\">\n+\t\t<item-type>Number:ElectricCurrent</item-type>\n+\t\t<label>Dc3 Current</label>\n+\t\t<description>Current current from solar panels, Dc3</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-dc3-power\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>Dc3 Power</label>\n+\t\t<description>Current power from solar panels, Dc3</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-akt-home-consumption-solar\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>Actual Home Consumption Solar</label>\n+\t\t<description>Current consumption from solar panels</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-akt-home-consumption-bat\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>Actual Home Consumption Battery</label>\n+\t\t<description>Current consumption from battery</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-akt-home-consumption-grid\">\n+\t\t<item-type>Number:Energy</item-type>\n+\t\t<label>Actual Home Consumption Grid</label>\n+\t\t<description>Current consumption from grid</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-phase-sel-home-consump-l1\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>Home Consumption L1</label>\n+\t\t<description>Current consumption, L1</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-phase-sel-home-consump-l2\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>Home Consumption L2</label>\n+\t\t<description>Current consumption, L2</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-phase-sel-home-consump-l3\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>Home Consumption L3</label>\n+\t\t<description>Current consumption, L3</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-grid-freq\">\n+\t\t<item-type>Number:Frequency</item-type>\n+\t\t<label>Grid Freq</label>\n+\t\t<description>Current frequency on grid</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-grid-cos-phi\">\n+\t\t<item-type>Number:Angle</item-type>\n+\t\t<label>Grid Cos Phi</label>\n+\t\t<description>Current power factor on grid</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.0f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"statistic-home-consumption-day\">\n+\t\t<item-type>Number:Energy</item-type>\n+\t\t<label>Home Consumption Day</label>\n+\t\t<description>Total home consumption today</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"statistic-own-consumption-day\">\n+\t\t<item-type>Number:Energy</item-type>\n+\t\t<label>Own Consumption Day</label>\n+\t\t<description>Total own consumption today</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"statistic-own-cons-rate-day\">\n+\t\t<item-type>Number:Dimensionless</item-type>\n+\t\t<label>Own Cons Rate Day</label>\n+\t\t<description>Total own consumption rate today</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.0f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"statistic-autonomy-degree-day\">\n+\t\t<item-type>Number:Dimensionless</item-type>\n+\t\t<label>Autonomy Degree Day</label>\n+\t\t<description>Total autonomy degree day</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.0f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"statistic-home-consumption-total\">\n+\t\t<item-type>Number:Energy</item-type>\n+\t\t<label>Home Consumption Total</label>\n+\t\t<description>Total home consumption</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"statistic-own-consumption-total\">\n+\t\t<item-type>Number:Energy</item-type>\n+\t\t<label>Own Consumption Total</label>\n+\t\t<description>Total own consumption</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"statistic-total-operating-time\">\n+\t\t<item-type>Number:Time</item-type>\n+\t\t<label>Total Operating Time</label>\n+\t\t<description>Total operating time</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.0f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-current\">\n+\t\t<item-type>Number:ElectricCurrent</item-type>\n+\t\t<label>Current</label>\n+\t\t<description>Current</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.0f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-current-dir\">\n+\t\t<item-type>Number:ElectricCurrent</item-type>\n+\t\t<label>Current Dir</label>\n+\t\t<description>Current dir</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.0f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-charge-cycles\">\n+\t\t<item-type>String</item-type>\n+\t\t<label>Charge Cycles</label>\n+\t\t<description>Total number of charge cycles</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-battery-temperature\">\n+\t\t<item-type>Number:Temperature</item-type>\n+\t\t<label>Battery Temperature</label>\n+\t\t<description>Current battery temperature</description>\n+\t\t<category>Temperature</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-loginterval\">\n+\t\t<item-type>Number:Time</item-type>\n+\t\t<label>Log Interval</label>\n+\t\t<description>Set value for loginterval</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.0f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-s0-inpulse-cnt\">\n+\t\t<item-type>String</item-type>\n+\t\t<label>S0 Input Pulses Counter</label>\n+\t\t<description>S0-pulse counter</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\"/>\n+\t</channel-type>\n+\t<channel-type id=\"statistic-own-cons-rate-total\">\n+\t\t<item-type>Number:Dimensionless</item-type>\n+\t\t<label>Own Cons Rate Total</label>\n+\t\t<description>Total own comsumption rate</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.0f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"statistic-autonomy-degree-total\">\n+\t\t<item-type>Number:Dimensionless</item-type>\n+\t\t<label>Autonomy Degree Total</label>\n+\t\t<description>Total autonomy degree</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.0f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-battery-voltage-second-gen\">\n+\t\t<item-type>Number:ElectricalPotential</item-type>\n+\t\t<label>Battery Voltage</label>\n+\t\t<description>Current battery voltage</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.0f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-bat-state-of-charge\">\n+\t\t<item-type>Number:Dimensionless</item-type>\n+\t\t<label>Bat State Of Charge</label>\n+\t\t<description>Current battery charge state</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.0f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-self-consumption\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>Self Consumption</label>\n+\t\t<description>Current self consumption</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-charge-time-end\">\n+\t\t<item-type>Number:Time</item-type>\n+\t\t<label>Charge Time End</label>\n+\t\t<description>Set charge time end</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0e4193840d7464142150f71ebfedb6e446022072"}, "originalPosition": 352}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM0NzU5MDYw", "url": "https://github.com/openhab/openhab-addons/pull/8574#pullrequestreview-534759060", "createdAt": "2020-11-19T19:01:25Z", "commit": {"oid": "2b39c0649fe601aac7a5b47487655b791adf9884"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQxOTowMToyNlrOH2tRlA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQxOTowNDo1MlrOH2tZZA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzEyNjkzMg==", "bodyText": "Great that you received feedback from the user! It would make sense to make this a Switch if the value is true/false, although if the early adopter needs to edit his configuration.", "url": "https://github.com/openhab/openhab-addons/pull/8574#discussion_r527126932", "createdAt": "2020-11-19T19:01:26Z", "author": {"login": "fwolter"}, "path": "bundles/org.openhab.binding.kostalinverter/src/main/resources/OH-INF/thing/Channels.xml", "diffHunk": "@@ -856,16 +856,9 @@\n \t\t<state readOnly=\"false\"/>\n \t</channel-type>\n \t<channel-type id=\"device-local-smart-battery-control\">\n-\t\t<item-type>Switch</item-type>\n+\t\t<item-type>String</item-type>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2b39c0649fe601aac7a5b47487655b791adf9884"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzEyNzcxMQ==", "bodyText": "If this is watts, String doesn't make sense here. You could make it Number:Power.", "url": "https://github.com/openhab/openhab-addons/pull/8574#discussion_r527127711", "createdAt": "2020-11-19T19:02:43Z", "author": {"login": "fwolter"}, "path": "bundles/org.openhab.binding.kostalinverter/README.md", "diffHunk": "@@ -125,10 +125,9 @@ The following Channels are writeable\n |-------------------------------|---------------------------|-------------------------------------------------------|-----------------|    \n | chargeTimeEnd             | Number:Time     | Set charge time end, Value = 00:00  |    W    |\n | batteryType               | String          | Set battery type, Value = 1 = None, Value = 2 = PIKO Battery Li, Value = 3 = BYD B-Box HV  |   W    |\n-| batteryUsageConsumption   | String          | Set battery usage consumption, Value = 100  |    W    |\n+| batteryUsageConsumption   | String          | Set battery usage consumption level for power-consumption from battery, default value = 100 (W)  |    W    |", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2b39c0649fe601aac7a5b47487655b791adf9884"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzEyODkzMg==", "bodyText": "See my comment from 7 Oct. \"The binding name don't need to be included in the Thing Type ID.\" Is this the parameter you meant, preventing the Thing from being showed up in the UI? Actually this naming shouldn't prevent it from showing up.", "url": "https://github.com/openhab/openhab-addons/pull/8574#discussion_r527128932", "createdAt": "2020-11-19T19:04:52Z", "author": {"login": "fwolter"}, "path": "bundles/org.openhab.binding.kostalinverter/src/main/resources/OH-INF/thing/PIKO1020.xml", "diffHunk": "@@ -0,0 +1,81 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<thing:thing-descriptions bindingId=\"kostalinverter\"\n+\txmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+\txmlns:thing=\"https://openhab.org/schemas/thing-description/v1.0.0\"\n+\txsi:schemaLocation=\"https://openhab.org/schemas/thing-description/v1.0.0 https://openhab.org/schemas/thing-description-1.0.0.xsd\">\n+\t<thing-type id=\"kostalinverterpiko1020\">", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTA3MjI5OQ=="}, "originalCommit": {"oid": "b246c14fc937cf5a260588d0d6505c65433607e2"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM0NzYzNjAy", "url": "https://github.com/openhab/openhab-addons/pull/8574#pullrequestreview-534763602", "createdAt": "2020-11-19T19:07:38Z", "commit": {"oid": "2b39c0649fe601aac7a5b47487655b791adf9884"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQxOTowNzozOFrOH2tfXg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQxOTowNzozOFrOH2tfXg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzEzMDQ2Mg==", "bodyText": "Did you change this by intention? It is indeed a Thing.", "url": "https://github.com/openhab/openhab-addons/pull/8574#discussion_r527130462", "createdAt": "2020-11-19T19:07:38Z", "author": {"login": "fwolter"}, "path": "bundles/org.openhab.binding.kostalinverter/src/main/resources/OH-INF/thing/PIKO1020.xml", "diffHunk": "@@ -3,9 +3,9 @@\n \txmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n \txmlns:thing=\"https://openhab.org/schemas/thing-description/v1.0.0\"\n \txsi:schemaLocation=\"https://openhab.org/schemas/thing-description/v1.0.0 https://openhab.org/schemas/thing-description-1.0.0.xsd\">\n-\t<thing-type id=\"piko1020\">\n+\t<thing-type id=\"kostalinverterpiko1020\">\n \t\t<label>KOSTAL PIKO 10-20</label>\n-\t\t<description>Thing for the KOSTAL PIKO 10-20</description>\n+\t\t<description>Bindings for the KOSTAL PIKO 10-20</description>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2b39c0649fe601aac7a5b47487655b791adf9884"}, "originalPosition": 8}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c91ad9c37bc48b9ae3f04dc20d74d90f9ca2cdfb", "author": {"user": {"login": "basse04", "name": null}}, "url": "https://github.com/openhab/openhab-addons/commit/c91ad9c37bc48b9ae3f04dc20d74d90f9ca2cdfb", "committedDate": "2020-11-25T17:25:52Z", "message": "Binding redesigned 20200923 by \u00d6rjan Backsell\n\nSigned-off-by: basse04 orjan.backsell@gmail.com\nAlso-by: Christian Schneider <>\nAlso-by: Ren\u00e9 Stakemeier <>\nAlso-by: Christoph Weitkamp <>\n\n\nThis is the upgraded version of Kostal Inverter extended with\nfunctionality for the Inverter type of Second generation PIKO 10-20\n[kostalinverter], regarded OH3.\n[WIP]\n\nSigned-off-by: basse04 <orjan.backsell@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "721350e928548f5c6ed6c8fb3f174ff71bdc44e2", "author": {"user": {"login": "basse04", "name": null}}, "url": "https://github.com/openhab/openhab-addons/commit/721350e928548f5c6ed6c8fb3f174ff71bdc44e2", "committedDate": "2020-11-25T17:25:52Z", "message": "Binding redesigned 20200923 by \u00d6rjan Backsell\n\nSigned-off-by: basse04 orjan.backsell@gmail.com\nAlso-by: Christian Schneider <>\nAlso-by: Ren\u00e9 Stakemeier <>\nAlso-by: Christoph Weitkamp <>\n\n\nThis is the upgraded version of Kostal Inverter extended with\nfunctionality for the Inverter type of Second generation PIKO 10-20\n[kostalinverter] regarded oH3\n[WIP]\n\nSigned-off-by: basse04 <orjan.backsell@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8c1d999f88722634f751f0058e380aa3e7e8e411", "author": {"user": {"login": "basse04", "name": null}}, "url": "https://github.com/openhab/openhab-addons/commit/8c1d999f88722634f751f0058e380aa3e7e8e411", "committedDate": "2020-11-25T17:25:52Z", "message": "Binding redesigned 20200923 by \u00d6rjan Backsell\n\nSigned-off-by: basse04 orjan.backsell@gmail.com\nAlso-by: Christian Schneider <>\nAlso-by: Ren\u00e9 Stakemeier <>\nAlso-by: Christoph Weitkamp <>\n\n\nThis is the upgraded version of Kostal Inverter extended with\nfunctionality for the Inverter type of Second generation PIKO 10-20\n[kostalinverter] regarded oH3\n[WIP]\n\nSigned-off-by: basse04 <orjan.backsell@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "98df35a49f9dc13db8b1cbbc69b8e3d87ee66217", "author": {"user": {"login": "basse04", "name": null}}, "url": "https://github.com/openhab/openhab-addons/commit/98df35a49f9dc13db8b1cbbc69b8e3d87ee66217", "committedDate": "2020-11-25T17:25:52Z", "message": "Binding redesigned 20200923 by \u00d6rjan Backsell\n\nSigned-off-by: basse04 orjan.backsell@gmail.com\nAlso-by: Christian Schneider <>\nAlso-by: Ren\u00e9 Stakemeier <>\nAlso-by: Christoph Weitkamp <>\n\n\nThis is the upgraded version of Kostal Inverter extended with\nfunctionality for the Inverter type of Second generation PIKO 10-20\n[kostalinverter] regarded oH3\n[WIP]\n\nSigned-off-by: basse04 <orjan.backsell@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4f20990700058d92d8057263f883c4201db85c16", "author": {"user": {"login": "basse04", "name": null}}, "url": "https://github.com/openhab/openhab-addons/commit/4f20990700058d92d8057263f883c4201db85c16", "committedDate": "2020-11-25T17:25:52Z", "message": "Binding redesigned 20200924 by \u00d6rjan Backsell\n\nSigned-off-by: basse04 orjan.backsell@gmail.com\nAlso-by: Christian Schneider <>\nAlso-by: Ren\u00e9 Stakemeier <>\nAlso-by: Christoph Weitkamp <>\n\n\nThis is the upgraded version of Kostal Inverter extended with\nfunctionality for the Inverter type of Second generation PIKO 10-20\n[kostalinverter] regarded oH3\n[WIP]\n\nSigned-off-by: basse04 <orjan.backsell@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "94b90bceafe72130df1563fc510b5e07d9e859a8", "author": {"user": {"login": "basse04", "name": null}}, "url": "https://github.com/openhab/openhab-addons/commit/94b90bceafe72130df1563fc510b5e07d9e859a8", "committedDate": "2020-11-25T17:25:52Z", "message": "Binding redesigned 20200924 by \u00d6rjan Backsell\n\nSigned-off-by: basse04 orjan.backsell@gmail.com\nAlso-by: Christian Schneider <>\nAlso-by: Ren\u00e9 Stakemeier <>\nAlso-by: Christoph Weitkamp <>\n\nChanges made in\norg.openhab.binding.internal.kostal.inverter.secondgeneration.SecondGenerationHandler.java\nfound by Travis tests.\n\nSigned-off-by: basse04 <orjan.backsell@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b927fc9bab77f4caf442d861035fb4574917d8eb", "author": {"user": {"login": "basse04", "name": null}}, "url": "https://github.com/openhab/openhab-addons/commit/b927fc9bab77f4caf442d861035fb4574917d8eb", "committedDate": "2020-11-25T17:25:52Z", "message": "Binding redesigned 20201007 by \u00d6rjan Backsell\n\nSigned-off-by: basse04 orjan.backsell@gmail.com\nAlso-by: Christian Schneider <>\nAlso-by: Ren\u00e9 Stakemeier <>\nAlso-by: Christoph Weitkamp <>\n\nDone changes in:\nChannels.xml\nPIKO1020.xml\nREADME.md\nSecondGeneration.xml\nSecondGenerationChannelConfiguration.java\n\nSigned-off-by: basse04 <orjan.backsell@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b56b6d2e43d30f648670a118cb2a4298610c68cd", "author": {"user": {"login": "basse04", "name": null}}, "url": "https://github.com/openhab/openhab-addons/commit/b56b6d2e43d30f648670a118cb2a4298610c68cd", "committedDate": "2020-11-25T17:25:52Z", "message": "Binding redesigned 20201008 by \u00d6rjan Backsell\n\nSigned-off-by: basse04 <orjan.backsell@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "934f26e573dda393b6050e953f26fe59c15e05fd", "author": {"user": {"login": "basse04", "name": null}}, "url": "https://github.com/openhab/openhab-addons/commit/934f26e573dda393b6050e953f26fe59c15e05fd", "committedDate": "2020-11-25T17:25:52Z", "message": "Binding redesigned 20201012 by \u00d6rjan Backsell, regarded to @fwolter\nrequested changes\n\nSigned-off-by: basse04 orjan.backsell@gmail.com\nAlso-by: Christian Schneider <>\nAlso-by: Ren\u00e9 Stakemeier <>\nAlso-by: Christoph Weitkamp <>\nSigned-off-by: basse04 <orjan.backsell@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2ffeeea75f4022b4f8e692c74660438f83cc67df", "author": {"user": {"login": "basse04", "name": null}}, "url": "https://github.com/openhab/openhab-addons/commit/2ffeeea75f4022b4f8e692c74660438f83cc67df", "committedDate": "2020-11-25T17:25:52Z", "message": "Binding redesigned 20201028 by \u00d6rjan Backsell, regarded to @cpmeister\nrequested changes.\n\nSigned-off-by: basse04 orjan.backsell@gmail.com\nAlso-by: Christian Schneider <>\nAlso-by: Ren\u00e9 Stakemeier <>\nAlso-by: Christoph Weitkamp <>\nSigned-off-by: basse04 <orjan.backsell@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cac39e581353d5d9911e3c35cc348a6638376b79", "author": {"user": {"login": "basse04", "name": null}}, "url": "https://github.com/openhab/openhab-addons/commit/cac39e581353d5d9911e3c35cc348a6638376b79", "committedDate": "2020-11-25T17:25:52Z", "message": "Binding redesigned 20201105 by \u00d6rjan Backsell\n\nSigned-off-by: basse04 orjan.backsell@gmail.com\nAlso-by: Christian Schneider <>\nAlso-by: Ren\u00e9 Stakemeier <>\nAlso-by: Christoph Weitkamp <>\nSigned-off-by: basse04 <orjan.backsell@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f0e72a226959ab1afb7092a611fbdbe8344d3b31", "author": {"user": {"login": "basse04", "name": null}}, "url": "https://github.com/openhab/openhab-addons/commit/f0e72a226959ab1afb7092a611fbdbe8344d3b31", "committedDate": "2020-11-25T17:25:52Z", "message": "Binding redesigned 20200923 by \u00d6rjan Backsell\n\n'\nSigned-off-by: basse04 orjan.backsell@gmail.com\nAlso-by: Christian Schneider <>\nAlso-by: Ren\u00e9 Stakemeier <>\nAlso-by: Christoph Weitkamp <>\n'\nSigned-off-by: basse04 <orjan.backsell@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c7ee03c1134d92d7b869d2e2f48a9533ae636500", "author": {"user": {"login": "basse04", "name": null}}, "url": "https://github.com/openhab/openhab-addons/commit/c7ee03c1134d92d7b869d2e2f48a9533ae636500", "committedDate": "2020-11-25T17:25:52Z", "message": "Binding redesigned 20201111 by \u00d6rjan Backsell\n\nSigned-off-by: basse04 <orjan.backsell@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "419b20265ea7953dd4b663c124d9fb57e88fda73", "author": {"user": {"login": "basse04", "name": null}}, "url": "https://github.com/openhab/openhab-addons/commit/419b20265ea7953dd4b663c124d9fb57e88fda73", "committedDate": "2020-11-25T17:25:52Z", "message": "Binding redesigned 20201117 by \u00d6rjan Backsell\n\n'\nSigned-off-by: basse04 orjan.backsell@gmail.com\nAlso-by: Christian Schneider <>\nAlso-by: Ren\u00e9 Stakemeier <>\nAlso-by: Christoph Weitkamp <>\n\n\nThis is the upgraded version of Kostal Inverter extended with\nfunctionality for the Inverter type of Second generation PIKO 10-20\n[kostalinverter]\n[WIP]\n'\n\nSigned-off-by: basse04 <orjan.backsell@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1e24ad493d4aeeefc7352ab88274618ad9e1a544", "author": {"user": {"login": "basse04", "name": null}}, "url": "https://github.com/openhab/openhab-addons/commit/1e24ad493d4aeeefc7352ab88274618ad9e1a544", "committedDate": "2020-11-25T17:25:52Z", "message": "Binding redesigned 20201119 by \u00d6rjan Backsell\n\nSigned-off-by: basse04 <orjan.backsell@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fd19749c1f354edaa37db5f9f460c1ade0a6316b", "author": {"user": {"login": "basse04", "name": null}}, "url": "https://github.com/openhab/openhab-addons/commit/fd19749c1f354edaa37db5f9f460c1ade0a6316b", "committedDate": "2020-11-25T17:25:52Z", "message": "Binding redesigned 20201125 by \u00d6rjan Backsell\n\nSigned-off-by: basse04 <orjan.backsell@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQwOTg1NDYw", "url": "https://github.com/openhab/openhab-addons/pull/8574#pullrequestreview-540985460", "createdAt": "2020-11-30T14:55:48Z", "commit": {"oid": "fa08c346c95733b57361b68ced11b0e9dc0da8bc"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0zMFQxNDo1NTo0OVrOH7-zlg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0zMFQxNDo1NjoyMFrOH7-1GA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjY1NzA0Ng==", "bodyText": "Leftover", "url": "https://github.com/openhab/openhab-addons/pull/8574#discussion_r532657046", "createdAt": "2020-11-30T14:55:49Z", "author": {"login": "fwolter"}, "path": "bundles/org.openhab.binding.kostalinverter/src/main/java/org/openhab/binding/internal/kostal/inverter/secondgeneration/SecondGenerationHandler.java", "diffHunk": "@@ -282,6 +282,7 @@ private void refresh() throws InterruptedException, ExecutionException, TimeoutE\n             // Update the channels\n             if (state != null) {\n                 updateState(channel, state);\n+                System.out.println(channel + \"  \" + state);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fa08c346c95733b57361b68ced11b0e9dc0da8bc"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjY1NzQzMg==", "bodyText": "Thing Type IDs should be lower case.", "url": "https://github.com/openhab/openhab-addons/pull/8574#discussion_r532657432", "createdAt": "2020-11-30T14:56:20Z", "author": {"login": "fwolter"}, "path": "bundles/org.openhab.binding.kostalinverter/src/main/java/org/openhab/binding/internal/kostal/inverter/secondgeneration/SecondGenerationBindingConstants.java", "diffHunk": "@@ -29,8 +29,7 @@\n     private static final String BINDING_ID = \"kostalinverter\";\n \n     // List of all Thing Type UIDs\n-    public static final ThingTypeUID SECOND_GENERATION_INVERTER = new ThingTypeUID(BINDING_ID,\n-            \"kostalinverterpiko1020\");\n+    public static final ThingTypeUID SECOND_GENERATION_INVERTER = new ThingTypeUID(BINDING_ID, \"PIKO1020\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fa08c346c95733b57361b68ced11b0e9dc0da8bc"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f2b66c5d36a2dd73b9792966a188443295f1e02d", "author": {"user": {"login": "basse04", "name": null}}, "url": "https://github.com/openhab/openhab-addons/commit/f2b66c5d36a2dd73b9792966a188443295f1e02d", "committedDate": "2020-11-30T15:29:48Z", "message": "Binding redesigned 20201130 by \u00d6rjan Backsell\n\nSigned-off-by: basse04 <orjan.backsell@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1a18b5e53690dc09613d60c128a1bebeb225e70c", "author": {"user": {"login": "basse04", "name": null}}, "url": "https://github.com/openhab/openhab-addons/commit/1a18b5e53690dc09613d60c128a1bebeb225e70c", "committedDate": "2020-11-30T15:35:37Z", "message": "Binding redesigned 20201130, 1630 by \u00d6rjan Backsell\n\nSigned-off-by: basse04 <orjan.backsell@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQxMDQzNjE3", "url": "https://github.com/openhab/openhab-addons/pull/8574#pullrequestreview-541043617", "createdAt": "2020-11-30T15:54:19Z", "commit": {"oid": "1a18b5e53690dc09613d60c128a1bebeb225e70c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "826e70393cdd8fcb17fcca3f15ca77c8b074ce46", "author": {"user": {"login": "basse04", "name": null}}, "url": "https://github.com/openhab/openhab-addons/commit/826e70393cdd8fcb17fcca3f15ca77c8b074ce46", "committedDate": "2020-12-02T12:36:29Z", "message": "Binding redesigned 20201202 by \u00d6rjan Backsell\n\nSigned-off-by: basse04 <orjan.backsell@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d92edc3203de8bfc339d23d0355bbe0d594a6f6d", "author": {"user": {"login": "basse04", "name": null}}, "url": "https://github.com/openhab/openhab-addons/commit/d92edc3203de8bfc339d23d0355bbe0d594a6f6d", "committedDate": "2020-12-04T09:58:40Z", "message": "Binding redesigned 20201204 by \u00d6rjan Backsell\n\nSigned-off-by: basse04 <orjan.backsell@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ0ODc1OTY3", "url": "https://github.com/openhab/openhab-addons/pull/8574#pullrequestreview-544875967", "createdAt": "2020-12-04T11:26:17Z", "commit": {"oid": "d92edc3203de8bfc339d23d0355bbe0d594a6f6d"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQxMToyNjoxN1rOH_MuEQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQxMToyNjoxN1rOH_MuEQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjAzMDczNw==", "bodyText": "Words in labels should be capitalized (except prepositions and so on). See https://www.openhab.org/docs/developer/bindings/thing-xml.html#formatting-labels-and-descriptions", "url": "https://github.com/openhab/openhab-addons/pull/8574#discussion_r536030737", "createdAt": "2020-12-04T11:26:17Z", "author": {"login": "fwolter"}, "path": "bundles/org.openhab.binding.kostalinverter/src/main/resources/OH-INF/thing/Channels.xml", "diffHunk": "@@ -738,15 +738,15 @@\n \t</channel-type>\n \t<channel-type id=\"statistic-own-consumption-total\">\n \t\t<item-type>Number:Energy</item-type>\n-\t\t<label>Own Consumption Total</label>\n+\t\t<label>Total own consumption</label>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d92edc3203de8bfc339d23d0355bbe0d594a6f6d"}, "originalPosition": 48}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1a2a7fbea3a82064b4d45a8712ffc2a068b20fff", "author": {"user": {"login": "basse04", "name": null}}, "url": "https://github.com/openhab/openhab-addons/commit/1a2a7fbea3a82064b4d45a8712ffc2a068b20fff", "committedDate": "2020-12-04T12:43:51Z", "message": "Redesigned 20201204 by \u00d6rjan Backsell\n\nSigned-off-by: basse04 <orjan.backsell@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "67a057542756232dd64d9bc68ab10b53fff083f8", "author": {"user": {"login": "basse04", "name": null}}, "url": "https://github.com/openhab/openhab-addons/commit/67a057542756232dd64d9bc68ab10b53fff083f8", "committedDate": "2020-12-10T18:41:30Z", "message": "Binding redesigned 20201010 by \u00d6rjan Backsell\n\nSigned-off-by: basse04 <orjan.backsell@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "00424f4efbd96f09ee403ed6448dcfb186c6bc67", "author": {"user": {"login": "basse04", "name": null}}, "url": "https://github.com/openhab/openhab-addons/commit/00424f4efbd96f09ee403ed6448dcfb186c6bc67", "committedDate": "2021-01-12T10:30:47Z", "message": "Binding redesigned 20210112 by \u00d6rjan Backsell\n\n'\nSigned-off-by: basse04 orjan.backsell@gmail.com\nAlso-by: Christian Schneider <>\nAlso-by: Ren\u00e9 Stakemeier <>\nAlso-by: Christoph Weitkamp <>\n\nThis is the upgraded version of Kostal Inverter extended with\nfunctionality for the Inverter type of Second generation PIKO 10-20\n[kostalinverter]\n'\n\nSigned-off-by: basse04 <orjan.backsell@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d09fc9bb989736e2869b0caf021922d4f2e3345a", "author": {"user": {"login": "basse04", "name": null}}, "url": "https://github.com/openhab/openhab-addons/commit/d09fc9bb989736e2869b0caf021922d4f2e3345a", "committedDate": "2021-01-14T17:34:42Z", "message": "Binding redesigned 20210114 by \u00d6rjan Backsell\n\nSigned-off-by: basse04 <orjan.backsell@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b75c116a169a17773b28b675b27c9b3321a2a54b", "author": {"user": {"login": "basse04", "name": null}}, "url": "https://github.com/openhab/openhab-addons/commit/b75c116a169a17773b28b675b27c9b3321a2a54b", "committedDate": "2021-01-19T15:53:56Z", "message": "Binding redesigned 20210119 by \u00d6rjan Backsell\n\nSigned-off-by: basse04 <orjan.backsell@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4c4c5eedc17899a5b3835ce25a30ae72a07a75f3", "author": {"user": {"login": "basse04", "name": null}}, "url": "https://github.com/openhab/openhab-addons/commit/4c4c5eedc17899a5b3835ce25a30ae72a07a75f3", "committedDate": "2021-01-19T18:30:12Z", "message": "Binding (KostalInverterFactory.java)redesigned 20210119 by \u00d6rjan\nBacksell\n\nSigned-off-by: basse04 <orjan.backsell@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0fea81d2052dc7c645cfd79ebbe1da82a03c3213", "author": {"user": {"login": "basse04", "name": null}}, "url": "https://github.com/openhab/openhab-addons/commit/0fea81d2052dc7c645cfd79ebbe1da82a03c3213", "committedDate": "2021-01-20T09:09:16Z", "message": "Merge branch 'main' into main"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTcyMzg3NzE4", "url": "https://github.com/openhab/openhab-addons/pull/8574#pullrequestreview-572387718", "createdAt": "2021-01-20T16:12:12Z", "commit": {"oid": "0fea81d2052dc7c645cfd79ebbe1da82a03c3213"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0yMFQxNjoxMjoxMlrOIXGITQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0yMFQxNjo0NjoyMlrOIXH2RA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MTA4ODU4OQ==", "bodyText": "The field inverterConfig can be null at this point. To mitigate this, you can store the field to a local variable before checking it:\n\nFuture<?> localInverterConfig = inverterConfig;\nif (localInverterConfig != null) {\n    localInverterConfig .cancel(true);\n}\n\nThen, you can remove the supression.", "url": "https://github.com/openhab/openhab-addons/pull/8574#discussion_r561088589", "createdAt": "2021-01-20T16:12:12Z", "author": {"login": "fwolter"}, "path": "bundles/org.openhab.binding.kostalinverter/src/main/java/org/openhab/binding/kostalinverter/internal/secondgeneration/SecondGenerationHandler.java", "diffHunk": "@@ -0,0 +1,410 @@\n+/**\n+ * Copyright (c) 2010-2021 Contributors to the openHAB project\n+ *\n+ * See the NOTICE file(s) distributed with this work for additional\n+ * information.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+package org.openhab.binding.kostalinverter.internal.secondgeneration;\n+\n+import java.math.BigDecimal;\n+import java.util.ArrayList;\n+import java.util.Arrays;\n+import java.util.List;\n+import java.util.concurrent.ExecutionException;\n+import java.util.concurrent.ScheduledFuture;\n+import java.util.concurrent.TimeUnit;\n+import java.util.concurrent.TimeoutException;\n+\n+import javax.measure.Unit;\n+\n+import org.eclipse.jdt.annotation.NonNullByDefault;\n+import org.eclipse.jdt.annotation.Nullable;\n+import org.eclipse.jetty.client.HttpClient;\n+import org.openhab.core.library.types.OnOffType;\n+import org.openhab.core.library.types.QuantityType;\n+import org.openhab.core.library.types.StringType;\n+import org.openhab.core.thing.ChannelUID;\n+import org.openhab.core.thing.Thing;\n+import org.openhab.core.thing.ThingStatus;\n+import org.openhab.core.thing.ThingStatusDetail;\n+import org.openhab.core.thing.binding.BaseThingHandler;\n+import org.openhab.core.types.Command;\n+import org.openhab.core.types.State;\n+import org.openhab.core.types.UnDefType;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import com.google.gson.Gson;\n+import com.google.gson.GsonBuilder;\n+\n+/**\n+ * The {@link SecondGenerationHandler} is responsible for handling commands, which are\n+ * sent to one of the channels, and initiation and refreshing regarded to second generation part of the binding.\n+ *\n+ *\n+ * @author Christian Schneider - Initial contribution\n+ * @author Christoph Weitkamp - Incorporated new QuantityType (Units of Measurement)\n+ * @author \u00d6rjan Backsell - Redesigned regarding Piko1020, Piko New Generation\n+ */\n+@NonNullByDefault\n+public class SecondGenerationHandler extends BaseThingHandler {\n+\n+    private final Logger logger = LoggerFactory.getLogger(SecondGenerationHandler.class);\n+\n+    private @Nullable ScheduledFuture<?> secondGenerationPoller;\n+\n+    private final HttpClient httpClient;\n+\n+    private List<SecondGenerationChannelConfiguration> channelConfigs = new ArrayList<>();\n+    private List<SecondGenerationChannelConfiguration> channelConfigsExt = new ArrayList<>();\n+    private List<SecondGenerationChannelConfiguration> channelConfigsExtExt = new ArrayList<>();\n+    private List<SecondGenerationChannelConfiguration> channelConfigsConfigurable = new ArrayList<>();\n+    private List<SecondGenerationChannelConfiguration> channelConfigsAll = new ArrayList<>();\n+\n+    private @Nullable SecondGenerationInverterConfig inverterConfig;\n+\n+    private @Nullable Gson gson;\n+\n+    public SecondGenerationHandler(Thing thing, HttpClient httpClient) {\n+        super(thing);\n+        this.httpClient = httpClient;\n+    }\n+\n+    @SuppressWarnings(\"null\")\n+    @Override\n+    public void handleCommand(ChannelUID channelUID, Command command) {\n+        String url = inverterConfig.url;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0fea81d2052dc7c645cfd79ebbe1da82a03c3213"}, "originalPosition": 82}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MTA5MDA3OA==", "bodyText": "This exception is never thrown and can therefore be removed:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                static String extractSessionId(JsonObject extractJsonObjectSessionId) throws TimeoutException {\n          \n          \n            \n                static String extractSessionId(JsonObject extractJsonObjectSessionId) {", "url": "https://github.com/openhab/openhab-addons/pull/8574#discussion_r561090078", "createdAt": "2021-01-20T16:14:25Z", "author": {"login": "fwolter"}, "path": "bundles/org.openhab.binding.kostalinverter/src/main/java/org/openhab/binding/kostalinverter/internal/secondgeneration/SecondGenerationConfigurationHandler.java", "diffHunk": "@@ -0,0 +1,163 @@\n+/**\n+ * Copyright (c) 2010-2021 Contributors to the openHAB project\n+ *\n+ * See the NOTICE file(s) distributed with this work for additional\n+ * information.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+package org.openhab.binding.kostalinverter.internal.secondgeneration;\n+\n+import java.nio.charset.StandardCharsets;\n+import java.security.MessageDigest;\n+import java.security.NoSuchAlgorithmException;\n+import java.util.Base64;\n+import java.util.concurrent.ExecutionException;\n+import java.util.concurrent.TimeoutException;\n+\n+import org.eclipse.jdt.annotation.NonNullByDefault;\n+import org.eclipse.jetty.client.HttpClient;\n+import org.eclipse.jetty.client.api.ContentResponse;\n+import org.eclipse.jetty.client.api.Request;\n+import org.eclipse.jetty.client.util.StringContentProvider;\n+import org.eclipse.jetty.http.HttpHeader;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import com.google.gson.JsonArray;\n+import com.google.gson.JsonIOException;\n+import com.google.gson.JsonObject;\n+import com.google.gson.JsonParser;\n+\n+/**\n+ * The {@link SecondGenerationConfigurationHandler} is responsible for configuration changes,\n+ * regarded to second generation part of the binding.\n+ *\n+ * @author \u00d6rjan Backsell - Initial contribution Piko1020, Piko New Generation\n+ */\n+@NonNullByDefault\n+public class SecondGenerationConfigurationHandler {\n+\n+    public static void executeConfigurationChanges(HttpClient httpClient, String url, String username, String password,\n+            String dxsId, String value)\n+            throws InterruptedException, ExecutionException, TimeoutException, NoSuchAlgorithmException {\n+        String urlLogin = url + \"/api/login.json?\";\n+        String salt = \"\";\n+        String sessionId = \"\";\n+\n+        Logger logger = LoggerFactory.getLogger(SecondGenerationConfigurationHandler.class);\n+\n+        String getAuthenticateResponse = httpClient.GET(urlLogin).getContentAsString();\n+\n+        try {\n+            JsonObject getAuthenticateResponseJsonObject = (JsonObject) new JsonParser()\n+                    .parse(transformJsonResponse(getAuthenticateResponse));\n+\n+            sessionId = extractSessionId(getAuthenticateResponseJsonObject);\n+\n+            JsonObject authenticateJsonObject = new JsonParser().parse(getAuthenticateResponse.toString())\n+                    .getAsJsonObject();\n+            salt = authenticateJsonObject.get(\"salt\").getAsString();\n+\n+            String saltedPassword = new StringBuilder(password).append(salt).toString();\n+            MessageDigest mDigest = MessageDigest.getInstance(\"SHA1\");\n+\n+            byte[] mDigestedPassword = mDigest.digest(saltedPassword.getBytes(StandardCharsets.UTF_8));\n+            StringBuilder loginPostStringBuilder = new StringBuilder();\n+            for (int i = 0; i < mDigestedPassword.length; i++) {\n+                loginPostStringBuilder.append(Integer.toString((mDigestedPassword[i] & 0xff) + 0x100, 16).substring(1));\n+            }\n+            String saltedmDigestedPwd = Base64.getEncoder().encodeToString(mDigest.digest(saltedPassword.getBytes()));\n+\n+            String loginPostJsonData = \"{\\\"mode\\\":1,\\\"userId\\\":\\\"\" + username + \"\\\",\\\"pwh\\\":\\\"\" + saltedmDigestedPwd\n+                    + \"\\\"}\";\n+\n+            Request loginPostJsonResponse = httpClient.POST(urlLogin + \"?sessionId=\" + sessionId);\n+            loginPostJsonResponse.header(HttpHeader.CONTENT_TYPE, \"application/json\");\n+            loginPostJsonResponse.content(new StringContentProvider(loginPostJsonData));\n+            ContentResponse loginPostJsonDataContentResponse = loginPostJsonResponse.send();\n+\n+            String loginPostResponse = new String(loginPostJsonDataContentResponse.getContent(),\n+                    StandardCharsets.UTF_8);\n+\n+            JsonObject loginPostJsonObject = (JsonObject) new JsonParser()\n+                    .parse(transformJsonResponse(loginPostResponse));\n+\n+            sessionId = extractSessionId(loginPostJsonObject);\n+\n+            // Part for sending data to Inverter\n+            String postJsonData = \"{\\\"dxsEntries\\\":[{\\\"dxsId\\\":\" + dxsId + \",\\\"value\\\":\" + value + \"}]}\";\n+\n+            Request postJsonDataRequest = httpClient.POST(url + \"/api/dxs.json?sessionId=\" + sessionId);\n+            postJsonDataRequest.header(HttpHeader.CONTENT_TYPE, \"application/json\");\n+            postJsonDataRequest.content(new StringContentProvider(postJsonData));\n+            postJsonDataRequest.send();\n+        } catch (JsonIOException getAuthenticateResponseException) {\n+            logger.debug(\"Could not read the response: {}\", getAuthenticateResponseException.getMessage());\n+        }\n+    }\n+\n+    static String transformJsonResponse(String jsonResponse) {\n+        // Method transformJsonResponse converts response,due to missing [] in ContentResponse\n+        // postJsonDataContentResponse.\n+\n+        int sessionStartPosition = jsonResponse.indexOf(\"session\");\n+        int statusStartPosition = jsonResponse.indexOf(\"status\");\n+\n+        StringBuilder transformStringBuilder = new StringBuilder();\n+\n+        transformStringBuilder.append(jsonResponse);\n+\n+        transformStringBuilder.insert(sessionStartPosition + 9, '[');\n+        int roleIdStartPosition = jsonResponse.indexOf(\"roleId\");\n+        transformStringBuilder.insert(roleIdStartPosition + 11, ']');\n+\n+        transformStringBuilder.insert(statusStartPosition + 10, '[');\n+        int codeStartPosition = jsonResponse.indexOf(\"code\");\n+        transformStringBuilder.insert(codeStartPosition + 11, ']');\n+\n+        String transformJsonObject = transformStringBuilder.toString();\n+\n+        return transformJsonObject;\n+    }\n+\n+    // Method extractSessionId extracts sessionId from JsonObject\n+    static String extractSessionId(JsonObject extractJsonObjectSessionId) throws TimeoutException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0fea81d2052dc7c645cfd79ebbe1da82a03c3213"}, "originalPosition": 129}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MTA5MDM0NQ==", "bodyText": "See above.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                static String extractCode(JsonObject extractJsonObjectCode) throws TimeoutException {\n          \n          \n            \n                static String extractCode(JsonObject extractJsonObjectCode) {", "url": "https://github.com/openhab/openhab-addons/pull/8574#discussion_r561090345", "createdAt": "2021-01-20T16:14:41Z", "author": {"login": "fwolter"}, "path": "bundles/org.openhab.binding.kostalinverter/src/main/java/org/openhab/binding/kostalinverter/internal/secondgeneration/SecondGenerationConfigurationHandler.java", "diffHunk": "@@ -0,0 +1,163 @@\n+/**\n+ * Copyright (c) 2010-2021 Contributors to the openHAB project\n+ *\n+ * See the NOTICE file(s) distributed with this work for additional\n+ * information.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+package org.openhab.binding.kostalinverter.internal.secondgeneration;\n+\n+import java.nio.charset.StandardCharsets;\n+import java.security.MessageDigest;\n+import java.security.NoSuchAlgorithmException;\n+import java.util.Base64;\n+import java.util.concurrent.ExecutionException;\n+import java.util.concurrent.TimeoutException;\n+\n+import org.eclipse.jdt.annotation.NonNullByDefault;\n+import org.eclipse.jetty.client.HttpClient;\n+import org.eclipse.jetty.client.api.ContentResponse;\n+import org.eclipse.jetty.client.api.Request;\n+import org.eclipse.jetty.client.util.StringContentProvider;\n+import org.eclipse.jetty.http.HttpHeader;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import com.google.gson.JsonArray;\n+import com.google.gson.JsonIOException;\n+import com.google.gson.JsonObject;\n+import com.google.gson.JsonParser;\n+\n+/**\n+ * The {@link SecondGenerationConfigurationHandler} is responsible for configuration changes,\n+ * regarded to second generation part of the binding.\n+ *\n+ * @author \u00d6rjan Backsell - Initial contribution Piko1020, Piko New Generation\n+ */\n+@NonNullByDefault\n+public class SecondGenerationConfigurationHandler {\n+\n+    public static void executeConfigurationChanges(HttpClient httpClient, String url, String username, String password,\n+            String dxsId, String value)\n+            throws InterruptedException, ExecutionException, TimeoutException, NoSuchAlgorithmException {\n+        String urlLogin = url + \"/api/login.json?\";\n+        String salt = \"\";\n+        String sessionId = \"\";\n+\n+        Logger logger = LoggerFactory.getLogger(SecondGenerationConfigurationHandler.class);\n+\n+        String getAuthenticateResponse = httpClient.GET(urlLogin).getContentAsString();\n+\n+        try {\n+            JsonObject getAuthenticateResponseJsonObject = (JsonObject) new JsonParser()\n+                    .parse(transformJsonResponse(getAuthenticateResponse));\n+\n+            sessionId = extractSessionId(getAuthenticateResponseJsonObject);\n+\n+            JsonObject authenticateJsonObject = new JsonParser().parse(getAuthenticateResponse.toString())\n+                    .getAsJsonObject();\n+            salt = authenticateJsonObject.get(\"salt\").getAsString();\n+\n+            String saltedPassword = new StringBuilder(password).append(salt).toString();\n+            MessageDigest mDigest = MessageDigest.getInstance(\"SHA1\");\n+\n+            byte[] mDigestedPassword = mDigest.digest(saltedPassword.getBytes(StandardCharsets.UTF_8));\n+            StringBuilder loginPostStringBuilder = new StringBuilder();\n+            for (int i = 0; i < mDigestedPassword.length; i++) {\n+                loginPostStringBuilder.append(Integer.toString((mDigestedPassword[i] & 0xff) + 0x100, 16).substring(1));\n+            }\n+            String saltedmDigestedPwd = Base64.getEncoder().encodeToString(mDigest.digest(saltedPassword.getBytes()));\n+\n+            String loginPostJsonData = \"{\\\"mode\\\":1,\\\"userId\\\":\\\"\" + username + \"\\\",\\\"pwh\\\":\\\"\" + saltedmDigestedPwd\n+                    + \"\\\"}\";\n+\n+            Request loginPostJsonResponse = httpClient.POST(urlLogin + \"?sessionId=\" + sessionId);\n+            loginPostJsonResponse.header(HttpHeader.CONTENT_TYPE, \"application/json\");\n+            loginPostJsonResponse.content(new StringContentProvider(loginPostJsonData));\n+            ContentResponse loginPostJsonDataContentResponse = loginPostJsonResponse.send();\n+\n+            String loginPostResponse = new String(loginPostJsonDataContentResponse.getContent(),\n+                    StandardCharsets.UTF_8);\n+\n+            JsonObject loginPostJsonObject = (JsonObject) new JsonParser()\n+                    .parse(transformJsonResponse(loginPostResponse));\n+\n+            sessionId = extractSessionId(loginPostJsonObject);\n+\n+            // Part for sending data to Inverter\n+            String postJsonData = \"{\\\"dxsEntries\\\":[{\\\"dxsId\\\":\" + dxsId + \",\\\"value\\\":\" + value + \"}]}\";\n+\n+            Request postJsonDataRequest = httpClient.POST(url + \"/api/dxs.json?sessionId=\" + sessionId);\n+            postJsonDataRequest.header(HttpHeader.CONTENT_TYPE, \"application/json\");\n+            postJsonDataRequest.content(new StringContentProvider(postJsonData));\n+            postJsonDataRequest.send();\n+        } catch (JsonIOException getAuthenticateResponseException) {\n+            logger.debug(\"Could not read the response: {}\", getAuthenticateResponseException.getMessage());\n+        }\n+    }\n+\n+    static String transformJsonResponse(String jsonResponse) {\n+        // Method transformJsonResponse converts response,due to missing [] in ContentResponse\n+        // postJsonDataContentResponse.\n+\n+        int sessionStartPosition = jsonResponse.indexOf(\"session\");\n+        int statusStartPosition = jsonResponse.indexOf(\"status\");\n+\n+        StringBuilder transformStringBuilder = new StringBuilder();\n+\n+        transformStringBuilder.append(jsonResponse);\n+\n+        transformStringBuilder.insert(sessionStartPosition + 9, '[');\n+        int roleIdStartPosition = jsonResponse.indexOf(\"roleId\");\n+        transformStringBuilder.insert(roleIdStartPosition + 11, ']');\n+\n+        transformStringBuilder.insert(statusStartPosition + 10, '[');\n+        int codeStartPosition = jsonResponse.indexOf(\"code\");\n+        transformStringBuilder.insert(codeStartPosition + 11, ']');\n+\n+        String transformJsonObject = transformStringBuilder.toString();\n+\n+        return transformJsonObject;\n+    }\n+\n+    // Method extractSessionId extracts sessionId from JsonObject\n+    static String extractSessionId(JsonObject extractJsonObjectSessionId) throws TimeoutException {\n+\n+        Logger sessionIdLogger = LoggerFactory.getLogger(SecondGenerationConfigurationHandler.class);\n+        String extractSessionId = \"\";\n+        JsonArray extractJsonArraySessionId = extractJsonObjectSessionId.getAsJsonArray(\"session\");\n+\n+        int size = extractJsonArraySessionId.size();\n+        if (size > 0) {\n+            extractSessionId = extractJsonArraySessionId.get(size - 1).getAsJsonObject().get(\"sessionId\").getAsString();\n+        }\n+        if (extractSessionId == \"0\") {\n+            sessionIdLogger.debug(\" Login Post Json Reponse not OK! , inverter answered with sessionId like: {}\",\n+                    extractSessionId);\n+        }\n+        return extractSessionId;\n+    }\n+\n+    // Method extractCode extracts code from JsonObject\n+    static String extractCode(JsonObject extractJsonObjectCode) throws TimeoutException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0fea81d2052dc7c645cfd79ebbe1da82a03c3213"}, "originalPosition": 147}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MTA5MzE1NA==", "bodyText": "You might want to set the Thing offline when the connection fails.", "url": "https://github.com/openhab/openhab-addons/pull/8574#discussion_r561093154", "createdAt": "2021-01-20T16:16:27Z", "author": {"login": "fwolter"}, "path": "bundles/org.openhab.binding.kostalinverter/src/main/java/org/openhab/binding/kostalinverter/internal/secondgeneration/SecondGenerationHandler.java", "diffHunk": "@@ -0,0 +1,410 @@\n+/**\n+ * Copyright (c) 2010-2021 Contributors to the openHAB project\n+ *\n+ * See the NOTICE file(s) distributed with this work for additional\n+ * information.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+package org.openhab.binding.kostalinverter.internal.secondgeneration;\n+\n+import java.math.BigDecimal;\n+import java.util.ArrayList;\n+import java.util.Arrays;\n+import java.util.List;\n+import java.util.concurrent.ExecutionException;\n+import java.util.concurrent.ScheduledFuture;\n+import java.util.concurrent.TimeUnit;\n+import java.util.concurrent.TimeoutException;\n+\n+import javax.measure.Unit;\n+\n+import org.eclipse.jdt.annotation.NonNullByDefault;\n+import org.eclipse.jdt.annotation.Nullable;\n+import org.eclipse.jetty.client.HttpClient;\n+import org.openhab.core.library.types.OnOffType;\n+import org.openhab.core.library.types.QuantityType;\n+import org.openhab.core.library.types.StringType;\n+import org.openhab.core.thing.ChannelUID;\n+import org.openhab.core.thing.Thing;\n+import org.openhab.core.thing.ThingStatus;\n+import org.openhab.core.thing.ThingStatusDetail;\n+import org.openhab.core.thing.binding.BaseThingHandler;\n+import org.openhab.core.types.Command;\n+import org.openhab.core.types.State;\n+import org.openhab.core.types.UnDefType;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import com.google.gson.Gson;\n+import com.google.gson.GsonBuilder;\n+\n+/**\n+ * The {@link SecondGenerationHandler} is responsible for handling commands, which are\n+ * sent to one of the channels, and initiation and refreshing regarded to second generation part of the binding.\n+ *\n+ *\n+ * @author Christian Schneider - Initial contribution\n+ * @author Christoph Weitkamp - Incorporated new QuantityType (Units of Measurement)\n+ * @author \u00d6rjan Backsell - Redesigned regarding Piko1020, Piko New Generation\n+ */\n+@NonNullByDefault\n+public class SecondGenerationHandler extends BaseThingHandler {\n+\n+    private final Logger logger = LoggerFactory.getLogger(SecondGenerationHandler.class);\n+\n+    private @Nullable ScheduledFuture<?> secondGenerationPoller;\n+\n+    private final HttpClient httpClient;\n+\n+    private List<SecondGenerationChannelConfiguration> channelConfigs = new ArrayList<>();\n+    private List<SecondGenerationChannelConfiguration> channelConfigsExt = new ArrayList<>();\n+    private List<SecondGenerationChannelConfiguration> channelConfigsExtExt = new ArrayList<>();\n+    private List<SecondGenerationChannelConfiguration> channelConfigsConfigurable = new ArrayList<>();\n+    private List<SecondGenerationChannelConfiguration> channelConfigsAll = new ArrayList<>();\n+\n+    private @Nullable SecondGenerationInverterConfig inverterConfig;\n+\n+    private @Nullable Gson gson;\n+\n+    public SecondGenerationHandler(Thing thing, HttpClient httpClient) {\n+        super(thing);\n+        this.httpClient = httpClient;\n+    }\n+\n+    @SuppressWarnings(\"null\")\n+    @Override\n+    public void handleCommand(ChannelUID channelUID, Command command) {\n+        String url = inverterConfig.url;\n+        String username = inverterConfig.username;\n+        String password = inverterConfig.password;\n+        String valueConfiguration = \"\";\n+        String dxsEntriesConf = \"\";\n+\n+        if (inverterConfig.invertertype.equals(\"withBattery\")) {\n+            switch (channelUID.getId()) {\n+                case SecondGenerationBindingConstants.CHANNEL_BATTERYUSAGECONSUMPTIONSET:\n+                    valueConfiguration = command.toString();\n+                    dxsEntriesConf = \"33556249\";\n+                    preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                            valueConfiguration);\n+                    break;\n+                case SecondGenerationBindingConstants.CHANNEL_BATTERYUSAGESTRATEGYSET:\n+                    valueConfiguration = command.toString();\n+                    dxsEntriesConf = \"83888896\";\n+                    preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                            valueConfiguration);\n+                    break;\n+                case SecondGenerationBindingConstants.CHANNEL_SMARTBATTERYCONTROLSET:\n+                    if (command.toString().equals(\"ON\")) {\n+                        valueConfiguration = \"true\";\n+                    }\n+                    if (command.toString().equals(\"OFF\")) {\n+                        valueConfiguration = \"false\";\n+                    }\n+                    dxsEntriesConf = \"33556484\";\n+                    preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                            valueConfiguration);\n+                    break;\n+                case SecondGenerationBindingConstants.CHANNEL_BATTERYCHARGETIMEFROMSET:\n+                    valueConfiguration = command.toString();\n+                    String valueConfigurationFromTransformed = String.valueOf(stringToSeconds(valueConfiguration));\n+                    dxsEntriesConf = \"33556239\";\n+                    preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                            valueConfigurationFromTransformed);\n+                    break;\n+                case SecondGenerationBindingConstants.CHANNEL_BATTERYCHARGETIMETOSET:\n+                    valueConfiguration = command.toString();\n+                    String valueConfigurationToTransformed = String.valueOf(stringToSeconds(valueConfiguration));\n+                    dxsEntriesConf = \"33556240\";\n+                    preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                            valueConfigurationToTransformed);\n+                    break;\n+                case SecondGenerationBindingConstants.CHANNEL_MAXDEPTHOFDISCHARGESET:\n+                    valueConfiguration = command.toString();\n+                    dxsEntriesConf = \"33556247\";\n+                    preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                            valueConfiguration);\n+                    break;\n+                case SecondGenerationBindingConstants.CHANNEL_SHADOWMANAGEMENTSET:\n+                    valueConfiguration = command.toString();\n+                    dxsEntriesConf = \"33556483\";\n+                    preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                            valueConfiguration);\n+                    break;\n+                case SecondGenerationBindingConstants.CHANNEL_EXTERNALMODULECONTROLSET:\n+                    valueConfiguration = command.toString();\n+                    dxsEntriesConf = \"33556482\";\n+                    preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                            valueConfiguration);\n+                    break;\n+            }\n+        }\n+    }\n+\n+    @Override\n+    public void initialize() {\n+        // Set channel configuration parameters\n+        channelConfigs = SecondGenerationChannelConfiguration.getChannelConfiguration();\n+        channelConfigsExt = SecondGenerationChannelConfiguration.getChannelConfigurationExt();\n+        channelConfigsExtExt = SecondGenerationChannelConfiguration.getChannelConfigurationExtExt();\n+        channelConfigsConfigurable = SecondGenerationChannelConfiguration.getChannelConfigurationConfigurable();\n+\n+        // Set inverter configuration parameters\n+        final SecondGenerationInverterConfig inverterConfig = getConfigAs(SecondGenerationInverterConfig.class);\n+        this.inverterConfig = inverterConfig;\n+\n+        // Initialize Gson object gson\n+        final Gson gson = new GsonBuilder().setPrettyPrinting().create();\n+        this.gson = gson;\n+\n+        // Temporary value during initializing\n+        updateStatus(ThingStatus.UNKNOWN);\n+\n+        // Start update as configured\n+        secondGenerationPoller = scheduler.scheduleWithFixedDelay(() -> {\n+            try {\n+                refresh();\n+                updateStatus(ThingStatus.ONLINE);\n+            } catch (RuntimeException scheduleWithFixedDelayException) {\n+                updateStatus(ThingStatus.OFFLINE, ThingStatusDetail.COMMUNICATION_ERROR,\n+                        scheduleWithFixedDelayException.getClass().getName() + \":\"\n+                                + scheduleWithFixedDelayException.getMessage());\n+                logger.debug(\"Error when connecting to inverter, {}: {}\", getThing().getUID(),\n+                        scheduleWithFixedDelayException.getMessage());\n+            } catch (InterruptedException e) {\n+                logger.debug(\"Communication with inverter interrupted, exception {}\", e.getMessage());\n+            } catch (ExecutionException e) {\n+                logger.debug(\"Communication with inverter failed, exception {}\", e.getMessage());\n+            } catch (TimeoutException e) {\n+                logger.debug(\"Communication with inverter timed out, exception {}\", e.getMessage());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0fea81d2052dc7c645cfd79ebbe1da82a03c3213"}, "originalPosition": 184}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MTA5NDI5Mg==", "bodyText": "The log message could be removed, as the status update is already logged by the framework.\nThe state change originated by updateStatus() is logged to events.log. Including the status detail message.", "url": "https://github.com/openhab/openhab-addons/pull/8574#discussion_r561094292", "createdAt": "2021-01-20T16:17:11Z", "author": {"login": "fwolter"}, "path": "bundles/org.openhab.binding.kostalinverter/src/main/java/org/openhab/binding/kostalinverter/internal/secondgeneration/SecondGenerationHandler.java", "diffHunk": "@@ -0,0 +1,410 @@\n+/**\n+ * Copyright (c) 2010-2021 Contributors to the openHAB project\n+ *\n+ * See the NOTICE file(s) distributed with this work for additional\n+ * information.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+package org.openhab.binding.kostalinverter.internal.secondgeneration;\n+\n+import java.math.BigDecimal;\n+import java.util.ArrayList;\n+import java.util.Arrays;\n+import java.util.List;\n+import java.util.concurrent.ExecutionException;\n+import java.util.concurrent.ScheduledFuture;\n+import java.util.concurrent.TimeUnit;\n+import java.util.concurrent.TimeoutException;\n+\n+import javax.measure.Unit;\n+\n+import org.eclipse.jdt.annotation.NonNullByDefault;\n+import org.eclipse.jdt.annotation.Nullable;\n+import org.eclipse.jetty.client.HttpClient;\n+import org.openhab.core.library.types.OnOffType;\n+import org.openhab.core.library.types.QuantityType;\n+import org.openhab.core.library.types.StringType;\n+import org.openhab.core.thing.ChannelUID;\n+import org.openhab.core.thing.Thing;\n+import org.openhab.core.thing.ThingStatus;\n+import org.openhab.core.thing.ThingStatusDetail;\n+import org.openhab.core.thing.binding.BaseThingHandler;\n+import org.openhab.core.types.Command;\n+import org.openhab.core.types.State;\n+import org.openhab.core.types.UnDefType;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import com.google.gson.Gson;\n+import com.google.gson.GsonBuilder;\n+\n+/**\n+ * The {@link SecondGenerationHandler} is responsible for handling commands, which are\n+ * sent to one of the channels, and initiation and refreshing regarded to second generation part of the binding.\n+ *\n+ *\n+ * @author Christian Schneider - Initial contribution\n+ * @author Christoph Weitkamp - Incorporated new QuantityType (Units of Measurement)\n+ * @author \u00d6rjan Backsell - Redesigned regarding Piko1020, Piko New Generation\n+ */\n+@NonNullByDefault\n+public class SecondGenerationHandler extends BaseThingHandler {\n+\n+    private final Logger logger = LoggerFactory.getLogger(SecondGenerationHandler.class);\n+\n+    private @Nullable ScheduledFuture<?> secondGenerationPoller;\n+\n+    private final HttpClient httpClient;\n+\n+    private List<SecondGenerationChannelConfiguration> channelConfigs = new ArrayList<>();\n+    private List<SecondGenerationChannelConfiguration> channelConfigsExt = new ArrayList<>();\n+    private List<SecondGenerationChannelConfiguration> channelConfigsExtExt = new ArrayList<>();\n+    private List<SecondGenerationChannelConfiguration> channelConfigsConfigurable = new ArrayList<>();\n+    private List<SecondGenerationChannelConfiguration> channelConfigsAll = new ArrayList<>();\n+\n+    private @Nullable SecondGenerationInverterConfig inverterConfig;\n+\n+    private @Nullable Gson gson;\n+\n+    public SecondGenerationHandler(Thing thing, HttpClient httpClient) {\n+        super(thing);\n+        this.httpClient = httpClient;\n+    }\n+\n+    @SuppressWarnings(\"null\")\n+    @Override\n+    public void handleCommand(ChannelUID channelUID, Command command) {\n+        String url = inverterConfig.url;\n+        String username = inverterConfig.username;\n+        String password = inverterConfig.password;\n+        String valueConfiguration = \"\";\n+        String dxsEntriesConf = \"\";\n+\n+        if (inverterConfig.invertertype.equals(\"withBattery\")) {\n+            switch (channelUID.getId()) {\n+                case SecondGenerationBindingConstants.CHANNEL_BATTERYUSAGECONSUMPTIONSET:\n+                    valueConfiguration = command.toString();\n+                    dxsEntriesConf = \"33556249\";\n+                    preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                            valueConfiguration);\n+                    break;\n+                case SecondGenerationBindingConstants.CHANNEL_BATTERYUSAGESTRATEGYSET:\n+                    valueConfiguration = command.toString();\n+                    dxsEntriesConf = \"83888896\";\n+                    preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                            valueConfiguration);\n+                    break;\n+                case SecondGenerationBindingConstants.CHANNEL_SMARTBATTERYCONTROLSET:\n+                    if (command.toString().equals(\"ON\")) {\n+                        valueConfiguration = \"true\";\n+                    }\n+                    if (command.toString().equals(\"OFF\")) {\n+                        valueConfiguration = \"false\";\n+                    }\n+                    dxsEntriesConf = \"33556484\";\n+                    preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                            valueConfiguration);\n+                    break;\n+                case SecondGenerationBindingConstants.CHANNEL_BATTERYCHARGETIMEFROMSET:\n+                    valueConfiguration = command.toString();\n+                    String valueConfigurationFromTransformed = String.valueOf(stringToSeconds(valueConfiguration));\n+                    dxsEntriesConf = \"33556239\";\n+                    preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                            valueConfigurationFromTransformed);\n+                    break;\n+                case SecondGenerationBindingConstants.CHANNEL_BATTERYCHARGETIMETOSET:\n+                    valueConfiguration = command.toString();\n+                    String valueConfigurationToTransformed = String.valueOf(stringToSeconds(valueConfiguration));\n+                    dxsEntriesConf = \"33556240\";\n+                    preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                            valueConfigurationToTransformed);\n+                    break;\n+                case SecondGenerationBindingConstants.CHANNEL_MAXDEPTHOFDISCHARGESET:\n+                    valueConfiguration = command.toString();\n+                    dxsEntriesConf = \"33556247\";\n+                    preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                            valueConfiguration);\n+                    break;\n+                case SecondGenerationBindingConstants.CHANNEL_SHADOWMANAGEMENTSET:\n+                    valueConfiguration = command.toString();\n+                    dxsEntriesConf = \"33556483\";\n+                    preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                            valueConfiguration);\n+                    break;\n+                case SecondGenerationBindingConstants.CHANNEL_EXTERNALMODULECONTROLSET:\n+                    valueConfiguration = command.toString();\n+                    dxsEntriesConf = \"33556482\";\n+                    preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                            valueConfiguration);\n+                    break;\n+            }\n+        }\n+    }\n+\n+    @Override\n+    public void initialize() {\n+        // Set channel configuration parameters\n+        channelConfigs = SecondGenerationChannelConfiguration.getChannelConfiguration();\n+        channelConfigsExt = SecondGenerationChannelConfiguration.getChannelConfigurationExt();\n+        channelConfigsExtExt = SecondGenerationChannelConfiguration.getChannelConfigurationExtExt();\n+        channelConfigsConfigurable = SecondGenerationChannelConfiguration.getChannelConfigurationConfigurable();\n+\n+        // Set inverter configuration parameters\n+        final SecondGenerationInverterConfig inverterConfig = getConfigAs(SecondGenerationInverterConfig.class);\n+        this.inverterConfig = inverterConfig;\n+\n+        // Initialize Gson object gson\n+        final Gson gson = new GsonBuilder().setPrettyPrinting().create();\n+        this.gson = gson;\n+\n+        // Temporary value during initializing\n+        updateStatus(ThingStatus.UNKNOWN);\n+\n+        // Start update as configured\n+        secondGenerationPoller = scheduler.scheduleWithFixedDelay(() -> {\n+            try {\n+                refresh();\n+                updateStatus(ThingStatus.ONLINE);\n+            } catch (RuntimeException scheduleWithFixedDelayException) {\n+                updateStatus(ThingStatus.OFFLINE, ThingStatusDetail.COMMUNICATION_ERROR,\n+                        scheduleWithFixedDelayException.getClass().getName() + \":\"\n+                                + scheduleWithFixedDelayException.getMessage());\n+                logger.debug(\"Error when connecting to inverter, {}: {}\", getThing().getUID(),\n+                        scheduleWithFixedDelayException.getMessage());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0fea81d2052dc7c645cfd79ebbe1da82a03c3213"}, "originalPosition": 178}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MTA5Nzg3MA==", "bodyText": "You could initialize this in the constructor to get rid of the compiler warning about null values. You don't see them currently as you supressed them in refresh().", "url": "https://github.com/openhab/openhab-addons/pull/8574#discussion_r561097870", "createdAt": "2021-01-20T16:19:53Z", "author": {"login": "fwolter"}, "path": "bundles/org.openhab.binding.kostalinverter/src/main/java/org/openhab/binding/kostalinverter/internal/secondgeneration/SecondGenerationHandler.java", "diffHunk": "@@ -0,0 +1,410 @@\n+/**\n+ * Copyright (c) 2010-2021 Contributors to the openHAB project\n+ *\n+ * See the NOTICE file(s) distributed with this work for additional\n+ * information.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+package org.openhab.binding.kostalinverter.internal.secondgeneration;\n+\n+import java.math.BigDecimal;\n+import java.util.ArrayList;\n+import java.util.Arrays;\n+import java.util.List;\n+import java.util.concurrent.ExecutionException;\n+import java.util.concurrent.ScheduledFuture;\n+import java.util.concurrent.TimeUnit;\n+import java.util.concurrent.TimeoutException;\n+\n+import javax.measure.Unit;\n+\n+import org.eclipse.jdt.annotation.NonNullByDefault;\n+import org.eclipse.jdt.annotation.Nullable;\n+import org.eclipse.jetty.client.HttpClient;\n+import org.openhab.core.library.types.OnOffType;\n+import org.openhab.core.library.types.QuantityType;\n+import org.openhab.core.library.types.StringType;\n+import org.openhab.core.thing.ChannelUID;\n+import org.openhab.core.thing.Thing;\n+import org.openhab.core.thing.ThingStatus;\n+import org.openhab.core.thing.ThingStatusDetail;\n+import org.openhab.core.thing.binding.BaseThingHandler;\n+import org.openhab.core.types.Command;\n+import org.openhab.core.types.State;\n+import org.openhab.core.types.UnDefType;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import com.google.gson.Gson;\n+import com.google.gson.GsonBuilder;\n+\n+/**\n+ * The {@link SecondGenerationHandler} is responsible for handling commands, which are\n+ * sent to one of the channels, and initiation and refreshing regarded to second generation part of the binding.\n+ *\n+ *\n+ * @author Christian Schneider - Initial contribution\n+ * @author Christoph Weitkamp - Incorporated new QuantityType (Units of Measurement)\n+ * @author \u00d6rjan Backsell - Redesigned regarding Piko1020, Piko New Generation\n+ */\n+@NonNullByDefault\n+public class SecondGenerationHandler extends BaseThingHandler {\n+\n+    private final Logger logger = LoggerFactory.getLogger(SecondGenerationHandler.class);\n+\n+    private @Nullable ScheduledFuture<?> secondGenerationPoller;\n+\n+    private final HttpClient httpClient;\n+\n+    private List<SecondGenerationChannelConfiguration> channelConfigs = new ArrayList<>();\n+    private List<SecondGenerationChannelConfiguration> channelConfigsExt = new ArrayList<>();\n+    private List<SecondGenerationChannelConfiguration> channelConfigsExtExt = new ArrayList<>();\n+    private List<SecondGenerationChannelConfiguration> channelConfigsConfigurable = new ArrayList<>();\n+    private List<SecondGenerationChannelConfiguration> channelConfigsAll = new ArrayList<>();\n+\n+    private @Nullable SecondGenerationInverterConfig inverterConfig;\n+\n+    private @Nullable Gson gson;\n+\n+    public SecondGenerationHandler(Thing thing, HttpClient httpClient) {\n+        super(thing);\n+        this.httpClient = httpClient;\n+    }\n+\n+    @SuppressWarnings(\"null\")\n+    @Override\n+    public void handleCommand(ChannelUID channelUID, Command command) {\n+        String url = inverterConfig.url;\n+        String username = inverterConfig.username;\n+        String password = inverterConfig.password;\n+        String valueConfiguration = \"\";\n+        String dxsEntriesConf = \"\";\n+\n+        if (inverterConfig.invertertype.equals(\"withBattery\")) {\n+            switch (channelUID.getId()) {\n+                case SecondGenerationBindingConstants.CHANNEL_BATTERYUSAGECONSUMPTIONSET:\n+                    valueConfiguration = command.toString();\n+                    dxsEntriesConf = \"33556249\";\n+                    preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                            valueConfiguration);\n+                    break;\n+                case SecondGenerationBindingConstants.CHANNEL_BATTERYUSAGESTRATEGYSET:\n+                    valueConfiguration = command.toString();\n+                    dxsEntriesConf = \"83888896\";\n+                    preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                            valueConfiguration);\n+                    break;\n+                case SecondGenerationBindingConstants.CHANNEL_SMARTBATTERYCONTROLSET:\n+                    if (command.toString().equals(\"ON\")) {\n+                        valueConfiguration = \"true\";\n+                    }\n+                    if (command.toString().equals(\"OFF\")) {\n+                        valueConfiguration = \"false\";\n+                    }\n+                    dxsEntriesConf = \"33556484\";\n+                    preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                            valueConfiguration);\n+                    break;\n+                case SecondGenerationBindingConstants.CHANNEL_BATTERYCHARGETIMEFROMSET:\n+                    valueConfiguration = command.toString();\n+                    String valueConfigurationFromTransformed = String.valueOf(stringToSeconds(valueConfiguration));\n+                    dxsEntriesConf = \"33556239\";\n+                    preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                            valueConfigurationFromTransformed);\n+                    break;\n+                case SecondGenerationBindingConstants.CHANNEL_BATTERYCHARGETIMETOSET:\n+                    valueConfiguration = command.toString();\n+                    String valueConfigurationToTransformed = String.valueOf(stringToSeconds(valueConfiguration));\n+                    dxsEntriesConf = \"33556240\";\n+                    preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                            valueConfigurationToTransformed);\n+                    break;\n+                case SecondGenerationBindingConstants.CHANNEL_MAXDEPTHOFDISCHARGESET:\n+                    valueConfiguration = command.toString();\n+                    dxsEntriesConf = \"33556247\";\n+                    preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                            valueConfiguration);\n+                    break;\n+                case SecondGenerationBindingConstants.CHANNEL_SHADOWMANAGEMENTSET:\n+                    valueConfiguration = command.toString();\n+                    dxsEntriesConf = \"33556483\";\n+                    preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                            valueConfiguration);\n+                    break;\n+                case SecondGenerationBindingConstants.CHANNEL_EXTERNALMODULECONTROLSET:\n+                    valueConfiguration = command.toString();\n+                    dxsEntriesConf = \"33556482\";\n+                    preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                            valueConfiguration);\n+                    break;\n+            }\n+        }\n+    }\n+\n+    @Override\n+    public void initialize() {\n+        // Set channel configuration parameters\n+        channelConfigs = SecondGenerationChannelConfiguration.getChannelConfiguration();\n+        channelConfigsExt = SecondGenerationChannelConfiguration.getChannelConfigurationExt();\n+        channelConfigsExtExt = SecondGenerationChannelConfiguration.getChannelConfigurationExtExt();\n+        channelConfigsConfigurable = SecondGenerationChannelConfiguration.getChannelConfigurationConfigurable();\n+\n+        // Set inverter configuration parameters\n+        final SecondGenerationInverterConfig inverterConfig = getConfigAs(SecondGenerationInverterConfig.class);\n+        this.inverterConfig = inverterConfig;\n+\n+        // Initialize Gson object gson\n+        final Gson gson = new GsonBuilder().setPrettyPrinting().create();\n+        this.gson = gson;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0fea81d2052dc7c645cfd79ebbe1da82a03c3213"}, "originalPosition": 163}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MTA5OTE5OQ==", "bodyText": "This generates a compiler warning, which is currently suppressed. You could store inverterConfig to a local variable and do a null check on that to get rid of the warning.", "url": "https://github.com/openhab/openhab-addons/pull/8574#discussion_r561099199", "createdAt": "2021-01-20T16:21:51Z", "author": {"login": "fwolter"}, "path": "bundles/org.openhab.binding.kostalinverter/src/main/java/org/openhab/binding/kostalinverter/internal/secondgeneration/SecondGenerationHandler.java", "diffHunk": "@@ -0,0 +1,410 @@\n+/**\n+ * Copyright (c) 2010-2021 Contributors to the openHAB project\n+ *\n+ * See the NOTICE file(s) distributed with this work for additional\n+ * information.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+package org.openhab.binding.kostalinverter.internal.secondgeneration;\n+\n+import java.math.BigDecimal;\n+import java.util.ArrayList;\n+import java.util.Arrays;\n+import java.util.List;\n+import java.util.concurrent.ExecutionException;\n+import java.util.concurrent.ScheduledFuture;\n+import java.util.concurrent.TimeUnit;\n+import java.util.concurrent.TimeoutException;\n+\n+import javax.measure.Unit;\n+\n+import org.eclipse.jdt.annotation.NonNullByDefault;\n+import org.eclipse.jdt.annotation.Nullable;\n+import org.eclipse.jetty.client.HttpClient;\n+import org.openhab.core.library.types.OnOffType;\n+import org.openhab.core.library.types.QuantityType;\n+import org.openhab.core.library.types.StringType;\n+import org.openhab.core.thing.ChannelUID;\n+import org.openhab.core.thing.Thing;\n+import org.openhab.core.thing.ThingStatus;\n+import org.openhab.core.thing.ThingStatusDetail;\n+import org.openhab.core.thing.binding.BaseThingHandler;\n+import org.openhab.core.types.Command;\n+import org.openhab.core.types.State;\n+import org.openhab.core.types.UnDefType;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import com.google.gson.Gson;\n+import com.google.gson.GsonBuilder;\n+\n+/**\n+ * The {@link SecondGenerationHandler} is responsible for handling commands, which are\n+ * sent to one of the channels, and initiation and refreshing regarded to second generation part of the binding.\n+ *\n+ *\n+ * @author Christian Schneider - Initial contribution\n+ * @author Christoph Weitkamp - Incorporated new QuantityType (Units of Measurement)\n+ * @author \u00d6rjan Backsell - Redesigned regarding Piko1020, Piko New Generation\n+ */\n+@NonNullByDefault\n+public class SecondGenerationHandler extends BaseThingHandler {\n+\n+    private final Logger logger = LoggerFactory.getLogger(SecondGenerationHandler.class);\n+\n+    private @Nullable ScheduledFuture<?> secondGenerationPoller;\n+\n+    private final HttpClient httpClient;\n+\n+    private List<SecondGenerationChannelConfiguration> channelConfigs = new ArrayList<>();\n+    private List<SecondGenerationChannelConfiguration> channelConfigsExt = new ArrayList<>();\n+    private List<SecondGenerationChannelConfiguration> channelConfigsExtExt = new ArrayList<>();\n+    private List<SecondGenerationChannelConfiguration> channelConfigsConfigurable = new ArrayList<>();\n+    private List<SecondGenerationChannelConfiguration> channelConfigsAll = new ArrayList<>();\n+\n+    private @Nullable SecondGenerationInverterConfig inverterConfig;\n+\n+    private @Nullable Gson gson;\n+\n+    public SecondGenerationHandler(Thing thing, HttpClient httpClient) {\n+        super(thing);\n+        this.httpClient = httpClient;\n+    }\n+\n+    @SuppressWarnings(\"null\")\n+    @Override\n+    public void handleCommand(ChannelUID channelUID, Command command) {\n+        String url = inverterConfig.url;\n+        String username = inverterConfig.username;\n+        String password = inverterConfig.password;\n+        String valueConfiguration = \"\";\n+        String dxsEntriesConf = \"\";\n+\n+        if (inverterConfig.invertertype.equals(\"withBattery\")) {\n+            switch (channelUID.getId()) {\n+                case SecondGenerationBindingConstants.CHANNEL_BATTERYUSAGECONSUMPTIONSET:\n+                    valueConfiguration = command.toString();\n+                    dxsEntriesConf = \"33556249\";\n+                    preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                            valueConfiguration);\n+                    break;\n+                case SecondGenerationBindingConstants.CHANNEL_BATTERYUSAGESTRATEGYSET:\n+                    valueConfiguration = command.toString();\n+                    dxsEntriesConf = \"83888896\";\n+                    preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                            valueConfiguration);\n+                    break;\n+                case SecondGenerationBindingConstants.CHANNEL_SMARTBATTERYCONTROLSET:\n+                    if (command.toString().equals(\"ON\")) {\n+                        valueConfiguration = \"true\";\n+                    }\n+                    if (command.toString().equals(\"OFF\")) {\n+                        valueConfiguration = \"false\";\n+                    }\n+                    dxsEntriesConf = \"33556484\";\n+                    preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                            valueConfiguration);\n+                    break;\n+                case SecondGenerationBindingConstants.CHANNEL_BATTERYCHARGETIMEFROMSET:\n+                    valueConfiguration = command.toString();\n+                    String valueConfigurationFromTransformed = String.valueOf(stringToSeconds(valueConfiguration));\n+                    dxsEntriesConf = \"33556239\";\n+                    preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                            valueConfigurationFromTransformed);\n+                    break;\n+                case SecondGenerationBindingConstants.CHANNEL_BATTERYCHARGETIMETOSET:\n+                    valueConfiguration = command.toString();\n+                    String valueConfigurationToTransformed = String.valueOf(stringToSeconds(valueConfiguration));\n+                    dxsEntriesConf = \"33556240\";\n+                    preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                            valueConfigurationToTransformed);\n+                    break;\n+                case SecondGenerationBindingConstants.CHANNEL_MAXDEPTHOFDISCHARGESET:\n+                    valueConfiguration = command.toString();\n+                    dxsEntriesConf = \"33556247\";\n+                    preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                            valueConfiguration);\n+                    break;\n+                case SecondGenerationBindingConstants.CHANNEL_SHADOWMANAGEMENTSET:\n+                    valueConfiguration = command.toString();\n+                    dxsEntriesConf = \"33556483\";\n+                    preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                            valueConfiguration);\n+                    break;\n+                case SecondGenerationBindingConstants.CHANNEL_EXTERNALMODULECONTROLSET:\n+                    valueConfiguration = command.toString();\n+                    dxsEntriesConf = \"33556482\";\n+                    preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                            valueConfiguration);\n+                    break;\n+            }\n+        }\n+    }\n+\n+    @Override\n+    public void initialize() {\n+        // Set channel configuration parameters\n+        channelConfigs = SecondGenerationChannelConfiguration.getChannelConfiguration();\n+        channelConfigsExt = SecondGenerationChannelConfiguration.getChannelConfigurationExt();\n+        channelConfigsExtExt = SecondGenerationChannelConfiguration.getChannelConfigurationExtExt();\n+        channelConfigsConfigurable = SecondGenerationChannelConfiguration.getChannelConfigurationConfigurable();\n+\n+        // Set inverter configuration parameters\n+        final SecondGenerationInverterConfig inverterConfig = getConfigAs(SecondGenerationInverterConfig.class);\n+        this.inverterConfig = inverterConfig;\n+\n+        // Initialize Gson object gson\n+        final Gson gson = new GsonBuilder().setPrettyPrinting().create();\n+        this.gson = gson;\n+\n+        // Temporary value during initializing\n+        updateStatus(ThingStatus.UNKNOWN);\n+\n+        // Start update as configured\n+        secondGenerationPoller = scheduler.scheduleWithFixedDelay(() -> {\n+            try {\n+                refresh();\n+                updateStatus(ThingStatus.ONLINE);\n+            } catch (RuntimeException scheduleWithFixedDelayException) {\n+                updateStatus(ThingStatus.OFFLINE, ThingStatusDetail.COMMUNICATION_ERROR,\n+                        scheduleWithFixedDelayException.getClass().getName() + \":\"\n+                                + scheduleWithFixedDelayException.getMessage());\n+                logger.debug(\"Error when connecting to inverter, {}: {}\", getThing().getUID(),\n+                        scheduleWithFixedDelayException.getMessage());\n+            } catch (InterruptedException e) {\n+                logger.debug(\"Communication with inverter interrupted, exception {}\", e.getMessage());\n+            } catch (ExecutionException e) {\n+                logger.debug(\"Communication with inverter failed, exception {}\", e.getMessage());\n+            } catch (TimeoutException e) {\n+                logger.debug(\"Communication with inverter timed out, exception {}\", e.getMessage());\n+            }\n+        }, 0, SecondGenerationInverterConfig.REFRESHINTERVAL_SEC, TimeUnit.SECONDS);\n+    }\n+\n+    @Override\n+    public void dispose() {\n+        final ScheduledFuture<?> secondGenerationLocalPoller = secondGenerationPoller;\n+\n+        if (secondGenerationLocalPoller != null) {\n+            secondGenerationLocalPoller.cancel(true);\n+            secondGenerationPoller = null;\n+        }\n+    }\n+\n+    @SuppressWarnings({ \"null\", \"unchecked\" })\n+    private void refresh() throws InterruptedException, ExecutionException, TimeoutException {\n+        // dxsEntries part\n+        String dxsEntriesCall = inverterConfig.url.toString() + \"/api/dxs.json?dxsEntries=\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0fea81d2052dc7c645cfd79ebbe1da82a03c3213"}, "originalPosition": 202}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MTEwNDkwMA==", "bodyText": "Syntactical sugar. Same for the others.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    List<String> channelPostsTemp = new ArrayList<String>(Arrays.asList(channelPosts));\n          \n          \n            \n                    List<String> channelPostsTemp = List.of(channelPosts);", "url": "https://github.com/openhab/openhab-addons/pull/8574#discussion_r561104900", "createdAt": "2021-01-20T16:29:08Z", "author": {"login": "fwolter"}, "path": "bundles/org.openhab.binding.kostalinverter/src/main/java/org/openhab/binding/kostalinverter/internal/secondgeneration/SecondGenerationHandler.java", "diffHunk": "@@ -0,0 +1,410 @@\n+/**\n+ * Copyright (c) 2010-2021 Contributors to the openHAB project\n+ *\n+ * See the NOTICE file(s) distributed with this work for additional\n+ * information.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+package org.openhab.binding.kostalinverter.internal.secondgeneration;\n+\n+import java.math.BigDecimal;\n+import java.util.ArrayList;\n+import java.util.Arrays;\n+import java.util.List;\n+import java.util.concurrent.ExecutionException;\n+import java.util.concurrent.ScheduledFuture;\n+import java.util.concurrent.TimeUnit;\n+import java.util.concurrent.TimeoutException;\n+\n+import javax.measure.Unit;\n+\n+import org.eclipse.jdt.annotation.NonNullByDefault;\n+import org.eclipse.jdt.annotation.Nullable;\n+import org.eclipse.jetty.client.HttpClient;\n+import org.openhab.core.library.types.OnOffType;\n+import org.openhab.core.library.types.QuantityType;\n+import org.openhab.core.library.types.StringType;\n+import org.openhab.core.thing.ChannelUID;\n+import org.openhab.core.thing.Thing;\n+import org.openhab.core.thing.ThingStatus;\n+import org.openhab.core.thing.ThingStatusDetail;\n+import org.openhab.core.thing.binding.BaseThingHandler;\n+import org.openhab.core.types.Command;\n+import org.openhab.core.types.State;\n+import org.openhab.core.types.UnDefType;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import com.google.gson.Gson;\n+import com.google.gson.GsonBuilder;\n+\n+/**\n+ * The {@link SecondGenerationHandler} is responsible for handling commands, which are\n+ * sent to one of the channels, and initiation and refreshing regarded to second generation part of the binding.\n+ *\n+ *\n+ * @author Christian Schneider - Initial contribution\n+ * @author Christoph Weitkamp - Incorporated new QuantityType (Units of Measurement)\n+ * @author \u00d6rjan Backsell - Redesigned regarding Piko1020, Piko New Generation\n+ */\n+@NonNullByDefault\n+public class SecondGenerationHandler extends BaseThingHandler {\n+\n+    private final Logger logger = LoggerFactory.getLogger(SecondGenerationHandler.class);\n+\n+    private @Nullable ScheduledFuture<?> secondGenerationPoller;\n+\n+    private final HttpClient httpClient;\n+\n+    private List<SecondGenerationChannelConfiguration> channelConfigs = new ArrayList<>();\n+    private List<SecondGenerationChannelConfiguration> channelConfigsExt = new ArrayList<>();\n+    private List<SecondGenerationChannelConfiguration> channelConfigsExtExt = new ArrayList<>();\n+    private List<SecondGenerationChannelConfiguration> channelConfigsConfigurable = new ArrayList<>();\n+    private List<SecondGenerationChannelConfiguration> channelConfigsAll = new ArrayList<>();\n+\n+    private @Nullable SecondGenerationInverterConfig inverterConfig;\n+\n+    private @Nullable Gson gson;\n+\n+    public SecondGenerationHandler(Thing thing, HttpClient httpClient) {\n+        super(thing);\n+        this.httpClient = httpClient;\n+    }\n+\n+    @SuppressWarnings(\"null\")\n+    @Override\n+    public void handleCommand(ChannelUID channelUID, Command command) {\n+        String url = inverterConfig.url;\n+        String username = inverterConfig.username;\n+        String password = inverterConfig.password;\n+        String valueConfiguration = \"\";\n+        String dxsEntriesConf = \"\";\n+\n+        if (inverterConfig.invertertype.equals(\"withBattery\")) {\n+            switch (channelUID.getId()) {\n+                case SecondGenerationBindingConstants.CHANNEL_BATTERYUSAGECONSUMPTIONSET:\n+                    valueConfiguration = command.toString();\n+                    dxsEntriesConf = \"33556249\";\n+                    preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                            valueConfiguration);\n+                    break;\n+                case SecondGenerationBindingConstants.CHANNEL_BATTERYUSAGESTRATEGYSET:\n+                    valueConfiguration = command.toString();\n+                    dxsEntriesConf = \"83888896\";\n+                    preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                            valueConfiguration);\n+                    break;\n+                case SecondGenerationBindingConstants.CHANNEL_SMARTBATTERYCONTROLSET:\n+                    if (command.toString().equals(\"ON\")) {\n+                        valueConfiguration = \"true\";\n+                    }\n+                    if (command.toString().equals(\"OFF\")) {\n+                        valueConfiguration = \"false\";\n+                    }\n+                    dxsEntriesConf = \"33556484\";\n+                    preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                            valueConfiguration);\n+                    break;\n+                case SecondGenerationBindingConstants.CHANNEL_BATTERYCHARGETIMEFROMSET:\n+                    valueConfiguration = command.toString();\n+                    String valueConfigurationFromTransformed = String.valueOf(stringToSeconds(valueConfiguration));\n+                    dxsEntriesConf = \"33556239\";\n+                    preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                            valueConfigurationFromTransformed);\n+                    break;\n+                case SecondGenerationBindingConstants.CHANNEL_BATTERYCHARGETIMETOSET:\n+                    valueConfiguration = command.toString();\n+                    String valueConfigurationToTransformed = String.valueOf(stringToSeconds(valueConfiguration));\n+                    dxsEntriesConf = \"33556240\";\n+                    preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                            valueConfigurationToTransformed);\n+                    break;\n+                case SecondGenerationBindingConstants.CHANNEL_MAXDEPTHOFDISCHARGESET:\n+                    valueConfiguration = command.toString();\n+                    dxsEntriesConf = \"33556247\";\n+                    preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                            valueConfiguration);\n+                    break;\n+                case SecondGenerationBindingConstants.CHANNEL_SHADOWMANAGEMENTSET:\n+                    valueConfiguration = command.toString();\n+                    dxsEntriesConf = \"33556483\";\n+                    preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                            valueConfiguration);\n+                    break;\n+                case SecondGenerationBindingConstants.CHANNEL_EXTERNALMODULECONTROLSET:\n+                    valueConfiguration = command.toString();\n+                    dxsEntriesConf = \"33556482\";\n+                    preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                            valueConfiguration);\n+                    break;\n+            }\n+        }\n+    }\n+\n+    @Override\n+    public void initialize() {\n+        // Set channel configuration parameters\n+        channelConfigs = SecondGenerationChannelConfiguration.getChannelConfiguration();\n+        channelConfigsExt = SecondGenerationChannelConfiguration.getChannelConfigurationExt();\n+        channelConfigsExtExt = SecondGenerationChannelConfiguration.getChannelConfigurationExtExt();\n+        channelConfigsConfigurable = SecondGenerationChannelConfiguration.getChannelConfigurationConfigurable();\n+\n+        // Set inverter configuration parameters\n+        final SecondGenerationInverterConfig inverterConfig = getConfigAs(SecondGenerationInverterConfig.class);\n+        this.inverterConfig = inverterConfig;\n+\n+        // Initialize Gson object gson\n+        final Gson gson = new GsonBuilder().setPrettyPrinting().create();\n+        this.gson = gson;\n+\n+        // Temporary value during initializing\n+        updateStatus(ThingStatus.UNKNOWN);\n+\n+        // Start update as configured\n+        secondGenerationPoller = scheduler.scheduleWithFixedDelay(() -> {\n+            try {\n+                refresh();\n+                updateStatus(ThingStatus.ONLINE);\n+            } catch (RuntimeException scheduleWithFixedDelayException) {\n+                updateStatus(ThingStatus.OFFLINE, ThingStatusDetail.COMMUNICATION_ERROR,\n+                        scheduleWithFixedDelayException.getClass().getName() + \":\"\n+                                + scheduleWithFixedDelayException.getMessage());\n+                logger.debug(\"Error when connecting to inverter, {}: {}\", getThing().getUID(),\n+                        scheduleWithFixedDelayException.getMessage());\n+            } catch (InterruptedException e) {\n+                logger.debug(\"Communication with inverter interrupted, exception {}\", e.getMessage());\n+            } catch (ExecutionException e) {\n+                logger.debug(\"Communication with inverter failed, exception {}\", e.getMessage());\n+            } catch (TimeoutException e) {\n+                logger.debug(\"Communication with inverter timed out, exception {}\", e.getMessage());\n+            }\n+        }, 0, SecondGenerationInverterConfig.REFRESHINTERVAL_SEC, TimeUnit.SECONDS);\n+    }\n+\n+    @Override\n+    public void dispose() {\n+        final ScheduledFuture<?> secondGenerationLocalPoller = secondGenerationPoller;\n+\n+        if (secondGenerationLocalPoller != null) {\n+            secondGenerationLocalPoller.cancel(true);\n+            secondGenerationPoller = null;\n+        }\n+    }\n+\n+    @SuppressWarnings({ \"null\", \"unchecked\" })\n+    private void refresh() throws InterruptedException, ExecutionException, TimeoutException {\n+        // dxsEntries part\n+        String dxsEntriesCall = inverterConfig.url.toString() + \"/api/dxs.json?dxsEntries=\"\n+                + channelConfigs.get(0).dxsEntries;\n+        for (int i = 1; i < channelConfigs.size(); i++) {\n+            dxsEntriesCall += (\"&dxsEntries=\" + channelConfigs.get(i).dxsEntries);\n+        }\n+        String jsonDxsEntriesResponse = callURL(dxsEntriesCall);\n+        SecondGenerationDxsEntriesContainerDTO dxsEntriesContainer = gson.fromJson(jsonDxsEntriesResponse,\n+                SecondGenerationDxsEntriesContainerDTO.class);\n+\n+        String[] channelPosts = new String[23];\n+        int channelPostsCounter = 0;\n+        for (SecondGenerationDxsEntries dxsentries : dxsEntriesContainer.dxsEntries) {\n+            channelPosts[channelPostsCounter] = dxsentries.getName();\n+            channelPostsCounter++;\n+        }\n+        List<String> channelPostsTemp = new ArrayList<String>(Arrays.asList(channelPosts));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0fea81d2052dc7c645cfd79ebbe1da82a03c3213"}, "originalPosition": 217}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MTEwNTM4MQ==", "bodyText": "toString() is called implicitly and could therefore be removed. Please check all.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    String dxsEntriesCallExt = inverterConfig.url.toString() + \"/api/dxs.json?dxsEntries=\"\n          \n          \n            \n                    String dxsEntriesCallExt = inverterConfig.url + \"/api/dxs.json?dxsEntries=\"", "url": "https://github.com/openhab/openhab-addons/pull/8574#discussion_r561105381", "createdAt": "2021-01-20T16:29:50Z", "author": {"login": "fwolter"}, "path": "bundles/org.openhab.binding.kostalinverter/src/main/java/org/openhab/binding/kostalinverter/internal/secondgeneration/SecondGenerationHandler.java", "diffHunk": "@@ -0,0 +1,410 @@\n+/**\n+ * Copyright (c) 2010-2021 Contributors to the openHAB project\n+ *\n+ * See the NOTICE file(s) distributed with this work for additional\n+ * information.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+package org.openhab.binding.kostalinverter.internal.secondgeneration;\n+\n+import java.math.BigDecimal;\n+import java.util.ArrayList;\n+import java.util.Arrays;\n+import java.util.List;\n+import java.util.concurrent.ExecutionException;\n+import java.util.concurrent.ScheduledFuture;\n+import java.util.concurrent.TimeUnit;\n+import java.util.concurrent.TimeoutException;\n+\n+import javax.measure.Unit;\n+\n+import org.eclipse.jdt.annotation.NonNullByDefault;\n+import org.eclipse.jdt.annotation.Nullable;\n+import org.eclipse.jetty.client.HttpClient;\n+import org.openhab.core.library.types.OnOffType;\n+import org.openhab.core.library.types.QuantityType;\n+import org.openhab.core.library.types.StringType;\n+import org.openhab.core.thing.ChannelUID;\n+import org.openhab.core.thing.Thing;\n+import org.openhab.core.thing.ThingStatus;\n+import org.openhab.core.thing.ThingStatusDetail;\n+import org.openhab.core.thing.binding.BaseThingHandler;\n+import org.openhab.core.types.Command;\n+import org.openhab.core.types.State;\n+import org.openhab.core.types.UnDefType;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import com.google.gson.Gson;\n+import com.google.gson.GsonBuilder;\n+\n+/**\n+ * The {@link SecondGenerationHandler} is responsible for handling commands, which are\n+ * sent to one of the channels, and initiation and refreshing regarded to second generation part of the binding.\n+ *\n+ *\n+ * @author Christian Schneider - Initial contribution\n+ * @author Christoph Weitkamp - Incorporated new QuantityType (Units of Measurement)\n+ * @author \u00d6rjan Backsell - Redesigned regarding Piko1020, Piko New Generation\n+ */\n+@NonNullByDefault\n+public class SecondGenerationHandler extends BaseThingHandler {\n+\n+    private final Logger logger = LoggerFactory.getLogger(SecondGenerationHandler.class);\n+\n+    private @Nullable ScheduledFuture<?> secondGenerationPoller;\n+\n+    private final HttpClient httpClient;\n+\n+    private List<SecondGenerationChannelConfiguration> channelConfigs = new ArrayList<>();\n+    private List<SecondGenerationChannelConfiguration> channelConfigsExt = new ArrayList<>();\n+    private List<SecondGenerationChannelConfiguration> channelConfigsExtExt = new ArrayList<>();\n+    private List<SecondGenerationChannelConfiguration> channelConfigsConfigurable = new ArrayList<>();\n+    private List<SecondGenerationChannelConfiguration> channelConfigsAll = new ArrayList<>();\n+\n+    private @Nullable SecondGenerationInverterConfig inverterConfig;\n+\n+    private @Nullable Gson gson;\n+\n+    public SecondGenerationHandler(Thing thing, HttpClient httpClient) {\n+        super(thing);\n+        this.httpClient = httpClient;\n+    }\n+\n+    @SuppressWarnings(\"null\")\n+    @Override\n+    public void handleCommand(ChannelUID channelUID, Command command) {\n+        String url = inverterConfig.url;\n+        String username = inverterConfig.username;\n+        String password = inverterConfig.password;\n+        String valueConfiguration = \"\";\n+        String dxsEntriesConf = \"\";\n+\n+        if (inverterConfig.invertertype.equals(\"withBattery\")) {\n+            switch (channelUID.getId()) {\n+                case SecondGenerationBindingConstants.CHANNEL_BATTERYUSAGECONSUMPTIONSET:\n+                    valueConfiguration = command.toString();\n+                    dxsEntriesConf = \"33556249\";\n+                    preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                            valueConfiguration);\n+                    break;\n+                case SecondGenerationBindingConstants.CHANNEL_BATTERYUSAGESTRATEGYSET:\n+                    valueConfiguration = command.toString();\n+                    dxsEntriesConf = \"83888896\";\n+                    preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                            valueConfiguration);\n+                    break;\n+                case SecondGenerationBindingConstants.CHANNEL_SMARTBATTERYCONTROLSET:\n+                    if (command.toString().equals(\"ON\")) {\n+                        valueConfiguration = \"true\";\n+                    }\n+                    if (command.toString().equals(\"OFF\")) {\n+                        valueConfiguration = \"false\";\n+                    }\n+                    dxsEntriesConf = \"33556484\";\n+                    preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                            valueConfiguration);\n+                    break;\n+                case SecondGenerationBindingConstants.CHANNEL_BATTERYCHARGETIMEFROMSET:\n+                    valueConfiguration = command.toString();\n+                    String valueConfigurationFromTransformed = String.valueOf(stringToSeconds(valueConfiguration));\n+                    dxsEntriesConf = \"33556239\";\n+                    preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                            valueConfigurationFromTransformed);\n+                    break;\n+                case SecondGenerationBindingConstants.CHANNEL_BATTERYCHARGETIMETOSET:\n+                    valueConfiguration = command.toString();\n+                    String valueConfigurationToTransformed = String.valueOf(stringToSeconds(valueConfiguration));\n+                    dxsEntriesConf = \"33556240\";\n+                    preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                            valueConfigurationToTransformed);\n+                    break;\n+                case SecondGenerationBindingConstants.CHANNEL_MAXDEPTHOFDISCHARGESET:\n+                    valueConfiguration = command.toString();\n+                    dxsEntriesConf = \"33556247\";\n+                    preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                            valueConfiguration);\n+                    break;\n+                case SecondGenerationBindingConstants.CHANNEL_SHADOWMANAGEMENTSET:\n+                    valueConfiguration = command.toString();\n+                    dxsEntriesConf = \"33556483\";\n+                    preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                            valueConfiguration);\n+                    break;\n+                case SecondGenerationBindingConstants.CHANNEL_EXTERNALMODULECONTROLSET:\n+                    valueConfiguration = command.toString();\n+                    dxsEntriesConf = \"33556482\";\n+                    preSetExecuteConfigurationChanges(httpClient, url, username, password, dxsEntriesConf,\n+                            valueConfiguration);\n+                    break;\n+            }\n+        }\n+    }\n+\n+    @Override\n+    public void initialize() {\n+        // Set channel configuration parameters\n+        channelConfigs = SecondGenerationChannelConfiguration.getChannelConfiguration();\n+        channelConfigsExt = SecondGenerationChannelConfiguration.getChannelConfigurationExt();\n+        channelConfigsExtExt = SecondGenerationChannelConfiguration.getChannelConfigurationExtExt();\n+        channelConfigsConfigurable = SecondGenerationChannelConfiguration.getChannelConfigurationConfigurable();\n+\n+        // Set inverter configuration parameters\n+        final SecondGenerationInverterConfig inverterConfig = getConfigAs(SecondGenerationInverterConfig.class);\n+        this.inverterConfig = inverterConfig;\n+\n+        // Initialize Gson object gson\n+        final Gson gson = new GsonBuilder().setPrettyPrinting().create();\n+        this.gson = gson;\n+\n+        // Temporary value during initializing\n+        updateStatus(ThingStatus.UNKNOWN);\n+\n+        // Start update as configured\n+        secondGenerationPoller = scheduler.scheduleWithFixedDelay(() -> {\n+            try {\n+                refresh();\n+                updateStatus(ThingStatus.ONLINE);\n+            } catch (RuntimeException scheduleWithFixedDelayException) {\n+                updateStatus(ThingStatus.OFFLINE, ThingStatusDetail.COMMUNICATION_ERROR,\n+                        scheduleWithFixedDelayException.getClass().getName() + \":\"\n+                                + scheduleWithFixedDelayException.getMessage());\n+                logger.debug(\"Error when connecting to inverter, {}: {}\", getThing().getUID(),\n+                        scheduleWithFixedDelayException.getMessage());\n+            } catch (InterruptedException e) {\n+                logger.debug(\"Communication with inverter interrupted, exception {}\", e.getMessage());\n+            } catch (ExecutionException e) {\n+                logger.debug(\"Communication with inverter failed, exception {}\", e.getMessage());\n+            } catch (TimeoutException e) {\n+                logger.debug(\"Communication with inverter timed out, exception {}\", e.getMessage());\n+            }\n+        }, 0, SecondGenerationInverterConfig.REFRESHINTERVAL_SEC, TimeUnit.SECONDS);\n+    }\n+\n+    @Override\n+    public void dispose() {\n+        final ScheduledFuture<?> secondGenerationLocalPoller = secondGenerationPoller;\n+\n+        if (secondGenerationLocalPoller != null) {\n+            secondGenerationLocalPoller.cancel(true);\n+            secondGenerationPoller = null;\n+        }\n+    }\n+\n+    @SuppressWarnings({ \"null\", \"unchecked\" })\n+    private void refresh() throws InterruptedException, ExecutionException, TimeoutException {\n+        // dxsEntries part\n+        String dxsEntriesCall = inverterConfig.url.toString() + \"/api/dxs.json?dxsEntries=\"\n+                + channelConfigs.get(0).dxsEntries;\n+        for (int i = 1; i < channelConfigs.size(); i++) {\n+            dxsEntriesCall += (\"&dxsEntries=\" + channelConfigs.get(i).dxsEntries);\n+        }\n+        String jsonDxsEntriesResponse = callURL(dxsEntriesCall);\n+        SecondGenerationDxsEntriesContainerDTO dxsEntriesContainer = gson.fromJson(jsonDxsEntriesResponse,\n+                SecondGenerationDxsEntriesContainerDTO.class);\n+\n+        String[] channelPosts = new String[23];\n+        int channelPostsCounter = 0;\n+        for (SecondGenerationDxsEntries dxsentries : dxsEntriesContainer.dxsEntries) {\n+            channelPosts[channelPostsCounter] = dxsentries.getName();\n+            channelPostsCounter++;\n+        }\n+        List<String> channelPostsTemp = new ArrayList<String>(Arrays.asList(channelPosts));\n+\n+        // dxsEntriesExt part\n+        String dxsEntriesCallExt = inverterConfig.url.toString() + \"/api/dxs.json?dxsEntries=\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0fea81d2052dc7c645cfd79ebbe1da82a03c3213"}, "originalPosition": 220}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MTEwOTAyNQ==", "bodyText": "If I see correctly this is a URL and not a hostname.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\t<context>network-address</context>\n          \n          \n            \n            \t\t\t<context>url</context>", "url": "https://github.com/openhab/openhab-addons/pull/8574#discussion_r561109025", "createdAt": "2021-01-20T16:35:08Z", "author": {"login": "fwolter"}, "path": "bundles/org.openhab.binding.kostalinverter/src/main/resources/OH-INF/config/SecondGeneration.xml", "diffHunk": "@@ -0,0 +1,31 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<config-description:config-descriptions\n+\txmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+\txmlns:config-description=\"https://openhab.org/schemas/config-description/v1.0.0\"\n+\txsi:schemaLocation=\"https://openhab.org/schemas/config-description/v1.0.0 https://openhab.org/schemas/config-description-1.0.0.xsd\">\n+\t<config-description uri=\"thing-type:kostalpiko1020_config\">\n+\t\t<parameter name=\"url\" type=\"text\" required=\"true\">\n+\t\t\t<label> IP Address</label>\n+\t\t\t<description>IP address of the inverter.</description>\n+\t\t\t<context>network-address</context>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0fea81d2052dc7c645cfd79ebbe1da82a03c3213"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MTExMDIzOQ==", "bodyText": "Why not make this a boolean hasBattery?", "url": "https://github.com/openhab/openhab-addons/pull/8574#discussion_r561110239", "createdAt": "2021-01-20T16:36:54Z", "author": {"login": "fwolter"}, "path": "bundles/org.openhab.binding.kostalinverter/src/main/resources/OH-INF/config/SecondGeneration.xml", "diffHunk": "@@ -0,0 +1,31 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<config-description:config-descriptions\n+\txmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+\txmlns:config-description=\"https://openhab.org/schemas/config-description/v1.0.0\"\n+\txsi:schemaLocation=\"https://openhab.org/schemas/config-description/v1.0.0 https://openhab.org/schemas/config-description-1.0.0.xsd\">\n+\t<config-description uri=\"thing-type:kostalpiko1020_config\">\n+\t\t<parameter name=\"url\" type=\"text\" required=\"true\">\n+\t\t\t<label> IP Address</label>\n+\t\t\t<description>IP address of the inverter.</description>\n+\t\t\t<context>network-address</context>\n+\t\t</parameter>\n+\t\t<parameter name=\"username\" type=\"text\" required=\"true\">\n+\t\t\t<label>Username</label>\n+\t\t\t<description>The username to the inverter.</description>\n+\t\t</parameter>\n+\t\t<parameter name=\"password\" type=\"text\" required=\"true\">\n+\t\t\t<label>Password</label>\n+\t\t\t<description>The password to the inverter.</description>\n+\t\t\t<context>password</context>\n+\t\t</parameter>\n+\t\t<parameter name=\"refreshInterval\" type=\"integer\" min=\"1\" unit=\"s\" required=\"true\">\n+\t\t\t<label>Refresh Interval</label>\n+\t\t\t<description>Refresh Interval in seconds.</description>\n+\t\t\t<default>60</default>\n+\t\t</parameter>\n+\t\t<parameter name=\"invertertype\" type=\"text\" required=\"true\">\n+\t\t\t<label>Inverter Typel</label>\n+\t\t\t<description>Type of inverter, with/without battery.</description>\n+\t\t</parameter>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0fea81d2052dc7c645cfd79ebbe1da82a03c3213"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MTExMDg3OQ==", "bodyText": "Labels are expected to be as short as possible. Guideline is 2-3 words with max 20-25 chars. See https://www.openhab.org/docs/developer/bindings/thing-xml.html#formatting-labels-and-descriptions", "url": "https://github.com/openhab/openhab-addons/pull/8574#discussion_r561110879", "createdAt": "2021-01-20T16:37:47Z", "author": {"login": "fwolter"}, "path": "bundles/org.openhab.binding.kostalinverter/src/main/resources/OH-INF/thing/Channels.xml", "diffHunk": "@@ -484,4 +484,438 @@\n \t\t<category>Energy</category>\n \t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n \t</channel-type>\n+\t<channel-type id=\"device-local-grid-output-power\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>Grid Output Power</label>\n+\t\t<description>Current output power to the grid</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"statistic-yield-day-second-gen\">\n+\t\t<item-type>Number:Energy</item-type>\n+\t\t<label>Yield Day</label>\n+\t\t<description>Total produced power today</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"statistic-yield-total-second-gen\">\n+\t\t<item-type>Number:Energy</item-type>\n+\t\t<label>Yield Total</label>\n+\t\t<description>Total produced power</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-operating-status\">\n+\t\t<item-type>Number:Dimensionless</item-type>\n+\t\t<label>Operating Status</label>\n+\t\t<description>Operating status</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%d\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-grid-voltage-l1\">\n+\t\t<item-type>Number:ElectricPotential</item-type>\n+\t\t<label>Grid Voltage L1</label>\n+\t\t<description>Current output voltage to the grid, L1</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-grid-current-l1\">\n+\t\t<item-type>Number:ElectricCurrent</item-type>\n+\t\t<label>Grid Current L1</label>\n+\t\t<description>Current output current to the grid, L1</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f  %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-grid-power-l1\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>Grid Power L1</label>\n+\t\t<description>Current output power to the grid, L1</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-grid-voltage-l2\">\n+\t\t<item-type>Number:ElectricPotential</item-type>\n+\t\t<label>Grid Voltage L2</label>\n+\t\t<description>Current output voltage to the grid, L2</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-grid-current-l2\">\n+\t\t<item-type>Number:ElectricCurrent</item-type>\n+\t\t<label>Grid Current L2</label>\n+\t\t<description>Current output current to the grid, L2</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-grid-power-l2\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>Grid Power L2</label>\n+\t\t<description>Current output power to the grid, L2</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-grid-voltage-l3\">\n+\t\t<item-type>Number:ElectricPotential</item-type>\n+\t\t<label>Grid Voltage L3</label>\n+\t\t<description>Current output voltage to the grid, L3</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-grid-current-l3\">\n+\t\t<item-type>Number:ElectricCurrent</item-type>\n+\t\t<label>Grid Current L3</label>\n+\t\t<description>Current output current to the grid, L3</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-grid-power-l3\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>Grid Power L3</label>\n+\t\t<description>Current output power to the grid, L3</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-dc-power-pv\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>DC Power PV</label>\n+\t\t<description>Current power from all solar panels</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-dc1-voltage\">\n+\t\t<item-type>Number:ElectricPotential</item-type>\n+\t\t<label>DC1 Voltage</label>\n+\t\t<description>Current voltage from solar panels, DC1</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-dc1-current\">\n+\t\t<item-type>Number:ElectricCurrent</item-type>\n+\t\t<label>DC1 Current</label>\n+\t\t<description>Current current from solar panels, DC1</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-dc1-power\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>DC1 Power</label>\n+\t\t<description>Current power from solar panels, DC1</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-dc2-voltage\">\n+\t\t<item-type>Number:ElectricPotential</item-type>\n+\t\t<label>DC2 Voltage</label>\n+\t\t<description>Current voltage from solar panels, DC2</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-dc2-current\">\n+\t\t<item-type>Number:ElectricCurrent</item-type>\n+\t\t<label>DC2 Current</label>\n+\t\t<description>Current current from solar panels, DC2</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-dc2-power\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>DC2 Power</label>\n+\t\t<description>Current power from solar panels, DC2</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-dc3-voltage\">\n+\t\t<item-type>Number:ElectricPotential</item-type>\n+\t\t<label>DC3 Voltage</label>\n+\t\t<description>Current voltage from solar panels, DC3</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-dc3-current\">\n+\t\t<item-type>Number:ElectricCurrent</item-type>\n+\t\t<label>DC3 Current</label>\n+\t\t<description>Current current from solar panels, DC3</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-dc3-power\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>DC3 Power</label>\n+\t\t<description>Current power from solar panels, DC3</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-akt-home-consumption-solar\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>Actual Home Consumption Solar</label>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0fea81d2052dc7c645cfd79ebbe1da82a03c3213"}, "originalPosition": 167}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MTExMTQ3Mw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t<label>Max Depth Of Discharge</label>\n          \n          \n            \n            \t\t<label>Max Depth of Discharge</label>", "url": "https://github.com/openhab/openhab-addons/pull/8574#discussion_r561111473", "createdAt": "2021-01-20T16:38:39Z", "author": {"login": "fwolter"}, "path": "bundles/org.openhab.binding.kostalinverter/src/main/resources/OH-INF/thing/Channels.xml", "diffHunk": "@@ -484,4 +484,438 @@\n \t\t<category>Energy</category>\n \t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n \t</channel-type>\n+\t<channel-type id=\"device-local-grid-output-power\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>Grid Output Power</label>\n+\t\t<description>Current output power to the grid</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"statistic-yield-day-second-gen\">\n+\t\t<item-type>Number:Energy</item-type>\n+\t\t<label>Yield Day</label>\n+\t\t<description>Total produced power today</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"statistic-yield-total-second-gen\">\n+\t\t<item-type>Number:Energy</item-type>\n+\t\t<label>Yield Total</label>\n+\t\t<description>Total produced power</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-operating-status\">\n+\t\t<item-type>Number:Dimensionless</item-type>\n+\t\t<label>Operating Status</label>\n+\t\t<description>Operating status</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%d\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-grid-voltage-l1\">\n+\t\t<item-type>Number:ElectricPotential</item-type>\n+\t\t<label>Grid Voltage L1</label>\n+\t\t<description>Current output voltage to the grid, L1</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-grid-current-l1\">\n+\t\t<item-type>Number:ElectricCurrent</item-type>\n+\t\t<label>Grid Current L1</label>\n+\t\t<description>Current output current to the grid, L1</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f  %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-grid-power-l1\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>Grid Power L1</label>\n+\t\t<description>Current output power to the grid, L1</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-grid-voltage-l2\">\n+\t\t<item-type>Number:ElectricPotential</item-type>\n+\t\t<label>Grid Voltage L2</label>\n+\t\t<description>Current output voltage to the grid, L2</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-grid-current-l2\">\n+\t\t<item-type>Number:ElectricCurrent</item-type>\n+\t\t<label>Grid Current L2</label>\n+\t\t<description>Current output current to the grid, L2</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-grid-power-l2\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>Grid Power L2</label>\n+\t\t<description>Current output power to the grid, L2</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-grid-voltage-l3\">\n+\t\t<item-type>Number:ElectricPotential</item-type>\n+\t\t<label>Grid Voltage L3</label>\n+\t\t<description>Current output voltage to the grid, L3</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-grid-current-l3\">\n+\t\t<item-type>Number:ElectricCurrent</item-type>\n+\t\t<label>Grid Current L3</label>\n+\t\t<description>Current output current to the grid, L3</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-grid-power-l3\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>Grid Power L3</label>\n+\t\t<description>Current output power to the grid, L3</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-dc-power-pv\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>DC Power PV</label>\n+\t\t<description>Current power from all solar panels</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-dc1-voltage\">\n+\t\t<item-type>Number:ElectricPotential</item-type>\n+\t\t<label>DC1 Voltage</label>\n+\t\t<description>Current voltage from solar panels, DC1</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-dc1-current\">\n+\t\t<item-type>Number:ElectricCurrent</item-type>\n+\t\t<label>DC1 Current</label>\n+\t\t<description>Current current from solar panels, DC1</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-dc1-power\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>DC1 Power</label>\n+\t\t<description>Current power from solar panels, DC1</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-dc2-voltage\">\n+\t\t<item-type>Number:ElectricPotential</item-type>\n+\t\t<label>DC2 Voltage</label>\n+\t\t<description>Current voltage from solar panels, DC2</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-dc2-current\">\n+\t\t<item-type>Number:ElectricCurrent</item-type>\n+\t\t<label>DC2 Current</label>\n+\t\t<description>Current current from solar panels, DC2</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-dc2-power\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>DC2 Power</label>\n+\t\t<description>Current power from solar panels, DC2</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-dc3-voltage\">\n+\t\t<item-type>Number:ElectricPotential</item-type>\n+\t\t<label>DC3 Voltage</label>\n+\t\t<description>Current voltage from solar panels, DC3</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-dc3-current\">\n+\t\t<item-type>Number:ElectricCurrent</item-type>\n+\t\t<label>DC3 Current</label>\n+\t\t<description>Current current from solar panels, DC3</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-dc3-power\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>DC3 Power</label>\n+\t\t<description>Current power from solar panels, DC3</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-akt-home-consumption-solar\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>Actual Home Consumption Solar</label>\n+\t\t<description>Current consumption from solar panels</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-akt-home-consumption-bat\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>Actual Home Consumption Battery</label>\n+\t\t<description>Current consumption from battery</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-akt-home-consumption-grid\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>Actual Home Consumption Grid</label>\n+\t\t<description>Current consumption from grid</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-phase-sel-home-consump-l1\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>Home Consumption L1</label>\n+\t\t<description>Current consumption, L1</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-phase-sel-home-consump-l2\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>Home Consumption L2</label>\n+\t\t<description>Current consumption, L2</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-phase-sel-home-consump-l3\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>Home Consumption L3</label>\n+\t\t<description>Current consumption, L3</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-grid-freq\">\n+\t\t<item-type>Number:Frequency</item-type>\n+\t\t<label>Grid Frequency</label>\n+\t\t<description>Current frequency on grid</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-grid-cos-phi\">\n+\t\t<item-type>Number:Angle</item-type>\n+\t\t<label>Grid Cos Phi</label>\n+\t\t<description>Current power factor on grid</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.0f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"statistic-home-consumption-day\">\n+\t\t<item-type>Number:Energy</item-type>\n+\t\t<label>Home Consumption Day</label>\n+\t\t<description>Total home consumption today</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"statistic-own-consumption-day\">\n+\t\t<item-type>Number:Energy</item-type>\n+\t\t<label>Own Consumption Day</label>\n+\t\t<description>Total own consumption today</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"statistic-own-cons-rate-day\">\n+\t\t<item-type>Number:Dimensionless</item-type>\n+\t\t<label>Own Cons Rate Day</label>\n+\t\t<description>Total own consumption rate today</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.0f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"statistic-autonomy-degree-day\">\n+\t\t<item-type>Number:Dimensionless</item-type>\n+\t\t<label>Autonomy Degree Day</label>\n+\t\t<description>Total autonomy degree day</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.0f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"statistic-home-consumption-total\">\n+\t\t<item-type>Number:Energy</item-type>\n+\t\t<label>Home Consumption Total</label>\n+\t\t<description>Total home consumption</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"statistic-own-consumption-total\">\n+\t\t<item-type>Number:Energy</item-type>\n+\t\t<label>Total Own Consumption</label>\n+\t\t<description>Total own consumption</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"statistic-operating-time-total\">\n+\t\t<item-type>Number:Time</item-type>\n+\t\t<label>Operating Time Total</label>\n+\t\t<description>Total Operating Time</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%d %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-current\">\n+\t\t<item-type>Number:ElectricCurrent</item-type>\n+\t\t<label>Current</label>\n+\t\t<description>Current</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.0f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-current-dir\">\n+\t\t<item-type>Number:Dimensionless</item-type>\n+\t\t<label>Current Dir</label>\n+\t\t<description>Current direction</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%d\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-charge-cycles\">\n+\t\t<item-type>Number:Dimensionless</item-type>\n+\t\t<label>Charge Cycles</label>\n+\t\t<description>Total number of charge cycles</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%d\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-battery-temperature\">\n+\t\t<item-type>Number:Temperature</item-type>\n+\t\t<label>Battery Temperature</label>\n+\t\t<description>Current battery temperature</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-loginterval\">\n+\t\t<item-type>Number:Time</item-type>\n+\t\t<label>Log Interval</label>\n+\t\t<description>Current value for log interval</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%d %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-s0-inpulse-cnt\">\n+\t\t<item-type>Number:Dimensionless</item-type>\n+\t\t<label>S0 Input Pulses Counter</label>\n+\t\t<description>S0-pulse counter</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%d\"/>\n+\t</channel-type>\n+\t<channel-type id=\"statistic-own-cons-rate-total\">\n+\t\t<item-type>Number:Dimensionless</item-type>\n+\t\t<label>Own Cons Rate Total</label>\n+\t\t<description>Total own consumption rate</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.0f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"statistic-autonomy-degree-total\">\n+\t\t<item-type>Number:Dimensionless</item-type>\n+\t\t<label>Autonomy Degree Total</label>\n+\t\t<description>Total autonomy degree</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.0f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-battery-voltage\">\n+\t\t<item-type>Number:ElectricalPotential</item-type>\n+\t\t<label>Battery Voltage</label>\n+\t\t<description>Current battery voltage</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.0f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-bat-state-of-charge\">\n+\t\t<item-type>Number:Dimensionless</item-type>\n+\t\t<label>Bat State Of Charge</label>\n+\t\t<description>Current battery charge state</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.0f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-self-consumption\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>Self Consumption</label>\n+\t\t<description>Current self consumption</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-battery-usage-consumption\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>Battery Usage Consumption</label>\n+\t\t<description>Battery usage consumption</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-smart-battery-control\">\n+\t\t<item-type>Switch</item-type>\n+\t\t<label>Smart Battery Control</label>\n+\t\t<description>Smart battery control</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-max-depth-of-discharge\">\n+\t\t<item-type>Number:Dimensionless</item-type>\n+\t\t<label>Max Depth Of Discharge</label>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0fea81d2052dc7c645cfd79ebbe1da82a03c3213"}, "originalPosition": 363}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MTExNjc0MA==", "bodyText": "Seems like there had been something wrong during merge. This produces a compiler error.", "url": "https://github.com/openhab/openhab-addons/pull/8574#discussion_r561116740", "createdAt": "2021-01-20T16:46:22Z", "author": {"login": "fwolter"}, "path": "bundles/org.openhab.binding.kostalinverter/src/main/java/org/openhab/binding/kostalinverter/internal/KostalInverterFactory.java", "diffHunk": "@@ -81,7 +85,9 @@ public KostalInverterFactory(@Reference final HttpClientFactory httpClientFactor\n \n     @Override\n     public boolean supportsThingType(ThingTypeUID thingTypeUID) {\n-        return thingTypeUID.equals(FIRST_GENERATION_INVERTER)\n+    @Override\n+    public boolean supportsThingType(ThingTypeUID thingTypeUID) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0fea81d2052dc7c645cfd79ebbe1da82a03c3213"}, "originalPosition": 31}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "36c4d023a11f5ec95f93d33f9fdcc582f02d882b", "author": {"user": {"login": "basse04", "name": null}}, "url": "https://github.com/openhab/openhab-addons/commit/36c4d023a11f5ec95f93d33f9fdcc582f02d882b", "committedDate": "2021-01-25T13:20:45Z", "message": "Binding redesigned 20210125 by \u00d6rjan Backsell"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "74951735d3589a3a88433650c89fa95963f31990", "author": {"user": {"login": "basse04", "name": null}}, "url": "https://github.com/openhab/openhab-addons/commit/74951735d3589a3a88433650c89fa95963f31990", "committedDate": "2021-01-25T13:32:30Z", "message": "Binding redesigned 20200923 by \u00d6rjan Backsell\n\n(KostalInverterFactory.java)\n\nSigned-off-by: basse04 <orjan.backsell@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTc1NjE0Njcx", "url": "https://github.com/openhab/openhab-addons/pull/8574#pullrequestreview-575614671", "createdAt": "2021-01-25T17:09:29Z", "commit": {"oid": "74951735d3589a3a88433650c89fa95963f31990"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0yNVQxNzowOToyOVrOIZxL5Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0yNVQxNzoyNDoxNFrOIZx5Ug==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2Mzg5MTE3Mw==", "bodyText": "You could initialize the field with an empty config. Then, you can remove the null annotation.", "url": "https://github.com/openhab/openhab-addons/pull/8574#discussion_r563891173", "createdAt": "2021-01-25T17:09:29Z", "author": {"login": "fwolter"}, "path": "bundles/org.openhab.binding.kostalinverter/src/main/java/org/openhab/binding/kostalinverter/internal/secondgeneration/SecondGenerationHandler.java", "diffHunk": "@@ -0,0 +1,406 @@\n+/**\n+ * Copyright (c) 2010-2021 Contributors to the openHAB project\n+ *\n+ * See the NOTICE file(s) distributed with this work for additional\n+ * information.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+package org.openhab.binding.kostalinverter.internal.secondgeneration;\n+\n+import java.math.BigDecimal;\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.concurrent.ExecutionException;\n+import java.util.concurrent.ScheduledFuture;\n+import java.util.concurrent.TimeUnit;\n+import java.util.concurrent.TimeoutException;\n+\n+import javax.measure.Unit;\n+\n+import org.eclipse.jdt.annotation.NonNullByDefault;\n+import org.eclipse.jdt.annotation.Nullable;\n+import org.eclipse.jetty.client.HttpClient;\n+import org.openhab.core.library.types.OnOffType;\n+import org.openhab.core.library.types.QuantityType;\n+import org.openhab.core.library.types.StringType;\n+import org.openhab.core.thing.ChannelUID;\n+import org.openhab.core.thing.Thing;\n+import org.openhab.core.thing.ThingStatus;\n+import org.openhab.core.thing.ThingStatusDetail;\n+import org.openhab.core.thing.binding.BaseThingHandler;\n+import org.openhab.core.types.Command;\n+import org.openhab.core.types.State;\n+import org.openhab.core.types.UnDefType;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import com.google.gson.Gson;\n+import com.google.gson.GsonBuilder;\n+\n+/**\n+ * The {@link SecondGenerationHandler} is responsible for handling commands, which are\n+ * sent to one of the channels, and initiation and refreshing regarded to second generation part of the binding.\n+ *\n+ *\n+ * @author Christian Schneider - Initial contribution\n+ * @author Christoph Weitkamp - Incorporated new QuantityType (Units of Measurement)\n+ * @author \u00d6rjan Backsell - Redesigned regarding Piko1020, Piko New Generation\n+ */\n+@NonNullByDefault\n+public class SecondGenerationHandler extends BaseThingHandler {\n+\n+    private final Logger logger = LoggerFactory.getLogger(SecondGenerationHandler.class);\n+\n+    private @Nullable ScheduledFuture<?> secondGenerationPoller;\n+\n+    private final HttpClient httpClient;\n+\n+    private List<SecondGenerationChannelConfiguration> channelConfigs = new ArrayList<>();\n+    private List<SecondGenerationChannelConfiguration> channelConfigsExt = new ArrayList<>();\n+    private List<SecondGenerationChannelConfiguration> channelConfigsExtExt = new ArrayList<>();\n+    private List<SecondGenerationChannelConfiguration> channelConfigsConfigurable = new ArrayList<>();\n+    private List<SecondGenerationChannelConfiguration> channelConfigsAll = new ArrayList<>();\n+\n+    private List<String> channelPostsTemp = new ArrayList<>();\n+    private List<String> channelPostsTempExt = new ArrayList<>();\n+    private List<String> channelPostsTempExtExt = new ArrayList<>();\n+    private List<String> channelPostsTempAll = new ArrayList<>();\n+\n+    private @NonNullByDefault({}) SecondGenerationInverterConfig inverterConfig;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "74951735d3589a3a88433650c89fa95963f31990"}, "originalPosition": 74}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2Mzg5MTYzNg==", "bodyText": "You could initialize the field to remove the null annoation.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                private @NonNullByDefault({}) Gson gson;\n          \n          \n            \n                private Gson gson = new GsonBuilder().setPrettyPrinting().create();", "url": "https://github.com/openhab/openhab-addons/pull/8574#discussion_r563891636", "createdAt": "2021-01-25T17:10:06Z", "author": {"login": "fwolter"}, "path": "bundles/org.openhab.binding.kostalinverter/src/main/java/org/openhab/binding/kostalinverter/internal/secondgeneration/SecondGenerationHandler.java", "diffHunk": "@@ -0,0 +1,406 @@\n+/**\n+ * Copyright (c) 2010-2021 Contributors to the openHAB project\n+ *\n+ * See the NOTICE file(s) distributed with this work for additional\n+ * information.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+package org.openhab.binding.kostalinverter.internal.secondgeneration;\n+\n+import java.math.BigDecimal;\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.concurrent.ExecutionException;\n+import java.util.concurrent.ScheduledFuture;\n+import java.util.concurrent.TimeUnit;\n+import java.util.concurrent.TimeoutException;\n+\n+import javax.measure.Unit;\n+\n+import org.eclipse.jdt.annotation.NonNullByDefault;\n+import org.eclipse.jdt.annotation.Nullable;\n+import org.eclipse.jetty.client.HttpClient;\n+import org.openhab.core.library.types.OnOffType;\n+import org.openhab.core.library.types.QuantityType;\n+import org.openhab.core.library.types.StringType;\n+import org.openhab.core.thing.ChannelUID;\n+import org.openhab.core.thing.Thing;\n+import org.openhab.core.thing.ThingStatus;\n+import org.openhab.core.thing.ThingStatusDetail;\n+import org.openhab.core.thing.binding.BaseThingHandler;\n+import org.openhab.core.types.Command;\n+import org.openhab.core.types.State;\n+import org.openhab.core.types.UnDefType;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import com.google.gson.Gson;\n+import com.google.gson.GsonBuilder;\n+\n+/**\n+ * The {@link SecondGenerationHandler} is responsible for handling commands, which are\n+ * sent to one of the channels, and initiation and refreshing regarded to second generation part of the binding.\n+ *\n+ *\n+ * @author Christian Schneider - Initial contribution\n+ * @author Christoph Weitkamp - Incorporated new QuantityType (Units of Measurement)\n+ * @author \u00d6rjan Backsell - Redesigned regarding Piko1020, Piko New Generation\n+ */\n+@NonNullByDefault\n+public class SecondGenerationHandler extends BaseThingHandler {\n+\n+    private final Logger logger = LoggerFactory.getLogger(SecondGenerationHandler.class);\n+\n+    private @Nullable ScheduledFuture<?> secondGenerationPoller;\n+\n+    private final HttpClient httpClient;\n+\n+    private List<SecondGenerationChannelConfiguration> channelConfigs = new ArrayList<>();\n+    private List<SecondGenerationChannelConfiguration> channelConfigsExt = new ArrayList<>();\n+    private List<SecondGenerationChannelConfiguration> channelConfigsExtExt = new ArrayList<>();\n+    private List<SecondGenerationChannelConfiguration> channelConfigsConfigurable = new ArrayList<>();\n+    private List<SecondGenerationChannelConfiguration> channelConfigsAll = new ArrayList<>();\n+\n+    private List<String> channelPostsTemp = new ArrayList<>();\n+    private List<String> channelPostsTempExt = new ArrayList<>();\n+    private List<String> channelPostsTempExtExt = new ArrayList<>();\n+    private List<String> channelPostsTempAll = new ArrayList<>();\n+\n+    private @NonNullByDefault({}) SecondGenerationInverterConfig inverterConfig;\n+    private @NonNullByDefault({}) Gson gson;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "74951735d3589a3a88433650c89fa95963f31990"}, "originalPosition": 75}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2Mzg5MzI0NA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\t<label> IP Address</label>\n          \n          \n            \n            \t\t\t<label>IP Address</label>", "url": "https://github.com/openhab/openhab-addons/pull/8574#discussion_r563893244", "createdAt": "2021-01-25T17:12:22Z", "author": {"login": "fwolter"}, "path": "bundles/org.openhab.binding.kostalinverter/src/main/resources/OH-INF/config/SecondGeneration.xml", "diffHunk": "@@ -0,0 +1,31 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<config-description:config-descriptions\n+\txmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+\txmlns:config-description=\"https://openhab.org/schemas/config-description/v1.0.0\"\n+\txsi:schemaLocation=\"https://openhab.org/schemas/config-description/v1.0.0 https://openhab.org/schemas/config-description-1.0.0.xsd\">\n+\t<config-description uri=\"thing-type:kostalpiko1020_config\">\n+\t\t<parameter name=\"url\" type=\"text\" required=\"true\">\n+\t\t\t<label> IP Address</label>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "74951735d3589a3a88433650c89fa95963f31990"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2Mzg5NTkwNQ==", "bodyText": "What do you mean by \"Akt\"? Would \"Home Consumption PV\" suffice? Same for below.", "url": "https://github.com/openhab/openhab-addons/pull/8574#discussion_r563895905", "createdAt": "2021-01-25T17:15:00Z", "author": {"login": "fwolter"}, "path": "bundles/org.openhab.binding.kostalinverter/src/main/resources/OH-INF/thing/Channels.xml", "diffHunk": "@@ -484,4 +484,438 @@\n \t\t<category>Energy</category>\n \t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n \t</channel-type>\n+\t<channel-type id=\"device-local-grid-output-power\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>Grid Output Power</label>\n+\t\t<description>Current output power to the grid</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"statistic-yield-day-second-gen\">\n+\t\t<item-type>Number:Energy</item-type>\n+\t\t<label>Yield Day</label>\n+\t\t<description>Total produced power day</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"statistic-yield-total-second-gen\">\n+\t\t<item-type>Number:Energy</item-type>\n+\t\t<label>Yield Total</label>\n+\t\t<description>Total produced power</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-operating-status\">\n+\t\t<item-type>Number:Dimensionless</item-type>\n+\t\t<label>Operating Status</label>\n+\t\t<description>Operating status</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%d\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-grid-voltage-l1\">\n+\t\t<item-type>Number:ElectricPotential</item-type>\n+\t\t<label>Grid Voltage L1</label>\n+\t\t<description>Current output voltage to the grid, L1</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-grid-current-l1\">\n+\t\t<item-type>Number:ElectricCurrent</item-type>\n+\t\t<label>Grid Current L1</label>\n+\t\t<description>Current output current to the grid, L1</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f  %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-grid-power-l1\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>Grid Power L1</label>\n+\t\t<description>Current output power to the grid, L1</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-grid-voltage-l2\">\n+\t\t<item-type>Number:ElectricPotential</item-type>\n+\t\t<label>Grid Voltage L2</label>\n+\t\t<description>Current output voltage to the grid, L2</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-grid-current-l2\">\n+\t\t<item-type>Number:ElectricCurrent</item-type>\n+\t\t<label>Grid Current L2</label>\n+\t\t<description>Current output current to the grid, L2</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-grid-power-l2\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>Grid Power L2</label>\n+\t\t<description>Current output power to the grid, L2</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-grid-voltage-l3\">\n+\t\t<item-type>Number:ElectricPotential</item-type>\n+\t\t<label>Grid Voltage L3</label>\n+\t\t<description>Current output voltage to the grid, L3</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-grid-current-l3\">\n+\t\t<item-type>Number:ElectricCurrent</item-type>\n+\t\t<label>Grid Current L3</label>\n+\t\t<description>Current output current to the grid, L3</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-grid-power-l3\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>Grid Power L3</label>\n+\t\t<description>Current output power to the grid, L3</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-dc-power-pv\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>DC Power PV</label>\n+\t\t<description>Current power from solar panels</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-dc1-voltage\">\n+\t\t<item-type>Number:ElectricPotential</item-type>\n+\t\t<label>DC1 Voltage</label>\n+\t\t<description>Current voltage from solar panels, DC1</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-dc1-current\">\n+\t\t<item-type>Number:ElectricCurrent</item-type>\n+\t\t<label>DC1 Current</label>\n+\t\t<description>Current current from solar panels, DC1</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-dc1-power\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>DC1 Power</label>\n+\t\t<description>Current power from solar panels, DC1</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-dc2-voltage\">\n+\t\t<item-type>Number:ElectricPotential</item-type>\n+\t\t<label>DC2 Voltage</label>\n+\t\t<description>Current voltage from solar panels, DC2</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-dc2-current\">\n+\t\t<item-type>Number:ElectricCurrent</item-type>\n+\t\t<label>DC2 Current</label>\n+\t\t<description>Current current from solar panels, DC2</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-dc2-power\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>DC2 Power</label>\n+\t\t<description>Current power from solar panels, DC2</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-dc3-voltage\">\n+\t\t<item-type>Number:ElectricPotential</item-type>\n+\t\t<label>DC3 Voltage</label>\n+\t\t<description>Current voltage from solar panels, DC3</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-dc3-current\">\n+\t\t<item-type>Number:ElectricCurrent</item-type>\n+\t\t<label>DC3 Current</label>\n+\t\t<description>Current current from solar panels, DC3</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-dc3-power\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>DC3 Power</label>\n+\t\t<description>Current power from solar panels, DC3</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-akt-home-consumption-solar\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>Akt Home Consumption Solar</label>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "74951735d3589a3a88433650c89fa95963f31990"}, "originalPosition": 167}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MzkwMjcxNw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t<label>Battery Charge Time From Set</label>\n          \n          \n            \n            \t\t<label>Battery Charge Time from Set</label>", "url": "https://github.com/openhab/openhab-addons/pull/8574#discussion_r563902717", "createdAt": "2021-01-25T17:24:06Z", "author": {"login": "fwolter"}, "path": "bundles/org.openhab.binding.kostalinverter/src/main/resources/OH-INF/thing/Channels.xml", "diffHunk": "@@ -484,4 +484,438 @@\n \t\t<category>Energy</category>\n \t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n \t</channel-type>\n+\t<channel-type id=\"device-local-grid-output-power\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>Grid Output Power</label>\n+\t\t<description>Current output power to the grid</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"statistic-yield-day-second-gen\">\n+\t\t<item-type>Number:Energy</item-type>\n+\t\t<label>Yield Day</label>\n+\t\t<description>Total produced power day</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"statistic-yield-total-second-gen\">\n+\t\t<item-type>Number:Energy</item-type>\n+\t\t<label>Yield Total</label>\n+\t\t<description>Total produced power</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-operating-status\">\n+\t\t<item-type>Number:Dimensionless</item-type>\n+\t\t<label>Operating Status</label>\n+\t\t<description>Operating status</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%d\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-grid-voltage-l1\">\n+\t\t<item-type>Number:ElectricPotential</item-type>\n+\t\t<label>Grid Voltage L1</label>\n+\t\t<description>Current output voltage to the grid, L1</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-grid-current-l1\">\n+\t\t<item-type>Number:ElectricCurrent</item-type>\n+\t\t<label>Grid Current L1</label>\n+\t\t<description>Current output current to the grid, L1</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f  %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-grid-power-l1\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>Grid Power L1</label>\n+\t\t<description>Current output power to the grid, L1</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-grid-voltage-l2\">\n+\t\t<item-type>Number:ElectricPotential</item-type>\n+\t\t<label>Grid Voltage L2</label>\n+\t\t<description>Current output voltage to the grid, L2</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-grid-current-l2\">\n+\t\t<item-type>Number:ElectricCurrent</item-type>\n+\t\t<label>Grid Current L2</label>\n+\t\t<description>Current output current to the grid, L2</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-grid-power-l2\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>Grid Power L2</label>\n+\t\t<description>Current output power to the grid, L2</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-grid-voltage-l3\">\n+\t\t<item-type>Number:ElectricPotential</item-type>\n+\t\t<label>Grid Voltage L3</label>\n+\t\t<description>Current output voltage to the grid, L3</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-grid-current-l3\">\n+\t\t<item-type>Number:ElectricCurrent</item-type>\n+\t\t<label>Grid Current L3</label>\n+\t\t<description>Current output current to the grid, L3</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-grid-power-l3\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>Grid Power L3</label>\n+\t\t<description>Current output power to the grid, L3</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-dc-power-pv\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>DC Power PV</label>\n+\t\t<description>Current power from solar panels</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-dc1-voltage\">\n+\t\t<item-type>Number:ElectricPotential</item-type>\n+\t\t<label>DC1 Voltage</label>\n+\t\t<description>Current voltage from solar panels, DC1</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-dc1-current\">\n+\t\t<item-type>Number:ElectricCurrent</item-type>\n+\t\t<label>DC1 Current</label>\n+\t\t<description>Current current from solar panels, DC1</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-dc1-power\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>DC1 Power</label>\n+\t\t<description>Current power from solar panels, DC1</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-dc2-voltage\">\n+\t\t<item-type>Number:ElectricPotential</item-type>\n+\t\t<label>DC2 Voltage</label>\n+\t\t<description>Current voltage from solar panels, DC2</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-dc2-current\">\n+\t\t<item-type>Number:ElectricCurrent</item-type>\n+\t\t<label>DC2 Current</label>\n+\t\t<description>Current current from solar panels, DC2</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-dc2-power\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>DC2 Power</label>\n+\t\t<description>Current power from solar panels, DC2</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-dc3-voltage\">\n+\t\t<item-type>Number:ElectricPotential</item-type>\n+\t\t<label>DC3 Voltage</label>\n+\t\t<description>Current voltage from solar panels, DC3</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-dc3-current\">\n+\t\t<item-type>Number:ElectricCurrent</item-type>\n+\t\t<label>DC3 Current</label>\n+\t\t<description>Current current from solar panels, DC3</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-dc3-power\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>DC3 Power</label>\n+\t\t<description>Current power from solar panels, DC3</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-akt-home-consumption-solar\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>Akt Home Consumption Solar</label>\n+\t\t<description>Current consumption from solar panels</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-akt-home-consumption-bat\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>Akt Home Consumption Bat</label>\n+\t\t<description>Current consumption from battery</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-akt-home-consumption-grid\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>Act Home Consumption Grid</label>\n+\t\t<description>Current consumption from grid</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-phase-sel-home-consump-l1\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>Home Consumption L1</label>\n+\t\t<description>Current home consumption, L1</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-phase-sel-home-consump-l2\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>Home Consumption L2</label>\n+\t\t<description>Current home consumption, L2</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-phase-sel-home-consump-l3\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>Home Consumption L3</label>\n+\t\t<description>Current home consumption, L3</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-grid-freq\">\n+\t\t<item-type>Number:Frequency</item-type>\n+\t\t<label>Grid Freq</label>\n+\t\t<description>Current frequency on grid</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-grid-cos-phi\">\n+\t\t<item-type>Number:Angle</item-type>\n+\t\t<label>Grid Cos Phi</label>\n+\t\t<description>Current power factor on grid</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.0f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"statistic-home-consumption-day\">\n+\t\t<item-type>Number:Energy</item-type>\n+\t\t<label>Home Consumption Day</label>\n+\t\t<description>Total home consumption day</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"statistic-own-consumption-day\">\n+\t\t<item-type>Number:Energy</item-type>\n+\t\t<label>Own Consumption Day</label>\n+\t\t<description>Total own consumption day</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"statistic-own-cons-rate-day\">\n+\t\t<item-type>Number:Dimensionless</item-type>\n+\t\t<label>Own Cons Rate Day</label>\n+\t\t<description>Total own consumption rate day</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.0f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"statistic-autonomy-degree-day\">\n+\t\t<item-type>Number:Dimensionless</item-type>\n+\t\t<label>Autonomy Degree Day</label>\n+\t\t<description>Total autonomy degree day</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.0f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"statistic-home-consumption-total\">\n+\t\t<item-type>Number:Energy</item-type>\n+\t\t<label>Home Consumption Total</label>\n+\t\t<description>Home consumption total</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"statistic-own-consumption-total\">\n+\t\t<item-type>Number:Energy</item-type>\n+\t\t<label>Own Consumption Total</label>\n+\t\t<description>Own consumption total</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"statistic-operating-time-total\">\n+\t\t<item-type>Number:Time</item-type>\n+\t\t<label>Operating Time Total</label>\n+\t\t<description>Operating time total</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%d %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-current\">\n+\t\t<item-type>Number:ElectricCurrent</item-type>\n+\t\t<label>Current</label>\n+\t\t<description>Current</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.0f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-current-dir\">\n+\t\t<item-type>Number:Dimensionless</item-type>\n+\t\t<label>Current Dir</label>\n+\t\t<description>Current direction</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%d\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-charge-cycles\">\n+\t\t<item-type>Number:Dimensionless</item-type>\n+\t\t<label>Charge Cycles</label>\n+\t\t<description>Total number of charge cycles</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%d\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-battery-temperature\">\n+\t\t<item-type>Number:Temperature</item-type>\n+\t\t<label>Battery Temperature</label>\n+\t\t<description>Current battery temperature</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-loginterval\">\n+\t\t<item-type>Number:Time</item-type>\n+\t\t<label>Loginterval</label>\n+\t\t<description>Current value for log interval</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%d %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-s0-inpulse-cnt\">\n+\t\t<item-type>Number:Dimensionless</item-type>\n+\t\t<label>S0 Inpulse Cnt</label>\n+\t\t<description>S0-pulse counter</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%d\"/>\n+\t</channel-type>\n+\t<channel-type id=\"statistic-own-cons-rate-total\">\n+\t\t<item-type>Number:Dimensionless</item-type>\n+\t\t<label>Own Cons Rate Total</label>\n+\t\t<description>Total own consumption rate</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.0f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"statistic-autonomy-degree-total\">\n+\t\t<item-type>Number:Dimensionless</item-type>\n+\t\t<label>Autonomy Degree Total</label>\n+\t\t<description>Total autonomy degree</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.0f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-battery-voltage\">\n+\t\t<item-type>Number:ElectricalPotential</item-type>\n+\t\t<label>Battery Voltage</label>\n+\t\t<description>Current battery voltage</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.0f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-bat-state-of-charge\">\n+\t\t<item-type>Number:Dimensionless</item-type>\n+\t\t<label>Bat State of Charge</label>\n+\t\t<description>Current battery charge state</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.0f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-self-consumption\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>Self Consumption</label>\n+\t\t<description>Current self consumption</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-battery-usage-consumption\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>Battery Usage Consumption</label>\n+\t\t<description>Battery usage consumption</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-smart-battery-control\">\n+\t\t<item-type>Switch</item-type>\n+\t\t<label>Smart Battery Control</label>\n+\t\t<description>Smart battery control</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-max-depth-of-discharge\">\n+\t\t<item-type>Number:Dimensionless</item-type>\n+\t\t<label>Max Depth of Discharge</label>\n+\t\t<description>Max depth of discharge</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%d\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-shadow-management\">\n+\t\t<item-type>Number:Dimensionless</item-type>\n+\t\t<label>Shadow Management</label>\n+\t\t<description>Shadow management</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%d\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-external-module-control\">\n+\t\t<item-type>Number:Dimensionless</item-type>\n+\t\t<label>External Module Control</label>\n+\t\t<description>External Module Control</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%d\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-battery-usage-consumption-set\">\n+\t\t<item-type>String</item-type>\n+\t\t<label>Battery Usage Consumption Set</label>\n+\t\t<description>Set battery usage consumption</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"false\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-battery-usage-strategy-set\">\n+\t\t<item-type>String</item-type>\n+\t\t<label>Battery Usage Strategy Set</label>\n+\t\t<description>Set battery usage strategy</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"false\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-smart-battery-control-set\">\n+\t\t<item-type>Switch</item-type>\n+\t\t<label>Smart Battery Control Set</label>\n+\t\t<description>Set smart battery control</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"false\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-battery-charge-time-from-set\">\n+\t\t<item-type>String</item-type>\n+\t\t<label>Battery Charge Time From Set</label>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "74951735d3589a3a88433650c89fa95963f31990"}, "originalPosition": 405}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MzkwMjgwMg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t<label>Battery Charge Time To Set</label>\n          \n          \n            \n            \t\t<label>Battery Charge Time to Set</label>", "url": "https://github.com/openhab/openhab-addons/pull/8574#discussion_r563902802", "createdAt": "2021-01-25T17:24:14Z", "author": {"login": "fwolter"}, "path": "bundles/org.openhab.binding.kostalinverter/src/main/resources/OH-INF/thing/Channels.xml", "diffHunk": "@@ -484,4 +484,438 @@\n \t\t<category>Energy</category>\n \t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n \t</channel-type>\n+\t<channel-type id=\"device-local-grid-output-power\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>Grid Output Power</label>\n+\t\t<description>Current output power to the grid</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"statistic-yield-day-second-gen\">\n+\t\t<item-type>Number:Energy</item-type>\n+\t\t<label>Yield Day</label>\n+\t\t<description>Total produced power day</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"statistic-yield-total-second-gen\">\n+\t\t<item-type>Number:Energy</item-type>\n+\t\t<label>Yield Total</label>\n+\t\t<description>Total produced power</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-operating-status\">\n+\t\t<item-type>Number:Dimensionless</item-type>\n+\t\t<label>Operating Status</label>\n+\t\t<description>Operating status</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%d\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-grid-voltage-l1\">\n+\t\t<item-type>Number:ElectricPotential</item-type>\n+\t\t<label>Grid Voltage L1</label>\n+\t\t<description>Current output voltage to the grid, L1</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-grid-current-l1\">\n+\t\t<item-type>Number:ElectricCurrent</item-type>\n+\t\t<label>Grid Current L1</label>\n+\t\t<description>Current output current to the grid, L1</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f  %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-grid-power-l1\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>Grid Power L1</label>\n+\t\t<description>Current output power to the grid, L1</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-grid-voltage-l2\">\n+\t\t<item-type>Number:ElectricPotential</item-type>\n+\t\t<label>Grid Voltage L2</label>\n+\t\t<description>Current output voltage to the grid, L2</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-grid-current-l2\">\n+\t\t<item-type>Number:ElectricCurrent</item-type>\n+\t\t<label>Grid Current L2</label>\n+\t\t<description>Current output current to the grid, L2</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-grid-power-l2\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>Grid Power L2</label>\n+\t\t<description>Current output power to the grid, L2</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-grid-voltage-l3\">\n+\t\t<item-type>Number:ElectricPotential</item-type>\n+\t\t<label>Grid Voltage L3</label>\n+\t\t<description>Current output voltage to the grid, L3</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-grid-current-l3\">\n+\t\t<item-type>Number:ElectricCurrent</item-type>\n+\t\t<label>Grid Current L3</label>\n+\t\t<description>Current output current to the grid, L3</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-grid-power-l3\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>Grid Power L3</label>\n+\t\t<description>Current output power to the grid, L3</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-dc-power-pv\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>DC Power PV</label>\n+\t\t<description>Current power from solar panels</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-dc1-voltage\">\n+\t\t<item-type>Number:ElectricPotential</item-type>\n+\t\t<label>DC1 Voltage</label>\n+\t\t<description>Current voltage from solar panels, DC1</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-dc1-current\">\n+\t\t<item-type>Number:ElectricCurrent</item-type>\n+\t\t<label>DC1 Current</label>\n+\t\t<description>Current current from solar panels, DC1</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-dc1-power\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>DC1 Power</label>\n+\t\t<description>Current power from solar panels, DC1</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-dc2-voltage\">\n+\t\t<item-type>Number:ElectricPotential</item-type>\n+\t\t<label>DC2 Voltage</label>\n+\t\t<description>Current voltage from solar panels, DC2</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-dc2-current\">\n+\t\t<item-type>Number:ElectricCurrent</item-type>\n+\t\t<label>DC2 Current</label>\n+\t\t<description>Current current from solar panels, DC2</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-dc2-power\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>DC2 Power</label>\n+\t\t<description>Current power from solar panels, DC2</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-dc3-voltage\">\n+\t\t<item-type>Number:ElectricPotential</item-type>\n+\t\t<label>DC3 Voltage</label>\n+\t\t<description>Current voltage from solar panels, DC3</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-dc3-current\">\n+\t\t<item-type>Number:ElectricCurrent</item-type>\n+\t\t<label>DC3 Current</label>\n+\t\t<description>Current current from solar panels, DC3</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-dc3-power\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>DC3 Power</label>\n+\t\t<description>Current power from solar panels, DC3</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-akt-home-consumption-solar\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>Akt Home Consumption Solar</label>\n+\t\t<description>Current consumption from solar panels</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-akt-home-consumption-bat\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>Akt Home Consumption Bat</label>\n+\t\t<description>Current consumption from battery</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-akt-home-consumption-grid\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>Act Home Consumption Grid</label>\n+\t\t<description>Current consumption from grid</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-phase-sel-home-consump-l1\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>Home Consumption L1</label>\n+\t\t<description>Current home consumption, L1</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-phase-sel-home-consump-l2\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>Home Consumption L2</label>\n+\t\t<description>Current home consumption, L2</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-phase-sel-home-consump-l3\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>Home Consumption L3</label>\n+\t\t<description>Current home consumption, L3</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-grid-freq\">\n+\t\t<item-type>Number:Frequency</item-type>\n+\t\t<label>Grid Freq</label>\n+\t\t<description>Current frequency on grid</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-grid-cos-phi\">\n+\t\t<item-type>Number:Angle</item-type>\n+\t\t<label>Grid Cos Phi</label>\n+\t\t<description>Current power factor on grid</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.0f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"statistic-home-consumption-day\">\n+\t\t<item-type>Number:Energy</item-type>\n+\t\t<label>Home Consumption Day</label>\n+\t\t<description>Total home consumption day</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"statistic-own-consumption-day\">\n+\t\t<item-type>Number:Energy</item-type>\n+\t\t<label>Own Consumption Day</label>\n+\t\t<description>Total own consumption day</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"statistic-own-cons-rate-day\">\n+\t\t<item-type>Number:Dimensionless</item-type>\n+\t\t<label>Own Cons Rate Day</label>\n+\t\t<description>Total own consumption rate day</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.0f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"statistic-autonomy-degree-day\">\n+\t\t<item-type>Number:Dimensionless</item-type>\n+\t\t<label>Autonomy Degree Day</label>\n+\t\t<description>Total autonomy degree day</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.0f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"statistic-home-consumption-total\">\n+\t\t<item-type>Number:Energy</item-type>\n+\t\t<label>Home Consumption Total</label>\n+\t\t<description>Home consumption total</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"statistic-own-consumption-total\">\n+\t\t<item-type>Number:Energy</item-type>\n+\t\t<label>Own Consumption Total</label>\n+\t\t<description>Own consumption total</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"statistic-operating-time-total\">\n+\t\t<item-type>Number:Time</item-type>\n+\t\t<label>Operating Time Total</label>\n+\t\t<description>Operating time total</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%d %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-current\">\n+\t\t<item-type>Number:ElectricCurrent</item-type>\n+\t\t<label>Current</label>\n+\t\t<description>Current</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.0f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-current-dir\">\n+\t\t<item-type>Number:Dimensionless</item-type>\n+\t\t<label>Current Dir</label>\n+\t\t<description>Current direction</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%d\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-charge-cycles\">\n+\t\t<item-type>Number:Dimensionless</item-type>\n+\t\t<label>Charge Cycles</label>\n+\t\t<description>Total number of charge cycles</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%d\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-battery-temperature\">\n+\t\t<item-type>Number:Temperature</item-type>\n+\t\t<label>Battery Temperature</label>\n+\t\t<description>Current battery temperature</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-loginterval\">\n+\t\t<item-type>Number:Time</item-type>\n+\t\t<label>Loginterval</label>\n+\t\t<description>Current value for log interval</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%d %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-s0-inpulse-cnt\">\n+\t\t<item-type>Number:Dimensionless</item-type>\n+\t\t<label>S0 Inpulse Cnt</label>\n+\t\t<description>S0-pulse counter</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%d\"/>\n+\t</channel-type>\n+\t<channel-type id=\"statistic-own-cons-rate-total\">\n+\t\t<item-type>Number:Dimensionless</item-type>\n+\t\t<label>Own Cons Rate Total</label>\n+\t\t<description>Total own consumption rate</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.0f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"statistic-autonomy-degree-total\">\n+\t\t<item-type>Number:Dimensionless</item-type>\n+\t\t<label>Autonomy Degree Total</label>\n+\t\t<description>Total autonomy degree</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.0f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-battery-voltage\">\n+\t\t<item-type>Number:ElectricalPotential</item-type>\n+\t\t<label>Battery Voltage</label>\n+\t\t<description>Current battery voltage</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.0f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-bat-state-of-charge\">\n+\t\t<item-type>Number:Dimensionless</item-type>\n+\t\t<label>Bat State of Charge</label>\n+\t\t<description>Current battery charge state</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.0f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-self-consumption\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>Self Consumption</label>\n+\t\t<description>Current self consumption</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-battery-usage-consumption\">\n+\t\t<item-type>Number:Power</item-type>\n+\t\t<label>Battery Usage Consumption</label>\n+\t\t<description>Battery usage consumption</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%.2f %unit%\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-smart-battery-control\">\n+\t\t<item-type>Switch</item-type>\n+\t\t<label>Smart Battery Control</label>\n+\t\t<description>Smart battery control</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-max-depth-of-discharge\">\n+\t\t<item-type>Number:Dimensionless</item-type>\n+\t\t<label>Max Depth of Discharge</label>\n+\t\t<description>Max depth of discharge</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%d\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-shadow-management\">\n+\t\t<item-type>Number:Dimensionless</item-type>\n+\t\t<label>Shadow Management</label>\n+\t\t<description>Shadow management</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%d\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-external-module-control\">\n+\t\t<item-type>Number:Dimensionless</item-type>\n+\t\t<label>External Module Control</label>\n+\t\t<description>External Module Control</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"true\" pattern=\"%d\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-battery-usage-consumption-set\">\n+\t\t<item-type>String</item-type>\n+\t\t<label>Battery Usage Consumption Set</label>\n+\t\t<description>Set battery usage consumption</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"false\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-battery-usage-strategy-set\">\n+\t\t<item-type>String</item-type>\n+\t\t<label>Battery Usage Strategy Set</label>\n+\t\t<description>Set battery usage strategy</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"false\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-smart-battery-control-set\">\n+\t\t<item-type>Switch</item-type>\n+\t\t<label>Smart Battery Control Set</label>\n+\t\t<description>Set smart battery control</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"false\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-battery-charge-time-from-set\">\n+\t\t<item-type>String</item-type>\n+\t\t<label>Battery Charge Time From Set</label>\n+\t\t<description>Set battery charge time from</description>\n+\t\t<category>Energy</category>\n+\t\t<state readOnly=\"false\"/>\n+\t</channel-type>\n+\t<channel-type id=\"device-local-battery-charge-time-to-set\">\n+\t\t<item-type>String</item-type>\n+\t\t<label>Battery Charge Time To Set</label>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "74951735d3589a3a88433650c89fa95963f31990"}, "originalPosition": 412}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "58a63525f2d39ec92a47fa6c2752dc26a2966076", "author": {"user": {"login": "basse04", "name": null}}, "url": "https://github.com/openhab/openhab-addons/commit/58a63525f2d39ec92a47fa6c2752dc26a2966076", "committedDate": "2021-01-26T09:32:13Z", "message": "Binding redesigned 20210125 by \u00d6rjan Backsell\n\nSigned-off-by: basse04 <orjan.backsell@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTgzODYxMTcw", "url": "https://github.com/openhab/openhab-addons/pull/8574#pullrequestreview-583861170", "createdAt": "2021-02-04T22:16:33Z", "commit": {"oid": "58a63525f2d39ec92a47fa6c2752dc26a2966076"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4666, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}