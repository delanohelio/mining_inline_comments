{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYyODM0NTMz", "number": 6835, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNVQxOTo0MDoxN1rODYSjzg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNVQxOTo0MToxNlrODYSk3A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI2Nzk2NDk0OnYy", "diffSide": "RIGHT", "path": "bundles/org.openhab.binding.yamahareceiver/src/main/java/org/openhab/binding/yamahareceiver/internal/protocol/xml/InputWithNavigationControlXML.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNVQxOTo0MDoxN1rOFeEJQg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNVQyMjoyNzoyMFrOFeIfeg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzA2OTUwNg==", "bodyText": "There is a TODO, what should be done and can it be completed before merging the PR?", "url": "https://github.com/openhab/openhab-addons/pull/6835#discussion_r367069506", "createdAt": "2020-01-15T19:40:17Z", "author": {"login": "martinvw"}, "path": "bundles/org.openhab.binding.yamahareceiver/src/main/java/org/openhab/binding/yamahareceiver/internal/protocol/xml/InputWithNavigationControlXML.java", "diffHunk": "@@ -297,8 +300,10 @@ public void update() throws IOException, ReceivedMessageParseException {\n \n             totalWaitingTime += YamahaReceiverBindingConstants.MENU_RETRY_DELAY;\n             if (totalWaitingTime > YamahaReceiverBindingConstants.MENU_MAX_WAITING_TIME) {\n-                throw new IOException(\n-                        \"Menu still not ready after \" + YamahaReceiverBindingConstants.MENU_MAX_WAITING_TIME + \"ms\");\n+                logger.info(\"Menu still not ready after \" + YamahaReceiverBindingConstants.MENU_MAX_WAITING_TIME + \"ms. The menu state will be out of sync.\");\n+                // ToDo: this needs to redesigned to allow for some sort of async update", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "38a5c8e8a43342ccbf239c5b2a664c4153090424"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzE0MDczMA==", "bodyText": "I put that ToDo for another time. I am not using menus myself and not sure how it works, but when you look at the code it would require a rework to avoid delaying and a looping to fetch updates until the devices applies changes.\nToo big refactor for now.\nWith this PR I am trying to fix the rather critical issue introduced last time.", "url": "https://github.com/openhab/openhab-addons/pull/6835#discussion_r367140730", "createdAt": "2020-01-15T22:27:20Z", "author": {"login": "zarusz"}, "path": "bundles/org.openhab.binding.yamahareceiver/src/main/java/org/openhab/binding/yamahareceiver/internal/protocol/xml/InputWithNavigationControlXML.java", "diffHunk": "@@ -297,8 +300,10 @@ public void update() throws IOException, ReceivedMessageParseException {\n \n             totalWaitingTime += YamahaReceiverBindingConstants.MENU_RETRY_DELAY;\n             if (totalWaitingTime > YamahaReceiverBindingConstants.MENU_MAX_WAITING_TIME) {\n-                throw new IOException(\n-                        \"Menu still not ready after \" + YamahaReceiverBindingConstants.MENU_MAX_WAITING_TIME + \"ms\");\n+                logger.info(\"Menu still not ready after \" + YamahaReceiverBindingConstants.MENU_MAX_WAITING_TIME + \"ms. The menu state will be out of sync.\");\n+                // ToDo: this needs to redesigned to allow for some sort of async update", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzA2OTUwNg=="}, "originalCommit": {"oid": "38a5c8e8a43342ccbf239c5b2a664c4153090424"}, "originalPosition": 24}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI2Nzk2NzY0OnYy", "diffSide": "RIGHT", "path": "bundles/org.openhab.binding.yamahareceiver/src/main/java/org/openhab/binding/yamahareceiver/internal/protocol/xml/XMLConnection.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNVQxOTo0MToxNlrOFeELFA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNVQyMjoyOToxMlrOFeIiWA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzA2OTk3Mg==", "bodyText": "Should this be constant, that could be a good place to include the unit in the name, because I hope that is milliseconds?", "url": "https://github.com/openhab/openhab-addons/pull/6835#discussion_r367069972", "createdAt": "2020-01-15T19:41:16Z", "author": {"login": "martinvw"}, "path": "bundles/org.openhab.binding.yamahareceiver/src/main/java/org/openhab/binding/yamahareceiver/internal/protocol/xml/XMLConnection.java", "diffHunk": "@@ -74,7 +74,7 @@ public XMLConnection(String host) {\n             connection.setRequestMethod(\"POST\");\n             connection.setRequestProperty(\"Content-Length\", Integer.toString(message.length()));\n \n-            connection.setConnectTimeout(5); // set a timeout in case the device is not reachable (went offline)\n+            connection.setConnectTimeout(5000); // set a timeout in case the device is not reachable (went offline)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "38a5c8e8a43342ccbf239c5b2a664c4153090424"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzE0MTQ2NA==", "bodyText": "Yes, that is milliseconds. This is the crux of the fix. Before I thought these were seconds (wanted 5 seconds).\nSure, a constant could be done added.", "url": "https://github.com/openhab/openhab-addons/pull/6835#discussion_r367141464", "createdAt": "2020-01-15T22:29:12Z", "author": {"login": "zarusz"}, "path": "bundles/org.openhab.binding.yamahareceiver/src/main/java/org/openhab/binding/yamahareceiver/internal/protocol/xml/XMLConnection.java", "diffHunk": "@@ -74,7 +74,7 @@ public XMLConnection(String host) {\n             connection.setRequestMethod(\"POST\");\n             connection.setRequestProperty(\"Content-Length\", Integer.toString(message.length()));\n \n-            connection.setConnectTimeout(5); // set a timeout in case the device is not reachable (went offline)\n+            connection.setConnectTimeout(5000); // set a timeout in case the device is not reachable (went offline)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzA2OTk3Mg=="}, "originalCommit": {"oid": "38a5c8e8a43342ccbf239c5b2a664c4153090424"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1084, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}