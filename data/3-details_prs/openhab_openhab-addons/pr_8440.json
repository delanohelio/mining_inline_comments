{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDgzMTI3MTE5", "number": 8440, "title": "[nuki] Add smart lock door sensor state as new channel (#8438)", "bodyText": "After one of the latest updates, the API of the Nuki smart lock device 2.0 includes the state of the door sensor.\nThis improvement adds a new channel to the Nuki SmartLock device in OpenHab which displays the door sensor state.\nThis PR includes the code changes, updated documentation and is already tested in my local demo and production environment.\nThis PR is related to issue #8438.\nLink to the JAR file:\nhttps://cloud.seeage.com/s/N3bZ7MpgRaoaMrZ", "createdAt": "2020-09-09T20:46:53Z", "url": "https://github.com/openhab/openhab-addons/pull/8440", "merged": true, "mergeCommit": {"oid": "c34ca5a52fe686551fca89c2b41600afd3164b5f"}, "closed": true, "closedAt": "2020-09-13T19:53:54Z", "author": {"login": "SeeAge"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdHS_ofAFqTQ4NTQwODQ1MA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdIe-l-gH2gAyNDgzMTI3MTE5Ojc1OGIyMTIwZWU2NmEwZjZlMWFkNDc1YTVmOGIyYjQwY2IxMTM1OWE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg1NDA4NDUw", "url": "https://github.com/openhab/openhab-addons/pull/8440#pullrequestreview-485408450", "createdAt": "2020-09-09T21:14:21Z", "commit": {"oid": "4687dd9de60634e46e30ad3dd3ded83cede30d78"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQyMToxNDoyMVrOHPajgg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQyMToxOTo0MVrOHPatSA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTkyNTc2Mg==", "bodyText": "Channels with options should be of item-type String.", "url": "https://github.com/openhab/openhab-addons/pull/8440#discussion_r485925762", "createdAt": "2020-09-09T21:14:21Z", "author": {"login": "Hilbrand"}, "path": "bundles/org.openhab.binding.nuki/src/main/resources/ESH-INF/thing/thing-types.xml", "diffHunk": "@@ -101,5 +101,21 @@\n \t\t\t</options>\n \t\t</state>\n \t</channel-type>\n+\t<channel-type id=\"smartlockDoorState\">\n+\t\t<item-type>Number</item-type>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4687dd9de60634e46e30ad3dd3ded83cede30d78"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTkyNjE5NQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\t<channel id=\"lowBattery\" typeId=\"system.low-battery\"/><channel typeId=\"smartlockDoorState\" id=\"doorsensorState\"></channel>\n          \n          \n            \n            \t\t\t<channel id=\"lowBattery\" typeId=\"system.low-battery\"/>\n          \n          \n            \n            \t\t\t<channel typeId=\"smartlockDoorState\" id=\"doorsensorState\"/>\n          \n      \n    \n    \n  \n\nBut this might also be fixed when you run mvn spotless:apply on the binding", "url": "https://github.com/openhab/openhab-addons/pull/8440#discussion_r485926195", "createdAt": "2020-09-09T21:15:14Z", "author": {"login": "Hilbrand"}, "path": "bundles/org.openhab.binding.nuki/src/main/resources/ESH-INF/thing/thing-types.xml", "diffHunk": "@@ -46,7 +46,7 @@\n \t\t<channels>\n \t\t\t<channel id=\"lock\" typeId=\"smartlockLock\"/>\n \t\t\t<channel id=\"lockState\" typeId=\"smartlockState\"/>\n-\t\t\t<channel id=\"lowBattery\" typeId=\"system.low-battery\"/>\n+\t\t\t<channel id=\"lowBattery\" typeId=\"system.low-battery\"/><channel typeId=\"smartlockDoorState\" id=\"doorsensorState\"></channel>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4687dd9de60634e46e30ad3dd3ded83cede30d78"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTkyODI2NA==", "bodyText": "These constants don't seem to be used? Can they be removed.", "url": "https://github.com/openhab/openhab-addons/pull/8440#discussion_r485928264", "createdAt": "2020-09-09T21:19:41Z", "author": {"login": "Hilbrand"}, "path": "bundles/org.openhab.binding.nuki/src/main/java/org/openhab/binding/nuki/internal/NukiBindingConstants.java", "diffHunk": "@@ -86,4 +88,12 @@\n     // Nuki Binding additional Lock States\n     public static final int LOCK_STATES_UNLOCKING_LOCKNGO = 1002;\n     public static final int LOCK_STATES_UNLATCHING_LOCKNGO = 1007;\n+\n+    // Nuki Binding Door States", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4687dd9de60634e46e30ad3dd3ded83cede30d78"}, "originalPosition": 21}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "00119e725687b3ddebf57bfae9a23b93fe3583f4", "author": {"user": {"login": "SeeAge", "name": "Christian H\u00f6fler"}}, "url": "https://github.com/openhab/openhab-addons/commit/00119e725687b3ddebf57bfae9a23b93fe3583f4", "committedDate": "2020-09-09T21:43:40Z", "message": "[nuki] Add smart lock door sensor state as new channel (#8438)\n\nSigned-off-by: Christian H\u00f6fler <github@seeage.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7ac235c3515df439a0e60552e611ea0ae3ac9820", "author": {"user": {"login": "SeeAge", "name": "Christian H\u00f6fler"}}, "url": "https://github.com/openhab/openhab-addons/commit/7ac235c3515df439a0e60552e611ea0ae3ac9820", "committedDate": "2020-09-09T21:43:40Z", "message": "[nuki] Add smart lock door sensor state as new channel (#8438)\n\n- convert spaces to tabs in xml file\n- fix tab formatting in README file\n\nSigned-off-by: Christian H\u00f6fler <github@seeage.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7f36acc3b1caacedca754ffbee56f57c2d2c6e64", "author": {"user": {"login": "SeeAge", "name": "Christian H\u00f6fler"}}, "url": "https://github.com/openhab/openhab-addons/commit/7f36acc3b1caacedca754ffbee56f57c2d2c6e64", "committedDate": "2020-09-09T21:43:40Z", "message": "Update bundles/org.openhab.binding.nuki/src/main/resources/ESH-INF/thing/thing-types.xml\n\nCo-authored-by: Hilbrand Bouwkamp <hilbrand@h72.nl>\nSigned-off-by: Christian H\u00f6fler <github@seeage.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fbfc0d05bc92df4badce3cefd34c335c098f2f86", "author": {"user": {"login": "SeeAge", "name": "Christian H\u00f6fler"}}, "url": "https://github.com/openhab/openhab-addons/commit/fbfc0d05bc92df4badce3cefd34c335c098f2f86", "committedDate": "2020-09-09T21:38:57Z", "message": "Update bundles/org.openhab.binding.nuki/src/main/resources/ESH-INF/thing/thing-types.xml\n\nCo-authored-by: Hilbrand Bouwkamp <hilbrand@h72.nl>"}, "afterCommit": {"oid": "7f36acc3b1caacedca754ffbee56f57c2d2c6e64", "author": {"user": {"login": "SeeAge", "name": "Christian H\u00f6fler"}}, "url": "https://github.com/openhab/openhab-addons/commit/7f36acc3b1caacedca754ffbee56f57c2d2c6e64", "committedDate": "2020-09-09T21:43:40Z", "message": "Update bundles/org.openhab.binding.nuki/src/main/resources/ESH-INF/thing/thing-types.xml\n\nCo-authored-by: Hilbrand Bouwkamp <hilbrand@h72.nl>\nSigned-off-by: Christian H\u00f6fler <github@seeage.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg3MzA5MjU0", "url": "https://github.com/openhab/openhab-addons/pull/8440#pullrequestreview-487309254", "createdAt": "2020-09-13T13:53:32Z", "commit": {"oid": "7f36acc3b1caacedca754ffbee56f57c2d2c6e64"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xM1QxMzo1MzozMlrOHQ8niQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xM1QxMzo1MzozMlrOHQ8niQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzUzMjQyNQ==", "bodyText": "For consistency:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\t<channel typeId=\"smartlockDoorState\" id=\"doorsensorState\"/>\n          \n          \n            \n            \t\t\t<channel id=\"doorsensorState\" typeId=\"smartlockDoorState\"/>", "url": "https://github.com/openhab/openhab-addons/pull/8440#discussion_r487532425", "createdAt": "2020-09-13T13:53:32Z", "author": {"login": "Hilbrand"}, "path": "bundles/org.openhab.binding.nuki/src/main/resources/ESH-INF/thing/thing-types.xml", "diffHunk": "@@ -47,6 +47,7 @@\n \t\t\t<channel id=\"lock\" typeId=\"smartlockLock\"/>\n \t\t\t<channel id=\"lockState\" typeId=\"smartlockState\"/>\n \t\t\t<channel id=\"lowBattery\" typeId=\"system.low-battery\"/>\n+\t\t\t<channel typeId=\"smartlockDoorState\" id=\"doorsensorState\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7f36acc3b1caacedca754ffbee56f57c2d2c6e64"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "758b2120ee66a0f6e1ad475a5f8b2b40cb11359a", "author": {"user": {"login": "Hilbrand", "name": "Hilbrand Bouwkamp"}}, "url": "https://github.com/openhab/openhab-addons/commit/758b2120ee66a0f6e1ad475a5f8b2b40cb11359a", "committedDate": "2020-09-13T13:54:09Z", "message": "Change of consistency: swapped parameters."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4845, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}