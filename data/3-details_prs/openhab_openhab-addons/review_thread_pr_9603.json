{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQ2OTkyMjQ2", "number": 9603, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0zMVQxMzo0ODo0M1rOFKScYg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wMlQyMDowNjoyM1rOFKmeLQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ2MzMyMjU4OnYy", "diffSide": "RIGHT", "path": "bundles/org.openhab.binding.nikobus/src/main/java/org/openhab/binding/nikobus/internal/handler/NikobusPcLinkHandler.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0zMVQxMzo0ODo0M1rOIM_Dyw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0zMVQxMzo0ODo0M1rOIM_Dyw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDQ4Njk4Nw==", "bodyText": "The log message could be removed, as the status update is already logged by the framework.\nThe state change originated by updateStatus() is logged to events.log. Including the status detail message.", "url": "https://github.com/openhab/openhab-addons/pull/9603#discussion_r550486987", "createdAt": "2020-12-31T13:48:43Z", "author": {"login": "fwolter"}, "path": "bundles/org.openhab.binding.nikobus/src/main/java/org/openhab/binding/nikobus/internal/handler/NikobusPcLinkHandler.java", "diffHunk": "@@ -329,6 +329,22 @@ private void refresh() {\n         List<Thing> things = getThing().getThings().stream()\n                 .filter(thing -> thing.getHandler() instanceof NikobusModuleHandler).collect(Collectors.toList());\n \n+\n+        // if there are command listeners then we need an open connection even if no modules exist\n+        if (!commandListeners.isEmpty()) {\n+            NikobusConnection connection = this.connection;\n+            if (connection == null) {\n+                return;\n+            }        \t\n+            try {\n+                connectIfNeeded(connection);\n+            } catch (IOException e) {\n+                logger.debug(\"refresh failed due {}\", e.getMessage(), e);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0baf8e5dfab3a831eea7502f6cb11093f1738c15"}, "originalPosition": 25}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ2MzQyMjg1OnYy", "diffSide": "RIGHT", "path": "bundles/org.openhab.binding.daikin/deploy.sh", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0zMVQxNTowMTo0NlrOIM_3nQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0zMVQxNjowOTo0MlrOINBDqw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDUwMDI1Mw==", "bodyText": "Can you remove this?", "url": "https://github.com/openhab/openhab-addons/pull/9603#discussion_r550500253", "createdAt": "2020-12-31T15:01:46Z", "author": {"login": "fwolter"}, "path": "bundles/org.openhab.binding.daikin/deploy.sh", "diffHunk": "@@ -0,0 +1,2 @@\n+cp ./target/org.openhab.binding.daikin-3.1.0-SNAPSHOT.jar /Volumes/openhab/share/addons/", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5a6a187a1c330a7b005bbf9adcf975220a77f662"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDUxOTcyMw==", "bodyText": "oops, yes", "url": "https://github.com/openhab/openhab-addons/pull/9603#discussion_r550519723", "createdAt": "2020-12-31T16:09:42Z", "author": {"login": "gitwouter"}, "path": "bundles/org.openhab.binding.daikin/deploy.sh", "diffHunk": "@@ -0,0 +1,2 @@\n+cp ./target/org.openhab.binding.daikin-3.1.0-SNAPSHOT.jar /Volumes/openhab/share/addons/", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDUwMDI1Mw=="}, "originalCommit": {"oid": "5a6a187a1c330a7b005bbf9adcf975220a77f662"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ2NjYwMzk3OnYy", "diffSide": "RIGHT", "path": "bundles/org.openhab.binding.nikobus/src/main/java/org/openhab/binding/nikobus/internal/handler/NikobusPcLinkHandler.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wMlQyMDowNjoyM1rOINZQmA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wM1QwODo0MzowNVrOINc4NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDkxNjI0OA==", "bodyText": "Should this function return at this point? Or should the handler still be refreshed even if the thing is offline?", "url": "https://github.com/openhab/openhab-addons/pull/9603#discussion_r550916248", "createdAt": "2021-01-02T20:06:23Z", "author": {"login": "cpmeister"}, "path": "bundles/org.openhab.binding.nikobus/src/main/java/org/openhab/binding/nikobus/internal/handler/NikobusPcLinkHandler.java", "diffHunk": "@@ -329,6 +329,20 @@ private void refresh() {\n         List<Thing> things = getThing().getThings().stream()\n                 .filter(thing -> thing.getHandler() instanceof NikobusModuleHandler).collect(Collectors.toList());\n \n+        // if there are command listeners then we need an open connection even if no modules exist\n+        if (!commandListeners.isEmpty()) {\n+            NikobusConnection connection = this.connection;\n+            if (connection == null) {\n+                return;\n+            }\n+            try {\n+                connectIfNeeded(connection);\n+            } catch (IOException e) {\n+                connection.close();\n+                updateStatus(ThingStatus.OFFLINE, ThingStatusDetail.COMMUNICATION_ERROR, e.getMessage());\n+            }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8b5fde768308e1ee809c8d0e83a326674610674f"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDk3NTU0MQ==", "bodyText": "good point, continuing does not make much sense if the connection is not available.", "url": "https://github.com/openhab/openhab-addons/pull/9603#discussion_r550975541", "createdAt": "2021-01-03T08:43:05Z", "author": {"login": "gitwouter"}, "path": "bundles/org.openhab.binding.nikobus/src/main/java/org/openhab/binding/nikobus/internal/handler/NikobusPcLinkHandler.java", "diffHunk": "@@ -329,6 +329,20 @@ private void refresh() {\n         List<Thing> things = getThing().getThings().stream()\n                 .filter(thing -> thing.getHandler() instanceof NikobusModuleHandler).collect(Collectors.toList());\n \n+        // if there are command listeners then we need an open connection even if no modules exist\n+        if (!commandListeners.isEmpty()) {\n+            NikobusConnection connection = this.connection;\n+            if (connection == null) {\n+                return;\n+            }\n+            try {\n+                connectIfNeeded(connection);\n+            } catch (IOException e) {\n+                connection.close();\n+                updateStatus(ThingStatus.OFFLINE, ThingStatusDetail.COMMUNICATION_ERROR, e.getMessage());\n+            }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDkxNjI0OA=="}, "originalCommit": {"oid": "8b5fde768308e1ee809c8d0e83a326674610674f"}, "originalPosition": 26}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3446, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}