{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMzNDIwNjQw", "number": 7900, "title": "[deconz] Adjust color-temperature handling, Extend bulb support", "bodyText": "Add scaling of upper\\lower level for ct values\nAdd IKEA CWS bulb support\nSigned-off-by: Benjamin Hahn benjamin@pikas-page.de", "createdAt": "2020-06-12T01:55:28Z", "url": "https://github.com/openhab/openhab-addons/pull/7900", "merged": true, "mergeCommit": {"oid": "86ad836bcf1b928b87e66919db4428e3be628bf6"}, "closed": true, "closedAt": "2020-06-18T20:35:59Z", "author": {"login": "HahnBenjamin"}, "timelineItems": {"totalCount": 27, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcqY-drgBqjM0MzY2MDMwNzY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcskjMBAFqTQzMzYyNjUwNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "46c4f34e17079ba79e7268fea421f058534b4547", "author": {"user": {"login": "HahnBenjamin", "name": "Benjamin Hahn"}}, "url": "https://github.com/openhab/openhab-addons/commit/46c4f34e17079ba79e7268fea421f058534b4547", "committedDate": "2020-06-12T01:20:02Z", "message": "Add support for IKEA CWS bulb"}, "afterCommit": {"oid": "ae8a067095643ffce9e29d84ec03c0171b1b2f73", "author": {"user": {"login": "HahnBenjamin", "name": "Benjamin Hahn"}}, "url": "https://github.com/openhab/openhab-addons/commit/ae8a067095643ffce9e29d84ec03c0171b1b2f73", "committedDate": "2020-06-12T01:56:39Z", "message": "Add support for IKEA CWS bulb\n\nSigned-off-by: Benajmin Hahn <benjamin@pikas-page.de>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI5NDU4OTUx", "url": "https://github.com/openhab/openhab-addons/pull/7900#pullrequestreview-429458951", "createdAt": "2020-06-12T04:50:02Z", "commit": {"oid": "ae8a067095643ffce9e29d84ec03c0171b1b2f73"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQwNDo1MDowM1rOGi28iA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQwNDo1MzoyOVrOGi2_gQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTIwNTAwMA==", "bodyText": "Please make these variable names camelcase.", "url": "https://github.com/openhab/openhab-addons/pull/7900#discussion_r439205000", "createdAt": "2020-06-12T04:50:03Z", "author": {"login": "cpmeister"}, "path": "bundles/org.openhab.binding.deconz/src/main/java/org/openhab/binding/deconz/internal/handler/LightThingHandler.java", "diffHunk": "@@ -78,8 +83,13 @@\n     private LightState lightStateCache = new LightState();\n     private LightState lastCommand = new LightState();\n \n+    private final int CT_MAX;\n+    private final int CT_MIN;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ae8a067095643ffce9e29d84ec03c0171b1b2f73"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTIwNTU3MQ==", "bodyText": "The standard openhab coding format requires that all if statements should have brackets.", "url": "https://github.com/openhab/openhab-addons/pull/7900#discussion_r439205571", "createdAt": "2020-06-12T04:52:36Z", "author": {"login": "cpmeister"}, "path": "bundles/org.openhab.binding.deconz/src/main/java/org/openhab/binding/deconz/internal/discovery/ThingDiscoveryService.java", "diffHunk": "@@ -109,10 +113,15 @@ private void addLight(String lightID, LightMessage light) {\n             return;\n         }\n \n-        if (light.uniqueid.isEmpty()) {\n-            logger.warn(\"No unique id reported for light {} ({})\", light.modelid, light.name);\n-            return;\n-        }\n+        Map<String, Object> properties = new HashMap<>();\n+        properties.put(Thing.PROPERTY_FIRMWARE_VERSION, light.swversion);\n+        properties.put(Thing.PROPERTY_VENDOR, light.manufacturername);\n+        properties.put(Thing.PROPERTY_MODEL_ID, light.modelid);\n+\n+        if (light.ctmax != null)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ae8a067095643ffce9e29d84ec03c0171b1b2f73"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTIwNTc2MQ==", "bodyText": "Why not put these in the properties map to begin with? It would make things consistent.", "url": "https://github.com/openhab/openhab-addons/pull/7900#discussion_r439205761", "createdAt": "2020-06-12T04:53:29Z", "author": {"login": "cpmeister"}, "path": "bundles/org.openhab.binding.deconz/src/main/java/org/openhab/binding/deconz/internal/discovery/ThingDiscoveryService.java", "diffHunk": "@@ -147,8 +159,12 @@ private void addLight(String lightID, LightMessage light) {\n \n         ThingUID uid = new ThingUID(thingTypeUID, bridgeUID, light.uniqueid.replaceAll(\"[^a-z0-9\\\\[\\\\]]\", \"\"));\n         DiscoveryResult discoveryResult = DiscoveryResultBuilder.create(uid).withBridge(bridgeUID)\n-                .withLabel(light.name + \" (\" + light.manufacturername + \")\").withProperty(\"id\", lightID)\n-                .withProperty(UNIQUE_ID, light.uniqueid).withRepresentationProperty(UNIQUE_ID).build();\n+                .withLabel(light.name + \" (\" + light.manufacturername + \")\")\n+                .withProperty(\"id\", lightID)\n+                .withProperty(UNIQUE_ID, light.uniqueid)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ae8a067095643ffce9e29d84ec03c0171b1b2f73"}, "originalPosition": 65}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI5NDYwMjUx", "url": "https://github.com/openhab/openhab-addons/pull/7900#pullrequestreview-429460251", "createdAt": "2020-06-12T04:55:07Z", "commit": {"oid": "ae8a067095643ffce9e29d84ec03c0171b1b2f73"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQwNDo1NTowOFrOGi3Ayg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQwNDo1NTowOFrOGi3Ayg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTIwNjA5MA==", "bodyText": "please apply formatting here", "url": "https://github.com/openhab/openhab-addons/pull/7900#discussion_r439206090", "createdAt": "2020-06-12T04:55:08Z", "author": {"login": "cpmeister"}, "path": "bundles/org.openhab.binding.deconz/src/main/java/org/openhab/binding/deconz/internal/discovery/ThingDiscoveryService.java", "diffHunk": "@@ -129,6 +138,9 @@ private void addLight(String lightID, LightMessage light) {\n             case COLOR_DIMMABLE_LIGHT:\n                 thingTypeUID = THING_TYPE_COLOR_LIGHT;\n                 break;\n+            case COLOR_LIGHT:\n+                 thingTypeUID = (light.ctmin != null) ?THING_TYPE_EXTENDED_COLOR_LIGHT :THING_TYPE_COLOR_LIGHT;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ae8a067095643ffce9e29d84ec03c0171b1b2f73"}, "originalPosition": 52}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMyNTU4NTQy", "url": "https://github.com/openhab/openhab-addons/pull/7900#pullrequestreview-432558542", "createdAt": "2020-06-17T16:12:18Z", "commit": {"oid": "72c30a660eb0dc257e616cf771c29285d42738c5"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMyNjA5NjU4", "url": "https://github.com/openhab/openhab-addons/pull/7900#pullrequestreview-432609658", "createdAt": "2020-06-17T17:14:57Z", "commit": {"oid": "72c30a660eb0dc257e616cf771c29285d42738c5"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxNzoxNDo1N1rOGlPV7A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxNzoyMTo1NFrOGlPk-w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTcwMTg2OA==", "bodyText": "define private static final int CT_MAX = 500; in this class\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        properties.put(PROPERTY_CT_MAX, Integer.toString(light.ctmax));\n          \n          \n            \n                        int ctmax = light.ctmax > 500 ? 500 : light.ctmax;\n          \n          \n            \n                        properties.put(PROPERTY_CT_MAX, Integer.toString(ctmax));\n          \n      \n    \n    \n  \n\nand the same for min", "url": "https://github.com/openhab/openhab-addons/pull/7900#discussion_r441701868", "createdAt": "2020-06-17T17:14:57Z", "author": {"login": "J-N-K"}, "path": "bundles/org.openhab.binding.deconz/src/main/java/org/openhab/binding/deconz/internal/discovery/ThingDiscoveryService.java", "diffHunk": "@@ -109,9 +113,17 @@ private void addLight(String lightID, LightMessage light) {\n             return;\n         }\n \n-        if (light.uniqueid.isEmpty()) {\n-            logger.warn(\"No unique id reported for light {} ({})\", light.modelid, light.name);\n-            return;\n+        Map<String, Object> properties = new HashMap<>();\n+        properties.put(\"id\", lightType);\n+        properties.put(UNIQUE_ID, light.uniqueid);\n+        properties.put(Thing.PROPERTY_FIRMWARE_VERSION, light.swversion);\n+        properties.put(Thing.PROPERTY_FIRMWARE_VERSION, light.swversion);\n+        properties.put(Thing.PROPERTY_VENDOR, light.manufacturername);\n+        properties.put(Thing.PROPERTY_MODEL_ID, light.modelid);\n+\n+        if (light.ctmax != null && light.ctmin != null) {\n+            properties.put(PROPERTY_CT_MAX, Integer.toString(light.ctmax));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "72c30a660eb0dc257e616cf771c29285d42738c5"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTcwNTcyMw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    return (int) (ct / 100.0 * (ct_max - ct_min) + ct_min);\n          \n          \n            \n                    int ctMired =(int) (100000.0 / ct);\n          \n          \n            \n                    if (ctMired > ctmax) {\n          \n          \n            \n                        return ctmax;\n          \n          \n            \n                    } else if (ctMired < ctmin) {\n          \n          \n            \n                        return ctmin;\n          \n          \n            \n                    } else {\n          \n          \n            \n                        return ctMired;\n          \n          \n            \n                    }\n          \n      \n    \n    \n  \n\nand the conversion in the other direction below. We can add teh dynamic state description later. You haver to adjust the documentation accordingly (color temperature is not 0->100 but xxx K -> xxx K. If you change that today, we can merge it before the 2.5.6 release and it is not a breaking change since 2.5.5 did not contain light support for deconz.", "url": "https://github.com/openhab/openhab-addons/pull/7900#discussion_r441705723", "createdAt": "2020-06-17T17:21:54Z", "author": {"login": "J-N-K"}, "path": "bundles/org.openhab.binding.deconz/src/main/java/org/openhab/binding/deconz/internal/handler/LightThingHandler.java", "diffHunk": "@@ -316,12 +326,12 @@ public void messageReceived(String sensorID, DeconzBaseMessage message) {\n         }\n     }\n \n-    private int unscaleColorTemperature(double ct) {\n-        return (int) (ct / 100.0 * (500 - 153) + 153);\n+    private int unscaleColorTemperature(final double ct) {\n+        return (int) (ct / 100.0 * (ct_max - ct_min) + ct_min);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "72c30a660eb0dc257e616cf771c29285d42738c5"}, "originalPosition": 70}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "72c30a660eb0dc257e616cf771c29285d42738c5", "author": {"user": {"login": "HahnBenjamin", "name": "Benjamin Hahn"}}, "url": "https://github.com/openhab/openhab-addons/commit/72c30a660eb0dc257e616cf771c29285d42738c5", "committedDate": "2020-06-15T22:37:49Z", "message": "Apply correct type for \"Color lights\""}, "afterCommit": {"oid": "329baeba79f9120c41032a0fef24af26db3e31fd", "author": {"user": {"login": "HahnBenjamin", "name": "Benjamin Hahn"}}, "url": "https://github.com/openhab/openhab-addons/commit/329baeba79f9120c41032a0fef24af26db3e31fd", "committedDate": "2020-06-17T23:46:14Z", "message": "Adjust documentation\n\nSigned-off-by: Benajmin Hahn <benjamin@pikas-page.de>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9565894181c0b7261a7469c325027347a75f00b9", "author": {"user": {"login": "HahnBenjamin", "name": "Benjamin Hahn"}}, "url": "https://github.com/openhab/openhab-addons/commit/9565894181c0b7261a7469c325027347a75f00b9", "committedDate": "2020-06-18T00:06:23Z", "message": "Add property for ct colormode upper and lower limit\n\nSigned-off-by: Benajmin Hahn <benjamin@pikas-page.de>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6ce0cc84cd3eddf385137a16a187a58caa37fc1d", "author": {"user": {"login": "HahnBenjamin", "name": "Benjamin Hahn"}}, "url": "https://github.com/openhab/openhab-addons/commit/6ce0cc84cd3eddf385137a16a187a58caa37fc1d", "committedDate": "2020-06-18T00:06:23Z", "message": "Expose generic bulb information as properties\n\nSigned-off-by: Benajmin Hahn <benjamin@pikas-page.de>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "937d3ad862092dd6948b123e85545fbacb9ce56d", "author": {"user": {"login": "HahnBenjamin", "name": "Benjamin Hahn"}}, "url": "https://github.com/openhab/openhab-addons/commit/937d3ad862092dd6948b123e85545fbacb9ce56d", "committedDate": "2020-06-18T00:06:23Z", "message": "Adjust scaling of color temp range to bulb limits\n\nSigned-off-by: Benajmin Hahn <benjamin@pikas-page.de>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dd93435e53595e23a5a44b08219a4608c0b8e052", "author": {"user": {"login": "HahnBenjamin", "name": "Benjamin Hahn"}}, "url": "https://github.com/openhab/openhab-addons/commit/dd93435e53595e23a5a44b08219a4608c0b8e052", "committedDate": "2020-06-18T00:06:23Z", "message": "Adjust indention\n\nSigned-off-by: Benajmin Hahn <benjamin@pikas-page.de>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "14bcfef1d78d4a80c647b18945e3cd1f6ba47baf", "author": {"user": {"login": "HahnBenjamin", "name": "Benjamin Hahn"}}, "url": "https://github.com/openhab/openhab-addons/commit/14bcfef1d78d4a80c647b18945e3cd1f6ba47baf", "committedDate": "2020-06-18T00:06:23Z", "message": "Add support for IKEA CWS bulb\n\nSigned-off-by: Benajmin Hahn <benjamin@pikas-page.de>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0879f4dd89c61cd1a77fd33b2f1badadbd8b0829", "author": {"user": {"login": "HahnBenjamin", "name": "Benjamin Hahn"}}, "url": "https://github.com/openhab/openhab-addons/commit/0879f4dd89c61cd1a77fd33b2f1badadbd8b0829", "committedDate": "2020-06-18T00:06:23Z", "message": "Apply codestyle\n\nSigned-off-by: Benajmin Hahn <benjamin@pikas-page.de>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0d8942cf7c322d700c0a253a00e2246fcf659b38", "author": {"user": {"login": "HahnBenjamin", "name": "Benjamin Hahn"}}, "url": "https://github.com/openhab/openhab-addons/commit/0d8942cf7c322d700c0a253a00e2246fcf659b38", "committedDate": "2020-06-18T00:06:23Z", "message": "Consolidate property handling\n\nSigned-off-by: Benajmin Hahn <benjamin@pikas-page.de>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "54e063b1f1b7286d53a6f1ce0b0384ee616515ab", "author": {"user": {"login": "HahnBenjamin", "name": "Benjamin Hahn"}}, "url": "https://github.com/openhab/openhab-addons/commit/54e063b1f1b7286d53a6f1ce0b0384ee616515ab", "committedDate": "2020-06-18T00:06:23Z", "message": "Apply correct type for \"Color lights\"\n\nSigned-off-by: Benajmin Hahn <benjamin@pikas-page.de>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f4b62c05f7c0e92a4840be461d207c2d9f6db88f", "author": {"user": {"login": "HahnBenjamin", "name": "Benjamin Hahn"}}, "url": "https://github.com/openhab/openhab-addons/commit/f4b62c05f7c0e92a4840be461d207c2d9f6db88f", "committedDate": "2020-06-18T00:06:23Z", "message": "Define CT Constants according to ZCL Spec\nSee ZigBee Cluster Library Specification Page 5-5 - 327\n\nSigned-off-by: Benajmin Hahn <benjamin@pikas-page.de>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "393905b8121fda883c8e2ce49f3a50c1a22a2103", "author": {"user": {"login": "HahnBenjamin", "name": "Benjamin Hahn"}}, "url": "https://github.com/openhab/openhab-addons/commit/393905b8121fda883c8e2ce49f3a50c1a22a2103", "committedDate": "2020-06-18T00:06:23Z", "message": "Fix property handling\n\nSigned-off-by: Benajmin Hahn <benjamin@pikas-page.de>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c869c4167ec5fc848734a91b064d3e5fa9ffe9ce", "author": {"user": {"login": "HahnBenjamin", "name": "Benjamin Hahn"}}, "url": "https://github.com/openhab/openhab-addons/commit/c869c4167ec5fc848734a91b064d3e5fa9ffe9ce", "committedDate": "2020-06-18T00:08:36Z", "message": "Use Kelvin for color temperature channel\n\nSigned-off-by: Benajmin Hahn <benjamin@pikas-page.de>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "902ddc392d4d505dce72f145b8a36899266684ca", "author": {"user": {"login": "HahnBenjamin", "name": "Benjamin Hahn"}}, "url": "https://github.com/openhab/openhab-addons/commit/902ddc392d4d505dce72f145b8a36899266684ca", "committedDate": "2020-06-18T00:08:36Z", "message": "Adjust thing type limits\n\nSigned-off-by: Benajmin Hahn <benjamin@pikas-page.de>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e64256c9543df13b6f08311c49fcab3f9cd54e20", "author": {"user": {"login": "HahnBenjamin", "name": "Benjamin Hahn"}}, "url": "https://github.com/openhab/openhab-addons/commit/e64256c9543df13b6f08311c49fcab3f9cd54e20", "committedDate": "2020-06-18T00:08:36Z", "message": "Fix tests for CT value in kelvin\n\nSigned-off-by: Benajmin Hahn <benjamin@pikas-page.de>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7797697deef693362a5d333ea633dccfe6da57b5", "author": {"user": {"login": "HahnBenjamin", "name": "Benjamin Hahn"}}, "url": "https://github.com/openhab/openhab-addons/commit/7797697deef693362a5d333ea633dccfe6da57b5", "committedDate": "2020-06-18T00:10:05Z", "message": "Apply spotless fixes\n\nSigned-off-by: Benajmin Hahn <benjamin@pikas-page.de>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "935e304b084391a1438880324f515f99e876788e", "author": {"user": {"login": "HahnBenjamin", "name": "Benjamin Hahn"}}, "url": "https://github.com/openhab/openhab-addons/commit/935e304b084391a1438880324f515f99e876788e", "committedDate": "2020-06-18T00:10:05Z", "message": "Adjust documentation\n\nSigned-off-by: Benajmin Hahn <benjamin@pikas-page.de>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "329baeba79f9120c41032a0fef24af26db3e31fd", "author": {"user": {"login": "HahnBenjamin", "name": "Benjamin Hahn"}}, "url": "https://github.com/openhab/openhab-addons/commit/329baeba79f9120c41032a0fef24af26db3e31fd", "committedDate": "2020-06-17T23:46:14Z", "message": "Adjust documentation\n\nSigned-off-by: Benajmin Hahn <benjamin@pikas-page.de>"}, "afterCommit": {"oid": "935e304b084391a1438880324f515f99e876788e", "author": {"user": {"login": "HahnBenjamin", "name": "Benjamin Hahn"}}, "url": "https://github.com/openhab/openhab-addons/commit/935e304b084391a1438880324f515f99e876788e", "committedDate": "2020-06-18T00:10:05Z", "message": "Adjust documentation\n\nSigned-off-by: Benajmin Hahn <benjamin@pikas-page.de>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMzMjI3NDQx", "url": "https://github.com/openhab/openhab-addons/pull/7900#pullrequestreview-433227441", "createdAt": "2020-06-18T12:23:36Z", "commit": {"oid": "935e304b084391a1438880324f515f99e876788e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQxMjoyMzozNlrOGls2nQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQxMjoyODo1M1rOGltCTg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjE4NTM3Mw==", "bodyText": "Maybe add a note below that the Color temperature range depends on the individual light.", "url": "https://github.com/openhab/openhab-addons/pull/7900#discussion_r442185373", "createdAt": "2020-06-18T12:23:36Z", "author": {"login": "J-N-K"}, "path": "bundles/org.openhab.binding.deconz/README.md", "diffHunk": "@@ -147,7 +147,7 @@ Other devices support\n | brightness        | Dimmer                   |     R/W     | Brightness of the light               | `dimmablelight`                               |                                 \n | switch            | Switch                   |     R/W     | State of a ON/OFF device              | `onofflight`                                  |\n | color             | Color                    |     R/W     | Color of an multi-color light         | `colorlight`, `extendedcolorlight`            |\n-| color_temperature | Number                   |     R/W     | `0`->`100` represents cold -> warm    | `colortemperaturelight`, `extendedcolorlight` |\n+| color_temperature | Number                   |     R/W     | Color temperature in kelvin           | `colortemperaturelight`, `extendedcolorlight` |", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "935e304b084391a1438880324f515f99e876788e"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjE4NjExOQ==", "bodyText": "According to http://dresden-elektronik.github.io/deconz-rest-doc/lights/#getstate the range is far more limited to 153-500. We should use that for the range check.\n\n\n\nstate.ct\nNumber (153..500)\nMired color temperature of the light. (2000K - 6500K)", "url": "https://github.com/openhab/openhab-addons/pull/7900#discussion_r442186119", "createdAt": "2020-06-18T12:24:54Z", "author": {"login": "J-N-K"}, "path": "bundles/org.openhab.binding.deconz/src/main/java/org/openhab/binding/deconz/internal/BindingConstants.java", "diffHunk": "@@ -107,4 +107,13 @@\n     public static final String CONFIG_APIKEY = \"apikey\";\n \n     public static final String UNIQUE_ID = \"uid\";\n+\n+    public static final String PROPERTY_CT_MIN = \"ctmin\";\n+    public static final String PROPERTY_CT_MAX = \"ctmax\";\n+\n+    // CT value range according to ZCL Spec", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "935e304b084391a1438880324f515f99e876788e"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjE4NzUxMA==", "bodyText": "Didn't see this before. We try to remove any dependency to Apache Commons. Please use Integer.parseInt or Integer.valueOf", "url": "https://github.com/openhab/openhab-addons/pull/7900#discussion_r442187510", "createdAt": "2020-06-18T12:27:19Z", "author": {"login": "J-N-K"}, "path": "bundles/org.openhab.binding.deconz/src/main/java/org/openhab/binding/deconz/internal/handler/LightThingHandler.java", "diffHunk": "@@ -78,8 +79,13 @@\n     private LightState lightStateCache = new LightState();\n     private LightState lastCommand = new LightState();\n \n+    private final int ct_max;\n+    private final int ct_min;\n+\n     public LightThingHandler(Thing thing, Gson gson) {\n         super(thing, gson);\n+        ct_max = NumberUtils.toInt(thing.getProperties().get(PROPERTY_CT_MAX), ZCL_CT_MAX);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "935e304b084391a1438880324f515f99e876788e"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjE4ODM2Ng==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t<state pattern=\"%d\" min=\"15\" max=\"100000\" step=\"100\"/>\n          \n          \n            \n            \t\t<state pattern=\"%d\" min=\"2000\" max=\"6500\" step=\"100\"/>\n          \n      \n    \n    \n  \n\nsee above", "url": "https://github.com/openhab/openhab-addons/pull/7900#discussion_r442188366", "createdAt": "2020-06-18T12:28:53Z", "author": {"login": "J-N-K"}, "path": "bundles/org.openhab.binding.deconz/src/main/resources/ESH-INF/thing/light-thing-types.xml", "diffHunk": "@@ -121,7 +121,7 @@\n \t<channel-type id=\"ct\">\n \t\t<item-type>Number</item-type>\n \t\t<label>Color Temperature</label>\n-\t\t<state pattern=\"%d\" min=\"0\" max=\"100\"/>\n+\t\t<state pattern=\"%d\" min=\"15\" max=\"100000\" step=\"100\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "935e304b084391a1438880324f515f99e876788e"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMzNDYyNDU5", "url": "https://github.com/openhab/openhab-addons/pull/7900#pullrequestreview-433462459", "createdAt": "2020-06-18T16:41:05Z", "commit": {"oid": "935e304b084391a1438880324f515f99e876788e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1a295433f45fc910c730958e5a2aef786f8da8d2", "author": {"user": {"login": "HahnBenjamin", "name": "Benjamin Hahn"}}, "url": "https://github.com/openhab/openhab-addons/commit/1a295433f45fc910c730958e5a2aef786f8da8d2", "committedDate": "2020-06-18T19:05:13Z", "message": "Update Readme\n\nSigned-off-by: Benajmin Hahn <benjamin@pikas-page.de>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "774f750cc2f1fa1b85a944d9935f53bd496e3e97", "author": {"user": {"login": "HahnBenjamin", "name": "Benjamin Hahn"}}, "url": "https://github.com/openhab/openhab-addons/commit/774f750cc2f1fa1b85a944d9935f53bd496e3e97", "committedDate": "2020-06-18T19:30:01Z", "message": "Remove apache.commons dependency\n\nSigned-off-by: Benajmin Hahn <benjamin@pikas-page.de>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMzNjI2NTA3", "url": "https://github.com/openhab/openhab-addons/pull/7900#pullrequestreview-433626507", "createdAt": "2020-06-18T20:33:46Z", "commit": {"oid": "774f750cc2f1fa1b85a944d9935f53bd496e3e97"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 228, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}