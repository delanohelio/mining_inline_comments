{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQ1MjgxMTcz", "number": 9505, "title": "[tr064] add rule action for phonebook", "bodyText": "Closes #9492\nSigned-off-by: Jan N. Klug jan.n.klug@rub.de", "createdAt": "2020-12-24T11:53:24Z", "url": "https://github.com/openhab/openhab-addons/pull/9505", "merged": true, "mergeCommit": {"oid": "06690bd37efc5666aeb2407ef86c5bb24fec3b5b"}, "closed": true, "closedAt": "2020-12-28T17:14:02Z", "author": {"login": "J-N-K"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdpSXlfgH2gAyNTQ1MjgxMTczOmUxM2EzMjhlMzVjMzI2MTdkZGFjMDFmYTI4OWRlMDljZjQ1YjYwZGQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdqfKr5gFqTU1ODk5OTc5NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e13a328e35c32617ddac01fa289de09cf45b60dd", "author": {"user": {"login": "J-N-K", "name": null}}, "url": "https://github.com/openhab/openhab-addons/commit/e13a328e35c32617ddac01fa289de09cf45b60dd", "committedDate": "2020-12-24T11:52:11Z", "message": "add rule action for phonebook\n\nSigned-off-by: Jan N. Klug <jan.n.klug@rub.de>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU4ODkxNDgz", "url": "https://github.com/openhab/openhab-addons/pull/9505#pullrequestreview-558891483", "createdAt": "2020-12-26T21:03:07Z", "commit": {"oid": "e13a328e35c32617ddac01fa289de09cf45b60dd"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNlQyMTowMzowN1rOILmNUw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNlQyMTowMzowN1rOILmNUw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTAzMTI1MQ==", "bodyText": "I just tested those changes and based on the description here would have expected that something like\nval tr064Actions = getActions(\"tr064\",\"tr064:fritzbox:2a28aee1ee\")\nval result = tr064Actions.phonebookLookup(\"01234567\")\n\nwould actually work as the other parameters are described as optional.\nBut the above rule code results in an error like\nScript execution of rule with UID 'fritzbox' failed: An error occurred during the script execution: index=3, size=3 in fritzbox\n\nUsing val result = tr064Actions.phonebookLookup(\"01234567\", null, null) works fine. Maybe might be good to update the readme here, so it's clear the parameters can't be ommited, but need to be set to null instead - or update the code if the parameters should be ommitable.", "url": "https://github.com/openhab/openhab-addons/pull/9505#discussion_r549031251", "createdAt": "2020-12-26T21:03:07Z", "author": {"login": "sgiehl"}, "path": "bundles/org.openhab.binding.tr064/README.md", "diffHunk": "@@ -127,4 +127,22 @@ If only a specific phonebook from the device should be used, this can be specifi\n The default is to use all available phonebooks from the specified thing.\n In case the format of the number in the phonebook and the format of the number from the channel are different (e.g. regarding country prefixes), the `matchCount` parameter can be used.\n The configured `matchCount` is counted from the right end and denotes the number of matching characters needed to consider this number as matching.\n+A `matchCount` of `0` is considered as \"match everything\".\n \n+## Rule Action\n+\n+The phonebooks of a `fritzbox` thing can be used to lookup a number from rules via a thing action:\n+\n+`String name = phonebookLookup(String number, String phonebook, int matchCount)`\n+\n+`phonebook` and `matchCount` are optional parameters.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e13a328e35c32617ddac01fa289de09cf45b60dd"}, "originalPosition": 12}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a042309609a02f566a2772d77e151118b11d0fe7", "author": {"user": {"login": "J-N-K", "name": null}}, "url": "https://github.com/openhab/openhab-addons/commit/a042309609a02f566a2772d77e151118b11d0fe7", "committedDate": "2020-12-27T09:12:24Z", "message": "address review comments\n\nSigned-off-by: Jan N. Klug <jan.n.klug@rub.de>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU4OTk5Nzk0", "url": "https://github.com/openhab/openhab-addons/pull/9505#pullrequestreview-558999794", "createdAt": "2020-12-28T05:20:47Z", "commit": {"oid": "a042309609a02f566a2772d77e151118b11d0fe7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3597, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}