{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEwMjg3ODUw", "number": 8875, "title": "[senechome] implement more data points (3.0)", "bodyText": "This is an Improvement PR. My last one was based on 2.5.x branch and got canceled for a good reason, here my rebase on the main branch.\nBackground\nTo control the Wallbox for my electric car I need to know the current on each phase separately to avoid kicking the main fuse of my house. In Winter I could draw 32A on all three phases, the main Fuse has 35A per Phase. Leaves 3A for the rest of my house including my Heating Pump. This is by far too less, I need to reduce the charging speed. But if the sun is shining, my PV will give me additional power that comes on top of the Grid, I can increase charging speed. And while I was on it I added some more values that could be interesting.\nSummary of changes\nI added these channels:\n\nSenecGridPowerPh1: Power draw from grid on Phase 1\nSenecGridPowerPh2: Power draw from grid on Phase 2\nSenecGridPowerPh3: Power draw from grid on Phase 3\nSenecGridCurrentPh1: Current draw from grid on Phase 1\nSenecGridCurrentPh2: Current draw from grid on Phase 2\nSenecGridCurrentPh3: Current draw from grid on Phase 3\nSenecGridVoltagePh1: Voltage Level on Phase 1\nSenecGridVoltagePh2: Voltage Level on Phase 2\nSenecGridVoltagePh3: Voltage Level on Phase 3\nSenecGridFrequency: Grid Frequency\nSenecBatteryStateValue: Value describing current action of battery (e.g. 14)\nSenecBatteryVoltage: Battery Voltage\nSenecLiveBatCharge: Live Bat Charge\nSenecLiveBatDischarge: Live Bat Discharge\nSenecLiveGridImport: Live Grid Import\nSenecLiveGridExport: Live Grid Export\n\nDownload\n2.5: org.openhab.binding.senechome-2.5.11-SNAPSHOT.zip\n3.0: org.openhab.binding.senechome-3.0.0-SNAPSHOT.zip", "createdAt": "2020-10-26T20:28:07Z", "url": "https://github.com/openhab/openhab-addons/pull/8875", "merged": true, "mergeCommit": {"oid": "067a8f795359793ccd8528a098281a877d4b6dc2"}, "closed": true, "closedAt": "2020-11-03T07:33:09Z", "author": {"login": "KorbinianP"}, "timelineItems": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdXHgjRgFqTUxOTI1MTM1MQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdYy7I6AFqTUyMjIwODI2NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE5MjUxMzUx", "url": "https://github.com/openhab/openhab-addons/pull/8875#pullrequestreview-519251351", "createdAt": "2020-10-29T01:02:03Z", "commit": {"oid": "c166efbfb22d3b0c082d78f7443fab914c472d29"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQwMTowMjowM1rOHqC1-Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQwMTowMjowM1rOHqC1-Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzg0ODgyNQ==", "bodyText": "You specified Number:Dimensionless so you should use a QuantityType here.", "url": "https://github.com/openhab/openhab-addons/pull/8875#discussion_r513848825", "createdAt": "2020-10-29T01:02:03Z", "author": {"login": "cpmeister"}, "path": "bundles/org.openhab.binding.senechome/src/main/java/org/openhab/binding/senechome/internal/SenecHomeHandler.java", "diffHunk": "@@ -156,6 +160,75 @@ private void refresh() {\n                             getSenecValue(response.energy.batteryFuelCharge).setScale(0, RoundingMode.HALF_UP),\n                             SmartHomeUnits.PERCENT));\n \n+            Channel channelGridCurrentPhase1 = getThing()\n+                    .getChannel(SenecHomeBindingConstants.CHANNEL_SENEC_GRID_CURRENT_PH1);\n+            updateState(channelGridCurrentPhase1.getUID(), new QuantityType<ElectricCurrent>(\n+                    getSenecValue(response.grid.currentGridCurrentPerPhase[0]).setScale(2, RoundingMode.HALF_UP),\n+                    SmartHomeUnits.AMPERE));\n+\n+            Channel channelGridCurrentPhase2 = getThing()\n+                    .getChannel(SenecHomeBindingConstants.CHANNEL_SENEC_GRID_CURRENT_PH2);\n+            updateState(channelGridCurrentPhase2.getUID(), new QuantityType<ElectricCurrent>(\n+                    getSenecValue(response.grid.currentGridCurrentPerPhase[1]).setScale(2, RoundingMode.HALF_UP),\n+                    SmartHomeUnits.AMPERE));\n+\n+            Channel channelGridCurrentPhase3 = getThing()\n+                    .getChannel(SenecHomeBindingConstants.CHANNEL_SENEC_GRID_CURRENT_PH3);\n+            updateState(channelGridCurrentPhase3.getUID(), new QuantityType<ElectricCurrent>(\n+                    getSenecValue(response.grid.currentGridCurrentPerPhase[2]).setScale(2, RoundingMode.HALF_UP),\n+                    SmartHomeUnits.AMPERE));\n+\n+            Channel channelGridPowerPhase1 = getThing()\n+                    .getChannel(SenecHomeBindingConstants.CHANNEL_SENEC_GRID_POWER_PH1);\n+            updateState(channelGridPowerPhase1.getUID(),\n+                    new QuantityType<Power>(\n+                            getSenecValue(response.grid.currentGridPowerPerPhase[0]).setScale(2, RoundingMode.HALF_UP),\n+                            SmartHomeUnits.WATT));\n+\n+            Channel channelGridPowerPhase2 = getThing()\n+                    .getChannel(SenecHomeBindingConstants.CHANNEL_SENEC_GRID_POWER_PH2);\n+            updateState(channelGridPowerPhase2.getUID(),\n+                    new QuantityType<Power>(\n+                            getSenecValue(response.grid.currentGridPowerPerPhase[1]).setScale(2, RoundingMode.HALF_UP),\n+                            SmartHomeUnits.WATT));\n+\n+            Channel channelGridPowerPhase3 = getThing()\n+                    .getChannel(SenecHomeBindingConstants.CHANNEL_SENEC_GRID_POWER_PH3);\n+            updateState(channelGridPowerPhase3.getUID(),\n+                    new QuantityType<Power>(\n+                            getSenecValue(response.grid.currentGridPowerPerPhase[2]).setScale(2, RoundingMode.HALF_UP),\n+                            SmartHomeUnits.WATT));\n+\n+            Channel channelGridVoltagePhase1 = getThing()\n+                    .getChannel(SenecHomeBindingConstants.CHANNEL_SENEC_GRID_VOLTAGE_PH1);\n+            updateState(channelGridVoltagePhase1.getUID(), new QuantityType<ElectricPotential>(\n+                    getSenecValue(response.grid.currentGridVoltagePerPhase[0]).setScale(2, RoundingMode.HALF_UP),\n+                    SmartHomeUnits.VOLT));\n+\n+            Channel channelGridVoltagePhase2 = getThing()\n+                    .getChannel(SenecHomeBindingConstants.CHANNEL_SENEC_GRID_VOLTAGE_PH2);\n+            updateState(channelGridVoltagePhase2.getUID(), new QuantityType<ElectricPotential>(\n+                    getSenecValue(response.grid.currentGridVoltagePerPhase[1]).setScale(2, RoundingMode.HALF_UP),\n+                    SmartHomeUnits.VOLT));\n+\n+            Channel channelGridVoltagePhase3 = getThing()\n+                    .getChannel(SenecHomeBindingConstants.CHANNEL_SENEC_GRID_VOLTAGE_PH3);\n+            updateState(channelGridVoltagePhase3.getUID(), new QuantityType<ElectricPotential>(\n+                    getSenecValue(response.grid.currentGridVoltagePerPhase[2]).setScale(2, RoundingMode.HALF_UP),\n+                    SmartHomeUnits.VOLT));\n+\n+            Channel channelGridFrequency = getThing()\n+                    .getChannel(SenecHomeBindingConstants.CHANNEL_SENEC_GRID_FREQUENCY);\n+            updateState(channelGridFrequency.getUID(),\n+                    new QuantityType<Frequency>(\n+                            getSenecValue(response.grid.currentGridFrequency).setScale(2, RoundingMode.HALF_UP),\n+                            SmartHomeUnits.HERTZ));\n+\n+            Channel channelBatteryStateValue = getThing()\n+                    .getChannel(SenecHomeBindingConstants.CHANNEL_SENEC_BATTERY_STATE_VALUE);\n+            updateState(channelBatteryStateValue.getUID(),\n+                    new DecimalType(getSenecValue(response.energy.batteryState).intValue()));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c166efbfb22d3b0c082d78f7443fab914c472d29"}, "originalPosition": 89}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a3663d24b1881a724cd477d737209526320f3045", "author": {"user": {"login": "KorbinianP", "name": "Korbinian Probst"}}, "url": "https://github.com/openhab/openhab-addons/commit/a3663d24b1881a724cd477d737209526320f3045", "committedDate": "2020-10-31T20:59:57Z", "message": "Add KorbinianP to CODEOWNERS for senechome\n\nSigned-off-by: Korbinian Probst <kp.droid.dev@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "640852a11cbcd86ab9443f682b8b86f6859788bd", "author": {"user": {"login": "KorbinianP", "name": "Korbinian Probst"}}, "url": "https://github.com/openhab/openhab-addons/commit/640852a11cbcd86ab9443f682b8b86f6859788bd", "committedDate": "2020-10-31T20:59:57Z", "message": "Implement Current, Voltage and Power for all three Phases\n\nSigned-off-by: Korbinian Probst <kp.droid.dev@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f6b234b5f0ae69253fd283590e79cbb85b0b169c", "author": {"user": {"login": "KorbinianP", "name": "Korbinian Probst"}}, "url": "https://github.com/openhab/openhab-addons/commit/f6b234b5f0ae69253fd283590e79cbb85b0b169c", "committedDate": "2020-10-31T20:59:58Z", "message": "Bugfix last commit, values are inside array\n\nSigned-off-by: Korbinian Probst <kp.droid.dev@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4a6c86bfc98bfe21280cfd7b142a7bac42633137", "author": {"user": {"login": "KorbinianP", "name": "Korbinian Probst"}}, "url": "https://github.com/openhab/openhab-addons/commit/4a6c86bfc98bfe21280cfd7b142a7bac42633137", "committedDate": "2020-10-31T20:59:58Z", "message": "Implement Grid Frequency\n\nSigned-off-by: Korbinian Probst <kp.droid.dev@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d3e92824678209c89400d2397a78e2573370c146", "author": {"user": {"login": "KorbinianP", "name": "Korbinian Probst"}}, "url": "https://github.com/openhab/openhab-addons/commit/d3e92824678209c89400d2397a78e2573370c146", "committedDate": "2020-10-31T20:59:58Z", "message": "Fix name of currentGridVoltagePerPhase\n\nSigned-off-by: Korbinian Probst <kp.droid.dev@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d7be5bac5b3d4263ddcb4188afc1f6f2efc42631", "author": {"user": {"login": "KorbinianP", "name": "Korbinian Probst"}}, "url": "https://github.com/openhab/openhab-addons/commit/d7be5bac5b3d4263ddcb4188afc1f6f2efc42631", "committedDate": "2020-10-31T20:59:59Z", "message": "Extend README.md with new parameters\n\nSigned-off-by: Korbinian Probst <kp.droid.dev@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "07352e7adfaec8289833538ea51d9171b456b564", "author": {"user": {"login": "KorbinianP", "name": "Korbinian Probst"}}, "url": "https://github.com/openhab/openhab-addons/commit/07352e7adfaec8289833538ea51d9171b456b564", "committedDate": "2020-10-31T20:59:59Z", "message": "Implement SenecBatteryStateValue for easier comparison of values in rules\n\nSigned-off-by: Korbinian Probst <kp.droid.dev@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d0f701d5d07298d39bc98754b35040694f9c9b0d", "author": {"user": {"login": "KorbinianP", "name": "Korbinian Probst"}}, "url": "https://github.com/openhab/openhab-addons/commit/d0f701d5d07298d39bc98754b35040694f9c9b0d", "committedDate": "2020-10-31T21:00:00Z", "message": "Implement new statistic data points and battery voltage\n\nbatteryVoltage\nliveBatCharge\nliveBatDischarge\nliveGridExport\n\nSigned-off-by: Korbinian Probst <kp.droid.dev@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d3fdb5684713e8fe22aa9803c3801358fe9eea96", "author": {"user": {"login": "KorbinianP", "name": "Korbinian Probst"}}, "url": "https://github.com/openhab/openhab-addons/commit/d3fdb5684713e8fe22aa9803c3801358fe9eea96", "committedDate": "2020-10-31T21:00:00Z", "message": "Bugfix item types\n\nSigned-off-by: Korbinian Probst <kp.droid.dev@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "70408038406e3af60cd2bcc4fd678ec7a204eb1b", "author": {"user": {"login": "KorbinianP", "name": "Korbinian Probst"}}, "url": "https://github.com/openhab/openhab-addons/commit/70408038406e3af60cd2bcc4fd678ec7a204eb1b", "committedDate": "2020-10-31T21:04:55Z", "message": "Implement Review findings, change channelBatteryStateValue to QuantityType\n\nSigned-off-by: Korbinian Probst <kp.droid.dev@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c166efbfb22d3b0c082d78f7443fab914c472d29", "author": {"user": {"login": "KorbinianP", "name": "Korbinian Probst"}}, "url": "https://github.com/openhab/openhab-addons/commit/c166efbfb22d3b0c082d78f7443fab914c472d29", "committedDate": "2020-10-26T20:26:01Z", "message": "Implement SenecBatteryStateValue for easier comparison of values in rules\n\nSigned-off-by: Korbinian Probst <kp.droid.dev@gmail.com>"}, "afterCommit": {"oid": "70408038406e3af60cd2bcc4fd678ec7a204eb1b", "author": {"user": {"login": "KorbinianP", "name": "Korbinian Probst"}}, "url": "https://github.com/openhab/openhab-addons/commit/70408038406e3af60cd2bcc4fd678ec7a204eb1b", "committedDate": "2020-10-31T21:04:55Z", "message": "Implement Review findings, change channelBatteryStateValue to QuantityType\n\nSigned-off-by: Korbinian Probst <kp.droid.dev@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIxMTk4NzEy", "url": "https://github.com/openhab/openhab-addons/pull/8875#pullrequestreview-521198712", "createdAt": "2020-11-01T07:16:07Z", "commit": {"oid": "70408038406e3af60cd2bcc4fd678ec7a204eb1b"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMVQwNzoxNjowN1rOHrs3zw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMVQwNzoxNjowN1rOHrs3zw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTU4NTk5OQ==", "bodyText": "You switched the item-type to Number so you need to change this back and use DecimalType again.", "url": "https://github.com/openhab/openhab-addons/pull/8875#discussion_r515585999", "createdAt": "2020-11-01T07:16:07Z", "author": {"login": "cpmeister"}, "path": "bundles/org.openhab.binding.senechome/src/main/java/org/openhab/binding/senechome/internal/SenecHomeHandler.java", "diffHunk": "@@ -228,7 +227,7 @@ private void refresh() {\n             Channel channelBatteryStateValue = getThing()\n                     .getChannel(SenecHomeBindingConstants.CHANNEL_SENEC_BATTERY_STATE_VALUE);\n             updateState(channelBatteryStateValue.getUID(),\n-                    new DecimalType(getSenecValue(response.energy.batteryState).intValue()));\n+                    new QuantityType<>(getSenecValue(response.energy.batteryState).intValue(), SmartHomeUnits.ONE));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "70408038406e3af60cd2bcc4fd678ec7a204eb1b"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ef06d7f5b7c565a632cddc0d441aad0341d62e97", "author": {"user": {"login": "KorbinianP", "name": "Korbinian Probst"}}, "url": "https://github.com/openhab/openhab-addons/commit/ef06d7f5b7c565a632cddc0d441aad0341d62e97", "committedDate": "2020-11-02T15:04:43Z", "message": "Revert change of channelBatteryStateValue from DecimalType to QuantityType\n\nSigned-off-by: Korbinian Probst <kp.droid.dev@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIyMjA4MjY0", "url": "https://github.com/openhab/openhab-addons/pull/8875#pullrequestreview-522208264", "createdAt": "2020-11-03T06:11:16Z", "commit": {"oid": "ef06d7f5b7c565a632cddc0d441aad0341d62e97"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4416, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}