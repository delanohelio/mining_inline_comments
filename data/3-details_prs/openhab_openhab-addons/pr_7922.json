{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM0MTkyNzAz", "number": 7922, "title": "[danfossairunit] Fixed null warnings and errors", "bodyText": "Signed-off-by: Kai Kreuzer kai@openhab.org", "createdAt": "2020-06-14T19:45:18Z", "url": "https://github.com/openhab/openhab-addons/pull/7922", "merged": true, "mergeCommit": {"oid": "dc5356332a7f6711a8e31609732675544b4eeff6"}, "closed": true, "closedAt": "2020-06-16T00:14:26Z", "author": {"login": "kaikreuzer"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcrRbxogH2gAyNDM0MTkyNzAzOmQ5MGQ5YzE2NjgzZWY3MWFmNjVmNDc0OGM3YjRmMTEzMGY0NTEzNzE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcrp5jmAFqTQzMTA3NDg2OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d90d9c16683ef71af65f4748c7b4f1130f451371", "author": {"user": {"login": "kaikreuzer", "name": "Kai Kreuzer"}}, "url": "https://github.com/openhab/openhab-addons/commit/d90d9c16683ef71af65f4748c7b4f1130f451371", "committedDate": "2020-06-14T19:43:33Z", "message": "fixed null warnings and errors\n\nSigned-off-by: Kai Kreuzer <kai@openhab.org>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMwODk4NTA5", "url": "https://github.com/openhab/openhab-addons/pull/7922#pullrequestreview-430898509", "createdAt": "2020-06-15T18:39:05Z", "commit": {"oid": "d90d9c16683ef71af65f4748c7b4f1130f451371"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxODozOTowNVrOGj-Jeg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxODo0NDoxOVrOGj-Uag==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDM3MTU3OA==", "bodyText": "I don't think this really fixes the null warning.\nYou would need to do your null check with a local variable instead of the field.\nAlso to reduce indentation changes I prefer the way it was written earlier, if only corrected slightly.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    if (hrv != null) {\n          \n          \n            \n                        DanfossAirUnit danfossAirUnit = hrv;\n          \n          \n            \n                    DanfossAirUnit danfossAirUnit = hrv;\n          \n          \n            \n                    if (hrv == null) {\n          \n          \n            \n                        return;\n          \n          \n            \n                    }", "url": "https://github.com/openhab/openhab-addons/pull/7922#discussion_r440371578", "createdAt": "2020-06-15T18:39:05Z", "author": {"login": "cpmeister"}, "path": "bundles/org.openhab.binding.danfossairunit/src/main/java/org/openhab/binding/danfossairunit/internal/DanfossAirUnitHandler.java", "diffHunk": "@@ -86,56 +87,55 @@ public void initialize() {\n         valueCache = new ValueCache(config.updateUnchangedValuesEveryMillis);\n         try {\n             hrv = new DanfossAirUnit(InetAddress.getByName(config.host), 30046);\n+            DanfossAirUnit danfossAirUnit = hrv;\n+            scheduler.execute(() -> {\n+                try {\n+                    thing.setProperty(PROPERTY_UNIT_NAME, danfossAirUnit.getUnitName());\n+                    thing.setProperty(PROPERTY_SERIAL, danfossAirUnit.getUnitSerialNumber());\n+                    pollingJob = scheduler.scheduleWithFixedDelay(this::updateAllChannels, 5, config.refreshInterval,\n+                            TimeUnit.SECONDS);\n+                    updateStatus(ThingStatus.ONLINE);\n+\n+                } catch (IOException e) {\n+                    updateStatus(ThingStatus.OFFLINE, ThingStatusDetail.OFFLINE.COMMUNICATION_ERROR, e.getMessage());\n+                }\n+            });\n         } catch (UnknownHostException e) {\n             updateStatus(ThingStatus.OFFLINE, ThingStatusDetail.OFFLINE.COMMUNICATION_ERROR,\n                     \"Unknown host: \" + config.host);\n             return;\n         }\n-\n-        scheduler.execute(() -> {\n-            try {\n-                thing.setProperty(PROPERTY_UNIT_NAME, hrv.getUnitName());\n-                thing.setProperty(PROPERTY_SERIAL, hrv.getUnitSerialNumber());\n-                pollingJob = scheduler.scheduleWithFixedDelay(this::updateAllChannels, 5, config.refreshInterval,\n-                        TimeUnit.SECONDS);\n-                updateStatus(ThingStatus.ONLINE);\n-\n-            } catch (IOException e) {\n-                updateStatus(ThingStatus.OFFLINE, ThingStatusDetail.OFFLINE.COMMUNICATION_ERROR, e.getMessage());\n-            }\n-        });\n     }\n \n     private void updateAllChannels() {\n-        if (hrv == null) {\n-            return;\n-        }\n-        DanfossAirUnit danfossAirUnit = hrv;\n-        logger.debug(\"Updating DanfossHRV data '{}'\", getThing().getUID());\n+        if (hrv != null) {\n+            DanfossAirUnit danfossAirUnit = hrv;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d90d9c16683ef71af65f4748c7b4f1130f451371"}, "originalPosition": 92}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDM3MjgyOQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            if (hrv != null) {\n          \n          \n            \n                                DanfossAirUnit danfossAirUnit = hrv;\n          \n          \n            \n                            DanfossAirUnit danfossAirUnit = hrv;\n          \n          \n            \n                            if (danfossAirUnit != null) {", "url": "https://github.com/openhab/openhab-addons/pull/7922#discussion_r440372829", "createdAt": "2020-06-15T18:41:21Z", "author": {"login": "cpmeister"}, "path": "bundles/org.openhab.binding.danfossairunit/src/main/java/org/openhab/binding/danfossairunit/internal/DanfossAirUnitHandler.java", "diffHunk": "@@ -62,15 +60,18 @@ public void handleCommand(ChannelUID channelUID, Command command) {\n             updateAllChannels();\n         } else {\n             try {\n-                if (hrv == null) {\n+                if (hrv != null) {\n+                    DanfossAirUnit danfossAirUnit = hrv;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d90d9c16683ef71af65f4748c7b4f1130f451371"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDM3NDM3OA==", "bodyText": "By assigning the non-null value the local variable first it will make the null checker happy.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        hrv = new DanfossAirUnit(InetAddress.getByName(config.host), 30046);\n          \n          \n            \n                        DanfossAirUnit danfossAirUnit = hrv;\n          \n          \n            \n                        DanfossAirUnit danfossAirUnit = new DanfossAirUnit(InetAddress.getByName(config.host), 30046);\n          \n          \n            \n                        hrv = danfossAirUnit;", "url": "https://github.com/openhab/openhab-addons/pull/7922#discussion_r440374378", "createdAt": "2020-06-15T18:44:19Z", "author": {"login": "cpmeister"}, "path": "bundles/org.openhab.binding.danfossairunit/src/main/java/org/openhab/binding/danfossairunit/internal/DanfossAirUnitHandler.java", "diffHunk": "@@ -86,56 +87,55 @@ public void initialize() {\n         valueCache = new ValueCache(config.updateUnchangedValuesEveryMillis);\n         try {\n             hrv = new DanfossAirUnit(InetAddress.getByName(config.host), 30046);\n+            DanfossAirUnit danfossAirUnit = hrv;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d90d9c16683ef71af65f4748c7b4f1130f451371"}, "originalPosition": 52}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f42409f41dbd0d0c723f73a524d750196fb48e61", "author": {"user": {"login": "kaikreuzer", "name": "Kai Kreuzer"}}, "url": "https://github.com/openhab/openhab-addons/commit/f42409f41dbd0d0c723f73a524d750196fb48e61", "committedDate": "2020-06-15T19:57:11Z", "message": "addressed review comments\n\nSigned-off-by: Kai Kreuzer <kai@openhab.org>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMxMDc0ODY4", "url": "https://github.com/openhab/openhab-addons/pull/7922#pullrequestreview-431074868", "createdAt": "2020-06-16T00:13:48Z", "commit": {"oid": "f42409f41dbd0d0c723f73a524d750196fb48e61"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 277, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}