{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAzMzI4ODM2", "number": 8752, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQxNzozMzowMlrOEuGc2A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQxODoxMjoxNFrOEuHXBQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE2Nzc1NjQwOnYy", "diffSide": "RIGHT", "path": "bundles/org.openhab.binding.ipcamera/README.md", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQxNzozMzowMlrOHiSo1g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQxNzozMzowMlrOHiSo1g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTcxODk5OA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            In openHAB 3, if you use the `Create Equipment from Thing` feature to auto create your items, the following will need minimal editing to change the camera name from `BabyCam` to what you choose to name the camera.\n          \n          \n            \n            If you use the `Create Equipment from Thing` feature to auto create your items, the following will need minimal editing to change the camera name from `BabyCam` to what you choose to name the camera.", "url": "https://github.com/openhab/openhab-addons/pull/8752#discussion_r505718998", "createdAt": "2020-10-15T17:33:02Z", "author": {"login": "fwolter"}, "path": "bundles/org.openhab.binding.ipcamera/README.md", "diffHunk": "@@ -662,197 +675,48 @@ end\n \n This section is about how to get things working in HABpanel.\n \n-I highly recommend you check out the easy to use WIDGETS of which there are now 3 that are discussed on the forum here.\n+I highly recommend you check out the easy to use widgets of which there are now 3 that are discussed on the forum here.\n <https://community.openhab.org/t/custom-widget-camera-clickable-thumbnails-that-open-a-stream/101275>\n \n The widgets in the link above are the easiest way to get an advanced stream working in openHAB and you are welcome to open them up, look at how they work and change them to something even better that suits your needs.\n \n ## Group Displays\n \n-The [Full Example](#full-example) section shows how to setup a group of cameras to be displayed like they are a single camera. \n+The `group` thing allows up to 4 cameras to be displayed like they are a single camera that rotates from one to the next.\n+The display order can be allowed to change if one or more of the cameras detects motion.\n \n-Some additional things to check to get it working are:\n+Some additional checks to get it working are:\n \n + If using the groups HLS feature, the poll time of the group must be the same or less than the total time contained in each cameras m3u8 file.\n If you have 3 seconds worth of video segments in each cameras HLS stream, this is the max you can set the poll time of the group to.\n + All cameras in a group should have the same HLS segment size setting, 1 and 2 second long segments have been tested to work.\n++ Mixing cameras with different aspect ratios may cause issues when cast.\n \n-This is still a very new feature and if you have any issues, please send some TRACE level log output of when the problem occurs.\n-\n-## Full Example\n-\n-Use the following examples to base your setup on to save some time if you wish to use textual config.\n-Textual config should only be used by advanced users as the [Discovery](#discovery) method should be preferred by new users.\n-\n-You can do a find and replace on the thing type from `dahua`, as all cameras use consistent naming of channels and configs so changing between them is easy.\n-\n-In the examples you will see the format is: `bindingID:thingType:UID` [param1=\"string\",param2=x,param3=x]\n-\n-bindingID: is always ipcamera.\n-thingType: is found listed above under [Supported Things](#supported-things).\n-UID: Can be made up but it must be UNIQUE, hence why it is called uniqueID. \n+## Sitemap Example\n \n-openHAB's discovery method will use the IP address with the dots removed as the UID.\n-By using textual config, you can name it something useful like \"DrivewayCamera\" if you wish, or stick with the same convention.\n-\n-*.things\n-\n-```java\n-\n-Thing ipcamera:group:OutsideCameras\n-[\n-    pollTime=2000, serverPort=54320, \n-    ffmpegOutput=\"/tmpfs/OutsideGroup/\",\n-    firstCamera=\"001\",\n-    secondCamera=\"002\",\n-    thirdCamera=\"TestCam\",\n-    forthCamera=\"\",\n-    motionChangesOrder=true\n-]\n-\n-Thing ipcamera:dahua:001\n-[ \n-    ipAddress=\"192.168.0.5\", password=\"suitcase123456\",\n-    username=\"admin\",\n-    serverPort=54321,\n-    ffmpegOutput=\"/tmpfs/camera1/\"\n-]\n-\n-Thing ipcamera:hikvision:002\n-[\n-    ipAddress=\"192.168.0.6\", password=\"suitcase123456\",\n-    username=\"admin\",\n-    serverPort=54322,\n-    ffmpegOutput=\"/tmpfs/camera2/\"\n-]\n-\n-Thing ipcamera:generic:TestCam\n-[\n-    ipAddress=\"192.168.0.7\", password=\"pass123\", username=\"admin\", serverPort=54323,\n-    snapshotUrl=\"http://192.168.1.65/tmpfs/snap.jpg\", //remove this line if your camera has none\n-    mjpegUrl=\"ffmpeg\",\n-    ffmpegOutput=\"/tmpfs/HttpTest/\", \n-    ffmpegInput=\"rtsp://192.168.1.65:554/11\"\n-]\n-\n-Thing ipcamera:generic:TTGoCamera \"ESP32 TTGo Camera\" @ \"Cameras\"\n-[\n-    ipAddress=\"192.168.1.181\",\n-    serverPort=51321,\n-    port=80,\n-    gifPreroll=1,\n-    snapshotUrl=\"http://192.168.1.181/capture\",\n-    mjpegUrl=\"http://192.168.1.181:81/stream\",\n-    ffmpegOutput=\"/tmpfs/TTGoCamera/\",\n-    ffmpegInput=\"http://192.168.1.181:81/stream\",\n-    ffmpegInputOptions=\"-f mjpeg\",\n-    ipWhitelist=\"(192.168.2.8)(192.168.2.83)(192.168.2.99)\"\n-]\n-\n-```\n-\n-*.items\n-\n-```java\n-\n-Number BabyCamDirection \"Camera Direction\"\n-Switch BabyCamEnableMotion \"MotionAlarm on/off\" { channel=\"ipcamera:dahua:001:enableMotionAlarm\" }\n-Switch BabyCamMotionAlarm \"Motion detected\" { channel=\"ipcamera:dahua:001:motionAlarm\" }\n-Switch BabyCamEnableAudioAlarm \"AudioAlarm on/off\" { channel=\"ipcamera:dahua:001:enableAudioAlarm\" }\n-Switch BabyCamAudioAlarm \"Audio detected\" { channel=\"ipcamera:dahua:001:audioAlarm\" }\n-Dimmer BabyCamAudioThreshold \"Audio Threshold [%d]\" { channel=\"ipcamera:dahua:001:thresholdAudioAlarm\" }\n-Dimmer BabyCamLED \"IR LED [%d]\" { channel=\"ipcamera:dahua:001:enableLED\" }\n-Switch BabyCamAutoLED \"Auto IR LED\" { channel=\"ipcamera:dahua:001:autoLED\" }\n-String BabyCamTextOverlay \"Text to overlay\" { channel=\"ipcamera:dahua:001:textOverlay\" }\n-String BabyCamHlsUrl \"HLS Stream\" { channel=\"ipcamera:dahua:BabyCamera:hlsUrl\" }\n-DateTime BabyCamLastMotionTime \"Time motion was last detected [%1$ta %1$tR]\"\n-String BabyCamLastMotionType \"Last Motion Type\" { channel=\"ipcamera:dahua:BabyCamera:lastMotionType\" }\n-Switch BabyCamStartHLS { channel=\"ipcamera:dahua:BabyCamera:startStream\" }\n-\n-Dimmer GenericMotionControl \"Motion Threshold [%d]\" { channel=\"ipcamera:generic:TestCam:ffmpegMotionControl\" }\n-Switch GenericMotionAlarm \"Motion detected\" { channel=\"ipcamera:generic:TestCam:motionAlarm\" }\n-Dimmer GenericAudioThreshold \"Audio Threshold [%d]\" { channel=\"ipcamera:generic:TestCam:thresholdAudioAlarm\" }\n-Switch GenericAudioAlarm \"Audio detected\" { channel=\"ipcamera:generic:TestCam:audioAlarm\" }\n-\n-String OutsideCameraGroupHlsUrl \"Outside Cameras\" { channel=\"ipcamera:group:OutsideCameras:hlsUrl\", ga=\"Camera\" [ protocols=\"hls\" ] }\n-Switch OutsideCameraGroupStartHLS \"Start outside HLS\" { channel=\"ipcamera:group:OutsideCameras:startStream\" }\n-\n-```\n+Use the following example to base your sitemap on to save some time.\n+In openHAB 3, if you use the `Create Equipment from Thing` feature to auto create your items, the following will need minimal editing to change the camera name from `BabyCam` to what you choose to name the camera.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a88b8156b838fd1ad6a173d1f8829cae44ce6724"}, "originalPosition": 151}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE2NzgxOTcwOnYy", "diffSide": "RIGHT", "path": "bundles/org.openhab.binding.ipcamera/src/main/resources/OH-INF/binding/binding.xml", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQxNzo1MDowMFrOHiTRHQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQxNzo1MDowMFrOHiTRHQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTcyOTMwOQ==", "bodyText": "\"openHAB\" don't need to be part of the description. Here is another suggestion:\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t<description>This binding is useful if you wish to use IP cameras in openHAB.</description>\n          \n          \n            \n            \t<description>This binding interfaces IP cameras of various vendors via open protocols.</description>", "url": "https://github.com/openhab/openhab-addons/pull/8752#discussion_r505729309", "createdAt": "2020-10-15T17:50:00Z", "author": {"login": "fwolter"}, "path": "bundles/org.openhab.binding.ipcamera/src/main/resources/OH-INF/binding/binding.xml", "diffHunk": "@@ -4,6 +4,6 @@\n \txsi:schemaLocation=\"https://openhab.org/schemas/binding/v1.0.0 https://openhab.org/schemas/binding-1.0.0.xsd\">\n \n \t<name>IpCamera Binding</name>\n-\t<description>This binding helps you to use IP Cameras in Openhab 2.</description>\n+\t<description>This binding is useful if you wish to use IP cameras in openHAB.</description>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a88b8156b838fd1ad6a173d1f8829cae44ce6724"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE2NzkwNTMzOnYy", "diffSide": "RIGHT", "path": "bundles/org.openhab.binding.ipcamera/src/main/java/org/openhab/binding/ipcamera/internal/StreamServerHandler.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQxODoxMjoxNFrOHiUHNg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQxODoxMjoxNFrOHiUHNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTc0MzE1OA==", "bodyText": "content.content() isn't an array type, so I don't think System.arraycopy would work as written.\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                System.arraycopy(content.content(), 0, incomingJpeg, recievedBytes, content.content().capacity());\n          \n          \n            \n                                System.arraycopy(content.content().array(), 0, incomingJpeg, recievedBytes, content.content().capacity());", "url": "https://github.com/openhab/openhab-addons/pull/8752#discussion_r505743158", "createdAt": "2020-10-15T18:12:14Z", "author": {"login": "cpmeister"}, "path": "bundles/org.openhab.binding.ipcamera/src/main/java/org/openhab/binding/ipcamera/internal/StreamServerHandler.java", "diffHunk": "@@ -177,19 +177,13 @@ public void channelRead(@Nullable ChannelHandlerContext ctx, @Nullable Object ms\n             }\n             if (msg instanceof HttpContent) {\n                 HttpContent content = (HttpContent) msg;\n-                int index = 0;\n                 if (recievedBytes == 0) {\n-                    incomingJpeg = new byte[content.content().capacity()];\n+                    incomingJpeg = content.content().array();\n                 } else {\n                     byte[] temp = incomingJpeg;\n                     incomingJpeg = new byte[recievedBytes + content.content().capacity()];\n-\n-                    for (; index < temp.length; index++) {\n-                        incomingJpeg[index] = temp[index];\n-                    }\n-                }\n-                for (int i = 0; i < content.content().capacity(); i++) {\n-                    incomingJpeg[index++] = content.content().getByte(i);\n+                    System.arraycopy(temp, 0, incomingJpeg, 0, temp.length);\n+                    System.arraycopy(content.content(), 0, incomingJpeg, recievedBytes, content.content().capacity());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a88b8156b838fd1ad6a173d1f8829cae44ce6724"}, "originalPosition": 19}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4272, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}