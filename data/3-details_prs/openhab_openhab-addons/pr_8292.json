{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY3NDU1MjU1", "number": 8292, "title": "[persistence] addressed deprecation warnings", "bodyText": "Signed-off-by: Kai Kreuzer kai@openhab.org", "createdAt": "2020-08-13T15:19:58Z", "url": "https://github.com/openhab/openhab-addons/pull/8292", "merged": true, "mergeCommit": {"oid": "5646d17b8a6a2976258085a4c51b6a57a4375c01"}, "closed": true, "closedAt": "2020-08-30T18:48:26Z", "author": {"login": "kaikreuzer"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc-hnRcgH2gAyNDY3NDU1MjU1OjNlOWZiMGZhYjJjOTEyZjhiODc3ZWM4ZWNmMGY3ZmU3MDI0MGQ1MjE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdECyzbAFqTQ3ODIyNTg2NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "3e9fb0fab2c912f8b877ec8ecf0f7fe70240d521", "author": {"user": {"login": "kaikreuzer", "name": "Kai Kreuzer"}}, "url": "https://github.com/openhab/openhab-addons/commit/3e9fb0fab2c912f8b877ec8ecf0f7fe70240d521", "committedDate": "2020-08-13T15:19:09Z", "message": "[persistence] addressed deprecation warnings\n\nSigned-off-by: Kai Kreuzer <kai@openhab.org>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY2ODc4MTMw", "url": "https://github.com/openhab/openhab-addons/pull/8292#pullrequestreview-466878130", "createdAt": "2020-08-13T15:33:02Z", "commit": {"oid": "3e9fb0fab2c912f8b877ec8ecf0f7fe70240d521"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xM1QxNTozMzowMlrOHARA1Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xM1QxNTozMzowMlrOHARA1Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDA0MDc4OQ==", "bodyText": "It looks like support for the java.time API was only added in JPA 2.2 whereas the add-on uses OpenJPA 2.4.0 as dependency which is based on the JPA 2.0 spec. So the quick fix is probably to convert the ZDTs to Dates here. The nicest fix would be to upgrade OpenJPA to 3.0.x or 3.1.x which is JPA 2.2. compliant, but I don't know how much work that is. \ud83d\ude09", "url": "https://github.com/openhab/openhab-addons/pull/8292#discussion_r470040789", "createdAt": "2020-08-13T15:33:02Z", "author": {"login": "wborn"}, "path": "bundles/org.openhab.persistence.jpa/src/main/java/org/openhab/persistence/jpa/internal/JpaPersistenceService.java", "diffHunk": "@@ -209,10 +209,10 @@ public void store(Item item, @Nullable String alias) {\n             Query query = em.createQuery(queryString);\n             query.setParameter(\"itemName\", item.getName());\n             if (hasBeginDate) {\n-                query.setParameter(\"beginDate\", filter.getBeginDate());\n+                query.setParameter(\"beginDate\", filter.getBeginDateZoned());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3e9fb0fab2c912f8b877ec8ecf0f7fe70240d521"}, "originalPosition": 19}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a0be7faeed2379f8c73bba9ca94e252b801313f6", "author": {"user": {"login": "kaikreuzer", "name": "Kai Kreuzer"}}, "url": "https://github.com/openhab/openhab-addons/commit/a0be7faeed2379f8c73bba9ca94e252b801313f6", "committedDate": "2020-08-30T16:47:58Z", "message": "reverted internal JPA code to use java.util.Date\n\nSigned-off-by: Kai Kreuzer <kai@openhab.org>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc4MjI1ODY1", "url": "https://github.com/openhab/openhab-addons/pull/8292#pullrequestreview-478225865", "createdAt": "2020-08-30T18:48:14Z", "commit": {"oid": "a0be7faeed2379f8c73bba9ca94e252b801313f6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4975, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}