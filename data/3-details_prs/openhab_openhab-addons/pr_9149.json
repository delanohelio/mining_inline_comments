{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI4NzQxNDc1", "number": 9149, "title": "[tr064] fix certificate problems and add call list channel", "bodyText": "use insecure client and remove TrustManager\nadd call list channel\n\nSigned-off-by: Jan N. Klug jan.n.klug@rub.de", "createdAt": "2020-11-27T18:25:47Z", "url": "https://github.com/openhab/openhab-addons/pull/9149", "merged": true, "mergeCommit": {"oid": "936a4dc8d8d9cb8c7c1cf560706fbbe7f419ef8b"}, "closed": true, "closedAt": "2020-11-28T18:14:08Z", "author": {"login": "J-N-K"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdgrxF0gH2gAyNTI4NzQxNDc1OmQ4M2I3M2UxYjIxOTQzNDk0OWY0Y2Y3OWFlNDU3YzJiNmZmMmFiYzM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdhAOlcAFqTU0MDQwODM3Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d83b73e1b219434949f4cf79ae457c2b6ff2abc3", "author": {"user": {"login": "J-N-K", "name": null}}, "url": "https://github.com/openhab/openhab-addons/commit/d83b73e1b219434949f4cf79ae457c2b6ff2abc3", "committedDate": "2020-11-27T18:22:21Z", "message": "improvements\n\n- use insecure client and remove TrustManager\n- add call list channel\n\nSigned-off-by: Jan N. Klug <jan.n.klug@rub.de>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQwMzQ0NTcy", "url": "https://github.com/openhab/openhab-addons/pull/9149#pullrequestreview-540344572", "createdAt": "2020-11-28T05:36:31Z", "commit": {"oid": "d83b73e1b219434949f4cf79ae457c2b6ff2abc3"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yOFQwNTozNjozMVrOH7QpQA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yOFQwNTozOTo0NVrOH7Qyiw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTkwMDczNg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        throw new IllegalStateException(\"Could not create HttpClient instance.\");\n          \n          \n            \n                        throw new IllegalStateException(\"Could not create HttpClient instance.\", e);", "url": "https://github.com/openhab/openhab-addons/pull/9149#discussion_r531900736", "createdAt": "2020-11-28T05:36:31Z", "author": {"login": "cpmeister"}, "path": "bundles/org.openhab.binding.tr064/src/main/java/org/openhab/binding/tr064/internal/Tr064HandlerFactory.java", "diffHunk": "@@ -56,12 +60,29 @@\n     private final Tr064ChannelTypeProvider channelTypeProvider;\n \n     @Activate\n-    public Tr064HandlerFactory(@Reference HttpClientFactory httpClientFactory,\n-            @Reference Tr064ChannelTypeProvider channelTypeProvider,\n+    public Tr064HandlerFactory(@Reference Tr064ChannelTypeProvider channelTypeProvider,\n             @Reference PhonebookProfileFactory phonebookProfileFactory) {\n-        httpClient = httpClientFactory.getCommonHttpClient();\n         this.channelTypeProvider = channelTypeProvider;\n         this.phonebookProfileFactory = phonebookProfileFactory;\n+        // use an insecure client (i.e. without verifying the certificate)\n+        this.httpClient = new HttpClient(new SslContextFactory(true));\n+        try {\n+            this.httpClient.start();\n+        } catch (Exception e) {\n+            // catching exception is necessary due to the signature of HttpClient.start()\n+            logger.warn(\"Failed to start http client: {}\", e.getMessage());\n+            throw new IllegalStateException(\"Could not create HttpClient instance.\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d83b73e1b219434949f4cf79ae457c2b6ff2abc3"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTkwMjE4OA==", "bodyText": "Why is this synchronized?", "url": "https://github.com/openhab/openhab-addons/pull/9149#discussion_r531902188", "createdAt": "2020-11-28T05:38:28Z", "author": {"login": "cpmeister"}, "path": "bundles/org.openhab.binding.tr064/src/main/java/org/openhab/binding/tr064/internal/util/Util.java", "diffHunk": "@@ -290,4 +298,32 @@ public static void checkAvailableChannels(Thing thing, ThingBuilder thingBuilder\n         }\n         return Optional.empty();\n     }\n+\n+    /**\n+     * generic unmarshaller\n+     *\n+     * @param uri the uri of the XML file\n+     * @param clazz the class describing the XML file\n+     * @return unmarshalling result\n+     */\n+    public static synchronized <T> @Nullable T getAndUnmarshalXML(HttpClient httpClient, String uri, Class<T> clazz) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d83b73e1b219434949f4cf79ae457c2b6ff2abc3"}, "originalPosition": 46}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTkwMzExNQ==", "bodyText": "Should the readme be updated as well?", "url": "https://github.com/openhab/openhab-addons/pull/9149#discussion_r531903115", "createdAt": "2020-11-28T05:39:45Z", "author": {"login": "cpmeister"}, "path": "bundles/org.openhab.binding.tr064/src/main/resources/OH-INF/thing/thing-types.xml", "diffHunk": "@@ -82,6 +82,11 @@\n \t\t\t\t<description>List of days for which outbound calls should be calculated.</description>\n \t\t\t\t<advanced>true</advanced>\n \t\t\t</parameter>\n+\t\t\t<parameter name=\"callListDays\" type=\"text\" multiple=\"true\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d83b73e1b219434949f4cf79ae457c2b6ff2abc3"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "935eea5c62ca9ec016ff264fcf1c37a0bfdf3d41", "author": {"user": {"login": "J-N-K", "name": null}}, "url": "https://github.com/openhab/openhab-addons/commit/935eea5c62ca9ec016ff264fcf1c37a0bfdf3d41", "committedDate": "2020-11-28T12:22:02Z", "message": "address review comments\n\nSigned-off-by: Jan N. Klug <jan.n.klug@rub.de>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQwNDA4Mzc3", "url": "https://github.com/openhab/openhab-addons/pull/9149#pullrequestreview-540408377", "createdAt": "2020-11-28T18:12:40Z", "commit": {"oid": "935eea5c62ca9ec016ff264fcf1c37a0bfdf3d41"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3851, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}