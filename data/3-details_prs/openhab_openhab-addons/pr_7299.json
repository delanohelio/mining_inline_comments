{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk5MDQ0MDQy", "number": 7299, "title": "[lgwebos] Avoid thing updates when the thing handler is already disposed", "bodyText": "Signed-off-by: Laurent Garnier lg.hc@free.fr", "createdAt": "2020-04-05T11:43:38Z", "url": "https://github.com/openhab/openhab-addons/pull/7299", "merged": true, "mergeCommit": {"oid": "8a998932be3d150f8dc0c80d898c232a8cc596a2"}, "closed": true, "closedAt": "2020-04-10T18:20:38Z", "author": {"login": "lolodomo"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcUqW-4gFqTM4NzgyMDY1Nw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcWVRY8gFqTM5MTU4ODM1Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg3ODIwNjU3", "url": "https://github.com/openhab/openhab-addons/pull/7299#pullrequestreview-387820657", "createdAt": "2020-04-05T13:45:41Z", "commit": {"oid": "01f49900726189f3930bbb49af70926ebfee7de5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg3ODIxMDU2", "url": "https://github.com/openhab/openhab-addons/pull/7299#pullrequestreview-387821056", "createdAt": "2020-04-05T13:50:01Z", "commit": {"oid": "01f49900726189f3930bbb49af70926ebfee7de5"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNVQxMzo1MDowMVrOGBALGg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNVQxMzo1MDowMVrOGBALGg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzcwNDYwMg==", "bodyText": "Is there a more direct way of determining if the handler is disposed? Or more importantly, shouldn't this class be disposed along with the handler in the first place?", "url": "https://github.com/openhab/openhab-addons/pull/7299#discussion_r403704602", "createdAt": "2020-04-05T13:50:01Z", "author": {"login": "cpmeister"}, "path": "bundles/org.openhab.binding.lgwebos/src/main/java/org/openhab/binding/lgwebos/internal/handler/LGWebOSTVSocket.java", "diffHunk": "@@ -332,6 +333,10 @@ private void sendMessage(JsonObject json) {\n     @OnWebSocketMessage\n     public void onMessage(String message) {\n         logger.trace(\"Message [in]: {}\", message);\n+        if (this.listener == null) {\n+            logger.debug(\"Message is ignored because the thing handler is already disposed.\");\n+            return;\n+        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "01f49900726189f3930bbb49af70926ebfee7de5"}, "originalPosition": 17}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkwMzU1ODMx", "url": "https://github.com/openhab/openhab-addons/pull/7299#pullrequestreview-390355831", "createdAt": "2020-04-08T21:47:52Z", "commit": {"oid": "01f49900726189f3930bbb49af70926ebfee7de5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQyMTo0Nzo1MlrOGDCLbw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQyMTo0Nzo1MlrOGDCLbw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTgzNDYwNw==", "bodyText": "Don\u2019t like this change\nthis class should be agnostic to OH types like thing handler and lifecycle\nany response should still be handled properly and definitely not depend on if someone is watching for state changes", "url": "https://github.com/openhab/openhab-addons/pull/7299#discussion_r405834607", "createdAt": "2020-04-08T21:47:52Z", "author": {"login": "sprehn"}, "path": "bundles/org.openhab.binding.lgwebos/src/main/java/org/openhab/binding/lgwebos/internal/handler/LGWebOSTVSocket.java", "diffHunk": "@@ -332,6 +333,10 @@ private void sendMessage(JsonObject json) {\n     @OnWebSocketMessage\n     public void onMessage(String message) {\n         logger.trace(\"Message [in]: {}\", message);\n+        if (this.listener == null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "01f49900726189f3930bbb49af70926ebfee7de5"}, "originalPosition": 14}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "01f49900726189f3930bbb49af70926ebfee7de5", "author": {"user": {"login": "lolodomo", "name": "lolodomo"}}, "url": "https://github.com/openhab/openhab-addons/commit/01f49900726189f3930bbb49af70926ebfee7de5", "committedDate": "2020-04-05T11:36:13Z", "message": "[lgwebos] Ignore messages when the thing handler is already disposed\n\nSigned-off-by: Laurent Garnier <lg.hc@free.fr>"}, "afterCommit": {"oid": "ad918d4e3e1224067a7831b7087a6a3ed8d6a3ff", "author": {"user": {"login": "lolodomo", "name": "lolodomo"}}, "url": "https://github.com/openhab/openhab-addons/commit/ad918d4e3e1224067a7831b7087a6a3ed8d6a3ff", "committedDate": "2020-04-09T09:32:25Z", "message": "[lgwebos] Avoid thing updates when the thing handler is already disposed\n\nSigned-off-by: Laurent Garnier <lg.hc@free.fr>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ad918d4e3e1224067a7831b7087a6a3ed8d6a3ff", "author": {"user": {"login": "lolodomo", "name": "lolodomo"}}, "url": "https://github.com/openhab/openhab-addons/commit/ad918d4e3e1224067a7831b7087a6a3ed8d6a3ff", "committedDate": "2020-04-09T09:32:25Z", "message": "[lgwebos] Avoid thing updates when the thing handler is already disposed\n\nSigned-off-by: Laurent Garnier <lg.hc@free.fr>"}, "afterCommit": {"oid": "88105f925670b54448d553e629cd17d2c909178e", "author": {"user": {"login": "lolodomo", "name": "lolodomo"}}, "url": "https://github.com/openhab/openhab-addons/commit/88105f925670b54448d553e629cd17d2c909178e", "committedDate": "2020-04-10T11:03:12Z", "message": "[lgwebos] Avoid thing updates when the thing handler is already disposed\n\nSigned-off-by: Laurent Garnier <lg.hc@free.fr>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "935ad8afddcdba5e55a35db472df061dfb9d5819", "author": {"user": {"login": "lolodomo", "name": "lolodomo"}}, "url": "https://github.com/openhab/openhab-addons/commit/935ad8afddcdba5e55a35db472df061dfb9d5819", "committedDate": "2020-04-10T11:07:21Z", "message": "[lgwebos] Avoid thing updates when the thing handler is already disposed\n\nSigned-off-by: Laurent Garnier <lg.hc@free.fr>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "88105f925670b54448d553e629cd17d2c909178e", "author": {"user": {"login": "lolodomo", "name": "lolodomo"}}, "url": "https://github.com/openhab/openhab-addons/commit/88105f925670b54448d553e629cd17d2c909178e", "committedDate": "2020-04-10T11:03:12Z", "message": "[lgwebos] Avoid thing updates when the thing handler is already disposed\n\nSigned-off-by: Laurent Garnier <lg.hc@free.fr>"}, "afterCommit": {"oid": "935ad8afddcdba5e55a35db472df061dfb9d5819", "author": {"user": {"login": "lolodomo", "name": "lolodomo"}}, "url": "https://github.com/openhab/openhab-addons/commit/935ad8afddcdba5e55a35db472df061dfb9d5819", "committedDate": "2020-04-10T11:07:21Z", "message": "[lgwebos] Avoid thing updates when the thing handler is already disposed\n\nSigned-off-by: Laurent Garnier <lg.hc@free.fr>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxMzkwNzgw", "url": "https://github.com/openhab/openhab-addons/pull/7299#pullrequestreview-391390780", "createdAt": "2020-04-10T11:12:16Z", "commit": {"oid": "935ad8afddcdba5e55a35db472df061dfb9d5819"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b571162efb14d93f80852290074a48af959dbb45", "author": {"user": {"login": "lolodomo", "name": "lolodomo"}}, "url": "https://github.com/openhab/openhab-addons/commit/b571162efb14d93f80852290074a48af959dbb45", "committedDate": "2020-04-10T11:42:01Z", "message": "Change of state trigger for stopping the reconection job and starting the keep alive job\n\nSigned-off-by: Laurent Garnier <lg.hc@free.fr>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxNTg4MzUy", "url": "https://github.com/openhab/openhab-addons/pull/7299#pullrequestreview-391588352", "createdAt": "2020-04-10T18:19:25Z", "commit": {"oid": "b571162efb14d93f80852290074a48af959dbb45"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1023, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}