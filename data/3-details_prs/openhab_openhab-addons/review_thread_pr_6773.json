{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzU5NTA5MjMw", "number": 6773, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QxOTozNDowMVrODWWOGw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QxOTozNDowMVrODWWOGw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI0NzU5MzIzOnYy", "diffSide": "RIGHT", "path": "bundles/org.openhab.binding.tplinksmarthome/src/main/java/org/openhab/binding/tplinksmarthome/internal/device/PowerStripDevice.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QxOTozNDowMVrOFbDkBg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMFQxOToxODo0OVrOFcdrMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzkxNDI0Ng==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    for (int i = 0; i < childIds.size(); i++) {\n          \n          \n            \n                    return deviceState.getSysinfo().getChildren().stream().parallel().filter(e -> OnOffType.ON.equals(e.getState())).findAny().isPresent();", "url": "https://github.com/openhab/openhab-addons/pull/6773#discussion_r363914246", "createdAt": "2020-01-07T19:34:01Z", "author": {"login": "J-N-K"}, "path": "bundles/org.openhab.binding.tplinksmarthome/src/main/java/org/openhab/binding/tplinksmarthome/internal/device/PowerStripDevice.java", "diffHunk": "@@ -73,7 +68,18 @@ public void refreshedDeviceState(@Nullable DeviceState deviceState) {\n     }\n \n     @Override\n-    public State updateChannel(ChannelUID channelUid, DeviceState deviceState) {\n+    protected State getOnOffState(final DeviceState deviceState) {\n+        // Global On/Off state is determined by the combined state of all sockets. If 1 socket is on, the state is on.\n+        for (int i = 0; i < childIds.size(); i++) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1da59f2562dd6bfe7ac1ea5578e2e3ec826502e5"}, "originalPosition": 55}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDI1NzM2Mw==", "bodyText": "Ah, yes that can be done using streams. Added it with a slightly different variant as it requires a  State.", "url": "https://github.com/openhab/openhab-addons/pull/6773#discussion_r364257363", "createdAt": "2020-01-08T14:28:05Z", "author": {"login": "Hilbrand"}, "path": "bundles/org.openhab.binding.tplinksmarthome/src/main/java/org/openhab/binding/tplinksmarthome/internal/device/PowerStripDevice.java", "diffHunk": "@@ -73,7 +68,18 @@ public void refreshedDeviceState(@Nullable DeviceState deviceState) {\n     }\n \n     @Override\n-    public State updateChannel(ChannelUID channelUid, DeviceState deviceState) {\n+    protected State getOnOffState(final DeviceState deviceState) {\n+        // Global On/Off state is determined by the combined state of all sockets. If 1 socket is on, the state is on.\n+        for (int i = 0; i < childIds.size(); i++) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzkxNDI0Ng=="}, "originalCommit": {"oid": "1da59f2562dd6bfe7ac1ea5578e2e3ec826502e5"}, "originalPosition": 55}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTM5MDY0Mw==", "bodyText": "Nice", "url": "https://github.com/openhab/openhab-addons/pull/6773#discussion_r365390643", "createdAt": "2020-01-10T19:18:49Z", "author": {"login": "J-N-K"}, "path": "bundles/org.openhab.binding.tplinksmarthome/src/main/java/org/openhab/binding/tplinksmarthome/internal/device/PowerStripDevice.java", "diffHunk": "@@ -73,7 +68,18 @@ public void refreshedDeviceState(@Nullable DeviceState deviceState) {\n     }\n \n     @Override\n-    public State updateChannel(ChannelUID channelUid, DeviceState deviceState) {\n+    protected State getOnOffState(final DeviceState deviceState) {\n+        // Global On/Off state is determined by the combined state of all sockets. If 1 socket is on, the state is on.\n+        for (int i = 0; i < childIds.size(); i++) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzkxNDI0Ng=="}, "originalCommit": {"oid": "1da59f2562dd6bfe7ac1ea5578e2e3ec826502e5"}, "originalPosition": 55}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1020, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}