{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIyNjI3NjIw", "number": 9057, "reviewThreads": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QxOTowNzo0NlrOE6LJJA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QyMDozOTozNlrOE8YyhA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI5NDM1NDI4OnYy", "diffSide": "RIGHT", "path": "bundles/org.openhab.binding.amazonechocontrol/src/main/java/org/openhab/binding/amazonechocontrol/internal/Connection.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QxOTowNzo0NlrOH1E0uA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QxOTowNzo0NlrOH1E0uA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTQxNTYwOA==", "bodyText": "Judging from how you are using this, please change devicesRunning to a Lock and use tryLock instead.", "url": "https://github.com/openhab/openhab-addons/pull/9057#discussion_r525415608", "createdAt": "2020-11-17T19:07:46Z", "author": {"login": "cpmeister"}, "path": "bundles/org.openhab.binding.amazonechocontrol/src/main/java/org/openhab/binding/amazonechocontrol/internal/Connection.java", "diffHunk": "@@ -1553,87 +1558,97 @@ public void executeSequenceCommand(@Nullable Device device, String command,\n     }\n \n     private void executeSequenceNode(Device[] devices, JsonObject nodeToExecute) {\n-        if (devices.length == 1 && groups.values().stream().anyMatch(queueObject -> queueObject.queueRunning.get())\n-                || devices.length > 1\n-                        && singles.values().stream().anyMatch(queueObject -> queueObject.queueRunning.get())) {\n-            if (singleGroupTimer != null) {\n-                singleGroupTimer.cancel(true);\n-                singleGroupTimer = null;\n+        QueueObject queueObject = new QueueObject();\n+        queueObject.devices = devices;\n+        queueObject.nodeToExecute = nodeToExecute;\n+        String serial = \"\";\n+        for (Device device : devices) {\n+            if (!this.devices.containsKey(device.serialNumber)) {\n+                this.devices.put(device.serialNumber, new LinkedBlockingQueue<>());\n             }\n-            singleGroupTimer = scheduler.schedule(() -> executeSequenceNode(devices, nodeToExecute), 500,\n-                    TimeUnit.MILLISECONDS);\n-\n-            return;\n+            this.devices.get(device.serialNumber).offer(queueObject);\n+            serial = serial + device.serialNumber + \" \";\n         }\n+        logger.debug(\"added {} device {}\", queueObject.hashCode(), serial);\n+    }\n \n-        if (devices.length == 1) {\n-            if (!singles.containsKey(devices[0])) {\n-                singles.put(devices[0], new QueueObject());\n-            }\n-            singles.get(devices[0]).queue.add(nodeToExecute);\n-        } else {\n-            if (!groups.containsKey(devices[0])) {\n-                groups.put(devices[0], new QueueObject());\n+    private void handleExecuteSequenceNode() {\n+        if (devicesRunning.compareAndSet(false, true)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "67e66176c2078fa377796abb0b9d2d5ddd1f4f58"}, "originalPosition": 520}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI5NDM3OTM5OnYy", "diffSide": "RIGHT", "path": "bundles/org.openhab.binding.amazonechocontrol/src/main/java/org/openhab/binding/amazonechocontrol/internal/Connection.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QxOToxMjozN1rOH1FFSw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QxOToxMjozN1rOH1FFSw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTQxOTg1MQ==", "bodyText": "Since you are now allowing the throwing of interrupts, you might as well group the interrupt related exceptions together.\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        } catch (InterruptedException e) {\n          \n          \n            \n                        } catch (InterruptedException | InterruptedIOException e) {", "url": "https://github.com/openhab/openhab-addons/pull/9057#discussion_r525419851", "createdAt": "2020-11-17T19:12:37Z", "author": {"login": "cpmeister"}, "path": "bundles/org.openhab.binding.amazonechocontrol/src/main/java/org/openhab/binding/amazonechocontrol/internal/Connection.java", "diffHunk": "@@ -691,12 +694,14 @@ public HttpsURLConnection makeRequest(String verb, String url, @Nullable String\n                         throw new HttpException(code,\n                                 verb + \" url '\" + url + \"' failed: \" + connection.getResponseMessage());\n                     }\n-                    try {\n-                        Thread.sleep(2000);\n-                    } catch (InterruptedException e) {\n-                        logger.warn(\"Unable to wait for next call to {}\", url, e);\n-                    }\n+                    Thread.sleep(2000);\n                 }\n+            } catch (InterruptedException e) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "67e66176c2078fa377796abb0b9d2d5ddd1f4f58"}, "originalPosition": 114}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI5NDQwMzQ5OnYy", "diffSide": "RIGHT", "path": "bundles/org.openhab.binding.amazonechocontrol/src/main/java/org/openhab/binding/amazonechocontrol/internal/Connection.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QxOToxODoxN1rOH1FUiQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QxOToxODoxN1rOH1FUiQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTQyMzc1Mw==", "bodyText": "computeIfAbsent would simplify this a bit.\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        if (!this.devices.containsKey(device.serialNumber)) {\n          \n          \n            \n                            this.devices.put(device.serialNumber, new LinkedBlockingQueue<>());\n          \n          \n            \n                        }\n          \n          \n            \n                        this.devices.computeIfAbsent(device.serialNumber, k -> new LinkedBlockingQueue<>()).offer(queueObject);", "url": "https://github.com/openhab/openhab-addons/pull/9057#discussion_r525423753", "createdAt": "2020-11-17T19:18:17Z", "author": {"login": "cpmeister"}, "path": "bundles/org.openhab.binding.amazonechocontrol/src/main/java/org/openhab/binding/amazonechocontrol/internal/Connection.java", "diffHunk": "@@ -1553,87 +1558,97 @@ public void executeSequenceCommand(@Nullable Device device, String command,\n     }\n \n     private void executeSequenceNode(Device[] devices, JsonObject nodeToExecute) {\n-        if (devices.length == 1 && groups.values().stream().anyMatch(queueObject -> queueObject.queueRunning.get())\n-                || devices.length > 1\n-                        && singles.values().stream().anyMatch(queueObject -> queueObject.queueRunning.get())) {\n-            if (singleGroupTimer != null) {\n-                singleGroupTimer.cancel(true);\n-                singleGroupTimer = null;\n+        QueueObject queueObject = new QueueObject();\n+        queueObject.devices = devices;\n+        queueObject.nodeToExecute = nodeToExecute;\n+        String serial = \"\";\n+        for (Device device : devices) {\n+            if (!this.devices.containsKey(device.serialNumber)) {\n+                this.devices.put(device.serialNumber, new LinkedBlockingQueue<>());\n             }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "67e66176c2078fa377796abb0b9d2d5ddd1f4f58"}, "originalPosition": 500}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI5NDQzMjAzOnYy", "diffSide": "RIGHT", "path": "bundles/org.openhab.binding.amazonechocontrol/src/main/java/org/openhab/binding/amazonechocontrol/internal/Connection.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QxOToyNTo0OFrOH1FmPA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQxMTo1MDozMFrOH2ZwYw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTQyODI4NA==", "bodyText": "Could this be implemented using CompletableFuture instead?", "url": "https://github.com/openhab/openhab-addons/pull/9057#discussion_r525428284", "createdAt": "2020-11-17T19:25:48Z", "author": {"login": "cpmeister"}, "path": "bundles/org.openhab.binding.amazonechocontrol/src/main/java/org/openhab/binding/amazonechocontrol/internal/Connection.java", "diffHunk": "@@ -1553,87 +1558,97 @@ public void executeSequenceCommand(@Nullable Device device, String command,\n     }\n \n     private void executeSequenceNode(Device[] devices, JsonObject nodeToExecute) {\n-        if (devices.length == 1 && groups.values().stream().anyMatch(queueObject -> queueObject.queueRunning.get())\n-                || devices.length > 1\n-                        && singles.values().stream().anyMatch(queueObject -> queueObject.queueRunning.get())) {\n-            if (singleGroupTimer != null) {\n-                singleGroupTimer.cancel(true);\n-                singleGroupTimer = null;\n+        QueueObject queueObject = new QueueObject();\n+        queueObject.devices = devices;\n+        queueObject.nodeToExecute = nodeToExecute;\n+        String serial = \"\";\n+        for (Device device : devices) {\n+            if (!this.devices.containsKey(device.serialNumber)) {\n+                this.devices.put(device.serialNumber, new LinkedBlockingQueue<>());\n             }\n-            singleGroupTimer = scheduler.schedule(() -> executeSequenceNode(devices, nodeToExecute), 500,\n-                    TimeUnit.MILLISECONDS);\n-\n-            return;\n+            this.devices.get(device.serialNumber).offer(queueObject);\n+            serial = serial + device.serialNumber + \" \";\n         }\n+        logger.debug(\"added {} device {}\", queueObject.hashCode(), serial);\n+    }\n \n-        if (devices.length == 1) {\n-            if (!singles.containsKey(devices[0])) {\n-                singles.put(devices[0], new QueueObject());\n-            }\n-            singles.get(devices[0]).queue.add(nodeToExecute);\n-        } else {\n-            if (!groups.containsKey(devices[0])) {\n-                groups.put(devices[0], new QueueObject());\n+    private void handleExecuteSequenceNode() {\n+        if (devicesRunning.compareAndSet(false, true)) {\n+            try {\n+                for (String serialNumber : devices.keySet()) {\n+                    LinkedBlockingQueue<QueueObject> queueObjects = devices.get(serialNumber);\n+                    QueueObject queueObject = queueObjects.peek();\n+                    if (queueObject != null && (queueObject.future == null || queueObject.future.isDone())) {\n+                        boolean execute = true;\n+                        String serial = \"\";\n+                        for (Device tmpDevice : queueObject.devices) {\n+                            if (!tmpDevice.serialNumber.equals(serialNumber)) {\n+                                LinkedBlockingQueue<QueueObject> tmpQueueObjects = devices.get(tmpDevice.serialNumber);\n+                                QueueObject tmpQueueObject = tmpQueueObjects.peek();\n+                                if (!tmpQueueObject.equals(queueObject)\n+                                        || (tmpQueueObject.future != null && !queueObject.future.isDone())) {\n+                                    execute = false;\n+                                    break;\n+                                }\n+                                serial = serial + tmpDevice.serialNumber + \" \";\n+                            }\n+                        }\n+                        if (execute) {\n+                            queueObject.future = scheduler.submit(() -> queuedExecuteSequenceNode(queueObject));\n+                            logger.debug(\"thread {} device {}\", queueObject.hashCode(), serial);\n+                        }\n+                    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "67e66176c2078fa377796abb0b9d2d5ddd1f4f58"}, "originalPosition": 544}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjgwNzEzOQ==", "bodyText": "Probably. But I would prefer to leave it as-is now as this part has a long history of wrong attempts to fix problems. It would be much easier to review the changes and see if they are really equivalent if there is nothing else in the PR.", "url": "https://github.com/openhab/openhab-addons/pull/9057#discussion_r526807139", "createdAt": "2020-11-19T11:50:30Z", "author": {"login": "J-N-K"}, "path": "bundles/org.openhab.binding.amazonechocontrol/src/main/java/org/openhab/binding/amazonechocontrol/internal/Connection.java", "diffHunk": "@@ -1553,87 +1558,97 @@ public void executeSequenceCommand(@Nullable Device device, String command,\n     }\n \n     private void executeSequenceNode(Device[] devices, JsonObject nodeToExecute) {\n-        if (devices.length == 1 && groups.values().stream().anyMatch(queueObject -> queueObject.queueRunning.get())\n-                || devices.length > 1\n-                        && singles.values().stream().anyMatch(queueObject -> queueObject.queueRunning.get())) {\n-            if (singleGroupTimer != null) {\n-                singleGroupTimer.cancel(true);\n-                singleGroupTimer = null;\n+        QueueObject queueObject = new QueueObject();\n+        queueObject.devices = devices;\n+        queueObject.nodeToExecute = nodeToExecute;\n+        String serial = \"\";\n+        for (Device device : devices) {\n+            if (!this.devices.containsKey(device.serialNumber)) {\n+                this.devices.put(device.serialNumber, new LinkedBlockingQueue<>());\n             }\n-            singleGroupTimer = scheduler.schedule(() -> executeSequenceNode(devices, nodeToExecute), 500,\n-                    TimeUnit.MILLISECONDS);\n-\n-            return;\n+            this.devices.get(device.serialNumber).offer(queueObject);\n+            serial = serial + device.serialNumber + \" \";\n         }\n+        logger.debug(\"added {} device {}\", queueObject.hashCode(), serial);\n+    }\n \n-        if (devices.length == 1) {\n-            if (!singles.containsKey(devices[0])) {\n-                singles.put(devices[0], new QueueObject());\n-            }\n-            singles.get(devices[0]).queue.add(nodeToExecute);\n-        } else {\n-            if (!groups.containsKey(devices[0])) {\n-                groups.put(devices[0], new QueueObject());\n+    private void handleExecuteSequenceNode() {\n+        if (devicesRunning.compareAndSet(false, true)) {\n+            try {\n+                for (String serialNumber : devices.keySet()) {\n+                    LinkedBlockingQueue<QueueObject> queueObjects = devices.get(serialNumber);\n+                    QueueObject queueObject = queueObjects.peek();\n+                    if (queueObject != null && (queueObject.future == null || queueObject.future.isDone())) {\n+                        boolean execute = true;\n+                        String serial = \"\";\n+                        for (Device tmpDevice : queueObject.devices) {\n+                            if (!tmpDevice.serialNumber.equals(serialNumber)) {\n+                                LinkedBlockingQueue<QueueObject> tmpQueueObjects = devices.get(tmpDevice.serialNumber);\n+                                QueueObject tmpQueueObject = tmpQueueObjects.peek();\n+                                if (!tmpQueueObject.equals(queueObject)\n+                                        || (tmpQueueObject.future != null && !queueObject.future.isDone())) {\n+                                    execute = false;\n+                                    break;\n+                                }\n+                                serial = serial + tmpDevice.serialNumber + \" \";\n+                            }\n+                        }\n+                        if (execute) {\n+                            queueObject.future = scheduler.submit(() -> queuedExecuteSequenceNode(queueObject));\n+                            logger.debug(\"thread {} device {}\", queueObject.hashCode(), serial);\n+                        }\n+                    }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTQyODI4NA=="}, "originalCommit": {"oid": "67e66176c2078fa377796abb0b9d2d5ddd1f4f58"}, "originalPosition": 544}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMwMzgyNjE1OnYy", "diffSide": "RIGHT", "path": "bundles/org.openhab.binding.amazonechocontrol/src/main/java/org/openhab/binding/amazonechocontrol/internal/WebSocketConnection.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQxNDoyMjo1NVrOH2g8CQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQxNDoyMjo1NVrOH2g8CQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjkyNDgwOQ==", "bodyText": "@mgeramb @Trinitus01\nDo you think this is correct? I assume that was the intended logic, because message.content.payload is always null at this place.\nl. 280/282 creates the message object with Message message = new Message(); which initializes message.content with a content = new Content();. In a newl created Content object the payload is null. message.content.payload is never assigned in the code between the object creation and here.", "url": "https://github.com/openhab/openhab-addons/pull/9057#discussion_r526924809", "createdAt": "2020-11-19T14:22:55Z", "author": {"login": "J-N-K"}, "path": "bundles/org.openhab.binding.amazonechocontrol/src/main/java/org/openhab/binding/amazonechocontrol/internal/WebSocketConnection.java", "diffHunk": "@@ -349,19 +347,17 @@ Message parseIncomingMessage(byte[] data) {\n                             if (idDataElements.length == 2) {\n                                 payload = idDataElements[1];\n                             }\n-                            if (message.content.payload == null) {\n+                            if (payload == null) {\n                                 payload = readString(data, idx, data.length - 4 - idx);\n                             }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2829b3189c8249bd337267aff49752aed726fdcf"}, "originalPosition": 32}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMxNzUzMTIyOnYy", "diffSide": "RIGHT", "path": "bundles/org.openhab.binding.amazonechocontrol/src/main/java/org/openhab/binding/amazonechocontrol/internal/smarthome/HandlerColorController.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QyMDozMDowOVrOH4eNqA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QyMTowNzoyMlrOH4fWTw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODk3NzMyMA==", "bodyText": "Was this a bugfix?", "url": "https://github.com/openhab/openhab-addons/pull/9057#discussion_r528977320", "createdAt": "2020-11-23T20:30:09Z", "author": {"login": "cpmeister"}, "path": "bundles/org.openhab.binding.amazonechocontrol/src/main/java/org/openhab/binding/amazonechocontrol/internal/smarthome/HandlerColorController.java", "diffHunk": "@@ -134,15 +133,15 @@ public boolean handleCommand(Connection connection, SmartHomeDevice shd, String\n                     colorObject.addProperty(\"hue\", color.getHue());\n                     colorObject.addProperty(\"saturation\", color.getSaturation().floatValue() / 100);\n                     colorObject.addProperty(\"brightness\", color.getBrightness().floatValue() / 100);\n-                    connection.smartHomeCommand(entityId, \"setColor\", \"color\", colorObject);\n+                    connection.smartHomeCommand(entityId, \"setColor\", \"value\", colorObject);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "82f88427bd761621e4baae2d82363b4d03a6cae4"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODk5NTkxOQ==", "bodyText": "Exactly. Reported in the forum.", "url": "https://github.com/openhab/openhab-addons/pull/9057#discussion_r528995919", "createdAt": "2020-11-23T21:07:22Z", "author": {"login": "J-N-K"}, "path": "bundles/org.openhab.binding.amazonechocontrol/src/main/java/org/openhab/binding/amazonechocontrol/internal/smarthome/HandlerColorController.java", "diffHunk": "@@ -134,15 +133,15 @@ public boolean handleCommand(Connection connection, SmartHomeDevice shd, String\n                     colorObject.addProperty(\"hue\", color.getHue());\n                     colorObject.addProperty(\"saturation\", color.getSaturation().floatValue() / 100);\n                     colorObject.addProperty(\"brightness\", color.getBrightness().floatValue() / 100);\n-                    connection.smartHomeCommand(entityId, \"setColor\", \"color\", colorObject);\n+                    connection.smartHomeCommand(entityId, \"setColor\", \"value\", colorObject);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODk3NzMyMA=="}, "originalCommit": {"oid": "82f88427bd761621e4baae2d82363b4d03a6cae4"}, "originalPosition": 37}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMxNzU2MTY0OnYy", "diffSide": "RIGHT", "path": "bundles/org.openhab.binding.amazonechocontrol/src/main/java/org/openhab/binding/amazonechocontrol/internal/AccountServlet.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QyMDozOTozNlrOH4ef8g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QyMDozOTozNlrOH4ef8g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODk4MjAwMg==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            if (strings != null && strings[0] != null) {\n          \n          \n            \n                                value = strings[0];\n          \n          \n            \n                            if (strings != null && && string.length > 0 && strings[0] != null) {\n          \n          \n            \n                                value = strings[0];", "url": "https://github.com/openhab/openhab-addons/pull/9057#discussion_r528982002", "createdAt": "2020-11-23T20:39:36Z", "author": {"login": "cpmeister"}, "path": "bundles/org.openhab.binding.amazonechocontrol/src/main/java/org/openhab/binding/amazonechocontrol/internal/AccountServlet.java", "diffHunk": "@@ -192,15 +199,20 @@ void doVerb(String verb, @Nullable HttpServletRequest req, @Nullable HttpServlet\n \n             postDataBuilder.append(name);\n             postDataBuilder.append('=');\n-            String value = map.get(name)[0];\n+            String value = \"\";\n             if (name.equals(\"failedSignInCount\")) {\n                 value = \"ape:AA==\";\n+            } else {\n+                String[] strings = map.get(name);\n+                if (strings != null && strings[0] != null) {\n+                    value = strings[0];", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "82f88427bd761621e4baae2d82363b4d03a6cae4"}, "originalPosition": 55}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3932, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}