{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAzNDIyMzE3", "number": 7374, "title": "Remove deprecated DiscoveryServiceCallback, ExtendedDiscoveryService usages", "bodyText": "Because of the deprecation each DiscoveryServiceCallback method will always return null so it's better to remove all usages.\nRelated to openhab/openhab-core#1408, openhab/openhab-core#1424", "createdAt": "2020-04-14T21:25:12Z", "url": "https://github.com/openhab/openhab-addons/pull/7374", "merged": true, "mergeCommit": {"oid": "fcefca4567a9fa8c0fabb02b44176c0418ca4549"}, "closed": true, "closedAt": "2020-04-15T00:40:22Z", "author": {"login": "wborn"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcXqRwigH2gAyNDAzNDIyMzE3OmI0NTQyNWM3YzE1YjAyNDE1ODgwMTIyNjljNjM4ZWZlYzcwOTc0MTM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcXtF60AFqTM5MzM4NDkzNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b45425c7c15b0241588012269c638efec7097413", "author": {"user": {"login": "wborn", "name": "Wouter Born"}}, "url": "https://github.com/openhab/openhab-addons/commit/b45425c7c15b0241588012269c638efec7097413", "committedDate": "2020-04-14T21:21:45Z", "message": "Remove deprecated DiscoveryServiceCallback, ExtendedDiscoveryService usages\n\nBecause of the deprecation each DiscoveryServiceCallback method will always return null so it's better to remove all usages.\n\nRelated to openhab/openhab-core#1408\n\nSigned-off-by: Wouter Born <github@maindrain.net>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkzMzA4Nzg2", "url": "https://github.com/openhab/openhab-addons/pull/7374#pullrequestreview-393308786", "createdAt": "2020-04-14T21:27:54Z", "commit": {"oid": "b45425c7c15b0241588012269c638efec7097413"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQyMToyNzo1NFrOGFhmJw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQyMToyNzo1NFrOGFhmJw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODQ0NjUwMw==", "bodyText": "This should fix discovery of multiple flash briefings. Because of the deprecation I think it would currently always create only one briefing with id 1. \ud83d\ude04", "url": "https://github.com/openhab/openhab-addons/pull/7374#discussion_r408446503", "createdAt": "2020-04-14T21:27:54Z", "author": {"login": "wborn"}, "path": "bundles/org.openhab.binding.amazonechocontrol/src/main/java/org/openhab/binding/amazonechocontrol/internal/discovery/AmazonEchoDiscovery.java", "diffHunk": "@@ -188,30 +170,13 @@ public synchronized void discoverFlashBriefingProfiles(String currentFlashBriefi\n         if (currentFlashBriefingJson.isEmpty()) {\n             return;\n         }\n-        DiscoveryServiceCallback discoveryServiceCallback = this.discoveryServiceCallback;\n-        if (discoveryServiceCallback == null) {\n-            return;\n-        }\n \n         if (!discoverdFlashBriefings.contains(currentFlashBriefingJson)) {\n-            ThingUID freeThingUID = null;\n-            int freeIndex = 0;\n-            for (int i = 1; i < 1000; i++) {\n-                String id = Integer.toString(i);\n-                ThingUID brigdeThingUID = this.accountHandler.getThing().getUID();\n-                ThingUID thingUID = new ThingUID(THING_TYPE_FLASH_BRIEFING_PROFILE, brigdeThingUID, id);\n-                if (discoveryServiceCallback.getExistingThing(thingUID) == null\n-                        && discoveryServiceCallback.getExistingDiscoveryResult(thingUID) == null) {\n-                    freeThingUID = thingUID;\n-                    freeIndex = i;\n-                    break;\n-                }\n-            }\n-            if (freeThingUID == null) {\n-                logger.debug(\"No more free flashbriefing thing ID found\");\n-                return;\n-            }\n-            DiscoveryResult result = DiscoveryResultBuilder.create(freeThingUID).withLabel(\"FlashBriefing \" + freeIndex)\n+            ThingUID brigdeThingUID = this.accountHandler.getThing().getUID();\n+            ThingUID thingUID = new ThingUID(THING_TYPE_FLASH_BRIEFING_PROFILE, brigdeThingUID,\n+                    Integer.toString(currentFlashBriefingJson.hashCode()));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b45425c7c15b0241588012269c638efec7097413"}, "originalPosition": 109}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkzMzI0Mjcz", "url": "https://github.com/openhab/openhab-addons/pull/7374#pullrequestreview-393324273", "createdAt": "2020-04-14T21:56:01Z", "commit": {"oid": "b45425c7c15b0241588012269c638efec7097413"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkzMzYzMDE1", "url": "https://github.com/openhab/openhab-addons/pull/7374#pullrequestreview-393363015", "createdAt": "2020-04-14T23:30:45Z", "commit": {"oid": "b45425c7c15b0241588012269c638efec7097413"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkzMzg0OTM2", "url": "https://github.com/openhab/openhab-addons/pull/7374#pullrequestreview-393384936", "createdAt": "2020-04-15T00:38:32Z", "commit": {"oid": "b45425c7c15b0241588012269c638efec7097413"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 815, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}