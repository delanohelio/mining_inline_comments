{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzU4NDg1Mjgy", "number": 6730, "title": "[skeleton] Fixed versions in create binding skeleton scripts", "bodyText": "Fixed version in create binding skeleton scripts\nDistinguish between version and archetypeVersion\ntemporary fix for {ohc.version} variable in linux script - windows is missing\n\n@Hilbrand wdyt? I am not a Windows expert thus I am afraid I do not know how to replace the variable inside the feature.xml.\nAlso-by: Hilbrand Bouwkamp hilbrand@h72.nl\nAlso-by: Jan N. Klug jan.n.klug@rub.de\nSigned-off-by: Christoph Weitkamp github@christophweitkamp.de", "createdAt": "2020-01-01T12:51:54Z", "url": "https://github.com/openhab/openhab-addons/pull/6730", "merged": true, "mergeCommit": {"oid": "4baf19dd8eb32339d7829c798335e242ec8824f1"}, "closed": true, "closedAt": "2020-01-06T17:39:02Z", "author": {"login": "cweitkamp"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb2ElDgAH2gAyMzU4NDg1MjgyOmExMmMwNDNkZDJjMTJhMDZjOWU4ODc2Y2Q5OTA4OTE3MDJlMGEwNGQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb3vu9wAFqTMzODc4NTU4OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "a12c043dd2c12a06c9e8876cd990891702e0a04d", "author": {"user": {"login": "cweitkamp", "name": "Christoph Weitkamp"}}, "url": "https://github.com/openhab/openhab-addons/commit/a12c043dd2c12a06c9e8876cd990891702e0a04d", "committedDate": "2020-01-01T12:46:56Z", "message": "Fixed versions in create binding skeleton scripts\n\nSigned-off-by: Christoph Weitkamp <github@christophweitkamp.de>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM3NDk0NDI2", "url": "https://github.com/openhab/openhab-addons/pull/6730#pullrequestreview-337494426", "createdAt": "2020-01-01T15:55:01Z", "commit": {"oid": "a12c043dd2c12a06c9e8876cd990891702e0a04d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wMVQxNTo1NTowMVrOFZi4-A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wMVQxNTo1NTowMVrOFZi4-A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjMzMDM2MA==", "bodyText": "According to https://stackoverflow.com/questions/127318/is-there-any-sed-like-utility-for-cmd-exe this @powershell --command \"get-content  org.openhab.binding.%BindingIdInLowerCase%\\src\\main\\feature\\feature.xml | %{$_ -replace \\\"${project.version}\\\",\\\"$[ohc.version\\\"}\" should work", "url": "https://github.com/openhab/openhab-addons/pull/6730#discussion_r362330360", "createdAt": "2020-01-01T15:55:01Z", "author": {"login": "J-N-K"}, "path": "bundles/create_openhab_binding_skeleton.cmd", "diffHunk": "@@ -19,18 +20,20 @@ SET GithubUser=%~3\n \r\n call :LoCase BindingIdInLowerCase\r\n \r\n-call mvn -s archetype-settings.xml archetype:generate -N -DarchetypeGroupId=org.openhab.core.tools.archetypes -DarchetypeArtifactId=org.openhab.core.tools.archetypes.binding -DarchetypeVersion=%OpenhabVersion% -DgroupId=org.openhab.binding -DartifactId=org.openhab.binding.%BindingIdInLowerCase% -Dpackage=org.openhab.binding.%BindingIdInLowerCase% -Dversion=%OpenhabVersion% -DbindingId=%BindingIdInLowerCase% -DbindingIdCamelCase=%BindingIdInCamelCase% -DvendorName=openHAB -Dnamespace=org.openhab -Dauthor=\"%Author%\" -DgithubUser=\"%GithubUser%\"\r\n+call mvn -s archetype-settings.xml archetype:generate -N -DarchetypeGroupId=org.openhab.core.tools.archetypes -DarchetypeArtifactId=org.openhab.core.tools.archetypes.binding -DarchetypeVersion=%OpenhabCoreVersion% -DgroupId=org.openhab.binding -DartifactId=org.openhab.binding.%BindingIdInLowerCase% -Dpackage=org.openhab.binding.%BindingIdInLowerCase% -Dversion=%OpenhabVersion% -DbindingId=%BindingIdInLowerCase% -DbindingIdCamelCase=%BindingIdInCamelCase% -DvendorName=openHAB -Dnamespace=org.openhab -Dauthor=\"%Author%\" -DgithubUser=\"%GithubUser%\"\r\n \r\n COPY ..\\src\\etc\\NOTICE org.openhab.binding.%BindingIdInLowerCase%\\\r\n \r\n+:: temporary fix\r\n+:: TODO replace ${project.version} by ${ohc.version} in src/main/feature/feature.xml\r\n+\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a12c043dd2c12a06c9e8876cd990891702e0a04d"}, "originalPosition": 21}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f189380e4abe94bdb866dbfe6fa5a196ae8a93fb", "author": {"user": {"login": "cweitkamp", "name": "Christoph Weitkamp"}}, "url": "https://github.com/openhab/openhab-addons/commit/f189380e4abe94bdb866dbfe6fa5a196ae8a93fb", "committedDate": "2020-01-02T16:06:47Z", "message": "Added Powershell command to replace variable\n\nSigned-off-by: Christoph Weitkamp <github@christophweitkamp.de>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM3NDk1NDA5", "url": "https://github.com/openhab/openhab-addons/pull/6730#pullrequestreview-337495409", "createdAt": "2020-01-01T16:22:21Z", "commit": {"oid": "a12c043dd2c12a06c9e8876cd990891702e0a04d"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wMVQxNjoyMjoyMVrOFZi9qw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wMlQxMToxODo0NlrOFZpoXw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjMzMTU2Mw==", "bodyText": "This should be just 2.5.0 without SNAPSHOT.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            SET OpenhabCoreVersion=\"2.5.0-SNAPSHOT\"\n          \n          \n            \n            SET OpenhabCoreVersion=\"2.5.0\"", "url": "https://github.com/openhab/openhab-addons/pull/6730#discussion_r362331563", "createdAt": "2020-01-01T16:22:21Z", "author": {"login": "Hilbrand"}, "path": "bundles/create_openhab_binding_skeleton.cmd", "diffHunk": "@@ -10,7 +10,8 @@ IF %ARGC% NEQ 3 (\n \texit /B 1\r\n )\r\n \r\n-SET OpenhabVersion=\"2.5.0-SNAPSHOT\"\r\n+SET OpenhabCoreVersion=\"2.5.0-SNAPSHOT\"\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a12c043dd2c12a06c9e8876cd990891702e0a04d"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjMzMTY2Mg==", "bodyText": "Same here you can remove SNAPSHOT.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            openHABCoreVersion=2.5.0-SNAPSHOT\n          \n          \n            \n            openHABCoreVersion=2.5.0", "url": "https://github.com/openhab/openhab-addons/pull/6730#discussion_r362331662", "createdAt": "2020-01-01T16:24:31Z", "author": {"login": "Hilbrand"}, "path": "bundles/create_openhab_binding_skeleton.sh", "diffHunk": "@@ -2,7 +2,8 @@\n \n [ $# -lt 3 ] && { echo \"Usage: $0 <BindingIdInCamelCase> <Author> <GitHub Username>\"; exit 1; }\n \n-openHABVersion=2.5.0-SNAPSHOT\n+openHABCoreVersion=2.5.0-SNAPSHOT", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a12c043dd2c12a06c9e8876cd990891702e0a04d"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjQ0MDc5OQ==", "bodyText": "I would drop creating a .bak file. It's only confusing and will probably lead to people committing that file too\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            sed -i'.bak' -e \"s|\\-core\\/\\${project.version}|\\-core\\/\\${ohc.version}|g\" \"$directory/src/main/feature/feature.xml\"\n          \n          \n            \n            sed -i -e \"s|\\-core\\/\\${project.version}|\\-core\\/\\${ohc.version}|g\" \"$directory/src/main/feature/feature.xml\"", "url": "https://github.com/openhab/openhab-addons/pull/6730#discussion_r362440799", "createdAt": "2020-01-02T11:18:46Z", "author": {"login": "Hilbrand"}, "path": "bundles/create_openhab_binding_skeleton.sh", "diffHunk": "@@ -29,3 +30,6 @@ directory=\"org.openhab.binding.$id/\"\n \n cp ../src/etc/NOTICE \"$directory\"\n \n+# temporary fix\n+sed -i'.bak' -e \"s|\\-core\\/\\${project.version}|\\-core\\/\\${ohc.version}|g\" \"$directory/src/main/feature/feature.xml\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a12c043dd2c12a06c9e8876cd990891702e0a04d"}, "originalPosition": 24}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a5d01d14d80b4b20868a6c120dad9a8612859b3e", "author": {"user": {"login": "J-N-K", "name": null}}, "url": "https://github.com/openhab/openhab-addons/commit/a5d01d14d80b4b20868a6c120dad9a8612859b3e", "committedDate": "2020-01-03T13:07:32Z", "message": "fix windows replace in feature (#3)\n\nSigned-off-by: Jan N. Klug <jan.n.klug@rub.de>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3f44a10d15c7c2213df30d6dee744c918c9d8666", "author": {"user": {"login": "cweitkamp", "name": "Christoph Weitkamp"}}, "url": "https://github.com/openhab/openhab-addons/commit/3f44a10d15c7c2213df30d6dee744c918c9d8666", "committedDate": "2020-01-03T13:08:51Z", "message": "Update bundles/create_openhab_binding_skeleton.cmd\r\n\r\nChristoph Weitkamp <github@christophweitkamp.de>\n\nCo-Authored-By: Hilbrand Bouwkamp <hilbrand@h72.nl>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7d782745d7b19b57aa72494f11954688d1c2a982", "author": {"user": {"login": "cweitkamp", "name": "Christoph Weitkamp"}}, "url": "https://github.com/openhab/openhab-addons/commit/7d782745d7b19b57aa72494f11954688d1c2a982", "committedDate": "2020-01-03T13:08:58Z", "message": "Update bundles/create_openhab_binding_skeleton.sh\r\n\r\nChristoph Weitkamp <github@christophweitkamp.de>\n\nCo-Authored-By: Hilbrand Bouwkamp <hilbrand@h72.nl>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "31c388234890ab0a303862b426272e42a6446e6e", "author": {"user": {"login": "cweitkamp", "name": "Christoph Weitkamp"}}, "url": "https://github.com/openhab/openhab-addons/commit/31c388234890ab0a303862b426272e42a6446e6e", "committedDate": "2020-01-03T13:09:20Z", "message": "Update bundles/create_openhab_binding_skeleton.sh\r\n\r\nChristoph Weitkamp <github@christophweitkamp.de>\n\nCo-Authored-By: Hilbrand Bouwkamp <hilbrand@h72.nl>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM4MDc1MzE4", "url": "https://github.com/openhab/openhab-addons/pull/6730#pullrequestreview-338075318", "createdAt": "2020-01-03T13:20:18Z", "commit": {"oid": "31c388234890ab0a303862b426272e42a6446e6e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM4Nzg1NTg5", "url": "https://github.com/openhab/openhab-addons/pull/6730#pullrequestreview-338785589", "createdAt": "2020-01-06T17:37:36Z", "commit": {"oid": "31c388234890ab0a303862b426272e42a6446e6e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1743, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}