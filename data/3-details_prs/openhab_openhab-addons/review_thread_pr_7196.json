{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkxMzE2ODYw", "number": 7196, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQwMzoyOTozMlrODpvd5w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQwMzozODoxMFrODresUA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1MDk1OTExOnYy", "diffSide": "RIGHT", "path": "bundles/org.openhab.binding.insteon/src/main/java/org/openhab/binding/insteon/internal/device/CommandHandler.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQwMzoyOTozMlrOF5G07A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQxMjoxMTozOFrOF8D8OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTQyNTAwNA==", "bodyText": "How do you know that polling will occur after the enqueued message?", "url": "https://github.com/openhab/openhab-addons/pull/7196#discussion_r395425004", "createdAt": "2020-03-20T03:29:32Z", "author": {"login": "cpmeister"}, "path": "bundles/org.openhab.binding.insteon/src/main/java/org/openhab/binding/insteon/internal/device/CommandHandler.java", "diffHunk": "@@ -346,6 +346,7 @@ public void handleCommand(InsteonChannelConfiguration conf, Command cmd, Insteon\n                             getGroup(conf));\n                     Msg m = dev.makeStandardMessage((byte) 0x0f, cmd1, value, group);\n                     dev.enqueueMessage(m, feature);\n+                    feature.pollRelatedDevices();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "27a27452d5009530f77fc86012262b52aa1dcfef"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTU1ODA4Mw==", "bodyText": "This bascially replicates what happens in DeviceFeature.publishState() -> DeviceFeatureListener.publishState() when a new state comes in from Insteon network. Since this is a broadcast message, and the way the Insteon protocol works state changes are not sent to the broadcaster.", "url": "https://github.com/openhab/openhab-addons/pull/7196#discussion_r395558083", "createdAt": "2020-03-20T10:47:28Z", "author": {"login": "robnielsen"}, "path": "bundles/org.openhab.binding.insteon/src/main/java/org/openhab/binding/insteon/internal/device/CommandHandler.java", "diffHunk": "@@ -346,6 +346,7 @@ public void handleCommand(InsteonChannelConfiguration conf, Command cmd, Insteon\n                             getGroup(conf));\n                     Msg m = dev.makeStandardMessage((byte) 0x0f, cmd1, value, group);\n                     dev.enqueueMessage(m, feature);\n+                    feature.pollRelatedDevices();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTQyNTAwNA=="}, "originalCommit": {"oid": "27a27452d5009530f77fc86012262b52aa1dcfef"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTgwOTk3OQ==", "bodyText": "I've also tested to make sure the polling is occurring as expected.", "url": "https://github.com/openhab/openhab-addons/pull/7196#discussion_r395809979", "createdAt": "2020-03-20T18:09:47Z", "author": {"login": "robnielsen"}, "path": "bundles/org.openhab.binding.insteon/src/main/java/org/openhab/binding/insteon/internal/device/CommandHandler.java", "diffHunk": "@@ -346,6 +346,7 @@ public void handleCommand(InsteonChannelConfiguration conf, Command cmd, Insteon\n                             getGroup(conf));\n                     Msg m = dev.makeStandardMessage((byte) 0x0f, cmd1, value, group);\n                     dev.enqueueMessage(m, feature);\n+                    feature.pollRelatedDevices();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTQyNTAwNA=="}, "originalCommit": {"oid": "27a27452d5009530f77fc86012262b52aa1dcfef"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODUyMzQ0OQ==", "bodyText": "@mfedotov has tested as well.", "url": "https://github.com/openhab/openhab-addons/pull/7196#discussion_r398523449", "createdAt": "2020-03-26T12:11:38Z", "author": {"login": "robnielsen"}, "path": "bundles/org.openhab.binding.insteon/src/main/java/org/openhab/binding/insteon/internal/device/CommandHandler.java", "diffHunk": "@@ -346,6 +346,7 @@ public void handleCommand(InsteonChannelConfiguration conf, Command cmd, Insteon\n                             getGroup(conf));\n                     Msg m = dev.makeStandardMessage((byte) 0x0f, cmd1, value, group);\n                     dev.enqueueMessage(m, feature);\n+                    feature.pollRelatedDevices();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTQyNTAwNA=="}, "originalCommit": {"oid": "27a27452d5009530f77fc86012262b52aa1dcfef"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ2OTE4MjI0OnYy", "diffSide": "RIGHT", "path": "bundles/org.openhab.binding.insteon/README.md", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQwMzozODoxMFrOF72TKA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQxMjowOToxNVrOF8D3Yg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODI5OTk0NA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            In this scenario, the \"related\" keyword can be used to have the binding to poll a related device whenever a state change occurs for another device.\n          \n          \n            \n            In this scenario, the \"related\" keyword can be used to have the binding poll a related device whenever a state change occurs for another device.", "url": "https://github.com/openhab/openhab-addons/pull/7196#discussion_r398299944", "createdAt": "2020-03-26T03:38:10Z", "author": {"login": "cpmeister"}, "path": "bundles/org.openhab.binding.insteon/README.md", "diffHunk": "@@ -695,12 +695,12 @@ Bridge insteon:network:local      [port=\"/dev/ttyUSB0\"] {\n \n Flipping this switch to \"ON\" will cause the modem to send a broadcast message with group=2, and all devices that are configured to respond to it should react.\n \n-## 3-way Switch Configurations and the \"related\" Keyword\n+## Channel \"related\" Property\n \n When an Insteon device changes its state because it is directly operated (for example by flipping a switch manually), it sends out a broadcast message to announce the state change, and the binding (if the PLM modem is properly linked as a responder) should update the corresponding openHAB items.\n Other linked devices however may also change their state in response, but those devices will *not* send out a broadcast message, and so openHAB will not learn about their state change until the next poll.\n One common scenario is e.g. a switch in a 3-way configuration, with one switch controlling the load, and the other switch being linked as a controller.\n-In this scenario, the \"related\" keyword can be used to cause the binding to poll a related device whenever a state change occurs for another device.\n+In this scenario, the \"related\" keyword can be used to have the binding to poll a related device whenever a state change occurs for another device.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2741325cded1f1b4dae7d7314e6dc0653aa0d51"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODUyMjIxMA==", "bodyText": "Fixed, thanks for proofreading :)", "url": "https://github.com/openhab/openhab-addons/pull/7196#discussion_r398522210", "createdAt": "2020-03-26T12:09:15Z", "author": {"login": "robnielsen"}, "path": "bundles/org.openhab.binding.insteon/README.md", "diffHunk": "@@ -695,12 +695,12 @@ Bridge insteon:network:local      [port=\"/dev/ttyUSB0\"] {\n \n Flipping this switch to \"ON\" will cause the modem to send a broadcast message with group=2, and all devices that are configured to respond to it should react.\n \n-## 3-way Switch Configurations and the \"related\" Keyword\n+## Channel \"related\" Property\n \n When an Insteon device changes its state because it is directly operated (for example by flipping a switch manually), it sends out a broadcast message to announce the state change, and the binding (if the PLM modem is properly linked as a responder) should update the corresponding openHAB items.\n Other linked devices however may also change their state in response, but those devices will *not* send out a broadcast message, and so openHAB will not learn about their state change until the next poll.\n One common scenario is e.g. a switch in a 3-way configuration, with one switch controlling the load, and the other switch being linked as a controller.\n-In this scenario, the \"related\" keyword can be used to cause the binding to poll a related device whenever a state change occurs for another device.\n+In this scenario, the \"related\" keyword can be used to have the binding to poll a related device whenever a state change occurs for another device.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODI5OTk0NA=="}, "originalCommit": {"oid": "a2741325cded1f1b4dae7d7314e6dc0653aa0d51"}, "originalPosition": 11}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 724, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}