{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA2MjMyNjcw", "number": 7431, "title": "[miio] Improve Yeelight Color channel", "bodyText": "fix yeelight delay channel\nallow better control for Color item\nAllow for google home  support without rules\nmake yeelight dimmer more intuitive\nhttps://community.openhab.org/t/xiaomi-robot-vacuum-binding/31317/1418\n\nSigned-off-by: Marcel Verpaalen marcel@verpaalen.com", "createdAt": "2020-04-20T18:40:10Z", "url": "https://github.com/openhab/openhab-addons/pull/7431", "merged": true, "mergeCommit": {"oid": "47a320c1d745eb65c3354b28c4f1a278425eadb7"}, "closed": true, "closedAt": "2020-04-21T02:48:05Z", "author": {"login": "marcelrv"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcZjguwgH2gAyNDA2MjMyNjcwOjI4MTM1NTI3ZDliOTJiMThhNDU2YTMwOGY1ODI2Y2UwZTViYTQ2M2I=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcZqiWJgFqTM5Njk1MDYxMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "28135527d9b92b18a456a308f5826ce0e5ba463b", "author": {"user": {"login": "marcelrv", "name": "Marcel"}}, "url": "https://github.com/openhab/openhab-addons/commit/28135527d9b92b18a456a308f5826ce0e5ba463b", "committedDate": "2020-04-20T18:36:37Z", "message": "[miio] Improve Yeelight Color channel\n\n* fix yeelight delay channel\n* allow better control for Color item\n* Allow for google home  support without rules\n* make yeelight dimmer more intuitive\nhttps://community.openhab.org/t/xiaomi-robot-vacuum-binding/31317/1418\n\nSigned-off-by: Marcel Verpaalen <marcel@verpaalen.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2Nzc4OTk5", "url": "https://github.com/openhab/openhab-addons/pull/7431#pullrequestreview-396778999", "createdAt": "2020-04-20T20:15:15Z", "commit": {"oid": "28135527d9b92b18a456a308f5826ce0e5ba463b"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQyMDoxNToxNVrOGIl1aw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQyMDoxNToxNVrOGIl1aw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTY2MTY3NQ==", "bodyText": "The name of this method is inappropriate for what it returns.", "url": "https://github.com/openhab/openhab-addons/pull/7431#discussion_r411661675", "createdAt": "2020-04-20T20:15:15Z", "author": {"login": "cpmeister"}, "path": "bundles/org.openhab.binding.miio/src/main/java/org/openhab/binding/miio/internal/basic/ActionConditions.java", "diffHunk": "@@ -77,24 +77,43 @@\n     private static @Nullable JsonElement brightnessExists(@Nullable JsonElement value) {\n         if (value != null && value.isJsonPrimitive() && value.getAsJsonPrimitive().isNumber()) {\n             int intVal = value.getAsInt();\n-            if (intVal > 0 && intVal < 99) {\n+            if (intVal > 0 && intVal <= 100) {\n                 return value;\n             }\n+            return null;\n         } else {\n             LOGGER.debug(\"Could not parse brightness. Value '{}' is not an int\", value);\n         }\n+        return value;\n+    }\n+\n+    /**\n+     * Check if the value is a color which can be send to Color channel.\n+     * If not returns a null\n+     *\n+     * @param command\n+     *\n+     * @param value\n+     * @return\n+     */\n+    private static @Nullable JsonElement isHSV(Command command, @Nullable JsonElement value) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "28135527d9b92b18a456a308f5826ce0e5ba463b"}, "originalPosition": 63}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b443baea2d5a3bbea401823925344a5d351f1462", "author": {"user": {"login": "marcelrv", "name": "Marcel"}}, "url": "https://github.com/openhab/openhab-addons/commit/b443baea2d5a3bbea401823925344a5d351f1462", "committedDate": "2020-04-20T22:13:27Z", "message": "[miio] rename condition & adding a test\n\n\nSigned-off-by: Marcel Verpaalen <marcel@verpaalen.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fe87b1c158a7394e242db96348199cf063eb534a", "author": {"user": {"login": "marcelrv", "name": "Marcel"}}, "url": "https://github.com/openhab/openhab-addons/commit/fe87b1c158a7394e242db96348199cf063eb534a", "committedDate": "2020-04-20T22:29:57Z", "message": "[miio] add copyright\n\nSigned-off-by: Marcel Verpaalen <marcel@verpaalen.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2ODY0OTA5", "url": "https://github.com/openhab/openhab-addons/pull/7431#pullrequestreview-396864909", "createdAt": "2020-04-20T22:47:04Z", "commit": {"oid": "fe87b1c158a7394e242db96348199cf063eb534a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQyMjo0NzowNFrOGIqwZA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQyMjo0NzowNFrOGIqwZA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTc0MjMwOA==", "bodyText": "Please make method name camelcase.", "url": "https://github.com/openhab/openhab-addons/pull/7431#discussion_r411742308", "createdAt": "2020-04-20T22:47:04Z", "author": {"login": "cpmeister"}, "path": "bundles/org.openhab.binding.miio/src/main/java/org/openhab/binding/miio/internal/basic/ActionConditions.java", "diffHunk": "@@ -77,24 +77,45 @@\n     private static @Nullable JsonElement brightnessExists(@Nullable JsonElement value) {\n         if (value != null && value.isJsonPrimitive() && value.getAsJsonPrimitive().isNumber()) {\n             int intVal = value.getAsInt();\n-            if (intVal > 0 && intVal < 99) {\n+            if (intVal > 0 && intVal <= 100) {\n                 return value;\n+            } else if (intVal > 100) {\n+                return new JsonPrimitive(100);\n             }\n+            return null;\n         } else {\n             LOGGER.debug(\"Could not parse brightness. Value '{}' is not an int\", value);\n         }\n+        return value;\n+    }\n+\n+    /**\n+     * Check if the value is a color which can be send to Color channel.\n+     * If not returns a null\n+     *\n+     * @param command\n+     *\n+     * @param value\n+     * @return\n+     */\n+    private static @Nullable JsonElement HSBOnly(@Nullable Command command, @Nullable JsonElement value) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fe87b1c158a7394e242db96348199cf063eb534a"}, "originalPosition": 79}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6b1384c22eb9b35545d9f6faeadc91d349f52232", "author": {"user": {"login": "marcelrv", "name": "Marcel"}}, "url": "https://github.com/openhab/openhab-addons/commit/6b1384c22eb9b35545d9f6faeadc91d349f52232", "committedDate": "2020-04-20T23:03:42Z", "message": "[miio] rename hsbOnly\n\nSigned-off-by: Marcel Verpaalen <marcel@verpaalen.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2OTUwNjEy", "url": "https://github.com/openhab/openhab-addons/pull/7431#pullrequestreview-396950612", "createdAt": "2020-04-21T02:47:43Z", "commit": {"oid": "6b1384c22eb9b35545d9f6faeadc91d349f52232"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 847, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}