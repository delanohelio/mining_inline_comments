{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU2NzQ0NTM0", "number": 8203, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QxMjoxMDoyMFrOESW_1w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QxMjoxMDoyMFrOESW_1w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg3Njg2NjE1OnYy", "diffSide": "RIGHT", "path": "bundles/org.openhab.binding.netatmo/src/main/java/org/openhab/binding/netatmo/internal/welcome/NAWelcomeHomeHandler.java", "isResolved": true, "comments": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QxMjoxMDoyMFrOG3ftsA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQxODoxMjoxOVrOG5ETHw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDg0NDQ2NA==", "bodyText": "Couldn't you use NAWelcomeSubEvent.TypeEnum.valueOf(catory.uppercase()) instead ?", "url": "https://github.com/openhab/openhab-addons/pull/8203#discussion_r460844464", "createdAt": "2020-07-27T12:10:20Z", "author": {"login": "clinique"}, "path": "bundles/org.openhab.binding.netatmo/src/main/java/org/openhab/binding/netatmo/internal/welcome/NAWelcomeHomeHandler.java", "diffHunk": "@@ -196,6 +201,19 @@ protected void triggerChannelIfRequired(String channelId) {\n         return detectedObjectTypes;\n     }\n \n+    private static Optional<NAWelcomeSubEvent.TypeEnum> findDetectedCategory(NAWelcomeEvent event) {\n+        String category = event.getCategory();\n+        if (category != null) {\n+            switch (category) {\n+                case \"human\":", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4ae43e31b33c844cda6e3ec437f74f8fb1dfe0c6"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTA4MTk0MA==", "bodyText": "Hm, that would result in an IllegalArgumentException when Netatmo returns a category which isn't existing within the enum.\nI could implement a utility function which does that for example like this static map example, but maybe it would be a little bit too complicated to check for 2 values, but I could do that :-) https://dzone.com/articles/java-enum-lookup-by-name-or-field-without-throwing", "url": "https://github.com/openhab/openhab-addons/pull/8203#discussion_r461081940", "createdAt": "2020-07-27T18:21:00Z", "author": {"login": "Novanic"}, "path": "bundles/org.openhab.binding.netatmo/src/main/java/org/openhab/binding/netatmo/internal/welcome/NAWelcomeHomeHandler.java", "diffHunk": "@@ -196,6 +201,19 @@ protected void triggerChannelIfRequired(String channelId) {\n         return detectedObjectTypes;\n     }\n \n+    private static Optional<NAWelcomeSubEvent.TypeEnum> findDetectedCategory(NAWelcomeEvent event) {\n+        String category = event.getCategory();\n+        if (category != null) {\n+            switch (category) {\n+                case \"human\":", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDg0NDQ2NA=="}, "originalCommit": {"oid": "4ae43e31b33c844cda6e3ec437f74f8fb1dfe0c6"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTM2NzI4NQ==", "bodyText": "According to documentation the set of values seems clearly defined, so, don't you think we could rely on it ? We'll face a potential IAE if the API evolves...", "url": "https://github.com/openhab/openhab-addons/pull/8203#discussion_r461367285", "createdAt": "2020-07-28T07:14:38Z", "author": {"login": "clinique"}, "path": "bundles/org.openhab.binding.netatmo/src/main/java/org/openhab/binding/netatmo/internal/welcome/NAWelcomeHomeHandler.java", "diffHunk": "@@ -196,6 +201,19 @@ protected void triggerChannelIfRequired(String channelId) {\n         return detectedObjectTypes;\n     }\n \n+    private static Optional<NAWelcomeSubEvent.TypeEnum> findDetectedCategory(NAWelcomeEvent event) {\n+        String category = event.getCategory();\n+        if (category != null) {\n+            switch (category) {\n+                case \"human\":", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDg0NDQ2NA=="}, "originalCommit": {"oid": "4ae43e31b33c844cda6e3ec437f74f8fb1dfe0c6"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTM3MjgzMQ==", "bodyText": "You have found a documentation of the possible values of the \"category\" element? :-) I haven't found any documentation regarding this element, so we don't know which value could be set.", "url": "https://github.com/openhab/openhab-addons/pull/8203#discussion_r461372831", "createdAt": "2020-07-28T07:25:19Z", "author": {"login": "Novanic"}, "path": "bundles/org.openhab.binding.netatmo/src/main/java/org/openhab/binding/netatmo/internal/welcome/NAWelcomeHomeHandler.java", "diffHunk": "@@ -196,6 +201,19 @@ protected void triggerChannelIfRequired(String channelId) {\n         return detectedObjectTypes;\n     }\n \n+    private static Optional<NAWelcomeSubEvent.TypeEnum> findDetectedCategory(NAWelcomeEvent event) {\n+        String category = event.getCategory();\n+        if (category != null) {\n+            switch (category) {\n+                case \"human\":", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDg0NDQ2NA=="}, "originalCommit": {"oid": "4ae43e31b33c844cda6e3ec437f74f8fb1dfe0c6"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTM3Mzk1Ng==", "bodyText": "Yes, take a look at 'event_list' on the referenced doc url.", "url": "https://github.com/openhab/openhab-addons/pull/8203#discussion_r461373956", "createdAt": "2020-07-28T07:27:21Z", "author": {"login": "clinique"}, "path": "bundles/org.openhab.binding.netatmo/src/main/java/org/openhab/binding/netatmo/internal/welcome/NAWelcomeHomeHandler.java", "diffHunk": "@@ -196,6 +201,19 @@ protected void triggerChannelIfRequired(String channelId) {\n         return detectedObjectTypes;\n     }\n \n+    private static Optional<NAWelcomeSubEvent.TypeEnum> findDetectedCategory(NAWelcomeEvent event) {\n+        String category = event.getCategory();\n+        if (category != null) {\n+            switch (category) {\n+                case \"human\":", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDg0NDQ2NA=="}, "originalCommit": {"oid": "4ae43e31b33c844cda6e3ec437f74f8fb1dfe0c6"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTQ4NzQxNw==", "bodyText": "But the \"event_list\" structure or outdoor events have nothing to do with the undocumented \"category\" element.\nI saw the same values (\"human\" and \"animal\"), but there is no guarantuee that there are not more possible values, the element and it's possible values aren't documented...\nSo it is a risk to use the same enum and could also today lead to an IllegalArgumentException.\nIf you say \"yes\" I change it to use the enum. ;-) It is some time left since 2.5.8, so potential errors could occur before to be able to fix that again.", "url": "https://github.com/openhab/openhab-addons/pull/8203#discussion_r461487417", "createdAt": "2020-07-28T10:43:32Z", "author": {"login": "Novanic"}, "path": "bundles/org.openhab.binding.netatmo/src/main/java/org/openhab/binding/netatmo/internal/welcome/NAWelcomeHomeHandler.java", "diffHunk": "@@ -196,6 +201,19 @@ protected void triggerChannelIfRequired(String channelId) {\n         return detectedObjectTypes;\n     }\n \n+    private static Optional<NAWelcomeSubEvent.TypeEnum> findDetectedCategory(NAWelcomeEvent event) {\n+        String category = event.getCategory();\n+        if (category != null) {\n+            switch (category) {\n+                case \"human\":", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDg0NDQ2NA=="}, "originalCommit": {"oid": "4ae43e31b33c844cda6e3ec437f74f8fb1dfe0c6"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTQ4ODM3Ng==", "bodyText": "Ah, it was answered by Netatmo yesterday, it should be safe to use the enum. :-)\nhttps://forum.netatmo.com/viewtopic.php?f=5&t=18506", "url": "https://github.com/openhab/openhab-addons/pull/8203#discussion_r461488376", "createdAt": "2020-07-28T10:45:24Z", "author": {"login": "Novanic"}, "path": "bundles/org.openhab.binding.netatmo/src/main/java/org/openhab/binding/netatmo/internal/welcome/NAWelcomeHomeHandler.java", "diffHunk": "@@ -196,6 +201,19 @@ protected void triggerChannelIfRequired(String channelId) {\n         return detectedObjectTypes;\n     }\n \n+    private static Optional<NAWelcomeSubEvent.TypeEnum> findDetectedCategory(NAWelcomeEvent event) {\n+        String category = event.getCategory();\n+        if (category != null) {\n+            switch (category) {\n+                case \"human\":", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDg0NDQ2NA=="}, "originalCommit": {"oid": "4ae43e31b33c844cda6e3ec437f74f8fb1dfe0c6"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTUwNjI4Mg==", "bodyText": "So, I think it is safe to proceed with an enum !", "url": "https://github.com/openhab/openhab-addons/pull/8203#discussion_r461506282", "createdAt": "2020-07-28T11:21:06Z", "author": {"login": "clinique"}, "path": "bundles/org.openhab.binding.netatmo/src/main/java/org/openhab/binding/netatmo/internal/welcome/NAWelcomeHomeHandler.java", "diffHunk": "@@ -196,6 +201,19 @@ protected void triggerChannelIfRequired(String channelId) {\n         return detectedObjectTypes;\n     }\n \n+    private static Optional<NAWelcomeSubEvent.TypeEnum> findDetectedCategory(NAWelcomeEvent event) {\n+        String category = event.getCategory();\n+        if (category != null) {\n+            switch (category) {\n+                case \"human\":", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDg0NDQ2NA=="}, "originalCommit": {"oid": "4ae43e31b33c844cda6e3ec437f74f8fb1dfe0c6"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTg0MjA4Ng==", "bodyText": "An unexpected value in the API should not result in an unhandled exception. I'd go for the enum version, too. Although it's not nice, you could catch the IAE.", "url": "https://github.com/openhab/openhab-addons/pull/8203#discussion_r461842086", "createdAt": "2020-07-28T20:00:47Z", "author": {"login": "fwolter"}, "path": "bundles/org.openhab.binding.netatmo/src/main/java/org/openhab/binding/netatmo/internal/welcome/NAWelcomeHomeHandler.java", "diffHunk": "@@ -196,6 +201,19 @@ protected void triggerChannelIfRequired(String channelId) {\n         return detectedObjectTypes;\n     }\n \n+    private static Optional<NAWelcomeSubEvent.TypeEnum> findDetectedCategory(NAWelcomeEvent event) {\n+        String category = event.getCategory();\n+        if (category != null) {\n+            switch (category) {\n+                case \"human\":", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDg0NDQ2NA=="}, "originalCommit": {"oid": "4ae43e31b33c844cda6e3ec437f74f8fb1dfe0c6"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjQ5MjQ0Nw==", "bodyText": "It is now declared as an enum within the swagger spec, like the sub-event type.", "url": "https://github.com/openhab/openhab-addons/pull/8203#discussion_r462492447", "createdAt": "2020-07-29T18:12:19Z", "author": {"login": "Novanic"}, "path": "bundles/org.openhab.binding.netatmo/src/main/java/org/openhab/binding/netatmo/internal/welcome/NAWelcomeHomeHandler.java", "diffHunk": "@@ -196,6 +201,19 @@ protected void triggerChannelIfRequired(String channelId) {\n         return detectedObjectTypes;\n     }\n \n+    private static Optional<NAWelcomeSubEvent.TypeEnum> findDetectedCategory(NAWelcomeEvent event) {\n+        String category = event.getCategory();\n+        if (category != null) {\n+            switch (category) {\n+                case \"human\":", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDg0NDQ2NA=="}, "originalCommit": {"oid": "4ae43e31b33c844cda6e3ec437f74f8fb1dfe0c6"}, "originalPosition": 31}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4519, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}