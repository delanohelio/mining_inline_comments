{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIxNjExOTM4", "number": 7725, "title": "[homekit] bugfix 7701. add delay on homekit bridge start in case of configuration diffs", "bodyText": "another fix for #7701 as proposed by @J-N-K  in PR #7702\nbackground:\n\nhome app resets sometimes configuration, e.g. losing scenes, room assignments, etc.\npotential reason: if HomeKit bridge starts before all items have been initialised / bundles started then home app will receive a shorter list of accessories than it has expected and could reset the configuration, e.g. remove missing items.\n\nsolution:\n\nstore number of accessories / items from last known configuration\ncompare number of accessories on start with last known configuration\ndelay HomeKit bridge start for 30 seconds (configurable) in case the current number of accessories is lower than last known configuration\n\nSigned-off-by: Eugen Freiter freiter@gmx.de", "createdAt": "2020-05-21T22:05:27Z", "url": "https://github.com/openhab/openhab-addons/pull/7725", "merged": true, "mergeCommit": {"oid": "21121a73afa3e4e3a02a985fb4e39306a2992935"}, "closed": true, "closedAt": "2020-05-22T14:50:57Z", "author": {"login": "yfre"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcjlALlgH2gAyNDIxNjExOTM4OmY5MGQwOWI4N2ZhM2RjZGZhODgzNDllYmRiOGY4Y2UyZTg3Yzk3MmU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcjvykKAFqTQxNjgxMTkzOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "f90d09b87fa3dcdfa88349ebdb8f8ce2e87c972e", "author": {"user": null}, "url": "https://github.com/openhab/openhab-addons/commit/f90d09b87fa3dcdfa88349ebdb8f8ce2e87c972e", "committedDate": "2020-05-21T22:00:07Z", "message": "add start delay in case of configuration differences. this reduces the risk of home app settings reset\n\nSigned-off-by: Eugen Freiter <freiter@gmx.de>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE2NzgxNjI5", "url": "https://github.com/openhab/openhab-addons/pull/7725#pullrequestreview-416781629", "createdAt": "2020-05-22T09:41:03Z", "commit": {"oid": "f90d09b87fa3dcdfa88349ebdb8f8ce2e87c972e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQwOTo0MTowM1rOGZRGNg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQwOTo0Mjo0M1rOGZRJTQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTE0NzcwMg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            | startDely                 | HomeKit start delay in seconds in case the number of accessories is lower than last time. This helps to avoid resetting home app in case not all items have been initialised properly before HomeKit integration start. | 30       |\n          \n          \n            \n            | startDelay               | HomeKit start delay in seconds in case the number of accessories is lower than last time. This helps to avoid resetting home app in case not all items have been initialised properly before HomeKit integration start. | 30       |", "url": "https://github.com/openhab/openhab-addons/pull/7725#discussion_r429147702", "createdAt": "2020-05-22T09:41:03Z", "author": {"login": "J-N-K"}, "path": "bundles/org.openhab.io.homekit/README.md", "diffHunk": "@@ -47,6 +47,7 @@ org.openhab.homekit:maximumTemperature=100\n | networkInterface         | IP address or domain name under which the HomeKit bridge can be reached. If no value is configured, the add-on uses the first network adapter address.                                                                                  | (none)        |\n | port                     | Port under which the HomeKit bridge can be reached.                                                                                                                                                                                     | 9123          |\n | pin                      | Pin code used for pairing with iOS devices. Apparently, pin codes are provided by Apple and represent specific device types, so they cannot be chosen freely. The pin code 031-45-154 is used in sample applications and known to work. | 031-45-154    |\n+| startDely                 | HomeKit start delay in seconds in case the number of accessories is lower than last time. This helps to avoid resetting home app in case not all items have been initialised properly before HomeKit integration start. | 30       |", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f90d09b87fa3dcdfa88349ebdb8f8ce2e87c972e"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTE0ODQ5Mw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\t<description>HomeKit start delay in case of items configuration differences.</description>\n          \n          \n            \n            \t\t\t<description>HomeKit start delay in case of item configuration differences.</description>", "url": "https://github.com/openhab/openhab-addons/pull/7725#discussion_r429148493", "createdAt": "2020-05-22T09:42:43Z", "author": {"login": "J-N-K"}, "path": "bundles/org.openhab.io.homekit/src/main/resources/ESH-INF/config/config.xml", "diffHunk": "@@ -37,7 +37,11 @@\n \t\t\t<label>Network Interface</label>\n \t\t\t<description>Defines the IP address of the network interface to expose the HomeKit integration on.</description>\n \t\t</parameter>\n-\n+\t\t<parameter name=\"startDelay\" type=\"integer\" required=\"true\" groupName=\"core\" unit=\"s\">\n+\t\t\t<label>Start Delay</label>\n+\t\t\t<description>HomeKit start delay in case of items configuration differences.</description>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f90d09b87fa3dcdfa88349ebdb8f8ce2e87c972e"}, "originalPosition": 7}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7062c9c3e3d847ff5a095a78f32dcee4fb520e5a", "author": {"user": null}, "url": "https://github.com/openhab/openhab-addons/commit/7062c9c3e3d847ff5a095a78f32dcee4fb520e5a", "committedDate": "2020-05-22T10:22:23Z", "message": "incorporate J-N-K feedback\n\nSigned-off-by: Eugen Freiter <freiter@gmx.de>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE2ODExOTM5", "url": "https://github.com/openhab/openhab-addons/pull/7725#pullrequestreview-416811939", "createdAt": "2020-05-22T10:34:12Z", "commit": {"oid": "7062c9c3e3d847ff5a095a78f32dcee4fb520e5a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 642, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}