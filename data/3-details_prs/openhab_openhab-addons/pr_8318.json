{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcwNDQ0MzMx", "number": 8318, "title": "[innogysmarthome] Reconnect fixes (#8182)", "bodyText": "This pull-request fixes a few reconnect problems regarding the WebSocket, see issue #8182 for more information\n\nWhen an error occurred while starting the websocket, no reconnect attempt was started which caused that the binding loses the connection (till the next restart of the server or binding), see issue #8182 for more information\nWhen an error occurs, it is now waited at least for 30 seconds for the next reconnect attempt to avoid too many requests (on re-occurring errors).\nFix for a side-effect of \"Fix possible resource leak #8080\" (the websocket were closed unnormally by default which could trigger false and about one reconnect attempt per second).\nNullPointerException fixed", "createdAt": "2020-08-19T20:41:14Z", "url": "https://github.com/openhab/openhab-addons/pull/8318", "merged": true, "mergeCommit": {"oid": "b621062f611e52be9c84f2b8482902ea93e20144"}, "closed": true, "closedAt": "2020-08-20T15:02:12Z", "author": {"login": "Novanic"}, "timelineItems": {"totalCount": 23, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcp9bOBgH2gAyNDcwNDQ0MzMxOjc4Njk5ZjkyMzQ3NTI2MmY3MTRiMTg2YTQ0NDBkMmE0MGVkZjEzMzE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdAxhjdAH2gAyNDcwNDQ0MzMxOjI4M2JkZTdlMjFiYTg0YTg1MzZlZTI5ZmMwYjNlNWVhYjRjNjQ4MDA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "78699f923475262f714b186a4440d2a40edf1331", "author": {"user": {"login": "Novanic", "name": "Sven Strohschein"}}, "url": "https://github.com/openhab/openhab-addons/commit/78699f923475262f714b186a4440d2a40edf1331", "committedDate": "2020-06-10T17:50:55Z", "message": "Merge pull request #1 from openhab/2.5.x\n\nUpdate"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ae6b89156403811be49f80a0ad7831957f7e3ff3", "author": {"user": {"login": "Novanic", "name": "Sven Strohschein"}}, "url": "https://github.com/openhab/openhab-addons/commit/ae6b89156403811be49f80a0ad7831957f7e3ff3", "committedDate": "2020-06-12T18:12:18Z", "message": "Merge pull request #2 from openhab/2.5.x\n\nUpdate"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "66abc11ea152aaa77d9bc64abe15f2dc94f65056", "author": {"user": {"login": "Novanic", "name": "Sven Strohschein"}}, "url": "https://github.com/openhab/openhab-addons/commit/66abc11ea152aaa77d9bc64abe15f2dc94f65056", "committedDate": "2020-06-13T20:20:47Z", "message": "Merge pull request #3 from openhab/2.5.x\n\nUpdate"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4f2cd511ce4312cde304741620c1765d56cd68c5", "author": {"user": {"login": "Novanic", "name": "Sven Strohschein"}}, "url": "https://github.com/openhab/openhab-addons/commit/4f2cd511ce4312cde304741620c1765d56cd68c5", "committedDate": "2020-06-16T16:31:06Z", "message": "Merge pull request #4 from openhab/2.5.x\n\nUpdate"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bd9cfc1d515b67147465297aabcfba123c8b0da2", "author": {"user": {"login": "Novanic", "name": "Sven Strohschein"}}, "url": "https://github.com/openhab/openhab-addons/commit/bd9cfc1d515b67147465297aabcfba123c8b0da2", "committedDate": "2020-06-18T18:57:15Z", "message": "Merge pull request #5 from openhab/2.5.x\n\nUpdate"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "de620021e378cd1f0823075981f891007372f606", "author": {"user": {"login": "Novanic", "name": "Sven Strohschein"}}, "url": "https://github.com/openhab/openhab-addons/commit/de620021e378cd1f0823075981f891007372f606", "committedDate": "2020-06-20T20:31:41Z", "message": "Merge pull request #6 from openhab/2.5.x\n\nUpdate"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ad272b75fe2a8099893fcb90c57c70c3030dbc78", "author": {"user": {"login": "Novanic", "name": "Sven Strohschein"}}, "url": "https://github.com/openhab/openhab-addons/commit/ad272b75fe2a8099893fcb90c57c70c3030dbc78", "committedDate": "2020-06-20T22:24:01Z", "message": "Merge pull request #7 from openhab/2.5.x\n\nUpdate"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "76c47b885b5ed65d8397451c2e5f6afee41e71a5", "author": {"user": {"login": "Novanic", "name": "Sven Strohschein"}}, "url": "https://github.com/openhab/openhab-addons/commit/76c47b885b5ed65d8397451c2e5f6afee41e71a5", "committedDate": "2020-06-21T08:57:04Z", "message": "Merge pull request #8 from openhab/2.5.x\n\nUpdate"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2ce668b656f52dd498baef0654be370687c42bcf", "author": {"user": {"login": "Novanic", "name": "Sven Strohschein"}}, "url": "https://github.com/openhab/openhab-addons/commit/2ce668b656f52dd498baef0654be370687c42bcf", "committedDate": "2020-07-06T17:43:22Z", "message": "Merge pull request #9 from openhab/2.5.x\n\nUpdate"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bcfbee2a19fec819cf7a7360594ca7a3fe0114d4", "author": {"user": {"login": "Novanic", "name": "Sven Strohschein"}}, "url": "https://github.com/openhab/openhab-addons/commit/bcfbee2a19fec819cf7a7360594ca7a3fe0114d4", "committedDate": "2020-07-10T09:39:03Z", "message": "Merge pull request #10 from openhab/2.5.x\n\nUpdate"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2d654b9963f163b6a9076eecc88b8770227c07e4", "author": {"user": {"login": "Novanic", "name": "Sven Strohschein"}}, "url": "https://github.com/openhab/openhab-addons/commit/2d654b9963f163b6a9076eecc88b8770227c07e4", "committedDate": "2020-07-24T18:12:05Z", "message": "Merge pull request #11 from openhab/2.5.x\n\nUpdate"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "05de7f6c4b3e11467f6620d578e612f49316ed98", "author": {"user": {"login": "Novanic", "name": "Sven Strohschein"}}, "url": "https://github.com/openhab/openhab-addons/commit/05de7f6c4b3e11467f6620d578e612f49316ed98", "committedDate": "2020-07-29T18:35:04Z", "message": "Merge pull request #12 from openhab/2.5.x\n\nUpdate"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "77b02c408ee56727652693e39e82ea0bc66cbcd9", "author": {"user": {"login": "Novanic", "name": "Sven Strohschein"}}, "url": "https://github.com/openhab/openhab-addons/commit/77b02c408ee56727652693e39e82ea0bc66cbcd9", "committedDate": "2020-08-19T20:22:36Z", "message": "Merge pull request #13 from openhab/2.5.x\n\nUpdate"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0d3589929d2bdb3816825c8633ae47b7c385e3ba", "author": {"user": {"login": "sstrohschein", "name": null}}, "url": "https://github.com/openhab/openhab-addons/commit/0d3589929d2bdb3816825c8633ae47b7c385e3ba", "committedDate": "2020-08-19T20:31:15Z", "message": "When an error occurs, it is waited at least for 30 seconds to avoid too many requests (on re-occurring errors).\n\nSigned-off-by: Sven Strohschein <sven.strohschein@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4c67a6f09b3cd02745ef020761d6ce1abea0a3b0", "author": {"user": {"login": "sstrohschein", "name": null}}, "url": "https://github.com/openhab/openhab-addons/commit/4c67a6f09b3cd02745ef020761d6ce1abea0a3b0", "committedDate": "2020-08-19T20:31:24Z", "message": "Code optimization\n\nSigned-off-by: Sven Strohschein <sven.strohschein@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d881c2d1272ca4f434beca81c9be7bccb3569f46", "author": {"user": {"login": "sstrohschein", "name": null}}, "url": "https://github.com/openhab/openhab-addons/commit/d881c2d1272ca4f434beca81c9be7bccb3569f46", "committedDate": "2020-08-19T20:31:33Z", "message": "Workaround for side-effect of \"Fix possible resource leak #8080\"\n\nSigned-off-by: Sven Strohschein <sven.strohschein@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a57883f839c440632e19af39123f351562674099", "author": {"user": {"login": "sstrohschein", "name": null}}, "url": "https://github.com/openhab/openhab-addons/commit/a57883f839c440632e19af39123f351562674099", "committedDate": "2020-08-19T20:31:41Z", "message": "Workaround for side-effect of \"Fix possible resource leak #8080\" - Improved by not rescheduling when the close/stop was actively triggered by the binding (in this case there is already a reschedule triggered)\n\nSigned-off-by: Sven Strohschein <sven.strohschein@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "34b0fa6e9b32d23ba3d8dc6cf71e24ef7fc152ce", "author": {"user": {"login": "sstrohschein", "name": null}}, "url": "https://github.com/openhab/openhab-addons/commit/34b0fa6e9b32d23ba3d8dc6cf71e24ef7fc152ce", "committedDate": "2020-08-19T20:31:49Z", "message": "- NPE fixed\n- Code-Optimization\n\nSigned-off-by: Sven Strohschein <sven.strohschein@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e5e9743805cf1c263604a14944cd52cb1550d2c5", "author": {"user": {"login": "sstrohschein", "name": null}}, "url": "https://github.com/openhab/openhab-addons/commit/e5e9743805cf1c263604a14944cd52cb1550d2c5", "committedDate": "2020-08-19T20:31:57Z", "message": "Code-Optimization\n\nSigned-off-by: Sven Strohschein <sven.strohschein@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "33e6422ff6343a971f9b43c15652a7d3e885cb05", "author": {"user": {"login": "sstrohschein", "name": null}}, "url": "https://github.com/openhab/openhab-addons/commit/33e6422ff6343a971f9b43c15652a7d3e885cb05", "committedDate": "2020-08-19T20:32:05Z", "message": "Code-Optimization\n\nSigned-off-by: Sven Strohschein <sven.strohschein@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "254233736bef269d939ec50a819a0807c94c1813", "author": {"user": {"login": "sstrohschein", "name": null}}, "url": "https://github.com/openhab/openhab-addons/commit/254233736bef269d939ec50a819a0807c94c1813", "committedDate": "2020-08-19T20:32:16Z", "message": "Code-Optimization\n\nSigned-off-by: Sven Strohschein <sven.strohschein@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxNjk1MDQx", "url": "https://github.com/openhab/openhab-addons/pull/8318#pullrequestreview-471695041", "createdAt": "2020-08-20T14:52:16Z", "commit": {"oid": "254233736bef269d939ec50a819a0807c94c1813"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxNDo1MjoxNlrOHEFWFg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxNDo1MjoxNlrOHEFWFg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDA0MzkyNg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    } else if(!closing) {\n          \n          \n            \n                    } else if (!closing) {", "url": "https://github.com/openhab/openhab-addons/pull/8318#discussion_r474043926", "createdAt": "2020-08-20T14:52:16Z", "author": {"login": "Hilbrand"}, "path": "bundles/org.openhab.binding.innogysmarthome/src/main/java/org/openhab/binding/innogysmarthome/internal/InnogyWebSocket.java", "diffHunk": "@@ -128,7 +128,8 @@ public void onConnect(Session session) {\n     public void onClose(int statusCode, String reason) {\n         if (statusCode == StatusCode.NORMAL) {\n             logger.info(\"Connection to innogy Webservice was closed normally.\");\n-        } else {\n+        } else if(!closing) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "254233736bef269d939ec50a819a0807c94c1813"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "283bde7e21ba84a8536ee29fc0b3e5eab4c64800", "author": {"user": {"login": "Hilbrand", "name": "Hilbrand Bouwkamp"}}, "url": "https://github.com/openhab/openhab-addons/commit/283bde7e21ba84a8536ee29fc0b3e5eab4c64800", "committedDate": "2020-08-20T14:59:14Z", "message": "Update bundles/org.openhab.binding.innogysmarthome/src/main/java/org/openhab/binding/innogysmarthome/internal/InnogyWebSocket.java"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 0, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}