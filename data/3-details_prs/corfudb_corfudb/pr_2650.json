{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU0ODQyODEw", "number": 2650, "title": "Fix NullPointerException in StreamView.", "bodyText": "Overview\nWhen read option is set to ignoreTrim and non cacheable, removeFromQueue\nwill throw NPE when encountering TrimmedException and trying to get the\ntrimmed addresses list from TrimmedException.\nWhy should this be merged:  Fix NPE\nChecklist (Definition of Done):\n\n There are no TODOs left in the code\n Coding conventions (e.g. for logging, unit tests) have been followed\n Change is covered by automated tests\n Public API has Javadoc", "createdAt": "2020-07-22T02:32:52Z", "url": "https://github.com/CorfuDB/CorfuDB/pull/2650", "merged": true, "mergeCommit": {"oid": "b0e5366023df97d44fa928a79afb22851d5cdfb9"}, "closed": true, "closedAt": "2020-07-23T18:40:14Z", "author": {"login": "WenbinZhu"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc3RisiABqjM1NzM4MzcyOTE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc3kfT9ABqjM1NzgwNDEzNzA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "dd74f57fce0f87eb5fe874057de6bbedb387de03", "author": {"user": {"login": "WenbinZhu", "name": "Wenbin Zhu"}}, "url": "https://github.com/CorfuDB/CorfuDB/commit/dd74f57fce0f87eb5fe874057de6bbedb387de03", "committedDate": "2020-07-22T02:26:42Z", "message": "Fix NullPointerException in StreamView.\n\nWhen read option is set to ignoreTrim and non cacheable, removeFromQueue\nwill throw NPE when encountering TrimmedException and trying to get the\ntrimmed addresses list from TrimmedException."}, "afterCommit": {"oid": "09f52ea815d0f704f9cd97cec1adcc8bd6a4de38", "author": {"user": {"login": "WenbinZhu", "name": "Wenbin Zhu"}}, "url": "https://github.com/CorfuDB/CorfuDB/commit/09f52ea815d0f704f9cd97cec1adcc8bd6a4de38", "committedDate": "2020-07-22T02:37:52Z", "message": "Fix NullPointerException in StreamView.\n\nWhen read option is set to ignoreTrim and non cacheable, removeFromQueue\nwill throw NPE when encountering TrimmedException and trying to get the\ntrimmed addresses list from TrimmedException."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "09f52ea815d0f704f9cd97cec1adcc8bd6a4de38", "author": {"user": {"login": "WenbinZhu", "name": "Wenbin Zhu"}}, "url": "https://github.com/CorfuDB/CorfuDB/commit/09f52ea815d0f704f9cd97cec1adcc8bd6a4de38", "committedDate": "2020-07-22T02:37:52Z", "message": "Fix NullPointerException in StreamView.\n\nWhen read option is set to ignoreTrim and non cacheable, removeFromQueue\nwill throw NPE when encountering TrimmedException and trying to get the\ntrimmed addresses list from TrimmedException."}, "afterCommit": {"oid": "a8d8890a484e413306b1f35ecce3c31af8f103bc", "author": {"user": {"login": "WenbinZhu", "name": "Wenbin Zhu"}}, "url": "https://github.com/CorfuDB/CorfuDB/commit/a8d8890a484e413306b1f35ecce3c31af8f103bc", "committedDate": "2020-07-22T02:49:01Z", "message": "Fix NullPointerException in StreamView.\n\nWhen read option is set to ignoreTrim and non cacheable, removeFromQueue\nwill throw NPE when encountering TrimmedException and trying to get the\ntrimmed addresses list from TrimmedException."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUyOTYyNDU2", "url": "https://github.com/CorfuDB/CorfuDB/pull/2650#pullrequestreview-452962456", "createdAt": "2020-07-22T03:02:43Z", "commit": {"oid": "a8d8890a484e413306b1f35ecce3c31af8f103bc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUyOTc1MDI3", "url": "https://github.com/CorfuDB/CorfuDB/pull/2650#pullrequestreview-452975027", "createdAt": "2020-07-22T03:48:29Z", "commit": {"oid": "a8d8890a484e413306b1f35ecce3c31af8f103bc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQwMzo0ODoyOVrOG1Rqtg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQwMzo0ODoyOVrOG1Rqtg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODUxNzE3NA==", "bodyText": "I think its cleaner to make this field final and assign the empty list in the constructors that don't need it.", "url": "https://github.com/CorfuDB/CorfuDB/pull/2650#discussion_r458517174", "createdAt": "2020-07-22T03:48:29Z", "author": {"login": "Maithem"}, "path": "runtime/src/main/java/org/corfudb/runtime/exceptions/TrimmedException.java", "diffHunk": "@@ -24,7 +25,7 @@\n      */\n     @Getter\n     @Setter\n-    private List<Long> trimmedAddresses;\n+    private List<Long> trimmedAddresses = Collections.emptyList();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a8d8890a484e413306b1f35ecce3c31af8f103bc"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUyOTc1Mjk4", "url": "https://github.com/CorfuDB/CorfuDB/pull/2650#pullrequestreview-452975298", "createdAt": "2020-07-22T03:49:33Z", "commit": {"oid": "a8d8890a484e413306b1f35ecce3c31af8f103bc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQwMzo0OTozM1rOG1Rrtg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQwMzo0OTozM1rOG1Rrtg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODUxNzQzMA==", "bodyText": "Cleaner to push down to the constructor.", "url": "https://github.com/CorfuDB/CorfuDB/pull/2650#discussion_r458517430", "createdAt": "2020-07-22T03:49:33Z", "author": {"login": "Maithem"}, "path": "runtime/src/main/java/org/corfudb/runtime/view/AddressSpaceView.java", "diffHunk": "@@ -727,7 +727,7 @@ private boolean isLogDataValid(long address, ILogData logData, boolean throwExce\n \n         if (logData.isTrimmed()) {\n             if (throwException) {\n-                throw new TrimmedException(String.format(\"Trimmed address %s\", address));\n+                throw new TrimmedException(Collections.singletonList(address));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a8d8890a484e413306b1f35ecce3c31af8f103bc"}, "originalPosition": 30}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUyOTc1NDM4", "url": "https://github.com/CorfuDB/CorfuDB/pull/2650#pullrequestreview-452975438", "createdAt": "2020-07-22T03:50:02Z", "commit": {"oid": "a8d8890a484e413306b1f35ecce3c31af8f103bc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a8d8890a484e413306b1f35ecce3c31af8f103bc", "author": {"user": {"login": "WenbinZhu", "name": "Wenbin Zhu"}}, "url": "https://github.com/CorfuDB/CorfuDB/commit/a8d8890a484e413306b1f35ecce3c31af8f103bc", "committedDate": "2020-07-22T02:49:01Z", "message": "Fix NullPointerException in StreamView.\n\nWhen read option is set to ignoreTrim and non cacheable, removeFromQueue\nwill throw NPE when encountering TrimmedException and trying to get the\ntrimmed addresses list from TrimmedException."}, "afterCommit": {"oid": "3348e1f41ca82172eebe39538b154c47e12f7a3e", "author": {"user": {"login": "WenbinZhu", "name": "Wenbin Zhu"}}, "url": "https://github.com/CorfuDB/CorfuDB/commit/3348e1f41ca82172eebe39538b154c47e12f7a3e", "committedDate": "2020-07-22T21:24:02Z", "message": "Fix NullPointerException in StreamView.\n\nWhen read option is set to ignoreTrim and non cacheable, removeFromQueue\nwill throw NPE when encountering TrimmedException and trying to get the\ntrimmed addresses list from TrimmedException."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3348e1f41ca82172eebe39538b154c47e12f7a3e", "author": {"user": {"login": "WenbinZhu", "name": "Wenbin Zhu"}}, "url": "https://github.com/CorfuDB/CorfuDB/commit/3348e1f41ca82172eebe39538b154c47e12f7a3e", "committedDate": "2020-07-22T21:24:02Z", "message": "Fix NullPointerException in StreamView.\n\nWhen read option is set to ignoreTrim and non cacheable, removeFromQueue\nwill throw NPE when encountering TrimmedException and trying to get the\ntrimmed addresses list from TrimmedException."}, "afterCommit": {"oid": "3df130b05e8b1827dea3bd3abab09ff2f7d49e89", "author": {"user": {"login": "WenbinZhu", "name": "Wenbin Zhu"}}, "url": "https://github.com/CorfuDB/CorfuDB/commit/3df130b05e8b1827dea3bd3abab09ff2f7d49e89", "committedDate": "2020-07-22T21:33:30Z", "message": "Fix NullPointerException in StreamView.\n\nWhen read option is set to ignoreTrim and non cacheable, removeFromQueue\nwill throw NPE when encountering TrimmedException and trying to get the\ntrimmed addresses list from TrimmedException."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f8447691f39b4f0315dc4528ed9b29441b3b9785", "author": {"user": {"login": "WenbinZhu", "name": "Wenbin Zhu"}}, "url": "https://github.com/CorfuDB/CorfuDB/commit/f8447691f39b4f0315dc4528ed9b29441b3b9785", "committedDate": "2020-07-23T00:40:57Z", "message": "Fix NullPointerException in StreamView.\n\nWhen read option is set to ignoreTrim and non cacheable, removeFromQueue\nwill throw NPE when encountering TrimmedException and trying to get the\ntrimmed addresses list from TrimmedException, but is null."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3df130b05e8b1827dea3bd3abab09ff2f7d49e89", "author": {"user": {"login": "WenbinZhu", "name": "Wenbin Zhu"}}, "url": "https://github.com/CorfuDB/CorfuDB/commit/3df130b05e8b1827dea3bd3abab09ff2f7d49e89", "committedDate": "2020-07-22T21:33:30Z", "message": "Fix NullPointerException in StreamView.\n\nWhen read option is set to ignoreTrim and non cacheable, removeFromQueue\nwill throw NPE when encountering TrimmedException and trying to get the\ntrimmed addresses list from TrimmedException."}, "afterCommit": {"oid": "f8447691f39b4f0315dc4528ed9b29441b3b9785", "author": {"user": {"login": "WenbinZhu", "name": "Wenbin Zhu"}}, "url": "https://github.com/CorfuDB/CorfuDB/commit/f8447691f39b4f0315dc4528ed9b29441b3b9785", "committedDate": "2020-07-23T00:40:57Z", "message": "Fix NullPointerException in StreamView.\n\nWhen read option is set to ignoreTrim and non cacheable, removeFromQueue\nwill throw NPE when encountering TrimmedException and trying to get the\ntrimmed addresses list from TrimmedException, but is null."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4315, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}