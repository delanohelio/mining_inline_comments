{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE0NDI3MTMz", "number": 2811, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QwMzozMzowNFrOE0pZFw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QwNToxOToyOFrOE0qWAQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIzNjM5NTc1OnYy", "diffSide": "RIGHT", "path": "test/src/test/java/org/corfudb/runtime/collections/CorfuStoreShimTest.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QwMzozMzowNFrOHsfPhg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQxOTo1NzoyMVrOHuUOkA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjQxMTI3MA==", "bodyText": "Maybe consider using .isLessThanOrEqualTo() instead?", "url": "https://github.com/CorfuDB/CorfuDB/pull/2811#discussion_r516411270", "createdAt": "2020-11-03T03:33:04Z", "author": {"login": "zfrenette"}, "path": "test/src/test/java/org/corfudb/runtime/collections/CorfuStoreShimTest.java", "diffHunk": "@@ -248,7 +249,7 @@ public void checkRevisionValidation() throws Exception {\n         }\n         assertThat(entry.getMetadata().getRevision()).isEqualTo(2L);\n         assertThat(entry.getMetadata().getCreateUser()).isEqualTo(\"user_1\");\n-        assertThat(entry.getMetadata().getLastModifiedTime()).isLessThan(System.currentTimeMillis());\n+        assertThat(entry.getMetadata().getLastModifiedTime()).isLessThan(System.currentTimeMillis() + 1);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2f56a318601302defe4dd2985214d3a9cfeb3724"}, "originalPosition": 78}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzYxNzk1OA==", "bodyText": "done", "url": "https://github.com/CorfuDB/CorfuDB/pull/2811#discussion_r517617958", "createdAt": "2020-11-04T20:39:39Z", "author": {"login": "xnull"}, "path": "test/src/test/java/org/corfudb/runtime/collections/CorfuStoreShimTest.java", "diffHunk": "@@ -248,7 +249,7 @@ public void checkRevisionValidation() throws Exception {\n         }\n         assertThat(entry.getMetadata().getRevision()).isEqualTo(2L);\n         assertThat(entry.getMetadata().getCreateUser()).isEqualTo(\"user_1\");\n-        assertThat(entry.getMetadata().getLastModifiedTime()).isLessThan(System.currentTimeMillis());\n+        assertThat(entry.getMetadata().getLastModifiedTime()).isLessThan(System.currentTimeMillis() + 1);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjQxMTI3MA=="}, "originalCommit": {"oid": "2f56a318601302defe4dd2985214d3a9cfeb3724"}, "originalPosition": 78}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODMyNzk1Mg==", "bodyText": "@xnull The change to isLessThanOrEqualTo() did not take effect in the patch", "url": "https://github.com/CorfuDB/CorfuDB/pull/2811#discussion_r518327952", "createdAt": "2020-11-05T19:57:21Z", "author": {"login": "WenbinZhu"}, "path": "test/src/test/java/org/corfudb/runtime/collections/CorfuStoreShimTest.java", "diffHunk": "@@ -248,7 +249,7 @@ public void checkRevisionValidation() throws Exception {\n         }\n         assertThat(entry.getMetadata().getRevision()).isEqualTo(2L);\n         assertThat(entry.getMetadata().getCreateUser()).isEqualTo(\"user_1\");\n-        assertThat(entry.getMetadata().getLastModifiedTime()).isLessThan(System.currentTimeMillis());\n+        assertThat(entry.getMetadata().getLastModifiedTime()).isLessThan(System.currentTimeMillis() + 1);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjQxMTI3MA=="}, "originalCommit": {"oid": "2f56a318601302defe4dd2985214d3a9cfeb3724"}, "originalPosition": 78}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIzNjU1MTY5OnYy", "diffSide": "RIGHT", "path": "test/src/test/java/org/corfudb/runtime/collections/CorfuStoreShimTest.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QwNToxOToyOFrOHsgjiQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QwNzoxOTo0NlrOHsiZjA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjQzMjc3Nw==", "bodyText": "Please add a comment on why you are comparing with a future timestamp. I believe you did it to avoid having to sleep() which I think is a great idea, but would be good to document.", "url": "https://github.com/CorfuDB/CorfuDB/pull/2811#discussion_r516432777", "createdAt": "2020-11-03T05:19:28Z", "author": {"login": "hisundar"}, "path": "test/src/test/java/org/corfudb/runtime/collections/CorfuStoreShimTest.java", "diffHunk": "@@ -248,7 +249,7 @@ public void checkRevisionValidation() throws Exception {\n         }\n         assertThat(entry.getMetadata().getRevision()).isEqualTo(2L);\n         assertThat(entry.getMetadata().getCreateUser()).isEqualTo(\"user_1\");\n-        assertThat(entry.getMetadata().getLastModifiedTime()).isLessThan(System.currentTimeMillis());\n+        assertThat(entry.getMetadata().getLastModifiedTime()).isLessThan(System.currentTimeMillis() + 1);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2f56a318601302defe4dd2985214d3a9cfeb3724"}, "originalPosition": 78}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjQ2Mjk4OA==", "bodyText": "Yeah, probably then @zfrenette 's idea of using isLessThanOrEqualTo would be self-describing, now it seems that we compare with the future", "url": "https://github.com/CorfuDB/CorfuDB/pull/2811#discussion_r516462988", "createdAt": "2020-11-03T07:19:46Z", "author": {"login": "xnull"}, "path": "test/src/test/java/org/corfudb/runtime/collections/CorfuStoreShimTest.java", "diffHunk": "@@ -248,7 +249,7 @@ public void checkRevisionValidation() throws Exception {\n         }\n         assertThat(entry.getMetadata().getRevision()).isEqualTo(2L);\n         assertThat(entry.getMetadata().getCreateUser()).isEqualTo(\"user_1\");\n-        assertThat(entry.getMetadata().getLastModifiedTime()).isLessThan(System.currentTimeMillis());\n+        assertThat(entry.getMetadata().getLastModifiedTime()).isLessThan(System.currentTimeMillis() + 1);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjQzMjc3Nw=="}, "originalCommit": {"oid": "2f56a318601302defe4dd2985214d3a9cfeb3724"}, "originalPosition": 78}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1749, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}