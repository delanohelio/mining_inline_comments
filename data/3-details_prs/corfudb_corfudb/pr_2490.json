{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk0MzU3NjU0", "number": 2490, "title": "Fix CorfuTable values() API that incorrectly deduplicates on return.", "bodyText": "Overview\nCorfuTable values() API is inherited from Java Map interface, which\nis not supposed to perform deduplication on return. If CorfuTable\ncontains duplicates in values, the current values() API would return\nless values than expected. This patch fixes the API to return an\nimmutable list instead of a set.\nRelated issue(s) (if applicable): #2489\nChecklist (Definition of Done):\n\n There are no TODOs left in the code\n Coding conventions (e.g. for logging, unit tests) have been followed\n Change is covered by automated tests\n Public API has Javadoc", "createdAt": "2020-03-26T18:51:48Z", "url": "https://github.com/CorfuDB/CorfuDB/pull/2490", "merged": true, "mergeCommit": {"oid": "6cd43d2e15ba041888972ab1c6a8b00a6bd75b07"}, "closed": true, "closedAt": "2020-04-17T18:32:03Z", "author": {"login": "WenbinZhu"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcRhBfAgFqTM4MjMzMzA0Mg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcXUqjJgFqTM5MjQwNDIyMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgyMzMzMDQy", "url": "https://github.com/CorfuDB/CorfuDB/pull/2490#pullrequestreview-382333042", "createdAt": "2020-03-26T19:11:17Z", "commit": {"oid": "8abd3dd6341ecb71bd25cb839eee4f32968c029f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgyNDc4ODM3", "url": "https://github.com/CorfuDB/CorfuDB/pull/2490#pullrequestreview-382478837", "createdAt": "2020-03-26T23:01:52Z", "commit": {"oid": "8abd3dd6341ecb71bd25cb839eee4f32968c029f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7411a02a959b90f809386df08183ebd8b5ab0019", "author": {"user": {"login": "WenbinZhu", "name": "Wenbin Zhu"}}, "url": "https://github.com/CorfuDB/CorfuDB/commit/7411a02a959b90f809386df08183ebd8b5ab0019", "committedDate": "2020-03-30T23:23:01Z", "message": "Merge branch 'master' into fix_corfutable_values"}, "afterCommit": {"oid": "e165f908531693965e8ad5c9e3052fa1d2734cfd", "author": {"user": {"login": "WenbinZhu", "name": "Wenbin Zhu"}}, "url": "https://github.com/CorfuDB/CorfuDB/commit/e165f908531693965e8ad5c9e3052fa1d2734cfd", "committedDate": "2020-03-31T22:04:04Z", "message": "Fix CorfuTable values() API that incorrectly deduplicates on return.\n\nCorfuTable values() API is inherited from Java Map interface, which\nis not supposed to perform deduplication on return. If CorfuTable\ncontains duplicates in values, the current values() API would return\nless values than expected. This patch fixes the API to return an\nimmutable list instead of a set."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg2MDcxOTM0", "url": "https://github.com/CorfuDB/CorfuDB/pull/2490#pullrequestreview-386071934", "createdAt": "2020-04-02T02:34:40Z", "commit": {"oid": "e165f908531693965e8ad5c9e3052fa1d2734cfd"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg2MDgxMTYz", "url": "https://github.com/CorfuDB/CorfuDB/pull/2490#pullrequestreview-386081163", "createdAt": "2020-04-02T03:09:33Z", "commit": {"oid": "e165f908531693965e8ad5c9e3052fa1d2734cfd"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQwMzowOTozM1rOF_ZzFA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQwMzowOTozM1rOF_ZzFA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjAyNzI4NA==", "bodyText": "please replace by\nreturn ImmutableList.copyOf(mainMap.values());", "url": "https://github.com/CorfuDB/CorfuDB/pull/2490#discussion_r402027284", "createdAt": "2020-04-02T03:09:33Z", "author": {"login": "xnull"}, "path": "runtime/src/main/java/org/corfudb/runtime/collections/CorfuTable.java", "diffHunk": "@@ -473,7 +474,7 @@ public void clear() {\n     public @Nonnull Collection<V> values() {\n         return mainMap.values()\n                 .stream()\n-                .collect(ImmutableSet.toImmutableSet());\n+                .collect(ImmutableList.toImmutableList());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e165f908531693965e8ad5c9e3052fa1d2734cfd"}, "originalPosition": 12}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "379f102312fbf08b9647a65ccc88f9e66cbf40d9", "author": {"user": {"login": "WenbinZhu", "name": "Wenbin Zhu"}}, "url": "https://github.com/CorfuDB/CorfuDB/commit/379f102312fbf08b9647a65ccc88f9e66cbf40d9", "committedDate": "2020-04-13T19:30:45Z", "message": "Fix CorfuTable values() API that incorrectly deduplicates on return.\n\nCorfuTable values() API is inherited from Java Map interface, which\nis not supposed to perform deduplication on return. If CorfuTable\ncontains duplicates in values, the current values() API would return\nless values than expected. This patch fixes the API to return an\nimmutable list instead of a set."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e165f908531693965e8ad5c9e3052fa1d2734cfd", "author": {"user": {"login": "WenbinZhu", "name": "Wenbin Zhu"}}, "url": "https://github.com/CorfuDB/CorfuDB/commit/e165f908531693965e8ad5c9e3052fa1d2734cfd", "committedDate": "2020-03-31T22:04:04Z", "message": "Fix CorfuTable values() API that incorrectly deduplicates on return.\n\nCorfuTable values() API is inherited from Java Map interface, which\nis not supposed to perform deduplication on return. If CorfuTable\ncontains duplicates in values, the current values() API would return\nless values than expected. This patch fixes the API to return an\nimmutable list instead of a set."}, "afterCommit": {"oid": "379f102312fbf08b9647a65ccc88f9e66cbf40d9", "author": {"user": {"login": "WenbinZhu", "name": "Wenbin Zhu"}}, "url": "https://github.com/CorfuDB/CorfuDB/commit/379f102312fbf08b9647a65ccc88f9e66cbf40d9", "committedDate": "2020-04-13T19:30:45Z", "message": "Fix CorfuTable values() API that incorrectly deduplicates on return.\n\nCorfuTable values() API is inherited from Java Map interface, which\nis not supposed to perform deduplication on return. If CorfuTable\ncontains duplicates in values, the current values() API would return\nless values than expected. This patch fixes the API to return an\nimmutable list instead of a set."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkyNDA0MjIz", "url": "https://github.com/CorfuDB/CorfuDB/pull/2490#pullrequestreview-392404223", "createdAt": "2020-04-13T20:10:55Z", "commit": {"oid": "379f102312fbf08b9647a65ccc88f9e66cbf40d9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4432, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}